<html lang="zh-Hans" ><head></head><body id="build-tool-plugins" class="book toc2 toc-left" >﻿
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>生成工具插件</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<div id="header">
<h1>生成工具插件</h1>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#build-tool-plugins-maven-plugin">1。Spring Boot Maven插件</a>
<ul class="sectlevel2">
<li><a href="#build-tool-plugins-include-maven-plugin">1.1。包括插件</a></li>
<li><a href="#build-tool-plugins-maven-packaging">1.2。包装可执行的Jar和War文件</a></li>
</ul>
</li>
<li><a href="#build-tool-plugins-gradle-plugin">2。Spring Boot Gradle插件</a></li>
<li><a href="#build-tool-plugins-antlib">3。Spring Boot AntLib模块</a>
<ul class="sectlevel2">
<li><a href="#spring-boot-ant-tasks">3.1。Spring Boot Ant任务</a>
<ul class="sectlevel3">
<li><a href="#spring-boot-ant-exejar">3.1.1。<code>spring-boot:exejar</code></a></li>
<li><a href="#spring-boot-ant-exejar-examples">3.1.2。例子</a></li>
</ul>
</li>
<li><a href="#spring-boot-ant-findmainclass">3.2。<code>spring-boot:findmainclass</code></a>
<ul class="sectlevel3">
<li><a href="#spring-boot-ant-findmainclass-examples">3.2.1。例子</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#build-tool-plugins-other-build-systems">4。支持其他构建系统</a>
<ul class="sectlevel2">
<li><a href="#build-tool-plugins-repackaging-archives">4.1。重新打包档案</a></li>
<li><a href="#build-tool-plugins-nested-libraries">4.2。嵌套库</a></li>
<li><a href="#build-tool-plugins-find-a-main-class">4.3。寻找主班</a></li>
<li><a href="#build-tool-plugins-repackage-implementation">4.4。重新打包实施示例</a></li>
</ul>
</li>
<li><a href="#build-tool-plugins-whats-next">5，接下来要读什么</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot为Maven和Gradle提供了构建工具插件。插件提供了多种功能，包括可执行jar的打包。本节提供有关这两个插件的更多详细信息，以及在扩展不受支持的构建系统时所需的一些帮助。如果您只是入门，则可能需要先阅读“ <a href="using-spring-boot.html#using-boot-build-systems">using-spring-boot.html</a> ”部分中的“ <a href="using-spring-boot.html#using-boot">using-spring-boot.html</a> ”。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-maven-plugin"><a class="anchor" href="#build-tool-plugins-maven-plugin"></a> 1。Spring Boot Maven插件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot Maven插件在Maven中提供了Spring Boot支持，使您可以打包可执行jar或war归档文件并“就地”运行应用程序。要使用它，必须使用Maven 3.2（或更高版本）。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">请参阅<a href="https://docs.spring.io/spring-boot/docs/2.2.1.RELEASE/maven-plugin/">Spring Boot Maven插件站点</a>以获取完整的插件文档。
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-include-maven-plugin"><a class="anchor" href="#build-tool-plugins-include-maven-plugin"></a> 1.1。包括插件</h3>
<div class="paragraph">
<p>要使用Spring Boot Maven插件，请在<code>plugins</code>您的部分<code>pom.xml</code> ，如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;!-- ... --&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;repackage&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>前面的配置重新打包了在<code>package</code> Maven生命周期的阶段。以下示例显示了重新包装的jar和原始jar <code>target</code>目录：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package
$ ls target/*.jar
target/myproject-1.0.0.jar target/myproject-1.0.0.jar.original</pre>
</div>
</div>
<div class="paragraph">
<p>如果您不包括<code><execution/></code>配置，如先前示例所示，您可以自己运行插件（但也必须同时使用软件包目标），如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package spring-boot:repackage
$ ls target/*.jar
target/myproject-1.0.0.jar target/myproject-1.0.0.jar.original</pre>
</div>
</div>
<div class="paragraph">
<p>如果您使用里程碑或快照版本，则还需要添加适当的<code>pluginRepository</code>元素，如以下清单所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;spring-snapshots&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
    &lt;/pluginRepository&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;spring-milestones&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
    &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-maven-packaging"><a class="anchor" href="#build-tool-plugins-maven-packaging"></a> 1.2。包装可执行的Jar和War文件</h3>
<div class="paragraph">
<p>一旦<code>spring-boot-maven-plugin</code>已包含在您的<code>pom.xml</code> ，它会自动尝试通过使用<code>spring-boot:repackage</code>目标。您应该使用常规配置将项目配置为构建罐子或战争（视情况而定） <code>packaging</code>元素，如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;!-- ... --&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;!-- ... --&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>在启动过程中，Spring Boot会增强您现有的存档<code>package</code>相。您可以通过使用配置选项（如下所示）或通过添加一个指定的名称来指定要启动的主类。 <code>Main-Class</code>清单的属性。如果您未指定主类，则插件会搜索带有<code>public static void main(String[] args)</code>方法。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;mainClass&gt;com.example.app.Main&lt;/mainClass&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>要构建和运行项目工件，可以输入以下内容：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package
$ java -jar target/mymodule-0.0.1-SNAPSHOT.jar</pre>
</div>
</div>
<div class="paragraph">
<p>要构建一个既可执行又可部署到外部容器的war文件，您需要将嵌入式容器的依赖关系标记为“已提供”，如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;!-- ... --&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;
    &lt;!-- ... --&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- ... --&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="小费"></i>
</td>
<td class="content">有关如何创建可部署war文件的更多详细信息，请参见“ <a href="howto.html#howto-create-a-deployable-war-file">howto.html</a> ”部分。
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><a href="https://docs.spring.io/spring-boot/docs/2.2.1.RELEASE/maven-plugin/">插件信息页面</a>中提供了高级配置选项和示例。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-gradle-plugin"><a class="anchor" href="#build-tool-plugins-gradle-plugin"></a> 2。Spring Boot Gradle插件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot Gradle插件在Gradle中提供了Spring Boot支持，可让您打包可执行jar或war归档文件，运行Spring Boot应用程序以及使用由以下工具提供的依赖项管理： <code>spring-boot-dependencies</code> 。它需要Gradle 5.x（也支持4.10，但不支持此支持，并且在将来的版本中将删除该支持）。请参考插件的文档以了解更多信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>参考（ <a href="https://docs.spring.io/spring-boot/docs/2.2.1.RELEASE/gradle-plugin/reference/html/">HTML</a>和<a href="https://docs.spring.io/spring-boot/docs/2.2.1.RELEASE/gradle-plugin/reference/pdf/spring-boot-gradle-plugin-reference.pdf">PDF</a> ）</p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-boot/docs/2.2.1.RELEASE/gradle-plugin/reference/api/">API</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-antlib"><a class="anchor" href="#build-tool-plugins-antlib"></a> 3。Spring Boot AntLib模块</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot AntLib模块为Apache Ant提供了基本的Spring Boot支持。您可以使用该模块创建可执行jar。要使用该模块，您需要声明一个额外的<code>spring-boot</code>您的命名空间<code>build.xml</code> ，如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns:ivy="antlib:org.apache.ivy.ant"
    xmlns:spring-boot="antlib:org.springframework.boot.ant"
    name="myapp" default="build"&gt;
    ...
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>您需要记住使用<code>-lib</code>选项，如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ant -lib &lt;folder containing spring-boot-antlib-2.2.1.RELEASE.jar&gt;</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="小费"></i>
</td>
<td class="content">“使用Spring Boot”部分包括<a href="using-spring-boot.html#using-boot-ant">将Apache Ant与<code>spring-boot-antlib</code></a> 。
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="spring-boot-ant-tasks"><a class="anchor" href="#spring-boot-ant-tasks"></a> 3.1。Spring Boot Ant任务</h3>
<div class="paragraph">
<p>一旦<code>spring-boot-antlib</code>命名空间已声明，以下其他任务可用：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-boot-ant-exejar"><code>spring-boot:exejar</code></a></p>
</li>
<li>
<p><a href="#spring-boot-ant-findmainclass"><code>spring-boot:findmainclass</code></a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="spring-boot-ant-exejar"><a class="anchor" href="#spring-boot-ant-exejar"></a> 3.1.1。<code>spring-boot:exejar</code></h4>
<div class="paragraph">
<p>您可以使用<code>exejar</code>创建Spring Boot可执行jar的任务。任务支持以下属性：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width:20%">
<col style="width:40%">
<col style="width:40%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">属性</th>
<th class="tableblock halign-left valign-top">描述</th>
<th class="tableblock halign-left valign-top">需要</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>destfile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要创建的目标jar文件</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java类文件的根目录</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>start-class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要运行的主要应用程序类</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">否<em>（默认为找到的第一个类声明一个<code>main</code>方法）</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>以下嵌套元素可用于任务：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width:20%">
<col style="width:80%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">元件</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">一个或多个<a href="https://ant.apache.org/manual/Types/resources.html#collection">资源集合，</a>描述应添加到创建的jar文件内容中的一组<a href="https://ant.apache.org/manual/Types/resources.html">资源</a> 。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">应该将一个或多个<a href="https://ant.apache.org/manual/Types/resources.html#collection">资源集合</a>添加到组成应用程序运行时依赖项类路径的jar库集合中。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="spring-boot-ant-exejar-examples"><a class="anchor" href="#spring-boot-ant-exejar-examples"></a> 3.1.2。例子</h4>
<div class="paragraph">
<p>本节显示了两个Ant任务示例。</p>
</div>
<div class="listingblock">
<div class="title">指定开始等级</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;spring-boot:exejar destfile="target/my-application.jar"
        classes="target/classes" start-class="com.example.MyApplication"&gt;
    &lt;resources&gt;
        &lt;fileset dir="src/main/resources" /&gt;
    &lt;/resources&gt;
    &lt;lib&gt;
        &lt;fileset dir="lib" /&gt;
    &lt;/lib&gt;
&lt;/spring-boot:exejar&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">检测入门班</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;exejar destfile="target/my-application.jar" classes="target/classes"&gt;
    &lt;lib&gt;
        &lt;fileset dir="lib" /&gt;
    &lt;/lib&gt;
&lt;/exejar&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-boot-ant-findmainclass"><a class="anchor" href="#spring-boot-ant-findmainclass"></a> 3.2。<code>spring-boot:findmainclass</code></h3>
<div class="paragraph">
<p>的<code>findmainclass</code>任务由内部使用<code>exejar</code>找到一个声明一个类的类<code>main</code> 。如有必要，您也可以直接在构建中使用此任务。支持以下属性：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width:20%">
<col style="width:40%">
<col style="width:40%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">属性</th>
<th class="tableblock halign-left valign-top">描述</th>
<th class="tableblock halign-left valign-top">需要</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classesroot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java类文件的根目录</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是的<em>（除非<code>mainclass</code>被指定）</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mainclass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可用于短路<code>main</code>类搜索</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">应该与结果一起设置的Ant属性</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">否<em>（如果未指定，将记录结果）</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="spring-boot-ant-findmainclass-examples"><a class="anchor" href="#spring-boot-ant-findmainclass-examples"></a> 3.2.1。例子</h4>
<div class="paragraph">
<p>本节包含三个使用示例<code>findmainclass</code> 。</p>
</div>
<div class="listingblock">
<div class="title">查找并记录</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;findmainclass classesroot="target/classes" /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">查找并设置</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;findmainclass classesroot="target/classes" property="main-class" /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">覆盖并设置</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;findmainclass mainclass="com.example.MainClass" property="main-class" /&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-other-build-systems"><a class="anchor" href="#build-tool-plugins-other-build-systems"></a> 4。支持其他构建系统</h2>
<div class="sectionbody">
<div class="paragraph">
<p>如果要使用Maven，Gradle或Ant以外的构建工具，则可能需要开发自己的插件。可执行jar需要遵循特定的格式，某些条目需要以未压缩的形式编写（有关详细信息，请参见附录中的“ <a href="appendix-executable-jar-format.html#executable-jar">可执行jar格式</a> ”部分）。</p>
</div>
<div class="paragraph">
<p>Spring Boot Maven和Gradle插件都利用了<code>spring-boot-loader-tools</code>实际生成罐子。如果需要，可以直接使用此库。</p>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-repackaging-archives"><a class="anchor" href="#build-tool-plugins-repackaging-archives"></a> 4.1。重新打包档案</h3>
<div class="paragraph">
<p>要重新打包现有存档，使其成为一个独立的可执行存档，请使用<code>org.springframework.boot.loader.tools.Repackager</code> 。的<code>Repackager</code>类采用单个构造函数参数，该参数引用现有的jar或war存档。使用两个可用之一<code>repackage()</code>替换原始文件或写入新目标的方法。在重新打包程序运行之前，还可以对其进行各种设置。</p>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-nested-libraries"><a class="anchor" href="#build-tool-plugins-nested-libraries"></a> 4.2。嵌套库</h3>
<div class="paragraph">
<p>重新打包档案时，可以使用<code>org.springframework.boot.loader.tools.Libraries</code>接口。我们没有提供任何具体的实现<code>Libraries</code>在这里，因为它们通常是特定于构建系统的。</p>
</div>
<div class="paragraph">
<p>如果您的存档中已经包含库，则可以使用<code>Libraries.NONE</code> 。</p>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-find-a-main-class"><a class="anchor" href="#build-tool-plugins-find-a-main-class"></a> 4.3。寻找主班</h3>
<div class="paragraph">
<p>如果不使用<code>Repackager.setMainClass()</code>为了指定主类，重新打包程序使用<a href="https://asm.ow2.io/">ASM</a>读取类文件，并尝试使用以下命令找到合适的类： <code>public static void main(String[] args)</code>方法。如果找到多个候选者，则会引发异常。</p>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-repackage-implementation"><a class="anchor" href="#build-tool-plugins-repackage-implementation"></a> 4.4。重新打包实施示例</h3>
<div class="paragraph">
<p>以下示例显示了典型的重新打包实现：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Repackager repackager = new Repackager(sourceJarFile);
repackager.setBackupSource(false);
repackager.repackage(new Libraries() {
            @Override
            public void doWithLibraries(LibraryCallback callback) throws IOException {
                // Build system specific implementation, callback for each dependency
                // callback.library(new Library(nestedFile, LibraryScope.COMPILE));
            }
        });</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-whats-next"><a class="anchor" href="#build-tool-plugins-whats-next"></a> 5，接下来要读什么</h2>
<div class="sectionbody">
<div class="paragraph">
<p>如果您对构建工具插件的工作方式感兴趣，可以查看<a href="https://github.com/spring-projects/spring-boot/tree/v2.2.1.RELEASE/spring-boot-project/spring-boot-tools"><code>spring-boot-tools</code></a> GitHub上的模块。可执行jar格式的更多技术细节在<a href="appendix-executable-jar-format.html#executable-jar">附录中介绍</a> 。</p>
</div>
<div class="paragraph">
<p>如果您有与构建相关的特定问题，可以查看“操作<a href="howto.html#howto">方法</a> ”指南。</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">最近更新时间2019-11-06 21:59:19 UTC</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/github.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>

</body></html>