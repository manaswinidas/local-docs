<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head></head><body class="topBarDisabled" >﻿
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Stephane Nicoll">
    <meta name="Date-Creation-yyyymmdd" content="20140506">
    <meta name="Date-Revision-yyyymmdd" content="20191106">
    <meta http-equiv="Content-Language" content="en">
    <title>Spring Boot Maven插件–用法</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css">
    <link rel="stylesheet" href="./css/site.css">
    <link rel="stylesheet" href="./css/print.css" media="print">
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      
    
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Spring Boot Maven插件</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">上次发布时间：2019-11-06 <span class="divider">|</span>
</li>
          <li id="projectVersion">版本：2.2.1。发布</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">总览</li>
    <li><a href="index.html" title="介绍"><span class="none"></span>介绍</a>  </li>
    <li><a href="plugin-info.html" title="目标"><span class="none"></span>目标</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>用法</a>
  </li>
          <li class="nav-header">例子</li>
    <li><a href="examples/repackage-classifier.html" title="自定义重新包装分类器"><span class="none"></span>自定义重新包装分类器</a>  </li>
    <li><a href="examples/repackage-name.html" title="自订重新包装名称"><span class="none"></span>自订重新包装名称</a>  </li>
    <li><a href="examples/repackage-disable-attach.html" title="本地重新打包的工件"><span class="none"></span>本地重新打包的工件</a>  </li>
    <li><a href="examples/exclude-dependency.html" title="排除依赖项"><span class="none"></span>排除依赖项</a>  </li>
    <li><a href="examples/run-debug.html" title="调试应用程序"><span class="none"></span>调试应用程序</a>  </li>
    <li><a href="examples/run-system-properties.html" title="使用系统属性"><span class="none"></span>使用系统属性</a>  </li>
    <li><a href="examples/run-env-variables.html" title="使用环境变量"><span class="none"></span>使用环境变量</a>  </li>
    <li><a href="examples/it-random-port.html" title="随机端口用于集成测试"><span class="none"></span>随机端口用于集成测试</a>  </li>
    <li><a href="examples/it-skip.html" title="跳过集成测试"><span class="none"></span>跳过集成测试</a>  </li>
    <li><a href="examples/run-profiles.html" title="指定活动的配置文件"><span class="none"></span>指定活动的配置文件</a>  </li>
    <li><a href="examples/build-info.html" title="生成构建信息"><span class="none"></span>生成构建信息</a>  </li>
    <li><a href="examples/custom-layout.html" title="自定义布局"><span class="none"></span>自定义布局</a>  </li>
          <li class="nav-header">项目文件</li>
    <li><a href="project-info.html" title="项目信息"><span class="icon-chevron-right"></span>项目信息</a>  </li>
    <li><a href="project-reports.html" title="项目报告"><span class="icon-chevron-right"></span>项目报告</a>  </li>
  </ul>
          <hr>
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="由Maven建造" class="poweredBy"><img class="builtBy" alt="由Maven建造" src="./images/logos/maven-feather.png"></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn" class="span10">
<section>
<h2><a name="Usage"></a>用法</h2>
<p>该插件提供了使用Spring Boot应用程序的几个目标：</p>
<ul>
<li><code>repackage</code> ：创建可自动执行的jar或war文件。它可以替换常规工件，或者可以使用单独的<b>分类器</b>附加到构建生命周期。</li>
<li><code>run</code> ：使用几个选项运行您的Spring Boot应用程序以将参数传递给它。</li>
<li><code>start</code>和<code>stop</code> ：将您的Spring Boot应用程序集成到<code>integration-test</code>阶段，以便应用程序在此之前启动。</li>
<li><code>build-info</code> ：生成执行器可以使用的构建信息。</li></ul>
<p>每个目标将在下面进一步描述。</p><section>
<h3><a name="Repackaging_an_application"></a>重新打包应用程序</h3>
<p>为了重新打包您的应用程序，您只需要在您的插件中添加对该插件的引用<code>pom.xml</code> ：</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;repackage&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>上面的示例重新打包了在Maven生命周期的打包阶段构建的jar或war，包括任何<code>provided</code>项目中定义的依赖项。如果其中一些依赖项需要排除，则可以使用排除选项之一，有关更多详细信息，请参见<a href="./examples/exclude-dependency.html">排除依赖项</a> 。请注意<code>outputFileNameMapping</code>的功能<code>maven-war-plugin</code>目前不支持。</p>
<p>默认情况下，会自动排除Devtools（您可以使用<code>excludeDevtools</code>属性）。为了使与<code>war</code>包装， <code>spring-boot-devtools</code>依赖项必须设置为<code>optional</code>或与<code>provided</code>范围。</p>
<p>原始（即不可执行）工件被重命名为<code>.original</code>默认情况下，但也可以使用自定义分类器保留原始工件。</p>
<p>该插件会重写您的清单，尤其是它管理<b>Main-Class</b>和<b>Start-Class</b>条目，因此，如果默认设置不起作用，则必须在其中进行配置（不在jar插件中）。清单中的<b>Main-Class</b>实际上是由启动插件的<b>layout</b>属性控制的，例如</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;configuration&gt;
        &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;
        &lt;layout&gt;ZIP&lt;/layout&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;repackage&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>的<code>layout</code>属性默认为基于存档类型的猜测（ <code>jar</code>要么<code>war</code> ）。提供以下布局：</p>
<ul>
<li><code>JAR</code> ：常规的可执行JAR布局。</li>
<li><code>WAR</code> ：可执行的WAR布局。 <code>provided</code>依赖项放在<code>WEB-INF/lib-provided</code>为了避免任何冲突<code>war</code>部署在servlet容器中。</li>
<li><code>ZIP</code> （别名为<code>DIR</code> ）：类似于<code>JAR</code>布局使用<code>PropertiesLauncher</code> 。</li>
<li><code>NONE</code> ：捆绑所有依赖项和项目资源。不捆绑引导加载程序。</li></ul>
<p>有关如何配置此目标的更多详细示例，请参见：</p>
<ul>
<li><a href="./examples/repackage-classifier.html">自定义重新包装分类器</a></li>
<li><a href="./examples/exclude-dependency.html">排除依赖项</a></li></ul></section><section>
<h3><a name="Running_the_application"></a>运行应用程序</h3>
<p>该插件包含一个运行目标，可用于从命令行启动您的应用程序：</p>
<div>
<pre>mvn spring-boot:run</pre></div>
<p>默认情况下，应用程序是在分支过程中执行的，并且在命令行上设置属性不会影响应用程序。如果您需要指定一些JVM参数（即出于调试目的），则可以使用<code>jvmArguments</code>参数，请参阅<a href="./examples/run-debug.html">调试应用程序</a>以获取更多详细信息。还明确支持<a href="./examples/run-system-properties.html">系统属性</a>和<a href="./examples/run-env-variables.html">环境变量</a> 。</p>
<p>由于启用配置文件非常普遍，因此<code>profiles</code>提供快捷方式的属性<code>-Dspring-boot.run.jvmArguments="-Dspring.profiles.active=dev"</code> ，请参阅<a href="./examples/run-profiles.html">指定活动配置文件</a> 。</p>
<p>尽管不建议这样做，但是可以通过禁用Maven JVM直接从Maven JVM执行应用程序。 <code>fork</code>属性。这样做意味着<code>jvmArguments</code> ， <code>systemPropertyVariables</code> ， <code>environmentVariables</code>和<code>agents</code>选项将被忽略。</p>
<p>Spring Boot 1.3引入了<code>devtools</code> ，一个用于改善在Spring Boot应用程序上工作时的开发时间体验的模块。要启用它，只需将以下依赖项添加到您的项目中：</p>
<div>
<pre>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
    &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div>
<p>什么时候<code>devtools</code>正在运行，它将在您重新编译应用程序时检测到更改并自动刷新它。这不仅适用于资源，而且适用于代码。它还提供了一个LiveReload服务器，以便它可以在发生任何变化时自动触发浏览器刷新。</p>
<p>还可以将Devtools配置为仅在静态资源发生更改时刷新浏览器（并忽略代码中的任何更改）。只需在项目中包括以下属性：</p>
<div>
<pre>spring.devtools.remote.restart.enabled=false</pre></div>
<p>先于<code>devtools</code> ，该插件默认情况下支持资源的热刷新，现在已禁用它，以支持上述解决方案。您可以通过配置项目随时还原它：</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;configuration&gt;
        &lt;addResources&gt;true&lt;/addResources&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>什么时候<code>addResources</code>如果启用了该选项，则在您运行应用程序时，任何<b>src / main / resources</b>文件夹都将添加到应用程序类路径中，并且将删除在<b>目标/类中</b>找到的所有重复项。这样可以热刷新资源，这在开发Web应用程序时非常有用。例如，您可以处理HTML，CSS或JavaScript文件，并且无需重新编译应用程序即可立即查看更改。这也是允许前端开发人员工作而无需下载和安装Java IDE的一种有用方法。</p>
<p>请注意，使用此功能的副作用是在构建时无法进行资源过滤。</p>
<p>为了与<code>repackage</code>目标， <code>run</code>目标以这样的方式构建类路径：插件配置中排除的任何依赖项也将从类路径中排除。有关更多详细信息，请参见<a href="./examples/exclude-dependency.html">排除依赖项</a> 。</p>
<p>有时在运行应用程序时包含测试依赖项很有用。例如，如果要在使用存根类的测试模式下运行应用程序。如果您想这样做，可以设置<code>useTestClasspath</code>参数为true。请注意，这仅在运行应用程序时适用： <code>repackage</code>目标不会将测试依赖项添加到生成的JAR / WAR中。</p></section><section>
<h3><a name="Working_with_integration_tests"></a>使用集成测试</h3>
<p>虽然您可以从测试（或测试套件）本身非常轻松地启动Spring Boot应用程序，但可能需要在构建本身中进行处理。为确保<i>围绕</i>集成测试正确管理Spring Boot应用程序的生命周期，您可以使用<code>start</code>和<code>stop</code>目标如下所述：</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;pre-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;start&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
          &lt;id&gt;post-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;stop&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>现在，这种设置可以使用<a class="externalLink" href="https://maven.apache.org/surefire/maven-failsafe-plugin/">故障安全插件</a>按预期运行集成测试。</p>
<p>您还可以配置更高级的设置，以在设置了特定属性时跳过集成测试：</p>
<div>
<pre>&lt;properties&gt;
  &lt;it.skip&gt;false&lt;/it.skip&gt;
&lt;/properties&gt;
&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;skip&gt;${it.skip}&lt;/skip&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;pre-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;start&lt;/goal&gt;
          &lt;/goals&gt;
          &lt;configuration&gt;
            &lt;skip&gt;${it.skip}&lt;/skip&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
          &lt;id&gt;post-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;stop&lt;/goal&gt;
          &lt;/goals&gt;
          &lt;configuration&gt;
            &lt;skip&gt;${it.skip}&lt;/skip&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre></div>
<p>如果你跑<code>mvn verify -Dit.skip=true</code>您的集成测试将被完全跳过。</p>
<p>有关如何配置此目标的更多详细示例，请参见：</p>
<ul>
<li><a href="./examples/it-random-port.html">随机端口用于集成测试</a></li></ul></section></section>
        </div>
      </div>
    </div>
    <hr>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>版权所有©2019 <a href="https://spring.io">Pivotal Software，Inc</a> .版权所有。</p>
        </div>
        </div>
    </footer>
    

</body></html>