<html lang="zh-Hans" ><head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Spring Cloud Post MVP</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
.hidden {
	display: none;
}

.switch {
	border-width: 1px 1px 0 1px;
	border-style: solid;
	border-color: #7a2518;
	display: inline-block;
}

.switch--item {
	padding: 10px;
	background-color: #ffffff;
	color: #7a2518;
	display: inline-block;
	cursor: pointer;
}

.switch--item:not(:first-child) {
	border-width: 0 0 0 1px;
	border-style: solid;
	border-color: #7a2518;
}

.switch--item.selected {
	background-color: #7a2519;
	color: #ffffff;
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
<script type="text/javascript">
function addBlockSwitches() {
	$('.primary').each(function() {
		primary = $(this);
		createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
		primary.children('.title').remove();
	});
	$('.secondary').each(function(idx, node) {
		secondary = $(node);
		primary = findPrimary(secondary);
		switchItem = createSwitchItem(secondary, primary.children('.switch'));
		switchItem.content.addClass('hidden');
		findPrimary(secondary).append(switchItem.content);
		secondary.remove();
	});
}

function createBlockSwitch(primary) {
	blockSwitch = $('<div class="switch"></div>');
	primary.prepend(blockSwitch);
	return blockSwitch;
}

function findPrimary(secondary) {
	candidate = secondary.prev();
	while (!candidate.is('.primary')) {
		candidate = candidate.prev();
	}
	return candidate;
}

function createSwitchItem(block, blockSwitch) {
	blockName = block.children('.title').text();
	content = block.children('.content').first().append(block.next('.colist'));
	item = $('<div class="switch--item">' + blockName + '</div>');
	item.on('click', '', content, function(e) {
		$(this).addClass('selected');
		$(this).siblings().removeClass('selected');
		e.data.siblings('.content').addClass('hidden');
		e.data.removeClass('hidden');
	});
	blockSwitch.append(item);
	return {'item': item, 'content': content};
}

$(addBlockSwitches);
</script>



</head><body class="book toc2 toc-left">
<div id="header">
<h1>Spring Cloud Post MVP</h1>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_mvp_recap">MVP回顾</a></li>
<li><a href="#_stateful_patterns_and_spring_cloud_cluster">有状态模式和Spring Cloud Cluster</a></li>
<li><a href="#_switch_patterns">开关模式</a></li>
<li><a href="#_messaging_and_asynchronous_patterns">消息传递和异步模式</a>
<ul class="sectlevel2">
<li><a href="#_messaging_for_business_applications">业务应用程序消息传递</a></li>
<li><a href="#_building_on_the_bus">在公共汽车上建造</a></li>
<li><a href="#_reactive_patterns">反应模式</a></li>
</ul>
</li>
<li><a href="#_miscellaneous">杂</a>
<ul class="sectlevel2">
<li><a href="#_alternative_stacks">替代堆栈</a></li>
<li><a href="#_integration_testing">整合测试</a></li>
<li><a href="#_developer_workflow">开发人员工作流程</a></li>
<li><a href="#_demonstrate_cloud_native">展示云原生</a></li>
<li><a href="#_more_security_options">更多安全选项</a></li>
<li><a href="#_multi_tenancy">多租户</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本文档汇集了一些想法，并设置了MVP阶段（可从1.0版开始）之后的Spring Cloud相对优先级。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mvp_recap"><a class="link" href="#_mvp_recap">MVP回顾</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>带有git后端的配置服务器</p>
</li>
<li>
<p>配置客户端具有刷新和加密/解密以及Spring应用程序生命周期中的引导阶段</p>
</li>
<li>
<p>负载均衡器，服务发现和断路器的通用抽象</p>
</li>
<li>
<p>安全集成：声明式SSO和代理身份验证策略</p>
</li>
<li>
<p>Eureka用于服务发现：客户端和服务器（带有UI）</p>
</li>
<li>
<p>适用于非JVM客户端的Eureka Sidecar</p>
</li>
<li>
<p>使用Zuul的自动反向代理</p>
</li>
<li>
<p>Zuul过滤器的Spring配置模型</p>
</li>
<li>
<p>功能区负载均衡器的弹簧配置模型</p>
</li>
<li>
<p>虚假的声明式Web服务客户端（具有Ribbon集成）</p>
</li>
<li>
<p>RestTemplate与Ribbon集成</p>
</li>
<li>
<p>断路器的Hystrix：客户端和仪表板（UI）</p>
</li>
<li>
<p>涡轮机，用于断路器汇聚，通过HTTP进行推送和通过AMQP进行推送</p>
</li>
<li>
<p>AWS集成：关系数据库，消息传递和EC2元数据</p>
</li>
<li>
<p>AMQP总线用于一组定义的操作事件，例如配置更改</p>
</li>
<li>
<p>支持以上大多数功能的Groovy CLI</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stateful_patterns_and_spring_cloud_cluster"><a class="link" href="#_stateful_patterns_and_spring_cloud_cluster">有状态模式和Spring Cloud Cluster</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Cron服务器</p>
</li>
<li>
<p>API挂钩</p>
</li>
<li>
<p>事件排序</p>
</li>
<li>
<p>一次性令牌</p>
</li>
<li>
<p>全局锁定服务（可能是其他模式的构件）</p>
</li>
<li>
<p>全局通用状态机</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_switch_patterns"><a class="link" href="#_switch_patterns">开关模式</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>功能开关</p>
</li>
<li>
<p>A / B测试</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_messaging_and_asynchronous_patterns"><a class="link" href="#_messaging_and_asynchronous_patterns">消息传递和异步模式</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_messaging_for_business_applications"><a class="link" href="#_messaging_for_business_applications">业务应用程序消息传递</a></h3>
<div class="paragraph">
<p>微服务适合于消息传递和其他异步模式，但是到目前为止，Spring Cloud一直主要将HTTP作为传输工具。AMQP和Websockets很轻巧，并且非常容易通过Spring和Spring Boot进行设置，因此对于任何具体的东西来说，AMQP和Websocket都是显而易见的构建基块。构建一些示例系统，并发布一些文档或文章将是一个很好的开始，以了解它可能会导致什么。</p>
</div>
</div>
<div class="sect2">
<h3 id="_building_on_the_bus"><a class="link" href="#_building_on_the_bus">在公共汽车上建造</a></h3>
<div class="paragraph">
<p>Spring Cloud Bus的角色可以通过各种方式扩展。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>某些消息可能需要以某种方式进行审核或代理，例如，以确保传递到群集的所有成员，而不仅仅是发送消息时可用的那些消息。</p>
</li>
<li>
<p>遥测和监视。能够通过分布式系统跟踪业务消息是强大的推动力，并且可能需要与总线相同的抽象级别，甚至需要共享基础结构和配置。发布指标：OpenTSDB（请参阅<a href="https://github.com/Ticketmaster" class="bare">https://github.com/Ticketmaster），redis，zookeeper，netflix</a>地图集或<a href="http://influxdb.com" class="bare">http://influxdb.com</a> 。</p>
</li>
<li>
<p>消息已经可以发送到服务的所有实例，但是在Spring Cloud本身中没有使用该功能（如果用户认为需要，可以使用它）。</p>
</li>
<li>
<p>发布更多事件，并自动发布（而不是等待被执行器戳入<code>Endpoint</code> ）。</p>
</li>
<li>
<p>替代实施：领事，Redis，kafka，AWS（SQS + SNS），Gemfire</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_reactive_patterns"><a class="link" href="#_reactive_patterns">反应模式</a></h3>
<div class="paragraph">
<p>与<a href="http://projectreactor.org">Project Reactor进行</a>更多集成，例如在Reactor流中发布来自断路器的Hystrix指标。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_miscellaneous"><a class="link" href="#_miscellaneous">杂</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_alternative_stacks"><a class="link" href="#_alternative_stacks">替代堆栈</a></h3>
<div class="ulist">
<ul>
<li>
<p>领事：在Spring Cloud Commons中提供发现抽象的替代实现。Consul使用分布式数据存储和群集管理器，因此它着重于一致性（因此可用性只是一个选择，而Eureka的主要重点）。</p>
</li>
<li>
<p>也许其他发现和服务注册表解决方案（Gemfire，redis，etcd，Zookeeper，Spring Cloud Cluster，airbnb / synapse）。</p>
</li>
<li>
<p>新一代的Netflix OSS及其对RxNetty的关注带来了一些挑战，但同时也带来了更好的编程模型和更轻松的集成。这些更改可能最终需要使用Spring Cloud Netflix的新主要版本。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_integration_testing"><a class="link" href="#_integration_testing">整合测试</a></h3>
<div class="ulist">
<ul>
<li>
<p>有一个完整的env，可以针对（Eureka，Config Server，Turbine，Hystrix仪表板和各种客户端）运行完整测试。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_developer_workflow"><a class="link" href="#_developer_workflow">开发人员工作流程</a></h3>
<div class="ulist">
<ul>
<li>
<p>开发人员在本地部署组件，并加入远程分布式系统（以免因为必须部署整个系统来对其组件之一进行集成测试）。</p>
</li>
<li>
<p>容器工具。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_demonstrate_cloud_native"><a class="link" href="#_demonstrate_cloud_native">展示云原生</a></h3>
<div class="ulist">
<ul>
<li>
<p>使用诸如Cassandra之类的Mutli-Region数据库在CF和AWS上进行多区域和多区域演示。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_more_security_options"><a class="link" href="#_more_security_options">更多安全选项</a></h3>
<div class="paragraph">
<p>保护业务服务以及平台（Spring Cloud功能）本身势必会成为扩展领域。到目前为止，我们仅使向Config Server和Eureka添加HTTP基本安全性变得容易。即使有更多文档，也需要更多选择。</p>
</div>
</div>
<div class="sect2">
<h3 id="_multi_tenancy"><a class="link" href="#_multi_tenancy">多租户</a></h3>
<div class="paragraph">
<p>与@joshlong讨论多租户系统中的Hystrix，Config Server和Discovery：请参阅<a href="https://github.com/spring-cloud/spring-cloud-commons/issues/20">spring-cloud-commons＃20</a></p>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/atom-one-dark-reasonable.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>

</body></html>