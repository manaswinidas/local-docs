<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Java EE sample applications" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Java EE sample applications" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: Java EE sample applications</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="reference.html">Reference</a>&nbsp;&gt;&nbsp;<a href="samples.html">Samples</a>&nbsp;&gt;&nbsp;<a href="java-ee-sample-applications.html">Java EE sample applications</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Java EE sample applications</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645363">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645363">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645363">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645363">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645363">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645363">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>This topic is organized in the following sections:</p>


<h1 id="JavaEEsampleapplications-Installingasprebuiltplugins">Installing as prebuilt plugins</h1>

<p>The recommended practice for Geronimo is to set up a workflow using Geronimo plugins and maven from development through test and production. To demonstrate this, the samples are built into plugins suitable for the Jetty and Tomcat Web containers in Geronimo.  Many samples require database access.  This is encapsulated into a separate plugin (sample-datasource).</p>
<rich-text-body>
<p>TODO: Demonstrate how to swap databases using plugins; see also the roller plugin</p></rich-text-body>

<p>In any case, to install samples as plugins you need to build them first.</p>

<p>For installation you need a Geronimo server with a Web container installed, such as the geronimo-jetty-minimal or geronimo-jetty6-javaee5 servers (or the equivalent Tomcat variations).</p>

<h2 id="JavaEEsampleapplications-Installingthroughtheadministrativeconsole">Installing through the administrative console</h2>

<p>If you are using one of the Java EE 6 server assemblies you can use the administrative console to install the plugins. Go to the plugins page, push the <strong>Show Plugins</strong> button, find the sample(s) you want to install, and click <strong>Install</strong>.  Be sure to select only plugins for the Web container you have installed (e.g. jetty plugins for the Jetty web container).  Any necessary dependencies such as the sample-datasource plugin will be installed automatically.  There are equivalent command line functions (described next under <a shape="rect" href="java-ee-sample-applications.html">#gogo commands for Geronimo</a>) if you are using one of the minimal assemblies that does not include the administrative console.</p>

<h2 id="JavaEEsampleapplications-InstallingthroughKarafShell">Installing through Karaf Shell</h2>

<p>For this you can use any Geronimo server such as one of the minimal assemblies or even the framework assembly.  After starting geronimo, run <code>deploy:list-plugins</code> in the same terminal window and follow the instructions. Installing a sample plugin will install the sample-datasource plugin and all other dependencies.  Alternatively if you build using</p>
<plain-text-body>
mvn clean install -Pit
</plain-text-body>

<p>you can find a server with the sample installed in directories such as</p>
<plain-text-body>
&lt;sample&gt;/&lt;sample&gt;-jetty/target/geronimo-framework-&lt;version&gt;/.
</plain-text-body>


<h1 id="JavaEEsampleapplications-Buildingfromsource">Building from source</h1>

<h2 id="JavaEEsampleapplications-Downloadingthesourcecode">Downloading the source code</h2>

<p>The first time building samples it is required that you build from the top level directory.  After the initial build, you can do subsequent builds of specific samples as necessary.</p>

<p>You need svn and maven installed on your system.</p>
<rich-text-body>
<p>Maven v 2.2.1 or later is required for building Geronimo 3.0 samples.</p></rich-text-body>


<p>To check out the 3.0M1 samples:</p>

<plain-text-body>
svn co https://svn.apache.org/repos/asf/geronimo/samples/tags/samples-parent-3.0-M1/ samples-parent-3.0M1
</plain-text-body>
<rich-text-body>
<p>Alternatively, you could choose to work with the active 3.0 trunk of samples.  This will allow you to work with the latest changes in samples but will also expose you to a branch that is under active development and so things may be in flux from day to day:<br clear="none">
svn co <a shape="rect" class="external-link" href="https://svn.apache.org/repos/asf/geronimo/samples/trunk">https://svn.apache.org/repos/asf/geronimo/samples/trunk</a> gsamples-trunk</p></rich-text-body>
<p>Depending on when you look you may find earlier or released versions of the samples under samples/branches and samples/tags.  You can browse in any web browser to see what's there.  The trunk for samples always contains samples for the highest level version under development <a shape="rect" class="external-link" href="https://svn.apache.org/repos/asf/geronimo/samples/trunk">https://svn.apache.org/repos/asf/geronimo/samples/trunk</a></p>


<h2 id="JavaEEsampleapplications-Buildingthesamples">Building the samples</h2>

<p>Build the samples using this command:</p>
<plain-text-body>
mvn clean install
</plain-text-body>
<rich-text-body>
<p>If you run into the "Could not scan module for TLD files...Filename too long" problem when using Windows platform, please check out samples to a short directory (14 characters or less).</p></rich-text-body>

<p>There are minimal integration tests to assure that the sample plugins can be installed on the framework server.  To run this tests use this command:</p>
<plain-text-body>
mvn clean install -Pit
</plain-text-body>


<h2 id="JavaEEsampleapplications-DeployingthebuiltsamplesasJavaEEartifacts">Deploying the built samples as Java EE artifacts</h2>

<h3 id="JavaEEsampleapplications-Withthesampledatasourceinstalledasaplugin">With the sample datasource installed as a plugin</h3>

<p>After building the sample projects you can find suitable geronimo plans for a sample &lt;sample&gt; in</p>
<plain-text-body>
&lt;sample&gt;/&lt;sample&gt;-jetty/target/resources/META-INF/plan.xml
</plain-text-body>
<p>(or the equivalent -tomcat directory).  For most samples you will have to install the sample-datasource plugin first.  Samples can be deployed from the administrative console "deploy new" on a suitable server or using Karaf Shell <code>deploy:deploy-modules</code>. Note that in this case you have to start with a server with all the required bits already installed, not the framework server.  Since this installation method is not tested automatically it is more likely to be broken than the plugin method.</p>

<h3 id="JavaEEsampleapplications-Makinglifeevenharderforyourself">Making life even harder for yourself</h3>

<p>You can also install the sample datasource as a javaee artifact using the plan we generate when building the plugin, install the sample datasource using the administrative console using the database wizard, and run the sql by hand rather than relying on the geronimo <strong>DBInitializationGBean</strong>.</p>

<h4 id="JavaEEsampleapplications-InstallingthesampledatasourceasaJavaEEartifact">Installing the sample datasource as a Java EE artifact</h4>

<p>Before you install any sample applications, deploy the <code>org.tranql/tranql-connector-derby-embed-xa/1.4/rar</code> connector located in the geronimo repo at <code>org/tranql/tranql-connector-derby-embed-xa/1.4/tranql-connector-derby-embed-xa-1.4.rar</code> with the plan at <code>sample-datasource/target/resources/META-INF/plan.xml</code> using the admin console "deploy new" or Karaf Shell.  This will have exactly the same effect as installing the sample-datasource plugin.</p>

<h4 id="JavaEEsampleapplications-Installingthesampledatasourcethroughtheadminconsoledatabasewizard">Installing the sample datasource through the admin console database wizard</h4>

<p>Create a new datasource using the admin console database wizard, selecting the derby-embed-xa type and naming the database "SampleDatabase" and the datasource "SampleTxDatasource".  The admin console will come up with a module Id different from what the samples need, so you have to map them in var/config/artifact_aliases.properties.  Insert a line like this:</p>
<plain-text-body>
org.apache.geronimo.samples/sample-datasource/3.0M1/car=console.dbpool/SampleDatabase/1.0/car
</plain-text-body>
<p>replacing 3.0M1 with the appropriate sample version and adjusting the right hand side as necessary. Be sure Geronimo is stopped when you edit artifact_aliases.properties.</p>

<h4 id="JavaEEsampleapplications-Manuallyinitializingthedatabase.">Manually initializing the database.</h4>

<p>Samples that need database connectivity have the database initialized by default by using a DBInitializationGBean to run an sql script. Alternatively here we describe how to initialize the database by hand. In a production scenario most likely your db will be set up by a DBA rather than either of these methods.</p>
<ol><li>Remove the DBInitializationGBean from the sample plan</li><li>In the console DB Manager page, use the Create DB function to create a database named SampleDatabase.</li><li>In the console DB Manager page select the SampleDatabase in Use DB, paste the script found in the sql file located in the project (ear or war) that builds the top level javaee artifact into the text box, and run it.</li><li>Deploy and run the application using the modified plan.</li></ol>


<h1 id="JavaEEsampleapplications-MavenGeneratedSiteforviewingjavadocorsourcexref">Maven Generated Site for viewing javadoc or source xref</h1>
<rich-text-body>
<p>Geronimo Samples 3.0M1 release did not generate the maven site for javadoc and source xref view. Cause Geronimo site scheme for 3.0M1 has some problem.</p></rich-text-body>


<p>To navigate to javadoc and source code (xref) for each sample do the following:</p>
<ol><li>select "Geronimo Samples :: Samples" under Modules in the left-hand navigation</li><li>select a specific sample from the left-hand navigation under Modules</li><li>to view javadoc or source (xref) you must navigate down to a module that includes source such as a war or ejb.  For example, if you are interested in viewing the servlets associated with the bank sample you would choose the following modules:
	<ol><li>under Modules select "Geronimo Samples :: converter-javaee6"</li><li>under Modules select "Geronimo Samples :: converter-javaee6 :: WAR"</li></ol>
	</li><li>once you are at a module that contains source you can then select "Project Reports" and from the information provided choose either JavaDocs or Source Xref.</li></ol>


<h1 id="JavaEEsampleapplications-AvailableJavaEEsampleapplications">Available Java EE sample applications</h1>
<parameter ac:name="all">true</parameter></div>
        </div>

                  <div class="tabletitle">
            Children
            <span class="smalltext" id="show" style="display: inline;">
              <a href="javascript:showChildren()">Show Children</a></span>
            <span class="smalltext" id="hide" style="display: none;">
              <a href="javascript:hideChildren()">Hide Children</a></span>
          </div>
          <div class="greybox" id="children" style="display: none;">
                                      <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/jarresource-javaee6+-+A+simple+bundled+resources+example" title="jarresource-javaee6 - A simple bundled resources example">jarresource-javaee6 - A simple bundled resources example</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/inventory+-+Simple+Database+Access+Application" title="inventory - Simple Database Access Application">inventory - Simple Database Access Application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/cviewer-javaee6+-+Programmatically+register+servlets+and+filters" title="cviewer-javaee6 - Programmatically register servlets and filters">cviewer-javaee6 - Programmatically register servlets and filters</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/not-in-svn+-+Inbound+JCA+example" title="not-in-svn - Inbound JCA example">not-in-svn - Inbound JCA example</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/fileupload-javaee6+-++Annotation+for+servlets%2C+filters%2Clisteners+and+better+file+upload+support+in+JavaEE+6" title="fileupload-javaee6 -  Annotation for servlets, filters,listeners and better file upload support in JavaEE 6">fileupload-javaee6 -  Annotation for servlets, filters,listeners and better file upload support in JavaEE 6</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/dbtester+-+DB+Pool+Testing+sample+application" title="dbtester - DB Pool Testing sample application">dbtester - DB Pool Testing sample application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=23337815" title="singletonejb-javaee6 - A simple JSF+Singleton+ejb injection application">singletonejb-javaee6 - A simple JSF+Singleton+ejb injection application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/restfulorder-javaee6+-+Simple+Web+Service+with+JAX-RS" title="restfulorder-javaee6 - Simple Web Service with JAX-RS">restfulorder-javaee6 - Simple Web Service with JAX-RS</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/ldap-sample-app+-+LDAP+Sample+Application" title="ldap-sample-app - LDAP Sample Application">ldap-sample-app - LDAP Sample Application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/ejbtimer-javaee6+-+A+simple+EJB+timer+service+application" title="ejbtimer-javaee6 - A simple EJB timer service application">ejbtimer-javaee6 - A simple EJB timer service application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/daytrader+-+a+more+complex+application" title="daytrader - a more complex application">daytrader - a more complex application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=23332743" title="converter-javaee6 - A simple JSF+Ajax aplication">converter-javaee6 - A simple JSF+Ajax aplication</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/webfragment-javaee6+-+A+simple+web+fragments+application" title="webfragment-javaee6 - A simple web fragments application">webfragment-javaee6 - A simple web fragments application</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                          <a href="https://cwiki.apache.org/confluence/display/GMOxDOC30/timereport+-+Web+Application+Security+Sample" title="timereport - Web Application Security Sample">timereport - Web Application Security Sample</a>
              <span class="smalltext">(Apache Geronimo v3.0)</span>
              <br>
                      </div>
              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Java EE sample applications';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
