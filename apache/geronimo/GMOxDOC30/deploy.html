<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="deploy" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi deploy" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0 Documentation: deploy</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="reference.html">Reference</a>&nbsp;&gt;&nbsp;<a href="tools-and-commands.html">Tools and commands</a>&nbsp;&gt;&nbsp;<a href="deploy.html">deploy</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">deploy</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645495">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645495">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645495">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645495">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645495">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645495">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">
<p>The <strong>deploy</strong> script is used for installing, uninstalling, reinstalling, starting and stopping applications and modules and for installing and uninstalling configurations (for example some configuration specific deployment plans, security realms, database connection pools etc.)</p>

<h1><a shape="rect" name="deploy-Usage"></a>Usage</h1>

<p>This command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; &lt;command&gt; &lt;command_options&gt;
</pre>
</div></div>
<p>where <em>&lt;general_options&gt;</em> specify common options that apply to all commands and control how the application behaves, <em>&lt;command&gt;</em> is a command name that specifies the action to be performed, and <em>&lt;command_options&gt;</em> are options unique to the command specified.</p>

<p>The <strong>deploy</strong> command can also be started by using the java -jar command:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>java -Djava.endorsed.dirs=lib/endorsed -jar bin/deployer.jar &lt;general_options&gt; &lt;command&gt; &lt;command_options&gt;
</pre>
</div></div>

<h2><a shape="rect" name="deploy-Generaloptions"></a>General options</h2>

<p>This section lists all the available general options for the Geronimo deployer tool.</p>
<ul><li><strong>--uri</strong> &lt;identifier&gt;<br clear="none">
Where <em>&lt;identifier&gt;</em> is a Universal Resource Identifier (URI) that specifies how the deployer is to contact the server. If this flag is not specified, the deployer will attempt to contact the server using the standard port on localhost. The identifier must have the following form:
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deployer:geronimo:jmx:rmi:///jndi/rmi://host:port/JMXConnector
</pre>
</div></div>
where <em>&lt;host&gt;</em> is replaced with the host name or TCP/IP address of the system where the server is running and &lt;port&gt; is replaced with the port number where the server is listening. If unspecified, localhost and the default port will be used.</li></ul>


<ul><li><strong>--host</strong> &lt;host&gt;<br clear="none">
Where <em>&lt;host&gt;</em> is the host name of the server you are trying to deploy that application or resource. This option allows you to deploy resources and applications to a remote server. This parameter is optional and defaults to localhost defined as RemoteDeployHostname=localhost in &lt;Geronimo_home&gt;/var/config/config-substitutions.properties. Change localhost to the server's ip address if you want remote-deployment enabled on it.</li></ul>


<ul><li><strong>--port</strong> &lt;port&gt;<br clear="none">
Where <em>&lt;port&gt;</em> is the port of the remote server you are trying to deploy that application or resource. This parameter is optional and defaults to port 1099.</li></ul>


<ul><li><strong>--driver</strong> &lt;driver_path&gt;<br clear="none">
Where <em>&lt;driver_path&gt;</em> is the path to the driver JAR if you want to use this tool with a server other than Geronimo. Currently, manifest Class-Path entries in that JAR are ignored.</li></ul>


<ul><li><strong>--user</strong> &lt;username&gt;<br clear="none">
Where <em>&lt;username&gt;</em> is a user name authorized to be an administrator on the server. If the command requires authorization, you must use this option.</li></ul>


<ul><li><strong>--password</strong> &lt;password&gt;<br clear="none">
Where <em>&lt;password&gt;</em> is a the password required to authenticate the user name. If this flag is not specified, the deployer will attempt to perform the command with no password, but if that fails, it will prompt you to enter a password.</li></ul>


<ul><li><strong>--secure</strong><br clear="none">
Use secure channel to communicate with a JMX server, see <a shape="rect" href="#deploy-Security">Security</a> for details. </li></ul>


<ul><li><strong>--syserr</strong> &lt;select&gt;<br clear="none">
Where <em>&lt;select&gt;</em> can be either true or false. If this flag is unspecified. false is assumed. Specify true when you want errors to be logged to the syserr device.</li></ul>


<ul><li><strong>--verbose</strong> &lt;select&gt;<br clear="none">
Where <em>&lt;select&gt;</em> can be either true or false. If this flag is unspecified. false is assumed. Specify true when you need more messages to determine the cause of an error.</li></ul>


<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h2><a shape="rect" name="deploy-Security"></a>Security</h2>

<p>Starting with Geronimo 2.1.2, the deployer tool can use a secure channel (SSL/TLS) to communicate with the JMX server to perform the given actions. To enable secure communication just add the <strong>--secure</strong> option. Depending on your configuration you might also need to specify some Java security properties to configure the JVM to use the right keystores and passwords. For example, on a default Geronimo installation you might need to set the following (all in one line):</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>export JAVA_OPTS="-Djavax.net.ssl.trustStore=&lt;geronimo_home&gt;/var/security/keystores/geronimo-default -Djavax.net.ssl.trustStorePassword=secret"
</pre>
</div></div>

<p>Once that property is set, you can execute the following command (just as an example):</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>&lt;GERONIMO_HOME&gt;/bin/deploy -u system -p manager --secure list-modules
</pre>
</div></div>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The secure JMX server is not running by default. Please see <a shape="rect" href="securing-rmi-port-of-geronimo.html" title="Securing RMI port of Geronimo">Securing RMI port of Geronimo</a> for more information.</p></div></div>
<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h2><a shape="rect" name="deploy-Sub-commands"></a>Sub-commands</h2>

<p>The available sub-commands for the Geronimo deployer tool are listed below:</p>
<ul><li>Common commands
	<ul><li><a shape="rect" href="#deploy-Deploy">Deploy</a></li><li><a shape="rect" href="#deploy-Login">Login</a></li><li><a shape="rect" href="#deploy-Redeploy">Redeploy</a></li><li><a shape="rect" href="#deploy-Start">Start</a></li><li><a shape="rect" href="#deploy-Stop">Stop</a></li><li><a shape="rect" href="#deploy-Undeploy">Undeploy</a></li></ul>
	</li><li>Other commands
	<ul><li><a shape="rect" href="#deploy-Distribute">Distribute</a></li><li><a shape="rect" href="#deploy-Encrypt">Encrypt</a></li><li><a shape="rect" href="#deploy-Install-library">Install-library</a></li><li><a shape="rect" href="#deploy-List-modules">List-modules</a></li><li><a shape="rect" href="#deploy-List-targets">List-targets</a></li><li><a shape="rect" href="#deploy-UnlockKeystore">UnlockKeystore</a></li></ul>
	</li><li>Geronimo Plugins
	<ul><li><a shape="rect" href="#deploy-Install-plugin">Install-plugin</a></li><li><a shape="rect" href="#deploy-Search-plugins">Search-plugins</a></li></ul>
	</li><li>Bundle commands
	<ul><li><a shape="rect" href="#deploy-Install-bundle">Install-bundle</a></li><li><a shape="rect" href="#deploy-Uninstall-bundle">Uninstall-bundle</a></li></ul>
	</li></ul>


<p>Additionally, you can type <strong>help</strong> for further details on a given command, the syntax is as follows:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy help &lt;command&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Deploy"></a>Deploy</h3>

<p>Use the <strong>deploy</strong> command to add and start a new module. The deploy command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; deploy &lt;module&gt; &lt;deployment_plan&gt;
</pre>
</div></div>

<p>The &lt;module&gt; specifies the application file name and location. The &lt;deployment_plan&gt; specifies the file name and location of the XML with the deployment plan. Sometimes the application module already has included in the package a deployment plan or the application is so simple that does not require any deployment plan, in these cases this parameter can be omited.</p>

<p>A module file can be one of the following:</p>
<ul><li>J2EE Enterprise Application Archive (EAR) file</li><li>J2EE Web Application Archive (WAR) file</li><li>J2EE Enterprise JavaBean Archive (JAR) file</li><li>J2EE Java Resource Archive (RAR) file</li></ul>


<p>If the server is not currently running at the time of deploying the application, the module will be marked to start next time the server is started.</p>

<p>The most common &lt;general_options&gt; would be --user and --password. The --inPlace option allows you point to and deploy an application directly from a directory external to Geornimo without the need for even packaging the application. In other words, you can have an application <strong>running</strong> in Geronimo but that application may be anywhere else on the file system.</p>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Please note that the --inPlace option cannot be used when deploying an application to a remote server.</p></div></div>

<p>To use this option you should type:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; deploy --inPlace &lt;APP_HOME&gt;
</pre>
</div></div>

<p>Where &lt;APP_HOME&gt; indicates the home directory where you have your application (exploded).</p>

<p>You can also deploy applications if Geronimo is not running by using the --offline option, the syntax for this command would be:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; --offline deploy &lt;module&gt;
</pre>
</div></div>

<p>Off course, you can also combine --offline and --inPlace</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; --offline deploy --inPlace &lt;APP_HOME&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Login"></a>Login</h3>

<p>Use the <strong>login</strong> command to save the username and password for the current connection to the file <code><strong>.geronimo-deployer</strong></code> in the current user's home directory. Future connections to the same server will try to use this saved authentication information instead of prompting where possible.</p>

<p>This information will be saved separately per connection URL, so you can specify --url or --host and/or --port on the command line to save a login to a different server.</p>

<p>The <strong>login</strong> command has the following syntax:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy --user &lt;user_name&gt; --password &lt;password&gt; login
</pre>
</div></div>

<p>So, next time you run a different command that originally required user name and password, you can run the command directly, for example:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy list-modules
</pre>
</div></div>

<p>Similarly, you don't have to specify or re-enter the user name and password when you shut down the server using the <a shape="rect" href="shutdown.html" title="shutdown">shutdown</a> command.</p>

<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Even when the login information is not saved in clear text, it is not secure either. If you want to save the authentication securely, you should change the .geronimo-deployer file in your home directory so that nobody else can read or write it.</p></div></div>
<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Redeploy"></a>Redeploy</h3>

<p>Use the <strong>redeploy</strong> command to stop, replace and restart a module that has been deployed before. The redeploy command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; redeploy -targets target&lt;module&gt; &lt;deployment_plan&gt;
</pre>
</div></div>

<p>Just like the <a shape="rect" href="#deploy-Deploy">deploy command</a>, the redeploy command accepts the following modules file types:</p>
<ul><li>J2EE Enterprise Application Archive (EAR) file</li><li>J2EE Web Application Archive (WAR) file</li><li>J2EE Enterprise JavaBean Archive (JAR) file</li><li>J2EE Java Resource Archive (RAR) file</li></ul>


<p>Typically, both a module and a plan are specified. If the module contains a plan or if a default plan can be used, the plan can be omitted. However, if a plan is specified in this case, it overrides the other plans. If the plan references a server component already deployed in the server's environment, the module is omitted.</p>

<p>Use <strong>--targets</strong> option only for clustering redeployment. For clustering redeployment you can find the  target with deploy <a shape="rect" href="#deploy-deploy-Listtargetscommandandoptions" title="List-targets command and options">list-targets</a> command. Copy the one with the name as <code>MasterConfigurationStore</code> and use it as a target variable.<br clear="none">
<a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Start"></a>Start</h3>

<p>Use the <strong>start</strong> command to start a previously deployed module. The start command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; start &lt;moduleIDs&gt;
</pre>
</div></div>

<p>Where &lt;moduleIDs&gt; is a list of one or more modules (configID) separated by blank space. The module identification (or ConfigID) is defined at deployment time in the respective deployment plan for each module previously deployed.</p>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Stop"></a>Stop</h3>

<p>Use the <strong>stop</strong> command to stop a running module. The stop command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; stop &lt;moduleIDs&gt;
</pre>
</div></div>

<p>Where &lt;moduleIDs&gt; is a list of one or more modules (configID) separated by blank space. The module identification (or ConfigID) is defined at deployment time in the respective deployment plan for each module previously deployed.</p>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Undeploy"></a>Undeploy</h3>

<p>Use the <strong>undeploy</strong> command to stop and remove a module (running or not) and its deployment information from the server. The undeploy command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; undeploy &lt;moduleIDs&gt;
</pre>
</div></div>

<p>Where &lt;moduleIDs&gt; is a list of one or more modules (configID) separated by blank space. The module identification (or ConfigID) is defined at deployment time in the respective deployment plan for each module previously deployed.</p>

<p>This command has the same ability as with <strong>deploy</strong> to uninstall applications when the server is not running, this command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; --offline undeploy &lt;moduleID&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Distribute"></a>Distribute</h3>

<p>Use the <strong>distribute</strong> command to add a new module to the server. This command does not start the module nor mark it to be started in the future. The distribute command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; distribute &lt;module&gt; &lt;deployment_plan&gt;
</pre>
</div></div>

<p>Just like with the deploy command, &lt;module&gt; specifies the application file name and location. The &lt;deployment_plan&gt; specifies the file name and location of the XML with the deployment plan. Sometimes the application module already has included in the package a deployment plan or the application is so simple that does not require any deployment plan, in these cases this parameter can be omitted.</p>

<p>A module file can be one of the following:</p>
<ul><li>J2EE Enterprise Application Archive (EAR) file</li><li>J2EE Web Application Archive (WAR) file</li><li>J2EE Enterprise JavaBean Archive (JAR) file</li><li>J2EE Java Resource Archive (RAR) file</li></ul>


<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Encrypt"></a>Encrypt</h3>

<p>Use the <strong>encrypt</strong> command to generate an encrypted string. This command takes use of&#160;org.apache.geronimo.util.EncryptionManager and has the following syntax:</p>

<p><code><strong>&lt;geronimo_home&gt;/bin/deploy &lt;general_options&gt; encrypt &lt;string&gt;</strong></code></p>

<p>Where &lt;general_options&gt; are common options that apply to all commands, &lt;string&gt; specifies a string to get encrypted.</p>

<p>Currently password strings are plain text in deployment plans, such as datasource or JMS deployment plans within an EAR. It might pose a security problem to store password strings as plain text even though the deployment plans are only used during the deployment process, and not at runtime. Starting from Geronimo 2.1.5, users can encrypt passwords using the encrypt command and paste the encrypted strings into deployment plans as password.</p>

<p>Examples:</p>

<p>Use this syntax to encrypt string <code>passw0rd</code> on an active server so that the encryption settings of that server will be used</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --user myadmin --password mypassword encrypt passw0rd
</pre>
</div></div>

<p>Online encryption result:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
......
String to encrypt: passw0rd
Online encryption result:
{Simple}rO0ABXNyABlqYXZheC5jcnlwdG8uU2VhbGVkT2JqZWN0PjY9psO3VHACAARbAA1lbmNv
ZGVkUGFyYW1zdAACW0JbABBlbmNyeXB0ZWRDb250ZW50cQB+AAFMAAlwYXJhbXNBbGd0ABJMamF2YS9s
YW5nL1N0cmluZztMAAdzZWFsQWxncQB+AAJ4cHB1cgACW0Ks8xf4BghU4AIAAHhwAAAAEG2NoqXONCcU
GqfK0reVCpVwdAADQUVT
</pre>
</div></div>

<p>Use this syntax to encrypt string passw0rd offline</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --offline encrypt passw0rd
</pre>
</div></div>

<p>Offline encryption result:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
......
String to encrypt: passw0rd
Offline encryption result:
{Simple}rO0ABXNyABlqYXZheC5jcnlwdG8uU2VhbGVkT2JqZWN0PjY9psO3VHACAARbAA1lbmNv
ZGVkUGFyYW1zdAACW0JbABBlbmNyeXB0ZWRDb250ZW50cQB+AAFMAAlwYXJhbXNBbGd0ABJMamF2YS9s
YW5nL1N0cmluZztMAAdzZWFsQWxncQB+AAJ4cHB1cgACW0Ks8xf4BghU4AIAAHhwAAAAEG2NoqXONCcU
GqfK0reVCpVwdAADQUVT
</pre>
</div></div>

<p>Note: Online encryption needs a running server to connect to and will use the encryption settings of that server, such as an encryption key, to do the encryption. As a result, the encrypted password usually can only be used for that particular server. Offline encryption uses the default encryption settings, and the encrypted password can be used by all servers. Offline encryption is thus less secure than online encryption.</p>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Install-library"></a>Install-library</h3>

<p>Use the <strong>install-library</strong> command to install a library into server's repository. The install-library command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; install-library --groupId groupName &lt;libraryFile&gt;
</pre>
</div></div>

<p>Use the <strong>--groupId</strong> option to specify a non-default group id for the library. Otherwise, the library file will be installed with the group id named <strong>default</strong>.</p>

<p>Examples:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy -u system -p manager install-library mylib-1.0.jar
</pre>
</div></div>

<p>That command will install the mylib-1.0.jar at &lt;geronimo_home&gt;/repository/default/mylib/1.0/mylib-1.0.jar</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy -u system -p manager install-library --groupId mygroup mylib-1.0.jar
</pre>
</div></div>

<p>That command will install the mylib-1.0.jar at &lt;geronimo_home&gt;/repository/mygroup/mylib/1.0/mylib-1.0.jar</p>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-List-modules"></a>List-modules</h3>

<p>Use the <strong>list-modules</strong> command to list all available modules on the server, note that for running this command the server must be running. The list-modules command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; list-modules [--all|--started|--stopped]
</pre>
</div></div>

<ul><li>--all : is used by default when no other option is specified. It will list all the available modules.</li><li>--started : this option will list only the modules that are running.</li><li>--stopped : this option will list only the modules that are not running.</li></ul>


<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-List-targets"></a>List-targets</h3>

<p>Use the <strong>list-targets</strong> command to lists the targets known to the server you have connected to. The list-targets command has the following syntax:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; list-targets
</pre>
</div></div>

<p>In the case of Geronimo, each configuration store is a separate target. Geronimo does not yet support clusters as targets.</p>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-UnlockKeystore"></a>UnlockKeystore</h3>

<p>Use the <strong>unlockKeystore</strong> command to unlock a keystore and private keys. The unlockKeystore command has the following syntax:</p>

<p><code><strong>&lt;geronimo_home&gt;/bin/deploy &lt;general_options&gt; unlockKeystore &lt;keyStoreName&gt; &lt;keyAlias1&gt; &lt;keyAlias2&gt;</strong></code></p>

<p>Where &lt;keyStoreName&gt; specifies a locked keystore to get unlocked, &lt;keyAlias1&gt; and &lt;keyAlias2&gt; are optionally used to specify one or more locked private keys in the keystore to get unlocked. </p>

<p>Note that before you can use the unlockKeystore command, you need to ensure that the following lines are added to &lt;geronimo_home&gt;/var/config/config-substitutions.properties:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;keyStoreName&gt;=&lt;keyStoreEncryptedPassword&gt;
&lt;keyAlias1&gt;=&lt;keyAlias1EncryptedPassword&gt;
&lt;keyAlias2&gt;=&lt;keyAlias1EncryptedPassword&gt;
...
</pre>
</div></div>

<p>Where </p>
<ul><li>&lt;keyStoreName&gt; is the name of the keystore.</li><li>&lt;keyStoreEncryptedPassword&gt; is the encrypted password for the keystore, which can be generated by using the <strong>encrypt</strong> command. When you copy and paste the generated encrypted password to &lt;geronimo_home&gt;/var/config/config-substitutions.properties, there should be no space in the encrypted password string.</li><li>&lt;keyAlias1&gt;, &lt;keyAlias2&gt; are the names of the private keys in the keystore.</li><li>&lt;keyAlias1EncryptedPassword&gt;, &lt;keyAlias2EncryptedPassword&gt; are the encrypted passwords for the private keys, which can also be generated by using the encrypt command.</li></ul>


<p>Alternatively, you can create a key file to contain the passwords of the keystore and its private keys. Use <code>org.apache.geronimo.keyStoreTrustStorePasswordFile</code> property to specify the key file. See <a shape="rect" href="creating-your-keystorefile-for-ssl-authentication.html" title="Creating your keystorefile for SSL authentication">Creating your keystorefile for SSL authentication</a> for more detailed instructions. </p>

<p>Examples:</p>

<p>Use this syntax to unlock the keystore whose name is mykeystore</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --user myadmin --password mypassword unlockKeystore mykeystore
</pre>
</div></div>

<p>Use this syntax to unlock the keystore whose name is mykeystore and the private key whose alias is key1</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --user myadmin --password mypassword unlockKeystore mykeystore key1
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Install-plugin"></a>Install-plugin</h3>

<p>Use the <strong>install-plugin</strong> command to install a Geronimo plugin previously exported from a Geronimo server or downloaded from a repository. A Geronimo plugin can be an application, a configuration such data sources and drivers or a combination. The install-plugin command has the following syntax:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy install-plugin &lt;plugin_file&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-Search-plugins"></a>Search-plugins</h3>

<p>Use the <strong>search-plugins</strong> command to list all the Geronimo plugins available in a Maven repository. The search-plugins command has the following syntax:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy search-plugins &lt;maven_repository_URL&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" name="deploy-install-bundlecommandandoptions"></a>install-bundle command and options</h3>

<p>The <code>install-bundle</code> command installs and records an OSGi bundle file in the server, so that the installed bundle can be automatically started even after you cleaned the cache directory of the OSGi framework. Use below syntax:</p>

<div class="panel" style="border-style: solid;border-width: 1px;"><div class="panelContent">
<h6><a shape="rect" name="deploy-&lt;font color=" black="black">deploy <em>generalOptions</em> install-bundle --groupId <em>groupId</em> --startLevel <em>number</em> {norender}<span class="error">[--start]</span>{norender}"&gt;</a><font color="black">deploy <em>generalOptions</em> install-bundle --groupId <em>groupId</em> --startLevel <em>number</em> {norender}<span class="error">[--start]</span>{norender}</font></h6>

<p>where </p>

<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>generalOptions</em></strong></p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>are <a shape="rect" href="#deploy-deploy" rel="nofollow">common options</a> that apply to all commands. Note that you can only run the <code>install-bundle</code> command on the local server.</p></div>
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>groupId</em></strong></p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>is optionally used to specifie the groupId for installed bundle, the default value is <strong>default</strong>.</p></div>
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>number</em></strong></p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>is optionally used to specifies the start level of installed bundle. The default value is 60.</p></div>
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>--start</p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>specifies whether to start the installed bundle automatically. The bundle will be in <strong>Resolved</strong> state if you did not specify this argument.</p></div>
</div></div>

<p>In the server repository, all modules are stored in a maven-style structure directory. After an OSGi bundle is installed, its maven artifact name is <em>groupId/Bundle-SymbolicName/Bundle-Version/jar</em>.</p>

<p><a shape="rect" href="#deploy-top">Back to top</a></p>

<h3><a shape="rect" id="deploy-Uninstallbundlecommandandoptions" name="deploy-Uninstall-bundlecommandandoptions&lt;span class=" confluence-anchor-link="confluence-anchor-link">"&gt;</a>Uninstall-bundle command and options <span class="confluence-anchor-link" id="deploy-Uninstallbundlecommandandoptions"></span></h3>

<p>The <code>uninstall-bundle</code> command stops and removes an OSGi bundle and its deployment information from the server, and uses this syntax:</p>

<div class="panel" style="border-style: solid;border-width: 1px;"><div class="panelContent">
<h6><a shape="rect" name="deploy-&lt;font color=" black="black">deploy <em>generalOptions</em> uninstall-bundle <em>bundleId</em>"&gt;</a><font color="black">deploy <em>generalOptions</em> uninstall-bundle <em>bundleId</em></font></h6>

<p>where </p>

<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>generalOptions</em></strong></p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>are <a shape="rect" href="#deploy-deploy" rel="nofollow">common options</a> that apply to all commands. Note that you can only run the <code>uninstall-bundle</code> command on the local server.</p></div><div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p></p><div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style></div>*<em>bundleId</em>*<p></p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>is the bundle Id of OSGi bundle to be removed completely.</p></div>
</div></div>

<p><strong>Note:</strong> The <code>uninstall-bundle</code> command does not support </p>
<div class="error"><span class="error">Unknown macro: {norender}</span> <p>--offline</p></div>
<p> option.<br clear="none">
<a shape="rect" href="#deploy-top">Back to top</a></p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : deploy';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
