<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Migrating from JAX-RPC to JAX-WS" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Migrating from JAX-RPC to JAX-WS" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: Migrating from JAX-RPC to JAX-WS</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="developing.html">Developing</a>&nbsp;&gt;&nbsp;<a href="tutorials.html">Tutorials</a>&nbsp;&gt;&nbsp;<a href="developing-web-services.html">Developing Web services</a>&nbsp;&gt;&nbsp;<a href="migrating-from-jax-rpc-to-jax-ws.html">Migrating from JAX-RPC to JAX-WS</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Migrating from JAX-RPC to JAX-WS</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645398">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645398">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645398">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645398">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645398">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645398">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>This tutorial will take you through the steps that are most commonly involved in porting a Web Service from JAX-RPC to JAX-WS. This tutorial does not go into details on why these changes are required and the concepts behind it; it is rather a quick note that helps you to deal with migrating your application from the older Web service stack to new stack.</p>

<p>Even though JAX-RPC is still supported in Java EE 5, it lacks many advanced features that JAX-WS has like Annotations, JAXB Binding, SOAP 1.2, RESTful Services and so on. So, it is strongly recommended that you use JAX-WS instead of JAX-RPC for implementing Web Services in Java.</p>

<parameter ac:name="maxLevel">2</parameter><parameter ac:name="type">list</parameter><parameter ac:name="separator">pipe</parameter>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-JAXBmigration">JAXB migration</h1>
<p>The most notable change in JAX-WS 2.0 is the use of <strong>JAXB 2.0</strong> for data-binding between Java and XML. JAX-RPC 1.0 specified a limited mapping between XML and Java.<br clear="none">
This effectively eliminates the need of using JAX-RPC mapping file where we define the mapping between Java and WSDL, but also imposes a condition that the return and request values can be able to bind to JAXB. Again, considering the wide variety of data types supported by JAXB it shouldn't be a problem.</p>

<parameter ac:name="title">JAX-RPC &amp; JAXB</parameter><rich-text-body>
<p>JAX-RPC didn't used JAXB because the first version of JAX-RPC was completed much before JAXB. So, instead of waiting for JAXB to complete JAX-RPC writers developed their own custom mapping.</p></rich-text-body>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Annotations">Annotations</h1>
<p>JAX-WS 2.0 relies heavily on the use of <strong>Annotations</strong>. These annotations are used to customize the mapping from JAVA to XML schema/WSDL and are used at runtime to create the necessary files.<br clear="none">
Geronimo uses the Sun provided <strong>wsgen</strong> utility to create the WSDL and stubs on the fly at the deploy time by processing the annotations specified.</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-SOAPstandards">SOAP standards</h1>
<p>JAX-RPC and JAX-WS both support SOAP 1.1. The default binding supported by JAX-WS is SOAP 1.1 over HTTP. But it can also support SOAP 1.2 binding over HTTP. As a Java programmer you might not encounter any difference between SOAP 1.1 and SOAP 1.2.</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-ServiceEndpointInterfacerequirements">Service Endpoint Interface requirements</h1>
<p>As per JAX-RPC a Service Endpoint Interface must extend <strong>Remote</strong>. JAX-WS removes this condition and you can pretty much make a <strong>POJO</strong> class Web Service by just adding the <code>@WebService</code> annotation at the top of the class.   </p>

<parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">JAX-RPC Converter SEI</parameter><plain-text-body>
package org.apache.geronimo.samples.jaxrpc;

import java.math.BigDecimal;
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Converter extends Remote {
	
	public BigDecimal dollarToRupees(BigDecimal dollars) throws RemoteException;
	public BigDecimal rupeesToEuro(BigDecimal rupees) throws RemoteException;

}
</plain-text-body> 

<parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">JAX-WS Converter SEI</parameter><plain-text-body>
package org.apache.geronimo.samples.jaxrpc;

import java.math.BigDecimal;
import javax.jws.WebService

@WebService(name = "Converter", targetNamespace = "http://org.apache.geronimo.samples.jaxws")
public interface Converter {
	
	public BigDecimal dollarToRupees(BigDecimal dollars);
	public BigDecimal rupeesToEuro(BigDecimal rupees);

}
</plain-text-body>

<p>The main differences that you can find here are:</p>
<ul><li><strong>Annotations</strong> - JAX-WS requires that all SEIs include the <code>@WebService</code> annotation</li><li><strong>java.rmi.Remote</strong> - The JAX-RPC SEI extends the java.rmi.Remote interface. JAX-WS no longer requires this.</li></ul>


<p>Also, a JAX-WS SEI makes extensive use of annotations to specify the Java to WSDL mapping whereas this information does not exist in any form of JAX-RPC SEI (which requires JAX-RPC mapping file to map Java to WSDL).</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Deploymentdescriptor">Deployment descriptor</h1>
<p>The deployment descriptor <code>web.xml</code> hasn't changed from JAX-RPC to JAX-WS where we just need to expose a POJO class as a servlet and the server creates the artifacts on the fly whereas for JAX-RPC we need to specify the WSDL and JAX-RPC mapping file locations.<br clear="none">
With JAX-WS mapping to Java EE 5 and taking the advantage of annotations, the need for Web Service descriptor document <code>webservices.xml</code> is eliminated as a Web Service can be effectively described using the annotations.</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Clientportlookup">Client port lookup</h1>
<p>The following code samples demonstrate the difference between JAX-RPC and JAX-WS in client port lookup.</p>

<parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">JAX-RPC Converter Client</parameter><plain-text-body>

package org.apache.geronimo.samples.jaxrpc;

import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.rpc.Service;
import javax.xml.rpc.ServiceFactory;
import javax.xml.rpc.ServiceException;

//a part of client
URL url = new URL("http://localhost:8080/jaxrpc-converter/converter?wsdl");
QName qname = new QName("http://org.apache.geronimo.samples.jaxrpc/","ConverterService");
ServiceFactory factory = ServiceFactory.newInstance();
Service service = factory.createService(url, qname);
Converter conv = (Converter) service.getPort(Converter.class);

</plain-text-body>

<parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">JAX-WS Converter Client</parameter><plain-text-body>

package org.apache.geronimo.samples.jaxrpc;

import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;

//a part of client
URL url = new URL("http://localhost:8080/jaxrpc-converter/converter?wsdl");
QName qname = new QName("http://org.apache.geronimo.samples.jaxrpc/","ConverterService");
Service service = Service.create(url, qname);
Converter conv = (Converter) service.getPort(Converter.class);

</plain-text-body>

<p>The main differences we can observe here are</p>
<ul><li>The creation of <strong>ServiceFactory</strong> instance is no longer required for creating the Service</li><li>Service maps to <strong>javax.xml.rpc.Service</strong> in JAX-RPC and to <strong>javax.xml.ws.Service</strong> in JAX-WS.</li></ul>


<h1 id="MigratingfromJAX-RPCtoJAX-WS-RESTfulservices">RESTful services</h1>
<p>JAX-WS introduces <strong>RESTful Web Services</strong> as successor for SOAP based Web Service. RESTful services have already got quite support from many vendors like Google AdSense, Yahoo API's, Amazon and so on.<br clear="none">
The important things that are introduced in JAX-WS to support RESTful services are:</p>

<h2 id="MigratingfromJAX-RPCtoJAX-WS-Provider">Provider</h2>
<p>Web service endpoints may choose to work at the XML message level by implementing the Provider interface. Here the endpoints access messages or message payloads using this low level, generic API.</p>

<h2 id="MigratingfromJAX-RPCtoJAX-WS-Dispatch">Dispatch</h2>
<p>The Dispatch API is intended for advanced XML developers who prefer to use XML constructs at the <code>java.lang.transform.Source</code> or <code>javax.xml.soap.SOAPMessage</code> level. For added convenience use of the Dispatch API with JAXB data-bound objects is supported.</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Asynchronousoperations">Asynchronous operations </h1>
<p>A major difference in operation mapping for JAX-WS over JAX-RPC is the introduction of asynchronous operations. Any WSDL operation with a two-way message flow, or one where the client expects to receive a response, can be mapped to an asynchronous Java representation.<br clear="none">
For further reference about asynchronous operations in JAX-WS refer to the references section.</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-MTOMandSAAJ">MTOM and SAAJ</h1>
<p>JAXWS 2.0 brings in support for optimized transmission of binary data as specified by MTOM (SOAP Message Transmission Optimization Mechanism) and SAAJ (SOAP with Attachments API for Java). <br clear="none">
MTOM allows optimized transmission of binary data - any xs:base64Binary or xs:hexBinary schema type can be sent as attachment following rules defined by MTOM specification.</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-References">References</h1>
<ul><li><a shape="rect" href="developing-a-jax-ws-pojo-web-service.html">Developing a JAX-WS POJO Web Service</a> &amp; <a shape="rect" href="developing-jax-rpc-web-services.html">Developing JAX-RPC Web services</a></li><li><a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html" rel="nofollow">http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html</a></li><li><a shape="rect" class="external-link" href="https://jax-rpc.dev.java.net/jaxws20-ea2/docs/UsersGuide.html" rel="nofollow">https://jax-rpc.dev.java.net/jaxws20-ea2/docs/UsersGuide.html</a></li><li><a shape="rect" class="external-link" href="http://blogs.sun.com/trajesh/entry/migrating_from_jax_rpc_to" rel="nofollow">http://blogs.sun.com/trajesh/entry/migrating_from_jax_rpc_to</a></li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Migrating from JAX-RPC to JAX-WS';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
