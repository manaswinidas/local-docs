<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="JBoss to Geronimo - Servlets and JSPs Migration" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi JBoss to Geronimo - Servlets and JSPs Migration" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: JBoss to Geronimo - Servlets and JSPs Migration</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="migrating-to-apache-geronimo.html">Migrating to Apache Geronimo</a>&nbsp;&gt;&nbsp;<a href="migrating-from-jboss-to-geronimo.html">Migrating from JBoss to Geronimo</a>&nbsp;&gt;&nbsp;<a href="jboss-to-geronimo-servlets-and-jsps-migration.html">JBoss to Geronimo - Servlets and JSPs Migration</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">JBoss to Geronimo - Servlets and JSPs Migration</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645284">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645284">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645284">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645284">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645284">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645284">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p><span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-top"></span><br clear="none">
This article will help you migrate servlets and JSPs deployed JBoss v4 to Apache Geronimo. This article is part of a series of migration articles covering different types of applications migration.</p>

<p>This article covers the migration one of the most fundamental aspects of J2EE: servlets and JSPs. The sample application used for this migration exercise is <a shape="rect" href="jboss-to-geronimo-servlets-and-jsps-migration.data/college_fest.zip?version=1&amp;modificationDate=1204181831000&amp;api=v2" data-linked-resource-id="20874023" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="college_fest.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3">College Fest</a> which just contains servlets and JSPs for handling the flow of control. The College Fest sample application does not use any database, for details on migrating JDBC applications refer to the <a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">JBoss to Geronimo - JDBC Migration</a> article.</p>

<p>After reading this article you should be able to reconfigure the JBoss build files and the deployment descriptors to set up the Apache Geronimo destination environment and then deploying simple Web applications.</p>

<p>This article is organized in the following sections:</p>

<ul><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-implementation">Servlets and JSPs implementation analysis</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-sampleApp">Sample application</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-JBoss">The JBoss environment</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-Geronimo">The Geronimo environment</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-migration">Step-by-step migration</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-summary">Summary</a></li></ul>


<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-ServletsandJSPsimplementationanalysisimplementation">Servlets and JSPs implementation analysis <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-implementation"></span></h1>
<p>Servlets and JSPs implementations may vary from one application server to another. The purpose of this section is to provide servlets and JSPs specific feature-to-feature comparison between JBoss and Apache Geronimo so you can clearly identify the differences and plan accordingly before migration.</p>

<p>Apache Geronimo includes a Web application container supporting J2EE Web applications. The Web container itself supports basic configuration such as network ports and SSL options, and each Web application may include Geronimo-specific configuration information as well. Web applications participate in the Geronimo security infrastructure, so authenticating to a Web application allows access to secure EJBs and Connectors as well.</p>

<p>Apache Geronimo currently supports two Web containers: <strong>Jetty</strong> and <strong>Tomcat</strong>.</p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-Jetty">Jetty</h3>
<p>Jetty is a 100% Java HTTP Server and Servlet Container. This means that you do not need to configure and run a separate Web server in order to use servlets and JSPs to generate dynamic content. Jetty is a fully featured Web server for static and dynamic content.</p>

<p>Unlike separate server/container solutions, Jetty's Web server and Web application run in the same process without interconnection overheads and complications.  Furthermore, as a pure java component, Jetty can be easily included in your application for demonstration, distribution or deployment. Jetty is available on all Java supported platforms.</p>

<p>In Geronimo, you need to explicitly configure the pathways used by browsers attempting to connect to the Web container. In the case of Jetty, the default Web container, these pathways are known as connectors. The standard configuration includes a Jetty connector supporting HTTP on port 8080, as well as a HTTPS connector on port 8443.</p>

<p>Each Jetty connector is a GBean, so the process of configuring a Jetty connector involves configuring a GBean.</p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-ApacheTomcat">Apache Tomcat</h3>
<p>Apache Tomcat is the servlet container that is used in the official Reference Implementation for the Java Servlet and JavaServer Pages technologies.</p>

<p><a shape="rect" class="external-link" href="http://java.sun.com/products/servlet" rel="nofollow">http://java.sun.com/products/servlet</a><br clear="none">
<a shape="rect" class="external-link" href="http://java.sun.com/products/jsp" rel="nofollow">http://java.sun.com/products/jsp</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Thedifferences">The differences</h2>
<p>JBoss v4 supports only Tomcat 5.5, which is the default Web container. The embedded Tomcat service is the expanded SAR <strong>jbossweb-tomcat55.sar</strong> in the deploy directory. The <code>web.xml</code> file that provides a default configuration set for Web application is also found in this exapanded SAR directory structure. </p>

<p>The HTTP connector is set up on port 8080 and port 8009 is used if you want to connect via a separate Web server such as Apache HTTP.</p>

<p>In addition to the default Web container, the second major difference lies in the deployment plan. A deployment plan in Geronimo is similar to a J2EE deployment descriptor in the sense that it is an XML file that contains the configuration information for a specific application module or service.</p>

<p>For very simple Web applications with no security nor resource references, a Geronimo deployment plan is not required, a default context root and dependencies will be provided automatically at deployment time.</p>

<p>The Geronimo Web application deployment plan is <strong>geronimo-web.xml</strong>. The corresponding deployment descriptor in Jboss is <code>jboss-web.xml</code>. For further details on Geronimo deployment architecture you may refer to the <a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/library/os-ag-deploy" rel="nofollow">Understand Geronimo's deployment architecture</a>.</p>

<p>Another difference with servlets and JSPs lies in the way the Web application is deployed. In Geronimo, the application package (ear, war, rar or jar) is deployed using the deployment tool <code>deployer.jar</code> located in the <code>&lt;geronimo_home&gt;/bin</code> directory.<br clear="none">
<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-deploymentTool"></span><br clear="none">
The <code>deployer.jar</code> deploys the application module based on the information provided in the deployment plan (if a plan is provided) to the Geronimo server. The server then saves the metadata to a configuration store and the executables to a binary repository. The following figure illustrates the behavior of the deployment tool.</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="jboss-to-geronimo-servlets-and-jsps-migration.data/deployer.jpg" data-image-src="/confluence/download/attachments/20645284/deployer.jpg?version=1&amp;modificationDate=1204181831000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="20874022" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="deployer.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3"></span></p>

<p>In JBoss, a Web application is deployed by simply copying the application package (ear, war, rar or jar) into the <code>&lt;jboss_home&gt;/server/&lt;your_server_name&gt;/deploy</code> directory from where the server detects its presence and deploys it accordingly.</p>

<p>The following table summarizes the differences between JBoss and Geronimo.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Feature</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss v4</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Apache Geronimo</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Deployment descriptor/plan</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>jboss.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>geronimo-web.xml</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Method of deployment</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Copy the package (ear, war, rar or jar) to the deploy folder of the JBoss server <code>&lt;jboss_home&gt;/server/&lt;your_server_name&gt;/deploy</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><a shape="rect" href="tools-and-commands.html#Toolsandcommands-Deployertool">Deployer tool</a> available in server's bin directory<br clear="none">
<code>&lt;geronimo_home&gt;/bin</code>. Deployment is also available through the <a shape="rect" href="deploying-and-undeploying-applications.html#Deployingandundeployingapplications-ViaGeronimoAdministrationConsole">administration console</a>. A third option is <a shape="rect" href="deploying-and-undeploying-applications.html#Deployingandundeployingapplications-Viahotdeployment">Hot Deployment</a>, which would be the equivalent to JBoss functionality.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Web container</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Apache Tomcat 5.5</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Jetty and/or Apache Tomcat</p></td></tr></tbody></table></div>


<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-SampleapplicationsampleApp">Sample application <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-sampleApp"></span></h1>
<p>The <a shape="rect" href="jboss-to-geronimo-servlets-and-jsps-migration.data/college_fest.zip?version=1&amp;modificationDate=1204181831000&amp;api=v2" data-linked-resource-id="20874023" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="college_fest.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3">College Fest</a> application handles registration for events at a college festival. This is a very simple application that does not use any type of database. The College Fest application has the following four pages:</p>

<ul><li>Welcome page</li><li>Event List page</li><li>Event Details page</li><li>Registration page</li></ul>


<p>The following figure illustrates the application flow:</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="jboss-to-geronimo-servlets-and-jsps-migration.data/webApp_flow.jpg" data-image-src="/confluence/download/attachments/20645284/webApp_flow.jpg?version=1&amp;modificationDate=1204181831000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="20874021" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="webApp_flow.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3"></span></p>

<p>The user access the Welcome page and enters user name and college. From there the user can see the list of available events. The user can access the details for each Event by clicking them from the list. From the Event details page the user can register for that particular event. </p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-ApplicationclassesandJSPpages">Application classes and JSP pages</h2>
<p>The College Fest sample application consists of the following two servlets:</p>
<ul><li>WelcomeServlet - Handles user login and then grabs the user name and dispatches this to the next servlet.</li><li>PersonalServlet - Personalizes the page for the user and hands over control to welcome.jsp.</li></ul>


<p>The College Fest sample application also includes the following JSP pages:</p>
<ul><li>welcome.jsp - Displays the events list to the user so that s/he can choose on what event to register.</li><li>dc.jsp - Displays the details for the Dumb Charades event.</li><li>pp.jsp - Displays the details for the Pot Potpourri event.</li><li>wtgw.jsp - Displays the details for the  What's The Good Word event.</li><li>gq.jsp - Displays the details for the General Quiz event.</li><li>team_reg.jsp - Handles the user registration for one event.</li></ul>


<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Toolsused">Tools used</h2>
<p>The tools used for developing and building the College Fest sample application are:</p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-Eclipse">Eclipse</h3>
<p>The Eclipse IDE was used for development of the sample application. This is a very powerful and popular open source development tool. Integration plug-ins are available for both JBoss and Geronimo. Eclipse can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://www.eclipse.org" rel="nofollow">http://www.eclipse.org</a></p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-ApacheAnt">Apache Ant</h3>
<p>Ant is a pure Java build tool. It is used for building the war files for the College Fest application. Ant can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-TheJBossenvironmentJBoss">The JBoss environment <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-JBoss"></span></h1>
<p>This section shows you how and where the sample JBoss reference environment was installed so you can map this scenario to your own implementation.</p>

<p>Detailed instructions for installing, configuring, and managing JBoss are provided in the product documentation. Check the <a shape="rect" class="external-link" href="http://www.jboss.org/jbossas/docs/" rel="nofollow">product Web site</a> for the most updated documents.</p>

<p>The following list highlights the general tasks you will need to complete to install and configure the initial environment as the starting point for deploying the sample application.</p>

<ol><li>Download and install JBoss v4 as explained in the product documentation guides. From now on the installation directory will be referred as <code>&lt;jboss_home&gt;</code>.</li><li>Create a copy of the default JBoss v4 application server. Copy recursively <code>&lt;jboss_home&gt;\server\default</code> to <code>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;</code>.</li><li>Start the new server by running the <code>run.sh -c &lt;your_server_name&gt;</code> command from the <code>&lt;jboss_home&gt;\bin</code> directory.</li><li>Once the server is started, you can verify that it is running by opening a Web browser and pointing it to this URL: <a shape="rect" class="external-link" href="http://localhost:8080" rel="nofollow">http://localhost:8080</a>. You should see the JBoss Welcome window and be able to access the JBoss console.</li><li>Once the application server is up and running, the next step is to install and configure all the remaining prerequisite software required by the sample application. This step is described in the following section.</li></ol>


<p>As mentioned before, Apache Ant is used to build the binaries for the College Fest application. If you do not have Ant installed this is a good time for doing it and make sure that <strong>&lt;ant_home&gt;\bin</strong> directory is added to the system's path variable.</p>

<p>Apache Ant can be downloaded from the following URL:</p>

<p><a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Buildthesampleapplication">Build the sample application</h2>
<p>The College Fest application included with this article provides an Ant script that you will use in order to build the application. Download the College Fest application from the following link:</p>

<p><a shape="rect" href="jboss-to-geronimo-servlets-and-jsps-migration.data/college_fest.zip?version=1&amp;modificationDate=1204181831000&amp;api=v2" data-linked-resource-id="20874023" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="college_fest.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3">College Fest</a></p>

<p>After extracting the zip file, a college_fest directory is created. In that directory open the <strong>build.properties</strong> file and edit the properties to match your environment as shown in the following example:</p>

<div class="preformatted panel" style="border-style: solid;border-width: 1px;"><div class="preformattedHeader panelHeader" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>Update the build.properties file</b></div><div class="preformattedContent panelContent">
<pre>#Replace java.home with your jdk directory
java.home=&lt;JAVA_HOME&gt;
#Replace j2ee.home with the parent directory of lib/j2ee.jar
j2ee.home=&lt;jboss_home&gt;/server/&lt;your_server_name&gt;
#Replace with jboss home directory
jboss.server=&lt;jboss_home&gt;/server/&lt;your_server_name&gt;
#geronimo home directory
geronimo.home=&lt;geronimo_home&gt;
</pre>
</div></div>

<p>In the college_fest directory you can also find two build files, <code>build.xml</code> and <code>jboss-build.xml</code>. <code>build.xml</code> is the default build file so if you just type <strong>ant</strong>  this file will be used for building the application. For this particular sample application the <code>jboss-build.xml</code> file is provided.</p>

<p>From a command line, still within the college_fest directory type the following command:</p>

<p><strong><code>ant -f jboss-build.xml clean deploy</code></strong></p>

<p>With this command, ant will use the targets defined in the <code>jboss-build.xml</code> file to build the College Fest application and deploy it to the JBoss server. Take a special look at <strong>&lt;target name="deploy" ...&gt;</strong>, here is where the <code>jboss-build.xml</code> tell ant where to deploy the WAR file. The following example shows the definitions in the <code>jboss-build.xml</code> file.</p>

<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>jboss-build.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!-- build file for building a war --&gt;

&lt;project name=&quot;build&quot; default=&quot;war&quot; basedir=&quot;.&quot;&gt;

    &lt;property file=&quot;build.properties&quot;/&gt;
    &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt;
    &lt;property name=&quot;dest.dir&quot; value=&quot;bin&quot;/&gt;
    
    &lt;target name=&quot;clean&quot; description=&quot;Delete all generated files&quot;&gt;
        &lt;echo message=&quot;Deleting bin directory&quot; /&gt;
        &lt;delete dir=&quot;bin&quot; /&gt;
    &lt;/target&gt;

	&lt;target name=&quot;compile&quot;&gt;
		&lt;mkdir dir=&quot;${dest.dir}&quot;/&gt;
		&lt;javac srcdir=&quot;${src.dir}&quot; destdir=&quot;${dest.dir}&quot;&gt;
			&lt;classpath path=&quot;${java.home}/lib/tools.jar&quot;/&gt;
			&lt;classpath path=&quot;${j2ee.home}/lib/j2ee.jar&quot;/&gt;
		&lt;/javac&gt;
	&lt;/target&gt;

	&lt;target name=&quot;war&quot; depends=&quot;compile&quot;&gt;
		&lt;war destfile=&quot;college_fest.war&quot; webxml=&quot;WEB-INF/web.xml&quot;&gt;
			&lt;zipfileset dir=&quot;jsp&quot; prefix=&quot;jsp&quot;/&gt;   	 
			&lt;zipfileset dir=&quot;pix&quot; prefix=&quot;pix&quot;/&gt;   	 
			&lt;classes dir=&quot;${dest.dir}&quot;/&gt;   
                        &lt;webinf dir=&quot;WEB-INF&quot; /&gt;
		&lt;/war&gt;
	&lt;/target&gt;

	&lt;target name=&quot;deploy&quot; depends=&quot;war&quot;&gt;
		&lt;copy file=&quot;college_fest.war&quot; todir=&quot;${jboss.server}/deploy&quot;/&gt;
	&lt;/target&gt;

	&lt;target name=&quot;undeploy&quot;&gt;
		&lt;delete file=&quot;${jboss.server}/deploy/college_fest.war&quot;/&gt;
    &lt;/target&gt;
&lt;/project&gt;
]]></script>
</div></div>

<p>The war created by the ant build contains a JBoss specific deployment descriptor, the <code>jboss-web.xml</code> file in the <code>WEB-INF</code> directory of the WAR is shown in the following example.</p>

<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>JBoss deployment descriptor</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;jboss-web&gt;

    &lt;context-root&gt;college_fest&lt;/context-root&gt;
    &lt;context-priority-classloader&gt;
      false
    &lt;/context-priority-classloader&gt;
&lt;/jboss-web&gt;]]></script>
</div></div>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Deploythesampleapplication">Deploy the sample application</h2>
<p>The previous step showed how to deploy the application at build time by specifying a customized <code>jboss-build.xml</code> file. If you used the default <code>build.xml</code> file at build time you still need to deploy the College Fest application manually. To deploy the College Fest application in JBoss, copy the <code>college_fest.war</code> file you just built with Ant to the following directory:</p>

<p><code>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;\deploy</code></p>

<p>If JBoss is already started, it will automatically deploy and start the application; otherwise, the application will be deployed and started at the next startup.</p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Testingtheapplicationtest">Testing the application <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-test"></span></h2>
<p>To test the application, open a Web browser and access the following URL:</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/college_fest" rel="nofollow">http://localhost:8080/college_fest</a></p>

<p>You should see the Welcome screen where you can login with your name and college. When you enter your name a college and click Submit you will see a message at the end on the page stating your name with a link to "Click here" to enter the site. Browse the site and check the options, at this point the College Fest application is configured and running.</p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-TheGeronimoenvironmentGeronimo">The Geronimo environment <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-Geronimo"></span></h1>
<p>Download and install Geronimo from the following URL:</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a></p>

<p>The release notes available there provide clear instructions on system requirements and how to install and start Geronimo.  Throughout the rest of this article we will refer to the Geronimo installation directory as <strong>&lt;geronimo_home&gt;</strong>.</p>

<div class="confluence-information-macro confluence-information-macro-warning"><p class="title">TCP/IP ports conflict</p><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you are planning to run JBoss and Geronimo on the same machine consider to change the default service ports on, at least, one of these servers.</p></div></div>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-Step-by-stepmigrationmigration">Step-by-step migration <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-migration"></span></h1>
<p>In order to migrate the College Fest application to Geronimo you need to replace the <code>jboss-web.xml</code> file with a <code>geronimo-web.xml</code> file which is the Geronimo specific descriptor file. The geronimo-web.xml file is located in the WEB-INF directory withing the college_fest directory structure. The Geronimo deployment plan geronimo-web.xml is illustrated in the following example.</p>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The following geronimo-web.xml was generated using the J2G tool.</p></div></div>

<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>Geronimo specific deployment plan geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;web-app xmlns=&quot;http://geronimo.apache.org/xml/ns/j2ee/web-1.1&quot; 
         xmlns:naming=&quot;http://geronimo.apache.org/xml/ns/naming-1.1&quot; 
         xmlns:security=&quot;http://geronimo.apache.org/xml/ns/security-1.1&quot; 
         xmlns:sys=&quot;http://geronimo.apache.org/xml/ns/deployment-1.1&quot;&gt;
  &lt;sys:environment&gt;
    &lt;sys:moduleId&gt;
      &lt;sys:groupId&gt;j2g&lt;/sys:groupId&gt;
      &lt;sys:artifactId&gt;web-module&lt;/sys:artifactId&gt;
      &lt;sys:version&gt;1.0&lt;/sys:version&gt;
      &lt;sys:type&gt;war&lt;/sys:type&gt;
    &lt;/sys:moduleId&gt;
    &lt;sys:dependencies/&gt;
  &lt;/sys:environment&gt;
  &lt;context-root&gt;college_fest&lt;/context-root&gt;
&lt;/web-app&gt;
]]></script>
</div></div>

<p>Given that College Fest is a very simple application, the Geronimo deployment plan will also be very simple. Remember that this application does not use any database access nor has security configured. While reading other articles in the <strong>JBoss to Geronimo</strong> migration series, you will notice how the complexity of the deployment plan increases as the sample applications for the different migration scenarios also grow in complexity.</p>

<p>Earlier in this article it was discussed the behavior of the <a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-deploymentTool">deployment tool</a>. During the deployment process, you provide to the deployment tool the application module and a deployment plan. The College Fest sample application is so simple that you may choose not to provide any deployment plan and let Geronimo do the deployment with a default set of values (a default context root for example).</p>

<p>Last time you built the College Fest sample application it was configured for ant to use the <code>jboss-build.xml</code> file instead of the default <code>build.xml</code>. The following example shows the content of the default <code>build.xml</code> file.</p>

<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>build.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!-- build file for building a war --&gt;

&lt;project name=&quot;build&quot; default=&quot;war&quot; basedir=&quot;.&quot;&gt;

    &lt;property file=&quot;build.properties&quot;/&gt;
    &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt;
    &lt;property name=&quot;dest.dir&quot; value=&quot;bin&quot;/&gt;


    &lt;target name=&quot;clean&quot; description=&quot;Delete all generated files.&quot;&gt;
        &lt;echo message=&quot;Deleting bin folder&quot; /&gt;
        &lt;delete dir=&quot;bin&quot;/&gt;
    &lt;/target&gt;

      &lt;target name=&quot;compile&quot;&gt;
    	&lt;mkdir dir=&quot;${dest.dir}&quot;/&gt;

        &lt;javac srcdir=&quot;${src.dir}&quot; destdir=&quot;${dest.dir}&quot;&gt;
            &lt;classpath path=&quot;${java.home}/lib/tools.jar&quot;/&gt;
            &lt;!--classpath path=&quot;${j2ee.home}/lib/j2ee.jar&quot;/--&gt;
            &lt;classpath path=&quot;${geronimo.home}/repository/org/apache/geronimo/specs/geronimo-servlet_2.5_spec/1.1/geronimo-servlet_2.5_spec-1.1.jar&quot; /&gt;
        &lt;/javac&gt;
    &lt;/target&gt;

    &lt;target name=&quot;war&quot; depends=&quot;compile&quot;&gt;
        &lt;war destfile=&quot;college_fest.war&quot; webxml=&quot;WEB-INF/web.xml&quot;&gt;
            &lt;zipfileset dir=&quot;jsp&quot; prefix=&quot;jsp&quot;/&gt;
            &lt;zipfileset dir=&quot;pix&quot; prefix=&quot;pix&quot;/&gt;   	    
            &lt;classes dir=&quot;${dest.dir}&quot;/&gt;    
            &lt;webinf dir=&quot;WEB-INF&quot; /&gt;
        &lt;/war&gt;
&lt;/target&gt;


&lt;/project&gt;
]]></script>
</div></div>

<p>To build the migrated application run <strong>ant</strong> from the command line without specifying any additional parameters, a college_fest.war file will be created in the root directory of the College Fest application directory structure.</p>

<p>To delete the generated files for a clean build run <strong>ant clean</strong> followed by an <strong>ant.</strong></p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Deploythemigratedsampleapplication">Deploy the migrated sample application</h2>
<p>To deploy the migrated College Fest application, make sure the Geronimo server is up and running. </p>

<p>From a command line, change directory to <code>&lt;geronimo_home&gt;/bin</code> and type the following command:</p>

<p><strong><code>deploy --user system --password manager deploy &lt;college_fest_home&gt;/college_fest.war</code></strong></p>

<p>Once the application is deployed, open a Web browser and access the following URL:</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/college_fest/" rel="nofollow">http://localhost:8080/college_fest/</a></p>

<p>Repeat the steps you did when <a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-test">Testing the application</a> on the JBoss environment.</p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">Back to Top</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-Summarysummary">Summary <span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-summary"></span></h1>
<p>This article has shown you how to migrate a simple Servlet and JSPs application, from JBoss to the Apache Geronimo application server. You followed step-by-step instructions to build the application, deploy and run it, and then migrate it to the Geronimo environment.</p>

<p>Some remarks after reading this article:</p>
<ul><li>Apache Geronimo provides two different Web containers, Jetty and Apache Tomcat.</li><li>You learnt how to use the deployer too for deploying an application in Geronimo.</li><li>Not always a Geronimo deployment plan is needed, if the application does not use resource references you can accept the deployment defaults from Geronimo.</li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : JBoss to Geronimo - Servlets and JSPs Migration';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
