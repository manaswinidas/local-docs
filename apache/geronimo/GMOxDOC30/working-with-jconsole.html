<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Working with JConsole" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Working with JConsole" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0 Documentation: Working with JConsole</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="configuring-and-administering.html">Configuring and administering</a>&nbsp;&gt;&nbsp;<a href="monitoring-the-health-of-the-apache-geronimo-server.html">Monitoring the health of the Apache Geronimo server</a>&nbsp;&gt;&nbsp;<a href="working-with-jconsole.html">Working with JConsole</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Working with JConsole</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=23334738">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=23334738">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=23334738">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=23334738">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=23334738">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=23334738">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">

<p>JConsole is a Java Management eXtension (JMX) compliant GUI tool that can be used to connect to a running Geronimo server instance. In JConsole, you will be able to monitor the JVM memory usage, threads stack trace, loaded classes and VM information as well as Geronimo MBeans.</p>

<h1 id="WorkingwithJConsole-MonitoringGeronimoinJConsole">Monitoring Geronimo in JConsole</h1>
<p>To make Geronimo accessible to JConsole you can simply deactive both password authentication and secure socket layer (SSL) encryption:</p>
<ol><li>If you are running the server with IBM JDK 6, you have to add the following Java options to disable password authentication and SSL connection. Note that the command should be typed on a single line.
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><ul><li>On a Windows system</li></ul></div>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>set JAVA_OPTS=-Dcom.sun.management.jmxremote.port=&lt;port&gt; -Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false
</pre>
</div></div>
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><ul><li>On a Linux system</li></ul></div>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>export JAVA_OPTS="-Dcom.sun.management.jmxremote.port=&lt;port&gt; -Dcom.sun.management.jmxremote.authenticate=false  
-Dcom.sun.management.jmxremote.ssl=false"
</pre>
</div></div>
where 
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><em>&lt;port&gt;</em> is a free port on which you would like to enable this connection.</p></div>
<br clear="none" class="atl-forced-newline"></li><li>Start the server.</li><li>Then, run the command <code>jconsole</code> from <code>&lt;JDK_HOME&gt;\bin</code> directory.</li><li>In the dialog <strong>New connection</strong> of JConsole, input the connection information in the <em>Remote Process</em> field.
	<ul><li><code><strong>&lt;ipaddr&gt;:&lt;port&gt;</strong></code> for monitoring local server overall information, for example memories, threads, and VM summaries.</li><li><code><strong>service:jmx:rmi:///jndi/rmi://&lt;ipaddr&gt;:1099/JMXConnector</strong></code> for monitoring  Geronimo information in <em>MBeans</em> tab. In this case, tabs other than <em>MBeans</em> are inactive.<br clear="none">
where 
		<ul><li><em>&lt;ipaddr&gt;</em> can be <strong>localhost</strong> if you are monitoring the local server, and can be host name if the monitoring remote machine can access the Geronimo server via <code>ping</code> command.</li><li><em>&lt;port&gt;</em> is the port number you specified in Java options.</li><li>1099 is the default naming port for Geronimo.</li></ul>
		</li></ul>
	</li><li>Then click <strong>OK</strong>. Note that information may vary when you are using IBM SDK or Sun SDK.</li></ol>


<h1 id="WorkingwithJConsole-MonitorGeronimoinJConsolewithsecureJMXconnectionenabled">Monitor Geronimo in JConsole with secure JMX connection enabled</h1>
<p>Password authentication over secure sockets layer (SSL) can be used to ensure that unauthorized persons cannot control or monitor your server. Before connecting to the secure JMX server in JConsole, you have to make a few configuration steps to disable the non-secure JMX server and start the jmx-security module.</p>
<ol><li><a shape="rect" href="securing-rmi-port-of-geronimo.html">Enable JMX-security module of the Geronimo server</a>.</li><li>Then, open a command window and set environment variable.
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><ul><li>On a Windows system</li></ul></div>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>set GERONIMO_HOME=&lt;Geronimo_HOME&gt;
</pre>
</div></div>
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><ul><li>On a Linux system</li></ul></div>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>export GERONIMO_HOME=&lt;Geronimo_HOME&gt;
</pre>
</div></div>
where <em>&lt;Geronimo_HOME&gt;</em> is the installation directory of the Geronimo server</li><li>Run <code>&lt;JDK_HOME&gt;/bin/jconsole</code> via the following command. Note that the command has been split across several lines for readability. The command must be typed on a single line.
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><ul><li>On a Windows system</li></ul></div>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>jconsole \-J-D-Dorg.apache.geronimo.keyStoreTrustStorePasswordFile=%myDir%/KeystoreTrustSotrePasswordFile.key
</pre>
</div></div>
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><ul><li>On a Linux system</li></ul></div>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>jconsole \-J-D-Dorg.apache.geronimo.keyStoreTrustStorePasswordFile=$myDir/KeystoreTrustSotrePasswordFile.key
</pre>
</div></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style></div>Where<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style></div><br clear="none">
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style></div>_myDir_ is the location of your trusted keystore file. By default, the content of file is from <code>/var/config/config-substitutions.properties</code> file. See <a shape="rect" href="creating-your-keystorefile-for-ssl-authentication.html">Creating your keystorefile for SSL authentication</a> for more details.</li><li>In the dialog <strong>Connect to Agent</strong> of JConsole, click <strong>Advanced</strong>, and input the information:
	<ul><li><strong>JMX URL</strong>: <code>service:jmx:rmi:///jndi/rmi://&lt;ipaddr&gt;:1099/JMXSecureConnector</code></li><li><strong>User Name</strong>: system (or user name you set)</li><li><strong>Password</strong>: manager (or password you set)<br clear="none">
where 
		<ul><li><em>&lt;ipaddr&gt;</em> can be <strong>localhost</strong> if you are monitoring the local server, and can be host name if the monitoring remote machine can access the Geronimo server via <code>ping</code> command.</li><li>1099 is the default naming port for Geronimo.</li></ul>
		</li></ul>
	</li><li>Then click <strong>OK</strong>. JConsole will connect to Geronimo MBeans management interface. Switch to <em>Means</em> tab for server-wide information. In this case, tabs other than <em>MBeans</em> are inactive. Note that information may vary when you are using IBM SDK or Sun SDK.</li></ol>

</div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Working with JConsole';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
