<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="geronimo-web.xml" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi geronimo-web.xml" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: geronimo-web.xml</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans.html">Creating deployment plans</a>&nbsp;&gt;&nbsp;<a href="understanding-deployment-plans.html">Understanding deployment plans</a>&nbsp;&gt;&nbsp;<a href="geronimo-webxml.html">geronimo-web.xml</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">geronimo-web.xml</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645409">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645409">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645409">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645409">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645409">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645409">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<h1 id="geronimo-web.xml-Overview">Overview</h1>
<p><parameter ac:name="atlassian-macro-output-type">INLINE</parameter><rich-text-body><p>The Geronimo-specific deployment plan for a Web application, which is usually packaged as a WAR file, is called "<strong>geronimo-web.xml</strong>".</p></rich-text-body> The <strong>geronimo-web.xml</strong> deployment plan is used to in conjunction with the <strong>web.xml</strong> Java EE deployment descriptor to deploy web applications consisting of Java Servlet Pages (JSP) and servlets to the Geronimo application server, and optionally can be used to configure the Geronimo web server (i.e., Tomcat or Jetty) where the Web application is going to be deployed. The <strong>geronimo-web.xml</strong> deployment plan is an optional file, but is typically used when deploying a WAR file. It is used to specify the application security roles, EJB names, database resources, JMS resources, etc. declared in <strong>web.xml</strong> to corresponding entities deployed in the server. In addition to that, if there are any web container specific configurations, such as Tomcat or Jetty specific, depending on the application needs, all these settings are configured as well here. If the web application depends on any third party libraries or other services running in the server, all these dependencies are declared in the plan. Some web applications require class loading requirements different from the default class loading behavior. The <strong>geronimo-web.xml</strong> allows application deployer to configure this as well. There are many more configurations that could be done through <strong>geronimo-web.xml</strong> depending on the requirements of web application.</p>

<h2 id="geronimo-web.xml-Packaging">Packaging</h2>

<p>The <strong>geronimo-web.xml</strong> Geronimo-specific deployment plan can be packaged as follows:</p>
<ol><li>Embedded in a WAR file. In this case, the <strong>geronimo-web.xml</strong> file must be placed in the <strong>/WEB-INF</strong> directory of the WAR, which is the same place where the <strong>web.xml</strong> file must be located.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>Maintained separately from the WAR file: In this case, the path to the file must be provided to the appropriate Geronimo deployer (e.g., command-line or console) when the WAR file is deployed. Note that in this case, the filename may be named something other than <strong>geronimo-web.xml</strong> but must adhere to the same schema. Also note that this will not work if the EJB JAR file is to be embedded in an enterprise application EAR file (see below).
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>Embedded in an enterprise application EAR file: In one case, the root-level element <strong>&lt;web-app&gt;</strong> of the <strong>geronimo-web-2.0.1.xsd</strong> schema can be embedded outside the WAR file in the EAR file's <strong>geronimo-application.xml</strong> file.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>Embedded in an enterprise application EAR file: In another case, the actual <strong>geronimo-web.xml</strong> file can be placed in the <strong>/META-INF</strong> directory of the EAR, which is the same location as the <strong>application.xml</strong> file.</li></ol>


<h1 id="geronimo-web.xml-Schema">Schema</h1>

<p>The <strong>geronimo-web.xml</strong> deployment plan is defined by the <strong>geronimo-web-2.0.1.xsd</strong> schema located in the <strong>&lt;geronimo_home&gt;/schema/</strong> subdirectory of the main Geronimo installation directory. The <strong>geronimo-web-2.0.1.xsd</strong> schema is documented here:</p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li></ul>


<p>This schema is <strong>not</strong> container-specific, meaning that it can be used to deploy a web application to either of the Tomcat or Jetty web containers supported by Geronimo. If it is necessary to deploy to a specific container, one of the two following container-specific schemas can be used instead. These allow container-specific configuration elements that are only understood by either the Tomcat or Jetty web container.</p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html</a></li><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html</a></li></ul>


<p>Finally, while the generic schema has no container-specific elements, it does facilitate the inclusion of container-specific elements by using the <strong>&lt;container-config&gt;</strong> element. This element is described in more detail below.</p>

<h2 id="geronimo-web.xml-Schematop-levelelements">Schema top-level elements</h2>

<p>The root XML element in the <strong>geronimo-web-2.0.1.xsd</strong> schema is the <strong>&lt;web-app&gt;</strong> element. The top-level XML elements of the <strong>&lt;web-app&gt;</strong> root element are described in the sections below. The deployment plan should always use the Web application namespace, and it typically requires elements from Geronimo System, Geronimo Naming, Geronimo Security, Geronimo Application, and Geronimo Persistence namespaces. Additionally, it has a required attribute to identify its configuration name, and an optional attribute to select a parent configuration. A typical deployment for <strong>geronimo-web.xml</strong> can be presented as follows:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">geronimo-web.xml Example</parameter><plain-text-body>
&lt;web:web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
             xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"
             xmlns:name="http://geronimo.apache.org/xml/ns/naming-1.2"
             xmlns:app="http://geronimo.apache.org/xml/ns/j2ee/application-2.0"
             xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0"
             xmlns:jaspi="http://geronimo.apache.org/xml/ns/geronimo-jaspi"
             xmlns:pers="http://java.sun.com/xml/ns/persistence"&gt;
             ...
&lt;/web:web-app&gt;

</plain-text-body>

<h3 id="geronimo-web.xml-&lt;sys:environment&gt;">&lt;sys:environment&gt;</h3>

<p>The <strong>&lt;sys:environment&gt;</strong> XML element uses the Geronimo System namespace, which is used to specify the common elements for common libraries and module-scoped services, and is documented here:</p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html</a></li></ul>


<p>The <strong>&lt;sys:environment&gt;</strong> element contains the following elements:</p>

<ul><li>The <strong>&lt;moduleId&gt;</strong> element is used to provide the configuration name for the web application as deployed in the Geronimo server. It contains elements for the <strong>groupId</strong>, <strong>artifactId</strong>, <strong>version</strong> and module <strong>type</strong>. Module IDs are normally printed with slashes between the four components, such as <strong>GroupID/ArtifactID/Version/Type</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;dependencies&gt;</strong> element is used to provide the configurations and third party libraries on which the web module is dependent upon. These configurations and libraries are made available to the web module via the Geronimo classloader hierarchy.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;bundle-activator&gt;</strong> element is used to create <strong>Bundle-Activator</strong> header in the manifest file of the web application. It specifies the entry point of the web application as deployed in the Geronimo server.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;bundle-classPath&gt;</strong> element is used to create <strong>Import-Package</strong> header in the manifest file of the web application. It contains a list of directories or embedded jar files, which are also called bundle resources and extend the classpath of the web application.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;import-package&gt;</strong> element is used to create <strong>Import-Package</strong> header in the manifest file of the web application. It specifies a list of packages to be resolved before the web application is started. Use &lt;import-package&gt;!packagename&lt;/import-package&gt; to override the specific package in server.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;export-package&gt;</strong> element is used to create <strong>Export-Package</strong> header in the manifest file of the web application. It specifies a list of packages to be exported.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;require-bundle&gt;</strong> element is used create <strong>Require-Bundle</strong> header in the manifest file of the web application. It specifies a list of bundles to bind to regardless their packages.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;dynamic-import-package&gt;</strong> element is used to create <strong>DynamicImport-Package</strong> header in the manifest file of the web application. It specifies a list of packaged to be imported dynamically, especially during class loading.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;hidden-classes&gt;</strong> element can be used to provide some degree of control of the Geronimo classloader hierarchy, and mitigate clashes between classes loaded by the server and classes loaded by the web application. It is used to lists packages or classes that may be in a parent classloader, but must not be exposed to the web application. Since Geronimo is entirely open-source and utilizes many other open-source libraries it is possible that the server itself and the web application may have different requirements and/or priorities for the same open source project libraries. The <strong>&lt;hidden-classes&gt;</strong> element is typically used when the web application has requirements for a specific version of a library that is different than the version used by Geronimo itself. A simple example of this is when a web application uses, and most importantly includes,  a version of the <strong>Log4J</strong> common logging library that is different than the version used by the Geronimo server itself. This might not provide the desired results.  Thus, the <strong>&lt;hidden-classes&gt;</strong> element can be used to "hide" the Log4J classes loaded by all the parent classloaders of the web application module, including those loaded by and for the Geronimo server itself, and only the Log4J classes included with the web application library will get loaded(not supported anymore).
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;non-overridable-classes&gt;</strong> element can also be used to provide some degree of control of the Geronimo classloader hierarchy, but in the exact opposite manner than provided by the <strong>&lt;hidden-classes&gt;</strong> element. This element can be used to specify a list of classes or packages which will <strong>only</strong> be loaded from the parent classloader of the web application module to ensure that the Geronimo server's version of a library is used instead of the version included with the web application(not supported anymore).
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;inverse-classloading&gt;</strong> element can be used to specify that standard classloader delegation is to be reversed for this module. The Geronimo classloader delegation follows the Java EE 5 specifications, and the normal behavior is to load classes from a parent classloader (if available) before checking the current classloader. When the <strong>&lt;inverse-classloading&gt;</strong> element is used, this behavior is reversed and the current classloader will always be checked before looking in the parent classloader(s). This element is similar to the <strong>&lt;hidden-classes&gt;</strong> element since the desired behavior is to give the libraries packaged with the web application (i.e., in WEB-INF/lib) precedence over anything used by the Geronimo server itself(not supported anymore, use &lt;import-package/&gt; above instead).
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;suppress-default-environment&gt;</strong> element can be used to suppress inheritance of environment by module (i.e., any default environment built by a Geronimo builder when deploying the plan will be suppressed). If the <strong>&lt;suppress-default-environment&gt;</strong> element is specified then any default environment build by a builder when deploying the plan will be suppressed. An example of where this is useful is when deploying a connector on an app client in a separate (standalone) module (not as part of a client plan). The connector builder defaultEnvironment includes some server modules that won't work on an app client, so you need to suppress the default environment and supply a complete environment including all parents for a non-app-client module you want to run on an app client. This element should not be used for web applications however.</li></ul>


<p>An example <strong>geronimo-web.xml</strong> file is shown below using the <strong>&lt;sys:environment&gt;</strong> element:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;sys:environment&gt; Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
         xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;

    &lt;sys:environment&gt;

        &lt;sys:moduleId&gt;
            &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
            &lt;sys:artifactId&gt;geronimo-web-7&lt;/sys:artifactId&gt;
            &lt;sys:version&gt;1.0&lt;/sys:version&gt;
            &lt;sys:type&gt;car&lt;/sys:type&gt;
        &lt;/sys:moduleId&gt;

        &lt;sys:dependencies&gt;
            &lt;sys:dependency&gt;
                &lt;sys:groupId&gt;org.apache.geronimo.configs&lt;/sys:groupId&gt;
                &lt;sys:artifactId&gt;tomcat7&lt;/sys:artifactId&gt;
                &lt;sys:version&gt;3.0&lt;/sys:version&gt;
                &lt;sys:type&gt;car&lt;/sys:type&gt;
            &lt;/sys:dependency&gt;

            &lt;sys:dependency&gt;
                &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
                &lt;sys:artifactId&gt;geronimo-web-6&lt;/sys:artifactId&gt;
                &lt;sys:version&gt;1.0&lt;/sys:version&gt;
                &lt;sys:type&gt;car&lt;/sys:type&gt;
            &lt;/sys:dependency&gt;

        &lt;/sys:dependencies&gt;

        &lt;sys:hidden-classes/&gt;
        &lt;sys:non-overridable-classes/&gt;
        &lt;sys:inverse-classloading/&gt;
        &lt;sys:suppress-default-environment/&gt;

    &lt;/sys:environment&gt;

&lt;/web-app&gt;
</plain-text-body>
<h3 id="geronimo-web.xml-&lt;context-root&gt;">&lt;context-root&gt;</h3>

<p>The <strong>&lt;context-root&gt;</strong> XML element uses the Geronimo default namespace for the geronimo-web.xml file, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li></ul>


<p>This element can be used to provide the web context path of the deployed web application, which appears in the URL used to address the application on a Geronimo server. As an example, if the context root is specified as <strong>&lt;context-root&gt;web-app-test&lt;/context-root&gt;</strong> then the URL to the application would look like <a shape="rect" class="external-link" href="http://host:8080/web-app-test/" rel="nofollow">http://host:8080/web-app-test/</a>. If the context root is specified as <strong>&lt;context-root&gt;/&lt;/context-root&gt;</strong> that would become the default web application for the server. The <strong>&lt;context-root&gt;</strong> element is optional, but if it is not specified the context root of the web application will default to the WAR name (without the extension). If the web application is packaged in an EAR, then the context root can be specified<br clear="none">
in the EAR's application.xml deployment descriptor.</p>

<h3 id="geronimo-web.xml-&lt;work-dir&gt;">&lt;work-dir&gt;</h3>

<p>The <strong>&lt;work-dir&gt;</strong> XML element uses the Geronimo default namespace for the geronimo-web.xml file, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li></ul>


<p>This element can be used to provide the work directory that will be used by this web application. For Jetty this will be relative to jetty home which is <strong>var/jetty</strong> by default, and for Tomcat this will be relative to <strong>catalina.home</strong>.</p>

<h3 id="geronimo-web.xml-&lt;naming:web-container&gt;">&lt;naming:web-container&gt;</h3>

<p>The <strong>&lt;naming:web-container&gt;</strong> XML element uses the Geronimo Naming namespace, which is used to identify the common elements for resolving EJB references, resource references, and Web services references, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html</a></li></ul>


<p>This element is used to specify a reference to a <strong>web-container</strong> specific GBean either via a pattern to the moduleId of the configuration, or via a link to a GBean. As an example, consider the case where it is required to run a web application in a Tomcat container using a dedicated port such that no other web application is allowed to use that port. To accomplish this a separate GBean would have to be defined for the "Container", "Engine", "Host", and "Connector", and a <strong>&lt;naming:web-container&gt;</strong> element would have to be used to reference this new Tomcat container. An example <strong>geronimo-web.xml</strong> file is shown below:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;naming:web-container&gt; Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
         xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.2"
         xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0"
         xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;

    &lt;sys:environment&gt;
        &lt;sys:moduleId&gt;
            &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
            &lt;sys:artifactId&gt;geronimo-web-7&lt;/sys:artifactId&gt;
            &lt;sys:version&gt;1.0&lt;/sys:version&gt;
            &lt;sys:type&gt;car&lt;/sys:type&gt;
        &lt;/sys:moduleId&gt;
        &lt;sys:dependencies/&gt;
        &lt;sys:hidden-classes/&gt;
        &lt;sys:non-overridable-classes/&gt;
        &lt;sys:inverse-classloading/&gt;
        &lt;sys:suppress-default-environment/&gt;
    &lt;/sys:environment&gt;

    &lt;context-root&gt;contextroot&lt;/web:context-root&gt;

    &lt;work-dir&gt;workdir&lt;/web:work-dir&gt;

    &lt;naming:web-container&gt;
        &lt;naming:gbean-link&gt;TomcatWebAppContainer&lt;/naming:gbean-link&gt;
    &lt;/naming:web-container&gt;

    &lt;host&gt;virtualhost2.com&lt;/host&gt;

    &lt;gbean name="TomcatWebAppContainer1" class="org.apache.geronimo.tomcat.TomcatContainer"&gt;
        &lt;attribute name="catalinaHome"&gt;var/catalina&lt;/attribute&gt;
        &lt;reference name="EngineGBean"&gt;
            &lt;name&gt;TomcatWebAppEngine1&lt;/name&gt;
        &lt;/reference&gt;
        &lt;reference name="ServerInfo"&gt;
            &lt;name&gt;ServerInfo&lt;/name&gt;
        &lt;/reference&gt;
        &lt;reference name="WebManager"&gt;
            &lt;name&gt;TomcatWebManager&lt;/name&gt;
        &lt;/reference&gt;
    &lt;/gbean&gt;

    &lt;gbean name="TomcatWebAppEngine1"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="className"&gt;org.apache.geronimo.tomcat.TomcatEngine&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="initParams"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; name=TomcatEngine4WebApp
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;reference name="DefaultHost"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;name&gt;TomcatWebAppHost1&lt;/name&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/reference&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;reference name="TomcatValveChain"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;name&gt;AccessLogValve&lt;/name&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/reference&gt;&#160;&#160;&#160;&#160;&#160;&#160; &#160;
&#160;&#160;&#160; &lt;/gbean&gt;

    &lt;gbean name="TomcatWebAppHost1"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="className"&gt;org.apache.catalina.core.StandardHost&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="initParams"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; name=virtualhost1.com
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; appBase=
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; workDir=work
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/attribute&gt;
&#160;&#160;&#160; &lt;/gbean&gt;
&#160;&#160; &#160;
&#160;&#160;&#160; &lt;gbean name="TomcatWebAppHost2"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="className"&gt;org.apache.catalina.core.StandardHost&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="initParams"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; name=virtualhost2.com
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; appBase=
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; workDir=work
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;reference name="Engine"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;name&gt;TomcatWebAppEngine1&lt;/name&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/reference&gt;
&#160;&#160;&#160; &lt;/gbean&gt;

    &lt;gbean name="AccessLogValve"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="className"&gt;org.apache.catalina.valves.AccessLogValve&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="initParams"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; prefix=virtualhost2_access_log.
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; suffix=.txt
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; pattern=common
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/attribute&gt;
&#160;&#160;&#160; &lt;/gbean&gt;

&#160;&#160;&#160; &lt;gbean name="TomcatWebAppConnector1"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="name"&gt;HTTP&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="host"&gt;0.0.0.0&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="port"&gt;8081&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="maxHttpHeaderSize"&gt;8192&lt;/attribute&gt;&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="maxThreads"&gt;150&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="minSpareThreads"&gt;25&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="maxSpareThreads"&gt;75&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="enableLookups"&gt;false&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="redirectPort"&gt;8453&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="acceptCount"&gt;100&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="connectionTimeout"&gt;20000&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;attribute name="disableUploadTimeout"&gt;true&lt;/attribute&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;reference name="TomcatContainer"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;name&gt;TomcatWebAppContainer1&lt;/name&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/reference&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;reference name="ServerInfo"&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;name&gt;ServerInfo&lt;/name&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/reference&gt;
&#160;&#160;&#160; &lt;/gbean&gt;

&lt;/web-app&gt;
</plain-text-body>
<h3 id="geronimo-web.xml-&lt;container-config&gt;">&lt;container-config&gt;</h3>

<p>As previously mentioned, there are actually three schemas that can be used for the <strong>geronimo-web.xml</strong> file. The first is container-independent and can be used to deploy a web application to either of the web containers supported by Geronimo. The second two are container-dependent that contain elements specific to either the Tomcat or Jetty web container:</p>

<ol><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html</a></li><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html</a></li></ol>


<p>Which to use is left to the discretion of the user. If a web application is meant to be deployed to both Tomcat and Jetty, then the generic schema is typically used, and if a web application is meant to be deployed to only Tomcat or Jetty, then one of the container-specific schemas is typically used. However, another option is available since the generic schema allows the inclusion of the container-specific elements found in the container-specific schemas by using the <strong>&lt;container-config&gt;</strong> element. This allows the user to use the generic schema even when the web application requires container-specific configuration for Tomcat or Jetty (or both). An example <strong>geronimo-web.xml</strong> file is shown below using the <strong>&lt;container-config&gt;</strong> element to configure the Tomcat web container. Note that the <strong>&lt;host&gt;</strong>, <strong>&lt;valve-chain&gt;</strong>, and <strong>&lt;tomcat-realm&gt;</strong> elements are understood only by the Tomcat container, not Jetty:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;container-config&gt; Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
         xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;

    &lt;sys:environment&gt;
        &lt;sys:moduleId&gt;
            &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
            &lt;sys:artifactId&gt;geronimo-web-6&lt;/sys:artifactId&gt;
            &lt;sys:version&gt;1.0&lt;/sys:version&gt;
            &lt;sys:type&gt;car&lt;/sys:type&gt;
        &lt;/sys:moduleId&gt;
    &lt;/sys:environment&gt;

    &lt;container-config&gt;

        &lt;tomcat xmlns="http://geronimo.apache.org/xml/ns/web/tomcat/config-1.0"&gt;
            &lt;host&gt;testhost.com&lt;/host&gt;
            &lt;valve-chain&gt;FirstValve&lt;/valve-chain&gt;
            &lt;tomcat-realm&gt;TomcatRealm&lt;/tomcat-realm&gt;
        &lt;/tomcat&gt;

    &lt;/container-config&gt;

&lt;/web-app&gt;
</plain-text-body>
<h3 id="geronimo-web.xml-&lt;sys:gbean&gt;">&lt;sys:gbean&gt;</h3>

<p>The <strong>&lt;sys:gbean&gt;</strong> XML element uses the Geronimo System namespace, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html</a></li></ul>


<p>The <strong>&lt;sys:gbean&gt;</strong> element is used to define GBean(s) that are configured and deployed with the web application module. These additional Geronimo services will be deployed when the application is deployed (and stopped when the application is stopped). Normally, the implementation classes for these services are included at the server level and referenced using a dependency element.</p>

<h3 id="geronimo-web.xml-&lt;ee:persistence&gt;">&lt;ee:persistence&gt;</h3>

<p>The <strong>&lt;ee:persistence&gt;</strong> XML element uses the Java EE Persistence namespace, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://java.sun.com/xml/ns/persistence/" rel="nofollow">http://java.sun.com/xml/ns/persistence/</a></li></ul>


<p>Apache Geronimo uses <a shape="rect" class="external-link" href="http://openjpa.apache.org/">OpenJPA</a> for providing Java Persistence API to Java EE applications deployed in the server. The persistence deployment descriptor information is typically provided using a <strong>persistence.xml</strong> file. The <strong>&lt;ee:persistence&gt;</strong> top-level element can be used include the persistence deployment descriptor in the <strong>geronimo-web.xml</strong> file. More information and details about the JPA deployment descriptor can be found here: <a shape="rect" href="creating-deployment-plans-for-java-persistence-api.html">Creating deployment plans for Java Persistence API</a>.</p>

<h3 id="geronimo-web.xml-Security">Security</h3>

<p>Additional information and details for configuring security for Geronimo can be found here:</p>

<ul><li><a shape="rect" href="administering-security.html">Administering Security</a></li></ul>


<h4 id="geronimo-web.xml-&lt;security-realm-name&gt;">&lt;security-realm-name&gt;</h4>

<p>The <strong>&lt;security-realm-name&gt;</strong> XML element uses the Geronimo default namespace for the geronimo-web.xml file, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a>.</li></ul>


<p>The <strong>&lt;security-realm-name&gt;</strong> element is used to specify the name of the security realm that will be used for user authentication for the web application. It is used in conjunction with the <strong>&lt;security-constraint&gt;</strong> element in the corresponding <strong>web.xml</strong> deployment plan for this web application. This element will not cause the creation of a new security realm in Geronimo, it references a security realm that has already been created and configured. See <a shape="rect" href="administering-security.html">Administering Security</a> for details on how this is typically accomplished from the Geronimo Admin Console.</p>

<h2 id="geronimo-web.xml-&lt;authenticaiton&gt;">&lt;authenticaiton&gt;</h2>

<p>The <strong>&lt;authenticaiton&gt;</strong> element is used to specify the configuration for a specific JASPI <strong>AuthConfProvider</strong>, <strong>ServerAuthConfig</strong>, <strong>ServerAuthContext</strong>, or <strong>ServerAuthModule</strong> to be used for authentication rather than a standard authentication method configured in <strong>web.xml</strong>.</p>

<p><strong>&lt;jaspi:AuthConfProvider&gt;</strong>, <strong>&lt;jaspi:ServerAuthConfig&gt;</strong>, <strong>&lt;jaspi&#65307;ServerAuthContext&#12299;</strong>, and <strong>&lt;jaspi:ServerAuthModule&gt;</strong> XML elements use the Geronimo JASPI namespace, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-jaspi.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-jaspi.html</a>.</li></ul>


<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;authentication&gt; Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
         xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;

    &lt;sys:environment&gt;
        &lt;sys:moduleId&gt;
            &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
            &lt;sys:artifactId&gt;geronimo-web-6&lt;/sys:artifactId&gt;
            &lt;sys:version&gt;1.0&lt;/sys:version&gt;
            &lt;sys:type&gt;car&lt;/sys:type&gt;
        &lt;/sys:moduleId&gt;
    &lt;/sys:environment&gt;

    &lt;authentication&gt;
      &lt;jaspi xmlns="http://geronimo.apache.org/xml/ns/geronimo-jaspi"&gt;
	&lt;configProvider&gt;
		&lt;messageLayer&gt;Http&lt;/messageLayer&gt;
		&lt;appContext&gt;test-app1&lt;/appContext&gt;
		&lt;description&gt;description&lt;/description&gt;
		&lt;clientAuthConfig&gt;
			&lt;authenticationContextID&gt;authenticationContextID1
			&lt;/authenticationContextID&gt;
			&lt;protected&gt;true&lt;/protected&gt;
			&lt;clientAuthContext&gt;
				&lt;clientAuthModule&gt;
					&lt;className&gt;org.apache.geronimo.components.jaspi.providers.DummyClientAuthModule&lt;/className&gt;
				&lt;/clientAuthModule&gt;
			&lt;/clientAuthContext&gt;
		&lt;/clientAuthConfig&gt;
		&lt;serverAuthConfig&gt;
			&lt;authenticationContextID&gt;authenticationContextID2
			&lt;/authenticationContextID&gt;
			&lt;protected&gt;true&lt;/protected&gt;
			&lt;serverAuthContext&gt;
				&lt;serverAuthModule&gt;
					&lt;className&gt;org.apache.geronimo.components.jaspi.providers.DummyServerAuthModule&lt;/className&gt;
				&lt;/serverAuthModule&gt;
			&lt;/serverAuthContext&gt;
		&lt;/serverAuthConfig&gt;
		&lt;persistent&gt;true&lt;/persistent&gt;
	&lt;/configProvider&gt;
       &lt;/jaspi&gt;
    &lt;/authentication&gt;

&lt;/web-app&gt;
</plain-text-body>
<h4 id="geronimo-web.xml-&lt;app:security&gt;">&lt;app:security&gt;</h4>

<p>The <strong>&lt;app:security&gt;</strong> XML element uses the Geronimo Security namespace, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-security-2.0.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-security-2.0.xsd.html</a>.</li></ul>


<p>The <strong>&lt;app:security&gt;</strong> element groups the security role mapping settings for the web application. This is an optional element, but if it is present all the web modules must make the appropriate access checks as outlined in the JACC specification. This element includes the <strong>&lt;role-mapping&gt;</strong> section that references the role(s) defined in the <strong>&lt;security-role&gt;</strong> element in the <strong>web.xml</strong> file. An example <strong>web.xml</strong> and corresponding <strong>geronimo-web.xml</strong> file is shown below with the <strong>"admin"</strong> role name defined in the <strong>web.xml</strong> is referenced in the <strong>geronimo-web.xml</strong>:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;security&gt; web.xml Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;

    &lt;display-name&gt;Geronimo Remote Deployer&lt;/display-name&gt;

    &lt;description&gt;
        Receives file upload requests from the deployer when running on a different machine
        than the Geronimo server.
    &lt;/description&gt;

    &lt;servlet&gt;
        &lt;display-name&gt;File Upload&lt;/display-name&gt;
        &lt;servlet-name&gt;file-upload&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.geronimo.deployment.remote.FileUploadServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;file-upload&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/upload&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;security-constraint&gt;
        &lt;web-resource-collection&gt;
            &lt;web-resource-name&gt;Upload Servlet&lt;/web-resource-name&gt;
            &lt;url-pattern&gt;/upload&lt;/url-pattern&gt;
            &lt;http-method&gt;POST&lt;/http-method&gt;
        &lt;/web-resource-collection&gt;
        &lt;auth-constraint&gt;
            &lt;role-name&gt;admin&lt;/role-name&gt;
        &lt;/auth-constraint&gt;
    &lt;/security-constraint&gt;

    &lt;login-config&gt;
        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
        &lt;realm-name&gt;Geronimo File Upload&lt;/realm-name&gt;
    &lt;/login-config&gt;

    &lt;security-role&gt;
        &lt;role-name&gt;admin&lt;/role-name&gt;
    &lt;/security-role&gt;
&lt;/web-app&gt;
</plain-text-body>
<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;security&gt; geronimo-web.xml Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0"
         xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0"
         xmlns:cfg="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;

    &lt;dep:environment&gt;
      &lt;dep:moduleId&gt;
        &lt;dep:groupId&gt;org.apache.geronimo.plugins&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;geronimo-remote-deploy&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;2.1.1&lt;/dep:version&gt;
      &lt;/dep:moduleId&gt;
      &lt;dep:dependencies/&gt;
      &lt;dep:hidden-classes/&gt;
      &lt;dep:non-overridable-classes/&gt;
    &lt;/dep:environment&gt;

    &lt;context-root&gt;/remote-deploy&lt;/context-root&gt;

    &lt;security-realm-name&gt;geronimo-admin&lt;/security-realm-name&gt;

    &lt;sec:security&gt;
        &lt;sec:role-mappings&gt;
            &lt;sec:role role-name="admin"&gt;
                &lt;sec:principal class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal"
                               name="admin" designated-run-as="true"/&gt;
            &lt;/sec:role&gt;
        &lt;/sec:role-mappings&gt;
    &lt;/sec:security&gt;

&lt;/web-app&gt;
</plain-text-body>
<h3 id="geronimo-web.xml-JNDIEnvironmentReferences">JNDI Environment References</h3>

<p>All the JNDI reference elements in this section use the Geronimo Naming namespace, which is used to identify the common elements for resolving EJB references, resource references, and Web services references, and is documented here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html</a></li></ul>


<p>Additionally, more information and details about JNDI references can be found here: <a shape="rect" href="global-jndi.html">Global JNDI</a>.</p>

<h4 id="geronimo-web.xml-&lt;naming:abstract-naming-entry&gt;">&lt;naming:abstract-naming-entry&gt;</h4>

<p>The <strong>&lt;abstract-naming-entry&gt;</strong> element is not technically a JNDI reference element. It is included in this section because it is an abstract element used for containing these JNDI reference types:</p>
<ul><li><strong>&lt;gbean-ref&gt;</strong>
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline">
The <strong>&lt;gbean-ref&gt;</strong> element is used to map GBean references to GBeans configured outside the current module
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;persistenceunit-ref&gt;</strong>
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline">
The <strong>&lt;persistenceunit-ref&gt;</strong> element is used to map persistence unit references to persistence units configured outside the current module
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;persistencecontext-ref&gt;</strong>
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline">
The <strong>&lt;persistencecontext-ref&gt;</strong> element is used to map persistence context references to persistence contexts configured outside the current module</li></ul>


<p>An example <strong>geronimo-web.xml</strong> file is shown below using the <strong>&lt;abstract-naming-entry&gt;</strong> element to reference a persistence unit:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;abstract-naming-entry&gt; Example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
         xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"
         xmlns:naming="http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2"&gt;

    &lt;sys:environment&gt;
        &lt;sys:moduleId&gt;
            &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
            &lt;sys:artifactId&gt;geronimo-web-6&lt;/sys:artifactId&gt;
            &lt;sys:version&gt;1.0&lt;/sys:version&gt;
            &lt;sys:type&gt;car&lt;/sys:type&gt;
        &lt;/sys:moduleId&gt;
    &lt;/sys:environment&gt;

    &lt;naming:abstract-naming-entry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="naming:persistence-unit-refType"&gt;

        &lt;naming:persistence-unit-ref-name&gt;messagedrivenbean-persistenceunitref-unitrefname&lt;/naming:persistence-unit-ref-name&gt;
        &lt;naming:persistence-unit-name&gt;messagedrivenbean-persistenceunitref-unitname&lt;/naming:persistence-unit-name&gt;
        &lt;naming:pattern&gt;
            &lt;naming:groupId&gt;messagedrivenbean-persistenceunitref-pattern-groupid&lt;/naming:groupId&gt;
            &lt;naming:artifactId&gt;messagedrivenbean-persistenceunitref-pattern-artifactid&lt;/naming:artifactId&gt;
            &lt;naming:version&gt;messagedrivenbean-persistenceunitref-pattern-version&lt;/naming:version&gt;
            &lt;naming:module&gt;messagedrivenbean-persistenceunitref-pattern-module&lt;/naming:module&gt;
            &lt;naming:name&gt;messagedrivenbean-persistenceunitref-pattern-name&lt;/naming:name&gt;
        &lt;/naming:pattern&gt;
    &lt;/naming:abstract-naming-entry&gt;

&lt;/web-app&gt;
</plain-text-body>
<h4 id="geronimo-web.xml-&lt;naming:ejb-ref&gt;">&lt;naming:ejb-ref&gt;</h4>

<p>The <strong>&lt;naming:ejb-ref&gt;</strong> element is used to map EJB references to EJB's in other applications using remote home and remote interface. The application which contains the EJB being referenced should either be in same EAR or should be included in dependency list of this application. Also note as the EJB's referenced are in a different JVM all the client interfaces should also be included in the current application.</p>

<h4 id="geronimo-web.xml-&lt;naming:ejb-local-ref&gt;">&lt;naming:ejb-local-ref&gt;</h4>

<p>The <strong>&lt;naming:ejb-local-ref&gt;</strong> element is used to map EJB references to EJB's in other applications using local home and local interface. The application which contains the EJB being referenced should either be in same EAR or should be included in dependency list of this application. Also note as the EJB's referenced are in a different JVM all the client interfaces should also be included in the current application.</p>

<h4 id="geronimo-web.xml-&lt;naming:service-ref&gt;">&lt;naming:service-ref&gt;</h4>

<p>The <strong>&lt;naming:service-ref&gt;</strong> is used to map service references to service's in other applications. The application which contains the EJB being referenced should either be in same EAR or should be included in dependency list of this application.</p>

<h4 id="geronimo-web.xml-&lt;naming:resource-ref&gt;">&lt;naming:resource-ref&gt;</h4>

<p>The <strong>&lt;naming:resource-ref&gt;</strong> element is used to map resource references to resources like JDBC resources, JMS resources, etc. configured outside the current application.</p>

<h4 id="geronimo-web.xml-&lt;naming:resource-env-ref&gt;">&lt;naming:resource-env-ref&gt;</h4>

<p>The <strong>&lt;naming:resource-env-ref&gt;</strong> element is used to map resource references to administrative objects deployed as a part of connectors.</p>

<h4 id="geronimo-web.xml-&lt;naming:message-destination&gt;">&lt;naming:message-destination&gt;</h4>

<p>The <strong>&lt;naming:message-destination&gt;</strong> element is used to map resource references to a message-destination which is used within the deployed web application. These are typically a JMS queue or topic which acts like a destination for the messages delivered. Like all the JNDI references in this section, this element will not cause the creation of a message-destination, references an existing message-destination used within the deployed web application. </p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : geronimo-web.xml';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
