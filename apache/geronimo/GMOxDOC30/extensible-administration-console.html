<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Extensible Administration Console" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Extensible Administration Console" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0 Documentation: Extensible Administration Console</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="configuring-and-administering.html">Configuring and administering</a>&nbsp;&gt;&nbsp;<a href="extensible-administration-console.html">Extensible Administration Console</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Extensible Administration Console</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645341">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645341">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645341">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645341">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645341">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645341">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>This document contains the following sections:</p>
<style type="text/css">/*<![CDATA[*/
div.rbtoc1515428667972 {padding: 0px;}
div.rbtoc1515428667972 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1515428667972 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1515428667972">
<ul class="toc-indentation"><li><a shape="rect" href="#ExtensibleAdministrationConsole-Introduction">Introduction</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-InstallationPlanning">Installation Planning</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-InstallingtheExtensibleAdministrationConsole">Installing the Extensible Administration Console</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-InstallinganAdministrationConsoleExtensionin.carformatfromarepository">Installing an Administration Console Extension in .car format from a repository</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Examples">Examples</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Customization">Customization</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Architecture">Architecture</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Class/DependencyStructure">Class/Dependency Structure</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-HowtoDevelopanAdministratorConsoleExtension(ACE)">How to Develop an Administrator Console Extension (ACE)</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-SampleExtension">Sample Extension</a></li></ul>
</div>

<h2 id="ExtensibleAdministrationConsole-Introduction">Introduction</h2>

<p>The Extensible Administration Console is a new Administration Console designed to mirror the flexibility of Geronimo's architecture. While the previous console was static, allowing configuration only for pre-defined components, the new Extensible Console changes dynamically with the components installed on your server.</p>

<p>This framework allows Geronimo plugin developers to package extensions to the Administration Console (called ACEs) with their components. On installation of a plugin, this new content will automatically be added to the Extensible Administration Console, so that the user can manage all of the configuration and tools from one place.</p>

<h3 id="ExtensibleAdministrationConsole-Objective">Objective</h3>

<p>After reading this document, a Geronimo user will be able to</p>
<ol><li>Install the Extensible Administration Console into a Geronimo Framework assembly (Tomcat or Jetty)</li><li>Download and install an Administrative Console Extension</li></ol>


<h3 id="ExtensibleAdministrationConsole-Scope">Scope</h3>

<p>This document covers installing Geronimo's Administration Console into a Geronimo minimal assembly and the process to install an ACE plugin. For more information about the underlying architecture and ACE development, see the Administration Console Extension Developer's Guide.</p>

<h3 id="ExtensibleAdministrationConsole-Whoshouldreadthisdocument">Who should read this document</h3>

<p>These instructions are geared towards a basic user of Geronimo who wants to install new components on the administration console. Knowledge of the internal workings of the server is not necessary.</p>

<h3 id="ExtensibleAdministrationConsole-Assumptions">Assumptions</h3>

<p>The reader should be familiar with the Geronimo application server and its applications. The reader should also be familiar with the basics of Geronimo's plugin framework. For more information about the architecture, this guide may also be a valuable resource: <a shape="rect" class="external-link" href="http://media.wiley.com/product_ancillary/31/04717854/DOWNLOAD/Pro_Apache_Geronimo_ch17.pdf" rel="nofollow">http://media.wiley.com/product_ancillary/31/04717854/DOWNLOAD/Pro_Apache_Geronimo_ch17.pdf</a>.<br clear="none">
The reader should have Apache Geronimo 3.0 Minimal+Web Container assembly installed and running, with either Tomcat7 or Jetty8 as the web container. The Java EE assemblies already have the Extensible Aministration Console installed.  For more information about getting started or getting updated to the right version, see this website: <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC30/installation.html">http://cwiki.apache.org/GMOxDOC30/installation.html</a>.</p>

<h2 id="ExtensibleAdministrationConsole-InstallationPlanning">Installation Planning</h2>

<p>This section will prepare the user to install an ACE by providing the necessary terminology and introducing the installation scenarios that will be discussed.</p>

<h3 id="ExtensibleAdministrationConsole-CommonTerminology">Common Terminology</h3>
<p>	<strong>Plugin</strong> - An archive file (.car or .war) that can be installed into Geronimo to install a specific new service, such as ActiveMQ. For more about plugins, or to look at available plugins, check out geronimoplugins.com or geronimoplugincentral.org.<br clear="none">
	<strong>.CAR file</strong> (Configuration ARchive) - An archive file that stores Geronimo-specific configurations, as well as the classes, libraries, web pages, and other information associated with an application.<br clear="none">
	<strong>.WAR file</strong> (Web ARchive)- An archive file that contains a web application, including all of its classes, libraries, HTML and JSP pages, and other information. It can be deployed on any Java Enterprise compatible servlet container.<br clear="none">
	<strong>ACE</strong> (Administration Console Extension) - An archive file (either a .car or a .war), that includes Administration Console portlets. These portlets will be added to the Extensible Administration Console when the ACE is activated.<br clear="none">
	<strong>Extensible Administration console</strong> - A flexible version of Geronimo's original administration console. Once installed it is available at <a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http://localhost:8080/console</a>, and includes some portlets that correspond to the currently activated services in Geronimo. <br clear="none">
	<strong>Service</strong> - a component or set of functionality for Geronimo - it may be pre-installed, such as the Tomcat or Jetty web container, or it may be installed as a plugin.<br clear="none">
	<strong>Minimal console</strong> - The administration console as it is first installed - with only the services necessary for basic functionality.<br clear="none">
	<strong>Portlet</strong> - A web user interface component that can be assembled together with other similar components to create a web (portal) page. See the Portlet Specification JSR 286.</p>

<h3 id="ExtensibleAdministrationConsole-InstallationScenarios">Installation Scenarios</h3>

<ol><li>Installing the extensible administration console into a Geronimo minimal assembly</li><li>Installing an ACE in the .war format from disk</li><li>Installing an ACE in the .car format from an online repository
<div class="confluence-information-macro confluence-information-macro-information"><p class="title">Which kind of file format do I want ?</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<ul><li><strong>Need console extensions for a component you already have?</strong> If you are planning to add Administration Console portlets for a component that is already installed on your server, a .war file is simplest. A .war-format ACE has only the needed portlets, and is dependent on the component already being installed.</li><li><strong>Need the component and its extensions?</strong> If you need to install both a new component and its associated Admin Console portlets, a .car file is the right choice. This will look up and download all the necessary components and dependencies, and will also install the new ACE file. A .car file can also be used if the component is already installed.</li><li><strong>Not sure?</strong> If you aren't sure that you have all the pre-requisites installed, a .car is the safest option. This will work regardless of whether the component is pre-installed or not.</li></ul>
</div></div>
<div class="confluence-information-macro confluence-information-macro-information"><p class="title">What about installing a .car file from disk?</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You can use the <strong>deploy install-plugin</strong> tool from the command line. For more information, see <a shape="rect" class="external-link" href="https://cwiki.apache.org/GMOxDOC30/deploy.html">https://cwiki.apache.org/GMOxDOC30/deploy.html</a></p></div></div></li></ol>


<h2 id="ExtensibleAdministrationConsole-InstallingtheExtensibleAdministrationConsole">Installing the Extensible Administration Console</h2>

<p>This section covers all the necessary steps to install the new Extensible Administration Console on your Geronimo 3.0 Minimal Server. The Geronimo 3.0 Java EE servers already have the console installed.</p>

<h3 id="ExtensibleAdministrationConsole-Prerequisites">Prerequisites</h3>

<ol><li>Geronimo 3.0 - Minimal is installed ("Little-G")</li><li>No other Geronimo administration console is currently installed</li></ol>


<h3 id="ExtensibleAdministrationConsole-Installasaplugin">Install as a plugin</h3>

<ol><li>Start Geronimo</li><li>Use the <strong>deploy list-plugins</strong> command to download and install the administration console from the online plugin repository. Depending on the web container support in your minimal server, choose:
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre> deploy list-plugins -r http://geronimo.apache.org/plugins/geronimo-3.0/ org.apache.geronimo.plugins/console-tomcat/3.0/car</pre>
</div></div>
or
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>deploy list-plugins -r http://geronimo.apache.org/plugins/geronimo-3.0/ org.apache.geronimo.plugins/console-jetty/3.0/car</pre>
</div></div></li></ol>



<p>Once updated, we need to verify this (and subsequent) steps.</p>


<p>Now you can point your web browser to <a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http://localhost:8080/console</a> and see the newly installed console.</p>


<h3 id="ExtensibleAdministrationConsole-InstallinganACEin.warformatfromanarchivefile">Installing an ACE in .war format from an archive file</h3>

<p>An ACE in .war format will install only the console extension. Its pre-requisite must already be installed on your system. For example, if you were installing a console extension to monitor a Derby database, Derby would need to be pre-installed on your server.<br clear="none">
Prerequisites</p>
<ol><li>You have a .war-format ACE to be installed.</li><li>The Extensible Administration Console is already deployed, as described <a shape="rect" href="extensible-administration-console.html">above</a>.</li><li>Any pre-requisites for the ACE are already installed.<br clear="none">
Instructions</li><li>Open the administrative console in an internet browser at address <a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http://localhost:8080/console</a>.</li><li>Select <strong>Deployer</strong> on the left navigation bar.</li><li>Click <strong>Browse</strong> and navigate to the ACE file.</li><li>Click <strong>Install</strong>.</li><li>Refresh your browser. Your new component will show up on the left side navigation menu.</li></ol>


<h2 id="ExtensibleAdministrationConsole-InstallinganAdministrationConsoleExtensionin.carformatfromarepository">Installing an Administration Console Extension in .car format from a repository</h2>

<p>An ACE in the .car format installs a component and adds its configuration portlets to the Extensible Administration Console.<br clear="none">
Prerequisites</p>
<ol><li>Your plugin provider already has specified a repository URL. For a larger selection of available plugins, checking <a shape="rect" class="external-link" href="http://geronimo.apache.org/plugins/geronimo-3.0/">http://geronimo.apache.org/plugins/geronimo-3.0/</a> is a good place to start.</li><li>The Extensible Administration Console already installed, as described in the previous section.</li></ol>


<h3 id="ExtensibleAdministrationConsole-Instructions">Instructions</h3>

<ol><li>Access the Extensible Administration Console by pointing a web browser to the following address <a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http://localhost:8080/console</a>.</li><li>Select <strong>Plugins</strong> on the left navigation bar.</li><li>Under Install Geronimo Plugins, click <strong>Update Repository List</strong> to add the default plugin repositories of Geronimo 3.0 into the repository list.
	<ul><li>If the correct address does not appear in the Repository list, select <strong>Add Repository</strong>.</li><li>Type the repository's address in the <strong>New Repository</strong> textbox. Make sure to include the forward-slash( / ) at the end of the address.  Select Add Repository.</li><li>Click <strong>Update Repository List</strong>. The new address will now appear in the Repository list.</li></ul>
	</li><li>With the correct repository displayed in the Repository box, select <strong>Show Plugins in selected repository</strong>.</li><li>Choose the plugin from the Available Plugins list by clicking directly on the plugin name.
	<ul><li>If the <strong>Installable</strong> field of the desired plugin is marked as a red-cross, the plugin may already be installed on your server. Check for its name on the System Modules tab to make sure it is running, and to start or uninstall it if necessary.</li><li>If the list of Available Plugins does not display, or the desired plugin is not listed, you may have entered the wrong repository address. Try entering it again. If problems continue, contact the plugin provider or email the user mailing list at user@geronimo.apache.org.<br clear="none">
6. Select the plugins to be added and then click *Install at the bottom of the page.<br clear="none">
7. When the plugin installation is complete, refresh your browser. A new menu item will appear on the left. You can now configure this plugin's settings from the newly installed portlets.</li></ul>
	</li></ol>


<h2 id="ExtensibleAdministrationConsole-Examples">Examples</h2>

<h3 id="ExtensibleAdministrationConsole-InstallingtheHelloWorldACE(.warfile)">Installing the HelloWorld ACE (.war file)</h3>

<p>This is an example of a simple ACE file. It is not attached to any components - it simply adds a new "Hello World" portlet to the Extensible Administration Console.</p>

<p>1. Download example-extension-new.war <a shape="rect" href="extensible-administration-console.data/example_extension_new.war?version=1&amp;modificationDate=1235001591000&amp;api=v2" data-linked-resource-id="20874237" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example_extension_new.war" data-nice-type="Java Archive" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645341" data-linked-resource-container-version="19">example_extension_new.war</a><br clear="none">
2. Access the Extensible Administration Console by pointing your web browser to <a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http://localhost:8080/console</a>.<br clear="none">
3. Select Deploy New on the left navigation bar.<br clear="none">
4. Click browse next to Archive and select the example-extension-new.war file. Leave the Plan box blank, Start app after install checked, and Redeploy application unchecked.<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/helloworld1.jpg"></span><br clear="none">
5. Click Install. Your new component will show up on the left side navigation menu.<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/helloworld2.jpg"></span></p>

<h2 id="ExtensibleAdministrationConsole-Customization">Customization</h2>

<p>Often times when a user installs Geronimo, the Administration Console will be the first place they go in order to configure their application server. For this reason, it is important that the administration console be a feature that provides users with the necessary functionality to easily manage plugins and components of the server.  The administration console allows  dynamic control over administration features. As such, it reflects the highly flexible and pluggable underlying architecture of Geronimo. What we have done here is to provide a framework for plugin developers to include administration console extensions for their plugins. The aim has been to provide an easy and flexible solution with a simple architecture such that users of Geronimo can intuitively configure components, and developers can easily expand upon the foundation laid out here.</p>

<p>The purpose of the remainder of this document is to provide developers with the necessary instructions to utilize the infrastructure provided by the administration console to add customized console extensions for their Apache Geronimo plugins. The first portion will describe the plumbing of the system and how it works, and the latter portions will provide a solid example of what to expect in order to actually create your own functioning console extension.</p>

<h2 id="ExtensibleAdministrationConsole-Architecture">Architecture</h2>
<p>Below we have a high level view of the interactions between a new plugin and Pluto. This is essentially the 'plumbing' beneath the administration console.</p>
    
<div class="cfm-align-center" style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/HighLevelPluto.jpg"></span><br clear="none">
Figure 1 - High level view of Pluto's interaction with a deployable WAR</div>


<p>We have a WAR file containing portlet information and the definition of an Administration Console Extension (ACE) GBean on the left. The ACE GBean is the way in which we can invoke operations on Pluto (this will be covered shortly).</p>

<p>The portlet container that we use is Apache Pluto 1.2. Pluto allows for dynamically adding and removing pages and portlets without restarting the portlet container. The approach is important from a user interface standpoint, because we are not forced into performance bottle necks by restarting server components unnecessarily.</p>

<p>The dashed box around Pluto and its Pluto's API is intended to describe the approach taken to decouple Pluto's implementation from our own. This is a design decision to allow Pluto to be replaced by a different portlet engine for possible future development. </p>

<h3 id="ExtensibleAdministrationConsole-UnderstandingThroughUsecases">Understanding Through Usecases</h3>
<p>Let's dig into the architecture a bit more now. It should be noted that the intended purpose of this architecture is to leverage Geronimo's flexible nature, as well as have the actual administration console be reflective of Geronimo's pluggability. The infrastructure should be simple to understand and easy to build on top of.</p>

<p>The first use case we will look at will also be used to describe the individual pieces that make administration console function.</p>
    
<div class="cfm-align-center" style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/startcase.jpg"></span><br clear="none">
Figure 2 - Use case for adding features to the console</div>


<p>On the left, we begin with a simple Geronimo deployment plan, for example, geronimo-web.xml. This deployment plan is the same deployment plan included in any archive that you may wish to deploy into Geronimo. In this case, the deployment plan includes the definition for a special <code>AdminConsoleExtensionGBean</code>. The specifics of what goes into an <code>AdminConsoleExtensionGBean</code> will be described in more detail later.</p>

<p>On the right, we have Pluto. When Pluto starts, a <code>PortalContainerServicesGBean</code> is started. This is how we access Pluto. When we deploy our archive, an <code>AdminConsoleExtensionGBean</code> containing portlet configuration information is started (based on the configuration specified in the deployment descriptor). The <code>AdminConsoleExtensionGBean</code> is where the developer specifies the information for the portlets and pages they are adding to the administration console.</p>

<p>The <code>AdminConsoleExtensionGBean</code> implements <code>GBeanLifecycle</code>. When the <code>AdminConsoleExtensionGBean</code> is started, it asks the kernel for the <code>PortalContainerServicesGBean</code> (1). The <code>AdminConsoleExtensionGBean</code> gets the service (2) - now the <code>AdminConsoleExtensionGBean</code> can access Pluto through its API. We want to add a portlet to our administration console, so we invoke Pluto's addPortlet method, which will update Pluto's internal model.</p>

<p>In the above image, each of the grayed out GBeans is an <code>AdminConsoleExtensionGBean</code> instantiated by a deployment descriptor. Each <code>AdminConsoleExtensionGBean</code> modifies or adds exactly one page in the administration console. This essentially means that portlets may be added to an existing page by specifying the name of an existing page, or a separate page can be created if one with the specified name does not exist.</p>

<p>A deployment plan may also include definitions for multiple <code>AdminConsoleExtensionGBeans</code>. This means that a deployment plan, if it chooses to do so, may add as many pages to the console as it wants to.</p>
    
<div class="cfm-align-center" style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/stopcase.jpg"></span><br clear="none">
Figure 3 - Use case for removing features from the console</div>


<p>Removing pages (Figure 3) from the console follows a similar process. Because the <code>AdminConsoleExtensionGBean</code> implements the <code>GBeanLifecycle</code>, when the installed component is stopped, its <code>AdminConsoleExtensionGBean</code> will also be stopped. When this happens, we once more ask the kernel for the <code>PortalContainerServiceGBean</code>, which is used to call <code>removePortlet</code> on Pluto through its API. From the view of the administration console, the user will see the page has disappeared from the navigation menu (Figure 4). If the user starts the component again, the <code>dostart()</code> method of <code>GBeanLifecycle</code> calls{{addPortlet()}} method on Pluto Container, and the administration console extension reappears on the navigation menu (Figure 5).</p>

    
<div class="cfm-align-center" style="text-align: center;">
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/noext.jpg"></span><br clear="none">
Figure 4 - We see no administration extensions to the left for the stopped component</p>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/withext.jpg"></span><br clear="none">
Figure 5 - We see the administration feature for the HelloWorldPortlet appear in the navigation</p></div>


<h2 id="ExtensibleAdministrationConsole-Class/DependencyStructure">Class/Dependency Structure</h2>
<div class="panel" style="border-width: 1px;"><div class="panelHeader" style="border-bottom-width: 1px;"><b>Dependency relationship of the pieces</b></div><div class="panelContent">
<div class="indent0 inline" style="margin-left: 0px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>PortalContainer </p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>|_PortalContainerServiceGBean </p></div>
<div class="indent40 inline" style="margin-left: 40px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>|_AdminConsoleExtensionGBean </p></div>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>|_Pluto Portal </p></div>
<div class="indent40 inline" style="margin-left: 40px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>|_Administration Console </p></div>
<div class="indent60 inline" style="margin-left: 60px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>|_New Portlet </p></div>
</div></div>

<p>The <code>PortalContainer</code> is the base requirement for the administration console. The Pluto Portal and the <code>PortalContainerServiceGBean</code> are the base requirements to install anything into the framework of the console. The administration console and the <code>AdminConsoleExtensionGBean</code> depends on the <code>PortalContainerServiceGBean</code> and the Pluto Portal. In order to add new console extensions, all of the described components must be in place.</p>

<p>The key here is that the requirements for adding a console extention is an <code>AdminConsoleExtensionGBean</code> and the New Portlet files. This means that the required dependencies that need to be specified in the deployment descriptor are the Administration Console and the <code>PortalContainerServicesGBean</code>. </p>


<h2 id="ExtensibleAdministrationConsole-HowtoDevelopanAdministratorConsoleExtension(ACE)">How to Develop an Administrator Console Extension (ACE)</h2>
<p>In order to develop your own console extension, you will need to perform the following steps:</p>
<ol><li>Create a portlet</li><li>Add an <code>AdminConsoleExtensionGBean</code> to the deployment plan</li><li>Build the WAR or CAR</li><li>Deploy the application</li><li>Verify the installation</li></ol>


<p>Each step is further detailed below.</p>

<h3 id="ExtensibleAdministrationConsole-Differentwaysofstructuring">Different ways of structuring</h3>
<p>The whole concept behind creating an ACE for Geronimo is that you are adding an extension in the form of portlets to the administrator console.  You can package this however you like.  Some options are as follows:</p>
<ol><li>Your portlets</li><li>Your portlets + your related component</li><li>Your portlets which declares a dependency on your related component</li></ol>


<h3 id="ExtensibleAdministrationConsole-Createaportlet">Create a portlet</h3>
<p>In their most fundamental state, an ACE defines where to place new/old portlets in your console.  Portlets are the fundamental building block of the administrator console.  We are using Pluto 2.x as our portal engine since it closely conforms to JSR 286 [<a shape="rect" class="unresolved" href="#">link to JSR 2868</a>].  We will not go into the details of how to develop portlets since you can find many tutorials and tools that are much better at this. You will need the appropriate <code>web.xml</code> and <code>portlet.xml</code> files defined. As a simple example, refer to the <code>HelloWorldPortlet</code> defined at the end of this section.</p>

<h3 id="ExtensibleAdministrationConsole-AddanAdminConsoleExtensionGBean">Add an <code>AdminConsoleExtensionGBean</code></h3>
<p>To add an <code>AdminConsoleExtensionGBean</code> to your deployable archive file, you need to include the following to your <code>geronimo-web.xml</code> deployment plan:  </p>
<ol><li>Declare a dependency on the <code>pluto-porta</code> plugin
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;dependencies&gt;
    ...
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.geronimo.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;pluto-support&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
</pre>
</div></div></li><li>Define an <code>AdminConsoleExtensionGBean</code>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;gbean name="example" class="org.apache.geronimo.pluto.AdminConsoleExtensionGBean"&gt;
    &lt;attribute name="pageTitle"&gt;Testing&lt;/attribute&gt;
    &lt;attribute name="portletContext"&gt;/HelloWorldPortlet&lt;/attribute&gt;
    &lt;attribute name="portletList"&gt;[HelloWorldPortlet]&lt;/attribute&gt;
&lt;/gbean&gt;
</pre>
</div></div>
where the attributes are defined as follows:</li></ol>
<ul><li><strong>pageTitle</strong> is the name of the page to add these portlets to (new or existing)</li><li><strong>portletContext</strong> is the context of where the portlets are installed.</li><li><strong>portletList</strong> is a comma-delimited list of the portlets to be added to this page.</li></ul>


<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>Sample geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.2"&gt;
    &lt;environment&gt;
        &lt;moduleId&gt;
            &lt;groupId&gt;org.apache.geronimo.portals&lt;/groupId&gt;
            &lt;artifactId&gt;pluto-example&lt;/artifactId&gt;
            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
            &lt;type&gt;war&lt;/type&gt;
        &lt;/moduleId&gt;
        
        &lt;dependencies&gt;
            &lt;dependency&gt; &lt;!-- Put a dependancy on the hosting portal (pluto) --&gt;
                &lt;groupId&gt;org.apache.geronimo.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;pluto-support&lt;/artifactId&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/environment&gt;
    
    &lt;!-- This is where the files are accessed from. (aka - portletContext) --&gt;
    &lt;context-root&gt;/HelloWorldPortlet&lt;/context-root&gt;
    
    &lt;!-- Start off a ACEGBean, this is the lifecycle for the portlet --&gt;
    &lt;gbean name="PlutoTest" class="org.apache.geronimo.pluto.AdminConsoleExtensionGBean"&gt;
        &lt;attribute name="pageTitle"&gt;Hello&lt;/attribute&gt;
        &lt;attribute name="portletContext"&gt;/HelloWorldPortlet&lt;/attribute&gt;
        &lt;attribute name="portletList"&gt;[HelloWorldPortlet]&lt;/attribute&gt;
        &lt;reference name="PortalContainerServices"&gt;
            &lt;name&gt;PlutoPortalServices&lt;/name&gt;
        &lt;/reference&gt;
    &lt;/gbean&gt;
&lt;/web-app&gt;
</pre>
</div></div>

<h3 id="ExtensibleAdministrationConsole-Puttingittogether">Putting it together</h3>
<p>Add your modified "geronimo-web.xml" deployment plan to your WAR or CAR in the WEB-INF folder.  Also, if you are including portlets, your archive file should contain the appropriate class files as well as the "web.xml" and "portlet.xml" files.</p>
<div class="panel" style="border-width: 1px;"><div class="panelHeader" style="border-bottom-width: 1px;"><b>sample structure for a simple war</b></div><div class="panelContent">
<p>HelloWorldPortlet.war</p>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p> |_WEB-INF/</p></div>
<div class="indent40 inline" style="margin-left: 40px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p> |_classes/</p></div>
<div class="indent60 inline" style="margin-left: 60px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p> |_(portlet class files)</p></div>
<div class="indent40 inline" style="margin-left: 40px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p> |_geronimo-web.xml</p></div>
<div class="indent40 inline" style="margin-left: 40px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p> |_portlet.xml</p></div>
<div class="indent40 inline" style="margin-left: 40px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p> |_web.xml</p></div>
</div></div>

<h3 id="ExtensibleAdministrationConsole-Deployingtheapplication">Deploying the application</h3>
<p>Deploy the archive as you normally would either using the <strong>deploy</strong> command or by using <strong>Deployer</strong> portlet from the Administration Console.</p>
<ol><li><em>Command Line</em>:<br clear="none">
Example:
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre> deploy deploy c:/HelloWorldPortlet.war</pre>
</div></div> </li><li><em>Using the Admin Console</em>:
    
<div class="cfm-align-center" style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/InstApp.jpg"></span></div>
</li></ol>



<h3 id="ExtensibleAdministrationConsole-Verifyinginstallation">Verifying installation</h3>
<p>Go to <a shape="rect" class="external-link" href="http://localhost:8080/console/" rel="nofollow">http://localhost:8080/console/</a> to verify that the portlets were added to the correct page.  (You may need to refresh the browser if you deployed the application from the command line.)</p>

<h2 id="ExtensibleAdministrationConsole-SampleExtension">Sample Extension</h2>
<p>This is a working simple example of an Administration Console Extension.<br clear="none">
<a shape="rect" href="extensible-administration-console.data/example_extension.war?version=1&amp;modificationDate=1212646675000&amp;api=v2" data-linked-resource-id="20874233" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example_extension.war" data-nice-type="Java Archive" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645341" data-linked-resource-container-version="19">Download the example WAR</a></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>HelloWorldPortlet.java</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
package org.apache.pluto.examples;

import java.io.IOException; 
import java.io.PrintWriter;

import javax.portlet.GenericPortlet;
import javax.portlet.PortletException;
import javax.portlet.RenderRequest;
import javax.portlet.RenderResponse;

/**
 * A very simple portlet example.
 * This portlet displays 'Hello World' to the end user
 */
public class HelloWorldPortlet extends GenericPortlet {

    // This function is called when a user requests to view this portlet (by
    // navigating to the webpage in Pluto)
    public void doView(RenderRequest request, RenderResponse response)
            throws PortletException, IOException {

        // Set the response to read HTML
        response.setContentType("text/html;charset=UTF-8");

        // Required call for use of getWriter() and getPortletOutputStream()
        PrintWriter out = response.getWriter();
        // Write content to the portlet
        out.println("&lt;h1&gt;Hello World&lt;/h1&gt;");
    }
}
</pre>
</div></div></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Extensible Administration Console';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
