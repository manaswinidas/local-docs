<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="daytrader - a more complex application" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi daytrader - a more complex application" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: daytrader - a more complex application</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="reference.html">Reference</a>&nbsp;&gt;&nbsp;<a href="samples.html">Samples</a>&nbsp;&gt;&nbsp;<a href="java-ee-sample-applications.html">Java EE sample applications</a>&nbsp;&gt;&nbsp;<a href="daytrader-a-more-complex-application.html">daytrader - a more complex application</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">daytrader - a more complex application</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645374">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645374">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645374">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645374">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645374">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645374">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<p>DayTrader is benchmark application built around the paradigm of an online stock trading system. Originally developed by IBM as the Trade Performance Benchmark Sample, DayTrader was donated to the Apache Geronimo community in 2005. This application allows users to login, view their portfolio, lookup stock quotes, and buy or sell stock shares. With the aid of a Web-based load driver such as Mercury LoadRunner, Rational Performance Tester, or Apache JMeter, the real-world workload provided by DayTrader can be used to measure and compare the performance of Java Platform, Enterprise Edition (Java EE) application servers offered by a variety of vendors. </p>

<p>In addition to the full workload, the application also contains a set of primitives used for functional and performance testing of various Java EE components and common design patterns.</p>

<p>This document is organized in the following sections:</p>

<parameter ac:name="maxLevel">3</parameter>

<h1 id="daytrader-amorecomplexapplication-ApplicationArchitecture">Application Architecture</h1>
<p>DayTrader is built on a core set of Java EE technologies that includes Java Servlets and JavaServer Pages (JSPs) for the presentation layer and Java database connectivity (JDBC), Java Message Service (JMS), Enterprise JavaBeans (EJBs) and Message-Driven Beans (MDBs) for the back-end business logic and persistence layer. The following diagram provides a high-level overview of the full workload application architecture.</p>

<p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="daytrader-a-more-complex-application.data/daytrader_simple_arch.gif"></span></p>

<h2 id="daytrader-amorecomplexapplication-PresentationLayer">Presentation Layer</h2>
<p>The presentation layer consists of several Java Servlets and JSPs that loosely adhere to a Model-View-Controller (MVC) design pattern. <em>TradeAppServlet</em> is the primary controller servlet responsible for recieving incoming client requests, triggering the desired business logic, and forwarding responses to the appropriate JSP page. Additional servlets and JSPs are used to configure the DayTrader runtime options and manage the supporting database. </p>

<h2 id="daytrader-amorecomplexapplication-BusinessLogicandPersistenceLayer">Business Logic and Persistence Layer</h2>
<p>The business logic and persistence layer form the bulk of the DayTrader application. The <em>TradeServices</em> interface defines the core set of business operations available in the application, such as register, login, getHoldings, buy, completeOrder, logout, etc. DayTrader provides three different implementations of these services, corresponding to three commonly used JavaEE application design patterns. These implementations are discussed below. Users can switch between these implementations on the configuration page by changed the Runtime Mode.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Implementation  </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Details </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>TradeDirect</strong> <br clear="none" class="atl-forced-newline"> (Default) </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>Pattern:</strong> Servlet-to-JDBC<br clear="none" class="atl-forced-newline"> <strong>Runtime Mode:</strong> Direct<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> The <em>TradeDirect</em> class performs CRUD (create, read, update, and delete) operations directly against the supporting database using custom JDBC code. Database connections, commits, and rollbacks are managed manually in the code. JTA user transactions are used to coordinate 2-phase commits. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>TradeJDBC</strong> </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>Pattern:</strong> Servlet-to-SessionBean-to-JDBC<br clear="none" class="atl-forced-newline"> <strong>Runtime Mode:</strong> Session Direct <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> The <em>TradeJDBC</em> stateless session bean serves as a wrapper for TradeDirect. The session bean assumes control of all transaction management while TradeDirect remains responsible for handling the JDBC operations and connections. This implementation reflects the most commonly used JavaEE application design pattern. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>TradeBean</strong> </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>Pattern:</strong> Servlet-to-SessionBean-to-EntityBean<br clear="none" class="atl-forced-newline"> <strong>Runtime Mode:</strong> EJB<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> The <em>TradeBean</em> stateless session bean uses Container Managed Persistence (CMP) entity beans to represent the business objects. The state of these objects is completely managed by the application servers EJB container. </p></td></tr></tbody></table></div>


<p>Another subtle component of this layer involves the Java Messaging Service (JMS). JMS is used within DayTrader for two specific purposes, asynchronously processing buy/sell orders, and publishing quote price updates. The following table discusses these operations in further detail.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Operation </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Details </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Asynchrounous Order Processing </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> When a buy or sell operation is performed, an order request is placed on the TradeBroker JMS queue using a client connection. The TradeBrokerMDB consumes messages on this queue and completes the buy or sell operation. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Quote Price Updates </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> As stocks are traded, the associated quote prices are updated in the database and published to a JMS topic. The TradeStreamerMDB subscribes to these updates consuming  the price updates messages, but does nothing more with them. The TradeStreamer JavaEE client that is bundled with DayTrader can be started to view the quote prices updates in real time. </p></td></tr></tbody></table></div>


<h2 id="daytrader-amorecomplexapplication-BusinessObjectsandRelationships">Business Objects and Relationships</h2>
<p>The following diagram represents the database schema and associated business objects. Container managed relationships (CMRs) are also depicted in the diagram.</p>

<p><strong>Create diagram and add here</strong></p>

<h2 id="daytrader-amorecomplexapplication-BusinessOperations(asdefinedinTradeServices)">Business Operations (as defined in TradeServices)</h2>
<p>As previously mentioned, all of the primary business operations provided by DayTrader are defined in the TradeServices interface. These operations are discussed further in the following table.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> TradeServices Operation </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Details </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> login </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> logout </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> buy </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> sell </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getMarketSummary </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> queueOrder </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> completeOrder </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> cancelOrder </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> orderCompleted </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getOrders </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getClosedOrders </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> createQuote </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getQuote </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getAllQuotes </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> updateQuotePriceVolume </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getHoldings </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getHolding </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getAccountData </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> getAccountProfileData </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> updateAccountProfile </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> register </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> resetTrade </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr></tbody></table></div>


<h2 id="daytrader-amorecomplexapplication-UserInerface(UI)Operations">User Inerface (UI) Operations</h2>
<p>The DayTrader JSP/Servlet-based web client provides a basic set of operations that one would expect to find in any stock trading and portfolio management application. These high level user operations trigger specific business operations (defined above) within the business logic and persistence layers to perform the desired task. The following table summarizes the business tasks performed by each user operation/action.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Client (UI) Operation </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Flow of Business Operations </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Register </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Login </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> View Account </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> View Account Profile </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Update Account Profile </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> View Portfolio </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Sell Holding </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> View Quotes </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Buy Stock </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Logout </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>&#160;</p></td></tr></tbody></table></div>


<h1 id="daytrader-amorecomplexapplication-Gettingthesource">Getting the source</h1>
<p>Daytrader is available in the Apache's subversion repository, run the following command to checkout the source files into the <strong>daytrader-2.0</strong> directory.</p>

<p><strong><code>svn co <a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/geronimo/daytrader/trunk/">http://svn.apache.org/repos/asf/geronimo/daytrader/trunk/</a> &lt;daytrader_home&gt;</code></strong></p>

<p><strong>&lt;daytrader_home&gt;</strong> could be any directory dedicated to hold daytrader-2.0.</p>

<p>This process may take several minutes depending on the machine and network connectivity speed.</p>

<h1 id="daytrader-amorecomplexapplication-BuildingDaytrader">Building Daytrader</h1>
<p>Once all the sources get checked out the next step is to build Daytrader. Daytrader requires Maven 2 for building the binaries.</p>

<p>From the <strong>&lt;daytrader_home&gt;</strong> directory run the following command.</p>

<p><strong><code>mvn install</code></strong></p>

<p>This process will take a couple of minutes. The binaries will be generated in the corresponding <strong>target</strong> directory for each of the modules in the <strong>modules</strong> directory.</p>

<h1 id="daytrader-amorecomplexapplication-ConfiguringDaytrader">Configuring Daytrader</h1>
<p>By default Daytrader requires a database to be created using the embedded Derby database that is shipped with Geronimo. Typically, the provided deployment plan files are configured to create such database (DaytraderDatabase) on Apache Derby during deployment. However, scripts are provided within the <strong>&lt;daytrader_home&gt;/bin/dbscripts/derby</strong> directory to create this database manually. Note that at this point this step <strong>optional</strong>, you can still create the required database after deploying Daytrader and using the <strong>(Re)-create  DayTrader Database Tables and Indexes</strong> link from the application's <strong>Configuration Utility</strong> page.</p>

<p>Independently on whether you use the command line scripts or the web based option, you will need the tables created before getting to the <a shape="rect" href="daytrader-a-more-complex-application.html">#Populating sample data</a> section.</p>

<p>The puspose of this section is to show you how to use the provided scripts to create the required <strong>DaytraderDatabase</strong> so, if needed, you can adapt them to your specific configuration environment. Additional scripts for different databases are also provided.</p>

<ul><li>Start Geronimo by running the following command:
<br clear="none" class="atl-forced-newline">
  <strong><code>&lt;geronimo_home&gt;/bin/geronimo start</code></strong>
<br clear="none" class="atl-forced-newline"></li><li>The provided database creation script requires setting the <strong>GERONIMO_HOME</strong> environment variable. On the same window you start Geronimo run the following command:
<br clear="none" class="atl-forced-newline">
<strong><code>set GERONIMO_HOME=&lt;geronimo_home&gt;</code></strong>
<br clear="none" class="atl-forced-newline"></li><li>Change directory to the directory containing the database creation scripts.
<br clear="none" class="atl-forced-newline">
<strong><code>cd &lt;daytrader_home&gt;/bin/dbscripts/derby</code></strong>
<br clear="none" class="atl-forced-newline"></li><li>Open <strong><code>createDerbyDB</code></strong> script and verify/modify the Derby version to match the one being used by Geronimo ( e.g. &lt;geronimo_home&gt;/repository/org/apache/derby/derby/10.2.2.0 ). Once you verified the versions match run the script.
<br clear="none" class="atl-forced-newline">
<strong><code>createDerbyDB</code></strong>
<br clear="none" class="atl-forced-newline">
You should see a scree similar to the one illustrated below.
<parameter ac:name="borderStyle">solid</parameter><plain-text-body>
D:\daytrader-2.0\bin\dbscripts\derby&gt;createDerbyDB.bat
"Invoking IJ command line tool to create the database and tables...please wait"
ij version 10.2.2.0
ij&gt; ij&gt; ERROR 42Y55: 'DROP TABLE' cannot be performed on 'HOLDINGEJB' because it does not exist.
ij&gt; ERROR 42Y55: 'DROP TABLE' cannot be performed on 'ACCOUNTPROFILEEJB' because it does not exist.
ij&gt; ERROR 42Y55: 'DROP TABLE' cannot be performed on 'QUOTEEJB' because it does not exist.
ij&gt; ERROR 42Y55: 'DROP TABLE' cannot be performed on 'KEYGENEJB' because it does not exist.
ij&gt; ERROR 42Y55: 'DROP TABLE' cannot be performed on 'ACCOUNTEJB' because it does not exist.
ij&gt; ERROR 42Y55: 'DROP TABLE' cannot be performed on 'ORDEREJB' because it does not exist.
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; 0 rows inserted/updated/deleted
ij&gt; ij&gt; Table creation complete
</plain-text-body></li><li>You can verify the database was created by pointing your browser to the Geronimo Administration Console and clicking on <strong>DB Manager</strong>.</li><li>The last step in this configuration is to update the deployment plan.  Edit the <strong><code>daytrader-g-2.0-SNAPSHOT-plan.xml</code></strong> deployment plan located in the <strong>&lt;daytrader_home&gt;\plans</strong> directory and replace <strong><code>ge-activemq-rar/1.2-beta/rar</code></strong> with <strong><code>ge-activemq-rar/1.2/rar</code></strong>.</li></ul>


<p>You are now ready to deploy the application.</p>

<h1 id="daytrader-amorecomplexapplication-DeployingDaytrader">Deploying Daytrader</h1>
<p>So far we have retrieved the source file, built, configured, created a database and updated the deployment plan. Now it is time to install the Daytrader application in Geronimo.</p>

<p>There are basically two ways to deploy an application in Geronimo, either using the Geronimo Administration Console or the command line based deployer tool. For this example we will be using the command line based option.</p>

<p>From the <strong>&lt;geronimo_home&gt;/bin</strong> directory run the following command:</p>

<p><strong><code>deploy --user system --password manager deploy &lt;daytrader_home&gt;\modules\ear\target\daytrader-ear-2.0-SNAPSHOT.ear &lt;daytrader_home&gt;\plans\daytrader-g-2.0-SNAPSHOT-plan.xml</code></strong></p>

<p>The first <strong><code>deploy</code></strong> is the script that calls the deployer tool, then we pass the user name and password. The second <strong><code>deploy</code></strong> is the actual command option for deploying the <strong><code>daytrader-ear-2.0-SNAPSHOT.ear</code></strong> EAR using the <strong><code>daytrader-g-2.0-SNAPSHOT-plan.xml</code></strong> deployment plan specifically. In your own application you could call this plan <code>geronimo-application.xml</code> and place it in the <code>META-INF</code> directory within you EAR file and you will not need to expressly specify the deployment plan from the command line.</p>

<p>You should see a deployment confirmation screen similar to the one shown below.</p>

<parameter ac:name="borderStyle">solid</parameter><plain-text-body>
D:\geronimo-tomcat6-javaee5-2.1\bin&gt;deploy --user system --password manager deploy \daytrader-2.0\modules\ear\target\daytrader-ear-2.0-SNAPSHOT.ear \daytrader-2.0\plans\daytrader-g-2.0-SNAPSHOT-plan.xml
Using GERONIMO_BASE:   D:\geronimo-tomcat6-javaee5-2.1
Using GERONIMO_HOME:   D:\geronimo-tomcat6-javaee5-2.1
Using GERONIMO_TMPDIR: D:\geronimo-tomcat6-javaee5-2.1\var\temp
Using JRE_HOME:        C:\Java\jdk1.5.0_06\jre
    Deployed geronimo/daytrader/2.0-SNAPSHOT/car
      `-&gt; web.war @ http://localhost:8080/daytrader
      `-&gt; dt-ejb.jar
      `-&gt; geronimo/daytrader-wsapp-client/2.0-SNAPSHOT/car
      `-&gt; geronimo/daytrader-streamer-client/2.0-SNAPSHOT/car
      `-&gt; TradeDataSource
      `-&gt; TradeJMS
</plain-text-body>

<p>Daytrader is now ready for testing.</p>

<h1 id="daytrader-amorecomplexapplication-Populatingsampledata">Populating sample data</h1>
<p>With the application deployed and started (starts by default when you deploy it) the next step before using Daytrader is to populate sample data to the database we created before. The following steps illustrate how.</p>

<ul><li>Access the application pointing your browser to <a shape="rect" class="external-link" href="http://localhost:8080/daytrader" rel="nofollow">http://localhost:8080/daytrader</a>
<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="daytrader-a-more-complex-application.data/daytrader.jpg"></span>
<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Click on the <strong>Configuration</strong> tab.</li><li>Click on <strong>(Re)-populate  DayTrader Database</strong> to generate the sample data, this will open a new window showing the progress.<br clear="none">
The initial population size consists of 200 accounts and 400 stock quotes. These values can be updated via the "Configure DayTrader run-time parameters" link on the "Configuration" tab.</li></ul>


<h1 id="daytrader-amorecomplexapplication-RunningDaytrader">Running Daytrader</h1>
<p>Daytrader can be run in number of configurations and also provides a suite of web primitives to ease testing. Each of these primitives singularly test key operations in the enterprise Java programming model. Some of these can be configured to run repeateadly based on the configuration settings that we will cover later on. The following sections describe more in detail these primitives test suite.</p>

<h2 id="daytrader-amorecomplexapplication-WebContainerpingsuite">Web Container ping suite</h2>
<p>The following table describe the Web container related set of primitives. Those primitives that can be set to run multiple times are <strong>highlighted</strong>.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Primitive		</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Description </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingHtml  		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingHtml is the most basic operation providing access to a simple "Hello World" page of static HTML. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Explicit GC 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Invoke Garbage Collection on AppServer. Reports heap statistics after the GC has completed. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingServlet 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet tests fundamental dynamic HTML creation through server side servlet processing. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingServletWriter 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServletWriter extends PingServlet by using a PrintWriter for formatted output vs. the output stream used by PingServlet. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2Include</strong> 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2Include tests response inclusion. Servlet 1 includes the response of Servlet 2. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingServlet2Servlet 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2Servlet tests request dispatching. Servlet 1, the controller, creates a new JavaBean object forwards the request with the JavaBean added to Servlet 2. Servlet 2 obtains access to the JavaBean through the Servlet request object and provides dynamic HTML output based on the JavaBean data. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingJSP 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingJSP tests a direct call to JavaServer Page providing server-side dynamic HTML through JSP scripting. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingJSPEL 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingJSPEL tests a direct call to JavaServer Page providing server-side dynamic HTML through JSP scripting and the usage of the new JSP 2.0 Expression Language. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingServlet2JSP 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2JSP tests a commonly used design pattern, where a request is issued to servlet providing server side control processing. The servlet creates a JavaBean object with dynamically set attributes and forwards the bean to the JSP through a RequestDispatcher The JSP obtains access to the JavaBean and provides formatted display with dynamic HTML output based on the JavaBean data. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingHTTPSession1 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingHTTPSession1 - <strong><code>SessionID</code></strong> tests fundamental HTTP session function by creating a unique session ID for each individual user. The ID is stored in the users session and is accessed and displayed on each user request. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingHTTPSession2 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingHTTPSession2 <strong><code>session create/destroy</code></strong> further extends the previous test by invalidating the HTTP Session on every 5th user access. This results in testing HTTPSession create and destroy. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingHTTPSession3 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingHTTPSession3 <strong><code>large session object</code></strong> tests the servers ability to manage and persist large HTTPSession data objects. The servlet creates a large custom java object. The class contains multiple data fields and results in 2048 bytes of data. This large session object is retrieved and stored to the session on each user request. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingJDBCRead</strong> 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingJDBCRead tests fundamental servlet to JDBC access to a database performing a single-row read using a prepared SQL statement. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingJDBCWrite</strong> 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingJDBCRead tests fundamental servlet to JDBC access to a database performing a single-row write using a prepared SQL statement. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2JNDI</strong> 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2JNDI tests the fundamental J2EE operation of a servlet allocating a JNDI context and performing a JNDI lookup of a JDBC DataSource. </p></td></tr></tbody></table></div>


<h2 id="daytrader-amorecomplexapplication-EJBContainerpingsuite">EJB Container ping suite</h2>
<p>The following table describe the EJB container related set of primitives. Those primitives that can be set to run multiple times are <strong>highlighted</strong>.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Primitive				</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Description </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2SessionEJB</strong>  		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2SessionEJB tests key function of a servlet call to a stateless SessionEJB. The SessionEJB performs a simple calculation and returns the result. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2EntityEJBLocal</strong>		<br clear="none" class="atl-forced-newline">	 
<strong>PingServlet2EntityEJBRemote</strong>		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2EntityEJB tests key function of a servlet call to an EJB 2.0 Container Managed Entity. In this test the EJB entity represents a single row in the database table. The <strong><code>Local version</code></strong> uses the EJB Local interface while the <strong><code>Remote version</code></strong> uses the Remote EJB interface. <br clear="none" class="atl-forced-newline"> (Note: PingServlet2EntityEJBLocal will fail in a multi-tier setup where the Trade Web and EJB apps are separated.) </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2Session2Entity</strong>		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This tests the full servlet to Session EJB to Entity EJB path to retrieve a single row from the database. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingServlet2Session2			<br clear="none" class="atl-forced-newline">
<strong>EntityCollection</strong> 			</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This test extends the previous EJB Entity test by calling a Session EJB which uses a finder method on the Entity that returns a collection of Entity objects. Each object is displayed by the servlet </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2Session2CMROne2One</strong> 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This test drives an Entity EJB to get another Entity EJB's data through an EJB 2.0 CMR One to One relationship </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2Session2CMROne2Many</strong> 	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This test drives an Entity EJB to get another Entity EJB's data through an EJB 2.0 CMR One to Many relationship </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2Session2JDBC</strong> 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This tests the full servlet to Session EJB to JDBC path to retrieve a single row from the database. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PingServlet2Session2			<br clear="none" class="atl-forced-newline">
<strong>JDBCCollection</strong> 			</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This test extends the previous JDBC test by calling a Session EJB to JDBC path which returns multiple rows from the database. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2MDBQueue</strong> 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2MDBQueue drives messages to a Queue based Message Driven EJB (MDB).Each request to the servlet posts a message to the Queue. The MDB receives the message asynchronously and prints message delivery statistics on each 100th message. <br clear="none" class="atl-forced-newline"> <strong><code>Note: Not intended for performance testing.</code></strong> </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2MDBTopic</strong> 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2MDBTopic drives messages to a Topic based Publish/Subscribe Message Driven EJB (MDB).Each request to the servlet posts a message to the Topic. The TradeStreamMDB receives the message asynchronously and prints message delivery statistics on each 100th message. Other subscribers to the Topic will also receive the messages.  <br clear="none" class="atl-forced-newline"> <strong><code>Note: Not intended for performance testing.</code></strong> </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>PingServlet2TwoPhase</strong> 		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> PingServlet2TwoPhase drives a Session EJB which invokes an Entity EJB with findByPrimaryKey (DB Access) followed by posting a message to an MDB through a JMS Queue (Message access). These operations are wrapped in a global 2-phase transaction and commit. </p></td></tr></tbody></table></div>


<h2 id="daytrader-amorecomplexapplication-ConfigureDayTraderrun-time">Configure DayTrader run-time</h2>
<p>So now you know what set of primitives are available and which of those can be set to run multiple times. The following table describes what parameters are available from the Daytrader <strong>Configuration Utilities</strong> to set the runtime parameters.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Parameter		</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Option	</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Description	</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Run-Time Mode		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> EJB		<br clear="none" class="atl-forced-newline">
			  Direct	<br clear="none" class="atl-forced-newline">
			  SessionDirect	<br clear="none" class="atl-forced-newline">
			  JPA		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Run Time Mode determines server implementation of the TradeServices to use in the DayTrader application Enterprise Java Beans including Session, Entity and Message beans or Direct mode which uses direct database and JMS access. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Order-Processing Mode	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Synchronous	<br clear="none" class="atl-forced-newline">
			  Asynchronous_2-Phase </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Order Processing Mode determines the mode for completing stock purchase and sell operations. Synchronous mode completes the order immediately. Asychronous_2-Phase performs a 2-phase commit over the EJB Entity/DB and MDB/JMS transactions. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Access Mode		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Standard	<br clear="none" class="atl-forced-newline">
			  WebServices	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Access Mode determines the protocol used by the DayTrader Web application to access server side services. The Standard mode uses the default Java RMI protocol. The Web Services mode uses the Axis implementation of Web Services including SOAP, WSDL and UDDI. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Scenario Workload Mix	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Standard	<br clear="none" class="atl-forced-newline">
			  High-Volume	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This setting determines the runtime workload mix of DayTrader operations when driving the benchmark through TradeScenarioServlet. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> WebInterface		</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> JSP		<br clear="none" class="atl-forced-newline">
			  JSP-Images	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> This setting determines the Web interface technology used, JSPs or JSPs with static images and GIFs. </p></td></tr></tbody></table></div>


<h3 id="daytrader-amorecomplexapplication-MiscellaneousSettings">Miscellaneous Settings</h3>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> DayTrader Max Users	<br clear="none" class="atl-forced-newline">
Trade Max Quotes	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> By default the DayTrader database is populated with 50 users (uid:0 - uid:49) and 100 quotes (s:0 - s:99). </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Primitive Iteration	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> By default the DayTrader primitives are execute one operation per web request. Change this value to repeat operations multiple times per web request. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Publish Quote Updates	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Publish quote price changes to a JMS topic. Needed for running the <a shape="rect" href="daytrader-a-more-complex-application.html">#Streamer application client</a>. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Enable long run support</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Enable long run support by disabling the show all orders query performed on the Account page. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Enable operation trace <br clear="none" class="atl-forced-newline">
Enable full trace	</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Enable DayTrader processing trace messages. </p></td></tr></tbody></table></div>


<h2 id="daytrader-amorecomplexapplication-RunningPrimitives">Running Primitives</h2>
<p>So far we saw what primitives are available, which of those can be set to run multiple iterations and how to configure the application runtime parameters.</p>

<ul><li>Point your browser to <a shape="rect" class="external-link" href="http://localhost:8080/daytrader" rel="nofollow">http://localhost:8080/daytrader</a></li><li>Click on <strong>Configuration</strong>.</li><li>Click on <strong>Configure DayTrader run-time parameters</strong>.</li><li>Select <strong>EJB</strong> from <strong>Run-Time Mode</strong>.</li><li>Seclect <strong>JSP-Images</strong> from <strong>WebInterface</strong>.</li><li>Set <strong>Primitive Iteration</strong> to <strong><code>100</code></strong>.</li><li>Click on <strong>Update Config</strong>.</li><li>Click on <strong>Primitives</strong>.</li><li>Click on <strong>PingServlet2EntityEJBLocal</strong>.</li></ul>


<p>With these settings, every time you hit <strong>PingServlet2EntityEJBLocal</strong> or refresh the page that primitive will get executed <strong><code>100</code></strong> times. When doing performance analysis, being able to "play" with these parameters is very valuable. This helps you track down execution times of these very specific functions. When used combined with a load simulation tool, the different configurations will assist you with the fine tuning of the server based on the specific needs of your environment.</p>

<h2 id="daytrader-amorecomplexapplication-Gonetrading!!!">Gone trading !!!</h2>
<p>We just saw how to run singular functions/operations tests via the available primitives. The very same settings you configured for running those primitives also affect the GUI for trading simulation.</p>

<ul><li>Point your browser to <a shape="rect" class="external-link" href="http://localhost:8080/daytrader" rel="nofollow">http://localhost:8080/daytrader</a></li><li>Click on <strong>Trading &amp; Portfolios</strong>.</li><li>Accept the default user and password and click on <strong>Login</strong>.</li><li>You should now be able to begin trading!</li></ul>


<p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="daytrader-a-more-complex-application.data/daytrader_2a.jpg"></span></p>

<p>Additional details for configuring and running Daytrader can be found in the application <strong>FAQ</strong> available by pointing your web browser to <a shape="rect" class="external-link" href="http://localhost:8080/daytrader" rel="nofollow">http://localhost:8080/daytrader</a></p>

<h2 id="daytrader-amorecomplexapplication-Backtosquareone">Back to square one</h2>
<p>After you performed some tests and want to run a new set from scratch you will need to reset the runtime configuration and transaction data from the database.</p>

<ul><li>Point your browser to <a shape="rect" class="external-link" href="http://localhost:8080/daytrader" rel="nofollow">http://localhost:8080/daytrader</a></li><li>Click on <strong>Configuration</strong>.</li><li>Click on <strong>Reset DayTrader (to be done before each run)</strong>.</li><li>Click on <strong>(Re)-populate  DayTrader Database</strong>.</li></ul>


<p>These simple steps are all you need to start a new set of tests on Daytrader however, you may still want to restart the server depending on the type of tests you are running.</p>

<h1 id="daytrader-amorecomplexapplication-Launchingtheapplicationclients">Launching the application clients</h1>
<p>DayTrader provides two J2EE application clients, the DayTrader Streamer and a web services application. The Streamer application client uses a JMS topic to subscribe to quote price updates as stocks are bought and sold. These updates are tracked and used to determine if database collisions occur while updating the quote prices in the database. The web services application client simply provides a thick client for accessing DayTrader services using a web services interface.</p>

<h2 id="daytrader-amorecomplexapplication-Streamerapplicationclient">Streamer application client</h2>
<p>In order for the quote price updates to get published to the JMS topic, the "Publish Quote Updates" flag on the configuration page must be enabled.</p>

<ul><li>Point your browser to <a shape="rect" class="external-link" href="http://localhost:8080/daytrader" rel="nofollow">http://localhost:8080/daytrader</a></li><li>Click on <strong>Configuration</strong>.</li><li>Click on <strong>Configure DayTrader run-time parameters</strong>.</li><li>Make sure you select the <strong>Publish Quote Updates</strong> checkbox.</li></ul>


<p>To start the Streamer application client run the following command.</p>

<p><strong><code>&lt;geronimo_home&gt;/bin/java -jar client.jar geronimo/daytrader-streamer-client/2.0-SNAPSHOT/car</code></strong></p>

<p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="daytrader-a-more-complex-application.data/daytrader_3.jpg"></span></p>

<h2 id="daytrader-amorecomplexapplication-WebServicesapplicationclient">Web Services application client</h2>
<p><strong><code>&lt;geronimo_home&gt;/bin/java -jar client.jar geronimo/daytrader-wsapp-client/2.0-SNAPSHOT/car</code></strong></p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : daytrader - a more complex application';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
