<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="JBoss to Geronimo - EJB-Session Beans Migration (Unverified on 2.2)" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi JBoss to Geronimo - EJB-Session Beans Migration (Unverified on 2.2)" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: JBoss to Geronimo - EJB-Session Beans Migration (Unverified on 2.2)</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="migrating-to-apache-geronimo.html">Migrating to Apache Geronimo</a>&nbsp;&gt;&nbsp;<a href="migrating-from-jboss-to-geronimo.html">Migrating from JBoss to Geronimo</a>&nbsp;&gt;&nbsp;<a href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">JBoss to Geronimo - EJB-Session Beans Migration (Unverified on 2.2)</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">JBoss to Geronimo - EJB-Session Beans Migration (Unverified on 2.2)</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645283">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645283">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645283">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645283">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645283">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645283">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p><parameter ac:name="">top</parameter><br clear="none">
A typical J2EE application may contain Enterprise JavaBeans or EJBs. These beans contain the application's business logic and live business data. Although it is possible to use standard Java objects to contain your business logic and business data, using EJBs addresses many of the issues of using simple Java objects, such as scalability, lifecycle management and state management.</p>

<p>This document discusses one type of EJBs, the Session EJB. This type of EJBs are useful for mapping business process flow (or equivalent application concepts). There are two types of Session EJBs, stateless and stateful. This article addresses both these Session Bean types and shows how to use them in a practical scenario.</p>

<p>EJBs hold conversations with clients. A conversation is basically an interaction between the EJB and the client and these interactions are composed of method calls by the clients to the EJBs. Stateful session beans retain state on behalf of a client. This means that if the state of the bean changes during a client's method call, this state is retained for subsequent calls by the same client. A stateless session bean on the other hand retains no conversational state from method to method. In other words, it is expected to hold its conversational state for only a single method call.</p>

<p>This article is organized in the following sections:</p>
<ul><li><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">EJB implementation analysis</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Sample application</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">The JBoss environment</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">The Geronimo environment</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Step-by-step migration</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Summary</a></li></ul>


<h1 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-EJBimplementationanalysis#analysis">EJB implementation analysis <parameter ac:name="">#analysis</parameter></h1>

<p>EJB implementation may vary from one vendor to another. The purpose of this section is to provide a session bean specific feature-to-feature comparison between JBoss and Apache Geronimo so you can clearly identify the differences and plan accordingly before migration.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Feature</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss v4.0.5</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Apache Geronimo (OpenEJB)</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Stateful and stateless Session Beans</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>BMP (Bean Managed Persistence) Entity Beans</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>CMP (Container Managed Persistence) Entity Beans</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Message driven beans (MDBs)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Interoperability using RMI-IIOP or JAXRPC</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Ability to expose stateless session beans and MDBs as Web Services</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Support for sending and receiving messages via Web Services</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Easy provisioning and hot deployment of EJB and JMX-based Web Services</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Access to EJBs from external CORBA objects</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>supported</p></td></tr></tbody></table></div>


<p><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Sampleapplication#sample">Sample application <parameter ac:name="">#sample</parameter></h1>

<p>This is a simple eCommerce web site which sells computer related items in both retail and wholesale markets. To get the whole sale prices of items, customer has to buy at least given number of items. Otherwise he/she will get only retail prices of the item. End user of the application can add those items to their shopping cart. A stateless session bean has been used to manage the discount calculation business workflow activities while shopping cart of the application has been implemented with the help of a stateful session bean. </p>

<p>The following figure illustrates the application flow:<br clear="none">
<span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.data/computer_overview.gif"></span></p>

<p>A customer of this application directly login to the item list page. It will give all the details of the items they have currently on their stock. To buy one of these items in the stock, use the Buy link which comes with each item. It will forward customer in to the Add Item to Cart web page. To proceed buying, customer has to enter the quantity of items he/she needs. If this quantity exceeds the minimum discount quantity, discounts will be granted and added items in to the customer's shopping cart. Shopping cart web page displays the list of items already added to the cart and it enables removing of items from the cart. This application will be not allow to add the same item shopping cart twise. </p>

<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-ApplicationclassesandJSPpages">Application classes and JSP pages</h2>

<ul><li>org.apache.geronimo.samples.computer.dto
	<ul><li>ItemDTO - Data transfer object for item related information between web and ejb tiers.</li><li>TransactionDTO - Data transfer object for shopping cart transaction related information between web and ejb tiers.</li></ul>
	</li><li>org.apache.geronimo.samples.computer.ejb
	<ul><li>ItemServiceBean - Stateless session bean to handle item realated workflow activities.</li><li>ShoppingCartBean - Stateful session bean to handle shopping cart related activities fro shopping cart activities.</li></ul>
	</li><li>org.apache.geronimo.samples.computer.web
	<ul><li>ItemServiceDispatchServlet - A servlet to dispatch item service related activities from front end to web tier.</li><li>ShoppingCartDispatchServlet - A servlet to dispatch shopping cart related activities from fron end to web tier.</li></ul>
	</li></ul>


<p>This eCommerce sample application also includes the following JSP pages:</p>
<ul><li>buy_item.jsp -  Accepts quantity of items customer buys.</li><li>error.jsp - Display error conditions of the application.</li><li>index.jsp - Forward in to the item list of the application.</li><li>list_items.jsp - Display list of items in the stock.</li><li>shopping_cart.jsp - List of transactions added to the shopping cart will be displayed.</li></ul>


<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Toolsused">Tools used</h2>
<p>The tools used for developing and building the Computer acessories seller application are:</p>

<h3 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Eclipse">Eclipse</h3>
<p>The Eclipse IDE was used for development of the sample application. This is a very powerful and popular open source development tool. Integration plug-ins are available for both JBoss and Geronimo. Eclipse can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://www.eclipse.org" rel="nofollow">http://www.eclipse.org</a></p>

<h3 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-ApacheAnt">Apache Ant</h3>
<p>Ant is a pure Java build tool. It is used for building the war files and populating the database for the Online Brokerage application. Ant can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>


<p><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Back to Top</a></p>
<h1 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-TheJBossenviroment#jboss">The JBoss enviroment <parameter ac:name="">#jboss</parameter></h1>

<p>This section shows you how and where the sample JBoss reference environment was installed so you can map this scenario to your own implementation. Note that for this migration example JBoss v4.0.5 was used.</p>

<p>Detailed instructions for installing, configuring, and managing JBoss are provided in the product documentation. Check the product Web site for the most updated documents.</p>

<p>The following list highlights the general tasks you will need to complete to install and configure the initial environment as the starting point for deploying the sample application.</p>

<ol><li>Download and install JBoss v4.0.5 as explained in the product documentation guides. From now on the installation directory will be referred as <strong>&lt;jboss_home&gt;</strong></li><li>Create a copy of the default JBoss v4.0.5 application server. Copy recursively <strong>&lt;jboss_home&gt;\server\default</strong> to <strong>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;</strong></li><li>Start the new server by running the <strong>run.sh -c &lt;your_server_name&gt;</strong> command from the <strong>&lt;jboss_home&gt;\bin</strong> directory.</li><li>Once the server is started, you can verify that it is running by opening a Web browser and pointing it to this URL: <a shape="rect" class="external-link" href="http://localhost:8080" rel="nofollow">http://localhost:8080</a>. You should see the JBoss Welcome window and be able to access the JBoss console.</li><li>Once the application server is up and running, the next step is to install and configure all the remaining prerequisite software required by the sample application. This step is described in the following section.</li></ol>


<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Installandconfigureprerequisitesoftware">Install and configure prerequisite software</h2>
<p>In order to build and run this sample application included in this article, you need to install and configure the Ant build tool.</p>

<h3 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-ConfigureAnt">Configure Ant</h3>

<p>As mentioned before, Apache Ant is used to build the binaries for the Online Brokerage application. If you do not have Ant installed this is a good time for doing it and make sure that <strong>&lt;ant_home&gt;/bin</strong> directory is added to the system's path variable.</p>

<p>Apache Ant can be downloaded from the following URL:</p>

<p><a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<h3 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-ConfigureXDoclet">Configure XDoclet</h3>

<p>XDoclet is going to be used as build tool for the configuration file generation. It  is an open source code generation engine. It enables Attribute-Oriented Programming for java. In short, this means that you can add more significance to your code by adding meta data (attributes) to your java sources. This is done in special JavaDoc tags.<br clear="none">
Although XDoclet originated as a tool for creating EJBs, it has evolved into a general-purpose code generation engine. XDoclet consists of a core and a constantly growing number of modules. It is fairly straight forward to write new modules if there is a need for a new kind of component.<br clear="none">
<a shape="rect" class="external-link" href="http://xdoclet.sourceforge.net/xdoclet/index.html" rel="nofollow">http://xdoclet.sourceforge.net/xdoclet/index.html</a></p>

<p>Just extract the latest version of the XDoclet and set the <strong>xdoclet.home</strong> parameter in to the <strong>build.properties</strong> file.</p>

<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Buildthesampleapplication">Build the sample application</h2>

<p>The computer acessories selling application included with this article provides an Ant script that you will use in order to build the application. Download the computer acessories selling application from the following link:</p>

<p><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.data/computer.zip?version=1&amp;modificationDate=1204180462000&amp;api=v2" data-linked-resource-id="20874017" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="computer.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645283" data-linked-resource-container-version="20">Computer</a></p>

<p>After extracting the zip file, a <strong>computer</strong> directory is created. In that directory open the build.properties file and edit the properties to match your environment as shown in the following example:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">build.properties</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
## Set the Geronimo 1.1 home here
geronimo.home=&lt;geronimo_home&gt;

## Set XDoclet 1.2.3 Home 
xdoclet.home=&lt;xdoclet_home&gt;
</plain-text-body>

<p>Before starting the build process just set the correct paths for the <strong>geronimo.home</strong> and <strong>xdoclet.home</strong> entries in the <strong>build.properties</strong> file in the <strong>config</strong> directory.</p>

<p>From a command prompt or shell go to the <strong>computer</strong> directory and run <strong>ant jboss</strong>. This will build the ear file and place it directly in the <strong>releases/jboss</strong> directory.</p>


<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Deploythesampleapplication">Deploy the sample application</h2>

<p>To deploy the sample application just copy the <strong>computer.ear</strong> will be created under the <strong>computer/releases/jboss</strong> folder to the <strong>&lt;jboss_home&gt;/server/&lt;your_server_name&gt;/deploy</strong> folder. </p>

<p>If JBoss is already started, it will automatically deploy and start the application; otherwise, the application will be deployed and started at the next startup.</p>

<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Testthesampleapplication">Test the sample application</h2>

<p>To test the application, open a Web browser and access the following URL:</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/computer" rel="nofollow">http://localhost:8080/computer</a></p>

<p>This brings up the item list page of the computer acessories selling application. You can buy computer acessories using this application. The application is now configured and running.</p>

<p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.data/computer_screen.gif"></span></p>

<p>Following is the demonstration of a shopping cart of the sample application.</p>

<p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.data/shopping_cart.gif"></span></p>

<p><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Back to Top</a></p>
<h1 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-TheGeronimoenviroment#geronimo">The Geronimo enviroment <parameter ac:name="">#geronimo</parameter></h1>

<p>Download and install Geronimo from the following URL:</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a></p>

<p>The release notes available there provide clear instructions on system requirements and how to install and start Geronimo. Throughout the rest of this article we will refer to the Geronimo installation directory as <strong>&lt;geronimo_home&gt;</strong>.</p>

<parameter ac:name="title">TCP/IP ports conflict</parameter><rich-text-body>
<p>If you are planning to run JBoss and Geronimo on the same machine consider to change the default service ports on, at least, one of these servers.</p></rich-text-body>


<p><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Back to Top</a></p>
<h1 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Step-by-stepmigration#migration">Step-by-step migration <parameter ac:name="">#migration</parameter></h1>

<p>When you built the computer acessories selling sample application, Ant packaged the deployment descriptors for both JBoss <strong>jboss.xml</strong> and Geronimo <strong>openejb-jar.xml</strong> as they were already provided by the sample application. These files are located in the <strong>computer/config</strong> directory.</p>

<p>The following example shows the JBoss deployment descriptor.</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">jboss.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;jboss&gt;

   &lt;enterprise-beans&gt;

      &lt;session&gt;
         &lt;ejb-name&gt;ShoppingCart&lt;/ejb-name&gt;
         &lt;local-jndi-name&gt;ShoppingCart&lt;/local-jndi-name&gt;

        &lt;method-attributes&gt;
        &lt;/method-attributes&gt;
      &lt;/session&gt;
      &lt;session&gt;
         &lt;ejb-name&gt;ItemService&lt;/ejb-name&gt;
         &lt;local-jndi-name&gt;ItemService&lt;/local-jndi-name&gt;

        &lt;method-attributes&gt;
        &lt;/method-attributes&gt;
      &lt;/session&gt;

   &lt;/enterprise-beans&gt;

   &lt;resource-managers&gt;
   &lt;/resource-managers&gt;

&lt;/jboss&gt;
</plain-text-body>

<p>Compare it with the contents of the Geronimo deployment plan shown in the following example.</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">openejb-jar.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar-2.1"&gt;
	&lt;dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;
		&lt;dep:moduleId&gt;
			&lt;dep:groupId&gt;org.apache.geronimo.samples&lt;/dep:groupId&gt;
			&lt;dep:artifactId&gt;ComputerEJB&lt;/dep:artifactId&gt;
			&lt;dep:version&gt;1.0&lt;/dep:version&gt;
			&lt;dep:type&gt;car&lt;/dep:type&gt;
		&lt;/dep:moduleId&gt;
		&lt;dep:dependencies/&gt;
		&lt;dep:hidden-classes/&gt;
		&lt;dep:non-overridable-classes/&gt;
	&lt;/dep:environment&gt;
	&lt;enterprise-beans&gt;
		&lt;session&gt;
			&lt;ejb-name&gt;ShoppingCart&lt;/ejb-name&gt;
			&lt;ejb-ref&gt;
				&lt;ref-name&gt;ejb/ItemServiceLocal&lt;/ref-name&gt;
				&lt;ejb-link&gt;ItemService&lt;/ejb-link&gt;
			&lt;/ejb-ref&gt;
		&lt;/session&gt;
		&lt;session&gt;
			&lt;ejb-name&gt;ItemService&lt;/ejb-name&gt;
		&lt;/session&gt;
	&lt;/enterprise-beans&gt;
&lt;/openejb-jar&gt;
</plain-text-body>

<p>First difference can be clearly noted is Geronimo specific configuration has more additional information than JBoss specific one. That part of the Geronimo configuration file is quite similar to a Maven 2 build script. Both of these given configuration files has EJB information. JBoss uses local JNDI names to link their EJBs while Geronimo directly use EJB's name. In addition to above differences also <strong>openejb-jar.xml</strong> file clearly gives the ejb reference information than <strong>jboss.xml</strong> file. </p>

<p>Looking at the web archive related configuration files give you few more differnces.</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">jboss-web.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jboss-web&gt;

  &lt;!-- EJB Local References --&gt;
  &lt;ejb-local-ref&gt;
  	&lt;ejb-ref-name&gt;ejb/ItemServiceLocal&lt;/ejb-ref-name&gt;
  	&lt;local-jndi-name&gt;ItemService&lt;/local-jndi-name&gt;
  &lt;/ejb-local-ref&gt;  
  &lt;ejb-local-ref&gt;
  	&lt;ejb-ref-name&gt;ejb/ShoppingCartLocal&lt;/ejb-ref-name&gt;
  	&lt;local-jndi-name&gt;ShoppingCart&lt;/local-jndi-name&gt;
  &lt;/ejb-local-ref&gt;	
&lt;/jboss-web&gt;
</plain-text-body>

<parameter ac:name="">xml</parameter><parameter ac:name="title">geronimo-web.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.1" xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.1"&gt;
  &lt;dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.1"&gt;
    &lt;dep:moduleId&gt;
      &lt;dep:groupId&gt;org.apache.geronimo.samples&lt;/dep:groupId&gt;
      &lt;dep:artifactId&gt;ComputerWeb&lt;/dep:artifactId&gt;
      &lt;dep:version&gt;1.0&lt;/dep:version&gt;
      &lt;dep:type&gt;car&lt;/dep:type&gt;
    &lt;/dep:moduleId&gt;
    &lt;dep:dependencies/&gt;	
    &lt;dep:hidden-classes/&gt;
    &lt;dep:non-overridable-classes/&gt;
  &lt;/dep:environment&gt;
 
  &lt;naming:ejb-local-ref&gt;
	  &lt;naming:ref-name&gt;ejb/ItemServiceLocal&lt;/naming:ref-name&gt;
	  &lt;naming:ejb-link&gt;ItemService&lt;/naming:ejb-link&gt;
  &lt;/naming:ejb-local-ref&gt;

  &lt;naming:ejb-local-ref&gt;
	  &lt;naming:ref-name&gt;ejb/ShoppingCartLocal&lt;/naming:ref-name&gt;
	  &lt;naming:ejb-link&gt;ShoppingCart&lt;/naming:ejb-link&gt;
  &lt;/naming:ejb-local-ref&gt;
&lt;/web-app&gt;
</plain-text-body>

<p><strong>jboss-web.xml</strong> map the EJBs from their JNDI names as given the above while <strong>geronimo-web.xml</strong> uses directly EJB's name. The reference names given in each mapping will be used refer EJBs from the Servlets. <strong>web.xml</strong> file of the WAR file contains more information about each EJB reference name, which will be common to the both Geronimo and JBoss flavours of this application.</p>

<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Buildthesampleapplication.1">Build the sample application</h2>

<p>Build the migrated Geronimo version of the sample application by running following command from the <strong>computer</strong> directory.<br clear="none">
<strong>ant geronimo</strong><br clear="none">
It will create <strong>computer.ear</strong> file in the <strong>computer/releases/geronimo</strong> folder.</p>

<h2 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Deploythemigratedapplication">Deploy the migrated application</h2>

<p>To deploy the migrated Computer acessories selling application, make sure the Geronimo server is up and running.</p>

<p>Open Geronimo console in your browser and follow the given steps:</p>
<ol><li>Travel <strong>Deploy New</strong> from the <strong>Console Navigation</strong>.</li><li>Load <strong>computer.ear</strong> from <strong>computer/releases/geronimo</strong> folder in to the <strong>Archive</strong> input box.</li><li>Press <strong>Install</strong> button to deploy application in the server.</li></ol>


<p>Once the application is deployed, open a Web browser and access the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://localhost:8080/computer" rel="nofollow">http://localhost:8080/computer</a></p>

<p><a shape="rect" href="jboss-to-geronimo-ejb-session-beans-migration-unverified-on-22.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-EJB-SessionBeansMigration(Unverifiedon2.2)-Summary#summary">Summary <parameter ac:name="">#summary</parameter></h1>
<p>This article has shown how to migrate a sample application that uses Session Beans, from JBoss v4.0.5 to Apache Geronimo. This article provided step-by-step instructions to build the application, deploy and run it, and then migrate it to the Geronimo environment.</p>

<p>The following list summarizes the major differences found during this sample application migration.</p>

<ul><li>In order to deploy an EJB jar file in JBoss you need to just copy the configuration file to the deploy directory but in Geronimo you can use either deployer tool, console or hot deployment directory.</li><li>The contents of the deployment plans for EJB jar files in JBoss and in Geronimo are almost similar except for the starting part of the Geronimo which is more similar to a Maven 2 build file.</li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : JBoss to Geronimo - EJB-Session Beans Migration (Unverified on 2.2)';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
