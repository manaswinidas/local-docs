<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="JBoss to Geronimo - JDBC Migration" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi JBoss to Geronimo - JDBC Migration" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: JBoss to Geronimo - JDBC Migration</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="migrating-to-apache-geronimo.html">Migrating to Apache Geronimo</a>&nbsp;&gt;&nbsp;<a href="migrating-from-jboss-to-geronimo.html">Migrating from JBoss to Geronimo</a>&nbsp;&gt;&nbsp;<a href="jboss-to-geronimo-jdbc-migration.html">JBoss to Geronimo - JDBC Migration</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">JBoss to Geronimo - JDBC Migration</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645281">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645281">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645281">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645281">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645281">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645281">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p><parameter ac:name="">top</parameter><br clear="none">
This article will help you migrate JDBC applications developed for JBoss v4 to Apache Geronimo. This article is part of a series of migration articles covering different types of applications migration.</p>

<p>This article provides details on the JDBC implementation differences between these two application servers as well as a detailed step-by-step migration procedure for porting JDBC applications from JBoss v4 to Apache Geronimo.  To define a common starting point (the source environment), this article provides steps of deploying the <a shape="rect" href="jboss-to-geronimo-jdbc-migration.data/brokerage.zip?version=1&amp;modificationDate=1204181195000&amp;api=v2" data-linked-resource-id="20874013" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="brokerage.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645281" data-linked-resource-container-version="20">Online Brokerage</a> sample application into the JBoss source environment. Then you will be guided through the application migration and deployment process in Apache Geronimo.</p>

<p>This article is organized in the following sections:</p>
<ul><li><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">JDBC implementation analysis</a></li><li><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Sample application</a></li><li><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">The JBoss environment</a></li><li><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">The Geronimo environment</a></li><li><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Step-by-step migration</a></li><li><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Summary</a></li></ul>


<h1 id="JBosstoGeronimo-JDBCMigration-JDBCimplementationanalysisimplementation">JDBC implementation analysis <parameter ac:name="">implementation</parameter></h1>

<p>JDBC implementation might vary from one vendor to another. The purpose of this section is to provide a JDBC specific feature-to-feature comparison between JBoss and Apache Geronimo so you can clearly identify the differences and plan accordingly before migration.</p>

<p>Given that JBoss and Geronimo both use J2CA connectors for accessing JDBC resources, there will be an overlap of some J2CA features when comparing the platform specific JDBC features.</p>

<p><strong>Note:</strong> Since Geronimo is still in its infancy, some of the features provided by JBoss might not yet be implemented in Geronimo.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Feature </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Apache Geronimo </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> JBoss v4 </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> JDBC access </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Geronimo does not have any direct integration with JDBC but supports access through the generic J2CA framework. The TranQL project has J2CA adapters for various databases. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> JDBC access in JBoss is through JDBC connectors based on the JCA specification. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> JCA implementation </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Geronimo supports the JCA 1.5 specification and is backward compatible to the JCA 1.0 specification. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> JBoss AS 4.0 implements the JCA (Java Connector Architecture) 1.5 specification instead of the JCA 1.0 in JBoss AS 3.2. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Data sources supported </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> TranQL has generic wrappers for data source, ConnectionPoolDatasource, and XADataSource. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Supports 5 types of data sources:</p>
<ul class="alternate"><li>no-tx-datasource</li><li>local-tx-datasource</li><li>xa-datasource</li><li>ha-local-tx-datasource</li><li>ha-xa-datasource</li></ul>
</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Data source failover </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> TranQL has specialized drivers for certain databases (including Apache Derby, Oracle, MySQL, DB2 and SQL Server) that provide a tighter integration with the advanced features of the driver. <br clear="none" class="atl-forced-newline">
 It is at this level that features such as load-balancing and failover would be provided. You can also use a C-JDBC wrapper for providing database clustering and failover. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> JBoss has data source failover capabilities implemented through two data sources. <br clear="none" class="atl-forced-newline">
 1)	ha-local-tx-datasource - for local transactions. <br clear="none" class="atl-forced-newline">
 2)	ha-xa-datasource - for distributed transactions </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> XA support </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Supports XA transactions, Local Transactions, and No transaction. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Supports XA transactions, Local Transactions, and No transaction. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Connection Manager Configurability </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> The J2CA framework is interceptor based which allows different parts of the connection framework to be plugged in. <br clear="none" class="atl-forced-newline">
 Although you cannot plug in a custom connection manager now, this capability can be added fairly easily. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> You can plug in your own custom connection manager if required. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> JTA implementation </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Transaction support is provided through JOTM and HOWL. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Full support for JTA through JBossJTA. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Connection pooling and management </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Custom Geronimo Code and TranQL used for connection pooling and management. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> JBossCX framework used for connection pooling and management. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Legacy driver support </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Geronimo also provides this through the TranQL- connector JDBC to JCA wrapper in Geronimo. Supports JDBC 3.0 and 2.1. </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> JBoss provides connection to RDBMS that have not yet implemented JCA- JDBC drivers through JCA wrappers for JDBC drivers. </p></td></tr></tbody></table></div>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-JDBCMigration-SampleapplicationsampleApp">Sample application <parameter ac:name="">sampleApp</parameter></h1>

<p>This article contains a sample application to demonstrate migrating an application from JBoss to Geronimo, called <a shape="rect" href="jboss-to-geronimo-jdbc-migration.data/brokerage.zip?version=1&amp;modificationDate=1204181195000&amp;api=v2" data-linked-resource-id="20874013" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="brokerage.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645281" data-linked-resource-container-version="20">Online Brokerage</a>. It represents an online trading scenario in which users can buy and sell stocks. The application has the following five pages:</p>
<ul><li>Login Page</li><li>Registration Page</li><li>User Information Page</li><li>Available Stocks Page</li><li>User Portfolio Page</li></ul>


<p>The following figure illustrates the application flow:<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="jboss-to-geronimo-jdbc-migration.data/JSP_flow.jpg"></span></p>

<p>First, you accesses the Login page. From the Login page you enter the user name and password. If the user name or password is not valid the application throws an error message and rejects your login attempt. If the user name and password are correct, you are taken to the <strong>Available Stocks</strong> page where you can view all the stocks that are present for sale at that time.</p>

<p>You can choose to buy as many stocks as wanted, depending on the available money in the account, by clicking the <strong>Buy</strong> button.</p>

<p>After the transaction completes successfully you are brought back to the <strong>Available Stocks</strong> page where you can buy more stocks if required.</p>

<p>If you have insufficient funds to buy stocks the application will throw an error and will not process the transaction. The error message is shown at the top of the <strong>Available Stocks</strong> page.  There is a User Info button on this page. On clicking this button you are taken to the User Info page and shown the user details.</p>

<p>From the <strong>Available Stocks</strong> page there is a <strong>View your Portfolio</strong> link that shows all the stocks that you own. In that page, you can select the stocks and quantity to sell.  This page also shows your available cash in the <strong>User Cash</strong> field. If you try to sell more stocks than you have, the application will throw an error. The error message will be shown on the same page. For each successful sale the sale amount is added to the user's cash balance.</p>

<p>The quantity text box shows the quantity of stocks of a particular company that you have. The Quantity to <strong>Sell</strong> field allows you to enter the quantity of stocks to sell for a specific company. For selling and buying the radio button should be checked. This be done after entering the values. If either the quantity to sell textbox is not filled or the selection box is not checked and you press on sell a JavaScript alert will be triggered saying that the required field is empty. On entering non-numeric characters for quantity another alert will be triggered. This behavior is similar for the Available Stocks page as well.</p>

<p>If you are a new user, you can register by clicking the <strong>Register</strong> button in the login page. In the Registration page you will enter a user id, user name, password, address and available cash.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-ApplicationclassesandJSPpages">Application classes and JSP pages</h2>

<p>The Online Brokerage sample application consists of the following packages:</p>
<ul><li>com.dev.trade.bo
	<ul><li>Stock- Represents the stock of a company.</li><li>User- Represents the user.</li></ul>
	</li></ul>


<ul><li>com.dev.trade.dao
	<ul><li>TradeDAO - Contains all the database access methods.</li></ul>
	</li></ul>


<ul><li>com.dev.trade.exception
	<ul><li>DBException - Custom exception class that is thrown for all database exceptions.</li></ul>
	</li></ul>


<ul><li>com.dev.trade.servlet
	<ul><li>TradeDispatcherServlet - Dispatches all the requests to the JSPs after performing required database functions.</li></ul>
	</li></ul>


<p>The Online Brokerage also includes the following JSP pages:</p>
<ul><li>login.jsp - The login page of the application.</li><li>error.jsp - The default error page of the application.</li><li>register.jsp - The user registration page.</li><li>stocks.jsp - The Available Stocks page from where the user can buy stocks.</li><li>userstocks.jsp - The user portfolio page which shows the user's stocks. The user can sell stocks from this page.</li></ul>


<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Toolsused">Tools used</h2>

<p>The tools used for developing and building the Online Brokerage application are:</p>

<h3 id="JBosstoGeronimo-JDBCMigration-Eclipse">Eclipse</h3>

<p>The Eclipse IDE was used for development of the sample application. This is a very powerful and popular open source development tool. Integration plug-ins are available for both JBoss and Geronimo. Eclipse can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://www.eclipse.org" rel="nofollow">http://www.eclipse.org</a></p>

<h3 id="JBosstoGeronimo-JDBCMigration-ApacheAnt">Apache Ant</h3>

<p>Ant is a pure Java build tool. It is used for building the war files and populating the database for the Online Brokerage application. Ant can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Sampledatabase">Sample database</h2>

<p>The database used for demostrating this application is MySQL.  The name of the sample database is <strong>tradedb</strong> and it consists of the following three tables, STOCKS, USERS and TRADINGACCOUNT.  The fields for each of these tables are described below.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Table Name </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Fields </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> STOCKS </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> ID (PRIMARY KEY) <br clear="none" class="atl-forced-newline">
 NAME <br clear="none" class="atl-forced-newline">
 PRICE </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> USERS </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> USERID (PRIMARY KEY) <br clear="none" class="atl-forced-newline">
 NAME <br clear="none" class="atl-forced-newline">
 PASSWORD <br clear="none" class="atl-forced-newline">
 ADDRESS <br clear="none" class="atl-forced-newline">
 CASH </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> TRADINGACCOUNT </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> USERID <br clear="none" class="atl-forced-newline">
 STOCKID <br clear="none" class="atl-forced-newline">
 QUANTITY </p></td></tr></tbody></table></div>

<p>The <strong>TRADINGACCOUNT</strong> table is used to store the stocks that are owned by each user. The <strong>USERS</strong> and <strong>STOCKS</strong> tables are used to store the user and stock details. Because this is just a sample application the amount of money that a user has is entered during user registration by the user itself.</p>

<p>The DDL file used for populating this database is db.sql and it is located in the brokerage/sql directory.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-JDBCMigration-TheJBossenvironmentJBoss">The JBoss environment <parameter ac:name="">JBoss</parameter></h1>

<p>This section shows you how and where the sample JBoss reference environment was installed so you can map this scenario to your own implementation.</p>

<p>Detailed instructions for installing, configuring, and managing JBoss are provided in the product documentation. Check the product Web site for the most updated documents.</p>

<p>The following list highlights the general tasks you will require to complete to install and configure the initial environment as the starting point for deploying the sample application.</p>
<ol><li>Download and install JBoss v4 as explained in the product documentation guides. From now on the installation directory will be referred as <code>&lt;jboss_home&gt;</code></li><li>Create a copy of the default JBoss v4 application server. Copy recursively <code>&lt;jboss_home&gt;\server\default</code> to <code>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;</code></li><li>Start the new server by running the <code>run.sh -c &lt;your_server_name&gt;</code> command from the <code>&lt;jboss_home&gt;\bin</code> directory.</li><li>Once the server is started, you can verify that it is running by opening a Web browser and pointing it to this URL: <a shape="rect" class="external-link" href="http://localhost:8080" rel="nofollow">http://localhost:8080</a>. You will see the JBoss Welcome window and be able to access the JBoss console.</li><li>Once the application server is up and running, the next step is to install and configure all the remaining prerequisite software required by the sample application. This step is described in the following section.</li></ol>


<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Installandconfigureprerequisitesoftware">Install and configure prerequisite software</h2>

<p>In order to build and run the Online Brokerage application included in this article, you must install and configure the build tool and the database that is used by the application.</p>

<h3 id="JBosstoGeronimo-JDBCMigration-Installthedatabase">Install the database</h3>

<p>As mentioned earlier in the article, this application is using the MySQL database that can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://www.mysql.com" rel="nofollow">http://www.mysql.com</a><br clear="none">
The Installation and configuration of MySQL is fairly intuitive and it is well documented in the MySQL Reference Manual available at the following URL:</p>

<p><a shape="rect" class="external-link" href="http://dev.mysql.com/doc/mysql/en" rel="nofollow">http://dev.mysql.com/doc/mysql/en</a></p>

<p><strong>Note:</strong> During the instance configuration modified the security settings and specified <strong>password</strong> as the password for the root user. This user ID and password will later be used for accessing the database from the sample application.</p>

<h3 id="JBosstoGeronimo-JDBCMigration-Createsampledatabase">Create sample database</h3>

<p>Once the MySQL instance is configured you need to create the sample database that will be used by the Online Brokerage application. From a command line, type the following command to start the MySQL monitor:</p>

<p><code><strong>mysql -u root -ppassword</strong></code></p>

<p>Note that there is no blank between the flag <strong>-p</strong> and the password.</p>

<p>This will bring up the MySQL command interface as shown in the following example:</p>
<parameter ac:name="title">MySQL monitor interface</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
Welcome to the MySQL monitor.  Commands end with *;* or *\g*.
Your MySQL connection id is 7 to server version: 4.1.14-nt

Type *help;* or *\h* for help. Type *\c* to clear the buffer.

mysql&gt;
</plain-text-body>
<p>From the MySQL command interface create the tradedb sample database by typing the following command:</p>

<p><code><strong>mysql&gt; create database tradedb;</strong></code></p>

<h3 id="JBosstoGeronimo-JDBCMigration-ConfigureAnt">Configure Ant</h3>

<p>As mentioned before, Apache Ant is used to build the binaries for the Online Brokerage application. If you do not have Ant installed this is a good time for doing it and make sure that <strong>&lt;ant_home&gt;\bin</strong> directory is added to the system's path variable.</p>

<p>Apache Ant can be downloaded from the following URL:</p>

<p><a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Configureresources">Configure resources</h2>

<p>In order to successfully build and deploy the Online Brokerage application and database, you will first configure some resources. This section describes how to configure a MySQL data source in JBoss.</p>

<h3 id="JBosstoGeronimo-JDBCMigration-Datasource">Data source</h3>

<p>The Online Brokerage application is a Web application that uses a data source to connect to the MySQL database. To use JBoss with MySQL, you must copy the MySQL driver into the JBoss server classpath. The driver, which is provided by the database vendor, is called Connector/J 3.0 and can be downloaded from the following URL:<br clear="none">
<a shape="rect" class="external-link" href="http://dev.mysql.com/downloads/connector/j/3.1.html" rel="nofollow">http://dev.mysql.com/downloads/connector/j/3.1.html</a></p>

<p>After downloading and extracting the driver, copy the <code>mysql-connector-java-3.1.14.jar</code> file to the <code>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;\lib</code> directory.</p>

<p>The data source configuration in JBoss is done through an XML configuration file. The JBoss installation contains sample configuration files for many popular databases including MySQL.</p>

<p>The sample data source configuration file for MySQL is <code>mysql-ds.xml</code> and it is located in the <code>&lt;jboss_home&gt;\docs\examples\jca</code> directory:</p>

<p>Copy the mysql-ds.xml file to the deploy directory of your JBoss server (<code>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;\deploy</code>) and edit it as shown in the following example:</p>
<parameter ac:name="">xml</parameter><parameter ac:name="title">Update the mysql-ds.xml file</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;jndi-name&gt;jdbc/TradeDB&lt;/jndi-name&gt;
&lt;connection-url&gt;jdbc:mysql://localhost:3306/tradedb&lt;/connection-url&gt;
&lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
&lt;user-name&gt;root&lt;/user-name&gt;
&lt;password&gt;password&lt;/password&gt;
&lt;exception-sorter-class-name&gt;
org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
&lt;/exception-sorter-class-name&gt;
</plain-text-body>
<p>Delete all the other tags inside the <strong>&lt;local-tx-datasource&gt;</strong> tag and save the file. JBoss will automatically deploy the data source.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Buildthesampleapplication">Build the sample application</h2>

<p>The Online Brokerage application included with this article provides an Ant script that you will use in order to build the application and populate the database. Download the Online Brokerage application from the following link:</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.data/brokerage.zip?version=1&amp;modificationDate=1204181195000&amp;api=v2" data-linked-resource-id="20874013" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="brokerage.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645281" data-linked-resource-container-version="20">Online Brokerage</a></p>

<p>After extracting the zip file, a brokerage directory is created. In that directory open the <strong>build.properties</strong> file and edit the properties to match your environment as shown in the following example:</p>
<parameter ac:name="title">Update the build.properties file</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
# Replace server.name with either jboss or geronimo depending on which server to deploy.
server.name=jboss
#Replace &lt;JAVA_HOME&gt; with your JDK home directory
java.home=&lt;JAVA_HOME&gt;
#Replace &lt;JBOSS_HOME&gt; with the root directory for your specific JBoss server &lt;jboss_home&gt;\servers\&lt;server_name&gt;
jboss.home=&lt;JBOSS_HOME&gt;
#Replace &lt;GERONIMO_HOME&gt; with the root directory for Geronimo
geronimo.home=&lt;GERONIMO_HOME&gt;
#fully qualified name of the JDBC driver class
db.driver=com.mysql.jdbc.Driver
#database URL
db.url=jdbc:mysql://localhost:3306/tradedb
#database userId
db.userid=root
#database password
db.password=password
#script files for creating the tables
sql.file=sql/db.sql
#location of the jdbc driver jar.
driver.classpath=&lt;jboss_home&gt;/server/&lt;your_server_name&gt;/lib/mysql-connector-java-3.1.14-bin.jar
</plain-text-body>
<rich-text-body><p>When specifying the driver.classpath in the build.properties file, make sure to use just the forward slash "/" , otherwise the build will not find the jar file.</p></rich-text-body>
<p>From a command prompt or shell go to the brokerage directory and run <strong>ant</strong>. This will build the war file and place it directly in the brokerage directory. The war created by the ant build contains a JBoss specific deployment descriptor, the <code>jboss-web.xml</code> file in the WEB-INF directory of the WAR is shown in the following example.</p>
<parameter ac:name="">xml</parameter><parameter ac:name="title">JBoss deployment descriptor</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jboss-web&gt;
  &lt;context-root&gt;/brokerage&lt;/context-root&gt;
  &lt;resource-ref&gt;
      &lt;res-ref-name&gt;jdbc/TradeDB&lt;/res-ref-name&gt;
      &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;
      &lt;jndi-name&gt;java:jdbc/TradeDB&lt;/jndi-name&gt;
  &lt;/resource-ref&gt;
&lt;/jboss-web&gt;
</plain-text-body>
<p>The resource-ref element is used to map the resource referred to by the name jdbc/TradeDB in the <code>web.xml</code> file to the resource with the JNDI name java:jdbc/TradeDB i.e. the MySQL datasource.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Deploythesampleapplication">Deploy the sample application</h2>

<p>To deploy the Online Brokerage application in JBoss, copy the <strong>brokerage.war</strong> file you just built with Ant to the following directory:</p>

<p><code>&lt;jboss_home&gt;\server\&lt;your_server_name&gt;\deploy</code></p>

<p>If JBoss is already started, it will automatically deploy and start the application;  otherwise, the application will be deployed and started at the next startup.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Testthesampleapplication">Test the sample application</h2>

<p>To test the application, open a Web browser and access the following URL:</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/brokerage" rel="nofollow">http://localhost:8080/brokerage</a></p>

<p>This brings up the login screen of the Online Brokerage application.  Enter <strong>j2ee</strong> as the user name and <strong>password</strong> as the password and click <strong>login</strong>. This takes you to the available stocks page illustrated in the following figure. The application is now configured and running.</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="jboss-to-geronimo-jdbc-migration.data/availableStocks.jpg"></span></p>
<parameter ac:name="title">Pro Tip</parameter><rich-text-body><p>If you want to use another root password for the database, replace the occurrences of <strong>password</strong> with the required password. This has to be changed in the following three places:</p>
<ol><li>MySQL instance configuration.</li><li>Data source configuration file.</li><li>build.properties file used by the Ant build script.</li></ol>
</rich-text-body>
<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-JDBCMigration-TheGeronimoenvironmentGeronimo">The Geronimo environment <parameter ac:name="">Geronimo</parameter></h1>

<p>Download and install Geronimo from the following URL:</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a></p>

<p>The release notes available there provide clear instructions on system requirements and how to install and start Geronimo.  Throughout the rest of this article we will refer to the Geronimo installation directory as <strong>&lt;geronimo_home&gt;</strong>.</p>
<parameter ac:name="title">TCP/IP ports conflict</parameter><rich-text-body><p>If you are planning to run JBoss and Geronimo on the same machine consider to change the default service ports on, at least, one of these servers.</p></rich-text-body>
<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Configureresources.1">Configure resources</h2>

<p>In Geronimo the JDBC resources are implemented using J2EE connectors. Therefore, you need to write a Geronimo specific deployment plan for deploying a JDBC datasource. Additionally, while doing the deployment you need to provide the deployer with the <strong>tranql-connector-ra-1.3.rar</strong> file. This RAR file contains the connection pool management logic for Geronimo.</p>

<p>For running the Online Brokerage application in Geronimo, you will be using the same MySQL database that was used with JBoss. So the only task you do in order to prepare the Geronimo environment is to configure the data source.</p>

<h3 id="JBosstoGeronimo-JDBCMigration-Configurethedatasource">Configure the data source</h3>

<p>The first thing you do is to copy the MySQL database driver into the Geronimo repository so that you can refer to it in the data source deployment plan.</p>

<p>The Geronimo repository is located at <code>&lt;geronimo_home&gt;/repository</code>. Inside this directory, create a directory called <strong>mysql/mysql-connector-java/3.1.14-bin</strong> and copy the <code>mysql-connector-java-3.1.14-bin.jar</code> file into it. Now, you create the data source deployment plan.</p>
<parameter ac:name="title">Different types of data sources</parameter><rich-text-body><p>There are three types of data sources that Geronimo supports:</p>
<ul><li>Global data source - Visible to all the applications on a Geronimo Instance.</li><li>Application scoped data source - Visible to a single application within which it is defined.</li><li>Module scoped data source - Visible to a single module within which it is defined.</li></ul>


<p>For this migration exercise you will be using a Global data source. For instructions on configuring and using the other two types of data sources see the the following developerWorks article:</p>

<p><a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/opensource/library/os-ag-jdbc/" rel="nofollow">http://www.ibm.com/developerworks/opensource/library/os-ag-jdbc/</a></p></rich-text-body>
<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h4 id="JBosstoGeronimo-JDBCMigration-Createthedatasourcedeploymentplan">Create the data source deployment plan</h4>

<p>First, create an xml file called <strong>mysql-geronimo-plan.xml</strong>. Copy the plan shown in the following example and paste it in the xml file.</p>
<parameter ac:name="">xml</parameter><parameter ac:name="title">Data source deployment plan</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;connector xmlns="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2"&gt;

  &lt;dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.1"&gt;
    &lt;dep:moduleId&gt;
	  &lt;dep:groupId&gt;user&lt;/dep:groupId&gt;
	  &lt;dep:artifactId&gt;jdbcdatasource&lt;/dep:artifactId&gt;
	  &lt;dep:version&gt;2.0&lt;/dep:version&gt;
	  &lt;dep:type&gt;car&lt;/dep:type&gt;
	&lt;/dep:moduleId&gt;
	&lt;dep:dependencies&gt;
	  &lt;dep:dependency&gt;
	    &lt;dep:groupId&gt;mysql&lt;/dep:groupId&gt;
		&lt;dep:artifactId&gt;mysql-connector-java&lt;/dep:artifactId&gt;
		&lt;dep:version&gt;3.1.14-bin&lt;/dep:version&gt;
		&lt;dep:type&gt;jar&lt;/dep:type&gt;
	  &lt;/dep:dependency&gt;
	&lt;/dep:dependencies&gt;
  &lt;/dep:environment&gt;
&lt;resourceadapter&gt;
  &lt;outbound-resourceadapter&gt;
    &lt;connection-definition&gt;
      &lt;connectionfactory-interface&gt;
        javax.sql.DataSource
      &lt;/connectionfactory-interface&gt;
      &lt;connectiondefinition-instance&gt;
        &lt;name&gt;TradeDS&lt;/name&gt;
        &lt;config-property-setting name="UserName"&gt;
          root
        &lt;/config-property-setting&gt;
        &lt;config-property-setting name="Password"&gt;
          password
        &lt;/config-property-setting&gt;
        &lt;config-property-setting name="Driver"&gt;
          com.mysql.jdbc.Driver
        &lt;/config-property-setting&gt;
        &lt;config-property-setting name="ConnectionURL"&gt;
          jdbc:mysql://localhost:3306/tradedb
        &lt;/config-property-setting&gt;
        &lt;config-property-setting name="CommitBeforeAutocommit"&gt;
           false
        &lt;/config-property-setting&gt;
        &lt;config-property-setting name="ExceptionSorterClass"&gt;
           org.tranql.connector.NoExceptionsAreFatalSorter
        &lt;/config-property-setting&gt;
        &lt;connectionmanager&gt;
          &lt;local-transaction/&gt;
          &lt;single-pool&gt;
             &lt;max-size&gt;10&lt;/max-size&gt;
             &lt;min-size&gt;0&lt;/min-size&gt;
             &lt;blocking-timeout-milliseconds&gt;
                5000
              &lt;/blocking-timeout-milliseconds&gt;
              &lt;idle-timeout-minutes&gt;
                30
              &lt;/idle-timeout-minutes&gt;
              &lt;match-one/&gt;
          &lt;/single-pool&gt;
        &lt;/connectionmanager&gt;
      &lt;/connectiondefinition-instance&gt;
    &lt;/connection-definition&gt;
  &lt;/outbound-resourceadapter&gt;
&lt;/resourceadapter&gt;
&lt;/connector&gt;
</plain-text-body>
<p>The listing above shows the plan for deploying a J2EE connector which will provide JDBC access to the database. The root element is the &lt;connector&gt; element. This element has the following four attributes:</p>
<ul><li>xmlns - specifies the XML namespace.</li><li>configId - specifies the name Geronimo uses to refer to the connector internally.</li><li>parentId - specifies the parent of this configuration.</li></ul>


<p>Other important elements and attributes are:</p>
<ul><li>connectionfactory-interface - Must be javax.sql.DataSource.</li><li>connectiondefinition-instance - Contains the configuration properties required to connect to the database.</li><li>connectionmanager - Contains the configuration settings for the geronimo connection manager.</li><li>config-property-setting - Specifies the value of a single configuration property of the connector.</li><li>name - Name of the data source.</li><li>local-transaction - The presence of this element enables the resource adapter to support local transactions. If the <strong>no-transaction</strong> element is present instead of <strong>local-transaction</strong>, then the resource adapter will not support transactions. If the <strong>xa-transaction</strong> element is present instead of <strong>local-transaction</strong>, then the resource adapter will support xa-transactions.</li><li>single-pool - Contains the connection pool configuration properties such as max-size and min-size for a single pool. If the <strong>no-pool</strong> element is present instead of <strong>single-pool</strong>, then the connections will not be pooled. If <strong>partitioned-pool</strong> element is present instead of <strong>single-pool</strong>, then there will be a number of connection pools based on the partition type.</li><li>max-size - Maximum number of connections allowed simultaneously.</li><li>min-size  - Minimum size of the connection pool.</li><li>blocking-timeout-milliseconds - Time for which a caller will be made to wait for a connection, if all the connections in the pool are currently in use, before throwing an exception.</li><li>idle-timeout-minutes - Time in minutes after which a connection will timeout if it is idle.</li></ul>


<p>The following table shows the configuration properties that are specified by the config-property-setting element.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> Configuration Property </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> Meaning </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Driver </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> Fully qualified class name of the JDBC driver. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> ConnectionURL </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> The JDBC connection URL. This can contain parameters when supported by the driver. For example, for MySQL to use named pipes instead of TCP/IP you can attach <code>?socketFactory=com.mysql.jdbc.NamedPipeSocketFactory</code> to the JDBC connection URL. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> UserName </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> The user name needed to connect to the database. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Password </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> The password needed to connect to the database. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> CommitBeforeAutocommit </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> In case the JDBC driver does not commit the pending data changes when <code>setAutoCommit</code> (true) is called. </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> ExceptionSorterClass </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> To provide information to the pool whether the Exceptions that occur are fatal or not. </p></td></tr></tbody></table></div>

<p>After creating the MySQL deployment plan we need to deploy the connection pool datasource by running the deployer tool.</p>

<p>Start the Geronimo Instance as the deployer tool requires the server to be up and running.</p>

<p>From a command line change directory to &lt;geronimo_home&gt;/bin and run the following command:</p>

<p><strong><code>deploy --user system --password manager deploy &lt;brokerage_home&gt;\plan\mysql-geronimo-plan.xml &lt;geronimo_home&gt;\repository\org\tranql\tranql-connector-ra\1.3\tranql-connector-ra-1.3.rar</code></strong></p>

<p>where brokerage_home is the path of the brokerage directory.This will deploy the data source.<br clear="none">
Now you are ready to proceed with the migration.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-JDBCMigration-Step-by-stepmigrationmigration">Step-by-step migration <parameter ac:name="">migration</parameter></h1>

<p>Geronimo does not support accessing external resources(JDBC datasources) by setting JNDI properties at runtime as shown in the following example:</p>
<parameter ac:name="borderStyle">solid</parameter><plain-text-body>
Context ctx = null;
Hashtable env = new Hashtable();
env.put(Context.INITIAL_CONTEXT_FACTORY, "Geronimo specific factory");
env.put(Context.PROVIDER_URL, "provider URL for geronimo");
     ctx = new InitialContext(env)
</plain-text-body>
<p>This is because reference resolution is done at deploy time and is based on the JSR-77 object names of the target component. In order to migrate the Online Brokerage application to Geronimo, you first replace the <code>jboss-web.xml</code> file with a <code>geronimo-web.xml</code> file which is the Geronimo-specific descriptor file.</p>

<p>The <code>geronimo-web.xml</code> file is located in the <code>&lt;brokerage_home&gt;\web\descriptors\geronimo</code> directory and looks like the following example.</p>
<parameter ac:name="">xml</parameter><parameter ac:name="title">geronimo-web.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.1" xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.1"&gt;
    &lt;dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.1"&gt;
	    &lt;dep:moduleId&gt;
		    &lt;dep:groupId&gt;BrokerageApp&lt;/dep:groupId&gt;
			&lt;dep:artifactId&gt;MySqlDS&lt;/dep:artifactId&gt;
			&lt;dep:version&gt;2.0&lt;/dep:version&gt;
			&lt;dep:type&gt;car&lt;/dep:type&gt;
		&lt;/dep:moduleId&gt;

		&lt;dep:dependencies&gt;
		    &lt;dep:dependency&gt;
		        &lt;dep:groupId&gt;user&lt;/dep:groupId&gt;
			    &lt;dep:artifactId&gt;jdbcdatasource&lt;/dep:artifactId&gt;
			    &lt;dep:version&gt;2.0&lt;/dep:version&gt;
			    &lt;dep:type&gt;car&lt;/dep:type&gt;
			&lt;/dep:dependency&gt;
		&lt;/dep:dependencies&gt;

	&lt;/dep:environment&gt;
&lt;context-root&gt;/brokerage&lt;/context-root&gt;

&lt;resource-ref&gt;

	&lt;ref-name&gt;jdbc/TradeDB&lt;/ref-name&gt;

     &lt;resource-link&gt;TradeDS&lt;/resource-link&gt;

&lt;/resource-ref&gt;

&lt;/web-app&gt;
</plain-text-body>
<p>As shown in the example, the parent for this configuration is the MySQL J2EE connector.  The naming:resource-ref element maps the TradeDS data source to the name jdbc/TradeDB.  The context-root element gives the context-root of the application.</p>


<p>These are the only changes required to run this application on Geronimo.</p>

<p>In order to build the .war file for Geronimo, you can modify the build.properties file that is provided with the sample application to remove the jboss-web.xml and include the geronimo-web.xml. This is done by changing the <strong>server.name</strong> property to geronimo.  Also you must specify the property <strong>geronimo.home</strong> in the build script.</p>

<p>The two values that you need to modify are:</p>

<p><code>server.name=geronimo</code><br clear="none">
<code>geronimo.home=&lt;geronimo_home&gt;</code></p>

<p>The build.properties is used by the build script to pick up the J2EE specs for Geronimo. If your <strong>jboss.home</strong> property is still valid, it is not required to set this property. If this property is not set and the jboss.home is also not valid then you will get compilation errors. You must set the <strong>driver.classpath</strong> to point to the new driver jar. Now from the command prompt go to the brokerage directory and run ant. This builds the war file and places it directly in the brokerage directory.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h2 id="JBosstoGeronimo-JDBCMigration-Deploythemigratedsampleapplication">Deploy the migrated sample application</h2>

<p>To deploy the migrated Online Brokerage application, make sure the Geronimo server is up and running.</p>

<p>From a command line, change directory to <code>&lt;geronimo_home&gt;\bin</code> and type the following command:</p>

<p><strong><code>deploy --user system --password manager deploy &lt;brokerage_home&gt;/brokerage.war</code></strong></p>

<p>Once the application is deployed, open a Web browser and access the following URL:</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/brokerage" rel="nofollow">http://localhost:8080/brokerage</a></p>

<p>Login with the same user name and password you used when testing the application from JBoss.</p>

<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p>

<h1 id="JBosstoGeronimo-JDBCMigration-Summarysummary">Summary <parameter ac:name="">summary</parameter></h1>

<p>This article has shown you how to migrate a sample application, from JBoss to the Apache Geronimo application server. You followed step-by-step instructions to build the application, deploy and run it, and then migrate it to the Geronimo environment.</p>

<p>The following list summarizes the major differences found during this sample application migration.</p>
<ol><li>In the Geronimo specific deployment descriptor the resource reference name is mapped to the name of the datasource unlike in the JBoss specific deployment descriptor where the resource name is mapped to the JNDI name of the datasource.</li><li>In order to deploy a datasource in JBoss, you can just copy the configuration file to the deploy directory but in Geronimo you must use the deployer tool.</li><li>At this time, Geronimo does not support accessing external resources (i.e.:JDBC datasources) by setting JNDI properties at runtime. This resources must be specified at deployment time.</li></ol>


<p><a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">Back to Top</a></p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : JBoss to Geronimo - JDBC Migration';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
