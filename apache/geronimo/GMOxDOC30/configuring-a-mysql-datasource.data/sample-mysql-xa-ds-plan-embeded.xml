<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://geronimo.apache.org/xml/ns/j2ee/application-2.0">
    <environment>
        <moduleId>
            <groupId>myapp</groupId>
            <artifactId>myapp_ear</artifactId>
            <version>1.0</version>
            <type>car</type>
        </moduleId>
        <dependencies>            
            <dependency>
                <groupId>mysql</groupId>
                <artifactId>mysql-connector-java</artifactId>
                <version>5.1.7</version>
                <type>jar</type>
            </dependency>            
        </dependencies>
    </environment>
    
    <module>
        <web>web.war</web>
        <web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1">
            ...
        </web-app>
    </module>
    
    <module>
        <ejb>dt-ejb.jar</ejb>
        <openejb-jar xmlns="http://openejb.apache.org/xml/ns/openejb-jar-2.2">
            <enterprise-beans>
                ...
            </enterprise-beans>          

            <persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
                <persistence-unit name="daytrader">
                      ...
                </persistence-unit>
            </persistence>
        </openejb-jar>
    </module>
    
    <ext-module>
        <connector>MySQLSampleXADataSource</connector>
        <external-path xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2">
            <dep:groupId>org.tranql</dep:groupId>
            <dep:artifactId>tranql-connector-mysql-xa</dep:artifactId>
            <dep:type>rar</dep:type>
        </external-path>     
        <connector xmlns="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2">
        <resourceadapter>
          <outbound-resourceadapter>
            <connection-definition>
                <connectionfactory-interface>javax.sql.DataSource</connectionfactory-interface>
                <connectiondefinition-instance>
                    <name>jdbc/mysqlxads</name>
                    <config-property-setting name="DatabaseName">sampledb</config-property-setting>
                    <config-property-setting name="UserName">username</config-property-setting>
                    <config-property-setting name="Password">password</config-property-setting>
                    <connectionmanager>
                        <xa-transaction>
                            <transaction-caching/>
                        </xa-transaction>
                        <single-pool>
                            <max-size>10</max-size>
                            <min-size>0</min-size>
                            <match-one/>
                        </single-pool>
                    </connectionmanager>
                </connectiondefinition-instance>
            </connection-definition>
        </outbound-resourceadapter>
      </resourceadapter>
    </connector>
  </ext-module>
</application>
