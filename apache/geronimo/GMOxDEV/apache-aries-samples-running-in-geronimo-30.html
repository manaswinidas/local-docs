<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Apache Aries Samples running in Geronimo 3.0" />
    <META name="Keywords" content="Apache Geronimo development documentation Apache Aries Samples running in Geronimo 3.0" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2009-01-06" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo Development : Apache Aries Samples running in Geronimo 3.0</title>

  </head>

  <body onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="index.html">Index</a>&nbsp;&gt;&nbsp;<a href="apache-aries-samples-running-in-geronimo-30.html">Apache Aries Samples running in Geronimo 3.0</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo Development</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Apache Aries Samples running in Geronimo 3.0</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20643861">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20643861">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=20643861">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=20643861">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=20643861">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=20643861">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">
<p><span class="confluence-anchor-link" id="ApacheAriesSamplesrunninginGeronimo3.0-top"></span><br clear="none">
It is possible to install and run several of the Apache Aries sample EBAs in Apache Geronimo 3.0-SNAPSHOT. These are OSGi enabled Web Applications and other bundles that leverage capabilities such as Blueprint, JNDI, JDBC, JPA, and JTA in OSGi specified ways.  The samples are packaged in an EBA for deployment.  The current samples are the Aries Blog and AriesTrader.   </p>

<p>You can find more details on the samples here:</p>
<ul><li><a shape="rect" class="external-link" href="http://aries.apache.org/modules/samples/blog-sample.html">Aries Blog Sample</a></li><li><a shape="rect" class="external-link" href="http://aries.apache.org/modules/samples/ariestrader.html">AriesTrader Sample</a></li></ul>


<h2 id="ApacheAriesSamplesrunninginGeronimo3.0-ObtainingaGeronimo3.0-M1servergeronimo">Obtaining a Geronimo 3.0-M1 server <span class="confluence-anchor-link" id="ApacheAriesSamplesrunninginGeronimo3.0-geronimo"></span></h2>
<p>You can download an image of the "Geronimo Non-Certified Web Container" (either Tomcat or Jetty) from this location:<br clear="none">
<a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v30-m1-release.html">Geronimo 3.0-M1 download page</a></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You <strong>must</strong> use a Web Container image and not a "Little-G" (minimal) version of the server. The Little-G version does not include necessary components for deploying the Apache Aries samples.</p></div></div>

<p>Follow the Apache Geronimo documentation to unpack and start the server image (Hint: unzip or untar the server image and use something like "./bin/geronimo.sh run" to start the server).</p>

<h2 id="ApacheAriesSamplesrunninginGeronimo3.0-ObtainingtheAriesSamplesaries">Obtaining the Aries Samples <span class="confluence-anchor-link" id="ApacheAriesSamplesrunninginGeronimo3.0-aries"></span></h2>
<p>There are several choices to obtain the Apache Aries EBA samples.  </p>
<ol><li>You can choose to obtain the source code and build the samples yourself.  This is useful if you are using the samples as a learning tool to build your own application.</li><li>You can also choose to simply download the EBAs from the latest Apache Aries samples release without building Apache Aries.</li></ol>


<p>In either case, you can find the necessary downloads (source or EBA artifacts) at this location:<br clear="none">
<a shape="rect" class="external-link" href="http://aries.apache.org/downloads/currentrelease.html">Latest Apache Aries Release</a></p>


<h2 id="ApacheAriesSamplesrunninginGeronimo3.0-BuildingtheApacheAriessamplesaries-build">Building the Apache Aries samples <span class="confluence-anchor-link" id="ApacheAriesSamplesrunninginGeronimo3.0-aries-build"></span></h2>
<p>If you choose not to build the samples you can skip to <a shape="rect" href="apache-aries-samples-running-in-geronimo-30.html">Deploy the Aries Samples DataSource</a> <br clear="none">
Download and unzip the source zip for the <a shape="rect" class="unresolved" href="#">Latest Apache Aries Release</a> of Aries Samples and build the project. </p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
cd samples-0.1-incubating/
mvn install
</pre>
</div></div>
<p>This procedure will pull in the binaries from the latest release and its dependencies.</p>

<p>What you are really interested in here are the sample EBAs for Blog and AriesTrader which can be found at:</p>
<ul><li>Blog jdbc sample - samples-0.1-incubating/blog/blog-jdbc-eba/target/org.apache.aries.samples.blog.jdbc.eba-0.1-incubating.eba</li><li>Blog jpa sample - samples-0.1-incubating/blog/blog-jpa-eba/target/org.apache.aries.samples.blog.jpa.eba-0.1-incubating.eba</li><li>AriesTrader jdbc sample - samples-0.1-incubating/ariestrader/assemblies/ariestrader-jdbc-eba/target/org.apache.aries.samples.ariestrader.jdbc-0.1-incubating.eba</li><li>AriesTrader all sample - samples-0.1-incubating/ariestrader/assemblies/ariestrader-all-eba/target/org.apache.aries.samples.ariestrader.all-0.1-incubating.eba</li></ul>


<h2 id="ApacheAriesSamplesrunninginGeronimo3.0-DeploytheAriesSamplesDataSourcearies-deploy">Deploy the Aries Samples DataSource <span class="confluence-anchor-link" id="ApacheAriesSamplesrunninginGeronimo3.0-aries-deploy"></span></h2>
<p>Each of the two samples requires a Datasource.  However, before you can deploy the Datasources you need to obtain the tranql-connector-derby-embed-xa rar.   Unfortunately, this was not included in the Geronimo 3.0-M1 server images (but will be included in future images).  </p>
<ul><li>For 3.0-M1 release you can obtain the necessary rar from any of the ibiblio mirrors:   <a shape="rect" class="external-link" href="http://mirrors.ibiblio.org/pub/mirrors/maven2/org/tranql/tranql-connector-derby-embed-xa/1.6/" rel="nofollow">Tranql RAR for derby</a></li><li>You must also download the XML for the datasource definitions - located here: <a shape="rect" href="apache-aries-samples-running-in-geronimo-30.data/aries-datasource.xml?version=2&amp;modificationDate=1277208708000&amp;api=v2" data-linked-resource-id="20873218" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="aries-datasource.xml" data-nice-type="XML File" data-linked-resource-content-type="text/xml" data-linked-resource-container-id="20643861" data-linked-resource-container-version="51">aries-datasource.xml</a>.</li></ul>


<p>After you have both of the necessary files in your local file system use the following command to deploy the datasource:  </p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
./bin/deploy -u system -p manager deploy tranql-connector-derby-embed-xa-1.6.rar aries-datasource.xml
</pre>
</div></div>

<h2 id="ApacheAriesSamplesrunninginGeronimo3.0-DeploytheSampleEBA">Deploy the Sample EBA </h2>
<p>Deploy the Blog or AriesTrader EBAs using the Geronimo web console or the following commands (NOTE: you should only deploy one version of each sample at a time - for example only the jdbc Blog or jpa Blog sample and not both concurrently):</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Blog jdbc
./bin/deploy -u system -p manager deploy org.apache.aries.samples.blog.jdbc.eba-0.1-incubating.eba
Blog jpa
./bin/deploy -u system -p manager deploy org.apache.aries.samples.blog.jpa.eba-0.1-incubating.eba
AriesTrader jdbc
./bin/deploy -u system -p manager deploy org.apache.aries.samples.ariestrader.jdbc-0.1-incubating.eba
AriesTrader all
./bin/deploy -u system -p manager deploy org.apache.aries.samples.ariestrader.all-0.1-incubating.eba
</pre>
</div></div>

<h2 id="ApacheAriesSamplesrunninginGeronimo3.0-RunningtheSamples">Running the Samples</h2>
<p>You should now be able to access the samples as follows:</p>
<ul><li>Blog - <a shape="rect" class="external-link" href="http://localhost:8080/blog" rel="nofollow">http://localhost:8080/blog</a></li><li>AriesTrader - <a shape="rect" class="external-link" href="http://localhost:8080/ariestrader" rel="nofollow">http://localhost:8080/ariestrader</a></li></ul>


<p>For details on how to interact with the Samples and the sample structure reference the following links:</p>
<ul><li><a shape="rect" class="external-link" href="http://aries.apache.org/modules/samples/blog-sample.html">Aries Blog Sample</a> - specifically reference the "About the Blog Sample" section.</li><li><a shape="rect" class="external-link" href="http://aries.apache.org/modules/samples/ariestrader.html">AriesTrader Sample</a> - specifically reference the "Accessing and using the AriesTrader sample" and the subsequent "About the AriesTrader Sample" sections.</li></ul>

</div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Apache Aries Samples running in Geronimo 3.0';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2011, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>
