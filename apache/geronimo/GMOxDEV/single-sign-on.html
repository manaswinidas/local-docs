<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Single Sign On" />
    <META name="Keywords" content="Apache Geronimo development documentation Single Sign On" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2009-01-06" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo Development : Single Sign On</title>

  </head>

  <body onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="index.html">Index</a>&nbsp;&gt;&nbsp;<a href="single-sign-on.html">Single Sign On</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo Development</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Single Sign On</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=105832">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=105832">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=105832">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=105832">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=105832">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=105832">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><h1 id="SingleSignOn-SingleSignOn">Single Sign On</h1>

<p>Single Sign On (SSO) is used to mean several different things. I'll describe (my understanding of) the dimensions and some possible solutions and technologies.</p>

<h2 id="SingleSignOn-WhatdoesSSOMean?">What does SSO Mean?</h2>
<p>For now, I'll just talk about web app SSO</p>

<h3 id="SingleSignOn-Severalappsononeserver">Several apps on one server</h3>
<h4 id="SingleSignOn-BASIC/DIGESTauthentication">BASIC/DIGEST authentication</h4>
<p>RFC 2617 says</p>
<blockquote>
<p>   The realm directive (case-insensitive) is required for all<br clear="none">
   authentication schemes that issue a challenge. The realm value<br clear="none">
   (case-sensitive), in combination with the canonical root URL (the<br clear="none">
   absoluteURI for the server whose abs_path is empty; see section 5.1.2<br clear="none">
   of <a shape="rect" class="unresolved" href="#">2</a>) of the server being accessed, defines the protection space.</p></blockquote>
<p>This means that once the client gets your credentials for a server and realm name it will keep supplying them to every app on that server with that realm name.  So you can get SSO for all servers that appear to be the same one to the client (such as accessed through a load balancer) and with the same realm.  This won't work for several apps on servers that appear to be different to the client.</p>

<h4 id="SingleSignOn-FORMauthentication">FORM authentication</h4>
<p>The servlet spec says that session info is restricted to a single web app identified by its context root.  Normally form auth is implemented by storing the credentials in the http session, so you cant share these credentials across web apps.  Web containers often provide a way to violate the spec and share sessions across context roots sharing some initial URI.  Jetty 7 may provide a cross context psuedo session that can be configured for arbitrary apps that can be used to store the creds for all the apps.</p>

<p>From the client side perspective form authentication is usually implemented with the aid of cookies that mention the domain and path.  At least in jetty these are configurable although non-default path values are not servlet spec compliant as they would result in sharing a session across several web apps.</p>

<h3 id="SingleSignOn-Morethanoneserver,withdifferentapps">More than one server, with different apps</h3>
<p>It doesn't appear possible to have BASIC or DIGEST sso in this case if the client can recognize that there are different servers (i.e. not concealed behind a load balancer).</p>

<p>For FORM-like authentication, more is possible using cookies.  The servers must be on related domains, e.g. a.foo.com and b.foo.com so the cookie domain can be foo.com.  Similarly the paths must be compatible, such as "/".  In these cases the user agent will send the same cookie to all the servers in the related domains when accessing a compatible path.  The cookie can contain either the id for a cross-context psuedo "session" or the security info itself.  If the security info (identity) is encrypted I don't see how sending the security info would be less secure than sending the pseudo-session id.  However it could easily exceed the cookie size limit.</p>

<p>A cross context psuedo-session would need to be replicated on all the servers either on demand when a request arrives with a unknown session id or more preemptively with a clustering solution such as tribes, wadi, or terracotta.</p>

<h2 id="SingleSignOn-Othermethods">Other methods</h2>
<h3 id="SingleSignOn-Kerberos">Kerberos</h3>
<p>In a kerberos environment where the clients are already authenticated using kerberos SPNEGO can theoretically be used to automatically authenticate users to all servers that are part of the kerberos environment.  AFAIK this requires basically JASPI support with a SPNEGO auth module and a SPNEGO compatible user agent.  JASPI support should be available in jetty 7 (currently available in an experimental branch).</p>

<h3 id="SingleSignOn-OpenID">OpenID</h3>
<p>OpenID provides some SSO like features in that only one server (the openid provider) actually logs you in, however you have to indicate your openID identifier to each openid enabled server you wish to access and you have to tell the openid provider you want to allow authentication to each such server.</p>

<h2 id="SingleSignOn-SSOImplementations">SSO Implementations</h2>

<h3 id="SingleSignOn-JSecurity">JSecurity</h3>
<p><a shape="rect" class="external-link" href="http://incubator.apache.org/jsecurity/">JSecurity</a> or more usefully <a shape="rect" class="external-link" href="http://www.jsecurity.org/" rel="nofollow">http://www.jsecurity.org/</a> is a well established security framework that is now moving to apache and is currently under incubation.  It's ASL 2.0.  It is not yet integrated in Geronimo and does not appear to directly relate to javaee spec security yet although it may be useful to integrate as a JACC provider.  Some details on SSO support are at <a shape="rect" class="external-link" href="http://www.jsecurity.org/node/996" rel="nofollow">http://www.jsecurity.org/node/996</a> which appear to indicate that it relies on a cross-context psuedo session and would need a custom communication with a particular server to share session contents.</p>

<h3 id="SingleSignOn-CAS(CentralAuthenticationServer)">CAS (Central Authentication Server)</h3>
<p><a shape="rect" class="external-link" href="http://www.ja-sig.org/products/cas/index.html" rel="nofollow">CAS</a> is a BSD licensed framework that is kerberos like. A user signs onto the central server, which maintains a cookie and session remembering the login.  Applications redirect to the central server for authentication and the central server redirects back after authentication, including a ticket.  The client app then validates the ticket against the central server.  Apparently the only information returned is "validated" and the user id; there is no role information returned.  Thus, as with openid, each application will need to maintain identity to role mapping.  There is a spring security integration but I can find no direct jetty or tomcat integrations that allow use of the javaee security constraints.</p>

<h3 id="SingleSignOn-JOSSO">JOSSO</h3>
<p><a shape="rect" class="external-link" href="http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home" rel="nofollow">JOSSO</a> is GPL licensed which makes its use with ASL licensed code difficult to understand for me.  It appears to have a geronimo-tomcat integration.  Use with  jetty or geronimo-jetty would require modifying the jetty server to include an interceptor or handler before the security handler so the sso information could be injected before the normal security handling.  Presumably this code would be GPL thus making the use of Jetty or Geronimo GPL.  For this reason Geronimo can't include integration code for JOSSO.<br clear="none">
JOSSO works by having a central authentication server ("gateway") and "sessions" that are shared between the auth server and secured "partner" apps.  Presumably the session id is shared using a cookie.  There is some combination of an authentication message flow that redirects to the central auth server and a JAAS login module for the partner app that retrieves the auth info from the central server using SOAP.  It's possible that the authentication message flow, currently implemented apparently via  a tomcat valve, could be implemented using JASPI, thus making it more cross-platform.  There's some description here:<br clear="none">
<a shape="rect" class="external-link" href="http://www.josso.org/confluence/display/JOSSO1/Architecture+Overview" rel="nofollow">http://www.josso.org/confluence/display/JOSSO1/Architecture+Overview</a></p>

<h3 id="SingleSignOn-ESOE">ESOE</h3>
<p><a shape="rect" class="external-link" href="http://www.esoeproject.org/" rel="nofollow">ESOE</a> is ASL 2.0 but apparently written primarily in C++.  It supports standards such as SAML and XACML.  It's unclear how it relates to the above discussion.  There's a tomcat integration but no visible jetty or geronimo integration.  It relies on a central authentication server.</p></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Single Sign On';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2011, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>
