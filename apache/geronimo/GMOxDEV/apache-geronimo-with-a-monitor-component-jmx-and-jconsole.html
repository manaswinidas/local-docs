<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Apache Geronimo With A Monitor Component (JMX and JConsole)" />
    <META name="Keywords" content="Apache Geronimo development documentation Apache Geronimo With A Monitor Component (JMX and JConsole)" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2009-01-06" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo Development : Apache Geronimo With A Monitor Component (JMX and JConsole)</title>

  </head>

  <body onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="index.html">Index</a>&nbsp;&gt;&nbsp;<a href="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.html">Apache Geronimo With A Monitor Component (JMX and JConsole)</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo Development</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Apache Geronimo With A Monitor Component (JMX and JConsole)</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=43470">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=43470">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=43470">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=43470">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=43470">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=43470">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>The purpose of this article is to show the possibilities of server-side monitoring using Geronimo, a Java<sup>TM</sup> 2 Platform Enterprise Edition (J2EE) application server. Monitoring an application server from inside saves network traffic, since monitored information can be analyzed, filtered, summarized, and set into an application specific context inside the server. For example an application server could send an e-mail when the response time of our online shop gets unacceptable big. A simple web application has been used to develop a server-side monitoring component that monitors three servlets and gives alarm when the overall average processing time exceeds a certain given threshold.</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-WhatisneededWhatisneeded">What is needed <span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Whatisneeded"></span></h1>

<ul><li>JDK 5.0 (because of the used JConsole tool; it is not included in JDK1.4): <a shape="rect" class="external-link" href="http://java.sun.com/javase/downloads/index.jsp" rel="nofollow">http://java.sun.com/javase/downloads/index.jsp</a></li><li>Standard Geronimo: <a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a></li><li>Sample Code: <a shape="rect" class="external-link" href="http://www.informatik.hs-furtwangen.de/~reich/Geronimo/GMontiorSample.zip" rel="nofollow">http://www.informatik.hs-furtwangen.de/~reich/Geronimo/GMontiorSample.zip</a> (Contents: Sources, shell scripts, archives, README, etc.)</li></ul>


<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Introduction">Introduction</h1>

<p>A lot of articles can be found in managing application servers with remote clients using the Java Management Extensions (JMX; <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a>). These management client applications describe how to connect management clients to a server and how to retrieve information from the server applications. While much attention has been given to the client-side aspects of JMX, very little consideration has been given to the server-side challenges of developing and deploying management beans (MBeans). The reason lays in the difficulties of development and integration of such components. Often it is not possible at all. With the appearance of Geronimo the server-side monitoring by implementing MBeans for monitoring servlets or EJBs is simplified.</p>

<p>This article shows how to monitor the application server Geronimo from inside and how detailed information querying the MBeans can be analyzed, grouped and generated to meta data inside the server. This saves bandwidth between the management client and the server and allows to build a more efficient controlled application server with the monitor component inside.</p>

<p>To keep it simple the Geronimo monitoring component is investigating the processing time of three servlets. The average of all three processing times is built and an alarm is generated if the overall processing time is greater then a pre-defined value. How the developed monitoring component is integrated into the Geronimo architecture and how it is deployed and managed by the JConsole <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a> is content of this paper.</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-OverviewaboutMBeansandGBeans">Overview about MBeans and GBeans</h1>

<p>This section gives a short introduction of the management standard JMX (<a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a>) with its fundamental beans, the MBeans. It explains that Geronimo can be extended by new components, if they are GBeans.</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-JavaManagementExtension">Java Management Extension</h2>

<p>Java Management eXtension (JMX) (<a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a>) standardizes the managing and monitoring of applications and services. It enables developers to write management programs for their applications in a vendor/neutral fashion. Another important standard in the area of J2EE is JSR-77 (<a shape="rect" class="external-link" href="http://jcp.org/en/jsr/detail?id=77" rel="nofollow">http://jcp.org/en/jsr/detail?id=77</a>). JSR-77 is a standard model for managing the J2EE platform and allows application server vendors to present performance metrics in a standard way. It defines a set of standard metric types that can be used to monitor J2EE platforms. The following types of metrics are defined in JSR-77: range statistics, boundary statistics, bounded range statistics, count statistics, and time statistics. Fundamental to JMX is the management bean, MBean. There are four types of MBeans (Standard, Dynamic, Model, Open), and each provide a different level of sophistication for management and monitoring (see <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a> for more details). In this paper, MBeans are used for the monitoring of servlets and for controlling the GBean monitor component.</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimohostingourMonitorComponent">Geronimo hosting our Monitor Component</h2>

<p>Geronimo is in the first place a Java<sup>TM</sup> 2 Platform Enterprise Edition (J2EE) application server, but can be seen as a general service container. The main focus of developing Geronimo was the managing and scaling of application servers. Geronimo's intention was never to re-implement a servlet or an EJB container, but to use existing open source applications (mainly from Apache <a shape="rect" class="external-link" href="http://www.apache.org/">http://www.apache.org/</a>) whenever possible, plug it together and build a new application server.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoextendedbyamonitorcomponent"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/architectureBigFigure.jpg" data-image-src="/confluence/download/attachments/43470/architectureBigFigure.jpg?version=1&amp;modificationDate=1170258515000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3577" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="architectureBigFigure.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">
The standard Geronimo distribution comes with Apache Tomcat <a shape="rect" class="external-link" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a> and EJB container (OpenEJB <a shape="rect" class="external-link" href="http://incubator.apache.org/openejb/">http://incubator.apache.org/openejb/</a>) component. Extending Geronimo by a monitoring component, developed for this paper, is like Tomcat, or any other component as long as they are GBeans, as shown in the Figure: <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoextendedbyamonitorcomponent">#Geronimo extended by a monitor component</a>. The fundamental entity within Geronimo are Geronimo Beans (GBeans).</p>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoBeansGeronimoBeans">Geronimo Beans <span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoBeans"></span></h3>

<p>Everything in Geronimo is  basically a Geronimo Bean (GBean). Geronimo's kernel handles these GBeans and stores them in it s repository. By default Geronimo uses not a database but a file directory named <code>repository</code>.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoGBeans"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/architectureOverview.jpg" data-image-src="/confluence/download/attachments/43470/architectureOverview.jpg?version=1&amp;modificationDate=1170259539000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3579" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="architectureOverview.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">
Users can install their own GBeans by describing them with a deployment plan and deploy them into Geronimo by using the GBeanBuilder (see Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoGBeans">#Geronimo GBeans</a>). Every GBean must implement the <code>GBeanLifecycle</code> interface. This interface defines three methods: <code>doStart()</code>, <code>doStop()</code>, <code>doFail()</code> as you see in the class diagram (Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample">#Class diagram of the management component example</a>). The <code>GBeanLifecycle</code> interface is the contract between the Geronimo plug-in framework and our application, the GBean. The Geronimo framework uses dependency injection (see Fowler: <a shape="rect" class="external-link" href="http://www.martinfowler.com/articles/injection.html" rel="nofollow">Inversion of control containers and the dependency injection pattern</a>, Frod: <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc1/" rel="nofollow">Dependency injection in apache geronimo, part 1</a>, <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc2/" rel="nofollow">Dependency injection in apache geronimo, part 2</a>) to set GBean parameters during the deployment process. There are two ways to inject information during the deployment process of GBeans:</p>
<ol><li>getter/setter injection: framework injects information using the setter and getter methods of the GBean.</li><li>constructor injection: framework injects information using the constructor of the GBean, when it is instantiated.</li></ol>


<p>The example of this article is using constructor injection to pass the servlet MBean names and the MBean server reference to the monitor GBean.</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TheServer-SideMonitorComponent">The Server-Side Monitor Component</h1>

<p>Subject of the section is a detailed architecture description of how the GBeans and MBeans are interacting. Discussed are the developed monitor classes and how to deploy the monitor component into Geronimo. Finally the monitor component is tested using the JConsole.</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoArchitectureOverview">Geronimo Architecture Overview</h2>

<p>First an overview about the integration of the monitor component into Geronimo's architecture is given in Figure <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">#Geronimo architecture with integrated monitor component</a>. It shows the JMX-Layer with the MBeanServer and the MBeans, the Tomcat component and the monitor component.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/architectureFigure.jpg" data-image-src="/confluence/download/attachments/43470/architectureFigure.jpg?version=1&amp;modificationDate=1170259522000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3578" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="architectureFigure.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">
Geronimo registers each GBean as a MBean with the MBean Server, when the server is started. Tomcat <a shape="rect" class="external-link" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a>, for example, consists of several GBeans and therefore consists of several MBeans (TomcatWebContainer, TomcatWebConnector, TomcatEngine, TomcatJAASRealm, etc.). For each servlet (S1, S2, S3) in Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">#Geronimo architecture with integrated monitor component</a> there exists a MBean (MB<sub>S1</sub>, MB<sub>S2</sub>, MB<sub>S3</sub>) with information defined in the JSR-77 specification. The dashed line objects are instantiated, when the sample monitor component (Servlet Monitor GBean) is deployed into Geronimo using the "GBean Builder". The MBeanServerKernelBridge registers each loaded GBean as a MBean  (MB<sub>MC</sub>) at the MBean server. The instantiated thread (T<sub>C</sub>) retrieves information from the servlet MBeans (MB<sub>S1</sub>, MB<sub>S2</sub>, MB<sub>S3</sub>).</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Servletsunderobservation">Servlets under observation</h2>

<p>It is not the content of this article to show how to develop and deploy servlets. There is a simple security servlet example in Geronimo's user guide <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html">http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html</a>, if you want to know more about web application in Geronimo. When you unpack the sources (found in Section <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Whatisneeded">#What is needed</a>) and follow the included Readme file you can deploy a web application consisting of 3 simple servlets (ServletStatistic, ServeletData, ServletSystemTime). Now you should be able to call the servlets. For example: <a shape="rect" class="external-link" href="http://localhost:8080/mysample/app1/ServletSystemTime" rel="nofollow">http://localhost:8080/mysample/app1/ServletSystemTime</a>.</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Server-SideMonitorComponent">Server-Side Monitor Component</h2>

<p>The server-side monitor component consists of 2 classes (see Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample">#Class diagram of the management component example</a>):</p>
<ul><li>the \verb+ServletMonitorGBean+, which implements the <code>GBeanLifecyle</code> interface and</li><li>the \verb+AverageBuilder+ thread, which is doing the actual collection of data from the servlet MBeans. If the calculated  average processing time is above the threshold an alarm is generated. The alarming function is not sending an e-mail, it is only logging "ALARM" to keep the code simple.</li></ul>


<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/ClassDiagram.jpg" data-image-src="/confluence/download/attachments/43470/ClassDiagram.jpg?version=1&amp;modificationDate=1170263296000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3580" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ClassDiagram.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span></p>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TheMonitorGBean">The Monitor GBean</h3>

<p>The Geronimo framework is injecting information about the MBean server reference and the MBean servlet object names into the constructor during deployment. Listing {#Listing 1] shows you how to inform the Geronimo kernel about the ability of the GBean. The <code>GBeanInfoBuilder</code> is used to tell Geronimo the name of the GBean class. Then the constructor injection is defined by <code>addAttribute</code> to specify the three servlet MBean names, <code>addReference</code> to specify the MBean server reference, and <code>setConstructor</code> to specify the constructor call.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing1"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ServletMonitorGBean.java (cutout)</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
public static final GBeanInfo GBEAN_INFO;
static {
 GBeanInfoBuilder infoB = GBeanInfoBuilder.createStatic(&quot;ServletMonitorGBean&quot;, ServletMonitorGBean.class);
 infoB.addAttribute(&quot;servletName1&quot;, String.class, true);
 infoB.addAttribute(&quot;servletName2&quot;, String.class, true);
 infoB.addAttribute(&quot;servletName3&quot;, String.class, true);
 infoB.addReference(&quot;MBeanServerReference&quot;, MBeanServerReference.class);
 infoB.setConstructor(new String[] { &quot;MBeanServerReference&quot;, &quot;servletName1&quot;, &quot;servletName2&quot;, &quot;servletName3&quot;});
]]></script>
</div></div>
<p>Further we want the methods, <code>startCalcAverage</code>, <code>stopCalcAverage</code>, <code>defineThreshold</code> and <code>defineUpdateInterval</code> to be available by an JMX management client. This allows us to interact with the monitor component through a MBean using the JConsole as shown in Section <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-AccessingGeronimousingJConsole">#Accessing Geronimo using JConsole</a>. Publishing GBean methods through a MBean is done by the <code>addOperation</code> of the <code>GBeanInfoBuilder</code> by specifying the method names and parameters, as seen in Listing <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing2">#Listing 2</a>:</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing2"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ServletMonitorGBean.java (cutout)</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
infoB.addOperation(&quot;startCalcAverage&quot;);
 infoB.addOperation(&quot;stopCalcAverage&quot;);
 infoB.addOperation(&quot;defineThreshold&quot;,new Class[]{int.class});
 infoB.addOperation(&quot;defineUpdateInterval&quot;,new Class[]{int.class});
]]></script>
</div></div>
<p>The MBean configuration process is finished by setting the variable <code>GBEAN_INFO</code>. Thus the <code>MBeanServerKernelBridge</code> can use <code>getGBeanInfo()</code> to get a <code>GBeanInfo</code> object (Listing <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing3">#Listing 3</a>) with the MBean configuration and builds the appropriate MBean MB<sub>MC</sub> Figure: <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">#Geronimo architecture with integrated monitor component</a>.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing3"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ServletMonitorGBean.java (cutout)</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
GBEAN_INFO = infoB.getBeanInfo();
public static GBeanInfo getGBeanInfo() { return GBEAN_INFO; }
]]></script>
</div></div>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TheAverageBuilderThread">The AverageBuilder Thread</h3>

<p>The <code>AverageBuilder</code> class (Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample">#Class diagram of the management component example</a>) is a thread which is querying the servlet MBeans. To query information from servlet MBeans, like the <code>requestCounter</code>, you have to know the object name of the MBean. You can find out about the object name using a JMX management client. In the section, <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-InteractingwiththeMonitorComponent">#Interacting with the Monitor Component</a>,  it is shown how to find out about the object names of the servlet MBeans. Since we injected this information during the deployment process of the GBean, we are not to worry about that at the moment. Having the MBean object name we get the information <code>precessingTime</code> and <code>requestCount</code> as follows (see Listing <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing4">#Listing 4</a>):</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing4"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ServletMonitorGBean.java (cutout)</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
ObjectName objNameStatisticServlet = ObjectName.getInstance(statisticServlet);
ObjectName objNameDataServlet=ObjectName.getInstance(dataServlet);
ObjectName objNameSystemTimeServlet = ObjectName.getInstance(systemTimeServlet);
long pt1=((Long)mbserver.getAttribute(objNameStatisticServlet, &quot;processingTime&quot;)).longValue();
int rc1=((Integer)mbserver.getAttribute(objNameStatisticServlet, &quot;requestCount&quot;)).intValue();
]]></script>
</div></div>
<p>Doing this for all 3 servlets and building the average can be seen in the source code.</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeployingtheServer-SideMonitorComponent">Deploying the Server-Side Monitor Component</h2>

<p>When the GBean monitor component is compiled, it has to be deployed into Geronimo.<br clear="none">
For deploying the monitor component everything has to be packaged according to Geronimo (see Geronimo's User Guide <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html">http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html</a>). That means you have to pack your GBeans with a deployment-plan into a jar file, e.g. <code>SimpleServletMonitor-1.0.jar</code> and deploy it. For the deployment, we have chosen the java deployment program, deployer:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
java -jar $GERONIMOHOME/bin/deployer.jar --user system --password manager deploy SimpleServletMonitor-1.0.jar
]]></script>
</div></div>
<p>It is a lot faster using the deployer program, then doing all the clicking using Geronimo's browser based management tool (<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http://localhost:8080/console</a>). With the example code, there comes also some simple Linux shell scripts supporting deployment, un-deployment, listing, etc.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeploymentPlansforGeronimo'sGBeans"></span></p>
<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeploymentPlansforGeronimo'sGBeans">Deployment Plans for Geronimo's GBeans</h3>

<p>Geronimo's deployment plans (<code>geronimo-service.xml</code>) state information about GBean names, references and dependencies. For a more detailed description about the deployment descriptor, see <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html">http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html</a>. Our deployment descriptor (Listing <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing5">#Listing 5</a>) consists of an <code>&lt;environment&gt;</code> and and <code>&lt;gbean&gt;</code> part:</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing5"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>geronimo-service.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;module xmlns=&quot;http://geronimo.apache.org/xml/ns/deployment-1.1&quot;&gt;
  &lt;environment&gt;...&lt;/environment&gt;
  &lt;gbean ...&gt;...&lt;/gbean&gt;
&lt;/module&gt;
]]></script>
</div></div>

<h4 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-The``environment''part:">The ``environment'' part:</h4>

<p>We have to give our monitor GBean an unique name inside Geronimo by defining its <code>groupId</code>, <code>artifactId</code>, <code>version</code> and <code>type</code>. Furthermore we have to define <code>&lt;dependencies&gt;</code> (see Listing: <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing6">#Listing6</a>). Because we want to inject the object reference for <code>MBeanServerReference</code> to the GBean constructor our deployment process depends on the <code>geronimo/rmi-naming</code> defined as the artifactId in the <code>geronimo-service.xml</code>.<br clear="none">
The serialized version of that reference is found in the repository under: <code>geronimo/rmi-naming</code>.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing6"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>geronimo-service.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;environment&gt;
  &lt;moduleId&gt;
    &lt;groupId&gt;mysample&lt;/groupId&gt;
    &lt;artifactId&gt;SimpleServletMonitor&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;type&gt;car&lt;/type&gt;
  &lt;/moduleId&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;geronimo&lt;/groupId&gt;
      &lt;artifactId&gt;rmi-naming&lt;/artifactId&gt;
      &lt;type&gt;car&lt;/type&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/environment&gt;
]]></script>
</div></div>

<h4 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-The``gbean''part:">The ``gbean'' part:</h4>

<p>First you have to define the name of the GBean and the exact class name as XML attributes of the element <code>&lt;gbean&gt;</code> (see Listing: <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing7">#Listing7</a>).<br clear="none">
Then you define all the references and attributes, which should be injected during deployment.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing7"></span></p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>geronimo-service.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;gbean name=&quot;ServletMonitorGBean&quot; class=&quot;de.hsfurtwangen.informatik.ServletMonitorGBean&quot;&gt;
  &lt;reference name=&quot;MBeanServerReference&quot;&gt;
    &lt;name&gt;MBeanServerReference&lt;/name&gt;
  &lt;/reference&gt;
  &lt;attribute name=&quot;servletName1&quot; type=&quot;java.lang.String&quot;&gt;
    Geronimo:j2eeType=Servlet,name=ServletStatistic,WebModule=//localhost/mysample,J2EEApplication=none,J2EEServer=none
  &lt;/attribute&gt;
  &lt;attribute name=&quot;servletName2&quot; type=&quot;java.lang.String&quot;&gt;
    Geronimo:j2eeType=Servlet,name=ServletData,WebModule=//localhost/mysample,J2EEApplication=none,J2EEServer=none
  &lt;/attribute&gt;
  &lt;attribute name=&quot;servletName3&quot; type=&quot;java.lang.String&quot;&gt;
    Geronimo:j2eeType=Servlet,name=ServletSystemTime,WebModule=//localhost/mysample,J2EEApplication=none,J2EEServer=none
  &lt;/attribute&gt;
&lt;/gbean&gt;
]]></script>
</div></div>
<p>As seen in our example above (Listing: <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing7">#Listing7</a>), the following parameters are injected by constructor injection of the Geronimo framework:</p>
<ul><li>MBeanServerReference: The corresponding source code in the GBean class is: <code>GBeanInfoBuilder.addReference("MBeanServerReference",MBeanServerReference.class)</code></li><li>servleteName1: The corresponding source code in the GBean class is: <code>GBeanInfoBuilder.addAttribute("servletName1",String.class)</code></li><li>servletName2: The corresponding source code in the GBean class is: <code>GBeanInfoBuilder.addAttribute("servletName2",String.class)</code></li><li>servletName3: The corresponding source code in the GBean class is: <code>GBeanInfoBuilder.addAttribute("servletName3",String.class)</code></li></ul>


<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TestingtheMonitorComponent">Testing the Monitor Component</h2>


<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-AccessingGeronimousingJConsole">Accessing Geronimo using JConsole</h3>

<p>We want to use JConsole <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html</a>, <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html</a>, which is a JMX-compliant GUI tool that connects to a running JVM. If the <code>JAVA_HOME</code> environment variable is set to a JDK 5.0, you only have to type in:</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-JConsole"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleConnect.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleConnect.jpg?version=1&amp;modificationDate=1170270450000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3582" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleConnect.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">
To connect to your Geronimo server you have to use the following settings in your JConsole (see Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-JConsole">#JConsole</a>):</p>
<ul><li><strong>JMX URL:</strong> <code>service:jmx:rmi:///jndi/rmi://localhost:1099/JMXConnector</code></li><li><strong>User Name:</strong> <code>system</code></li><li><strong>Password:</strong> <code>manager</code></li></ul>


<p>After the management client is connected to Geronimo you switch to the MBean view (see Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">#Servlet MBean view</a>) and navigate to one of the deployed servlets, e.g. <code>ServletStatistic</code> (1st and 2nd figure of Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">#Servlet MBean view</a>).</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleMBeans1.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleMBeans1.jpg?version=1&amp;modificationDate=1170270782000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3583" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleMBeans1.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleMBeans2.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleMBeans2.jpg?version=1&amp;modificationDate=1170272169000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3584" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleMBeans2.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleServletStatistic.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleServletStatistic.jpg?version=1&amp;modificationDate=1170272197000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3585" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleServletStatistic.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span></p>

<p>One interesting information is the object name (3rd figure of Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">#Servlet MBean view</a>)) that is used in the deployment descriptor for Geronimo's GBean deployment plan (see section <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeploymentPlansforGeronimo'sGBeans">#Deployment Plans for Geronimo's GBeans</a>).</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-InteractingwiththeMonitorComponent"></span></p>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-InteractingwiththeMonitorComponent:ServletMonitorGBean">Interacting with the Monitor Component: ServletMonitorGBean</h3>

<p>First, navigate to the GBean (see Fig. <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GBeanOperations">#GBean Operations</a>). Then you switch to the operations view. Now you have access to all the methods you defined in the GBean with \verb+GBeanInfoBuilder+. Let's start the process by calculating the average processing time of the 3 servlets. Just click on \verb+startCalcAverage()+ and you can see in the \verb+GERONIMO_HOME/var/log/geronimo.out+ file that the averages are calculated. Now reload the servlets several times, so that you can see changes in the output. You could also change the update time for the information polling of the servlets. Click first on \verb+parameter0+ and set the value to 5000 and then on \verb+defineUpdateInterval+. Now every 5s the data is collected from the servlets.<br clear="none">
Play around and have fun.</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GBeanOperations"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleMBeanView.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleMBeanView.jpg?version=1&amp;modificationDate=1170272471000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3586" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleMBeanView.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span></p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Conclusion">Conclusion</h1>

<p>An overview of the used technologies, Geronimo's GBeans and JMX has been given. You should now have an idea how to develop and deploy a monitor component inside Geronimo application server and how to improve the monitoring. The developed example shows a server's ability to do its own monitoring and application specific alarming. There are a lot more possibilities what can be done. For example a server could monitor the number of servlet requests and if there are more then, e.g. 20 per seconds, there might be a denial of service attack. Analyze the monitored data inside the server and optimize Geronimo's configuration, e.g. thread pool size. etc.</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-References">References</h1>

<ul><li>Sun's java management extensions (JMX) page. <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a>.</li><li>JConsole reference. <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html</a>.</li><li>JConsole manual. <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html</a>.</li><li>JSR-77: J2EE management specification. <a shape="rect" class="external-link" href="http://jcp.org/en/jsr/detail?id=77" rel="nofollow">http://jcp.org/en/jsr/detail?id=77</a>.</li><li>Apache home page. <a shape="rect" class="external-link" href="http://www.apache.org/">http://www.apache.org/</a>.</li><li>Tomcat home page. <a shape="rect" class="external-link" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a>.</li><li>OpenEJB home page. <a shape="rect" class="external-link" href="http://incubator.apache.org/openejb/">http://incubator.apache.org/openejb/</a>.</li><li>Martin Fowler; <em>Inversion of control containers and the dependency injection pattern.</em>; <a shape="rect" class="external-link" href="http://www.martinfowler.com/articles/injection.html" rel="nofollow">http://www.martinfowler.com/articles/injection.html</a>;  January; 2004.</li><li>Niel Frod; <em>Dependency injection in apache geronimo, part 1: A new way to look at decoupling in j2ee applications.</em>; <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc1/" rel="nofollow">http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc1/</a>; February; 2006.</li><li>Niel Frod; <em>Dependency injection in apache geronimo, part 2: The next generation.</em>; <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc2/" rel="nofollow">http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc2/</a>; February; 2006.</li></ul></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Apache Geronimo With A Monitor Component (JMX and JConsole)';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2011, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>
