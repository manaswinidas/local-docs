<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Lock granularity">
<meta name="abstract" content="Derby can be configured for table-level locking. With table-level locking, when a transaction locks data in order to prevent any transaction anomalies, it always locks the entire table, not just those rows being accessed.">
<meta name="description" content="Derby can be configured for table-level locking. With table-level locking, when a transaction locks data in order to prevent any transaction anomalies, it always locks the entire table, not just those rows being accessed.">
<meta name="DC.subject" content="Lock granularity, Locking, table-level, row-level">
<meta name="keywords" content="Lock granularity, Locking, table-level, row-level">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts15366.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts22300.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts36402.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts28436.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts30291.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevconcepts23810">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>锁粒度</title>
</head>
<body id="cdevconcepts23810" ><a name="cdevconcepts23810"><!-- --></a>


<h1 class="topictitle1">锁粒度</h1>



<div><p>可以将<span>Derby</span>配置为<em>表级</em>锁定。使用表级锁定，当事务锁定数据以防止任何事务异常时，它将始终锁定整个表，而不仅仅是被访问的那些行。</p>

<p>默认情况下， <span>Derby</span>配置为行级锁定。行级锁定使用更多的内存，但允许更大的并发性，这在多用户系统中效果更好。表级锁定最适合单用户应用程序或只读应用程序。</p>

<p>通常，您为整个<span>Derby</span>系统设置锁定粒度，而不是为特定应用程序设置。但是，在运行时，出于性能原因， <span>Derby</span>可能会将特定事务的锁粒度从行级锁定升级到表级锁定。您可以控制发生这种情况的阈值。有关关闭行级锁定的信息，请参见《 <span><em>Derby参考手册</em></span> 》中的“ <em>derby.storage.rowLocking</em> ”。有关自动锁升级的更多信息，请参见<span><em>Tuning Derby中的</em></span> “关于系统对锁粒度的选择”和“基于事务的锁升级”。有关调整您的<span>德比</span>系统的更多信息，请参阅<span><em>调整德比</em></span> “调整数据库和应用程序，”也。</p>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevconcepts30291.html" title="本节讨论与多用户系统相关的主题，在这些主题中，并发很重要。">锁定，并发和隔离</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevconcepts15366.html" title="Derby提供了四个事务隔离级别。通过设置连接的事务隔离级别，用户可以指定将用户的事务与其他事务隔离的严重程度。">隔离级别和并发</a></div>
<div><a href="cdevconcepts22300.html" title="如果连接未指定其隔离级别，则它将继承Derby系统的默认隔离级别。默认值为CS。">配置隔离级别</a></div>
<div><a href="cdevconcepts36402.html" title="Derby系统中有几种类型的锁，包括排他锁，共享锁和更新锁。">Derby系统中锁的类型和范围</a></div>
<div><a href="cdevconcepts28436.html" title="在数据库中，死锁是指两个或两个以上的事务正在等待彼此放弃锁的情况。">死锁</a></div>
</div>
</div>

</body>
</html>