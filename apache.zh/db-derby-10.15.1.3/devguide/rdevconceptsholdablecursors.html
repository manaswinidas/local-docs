<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Holdable result sets">
<meta name="abstract" content="The holdable result set feature permits an application to keep result sets open after implicit or explicit commits. By default, the cursor controlled by the result set is held open after a commit.">
<meta name="description" content="The holdable result set feature permits an application to keep result sets open after implicit or explicit commits. By default, the cursor controlled by the result set is held open after a commit.">
<meta name="DC.subject" content="Cursors, holdable">
<meta name="keywords" content="Cursors, holdable">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts838850.html">
<meta name="DC.Relation" scheme="URI" content="rdevconcepts88082.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts28351.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts23987.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts22641.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts41275.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts840995.html">
<meta name="DC.Relation" scheme="URI" content="rdevconcepts1119.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rdevconceptsholdablecursors">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>可保存的结果集</title>
</head>
<body id="rdevconceptsholdablecursors" ><a name="rdevconceptsholdablecursors"><!-- --></a>


<h1 class="topictitle1">可保存的结果集</h1>



<div><p>可保留的结果集功能允许应用程序在隐式或显式提交后使结果集保持打开状态。默认情况下，由结果集控制的游标在提交后保持打开状态。</p>

<div class="section"> <div class="note"><span class="notetitle">注意：</span> <span>Derby</span>还支持不可保留的结果集。</div>

</div>

<div class="section"><p>创建语句时，可以指定在发生提交时将自动关闭结果集。事务中止时，无论是否已指定将结果集保持打开状态，结果集都会自动关闭。</p>
</div>

<div class="section"><p>要指定在提交之后是否应将结果集保持打开状态，请为以下项提供以下<em>ResultSet</em>参数之一： <samp class="codeph"><em>Connection</em></samp>方法<samp class="codeph"><em>createStatement</em></samp> ， <samp class="codeph"><em>prepareStatement</em></samp> ， 要么<samp class="codeph"><em>prepareCall</em></samp> ：</p>
</div>

<div class="section"> 
<ul>
<li><em><em>CLOSE_CURSORS_AT_COMMIT</em></em>   <p>当执行隐式或显式提交时，结果集将关闭。</p>
</li>

<li><em><em>HOLD_CURSORS_OVER_COMMIT</em></em>   <p>执行隐式或显式提交时，结果集保持打开状态。这是默认行为。</p>
</li>

</ul>
</div>

<div class="section"><p><em>Statement.getResultSetHoldability（）</em>方法指示提交时，Statement对象生成的结果集是保持打开还是关闭。有关更多信息，请参见《 <cite><span><em>Derby参考手册</em></span></cite> 》。</p>
</div>

<div class="section"><p>发生隐式或显式提交时，保持游标打开的结果集的行为如下：</p>
</div>

<div class="section"> <ul>
<li>开放结果集保持开放状态。不可滚动的结果集位于结果集的下一个逻辑行之前。可滚动的不敏感结果集保持其当前位置。</li>

<li>会话终止后，结果集将关闭并销毁。</li>

<li>释放所有锁，包括保护当前光标位置的锁。</li>

<li>对于不可滚动的结果集，在提交后立即可以对<em>ResultSet</em>对象执行的唯一有效操作是：<ul>
<li>将结果集定位到下一行<samp class="codeph"><em>ResultSet.next()</em></samp> 。</li>

<li>用关闭结果集<samp class="codeph"><em>ResultSet.close()</em></samp> 。</li>

</ul>
</li>

</ul>
</div>

<div class="section"><div class="p">当发生回滚或回滚到保存点时，无论是显式的还是隐式的，都会发生以下行为：<ul>
<li>关闭所有打开的结果集。</li>

<li>在工作单元期间获取的所有锁都将释放。</li>

</ul>
</div>
</div>

<div class="section"> <div class="note"><span class="notetitle">注意：可</span>保留的结果集不适用于<span>Derby中的</span> XA事务。使用XA事务时，应在具有可保留性的情况下打开结果集<samp class="codeph">ResultSet.CLOSE_CURSORS_AT_COMMIT</samp> 。</div>
</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="cdevconcepts840995.html">可保存的结果集和自动提交</a></strong><br>启用自动提交后，定位的更新或删除语句将自动导致提交事务。</li>
<li class="ulchildlink"><strong><a href="rdevconcepts1119.html">非保留结果集示例</a></strong><br>以下示例使用Connection.createStatement返回执行提交后将关闭的ResultSet。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevconcepts41275.html" title="结果集维护一个游标，该游标指向其当前数据行。它可以用来一步一步地处理行。">结果集和游标机制</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevconcepts838850.html" title="禁用自动提交后，可以使用Connection对象的commit和rollback方法来提交或回滚事务。">禁用自动提交时的事务</a></div>
<div><a href="cdevconcepts28351.html" title="可以使用结果集更新方法（updateRow（），deleteRow（）和insertRow（））或使用定位的更新或删除查询来更新Derby中的可更新结果集。">可更新的结果集</a></div>
<div><a href="cdevconcepts23987.html" title="除了与可保留游标相关联的结果集之外，发出提交将导致连接上的所有结果集都被关闭。">结果集和自动提交</a></div>
<div><a href="cdevconcepts22641.html" title="JDBC提供了两种类型的结果集，它们允许您在任一方向上滚动或将光标移动到特定行。Derby支持以下类型之一：可滚动的不敏感结果集（ResultSet。TYPE_SCROLL_INSENSITIVE）。">可滚动的结果集</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rdevconcepts88082.html" title="此示例摘自一个示例JDBC应用程序，该应用程序使用简单的SELECT语句生成结果集，然后处理行。">简单的不可更新结果集</a></div>
</div>
</div>



</body></html>