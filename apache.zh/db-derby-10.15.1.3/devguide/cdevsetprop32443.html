<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Properties case study">
<meta name="abstract" content="Derby allows you a lot of freedom in configuring your system. This freedom can be confusing if you do not understand how properties work. You also have the option of not setting any properties and instead using the Derby defaults, which are tuned for a single-user embedded system.">
<meta name="description" content="Derby allows you a lot of freedom in configuring your system. This freedom can be confusing if you do not understand how properties work. You also have the option of not setting any properties and instead using the Derby defaults, which are tuned for a single-user embedded system.">
<meta name="DC.subject" content="properties, implications of having various ways to set">
<meta name="keywords" content="properties, implications of having various ways to set">
<meta name="DC.Relation" scheme="URI" content="cdevsetprop34818.html">
<meta name="DC.Relation" scheme="URI" content="cdevsetprop11108.html">
<meta name="DC.Relation" scheme="URI" content="cdevsetprop24222.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevsetprop32443">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>属性案例研究</title>
</head>
<body id="cdevsetprop32443" ><a name="cdevsetprop32443"><!-- --></a>


<h1 class="topictitle1">属性案例研究</h1>



<div><p><span>Derby</span>使您在配置系统时有很大的自由度。如果您不了解属性的工作原理，那么这种自由可能会造成混淆。您还可以选择不设置任何属性，而是使用针对单个用户嵌入式系统调整的<span>Derby</span>默认设置。</p>

<p>想象一下嵌入式环境的以下情形：</p>

<p>您的系统在您创建的系统目录中有一个<em>derby.properties</em>文件，这是一个文本文件，并将其命名为<em>system_directory</em> 。您的数据库也已在此目录中创建。该属性文件设置以下属性：</p>

<pre><strong>derby.storage.pageSize=8192</strong></pre>

<div class="p">启动应用程序，确保正确设置<em>derby.system.home</em>属性：<pre><strong>java -Dderby.system.home=c:\system_directory MyApp</strong></pre>

</div>

<p>本示例中的命令行假定您使用的是Windows系统。</p>

<div class="p">然后，您创建一个新表：<pre><strong>CREATE TABLE table1 (a INT, b VARCHAR(10))</strong></pre>
</div>

<p><span>Derby</span>从<em>derby.properties</em>文件中设置的系统范围内的属性中获取8192的页面大小，因为尚未以其他任何方式设置该属性。</p>

<p>关闭并重新启动应用程序，以编程方式将<em>derby.storage.pageSize</em>的值设置为4096，作为JVM命令行的参数：</p>

<pre><strong>java -Dderby.system.home=c:\system_directory 
    -Dderby.storage.pageSize=4096 MyApp

CREATE TABLE anothertable (a INT, b VARCHAR(10))</strong></pre>

<p><em>anothertable</em>表的页面大小将为4096字节。</p>

<div class="p">您建立与数据库的连接，并将所有新表的页面大小值设置为32768作为数据库范围的属性：<pre><strong>CallableStatement cs = 
  conn.prepareCall("CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY(?, ?)"); 
cs.setString(1, "derby.storage.pageSize"); 
cs.setString(2, "32768"); 
cs.execute(); 
cs.close(); 
</strong></pre>
</div>

<p>然后，您创建一个新表，该表自动继承该属性设置的页面大小：</p>

<pre><strong>CREATE TABLE table2 (a INT, b VARCHAR(10))</strong></pre>

<p><em>table2</em>表的页面大小为32768字节。</p>

<div class="p">您关闭了应用程序，然后重新启动，这次忘记了以编程方式设置系统范围的属性（作为JVM的命令行选项）：<pre><strong>java -Dderby.system.home=c:\system_directory MyApp</strong></pre>

</div>

<div class="p">然后，您创建另一个表：<pre><strong>CREATE TABLE table4 (a INT, b VARCHAR(10))</strong></pre>
</div>

<p><span>德比</span>使用的32768持久数据库范围内的属性此表，因为在前一交易日的数据库范围的属性集是持久性的，并覆盖在<em>derby.properties</em>文件系统级特性集。</p>

<p>您所遇到的情况是，即使<em>derby.properties</em>文件保持不变，三个不同的表每个也具有不同的页面大小。</p>

<p>如果从系统中删除<em>derby.properties</em>文件或从其当前位置删除数据库（忘记随文件一起移动文件），则可以为新表获得另一个值。</p>

<p>为避免这种情况，请设置属性的方式保持一致。</p>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevsetprop34818.html" title="本节介绍如何使用Derby属性。">使用Derby属性</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevsetprop11108.html" title="通过Derby，您可以通过使用属性来配置系统，特定数据库或特定集团（表或索引）的行为或属性。">属性概述</a></div>
<div><a href="cdevsetprop24222.html" title="本节介绍设置属性的不同方法。">设置Derby属性</a></div>
</div>
</div>



</body></html>