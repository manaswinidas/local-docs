<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Transactions when auto-commit is disabled">
<meta name="abstract" content="When auto-commit is disabled, you use a Connection object's commit and rollback methods to commit or roll back a transaction.">
<meta name="description" content="When auto-commit is disabled, you use a Connection object's commit and rollback methods to commit or roll back a transaction.">
<meta name="DC.subject" content="Auto-commit, and transactions">
<meta name="keywords" content="Auto-commit, and transactions">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts29416.html">
<meta name="DC.Relation" scheme="URI" content="tdevconcepts839040.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts839085.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts14433.html">
<meta name="DC.Relation" scheme="URI" content="rdevconceptsholdablecursors.html">
<meta name="DC.Relation" scheme="URI" content="cdevconceptssavepoints.html">
<meta name="DC.Relation" scheme="URI" content="cdevconcepts19173.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevconcepts838850">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>禁用自动提交时的事务</title>
</head>
<body id="cdevconcepts838850" ><a name="cdevconcepts838850"><!-- --></a>


<h1 class="topictitle1">禁用自动提交时的事务</h1>



<div><p>禁用自动提交后，您可以使用<em>Connection</em>对象的<samp class="codeph"><em>commit</em></samp>和<samp class="codeph"><em>rollback</em></samp>提交或回滚事务的方法。</p>

<p>的<samp class="codeph"><em>commit</em></samp>方法使事务产生的更改永久生效并释放锁。的<samp class="codeph"><em>rollback</em></samp>方法撤消由事务引起的所有更改并释放锁。事务包含针对单个执行的所有SQL语句<samp class="codeph"><em>Connection</em></samp>自上次以来的对象<samp class="codeph"><em>commit</em></samp>要么<samp class="codeph"><em>rollback</em></samp> 。</p>

<p>您无需显式开始事务。在禁用自动提交，更改隔离级别或调用后，您隐式结束了一个事务并开始了一个新事务<samp class="codeph"><em>commit</em></samp>要么<samp class="codeph"><em>rollback</em></samp> 。</p>

<p>提交交易也会关闭所有交易<samp class="codeph"><em>ResultSet</em></samp>不包括的对象<samp class="codeph"><em>ResultSet</em></samp>与具有可保留性的游标关联的对象<samp class="codeph">true</samp> 。游标的默认可保存性是<samp class="codeph">true</samp>和<samp class="codeph"><em>ResultSet</em></samp>与它们关联的对象需要显式关闭。提交不会关闭这样的<samp class="codeph"><em>ResultSet</em></samp>对象。它还会释放当前由数据库管理员持有的所有数据库锁。 <samp class="codeph"><em>Connection</em></samp> ，无论这些对象是否在不同的线程中创建。</p>

<p>在提交时将检查任何未解决的延迟约束违规问题，因此对<samp class="codeph"><em>Connection.commit</em></samp>可能会引发异常。有关可延期约束的信息，请参见《 <span><em>Derby参考手册</em></span> 》中的“ CONSTRAINT子句”。</p>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevconcepts19173.html" title="事务是一组一个或多个SQL语句的集合，它们构成一个逻辑工作单元，您可以提交或回滚该逻辑工作单元，并且在系统发生故障时可以将其恢复。">事务</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevconcepts29416.html" title="默认情况下，JDBC标准指定，与Derby数据库的新连接处于自动提交模式。">使用自动提交</a></div>
<div><a href="cdevconcepts839085.html" title="除非不再在try-with-resources语句中声明它们，否则应不再需要它们时显式关闭Statements，ResultSets和Connections。">明确关闭语句，结果集和连接</a></div>
<div><a href="cdevconcepts14433.html" title="当SQL语句生成异常时，此异常导致运行时回滚。运行时回滚是Derby生成的系统对语句或事务的回滚，与应用程序中的显式回滚调用不同。">语句与事务运行时回滚</a></div>
<div><a href="cdevconceptssavepoints.html" title="Savepoint接口包含用于将事务设置，释放或回滚到指定保存点的方法。设置保存点后，可以将事务回滚到该保存点，而不会影响之前的工作。保存点通过标记事务中的中间点来提供更细粒度的事务控制。">使用保存点</a></div>
</div>
<div class="reltasks"><strong>相关任务</strong><br>
<div><a href="tdevconcepts839040.html" title="您可以使用Connection类的setAutoCommit方法禁用自动提交。">关闭自动提交</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rdevconceptsholdablecursors.html" title="可保留的结果集功能允许应用程序在隐式或显式提交后使结果集保持打开状态。默认情况下，由结果集控制的游标在提交后保持打开状态。">可保存的结果集</a></div>
</div>
</div>



</body></html>