<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Database-side JDBC routines and nested connections">
<meta name="abstract" content="Most database-side JDBC routines need to share the same transaction space as the statements that called them.">
<meta name="description" content="Most database-side JDBC routines need to share the same transaction space as the statements that called them.">
<meta name="DC.subject" content="Nested connections, getting, Database-side JDBC routines, using nested connections">
<meta name="keywords" content="Nested connections, getting, Database-side JDBC routines, using nested connections">
<meta name="DC.Relation" scheme="URI" content="cdevspecial16181.html">
<meta name="DC.Relation" scheme="URI" content="cdevspecial41728.html">
<meta name="DC.Relation" scheme="URI" content="cdevspecial45786.html">
<meta name="DC.Relation" scheme="URI" content="cdevspecial42117.html">
<meta name="DC.Relation" scheme="URI" content="cdevspecial28907.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevspecial29620">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>数据库端JDBC例程和嵌套连接</title>
</head>
<body id="cdevspecial29620" ><a name="cdevspecial29620"><!-- --></a>


<h1 class="topictitle1">数据库端JDBC例程和嵌套连接</h1>



<div><p>大多数数据库端JDBC例程需要与调用它们的语句共享相同的事务空间。</p>

<p>原因如下：</p>

<ul>
<li>避免阻塞和死锁</li>

<li>确保从例程内部完成的任何更新对于外部事务都是原子的</li>

</ul>

<p>为了使用相同的事务，该例程必须使用与执行该例程的父SQL语句相同的连接。以这种方式重复使用的<em>连接</em>称为<em>嵌套连接</em> 。</p>

<p>使用连接URL <em>jdbc：default：connection</em>重用当前的<em>Connection</em> 。</p>

<p>数据库连接URL <em>jdbc：default：connection</em>允许Java方法获取调用它的SQL语句的<em>Connection</em> 。这是获取嵌套连接对象的标准（SQL标准，第13部分，SQL例程和Java）机制。该方法将获得一个<em>Connection</em> ，如下所示：</p>

<pre>Connection conn = DriverManager.getConnection(
    "jdbc:default:connection");</pre>

<p>URL属性不支持作为此连接URL的一部分。传递给<em>java.sql的Properties对象，用户名或密码中指定的任何URL属性<em>。DriverManager.getConnection（）</em>调用将被忽略。</em></p><em>

<p>不需要在数据库端例程中加载JDBC驱动程序。</p>

</em></div><em>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="cdevspecial28907.html">使用嵌套连接的数据库端JDBC例程的要求</a></strong><br>为了保留事务原子性，使用嵌套连接的数据库端JDBC例程具有以下限制。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：对</strong> <a href="cdevspecial42117.html" title="在应用程序内调用的方法称为应用程序端方法。在Derby中调用的方法称为数据库端例程。">数据库端JDBC例程进行编程</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevspecial16181.html" title="数据库端JDBC例程可以创建一个新连接，而不是使用嵌套连接。在例程中执行的语句将是不同事务的一部分，因此可以发出提交和回滚。">使用非嵌套连接的数据库端JDBC例程</a></div>
<div><a href="cdevspecial41728.html" title="可以对数据库端例程（如应用程序端方法）进行编码，以捕获SQLException。例程中捕获的SQLException从调用应用程序代码中隐藏。">数据库端JDBC例程和SQLException</a></div>
<div><a href="cdevspecial45786.html" title="当数据库端方法的执行引发错误时，Derby将该异常包装在SQLState为38000的SQLException中。">用户定义的SQLException</a></div>
</div>
</div>



</em></body></html>