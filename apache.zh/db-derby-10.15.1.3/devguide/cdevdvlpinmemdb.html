<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Using in-memory databases">
<meta name="abstract" content="For testing and developing applications, or for processing transient or reproducible data, you can use Derby's in-memory database facility.">
<meta name="description" content="For testing and developing applications, or for processing transient or reproducible data, you can use Derby's in-memory database facility.">
<meta name="DC.subject" content="in-memory databases, databases, in-memory">
<meta name="keywords" content="in-memory databases, databases, in-memory">
<meta name="DC.Relation" scheme="URI" content="cdevdvlp19524.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevdvlpinmemdb">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>使用内存数据库</title>
</head>
<body id="cdevdvlpinmemdb" ><a name="cdevdvlpinmemdb"><!-- --></a>


<h1 class="topictitle1">使用内存数据库</h1>



<div><p>为了测试和开发应用程序，或处理瞬态或可再现的数据，可以使用<span>Derby</span>的内存数据库工具。</p>

<p>内存数据库完全位于主内存中，而不位于文件系统中。当您想要创建和丢弃将不再使用的数据库时，它对于测试和开发应用程序很有用。当您只需要处理临时或可复制的数据时，它也很有用。</p>

<p>如果您有所需的可用内存，则还可以受益于更快的处理速度（无磁盘I / O）以及不必显式删除已完成的数据库的简便性。</p>

<div class="section"><h2 class="sectiontitle">创建一个内存数据库</h2>
<p>要创建内存数据库，请指定<samp class="codeph">memory</samp>作为JDBC子协议。例如，创建一个名为的内存数据库<samp class="codeph">myDB</samp>使用嵌入式驱动程序，使用以下连接URL：</p>

<pre>jdbc:derby:memory:myDB;create=true</pre>

<p>对于网络客户端驱动程序，请使用以下连接URL。因为客户端驱动程序不了解<samp class="codeph">memory</samp>子协议，您必须将其包括在数据库名称中：</p>

<pre>jdbc:derby://<em>myhost</em>:1527/memory:myDB;create=true</pre>

<p>请注意指定一个冒号（ <samp class="codeph">:</samp> ）之后<samp class="codeph">memory</samp> 。</p>

</div>

<div class="section"><h2 class="sectiontitle">引用内存数据库</h2>
<p>当您创建或引用内存数据库时，任何非绝对路径都将被解释为相对于系统目录，就像文件系统数据库一样。例如，如果系统目录是<samp class="codeph">C:\myderby</samp> ，以下路径被视为等效：</p>

<pre>jdbc:derby:memory:db
jdbc:derby:memory:C:\myderby\db</pre>

<p>同样， <span>Derby</span>将以下URL视为同一内存数据库的名称：</p>

<pre>jdbc:derby:memory:/home/myname/db
jdbc:derby:memory:/home/myname/../myname/db</pre>

<p><a href="cdevdvlp40350.html#cdevdvlp40350">指定数据库路径名的约定</a>具有有关数据库路径的更多信息。</p>

</div>

<div class="section"><h2 class="sectiontitle">使用内存数据库</h2>
<p>使用内存数据库时，需要确保配置堆和<span>Derby</span>页面缓存大小。有关详细信息，请参见<span><em>Tuning Derby中的</em></span> “配置<span>Derby</span>以使用内存数据库”。</p>

<p>有关如何使用内存数据库的示例，请参见<samp class="codeph">ij</samp> 《 <span><em>Derby工具和实用程序指南》</em></span> （ <samp class="codeph">execute</samp>和<samp class="codeph">async</samp> ， 例如）。</p>

</div>

<div class="section"><h2 class="sectiontitle">删除内存数据库</h2>
<p>要删除内存数据库，请使用连接URL属性<em>drop</em> ，如下所示：</p>

<pre>jdbc:derby:memory:myDB;drop=true</pre>

<pre>jdbc:derby://<em>myhost</em>:1527/memory:myDB;drop=true</pre>

<p>您可以在删除数据库之前使用<em>shutdown = true</em>属性<em>关闭</em>内存中的数据库，但这是可选的。删除数据库也会执行关闭。</p>

<p>当您删除数据库时， <span>Derby</span>发出似乎是错误的消息，但实际上是成功的指示。您需要捕获错误08006，如<span><em>Derby入门</em></span>中的“ WwdEmbedded程序”中所述。</p>

<p>如果同时启用了用户身份验证和SQL授权，则只有数据库所有者才能删除数据库。（有关身份验证和授权的详细信息，请参阅《 <span><em>Derby安全指南》</em></span> 。）</p>

<p>如果发生以下任何情况，则会自动删除内存数据库：</p>

<ul>
<li>Java虚拟机（JVM）正常关闭（例如，如果退出<samp class="codeph">ij</samp>工具）</li>

<li>JVM崩溃</li>

<li>您正在运行的计算机崩溃或关闭</li>

</ul>

</div>

<div class="section"><h2 class="sectiontitle">保留内存数据库</h2>
<p>如果创建内存数据库，然后又决定要保留它，则可以使用备份系统过程之一（例如，SYSCS_UTIL.SYSCS_BACKUP_DATABASE）来持久化该数据库。然后，您可以稍后将其作为内存数据库启动，或将其用作普通文件系统数据库。有关使用备份过程的信息，请参见《 <span><em>Derby Server和管理指南</em></span> 》中的“备份和还原数据库”。</p>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevdvlp19524.html" title="本节描述核心Derby功能。此外，它详细介绍了最基本的Derby部署，即Java应用程序中嵌入的Derby。">JDBC应用程序和Derby基础</a></div>
</div>
</div>



</body></html>