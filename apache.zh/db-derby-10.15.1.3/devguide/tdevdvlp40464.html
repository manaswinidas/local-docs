<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Shutting down Derby or an individual database">
<meta name="abstract" content="Applications in an embedded environment shut down the Derby system by specifying the shutdown=true attribute in the connection URL. To shut down the system, you do not specify a database name, and you do not ordinarily specify any other attribute.">
<meta name="description" content="Applications in an embedded environment shut down the Derby system by specifying the shutdown=true attribute in the connection URL. To shut down the system, you do not specify a database name, and you do not ordinarily specify any other attribute.">
<meta name="DC.subject" content="Shutting down a single database, Shutting down Derby, using database connection URL attribute, Databases, shutting down individually">
<meta name="keywords" content="Shutting down a single database, Shutting down Derby, using database connection URL attribute, Databases, shutting down individually">
<meta name="DC.Relation" scheme="URI" content="cdevdvlp845973.html">
<meta name="DC.Relation" scheme="URI" content="rdevdvlp847152.html">
<meta name="DC.Relation" scheme="URI" content="tdevdeploy26887.html">
<meta name="DC.Relation" scheme="URI" content="cdevdvlp51654.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="tdevdvlp40464">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>关闭Derby或单个数据库</title>
</head>
<body id="tdevdvlp40464" ><a name="tdevdvlp40464"><!-- --></a>


<h1 class="topictitle1">关闭Derby或单个数据库</h1>



<div><p>嵌入式环境中的应用程序通过在连接URL中指定<em>shutdown = true</em>属性来<em>关闭</em> <span>Derby</span>系统。要关闭系统，您不指定数据库名称，并且通常不指定任何其他属性。</p>

<div class="section"> <pre>jdbc:derby:;<span>shutdown=true</span></pre>
<p>成功关闭将始终导致<em>SQLException，</em>以指示<span>Derby</span>已关闭并且没有其他异常。</p>

<p>如果在JDK 8或更高版本上与安全管理器一起运行，则必须授予<span>Derby</span>权限以注销嵌入式驱动程序，以完全关闭系统。有关详细信息，请参见《 <span><em>Derby安全指南</em></span> 》中的“配置Java安全性”。</p>

<p>如果在系统级别启用了用户身份验证，则需要指定凭据（即用户名和密码）以关闭<span>Derby</span>系统，并且还必须在系统级别定义提供的用户名和密码。</p>

<p>如果指定databaseName，则也可以关闭单个<em>数据库</em> 。如果指定默认连接而不是数据库名称，则可以关闭当前连接的数据库<em> </em> （在SQL语句内）。</p>
<pre><strong>// shutting down a database from your application</strong>
DriverManager.getConnection(
    "jdbc:derby:sample;shutdown=true");</pre>

<p>如果同时启用了用户身份验证和SQL授权，则只有数据库所有者才能关闭数据库。（有关身份验证和授权的详细信息，请参阅《 <span><em>Derby安全指南》</em></span> 。）</p>

<pre><strong>// shutting down an authenticated database as database owner</strong>
DriverManager.getConnection(
    "jdbc:derby:securesample;user=joeowner;password=secret;shutdown=true");</pre>

<p>如果您以前调用过<em>java.sql。在以下情况下，用于启用登录超时的DriverManager.setLoginTimeout</em>方法， <span>Derby</span>或单个数据库的关闭可能失败：</p>

<ul>
<li>网络问题减慢了LDAP身份验证的速度</li>

<li>重载的数据库需要很长时间才能停止</li>

</ul>

<div class="p">
<div class="attention"><span class="attentiontitle">注意：</span>好的做法是在关闭系统或数据库之前关闭现有连接。执行关机后，在关机前创建的连接将无法使用。关机后尝试访问连接可能会导致错误，包括<samp class="codeph">NullPointerException</samp>或违反协议。
</div>

</div>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevdvlp51654.html" title="您可以在Derby连接URL上指定属性。">使用数据库连接URL属性</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevdvlp845973.html" title="应用程序可以关闭Derby系统中的单个数据库，并使其余系统保持运行状态。">单个数据库关闭</a></div>
</div>
<div class="reltasks"><strong>相关任务</strong><br>
<div><a href="tdevdeploy26887.html" title="要创建在只读介质上使用的数据库，请执行以下步骤。">创建和准备数据库以供只读使用</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rdevdvlp847152.html" title="您可以在数据库连接URL上使用databaseName属性来指定要连接的数据库的路径名。">使用databaseName属性</a></div>
</div>
</div>



</body></html>