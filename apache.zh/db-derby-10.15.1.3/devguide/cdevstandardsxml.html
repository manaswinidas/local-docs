<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="XML data types and operators">
<meta name="abstract" content="Derby supports the XML data type and a set of operators that work with the XML data type, but does not provide JDBC support for the XML data type. The XML data type and operators are based on a small subset of the SQL/XML specification.">
<meta name="description" content="Derby supports the XML data type and a set of operators that work with the XML data type, but does not provide JDBC support for the XML data type. The XML data type and operators are based on a small subset of the SQL/XML specification.">
<meta name="DC.subject" content="SQL standards, XML data types and operators, XML data types, SQL standard, XML data types, limitations">
<meta name="keywords" content="SQL standards, XML data types and operators, XML data types, SQL standard, XML data types, limitations">
<meta name="DC.Relation" scheme="URI" content="cdevstandards806118.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevstandardsxml">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>XML数据类型和运算符</title>
</head>
<body id="cdevstandardsxml" ><a name="cdevstandardsxml"><!-- --></a>


<h1 class="topictitle1">XML数据类型和运算符</h1>



<div><p><span>Derby</span>支持XML数据类型和一组使用XML数据类型的运算符，但是不提供对XML数据类型的JDBC支持。XML数据类型和运算符基于SQL / XML规范的一小部分。</p>

<p>XML数据类型和运算符仅在SQL层中定义。</p>

<p>没有JDBC端对XML数据类型的支持。无法直接绑定到XML值或直接从结果集中检索XML值。而是必须通过将适当的XML运算符明确指定为SQL语句的一部分，以Java字符串或字符流的形式绑定和检索XML数据：</p>

<ul>
<li>创建带有XML数据类型列的表。例如：<pre>CREATE TABLE xml_data(xml_col XML);</pre>

</li>

<li>使用XMLPARSE运算符将数据绑定到XML值。例如：<pre>INSERT INTO xml_data(xml_col) 
  VALUES(XMLPARSE(DOCUMENT ' &lt;name&gt; Derby &lt;/name&gt;' PRESERVE WHITESPACE));</pre>

<div class="note"><span class="notetitle">注意：</span>您必须插入XML关键字DOCUMENT和PRESERVE WHITESPACE。实际的XML数据应在单引号内，并且值应在起始XML标记和终止XML标记内。</div>
                 
</li>

<li>使用XMLSERIALIZE运算符从结果集中检索XML值。例如：<pre>SELECT XMLSERIALIZE(xml_col AS CLOB) FROM xml_data;</pre>
 
<div class="note"><span class="notetitle">注意：</span>您也可以指定<samp class="codeph">xml_col AS VARCHAR(25)</samp> 。</div>
    
</li>

<li>使用从非XML列检索的非XML数据来创建XML片段。例如：<pre>     SELECT '&lt;my_self&gt;' ||     
     '&lt;name&gt;'|| my_name ||'&lt;/name&gt;' ||                 
     '&lt;age&gt;'|| TRIM(CHAR(my_age)) ||'&lt;/age&gt;'||                 
     '&lt;/my_self&gt;'                       
     FROM my_non_xml_table;</pre>

<div class="note"><span class="notetitle">注意：</span>这将导致XML片段，您必须将其插入XML文档。</div>

</li>
</ul>

<p>此外，XML数据类型不提供JDBC元数据支持。</p>

<p>在<a href="cdevstandards806118.html#cdevstandards806118">Derby和标准中</a>有关LONG数据类型的表达式部分中描述的任何子句或操作中都不允许使用XML数据类型。</p>

<p>为了使XML操作员正常工作， <span>Derby</span>要求Java虚拟机（JVM）具有<em>javax.xml.parsers的有效实现<em>。DocumentBuilderFactory</em>和<em>javax.xml.xpath。XPathFactory</em>类。所有受支持的JVM实现这些类。</em></p><em>

</em></div><em>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevstandards806118.html" title="Derby尽可能遵守SQL99或更高版本的标准。本节描述了Derby中当前不标准的那些功能。这些功能目前正在评估中，将来的版本中可能会删除。">Derby和标准</a></div>
</div>
</div>



</em></body></html>