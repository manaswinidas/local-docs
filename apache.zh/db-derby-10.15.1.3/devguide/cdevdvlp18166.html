<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Storage and recovery">
<meta name="abstract" content="A Derby database (unless it is an in-memory database) provides persistent storage and recovery. Derby ensures that all committed transactions are durable, even if the system fails, through the use of a database transaction log.">
<meta name="description" content="A Derby database (unless it is an in-memory database) provides persistent storage and recovery. Derby ensures that all committed transactions are durable, even if the system fails, through the use of a database transaction log.">
<meta name="DC.subject" content="Recovery, Start-up, description, Shutdown">
<meta name="keywords" content="Recovery, Start-up, description, Shutdown">
<meta name="DC.Relation" scheme="URI" content="cdevdvlp42173.html">
<meta name="DC.Relation" scheme="URI" content="cdevdvlp21955.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cdevdvlp18166">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>存储和恢复</title>
</head>
<body id="cdevdvlp18166" ><a name="cdevdvlp18166"><!-- --></a>


<h1 class="topictitle1">存储和恢复</h1>



<div><p><span>Derby</span>数据库（除非它是内存数据库）提供持久的存储和恢复。<span>Derby</span>通过使用数据库事务日志来确保所有提交的事务都是持久的，即使系统发生故障也是如此。</p>

<p>尽管可以在将插入，更新和删除操作写入磁盘之前先对其进行缓存，但是跟踪所有这些更改的日志条目从不缓存，而是在事务提交时始终被强制写入磁盘。如果系统或操作系统意外失败，则<span>Derby</span>下次启动时，它可以使用日志执行恢复，从日志中恢复“丢失”的事务并回滚未提交的事务。<em>恢复</em>可确保将系统发生故障时所有已提交的事务应用于数据库，并将所有活动的事务回滚。因此，数据库处于一致的有效状态。</p>

<p>在正常操作中， <span>Derby</span>通过定期检查点使日志较小。检查点标记了日志中不再有用的部分，将更改的页面写入磁盘，然后截断了日志。</p>

<p><span>Derby</span>在填充日志文件时对其进行检查。当发出关闭命令时，它还会检查日志。从<span>Derby</span>的角度来看，在没有发出正确的shutdown命令的情况下关闭运行<span>Derby</span>的JVM等效于系统故障。</p>

<p>引导数据库意味着<span>Derby</span>检查是否需要在数据库上运行恢复。恢复的成本可能很高，因此使用适当的shutdown命令可以提高连接或启动性能。</p>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cdevdvlp21955.html" title="Derby数据库包含字典对象，例如表，列，索引和jar文件。Derby数据库还可以存储自己的配置信息。">Derby数据库</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cdevdvlp42173.html" title="您可以通过指定Derby连接URL的属性来创建新数据库并访问现有数据库。">创建，删除和备份数据库</a></div>
</div>
</div>

</body>
</html>