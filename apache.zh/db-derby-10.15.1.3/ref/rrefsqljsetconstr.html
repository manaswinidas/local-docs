<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="SET CONSTRAINTS statement">
<meta name="abstract" content="The SET CONSTRAINTS statement sets the deferrability of one or more constraints.">
<meta name="description" content="The SET CONSTRAINTS statement sets the deferrability of one or more constraints.">
<meta name="DC.subject" content="SET CONSTRAINTS statement, SQL statements, SET CONSTRAINTS, constraints, setting deferrability">
<meta name="keywords" content="SET CONSTRAINTS statement, SQL statements, SET CONSTRAINTS, constraints, setting deferrability">
<meta name="DC.Relation" scheme="URI" content="crefsqlj35312.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj41180.html">
<meta name="DC.Relation" scheme="URI" content="rrefsetrole.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj32268.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefsqljsetconstr">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>SET CONSTRAINTS语句</title>
</head>
<body id="rrefsqljsetconstr" ><a name="rrefsqljsetconstr"><!-- --></a>


<h1 class="topictitle1">SET CONSTRAINTS语句</h1>



<div><p>SET CONSTRAINTS语句设置一个或多个约束的可延迟性。</p>

<div class="section">
<p>SET CONSTRAINTS语句允许您将一个或多个约束的约束模式设置为DEFERRED或IMMEDIATE。</p>

<p>当您使用该语句将约束从DEFERRED更改为IMMEDIATE时，将在执行该语句后立即检查该约束。</p>

<p>如果检查失败，则不会回滚事务；这里的错误仅构成语句级错误。因此，可以在尝试提交事务之前使用此语句检查是否满足所有约束。</p>

<p>SET CONSTRAINTS语句仅在事务结束（或发出另一个覆盖的SET CONSTRAINTS语句）之前更改约束的状态。事务结束后，约束将恢复为创建时为它声明的默认行为（使用CREATE TABLE或ALTER TABLE语句）。</p>

<p>有关可延期约束的更多信息，请参见<a href="rrefsqlj13590.html">CONSTRAINT子句</a>和<a href="rrefsqljconstrchar.html">constraintCharacteristics</a> 。</p>

<p>建议您在<a href="rrefsqlj42154.html">表级约束</a>上使用SET CONSTRAINTS。如果对<a href="rrefsqlj16095.html">列级约束</a>使用SET CONSTRAINTS，则需要通过对系统表执行查询来找到相应索引的名称，这很麻烦，并且需要其他不可移植的SQL。</p>

<div class="note"><span class="notetitle">注意：</span> SET CONSTRAINTS语句仅在数据库已完全升级到<span>Derby</span> Release 10.11或更高版本后才有效。（有关更多信息，请参阅《 <span><em>Derby开发人员指南</em></span> 》中的“升级数据库”。）在10.10或更低版本的数据库中，该语句没有任何意义。</div>

</div>

<div class="section"><h2 class="sectiontitle">句法</h2> 
<pre><strong>SET CONSTRAINTS <em>constraintNameList</em> { DEFERRED | IMMEDIATE }</strong></pre>

<p><em>constraintNameList</em>定义如下：</p>

<pre><strong>ALL | <em><a href="rrefconstraintname.html">constraintName</a></em> [ { , <em>constraintName</em> }... ]</strong></pre>

</div>

<div class="section"><h2 class="sectiontitle">运行时行为</h2>
<p>如果约束模式为DEFERRED，并且在提交时看到违规，则将引发异常，并回滚事务。</p>

<p>当您使用SET CONSTRAINTS将约束模式显式更改为IMMEDIATE时，将检查约束，但与在提交时检查约束的方式稍有不同：如果发现违规，则会引发语句级异常。您可以使用此行为在尝试提交之前验证是否已满足约束。</p>

<p>如果在进入存储的例程时约束模式为IMMEDIATE，并且该例程在嵌套连接中将约束模式更改为DEFERRED，则从例程返回时将检查所有受影响的约束。如果检查失败，则会引发异常，并回滚事务。</p>

<p>如果应用程序调用<em>XAResource.prepare（Xid）</em> ，则还将检查约束模式为DEFERRED的约束。如果存在冲突，则<span>Derby</span>引发<em>XAException。XA_RBINTEGRITY</em> ，并且XA事务被回滚。</p>

</div>

<div class="example"><h2 class="sectiontitle">例子</h2>
<pre><strong>SET CONSTRAINTS FOO DEFERRED;

SET CONSTRAINTS ALL DEFERRED;

SET CONSTRAINTS FOO, BAR IMMEDIATE;</strong></pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="crefsqlj35312.html" title="">SET语句</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rrefsqlj41180.html" title="SET ISOLATION语句更改用户连接的隔离级别。">SET ISOLATION语句</a></div>
<div><a href="rrefsetrole.html" title="SET ROLE语句为会话的当前SQL上下文设置当前角色。">SET ROLE语句</a></div>
<div><a href="rrefsqlj32268.html" title="SET SCHEMA语句将连接会话的默认模式设置为指定的模式。">SET SCHEMA语句</a></div>
</div>
</div>



</body></html>