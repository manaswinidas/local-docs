<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="XMLEXISTS operator">
<meta name="abstract" content="XMLEXISTS is an SQL/XML operator that you can use to query XML values in SQL.">
<meta name="description" content="XMLEXISTS is an SQL/XML operator that you can use to query XML values in SQL.">
<meta name="DC.subject" content="XMLEXISTS operator, operators, XMLEXISTS, XML, operators, XMLEXISTS">
<meta name="keywords" content="XMLEXISTS operator, operators, XMLEXISTS, XML, operators, XMLEXISTS">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj29026.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rreffuncxmlexists">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>XMLEXISTS运算符</title>
</head>
<body id="rreffuncxmlexists" ><a name="rreffuncxmlexists"><!-- --></a>


<h1 class="topictitle1">XMLEXISTS运算符</h1>



<div><p>XMLEXISTS是一个SQL / XML运算符，可用于查询SQL中的XML值。</p>

<div class="section"> <p>XMLEXISTS运算符具有两个参数，一个XML查询表达式和一个<span>Derby</span> XML值。</p>

<p>有关更多信息，请参见《 <span><em>Derby开发人员指南</em></span> 》中的“ XML数据类型和运算符”。</p>

</div>

<div class="section"><h2 class="sectiontitle">句法</h2>
<pre><strong>XMLEXISTS ( <var class="varname">xqueryStringLiteral</var>
    PASSING BY REF <var class="varname">xmlValueExpression</var> [ BY REF ] )
</strong></pre>
<dl>
<dt class="dlterm"><var class="varname">xqueryStringLiteral</var></dt>

<dd>必须指定为字符串文字。如果将此参数指定为参数，不是文字的表达式或不是字符串（例如整数）的文字，则<span>Derby</span>会引发错误。的<var class="varname">xqueryStringLiteral</var>参数也必须是XPath表达式。<span>Derby</span>不支持完整的XQuery，仅支持XPath子集。如果无法编译或执行查询参数，则<span>Derby</span>引发<em>SQLException</em> 。有关XPath表达式的更多信息，请参见<a href="http://www.w3.org/TR/xpath" target="_blank">http://www.w3.org/TR/xpath</a> 。</dd>


<dt class="dlterm"><var class="varname">xmlValueExpression</var></dt>

<dd>必须是XML数据值，并且必须构成格式正确的SQL / XML文档。的<var class="varname">xmlValueExpression</var>参数不能是参数。
 <span>Derby</span>不会执行隐式解析或XML值转换，因此使用字符串或任何其他数据类型会导致错误。如果参数是<span>Derby</span> <a href="rreffuncxmlquery.html#rreffuncxmlquery">XMLQUERY运算符</a>返回的序列，则参数是一个仅一个节点（即文档节点）的序列，则该参数被接受。否则， <span>Derby</span>会引发错误。</dd>


<dt class="dlterm">按参考</dt>

<dd>可选关键字，描述<span>Derby</span>支持的唯一值传递机制。由于BY REF也是默认的传递机制，因此无论关键字是否存在，XMLEXISTS运算符的行为都相同。有关传递机制的更多信息，请参见SQL / XML规范。</dd>

</dl>
</div>

<div class="section"><h2 class="sectiontitle">运算符结果并与其他运算符组合</h2><div class="p">XMLEXISTS运算符的结果是一个SQL布尔值，该布尔值基于对<var class="varname">xqueryStringLiteral</var>反对这<var class="varname">xmlValueExpression</var> 。XMLEXISTS运算符返回：<dl>

<dt class="dlterm">未知</dt>

<dd>当。。。的时候<var class="varname">xmlValueExpression</var>一片空白。</dd>


<dt class="dlterm">真正</dt>

<dd>当针对指定的查询表达式求值时<var class="varname">xmlValueExpression</var>返回节点或值的非空序列。</dd>


<dt class="dlterm">假</dt>

<dd>当针对指定的查询表达式求值时<var class="varname">xmlValueExpression</var>返回一个空序列。</dd>

</dl>
</div>
<p>XMLEXISTS运算符不返回查询评估的实际结果。您必须使用XMLQUERY运算符来检索实际结果。</p>
<p>由于XMLEXISTS运算符的结果是SQL布尔数据类型，因此可以在允许布尔函数的任何地方使用XMLEXISTS运算符。例如，您可以将XMLEXISTS运算符用作表声明中的检查约束或WHERE子句中的谓词。</p>
</div>

<div class="section"><h2 class="sectiontitle">例子</h2><div class="p">在里面<samp class="codeph">x_table</samp>表，以确定是否<samp class="codeph">xcol</samp>每行的XML列都有一个名为<samp class="codeph">student</samp>带着<samp class="codeph">age</samp>属性等于20，请使用以下语句：<pre><strong>SELECT id, XMLEXISTS('//student[@age=20]' PASSING BY REF xcol) 
    FROM x_table</strong></pre>
</div>
<div class="p">在里面<samp class="codeph">x_table</samp>表，返回其每一行的ID <samp class="codeph">xcol</samp> XML列为非null，包含元素<samp class="codeph">/roster/student</samp> ，使用以下语句：<pre><strong>SELECT id FROM x_table WHERE XMLEXISTS('/roster/student' PASSING BY REF xcol)</strong></pre>
</div>
<div class="p">您可以创建<samp class="codeph">x_table</samp>带有检查约束的表，该约束限制可以将哪些XML值插入到<samp class="codeph">xcol</samp> XML列。在此示例中，约束条件是该列至少具有一个<samp class="codeph">student</samp>元素与<samp class="codeph">age</samp>属性的值小于25。要创建表，请使用以下语句：<pre><strong>CREATE TABLE x_table ( id INT, xcol XML 
    CHECK (XMLEXISTS ('//student[@age &lt; 25]' PASSING BY REF xcol)) )</strong></pre>
</div>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="rrefsqlj29026.html" title="内置函数是一个表达式，其中SQL关键字或特殊运算符执行某些操作。">内置函数</a></div>
</div>
</div>



</body></html>