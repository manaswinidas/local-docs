<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="BLOB data type">
<meta name="abstract" content="A BLOB (binary large object) is a varying-length binary string that can be up to 2,147,483,647 characters long. Like other binary types, BLOB strings are not associated with a code page. In addition, BLOB strings do not hold character data.">
<meta name="description" content="A BLOB (binary large object) is a varying-length binary string that can be up to 2,147,483,647 characters long. Like other binary types, BLOB strings are not associated with a code page. In addition, BLOB strings do not hold character data.">
<meta name="DC.subject" content="BLOB data type">
<meta name="keywords" content="BLOB data type">
<meta name="DC.Relation" scheme="URI" content="crefsqlj31068.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefblob">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>BLOB数据类型</title>
</head>
<body id="rrefblob" ><a name="rrefblob"><!-- --></a>


<h1 class="topictitle1">BLOB数据类型</h1>



<div><p>BLOB（二进制大对象）是一个可变长度的二进制字符串，最长可为2,147,483,647个字符。像其他二进制类型一样，BLOB字符串也不与代码页关联。此外，BLOB字符串不保存字符数据。</p>

<div class="section"><p>除非给定后缀K，M或G之一（分别与1024、1024 * 1024和1024 * 1024 * 1024的倍数相关），否则BLOB的长度以字节为单位。</p>

<div class="note"><span class="notetitle">注意：</span> BLOB的长度以字节为单位。</div>
</div>

<div class="section"><h2 class="sectiontitle">句法</h2><pre><strong>
{ BLOB | BINARY LARGE OBJECT } [ ( <em>length</em> [{K |M |G }] ) ]
</strong></pre>
 </div>

<div class="section"><h2 class="sectiontitle">默认</h2><p>没有指定长度的BLOB默认为2 GB（2,147,483,647）。</p>
 </div>

<div class="section"><h2 class="sectiontitle">对应的编译时Java类型</h2><p><em>java.sql。斑点</em></p>
 </div>

<div class="section"><h2 class="sectiontitle">JDBC元数据类型（java.sql。类型）</h2><p>BLOB</p>
<p>在<em>java.sql上使用<em>getBlob</em>方法<em>。ResultSet</em>检索基础数据的BLOB句柄。</em></p><em>
 </em></div><em>

<div class="section"><h2 class="sectiontitle">相关信息</h2>
<p>请参见<a href="rrefjdbc96386.html#rrefjdbc96386">java.sql的映射。Blob和java.sql。Clob接口</a> 。</p>

</div>

<div class="example"><h2 class="sectiontitle">例子</h2>
<pre><strong><span>create table pictures(name varchar(32) not null primary key, pic blob(16M));
</span>
-- find all logotype pictures
select length(pic), name from pictures where name like '%logo%';

-- find all image doubles (blob comparisons)
select a.name as double_one, b.name as double_two
from pictures as a, pictures as b
where a.name &lt; b.name
and a.pic = b.pic
order by 1,2;</strong></pre>
 
<p>如果需要将长字符串常量转换为BLOB，则使用INSERT语句将BLOB数据放入表存在一些限制。 （请参阅<a href="rrefstringlimits.html#rrefstringlimits">字符串限制</a> 。）如下面的代码片段所示，使用二进制流可能会更好。</p>

<pre>        String url = "jdbc:derby:blobby;create=true";
        Connection conn = DriverManager.getConnection(url);

        Statement s = conn.createStatement();
        s.executeUpdate(
            "CREATE TABLE images (id INT, img BLOB)");

        // - first, create an input stream
        InputStream fin = new FileInputStream("image.jpg");

        PreparedStatement ps = conn.prepareStatement(
            "INSERT INTO images VALUES (?, ?)");
        ps.setInt(1, 1477);

        // - set the value of the input parameter to the input stream
        ps.setBinaryStream(2, fin);
        ps.execute();

        // --- reading the columns
        ResultSet rs = s.executeQuery(
            "SELECT img FROM images WHERE id = 1477");
        byte buff[] = new byte[1024];

        while (rs.next()) {
            Blob ablob = rs.getBlob(1);
            File newfile = new File("newimage.jpg");

            InputStream is = ablob.getBinaryStream();

            FileOutputStream fos = 
                new FileOutputStream(newfile);

            for (int b = is.read(buff); b != -1; b = is.read(buff)) {
                fos.write(buff, 0, b);
            }

            is.close();
            fos.close();
        }
        s.close();
        ps.close();
        rs.close();
        conn.close();</pre>
</div>

</em></div><em>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="crefsqlj31068.html" title="">数据类型</a></div>
</div>
</div>



</em></body></html>