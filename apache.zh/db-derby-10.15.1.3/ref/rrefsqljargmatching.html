<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Argument matching">
<meta name="abstract" content="When you declare a function or procedure using CREATE FUNCTION/PROCEDURE, Derby does not verify whether a matching Java method exists. Instead, Derby looks for a matching method only when you invoke the function or procedure in a later SQL statement.">
<meta name="description" content="When you declare a function or procedure using CREATE FUNCTION/PROCEDURE, Derby does not verify whether a matching Java method exists. Instead, Derby looks for a matching method only when you invoke the function or procedure in a later SQL statement.">
<meta name="DC.subject" content="Argument matching, CREATE FUNCTION statement, CREATE PROCEDURE statement">
<meta name="keywords" content="Argument matching, CREATE FUNCTION statement, CREATE PROCEDURE statement">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefsqljargmatching">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>参数匹配</title>
</head>
<body id="rrefsqljargmatching" ><a name="rrefsqljargmatching"><!-- --></a>


<h1 class="topictitle1">参数匹配</h1>



<div><p>使用CREATE FUNCTION / PROCEDURE声明函数或过程时， <span>Derby</span>不会验证是否存在匹配的Java方法。相反，仅当您在更高版本的SQL语句中调用函数或过程时， <span>Derby</span>才会查找匹配方法。</p>

<div class="section">
<p>那时， <span>Derby会</span>搜索一个公共的静态方法，该方法具有在较早的CREATE FUNCTION / PROCEDURE语句的EXTERNAL NAME子句中声明的类和方法名称。此外，方法的参数和返回值的Java类型必须与CREATE FUNCTION / PROCEDURE语句中声明的SQL类型匹配。可能会发生以下情况：</p>


<ul>
<li><strong>成功</strong> -如果完全匹配一个Java方法，则<span>Derby</span>调用它。</li>

<li><strong>歧义</strong> -如果有多个方法匹配，则<span>Derby</span>会引发错误。</li>

<li><strong>失败</strong> -如果没有方法匹配， <span>Derby</span>也会引发错误。</li>

</ul>


<p>使用varargs的过程或函数必须解析为varargs Java方法。</p>


<p>在将SQL数据类型映射到Java数据类型时， <span>Derby</span>考虑以下几种匹配项：</p>


<ul>
<li><strong>原始匹配</strong> <span>-Derby</span>查找与SQL类型相对应的原始Java类型。例如，SQL INTEGER与Java <em>int</em>匹配。</li>

<li><strong>包装比赛</strong> - <span>德比</span>查找在<em>java.lang</em>或对应于SQL类型<em>的java.sql</em>包的包装类。例如，SQL INTEGER匹配<em>java.lang。整数</em> 。对于用户定义的类型（UDT）， <span>Derby</span>查找UDT的外部名称类。</li>

<li><strong>数组匹配</strong> -对于OUT和INOUT过程参数， <span>Derby</span>查找对应的原始类型或包装类型的数组。例如，类型为SQL INTEGER的OUT过程参数匹配<em>int []</em>和<em>Integer []</em> 。</li>

<li><strong>ResultSet匹配</strong> -如果声明了一个过程以返回<em>n个</em>结果集，则<span>Derby</span>将查找其最后<em>n个</em>参数类型为<em>java.sql的方法。ResultSet []</em> 。</li>

</ul>


<p>
<span>Derby</span>解析功能和过程调用如下：</p>


<ul>
<li><strong>功能</strong> <span>-Derby</span>寻找一种方法，该方法的参数和返回类型为函数的SQL参数和返回值的<em>原始匹配</em>或<em>包装匹配</em> 。</li>

<li><strong>过程</strong> <span>-Derby</span>寻找一个返回void且其参数类型匹配如下的方法：<ul>
  <li><em>IN-</em>方法参数是过程IN参数的<em>原始匹配</em>或<em>包装匹配</em> 。</li>

  <li><em>OUT和INOUT-</em>方法参数是过程的OUT和INOUT参数的<em>数组匹配</em> 。</li>

  </ul>另外，如果该过程返回<em>n个</em> RESULT SETS，则Java方法的最后<em>n个</em>参数必须为<em>java.sql类型<em>。ResultSet []</em> 。</em></li><em>

</em></ul><em>

<p><span>Derby</span>提供了一个工具， <samp class="codeph">SignatureChecker</samp> ，它可以标识数据库中不遵循这些参数匹配规则的任何SQL函数或过程。有关详细信息，请参见《 <span><em>Derby工具和实用程序指南</em></span> 》。</p>

</em></div><em>


<div class="section"><h2 class="sectiontitle">参数匹配的例子</h2>


<p>以下功能...
</p>


<pre><strong>
CREATE FUNCTION TO_DEGREES
( RADIANS DOUBLE )
RETURNS DOUBLE
PARAMETER STYLE JAVA
NO SQL LANGUAGE JAVA
EXTERNAL NAME 'example.MathUtils.toDegrees'
</strong></pre>


<p>...将匹配以下所有方法：</p>


<pre><strong>
public static double toDegrees( double arg ) {...}
public static Double toDegrees( double arg ) {...}
public static double toDegrees( Double arg ) {...}
public static Double toDegrees( Double arg ) {...}
</strong></pre>


<p>请注意，如果<span>Derby</span>找到多个匹配方法，它将引发异常。
</p>


</div>



<div class="section"><h2 class="sectiontitle">将SQL数据类型映射到Java数据类型</h2>

<p>下表显示了<span>Derby</span>如何将特定的SQL数据类型映射到Java数据类型。</p>



<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the SQL datatypes and shows how Derby maps them to Java primitive and wrapper types." frame="border" rules="all"><caption>表格1。SQL和Java类型对应</caption>




<thead align="left">
    <tr valign="bottom">
      <th valign="bottom" width="33%" id="N1025B">SQL类型</th>

      <th valign="bottom" width="33%" id="N10262">原始匹配</th>

      <th valign="bottom" width="34%" id="N10269">包装比赛</th>

    </tr>

</thead>


<tbody>

    <tr>
      <td valign="top" width="33%" headers="N1025B">布兰</td>

      <td valign="top" width="33%" headers="N10262"><em>布尔值</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。布尔型</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">SMALLINT</td>

      <td valign="top" width="33%" headers="N10262"><em>短</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。整数</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">整数</td>

      <td valign="top" width="33%" headers="N10262"><em>整型</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。整数</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">比金特</td>

      <td valign="top" width="33%" headers="N10262"><em>长</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。长</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">十进制</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.math。大十进制</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">数字</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.math。大十进制</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">真实</td>

      <td valign="top" width="33%" headers="N10262"><em>浮动</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。浮动</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">双</td>

      <td valign="top" width="33%" headers="N10262"><em>双</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。双</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">浮动</td>

      <td valign="top" width="33%" headers="N10262"><em>双</em></td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。双</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">焦炭</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。串</em></td>

    </tr>


    <tr>
      <td valign="top" width="33%" headers="N1025B">VARCHAR</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。串</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">长VARCHAR</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.lang。串</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">位数据的字符</td>

      <td valign="top" width="33%" headers="N10262"><em>字节[]</em></td>

      <td valign="top" width="34%" headers="N10269">没有</td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">VARCHAR用于位数据</td>

      <td valign="top" width="33%" headers="N10262"><em>字节[]</em></td>

      <td valign="top" width="34%" headers="N10269">没有</td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">长VARCHAR用于位数据</td>

      <td valign="top" width="33%" headers="N10262"><em>字节[]</em></td>

      <td valign="top" width="34%" headers="N10269">没有</td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">CLOB</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.sql。b</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">BLOB</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.sql。斑点</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">日期</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.sql。日期</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">时间</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.sql。时间</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">时间戳</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269"><em>java.sql。时间戳记</em></td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">XML格式</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269">没有</td>

    </tr>

    
    <tr>
      <td valign="top" width="33%" headers="N1025B">用户定义类型</td>

      <td valign="top" width="33%" headers="N10262">没有</td>

      <td valign="top" width="34%" headers="N10269">底层Java类</td>

    </tr>

    
</tbody>

</table>
</div>


</div>


</em></div><em>




</em></body></html>