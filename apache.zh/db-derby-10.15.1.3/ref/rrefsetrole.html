<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="SET ROLE statement">
<meta name="abstract" content="The SET ROLE statement sets the current role for the current SQL context of a session.">
<meta name="description" content="The SET ROLE statement sets the current role for the current SQL context of a session.">
<meta name="DC.subject" content="SET ROLE statement, SQL statements, SET ROLE, roles, setting">
<meta name="keywords" content="SET ROLE statement, SQL statements, SET ROLE, roles, setting">
<meta name="DC.Relation" scheme="URI" content="rrefcreaterole.html">
<meta name="DC.Relation" scheme="URI" content="rrefdroprole.html">
<meta name="DC.Relation" scheme="URI" content="rrefcurrentrole.html">
<meta name="DC.Relation" scheme="URI" content="rrefsistabssysroles.html">
<meta name="DC.Relation" scheme="URI" content="crefsqlj35312.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqljsetconstr.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj41180.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj32268.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefsetrole">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>SET ROLE语句</title>
</head>
<body id="rrefsetrole" ><a name="rrefsetrole"><!-- --></a>


<h1 class="topictitle1">SET ROLE语句</h1>



<div><p>SET ROLE语句为会话的当前SQL上下文设置当前角色。</p>

<div class="section">
<p>仅当当前用户已被授予该角色或该角色已被授予PUBLIC时，您才能设置角色。</p>

<p>有关角色的更多信息，请参阅《 <span><em>Derby安全指南</em></span> 》中的“使用SQL角色”。</p>

</div>

<div class="section"><h2 class="sectiontitle">句法</h2> 
<pre>
<strong>SET ROLE { <em><a href="rrefrolename.html#rrefrolename">roleName</a></em> | '<em>stringConstant</em>' | ? | NONE }
</strong></pre>

</div>

<div class="section">
<p>如果将<em>roleName</em>指定为NONE，则效果是取消设置当前角色。</p>

<p>如果您将角色指定为字符串常量或动态参数规范（ <samp class="codeph">?</samp> ），在尝试将剩余的（sub）字符串用作<em>roleName</em>之前，会从字符串中修剪掉所有前导和尾随的空格。动态参数规范可以在准备好的语句中使用，因此SET ROLE语句可以准备一次，然后以不同的角色值执行。您不能将NONE指定为动态参数。</p>

<p>设置角色将标识一组特权，这些特权是以下各项的并集：</p>

<ul>
<li>授予该角色的特权</li>

<li>该角色中包含的角色特权的联合（有关角色包含的定义，请参阅<a href="rrefsqljgrant.html#rrefsqljgrant__grantrolesyn">GRANT语句中的</a> “角色语法”）</li>

</ul>

<p>在会话中， <em>当前权限</em>定义了允许会话访问的内容。<em>当前特权</em>是以下各项的并集：</p>

<ul>
<li>授予当前用户的特权</li>

<li>授予PUBLIC的特权</li>

<li>当前角色标识的特权（如果已设置）</li>

</ul>

<p>SET ROLE语句不是事务性的；回滚并不会撤消设置角色的影响。如果正在进行事务，则尝试设置角色将导致错误。</p>

</div>

<div class="example"><h2 class="sectiontitle">例子</h2>
<pre><strong>SET ROLE reader;</strong></pre>

<pre><strong>  // These examples show the use of SET ROLE in JDBC statements.
  // The case normal form is visible in the SYS.SYSROLES system table.
  stmt.execute("SET ROLE admin");      -- case normal form: ADMIN
  stmt.execute("SET ROLE \"admin\"");  -- case normal form: admin
  stmt.execute("SET ROLE none");       -- special case

  PreparedStatement ps = conn.prepareStatement("SET ROLE ?");
  ps.setString(1, "  admin ");  -- on execute: case normal form: ADMIN
  ps.setString(1, "\"admin\""); -- on execute: case normal form: admin
  ps.setString(1, "none");      -- on execute: syntax error
  ps.setString(1, "\"none\"");  -- on execute: case normal form: none
</strong></pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="crefsqlj35312.html" title="">SET语句</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rrefsqljsetconstr.html" title="SET CONSTRAINTS语句设置一个或多个约束的可延迟性。">SET CONSTRAINTS语句</a></div>
<div><a href="rrefsqlj41180.html" title="SET ISOLATION语句更改用户连接的隔离级别。">SET ISOLATION语句</a></div>
<div><a href="rrefsqlj32268.html" title="SET SCHEMA语句将连接会话的默认模式设置为指定的模式。">SET SCHEMA语句</a></div>
<div><a href="rrefcreaterole.html" title="CREATE ROLE语句创建一个SQL角色。当数据库有许多用户时，角色对于管理特权很有用。">CREATE ROLE语句</a></div>
<div><a href="rrefdroprole.html" title="DROP ROLE语句删除指定的SQL角色。">DROP ROLE语句</a></div>
<div><a href="rrefcurrentrole.html" title="CURRENT_ROLE函数返回当前角色的授权标识符。如果没有当前角色，则返回NULL。">CURRENT_ROLE函数</a></div>
<div><a href="rrefsistabssysroles.html" title="SYSROLES表将角色存储在数据库中。">SYSROLES系统表</a></div>
</div>
</div>



</body></html>