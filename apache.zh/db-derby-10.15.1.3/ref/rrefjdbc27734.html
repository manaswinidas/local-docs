<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="java.sql.Connection interface">
<meta name="abstract" content="A Derby Connection object is not garbage-collected until all other JDBC objects created from that connection are closed or are themselves garbage-collected.">
<meta name="description" content="A Derby Connection object is not garbage-collected until all other JDBC objects created from that connection are closed or are themselves garbage-collected.">
<meta name="DC.subject" content="java.sql.Connection interface, Connections, session-severity exceptions closing, system-severity exceptions closing, garbage collection of">
<meta name="keywords" content="java.sql.Connection interface, Connections, session-severity exceptions closing, system-severity exceptions closing, garbage collection of">
<meta name="DC.Relation" scheme="URI" content="crefjdbc12657.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc32052.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc34565.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc15905.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc40794.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc20485.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc29874.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc23502.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc38274.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc16643.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc30469.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbcrefsqlxml.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc4_2sqltype.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbcjavasqlsavepoint.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc20377.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc1020262.html">
<meta name="DC.Relation" scheme="URI" content="rrefjavcsti.html">
<meta name="DC.Relation" scheme="URI" content="rrefjavcsro.html">
<meta name="DC.Relation" scheme="URI" content="rrefjavciro.html">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc4_1connection.html">
<meta name="DC.Relation" scheme="URI" content="crefjavccns.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefjdbc27734">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>java.sql。连接界面</title>
</head>
<body id="rrefjdbc27734" ><a name="rrefjdbc27734"><!-- --></a>


<h1 class="topictitle1">java.sql。连接界面</h1>



<div><p>在关闭从该连接创建的所有其他JDBC对象或将其本身进行垃圾收集之前，不会对<span>Derby</span> <em>Connection</em>对象进行垃圾收集。</p>

<div class="section"><p>一旦关闭连接，就无法再对通过该连接创建的对象发出JDBC请求。在不再需要它来执行语句之前，不要显式关闭<em>Connection</em>对象。</p>
</div>

<div class="section">
<p><em>Connection</em>接口扩展了<em>AutoCloseable</em> 。如果您在<em>try</em> -with-resources语句中声明了连接，但是代码没有捕获到错误，则JRE将尝试自动关闭连接。</p>

<p>请注意，事务严重性或更高的异常会导致<span>Derby</span>中止进行中的事务。但是，语句严重性异常不会回滚事务。另请注意，如果尝试关闭正在进行的事务的连接，则<span>Derby</span>会引发异常。假设现在在<em>try</em> -with-resources语句中声明一个<em>Connection，</em>正在处理事务，并且在<em>try</em> -with-resources块内发生未处理的语句严重性错误。在这种情况下，当JRE退出<em>try</em> -with-resources块时， <span>Derby</span>将引发后续异常。（有关错误严重性级别的详细信息，请参阅<em><a href="rrefproper26985.html#rrefproper26985">derby.stream.error.logSeverityLevel</a></em> 。）</p>

<p>因此，总是最好在<em>try</em> -with-resources块内捕获错误，并进行适当的回滚或提交，以确保在离开<em>try</em> -with-resources块时没有挂起的事务。此操作还提高了应用程序的可移植性，因为在尝试关闭与未决事务的连接时DBMS的语义不同。</p>

</div>

<div class="section">
<p>下表描述了<span>Derby</span>特有的<em>Connection</em>方法的功能。</p>


<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table describes the implementation-specific features of Connection methods, providing the return type and signature for each method." frame="border" rules="all"><caption>表格1。关于<em>连接</em>方法的实施说明</caption>



<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="30%" id="N1013B">退货</th>

<th valign="bottom" width="40%" id="N10142">签名</th>

<th valign="bottom" width="30%" id="N10149">实施说明</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="30%" headers="N1013B"><em>准备声明</em></td>

<td valign="top" width="40%" headers="N10142"><em>prepareStatement（String sql，int [] columnIndexes）</em></td>

<td valign="top" width="30%" headers="N10149">数组中的每个列索引必须与INSERT目标表中的<a href="rrefsqlj37836.html#rrefsqlj37836">自动递增</a>列相关联。</td>

</tr>

<tr>
<td valign="top" width="30%" headers="N1013B"><em>准备声明</em></td>

<td valign="top" width="40%" headers="N10142"><em>prepareStatement（String sql，String [] columnNames）</em></td>

<td valign="top" width="30%" headers="N10149">数组中的每个列名称都必须在INSERT的目标表中指定一个<a href="rrefsqlj37836.html#rrefsqlj37836">自动递增的</a>列。</td>

</tr>

</tbody>

</table>
</div>

<p>有关使用此表中显示的<em>Connection.prepareStatement</em>方法的两种形式的详细信息，请参见自动<a href="crefjavstateautogen.html#crefjavstateautogen">生成的键</a> 。</p>

</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="rrefjavcsti.html">java.sql。Connection.setTransactionIsolation方法</a></strong><br>事务隔离级别为java.sql。连接。TRANSACTION_SERIALIZABLE，java.sql。连接。TRANSACTION_REPEATABLE_READ，java.sql。连接。TRANSACTION_READ_COMMITTED和java.sql。连接。可从Derby数据库获得TRANSACTION_READ_UNCOMMITTED。</li>
<li class="ulchildlink"><strong><a href="rrefjavcsro.html">java.sql。Connection.setReadOnly方法</a></strong><br>java.sql。支持Connection.setReadOnly方法。</li>
<li class="ulchildlink"><strong><a href="rrefjavciro.html">java.sql。Connection.isReadOnly方法</a></strong><br>如果连接到只读数据库，则返回适当的isReadOnly DatabaseMetaData值。</li>
<li class="ulchildlink"><strong><a href="rrefjdbc4_1connection.html">java.sql。Connection.abort方法</a></strong><br>java.sql。支持Connection.abort。</li>
<li class="ulchildlink"><strong><a href="crefjavccns.html">不支持连接功能</a></strong><br>Derby不使用目录名称。此外，几种可选方法会引发“功能不受支持”异常。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="crefjdbc12657.html" title="本部分提供有关Derby对Java数据库连接（JDBC）API的实现的参考信息，并记录了其符合JDBC API的方式。">JDBC参考</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rrefjdbc32052.html" title="加载Derby本地JDBC驱动程序的类是org.apache.derby.jdbc类。EmbeddedDriver。加载Derby的网络客户端驱动程序的类是org.apache.derby.jdbc。ClientDriver。">java.sql。驱动界面</a></div>
<div><a href="rrefjdbc34565.html" title="使用JDBC API的Java应用程序通过获取Connection对象来建立与数据库的连接。获取连接对象的标准方法是调用方法DriverManager.getConnection，该方法采用包含数据库连接URL的String。">java.sql。DriverManager.getConnection方法</a></div>
<div><a href="rrefjdbc15905.html" title="Derby实现了java.sql。DatabaseMetaData接口。">java.sql。DatabaseMetaData接口</a></div>
<div><a href="rrefjdbc40794.html" title="Derby没有实现java.sql的setEscapeProcessing方法。声明。此外，cancel方法会引发“功能不受支持”异常。">java.sql。报表界面</a></div>
<div><a href="rrefjdbc20485.html" title="Derby支持除setBlob，getBlob，setClob和getClob外的所有CallableStatement方法。">java.sql。CallableStatement接口</a></div>
<div><a href="rrefjdbc29874.html" title="Derby提供了所有必需的JDBC类型转换，并且还允许为每种类型使用单独的setXXX方法，就像进行了setObject（Value，JDBCTypeCode）调用一样。">java.sql。PreparedStatement接口</a></div>
<div><a href="rrefjdbc23502.html" title="针对通过ResultSet对象访问的游标发出的定位更新或删除将修改或删除ResultSet对象的当前行。">java.sql。ResultSet界面</a></div>
<div><a href="rrefjdbc38274.html" title="Derby不会跟踪ResultSets中列的来源或可更新性，因此始终返回下表中列出的方法所示的常量。">java.sql。ResultSetMetaData接口</a></div>
<div><a href="rrefjdbc16643.html" title="Derby为SQLException的getMessage，getSQLState和getErrorCode调用提供值。">java.sql。SQLException类</a></div>
<div><a href="rrefjdbc30469.html" title="在某些情况下，Derby可能会生成警告。例如，如果您尝试使用create属性设置为true尝试连接到数据库（如果该数据库已经存在），则会生成警告。">java.sql。SQLWarning类</a></div>
<div><a href="rrefjdbcrefsqlxml.html" title="java.sql。SQLXML接口是SQL XML数据类型的映射。但是，Derby仅在SQL层中定义XML数据类型和运算符。XML数据类型和运算符没有JDBC端支持。">java.sql。SQLXML接口</a></div>
<div><a href="rrefjdbc4_2sqltype.html" title="JDBC 4.2引入了数据类型标识符java.sql。SQLType，用于帮助数据库描述ANSI / ISO SQL标准中未出现的数据类型。提供非标准类型的数据库可以提供自己的SQLType实现。">java.sql。SQLType接口</a></div>
<div><a href="rrefjdbcjavasqlsavepoint.html" title="Savepoint接口包含用于将事务设置，释放或回滚到指定保存点的方法。设置保存点后，可以将事务回滚到该保存点，而不会影响之前的工作。">java.sql。保存点界面</a></div>
<div><a href="rrefjdbc20377.html" title="在Derby中，为java.sql。类型映射到SQL数据类型。">java.sql的映射。类型转换为SQL类型</a></div>
<div><a href="rrefjdbc1020262.html" title="JDBC提供了一种消除一些不同DBMS供应商实现SQL方式差异的方法。这称为转义语法。">JDBC转义语法</a></div>
</div>
</div>

</body>
</html>