<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="SYSCS_UTIL.SYSCS_COMPRESS_TABLE system procedure">
<meta name="abstract" content="Use the SYSCS_UTIL.SYSCS_COMPRESS_TABLE system procedure to reclaim unused, allocated space in a table and its indexes.">
<meta name="description" content="Use the SYSCS_UTIL.SYSCS_COMPRESS_TABLE system procedure to reclaim unused, allocated space in a table and its indexes.">
<meta name="DC.subject" content="compressing tables, system procedures, SYSCS_UTIL.SYSCS_COMPRESS_TABLE">
<meta name="keywords" content="compressing tables, system procedures, SYSCS_UTIL.SYSCS_COMPRESS_TABLE">
<meta name="DC.Relation" scheme="URI" content="rrefproceduresinplacecompress.html">
<meta name="DC.Relation" scheme="URI" content="rrefdropstatsproc.html">
<meta name="DC.Relation" scheme="URI" content="rrefupdatestatsproc.html">
<meta name="DC.Relation" scheme="URI" content="rrefproceduresinplacecompress.html">
<meta name="DC.Relation" scheme="URI" content="rrefdropstatsproc.html">
<meta name="DC.Relation" scheme="URI" content="rrefupdatestatsproc.html">
<meta name="DC.Relation" scheme="URI" content="crefsqlbuiltinsystemprocedures.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefaltertablecompress">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>SYSCS_UTIL.SYSCS_COMPRESS_TABLE系统过程</title>
</head>
<body id="rrefaltertablecompress" ><a name="rrefaltertablecompress"><!-- --></a>


<h1 class="topictitle1">SYSCS_UTIL.SYSCS_COMPRESS_TABLE系统过程</h1>



<div><p>使用<samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp>系统过程以回收表及其索引中未使用的，已分配的空间。</p>

<div class="section"><p>通常，当从表中删除大量数据或更新索引时，会存在未使用的分配空间。默认情况下， <span>Derby</span>不会将未使用的空间返回给操作系统。例如，将页面分配给表或索引后，在销毁表或索引之前，页面不会自动返回到操作系统。
<samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp>允许您将未使用的空间返回给操作系统。</p>

<p>的<samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp>作为索引重建过程的一部分，系统过程会更新所有索引的统计信息。</p>
</div>

<div class="section"><h2 class="sectiontitle">句法</h2> <pre><strong>SYSCS_UTIL.SYSCS_COMPRESS_TABLE (IN SCHEMANAME VARCHAR(128), 
IN TABLENAME VARCHAR(128), IN SEQUENTIAL SMALLINT)</strong></pre>
 <dl>
<dt class="dlterm">模式名称</dt>

<dd>类型为VARCHAR（128）的输入参数，用于指定表的模式。传递null将导致错误。</dd>


<dt class="dlterm">表名</dt>

<dd>类型为VARCHAR（128）的输入参数，用于指定表的表名。该字符串必须与表名的大小写完全匹配，并且参数“ Fred”将作为分隔标识符“ Fred”传递给SQL。传递null将导致错误。</dd>


<dt class="dlterm">顺序的</dt>

<dd>类型为SMALLINT的非零输入参数将强制操作在顺序模式下运行，而参数0将强制操作不在顺序模式下运行。传递null将导致错误。</dd>

</dl>
</div>

<div class="section"><h2 class="sectiontitle">执行权限</h2>
<p>如果同时启用了身份验证和SQL授权，则所有用户都具有此过程的执行特权。但是，为了使过程在给定的表上成功运行，用户必须是<a href="rrefattrib26867.html#rrefattrib26867">数据库</a>或表所在模式的所有者。有关更多信息，请参见《 <span><em>Derby安全指南</em></span> 》中的“配置用户身份验证”和“配置用户授权”。</p>

</div>

<div class="section"><h2 class="sectiontitle">SQL示例</h2> <p>要使用SEQUENTIAL选项在名为US的模式中压缩名为CUSTOMER的表：</p>
 <pre><strong>call SYSCS_UTIL.SYSCS_COMPRESS_TABLE('US', 'CUSTOMER', 1)</strong></pre>
</div>

<div class="section"><h2 class="sectiontitle">Java示例</h2> <p>要使用SEQUENTIAL选项在名为US的模式中压缩名为CUSTOMER的表：</p>
 <pre>CallableStatement cs = conn.prepareCall
("CALL SYSCS_UTIL.SYSCS_COMPRESS_TABLE(?, ?, ?)");
cs.setString(1, "US");
cs.setString(2, "CUSTOMER");
cs.setShort(3, (short) 1);
cs.execute();</pre>
</div>

<div class="section"><p>如果未指定SEQUENTIAL参数，则<span>Derby会</span>与基表同时重建所有索引。如果未指定SEQUENTIAL参数，则此过程可能会占用大量内存，并占用大量临时磁盘空间（该数量大约等于已用空间加上未分配的已用空间的两倍）。这是因为<span>Derby</span>通过将活动行复制到新分配的空间（而不是将现有空间改组和截断）来压缩表。多余的空间将通过COMMIT返回给操作系统。</p>
</div>

<div class="section"><p>指定SEQUENTIAL时， <span>Derby</span>压缩基表，然后顺序压缩每个索引。使用SEQUENTIAL会占用较少的内存和磁盘空间，但是会占用更多时间。使用SEQUENTIAL参数减少内存和磁盘空间的使用。</p>
</div>

<div class="section"><div class="p"><samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp>在发出COMMIT之前，不能将任何永久磁盘空间释放回操作系统。这意味着无法释放基表及其索引所占用的空间。在COMMIT之前，只能将外部排序临时占用的磁盘空间返回到操作系统。<div class="tip"><span class="tiptitle">提示：</span>我们建议您发布<samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp>自动提交模式下的系统过程。</div>
</div>
<div class="note"><span class="notetitle">注意：</span>此过程在被压缩的表上获取排他表锁。所有依赖于表或其索引的语句计划都将失效。有关标识未使用空间的信息，请参见《 <cite><span><em>Derby服务器和管理指南》</em></span></cite> 。</div>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="crefsqlbuiltinsystemprocedures.html" title="">内置系统过程</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rrefproceduresinplacecompress.html" title="使用SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE系统过程来回收表及其索引中未使用的已分配空间。">SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE系统过程</a></div>
<div><a href="rrefdropstatsproc.html" title="SYSCS_UTIL.SYSCS_DROP_STATISTICS系统过程删除指定索引或表上所有索引的所有现有基数统计信息。">SYSCS_UTIL.SYSCS_DROP_STATISTICS系统过程</a></div>
<div><a href="rrefupdatestatsproc.html" title="SYSCS_UTIL.SYSCS_UPDATE_STATISTICS系统过程更新基数统计信息，或者为您指定的索引或表中的所有索引创建基数统计信息（如果不存在）。">SYSCS_UTIL.SYSCS_UPDATE_STATISTICS系统过程</a></div>
</div>
</div>



</body></html>