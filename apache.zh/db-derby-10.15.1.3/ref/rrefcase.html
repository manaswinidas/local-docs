<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="CASE expression">
<meta name="abstract" content="The CASE expression can be used for conditional expressions in Derby.">
<meta name="description" content="The CASE expression can be used for conditional expressions in Derby.">
<meta name="DC.subject" content="CASE expression">
<meta name="keywords" content="CASE expression">
<meta name="DC.Relation" scheme="URI" content="rrefcasenullif.html">
<meta name="DC.Relation" scheme="URI" content="rreffunccoalesce.html">
<meta name="DC.Relation" scheme="URI" content="rrefcasenullif.html">
<meta name="DC.Relation" scheme="URI" content="rreffunccoalesce.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj19433.html">
<meta name="DC.Relation" scheme="URI" content="rrefselectexpression.html">
<meta name="DC.Relation" scheme="URI" content="rreftableexpression.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqljnextvaluefor.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj11277.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj1080779.html">
<meta name="DC.Relation" scheme="URI" content="rrefsqlj23075.html">
<meta name="DC.Relation" scheme="URI" content="crefsqlj29911.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefcase">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>案例表达</title>
</head>
<body id="rrefcase" ><a name="rrefcase"><!-- --></a>


<h1 class="topictitle1">案例表达</h1>



<div><p>CASE表达式可用于<span>Derby中的</span>条件表达式。</p>

<div class="section"><p>有关<a href="rrefsqlj19433.html">表达式</a>的更多信息，请参见<a href="rrefsqlj19433.html">SQL</a>表达式。</p>

</div>

<div class="section"><h2 class="sectiontitle">句法</h2><p>您可以在允许表达式的任何位置放置CASE表达式。它根据布尔检验选择要评估的表达式。</p>

<p><span>Derby</span>支持三种CASE表达式，我们将其称为<dfn class="term">搜索CASE表达式</dfn> ， <dfn class="term">简单CASE表达式</dfn>和<dfn class="term">扩展CASE表达式</dfn> 。</p>

<p><dfn class="term">搜索的CASE表达式</dfn>的语法如下：</p>

<pre><strong>CASE 
  WHEN <em><a href="rrefsqlj23075.html#rrefsqlj23075">booleanExpression</a></em> THEN <em>thenExpression</em> 
  [ WHEN <em><a href="rrefsqlj23075.html#rrefsqlj23075">booleanExpression</a></em> THEN <em>thenExpression</em> ]*
  [ ELSE <em>elseExpression</em> ]
END</strong></pre>

<p>一个<dfn class="term">简单的CASE表达式</dfn>的语法如下：</p>

<pre><strong>CASE <em>valueExpression</em>
  WHEN <em>valueExpression</em> [ , <em>valueExpression</em> ]* THEN <em>thenExpression</em>
  [ WHEN <em>valueExpression</em> [ , <em>valueExpression</em> ]* THEN <em>thenExpression</em> ]*
  [ ELSE <em>elseExpression</em> ]
END</strong></pre>

<p><em>valueExpression</em>是一个解析为单个值的表达式。</p>

<p>对于搜索的CASE表达式和简单的CASE表达式， <em>thenExpression</em>和<em>elseExpression</em>都定义如下：</p>

<pre><strong>NULL | <em>valueExpression</em></strong></pre>

<p><em>thenExpression</em>和<em>elseExpression</em>必须类型兼容。对于内置类型，这意味着这些类型必须相同，或者在这些类型之间必须存在内置的扩展转换。</p>

<p><dfn class="term">扩展的CASE表达式</dfn>的语法如下：</p>

<pre><strong>CASE <em>valueExpression</em>
  WHEN <em>whenOperand</em> [ , <em>whenOperand</em> ]* THEN <em>thenExpression</em>
  [ WHEN <em>whenOperand</em> [ , <em>whenOperand</em> ]* THEN <em>thenExpression</em> ]*
  [ ELSE <em>elseExpression</em> ]
END</strong></pre>

<p><em>whenOperand</em>的定义如下：</p>

<pre><strong><em>valueExpression</em> |
<em>comparisonOperator</em> <em>expression</em> |
IS [ NOT ] NULL |
[ NOT ] LIKE <em>characterExpressionWithWildCard</em> [ ESCAPE '<em>escapeCharacter</em>' ] |
[ NOT ] BETWEEN <em>expression</em> AND <em>expression</em> |
[ NOT ] IN <em><a href="rreftablesubquery.html">tableSubquery</a></em> |
[ NOT ] IN ( <em>expression</em> [, <em>expression</em> ]* ) |
<em>comparisonOperator</em> { ALL | ANY | SOME } <em><a href="rreftablesubquery.html">tableSubquery</a></em></strong></pre>

<p><em>compareOperator</em>的定义如下：</p>

<pre><strong>{ &lt; | = | &gt; | &lt;= | &gt;= | &lt;&gt; }</strong></pre>

<p>有关LIKE表达式的详细信息，请参见<a href="rrefsqlj23075.html">布尔表达式</a> 。</p>

<p>对于所有类型的CASE表达式，如果未指定ELSE子句，则ELSE NULL是隐式的。</p>

</div>

<div class="example"><h2 class="sectiontitle">例</h2><pre><strong>-- searched CASE expression
-- returns 3
VALUES CASE WHEN 1=1 THEN 3 ELSE 4 END

-- simple CASE expression, equivalent to previous expression
-- returns 3
VALUES CASE 1 WHEN 1 THEN 3 ELSE 4 END

-- searched CASE expression
-- returns 7
VALUES
   CASE
      WHEN 1 = 2 THEN 3
      WHEN 4 = 5 THEN 6
      ELSE 7
   END
   
-- simple CASE expression
-- returns 'two'
VALUES
  CASE 1+1
    WHEN 1 THEN 'one'
    WHEN 2 THEN 'two'
    ELSE 'many'
  END

-- simple CASE expression
-- returns 'odd', 'even', 'big'
SELECT
  CASE X
    WHEN 1, 3, 5, 7, 9 THEN 'odd'
    WHEN 2, 4, 6, 8, 10 THEN 'even'
    ELSE 'big'
  END
FROM
  (VALUES 5, 8, 12) AS V(X)

-- extended CASE expression
-- returns ('long', 182), ('medium', 340), ('short', 20)
SELECT DISTANCE, COUNT(*)
FROM (SELECT
        CASE MILES
          WHEN &lt; 250 THEN 'short'
          WHEN BETWEEN 250 AND 2000 THEN 'medium'
          WHEN &gt; 2000 THEN 'long'
        END
      FROM FLIGHTS) AS F(DISTANCE)
GROUP BY DISTANCE</strong></pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="rrefsqlj19433.html" title="许多语句和表达式的语法包括术语“表达式”或特定种类的表达式（如tableSubquery）的术语。在语句中这些指定的位置允许使用表达式。">SQL表达式</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="crefsqlj29911.html" title="您可以使用JDBC API中的PreparedStatement方法准备语句，以允许这些语句具有未指定值的参数。这些参数称为动态参数，并以问号（？）表示。">动态参数</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rrefselectexpression.html" title="selectExpression是基本的SELECT-FROM-WHERE构造，用于基于其他表的过滤和投影值来构建表值。">selectExpression</a></div>
<div><a href="rreftableexpression.html" title="tableExpression在FROM子句中指定表，视图或函数。">tableExpression</a></div>
<div><a href="rrefsqljnextvaluefor.html" title="NEXT VALUE FOR表达式从序列生成器中检索下一个值。">表达式的下一个值</a></div>
<div><a href="rrefsqlj11277.html" title="VALUES表达式允许从其他值构造行或表。">VALUES表达</a></div>
<div><a href="rrefsqlj1080779.html" title="从最高到最低的操作顺序如下。">表达式优先</a></div>
<div><a href="rrefsqlj23075.html" title="布尔表达式是产生布尔值的表达式。">布尔表达式</a></div>
<div><a href="rrefcasenullif.html" title="NULLIF函数可用于Derby中的条件表达式。">NULLIF函数</a></div>
<div><a href="rreffunccoalesce.html" title="COALESCE函数采用两个或多个兼容参数，并返回不为null的第一个参数。">COALESCE功能</a></div>
</div>
</div>



</body></html>