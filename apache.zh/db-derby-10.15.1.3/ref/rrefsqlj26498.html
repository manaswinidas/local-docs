<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="UPDATE statement">
<meta name="abstract" content="The UPDATE statement updates the value of one or more columns of a table.">
<meta name="description" content="The UPDATE statement updates the value of one or more columns of a table.">
<meta name="DC.subject" content="UPDATE statement">
<meta name="keywords" content="UPDATE statement">
<meta name="DC.Relation" scheme="URI" content="crefsqlj39374.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefsqlj26498">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>UPDATE语句</title>
</head>
<body id="rrefsqlj26498" ><a name="rrefsqlj26498"><!-- --></a>


<h1 class="topictitle1">UPDATE语句</h1>



<div><p>UPDATE语句更新表的一个或多个列的值。</p>

<div class="section"><h2 class="sectiontitle">句法</h2> <pre><strong>{
    UPDATE <em><a href="rreftablename.html#rreftablename">tableName</a></em> [ [ AS ] <em><a href="rrefcorrelationname.html#rrefcorrelationname">correlationName</a></em> ] ]
        SET <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> = <em>value</em>
        [ , <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> = <em>value</em> ]*
        [ <em><a href="rrefsqlj33602.html#rrefsqlj33602">WHERE clause</a></em> ] 
  |
    UPDATE <em><a href="rreftablename.html#rreftablename">tableName</a></em>
        SET <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> = <em>value</em>
        [ , <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> = <em>value</em> ]*
        <em><a href="rrefsqlj15309.html#rrefsqlj15309">WHERE CURRENT OF</a></em>
}</strong></pre>
 
<p>哪里<var class="varname">value</var>定义如下：</p>

<pre><strong><em>expression</em> | DEFAULT</strong></pre>

<p>第一种语法形式称为搜索更新，它为WHERE子句求值为TRUE的表的所有行更新一个或多个列的值。</p>

<p>第二种语法形式称为定位更新，它更新打开的可更新游标的当前行上的一列或多列。如果在用于生成游标的SELECT语句的<a href="rrefsqlj31783.html#rrefsqlj31783">FOR UPDATE子句</a>中指定了列，则只能更新那些列。如果未指定任何列，或者select语句不包含FOR UPDATE子句，则所有列均可更新。</p>
 
<p>为更新值指定DEFAULT会将列的值设置为该表定义的默认值。</p>

<p>DEFAULT文字是可以直接分配给生成的列的唯一值。每当您更改生成的列的<em><a href="rrefsqljgenerationclause.html#rrefsqljgenerationclause">generationClause</a></em>引用的列的值时， <span>Derby都会</span>重新计算生成的列的值。</p>
 </div>

<div class="example"><h2 class="sectiontitle">例</h2> <pre><strong><span>-- All the employees except the manager of
-- department (WORKDEPT) 'E21' have been temporarily reassigned. 
-- Indicate this by changing their job (JOB) to NULL and their pay
-- (SALARY, BONUS, COMM) values to zero in the EMPLOYEE table.</span> 
UPDATE EMPLOYEE
  SET JOB=NULL, SALARY=0, BONUS=0, COMM=0
  WHERE WORKDEPT = 'E21' AND JOB &lt;&gt; 'MANAGER'

-- PROMOTE the job (JOB) of employees without a specific job title to MANAGER
UPDATE EMPLOYEE
	SET JOB = 'MANAGER'
	WHERE JOB IS NULL;
<span>// Increase the project staffing (PRSTAFF) by 1.5 for all projects</span>
stmt.executeUpdate("UPDATE PROJECT SET PRSTAFF = "
"PRSTAFF + 1.5" +
"WHERE CURRENT OF" + ResultSet.getCursorName());

<span>-- Change the job (JOB) of employee number (EMPNO) '000290' in the EMPLOYEE table 
-- to its DEFAULT value which is NULL</span>
UPDATE EMPLOYEE
  SET JOB = DEFAULT
  WHERE EMPNO = '000290'
</strong></pre>
 </div>

<div class="section"><h2 class="sectiontitle">语句依赖系统</h2> <p>搜索到的update语句取决于要更新的表，其所有集合（存储单元，如堆或索引），其所有约束以及WHERE子句或SET表达式中命名的任何其他表。对于准备好的搜索到的更新语句的目标表的CREATE或DROP INDEX语句或ALTER TABLE语句会使准备好的搜索到的更新语句无效。</p>
 <p>定位的更新语句取决于游标和游标引用的任何表。即使尚未打开游标，也可以编译定位的更新。但是，使用JDBC <em>close</em>方法删除打开的游标会使定位的更新无效。</p>
 <p>准备好的定位更新的目标表的CREATE或DROP INDEX语句或ALTER TABLE语句会使准备好的定位更新语句无效。</p>
 <p>如果后者使用别名，则删除别名会使准备好的更新语句无效。</p>
 <p>在更新的目标表上删除或添加触发器会使更新语句无效。</p>
 </div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="crefsqlj39374.html" title="">语句</a></div>
</div>
</div>



</body></html>