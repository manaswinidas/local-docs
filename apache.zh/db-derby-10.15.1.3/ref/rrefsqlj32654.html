<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="GROUP BY clause">
<meta name="abstract" content="A GROUP BY clause, part of a selectExpression, groups a result into subsets that have matching values for one or more columns.">
<meta name="description" content="A GROUP BY clause, part of a selectExpression, groups a result into subsets that have matching values for one or more columns.">
<meta name="DC.subject" content="GROUP BY clause">
<meta name="keywords" content="GROUP BY clause">
<meta name="DC.Relation" scheme="URI" content="rrefclauses.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefsqlj32654">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>GROUP BY子句</title>
</head>
<body id="rrefsqlj32654" ><a name="rrefsqlj32654"><!-- --></a>


<h1 class="topictitle1">GROUP BY子句</h1>



<div><p>GROUP BY子句是<em>selectExpression的</em>一部分，将结果分组为一个子集，这些子集具有一个或多个列的匹配值。</p>

<div class="section">
<p>在每个组中，没有两个行具有一个或多个分组列的相同值。出于分组目的，NULL被认为是等效的。有关更多信息，请参见<em><a href="rrefselectexpression.html">selectExpression</a></em> 。</p>

<p>通常，您将GROUP BY子句与聚合表达式结合使用。</p>

<p>使用ROLLUP语法，可以指定应一次计算多个级别的分组。</p>

</div>

<div class="section"><h2 class="sectiontitle">句法</h2>
    <pre><strong>
GROUP BY 
{
    <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> [ , <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> ]* |
    ROLLUP ( <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> [ , <em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em> ]* )
}</strong></pre>

<p><em><a href="rrefcolumnname.html#rrefcolumnname">columnName</a></em>必须是查询当前范围中的一列；当前范围之外的查询块中不能有任何列。例如，如果GROUP BY子句在子查询中，则它不能引用外部查询中的列。</p>
 <p>具有GROUP BY子句的<em><a href="rrefselectexpression.html#rrefselectexpression">selectExpression中</a></em>的<em>selectItems</em>必须仅包含聚合或分组列。</p>
 </div>

<div class="example"><h2 class="sectiontitle">例子</h2>
<pre><strong><span>-- find the average flying_times of flights grouped by
-- airport</span>
SELECT AVG (flying_time), orig_airport
FROM Flights
GROUP BY orig_airport

SELECT MAX(city_name), region
FROM Cities, Countries
WHERE Cities.country_ISO_code = Countries.country_ISO_code
GROUP BY region

<span>-- group by an a smallint</span>
SELECT ID, AVG(SALARY)
FROM SAMP.STAFF
GROUP BY ID

<span>-- Get the AVGSALARY and EMPCOUNT columns, and the DEPTNO column using the AS clause
-- And group by the WORKDEPT column using the correlation name OTHERS</span>
SELECT OTHERS.WORKDEPT AS DEPTNO,
AVG(OTHERS.SALARY) AS AVGSALARY,
COUNT(*) AS EMPCOUNT
FROM SAMP.EMPLOYEE OTHERS
GROUP BY OTHERS.WORKDEPT

<span>-- Compute sub-totals of Sales_History data, grouping it by Region, by
-- (Region, State), and by (Region, State, Product), as well as computing
-- an overall total of the sales for all Regions, States, and Products:</span>
SELECT Region, State, Product, SUM(Sales) Total_Sales
FROM Sales_History 
GROUP BY ROLLUP(Region, State, Product)
</strong></pre>
 </div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="rrefclauses.html" title="">SQL子句</a></div>
</div>
</div>



</body></html>