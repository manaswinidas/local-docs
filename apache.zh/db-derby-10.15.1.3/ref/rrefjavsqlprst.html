<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Prepared statements and streaming columns">
<meta name="abstract" content="The setXXXStream methods request stream data between the application and the database.">
<meta name="description" content="The setXXXStream methods request stream data between the application and the database.">
<meta name="DC.subject" content="setXXXStream requests, Streaming columns, as IN parameters to prepared statement, setBinaryStream, setAsciiStream, setUnicodeStream, Unicode, setCharacterStream">
<meta name="keywords" content="setXXXStream requests, Streaming columns, as IN parameters to prepared statement, setBinaryStream, setAsciiStream, setUnicodeStream, Unicode, setCharacterStream">
<meta name="DC.Relation" scheme="URI" content="rrefjdbc29874.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrefjavsqlprst">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>准备好的语句和流式传输列</title>
</head>
<body id="rrefjavsqlprst" ><a name="rrefjavsqlprst"><!-- --></a>


<h1 class="topictitle1">准备好的语句和流式传输列</h1>



<div><p><em>setXXXStream</em>方法请求应用程序和数据库之间的流数据。</p>

<div class="section"><div class="p">JDBC允许将IN参数设置为Java输入流，以便以较小的块形式传递大量数据。运行该语句时，JDBC驱动程序将对此输入流进行重复调用。
<span>Derby</span>支持<em>PreparedStatement</em>对象的以下JDBC流方法：<ul>
<li><em>setBinaryStream</em> <p>用于包含未解释字节的流</p>
</li>

<li><em>setAsciiStream</em>   <p>用于包含ASCII字符的流</p>
</li>

<li><em>setCharacterStream</em>   <p>用于包含字符的流</p>
</li>

</ul>
</div>

<div class="note"><span class="notetitle">注意：</span> <span>Derby</span>不支持<em>setNCharacterStream</em>方法或不<em>建议</em>使用的<em>setUnicodeStream</em>方法。</div>

<div class="p"><div class="note"><span class="notetitle">注意：</span>这些方法不需要您指定流的长度。但是，如果在流对象的大小大于单个页面的LOB时省略了length参数，则稍后再检索LOB的长度时，性能将会受到影响。如果您只是插入或读取数据，则性能不会受到影响。</div>
</div>

<p>传递<em>的setBinaryStream</em>和<em>调用setAsciiStream</em>流对象可以是一个标准Java流对象或用户自己的子类，实现了标准<em>java.io.InputStream</em>接口。传递给该<em>的setCharacterStream</em>对象必须是抽象<em>java.io.的子类读者</em>班。</p>

<p>根据JDBC标准，流只能以下表中显示的数据类型存储在列中。单词“ Preferred”表示流类型的首选目标数据类型。请参见<a href="rrefjdbc20377.html#rrefjdbc20377__jdbc31241">java.sql的映射。类型转换为SQL类型</a> 。</p>


<div class="tablenoborder"><a name="rrefjavsqlprst__jdbc25312"><!-- --></a><table cellspacing="0" cellpadding="4" id="rrefjavsqlprst__jdbc25312" border="1" summary="For each JDBC column data type, this table lists the corresponding Java data type (if any) and shows whether each of the stream types can be stored in columns of that type." frame="border" rules="all"><caption>表格1。流式JDBC数据类型</caption>





<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="24%" id="N10150">列数据类型</th>

<th valign="bottom" width="21%" id="N10157">对应的Java类型</th>

<th valign="bottom" width="18%" id="N1015E">AsciiStream</th>

<th valign="bottom" width="19%" id="N10165">字符流</th>

<th valign="bottom" width="18%" id="N1016C">BinaryStream</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="24%" headers="N10150">CLOB</td>

<td valign="top" width="21%" headers="N10157"><em>java.sql。b</em></td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">没有</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">焦炭</td>

<td valign="top" width="21%" headers="N10157">没有</td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">没有</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">VARCHAR</td>

<td valign="top" width="21%" headers="N10157">没有</td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">没有</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">LONGVARCHAR</td>

<td valign="top" width="21%" headers="N10157">没有</td>

<td valign="top" width="18%" headers="N1015E">首选的</td>

<td valign="top" width="19%" headers="N10165">首选的</td>

<td valign="top" width="18%" headers="N1016C">没有</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">二进制</td>

<td valign="top" width="21%" headers="N10157">没有</td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">是</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">BLOB</td>

<td valign="top" width="21%" headers="N10157"><em>java.sql。斑点</em></td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">是</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">VARBINARY</td>

<td valign="top" width="21%" headers="N10157">没有</td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">是</td>

</tr>

<tr>
<td valign="top" width="24%" headers="N10150">LONGVARBINARY</td>

<td valign="top" width="21%" headers="N10157">没有</td>

<td valign="top" width="18%" headers="N1015E">是</td>

<td valign="top" width="19%" headers="N10165">是</td>

<td valign="top" width="18%" headers="N1016C">首选的</td>

</tr>

</tbody>

</table>
</div>

<div class="note"><span class="notetitle">注意：</span>流不能存储在其他内置数据类型的列或用户定义的数据类型的列中。</div>
</div>

<div class="example"><h2 class="sectiontitle">例</h2><p>以下代码片段显示了用户如何存储流式，ASCII编码的<em>java.io。LONG VARCHAR列中的文件</em> ：</p>

<pre>    Statement s = conn.createStatement();
    s.executeUpdate("CREATE TABLE atable (a INT, b LONG VARCHAR)");
    conn.commit();

    java.io.File file = new java.io.File("derby.txt");
    int fileLength = (int) file.length();

    <strong>// create an input stream</strong>
    java.io.InputStream fin = new java.io.FileInputStream(file);
    PreparedStatement ps = conn.prepareStatement(
        "INSERT INTO atable VALUES (?, ?)");
    ps.setInt(1, 1);

    <strong>// set the value of the input parameter to the input stream</strong>
    ps.setAsciiStream(2, fin, fileLength);
    ps.execute();
    conn.commit();</pre>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="rrefjdbc29874.html" title="Derby提供了所有必需的JDBC类型转换，并且还允许为每种类型使用单独的setXXX方法，就像进行了setObject（Value，JDBCTypeCode）调用一样。">java.sql。PreparedStatement接口</a></div>
</div>
</div>



</body></html>