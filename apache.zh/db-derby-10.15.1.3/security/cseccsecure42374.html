<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring user authentication">
<meta name="abstract" content="By default, Derby runs without any credentials checking. This situation may be fine for many shrink-wrapped, embedded applications. However, it means that anyone can connect to an unsecured database and steal or corrupt the data there. Fortunately, it&#39;s easy to frustrate these attacks by requiring authentication.">
<meta name="description" content="By default, Derby runs without any credentials checking. This situation may be fine for many shrink-wrapped, embedded applications. However, it means that anyone can connect to an unsecured database and steal or corrupt the data there. Fortunately, it&#39;s easy to frustrate these attacks by requiring authentication.">
<meta name="DC.subject" content="user authentication, overview, authentication, users, overview">
<meta name="keywords" content="user authentication, overview, authentication, users, overview">
<meta name="DC.Relation" scheme="URI" content="cseccsecuree.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure12392.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure24366.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure90988.html">
<meta name="DC.Relation" scheme="URI" content="csecssl.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureidentity.html">
<meta name="DC.Relation" scheme="URI" content="csecauthorization.html">
<meta name="DC.Relation" scheme="URI" content="csecjavasecurity.html">
<meta name="DC.Relation" scheme="URI" content="csecnetservfileperms.html">
<meta name="DC.Relation" scheme="URI" content="csecputtogether.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure41285.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecurenativeauth.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure21561.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecure557.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure79358.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecure305.html">
<meta name="DC.Relation" scheme="URI" content="csecnetservauthent.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cseccsecure42374">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>配置用户身份验证</title>
</head>
<body id="cseccsecure42374" ><a name="cseccsecure42374"><!-- --></a>


<h1 class="topictitle1">配置用户身份验证</h1>



<div><p>默认情况下， <span>Derby</span>在运行时不进行任何凭据检查。对于许多收缩包装的嵌入式应用程序，这种情况可能很好。但是，这意味着任何人都可以连接到不安全的数据库并窃取或破坏那里的数据。幸运的是，通过身份验证很容易阻止这些攻击。</p>

<p><span>Derby</span>支持用户身份验证和用户授权。<em>用户身份验证</em>确定用户是否为有效用户。它建立用户的身份。
<em>用户授权</em>确定用户建立的身份可以执行哪些操作。强烈建议您在生产中使用的任何多用户数据库上实施身份验证和授权。</p>

<p>启用用户身份验证后，请求连接的用户必须提供有效的名称和密码， <span>Derby会</span>根据为系统定义的用户资源库进行验证。在<span>Derby</span>将用户验证为有效之后， <a href="csecauthorization.html#csecauthorization">用户授权将</a>确定用户可以对用户请求连接的数据库执行哪些操作。</p>

<p><span>Derby</span>支持三种身份验证方案：</p>

<dl>

<dt class="dlterm">LDAP</dt>

<dd>在此方案中，客户将<span>Derby</span>指向外部LDAP目录服务。客户使用外部LDAP服务管理用户，而<span>Derby</span>从LDAP检索凭证。有关更多信息，请参见<a href="cseccsecure41285.html">配置LDAP身份验证</a> 。</dd>



<dt class="dlterm">原生</dt>

<dd>在此方案中，用户名和密码存储在<span>Derby</span>数据库中。有关详细信息，请参见<a href="cseccsecurenativeauth.html">配置NATIVE身份验证</a> 。</dd>



<dt class="dlterm">用户自定义</dt>

<dd>在此方案中，客户提供了验证用户所需的所有逻辑。有关更多信息，请参见<a href="cseccsecure21561.html">使用用户定义的类指定身份验证</a> 。</dd>


</dl>

<p>您可以为特定数据库或整个系统定义用户存储库，具体取决于您使用系统范围的属性还是数据库范围的属性。</p>

<p>目录服务存储名称和这些名称的属性。目录服务的典型用法是存储计算机系统的用户名和密码。<span>Derby</span>使用Java命名和目录接口（JNDI）与外部目录服务进行交互，这些外部目录服务可以提供用户名和密码的身份验证。</p>

<p>启用<span>Derby</span>用户身份验证并且<span>Derby</span>使用外部目录服务时，该体系结构看起来如下图所示。该应用程序可以是具有嵌入式<span>Derby</span>引擎的单用户应用程序，也可以是多用户应用程序服务器。</p>

<div class="fignone"><span class="figcap">图1。使用外部服务的<span>Derby</span>用户身份验证</span>
<br><img src="authentic_os.gif" alt="该图显示了在允许访问Derby数据库之前，应用程序如何通过外部目录服务通过Derby用户身份验证。"><br>
</div>

<p><span>Derby</span>始终嵌入在另一个Java应用程序中运行，无论该应用程序是单用户应用程序还是多用户应用程序服务器或连接框架。</p>

<p>一个数据库一次只能访问一个JVM，因此可以部署一个系统，在该系统中嵌入了<span>Derby</span>的应用程序（而不是<span>Derby）</span>通过连接到外部目录服务来处理用户身份验证。该应用程序可以是具有嵌入式<span>Derby</span>引擎的单用户应用程序，也可以是多用户应用程序服务器。下图显示了这种部署。</p>

<div class="fignone"><span class="figcap">图2。使用外部服务的应用程序用户身份验证</span>
<br><img src="appauth_os.gif" alt="该图显示了外部目录服务如何在允许访问Derby数据库之前提供应用程序用户身份验证。"><br>
</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="cseccsecure41285.html">配置LDAP认证</a></strong><br>您可以允许Derby针对企业中现有的LDAP目录服务对用户进行身份验证。LDAP（轻型目录访问协议）提供了在TCP / IP上运行的开放目录访问协议。 LDAP目录服务可以快速验证用户名和密码。</li>
<li class="ulchildlink"><strong><a href="cseccsecurenativeauth.html">配置NATIVE身份验证</a></strong><br>Derby最简单的身份验证机制是NATIVE身份验证。</li>
<li class="ulchildlink"><strong><a href="cseccsecure21561.html">使用用户定义的类指定身份验证</a></strong><br>您可以将derby.authentication.provider属性设置为实现公共接口org.apache.derby.authentication的类的全名。UserAuthenticator。</li>
<li class="ulchildlink"><strong><a href="rseccsecure557.html">用户身份验证属性列表</a></strong><br>下表总结了与用户身份验证有关的Derby属性。</li>
<li class="ulchildlink"><strong><a href="cseccsecure79358.html">为Derby用户身份验证编写应用程序</a></strong><br>要将用户身份验证编程到Derby应用程序中，请使用DriverManager.getConnection调用指定用户名和密码。</li>
<li class="ulchildlink"><strong><a href="rseccsecure305.html">用户身份验证失败的登录失败</a></strong><br>如果打开了用户身份验证，但未提供有效的用户名和密码，则会引发SQLException 08004。</li>
<li class="ulchildlink"><strong><a href="csecnetservauthent.html">在特殊情况下配置网络服务器身份验证</a></strong><br>在某些情况下，某些高级网络服务器配置功能可能会很有用。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cseccsecuree.html" title="手册的此部分描述了保护Derby数据库所涉及的特定任务。">第二部分：为Derby配置安全性</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cseccsecure12392.html" title="在大多数情况下，您可以通过使用属性来启用Derby安全功能。了解为您的环境设置属性的最佳方法很重要。">基本安全配置任务</a></div>
<div><a href="cseccsecure24366.html" title="Derby为您提供了一种加密磁盘上数据的方法。">配置数据库加密</a></div>
<div><a href="cseccsecure90988.html" title="在Java SE环境中，Derby可以检测jar文件上的数字签名。尝试从存储在数据库中的已签名jar文件中加载类时，Derby将验证签名的有效性。">使用签名的jar文件</a></div>
<div><a href="csecssl.html" title="默认情况下，网络流量以明文形式在Derby客户端和服务器之间传输。">配置SSL / TLS</a></div>
<div><a href="cseccsecureidentity.html" title="Derby提供两种身份，系统范围的身份和特定于数据库的身份。">了解Derby中的身份</a></div>
<div><a href="csecauthorization.html" title="在身份验证确定某人是否为合法数据库用户的同时，授权确定可以通过用户身份执行的操作。">配置用户授权</a></div>
<div><a href="csecjavasecurity.html" title="Java安全管理器使您可以减少应用程序可能造成的损害。">配置Java安全性</a></div>
<div><a href="csecnetservfileperms.html" title="其他文件保护在某些文件系统上可用，包括Windows NTFS，Unix和Linux。您可以配置Derby以利用这些额外的文件保护。">限制文件权限</a></div>
<div><a href="csecputtogether.html" title="本节说明如何启用所有可用的Derby防御。">放在一起</a></div>
</div>
</div>

</body>
</html>