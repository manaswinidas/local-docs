<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Using fine-grained user authorization">
<meta name="abstract" content="When the SQL standard authorization mode is enabled, object owners can use the GRANT and REVOKE SQL statements to set the user privileges for specific database objects or for specific SQL actions. They can also use roles to administer privileges.">
<meta name="description" content="When the SQL standard authorization mode is enabled, object owners can use the GRANT and REVOKE SQL statements to set the user privileges for specific database objects or for specific SQL actions. They can also use roles to administer privileges.">
<meta name="DC.subject" content="user authorizations, fine-grained, granting, revoking, PUBLIC, GRANT statement, overview, REVOKE statement, SQL standard authorization mode, invoker rights, versus definer rights, definer rights, versus invoker rights">
<meta name="keywords" content="user authorizations, fine-grained, granting, revoking, PUBLIC, GRANT statement, overview, REVOKE statement, SQL standard authorization mode, invoker rights, versus definer rights, definer rights, versus invoker rights">
<meta name="DC.Relation" scheme="URI" content="csecauthorfine.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureprivileges.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureroles.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecuresqlauthupgrade.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecuresqlauthexceptions.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecurenativeauthex.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cseccsecuregrantrevokeaccess">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>使用细粒度的用户授权</title>
</head>
<body id="cseccsecuregrantrevokeaccess" ><a name="cseccsecuregrantrevokeaccess"><!-- --></a>


<h1 class="topictitle1">使用细粒度的用户授权</h1>



<div><p>启用SQL标准授权模式后，对象所有者可以使用GRANT和REVOKE SQL语句来设置特定数据库对象或特定SQL操作的用户特权。他们还可以使用角色来管理特权。</p>

<div class="p">GRANT语句用于向用户或角色授予特定特权，或向用户或角色授予角色。REVOKE语句用于撤消特权和角色授予。授予和撤销特权为：<ul>
<li>删除</li>

<li>执行</li>

<li>插入</li>

<li>选择</li>

<li>参考资料</li>

<li>触发</li>

<li>更新</li>

</ul>
</div>

<p>创建表，视图，函数，过程，类型或集合时，创建对象的人称为对象的<em>所有者</em> 。只有对象所有者和<a href="cseccsecuredbowner.html">数据库所有者</a>对对象拥有完全特权。在对象所有者向他们授予特权之前，没有其他用户对该对象具有特权。</p>

<p>说对象的特权属于所有者的另一种方式是，将它们称为<em>定义者权限</em> ，而不是<em>调用者权限</em> 。这是SQL标准使用的术语。</p>

<p>有关GRANT和REVOKE语句的更多信息，请参见《 <span><em>Derby参考手册</em></span> 》。</p>

<div class="section"><h2 class="sectiontitle">公共和个人用户权限</h2>
<p>对象所有者可以为特定用户，特定角色或所有用户授予和撤销特权。</p>

<p>关键字PUBLIC用于指定所有用户。当指定PUBLIC时，特权会影响所有当前和将来的用户。授予和撤销给PUBLIC以及个人用户或角色的特权是独立的。例如，假设对表具有SELECT特权<samp class="codeph">t</samp>被授予PUBLIC和用户<samp class="codeph">harry</samp> 。SELECT权限后来被用户撤销<samp class="codeph">harry</samp> ，但用户<samp class="codeph">harry</samp>有权使用桌子<samp class="codeph">t</samp>通过PUBLIC特权。</p>

<div class="note"><span class="notetitle">例外：</span>创建视图，触发器或约束时， <span>Derby</span>首先检查以确定用户级别是否具有所需的特权。如果您具有用户级特权，则将创建该对象并依赖于该用户级特权。如果您在用户级别没有必需的特权，则<span>Derby会</span>检查以确定您是否在PUBLIC级别具有必需的特权。如果您具有PUBLIC级别的特权，则将创建对象并依赖于该PUBLIC级别的特权。创建对象后，如果对象所依赖的特权被撤销，该对象将被自动删除。
<span>Derby</span>不会尝试确定您是否具有其他特权可以代替被撤消的特权。
<dl>

<dt class="dlterm">例子1</dt>

<dd>用户<samp class="codeph">zhi</samp>创建表<samp class="codeph">t1</samp>并授予用户SELECT权限<samp class="codeph">harry</samp>桌子上<samp class="codeph">t1</samp> 。用户<samp class="codeph">zhi</samp>向表上的PUBLIC授予SELECT特权<samp class="codeph">t1</samp> 。用户<samp class="codeph">harry</samp>创建视图<samp class="codeph">v1</samp>与声明<samp class="codeph">SELECT * from zhi.t1</samp> 。该视图取决于该用户的用户级别特权<samp class="codeph">harry</samp>有<samp class="codeph">t1</samp> 。随后，用户<samp class="codeph">zhi</samp>撤消用户的SELECT特权<samp class="codeph">harry</samp>桌子上<samp class="codeph">t1</samp> 。结果，视图<samp class="codeph">harry.v1</samp>被丢弃。</dd>



<dt class="dlterm">例子2</dt>

<dd>用户<samp class="codeph">anita</samp>创建表<samp class="codeph">t1</samp>并向PUBLIC授予SELECT特权。用户<samp class="codeph">harry</samp>创建视图<samp class="codeph">v1</samp>与声明<samp class="codeph">SELECT * from anita.t1</samp> 。该视图取决于该用户的PUBLIC级别特权<samp class="codeph">harry</samp>有<samp class="codeph">t1</samp> ，因为用户<samp class="codeph">harry</samp>在表上没有用户级特权<samp class="codeph">t1</samp>当他创建视图时<samp class="codeph">harry.v1</samp> 。随后，用户<samp class="codeph">anita</samp>向用户授予SELECT特权<samp class="codeph">harry</samp>桌子上<samp class="codeph">anita.t1</samp> 。风景<samp class="codeph">harry.v1</samp>继续取决于该用户的PUBLIC级别特权<samp class="codeph">harry</samp>有<samp class="codeph">t1</samp> 。当用户<samp class="codeph">anita</samp>从表上的PUBLIC撤消SELECT特权<samp class="codeph">t1</samp> ， 风景<samp class="codeph">harry.v1</samp>被丢弃。</dd>


</dl>

<p>有关更多信息<a href="cseccsecureprivileges.html">，</a>请参见<a href="cseccsecureprivileges.html">视图，触发器，约束和生成的列的特权</a> 。</p>

</div>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="csecauthorfine.html" title="您可以使用细粒度的用户授权（也称为SQL标准授权）来限制对特定数据的访问。">配置细粒度的用户授权</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cseccsecureprivileges.html" title="视图，触发器，约束和生成的列以视图，触发器，约束或生成的列的所有者的特权运行。">视图，触发器，约束和生成的列的特权</a></div>
<div><a href="cseccsecureroles.html" title="启用SQL标准授权模式后，对象所有者可以使用SQL角色工具来管理特权。">使用SQL角色</a></div>
<div><a href="cseccsecuresqlauthupgrade.html" title="以后可以通过身份验证和SQL授权来屏蔽未受保护的旧数据库。">升级旧数据库以使用SQL标准授权</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rseccsecuresqlauthexceptions.html" title="SQL授权发生错误时，将返回SQL异常。">SQL标准授权例外</a></div>
<div><a href="rseccsecurenativeauthex.html" title="该示例由程序NativeAuthenticationExample.java组成，该程序显示了如何通过嵌入式或客户端驱动程序使用Derby的NATIVE用户身份验证和SQL授权。">NATIVE身份验证和SQL授权示例</a></div>
</div>
</div>



</body></html>