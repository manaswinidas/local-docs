<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring NATIVE authentication">
<meta name="abstract" content="Derby's simplest authentication mechanism is NATIVE authentication.">
<meta name="description" content="Derby's simplest authentication mechanism is NATIVE authentication.">
<meta name="DC.subject" content="user authentication, NATIVE authentication, overview">
<meta name="keywords" content="user authentication, NATIVE authentication, overview">
<meta name="DC.Relation" scheme="URI" content="cseccsecure42374.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure41285.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure21561.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecure557.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure79358.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecure305.html">
<meta name="DC.Relation" scheme="URI" content="csecnetservauthent.html">
<meta name="DC.Relation" scheme="URI" content="csecnativeenable.html">
<meta name="DC.Relation" scheme="URI" content="csecnativecreddb.html">
<meta name="DC.Relation" scheme="URI" content="csecnativeotherprops.html">
<meta name="DC.Relation" scheme="URI" content="csecnativemanagecreds.html">
<meta name="DC.Relation" scheme="URI" content="csecnativeconvert.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cseccsecurenativeauth">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>配置NATIVE身份验证</title>
</head>
<body id="cseccsecurenativeauth" ><a name="cseccsecurenativeauth"><!-- --></a>


<h1 class="topictitle1">配置NATIVE身份验证</h1>



<div><p><span>Derby</span>最简单的身份验证机制是NATIVE身份验证。</p>

<p>当您使用NATIVE身份验证时，用户名和加密的密码存储在数据库中。您可以为此指定一个专用的凭据数据库，也可以将凭据存储在用于应用程序数据的同一数据库中。凭据存储在数据库的SYSUSERS系统表中。</p>

<p>要配置NATIVE身份验证，请按照下列步骤。</p>

<ol>
<li>使用<samp class="codeph">SYSCS_UTIL.SYSCS_CREATE_USER</samp>添加<a href="cseccsecuredbowner.html">数据库所有者</a>凭据的系统过程。请记住，数据库所有者是创建数据库的用户。</li>

<li>添加其他用户的凭据。</li>

<li>关闭数据库，然后重新启动它。重新启动数据库后，将启用NATIVE身份验证。</li>

</ol>

<p>例如，您可以发出以下命令：</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij version 10.11
ij&gt; <strong>connect 'jdbc:derby:testdb;create=true;user=tquist';</strong>
ij&gt; -- the Database Owner must be the first user you create
<strong>call SYSCS_UTIL.SYSCS_CREATE_USER( 'tquist', 'tquist' );</strong>
0 rows inserted/updated/deleted
ij&gt; -- now add other users
<strong>call SYSCS_UTIL.SYSCS_CREATE_USER( 'thardy', 'thardy' );</strong>
0 rows inserted/updated/deleted
ij&gt; <strong>call SYSCS_UTIL.SYSCS_CREATE_USER( 'jhallett', 'jhallett' );</strong>
0 rows inserted/updated/deleted
ij&gt; <strong>call SYSCS_UTIL.SYSCS_CREATE_USER( 'mchrysta', 'mchrysta' );</strong>
0 rows inserted/updated/deleted
ij&gt; -- shut down the database in order to turn on NATIVE authentication
<strong>connect 'jdbc:derby:testdb;shutdown=true';</strong>
ERROR 08006: Database 'testdb' shutdown.
ij&gt; -- these connection attempts fail because of bad credentials
<strong>connect 'jdbc:derby:testdb;user=tquist';</strong>
ERROR 08004: Connection authentication failure occurred.  Reason: Invalid authentication..
ij&gt; <strong>connect 'jdbc:derby:testdb;user=thardy;password=tquist';</strong>
ERROR 08004: Connection authentication failure occurred.  Reason: Invalid authentication..
ij&gt; -- these connection attempts present good credentials, so they succeed
<strong>connect 'jdbc:derby:testdb;user=tquist;password=tquist';</strong>
ij(CONNECTION1)&gt; <strong>connect 'jdbc:derby:testdb;user=thardy;password=thardy';</strong>
ij(CONNECTION2)&gt; <strong>connect 'jdbc:derby:testdb;user=jhallett;password=jhallett';</strong>
ij(CONNECTION3)&gt; <strong>connect 'jdbc:derby:testdb;user=mchrysta;password=mchrysta';</strong>
</pre>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="csecnativeenable.html">显式启用NATIVE身份验证</a></strong><br>您可以使用属性显式打开NATIVE身份验证。</li>
<li class="ulchildlink"><strong><a href="csecnativecreddb.html">使用凭证数据库</a></strong><br>使用NATIVE身份验证，数据库可以通过多种方式中的任何一种成为凭据数据库。</li>
<li class="ulchildlink"><strong><a href="csecnativeotherprops.html">本地身份验证和其他数据库属性</a></strong><br>启用NATIVE身份验证后，Derby的行为就像还设置了derby.connection.requireAuthentication和derby.database.sqlAuthorization属性一样。</li>
<li class="ulchildlink"><strong><a href="csecnativemanagecreds.html">管理用户和密码</a></strong><br>为了管理用户和密码，Derby提供了一组系统过程。</li>
<li class="ulchildlink"><strong><a href="csecnativeconvert.html">转换现有数据库以使用NATIVE身份验证</a></strong><br>如果希望将NATIVE身份验证应用于未创建身份验证的数据库，则该过程会有所不同，具体取决于您指定NATIVE：credentialsDB还是NATIVE：credentialsDB：LOCAL。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cseccsecure42374.html" title="默认情况下，Derby在运行时不进行任何凭据检查。对于许多收缩包装的嵌入式应用程序，这种情况可能很好。但是，这意味着任何人都可以连接到不安全的数据库并窃取或破坏那里的数据。幸运的是，通过身份验证很容易阻止这些攻击。">配置用户认证</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cseccsecure41285.html" title="您可以允许Derby针对企业中现有的LDAP目录服务对用户进行身份验证。LDAP（轻型目录访问协议）提供了在TCP / IP上运行的开放目录访问协议。 LDAP目录服务可以快速验证用户名和密码。">配置LDAP认证</a></div>
<div><a href="cseccsecure21561.html" title="您可以将derby.authentication.provider属性设置为实现公共接口org.apache.derby.authentication的类的全名。UserAuthenticator。">使用用户定义的类指定身份验证</a></div>
<div><a href="cseccsecure79358.html" title="要将用户身份验证编程到Derby应用程序中，请使用DriverManager.getConnection调用指定用户名和密码。">为Derby用户身份验证编写应用程序</a></div>
<div><a href="csecnetservauthent.html" title="在某些情况下，某些高级网络服务器配置功能可能会很有用。">在特殊情况下配置网络服务器身份验证</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rseccsecure557.html" title="下表总结了与用户身份验证有关的Derby属性。">用户身份验证属性列表</a></div>
<div><a href="rseccsecure305.html" title="如果打开了用户身份验证，但未提供有效的用户名和密码，则会引发SQLException 08004。">用户身份验证失败的登录失败</a></div>
</div>
</div>



</body></html>