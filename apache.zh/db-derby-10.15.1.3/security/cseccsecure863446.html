<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Setting up Derby to use your LDAP directory service">
<meta name="abstract" content="When specifying LDAP as your authentication service, you must specify what LDAP server to use.">
<meta name="description" content="When specifying LDAP as your authentication service, you must specify what LDAP server to use.">
<meta name="DC.Relation" scheme="URI" content="cseccsecure41285.html">
<meta name="DC.Relation" scheme="URI" content="csecldapbooting.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure876908.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure863546.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure863676.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure864242.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cseccsecure863446">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>设置Derby以使用您的LDAP目录服务</title>
</head>
<body id="cseccsecure863446" ><a name="cseccsecure863446"><!-- --></a>


<h1 class="topictitle1">设置<span>Derby</span>以使用您的LDAP目录服务</h1>



<div><p>将LDAP指定为身份验证服务时，必须指定要使用的LDAP服务器。</p>

<p>要连接到OpenDS LDAP服务器，请将以下行添加到<span>Derby</span>配置文件中， <samp class="codeph">derby.properties</samp> 。您可能还希望将这些属性存储在数据库中，并通过设置<samp class="codeph">derby.database.propertiesOnly</samp>属性（有关如何锁定数据库属性的示例，请参阅<a href="csecauthorcoarse.html">配置粗粒度用户授权</a> ）：</p>

<pre>derby.connection.requireAuthentication=true
derby.authentication.server=ldap://127.0.0.1:1389
derby.authentication.provider=LDAP
derby.authentication.ldap.searchAuthPW=<em>YOUR_SELECTED_PASSWORD</em>
derby.authentication.ldap.searchAuthDN=cn=Directory Manager
derby.authentication.ldap.searchBase=dc=example,dc=com
derby.authentication.ldap.searchFilter=objectClass=person</pre>

<p>最后，开始<samp class="codeph">ij</samp>在创建您的目录的目录中<samp class="codeph">derby.properties</samp> （这可确保嵌入式<span>Derby</span>具备上面列出的身份验证设置）。运行以下命令：</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij version 10.11
ij&gt; <strong>connect 'jdbc:derby:testdb;create=true;user=tquist;password=tquist';</strong></pre>

<p>尝试使用错误的凭据再次连接，以验证身份验证是否有效：</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij version 10.11
ij&gt; <strong>connect 'jdbc:derby:testdb;create=true;user=tquist;password=badpassword';</strong>
ERROR 08004: Connection authentication failure occurred. Reason: Invalid authentication...</pre>

<p>设置属性时<samp class="codeph">derby.authentication.server</samp> ，您可以仅使用以下名称指定LDAP服务器：服务器名称，服务器名称及其端口号（以冒号或“ <samp class="codeph">ldap</samp>如示例中所示的URL。如果不提供完整的URL，则<span>Derby</span>默认情况下将使用未加密的LDAP。要使用SSL加密的LDAP，请指定以开头的URL <samp class="codeph">ldaps://</samp> 。有关的详细信息<samp class="codeph">derby.authentication.server</samp>和<samp class="codeph">derby.authentication.provider</samp>属性，请参阅《 <span><em>Derby参考手册》</em></span> 。</p>

<div class="p"><div class="note"><span class="notetitle">注意：</span>如果在Java安全管理器下运行Java DB，则策略文件将需要授予<span>Derby</span>特权以连接到LDAP服务器。要查看如何执行此操作，请查阅<a href="rsecpolicysample.html">样本定制Java安全策略文件中</a>显示的<a href="rsecpolicysample.html">策略文件</a> 。具体来说，您需要授予<samp class="codeph">java.net.SocketPermission</samp>至<samp class="codeph">derby.jar</samp> ，以便允许<span>Derby</span>代码与LDAP服务器联系以执行身份验证。</div>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cseccsecure41285.html" title="您可以允许Derby针对企业中现有的LDAP目录服务对用户进行身份验证。LDAP（轻型目录访问协议）提供了在TCP / IP上运行的开放目录访问协议。 LDAP目录服务可以快速验证用户名和密码。">配置LDAP认证</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="csecldapbooting.html" title="首先，启动OpenDS QuickSetup JNLP（Java Web Start）安装程序，然后按照安装步骤设置目录服务器。">引导LDAP服务器</a></div>
<div><a href="cseccsecure876908.html" title="在LDAP系统中，用户在目录中按层次结构组织为一组条目。条目是由唯一名称（称为DN（专有名称））标识的一组名称-属性对。">来宾访问以搜索DN</a></div>
<div><a href="cseccsecure863546.html" title="出于性能原因，LDAP目录服务器应与Derby位于同一LAN中。Derby不会在本地缓存用户的凭据信息，因此每次用户连接时都必须连接到目录服务器。">LDAP性能问题</a></div>
<div><a href="cseccsecure863676.html" title="Derby不支持LDAP组。">LDAP限制</a></div>
<div><a href="cseccsecure864242.html" title="Derby允许您设置一些高级JNDI属性，可以使用任何受支持的设置Derby属性的方式进行设置。通常，将这些设置为与配置外部身份验证服务相同的级别（数据库或系统）。">外部目录服务的特定于JNDI的属性</a></div>
</div>
</div>



</body></html>