<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring database encryption">
<meta name="abstract" content="Derby provides a way for you to encrypt your data on disk.">
<meta name="description" content="Derby provides a way for you to encrypt your data on disk.">
<meta name="DC.subject" content="database encryption, databases, encrypting">
<meta name="keywords" content="database encryption, databases, encrypting">
<meta name="DC.Relation" scheme="URI" content="cseccsecuree.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure12392.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure90988.html">
<meta name="DC.Relation" scheme="URI" content="csecssl.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureidentity.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure42374.html">
<meta name="DC.Relation" scheme="URI" content="csecauthorization.html">
<meta name="DC.Relation" scheme="URI" content="csecjavasecurity.html">
<meta name="DC.Relation" scheme="URI" content="csecnetservfileperms.html">
<meta name="DC.Relation" scheme="URI" content="csecputtogether.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure96815.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure97760.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cseccsecure24366">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>配置数据库加密</title>
</head>
<body id="cseccsecure24366" ><a name="cseccsecure24366"><!-- --></a>


<h1 class="topictitle1">配置数据库加密</h1>



<div><p><span>Derby</span>为您提供了一种加密磁盘上数据的方法。</p>

<p>默认情况下， <span>Derby</span>将其未加密的数据存储在普通操作系统文件中。可以查看这些文件的攻击者可以简单地键入它们，从而暴露出存储在字符串列中的各种数据。知道<span>Derby</span>的文件格式，聪明的攻击者甚至可以查看存储在这些文件中的数字数据。更糟糕的是，聪明的攻击者可能会更改数据本身。</p>

<p>幸运的是， <span>Derby</span>可以加密数据库。在共享计算机上，这有助于保护数据免受其他用户（包括心怀不满或好奇的超级用户）的攻击。加密有助于保护私人财务数据免受物理上窃取您笔记本电脑的小偷的侵害。</p>

<p>在加密数据库之前，您需要做出两个选择：</p>

<ul>
<li><strong>引导密码</strong> ：这是当您要使用加密数据时可以解锁它的密码。</li>

<li><strong>加密算法</strong> ：这是API的API文档中描述的转换名称。 <samp class="codeph">javax.crypto.Cipher</samp>类。
<span>Derby</span>加密依赖于虚拟机随附的JCE库。有关这些库的更多信息，请参见《 <cite>Java密码体系结构（JCA）参考指南》</cite> （ <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec.html" target="_blank">http://docs.oracle.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec.html</a> ）。</li>

</ul>

<p>这里有一个<samp class="codeph">ij</samp>创建加密数据库的命令。请注意数据库创建URL上以粗体显示的其他属性： <samp class="codeph">dataEncryption</samp> ， <samp class="codeph">encryptionAlgorithm</samp>和<samp class="codeph">bootPassword</samp> 。URL字符串必须全部放在一行上。</p>

<pre>connect 'jdbc:derby:myEncryptedDatabaseName;create=true;
<strong>dataEncryption=true;encryptionAlgorithm=Blowfish/CBC/NoPadding;
bootPassword=mySuperSecretBootPassword</strong>';
</pre>

<p>一旦创建了加密数据库，就可以在其中工作。关闭加密的数据库后，只需在连接URL中提供启动密码即可重新连接到该数据库，如下所示<samp class="codeph">ij</samp>命令：</p>

<pre>connect 'jdbc:derby:myEncryptedDatabaseName;
<strong>bootPassword=mySuperSecretBootPassword</strong>';</pre>

<p>请记住，通过使用启动密码启动数据库来启动数据库，从而可以在虚拟机的整个生命周期内对其进行解锁。这意味着其他线程可以在不提供启动密码的情况下连接到数据库。这种情况一直持续到显式关闭数据库或虚拟机退出为止。对于单用户，收缩包装的应用程序，这通常不是问题。但是，对于多用户应用程序，您需要采取步骤在使用数据库的各个阶段中确保数据安全：</p>

<ol>
<li><strong>解锁数据库</strong> ：引导密码用于最初解锁加密的数据。数据库所有者解锁数据库后，其他用户可以连接到该数据库而无需提供启动密码。</li>

<li><strong>使用数据库</strong> ：出于这个原因，您应该配置<span>Derby</span>授权（请参见下文）以限制可能访问未锁定数据的用户。</li>

<li>重新锁定<strong>数据库</strong> ：要重新锁定数据，只需关闭数据库即可。</li>

</ol>

<p>以下各节提供有关数据库加密的详细信息。</p>

<div class="note"><span class="notetitle">注意：</span>存储在数据库中的jar文件未加密。</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="cseccsecure96815.html">Derby加密的要求</a></strong><br>Derby支持磁盘加密，并且需要加密提供程序。</li>
<li class="ulchildlink"><strong><a href="cseccsecure97760.html">使用加密</a></strong><br>本节介绍在Derby中使用加密。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cseccsecuree.html" title="手册的此部分描述了保护Derby数据库所涉及的特定任务。">第二部分：为Derby配置安全性</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cseccsecure12392.html" title="在大多数情况下，您可以通过使用属性来启用Derby安全功能。了解为您的环境设置属性的最佳方法很重要。">基本安全配置任务</a></div>
<div><a href="cseccsecure90988.html" title="在Java SE环境中，Derby可以检测jar文件上的数字签名。尝试从存储在数据库中的已签名jar文件中加载类时，Derby将验证签名的有效性。">使用签名的jar文件</a></div>
<div><a href="csecssl.html" title="默认情况下，网络流量以明文形式在Derby客户端和服务器之间传输。">配置SSL / TLS</a></div>
<div><a href="cseccsecureidentity.html" title="Derby提供两种身份，系统范围的身份和特定于数据库的身份。">了解Derby中的身份</a></div>
<div><a href="cseccsecure42374.html" title="默认情况下，Derby在运行时不进行任何凭据检查。对于许多收缩包装的嵌入式应用程序，这种情况可能很好。但是，这意味着任何人都可以连接到不安全的数据库并窃取或破坏那里的数据。幸运的是，通过身份验证很容易阻止这些攻击。">配置用户身份验证</a></div>
<div><a href="csecauthorization.html" title="在身份验证确定某人是否为合法数据库用户的同时，授权确定可以通过用户身份执行的操作。">配置用户授权</a></div>
<div><a href="csecjavasecurity.html" title="Java安全管理器使您可以减少应用程序可能造成的损害。">配置Java安全性</a></div>
<div><a href="csecnetservfileperms.html" title="其他文件保护在某些文件系统上可用，包括Windows NTFS，Unix和Linux。您可以配置Derby以利用这些额外的文件保护。">限制文件权限</a></div>
<div><a href="csecputtogether.html" title="本节说明如何启用所有可用的Derby防御。">放在一起</a></div>
</div>
</div>



</body></html>