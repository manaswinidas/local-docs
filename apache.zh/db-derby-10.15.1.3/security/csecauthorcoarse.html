<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring coarse-grained user authorization">
<meta name="abstract" content="You can manipulate coarse-grained access by using the builtin procedure SYSCS_SET_DATABASE_PROPERTY to set the database properties derby.database.fullAccessUsers and derby.database.readOnlyAccessUsers.">
<meta name="description" content="You can manipulate coarse-grained access by using the builtin procedure SYSCS_SET_DATABASE_PROPERTY to set the database properties derby.database.fullAccessUsers and derby.database.readOnlyAccessUsers.">
<meta name="DC.subject" content="databases, coarse-grained authorization, configuring, authorization, coarse-grained, derby.database.fullAccessUsers property, properties, derby.database.fullAccessUsers, derby.database.readOnlyAccessUsers property, derby.database.readOnlyAccessUsers">
<meta name="keywords" content="databases, coarse-grained authorization, configuring, authorization, coarse-grained, derby.database.fullAccessUsers property, properties, derby.database.fullAccessUsers, derby.database.readOnlyAccessUsers property, derby.database.readOnlyAccessUsers">
<meta name="DC.Relation" scheme="URI" content="csecauthorization.html">
<meta name="DC.Relation" scheme="URI" content="csecauthorfine.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecure190.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure865818.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecure379.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="csecauthorcoarse">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>配置粗粒度的用户授权</title>
</head>
<body id="csecauthorcoarse" ><a name="csecauthorcoarse"><!-- --></a>


<h1 class="topictitle1">配置粗粒度的用户授权</h1>



<div><p>您可以使用内置过程来操纵粗粒度访问<samp class="codeph">SYSCS_SET_DATABASE_PROPERTY</samp>设置数据库属性<samp class="codeph">derby.database.fullAccessUsers</samp>和<samp class="codeph">derby.database.readOnlyAccessUsers</samp> 。</p>

<p>以下示例显示了如何执行此操作。该示例假定您正在重用在“ <a href="cseccsecurenativeauth.html">配置NATIVE身份验证”中</a>创建的受凭据保护的数据库。示例命令首先设置了读/写和只读用户，然后验证设置是否正常工作。</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij&gt; ij version 10.11
ij&gt; <strong>connect 'jdbc:derby:testdb;user=tquist;password=tquist';</strong>
ij&gt; --
-- Prevent our settings from being overridden on the
-- command line or in derby.properties.
--
<strong>call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY
( 'derby.database.propertiesOnly', 'true' );</strong>
0 rows inserted/updated/deleted
ij&gt; --
-- Now we can configure read/write and read-only users.
--
<strong>call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY
( 'derby.database.fullAccessUsers', 'tquist,mchrysta' );</strong>
0 rows inserted/updated/deleted
ij&gt; <strong>call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY
( 'derby.database.readOnlyAccessUsers', 'thardy,jhallett' );</strong>
0 rows inserted/updated/deleted
ij&gt; --
-- Next verify that a read/write user has those powers:
--
<strong>connect 'jdbc:derby:testdb;user=mchrysta;password=mchrysta';</strong>
ij(CONNECTION1)&gt; <strong>create table mchrysta.t1( a varchar( 20 ) );</strong>
0 rows inserted/updated/deleted
ij(CONNECTION1)&gt; <strong>insert into mchrysta.t1( a ) values ( 'mchrysta' );</strong>
1 row inserted/updated/deleted
ij(CONNECTION1)&gt; <strong>select * from mchrysta.t1;</strong>
A                   
--------------------
mchrysta            

1 row selected
ij(CONNECTION1)&gt; --
-- Finally, verify that a read-only user can read data but not write it:
--
<strong>connect 'jdbc:derby:testdb;user=thardy;password=thardy';</strong>
ij(CONNECTION2)&gt; -- the user can select from public data
<strong>select count(*) from sys.systables;</strong>
1          
-----------
24         

1 row selected
ij(CONNECTION2)&gt; -- but this user can't even create a table
<strong>create table thardy.t1( a varchar( 20 ) );</strong>
ERROR 25503: DDL is not permitted for a read-only connection, user or database.
</pre>

<div class="section"><h2 class="sectiontitle">粗粒度的授权详细信息</h2>
<p>使用CALL语句调用<samp class="codeph">SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY</samp>系统过程。</p>

<p>要指定多个用户ID，请使用逗号分隔的列表，逗号和下一个用户ID之间不能有空格。</p>

<p>要为包含特殊字符的用户ID指定读写访问权限，请为该用户ID使用定界标识符。例如：</p>

<pre><strong>CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY(
    'derby.database.fullAccessUsers', '"Elena!"')</strong></pre>

<p>为了提高安全性，您应该配置<samp class="codeph">derby.database.propertiesOnly</samp>属性，以便用户无法使用命令行或命令行中指定的系统范围的属性来覆盖数据库行为。 <samp class="codeph">derby.properties</samp>文件。</p>

</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="rseccsecure190.html">只读和完全访问权限</a></strong><br>用户可以使用粗粒度授权对Derby数据库执行的操作取决于用户对数据库对象的访问类型。</li>
<li class="ulchildlink"><strong><a href="cseccsecure865818.html">设置默认的连接访问模式</a></strong><br>您可以使用derby.database.defaultConnectionMode属性来指定用户连接到数据库时具有的默认访问类型。</li>
<li class="ulchildlink"><strong><a href="rseccsecure379.html">用户授权例外</a></strong><br>当粗粒度的用户授权发生错误时，将返回SQL异常。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="csecauthorization.html" title="在身份验证确定某人是否为合法数据库用户的同时，授权确定可以通过用户身份执行的操作。">配置用户授权</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="csecauthorfine.html" title="您可以使用细粒度的用户授权（也称为SQL标准授权）来限制对特定数据的访问。">配置细粒度的用户授权</a></div>
</div>
</div>



</body></html>