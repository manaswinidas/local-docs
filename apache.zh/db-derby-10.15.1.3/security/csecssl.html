<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring SSL/TLS">
<meta name="abstract" content="By default, network traffic travels in cleartext between Derby clients and servers.">
<meta name="description" content="By default, network traffic travels in cleartext between Derby clients and servers.">
<meta name="DC.subject" content="Network Server, SSL, TLS">
<meta name="keywords" content="Network Server, SSL, TLS">
<meta name="DC.Relation" scheme="URI" content="cseccsecuree.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure12392.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure24366.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure90988.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureidentity.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecure42374.html">
<meta name="DC.Relation" scheme="URI" content="csecauthorization.html">
<meta name="DC.Relation" scheme="URI" content="csecjavasecurity.html">
<meta name="DC.Relation" scheme="URI" content="csecnetservfileperms.html">
<meta name="DC.Relation" scheme="URI" content="csecputtogether.html">
<meta name="DC.Relation" scheme="URI" content="tsecsslclientkeycert.html">
<meta name="DC.Relation" scheme="URI" content="tsecsslserverkeycert.html">
<meta name="DC.Relation" scheme="URI" content="tsecsslimportcerts.html">
<meta name="DC.Relation" scheme="URI" content="csecsslbootconn.html">
<meta name="DC.Relation" scheme="URI" content="csecsslkeys.html">
<meta name="DC.Relation" scheme="URI" content="csecsslserver.html">
<meta name="DC.Relation" scheme="URI" content="csecsslclient.html">
<meta name="DC.Relation" scheme="URI" content="csecssladmin.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="csecssl">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>配置SSL / TLS</title>
</head>
<body id="csecssl" ><a name="csecssl"><!-- --></a>


<h1 class="topictitle1">配置SSL / TLS</h1>



<div><p>默认情况下，网络流量以明文形式在<span>Derby</span>客户端和服务器之间传输。</p>

<p>通过使用中间人策略，聪明的攻击者可以读取往返服务器的所有字符串数据。通过了解<span>Derby</span> Wire协议，聪明的攻击者也可以读取数字数据。更糟糕的是，中间人可以在客户端和服务器之间传输数据时更改数据。</p>

<p>幸运的是， <span>Derby</span>可以使用虚拟机随附的SSL / TLS（安全套接字层/传输层安全性）逻辑对网络流量进行加密。副作用是，SSL / TLS也增加了一个额外的身份验证障碍，涉及<em>对等身份验证</em> 。</p>

<p>术语“ <em>对等</em>体”用于服务器-客户端通信的另一部分：服务器的对等体是客户端，而客户端的对等体是服务器。</p>

<p><span>Derby的</span> SSL / TLS（针对客户端和针对服务器）均以三种可能的模式运行：</p>

<dl>

<dt class="dlterm">关</dt>

<dd>默认，无SSL / TLS加密</dd>



<dt class="dlterm">基本的</dt>

<dd>SSL / TLS加密，无对等身份验证</dd>



<dt class="dlterm">对等身份验证</dt>

<dd>SSL / TLS加密和对等身份验证</dd>


</dl>

<p>对等身份验证可以在服务器，客户端或两者上设置。对等身份验证意味着SSL / TLS连接的另一端将根据本地安装的受信任证书进行身份验证。</p>

<p>在使用这种加密技术之前，您需要熟悉SSL / TLS概念（例如密钥对和证书）以及JDK的概念。 <samp class="codeph">keytool</samp>应用。您可以在Apache和Wikipedia上找到SSL / TLS的有用概述（分别分别为<a href="http://httpd.apache.org/docs/2.0/ssl/ssl_intro.html" target="_blank">http://httpd.apache.org/docs/2.0/ssl/ssl_intro.html</a>和<a href="http://en.wikipedia.org/wiki/Secure_Sockets_Layer" target="_blank">http://en.wikipedia.org/wiki/Secure_Sockets_Layer</a> ） 。你可以找到<samp class="codeph">keytool</samp> Unix和Windows的文档， <a href="http://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html" target="_blank">网址</a>为<a href="http://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html" target="_blank">http://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html</a>和<a href="http://docs.oracle.com/javase/8/docs/technotes/tools/windows/keytool.html" target="_blank">http://docs.oracle.com/javase/8/docs/technotes /tools/windows/keytool.html</a> 。</p>

<p>网络加密需要以下设置步骤：</p>

<ol>
<li><strong>客户端证书：</strong>每个客户端必须生成一个客户端密钥对和证书。客户端证书必须加载到服务器的信任库中。</li>

<li><strong>服务器证书：</strong>服务器必须生成服务器密钥对和证书。所有客户端都必须将服务器的证书加载到其各自的信任库中。</li>

<li><strong>服务器启动：</strong>必须使用系统属性和启动选项来启动服务器，该选项可以打开SSL / TLS加密。</li>

<li><strong>客户端启动：</strong>客户端必须使用打开SSL / TLS加密的系统属性启动。此外，额外的属性已添加到JDBC连接URL。</li>

</ol>

<p>要使用SSL / TLS加密<span>Derby</span>的网络流量，客户端必须具有一个密钥库来保存其自己的公用/专用密钥对。客户端还必须具有用于存储服务器证书的信任库。如果密钥存储和信任存储尚不存在，则<samp class="codeph">keytool</samp>程序将创建它们。假设客户端将其公用/专用密钥对存储在<samp class="codeph">~/vault/ClientKeyStore</samp> ，并假定客户端将来自其他系统的证书存储在<samp class="codeph">~/vault/ClientTrustStore</samp> 。</p>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="tsecsslclientkeycert.html">创建客户端密钥对和证书</a></strong><br>请按照以下步骤创建客户端密钥对和客户端证书。</li>
<li class="ulchildlink"><strong><a href="tsecsslserverkeycert.html">创建服务器密钥对和证书</a></strong><br>请按照以下步骤创建服务器密钥对和服务器证书。</li>
<li class="ulchildlink"><strong><a href="tsecsslimportcerts.html">导入证书</a></strong><br>请按照以下步骤将每个证书导入到另一个的信任库中。</li>
<li class="ulchildlink"><strong><a href="csecsslbootconn.html">引导服务器并连接到它</a></strong><br>最后，启动服务器并启动客户端。</li>
<li class="ulchildlink"><strong><a href="csecsslkeys.html">密钥和证书处理</a></strong><br>对于SSL操作，服务器始终需要一个密钥对。如果服务器以对等身份验证模式运行（服务器对客户端进行身份验证），则每个客户端都需要自己的密钥对。通常，如果通信的一端要验证其伙伴，则第一端需要安装由伙伴生成的证书。</li>
<li class="ulchildlink"><strong><a href="csecsslserver.html">使用SSL / TLS启动服务器</a></strong><br>对于服务器SSL / TLS，需要生成服务器密钥对。如果服务器要进行客户端身份验证，则需要在信任存储区中安装客户端证书。</li>
<li class="ulchildlink"><strong><a href="csecsslclient.html">使用SSL / TLS运行客户端</a></strong><br>客户端上的基本SSL加密是通过URL属性ssl，属性ssl或设置为basic的数据源属性ssl启用的。</li>
<li class="ulchildlink"><strong><a href="csecssladmin.html">其他服务器命令</a></strong><br>其他服务器命令（关闭，ping，sysinfo，runtimeinfo，logconnections，maxthreads，timelice，trace和tracedirectory）均作为客户端实现，并且就SSL而言，它们的行为与客户端完全相同。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cseccsecuree.html" title="手册的此部分描述了保护Derby数据库所涉及的特定任务。">第二部分：为Derby配置安全性</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cseccsecure12392.html" title="在大多数情况下，您可以通过使用属性来启用Derby安全功能。了解为您的环境设置属性的最佳方法很重要。">基本安全配置任务</a></div>
<div><a href="cseccsecure24366.html" title="Derby为您提供了一种加密磁盘上数据的方法。">配置数据库加密</a></div>
<div><a href="cseccsecure90988.html" title="在Java SE环境中，Derby可以检测jar文件上的数字签名。尝试从存储在数据库中的已签名jar文件中加载类时，Derby将验证签名的有效性。">使用签名的jar文件</a></div>
<div><a href="cseccsecureidentity.html" title="Derby提供两种身份，系统范围的身份和特定于数据库的身份。">了解Derby中的身份</a></div>
<div><a href="cseccsecure42374.html" title="默认情况下，Derby在运行时不进行任何凭据检查。对于许多收缩包装的嵌入式应用程序，这种情况可能很好。但是，这意味着任何人都可以连接到不安全的数据库并窃取或破坏那里的数据。幸运的是，通过身份验证很容易阻止这些攻击。">配置用户身份验证</a></div>
<div><a href="csecauthorization.html" title="在身份验证确定某人是否为合法数据库用户的同时，授权确定可以通过用户身份执行的操作。">配置用户授权</a></div>
<div><a href="csecjavasecurity.html" title="Java安全管理器使您可以减少应用程序可能造成的损害。">配置Java安全性</a></div>
<div><a href="csecnetservfileperms.html" title="其他文件保护在某些文件系统上可用，包括Windows NTFS，Unix和Linux。您可以配置Derby以利用这些额外的文件保护。">限制文件权限</a></div>
<div><a href="csecputtogether.html" title="本节说明如何启用所有可用的Derby防御。">放在一起</a></div>
</div>
</div>



</body></html>