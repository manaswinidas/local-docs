<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Upgrading an old database to use SQL standard authorization">
<meta name="abstract" content="An old, unprotected database can be shielded with authentication and SQL authorization later on.">
<meta name="description" content="An old, unprotected database can be shielded with authentication and SQL authorization later on.">
<meta name="DC.subject" content="upgrade, SQL standard authorization mode">
<meta name="keywords" content="upgrade, SQL standard authorization mode">
<meta name="DC.Relation" scheme="URI" content="csecauthorfine.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecuregrantrevokeaccess.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureprivileges.html">
<meta name="DC.Relation" scheme="URI" content="cseccsecureroles.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecuresqlauthexceptions.html">
<meta name="DC.Relation" scheme="URI" content="rseccsecurenativeauthex.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cseccsecuresqlauthupgrade">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>升级旧数据库以使用SQL标准授权</title>
</head>
<body id="cseccsecuresqlauthupgrade" ><a name="cseccsecuresqlauthupgrade"><!-- --></a>


<h1 class="topictitle1">升级旧数据库以使用SQL标准授权</h1>



<div><p>以后可以通过身份验证和SQL授权来屏蔽未受保护的旧数据库。</p>

<div class="section"><h2 class="sectiontitle">升级身份验证和授权</h2>
<p>要保护单用户数据库并将其转换为共享的多用户数据库，只需启用身份验证和SQL授权。为此，请首先按照<a href="cseccsecure42374.html">配置用户身份</a>验证中所述打开用户身份<a href="cseccsecure42374.html">验证</a> 。确保为<a href="cseccsecuredbowner.html">数据库所有者</a>提供登录凭据。在大多数单用户数据库中，数据库所有者是APP。但是，如果原始数据库创建URL指定了用户名，则数据库所有者可以是其他用户。有关详细信息，请参见<a href="cseccsecuredbowner.html">数据库所有者</a> 。如果不确定谁是数据库的所有者，请运行以下查询：</p>

<pre>select authorizationid from sys.sysschemas where schemaname = 'SYS'</pre>

<p>启用用户身份验证后，打开SQL授权。为此，以数据库所有者身份连接到数据库并发出以下命令：</p>

<pre>call syscs_util.syscs_set_database_property( 'derby.database.sqlAuthorization', 'true' )</pre>

<p>现在关闭数据库以激活新值<samp class="codeph">derby.database.sqlAuthorization</samp> 。下次启动数据库时，它将受到身份验证和SQL授权的保护。</p>

</div>

<div class="section"><h2 class="sectiontitle">升级数据库的行为</h2>
<p>您将在升级的数据库中注意到以下行为更改：</p>

<ul>
<li><strong>数据</strong> ：用户可以按照自己的模式访问数据。但是，用户无法访问其他用户拥有的架构中的数据。特别是，其他用户无法访问属于数据库所有者的架构中的数据。数据库所有者可能需要授予对该数据的访问权限。</li>

<li><strong>数据库维护</strong> ：在单用户数据库中，任何人都可以运行维护过程来备份/还原以及导入/导出数据。在升级的多用户数据库中，只有数据库所有者可以执行这些敏感操作。</li>

</ul>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="csecauthorfine.html" title="您可以使用细粒度的用户授权（也称为SQL标准授权）来限制对特定数据的访问。">配置细粒度的用户授权</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cseccsecuregrantrevokeaccess.html" title="启用SQL标准授权模式后，对象所有者可以使用GRANT和REVOKE SQL语句来设置特定数据库对象或特定SQL操作的用户特权。他们还可以使用角色来管理特权。">使用细粒度的用户授权</a></div>
<div><a href="cseccsecureprivileges.html" title="视图，触发器，约束和生成的列以视图，触发器，约束或生成的列的所有者的特权运行。">视图，触发器，约束和生成的列的特权</a></div>
<div><a href="cseccsecureroles.html" title="启用SQL标准授权模式后，对象所有者可以使用SQL角色工具来管理特权。">使用SQL角色</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rseccsecuresqlauthexceptions.html" title="SQL授权发生错误时，将返回SQL异常。">SQL标准授权例外</a></div>
<div><a href="rseccsecurenativeauthex.html" title="该示例由程序NativeAuthenticationExample.java组成，该程序显示了如何通过嵌入式或客户端驱动程序使用Derby的NATIVE用户身份验证和SQL授权。">NATIVE身份验证和SQL授权示例</a></div>
</div>
</div>



</body></html>