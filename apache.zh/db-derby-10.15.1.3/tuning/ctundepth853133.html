<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Statement execution plan">
<meta name="abstract" content="RUNTIMESTATISTICS also provides information about the statement execution plan.">
<meta name="description" content="RUNTIMESTATISTICS also provides information about the statement execution plan.">
<meta name="DC.subject" content="Statement execution plan">
<meta name="keywords" content="Statement execution plan">
<meta name="DC.Relation" scheme="URI" content="ctundepth37648.html">
<meta name="DC.Relation" scheme="URI" content="ctundepth853095.html">
<meta name="DC.Relation" scheme="URI" content="ctundepth853228.html">
<meta name="DC.Relation" scheme="URI" content="ctundepthoptover.html">
<meta name="DC.Relation" scheme="URI" content="ctun_xplain_tables.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ctundepth853133">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>报表执行计划</title>
</head>
<body id="ctundepth853133" ><a name="ctundepth853133"><!-- --></a>


<h1 class="topictitle1">报表执行计划</h1>



<div><p>RUNTIMESTATISTICS还提供有关<em>语句执行计划的信息</em> 。</p>

<p>语句执行计划显示每个节点花费多长时间评估，检索了多少行，是否使用了索引等等。如果使用了索引，它将显示匹配索引扫描的开始和停止位置。查看该计划可以帮助您确定是添加索引还是重写查询。</p>

<p>语句执行计划由结果集节点树组成。结果集节点表示对语句一部分的求值；它将行返回到调用（或父）节点，并可以从子节点接收行。一个节点可以有一个或多个子代。从顶部开始，如果节点有子节点，则它向子节点请求行。通常，只有DML语句的执行计划（查询，插入，更新和删除，而不是字典对象创建）由多个节点组成。</p>

<p>例如，考虑以下查询：</p>

<pre><strong>SELECT * FROM Countries</strong></pre>

<p>这个简单的查询仅涉及一个节点：从数据库中读取所有数据。 <samp class="codeph">Countries</samp>表。它涉及没有子节点的单个节点。该结果集节点称为“ <em>表扫描</em>结果集”。该节点的RUNTIMESTATISTICS文本如下所示：</p>

<pre>Statement Name:
        null
Statement Text:
        select * from countries
Parse Time: 20
Bind Time: 10
Optimize Time: 50
Generate Time: 20
Compile Time: 100
Execute Time: 10
Begin Compilation Timestamp : 2005-05-25 09:16:21.24
End Compilation Timestamp : 2005-05-25 09:16:21.34
Begin Execution Timestamp : 2005-05-25 09:16:21.35
End Execution Timestamp : 2005-05-25 09:16:21.4
Statement Execution Plan Text:
Table Scan ResultSet for COUNTRIES at read committed isolation
level using instntaneous share row 
locking chosen by the optimizer
Number of opens = 1
Rows seen = 114
Rows filtered = 0
Fetch Size = 16
        constructor time (milliseconds) = 0
        open time (milliseconds) = 0
        next time (milliseconds) = 10
        close time (milliseconds) = 0
        next time in milliseconds/row = 0

scan information:
        Bit set of columns fetched=All
        Number of columns fetched=3
        Number of pages visited=3
        Number of rows qualified=114
        Number of rows visited=114
        Scan type=heap
        start position:
null    stop position:
null    qualifiers:
None
        optimizer estimated row count:          119.00
        optimizer estimated cost:           69.35
</pre>

<p>考虑第二个更复杂的查询：</p>

<pre><strong><span />SELECT Country
FROM Countries
WHERE Region = 'Central America'</strong></pre>

<p>执行此查询时，该查询涉及两个节点：一个用于检索合格的行（此节点已完成限制），另一个用于投影所请求的列。因此，在底部有一个用于扫描表的<em>表扫描结果集</em> 。限定词（ <samp class="codeph">Region = 'Central America'</samp> ）在此节点中评估。这些数据被传递到称为<em>Project-Restrict ResultSet</em>的父节点，在其中投影行。只有<samp class="codeph">country</samp>列是必需的（表中的第一列）。这两个节点的RUNTIMESTATISTICS文本看起来像这样：</p>

<pre>Statement Name:
        null
Statement Text:
        SELECT Country FROM Countries WHERE Region = 'Central America'
Parse Time: 10
Bind Time: 0
Optimize Time: 370
Generate Time: 10
Compile Time: 390
Execute Time: 0
Begin Compilation Timestamp : 2005-05-25 09:20:41.274
End Compilation Timestamp : 2005-05-25 09:20:41.664
Begin Execution Timestamp : 2005-05-25 09:20:41.674
End Execution Timestamp : 2005-05-25 09:20:41.674
Statement Execution Plan Text:
Project-Restrict ResultSet (2):
Number of opens = 1
Rows seen = 6
Rows filtered = 0
restriction = false
projection = true
        constructor time (milliseconds) = 0
        open time (milliseconds) = 0
        next time (milliseconds) = 0
        close time (milliseconds) = 0
        restriction time (milliseconds) = 0
        projection time (milliseconds) = 0
        optimizer estimated row count:           11.90
        optimizer estimated cost:           69.35

Source result set:
        Table Scan ResultSet for COUNTRIES at read committed isolation level
using instantaneous share row locking chosen by the optimizer
        Number of opens = 1
        Rows seen = 6
        Rows filtered = 0
        Fetch Size = 16
                constructor time (milliseconds) = 0
                open time (milliseconds) = 10
                next time (milliseconds) = 0
                close time (milliseconds) = 0
                next time in milliseconds/row = 0

        scan information:
                Bit set of columns fetched={0, 2}
                Number of columns fetched=2
                Number of pages visited=3
                Number of rows qualified=6
                Number of rows visited=114
                Scan type=heap
                start position:
null            stop position:
null            qualifiers:
Column[0][0] Id: 2
Operator: =
Ordered nulls: false
Unknown return value: false
Negate comparison result: false

                optimizer estimated row count:           11.90
                optimizer estimated cost:           69.35
</pre>

<p>其他更复杂的查询（例如联接和联合）具有其他类型的结果集节点。</p>

<p>对于插入，更新和删除，行从顶部流出，在此处插入，更新或删除。对于选择（查询），行从顶部开始流入结果集，然后返回给用户。</p>

<p>《 <span><em>Derby参考手册》</em></span>显示了可能出现在执行计划中的许多可能的<em>ResultSet</em>节点。</p>

<p>另外，请阅读<a href="ctunoptimz39739.html">DML语句和性能</a>以获取有关<span>Derby</span>执行语句的某些方式的更多信息。</p>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctundepth37648.html" title="RUNTIMESTATISTICS提供了几种您可以分析的信息。">分析信息</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctundepth853095.html" title="如果使用统计信息计时，则RUNTIMESTATISTICS将提供有关该语句每个阶段花费了多长时间的信息。">统计时间</a></div>
<div><a href="ctundepth853228.html" title="RUNTIMESTATISTICS显示特定节点的优化器估计。它显示了优化程序的估计行数和优化程序的" estimated="" cost="" ="">优化器估算</a></div>
<div><a href="ctundepthoptover.html" title="RUNTIMESTATISTICS提供有关使用--DERBY-PROPERTIES子句指定的用户指定的优化器提示的信息。">优化器替代</a></div>
<div><a href="ctun_xplain_tables.html" title="XPLAIN样式是RUNTIMESTATISTICS处理的增强形式，可将捕获的统计信息保留在数据库表中。一旦收集了统计信息并将其保存在表中，就可以对其进行查询以进行分析。">了解XPLAIN样式数据库表</a></div>
</div>
</div>



</body></html>