<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Transitive closure on search clauses">
<meta name="abstract" content="Derby applies transitive closure on search clauses after transitive closure on join clauses.">
<meta name="description" content="Derby applies transitive closure on search clauses after transitive closure on join clauses.">
<meta name="DC.Relation" scheme="URI" content="ctuntransform37032.html">
<meta name="DC.Relation" scheme="URI" content="rtuntransform866547.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rtuntransform866587">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>搜索子句的及物闭包</title>
</head>
<body id="rtuntransform866587" ><a name="rtuntransform866587"><!-- --></a>


<h1 class="topictitle1">搜索子句的及物闭包</h1>



<div><p><span>Derby</span>在对join子句进行传递闭包之后，对搜索子句应用传递闭包。</p>

<div class="section">
<p>对于将<a href="ctuntransform13966.html#ctuntransform13966__rtuntransform13785">简单列引用</a>与常量（或IS NULL和IS NOT NULL运算符）进行比较的每个可<a href="ctuntransform13966.html#ctuntransform13966__rtuntransform26698">引用</a>谓词， <span>Derby会</span>在同一查询块中的简单列引用和另一个表中的简单列引用之间寻找<a href="ctuntransform13966.html#ctuntransform13966__rtuntransform36163">等分谓词</a> 。 。对于每个这样的等连接谓词， <span>Derby</span>然后在另一张表的列与相同常量之间搜索相似的比较（相同的运算符）。
如果找不到这样的谓词，则<span>Derby</span>将添加新的谓词。</p>

<p>在对搜索子句应用传递闭包之前， <span>Derby</span>会对谓词执行所有其他可能的转换（如<a href="ctuntransform35783.html">谓词转换中所述</a> ）。</p>

<p>例如，给出以下语句：</p>

<pre><strong>SELECT * FROM Flights, FlightAvailability
WHERE Flights.flight_id = FlightAvailability.flight_id
AND Flights.flight_id between 'AA1100' and 'AA1250'
AND Flights.flight_id &lt;&gt; 'AA1219'
AND FlightAvailability.flight_id &lt;&gt; 'AA1271'</strong></pre>

<p><span>Derby</span>首先执行任何其他转换-具体来说，对第二个谓词执行BETWEEN转换：</p>

<pre><strong>AND Flights.flight_id &gt;= 'AA1100' 
AND Flights.flight_id &lt;=  'AA1250'</strong></pre>

<p>然后， <span>Derby</span>执行传递关闭：</p>

<pre><strong>SELECT * FROM Flights, FlightAvailability
WHERE Flights.flight_id = FlightAvailability.flight_id
AND Flights.flight_id &gt;= 'AA1100' 
AND Flights.flight_id &lt;=  'AA1250'
AND Flights.flight_id &lt;&gt; 'AA1219'
AND Flights.flight_id &lt;&gt; 'AA1271'
AND FlightAvailability.flight_id &gt;= 'AA1100' 
AND FlightAvailability.flight_id &lt;=  'AA1250'
AND FlightAvailability.flight_id &lt;&gt; 'AA1271'
AND FlightAvailability.flight_id &lt;&gt; 'AA1219'</strong></pre>

<p>当可预测谓词使用<samp class="codeph">=</samp>运算符，作为应用传递闭包的一部分， <span>Derby</span>可以从同一查询块中删除将该列引用与另一个简单列引用进行比较的所有等值谓词，因为无论是否添加了新的谓词，等值谓词现在都是冗余的。例如，</p>

<pre><strong>SELECT * FROM Flights, Flightavailability
WHERE Flights.flight_id = Flightavailability.flight_id
AND Flightavailability.flight_id = 'AA1122'</strong></pre>

<p>成为（并等同于）</p>

<pre><strong>SELECT * FROM Flights, Flightavailability
WHERE Flights.flight_id = 'AA1122'
AND Flightavailability.flight_id = 'AA1122'</strong></pre>

<p>消除冗余谓词可为优化器提供更准确的选择性信息，并提高执行时的性能。</p>

</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctuntransform37032.html" title="数字的传递属性指出，如果A = B且B = C，则A =C。">传递闭包</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rtuntransform866547.html" title="当从三个或更多表中选择一个连接语句时，Derby将分析每个查询块内简单列引用之间的任何等连接谓词，并在可能的情况下（如果当前不存在）添加其他的等连接谓词。">连接子句的传递闭包</a></div>
</div>
</div>



</body></html>