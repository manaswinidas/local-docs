<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Shielding users from Derby class-loading events">
<meta name="abstract" content="JVMs tend to load classes as they are needed, which means that the first time you need a class in a piece of software, it takes longer to use.">
<meta name="description" content="JVMs tend to load classes as they are needed, which means that the first time you need a class in a piece of software, it takes longer to use.">
<meta name="DC.subject" content="Class loading, when it occurs in Derby, how to minimize impact of">
<meta name="keywords" content="Class loading, when it occurs in Derby, how to minimize impact of">
<meta name="DC.Relation" scheme="URI" content="ctundepth21935.html">
<meta name="DC.Relation" scheme="URI" content="ctundepth10525.html">
<meta name="DC.Relation" scheme="URI" content="ctundepth29804.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ctundepth14326">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>保护用户免受Derby类加载事件的影响</title>
</head>
<body id="ctundepth14326" ><a name="ctundepth14326"><!-- --></a>


<h1 class="topictitle1">保护用户免受<span>Derby</span>类加载事件的影响</h1>



<div><p>JVM倾向于按需加载类，这意味着您第一次在软件中需要类时，使用时间会更长。</p>

<p>当发生许多类装入时， <span>Derby</span>有三种明显的情况：</p>

<ul>
<li><em>系统启动时</em>
<p>加载嵌入式驱动程序<em>org.apache.derby.jdbc时，系统启动<em>。EmbeddedDriver</em> 。在服务器框架中，系统在启动服务器框架时启动。引导<span>Derby</span>会加载基本的<span>Derby</span>类。</p>
</li>

<li><em>当第一个数据库启动时</em>
<p>引导第一个数据库将加载更多的<span>Derby</span>类。缺省行为是第一个数据库在与第一个数据库建立连接时启动。您还可以将系统配置为在启动时引导数据库。根据您的应用程序，一个或另一个可能会更好。</p>
</li>

<li><em>编译第一个查询时</em>
<p>编译第一个查询将加载其他类。</p>
</li>

</ul>

<p>对于这些事件中的任何一个，您可以通过在其他任务发生时在单独的线程中启动用户来控制它们对用户的影响。</p>

<p>另外，如果您正在使用<em>PreparedStatements</em> ，则在执行其他任务时，请在后台的单独线程中准备它们。</p>

<div class="section"><h2 class="sectiontitle">多用户系统的调优技巧</h2>
<ul>
<li>对于并发，请使用行级锁定和READ_COMMITTED隔离级。</li>

<li>对于只读应用程序，请使用表级锁定和READ_COMMITTED隔离级。</li>

<li>启动时引导数据库，以最大程度地减少连接的影响。</li>

</ul>

</div>

<div class="section"><h2 class="sectiontitle">单用户系统的调优技巧</h2>
<ul>
<li>首次加载嵌入式JDBC驱动程序（ <em>org.apache.derby.jdbc时， <span>Derby会</span>启动<em>。EmbeddedDriver</em> ）。在程序的时间最不敏感的部分加载该驱动程序，例如在引导时或在等待用户输入时。对于服务器框架，服务器启动时会自动加载驱动程序。</li>

<li>在连接时启动数据库（默认行为），而不是在启动时启动。如果可能，请连接到后台线程。</li>

<li>关闭行级别的锁定，并使用READ_COMMITTED隔离级别。</li>

</ul>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctundepth21935.html" title="您可以用来提高Derby应用程序性能的操作分为三类。">应用程序和数据库设计问题</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctundepth10525.html" title="Derby是快速而高效的，但是当表很大时，扫描表所花费的时间可能比用户期望的要长。如果您随后要求Derby对数据进行排序，那就更糟了。">避免对大表进行表扫描</a></div>
<div><a href="ctundepth29804.html" title="当您向Derby提交SQL语句时，Derby会编译并执行该语句。编译是一个耗时的过程，涉及多个步骤，包括优化（Derby制定语句执行计划的阶段）。语句执行计划包括是否使用索引，连接顺序等。">避免编译SQL语句</a></div>
</div>
</div>

</body>
</html>