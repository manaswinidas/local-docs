<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="What are cardinality statistics?">
<meta name="abstract" content="When Derby creates statistics for a table's index, it calculates and stores the following in the system tables.">
<meta name="description" content="When Derby creates statistics for a table's index, it calculates and stores the following in the system tables.">
<meta name="DC.subject" content="Cardinality statistics, definition">
<meta name="keywords" content="Cardinality statistics, definition">
<meta name="DC.Relation" scheme="URI" content="ctunstats18908.html">
<meta name="DC.Relation" scheme="URI" content="ctunstats57793.html">
<meta name="DC.Relation" scheme="URI" content="ctunstats60669.html">
<meta name="DC.Relation" scheme="URI" content="ctunstats849203.html">
<meta name="DC.Relation" scheme="URI" content="ctunstats46438.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ctunstats849251">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>什么是基数统计？</title>
</head>
<body id="ctunstats849251" ><a name="ctunstats849251"><!-- --></a>


<h1 class="topictitle1">什么是基数统计？</h1>



<div><p>当<span>Derby</span>为表的索引创建统计信息时，它将计算以下内容并将其存储在系统表中。</p>

<ul>
<li>表中的行数</li>

<li>索引键中前导列的一组列的唯一值的数量，也称为<em>基数</em> 。前导列是指索引的第一列，或第一和第二列，或第一，第二和第三列（依此类推）。
<span>Derby</span>无法计算非前导列的组合唯一的列数。</li>

</ul>

<p>例如，考虑表上的主键<samp class="codeph">FlightAvailability</samp> ：</p>

<pre><strong>CONSTRAINT FLIGHTAVAILABILITY_PK Primary Key (
      FLIGHT_ID,
      SEGMENT_NUMBER,
      FLIGHT_DATE)</strong></pre>

<p>对于该索引， <span>Derby</span>保留以下信息：</p>
  
<ul>
<li>表中的行数<samp class="codeph">FlightAvailability</samp></li>

<li>全键的唯一行数（ <samp class="codeph">flight_id</samp> ， <samp class="codeph">segment_number</samp> ， <samp class="codeph">flight_date</samp> ）</li>

<li>键的唯一行数（ <samp class="codeph">flight_id</samp> ， <samp class="codeph">segment_number</samp> ）</li>

<li>键的唯一行数（ <samp class="codeph">flight_id</samp> ）</li>

</ul>

<p><span>Derby</span>如何使用这两个数字（表中的行数和特定键的基数）来确定查询的选择性？举个例子：</p>

<pre><strong>SELECT * FROM Flights, FlightAvailability
WHERE Flights.flight_id = OtherTable.flight_id</strong></pre>

<p>如果输入flight_id的基数<samp class="codeph">Flights</samp>为250，谓词的选择性为1/250。优化器将估计读取的行数如下：</p>

<pre><strong>((Rows in Flights) * (Rows in OtherTable))/250</strong></pre>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctunstats18908.html" title="当确定特定表的访问路径时（无论使用索引还是扫描表），优化器确定将从磁盘扫描的行数。">选择性和基数统计</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctunstats57793.html" title="对于表扫描，优化器不需要估计在扫描过程中将从磁盘扫描的行数。从磁盘扫描的行数将等于表中的行数。">确定从磁盘扫描以进行表扫描的行</a></div>
<div><a href="ctunstats60669.html" title="当索引可用时，优化器必须估计将从磁盘扫描的行数。">从磁盘扫描以进行索引扫描的行的估计</a></div>
<div><a href="ctunstats849203.html" title="Derby通过以下两种方式之一确定WHERE子句的选择性。">基于统计的选择性与硬连线的选择性</a></div>
<div><a href="ctunstats46438.html" title="创建索引时，基数统计信息收集在索引的键上。">使用基数统计</a></div>
</div>
</div>



</body></html>