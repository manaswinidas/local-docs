<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Analyzing statement execution">
<meta name="abstract" content="After you create indexes, make sure that Derby is using them. In addition, you might also want to find out the join order that Derby is choosing.">
<meta name="description" content="After you create indexes, make sure that Derby is using them. In addition, you might also want to find out the join order that Derby is choosing.">
<meta name="DC.subject" content="Statement execution, analyzing, Index use, Join order, Application performance, Checkpoints">
<meta name="keywords" content="Statement execution, analyzing, Index use, Join order, Application performance, Checkpoints">
<meta name="DC.Relation" scheme="URI" content="ctundepth39739.html">
<meta name="DC.Relation" scheme="URI" content="ctundepth21935.html">
<meta name="DC.Relation" scheme="URI" content="ctundepth13055.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ttundepth33391">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>分析语句执行</title>
</head>
<body id="ttundepth33391" ><a name="ttundepth33391"><!-- --></a>


<h1 class="topictitle1">分析语句执行</h1>



<div><p>创建索引后，请确保<span>Derby</span>正在使用它们。另外，您可能还想找出<span>Derby</span>选择的连接顺序。</p>

<div class="section"><p>使用此一般攻击计划来分析应用程序的SQL语句：</p>

</div>

<ol>
<li class="stepexpand"><span>将应用程序最常用的SQL语句和事务收集到一个测试中。</span></li>

<li class="stepexpand"><span>创建一个基准测试套件以针对其运行示例查询。</span>测试套件应该做的第一件事是检查点数据（强制<span>Derby</span>将数据刷新到磁盘）。您可以使用以下JDBC代码来做到这一点：<pre>CallableStatement cs = conn.prepareCall
("CALL SYSCS_UTIL.SYSCS_CHECKPOINT_DATABASE()");
cs.execute();
cs.close();</pre>
</li>

<li class="stepexpand"><span>使用性能计时来确定性能不佳的查询。尝试区分缓存和未缓存的数据。着重于对未缓存的数据（尚未在内存中的数据）进行测量。</span>例如，第一次运行查询时， <span>Derby</span>返回未缓存的数据。如果之后立即运行相同的查询，则<span>Derby</span>可能会返回缓存的数据。这两个否则相同的语句的性能差异很大，并且会导致结果偏斜。</li>

<li class="stepexpand"><span>使用RunTimeStatistics识别过度扫描的表。</span>检查是否使用了适当的索引来满足查询，并且<span>Derby</span>选择了最佳的连接顺序。您还可以将<em>derby.language.logQueryPlan</em>属性设置为true，以检查是否正在使用索引。此属性在<samp class="codeph">derby.log</samp>文件。有关此属性的详细信息，请参见《 <span>Derby</span> <span><em>参考手册</em></span> 》的“ <span>Derby</span>属性”部分。有关更多信息，请参见<a href="ctundepth13055.html">使用RunTimeStatistics</a> 。</li>

<li class="stepexpand"><span>进行必要的更改，然后重复。</span></li>

<li class="stepexpand"><span>如果更改数据访问权限不会带来显着改善，请考虑其他数据库设计更改，例如对数据进行规范化以减少所需的联接数。然后查看<a href="ctundepth21935.html">应用程序和数据库设计问题中</a>的提示。</span>
</li>

</ol>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctundepth39739.html" title="上一节提供了一些提高性能的快速技巧。本节涵盖了一些相同的方面，但为提高性能提供了有关基本设计问题的更多背景知识。">调整数据库和应用程序</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctundepth21935.html" title="您可以用来提高Derby应用程序性能的操作分为三类。">应用程序和数据库设计问题</a></div>
<div><a href="ctundepth13055.html" title="Derby提供了一种语言级工具，用于评估语句的性能和执行计划（RUNTIMESTATISTICS属性）。">使用RunTimeStatistics</a></div>
</div>
</div>



</body></html>