<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="When cardinality statistics are automatically updated">
<meta name="abstract" content="For the following operations that you perform on a table, Derby automatically creates new statistics or updates existing statistics.">
<meta name="description" content="For the following operations that you perform on a table, Derby automatically creates new statistics or updates existing statistics.">
<meta name="DC.subject" content="cardinality statistics, automatic updates, statistics, cardinality, automatic updates">
<meta name="keywords" content="cardinality statistics, automatic updates, statistics, cardinality, automatic updates">
<meta name="DC.Relation" scheme="URI" content="ctunstats46438.html">
<meta name="DC.Relation" scheme="URI" content="ctunstats849505.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ctunstats57373">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>当基数统计信息自动更新时</title>
</head>
<body id="ctunstats57373" ><a name="ctunstats57373"><!-- --></a>


<h1 class="topictitle1">当基数统计信息自动更新时</h1>



<div><p>对于在表上执行的以下操作， <span>Derby会</span>自动创建新的统计信息或更新现有的统计信息。</p>

<ul>
<li><em>在现有的非空表上创建新索引时</em>
<p>仅为新索引自动创建统计信息。</p>
</li>

<li><em>当您向现有的非空表添加主键，唯一键或外键约束时</em>
<p>如果没有可用于新键或约束的现有索引，则<span>Derby</span>仅自动为新索引创建统计信息。</p>
</li>

<li><em>查询编译期间</em>
<p>如果查询中涉及的表的索引基数统计信息被认为已过期，则查询编译器将安排一个作业，以在单独的线程中更新它们。</p>
</li>

<li><em>当您运行<samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp>系统程序</em>
<p>如果统计信息尚不存在，则会自动为所有索引创建统计信息。</p>
</li>

<li>当您删除作为表索引一部分的列时，受影响索引的统计信息将被删除。表中其他索引的统计信息将自动更新。</li>

</ul>

<p>在查询编译期间在后台更新统计信息的线程可能会影响用户线程的性能。如果这引起问题，则可以通过将数据库属性<em>derby.storage.indexStats.auto</em>设置为false来禁用统计信息的自动更新。</p>

<p>为了诊断索引统计信息的自动更新问题，应用程序可以将数据库属性<em>derby.storage.indexStats.log</em>设置为true。设置此属性后，更新统计信息的线程会将消息写入<span>Derby</span>系统日志（ <samp class="codeph">derby.log</samp> ），每次执行任务时。您可以通过设置属性<em>derby.storage.indexStats.trace</em>来获取更详细的日志记录信息，该属性还允许您指定跟踪输出应出现的位置。</p>

<p>有关这些属性的详细信息，请参见《 <span><em>Derby参考手册</em></span> 》。</p>

<p>要在出现问题时删除所有统计信息，请致电<samp class="codeph">SYSCS_UTIL.SYSCS_DROP_STATISTICS</samp>系统过程。有关此过程和以下内容的详细信息，请参见《 <span><em>Derby参考手册》</em></span> 。 <samp class="codeph">SYSCS_UTIL.SYSCS_COMPRESS_TABLE</samp> 。</p>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctunstats46438.html" title="创建索引时，基数统计信息收集在索引的键上。">使用基数统计</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctunstats849505.html" title="基数统计信息仅在少数情况下自动更新。普通的插入，更新和删除语句不会导致统计信息被更新。这意味着统计数据可能会过时。">基数统计过时</a></div>
</div>
</div>



</body></html>