<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="How the system makes its decision if it has a choice">
<meta name="abstract" content="If the lock granularity (whether to lock rows or entire tables) is not forced by the user, the system makes a decision using the following rules.">
<meta name="description" content="If the lock granularity (whether to lock rows or entire tables) is not forced by the user, the system makes a decision using the following rules.">
<meta name="DC.Relation" scheme="URI" content="ctunoptimz19357.html">
<meta name="DC.Relation" scheme="URI" content="ctunoptimz26019.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ctunoptimz1008884">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>如果有选择，系统如何做出决定</title>
</head>
<body id="ctunoptimz1008884" ><a name="ctunoptimz1008884"><!-- --></a>


<h1 class="topictitle1">如果有选择，系统如何做出决定</h1>



<div><p>如果用户未强制执行锁定粒度（无论是锁定行还是锁定整个表），则系统将使用以下规则进行决策。</p>

<ul>
<li>对于以READ_COMMITTED隔离方式运行的SELECT语句，系统始终选择行级锁定。</li>

<li>如果该语句扫描整个表或索引，但不满足上述条件，则系统选择表级锁定。（一条语句在选择表作为访问路径时会扫描整个表。）</li>

<li>如果一条语句部分扫描了索引，则系统将使用行级锁定，直到表上触摸的行数达到锁定升级阈值为止。然后将其升级为表锁。（您可以配置此阈值编号；请参阅<a href="ctunoptimz26019.html">锁定升级阈值</a> 。）
<p>对于SELECT，UPDATE和DELETE语句，触摸的行数与读取的行数不同。如果同一行被读取了多次，则认为该行仅被触摸了一次。联接的内部表中的每一行可以读取多次，但最多只能被触摸一次。</p>
</li>

</ul>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctunoptimz19357.html" title="当系统配置为行级锁定时，它将决定是对每个DML语句中的每个表使用表级锁定还是行级锁定。">关于系统的锁粒度选择</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctunoptimz26019.html" title="系统属性derby.locks.escalationThreshold确定特定表触摸的行数的阈值，超过该阈值系统将升级为表级锁定。">锁定升级阈值</a></div>
</div>
</div>

</body>
</html>