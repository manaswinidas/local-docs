<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Activity 2: Run SQL using the client driver">
<meta name="abstract" content="This activity uses Derby within a client/server configuration by using the Network Server. The ij tool is the client application that connects to the Derby Network Server. In this activity, you create a database called seconddb and run some basic SQL statements.">
<meta name="description" content="This activity uses Derby within a client/server configuration by using the Network Server. The ij tool is the client application that connects to the Derby Network Server. In this activity, you create a database called seconddb and run some basic SQL statements.">
<meta name="DC.subject" content="Network Server, Client driver, tutorial, client driver">
<meta name="keywords" content="Network Server, Client driver, tutorial, client driver">
<meta name="DC.Relation" scheme="URI" content="cgstutorialintro.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="tgsactivity2">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>活动2：使用客户端驱动程序运行SQL</title>
</head>
<body id="tgsactivity2" ><a name="tgsactivity2"><!-- --></a>


<h1 class="topictitle1">活动2：使用客户端驱动程序运行SQL</h1>



<div><p>此活动通过使用网络服务器在客户端/服务器配置中使用<span>Derby</span> 。的<samp class="codeph">ij</samp>工具是连接到<span>Derby</span> Network Server的客户端应用程序。在此活动中，您将创建一个名为<samp class="codeph">seconddb</samp>并运行一些基本的SQL语句。</p>

<div class="p">本活动假定您知道如何打开命令外壳并更改为<samp class="codeph">DERBYTUTOR</samp>目录。</div>

<div class="section"><p>在本活动中，您将使用两个命令窗口（分别称为Shell-1和Shell-2）。您使用Shell-1启动<span>Derby</span> Network Server并显示Network Server消息。您使用Shell-2使用以下命令建立到网络服务器的客户端连接<samp class="codeph">ij</samp>然后执行一些基本的SQL操作。</p>
</div>

<ol>
<li class="stepexpand"><span>打开命令窗口（Shell-1）并更改为<samp class="codeph">DERBYTUTOR</samp>目录。</span>
</li>

<li class="stepexpand"><span>如下表所示，启动网络服务器。</span> 

<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the commands to start the Network Server on UNIX and Windows systems." frame="border" rules="all"><caption>表格1。启动网络服务器的命令</caption>


<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="25%" id="N100D4">操作系统</th>

<th valign="bottom" width="75%" id="N100DB">命令</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="25%" headers="N100D4">UNIX（Korn Shell）</td>

<td valign="top" width="75%" headers="N100DB"><pre><strong><kbd class="userinput">java -jar $DERBY_HOME/lib/derbyrun.jar server start</kbd></strong>
<tt class="sysout">Wed Nov 28 10:08:29 PST 2018 : Security manager installed using the Basic server security policy.
Wed Nov 28 10:08:37 PST 2018 : Apache Derby Network Server - 10.15.0.0 alpha - (1847657M) started and ready to accept connections on port 1527</tt></pre>
</td>

</tr>

<tr>
<td valign="top" width="25%" headers="N100D4">视窗</td>

<td valign="top" width="75%" headers="N100DB"><pre><strong><kbd class="userinput">java -jar %DERBY_HOME%\lib\derbyrun.jar server start</kbd></strong>
<tt class="sysout">Wed Nov 28 10:08:29 PST 2018 : Security manager installed using the Basic server security policy.
Wed Nov 28 10:08:37 PST 2018 : Apache Derby Network Server - 10.15.0.0 alpha - (1847657M) started and ready to accept connections on port 1527</tt></pre>
</td>

</tr>

</tbody>

</table>
</div>网络服务器启动消息出现在Shell-1命令窗口中。</li>

<li class="stepexpand"><span>打开另一个命令窗口（Shell-2）。更改为<samp class="codeph">DERBYTUTOR</samp>目录。</span>
</li>

<li class="stepexpand"><span>开始<samp class="codeph">ij</samp> 。</span> <div class="p">如果您包括<samp class="codeph">DERBY_HOME/bin</samp>在PATH环境变量中的目录中，键入：<pre>ij</pre>否则，您可以使用<samp class="codeph">java</samp>命令启动<samp class="codeph">ij</samp>工具，如下表所示。</div>


<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the commands to start the ij tool on UNIX and Windows systems." frame="border" rules="all"><caption>表2。命令启动<samp class="codeph">ij</samp>工具</caption>


<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="25%" id="N101C3">操作系统</th>

<th valign="bottom" width="75%" id="N101CA">命令</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="25%" headers="N101C3">UNIX（Korn Shell）</td>

<td valign="top" width="75%" headers="N101CA"><pre><strong><kbd class="userinput">java -jar $DERBY_HOME/lib/derbyrun.jar ij</kbd></strong>
<tt class="sysout">ij version 10.15</tt></pre>
</td>

</tr>

<tr>
<td valign="top" width="25%" headers="N101C3">视窗</td>

<td valign="top" width="75%" headers="N101CA"><pre><strong><kbd class="userinput">java -jar %DERBY_HOME%\lib\derbyrun.jar ij</kbd></strong>
<tt class="sysout">ij version 10.15</tt></pre>
</td>

</tr>

</tbody>

</table>
</div>您将从网络客户端输入所有后续命令，因此您将在Shell-2命令窗口中键入命令。</li>

<li class="stepexpand"><span>使用客户端驱动程序创建并打开与数据库的连接。</span>
 <pre><strong><kbd class="userinput">CONNECT 'jdbc:derby://localhost:1527/seconddb;create=true';
</kbd></strong></pre>
<div class="remember"><span class="remembertitle">切记：</span>客户端连接URL包含主机名和端口号。例如：<samp class="codeph">//localhost:1527/</samp></div>
 
</li>

<li class="stepexpand"><span>使用以下SQL语句创建一个包含两列（ID和NAME）的表：</span> <pre><strong><kbd class="userinput">CREATE TABLE SECONDTABLE
    (ID INT PRIMARY KEY,
    NAME VARCHAR(14));</kbd></strong>
<tt class="sysout">0 rows inserted/updated/deleted
</tt></pre>
</li>

<li class="stepexpand"><span>在表中插入三个记录。</span> <pre><strong><kbd class="userinput">INSERT INTO SECONDTABLE VALUES 
    (100,'ONE HUNDRED'),(200,'TWO HUNDRED'),(300,'THREE HUNDRED');</kbd></strong>
<tt class="sysout">3 rows inserted/updated/deleted
</tt></pre>
</li>

<li class="stepexpand"><span>选择表中的所有记录。</span> <pre><strong><kbd class="userinput">SELECT * FROM SECONDTABLE;</kbd></strong>
<tt class="sysout">ID         |NAME
------------------------
100        |ONE HUNDRED
200        |TWO HUNDRED
300        |THREE HUNDRED

3 rows selected</tt></pre>
</li>

<li class="stepexpand"><span>通过指定一个从表中选择记录的子集<samp class="codeph">WHERE</samp>条款。</span>
 <pre><strong><kbd class="userinput">SELECT * FROM SECONDTABLE WHERE ID=200;</kbd></strong>
<tt class="sysout">ID         |NAME
------------------------
200        |TWO HUNDRED

1 row selected</tt></pre>
</li>

<li class="stepexpand"><span>出口<samp class="codeph">ij</samp> 。</span> <pre><strong><kbd class="userinput">exit;</kbd></strong></pre>

</li>

<li class="stepexpand"><span>如下表所示，关闭<span>Derby</span> Network Server。</span> 

<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the commands to shut down the Network Server on UNIX and Windows systems." frame="border" rules="all"><caption>表3。关闭网络服务器的命令</caption>


<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="25%" id="N10353">操作系统</th>

<th valign="bottom" width="75%" id="N1035A">命令</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="25%" headers="N10353">UNIX（Korn Shell）</td>

<td valign="top" width="75%" headers="N1035A"><pre><strong><kbd class="userinput">java -jar $DERBY_HOME/lib/derbyrun.jar server shutdown</kbd></strong>
<tt class="sysout">Wed Nov 28 10:15:54 PST 2018 : Apache Derby Network Server - 10.15.0.0 alpha - (1847657M) shutdown</tt></pre>
</td>

</tr>

<tr>
<td valign="top" width="25%" headers="N10353">视窗</td>

<td valign="top" width="75%" headers="N1035A"><pre><strong><kbd class="userinput">java -jar %DERBY_HOME%\lib\derbyrun.jar server shutdown</kbd></strong>
<tt class="sysout">Wed Nov 28 10:15:54 PST 2018 : Apache Derby Network Server - 10.15.0.0 alpha - (1847657M) shutdown</tt></pre>
</td>

</tr>

</tbody>

</table>
</div>服务器关闭确认出现在两个命令窗口中。</li>

</ol>

<div class="section"><strong>活动笔记</strong> <p>客户端连接URL包含在嵌入式连接的URL中找不到的网络信息（主机名和端口号）。此信息告诉客户端驱动程序网络服务器的位置。客户端驱动程序向网络服务器发送请求并从网络服务器接收响应。</p>
<p>在本活动中， <span>Derby</span>数据库引擎嵌入在网络服务器中，并将数据返回到<samp class="codeph">ij</samp>客户端（客户端/服务器配置）。相反，使用嵌入式URL建立连接（一个不带<samp class="codeph">//localhost:1527/</samp> ）会导致<span>Derby</span>引擎嵌入到<samp class="codeph">ij</samp>应用程序（嵌入式配置）。</p>

<p>在这种配置下，多个客户端程序可以连接到网络服务器并同时访问数据库。（此活动未展示此功能。）</p>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cgstutorialintro.html" title="为了帮助您尽快起步并使用Derby，本自学指南重点介绍了Derby的一些更重要的功能。">针对Derby新手的自学教程</a></div>
</div>
</div>



</body></html>