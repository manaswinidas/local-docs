<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a Derby database and running SQL statements">
<meta name="abstract" content="Now, you will use the Derby ij tool to load the Derby database engine. You will use the Derby embedded driver to create and connect to the firstdb database. You will also use a few basic SQL statements to create and populate a table.">
<meta name="description" content="Now, you will use the Derby ij tool to load the Derby database engine. You will use the Derby embedded driver to create and connect to the firstdb database. You will also use a few basic SQL statements to create and populate a table.">
<meta name="DC.subject" content="Connection URL, embedded driver, create=true, ij, Database, creating, connecting to, Derby, logfile, message and error, SQL, create table, insert, select">
<meta name="keywords" content="Connection URL, embedded driver, create=true, ij, Database, creating, connecting to, Derby, logfile, message and error, SQL, create table, insert, select">
<meta name="DC.Relation" scheme="URI" content="twwdactivity1_overview.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="twwdactivity1">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>创建Derby数据库并运行SQL语句</title>
</head>
<body id="twwdactivity1" ><a name="twwdactivity1"><!-- --></a>


<h1 class="topictitle1">创建Derby数据库并运行SQL语句</h1>



<div><p>现在，您将使用<span>Derby</span> <samp class="codeph">ij</samp>加载<span>Derby</span>数据库引擎的工具。您将使用<span>Derby</span>嵌入式驱动程序创建并连接到<samp class="codeph">firstdb</samp>数据库。您还将使用一些基本的SQL语句来创建和填充表。</p>

<ol>
<li class="stepexpand"><span>运行<span>德比</span> <samp class="codeph">ij</samp>工具。</span> <div class="p">如果您包括<samp class="codeph">DERBY_HOME/bin</samp>在PATH环境变量中的目录中，键入：<pre>ij</pre>否则，您可以使用<samp class="codeph">java</samp>命令启动<samp class="codeph">ij</samp>工具，如下表所示。</div>


<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the commands to start the ij tool on UNIX and Windows systems." frame="border" rules="all"><caption>表格1。命令启动<samp class="codeph">ij</samp>工具</caption>


<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="25%" id="N1010B">操作系统</th>

<th valign="bottom" width="75%" id="N10112">命令</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="25%" headers="N1010B">UNIX（Korn Shell）</td>

<td valign="top" width="75%" headers="N10112"><pre><strong><kbd class="userinput">java -jar $DERBY_HOME/lib/derbyrun.jar ij</kbd></strong>
<tt class="sysout">ij version 10.15</tt></pre>
</td>

</tr>

<tr>
<td valign="top" width="25%" headers="N1010B">视窗</td>

<td valign="top" width="75%" headers="N10112"><pre><strong><kbd class="userinput">java -jar %DERBY_HOME%\lib\derbyrun.jar ij</kbd></strong>
<tt class="sysout">ij version 10.15</tt></pre>
</td>

</tr>

</tbody>

</table>
</div>

</li>

<li class="stepexpand"><span>创建数据库并使用嵌入式驱动程序打开与数据库的连接。</span> <pre><strong><kbd class="userinput">CONNECT 'jdbc:derby:firstdb;create=true';</kbd></strong></pre>

  <dl>
<dt class="dlterm">连接命令说明：</dt>

<dd> <dl>
<dt class="dlterm"><samp class="codeph">connect</samp></dt>

<dd>的<samp class="codeph">ij</samp>命令建立与数据库的连接。<span>Derby</span>连接URL用单引号引起来。一个<samp class="codeph">ij</samp>命令可以大写或小写。</dd>


<dt class="dlterm"><samp class="codeph">jdbc:derby:</samp></dt>

<dd><span>Derby</span>驱动程序的JDBC协议规范。</dd>


<dt class="dlterm"><samp class="codeph">firstdb</samp></dt>

<dd>数据库的名称。名称可以是任何字符串。由于未指定文件路径，因此将在默认工作目录中创建数据库（ <samp class="codeph">DERBYTUTOR</samp> ）。</dd>


<dt class="dlterm"><samp class="codeph">;create=true</samp></dt>

<dd><span>德比</span> <var class="varname">URL attribute</var>用于创建数据库。<span>Derby</span>没有SQL <samp class="codeph">create database</samp>命令。</dd>


<dt class="dlterm"><samp class="codeph">;</samp></dt>

<dd>分号是<samp class="codeph">ij</samp>命令终止符。</dd>

</dl>
 </dd>

</dl>
 </li>

<li class="stepexpand"><span>使用标准SQL创建一个包含两列的表。</span> <pre><strong><kbd class="userinput">CREATE TABLE FIRSTTABLE
    (ID INT PRIMARY KEY,
    NAME VARCHAR(12));</kbd></strong>
<tt class="sysout">0 rows inserted/updated/deleted</tt></pre>

</li>

<li class="stepexpand"><span>插入三个记录。</span> <pre><strong><kbd class="userinput">INSERT INTO FIRSTTABLE VALUES 
    (10,'TEN'),(20,'TWENTY'),(30,'THIRTY');</kbd></strong>
<tt class="sysout">3 rows inserted/updated/deleted</tt></pre>

</li>

<li class="stepexpand"><span>对表中的所有记录进行简单选择。</span> <pre><strong><kbd class="userinput">SELECT * FROM FIRSTTABLE;</kbd></strong>
<tt class="sysout">ID         |NAME
------------------------
10         |TEN
20         |TWENTY
30         |THIRTY

3 rows selected</tt></pre>
</li>

<li class="stepexpand"><span>对列ID = 20的记录执行合格选择。</span>
 <pre><strong><kbd class="userinput">SELECT * FROM FIRSTTABLE WHERE ID=20;</kbd></strong>
<tt class="sysout">ID         |NAME
------------------------
20         |TWENTY

1 row selected</tt></pre>
</li>

<li class="stepexpand"><span>可选：创建并填充其他表和其他架构对象。</span> 
<ol type="a">
<li class="substepexpand"><span>加载SQL脚本<samp class="codeph">ToursDB_schema.sql</samp> 。</span>
 <pre><strong><kbd class="userinput">run 'ToursDB_schema.sql';</kbd></strong>
<tt class="sysout">
ij&gt; ...
CREATE TABLE AIRLINES
   (  
      AIRLINE CHAR(2) NOT NULL ,
      AIRLINE_FULL VARCHAR(24),
      BASIC_RATE DOUBLE PRECISION,
   ...
0 rows inserted/updated/deleted</tt>
   <em>... Other output messages not shown ...</em>
</pre>
</li>

<li class="substepexpand"><span>通过运行脚本用数据填充表<samp class="codeph">loadTables.sql</samp> 。</span>
 <pre><strong><kbd class="userinput">run 'loadTables.sql';</kbd></strong>
<tt class="sysout">
ij&gt; run 'loadCOUNTRIES.sql';
ij&gt; insert into COUNTRIES values ( 'Afghanistan','AF','Asia');
1 row inserted/updated/deleted
ij&gt; insert into COUNTRIES values ( 'Albania','AL','Europe');
1 row inserted/updated/deleted</tt>
   <em>... Other output messages not shown ...</em>
</pre>
</li>

</ol>

</li>

<li class="stepexpand"><span>退出<samp class="codeph">ij</samp>工具。</span> <pre><strong><kbd class="userinput">exit;</kbd></strong></pre>您应该返回到<samp class="codeph">DERBYTUTOR</samp>目录。
</li>

<li class="stepexpand"><span>浏览此活动创建的最重要的文件：</span>
 <ul>
<li>的<samp class="codeph">derby.log</samp>文件。该文件是消息和错误日志，在正常情况下，该日志包含一组启动消息和关闭消息。
<pre><tt class="sysout">----------------------------------------------------------------
Wed Nov 28 09:52:36 PST 2018:
Booting Derby version The Apache Software Foundation - Apache Derby - 10.15.0.0 alpha - (1847657M): instance a816c00e-0167-5b73-7c80-0000033b46b8 
on database directory /Users/rhillegas/sw/z/activity1/DERBYTUTOR/firstdb with class loader jdk.internal.loader.ClassLoaders$AppClassLoader@4f8e5cde 
Loaded from file:/Users/rhillegas/sw/z/db-derby-10.15.0.0-bin/lib/derby.jar
java.vendor=Oracle Corporation
java.runtime.version=9+181
user.dir=/Users/rhillegas/sw/z/activity1/DERBYTUTOR
os.name=Mac OS X
os.arch=x86_64
os.version=10.11.6
derby.system.home=null
Database Class Loader started - derby.database.classpath=''
----------------------------------------------------------------
Wed Nov 28 09:55:14 PST 2018: Shutting down Derby engine
----------------------------------------------------------------
Wed Nov 28 09:55:14 PST 2018:
Shutting down instance a816c00e-0167-5b73-7c80-0000033b46b8 on database directory /Users/rhillegas/sw/z/activity1/DERBYTUTOR/firstdb with class loader jdk.internal.loader.ClassLoaders$AppClassLoader@4f8e5cde 
----------------------------------------------------------------</tt></pre>
</li>

<li>的<samp class="codeph">firstdb</samp>数据库目录。目录内是子目录<samp class="codeph">seg0</samp> （包含数据文件）和<samp class="codeph">log</samp> （包含事务日志文件）。</li>

</ul>
</li>

</ol>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="twwdactivity1_overview.html" title="在本练习中，您将使用嵌入式驱动程序来加载Derby数据库引擎，创建并连接到数据库以及使用一些基本的SQL语句。">活动1：使用嵌入式驱动程序运行SQL</a></div>
</div>
</div>



</body></html>