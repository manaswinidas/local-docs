<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Import into tables that contain identity columns">
<meta name="abstract" content="You can use the either the SYSCS_UTIL.SYSCS_IMPORT_DATA procedure or the SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE procedure to import data into a table that contains an identity column. The approach that you take depends on whether the identity column is GENERATED ALWAYS or GENERATED BY DEFAULT.">
<meta name="description" content="You can use the either the SYSCS_UTIL.SYSCS_IMPORT_DATA procedure or the SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE procedure to import data into a table that contains an identity column. The approach that you take depends on whether the identity column is GENERATED ALWAYS or GENERATED BY DEFAULT.">
<meta name="DC.subject" content="importing data, tables with identity columns">
<meta name="keywords" content="importing data, tables with identity columns">
<meta name="DC.Relation" scheme="URI" content="tadminimporting.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cadminimportidentitycol">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>导入包含标识列的表</title>
</head>
<body id="cadminimportidentitycol" ><a name="cadminimportidentitycol"><!-- --></a>


<h1 class="topictitle1">导入包含标识列的表</h1>



<div><p>您可以使用<samp class="codeph">SYSCS_UTIL.SYSCS_IMPORT_DATA</samp>程序或<samp class="codeph">SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE</samp>将数据导入包含标识列的表的过程。您采用的方法取决于标识列是“始终生成”还是“默认生成”。</p>

<div class="section"><h2 class="sectiontitle">标识列和REPLACE参数</h2>
<p>如果<samp class="codeph">REPLACE</samp>参数在导入期间使用， <span>Derby</span>会将其对列的最后一个标识值的内部计数器重置为为该标识列定义的初始值。</p>

</div>

<div class="section"><h2 class="sectiontitle">身份列始终生成</h2>
<p>如果将标识列定义为GENERATED ALWAYS，则始终为表行生成标识值。当输入文件中的对应行已包含标识列的值时，该行将无法插入表中，并且导入操作将失败。</p>

<p>为防止此类故障，以下示例说明了如何在<samp class="codeph">SYSCS_UTIL.SYSCS_IMPORT_DATA</samp>和<samp class="codeph">SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE</samp>忽略文件中标识列的数据，并从插入列列表中省略列名的过程。</p>

<p>下表定义包含一个标识列， <samp class="codeph">c2</samp> ，并在以下示例中使用：</p>

<pre><strong>CREATE TABLE tab1 (c1 CHAR(30), c2 INT GENERATED ALWAYS AS IDENTITY, 
   c3 REAL, c4 CHAR(1))</strong></pre>

<ul>
<li>假设您要将数据导入到<samp class="codeph">tab1</samp>从文件中<samp class="codeph">myfile.del</samp> ，没有标识列信息。的<samp class="codeph">myfile.del</samp>文件包含具有以下数据的三个字段：<pre>Robert,45.2,J
Mike,76.9,K
Leo,23.4,I</pre>要导入数据，您必须在<samp class="codeph">tab1</samp>表，但标识列除外<samp class="codeph">c2</samp> ，当您调用该过程时。例如：<pre><strong>CALL SYSCS_UTIL.SYSCS_IMPORT_DATA (NULL, 'TAB1', 'C1,C3,C4', 
    null, 'myfile.del',null, null, null, 0)</strong></pre>
</li>

<li>假设您要将数据导入到<samp class="codeph">tab1</samp>从文件中<samp class="codeph">empfile.del</samp> ，其中也包含标识列信息。该文件包含三个字段，其中包含以下数据：<pre>Robert,1,45.2,J
Mike,2,23.4,I
Leo,3,23.4,I</pre>要导入数据，必须显式指定不包含标识列的插入列列表<samp class="codeph">c2</samp>并在调用该过程时指定没有标识列数据的列索引。例如：<pre><strong>CALL SYSCS_UTIL.SYSCS_IMPORT_DATA (NULL, 'TAB1', 'C1,C3,C4', 
    '1,3,4', 'empfile.del',null, null, null, 0)</strong></pre>
</li>

</ul>

</div>

<div class="section"><h2 class="sectiontitle">身份列是按默认生成的</h2>
<p>如果将标识列定义为GENERATED BY DEFAULT，则仅当未指定显式值时才为表行生成标识值。这意味着您有几个选项，具体取决于输入文件的内容和导入处理的期望结果：</p>

<ul>
<li>您可以从插入列列表中省略标识列，在这种情况下， <span>Derby</span>将为每个输入行的标识列生成一个新值。无论输入文件是否包含标识列的值，都可以使用此选项，但是请注意，如果输入文件包含标识列的值，则在调用该过程时，还必须从列索引中省略标识列。</li>

<li>您可以在插入列列表中包括标识列，在这种情况下， <span>Derby</span>将使用输入文件中的列值。当然，仅当输入文件实际包含标识列的值时，此选项才可用。</li>

</ul>

<p>下表定义包含一个标识列， <samp class="codeph">c2</samp> ，并在以下示例中使用：</p>

<pre><strong>CREATE TABLE tab1 (c1 CHAR(30),
   c2 INT GENERATED BY DEFAULT AS IDENTITY, 
   c3 REAL, c4 CHAR(1))</strong></pre>

<ul>
<li>假设您要将数据导入到<samp class="codeph">tab1</samp>从文件中<samp class="codeph">myfile.del</samp> ，没有标识列信息。的<samp class="codeph">myfile.del</samp>文件包含具有以下数据的三个字段：<pre>Robert,45.2,J
Mike,76.9,K
Leo,23.4,I</pre>要导入数据，您必须在<samp class="codeph">tab1</samp>表，但标识列除外<samp class="codeph">c2</samp> ，当您调用该过程时。例如：<pre><strong>CALL SYSCS_UTIL.SYSCS_IMPORT_DATA (NULL, 'TAB1', 'C1,C3,C4', 
    null, 'myfile.del',null, null, null, 0)</strong></pre>
</li>

<li>假设您要将数据导入到<samp class="codeph">tab1</samp>从文件中<samp class="codeph">empfile.del</samp> ，其中也包含标识列信息。该文件包含三个字段，其中包含以下数据：<pre>Robert,1,45.2,J
Mike,2,23.4,I
Leo,3,23.4,I</pre>在这种情况下，假设您希望使用输入文件中的现有标识列值。要导入数据，您可以简单地通过<samp class="codeph">null</samp>调用该过程时插入列列表和列索引参数。例如：<pre><strong>CALL SYSCS_UTIL.SYSCS_IMPORT_DATA (NULL, 'TAB1', NULL, 
    NULL, 'empfile.del',null, null, null, 0)</strong></pre>
</li>

<li>再次假设您要将数据导入到<samp class="codeph">tab1</samp>从文件中<samp class="codeph">empfile.del</samp> ，它也具有标识列信息，但是在这种情况下，假设您<strong>不</strong>希望使用输入文件中的标识列值，而是希望允许<span>Derby</span>生成新的标识列值。在这种情况下，要导入数据，必须指定不带标识列的插入列列表<samp class="codeph">c2</samp>并在调用该过程时指定没有标识列数据的列索引。例如：<pre><strong>CALL SYSCS_UTIL.SYSCS_IMPORT_DATA (NULL, 'TAB1', 'C1,C3,C4', 
    '1,3,4', 'empfile.del',null, null, null, 0)</strong></pre>
</li>

</ul>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="tadminimporting.html" title="您可以使用Derby导入过程从表或查询中导入所有数据，或与其他数据分开导入LOB数据。">使用内置过程导入数据</a></div>
</div>
</div>



</body></html>