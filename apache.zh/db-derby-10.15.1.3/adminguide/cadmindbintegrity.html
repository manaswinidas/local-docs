<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Maintaining database integrity">
<meta name="abstract" content="One of the most important responsibilities of a database administrator is to maintain the integrity of the database and prevent it from becoming corrupted.">
<meta name="description" content="One of the most important responsibilities of a database administrator is to maintain the integrity of the database and prevent it from becoming corrupted.">
<meta name="DC.subject" content="corruption, avoiding, database corruption, data integrity, maintaining">
<meta name="keywords" content="corruption, avoiding, database corruption, data integrity, maintaining">
<meta name="DC.Relation" scheme="URI" content="cadminparttwo.html">
<meta name="DC.Relation" scheme="URI" content="cadminconsist01.html">
<meta name="DC.Relation" scheme="URI" content="cadminhubbkup98797.html">
<meta name="DC.Relation" scheme="URI" content="cadminimport16245.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplication.html">
<meta name="DC.Relation" scheme="URI" content="cadminlog98.html">
<meta name="DC.Relation" scheme="URI" content="cadminlockvti42553.html">
<meta name="DC.Relation" scheme="URI" content="cadminspace21579.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cadmindbintegrity">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>维护数据库完整性</title>
</head>
<body id="cadmindbintegrity" ><a name="cadmindbintegrity"><!-- --></a>


<h1 class="topictitle1">维护数据库完整性</h1>



<div><p>数据库管理员最重要的职责之一就是维护数据库的完整性并防止其损坏。</p>

<p><span>Derby</span>必须能够同步到磁盘。在电源故障，系统崩溃或软件崩溃的情况下，某些计算机，磁盘或操作系统设置可能会阻止正确的同步并导致不可恢复的数据库损坏。为避免数据库损坏，可以执行以下操作：</p>

<ul>
<li>请勿触摸数据库目录中的任何文件或目录，包括<samp class="codeph">log</samp>和<samp class="codeph">seg0</samp>目录和<samp class="codeph">service.properties</samp>文件。在此目录中编辑，添加或删除文件可能会导致数据损坏，并使数据库处于不可恢复的状态。</li>

<li>不要在保存数据库的硬盘驱动器上启用磁盘写缓存。如果启用了写缓存，请禁用它（在许多Windows系统上默认启用）。磁盘写缓存可以提高操作系统性能。但是，如果发生电源故障，设备故障或软件故障，也可能导致信息丢失。请查阅您的操作系统支持文档，以获取有关如何禁用磁盘写缓存的信息。</li>

<li>在本地驱动器上而不是在NFS挂载，SMB挂载或其他网络挂载的磁盘上运行<span>Derby</span> 。</li>

<li>禁用任何其他设置或选项，这些设置或选项可能会在<span>Derby</span>写入其事务日志或其他数据时阻止与磁盘的正确同步。</li>

</ul>

<p>不正确的备份或还原会引起许多损坏问题。以防止数据库损坏的方式备份数据库：</p>

<ul>
<li>使用操作系统命令备份数据库之前，请始终确保已关闭或冻结数据库。</li>

<li>始终将数据库备份到新位置，而不是覆盖任何现有数据。</li>

</ul>

<p>执行备份后，请检查数据库的一致性。有关详细信息，请参见<a href="cadminconsist01.html#cadminconsist01">检查数据库一致性</a> 。</p>

<p>有关更多信息，请参见<a href="cadminhubbkup98797.html#cadminhubbkup98797">备份和还原数据库</a> 。</p>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cadminparttwo.html" title="">第二部分：Derby管理指南</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cadminconsist01.html" title="执行备份后，或者如果遇到硬件或操作系统故障，则可以使用SYSCS_UTIL.SYSCS_CHECK_TABLE系统函数来验证数据库是否仍然一致。">检查数据库一致性</a></div>
<div><a href="cadminhubbkup98797.html" title="Derby提供了一种在脱机或联机时备份数据库的方法。您也可以从指定位置还原完整备份。">备份和还原数据库</a></div>
<div><a href="cadminimport16245.html" title="您可以在文件和Derby数据库之间导入和导出大量数据。您不必使用INSERT和SELECT语句，而可以使用Derby系统过程将数据直接从文件导入表中，以及将数据从表导出到文件中。">导入和导出数据</a></div>
<div><a href="cadminreplication.html" title="复制是强大的数据库管理系统的重要功能。在Derby中，使用连接URL属性启动数据库复制。">复制数据库</a></div>
<div><a href="cadminlog98.html" title="通过将数据库的日志放在单独的设备上，可以提高更新密集型大型数据库的性能，从而减少I / O争用。">在单独的设备上登录</a></div>
<div><a href="cadminlockvti42553.html" title="Derby提供了一种监视和显示锁定信息的工具。">获取锁定信息</a></div>
<div><a href="cadminspace21579.html" title="在删除或更新了大量数据之后，Derby表或索引（有时称为集团）可以包含未使用的空间。">回收未使用的空间</a></div>
</div>
</div>



</body></html>