<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.icra.org/ratingsv02.html&quot; l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true r (n 0 s 0 v 0 l 0) &quot;http://www.classify.org/safesurf/&quot; l gen true r (SS~~000 1))">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Replicating databases">
<meta name="abstract" content="Replication is an important feature of a robust database management system. In Derby, you start database replication by using connection URL attributes.">
<meta name="description" content="Replication is an important feature of a robust database management system. In Derby, you start database replication by using connection URL attributes.">
<meta name="DC.subject" content="replicating databases, database replication">
<meta name="keywords" content="replicating databases, database replication">
<meta name="DC.Relation" scheme="URI" content="cadminparttwo.html">
<meta name="DC.Relation" scheme="URI" content="cadmindbintegrity.html">
<meta name="DC.Relation" scheme="URI" content="cadminconsist01.html">
<meta name="DC.Relation" scheme="URI" content="cadminhubbkup98797.html">
<meta name="DC.Relation" scheme="URI" content="cadminimport16245.html">
<meta name="DC.Relation" scheme="URI" content="cadminlog98.html">
<meta name="DC.Relation" scheme="URI" content="cadminlockvti42553.html">
<meta name="DC.Relation" scheme="URI" content="cadminspace21579.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicstartrun.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicstop.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicfailover.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicsecurity.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicfailures.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cadminreplication">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>复制数据库</title>
</head>
<body id="cadminreplication" ><a name="cadminreplication"><!-- --></a>


<h1 class="topictitle1">复制数据库</h1>



<div><p>复制是强大的数据库管理系统的重要功能。在<span>Derby中</span> ，使用连接URL属性启动数据库复制。</p>
<p><span>Derby</span>的复制功能具有以下功能：</p>

<ul>
<li><strong>一个主机，一个从机</strong> ：一个复制的数据库位于两个位置，并由两个不同的<span>Derby</span>实例管理。这些<span>Derby</span>实例中的一个实例对此数据库具有<em>主</em>角色，另一个实例具有<em>从属</em>角色。通常，主服务器和从服务器在不同的节点上运行，但这不是必需的。主服务器及其关联的从服务器一起代表一个<em>复制对</em> 。
</li>

<li><strong>前滚</strong>传送<strong>日志</strong> ：复制基于将<span>Derby</span>事务日志从主数据库传送到从数据库，然后将日志中描述的操作前滚到从数据库。
</li>

<li><strong>不对称</strong> ：只有主服务器处理交易。从站不处理任何事务，甚至不执行读取操作。
</li>

<li><strong>异步性</strong> ：事务在主机上提交而无需等待从机。定期将事务日志传送到从属服务器，并与主服务器上的事务处理完全脱钩。如果主机崩溃，这可能会导致一些丢失的事务。
</li>

<li><strong>不共享任何内容</strong> ：除了网络线路外，假定不共享任何硬件。
</li>

<li><strong>复制粒度</strong> ： <strong>复制粒度</strong>恰好是一个数据库。但是，一个<span>Derby</span>实例对于不同的数据库可能具有不同的角色。例如，一个<span>Derby</span>实例可能同时具有以下角色：<ul>
<li>一个数据库D1的主角色复制到一个节点</li>

<li>从另一个节点复制的数据库D2的从属角色</li>

<li>数据库D3的正常非复制角色</li>

</ul>

</li>

</ul>

<p>复制建立在<span>Derby</span>从崩溃中恢复的能力之上，该能力从备份开始并前滚<span>Derby</span>的事务日志文件。主服务器使用网络连接将日志记录发送到从服务器。然后，从服务器将这些日志记录写入其本地日志并重做它们。
</p>

<p>如果主服务器发生故障，则从服务器将通过重做尚未处理的日志来完成恢复。进行此恢复后，从站的状态接近主机崩溃时的状态。但是，在主服务器上执行的某些最后事务可能尚未发送到从服务器，因此可能无法反映出来。当从属服务器完成恢复工作后，它将转换为准备处理事务的普通<span>Derby</span>实例。有关更多详细信息，请参阅<a href="cadminreplicfailover.html#cadminreplicfailover">强制故障转移</a>以及<a href="cadminreplicsecurity.html#cadminreplicsecurity">复制和安全性</a> 。
</p>

<p>几个<span>Derby</span>属性使您可以指定复制日志缓冲区的大小，日志传送之间的间隔以及是否记录复制消息。有关详细信息，请参见《 <span><em>Derby参考手册</em></span> 》。</p>

<p>您可以在以嵌入式模式或网络服务器模式运行的数据库上执行复制。
</p>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="cadminreplicstartrun.html">启动和运行复制</a></strong><br>每个复制的数据库都从该数据库的主版本复制到从版本。</li>
<li class="ulchildlink"><strong><a href="cadminreplicstop.html">停止复制</a></strong><br>要停止复制数据库，请使用stopMaster = true连接URL属性连接到master数据库。</li>
<li class="ulchildlink"><strong><a href="cadminreplicfailover.html">强制故障转移</a></strong><br>您可以随时将具有从属角色的Derby数据库转换为可以处理事务的普通Derby数据库。从从服务器转变为活动Derby数据库的这种转换称为故障转移。</li>
<li class="ulchildlink"><strong><a href="cadminreplicsecurity.html">复制和安全性</a></strong><br>如果要在启用安全管理器的情况下执行复制，则必须在主系统和从系统上都修改安全策略文件，以允许主从网络连接。</li>
<li class="ulchildlink"><strong><a href="cadminreplicfailures.html">复制失败处理</a></strong><br>复制可能会遇到几种故障情况。下表列出了这些情况，并描述了Derby所采取的措施。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cadminparttwo.html" title="">第二部分：Derby管理指南</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cadmindbintegrity.html" title="数据库管理员最重要的职责之一就是维护数据库的完整性并防止其损坏。">维护数据库完整性</a></div>
<div><a href="cadminconsist01.html" title="执行备份后，或者如果遇到硬件或操作系统故障，则可以使用SYSCS_UTIL.SYSCS_CHECK_TABLE系统函数来验证数据库是否仍然一致。">检查数据库一致性</a></div>
<div><a href="cadminhubbkup98797.html" title="Derby提供了一种在脱机或联机时备份数据库的方法。您也可以从指定位置还原完整备份。">备份和还原数据库</a></div>
<div><a href="cadminimport16245.html" title="您可以在文件和Derby数据库之间导入和导出大量数据。不必使用INSERT和SELECT语句，您可以使用Derby系统过程将数据直接从文件导入表中，以及将数据从表导出到文件中。">导入和导出数据</a></div>
<div><a href="cadminlog98.html" title="通过将数据库的日志放在单独的设备上，可以提高更新密集型大型数据库的性能，从而减少I / O争用。">在单独的设备上登录</a></div>
<div><a href="cadminlockvti42553.html" title="Derby提供了一种监视和显示锁定信息的工具。">获取锁定信息</a></div>
<div><a href="cadminspace21579.html" title="在删除或更新了大量数据之后，Derby表或索引（有时称为集团）可以包含未使用的空间。">回收未使用的空间</a></div>
</div>
</div>

</body>
</html>