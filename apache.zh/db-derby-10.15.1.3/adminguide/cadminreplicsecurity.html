<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Replication and security">
<meta name="abstract" content="If you want to perform replication with the security manager enabled, you must modify the security policy file on both the master and slave systems to allow the master-slave network connection.">
<meta name="description" content="If you want to perform replication with the security manager enabled, you must modify the security policy file on both the master and slave systems to allow the master-slave network connection.">
<meta name="DC.subject" content="replicating databases, security, database replication">
<meta name="keywords" content="replicating databases, security, database replication">
<meta name="DC.Relation" scheme="URI" content="cadminreplication.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicstartrun.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicstop.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicfailover.html">
<meta name="DC.Relation" scheme="URI" content="cadminreplicfailures.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cadminreplicsecurity">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>复制和安全性</title>
</head>
<body id="cadminreplicsecurity" ><a name="cadminreplicsecurity"><!-- --></a>


<h1 class="topictitle1">复制和安全性</h1>



<div><p>如果要在启用安全管理器的情况下执行复制，则必须在主系统和从系统上都修改安全策略文件，以允许主从网络连接。</p>

<p>要修改的部分是此行之后的部分：</p>

<pre>grant codeBase "${derby.install.url}derby.jar"</pre>

<p>将以下权限添加到主系统上的策略文件：</p>

<pre>permission java.net.SocketPermission "<em>slaveHost</em>:<em>slavePort</em>", "connect,resolve";</pre>

<p>将以下权限添加到从属系统上的策略文件：</p>

<pre>permission java.net.SocketPermission "<em>slaveHost</em>", "accept,resolve";
permission java.net.SocketPermission "localhost:<em>slavePort</em>", "listen";</pre>

<p><em>slaveHost</em>和<em>slavePort</em>是您为<samp class="codeph">slaveHost=<em>hostname</em></samp>和<samp class="codeph">slavePort=<em>portValue</em></samp>属性，在《 <span><em>Derby参考手册》中进行了介绍</em></span> 。</p>

<p>有关安全策略文件的详细信息，请参见《 <span><em>Derby安全指南</em></span> 》中的“配置Java安全性”。</p>

<p>根据运行<span>Derby</span>的安全模式，当您指定与复制相关的连接URL属性时，将强制执行下表中描述的措施。</p>


<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the requirements for specifying replication attributes with each of the Derby security modes." frame="border" rules="all"><caption>表格1。<span>Derby</span>安全性的复制行为</caption>


<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="30%" id="N1010E">安全模式</th>

<th valign="bottom" width="70%" id="N10115">复制属性要求</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="30%" headers="N1010E">没有安全感</td>

<td valign="top" width="70%" headers="N10115">任何人都可以指定复制属性</td>

</tr>

<tr>
<td valign="top" width="30%" headers="N1010E">身份验证已打开</td>

<td valign="top" width="70%" headers="N10115">普通<span>Derby</span>连接策略：指定有效<samp class="codeph">user=<em>userName</em></samp>和<samp class="codeph">password=<em>userPassword</em></samp>属性</td>

</tr>

<tr>
<td valign="top" width="30%" headers="N1010E">授权已开启</td>

<td valign="top" width="70%" headers="N10115">的<samp class="codeph">user=<em>userName</em></samp>和<samp class="codeph">password=<em>userPassword</em></samp>属性必须有效，并且用户必须是复制数据库的所有者</td>

</tr>

</tbody>

</table>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cadminreplication.html" title="复制是强大的数据库管理系统的重要功能。在Derby中，使用连接URL属性启动数据库复制。">复制数据库</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cadminreplicstartrun.html" title="每个复制的数据库都从该数据库的主版本复制到从版本。">启动和运行复制</a></div>
<div><a href="cadminreplicstop.html" title="要停止数据库复制，请使用stopMaster = true连接URL属性连接到master数据库。">停止复制</a></div>
<div><a href="cadminreplicfailover.html" title="您可以随时将具有从属角色的Derby数据库转换为可以处理事务的普通Derby数据库。从从服务器转变为活动Derby数据库的这种转换称为故障转移。">强制故障转移</a></div>
<div><a href="cadminreplicfailures.html" title="复制可能会遇到几种故障情况。下表列出了这些情况，并描述了Derby所采取的措施。">复制失败处理</a></div>
</div>
</div>



</body></html>