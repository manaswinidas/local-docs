<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Accessing the Network Server by using a DataSource object">
<meta name="abstract" content="The Network Server supports a set of Derby Network Client driver DataSource classes.">
<meta name="description" content="The Network Server supports a set of Derby Network Client driver DataSource classes.">
<meta name="DC.subject" content="DataSource objects, and Network Server, Network Server, using DataSource objects">
<meta name="keywords" content="DataSource objects, and Network Server, Network Server, using DataSource objects">
<meta name="DC.Relation" scheme="URI" content="cadminapps59125.html">
<meta name="DC.Relation" scheme="URI" content="cadminappsthenetworkserverandjvms.html">
<meta name="DC.Relation" scheme="URI" content="tadminappschangingyourclasspath.html">
<meta name="DC.Relation" scheme="URI" content="tadmincbdjhhfd.html">
<meta name="DC.Relation" scheme="URI" content="tadminconfigshuttingdownthenetworkserver.html">
<meta name="DC.Relation" scheme="URI" content="tadminconfigsysteminformation.html">
<meta name="DC.Relation" scheme="URI" content="cadminappsclient.html">
<meta name="DC.Relation" scheme="URI" content="cadminapps811478.html">
<meta name="DC.Relation" scheme="URI" content="cadminappsusingthederbytoolswiththene.html">
<meta name="DC.Relation" scheme="URI" content="cadminapps.html">
<meta name="DC.Relation" scheme="URI" content="tadminappssettingportnumbers.html">
<meta name="DC.Relation" scheme="URI" content="radminnsdatasourcexmp.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cadminnsdatasources">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>通过使用数据源对象访问网络服务器</title>
</head>
<body id="cadminnsdatasources" ><a name="cadminnsdatasources"><!-- --></a>


<h1 class="topictitle1">通过使用数据源对象访问网络服务器</h1>



<div><p>网络服务器支持一组<span>Derby</span> Network Client驱动程序<samp class="codeph">DataSource</samp>类。</p>

<p>您可以使用<samp class="codeph">org.apache.derby.jdbc.ClientDataSource</samp>和<samp class="codeph">org.apache.derby.jdbc.ClientConnectionPoolDataSource</samp>所有受支持的Java SE版本上的类。</p>

<div class="section"><h2 class="sectiontitle">使用语句缓存</h2>
<p><span>Derby</span>支持JDBC语句缓存，这可以提高使用以下代码的应用程序的性能<samp class="codeph">PreparedStatement</samp>要么<samp class="codeph">CallableStatement</samp>对象。语句缓存避免了从客户端到服务器的网络遍历以准备已在同一连接上准备的语句而导致的性能损失。</p>

<p>要使用语句缓存，必须使用<samp class="codeph">org.apache.derby.jdbc.ClientConnectionPoolDataSource</samp>要么<samp class="codeph">org.apache.derby.jdbc.BasicClientConnectionPoolDataSource40</samp>宾语。实例化此对象后，请执行以下步骤：</p>

<ol>
<li>通过调用指定所需的语句缓存大小<samp class="codeph">setMaxStatements</samp>上的方法<samp class="codeph">DataSource</samp>对象，指定一个大于零的参数。</li>

<li>致电<samp class="codeph">getPooledConnection</samp>上的方法<samp class="codeph">DataSource</samp>获得一个对象<samp class="codeph">javax.sql.PooledConnection</samp>对象（物理连接）。</li>

<li>致电<samp class="codeph">javax.sql.PooledConnection.getConnection</samp>获得方法<samp class="codeph">java.sql.Connection</samp>对象（逻辑连接）。</li>

</ol>

<p>获得连接后，使用准备好的语句或可调用的语句与数据库进行交互。使用完后，关闭每个语句以将其返回到缓存。您创建的语句保存在客户端的缓存中，并在需要时重用。</p>

<p>有关代码示例，请参见<a href="radminnsdatasourcexmp.html#radminnsdatasourcexmp__stmtcacheexmp">语句缓存</a>示例。</p>

<p>JDBC语句缓存的使用使每个物理连接使用更多的内存。数量取决于允许连接缓存的语句数和实际缓存的语句数。</p>

<p>如果启用JDBC语句缓存，则错误处理会稍有变化。之前出现的一些错误<samp class="codeph">prepareStatement</samp>现在，在语句执行过程中可能会出现已执行的方法。例如，假设您使用准备好的语句查询表，然后将其缓存。如果删除了该表，则查询该表的准备好的语句不会无效。如果在同一连接上再次准备查询，将从缓存中获取缓存的对象，然后<samp class="codeph">prepareStatement</samp>调用似乎已成功，尽管实际上尚未准备好该语句。当执行准备好的语句时，在服务器端检测到错误，并通知客户端。</p>

</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="radminnsdatasourcexmp.html">数据源访问示例</a></strong><br>这些示例使用org.apache.derby.jdbc。ClientDataSource和org.apache.derby.jdbc。ClientConnectionPoolDataSource访问网络服务器。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cadminapps59125.html" title="您必须修改当前以嵌入式模式针对Derby运行的Java应用程序，以便它们与Derby Network Server一起使用。">将网络服务器与预先存在的Derby应用程序一起使用</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cadminappsthenetworkserverandjvms.html" title="Derby网络服务器与Java平台标准版（Java SE）9及更高版本兼容。">网络服务器和Java虚拟机（JVM）</a></div>
<div><a href="cadminappsclient.html" title="连接到网络服务器时，您的应用程序需要加载特定于网络服务器的驱动程序和连接URL。此外，如果使用身份验证，则必须指定用户名和密码。">使用网络客户端驱动程序访问网络服务器</a></div>
<div><a href="cadminapps811478.html" title="Derby嵌入式驱动程序和网络服务器都提供XA支持。网络服务器提供DRDA 7级支持。支持XAMGR的DRDA客户端（例如Derby网络客户端）可以将XA请求发送到网络服务器。">XA和网络服务器</a></div>
<div><a href="cadminappsusingthederbytoolswiththene.html" title="Derby工具ij和dblook在嵌入式模式和客户机/服务器模式下工作。">在网络服务器上使用Derby工具</a></div>
<div><a href="cadminapps.html" title="本节描述了在嵌入式模式下运行Derby与使用网络服务器之间的区别。">在嵌入式模式下运行Derby与使用网络服务器之间的区别</a></div>
</div>
<div class="reltasks"><strong>相关任务</strong><br>
<div><a href="tadminappschangingyourclasspath.html" title="要使用网络服务器和网络客户端驱动程序，请将以下jar文件添加到服务器的classpath / modulepath中。">安装所需的jar文件并将其添加到classpath / modulepath</a></div>
<div><a href="tadmincbdjhhfd.html" title="要启动网络服务器，可以调用脚本，JAR文件或类。">启动网络服务器</a></div>
<div><a href="tadminconfigshuttingdownthenetworkserver.html" title="要关闭网络服务器，您可以调用脚本，jar文件或类。">关闭网络服务器</a></div>
<div><a href="tadminconfigsysteminformation.html" title="您可以使用sysinfo实用程序获取有关网络服务器的信息，例如版本和当前属性值，Java信息以及Derby数据库服务器信息。">获取系统信息</a></div>
<div><a href="tadminappssettingportnumbers.html" title="默认情况下，Derby Network Server侦听TCP / IP端口号1527。如果要使用其他端口号，则可以在启动网络服务器时在命令行上指定它。">设置端口号</a></div>
</div>
</div>



</body></html>