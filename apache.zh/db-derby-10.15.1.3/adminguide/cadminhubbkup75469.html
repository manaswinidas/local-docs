<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Using operating system commands with the freeze and unfreeze system procedures to perform an online backup">
<meta name="abstract" content="Typically, these procedures are used to speed up the copy operation involved in an online backup.">
<meta name="description" content="Typically, these procedures are used to speed up the copy operation involved in an online backup.">
<meta name="DC.subject" content="SYSCS_FREEZE_DATABASE system procedure, SYSCS_UNFREEZE_DATABASE system procedure">
<meta name="keywords" content="SYSCS_FREEZE_DATABASE system procedure, SYSCS_UNFREEZE_DATABASE system procedure">
<meta name="DC.Relation" scheme="URI" content="cadminhubbkup63476.html">
<meta name="DC.Relation" scheme="URI" content="cadminhubbkup01.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cadminhubbkup75469">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>在冻结和取消冻结系统过程中使用操作系统命令来执行在线备份</title>
</head>
<body id="cadminhubbkup75469" ><a name="cadminhubbkup75469"><!-- --></a>


<h1 class="topictitle1">在冻结和取消冻结系统过程中使用操作系统命令来执行在线备份</h1>



<div><p>通常，这些过程用于加快联机备份中涉及的复制操作。</p>

<p>在这种情况下， <span>Derby</span>不会为您执行复制操作。您使用<samp class="codeph">SYSCS_UTIL.SYSCS_FREEZE_DATABASE</samp>程序锁定数据库，然后使用操作系统命令显式复制数据库目录。</p>

<p>例如，因为UNIX <samp class="codeph">tar</samp>该命令使用操作系统文件复制例程，并且<samp class="codeph">SYSCS_UTIL.SYSCS_BACKUP_DATABASE</samp>该过程使用具有附加内部同步功能的Java I / O调用，从而允许在备份期间进行更新， <samp class="codeph">tar</samp>该命令可能比提供更快的备份<samp class="codeph">SYSCS_UTIL.SYSCS_BACKUP_DATABASE</samp>程序。</p>

<p>要将操作系统命令用于在线数据库备份，请调用<samp class="codeph">SYSCS_UTIL.SYSCS_FREEZE_DATABASE</samp>系统过程。的<samp class="codeph">SYSCS_UTIL.SYSCS_FREEZE_DATABASE</samp>系统过程将数据库置于可以安全复制的状态。复制数据库后，使用<samp class="codeph">SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE</samp>系统过程以继续使用数据库。仅在那之后<samp class="codeph">SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE</samp>已指定可以再次将事务写入数据库。冻结数据库时，可以进行读取操作。</p>

<div class="note"><span class="notetitle">注意：</span>为了确保数据库的一致备份， <span>Derby</span>可能会阻止尝试写入冻结数据库的应用程序，直到备份完成并且<samp class="codeph">SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE</samp>系统过程被调用。</div>

<p>下面的示例演示如何使用冻结和解冻过程来包围操作系统的复制命令：</p>

<pre>public static void backUpDatabaseWithFreeze(Connection conn)
	throws SQLException {
    Statement s = conn.createStatement();
    s.executeUpdate(
        "CALL SYSCS_UTIL.SYSCS_FREEZE_DATABASE()");
    <strong>//copy the database directory during this interval</strong>
    s.executeUpdate(
        "CALL SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE()");
    s.close();
}</pre>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="cadminhubbkup63476.html" title="使用联机备份可以在数据库运行时备份数据库，而不会阻止事务。">在线备份</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="cadminhubbkup01.html" title="使用SYSCS_UTIL.SYSCS_BACKUP_DATABASE过程或其他系统备份过程之一来将数据库联机备份到指定位置。">使用备份过程执行在线备份</a></div>
</div>
</div>



</body></html>