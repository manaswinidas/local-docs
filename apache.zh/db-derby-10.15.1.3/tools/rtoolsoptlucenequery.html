<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Querying an index">
<meta name="abstract" content="To query an index, use the table function created by CREATEINDEX.">
<meta name="description" content="To query an index, use the table function created by CREATEINDEX.">
<meta name="DC.subject" content="luceneSupport optional tool, querying an index">
<meta name="keywords" content="luceneSupport optional tool, querying an index">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucene.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenecreate.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptluceneupdate.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenedrop.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenelist.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenesecman.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rtoolsoptlucenequery">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>查询索引</title>
</head>
<body id="rtoolsoptlucenequery" ><a name="rtoolsoptlucenequery"><!-- --></a>


<h1 class="topictitle1">查询索引</h1>



<div><p>要查询索引，请使用由创建的表函数<samp class="codeph">CREATEINDEX</samp> 。</p>

<div class="section">
<p>由创建的表函数<samp class="codeph">CREATEINDEX</samp>具有以下形状：</p>

<pre>$SCHEMANAME.$TABLENAME__TEXTCOL
(
    QUERY VARCHAR( 32672 ),
    WINDOWSIZE INT,
    SCORECEILING REAL
)
RETURNS TABLE
(
    $keyColumn1 $keyColumn1datatype,
    ...
    $keyColumnN $keyColumnNdatatype,
    DOCUMENTID INT,
    SCORE REAL
)</pre>

<p>自变量具有以下含义：</p>

<ul>
<li><samp class="codeph">QUERY</samp> ：这是Lucene查询文本。有关更多信息，请参见<a href="https://builds.apache.org/job/Lucene-Artifacts-trunk/javadoc/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package_description" target="_blank">Lucene查询语言</a>的描述。</li>

<li><samp class="codeph">WINDOWSIZE</samp> ：这是要返回的最大行数（匹配）。</li>

<li><samp class="codeph">SCORECEILING</samp> ：这将导致Lucene仅返回分数小于此数字的行。 <samp class="codeph">WINDOWSIZE</samp>和<samp class="codeph">SCORECEILING</samp>是Lucene用来将结果处理到Windows中的变量。请参见下面的示例。NULL值表示“返回最佳WINDOWSIZE匹配项”。</li>

</ul>

<p>请记住，创建索引时，应用程序指定了应如何解析查询。</p>

<p>在返回的结果集中，键列重新连接到原始表或视图，并且它们标识该表/视图的哪一行包含记分的文本。返回的结果集中的其他列具有以下含义：</p>

<ul>
<li><samp class="codeph">DOCUMENTID</samp> ：这是Lucene生成的数字，对于调试与Lucene相关的问题可能有用。此数字对<span>Derby</span>或最终用户没有意义。</li>

<li><samp class="codeph">SCORE</samp> ：此值衡量Lucene认为该列适合查询的程度。分数越高，就越适合。</li>

</ul>

<p><span>Derby</span>使用同一分析器查询上一次用于创建或更新索引的索引。</p>

</div>

<div class="section"><h2 class="sectiontitle">例</h2>
<pre><strong>-- Selects the primary key and score for the best 3 matches for
-- the text.
select presidentID, speechID, score
from table
(
    us.presidentsSpeeches__speechText
    (
        'When in the course of human events',
        3,
        null
    )
) t;

-- The last row in the previous result had score 1.0.
-- This selects the primary key and score for the next 4 matches for the
-- text.
select presidentID, speechID, score
from table
(
    us.presidentsSpeeches__speechText
    (
        'When in the course of human events',
        4,
        1.0
    )
) t;</strong></pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="rtoolsoptlucene.html" title="luceneSupport插件是一个可选工具，可让您使用Apache Lucene进行全文索引和搜索Derby文本列的内容。">使用luceneSupport可选工具</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rtoolsoptlucenecreate.html" title="luceneSupport可选工具使您可以使用Apache Lucene执行全文索引和搜索Derby文本列的内容。">创建索引</a></div>
<div><a href="rtoolsoptluceneupdate.html" title="创建索引后，用户可以对文本列执行批量重新索引。">更新索引</a></div>
<div><a href="rtoolsoptlucenedrop.html" title="表所有者可以删除Lucene索引。">删除索引</a></div>
<div><a href="rtoolsoptlucenelist.html" title="您可以使用表函数列出所有Lucene索引。">上市索引</a></div>
<div><a href="rtoolsoptlucenesecman.html" title="在Java安全管理器下运行luceneSupport工具时，安全策略必须将特权授予两个jar文件。">使用安全管理器运行luceneSupport工具</a></div>
</div>
</div>



</body></html>