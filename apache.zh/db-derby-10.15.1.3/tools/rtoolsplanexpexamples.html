<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="PlanExporter example">
<meta name="abstract" content="This example shows the steps that you must follow in order to use the PlanExporter tool.">
<meta name="description" content="This example shows the steps that you must follow in order to use the PlanExporter tool.">
<meta name="DC.subject" content="PlanExporter, example, examples">
<meta name="keywords" content="PlanExporter, example, examples">
<meta name="DC.Relation" scheme="URI" content="ctoolsplanexp.html">
<meta name="DC.Relation" scheme="URI" content="ctoolsusingplanexp.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsplanexpxmlformat.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rtoolsplanexpexamples">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>PlanExporter示例</title>
</head>
<body id="rtoolsplanexpexamples" ><a name="rtoolsplanexpexamples"><!-- --></a>


<h1 class="topictitle1">PlanExporter示例</h1>



<div><p>此示例显示了您必须遵循的步骤才能使用<samp class="codeph">PlanExporter</samp>工具。</p>

<div class="example">
<ol>
<li>移至创建数据库的目录。</li>

<li>跑过<samp class="codeph">ij</samp>工具：<pre><strong>java org.apache.derby.tools.ij</strong></pre>

</li>

<li>创建与数据库的连接：<pre><strong>CONNECT 'jdbc:derby:myDb;create=false';</strong></pre>

<div class="note"><span class="notetitle">注意：</span>您也可以使用<span>Derby</span>客户端/服务器数据库。</div>

</li>

<li>使用XPLAIN样式：<pre><strong>CALL SYSCS_UTIL.SYSCS_SET_RUNTIMESTATISTICS(1);
CALL SYSCS_UTIL.SYSCS_SET_XPLAIN_SCHEMA('MY_SCHEMA');
select * from my_table;
CALL SYSCS_UTIL.SYSCS_SET_RUNTIMESTATISTICS(0);
CALL SYSCS_UTIL.SYSCS_SET_XPLAIN_SCHEMA('');</strong></pre>

</li>

<li>获得<samp class="codeph">stmt_id</samp>查询：<pre><strong>select stmt_text, stmt_id from MY_SCHEMA.SYSXPLAIN_STATEMENTS;
exit;</strong></pre>

<p>现在找到<samp class="codeph">stmt_id</samp>在显示的结果中查询已执行的查询，并将其记录下来。看起来像这样：</p>

<pre>9ac8804c-0129-cc31-ca9a-00000047f1e8</pre>

</li>

<li>跑过<samp class="codeph">PlanExporter</samp>相同位置的工具：<pre><strong>java org.apache.derby.tools.PlanExporter jdbc:derby:myDb MY_SCHEMA 
    9ac8804c-0129-cc31-ca9a-00000047f1e8 -html plain_html;</strong></pre>

<p>该命令使用<span>Derby</span>随附的默认样式表，并且HTML文件将在同一位置生成，因为该命令未指定其他路径。生成的HTML文件的名称是<samp class="codeph">plain_html.html</samp> 。</p>

</li>

</ol>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctoolsplanexp.html" title="使用PlanExporter工具导出查询计划数据以进行进一步分析。">PlanExporter</a></div>
</div>
<div class="relconcepts"><strong>相关概念</strong><br>
<div><a href="ctoolsusingplanexp.html" title="在运行PlanExporter工具之前，请确保您的类路径包含Derby jar文件，包括derbytools.jar /。">使用PlanExporter</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rtoolsplanexpxmlformat.html" title="通过使用从Derby XPLAIN样式表捕获的统计信息，PlanExporter工具将已执行查询的查询计划提取为XML文档。">PlanExporter XML格式</a></div>
</div>
</div>



</body></html>