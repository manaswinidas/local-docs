<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Creating an index">
<meta name="abstract" content="The luceneSupport optional tool lets you use Apache Lucene to perform full-text indexing and searching of the contents of Derby text columns.">
<meta name="description" content="The luceneSupport optional tool lets you use Apache Lucene to perform full-text indexing and searching of the contents of Derby text columns.">
<meta name="DC.subject" content="luceneSupport optional tool, creating an index">
<meta name="keywords" content="luceneSupport optional tool, creating an index">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucene.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptluceneupdate.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenequery.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenedrop.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenelist.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenesecman.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rtoolsoptlucenecreate">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>创建索引</title>
</head>
<body id="rtoolsoptlucenecreate" ><a name="rtoolsoptlucenecreate"><!-- --></a>


<h1 class="topictitle1">创建索引</h1>



<div><p>的<samp class="codeph">luceneSupport</samp>可选工具使您可以使用Apache Lucene进行全文索引和搜索<span>Derby</span>文本列的内容。</p>

<div class="section">
<p>之后<samp class="codeph">luceneSupport</samp>工具已加载，用户可以为该用户拥有的表或视图中的文本列建立索引。如果启用了SQL授权，则数据库所有者是唯一可以索引另一个用户表中的文本列的帐户。通过以下过程可以实现：</p>

<pre>LUCENESUPPORT.CREATEINDEX
(
    SCHEMANAME VARCHAR( 128 ),
    TABLENAME VARCHAR( 128 ),
    TEXTCOLUMN VARCHAR( 128 ),
    INDEXDESCRIPTORMAKER VARCHAR( 32672 ),
    KEYCOLUMNS VARCHAR( 32672 ) ...
)</pre>

<p>过程参数如下：</p>

<ul>
<li><samp class="codeph">SCHEMANAME</samp> ：保存表或视图的架构的SQL标识符。除非您双引号，否则此参数不区分大小写。</li>

<li><samp class="codeph">TABLENAME</samp> ：表或视图的SQL标识符（也不区分大小写）。</li>

<li><samp class="codeph">TEXTCOLUMN</samp> ：要建立索引的文本列的SQL标识符（也不区分大小写）。该列必须具有字符数据类型。</li>

<li><samp class="codeph">INDEXDESCRIPTORMAKER</samp> ：如果参数不为null，则为零参数静态公共方法的全名，该方法创建一个<samp class="codeph">org.apache.derby.optional.api.IndexDescriptor</samp> 。如果参数为null，则使用默认的maker方法创建索引， <samp class="codeph">org.apache.derby.optional.api.LuceneUtils.defaultIndexDescriptor</samp> 。一个<samp class="codeph">org.apache.derby.optional.api.IndexDescriptor</samp>指定以下内容：<ul>
<li>将文本解析为可索引术语时使用的分析器</li>

<li>索引字段的名称，以后可以查询</li>

<li>的子类<samp class="codeph">org.apache.lucene.queryparser.classic.QueryParser</samp>稍后在查询索引时应使用</li>

</ul>

<p>默认值<samp class="codeph">org.apache.derby.optional.api.IndexDescriptor</samp>提供一个字段名称（ <samp class="codeph">luceneTextField</samp> ）以及一个实例<samp class="codeph">org.apache.lucene.queryparser.classic.MultiFieldQueryParser</samp>就像它一样<samp class="codeph">QueryParser</samp> 。另外，默认<samp class="codeph">org.apache.derby.optional.api.IndexDescriptor</samp>尝试查找与数据库的默认语言匹配的Lucene提供的分析器。找到下表中列出的语言的匹配项。请注意，不赞成使用中文分析器，因此对于中文，该插件使用<samp class="codeph">StandardAnalyzer</samp>代替。</p>

<div class="p">
<div class="tablenoborder"><table cellspacing="0" cellpadding="4" border="1" summary="This table lists the languages and corresponding language codes supported by the Lucene plugin." frame="border" rules="all"><caption>表格1。Lucene插件支持的语言代码</caption>


<thead align="left">
<tr valign="bottom">
<th valign="bottom" width="75%" id="N10126">语言</th>

<th valign="bottom" width="25%" id="N1012D">语言代码</th>

</tr>

</thead>

<tbody>
<tr>
<td valign="top" width="75%" headers="N10126">阿拉伯</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">ar</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">亚美尼亚人</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">hy</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">巴斯克</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">eu</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">巴西人</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">br</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">保加利亚语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">bg</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">加泰罗尼亚语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">ca</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">捷克文</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">cz</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">丹麦文</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">da</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">荷兰人</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">nl</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">英语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">en</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">芬兰</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">fi</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">法文</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">fr</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">加利西亚人</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">gl</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">德语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">de</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">希腊语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">el</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">印地语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">hi</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">匈牙利</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">hu</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">印度尼西亚</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">id</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">爱尔兰人</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">ga</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">义大利文</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">it</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">拉脱维亚语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">lv</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">挪威</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">no</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">波斯语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">fa</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">葡萄牙语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">pt</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">罗马尼亚语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">ro</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">俄语</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">ru</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">西班牙文</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">es</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">瑞典</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">sv</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">泰国</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">th</samp></td>

</tr>

<tr>
<td valign="top" width="75%" headers="N10126">土耳其</td>

<td valign="top" width="25%" headers="N1012D"><samp class="codeph">tr</samp></td>

</tr>

</tbody>

</table>
</div>

</div>

<p><span>Derby</span>提供了另一种实用程序方法，该方法可实例化默认的Lucene分析器。该实用程序方法称为<samp class="codeph">org.apache.derby.optional.api.LuceneUtils.standardAnalyzer</samp> ，并实现了<samp class="codeph">org.apache.lucene.analysis.standard.StandardAnalyzer</samp> 。</p>
</li>

<li><samp class="codeph">KEYCOLUMNS</samp> ：这是表或视图中其他列的SQL标识符的可选列表。这些列的值存储在文本索引中，用于将Lucene结果连接回原始数据。如果<samp class="codeph">KEYCOLUMNS</samp>被省略， <samp class="codeph">TABLENAME</samp>必须标识具有主键的基表；在这种情况下，整个主键都存储在文本索引中，以便以后连接。</li>

</ul>

<p>键和文本列不能使用以下名称：</p>

<ul>
<li><samp class="codeph">DOCUMENTID</samp></li>

<li><samp class="codeph">SCORE</samp></li>

</ul>

<p><samp class="codeph">CREATEINDEX</samp>创建一个名为<samp class="codeph">$TABLENAME__$TEXTCOLUMN</samp>在里面<samp class="codeph">$SCHEMANAME</samp>模式。<a href="rtoolsoptlucenequery.html">查询索引</a>将更详细地描述此表功能。</p>

</div>

<div class="section"><h2 class="sectiontitle">例</h2>
<pre><strong>-- index the POEMTEXT column of the POEMS table,
-- using its primary key and the default IndexDescriptor maker
CALL LUCENESUPPORT.CREATEINDEX( 'ruth', 'poems', 'poemText', null );

-- index the POEMVIEW view, using POEMID and VERSIONSTAMP as keys
-- and a custom IndexDescriptor
CALL LUCENESUPPORT.CREATEINDEX
(
    'ruth', 'poemView', 'poemText',
    'myapp.MyIndexDescriptor.makeMe',
    'poemID', 'versionStamp'
);</strong></pre>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="rtoolsoptlucene.html" title="luceneSupport插件是一个可选工具，可让您使用Apache Lucene进行全文索引和搜索Derby文本列的内容。">使用luceneSupport可选工具</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rtoolsoptluceneupdate.html" title="创建索引后，用户可以对文本列执行批量重新索引。">更新索引</a></div>
<div><a href="rtoolsoptlucenequery.html" title="要查询索引，请使用CREATEINDEX创建的表函数。">查询索引</a></div>
<div><a href="rtoolsoptlucenedrop.html" title="表所有者可以删除Lucene索引。">删除索引</a></div>
<div><a href="rtoolsoptlucenelist.html" title="您可以使用表函数列出所有Lucene索引。">上市索引</a></div>
<div><a href="rtoolsoptlucenesecman.html" title="在Java安全管理器下运行luceneSupport工具时，安全策略必须将特权授予两个jar文件。">使用安全管理器运行luceneSupport工具</a></div>
</div>
</div>



</body></html>