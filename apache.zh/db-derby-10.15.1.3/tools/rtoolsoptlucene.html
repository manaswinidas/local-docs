<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="Using the luceneSupport optional tool">
<meta name="abstract" content="The luceneSupport plugin is an optional tool that lets you use Apache Lucene to perform full-text indexing and searching of the contents of Derby text columns.">
<meta name="description" content="The luceneSupport plugin is an optional tool that lets you use Apache Lucene to perform full-text indexing and searching of the contents of Derby text columns.">
<meta name="DC.subject" content="optional tools, luceneSupport, luceneSupport optional tool, tools">
<meta name="keywords" content="optional tools, luceneSupport, luceneSupport optional tool, tools">
<meta name="DC.Relation" scheme="URI" content="ctoolsopttools.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptdbmetadata.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptforeignviews.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptsimplejson.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptdbreader.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenecreate.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptluceneupdate.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenequery.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenedrop.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenelist.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsoptlucenesecman.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rtoolsoptlucene">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>使用luceneSupport可选工具</title>
</head>
<body id="rtoolsoptlucene" ><a name="rtoolsoptlucene"><!-- --></a>


<h1 class="topictitle1">使用luceneSupport可选工具</h1>



<div><p>的<samp class="codeph">luceneSupport</samp>插件是一个可选工具，可让您使用Apache Lucene执行全文索引和搜索<span>Derby</span>文本列的内容。</p>

<div class="section">
<p><a href="https://builds.apache.org/job/Lucene-Artifacts-trunk/javadoc/" target="_blank">https://builds.apache.org/job/Lucene-Artifacts-trunk/javadoc/</a>上的Apache Lucene的主线API文档是了解Lucene功能的有用起点。</p>

<div class="note"><span class="notetitle">注意：</span> <samp class="codeph">luceneSupport</samp>只有将数据库完全升级到<span>Derby</span> Release 10.11或更高版本后，才能使用该插件。（有关更多信息，请参阅《 <span><em>Derby开发人员指南</em></span> 》中的“升级数据库”。）该插件不能在10.10或更低版本的数据库上使用。</div>

</div>

<div class="section"><h2 class="sectiontitle">术语</h2>
<p>以下概念对于理解<samp class="codeph">luceneSupport</samp>插入。</p>

<ul>
<li><strong>分析器</strong> ：分析器是以下工具的实现<samp class="codeph">org.apache.lucene.analysis.Analyzer</samp> 。它从一块文本中提取可索引的术语。应该使用相同的分析器对文本进行索引和查询。分析器可以执行特定于语言的任务，例如<em>词干</em>和<em>过滤</em> 。有关分析仪的更多信息，请参见Lucene API文档。用户可以扩展现有的Lucene分析仪或编写自己的自定义分析仪。</li>

<li><strong>过滤</strong> ：过滤是一种特定于语言的任务，用于丢弃无关紧要的单词，例如文章和连词。</li>

<li><strong>查询解析</strong> ：查询解析是解释Lucene查询字符串的过程。Lucene有自己的<a href="https://builds.apache.org/job/Lucene-Artifacts-trunk/javadoc/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package_description" target="_blank">查询语言</a> 。通过扩展默认的Lucene <samp class="codeph">QueryParser</samp>类，用户可以增强Lucene查询语言或将其替换为其他查询语言。</li>

<li><strong>分数</strong> ：分数用于衡量查询与文本块（文本列值）的匹配程度。分数越高，比赛越好。分数是浮点值。没有最小值或最大值。</li>

<li><strong>词干</strong> ：词干是特定于语言的任务，用于将相关词简化为它们的共同词根。例如，英语词干分析员可能会将以下所有单词映射到公共词根“ house”上：“ house”，“ houses”，“ housed”和“ housing”。</li>

</ul>

</div>

<div class="section"><h2 class="sectiontitle">运行luceneSupport可选工具的类路径</h2>
<p>在运行之前<samp class="codeph">luceneSupport</samp>可选工具，请确保您的类路径/模块路径包含以下jar文件：</p>

<ul>
<li><samp class="codeph">derbyshared.jar</samp></li>

<li><samp class="codeph">derbytools.jar</samp></li>

<li><samp class="codeph">derby.jar</samp></li>

<li><samp class="codeph">derbyoptionaltools.jar</samp></li>

<li><samp class="codeph">core</samp> ：Lucene的核心机械。对于Lucene 4.5.0，这是<samp class="codeph">lucene-core-4.5.0.jar</samp> 。</li>

<li><samp class="codeph">analyzers-common</samp> ：常见的Lucene分析仪。对于Lucene 4.5.0，这是<samp class="codeph">lucene-analyzers-common-4.5.0.jar</samp> 。</li>

<li><samp class="codeph">queryparser</samp> ：用于查询解析的基本Lucene逻辑。对于Lucene 4.5.0，这是<samp class="codeph">lucene-queryparser-4.5.0.jar</samp> 。</li>

</ul>

<p>Lucene jar文件包含在<span>Derby</span>源代码树中；或者，您可以从<a href="http://lucene.apache.org/" target="_blank">http://lucene.apache.org/</a>下载它们。</p>

</div>

<div class="section"><h2 class="sectiontitle">加载和卸载luceneSupport可选工具</h2>
<p>在受SQL授权保护的数据库中，只有数据库所有者才能发出加载和卸载Lucene插件的命令。（有关更多信息，请参阅《 <em>Derby安全指南</em> 》中的“数据库所有者”。）</p>

<p>加载插件非常类似于加载任何其他可选工具。你叫<samp class="codeph">SYSCS_UTIL.SYSCS_REGISTER_TOOL</samp>系统过程中的语句如下所示：</p>

<pre><strong>call syscs_util.syscs_register_tool( 'luceneSupport', true );</strong></pre>

<p>此命令创建<samp class="codeph">LUCENESUPPORT</samp>模式，其中包含以下对象：</p>

<ul>
<li><samp class="codeph">CREATEINDEX</samp> ：用于索引<span>Derby</span>文本列的数据库过程。有关详细信息，请参见<a href="rtoolsoptlucenecreate.html">创建索引</a> 。</li>

<li><samp class="codeph">UPDATEINDEX</samp> ：用于刷新由以下人员建立的索引的数据库过程<samp class="codeph">CREATEINDEX</samp> 。有关详细信息，请参见<a href="rtoolsoptluceneupdate.html">更新索引</a> 。</li>

<li><samp class="codeph">DROPINDEX</samp> ：删除由以下人员建立的索引的数据库过程<samp class="codeph">CREATEINDEX</samp> 。有关详细信息，请参见<a href="rtoolsoptlucenedrop.html">删除索引</a> 。</li>

<li><samp class="codeph">LISTINDEXES</samp> ：用于列出由创建的索引的表函数<samp class="codeph">CREATEINDEX</samp> 。有关详细信息，请参见<a href="rtoolsoptlucenelist.html">列出索引</a> 。</li>

</ul>

<p>删除插件也很像卸载其他可选工具。致电<samp class="codeph">SYSCS_UTIL.SYSCS_REGISTER_TOOL</samp>系统过程中的语句如下所示：</p>

<pre><strong>call syscs_util.syscs_register_tool( 'luceneSupport', false );</strong></pre>

<p>该命令执行以下操作：</p>

<ul>
<li><strong>删除Lucene目录</strong> ：删除为保存Lucene索引而创建的目录</li>

<li><strong>删除架构对象</strong> ：删除由创建的所有架构对象<samp class="codeph">CREATEINDEX</samp>命令</li>

<li><strong>掉落<samp class="codeph">LUCENESUPPORT</samp></strong> ：删除<samp class="codeph">LUCENESUPPORT</samp>模式及其包含的所有模式对象</li>

</ul>

<p>有关以下内容的信息，请参见《 <span><em>Derby参考手册》</em></span> 。 <samp class="codeph">SYSCS_UTIL.SYSCS_REGISTER_TOOL</samp>系统过程。</p>

</div>

<div class="section"><h2 class="sectiontitle">加密和luceneSupport工具</h2>
<p>的<samp class="codeph">luceneSupport</samp>该工具可能无法在加密的数据库上使用。需要对加密数据进行全文索引的用户应将数据库存储在加密目录中或加密设备上。</p>

</div>

<div class="section"><h2 class="sectiontitle">Lucene版本</h2>
<p><span>Derby</span>社区已经测试了<samp class="codeph">luceneSupport</samp>针对以下版本的Lucene的工具。Lucene的其他版本可能会或可能不会起作用。</p>

<ul>
<li>4.5.0</li>

<li>4.7.1</li>

<li>4.8.1</li>

<li>4.9.0</li>

</ul>

<p><span>Derby</span>无法保证两个不同版本的Lucene的兼容性。用户应牢记以下几点：</p>

<ul>
<li><strong>没有时间旅行</strong> ：如果尝试使用早期版本的Lucene读取由较高版本的Lucene创建的索引， <span>Derby</span>将引发错误。</li>

<li><strong>跳出索引</strong> ：更改Lucene的版本时，调用它总是最安全的<samp class="codeph">LUCENESUPPORT.UPDATEINDEX</samp>在所有现有的Lucene索引上（请参阅<a href="rtoolsoptluceneupdate.html">更新索引</a> ）。</li>

</ul>

</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="rtoolsoptlucenecreate.html">创建索引</a></strong><br>luceneSupport可选工具使您可以使用Apache Lucene执行全文索引和搜索Derby文本列的内容。</li>
<li class="ulchildlink"><strong><a href="rtoolsoptluceneupdate.html">更新索引</a></strong><br>创建索引后，用户可以对文本列执行批量重新索引。</li>
<li class="ulchildlink"><strong><a href="rtoolsoptlucenequery.html">查询索引</a></strong><br>要查询索引，请使用CREATEINDEX创建的表函数。</li>
<li class="ulchildlink"><strong><a href="rtoolsoptlucenedrop.html">删除索引</a></strong><br>表所有者可以删除Lucene索引。</li>
<li class="ulchildlink"><strong><a href="rtoolsoptlucenelist.html">上市索引</a></strong><br>您可以使用表函数列出所有Lucene索引。</li>
<li class="ulchildlink"><strong><a href="rtoolsoptlucenesecman.html">使用安全管理器运行luceneSupport工具</a></strong><br>在Java安全管理器下运行luceneSupport工具时，安全策略必须将特权授予两个jar文件。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctoolsopttools.html" title="">可选工具</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rtoolsoptdbmetadata.html" title="databaseMetaData可选工具创建与java.sql中的大多数方法相对应的函数和表函数。DatabaseMetaData接口。">使用databaseMetaData可选工具</a></div>
<div><a href="rtoolsoptforeignviews.html" title="foreignViews可选工具为外部数据库中的所有用户表创建架构，表函数和便利视图。这对于批量导入外部数据很有用。">使用foreignViews可选工具</a></div>
<div><a href="rtoolsoptsimplejson.html" title="simpleJson可选工具创建函数和用户定义的类型，可用于将关系数据与流行的JSON格式表示的数据集成在一起。">使用simpleJson可选工具</a></div>
<div><a href="rtoolsoptdbreader.html" title="rawDBReader可选工具创建函数和视图，可用于将数据从损坏或无法引导的数据库中提取到新的正常数据库中。">使用rawDBReader可选工具</a></div>
</div>
</div>



</body></html>