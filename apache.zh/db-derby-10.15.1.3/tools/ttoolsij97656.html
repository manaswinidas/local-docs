<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Connecting to a Derby database">
<meta name="abstract" content="To connect to a Derby database, you must perform the following steps.">
<meta name="description" content="To connect to a Derby database, you must perform the following steps.">
<meta name="DC.Relation" scheme="URI" content="ctoolsij32837.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsdrvrnmeurl.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ttoolsij97656">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>连接到Derby数据库</title>
</head>
<body id="ttoolsij97656" ><a name="ttoolsij97656"><!-- --></a>


<h1 class="topictitle1">连接到<span>Derby</span>数据库</h1>


<div><p>要连接到<span>Derby</span>数据库，必须执行以下步骤。</p>

<ol>
<li><span>启动JVM。</span></li>

<li><span>加载适当的驱动程序。</span></li>

<li><span>通过提供有效的数据库连接URL创建连接。</span></li>

</ol>

<div class="example"><p>使用时<samp class="codeph">ij</samp>以交互方式连接到<span>Derby</span>数据库，通常在完整的数据库连接URL上提供连接信息。 <samp class="codeph">ij</samp>根据URL的语法自动加载适当的驱动程序。以下示例显示了如何通过使用<samp class="codeph"><a href="rtoolsijcomref22318.html">Connect</a></samp>命令和嵌入式驱动程序：</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij version <span>10.15</span>
ij&gt; <strong>connect 'jdbc:derby:sample';</strong>
ij&gt;</pre>

<p>如果输入的URL包含网络客户端信息，则<samp class="codeph">Connect</samp>命令加载网络客户端驱动程序：</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij version <span>10.15</span>
ij&gt; <strong>connect 'jdbc:derby://localhost:1527/sample';</strong>
ij&gt;</pre>

<div class="p"><div class="note"><span class="notetitle">注意：</span>在这些和后续示例中，数据库是在<em>derby.system.home</em>目录中创建的。有关“系统目录”的更多信息，请参见《 <span><em>Derby开发人员指南》</em></span> 。</div>
</div>

<p><samp class="codeph">ij</samp>提供指定部分或全部连接URL的替代方法： <samp class="codeph"><a href="rtoolsijpropref35032.html">ij.protocol</a></samp> ， <samp class="codeph"><a href="rtoolsijpropref28146.html">ij.database</a></samp>和<samp class="codeph"><a href="rtoolsijpropref10135.html">ij.connection.<em>connectionName</em></a></samp>属性。当使用脚本并且直到运行时才知道数据库路径名或驱动程序名时，通常使用这些属性。这些属性还可以用来缩短必须随连接URL提供的信息量。以下是提供连接信息的不同方法的一些示例：</p>

<ul>
<li>在命令行上提供完整的连接信息<p>指定以下属性之一，以及在<samp class="codeph">ij</samp>命令行启动<samp class="codeph">ij</samp>连接已经激活。运行SQL脚本时通常使用此机制，以便可以在运行时指定数据库路径名。</p>

<ul>
<li><samp class="codeph"><a href="rtoolsijpropref28146.html">ij.database</a></samp> ：使用提供的URL打开连接</li>

<li><samp class="codeph"><a href="rtoolsijpropref10135.html">ij.connection.<em>connectionName</em></a></samp> ：用于打开一个或多个连接。该属性可以在命令行上以不同的<em>connectionName</em>和相同或不同的URL多次出现。</li>

</ul>

<p>本示例说明如何创建数据库<samp class="codeph">myTours</samp>并运行脚本<samp class="codeph">ToursDB_schema.sql</samp>通过使用<samp class="codeph"><a href="rtoolsijpropref28146.html">ij.database</a></samp>属性。</p>

<pre><strong>java -Dij.database=jdbc:derby:myTours;create=true \
    org.apache.derby.tools.ij \
    %DERBY_HOME%\demo\programs\toursdb\ToursDB_schema.sql</strong>
ij version <span>10.15</span>
CONNECTION0* -  jdbc:derby:myTours
* = current connection
ij&gt; -- Licensed to the Apache Software Foundation (ASF) under one or more
-- contributor license agreements.  See the NOTICE file distributed with
     <em>...output removed...</em>
ij&gt; CREATE TRIGGER TRIG2 AFTER DELETE ON FLIGHTS FOR EACH STATEMENT MODE DB2SQL
INSERT INTO FLIGHTS_HISTORY (STATUS) VALUES ('INSERTED FROM TRIG2');
0 rows inserted/updated/deleted
ij&gt;</pre>
</li>

<li>定义协议并使用“简短格式” URL<p>您可以通过设置属性来指定默认的URL协议和子协议<samp class="codeph"><a href="rtoolsijpropref35032.html">ij.protocol</a></samp>或使用<samp class="codeph"><a href="rtoolsijcomref27997.html">Protocol</a></samp>命令。这使您可以通过仅指定数据库名称来建立连接。数据库连接URL的这种“简短形式”是默认的协议（有关更多信息，请参见<a href="ctoolsijtools16011.html#ctoolsijtools16011__ctoolsabtproto">关于协议</a> ）。
</p>

<p>本示例使用<samp class="codeph"><a href="rtoolsijcomref27997.html">Protocol</a></samp>命令和“简写形式”的连接网址：</p>

<pre><strong>java org.apache.derby.tools.ij</strong>
ij version <span>10.15</span>
ij&gt;<strong> protocol 'jdbc:derby:';</strong>
ij&gt; <strong>connect 'sample';</strong>
ij&gt;
</pre>
</li>

<li>指定备用驱动程序<p>如果使用的是<span>Derby</span>提供的驱动程序，则可以指定<a href="rtoolsijtools16879.html">JDBC驱动程序概述中</a>列出的驱动程序名称。但是，使用支持的协议时，会隐式加载<span>Derby</span>驱动程序，因此指定它们通常是多余的。如果您在关闭<span>Derby</span>引擎并注销了驱动程序后需要重新加载驱动程序，则可能会发现指定驱动程序很有用。</p>

<p>要显式加载驱动程序，请使用<samp class="codeph">ij</samp>命令<samp class="codeph"><a href="rtoolsijcomref39042.html">Driver</a></samp>或指定JVM系统属性<samp class="codeph">jdbc.drivers</samp> 。</p>

</li>

</ul>

</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="rtoolsdrvrnmeurl.html">ij驱动程序名称和连接URL</a></strong><br>下表总结了指定驱动程序名称和数据库连接URL的不同方法。</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctoolsij32837.html" title="本节讨论ij工具的用法。">ij入门</a></div>
</div>
</div>



</body></html>