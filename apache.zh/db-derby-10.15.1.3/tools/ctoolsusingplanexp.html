<html lang="en-us"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us"><!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="security" content="public">
<meta name="Robots" content="index,follow">
<meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Using PlanExporter">
<meta name="abstract" content="Before you run the PlanExporter tool, make sure that your classpath contains the Derby jar files, including derbytools.jar/">
<meta name="description" content="Before you run the PlanExporter tool, make sure that your classpath contains the Derby jar files, including derbytools.jar/">
<meta name="DC.subject" content="PlanExporter, using">
<meta name="keywords" content="PlanExporter, using">
<meta name="DC.Relation" scheme="URI" content="ctoolsplanexp.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsplanexpxmlformat.html">
<meta name="DC.Relation" scheme="URI" content="rtoolsplanexpexamples.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ctoolsusingplanexp">
<meta name="DC.Language" content="en-us">
<link href="commonltr.css" type="text/css" rel="stylesheet">
<title>使用PlanExporter</title>
</head>
<body id="ctoolsusingplanexp" ><a name="ctoolsusingplanexp"><!-- --></a>


<h1 class="topictitle1">使用PlanExporter</h1>



<div><p>在运行之前<samp class="codeph">PlanExporter</samp>工具，请确保您的类路径包含<span>Derby</span> jar文件，包括<samp class="codeph">derbytools.jar</samp> /</p>

<p>在运行之前<samp class="codeph">PlanExporter</samp>工具，您必须捕获<samp class="codeph">stmt_id</samp>您从中执行的查询<samp class="codeph">SYSXPLAIN_STATEMENTS system table</samp> 。这样做，请按照下列步骤操作：</p>

<ol>
<li><strong>使用XPLAIN样式捕获运行时统计信息。</strong> 
<p>请参阅《 <span><em>Derby参考手册</em></span> 》中的“ SYSCS_UTIL.SYSCS_SET_XPLAIN_SCHEMA系统过程”以了解如何执行此操作。</p>

<div class="note"><span class="notetitle">注意：</span>您必须记住<samp class="codeph">schema_name</samp> 。</div>
 </li>

<li><strong>查询SYSXPLAIN_STATEMENTS系统表以获取<samp class="codeph">stmt_id</samp>您执行的查询。</strong> 
<p>有关SYSXPLAIN_STATEMENTS系统表的信息，请<span><em>参考Derby参考手册</em></span>中的“ SYSXPLAIN_STATEMENTS系统表”。</p>

</li>

</ol>

<p>您可以在数据库所在的目录中（如下一行）运行以下工具。</p>

<pre><strong>java org.apache.derby.tools.PlanExporter <em>derby_connection_URL
   schema_name stmt_id options</em></strong></pre>

<p>可以根据您的要求传递<em>选项</em> 。请考虑以下可能的情况：</p>

<ul>
<li>
<p>要生成查询计划的XML文件，请指定以下选项：</p>

<pre>-xml <em>path</em></pre>

<p><em>路径</em>可以是绝对<em>路径，</em>也可以是相对<em>路径</em> 。如果根文件名没有后缀，则该工具将追加<samp class="codeph">.xml</samp> 。</p>

</li>

<li>
<p>要生成查询计划的纯HTML文件，可以使用<span>Derby</span>随附的默认简单样式表。指定以下选项：</p>

<pre>-html <em>path</em></pre>

<p>如果根文件名没有后缀，则该工具将追加<samp class="codeph">.html</samp> 。</p>

<p>也要生成XML文件，请指定以下选项：</p>

<pre>-xml <em>path</em> -html <em>path</em></pre>
 
<p>要使用不包含任何Javascript函数的其他样式表，请指定以下选项：</p>

<pre>-xsl <em>path</em> -html <em>path</em></pre>
 
<p>也要生成XML文件，请指定以下选项：</p>

<pre>-xml <em>path</em> -xsl <em>path</em> -html <em>path</em></pre>

</li>

<li>
<p>要生成查询计划的高级视图，可以在内部使用<span>Derby</span>随附的高级XSL样式表<samp class="codeph">derbytools.jar/org/apache/derby/impl/tools/planexporter/resources/</samp> ，也可以指定创建的样式表。为此，请指定以下选项：</p>

<pre>-adv -xsl <em>fileName</em> -xml <em>path</em></pre>
 
<div class="note"><span class="notetitle">注意：</span> 
<ul>
<li>使用之前<samp class="codeph">-adv</samp>功能，必须将高级XSL样式表复制到当前目录中。因此，您必须仅指定样式表的名称，而不是路径。</li>

<li>使用以下代码时，不支持生成HTML <samp class="codeph">-adv</samp>的选项<samp class="codeph">PlanExporter</samp>工具。但是，如果在Web浏览器中打开生成的XML文件，则浏览器将进行必要的转换。</li>

</ul>

</div>

</li>

</ul>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="ctoolsplanexp.html" title="使用PlanExporter工具导出查询计划数据以进行进一步分析。">PlanExporter</a></div>
</div>
<div class="relref"><strong>相关参考</strong><br>
<div><a href="rtoolsplanexpxmlformat.html" title="通过使用从Derby XPLAIN样式表捕获的统计信息，PlanExporter工具将已执行查询的查询计划提取为XML文档。">PlanExporter XML格式</a></div>
<div><a href="rtoolsplanexpexamples.html" title="本示例显示了使用PlanExporter工具必须遵循的步骤。">PlanExporter示例</a></div>
</div>
</div>



</body></html>