<html ><head></head><body ><p>欢迎使用Spark文档！</p>

<p>本自述文件将引导您浏览和构建Spark文档，Spark源代码随附于此文档。您还可以在https://spark.apache.org/documentation.html上找到特定于Spark发行版的文档。</p>

<p>继续阅读以了解有关以纯文本（即降价）查看文档或自行构建文档的更多信息。为什么要自己建造？这样您便拥有与您当前已退出版本控制版本的Spark版本相对应的文档。</p>

<h2 id="prerequisites">先决条件</h2>

<p>Spark文档构建使用多种工具在Scala，Java，Python，R和SQL中构建HTML文档和API文档。</p>

<p>您需要安装<a href="https://www.ruby-lang.org/en/documentation/installation/">Ruby</a>和<a href="https://docs.python.org/2/using/unix.html#getting-and-installing-the-latest-version-of-python">Python</a> 。还安装以下库：</p>

<pre><code class="language-sh">$ sudo gem install jekyll jekyll-redirect-from pygments.rb
$ sudo pip install Pygments
# Following is needed only for generating API docs
$ sudo pip install sphinx pypandoc mkdocs
$ sudo Rscript -e 'install.packages(c("knitr", "devtools", "rmarkdown"), repos="https://cloud.r-project.org/")'
$ sudo Rscript -e 'devtools::install_version("roxygen2", version = "5.0.1", repos="https://cloud.r-project.org/")'
$ sudo Rscript -e 'devtools::install_version("testthat", version = "1.0.2", repos="https://cloud.r-project.org/")'
</code></pre>

<p>注意：如果您同时使用Ruby 1.9和Ruby 2.0，则可能需要用gem2.0替换gem。</p>

<p>注意：其他版本的roxygen2可能在SparkR文档生成中起作用，但是<code>RoxygenNote</code>在<code>$SPARK_HOME/R/pkg/DESCRIPTION</code>是5.0.1，如果版本不匹配，则会更新。</p>

<h2 id="generating-the-documentation-html">生成文档HTML</h2>

<p>我们将Spark文档作为源代码的一部分（而不是使用托管wiki，例如github wiki作为最终文档），以使文档与源代码一起发展并由版本控制（当前为git）捕获）。这样，无论您检出或下载的是哪个版本或发行版，代码都会自动包含相关文档的版本。</p>

<p>在此目录中，您将找到使用Markdown格式化的文本文件，后缀为“ .md”。您可以根据需要直接读取这些文本文件。从...开始<code>index.md</code> 。</p>

<p>执行<code>jekyll build</code>来自<code>docs/</code>目录以编译站点。使用Jekyll编译站点将创建一个名为<code>_site</code>包含<code>index.html</code>以及其余的已编译文件。</p>

<pre><code class="language-sh">$ cd docs
$ jekyll build
</code></pre>

<p>您可以按以下方式修改默认的Jekyll构建：</p>

<pre><code class="language-sh"># Skip generating API docs (which takes a while)
$ SKIP_API=1 jekyll build

# Serve content locally on port 4000
$ jekyll serve --watch

# Build the site with extra features used on the live page
$ PRODUCTION=1 jekyll build
</code></pre>

<h2 id="api-docs-scaladoc-javadoc-sphinx-roxygen2-mkdocs">API文档（Scaladoc，Javadoc，Sphinx，roxygen2，MkDocs）</h2>

<p>您可以通过运行仅构建Spark scaladoc和javadoc <code>./build/sbt unidoc</code>来自<code>$SPARK_HOME</code>目录。</p>

<p>同样，您可以通过运行以下命令仅构建PySpark文档<code>make html</code>来自<code>$SPARK_HOME/python/docs</code>目录。仅针对在以下目录中被列为公开的类生成文档<code>__init__.py</code> 。可以通过运行构建SparkR文档<code>$SPARK_HOME/R/create-docs.sh</code> ，并且可以通过运行来构建SQL文档<code>$SPARK_HOME/sql/create-docs.sh</code>首先<a href="https://github.com/apache/spark#building-spark">构建Spark</a>之后。</p>

<p>当你跑步<code>jekyll build</code>在里面<code>docs</code>目录，它还会将各个Spark子项目的scaladoc和javadoc复制到<code>docs</code>目录（然后也进入<code>_site</code>目录）。我们使用jekyll插件运行<code>./build/sbt unidoc</code>在构建站点之前，如果尚未运行它，则可能要花一些时间，因为它会使用<a href="https://github.com/sbt/sbt-unidoc">Unidoc</a>生成所有scaladoc和javadoc。所述化身插件还生成利用PySpark文档<a href="http://sphinx-doc.org/">斯芬克斯</a> ，使用SparkR文档<a href="https://cran.r-project.org/web/packages/roxygen2/index.html">roxygen2</a>和使用SQL文档<a href="https://www.mkdocs.org/">MkDocs</a> 。</p>

<p>注意：要跳过在Scala，Java，Python，R和SQL API文档上进行构建和复制的步骤，请运行<code>SKIP_API=1 jekyll build</code> 。此外， <code>SKIP_SCALADOC=1</code> ， <code>SKIP_PYTHONDOC=1</code> ， <code>SKIP_RDOC=1</code>和<code>SKIP_SQLDOC=1</code>可用于跳过相应语言的单个步骤。 <code>SKIP_SCALADOC</code>表示同时跳过Scala和Java文档。</p>
</body></html>