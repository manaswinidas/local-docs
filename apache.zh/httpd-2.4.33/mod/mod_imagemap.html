<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_imagemap-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_imagemap</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>服务器端图像映射处理</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>imagemap_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_imagemap.c</td></tr></table>
<h3>摘要</h3>

    <p>该模块处理<code>.map</code>文件，从而替代了<code>imagemap</code> CGI程序的功能。此模块将处理配置为使用处理程序<code>imap-file</code>任何目录或文档类型（使用<code class="directive"><a href="../mod/mod_mime.html#addhandler">AddHandler</a></code>或<code class="directive"><a href="../mod/core.html#sethandler">SetHandler</a></code> ）。</p>

    <p>以下指令会将以<code>.map</code>结尾的文件激活为imagemap文件：</p>

    <pre class="prettyprint lang-config">AddHandler imap-file map</pre>


    <p>请注意，仍然支持以下内容：</p>

    <pre class="prettyprint lang-config">AddType application/x-httpd-imap map</pre>


    <p>但是，我们正在尝试逐步淘汰“魔术MIME类型”，因此我们不赞成使用此方法。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#features">新的功能</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#imapfile">影像图文件</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#example">范例Mapfile</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#referencing">引用您的地图文件</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#imapbase">ImapBase</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#imapdefault">ImapDefault</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#imapmenu">ImapMenu</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_imagemap">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_imagemap">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="features" id="features">新的功能</a></h2>

    <p>imagemap模块增加了一些以前发布的imagemap程序无法实现的新功能。</p>

    <ul>
      <li>相对于Referer：信息的URL引用。</li>

      <li>通过新的map指令<code>base</code>默认<code>&lt;base&gt;</code>分配。</li>

      <li>不需要<code>imagemap.conf</code>文件。</li>

      <li>点参考。</li>

      <li>可配置生成图像映射菜单。</li>
    </ul>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="imapfile" id="imapfile">影像图文件</a></h2>

    <p>imagemap文件中的行可以具有以下几种格式之一：</p>

    <div class="example"><p><code>指令值[ <var>x</var> ， <var>y</var> ...]<br>指令值“ <var>菜单文本</var> ” [ <var>x</var> ， <var>y</var> ...]<br>指令值<var>x</var> ， <var>y</var> ...“ <var>菜单文本</var> ”</code></p></div>

    <p>该伪指令是<code>base</code> ， <code>default</code> ， <code>poly</code> ， <code>circle</code> ， <code>rect</code>或<code>point</code> 。该值是绝对或相对URL，或者是下面列出的特殊值之一。坐标是<code><var>x</var> , <var>y</var></code>对，中间用空格隔开。如果生成了图像映射菜单，则引用的文本将用作链接的文本。以“＃”开头的行是注释。</p>

    <h3><a name="imapfile.directives" id="imapfile.directives">Imagemap文件指令</a></h3>
      <p>imagemap文件中允许使用六个指令。指令可以以任何顺序出现，但按照在imagemap文件中找到的顺序进行处理。</p>

      <dl>
      <dt><code>base</code>指令</dt>

      <dd><p>具有<code>&lt;base href=" <var>value</var> "&gt;</code> 。映射文件的非绝对URL相对于该值。<code>base</code>指令覆盖<code>.htaccess</code>文件或服务器配置文件中设置的<code class="directive"><a href="#imapbase">ImapBase</a></code> 。在没有<code class="directive">ImapBase</code>配置指令的情况下， <code>base</code>默认值为<code>http://server_name/</code> 。</p>
      <p><code>base_uri</code>是<code>base</code>同义词。请注意，URL上的斜杠很重要。</p></dd>

      <dt><code>default</code>指令</dt>

      <dd>如果给定的坐标不适合任何<code>poly</code> ， <code>circle</code>或<code>rect</code>指令，并且没有<code>point</code>指令，则采取的操作。如果没有<code class="directive"><a href="#imapdefault">ImapDefault</a></code>配置设置，则默认为<code>nocontent</code> ，导致返回状态代码<code>204 No Content</code> 。客户端应保持显示的页面相同。</dd>

      <dt><code>poly</code>指令</dt>

      <dd>取三到一百个点，如果用户选择的坐标落在这些点定义的多边形内，则服从该点。</dd>

      <dt><code>圈</code></dt>

      <dd>获取圆和圆上的点的中心坐标。如果用户选择的点位于圆上，则服从该指令。</dd>

      <dt><code>rect</code>指令</dt>

      <dd>取得矩形的两个相对角的坐标。如果所选点在此矩形内，则服从。</dd>

      <dt><code>point</code>指令</dt>

      <dd>需要一点。如果不满足其他指令，则遵循最接近用户所选点的指令。请注意，如果存在<code>point</code>指令并给出了有效坐标，则不会遵循<code>default</code> 。</dd>
      </dl>
    

    <h3><a name="imapfile.values" id="imapfile.values">价值观</a></h3>

      <p>每个指令的值可以是以下任意一个：</p>

      <dl>
      <dt>网址</dt>

      <dd><p>该URL可以是相对URL或绝对URL。相对URL可以包含“ ..”语法，并将相对于<code>base</code>值进行解析。</p>
      <p><code>base</code>本身将不会根据当前值进行解析。一个<code>base mailto:</code>的语句可以正常工作。</p></dd>

      <dt><code>地图</code></dt>

      <dd>等效于imagemap文件本身的URL。与此不发送任何坐标，因此除非<code class="directive"><a href="#imapmenu">ImapMenu</a></code>设置为<code>none</code>否则将生成菜单。</dd>

      <dt><code>菜单</code></dt>
      <dd>与<code>map</code>同义。</dd>

      <dt><code>推荐人</code></dt>

      <dd>等同于引用文档的URL。如果不存在<code>Referer:</code>标头，则默认为<code>http://servername/</code> 。</dd>

      <dt><code>无内容</code></dt>

      <dd>发送状态代码<code>204 No Content</code> ，告诉客户端保持显示相同的页面。对于除<code>base</code>所有对象均有效。</dd>

      <dt><code>错误</code></dt>

      <dd>出现<code>500 Server Error</code>失败。除了<code>base</code>对所有都有效，但对<code>default</code>任何东西都是愚蠢的。</dd>
      </dl>
    

    <h3><a name="imapfile.coords" id="imapfile.coords">座标</a></h3>

      <dl>
      <dt><code>0,0 200,200</code></dt>

      <dd>坐标由以逗号分隔的<var>x</var>和<var>y</var>值组成。坐标之间用空格隔开。为了适应Lynx处理图像地图的方式，如果用户选择坐标<code>0,0</code> ，就好像没有选择坐标。</dd>
      </dl>

    

    <h3><a name="imapfile.quotedtext" id="imapfile.quotedtext">引用文字</a></h3>

      <dl>
      <dt><code>“ <var>菜单文字</var> ”</code></dt>

      <dd><p>在值之后或坐标之后，该行可以选择在双引号中包含文本。如果生成菜单，则此字符串用作链接的文本：</p>

      <div class="example"><p><code>&lt;a href="http://example.com/"&gt; <var>菜单文本</var> &lt;/a&gt;</code></p></div>

      <p>如果不存在带引号的文本，则链接的名称将用作文本：</p>

      <div class="example"><p><code>&lt;a href="http://example.com/"&gt; http://example.com &lt;/a&gt;</code></p></div>

      <p>如果要在此文本中使用双引号，则必须将其写为<code>&amp;quot;</code> 。</p></dd>
      </dl>

    
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="example" id="example">范例Mapfile</a></h2>

    <div class="example"><p><code>＃注释以“格式”或“半格式”菜单打印。<br>＃并且可以包含html标记。 &lt;hr&gt;<br>基本参照<br>保利地图“请给我菜单吗？“ 0,0 0,10 10,10 10,0<br>rect .. 0,0 77,27“引荐目录”<br>圈出http://www.inetnebr.example.com/lincoln/feedback/ 195,0 305,27<br>rect another_file“与引荐目录位于同一目录中” 306,0 419,27<br>点http://www.zyzzyva.example.com/ 100,100<br>点http://www.tripod.example.com/ 200,200<br>rect mailto：nate@tripod.example.com 100,150 200,0“错误？”<br>
    </code></p></div>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="referencing" id="referencing">引用您的地图文件</a></h2>

    <div class="example"><h3>HTML示例</h3><p><code>&lt;a href="/maps/imagemap1.map"&gt;<br>
      <span class="indent">&lt;img ismap src =“ / images / imagemap1.gif”&gt;<br>
      </span> &lt;/a&gt;</code></p></div>

    <div class="example"><h3>XHTML范例</h3><p><code>&lt;a href="/maps/imagemap1.map"&gt;<br>
      <span class="indent">&lt;img ismap =“ ismap” src =“ / images / imagemap1.gif” /&gt;<br>
      </span> &lt;/a&gt;</code></p></div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ImapBase" id="ImapBase">ImapBase</a> <a name="imapbase" id="imapbase">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>图像映射文件的默认<code>base</code></td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ImapBase地图|引荐| <var>网址</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ImapBase http：//服务器名称/</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>指标</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_imagemap</td></tr>
</table>
    <p><code class="directive">ImapBase</code>指令设置图像映射文件中使用的默认<code>base</code> 。它的值被imagemap文件中的<code>base</code>指令覆盖。如果不存在，则<code>base</code>默认为<code>http:// <var>servername</var> /</code> 。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/core.html#usecanonicalname">UseCanonicalName</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ImapDefault" id="ImapDefault">ImapDefault</a> <a name="imapdefault" id="imapdefault">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用未显式映射的坐标调用图像映射时的默认操作</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ImapDefault错误|无内容|地图|引荐| <var>网址</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ImapDefault无内容</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>指标</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_imagemap</td></tr>
</table>
    <p><code class="directive">ImapDefault</code>指令设置图像映射文件中使用的默认默认<code>default</code> 。它的值被imagemap文件中的<code>default</code>指令覆盖。如果不存在，则<code>default</code>操作为<code>nocontent</code> ，这意味着将向客户端发送<code>204 No Content</code> 。在这种情况下，客户端应继续显示原始页面。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ImapMenu" id="ImapMenu">ImapMenu</a> <a name="imapmenu" id="imapmenu">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>调用图像映射时如果没有给出坐标的动作</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ImapMenu无|格式化|半格式化|未格式化</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ImapMenu格式化</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>指标</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_imagemap</td></tr>
</table>
    <p><code class="directive">ImapMenu</code>指令确定在没有有效坐标的情况下调用图像映射文件时采取的措施。</p>

    <dl>
      <dt><code>没有</code></dt>
      <dd>如果ImapMenu为<code>none</code> ，则不生成菜单，并且执行<code>default</code>操作。</dd>

      <dt><code>格式化的</code></dt>
      <dd><code>formatted</code>菜单是最简单的菜单。imagemap文件中的注释将被忽略。会打印一个第一级的标题，然后是一个小标题，然后每个链接都放在单独的行上。菜单具有与目录列表一致的外观。</dd>

      <dt><code>半格式</code></dt>
      <dd>在<code>semiformatted</code>格式菜单中，将注释打印在图像映射文件中出现的位置。空行变成HTML中断。没有标题或小节被打印，但是菜单与<code>formatted</code>菜单相同。</dd>

      <dt><code>未格式化</code></dt>
      <dd>打印注释，忽略空行。不会打印出任何没有出现在图像映射文件中的内容。所有的中断和标题必须作为注释包含在imagemap文件中。这使您在菜单外观上具有最大的灵活性，但是需要将地图文件视为HTML而不是纯文本。</dd>
    </dl>

</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>