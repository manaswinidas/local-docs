<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_authn_core-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_authn_core</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>核心认证</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>authn_core_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_authn_core.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在Apache 2.3和更高版本中可用</td></tr></table>
<h3>摘要</h3>

    <p>该模块提供核心身份验证功能，以允许或拒绝访问网站的某些部分。
    <code class="module"><a href="../mod/mod_authn_core.html">mod_authn_core</a></code>提供所有身份验证提供程序通用的指令。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#authnalias">创建身份验证提供程序别名</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#authname">验证名</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authnprovideralias">&lt;AuthnProviderAlias&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authtype">验证类型</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_authn_core">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_authn_core">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="authnalias" id="authnalias">创建身份验证提供程序别名</a></h2>

    <p>可以在配置文件中创建扩展身份验证提供程序，并为其分配别名。然后可以通过伪指令<code class="directive"><a href="../mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a></code>或<code class="directive"><a href="../mod/mod_auth_digest.html#authdigestprovider">AuthDigestProvider</a></code>引用别名提供程序，方法与基本身份验证提供程序相同。除了具有创建扩展提供者并为其别名的功能外，它还允许多个位置引用同一扩展身份验证提供者。</p>

    <h3><a name="example" id="example">例子</a></h3>

        <p>本示例检查两个不同文本文件中的密码。</p>

        <div class="example"><h3>检查多个文本密码文件</h3><pre class="prettyprint lang-config"># Check here first
&lt;AuthnProviderAlias file file1&gt;
    AuthUserFile "/www/conf/passwords1"
&lt;/AuthnProviderAlias&gt;

# Then check here
&lt;AuthnProviderAlias file file2&gt;   
    AuthUserFile "/www/conf/passwords2"
&lt;/AuthnProviderAlias&gt;

&lt;Directory "/var/web/pages/secure"&gt;
    AuthBasicProvider file1 file2
    
    AuthType Basic
    AuthName "Protected Area"
    Require valid-user
&lt;/Directory&gt;</pre>
</div>

        <p>下面的示例基于ldap提供程序创建两个不同的ldap身份验证提供程序别名。这允许多个ldap主机为一个经过身份验证的位置提供服务：</p>

        <div class="example"><h3>检查多个LDAP服务器</h3><pre class="prettyprint lang-config">&lt;AuthnProviderAlias ldap ldap-alias1&gt;
    AuthLDAPBindDN cn=youruser,o=ctx
    AuthLDAPBindPassword yourpassword
    AuthLDAPURL ldap://ldap.host/o=ctx
&lt;/AuthnProviderAlias&gt;
&lt;AuthnProviderAlias ldap ldap-other-alias&gt;
    AuthLDAPBindDN cn=yourotheruser,o=dev
    AuthLDAPBindPassword yourotherpassword
    AuthLDAPURL ldap://other.ldap.host/o=dev?cn
&lt;/AuthnProviderAlias&gt;

Alias "/secure" "/webpages/secure"
&lt;Directory "/webpages/secure"&gt;
    AuthBasicProvider ldap-other-alias  ldap-alias1
    
    AuthType Basic
    AuthName "LDAP Protected Place"
    Require valid-user
    # Note that Require ldap-* would not work here, since the 
    # AuthnProviderAlias does not provide the config to authorization providers
    # that are implemented in the same module as the authentication provider.
&lt;/Directory&gt;</pre>
</div>
    

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthName" id="AuthName">AuthName</a> <a name="authname" id="authname">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>用于HTTP身份验证的授权领域</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthName <var>身份验证域</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authn_core</td></tr>
</table>
    <p>该伪指令设置目录的授权领域的名称。该领域被提供给客户端，以便用户知道要发送的用户名和密码。
    <code class="directive">AuthName</code>有一个参数；如果领域名称包含空格，则必须将其用引号引起来。它必须与<code class="directive"><a href="#authtype">AuthType</a></code>和<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令以及<code class="directive"><a href="../mod/mod_authn_file.html#authuserfile">AuthUserFile</a></code>和<code class="directive"><a href="../mod/mod_authz_groupfile.html#authgroupfile">AuthGroupFile</a></code>等指令一起使用。</p>

   <p>例如：</p>

   <pre class="prettyprint lang-config">AuthName "Top Secret"</pre>


    <p>为<code>AuthName</code>提供的字符串将出现在大多数浏览器提供的密码对话框中。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../howto/auth.html">身份验证，授权和访问控制</a></li>
<li><code class="module"><a href="../mod/mod_authz_core.html">mod_authz_core</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthnProviderAlias" id="AuthnProviderAlias">&lt;AuthnProviderAlias&gt;</a> <a name="authnprovideralias" id="authnprovideralias">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含一组指令，这些指令代表基本身份验证提供程序的扩展，并由指定的别名引用</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;AuthnProviderAlias <var>baseProvider别名</var> &gt; ... &lt;/ AuthnProviderAlias&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authn_core</td></tr>
</table>
    <p><code>&lt;AuthnProviderAlias&gt;</code>和<code>&lt;/AuthnProviderAlias&gt;</code>用于封装一组身份验证指令，可以使用指令<code class="directive"><a href="../mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a></code>或<code class="directive"><a href="../mod/mod_auth_digest.html#authdigestprovider">AuthDigestProvider</a></code>一个别名名称来引用该身份验证指令。</p>

    <div class="note">该指令对授权没有影响，即使对于同时提供身份验证和授权的模块也是如此。</div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthType" id="AuthType">AuthType</a> <a name="authtype" id="authtype">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>用户认证类型</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthType无|基本|摘要|表单</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authn_core</td></tr>
</table>
    <p>该伪指令选择目录的用户认证类型。可用的身份验证类型为<code>None</code> ， <code>Basic</code> （由<code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code>实现）， <code>Digest</code> （由<code class="module"><a href="../mod/mod_auth_digest.html">mod_auth_digest</a></code>实现）和<code>Form</code> （由<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>实现）。</p>

    <p>要实现身份验证，您还必须使用<code class="directive"><a href="#authname">AuthName</a></code>和<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令。此外，服务器必须具有身份验证提供程序模块（例如<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>和授权模块（例如<code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code> 。</p>

    <p>身份验证类型“ <code>None</code>禁用身份验证。启用身份验证后，除非指定了其他身份验证类型，否则通常每个后续<a href="../sections.html#mergin">配置节</a>都<a href="../sections.html#mergin">将</a>继承它。如果不需要对已认证部分的子部分进行认证，则可以使用认证类型<code>None</code> 。在以下示例中，客户端无需身份验证即可访问<code>/www/docs/public</code>目录：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/www/docs"&gt;
    AuthType Basic
    AuthName Documents
    AuthBasicProvider file
    AuthUserFile "/usr/local/apache/passwd/passwords"
    Require valid-user
&lt;/Directory&gt;

&lt;Directory "/www/docs/public"&gt;
    AuthType None
    Require all granted
&lt;/Directory&gt;</pre>


    <div class="note">禁用身份验证时，请注意，已经针对服务器文档树的另一部分进行身份验证的客户端通常将继续与每个请求一起发送身份验证HTTP标头或cookie，而不管服务器是否实际上要求对每个资源进行身份验证。</div>

<h3>也可以看看</h3>
<ul>
<li><a href="../howto/auth.html">身份验证，授权和访问控制</a></li>
</ul>
</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>