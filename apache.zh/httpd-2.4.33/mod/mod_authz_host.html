<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_authz_host-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_authz_host</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>基于主机（名称或IP地址）的组授权</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>authz_host_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_authz_host.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在2.4.19中添加<code>forward-dns</code>提供程序</td></tr></table>
<h3>摘要</h3>

    <p>使用<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令注册由<code class="module"><a href="../mod/mod_authz_host.html">mod_authz_host</a></code>实现的授权提供者。可以在<code class="directive"><a href="../mod/core.html#directory">&lt;Directory&gt;</a></code> ， <code class="directive"><a href="../mod/core.html#files">&lt;Files&gt;</a></code>或<code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code>节以及<code><a href="core.html#accessfilename">.htaccess</a></code>文件中引用该指令，以控制对服务器特定部分的访问。可以根据客户端主机名或IP地址来控制访问。</p>

    <p>通常，访问限制指令适用于所有访问方法（ <code>GET</code> ， <code>PUT</code> ， <code>POST</code>等）。在大多数情况下，这是所需的行为。但是，可以通过将指令包含在<code class="directive"><a href="../mod/core.html#limit">&lt;Limit&gt;</a></code>节中来限制某些方法，而使其他方法不受限制。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#requiredirectives">需求指令</a></li>
</ul><h3 class="directives">指令</h3>
<p>该模块不提供指令。</p>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_authz_host">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_authz_host">报告错误</a></li></ul><h3>也可以看看</h3>
<ul class="seealso">
<li><a href="../howto/auth.html">身份验证，授权和访问控制</a></li>
<li><code class="directive"><a href="../mod/mod_authz_core.html#require">要求</a></code></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="requiredirectives" id="requiredirectives">需求指令</a></h2>

    <p>在授权阶段使用Apache的<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令来确保允许或拒绝用户访问资源。 mod_authz_host使用<code>ip</code> ， <code>host</code> ， <code>forward-dns</code>和<code>local</code>扩展了授权类型。也可以使用其他授权类型，但可能需要加载其他授权模块。</p>

    <p>这些授权提供者影响哪些主机可以访问服务器的区域。可以通过主机名，IP地址或IP地址范围控制访问。</p>

    <p>从v2.4.8开始，主机require指令支持<a href="../expr.html">表达式</a> 。</p>

<h3><a name="reqip" id="reqip">需要ip</a></h3>

    <p><code>ip</code>提供程序允许根据远程客户端的IP地址来控制对服务器的访问。当指定<code>Require ip <var>ip-address</var></code> ，如果IP地址匹配，则允许访问请求。</p>

    <p>完整的IP地址：</p>

    <pre class="prettyprint lang-config">Require ip 10.1.2.3
Require ip 192.168.1.104 192.168.1.205</pre>


    <p>主机允许访问的IP地址</p>

    <p>部分IP地址：</p>

    <pre class="prettyprint lang-config">Require ip 10.1
Require ip 10 172.20 192.168.2</pre>

    <p>IP地址的前1至3个字节，用于子网限制。</p>

    <p>网络/网络掩码对：</p>

    <pre class="prettyprint lang-config">Require ip 10.1.0.0/255.255.0.0</pre>

    <p>网络abcd和网络掩码wxyz有关更细粒度的子网限制。</p>

    <p>网络/ nnn CIDR规范：</p>

    <pre class="prettyprint lang-config">Require ip 10.1.0.0/16</pre>

    <p>与前面的情况类似，除了网络掩码由nnn个高1位组成。</p>

    <p>请注意，以上最后三个示例完全匹配同一组主机。</p>

    <p>可以如下所示指定IPv6地址和IPv6子网：</p>

    <pre class="prettyprint lang-config">Require ip 2001:db8::a00:20ff:fea7:ccea
Require ip 2001:db8:1:1::a
Require ip 2001:db8:2:1::/64
Require ip 2001:db8:3::/48</pre>


    <p>注意：由于IP地址是在启动时解析的，因此表达式不会在请求时求值。</p>



<h3><a name="reqhost" id="reqhost">需要主机</a></h3>

    <p><code>host</code>提供程序允许根据远程客户端的主机名来控制对服务器的访问。当指定<code>Require host <var>host-name</var></code> ，如果主机名匹配，则允许访问请求。</p>

    <p>一个（部分）域名</p>

    <pre class="prettyprint lang-config">Require host example.org
Require host .net example.edu</pre>


    <p>名称匹配或以该字符串结尾的主机被允许访问。仅匹配完整的组件，因此上面的示例将匹配<code>foo.example.org</code>但将不匹配<code>fooexample.org</code> 。无论<code class="directive"><a href="../mod/core.html#hostnamelookups">HostnameLookups</a></code>指令的设置如何，此配置都将导致Apache在客户端IP地址上执行双向反向DNS查找。它将对IP地址进行反向DNS查找，以找到关联的主机名，然后对主机名进行正向查找，以确保其与原始IP地址匹配。仅当正向和反向DNS一致且主机名匹配时，才允许访问。</p>



<h3><a name="reqfwddns" id="reqfwddns">需要转发DNS</a></h3>

    <p><code>forward-dns</code>提供程序允许基于简单主机名来控制对服务器的访问。如果指定了<code>Require forward-dns <var>host-name</var></code> ，则允许访问与该<code><var>host-name</var></code>相对应的所有IP地址。</p>

    <p>与<code>host</code>提供程序相比，该提供程序不依赖于反向DNS查找：它只是查询DNS以获取主机名，并允许客户端的IP匹配。因此，它仅适用于主机名，不适用于域名。但是，由于不使用反向DNS，因此它将与使用动态DNS服务的客户端一起使用。</p>

    <pre class="prettyprint lang-config">Require forward-dns bla.example.org</pre>


    <p>从名称<code>bla.example.org</code>解析IP的客户端将被授予访问权限。</p>

    <p>在2.4.19中添加了<code>forward-dns</code>提供程序。</p>


<h3><a name="reqlocal" id="reqlocal">需要本地</a></h3>

    <p>如果满足以下任一条件，则<code>local</code>提供程序将允许访问服务器：</p>

    <ul>
        <li>客户端地址匹配127.0.0.0/8</li>
        <li>客户地址是:: 1</li>
        <li>连接的客户端和服务器地址都相同</li>
    </ul>

    <p>这提供了一种便捷的方式来匹配源自本地主机的连接：</p>

    <pre class="prettyprint lang-config">Require local</pre>




<h3><a name="proxy" id="proxy">安全须知</a></h3>

    <p>如果要将内容代理到服务器，则需要注意，客户端地址将是代理服务器的地址，而不是客户端的地址，因此在这种情况下使用<code>Require</code>指令可能无法实现您的意思。有关此问题的一种可能的解决方案，请参见<code class="module"><a href="../mod/mod_remoteip.html">mod_remoteip</a></code> 。</p>



</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>