<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_http2-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_http2</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>支持HTTP / 2传输层</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>http2_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_http2.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在2.4.17版和更高版本中可用</td></tr></table>
<h3>摘要</h3>

        <p>该模块为Apache HTTP Server提供HTTP / 2（ <a href="https://tools.ietf.org/html/rfc7540">RFC 7540</a> ）支持。</p>
        
        <p>该模块依靠<a href="http://nghttp2.org/">libnghttp2</a>提供核心的http / 2引擎。</p>
        
        <p>您必须通过<code class="directive"><a href="../mod/core.html#protocols">Protocols</a></code>启用HTTP / 2才能使用本文档中描述的功能。HTTP / 2协议<a href="https://http2.github.io/faq/#does-http2-require-encryption">不需要</a>使用加密，因此有两种方案可用： <code>h2</code> （基于TLS的HTTP / 2）和<code>h2c</code> （基于TCP的HTTP / 2）。</p>

        <p>两种有用的配置方案是：</p>
        
        <div class="note"><h3>VirtualHost上下文中的HTTP / 2（仅TLS）</h3>
        <pre class="prettyprint lang-config">Protocols h2 http/1.1</pre>

        <p>允许在安全的<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code>通过TLS ALPN进行HTTP / 2协商（h2）。默认情况下， <code>h2</code>禁用HTTP / 2前同步码检查（直接模式，请参见<code class="directive"><a href="#h2direct">H2Direct</a></code> ）。</p>
        </div>

        <div class="note"><h3>服务器上下文中的HTTP / 2（TLS和明文）</h3>
        <pre class="prettyprint lang-config">Protocols h2 h2c http/1.1</pre>

        <p>允许通过TLS ALPN进行HTTP / 2协商（h2）以实现安全<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code> 。允许从初始HTTP / 1.1连接或通过HTTP / 2前同步码检查（直接模式，请参阅<code class="directive"><a href="#h2direct">H2Direct</a></code> ）升级HTTP / 2明文协商（ <code class="directive"><a href="#h2direct">H2Direct</a></code> ）。</p>
        </div>

        <p>有关协议的任何疑问，请参考官方的<a href="https://http2.github.io/faq">HTTP / 2 FAQ</a> 。</p>
        
    </div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#how-it-works">怎么运行的</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#h2copyfiles">H2CopyFiles</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2direct">H2Direct</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2earlyhints">H2早期提示</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2maxsessionstreams">H2MaxSessionStreams</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2maxworkeridleseconds">H2MaxWorkerIdleSeconds</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2maxworkers">H2MaxWorkers</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2minworkers">H2MinWorkers</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2moderntlsonly">仅H2ModernTLS</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2push">H2推</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2pushdiarysize">H2PushDiarySize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2pushpriority">H2PushPriority</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2pushresource">H2Push资源</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2serializeheaders">H2SerializeHeaders</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2streammaxmemsize">H2StreamMaxMemSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2tlscooldownsecs">H2TLSCoolDownSecs</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2tlswarmupsize">H2TLSWarmUpSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2upgrade">H2升级</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#h2windowsize">H2WindowSize</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_http2">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_http2">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="how-it-works" id="how-it-works">怎么运行的</a></h2>
    
    <h3><a name="dimensioning" id="dimensioning">HTTP / 2尺寸</a></h3>
        <p>在Apache服务器上启用HTTP / 2会对资源消耗产生影响，如果站点繁忙，则可能需要仔细考虑其含义。
        </p>
        <p>启用HTTP / 2后的第一件事是服务器进程将启动其他线程。原因是HTTP / 2将接收到的所有请求交给其自己的<em>Worker</em>线程进行处理，收集结果并将它们流式传输到客户端。
        </p>
        <p>在当前的实现中，这些工作程序使用与您可能熟悉的MPM工作程序不同的线程池。这就是现在的情况，并非永远如此。（不过，对于2.4.x发行版而言，它可能永远存在。）因此，HTTP / 2 worker或更短的H2Workers不会出现在<code class="module"><a href="../mod/mod_status.html">mod_status</a></code> 。也不会将它们计为<code class="directive"><a href="../mod/mpm_common.html#threadsperchild">ThreadsPerChild</a></code>指令。但是，如果您尚未通过<code class="directive"><a href="#h2minworkers">H2MinWorkers</a></code>和<code class="directive"><a href="#h2maxworkers">H2MaxWorkers</a></code>配置其他配置，则它们将<code class="directive"><a href="../mod/mpm_common.html#threadsperchild">ThreadsPerChild</a></code>作为默认值。
        </p>
        <p>要注意的另一件事是内存消耗。由于HTTP / 2在服务器上保留更多状态来管理所有打开的请求，它们的优先级和它们之间的依赖关系，因此与HTTP / 1.1处理相比，它总是需要更多的内存。有三个指令可控制HTTP / 2连接的内存占用： <code class="directive"><a href="#h2maxsessionstreams">H2MaxSessionStreams</a></code> ， <code class="directive"><a href="#h2windowsize">H2WindowSize</a></code>和<code class="directive"><a href="#h2streammaxmemsize">H2StreamMaxMemSize</a></code> 。
        </p>
        <p>
            <code class="directive"><a href="#h2maxsessionstreams">H2MaxSessionStreams</a></code>限制了客户端可以在HTTP / 2连接上发出的并行请求的数量。这取决于您的站点应允许多少个。默认值为100，这足够了，除非您遇到内存问题，否则我将保持这种方式。浏览器发送的大多数请求都是没有主体的GET，因此它们仅占用一点内存，直到开始实际处理为止。
        </p>
        <p>
            <code class="directive"><a href="#h2windowsize">H2WindowSize</a></code>控制在等待服务器鼓励更多请求之前，允许客户机作为请求的主体发送多少。或者，相反，它是服务器需要能够缓冲的请求主体数据量。这是每个请求。</p>
        <p>最后但并非最不重要的一点是， <code class="directive"><a href="#h2streammaxmemsize">H2StreamMaxMemSize</a></code>控制应缓冲多少响应数据。该请求位于H2Worker线程中并正在生成数据，HTTP / 2连接尝试将其发送给客户端。如果客户端读取速度不够快，连接将缓冲此数据量，然后挂起H2Worker。
        </p>
    
    
    <h3><a name="misdirected" id="misdirected">多个主机和错误的请求</a></h3>
        <p>许多站点将相同的TLS证书用于多个虚拟主机。证书具有通配符名称（例如“ * .example.org”）或带有多个备用名称。使用HTTP / 2的浏览器将识别出这种情况，并为这些主机重新使用已经打开的连接。
        </p>
        <p>尽管这对于性能而言非常重要，但要付出一定的代价：此类虚拟主机在配置方面需要格外小心。问题是您将在同一TLS连接上对多个主机发出多个请求。面对HTTP / 2标准，禁止重新协商成为了不可能。
        </p>
        <p>因此，如果您有多个使用相同证书的虚拟主机，并且想对它们使用HTTP / 2，则需要确保所有虚拟主机具有完全相同的SSL配置。您需要相同的协议，密码和设置来进行客户端验证。
        </p>
        <p>如果混合使用，Apache httpd将对其进行检测，并向客户端返回特殊的响应代码421 Misdirected Request。
        </p>
    

    <h3><a name="envvars" id="envvars">环境变量</a></h3>
        <p>可以将该模块配置为向SSI和CGI命名空间以及自定义日志配置（请参见<code>%{VAR_NAME}e</code> ）提供HTTP / 2相关信息作为附加环境变量。
        </p>
        
        <table class="bordered">
            
            <tr>
                <th><a name="table3">变量名：</a></th>
                <th>值类型：</th>
                <th>描述：</th>
            </tr>
            <tr><td><code>HTTP2</code></td><td>旗</td><td>正在使用HTTP / 2。</td></tr>
            <tr><td><code>H2PUSH</code></td><td>旗</td><td>对此连接启用了HTTP / 2服务器推送，并且客户端也支持。</td></tr>
            <tr><td><code>H2_PUSH</code></td><td>旗</td><td><code>H2PUSH</code>备用名称</td></tr>
            <tr><td><code>H2_PUSHED</code></td><td>串</td><td>空或<code>PUSHED</code>用于请求由服务器推送。</td></tr>
            <tr><td><code>H2_PUSHED_ON</code></td><td>数</td><td>触发此请求推送的HTTP / 2流号。</td></tr>
            <tr><td><code>H2_STREAM_ID</code></td><td>数</td><td>此请求的HTTP / 2流号。</td></tr>
            <tr><td><code>H2_STREAM_TAG</code></td><td>串</td><td>HTTP / 2进程唯一流标识符，由连接ID和由<code>-</code>分隔的流ID组成。</td></tr>
        </table>
    
    
    </div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2CopyFiles" id="H2CopyFiles">H2CopyFiles</a> <a name="h2copyfiles" id="h2copyfiles">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定响应中的文件处理</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2CopyFiles开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2CopyFiles关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.24版和更高版本中可用。</td></tr>
</table>
            <p>该指令影响响应中文件内容的处理方式。<code>off</code> （这是默认设置），使用通常的Apache预留处理来管理文件的生存期，文件句柄从请求处理传递到主连接。
            </p>
            <p>设置为<code>on</code> ，将在仍在处理请求的同时复制文件内容，并将缓冲的数据传递到主连接。如果第三方模块将具有不同生存期的文件注入响应中，则更好。
            </p>
            <p>这样的模块的一个示例是<code>mod_wsgi</code> ，它可以将Python文件句柄放入响应中。当Python认为处理完成时，这些文件将关闭。在用它们完成<code class="module"><a href="../mod/mod_http2.html">mod_http2</a></code>之前，可能还不错。
            </p>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2Direct" id="H2Direct">H2Direct</a> <a name="h2direct" id="h2direct">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>H2直接协议交换机</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2Direct开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2Direct为h2c开启，为h2协议关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令切换HTTP / 2直接模式的用法。应该在<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code>部分中使用它来为该虚拟主机启用直接HTTP / 2通信。
            </p>
            <p>直接通信意味着，如果服务器在连接上接收到的第一个字节与HTTP / 2前同步码匹配，则HTTP / 2协议将立即切换为无需进一步协商。RFC 7540中针对明文（h2c）情况定义了此模式。它在标准未要求的TLS连接上使用。
            </p>
            <p>当服务器/虚拟主机未通过<code class="directive"><a href="../mod/core.html#protocols">Protocols</a></code>启用h2或h2c时，将永远不会检查连接的HTTP / 2前导。
                <code class="directive">H2Direct</code>没关系。这对于使用可能无限期挂起初始读取的协议的连接（例如NNTP）非常重要。</p>
            <p>对于具有有关支持h2c的服务器的带外知识的客户端，直接HTTP / 2可以使客户端不必执行HTTP / 1.1升级，从而获得更好的性能，并且避免了对请求正文的升级限制。
            </p>
            <p>当可以信任连接或通过其他方式保护连接时，直接h2c也会吸引服务器到服务器的通信。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2Direct on</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2EarlyHints" id="H2EarlyHints">H2EarlyHints</a> <a name="h2earlyhints" id="h2earlyhints">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定发送103状态代码</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2EarlyHints开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2早暗示</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.24版和更高版本中可用。</td></tr>
</table>
            <p>此设置控制是否将HTTP状态103临时响应转发给客户端。默认情况下，当前情况并非如此，因为许多客户仍然对意外的临时响应感到麻烦。
            </p>
            <p>设置为<code>on</code> ，用<code>H2PushResource</code>声明的PUSH资源将在最终响应之前触发临时103响应。103响应将包含建议此类资源<code>preload</code>的<code>Link</code>标头。
            </p>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2MaxSessionStreams" id="H2MaxSessionStreams">H2MaxSessionStreams</a> <a name="h2maxsessionstreams" id="h2maxsessionstreams">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>每个HTTP / 2会话的最大活动流数。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2MaxSessionStreams <em>n</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2MaxSessionStreams 100</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令设置服务器允许的每个HTTP / 2会话（例如连接）的最大活动流数。根据RFC 7540，如果流不是<code>idle</code>或未<code>closed</code> ，则该流是活动的。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2MaxSessionStreams 20</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2MaxWorkerIdleSeconds" id="H2MaxWorkerIdleSeconds">H2MaxWorkerIdleSeconds</a> <a name="h2maxworkeridleseconds" id="h2maxworkeridleseconds">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>h2工作人员保持空闲直到关闭的最大秒数。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code><em>H2MaxWorkerIdleSecondsñ</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2MaxWorkerIdleSeconds 600</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令设置了h2 worker可以关闭直到关闭自身的最大秒数。这仅在h2工人数超过<code class="directive"><a href="#h2minworkers">H2MinWorkers</a></code> 。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2MaxWorkerIdleSeconds 20</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2MaxWorkers" id="H2MaxWorkers">H2MaxWorkers</a> <a name="h2maxworkers" id="h2maxworkers">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>每个子进程使用的最大工作线程数。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2MaxWorkers <em>n</em></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令设置每个子进程用于HTTP / 2处理的最大工作线程数。如果不使用此指令，则<code class="module"><a href="../mod/mod_http2.html">mod_http2</a></code>将选择一个适合于所加载的<code>mpm</code>模块的值。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2MaxWorkers 20</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2MinWorkers" id="H2MinWorkers">H2MinWorkers</a> <a name="h2minworkers" id="h2minworkers">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>每个子进程使用的工作线程数最少。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2MinWorkers <em>n</em></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令设置每个子进程为HTTP / 2处理生成的最小工作线程数。如果不使用此指令，则<code class="module"><a href="../mod/mod_http2.html">mod_http2</a></code>将选择一个适合于所加载的<code>mpm</code>模块的值。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2MinWorkers 10</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2ModernTLSOnly" id="H2ModernTLSOnly">H2ModernTLSOnly</a> <a name="h2moderntlsonly" id="h2moderntlsonly">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>要求HTTP / 2连接仅是“现代TLS”</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2ModernTLSOnly | off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2ModernTLS仅启用</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.18版和更高版本中可用。</td></tr>
</table>
            <p>此伪指令在TLS模式（https :)中切换对HTTP / 2连接的安全检查。可以在服务器范围内使用，也可以用于特定的<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code> 。
            </p>
            <p>安全检查要求TSL协议至少为TLSv1.2，并且不使用RFC 7540附录A中列出的密码。一旦新的安全要求到位，这些检查将得到扩展。
            </p>
            <p>该名称源自mozilla中定义了“现代兼容性”的<a href="https://wiki.mozilla.org/Security/Server_Side_TLS">安全性/服务器端TLS</a>定义。Mozilla Firefox和其他浏览器要求HTTP / 2连接具有现代兼容性。作为OpSec中的所有内容，这是一个不断发展的目标，并且有望在未来发展。
            </p>
            <p>在<code class="module"><a href="../mod/mod_http2.html">mod_http2</a></code>中进行这些检查的目的之一是对所有连接（不仅是来自浏览器的连接）强制实施此安全级别。另一个目的是防止在不满足要求的情况下将HTTP / 2作为协议进行协商。
            </p>
            <p>最终，TLS连接的安全性由<code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code>的服务器配置指令确定。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2ModernTLSOnly off</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2Push" id="H2Push">H2Push</a> <a name="h2push" id="h2push">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>H2服务器按键开关</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2Push开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2推</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.18版和更高版本中可用。</td></tr>
</table>
            <p>此伪指令切换HTTP / 2服务器推送协议功能的用法。
            </p>
            <p>HTTP / 2协议允许服务器在请求特定资源时将其他资源推送到客户端。如果这些资源以某种方式连接并且可以期望客户端仍然要求它，这将很有帮助。这样，推送就节省了客户端请求资源本身所花费的时间。另一方面，推送客户端不再需要或已经拥有的资源会浪费带宽。
            </p>
            <p>通过检查响应的<code>Link</code>标头来检测服务器推送（有关规范，请参阅https://tools.ietf.org/html/rfc5988）。当这样指定的链接具有<code>rel=preload</code>属性时，它将被视为要推送的资源。
            </p>
            <p>响应中的链接头可以由应用程序设置，也可以通过<code class="module"><a href="../mod/mod_headers.html">mod_headers</a></code>配置为：</p>
            <div class="example"><h3>mod_headers示例</h3><pre class="prettyprint lang-config">&lt;Location /index.html&gt;
    Header add Link "&lt;/css/site.css&gt;;rel=preload"
    Header add Link "&lt;/images/logo.jpg&gt;;rel=preload"
&lt;/Location&gt;</pre>
</div>
            <p>如示例所示，可以将多个链接头添加到响应中，从而导致多次推送。该模块中没有检查，以避免将同一资源两次或多次推送到一个客户端。小心使用。
            </p>
            <p>默认情况下启用HTTP / 2服务器推送。该指令允许在该服务器/虚拟主机的所有资源上将其关闭。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2Push off</pre>
</div>
            <p>最后但并非最不重要的一点是，仅当客户表示愿意接受推送时，才会进行推送。大多数浏览器都支持，某些浏览器（如Safari 9）却不支持。同样，推送也只会发生在与原始响应所具有的相同<em>权限的</em>资源上。
            </p>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2PushDiarySize" id="H2PushDiarySize">H2PushDiarySize</a> <a name="h2pushdiarysize" id="h2pushdiarysize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>H2服务器推送日志大小</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2PushDiarySize <em>n</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2PushDiarySize 256</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.19版和更高版本中可用。</td></tr>
</table>
            <p>该指令切换每个HTTP / 2连接记住的最大HTTP / 2服务器推送次数。可以在<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code>部分中使用它来影响到该虚拟主机的所有连接的数量。
            </p>
            <p>推送日志记录了推送资源（其URL）的摘要（当前使用64位数字），以避免在同一连接上重复推送。这些值不会保持不变，因此打开新连接的客户端将再次经历已知的推送。目前正在进行的工作是使客户端能够公开其已经拥有的资源的摘要，因此日记可以由客户端在每个连接设置上初始化。
            </p>
            <p>如果达到最大大小，则较新的条目将替换最旧的条目。日记条目使用8个字节，让具有256个条目的默认日记消耗大约2 KB的内存。
            </p>
            <p>大小为0将有效地禁用推送日记。
            </p>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2PushPriority" id="H2PushPriority">H2PushPriority</a> <a name="h2pushpriority" id="h2pushpriority">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>H2服务器推送优先级</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2PushPriority <em>MIME类型</em> [之后|之前|交错] [重量]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2PushPriority * 16点后</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.18版和更高版本中可用。为了产生效果，需要使用nghttp2库1.5.0或更高版本。</td></tr>
</table>
            <p>该指令根据响应的内容类型定义推送响应的优先级处理。这通常是根据服务器配置定义的，但也可能出现在虚拟主机中。
            </p>
            <p>HTTP / 2服务器推送始终与客户端请求相关。每个这样的请求/响应对或<em>流</em>都具有依赖性和权重，一起定义了流的<em>优先级</em> 。
            </p>
            <p>当一个流<em>依赖</em>于另一个流时，比如说X依赖于Y，则Y在获得任何带宽之前先获得所有带宽。请注意，这并不意味着Y将阻止X。如果Y没有要发送的数据，则X可以使用分配给Y的所有带宽。</p>
            <p>当一个流有一个以上的依赖项时，例如X1和X2都依赖于Y，则<em>权重</em>确定带宽分配。如果X1和X2具有相同的权重，则它们都将获得可用带宽的一半。如果X1的权重是X2的两倍，则X1的带宽是X2的两倍。
            </p>
            <p>最终，每个流都取决于获得所有可用带宽的<em>根</em>流，但从不发送任何内容。因此，其所有带宽均按权重在其子级之间分配。它们要么有数据发送带宽，要么将带宽分配给自己的孩子。等等。如果所有子级都没有要发送的数据，则根据相同规则将该带宽分配到其他地方。
            </p>
            <p>该优先级系统的目的是始终利用可用带宽，同时允许将优先级和权重赋予特定的流。通常，由于所有流都是由客户端启动的，因此设置这些优先级的也是流。
            </p>
            <p>仅当此类流导致PUSH时，才让服务器决定此类推送流的<em>初始</em>优先级是多少。在下面的示例中，X是客户端流。它取决于Y，服务器决定将流P1和P2推入X。</p>
            <p>默认优先级规则为：</p>
            <div class="example"><h3>默认优先级规则</h3><pre class="prettyprint lang-config">H2PushPriority * After 16</pre>
</div>
            <p>读为“根据权重为16的客户端流发送任何内容类型的推送流”。因此，P1和P2将在X之后发送，并且由于它们具有相等的权重，因此它们之间平均共享带宽。
            </p>
            <div class="example"><h3>交错优先规则</h3><pre class="prettyprint lang-config">H2PushPriority text/css Interleaved 256</pre>
</div>
            <p>读为“以与客户端流相同的依赖关系和权重发送任何CSS资源”。如果P1具有内容类型'text / css'，则它将取决于Y（与X相同），并且其有效权重将计算为<code>P1ew = Xw * (P1w / 256)</code> 。当P1w为256时，这将使有效权重与X的权重相同。如果X和P1都有要发送的数据，则带宽将被均等地分配给两者。
            </p>
            <p>在Pw指定为512的情况下，推送的交错流的权重是X的两倍。而128的权重仅为X的一半。请注意，有效权重始终限制为256。
            </p>
            <div class="example"><h3>优先规则之前</h3><pre class="prettyprint lang-config">H2PushPriority application/json Before</pre>
</div>
            <p>这表示任何推送的内容类型为'application / json'的流都应<em>在</em> X <em>之前</em>发出。这使P1依赖于Y，X依赖于P1。因此，只要P1有要发送的数据，X就会停止。有效权重是从客户端流继承的。不允许指定重量。
            </p>
            <p>请注意，优先级规范的效果受到可用服务器资源的限制。如果服务器没有可用于推送流的工作程序，则仅当其他流完成后，该流的数据才可能到达。
            </p>
            <p>最后但并非最不重要的一点是，此指令中使用了一些语法细节：</p>
            <ol>
                <li>“ *”是唯一与所有其他内容匹配的特殊内容类型。“图像/ *”将不起作用。</li>
                <li>默认依赖项为“之后”。</li>
                <li>还有默认权重：“之后”为16，“交错”为256。
                </li>
            </ol>
            <div class="example"><h3>优先顺序较短</h3><pre class="prettyprint lang-config">H2PushPriority application/json 32         # an After rule
H2PushPriority image/jpeg before           # weight inherited
H2PushPriority text/css   interleaved      # weight 256 default</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2PushResource" id="H2PushResource">H2PushResource</a> <a name="h2pushresource" id="h2pushresource">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>声明资源以尽早推送给客户</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2PushResource [添加]路径[关键]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.24版和更高版本中可用。</td></tr>
</table>
            <p>当添加到目录/位置时，将对通过此伪指令添加的所有路径尝试HTTP / 2 PUSH。该指令可以在同一位置多次使用。
            </p>
            <p>该指令比通过<code class="module"><a href="../mod/mod_headers.html">mod_headers</a></code>添加<code>Link</code>头更早地推送资源。
                <code class="module"><a href="../mod/mod_http2.html">mod_http2</a></code>在对客户端的<code>103 Early Hints</code>临时响应中宣布了这些资源。这意味着不支持PUSH的客户端仍将获得早期的预加载提示。
            </p>
            <p>与通过<code class="module"><a href="../mod/mod_headers.html">mod_headers</a></code>设置<code>Link</code>响应标头<code class="module"><a href="../mod/mod_headers.html">mod_headers</a></code> ，此伪指令仅对HTTP / 2连接有效。
            </p>
            <p>通过将<code>critical</code>资源添加到此类资源，服务器将给予处理它更多的优先级，并在可用之前在其来自主请求的数据之前发送其数据。</p>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2SerializeHeaders" id="H2SerializeHeaders">H2SerializeHeaders</a> <a name="h2serializeheaders" id="h2serializeheaders">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>序列化请求/响应处理开关</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2SerializeHeaders开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2SerializeHeaders关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令切换是将HTTP / 2请求以HTTP / 1.1格式序列化以由<code>httpd</code>内核处理，还是将接收到的二进制数据直接传递到<code>request_rec</code> 。
            </p>
            <p>序列化将降低性能，但是在自定义过滤器/钩子需要它的情况下，可以提供更多的向后兼容性。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2SerializeHeaders on</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2StreamMaxMemSize" id="H2StreamMaxMemSize">H2StreamMaxMemSize</a> <a name="h2streammaxmemsize" id="h2streammaxmemsize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>每个流缓冲的最大输出数据量。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2StreamMaxMemSize <em>字节</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2StreamMaxMemSize 65536</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该伪指令设置活动流在内存中缓冲的最大传出数据字节数。不会按流分配此内存。即将完成的分配将计入此限制。当达到限制时，流处理将冻结，并且仅在将缓冲的数据发送到客户端后，流处理才会继续。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2StreamMaxMemSize 128000</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2TLSCoolDownSecs" id="H2TLSCoolDownSecs">H2TLSCoolDownSecs</a> <a name="h2tlscooldownsecs" id="h2tlscooldownsecs">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td></td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2TLSCoolDownSecs <em>秒</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2TLSCoolDownSecs 1</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.18版和更高版本中可用。</td></tr>
</table>
            <p>该指令设置TLS连接上的空闲时间的秒数，直到TLS写入大小变小（〜1300字节）。可以在服务器范围内使用，也可以用于特定的<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code> 。
            </p>
            <p>有关TLS预热的说明，请参见<code class="directive"><a href="#h2tlswarmupsize">H2TLSWarmUpSize</a></code> 。<code class="directive">H2TLSCoolDownSecs</code>反映了这样的事实，即对于空闲连接，连接也可能随时间恶化（并且TCP流量会调整）。在几秒钟之内没有发送任何数据之后，退回到预热阶段对整体性能是有益的。
            </p>
            <p>在可以认为连接可靠的部署中，可以通过将其设置为0来禁用此计时器。
            </p>
            <p>以下示例将秒设置为零，从而有效地禁用任何冷却。热身的TLS连接保持最大记录大小。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2TLSCoolDownSecs 0</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2TLSWarmUpSize" id="H2TLSWarmUpSize">H2TLSWarmUpSize</a> <a name="h2tlswarmupsize" id="h2tlswarmupsize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td></td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2TLSWarmUpSize <em>数量</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2TLSWarmUpSize 1048576</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.4.18版和更高版本中可用。</td></tr>
</table>
            <p>该指令设置在TLS小记录（〜1300字节）中发送的字节数，直到在https：HTTP / 2连接上进行最大大小的写操作（16k）为止。可以在服务器范围内使用，也可以用于特定的<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code> 。
            </p>
            <p><a href="https://www.igvita.com">谷歌性能实验室的</a>测量表明，如果初始记录的大小保持在MTU级别以下，则TLS连接可达到最佳性能，以使完整的记录适合IP数据包。
            </p>
            <p>当TCP调整其流控制和窗口大小时，更长的TLS记录可能会卡在队列中或丢失并需要重新传输。对于所有数据包当然都是这样。但是，TLS需要整个记录才能对其进行解密。最后任何丢失的字节将使接收到的字节的使用停止。
            </p>
            <p>成功发送足够数量的字节后，连接的TCP状态将稳定，并且最大TLS记录大小（16 KB）可用于实现最佳性能。
            </p>
            <p>在本地访问服务器或仅通过可靠连接访问服务器的部署中，如果完全禁用任何预热阶段，则该值可能会降低（如果为0）。
            </p>
            <p>以下示例将大小设置为零，从而有效地禁用了任何预热阶段。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2TLSWarmUpSize 0</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2Upgrade" id="H2Upgrade">H2升级</a> <a name="h2upgrade" id="h2upgrade">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>H2升级协议交换机</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2升级开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2Up开启H2C，关闭H2协议</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>该指令切换了使用HTTP / 1.1升级方法切换到HTTP / 2的用法。应在<code class="directive"><a href="../mod/core.html#virtualhost">&lt;VirtualHost&gt;</a></code>部分中使用此功能，以启用该虚拟主机的升级到HTTP / 2。
            </p>
            <p>HTTP / 1.1中定义了这种切换协议的方法，并使用“ Upgrade”标头（因此为名称）来宣布愿意使用其他协议。这可能在HTTP / 1.1连接的任何请求上发生。
            </p>
            <p>根据RFC 7540的要求，默认情况下，此协议切换方法在明文（潜在的h2c）连接上启用，并在TLS（潜在的h2）上禁用。
            </p>
            <p>请注意，升级仅适用于不包含正文的请求。具有内容的POST和PUT将永远不会触发升级到HTTP / 2。有关升级的替代方法，请参见<code class="directive"><a href="#h2direct">H2Direct</a></code> 。
            </p>
            <p>仅当通过<code class="directive"><a href="../mod/core.html#protocols">Protocols</a></code>启用h2或h2c时，此模式才有效。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2Upgrade on</pre>
</div>
        
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="H2WindowSize" id="H2WindowSize">H2WindowSize</a> <a name="h2windowsize" id="h2windowsize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>上游数据流窗口的大小。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>H2WindowSize <em>字节</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>H2WindowSize 65535</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_http2</td></tr>
</table>
            <p>此伪指令设置用于从客户端到服务器的流控制的窗口的大小，并限制服务器必须缓冲的数据量。一旦达到限制，客户端将停止在流上发送，直到服务器宣布有更多可用空间（因为它已处理了一些数据）。
            </p><p>此限制仅影响请求正文，而不影响其元数据（例如标头）。而且，它对响应主体没有影响，因为响应主体的窗口大小由客户端管理。
            </p>
            <div class="example"><h3>例</h3><pre class="prettyprint lang-config">H2WindowSize 128000</pre>
</div>
        
</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>