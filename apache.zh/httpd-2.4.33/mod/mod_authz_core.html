<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_authz_core-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_authz_core</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>核心授权</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>authz_core_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_authz_core.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTPD 2.3和更高版本中可用</td></tr></table>
<h3>摘要</h3>

    <p>该模块提供了核心授权功能，因此可以允许或拒绝通过身份验证的用户访问网站的某些部分。 <code class="module"><a href="../mod/mod_authz_core.html">mod_authz_core</a></code>提供了注册各种授权提供程序的功能。它通常与身份验证提供程序模块（例如<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>和授权模块（例如<code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code> 。它还允许将高级逻辑应用于授权处理。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#authzalias">创建授权提供者别名</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#logic">授权容器</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#requiredirectives">需求指令</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#authmerging">认证合并</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authzprovideralias">&lt;AuthzProviderAlias&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authzsendforbiddenonfailure">AuthzSendForbiddenOnFailure</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#require">要求</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#requireall">&lt;RequireAll&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#requireany">&lt;RequireAny&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#requirenone">&lt;RequireNone&gt;</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_authz_core">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_authz_core">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="authzalias" id="authzalias">创建授权提供者别名</a></h2>

    <p>可以在配置文件中创建扩展授权提供程序，并为其分配别名。然后可以通过<code class="directive"><a href="#require">Require</a></code>指令以与基本授权提供程序相同的方式引用别名提供程序。除了具有创建扩展提供者并为其别名的功能外，它还允许多个位置引用同一扩展授权提供者。
    </p>

    <h3><a name="example" id="example">例</a></h3>
        <p>下面的示例基于ldap-group授权提供者创建两个不同的ldap授权提供者别名。此示例允许单个授权位置检查多个ldap主机内的组成员身份：</p>

        <pre class="prettyprint lang-config">&lt;AuthzProviderAlias ldap-group ldap-group-alias1 cn=my-group,o=ctx&gt;
    AuthLDAPBindDN cn=youruser,o=ctx
    AuthLDAPBindPassword yourpassword
    AuthLDAPURL ldap://ldap.host/o=ctx
&lt;/AuthzProviderAlias&gt;

&lt;AuthzProviderAlias ldap-group ldap-group-alias2 cn=my-other-group,o=dev&gt;
    AuthLDAPBindDN cn=yourotheruser,o=dev
    AuthLDAPBindPassword yourotherpassword
    AuthLDAPURL ldap://other.ldap.host/o=dev?cn
&lt;/AuthzProviderAlias&gt;

Alias "/secure" "/webpages/secure"
&lt;Directory "/webpages/secure"&gt;
    Require all granted
    
    AuthBasicProvider file
    
    AuthType Basic
    AuthName LDAP_Protected_Place
    
    #implied OR operation
    Require ldap-group-alias1
    Require ldap-group-alias2
&lt;/Directory&gt;</pre>

    

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="logic" id="logic">授权容器</a></h2>

    <p>授权容器伪指令<code class="directive"><a href="#requireall">&lt;RequireAll&gt;</a></code> ， <code class="directive"><a href="#requireany">&lt;RequireAny&gt;</a></code>和<code class="directive"><a href="#requirenone">&lt;RequireNone&gt;</a></code>可以相互组合，也可以与<code class="directive"><a href="#require">Require</a></code>伪指令组合以表达复杂的授权逻辑。</p>

    <p>下面的示例表示以下授权逻辑。为了访问资源，该用户必须是<code>superadmin</code>用户，或者既属于<code>admins</code>组又属于<code>Administrators</code> LDAP组，并且既属于<code>sales</code>组，又具有LDAP <code>dept</code>属性<code>sales</code> 。此外，为了访问资源，用户不得同时属于<code>temps</code>组或LDAP组<code>Temporary Employees</code> 。</p>

    <pre class="prettyprint lang-config">&lt;Directory "/www/mydocs"&gt;
    &lt;RequireAll&gt;
        &lt;RequireAny&gt;
            Require user superadmin
            &lt;RequireAll&gt;
                Require group admins
                Require ldap-group cn=Administrators,o=Airius
                &lt;RequireAny&gt;
                    Require group sales
                    Require ldap-attribute dept="sales"
                &lt;/RequireAny&gt;
            &lt;/RequireAll&gt;
        &lt;/RequireAny&gt;
        &lt;RequireNone&gt;
            Require group temps
            Require ldap-group cn=Temporary Employees,o=Airius
        &lt;/RequireNone&gt;
    &lt;/RequireAll&gt;
&lt;/Directory&gt;</pre>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="requiredirectives" id="requiredirectives">需求指令</a></h2>

  <p><code class="module"><a href="../mod/mod_authz_core.html">mod_authz_core</a></code>提供了一些可以与<code class="directive"><a href="#require">Require</a></code>指令一起使用的通用授权提供程序。</p>

  <h3><a name="reqenv" id="reqenv">需要环境</a></h3>

    <p><code>env</code>提供程序允许根据<a href="../env.html">环境变量</a>的存在来控制对服务器的访问。当指定<code>Require env <var>env-variable</var></code> ，如果环境变量<var>env-variable</var>存在，则允许访问请求。服务器可以使用<code class="module"><a href="../mod/mod_setenvif.html">mod_setenvif</a></code>提供的指令，根据客户端请求的特征灵活地设置环境变量。因此，该指令可用于允许基于客户端<code>User-Agent</code> （浏览器类型）， <code>Referer</code>或其他HTTP请求标头字段等因素进行访问。</p>

    <pre class="prettyprint lang-config">SetEnvIf User-Agent ^KnockKnock/2\.0 let_me_in
&lt;Directory "/docroot"&gt;
    Require env let_me_in
&lt;/Directory&gt;</pre>


    <p>在这种情况下，具有以<code>KnockKnock/2.0</code>开头的用户代理字符串的浏览器将被允许访问，而所有其他浏览器将被拒绝。</p>

    <p>当服务器通过内部<a class="glossarylink" href="../glossary.html#subrequest" title="see glossary">子请求（</a>例如，查找<code class="directive"><a href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a></code>或使用<code class="module"><a href="../mod/mod_autoindex.html">mod_autoindex</a></code>生成目录列表）查找路径时， <a class="glossarylink" href="../glossary.html#subrequest" title="见词汇">子</a>请求中<em>不会</em>继承每个请求的环境变量。此外，由于API阶段<code class="module"><a href="../mod/mod_setenvif.html">mod_setenvif</a></code>会采取行动，因此在子请求中未单独评估<code class="directive"><a href="../mod/mod_setenvif.html#setenvif">SetEnvIf</a></code>指令。</p>

  

  <h3><a name="reqall" id="reqall">要求全部</a></h3>

    <p><code>all</code>提供程序都模仿了以前的“允许所有人”和“拒绝所有人”指令提供的功能。该提供程序可以采用“授予”或“拒绝”两个参数之一。以下示例将授予或拒绝访问所有请求的权限。</p>

    <pre class="prettyprint lang-config">Require all granted</pre>


    <pre class="prettyprint lang-config">Require all denied</pre>


  

  <h3><a name="reqmethod" id="reqmethod">要求方法</a></h3>

    <p><code>method</code>提供者允许在授权决策中使用HTTP方法。GET和HEAD方法被视为等效。此提供程序无法使用TRACE方法，请改用<code class="directive"><a href="../mod/core.html#traceenable">TraceEnable</a></code> 。</p>

    <p>以下示例仅允许GET，HEAD，POST和OPTIONS请求：</p>

    <pre class="prettyprint lang-config">Require method GET POST OPTIONS</pre>


    <p>以下示例将允许未经身份验证的GET，HEAD，POST和OPTIONS请求，并且所有其他方法都需要有效用户：</p>

    <pre class="prettyprint lang-config">&lt;RequireAny&gt;
    �Require method GET POST OPTIONS
    �Require valid-user
&lt;/RequireAny&gt;</pre>


  

  <h3><a name="reqexpr" id="reqexpr">需要expr</a></h3>

  <p><code>expr</code>提供程序允许将授权决策基于任意表达式。</p>

    <pre class="prettyprint lang-config">Require expr "%{TIME_HOUR} -ge 9 &amp;&amp; %{TIME_HOUR} -le 17"</pre>


    <pre class="prettyprint lang-config">&lt;RequireAll&gt;
    Require expr "!(%{QUERY_STRING} =~ /secret/)"
    Require expr "%{REQUEST_URI} in { '/example.cgi', '/other.cgi' }" 
&lt;/RequireAll&gt;</pre>


    <pre class="prettyprint lang-config">Require expr "!(%{QUERY_STRING} =~ /secret/) &amp;&amp; %{REQUEST_URI} in { '/example.cgi', '/other.cgi' }"</pre>


  <p>语法在<a href="../expr.html">ap_expr</a>文档中描述。</p>

  <p>通常，在认证之前对表达式求值。但是，如果表达式返回false并引用变量<code>%{REMOTE_USER}</code> ，则将执行身份验证并重新评估表达式。</p>

  


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthMerging" id="AuthMerging">AuthMerging</a> <a name="authmerging" id="authmerging">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>控制将每个配置部分的授权逻辑与先前配置部分的授权逻辑组合的方式。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>验证合并|和|要么</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>身份验证关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
</table>
    <p>启用授权后，除非指定了不同的授权指令集，否则通常每个后续<a href="../sections.html#merging">配置节</a>都<a href="../sections.html#merging">将</a>继承它。这是默认操作，它与<code>AuthMerging Off</code>的显式设置相对应。</p>

    <p>但是，在某些情况下，希望合并配置节时将配置节的授权与其前身的授权相结合。在这种情况下，有两个选项： <code>And</code>和<code>Or</code> 。</p>

    <p>当配置节包含<code>AuthMerging And</code>或<code>AuthMerging Or</code> ，其授权逻辑与最接近的前任逻辑（根据配置节的整体顺序）组合在一起，这也包含授权逻辑，就像两个节共同包含在<code class="directive"><a href="#requireall">&lt;RequireAll&gt;</a></code>或<code class="directive"><a href="#requireany">&lt;RequireAny&gt;</a></code>指令。</p>

    <div class="note"><code class="directive">AuthMerging</code>的设置不会在显示该设置的配置部分之外继承。在以下示例中，仅属于组<code>alpha</code>用户可以访问<code>/www/docs</code> 。属于<code>alpha</code>或<code>beta</code>组的用户可以访问<code>/www/docs/ab</code> 。但是，默认的<code class="directive">AuthMerging</code> <code>Off</code>设置适用于<code>/www/docs/ab/gamma</code>的<code class="directive"><a href="../mod/core.html#directory">&lt;Directory&gt;</a></code>配置部分，因此该部分的授权指令将覆盖前面的部分。因此，只有属于<code>gamma</code>组的用户才能访问<code>/www/docs/ab/gamma</code> 。</div>

    <pre class="prettyprint lang-config">&lt;Directory "/www/docs"&gt;
    AuthType Basic
    AuthName Documents
    AuthBasicProvider file
    AuthUserFile "/usr/local/apache/passwd/passwords"
    Require group alpha
&lt;/Directory&gt;

&lt;Directory "/www/docs/ab"&gt;
    AuthMerging Or
    Require group beta
&lt;/Directory&gt;

&lt;Directory "/www/docs/ab/gamma"&gt;
    Require group gamma
&lt;/Directory&gt;</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthzProviderAlias" id="AuthzProviderAlias">&lt;AuthzProviderAlias&gt;</a> <a name="authzprovideralias" id="authzprovideralias">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含一组指令，这些指令代表基本授权提供程序的扩展，并由指定的别名引用</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;AuthzProviderAlias <var>baseProvider别名需求参数</var> &gt; ... &lt;/ AuthzProviderAlias&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
</table>
    <p><code class="directive">&lt;AuthzProviderAlias&gt;</code>和<code>&lt;/AuthzProviderAlias&gt;</code>用于封装一组授权指令，可以使用指令<code class="directive"><a href="#require">Require</a></code>通过别名来引用这些指令。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthzSendForbiddenOnFailure" id="AuthzSendForbiddenOnFailure">AuthzSendForbiddenOnFailure</a> <a name="authzsendforbiddenonfailure" id="authzsendforbiddenonfailure">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>如果身份验证成功但授权失败，则发送“ 403 FORBIDDEN”而不是“ 401 UNAUTHORIZED”</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthzSendForbiddenOnFailure开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthzSendForbiddenOnFailure关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTPD 2.3.11和更高版本中可用</td></tr>
</table>
    <p>如果身份验证成功但授权失败，则默认情况下，Apache HTTPD将使用HTTP响应代码“ 401 UNAUTHORIZED”进行响应。这通常会导致浏览器再次向用户显示密码对话，这在所有情况下都是不希望的。
    <code class="directive">AuthzSendForbiddenOnFailure</code>允许将响应代码更改为“ 403 FORBIDDEN”。</p>

    <div class="warning"><h3>安全警告</h3>
    <p>在缺少授权的情况下修改响应会削弱密码的安全性，因为它会向可能的攻击者表明他猜测的密码正确。</p>
    </div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Require" id="Require">需要</a> <a name="require" id="require">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>测试验证的用户是否被授权提供者授权。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>要求[不是] <var>实体名称</var> [ <var>实体名称</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
</table>
    <p>该指令测试是否根据特定的授权提供者和指定的限制对已认证的用户进行了授权。 <code class="module"><a href="../mod/mod_authz_core.html">mod_authz_core</a></code>提供以下通用授权提供程序：</p>

    <dl>
      <dt><code>要求所有授予</code></dt>
      <dd>无条件允许访问。</dd>

      <dt><code>要求全部拒绝</code></dt>
      <dd>无条件拒绝访问。</dd>

      <dt><code>需要env <var>env-var</var> [ <var>env-var</var> ] ...</code></dt>
      <dd>仅在设置了给定环境变量之一的情况下才允许访问。</dd>

      <dt><code>需要方法<var>http-method</var> [ <var>http-method</var> ] ...</code></dt>
      <dd>仅允许使用给定的HTTP方法进行访问。</dd>

      <dt><code>需要expr <var>表达式</var> </code></dt>
      <dd>如果<var>expression的</var>计算结果为true，则允许访问。</dd>
    </dl>

    <p><code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code> ， <code class="module"><a href="../mod/mod_authz_host.html">mod_authz_host</a></code>和<code class="module"><a href="../mod/mod_authz_groupfile.html">mod_authz_groupfile</a></code>提供的一些允许的语法是：</p>

    <dl>
      <dt><code>要求用户<var>userid</var> [ <var>userid</var> ] ...</code></dt>
      <dd>只有指定的用户可以访问资源。</dd>

      <dt><code>要求组<var>组名</var> [ <var>组名</var> ] ...</code></dt>
      <dd>只有命名组中的用户才能访问资源。</dd>

      <dt><code>需要有效用户</code></dt>
      <dd>所有有效用户都可以访问资源。</dd>

      <dt><code>需要IP 10 172.20 192.168.2</code></dt>
      <dd>指定IP地址范围内的客户端可以访问资源。</dd>
    </dl>

    <p>实现要求选项的其他授权模块包括<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code> ， <code class="module"><a href="../mod/mod_authz_dbm.html">mod_authz_dbm</a></code> ， <code class="module"><a href="../mod/mod_authz_dbd.html">mod_authz_dbd</a></code> ， <code class="module"><a href="../mod/mod_authz_owner.html">mod_authz_owner</a></code>和<code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code> 。</p>

    <p>在大多数情况下，对于完整的身份验证和授权配置， <code class="directive">Require</code>必须随附<code class="directive"><a href="../mod/mod_authn_core.html#authname">AuthName</a></code> ， <code class="directive"><a href="../mod/mod_authn_core.html#authtype">AuthType</a></code>和<code class="directive"><a href="../mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a></code>或<code class="directive"><a href="../mod/mod_auth_digest.html#authdigestprovider">AuthDigestProvider</a></code>伪指令以及诸如<code class="directive"><a href="../mod/mod_authn_file.html#authuserfile">AuthUserFile</a></code>和<code class="directive"><a href="../mod/mod_authz_groupfile.html#authgroupfile">AuthGroupFile</a></code>伪指令（用于定义用户和组）才能正常工作。例：</p>

    <pre class="prettyprint lang-config">AuthType Basic
AuthName "Restricted Resource"
AuthBasicProvider file
AuthUserFile "/web/users"
AuthGroupFile "/web/groups"
Require group admin</pre>


    <p>以这种方式应用的访问控制对<strong>所有</strong>方法均有效。<strong>这是通常所希望的。</strong> 如果您希望仅将访问控制应用于特定方法，而其他方法不受保护，则将<code class="directive">Require</code>语句放在<code class="directive"><a href="../mod/core.html#limit">&lt;Limit&gt;</a></code>节中。</p>

    <p>可以通过使用<code>not</code>选项来否定<code class="directive">Require</code>指令的结果。与其他否定授权指令<code class="directive">&lt;RequireNone&gt;</code> ，当<code class="directive">Require</code>指令被否定时，它只会失败或返回中立的结果，因此可能永远不会独立授权请求。</p>

    <p>在下面的示例中，除了也在<code>reject</code>组中的用户外，所有在<code>alpha</code>和<code>beta</code>组中的用户都得到了授权。</p>

    <pre class="prettyprint lang-config">&lt;Directory "/www/docs"&gt;
    &lt;RequireAll&gt;
        Require group alpha beta
        Require not group reject
    &lt;/RequireAll&gt;
&lt;/Directory&gt;</pre>


    <p>当在单个<a href="../sections.html#merging">配置节</a>中使用多个<code class="directive">Require</code>指令并且不包含在其他授权指令（如<code class="directive"><a href="#requireall">&lt;RequireAll&gt;</a></code> ，它们隐式包含在<code class="directive"><a href="#requireany">&lt;RequireAny&gt;</a></code>指令中。因此，第一个授权用户的用户会授权整个请求，随后的<code class="directive">Require</code>指令将被忽略。</p>

    <div class="warning"><h3>安全警告</h3>
    <p>在“ <code class="directive"><a href="../mod/core.html#location">Location</a></code>部分中设置与文件系统之外提供的内容重叠的授权指令时，请务必谨慎。默认情况下，这些<a href="../sections.html#merging">配置部分</a>覆盖<code class="directive"><a href="../mod/core.html#directory">Directory</a></code>和<code class="directive"><a href="../mod/core.html#files">Files</a></code>部分中的授权配置。</p>
    <p><code class="directive"><a href="#authmerging">AuthMerging</a></code>伪指令可用于控制如何合并授权配置节。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><a href="../howto/access.html">访问控制方法</a></li>
<li><a href="#logic">授权容器</a></li>
<li><code class="module"><a href="../mod/mod_authn_core.html">mod_authn_core</a></code></li>
<li><code class="module"><a href="../mod/mod_authz_host.html">mod_authz_host</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RequireAll" id="RequireAll">&lt;RequireAll&gt;</a> <a name="requireall" id="requireall">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>封装一组授权指令，其中的任何一个授权指令都必须失败，并且至少一个必须成功，才能使封闭指令成功。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;RequireAll&gt; ... &lt;/ RequireAll&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
</table>
    <p><code class="directive">&lt;RequireAll&gt;</code>和<code>&lt;/RequireAll&gt;</code>用于封装一组授权伪指令，其中的任何一个授权伪指令都必须失败，并且至少必须成功才能使<code class="directive">&lt;RequireAll&gt;</code>伪指令成功。</p>

    <p>如果<code class="directive">&lt;RequireAll&gt;</code>指令中包含的所有指令<code class="directive">&lt;RequireAll&gt;</code>失败，并且至少有一个成功，则<code class="directive">&lt;RequireAll&gt;</code>指令成功。如果没有成功也没有失败，则返回中立结果。在所有其他情况下，它都会失败。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="#logic">授权容器</a></li>
<li><a href="../howto/auth.html">身份验证，授权和访问控制</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RequireAny" id="RequireAny">&lt;RequireAny&gt;</a> <a name="requireany" id="requireany">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>封装一组授权指令，其中一个授权指令必须成功才能使封装指令成功。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;RequireAny&gt; ... &lt;/ RequireAny&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
</table>
    <p><code class="directive">&lt;RequireAny&gt;</code>和<code>&lt;/RequireAny&gt;</code>用于封装一组授权指令，为了使<code class="directive">&lt;RequireAny&gt;</code>指令成功，必须授权一组授权指令。</p>

    <p>如果<code class="directive">&lt;RequireAny&gt;</code>指令中包含的一个或多个指令成功，则<code class="directive">&lt;RequireAny&gt;</code>指令成功。如果没有成功也没有失败，则返回中立结果。在所有其他情况下，它都会失败。</p>

    <div class="note">由于否定的授权指令无法返回成功的结果，因此它们不能显着影响<code class="directive">&lt;RequireAny&gt;</code>指令的结果。（在它们失败并且所有其他指令返回中性值的情况下，最多它们可能导致该指令失败。）因此，在<code class="directive">&lt;RequireAny&gt;</code>指令中不允许使用否定的授权指令。</div>

<h3>也可以看看</h3>
<ul>
<li><a href="#logic">授权容器</a></li>
<li><a href="../howto/auth.html">身份验证，授权和访问控制</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RequireNone" id="RequireNone">&lt;RequireNone&gt;</a> <a name="requirenone" id="requirenone">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>封闭一组授权指令，授权指令中的任何一个都必须成功才能使封闭指令不失败。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;RequireNone&gt; ... &lt;/ RequireNone&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authz_core</td></tr>
</table>
    <p><code class="directive">&lt;RequireNone&gt;</code>和<code>&lt;/RequireNone&gt;</code>用于封装一组授权指令，为了使<code class="directive">&lt;RequireNone&gt;</code>指令不会失败，授权指令中的任何一个都不能成功。</p>

    <p>如果<code class="directive">&lt;RequireNone&gt;</code>指令中包含的一个或多个指令成功，则<code class="directive">&lt;RequireNone&gt;</code>指令将失败。在所有其他情况下，它返回中性结果。因此，与其他否定授权指令<code>Require not</code> ，它永远不能独立授权请求，因为它永远不会返回成功的结果。但是，可以使用它来限制有权访问资源的用户集。</p>

    <div class="note">由于否定的授权伪指令无法返回成功的结果，因此它们不会显着影响<code class="directive">&lt;RequireNone&gt;</code>伪指令的结果。因此，在<code class="directive">&lt;RequireNone&gt;</code>指令内不允许使用否定的授权指令。</div>

<h3>也可以看看</h3>
<ul>
<li><a href="#logic">授权容器</a></li>
<li><a href="../howto/auth.html">身份验证，授权和访问控制</a></li>
</ul>
</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>