<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_privileges-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_privileges</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>支持Solaris特权以及在不同用户ID下运行虚拟主机。</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>privileges_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_privileges.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在Solaris 10和OpenSolaris平台上的Apache 2.3及更高版本中可用</td></tr></table>
<h3>摘要</h3>

<p>此模块使不同的虚拟主机能够以不同的Unix <var>用户</var>和<var>组</var> ID以及不同的<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">Solaris特权运行</a> 。特别是，它提供了解决方案，可解决不同虚拟主机之间的特权分离问题，这首先是由废弃的perchild MPM提出的。它还提供了其他安全性增强功能。</p>

<p>与perchild不同， <code class="module"><a href="../mod/mod_privileges.html">mod_privileges</a></code>本身不是MPM。它<em>在</em>处理模型<em>内</em>工作，可以<em>在</em>运行的进程中为<em>每个请求</em>设置特权和用户/组。因此，它与线程化的MPM不兼容，并且将拒绝在一个MPM下运行。</p>

<p><code class="module"><a href="../mod/mod_privileges.html">mod_privileges</a></code>引发了类似于<a href="../suexec.html">suexec的</a>安全问题。但是与suexec不同，它不仅适用于CGI程序，而且适用于整个请求处理周期，包括进程内应用程序和子进程。它非常适合在<strong>mod_php</strong>下运行PHP应用程序，该程序也与线程MPM不兼容。它也非常适合其他进程内脚本应用程序（例如<strong>mod_perl</strong> ， <strong>mod_python</strong>和<strong>mod_ruby）</strong> ，以及以C语言作为apache模块实现的应用程序，其中特权分离是一个问题。</p>

</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#security">安全注意事项</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#dtraceprivileges">DTrace特权</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#privilegesmode">特权模式</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#vhostcgimode">VHostCGI模式</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#vhostcgiprivs">虚拟主机CGIPrivs</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#vhostgroup">虚拟主机组</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#vhostprivs">虚拟主机</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#vhostsecure">虚拟主机安全</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#vhostuser">虚拟主机用户</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_privileges">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_privileges">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="security" id="security">安全注意事项</a></h2>

<p><strong>在网络服务器进程中</strong>可能运行<strong>不受信任的代码的</strong>情况下， <code class="module"><a href="../mod/mod_privileges.html">mod_privileges</a></code>引入了新的安全问题。这适用于不受信任的模块，以及在诸如mod_php或mod_perl之类的模块下运行的脚本。外部运行的脚本（例如，作为CGI或在mod_proxy或mod_jk之后的应用服务器中运行）不受影响。</p>

<p>mod_privileges的基本安全问题是：</p>
<ul><li>以系统用户身份运行会带来与mod_suexec相同的安全问题，以及几乎等效的安全问题，例如cgiwrap和suphp。</li>
<li>具有特权的恶意用户扩展（模块或脚本）可以将其特权升级为任何虚拟主机中httpd进程可用的任何东西。当（且仅当）使用<var>BIG_SECURITY_HOLE</var>选项编译mod_privileges时，这会带来新的风险。</li>
<li>知道权限的恶意用户扩展（模块或脚本）可以提升特权，以将其用户ID设置为另一个系统用户（和/或组）。</li>
</ul>

<p><code class="directive">PrivilegesMode</code>指令允许您选择<var>FAST</var>或<var>SECURE</var>模式。您可以混合模式，对受信任的用户和经过完全审计的代码路径使用<var>FAST</var>模式，而在不受信任的用户可以引入代码的范围内使用SECURE模式。</p>
<p>在描述模式之前，我们还应该介绍目标用例：良性与恶意。在良性情况下，您希望为方便起见而将用户分开，并保护他们和服务器免受诚实错误所带来的风险，但您相信用户不会故意破坏系统安全性。在敌对情况下（例如，商业托管），您可能会让用户故意攻击系统或互相攻击。</p>
<dl>
<dt>快速模式</dt>
<dd>在<var>FAST</var>模式下，请求将使用选定的uid / gid和特权在进程内运行，因此开销可以忽略不计。这适合于良性情况，但是对于攻击者使用进程内模块或脚本提升特权并不安全。</dd>
<dt>安全模式</dt>
<dd>处于<var>SECURE</var>模式下的请求将派生一个子流程，然后该子流程将放弃特权。这与使用suexec运行CGI非常相似，但是在整个请求周期中，都受益于对特权的细粒度控制。</dd>
</dl>
<p>您可以为每个虚拟主机甚至在虚拟主机中的目录上下文中选择不同的<code class="directive">PrivilegesMode</code> 。<var>FAST</var>模式适用于受信任的用户和/或没有特权加载进程内代码的情况。
<var>SECURE</var>模式适用于可能在进程中运行不受信任的代码的情况。但是，即使在<var>SECURE</var>模式下，也无法防止恶意用户<em>在请求处理周期开始之前</em>引入能够识别特权的代码<em>。</em></p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="DTracePrivileges" id="DTracePrivileges">DTracePrivileges</a> <a name="dtraceprivileges" id="dtraceprivileges">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定是否启用dtrace所需的特权。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>DTracePrivileges开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>DTrace特权关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在具有非线程MPM（预<code class="module"><a href="../mod/prefork.html">prefork</a></code>或自定义MPM）的Solaris 10和OpenSolaris上可用。</td></tr>
</table>
    <p>此服务器范围的指令确定Apache是否将以运行<a href="http://sosc-dr.sun.com/bigadmin/content/dtrace/">dtrace</a>所需的<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">特权</a>运行。请注意， <var>DTracePrivileges On</var>本身不会激活DTrace，但是<var>DTracePrivileges Off</var>将阻止它正常工作。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="PrivilegesMode" id="PrivilegesMode">PrivilegesMode</a> <a name="privilegesmode" id="privilegesmode">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>在处理速度和效率与针对恶意特权意识代码的安全性之间进行权衡。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>特权模式FAST | SECURE | SELECTIVE</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>特权模式FAST</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在具有非线程MPM（预<code class="module"><a href="../mod/prefork.html">prefork</a></code>或自定义MPM）的Solaris 10和OpenSolaris上可用。</td></tr>
</table><p>该指令在性能与安全性之间权衡了恶意的，可识别特权的代码。在“ <var>安全”</var>模式下，每个请求都在一个安全的子进程中运行，从而导致性能下降。在<var>FAST</var>模式下，如上所述，无法保护服务器免受特权升级。</p>
<p>此伪指令在<code>&lt;Directory&gt;</code>上下文（包括诸如Location / Files / If之类的等同内容）与顶级或<code>&lt;VirtualHost&gt;</code>之间略有不同。</p>
<p>在顶层，它设置了一个默认值，它将被虚拟主机继承。在虚拟主机中，FAST或SECURE模式对整个HTTP请求起作用，并且<code>&lt;Directory&gt;</code>上下文中的任何设置都将被<strong>忽略</strong> 。第三个伪模式SELECTIVE将FAST vs SECURE的选择推迟到<code>&lt;Directory&gt;</code>上下文中的指令。</p>
<p>在<code>&lt;Directory&gt;</code>上下文中，它仅适用于为VirtualHost设置了SELECTIVE模式的情况。在这种情况下，只能设置FAST或SECURE（SELECTIVE将毫无意义）。</p>
<div class="warning"><h3>警告</h3>其中被选择用于虚拟主机SELECTIVE模式，权限的激活必须推迟到<em>以后</em>请求处理的映射阶段已经确定什么<code>&lt;Directory&gt;</code>上下文适用于该请求。这可能使攻击者有机会在放弃特权和设置用户标识/用户名<em>之前，</em>通过在顶级或<code>&lt;VirtualHost&gt;</code>上下文中运行的<code class="directive"><a href="../mod/mod_rewrite.html#rewritemap">RewriteMap</a></code>引入代码。
</div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VHostCGIMode" id="VHostCGIMode">VHostCGIMode</a> <a name="vhostcgimode" id="vhostcgimode">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定虚拟主机是否可以运行子流程，以及可用于子流程的特权。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>VHostCGIMode开|关|安全</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>VHostCGIMode开启</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在具有非线程MPM（预<code class="module"><a href="../mod/prefork.html">prefork</a></code>或自定义MPM）的Solaris 10和OpenSolaris上可用。</td></tr>
</table>
    <p>确定是否允许虚拟主机运行fork和exec，以及运行子进程所需的<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">特权</a> 。如果将此选项设置为<var>Off，</var>则虚拟主机将被拒绝特权，并且将无法在传统的<code class="module"><a href="../mod/mod_cgi.html">mod_cgi</a></code>下运行传统的CGI程序或脚本，也无法在类似的外部程序（例如由<code class="module"><a href="../mod/mod_ext_filter.html">mod_ext_filter</a></code>或<code class="directive"><a href="../mod/mod_rewrite.html#rewritemap">RewriteMap</a></code> <var>prog</var>创建的外部程序）下运行。请注意，这不会阻止CGI程序在替代进程和安全模型（例如<a href="https://httpd.apache.org/mod_fcgid/">mod_fcgid）</a>下运行，这是Solaris中的推荐解决方案。</p>
    <p>如果设置为<var>On</var>或<var>Secure</var> ，则允许虚拟主机运行上述外部程序和脚本。如对<code class="directive">VHostSecure</code>所述，设置<code class="directive">VHostCGIMode</code> <var>Secure</var>具有拒绝子<code class="directive">VHostSecure</code>特权的作用。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VHostCGIPrivs" id="VHostCGIPrivs">VHostCGIPrivs</a> <a name="vhostcgiprivs" id="vhostcgiprivs">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>为虚拟主机创建的子进程分配任意特权。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>VHostPrivs [+-]？<var>特权名称</var> [[+-]？特权名称] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Solaris 10和OpenSolaris备有不带螺纹的MPM（ <code class="module"><a href="../mod/prefork.html">prefork</a></code>或定制MPM），当<code class="module"><a href="../mod/mod_privileges.html">mod_privileges</a></code>编译与<var>BIG_SECURITY_HOLE</var>编译时选择。</td></tr>
</table>
    <p><code class="directive">VHostCGIPrivs</code>可用于为虚拟主机创建的子<code class="directive">VHostCGIPrivs</code>分配任意<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">特权</a> ，如<code class="directive">VHostCGIMode</code>下<code class="directive">VHostCGIMode</code> 。每个<var>特权名称</var>是Solaris特权的名称，例如<var>file_setid</var>或<var>sys_nfs</var> 。</p>

    <p><var>特权名称</var>可以可选地以+或-为前缀，这将分别允许或拒绝特权。如果不与+或-一起使用，则所有其他分配给虚拟主机的特权都将被拒绝。您可以使用它来覆盖任何默认设置并构造您自己的特权集。</p>

    <div class="warning"><h3>安全</h3>
    <p>该指令可以在apache子进程中打开巨大的安全漏洞，包括并以root级权限运行它们。除非您完全了解自己在做什么，否则请不要使用它！</p></div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VHostGroup" id="VHostGroup">VHostGroup</a> <a name="vhostgroup" id="vhostgroup">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置用于运行虚拟主机的组ID。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>VHostGroup <var>unix-groupid</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>在继承中指定的组ID <code class="directive"><a href="../mod/mod_unixd.html#group">Group</a></code></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在具有非线程MPM（预<code class="module"><a href="../mod/prefork.html">prefork</a></code>或自定义MPM）的Solaris 10和OpenSolaris上可用。</td></tr>
</table>
    <p><code class="directive">VHostGroup</code>指令设置Unix组，服务器将在该Unix组下处理对虚拟主机的请求。在处理请求之前设置组，然后使用<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">Solaris Privileges</a>重新设置组。由于该设置适用于<em>流程</em> ，因此它与线程MPM不兼容。</p>
    <p><var>Unix组</var>是以下之一：</p>
    <dl>
      <dt>组名</dt>
      <dd>通过名称引用给定的组。</dd>

      <dt><code>#</code>后跟一个组号。</dt>
      <dd>用编号指组。</dd>
    </dl>

    <div class="warning"><h3>安全</h3>
    <p>该指令不能以root身份运行apache！但是，它带来了类似于<a href="../suexec.html">suexec</a>文档中讨论的潜在安全问题。</p></div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/mod_unixd.html#group">组</a></code></li>
<li><code class="directive"><a href="../mod/mod_suexec.html#suexecusergroup">SuexecUserGroup</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VHostPrivs" id="VHostPrivs">VHostPrivs</a> <a name="vhostprivs" id="vhostprivs">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>为虚拟主机分配任意特权。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>VHostPrivs [+-]？<var>特权名称</var> [[+-]？特权名称] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Solaris 10和OpenSolaris备有不带螺纹的MPM（ <code class="module"><a href="../mod/prefork.html">prefork</a></code>或定制MPM），当<code class="module"><a href="../mod/mod_privileges.html">mod_privileges</a></code>编译与<var>BIG_SECURITY_HOLE</var>编译时选择。</td></tr>
</table>
    <p><code class="directive">VHostPrivs</code>可用于为虚拟主机分配任意<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">特权</a> 。每个<var>特权名称</var>是Solaris特权的名称，例如<var>file_setid</var>或<var>sys_nfs</var> 。</p>

    <p><var>特权名称</var>可以可选地以+或-为前缀，这将分别允许或拒绝特权。如果不与+或-一起使用，则所有其他分配给虚拟主机的特权都将被拒绝。您可以使用它来覆盖任何默认设置并构造您自己的特权集。</p>

    <div class="warning"><h3>安全</h3>
    <p>该指令可以在apache中打开巨大的安全漏洞，包括并具有root级权限运行请求。除非您完全了解自己在做什么，否则请不要使用它！</p></div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VHostSecure" id="VHostSecure">VHostSecure</a> <a name="vhostsecure" id="vhostsecure">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定服务器是否以增强的虚拟主机安全性运行。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>VHostSecure开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>VHostSecure开启</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在具有非线程MPM（预<code class="module"><a href="../mod/prefork.html">prefork</a></code>或自定义MPM）的Solaris 10和OpenSolaris上可用。</td></tr>
</table>
    <p>确定虚拟主机是否通过删除Web服务器中很少需要的<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">特权</a>来增强安全性，这些<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">特权</a>在默认情况下对于普通Unix用户可用，因此对于模块和应用程序可能是必需的。建议您保留默认设置（开），除非它阻止应用程序运行。由于该设置适用于<em>流程</em> ，因此它与线程MPM不兼容。</p>
    <div class="note"><h3>注意</h3>
    <p>如果<code class="directive">VHostSecure</code>阻止应用程序运行，则这可能是一个警告信号，应检查该应用程序的安全性。</p></div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VHostUser" id="VHostUser">VHostUser</a> <a name="vhostuser" id="vhostuser">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置运行虚拟主机的用户ID。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>VHostUser <var>Unix用户ID</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>继承用户中指定的<code class="directive"><a href="../mod/mod_unixd.html#user">User</a></code> ID</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>实验性</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_privileges</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在具有非线程MPM（预<code class="module"><a href="../mod/prefork.html">prefork</a></code>或自定义MPM）的Solaris 10和OpenSolaris上可用。</td></tr>
</table>
    <p><code class="directive">VHostUser</code>指令设置Unix用户ID，服务器将在该Unix用户ID下处理对虚拟主机的请求。在处理请求之前设置用户ID，然后使用<a href="http://sosc-dr.sun.com/bigadmin/features/articles/least_privilege.jsp">Solaris Privileges</a>重置用户ID。由于该设置适用于<em>流程</em> ，因此它与线程MPM不兼容。</p>
    <p><var>Unix用户标识</var>是以下之一：</p>
    <dl>
      <dt>用户名</dt>
      <dd>通过名称引用给定的用户。</dd>

      <dt><code>#</code>后接用户号码。</dt>
      <dd>通过编号指代用户。</dd>
    </dl>

    <div class="warning"><h3>安全</h3>
    <p>该指令不能以root身份运行apache！但是，它带来了类似于<a href="../suexec.html">suexec</a>文档中讨论的潜在安全问题。</p></div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/mod_unixd.html#user">用户</a></code></li>
<li><code class="directive"><a href="../mod/mod_suexec.html#suexecusergroup">SuexecUserGroup</a></code></li>
</ul>
</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>