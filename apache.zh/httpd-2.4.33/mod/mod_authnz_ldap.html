<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_authnz_ldap-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_authnz_ldap</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>允许使用LDAP目录存储用于HTTP Basic身份验证的数据库。</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块标识符：</a></th><td>authnz_ldap_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_authnz_ldap.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在2.1版及更高版本中可用</td></tr></table>
<h3>摘要</h3>

    <p>该模块允许身份验证前端（例如<code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code>通过ldap目录对用户进行身份验证。</p>

    <p><code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>支持以下功能：</p>

    <ul>
      <li>已知支持<a href="http://www.openldap.org/">OpenLDAP SDK</a> （1.x和2.x）， <a href="http://developer.novell.com/ndk/cldap.htm">Novell LDAP SDK</a>和<a href="http://www.iplanet.com/downloads/developer/">iPlanet（Netscape）</a> SDK。</li>

      <li>可以通过用LDAP过滤器表示策略来实现复杂的授权策略。</li>

      <li>通过<a href="mod_ldap.html">mod_ldap</a>使用大量的LDAP操作缓存。</li>

      <li>支持基于SSL的LDAP（需要Netscape SDK）或TLS（需要OpenLDAP 2.x SDK或Novell LDAP SDK）。</li>
    </ul>

    <p>使用<code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code> ，将通过<code class="directive"><a href="../mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a></code>指令使用<code>ldap</code>值调用此模块。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#contents">内容</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#gcaveats">一般警告</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#operation">运作方式</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#requiredirectives">需求指令</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#examples">例子</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#usingtls">使用TLS</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#usingssl">使用SSL</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#exposed">公开登录信息</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#activedirectory">使用活动目录</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#frontpage">将Microsoft FrontPage与mod_authnz_ldap一起使用</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#authldapauthorizeprefix">AuthLDAPAuthorizePrefix</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapbindauthoritative">AuthLDAPBindAuthoritative</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapbinddn">AuthLDAPBindDN</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapbindpassword">AuthLDAPBindPassword</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapcharsetconfig">AuthLDAPCharsetConfig</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapcompareasuser">AuthLDAPCompareAsUser</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapcomparednonserver">AuthLDAPCompareDNOnServer</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapdereferencealiases">AuthLDAPDereferenceAliases</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapgroupattribute">AuthLDAPGroupAttribute</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapgroupattributeisdn">AuthLDAPGroupAttributeIsDN</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapinitialbindasuser">AuthLDAPInitialBindAsUser</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapinitialbindpattern">AuthLDAPInitialBindPattern</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapmaxsubgroupdepth">AuthLDAPMaxSubGroupDepth</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapremoteuserattribute">AuthLDAPRemoteUserAttribute</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapremoteuserisdn">AuthLDAPRemoteUserIsDN</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapsearchasuser">AuthLDAPSearchAsUser</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapsubgroupattribute">AuthLDAPSubGroupAttribute</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapsubgroupclass">AuthLDAPSubGroupClass</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authldapurl">AuthLDAPUrl</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_authnz_ldap">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_authnz_ldap">报告错误</a></li></ul><h3>也可以看看</h3>
<ul class="seealso">
<li><code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code></li>
<li><code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code></li>
<li><code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code></li>
<li><code class="module"><a href="../mod/mod_authz_groupfile.html">mod_authz_groupfile</a></code></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="contents" id="contents">内容</a></h2>

    <ul>
      <li> <a href="#gcaveats">一般警告</a> </li>
      <li> <a href="#operation">运作方式</a>

        <ul>
          <li><a href="#authenphase">认证阶段</a></li>

          <li><a href="#authorphase">授权阶段</a></li>
        </ul>
      </li>

      <li>
        <a href="#requiredirectives">需求指令</a>

        <ul>
          <li><a href="#requser">需要ldap用户</a></li>
          <li><a href="#reqgroup">需要ldap组</a></li>
          <li><a href="#reqdn">需要ldap-dn</a></li>
          <li><a href="#reqattribute">需要ldap属性</a></li>
          <li><a href="#reqfilter">需要ldap过滤器</a></li>
        </ul>
      </li>

      <li><a href="#examples">例子</a></li>
      <li><a href="#usingtls">使用TLS</a></li>
      <li><a href="#usingssl">使用SSL</a></li>
      <li><a href="#exposed">公开登录信息</a></li>
      <li><a href="#activedirectory">使用活动目录</a></li>
      <li>
        <a href="#frontpage">将Microsoft FrontPage与<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code></a>

        <ul>
          <li><a href="#howitworks">怎么运行的</a></li>
          <li><a href="#fpcaveats">注意事项</a></li>
        </ul>
      </li>
    </ul>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="gcaveats" id="gcaveats">一般警告</a></h2>
<p>此模块根据<code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code>的配置缓存身份验证和授权结果。对后备LDAP服务器所做的更改不会立即反映在HTTP Server上，包括但不限于用户锁定/撤消，密码更改或组成员身份更改。有关缓存可调参数的详细信息，请查阅<code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code>的指令。
</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="operation" id="operation">运作方式</a></h2>

    <p>向用户授予访问权分为两个阶段。第一阶段是身份验证，其中<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>身份验证提供程序验证用户的凭据有效。这也称为<em>搜索/绑定</em>阶段。第二阶段是授权，其中<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>确定是否允许通过身份验证的用户访问所讨论的资源。这也称为<em>比较</em>阶段。</p>

    <p><code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>注册authn_ldap身份验证提供程序和authz_ldap授权处理程序。可以使用<code>ldap</code>值通过<code class="directive"><a href="../mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a></code>指令启用authn_ldap身份验证提供程序。authz_ldap处理程序通过添加<code>ldap-user</code> ， <code>ldap-dn</code>和<code>ldap-group</code>值来扩展<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令的授权类型。</p>

<h3><a name="authenphase" id="authenphase">认证阶段</a></h3>

    <p>在认证阶段， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>在目录中搜索与HTTP客户端传递的用户名匹配的条目。如果找到单个唯一匹配项，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>尝试使用条目的DN和HTTP客户端提供的密码来绑定到目录服务器。因为它先进行搜索，然后进行绑定，所以通常将其称为搜索/绑定阶段。这是在搜索/绑定阶段采取的步骤。</p>

    <ol>
      <li>通过将<code class="directive"><a href="#authldapurl">AuthLDAPURL</a></code>指令中提供的属性和过滤器与HTTP客户端传递的用户名结合起来，生成搜索过滤器。</li>

      <li>使用生成的过滤器搜索目录。如果搜索未完全返回一个条目，请拒绝或拒绝访问。</li>

      <li>获取从搜索中检索到的条目的可分辨名称，并尝试使用该DN和HTTP客户端传递的密码绑定到LDAP服务器。如果绑定失败，请拒绝或拒绝访问。</li>
    </ol>

    <p>在搜索/绑定阶段使用以下指令</p>

    <table>
      
      <tr>
        <td><code class="directive"><a href="#authldapurl">AuthLDAPURL</a></code></td>

        <td>指定LDAP服务器，基本DN，要在搜索中使用的属性以及要使用的其他搜索过滤器。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code></td>

        <td>在搜索阶段要绑定的可选DN。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapbindpassword">AuthLDAPBindPassword</a></code></td>

        <td>在搜索阶段要绑定的可选密码。</td>
      </tr>
    </table>


<h3><a name="authorphase" id="authorphase">授权阶段</a></h3>

    <p>在授权阶段， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>尝试确定用户是否被授权访问资源。其中许多检查都需要<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>在LDAP服务器上执行比较操作。这就是为什么此阶段通常称为比较阶段的原因。 <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>接受以下<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令来确定凭据是否可接受：</p>

    <ul>
      <li>如果存在<a href="#reqgroup"><code>Require ldap-user</code></a>指令，并且该指令中的用户名与客户端传递的用户名匹配，则授予访问权限。</li>

      <li>如果存在<a href="#reqdn"><code>Require ldap-dn</code></a>指令，并且该指令中的DN与从LDAP目录获取的DN匹配，则授予访问权限。</li>

      <li>如果存在<a href="#reqgroup"><code>Require ldap-group</code></a>指令，并且从LDAP目录（或客户端传递的用户名）中提取的DN出现在LDAP组或它的子组之一中，则授予访问权限。</li>

      <li>如果存在<a href="#reqattribute"><code>Require ldap-attribute</code></a>指令，并且从LDAP目录获取的属性与给定值匹配，则授予访问权限。</li>

      <li>如果存在<a href="#reqfilter"><code>Require ldap-filter</code></a>指令，则授予访问权限，并且搜索过滤器成功找到与已认证用户的dn匹配的单个用户对象。</li>

      <li>否则，拒绝或拒绝访问</li>
    </ul>

    <p>也可以使用其他<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>值，这可能需要加载其他授权模块。</p>

    <ul>
        <li>如果存在“ <a href="#requser"><code>Require valid-user</code></a>指令，则授予对所有成功通过身份验证的用户的访问权限。 （需要<code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code> ）</li>

        <li>如果存在<a href="#reqgroup"><code>Require group</code></a>指令，并且已使用<code class="directive"><a href="../mod/mod_authz_groupfile.html#authgroupfile">AuthGroupFile</a></code>指令集加载了<code class="module"><a href="../mod/mod_authz_groupfile.html">mod_authz_groupfile</a></code> ，则授予访问权限。</li>

        <li>其他...</li>
     </ul>


    <p>在比较阶段， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>使用以下指令：</p>

    <table>
      
      <tr>
        <td><code class="directive"><a href="#authldapurl">AuthLDAPURL</a></code> </td>

        <td>URL中指定的属性用于<code>Require ldap-user</code>操作的比较操作。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapcomparednonserver">AuthLDAPCompareDNOnServer</a></code></td>

        <td>确定<code>Require ldap-dn</code>指令的行为。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapgroupattribute">AuthLDAPGroupAttribute</a></code></td>

        <td>确定在<code>Require ldap-group</code>指令中用于比较的属性。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapgroupattributeisdn">AuthLDAPGroupAttributeIsDN</a></code></td>

        <td>指定在对<code>Require ldap-group</code>指令进行比较时是使用用户DN还是用户名。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapmaxsubgroupdepth">AuthLDAPMaxSubGroupDepth</a></code></td>

        <td>确定在<code>Require ldap-group</code>指令中进行比较时要评估的子组的最大深度。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapsubgroupattribute">AuthLDAPSubGroupAttribute</a></code></td>

        <td>确定在<code>Require ldap-group</code>指令中进行比较时获取当前组的子组成员时要使用的属性。</td>
      </tr>

      <tr>
        <td><code class="directive"><a href="#authldapsubgroupclass">AuthLDAPSubGroupClass</a></code></td>

        <td>指定LDAP objectClass值，该值用于在<code>Require ldap-group</code>指令的子组处理期间标识查询的目录对象是否确实是组对象（与用户对象相对）。</td>
      </tr>
    </table>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="requiredirectives" id="requiredirectives">需求指令</a></h2>

    <p>在授权阶段使用Apache的<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令来确保允许用户访问资源。 mod_authnz_ldap使用<code>ldap-user</code> ， <code>ldap-dn</code> ， <code>ldap-group</code> ， <code>ldap-attribute</code>和<code>ldap-filter</code>扩展授权类型。也可以使用其他授权类型，但可能需要加载其他授权模块。</p>

    <p>从v2.4.8开始，LDAP require指令支持<a href="../expr.html">表达式</a> 。</p>

<h3><a name="requser" id="requser">需要ldap用户</a></h3>

    <p><code>Require ldap-user</code>指令指定哪些用户名可以访问资源。一旦<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>从目录中检索了唯一的DN，它将使用<code>Require ldap-user</code>指定的用户名执行LDAP比较操作，以查看该用户名是否为刚获取的LDAP条目的一部分。通过将多个用户名放在行中并用空格分隔，可以授予多个用户访问权限。如果用户名中有空格，则必须用双引号将其引起来。也可以通过使用多个<code>Require ldap-user</code>指令来授予多个用户访问权限，每行一个用户。例如，对于<code>ldap://ldap/o=Example?cn</code>的<code class="directive"><a href="#authldapurl">AuthLDAPURL</a></code> （即<code>cn</code>用于搜索），可以使用以下Require指令来限制访问：</p>
<pre class="prettyprint lang-config">Require ldap-user "Barbara Jenson"
Require ldap-user "Fred User"
Require ldap-user "Joe Manager"</pre>


    <p>由于<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>处理此指令的方式，Barbara Jenson可以以<em>Barbara Jenson</em> ， <em>Babs Jenson</em>或她在LDAP条目中拥有的任何其他<code>cn</code>登录。仅需一条<code>Require ldap-user</code>行即可支持用户条目中属性的所有值。</p>

    <p>如果在上面的URL中使用了<code>uid</code>属性而不是<code>cn</code>属性，则以上三行可以压缩为</p>
<pre class="prettyprint lang-config">Require ldap-user bjenson fuser jmanager</pre>



<h3><a name="reqgroup" id="reqgroup">需要ldap组</a></h3>

    <p>该伪指令指定允许其成员访问的LDAP组。它采用LDAP组的专有名称。注意：组名称不要用引号引起来。例如，假定LDAP目录中存在以下条目：</p>
<div class="example"><pre>dn: cn=Administrators, o=Example
objectClass: groupOfUniqueNames
uniqueMember: cn=Barbara Jenson, o=Example
uniqueMember: cn=Fred User, o=Example</pre></div>

    <p>以下指令将授予对Fred和Barbara的访问权限：</p>
<pre class="prettyprint lang-config">Require ldap-group cn=Administrators, o=Example</pre>


    <p>如果<code class="directive"><a href="#authldapmaxsubgroupdepth">AuthLDAPMaxSubGroupDepth</a></code>设置为大于0的值，则还可以在指定LDAP组的子组中找到成员。例如，假定LDAP目录中存在以下条目：</p>
<div class="example"><pre>dn: cn=Employees, o=Example
objectClass: groupOfUniqueNames
uniqueMember: cn=Managers, o=Example
uniqueMember: cn=Administrators, o=Example
uniqueMember: cn=Users, o=Example

dn: cn=Managers, o=Example
objectClass: groupOfUniqueNames
uniqueMember: cn=Bob Ellis, o=Example
uniqueMember: cn=Tom Jackson, o=Example

dn: cn=Administrators, o=Example
objectClass: groupOfUniqueNames
uniqueMember: cn=Barbara Jenson, o=Example
uniqueMember: cn=Fred User, o=Example

dn: cn=Users, o=Example
objectClass: groupOfUniqueNames
uniqueMember: cn=Allan Jefferson, o=Example
uniqueMember: cn=Paul Tilley, o=Example
uniqueMember: cn=Temporary Employees, o=Example

dn: cn=Temporary Employees, o=Example
objectClass: groupOfUniqueNames
uniqueMember: cn=Jim Swenson, o=Example
uniqueMember: cn=Elliot Rhodes, o=Example</pre></div>

    <p>以下指令将允许访问Bob Ellis，Tom Jackson，Barbara Jenson，Fred User，Allan Jefferson和Paul Tilley，但不允许访问Jim Swenson或Elliot Rhodes（因为它们的子组深度为2） ：</p>
<pre class="prettyprint lang-config">Require ldap-group cn=Employees, o=Example
AuthLDAPMaxSubGroupDepth 1</pre>


    <p>该指令的行为由<code class="directive"><a href="#authldapgroupattribute">AuthLDAPGroupAttribute</a></code> ， <code class="directive"><a href="#authldapgroupattributeisdn">AuthLDAPGroupAttributeIsDN</a></code> ， <code class="directive"><a href="#authldapmaxsubgroupdepth">AuthLDAPMaxSubGroupDepth</a></code> ， <code class="directive"><a href="#authldapsubgroupattribute">AuthLDAPSubGroupAttribute</a></code>和<code class="directive"><a href="#authldapsubgroupclass">AuthLDAPSubGroupClass</a></code>指令修改。</p>


<h3><a name="reqdn" id="reqdn">需要ldap-dn</a></h3>

    <p><code>Require ldap-dn</code>指令允许管理员根据专有名称授予访问权限。它指定必须匹配才能授予访问权限的DN。如果从目录服务器检索到的专有名称与<code>Require ldap-dn</code>中的专有名称匹配，则将授予授权。注意：专有名称不要用引号引起来。</p>

    <p>以下指令将授予对特定DN的访问权限：</p>
<pre class="prettyprint lang-config">Require ldap-dn cn=Barbara Jenson, o=Example</pre>


    <p>该指令的行为由<code class="directive"><a href="#authldapcomparednonserver">AuthLDAPCompareDNOnServer</a></code>指令修改。</p>


<h3><a name="reqattribute" id="reqattribute">需要ldap属性</a></h3>

    <p><code>Require ldap-attribute</code>指令允许管理员基于LDAP目录中经过身份验证的用户的属性来授予访问权限。如果目录中的属性与配置中给定的值匹配，则授予访问权限。</p>

    <p>以下指令将授予具有employeeType = active属性的任何人访问权限</p>

    <pre class="prettyprint lang-config">Require ldap-attribute employeeType="active"</pre>


    <p>可以在同一行上用空格分隔指定多个属性/值对，或者可以在多个<code>Require ldap-attribute</code>指令中指定它们。列出多个属性/值对的效果是“或”运算。如果任何列出的属性值与用户对象中相应属性的值匹配，将授予访问权限。如果属性的值包含空格，则仅该值必须在双引号内。</p>

    <p>以下指令将授予具有city属性等于“ San Jose”或status等于“ Active”的任何人的访问权限</p>

    <pre class="prettyprint lang-config">Require ldap-attribute city="San Jose" status="active"</pre>




<h3><a name="reqfilter" id="reqfilter">需要ldap过滤器</a></h3>

    <p><code>Require ldap-filter</code>指令允许管理员基于复杂的LDAP搜索过滤器授予访问权限。如果过滤器搜索返回的dn与经过身份验证的用户dn匹配，则授予访问权限。</p>

    <p>以下指令将授予拥有手机且在市场部门的任何人访问权限</p>

    <pre class="prettyprint lang-config">Require ldap-filter "&amp;(cell=*)(department=marketing)"</pre>


    <p>的之间的差<code>Require ldap-filter</code>指令和<code>Require ldap-attribute</code>指令是<code>ldap-filter</code>进行使用所述指定的搜索过滤器，而不是一个简单的属性比较LDAP目录的搜索操作。如果仅需要简单的属性比较，则<code>ldap-attribute</code>执行的比较操作将比<code>ldap-filter</code>使用的搜索操作更快，尤其是在大型目录中。</p>



</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="examples" id="examples">例子</a></h2>

    <ul>
      <li>使用其UID进行搜索，将访问权限授予LDAP目录中存在的任何人。
<pre class="prettyprint lang-config">AuthLDAPURL "ldap://ldap1.example.com:389/ou=People, o=Example?uid?sub?(objectClass=*)"
Require valid-user</pre>

      </li>

      <li>下一个示例与上述相同；但是省略了具有有用默认值的字段。另外，请注意使用冗余LDAP服务器。
<pre class="prettyprint lang-config">AuthLDAPURL "ldap://ldap1.example.com ldap2.example.com/ou=People, o=Example"
Require valid-user</pre>

      </li>

      <li>下一个示例与上一个示例相似，但是使用通用名称而不是UID。请注意，如果目录中的多个人共享同一<code>cn</code> ，则可能会出现问题，因为对<code>cn</code>的搜索<strong>必须</strong>恰好返回一个条目。这就是为什么不推荐这种方法的原因：最好选择一个在目录中保证唯一的属性，例如<code>uid</code> 。
<pre class="prettyprint lang-config">AuthLDAPURL "ldap://ldap.example.com/ou=People, o=Example?cn"
Require valid-user</pre>

      </li>

      <li>将访问权限授予Administrators组中的任何人。用户必须使用其UID进行身份验证。<pre class="prettyprint lang-config">AuthLDAPURL ldap://ldap.example.com/o=Example?uid
Require ldap-group cn=Administrators, o=Example</pre>

      </li>

      <li>向组中名称与虚拟主机的主机名匹配的任何人授予访问权限。在此示例中，使用<a href="../expr.html">表达式</a>构建过滤器。
<pre class="prettyprint lang-config">AuthLDAPURL ldap://ldap.example.com/o=Example?uid
Require ldap-group cn=%{SERVER_NAME}, o=Example</pre>

      </li>

      <li>下一个示例假定Example中所有携带字母数字寻呼机的人的LDAP属性均为<code>qpagePagerID</code> 。该示例仅向具有字母数字寻呼机的人员（通过其UID进行身份验证）授予访问权限：<pre class="prettyprint lang-config">AuthLDAPURL ldap://ldap.example.com/o=Example?uid??(qpagePagerID=*)
Require valid-user</pre>

      </li>

      <li>
        <p>下一个示例演示了使用过滤器来完成复杂的管理要求的功能。如果没有过滤器，则必须创建一个新的LDAP组并确保该组的成员与寻呼机用户保持同步。这对于过滤器来说是微不足道的。目标是向拥有寻呼机的任何人授予访问权限，再向没有寻呼机但需要访问相同资源的Joe Manager授予访问权限：</p>
<pre class="prettyprint lang-config">AuthLDAPURL ldap://ldap.example.com/o=Example?uid??(|(qpagePagerID=*)(uid=jmanager))
Require valid-user</pre>


        <p>刚开始时，这最后看起来可能会令人困惑，因此，它有助于根据谁的联系来评估搜索过滤器的外观，如下所示。如果Fred用户作为<code>fuser</code>连接，过滤器看起来像</p>

        <div class="example"><p><code>（＆（|（qpagePagerID = *）（uid = jmanager））（uid = fuser））</code></p></div>

        <p>只有在<em>定影器</em>具有寻呼机的情况下，以上搜索才会成功。当Joe Manager以<em>jmanager身份</em>连接时，过滤器看起来像</p>

        <div class="example"><p><code>（＆（|（qpagePagerID = *）（uid = jmanager））（uid = jmanager））</code></p></div>

        <p>无论<em>jmanager</em>是否具有寻呼机，上述搜索都将成功。</p>
      </li>
    </ul>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="usingtls" id="usingtls">使用TLS</a></h2>

    <p>要使用TLS，请参阅<code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code>指令<code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedclientcert">LDAPTrustedClientCert</a></code> ， <code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedglobalcert">LDAPTrustedGlobalCert</a></code>和<code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedmode">LDAPTrustedMode</a></code> 。</p>

    <p>可以将可选的第二个参数添加到<code class="directive"><a href="#authldapurl">AuthLDAPURL</a></code>以覆盖<code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedmode">LDAPTrustedMode</a></code>设置的默认连接类型。这将使由<em>ldap：//</em> Url建立的连接升级为同一端口上的安全连接。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="usingssl" id="usingssl">使用SSL</a></h2>

    <p>要使用SSL，请参见<code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code>指令<code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedclientcert">LDAPTrustedClientCert</a></code> ， <code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedglobalcert">LDAPTrustedGlobalCert</a></code>和<code class="directive"><a href="../mod/mod_ldap.html#ldaptrustedmode">LDAPTrustedMode</a></code> 。</p>

    <p>要指定安全的LDAP服务器，请在<code class="directive"><a href="#authldapurl">AuthLDAPURL</a></code>指令中使用<em>ldaps：//</em>而不是<em>ldap：//</em> 。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="exposed" id="exposed">公开登录信息</a></h2>

    <p>当此模块执行<em>身份验证时</em> ， <code class="directive"><a href="#authldapurl">authldapurl</a></code>指令中指定的ldap属性将放在带有前缀“ AUTHENTICATE_”的环境变量中。</p>

    <p>当此模块执行<em>授权时</em> ， <code class="directive"><a href="#authldapurl">authldapurl</a></code>指令中指定的ldap属性将放置在带有前缀“ AUTHORIZE_”的环境变量中。</p>

    <p>如果属性字段包含用户名，用户的通用名称和电话号码，则CGI程序将有权访问此信息，而无需进行第二次独立的LDAP查询来收集此附加信息。</p>

    <p>这有可能极大简化某些Web应用程序中所需的编码和配置。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="activedirectory" id="activedirectory">使用活动目录</a></h2>

    <p>Active Directory安装可能同时支持多个域。为了在域之间区分用户，可以将名为“用户主体名称”（UPN）的标识符添加到目录中的用户条目。该UPN通常采用用户帐户名的形式，后跟特定域的域组件，例如<em>somebody@nz.example.com</em> 。</p>

    <p>您可能希望配置<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>模块，以对组成Active Directory林的任何域中存在的用户进行身份验证。这样，可以同时使用同一查询对<em>somebody@nz.example.com</em>和<em>someone@au.example.com</em>进行身份验证。</p>

    <p>为了使之实用，Active Directory支持全局编录的概念。此全局编录是Active Directory林中所有Active Directory服务器的选定属性的只读副本。通过查询全局目录，可以在单个查询中查询所有域，而查询不会跨服务器访问速度较慢的链接。</p>

    <p>如果启用，则全局编录是运行在端口3268（对于SSL为3269）上的独立目录服务器。要搜索用户，请在子树中使用空的搜索根搜索属性<em>userPrincipalName</em> ，如下所示：</p>

<pre class="prettyprint lang-config">AuthLDAPBindDN apache@example.com
AuthLDAPBindPassword password
AuthLDAPURL ldap://10.0.0.1:3268/?userPrincipalName?sub</pre>


    <p>用户将需要输入他们的用户主体名称作为登录名，形式为<em>somebody@nz.example.com</em> 。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="frontpage" id="frontpage">将Microsoft FrontPage与mod_authnz_ldap一起使用</a></h2>

    <p>通常，FrontPage使用特定于FrontPage Web的用户/组文件（即<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>和<code class="module"><a href="../mod/mod_authz_groupfile.html">mod_authz_groupfile</a></code>模块）来处理所有身份验证。不幸的是，不可能仅通过添加适当的指令而更改为LDAP身份验证，因为这将破坏FrontPage客户端中的<em>Permissions</em>表单，该表单试图修改基于文本的标准授权文件。</p>

    <p>创建FrontPage网站后，向其添加LDAP身份验证就是向在网站中创建的<em>每个</em> <code>.htaccess</code>文件添加以下指令的问题</p>
<pre class="prettyprint lang-config">AuthLDAPURL       "the url"
AuthGroupFile     "mygroupfile"
Require group     "mygroupfile"</pre>


<h3><a name="howitworks" id="howitworks">怎么运行的</a></h3>

    <p>FrontPage通过将<code>Require valid-user</code>指令添加到<code>.htaccess</code>文件来限制对Web的访问。对于<em>LDAP而言</em> ，任何<code>Require valid-user</code>都将<code>Require valid-user</code>指令。这意味着在LDAP目录中具有条目的任何人都被视为有效用户，而FrontPage仅将本地用户文件中的那些人视为有效用户。通过用组文件授权替换ldap-group，允许Apache在处理授权用户时查阅本地用户文件（由FrontPage管理），而不是LDAP。</p>

    <p>如上指定添加指令后，FrontPage用户将能够从FrontPage客户端执行所有管理操作。</p>


<h3><a name="fpcaveats" id="fpcaveats">注意事项</a></h3>

    <ul>
      <li>选择LDAP URL时，用于身份验证的属性应该是对放入<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>用户文件中同样有效的属性。用户ID是理想的选择。</li>

      <li>通过FrontPage添加用户时，FrontPage管理员应选择LDAP目录中已经存在的用户名（出于明显的原因）。而且，管理员输入表单的密码也将被忽略，因为Apache实际上将根据LDAP数据库中的密码而不是本地用户文件中的密码进行身份验证。这可能会引起Web管理员的困惑。</li>

      
      <li>为了使用FrontPage支持，必须使用<code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code> ， <code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>和<code class="module"><a href="../mod/mod_authz_groupfile.html">mod_authz_groupfile</a></code>编译Apache。这是因为Apache仍将使用<code class="module"><a href="../mod/mod_authz_groupfile.html">mod_authz_groupfile</a></code>组文件来确定用户对FrontPage网站的访问范围。</li>

      <li>指令必须放在<code>.htaccess</code>文件中。尝试将它们放入<code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code>或<code class="directive"><a href="../mod/core.html#directory">&lt;Directory&gt;</a></code>指令中将不起作用。这是因为<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>必须能够获取FrontPage <code>.htaccess</code>文件中找到的<code class="directive"><a href="../mod/mod_authz_groupfile.html#authgroupfile">AuthGroupFile</a></code>指令，以便它知道在哪里寻找有效的用户列表。如果<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>指令与FrontPage指令不在同一个<code>.htaccess</code>文件中，则该破解将不起作用，因为<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将永远没有机会处理<code>.htaccess</code>文件，并且将无法找到FrontPage管理的用户文件。</li>
    </ul>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPAuthorizePrefix" id="AuthLDAPAuthorizePrefix">AuthLDAPAuthorizePrefix</a> <a name="authldapauthorizeprefix" id="authldapauthorizeprefix">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>指定授权期间设置的环境变量的前缀</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPAuthorizePrefix <em>前缀</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPAuthorizePrefix AUTHORIZE_</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.6版和更高版本中可用</td></tr>
</table>
    <p>此伪指令使您可以覆盖在LDAP授权期间用于环境变量设置的前缀。如果指定了<em>AUTHENTICATE_，</em>则这些环境变量的使用者将看到相同的信息，而LDAP是否执行了身份验证，授权或同时执行了两者。</p>

    <div class="note"><h3>注意</h3>根据<code>Require valid-user</code>对用户进行授权时，未设置任何授权变量。
    </div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPBindAuthoritative" id="AuthLDAPBindAuthoritative">AuthLDAPBind权威</a> <a name="authldapbindauthoritative" id="authldapbindauthoritative">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定当可以将用户映射到DN但服务器无法成功绑定用户凭据时是否使用其他身份验证提供程序。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPBindAuthoritative关闭|打开</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPBindAuthoritative于</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>默认情况下，仅当无法将用户映射到DN时才查询后续身份验证提供程序，但如果可以将用户映射到DN且无法使用LDAP绑定验证其密码就不会查询。如果<code class="directive">AuthLDAPBindAuthoritative</code>设置为<em>off</em> ，则其他配置的身份验证模块将有机会验证LDAP绑定（使用当前用户的凭据）由于某种原因而失败的用户。</p>
    <p>这允许LDAP和<code class="directive"><a href="../mod/mod_authn_file.html#authuserfile">AuthUserFile</a></code>中都存在的用户在LDAP服务器可用但用户帐户被锁定或否则无法使用密码时进行身份验证。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/mod_authn_file.html#authuserfile">AuthUserFile</a></code></li>
<li><code class="directive"><a href="../mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPBindDN" id="AuthLDAPBindDN">AuthLDAPBindDN</a> <a name="authldapbinddn" id="authldapbinddn">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>绑定到LDAP服务器时使用的可选DN</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPBindDN <em>专有名称</em></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>搜索条目时用于绑定到服务器的可选DN。如果未提供， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将使用匿名绑定。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPBindPassword" id="AuthLDAPBindPassword">AuthLDAPBindPassword</a> <a name="authldapbindpassword" id="authldapbindpassword">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>与绑定DN结合使用的密码</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPBindPassword <em>密码</em></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td><em>exec：</em>在2.4.5中添加。</td></tr>
</table>
    <p>与绑定DN结合使用的绑定密码。请注意，绑定密码可能是敏感数据，应予以适当保护。仅在绝对需要它们搜索目录时，才应使用<code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code>和<code class="directive">AuthLDAPBindPassword</code> 。</p>

    <p>如果该值以exec开头：将会执行结果命令，并且程序返回到标准输出的第一行将用作密码。</p>
<pre class="prettyprint lang-config">#Password used as-is
AuthLDAPBindPassword secret

#Run /path/to/program to get my password
AuthLDAPBindPassword exec:/path/to/program

#Run /path/to/otherProgram and provide arguments
AuthLDAPBindPassword "exec:/path/to/otherProgram argument1"</pre>



</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPCharsetConfig" id="AuthLDAPCharsetConfig">AuthLDAPCharsetConfig</a> <a name="authldapcharsetconfig" id="authldapcharsetconfig">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>字符集转换配置文件的语言</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPCharsetConfig <em>文件路径</em></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p><code class="directive">AuthLDAPCharsetConfig</code>伪指令将语言的位置设置为字符集转换配置文件。<var>文件路径</var>是相对于<code class="directive"><a href="../mod/core.html#serverroot">ServerRoot</a></code> 。该文件指定字符集的语言扩展列表。大多数管理员使用提供的<code>charset.conv</code>文件，该文件将公共语言扩展名与字符集相关联。</p>

    <p>该文件包含以下格式的行：</p>

    <div class="example"><p><code>
      <var>语言扩展</var> <var>字符集</var> [ <var>Language-String</var> ] ...
    </code></p></div>

    <p>扩展名的大小写无关紧要。空行和以井号（ <code>#</code> ）开头的行将被忽略。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPCompareAsUser" id="AuthLDAPCompareAsUser">AuthLDAPCompareAsUser</a> <a name="authldapcompareasuser" id="authldapcompareasuser">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用经过身份验证的用户的凭据执行授权比较</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPCompareAsUser开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPCompareAsUser关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.6版和更高版本中可用</td></tr>
</table>
    <p>设置后，且<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>已对用户进行身份验证，用于授权的LDAP比较将使用身份验证用户的查询专有名称（DN）和HTTP基本身份验证密码，而不是服务器配置的凭据。</p>

    <p><em>ldap-attribute</em> ， <em>ldap-user</em>和<em>ldap-group</em> （仅单级）授权检查使用比较。</p>

    <p>当还启用<code class="directive"><a href="#authldapsearchasuser">AuthLDAPSearchAsUser</a></code>时，此伪指令仅对嵌套组处理期间执行的比较有效。</p>

    <p>仅当LDAP服务器不接受匿名比较并且您不能使用专用的<code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code>时，才应使用此伪指令。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#authldapinitialbindasuser">AuthLDAPInitialBindAsUser</a></code></li>
<li><code class="directive"><a href="#authldapsearchasuser">AuthLDAPSearchAsUser</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPCompareDNOnServer" id="AuthLDAPCompareDNOnServer">AuthLDAPCompareDNOnServer</a> <a name="authldapcomparednonserver" id="authldapcomparednonserver">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用LDAP服务器比较DN</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPCompareDNOnServer开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPCompareDNOnServer在</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>设置后， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将使用LDAP服务器比较DN。这是比较DN的唯一简单方法。 <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将在目录中搜索使用<a href="#reqdn"><code>Require dn</code></a>指令指定的<a href="#reqdn"><code>Require dn</code></a> ，然后检索DN并将其与从用户条目中检索的DN进行比较。如果未设置此指令，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>只是进行字符串比较。通过这种方法可能会得到假阴性，但速度要快得多。请注意，在大多数情况下， <code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code>缓存可以加快DN比较。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPDereferenceAliases" id="AuthLDAPDereferenceAliases">AuthLDAPDereferenceAliases</a> <a name="authldapdereferencealiases" id="authldapdereferencealiases">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>模块何时取消引用别名</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPDereferenceAliases永不|搜索|查找|始终</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPDereferenceAliases始终</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>该伪指令指定在LDAP操作期间何时<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>取消引用别名。默认值<code>always</code> 。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPGroupAttribute" id="AuthLDAPGroupAttribute">AuthLDAPGroupAttribute</a> <a name="authldapgroupattribute" id="authldapgroupattribute">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>LDAP属性用于标识组的用户成员。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPGroupAttribute <em>属性</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPGroupAttribute成员uniquemember</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>此伪指令指定使用哪些LDAP属性来检查组中的用户成员。通过多次指定此伪指令可以使用多个属性。如果未指定，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>使用<code>member</code>和<code>uniquemember</code>属性。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPGroupAttributeIsDN" id="AuthLDAPGroupAttributeIsDN">AuthLDAPGroupAttributeIsDN</a> <a name="authldapgroupattributeisdn" id="authldapgroupattributeisdn">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>检查组成员身份时使用客户端用户名的DN</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPGroupAttributeIsDN开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPGroupAttributeIsDN在</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>设置为<code>on</code> ，此指令表示在检查组成员身份时使用客户端用户名的专有名称。否则，将使用用户名。例如，假设客户端发送了用户名<code>bjenson</code> ，该用户名对应于LDAP DN <code>cn=Babs Jenson, o=Example</code> 。如果设置了此指令，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将检查该组是否具有<code>cn=Babs Jenson, o=Example</code>作为成员。如果未设置此指令，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将检查该组是否具有<code>bjenson</code>作为成员。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPInitialBindAsUser" id="AuthLDAPInitialBindAsUser">AuthLDAPInitialBindAsUser</a> <a name="authldapinitialbindasuser" id="authldapinitialbindasuser">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定服务器是否使用基本身份验证用户自己的用户名而不是匿名或使用服务器的硬编码凭据来执行初始DN查找</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPInitialBindAsUser关闭|打开</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPInitialBindAsUser关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.6版和更高版本中可用</td></tr>
</table>
    <p>默认情况下，服务器将匿名身份验证或使用专用用户名和密码将基本身份验证用户名转换为LDAP专有名称（DN）。该指令强制服务器使用传入用户提供的逐字用户名和密码来执行初始DN搜索。</p>

     <p>如果逐字用户名不能直接绑定，但是需要一些修饰，请参阅<code class="directive"><a href="#authldapinitialbindpattern">AuthLDAPInitialBindPattern</a></code> 。</p>

     <p>仅当LDAP服务器不接受匿名搜索并且您不能使用专用的<code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code>时，才应使用此伪指令。</p>

     <div class="note"><h3>不适用于仅授权</h3>仅当此模块对用户进行身份验证时，才可以使用此伪指令；而当该模块专门用于授权时，则无效。
     </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#authldapinitialbindpattern">AuthLDAPInitialBindPattern</a></code></li>
<li><code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code></li>
<li><code class="directive"><a href="#authldapcompareasuser">AuthLDAPCompareAsUser</a></code></li>
<li><code class="directive"><a href="#authldapsearchasuser">AuthLDAPSearchAsUser</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPInitialBindPattern" id="AuthLDAPInitialBindPattern">AuthLDAPInitialBindPattern</a> <a name="authldapinitialbindpattern" id="authldapinitialbindpattern">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>指定绑定到LDAP服务器以执行DN查找时要使用的基本身份验证用户名的转换</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPInitialBindPattern <em><var>正则表达式</var> <var>替换</var></em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPInitialBindPattern（。*）$ 1（逐字使用远程用户名）</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.6版和更高版本中可用</td></tr>
</table>
    <p>如果<code class="directive"><a href="#authldapinitialbindasuser">AuthLDAPInitialBindAsUser</a></code>设置为<em>ON</em> ，则将根据正则表达式和替换参数来转换基本身份验证用户名。</p>

    <p>将正则表达式参数与当前的基本身份验证用户名进行比较。替换参数可以包含反向引用，但没有其他变量插值。</p>

    <p>仅当LDAP服务器不接受匿名搜索并且您不能使用专用的<code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code>时，才应使用此伪指令。</p>

    <pre class="prettyprint lang-config">AuthLDAPInitialBindPattern (.+) $1@example.com</pre>

    <pre class="prettyprint lang-config">AuthLDAPInitialBindPattern (.+) cn=$1,dc=example,dc=com</pre>


    <div class="note"><h3>不适用于仅授权</h3>仅当此模块对用户进行身份验证时，才可以使用此伪指令；而当该模块专门用于授权时，则无效。
    </div>
    <div class="note"><h3>调试</h3>替换的DN记录在环境变量<em>LDAP_BINDASUSER中</em> 。如果正则表达式与输入不匹配，则使用逐字用户名。
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#authldapinitialbindasuser">AuthLDAPInitialBindAsUser</a></code></li>
<li><code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPMaxSubGroupDepth" id="AuthLDAPMaxSubGroupDepth">AuthLDAPMaxSubGroupDepth</a> <a name="authldapmaxsubgroupdepth" id="authldapmaxsubgroupdepth">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>指定在中断用户搜索之前将评估的最大子组嵌套深度。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPMaxSubGroupDepth <var>编号</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPMaxSubGroupDepth 10</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.0版和更高版本中可用</td></tr>
</table>
   <p>当此指令设置为非零值<code>X</code>并结合使用<code>Require ldap-group someGroupDN</code>指令时，将搜索提供的用户凭据作为<code>someGroupDN</code>目录对象的成员或当前组的任何组成员。到此指令指定的最大嵌套级别<code>X</code></p>
   <p>有关更多详细示例，请参见“ <a href="#reqgroup"><code>Require ldap-group</code></a>部分。</p>

   <div class="note"><h3>巢状小组的表现</h3>
   <p>当<code class="directive">AuthLDAPSubGroupAttribute</code>与重叠<code class="directive">AuthLDAPGroupAttribute</code> （因为它在默认情况下，并通过共同的LDAP模式根据需要），中大集团未缓存搜索的分组可能会很慢。如果使用大的非嵌套组，请将<code class="directive">AuthLDAPMaxSubGroupDepth</code>设置为零。</p>
   </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPRemoteUserAttribute" id="AuthLDAPRemoteUserAttribute">AuthLDAPRemoteUserAttribute</a> <a name="authldapremoteuserattribute" id="authldapremoteuserattribute">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用在用户查询期间返回的属性的值来设置REMOTE_USER环境变量</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPRemoteUserAttribute uid</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>如果设置了此伪指令，则<code>REMOTE_USER</code>环境变量的值将设置为指定的属性的值。确保此属性包含在AuthLDAPUrl定义的属性列表中，否则此伪指令将无效。该指令（如果存在）优先于<code class="directive"><a href="#authldapremoteuserisdn">AuthLDAPRemoteUserIsDN</a></code> 。如果您希望人们使用电子邮件地址登录网站，但是后端应用程序将用户名用作用户标识，则此指令很有用。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPRemoteUserIsDN" id="AuthLDAPRemoteUserIsDN">AuthLDAPRemoteUserIsDN</a> <a name="authldapremoteuserisdn" id="authldapremoteuserisdn">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用客户端用户名的DN设置REMOTE_USER环境变量</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPRemoteUserIsDN开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPRemoteUserIsDN关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>如果此指令设置为on，则<code>REMOTE_USER</code>环境变量的值将设置为已认证用户的完整专有名称，而不仅仅是客户端传递的用户名。默认情况下处于关闭状态。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPSearchAsUser" id="AuthLDAPSearchAsUser">AuthLDAPSearchAsUser</a> <a name="authldapsearchasuser" id="authldapsearchasuser">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用经过身份验证的用户的凭据执行授权搜索</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPSearchAsUser开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPSearchAsUser关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.6版和更高版本中可用</td></tr>
</table>
    <p>设置后，且<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>已对用户进行身份验证，则LDAP搜索将使用经过身份验证的用户的查询专有名称（DN）和HTTP基本身份验证密码，而不是服务器配置的凭据。</p>

    <p><em>ldap-filter</em>和<em>ldap-dn</em>授权检查使用搜索。</p>

    <p>当还启用<code class="directive"><a href="#authldapcompareasuser">AuthLDAPCompareAsUser</a></code>时，此伪指令仅对嵌套组处理期间执行的比较有效。</p>

    <p>仅当LDAP服务器不接受匿名搜索并且您不能使用专用的<code class="directive"><a href="#authldapbinddn">AuthLDAPBindDN</a></code>时，才应使用此伪指令。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#authldapinitialbindasuser">AuthLDAPInitialBindAsUser</a></code></li>
<li><code class="directive"><a href="#authldapcompareasuser">AuthLDAPCompareAsUser</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPSubGroupAttribute" id="AuthLDAPSubGroupAttribute">AuthLDAPSubGroupAttribute</a> <a name="authldapsubgroupattribute" id="authldapsubgroupattribute">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>指定属性标签（每条指令行一个值），用于区分当前组中属于组的成员。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPSubGroupAttribute <em>属性</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPSubgroupAttribute成员uniquemember</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.0版和更高版本中可用</td></tr>
</table>
    <p>LDAP组对象可以包含作为用户的成员和作为组的成员（称为嵌套或子组）。<code class="directive">AuthLDAPSubGroupAttribute</code>指令标识组成员的标签，而<code class="directive"><a href="#authldapgroupattribute">AuthLDAPGroupAttribute</a></code>指令标识用户成员的标签。通过多次指定此伪指令可以使用多个属性。如果未指定，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>使用<code>member</code>和<code>uniqueMember</code>属性。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPSubGroupClass" id="AuthLDAPSubGroupClass">AuthLDAPSubGroupClass</a> <a name="authldapsubgroupclass" id="authldapsubgroupclass">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>指定哪些LDAP objectClass值标识在子组处理期间作为组的目录对象。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPSubGroupClass <em>LdapObjectClass</em></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthLDAPSubGroupClass groupOfNames groupOfUniqueNames</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.0版和更高版本中可用</td></tr>
</table>
    <p>LDAP组对象可以包含作为用户的成员和作为组的成员（称为嵌套或子组）。<code class="directive"><a href="#authldapsubgroupattribute">AuthLDAPSubGroupAttribute</a></code>伪指令标识可能是当前组子组的成员的标签（与用户成员相对）。<code class="directive">AuthLDAPSubGroupClass</code>指令指定用于验证这些潜在子组实际上是组对象的LDAP objectClass值。然后可以在经过验证的小组中搜索更多的用户或小组成员。通过多次指定此伪指令可以使用多个属性。如果未指定，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>使用<code>groupOfNames</code>和<code>groupOfUniqueNames</code>值。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthLDAPUrl" id="AuthLDAPUrl">AuthLDAPUrl</a> <a name="authldapurl" id="authldapurl">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>指定LDAP搜索参数的URL</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthLDAPUrl <em>网址[NONE | SSL | TLS | STARTTLS]</em></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_authnz_ldap</td></tr>
</table>
    <p>RFC 2255 URL，用于指定要使用的LDAP搜索参数。URL的语法是</p>
<div class="example"><p><code>ldap：// host：port / basedn？attribute？scope？filter</code></p></div>
    <p>如果要指定Apache应该依次尝试的多个LDAP URL，则语法为：</p>
<pre class="prettyprint lang-config">AuthLDAPUrl "ldap://ldap1.example.com ldap2.example.com/dc=..."</pre>

<p><em><strong>注意：</strong>如果指定多个服务器，则需要将整个URL字符串括在引号中；否则会出现错误：“ AuthLDAPURL接受一个参数，URL定义LDAP连接。。”</em>当然，您可以在每个参数上使用搜索参数。</p>

<dl>
<dt>ldap</dt>

        <dd>对于常规ldap，请使用字符串<code>ldap</code> 。对于安全的LDAP，请改用<code>ldaps</code> 。仅当Apache链接到具有SSL支持的LDAP库时，安全LDAP才可用。</dd>

<dt>主机：端口</dt>

        <dd>
          <p>LDAP服务器的名称/端口（默认为<code>localhost:389</code>为<code>ldap</code> ，和<code>localhost:636</code>为<code>ldaps</code> ）。要指定多个冗余LDAP服务器，只需列出所有服务器，并用空格分隔即可。 <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将尝试依次连接到每个服务器，直到建立成功连接为止。如果指定了多个ldap服务器，则必须将整个LDAP URL封装在双引号中。</p>

          <p>与服务器建立连接后，该连接将在<code class="program"><a href="../programs/httpd.html">httpd</a></code>进程的整个生命周期内保持活动状态，或者直到LDAP服务器关闭为止。</p>

          <p>如果LDAP服务器出现故障并断开了现有连接，则<code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>将尝试从主服务器开始依次尝试重新连接，然后尝试重新连接每个冗余服务器。请注意，这与真正的循环搜索不同。</p>
        </dd>

<dt>基于</dt>

        <dd>所有搜索应从其开始的目录分支的DN。至少，这必须是目录树的顶部，但也可以在目录中指定子树。</dd>

<dt>属性</dt>

        <dd>要搜索的属性。尽管RFC 2255允许使用逗号分隔的属性列表，但无论提供多少属性，都只会使用第一个属性。如果未提供任何属性，则默认为使用<code>uid</code> 。选择一个在您要使用的子树中的所有条目中都是唯一的属性是一个好主意。列出的所有属性都将以AUTHENTICATE_前缀放入环境中，以供其他模块使用。</dd>

<dt>范围</dt>

        <dd>搜索范围。可以是<code>one</code>或<code>sub</code> 。请注意，RFC 2255也支持<code>base</code>范围，但此模块不支持<code>base</code>范围。如果未提供范围，或者指定了<code>base</code>范围，则默认为使用<code>sub</code>的范围。</dd>

<dt>过滤</dt>

        <dd>有效的LDAP搜索过滤器。如果未提供，则默认为<code>(objectClass=*)</code> ，它将搜索树中的所有对象。过滤器限制为大约8000个字符（Apache源代码中<code>MAX_STRING_LEN</code>的定义）。对于任何应用程序，这应该绰绰有余。在2.4.10及更高版本中，关键字<code>none</code>禁止使用过滤器；这是某些原始LDAP服务器所必需的。</dd>
</dl>

    <p>执行搜索时，将HTTP客户端传递的属性，过滤器和用户名组合在一起，以创建一个看起来像<code>(&amp;( <em>filter</em> )( <em>attribute</em> = <em>username</em> ))</code>的搜索过滤器。</p>

    <p>例如，考虑URL为<code>ldap://ldap.example.com/o=Example?cn?sub?(posixid=*)</code> 。当客户端尝试使用<code>Babs Jenson</code>的用户名进行连接时，结果搜索过滤器将为<code>(&amp;(posixid=*)(cn=Babs Jenson))</code> 。</p>

    <p>可以添加可选参数以允许LDAP Url覆盖连接类型。此参数可以是以下之一：</p>

<dl>
    <dt>没有</dt>
        <dd>在默认LDAP端口上建立不安全的连接。这与端口389上的<code>ldap://</code>相同。</dd>
    <dt>SSL协议</dt>
        <dd>在默认的安全LDAP端口上建立安全连接。这与<code>ldaps://</code>相同</dd>
    <dt>TLS | STARTTLS</dt>
        <dd>在默认LDAP端口上建立升级的安全连接。默认情况下，此连接将在端口389上启动，然后升级到同一端口上的安全连接。</dd>
</dl>

    <p>有关<code class="directive"><a href="#authldapurl">AuthLDAPUrl</a></code> URL的示例，请参见上文。</p>

</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>