<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_xml2enc-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_xml2enc</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>对基于libxml2的过滤器模块的增强的字符集/国际化支持</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>xml2enc_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_xml2enc.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>2.4版及更高版本。作为2.2.x版本的第三方模块可用</td></tr></table>
<h3>摘要</h3>

    <p>该模块为标记识别过滤器模块（例如<code class="module"><a href="../mod/mod_proxy_html.html">mod_proxy_html</a></code>提供增强的国际化支持。它可以自动检测输入数据的编码，并确保它们由<a href="http://xmlsoft.org/">libxml2</a>解析器正确处理，包括在必要时转换为Unicode（UTF-8）。它也可以在标记处理后将数据转换为选择的编码，并确保在HTTP <var>Content-Type</var>标头中设置了正确的<var>字符集</var>值。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#usage">用法</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#api">编程API</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#sniffing">检测编码</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#output">输出编码</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#alias">不支持的编码</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#xml2encalias">xml2EncAlias</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#xml2encdefault">xml2EncDefault</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#xml2startparse">xml2StartParse</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_xml2enc">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_xml2enc">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="usage" id="usage">用法</a></h2>
    <p>有两种使用情况：编程为可与mod_xml2enc一起使用的模块，以及不知道该模块的模块：</p>
    <dl>
    <dt>为mod_xml2enc启用了过滤器模块</dt><dd>
    <p>诸如<code class="module"><a href="../mod/mod_proxy_html.html">mod_proxy_html</a></code>版本3.1及更高版本之类的模块使用<code>xml2enc_charset</code>可选函数来检索charset参数，以传递给libxml2解析器，并且可以使用<code>xml2enc_filter</code>可选函数来后处理为另一种编码。将mod_xml2enc与启用的模块一起使用，无需进行配置：另一个模块将为您配置mod_xml2enc（尽管您可能仍想使用以下配置指令来自定义它）。</p>
    </dd>
    <dt>未启用的模块</dt><dd>
    <p>要将其与未明确为mod_xml2enc启用的基于libxml2的模块一起使用，您必须自己配置过滤器链。因此，要将其与模块<strong>mod_foo</strong>提供的过滤器<strong>foo</strong>一起使用，以改善后者对HTML和XML的i18n支持，可以使用</p>
    <pre><code>
    FilterProvider iconv    xml2enc Content-Type $text/html
    FilterProvider iconv    xml2enc Content-Type $xml
    FilterProvider markup   foo Content-Type $text/html
    FilterProvider markup   foo Content-Type $xml
    FilterChain     iconv markup
    </code></pre>
    <p><strong>mod_foo</strong>现在将支持libxml2或apr_xlate / iconv中的一个（或两个）支持的任何字符集。</p>
    </dd></dl>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="api" id="api">编程API</a></h2>
    <p>鼓励编写基于libxml2的过滤器模块的程序员启用它们以启用mod_xml2enc，从而为用户提供强大的i18n支持，而无需花费很多精力。编程API在<var>mod_xml2enc.h</var>中<var>公开</var> ，用法示例为<code class="module"><a href="../mod/mod_proxy_html.html">mod_proxy_html</a></code> 。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="sniffing" id="sniffing">检测编码</a></h2>
    <p>与<code class="module"><a href="../mod/mod_charset_lite.html">mod_charset_lite</a></code>不同，mod_xml2enc设计用于处理其编码无法事先知道并因此进行了配置的数据。因此，它使用“嗅探”技术来检测HTTP数据的编码，如下所示：</p>
    <ol>
        <li>如果HTTP <var>Content-Type</var>标头包含<var>charset</var>参数，则使用该参数。</li>
        <li>如果数据以XML字节顺序标记（BOM）或XML编码声明开头，则使用该格式。</li>
        <li>如果在HTML <code>&lt;META&gt;</code>元素中声明了编码，则使用该编码。</li>
        <li>如果以上都不匹配，则使用由<code class="directive">xml2EncDefault</code>设置的默认值。</li>
    </ol>
    <p>规则按顺序应用。一旦找到匹配项，将使用该匹配项并停止检测。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="output" id="output">输出编码</a></h2>
<p><a href="http://xmlsoft.org/">libxml2</a>始终在内部使用UTF-8（Unicode），而基于libxml2的过滤器模块将默认输出该内容。mod_xml2enc可以通过API更改输出编码，但是目前尚无法直接配置该编码。</p>
<p>至少从理论上讲，不必更改输出编码，并且不建议这样做，因为不必要的转换会给服务器带来额外的处理负担。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="alias" id="alias">不支持的编码</a></h2>
<p>如果您正在使用平台上可用的任何转换方法都不支持的编码，则仍可以使用<code class="directive">xml2EncAlias</code>将其别名为支持的编码。</p>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="xml2EncAlias" id="xml2EncAlias">xml2EncAlias</a> <a name="xml2encalias" id="xml2encalias">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>识别用于编码值的别名</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>xml2EncAlias <var>字符集别名[别名...]</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_xml2enc</td></tr>
</table>
    <p>此服务器范围的指令将一个或多个编码别名为另一种编码。这使libxml2无法识别的编码可以由libxml2的编码支持在内部使用转换表进行识别的编码处理。这有两个目的：支持libxml2或iconv不能识别的字符集（或名称），以及跳过对不需要编码的编码的转换。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="xml2EncDefault" id="xml2EncDefault">xml2EncDefault</a> <a name="xml2encdefault" id="xml2encdefault">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置默认编码，以假定绝对无法<a href="#sniffing">自动检测到</a>任何信息</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>xml2Enc默认<var>名称</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_xml2enc</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>2.4.0及更高版本；作为早期版本的第三方模块提供。</td></tr>
</table>
    <p>如果您正在处理具有已知编码但没有编码信息的数据，则可以设置此默认值以帮助mod_xml2enc正确处理数据。例如，要使用Latin1的默认值（HTTP / 1.0中指定的<var>iso-8859-1</var> ，请使用</p>
    <pre class="prettyprint lang-config">xml2EncDefault iso-8859-1</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="xml2StartParse" id="xml2StartParse">xml2StartParse</a> <a name="xml2startparse" id="xml2startparse">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>建议解析器跳过主要垃圾。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>xml2StartParse <var>元素[element ...]</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_xml2enc</td></tr>
</table>
    <p>指定标记解析器应从任何指定元素的第一个实例开始。这可以用作变通方法，其中后端断开时会插入导致解析器混乱的前导垃圾（ <a href="http://bahumbug.wordpress.com/2006/10/12/mod_proxy_html-revisited/">此处为示例</a> ）。</p>
    <p>永远不要将其用于XML或格式正确的HTML。</p>

</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>