<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_auth_form-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_auth_form</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>表格认证</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>auth_form_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_auth_form.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在Apache 2.3和更高版本中可用</td></tr></table>
<h3>摘要</h3>

    <div class="warning"><h3>警告</h3>
      <p>表单身份验证取决于<code class="module"><a href="../mod/mod_session.html">mod_session</a></code>模块，并且这些模块使用HTTP cookie，因此可能成为跨站点脚本攻击的受害者，或者向客户端公开潜在的私人信息。在服务器上启用会话功能之前，请确保已考虑到相关风险。</p>
    </div>

    <p>该模块允许使用HTML登录表单来通过在给定提供者中查找用户来限制访问。HTML表单比其他表单需要更多的配置，但是HTML登录表单可以为最终用户提供更友好的体验。
    </p>

    <p>HTTP基本认证由<code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code>提供，HTTP摘要认证由<code class="module"><a href="../mod/mod_auth_digest.html">mod_auth_digest</a></code>提供。此模块应与至少一个身份验证模块（例如<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>和一个授权模块（例如<code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code> 。</p>

    <p>成功验证用户身份后，该用户的登录详细信息将存储在<code class="module"><a href="../mod/mod_session.html">mod_session</a></code>提供的<code class="module"><a href="../mod/mod_session.html">mod_session</a></code> 。
    </p>

</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#basicconfig">基本配置</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#standalone">独立登录</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#inline">内联登录</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#inlinepreservebody">内联登录并保存身体</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#loggingout">注销</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#urlencoding">用户名和密码</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#authformauthoritative">AuthFormAuthoritative</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformbody">AuthFormBody</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformdisablenostore">AuthFormDisableNoStore</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformfakebasicauth">AuthFormFakeBasicAuth</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformlocation">AuthFormLocation</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformloginrequiredlocation">AuthFormLoginRequiredLocation</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformloginsuccesslocation">AuthFormLoginSuccessLocation</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformlogoutlocation">AuthFormLogoutLocation</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformmethod">AuthFormMethod</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformmimetype">AuthFormMimetype</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformpassword">AuthFormPassword</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformprovider">AuthFormProvider</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformsitepassphrase">AuthFormSitePassphrase</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformsize">AuthFormSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authformusername">AuthFormUsername</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_auth_form">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_auth_form">报告错误</a></li></ul><h3>也可以看看</h3>
<ul class="seealso">
<li><code class="module"><a href="../mod/mod_session.html">mod_session</a></code></li>
<li><code class="directive"><a href="../mod/mod_authn_core.html#authname">验证名</a></code></li>
<li><code class="directive"><a href="../mod/mod_authn_core.html#authtype">验证类型</a></code></li>
<li><code class="directive"><a href="../mod/mod_authz_core.html#require">要求</a></code></li>
<li><a href="../howto/auth.html">认证方法</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="basicconfig" id="basicconfig">基本配置</a></h2>

      <p>为了保护特定URL与<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code> ，你需要决定你将存储你的<var>会话</var> ，你需要决定你会用什么方法来验证。在此简单示例中，登录详细信息将存储在基于<code class="module"><a href="../mod/mod_session_cookie.html">mod_session_cookie</a></code>的会话中，并且将尝试使用<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>对文件进行身份验证。如果认证失败，则用户将被重定向到表单登录页面。</p>

      <div class="example"><h3>基本例子</h3><pre class="prettyprint lang-config">&lt;Location "/admin"&gt;
    AuthFormProvider file
    AuthUserFile "conf/passwd"
    AuthType form
    AuthName "/admin"
    AuthFormLoginRequiredLocation "http://example.com/login.html"

    Session On
    SessionCookieName session path=/

    Require valid-user
&lt;/Location&gt;</pre>
</div>

      <p>伪指令<code class="directive"><a href="../mod/mod_authn_core.html#authtype">AuthType</a></code>设置为value <var>形式</var>时将启用<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>认证。指令<code class="directive"><a href="#authformprovider">AuthFormProvider</a></code>和<code class="directive"><a href="../mod/mod_authn_file.html#authuserfile">AuthUserFile</a></code>指定应根据所选文件检查用户名和密码。</p>

      <p>指令<code class="directive"><a href="../mod/mod_session.html#session">Session</a></code>和<code class="directive"><a href="../mod/mod_session_cookie.html#sessioncookiename">SessionCookieName</a></code>会话存储在浏览器的HTTP cookie中。有关配置会话的不同选项的更多信息，请阅读<code class="module"><a href="../mod/mod_session.html">mod_session</a></code>的文档。</p>

      <p>您可以选择添加<code class="directive"><a href="../mod/mod_session_crypto.html#sessioncryptopassphrase">SessionCryptoPassphrase</a></code>来创建加密的会话cookie。这需要加载附加模块<code class="module"><a href="../mod/mod_session_crypto.html">mod_session_crypto</a></code> 。</p>

      <p>在上面的简单示例中，URL已由<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>保护，但是尚未为用户提供输入其用户名和密码的机会。这样做的选项包括为此目的提供专用的独立登录页面，或内联提供登录页面。</p>
    </div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="standalone" id="standalone">独立登录</a></h2>

      <p>登录表单可以作为独立页面托管，也可以内嵌在同一页面上。</p>

      <p>当将登录配置为独立页面时，应使用<code class="directive"><a href="#authformloginrequiredlocation">AuthFormLoginRequiredLocation</a></code>指令将不成功的身份验证尝试重定向到网站为此目的创建的登录表单。通常，此登录页面将包含HTML表单，要求用户提供其使用名和密码。</p>

      <div class="example"><h3>登录表单示例</h3><pre class="prettyprint lang-html">&lt;form method="POST" action="/dologin.html"&gt;
  Username: &lt;input type="text" name="httpd_username" value="" /&gt;
  Password: &lt;input type="password" name="httpd_password" value="" /&gt;
  &lt;input type="submit" name="login" value="Login" /&gt;
&lt;/form&gt;</pre>
</div>

      <p>进行实际登录的部分由<var>form-login-handler处理</var> 。表单的操作应指向此处理程序，该处理程序在Apache httpd中进行如下配置：</p>

      <div class="example"><h3>表单登录处理程序示例</h3><pre class="prettyprint lang-config">&lt;Location "/dologin.html"&gt;
    SetHandler form-login-handler
    AuthFormLoginRequiredLocation "http://example.com/login.html"
    AuthFormLoginSuccessLocation "http://example.com/admin/index.html"
    AuthFormProvider file
    AuthUserFile "conf/passwd"
    AuthType form
    AuthName /admin
    Session On
    SessionCookieName session path=/
&lt;/Location&gt;</pre>
</div>

      <p><code class="directive"><a href="#authformloginrequiredlocation">AuthFormLoginRequiredLocation</a></code>指令指定的URL通常将指向一个页面，向用户解释其登录尝试未成功，因此应再次尝试。<code class="directive"><a href="#authformloginsuccesslocation">AuthFormLoginSuccessLocation</a></code>指令指定成功登录后应将用户重定向到的URL。</p>

      <p>或者，可以将成功重定向用户的URL嵌入在登录表单中，如下例所示。结果，可以将同一<var>表单登录处理程序</var>重新用于网站的不同区域。</p>

      <div class="example"><h3>带有位置的示例登录表单</h3><pre class="prettyprint lang-html">&lt;form method="POST" action="/dologin.html"&gt;
  Username: &lt;input type="text" name="httpd_username" value="" /&gt;
  Password: &lt;input type="password" name="httpd_password" value="" /&gt;
  &lt;input type="submit" name="login" value="Login" /&gt;
  &lt;input type="hidden" name="httpd_location" value="http://example.com/success.html" /&gt;
&lt;/form&gt;</pre>
</div>

    </div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="inline" id="inline">内联登录</a></h2>

      <div class="warning"><h3>警告</h3>
        <p>在某些情况下，存在使用内联登录配置的登录表单可能会多次提交的风险，从而向运行在其下的应用程序显示登录凭据。管理员必须确保适当保护基础应用程序，以防止滥用。如有疑问，请使用独立登录配置。</p>
      </div>

      <p>作为网站专用登录页面的替代方法，可以将<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>配置为内联身份验证用户，而无需重定向到另一个页面。这允许在登录尝试期间保留当前页面的状态。在有时间限制的会话生效并且会话在用户请求中间超时的情况下，这很有用。可以在适当位置重新认证用户，然后他们可以从中断的地方继续进行。</p>

      <p>如果未经身份验证的用户尝试访问受未使用<code class="directive"><a href="#authformloginrequiredlocation">AuthFormLoginRequiredLocation</a></code>指令配置的<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>保护的页面， <var>则会</var>向浏览器返回<var>HTTP_UNAUTHORIZED</var>状态码，指示该用户无权查看该页面。</p>

      <p>要配置内联身份验证，管理员将使用包含登录表单的自定义错误文档覆盖<var>HTTP_UNAUTHORIZED</var>状态代码返回的错误文档，如下所示：</p>

      <div class="example"><h3>基本内联示例</h3><pre class="prettyprint lang-config">AuthFormProvider file
ErrorDocument 401 "/login.shtml"
AuthUserFile "conf/passwd"
AuthType form
AuthName realm
AuthFormLoginRequiredLocation "http://example.com/login.html"
Session On
SessionCookieName session path=/</pre>
</div>

      <p>错误文档页面应包含具有空action属性的登录表单，如以下示例所示。这样可以将表单提交到原始受保护的URL，而页面不必知道该URL是什么。</p>

      <div class="example"><h3>内联登录表单示例</h3><pre class="prettyprint lang-html">&lt;form method="POST" <strong>action=""</strong>&gt;
  Username: &lt;input type="text" name="httpd_username" value="" /&gt;
  Password: &lt;input type="password" name="httpd_password" value="" /&gt;
  &lt;input type="submit" name="login" value="Login" /&gt;
&lt;/form&gt;</pre>
</div>

      <p>最终用户填写了登录详细信息后，该表单将向原始受密码保护的URL发出HTTP POST请求。 <code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>将拦截此POST请求，并且如果发现用户名和密码的HTML字段存在，则用户将登录，原始的受密码保护的URL将作为GET请求返回给用户。</p>

    </div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="inlinepreservebody" id="inlinepreservebody">内联登录并保存身体</a></h2>

      <p>上述内联登录技术的局限性在于，如果HTML表单POST导致请求进行身份验证或重新认证，则浏览器发布的原始表单的内容将丢失。根据网站的功能，这可能给最终用户带来极大的不便。</p>

      <p><code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>通过允许将原始请求的方法和主体嵌入到登录表单中来解决此问题。如果身份验证成功，则Apache httpd将重试原始方法和主体，并保留原始请求的状态。</p>

      <p>要启用正文保存，请按照以下示例在登录表单中添加三个其他字段。</p>

      <div class="example"><h3>身体保护的例子</h3><pre class="prettyprint lang-html">&lt;form method="POST" action=""&gt;
  Username: &lt;input type="text" name="httpd_username" value="" /&gt;
  Password: &lt;input type="password" name="httpd_password" value="" /&gt;
  &lt;input type="submit" name="login" value="Login" /&gt;
  <br />  <strong>&lt;input type="hidden" name="httpd_method" value="POST" /&gt;
  &lt;input type="hidden" name="httpd_mimetype" value="application/x-www-form-urlencoded" /&gt;
  &lt;input type="hidden" name="httpd_body" value="name1=value1&amp;name2=value2" /&gt;</strong><br />
&lt;/form&gt;</pre>
</div>

      <p>如何将原始请求的方法，模仿类型和主体嵌入登录表单中，这取决于网站中使用的平台和技术。
      </p>

      <p>一种选择是将<code class="module"><a href="../mod/mod_include.html">mod_include</a></code>模块与<code class="directive"><a href="../mod/mod_request.html#keptbodysize">KeptBodySize</a></code>指令一起使用，以及合适的CGI脚本将变量嵌入到表单中。</p>

      <p>另一种选择是使用CGI脚本或其他动态技术来呈现登录表单。</p>

      <div class="example"><h3>CGI范例</h3><pre class="prettyprint lang-config">        AuthFormProvider file
        ErrorDocument 401 "/cgi-bin/login.cgi"
        ...</pre>
</div>

    </div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="loggingout" id="loggingout">注销</a></h2>

      <p>要使用户能够注销特定的会话，请配置要由<var>form-logout-handler处理的页面</var> 。任何尝试访问此URL的操作都会导致用户名和密码从当前会话中删除，从而有效地注销用户。</p>

      <p>通过设置<code class="directive"><a href="#authformlogoutlocation">AuthFormLogoutLocation</a></code>指令，可以指定一个URL，在成功注销后将浏览器重定向到该URL。该URL可能会向用户说明他们已经注销，并为用户提供了重新登录的选项。</p>

      <div class="example"><h3>基本注销示例</h3><pre class="prettyprint lang-config">SetHandler form-logout-handler
AuthName realm
AuthFormLogoutLocation "http://example.com/loggedout.html"
Session On
SessionCookieName session path=/</pre>
</div>

      <p>请注意，注销用户并不会删除会话。它只是从会话中删除用户名和密码。如果这导致会话为空，则最终结果将是删除该会话，但这不能保证。如果要保证删除会话，请将<code class="directive"><a href="../mod/mod_session.html#sessionmaxage">SessionMaxAge</a></code>伪指令设置为一个较小的值，例如1（将该伪指令设置为零将意味着没有会话期限限制）。
      </p>

      <div class="example"><h3>基本会话到期示例</h3><pre class="prettyprint lang-config">SetHandler form-logout-handler
AuthFormLogoutLocation "http://example.com/loggedout.html"
Session On
SessionMaxAge 1
SessionCookieName session path=/</pre>
</div>

    </div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="urlencoding" id="urlencoding">用户名和密码</a></h2>
    <p>请注意，表单提交涉及URLEncoding表单数据：在这种情况下，用户名和密码。因此，您应该选择避免在表单提交中使用URL编码的字符的用户名和密码，否则可能会得到意外的结果。</p>
    </div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormAuthoritative" id="AuthFormAuthoritative">AuthForm权威</a> <a name="authformauthoritative" id="authformauthoritative">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置是否将授权和身份验证传递给较低级别的模块</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormAuthoritative开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthFormAuthoritative开启</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
</table>
    <p>通常， <code class="directive"><a href="#authformprovider">AuthFormProvider</a></code>列出的每个授权模块<code class="directive"><a href="#authformprovider">AuthFormProvider</a></code>将尝试验证用户，如果在任何提供程序中都找不到该用户，则访问将被拒绝。如果<strong>没有用户ID</strong>或与提供的用户ID匹配的<strong>规则</strong> ， <code class="directive">AuthFormAuthoritative</code>指令显式设置为<code>Off</code>允许将身份验证和授权传递给其他基于非提供商的模块。仅当将<code class="module"><a href="../mod/mod_auth_form.html">mod_auth_form</a></code>与未使用<code class="directive"><a href="#authformprovider">AuthFormProvider</a></code>指令配置的第三方模块结合使用时，才应该这样<code class="directive"><a href="#authformprovider">AuthFormProvider</a></code> 。使用此类模块时，处理顺序在模块的源代码中确定，并且不可配置。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormBody" id="AuthFormBody">AuthFormBody</a> <a name="authformbody" id="authformbody">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>表单域的名称，其中包含尝试成功登录的请求的主体</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormBody <var>字段名称</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>httpd_body</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformmethod">AuthFormMethod</a></code>指令指定HTML字段的名称，如果存在，它将包含登录成功后要提交的请求的方法。</p>

    <p>通过使用<code class="directive"><a href="#authformmethod">AuthFormMethod</a></code> ， <code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code>和<code class="directive"><a href="#authformbody">AuthFormBody</a></code>描述的字段<code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code> <code class="directive"><a href="#authformbody">AuthFormBody</a></code> ，网站可以重试可能被登录屏幕或会话超时中断的请求。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormDisableNoStore" id="AuthFormDisableNoStore">AuthFormDisableNoStore</a> <a name="authformdisablenostore" id="authformdisablenostore">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>在登录页面上禁用CacheControl无存储头</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormDisableNoStore <var>开|关</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthFormDisableNoStore关</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformdisablenostore">AuthFormDisableNoStore</a></code>标志禁用用户尚未登录时发送<code>Cache-Control no-store</code>标头的错误401页面。标头的目的是使<code>ecmascript</code>应用程序难以尝试重新提交登录表单，并向后端应用程序显示用户名和密码。禁用后果自负。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormFakeBasicAuth" id="AuthFormFakeBasicAuth">AuthFormFakeBasicAuth</a> <a name="authformfakebasicauth" id="authformfakebasicauth">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>伪造基本身份验证标头</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormFakeBasicAuth <var>开|关</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthFormFakeBasicAuth关</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformfakebasicauth">AuthFormFakeBasicAuth</a></code>标志确定是否将<code>Basic Authentication</code>标头添加到请求标头。这可用于将用户名和密码公开给基础应用程序，而基础应用程序不必知道如何实现登录。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormLocation" id="AuthFormLocation">AuthFormLocation</a> <a name="authformlocation" id="authformlocation">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>成功登录后带有URL重定向到的表单字段的名称</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormLocation <var>字段名称</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>httpd_location</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformlocation">AuthFormLocation</a></code>指令指定HTML字段的名称（如果存在），将包含一个URL，以在成功登录后将浏览器重定向到该URL。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormLoginRequiredLocation" id="AuthFormLoginRequiredLocation">AuthFormLoginRequiredLocation</a> <a name="authformloginrequiredlocation" id="authformloginrequiredlocation">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>需要登录后要重定向到的页面的URL</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormLoginRequiredLocation <var>网址</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用。在2.4.4中添加了表达式解析器的用法。</td></tr>
</table>
    <p><code class="directive"><a href="#authformloginrequiredlocation">AuthFormLoginRequiredLocation</a></code>指令指定如果用户无权查看页面则重定向到的URL。该值在发送给客户端之前使用<a href="../expr.html">ap_expr</a>解析器进行解析。默认情况下，如果用户无权查看页面，则将与<code class="directive"><a href="../mod/core.html#errordocument">ErrorDocument</a></code>指令指定的页面一起返回HTTP响应代码<code>HTTP_UNAUTHORIZED</code> 。该指令将覆盖此默认值。</p>

    <p>如果您有专用的登录页面可将用户重定向到，请使用此伪指令。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormLoginSuccessLocation" id="AuthFormLoginSuccessLocation">AuthFormLoginSuccessLocation</a> <a name="authformloginsuccesslocation" id="authformloginsuccesslocation">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>登录成功后要重定向到的页面的URL</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormLoginSuccessLocation <var>网址</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用。在2.4.4中添加了表达式解析器的用法。</td></tr>
</table>
    <p><code class="directive"><a href="#authformloginsuccesslocation">AuthFormLoginSuccessLocation</a></code>指令指定用户成功登录后重定向到的URL。该值在发送给客户端之前使用<a href="../expr.html">ap_expr</a>解析器进行解析。如果使用<code class="directive"><a href="#authformlocation">AuthFormLocation</a></code>指令定义了包含另一个URL的表单字段，则可以覆盖此指令。</p>

    <p>如果您有专用的登录URL，并且尚未将目标页面嵌入登录表单，请使用此伪指令。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormLogoutLocation" id="AuthFormLogoutLocation">AuthFormLogoutLocation</a> <a name="authformlogoutlocation" id="authformlogoutlocation">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>用户注销后重定向到的URL</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormLogoutLocation <var>uri</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用。在2.4.4中添加了表达式解析器的用法。</td></tr>
</table>
    <p><code class="directive"><a href="#authformlogoutlocation">AuthFormLogoutLocation</a></code>指令指定用户尝试注销时要重定向到的服务器上页面的URL。该值在发送给客户端之前使用<a href="../expr.html">ap_expr</a>解析器进行解析。</p>

    <p>当访问由处理程序<code>form-logout-handler</code>提供的URI时，此指令指定的页面将显示给最终用户。例如：</p>

    <div class="example"><h3>例</h3><pre class="prettyprint lang-config">&lt;Location "/logout"&gt;
    SetHandler form-logout-handler
    AuthFormLogoutLocation "http://example.com/loggedout.html"
    Session on
    #...
&lt;/Location&gt;</pre>
</div>

    <p>尝试访问URI <var>/ logout /</var>将导致用户被注销，并显示<var>/loggedout.html</var>页面。请确保页面<var>loginout.html</var>没有密码保护，否则将不会显示该页面。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormMethod" id="AuthFormMethod">AuthFormMethod</a> <a name="authformmethod" id="authformmethod">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>表单域的名称，其中包含尝试成功登录的请求方法</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormMethod <var>字段名称</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>httpd_method</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformmethod">AuthFormMethod</a></code>指令指定HTML字段的名称，如果存在，它将包含登录成功后要提交的请求的方法。</p>

    <p>通过使用<code class="directive"><a href="#authformmethod">AuthFormMethod</a></code> ， <code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code>和<code class="directive"><a href="#authformbody">AuthFormBody</a></code>描述的字段<code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code> <code class="directive"><a href="#authformbody">AuthFormBody</a></code> ，网站可以重试可能被登录屏幕或会话超时中断的请求。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormMimetype" id="AuthFormMimetype">AuthFormMimetype</a> <a name="authformmimetype" id="authformmimetype">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>表单字段的名称，其中包含尝试成功登录的请求主体的模仿类型</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormMimetype <var>字段名称</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>httpd_mimetype</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformmethod">AuthFormMethod</a></code>指令指定HTML字段的名称（如果存在），它将包含登录成功后要提交的请求的<code class="directive"><a href="#authformmethod">AuthFormMethod</a></code> 。</p>

    <p>通过使用<code class="directive"><a href="#authformmethod">AuthFormMethod</a></code> ， <code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code>和<code class="directive"><a href="#authformbody">AuthFormBody</a></code>描述的字段<code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code> <code class="directive"><a href="#authformbody">AuthFormBody</a></code> ，网站可以重试可能被登录屏幕或会话超时中断的请求。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormPassword" id="AuthFormPassword">AuthFormPassword</a> <a name="authformpassword" id="authformpassword">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>带有登录密码的表单字段的名称</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormPassword <var>字段名称</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>httpd_password</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformpassword">AuthFormPassword</a></code>指令指定HTML字段的名称，如果存在，则将包含用于登录的密码。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormProvider" id="AuthFormProvider">AuthFormProvider</a> <a name="authformprovider" id="authformprovider">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置此位置的身份验证提供程序</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormProvider <var>提供程序名称</var> [ <var>提供程序名称</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthFormProvider文件</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
</table>
    <p><code class="directive">AuthFormProvider</code>指令设置使用哪个提供程序来验证此位置的用户。默认<code>file</code>提供程序由<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>模块实现。确保服务器中存在所选的提供程序模块。</p>

    <div class="example"><h3>例</h3><pre class="prettyprint lang-config">&lt;Location "/secure"&gt;
    AuthType form
    AuthName "private area"
    AuthFormProvider  dbm
    AuthDBMType        SDBM
    AuthDBMUserFile    "/www/etc/dbmpasswd"
    Require            valid-user
    #...
&lt;/Location&gt;</pre>
</div>

    <p>提供程序由<code class="module"><a href="../mod/mod_authn_dbm.html">mod_authn_dbm</a></code> ， <code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code> ， <code class="module"><a href="../mod/mod_authn_dbd.html">mod_authn_dbd</a></code> ， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>和<code class="module"><a href="../mod/mod_authn_socache.html">mod_authn_socache</a></code> 。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormSitePassphrase" id="AuthFormSitePassphrase">AuthFormSitePassphrase</a> <a name="authformsitepassphrase" id="authformsitepassphrase">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>绕过高流量站点的身份验证检查</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormSitePassphrase <var>机密</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformsitepassphrase">AuthFormSitePassphrase</a></code>指令指定了一个密码短语，如果该密码短语存在于用户会话中，则会导致Apache httpd绕过针对给定URL的身份验证检查。它可以用于高流量的网站上，以减轻身份验证基础结构带来的负担。</p>

    <p>通过将此指令添加到<var>form-login-handler</var>的配置中，可以将密码短语插入用户会话。<var>表单登录处理程序</var>本身将始终运行身份验证检查，而不管是否指定了密码短语。</p>

    <div class="warning"><h3>警告</h3>
      <p>如果通过使用<code class="module"><a href="../mod/mod_session_cookie.html">mod_session_cookie</a></code>将会话公开给用户，并且该会话不受<code class="module"><a href="../mod/mod_session_crypto.html">mod_session_crypto</a></code>保护，则密码短语可能会通过字典攻击而暴露给潜在用户。无论如何配置会话，请确保不要在可能暴露私人用户数据或可以进行敏感交易的URL空间中使用此伪指令。使用风险自负。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormSize" id="AuthFormSize">AuthFormSize</a> <a name="authformsize" id="authformsize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>表单的最大大小（以字节为单位），将解析为登录详细信息</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormSize <var>大小</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>8192</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformsize">AuthFormSize</a></code>指令指定将被解析以查找登录表单的请求正文的最大大小。</p>

    <p>如果到达的登录请求超出此大小，则整个请求将被HTTP响应代码<code>HTTP_REQUEST_TOO_LARGE</code>中止。</p>

    <p>如果您使用<code class="directive"><a href="#authformmethod">AuthFormMethod</a></code> ， <code class="directive"><a href="#authformmimetype">AuthFormMimetype</a></code>和<code class="directive"><a href="#authformbody">AuthFormBody</a></code>描述的字段填充表单，则可能需要将此字段设置为与<code class="directive"><a href="../mod/mod_request.html#keptbodysize">KeptBodySize</a></code>指令相似的大小。</p>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthFormUsername" id="AuthFormUsername">AuthFormUsername</a> <a name="authformusername" id="authformusername">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>带有登录用户名的表单字段的名称</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthFormUsername <var>字段名</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>httpd_username</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_form</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.0和更高版本中可用</td></tr>
</table>
    <p><code class="directive"><a href="#authformusername">AuthFormUsername</a></code>指令指定HTML字段的名称（如果存在），将包含用于登录的用户名。</p>

</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>