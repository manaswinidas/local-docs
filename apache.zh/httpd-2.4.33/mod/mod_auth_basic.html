<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_auth_basic-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_auth_basic</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>基本HTTP验证</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>auth_basic_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_auth_basic.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>在Apache 2.1和更高版本中可用</td></tr></table>
<h3>摘要</h3>

    <p>该模块允许使用HTTP基本身份验证通过在给定提供程序中查找用户来限制访问。HTTP摘要认证由<code class="module"><a href="../mod/mod_auth_digest.html">mod_auth_digest</a></code>提供。此模块通常应与至少一个身份验证模块（例如<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>和一个授权模块（例如<code class="module"><a href="../mod/mod_authz_user.html">mod_authz_user</a></code> 。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#authbasicauthoritative">AuthBasicAuthoritative</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authbasicfake">AuthBasicFake</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authbasicprovider">AuthBasicProvider</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#authbasicusedigestalgorithm">AuthBasicUseDigestAlgorithm</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_auth_basic">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_auth_basic">报告错误</a></li></ul><h3>也可以看看</h3>
<ul class="seealso">
<li><code class="directive"><a href="../mod/mod_authn_core.html#authname">验证名</a></code></li>
<li><code class="directive"><a href="../mod/mod_authn_core.html#authtype">验证类型</a></code></li>
<li><code class="directive"><a href="../mod/mod_authz_core.html#require">要求</a></code></li>
<li><a href="../howto/auth.html">认证方法</a></li>
</ul></div>

<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthBasicAuthoritative" id="AuthBasicAuthoritative">AuthBasic权威</a> <a name="authbasicauthoritative" id="authbasicauthoritative">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置是否将授权和身份验证传递给较低级别的模块</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthBasicAuthoritative开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthBasicAuthoritative On</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_basic</td></tr>
</table>
    <p>通常， <code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code>列出的每个授权模块<code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code>将尝试验证用户，如果在任何提供程序中都找不到该用户，则访问将被拒绝。如果<strong>没有用户ID</strong>或与提供的用户ID匹配的<strong>规则</strong> ， <code class="directive">AuthBasicAuthoritative</code>指令显式设置为<code>Off</code>允许将身份验证和授权传递给其他基于非提供商的模块。仅在将<code class="module"><a href="../mod/mod_auth_basic.html">mod_auth_basic</a></code>与未使用<code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code>指令配置的第三方模块结合使用时，才应该这样<code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code> 。使用此类模块时，处理顺序在模块的源代码中确定，并且不可配置。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthBasicFake" id="AuthBasicFake">AuthBasicFake</a> <a name="authbasicfake" id="authbasicfake">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用给定的用户名和密码表达式进行假基本认证</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthBasicFake off | <var>用户名</var> [ <var>密码</var> ]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>没有</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_basic</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>Apache HTTP Server 2.4.5及更高版本</td></tr>
</table>
    <p>指定的用户名和密码将合并到一个Authorization标头中，该标头将传递到Web服务器后面的服务器或服务。用户名和密码字段均使用<a href="../expr.html">表达式解析器</a>进行解释，该<a href="../expr.html">解析器</a>允许根据请求参数设置用户名和密码。</p>

    <p>如果未指定密码，将使用默认值“ password”。要禁用URL空间的伪基本认证，请指定“ AuthBasicFake off”。</p>

    <p>在此示例中，我们将固定的用户名和密码传递给后端服务器。</p>

    <div class="example"><h3>固定示例</h3><pre class="prettyprint lang-config">&lt;Location "/demo"&gt;
    AuthBasicFake demo demopass
&lt;/Location&gt;</pre>
</div>

    <p>在此示例中，我们传递从客户端证书中提取的电子邮件地址，从而扩展了<code class="directive"><a href="../mod/mod_ssl.html#ssloptions">SSLOptions</a></code>指令中FakeBasicAuth选项的功能。与FakeBasicAuth选项一样，密码设置为固定字符串“ password”。</p>

    <div class="example"><h3>证书示例</h3><pre class="prettyprint lang-config">&lt;Location "/secure"&gt;
    AuthBasicFake "%{SSL_CLIENT_S_DN_Email}"
&lt;/Location&gt;</pre>
</div>

    <p>扩展上面的示例，我们通过使用固定的密码对电子邮件地址进行哈希处理，然后将哈希传递给后端服务器来生成密码。这可用于进入不支持客户端证书的旧系统。</p>

    <div class="example"><h3>密码范例</h3><pre class="prettyprint lang-config">&lt;Location "/secure"&gt;
    AuthBasicFake "%{SSL_CLIENT_S_DN_Email}" "%{sha1:passphrase-%{SSL_CLIENT_S_DN_Email}}"
&lt;/Location&gt;</pre>
</div>

    <div class="example"><h3>排除示例</h3><pre class="prettyprint lang-config">&lt;Location "/public"&gt;
    AuthBasicFake off
&lt;/Location&gt;</pre>
</div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthBasicProvider" id="AuthBasicProvider">AuthBasicProvider</a> <a name="authbasicprovider" id="authbasicprovider">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置此位置的身份验证提供程序</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthBasicProvider <var>提供程序名称</var> [ <var>提供程序名称</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthBasicProvider文件</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_basic</td></tr>
</table>
    <p><code class="directive">AuthBasicProvider</code>指令设置使用哪个提供程序来验证此位置的用户。默认<code>file</code>提供程序由<code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code>模块实现。确保服务器中存在所选的提供程序模块。</p>
    <div class="example"><h3>例</h3><pre class="prettyprint lang-config">&lt;Location "/secure"&gt;
    AuthType basic
    AuthName "private area"
    AuthBasicProvider  dbm
    AuthDBMType        SDBM
    AuthDBMUserFile    "/www/etc/dbmpasswd"
    Require            valid-user
&lt;/Location&gt;</pre>
</div>
    <p>将按顺序查询提供者，直到提供者找到与所请求用户名匹配的内容为止，此时唯一的提供者将尝试检查密码。验证密码失败不会导致控制权传递给后续提供者。</p>

    <p>提供程序由<code class="module"><a href="../mod/mod_authn_dbm.html">mod_authn_dbm</a></code> ， <code class="module"><a href="../mod/mod_authn_file.html">mod_authn_file</a></code> ， <code class="module"><a href="../mod/mod_authn_dbd.html">mod_authn_dbd</a></code> ， <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>和<code class="module"><a href="../mod/mod_authn_socache.html">mod_authn_socache</a></code> 。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AuthBasicUseDigestAlgorithm" id="AuthBasicUseDigestAlgorithm">AuthBasicUseDigestAlgorithm</a> <a name="authbasicusedigestalgorithm" id="authbasicusedigestalgorithm">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>针对身份验证提供程序检查密码，就好像摘要身份验证已生效而不是基本身份验证一样。
</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AuthBasicUseDigestAlgorithm MD5 |关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AuthBasicUseDigestAlgorithm关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_auth_basic</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>Apache HTTP Server 2.4.7和更高版本</td></tr>
</table>
    <p>通常，使用基本身份验证时， <code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code>列出的提供程序<code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code>尝试通过检查其数据存储中是否存在匹配的用户名和关联的密码来验证用户。存储的密码通常是加密的，但不一定要加密；每个提供商可以选择自己的密码存储方案。</p>

    <p>当使用<code class="directive"><a href="../mod/mod_auth_digest.html#authdigestprovider">AuthDigestProvider</a></code>和Digest Authentication时，提供程序执行类似的检查以在其数据存储中找到匹配的用户名。但是，与“基本身份验证”情况不同，与每个存储的用户名关联的值必须是由用户名，领域名称和密码组成的加密字符串。（有关此加密字符串使用的格式的更多详细信息<a href="http://tools.ietf.org/html/rfc2617#section-3.2.2.2">，</a>请参阅<a href="http://tools.ietf.org/html/rfc2617#section-3.2.2.2">RFC 2617，第3.2.2.2节</a> 。）</p>

    <p>由于基本身份验证和摘要身份验证之间存储值的差异，从摘要身份验证转换为基本身份验证通常要求为所有用户分配新密码，因为他们现有的密码无法从强加给提供者的密码存储方案中恢复支持摘要式身份验证。</p>

    <p>将<code class="directive">AuthBasicUseDigestAlgorithm</code>指令设置为<code>MD5</code>将导致使用与摘要身份验证相同的加密格式来检查用户的基本身份验证密码。首先，由用户名，领域名称和密码组成的字符串用MD5进行哈希处理；然后将用户名和此加密的字符串传递到<code class="directive"><a href="#authbasicprovider">AuthBasicProvider</a></code>列出的提供者，就好像<code class="directive"><a href="../mod/mod_authn_core.html#authtype">AuthType</a></code>设置为<code>Digest</code>并且Digest Authentication生效一样。
    </p>

    <p>通过使用<code class="directive">AuthBasicUseDigestAlgorithm</code> ，站点可以从摘要切换为基本身份验证，而无需为用户分配新密码。</p>

    <div class="note">从基本身份验证切换到摘要身份验证而不分配新密码的逆过程通常是不可能的。仅当基本身份验证密码已以纯文本形式存储或使用可逆加密方案存储时，才有可能按照摘要身份验证密码存储方案来恢复它们并生成新的数据存储。
    </div>

    <div class="note">当<code class="directive">AuthBasicUseDigestAlgorithm</code>设置为<code>MD5</code>时，只有支持摘要身份验证的提供程序才可以对用户进行身份验证。使用其他提供程序将导致错误响应，并且客户端将被拒绝访问。
    </div>

</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>