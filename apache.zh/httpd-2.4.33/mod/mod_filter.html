<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_filter-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_filter</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>上下文相关的智能过滤器配置模块</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>filter_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_filter.c</td></tr>
<tr><th><a href="module-dict.html#Compatibility">兼容性：</a></th><td>2.1版及更高版本</td></tr></table>
<h3>摘要</h3>

    <p>该模块可对输出内容过滤器进行智能的，上下文相关的配置。例如，即使预先不知道内容类型（例如，在代理中），apache也可以配置为通过不同的过滤器处理不同的内容类型。</p>

    <p><code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>通过将间接引入过滤器链来工作。而不是在链中插入过滤器，我们插入过滤器线束，然后依次有条件地将其分发给过滤器提供程序。任何内容过滤器都可以用作<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>的提供者；无需更改现有的过滤器模块（尽管可以简化它们）。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3>话题</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif"> <a href="#smart">智能过滤</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#terms">筛选器声明，提供者和链</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#config">配置链</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#errordocs">筛选和响应状态</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#upgrade">从Apache HTTP Server 2.2配置升级</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#examples">例子</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#protocol">协议处理</a></li>
</ul><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#addoutputfilterbytype">AddOutputFilterByType</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#filterchain">过滤链</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#filterdeclare">过滤器声明</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#filterprotocol">过滤协议</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#filterprovider">FilterProvider</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#filtertrace">FilterTrace</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_filter">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_filter">报告错误</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="smart" id="smart">智能过滤</a></h2>
    <p>在传统的过滤模型中，使用<code class="directive"><a href="../mod/mod_mime.html#addoutputfilter">AddOutputFilter</a></code>和family无条件地插入过滤器。然后，每个过滤器都需要确定是否运行，并且服务器管理员几乎没有灵活性来允许动态配置链。</p>

    <p>相反， <code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>在配置过滤器链时为服务器管理员提供了很大的灵活性。实际上，可以基于复杂的布尔<a href="../expr.html">表达式</a>插入过滤器。这概括了<code class="directive">AddOutputFilterByType</code>提供的有限的灵活性。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="terms" id="terms">筛选器声明，提供者和链</a></h2>
    <p class="figure">
    <img src="../images/mod_filter_old.gif" width="160" height="310" alt="[此图像显示了传统的过滤器模型]"><br>
    <dfn>图1：</dfn>传统的过滤器模型</p>

    <p>在传统模型中，输出过滤器是一条从内容生成器（处理程序）到客户端的简单链。只要可以正确配置过滤器链，此方法就可以很好地工作，但是当需要根据处理程序的结果动态配置过滤器时，就会出现问题。</p>

    <p class="figure">
    <img src="../images/mod_filter_new.gif" width="423" height="331" alt="[此图显示了mod_filter模型]"><br>
    <dfn>图2：</dfn> <code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>模型</p>

    <p><code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>通过将间接引入过滤器链来工作。而不是在链中插入过滤器，我们插入过滤器线束，然后依次有条件地将其分发给过滤器提供程序。任何内容过滤器都可以用作<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>的提供者；无需更改现有的过滤器模块（尽管可以简化它们）。一个过滤器可以有多个提供程序，但对于单个请求，最多只能运行一个提供程序。</p>

    <p>过滤器链包括过滤器线束的任意数量的实例，每个实例可以具有任意数量的提供者。一种特殊情况是具有无条件分派的单个提供程序：这等效于将提供程序过滤器直接插入到链中。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="config" id="config">配置链</a></h2>
    <p>使用<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>配置过滤器链分为三个阶段。有关指令的详细信息，请参见下文。</p>

    <dl>
    <dt>声明过滤器</dt>
    <dd><code class="directive"><a href="#filterdeclare">FilterDeclare</a></code>指令声明一个过滤器，并为其分配名称和过滤器类型。仅当过滤器不是默认类型AP_FTYPE_RESOURCE时才需要。</dd>

    <dt>注册提供商</dt>
    <dd><code class="directive"><a href="#filterprovider">FilterProvider</a></code>指令将提供程序注册到过滤器。过滤器可能已经用<code class="directive"><a href="#filterdeclare">FilterDeclare</a></code>声明了；如果不是，则FilterProvider将使用默认类型AP_FTYPE_RESOURCE隐式声明它。提供程序必须已通过某个模块在<code>ap_register_output_filter</code>注册。<code class="directive"><a href="#filterprovider">FilterProvider</a></code>的最后一个参数是一个表达式：当且仅当表达式的计算结果为true时，才会选择该提供程序来运行请求。该表达式可以求值HTTP请求或响应标头，环境变量或此请求使用的处理程序。与早期版本不同，mod_filter现在支持复杂的表达式，该表达式涉及带有AND / OR逻辑（&amp;&amp; / ||）和方括号的多个条件。表达式语法的详细信息在<a href="../expr.html">ap_expr文档中</a>进行了描述。</dd>

    <dt>配置链</dt>
    <dd>上面的指令构建了智能过滤器链的组件，但没有将其配置为运行。<code class="directive"><a href="#filterchain">FilterChain</a></code>指令从声明的智能过滤器构建过滤器链，从而可以灵活地在过滤器链的开头或结尾插入过滤器，删除过滤器或清除过滤器链。</dd>
</dl>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="errordocs" id="errordocs">筛选和响应状态</a></h2>
    <p>mod_filter通常仅对HTTP状态为200（OK）的响应运行筛选器。如果要过滤具有其他响应状态的文档，则可以设置<var>filter-errordocs</var>环境变量，该变量将对所有响应起作用，而与状态无关。为了进一步优化，可以将表达式条件与<code class="directive">FilterProvider</code> 。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="upgrade" id="upgrade">从Apache HTTP Server 2.2配置升级</a></h2>
    <p>从httpd 2.2起， <code class="directive"><a href="#filterprovider">FilterProvider</a></code>指令已更改：用单个但更通用的<var>表达式</var>替换<var>match</var>和<var>dispatch</var>参数。通常，您可以使用以下方法将匹配/发送对转换为表达式的两侧：</p>
    <div class="example"><p><code>“调度='匹配'”</code></p></div>
    <p>现在分别从语法<var>％{req：foo}</var> ， <var>％{resp：foo}</var>和<var>％{env：foo}</var>解释Request头，Response头和Environment变量。还支持变量<var>％{HANDLER}</var>和<var>％{CONTENT_TYPE}</var> 。</p>
    <p>请注意，该匹配不再支持子字符串匹配。可以将它们替换为正则表达式匹配项。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="examples" id="examples">例子</a></h2>
    <dl>
    <dt>服务器端包含（SSI）</dt>
    <dd>替换<code class="directive">AddOutputFilterByType</code>简单情况
    <pre class="prettyprint lang-config">FilterDeclare SSI
FilterProvider SSI INCLUDES "%{CONTENT_TYPE} =~ m|^text/html|"
FilterChain SSI</pre>

    </dd>

    <dt>服务器端包含（SSI）</dt>
    <dd>与上述相同，但在处理程序上调度（经典SSI行为； .shtml文件得到处理）。
    <pre class="prettyprint lang-config">FilterProvider SSI INCLUDES "%{HANDLER} = 'server-parsed'"
FilterChain SSI</pre>

    </dd>

    <dt>用mod_deflate模拟mod_gzip</dt>
    <dd>仅当Accept-Encoding标头中没有“ gzip”时，才插入INFLATE过滤器。该过滤器以ftype CONTENT_SET运行。<pre class="prettyprint lang-config">FilterDeclare gzip CONTENT_SET
FilterProvider gzip inflate "%{req:Accept-Encoding} !~ /gzip/"
FilterChain gzip</pre>

    </dd>

    <dt>图像下采样</dt>
    <dd>假设我们要对所有Web图像进行降采样，并具有用于GIF，JPEG和PNG的过滤器。<pre class="prettyprint lang-config">FilterProvider unpack jpeg_unpack "%{CONTENT_TYPE} = 'image/jpeg'"
FilterProvider unpack gif_unpack  "%{CONTENT_TYPE} = 'image/gif'"
FilterProvider unpack png_unpack  "%{CONTENT_TYPE} = 'image/png'"

FilterProvider downsample downsample_filter "%{CONTENT_TYPE} = m|^image/(jpeg|gif|png)|"
FilterProtocol downsample "change=yes"

FilterProvider repack jpeg_pack "%{CONTENT_TYPE} = 'image/jpeg'"
FilterProvider repack gif_pack  "%{CONTENT_TYPE} = 'image/gif'"
FilterProvider repack png_pack  "%{CONTENT_TYPE} = 'image/png'"
&lt;Location "/image-filter"&gt;
    FilterChain unpack downsample repack
&lt;/Location&gt;</pre>

    </dd>
    </dl>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="protocol" id="protocol">协议处理</a></h2>
    <p>从历史上看，每个过滤器负责确保在HTTP响应标头中正确表示它所做的任何更改，并且在进行非法更改时不运行。这给过滤器作者带来了负担，他们需要在每个过滤器中重新实现一些常用功能：</p>

    <ul>
    <li>许多过滤器将更改内容，使现有的内容标签，校验和，哈希和长度无效。</li>

    <li>在输入中需要完整无间断响应的过滤器需要确保它们不会从后端获取字节范围。</li>

    <li>在过滤器中转换输出的过滤器需要确保它们不违反后端的<code>Cache-Control: no-transform</code>标头。</li>

    <li>筛选器可能会使响应不可缓存。</li>
    </ul>

    <p><code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>旨在提供对过滤器实现这些细节的通用处理，从而降低内容过滤器模块所需的复杂性。这是正在进行的工作； <code class="directive"><a href="#filterprotocol">FilterProtocol</a></code>实现了其中一些功能，以实现与Apache 2.0模块的向后兼容性。对于httpd 2.1及更高版本， <code>ap_register_output_filter_protocol</code>和<code>ap_filter_protocol</code> API使过滤器模块可以声明其自身的行为。</p>

    <p>同时， <code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>不应干扰要处理协议所有方面的过滤器。默认情况下（即在没有任何<code class="directive"><a href="#filterprotocol">FilterProtocol</a></code>指令的情况下）， <code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>将使标头保持不变。</p>

    <p>在编写本文时，此功能尚未经过测试，因为常用的模块旨在与2.0一起使用。使用它的模块应该仔细测试。</p>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AddOutputFilterByType" id="AddOutputFilterByType">AddOutputFilterByType</a> <a name="addoutputfilterbytype" id="addoutputfilterbytype">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>将输出过滤器分配给特定的媒体类型</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AddOutputFilterByType <var>过滤器</var> [; <var>过滤器</var> ...]
<var>媒体类型</var> [ <var>媒体类型</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_filter</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在版本2.3.7中移至<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>之前有严格的限制</td></tr>
</table>
    <p>该指令根据响应<a class="glossarylink" href="../glossary.html#media-type" title="见词汇">media-type</a>激活请求的特定输出<a href="../filter.html">过滤器</a> 。</p>

    <p>以下示例使用<code>DEFLATE</code>过滤器，该过滤器由<code class="module"><a href="../mod/mod_deflate.html">mod_deflate</a></code>提供。它将压缩所有标记为<code>text/html</code>或<code>text/plain</code>输出（静态或动态），然后再将其发送到客户端。</p>

    <pre class="prettyprint lang-config">AddOutputFilterByType DEFLATE text/html text/plain</pre>


    <p>如果希望内容由多个过滤器处理，则其名称必须用分号分隔。对于每个这些过滤器，也可以使用一个<code class="directive">AddOutputFilterByType</code>指令。</p>

    <p>下面的配置使所有标记为<code>text/html</code>脚本输出首先由<code>INCLUDES</code>过滤器处理，然后由<code>DEFLATE</code>过滤器处理。</p>

    <pre class="prettyprint lang-config">&lt;Location "/cgi-bin/"&gt;
    Options Includes
    AddOutputFilterByType INCLUDES;DEFLATE text/html
&lt;/Location&gt;</pre>



<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/mod_mime.html#addoutputfilter">AddOutputFilter</a></code></li>
<li><code class="directive"><a href="../mod/core.html#setoutputfilter">SetOutputFilter</a></code></li>
<li><a href="../filter.html">过滤器</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FilterChain" id="FilterChain">FilterChain</a> <a name="filterchain" id="filterchain">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>配置过滤器链</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>FilterChain [+ =-@！]<var>过滤器名称</var> <var>...</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>选件</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_filter</td></tr>
</table>
    <p>这将从声明的过滤器配置实际的过滤器链。
    <code class="directive">FilterChain</code>接受任意数量的参数，每个参数可选地以单字符控件开头，该控件确定要执行的操作：</p>

    <dl>
    <dt><code>+ <var>过滤器名称</var></code></dt>
    <dd>将<var>过滤器名称</var>添加到过滤器链的末尾</dd>

    <dt><code>@ <var>过滤名称</var></code></dt>
    <dd>在<var>过滤</var>器链的开头插入<var>过滤器名称</var></dd>

    <dt><code>- <var>过滤器名称</var></code></dt>
    <dd>从<var>过滤</var>器链中删除<var>过滤器名称</var></dd>

    <dt><code>= <var>过滤器名称</var></code></dt>
    <dd>清空过滤器链并插入<var>过滤器名称</var></dd>

    <dt><code>！</code></dt>
    <dd>清空过滤链</dd>

    <dt><code><var>过滤器名称</var></code></dt>
    <dd>相当于<code>+ <var>filter-name</var></code></dd>
    </dl>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FilterDeclare" id="FilterDeclare">FilterDeclare</a> <a name="filterdeclare" id="filterdeclare">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>声明一个智能过滤器</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>FilterDeclare <var>过滤器名称</var> <var>[类型]</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>选件</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_filter</td></tr>
</table>
    <p>该指令声明输出过滤器以及将确定运行时配置的标头或环境变量。第一个参数是在<code class="directive"><a href="#filterprovider">FilterProvider</a></code> ， <code class="directive"><a href="#filterchain">FilterChain</a></code>和<code class="directive"><a href="#filterprotocol">FilterProtocol</a></code>指令中使用的<var>过滤器名称</var> 。</p>

    <p>最后一个（可选）参数是过滤器的类型，并采用<code>ap_filter_type</code>值-即<code>RESOURCE</code> （默认值）， <code>CONTENT_SET</code> ， <code>PROTOCOL</code> ， <code>TRANSCODE</code> ， <code>CONNECTION</code>或<code>NETWORK</code> 。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FilterProtocol" id="FilterProtocol">FilterProtocol</a> <a name="filterprotocol" id="filterprotocol">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>处理正确的HTTP协议处理</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>FilterProtocol <var>过滤器名称</var> [ <var>提供者名称</var> ]协议<var>标志</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>选件</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_filter</td></tr>
</table>
    <p>这指示<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>处理确保过滤器在不应该运行时不运行的情况，并考虑到过滤器的影响正确设置了HTTP响应标头。</p>

    <p>该指令有两种形式。具有三个参数，它专门适用于该<var>过滤器的过滤器名称</var>和<var>提供者名称</var> 。只要有两个参数，它就会在过滤器运行<em>任何</em>提供程序时应用于<var>过滤器名称</var> 。</p>

    <p>用此伪指令指定的标志与基础提供程序可能已在<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>注册的标志合并。例如，过滤器可以在内部指定<code>change=yes</code>的等效项，但是模块的特定配置可以使用<code>change=no</code>覆盖。
    </p>

    <p><var>原型标志</var>是以下一项或多项</p>

    <dl>
    <dt><code>更改=是|否</code></dt>
    <dd>指定过滤器是否更改内容，包括可能的内容长度。2.4.7和更高版本支持“ no”参数。</dd>

    <dt><code>变化= 1：1</code></dt>
    <dd>过滤器更改内容，但不会更改内容长度</dd>

    <dt><code>字节范围=否</code></dt>
    <dd>过滤器无法在字节范围上工作，需要完整的输入</dd>

    <dt><code>proxy =否</code></dt>
    <dd>筛选器不应在代理上下文中运行</dd>

    <dt><code>proxy =转换</code></dt>
    <dd>筛选器以与HTTP <code>Cache-Control: no-transform</code>标头不兼容的方式转换响应。</dd>

    <dt><code>缓存=否</code></dt>
    <dd>过滤器使输出不可缓存（例如，通过引入随机的内容更改）</dd>
    </dl>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FilterProvider" id="FilterProvider">FilterProvider</a> <a name="filterprovider" id="filterprovider">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>注册内容过滤器</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>FilterProvider <var>过滤器名称</var> <var>提供者名称</var> <var>表达式</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>选件</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_filter</td></tr>
</table>
    <p>该指令注册了智能过滤器的<em>提供程序</em> 。当且仅当第一次调用线束时声明的<var>表达式的</var>值为真时，才会调用提供程序。</p>

    <p>
    <var>provider-name</var>必须已经通过加载使用<code>ap_register_output_filter</code>注册名称的模块来注册。
    </p>

    <p><var>表达式</var>是<a href="../expr.html">ap_expr</a> 。</p>


<h3>也可以看看</h3>
<ul>
<li><a href="../expr.html">Apache HTTP Server中的表达式</a> ，以获取完整的参考和示例。</li>
<li><code class="module"><a href="../mod/mod_include.html">mod_include</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FilterTrace" id="FilterTrace">FilterTrace</a> <a name="filtertrace" id="filtertrace">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>从<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>获取调试/诊断信息</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>FilterTrace <var>过滤器名称</var> <var>级别</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_filter</td></tr>
</table>
    <p>该指令从<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>生成调试信息。尽管它也可能对<code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>本身有所帮助，但它旨在帮助测试和调试提供程序（过滤器模块）。</p>

    <p>调试输出取决于设置的<var>级别</var> ：</p>
    <dl>
    <dt><code>0</code> （默认）</dt>
    <dd>没有调试信息生成。</dd>

    <dt><code>1个</code></dt>
    <dd>在提供程序处理它们之前， <code class="module"><a href="../mod/mod_filter.html">mod_filter</a></code>将记录通过过滤器到达错误日志的存储桶和旅。这类似于<a href="http://apache.webthing.com/mod_diagnostics/">mod_diagnostics</a>生成的信息。
    </dd>

    <dt><code>2</code> （尚未实施）</dt>
    <dd>将转储提供者之前传递到临时文件的完整数据。<strong>仅用于单用户调试</strong> ；这将不支持并发命中。</dd>
    </dl>

</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>