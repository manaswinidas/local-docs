<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_userdir-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_userdir</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>用户特定的目录</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>userdir_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_userdir.c</td></tr></table>
<h3>摘要</h3>

<p>该模块允许使用<code>http://example.com/~user/</code>语法访问特定于用户的目录。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#userdir">用户目录</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_userdir">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_userdir">报告错误</a></li></ul><h3>也可以看看</h3>
<ul class="seealso">
<li><a href="../urlmapping.html">将URL映射到文件系统</a></li>
<li><a href="../howto/public_html.html">public_html教程</a></li>
</ul></div>

<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="UserDir" id="UserDir">UserDir</a> <a name="userdir" id="userdir">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>用户特定目录的位置</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>UserDir <em>目录文件名</em> [ <em>目录文件名</em> ] ...
</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>基础</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_userdir</td></tr>
</table>

    <p><code class="directive">UserDir</code>指令将真实目录设置在用户的主目录中，以便在收到针对用户文档的请求时使用。<em>目录文件名</em>是以下之一：</p>

    <ul>
      <li>目录或模式的名称，如下所示。</li>

      <li>关键字<code>disabled</code> 。这将关闭<em>所有</em>用户名到目录的翻译，但使用<code>enabled</code>关键字明确命名的翻译除外（请参见下文）。</li>

      <li>关键字<code>disabled</code>后跟一个用空格分隔的用户名列表。出现在此类列表中的用户名将<em>永远不会</em>执行目录转换，即使它们出现在<code>enabled</code>子句中也是如此。</li>

      <li><code>enabled</code>的关键字后跟一个用空格分隔的用户名列表。即使全局禁用生效，这些用户名也将执行目录转换，但如果它们也出现在<code>disabled</code>子句中，则不会执行。</li>
    </ul>

    <p>如果在<code class="directive">Userdir</code>指令中既没有<code>enabled</code>关键字也没有<code>disabled</code>关键字，则将该参数视为文件名模式，并用于将名称转换为目录规范。对<code>http://www.example.com/~bob/one/two.html</code>的请求将转换为：</p>

    <table>
      <tr><th>使用了UserDir指令</th>
          <th>翻译路径</th></tr>
      <tr><td>UserDir public_html</td>
          <td>〜bob / public_html / one / two.html</td></tr>
      <tr><td>UserDir / usr / web</td>
          <td>/usr/web/bob/one/two.html</td></tr>
      <tr><td>UserDir / home / * / www</td>
          <td>/home/bob/www/one/two.html</td></tr>
    </table>

    <p>以下指令将重定向发送到客户端：</p>

    <table>
      <tr><th>使用了UserDir指令</th>
          <th>翻译路径</th></tr>
      <tr><td>UserDir http://www.example.com/users</td>
          <td>http://www.example.com/users/bob/one/two.html</td></tr>
      <tr><td>UserDir http://www.example.com/*/usr</td>
          <td>http://www.example.com/bob/usr/one/two.html</td></tr>
      <tr><td>UserDir http://www.example.com/~*/</td>
          <td>http://www.example.com/~bob/one/two.html</td></tr>
    </table>

    <div class="note">
      <strong>使用此指令时要小心；例如， <code>"UserDir ./"</code>会将<code>"/~root"</code> <code>"UserDir ./"</code>映射到<code>"/"</code> -这可能是不希望的。强烈建议您的配置包含“ <code>UserDir disabled root</code> ”声明。另请参阅<code class="directive"><a href="../mod/core.html#directory">Directory</a></code>指令和“ <a href="../misc/security_tips.html">安全性提示”</a>页面以获取更多信息。</strong>
    </div>

    <p>其他示例：</p>

    <p>若要允许少数用户拥有<code>UserDir</code>目录，但不允许其他任何人使用，请使用以下命令：</p>

    <pre class="prettyprint lang-config">UserDir disabled
UserDir enabled user1 user2 user3</pre>


    <p>要允许大多数用户拥有<code>UserDir</code>目录，但要拒绝少数用户，请使用以下命令：</p>

    <pre class="prettyprint lang-config">UserDir disabled user4 user5 user6</pre>


    <p>也可以指定备用用户目录。如果使用以下命令：</p>

    <pre class="prettyprint lang-config">UserDir "public_html" "/usr/web" "http://www.example.com/"</pre>


    <p>在请求<code>http://www.example.com/~bob/one/two.html</code> ，它将首先尝试在<code>~bob/public_html/one/two.html</code>上找到该页面，然后在<code>/usr/web/bob/one/two.html</code> ，最后它将重定向发送到<code>http://www.example.com/bob/one/two.html</code> 。</p>

    <p>如果添加重定向，则它必须是列表中的最后一个替代方法。Apache httpd无法确定重定向是否成功，因此，如果您在列表中的较早位置进行了重定向，则将始终使用该替代方法。</p>

    <p>默认情况下，在2.1.4和更高版本中，用户目录替换是不活动的。在早期版本中，如果不存在<code class="directive">UserDir</code>指令，则假定使用<code>UserDir public_html</code> 。</p>

    <div class="note"><h3>合并细节</h3>
    <p>特定启用和禁用用户的列表从全局主机范围替换为虚拟主机范围，而不是合并</p></div>


<h3>也可以看看</h3>
<ul>
<li>
  <a href="../howto/public_html.html">每用户Web目录教程</a>
</li>
</ul>
</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>