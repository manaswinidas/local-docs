<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>mod_cache_disk-Apache HTTP服务器版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache模块mod_cache_disk</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>HTTP缓存筛选器的基于磁盘的存储模块。</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">模块�标识符：</a></th><td>cache_disk_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">源文件：</a></th><td>mod_cache_disk.c</td></tr></table>
<h3>摘要</h3>

    <p><code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>实现了一个基于磁盘的存储管理器<code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code> 。</p>

    <p>缓存的响应的标头和正文分别存储在磁盘上，其结构是从缓存的URL的md5哈希派生的目录结构中。</p>

    <p>可以同时存储多个内容协商的响应，但是此模块尚不支持部分内容的缓存。</p>

    <p>通过将主体文件的设备和inode编号存储在头文件中，可以实现对头文件和主体文件的原子高速缓存更新，而无需锁定。这样做的副作用是，手动移入缓存的缓存条目将被忽略。</p>

    <p>提供<code class="program"><a href="../programs/htcacheclean.html">htcacheclean</a></code>工具来列出缓存的URL，删除缓存的URL或将磁盘缓存的大小保持在大小和/或inode限制内。该工具可以按需运行，也可以守护程序提供对目录大小的连续监视。</p>

    <div class="note"><h3>注意：</h3>
      <p><code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>需要的服务<code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code> ，必须mod_cache_disk之前加载。</p>
    </div>
    <div class="note"><h3>注意：</h3>
      <p>当平台支持并启用<code class="directive"><a href="../mod/core.html#enablesendfile">EnableSendfile</a></code>时， <code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>使用sendfile功能从缓存中提供文件。但是， <code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>会忽略<code class="directive"><a href="../mod/core.html#enablesendfile">EnableSendfile</a></code>按目录和.htaccess配置，因为当从缓存中提供请求时，相应的设置对模块不可用。</p>
    </div>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#cachedirlength">CacheDirLength</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cachedirlevels">CacheDirLevels</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cachemaxfilesize">CacheMaxFileSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cacheminfilesize">CacheMinFileSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cachereadsize">CacheReadSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cachereadtime">CacheReadTime</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cacheroot">缓存根</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=mod_cache_disk">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=mod_cache_disk">报告错误</a></li></ul><h3>也可以看看</h3>
<ul class="seealso">
<li><code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code></li>
<li><code class="module"><a href="../mod/mod_cache_socache.html">mod_cache_socache</a></code></li>
<li><a href="../caching.html">缓存指南</a></li>
</ul></div>

<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheDirLength" id="CacheDirLength">CacheDirLength</a> <a name="cachedirlength" id="cachedirlength">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>子目录名称中的字符数</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheDirLength <var>长度</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CacheDirLength 2</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheDirLength</code>指令为高速缓存层次结构中的每个子目录名称设置字符数。可以将其与<code class="directive">CacheDirLevels</code>结合使用以确定缓存层次结构的大致结构。</p>
    <p>较高的<code class="directive">CacheDirLength</code>值与较低的<code class="directive">CacheDirLevels</code>值将导致层次结构相对平坦，每个级别都有大量子目录。</p>

    <div class="note">
      <p><code class="directive"><a href="#cachedirlevels">CacheDirLevels</a></code> * <code class="directive">CacheDirLength</code>的结果不得大于20。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheDirLevels" id="CacheDirLevels">CacheDirLevels</a> <a name="cachedirlevels" id="cachedirlevels">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>高速缓存中子目录的级别数。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheDirLevels <var>级别</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CacheDirLevels 2</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheDirLevels</code>伪指令设置高速缓存中子目录级别的数量。缓存的数据将保存在<code class="directive"><a href="#cacheroot">CacheRoot</a></code>目录下面的许多目录级别中。</p>
    <p>较高的<code class="directive">CacheDirLevels</code>值和较低的<code class="directive">CacheDirLength</code>值将导致层次结构相对较深，每个级别都有少量子目录。</p>

    <div class="note">
      <p><code class="directive">CacheDirLevels</code> * <code class="directive"><a href="#cachedirlength">CacheDirLength</a></code>的结果不得大于20。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheMaxFileSize" id="CacheMaxFileSize">CacheMaxFileSize</a> <a name="cachemaxfilesize" id="cachemaxfilesize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>要放入缓存中的文档的最大大小（以字节为单位）</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheMaxFileSize <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CacheMaxFileSize 1000000</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheMaxFileSize</code>指令设置要考虑在高速缓存中存储的文档的最大大小（以字节为单位）。</p>

    <pre class="prettyprint lang-config">CacheMaxFileSize 64000</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheMinFileSize" id="CacheMinFileSize">CacheMinFileSize</a> <a name="cacheminfilesize" id="cacheminfilesize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>要放入缓存中的文档的最小大小（以字节为单位）</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheMinFileSize <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CacheMinFileSize 1</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheMinFileSize</code>指令设置要考虑在高速缓存中存储的文档的最小大小（以字节为单位）。</p>

    <pre class="prettyprint lang-config">CacheMinFileSize 64</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheReadSize" id="CacheReadSize">CacheReadSize</a> <a name="cachereadsize" id="cachereadsize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>向下游发送数据之前要读取和缓存的文档的最小大小（以字节为单位）</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheReadSize <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CacheReadSize 0</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheReadSize</code>指令设置在将数据发送到客户端之前要从后端读取的最小数据量（以字节为单位）。默认值为零将导致所有大小的读取数据在到达时立即立即向下游传递到客户端。将此值设置为较高的值会使磁盘高速缓存在将结果发送到客户端之前至少缓冲此数量。从反向代理缓存内容时，这可以提高性能。</p>

    <p>该指令仅在将数据保存到缓存中时才生效，而不是从缓存中提供数据。</p>

    <pre class="prettyprint lang-config">CacheReadSize 102400</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheReadTime" id="CacheReadTime">CacheReadTime</a> <a name="cachereadtime" id="cachereadtime">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>在向下游发送数据之前读取时应经过的最短时间（以毫秒为单位）</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheReadTime <var>毫秒</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CacheReadTime 0</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheReadTime</code>伪指令设置尝试向下游发送数据到客户端之前应该经过的最小经过时间。在这段时间内，数据将被缓冲，然后再将结果发送给客户端。从反向代理缓存内容时，这可以提高性能。</p>

    <p>默认值为零禁用此选项。</p>

    <p>该指令仅在将数据保存到缓存中时才生效，而不是从缓存中提供数据。建议将此选项与<code class="directive"><a href="#cachereadsize">CacheReadSize</a></code>伪指令一起使用，以确保如果数据到达速度比预期的更快，则服务器不会过多缓冲。</p>

    <pre class="prettyprint lang-config">CacheReadTime 1000</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CacheRoot" id="CacheRoot">CacheRoot</a> <a name="cacheroot" id="cacheroot">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>存储缓存文件的目录根目录</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CacheRoot <var>目录</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>延期</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>mod_cache_disk</td></tr>
</table>
    <p><code class="directive">CacheRoot</code>指令定义磁盘上包含高速缓存文件的目录的名称。如果<code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>模块已加载或编译到Apache服务器中，则<em>必须</em>定义此伪指令。未能为<code class="directive">CacheRoot</code>提供值将导致配置文件处理错误。<code class="directive"><a href="#cachedirlevels">CacheDirLevels</a></code>和<code class="directive"><a href="#cachedirlength">CacheDirLength</a></code>指令定义指定根目录下目录的结构。</p>

    <pre class="prettyprint lang-config">CacheRoot c:/cacheroot</pre>


</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>