<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>核心-Apache HTTP Server版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body >
<div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="&lt;-" alt="&lt;-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">HTTP服务器</a> &gt; <a href="http://httpd.apache.org/docs/">文档</a> &gt; <a href="../index.html">版本2.4</a> &gt; <a href="./index.html">模块</a></div>
<div id="page-content">
<div id="preamble"><h1>Apache核心功能</h1>

<table class="module"><tr><th><a href="module-dict.html#Description">描述：</a></th><td>始终可用的核心Apache HTTP Server功能</td></tr>
<tr><th><a href="module-dict.html#Status">状态：</a></th><td>核心</td></tr></table>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><h3 class="directives">指令</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif"> <a href="#acceptfilter">接受过滤器</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#acceptpathinfo">AcceptPathInfo</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#accessfilename">AccessFileName</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#adddefaultcharset">添加默认字符集</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#allowencodedslashes">AllowEncodedSlashes</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#allowoverride">AllowOverride</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#allowoverridelist">AllowOverrideList</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cgimapextension">CGIMapExtension</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cgipassauth">CGIPassAuth</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#cgivar">CGIVar</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#contentdigest">内容摘要</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#defaultruntimedir">DefaultRuntimeDir</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#defaulttype">默认类型</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#define">限定</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#directory">&lt;目录&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#directorymatch">&lt;DirectoryMatch&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#documentroot">文档根</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#else">&lt;其他&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#elseif">&lt;ElseIf&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#enablemmap">启用MMAP</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#enablesendfile">EnableSendfile</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#error">错误</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#errordocument">错误文件</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#errorlog">错误日志</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#errorlogformat">错误日志格式</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#extendedstatus">扩展状态</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#fileetag">FileETag</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#files">&lt;文件&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#filesmatch">&lt;文件匹配&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#forcetype">ForceType</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#gprofdir">GprofDir</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#hostnamelookups">主机名查询</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#httpprotocoloptions">HttpProtocolOptions</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#if">&lt;如果&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#ifdefine">&lt;IfDefine&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#ifmodule">&lt;IfModule&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#include">包括</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#includeoptional">包括可选</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#keepalive">活着</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#keepalivetimeout">KeepAliveTimeout</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limit">&lt;限制&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitexcept">&lt;LimitExcept&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitinternalrecursion">LimitInternalRecursion</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitrequestbody">LimitRequestBody</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitrequestfields">LimitRequestFields</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitrequestfieldsize">LimitRequestFieldSize</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitrequestline">LimitRequestLine</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#limitxmlrequestbody">LimitXMLRequestBody</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#location">&lt;位置&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#locationmatch">&lt;LocationMatch&gt;</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#loglevel">日志级别</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#maxkeepaliverequests">MaxKeepAliveRequests</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#maxrangeoverlaps">MaxRangeOverlaps</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#maxrangereversals">MaxRangeReversals</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#maxranges">最大范围</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#mergetrailers">合并拖车</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#mutex">互斥体</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#namevirtualhost">名称VirtualHost</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#options">选件</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#protocol">协议</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#protocols">通讯协定</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#protocolshonororder">协议荣誉</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#qualifyredirecturl">QualifyRedirectURL</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#registerhttpmethod">RegisterHttpMethod</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#rlimitcpu">RLimitCPU</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#rlimitmem">RLimitMEM</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#rlimitnproc">RLimitNPROC</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#scriptinterpretersource">ScriptInterpreterSource</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#seerequesttail">SeeRequestTail</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#serveradmin">服务器管理员</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#serveralias">服务器别名</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#servername">服务器名称</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#serverpath">服务器路径</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#serverroot">服务器根</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#serversignature">服务器签名</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#servertokens">服务器令牌</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#sethandler">SetHandler</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#setinputfilter">SetInputFilter</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#setoutputfilter">SetOutputFilter</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#timeout">超时</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#traceenable">跟踪启用</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#undefine">未定义</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#usecanonicalname">UseCanonicalName</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#usecanonicalphysicalport">使用规范物理端口</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#virtualhost">&lt;VirtualHost&gt;</a></li>
</ul>
<h3>错误修正清单</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">httpd更新日志</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache httpd-2&amp;query_format=specific&amp;order=changeddate DESC%2Cpriority%2Cbug_severity&amp;component=core">已知的问题</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache httpd-2&amp;component=core">报告错误</a></li></ul></div>

<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AcceptFilter" id="AcceptFilter">AcceptFilter</a> <a name="acceptfilter" id="acceptfilter">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>为协议的侦听器套接字配置优化</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AcceptFilter <var>协议</var> <var>accept_filter</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>该指令根据<code class="directive">Protocol</code>类型为侦听套接字启用特定于操作系统的优化。基本前提是内核在接收到数据或缓冲整个HTTP请求之前不会向服务器进程发送套接字。当前仅支持<a href="http://www.freebsd.org/cgi/man.cgi?query=accept_filter&amp;sektion=9">FreeBSD的Accept Filters</a> ，Linux更为原始的<code>TCP_DEFER_ACCEPT</code>和Windows的优化AcceptEx（）。</p>

    <p>对参数<code>none</code>使用<code>none</code>将禁用该协议的任何接受过滤器。这对于要求服务器首先发送数据的协议很有用，例如<code>ftp:</code>或<code>nntp</code> ：</p>
    <pre class="prettyprint lang-config">AcceptFilter nntp none</pre>


    <p>对于端口443，默认协议名称为<code>https</code> ，对于所有其他端口，默认协议名称为<code>http</code> 。要指定另一个协议正在与侦听端口一起使用，请将<var>protocol</var>参数添加到<code class="directive"><a href="../mod/mpm_common.html#listen">Listen</a></code>伪指令。</p>

    <p>FreeBSD的默认值为：</p>
    <pre class="prettyprint lang-config">AcceptFilter http httpready
AcceptFilter https dataready</pre>


    <p><code>httpready</code> accept过滤器在内核级别缓冲整个HTTP请求。一旦接收到整个请求，内核便将其发送到服务器。有关更多详细信息，请参见<a href="http://www.freebsd.org/cgi/man.cgi?query=accf_http&amp;sektion=9">accf_http（9）</a>手册页。由于HTTPS请求已加密，因此仅使用<a href="http://www.freebsd.org/cgi/man.cgi?query=accf_data&amp;sektion=9">accf_data（9）</a>过滤器。</p>

    <p>Linux上的默认值为：</p>
    <pre class="prettyprint lang-config">AcceptFilter http data
AcceptFilter https data</pre>


    <p>Linux的<code>TCP_DEFER_ACCEPT</code>不支持缓冲http请求。<code>TCP_DEFER_ACCEPT</code>任何值<code>none</code>将在该侦听<code>TCP_DEFER_ACCEPT</code>上启用<code>TCP_DEFER_ACCEPT</code> 。有关更多详细信息，请参见Linux <a href="http://man7.org/linux/man-pages/man7/tcp.7.html">tcp（7）</a>手册页。</p>

    <p>Windows上的默认值为：</p>
    <pre class="prettyprint lang-config">AcceptFilter http connect
AcceptFilter https connect</pre>


    <p>Window的mpm_winnt解释AcceptFilter来切换AcceptEx（）API，并且不支持http协议缓冲。 <code>connect</code>将使用AcceptEx（）API，还检索网络端点地址，但是像<code>none</code> <code>connect</code>一样， <code>connect</code>选项不会等待初始数据传输。</p>

    <p>在Windows上， <code>none</code>使用accept（）而不是AcceptEx（），并且不会回收连接之间的套接字。这对于驱动程序支持已损坏的网络适配器以及某些虚拟网络提供程序（例如vpn驱动程序或垃圾邮件，病毒或间谍软件筛选器）很有用。</p>

    <div class="warning">
      <h3><code>data</code> AcceptFilter（Windows）</h3>

      <p>对于2.4.23及更低版本，Windows <code>data</code>接受筛选器将一直等待，直到发送完数据并且已从单个AcceptEx（）调用中检索了初始数据缓冲区和网络端点地址。此实现遭到拒绝服务攻击，已被禁用。</p>

      <p>当前版本的httpd默认为Windows上的<code>connect</code>过滤器，并且如果指定了<code>data</code> ，则将回退以进行<code>connect</code> 。鼓励早期版本的用户为其AcceptFilter添加一个显式的<code>connect</code>设置，如上所示。</p>
    </div>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#protocol">协议</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AcceptPathInfo" id="AcceptPathInfo">AcceptPathInfo</a> <a name="acceptpathinfo" id="acceptpathinfo">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>资源接受尾随路径名信息</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AcceptPathInfo开|关|默认</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AcceptPathInfo默认</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>

    <p>此伪指令控制是否接受包含跟随实际文件名（或现有目录中不存在的文件）的尾随路径名信息的请求。尾随路径名信息可用于<code>PATH_INFO</code>环境变量中的脚本。</p>

    <p>例如，假设位置<code>/test/</code>指向仅包含单个文件<code>here.html</code> 。然后，对<code>/test/here.html/more</code>和<code>/test/nothere.html/more</code>请求都将<code>/more</code>作为<code>PATH_INFO</code>收集。</p>

    <p><code class="directive">AcceptPathInfo</code>指令的三个可能的参数是：</p>
    <dl>
    <dt><code>关</code></dt><dd>仅当请求映射到存在的文字路径时，该请求才会被接受。因此，在上面的示例中，在真实文件名之后带有尾随路径名信息的请求（例如<code>/test/here.html/more</code>将返回404 NOT FOUND错误。</dd>

    <dt><code>上</code></dt><dd>如果前导路径组件映射到存在的文件，则将接受请求。如果<code>/test/here.html</code>映射到有效文件，则上面的示例<code>/test/here.html/more</code>将被接受。</dd>

    <dt><code>默认</code></dt><dd>具有尾随路径名信息的请求的<a href="../handler.html">处理方式</a>由负责请求的<a href="../handler.html">处理程序</a>确定。普通文件的核心处理程序默认为拒绝<code>PATH_INFO</code>请求。提供脚本的处理程序（例如<a href="mod_cgi.html">cgi-script</a>和<a href="mod_isapi.html">isapi-handler</a> ）通常默认情况下接受<code>PATH_INFO</code> 。</dd>
    </dl>

    <p><code>AcceptPathInfo</code>指令的主要目的是允许您覆盖处理程序选择接受还是拒绝<code>PATH_INFO</code> 。例如，当您使用<a href="../filter.html">过滤器</a> （例如<a href="mod_include.html">INCLUDES）</a>基于<code>PATH_INFO</code>生成内容时，此覆盖是必需的。核心处理程序通常会拒绝该请求，因此您可以使用以下配置来启用此类脚本：</p>

    <pre class="prettyprint lang-config">&lt;Files "mypaths.shtml"&gt;
  Options +Includes
  SetOutputFilter INCLUDES
  AcceptPathInfo On
&lt;/Files&gt;</pre>



</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AccessFileName" id="AccessFileName">AccessFileName</a> <a name="accessfilename" id="accessfilename">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>分布式配置文件的名称</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AccessFileName <var>文件名</var> [ <var>文件名</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AccessFileName .htaccess</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>在处理请求时，如果<a href="#allowoverride">为该目录启用了</a>分布式配置文件，则服务器将从该名称列表中的文档路径的每个目录中查找第一个现有配置文件。例如：</p>

    <pre class="prettyprint lang-config">AccessFileName .acl</pre>


    <p>返回文档之前<code>/usr/local/web/index.html</code> ，服务器将读取<code>/.acl</code> ， <code>/usr/.acl</code> ， <code>/usr/local/.acl</code>和<code>/usr/local/web/.acl</code>的指令，除非他们已被禁用：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/"&gt;
    AllowOverride None
&lt;/Directory&gt;</pre>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#allowoverride">AllowOverride</a></code></li>
<li><a href="../configuring.html">配置文件</a></li>
<li><a href="../howto/htaccess.html">.htaccess文件</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AddDefaultCharset" id="AddDefaultCharset">AddDefaultCharset</a> <a name="adddefaultcharset" id="adddefaultcharset">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>响应内容类型为<code>text/plain</code>或<code>text/html</code>时要添加的默认charset参数</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AddDefaultCharset开|关| <var>字符集</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AddDefaultCharset关</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>当且仅当响应的content-type为<code>text/plain</code>或<code>text/html</code>此伪指令指定要添加到响应的媒体类型charset参数的默认值（字符编码的名称）。这应该覆盖通过<code>META</code>元素在响应主体中指定的任何字符集，尽管确切的行为通常取决于用户的客户端配置。<code>AddDefaultCharset Off</code>的设置将禁用此功能。<code>AddDefaultCharset On</code>启用默认字符集<code>iso-8859-1</code> 。假定其他任何值都是要使用的<var>字符集</var> ，它应该是用于Internet媒体类型（MIME类型）的<a href="http://www.iana.org/assignments/character-sets">IANA注册字符集值</a>之一。例如：</p>

    <pre class="prettyprint lang-config">AddDefaultCharset utf-8</pre>


    <p>仅当已知所应用的所有文本资源都位于该字符编码中并且不方便单独标记其字符集时，才应使用<code class="directive">AddDefaultCharset</code> 。一个这样的示例是将charset参数添加到包含生成的内容的资源（例如旧版CGI脚本）中，由于输出中包含用户提供的数据，这些资源可能容易受到跨站点脚本攻击。但是请注意，更好的解决方案是仅修复（或删除）这些脚本，因为设置默认字符集并不能保护已在其浏览器上启用“自动检测字符编码”功能的用户。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/mod_mime.html#addcharset">添加字符集</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AllowEncodedSlashes" id="AllowEncodedSlashes">AllowEncodedSlashes</a> <a name="allowencodedslashes" id="allowencodedslashes">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定是否允许通过URL中的编码路径分隔符</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AllowEncodedSlashes On | Off | NoDecode</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AllowEncodedSlashes关</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>NoDecode选项在2.3.12及更高版本中可用。</td></tr>
</table>
    <p><code class="directive">AllowEncodedSlashes</code>指令允许在路径信息中使用包含编码的路径分隔符（ <code>/</code>为<code>%2F</code> ，在符合协议的系统上为<code>\</code> <code>%5C</code> ）的URL。</p>

    <p>使用默认值<code>Off</code> ，将拒绝此类URL，并显示404（未找到）错误。</p>

    <p>如果值为<code>On</code> ，则接受此类URL，并且像所有其他编码字符一样对编码斜杠进行解码。</p>

    <p>使用值<code>NoDecode</code> ，可以接受此类URL，但是不会对编码的斜杠进行解码，而是将其保留为编码状态。</p>

    <p>打开<code class="directive">AllowEncodedSlashes</code> <code>On</code>配合使用时是最有用<code>PATH_INFO</code> 。</p>

    <div class="note"><h3>注意</h3>
      <p>如果路径信息中需要编码的斜杠，则强烈建议使用<code>NoDecode</code>作为安全措施。允许对斜杠进行解码可能会导致路径不安全。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#acceptpathinfo">AcceptPathInfo</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AllowOverride" id="AllowOverride">AllowOverride</a> <a name="allowoverride" id="allowoverride">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td><code>.htaccess</code>文件中允许的指令类型</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AllowOverride全部|无| <var>指令类型</var> [ <var>指令类型</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AllowOverride无（2.3.9及更高版本），AllowOverride All（2.3.8及更低版本）</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>当服务器找到<code>.htaccess</code>文件（由<code class="directive"><a href="#accessfilename">AccessFileName</a></code>指定）时，它需要知道该文件中声明的指令可以覆盖较早的配置指令。</p>

    <div class="note"><h3>仅在&lt;目录&gt;部分中可用</h3>
    <code class="directive">AllowOverride</code>仅在指定的不带正则表达式的<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>部分中有效，而在<code class="directive"><a href="#location">&lt;Location&gt;</a></code> ， <code class="directive"><a href="#directorymatch">&lt;DirectoryMatch&gt;</a></code>或<code class="directive"><a href="#files">&lt;Files&gt;</a></code>部分中无效。
    </div>

    <p>当此伪指令设置为<code>None</code>且<code class="directive"><a href="#allowoverridelist">AllowOverrideList</a></code>设置为<code>None</code> ， <a href="#accessfilename">.htaccess</a>文件将被完全忽略。在这种情况下，服务器甚至不会尝试读取文件系统中的<code>.htaccess</code>文件。</p>

    <p>当此伪指令设置为<code>All</code> ， <code>.htaccess</code>文件中将允许具有.htaccess <a href="directive-dict.html#Context">上下文的</a>任何伪指令。</p>

    <p><var>指令类型</var>可以是以下指令组之一。（有关每个<var>指令类型</var>启用了哪些指令的最新列表，请参见<a href="overrides.html">重写类索引</a> 。）</p>

    <dl>
      <dt><a href="overrides.html#override-authconfig">验证配置</a></dt>

      <dd>允许使用授权指令（ <code class="directive"><a href="../mod/mod_authz_dbm.html#authdbmgroupfile">AuthDBMGroupFile</a></code> ， <code class="directive"><a href="../mod/mod_authn_dbm.html#authdbmuserfile">AuthDBMUserFile</a></code> ， <code class="directive"><a href="../mod/mod_authz_groupfile.html#authgroupfile">AuthGroupFile</a></code> ， <code class="directive"><a href="../mod/mod_authn_core.html#authname">AuthName</a></code> ， <code class="directive"><a href="../mod/mod_authn_core.html#authtype">AuthType</a></code> ， <code class="directive"><a href="../mod/mod_authn_file.html#authuserfile">AuthUserFile</a></code> ， <code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code> <em>等</em> ）。</dd>

      <dt><a href="overrides.html#override-fileinfo">文件信息</a></dt>

      <dd>允许使用控制文档类型的指令（ <code class="directive"><a href="#errordocument">ErrorDocument</a></code> ， <code class="directive"><a href="#forcetype">ForceType</a></code> ， <code class="directive"><a href="../mod/mod_negotiation.html#languagepriority">LanguagePriority</a></code> ， <code class="directive"><a href="#sethandler">SetHandler</a></code> ， <code class="directive"><a href="#setinputfilter">SetInputFilter</a></code> ， <code class="directive"><a href="#setoutputfilter">SetOutputFilter</a></code>和<code class="module"><a href="../mod/mod_mime.html">mod_mime</a></code> Add *和Remove *指令），文档元数据（ <code class="directive"><a href="../mod/mod_headers.html#header">Header</a></code> ， <code class="directive"><a href="../mod/mod_headers.html#requestheader">RequestHeader</a></code> ， <code class="directive"><a href="../mod/mod_setenvif.html#setenvif">SetEnvIf</a></code> ， <code class="directive"><a href="../mod/mod_setenvif.html#setenvifnocase">SetEnvIfNoCase</a></code> ， <code class="directive"><a href="../mod/mod_setenvif.html#browsermatch">BrowserMatch</a></code> ， <code class="directive"><a href="../mod/mod_usertrack.html#cookieexpires">CookieExpires</a></code> ， <code class="directive"><a href="../mod/mod_usertrack.html#cookiedomain">CookieDomain</a></code> ， <code class="directive"><a href="../mod/mod_usertrack.html#cookiestyle">CookieStyle</a></code> ， <code class="directive"><a href="../mod/mod_usertrack.html#cookietracking">CookieTracking</a></code> ， <code class="directive"><a href="../mod/mod_usertrack.html#cookiename">CookieName</a></code> ）， <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>指令（ <code class="directive"><a href="../mod/mod_rewrite.html#rewriteengine">RewriteEngine</a></code> ， <code class="directive"><a href="../mod/mod_rewrite.html#rewriteoptions">RewriteOptions</a></code> ， <code class="directive"><a href="../mod/mod_rewrite.html#rewritebase">RewriteBase</a></code> ， <code class="directive"><a href="../mod/mod_rewrite.html#rewritecond">RewriteCond</a></code> ， <code class="directive"><a href="../mod/mod_rewrite.html#rewriterule">RewriteRule</a></code> ）， <code class="module"><a href="../mod/mod_alias.html">mod_alias</a></code>指令（ <code class="directive"><a href="../mod/mod_alias.html#redirect">Redirect</a></code> ， <code class="directive"><a href="../mod/mod_alias.html#redirecttemp">RedirectTemp</a></code> ， <code class="directive"><a href="../mod/mod_alias.html#redirectpermanent">RedirectPermanent</a></code> ， <code class="directive"><a href="../mod/mod_alias.html#redirectmatch">RedirectMatch</a></code> ）和<code class="directive"><a href="../mod/mod_actions.html#action">Action</a></code>从<code class="module"><a href="../mod/mod_actions.html">mod_actions</a></code> 。
      </dd>

      <dt><a href="overrides.html#override-indexes">指标</a></dt>

      <dd>允许使用的指令控制目录索引（的<code class="directive"><a href="../mod/mod_autoindex.html#adddescription">AddDescription</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#addicon">AddIcon</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#addiconbyencoding">AddIconByEncoding</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#addiconbytype">AddIconByType</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#defaulticon">DefaultIcon</a></code> ， <code class="directive"><a href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a></code> ， <a href="mod_autoindex.html#indexoptions.fancyindexing"><code>FancyIndexing</code></a> ， <code class="directive"><a href="../mod/mod_autoindex.html#headername">HeaderName</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#indexignore">IndexIgnore</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#indexoptions">IndexOptions</a></code> ， <code class="directive"><a href="../mod/mod_autoindex.html#readmename">ReadmeName</a></code> <em>等</em> ）。</dd>

      <dt><a href="overrides.html#override-limit">限制</a></dt>

      <dd>允许使用控制主机访问的指令（ <code class="directive"><a href="../mod/mod_access_compat.html#allow">Allow</a></code> ， <code class="directive"><a href="../mod/mod_access_compat.html#deny">Deny</a></code>和<code class="directive"><a href="../mod/mod_access_compat.html#order">Order</a></code> ）。</dd>

      <dt>Nonfatal = [覆盖|未知|全部]</dt>

      <dd>允许使用AllowOverride选项将.htaccess中的语法错误视为非致命错误。不会导致内部服务器错误，而是会忽略不允许的或无法识别的指令，并记录警告：<ul>
          <li><strong>Nonfatal = Override</strong>将AllowOverride禁止的指令视为非致命指令。</li>
          <li><strong>Nonfatal = Unknown</strong>将未知指令视为非致命指令。这涵盖了由不存在的模块实现的错别字和指令。</li>
          <li><strong>Nonfatal = All</strong>将以上两者均视为非致命。</li>
      </ul>
      <p>请注意，有效指令中的语法错误仍将导致内部服务器错误。</p>
      <div class="warning"><h3>安全</h3>非致命错误可能会对.htaccess用户造成安全隐患。例如，如果AllowOverride禁止AuthConfig，则旨在限制用户访问网站的用户配置将被禁用。
      </div>
      </dd>

      <dt><a href="overrides.html#override-options">选项</a> [= <var>选项</var> ，...]</dt>

      <dd>允许使用控制特定目录功能的指令（ <code class="directive"><a href="#options">Options</a></code>和<code class="directive"><a href="../mod/mod_include.html#xbithack">XBitHack</a></code> ）。可以给一个等号，后跟一个逗号分隔的列表，不带空格，可以使用<code class="directive"><a href="#options">Options</a></code>命令设置<code class="directive"><a href="#options">Options</a></code> 。

      <div class="note"><h3>隐式禁用选项</h3>
      <p>即使可以使用此伪指令限制.htaccess文件中可能使用的选项列表，只要允许使用任何<code class="directive"><a href="#options">Options</a></code>伪指令，就可以使用非相对语法禁用任何其他继承的选项。换句话说，此机制无法在允许<em>设置</em>任何其他选项的同时强制保持特定选项的设置。
      </p></div>

      <div class="example"><p><code>AllowOverride选项=索引，多视图</code></p></div>
      </dd>
    </dl>

    <p>例：</p>

    <pre class="prettyprint lang-config">AllowOverride AuthConfig Indexes</pre>


    <p>在上面的示例中，不在组<code>AuthConfig</code>和<code>Indexes</code>中的所有指令都将导致内部服务器错误。</p>

    <div class="note"><p>出于安全和性能的原因，在<code>&lt;Directory "/"&gt;</code>块中，请勿将<code>AllowOverride</code>设置为<code>None</code> 。而是查找（或创建） <code>&lt;Directory&gt;</code>块，该块引用您实际计划放置<code>.htaccess</code>文件的目录。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#accessfilename">AccessFileName</a></code></li>
<li><code class="directive"><a href="#allowoverridelist">AllowOverrideList</a></code></li>
<li><a href="../configuring.html">配置文件</a></li>
<li><a href="../howto/htaccess.html">.htaccess文件</a></li>
<li><a href="overrides.html">.htaccess的覆盖类索引</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="AllowOverrideList" id="AllowOverrideList">AllowOverrideList</a> <a name="allowoverridelist" id="allowoverridelist">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td><code>.htaccess</code>文件中允许的单个指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>AllowOverrideList无| <var>指令</var> [ <var>指令类型</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>AllowOverrideList无</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>当服务器找到<code>.htaccess</code>文件（由<code class="directive"><a href="#accessfilename">AccessFileName</a></code>指定）时，它需要知道该文件中声明的指令可以覆盖较早的配置指令。</p>

    <div class="note"><h3>仅在&lt;目录&gt;部分中可用</h3>
    <code class="directive">AllowOverrideList</code>仅在指定的没有正则表达式的<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>部分中有效，而在<code class="directive"><a href="#location">&lt;Location&gt;</a></code> ， <code class="directive"><a href="#directorymatch">&lt;DirectoryMatch&gt;</a></code>或<code class="directive"><a href="#files">&lt;Files&gt;</a></code>部分中无效。
    </div>

    <p>当此伪指令设置为<code>None</code>且<code class="directive"><a href="#allowoverride">AllowOverride</a></code>设置为<code>None</code> ， <a href="#accessfilename">.htaccess</a>文件将被完全忽略。在这种情况下，服务器甚至不会尝试读取文件系统中的<code>.htaccess</code>文件。</p>

    <p>例：</p>

    <pre class="prettyprint lang-config">AllowOverride None
AllowOverrideList Redirect RedirectMatch</pre>


    <p>在上面的示例中，仅允许使用<code>Redirect</code>和<code>RedirectMatch</code>指令。其他所有情况都将导致内部服务器错误。</p>

    <p>例：</p>

    <pre class="prettyprint lang-config">AllowOverride AuthConfig
AllowOverrideList CookieTracking CookieName</pre>


    <p>在上面的示例中， <code class="directive"><a href="#allowoverride">AllowOverride</a></code>授予对<code>AuthConfig</code>指令分组的权限，而<code class="directive">AllowOverrideList</code>授予对<code>FileInfo</code>指令分组中的两个指令的权限。其他所有情况都将导致内部服务器错误。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#accessfilename">AccessFileName</a></code></li>
<li><code class="directive"><a href="#allowoverride">AllowOverride</a></code></li>
<li><a href="../configuring.html">配置文件</a></li>
<li><a href="../howto/htaccess.html">.htaccess文件</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CGIMapExtension" id="CGIMapExtension">CGIMapExtension</a> <a name="cgimapextension" id="cgimapextension">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>为CGI脚本定位解释器的技术</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CGIMapExtension <var>cgi-path</var> <var>.extension</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>仅NetWare</td></tr>
</table>
    <p>该指令用于控制Apache httpd如何查找用于运行CGI脚本的解释器。例如，设置<code>CGIMapExtension sys:\foo.nlm .foo</code>将导致所有带有<code>.foo</code>扩展名的CGI脚本文件传递到FOO解释器。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CGIPassAuth" id="CGIPassAuth">CGIPassAuth</a> <a name="cgipassauth" id="cgipassauth">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>启用将HTTP授权标头作为CGI变量传递给脚本</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CGIPassAuth开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>CGIPassAuth关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>验证配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.4.13和更高版本中可用</td></tr>
</table>
    <p><code class="directive">CGIPassAuth</code>允许脚本访问HTTP授权标头，例如<code>Authorization</code> ，这是实现HTTP Basic身份验证的脚本所必需的。通常，这些HTTP标头是从脚本中隐藏的。这是为了防止脚本在Web服务器中启用HTTP基本身份验证时看到用于访问服务器的用户ID和密码。当允许脚本实现HTTP Basic身份验证时，应使用此伪指令。</p>

    <p>可以使用此伪指令代替Apache HTTP Server早期版本中提供的编译时设置<code>SECURITY_HOLE_PASS_AUTHORIZATION</code> 。</p>

    <p>任何使用<code>ap_add_common_vars()</code>模块<code>ap_add_common_vars()</code>例如<code class="module"><a href="../mod/mod_cgi.html">mod_cgi</a></code> ， <code class="module"><a href="../mod/mod_cgid.html">mod_cgid</a></code> ， <code class="module"><a href="../mod/mod_proxy_fcgi.html">mod_proxy_fcgi</a></code> ， <code class="module"><a href="../mod/mod_proxy_scgi.html">mod_proxy_scgi</a></code>等等<code>ap_add_common_vars()</code>都遵守该设置。值得注意的是，它会影响通常无法处理请求但仍使用此API的模块；例如<code class="module"><a href="../mod/mod_include.html">mod_include</a></code>和<code class="module"><a href="../mod/mod_ext_filter.html">mod_ext_filter</a></code> 。不使用<code>ap_add_common_vars()</code>的第三方模块也可以选择遵循此设置。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="CGIVar" id="CGIVar">CGIVar</a> <a name="cgivar" id="cgivar">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>控制如何设置某些CGI变量</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>CGIVar <var>变量</var> <var>规则</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.4.21和更高版本中可用</td></tr>
</table>
  <p>该指令控制如何设置某些CGI变量。</p>

  <p><strong>REQUEST_URI</strong>规则：</p>
  <dl>
    <dt><code>original-uri</code> （默认）</dt>
    <dd>该值取自原始请求行，不会反映内部重定向或更改请求资源的子请求。</dd>
    <dt><code>当前uri</code></dt>
    <dd>该值反映当前正在处理的资源，由于内部重定向或子请求，该资源可能与来自客户端的原始请求不同。</dd>
  </dl>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ContentDigest" id="ContentDigest">ContentDigest</a> <a name="contentdigest" id="contentdigest">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>启用<code>Content-MD5</code> HTTP响应标头的生成</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ContentDigest开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>内容摘要关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>选件</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>此伪指令可以生成分别在RFC1864和RFC2616中定义的<code>Content-MD5</code>标头。</p>

    <p>MD5是一种算法，用于计算任意长度数据的“消息摘要”（有时称为“指纹”），并且高度确信数据中的任何更改都会反映在消息摘要中。</p>

    <p><code>Content-MD5</code>标头提供了实体主体的端到端消息完整性检查（MIC）。代理或客户端可以检查此标头，以检测对运输中的实体的意外修改。标头示例：</p>

    <div class="example"><p><code>内容MD5：AuLb7Dp1rqtRtxz2m9kRpA ==</code></p></div>

    <p>请注意，这可能会导致服务器性能问题，因为消息摘要是针对每个请求进行计算的（不缓存值）。</p>

    <p>仅针对<code class="module"><a href="../mod/core.html">core</a></code>提供的文档发送<code>Content-MD5</code> ，而不发送任何模块提供的文档。例如，SSI文档，CGI脚本的输出以及字节范围响应都没有此标头。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="DefaultRuntimeDir" id="DefaultRuntimeDir">DefaultRuntimeDir</a> <a name="defaultruntimedir" id="defaultruntimedir">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器运行时文件的基本目录</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>DefaultRuntimeDir <var>目录路径</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>DefaultRuntimeDir DEFAULT_REL_RUNTIMEDIR（日志/）</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache 2.4.2和更高版本中可用</td></tr>
</table>
    <p><code class="directive">DefaultRuntimeDir</code>指令设置服务器将在其中创建各种运行时文件（共享内存，锁等）的目录。如果设置为相对路径，则完整路径将相对于<code class="directive">ServerRoot</code> 。</p>

    <p><strong>例</strong></p>
   <pre class="prettyprint lang-config">DefaultRuntimeDir scratch/</pre>


    <p>可以通过在构建时更改<code>DEFAULT_REL_RUNTIMEDIR</code> #define来修改<code class="directive">DefaultRuntimeDir</code>的默认位置。</p>

   <p>注意：应该在使用此伪指令之前指定<code class="directive">ServerRoot</code> 。否则，将使用<code class="directive">ServerRoot</code>的默认值来设置基本目录。</p>


<h3>也可以看看</h3>
<ul>
<li>有关如何正确设置<code class="directive">ServerRoot</code>权限的信息<a href="../misc/security_tips.html#serverroot">的安全提示</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="DefaultType" id="DefaultType">DefaultType</a> <a name="defaulttype" id="defaulttype">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>如果该值不为<code>none</code>则此指令除了发出警告外没有其他作用。在以前的版本中，DefaultType将指定默认媒体类型以分配给响应内容，而找不到其他媒体类型配置。
</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>DefaultType <var>媒体类型|无</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>DefaultType无</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache httpd 2.2.7和更高版本中， <code>none</code>参数可用。对于2.3.x和更高版本，所有其他选项均被禁用。</td></tr>
</table>
    <p>该指令已被禁用。为了向后兼容配置文件，可以将其指定为值<code>none</code> ，表示没有默认媒体类型。例如：</p>

    <pre class="prettyprint lang-config">DefaultType None</pre>


    <p><code>DefaultType None</code>仅在httpd-2.2.7和更高版本中可用。</p>

    <p>使用mime.types配置文件和<code class="directive"><a href="../mod/mod_mime.html#addtype">AddType</a></code>通过文件扩展名配置媒体类型分配，或者使用<code class="directive"><a href="#forcetype">ForceType</a></code>指令为特定资源配置媒体类型。否则，服务器将发送不包含Content-Type标头字段的响应，并且收件人可能会尝试猜测媒体类型。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Define" id="Define">定义</a> <a name="define" id="define">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>定义一个变量</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>定义<var>参数名称</var> [ <var>parameter-value</var> ]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>在其一个参数形式中， <code class="directive">Define</code>等效于将<code>-D</code>参数传递给<code class="program"><a href="../programs/httpd.html">httpd</a></code> 。它可用于切换<code class="directive"><a href="#ifdefine">&lt;IfDefine&gt;</a></code>节的使用，而无需在任何启动脚本中更改<code>-D</code>参数。</p>

    <p>除此之外，如果给定第二个参数，则将配置变量设置为此值。可以使用<code>${VAR}</code>语法在配置中使用该<code>${VAR}</code> 。该变量始终是全局定义的，并且不限于周围的config部分的范围。</p>

    <pre class="prettyprint lang-config">&lt;IfDefine TEST&gt;
  Define servername test.example.com
&lt;/IfDefine&gt;
&lt;IfDefine !TEST&gt;
  Define servername www.example.com
  Define SSL
&lt;/IfDefine&gt;

DocumentRoot "/var/www/${servername}/htdocs"</pre>


    <p>变量名称不能包含冒号“：”字符，以避免与<code class="directive"><a href="../mod/mod_rewrite.html#rewritemap">RewriteMap</a></code>的语法冲突。</p>

    <div class="note"><h3>虚拟主机范围和陷阱</h3>
      <p>尽管虚拟主机上下文中支持此指令，但其所作的更改对于任何后续的配置指令（除了任何封闭的虚拟主机）都是可见的。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#undefine">未定义</a></code></li>
<li><code class="directive"><a href="#ifdefine">如果定义</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Directory" id="Directory">&lt;目录&gt;</a> <a name="directory" id="directory">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含一组仅适用于命名文件系统目录，子目录及其内容的指令。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;目录<var>目录路径</var> &gt; ... &lt;/目录&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;Directory&gt;</code>和<code>&lt;/Directory&gt;</code>用于封装一组指令，这些指令仅适用于命名目录，该目录的子目录以及相应目录中的文件。可以使用目录上下文中允许的任何指令。<var>Directory-path</var>可以是目录的完整路径，也可以是使用Unix Shell样式匹配的通配符字符串。在通配符字符串中， <code>?</code> 匹配任何单个字符， <code>*</code>匹配任何字符序列。您也可以使用<code>[]</code>字符范围。所有通配符都不匹配'/'字符，因此<code>&lt;Directory "/*/public_html"&gt;</code>将不匹配<code>/home/user/public_html</code> ，而<code>&lt;Directory "/home/*/public_html"&gt;</code>将匹配。例：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/usr/local/httpd/htdocs"&gt;
  Options Indexes FollowSymLinks
&lt;/Directory&gt;</pre>


    <p>目录路径<em>可能会</em>被引用，如果你喜欢，但是，它<em>必须</em> ，如果路径中包含空格引用。这是因为否则空格将指示参数的结尾。</p>

    <div class="note">
      <p>注意<var>目录路径</var>参数：它们必须从字面上匹配Apache httpd用于访问文件的文件系统路径。应用于特定<code>&lt;Directory&gt;</code>指令将不适用于通过不同路径（例如，通过不同符号链接）从同一目录访问的文件。</p>
    </div>

    <p>除了<code>~</code>字符外，还可以使用<a class="glossarylink" href="../glossary.html#regex" title="见词汇">正则表达式</a> 。例如：</p>

    <pre class="prettyprint lang-config">&lt;Directory ~ "^/www/[0-9]{3}"&gt;

&lt;/Directory&gt;</pre>


    <p>将匹配<code>/www/</code>中由三个数字组成的目录。</p>

    <p>如果多个（非正则表达式） <code class="directive">&lt;Directory&gt;</code>节与包含文档的目录（或其父目录之一）匹配，则将首先以最短匹配的顺序应用这些指令，并散布<a href="#accessfilename">.htaccess</a>文件中的指令。例如，</p>

    <pre class="prettyprint lang-config">&lt;Directory "/"&gt;
  AllowOverride None
&lt;/Directory&gt;

&lt;Directory "/home"&gt;
  AllowOverride FileInfo
&lt;/Directory&gt;</pre>


    <p>要访问文件<code>/home/web/dir/doc.html</code>执行以下步骤：</p>

    <ul>
      <li>Apply指令<code>AllowOverride None</code> （禁用<code>.htaccess</code>文件）。</li>

      <li>Apply指令<code>AllowOverride FileInfo</code> （用于目录<code>/home</code> ）。</li>

      <li>应用所有<code>FileInfo</code>在指令<code>/home/.htaccess</code> ， <code>/home/web/.htaccess</code>和<code>/home/web/dir/.htaccess</code>的顺序。</li>
    </ul>

    <p>在应用了所有正常节之后，才考虑使用正则表达式。然后，按照它们在配置文件中出现的顺序测试所有正则表达式。例如，</p>

    <pre class="prettyprint lang-config">&lt;Directory ~ "abc$"&gt;
  # ... directives here ...
&lt;/Directory&gt;</pre>


    <p>在应用了所有常规<code class="directive">&lt;Directory&gt;</code>和<code>.htaccess</code>文件之后，才考虑使用正则表达式部分。然后，正则表达式将在<code>/home/abc/public_html/abc</code>上匹配，并且将应用相应的<code class="directive">&lt;Directory&gt;</code> 。</p>

   <p><strong>请注意，对<code>&lt;Directory "/"&gt;</code>的默认访问是允许所有访问。这意味着Apache httpd将提供从URL映射的任何文件。建议您使用诸如</strong></p>

    <pre class="prettyprint lang-config">&lt;Directory "/"&gt;
  Require all denied
&lt;/Directory&gt;</pre>


    <p><strong>然后将其替换为您<em>想要</em>访问的目录。有关更多详细信息，请参见“ <a href="../misc/security_tips.html">安全提示”</a>页面。</strong></p>

    <p>目录部分出现在<code>httpd.conf</code>文件中。
    <code class="directive">&lt;Directory&gt;</code>指令不能嵌套，也不能出现在<code class="directive"><a href="#limit">&lt;Limit&gt;</a></code>或<code class="directive"><a href="#limitexcept">&lt;LimitExcept&gt;</a></code>节中。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="DirectoryMatch" id="DirectoryMatch">&lt;DirectoryMatch&gt;</a> <a name="directorymatch" id="directorymatch">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含适用于与正则表达式匹配的文件系统目录的内容的指令。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;DirectoryMatch <var>正则表达式</var> &gt; ... &lt;/ DirectoryMatch&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;DirectoryMatch&gt;</code>和<code>&lt;/DirectoryMatch&gt;</code>用于封装一组指令，这些指令仅适用于与<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>相同的命名目录（及其中的文件）。但是，它以<a class="glossarylink" href="../glossary.html#regex" title="见词汇">正则表达式</a>作为参数。例如：</p>

    <pre class="prettyprint lang-config">&lt;DirectoryMatch "^/www/(.+/)?[0-9]{3}/"&gt;
    # ...
&lt;/DirectoryMatch&gt;</pre>


    <p>匹配<code>/www/</code> （或其任何子目录）中由三个数字组成的目录。</p>

   <div class="note"><h3>兼容性</h3>在2.3.9之前的版本中，此伪指令隐式应用于子目录（例如<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code> ），并且与行符号（$）的末尾不匹配。在2.3.9及更高版本中，仅与表达式匹配的目录受附带的指令影响。
    </div>

    <div class="note"><h3>尾部斜杠</h3>该伪指令适用于对可能以斜线结尾或不以斜线结尾的目录的请求，因此，必须谨慎地编写锚定到行尾（$）的表达式。
    </div>

    <p>从2.4.8开始，将捕获命名的组和反向引用，并将其以大写的前缀“ MATCH_”的相应名称写入环境。这允许从<a href="../expr.html">表达式</a>和模块（例如<code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>引用路径的元素。为了避免混淆，将忽略编号（未命名）的反向引用。请改用命名组。</p>

    <pre class="prettyprint lang-config">&lt;DirectoryMatch "^/var/www/combined/(?&lt;sitename&gt;[^/]+)"&gt;
    Require ldap-group cn=%{env:MATCH_SITENAME},ou=combined,o=Example
&lt;/DirectoryMatch&gt;</pre>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>描述正则表达式如何与普通<code class="directive">&lt;Directory&gt;</code>混合</li>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="DocumentRoot" id="DocumentRoot">DocumentRoot</a> <a name="documentroot" id="documentroot">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>构成从网络可见的主文档树的目录</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>DocumentRoot <var>目录路径</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>DocumentRoot“ / usr / local / apache / htdocs”</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>此伪指令设置<code class="program"><a href="../programs/httpd.html">httpd</a></code>将从中提供文件的目录。除非通过与<code class="directive"><a href="../mod/mod_alias.html#alias">Alias</a></code>之类的指令匹配，否则服务器会将从请求的URL到文档根目录的路径附加到该文档的路径中。例：</p>

    <pre class="prettyprint lang-config">DocumentRoot "/usr/web"</pre>


    <p>然后对<code>http://my.example.com/index.html</code>的访问就是<code>/usr/web/index.html</code> 。如果<var>目录路径</var>不是绝对<var>路径</var> ，则假定它是相对于<code class="directive"><a href="#serverroot">ServerRoot</a></code> 。</p>

    <p>应指定<code class="directive">DocumentRoot</code>结尾不能带有斜杠。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../urlmapping.html#documentroot">将URL映射到文件系统位置</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Else" id="Else">&lt;其他&gt;</a> <a name="else" id="else">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含仅在运行时请求不满足前一个<code class="directive"><a href="#if">&lt;If&gt;</a></code>或<code class="directive"><a href="#elseif">&lt;ElseIf&gt;</a></code>部分的条件时适用的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;Else&gt; ... &lt;/ Else&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>嵌套条件在2.4.26及更高版本中进行评估</td></tr>
</table>
    <p>当且仅当未应用同一作用域中的最新<code class="directive">&lt;If&gt;</code>或<code class="directive">&lt;ElseIf&gt;</code>部分时， <code class="directive">&lt;Else&gt;</code>应用封闭的指令。例如：</p>

    <pre class="prettyprint lang-config">&lt;If "-z req('Host')"&gt;
  # ...
&lt;/If&gt;
&lt;Else&gt;
  # ...
&lt;/Else&gt;</pre>


    <p><code class="directive">&lt;If&gt;</code>将匹配没有<var>Host：</var>头的HTTP / 1.0请求，而<code class="directive">&lt;Else&gt;</code>将匹配带有<var>Host：</var>头的请求。</p>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#if">&lt;如果&gt;</a></code></li>
<li><code class="directive"><a href="#elseif">&lt;ElseIf&gt;</a></code></li>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;，&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分。
    <code class="directive">&lt;If&gt;</code> ， <code class="directive">&lt;ElseIf&gt;</code>和<code class="directive">&lt;Else&gt;</code> 。</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ElseIf" id="ElseIf">&lt;ElseIf&gt;</a> <a name="elseif" id="elseif">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含仅在运行时请求满足条件而前一个<code class="directive"><a href="#if">&lt;If&gt;</a></code>或<code class="directive">&lt;ElseIf&gt;</code>部分的条件不满足时才适用的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;ElseIf <var>表达式</var> &gt; ... &lt;/ ElseIf&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>嵌套条件在2.4.26及更高版本中进行评估</td></tr>
</table>
    <p>当且仅当给定条件的计算结果都为true且未应用同一范围中的最新<code class="directive">&lt;If&gt;</code>或<code class="directive">&lt;ElseIf&gt;</code>部分时， <code class="directive">&lt;ElseIf&gt;</code>应用封闭的指令。例如：</p>

    <pre class="prettyprint lang-config">&lt;If "-R '10.1.0.0/16'"&gt;
  #...
&lt;/If&gt;
&lt;ElseIf "-R '10.0.0.0/8'"&gt;
  #...
&lt;/ElseIf&gt;
&lt;Else&gt;
  #...
&lt;/Else&gt;</pre>


    <p>如果请求的远程地址属于子网10.0.0.0/8但不属于子网10.1.0.0/16，则<code class="directive">&lt;ElseIf&gt;</code>将匹配。</p>


<h3>也可以看看</h3>
<ul>
<li><a href="../expr.html">Apache HTTP Server中的表达式</a> ，以获取完整参考和更多示例。</li>
<li><code class="directive"><a href="#if">&lt;如果&gt;</a></code></li>
<li><code class="directive"><a href="#else">&lt;其他&gt;</a></code></li>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;，&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分。
    <code class="directive">&lt;If&gt;</code> ， <code class="directive">&lt;ElseIf&gt;</code>和<code class="directive">&lt;Else&gt;</code> 。</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="EnableMMAP" id="EnableMMAP">EnableMMAP</a> <a name="enablemmap" id="enablemmap">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>在传送过程中使用内存映射读取文件</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>EnableMMAP开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>启用MMAP</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>该指令控制<code class="program"><a href="../programs/httpd.html">httpd</a></code>如果需要在传递过程中读取文件的内容，则是否可以使用内存映射。默认情况下，当处理请求需要访问文件中的数据时（例如，使用<code class="module"><a href="../mod/mod_include.html">mod_include</a></code>交付服务器解析的文件时），如果操作系统支持，Apache httpd内存将映射该文件。</p>

    <p>这种内存映射有时会提高性能。但是在某些环境中，最好禁用内存映射以防止操作问题：</p>

    <ul>
    <li>在某些多处理器系统上，内存映射会降低<code class="program"><a href="../programs/httpd.html">httpd</a></code>的性能。</li>
    <li>在<code class="program"><a href="../programs/httpd.html">httpd</a></code>具有内存映射的文件中删除或截断文件可能会导致<code class="program"><a href="../programs/httpd.html">httpd</a></code>崩溃并出现分段错误。
    </li>
    </ul>

    <p>对于易受这些问题影响的服务器配置，应通过指定以下内容来禁用已传递文件的内存映射：</p>

    <pre class="prettyprint lang-config">EnableMMAP Off</pre>


    <p>对于NFS挂载的文件，可以通过指定以下内容明确禁用有问题的文件的此功能：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/path-to-nfs-files"&gt;
  EnableMMAP Off
&lt;/Directory&gt;</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="EnableSendfile" id="EnableSendfile">EnableSendfile</a> <a name="enablesendfile" id="enablesendfile">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用内核sendfile支持将文件传送到客户端</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>EnableSendfile开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>EnableSendfile关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在版本2.3.9中默认更改为“关闭”。</td></tr>
</table>
    <p>该指令控制<code class="program"><a href="../programs/httpd.html">httpd</a></code>是否可以使用内核的sendfile支持来将文件内容传输到客户端。默认情况下，当请求的处理不需要访问文件中的数据时（例如，传递静态文件时），如果操作系统支持，Apache httpd使用sendfile传递文件内容而无需读取文件。</p>

    <p>这种sendfile机制避免了单独的读取和发送操作以及缓冲区分配。但是在某些平台或某些文件系统内，最好禁用此功能以避免操作问题：</p>

    <ul>
    <li>某些平台可能破坏了构建系统无法检测到的sendfile支持，尤其是如果这些二进制文件是在另一个盒子上构建的，并且转移到了具有sendfile支持被破坏的机器上的话。</li>
    <li>在Linux上，使用IPv6时，使用sendfile会触发某些网卡上的TCP校验和卸载错误。</li>
    <li>在Itanium上的Linux上， <code>sendfile</code>可能无法处理大小超过2GB的文件。</li>
    <li>使用网络安装的<code class="directive"><a href="#documentroot">DocumentRoot</a></code> （例如NFS，SMB，CIFS，FUSE），内核可能无法通过其自己的缓存为网络文件提供服务。</li>
    </ul>

    <p>对于不易受这些问题影响的服务器配置，可以通过指定以下内容来启用此功能：</p>

    <pre class="prettyprint lang-config">EnableSendfile On</pre>


    <p>对于网络安装的文件，可以通过指定以下内容来明确禁用有问题的文件的此功能：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/path-to-nfs-files"&gt;
  EnableSendfile Off
&lt;/Directory&gt;</pre>

    <p>请注意， <code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>不支持<code class="directive">EnableSendfile</code>的按目录和.htaccess配置。模块仅考虑<code class="directive">EnableSendfile</code>全局定义。
    </p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Error" id="Error">错误</a> <a name="error" id="error">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>使用自定义错误消息中止配置解析</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>错误<var>讯息</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>2.3.9及更高版本</td></tr>
</table>
    <p>如果可以在配置内检测到错误，则可以使用此伪指令生成自定义错误消息，并停止配置解析。通常用于报告配置中缺少的必需模块。</p>

    <pre class="prettyprint lang-config"># Example
# ensure that mod_include is loaded
&lt;IfModule !include_module&gt;
  Error "mod_include is required by mod_foo.  Load it with LoadModule."
&lt;/IfModule&gt;

# ensure that exactly one of SSL,NOSSL is defined
&lt;IfDefine SSL&gt;
&lt;IfDefine NOSSL&gt;
  Error "Both SSL and NOSSL are defined.  Define only one of them."
&lt;/IfDefine&gt;
&lt;/IfDefine&gt;
&lt;IfDefine !SSL&gt;
&lt;IfDefine !NOSSL&gt;
  Error "Either SSL or NOSSL must be defined."
&lt;/IfDefine&gt;
&lt;/IfDefine&gt;</pre>



</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ErrorDocument" id="ErrorDocument">ErrorDocument</a> <a name="errordocument" id="errordocument">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>发生错误时服务器将返回给客户端的内容</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ErrorDocument <var>错误代码</var> <var>文件</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>如果出现问题或错误，则可以将Apache httpd配置为执行以下四种操作之一，</p>

    <ol>
      <li>输出简单的硬编码错误消息</li>

      <li>输出定制的消息</li>

      <li>内部重定向到本地<var>URL路径</var>以处理问题/错误</li>

      <li>重定向到外部<var>URL</var>以处理问题/错误</li>
    </ol>

    <p>第一个选项是默认选项，而选项2-4是使用<code class="directive">ErrorDocument</code>指令配置的，其后是HTTP响应代码以及URL或消息。Apache httpd有时会提供有关问题/错误的其他信息。</p>

    <p>从2.4.13开始，可以在指令内部使用<a href="../expr.html">表达式语法</a>来生成动态字符串和URL。</p>

    <p>URL可以以本地Web路径的斜线（/）开头（相对于<code class="directive"><a href="#documentroot">DocumentRoot</a></code> ），也可以是客户端可以解析的完整URL。可替代地，可以提供消息以由浏览器显示。请注意，在解析任何表达式之前要确定参数是URL，路径还是消息。例子：</p>

    <pre class="prettyprint lang-config">ErrorDocument 500 http://example.com/cgi-bin/server-error.cgi
ErrorDocument 404 /errors/bad_urls.php
ErrorDocument 401 /subscription_info.html
ErrorDocument 403 "Sorry, can't allow you access today"
ErrorDocument 403 Forbidden!
ErrorDocument 403 /errors/forbidden.py?referrer=%{escape:%{HTTP_REFERER}}</pre>


    <p>此外，特殊值<code>default</code>可用于指定Apache httpd的简单硬编码消息。虽然在通常情况下不是必需的，但是<code>default</code>情况下，它将恢复Apache httpd的简单硬编码消息，以进行配置，否则这些配置将继承现有的<code class="directive">ErrorDocument</code> 。</p>

    <pre class="prettyprint lang-config">ErrorDocument 404 /cgi-bin/bad_urls.pl

&lt;Directory "/web/docs"&gt;
  ErrorDocument 404 default
&lt;/Directory&gt;</pre>


    <p>请注意，当您指定一个指向远程URL的<code class="directive">ErrorDocument</code>时（例如，带有<code>http</code>的方法的任何东西），Apache HTTP Server会将重定向发送到客户端以告诉它在哪里可以找到该文档，即使该文档最终位于同一服务器上。这有几个含义，最重要的是，客户端将不会收到原始错误状态代码，而是会收到重定向状态代码。反过来，这可能会使Web机器人和其他尝试使用状态代码确定URL是否有效的客户端混淆。此外，如果您在<code>ErrorDocument 401</code>使用远程URL，则客户端将不知道提示用户输入密码，因为它将不会收到401状态码。因此， <strong>如果您使用<code>ErrorDocument 401</code>指令，则它必须引用本地文档。</strong></p>

    <p>默认情况下，Microsoft Internet Explorer（MSIE）将忽略服务器生成的错误消息，如果它们“太小”，而用其自身的“友好”错误消息代替。大小阈值因错误类型而异，但是通常，如果使错误文档大于512字节，则MSIE将显示服务器生成的错误而不是将其掩盖。Microsoft知识库文章<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;Q294807">Q294807中</a>提供了更多信息。</p>

    <p>尽管可以覆盖大多数错误消息，但是在某些情况下，无论<code class="directive"><a href="#errordocument">ErrorDocument</a></code>的设置如何，都使用内部消息。特别是，如果检测到格式错误的请求，将立即停止正常的请求处理并返回内部错误消息。这对于防止由错误请求引起的安全问题是必要的。</p>

    <p>如果使用的是mod_proxy，则可能希望启用<code class="directive"><a href="../mod/mod_proxy.html#proxyerroroverride">ProxyErrorOverride</a></code>以便可以代表原始服务器提供自定义错误消息。如果未启用ProxyErrorOverride，则Apache httpd将不会为代理内容生成自定义错误文档。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../custom-error.html">可自定义回复的文档</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ErrorLog" id="ErrorLog">ErrorLog</a> <a name="errorlog" id="errorlog">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器将记录错误的位置</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ErrorLog <var>文件路径</var> | syslog [：[ <var>工具</var> ] [： <var>标记</var> ]]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ErrorLog日志/ error_log（Unix）ErrorLog日志/error.log（Windows和OS / 2）</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ErrorLog</code>指令设置服务器将遇到的任何错误记录到的文件名。如果<var>文件路径</var>不是绝对<var>路径</var> ，则假定它是相对于<code class="directive"><a href="#serverroot">ServerRoot</a></code> 。</p>

    <pre class="prettyprint lang-config">ErrorLog "/var/log/httpd/error_log"</pre>


    <p>如果<var>文件路径</var>以竖线字符“ <code>|</code> ”开头，则假定它是生成以处理错误日志的命令。</p>

    <pre class="prettyprint lang-config">ErrorLog "|/usr/local/bin/httpd_errors"</pre>


    <p>有关更多信息，请参见<a href="../logs.html#piped">管道日志中</a>的注释。</p>

    <p>如果系统支持，则使用<code>syslog</code>而不是文件名可以通过syslogd（8）进行日志记录。缺省设置是使用syslog工具<code>local7</code> ，但是您可以使用<code>syslog: <var>facility</var></code>语法来覆盖此设置，其中， <var>工具</var>可以是通常在syslog（1）中记录的名称之一。该功能实际上是全局的，如果在单个虚拟主机中进行了更改，则指定的最终功能会影响整个服务器。syslog标记适用相同的规则，默认情况下，该标记使用Apache二进制名称<code>httpd</code> （大多数情况下）。您也可以使用<code>syslog:: <var>tag</var></code>语法来覆盖它。</p>

    <pre class="prettyprint lang-config">ErrorLog syslog:user
ErrorLog syslog:user:httpd.srv1
ErrorLog syslog::httpd.srv2</pre>


    <p>其他模块可以提供自己的ErrorLog提供程序。语法类似于上面的<code>syslog</code>示例。</p>

    <p>安全性：有关启动日志的用户以外的任何人都可写存储日志文件的目录的原因，为什么会损害安全性的详细信息，请参阅<a href="../misc/security_tips.html#serverroot">安全性提示</a>文档。</p>
    <div class="warning"><h3>注意</h3>
      <p>在非Unix平台上输入文件路径时，即使平台可能允许使用反斜杠，也应注意确保仅使用正斜杠。通常，在整个配置文件中始终使用正斜杠是一个好主意。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#loglevel">日志级别</a></code></li>
<li><a href="../logs.html">Apache HTTP服务器日志文件</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ErrorLogFormat" id="ErrorLogFormat">ErrorLogFormat</a> <a name="errorlogformat" id="errorlogformat">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>错误日志条目的格式规范</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ErrorLogFormat [连接|请求] <var>格式</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ErrorLogFormat</code>允许指定除实际日志消息之外，在错误日志中记录了哪些补充信息。</p>

    <pre class="prettyprint lang-config">#Simple example
ErrorLogFormat "[%t] [%l] [pid %P] %F: %E: [client %a] %M"</pre>


    <p><code>connection</code>或<code>request</code>指定为第一个参数允许指定其他格式，从而分别在记录特定连接或请求的第一条消息时记录其他信息。每个连接/请求仅记录一次此附加信息。如果在处理连接或请求时未引起任何日志消息，则也不会记录其他信息。</p>

    <p>某些格式字符串项可能不会产生输出，这可能会发生。例如，仅当日志消息与请求相关联并且日志消息发生在已经从客户端读取了Referer标头的时间时，Referer标头才出现。如果未产生任何输出，则默认行为是删除从前一个空格字符到下一个空格字符的所有内容。这意味着在非空白到空白的转换中，日志行被隐式划分为多个字段。如果格式字符串项未产生输出，则将省略整个字段。例如，如果日志格式为<code>[%t] [%l] [%a] %M</code>的远程地址<code>%a</code>不可用，则也不会记录括号。可以使用反斜杠对空格字符进行转义，以防止它们分隔字段。组合'％'（空格百分比）是零宽度的字段定界符，不会产生任何输出。</p>

    <p>通过将修饰符添加到格式字符串项，可以更改上述行为。如果各个项目未产生任何输出，则<code>-</code> （减号）修饰符会导致记录减号。在每个连接/请求一次的格式中，也可以使用<code>+</code> （加号）修饰符。如果带有plus修饰符的项目不产生任何输出，则省略整行。</p>

    <p>用作修饰符的数字可用于将日志严重性级别分配给格式项。仅当日志消息的严重性不高于指定的日志严重性级别时，才记录该项目。该数字的范围可以从1（警告）到4（警告）和7（调试）到15（trace8）。</p>

    <p>例如，如果您在<code>%{Referer}i</code>令牌中添加了修饰符，则会记录以下内容，该令牌会记录<code>Referer</code>请求标头。</p>

    <table class="bordered"><tr class="header"><th>修改令牌</th><th>含义</th></tr>
<tr>
    <td><code>％-{Referer} i</code></td>
    <td>记录<code>-</code>如果未设置<code>Referer</code> 。</td>
    </tr>
<tr class="odd">
    <td><code>％+ {Referer} i</code></td>
    <td>如果未设置<code>Referer</code>则省略整行。</td>
    </tr>
<tr>
    <td><code>％4 {Referer} i</code></td>
    <td>仅当日志消息严重性高于4时才记录<code>Referer</code> 。</td>
    </tr>
</table>

    <p>某些格式字符串项目在括号中接受其他参数。</p>

    <table class="bordered"><tr class="header"><th>格式字符串</th> <th>描述</th></tr>
<tr><td><code>%%</code></td>
        <td>百分号</td></tr>
<tr class="odd"><td><code>％一种</code></td>
        <td>客户端IP地址和请求的端口</td></tr>
<tr><td><code>％{c} a</code></td>
        <td>基础对等IP地址和连接端口（请参见<code class="module"><a href="../mod/mod_remoteip.html">mod_remoteip</a></code>模块）</td></tr>
<tr class="odd"><td><code>％一种</code></td>
        <td>本地IP地址和端口</td></tr>
<tr><td><code>％{ <em>name</em> } e</code></td>
        <td>请求环境变量<em>名称</em></td></tr>
<tr class="odd"><td><code>％E</code></td>
        <td>APR / OS错误状态代码和字符串</td></tr>
<tr><td><code>％F</code></td>
        <td>日志调用的源文件名和行号</td></tr>
<tr class="odd"><td><code>％{ <em>name</em> } i</code></td>
        <td>请求标头<em>名称</em></td></tr>
<tr><td><code>％k</code></td>
        <td>此连接上的保持活动请求数</td></tr>
<tr class="odd"><td><code>％l</code></td>
        <td>消息的日志级别</td></tr>
<tr><td><code>％L</code></td>
        <td>请求的日志ID</td></tr>
<tr class="odd"><td><code>％{c} L</code></td>
        <td>连接的日志ID</td></tr>
<tr><td><code>％{C} L</code></td>
        <td>连接的日志ID（如果用于连接范围），否则为空</td></tr>
<tr class="odd"><td><code>％m</code></td>
        <td>记录消息的模块名称</td></tr>
<tr><td><code>％M</code></td>
        <td>实际的日志消息</td></tr>
<tr class="odd"><td><code>％{ <em>name</em> } n</code></td>
        <td>要求备注<em>名称</em></td></tr>
<tr><td><code>％P</code></td>
        <td>当前进程的进程ID</td></tr>
<tr class="odd"><td><code>％T</code></td>
        <td>当前线程的线程ID</td></tr>
<tr><td><code>％{g} T</code></td>
        <td>当前线程的系统唯一线程ID（与例如<code>top</code>显示的ID相同；仅适用于Linux）</td></tr>
<tr class="odd"><td><code>％t</code></td>
        <td>当前时间</td></tr>
<tr><td><code>％{u} t</code></td>
        <td>当前时间，包括微秒</td></tr>
<tr class="odd"><td><code>％{切</code></td>
        <td>紧凑ISO 8601格式的当前时间，包括微秒</td></tr>
<tr><td><code>％v</code></td>
        <td>当前服务器的规范<code class="directive"><a href="#servername">ServerName</a></code> 。</td></tr>
<tr class="odd"><td><code>％V</code></td>
        <td>根据<code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code>设置为请求提供服务的服务器的服务器名称。</td></tr>
<tr><td><code>\</code> （反斜杠空格）</td>
        <td>非场定界空间</td></tr>
<tr class="odd"><td><code>%</code> （空间百分比）</td>
        <td>字段定界符（无输出）</td></tr>
</table>

    <p>日志ID格式<code>%L</code>为连接或请求生成唯一的ID。这可用于关联哪些日志行属于同一连接或请求，哪个请求发生在哪个连接上。在<code class="module"><a href="../mod/mod_log_config.html">mod_log_config</a></code>还可以使用<code>%L</code>格式字符串，以使访问日志条目与错误日志行相关联。如果加载了<code class="module"><a href="../mod/mod_unique_id.html">mod_unique_id</a></code> ，则其唯一ID将用作请求的日志ID。</p>

    <pre class="prettyprint lang-config">#Example (default format for threaded MPMs)
ErrorLogFormat "[%{u}t] [%-m:%l] [pid %P:tid %T] %7F: %E: [client\ %a] %M%�,\�referer\�%{Referer}i"</pre>


    <p>这将导致错误消息，例如：</p>

    <div class="example"><p><code>[2011年5月12日星期四08：28：57.652118] [core：error] [pid 8777：tid 4326490112] [client :: 1：58619]文件不存在：/usr/local/apache2/htdocs/favicon.ico</code></p></div>

    <p>请注意，如上所述，由于未定义某些字段，因此将其完全省略。</p>

    <pre class="prettyprint lang-config">#Example (similar to the 2.2.x format)
ErrorLogFormat "[%t] [%l] %7F: %E: [client\ %a] %M%�,\�referer\�%{Referer}i"</pre>


    <pre class="prettyprint lang-config">#Advanced example with request/connection log IDs
ErrorLogFormat "[%{uc}t] [%-m:%-l] [R:%L] [C:%{C}L] %7F: %E: %M"
ErrorLogFormat request "[%{uc}t] [R:%L] Request %k on C:%{c}L pid:%P tid:%T"
ErrorLogFormat request "[%{uc}t] [R:%L] UA:'%+{User-Agent}i'"
ErrorLogFormat request "[%{uc}t] [R:%L] Referer:'%+{Referer}i'"
ErrorLogFormat connection "[%{uc}t] [C:%{c}L] local\ %a remote\ %A"</pre>



<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#errorlog">错误日志</a></code></li>
<li><code class="directive"><a href="#loglevel">日志级别</a></code></li>
<li><a href="../logs.html">Apache HTTP服务器日志文件</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ExtendedStatus" id="ExtendedStatus">ExtendedStatus</a> <a name="extendedstatus" id="extendedstatus">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>跟踪每个请求的扩展状态信息</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ExtendedStatus开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ExtendedStatus关闭[*]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>此选项跟踪每个工作人员有关当前正在执行的请求的其他数据，并创建利用率摘要。您可以通过配置<code class="module"><a href="../mod/mod_status.html">mod_status</a></code>在运行时看到这些变量。请注意，其他模块可能依赖于此计分板。</p>

    <p>此设置适用于整个服务器，并且不能在逐个虚拟主机的基础上启用或禁用。扩展状态信息的收集会降低服务器的速度。另请注意，在正常重启期间无法更改此设置。</p>

    <div class="note">
    <p>请注意，加载<code class="module"><a href="../mod/mod_status.html">mod_status</a></code>会将默认行为更改为ExtendedStatus On，而其他第三方模块可能会执行相同的操作。这样的模块依赖于收集有关所有工人状态的详细信息。从版本2.3.6开始，默认值由<code class="module"><a href="../mod/mod_status.html">mod_status</a></code>更改。以前的默认值始终为“关”。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FileETag" id="FileETag">FileETag</a> <a name="fileetag" id="fileetag">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>用于为静态文件创建ETag HTTP响应标头的文件属性</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>FileETag <var>组件</var> ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>FileETag MTime大小</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.14及更早版本中，默认值是“ INode MTime Size”。</td></tr>
</table>
    <p><code class="directive">FileETag</code>指令配置当文档基于静态文件时用于创建<code>ETag</code> （实体标签）响应头字段的文件属性。（ <code>ETag</code>值在缓存管理中用于节省网络带宽。）<code class="directive">FileETag</code>指令允许您选择应使用其中的哪一个（如果有）。公认的关键字是：</p>

    <dl>
     <dt><strong>节点</strong></dt>
     <dd>文件的索引节点编号将包含在计算中</dd>
     <dt><strong>时间</strong></dt>
     <dd>上次修改文件的日期和时间将包括在内</dd>
     <dt><strong>尺寸</strong></dt>
     <dd>文件中的字节数将被包括在内</dd>
     <dt><strong>所有</strong></dt>
     <dd>将使用所有可用字段。这等效于：<pre class="prettyprint lang-config">FileETag INode MTime Size</pre>
</dd>
     <dt><strong>没有</strong></dt>
     <dd>如果文档是基于文件的，则响应中将不包含<code>ETag</code>字段</dd>
    </dl>

    <p><code>INode</code> ， <code>MTime</code>和<code>Size</code>关键字可以带有<code>+</code>或<code>-</code>前缀，这允许对从更广范围继承的默认设置进行更改。任何不带此类前缀的关键字立即出现并完全取消继承的设置。</p>

    <p>如果目录的配置包含<code>FileETag INode MTime Size</code> ，而子目录的包含<code>FileETag -INode</code> ，则该子目录的设置（将由任何不覆盖它的子子目录继承）等同于<code>FileETag MTime Size</code> 。</p>
    <div class="warning"><h3>警告</h3>请勿更改已启用WebDAV的目录或位置的默认设置，并使用<code class="module"><a href="../mod/mod_dav_fs.html">mod_dav_fs</a></code>作为存储提供程序。
    <code class="module"><a href="../mod/mod_dav_fs.html">mod_dav_fs</a></code>使用<code>MTime Size</code>作为固定格式，用于对条件请求进行<code>ETag</code>比较。如果通过<code class="directive">FileETag</code>更改了<code>ETag</code>格式，则这些条件请求将中断。
    </div>
    <div class="note"><h3>服务器端包括</h3>对于由<code class="module"><a href="../mod/mod_include.html">mod_include</a></code>解析的响应，不会生成ETag，因为响应实体可以更改，而无需更改具有嵌入式SSI指令的INode，MTime或静态文件的大小。
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Files" id="Files">&lt;文件&gt;</a> <a name="files" id="files">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含适用于匹配文件名的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;Files <var>filename</var> &gt; ... &lt;/ Files&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;Files&gt;</code>指令按文件名限制随附指令的范围。它与<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>和<code class="directive"><a href="#location">&lt;Location&gt;</a></code>指令可比。它应该与<code>&lt;/Files&gt;</code>指令匹配。本节中给出的指令将应用于具有与指定文件名匹配的基本名（文件名的最后一个组成部分）的任何对象。在读取<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>节和<code>.htaccess</code>文件之后，但在<code class="directive"><a href="#location">&lt;Location&gt;</a></code>节之前，按照在配置文件中出现的顺序处理<code class="directive">&lt;Files&gt;</code> <code class="directive"><a href="#location">&lt;Location&gt;</a></code>节。注意， <code class="directive">&lt;Files&gt;</code>可以嵌套在<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>节中，以限制它们应用于文件系统的一部分。</p>

    <p><var>filename</var>参数应包含文件名或通配符字符串，其中<code>?</code> 匹配任何单个字符， <code>*</code>匹配任何字符序列。</p>
    <pre class="prettyprint lang-config">&lt;Files "cat.html"&gt;
    # Insert stuff that applies to cat.html here
&lt;/Files&gt;

&lt;Files "?at.*"&gt;
    # This would apply to cat.html, bat.html, hat.php and so on.
&lt;/Files&gt;</pre>

    <p>除了<code>~</code>字符外，还可以使用<a class="glossarylink" href="../glossary.html#regex" title="见词汇">正则表达式</a> 。例如：</p>

    <pre class="prettyprint lang-config">&lt;Files ~ "\.(gif|jpe?g|png)$"&gt;
    #...
&lt;/Files&gt;</pre>


    <p>可以匹配最常见的Internet图形格式。但是，首选<code class="directive"><a href="#filesmatch">&lt;FilesMatch&gt;</a></code> 。</p>

    <p>请注意，与<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>和<code class="directive"><a href="#location">&lt;Location&gt;</a></code>部分不同，可以在<code>.htaccess</code>文件中使用<code class="directive">&lt;Files&gt;</code>部分。这允许用户在逐个文件级别控制对自己文件的访问。</p>


<h3>也可以看看</h3>
<ul>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="FilesMatch" id="FilesMatch">&lt;FilesMatch&gt;</a> <a name="filesmatch" id="filesmatch">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含适用于正则表达式匹配文件名的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;FilesMatch <var>正则表达式</var> &gt; ... &lt;/ FilesMatch&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>与<code class="directive"><a href="#files">&lt;Files&gt;</a></code>指令一样， <code class="directive">&lt;FilesMatch&gt;</code>指令也按文件名限制了封闭指令的范围。但是，它接受<a class="glossarylink" href="../glossary.html#regex" title="见词汇">正则表达式</a> 。例如：</p>

    <pre class="prettyprint lang-config">&lt;FilesMatch ".+\.(gif|jpe?g|png)$"&gt;
    # ...
&lt;/FilesMatch&gt;</pre>


    <p>可以匹配最常见的Internet图形格式。</p>

    <div class="note">正则表达式开头的<code>.+</code>确保不匹配名为<code>.png</code>或<code>.gif</code>文件。</div>

    <p>从2.4.8开始，将捕获命名的组和反向引用，并将其以大写的前缀“ MATCH_”的相应名称写入环境。这允许从<a href="../expr.html">表达式</a>和模块（例如<code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>引用文件的元素。为了避免混淆，将忽略编号（未命名）的反向引用。请改用命名组。</p>

    <pre class="prettyprint lang-config">&lt;FilesMatch "^(?&lt;sitename&gt;[^/]+)"&gt;
    require ldap-group cn=%{env:MATCH_SITENAME},ou=combined,o=Example
&lt;/FilesMatch&gt;</pre>


<h3>也可以看看</h3>
<ul>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ForceType" id="ForceType">ForceType</a> <a name="forcetype" id="forcetype">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>强制所有匹配的文件以HTTP Content-Type标头字段中的指定媒体类型提供</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ForceType <var>媒体类型</var> |无</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>当放置在<code>.htaccess</code>文件或<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>或<code class="directive"><a href="#location">&lt;Location&gt;</a></code>或<code class="directive"><a href="#files">&lt;Files&gt;</a></code>节中时，此伪指令将强制所有匹配的文件使用<var>media-type</var>给出的内容类型标识进行服务。例如，如果您的目录中充满了GIF文件，但不想将它们全部标记为<code>.gif</code> ，则可能要使用：</p>

    <pre class="prettyprint lang-config">ForceType image/gif</pre>


    <p>请注意，此指令会覆盖mime.types或通过<code class="directive"><a href="../mod/mod_mime.html#addtype">AddType</a></code>定义的其他间接媒体类型关联。</p>

    <p>您还可以使用<code>None</code>的值覆盖更一般的<code class="directive">ForceType</code>设置：</p>

    <pre class="prettyprint lang-config"># force all files to be image/gif:
&lt;Location "/images"&gt;
  ForceType image/gif
&lt;/Location&gt;

# but normal mime-type associations here:
&lt;Location "/images/mixed"&gt;
  ForceType None
&lt;/Location&gt;</pre>


    <p>该指令主要覆盖为从文件系统提供的静态文件生成的内容类型。对于静态文件以外的资源（响应的生成器通常指定了Content-Type），该指令无效。</p>

    <div class="note"><h3>注意</h3>
    <p>当诸如<code class="directive"><a href="#sethandler">SetHandler</a></code>或<code class="directive"><a href="../mod/mod_mime.html#addhandler">AddHandler</a></code>类的显式指令不适用于当前请求时，通常将这些指令设置的内部处理程序名称设置为与此指令指定的内容类型匹配。这是一种历史行为，某些第三方模块（例如mod_php）可能使用“魔术”内容类型，这些内容类型仅用于指示该模块对匹配请求负责。应该通过使用<code class="directive"><a href="#sethandler">SetHandler</a></code>或<code class="directive"><a href="../mod/mod_mime.html#addhandler">AddHandler</a></code>避免依赖于此类“魔术”类型的配置。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="GprofDir" id="GprofDir">GprofDir</a> <a name="gprofdir" id="gprofdir">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>要写入gmon.out分析数据的目录。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>GprofDir <var>/ tmp / gprof /</var> | <var>/ tmp / gprof /</var> ％</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>使用gprof分析支持对服务器进行编译后，当进程退出时， <code class="directive">GprofDir</code> <code>gmon.out</code>文件写入指定的目录。如果参数以百分比符号（'％'）结尾，则会为每个进程ID创建子目录。</p>

    <p>该指令当前仅适用于<code class="module"><a href="../mod/prefork.html">prefork</a></code> MPM。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="HostnameLookups" id="HostnameLookups">主机名查询</a> <a name="hostnamelookups" id="hostnamelookups">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>在客户端IP地址上启用DNS查找</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>主机名查阅开|关|双</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>主机名关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>该指令启用DNS查找，以便可以记录主机名（并在<code>REMOTE_HOST</code>传递给CGI / SSI）。值<code>Double</code>表示进行双反向DNS查找。即，在执行反向查找之后，然后对该结果执行正向查找。前向查找中的至少一个IP地址必须与原始地址匹配。（在“ tcpwrappers”术语中，这称为<code>PARANOID</code> 。）</p>

    <p>无论设置如何，当使用<code class="module"><a href="../mod/mod_authz_host.html">mod_authz_host</a></code>通过主机名控制访问时，都会执行双重反向查找。这对于安全性是必需的。请注意，除非您将<code>HostnameLookups Double</code>设置为double，否则通常无法使用此double-reverse的结果。例如，如果仅<code>HostnameLookups On</code>且对受主机名限制保护的对象发出请求，则无论双反向是否失败，CGI仍将在<code>REMOTE_HOST</code>传递单反向结果。</p>

    <p>默认设置为“ <code>Off</code> ，以便为那些确实不需要进行反向查找的站点保存网络流量。对于最终用户而言，这也更好，因为他们不必承受查找所带来的额外延迟。重载的站点应将此指令保留为<code>Off</code> ，因为DNS查找会花费大量时间。缺省情况下编译为安装目录的<code>bin</code>子目录的实用程序<code class="program"><a href="../programs/logresolve.html">logresolve</a></code>可用于从已记录的IP地址脱机查找主机名。</p>

    <p>最后，如果您具有<a href="mod_authz_host.html#reqhost">基于主机名的Require指令</a> ，则无论<code>HostnameLookups</code>的设置如何，都将执行主机名查找。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="HttpProtocolOptions" id="HttpProtocolOptions">HttpProtocolOptions</a> <a name="httpprotocoloptions" id="httpprotocoloptions">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>修改对HTTP请求消息的限制</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>HttpProtocolOptions [严格|不安全] [RegisteredMethods | LenientMethods] [Allow0.9 | Require1.0]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>HttpProtocolOptions严格LenientMethods Allow0.9</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>2.2.32或2.4.24及更高版本</td></tr>
</table>
    <p>此指令更改了应用于HTTP请求行（ <a href="https://tools.ietf.org/html/rfc7230#section-3.1.1">RFC 7230§3.1.1</a> ）和HTTP请求标头字段（ <a href="https://tools.ietf.org/html/rfc7230#section-3.2">RFC</a> <a href="https://tools.ietf.org/html/rfc7230#section-3.1.1">7230§3.2</a> ）的规则，这些规则现在默认情况下或使用<code>Strict</code>选项应用。由于遗留模块，必须弃用的应用程序或自定义用户代理，已添加了“ <code>Unsafe</code>选项以还原为遗留行为。</p>

    <p>这些规则是在请求处理之前应用的，因此必须在全局或默认（第一个）匹配的虚拟主机部分通过IP /端口接口（而不是名称）进行配置。</p>

    <p>该指令从以下选项列表中接受三个参数，并将默认值应用于未指定的参数：</p>

    <dl>
    <dt>严格|不安全</dt>
    <dd>
      <p>在引入该指令之前，Apache HTTP Server请求消息解析器可以容忍多种不符合该协议的输入形式。
      <a href="https://tools.ietf.org/html/rfc7230#section-9.4">RFC 7230§9.4请求拆分</a>和<a href="https://tools.ietf.org/html/rfc7230#section-9.5">§9.5响应走私</a>仅指出了接受不合格请求消息的两种潜在风险，而<a href="https://tools.ietf.org/html/rfc7230#section-3.5">RFC 7230§3.5</a> “消息解析的鲁棒性”则确定了接受晦涩的空白和请求消息格式的风险。从引入该指令开始，该规范的所有语法规则均在默认的<code>Strict</code>操作模式下强制执行，并且第3.5节建议的严格空格已强制执行且不能放宽。</p>

      <div class="warning"><h3>不安全的安全风险</h3>
        <p>强烈警告用户不要切换“ <code>Unsafe</code> ”操作模式，尤其是在面向外部的，可公开访问的服务器部署上。如果需要接口进行故障监视或Intranet上运行的其他自定义服务使用者，则用户应仅在配置为为其内部专用网络提供服务的特定虚拟主机上切换“不安全”选项。</p>
      </div>

      <div class="example"><h3>导致使用严格模式的HTTP 400的请求示例</h3><p><code>＃缺少CRLF<br>GET / HTTP / 1.0 \ n \ n</code></p></div>
      <div class="warning"><h3>命令行工具和CRLF</h3>
        <p>需要强制某些工具使用CRLF，否则httpd将返回HTTP 400响应，如上述用例中所述。例如， <strong>OpenSSL s_client需要-crlf参数才能正常工作</strong> 。</p>
        <p><code class="directive"><a href="../mod/mod_dumpio.html#dumpioinput">DumpIOInput</a></code>指令可在查看HTTP请求以识别诸如CRLF缺失之类的问题时提供帮助。</p>
      </div>
    </dd>
    <dt>RegisteredMethods | LenientMethods</dt>
    <dd>
      <p><a href="https://tools.ietf.org/html/rfc7231#section-4.1">RFC 7231§4.1</a> “请求方法”“概述”要求在请求行中遇到不支持的方法时，原始服务器应使用HTTP 501状态码进行响应。使用<code>LenientMethods</code>选项时已经发生了这种情况，但是管理员可能希望切换<code>RegisteredMethods</code>选项并使用<code class="directive"><a href="#registerhttpmethod">RegisterHttpMethod</a></code>指令注册任何非标准方法，特别是如果已切换了<code>Unsafe</code>选项。</p>

      <div class="warning"><h3>转发代理兼容性</h3>
        <p>该<code>RegisteredMethods</code>选项<strong>不应</strong>被切换为转发代理主机，由原始服务器所支持的方法是未知的代理服务器。</p>
      </div>

      <div class="example"><h3>使用LenientMethods模式导致HTTP 501的请求示例</h3><p><code>＃未知的HTTP方法<br>WOW / HTTP / 1.0 \ r \ n \ r \ n<br><br>＃小写HTTP方法<br>获取/ HTTP / 1.0 \ r \ n \ r \ n<br>
      </code></p></div>
      </dd>
      <dt>允许0.9 |需要1.0</dt>
      <dd>
      <p><a href="https://tools.ietf.org/html/rfc2616#section-19.6">RFC 2616§19.6</a> “与先前版本的兼容性”鼓励HTTP服务器支持旧版HTTP / 0.9请求。RFC 7230通过“已删除了对支持HTTP / 0.9请求的期望”取代了这一点，并在<a href="https://tools.ietf.org/html/rfc7230#appendix-A">RFC 7230附录A中</a>提供了附加注释。 <code>Require1.0</code>选项允许用户删除对默认<code>Allow0.9</code>选项行为的支持。</p>

      <div class="example"><h3>导致使用Require1.0模式的HTTP 400的请求示例</h3><p><code>＃不支持的HTTP版本<br>GET / \ r \ n \ r \ n</code></p></div>
    </dd>
    </dl>
    <p>查看记录到具有<code class="directive"><a href="#loglevel">LogLevel</a></code> <code>debug</code>级别的<code class="directive"><a href="#errorlog">ErrorLog</a></code>的消息，可以帮助识别此类错误请求及其来源。用户应特别注意访问日志中的400个响应，以应对被意外拒绝的无效请求。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="If" id="If">&lt;If&gt;</a> <a name="if" id="if">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含仅在运行时请求满足条件时才适用的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;如果<var>表达式</var> &gt; ... &lt;/ If&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>嵌套条件在2.4.26及更高版本中进行评估</td></tr>
</table>
    <p><code class="directive">&lt;If&gt;</code>指令在运行时对表达式进行求值，并且仅当表达式求值为true时，才应用附带的指令。例如：</p>

    <pre class="prettyprint lang-config">&lt;If "-z req('Host')"&gt;</pre>


    <p>会匹配没有<var>Host：</var>头的HTTP / 1.0请求。表达式可以包含各种壳状运营商字符串比较（ <code>==</code> ， <code>!=</code> ， <code>&lt;</code> ，...），整数比较（ <code>-eq</code> ， <code>-ne</code> ，...）和其他（ <code>-n</code> ， <code>-z</code> ， <code>-f</code> ，...）。也可以使用正则表达式，</p>

    <pre class="prettyprint lang-config">&lt;If "%{QUERY_STRING} =~ /(delete|commit)=.*?elem/"&gt;</pre>


    <p>类壳模式匹配和许多其他操作。这些操作可以在请求标头（ <code>req</code> ），环境变量（ <code>env</code> ）和大量其他属性上完成。完整的文档可<a href="../expr.html">在Apache HTTP Server</a>中的<a href="../expr.html">Expressions中找到</a> 。</p>

    <p>在配置部分中只能使用支持<a href="directive-dict.html#Context">目录上下文的</a>指令。</p>

    <div class="warning">某些变量（例如<code>CONTENT_TYPE</code>和其他响应标头）是在已经评估&lt;If&gt;条件之后设置的，因此将无法在此伪指令中使用。
    </div>


<h3>也可以看看</h3>
<ul>
<li><a href="../expr.html">Apache HTTP Server中的表达式</a> ，以获取完整参考和更多示例。</li>
<li><code class="directive"><a href="#elseif">&lt;ElseIf&gt;</a></code></li>
<li><code class="directive"><a href="#else">&lt;其他&gt;</a></code></li>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;，&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分。
    <code class="directive">&lt;If&gt;</code> ， <code class="directive">&lt;ElseIf&gt;</code>和<code class="directive">&lt;Else&gt;</code> 。</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="IfDefine" id="IfDefine">&lt;IfDefine&gt;</a> <a name="ifdefine" id="ifdefine">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含仅在启动时为真的情况下才会处理的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;IfDefine [！]<var>参数名称</var> &gt; ...&lt;/ IfDefine&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code>&lt;IfDefine <var>test</var> &gt;...&lt;/IfDefine&gt;</code>部分用于标记条件指令。<code class="directive">&lt;IfDefine&gt;</code>节中的指令仅在<var>测试</var>为true时才处理。如果<var>test</var>为假，则忽略开始标记和结束标记之间的所有内容。</p>

    <p><code class="directive">&lt;IfDefine&gt;</code>节指令中的<var>测试</var>可以是以下两种形式之一：</p>

    <ul>
      <li><var>参数名称</var></li>

      <li><code>！</code><var>参数名</var></li>
    </ul>

    <p>在前一种情况下，仅当定义了名为<var>parameter-name</var>的参数时，才处理开始标记和结束标记之间的指令。第二格式反转测试，且仅当<strong>没有</strong>定义<var>参数名</var>进行指令的处理。</p>

    <p><var>parameter-name</var>参数是服务器启动时通过<code>-D <var>parameter</var></code>在<code class="program"><a href="../programs/httpd.html">httpd</a></code>命令行上给出的定义，也可以由<code class="directive"><a href="#define">Define</a></code>指令给出。</p>

    <p><code class="directive">&lt;IfDefine&gt;</code>节是可嵌套的，可用于实现简单的多参数测试。例：</p>

    <div class="example"><p><code>httpd -DReverseProxy -DUseCache -DMemCache ...</code></p></div>
    <pre class="prettyprint lang-config">&lt;IfDefine ReverseProxy&gt;
  LoadModule proxy_module   modules/mod_proxy.so
  LoadModule proxy_http_module   modules/mod_proxy_http.so
  &lt;IfDefine UseCache&gt;
    LoadModule cache_module   modules/mod_cache.so
    &lt;IfDefine MemCache&gt;
      LoadModule mem_cache_module   modules/mod_mem_cache.so
    &lt;/IfDefine&gt;
    &lt;IfDefine !MemCache&gt;
      LoadModule cache_disk_module   modules/mod_cache_disk.so
    &lt;/IfDefine&gt;
  &lt;/IfDefine&gt;
&lt;/IfDefine&gt;</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="IfModule" id="IfModule">&lt;IfModule&gt;</a> <a name="ifmodule" id="ifmodule">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含根据特定模块是否存在而进行处理的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;IfModule [！]<var>模块文件</var> | <var>模块标识符</var> &gt; ...&lt;/ IfModule&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>模块标识符在2.1版和更高版本中可用。</td></tr>
</table>
    <p><code>&lt;IfModule <var>test</var> &gt;...&lt;/IfModule&gt;</code>部分用于标记以存在特定模块为条件的指令。<code class="directive">&lt;IfModule&gt;</code>部分中的指令仅在<var>测试</var>为true时才处理。如果<var>test</var>为假，则忽略开始标记和结束标记之间的所有内容。</p>

    <p><code class="directive">&lt;IfModule&gt;</code>节指令中的<var>测试</var>可以是以下两种形式之一：</p>

    <ul>
      <li><var>模组</var></li>

      <li>！<var>模组</var></li>
    </ul>

    <p>在前一种情况下，仅当Apache httpd中包含名为<var>module</var>的模块时，才处理开始标记和结束标记之间的指令-可以使用<code class="directive"><a href="../mod/mod_so.html#loadmodule">LoadModule</a></code>进行编译或动态加载。第二种格式可逆转测试，并且仅在<strong>不</strong>包含<var>模块的</var>情况下才处理指令。</p>

    <p><var>模块</var>参数可以是模块标识符，也可以是模块在编译时的文件名。例如， <code>rewrite_module</code>是标识符，而<code>mod_rewrite.c</code>是文件名。如果模块由多个源文件组成，请使用包含字符串<code>STANDARD20_MODULE_STUFF</code>的文件名。</p>

    <p><code class="directive">&lt;IfModule&gt;</code>节是可嵌套的，可用于实现简单的多模块测试。</p>

    <div class="note">仅当您需要一个配置文件而不论特定模块是否可用时，才应使用此部分。在正常操作中，无需将指令放在<code class="directive">&lt;IfModule&gt;</code>节中。</div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Include" id="Include">包含</a> <a name="include" id="include">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包括服务器配置文件中的其他配置文件</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>包含<var>文件路径</var> <var>目录路径</var> | <var>通配符</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>目录通配符匹配在2.3.6和更高版本中可用</td></tr>
</table>
    <p>此伪指令允许从服务器配置文件中包含其他配置文件。</p>

    <p>可以在路径的文件名或目录部分中使用Shell样式（ <code>fnmatch()</code> ）通配符，以按字母顺序一次包含多个文件。另外，如果<code class="directive">Include</code>指向目录而不是文件，则Apache httpd将读取该目录和任何子目录中的所有文件。但是，不建议包括整个目录，因为很容易将临时文件意外地留在目录中，这可能会导致<code class="program"><a href="../programs/httpd.html">httpd</a></code>失败。相反，我们建议您使用下面显示的通配符语法，以包含与特定模式匹配的文件，例如* .conf。</p>

    <p>如果通配符表达式与任何文件都不匹配，则<code class="directive"><a href="#include">Include</a></code>指令将<strong>失败并显示错误</strong> 。如果应忽略不匹配的通配符，则可以使用<code class="directive"><a href="#includeoptional">IncludeOptional</a></code>伪指令。</p>

    <p>指定的文件路径可以是绝对路径，也可以相对于<code class="directive"><a href="#serverroot">ServerRoot</a></code>目录。</p>

    <p>例子：</p>

    <pre class="prettyprint lang-config">Include /usr/local/apache2/conf/ssl.conf
Include /usr/local/apache2/conf/vhosts/*.conf</pre>


    <p>或者，提供相对于<code class="directive"><a href="#serverroot">ServerRoot</a></code>目录的路径：</p>

    <pre class="prettyprint lang-config">Include conf/ssl.conf
Include conf/vhosts/*.conf</pre>


    <p>通配符可以包含在路径的目录或文件部分中。如果conf / vhosts中没有至少包含一个* .conf文件的子目录，则此示例将失败：</p>

    <pre class="prettyprint lang-config">Include conf/vhosts/*/*.conf</pre>


    <p>另外，如果缺少文件或目录，则将忽略以下命令：</p>

    <pre class="prettyprint lang-config">IncludeOptional conf/vhosts/*/*.conf</pre>



<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#includeoptional">包括可选</a></code></li>
<li><code class="program"><a href="../programs/apachectl.html">阿帕奇克</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="IncludeOptional" id="IncludeOptional">包括可选</a> <a name="includeoptional" id="includeoptional">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包括服务器配置文件中的其他配置文件</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>IncludeOptional <var>文件路径</var> | <var>目录路径</var> | <var>通配符</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.6及更高版本中可用。没有通配符的不存在文件路径在2.4.30之后不会导致SyntaxError</td></tr>
</table>
    <p>此伪指令允许从服务器配置文件中包含其他配置文件。它的工作原理与<code class="directive"><a href="#include">Include</a></code>指令相同，但是如果使用通配符且它们与任何文件或目录都不匹配，或者文件系统上不存在文件路径，它将被忽略（而不是引起错误）。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#include">包括</a></code></li>
<li><code class="program"><a href="../programs/apachectl.html">阿帕奇克</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="KeepAlive" id="KeepAlive">KeepAlive</a> <a name="keepalive" id="keepalive">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>启用HTTP持久连接</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>保持活动开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>保持活跃</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>HTTP / 1.0的Keep-Alive扩展和HTTP / 1.1的持久连接功能提供了长期存在的HTTP会话，该会话允许通过同一TCP连接发送多个请求。在某些情况下，对于包含许多图像的HTML文档，这已导致延迟时间提高了近50％。要启用Keep-Alive连接，请将<code>KeepAlive On</code>设置为<code>KeepAlive On</code> 。</p>

    <p>对于HTTP / 1.0客户端，仅当客户端明确要求保持连接时，才会使用保持活动连接。另外，仅当预先知道内容的长度时，才可以使用与HTTP / 1.0客户端的Keep-Alive连接。这意味着动态内容（例如CGI输出，SSI页面和服务器生成的目录列表）通常将不使用与HTTP / 1.0客户端的Keep-Alive连接。对于HTTP / 1.1客户端，除非另有说明，否则持久连接是默认设置。如果客户端请求，将使用分块编码，以便通过持久连接发送未知长度的内容。</p>

    <p>当客户端使用Keep-Alive连接时，无论使用该连接发送了多少个请求，该连接都将被视为<code class="directive"><a href="../mod/mpm_common.html#maxconnectionsperchild">MaxConnectionsPerChild</a></code>指令的单个“请求”。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#maxkeepaliverequests">MaxKeepAliveRequests</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="KeepAliveTimeout" id="KeepAliveTimeout">KeepAliveTimeout</a> <a name="keepalivetimeout" id="keepalivetimeout">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器将在持久连接上等待后续请求的时间</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>KeepAliveTimeout <var>num</var> [ms]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>KeepAliveTimeout 5</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>Apache httpd在关闭连接之前将等待后续请求的秒数。通过添加ms的后缀，还可以以毫秒为单位设置超时。收到请求后，将应用<code class="directive"><a href="#timeout">Timeout</a></code>指令指定的超时值。</p>

    <p>将<code class="directive">KeepAliveTimeout</code>设置为较高的值可能会导致负载较重的服务器出现性能问题。超时时间越高，等待与空闲客户端进行连接的服务器进程将被占用的时间越多。</p>

    <p>如果<strong>未</strong>为基于名称的虚拟主机设置<code class="directive">KeepAliveTimeout</code> ，则将使用与本地IP和端口最匹配的第一个已定义虚拟主机的值。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Limit" id="Limit">&lt;Limit&gt;</a> <a name="limit" id="limit">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>将封闭的访问控制限制为仅某些HTTP方法</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;限制<var>方法</var> [ <var>方法</var> ] ...&gt; ...&lt;/ Limit&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>AuthConfig，限制</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>访问控制通常对<strong>所有</strong>访问方法都有效，这是通常需要的行为。<strong>在一般情况下，访问控制指令不应放在<code class="directive">&lt;Limit&gt;</code>节中。</strong></p>

    <p><code class="directive">&lt;Limit&gt;</code>指令的目的是将访问控制的影响限制为指定的HTTP方法。对于所有其他方法， <code class="directive">&lt;Limit&gt;</code>括号中包含的访问限制<strong>将无效</strong> 。以下示例仅将访问控制应用于方法<code>POST</code> ， <code>PUT</code>和<code>DELETE</code> ，而所有其他方法均不受保护：</p>

    <pre class="prettyprint lang-config">&lt;Limit POST PUT DELETE&gt;
  Require valid-user
&lt;/Limit&gt;</pre>


    <p>列出的方法名称可以是以下一种或多种： <code>GET</code> ， <code>POST</code> ， <code>PUT</code> ， <code>DELETE</code> ， <code>CONNECT</code> ， <code>OPTIONS</code> ， <code>PATCH</code> ， <code>PROPFIND</code> ， <code>PROPPATCH</code> ， <code>MKCOL</code> ， <code>COPY</code> ， <code>MOVE</code> ， <code>LOCK</code>和<code>UNLOCK</code> 。 <strong>方法名称区分大小写。</strong> 如果使用<code>GET</code> ，它还将限制<code>HEAD</code>请求。不能限制<code>TRACE</code>方法（请参见<code class="directive"><a href="#traceenable">TraceEnable</a></code> ）。</p>

    <div class="warning">限制访问时，应该始终优先使用<code class="directive"><a href="#limitexcept">&lt;LimitExcept&gt;</a></code>节，而不是<code class="directive">&lt;Limit&gt;</code>节，因为<code class="directive"><a href="#limitexcept">&lt;LimitExcept&gt;</a></code>节提供了针对任意方法的保护。</div>

    <p><code class="directive">&lt;Limit&gt;</code>和<code class="directive"><a href="#limitexcept">&lt;LimitExcept&gt;</a></code>指令可以嵌套。在这种情况下， <code class="directive">&lt;Limit&gt;</code>或<code class="directive"><a href="#limitexcept">&lt;LimitExcept&gt;</a></code>指令的每个连续级别必须进一步限制访问控制所应用的方法集。</p>

    <div class="warning">当将<code class="directive">&lt;Limit&gt;</code>或<code class="directive">&lt;LimitExcept&gt;</code>指令与<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令一起使用时，请注意，无论是否存在其他<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>指令，第一个成功的<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>对请求进行授权。</div>

    <p>例如，给定以下配置，将授权所有用户执行<code>POST</code>请求，并且在所有情况下都将忽略<code>Require group editors</code>指令：</p>

    <pre class="prettyprint lang-config">&lt;LimitExcept GET&gt;
  Require valid-user
&lt;/LimitExcept&gt;
&lt;Limit POST&gt;
  Require group editors
&lt;/Limit&gt;</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitExcept" id="LimitExcept">&lt;LimitExcept&gt;</a> <a name="limitexcept" id="limitexcept">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>将访问控制限制为除命名方法外的所有HTTP方法</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;LimitExcept <var>方法</var> [ <var>方法</var> ] ...&gt; ...&lt;/ LimitExcept&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>目录.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>AuthConfig，限制</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;LimitExcept&gt;</code>和<code>&lt;/LimitExcept&gt;</code>用于封装一组访问控制指令，这些指令随后将应用于<strong>未</strong>在参数中列出的任何HTTP访问方法。也就是说，它与<code class="directive"><a href="#limit">&lt;Limit&gt;</a></code>部分相反，可用于控制标准方法和非标准/无法识别的方法。有关更多详细信息，请参见<code class="directive"><a href="#limit">&lt;Limit&gt;</a></code>的文档。</p>

    <p>例如：</p>

    <pre class="prettyprint lang-config">&lt;LimitExcept POST GET&gt;
  Require valid-user
&lt;/LimitExcept&gt;</pre>



</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitInternalRecursion" id="LimitInternalRecursion">LimitInternalRecursion</a> <a name="limitinternalrecursion" id="limitinternalrecursion">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定内部重定向和嵌套子请求的最大数量</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LimitInternalRecursion <var>数字</var> [ <var>数字</var> ]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LimitInternalRecursion 10</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>例如，在使用<code class="directive"><a href="../mod/mod_actions.html#action">Action</a></code>指令时会发生内部重定向，该指令在内部将原始请求重定向到CGI脚本。子请求是Apache httpd的机制，用于发现某些URI（如果被请求）将会发生什么。例如， <code class="module"><a href="../mod/mod_dir.html">mod_dir</a></code>使用子请求来查找<code class="directive"><a href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a></code>指令中列出的文件。</p>

    <p><code class="directive">LimitInternalRecursion</code>可以防止服务器在进入内部重定向或子请求的无限循环时崩溃。这样的循环通常是由错误配置引起的。</p>

    <p>该指令存储两个不同的限制，这些限制将根据每个请求进行评估。第一个<var>数字</var>是可能互相跟随的最大内部重定向数。第二个<var>数字</var>确定子请求的嵌套深度。如果仅指定一个<var>数字</var> ，则将其分配给两个限制。</p>

    <pre class="prettyprint lang-config">LimitInternalRecursion 5</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitRequestBody" id="LimitRequestBody">LimitRequestBody</a> <a name="limitrequestbody" id="limitrequestbody">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制从客户端发送的HTTP请求正文的总大小</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LimitRequestBody <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LimitRequestBody 0</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>此伪指令指定请求正文中允许的<var>字节</var>数，范围从0（无限制）到2147483647（2GB）。有关代理请求的有限适用性，请参见下面的注释。</p>

    <p><code class="directive">LimitRequestBody</code>指令允许用户在给出指令的上下文中（服务器，每个目录，每个文件或每个位置）设置HTTP请求消息正文的允许大小限制。如果客户端请求超出该限制，则服务器将返回错误响应，而不是服务请求。正常请求消息正文的大小将根据资源的性质以及该资源允许的方法而有很大的不同。CGI脚本通常使用消息正文来检索表单信息。<code>PUT</code>方法的实现将需要一个至少与服务器希望为该资源接受的表示形式一样大的值。</p>

    <p>该指令使服务器管理员可以更好地控制异常的客户端请求行为，这对于避免某种形式的拒绝服务攻击可能很有用。</p>

    <p>例如，如果您允许文件上传到特定位置，并希望将上传文件的大小限制为100K，则可以使用以下指令：</p>

    <pre class="prettyprint lang-config">LimitRequestBody 102400</pre>


    <div class="note"><p>有关代理请求如何解释此伪指令的完整说明，请参见<code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code>文档。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitRequestFields" id="LimitRequestFields">LimitRequestFields</a> <a name="limitrequestfields" id="limitrequestfields">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制将从客户端接受的HTTP请求标头字段的数量</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LimitRequestFields <var>数</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LimitRequestFields 100</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><var>Number</var>是从0（表示无限制）到32767的整数。默认值由编译时常量<code>DEFAULT_LIMIT_REQUEST_FIELDS</code> （分布为100）定义。</p>

    <p><code class="directive">LimitRequestFields</code>指令允许服务器管理员修改HTTP请求中允许的请求标头字段数的限制。服务器需要此值大于普通客户端请求可能包含的字段数。客户端使用的请求标头字段的数量很少超过20，但这在不同的客户端实现中可能会有所不同，这通常取决于用户将其浏览器配置为支持详细内容协商的程度。可选的HTTP扩展通常使用请求标头字段表示。</p>

    <p>该指令使服务器管理员可以更好地控制异常的客户端请求行为，这对于避免某种形式的拒绝服务攻击可能很有用。如果普通客户端看到来自服务器的错误响应（指示请求中发送了太多字段），则应增加该值。</p>

    <p>例如：</p>

    <pre class="prettyprint lang-config">LimitRequestFields 50</pre>


     <div class="warning"><h3>警告</h3>
     <p>使用基于名称的虚拟主机时，此指令的值取自本地IP和端口组合的默认（第一列出）虚拟主机。</p>
     </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitRequestFieldSize" id="LimitRequestFieldSize">LimitRequestFieldSize</a> <a name="limitrequestfieldsize" id="limitrequestfieldsize">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制客户端允许的HTTP请求标头的大小</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LimitRequestFieldSize <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LimitRequestFieldSize 8190</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>该伪指令指定HTTP请求标头中允许的<var>字节</var>数。</p>

    <p><code class="directive">LimitRequestFieldSize</code>指令允许服务器管理员为HTTP请求标头字段的允许大小设置限制。服务器需要此值足够大以容纳正常客户端请求中的任何一个标头字段。在不同的客户端实现中，正常请求标头字段的大小将有很大不同，这通常取决于用户将其浏览器配置为支持详细内容协商的程度。SPNEGO身份验证标头最多可以为12392个字节。</p>

    <p>该指令使服务器管理员可以更好地控制异常的客户端请求行为，这对于避免某种形式的拒绝服务攻击可能很有用。</p>

    <p>例如：</p>

    <pre class="prettyprint lang-config">LimitRequestFieldSize 4094</pre>


    <div class="note">在正常情况下，该值不应更改为默认值。</div>

    <div class="warning"><h3>警告</h3>
    <p>当使用基于名称的虚拟主机时，该指令的值取自与当前IP地址和端口组合最匹配的默认（优先列出）虚拟主机。</p>
    </div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitRequestLine" id="LimitRequestLine">LimitRequestLine</a> <a name="limitrequestline" id="limitrequestline">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制将从客户端接受的HTTP请求行的大小</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LimitRequestLine <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LimitRequestLine 8190</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>此伪指令设置HTTP请求行上允许的<var>字节</var>数。</p>

    <p><code class="directive">LimitRequestLine</code>指令允许服务器管理员对客户端的HTTP请求行的允许大小进行限制。由于请求行由HTTP方法，URI和协议版本组成，因此<code class="directive">LimitRequestLine</code>指令对服务器上允许请求的请求URI的长度进行了限制。服务器需要此值足够大以容纳其任何资源名称，包括可能在<code>GET</code>请求的查询部分传递的任何信息。</p>

    <p>该指令使服务器管理员可以更好地控制异常的客户端请求行为，这对于避免某种形式的拒绝服务攻击可能很有用。</p>

    <p>例如：</p>

    <pre class="prettyprint lang-config">LimitRequestLine 4094</pre>


    <div class="note">在正常情况下，该值不应更改为默认值。</div>

    <div class="warning"><h3>警告</h3>
    <p>当使用基于名称的虚拟主机时，该指令的值取自与当前IP地址和端口组合最匹配的默认（优先列出）虚拟主机。</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LimitXMLRequestBody" id="LimitXMLRequestBody">LimitXMLRequestBody</a> <a name="limitxmlrequestbody" id="limitxmlrequestbody">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制基于XML的请求正文的大小</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LimitXMLRequestBody <var>字节</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LimitXMLRequestBody 1000000</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>基于XML的请求主体的最大大小的限制（以字节为单位）。值为<code>0</code>将禁用任何检查。</p>

    <p>例：</p>

    <pre class="prettyprint lang-config">LimitXMLRequestBody 0</pre>



</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Location" id="Location">&lt;位置&gt;</a> <a name="location" id="location">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>仅将随附的指令应用于匹配的URL</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;位置<var>URL路径</var> | <var>URL</var> &gt; ... &lt;/ Location&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;Location&gt;</code>指令通过URL限制了随附指令的范围。它与<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>指令相似，并以<code>&lt;/Location&gt;</code>指令终止的子节开始。在读取<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>节和<code>.htaccess</code>文件之后以及在<code class="directive"><a href="#files">&lt;Files&gt;</a></code>节之后， <code>.htaccess</code> <code class="directive">&lt;Location&gt;</code>节的顺序处理它们在配置文件中的显示顺序。</p>

    <p><code class="directive">&lt;Location&gt;</code>节完全在文件系统外部运行。这有几个后果。最重要的是，不应使用<code class="directive">&lt;Location&gt;</code>指令来控制对文件系统位置的访问。由于几个不同的URL可以映射到同一文件系统位置，因此可以规避此类访问控制。</p>

    <p>如果URL的路径部分满足以下<em>任</em>一条件，则将随附的指令应用于请求：</p>
    <ul>
      <li>指定的位置与URL的路径部分完全匹配。</li>
      <li>以反斜杠结尾的指定位置是URL路径部分的前缀（视为上下文根）。
      </li>
      <li>指定的位置（带有尾部的斜杠）是URL路径部分的前缀（也被视为上下文根）。
      </li>
    </ul>
    <p>在下面的示例中，在不使用尾部斜杠的情况下，对/ private1，/ private1 /和/private1/file.txt的请求将应用包含的指令，而/ private1other则不使用。
    </p>
    <pre class="prettyprint lang-config">&lt;Location "/private1"&gt;
    #  ...
&lt;/Location&gt;</pre>

    <p>在下面的示例中，使用尾部斜杠，对/ private2 /和/private2/file.txt的请求将应用随附的指令，但/ private2和/ private2other则不包含。
    </p>
    <pre class="prettyprint lang-config">&lt;Location "/private2<em>/</em>"&gt;
    # ...
&lt;/Location&gt;</pre>


    <div class="note"><h3>何时使用<code class="directive">&lt;Location&gt;</code></h3>

    <p>使用<code class="directive">&lt;Location&gt;</code>将指令应用于文件系统之外的内容。对于文件系统中的内容，请使用<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>和<code class="directive"><a href="#files">&lt;Files&gt;</a></code> 。<code>&lt;Location "/"&gt;</code>是一个例外，这是将配置应用于整个服务器的简便方法。</p>
    </div>

    <p>对于所有原始（非代理）请求，要匹配的URL是<code>/path/</code>形式的URL <code>/path/</code> 。<em>不得包含方案，主机名，端口或查询字符串。</em>  对于代理请求，要匹配的URL格式为<code>scheme://servername/path</code> ，并且必须包含前缀。</p>

    <p>该URL可以使用通配符。在通配符字符串中， <code>?</code> 匹配任何单个字符， <code>*</code>匹配任何字符序列。这两个通配符都不匹配URL路径中的/。</p>

    <p>除了<code>~</code>字符外，还可以使用<a class="glossarylink" href="../glossary.html#regex" title="见词汇">正则表达式</a> 。例如：</p>

    <pre class="prettyprint lang-config">&lt;Location ~ "/(extra|special)/data"&gt;
    #...
&lt;/Location&gt;</pre>


    <p>将匹配包含子字符串<code>/extra/data</code>或<code>/special/data</code> URL。该指令<code class="directive"><a href="#locationmatch">&lt;LocationMatch&gt;</a></code>的行为相同的正则表达式版本<code class="directive">&lt;Location&gt;</code> ，和是优选的，原因很简单，即<code>~</code>难以从区分<code>-</code>在许多字体。</p>

    <p>与<code class="directive"><a href="#sethandler">SetHandler</a></code>指令结合使用时， <code class="directive">&lt;Location&gt;</code>功能特别有用。例如，要启用状态请求但仅允许来自<code>example.com</code>浏览器的状态请求，可以使用：</p>

    <pre class="prettyprint lang-config">&lt;Location "/status"&gt;
  SetHandler server-status
  Require host example.com
&lt;/Location&gt;</pre>


    <div class="note"><h3>关于/（斜线）的注释</h3>
      <p>斜杠具有特殊的含义，具体取决于它在URL中出现的位置。人们可能习惯于文件系统中多个相邻斜杠经常折叠为单个斜杠的行为（ <em>即</em> <code>/home///foo</code>与<code>/home/foo</code>相同）。在URL空间中，这不一定是正确的。该<code class="directive"><a href="#locationmatch">&lt;LocationMatch&gt;</a></code>指令和正则表达式版本<code class="directive">&lt;Location&gt;</code>要求您明确指定多个斜线，如果这是你的意图。</p>

      <p>例如， <code>&lt;LocationMatch "^/abc"&gt;</code>将与请求URL <code>/abc</code>匹配，而不与请求URL <code>//abc</code>匹配。当用于代理请求时，（非正则表达式） <code class="directive">&lt;Location&gt;</code>指令的行为类似。但是，当（非正则表达式） <code class="directive">&lt;Location&gt;</code>用于非代理请求时，它将隐式地将多个斜杠与单个斜杠匹配。例如，如果您指定<code>&lt;Location "/abc/def"&gt;</code> ，并且请求到<code>/abc//def</code>那么它将匹配。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分</a>如何<a href="../sections.html">工作</a> ，以解释接收请求时如何组合这些不同的部分。</li>
<li><code class="directive"><a href="#locationmatch">位置匹配</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LocationMatch" id="LocationMatch">&lt;LocationMatch&gt;</a> <a name="locationmatch" id="locationmatch">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>仅将随附的指令应用于正则表达式匹配的URL</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;LocationMatch <var>正则表达式</var> &gt; ... &lt;/ LocationMatch&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;LocationMatch&gt;</code>指令以与<code class="directive"><a href="#location">&lt;Location&gt;</a></code>相同的方式通过URL限制了封闭指令的范围。但是，它使用<a class="glossarylink" href="../glossary.html#regex" title="见词汇">正则表达式</a>作为参数而不是简单的字符串。例如：</p>

    <pre class="prettyprint lang-config">&lt;LocationMatch "/(extra|special)/data"&gt;
    # ...
&lt;/LocationMatch&gt;</pre>


    <p>将匹配包含子字符串<code>/extra/data</code>或<code>/special/data</code> URL。</p>

    <div class="note"><p>如果目的是URL <strong>以</strong> <code>/extra/data</code> <strong>开头</strong> ，而不是仅<strong>包含</strong> <code>/extra/data</code> ，则在正则表达式前加上<code>^</code>来要求此。</p>

    <pre class="prettyprint lang-config">&lt;LocationMatch "^/(extra|special)/data"&gt;</pre>

    </div>

    <p>从2.4.8开始，将捕获命名的组和反向引用，并将其以大写的前缀“ MATCH_”的相应名称写入环境。这允许从<a href="../expr.html">表达式</a>和模块（例如<code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>引用URL的元素。为了避免混淆，将忽略编号（未命名）的反向引用。请改用命名组。</p>

    <pre class="prettyprint lang-config">&lt;LocationMatch "^/combined/(?&lt;sitename&gt;[^/]+)"&gt;
    require ldap-group cn=%{env:MATCH_SITENAME},ou=combined,o=Example
&lt;/LocationMatch&gt;</pre>


<h3>也可以看看</h3>
<ul>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="LogLevel" id="LogLevel">LogLevel</a> <a name="loglevel" id="loglevel">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>控制ErrorLog的详细程度</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>LogLevel [ <var>模块</var> ：] <var>级别</var> [ <var>模块</var> ： <var>级别</var> ] ...
</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>LogLevel警告</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>Apache HTTP Server 2.3.6和更高版本提供了按模块和按目录的配置</td></tr>
</table>
    <p><code class="directive">LogLevel</code>调整错误日志中记录的消息的详细程度（请参见<code class="directive"><a href="#errorlog">ErrorLog</a></code>指令）。按照重要性递减的顺序，可以使用以下<var>级别</var> ：</p>

    <table class="bordered">
    
      <tr>
        <th><strong>水平</strong> </th>

        <th><strong>描述</strong> </th>

        <th><strong>例</strong> </th>
      </tr>

      <tr>
        <td><code>能源</code> </td>

        <td>紧急情况-系统无法使用。</td>

        <td>“孩子无法打开锁定文件。正在退出”</td>
      </tr>

      <tr>
        <td><code>警报</code> </td>

        <td>必须立即采取行动。</td>

        <td>“ getpwuid：无法从uid确定用户名”</td>
      </tr>

      <tr>
        <td><code>暴击</code> </td>

        <td>关键条件。</td>

        <td>“套接字：无法获取套接字，正在退出子进程”</td>
      </tr>

      <tr>
        <td><code>错误</code> </td>

        <td>错误条件。</td>

        <td>“脚本头过早结束”</td>
      </tr>

      <tr>
        <td><code>警告</code> </td>

        <td>警告条件。</td>

        <td>“子进程1234没有退出，发送了另一个SIGHUP”</td>
      </tr>

      <tr>
        <td><code>注意</code> </td>

        <td>正常但状况显着。</td>

        <td>“ httpd：捕获了SIGBUS，试图将内核转储到...”</td>
      </tr>

      <tr>
        <td><code>信息</code> </td>

        <td>信息性的。</td>

        <td>“服务器似乎很忙，（您可能需要增加StartServers或Min / MaxSpareServers）...”</td>
      </tr>

      <tr>
        <td><code>调试</code> </td>

        <td>调试级消息</td>

        <td>“正在打开配置文件...”</td>
      </tr>
      <tr>
        <td><code>跟踪1</code> </td>

        <td>追踪讯息</td>

        <td>“代理：FTP：控制连接完成”</td>
      </tr>
      <tr>
        <td><code>跟踪2</code> </td>

        <td>追踪讯息</td>

        <td>“代理：CONNECT：将CONNECT请求发送到远程代理”</td>
      </tr>
      <tr>
        <td><code>跟踪3</code> </td>

        <td>追踪讯息</td>

        <td>“ openssl：握手：开始”</td>
      </tr>
      <tr>
        <td><code>轨迹4</code> </td>

        <td>追踪讯息</td>

        <td>“从缓冲的SSL旅读取，模式0，17个字节”</td>
      </tr>
      <tr>
        <td><code>跟踪5</code> </td>

        <td>追踪讯息</td>

        <td>“映射查找失败：map = rewritemap key = keyname”</td>
      </tr>
      <tr>
        <td><code>轨迹6</code> </td>

        <td>追踪讯息</td>

        <td>“缓存查找失败，强制进行新的地图查找”</td>
      </tr>
      <tr>
        <td><code>跟踪7</code> </td>

        <td>跟踪消息，转储大量数据</td>

        <td>“ | 0000：02 23 44 30 13 40 ac 34 df 3d bf 9a 19 49 39 15 |”</td>
      </tr>
      <tr>
        <td><code>轨迹8</code> </td>

        <td>跟踪消息，转储大量数据</td>

        <td>“ | 0000：02 23 44 30 13 40 ac 34 df 3d bf 9a 19 49 39 15 |”</td>
      </tr>
    </table>

    <p>当指定了特定级别时，还将报告来自所有其他更高级别的消息。
    <em>例如</em> ，当指定<code>LogLevel info</code>时，带有<code>notice</code>和<code>warn</code>日志级别的消息也将被发布。</p>

    <p>建议至少使用<code>crit</code>等级。</p>

    <p>例如：</p>

    <pre class="prettyprint lang-config">LogLevel notice</pre>


    <div class="note"><h3>注意</h3>
      <p>当登录到常规文件时，无法取消级别<code>notice</code>消息，因此始终将其记录下来。但是，这在使用<code>syslog</code>完成<code>syslog</code>记录时不适用。</p>
    </div>

    <p>指定不带模块名称的级别会将所有模块的级别重置为该级别。使用模块名称指定级别将仅设置该模块的级别。可以使用模块源文件名，模块标识符或省略了尾随<code>_module</code>作为模块规范的模块标识符。这意味着以下三个规格是等效的：</p>

    <pre class="prettyprint lang-config">LogLevel info ssl:warn
LogLevel info mod_ssl.c:warn
LogLevel info ssl_module:warn</pre>


    <p>也可以更改每个目录的级别：</p>

    <pre class="prettyprint lang-config">LogLevel info
&lt;Directory "/usr/local/apache/htdocs/app"&gt;
  LogLevel debug
&lt;/Directory&gt;</pre>


    <div class="note">每个目录的日志级别配置仅影响解析请求后记录的消息以及与请求相关联的消息。与连接或服务器关联的日志消息不受影响。
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#errorlog">错误日志</a></code></li>
<li><code class="directive"><a href="#errorlogformat">错误日志格式</a></code></li>
<li><a href="../logs.html">Apache HTTP服务器日志文件</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="MaxKeepAliveRequests" id="MaxKeepAliveRequests">MaxKeepAliveRequests</a> <a name="maxkeepaliverequests" id="maxkeepaliverequests">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>持久连接上允许的请求数</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>MaxKeepAliveRequests <var>编号</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>MaxKeepAliveRequests 100</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>当启用<code class="directive"><a href="#keepalive">KeepAlive</a></code>时， <code class="directive">MaxKeepAliveRequests</code>指令限制每个连接允许的请求数。如果将其设置为<code>0</code> ，将允许无限制的请求。我们建议将此设置保持较高的值，以实现最佳服务器性能。</p>

    <p>例如：</p>

    <pre class="prettyprint lang-config">MaxKeepAliveRequests 500</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="MaxRangeOverlaps" id="MaxRangeOverlaps">MaxRangeOverlaps</a> <a name="maxrangeoverlaps" id="maxrangeoverlaps">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>返回完整资源之前允许的重叠范围数（例如： <code>100-200,150-300</code> ）</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>MaxRangeOverlaps默认|无限无| <var>范围数</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>最大范围重叠20</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.15和更高版本中可用</td></tr>
</table>
        <p><code class="directive">MaxRangeOverlaps</code>指令限制服务器愿意返回给客户端的HTTP重叠范围的数量。如果请求的重叠范围超出允许范围，则返回完整资源。</p>

        <dl>
            <dt><strong>默认</strong></dt>
            <dd>将重叠范围的数量限制为编译时默认值20。</dd>

            <dt><strong>没有</strong></dt>
            <dd>不允许重叠的Range标头。</dd>

            <dt><strong>无限</strong></dt>
            <dd>服务器不限制其愿意满足的重叠范围的数量。</dd>

            <dt><var>范围数</var></dt>
            <dd>一个正数，表示服务器愿意满足的最大重叠范围数。</dd>
        </dl>
    
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="MaxRangeReversals" id="MaxRangeReversals">MaxRangeReversals</a> <a name="maxrangereversals" id="maxrangereversals">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>返回完整资源之前允许的范围反转次数（例如： <code>100-200,50-70</code> ）</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>MaxRangeReversals默认|无限无| <var>范围数</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>MaxRangeReversals 20</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.15和更高版本中可用</td></tr>
</table>
        <p><code class="directive">MaxRangeReversals</code>指令限制服务器愿意返回给客户端的HTTP Range反转次数。如果请求的范围反转超出允许范围，则返回完整资源。</p>

        <dl>
            <dt><strong>默认</strong></dt>
            <dd>将范围反转的次数限制为编译时默认值20。</dd>

            <dt><strong>没有</strong></dt>
            <dd>不允许范围反转标头。</dd>

            <dt><strong>无限</strong></dt>
            <dd>服务器不限制其希望满足的范围反转次数。</dd>

            <dt><var>范围数</var></dt>
            <dd>一个正数，表示服务器愿意满足的最大范围反转数。</dd>
        </dl>
    
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="MaxRanges" id="MaxRanges">MaxRanges</a> <a name="maxranges" id="maxranges">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>返回完整资源之前允许的范围数</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>MaxRanges默认值|无限无| <var>范围数</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>最大范围200</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.15和更高版本中可用</td></tr>
</table>
    <p><code class="directive">MaxRanges</code>指令限制服务器愿意返回给客户端的HTTP范围的数量。如果请求的范围超出允许范围，则返回完整资源。</p>

    <dl>
      <dt><strong>默认</strong></dt>
      <dd>将范围数限制为编译时默认值200。</dd>

      <dt><strong>没有</strong></dt>
      <dd>范围标头将被忽略。</dd>

      <dt><strong>无限</strong></dt>
      <dd>服务器不限制其愿意满足的范围数。</dd>

      <dt><var>范围数</var></dt>
      <dd>一个正数，表示服务器愿意满足的最大范围数。</dd>
    </dl>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="MergeTrailers" id="MergeTrailers">MergeTrailers</a> <a name="mergetrailers" id="mergetrailers">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定预告片是否合并到标题中</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>MergeTrailers [开|关]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>合并预告片</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>2.4.11及更高版本</td></tr>
</table>
    <p>该指令控制是否将HTTP预告片复制到HTTP标头的内部表示中。当大多数请求头处理将有机会检查或修改请求头后，请求主体已被完全消耗时，就会发生这种合并。</p>
    <p>提供此选项是为了与2.4.11之前的版本兼容，在这些版本中始终合并了预告片。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Mutex" id="Mutex">互斥</a> <a name="mutex" id="mutex">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>为所有或指定的互斥配置互斥机制并锁定文件目录</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>互斥<var>机制</var> [默认| <var>互斥体名称</var> ] ...[OmitPID]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>互斥量默认</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache HTTP Server 2.3.4和更高版本中可用</td></tr>
</table>
    <p><code class="directive">Mutex</code>指令设置httpd和模块用来序列化对资源的访问的机制以及锁定文件的位置（可选）。将<code>default</code>指定为第二个参数以更改所有互斥锁的设置。指定互斥量名称（请参见下表）作为第二个参数，以仅覆盖该互斥量的默认值。</p>

    <p><code class="directive">Mutex</code>指令通常用于以下特殊情况：</p>

    <ul>
        <li>当<a class="glossarylink" href="../glossary.html#apr" title="见词汇">APR</a>选择的默认机制出现功能或性能问题时，更改互斥机制</li>

        <li>当默认目录不支持锁定时，更改基于文件的互斥对象使用的目录</li>
    </ul>

    <div class="note"><h3>支持的模块</h3>
    <p>该伪指令仅配置已使用<code>ap_mutex_register()</code> API向核心服务器注册的互斥锁。与httpd捆绑在一起的所有模块都支持<code class="directive">Mutex</code>指令，但第三方模块可能不支持。请查阅第三方模块的文档，该文档必须指出如果支持此伪指令可以配置的互斥量名称。</p>
    </div>

    <p>可以使用以下互斥<em>机制</em> ：</p>
    <ul>
        <li><code>默认值是</code>
        <p>这将选择由<a class="glossarylink" href="../glossary.html#apr" title="见词汇">APR</a>确定的默认锁定实现。可以通过使用带有<code>-V</code>选项的<code class="program"><a href="../programs/httpd.html">httpd</a></code>来显示默认的锁定实现。</p></li>

        <li><code>无|没有</code>
        <p>这有效地禁用了互斥锁，并且只有在模块指示它是有效的选择时才允许互斥锁使用。有关更多信息，请查阅模块文档。</p></li>

        <li><code>posixsem</code>
        <p>这是基于Posix信号量的互斥体变体。</p>

        <div class="warning"><h3>警告</h3>
        <p>如果进程中的一个线程持有互斥段错误，则信号所有权将无法恢复，从而导致Web服务器挂起。</p>
        </div>
        </li>

        <li><code>系统</code>
        <p>这是基于SystemV IPC信号量的互斥体变体。</p>

        <div class="warning"><h3>警告</h3>
        <p>如果进程在删除信号之前崩溃，则有可能“泄漏” SysV信号。</p>
	</div>

        <div class="warning"><h3>安全</h3>
        <p>信号量API允许任何在与Web服务器相同的uid下运行的CGI（ <em>即</em>所有CGI，除非您使用<code class="program"><a href="../programs/suexec.html">suexec</a></code>或<code>cgiwrapper</code>类的东西）拒绝服务攻击。</p>
	</div>
        </li>

        <li><code>学期</code>
        <p>这将选择“最佳”可用信号量实现，并按此顺序在Posix和SystemV IPC信号量之间进行选择。</p></li>

        <li><code>pthread</code>
        <p>这是基于跨进程Posix线程互斥量的互斥体变体。</p>

        <div class="warning"><h3>警告</h3>
        <p>在大多数系统上，如果子进程在持有使用此实现的互斥锁的同时异常终止，则服务器将死锁并停止响应请求。发生这种情况时，服务器将需要手动重启才能恢复。</p>
        <p>Solaris和Linux是显着的例外，因为它们提供了一种机制，该机制通常允许子进程在持有互斥锁时异常终止后恢复互斥锁。</p>
        <p>如果您的系统兼容POSIX或实现了<code>pthread_mutexattr_setrobust_np()</code>函数，则可以安全地使用<code>pthread</code>选项。</p>
        </div>
        </li>

        <li><code>fcntl：/路径/到/互斥量</code>
        <p>这是互斥体的变体，其中物理（锁定）文件和<code>fcntl()</code>函数用作互斥体。</p>

        <div class="warning"><h3>警告</h3>
        <p>在多线程，多进程环境中使用基于此机制的多个互斥锁时，如果<code>fcntl()</code>不支持线程（例如在Solaris上），则可以报告有效的互斥锁死锁错误（EDEADLK）。</p>
	</div>
        </li>

        <li><code>群：/路径/到/互斥体</code>
        <p>这类似于<code>fcntl:/path/to/mutex</code>方法，不同之处在于使用<code>flock()</code>函数提供文件锁定。</p></li>

        <li><code>文件：/ path / to / mutex</code>
        <p>这将选择“最佳”可用文件锁定实现，并依次在<code>fcntl</code>和<code>flock</code>之间进行选择。</p></li>
    </ul>

    <p>大多数机制仅在基础平台和<a class="glossarylink" href="../glossary.html#apr" title="见词汇">APR</a>支持的选定平台上可用。并非在所有平台上都可用的机制是<em>posixsem</em> ， <em>sysvsem</em> ， <em>sem</em> ， <em>pthread</em> ， <em>fcntl</em> ， <em>flock</em>和<em>file</em> 。</p>

    <p>使用基于文件的机制<em>fcntl</em>和<em>flock</em> ，该路径（如果提供）是将在其中创建锁定文件的目录。默认目录是httpd的相对于<code class="directive"><a href="#serverroot">ServerRoot</a></code>的运行时文件目录。始终对<code>/path/to/mutex</code>使用本地磁盘文件系统，而不要对位于NFS或AFS文件系统上的目录使用。该文件的基本名称将是互斥体类型，即模块提供的可选实例字符串，并且除非指定了<code>OmitPID</code>关键字，否则将附加httpd父进程的进程ID以使文件名唯一，从而避免多个文件名冲突。 httpd实例共享一个锁定文件目录。例如，如果互斥锁名称为<code>mpm-accept</code>且锁定文件目录为<code>/var/httpd/locks</code> ，则父进程ID为12345的httpd实例的锁定文件名将为<code>/var/httpd/locks/mpm-accept.12345</code> 。</p>

    <div class="warning"><h3>安全</h3>
    <p>最好<em>避免</em>将互斥文件放在世界可写目录（例如<code>/var/tmp</code>因为有人可能会创建拒绝服务攻击，并通过创建与服务器尝试使用的名称相同的名称的锁定文件来阻止服务器启动。去创造。</p>
    </div>

    <p>下表记录了httpd和捆绑的模块使用的互斥锁的名称。</p>

    <table class="bordered"><tr class="header">
            <th>互斥体名称</th>
            <th>模组</th>
            <th>受保护的资源</th>
	</tr>
<tr>
            <td><code>MPM接受</code></td>
            <td><code class="module"><a href="../mod/prefork.html">prefork</a></code>和<code class="module"><a href="../mod/worker.html">worker</a></code> MPM</td>
            <td>传入的连接，以避免打雷的牧群问题；有关更多信息，请参考<a href="../misc/perf-tuning.html">性能调整</a>文档。</td>
	</tr>
<tr class="odd">
            <td><code>authdigest-client</code></td>
            <td><code class="module"><a href="../mod/mod_auth_digest.html">mod_auth_digest</a></code></td>
            <td>共享内存中的客户端列表</td>
	</tr>
<tr>
            <td><code>认证不透明</code></td>
            <td><code class="module"><a href="../mod/mod_auth_digest.html">mod_auth_digest</a></code></td>
            <td>共享内存中的计数器</td>
	</tr>
<tr class="odd">
            <td><code>ldap缓存</code></td>
            <td><code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code></td>
            <td>LDAP结果缓存</td>
	</tr>
<tr>
            <td><code>改写地图</code></td>
            <td><code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code></td>
            <td>与外部映射程序进行通信，以避免来自多个请求的混合I / O</td>
	</tr>
<tr class="odd">
            <td><code>ssl缓存</code></td>
            <td><code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code></td>
            <td>SSL会话缓存</td>
	</tr>
<tr>
            <td><code>ssl装订</code></td>
            <td><code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code></td>
            <td>OCSP装订响应缓存</td>
	</tr>
<tr class="odd">
            <td><code>看门狗回调</code></td>
            <td><code class="module"><a href="../mod/mod_watchdog.html">mod_watchdog</a></code></td>
            <td>特定客户端模块的回调函数</td>
	</tr>
</table>

    <p><code>OmitPID</code>关键字禁止从锁定文件名添加httpd父进程ID。</p>

    <p>在以下示例中，用于MPM接受互斥的互斥机制将从默认编译为<code>fcntl</code> ，并在目录<code>/var/httpd/locks</code>创建关联的锁定文件。所有其他互斥锁的互斥锁机制将从已编译的默认值更改为<code>sysvsem</code> 。</p>

    <pre class="prettyprint lang-config">Mutex sysvsem default
Mutex fcntl:/var/httpd/locks mpm-accept</pre>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="NameVirtualHost" id="NameVirtualHost">NameVirtualHost</a> <a name="namevirtualhost" id="namevirtualhost">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>弃用：指定用于名称虚拟主机的IP地址</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>NameVirtualHost <var>地址</var> [： <var>port</var> ]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>

<p>在2.3.11之前，需要<code class="directive">NameVirtualHost</code>来指示服务器特定的IP地址和端口组合可用作基于名称的虚拟主机。在2.3.11及更高版本中，每当在多个虚拟主机中使用IP地址和端口组合时，都会自动为该地址启用基于名称的虚拟主机。</p>

<p>该指令当前无效。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../vhosts/index.html">虚拟主机文档</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Options" id="Options">期权</a> <a name="options" id="options">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>配置特定目录中可用的功能</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>选项[+ |-] <var>选项</var> [[+ |-] <var>选项</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>选项关注符号链接</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>选件</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在2.3.11中将默认值从All更改为FollowSymlinks</td></tr>
</table>
    <p><code class="directive">Options</code>指令控制特定目录中可用的服务器功能。</p>

    <p><var>选项</var>可以设置为<code>None</code> ，在这种情况下，不会启用任何额外功能，或者以下一项或多项功能：</p>

    <dl>
      <dt><code>所有</code></dt>

      <dd>除<code>MultiViews</code>外的所有选项。</dd>

      <dt><code>ExecCGI</code></dt>

      <dd>允许使用<code class="module"><a href="../mod/mod_cgi.html">mod_cgi</a></code>执行CGI脚本。</dd>

      <dt><code>关注符号链接</code></dt>

      <dd>服务器将遵循此目录中的符号链接。这是默认设置。
      <div class="note">
      <p>即使服务器遵循符号链接，它也<em>不会</em>更改用于与<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>节匹配的路径名。</p>

      <p><code>FollowSymLinks</code>和<code>SymLinksIfOwnerMatch</code> <code class="directive"><a href="#options">Options</a></code>仅在<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>部分或<code>.htaccess</code>文件中起作用。</p>

      <p>忽略此选项不应被视为安全限制，因为符号链接测试会受到使其无法回避的竞争条件的影响。</p>
      </div></dd>

      <dt><code>包括</code></dt>

      <dd>允许由<code class="module"><a href="../mod/mod_include.html">mod_include</a></code>提供的服务器端包含。</dd>

      <dt><code>包括NOEXEC</code></dt>

      <dd>服务器端包含是允许的，但<code>#exec cmd</code>和<code>#exec cgi</code>被禁用。仍然可以<code>#include virtual</code> <code class="directive"><a href="../mod/mod_alias.html#scriptalias">ScriptAlias</a></code> ed目录中的<code>#include virtual</code> CGI脚本。</dd>

      <dt><code>指标</code></dt>

      <dd>如果请求映射到目录的URL，并且该目录中没有<code class="directive"><a href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a></code> （ <em>例如</em> <code>index.html</code> ），则<code class="module"><a href="../mod/mod_autoindex.html">mod_autoindex</a></code>将返回该目录的格式化列表。</dd>

      <dt><code>多视图</code></dt>

      <dd>
      使用<code class="module"><a href="../mod/mod_negotiation.html">mod_negotiation</a></code>允许<a href="../content-negotiation.html">协商内容的</a> “ MultiViews”。
      <div class="note"><h3>注意</h3> <p>如果在<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>以外的任何位置设置此选项，则将被忽略，因为<code class="module"><a href="../mod/mod_negotiation.html">mod_negotiation</a></code>需要真实的资源进行比较和评估。</p></div>
      </dd>

      <dt><code>SymLinksIfOwnerMatch</code></dt>

      <dd>服务器将仅遵循符号链接，这些符号链接的目标文件或目录由与该链接相同的用户标识拥有。

      <div class="note"><h3>注意</h3>
      <p><code>FollowSymLinks</code>和<code>SymLinksIfOwnerMatch</code> <code class="directive"><a href="#options">Options</a></code>仅在<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>部分或<code>.htaccess</code>文件中起作用。</p>

      <p>该选项不应被视为安全限制，因为符号链接测试会受到使其无法回避的竞争条件的影响。</p>
      </div> </dd>
    </dl>

    <p>通常，如果一个目录可以应用多个<code class="directive">Options</code> ，则使用最具体的<code class="directive">Options</code> ，而其他选项则被忽略。选项不会合并。（请参阅<a href="../sections.html#merging">如何合并节</a> 。）但是，如果<code class="directive">Options</code>指令上的<em>所有</em> <code class="directive">Options</code>都以<code>+</code>或<code>-</code>符号开头，则这些选项将合并。前面带有<code>+</code>所有选项都会添加到当前有效的选项中，而前面带有<code>-</code>所有选项将从当前有效的选项中删除。</p>

    <div class="note"><h3>注意</h3>
    <p>带有<code>+</code>或<code>-</code> <code class="directive">Options</code>与没有<code class="directive">Options</code>混合使用是无效的语法，并且在服务器启动期间将被语法检查（带有中止）拒绝。</p>
    </div>

    <p>例如，没有任何<code>+</code>和<code>-</code>符号：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/web/docs"&gt;
  Options Indexes FollowSymLinks
&lt;/Directory&gt;

&lt;Directory "/web/docs/spec"&gt;
  Options Includes
&lt;/Directory&gt;</pre>


    <p>那么只会为<code>/web/docs/spec</code>目录设置“ <code>Includes</code> 。但是，如果第二个<code class="directive">Options</code>指令使用<code>+</code>和<code>-</code>符号：</p>

    <pre class="prettyprint lang-config">&lt;Directory "/web/docs"&gt;
  Options Indexes FollowSymLinks
&lt;/Directory&gt;

&lt;Directory "/web/docs/spec"&gt;
  Options +Includes -Indexes
&lt;/Directory&gt;</pre>


    <p>然后为<code>/web/docs/spec</code>目录设置选项<code>FollowSymLinks</code>和<code>Includes</code> 。</p>

    <div class="note"><h3>注意</h3>
      <p>不管以前的设置如何，使用<code>-IncludesNOEXEC</code>或<code>-Includes</code>将完全禁用服务器端包含。</p>
    </div>

    <p>没有其他任何设置的默认值为<code>FollowSymlinks</code> 。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Protocol" id="Protocol">协议</a> <a name="protocol" id="protocol">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>侦听套接字的协议</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>协议<var>协议</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache 2.1.5和更高版本中可用。在Windows上，从Apache 2.3.3及更高版本开始。</td></tr>
</table>
    <p>该指令指定用于特定侦听套接字的协议。该协议用于确定哪个模块应处理请求并通过<code class="directive">AcceptFilter</code>指令应用特定于协议的优化。</p>

    <p>如果您在非标准端口上运行，则只需要设置协议即可；否则， <code>http</code>假设为端口80和<code>https</code>端口443。</p>

    <p>例如，如果您在非标准端口上运行<code>https</code> ，则显式指定协议：</p>

    <pre class="prettyprint lang-config">Protocol https</pre>


    <p>您还可以使用<code class="directive"><a href="../mod/mpm_common.html#listen">Listen</a></code>指令指定协议。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#acceptfilter">接受过滤器</a></code></li>
<li><code class="directive"><a href="../mod/mpm_common.html#listen">听</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="Protocols" id="Protocols">协议</a> <a name="protocols" id="protocols">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器/虚拟主机可用的协议</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>协议<var>协议</var> ...</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>协议http / 1.1</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>仅在Apache 2.4.17及更高版本中可用。</td></tr>
</table>
        <p>该伪指令指定服务器/虚拟主机支持的协议列表。该列表确定客户端可以为此服务器/主机协商的允许协议。</p>
        
        <p>如果要扩展服务器/主机的可用协议，则需要设置协议。默认情况下，仅允许使用http / 1.1协议（包括与1.0和0.9客户端的兼容性）。</p>
        
        <p>例如，如果要为具有TLS的服务器支持HTTP / 2，请指定：</p>
        
        <pre class="prettyprint lang-config">Protocols h2 http/1.1</pre>


        <p>有效协议是用于HTTP和https连接的<code>http/1.1</code> ，在https连接上的<code>h2</code>和用于http连接的<code>h2c</code> 。模块可以启用更多协议。</p>
        
        <p>指定不可用/禁用的协议是安全的。这样的协议名称将被忽略。</p>
        
        <p>仅当虚拟主机没有自己的Protocols指令时，才会为虚拟主机继承基本服务器中指定的协议。或者，反过来，虚拟主机中的Protocols指令将替换基本服务器中的任何此类指令。
        </p>

    
<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#protocolshonororder">协议荣誉</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ProtocolsHonorOrder" id="ProtocolsHonorOrder">协议</a> <a name="protocolshonororder" id="protocolshonororder">荣誉订单指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定协议的顺序是否确定协商期间的优先级</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>协议荣誉订单开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>协议荣誉顺序</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>仅在Apache 2.4.17及更高版本中可用。</td></tr>
</table>
        <p>该指令指定服务器是否应遵循<code class="directive">Protocols</code>指令列出协议的顺序。</p>
        
        <p>如果配置为“关”，则客户端提供的协议列表顺序优先于服务器配置中的顺序。</p>
        
        <p>将<code class="directive">ProtocolsHonorOrder</code>设置为<code>on</code> （默认值）时，客户端顺序无关紧要，只有服务器设置中的顺序会影响协议协商的结果。</p>
        
    
<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#protocols">通讯协定</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="QualifyRedirectURL" id="QualifyRedirectURL">QualifyRedirectURL</a> <a name="qualifyredirecturl" id="qualifyredirecturl">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>控制REDIRECT_URL环境变量是否完全合格</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>QualifyRedirectURL ON | OFF</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>QualifyRedirectURL关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>2.4.18及更高版本中支持的指令。2.4.17就像配置了“ QualifyRedirectURL ON”一样。</td></tr>
</table>
    <p>该指令控制服务器是否将确保REDIRECT_URL环境变量完全合格。默认情况下，该变量包含客户端请求的逐字网址，例如“ /index.html”。将<code class="directive"><a href="#qualifyredirecturl on">QualifyRedirectURL ON</a></code> ，相同的请求将导致诸如“ http://www.example.com/index.html”的值。</p>
    <p>即使未设置此指令，当针对完全限定的URL发出请求时，REDIRECT_URL也将保持完全限定。
    </p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RegisterHttpMethod" id="RegisterHttpMethod">RegisterHttpMethod</a> <a name="registerhttpmethod" id="registerhttpmethod">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>注册非标准的HTTP方法</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>RegisterHttpMethod <var>方法</var> [ <var>方法</var> [...]]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
<p>此伪指令可用于注册其他HTTP方法。如果非标准方法需要与接受方法名称作为参数的指令一起使用，或者在服务器已配置为仅将识别的方法传递给模块时允许通过代理或CGI脚本使用特定的非标准方法，则这是必需的。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#httpprotocoloptions">HTTPProtocolOptions</a></code></li>
<li><code class="directive"><a href="../mod/mod_allowmethods.html#allowmethods">AllowMethods</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RLimitCPU" id="RLimitCPU">RLimitCPU</a> <a name="rlimitcpu" id="rlimitcpu">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制由Apache httpd子级启动的进程的CPU消耗</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>RLimitCPU <var>秒</var> |最大[ <var>秒</var> |最大]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>未设置；使用操作系统默认值</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>带有1或2个参数。第一个参数设置所有进程的软资源限制，第二个参数设置最大资源限制。任何一个参数都可以是一个数字，也可以是一个<code>max</code>以指示服务器应将限制设置为操作系统配置所允许的最大值。提高最大资源限制要求服务器以<code>root</code>身份或在初始启动阶段运行。</p>

    <p>这适用于从Apache httpd子级服务请求派生的进程，而不适用于Apache httpd子级本身。这包括CGI脚本和SSI exec命令，但不包括从Apache httpd父节点派生的任何进程，例如管道日志。</p>

    <p>CPU资源限制以每个进程的秒数表示。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#rlimitmem">RLimitMEM</a></code></li>
<li><code class="directive"><a href="#rlimitnproc">RLimitNPROC</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RLimitMEM" id="RLimitMEM">RLimitMEM</a> <a name="rlimitmem" id="rlimitmem">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制由Apache httpd子级启动的进程的内存消耗</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>RLimitMEM <var>字节</var> |最大[ <var>字节</var> |最大]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>未设置；使用操作系统默认值</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>带有1或2个参数。第一个参数设置所有进程的软资源限制，第二个参数设置最大资源限制。任何一个参数都可以是一个数字，也可以是一个<code>max</code>以指示服务器应将限制设置为操作系统配置所允许的最大值。提高最大资源限制要求服务器以<code>root</code>身份或在初始启动阶段运行。</p>

    <p>这适用于从Apache httpd子级服务请求派生的进程，而不适用于Apache httpd子级本身。这包括CGI脚本和SSI exec命令，但不包括从Apache httpd父节点派生的任何进程，例如管道日志。</p>

    <p>内存资源限制以每个进程的字节数表示。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#rlimitcpu">RLimitCPU</a></code></li>
<li><code class="directive"><a href="#rlimitnproc">RLimitNPROC</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="RLimitNPROC" id="RLimitNPROC">RLimitNPROC</a> <a name="rlimitnproc" id="rlimitnproc">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>限制Apache httpd子级启动的进程可以启动的进程数</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>RLimitNPROC <var>数</var> | max [ <var>数</var> | max]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>未设置；使用操作系统默认值</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>带有1或2个参数。第一个参数设置所有进程的软资源限制，第二个参数设置最大资源限制。任何一个参数都可以是一个数字，也可以是一个<code>max</code>以指示服务器应将限制设置为操作系统配置所允许的最大值。提高最大资源限制要求服务器以<code>root</code>身份或在初始启动阶段运行。</p>

    <p>这适用于从Apache httpd子级服务请求派生的进程，而不适用于Apache httpd子级本身。这包括CGI脚本和SSI exec命令，但不包括从Apache httpd父节点派生的任何进程，例如管道日志。</p>

    <p>进程限制控制每个用户的进程数。</p>

    <div class="note"><h3>注意</h3>
      <p>如果CGI进程<strong>不在</strong> Web服务器用户ID之外的其他用户ID下运行，则此伪指令将限制服务器本身可以创建的进程数。这种情况的证据将由<code>error_log</code>中的<strong><code>cannot fork</code></strong>消息指示。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#rlimitmem">RLimitMEM</a></code></li>
<li><code class="directive"><a href="#rlimitcpu">RLimitCPU</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ScriptInterpreterSource" id="ScriptInterpreterSource">ScriptInterpreterSource</a> <a name="scriptinterpretersource" id="scriptinterpretersource">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>为CGI脚本定位解释器的技术</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ScriptInterpreterSource注册表|严格注册|脚本</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ScriptInterpreterSource脚本</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>仅Win32。</td></tr>
</table>
    <p>该指令用于控制Apache httpd如何查找用于运行CGI脚本的解释器。默认设置为<code>Script</code> 。这导致Apache httpd使用shebang行（第一行，以<code>#!</code>开头）指向的解释器<code>#!</code>在脚本中。在Win32系统上，此行通常如下所示：</p>

    <pre class="prettyprint lang-perl">#!C:/Perl/bin/perl.exe</pre>


    <p>或者，如果<code>perl</code>在<code>PATH</code> ，则只需：</p>

    <pre class="prettyprint lang-perl">#!perl</pre>


    <p>设置<code>ScriptInterpreterSource Registry</code>将导致使用脚本文件扩展名（例如<code>.pl</code> ）作为搜索键来搜索Windows注册表树<code>HKEY_CLASSES_ROOT</code> 。注册表子项<code>Shell\ExecCGI\Command</code>定义的<code>Shell\ExecCGI\Command</code>或者如果它不存在，则由子项<code>Shell\Open\Command</code>用于打开脚本文件。如果找不到注册表项，则Apache httpd会返回到<code>Script</code>选项的行为。</p>

    <div class="warning"><h3>安全</h3>
    <p>将<code>ScriptInterpreterSource Registry</code>与<code class="directive"><a href="../mod/mod_alias.html#scriptalias">ScriptAlias</a></code>的目录一起使用时要小心，因为Apache httpd会尝试执行此目录中的<strong>每个</strong>文件。<code>Registry</code>设置可能会导致对通常不执行的文件进行不需要的程序调用。例如，大多数Windows系统上的<code>.htm</code>文件的默认打开命令将执行Microsoft Internet Explorer，因此，对脚本目录中存在的<code>.htm</code>文件的任何HTTP请求都将在服务器后台启动浏览器。这是在一分钟左右的时间内使系统崩溃的好方法。</p>
    </div>

    <p>Apache HTTP Server 2.0中新增的选项<code>Registry-Strict</code>与<code>Registry</code>具有相同的功能，但仅使用子项<code>Shell\ExecCGI\Command</code> 。<code>ExecCGI</code>密钥不是常见的密钥。必须在Windows注册表中手动配置它，因此可以防止在系统上意外调用程序。</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="SeeRequestTail" id="SeeRequestTail">SeeRequestTail</a> <a name="seerequesttail" id="seerequesttail">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>假设请求本身大于63个字符，请确定mod_status是显示请求的前63个字符还是显示最后63个字符。</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>SeeRequestTail开|关</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>SeeRequestTail关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>在Apache httpd 2.2.7和更高版本中可用。</td></tr>
</table>
    <p>带有<code>ExtendedStatus On</code> mod_status显示正在处理的实际请求。出于历史目的，实际上仅存储了63个字符用于显示。该指令控制是否存储第63个字符（前一个行为和默认行为）或是否存储最后63个字符。当然，这仅适用于请求的长度为64个字符或更大的情况。</p>

    <p>如果Apache httpd正在处理<code>GET /disk1/storage/apache/htdocs/images/imagestore1/food/apples.jpg HTTP/1.1</code> mod_status显示如下：</p>

    <table class="bordered">
      <tr>
        <th>关（默认）</th>
        <td>GET / disk1 / storage / apache / htdocs / images / imagestore1 / food / apples</td>
      </tr>
      <tr>
        <th>上</th>
        <td>orage / apache / htdocs / images / imagestore1 / food / apples.jpg HTTP / 1.1</td>
      </tr>
    </table>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerAdmin" id="ServerAdmin">ServerAdmin</a> <a name="serveradmin" id="serveradmin">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器在发送给客户端的错误消息中包含的电子邮件地址</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerAdmin <var>电子邮件地址</var> | <var>网址</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ServerAdmin</code>设置服务器在返回给客户端的任何错误消息中包括的联系地址。如果<code>httpd</code>无法将提供的参数识别为URL，则假定它是一个<var>电子邮件地址，</var>并在超链接目标中添加<code>mailto:</code> ：。但是，建议使用实际的电子邮件地址，因为有许多CGI脚本可以进行此假设。如果要使用URL，它应指向您控制下的另一台服务器。否则，如果出现错误，用户可能无法与您联系。</p>

    <p>为此，可能需要设置一个专用地址，例如</p>

    <pre class="prettyprint lang-config">ServerAdmin www-admin@foo.example.com</pre>

    <p>因为用户并不总是提到他们在谈论服务器！</p>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerAlias" id="ServerAlias">ServerAlias</a> <a name="serveralias" id="serveralias">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>将请求与名称虚拟主机匹配时使用的主机的备用名称</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerAlias <var>主机名</var> [ <var>主机名</var> ] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ServerAlias</code>指令设置主机的备用名称，以与<a href="../vhosts/name-based.html">基于名称的虚拟主机一起使用</a> 。如果合适， <code class="directive">ServerAlias</code>可以包含通配符。</p>

    <pre class="prettyprint lang-config">&lt;VirtualHost *:80&gt;
  ServerName server.example.com
  ServerAlias server server2.example.com server2
  ServerAlias *.example.com
  UseCanonicalName Off
  # ...
&lt;/VirtualHost&gt;</pre>


    <p>最佳匹配的<code class="directive"><a href="#virtualhost">&lt;virtualhost&gt;</a></code>集合的基于名称的虚拟主机将按照它们在配置中出现的顺序进行处理。使用第一个匹配的<code class="directive"><a href="#servername">ServerName</a></code>或<code class="directive"><a href="#serveralias">ServerAlias</a></code> ，通配符的优先级没有不同（ServerName与ServerAlias也不相同）。</p>

    <p><code class="directive"><a href="#virtualhost">&lt;VirtualHost&gt;</a></code>指令中名称的完整列表被视为（非通配符） <code class="directive">ServerAlias</code> 。</p>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code></li>
<li><a href="../vhosts/index.html">Apache HTTP Server虚拟主机文档</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerName" id="ServerName">ServerName</a> <a name="servername" id="servername">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器用来标识自己的主机名和端口</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerName [ <var>方案</var> ：//] <var>域名</var> | <var>ip-address</var> [： <var>port</var> ]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ServerName</code>指令设置服务器用于标识自身的请求方案，主机名和端口。
    </p>

    <p>使用<a href="../vhosts/name-based.html">基于名称</a>的虚拟主机时， <code class="directive">ServerName</code> （可能与<code class="directive"><a href="#serveralias">ServerAlias</a></code>结合使用）唯一地标识<a href="../vhosts/name-based.html">虚拟主机</a> 。</p>

    <p>此外，当<code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code>设置为非默认值时，在创建自引用重定向URL时将使用此选项。</p>

    <p>例如，如果托管Web服务器的计算机的名称为<code>simple.example.com</code> ，但该计算机还具有DNS别名<code>www.example.com</code>并且您希望如此标识Web服务器，则应使用以下指令：</p>

    <pre class="prettyprint lang-config">ServerName www.example.com</pre>


    <p><code class="directive">ServerName</code>指令可能出现在服务器定义内的任何位置。但是，每个外观都会覆盖先前的外观（在该服务器内）。</p>

    <p>如果未指定<code class="directive">ServerName</code> ，则服务器将尝试通过首先向操作系统询问系统主机名来推断出客户端可见的主机名，如果失败，则对系统上存在的IP地址执行反向查找。</p>

    <p>如果在<code class="directive">ServerName</code>未指定端口，则服务器将使用传入请求中的端口。为了获得最佳的可靠性和可预测性，您应该使用<code class="directive">ServerName</code>指令指定一个明确的主机名和端口。</p>

    <p>如果使用<a href="../vhosts/name-based.html">的是基于名称的虚拟主机</a> ，则<code class="directive"><a href="#virtualhost">&lt;VirtualHost&gt;</a></code>部分中的<code class="directive">ServerName</code>指定必须在请求的<code>Host:</code>标头中显示的<code>Host:</code>名，以匹配该虚拟主机。</p>

    <p>有时，服务器在运行SSL的设备（例如反向代理，负载平衡器或SSL卸载设备）后面运行。在这种情况下，请在<code class="directive">ServerName</code>指令中指定<code>https://</code>方案和客户端连接的端口号，以确保服务器生成正确的自引用URL。</p>

    <p>有关设置的信息，请参见<code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code>和<code class="directive"><a href="#usecanonicalphysicalport">UseCanonicalPhysicalPort</a></code>指令的描述，这些设置确定自引用URL（例如，通过<code class="module"><a href="../mod/mod_dir.html">mod_dir</a></code>模块）将引用指定的端口，还是引用客户端请求中给出的端口号。</p>

    <div class="warning">
    <p>未能将<code class="directive">ServerName</code>设置为服务器可以解析为IP地址的名称将导致启动警告。然后， <code>httpd</code>将使用系统的<code>hostname</code>命令使用它可以确定的任何主机<code>hostname</code> 。这几乎永远不会是您真正想要的主机名。</p>
    <div class="example"><p><code>httpd：无法可靠地确定服务器的标准域名，使用rocinante.local作为ServerName</code></p></div>
    </div>


<h3>也可以看看</h3>
<ul>
<li><a href="../dns-caveats.html">有关DNS和Apache HTTP Server的问题</a></li>
<li><a href="../vhosts/index.html">Apache HTTP Server虚拟主机文档</a></li>
<li><code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code></li>
<li><code class="directive"><a href="#usecanonicalphysicalport">使用规范物理端口</a></code></li>
<li><code class="directive"><a href="#serveralias">服务器别名</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerPath" id="ServerPath">ServerPath</a> <a name="serverpath" id="serverpath">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>不兼容的浏览器访问的基于名称的虚拟主机的旧版URL路径名</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerPath <var>URL路径</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ServerPath</code>指令设置主机的旧版URL路径名，以与<a href="../vhosts/index.html">基于名称的虚拟主机一起使用</a> 。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../vhosts/index.html">Apache HTTP Server虚拟主机文档</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerRoot" id="ServerRoot">ServerRoot</a> <a name="serverroot" id="serverroot">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器安装的基本目录</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerRoot <var>目录路径</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ServerRoot / usr / local / apache</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ServerRoot</code>指令设置服务器所在的目录。通常，它将包含子目录<code>conf/</code>和<code>logs/</code> 。其他配置指令（例如<code class="directive"><a href="#include">Include</a></code>或<code class="directive"><a href="../mod/mod_so.html#loadmodule">LoadModule</a></code> ）中的相对路径被视为相对于此目录。</p>

    <pre class="prettyprint lang-config">ServerRoot "/home/httpd"</pre>


    <p>可以使用<code>--prefix</code>参数<a href="../programs/configure.html"><code>configure</code></a>来修改<code class="directive">ServerRoot</code>的默认位置，并且服务器的大多数第三方发行版的默认位置都不同于上面列出的默认位置。</p>


<h3>也可以看看</h3>
<ul>
<li><a href="../invoking.html"><code>httpd</code>的<code>-d</code>选项</a></li>
<li>有关如何正确设置<code class="directive">ServerRoot</code>权限的信息<a href="../misc/security_tips.html#serverroot">的安全提示</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerSignature" id="ServerSignature">ServerSignature</a> <a name="serversignature" id="serversignature">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>在服务器生成的文档上配置页脚</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerSignature开|关|电子邮件</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>服务器签名关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>所有</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">ServerSignature</code>指令允许在服务器生成的文档（错误消息， <code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> ftp目录列表， <code class="module"><a href="../mod/mod_info.html">mod_info</a></code>输出等）下的尾页尾行进行配置。之所以要启用这样的页脚行，是因为在代理链中，用户通常无法判断哪个链式服务器实际上产生了返回的错误消息。</p>

    <p>“ <code>Off</code>设置是默认设置，它禁止显示页脚行（因此与Apache-1.2及更低版本的行为兼容）。“ <code>On</code>设置仅添加带有服务器版本号和所服务虚拟主机的<code class="directive"><a href="#servername">ServerName</a></code>的行，并且“ <code>EMail</code>设置还创建对引用文档的<code class="directive"><a href="#serveradmin">ServerAdmin</a></code>的“ mailto：”引用。</p>

    <p>在版本2.0.44之后，显示的服务器版本号的详细信息由<code class="directive"><a href="#servertokens">ServerTokens</a></code>指令控制。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#servertokens">服务器令牌</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="ServerTokens" id="ServerTokens">ServerTokens</a> <a name="servertokens" id="servertokens">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>配置<code>Server</code> HTTP响应标头</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>ServerTokens Major | Minor | Min [imal] | Prod [uctOnly] | OS | Full</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>ServerTokens已满</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>此伪指令控制发送回客户端的<code>Server</code>响应标头字段是否包括对服务器的通用OS类型的描述以及有关嵌入式模块的信息。</p>

    <dl>
      <dt><code>ServerTokens Full</code> （或未指定）</dt>

      <dd>服务器发送（ <em>例如</em> ）： <code>Server: Apache/2.4.2 (Unix) PHP/4.2.2 MyMod/1.2</code></dd>

      <dt><code>ServerTokens产品[uctOnly]</code></dt>

      <dd>服务器发送（ <em>例如</em> ）： <code>Server: Apache</code></dd>

      <dt><code>ServerTokens专业</code></dt>

      <dd>服务器发送（ <em>例如</em> ）： <code>Server: Apache/2</code></dd>

      <dt><code>ServerTokens次要</code></dt>

      <dd>服务器发送（ <em>例如</em> ）： <code>Server: Apache/2.4</code></dd>

      <dt><code>ServerTokens最小值</code></dt>

      <dd>服务器发送（ <em>例如</em> ）： <code>Server: Apache/2.4.2</code></dd>

      <dt><code>ServerTokens操作系统</code></dt>

      <dd>服务器发送（ <em>例如</em> ）： <code>Server: Apache/2.4.2 (Unix)</code></dd>

    </dl>

    <p>此设置适用于整个服务器，并且不能在逐个虚拟主机的基础上启用或禁用。</p>

    <p>2.0.44版本后，该指令还控制由提供的信息<code class="directive"><a href="#serversignature">ServerSignature</a></code>指令。</p>

    <div class="note">不建议将<code class="directive">ServerTokens</code>设置为小于<code>minimal</code>因为这样会使调试互操作问题更加困难。另请注意，禁用Server：标头根本没有任何作用来使您的服务器更安全。“默默无闻的安全”的想法是一个神话，并导致错误的安全感。</div>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#serversignature">服务器签名</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="SetHandler" id="SetHandler">SetHandler</a> <a name="sethandler" id="sethandler">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>强制所有匹配文件由处理程序处理</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>SetHandler <var>处理程序名称</var> |无| <var>表达</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">兼容性：</a></th><td>表达式参数2.4.19及更高版本</td></tr>
</table>
    <p>当放入<code>.htaccess</code>文件或<code class="directive"><a href="#directory">&lt;Directory&gt;</a></code>和<code class="directive"><a href="#location">&lt;Location&gt;</a></code>部分，这个指令将强制所有匹配的文件通过解析<a href="../handler.html">处理</a>的<var>处理程序名</var>给出。例如，如果您有一个目录希望完全解析为imagemap规则文件，而不管其扩展名如何，则可以将以下内容放入该目录的<code>.htaccess</code>文件中：</p>

    <pre class="prettyprint lang-config">SetHandler imap-file</pre>


    <p>另一个示例：如果希望在每次调用<code>http://servername/status</code>的URL时使服务器显示状态报告，则可以将以下内容放入<code>httpd.conf</code> ：</p>

    <pre class="prettyprint lang-config">&lt;Location "/status"&gt;
  SetHandler server-status
&lt;/Location&gt;</pre>


    <p>您也可以使用此伪指令为具有特定文件扩展名的文件配置特定处理程序。例如：</p>

    <pre class="prettyprint lang-config">&lt;FilesMatch "\.php$"&gt;
    SetHandler application/x-httpd-php
&lt;/FilesMatch&gt;</pre>


    <p>字符串值表达式可用于引用每个请求变量，包括对已命名正则表达式的反向引用：</p>

    <pre class="prettyprint lang-config">&lt;LocationMatch ^/app/(?&lt;sub&gt;[^/]+)/&gt;
     SetHandler "proxy:unix:/var/run/app_%{env:MATCH_sub}.sock|fcgi://localhost:8080"
&lt;/LocationMatch&gt;</pre>


    <p>您可以使用值<code>None</code>覆盖先前定义的<code class="directive">SetHandler</code>指令。</p>

    <div class="note"><h3>注意</h3>
    <p>由于<code class="directive">SetHandler</code>会覆盖默认处理程序，因此将<code class="directive">SetHandler</code>正常行为，例如处理目录或索引文件时以斜杠（/）结尾的URL。</p></div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="../mod/mod_mime.html#addhandler">AddHandler</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="SetInputFilter" id="SetInputFilter">SetInputFilter</a> <a name="setinputfilter" id="setinputfilter">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置将处理客户端请求和POST输入的过滤器</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>SetInputFilter <var>过滤器</var> [; <var>过滤器</var> ...]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">SetInputFilter</code>指令设置一个或多个过滤器，这些过滤器将在服务器接收到客户端请求和POST输入时处理它们。这是在其他地方定义的所有过滤器的补充，包括<code class="directive"><a href="../mod/mod_mime.html#addinputfilter">AddInputFilter</a></code>指令。</p>

    <p>如果指定了多个过滤器，则必须按分号将它们按处理内容的顺序分隔。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../filter.html">筛选器</a>文档</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="SetOutputFilter" id="SetOutputFilter">SetOutputFilter</a> <a name="setoutputfilter" id="setoutputfilter">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>设置将处理服务器响应的过滤器</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>SetOutputFilter <var>过滤器</var> [; <var>过滤器</var> ...]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录，.htaccess</td></tr>
<tr><th><a href="directive-dict.html#Override">覆写：</a></th><td>文件信息</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">SetOutputFilter</code>指令设置过滤器，该过滤器将在将服务器的响应发送到客户端之前对其进行处理。这是在其他地方定义的任何过滤器的补充，包括<code class="directive"><a href="../mod/mod_mime.html#addoutputfilter">AddOutputFilter</a></code>指令。</p>

    <p>例如，以下配置将处理<code>/www/data/</code>目录中服务器端包含的所有文件。</p>

    <pre class="prettyprint lang-config">&lt;Directory "/www/data/"&gt;
  SetOutputFilter INCLUDES
&lt;/Directory&gt;</pre>


    <p>如果指定了多个过滤器，则必须按分号将它们按处理内容的顺序分隔。</p>

<h3>也可以看看</h3>
<ul>
<li><a href="../filter.html">筛选器</a>文档</li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="TimeOut" id="TimeOut">超时</a> <a name="timeout" id="timeout">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>服务器在失败请求之前等待某些事件的时间</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>超时<var>秒</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>超时60</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">TimeOut</code>指令定义了Apache httpd在各种情况下等待I / O的时间长度：</p>

    <ul>
      <li><p>从客户端读取数据时，如果读取缓冲区为空，则等待TCP数据包到达的时间。</p>
      <p>对于新连接上的初始数据，该指令直到任何已配置的<code class="directive"><a href="#acceptfilter">AcceptFilter</a></code>将新连接传递到服务器后才生效。</p>
      </li>

      <li>将数据写入客户端时，如果发送缓冲区已满，则等待数据包确认的时间。</li>

      <li>在<code class="module"><a href="../mod/mod_cgi.html">mod_cgi</a></code>和<code class="module"><a href="../mod/mod_cgid.html">mod_cgid</a></code> ，等待CGI脚本的任何单个输出块的时间长度。</li>

      <li>在<code class="module"><a href="../mod/mod_ext_filter.html">mod_ext_filter</a></code> ，等待过滤过程输出的时间长度。</li>

      <li>在<code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> ，如果未配置<code class="directive"><a href="../mod/mod_proxy.html#proxytimeout">ProxyTimeout</a></code>则为默认超时值。</li>
    </ul>


</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="TraceEnable" id="TraceEnable">TraceEnable</a> <a name="traceenable" id="traceenable">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>确定<code>TRACE</code>请求的行为</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>TraceEnable <var>[on | off | extended]</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>TraceEnable on</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>该指令覆盖了核心服务器和<code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code>的<code>TRACE</code>行为。默认的<code>TraceEnable on</code>允许根据RFC 2616进行<code>TRACE</code>请求，该请求不允许任何请求正文伴随该请求。 <code>TraceEnable off</code>会导致核心服务器和<code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code>向客户端返回<code>405</code> （不允许使用方法）错误。</p>

    <p>最后，仅出于测试和诊断目的，可以使用不兼容的<code>TraceEnable extended</code>指令来允许请求正文。核心（作为源服务器）会将请求主体限制为64Kb（如果使用<code>Transfer-Encoding: chunked</code>则对块头另加8Kb）。核心将在响应主体中反映完整的标头和所有块标头。作为代理服务器，请求主体不限于64Kb。</p>

    <div class="note"><h3>注意</h3>

    <p>尽管有相反的说法，但启用<code>TRACE</code>方法不会在Apache httpd中暴露任何安全漏洞。<code>TRACE</code>方法是由HTTP / 1.1规范定义的，并且期望实现能够支持它。</p>
    
    </div>

</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="UnDefine" id="UnDefine">未定义</a> <a name="undefine" id="undefine">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>未定义变量的存在</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>未定义<var>参数名</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>撤消<code class="directive"><a href="#define">Define</a></code>或将<code>-D</code>参数传递给<code class="program"><a href="../programs/httpd.html">httpd</a></code> 。</p>
    <p>此伪指令可用于切换<code class="directive"><a href="#ifdefine">&lt;IfDefine&gt;</a></code>节的使用，而无需更改任何启动脚本中的<code>-D</code>参数。</p>
    <p>尽管虚拟主机上下文中支持此指令，但其所作的更改对于任何后续的配置指令（除了任何封闭的虚拟主机）都是可见的。</p>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#define">限定</a></code></li>
<li><code class="directive"><a href="#ifdefine">如果定义</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="UseCanonicalName" id="UseCanonicalName">UseCanonicalName</a> <a name="usecanonicalname" id="usecanonicalname">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>配置服务器如何确定自己的名称和端口</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>UseCanonicalName启用|禁用| DNS</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>UseCanonicalName关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>在许多情况下，Apache httpd必须构造一个<em>自我引用的</em> URL，即，引用回同一服务器的URL。<code>UseCanonicalName On</code> Apache上使用<code>UseCanonicalName On</code> httpd将使用<code class="directive"><a href="#servername">ServerName</a></code>指令中指定的主机名和端口来构造服务器的规范名称。此名称用于所有自引用URL中，并用于CGI中的<code>SERVER_NAME</code>和<code>SERVER_PORT</code>的值。</p>

    <p><code>UseCanonicalName Off</code> Apache httpd将使用客户机提供的主机名和端口（如果提供了主机名和端口）形成自引用URL（否则它将使用规范名称，如上定义）。这些值与用于实现<a href="../vhosts/name-based.html">基于名称的虚拟主机的</a>值相同，并且可用于相同的客户端。CGI变量<code>SERVER_NAME</code>和<code>SERVER_PORT</code>也将由客户端提供的值构造。</p>

    <p>一个可能有用的示例是Intranet服务器上，在该服务器上，用户使用短名称（例如<code>www</code>连接到计算机。您会注意到，如果用户键入短名和URL（例如<code>http://www/splat</code>作为目录， <em>且不带斜杠</em> ，则Apache httpd会将其重定向到<code>http://www.example.com/splat/</code> 。如果启用了身份验证，这将导致用户必须进行两次身份验证（一次访问<code>www</code> ，一次再次访问<code>www.example.com</code> ， <a href="http://wiki.apache.org/httpd/FAQ#Why_does_Apache_ask_for_my_password_twice_before_serving_a_file.3F">有关更多信息，</a>请参阅<a href="http://wiki.apache.org/httpd/FAQ#Why_does_Apache_ask_for_my_password_twice_before_serving_a_file.3F">FAQ</a> ）。但是，如果<code class="directive">UseCanonicalName</code>设置为<code>Off</code> ，则Apache httpd将重定向到<code>http://www/splat/</code> 。</p>

    <p>还有第三个选项<code>UseCanonicalName DNS</code> ，它与基于IP的大规模虚拟主机一起使用，以支持不提供<code>Host:</code>标头的古老客户端。使用此选项，Apache httpd在客户端连接到的服务器IP地址上执行反向DNS查找，以计算出自引用URL。</p>

    <div class="warning"><h3>警告</h3>
    <p>如果CGI假设有关<code>SERVER_NAME</code>的值，则此选项可能会破坏它们。客户端实质上可以自由地提供他们想要的任何值作为主机名。但是，如果CGI仅使用<code>SERVER_NAME</code>构造自引用URL，那么就可以了。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#usecanonicalphysicalport">使用规范物理端口</a></code></li>
<li><code class="directive"><a href="#servername">服务器名称</a></code></li>
<li><code class="directive"><a href="../mod/mpm_common.html#listen">听</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="UseCanonicalPhysicalPort" id="UseCanonicalPhysicalPort">使用</a> <a name="usecanonicalphysicalport" id="usecanonicalphysicalport">规范</a> <a name="UseCanonicalPhysicalPort" id="UseCanonicalPhysicalPort">物理端口</a> <a name="usecanonicalphysicalport" id="usecanonicalphysicalport">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>配置服务器如何确定自己的端口</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>UseCanonicalPhysicalPort开启|关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Default">默认：</a></th><td><code>使用规范物理端口关闭</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置，虚拟主机，目录</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p>在许多情况下，Apache httpd必须构造一个<em>自我引用的</em> URL，即，引用回同一服务器的URL。<code>UseCanonicalPhysicalPort On</code> ，Apache httpd在为服务器构造规范端口以遵循<code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code>指令时，将提供此请求使用的实际物理端口号作为潜在端口。<code>UseCanonicalPhysicalPort Off</code> ，Apache httpd将永远不会使用实际的物理端口号，而是依靠所有已配置的信息来构造有效的端口号。</p>

    <div class="note"><h3>注意</h3>
    <p>使用物理端口时查找的顺序如下：</p>
     <dl>
     <dt><code>UseCanonicalName开</code></dt>
     <dd>
     <ol>
      <li><code class="directive"><a href="#servername">Servername</a></code>提供的端口</li>
      <li>物理端口</li>
      <li>默认端口</li>
     </ol>
     </dd>
     <dt><code>UseCanonicalName关闭|域名解析</code></dt>
     <dd>
     <ol>
      <li>从<code>Host:</code>解析的端口<code>Host:</code>标头</li>
      <li>物理端口</li>
      <li><code class="directive"><a href="#servername">Servername</a></code>提供的端口</li>
      <li>默认端口</li>
     </ol>
     </dd>
     </dl>

    <p><code>UseCanonicalPhysicalPort Off</code> ，将从订购中删除物理端口。</p>
    </div>


<h3>也可以看看</h3>
<ul>
<li><code class="directive"><a href="#usecanonicalname">UseCanonicalName</a></code></li>
<li><code class="directive"><a href="#servername">服务器名称</a></code></li>
<li><code class="directive"><a href="../mod/mpm_common.html#listen">听</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="directive-section"><h2><a name="VirtualHost" id="VirtualHost">&lt;VirtualHost&gt;</a> <a name="virtualhost" id="virtualhost">指令</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">描述：</a></th><td>包含仅适用于特定主机名或IP地址的指令</td></tr>
<tr><th><a href="directive-dict.html#Syntax">句法：</a></th><td><code>&lt;VirtualHost <var>addr</var> [： <var>端口</var> ] [ <var>addr</var> [： <var>端口</var> ]] ...&gt; ... &lt;/ VirtualHost&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">内容：</a></th><td>服务器配置</td></tr>
<tr><th><a href="directive-dict.html#Status">状态：</a></th><td>核心</td></tr>
<tr><th><a href="directive-dict.html#Module">模块：</a></th><td>核心</td></tr>
</table>
    <p><code class="directive">&lt;VirtualHost&gt;</code>和<code>&lt;/VirtualHost&gt;</code>用于封装仅适用于特定虚拟主机的一组指令。可以使用虚拟主机上下文中允许的任何指令。服务器收到特定虚拟主机上的文档请求时，将使用<code class="directive">&lt;VirtualHost&gt;</code>部分中包含的配置指令。<var>Addr</var>可以是以下任意一种，可以选择后面跟一个冒号和一个端口号（或*）：</p>

    <ul>
      <li>虚拟主机的IP地址；</li>

      <li>虚拟主机IP地址的标准域名（不建议）；</li>

      <li>字符<code>*</code> ，用作通配符并与任何IP地址匹配。</li>

      <li>字符串<code>_default_</code> ，它是<code>*</code>的别名</li>

    </ul>

    <pre class="prettyprint lang-config">&lt;VirtualHost 10.1.2.3:80&gt;
  ServerAdmin webmaster@host.example.com
  DocumentRoot "/www/docs/host.example.com"
  ServerName host.example.com
  ErrorLog "logs/host.example.com-error_log"
  TransferLog "logs/host.example.com-access_log"
&lt;/VirtualHost&gt;</pre>



    <p>必须在方括号中指定IPv6地址，因为否则无法确定可选端口号。一个IPv6示例如下所示：</p>

    <pre class="prettyprint lang-config">&lt;VirtualHost [2001:db8::a00:20ff:fea7:ccea]:80&gt;
  ServerAdmin webmaster@host.example.com
  DocumentRoot "/www/docs/host.example.com"
  ServerName host.example.com
  ErrorLog "logs/host.example.com-error_log"
  TransferLog "logs/host.example.com-access_log"
&lt;/VirtualHost&gt;</pre>


    <p>每个虚拟主机必须对应于服务器的不同IP地址，不同端口号或不同主机名，在前一种情况下，必须将服务器计算机配置为接受多个地址的IP数据包。（如果机器没有多个网络接口，则可以使用<code>ifconfig alias</code>命令来完成-如果您的操作系统支持的话）。</p>

    <div class="note"><h3>注意</h3>
    <p><code class="directive">&lt;VirtualHost&gt;</code>的使用<strong>不会</strong>影响Apache httpd侦听的地址。您可能需要确保Apache httpd使用<code class="directive"><a href="../mod/mpm_common.html#listen">Listen</a></code>在正确的地址上进行<code class="directive"><a href="../mod/mpm_common.html#listen">Listen</a></code> 。</p>
    </div>

    <p>应该在每个<code class="directive">&lt;VirtualHost&gt;</code>块内指定一个<code class="directive"><a href="#servername">ServerName</a></code> 。如果不存在，则将继承“主”服务器配置中的<code class="directive"><a href="#servername">ServerName</a></code> 。</p>

    <p>收到请求后，服务器首先仅基于本地IP地址和端口组合将其映射到最匹配的<code class="directive">&lt;VirtualHost&gt;</code> 。非通配符具有更高的优先级。如果根本没有基于IP和端口的匹配发生，则使用“主”服务器配置。</p>

    <p>如果多个虚拟主机包含最匹配的IP地址和端口，则服务器会根据请求的主机名从这些虚拟主机中选择最匹配的主机。如果找不到匹配的基于名称的虚拟主机，则将使用与IP地址匹配的第一个列出的虚拟主机。因此，给定IP地址和端口组合的第一个列出的虚拟主机是该IP和端口组合的默认虚拟主机。</p>

    <div class="warning"><h3>安全</h3>
    <p>请参阅<a href="../misc/security_tips.html">安全性提示</a>文档，以详细了解如果启动日志的用户以外的任何人都可写日志文件存储目录的原因，那么为什么安全性会受到损害。</p>
    </div>

<h3>也可以看看</h3>
<ul>
<li><a href="../vhosts/index.html">Apache HTTP Server虚拟主机文档</a></li>
<li><a href="../dns-caveats.html">有关DNS和Apache HTTP Server的问题</a></li>
<li><a href="../bind.html">设置Apache HTTP Server使用哪些地址和端口</a></li>
<li><a href="../sections.html">&lt;Directory&gt;，&lt;Location&gt;和&lt;Files&gt;部分的工作方式</a> ，以解释接收请求时如何组合这些不同的部分</li>
</ul>
</div>
</div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>