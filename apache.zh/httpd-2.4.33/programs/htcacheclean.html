<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>htcacheclean-清理磁盘缓存-Apache HTTP Server版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP服务器</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="../index.html">版本2.4</a> > <a href="./index.html">程序</a></div><div id="page-content"><div id="preamble"><h1>htcacheclean-清理磁盘缓存</h1>


    <p><code>htcacheclean</code>用于保持尺寸<code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code>在给定大小限制或使用的inode限制内的存储。该工具可以手动运行，也可以在守护程序模式下运行。在守护程序模式下运行时，它将在后台休眠，并定期检查高速缓存目录中要删除的高速缓存内容。您可以通过发送TERM或INT信号来干净地停止该守护程序。手动运行时，将对缓存目录进行一次一次性检查，以删除要缓存的内容。如果指定了一个或多个URL，则将从缓存中删除每个URL（如果存在）。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="../images/down.gif"> <a href="#synopsis">概要</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#options">选件</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#delete">删除特定的URL</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#list">列出缓存中的URL</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#exit">退出状态</a></li>
</ul><h3>也可以看看</h3><ul class="seealso"><li><code class="module"><a href="../mod/mod_cache_disk.html">mod_cache_disk</a></code></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="synopsis" id="synopsis">概要</a></h2>
    <p><code><strong>htcacheclean</strong> [ -<strong>D</strong> ] [ -<strong>v</strong> ] [ -<strong>t</strong> ] [ -<strong>r</strong> ] [ -<strong>n</strong> ] [ -<strong>R</strong><var>round</var> ] -<strong>p</strong><var>path</var> [-<strong>l</strong><var>limit</var>| -<strong>L</strong><var>limit</var>]</code></p>

    <p><code><strong>htcacheclean</strong> [ -<strong>n</strong> ] [ -<strong>t</strong> ] [ -<strong>i</strong> ] [ -<strong>P</strong><var>pidfile</var> ] [ -<strong>R</strong><var>round</var> ] -<strong>d</strong><var>interval</var> -<strong>p</strong><var>path</var> [-<strong>l</strong><var>limit</var>| -<strong>L</strong><var>limit</var>]</code></p>

    <p><code><strong>htcacheclean</strong> [ -<strong>v</strong> ] [ -<strong>R</strong><var>round</var> ] -<strong>p</strong><var>path</var> [ -<strong>a</strong> ] [ -<strong>A</strong> ]</code></p>

    <p><code><strong>htcacheclean</strong> [ -<strong>D</strong> ] [ -<strong>v</strong> ] [ -<strong>t</strong> ] [ -<strong>R</strong><var>round</var> ] -<strong>p</strong><var>path</var> <var>url</var></code></p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="options" id="options">选件</a></h2>
    <dl>
    <dt><code>-d<var>interval</var></code></dt>
    <dd>守护进程并重复缓存清理<var>interval</var>分钟。此选项与以下选项互斥<code>-D</code> ， <code>-v</code>和<code>-r</code>选项。要干净地关闭守护程序，只需发送一个<code>SIGTERM</code>要么<code>SIGINT</code> 。</dd>

    <dt><code>-D</code></dt>
    <dd>试运行，不要删除任何内容。此选项与以下选项互斥<code>-d</code>选项。当进行试运行并使用以下命令删除目录时<code>-t</code> ，统计信息中报告已删除的inode不能考虑已删除的目录，并将其标记为估计值。</dd>

    <dt><code>-v</code></dt>
    <dd>冗长并打印统计信息。此选项与以下选项互斥<code>-d</code>选项。</dd>

    <dt><code>-r</code></dt>
    <dd>彻底清洁。这假定Apache Web服务器未运行（否则您可能会在高速缓存中获得垃圾）。此选项与以下选项互斥<code>-d</code>选项并暗示<code>-t</code>选项。</dd>

    <dt><code>-n</code></dt>
    <dd>对人好点。这导致较慢的处理，有利于其他处理。 <code>htcacheclean</code>会不时地休眠，因此（a）磁盘IO将被延迟，并且（b）内核可以同时调度其他进程。</dd>

    <dt><code>-t</code></dt>
    <dd>删除所有空目录。默认情况下，仅删除缓存文件，但是对于某些配置，可能需要注意创建的大量目录。如果您的配置需要大量目录，以至于inode或文件分配表耗尽可能会成为问题，建议使用此选项。</dd>

    <dt><code>-p<var>path</var></code></dt>
    <dd>指定<var>path</var>作为磁盘缓存的根目录。该值应与<code class="directive"><a href="../mod/mod_cache_disk.html#cacheroot">CacheRoot</a></code>指示。</dd>

    <dt><code>-P<var>pidfile</var></code></dt>
    <dd>指定<var>pidfile</var>作为守护进程写入进程ID的文件的名称。</dd>

    <dt><code>-R<var>round</var></code></dt>
    <dd>指定<var>round</var>作为舍入到最大大小的数量，以补偿磁盘块大小。设置为缓存分区的块大小。</dd>

    <dt><code>-l<var>limit</var></code></dt>
    <dd>指定<var>limit</var>作为总磁盘缓存大小限制。默认情况下，该值以字节表示（或附加<code>B</code>的数字）。连接<code>K</code>千字节或<code>M</code>为MB。</dd>

    <dt><code>-L<var>limit</var></code></dt>
    <dd>指定<var>limit</var>作为总磁盘缓存inode限制。</dd>

    <dt><code>-i</code></dt>
    <dd>聪明一点，只有在修改磁盘缓存时才运行。此选项仅可与<code>-d</code>选项。</dd>

    <dt><code>-a</code></dt>
    <dd>列出当前存储在缓存中的URL。同一网址的变体将为每个变体列出一次。</dd>

    <dt><code>-A</code></dt>
    <dd>按以下顺序列出当前存储在缓存中的URL及其属性：URL，标头大小，主体大小，状态，实体版本，日期，到期时间，请求时间，响应时间，存在的主体，头请求。</dd>
    </dl>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="delete" id="delete">删除特定的URL</a></h2>
    <p>如果<code>htcacheclean</code>如果传递了一个或多个URL，则会从缓存中删除每个URL。如果存在URL的多个变体，则将删除所有变体。</p>

    <p>当要删除反向代理URL时，有效URL由<strong>Host</strong>标头， <strong>端口</strong> ， <strong>路径</strong>和<strong>查询</strong>构造。注意“？无论是否存在查询字符串，都必须始终在URL中明确指定“”。例如，尝试从服务器<strong>localhost</strong>删除路径<strong>/</strong> ，要删除的URL将是<strong>http：// localhost：80 /?。</strong> 。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="list" id="list">列出缓存中的URL</a></h2>
    <p>通过<code>-a</code>要么<code>-A</code>的选项<code>htcacheclean</code> ，则会在找到后列出缓存中的URL，每行一个URL。的<code>-A</code>选项将完整的缓存条目转储到URL之后，并按以下顺序排列字段：</p>

    <dl>
        <dt>网址</dt><dd>条目的URL。</dd>
        <dt>标头大小</dt><dd>标头的大小（以字节为单位）。</dd>
        <dt>身体尺寸</dt><dd>主体的大小（以字节为单位）。</dd>
        <dt>状态</dt><dd>缓存响应的状态。</dd>
        <dt>实体版本</dt><dd>此条目已被重新验证但未被删除的次数。</dd>
        <dt>日期</dt><dd>回复日期。</dd>
        <dt>到期</dt><dd>响应的到期日期。</dd>
        <dt>请求时间</dt><dd>请求开始的时间。</dd>
        <dt>响应时间</dt><dd>请求结束的时间。</dd>
        <dt>身体存在</dt><dd>如果为0，则此请求不存储任何正文，否则为1。</dd>
        <dt>头要求</dt><dd>如果为1，则该条目包含没有正文的已缓存HEAD请求，否则为0。</dd>
    </dl>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="exit" id="exit">退出状态</a></h2>
    <p><code>htcacheclean</code>如果所有操作均成功，则返回零状态（“ true”）， <code>1</code>除此以外。如果指定了网址，并且该网址已缓存并成功删除， <code>0</code>返回， <code>2</code>除此以外。如果在删除网址期间发生错误， <code>1</code>返回。</p>
</div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>