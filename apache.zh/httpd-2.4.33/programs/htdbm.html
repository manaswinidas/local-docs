<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>htdbm-处理DBM密码数据库-Apache HTTP Server版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP服务器</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="../index.html">版本2.4</a> > <a href="./index.html">程序</a></div><div id="page-content"><div id="preamble"><h1>htdbm-操作DBM密码数据库</h1>


    <p><code>htdbm</code>用于处理DBM格式的文件，该文件用于存储用户名和密码，以通过HTTP用户对HTTP用户进行基本身份验证<code class="module"><a href="../mod/mod_authn_dbm.html">mod_authn_dbm</a></code> 。见<code class="program"><a href="../programs/dbmmanage.html">dbmmanage</a></code>文档，以获取有关这些DBM文件的更多信息。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="../images/down.gif"> <a href="#synopsis">概要</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#options">选件</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#bugs">虫子</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#exit">退出状态</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#examples">例子</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#security">安全注意事项</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#restrictions">限制条件</a></li>
</ul><h3>也可以看看</h3><ul class="seealso"><li><code class="program"><a href="../programs/httpd.html">httpd</a></code></li><li><code class="program"><a href="../programs/dbmmanage.html">dbmmanage</a></code></li><li><code class="module"><a href="../mod/mod_authn_dbm.html">mod_authn_dbm</a></code></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="synopsis" id="synopsis">概要</a></h2>
    <p><code><strong>htdbm</strong> [ -<strong>T</strong><var>DBTYPE</var> ] [ -<strong>i</strong> ] [ -<strong>c</strong> ] [ -<strong>m</strong> | -<strong>B</strong> | -<strong>d</strong> | -<strong>s</strong> | -<strong>p</strong> ] [ -<strong>C</strong> <var>cost</var> ] [ -<strong>t</strong> ] [ -<strong>v</strong> ] <var>filename</var> <var>username</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>b</strong> [ -<strong>T</strong><var>DBTYPE</var> ] [ -<strong>c</strong> ] [ -<strong>m</strong> | -<strong>B</strong> | -<strong>d</strong> | -<strong>s</strong> | -<strong>p</strong> ] [ -<strong>C</strong> <var>cost</var> ] [ -<strong>t</strong> ] [ -<strong>v</strong> ] <var>filename</var> <var>username</var> <var>password</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>n</strong> [ -<strong>i</strong> ] [ -<strong>c</strong> ] [ -<strong>m</strong> | -<strong>B</strong> | -<strong>d</strong> | -<strong>s</strong> | -<strong>p</strong> ] [ -<strong>C</strong> <var>cost</var> ] [ -<strong>t</strong> ] [ -<strong>v</strong> ] <var>username</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>nb</strong> [ -<strong>c</strong> ] [ -<strong>m</strong> | -<strong>B</strong> | -<strong>d</strong> | -<strong>s</strong> | -<strong>p</strong> ] [ -<strong>C</strong> <var>cost</var> ] [ -<strong>t</strong> ] [ -<strong>v</strong> ] <var>username</var> <var>password</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>v</strong> [ -<strong>T</strong><var>DBTYPE</var> ] [ -<strong>i</strong> ] [ -<strong>c</strong> ] [ -<strong>m</strong> | -<strong>B</strong> | -<strong>d</strong> | -<strong>s</strong> | -<strong>p</strong> ] [ -<strong>C</strong> <var>cost</var> ] [ -<strong>t</strong> ] [ -<strong>v</strong> ] <var>filename</var> <var>username</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>vb</strong> [ -<strong>T</strong><var>DBTYPE</var> ] [ -<strong>c</strong> ] [ -<strong>m</strong> | -<strong>B</strong> | -<strong>d</strong> | -<strong>s</strong> | -<strong>p</strong> ] [ -<strong>C</strong> <var>cost</var> ] [ -<strong>t</strong> ] [ -<strong>v</strong> ] <var>filename</var> <var>username</var> <var>password</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>x</strong> [ -<strong>T</strong><var>DBTYPE</var> ] <var>filename</var> <var>username</var></code></p>

    <p><code><strong>htdbm</strong> -<strong>l</strong> [ -<strong>T</strong><var>DBTYPE</var> ]</code></p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="options" id="options">选件</a></h2>
    <dl>
    <dt><code>-b</code></dt>
    <dd>使用批处理模式； <em>即</em> ，从命令行获取密码而不是提示输入密码。应谨慎使用此选项，因为<strong>密码</strong>在命令行上<strong>清晰可见</strong> 。对于脚本使用，请参见<code>-i</code>选项。</dd>

    <dt><code>-i</code></dt>
    <dd>从标准输入读取密码而不进行验证（用于脚本）。</dd>

    <dt><code>-c</code></dt>
    <dd>创建<var>passwdfile</var> 。如果<var>passwdfile</var>已经存在，它将被重写并被截断。此选项不能与<code>-n</code>选项。</dd>

    <dt><code>-n</code></dt>
    <dd>在标准输出上显示结果，而不是更新数据库。此选项更改命令行的语法，因为<var>passwdfile</var>参数（通常是第一个）被省略。它不能与<code>-c</code>选项。</dd>

    <dt><code>-m</code></dt>
    <dd>对密码使用MD5加密。在Windows和Netware上，这是默认设置。</dd>

    <dt><code>-B</code></dt>
    <dd>对密码使用bcrypt加密。当前，这被认为是非常安全的。</dd>

    <dt><code>-C</code></dt>
    <dd>该标志仅允许与<code>-B</code> （bcrypt加密）。它设置用于bcrypt算法的计算时间（越高，越安全，但越慢，默认值：5，有效值：4到31）。</dd>

    <dt><code>-d</code></dt>
    <dd>使用<code>crypt()</code>密码加密。Windows和Netware以外的所有平台上的默认设置。虽然可能得到<code>htdbm</code>在所有平台上， <code class="program"><a href="../programs/httpd.html">httpd</a></code> Windows和Netware上的服务器。按照当今的标准，该算法是<strong>不安全</strong>的。</dd>

    <dt><code>-s</code></dt>
    <dd>对密码使用SHA加密。使用LDAP目录交换格式（ldif）促进与Netscape服务器之间的迁移。按照当今的标准，该算法是<strong>不安全</strong>的。</dd>

    <dt><code>-p</code></dt>
    <dd>使用纯文本密码。虽然<code>htdbm</code>将支持所有平台上的创建， <code class="program"><a href="../programs/httpd.html">httpd</a></code>守护程序仅在Windows和Netware上接受纯文本密码。</dd>

    <dt><code>-l</code></dt>
    <dd>在stdout上打印数据库中的每个用户名和注释。</dd>

    <dt><code>-v</code></dt>
    <dd>验证用户名和密码。程序将打印一条消息，指示提供的密码是否有效。如果密码无效，则程序退出并显示错误代码3。</dd>

    <dt><code>-x</code></dt>
    <dd>删除用户。如果用户名存在于指定的DBM文件中，它将被删除。</dd>

    <dt><code>-t</code></dt>
    <dd>将最终参数解释为注释。指定此选项后，可以在命令行中附加一个字符串。此字符串将与指定的用户名关联存储在数据库的“注释”字段中。</dd>

    <dt><code><var>filename</var></code></dt>
    <dd>DBM格式文件的文件名。通常不带扩展名<code>.db</code> ， <code>.pag</code> ， 要么<code>.dir</code> 。如果<code>-c</code>如果指定了DBM文件，则创建DBM文件（如果尚不存在），或者更新DBM文件（如果存在）。</dd>

    <dt><code><var>username</var></code></dt>
    <dd>要在其中创建或更新的用户名<var>passwdfile</var> 。如果<var>username</var>在此文件中不存在，将添加一个条目。如果确实存在，则更改密码。</dd>

    <dt><code><var>password</var></code></dt>
    <dd>要加密并存储在DBM文件中的纯文本密码。仅与<code>-b</code>旗。</dd>

    <dt><code>-T<var>DBTYPE</var></code></dt>
    <dd>DBM文件的类型（SDBM，GDBM，DB或“默认”）。</dd>
    </dl>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="bugs" id="bugs">虫子</a></h2>
    <p>应该意识到，存在许多不同的DBM文件格式，并且很可能在您的系统上存在一种以上格式的库。三个主要示例是SDBM，NDBM，GNU GDBM和Berkeley / Sleepycat DB 2/3/4。不幸的是，所有这些库都使用不同的文件格式，并且您必须确保<var>filename</var>格式与<code>htdbm</code>希望看到。 <code>htdbm</code>当前无法确定正在查看的DBM文件类型。如果以错误的格式使用它，将仅返回任何内容，或者使用不同的名称创建另一个DBM文件，或者在最坏的情况下，如果尝试写入该文件，可能会损坏DBM文件。</p>

    <p>通常可以使用<code>file</code>大多数Unix系统附带的程序，以查看DBM文件的格式。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="exit" id="exit">退出状态</a></h2>
    <p><code>htdbm</code>如果用户名和密码已成功添加或更新到DBM文件中，则返回零状态（“ true”）。
    <code>htdbm</code>退货<code>1</code>如果在访问文件时遇到问题， <code>2</code>如果命令行中存在语法问题， <code>3</code>如果密码是交互式输入的，并且验证项不匹配， <code>4</code>如果它的操作被中断， <code>5</code>如果值太长（用户名，文件名，密码或最终的计算记录）， <code>6</code>如果用户名包含非法字符（请参阅“ <a href="#restrictions">限制”部分</a> ），并且<code>7</code>如果该文件不是有效的DBM密码文件。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="examples" id="examples">例子</a></h2>
    <div class="example"><p><code>htdbm /usr/local/etc/apache/.htdbm-users jsmith</code></p></div>

    <p>添加或修改用户密码<code>jsmith</code> 。提示用户输入密码。如果在Windows系统上执行，则将使用修改后的Apache MD5算法对密码进行加密；否则，系统的<code>crypt()</code>将使用例行程序。如果该文件不存在， <code>htdbm</code>除了返回错误外，不会执行任何操作。</p>

    <div class="example"><p><code>htdbm -c /home/doe/public_html/.htdbm jane</code></p></div>

    <p>创建一个新文件并在其中存储一条记录供用户使用<code>jane</code> 。提示用户输入密码。如果文件存在并且无法读取或写入，则不会更改该文件，并且<code>htdbm</code>将显示一条消息并返回错误状态。</p>

    <div class="example"><p><code>htdbm -mb /usr/web/.htdbm-all jones Pwd4Steve</code></p></div>

    <p>从命令行对密码进行加密（ <code>Pwd4Steve</code> ）使用MD5算法，并将其存储在指定的文件中。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="security" id="security">安全注意事项</a></h2>
    <p>网络密码文件，例如由管理的密码文件<code>htdbm</code> <em>不</em>应该是Web服务器的URI空间中， -也就是说，他们不应该是可提取使用的浏览器。</p>

    <p>使用<code>-b</code>不建议使用该选项，因为使用该选项时，未加密的密码会出现在命令行中。</p>

    <p>使用时<code>crypt()</code>算法，请注意，仅使用密码的前8个字符构成密码。如果提供的密码更长，多余的字符将被静默丢弃。</p>

    <p>SHA加密格式不使用盐化：对于给定的密码，只有一个加密的表示形式。的<code>crypt()</code> MD5格式和MD5格式通过在字符串前添加随机盐字符串来置换表示，从而使针对密码的字典攻击更加困难。</p>

    <p>SHA和<code>crypt()</code>按照当今的标准，格式是不安全的。</p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="restrictions" id="restrictions">限制条件</a></h2>
    <p>在Windows平台上，密码使用<code>htdbm</code>限于不超过<code>255</code>字符长度。较长的密码将被截断为255个字符。</p>

    <p>MD5算法所使用的<code>htdbm</code>特定于Apache软件；使用它加密的密码将无法在其他Web服务器上使用。</p>

    <p>用户名仅限于<code>255</code>字节，可能不包含字符<code>:</code> 。</p>
</div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>