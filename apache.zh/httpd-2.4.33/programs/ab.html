<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>ab-Apache HTTP服务器基准测试工具-Apache HTTP Server版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP服务器</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="../index.html">版本2.4</a> > <a href="./index.html">程序</a></div><div id="page-content"><div id="preamble"><h1>ab-Apache HTTP服务器基准测试工具</h1>


    <p><code>ab</code>是用于对Apache超文本传输协议（HTTP）服务器进行基准测试的工具。它旨在使您对当前的Apache安装方式有一个印象。这尤其向您显示Apache安装每秒能够处理多少个请求。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="../images/down.gif"> <a href="#synopsis">概要</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#options">选件</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#output">输出量</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#bugs">虫子</a></li>
</ul><h3>也可以看看</h3><ul class="seealso"><li><code class="program"><a href="../programs/httpd.html">httpd</a></code></li></ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="synopsis" id="synopsis">概要</a></h2>
    <p><code><strong>ab</strong> [ -<strong>A</strong> <var>auth-username</var>:<var>password</var> ] [ -<strong>b</strong> <var>windowsize</var> ] [ -<strong>B</strong> <var>local-address</var> ] [ -<strong>c</strong> <var>concurrency</var> ] [ -<strong>C</strong> <var>cookie-name</var>=<var>value</var> ] [ -<strong>d</strong> ] [ -<strong>e</strong> <var>csv-file</var> ] [ -<strong>f</strong> <var>protocol</var> ] [ -<strong>g</strong> <var>gnuplot-file</var> ] [ -<strong>h</strong> ] [ -<strong>H</strong> <var>custom-header</var> ] [ -<strong>i</strong> ] [ -<strong>k</strong> ] [ -<strong>l</strong> ] [ -<strong>m</strong> <var>HTTP-method</var> ] [ -<strong>n</strong> <var>requests</var> ] [ -<strong>p</strong> <var>POST-file</var> ] [ -<strong>P</strong> <var>proxy-auth-username</var>:<var>password</var> ] [ -<strong>q</strong> ] [ -<strong>r</strong> ] [ -<strong>s</strong> <var>timeout</var> ] [ -<strong>S</strong> ] [ -<strong>t</strong> <var>timelimit</var> ] [ -<strong>T</strong> <var>content-type</var> ] [ -<strong>u</strong> <var>PUT-file</var> ] [ -<strong>v</strong> <var>verbosity</var>] [ -<strong>V</strong> ] [ -<strong>w</strong> ] [ -<strong>x</strong> <var><table>-attributes</var> ] [ -<strong>X</strong> <var>proxy</var>[:<var>port</var>] ] [ -<strong>y</strong> <var><tr>-attributes</var> ] [ -<strong>z</strong> <var><td>-attributes</var> ] [ -<strong>Z</strong> <var>ciphersuite</var> ] [http[s]://]<var>hostname</var>[:<var>port</var>]/<var>path</var></code></p>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="options" id="options">选件</a></h2>
    <dl>
    <dt><code>-A <var>auth-username</var>:<var>password</var></code></dt>
    <dd>向服务器提供BASIC身份验证凭据。用户名和密码用单个分隔<code>:</code>并以base64编码的形式发送。无论服务器是否需要该字符串，都将发送该字符串（ <em>即</em> ，已发送所需的401身份验证）。</dd>

    <dt><code>-b <var>windowsize</var></code></dt>
    <dd>TCP发送/接收缓冲区的大小，以字节为单位。</dd>

    <dt><code>-B <var>local-address</var></code></dt>
    <dd>建立传出连接时要绑定的地址。</dd>

    <dt><code>-c <var>concurrency</var></code></dt>
    <dd>一次执行的多个请求的数量。默认值为一次一个请求。</dd>

    <dt><code>-C <var>cookie-name</var>=<var>value</var></code></dt>
    <dd>添加一个<code>Cookie:</code>符合要求。该参数通常采用以下形式<code><var>name</var>=<var>value</var></code>对。该字段是可重复的。</dd>

    <dt><code>-d</code></dt>
    <dd>不要显示“ XX [ms]表中的投放百分比”。 （旧版支持）。</dd>

    <dt><code>-e <var>csv-file</var></code></dt>
    <dd>编写一个逗号分隔值（CSV）文件，其中包含为每个百分比（从1％到100％）提供该百分比请求所花费的时间（以毫秒为单位）。通常，它比“ gnuplot”文件有用。因为结果已经“装箱”了。</dd>

    <dt><code>-f <var>protocol</var></code></dt>
    <dd>指定SSL / TLS协议（SSL2，SSL3，TLS1，TLS1.1，TLS1.2或ALL）。TLS1.1和TLS1.2支持在2.4.4及更高版本中提供。</dd>

    <dt><code>-g <var>gnuplot-file</var></code></dt>
    <dd>将所有测量值写为“ gnuplot”或TSV（制表符单独值）文件。此文件可以轻松导入到Gnuplot，IDL，Mathematica，Igor甚至Excel等软件包中。标签位于文件的第一行。</dd>

    <dt><code>-h</code></dt>
    <dd>显示使用情况信息。</dd>

    <dt><code>-H <var>custom-header</var></code></dt>
    <dd>将额外的标头添加到请求。参数通常采用有效标题行的形式，其中包含以冒号分隔的字段/值对（ <em>即</em> ， <code>"Accept-Encoding: zip/zop;8bit"</code> ）。</dd>

    <dt><code>-i</code></dt>
    <dd>做<code>HEAD</code>请求而不是<code>GET</code> 。</dd>

    <dt><code>-k</code></dt>
    <dd>启用HTTP KeepAlive功能， <em>即</em>在一个HTTP会话中执行多个请求。默认为no KeepAlive。</dd>

    <dt><code>-l</code></dt>
    <dd>如果响应的长度不是恒定的，请不要报告错误。这对于动态页面很有用。在2.4.7及更高版本中可用。
    </dd>

    <dt><code>-m <var>HTTP-method</var></code></dt>
    <dd>请求的自定义HTTP方法。在2.4.10及更高版本中可用。</dd>

    <dt><code>-n <var>requests</var></code></dt>
    <dd>为基准测试会话执行的请求数。默认设置是仅执行一个请求，这通常会导致非代表性的基准测试结果。</dd>

    <dt><code>-p <var>POST-file</var></code></dt>
    <dd>包含要发布的数据的文件。记得还要设定<code>-T</code> 。</dd>

    <dt><code>-P <var>proxy-auth-username</var>:<var>password</var></code></dt>
    <dd>在代理途中提供BASIC身份验证凭据。用户名和密码用单个分隔<code>:</code>并以base64编码的形式发送。不管代理是否需要它都将发送该字符串（ <em>即</em> ，已发送所需的407代理身份验证）。</dd>

    <dt><code>-q</code></dt>
    <dd>处理超过150个请求时， <code>ab</code>输出进度计数<code>stderr</code>每10％或100个请求左右。的<code>-q</code>标志将禁止显示这些消息。</dd>

    <dt><code>-r</code></dt>
    <dd>不要退出套接字接收错误。</dd>

    <dt><code>-s <var>timeout</var></code></dt>
    <dd>套接字超时之前要等待的最大秒数。默认值为30秒。在2.4.4及更高版本中可用。</dd>

    <dt><code>-S</code></dt>
    <dd>当平均值和中位数相距标准偏差的一倍或两倍以上时，请勿显示中位数和标准偏差值，也不会显示警告/错误消息。并默认为最小值/平均值/最大值。 （旧版支持）。</dd>

    <dt><code>-t <var>timelimit</var></code></dt>
    <dd>用于基准测试的最大秒数。这意味着<code>-n 50000</code>内部。使用它在固定的总时间内对服务器进行基准测试。默认情况下没有时间限制。</dd>

    <dt><code>-T <var>content-type</var></code></dt>
    <dd>用于POST / PUT数据的内容类型标头，例如
    <code>application/x-www-form-urlencoded</code> 。默认为<code>text/plain</code> 。</dd>

    <dt><code>-u <var>PUT-file</var></code></dt>
    <dd>包含数据到PUT的文件。记得还要设定<code>-T</code> 。</dd>

    <dt><code>-v <var>verbosity</var></code></dt>
    <dd>设置详细程度- <code>4</code>及以上会在标题上显示信息， <code>3</code>及以上会显示响应代码（404、200等）， <code>2</code>及以上会打印警告和信息。</dd>

    <dt><code>-V</code></dt>
    <dd>显示版本号并退出。</dd>

    <dt><code>-w</code></dt>
    <dd>在HTML表格中打印出结果。默认表是两列宽，带有白色背景。</dd>

    <dt><code>-x <var><table>-attributes</var></code></dt>
    <dd>用作属性的字符串<code><table></code> 。插入属性<code><table <var>here</var> ></code> 。</dd>

    <dt><code>-X <var>proxy</var>[:<var>port</var>]</code></dt>
    <dd>使用代理服务器处理请求。</dd>

    <dt><code>-y <var><tr>-attributes</var></code></dt>
    <dd>用作属性的字符串<code><tr></code> 。</dd>

    <dt><code>-z <var><td>-attributes</var></code></dt>
    <dd>用作属性的字符串<code><td></code> 。</dd>

    <dt><code>-Z <var>ciphersuite</var></code></dt>
    <dd>指定SSL / TLS密码套件（请参阅openssl密码）</dd>
    </dl>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="output" id="output">输出量</a></h2>
    <p>以下列表描述了由返回的值<code>ab</code> ：</p>

    <dl>
        <dt>服务器软件</dt>
        <dd>该值（如果有）在<var>server</var>第一个成功响应的HTTP标头。这包括从头到点的标头中的所有字符，即检测到十进制值为32的字符（最值得注意的是：空格或CR / LF）。</dd>

        <dt>服务器主机名</dt>
        <dd>命令行中提供的DNS或IP地址</dd>

        <dt>服务器端口</dt>
        <dd>ab连接的端口。如果在命令行上未提供任何端口，则对于HTTP，默认为80；对于HTTP，默认为443。</dd>

        <dt>SSL / TLS协议</dt>
        <dd>客户端和服务器之间协商的协议参数。仅当使用SSL时才打印。</dd>

        <dt>文件路径</dt>
        <dd>从命令行字符串解析请求URI。</dd>

        <dt>文件长度</dt>
        <dd>这是第一个成功返回的文档的大小（以字节为单位）。如果在测试过程中文档长度发生变化，则将响应视为错误。</dd>

        <dt>并发级别</dt>
        <dd>测试期间使用的并发客户端数</dd>

        <dt>测试时间</dt>
        <dd>这是从创建第一个套接字连接到收到最后一个响应的时间。</dd>

        <dt>完成要求</dt>
        <dd>收到成功回复的数量</dd>

        <dt>请求失败</dt>
        <dd>被视为失败的请求数。如果该数字大于零，将打印另一行，显示由于连接，读取，内容长度不正确或异常而失败的请求数。</dd>

        <dt>写错误</dt>
        <dd>写入期间失败的错误数（管道断开）。</dd>

        <dt>非2xx回应</dt>
        <dd>不在200系列响应代码中的响应数。如果所有响应均为200，则不会打印此字段。</dd>

        <dt>保持活动请求</dt>
        <dd>导致保持活动请求的连接数</dd>

        <dt>寄件总数</dt>
        <dd>如果配置为在测试过程中发送数据，则这是测试期间发送的字节总数。如果测试未包含要发送的正文，则将忽略此字段。</dd>

        <dt>转让总额</dt>
        <dd>从服务器接收的字节总数。此数字本质上是通过网络发送的字节数。</dd>

        <dt>HTML已转移</dt>
        <dd>从服务器接收的文档字节总数。此数字不包括HTTP标头中接收的字节</dd>

        <dt>每秒请求</dt>
        <dd>这是每秒的请求数。该值是请求数除以总时间的结果</dd>

        <dt>每个请求的时间</dt>
        <dd>每个请求花费的平均时间。第一个值是用公式计算的<code>concurrency * timetaken * 1000 / done</code>而第二个值是用公式计算的<code>timetaken * 1000 / done</code></dd>

        <dt>传输速率</dt>
        <dd>由公式计算得出的转移率<code>totalread / 1024 / timetaken</code></dd>
    </dl>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="bugs" id="bugs">虫子</a></h2>
    <p>有各种固定长度的静态声明的缓冲区。结合命令行参数的延迟解析，服务器和其他外部输入的响应标头，这可能会给您带来麻烦。</p>

    <p>它没有完全实现HTTP / 1.x。仅接受某些“预期”形式的回复。相当繁重的使用<code>strstr(3)</code>显示在配置文件的顶部，这可能表示性能问题； <em>即</em> ，您将测量<code>ab</code>性能而不是服务器的性能。</p>
</div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>