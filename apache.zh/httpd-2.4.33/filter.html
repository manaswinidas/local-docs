<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>过滤器-Apache HTTP Server版本2.4</title>
<link href="./style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="./style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="./style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="./style/css/prettify.css">
<script src="./style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="./images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="./images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP Server</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="./index.html">版本2.4</a></div><div id="page-content"><div id="preamble"><h1>筛选器</h1>


    <p>本文档介绍了Apache中过滤器的用法。</p>
  </div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="./images/down.gif"> <a href="#intro">在Apache 2中过滤</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#smart">智能过滤</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#service">将筛选器作为HTTP服务公开</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#using">使用过滤器</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="intro" id="intro">在Apache 2中过滤</a></h2>
    
    <table class="related"><tbody><tr><th>相关模块</th><th>相关指令</th></tr><tr><td><ul><li><code class="module"><a href="./mod/mod_filter.html">mod_filter</a></code></li><li><code class="module"><a href="./mod/mod_deflate.html">mod_deflate</a></code></li><li><code class="module"><a href="./mod/mod_ext_filter.html">mod_ext_filter</a></code></li><li><code class="module"><a href="./mod/mod_include.html">mod_include</a></code></li><li><code class="module"><a href="./mod/mod_charset_lite.html">mod_charset_lite</a></code></li><li><code class="module"><a href="./mod/mod_reflector.html">mod_reflector</a></code></li><li><code class="module"><a href="./mod/mod_buffer.html">mod_buffer</a></code></li><li><code class="module"><a href="./mod/mod_data.html">mod_data</a></code></li><li><code class="module"><a href="./mod/mod_ratelimit.html">mod_ratelimit</a></code></li><li><code class="module"><a href="./mod/mod_reqtimeout.html">mod_reqtimeout</a></code></li><li><code class="module"><a href="./mod/mod_request.html">mod_request</a></code></li><li><code class="module"><a href="./mod/mod_sed.html">mod_sed</a></code></li><li><code class="module"><a href="./mod/mod_substitute.html">mod_substitute</a></code></li><li><code class="module"><a href="./mod/mod_xml2enc.html">mod_xml2enc</a></code></li><li><code class="module"><a href="./mod/mod_proxy_html.html">mod_proxy_html</a></code></li></ul></td><td><ul><li><code class="directive"><a href="./mod/mod_filter.html#filterchain">FilterChain</a></code></li><li><code class="directive"><a href="./mod/mod_filter.html#filterdeclare">FilterDeclare</a></code></li><li><code class="directive"><a href="./mod/mod_filter.html#filterprotocol">FilterProtocol</a></code></li><li><code class="directive"><a href="./mod/mod_filter.html#filterprovider">FilterProvider</a></code></li><li><code class="directive"><a href="./mod/mod_mime.html#addinputfilter">AddInputFilter</a></code></li><li><code class="directive"><a href="./mod/mod_mime.html#addoutputfilter">AddOutputFilter</a></code></li><li><code class="directive"><a href="./mod/mod_mime.html#removeinputfilter">RemoveInputFilter</a></code></li><li><code class="directive"><a href="./mod/mod_mime.html#removeoutputfilter">RemoveOutputFilter</a></code></li><li><code class="directive"><a href="./mod/mod_reflector.html#reflectorheader">ReflectorHeader</a></code></li><li><code class="directive"><a href="./mod/mod_ext_filter.html#extfilterdefine">ExtFilterDefine</a></code></li><li><code class="directive"><a href="./mod/mod_ext_filter.html#extfilteroptions">ExtFilterOptions</a></code></li><li><code class="directive"><a href="./mod/core.html#setinputfilter">SetInputFilter</a></code></li><li><code class="directive"><a href="./mod/core.html#setoutputfilter">SetOutputFilter</a></code></li></ul></td></tr></tbody></table>

<p>过滤器链在Apache 2.0及更高版本中可用，并且使应用程序能够以高度灵活和可配置的方式处理传入和传出的数据，而不管数据来自何处。我们可以随意处理传入数据，并进行后期处理。这基本上独立于传统的请求处理阶段。</p>
<p class="figure">
<img src="images/filter_arch.png" width="569" height="392" alt="过滤器可以在与请求处理正交的数据轴中链接">
</p>
<p>标准Apache发行版中的一些过滤示例如下：</p>
<ul>
<li><code class="module"><a href="./mod/mod_include.html">mod_include</a></code> ，实现服务器端包含。</li>
<li><code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code> ，实现SSL加密（https）。</li>
<li><code class="module"><a href="./mod/mod_deflate.html">mod_deflate</a></code> ，可即时执行压缩/解压缩。</li>
<li><code class="module"><a href="./mod/mod_charset_lite.html">mod_charset_lite</a></code> ，在不同字符集之间进行代码转换。</li>
<li><code class="module"><a href="./mod/mod_ext_filter.html">mod_ext_filter</a></code> ，将外部程序作为过滤器运行。</li>
</ul>
<p>Apache还内部使用了许多过滤器来执行诸如组块和字节范围处理之类的功能。</p>

<p>第三方过滤器模块可实现更广泛的应用，这些模块可从<a href="http://modules.apache.org/">modules.apache.org</a>和其他地方获得。其中一些是：</p>

<ul>
<li>HTML和XML处理和重写</li>
<li>XSLT转换和XIncludes</li>
<li>XML命名空间支持</li>
<li>HTML表单的文件上传处理和解码</li>
<li>图像处理</li>
<li>保护易受攻击的应用程序，例如PHP脚本</li>
<li>文本搜索和替换编辑</li>
</ul>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="smart" id="smart">智能过滤</a></h2>

<p class="figure">
<img src="images/mod_filter_new.png" width="423" height="331" alt="智能筛选根据请求处理的状态应用不同的筛选器提供程序">
</p>
<p><code class="module"><a href="./mod/mod_filter.html">mod_filter</a></code> ，包括在Apache 2.1和更高版本中，可在运行时动态配置过滤器链。因此，例如，您可以设置代理以使用HTML过滤器重写HTML，并使用完全独立的过滤器重写JPEG图像，尽管该代理没有有关原始服务器将发送的内容的事先信息。这通过使用筛选器工具来工作，该工具在运行时根据实际内容调度到不同的提供程序。任何过滤器都可以直接插入链中并无条件运行，也可以用作提供者并动态插入。例如，</p>
<ul>
<li>仅当内容为text / html或application / xhtml + xml时，HTML处理过滤器才会运行</li>
<li>仅当输入为可压缩类型且尚未压缩时，压缩过滤器才会运行</li>
<li>如果文本文档不在所需的字符集中，则将插入一个字符集转换过滤器</li>
</ul>
</div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="service" id="service">将筛选器作为HTTP服务公开</a></h2>


<p>过滤器除了用于处理来自服务器端的内容外，还可以用于处理来自客户端的内容<code class="module"><a href="./mod/mod_reflector.html">mod_reflector</a></code>模块。</p>

<p><code class="module"><a href="./mod/mod_reflector.html">mod_reflector</a></code>接受来自客户端的POST请求，并在响应中将POST请求中收到的内容请求主体反映回响应中，并在返回客户端的过程中通过输出筛选器堆栈。</p>

<p>此技术可以用作在应用程序服务器堆栈中运行的Web服务的替代方法，其中输出过滤器提供请求主体上所需的转换。例如， <code class="module"><a href="./mod/mod_deflate.html">mod_deflate</a></code>模块可能用于提供常规压缩服务，或者图像转换过滤器可能转换为图像转换服务。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="using" id="using">使用过滤器</a></h2>

<p>有两种使用过滤的方法：简单和动态。通常，您应该使用其中一个。混合它们会产生意想不到的结果（尽管简单的输入过滤可以与简单的或动态的输出过滤自由混合）。</p>
<p>简单方法是配置输入过滤器的唯一方法，对于需要静态过滤器链的输出过滤器就足够了。相关指令是<code class="directive"><a href="./mod/core.html#setinputfilter">SetInputFilter</a></code> ， <code class="directive"><a href="./mod/core.html#setoutputfilter">SetOutputFilter</a></code> ， <code class="directive"><a href="./mod/mod_mime.html#addinputfilter">AddInputFilter</a></code> ， <code class="directive"><a href="./mod/mod_mime.html#addoutputfilter">AddOutputFilter</a></code> ， <code class="directive"><a href="./mod/mod_mime.html#removeinputfilter">RemoveInputFilter</a></code>和<code class="directive"><a href="./mod/mod_mime.html#removeoutputfilter">RemoveOutputFilter</a></code> 。</p>

<p>动态方式可实现输出滤波器的静态和灵活，动态配置，如<code class="module"><a href="./mod/mod_filter.html">mod_filter</a></code>页。相关指令是<code class="directive"><a href="./mod/mod_filter.html#filterchain">FilterChain</a></code> ， <code class="directive"><a href="./mod/mod_filter.html#filterdeclare">FilterDeclare</a></code>和<code class="directive"><a href="./mod/mod_filter.html#filterprovider">FilterProvider</a></code> 。</p>

<p>另一指令<code class="directive"><a href="./mod/mod_filter.html#addoutputfilterbytype">AddOutputFilterByType</a></code>仍受支持，但已弃用。请改用动态配置。</p>

  </div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>