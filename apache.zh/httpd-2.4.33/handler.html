<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>Apache的处理程序使用-Apache HTTP Server版本2.4</title>
<link href="./style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="./style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="./style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="./style/css/prettify.css">
<script src="./style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="./images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="./images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP Server</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="./index.html">版本2.4</a></div><div id="page-content"><div id="preamble"><h1>Apache的处理程序使用</h1>


    <p>本文档描述了Apache处理程序的使用。</p>
  </div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="./images/down.gif"> <a href="#definition">什么是处理程序</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#examples">例子</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#programmer">程序员笔记</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="definition" id="definition">什么是处理程序</a></h2>
    
    <table class="related"><tbody><tr><th>相关模块</th><th>相关指令</th></tr><tr><td><ul><li><code class="module"><a href="./mod/mod_actions.html">mod_actions</a></code></li><li><code class="module"><a href="./mod/mod_asis.html">mod_asis</a></code></li><li><code class="module"><a href="./mod/mod_cgi.html">mod_cgi</a></code></li><li><code class="module"><a href="./mod/mod_imagemap.html">mod_imagemap</a></code></li><li><code class="module"><a href="./mod/mod_info.html">mod_info</a></code></li><li><code class="module"><a href="./mod/mod_mime.html">mod_mime</a></code></li><li><code class="module"><a href="./mod/mod_negotiation.html">mod_negotiation</a></code></li><li><code class="module"><a href="./mod/mod_status.html">mod_status</a></code></li></ul></td><td><ul><li><code class="directive"><a href="./mod/mod_actions.html#action">Action</a></code></li><li><code class="directive"><a href="./mod/mod_mime.html#addhandler">AddHandler</a></code></li><li><code class="directive"><a href="./mod/mod_mime.html#removehandler">RemoveHandler</a></code></li><li><code class="directive"><a href="./mod/core.html#sethandler">SetHandler</a></code></li></ul></td></tr></tbody></table>


    <p>“处理程序”是调用文件时要执行的动作的内部Apache表示形式。通常，文件具有基于文件类型的隐式处理程序。通常，所有文件仅由服务器提供服务，但是某些文件类型将单独“处理”。</p>

    <p>还可以基于文件扩展名或位置来显式配置处理程序，而与文件类型无关。这是有利的，这既因为它是一种更优雅的解决方案，又因为它还允许将类型<strong>和</strong>处理程序都与文件关联。（另请参见<a href="mod/mod_mime.html#multipleext">具有多个扩展名的文件</a> 。）</p>

    <p>处理程序可以内置在服务器中或包含在模块中，也可以与<code class="directive"><a href="./mod/mod_actions.html#action">Action</a></code>指示。标准发行版中的内置处理程序如下：</p>

    <ul>
      <li><strong>default-handler</strong> ：使用<code>default_handler()</code> ，这是默认情况下用于处理静态内容的处理程序。 （核心）</li>

      <li><strong>send-as-is</strong> ： <strong>按原样</strong>发送带有HTTP标头的文件。（ <code class="module"><a href="./mod/mod_asis.html">mod_asis</a></code> ）</li>

      <li><strong>cgi-script</strong> ：将文件视为CGI脚本。（ <code class="module"><a href="./mod/mod_cgi.html">mod_cgi</a></code> ）</li>

      <li><strong>imap-file</strong> ：解析为图像映射规则文件。（ <code class="module"><a href="./mod/mod_imagemap.html">mod_imagemap</a></code> ）</li>

      <li><strong>server-info</strong> ：获取服务器的配置信息。（ <code class="module"><a href="./mod/mod_info.html">mod_info</a></code> ）</li>

      <li><strong>server-status</strong> ：获取服务器的状态报告。（ <code class="module"><a href="./mod/mod_status.html">mod_status</a></code> ）</li>

      <li><strong>type-map</strong> ：解析为用于内容协商的类型映射文件。（ <code class="module"><a href="./mod/mod_negotiation.html">mod_negotiation</a></code> ）</li>
    </ul>
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="examples" id="examples">例子</a></h2>
    

    <h3><a name="example1" id="example1">使用CGI脚本修改静态内容</a></h3>
      

      <p>以下指令将导致对带有<code>html</code>扩展以触发<code>footer.pl</code> CGI脚本。</p>

      <pre class="prettyprint lang-config">Action add-footer /cgi-bin/footer.pl
AddHandler add-footer .html</pre>


      <p>然后，CGI脚本负责发送最初请求的文档（由<code>PATH_TRANSLATED</code>环境变量），并进行所需的修改或添加。</p>

    
    <h3><a name="example2" id="example2">具有HTTP标头的文件</a></h3>
      

      <p>以下指令将启用<code>send-as-is</code>处理程序，用于包含其自己的HTTP标头的文件。中的所有文件<code>/web/htdocs/asis/</code>目录将由<code>send-as-is</code>处理程序，无论其文件扩展名如何。</p>

      <pre class="prettyprint lang-config">&lt;Directory "/web/htdocs/asis"&gt;
    SetHandler send-as-is
&lt;/Directory&gt;</pre>


    
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="programmer" id="programmer">程序员笔记</a></h2>
    

    <p>为了实现处理程序功能，您可能希望使用<a href="developer/API.html">Apache API</a> 。具体来说，新记录已添加到<code>request_rec</code>结构体：</p>

    <pre class="prettyprint lang-c">char *handler</pre>


    <p>如果您希望模块与处理程序互动，则只需设置<code>r->handler</code>到处理程序名称之前的任何时间<code>invoke_handler</code>请求的阶段。处理程序的实现与以前一样，尽管使用了处理程序名称而不是内容类型。虽然没有必要，但是处理程序的命名约定是使用短划线分隔的单词（不带斜杠），以免侵害媒体类型名称空间。</p>
  </div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>