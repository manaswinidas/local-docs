<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>多处理模块（MPM）-Apache HTTP Server版本2.4</title>
<link href="./style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="./style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="./style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="./style/css/prettify.css">
<script src="./style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="./images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="./images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP Server</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="./index.html">版本2.4</a></div><div id="page-content"><div id="preamble"><h1>多处理模块（MPM）</h1>


<p>本文档描述了什么是多处理模块以及Apache HTTP Server如何使用它们。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="./images/down.gif"> <a href="#introduction">介绍</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#defaults">MPM默认值</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#static">将MPM构建为静态模块</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#dynamic">将MPM构建为DSO模块</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="introduction" id="introduction">介绍</a></h2>

    <p>Apache HTTP Server被设计为功能强大且灵活的Web服务器，可以在各种不同环境中的多种平台上工作。不同的平台和环境通常需要不同的功能，或者可能具有不同的方式来最有效地实现相同的功能。Apache httpd通过其模块化设计一直适应各种环境。通过这种设计，网站管理员可以通过选择在编译时或运行时加载哪些模块来选择服务器中将包含哪些功能。</p>

    <p>Apache HTTP Server 2.0将此模块化设计扩展到Web服务器的最基本功能。该服务器随附了多种选择的多处理模块（MPM），这些模块负责绑定到计算机上的网络端口，接受请求并调度子代来处理请求。</p>

    <p>将模块化设计扩展到服务器的这一级别有两个重要的好处：</p>

    <ul>
      <li>Apache httpd可以更干净，更有效地支持各种操作系统。尤其是Windows版本的服务器现在效率更高，因为<code class="module"><a href="./mod/mpm_winnt.html">mpm_winnt</a></code>可以使用本机联网功能代替Apache httpd 1.3中使用的POSIX层。此好处还扩展到了实现专用MPM的其他操作系统。</li>

      <li>可以针对特定站点的需求更好地定制服务器。例如，需要大量可伸缩性的站点可以选择使用线程MPM，例如<code class="module"><a href="./mod/worker.html">worker</a></code>要么<code class="module"><a href="./mod/event.html">event</a></code> ，而要求与旧版软件具有稳定性或兼容性的网站可以使用<code class="module"><a href="./mod/prefork.html">prefork</a></code> 。</li>
    </ul>

    <p>在用户级别，MPM看起来很像其他Apache httpd模块。主要区别在于，必须随时将一个MPM加载到服务器中。可用的MPM列表显示在<a href="mod/index.html">模块索引页面上</a> 。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="defaults" id="defaults">MPM默认值</a></h2>

<p>下表列出了各种操作系统的默认MPM。如果您在编译时没有其他选择，则将选择该MPM。</p>

<table class="bordered"><tbody><tr><td>网络软件</td><td><code class="module"><a href="./mod/mpm_netware.html">mpm_netware</a></code></td></tr>
<tr class="odd"><td>OS / 2</td><td><code class="module"><a href="./mod/mpmt_os2.html">mpmt_os2</a></code></td></tr>
<tr><td>Unix系统</td><td><code class="module"><a href="./mod/prefork.html">prefork</a></code> ， <code class="module"><a href="./mod/worker.html">worker</a></code> ， 要么<code class="module"><a href="./mod/event.html">event</a></code> ，取决于平台功能</td></tr>
<tr class="odd"><td>视窗</td><td><code class="module"><a href="./mod/mpm_winnt.html">mpm_winnt</a></code></td></tr>
</tbody></table>

<div class="note"><p>在这里，“ Unix”用于表示类似Unix的操作系统，例如Linux，BSD，Solaris，Mac OS X等。</p></div>

<p>对于Unix，关于安装哪个MPM的决定基于两个问题：</p>
<p>1。系统是否支持线程？</p>
<p>2。系统是否支持线程安全轮询（特别是kqueue和epoll函数）？</p>

<p>如果两个问题的答案均为“是”，则默认MPM为<code class="module"><a href="./mod/event.html">event</a></code> 。</p>

<p>如果＃1的答案为“是”，而＃2的答案为“否”，则默认值为<code class="module"><a href="./mod/worker.html">worker</a></code> 。</p>

<p>如果两个问题的答案均为“否”，则默认MPM为<code class="module"><a href="./mod/prefork.html">prefork</a></code> 。</p>

<p>实际上，这意味着默认值几乎总是<code class="module"><a href="./mod/event.html">event</a></code> ，因为所有现代操作系统都支持这两个功能。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="static" id="static">将MPM构建为静态模块</a></h2>

    <p>MPM可以在所有平台上构建为静态模块。在构建时选择一个MPM并将其链接到服务器。必须重新构建服务器才能更改MPM。</p>

    <p>要覆盖默认的MPM选项，请使用<code>--with-mpm=<em>NAME</em></code>的选项<code class="program"><a href="./programs/configure.html">configure</a></code>脚本。<em>NAME</em>是所需的MPM的名称。</p>

    <p>编译服务器后，可以通过使用以下命令确定选择了哪个MPM <code>./httpd -l</code> 。该命令将列出编译到服务器中的每个模块，包括MPM。</p>

</div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="dynamic" id="dynamic">将MPM构建为DSO模块</a></h2>

    <p>在Unix和类似平台上，MPM可以作为DSO模块构建并以与其他DSO模块相同的方式动态加载到服务器中。通过将MPM构建为DSO模块，可以通过更新MPM来更改MPM <code class="directive"><a href="./mod/mod_so.html#loadmodule">LoadModule</a></code> MPM指令，而不是通过重建服务器。</p>

    <pre class="prettyprint lang-config">LoadModule mpm_prefork_module modules/mod_mpm_prefork.so</pre>


    <p>试图<code class="directive"><a href="./mod/mod_so.html#loadmodule">LoadModule</a></code>一个以上的MPM会导致启动失败，并显示以下错误。</p>

    <div class="example"><p><code>AH00534: httpd: Configuration error: More than one MPM loaded.</code></p></div>

    <p>使用以下功能启用此功能<code>--enable-mpms-shared</code>的选项<code class="program"><a href="./programs/configure.html">configure</a></code>脚本。有论点<code><em>all</em></code> ，将安装该平台的所有可能的MPM。或者，可以将MPM列表指定为参数。</p>

    <p>默认的MPM，可以自动选择，也可以通过<code>--with-mpm</code>的选项<code class="program"><a href="./programs/configure.html">configure</a></code>脚本，将被加载到生成的服务器配置文件中。编辑<code class="directive"><a href="./mod/mod_so.html#loadmodule">LoadModule</a></code>指令以选择其他MPM。</p>

</div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>