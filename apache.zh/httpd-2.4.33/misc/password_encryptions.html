<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>密码格式-Apache HTTP Server版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP Server</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="../index.html">版本2.4</a> > <a href="./index.html">其他文档</a></div><div id="page-content"><div id="preamble"><h1>密码格式</h1>


    <p>关于Apache生成和理解的密码加密格式的说明。</p>
  </div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="../images/down.gif"> <a href="#basic">基本认证</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#digest">摘要式身份验证</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="basic" id="basic">基本认证</a></h2>

    <p>Apache可以识别基本身份验证密码的五种格式。请注意，并非所有格式都可在每个平台上使用：</p>

    <dl>
       <dt>加密</dt>
       <dd>“ $ 2y $” + crypt_blowfish算法的结果。有关算法的详细信息，请参见APR源文件<a href="http://svn.apache.org/viewvc/apr/apr/trunk/crypto/crypt_blowfish.c?view=markup">crypt_blowfish.c</a> 。</dd>

       <dt>MD5</dt>
       <dd>“ $ apr1 $” +使用特定于Apache的算法的结果，该算法使用对32位随机盐和密码的各种组合进行迭代（1000次）的MD5摘要。有关算法的详细信息，请参见APR源文件<a href="http://svn.apache.org/viewvc/apr/apr/trunk/crypto/apr_md5.c?view=markup">apr_md5.c</a> 。</dd>

       <dt>SHA1</dt>
       <dd>“ {SHA}” +密码的Base64编码的SHA-1摘要。不安全</dd>

       <dt>加密</dt>
       <dd>仅限于Unix。使用传统的Unix <code>crypt(3)</code>可使用随机生成的32位盐（仅使用12位）和密码的前8个字符来实现此功能。不安全</dd>

       <dt>纯文本（即<em>未加密的</em> ）</dt>
       <dd>仅Windows和Netware。不安全</dd>
    </dl>

    <h3>用htpasswd生成值</h3>

      <div class="example"><h3>加密</h3><p><code>$ htpasswd -nbB myName myPassword<br> myName:$2y$05$c4WoMPo3SXsafkva.HHa6uXQZWr7oboPiC2bT/r7q1BB8I2s0BRqC</code></p></div>

      <div class="example"><h3>MD5</h3><p><code>$ htpasswd -nbm myName myPassword<br> myName:$apr1$r31.....$HqJZimcKQFAMYayBlzkrA/</code></p></div>

      <div class="example"><h3>SHA1</h3><p><code>$ htpasswd -nbs myName myPassword<br> myName:{SHA}VBPuJHI7uixaa6LQGWx4s+5GKNE=</code></p></div>

      <div class="example"><h3>加密</h3><p><code>$ htpasswd -nbd myName myPassword<br> myName:rqXexS6ZhobKA</code></p></div>

    

    <h3>使用OpenSSL命令行程序生成CRYPT和MD5值</h3>
      

      <p>OpenSSL知道Apache特定的MD5算法。</p>

      <div class="example"><h3>MD5</h3><p><code>$ openssl passwd -apr1 myPassword<br> $apr1$qHDFfhPC$nITSVHgYbDAK1Y0acGRnY0</code></p></div>

      <div class="example"><h3>加密</h3><p><code>openssl passwd -crypt myPassword<br> qQ5vTYO3c8dsU</code></p></div>
    

    <h3>使用OpenSSL命令行程序验证CRYPT或MD5密码</h3>
      
      <p>CRYPT密码的盐是前两个字符（转换为二进制值）。验证<code>myPassword</code>反对<code>rqXexS6ZhobKA</code></p>

      <div class="example"><h3>加密</h3><p><code>$ openssl passwd -crypt -salt rq myPassword<br> Warning: truncating password to 8 characters<br> rqXexS6ZhobKA</code></p></div>

      <p>注意使用<code>myPasswo</code>代替<code>myPassword</code>因为只考虑了CRYPT密码的前8个字符，所以将产生相同的结果。</p>

      <p>MD5密码的盐介于<code>$apr1$</code>和以下<code>$</code> （作为Base64编码的二进制值-最多8个字符）。验证<code>myPassword</code>反对<code>$apr1$r31.....$HqJZimcKQFAMYayBlzkrA/</code></p>

      <div class="example"><h3>MD5</h3><p><code>$ openssl passwd -apr1 -salt r31..... myPassword<br> $apr1$r31.....$HqJZimcKQFAMYayBlzkrA/</code></p></div>
    

    <h3>mod_dbd的数据库密码字段</h3>
      <p>SHA1变体可能是DBD身份验证最有用的格式。由于SHA1和Base64功能是普遍可用的，因此其他软件可以使用Apache基本身份验证可以使用的加密密码来填充数据库。</p>

      <p>要创建各种语言的Apache SHA1变体基本身份验证密码：</p>

      <div class="example"><h3>的PHP</h3><p><code>'{SHA}' . base64_encode(sha1($password, TRUE))</code></p></div>

      <div class="example"><h3>爪哇</h3><p><code>"{SHA}" + new sun.misc.BASE64Encoder().encode(java.security.MessageDigest.getInstance("SHA1").digest(password.getBytes()))</code></p></div>

      <div class="example"><h3>冷融合</h3><p><code>"{SHA}" & ToBase64(BinaryDecode(Hash(password, "SHA1"), "Hex"))</code></p></div>

      <div class="example"><h3>红宝石</h3><p><code>require 'digest/sha1'<br> require 'base64'<br> '{SHA}' + Base64.encode64(Digest::SHA1.digest(password))</code></p></div>

      <div class="example"><h3>C或C ++</h3><p><code>Use the APR function: apr_sha1_base64</code></p></div>

      <div class="example"><h3>蟒蛇</h3><p><code>import base64<br> import hashlib<br> "{SHA}" + format(base64.b64encode(hashlib.sha1(password).digest()))</code></p></div>

      <div class="example"><h3>PostgreSQL（安装了contrib / pgcrypto函数）</h3><p><code>'{SHA}'||encode(digest(password,'sha1'),'base64')</code></p></div>
    

  </div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="digest" id="digest">摘要式身份验证</a></h2>
    <p>Apache识别摘要验证密码的一种格式-字符串的MD5哈希<code>user:realm:password</code>以32个字符的十六进制字符串表示。 <code>realm</code>是授权领域参数<code class="directive"><a href="../mod/mod_authn_core.html#authname">AuthName</a></code> httpd.conf中的指令。</p>

    <h3>mod_dbd的数据库密码字段</h3>

      <p>由于MD5功能是普遍可用的，因此其他软件可以使用Apache摘要认证可用的加密密码来填充数据库。</p>

      <p>要创建各种语言的Apache摘要身份验证密码：</p>

      <div class="example"><h3>的PHP</h3><p><code>md5($user . ':' . $realm . ':' .$password)</code></p></div>

      <div class="example"><h3>爪哇</h3><p><code>byte b[] = java.security.MessageDigest.getInstance("MD5").digest( (user + ":" + realm + ":" + password ).getBytes());<br> java.math.BigInteger bi = new java.math.BigInteger(1, b);<br> String s = bi.toString(16);<br> while (s.length() < 32)<br> <span class="indent"> s = "0" + s; </span> // String s is the encrypted password</code></p></div>

      <div class="example"><h3>冷融合</h3><p><code>LCase(Hash( (user & ":" & realm & ":" & password) , "MD5"))</code></p></div>

      <div class="example"><h3>红宝石</h3><p><code>require 'digest/md5'<br> Digest::MD5.hexdigest(user + ':' + realm + ':' + password)</code></p></div>

      <div class="example"><h3>PostgreSQL（安装了contrib / pgcrypto函数）</h3><p><code>encode(digest( user || ':' || realm || ':' || password , 'md5'), 'hex')</code></p></div>

    
  </div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>