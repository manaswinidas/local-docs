<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>Apache HTTP Server 2.4中的新功能概述-Apache HTTP Server版本2.4</title>
<link href="./style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="./style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="./style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="./style/css/prettify.css">
<script src="./style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="./images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="./images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP Server</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="./index.html">版本2.4</a></div><div id="page-content"><div id="preamble"><h1>Apache HTTP Server 2.4中的新功能概述</h1>


  <p>本文档描述了Apache HTTP Server 2.2和2.4版本之间的一些主要更改。有关自2.0版以来的新功能，请参阅<a href="new_features_2_2.html">2.2新功能</a>文档。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="./images/down.gif"> <a href="#core">核心增强</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#newmods">新模块</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#module">模块增强</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#programs">程序增强</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#documentation">文献资料</a></li>
<li><img alt="" src="./images/down.gif"> <a href="#developer">模块开发人员变更</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="core" id="core">核心增强</a></h2>
    
    <dl>
      <dt>运行时可加载的MPM</dt>
      <dd>现在可以在编译时将多个MPM <a href="mpm.html#dynamic">构建为可加载模块</a> 。可以在运行时通过以下方式配置所选的MPM： <code class="directive"><a href="./mod/mod_so.html#loadmodule">LoadModule</a></code>指示。</dd>

      <dt>活动MPM</dt>
      <dd><a href="mod/event.html">事件MPM</a>不再是实验性的，但现在完全受支持。</dd>

      <dt>异步支持</dt>
      <dd>更好地支持异步读/写，以支持MPM和平台。</dd>

      <dt>每个模块和每个目录的LogLevel配置</dt>
      <dd>的<code class="directive"><a href="./mod/core.html#loglevel">LogLevel</a></code>现在可以按模块和目录进行配置。新关卡<code>trace1</code>至<code>trace8</code>已添加到上方<code>debug</code>日志级别。</dd>

      <dt>每个请求的配置部分</dt>
      <dd><code class="directive"><a href="./mod/core.html#if"><If></a></code> ， <code class="directive"><a href="./mod/core.html#elseif"><ElseIf></a></code>和<code class="directive"><a href="./mod/core.html#else"><Else></a></code>部分可用于根据每个请求标准设置配置。</dd>

      <dt>通用表达式解析器</dt>
      <dd>一个新的表达式分析器允许指定<a href="expr.html">复合物的条件</a>在像指示使用共同的语法<code class="directive"><a href="./mod/mod_setenvif.html#setenvifexpr">SetEnvIfExpr</a></code> ， <code class="directive"><a href="./mod/mod_rewrite.html#rewritecond">RewriteCond</a></code> ， <code class="directive"><a href="./mod/mod_headers.html#header">Header</a></code> ， <code class="directive"><a href="./mod/core.html#if"><If></a></code> ， 和别的。
      </dd>

      <dt>KeepAliveTimeout（以毫秒为单位）</dt>
      <dd>现在可以指定<code class="directive"><a href="./mod/core.html#keepalivetimeout">KeepAliveTimeout</a></code>以毫秒为单位。
      </dd>

      <dt>NameVirtualHost指令</dt>
      <dd>不再需要，现在已弃用。</dd>

      <dt>覆盖配置</dt>
      <dd>新的<code class="directive"><a href="./mod/core.html#allowoverridelist">AllowOverrideList</a></code>指令允许更细粒度的控制，其中允许使用哪些指令<code>.htaccess</code>文件。</dd>

      <dt>配置文件变量</dt>
      <dd>现在可以<code class="directive"><a href="./mod/core.html#define">Define</a></code>配置中的变量，如果在配置中的许多地方使用相同的值，则可以更清楚地表示。
      </dd>

      <dt>减少内存使用</dt>
      <dd>尽管有许多新功能，但2.4.x往往比2.2.x使用更少的内存。</dd>

    </dl>
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="newmods" id="newmods">新模块</a></h2>
    
    <dl>
      <dt><code class="module"><a href="./mod/mod_proxy_fcgi.html">mod_proxy_fcgi</a></code></dt>
      <dd>的FastCGI协议后端<code class="module"><a href="./mod/mod_proxy.html">mod_proxy</a></code></dd>

      <dt><code class="module"><a href="./mod/mod_proxy_scgi.html">mod_proxy_scgi</a></code></dt>
      <dd>的SCGI协议后端<code class="module"><a href="./mod/mod_proxy.html">mod_proxy</a></code></dd>

      <dt><code class="module"><a href="./mod/mod_proxy_express.html">mod_proxy_express</a></code></dt>
      <dd>提供动态配置的质量反向代理<code class="module"><a href="./mod/mod_proxy.html">mod_proxy</a></code></dd>

      <dt><code class="module"><a href="./mod/mod_remoteip.html">mod_remoteip</a></code></dt>
      <dd>使用代理或负载均衡器通过请求标头提供的IP地址列表替换请求的明显的客户端远程IP地址和请求的主机名。</dd>

      <dt><code class="module"><a href="./mod/mod_heartmonitor.html">mod_heartmonitor</a></code> ，<code class="module"><a href="./mod/mod_lbmethod_heartbeat.html">mod_lbmethod_heartbeat</a></code></dt>
      <dd>允许<code class="module"><a href="./mod/mod_proxy_balancer.html">mod_proxy_balancer</a></code>根据后端服务器上活动连接的数量来决定负载平衡。</dd>

      <dt><code class="module"><a href="./mod/mod_proxy_html.html">mod_proxy_html</a></code></dt>
      <dd>它以前是第三方模块，它支持在反向代理情况下修复HTML链接，在这种情况下，后端生成的URL对代理的客户端无效。</dd>

      <dt><code class="module"><a href="./mod/mod_sed.html">mod_sed</a></code></dt>
      <dd>的高级替代<code class="module"><a href="./mod/mod_substitute.html">mod_substitute</a></code> ，允许使用sed的全部功能编辑响应正文。</dd>

      <dt><code class="module"><a href="./mod/mod_auth_form.html">mod_auth_form</a></code></dt>
      <dd>启用基于表单的身份验证。</dd>

      <dt><code class="module"><a href="./mod/mod_session.html">mod_session</a></code></dt>
      <dd>使用cookie或数据库存储为客户端启用会话状态使用。</dd>

      <dt><code class="module"><a href="./mod/mod_allowmethods.html">mod_allowmethods</a></code></dt>
      <dd>新模块可限制某些HTTP方法，而不会干扰身份验证或授权。</dd>

      <dt><code class="module"><a href="./mod/mod_lua.html">mod_lua</a></code></dt>
      <dd>嵌入<a href="http://www.lua.org/">的Lua</a>语言到httpd配置和小型企业的逻辑功能。（实验性）</dd>

      <dt><code class="module"><a href="./mod/mod_log_debug.html">mod_log_debug</a></code></dt>
      <dd>允许在请求处理的不同阶段添加可自定义的调试日志记录。</dd>

      <dt><code class="module"><a href="./mod/mod_buffer.html">mod_buffer</a></code></dt>
      <dd>提供缓冲输入和输出滤波器堆栈</dd>

      <dt><code class="module"><a href="./mod/mod_data.html">mod_data</a></code></dt>
      <dd>将响应主体转换为RFC2397数据URL</dd>

      <dt><code class="module"><a href="./mod/mod_ratelimit.html">mod_ratelimit</a></code></dt>
      <dd>为客户端提供带宽速率限制</dd>

      <dt><code class="module"><a href="./mod/mod_request.html">mod_request</a></code></dt>
      <dd>提供过滤器以处理并提供HTTP请求正文</dd>

      <dt><code class="module"><a href="./mod/mod_reflector.html">mod_reflector</a></code></dt>
      <dd>通过输出过滤器堆栈将请求主体的反射作为响应提供。</dd>

      <dt><code class="module"><a href="./mod/mod_slotmem_shm.html">mod_slotmem_shm</a></code></dt>
      <dd>提供基于插槽的共享内存提供程序（例如记分板）。</dd>

      <dt><code class="module"><a href="./mod/mod_xml2enc.html">mod_xml2enc</a></code></dt>
      <dd>它以前是第三方模块，它支持基于libxml2（可识别标记）的过滤器模块中的国际化。</dd>

      <dt><code class="module"><a href="./mod/mod_macro.html">mod_macro</a></code> （自2.4.5开始可用）</dt>
      <dd>在配置文件中提供宏。</dd>

      <dt><code class="module"><a href="./mod/mod_proxy_wstunnel.html">mod_proxy_wstunnel</a></code> （自2.4.5开始可用）</dt>
      <dd>支持网络套接字隧道。</dd>

      <dt><code class="module"><a href="./mod/mod_authnz_fcgi.html">mod_authnz_fcgi</a></code> （自2.4.10起可用）</dt>
      <dd>启用FastCGI授权者应用程序以认证和/或授权客户端。</dd>

      <dt><code class="module"><a href="./mod/mod_http2.html">mod_http2</a></code> （自2.4.17开始可用）</dt>
      <dd>支持HTTP / 2传输层。</dd>

      <dt><code class="module"><a href="./mod/mod_proxy_hcheck.html">mod_proxy_hcheck</a></code> （自2.4.21开始可用）</dt>
      <dd>支持对远程代理后端服务器进行独立的动态运行状况检查。</dd>

    </dl>
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="module" id="module">模块增强</a></h2>
    
    <dl>
      <dt><code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code></dt>

      <dd><code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code>现在可以配置为使用OCSP服务器检查客户端证书的验证状态。默认响应者是可配置的，还可以决定是否更喜欢客户端证书本身中指定的响应者。</dd>

      <dd><code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code>现在，它还支持OCSP装订，即服务器主动获取其证书的OCSP验证，并在握手期间将其传输给客户端。</dd>

      <dd><code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code>现在可以配置为通过memcached在服务器之间共享SSL会话数据</dd>

      <dd>除了RSA和DSA，现在还支持EC密钥。</dd>

      <dd>支持TLS-SRP（在2.4.4及更高版本中可用）。</dd>

      <dt><code class="module"><a href="./mod/mod_proxy.html">mod_proxy</a></code></dt>

      <dd>的<code class="directive"><a href="./mod/mod_proxy.html#proxypass">ProxyPass</a></code>指令现在已在<code class="directive"><a href="./mod/core.html#location">Location</a></code>要么<code class="directive"><a href="./mod/core.html#locationmatch">LocationMatch</a></code>块，并且在大量使用时比传统的两参数语法具有明显的性能优势。</dd>
      <dd>现在可以配置用于代理请求的源地址。</dd>
      <dd>支持到后端的Unix域套接字（在2.4.7和更高版本中可用）。</dd>

      <dt><code class="module"><a href="./mod/mod_proxy_balancer.html">mod_proxy_balancer</a></code></dt>

      <dd>通过balancer-manager对BalancerMembers进行更多的运行时配置更改</dd>

      <dd>可以在运行时通过balancer-manager添加其他BalancerMembers</dd>

      <dd>平衡器参数子集的运行时配置</dd>

      <dd>可以将BalancerMembers设置为“ Drain”，以便它们仅对现有的粘性会话做出响应，从而使它们可以优雅地脱机。</dd>

      <dd>重新启动后，平衡器设置可以保持不变。</dd>

      <dt><code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code></dt>

      <dd>的<code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code>可以选择将CACHE过滤器插入过滤器链中的给定点以对缓存进行精细控制。
      </dd>

      <dd><code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code>现在可以缓存HEAD请求。</dd>

      <dd>在可能的情况， <code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code>现在可以按目录而不是按服务器设置指令。</dd>

      <dd>可以自定义缓存URL的基本URL，以便缓存集群可以共享相同的端点URL前缀。</dd>

      <dd><code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code>现在可以在后端不可用时提供过时的缓存数据（错误5xx）。</dd>

      <dd><code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code>现在可以将HIT / MISS / REVALIDATE插入X-Cache标头中。</dd>

      <dt><code class="module"><a href="./mod/mod_include.html">mod_include</a></code></dt>
      <dd>支持'include'元素内的'onerror'属性，允许将错误文档提供给错误文档，而不是默认错误字符串。</dd>

      <dt><code class="module"><a href="./mod/mod_cgi.html">mod_cgi</a></code> ， <code class="module"><a href="./mod/mod_include.html">mod_include</a></code> ， <code class="module"><a href="./mod/mod_isapi.html">mod_isapi</a></code> ，...</dt>
      <dd>将标头转换为环境变量比以前更加严格，以通过标头注入减轻某些可能的跨站点脚本攻击。现在，包含无效字符（包括下划线）的标头将被静默删除。<a href="env.html">Apache中的环境变量</a>对如何解决需要此类标头的损坏的旧版客户端提供了一些指导。（这会影响所有使用这些环境变量的模块。）</dd>

      <dt><code class="module"><a href="./mod/mod_authz_core.html">mod_authz_core</a></code>授权逻辑容器</dt>

      <dd>现在可以使用<code class="directive"><a href="./mod/mod_authz_core.html#require">Require</a></code>指令和相关的容器指令，例如<code class="directive"><a href="./mod/mod_authz_core.html#requireall"><RequireAll></a></code> 。</dd>

      <dt><code class="module"><a href="./mod/mod_rewrite.html">mod_rewrite</a></code></dt>
      <dd><code class="module"><a href="./mod/mod_rewrite.html">mod_rewrite</a></code>添加<code>[QSD]</code> （查询字符串舍弃）和<code>[END]</code>标志<code class="directive"><a href="./mod/mod_rewrite.html#rewriterule">RewriteRule</a></code>简化常见的重写方案。</dd>
      <dd>增加了在中使用复杂的布尔表达式的可能性<code class="directive"><a href="./mod/mod_rewrite.html#rewritecond">RewriteCond</a></code> 。</dd>
      <dd>允许将SQL查询用作<code class="directive"><a href="./mod/mod_rewrite.html#rewritemap">RewriteMap</a></code>功能。</dd>

      <dt><code class="module"><a href="./mod/mod_ldap.html">mod_ldap</a></code> ，<code class="module"><a href="./mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code></dt>
      <dd><code class="module"><a href="./mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>增加了对嵌套组的支持。</dd>
      <dd><code class="module"><a href="./mod/mod_ldap.html">mod_ldap</a></code>添加<code class="directive"><a href="./mod/mod_ldap.html#ldapconnectionpoolttl">LDAPConnectionPoolTTL</a></code> ， <code class="directive"><a href="./mod/mod_ldap.html#ldaptimeout">LDAPTimeout</a></code> ，以及对超时处理的其他改进。这对于有状态防火墙断开与LDAP服务器的空闲连接的设置特别有用。</dd>
      <dd><code class="module"><a href="./mod/mod_ldap.html">mod_ldap</a></code>添加<code class="directive"><a href="./mod/mod_ldap.html#ldaplibrarydebug">LDAPLibraryDebug</a></code>记录使用的LDAP工具包提供的调试信息。</dd>

      <dt><code class="module"><a href="./mod/mod_info.html">mod_info</a></code></dt>
      <dd><code class="module"><a href="./mod/mod_info.html">mod_info</a></code>现在可以在服务器启动期间将预解析的配置转储到stdout。</dd>

      <dt><code class="module"><a href="./mod/mod_auth_basic.html">mod_auth_basic</a></code></dt>
      <dd>伪造基本身份验证的新通用机制（在2.4.5和更高版本中可用）。</dd>

    </dl>
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="programs" id="programs">程序增强</a></h2>
    
    <dl>
        <dt><code class="program"><a href="./programs/fcgistarter.html">fcgistarter</a></code></dt>
        <dd>新的FastCGI守护程序启动器实用程序</dd>

        <dt><code class="program"><a href="./programs/htcacheclean.html">htcacheclean</a></code></dt>
        <dd>现在可以列出当前缓存的URL，包括可选的元数据。</dd>
        <dd>允许从缓存中显式删除单个缓存的URL。</dd>
        <dd>现在可以将文件大小四舍五入到给定的块大小，从而使大小限制更接近于磁盘上的实际大小。</dd>
        <dd>缓存大小现在可以由索引节点的数量来限制，而不是由磁盘上文件的大小来限制或附加。</dd>

        <dt><code class="program"><a href="./programs/rotatelogs.html">rotatelogs</a></code></dt>
        <dd>现在可以创建指向当前日志文件的链接。</dd>
        <dd>现在可以调用自定义的旋转后脚本。</dd>

        <dt><code class="program"><a href="./programs/htpasswd.html">htpasswd</a></code> ，<code class="program"><a href="./programs/htdbm.html">htdbm</a></code></dt>
        <dd>支持bcrypt算法（在2.4.4及更高版本中可用）。
        </dd>
    </dl>
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="documentation" id="documentation">文献资料</a></h2>
    
    <dl>
        <dt>mod_rewrite</dt>
        <dd>的<code class="module"><a href="./mod/mod_rewrite.html">mod_rewrite</a></code>重新整理了文档，几乎完全重写了文档，重点放在示例和常用用法上，并向您展示了其他解决方案更合适的时间。现在，“ <a href="rewrite/index.html">重写指南”</a>是顶级部分，其中包含更多详细信息和更好的组织。</dd>

        <dt>mod_ssl</dt>
        <dd>的<code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code>除了以前对技术细节的关注之外，文档的功能也得到了极大的增强，在入门级提供了更多示例。</dd>

        <dt>缓存指南</dt>
        <dd><a href="caching.html">缓存指南</a>已被重写，以正确地区分由RFC2616提供的RFC2616 HTTP / 1.1缓存功能。 <code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code> ，以及<a href="socache.html">socache</a>接口提供的通用键/值缓存，以及涵盖诸如<code class="module"><a href="./mod/mod_file_cache.html">mod_file_cache</a></code> 。</dd>

    </dl>
  </div><div class="top"><a href="#page-header"><img alt="最佳" src="./images/up.gif"></a></div>
<div class="section">
<h2><a name="developer" id="developer">模块开发人员变更</a></h2>
    
    <dl>
      <dt>检查配置挂钩已添加</dt>

      <dd>一个新的钩子<code>check_config</code> ，已添加，在<code>pre_config</code>和<code>open_logs</code>钩子。它也可以在<code>test_config</code>钩当<code>-t</code>选项传递给<code class="program"><a href="./programs/httpd.html">httpd</a></code> 。的<code>check_config</code>钩子允许模块查看相互依赖的配置指令值，并在消息仍可以记录到控制台的同时对其进行调整。因此，可以在核心之前向用户发出有关配置错误的警报。 <code>open_logs</code>挂钩函数将控制台输出重定向到错误日志。</dd>

      <dt>表达式解析器已添加</dt>

      <dd>现在，我们有了一个通用的表达式解析器，其API在<var>ap_expr.h</var> 。改编自先前在中实现的表达式解析器<code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code> 。</dd>

      <dt>授权逻辑容器</dt>

      <dd>授权模块现在通过ap_register_auth_provider（）注册为提供程序，以支持高级授权逻辑，例如<code class="directive"><a href="./mod/mod_authz_core.html#requireall"><RequireAll></a></code> 。</dd>

      <dt>小对象缓存接口</dt>

      <dd>的<var>ap_socache.h</var>标头公开了一个基于提供程序的接口，用于缓存小数据对象，该接口基于的先前实现<code class="module"><a href="./mod/mod_ssl.html">mod_ssl</a></code>会话缓存。当前支持使用共享内存循环缓冲区，基于磁盘的dbm文件和memcache分布式缓存的提供程序。</dd>

      <dt>缓存状态挂钩已添加</dt>

      <dd>的<code class="module"><a href="./mod/mod_cache.html">mod_cache</a></code>模块现在包括一个新的<code>cache_status</code>挂钩，在知道缓存决策时调用。提供了一个默认实现，其中添加了一个可选<code>X-Cache</code>和<code>X-Cache-Detail</code>响应的标头。</dd>
    </dl>

    <p>开发人员文档包含<a href="developer/new_api_2_4.html">API更改</a>的<a href="developer/new_api_2_4.html">详细列表</a> 。</p>
  </div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="./mod/index.html">模块</a> | <a href="./mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="./glossary.html">词汇表</a> | <a href="./sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>