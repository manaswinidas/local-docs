<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<title>自2.2以来Apache HTTP Server 2.4中的API更改-Apache HTTP Server版本2.4</title>
<link href="../style/css/manual-zip.css" rel="stylesheet" type="text/css" title="Main stylesheet" media="all">
<link href="../style/css/manual-zip-100pc.css" rel="alternate stylesheet" type="text/css" title="No Sidebar - Default font size" media="all">
<link href="../style/css/manual-print.css" rel="stylesheet" type="text/css" media="print"><link rel="stylesheet" type="text/css" href="../style/css/prettify.css">
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>
</head>
<body id="manual-page" ><div id="page-header">
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p>
<p class="apache">Apache HTTP服务器版本2.4</p>
<img alt="" src="../images/feather.png"></div>
<div class="up"><a href="./index.html"><img title="<-" alt="<-" src="../images/left.gif"></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> > <a href="http://httpd.apache.org/">HTTP Server</a> > <a href="http://httpd.apache.org/docs/">文档</a> > <a href="../index.html">版本2.4</a></div><div id="page-content"><div id="preamble"><h1>从2.2开始的Apache HTTP Server 2.4中的API更改</h1>


  <p>本文档介绍了Apache HTTPD API从2.2版到2.4版的更改，这些更改可能是模块/应用程序开发人员和核心黑客所感兴趣的。从2.4分支的第一个GA版本开始，API的兼容性在2.4分支的生命期内一直保留。（2.4版的<a href="http://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x/VERSIONING">VERSIONING</a>说明提供了有关API兼容性的更多信息。）</p>

  <p>API更改分为两类：全新的API和已扩展或更改的现有API。后者又分为所有更改都向后兼容（因此现有模块可以忽略它们）和那些可能需要维护人员注意的更改。与从HTTPD 2.0到2.2的过渡一样，现有的模块和应用程序将需要重新编译，并且可能需要引起注意，但是大多数模块和应用程序都不需要进行任何实质性的更新（尽管某些组件和应用程序可以利用API的更改来提供显着的改进）。</p>
  <p>就本文档而言，API是根据公共头文件拆分的。这些标头本身就是参考文档，可用于生成具有以下内容的可浏览HTML参考： <code>make docs</code> 。</p>
</div>
<div id="quickview"><a href="https://www.apache.org/foundation/contributing.html" class="badge"><img src="https://www.apache.org/images/SupportApache-small.png" alt="支持Apache！"></a><ul id="toc"><li><img alt="" src="../images/down.gif"> <a href="#api_changes">更改的API</a></li>
<li><img alt="" src="../images/down.gif"> <a href="#upgrading">有关从2.2升级模块的特定信息</a></li>
</ul></div>
<div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="api_changes" id="api_changes">更改的API</a></h2>
  

  <h3><a name="ap_expr" id="ap_expr">ap_expr（新！）</a></h3>
    
    <p>引入了一种新的API，用于解析和评估布尔表达式和代数表达式，包括提供标准语法和自定义变体。</p>
  

  <h3><a name="ap_listen" id="ap_listen">ap_listen（已更改；向后兼容）</a></h3>
    
    <p>引入了一个新的API，以使httpd子进程能够满足不同的目的。</p>
  

  <h3><a name="ap_mpm" id="ap_mpm">ap_mpm（已更改）</a></h3>
    
  <p><code>ap_mpm_run</code>被新的<code>mpm</code>钩。也<code>ap_graceful_stop_signalled</code>迷路了<code>ap_mpm_register_timed_callback</code>是新的。</p>
  

  <h3><a name="ap_regex" id="ap_regex">ap_regex（已更改）</a></h3>
    
  <p>除了现有的regexp包装器之外，新的更高级别的API <code>ap_rxplus</code>现在提供。这提供了编译Perl样式的表达式的能力，例如<code>s/regexp/replacement/flags</code>并针对任意字符串执行它们。还添加了对正则表达式反向引用的支持。</p>
  

  <h3><a name="ap_slotmem" id="ap_slotmem">ap_slotmem（新！）</a></h3>
    
    <p>为模块分配和管理内存插槽（最常见的是共享内存）引入API。</p>
  

  <h3><a name="ap_socache" id="ap_socache">ap_socache（新！）</a></h3>
    
    <p>用于管理共享对象缓存的API。</p>
  

  <h3><a name="heartbeat" id="heartbeat">心跳（新！）</a></h3>
    
    <p>心跳模块的通用结构</p>
  

  <h3><a name="ap_parse_htaccess" id="ap_parse_htaccess">ap_parse_htaccess（已更改）</a></h3>
    
    <p>的功能签名<code>ap_parse_htaccess</code>已经变了。一种<code>apr_table_t</code>现在必须传递允许替代的单个指令（保留替代）。</p>
  

  <h3><a name="http_config" id="http_config">http_config（已更改）</a></h3>
    
    <ul>
      <li>介绍每个模块，每个目录的日志级别，包括宏包装程序。</li>
      <li>新<code>AP_DECLARE_MODULE</code>宏来声明所有模块。</li>
      <li>新<code>APLOG_USE_MODULE</code>多文件模块中每个模块日志级别所必需的宏。</li>
      <li>新的API可在模块卸载/加载过程中保留数据</li>
      <li>新<code>check_config</code>钩</li>
      <li>新<code>ap_process_fnmatch_configs()</code>处理通配符的功能</li>
      <li>更改<code>ap_configfile_t</code> ， <code>ap_cfg_getline()</code> ， <code>ap_cfg_getc()</code>返回错误代码，并添加<code>ap_pcfg_strerror()</code>用于检索错误描述。</li> 
      <li>现在，ACCESS_CONF上下文中允许的任何配置指令都必须正确处理通过新的.htaccess文件中的调用<code class="directive"><a href="../mod/core.html#allowoverridelist">AllowOverrideList</a></code>指示。ap_check_cmd_context（）接受新的标志NOT_IN_HTACCESS来检测这种情况。</li>
    </ul>
  

  <h3><a name="http_core" id="http_core">http_core（已更改）</a></h3>
    
    <ul>
      <li>已删除<code>ap_default_type</code> ， <code>ap_requires</code> ，所有2.2 authnz API</li>
      <li>介绍用于logio和authnz的可选功能</li>
      <li>新功能<code>ap_get_server_name_for_url</code>支持IPv6文字。</li>
      <li>新功能<code>ap_register_errorlog_handler</code>注册错误日志格式字符串处理程序。</li>
      <li>的论点<code>error_log</code>挂钩已更改。声明已移至<code>http_core.h</code> 。</li>
      <li>新功能<code>ap_state_query</code>确定服务器是否处于初始配置预检阶段。与在过程池中创建池用户数据条目的旧方法相比，这既易于使用，又更正确。</li>
      <li>新功能<code>ap_get_conn_socket</code>获取连接的套接字描述符。应该使用它代替直接访问核心连接配置。</li>
    </ul>
  

  <h3><a name="httpd" id="httpd">httpd（已更改）</a></h3>
    
    <ul>
      <li>介绍每个目录，每个模块的日志级别</li>
      <li>新的日志级别<code>APLOG_TRACEn</code></li>
      <li>介绍请求和连接的错误日志ID</li>
      <li>支持mod_request keep_body</li>
      <li>支持为异步请求缓冲过滤器数据</li>
      <li>新<code>CONN_STATE</code>价值观</li>
      <li>功能变更： <code>ap_escape_html</code>更新; <code>ap_unescape_all</code> ，<code>ap_escape_path_segment_buffer</code></li>
      <li>加载其他模块的模块晚于<code>EXEC_ON_READ</code>配置阅读阶段需要调用<code>ap_reserve_module_slots()</code>要么<code>ap_reserve_module_slots_directive()</code>在他们<code>pre_config hook</code> 。</li>
      <li>现在可以独立于连接的客户端IP地址来跟踪每个请求的useragent IP地址，以支持使用负载均衡器进行的部署。</li>
    </ul>
  

  <h3><a name="http_log" id="http_log">http_log（已更改）</a></h3>
    
    <ul>
      <li>介绍每个目录，每个模块的日志级别</li>
      <li>新的日志级别<code>APLOG_TRACEn</code></li>
      <li><code>ap_log_*error</code>成为宏包装（如果向后兼容，则向后兼容<code>APLOG_MARK</code>使用了宏，除了不再可以使用<code>#ifdef</code>在参数列表中）</li>
      <li>管道测井改造</li>
      <li><code>module_index</code>添加到error_log钩子</li>
      <li>新功能：<code>ap_log_command_line</code></li>
    </ul>
  

  <h3><a name="http_request" id="http_request">http_request（已更改）</a></h3>
    
    <ul>
      <li>新的auth_internal API和auth_provider API</li>
      <li>新<code>EOR</code>铲斗类型</li>
      <li>新功能<code>ap_process_async_request</code></li>
      <li>新标志<code>AP_AUTH_INTERNAL_PER_CONF</code>和<code>AP_AUTH_INTERNAL_PER_URI</code></li>
      <li>新<code>access_checker_ex</code>钩子以应用其他访问控制和/或绕过身份验证。</li>
      <li>新功能<code>ap_hook_check_access_ex</code> ， <code>ap_hook_check_access</code> ， <code>ap_hook_check_authn</code> ， <code>ap_hook_check_authz</code>哪个接受<code>AP_AUTH_INTERNAL_PER_*</code>标志</li>
      <li>不建议直接使用<code>ap_hook_access_checker</code> ， <code>access_checker_ex</code> ， <code>ap_hook_check_user_id</code> ，<code>ap_hook_auth_checker</code></li>
    </ul>
    <p>尽可能使用以下方法注册所有访问控制挂钩（包括身份验证和授权挂钩） <code>AP_AUTH_INTERNAL_PER_CONF</code>被推荐。如果所有模块的访问控制挂钩都使用此标志注册，则每当服务器处理与初始请求匹配同一访问控制配置指令集的内部子请求时（这是常见的情况），都可以避免调用访问控制钩另一个时间。</p>
    <p>如果您的模块要求使用旧的行为，并且必须使用与初始请求不同的URI对每个子请求执行访问控制检查，即使该URI匹配同一组访问控制配置指令，也请使用<code>AP_AUTH_INTERNAL_PER_URI</code> 。</p>
  

  <h3><a name="mod_auth" id="mod_auth">mod_auth（新！）</a></h3>
    
    <p>介绍用于authn和authz的新提供程序框架</p>
  

  <h3><a name="mod_cache" id="mod_cache">mod_cache（已更改）</a></h3>
    
    <p>介绍了<code>commit_entity()</code>函数提供给缓存提供程序接口，允许原子写入缓存。添加一个<code>cache_status()</code>钩报告缓存决定。所有私有结构和功能均被删除。</p>
  

  <h3><a name="mod_core" id="mod_core">mod_core（新！）</a></h3>
    
    <p>这引入了低级API来发送任意标头，并公开了用于处理HTTP OPTIONS和TRACE的函数。</p>
  

  <h3><a name="mod_cache_disk" id="mod_cache_disk">mod_cache_disk（已更改）</a></h3>
    
    <p>更改磁盘缓存的磁盘格式以支持原子缓存更新而不进行锁定。主体文件的设备/节点对嵌入在头文件中，从而允许确认头和主体属于彼此。</p>
  

  <h3><a name="mod_disk_cache" id="mod_disk_cache">mod_disk_cache（重命名）</a></h3>
    
    <p>为了与服务器中其他模块的命名保持一致，已将mod_disk_cache模块重命名为mod_cache_disk。</p>
  

  <h3><a name="mod_request" id="mod_request">mod_request（新！）</a></h3>
    
    <p>的API <code class="module"><a href="../mod/mod_request.html">mod_request</a></code> ，以便在需要时使输入数据可用于多个应用程序/处理程序模块，并解析HTML表单数据。</p>
  

  <h3><a name="mpm_common" id="mpm_common">mpm_common（已更改）</a></h3>
    
    <ul>
      <li>删除： <code>accept</code> ， <code>lockfile</code> ， <code>lock_mech</code> ， <code>set_scoreboard</code> （锁定使用新的ap_mutex API）</li>
      <li>放弃特权的新API（将与平台相关的功能委托给模块）</li>
      <li>新挂钩： <code>mpm_query</code> ， <code>timed_callback</code>和<code>get_name</code></li>
      <li>更改的接口： <code>monitor</code>钩， <code>ap_reclaim_child_processes</code> ，<code>ap_relieve_child_processes</code></li>
    </ul>
  

  <h3><a name="scoreboard" id="scoreboard">计分板（已更改）</a></h3>
    
    <p><code>ap_get_scoreboard_worker</code>引入了向后兼容版本后，该版本不向后兼容。额外的proxy_balancer支持。儿童状态的东西进行了修改。</p>
  

  <h3><a name="util_cookies" id="util_cookies">util_cookies（新！）</a></h3>
    
    <p>引入了用于管理HTTP Cookies的新API。</p>
  

  <h3><a name="util_ldap" id="util_ldap">util_ldap（已更改）</a></h3>
    
    <p><em>没有可用的描述</em></p>
  

  <h3><a name="util_mutex" id="util_mutex">util_mutex（新！）</a></h3>
    
    <p>httpd中APR proc和全局互斥的包装，为底层机制和锁定文件位置提供通用配置。</p>
  

  <h3><a name="util_script" id="util_script">util_script（已更改）</a></h3>
    
    <p>新：<code>ap_args_to_table</code></p>
  

  <h3><a name="util_time" id="util_time">util_time（已更改）</a></h3>
    
    <p>新：<code>ap_recent_ctime_ex</code></p>
  

</div><div class="top"><a href="#page-header"><img alt="最佳" src="../images/up.gif"></a></div>
<div class="section">
<h2><a name="upgrading" id="upgrading">有关从2.2升级模块的特定信息</a></h2>
  

  <h3><a name="upgrading_logging" id="upgrading_logging">记录中</a></h3>
    
    <p>为了利用每个模块的日志级别配置，任何调用<code>ap_log_*</code>函数应该声明它属于哪个模块。如果模块的module_struct被调用<code>foo_module</code> ，以下代码可用于保持与HTTPD 2.0和2.2的向后兼容性：</p>
    <div class="example"><p><code>#include <http_log.h><br> <br> #ifdef APLOG_USE_MODULE<br> APLOG_USE_MODULE(foo);<br> #endif</code></p></div>
    <p>注意：这对于C ++语言模块是绝对必需的。可以跳过C语言模块，尽管这样会破坏没有该模块的文件的特定于日志级别的支持。</p>
    <p>参数个数<code>ap_log_*</code>功能和定义<code>APLOG_MARK</code>已经改变。通常，更改是完全透明的。但是，如果模块使用<code>APLOG_MARK</code>作为其自身功能或模块调用的参数<code>ap_log_*</code>没有通过<code>APLOG_MARK</code> 。一个使用包装器的模块<code>ap_log_*</code>通常使用这两种构造。</p>

    <p>更改传递代码的最简单方法<code>APLOG_MARK</code>它自己的功能是定义和使用一个不同的宏，该宏扩展为这些功能所需的参数，例如<code>APLOG_MARK</code>仅在呼叫时使用<code>ap_log_*</code>直。这样，代码将保持与HTTPD 2.0和2.2的兼容性。</p>

    <p>调用哪个代码<code>ap_log_*</code>没有通过<code>APLOG_MARK</code> 2.4和早期版本之间必然有所不同，因为2.4需要新的第三个参数， <code>APLOG_MODULE_INDEX</code> 。</p>

    <div class="example"><p><code>/* code for httpd 2.0/2.2 */<br> ap_log_perror(file, line, APLOG_ERR, 0, p, "Failed to allocate dynamic lock structure");<br> <br> /* code for httpd 2.4 */<br> ap_log_perror(file, line, APLOG_MODULE_INDEX, APLOG_ERR, 0, p, "Failed to allocate dynamic lock structure");<br> <br></code></p></div>

    <p><code>ap_log_*error</code>现在实现为宏。这意味着不再可以使用<code>#ifdef</code>在参数列表中<code>ap_log_*error</code> ，因为这会导致根据C99的不确定行为。</p>

    <p>一种<code>server_rec</code>指针必须传递给<code>ap_log_error()</code>启动后调用时。这样做总是合适的，但是对于<code>NULL</code><code>server_rec</code>在2.4中比以前的版本中。从2.3.12开始，全局变量<code>ap_server_conf</code>可以始终用作<code>server_rec</code>参数，因为它将是<code>NULL</code>仅在有效通过时<code>NULL</code>至<code>ap_log_error()</code> 。<code>ap_server_conf</code>仅在更合适的时候使用<code>server_rec</code>不可用。</p>

    <p>考虑以下更改以利用新功能<code>APLOG_TRACE1..8</code>日志级别：</p>
       <ul>
         <li>检查当前使用<code>APLOG_DEBUG</code>考虑一下其中之一<code>APLOG_TRACEn</code>级别更合适。</li>
         <li>如果您的模块当前具有用于配置要执行的调试日志记录数量的机制，请考虑消除该机制并依靠使用不同的<code>APLOG_TRACEn</code>水平。如果根据配置的日志级别需要绕开昂贵的跟踪处理，请使用<code>APLOGtrace<em>n</em></code>和<code>APLOGrtrace<em>n</em></code>首先检查是否启用了跟踪的宏。</li>
       </ul>

    <p>模块有时会在其日志消息中添加进程ID和/或线程ID。现在，默认情况下会记录这些ID，因此模块可能无需显式记录它们。（用户可以将它们从错误日志格式中删除，但是如果需要进行问题诊断，可以指示他们将其重新添加。）</p>
  

  <h3><a name="upgrading_byfunction" id="upgrading_byfunction">如果您的模块使用这些现有的API ...</a></h3>
    

    <dl>
      <dt><code>ap_default_type()</code></dt>
      <dd>不再可用； Content-Type必须显式配置或由应用程序添加。</dd>

      <dt><code>ap_get_server_name()</code></dt>
      <dd>如果在URL中使用了返回的服务器名称，请使用<code>ap_get_server_name_for_url()</code>代替。此新功能处理服务器名称是IPv6文字地址的奇怪情况。</dd>

      <dt><code>ap_get_server_version()</code></dt>
      <dd>为了进行记录，在需要详细信息的情况下，请使用<code>ap_get_server_description()</code> 。生成输出时，应由ServerTokens配置信息量，请使用<code>ap_get_server_banner()</code> 。</dd>

      <dt><code>ap_graceful_stop_signalled()</code></dt>
      <dd>替换为对<code>ap_mpm_query(AP_MPMQ_MPM_STATE)</code>并检查状态<code>AP_MPMQ_STOPPING</code> 。</dd>

      <dt><code>ap_max_daemons_limit</code> ， <code>ap_my_generation</code>和<code>ap_threads_per_child</code></dt>
      <dd>使用<code>ap_mpm_query()</code>查询代码<code>AP_MPMQ_MAX_DAEMON_USED</code> ， <code>AP_MPMQ_GENERATION</code>和<code>AP_MPMQ_MAX_THREADS</code> ， 分别。</dd>

      <dt><code>ap_mpm_query()</code></dt>
      <dd>确保在完成注册钩之后才使用它。否则，作为DSO构建的MPM将没有机会启用对此功能的支持。</dd>

      <dt><code>ap_requires()</code></dt>
      <dd>现在，核心服务器为处理提供了更好的基础架构<code class="directive"><a href="../mod/mod_authz_core.html#require">Require</a></code>组态。使用以下命令为每个受支持实体注册身份验证提供程序功能<code>ap_register_auth_provider()</code> 。该函数将在必要时被调用<code class="directive">Require</code>处理。（有关详细示例，请咨询捆绑的模块。）</dd>

      <dt><code>ap_server_conf->process->pool</code>用户数据</dt>
      <dd>可选的：<ul>
          <li>如果您的模块使用它来确定正在运行哪个启动挂钩，请使用<code>ap_state_query(AP_SQ_MAIN_STATE)</code> 。</li>
          <li>如果您的模块使用它来维护模块卸载和重新加载期间的数据，请使用<code>ap_retained_data_create()</code>和<code>ap_retained_data_get()</code> 。</li>
        </ul>
      </dd>

      <dt><code>apr_global_mutex_create()</code> ，<code>apr_proc_mutex_create()</code></dt>
      <dd>可选：请参阅<code>ap_mutex_register()</code> ， <code>ap_global_mutex_create()</code>和<code>ap_proc_mutex_create()</code> ;这些使您的互斥锁可以与<code class="directive"><a href="../mod/core.html#mutex">Mutex</a></code>指示;您还可以在模块中删除此类互斥锁的任何配置机制</dd>

      <dt><code>CORE_PRIVATE</code></dt>
      <dd>现在这是不必要的，可以忽略。</dd>

      <dt><code>dav_new_error()</code>和<code>dav_new_error_tag()</code></dt>
      <dd>以前，这些假设<code>errno</code>包含描述故障的信息。现在， <code>apr_status_t</code>必须提供参数。如果没有此类错误信息或有效，则传递0 / APR_SUCCESS <code>apr_status_t</code>否则价值。</dd>

      <dt><code>mpm_default.h</code> ， <code>DEFAULT_LOCKFILE</code> ， <code>DEFAULT_THREAD_LIMIT</code> ， <code>DEFAULT_PIDLOG</code>等</dt>
      <dd>头文件和其中设置的大多数默认配置值不再对模块可见。（大多数仍可以在构建时被覆盖。）<code>DEFAULT_PIDLOG</code>和<code>DEFAULT_REL_RUNTIMEDIR</code>现在可以通过以下方式普遍使用<code>ap_config.h</code> 。</dd>

      <dt><code>unixd_config</code></dt>
      <dd>该名称已重命名为ap_unixd_config。</dd>

      <dt><code>unixd_setup_child()</code></dt>
      <dd>该名称已重命名为ap_unixd_setup_child（），但大多数调用者应调用添加的ap_run_drop_privileges（）挂钩。</dd>

      <dt><code>conn_rec->remote_ip</code>和<code>conn_rec->remote_addr</code></dt>
      <dd>这些字段已重命名，以便区分连接的客户端IP地址和请求的用户代理IP地址（可能被负载平衡器或代理覆盖）。必须使用适合于模块的以下选项之一来更新对这些字段之一的引用：<ul>
        <li>当您需要用户代理的IP地址时，该IP地址可能直接连接到服务器，或者可以选择通过透明的负载均衡器或代理与服务器分开，请使用<code>request_rec->useragent_ip</code>和<code>request_rec->useragent_addr</code> 。</li>
        <li>当您需要直接连接到服务器的客户端的IP地址（可能是用户代理，也可能是负载平衡器或代理本身）时，请使用<code>conn_rec->client_ip</code>和<code>conn_rec->client_addr</code> 。</li>
      </ul>
      </dd>
    </dl>
  

  <h3><a name="upgrading_byfeature" id="upgrading_byfeature">如果您的模块与此功能接口...</a></h3>
    
    <dl>
      <dt>suEXEC</dt>
      <dd>可选：如果您的模块在以下情况下记录错误： <code>ap_unixd_config.suexec_enabled</code>为0，同时记录新字段的值<code>suexec_disabled_reason</code> ，其中包含为何不可用的说明。</dd>

      <dt>计分板上的扩展状态数据</dt>
      <dd>在以前的版本中， <code>ExtendedStatus</code>必须设置为<code>On</code> ，而这又需要加载mod_status。在2.4中，只需设置<code>ap_extended_status</code>至<code>1</code>在预配置挂钩中，扩展状态数据将可用。</dd>
    </dl>
  

  <h3><a name="upgrading_newfeatures" id="upgrading_newfeatures">你的模块...</a></h3>
    
    <dl>
    <dt>解析查询参数</dt>
    <dd>考虑是否<code>ap_args_to_table()</code>会有所帮助。</dd>

    <dt>解析表单数据...</dt>
    <dd>使用<code>ap_parse_form_data()</code> 。</dd>

    <dt>检查请求标头字段<code>Content-Length</code>和<code>Transfer-Encoding</code>看看是否指定了身体</dt>
    <dd>使用<code>ap_request_has_body()</code> 。</dd>

    <dt>实现清除指针变量的清理</dt>
    <dd>使用<code>ap_pool_cleanup_set_null()</code> 。</dd>

    <dt>创建运行时文件，例如共享内存文件，PID文件等。</dt>
    <dd>使用<code>ap_runtime_dir_relative()</code>这样就可以通过<code>DEFAULT_REL_RUNTIMEDIR</code>编译设置或<code class="directive"><a href="../mod/core.html#defaultruntimedir">DefaultRuntimeDir</a></code>指令，将受到尊重。<em>Apache httpd 2.4.2及更高版本。</em></dd>

    </dl>
  

</div></div>
<div id="footer">
<p class="apache">版权所有2018 The Apache Software Foundation。<br>根据<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可，版本2.0许可</a> 。</p>
<p class="menu"><a href="../mod/index.html">模块</a> | <a href="../mod/directives.html">指令</a> | <a href="http://wiki.apache.org/httpd/FAQ">常见问题</a> | <a href="../glossary.html">词汇表</a> | <a href="../sitemap.html">网站地图</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>

</body></html>