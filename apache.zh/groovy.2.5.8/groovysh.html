<html lang="zh-Hans" ><head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Groovysh，Groovy外壳</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="asset?aid=0">
</head>
<body class="book toc2 toc-left" >
<div id="header">
<h1>Groovysh，Groovy外壳</h1>
<div class="details">
<span id="revnumber">版本2.5.8</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_groovy_groovy_shell">1。Groovy：Groovy Shell</a>
<ul class="sectlevel2">
<li><a href="#GroovyShell-Features">1.1。特征</a></li>
<li><a href="#GroovyShell-Command-lineOptionsandArguments">1.2。命令行选项和参数</a></li>
<li><a href="#GroovyShell-EvaluatingExpressions">1.3。计算表达式</a>
<ul class="sectlevel3">
<li><a href="#GroovyShell-SimpleExpressions">1.3.1。简单表达</a></li>
<li><a href="#GroovyShell-EvaluationResult">1.3.2。评价结果</a></li>
<li><a href="#GroovyShell-Multi-lineExpressions">1.3.3。多行表达式</a>
<ul class="sectlevel4">
<li><a href="#GroovyShell-DefineaClass">定义一个类</a></li>
<li><a href="#GroovyShell-UsetheClass">使用课程</a></li>
</ul>
</li>
<li><a href="#GroovyShell-Variables">1.3.4。变数</a></li>
<li><a href="#GroovyShell-Functions">1.3.5。功能</a></li>
</ul>
</li>
<li><a href="#GroovyShell-Commands">1.4。指令</a>
<ul class="sectlevel3">
<li><a href="#GroovyShell-RecognizedCommands">1.4.1。公认的命令</a>
<ul class="sectlevel4">
<li><a href="#GroovyShell-help"><code>help</code></a></li>
<li><a href="#GroovyShell-exit"><code>exit</code></a></li>
<li><a href="#GroovyShell-import"><code>import</code></a></li>
<li><a href="#GroovyShell-grab"><code>grab</code></a></li>
<li><a href="#GroovyShell-display"><code>display</code></a></li>
<li><a href="#GroovyShell-clear"><code>clear</code></a></li>
<li><a href="#GroovyShell-show"><code>show</code></a></li>
<li><a href="#GroovyShell-inspect"><code>inspect</code></a></li>
<li><a href="#GroovyShell-purge"><code>purge</code></a></li>
<li><a href="#GroovyShell-edit"><code>edit</code></a></li>
<li><a href="#GroovyShell-load"><code>load</code></a></li>
<li><a href="#GroovyShell-save"><code>save</code></a></li>
<li><a href="#GroovyShell-record"><code>record</code></a></li>
<li><a href="#GroovyShell-history"><code>history</code></a></li>
<li><a href="#GroovyShell-alias"><code>alias</code></a></li>
<li><a href="#GroovyShell-doc"><code>doc</code></a></li>
<li><a href="#GroovyShell-set"><code>set</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#GroovyShell-Preferences">1.5。优先</a>
<ul class="sectlevel3">
<li><a href="#GroovyShell-RecognizedPreferences">1.5.1。公认的偏好</a>
<ul class="sectlevel4">
<li><a href="#GroovyShell-InterpreterMode"><code>interpreterMode</code></a></li>
<li><a href="#GroovyShell-verbosity"><code>verbosity</code></a></li>
<li><a href="#_code_colors_code"><code>colors</code></a></li>
<li><a href="#GroovyShell-show-last-result"><code>show-last-result</code></a></li>
<li><a href="#GroovyShell-sanitize-stack-trace"><code>sanitize-stack-trace</code></a></li>
<li><a href="#GroovyShell-editor"><code>editor</code></a></li>
</ul>
</li>
<li><a href="#GroovyShell-SettingaPreference">1.5.2。设定偏好</a></li>
<li><a href="#GroovyShell-ListingPreferences">1.5.3。列表首选项</a></li>
<li><a href="#GroovyShell-ClearingPreferencesieResettingtoDefaults">1.5.4。清除首选项（即重置为默认值）</a></li>
</ul>
</li>
<li><a href="#GroovyShell-UserProfileScriptsandState">1.6。用户配置文件脚本和状态</a>
<ul class="sectlevel3">
<li><a href="#GroovyShell-ProfileScripts">1.6.1。配置文件脚本</a>
<ul class="sectlevel4">
<li><a href="#GroovyShell-HOMEgroovygroovyshprofile"><code>$HOME/.groovy/groovysh.profile</code></a></li>
<li><a href="#GroovyShell-HOMEgroovygroovyshrc"><code>$HOME/.groovy/groovysh.rc</code></a></li>
</ul>
</li>
<li><a href="#GroovyShell-State">1.6.2。州</a>
<ul class="sectlevel4">
<li><a href="#GroovyShell-HOMEgroovygroovyshhistory"><code>$HOME/.groovy/groovysh.history</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#GroovyShell-register">1.7。自定义命令</a></li>
<li><a href="#GroovyShell-Troubleshooting">1.8。故障排除</a>
<ul class="sectlevel3">
<li><a href="#GroovyShell-PlatformProblems">1.8.1。平台问题</a>
<ul class="sectlevel4">
<li><a href="#GroovyShell-ProblemsloadingtheJLineDLL">加载JLine DLL时出现问题</a></li>
<li><a href="#GroovyShell-ProblemswithCygwinonWindows">Windows上的Cygwin问题</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#GroovyShell-GMavenPlus">2。GMavenPlus Maven插件</a></li>
<li><a href="#GroovyShell-GradleGroovyshPlugin">3。Gradle Groovysh插件</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_groovy_groovy_shell"><a class="anchor" href="#_groovy_groovy_shell"></a> 1。Groovy：Groovy Shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy Shell，又名。 <code>groovysh</code>是一个命令行应用程序，可轻松访问以评估Groovy表达式，定义类并运行简单的实验。</p>
</div>
<div class="sect2">
<h3 id="GroovyShell-Features"><a class="anchor" href="#GroovyShell-Features"></a> 1.1。特征</h3>
<div class="ulist">
<ul>
<li>
<p>不需要<code>go</code>命令执行缓冲区。</p>
</li>
<li>
<p>多亏了<a href="https://github.com/jline/jline2">JLine2</a> ，丰富的跨平台编辑行编辑，历史记录和完成。</p>
</li>
<li>
<p>ANSI颜色（提示，异常痕迹等）。</p>
</li>
<li>
<p>简单但功能强大的命令系统，具有在线帮助，用户别名支持等。</p>
</li>
<li>
<p>用户个人资料支持</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-Command-lineOptionsandArguments"><a class="anchor" href="#GroovyShell-Command-lineOptionsandArguments"></a> 1.2。命令行选项和参数</h3>
<div class="paragraph">
<p>该外壳程序支持几个选项来控制详细程度，ANSI着色和其他功能。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">./bin/groovysh --help

Usage: groovysh [options] [...]
The Groovy Shell, aka groovysh, is a command-line application which allows easy
access to evaluate Groovy expressions, define classes and run simple
experiments.
  -C, --color[=&lt;FLAG&gt;]    Enable or disable use of ANSI colors
      -cp, -classpath, --classpath
                          Specify where to find the class files - must be first
                            argument
  -d, --debug             Enable debug output
  -D, --define=&lt;name=value&gt;
                          Define a system property
  -e, --evaluate=&lt;CODE&gt;   Evaluate the code first when starting interactive session
  -h, --help              Display this help message
  -pa, --parameters       Generate metadata for reflection on method parameter names
                            (jdk8+ only)
  -pr, --enable-preview          Enable preview Java features (JEP 12) (jdk12+ only)
  -q, --quiet             Suppress superfluous output
  -T, --terminal=&lt;TYPE&gt;   Specify the terminal TYPE to use
  -v, --verbose           Enable verbose output
  -V, --version           Display the version</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-EvaluatingExpressions"><a class="anchor" href="#GroovyShell-EvaluatingExpressions"></a> 1.3。计算表达式</h3>
<div class="sect3">
<h4 id="GroovyShell-SimpleExpressions"><a class="anchor" href="#GroovyShell-SimpleExpressions"></a> 1.3.1。简单表达</h4>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">println "Hello"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-EvaluationResult"><a class="anchor" href="#GroovyShell-EvaluationResult"></a> 1.3.2。评价结果</h4>
<div class="paragraph">
<p>找到完整的表达式后，将对其进行编译和评估。评估结果存储在_变量中。</p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-Multi-lineExpressions"><a class="anchor" href="#GroovyShell-Multi-lineExpressions"></a> 1.3.3。多行表达式</h4>
<div class="paragraph">
<p>多行/复杂表达式（如闭包或类定义）可以在几行上定义。当外壳程序检测到它具有完整的表达式时，它将对其进行编译和评估。</p>
</div>
<div class="sect4">
<h5 id="GroovyShell-DefineaClass"><a class="anchor" href="#GroovyShell-DefineaClass"></a>定义一个类</h5>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class Foo {
    def bar() {
        println "baz"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-UsetheClass"><a class="anchor" href="#GroovyShell-UsetheClass"></a>使用课程</h5>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">foo = new Foo()
foo.bar()</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-Variables"><a class="anchor" href="#GroovyShell-Variables"></a> 1.3.4。变数</h4>
<div class="paragraph">
<p>shell变量<strong>都是</strong>无类型（即无<code>def</code>或其他类型信息）。</p>
</div>
<div class="paragraph">
<p>这<strong>将</strong>设置一个shell变量：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">foo = "bar"</code></pre>
</div>
</div>
<div class="paragraph">
<p>但是，这将计算局部变量，并且<strong>不会</strong>保存到外壳程序的环境中：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def foo = "bar"</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以通过激活<a href="#GroovyShell-InterpreterMode">解释器模式</a>来更改此行为。</p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-Functions"><a class="anchor" href="#GroovyShell-Functions"></a> 1.3.5。功能</h4>
<div class="paragraph">
<p>可以在外壳中定义函数，并将其保存以备后用。</p>
</div>
<div class="paragraph">
<p>定义功能很容易：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">groovy:000&gt; def hello(name) {
groovy:001&gt; println("Hello $name")
groovy:002&gt; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后使用它就像人们可能期望的那样：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">hello("Jason")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Shell在内部创建一个用于封装函数的闭包，然后将闭包绑定到变量。因此，变量和函数共享相同的名称空间。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-Commands"><a class="anchor" href="#GroovyShell-Commands"></a> 1.4。指令</h3>
<div class="paragraph">
<p>外壳程序具有许多不同的命令，它们提供了对外壳程序环境的丰富访问。</p>
</div>
<div class="paragraph">
<p>所有命令都有一个<em>名称</em>和一个<em>快捷方式</em> （类似于<code>\h</code> ）。命令还可以具有一些预定义的系统<em>别名</em> 。用户也可以创建自己的别名。</p>
</div>
<div class="sect3">
<h4 id="GroovyShell-RecognizedCommands"><a class="anchor" href="#GroovyShell-RecognizedCommands"></a> 1.4.1。公认的命令</h4>
<div class="sect4">
<h5 id="GroovyShell-help"><a class="anchor" href="#GroovyShell-help"></a><code>help</code></h5>
<div class="paragraph">
<p>显示命令列表（和别名）或特定命令的帮助文本。</p>
</div>
<div id="GroovyShell-TheCommandList" class="paragraph">
<p>命令清单</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :help

For information about Groovy, visit:
    http://groovy-lang.org

Available commands:
  :help      (:h ) Display this help message
  ?          (:? ) Alias to: :help
  :exit      (:x ) Exit the shell
  :quit      (:q ) Alias to: :exit
  import     (:i ) Import a class into the namespace
  :display   (:d ) Display the current buffer
  :clear     (:c ) Clear the buffer and reset the prompt counter
  :show      (:S ) Show variables, classes or imports
  :inspect   (:n ) Inspect a variable or the last result with the GUI object browser
  :purge     (:p ) Purge variables, classes, imports or preferences
  :edit      (:e ) Edit the current buffer
  :load      (:l ) Load a file or URL into the buffer
  .          (:. ) Alias to: :load
  :save      (:s ) Save the current buffer to a file
  :record    (:r ) Record the current session to a file
  :history   (:H ) Display, manage and recall edit-line history
  :alias     (:a ) Create an alias
  :set       (:= ) Set (or list) preferences
  :grab      (:g ) Add a dependency to the shell environment
  :register  (:rc) Register a new command with the shell
  :doc       (:D ) Open a browser window displaying the doc for the argument

For help on a specific command type:
    :help &lt;command&gt;</pre>
</div>
</div>
<div id="GroovyShell-HelpforaCommand" class="paragraph">
<p>命令帮助</p>
</div>
<div class="paragraph">
<p>在交互式外壳中，您可以为任何命令寻求帮助，以获取有关其语法或功能的更多详细信息。这是当您寻求帮助时会发生什么的示例<code>help</code>命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :help :help

usage: :help [&lt;command&gt;]

Display the list of commands or the help text for &lt;command&gt;.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-exit"><a class="anchor" href="#GroovyShell-exit"></a><code>exit</code></h5>
<div class="paragraph">
<p>退出外壳。</p>
</div>
<div class="paragraph">
<p>这是退出外壳的<strong>唯一</strong>方法。好吧，你仍然可以<code>CTRL-C</code> ，但Shell会抱怨JVM异常关闭。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-import"><a class="anchor" href="#GroovyShell-import"></a><code>import</code></h5>
<div class="paragraph">
<p>添加一个自定义导入，该导入将包含在所有外壳评估中。</p>
</div>
<div class="paragraph">
<p>可以随时发出此命令以添加新的导入。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-grab"><a class="anchor" href="#GroovyShell-grab"></a><code>grab</code></h5>
<div class="paragraph">
<p>从Internet来源或缓存中获取一个依赖项（Maven，Ivy等），并将其添加到Groovy Shell环境中。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :grab 'com.google.guava:guava:19.0'
groovy:000&gt; import com.google.common.collect.BiMap
===&gt; com.google.common.collect.BiMap</pre>
</div>
</div>
<div class="paragraph">
<p>可以随时给出此命令以添加新的依赖项。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-display"><a class="anchor" href="#GroovyShell-display"></a><code>display</code></h5>
<div class="paragraph">
<p>显示当前缓冲区的内容。</p>
</div>
<div class="paragraph">
<p>这仅显示不完整表达式的缓冲区。表达式完成后，缓冲区将处于静止状态。提示将更新以显示当前缓冲区的大小。</p>
</div>
<div id="GroovyShell-Example" class="paragraph">
<p>例</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; class Foo {
groovy:001&gt; def bar
groovy:002&gt; def baz() {
groovy:003&gt; :display
 001&gt; class Foo {
 002&gt; def bar
 003&gt; def baz() {</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-clear"><a class="anchor" href="#GroovyShell-clear"></a><code>clear</code></h5>
<div class="paragraph">
<p>清除当前缓冲区，将提示计数器重置为000。可用于从编译错误中恢复。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-show"><a class="anchor" href="#GroovyShell-show"></a><code>show</code></h5>
<div class="paragraph">
<p>显示变量，类或首选项或导入。</p>
</div>
<div id="GroovyShell-showvariables" class="paragraph">
<p><code>show variables</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :show variables
Variables:
  _ = true</pre>
</div>
</div>
<div id="GroovyShell-showclasses" class="paragraph">
<p><code>show classes</code></p>
</div>
<div id="GroovyShell-showimports" class="paragraph">
<p><code>show imports</code></p>
</div>
<div id="GroovyShell-showpreferences" class="paragraph">
<p><code>show preferences</code></p>
</div>
<div id="GroovyShell-showall" class="paragraph">
<p><code>show all</code></p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-inspect"><a class="anchor" href="#GroovyShell-inspect"></a><code>inspect</code></h5>
<div class="paragraph">
<p>打开GUI对象浏览器以检查变量或上一次评估的结果。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-purge"><a class="anchor" href="#GroovyShell-purge"></a><code>purge</code></h5>
<div class="paragraph">
<p>从外壳中清除对象。</p>
</div>
<div id="GroovyShell-purgevariables" class="paragraph">
<p><code>purge variables</code></p>
</div>
<div id="GroovyShell-purgeclasses" class="paragraph">
<p><code>purge classes</code></p>
</div>
<div id="GroovyShell-purgeimports" class="paragraph">
<p><code>purge imports</code></p>
</div>
<div id="GroovyShell-purgepreferences" class="paragraph">
<p><code>purge preferences</code></p>
</div>
<div id="GroovyShell-purgeall" class="paragraph">
<p><code>purge all</code></p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-edit"><a class="anchor" href="#GroovyShell-edit"></a><code>edit</code></h5>
<div class="paragraph">
<p>在外部编辑器中编辑当前缓冲区。</p>
</div>
<div class="paragraph">
<p>当前仅适用于具有<code>EDITOR</code>环境变量集，或已配置<code>editor</code>偏爱。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-load"><a class="anchor" href="#GroovyShell-load"></a><code>load</code></h5>
<div class="paragraph">
<p>将一个或多个文件（或URL）加载到缓冲区中。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-save"><a class="anchor" href="#GroovyShell-save"></a><code>save</code></h5>
<div class="paragraph">
<p>将缓冲区的内容保存到文件中。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-record"><a class="anchor" href="#GroovyShell-record"></a><code>record</code></h5>
<div class="paragraph">
<p>将当前会话记录到文件中。</p>
</div>
<div id="GroovyShell-recordstart" class="paragraph">
<p><code>record start</code></p>
</div>
<div id="GroovyShell-recordstop" class="paragraph">
<p><code>record stop</code></p>
</div>
<div id="GroovyShell-recordstatus" class="paragraph">
<p><code>record status</code></p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-history"><a class="anchor" href="#GroovyShell-history"></a><code>history</code></h5>
<div class="paragraph">
<p>显示，管理和调出编辑行历史记录。</p>
</div>
<div id="GroovyShell-historyshow" class="paragraph">
<p><code>history show</code></p>
</div>
<div id="GroovyShell-historyrecall" class="paragraph">
<p><code>history recall</code></p>
</div>
<div id="GroovyShell-historyflush" class="paragraph">
<p><code>history flush</code></p>
</div>
<div id="GroovyShell-historyclear" class="paragraph">
<p><code>history clear</code></p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-alias"><a class="anchor" href="#GroovyShell-alias"></a><code>alias</code></h5>
<div class="paragraph">
<p>创建一个别名。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-doc"><a class="anchor" href="#GroovyShell-doc"></a><code>doc</code></h5>
<div class="paragraph">
<p>打开包含提供的类的文档的浏览器。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :doc java.util.List
http://docs.oracle.com/javase/7/docs/api/java/util/List.html
http://docs.groovy-lang.org/2.4.2-SNAPSHOT/html/groovy-jdk/java/util/List.html</pre>
</div>
</div>
<div class="paragraph">
<p>将打开两个窗口（或标签，具体取决于您的浏览器）：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>一个用于JDK文档</p>
</li>
<li>
<p>一个用于GDK文档</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-set"><a class="anchor" href="#GroovyShell-set"></a><code>set</code></h5>
<div class="paragraph">
<p>设置或列出首选项。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-Preferences"><a class="anchor" href="#GroovyShell-Preferences"></a> 1.5。优先</h3>
<div class="paragraph">
<p>一些方面<code>groovysh</code>可以通过设置首选项来定制行为。首选项使用<code>set</code>命令或<code>:=</code>捷径。</p>
</div>
<div class="sect3">
<h4 id="GroovyShell-RecognizedPreferences"><a class="anchor" href="#GroovyShell-RecognizedPreferences"></a> 1.5.1。公认的偏好</h4>
<div class="sect4">
<h5 id="GroovyShell-InterpreterMode"><a class="anchor" href="#GroovyShell-InterpreterMode"></a><code>interpreterMode</code></h5>
<div class="paragraph">
<p>允许使用类型化变量（即<code>def</code>或其他类型信息）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; def x = 3
===&gt; 3
groovy:000&gt; x
===&gt; 3</pre>
</div>
</div>
<div class="paragraph">
<p>这对于将代码从教程等中复制和粘贴到正在运行的会话中特别有用。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-verbosity"><a class="anchor" href="#GroovyShell-verbosity"></a><code>verbosity</code></h5>
<div class="paragraph">
<p>设置外壳的详细程度。预期为以下之一：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DEBUG</code></p>
</li>
<li>
<p><code>VERBOSE</code></p>
</li>
<li>
<p><code>INFO</code></p>
</li>
<li>
<p><code>QUIET</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>默认为<code>INFO</code> 。</p>
</div>
<div class="paragraph">
<p>如果此首选项设置为无效值，则将使用先前的设置，如果没有，则删除该首选项并使用默认值。</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_colors_code"><a class="anchor" href="#_code_colors_code"></a><code>colors</code></h5>
<div class="paragraph">
<p>设置外壳使用的颜色。</p>
</div>
<div class="paragraph">
<p>默认为<code>true</code> 。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-show-last-result"><a class="anchor" href="#GroovyShell-show-last-result"></a><code>show-last-result</code></h5>
<div class="paragraph">
<p>显示执行后的最后结果。</p>
</div>
<div class="paragraph">
<p>默认为<code>true</code> 。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-sanitize-stack-trace"><a class="anchor" href="#GroovyShell-sanitize-stack-trace"></a><code>sanitize-stack-trace</code></h5>
<div class="paragraph">
<p>清理（整理/过滤）堆栈跟踪。</p>
</div>
<div class="paragraph">
<p>默认为<code>true</code> 。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-editor"><a class="anchor" href="#GroovyShell-editor"></a><code>editor</code></h5>
<div class="paragraph">
<p>配置由<code>edit</code>命令。</p>
</div>
<div class="paragraph">
<p>缺省值为系统环境变量的值<code>EDITOR</code> 。</p>
</div>
<div class="paragraph">
<p>Mac OS X要使用TextEdit（Mac OS X上的默认文本编辑器），请配置：设置编辑器/Applications/TextEdit.app/Contents/MacOS/TextEdit</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-SettingaPreference"><a class="anchor" href="#GroovyShell-SettingaPreference"></a> 1.5.2。设定偏好</h4>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :set verbosity DEBUG</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-ListingPreferences"><a class="anchor" href="#GroovyShell-ListingPreferences"></a> 1.5.3。列表首选项</h4>
<div class="paragraph">
<p>列出当前<em>设置的</em>首选项（及其值）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :show preferences</pre>
</div>
</div>
<div class="paragraph">
<p>局限性：目前，无法列出所有要设置的已知/可用首选项。</p>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-ClearingPreferencesieResettingtoDefaults"><a class="anchor" href="#GroovyShell-ClearingPreferencesieResettingtoDefaults"></a> 1.5.4。清除首选项（即重置为默认值）</h4>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :purge preferences</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-UserProfileScriptsandState"><a class="anchor" href="#GroovyShell-UserProfileScriptsandState"></a> 1.6。用户配置文件脚本和状态</h3>
<div class="sect3">
<h4 id="GroovyShell-ProfileScripts"><a class="anchor" href="#GroovyShell-ProfileScripts"></a> 1.6.1。配置文件脚本</h4>
<div class="sect4">
<h5 id="GroovyShell-HOMEgroovygroovyshprofile"><a class="anchor" href="#GroovyShell-HOMEgroovygroovyshprofile"></a><code>$HOME/.groovy/groovysh.profile</code></h5>
<div class="paragraph">
<p>该脚本（如果存在）在外壳启动时加载。</p>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-HOMEgroovygroovyshrc"><a class="anchor" href="#GroovyShell-HOMEgroovygroovyshrc"></a><code>$HOME/.groovy/groovysh.rc</code></h5>
<div class="paragraph">
<p>该脚本（如果存在）在外壳程序进入交互模式时加载。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="GroovyShell-State"><a class="anchor" href="#GroovyShell-State"></a> 1.6.2。州</h4>
<div class="sect4">
<h5 id="GroovyShell-HOMEgroovygroovyshhistory"><a class="anchor" href="#GroovyShell-HOMEgroovygroovyshhistory"></a><code>$HOME/.groovy/groovysh.history</code></h5>
<div class="paragraph">
<p>编辑行历史记录存储在此文件中。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-register"><a class="anchor" href="#GroovyShell-register"></a> 1.7。自定义命令</h3>
<div class="paragraph">
<p>的<code>register</code> command允许您在shell中注册自定义命令。例如，编写以下内容将注册<code>Stats</code>命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :register Stats</pre>
</div>
</div>
<div class="paragraph">
<p>在哪里<code>Stats</code> class是扩展<code>org.codehaus.groovy.tools.shell.CommandSupport</code>类。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.codehaus.groovy.tools.shell.CommandSupport
import org.codehaus.groovy.tools.shell.Groovysh

class Stats extends CommandSupport {
    protected Stats(final Groovysh shell) {
        super(shell, 'stats', 'T')
    }

    public Object execute(List args) {
        println "Free memory: ${Runtime.runtime.freeMemory()}"
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后可以使用以下命令调用该命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovy:000&gt; :stats
stats
Free memory: 139474880
groovy:000&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>请注意，命令类必须在类路径中找到：您不能在外壳程序内定义新命令。</p>
</div>
</div>
<div class="sect2">
<h3 id="GroovyShell-Troubleshooting"><a class="anchor" href="#GroovyShell-Troubleshooting"></a> 1.8。故障排除</h3>
<div class="paragraph">
<p>请<a href="https://issues.apache.org/jira/browse/GROOVY">报告</a>您遇到的任何问题。请务必在JIRA问题上标记<code>Groovysh</code>零件。</p>
</div>
<div class="sect3">
<h4 id="GroovyShell-PlatformProblems"><a class="anchor" href="#GroovyShell-PlatformProblems"></a> 1.8.1。平台问题</h4>
<div class="sect4">
<h5 id="GroovyShell-ProblemsloadingtheJLineDLL"><a class="anchor" href="#GroovyShell-ProblemsloadingtheJLineDLL"></a>加载JLine DLL时出现问题</h5>
<div class="paragraph">
<p>在Windows上， <a href="https://github.com/jline/jline2">JLine2</a> （用于精美的shell输入/历史记录/完成绒毛）使用一个<strong>小的</strong> DLL文件来欺骗<strong>邪恶的</strong> Windows人造shell（ <code>CMD.EXE</code>要么<code>COMMAND.COM</code> ）为Java提供无缓冲的输入。在极少数情况下，这可能无法加载或初始化。</p>
</div>
<div class="paragraph">
<p>一种解决方案是禁用装饰，并使用不受支持的终端实例。您可以在命令行上使用<code>--terminal</code>标记并将其设置为以下之一：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code></p>
</li>
<li>
<p><code>false</code></p>
</li>
<li>
<p><code>off</code></p>
</li>
<li>
<p><code>jline.UnsupportedTerminal</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>groovysh --terminal=none</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="GroovyShell-ProblemswithCygwinonWindows"><a class="anchor" href="#GroovyShell-ProblemswithCygwinonWindows"></a> Windows上的Cygwin问题</h5>
<div class="paragraph">
<p>当用cygwin运行groovysh时，有些人会遇到问题。如果遇到麻烦，以下方法可能会有所帮助：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>stty -icanon min 1 -echo
groovysh --terminal=unix
stty icanon echo</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="GroovyShell-GMavenPlus"><a class="anchor" href="#GroovyShell-GMavenPlus"></a> 2。GMavenPlus Maven插件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/groovy/GMavenPlus">GMavenPlus</a>是一个Maven插件，其目标是支持启动绑定到Maven项目的Groovy Shell或Groovy Console。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="GroovyShell-GradleGroovyshPlugin"><a class="anchor" href="#GroovyShell-GradleGroovyshPlugin"></a> 3。Gradle Groovysh插件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/tkruse/gradle-groovysh-plugin">Gradle Groovysh插件</a>是一个Gradle插件，它提供gradle任务来启动绑定到Gradle项目的Groovy Shell。</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">版本2.5.8<br>最近更新时间2019-08-02 18:30:30 UTC</div>
</div>
<link rel="stylesheet" href="asset?aid=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>

</body></html>