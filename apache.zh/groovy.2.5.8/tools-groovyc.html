<html lang="zh-Hans" ><head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>编译Groovy</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="asset?aid=1">
</head>
<body class="book toc2 toc-left" >
<div id="header">
<h1>编译Groovy</h1>
<div class="details">
<span id="revnumber">版本2.5.8</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#section-groovyc-compiler">1. groovyc，Groovy编译器</a></li>
<li><a href="#_ant_task">2。蚂蚁任务</a>
<ul class="sectlevel2">
<li><a href="#ThegroovycAntTask-groovyc">2.1。<code><groovyc></code></a>
<ul class="sectlevel3">
<li><a href="#ThegroovycAntTask-Description">2.1.1。描述</a></li>
<li><a href="#ThegroovycAntTask-Requiredtaskdef">2.1.2。必需的taskdef</a></li>
<li><a href="#ThegroovycAntTask-groovycAttributes">2.1.3。 <groovyc> 属性</groovyc></a></li>
<li><a href="#ThegroovycAntTask-groovycNestedElements">2.1.4。 <groovyc> 嵌套元素</groovyc></a></li>
<li><a href="#ThegroovycAntTask-JointCompilation">2.1.5。联合编译</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Gant">3。甘特</a></li>
<li><a href="#Gradle">4。摇篮</a></li>
<li><a href="#_maven_integration">5，Maven整合</a>
<ul class="sectlevel2">
<li><a href="#_gmaven_and_gmavenplus">5.1。GMaven和GMavenPlus</a>
<ul class="sectlevel3">
<li><a href="#section-gmaven">5.1.1。GMaven</a></li>
<li><a href="#section-gmavenplus">5.1.2。GMavenPlus</a></li>
<li><a href="#section-gmaven2">5.1.3。GMaven 2</a></li>
</ul>
</li>
<li><a href="#section-groovyeclipse">5.2。Groovy Eclipse Maven插件</a></li>
</ul>
</li>
<li><a href="#section-jointcompilation">6。联合编制</a></li>
<li><a href="#section-android">7。Android支持</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="section-groovyc-compiler"><a class="anchor" href="#section-groovyc-compiler"></a> 1. groovyc，Groovy编译器</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>groovyc</code>是Groovy编译器命令行工具。它允许您将Groovy源代码编译为字节码。它起着与<code>javac</code>在Java世界中。编译Groovy脚本或类的最简单方法是运行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>groovyc MyClass.groovy</pre>
</div>
</div>
<div class="paragraph">
<p>这将产生一个<code>MyClass.class</code>文件（以及其他.class文件，具体取决于源内容）。 <code>groovyc</code>支持许多命令行开关：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:25%">
<col style="width:25%">
<col style="width:25%">
<col style="width:25%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">简洁版本</th>
<th class="tableblock halign-left valign-top">长版</th>
<th class="tableblock halign-left valign-top">描述</th>
<th class="tableblock halign-left valign-top">例</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@argfile</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">从指定文件中读取选项和源文件。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc @ conf / args</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-cp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-classpath，-classpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指定编译类路径。必须是第一个参数。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -cp lib / dep.jar MyClass.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--sourcepath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">查找源文件的目录。不再使用。指定此参数将无效。</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-温度</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">编译器的临时目录</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-编码</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">源文件编码</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc-编码utf-8脚本.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- 救命</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">显示命令行groovyc工具的帮助</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc-帮助</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-d</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指定放置生成的类文件的位置。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -d目标Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-v</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- 版</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">显示编译器版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -v</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- 例外</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在发生编译错误的情况下显示堆栈跟踪</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -e script.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-j</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--jointCompilation *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">启用联合编译</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -j A.groovy B.java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--basescript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">脚本的基类名称（必须从脚本派生）</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-印地</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-印地</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">启用invokedynamic支持。需要Java 7+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --indy Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--configscript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">高级编译器配置脚本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc --configscript config / config.groovy src / Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-Jproperty =值</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要传递给的属性<code>javac</code>如果启用了联合编译</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -j -Jtarget = 1.6 -Jsource = 1.6 A.groovy B.java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-Fflag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">标志传递给<code>javac</code>如果启用了联合编译</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc -j -Fnowarn A.groovy B.java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-pa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-参数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">生成元数据以反映方法参数名称。需要Java 8+。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyc-参数Person.groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-公关</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-启用预览</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">启用预览Java功能（JEP 12）（仅jdk12 +）。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovy-启用预览Person.groovy</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>注意：</strong> *有关联合编译的完整描述，请参见<a href="#section-jointcompilation">联合编译部分</a> 。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ant_task"><a class="anchor" href="#_ant_task"></a> 2。蚂蚁任务</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ThegroovycAntTask-groovyc"><a class="anchor" href="#ThegroovycAntTask-groovyc"></a> 2.1。<code><groovyc></code></h3>
<div class="sect3">
<h4 id="ThegroovycAntTask-Description"><a class="anchor" href="#ThegroovycAntTask-Description"></a> 2.1.1。描述</h4>
<div class="paragraph">
<p>编译Groovy源文件，如果使用联合编译选项，则编译Java源文件。</p>
</div>
</div>
<div class="sect3">
<h4 id="ThegroovycAntTask-Requiredtaskdef"><a class="anchor" href="#ThegroovycAntTask-Requiredtaskdef"></a> 2.1.2。必需的taskdef</h4>
<div class="paragraph">
<p>假设您需要的所有普通jar都在<em>my.classpath中</em> （这将是<code>groovy-VERSION.jar</code> ， <code>groovy-ant-VERSION.jar</code>加上您可能正在使用的所有模块和传递性依赖项），则需要在<code>build.xml</code>在...之前<code>groovyc</code>任务被调用。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;taskdef name="groovyc"
         classname="org.codehaus.groovy.ant.Groovyc"
         classpathref="my.classpath"/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ThegroovycAntTask-groovycAttributes"><a class="anchor" href="#ThegroovycAntTask-groovycAttributes"></a> 2.1.3。 <groovyc> 属性</groovyc></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:33.3333%">
<col style="width:33.3333%">
<col style="width:33.3334%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">属性</th>
<th class="tableblock halign-left valign-top">描述</th>
<th class="tableblock halign-left valign-top">需要</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">errorProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">编译失败时要设置的属性。如果编译失败，将设置此属性。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">srcdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groovy（可能还有Java）源文件的位置。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">目的地</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">存储类文件的位置。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">类路径</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要使用的类路径。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">类路径引用</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">给定的类路径用作路径引用。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">源路径</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要使用的源路径。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">源路径引用</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">给定的源路径用作路径参考。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">编码方式</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">源文件的编码。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">冗长的</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要求编译器输出详细信息；默认为否。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeAntRuntime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是否在类路径中包含Ant运行时库；默认为是。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeJavaRuntime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是否在类路径中包括来自正在执行的VM的默认运行时库；默认为否。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeDestClasses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此属性控制是否在提供给编译器的类路径中包括目标类目录。默认值是true”。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">叉子</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是否使用衍生的JVM实例执行groovyc；默认为否。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memoryInitialSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">基础虚拟机内存的初始大小（如果使用派生模式）；否则忽略。默认为标准VM内存设置。（例如：83886080、81920k或80m）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memoryMaximumSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">基础虚拟机的最大内存大小（如果使用派生模式）；否则忽略。默认为标准VM内存设置。（例如：83886080、81920k或80m）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">故障错误</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指示编译错误是否会使构建失败；默认为true。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">继续</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>failonerror的</em>反向别名。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">列表文件</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指示是否将列出要编译的源文件；默认为否。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">堆栈跟踪</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">如果为true，则每个编译错误消息将包含一个堆栈跟踪</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">印地</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用Groovy 2.0及更高版本并在JDK 7上运行时，启用具有``调用动态''支持的编译</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scriptBaseClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置Groovy脚本的基类</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">存根目录</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置应在其中生成Java源存根文件的存根目录。该目录不需要存在，也不会自动删除-尽管除非'keepStubs'为true，否则它将清除其内容。分叉时忽略。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keepStubs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置keepStubs标志。默认为false。设置为true进行调试。分叉时忽略。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">forceLookupUnnamedFiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groovyc Ant任务通常在知道要编译的源文件的完整列表的构建系统的上下文中使用。在这种情况下，Groovy编译器在查找源文件时去搜索类路径是很浪费的，因此，默认情况下，Groovyc Ant任务在关闭这种搜索的特殊模式下调用编译器。如果希望编译器搜索源文件，则需要将此标志设置为true。默认为false。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">配置文件</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置用于自定义编译配置的配置文件。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">生成元数据以反映JDK 8及更高版本上的方法参数名称。默认为false。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetBytecode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置字节码兼容性级别。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javahome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置<code>java.home</code>要使用的值，默认为当前JDK的主目录。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">可执行文件</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置以分叉模式调用编译器时要使用的java可执行文件的名称，否则将忽略。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scriptExtension</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置搜索Groovy源文件时使用的扩展名。接受* .groovy，.groovy或groovy形式的扩展名。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">属性更新</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在编译成功时设置的属性。如果编译失败或没有要编译的文件，则不会设置此属性。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>例：</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovyc srcdir="src" destdir="target/classes"&gt;
&lt;/groovyc&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ThegroovycAntTask-groovycNestedElements"><a class="anchor" href="#ThegroovycAntTask-groovycNestedElements"></a> 2.1.4。 <groovyc> 嵌套元素</groovyc></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:25%">
<col style="width:25%">
<col style="width:25%">
<col style="width:25%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">元件</th>
<th class="tableblock halign-left valign-top">类</th>
<th class="tableblock halign-left valign-top">需要</th>
<th class="tableblock halign-left valign-top">替换属性</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javac任务</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jointCompilationOptions</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">路径结构</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是（除非使用了srcdir）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srcdir</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">类路径</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">路径结构</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">没有</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">类路径</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>笔记：</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>有关路径结构，请参见例如<a href="http://ant.apache.org/manual/using.html#path" class="bare">http://ant.apache.org/manual/using.html#path</a></p>
</li>
<li>
<p>有关javac任务的用法，请参见<a href="https://ant.apache.org/manual/Tasks/javac.html" class="bare">https://ant.apache.org/manual/Tasks/javac.html</a></p>
</li>
<li>
<p>嵌套的javac任务的行为或多或少与顶级文档中记录的一样<code>javac</code>任务。 <code>srcdir</code> ， <code>destdir</code> ， <code>classpath</code> ， <code>encoding</code>对于嵌套<code>javac</code>任务取自附件<code>groovyc</code>任务。如果指定了这些属性，则将它们添加，而不替换它们。实际上，您不应尝试覆盖目标。其他属性和嵌套元素不受影响，例如<code>fork</code> ， <code>memoryMaximumSize</code>等可以免费使用。</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ThegroovycAntTask-JointCompilation"><a class="anchor" href="#ThegroovycAntTask-JointCompilation"></a> 2.1.5。联合编译</h4>
<div class="paragraph">
<p>通过使用嵌入式启用联合编译<code>javac</code>元素，如以下示例所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;groovyc srcdir="${testSourceDirectory}" destdir="${testClassesDirectory}"&gt;
  &lt;classpath&gt;
    &lt;pathelement path="${mainClassesDirectory}"/&gt;
    &lt;pathelement path="${testClassesDirectory}"/&gt;
    &lt;path refid="testPath"/&gt;
  &lt;/classpath&gt;
  &lt;javac source="1.7" target="1.7" debug="on" /&gt;
&lt;/groovyc&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>很少指定<code>srcdir</code>和<code>destdir</code> ，嵌套<code>javac</code>任务随<code>srcdir</code>和<code>destdir</code>附件中的值<code>groovyc</code>任务，而将其保持原样始终是正确的选择。重申一下： <code>javac</code>任务得到<code>srcdir</code> ， <code>destdir</code>和<code>classpath</code>从封闭<code>groovyc</code>任务。</p>
</div>
<div class="paragraph">
<p>有关联合编译的更多详细信息，请参见<a href="#section-jointcompilation">联合编译</a>部分。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Gant"><a class="anchor" href="#Gant"></a> 3。甘特</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/Gant/Gant">Gant</a>是使用Groovy而不是XML来指定逻辑的脚本脚本工具。因此，它具有与Groovyc Ant任务完全相同的功能。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Gradle"><a class="anchor" href="#Gradle"></a> 4。摇篮</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://www.gradle.org/">Gradle</a>是一个构建工具，使您可以利用<a href="http://ant.apache.org/">Ant</a>的灵活性，同时在<a href="http://maven.apache.org/">Maven之类的</a>工具提供的配置之上保持约定的简单性。使用Groovy DSL指定构建，它提供了极大的灵活性和简洁性。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven_integration"><a class="anchor" href="#_maven_integration"></a> 5，Maven整合</h2>
<div class="sectionbody">
<div class="paragraph">
<p>有几种方法可以在您的Maven项目中编译Groovy代码。<a href="#section-gmavenplus">GMavenPlus</a>是最灵活且功能丰富的，但与大多数Groovy编译器工具一样，它在Java-Groovy联合项目中可能会遇到困难（出于同样的原因， <a href="#section-gmaven">GMaven</a>和<a href="#Gradle">Gradle</a>可能会出现问题）。<a href="#section-groovyeclipse">用于Maven</a>的<a href="#section-groovyeclipse">Groovy-Eclipse编译器插件</a>回避了联合编译问题。阅读<a href="https://github.com/groovy/groovy-eclipse/wiki/Groovy-Eclipse-Maven-plugin#why-another-groovy-compiler-for-maven-what-about-gmaven">本文</a> ，以更深入地讨论这两种方法的优缺点。</p>
</div>
<div class="paragraph">
<p>第三种方法是使用Maven的Ant插件来编译一个常规项目。请注意，在下面的示例中，Ant插件绑定到构建的编译和测试编译阶段。在这些阶段中将调用它，并将执行包含的任务，这些任务将在源目录和测试目录上运行Groovy编译器。生成的Java类将与从Java源代码编译的任何标准Java类共存，并像对待它们一样对待，并且看起来与JRE或JUnit运行时没有什么不同。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycomp.MyGroovy&lt;/groupId&gt;
    &lt;artifactId&gt;MyGroovy&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;Maven Example building a Groovy project&lt;/name&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;3.8.1&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
            &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
            &lt;version&gt;2.5.0&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt; &lt;!-- required JUST since Groovy 2.5.0 --&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;compile&lt;/id&gt;
                        &lt;phase&gt;compile&lt;/phase&gt;
                        &lt;configuration&gt;
                            &lt;tasks&gt;
                                &lt;mkdir dir="${basedir}/src/main/groovy"/&gt;
                                &lt;taskdef name="groovyc"
                                    classname="org.codehaus.groovy.ant.Groovyc"&gt;
                                    &lt;classpath refid="maven.compile.classpath"/&gt;
                                &lt;/taskdef&gt;
                                &lt;mkdir dir="${project.build.outputDirectory}"/&gt;
                                &lt;groovyc destdir="${project.build.outputDirectory}"
                                    srcdir="${basedir}/src/main/groovy/" listfiles="true"&gt;
                                    &lt;classpath refid="maven.compile.classpath"/&gt;
                                &lt;/groovyc&gt;
                            &lt;/tasks&gt;
                        &lt;/configuration&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;run&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                    &lt;execution&gt;
                        &lt;id&gt;test-compile&lt;/id&gt;
                        &lt;phase&gt;test-compile&lt;/phase&gt;
                        &lt;configuration&gt;
                            &lt;tasks&gt;
                                &lt;mkdir dir="${basedir}/src/test/groovy"/&gt;
                                &lt;taskdef name="groovyc"
                                    classname="org.codehaus.groovy.ant.Groovyc"&gt;
                                    &lt;classpath refid="maven.test.classpath"/&gt;
                                &lt;/taskdef&gt;
                                &lt;mkdir dir="${project.build.testOutputDirectory}"/&gt;
                                &lt;groovyc destdir="${project.build.testOutputDirectory}"
                                    srcdir="${basedir}/src/test/groovy/" listfiles="true"&gt;
                                    &lt;classpath refid="maven.test.classpath"/&gt;
                                &lt;/groovyc&gt;
                            &lt;/tasks&gt;
                        &lt;/configuration&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;run&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>假设您有一个Maven项目设置<code>groovy</code>子文件夹，作为java src和test子文件夹的对等体。您可以使用<code>java</code> / <code>jar</code>原型进行设置，然后将Java文件夹重命名为groovy或保留Java文件夹并仅创建groovy对等文件夹。还存在一个尚未经过测试或未在生产中使用的groovy插件。在如上例中定义了构建部分之后，您可以正常调用典型的Maven构建阶段。例如， <code>mvn test</code>将执行测试阶段，编译Groovy源和Groovy测试源，最后执行单元测试。如果你跑<code>mvn jar</code>在所有单元测试通过后，它将执行jar阶段，将所有已编译的生产类捆绑到jar中。有关Maven构建阶段的更多详细信息，请查阅Maven2文档。</p>
</div>
<div class="sect2">
<h3 id="_gmaven_and_gmavenplus"><a class="anchor" href="#_gmaven_and_gmavenplus"></a> 5.1。GMaven和GMavenPlus</h3>
<div class="sect3">
<h4 id="section-gmaven"><a class="anchor" href="#section-gmaven"></a> 5.1.1。GMaven</h4>
<div class="paragraph">
<p><a href="https://github.com/groovy/gmaven">GMaven</a>是Groovy的原始Maven插件，同时支持Groovy的编译和脚本编写。</p>
</div>
<div class="paragraph">
<p><strong>重要：</strong></p>
</div>
<div class="paragraph">
<p>您应该意识到GMaven <strong>不再受支持，</strong>并且在<a href="#section-jointcompilation">联合编译时</a>会遇到困难。
<a href="#section-gmavenplus">GMavenPlus</a>可以很好地替代，但是如果您在联合编译方面遇到问题，则可以考虑使用<a href="#section-groovyeclipse">Groovy Eclipse maven插件</a> 。</p>
</div>
</div>
<div class="sect3">
<h4 id="section-gmavenplus"><a class="anchor" href="#section-gmavenplus"></a> 5.1.2。GMavenPlus</h4>
<div class="paragraph">
<p><a href="https://github.com/groovy/GMavenPlus">GMavenPlus</a>是<a href="#section-gmaven">GMaven</a>的改写，并且正在积极开发中。它支持GMaven的大多数功能（ <a href="http://maven.apache.org/plugin-tools/maven-plugin-tools-java/index.html">mojo Javadoc标记</a>和对较旧的Groovy版本的支持是几个值得注意的例外）。它的联合编译使用存根（这意味着它具有与<a href="#section-gmaven">GMaven</a>和<a href="#Gradle">Gradle</a>相同的潜在问题）。相对于其前身的主要优点是它支持最新的Groovy版本，InvokeDynamic，Android上的Groovy，GroovyDoc和配置脚本。</p>
</div>
</div>
<div class="sect3">
<h4 id="section-gmaven2"><a class="anchor" href="#section-gmaven2"></a> 5.1.3。GMaven 2</h4>
<div class="paragraph">
<p>顾名思义， <a href="http://groovy.github.io/gmaven/">GMaven 2</a>并非旨在取代<a href="#section-gmaven">GMaven</a> 。实际上，它删除了GMaven插件的非脚本功能。它尚未发布任何版本，目前似乎处于非活动状态。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-groovyeclipse"><a class="anchor" href="#section-groovyeclipse"></a> 5.2。Groovy Eclipse Maven插件</h3>
<div class="paragraph">
<p><a href="https://github.com/groovy/groovy-eclipse/wiki/Groovy-Eclipse-Maven-plugin">Groovy-Eclipse</a>为Maven提供了一个编译器插件。使用编译器插件，可以使用Groovy-Eclipse编译器来编译您的maven项目。无桩联合编译是其他地方没有的功能。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-jointcompilation"><a class="anchor" href="#section-jointcompilation"></a> 6。联合编制</h2>
<div class="sectionbody">
<div class="paragraph">
<p>联合编译意味着Groovy编译器将解析Groovy源文件，为所有文件创建存根，调用Java编译器与Java源代码一起编译存根，然后以常规Groovy编译器方式继续编译。这样就可以不受限制地混合Java和Groovy文件。</p>
</div>
<div class="paragraph">
<p>可以使用以下命令启用联合编译<code>-j</code>使用命令行编译器标记，或使用Ant任务所需的嵌套标记以及所有属性和其他嵌套标记。</p>
</div>
<div class="paragraph">
<p>重要的是要知道，如果您不启用联合编译并尝试使用Groovy编译器来编译Java源文件，则Java源文件将像Groovy源一样被编译。在某些情况下，这可能可行，因为大多数Java语法都与Groovy兼容，但是语义会有所不同。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-android"><a class="anchor" href="#section-android"></a> 7。Android支持</h2>
<div class="sectionbody">
<div class="paragraph">
<p>可以用Groovy编写一个Android应用程序。但是，这需要特殊版本的编译器，这意味着您不能使用常规的<a href="#section-groovyc-compiler">groovyc工具</a>定位Android字节码。特别是，Groovy为Android提供了特定的JAR文件，其分类为<code>grooid</code> 。为了使事情变得更容易， <a href="https://github.com/groovy/groovy-android-gradle-plugin">Gradle插件</a>在Android Gradle工具链中添加了对Groovy语言的支持。</p>
</div>
<div class="paragraph">
<p>该插件可以这样应用：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.1.2'
        classpath 'org.codehaus.groovy:groovy-android-gradle-plugin:1.0.0'
    }
}

apply plugin: 'groovyx.android'</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后，您将需要添加对<code>grooid</code> Groovy编译器的版本：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">dependencies {
    compile 'org.codehaus.groovy:groovy:2.4.7:grooid'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>请注意，如果Groovy jar不提供<code>grooid</code>分类器替代，则表示该jar与Android直接兼容。在这种情况下，您可以像这样直接添加依赖项：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">dependencies {
    compile 'org.codehaus.groovy:groovy:2.4.7:grooid'       // requires the grooid classifier
    compile ('org.codehaus.groovy:groovy-json:2.4.7') {     // no grooid version available
        transitive = false                                  // so do not depend on non-grooid version
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>请注意<code>transitive=false</code>的参数<code>groovy-json</code>将使Gradle下载JSON支持jar，而无需在Groovy的常规jar中添加依赖项。</p>
</div>
<div class="paragraph">
<p>请确保进入<a href="https://github.com/groovy/groovy-android-gradle-plugin">插件主页</a>以找到最新的文档和版本。</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">版本2.5.8<br>最近更新时间2019-08-02 18:30:31 UTC</div>
</div>
<link rel="stylesheet" href="asset?aid=2">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>

</body></html>