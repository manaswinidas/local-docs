<html lang="zh-Hans" ><head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Windows NSIS安装程序</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="asset?aid=1">
</head>
<body class="book toc2 toc-left" >
<div id="header">
<h1>Windows NSIS安装程序</h1>
<div class="details">
<span id="revnumber">版本2.5.8</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_a_windows_specific_installation_script">1。Windows特定的安装脚本</a>
<ul class="sectlevel2">
<li><a href="#_silent_installation">1.1。静默安装</a></li>
<li><a href="#_working_with_the_installer_source">1.2。使用安装程序源</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_a_windows_specific_installation_script"><a class="anchor" href="#_a_windows_specific_installation_script"></a> 1。Windows特定的安装脚本</h2>
<div class="sectionbody">
<div class="paragraph">
<p>这样就可以创建安装程序。您可以在<a href="#download">下载页面</a>上查看结果。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/setup.png" alt="设定">
</div>
</div>
<div class="paragraph">
<p>安装程序首先将groovy文件复制到用户所需的位置，</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/outdir.png" alt="Outdir">
</div>
</div>
<div class="paragraph">
<p>然后请求创建变量的权限<code>GROOVY_HOME</code>并添加相应的bin目录（ <code>%GROOVY_HOME%/bin</code>如果路径中不存在对groovy的引用，则返回该路径。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/variables.jpg" alt="变数">
</div>
</div>
<div class="paragraph">
<p>用户可以决定是将它们放入用户环境还是系统环境（在Win 95和Win 98上，此信息将附加到autoexec.bat中），即安装是针对当前用户还是针对所有用户。然后，安装程序会检查是否存在<code>JAVA_HOME</code> 。如果不存在，则会出现一个消息框，指出潜在的问题。</p>
</div>
<div class="paragraph">
<p>接下来，用户可以决定是否安装本机启动器，</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/native.jpg" alt="本机">
</div>
</div>
<div class="paragraph">
<p>可以决定安装其他软件包，</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/additionalmodules.png" alt="附加模块">
</div>
</div>
<div class="paragraph">
<p>最后，是否将.groovy文件与本机启动器关联，以及是否将扩展名.groovy和.gy添加到PATHEXT。这允许直接从命令行启动Groovy文件，而不必显式调用groovy。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/fileassociation.png" alt="文件关联">
</div>
</div>
<div class="paragraph">
<p>如您在屏幕快照中看到的（它们是可单击的缩略图），当前支持英语，德语，法语和西班牙语作为安装语言。</p>
</div>
<div class="paragraph">
<p>哦，无论您做什么，都不要使用命令行选项-russel。</p>
</div>
<div class="paragraph">
<p>法语翻译由Xavier Mehaut和Tugduall Grall贡献，西班牙翻译由Andres Almiray贡献，巴西葡萄牙语的翻译由Marcos Silva Pereira提供。</p>
</div>
<div class="paragraph">
<p>非常感谢您的帮助。</p>
</div>
<div class="sect2">
<h3 id="_silent_installation"><a class="anchor" href="#_silent_installation"></a> 1.1。静默安装</h3>
<div class="paragraph">
<p>安装程序通过命令行选项/ S支持静默安装。使用此选件时，您可以使用其他选件来影响要安装的零件：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:33.3333%">
<col style="width:66.6667%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">选项</th>
<th class="tableblock halign-left valign-top">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/一种</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">安装其他软件包</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/所有</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">全部安装</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/ D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设置安装目录（强制性）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">创建文件关联</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/ N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">安装本机启动器</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/秒</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">静默安装</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/ V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">设定变数</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>/ D选项是必需的，它指向安装目录。重要的是要注意/ D选项<strong>必须</strong>是命令行上的最后一个参数，并且即使路径包含空格，也不能包含任何引号。仅支持绝对路径。使用等号分隔选项和路径。</p>
</div>
<div class="paragraph">
<p>示例：groovy-1.5.6-installer-2.exe / S / A / N / D = d：\ program files \ groovy</p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_the_installer_source"><a class="anchor" href="#_working_with_the_installer_source"></a> 1.2。使用安装程序源</h3>
<div class="paragraph">
<p>要使用安装程序源来创建自己的二进制安装程序，只需将其检出到Eclipse工作区中即可。另外，您可能需要安装<a href="http://nsis.sourceforge.net/EclipseNSIS_-_NSIS_plugin_for_Eclipse">NSIS-Eclipse-Plugin</a> ，它在开发NSIS内容时会有所帮助。</p>
</div>
<div class="paragraph">
<p>如果您已经使用过NSIS脚本，那么了解该怎么做应该没有大问题。</p>
</div>
<div class="paragraph">
<p>主要脚本是文件setup.nsi，您可以在其中找到安装程序。定义了另外三个页面：变量，NativeLauncher和FileAssociation，对于每个页面，您都可以找到包含屏幕放置位置的相应.ini文件。只需在Eclipse-Plugin提供的设计编辑器中打开它们，就可以看到它们的外观。</p>
</div>
<div class="paragraph">
<p>两个bmp图像包含不同分辨率的Groovy徽标，一个用于欢迎页面，一个作为其他页面的标题图像。这个名字就是游戏...</p>
</div>
<div class="paragraph">
<p>最后，您有了启动脚本。这些实际上使用针对groovy版本，groovy位置（在硬盘上）和本机启动器位置的不同设置来启动编译器。常规版本会影响安装程序的最终名称。</p>
</div>
<div class="paragraph">
<p>启动脚本正在设置以下变量：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SOURCE_VERSION</strong>定义发行版本</p>
</li>
<li>
<p><strong>SOURCE_DIR</strong>是groovy安装目录的完整路径</p>
</li>
<li>
<p><strong>NATIVE_DIR</strong>是本机启动器的完整路径</p>
</li>
<li>
<p><strong>SCRIPTOM_DIR</strong>是scriptom模块的完整路径</p>
</li>
<li>
<p><strong>GANT_DIR</strong>是<strong>gant</strong>模块的完整路径</p>
</li>
<li>
<p><strong>GRAPHICS_B</strong>是graphicsbuilder模块的完整路径</p>
</li>
<li>
<p><strong>SWINGX_B</strong>是swingxbuilder模块的完整路径</p>
</li>
<li>
<p><strong>VERSION_TXT</strong>是installed_versions.txt的完整路径（此文件描述了使用的版本）</p>
</li>
<li>
<p><strong>DOC_DIR</strong>是doc目录的完整路径</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>最有可能的是，您只需要设置这些变量就可以了。</p>
</div>
<div class="paragraph">
<p>玩得开心。</p>
</div>
<div class="paragraph">
<p>如果有任何问题，请在邮件列表上询问或通过以下方式与作者联系</p>
</div>
<div class="paragraph">
<p>joachim.baumann_at_xinaris.de。</p>
</div>
<div class="paragraph">
<p>摘录：特定于Windows的Groovy安装程序</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">版本2.5.8<br>最近更新时间2019-08-02 18:30:31 UTC</div>
</div>
<link rel="stylesheet" href="asset?aid=2">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>

</body></html>