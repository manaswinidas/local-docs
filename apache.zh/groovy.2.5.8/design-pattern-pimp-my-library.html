<html lang="zh-Hans" ><head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>皮条客我的图书馆模式</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left" >
<div id="header">
<h1>皮条客我的图书馆模式</h1>
<div class="details">
<span id="revnumber">版本2.5.8</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_example">1。例</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://www.artima.com/weblogs/viewpost.jsp?thread=179766">皮条客我的图书馆</a>模式提出了一种扩展图书馆的方法，该图书馆几乎可以完成您需要的所有工作，但只需要更多。它假定您没有所需库的源代码。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example"><a class="anchor" href="#_example"></a> 1。例</h2>
<div class="sectionbody">
<div class="paragraph">
<p>假设我们要使用Groovy中的内置Integer设施（该设施基于Java中已经存在的功能）。这些库几乎具有我们想要的所有功能，但不是全部。我们可能没有Groovy和Java库的所有源代码，因此我们不能只更改该库。相反，我们增加了图书馆。Groovy有很多方法可以做到这一点。一种方法是使用类别。</p>
</div>
<div class="paragraph">
<p>首先，我们将定义一个合适的类别。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">class EnhancedInteger {
    static boolean greaterThanAll(Integer self, Object[] others) {
        greaterThanAll(self, others)
    }
    static boolean greaterThanAll(Integer self, others) {
        others.every { self &gt; it }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>我们添加了两种方法，通过提供以下方法来增强Integer方法： <code>greaterThanAll</code>方法。类别遵循约定，在这些约定中它们被定义为静态方法，并带有一个特殊的第一个参数来表示我们希望扩展的类。GreaterThanAll（Integer self，others）静态方法成为<code>greaterThanAll(other)</code>实例方法。</p>
</div>
<div class="paragraph">
<p>我们定义了两个版本<code>greaterThanAll</code> 。一个适用于集合，范围等。另一个适用于可变数量的<code>Integer</code>论点。</p>
</div>
<div class="paragraph">
<p>这是您使用类别的方式。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">use(EnhancedInteger) {
    assert 4.greaterThanAll(1, 2, 3)
    assert !5.greaterThanAll(2, 4, 6)
    assert 5.greaterThanAll(-4..4)
    assert 5.greaterThanAll([])
    assert !5.greaterThanAll([4, 5])
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>如您所见，使用这种技术，您可以有效地丰富原始类，而无需访问其源代码。此外，您可以在系统的不同部分应用不同的扩充功能，也可以根据需要使用未扩充的对象。</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">版本2.5.8<br>最近更新时间2019-08-02 18:30:31 UTC</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>

</body></html>