<html lang="zh-Hans" ><head></head><body class="book toc2 toc-left" >﻿
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>句法</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">


<div id="header">
<h1>句法</h1>
<div class="details">
<span id="revnumber">版本2.5.8</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_comments">1。评论</a>
<ul class="sectlevel2">
<li><a href="#_single_line_comment">1.1。单行注释</a></li>
<li><a href="#_multiline_comment">1.2。多行注释</a></li>
<li><a href="#_groovydoc_comment">1.3。Groovydoc评论</a></li>
<li><a href="#_shebang_line">1.4。社bang线</a></li>
</ul>
</li>
<li><a href="#_keywords">2。关键词</a></li>
<li><a href="#_identifiers">3。身份标识</a>
<ul class="sectlevel2">
<li><a href="#_normal_identifiers">3.1。普通标识符</a></li>
<li><a href="#_quoted_identifiers">3.2。带引号的标识符</a></li>
</ul>
</li>
<li><a href="#all-strings">4。弦乐</a>
<ul class="sectlevel2">
<li><a href="#_single_quoted_string">4.1。单引号字符串</a></li>
<li><a href="#_string_concatenation">4.2。字符串串联</a></li>
<li><a href="#_triple_single_quoted_string">4.3。三重单引号字符串</a>
<ul class="sectlevel3">
<li><a href="#_escaping_special_characters">4.3.1。转义特殊字符</a></li>
<li><a href="#_unicode_escape_sequence">4.3.2。Unicode转义序列</a></li>
</ul>
</li>
<li><a href="#_double_quoted_string">4.4。双引号字符串</a>
<ul class="sectlevel3">
<li><a href="#_string_interpolation">4.4.1。字符串插值</a></li>
<li><a href="#_special_case_of_interpolating_closure_expressions">4.4.2。内插闭包表达式的特殊情况</a></li>
<li><a href="#_interoperability_with_java">4.4.3。与Java的互操作性</a></li>
<li><a href="#_gstring_and_string_hashcodes">4.4.4。GString和String hashCodes</a></li>
</ul>
</li>
<li><a href="#_triple_double_quoted_string">4.5。三重双引号字符串</a></li>
<li><a href="#_slashy_string">4.6。斜线</a>
<ul class="sectlevel3">
<li><a href="#_special_cases">4.6.1。特别案例</a></li>
</ul>
</li>
<li><a href="#_dollar_slashy_string">4.7。美元斜线字符串</a></li>
<li><a href="#_string_summary_table">4.8。字符串汇总表</a></li>
<li><a href="#_characters">4.9。性格</a></li>
</ul>
</li>
<li><a href="#_numbers">5，号码</a>
<ul class="sectlevel2">
<li><a href="#_integral_literals">5.1。整体文字</a>
<ul class="sectlevel3">
<li><a href="#_alternative_non_base_10_representations">5.1.1。非基数10的替代表示</a>
<ul class="sectlevel4">
<li><a href="#_binary_literal">二进制文字</a></li>
<li><a href="#_octal_literal">八进制文字</a></li>
<li><a href="#_hexadecimal_literal">十六进制文字</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_decimal_literals">5.2。小数文字</a></li>
<li><a href="#_underscore_in_literals">5.3。在文字下划线</a></li>
<li><a href="#_number_type_suffixes">5.4。数字类型后缀</a></li>
<li><a href="#_math_operations">5.5。数学运算</a>
<ul class="sectlevel3">
<li><a href="#integer_division">5.5.1。除法运算符的情况</a></li>
<li><a href="#power_operator">5.5.2。电力经营者的情况</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_booleans">6。布尔值</a></li>
<li><a href="#_lists">7。清单</a></li>
<li><a href="#_arrays">8。数组</a></li>
<li><a href="#_maps">9。地图</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本章介绍了Groovy编程语言的语法。该语言的语法源自Java语法，但是通过Groovy的特定构造对其进行了增强，并允许进行某些简化。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments"><a class="anchor" href="#_comments"></a> 1。评论</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_single_line_comment"><a class="anchor" href="#_single_line_comment"></a> 1.1。单行注释</h3>
<div class="paragraph">
<p>单行注释以<code>//</code>并且可以在该行的任何位置找到。以下字符<code>//</code> ，直到该行的末尾都被视为注释的一部分。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// a standalone single line comment
println "hello" // a comment till the end of the line</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiline_comment"><a class="anchor" href="#_multiline_comment"></a> 1.2。多行注释</h3>
<div class="paragraph">
<p>多行注释以<code>/*</code>并且可以在该行的任何位置找到。以下字符<code>/*</code>将被视为评论的一部分，包括换行符，直到第一个<code>*/</code>关闭评论。因此，多行注释可以放在语句的末尾，甚至可以放在语句的内部。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">/* a standalone multiline comment
   spanning two lines */
println "hello" /* a multiline comment starting
                   at the end of a statement */
println 1 /* one */ + 2 /* two */</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovydoc_comment"><a class="anchor" href="#_groovydoc_comment"></a> 1.3。Groovydoc评论</h3>
<div class="paragraph">
<p>与多行注释类似，Groovydoc注释是多行注释，但以<code>/**</code>并以<code>*/</code> 。Groovydoc第一条注释行之后的行可以选择以星号开头<code>*</code> 。这些评论与：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>类型定义（类，接口，枚举，注释），</p>
</li>
<li>
<p>字段和属性定义</p>
</li>
<li>
<p>方法定义</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>尽管编译器不会抱怨Groovydoc注释与上述语言元素没有关联，但是您应该在这些结构之前添加注释。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">/**
 * A Class description
 */
class Person {
    /** the name of the person */
    String name

    /**
     * Creates a greeting method for a certain person.
     *
     * @param otherPerson the person to greet
     * @return a greeting message
     */
    String greet(String otherPerson) {
       "Hello ${otherPerson}"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovydoc遵循与Java自己的Javadoc相同的约定。因此，您将能够使用与Javadoc相同的标签。</p>
</div>
</div>
<div class="sect2">
<h3 id="_shebang_line"><a class="anchor" href="#_shebang_line"></a> 1.4。社bang线</h3>
<div class="paragraph">
<p>在单行注释旁边，有一个特殊的行注释，通常称为UNIX系统理解的<em>shebang</em>行，只要您已安装Groovy发行版和<code>groovy</code>该命令在<code>PATH</code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">#!/usr/bin/env groovy
println "Hello from the shebang line"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">的<code>#</code>字符必须是文件的第一个字符。任何缩进都会产生编译错误。
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keywords"><a class="anchor" href="#_keywords"></a> 2。关键词</h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下列表代表了Groovy语言的所有关键字：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">表格1。关键词</caption>
<colgroup>
<col style="width:25%">
<col style="width:25%">
<col style="width:25%">
<col style="width:25%">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">如</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">断言</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">打破</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">案件</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">抓住</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">类</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">继续</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">定义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">默认</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">做</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">其他</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">枚举</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">延伸</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">假</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">最后</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">对于</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">去</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">如果</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">贯彻</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">进口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">实例</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">新</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">空值</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">包</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">超</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">开关</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">这个</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">扔</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">抛出</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特征</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">真正</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">尝试</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">而</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_identifiers"><a class="anchor" href="#_identifiers"></a> 3。身份标识</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_normal_identifiers"><a class="anchor" href="#_normal_identifiers"></a> 3.1。普通标识符</h3>
<div class="paragraph">
<p>标识符以字母，美元或下划线开头。它们不能以数字开头。</p>
</div>
<div class="paragraph">
<p>字母可以在以下范围内：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>“ a”到“ z”（小写的ascii字母）</p>
</li>
<li>
<p>“ A”到“ Z”（大写字母）</p>
</li>
<li>
<p>'\ u00C0'至'\ u00D6'</p>
</li>
<li>
<p>'\ u00D8'至'\ u00F6'</p>
</li>
<li>
<p>'\ u00F8'至'\ u00FF'</p>
</li>
<li>
<p>'\ u0100'到'\ uFFFE'</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>然后，后面的字符可以包含字母和数字。</p>
</div>
<div class="paragraph">
<p>以下是有效标识符（此处为变量名）的一些示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def name
def item3
def with_underscore
def $dollarStart</code></pre>
</div>
</div>
<div class="paragraph">
<p>但是以下是无效的标识符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def 3tier
def a+b
def a#b</code></pre>
</div>
</div>
<div class="paragraph">
<p>当跟随点时，所有关键字也是有效的标识符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">foo.as
foo.assert
foo.break
foo.case
foo.catch</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quoted_identifiers"><a class="anchor" href="#_quoted_identifiers"></a> 3.2。带引号的标识符</h3>
<div class="paragraph">
<p>带引号的标识符出现在点分表达式的点后。例如， <code>name</code>的一部分<code>person.name</code>表达式可以用<code>person."name"</code>要么<code>person.'name'</code> 。当某些标识符包含Java语言规范禁止的非法字符，但在引用时Groovy允许使用的非法字符时，这尤其有趣。例如，破折号，空格，感叹号等字符。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def map = [:]

map."an identifier with a space and double quotes" = "ALLOWED"
map.'with-dash-signs-and-single-quotes' = "ALLOWED"

assert map."an identifier with a space and double quotes" == "ALLOWED"
assert map.'with-dash-signs-and-single-quotes' == "ALLOWED"</code></pre>
</div>
</div>
<div class="paragraph">
<p>正如我们将在<a href="#all-strings">以下有关字符串的部分中</a>看到的那样，Groovy提供了不同的字符串文字。实际上在点后允许使用所有类型的字符串：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">map.'single quote'
map."double quote"
map.'''triple single quote'''
map."""triple double quote"""
map./slashy string/
map.$/dollar slashy string/$</code></pre>
</div>
</div>
<div class="paragraph">
<p>普通字符串和Groovy的GStrings（插值字符串）之间存在区别，在后一种情况下，将插值插入最终字符串中以评估整个标识符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def firstname = "Homer"
map."Simpson-${firstname}" = "Homer Simpson"

assert map.'Simpson-Homer' == "Homer Simpson"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="all-strings"><a class="anchor" href="#all-strings"></a> 4。弦乐</h2>
<div class="sectionbody">
<div class="paragraph">
<p>文本文字以称为字符串的字符链的形式表示。Groovy让您实例化<code>java.lang.String</code>对象以及GStrings（ <code>groovy.lang.GString</code> ），在其他编程语言中也称为<em>插值字符串</em> 。</p>
</div>
<div class="sect2">
<h3 id="_single_quoted_string"><a class="anchor" href="#_single_quoted_string"></a> 4.1。单引号字符串</h3>
<div class="paragraph">
<p>单引号字符串是一系列用单引号引起来的字符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">'a single-quoted string'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">单引号字符串是普通的<code>java.lang.String</code>并且不支持插值。
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_string_concatenation"><a class="anchor" href="#_string_concatenation"></a> 4.2。字符串串联</h3>
<div class="paragraph">
<p>所有Groovy字符串都可以与<code>+</code>操作员：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert 'ab' == 'a' + 'b'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_triple_single_quoted_string"><a class="anchor" href="#_triple_single_quoted_string"></a> 4.3。三重单引号字符串</h3>
<div class="paragraph">
<p>三重单引号字符串是一系列字符，由单引号的三元组包围：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">'''a triple-single-quoted string'''</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">三重单引号字符串是普通的<code>java.lang.String</code>并且不支持插值。
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>三重单引号字符串可以跨越多行。字符串的内容可以跨越行边界，而无需将字符串分成几段，也不需要串联或换行符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def aMultilineString = '''line one
line two
line three'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果代码是缩进的，例如在类的方法主体中，则字符串将包含缩进的空格。Groovy开发工具包包含使用以下方法去除压痕的方法： <code>String#stripIndent()</code>方法，并与<code>String#stripMargin()</code>带有分隔符的方法，该方法标识要从字符串开头删除的文本。</p>
</div>
<div class="paragraph">
<p>创建字符串时，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def startingAndEndingWithANewline = '''
line one
line two
line three
'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>您会注意到，结果字符串包含换行符作为第一个字符。可以通过用反斜杠转义换行符来删除该字符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def strippedFirstNewline = '''\
line one
line two
line three
'''

assert !strippedFirstNewline.startsWith('\n')</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_escaping_special_characters"><a class="anchor" href="#_escaping_special_characters"></a> 4.3.1。转义特殊字符</h4>
<div class="paragraph">
<p>您可以使用反斜杠字符对单引号进行转义，以避免终止字符串文字：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">'an escaped single quote: \' needs a backslash'</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以使用双反斜杠来转义转义字符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">'an escaped escape character: \\ needs a double backslash'</code></pre>
</div>
</div>
<div class="paragraph">
<p>一些特殊字符还将反斜杠用作转义字符：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:33.3333%">
<col style="width:66.6667%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">转义序列</th>
<th class="tableblock halign-left valign-top">字符</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\ t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">制表</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\ b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">退格键</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\ n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">新队</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\ r</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">回车</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">换页</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">反斜杠</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">单引号字符串中的单引号（对于三重单引号和双引号字符串是可选的）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\“</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双引号字符串中的双引号（对于三重双引号和单引号字符串是可选的）</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>当稍后讨论其他类型的字符串时，我们将看到更多转义细节。</p>
</div>
</div>
<div class="sect3">
<h4 id="_unicode_escape_sequence"><a class="anchor" href="#_unicode_escape_sequence"></a> 4.3.2。Unicode转义序列</h4>
<div class="paragraph">
<p>对于键盘上不存在的字符，可以使用Unicode转义序列：反斜杠，后跟'u'，然后是4个十六进制数字。</p>
</div>
<div class="paragraph">
<p>例如，欧元货币符号可以表示为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">'The Euro currency symbol: \u20AC'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_double_quoted_string"><a class="anchor" href="#_double_quoted_string"></a> 4.4。双引号字符串</h3>
<div class="paragraph">
<p>双引号字符串是一系列用双引号引起来的字符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">"a double-quoted string"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">双引号字符串是普通的<code>java.lang.String</code>如果没有内插表达式，但是<code>groovy.lang.GString</code>实例（如果存在插值）。
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">要转义双引号，可以使用反斜杠字符：“双引号：\”。
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_string_interpolation"><a class="anchor" href="#_string_interpolation"></a> 4.4.1。字符串插值</h4>
<div class="paragraph">
<p>除了单引号和三重单引号的字符串外，任何Groovy表达式都可以插入所有字符串文字中。插值是在评估字符串时用其值替换字符串中占位符的行为。占位符表达式被包围<code>${}</code> 。对于明确的点分表达式，可以省略花括号，即在这种情况下，我们只能使用$前缀。如果GString曾经传递给采用String的方法，则占位符内的表达式值将评估为其字符串表示形式（通过调用<code>toString()</code>在该表达式上），并将生成的String传递给方法。</p>
</div>
<div class="paragraph">
<p>在这里，我们有一个带有占位符的字符串，该字符串引用一个局部变量：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def name = 'Guillaume' // a plain string
def greeting = "Hello ${name}"

assert greeting.toString() == 'Hello Guillaume'</code></pre>
</div>
</div>
<div class="paragraph">
<p>任何Groovy表达式都是有效的，如在本示例中使用算术表达式所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def sum = "The sum of 2 and 3 equals ${2 + 3}"
assert sum.toString() == 'The sum of 2 and 3 equals 5'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">不仅允许在<code>${}</code>占位符，语句也是如此。但是，一条语句的值仅仅是<code>null</code> 。因此，如果在该占位符中插入了多个语句，则最后一个应以某种方式返回要插入的有意义的值。例如，“和1和2的总和等于$ {def a = 1; def b = 2; a + b}”受支持并按预期工作，但是一种好的做法通常是在GString占位符内部坚持简单的表达式。
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>此外<code>${}</code>占位符，我们也可以使用一个<code>$</code>虚线表达式前的符号：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def person = [name: 'Guillaume', age: 36]
assert "$person.name is $person.age years old" == 'Guillaume is 36 years old'</code></pre>
</div>
</div>
<div class="paragraph">
<p>但只能是点缀形式的表达式<code>a.b</code> ， <code>a.b.c</code>等有效。包含圆括号的表达式（例如方法调用，用于闭包的大括号，不属于属性表达式或算术运算符的点）将无效。给定以下数字变量定义：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def number = 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>以下语句将引发<code>groovy.lang.MissingPropertyException</code>因为Groovy认为您正在尝试访问<code>toString</code>该数字的属性，该属性不存在：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">shouldFail(MissingPropertyException) {
    println "$number.toString()"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">你可以想到<code>"$number.toString()"</code>被解析器解释为<code>"${number.toString}()"</code> 。
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>同样，如果表达式不明确，则需要保留花括号：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String thing = 'treasure'
assert 'The x-coordinate of the treasure is represented by treasure.x' ==
    "The x-coordinate of the $thing is represented by $thing.x"   // &lt;= Not allowed: ambiguous!!
assert 'The x-coordinate of the treasure is represented by treasure.x' ==
        "The x-coordinate of the $thing is represented by ${thing}.x"  // &lt;= Curly braces required</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您需要逃脱<code>$</code>要么<code>${}</code> GString中的占位符，使它们按原样显示而无需插值，您只需要使用一个<code>\</code>反斜杠字符以逃避美元符号：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert '$5' == "\$5"
assert '${name}' == "\${name}"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_special_case_of_interpolating_closure_expressions"><a class="anchor" href="#_special_case_of_interpolating_closure_expressions"></a> 4.4.2。内插闭包表达式的特殊情况</h4>
<div class="paragraph">
<p>到目前为止，我们已经看到我们可以在内部插入任意表达式<code>${}</code>占位符，但闭包表达式有特殊情况和表示法。当占位符包含箭头时， <code>${→}</code> ，该表达式实际上是一个闭包表达式-您可以将其视为一个在其前面加有美元的闭包：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def sParameterLessClosure = "1 + 2 == ${-&gt; 3}" <i class="conum" data-value="1"></i><b>(1)</b>
assert sParameterLessClosure == '1 + 2 == 3'

def sOneParamClosure = "1 + 2 == ${ w -&gt; w &lt;&lt; 3}" <i class="conum" data-value="2"></i><b>(2)</b>
assert sOneParamClosure == '1 + 2 == 3'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>闭包是不带参数的无参数闭包。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>在这里，关闭只需要一个<code>java.io.StringWriter</code>参数，您可以在其后面附加内容<code><<</code> leftShift运算符。无论哪种情况，两个占位符都是嵌入式闭包。</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>从外观上看，它似乎是定义要内插的表达式的更详细的方法，但是闭包比单纯的表达式有一个有趣的优点：惰性求值。</p>
</div>
<div class="paragraph">
<p>让我们考虑以下示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def number = 1 <i class="conum" data-value="1"></i><b>(1)</b>
def eagerGString = "value == ${number}"
def lazyGString = "value == ${ -&gt; number }"

assert eagerGString == "value == 1" <i class="conum" data-value="2"></i><b>(2)</b>
assert lazyGString ==  "value == 1" <i class="conum" data-value="3"></i><b>(3)</b>

number = 2 <i class="conum" data-value="4"></i><b>(4)</b>
assert eagerGString == "value == 1" <i class="conum" data-value="5"></i><b>(5)</b>
assert lazyGString ==  "value == 2" <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>我们定义一个<code>number</code>变量包含<code>1</code>然后我们在两个GString中进行插值，作为表达式<code>eagerGString</code>作为封闭<code>lazyGString</code> 。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>我们期望结果字符串包含相同的字符串值1 <code>eagerGString</code> 。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>同样的<code>lazyGString</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i> <b>4</b></td>
<td>然后我们将变量的值更改为新的数字</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i> <b>5</b></td>
<td>使用普通的内插表达式，该值实际上是在创建GString时绑定的。</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i> <b>6</b></td>
<td>但是使用闭包表达式时，每次将GString强制转换为String时都会调用闭包，从而生成包含新数字值的更新字符串。</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">带有多个参数的嵌入式闭包表达式将在运行时生成异常。仅允许使用零个或一个参数的闭包。
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_interoperability_with_java"><a class="anchor" href="#_interoperability_with_java"></a> 4.4.3。与Java的互操作性</h4>
<div class="paragraph">
<p>当某个方法（无论是用Java还是Groovy实现）期望<code>java.lang.String</code> ，但我们通过了<code>groovy.lang.GString</code>例如， <code>toString()</code>自动透明地调用GString的方法。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String takeString(String message) {         <i class="conum" data-value="4"></i><b>(4)</b>
    assert message instanceof String        <i class="conum" data-value="5"></i><b>(5)</b>
    return message
}

def message = "The message is ${'hello'}"   <i class="conum" data-value="1"></i><b>(1)</b>
assert message instanceof GString           <i class="conum" data-value="2"></i><b>(2)</b>

def result = takeString(message)            <i class="conum" data-value="3"></i><b>(3)</b>
assert result instanceof String
assert result == 'The message is hello'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>我们创建一个GString变量</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>我们再次检查它是GString的实例</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>然后，我们将该GString传递给采用String作为参数的方法</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i> <b>4</b></td>
<td>的签名<code>takeString()</code>方法明确表示其唯一的参数是String</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i> <b>5</b></td>
<td>我们还验证该参数确实是String而不是GString。</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_gstring_and_string_hashcodes"><a class="anchor" href="#_gstring_and_string_hashcodes"></a> 4.4.4。GString和String hashCodes</h4>
<div class="paragraph">
<p>尽管可以使用内插的字符串代替普通的Java字符串，但是它们以特定的方式与字符串不同：它们的hashCodes不同。纯Java字符串是不可变的，而生成的GString的String表示形式可能有所不同，具体取决于其内插值。即使对于相同的结果字符串，GString和String也没有相同的hashCode。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert "one: ${1}".hashCode() != "one: 1".hashCode()</code></pre>
</div>
</div>
<div class="paragraph">
<p>应避免将GString和具有不同hashCode值的String用作G键作为Map键，尤其是当我们尝试使用String而不是GString检索关联的值时。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def key = "a"
def m = ["${key}": "letter ${key}"]     <i class="conum" data-value="1"></i><b>(1)</b>

assert m["a"] == null                   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>该地图是使用键对为GString的初始对创建的</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>当我们尝试使用String键获取值时，我们将找不到它，因为String和GString具有不同的hashCode值</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_triple_double_quoted_string"><a class="anchor" href="#_triple_double_quoted_string"></a> 4.5。三重双引号字符串</h3>
<div class="paragraph">
<p>三重双引号字符串的行为类似于双引号字符串，此外，它们是多行的，例如三重单引号字符串。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def name = 'Groovy'
def template = """
    Dear Mr ${name},

    You're the winner of the lottery!

    Yours sincerly,

    Dave
"""

assert template.toString().contains('Groovy')</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">双引号或单引号都不需要在三重双引号字符串中转义。
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_slashy_string"><a class="anchor" href="#_slashy_string"></a> 4.6。斜线</h3>
<div class="paragraph">
<p>除了通常引用的字符串，Groovy还提供了斜线字符串，它们使用<code>/</code>作为开始和结束定界符。斜线字符串对于定义正则表达式和模式特别有用，因为不需要转义反斜杠。</p>
</div>
<div class="paragraph">
<p>斜线字符串的示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def fooPattern = /.*foo.*/
assert fooPattern == '.*foo.*'</code></pre>
</div>
</div>
<div class="paragraph">
<p>仅需使用正斜杠将反斜杠转义：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def escapeSlash = /The character \/ is a forward slash/
assert escapeSlash == 'The character / is a forward slash'</code></pre>
</div>
</div>
<div class="paragraph">
<p>斜线字符串为多行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def multilineSlashy = /one
    two
    three/

assert multilineSlashy.contains('\n')</code></pre>
</div>
</div>
<div class="paragraph">
<p>斜线字符串可以被认为是定义GString的另一种方式，但是具有不同的转义规则。因此，它们支持插值：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def color = 'blue'
def interpolatedSlashy = /a ${color} car/

assert interpolatedSlashy == 'a blue car'</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_special_cases"><a class="anchor" href="#_special_cases"></a> 4.6.1。特别案例</h4>
<div class="paragraph">
<p>空的斜线字符串不能用双斜杠表示，因为Groovy解析器将其理解为行注释。这就是为什么以下断言实际上不会编译的原因，因为它看起来像是一个非终止的语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert '' == //</code></pre>
</div>
</div>
<div class="paragraph">
<p>由于斜线字符串主要是为了使regexp更容易而设计的，所以有些东西是GString中的错误，例如<code>$()</code>要么<code>$5</code>将使用斜线字符串。</p>
</div>
<div class="paragraph">
<p>请记住，不需要转义反斜杠。另一种思考方式是实际上不支持转义。斜线字符串<code>/\t/</code>将不包含制表符，而是反斜杠，后跟字符“ t”。仅允许对斜杠字符进行转义，即<code>/\/folder/</code>将是一个斜线字符串，包含<code>'/folder'</code> 。斜杠转义的结果是，斜线字符串不能以反斜杠结尾。否则，它将逃脱斜线字符串终止符。您可以改用特殊技巧， <code>/ends with slash ${'\'}/</code> 。但最好不要在这种情况下使用斜线字符串。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dollar_slashy_string"><a class="anchor" href="#_dollar_slashy_string"></a> 4.7。美元斜线字符串</h3>
<div class="paragraph">
<p>美元斜线字符串是多行GString，以空格分隔<code>$/</code>和结束<code>/$</code> 。转义字符是美元符号，它可以转义另一个美元或正斜杠。但是，美元和正斜杠都不需要转义，除了可以逃避以GString占位符序列开头的字符串子序列的美元，或者如果您需要逃避以结束美元斜杠字符串定界符开头的序列，则不需要。</p>
</div>
<div class="paragraph">
<p>这是一个例子：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def name = "Guillaume"
def date = "April, 1st"

def dollarSlashy = $/
    Hello $name,
    today we're ${date}.

    $ dollar sign
    $$ escaped dollar sign
    \ backslash
    / forward slash
    $/ escaped forward slash
    $$$/ escaped opening dollar slashy
    $/$$ escaped closing dollar slashy
/$

assert [
    'Guillaume',
    'April, 1st',
    '$ dollar sign',
    '$ escaped dollar sign',
    '\\ backslash',
    '/ forward slash',
    '/ escaped forward slash',
    '$/ escaped opening dollar slashy',
    '/$ escaped closing dollar slashy'
].every { dollarSlashy.contains(it) }</code></pre>
</div>
</div>
<div class="paragraph">
<p>它的创建是为了克服斜线转义规则的某些限制。当它的转义规则适合您的字符串内容时（通常，如果它有一些斜杠您不想转义），请使用它。</p>
</div>
</div>
<div class="sect2">
<h3 id="_string_summary_table"><a class="anchor" href="#_string_summary_table"></a> 4.8。字符串汇总表</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:20%">
<col style="width:20%">
<col style="width:20%">
<col style="width:20%">
<col style="width:20%">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">字串名称</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">字符串语法</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">插补</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">多行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">转义符</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">单引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'…​'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">三重单引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'''…​'''</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">双引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"…​"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">三重双引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"""…​"""</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">粗暴的</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/…​/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">美元大跌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$/…​/$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_characters"><a class="anchor" href="#_characters"></a> 4.9。性格</h3>
<div class="paragraph">
<p>与Java不同，Groovy没有明确的字符文字。但是，您可以通过三种不同的方式明确地将Groovy字符串作为实际字符：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">char c1 = 'A' <i class="conum" data-value="1"></i><b>(1)</b>
assert c1 instanceof Character

def c2 = 'B' as char <i class="conum" data-value="2"></i><b>(2)</b>
assert c2 instanceof Character

def c3 = (char)'C' <i class="conum" data-value="3"></i><b>(3)</b>
assert c3 instanceof Character</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>通过在声明变量时通过显式指定字符来显式<code>char</code>类型</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>通过使用类型强制<code>as</code>算子</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>通过使用强制转换为char操作</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">当字符保留在变量中时，第一个选项<em class="conum">1</em>很有趣，而当必须将char值作为方法调用的参数传递时，其他两个选项（ <em class="conum">2</em>和<em class="conum">3</em> ）更有趣。
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_numbers"><a class="anchor" href="#_numbers"></a> 5，号码</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy支持不同种类的整数文字和十进制文字，并得到通常的支持<code>Number</code> Java类型。</p>
</div>
<div class="sect2">
<h3 id="_integral_literals"><a class="anchor" href="#_integral_literals"></a> 5.1。整体文字</h3>
<div class="paragraph">
<p>整数文字类型与Java中的相同：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>byte</code></p>
</li>
<li>
<p><code>char</code></p>
</li>
<li>
<p><code>short</code></p>
</li>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>long</code></p>
</li>
<li>
<p><code>java.lang.BigInteger</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>您可以使用以下声明创建这些类型的整数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// primitive types
byte  b = 1
char  c = 2
short s = 3
int   i = 4
long  l = 5

// infinite precision
BigInteger bi =  6</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您使用<code>def</code>关键字，整数的类型会有所不同：它将适应可以容纳该数字的类型的容量。</p>
</div>
<div class="paragraph">
<p>对于正数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def a = 1
assert a instanceof Integer

// Integer.MAX_VALUE
def b = 2147483647
assert b instanceof Integer

// Integer.MAX_VALUE + 1
def c = 2147483648
assert c instanceof Long

// Long.MAX_VALUE
def d = 9223372036854775807
assert d instanceof Long

// Long.MAX_VALUE + 1
def e = 9223372036854775808
assert e instanceof BigInteger</code></pre>
</div>
</div>
<div class="paragraph">
<p>以及负数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def na = -1
assert na instanceof Integer

// Integer.MIN_VALUE
def nb = -2147483648
assert nb instanceof Integer

// Integer.MIN_VALUE - 1
def nc = -2147483649
assert nc instanceof Long

// Long.MIN_VALUE
def nd = -9223372036854775808
assert nd instanceof Long

// Long.MIN_VALUE - 1
def ne = -9223372036854775809
assert ne instanceof BigInteger</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_alternative_non_base_10_representations"><a class="anchor" href="#_alternative_non_base_10_representations"></a> 5.1.1。非基数10的替代表示</h4>
<div class="paragraph">
<p>数字也可以用二进制，八进制，十六进制和十进制表示。</p>
</div>
<div class="sect4">
<h5 id="_binary_literal"><a class="anchor" href="#_binary_literal"></a>二进制文字</h5>
<div class="paragraph">
<p>二进制数字以a开头<code>0b</code>字首：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">int xInt = 0b10101111
assert xInt == 175

short xShort = 0b11001001
assert xShort == 201 as short

byte xByte = 0b11
assert xByte == 3 as byte

long xLong = 0b101101101101
assert xLong == 2925l

BigInteger xBigInteger = 0b111100100001
assert xBigInteger == 3873g

int xNegativeInt = -0b10101111
assert xNegativeInt == -175</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_octal_literal"><a class="anchor" href="#_octal_literal"></a>八进制文字</h5>
<div class="paragraph">
<p>八进制数字以以下格式表示： <code>0</code>后跟八进制数字。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">int xInt = 077
assert xInt == 63

short xShort = 011
assert xShort == 9 as short

byte xByte = 032
assert xByte == 26 as byte

long xLong = 0246
assert xLong == 166l

BigInteger xBigInteger = 01111
assert xBigInteger == 585g

int xNegativeInt = -077
assert xNegativeInt == -63</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_hexadecimal_literal"><a class="anchor" href="#_hexadecimal_literal"></a>十六进制文字</h5>
<div class="paragraph">
<p>十六进制数以以下格式表示： <code>0x</code>后跟十六进制数字。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">int xInt = 0x77
assert xInt == 119

short xShort = 0xaa
assert xShort == 170 as short

byte xByte = 0x3a
assert xByte == 58 as byte

long xLong = 0xffff
assert xLong == 65535l

BigInteger xBigInteger = 0xaaaa
assert xBigInteger == 43690g

Double xDouble = new Double('0x1.0p0')
assert xDouble == 1.0d

int xNegativeInt = -0x77
assert xNegativeInt == -119</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decimal_literals"><a class="anchor" href="#_decimal_literals"></a> 5.2。小数文字</h3>
<div class="paragraph">
<p>十进制文字类型与Java中的相同：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>double</code></p>
</li>
<li>
<p><code>java.lang.BigDecimal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>您可以使用以下声明创建这些类型的十进制数字：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// primitive types
float  f = 1.234
double d = 2.345

// infinite precision
BigDecimal bd =  3.456</code></pre>
</div>
</div>
<div class="paragraph">
<p>小数可以使用指数，而<code>e</code>要么<code>E</code>指数字母，后跟可选符号，以及代表指数的整数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert 1e3  ==  1_000.0
assert 2E4  == 20_000.0
assert 3e+1 ==     30.0
assert 4E-2 ==      0.04
assert 5e-1 ==      0.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>为了进行精确的十进制数计算，Groovy选择了<code>java.lang.BigDecimal</code>作为其十进制数字类型。另外，两者<code>float</code>和<code>double</code>支持，但需要显式的类型声明，类型强制或后缀。即使<code>BigDecimal</code>是十进制数字的默认值，此类文字在方法或闭包中接受<code>float</code>要么<code>double</code>作为参数类型。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">不能使用二进制，八进制或十六进制表示形式来表示小数。
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_underscore_in_literals"><a class="anchor" href="#_underscore_in_literals"></a> 5.3。在文字下划线</h3>
<div class="paragraph">
<p>在编写长文字数字时，很难确定一些数字是如何组合在一起的，例如，成千上万的单词，单词等的组合。通过允许在数字文字中加下划线，可以更容易地发现这些组：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">long creditCardNumber = 1234_5678_9012_3456L
long socialSecurityNumbers = 999_99_9999L
double monetaryAmount = 12_345_132.12
long hexBytes = 0xFF_EC_DE_5E
long hexWords = 0xFFEC_DE5E
long maxLong = 0x7fff_ffff_ffff_ffffL
long alsoMaxLong = 9_223_372_036_854_775_807L
long bytes = 0b11010010_01101001_10010100_10010010</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_number_type_suffixes"><a class="anchor" href="#_number_type_suffixes"></a> 5.4。数字类型后缀</h3>
<div class="paragraph">
<p>我们可以给数字（包括二进制，八进制和十六进制）加一个后缀（见下表），以强制其具有特定类型。</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:33.3333%">
<col style="width:66.6667%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">类型</th>
<th class="tableblock halign-left valign-top">后缀</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G</code>要么<code>g</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">长</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L</code>要么<code>l</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>I</code>要么<code>i</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G</code>要么<code>g</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D</code>要么<code>d</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">浮动</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>F</code>要么<code>f</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>例子：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert 42I == new Integer('42')
assert 42i == new Integer('42') // lowercase i more readable
assert 123L == new Long("123") // uppercase L more readable
assert 2147483648 == new Long('2147483648') // Long type used, value too large for an Integer
assert 456G == new BigInteger('456')
assert 456g == new BigInteger('456')
assert 123.45 == new BigDecimal('123.45') // default BigDecimal type used
assert 1.200065D == new Double('1.200065')
assert 1.234F == new Float('1.234')
assert 1.23E23D == new Double('1.23E23')
assert 0b1111L.class == Long // binary
assert 0xFFi.class == Integer // hexadecimal
assert 034G.class == BigInteger // octal</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_math_operations"><a class="anchor" href="#_math_operations"></a> 5.5。数学运算</h3>
<div class="paragraph">
<p>尽管稍后将讨论<a href="#_operators">运算符</a> ，但重要的是讨论数学运算的行为及其结果类型是什么。</p>
</div>
<div class="paragraph">
<p>除了除法和功率二进制运算（见下文），</p>
</div>
<div class="ulist">
<ul>
<li>
<p>之间的二进制运算<code>byte</code> ， <code>char</code> ， <code>short</code>和<code>int</code>导致<code>int</code></p>
</li>
<li>
<p>涉及二元运算<code>long</code>与<code>byte</code> ， <code>char</code> ， <code>short</code>和<code>int</code>导致<code>long</code></p>
</li>
<li>
<p>涉及二元运算<code>BigInteger</code>和任何其他整数类型导致<code>BigInteger</code></p>
</li>
<li>
<p>涉及二元运算<code>BigDecimal</code>与<code>byte</code> ， <code>char</code> ， <code>short</code> ， <code>int</code>和<code>BigInteger</code>导致<code>BigDecimal</code></p>
</li>
<li>
<p>之间的二进制运算<code>float</code> ， <code>double</code>和<code>BigDecimal</code>导致<code>double</code></p>
</li>
<li>
<p>两个之间的二进制运算<code>BigDecimal</code>导致<code>BigDecimal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>下表总结了这些规则：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
<col style="width:10%">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">字节</th>
<th class="tableblock halign-left valign-top">烧焦</th>
<th class="tableblock halign-left valign-top">短</th>
<th class="tableblock halign-left valign-top">整型</th>
<th class="tableblock halign-left valign-top">长</th>
<th class="tableblock halign-left valign-top">大整数</th>
<th class="tableblock halign-left valign-top">浮动</th>
<th class="tableblock halign-left valign-top">双</th>
<th class="tableblock halign-left valign-top">大十进制</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>字节</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">长</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>烧焦</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">长</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>短</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">长</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>整型</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">长</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>长</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">长</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>大整数</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大整数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>浮动</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>双</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>大十进制</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">大十进制</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">由于Groovy的运算符重载，通常的算术运算符也可以与<code>BigInteger</code>和<code>BigDecimal</code> ，这与Java中必须使用显式方法对这些数字进行运算的方式不同。
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="integer_division"><a class="anchor" href="#integer_division"></a> 5.5.1。除法运算符的情况</h4>
<div class="paragraph">
<p>除法运算符<code>/</code> （和<code>/=</code>进行划分和分配） <code>double</code>如果任何一个操作数为a的结果<code>float</code>要么<code>double</code>和<code>BigDecimal</code>否则返回结果（当两个操作数均为整数类型的任何组合时） <code>short</code> ， <code>char</code> ， <code>byte</code> ， <code>int</code> ， <code>long</code> ， <code>BigInteger</code>要么<code>BigDecimal</code> ）。</p>
</div>
<div class="paragraph">
<p><code>BigDecimal</code>除法与<code>divide()</code>如果除法是精确的（即产生可以在相同精度和小数范围内表示的结果）的方法，或者使用<code>MathContext</code> <a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#precision()">精度</a>为两个操作数<a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#precision()">精度</a>的最大值加上一个额外的精度10，最大<a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#scale()">标度</a>为10和最大操作数标度。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">对于Java中的整数除法，您应该使用<code>intdiv()</code> Groovy没有提供专用的整数除法运算符。
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="power_operator"><a class="anchor" href="#power_operator"></a> 5.5.2。电力经营者的情况</h4>
<div class="paragraph">
<p>电源操作由<code>**</code>运算符，带有两个参数：底数和指数。幂运算的结果取决于其操作数以及运算的结果（尤其是如果结果可以表示为整数值时）。</p>
</div>
<div class="paragraph">
<p>Groovy的幂运算使用以下规则来确定结果类型：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如果指数是十进制值</p>
<div class="ulist">
<ul>
<li>
<p>如果结果可以表示为<code>Integer</code> ，然后返回<code>Integer</code></p>
</li>
<li>
<p>否则结果可以表示为<code>Long</code> ，然后返回<code>Long</code></p>
</li>
<li>
<p>否则返回一个<code>Double</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>如果指数是整数值</p>
<div class="ulist">
<ul>
<li>
<p>如果指数严格为负，则返回<code>Integer</code> ， <code>Long</code>要么<code>Double</code>如果结果值适合该类型</p>
</li>
<li>
<p>如果指数为正或零</p>
<div class="ulist">
<ul>
<li>
<p>如果基数是<code>BigDecimal</code> ，然后返回<code>BigDecimal</code>结果值</p>
</li>
<li>
<p>如果基数是<code>BigInteger</code> ，然后返回<code>BigInteger</code>结果值</p>
</li>
<li>
<p>如果基数是<code>Integer</code> ，然后返回<code>Integer</code>如果结果值适合其中，否则为<code>BigInteger</code></p>
</li>
<li>
<p>如果基数是<code>Long</code> ，然后返回<code>Long</code>如果结果值适合其中，否则为<code>BigInteger</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>我们可以通过一些示例来说明这些规则：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// base and exponent are ints and the result can be represented by an Integer
assert    2    **   3    instanceof Integer    //  8
assert   10    **   9    instanceof Integer    //  1_000_000_000

// the base is a long, so fit the result in a Long
// (although it could have fit in an Integer)
assert    5L   **   2    instanceof Long       //  25

// the result can't be represented as an Integer or Long, so return a BigInteger
assert  100    **  10    instanceof BigInteger //  10e20
assert 1234    ** 123    instanceof BigInteger //  170515806212727042875...

// the base is a BigDecimal and the exponent a negative int
// but the result can be represented as an Integer
assert    0.5  **  -2    instanceof Integer    //  4

// the base is an int, and the exponent a negative float
// but again, the result can be represented as an Integer
assert    1    **  -0.3f instanceof Integer    //  1

// the base is an int, and the exponent a negative int
// but the result will be calculated as a Double
// (both base and exponent are actually converted to doubles)
assert   10    **  -1    instanceof Double     //  0.1

// the base is a BigDecimal, and the exponent is an int, so return a BigDecimal
assert    1.2  **  10    instanceof BigDecimal //  6.1917364224

// the base is a float or double, and the exponent is an int
// but the result can only be represented as a Double value
assert    3.4f **   5    instanceof Double     //  454.35430372146965
assert    5.6d **   2    instanceof Double     //  31.359999999999996

// the exponent is a decimal value
// and the result can only be represented as a Double value
assert    7.8  **   1.9  instanceof Double     //  49.542708423868476
assert    2    **   0.1f instanceof Double     //  1.0717734636432956</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_booleans"><a class="anchor" href="#_booleans"></a> 6。布尔值</h2>
<div class="sectionbody">
<div class="paragraph">
<p>布尔值是一种特殊的数据类型，用于表示真值： <code>true</code>和<code>false</code> 。将此数据类型用于跟踪真/假<a href="#_conditional_operators">条件的</a>简单标志。</p>
</div>
<div class="paragraph">
<p>布尔值可以存储在变量中，并分配给字段，就像其他任何数据类型一样：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def myBooleanVariable = true
boolean untypedBooleanVar = false
booleanField = true</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>true</code>和<code>false</code>是仅有的两个原始布尔值。但是，可以使用<a href="#_bitwise_and_logical_operators">逻辑运算符</a>表示更复杂的布尔表达式。</p>
</div>
<div class="paragraph">
<p>另外，Groovy具有<a href="core-semantics.html#Groovy-Truth">特殊的规则</a> （通常称为<em>Groovy Truth</em> ），用于将非布尔对象强制为布尔值。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lists"><a class="anchor" href="#_lists"></a> 7。清单</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy使用逗号分隔的值列表（用方括号括起来）表示列表。Groovy列表是普通的JDK <code>java.util.List</code> ，因为Groovy没有定义自己的集合类。定义列表文字时使用的具体列表实现为<code>java.util.ArrayList</code>默认情况下，除非您决定另行指定，否则我们将在后面介绍。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def numbers = [1, 2, 3]         <i class="conum" data-value="1"></i><b>(1)</b>

assert numbers instanceof List  <i class="conum" data-value="2"></i><b>(2)</b>
assert numbers.size() == 3      <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>我们定义一个列表号，以逗号分隔并用方括号括起来，然后将该列表分配给变量</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>该列表是Java的一个实例<code>java.util.List</code>接口</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>列表的大小可以用<code>size()</code>方法，并显示我们的列表包含3个元素</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>在上面的示例中，我们使用了同类列表，但是您也可以创建包含异构类型值的列表：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def heterogeneous = [1, "a", true]  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>这里的列表包含一个数字，一个字符串和一个布尔值</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>我们提到默认情况下，列表文字实际上是<code>java.util.ArrayList</code> ，但是由于可以在列表中使用类型强制，因此可以为列表使用其他后备类型<code>as</code>运算符，或使用变量的显式类型声明：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def arrayList = [1, 2, 3]
assert arrayList instanceof java.util.ArrayList

def linkedList = [2, 3, 4] as LinkedList    <i class="conum" data-value="1"></i><b>(1)</b>
assert linkedList instanceof java.util.LinkedList

LinkedList otherLinked = [3, 4, 5]          <i class="conum" data-value="2"></i><b>(2)</b>
assert otherLinked instanceof java.util.LinkedList</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>我们将强制与<code>as</code>运算子明确要求<code>java.util.LinkedList</code>实作</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>我们可以说保存列表文字的变量是类型<code>java.util.LinkedList</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>您可以使用<code>[]</code>下标运算符（用于读取和设置值），带有正索引或负索引来访问列表末尾的元素以及范围，并使用<code><<</code> leftShift运算符可将元素追加到列表：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def letters = ['a', 'b', 'c', 'd']

assert letters[0] == 'a'     <i class="conum" data-value="1"></i><b>(1)</b>
assert letters[1] == 'b'

assert letters[-1] == 'd'    <i class="conum" data-value="2"></i><b>(2)</b>
assert letters[-2] == 'c'

letters[2] = 'C'             <i class="conum" data-value="3"></i><b>(3)</b>
assert letters[2] == 'C'

letters &lt;&lt; 'e'               <i class="conum" data-value="4"></i><b>(4)</b>
assert letters[ 4] == 'e'
assert letters[-1] == 'e'

assert letters[1, 3] == ['b', 'd']         <i class="conum" data-value="5"></i><b>(5)</b>
assert letters[2..4] == ['C', 'd', 'e']    <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>访问列表的第一个元素（从零开始的计数）</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>使用负索引访问列表的最后一个元素：-1是列表末尾的第一个元素</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>使用分配为列表的第三个元素设置新值</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i> <b>4</b></td>
<td>使用<code><<</code> leftShift运算符，将元素添加到列表的末尾</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i> <b>5</b></td>
<td>一次访问两个元素，返回包含这两个元素的新列表</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i> <b>6</b></td>
<td>使用范围来访问列表中从开始到结束元素位置的值的范围</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>由于列表本质上可以是异构的，因此列表还可以包含其他列表以创建多维列表：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def multi = [[0, 1], [2, 3]]     <i class="conum" data-value="1"></i><b>(1)</b>
assert multi[1][0] == 2          <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>定义数字列表</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>访问最顶部列表的第二个元素和内部列表的第一个元素</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arrays"><a class="anchor" href="#_arrays"></a> 8。数组</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy将数组的列表符号重复使用，但是要制作此类文字数组，您需要通过强制或类型声明显式定义数组的类型。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String[] arrStr = ['Ananas', 'Banana', 'Kiwi']  <i class="conum" data-value="1"></i><b>(1)</b>

assert arrStr instanceof String[]    <i class="conum" data-value="2"></i><b>(2)</b>
assert !(arrStr instanceof List)

def numArr = [1, 2, 3] as int[]      <i class="conum" data-value="3"></i><b>(3)</b>

assert numArr instanceof int[]       <i class="conum" data-value="4"></i><b>(4)</b>
assert numArr.size() == 3</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>使用显式变量类型声明定义字符串数组</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>断言我们创建了一个字符串数组</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>使用以下命令创建一个整数数组<code>as</code>算子</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i> <b>4</b></td>
<td>断言我们创建了一个原始整数数组</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>您还可以创建多维数组：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def matrix3 = new Integer[3][3]         <i class="conum" data-value="1"></i><b>(1)</b>
assert matrix3.size() == 3

Integer[][] matrix2                     <i class="conum" data-value="2"></i><b>(2)</b>
matrix2 = [[1, 2], [3, 4]]
assert matrix2 instanceof Integer[][]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>您可以定义新数组的边界</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>或者声明一个数组而不指定其边界</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>访问数组元素的方式与列表相同：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">String[] names = ['Cédric', 'Guillaume', 'Jochen', 'Paul']
assert names[0] == 'Cédric'     <i class="conum" data-value="1"></i><b>(1)</b>

names[2] = 'Blackdrag'          <i class="conum" data-value="2"></i><b>(2)</b>
assert names[2] == 'Blackdrag'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>检索数组的第一个元素</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>将数组的第三个元素的值设置为新值</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">Groovy不支持Java的数组初始化器符号，因为用Groovy闭包符号可能会误解大括号。
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maps"><a class="anchor" href="#_maps"></a> 9。地图</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy有时有时在其他语言中称为字典或关联数组，具有地图功能。映射将键与值相关联，将键和值之间用冒号分隔，将每个键/值对之间用逗号分隔，并将整个键和值括在方括号中。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def colors = [red: '#FF0000', green: '#00FF00', blue: '#0000FF']   <i class="conum" data-value="1"></i><b>(1)</b>

assert colors['red'] == '#FF0000'    <i class="conum" data-value="2"></i><b>(2)</b>
assert colors.green  == '#00FF00'    <i class="conum" data-value="3"></i><b>(3)</b>

colors['pink'] = '#FF00FF'           <i class="conum" data-value="4"></i><b>(4)</b>
colors.yellow  = '#FFFF00'           <i class="conum" data-value="5"></i><b>(5)</b>

assert colors.pink == '#FF00FF'
assert colors['yellow'] == '#FFFF00'

assert colors instanceof java.util.LinkedHashMap</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>我们定义了一个字符串颜色名称的映射，并与它们的十六进制编码的html颜色相关联</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>我们使用下标符号来检查与<code>red</code>键</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>我们还可以使用属性符号来声明绿色的十六进制表示形式</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i> <b>4</b></td>
<td>同样，我们可以使用下标符号来添加新的键/值对</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i> <b>5</b></td>
<td>或属性符号，添加<code>yellow</code>颜色</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">当使用名称作为键时，我们实际上在映射中定义了字符串键。
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">Groovy创建的地图实际上是<code>java.util.LinkedHashMap</code> 。
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>如果您尝试访问地图中不存在的钥匙：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">assert colors.unknown == null</code></pre>
</div>
</div>
<div class="paragraph">
<p>您将检索一个<code>null</code>结果。</p>
</div>
<div class="paragraph">
<p>在上面的示例中，我们使用了字符串键，但是您也可以将其他类型的值用作键：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def numbers = [1: 'one', 2: 'two']

assert numbers[1] == 'one'</code></pre>
</div>
</div>
<div class="paragraph">
<p>在这里，我们使用数字作为键，因为数字可以明确地识别为数字，因此Groovy不会像前面的示例那样创建字符串键。但是请考虑您要传递一个变量来代替键的情况，以使该变量的值成为键：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def key = 'name'
def person = [key: 'Guillaume']      <i class="conum" data-value="1"></i><b>(1)</b>

assert !person.containsKey('name')   <i class="conum" data-value="2"></i><b>(2)</b>
assert person.containsKey('key')     <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>的<code>key</code>与<code>'Guillaume'</code>名称实际上是<code>"key"</code>字符串，而不是与<code>key</code>变量</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>该地图不包含<code>'name'</code>键</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>相反，地图包含一个<code>'key'</code>键</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">您还可以传递带引号的字符串以及键：[“ name”：“ Guillaume”]。如果您的密钥字符串不是有效的标识符，则这是强制性的，例如，如果您想创建一个包含如下哈希值的字符串密钥，例如：[“ street-name”：“ Main street”]。
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>当需要在地图定义中将变量值作为键传递时，必须用括号将变量或表达式括起来：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">person = [(key): 'Guillaume']        <i class="conum" data-value="1"></i><b>(1)</b>

assert person.containsKey('name')    <i class="conum" data-value="2"></i><b>(2)</b>
assert !person.containsKey('key')    <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i> <b>1个</b></td>
<td>这次，我们围绕<code>key</code>带括号的变量，以指示解析器我们传递变量而不是定义字符串键</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i> <b>2</b></td>
<td>该地图确实包含<code>name</code>键</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i> <b>3</b></td>
<td>但是地图不包含<code>key</code>和以前一样</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">版本2.5.8<br>上次更新时间2019-08-02 18:30:29 UTC</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>

</body></html>