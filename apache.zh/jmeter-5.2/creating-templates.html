<html ><head>
<link rel="stylesheet" type="text/css" href="./css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户指南：可自定义模板</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="./images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="./images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<strong>可定制的模板</strong></font>
</td></tr>
<tr><td>
<blockquote>
<p>本文档介绍了如何创建可定制的模板。
            </p><table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="folder_structure"><strong>1文件夹结构</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>模板功能使用bin / templates文件夹，其中包含：<br>

                        </p><ul>
                            <li>templates.xml，用于声明要使用的模板的文件</li>
                            <li>一些.jmx和.jmx.fmkr文件是模板</li>
                        </ul>
                    <p></p><p>看起来是这样的：</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/templates/template_folder.png"><br>
<font size="-1">图1-模板文件夹</font></td></tr></tbody></table>

                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="template_creation"><strong>2模板声明</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="basic_template_declaration"><strong>2.1基本模板声明</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>首先，您必须声明您的模板。为此，请查看templates.xml文件。<br>该文件尊重DTD<br>以下是templates.xml中已经存在的Recording模板声明：</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/templates/templates_xml.png"><br>
<font size="-1">图2-记录模板声明</font></td></tr></tbody></table>模板声明如下：<br>

                        <ul>
                            <li><tt class="code">模板</tt>元素，其中包含以下标记中描述的信息</li>
                            <li><tt class="code">名称</tt>元素，其中包含用户将看到的模板名称</li>
                            <li><tt class="code">fileName</tt>元素，其中包含模板的相对路径。</li>
                            <li>使用html描述模板的<tt class="code">description</tt>元素</li>
                            <li><tt class="code">可选</tt>参数标签（稍后将讨论）</li>
                        </ul>
                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="customizable_template_declaration"><strong>2.2可自定义的模板声明</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>假设我们要使用与2.1部分完全相同的Recording模板，但是要选择将保存视图结果树的记录的xml文件的名称。<br>
<br>为此，我们将使用parameters标记告诉JMeter向用户询问有关文件的名称：</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/templates/templates_xml_parameters.png"><br>
<font size="-1">图3-带有参数的记录模板</font></td></tr></tbody></table>

                        <p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>您可以在参数标签中放置任意数量的参数标签。</td></tr>
</tbody></table>
<p></p>让我们看看这里发生了什么变化。<br>首先，海关模板是<tt class="code">.jmx.fmkr</tt>文件，而不仅仅是<tt class="code">.jmx</tt>文件。<br>
<br>最后，我们添加了一个<tt class="code">参数</tt>标签。<br>如您在图像中看到的， <tt class="code">parameter</tt>标签包含<tt class="code">parameter</tt>标签。<br>参数标签为空，包含2个属性：<ul>
                            <li><tt class="code">key</tt>是您将要求用户填写的参数名称。</li>
                            <li>顾名思义， <tt class="code">defaultValue</tt>是用户将在参数中看到的默认值。</li>
                        </ul>
                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="template_file"><strong>3模板文件</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="basic_template_file"><strong>3.1基本模板文件</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>模板文件是声明模板时在fileName标记中使用的文件。模板文件只是JMeter测试计划的保存。
                    </p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="customizable_template_file"><strong>3.2可定制的模板文件</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>在2.2节中，我们看到了自定义模板文件是.jmx.fmkr文件。<br>它们之间的唯一区别是.jmx.fmkr将由JMeter分析<br>检测海关标签。如果找到了自定义标签，JMeter将尝试用用户的相应给定值替换它。<br>
<br>自定义标签的定义如下：</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>[=&lt;key&gt;]</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>这基于<a href="https://freemarker.apache.org/docs/dgui_misc_alternativesyntax.html#dgui_misc_alternativesyntax_interpolation">Freemarker替代插值语法</a> 。让我们用一个例子来说明它是如何工作的。<br>考虑record.jmx模板文件的以下部分：<br>

                        <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/templates/template_recording_filename.png"><br>
<font size="-1">图4-record.jmx保存文件</font></td></tr></tbody></table>周围的区域对应于将保存“查看结果树”输出的xml文件的名称。照原样，当您使用模板时，您将始终具有相同的保存文件名： <tt class="code">recording.xml</tt> 。<br>
<br>要使其可自定义，请通过以下方式在templates.xml文件中更改录制模板声明：<br>2.2部分中所示的一种。然后，将recording.jmx文件重命名为recording.jmx.fmkr。<br>
<br>完成后，将以上所选行更改为此：<div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>&lt;stringProp name=&quot;filename&quot;&gt;[=xmlFileName]&lt;/stringProp&gt;</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>

                        <br>结束了 ！使用此配置，如果您选择使用记录模板，JMeter将询问您一个xmlFileName（对应于声明中的键值）。
                        <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/templates/template_parameters_window.png"><br>
<font size="-1">图5-JMeter询问您要为密钥输入的值</font></td></tr></tbody></table>然后，您将在放置[= xmlFileName]标签的创建模板中找到期望值：<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/templates/template_recording_retrieved_value.png"><br>
<font size="-1">图6-值已更改</font></td></tr></tbody></table>

                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>