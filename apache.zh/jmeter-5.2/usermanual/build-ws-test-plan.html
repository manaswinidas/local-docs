<html ><head>
<link rel="stylesheet" type="text/css" href="../../docs/css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户手册：构建SOAP WebService测试计划</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../../docs/images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../../docs/images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-point-to-point-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-ldapext-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="building"><strong>9。建立WebService测试计划</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在本节中，您将学习如何创建<a href="build-test-plan.html">测试计划</a>以测试WebService。您将创建五个将请求发送到一页的用户。另外，您将告诉用户两次运行测试。因此，请求总数为（5个用户）x（1个请求）x（重复2次）= 10个HTTP请求。要构建测试计划，您将使用以下元素： <a href="test_plan.html#thread_group">线程组</a> ， <a href="../usermanual/component_reference.html#HTTP_Request">HTTP请求</a>和<a href="../usermanual/component_reference.html#Aggregate_Graph">聚合图</a> 。</p><p>如果采样器似乎从Web服务中获取错误，请仔细检查SOAP消息并确保格式正确。特别是，请确保<tt class="code">xmlns</tt>属性与WSDL完全相同。如果xml名称空间不同，则Web服务可能会返回错误。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="soap_webservice_template"><strong>9.1创建WebService测试计划</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在我们的测试计划中，我们将使用.NET Web服务。我们将不讨论编写Web服务的详细信息。如果您不知道如何编写网络服务，请使用Google for webservice并熟悉编写Java和.NET的网络服务。应当注意，.NET和Java实现Web服务的方式之间存在显着差异。该主题太宽泛，无法在用户手册中涵盖。请参考其他资料，以更好地了解这些差异。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>JMeter按照它们在树中出现的顺序发送请求。</td></tr>
</tbody></table>
<p></p>
<p>首先使用菜单<span class="menuchoice"><span class="guimenuitem">文件</span> → <span class="guimenuitem">模板…，</span></span>然后选择模板“ <tt class="code">构建SOAP Web服务测试计划</tt> ”。然后，单击“ <tt class="code">创建</tt> ”按钮。

</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="1050" height="684" src="../../docs/images/screenshots/ws_template.png"><br>
<font size="-1">图9.1.0。Web服务模板</font></td></tr></tbody></table>更改以下内容：<ol>
<li>在“ <tt class="code">HTTP请求默认值</tt> ”中，更改“ <tt class="code">IP服务器名称</tt> ”</li>
<li>在“ <tt class="code">肥皂请求</tt> ”中，更改“ <tt class="code">路径：</tt> ”<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="955" height="501" src="../../docs/images/screenshots/ws_http_request.png"><br>
<font size="-1">图9.1.1 Web服务路径</font></td></tr></tbody></table>

</li>
</ol>
<p></p><p>接下来，选择“ <tt class="code">HTTP标头管理器</tt> ”并更新“ <tt class="code">SOAPAction</tt> ”标头以匹配您的Web服务。在这种情况下，某些Web服务可能不使用SOAPAction来将其删除。<br>当前，只有.NET使用SOAPAction，因此所有其他Web服务通常都具有空白的SOAPAction。该列表包括JWSDP，Weblogic，Axis，Mind Electric Glue和gSoap。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="1327" height="348" src="../../docs/images/screenshots/ws_header.png"><br>
<font size="-1">图9.1.2 Web服务标题</font></td></tr></tbody></table>
<p>最后一步是将SOAP消息粘贴到“正文<tt class="code">数据</tt> ”文本区域中。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="955" height="501" src="../../docs/images/screenshots/ws_http_request.png"><br>
<font size="-1">图9.1.3 Web服务主体</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_users"><strong>9.2添加用户</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p><a href="test_plan.html#thread_group">线程组</a>告诉JMeter您要模拟的用户数量，用户应该发送请求的频率以及应该发送多少请求。</p><p>如果尚未选择线程组元素，则在树中选择它。现在，您应该在JMeter窗口的右侧部分中看到“线程组控制面板”（请参见下面的图9.2）</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup.png"><br>
<font size="-1">图9.2。具有默认值的线程组</font></td></tr></tbody></table>
<p>首先为我们的线程组提供一个更具描述性的名称。在名称字段中，输入JMeter Users。</p><p>接下来，将用户数量（称为线程）增加到10。</p><p>在下一个字段（加速周期）中，保留默认值0秒。该属性告诉JMeter启动每个用户之间要延迟多长时间。例如，如果您输入5秒钟的加速期，JMeter将在5秒钟结束时完成所有用户的启动。因此，如果我们有5个用户和5秒钟的加速期，则启动用户之间的延迟将为1秒（5个用户/ 5秒= 1个用户每秒）。如果将值设置为0，那么JMeter将立即启动所有用户。</p><p>最后，清除标记为“ <tt class="code">Forever</tt> ”的复选框，然后在“循环计数”字段中输入值<tt class="code">2</tt> 。该属性告诉JMeter重复测试多少次。如果输入的循环计数值为<tt class="code">0</tt> ，那么JMeter将仅运行一次测试。要让JMeter重复运行您的测试计划，请选择<tt class="code">永久</tt>复选框。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>在大多数应用程序中，您必须手动接受在控制面板中所做的更改。但是，在JMeter中，控制面板会在您进行更改时自动接受它们。如果更改元素的名称，则在离开控制面板后（例如，选择另一个树元素时），树将使用新文本进行更新。</td></tr>
</tbody></table>
<p></p>
<p>有关完整的JMeter用户线程组，请参见图9.2。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup2.png"><br>
<font size="-1">图9.3。JMeter用户线程组</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_listener"><strong>9.3添加侦听器以查看存储测试结果</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>您需要添加到测试计划中的最后一个元素是<a href="component_reference.html#listeners">Listener</a> 。该元素负责将HTTP请求的所有结果存储在文件中，并提供数据的可视模型。</p><p>选择JMeter Users元素并添加一个<a href="../usermanual/component_reference.html#Aggregate_Graph">聚合图</a>侦听器（ <span class="menuchoice"><span class="guimenuitem">添加</span> → <span class="guimenuitem">侦听器</span> → <span class="guimenuitem">聚合图</span></span> ）。接下来，您需要指定输出文件的目录和文件名。您可以在“文件名”字段中键入它，或选择“浏览”按钮并浏览到目录，然后输入文件名。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="1256" height="802" src="../../docs/images/screenshots/ws_listener.png"><br>
<font size="-1">图9.4。图结果侦听器</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="rest_webservice"><strong>9.4 Rest Web服务</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>测试REST Web服务非常相似，因为您只需要在HTTP请求中进行修改</p><ul>
<li><tt class="code">方法</tt> ：选择要测试的一个</li>
<li>正文<tt class="code">数据</tt> ：可以是JSON，XML或任何自定义文本</li>
</ul>您可能还需要修改“ <tt class="code">HTTP标头管理器</tt> ”以选择正确的“ <tt class="code">内容类型</tt> ”<p></p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-point-to-point-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-ldapext-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>