<html ><head>
<link rel="stylesheet" type="text/css" href="../css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="author" value="JMeter developers">
<meta name="email" value="dev@jmeter.apache.org">

<title>Apache JMeter-Apache JMeter分布式测试分步指南</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="jmeter_proxy_step_by_step.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="distributed-testing"><strong>25Apache JMeter分布式测试分步指南</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>本简短教程说明了如何使用多个系统执行压力测试。在我们开始之前，有几件事要检查。
</p><ul>
  <li>系统上的防火墙已关闭或打开了正确的端口。</li>
  <li>所有客户端都在同一子网中。</li>
  <li>如果使用<tt class="code">192.xxx</tt>或<tt class="code">10.xxx</tt> IP地址，则服务器位于同一子网中。如果服务器不使用<tt class="code">192.xx</tt>或<tt class="code">10.xx</tt> IP地址，则应该没有任何问题。</li>
  <li>确保JMeter可以访问服务器。</li>
  <li>确保在所有系统上使用相同版本的JMeter和Java。混合版本将无法正常工作。</li>
  <li>您已经<a href="remote-test.html#setup_ssl">为RMI设置了SSL</a>或将其禁用。</li>
</ul><p>一旦确定系统已准备就绪，就可以进行远程测试了。本教程假定您已经在所有系统上安装了JMeter。JMeter的工作方式是一个主控制器在多个从属系统上启动测试。
</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>在本教程中，我们仅使用GUI模式进行演示。在现实生活中，您应该使用CLI模式（NON GUI）启动负载测试</td></tr>
</tbody></table>
<p></p>
<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="610" height="462" src="../images/screenshots/distributed-jmeter.svg"><br>
<font size="-1">一个主机控制多个从机</font></td></tr></tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="terminology"><strong>25.1术语</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>在深入了解逐步说明之前，最好先定义术语并确保定义清楚。
</p><dl>
  <dt>主</dt><dd>运行JMeter GUI（控制测试）的系统</dd>
  <dt>奴隶</dt><dd>运行<tt class="code">jmeter-server</tt>的系统，该系统从GUI接收命令并将请求发送到目标系统</dd>
  <dt>目标</dt><dd>我们计划进行压力测试的Web服务器</dd>
</dl><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="602" height="360" src="../images/screenshots/distributed-names.svg"><br>
<font size="-1">系统类别</font></td></tr></tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="step-by-step"><strong>25.2分步介绍</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<ol>
  <li>在从属系统上，转到<tt class="code">jmeter / bin</tt>目录并执行<tt class="code">jmeter-server.bat</tt> （Unix上的<tt class="code">jmeter-server</tt> ）。
  </li>
  <li>在充当控制台的主系统上，打开Windows资源管理器并转到<tt class="code">jmeter / bin</tt>目录</li>
  <li>在文本编辑器中打开<tt class="code">jmeter.properties</tt></li>
  <li>编辑行<tt class="code">remote_hosts = 127.0.0.1</tt></li>
  <li>添加IP地址。例如，如果我有在<tt class="code">192.168.0.10</tt> ，...， <tt class="code">192.168.0.15</tt>上运行的JMeter服务器，则该条目将如下所示：<div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>remote_hosts=192.168.0.10,192.168.0.11,192.168.0.12,192.168.0.13,192.168.0.14</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>

  </li>
  <li>启动JMeter。</li>
  <li>打开您要使用的测试计划</li>
</ol><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="483" height="266" src="../images/screenshots/example-simple-plan.png"><br>
<font size="-1">简单的测试计划</font></td></tr></tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="starting"><strong>25.2开始测试</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>此时，您就可以开始负载测试了。如果要再次检查从属系统是否正常运行， <tt class="code">请</tt>在编辑器中打开<tt class="code">jmeter.log</tt> 。您应该在日志中看到以下内容。
</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
Writing log file to: /XXXX/XXXXX/bin/jmeter-server.log
Created remote object: UnicastServerRef [liveRef: [endpoint:[192.X.X.X:XXXXX](local),objID:[-6a665beb:15a2c8b9419:-7fff, 3180474504933847586]]]
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p>如果没有看到此消息，则表明<tt class="code">jmeter-server</tt>没有正确启动。有关调试问题<a href="#tips">的提示</a> ， <a href="#tips">请转到提示部分</a> 。有两种方法可以启动测试：单个系统和所有系统。
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="start-single-client"><strong>25.3启动单个客户端</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<ol>
  <li>点击顶部的运行</li>
  <li>选择远程启动</li>
  <li>选择IP地址</li>
</ol><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="490" height="196" src="../images/screenshots/example-remote-start.png"><br>
<font size="-1">启动一个奴隶</font></td></tr></tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="start-all-clients"><strong>25.4启动所有客户端</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<ol>
  <li>点击顶部的运行</li>
  <li>选择全部远程启动或使用<span class="keycombo"><span class="keysym">Ctrl</span> + <span class="keysym">Shift</span> + <span class="keysym">R</span></span></li>
</ol><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="410" height="155" src="../images/screenshots/example-remote-start-all.png"><br>
<font size="-1">启动所有奴隶</font></td></tr></tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="limitations"><strong>25.5局限性</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>分布式测试有一些基本限制。以下是无特定顺序的已知项目列表。
</p><ol>
  <li>没有代理，RMI无法跨子网通信；因此，没有代理，JMeter也不能。</li>
  <li>从2.9版开始，JMeter将剥离响应数据的所有测试结果发送到控制台，这使我们能够减少对网络IO的影响。确保监视网络流量，以免引起流量争用</li>
  <li>在2-3 GHz CPU（最新CPU）上运行的单个JMeter客户端可以处理1000-2000个线程，具体取决于测试的类型。</li>
</ol></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="additional-resources"><strong>25.6其他资源</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>
  <a href="https://cwiki.apache.org/confluence/display/JMETER/JMeterFAQ#JMeterFAQ-Howtodoremotetestingthe'properway'?">Wiki页面上的远程测试</a>
</p><p>
  <a href="remote-test.html">用户手册中的远程测试</a>
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="tips"><strong>25.7小费</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>在某些情况下，防火墙可能仍会阻止RMI通信。
</p><h3>防病毒和防火墙</h3><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>应在负载测试期间停止防病毒，因为它会严重影响时间安排，从而导致错误的结果。</td></tr>
</tbody></table>
<p></p>
<p>需要从Windows服务停止防火墙，或者至少需要打开某些端口。
</p><ol>
  <li>打开控制面板</li>
  <li>开放式管理工具</li>
  <li>双击服务</li>
  <li>转到Symantec Antivirus，右键单击并选择“停止”。</li>
</ol><h3>Windows防火墙</h3><ol>
  <li>打开网络连接</li>
  <li>选择网络连接</li>
  <li>右键单击并选择属性</li>
  <li>选择高级标签</li>
  <li>取消选中Internet连接防火墙</li>
</ol><h3>的Linux</h3><p>在Linux上，默认情况下可能会打开iptables。有关说明，请参阅<a href="remote-test.html">用户手册中</a>的<a href="remote-test.html">远程测试</a>
</p><p>在RedHat（或衍生产品）上，默认情况下iptables是打开的。执行</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>service iptables stop</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>停止Linux防火墙或确保您打开正确的端口。
<p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="jmeter_proxy_step_by_step.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>