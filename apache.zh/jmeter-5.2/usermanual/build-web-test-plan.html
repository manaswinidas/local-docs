<html ><head>
<link rel="stylesheet" type="text/css" href="../../docs/css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户手册：构建Web测试计划</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../../docs/images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../../docs/images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-adv-web-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="test_plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="building"><strong>4。制定网络测试计划</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在本节中，您将学习如何创建基本的<a href="build-test-plan.html">测试计划</a>来测试网站。您将创建五个用户，这些用户将请求发送到JMeter网站上的两个页面。另外，您将告诉用户两次运行测试。因此，请求总数为（5个用户）x（2个请求）x（重复2次）= 20个HTTP请求。要构建测试计划，您将使用以下元素： <a href="test_plan.html#thread_group">线程组</a> ， <a href="../usermanual/component_reference.html#HTTP_Request">HTTP请求</a> ， <a href="../usermanual/component_reference.html#HTTP_Request_Defaults">HTTP请求默认值</a>和<a href="../usermanual/component_reference.html#Graph_Results">图形结果</a> 。</p><p>有关更高级的测试计划，请参阅<a href="build-adv-web-test-plan.html">构建高级Web测试计划</a> 。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_users"><strong>4.1添加用户</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>您要对每个JMeter测试计划进行的第一步是添加一个<a href="test_plan.html#thread_group">线程组</a>元素。线程组告诉JMeter您要模拟的用户数量，用户应多久发送一次请求以及应发送多少次请求。</p><p>继续并通过首先选择“测试计划”来添加ThreadGroup元素，单击鼠标右键以获得“添加”菜单，然后选择“添加”→“线程组”。</p><p>现在，您应该在“测试计划”下看到“线程组”元素。如果没有看到该元素，则通过单击“测试计划”元素来“扩展”测试计划树。</p><p>接下来，您需要修改默认属性。如果尚未选择线程组元素，则在树中选择它。现在，您应该在JMeter窗口的右侧看到线程组控制面板（请参见下面的图4.1）</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup.png"><br>
<font size="-1">图4.1。具有默认值的线程组</font></td></tr></tbody></table>
<p>首先为我们的线程组提供一个更具描述性的名称。在名称字段中，输入JMeter Users。</p><p>接下来，将用户数量（称为线程）增加到5。</p><p>在下一个字段“加速周期”中，保留默认值1秒。该属性告诉JMeter启动每个用户之间要延迟多长时间。例如，如果您输入5秒钟的加速期，JMeter将在5秒钟结束时完成所有用户的启动。因此，如果我们有5个用户和5秒钟的加速期，则启动用户之间的延迟将为1秒（5个用户/ 5秒= 1个用户每秒）。如果将值设置为0，那么JMeter将立即启动所有用户。</p><p>最后，在“循环计数”字段中输入值2。该属性告诉JMeter重复测试多少次。如果输入的循环计数值为1，则JMeter将仅运行一次测试。要让JMeter重复运行您的测试计划，请选择永久复选框。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>在大多数应用程序中，您必须手动接受在控制面板中所做的更改。但是，在JMeter中，控制面板会在您进行更改时自动接受它们。如果更改元素的名称，则在离开控制面板后（例如，选择另一个树元素时），树将使用新文本进行更新。</td></tr>
</tbody></table>
<p></p>
<p>有关完整的JMeter用户线程组，请参见图4.2。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup2.png"><br>
<font size="-1">图4.2。JMeter用户线程组</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_defaults"><strong>4.2添加默认的HTTP请求属性</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>现在我们已经定义了用户，是时候定义他们将要执行的任务了。在本部分中，您将为HTTP请求指定默认设置。然后，在第4.3节中，您将添加使用您在此处指定的某些默认设置的HTTP请求元素。</p><p>首先选择“ JMeter用户（线程组）”元素。单击鼠标右键获得“添加”菜单，然后选择“添加”→“配置元素”→“ HTTP请求默认值”。然后选择此新元素以查看其控制面板（请参见图4.3）。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/http-defaults1.png"><br>
<font size="-1">图4.3。HTTP请求默认值</font></td></tr></tbody></table>
<p>与大多数JMeter元素一样，“ <a href="../usermanual/component_reference.html#HTTP_Request_Defaults">HTTP请求默认值”</a>控制面板具有一个您可以修改的名称字段。在此示例中，将此字段保留为默认值。</p><p>跳至下一个字段，即Web服务器的服务器名称/ IP。对于要构建的测试计划，所有HTTP请求都将发送到同一Web服务器jmeter.apache.org。在字段中输入此域名。这是我们将指定默认值的唯一字段，因此请保留其余字段的默认值。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>HTTP Request Defaults元素不会告诉JMeter发送HTTP请求。它仅定义HTTP Request元素使用的默认值。</td></tr>
</tbody></table>
<p></p>
<p>有关完整的HTTP Request Defaults元素，请参见图4.4。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/http-defaults2.png"><br>
<font size="-1">图4.4。我们的测试计划的HTTP默认值</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_cookie_support"><strong>4.3添加Cookie支持</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>几乎所有的Web测试都应使用cookie支持，除非您的应用程序明确不使用cookie。要添加cookie支持，只需将<a href="../usermanual/component_reference.html#HTTP_Cookie_Manager">HTTP Cookie Manager</a>添加到测试计划中的每个<a href="test_plan.html#thread_group">线程组</a> 。这将确保每个线程都有自己的cookie，但会在所有<a href="../usermanual/component_reference.html#HTTP_Request">HTTP Request</a>对象之间共享。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/http-cookie-manager.png"><br>
<font size="-1">图4.5。HTTP Cookie管理器</font></td></tr></tbody></table>
<p>要添加<a href="../usermanual/component_reference.html#HTTP_Cookie_Manager">HTTP Cookie管理器</a> ，只需选择“ <a href="test_plan.html#thread_group">线程组”</a> ，然后从“编辑”菜单或右键单击弹出菜单中选择“添加”→“配置元素”→“ HTTP Cookie管理器”。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_requests"><strong>4.4添加HTTP请求</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在我们的测试计划中，我们需要发出两个HTTP请求。第一个用于JMeter主页（http://jmeter.apache.org/），第二个用于Change页面（http://jmeter.apache.org/changes.html）。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>JMeter按照它们在树中出现的顺序发送请求。</td></tr>
</tbody></table>
<p></p>
<p>首先将第一个<a href="../usermanual/component_reference.html#HTTP_Request">HTTP请求</a>添加到JMeter Users元素（添加→采样器→HTTP请求）。然后，在树中选择HTTP Request元素并编辑以下属性（请参见图4.6）：</p><ol>
<li>将名称字段更改为“主页”。</li>
<li>将路径字段设置为“ /”。请记住，您不必设置服务器名称字段，因为您已经在HTTP Request Defaults元素中指定了该值。</li>
</ol>
<p></p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/http-request1.png"><br>
<font size="-1">图4.6。JMeter主页的HTTP请求</font></td></tr></tbody></table>
<p>接下来，添加第二个HTTP请求并编辑以下属性（请参见图4.7：</p><ol>
<li>将名称字段更改为“更改”。</li>
<li>将“路径”字段设置为“ /changes.html”。</li>
</ol>
<p></p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/http-request2.png"><br>
<font size="-1">图4.7。JMeter变更页面的HTTP请求</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_listener"><strong>4.5添加侦听器以查看存储测试结果</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>您需要添加到测试计划中的最后一个元素是<a href="component_reference.html#listeners">Listener</a> 。该元素负责将HTTP请求的所有结果存储在文件中，并提供数据的可视模型。</p><p>选择JMeter Users元素并添加一个<a href="../usermanual/component_reference.html#Graph_Results">Graph Results</a>侦听器（添加→侦听器→后端侦听器）。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="logging_in"><strong>4.6登录网站</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>这里不是这种情况，但是某些网站要求您先登录才能允许您执行某些操作。在网络浏览器中，登录名将显示为用户名和密码的表单，以及用于提交表单的按钮。该按钮生成POST请求，将表单项的值作为参数传递。
</p><p>要在JMeter中执行此操作，请添加HTTP请求，并将方法设置为POST。您需要知道表单使用的字段名称以及目标页面。这些可以通过检查登录页面的代码来找到。[如果很难做到，则可以使用<a href="component_reference.html#HTTP_Proxy_Server">JMeter Proxy Recorder</a>记录登录顺序。]将路径设置为提交按钮的目标。单击添加按钮两次，然后输入用户名和密码详细信息。有时，登录表单包含其他隐藏字段。这些也将需要添加。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/http_login.png"><br>
<font size="-1">图4.8。示例HTTP登录请求</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="choose_users"><strong>4.7选择同一用户或不同用户</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在创建测试计划时，在每个线程组迭代中，我们可以选择模拟运行多个迭代的同一用户，或模拟运行一个迭代的不同用户。您可以在线程组元素上配置此行为，并使HTTP缓存管理器，HTTP Cookie管理器，HTTP授权管理器受此设置控制。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup3.png"><br>
<font size="-1">图4.9。选择相同或不同的用户</font></td></tr></tbody></table>
<p>您可以选择在CookieManager / CacheManager /授权管理器中清除cookie /缓存内容/授权，也可以选择由线程组控制。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup4.png"><br>
<font size="-1">图4.10。使用线程组控制CookieManager</font></td></tr></tbody></table>
<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup5.png"><br>
<font size="-1">图4.11。使用线程组控制CacheManager</font></td></tr></tbody></table>
<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup6.png"><br>
<font size="-1">图4.12。使用线程组控制授权管理器</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-adv-web-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="test_plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>