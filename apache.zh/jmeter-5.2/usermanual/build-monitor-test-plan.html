<html ><head>
<link rel="stylesheet" type="text/css" href="../../docs/css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户手册：构建监视器测试计划（自JMeter 3.2起已删除）</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../../docs/images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../../docs/images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="listeners.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-topic-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="building"><strong>12建立监控器测试计划（自JMeter 3.2起已删除）</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>请注意，自JMeter 3.1起不推荐使用此功能</td></tr>
</tbody></table>
<p></p>
<p>在本节中，您将学习如何创建<a href="build-test-plan.html">测试计划</a>以监视Web服务器。监视器对于压力测试和系统管理很有用。该监视器与压力测试一起使用，可提供有关服务器性能的其他信息。它还使在客户端上查看服务器性能和响应时间之间的关系更加容易。作为系统管理工具，该监视器提供了一种从一个控制台监视多个服务器的简便方法。该监视器旨在与Tomcat 5中的状态servlet一起使用。从理论上讲，任何支持JMX（Java管理扩展）的servlet容器都可以移植状态servlet以提供相同的信息。</p><p>对于那些想将监视器与其他servlet或EJB容器一起使用的人，Tomcat的状态servlet应该与其他容器一起使用以进行内存统计，而无需进行任何修改。要获取线程信息，您将需要更改MBeanServer查找以检索正确的MBean。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_server"><strong>12.1添加服务器</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>第一步是添加<a href="test_plan.html#thread_group">线程组</a>元素。线程组告诉JMeter您想要的线程数。始终使用<tt class="code">1</tt> ，因为我们使用JMeter作为监视器。对于不熟悉服务器监视器的用户来说，这非常重要。通常，对单个服务器使用多个线程是很糟糕的，并且会产生很大的压力。
</p><p>继续并通过首先选择“测试计划”来添加ThreadGroup元素，单击鼠标右键以获取“ <span class="menuchoice"><span class="guimenuitem">添加”</span></span>菜单，然后选择“ <span class="menuchoice"><span class="guimenuitem">添加”</span> →“ <span class="guimenuitem">ThreadGroup”</span></span> 。</p><p>现在，您应该在“测试计划”下看到“线程组”元素。如果没有看到该元素，请单击“测试计划”元素来“扩展”测试计划树。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup.png"><br>
<font size="-1">图12.1具有默认值的线程组</font></td></tr></tbody></table>
<p>将循环计数更改为永久（或较大数目），以便生成足够的样本。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_auth"><strong>12.2 HTTP身份验证管理器</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>将<a href="../usermanual/component_reference.html#HTTP_Authorization_Manager">HTTP授权管理器</a>添加到线程组元素（ <span class="menuchoice"><span class="guimenuitem">添加</span> → <span class="guimenuitem">配置元素</span> → <span class="guimenuitem">HTTP授权管理器</span></span> ）。输入您的Web服务器的用户名和密码。
</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>重要说明：该监视器仅适用于Tomcat5 build 5.0.19及更高版本。有关如何设置Tomcat的说明，请参阅tomcat 5文档。
</td></tr>
</tbody></table>
<p></p>

<p></p><ol>
<li>将基本网址留空</li>
<li>输入用户名</li>
<li>输入密码</li>
</ol></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_request"><strong>12.3添加HTTP请求</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>将<a href="../usermanual/component_reference.html#HTTP_Request">HTTP请求</a>添加到线程组元素（ <span class="menuchoice"><span class="guimenuitem">添加</span> → <span class="guimenuitem">采样器</span> → <span class="guimenuitem">HTTP请求</span></span> ）。然后，在树中选择HTTP Request元素并编辑以下属性）：</p><ol>
<li>将名称字段更改为“ <tt class="code">服务器状态</tt> ”。</li>
<li>输入IP地址或主机名</li>
<li>输入端口号</li>
<li>如果使用的是Tomcat，则将“路径”字段设置为“ <tt class="code">/ manager / status</tt> ”。</li>
<li>以大写形式添加名为“ <tt class="code">XML</tt> ”的请求参数。给它一个小写的“ <tt class="code">true</tt> ”值。</li>
<li>检查采样器底部的“ <tt class="code">用作监视器</tt> ”</li>
</ol>
<p></p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_timer"><strong>12.4添加常量计时器</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在该线程组中添加一个计时器（ <span class="menuchoice"><span class="guimenuitem">Add</span> → <span class="guimenuitem">Timer</span> → <span class="guimenuitem">Constant Timer</span></span> ）。在“ <tt class="code">线程延迟</tt> ”框中输入<tt class="code">5000</tt>毫秒。通常，使用少于5秒的间隔会增加服务器的压力。在生产环境中部署监视器之前，请找出可接受的间隔。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_listener"><strong>12.5添加侦听器以存储结果</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>如果要保存服务器的原始结果，请添加一个简单的数据<a href="component_reference.html#listeners">侦听器</a> 。如果要保存计算的统计信息，请在侦听器中输入文件名。如果要同时保存原始数据和统计信息，请确保使用不同的文件名。</p><p>选择线程组元素并添加一个<a href="../usermanual/component_reference.html#Simple_Data_Writer">简单数据编写</a> <span class="menuchoice"><span class="guimenuitem">器侦听器</span></span> （ <span class="menuchoice"><span class="guimenuitem">添加</span> → <span class="guimenuitem">侦听器</span> → <span class="guimenuitem">简单数据编写器</span></span> ）。接下来，您需要指定输出文件的目录和文件名。您可以在“文件名”字段中键入它，或选择“浏览”按钮并浏览到目录，然后输入文件名。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="add_monitor_listener"><strong>12.6添加监控器结果</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>添加<a href="component_reference.html#listeners">监听器</a>通过选择测试计划元件（ <span class="menuchoice"><span class="guimenuitem">添加</span> → <span class="guimenuitem">监听</span> → <span class="guimenuitem">监视器结果</span></span> ）。
</p><p>默认情况下，侦听器将从样本响应中的第一个连接器中选择结果。连接器前缀字段可用于选择其他连接器。如果指定，则侦听器将选择与前缀匹配的第一个连接器。如果找不到匹配项，则选择第一个连接器。
</p><p>监视结果侦听器中有两个选项卡。第一个是“ <tt class="code">健康</tt> ”，它显示的最后一个样本的状态的监测器接收。第二个选项卡是“ <tt class="code">Performance</tt> ”，它显示了服务器性能的历史视图。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/monitor_health.png"><br>
<font size="-1"></font></td></tr></tbody></table>
<p>关于如何计算健康状况的快速注释。通常，如果服务器内存不足或达到最大线程数，则服务器将崩溃。对于Tomcat 5，一旦线程用完，就将请求放入队列，直到线程可用为止。容器之间线程的相对重要性各不相同，因此，当前的实现使用50/50来保持保守。使用线程管理效率更高的容器可能不会看到任何性能下降，但是使用的内存肯定会显示影响。</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/monitor_screencap.png"><br>
<font size="-1"></font></td></tr></tbody></table>
<p>性能图显示了四行。可用内存行显示了当前分配的块中还剩下多少可用内存。Tomcat 5返回最大内存，但未绘制图形。在调整良好的环境中，服务器应永远不会达到最大内存。</p><p>请注意该图形在图形的两边都有标题。左边是百分比，右边是已死/健康。如果内存行快速上升和下降，则可能表明内存跳动。在这种情况下，最好使用Borland OptimizeIt或JProbe来分析应用程序。您想要看到的是负载，内存和线程的常规模式。任何不稳定的行为通常都表明性能不佳或某种错误。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="listeners.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-topic-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>