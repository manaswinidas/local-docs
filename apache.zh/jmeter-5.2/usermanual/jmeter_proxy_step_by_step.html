<html ><head>
<link rel="stylesheet" type="text/css" href="../css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="author" value="JMeter developers">
<meta name="email" value="dev@jmeter.apache.org">

<title>Apache JMeter-Apache JMeter HTTP（S）测试脚本记录器</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="junitsampler_tutorial.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="jmeter_distributed_testing_step_by_step.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="script-recorder"><strong>26Apache JMeter HTTP（S）测试脚本记录器</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>本教程尝试解释记录HTTP / HTTPS的确切步骤。对于JMeter的新手来说，创建测试计划的一种简单方法是使用Recorder。
</p><table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="configuration"><strong>26.1 JMeter配置</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>自JMeter 2.10起，记录已得到改进，可以更好地处理嵌入式资源并即时创建证书。要启用这些功能，JMeter使用<tt class="code">keytool</tt>实用程序（JRE / JDK中提供），因此您需要确保配置正确，请<a href="https://cwiki.apache.org/confluence/display/JMETER/TestRecording210">在开始之前</a>阅读<a href="https://cwiki.apache.org/confluence/display/JMETER/TestRecording210">此Wiki页面。</a>
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="basic-instructions"><strong>26.2基本说明</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<ol>
  <li>转到<tt class="code">JMETER_HOME / bin</tt>并与<tt class="code">jmeterw.bat</tt>在Windows和<tt class="code">jmeter.sh</tt>在Linux / Unix启动JMeter的</li>
  <li>在菜单栏上选择<tt class="code">模板…</tt></li>
  <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/Select-Templates-Icon.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  <li>在列表上选择“ <tt class="code">录制模板</tt> ”</li>
  <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/Select-Recording-Template.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  <li>生成完整的<tt class="code">测试计划</tt></li>
  <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/Test_Generated.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  <li>在“ <tt class="code">HTTP请求默认值”</tt>元素中：<dl>
      <dt><tt class="code">服务器名称或IP</tt></dt><dd>输入<tt class="code">example.com</tt></dd>
      <dt><tt class="code">路径</tt></dt><dd>留着空白</dd>
    </dl>
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/http-config/http-request-defaults.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  </li>
  <li>返回<tt class="code">HTTP（S）测试脚本记录器</tt> ，然后单击顶部的“ <tt class="code">开始”</tt>按钮。</li>
  <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/Proxy_Run.png"><br>
<font size="-1"></font></td></tr></tbody></table>

</ol><p>这将启动用于拦截浏览器请求的JMeter代理服务器。将在<tt class="code">JMETER_HOME / bin</tt>文件夹中生成一个名为<tt class="code">ApacheJMeterTemporaryRootCA.crt的</tt>文件。在浏览器中安装此证书，如果您不知道如何做，请阅读<a href="component_reference.html#HTTP%28S%29_Test_Script_Recorder">安装用于HTTPS记录的JMeter CA证书</a>
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="configure-browser"><strong>26.3配置浏览器以使用JMeter代理</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>此时，JMeter的代理正在运行。在本练习中，我们将使用Iceweasel / Firefox浏览JMeter网站上的某些页面。
</p><ol>
  <li>启动Iceweasel / Firefox，但不要关闭JMeter。</li>
  <li>在工具栏中，单击<span class="menuchoice"><span class="guimenuitem">编辑</span> → <span class="guimenuitem">首选项</span></span> （或<span class="menuchoice"><span class="guimenuitem">工具</span> → <span class="guimenuitem">首选项，</span></span>或键入<tt class="code">about：preferences＃advanced</tt>作为URL）。这应该带来选项。
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="914" height="566" src="../images/screenshots/firefox-network-settings.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  </li>
  <li>选择<tt class="code">高级</tt>选项卡，然后选择<tt class="code">网络</tt>选项卡</li>
  <li>单击顶部附近的<tt class="code">设置</tt>按钮。</li>
  <li>在新的弹出窗口上，选中“ <tt class="code">手动代理配置”</tt> 。现在应该启用地址和端口字段。
    <dl>
      <dt><tt class="code">地址</tt></dt><dd>输入<tt class="code">localhost</tt>或系统的IP地址</dd>
      <dt><tt class="code">港口</tt></dt><dd>输入<tt class="code">8888</tt> 。</dd>
    </dl>
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="532" height="240" src="../images/screenshots/firefox-configure-proxy.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  </li>
  <li>选中<tt class="code">对所有协议使用此代理服务器</tt></li>
  <li>单击<tt class="code">确定</tt>按钮。这应该使您返回浏览器</li>
</ol></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="navigation-recording"><strong>26.4记录您的导航</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<ol>
  <li>使用浏览器，在顶部的<tt class="code">地址</tt>栏中，输入<tt class="code">http://example.com/index.html</tt> （将<tt class="code">example.com</tt>替换为您的网站地址）。然后按<tt class="code">Enter</tt>键。</li>
  <li>单击站点页面上的一些链接。</li>
  <li>关闭浏览器并打开JMeter窗口。</li>
</ol><p>展开<tt class="code">线程组</tt> ，应该有几个采样器。此时，测试计划可以按原样保存。
</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>如果忘记添加默认的HTTP请求设置，则必须手动删除服务器名称和端口。</td></tr>
</tbody></table>
<p></p>

<p></p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="258" height="194" src="../images/screenshots/example-recording.png"><br>
<font size="-1"></font></td></tr></tbody></table>
<p>在此示例中，没有任何默认请求参数。如果所有页面都需要特定的请求参数，则请求的默认值是在其中添加条目的位置。
</p><ol>
  <li>选择<tt class="code">线程组</tt>并更改一些默认值：<dl>
      <dt><tt class="code">线程数（用户）</tt></dt><dd>输入<tt class="code">5</tt></dd>
      <dt><tt class="code">加速周期（以秒为单位）</tt></dt><dd>不要换</dd>
      <dt><tt class="code">循环计数</tt></dt><dd>输入<tt class="code">100</tt></dd>
    </dl>
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="357" height="288" src="../images/screenshots/example-thread-group.png"><br>
<font size="-1"></font></td></tr></tbody></table>

  </li>
</ol></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="validate-script"><strong>26.5验证脚本</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>现在，我们需要在运行测试计划之前验证脚本。保存测试计划。
</p><p>右键单击<tt class="code">线程组</tt> <span class="menuchoice"><span class="guimenuitem">验证</span></span>

  </p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/Validate-Test-Plan.png"><br>
<font size="-1"></font></td></tr></tbody></table>

<p></p><p>如果一切正常，请检查“ <tt class="code">查看结果树”</tt>元素。
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="correlate-start"><strong>26.6可变化和关联脚本</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>在某些脚本中，我们将需要：</p><ul>
  <li>修改一些输入（登录名，密码，搜索词等）</li>
  <li>在两个请求之间关联一些数据（会话变量，…）</li>
</ul>
<p></p><p>为了可变性，我们可以使用：</p><ul>
  <li><tt class="code">CSV数据集配置</tt>以从csv文件获取输入数据</li>
  <li>JMeter的功能类似<tt class="code">__counter</tt> ， <tt class="code">__time</tt> ，…</li>
  <li>等等</li>
</ul>
<p></p><p>为了进行关联，我们可以使用<tt class="code">JSON提取器</tt> ， <tt class="code">正则表达式提取器</tt>等<tt class="code">后处理器</tt>从请求中获取数据，并将其注入另一个请求中。</p><p>要查找要关联的数据，最简单的方法是使用“ <tt class="code">查看结果树”中</tt>的“搜索”功能。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/Search-Correlation.png"><br>
<font size="-1"></font></td></tr></tbody></table>

<p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="test-start"><strong>26.7开始测试</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>此时，我们准备运行我们的测试计划，看看会发生什么。准备运行测试时，有两种方法：</p><ol>
  <li>使用gui，但不建议进行大负载测试。</li>
  <li>用命令行。</li>
</ol>
<p></p><p>解决方案1，带有gui，但仅在调试阶段，请使用CLI模式（非GUI）进行负载测试。</p><p>
   <span class="menuchoice"><span class="guimenuitem">运行</span> → <span class="guimenuitem">开始</span></span>或使用键盘，然后按<span class="keycombo"><span class="keysym">Ctrl</span> + <span class="keysym">R</span></span>
</p><p>在开始测试之前，添加“ <tt class="code">摘要报告”</tt>元素并选择它。随着测试的进行，统计信息将不断变化，直到测试完成。在测试结束时，摘要报告应如下所示。
  </p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="984" height="220" src="../images/screenshots/example-summary-report.png"><br>
<font size="-1"></font></td></tr></tbody></table>

<p></p><p>运行测试时，在右上角应该有一个绿色圆圈。测试完成后，圆圈应为灰色。
  </p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="132" height="39" src="../images/screenshots/example-running.png"><br>
<font size="-1"></font></td></tr></tbody></table>

<p></p><p>解决方案2，在命令行中，使用<tt class="code">jmeter -n -t [jmx文件] -l [结果文件] -e -o [输出文件夹的路径]</tt>
</p><p>测试结束时，将生成HTML报告，该报告可在命令行中使用的[输出到文件夹的路径]中使用。
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="junitsampler_tutorial.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="jmeter_distributed_testing_step_by_step.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>