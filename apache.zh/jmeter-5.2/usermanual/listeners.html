<html ><head>
<link rel="stylesheet" type="text/css" href="../css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户手册：侦听器</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="remote-test.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-topic-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="intro"><strong>12听众介绍</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>侦听器是显示样本结果的组件。结果可以显示在树，表，图形中，也可以简单地写入日志文件。要查看任何给定采样器的响应内容，请将侦听器“ <tt class="code">查看结果树</tt> ”或“ <tt class="code">查看表中的结果</tt> ”添加到测试计划中。要以图形方式查看响应时间，请添加图形结果。组件页面的“ <a href="../usermanual/component_reference.html#listeners">侦听器”</a>部分包含所有侦听器的完整说明。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>不同的侦听器以不同的方式显示响应信息。但是，它们都将相同的原始数据写入输出文件-如果指定了原始数据。
</td></tr>
</tbody></table>
<p></p>
<p>“ <tt class="code">配置</tt> ”按钮可用于指定要写入文件的字段，以及将其写入CSV还是XML。 CSV文件比XML文件小得多，因此，如果要生成大量样本，请使用CSV。
</p><p>可以使用相对路径名或绝对路径名来指定文件名。相对路径相对于当前工作目录（默认为<tt class="code">bin /</tt>目录）进行解析。JMeter还支持相对于包含当前测试计划（JMX文件）的目录的路径。如果路径名以“ <tt class="code">〜/</tt> ”开头（或<tt class="code">jmeter.save.saveservice.base_prefix</tt> JMeter属性中的任何内容），则假定该路径相对于JMX文件位置。
</p><p>如果仅希望记录某些样本，则将侦听器添加为采样器的子代。或者，您可以使用“简单控制器”对一组采样器进行分组，然后向其添加“侦听器”。多个采样器可以使用相同的文件名-但请确保它们都使用相同的配置！
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="defaults"><strong>12.1默认配置</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>可以在<tt class="code">jmeter.properties</tt> （或<tt class="code">user.properties</tt> ）文件中定义要保存的默认项。这些属性用作Listener Config弹出窗口的初始设置，还用于由<tt class="code">-l</tt>命令行标志指定的日志文件（通常用于CLI模式测试运行）。
</p><p>要更改默认格式，请在<tt class="code">jmeter.properties中</tt>找到以下行：</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>jmeter.save.saveservice.output_format=</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p>要保存的信息是可配置的。要获得最大的信息，请选择“ <tt class="code">xml</tt> ”作为格式，并在“测试计划”元素上指定“ <tt class="code">功能测试模式</tt> ”。如果未选中此框，则默认保存的数据包括时间戳记（自UTC 1970年1月1日午夜起的毫秒数），数据类型，线程名称，标签，响应时间，消息和代码，和成功指标。如果选中，将记录所有信息，包括完整的响应数据。</p><p>下面的示例说明如何设置属性以获取竖线（“ <tt class="code">|</tt> ”）分隔的格式，该格式将输出如下结果：</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
timeStamp|time|label|responseCode|threadName|dataType|success|failureMessage
02/06/03 08:21:42|1187|Home|200|Thread Group-1|text|true|
02/06/03 08:21:42|47|Login|200|Thread Group-1|text|false|Test Failed: 
    expected to contain: password etc.
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p>需要显示的相应的<tt class="code">jmeter.properties</tt>如下所示。在此示例中，一个奇怪的地方是<tt class="code">output_format</tt>设置为<tt class="code">csv</tt> ，它通常指示以逗号分隔的值。但是，将<tt class="code">default_delimiter</tt>设置为竖线而不是逗号，因此在这种情况下，csv标记是不正确的。（将CSV视为表示字符分隔值的值）</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
jmeter.save.saveservice.output_format=csv
jmeter.save.saveservice.assertion_results_failure_message=true
jmeter.save.saveservice.default_delimiter=|
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p>影响结果文件输出的全套属性如下所示。
</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
#---------------------------------------------------------------------------
# Results file configuration
#---------------------------------------------------------------------------

# This section helps determine how result data will be saved.
# The commented out values are the defaults.

# legitimate values: xml, csv, db.  Only xml and csv are currently supported.
#jmeter.save.saveservice.output_format=csv


# true when field should be saved; false otherwise

# assertion_results_failure_message only affects CSV output
#jmeter.save.saveservice.assertion_results_failure_message=true
#
# legitimate values: none, first, all
#jmeter.save.saveservice.assertion_results=none
#
#jmeter.save.saveservice.data_type=true
#jmeter.save.saveservice.label=true
#jmeter.save.saveservice.response_code=true
# response_data is not currently supported for CSV output
#jmeter.save.saveservice.response_data=false
# Save ResponseData for failed samples
#jmeter.save.saveservice.response_data.on_error=false
#jmeter.save.saveservice.response_message=true
#jmeter.save.saveservice.successful=true
#jmeter.save.saveservice.thread_name=true
#jmeter.save.saveservice.time=true
#jmeter.save.saveservice.subresults=true
#jmeter.save.saveservice.assertions=true
#jmeter.save.saveservice.latency=true
#jmeter.save.saveservice.connect_time=true
#jmeter.save.saveservice.samplerData=false
#jmeter.save.saveservice.responseHeaders=false
#jmeter.save.saveservice.requestHeaders=false
#jmeter.save.saveservice.encoding=false
#jmeter.save.saveservice.bytes=true
#jmeter.save.saveservice.sent_bytes=true
#jmeter.save.saveservice.url=false
#jmeter.save.saveservice.filename=false
#jmeter.save.saveservice.hostname=false
#jmeter.save.saveservice.thread_counts=true
#jmeter.save.saveservice.sample_count=false
#jmeter.save.saveservice.idle_time=true

# Timestamp format - this only affects CSV output files
# legitimate values: none, ms, or a format suitable for SimpleDateFormat
#jmeter.save.saveservice.timestamp_format=ms
#jmeter.save.saveservice.timestamp_format=yyyy/MM/dd HH:mm:ss.SSS

# For use with Comma-separated value (CSV) files or other formats
# where the fields' values are separated by specified delimiters.
# Default:
#jmeter.save.saveservice.default_delimiter=,
# For TAB, since JMeter 2.3 one can use:
#jmeter.save.saveservice.default_delimiter=\t

# Only applies to CSV format files:
# Print field names as first line in CSV
#jmeter.save.saveservice.print_field_names=true

# Optional list of JMeter variable names whose values are to be saved in the result data files.
# Use commas to separate the names. For example:
#sample_variables=SESSION_ID,REFERENCE
# N.B. The current implementation saves the values in XML as attributes,
# so the names must be valid XML names.
# JMeter sends the variable to all servers
# to ensure that the correct data is available at the client.

# Optional xml processing instruction for line 2 of the file:
#jmeter.save.saveservice.xml_pi=&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;sample.xsl&quot;?&gt;

# Prefix used to identify filenames that are relative to the current base
#jmeter.save.saveservice.base_prefix=~/

# AutoFlush on each line written in XML or CSV output
# Setting this to true will result in less test results data loss in case of Crash
# but with impact on performances, particularly for intensive tests (low or no pauses)
# Since JMeter 2.10, this is false by default
#jmeter.save.saveservice.autoflush=false

# Put the start time stamp in logs instead of the end
sampleresult.timestamp.start=true

# Whether to use System.nanoTime() - otherwise only use System.currentTimeMillis()
#sampleresult.useNanoTime=true

# Use a background thread to calculate the nanoTime offset
# Set this to ≤ 0 to disable the background thread
#sampleresult.nanoThreadSleep=5000
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p><a href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html"><b>SimpleDateFormat中</b></a>描述了用于<tt class="code">timestamp_format</tt>的日期格式。时间戳格式用于写入和读取文件。如果格式设置为“ <tt class="code">ms</tt> ”，并且该列未解析为长整数，则JMeter（2.9+）将尝试以下格式：</p><ul>
<li><tt class="code">yyyy / MM / dd HH：mm：ss。SSS</tt></li>
<li><tt class="code">yyyy / MM / dd HH：mm：ss</tt></li>
<li><tt class="code">yyyy-MM-dd HH：mm：ss。SSS</tt></li>
<li><tt class="code">yyyy-MM-dd HH：mm：ss</tt></li>
<li><tt class="code">MM / dd / yy HH：mm：ss</tt> （这是为了与以前的版本兼容；不建议使用该格式）</li>
</ul>匹配现在也很严格（不宽容）。JMeter 2.8和更早版本使用宽大模式，这可能导致时间戳带有错误的日期（时间通常是正确的）。<p></p><table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="sample_variables"><strong>12.1.1示例变量</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>JMeter支持<tt class="code">sample_variables</tt>属性，以定义其他JMeter变量的列表，这些变量将与每个样本一起保存在JTL文件中。这些值将作为其他列以及XML文件中的其他属性写入CSV文件。参见上面的示例。
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="sample_configuration"><strong>12.1.2示例结果保存配置</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>可以使用以下所示的Config弹出窗口将侦听器配置为将不同的项目保存到结果日志文件（JTL）。默认设置如上面的“ <a href="#defaults">监听器默认配置”</a>部分所述。名称后面带有（CSV）的项目仅适用于CSV格式； （XML）的项目仅适用于XML格式。CSV格式当前不能用于保存任何包含换行符的项目。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/sample_result_config.png"><br>
<font size="-1"><br>
<b>配置对话框</b></font></td></tr></tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<p>请注意，cookie，方法和查询字符串将作为“ <tt class="code">采样器数据</tt> ”选项的一部分保存。
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="batch"><strong>12.2 CLI模式（批处理）测试运行</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>在CLI模式下运行时， <tt class="code">-l</tt>标志可用于创建测试运行的顶级侦听器。这是测试计划中定义的所有侦听器的补充。如上一节所述，此侦听器的配置由文件<tt class="code">jmeter.properties中</tt>的条目控制。
</p><p>此功能可用于为每次测试运行指定不同的数据和日志文件，例如：</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
jmeter -n -t testplan.jmx -l testplan_01.jtl -j testplan_01.log
jmeter -n -t testplan.jmx -l testplan_02.jtl -j testplan_02.log
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p>请注意，默认情况下，JMeter日志记录消息被写入文件<tt class="code">jmeter.log</tt> 。每次都会重新创建此文件，因此，如果要保留每次运行的日志文件，则需要使用上述<tt class="code">-j</tt>选项对其进行重命名。
</p><p>JMeter支持日志文件名中的变量。如果文件名包含成对的单引号，则名称将以应用于当前日期的<tt class="code">SimpleDateFormat</tt>格式进行处理，例如： <tt class="code">log_file ='jmeter_'yyyyMMddHHmmss'.tmp'</tt> 。这可用于为每次测试运行生成唯一的名称。
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="resources"><strong>12.3资源使用</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>如果样本很多，则侦听器可以使用大量内存。</td></tr>
</tbody></table>
<p></p>
<p>目前，大多数侦听器都会保留他们显示的每个样本的副本，除了：</p><ul>
<li>简单数据写入器</li>
<li>BeanShell / JSR223侦听器</li>
<li>Mailer Visualizer</li>
<li>监控结果</li>
<li>总结报告</li>
</ul><p>以下侦听器不再需要保留每个样本的副本。取而代之的是，将经过时间相同的样本进行汇总。现在需要更少的内存，尤其是如果大多数样本最多只花一两秒钟。
</p><ul>
<li>汇总报告</li>
<li>聚合图</li>
</ul><p>为了最大程度地减少所需的内存量，请使用“简单数据写入器”，然后使用CSV格式。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="csvlogformat"><strong>12.4 CSV日志格式</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>CSV日志格式取决于在配置中选择了哪些数据项。文件中仅记录指定的数据项。列的出现顺序是固定的，如下所示：</p><ul>
<li><tt class="code">timeStamp-</tt>自<tt class="code">1970</tt>年1月1日以来的毫秒数</li>
<li><tt class="code">经过的时间</tt> -以毫秒为单位</li>
<li><tt class="code">标签</tt> -采样器标签</li>
<li><tt class="code">responseCode</tt> -例如<tt class="code"><tt class="code">200，404</tt></tt></li>
<li><tt class="code">responseMessage-</tt>例如， <tt class="code">确定</tt></li>
<li><tt class="code">线程名</tt></li>
<li><tt class="code">dataType-</tt>例如<tt class="code">文本</tt></li>
<li><tt class="code">成功</tt> - <tt class="code">正确</tt>或<tt class="code">错误</tt></li>
<li><tt class="code">failureMessage-</tt>如果有的话</li>
<li><tt class="code">bytes-</tt>样本中的字节数</li>
<li><tt class="code">sentBytes-</tt>为样本发送的字节数</li>
<li><tt class="code">grpThreads-</tt>此线程组中活动线程的数量</li>
<li><tt class="code">allThreads-</tt>所有组中活动线程的总数</li>
<li><tt class="code">网址</tt></li>
<li><tt class="code">文件名</tt> -如果使用了“ <tt class="code">将响应保存到文件”</tt></li>
<li><tt class="code">延迟</tt> -首次响应的时间</li>
<li><tt class="code">连接</tt> -建立连接的时间</li>
<li><tt class="code">编码方式</tt></li>
<li><tt class="code">SampleCount-</tt>样本数（1，除非聚合了多个样本）</li>
<li><tt class="code">ErrorCount-</tt>错误数（0或1，除非聚合了多个样本）</li>
<li><tt class="code">主机名</tt> -生成示例的位置</li>
<li><tt class="code">IdleTime-</tt> “空闲”时间的毫秒数（通常为0）</li>
<li><tt class="code">变量</tt> （如果指定）</li>
</ul></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="xmlformat2.1"><strong>12.5 XML日志格式2.1</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>更新后的XML（2.1）的格式如下（换行符将有所不同）：</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;testResults version=&quot;1.2&quot;&gt;

-- HTTP Sample, with nested samples 

&lt;httpSample t=&quot;1392&quot; lt=&quot;351&quot; ts=&quot;1144371014619&quot; s=&quot;true&quot; 
     lb=&quot;HTTP Request&quot; rc=&quot;200&quot; rm=&quot;OK&quot; 
     tn=&quot;Listen 1-1&quot; dt=&quot;text&quot; de=&quot;iso-8859-1&quot; by=&quot;12407&quot;&gt;
  &lt;httpSample t=&quot;170&quot; lt=&quot;170&quot; ts=&quot;1144371015471&quot; s=&quot;true&quot; 
        lb=&quot;http://www.apache.org/style/style.css&quot; rc=&quot;200&quot; rm=&quot;OK&quot; 
        tn=&quot;Listen 1-1&quot; dt=&quot;text&quot; de=&quot;ISO-8859-1&quot; by=&quot;1002&quot;&gt;
    &lt;responseHeader class=&quot;java.lang.String&quot;&gt;HTTP/1.1 200 OK
Date: Fri, 07 Apr 2006 00:50:14 GMT
⋮
Content-Type: text/css
&lt;/responseHeader&gt;
    &lt;requestHeader class=&quot;java.lang.String&quot;&gt;MyHeader: MyValue&lt;/requestHeader&gt;
    &lt;responseData class=&quot;java.lang.String&quot;&gt;body, td, th {
    font-size: 95%;
    font-family: Arial, Geneva, Helvetica, sans-serif;
    color: black;
    background-color: white;
}
⋮
&lt;/responseData&gt;
    &lt;cookies class=&quot;java.lang.String&quot;&gt;&lt;/cookies&gt;
    &lt;method class=&quot;java.lang.String&quot;&gt;GET&lt;/method&gt;
    &lt;queryString class=&quot;java.lang.String&quot;&gt;&lt;/queryString&gt;
    &lt;url&gt;http://www.apache.org/style/style.css&lt;/url&gt;
  &lt;/httpSample&gt;
  &lt;httpSample t=&quot;200&quot; lt=&quot;180&quot; ts=&quot;1144371015641&quot; s=&quot;true&quot; 
     lb=&quot;http://www.apache.org/images/asf_logo_wide.gif&quot; 
     rc=&quot;200&quot; rm=&quot;OK&quot; tn=&quot;Listen 1-1&quot; dt=&quot;bin&quot; de=&quot;ISO-8859-1&quot; by=&quot;5866&quot;&gt;
    &lt;responseHeader class=&quot;java.lang.String&quot;&gt;HTTP/1.1 200 OK
Date: Fri, 07 Apr 2006 00:50:14 GMT
⋮
Content-Type: image/gif
&lt;/responseHeader&gt;
    &lt;requestHeader class=&quot;java.lang.String&quot;&gt;MyHeader: MyValue&lt;/requestHeader&gt;
    &lt;responseData class=&quot;java.lang.String&quot;&gt;http://www.apache.org/asf.gif&lt;/responseData&gt;
      &lt;responseFile class=&quot;java.lang.String&quot;&gt;Mixed1.html&lt;/responseFile&gt;
    &lt;cookies class=&quot;java.lang.String&quot;&gt;&lt;/cookies&gt;
    &lt;method class=&quot;java.lang.String&quot;&gt;GET&lt;/method&gt;
    &lt;queryString class=&quot;java.lang.String&quot;&gt;&lt;/queryString&gt;
    &lt;url&gt;http://www.apache.org/asf.gif&lt;/url&gt;
  &lt;/httpSample&gt;
  &lt;responseHeader class=&quot;java.lang.String&quot;&gt;HTTP/1.1 200 OK
Date: Fri, 07 Apr 2006 00:50:13 GMT
⋮
Content-Type: text/html; charset=ISO-8859-1
&lt;/responseHeader&gt;
  &lt;requestHeader class=&quot;java.lang.String&quot;&gt;MyHeader: MyValue&lt;/requestHeader&gt;
  &lt;responseData class=&quot;java.lang.String&quot;&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
               &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
⋮
&lt;html&gt;
 &lt;head&gt;
⋮
 &lt;/head&gt;
 &lt;body&gt;        
⋮
 &lt;/body&gt;
&lt;/html&gt;
&lt;/responseData&gt;
  &lt;cookies class=&quot;java.lang.String&quot;&gt;&lt;/cookies&gt;
  &lt;method class=&quot;java.lang.String&quot;&gt;GET&lt;/method&gt;
  &lt;queryString class=&quot;java.lang.String&quot;&gt;&lt;/queryString&gt;
  &lt;url&gt;http://www.apache.org/&lt;/url&gt;
&lt;/httpSample&gt;

-- non HTTP Sample

&lt;sample t=&quot;0&quot; lt=&quot;0&quot; ts=&quot;1144372616082&quot; s=&quot;true&quot; lb=&quot;Example Sampler&quot;
    rc=&quot;200&quot; rm=&quot;OK&quot; tn=&quot;Listen 1-1&quot; dt=&quot;text&quot; de=&quot;ISO-8859-1&quot; by=&quot;10&quot;&gt;
  &lt;responseHeader class=&quot;java.lang.String&quot;&gt;&lt;/responseHeader&gt;
  &lt;requestHeader class=&quot;java.lang.String&quot;&gt;&lt;/requestHeader&gt;
  &lt;responseData class=&quot;java.lang.String&quot;&gt;Listen 1-1&lt;/responseData&gt;
  &lt;responseFile class=&quot;java.lang.String&quot;&gt;Mixed2.unknown&lt;/responseFile&gt;
  &lt;samplerData class=&quot;java.lang.String&quot;&gt;ssssss&lt;/samplerData&gt;
&lt;/sample&gt;

&lt;/testResults&gt;
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<p>请注意，示例节点名称可以是“ <tt class="code">sample</tt> ”或“ <tt class="code">httpSample</tt> ”。
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="xmlformat2.2"><strong>12.6 XML日志格式2.2</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>对于2.2和2.1，JTL文件的格式相同。格式2.2仅影响JMX文件。
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="attributes"><strong>12.7示例属性</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>样本属性具有以下含义：</p><table>
<tbody><tr>
<td bgcolor="#039acc" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">属性</font>
</td>
<td bgcolor="#039acc" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">内容</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">通过</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">字节数</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">斯比</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">已发送字节</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">德</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">资料编码</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">dt</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">数据类型</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">ec</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">错误计数（0或1，除非汇总了多个样本）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">hn</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">生成样本的主机名</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">它</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">空闲时间=未花费的采样时间（毫秒）（通常为0）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">磅</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">标签</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">lt</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">延迟=初始响应时间（毫秒）-并非所有采样器都支持</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">ct</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">连接时间=建立连接的时间（毫秒）-并非所有采样器都支持</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">呐</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">所有线程组的活动线程数</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">ng</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">该组中的活动线程数</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">rc</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">响应码（例如<tt class="code">200</tt> ）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">R M</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">响应消息（例如<tt class="code">OK</tt> ）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
 <tt class="code">s</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">成功标志（ <tt class="code">对</tt> / <tt class="code">错</tt> ）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">SC</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">样本数（1，除非汇总了多个样本）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
 <tt class="code">Ť</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">经过时间（毫秒）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">n</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">线程名称</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">ts</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">timeStamp（自UTC 1970年1月1日午夜起的毫秒数）</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">变量名</tt></font>
</td>
<td bgcolor="#a0ddf0" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">命名变量的值</font>
</td>
</tr>
</tbody></table>
<p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>JMeter允许将其他变量与测试计划一起保存。当前，变量另存为其他属性。将testplan变量名称用作属性名称。有关更多信息，请参见<a href="#sample_variables">样本变量</a> （上文）。
</td></tr>
</tbody></table>
<p></p>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="saving"><strong>12.8保存响应数据</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>如上所示，如果需要，可以将响应数据保存在XML日志文件中。但是，这可能会使文件变得很大，并且必须对文本进行编码，以便它仍然是有效的XML。另外，不能包含图像。只能保存类型为<tt class="code">TEXT的</tt>样本响应。
<br>另一个解决方案是使用后处理器<a href="../usermanual/component_reference.html#Save_Responses_to_a_file">Save_Responses_to_a_file</a> 。这将为每个样本生成一个新文件，并将文件名与样本一起保存。然后，文件名可以包含在样本日志输出中。重新加载样本日志文件时，如有必要，将从文件中检索数据。
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="loading"><strong>12.9加载（读取）响应数据</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>要查看现有的结果文件，可以使用“ <tt class="code">浏览...</tt> ”按钮选择一个文件。如有必要，只需创建一个虚拟的测试计划，其中包含适当的侦听器。
</p><p>可以从XML或CSV格式的文件中读取结果。从CSV结果文件读取时，标头（如果存在）用于确定保存了哪些字段。
<b>为了正确解释无标题的CSV文件，必须设置适当的JMeter属性。</b>
</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>JMeter在加载新文件之前不会清除任何当前数据，因此可以合并文件。如果要清除当前数据，请在加载文件之前使用菜单项： <span class="menuchoice"><span class="guimenuitem">运行</span> → <span class="guimenuitem">清除</span> （ <span class="keycombo"><span class="keysym">Ctrl</span> + <span class="keysym">Shift</span> + <span class="keysym">E</span></span> ）</span>或<span class="menuchoice"><span class="guimenuitem">运行</span> → <span class="guimenuitem">全部清除</span> （ <span class="keycombo"><span class="keysym">Ctrl</span> + <span class="keysym">E</span></span> ）</span> 。
</td></tr>
</tbody></table>
<p></p>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="screencap"><strong>12.10保存侦听器GUI数据</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>JMeter能够将任何侦听器另存为PNG文件。为此，请在左侧面板中选择监听器。单击<span class="menuchoice"><span class="guimenuitem">编辑</span> → <span class="guimenuitem">将节点另存为图像</span></span> 。将会出现一个文件对话框。输入所需的名称并保存侦听器。
</p><p>也可以使用“复制/粘贴”来保存以表形式生成输出的侦听器。在表中选择所需的单元格，然后使用OS Copy快捷方式（通常是<span class="keycombo"><span class="keysym">Ctrl</span> + <span class="keysym">C</span></span> ）。数据将保存到剪贴板，然后可以从此处粘贴到另一个应用程序中，例如电子表格或文本编辑器。
</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../images/screenshots/save_image.png"><br>
<font size="-1">图1- <span class="menuchoice"><span class="guimenuitem">编辑</span> → <span class="guimenuitem">将节点另存为图像</span></span>
</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="remote-test.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-topic-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>