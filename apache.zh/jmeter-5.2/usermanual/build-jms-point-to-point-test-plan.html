<html ><head>
<link rel="stylesheet" type="text/css" href="../../docs/css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户手册：构建JMS（Java消息服务）点对点测试计划</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../../docs/images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../../docs/images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-topic-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-ws-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="building"><strong>10。建立JMS点对点测试计划</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>确保所需的jar文件在JMeter的<tt class="code">lib</tt>目录中。如果不是，请关闭JMeter，将jar文件复制过来，然后重新启动JMeter。有关详细信息，请参见<a href="get-started.html#libraries_activemq">入门</a> 。
        </td></tr>
</tbody></table>
<p></p>
<p>在本节中，您将学习如何创建<a href="build-test-plan.html">测试计划</a>以测试JMS点对点消息传递解决方案。测试的设置是1个线程组，其中5个线程通过请求队列发送4条消息。固定的答复队列将用于监视答复消息。要构建测试计划，您将使用以下元素： <a href="test_plan.html#thread_group">线程组</a> ， <a href="../usermanual/component_reference.html#JMS_Point-to-Point">JMS点对点</a>和<a href="../usermanual/component_reference.html#Graph_Results">图形结果</a> 。
            </p><p>关于JMS的一般说明：当前有两个JMS采样器。一个使用JMS主题，另一个使用队列。主题消息通常称为发布/订阅消息。主题消息传递通常用于生产者发布消息并被多个订户使用的情况。JMS采样器需要JMS实施jar文件。例如，来自Apache ActiveMQ。请参阅<a href="get-started.html#libraries_activemq">此处</a>以获取ActiveMQ提供的jar列表。</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_threadgroup"><strong>10.1添加线程组</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>您要对每个JMeter测试计划进行的第一步是添加一个<a href="test_plan.html#thread_group">线程组</a>元素。线程组告诉JMeter您要模拟的用户数量，用户应该发送请求的频率以及应该发送多少请求。
            </p><p>继续并通过首先选择“测试计划”来添加ThreadGroup元素，单击鼠标右键以获取“ <span class="menuchoice"><span class="guimenuitem">添加”</span></span>菜单，然后选择“ <span class="menuchoice"><span class="guimenuitem">添加”</span> →“ <span class="guimenuitem">ThreadGroup”</span></span> 。</p><p>现在，您应该在“测试计划”下看到“线程组”元素。如果没有看到该元素，则通过单击“测试计划”元素来“扩展”测试计划树。</p><p>接下来，您需要修改默认属性。如果尚未选择线程组元素，则在树中选择它。现在，您应该在“ JMeter”窗口的右侧部分中看到“线程组控制面板”（请参见下面的图10.1）</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="../../docs/images/screenshots/webtest/threadgroup.png"><br>
<font size="-1">图10.1具有默认值的线程组</font></td></tr></tbody></table>
<p>首先为我们的线程组提供一个更具描述性的名称。在名称字段中，输入<tt class="code">Point-to-Point</tt> 。</p><p>接下来，将用户（称为线程）数量增加到<tt class="code">5个</tt> 。</p><p>在下一个字段“加速周期”中，将该值保留为0秒。该属性告诉JMeter启动每个用户之间要延迟多长时间。例如，如果您输入5秒钟的加速期，JMeter将在5秒钟结束时完成所有用户的启动。因此，如果我们有5个用户和5秒钟的加速期，则启动用户之间的延迟将为1秒（5个用户/ 5秒= 1个用户每秒）。如果将值设置为0，那么JMeter将立即启动所有用户。</p><p>清除标记为“ <tt class="code">Forever</tt> ”的复选框，然后在“循环计数”字段中输入值<tt class="code">4</tt> 。该属性告诉JMeter重复测试多少次。如果输入的循环计数值为<tt class="code">0</tt> ，那么JMeter将仅运行一次测试。要让JMeter重复运行您的测试计划，请选择<tt class="code">永久</tt>复选框。</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>在大多数应用程序中，您必须手动接受在控制面板中所做的更改。但是，在JMeter中，控制面板会在您进行更改时自动接受它们。如果更改元素的名称，则在离开控制面板后（例如，选择另一个树元素时），树将使用新文本进行更新。</td></tr>
</tbody></table>
<p></p>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_point_to_point_sampler"><strong>10.2添加JMS点对点采样器</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>首先将采样器<a href="../usermanual/component_reference.html#JMS_Point-to-Point">JMS点对点</a> <span class="menuchoice"><span class="guimenuitem">添加</span></span>到点对点元素（ <span class="menuchoice"><span class="guimenuitem">添加</span> → <span class="guimenuitem">采样器</span> → <span class="guimenuitem">JMS点对点</span></span> ）。然后，在树中选择JMS点对点采样器元素。在构建示例时，将提供与ActiveMQ 3.0一起使用的配置。
            </p><p>
                </p><table>
<tbody><tr>
<td bgcolor="#039acc" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">名称</font>
</td>
<td bgcolor="#039acc" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">值</font>
</td>
<td bgcolor="#039acc" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">描述</font>
</td>
</tr>
<tr>
<td bgcolor="#039acc" colspan="3" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">JMS资源</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">QueueConnectionFactory</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">连接工厂</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这是ActiveMQ中连接工厂的默认JNDI条目。</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">JNDI名称请求队列</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">要求</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这等于在JNDI属性中定义的JNDI名称。</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">JNDI名称回复队列</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">质量要求</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这等于在JNDI属性中定义的JNDI名称。</font>
</td>
</tr>
<tr>
<td bgcolor="#039acc" colspan="3" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">讯息属性</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">沟通方式</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">要求回应</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这意味着您至少需要在JMeter外部运行的服务，并且该服务将响应请求。此服务必须侦听请求队列并将消息发送到<tt class="code">message.getJMSReplyTo（）</tt>引用的队列<tt class="code">。</tt></font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">内容</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">测试</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这只是消息的内容。</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">JMS属性</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
 
</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">ActiveMQ不需要任何东西。</font>
</td>
</tr>
<tr>
<td bgcolor="#039acc" colspan="3" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">JNDI属性</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">InitialContextFactory</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">org.apache.activemq.jndi。ActiveMQInitialContextFactory</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">ActiveMQ的标准InitialContextFactory</font>
</td>
</tr>
<tr>
<td bgcolor="#039acc" colspan="3" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">性质</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">队列。要求</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">例。一种</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这为指向队列<tt class="code">示例的请求队列定义了一个JNDI名称<tt class="code">Q.REQ</tt> <tt class="code">。一种</tt></tt></font><tt class="code">
</tt></td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">队列。质量要求</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">例。乙</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这为指向队列<tt class="code">示例的回复队列定义了JNDI名称<tt class="code">Q.RPL</tt> <tt class="code">。乙</tt></tt></font><tt class="code">
</tt></td>
</tr>
<tr>
<td bgcolor="#039acc" colspan="3" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">提供商URL</font>
</td>
</tr>
<tr>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">提供商URL</font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">
<tt class="code">tcp：//本地主机：61616</tt></font>
</td>
<td bgcolor="#a0ddf0" colspan="1" valign="top" align="left">
<font color="#000000" size="-1" face="arial,helvetica,sanserif">这定义了ActiveMQ消息传递系统的URL。</font>
</td>
</tr>
</tbody></table>

            <p></p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="adding_listener"><strong>10.3添加侦听器以查看存储测试结果</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>您需要添加到测试计划中的最后一个元素是<a href="component_reference.html#listeners">Listener</a> 。该元素负责将JMS请求的所有结果存储在文件中，并提供数据的可视模型。
            </p><p>选择“线程组”元素并添加一个“ <a href="../usermanual/component_reference.html#Graph_Results">图形结果”</a>侦听器（“ <span class="menuchoice"><span class="guimenuitem">添加”</span> →“ <span class="guimenuitem">侦听器”</span> →“ <span class="guimenuitem">图形结果”</span></span> ）。接下来，您需要指定输出文件的目录和文件名。您可以在“文件名”字段中键入它，或选择“浏览”按钮并浏览到目录，然后输入文件名。
            </p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img width="915" height="686" src="../../docs/images/screenshots/graph_results.png"><br>
<font size="-1">图10.2图结果侦听器</font></td></tr></tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-jms-topic-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="build-ws-test-plan.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>