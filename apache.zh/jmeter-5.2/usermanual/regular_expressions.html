<html ><head>
<link rel="stylesheet" type="text/css" href="../../docs/css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-用户手册：正则表达式</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="../../docs/images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="../../docs/images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="hints_and_tips.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="functions.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="regex"><strong>21常用表达</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="overview"><strong>21.1概述</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>JMeter包含模式匹配软件<a href="http://attic.apache.org/projects/jakarta-oro.html">Apache Jakarta ORO</a>
<br>Jakarta网站上有一些有关此文档的文档，例如<a href="http://archimedes.fas.harvard.edu/scrapbook/jakarta-oro-2.0.6/docs/api/org/apache/oro/text/regex/package-summary.html">模式匹配字符的摘要</a>
</p><p>在《 <a href="http://www.savarese.org/oro/docs/OROMatcher/index.html">OROMatcher用户指南》中</a>也有关于该产品较旧版本的文档，可能证明是有用的。
</p><p>模式匹配与Perl中的模式匹配非常相似。完整的Perl安装将包括大量有关正则表达式的文档-查找<tt class="code">perlrequick</tt> ， <tt class="code">perlretut</tt> ， <tt class="code">perlre</tt>和<tt class="code">perlreref</tt> 。
</p><p>值得强调的是，在“响应声明”测试元素上使用的“ <em>包含</em> ”和“ <em>匹配</em> ”之间的区别：</p><dl>
<dt>“ <em>包含</em> ”</dt><dd>表示正则表达式至少匹配了目标的某些部分，因此' <tt class="code">字母</tt> '' <em>包含</em> '' <tt class="code">ph.b。</tt>因为正则表达式与子字符串<tt class="code">phabe</tt>相匹配。
</dd>
<dt>“ <em>符合</em> ”</dt><dd>表示正则表达式匹配整个目标。因此，“ <tt class="code">字母</tt> ”被“ <tt class="code">al。* t</tt> ”“ <em>匹配</em> ”。
</dd>
</dl><p>在这种情况下，等效于将正则表达式包装在<tt class="code">^</tt>和<tt class="code">$中</tt> ，即' <tt class="code">^ al。* t $</tt> '。
</p><p>然而，这并非总是如此。例如，正则表达式' <tt class="code">alp | .lp。*</tt> '被“ <em>包含</em> ”在“ <tt class="code">字母</tt> ”中，但不“ <em>匹配</em> ”“ <tt class="code">字母</tt> ”。
</p><p>为什么？因为当模式匹配器在“ <tt class="code">字母</tt> ”中找到序列“ <tt class="code">alp</tt> ”时，它将停止尝试任何其他组合-并且“ <tt class="code">alp</tt> ”与“ <tt class="code">字母</tt> ”不同，因为它不包含“ <tt class="code">habet</tt> ”。
</p><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>与Perl不同，不需要（即不需要）将正则表达式包含在<tt class="code">//中</tt> 。
</td></tr>
</tbody></table>
<p></p>
<p>因此，如果没有结尾的<tt class="code">/，</tt>如何使用修饰符<tt class="code">ismx</tt>等？解决方案是使用<i>扩展的正则表达式</i> ，即<tt class="code">/ abc / i</tt>成为<tt class="code">（？i）abc</tt> 。另请参见下面<a href="#placement">的修饰符</a>放置。
</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="examples"><strong>21.2例子</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<h3>提取单个字符串</h3><p>假设您要匹配网页的以下部分：<br>

<tt class="code">name =“文件” value =“ readme.txt”></tt>
<br>并且您要提取<tt class="code">readme.txt</tt> 。
<br>合适的正则表达式为：<br>

<tt class="code">name =“文件” value =“（。+？）“></tt>
</p><p>上面的特殊字符是：</p>
<dl>
<dt><tt class="code">（</tt>和<tt class="code">）</tt></dt><dd>这些将匹配字符串中要返回的部分括起来</dd>
<dt><tt class="code">。</tt></dt><dd>匹配任何字符</dd>
<dt><tt class="code">+</tt></dt><dd>一或多次</dd> 
<dt><tt class="code">？</tt></dt><dd>不要贪婪，即在第一个比赛成功后停止</dd>
</dl>
<p>注意：没有<tt class="code">？</tt> ， <tt class="code">。+</tt>将继续经过第一个<tt class="code">“>，</tt>直到找到最后一个可能的<tt class="code">”></tt> -可能不是预期的。
</p>
<p>注意：尽管上面的表达式有效，但是使用以下表达式更有效：<br>

<tt class="code">name =“文件” value =“（[[^”] +）“></tt>其中<br>

<tt class="code">[^“]</tt> -表示匹配<tt class="code">“</tt><br>在这种情况下，匹配的引擎只要看到第一个<tt class="code">“”</tt>就可以停止查找，而在前一种情况下，该引擎必须检查它是否找到了<tt class="code">“></tt>而不是说<tt class="code">“>”</tt> 。
</p>
<h3>提取多个字符串</h3>
<p>假设您要匹配网页的以下部分：<br>

<tt class="code">name =“ file.name” value =“ readme.txt”，</tt>并且您要提取<tt class="code">file.name</tt>和<tt class="code">readme.txt</tt> 。
<br>合适的正则表达式为：<br>

<tt class="code">name =“（[[^”] +）“ value =”（[^“] +）”</tt>
<br>这将创建2个组，可在JMeter正则表达式提取器模板中将其用作<tt class="code">$ 1 $</tt>和<tt class="code">$ 2 $</tt> 。
</p>
<p>JMeter正则表达式提取器将组的值保存在其他变量中。
</p>
<p>例如，假设：</p>
<ul>
<li>参考名称： <tt class="code">MYREF</tt></li>
<li>正则表达式： <tt class="code">name =“（。+？）“ value =”（。+？）”</tt></li>
<li>模板： <tt class="code">$ 1 $$ 2 $</tt></li>
</ul>
<p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>不要将正则表达式包含在<tt class="code">/ /中</tt></td></tr>
</tbody></table>
<p></p>

<p>将设置以下变量：</p>
<dl>
<dt><tt class="code">MYREF</tt></dt><dd><tt class="code">file.namereadme.txt</tt></dd>
<dt><tt class="code">MYREF_g0</tt></dt><dd><tt class="code">name =“ file.name” value =“ readme.txt”</tt></dd>
<dt><tt class="code">MYREF_g1</tt></dt><dd><tt class="code">文档名称</tt></dd>
<dt><tt class="code">MYREF_g2</tt></dt><dd><tt class="code">readme.txt</tt></dd>
</dl>这些变量可以稍后在JMeter测试计划中称为<tt class="code">$ {MYREF}</tt> ， <tt class="code">$ {MYREF_g1}</tt>等。<p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="line_mode"><strong>21.3线路模式</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>模式匹配的行为略有不同，具体取决于多行和单行修饰符的设置。注意，单行和多行运算符彼此无关。它们可以独立指定。
</p><h3>单行模式</h3><p>单行模式只会影响' <tt class="code">。</tt>元字符被解释。
</p><p>默认行为是' <tt class="code">。</tt> '匹配除换行符以外的任何字符。在单行模式下，' <tt class="code">。</tt>也匹配换行符。
</p><h3>多行模式</h3><p>多行模式仅影响元字符“ <tt class="code">^</tt> ”和“ <tt class="code">$</tt> ”的解释方式。
</p><p>默认行为是' <tt class="code">^</tt> '和' <tt class="code">$</tt> '仅在字符串的开头和结尾匹配。使用多行模式时，“ <tt class="code">^</tt> ”元字符在每行的开头匹配，而“ <tt class="code">$</tt> ”元字符在每行的结尾匹配。</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="meta_chars"><strong>21.4元字符</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>正则表达式使用某些字符作为元字符-这些字符对RE引擎具有特殊含义。必须将这些字符前面加上<tt class="code">\</tt> （反斜杠）进行转义，以将其视为普通字符。这是元字符及其含义的列表（如有疑问，请检查ORO文档）。
</p><dl>
<dt><tt class="code">（</tt>和<tt class="code">）</tt></dt><dd>分组</dd>
<dt><tt class="code">[</tt>和<tt class="code">]</tt></dt><dd>人物类</dd>
<dt><tt class="code">{</tt>和<tt class="code">}</tt></dt><dd>重复</dd>
<dt><tt class="code">*</tt> ， <tt class="code">+</tt>和<tt class="code">？</tt></dt><dd>重复</dd>
<dt><tt class="code">。</tt></dt><dd>通配符</dd>
<dt><tt class="code">\</tt></dt><dd>转义字符</dd>
<dt><tt class="code">|</tt></dt><dd>备择方案</dd>
<dt><tt class="code">^</tt>和<tt class="code">$</tt></dt><dd>字符串或行的开头和结尾</dd>
</dl><p>
</p><table border="1" bgcolor="#bbbb00" width="50%" cellspacing="0" cellpadding="2">
<tbody><tr><td>请注意，ORO不支持<tt class="code">\ Q</tt>和<tt class="code">\ E</tt>元字符。[在其他RE引擎中，这些可用于引用RE的一部分，以使元字符代表自己。]您可以使用function进行等效操作，请参见<a href="functions.html#__escapeOroRegexpChars">$ {__ escapeOroRegexpChars（valueToEscape）}</a> 。
</td></tr>
</tbody></table>
<p></p>
<p>ORO支持以下Perl5扩展正则表达式。</p><dl>
<dt><tt class="code">（？＃文本）</tt></dt>
<dd>嵌入式注释导致文本被忽略。</dd>
<dt><tt class="code">（？：regexp）</tt></dt>
<dd>将类似“ <tt class="code">（）</tt> ”的内容进行分组，但不会导致保存组匹配。</dd>
<dt><tt class="code">（？= regexp）</tt></dt>
<dd>零宽度正向超前断言。例如， <tt class="code">\ w +（？= \ s）</tt>匹配单词，后跟空格，但MatchResult中不包含空格。</dd>
<dt><tt class="code">（？！正则表达式）</tt></dt>
<dd>零宽度否定超前声明。例如<tt class="code">foo（?!bar）</tt>匹配任何出现的“ <tt class="code">foo</tt> ”，但后面没有“ <tt class="code">bar</tt> ”。请记住，这是一个零宽度的断言，这意味着<tt class="code">a（?!b）d</tt>将与<tt class="code">ad</tt>匹配，因为<tt class="code">a</tt>后跟一个不是<tt class="code">b</tt>的字符（ <tt class="code">d</tt> ），并且a <tt class="code">d</tt>跟随零宽度断言。</dd>
<dt><tt class="code">（？imsx）</tt></dt>
<dd>一个或多个嵌入式模式匹配修饰符。 <tt class="code">i</tt>启用不区分大小写功能， <tt class="code">m</tt>启用输入的多行处理， <tt class="code">s</tt>启用输入<tt class="code">的</tt>单行处理， <tt class="code">x</tt>启用扩展的空格注释。</dd>
</dl>
<b>请注意<tt class="code">（？<= regexp）</tt> -不支持-不支持。</b>
<p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="placement"><strong>21.5修饰符的位置</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>修饰符可以放置在正则表达式中的任何位置，并从该点开始应用。[ORO中的错误意味着它们不能在正则表达式的最后使用。但是无论如何它们都不会起作用。]
</p><p>单行<tt class="code">（？s）</tt>和多行<tt class="code">（？m）</tt>修饰符通常放在正则表达式的开头。
</p><p>忽略大小写修饰符<tt class="code">（？i）</tt>可能仅适用于正则表达式的一部分，例如：</p><div align="left">
<table cellspacing="4" cellpadding="0" border="0">
<tbody><tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#ffffff"><pre>
Match ExAct case or (?i)ArBiTrARY(?-i) case
</pre></td>
<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
<tr>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"></td>
</tr>
</tbody></table>
</div>
<tt class="code">匹配ExAct大小写或任意大小写</tt> <tt class="code">匹配ExAct大小写或ARBitrary大小写</tt> <tt class="code">匹配精确大小写或ArBiTrARY大小写</tt></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="testing_expressions"><strong>21.6测试正则表达式</strong></a></font>
</td></tr>
<tr><td>
<blockquote>
<p>从JMeter 2.4开始，侦听器的<a href="component_reference.html#View_Results_Tree">View Results Tree</a>包含一个RegExp Tester，可直接在采样器响应数据上测试正则表达式。
</p><p>有一个<a href="http://www.regexplanet.com/advanced/java/index.html">网站</a>可以测试Java正则表达式。
</p><p>另一种方法是使用简单的测试计划来测试正则表达式。Java请求采样器可用于生成样本，或者HTTP采样器可用于加载文件。添加Debug Sampler和Tree View Listener，可以快速测试对正则表达式的更改，而无需访问任何外部服务器。
</p></blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
<table>
<tbody><tr>
<td bgcolor="#525D76">
<div align="right"><a href="index.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">指数</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="hints_and_tips.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">下一个</font></a></div>
</td>
<td bgcolor="#525D76">
<div align="right"><a href="functions.html"><font size="-1" color="#ffffff" face="arial,helvetica,sanserif">上一个</font></a></div>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>