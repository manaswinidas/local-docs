<html ><head>
<link rel="stylesheet" type="text/css" href="./css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Apache JMeter-开发人员指南：仪表板生成器</title>
<style>
  .code { font-weight: bold; }
</style>
</head>

<body bgcolor="#ffffff"  text="#000000" link="#525D76">
<table border="0" cellspacing="0">
<tbody><tr>
<td align="left">
<a href="http://www.apache.org"><img title="Apache软件基金会" width="261" height="106" src="./images/asf-logo.png" border="0" style="margin:0px 30px 0px 0px"></a>
</td>
<td align="right">
<a href="http://jmeter.apache.org/"><img width="259" height="88" src="./images/jmeter.png" alt="Apache JMeter" title="Apache JMeter" border="0"></a>
</td>
</tr>
</tbody></table>
<table border="0" cellspacing="4">
<tbody><tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td align="left" valign="top">
<br>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#525D76">
<font color="#ffffff" face="arial,helvetica,sanserif">
<strong>仪表板生成器</strong></font>
</td></tr>
<tr><td>
<blockquote>
<p>本文档介绍了仪表板生成引擎的体系结构和操作。
            </p><table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="overview"><strong>1概述</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="overview_architecture"><strong>1.1架构</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>仪表板生成引擎是基于示例操作流程的模块化功能。
                        <br>下图可以表示这些过程：</p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/dashboard.png"><br>
<font size="-1">图1-仪表板生成概述</font></td></tr></tbody></table>
<p>在此视图中，您可以看到：</p><ul>
                            <li>产生样品的来源（例如CSV文件）。
                            </li>
                            <li>一系列称为消费者的项目，对通过该项目的样本进行操作（例如，过滤，排序，计算等）。
                            </li>
                            <li>执行上下文，称为样本上下文，在其中存储使用者计算的结果。
                            </li>
                            <li>使用样本上下文的内容为用户生成最终结果（例如HTML页面生成）的一组项目，称为导出器。
                            </li>
                        </ul>
                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="overview_operation"><strong>1.2操作</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>在生成样本之前，将源与样本上下文关联，该上下文将用于存储消费者结果。
                    </p><p>然后，使用JMeter属性（由<tt class="code">jmeter.reportgenerator</tt>前缀）构建消费者链，以使用户能够对其进行自定义。
                    </p><p>当源发出样本时，它将样本发送给链中的第一个使用者。
                        <br>消费者可以有不同的行为：</p><ul>
                            <li>它可以处理样品并将其发送给下一个消费者。</li>
                            <li>它无法处理样品，因此将其存储并继续接收其他样品。当它可以处理存储的样本时，它将进行处理并将其发送给下一个使用者（例如，分类）。</li>
                            <li>它可以选择丢弃样品（例如过滤）。</li>
                        </ul>当来源停止生产样本时，消费者可以在样本上下文中发布结果。
                        <br>后者被发送到出口商组，以创建最终用户使用的结果。
                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="consumers_chain"><strong>2消费者链详细信息</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>

                </p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><img src="./images/screenshots/chain.png"><br>
<font size="-1">图2-消费者链</font></td></tr></tbody></table>
<p>该链从标准化人员开始，负责标准化每个样本的时间戳，因为JMeter允许使用不同的时间戳格式（请参阅<tt class="code">jmeter.save.saveservice.timestamp_format</tt> ）。
                </p><p>然后，两个使用者必须定义负载测试的开始时间和结束时间。
                </p><p>在同一级别，过滤器使用者根据<tt class="code">jmeter.reportgenerator.sample_filter</tt>属性保留或丢弃样本。
                </p><p>之后插入另一个过滤器以丢弃控制器样品。
                </p><p>取决于属性<tt class="code">jmeter.reportgenerator.graph。 <graph_id>.exclude_controllers</graph_id></tt> ，将在位置<tt class="code">A</tt>或<tt class="code">B</tt>处设置与<tt class="code">graph_id</tt>标识符匹配的图使用者。
                </p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="process_template"><strong>3模板处理</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="template_overview"><strong>3.1概述</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>生成器的默认导出器使用模板引擎<a href="http://freemarker.org/">freemarker</a>来生成html页面。
                        <br>模板文件位于由JMeter属性“ <tt class="code">jmeter.reportgenerator.template_dir</tt> ”定义的模板目录中，并具有扩展名“ <tt class="code">.fmkr</tt> ”。
                    </p><p>模板文件中的图形引用使用语法： <tt class="code">$ { <graph_id>。 <value>}</value></graph_id></tt>其中：</p><dl>
                            <dt><tt class="code">graph_id</tt></dt>
                            <dd>是与JMeter属性定义匹配的图的标识符</dd>
                            <dt><tt class="code">值</tt></dt>
                            <dd>是存储数据的值的名称。</dd>
                        </dl>
                    <p></p><p>每个图产生以下值：</p><dl>
                            <dt><tt class="code">maxX</tt> ：</dt>
                            <dd>图的最大横坐标（双精度）。</dd>
                            <dt><tt class="code">maxY</tt> ：</dt>
                            <dd>图的最大纵坐标（双精度）。</dd>
                            <dt><tt class="code">minX</tt> ：</dt>
                            <dd>图的最小横坐标（双精度）。</dd>
                            <dt><tt class="code">minY</tt> ：</dt>
                            <dd>图的最大纵坐标（双精度）。</dd>
                            <dt><tt class="code">标题</tt> ：</dt>
                            <dd>图的标题（字符串）。</dd>
                            <dt><tt class="code">值</tt> ：</dt>
                            <dd>表示图系列数据（字符串）的JSON对象。</dd>
                        </dl>
                    <p></p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="template_customization"><strong>3.2定制</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<p>您可以通过修改模板目录中的文件来自定义仪表板的生成。
                    </p><p>如果要将图形添加到仪表板，则必须<a href="#configure_graph">在JMeter属性中声明它，</a>并在模板文件中使用其引用。
                    </p><p>如果要从仪表板上删除图形，则必须在模板文件中删除其所有引用，并清除JMeter属性。</p></blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<table border="0" cellspacing="0" cellpadding="2" width="100%">
<tbody><tr><td bgcolor="#828DA6">
<font color="#ffffff" face="arial,helvetica,sanserif">
<a name="outlooks"><strong>4局限性和展望</strong></a>
</font>
</td></tr>
<tr><td>
<blockquote>
<ul>
                    <li>
                        <p>到目前为止，只有一个示例源实现与CSV文件格式紧密结合，我们应该使用示例源接口允许其他类型的源。</p>
                    </li>
                    <li>
                        <p>要添加自定义图，用户必须扩展<tt class="code">AbstractGraphConsumer</tt>或使用包<tt class="code">org.apache.jmeter.report.processor.graph.impl中</tt>提供的实现之一。可以通过将具体对象设置为基类并向其他属性（如选择器）提供公共访问权限来增强此功能。但是首先我们必须解决共享属性的问题（例如，随着时间的推移，图必须将相同的粒度属性分配给键选择器和时间速率聚合器）。
                        </p>
                    </li>
                    <li>
                        <p>链构建是在<tt class="code">org.apache.jmeter.report.dashboard之间调度的<tt class="code">。ReportGenerator.generate</tt>方法和使用者的实现。因此，负责建筑物的代码是分开的，此外，某些使用者可能是多余的，并且会损害报告生成的性能，而不是负载测试。
                        </tt></p><tt class="code">
                        <p>例如，每个<tt class="code">LatencyVSRequestGraphConsumer</tt>和<tt class="code">ResponseTimeVSRequestGraphConsumer</tt>实例都使用一个嵌入式使用者，可以根据<tt class="code">粒度</tt>和<tt class="code">exclude_controllers</tt>属性对其进行共享。
                        </p>
                        <p>因此，我们应该使消费者能够定义他们所需的链，并提供单个链构建器来处理这些链需求，以根据需要实例化所需的消费者。即对于相同的链需求声明，使用相同的使用者实例。否则，如果声明不同，则会创建新的使用者分支。
                        </p>
                    </tt></li><tt class="code">
                    <li>
                        <p>为了与JMeter属性中定义的图相匹配，应该动态构建生成的HTML页面中的图（DOM元素）。
                        </p>
                    </li>
                    <li>
                        <p>可以对生成的html页面进行一些改进：</p><ul>
                                <li>使用单个页面，并根据导航菜单选择隐藏图形。</li>
                                <li>建立或刷新图形时添加加载动画。</li>
                                <li>让用户使用JMeter属性确定图形是否可缩放。</li>
                                <li>使用<tt class="code">jquery.plot.setData（）</tt>方法来处理系列激活/停用，而不是重建图形。
                                </li>
                            </ul>
                        <p></p>
                    </li>
                </tt></ul></blockquote><tt class="code">
</tt></td></tr>
<tr><td><br></td></tr>
</tbody></table>
</blockquote>
<p></p>
</td></tr>
<tr><td><br></td></tr>
</tbody></table>
<br>
</td>
</tr>
<tr><td>
<hr noshade size="1">
</td></tr>
<tr>
<td>
<table width="100%">
<tbody><tr>
<td>
<font color="#525D76" size="-1"><em>版权所有©1999-2019，Apache软件基金会</em></font>
</td>
<td align="right">
<font color="#525D76" size="-1"><em>$ Id $</em></font>
</td>
</tr>
<tr><td colspan="2">
<div align="center"><font color="#525D76" size="-1">Apache，Apache JMeter，JMeter，Apache Feather和Apache JMeter徽标是Apache Software Foundation的商标。
</font>
</div>
</td></tr>
</tbody></table>
</td>
</tr>
</tbody></table>


<!-- end the processing -->














































</body></html>