<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - 3.0 Migration Guide">




    <title>Apache CXF-3.0迁移指南</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">指数</a> > <a href="how-tos.html">入门指南</a> > <a href="migration-guides.html">迁移指南</a> > <a href="30-migration-guide.html">3.0迁移指南</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h2 id="id-3.0MigrationGuide-3.0MigrationGuide">3.0迁移指南</h2><h4 id="id-3.0MigrationGuide-JAX-RS">JAX-RS</h4><ul><li>JAX-RS 2.0已经完全实现。</li><li>JAX-RS WADL自动生成代码已移至新的cxf-rt-rs-service-description模块。</li><li>现在，新的cxf-rt-rs-client模块中提供了JAX-RS 2.0客户端API和CXF特定的WebClient和Proxy客户端代码。重要说明：jaxrs：client元素的名称空间已从“ http://cxf.apache.org/jaxrs”更改为“ http://cxf.apache.org/jaxrs-client”</li><li>CXF RequestHandler和ResponseHandler过滤器已删除，请在需要时使用JAX-RS 2.0 ContainerRequestFilter和ContainerResponseFilter以及WriterInterceptor和ReaderInterceptor。</li><li>CXF JAX-RS Form扩展名已被删除，请使用JAX-RS 2.0 Form。</li><li>CXF JAX-RS ParameterHandler已删除，请使用JAX-RS 2.0 ParamConverterProvider。</li><li>javax.annotation。资源注释不能再用于注释JAX-RS上下文属性。仅javax.ws.rs.core。从现在开始支持上下文注释。</li></ul><h4 id="id-3.0MigrationGuide-JAX-WS/Soap">JAX-WS /肥皂</h4><ul><li>添加新的代码生成器前端，以添加CXF特定的构造函数和方法。 （将“ -fe cxf”传递给wsdl2java）</li><li>使AbstractFeature子类成为WebServiceFeature并更新JAX-WS前端以查找它们。</li><li>“ jaxb-validation-event-handler”现在适用于阅读和写作。 （以前仅适用于阅读）。如果只需要为一个方向设置，则有单独的jaxb-（（reader | writer））-validation-event-handler属性。</li><li>如果传递给CXF的WSDL位置无效，则CXF * MAY *的早期版本将忽略该错误，并继续进行，就像为WSDL传递了“空”一样。3.0现在将引发异常。</li><li>大多数用例不再需要ClientProxy.getClient（proxy）。客户端代理实例现在可以直接实现客户端API。直接投射给客户应该可以。</li></ul><h4 id="id-3.0MigrationGuide-Transports">运输工具</h4><ul><li>删除了对较早的JMS 1.0.2 API的支持。您的JMS提供程序必须支持1.1 API。</li><li>添加了新的基于WebSocket的传输</li><li>添加了对基于Netty的HTTP服务器和客户端的支持</li></ul><h4 id="id-3.0MigrationGuide-BeanValidation">Bean验证</h4><p>已为JAX-RS和JAX-WS前端引入了Bean验证1.1拦截器和功能。</p><h4 id="id-3.0MigrationGuide-WS-Security">WS-安全性</h4><ul><li>现在，DefaultCryptoCoverageChecker包含布尔属性，以轻松检查WSS UsernameToken是否已签名和/或加密。现在的默认值是必须对UsernameToken进行加密。</li><li>CXF 3.0.x选择了Apache WSS4J（2.0.0）的新主版本。此版本中有一些更改会影响现有的CXF用户。《 <a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">WSS4J 2.0.0迁移指南》</a>中广泛总结了这些更改。主要变化如下：<br clear="none"><ul><li>如果您已实现CallbackHandler来设置/检索UsernameTokens / Signatures / Decryption / etc的密码，则WSPasswordCallback对象的名称空间已从“ org.apache.ws.security”更改为“ org.apache.wss4j.common”。 ext”。</li><li>如果实现了CallbackHandler来创建SAML断言，则SAML bean对象的名称空间已从“ org.apache.ws.security.saml.ext”更改为“ org.apache.wss4j.common.saml”。</li><li>WSS4J 1.6.x使用saml属性文件来签名SAML声明。在WSS4J 2.0.0中已将其删除。而是SAMLCallback对象包含可以设置为签署声明的其他属性。有关此的更多信息，请参见《 <a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">WSS4J 2.0.0迁移指南</a> 》中标题为“ SAML声明更改”的部分。</li><li>WSS4J 2.0.0中已删除了少量配置标签。有关此的更多信息，请参见《 <a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">WSS4J 2.0.0迁移指南</a> 》中标题为“ WSS4J 2.0.0中的<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">已</a>删除配置标签”的部分。</li><li>派生密钥和安全对话的默认名称空间现在为“ <span class="nolink">http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512</span> ”。可以通过新的配置标签来使用较旧的名称空间。</li><li>默认情况下，不再允许使用RSA v1.5密钥传输算法。可以通过配置标签进行更改。</li><li>在出站端关闭BSP（基本安全配置文件）合规性（基本安全配置文件）不再具有对邮件的一部分签名时禁用添加InclusiveNamespaces PrefixList的作用。现在，这由WSS4J 2.0.0中的单独配置标记控制。</li></ul></li><li>除了上述更改之外，CXF 3.0.0完全支持WSS4J 2.0.0中的新流（基于StAX的）WS-Security实现。</li><li>要将流代码用于基于手动“操作”的方法，只需更改出站和入站拦截器，如下所示：<ul><li>“ org.apache.cxf.ws.security.wss4j。WSS4JOutInterceptor”改为“ org.apache.cxf.ws.security.wss4j。WSS4JStaxOutInterceptor”。</li><li>“ org.apache.cxf.ws.security.wss4j。WSS4JInInterceptor”改为“ org.apache.cxf.ws.security.wss4j。WSS4JStaxInInterceptor”。</li></ul></li><li>对于基于WS-SecurityPolicy的配置WS-Security的方法，只需设置JAX-WS属性SecurityConstants。ENABLE_STREAMING_SECURITY（“ ws-security.enable.streaming”）为“ true”。有关WSS4J 2.0.0中可用的流功能的更多信息，请参见WSS4J的<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/streaming.html">流文档</a>页面。</li></ul><h4 id="id-3.0MigrationGuide-WS-ReliableMessaging">WS-ReliableMessaging</h4><ul><li>WS-RM子系统已更新，可以更完整地实现1.1规范。</li><li>通过（（Closable）proxy）.close（）关闭客户端代理现在将终止打开序列。</li></ul><h4 id="id-3.0MigrationGuide-Majordependencychanges">主要依赖项变更</h4><ul><li>需要Spring 3.2或更高版本。在Spring 3.x中已弃用的对该API的调用已被删除。这允许CXF 3.0与Spring 4一起使用，但是意味着它不再与Spring 2.5一起使用。</li></ul><h4 id="id-3.0MigrationGuide-CXFModule/JarChanges">CXF模块/瓶子更换</h4><ul><li>将api / core组合成一个cxf-core。所有与“ wsdl”相关的内容已移至新的cxf-wsdl捆绑包，以删除JAX-RS应用程序的wsdl4j要求。</li><li>不再支持Karaf2.2.x。现在需要Karaf2.3.x。</li><li>对javax.mail实现的直接依赖已被删除，CXF maven poms将不再以传递方式拉入。对于MOST用户，这不是问题。但是，如果您的应用程序使用MTOM或带有附件的Soap w / Attachments或类似的程序，它们需要一些DataContentHandlers作为邮件实现的一部分，则可能需要将其重新添加到类路径中。</li><li>DynamicClientFactory已从JAXB数据绑定移至Simple前端。但是，强烈建议用户使用JaxWsDynamicClientFactory子类。</li><li>由于维护问题以及无法从捆绑包中使用新功能，因此删除了大型捆绑包。用户应升级到其应用程序所需的各个模块。</li></ul><h4 id="id-3.0MigrationGuide-Removed/ChangedAPI's">删除/更改的API</h4><ul><li>CXFBusImpl已被删除。唯一的子类是ExtensionManagerBus（SpringBus和Blueprint / osgi的子类是该类的子类），因此该功能已推入ExtensionManagerBus中。一些“常用”方法直接放在总线接口上以使用总线清理器进行制作（不强制转换为impl）。</li><li>总线上未使用的“ run（）”方法已删除。</li><li>合并BaseDataReader / DataReader和写入程序的相同内容，以摆脱未引用的“ Base”版本。</li><li>Destination.getBackChannel上2个未使用的参数已删除。它们未使用，通常以null形式传递。</li><li>删除QueryHandlers->这些最初用于？wsdl处理（并且仍用于？js）。但是，最好将这些东西直接作为拦截器在拦截器链上完成，以允许用户提供的拦截器也可以处理它们。我只想删除这些。 （显然更新了？js的东西）将简化CXFServlet。</li><li>删除了所有/META-INF/cxf/cxf-extension-XYZ.xml文件。它们已被弃用，很长一段时间都不需要。</li><li>更新了ConduitInitiator和DestinationFactory，以将Bus作为参数传递给各种方法。</li><li>删除了对旧的bus-extensions.xml文件的支持（转而使用当前且速度更快的bus-extensions.txt）</li><li>将所有XML解析和写入StaxUtils移动，将基于DOM的实用程序移动到DOMUtils。消除了使用基于SAX的解析和基于Transformer的编写的XMLUtils类。这可以简化代码并提高安全性，因为我们可以提供更好的限制并可以使用基于StAX的IO进行更多控制。</li><li>AddressingProperties已从接口切换为可以直接使用“ new”创建的具体类。AddressingPropertiesImpl已被删除。</li><li>我们保存在常量上的许多接口/类都已被删除或移动。特别是，删除了XmlSchemaConstants（直接使用XmlSchema库中的常量），将WSDLConstants从api移动到rt-wsdl，删除了SOAPConstants（大多数在WSDLConstants中可用）。目标是减少一些内存使用并帮助启动时间并减少大量重复。</li><li>AlternativeSelector，PolicyEngine和其他PolicyRelated类已更新，以在适当时传递当前Message，以允许使用消息上下文信息来选择替代项。但是，请记住，可能会缓存所选的替代项，因此，如果上下文信息发生更改，则可能不会重新计算替代项。</li><li>在返回HTTP客户端错误的情况下，FailoverTargetSelector不会激活故障转移，只能识别HTTP 404和503状态。如果需要支持所有HTTP错误，请将FailoverTargetSelector supportNotAvailableErrorsOnly属性设置为false。</li><li>默认情况下，ServletController不会覆盖端点地址，因为当通过多个路径访问给定端点时，它会产生副作用。如果需要，将CXFServlet的“ disable-address-updates”参数设置为“ false”。</li><li>很久以来不推荐使用org.apache.cxf.frontend。MethodDispatcher已被删除。（已替换为org.apache.cxf.service.invoker。2.6中的MethodDispatcher）</li><li>cxf-rt-databinding-jaxb中不推荐使用的JAXBToStringBuilder和JAXBToStringStyle类已被删除。该功能已经由cxf-xjc-runtime提供了一段时间。</li><li>不推荐使用的URIMappingInterceptor已被删除。由于一系列与安全性相关的问题，因此一段时间以来，它都没有出现在默认链上。</li><li>SchemaValidation批注已删除其不赞成使用的“ enabled”属性。请使用其“类型”属性来控制验证。</li><li>从工厂类型注释中删除了“弹簧”类型。而是使用factoryClass = <span style="line-height:1.4285715">SpringBeanFactory.class。</span></li></ul></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=25203937">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=25203937&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>