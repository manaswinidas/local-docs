<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - LogBrowser - System architectural design">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-LogBrowser-系统架构设计</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="logbrowser.html">LogBrowser</a> > <a href="logbrowser-system-architectural-design.html">LogBrowser-系统架构设计</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="LogBrowser-Systemarchitecturaldesign-Systemarchitecturaldesign">系统架构设计</h1>

<h2 id="LogBrowser-Systemarchitecturaldesign-Definitions">定义</h2>

<ul><li><strong>BootstrapStorage</strong>是提供用户订阅的供稿列表的服务；</li><li><strong>LogsServer</strong>是独立的应用程序，它发布<code>AtomPullServer</code>和<code>BootstrapStorage</code>端点。它包含提供内容（例如HTML，JS或CSS文件）的Web服务器；</li></ul>


<h2 id="LogBrowser-Systemarchitecturaldesign-ChosenSystemArchitecture">选择的系统架构</h2>

<p>只有一个应用程序可以发布<code>AtomPullServer</code>和<code>BootstrapStorage</code> Intranet中的端点–应用程序具有“管理角色”。该应用程序必须包括用于提供内容的Web服务器。如果要为Intranet中的另一个应用程序添加日志记录，则必须定义<code>AtomPushBean</code>在此应用程序中。 <code>AtomPushBean</code>将事件发送到<code>AtomPullServer</code> 。用户自己管理供稿列表-他必须知道端点的URL才能添加新的供稿。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/centralisedStructure.png"></span></p>

<p><strong>好处</strong></p>

<ul><li>天然溶液；</li><li>可以轻松添加新功能；</li><li>用户设置被远程存储；</li></ul>


<p><strong>缺点</strong></p>

<ul><li>具有“管理角色”的应用程序执行其他任务-性能较差；</li></ul>


<h2 id="LogBrowser-Systemarchitecturaldesign-DiscussionofAlternativeDesigns">替代设计的讨论</h2>

<h3 id="LogBrowser-Systemarchitecturaldesign-Centralizedstructurewithlogsserver">带有日志服务器的集中式结构</h3>

<p>它是先前概念的扩展。 <code>AtomPullServer</code>和<code>BootstrapStorage</code>已移至独立应用程序LogsServer。此外，LogsServer包括Web服务器。所有应用程序都通过以下方式与LogsServer通信<code>AtomPushBean</code> 。可以通过向CXF项目添加新模块来轻松完成此操作，该模块将使用<code>AtomPullServer</code>和<code>BootstrapStorage</code>并将编译为WAR软件包。</p>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/centralisedStructureWithLogServer.png"></span></p>

<p><strong>好处</strong></p>

<ul><li>天然溶液；</li><li>可以轻松添加新功能；</li><li>用户设置被远程存储；</li><li>应用程序不执行其他任务；</li><li>LogsServer可以轻松更新为新版本；</li></ul>


<p><strong>缺点</strong></p>

<ul><li>用户必须配置和部署LogsServer（但是这没什么大不了，但这是一个附加步骤）</li></ul>


<h3 id="LogBrowser-Systemarchitecturaldesign-Decentralizedstructurewithlogsbrowserbasedonstandaloneapplication">基于独立应用程序的日志浏览器的分散结构</h3>

<p>日志浏览器是使用Swing库实现的。用户自己管理供稿列表-他必须知道端点的URL才能添加新的供稿。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/decentralisedStructure.png"></span></p>

<p><strong>好处</strong></p>

<ul><li>日志浏览器可以脱机工作；</li><li>订阅的提要和用户凭证可以存储在本地；</li><li>负载均匀分布；</li></ul>


<p><strong>缺点</strong></p>

<ul><li>很难分发和更新应用程序（日志浏览器）；</li><li>必须安装Java Runtime Environment。</li></ul>


<h3 id="LogBrowser-Systemarchitecturaldesign-Decentralizedstructurewithlogsbrowserbasedonwebapplication">基于Web应用程序的日志浏览器的分散结构</h3>

<p>用户自己管理供稿列表-他必须知道端点的URL才能添加新的供稿。所需文件（HTML，JS和CSS）可从任何可用的Web服务器中检索。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/decentralisedStructure.png"></span></p>

<p><strong>好处</strong></p>

<ul><li>日志浏览器可以脱机工作；</li><li>负载均匀分布；</li></ul>


<p><strong>缺点</strong></p>

<ul><li>Internet浏览器阻止连接到与地址栏中指定的主机不同的主机；</li><li>HTML 5中引入的本地存储功能并未为所有互联网浏览器所采用（例如IE浏览器）;</li></ul>


<h1 id="LogBrowser-Systemarchitecturaldesign-Detaildescriptionofcomponents">组件的详细说明</h1>

<h2 id="LogBrowser-Systemarchitecturaldesign-LogBrowser">日志浏览器</h2>

<p>LogBrowser组件是富Internet应用程序（RIA）。它具有复杂的图形用户界面，可以适应用户的要求。LogBrowser组件将使用HTML，CSS和JavaScript制作，以与所有领先的Web浏览器完全兼容。</p>

<p>LogBrowser组件的主要功能是浏览日志条目，这些条目由<code>AtomPullServer</code>组件。搜索日志条目是浏览的扩展。通过建立适当的请求来完成，该请求与FIQL格式兼容。此外，用户的设置使用以下命令保存（或选择恢复） <code>BootstrapStorage</code>零件。</p>

<p>组件之间的通信将通过RESTful Web服务完成。数据交换将是异步的-不会阻止用户的操作。</p>

<p>LogBrowser组件将支持国际化。</p>

<h3 id="LogBrowser-Systemarchitecturaldesign-Technology">技术</h3>

<p>该组件将基于<a shape="rect" class="external-link" href="http://code.google.com/webtoolkit/" rel="nofollow">Google Web Toolkit</a> （GWT）库实现。最初，我们计划使用<a shape="rect" class="external-link" href="http://jquery.com/" rel="nofollow">JQuery</a>和<a shape="rect" class="external-link" href="http://jqueryui.com/" rel="nofollow">JQuery UI</a>库来实现组件，但是在分析了项目的复杂性和Apache CXF社区的需求之后，我们决定使用GWT库。这个决定有两个优点：</p>

<ul><li>组件将使用Java语言实现。接下来的GWT将其翻译成JavaScript语言。对于Apache CXF社区来说，最重要的功能是主要的编程语言是Java。另外，翻译后的代码也<a shape="rect" class="external-link" href="http://code.google.com/webtoolkit/doc/latest/DevGuideOptimizing.html" rel="nofollow">进行了优化以提高性能</a> 。</li><li>使用JUnit库创建表示层的单元测试。对于JQuery库，将使用QUnit库和JavaScript语言创建单元测试。执行它们也存在问题（结果取决于Web浏览器）。</li><li>一大堆随时可用的<a shape="rect" class="external-link" href="http://code.google.com/webtoolkit/doc/latest/RefWidgetGallery.html" rel="nofollow">小部件</a> 。无需创建自己的自定义窗口小部件。</li><li>建立对国际化的支持。</li></ul>


<h3 id="LogBrowser-Systemarchitecturaldesign-Storingsettings">储存设定</h3>

<p>LogBrowser组件的功能之一是在本地存储用户的设置（端点配置，用户凭据等）。不幸的是，GWT不支持本地存储。因此，我们将使用<a shape="rect" class="external-link" href="http://www.dojotoolkit.org/" rel="nofollow">DojoCore</a> 。更准确地说，我们将使用<a shape="rect" class="external-link" href="http://en.wikipedia.org/wiki/Dojo_Toolkit#Client-side_data_storage" rel="nofollow">DojoStorage</a>模块，该模块是DojoCore的一部分。</p>

<p>Dojo Storage允许Web应用程序在用户的许可下持久且安全地在客户端存储数据。它可以在现有的Web浏览器上运行，包括Internet Explorer，Firefox和Safari。当包含在网页中时，Dojo Storage将确定持久存储信息的最佳方法。在Firefox 2上，它使用本机浏览器持久性；在其他浏览器上，它使用隐藏的Flash小程序。<a shape="rect" class="external-link" href="http://www.adobe.com/products/player_census/flashplayer/version_penetration.html" rel="nofollow">在大约95％</a>的连接到Web的计算机上安装<a shape="rect" class="external-link" href="http://www.adobe.com/products/player_census/flashplayer/version_penetration.html" rel="nofollow">了</a> Flash 6+之后，该存储机制可用于Web的许多已安装基础。</p>

<p>如果Web浏览器不支持任何本地存储解决方案，则LogBrowser组件会将设置存储在操作内存中。设置将在应用程序生命周期中始终可用。如果用户关闭网络浏览器并再次运行应用程序，设置将从<code>BootstrapStorage</code>零件。</p>

<p>下图显示了加载和修改设置算法。</p>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/loadingSettings.png"></span></p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/modifyingSettings.png"></span></p>

<h3 id="LogBrowser-Systemarchitecturaldesign-Accesscontrol">访问控制</h3>

<p><code>AtomPullServer</code>和<code>BootstrapStorage</code>组件通过RESTful Web服务发布其API。的访问控制<code>AtomPullServer</code>是可选的。但是访问控制<code>BootstrapStorage</code>是必须的。另一方面，对这些组件的访问控制将以相同的方式实现-使用WSSE UsernameToken。</p>

<p>授权所需的数据将通过<a shape="rect" class="external-link" href="http://www.xml.com/pub/a/2003/12/17/dive.html" rel="nofollow">HTTP标头</a>发送，例如：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
POST /atom.cgi HTTP/1.1
Host: bob.example.com
Content-Type: application/atom+xml
Authorization: WSSE profile="UsernameToken"
X-WSSE: UsernameToken Username="bob", PasswordDigest="quR/EWLAV4xLf9Zqyw4pDmfV9OY=", 
Nonce="d36e316282959a9ed4c89851497a717f", Created="2003-12-15T14:43:07Z"
</pre>
</div></div>

<p>当授权失败时，Web服务将如下响应：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
HTTP/1.1 401 Unauthorized
WWW-Authenticate: WSSE realm="foo", profile="UsernameToken"
</pre>
</div></div>

<p>授权过程使用UsernameTokenInterceptor。</p>

<p>下图显示了在访问控制期间执行的操作<code>AtomPullServer</code>和<code>BootstrapStorage</code>组件。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/aps_accessControl.png"></span></p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/bs_accessControl.png"></span></p>

<h3 id="LogBrowser-Systemarchitecturaldesign-Browsing,searchinglogentries">浏览，搜索日志条目</h3>

<p>下图显示了在浏览和搜索日志条目期间执行的操作。</p>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/browsingLogEntries.png"></span></p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-system-architectural-design.data/searchingLogEntries.png"></span></p>

<h2 id="LogBrowser-Systemarchitecturaldesign-AtomPullServer">凌动服务器</h2>

<p>的<code>AtomPullServer</code>组件管理日志条目。该组件通过注册的拦截器捕获新的日志条目。可以定义很多<code>AtomPullServer</code>在您的应用程序中-每个捕获不同类型的日志条目。与组件的通信是通过RESTful Web服务完成的。</p>

<p>目前<code>AtomPullServer</code>组件仅支持XML MIME类型。必须添加JSON类型支持。此外，还必须为选定的操作添加FIQL格式支持。</p>

<p>组件的RESTful Web服务包含以下操作：</p>

<ul><li><strong>getXmlFeedWithPage-</strong>日志条目的操作返回列表。结果是分页的。如果请求采用FIQL格式，则操作将返回与参数匹配的日志条目列表。操作将支持XML和JSON MIME类型。</li><li><strong>getNumberOfAvailableRecords-</strong>所有日志条目的操作返回计数。如果请求采用FIQL格式，则操作将返回与参数匹配的日志条目计数。操作将支持XML和JSON MIME类型。</li><li><strong>getEntry-</strong>操作返回单个日志条目。操作将支持XML和JSON MIME类型。</li></ul>


<h2 id="LogBrowser-Systemarchitecturaldesign-BootstrapStorage">引导存储</h2>

<p>的<code>BootstrapStorage</code>存储用户的设置。需要为此组件定义访问控制。设置将存储在外部数据源中。我们将提供用于在XML文件中存储设置的基本实现-用户名必须是唯一的，因为它是关键。的<code>BootstrapStorage</code>由于安全问题，该组件将不存储用户凭据。与组件的通信将通过RESTful Web服务完成。只能定义一个<code>BootstrapStorage</code>在您的应用程序中。</p>

<p>组件的RESTful Web服务将包含以下操作：</p>

<ul><li><strong>setSettings-</strong>操作会将用户的设置保存到外部数据源。操作将支持JSON MIME类型。</li><li><strong>getSettings-</strong>操作将从外部数据源加载用户的设置。操作将支持JSON MIME类型。</li></ul></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=23335743">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=23335743&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>