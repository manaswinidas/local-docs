<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Jetty Configuration">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-Jetty配置</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="transports.html">传输</a> > <a href="http-transport.html">HTTP传输</a> > <a href="jetty-configuration.html">码头配置</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="JettyConfiguration-ConfiguringtheJettyRuntime">配置码头运行时</h1>


<h3 id="JettyConfiguration-Overview">总览</h3>

<p>本部分用于配置用于CXF独立模型的Jetty运行时。使用解耦端点的HTTP服务器和HTTP客户端使用Jetty运行时。可以配置Jetty运行时的线程池，连接器和处理程序。您还可以通过Jetty运行时为HTTP服务提供商设置许多安全设置。</p>

<h3 id="JettyConfiguration-Namespace">命名空间</h3>

<p>用于配置Jetty运行时的元素在名称空间中定义<code><a shape="rect" href="http://cxf.apache.org/transports/http-jetty/configuration">http://cxf.apache.org/transports/http-jetty/configuration</a></code> 。通常使用前缀来指代<code>httpj</code> 。为了使用Jetty配置元素，您需要将以下所示的行添加到<code>beans</code>端点的配置文件的元素。此外，您需要将配置元素的名称空间添加到<code>xsi:schemaLocation</code>属性。</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;beans ...
  xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration
  ...
  xsi:schemaLocation="...
                      http://cxf.apache.org/transports/http-jetty/configuration
                      http://cxf.apache.org/schemas/configuration/http-jetty.xsd
                      ...&gt;
</pre>
</div></div>

<h3 id="JettyConfiguration-Theengine-factoryelement">的<code>engine-factory</code>元件</h3>

<p>的<code>httpj:engine-factory</code> element是用于配置应用程序使用的Jetty运行时的根元素。它具有一个必填属性，即bus，其值是用于管理正在配置的Jetty实例的Bus的名称。</p>
<div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>该值通常是cxf，它是默认总线实例的名称。</p></div></div>
<p>的<code>httpj:engine-factory</code>元素具有三个子元素，这些子元素包含用于配置由Jetty运行时工厂实例化的HTTP端口的信息。这些孩子如下所述。</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>元件</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：engine</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定特定Jetty运行时实例的配置。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：identifiedTLSServerParameters</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定用于保护HTTP服务器的可重用属性集。它有一个属性， <code>id</code> ，它指定可以引用属性集的唯一标识符。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：identifiedThreadingParameters</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定一组可重用的属性，以控制Jetty实例的线程池。它有一个属性， <code>id</code> ，它指定可以引用属性集的唯一标识符。</p></td></tr></tbody></table></div>


<h3 id="JettyConfiguration-Theengineelement">的<code>engine</code>元件</h3>

<p>的<code>httpj:engine</code>元素用于配置Jetty运行时的特定实例。它有一个属性， <code>port</code> ，指定由Jetty实例管理的端口号。</p>
<div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>您可以为端口属性指定值0。在<code>httpj:engine</code>端口属性设置为0的元素用作所有未显式配置的Jetty侦听器的配置。</p></div></div>
<p>每<code>httpj:engine</code>元素可以具有两个子元素：一个用于配置安全属性，另一个用于配置Jetty实例的线程池。对于每种类型的配置，您可以直接提供配置信息，也可以提供对父级中定义的一组配置属性的引用<code>httpj:engine-factory</code>元件。</p>

<p>下面介绍用于提供配置属性的子元素。</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>元件</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：tlsServerParameters</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定一组属性，用于配置用于特定Jetty实例的安全性。有关更多信息，请参见<a shape="rect" href="https://cwiki.apache.org/confluence/display/CXF20DOC/TLS+Configuration">TLS配置</a>页面。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：tlsServerParametersRef</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指的是由<code>identifiedTLSServerParameters</code>元件。的<code>id</code>属性提供所引用的ID <code>identifiedTLSServerParameters</code>元件。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：threadingParameters</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定特定Jetty实例使用的线程池的大小。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：threadingParametersRef</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指的是由<code>identifiedThreadingParameters</code>元件。的<code>id</code>属性提供所引用的ID <code>identifiedThreadingParameters</code>元件。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：连接器</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>您可以使用spring bean语法实例化连接器并设置连接器的属性，该连接器将设置为Jetty服务器引擎。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：处理程序</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>您可以使用spring bean语法实例化Jetty处理程序列表并设置这些处理程序的属性，Jetty处理程序将设置为Jetty服务器引擎。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：sessionSupport</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果该值为true，那么Jetty引擎将为Jetty服务器引擎设置会话管理器以维护会话。它的默认值为false。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>httpj：reuseAddress</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>该值为true，Jetty Engine连接器的套接字将启用SO_REUSEADDR标志。它的默认值为true。（此功能在CXF 2.0.3中可用）</p></td></tr></tbody></table></div>


<h3 id="JettyConfiguration-Configuringthethreadpool">配置线程池</h3>

<p>您可以通过以下任一方式配置Jetty实例的线程池的大小：</p>
<ul><li>使用a指定线程池的大小<code>identifiedThreadingParameters</code>中的元素<code>engine-factory</code>元件。然后，您可以使用<code>threadingParametersRef</code>元件。</li><li>使用a直接指定线程池的大小<code>threadingParameters</code>元件。<br clear="none">的<code>threadingParameters</code>有两个属性可以指定线程池的大小。这些属性如下所述。
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>的<code>httpj:identifiedThreadingParameters</code>元素有一个孩子<code>threadingParameters</code>元件。</p></div></div></li></ul>


<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>minThreads</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定Jetty实例可用于处理请求的最小线程数。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>maxThreads</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定Jetty实例可用于处理请求的最大线程数。</p></td></tr></tbody></table></div>


<h3 id="JettyConfiguration-Example">例</h3>

<p>下面的示例显示了一个配置片段，该片段在端口号9001上配置Jetty实例。</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:sec="http://cxf.apache.org/configuration/security"
  xmlns:http="http://cxf.apache.org/transports/http/configuration"
  xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration"
  xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
  xsi:schemaLocation="http://cxf.apache.org/configuration/security
  		      http://cxf.apache.org/schemas/configuration/security.xsd
            http://cxf.apache.org/transports/http/configuration
            http://cxf.apache.org/schemas/configuration/http-conf.xsd
            http://cxf.apache.org/transports/http-jetty/configuration
            http://cxf.apache.org/schemas/configuration/http-jetty.xsd
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"&gt;
  ...

  &lt;httpj:engine-factory bus="cxf"&gt;
    &lt;httpj:identifiedTLSServerParameters id="secure"&gt;
      &lt;httpj:tlsServerParameters&gt;
        &lt;sec:keyManagers keyPassword="password"&gt;
          &lt;sec:keyStore type="JKS" password="password"
                      file="certs/cherry.jks"/&gt;
        &lt;/sec:keyManagers&gt;
      &lt;/httpj:tlsServerParameters&gt;
    &lt;/httpj:identifiedTLSServerParameters&gt;

    &lt;httpj:engine port="9001"&gt;
      &lt;httpj:tlsServerParametersRef id="secure" /&gt;
      &lt;httpj:threadingParameters minThreads="5"
                                 maxThreads="15" /&gt;
      &lt;httpj:connector&gt;
        &lt;beans:bean class="org.eclipse.jetty.server.bio.SocketConnector"&gt;
           &lt;beans:property name = "port" value="9001" /&gt;
        &lt;/beans:bean&gt;
      &lt;/httpj:connector&gt;
      &lt;httpj:handlers&gt;
        &lt;beans:bean class="org.eclipse.jetty.server.handler.DefaultHandler"/&gt;         
      &lt;/httpj:handlers&gt;
      &lt;httpj:sessionSupport&gt;true&lt;/httpj:sessionSupport&gt;
    &lt;/httpj:engine&gt;
  &lt;/httpj:engine-factory&gt;
 &lt;/beans&gt;
</pre>
</div></div></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=60564">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=60564&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>