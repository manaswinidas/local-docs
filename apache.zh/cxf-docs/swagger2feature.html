<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Swagger2Feature">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-Swagger2功能</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="configuration.html">配置</a> > <a href="featureslist.html">功能</a>列表> <a href="swagger2feature.html">Swagger2功能</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="Swagger2Feature-Swagger2Feature">Swagger2功能</h1><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1568858552452 {padding: 0px;}
div.rbtoc1568858552452 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1568858552452 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1568858552452">
<ul class="toc-indentation"><li><a shape="rect" href="#Swagger2Feature-Swagger2Feature">Swagger2功能</a></li><li><a shape="rect" href="#Swagger2Feature-Setup">设定</a></li><li><a shape="rect" href="#Swagger2Feature-Properties">性质</a></li><li><a shape="rect" href="#Swagger2Feature-ConfiguringfromCode">从代码配置</a></li><li><a shape="rect" href="#Swagger2Feature-ConfiguringinSpring">在春季进行配置</a></li><li><a shape="rect" href="#Swagger2Feature-ConfiguringinBlueprint">在蓝图中配置</a></li><li><a shape="rect" href="#Swagger2Feature-ConfiguringinCXFNonSpringJaxrsServlet">在CXFNonSpringJaxrsServlet中配置</a></li><li><a shape="rect" href="#Swagger2Feature-New:ConfiguringfromPropertiesfile">新增：从属性文件配置</a></li><li><a shape="rect" href="#Swagger2Feature-EnablinginSpringBoot">在Spring Boot中启用</a></li><li><a shape="rect" href="#Swagger2Feature-AccessingSwaggerDocuments">访问Swagger文档</a></li><li><a shape="rect" href="#Swagger2Feature-EnablingSwaggerUI">启用Swagger UI</a>
<ul class="toc-indentation"><li><a shape="rect" href="#Swagger2Feature-EnablingSwaggerUIinOSGicontainer(Karaf)">在OSGi容器（Karaf）中启用Swagger UI</a></li><li><a shape="rect" href="#Swagger2Feature-AutomaticUIActivation">自动UI激活</a></li><li><a shape="rect" href="#Swagger2Feature-UnpackingSwaggerUIresources">解包Swagger UI资源</a></li><li><a shape="rect" href="#Swagger2Feature-ConfiguringSwaggerUI(3.2.7+)">配置Swagger UI（3.2.7+）</a></li></ul>
</li><li><a shape="rect" href="#Swagger2Feature-ReverseProxy">反向代理</a></li><li><a shape="rect" href="#Swagger2Feature-ConvertingtoOpenAPIJSON">转换为OpenAPI JSON</a></li><li><a shape="rect" href="#Swagger2Feature-Samples">样品</a></li></ul>
</div><p><br clear="none"></p><p>CXF Swagger2Feature允许您通过简单的配置从JAX-RS服务端点生成<a shape="rect" class="external-link" href="http://swagger.io/specification/" rel="nofollow">Swagger 2.0</a>文档。</p><p>为了生成<a shape="rect" class="external-link" href="https://github.com/swagger-api/swagger-spec/blob/master/versions/1.2.md" rel="nofollow">Swagger 1.2</a>文档，可以使用SwaggerFeature而不是Swagger2Feature（对于CXF版本<= 3.1.x）。</p><p>可以使用Java或使用Spring或Blueprint Bean以编程方式配置这些功能。</p><h1 id="Swagger2Feature-Setup">设定</h1><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;
    &lt;artifactId&gt;cxf-rt-rs-service-description-swagger&lt;/artifactId&gt;
    &lt;version&gt;3.1.11&lt;/version&gt;
&lt;/dependency&gt;

</pre>
</div></div><p>请注意，如果使用旧的CXF 3.1.x版本，则需要使用<strong>cxf-rt-rs-service-description</strong> 。</p><p><br clear="none"></p><h1 id="Swagger2Feature-Properties">性质</h1><p><span style="line-height:1.4285715">可以在Swagger2Feature中配置以下可选参数</span></p><p><span style="line-height:1.4285715">请注意，下面列出的某些属性在SwaggerFeature中不可用或以不同的方式使用，因为在Swagger 2.0和Swagger 1.2中相应的属性以不同的方式使用。请参阅相应的Swagger文档以获取更多信息。）</span></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"><col span="1"></colgroup><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh">名称</th><th colspan="1" rowspan="1" class="confluenceTh">描述</th><th colspan="1" rowspan="1" class="confluenceTh">默认</th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">basePath</td><td colspan="1" rowspan="1" class="confluenceTd">上下文根路径<sup>+</sup></td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">联系</td><td colspan="1" rowspan="1" class="confluenceTd">联系信息<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空（在CXF 3.1.x“ users@cxf.apache.org”中）</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">描述</td><td colspan="1" rowspan="1" class="confluenceTd">说明<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空（在CXF 3.1.x“应用程序”中）</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">filterClass</td><td colspan="1" rowspan="1" class="confluenceTd">安全过滤器<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">主办</td><td colspan="1" rowspan="1" class="confluenceTd">主机和端口<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ignoreRoutes</td><td colspan="1" rowspan="1" class="confluenceTd">扫描所有资源时排除特定路径（请参见scanAllResources） <span>+</span> <span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">执照</td><td colspan="1" rowspan="1" class="confluenceTd">执照<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">“ Apache 2.0许可证”</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">licenceUrl</td><td colspan="1" rowspan="1" class="confluenceTd">许可网址<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">“ <span class="nolink">http://www.apache.org/licenses/LICENSE-2.0.html</span> ”</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">prettyPrint</td><td colspan="1" rowspan="1" class="confluenceTd">生成swagger.json时，漂亮地打印json文档<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">假</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">resourcePackage</td><td colspan="1" rowspan="1" class="confluenceTd">用逗号分隔的软件包名称列表，必须在其中扫描资源<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">在终结点计算机上配置的服务类别的列表</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">runAsFilter</td><td colspan="1" rowspan="1" class="confluenceTd">将功能作为过滤器运行</td><td colspan="1" rowspan="1" class="confluenceTd">假</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">扫描</td><td colspan="1" rowspan="1" class="confluenceTd">生成招摇的文档<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">真正</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">scanAllResources</td><td colspan="1" rowspan="1" class="confluenceTd">扫描所有资源，包括未标注JAX-RS资源<span>+</span> <span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">假</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">方案</td><td colspan="1" rowspan="1" class="confluenceTd">协议方案<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">termsOfServiceUrl</td><td colspan="1" rowspan="1" class="confluenceTd">服务条款URL <span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">标题</td><td colspan="1" rowspan="1" class="confluenceTd">标题<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空（在CXF 3.1.x“示例REST应用程序”中）</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">版</td><td colspan="1" rowspan="1" class="confluenceTd">版本<span>+</span></td><td colspan="1" rowspan="1" class="confluenceTd">空（在CXF 3.1.x“ 1.0.0”中）</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><span class="blob-code-inner blob-code-marker-addition">swaggerUiConfig</span></td><td colspan="1" rowspan="1" class="confluenceTd">Swagger UI配置</td><td colspan="1" rowspan="1" class="confluenceTd">空值</td></tr></tbody></table></div><p>注意：那些带有<span>+</span>标记的描述与<span>Swagger的BeanConfig中<span>定义的属性相对应，</span>带有<span>+</span> <span>+</span>标记的描述与<span>Swagger的ReaderConfig中所定义的属性相对应。</span></span></p><h1 id="Swagger2Feature-ConfiguringfromCode">从代码配置</h1><p><br clear="none"></p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">import org.apache.cxf.frontend.ServerFactoryBean;
import org.apache.cxf.jaxrs.swagger.Swagger2Feature;
...

Swagger2Feature feature = new Swagger2Feature();

// customize some of the properties
feature.setBasePath("/api");
    	
// add this feature to the endpoint (e.g., to ServerFactoryBean's features) 
ServerFactoryBean sfb = new ServerFactoryBean();
sfb.getFeatures().add(feature);</pre>
</div></div><p><br clear="none"></p><h1 id="Swagger2Feature-ConfiguringinSpring">在春季进行配置</h1><p><br clear="none"></p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cxf="http://cxf.apache.org/core"
       xmlns:jaxrs="http://cxf.apache.org/jaxrs"
       xsi:schemaLocation="http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
                           http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
                           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;
    ...&#160;
    &lt;!-- JAXRS providers --&gt;
    &lt;bean id="jsonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider" /&gt;

    &lt;!-- Application resources --&gt;
    &lt;bean id="sampleResource" class="demo.jaxrs.swagger.server.Sample" /&gt;

    &lt;!-- CXF Swagger2Feature --&gt;  
    &lt;bean id="swagger2Feature" class="org.apache.cxf.jaxrs.swagger.Swagger2Feature"&gt;
        &lt;!-- customize some of the properties --&gt;
        &lt;property name="basePath" value="/app/swaggerSample"/&gt;
    &lt;/bean&gt;

    ...
    &lt;jaxrs:server id="sampleServer" address="/swaggerSample"&gt;
        &lt;jaxrs:serviceBeans&gt;
            &lt;ref bean="sampleResource" /&gt;
        &lt;/jaxrs:serviceBeans&gt;
        &lt;jaxrs:providers&gt;
            &lt;ref bean="jsonProvider" /&gt;
        &lt;/jaxrs:providers&gt;
        &lt;jaxrs:features&gt;
            &lt;ref bean="swagger2Feature" /&gt;
        &lt;/jaxrs:features&gt;
    &lt;/jaxrs:server&gt;
&lt;/beans&gt;

</pre>
</div></div><p><br clear="none"></p><h1 id="Swagger2Feature-ConfiguringinBlueprint">在蓝图中配置</h1><p><br clear="none"></p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">&lt;blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:cxf="http://cxf.apache.org/blueprint/core"
       xmlns:jaxrs="http://cxf.apache.org/blueprint/jaxrs"
       xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
                           http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd
                           http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/blueprint/jaxrs.xsd"&gt;&#160;
    ...
    &lt;!-- JAXRS providers --&gt;
    &lt;bean id="jsonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider" /&gt;
&#160;
    &lt;!-- Application resources --&gt;
    &lt;bean id="sampleResource" class="demo.jaxrs.swagger.server.Sample" /&gt;


    &lt;!-- CXF Swagger2Feature --&gt;  
    &lt;bean id="swagger2Feature" class="org.apache.cxf.jaxrs.swagger.Swagger2Feature"&gt;
        &lt;!-- customize some of the properties --&gt;
        &lt;property name="basePath" value="/cxf/swaggerSample"/&gt;
    &lt;/bean&gt;
&#160;
    ...
    &lt;jaxrs:server id="sampleServer" address="/swaggerSample"&gt;
        &lt;jaxrs:serviceBeans&gt;
            &lt;ref component-id="sampleResource" /&gt;
        &lt;/jaxrs:serviceBeans&gt;
        &lt;jaxrs:providers&gt;
            &lt;ref component-id="jsonProvider" /&gt;
        &lt;/jaxrs:providers&gt;
        &lt;jaxrs:features&gt;
            &lt;ref component-id="swagger2Feature" /&gt;
        &lt;/jaxrs:features&gt;
    &lt;/jaxrs:server&gt;
&lt;/blueprint&gt;
&#160;</pre>
</div></div><h1 id="Swagger2Feature-ConfiguringinCXFNonSpringJaxrsServlet">在CXFNonSpringJaxrsServlet中配置</h1><p><br clear="none"></p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">&lt;web-app&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;contextParam&lt;/param-name&gt;
        &lt;param-value&gt;contextParamValue&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
        &lt;display-name&gt;CXF Servlet&lt;/display-name&gt;
        &lt;servlet-class&gt;
              org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet
        &lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;jaxrs.serviceClasses&lt;/param-name&gt;
            &lt;param-value&gt;
                           org.apache.cxf.systest.jaxrs.BookStore
            &lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;jaxrs.features&lt;/param-name&gt;
            &lt;param-value&gt;
                        org.apache.cxf.jaxrs.swagger.Swagger2Feature
                        (basePath=/somepath)
            &lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    
&lt;/web-app&gt;</pre>
</div></div><h1 id="Swagger2Feature-New:ConfiguringfromPropertiesfile">新增：从属性文件配置</h1><p>从CXF 3.1.13和3.2.0开始，可以使用属性文件配置Swagger2Feature。</p><p>例如，虽然<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot" rel="nofollow">samples / jax_rs / spring_boot</a>演示<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/spring_boot/src/main/java/sample/rs/service/SampleRestApplication.java#L54" rel="nofollow">通过代码</a>配置了功能<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/spring_boot/src/main/java/sample/rs/service/SampleRestApplication.java#L54" rel="nofollow">，但</a> <a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot_scan" rel="nofollow">samples / jax_rs / spring_boot_scan</a>演示<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/spring_boot_scan/application/src/main/resources/swagger.properties" rel="nofollow">通过属性文件进行</a>了配置。</p><p>属性文件的默认位置是“ <strong>/swagger.properties</strong> ”。Swagger2Feature将对其进行拾取（如果可用），并且可以使用新的<strong>Swagger2Feature'swaggerPropertiesLocation</strong> '属性覆盖该位置。</p><p>请注意，这些属性（如果可用）不会覆盖上面根据代码，Spring / Blueprint上下文或web.xml建议的设置的属性。相反，它们补充并用作默认配置属性：例如，如果已从代码中设置了某些属性，则将不使用在属性文件中找到的相同属性的值。</p><h1 id="Swagger2Feature-EnablinginSpringBoot">在Spring Boot中启用</h1><p>见<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot" rel="nofollow">样本/ jax_rs / spring_boot</a> ，并就如何在@Bean方法创建Swagger2Feature或/和<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/spring_boot_scan/application/src/main/resources/application.yml#L13" rel="nofollow"><span class="inline-comment-marker" data-ref="95051881-e36a-491b-bc40-392fdb95feb0">样本/ jax_rs / spring_boot_scan</span></a>如何自动启用它。</p><p><br clear="none"></p><h1 id="Swagger2Feature-AccessingSwaggerDocuments">访问Swagger文档</h1><p>当通过Swagger功能启用Swagger时，将在由服务端点位置（后跟/swagger.json或/swagger.yaml）构成的位置URL上获得Swagger文档。</p><p>例如，假设JAX-RS端点发布在“ http：// host：port / context / services /”上，其中“ context”是Web应用程序上下文，“ / services”是servlet URL。在这种情况下，其Swagger文档可从“ http：// host：port / context / services / swagger.json”和“ http：// host：port / context / services / swagger.yaml”获得。</p><p>从CXF 3.1.7开始，如果Swagger2Feature处于活动状态，则CXF服务页面将链接到Swagger文档。</p><p>在上面的示例中，转到“ <span>http：// host：port / context / services /</span> services”，然后点击Swagger链接，该链接将返回Swagger JSON文档。</p><p>如果需要<a shape="rect" class="external-link" href="https://github.com/swagger-api/swagger-ui/blob/master/README.md#cors-support" rel="nofollow">CORS支持</a>才能从另一个主机上的Swagger UI访问定义，则可以添加<a shape="rect" href="jax-rs-cors.html">来自cxf-rt-rs-security-cors的CrossOriginResourceSharingFilter</a> 。</p><p><br clear="none"></p><h1 id="Swagger2Feature-EnablingSwaggerUI">启用Swagger UI</h1><p>第一个需要添加以下内容</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;dependency&gt;
    &lt;groupId&gt;org.webjars&lt;/groupId&gt;
    &lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;
    &lt;version&gt;2.2.10-1&lt;/version&gt;
&lt;/dependency&gt;

</pre>
</div></div><p>也可以使用swagger-ui的最新版本3.x。</p><h2 id="Swagger2Feature-EnablingSwaggerUIinOSGicontainer(Karaf)">在OSGi容器（Karaf）中启用Swagger UI</h2><p>由于<strong>org.webjars</strong> / <strong>swagger-ui</strong>只是一个包含资源的程序包，因此OSGi清单中不会将其作为必需的导入进行引用。因此，要在OSGi部署中使用Swagger UI，应手动安装<strong>org.webjars</strong> / <strong>swagger-ui</strong> ，例如：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">karaf@root()&gt; install mvn:org.webjars/swagger-ui/3.23.8</pre>
</div></div><p>专用的Activator将负责发现<strong>org.webjars</strong> / <strong>swagger-ui</strong>捆绑包的存在并配置<strong>Swagger2Feature</strong> 。</p><h2 id="Swagger2Feature-AutomaticUIActivation">自动UI激活</h2><p>此功能从CXF 3.1.7开始可用：添加Swagger UI借助Swagger UI，开始访问Swagger文档所需的全部工作就是Maven依赖项。</p><p>例如，假设JAX-RS端点发布在“ <span>http：// host：port / context / services /</span> ”上。</p><p>打开浏览器，然后转到<span class="inline-comment-marker" data-ref="d7668130-e6ae-4083-a77a-cdfeb10de81e">“</span> <span><span class="inline-comment-marker" data-ref="d7668130-e6ae-4083-a77a-cdfeb10de81e">http：// host：port / context / services /</span></span> <span class="inline-comment-marker" data-ref="d7668130-e6ae-4083-a77a-cdfeb10de81e">api-docs /？url = / swagger.json”</span> ，这将返回Swagger UI页面。</p><p>CXF服务页面还将链接到Swagger UI。转到“ <span>http：// host：port / context / services /</span> services”，然后点击Swagger链接，该链接将返回Swagger UI页面。</p><p>请参见<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2" rel="nofollow">samples / jax_rs / description_swagger2</a> ， <a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2_web" rel="nofollow">samples / jax_rs / description_swagger2_web</a> ， <a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot" rel="nofollow">samples / jax_rs / spring_boot</a>和<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot_scan" rel="nofollow">samples / jax_rs / spring_boot_scan</a> </p><p>请注意，从CXF 3.1.8开始，CXF OSGI端点只能依赖此功能。</p><h2 id="Swagger2Feature-UnpackingSwaggerUIresources">解包Swagger UI资源</h2><p>直到CXF 3.1.7为止，将Swagger UI资源解压缩到本地文件夹都是唯一的选择。它在<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2_spring" rel="nofollow">samples / jax_rs / description_swagger2_spring</a>和<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2_osgi" rel="nofollow">samples / jax_rs / description_swagger2_osgi中进行</a>了演示。</p><p>在CXF 3.1.8中：将Swagger2Feature的'supportSwaggerUi'属性设置为'false'以禁用上一节中所述的自动UI激活</p><h2 id="Swagger2Feature-ConfiguringSwaggerUI(3.2.7+)">配置Swagger UI（3.2.7+）</h2><p><strong>Swagger2Feature</strong>提供了一种通过<strong><span class="blob-code-inner blob-code-marker-addition"><span class="pl-smi">SwaggerUiConfig</span></span></strong>预先配置某些Swagger UI参数（ <a shape="rect" class="external-link" href="https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md" rel="nofollow">https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md</a> ）的<strong><span class="blob-code-inner blob-code-marker-addition"><span class="pl-smi">方法</span></span></strong> <span class="blob-code-inner blob-code-marker-addition">。的</span> <strong><span class="blob-code-inner blob-code-marker-addition"> </span></strong>实现方法是将这些参数作为查询字符串传递，以便Swagger UI可以自行调整。</p><h1 id="Swagger2Feature-ReverseProxy">反向代理</h1><p>如果您通过反向代理访问Swagger JSON和/或UI，则将CXFServlet初始化参数'use-x-forwarded-headers'设置为'true'。如果使用CXF SpringBoot启动器，则此属性的前缀为“ cxf.servlet.init。”，“ cxf.servlet.init.use-x-forwarded-headers”。</p><p>您可能还需要将Swagger2Feature的“ usePathBasedConfig”属性设置为“ true”，以防止Swagger缓存“ basePath”值。</p><h1 id="Swagger2Feature-ConvertingtoOpenAPIJSON">转换为OpenAPI JSON</h1><p><a shape="rect" class="external-link" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md" rel="nofollow">OpenAPI规范</a>已经发布，CXF团队已开始研究新功能，它将在Swagger社区当前正在开发的新核心和jaxrs库的帮助下生成OpenAPI JSON。</p><p>同时，在开发新功能时，可以尝试将CXF Swagger2Feature生成的Swagger JSON转换为Open API JSON。</p><p>所有需要做的就是向JAX-RS端点注册<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/openapi/SwaggerToOpenApiConversionFilter.java" rel="nofollow">SwaggerToOpenApiConversionFilter</a>并请求一个“ openapi.json”，而不是“ swagger.json”。过滤器将使Swagger2Feature照常生成JSON，然后根据用户的请求将响应转换为OpenAPI JSON，否则将其保持不变。通过发出“ swagger.json”或“ openapi.json”查询，可以轻松查看两种格式之间的差异。</p><p>cxf-rt-rs-json-basic依赖也必须位于类路径上。</p><p><span class="inline-comment-marker" data-ref="0182cc9a-9bcb-467e-ba6e-ecea683448e8">请注意， <a shape="rect" class="external-link" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md" rel="nofollow">OpenAPI JSON</a></span> （另请参阅<a shape="rect" href="openapifeature.html">OpenApiFeature</a> ）允许从多个“ requestBody”元素（可在特定的path / http谓词子节下找到）引用其新的“ components / requestBodies”部分。默认情况下，过滤器将内联“ requestBody”元素内的“ requestBody”定义，但是可以通过<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/openapi/OpenApiConfiguration.java" rel="nofollow">配置</a> <a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/openapi/SwaggerToOpenApiConversionFilter.java#L63" rel="nofollow">过滤器</a>以创建请求主体来尝试引用“ components / requestBodies”。</p><p>从CXF 3.1.15和3.2.2开始可以使用转换过滤器</p><h1 id="Swagger2Feature-Samples">样品</h1><p><span>CXF的发行版包含以下示例。</span></p><ul><li><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger" rel="nofollow">samples / jax_rs / description_swagger</a> ：使用SwaggerFeature编程编写Swagger 1.2示例</li><li><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2" rel="nofollow">samples / jax_rs / description_swagger2</a> ：使用Swagger2Feature的Swagger 2.0独立样本</li><li><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2_spring" rel="nofollow">samples / jax_rs / description_swagger2_spring</a> ：使用Swagger2的Swagger 2.0独立样本使用Spring的功能</li><li><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2_web" rel="nofollow">samples / jax_rs / description_swagger2_web</a> ：使用Swagger2的Swagger 2.0 Web应用程序示例使用Spring的功能</li><li><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/description_swagger2_osgi" rel="nofollow">samples / jax_rs / description_swagger2_osgi</a> ：使用Swagger2的Swagger 2.0 OSGi应用程序示例使用蓝图的功能<br clear="none"><br clear="none"></li></ul><p><br clear="none"></p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=61318164">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=61318164&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>