<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - XSLT Feature">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-XSLT功能</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="configuration.html">配置</a> > <a href="featureslist.html">功能</a>列表> <a href="xslt-feature.html">XSLT功能</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="XSLTFeature-XSLTFeature">XSLT功能</h1><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1524513376508 {padding: 0px;}
div.rbtoc1524513376508 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1524513376508 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1524513376508">
<ul class="toc-indentation"><li><a shape="rect" href="#XSLTFeature-XSLTFeature">XSLT功能</a></li><li><a shape="rect" href="#XSLTFeature-WhenshouldIusetheTransformationFeatureandwhentheXSLTFeature?">什么时候应该使用转换功能，什么时候应该使用XSLT功能？</a></li><li><a shape="rect" href="#XSLTFeature-Springconfiguration">弹簧配置</a></li><li><a shape="rect" href="#XSLTFeature-ConfiguringtheXSLTFeaturefromSpring/Blueprint">从Spring / Blueprint配置XSLT功能</a></li><li><a shape="rect" href="#XSLTFeature-ConfiguringtheXSLTinterceptorsincode">在代码中配置XSLT拦截器</a></li><li><a shape="rect" href="#XSLTFeature-XSLTinterceptorsandphases">XSLT拦截器和阶段</a></li><li><a shape="rect" href="#XSLTFeature-Supportedmessagecontents">支持的消息内容</a></li></ul>
</div><p>CXF XSLT功能是<a shape="rect" href="http://cxf.apache.org/docs/transformationfeature.html">CXF转换功能</a>的替代方法，它提供了一种动态转换XML消息的灵活方法。<br clear="none">XSLT功能将自定义XSL转换应用于入站和/或出站邮件。</p><h1 id="XSLTFeature-WhenshouldIusetheTransformationFeatureandwhentheXSLTFeature?">什么时候应该使用转换功能，什么时候应该使用XSLT功能？</h1><p>如果仅需要进行简单的转换，则建议使用轻量级且快速的转换功能。它涵盖了大多数用例，例如：</p><ul><li>删除出站消息的名称空间；</li><li>限定传入消息；</li><li>更改名称空间；</li><li>追加或删除元素；</li><li>将属性转换为元素。</li></ul><p>转换功能完全面向流，并且快速运行，特别是对于大型邮件。</p><p>如果您应该应用非平凡的转换，而转换功能不支持该转换-这是XSLT功能的用例。在这里，您可以编写任何自定义XSL转换并将其应用于入站和/或出站消息。由于Xalan XSLT引擎实际上并不完全面向流，因此XSLT功能会中断流。但是，它使用高性能的DTM（文档表模型）而不是完整的DOM模型。将来可以通过使用其他版本的Xalan或其他XSLT引擎（例如，面向Saxon或STX的Joost）来提高性能。</p><h1 id="XSLTFeature-Springconfiguration">弹簧配置</h1><p>必须为入站或/和出站转换配置XSLT脚本的位置。例：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;bean id="xsltFeature" class="org.apache.cxf.feature.transform.XSLTFeature"&gt;
    &lt;property name="inXSLTPath" value="requestTransformation.xsl" /&gt;
    &lt;property name="outXSLTPath" value="responseTransformation.xsl" /&gt;
&lt;/bean&gt;
</pre>
</div></div><p>XSLT脚本应该可以从类路径中获得。如果未指定XSLT路径，则不会进行任何转换。</p><h1 id="XSLTFeature-ConfiguringtheXSLTFeaturefromSpring/Blueprint">从Spring / Blueprint配置XSLT功能</h1><p>可以在Spring或Blueprint中为JAX-WS或JAX-RS客户端和端点配置该功能。例：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;jaxws:client id="customerService" serviceName="customer:CustomerServiceService"
    endpointName="customer:CustomerServiceEndpoint" address="http://localhost:9091/CustomerServicePort"
    serviceClass="com.example.customerservice.CustomerService"&gt;
	&lt;jaxws:features&gt;
		&lt;ref bean="xsltFeature" /&gt;
	&lt;/jaxws:features&gt;
&lt;/jaxws:client&gt;

&lt;jaxws:endpoint xmlns:customer="http://customerservice.example.com/"
	id="CustomerServiceHTTP" address="http://localhost:9090/CustomerServicePort"
	serviceName="customer:CustomerServiceService" endpointName="customer:CustomerServiceEndpoint"
	implementor="com.example.customerservice.server.CustomerServiceImpl"&gt;
	&lt;jaxws:features&gt;
        &lt;ref bean="xsltFeature" /&gt;
	&lt;/jaxws:features&gt;
&lt;/jaxws:endpoint&gt;
</pre>
</div></div><h1 id="XSLTFeature-ConfiguringtheXSLTinterceptorsincode">在代码中配置XSLT拦截器</h1><p>这是可以配置JAX-WS客户端的方式：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">  CustomerServiceService service = new CustomerServiceService();
  CustomerService customerService = service.getCustomerServicePort();
  Client client = ClientProxy.getClient(customerService);
  XSLTOutInterceptor outInterceptor = new XSLTOutInterceptor(Phase.PRE_STREAM, StaxOutInterceptor.class, null,
                                                                   XSLT_REQUEST_PATH);
  client.getOutInterceptors().add(outInterceptor);
</pre>
</div></div><h1 id="XSLTFeature-XSLTinterceptorsandphases">XSLT拦截器和阶段</h1><p>默认情况下，XSLT拦截器在POST_STREAM和PRE_STREAM阶段运行。在某些情况下，可能需要更改相位，例如，在对加密的有效负载进行解密并检查其签名之后，必须应用in转换。为了使此类转换成功，需要使用接受“ phase” String参数的构造函数来创建XSLTInInterceptor / XSLTOutInterceptor。另外，您可以在此阶段的拦截器之前和之后指定其他构造函数参数。</p><h1 id="XSLTFeature-Supportedmessagecontents">支持的消息内容</h1><p>XSLT拦截器支持以下消息内容：</p><ul><li>InputStream / OutputStream;</li><li>读者/作家；</li><li>XMLStreamReader / XMLStreamWriter。</li></ul><p>因此，拦截器可用于不同的阶段。XSLT拦截器已通过JMS Transport使用JMS文本消息（产生读取器/写入器消息内容）进行了测试。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=30741563">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=30741563&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>