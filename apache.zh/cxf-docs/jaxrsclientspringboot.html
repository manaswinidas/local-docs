<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - JAXRSClientSpringBoot">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-JAXRSClientSpringBoot</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="restful-services.html">RESTful服务</a> > <a href="jax-rs.html">JAX-RS</a> > <a href="jaxrs-services-configuration.html">JAXRS服务配置</a> > <a href="jaxrsclientspringboot.html">JAXRSClientSpringBoot</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1524513376213 {padding: 0px;}
div.rbtoc1524513376213 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1524513376213 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1524513376213">
<ul class="toc-indentation"><li><a shape="rect" href="#JAXRSClientSpringBoot-Introduction">介绍</a></li><li><a shape="rect" href="#JAXRSClientSpringBoot-Setup">设定</a></li><li><a shape="rect" href="#JAXRSClientSpringBoot-EnablingWebClients">启用WebClient</a></li><li><a shape="rect" href="#JAXRSClientSpringBoot-EnablingProxyClients">启用ProxyClient</a></li><li><a shape="rect" href="#JAXRSClientSpringBoot-DiscoveryofServiceEndpoints">发现服务端点</a></li><li><a shape="rect" href="#JAXRSClientSpringBoot-Configuration">组态</a></li></ul>
</div><h1 id="JAXRSClientSpringBoot-Introduction">介绍</h1><p>本页描述如何在SpringBoot应用程序中使用<a shape="rect" href="jax-rs-client-api.html">CXF JAX-RS客户端</a>代码。</p><p>请参阅<a shape="rect" href="http://cxf.apache.org/docs/springboot.html#SpringBoot-SpringBootCXFJAX-RSStarter">CXF JAX-RS入门</a>部分，了解如何启用JAX-RS端点。</p><h1 id="JAXRSClientSpringBoot-Setup">设定</h1><p>如果您的SpringBoot应用程序依赖于<a shape="rect" href="http://cxf.apache.org/docs/springboot.html#SpringBoot-SpringBootCXFJAX-RSStarter">CXF JAX-RS启动器，</a>则不需要更多依赖项。</p><p>如果您想在纯客户端SpringBoot应用程序中运行JAX-RS客户端，则在许多情况下，以下Maven pom就足够了：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default" style="font-size:12px;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.4.5.RELEASE&lt;/version&gt;
    &lt;/parent&gt; 
    &lt;artifactId&gt;spring-boot-cxf-client-application&lt;/artifactId&gt;
    &lt;groupId&gt;org.apache.cxf.samples&lt;/groupId&gt;
    &lt;version&gt;3.1.11&lt;/version&gt;
    &lt;name&gt;Spring Boot CXF Client Application&lt;/name&gt;
    &lt;description&gt;Spring Boot CXF Client Application&lt;/description&gt;
    
    &lt;properties&gt;
        &lt;cxf.version&gt;3.1.11&lt;/cxf.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;
            &lt;artifactId&gt;cxf-rt-rs-client&lt;/artifactId&gt;
            &lt;version&gt;${cxf.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
           &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
           &lt;configuration&gt;
               &lt;mainClass&gt;sample.rs.client.SpringBootClientApplication&lt;/mainClass&gt;
           &lt;/configuration&gt;  
        &lt;/plugin&gt;
       &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</pre>
</div></div><h1 id="JAXRSClientSpringBoot-EnablingWebClients">启用WebClient</h1><p>可以通过<strong>EnableJaxRsWebClient</strong>注释自动连接<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-CXFWebClientAPI">WebClient</a> 。</p><p>标记为Spring Components的JAX-RS提供程序（用@Provider注释）已添加到WebClient中。未标记为Spring Components的提供程序也可以有选择地自动发现。还可以使用可选标头（例如Accept和Content-Type）对WebClient进行配置，并使其具有线程安全性。</p><p> </p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">package sample.rs.client;

import org.apache.cxf.jaxrs.client.WebClient;
import org.apache.cxf.jaxrs.client.spring.EnableJaxRsWebClient;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;

@SpringBootApplication
@EnableJaxRsWebClient
public class SpringBootClientApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringBootClientApplication.class, args);
    }
  
    @Bean
    CommandLineRunner initWebClientRunner(final WebClient webClient) {
      
      return new CommandLineRunner() {

        @Override
        public void run(String... runArgs) throws Exception {
            System.out.println(webClient.path("sayHello/ApacheCxfWebClientUser").get(String.class));
        }
      };
    }
    
}</pre>
</div></div><p> </p><h1 id="JAXRSClientSpringBoot-EnablingProxyClients">启用ProxyClient</h1><p>可以通过<strong>EnableJaxRsProxyClient</strong>注释自动连接<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-Proxy-basedAPI">代理客户端</a> 。</p><p>它从自动发现的服务类接口创建代理。</p><p>标记为Spring Components的JAX-RS提供程序（带有@Provider注释）已添加到代理客户端。未标记为Spring Components的提供程序也可以有选择地自动发现。代理还可以配置为可选的标头，例如Accept和Content-Type（如果JAX-RS @Produces和/或@Consumes丢失或需要被覆盖），并使其成为线程安全的。</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">package sample.rs.client;

import org.apache.cxf.jaxrs.client.spring.EnableJaxRsProxyClient;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;

import sample.rs.service.HelloService;

@SpringBootApplication
@EnableJaxRsProxyClient
public class SpringBootClientApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(SpringBootClientApplication.class, args);
    }
 
    @Bean
    CommandLineRunner initProxyClientRunner(final HelloService client) {
      
      return new CommandLineRunner() {

        @Override
        public void run(String... runArgs) throws Exception {
            System.out.println(client.sayHello("ApacheCxfProxyUser"));
        }
      };
    }
}
</pre>
</div></div><p> </p><p>如果您希望直接在客户端代码中指定代理服务接口，则可以删除EnableJaxRsProxyClient批注，并提供一个简单的JaxRsProxyClientConfiguration扩展：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">package sample.rs.client;

import org.apache.cxf.jaxrs.client.spring.JaxRsProxyClientConfiguration;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import sample.rs.service.HelloService;

@SpringBootApplication
public class SpringBootClientApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(SpringBootClientApplication.class, args);
    }
 
    @Bean
    CommandLineRunner initProxyClientRunner(final HelloService client) {
      
      return new CommandLineRunner() {

        @Override
        public void run(String... runArgs) throws Exception {
            System.out.println(client.sayHello("ApacheCxfProxyUser"));
        }
      };
    }
    
    @Configuration
    static class HeloServiceConfiguration extends JaxRsProxyClientConfiguration {
        @Override
        protected Class&lt;?&gt; getServiceClass() {
            return HelloService.class;
        }
    }
}</pre>
</div></div><h1 id="JAXRSClientSpringBoot-DiscoveryofServiceEndpoints">发现服务端点</h1><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot_scan/application" rel="nofollow">JAX-RS Spring Boot Scan</a>演示中显示了发现发布到著名服务注册表（例如Netflix Eureka Registry）的JAX-RS端点地址的信息。</p><p>这可以借助CXF故障转移和/或负载平衡功能来实现。</p><h1 id="JAXRSClientSpringBoot-Configuration">组态</h1><p>配置属性适用于WebClient和代理配置。</p><p><strong>cxf.jaxrs.client.address</strong>是必需的属性，用于标识目标地址。</p><p>可以将<strong>cxf.jaxrs.client.thread-safe</strong>属性设置为true，以使客户端成为线程安全的。</p><p><strong>cxf.jaxrs.client.headers.accept</strong>属性可用于设置HTTP Accept标头。</p><p><strong>cxf.jaxrs.client.headers.content-type</strong>属性可用于设置HTTP Content-Type标头。</p><p><strong>cxf.jaxrs.client.classes-scan-packages</strong>属性可用于自动发现JAX-RS服务类接口（用于代理）以及代理和Web客户端的提供程序。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=65145466">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=65145466&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>