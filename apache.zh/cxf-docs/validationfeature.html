<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - ValidationFeature">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-ValidationFeature</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="configuration.html">配置</a> > <a href="featureslist.html">功能</a>列表> <a href="validationfeature.html">验证功能</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="ValidationFeature-BeanValidationFeature">Bean验证功能</h1><p> </p><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1524513392405 {padding: 0px;}
div.rbtoc1524513392405 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1524513392405 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1524513392405">
<ul class="toc-indentation"><li><a shape="rect" href="#ValidationFeature-BeanValidationFeature">Bean验证功能</a></li><li><a shape="rect" href="#ValidationFeature-Introduction">介绍</a></li><li><a shape="rect" href="#ValidationFeature-Dependencies">依存关系</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ValidationFeature-UsingHibernateValidatorasbeanvalidationprovider">使用Hibernate Validator作为bean验证提供程序</a></li><li><a shape="rect" href="#ValidationFeature-UsingApacheBValasbeanvalidationprovider">使用Apache BVal作为bean验证提供程序</a></li></ul>
</li><li><a shape="rect" href="#ValidationFeature-CommonBeanValidation1.1Interceptors">Common Bean Validation 1.1拦截器</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ValidationFeature-Configuration">组态</a></li></ul>
</li><li><a shape="rect" href="#ValidationFeature-BeanValidation1.1andJAX-RS2.0">Bean验证1.1和JAX-RS 2.0</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ValidationFeature-Server">服务器</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ValidationFeature-Validationofnon-singletonserviceobjects">验证非单一服务对象</a></li><li><a shape="rect" href="#ValidationFeature-ConfiguringBeanValidation1.1usingJAXRSServerFactoryBean">使用JAXRSServerFactoryBean配置Bean验证1.1</a></li><li><a shape="rect" href="#ValidationFeature-ConfiguringBeanValidation1.1usingSpringbeandefinitionsXML">使用Spring bean定义XML配置Bean Validation 1.1</a></li><li><a shape="rect" href="#ValidationFeature-ValidationExceptionsandHTTPstatuscodes">验证异常和HTTP状态代码</a></li></ul>
</li><li><a shape="rect" href="#ValidationFeature-ClientProxies">客户代理</a></li></ul>
</li><li><a shape="rect" href="#ValidationFeature-CustomizingValidationProvider">定制验证提供者</a></li><li><a shape="rect" href="#ValidationFeature-Examples">例子</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ValidationFeature-Validatingsimpleinputparameters">验证简单的输入参数</a></li><li><a shape="rect" href="#ValidationFeature-Validatingcomplexinputparameters">验证复杂的输入参数</a></li><li><a shape="rect" href="#ValidationFeature-Validatingreturnvalues(non-Response)">验证返回值（非响应）</a></li><li><a shape="rect" href="#ValidationFeature-Validatingreturnvalues(Response)">验证返回值（响应）</a></li></ul>
</li><li><a shape="rect" href="#ValidationFeature-BeanValidationandSchemaValidation">Bean验证和架构验证</a></li></ul>
</div><h1 id="ValidationFeature-Introduction">介绍</h1><p>Bean验证1.1（JSR-349）是Bean验证1.0（JSR-303）的发展，它引入了声明性约束（基于Java注释）来定义对以下各项的期望：</p><ul class="alternate"><li>Java Beans的属性</li><li>方法和构造函数参数</li><li>方法返回值</li></ul><p>例如：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">public class Person {
    @NotNull private String firstName;
    @NotNull private String lastName;
    @Valid @NotNull private Person boss;

    public @NotNull String saveItem( @Valid @NotNull Person person, @Max( 23 ) BigDecimal age ) {
        // ...
    }
}
</pre>
</div></div><p>Bean验证API已成为JPA 2.0（JSR-317）的一部分，并且已被证明是成功且非常有用的，它可以帮助开发人员将例行验证任务委托给坚固，可扩展的框架。创建自己的约束（包括复杂的跨域约束）非常容易。</p><h1 id="ValidationFeature-Dependencies">依存关系</h1><p>Apache CXF中的Bean验证支持与实现无关，并且仅使用Bean验证API构建。所需的依赖项是：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;dependency&gt;
    &lt;groupId&gt;javax.validation&lt;/groupId&gt;
    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;
    &lt;version&gt;1.1.0.Final&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;javax.el&lt;/groupId&gt;
    &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;
    &lt;!-- use 3.0-b02 version for Java 6 --&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.glassfish&lt;/groupId&gt;
    &lt;artifactId&gt;javax.el&lt;/artifactId&gt;
    &lt;!-- use 3.0-b01 version for Java 6 --&gt;
    &lt;version&gt;3.0.0/version&gt;
&lt;/dependency&gt;
</pre>
</div></div><p>提供了两种API实现。请注意，如果在运行时类路径上未检测到任何实现，则约束验证将不起作用。</p><h2 id="ValidationFeature-UsingHibernateValidatorasbeanvalidationprovider">使用Hibernate Validator作为bean验证提供程序</h2><p><a shape="rect" class="external-link" href="http://www.hibernate.org/subprojects/validator.html" rel="nofollow">http://www.hibernate.org/subprojects/validator.html</a></p><p>Hibernate Validator是一个成熟且功能丰富的验证提供程序，具有完整的Bean验证1.1支持（从5.xx版开始，这是JSR 349-Bean验证1.1 API的参考实现）。添加以下依赖项：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;dependency&gt;
    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
    &lt;version&gt;5.0.2.Final&lt;/version&gt;
&lt;/dependency&gt;
</pre>
</div></div><p>Hibernate Validator使用Java Expression Language 3.0来提供更好的验证消息支持。</p><h2 id="ValidationFeature-UsingApacheBValasbeanvalidationprovider">使用Apache BVal作为bean验证提供程序</h2><p><a shape="rect" class="external-link" href="http://bval.apache.org/">http://bval.apache.org/</a></p><div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.bval&lt;/groupId&gt;
    &lt;artifactId&gt;bval-jsr&lt;/artifactId&gt;
    &lt;version&gt;1.1.2&lt;/version&gt;
&lt;/dependency&gt;
</pre>
</div></div><h1 id="ValidationFeature-CommonBeanValidation1.1Interceptors">Common Bean Validation 1.1拦截器</h1><p>JAX-RS和JAX-WS前端可以依靠以下公共拦截器来完成Bean Validation 1.1：</p><ul class="alternate"><li><a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/core/src/main/java/org/apache/cxf/validation/BeanValidationInInterceptor.java">org.apache.cxf.validation。BeanValidationInInterceptor</a> ：根据验证约束来验证资源方法参数，并引发javax.validation。ConstraintViolationException如果遇到任何违规</li></ul><ul class="alternate"><li><a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/core/src/main/java/org/apache/cxf/validation/BeanValidationOutInterceptor.java">org.apache.cxf.validation。BeanValidationOutInterceptor</a> ：针对验证约束来验证资源方法响应值，并引发<a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/core/src/main/java/org/apache/cxf/validation/ResponseConstraintViolationException">org.apache.cxf.validation。如果遇到任何违规，则为ResponseConstraintViolationException</a> 。</li></ul><p>两个拦截器都依赖于<a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/core/src/main/java/org/apache/cxf/validation/BeanValidationProvider.java">org.apache.cxf.validation。BeanValidationProvider</a>提取Bean Validation 1.1 API并提供有用的实用程序方法。该提供程序可以作为“提供程序”属性直接注入到拦截器中。注入提供程序是可选的，如果尚未注入，则拦截器将创建一个默认的提供程序实例。</p><p>CXF异常处理程序可以检查是否捕获到javax.validation。ValidationException是CXF特定的ResponseConstraintViolationException的实例，以查找失败是否在返回值验证期间发生。</p><p>可以使用javax.validation初始化提供程序。ParameterNameProvider或<a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/core/src/main/java/org/apache/cxf/validation/ValidationConfiguration.java">ValidationConfiguration</a> ，以自定义Bean Validation 1.1实现的工作方式。</p><p>注意，仅当当前服务对象为单例时，拦截器才有效。他们将尽最大努力获取对当前服务对象的引用，该引用也可以作为“ serviceObject”属性直接注入。</p><p>定制拦截器可以定制默认处理（例如，请参见JAX-RS 2.0中有关Bean Validation 1.1的部分）。典型的定制是在验证输入参数或响应值之前将其解开。</p><p><a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/core/src/main/java/org/apache/cxf/validation/BeanValidationFeature.java">org.apache.cxf.validation。BeanValidationFeature</a>可用于注册输入和输出验证拦截器。</p><h2 id="ValidationFeature-Configuration">组态</h2><p>以下代码片段显示了如何使用Spring为JAX-RS和JAX-WS服务激活Bean验证1.1拦截器：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">// Interface implemented by both JAX-RS and JAX-WS services:
@WebService(targetNamespace = "http://bookworld.com")
@Path("/")
public interface BookWorld {

    @POST
    @Produces("text/xml")
    @Consumes("text/xml")
    @Valid
    BookWithValidation echoBook(@Valid BookWithValidation book);

}

@WebService(endpointInterface = "org.apache.cxf.systest.jaxrs.validation.spring.BookWorld",
            serviceName = "BookWorld")
public class BookWorldImpl implements BookWorld {

    @Override
    public BookWithValidation echoBook(BookWithValidation book) {
        return book;
    }
}

</pre>
</div></div><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;!-- JAX-RS and JAX-WS endpoints --&gt;
&lt;jaxrs:server address="/bwrest"&gt;
        &lt;jaxrs:serviceBeans&gt;
            &lt;ref bean="bookWorldValidation"/&gt;
        &lt;/jaxrs:serviceBeans&gt;
        &lt;jaxrs:providers&gt;
            &lt;ref bean="exceptionMapper"/&gt;
        &lt;/jaxrs:providers&gt;
        &lt;jaxrs:features&gt;
            &lt;ref bean="commonValidationFeature" /&gt;
        &lt;/jaxrs:features&gt;
&lt;/jaxrs:server&gt;
    
&lt;jaxws:endpoint xmlns:s="http://bookworld.com" 
                serviceName="s:BookWorld" 
                endpointName="s:BookWorldPort" 
                implementor="#bookWorldValidation" 
                address="/bwsoap"&gt;
    &lt;jaxws:features&gt;
        &lt;ref bean="commonValidationFeature" /&gt;
     &lt;/jaxws:features&gt;
&lt;/jaxws:endpoint&gt;                
    
&lt;bean id="bookWorldValidation" class="org.apache.cxf.systest.jaxrs.validation.spring.BookWorldImpl"/&gt;
&lt;bean id="commonValidationFeature" class="org.apache.cxf.validation.BeanValidationFeature"/&gt;
</pre>
</div></div><p>请查看下一部分，以获取特定于JAX-RS的更多示例。</p><h1 id="ValidationFeature-BeanValidation1.1andJAX-RS2.0">Bean验证1.1和JAX-RS 2.0</h1><h2 id="ValidationFeature-Server">服务器</h2><p>JAX-RS 2.0规范（第7章）引入了一个可选要求，以支持Bean验证1.1。</p><p>对于验证其输入参数和响应值的JAX-RS 2.0资源方法，使用上一部分中描述的公共拦截器就足够了。</p><p>但是，如果需要包装在JAX-RS响应验证中的响应值，或者确保每个请求服务实例都经过验证，则需要使用JAX-RS前端特定的拦截器和调用程序：</p><ul class="alternate"><li>org.apache.cxf.jaxrs.validation。JAXRSBeanValidationInInterceptor：验证JAX-RS资源方法参数。目前，它与扩展的通用BeanValidationInInterceptor几乎相同。它也可以用作JAX-RS 2.0 ContainerRequestFilter</li></ul><ul class="alternate"><li>org.apache.cxf.jaxrs.validation。JAXRSBeanValidationOutInterceptor：验证JAX-RS资源方法的返回值，展开JAX-RS响应。它也可以用作JAX-RS 2.0 ContainerResponseFilter</li></ul><ul class="alternate"><li>org.apache.cxf.jaxrs.validation。JAXRSBeanValidationFeature可用于注册输入和输出验证拦截器。</li></ul><ul class="alternate"><li>org.apache.cxf.jaxrs.validation。需要使用JAXRSBeanValidationInvoker来验证非单一服务对象，有关更多信息，请参见下文。</li></ul><p>注意默认的JAX-RS ExceptionMapper（org.apache.cxf.jaxrs.validation。ValidationExceptionMapper）转换javax.validation。必须注册对应于HTTP状态代码的ValidationException。如果需要，用户可以注册自定义映射器。</p><p>org.apache.cxf.jaxrs.validation。可以直接在公共BeanValidationProvider中注册JAXRSParameterNameProvider，以获取自定义的错误消息。</p><p>JAX-RS 2.0开发人员应该尽可能使用JAX-RS前端特定的拦截器，以确保自动获取JAX-RS特定的修复程序。</p><h3 id="ValidationFeature-Validationofnon-singletonserviceobjects">验证非单一服务对象</h3><p>非单一服务对象是在CXF JAXRSInvoker中创建的，因此其子类为org.apache.cxf.jaxrs.validation。如果需要验证这些对象，则需要注册JAXRSBeanValidationInvoker。</p><p>使用Spring或Blueprint时，可以在jaxrs：invoker块中注册它；使用CXFNonSpringJaxrsServlet时，可以使用“ jaxrs.invoker” servlet初始化参数注册它。</p><p> </p><h3 id="ValidationFeature-ConfiguringBeanValidation1.1usingJAXRSServerFactoryBean">使用JAXRSServerFactoryBean配置Bean验证1.1</h3><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">JAXRSServerFactoryBean sf = new JAXRSServerFactoryBean();
sf.setResourceClasses( ... );
sf.setResourceProvider( ... );
sf.setProvider(new ValidationExceptionMapper());
sf.setInInterceptors(Arrays.&lt; Interceptor&lt; ? extends Message &gt; &gt;asList(new new JAXRSBeanValidationInInterceptor()));
sf.setOutInterceptors(Arrays.&lt; Interceptor&lt; ? extends Message &gt; &gt;asList(new JAXRSBeanValidationOutInterceptor()));
sf.create();
</pre>
</div></div><h3 id="ValidationFeature-ConfiguringBeanValidation1.1usingSpringbeandefinitionsXML">使用Spring bean定义XML配置Bean Validation 1.1</h3><p>遵循与JAXRSServerFactoryBean相似的方法，在使用Spring的情况下，应在<jaxrs:outinterceptors>， <jaxrs:ininterceptors>和<jaxrs:providers>部分fe</jaxrs:providers></jaxrs:ininterceptors></jaxrs:outinterceptors>下添加相应的bean定义<jaxrs:outinterceptors><jaxrs:ininterceptors><jaxrs:providers>：</jaxrs:providers></jaxrs:ininterceptors></jaxrs:outinterceptors></p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;jaxrs:server address="/"&gt;
    &lt;jaxrs:inInterceptors&gt;
        &lt;ref bean="validationInInterceptor" /&gt;
    &lt;/jaxrs:inInterceptors&gt;
        
    &lt;jaxrs:outInterceptors&gt;
        &lt;ref bean="validationOutInterceptor" /&gt;
    &lt;/jaxrs:outInterceptors&gt;
        
    &lt;jaxrs:serviceBeans&gt;
    ...
    &lt;/jaxrs:serviceBeans&gt;
        
    &lt;jaxrs:providers&gt;
        &lt;ref bean="exceptionMapper"/&gt;
    &lt;/jaxrs:providers&gt;
&lt;/jaxrs:server&gt;

&lt;bean id="exceptionMapper" class="org.apache.cxf.jaxrs.validation.ValidationExceptionMapper"/&gt;
&lt;bean id="validationProvider" class="org.apache.cxf.validation.BeanValidationProvider" /&gt;

&lt;bean id="validationInInterceptor" class="org.apache.cxf.jaxrs.validation.JAXRSBeanValidationInInterceptor"&gt;
    &lt;property name="provider" ref="validationProvider" /&gt;
&lt;/bean&gt;

&lt;bean id="validationOutInterceptor" class="org.apache.cxf.jaxrs.validation.JAXRSBeanValidationOutInterceptor"&gt;
    &lt;property name="provider" ref="validationProvider" /&gt;
&lt;/bean&gt;   
</pre>
</div></div><h3 id="ValidationFeature-ValidationExceptionsandHTTPstatuscodes">验证异常和HTTP状态代码</h3><p>根据JAX-RS 2.0规范，任何输入参数验证冲突都映射到HTTP状态代码400 Bad Request，而任何返回值验证冲突（或内部验证冲突）都映射到HTTP状态代码500 Internal Server Error。这本质上就是org.apache.cxf.jaxrs.validation。ValidationExceptionMapper可以。</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>验证异常的详细信息当前未包含在响应中，仅记录在日志中。如果需要报告验证错误详细信息，则鼓励应用程序开发人员注册自定义异常映射器。</p></div></div><h2 id="ValidationFeature-ClientProxies">客户代理</h2><p>CXF 3.1.9引入了org.apache.cxf.jaxrs.client.validation。JAXRSClientBeanValidationFeature，可用于验证JAX-RS代理方法的请求参数。</p><h1 id="ValidationFeature-CustomizingValidationProvider">定制验证提供者</h1><p><a shape="rect" class="external-link" href="https://git-wip-us.apache.org/repos/asf?p=cxf.git;a=blob;f=core/src/main/java/org/apache/cxf/validation/BeanValidationProvider.java;h=2efc7a15f79646d93af9588244c726832221461d;hb=HEAD">org.apache.cxf.validation。BeanValidationProvider</a>是javax.validation的包装。ValidationFactory，由CXF验证拦截器使用。</p><p>如果尚未注入，则会创建它。但是，如果需要自定义javax.validation。ValidationFactory，然后可以通过“ provider”属性将自定义BeanValidationProvider实例注入</p><p>Bean验证拦截器。BeanValidationProvider具有默认的构造函数，该构造函数接受javax.validation。ParameterNameProvider等，请参阅源以获取更多详细信息。</p><p>例如，可以通过将<a shape="rect" class="external-link" href="https://git-wip-us.apache.org/repos/asf?p=cxf.git;a=blob;f=rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/JAXRSParameterNameProvider.java;h=62898defcedf0f1f27505273a9ae34dc9adea528;hb=HEAD">JAXRSParameterNameProvider</a>注入<a shape="rect" class="external-link" href="https://git-wip-us.apache.org/repos/asf?p=cxf.git;a=blob;f=rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/JAXRSParameterNameProvider.java;h=62898defcedf0f1f27505273a9ae34dc9adea528;hb=HEAD">BeanValidationProvider</a>来自定义在JAX-RS路径上描述参数的方式。</p><h1 id="ValidationFeature-Examples">例子</h1><p>以下示例显示了正在验证的JAX-RS资源方法，但是可以完全相同的方式将预定义或自定义Bean Validation 1.1约束应用于JAX-WS服务方法。</p><h2 id="ValidationFeature-Validatingsimpleinputparameters">验证简单的输入参数</h2><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">@POST
@Path("/books")
public Response addBook(
        @NotNull @Pattern(regexp = "\\d+") @FormParam("id") String id,
        @NotNull @Size(min = 1, max = 50) @FormParam("name") String name) {
    // do some work
    return Response.created().build();
}
</pre>
</div></div><h2 id="ValidationFeature-Validatingcomplexinputparameters">验证复杂的输入参数</h2><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">@POST
@Path("/books")
public Response addBook( @Valid Book book ) {
    // do some work
    return Response.created().build();
}
</pre>
</div></div><p>此示例假定Book类定义了验证约束：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">public class Book {
    @NotNull @Pattern(regexp = "\\d+") private String id;
    @NotNull @Size(min = 1, max = 50) private String name;

    // ...
}
</pre>
</div></div><h2 id="ValidationFeature-Validatingreturnvalues(non-Response)">验证返回值（非响应）</h2><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">@GET
@Path("/books/{bookId}")
@Override    
@NotNull @Valid
public Book getBook(@PathParam("bookId") String id) {
    return new Book( id );     
}
</pre>
</div></div><p>本示例假定Book类已定义了验证约束（如上例所示）。</p><h2 id="ValidationFeature-Validatingreturnvalues(Response)">验证返回值（响应）</h2><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">@GET
@Path("/books/{bookId}")
@Valid @NotNull
public Response getBookResponse(@PathParam("bookId") String id) {
    return Response.ok( new Book( id ) ).build();
}
</pre>
</div></div><h1 id="ValidationFeature-BeanValidationandSchemaValidation">Bean验证和架构验证</h1><p>Web服务开发人员通常依赖于基于架构的验证。</p><p>Bean验证可用作验证的替代形式。</p><p>但是，在当前架构不是很严格的情况下，它也可以补充基于架构的验证。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=34842111">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=34842111&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>