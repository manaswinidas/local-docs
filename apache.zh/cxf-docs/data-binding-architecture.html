<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Data Binding Architecture">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-数据绑定架构</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="cxf-architecture.html">CXF体系结构</a> > <a href="data-binding-architecture.html">数据绑定体系结构</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="DataBindingArchitecture-Introduction">介绍</h1>

<p>在CXF中，数据绑定组件负责“在线” XML和Java对象之间的映射。每个数据绑定都实现了特定的映射规则，例如JAXB或XML Bean。</p>

<p>数据绑定分为三个部分：</p>
<ul><li>映射进入和退出服务的实时数据。</li><li>提供基于Java对象的XML模式以实现动态？wsdl URL和java2ws。</li><li>从WSDL中为wsdl2java（以及从理论上讲是动态客户端）生成Java代码。</li></ul>


<p>所有数据绑定都提供实时数据映射。其他两个功能是可选的。</p>

<h1 id="DataBindingArchitecture-DataMapping">资料对应</h1>

<p>数据绑定通过实现org.apache.cxf.databinding提供数据映射。DataBinding接口。同一包中的AbstractDataBinding类提供了一些通用功能。</p>

<p>要添加数据绑定，您可能需要创建一个实现DataBinding的类，也许可以通过扩展AbstractDataBinding来实现。</p>

<h2 id="DataBindingArchitecture-Formats">格式</h2>

<p>每个数据绑定支持传输中的数据的一种或多种格式。“格式”是XML的Java表示形式。 CXF主要与STaX一起使用。因此，所有数据绑定都必须支持XMLStreamReader和XMLStreamWriter作为格式。一些拦截器希望能够读取或写入DOM节点。因此，新的数据绑定也应该支持这种格式。数据绑定通过实现DataBinding中的两个功能来公布其支持的数据格式，例如：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
   public Class&lt;?&gt;[] getSupportedReaderFormats() {
        return new Class[] {XMLStreamReader.class, Node.class};
    }

    public Class&lt;?&gt;[] getSupportedWriterFormats() {
        return new Class[] {XMLStreamWriter.class, Node.class};
    }
</pre>
</div></div>

<h2 id="DataBindingArchitecture-ReadersandWriters">读者和作家</h2>

<p>映射的所有工作都是由实现DataReader <format>和DataWriter的对象完成的<format><format>，其中“格式”是上面定义的表示形式类。CXF代码通过以下方式从数据绑定对象中获取读取器和写入器：</format></format></format></p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;T&gt; DataReader&lt;T&gt; createReader(Class&lt;T&gt; cls); 
&lt;T&gt; DataWriter&lt;T&gt; createWriter(Class&lt;T&gt; cls);
</pre>
</div></div>

<p>这样的调用可能看起来像：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
DataReader&lt;XMLStreamReader&gt; reader = binding.createReader(XMLStreamReader.class);
</pre>
</div></div>

<p>请阅读这些接口的javadoc，因为它对它们的合同有合理完整的解释。</p>

<h2 id="DataBindingArchitecture-GettingSetUp">设定</h2>

<p>如果您已经阅读了读取器和写入器接口，就会发现这些对象是获取XML并生成Java对象所必需的，反之亦然。通常，数据绑定需要获取有关服务的信息，以实现其映射。数据绑定以其<em>初始化</em>方法从CXF服务模型获取此信息。服务模型描述了服务的操作，消息和部分。</p>

<p>初始化方法通常是数据绑定中最复杂的部分，因为它必须与服务的WSDL模型一起使用，也许还要结合对服务实现类的Java反射，才能确定从部分到对象的映射。“前端”基于WSDL内容或注释或其他信息来建立服务模型，但是将其留给数据绑定来制定详细信息。某些重构很可能会将代码从现有的数据绑定移到通用代码。任何愿意做必要沉思的人都欢迎加入。</p>

<p>在初始化过程结束时，数据绑定对象应该知道准备使用哪些Java对象以及准备使用哪些XML类型或元素。</p>

<h1 id="DataBindingArchitecture-XMLSchema">XML模式</h1>

<p>在内部，CXF使用XML Schema作为XML类型词汇。前端可以使用XML模式信息为服务模型添加注释。数据绑定提供XML模式。</p>

<p>DataBinding接口中没有用于模式的API。而是，数据绑定将架构信息添加到服务模型。从CXF 2.1开始，他们添加了两次：一次作为XmlSchema对象模型中的对象，一次作为DOM文档。这是解决XmlSchema问题的变通方法，因此我们希望有朝一日将其删除。</p>

<p>org.apache.cxf.xmlbeans。XmlBeansDataBinding及其相关类提供了此过程的相对简洁的示例。</p>

<h1 id="DataBindingArchitecture-ToolingandCodeGeneration">工具和代码生成</h1>

<p><to be="" written=""></to></p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=87052">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=87052&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>