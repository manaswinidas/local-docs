<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Application Server Specific Configuration Guide">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-特定于应用程序服务器的配置指南</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="deployment.html">部署</a> > <a href="application-server-specific-configuration-guide.html">应用程序服务器特定的配置指南</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p>本文档提供了特定于应用程序服务器的配置信息，以运行Apache CXF。</p><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1524513384762 {padding: 0px;}
div.rbtoc1524513384762 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1524513384762 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1524513384762">
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-JBossApplicationServer">JBoss应用服务器</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-SpringBoot">弹簧靴</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-WebLogic">Web逻辑</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Putjarsinendorsedfolder">将罐子放在认可的文件夹中</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Packwarinanear,deploytheearwithweblogic-application.xml">整理耳朵，用weblogic-application.xml部署耳朵</a></li></ul>
</li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Websphere">网络圈</a>
<ul class="toc-indentation"><li><a shape="rect" href="javascript:void(0);">对于<6.1.0.29版的WebSphere版本</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-NoWebServicesFeaturePackforWebSphereinstalled">没有安装WebSphere Web Services Feature Pack</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-putjarintheendorsedfolder">将jar放在认可的文件夹中</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Addyourownclassloader">添加自己的类加载器</a></li></ul>
</li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-WebServicesFeaturePackforWebSphereInstalled">已安装WebSphere Web Services Feature Pack</a></li></ul>
</li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-ForWebSphere6.1.0.29+,V7andV8">对于WebSphere 6.1.0.29 +，V7和V8</a></li></ul>
</li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Glassfish">玻璃鱼</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-OC4J">OC4J</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Disclaimer">免责声明</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Background">背景</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Configurationoverview">配置概述</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-OracleOC4Jclassloading">Oracle OC4J类加载</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Neededcomponents">所需组件</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Preparingstax-api">准备stax-api</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-ReplacetheOracleXMLparserwithXerces">用Xerces替换Oracle XML分析器</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-GetridofOC4JJAX-WSlibraries">摆脱OC4J JAX-WS库</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-swappingOraclewsdl.jarwithwsdl4j.jarandjaxb.jarAPIwithjaxb-api-2.0.jar">用wsdl4j.jar和jaxb.jar API与jaxb-api-2.0.jar交换Oracle wsdl.jar</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Deployingapplications">部署应用</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-OracleFAQ">Oracle常见问题解答</a>
<ul class="toc-indentation"><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-I'mgettingjava.lang.ClassCastException:org.apache.xerces.jaxp.DocumentBuilderFactoryImpl">我正在获取java.lang。ClassCastException：org.apache.xerces.jaxp。DocumentBuilderFactoryImpl</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-IcannotgetWSDL(gettingHTTP500accesingmyCXFserviceWSDLwithhttp://myshot/myservice?wsdl)">我无法获得WSDL（使用http：// myshot / myservice？wsdl获取HTTP 500以访问我的CXF服务WSDL）</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-I'mgettingjava.lang.NoSuchMethodException:oracle.j2ee.ws.wsdl.extensions.soap.SOAPBodyImpl.getElementType()">我正在获取java.lang。NoSuchMethodException：oracle.j2ee.ws.wsdl.extensions.soap。SOAPBodyImpl.getElementType（）</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Icannotgetittoworkstill">我不能让它继续工作</a></li></ul>
</li></ul>
</li></ul>
</li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-IntegrationwithApplicationServerFAQ">与Application Server常见问题解答集成</a></li><li><a shape="rect" href="#ApplicationServerSpecificConfigurationGuide-Resources">资源资源</a></li></ul>
</div><h2 id="ApplicationServerSpecificConfigurationGuide-JBossApplicationServer">JBoss应用服务器</h2><p>JBoss应用程序服务器（JBoss AS）带有自己的Web服务堆栈（JBossWS），以便提供完整的JavaEE支持。<br clear="none">从JBoss AS 6 M4开始，默认的Web服务堆栈内部基于Apache CXF。结果，用户可能会尝试使用CXF库及其依赖项中的类（如果包含在部署中且未正确隔离）来尝试类加载问题。有关如何在使用的应用程序服务器版本上打开类加载隔离的详细信息，请参考相关的JBoss AS文档。</p><p>特别是，当愿意在JBoss AS 7系列之上运行基于Apache CXF的应用程序时，用户基本上有两种选择：</p><ul><li><p>使用JBoss AS，就好像它是没有WS功能的servlet容器一样：这基本上意味着为用户部署禁用了webservices子系统，因此阻止了AS webservices堆栈处理ws端点部署并让归档中包含的CXF库处理击中CXFServlet时的任何WS调用；通过在ws端点部署中添加如下的jboss-deployment-structure.xml来关闭webservices子系统：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2"&gt;
    &lt;deployment&gt;
        &lt;exclude-subsystems&gt;
            &lt;subsystem name="webservices" /&gt;
        &lt;/exclude-subsystems&gt;
    &lt;/deployment&gt;
&lt;/jboss-deployment-structure&gt;
</pre>
</div></div><p>这种方法提供了在JBoss AS上部署CXF应用程序的最快途径。缺点是无法与JBoss AS内部组件进行特殊的ws集成</p></li></ul><ul><li>依赖于JBossWS集成和应用程序服务器中包含的Apache CXF库（ <a shape="rect" class="external-link" href="https://docs.jboss.org/author/display/AS71/Webservices+reference+guide" rel="nofollow">文档</a> ）：这意味着从ws部署中删除任何Apache CXF库以及JBoss AS中已包含的任何其他依赖项（包括任何Java EE API jar） ;如果包含，则将根据JBossWS约定重写可选的web.xml描述符（请参阅<a shape="rect" class="external-link" href="https://docs.jboss.org/author/display/AS71/JAX-WS+User+Guide" rel="nofollow">文档</a> ）； Spring支持在JBoss AS中是可选的，并且基于Spring的终结点声明不是ws终结点的默认/首选配置方法，因此，愿意使用Spring声明终结点的用户需要创建org.springframework.spring模块并将其终结点声明放入jbossws-cxf.xml描述符；如果用户应用程序使用JavaEE api以外的任何库，则应使用jboss-deployment-structure.xml描述符或归档文件MANIFEST.MF声明适当的模块<a shape="rect" class="external-link" href="https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7" rel="nofollow">依赖关系</a> （有关ws模块的少量指导，请<a shape="rect" class="external-link" href="https://docs.jboss.org/author/display/AS71/JBoss+Modules+and+WS+applications" rel="nofollow">点击此处</a> ）</li></ul><p>第二种方法允许利用完整的JavaEE 6堆栈（包括例如JSR-109）以及与JBoss AS内部的特定ws集成。</p><h2 id="ApplicationServerSpecificConfigurationGuide-SpringBoot">弹簧靴</h2><p>请参阅CXF <a shape="rect" href="springboot.html">SpringBoot</a>文档。</p><p>JAX-WS：请参阅<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jaxws_spring_boot" rel="nofollow">JAX-WS Spring Boot</a>演示。</p><p>JAX-RS：请参阅<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot" rel="nofollow">JAX-RS Spring Boot</a>和<a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/spring_boot_scan" rel="nofollow">JAX-RS Spring Boot Scan</a>演示。</p><h2 id="ApplicationServerSpecificConfigurationGuide-WebLogic">Web逻辑</h2><p>有两种方法可以在WebLogic中部署CXF WAR存档。（ <strong>注意：这已在WebLogic9.2上进行了验证。</strong> ）</p><h4 id="ApplicationServerSpecificConfigurationGuide-Putjarsinendorsedfolder">将罐子放在认可的文件夹中</h4><ul><li>将geronimo-ws-metadata_2.0_spec-1.1.1.jar放在$ Weblogic_Home / jdk _ .. / jre / lib / endorsed文件夹中。</li><li>在Weblogic中部署CXF War。<br clear="none">（不建议使用这种方法，因为它可能会破坏应用程序服务器本身。首选以下方法，因为它仅影响单个模块。）</li></ul><h4 id="ApplicationServerSpecificConfigurationGuide-Packwarinanear,deploytheearwithweblogic-application.xml">整理耳朵，用weblogic-application.xml部署耳朵</h4><ul><li><p>在META-INF文件夹中创建一个标准的J2EE application.xml文件。（例如，以$ CXF_HOME / samples / java_first_spring_support为例）</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE application PUBLIC
		"-//Sun Microsystems, Inc.//DTD J2EE Application 1.3//EN"
		"http://java.sun.com/dtd/application_1_3.dtd"&gt;
&lt;application&gt;
	&lt;display-name&gt;spring_http&lt;/display-name&gt;
	&lt;module&gt;
		&lt;web&gt;
			&lt;web-uri&gt;spring_http.war&lt;/web-uri&gt;
			&lt;context-root&gt;spring&lt;/context-root&gt;
		&lt;/web&gt;
	&lt;/module&gt;
&lt;/application&gt;
</pre>
</div></div></li></ul><ul><li><p>在META-INF文件夹中创建一个weblogic-application.xml（特定于Weblogic）。</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;weblogic-application xmlns="http://www.bea.com/ns/weblogic/90"&gt;
	&lt;application-param&gt;
		&lt;param-name&gt;webapp.encoding.default&lt;/param-name&gt;
		&lt;param-value&gt;UTF-8&lt;/param-value&gt;
	&lt;/application-param&gt;
	&lt;prefer-application-packages&gt;
		&lt;package-name&gt;javax.jws.*&lt;/package-name&gt;
	&lt;/prefer-application-packages&gt;
&lt;/weblogic-application&gt;
</pre>
</div></div></li></ul><p>您在上面看到的<a shape="rect" class="external-link" href="http://e-docs.bea.com/wls/docs100/programming/classloading.html#wp1097187" rel="nofollow">preferred</a> -application-packages元素设置了WebLogic的<a shape="rect" class="external-link" href="http://e-docs.bea.com/wls/docs100/programming/classloading.html#wp1097187" rel="nofollow">Filtering Classloader</a> 。在依赖于WebLogic系统类加载器的版本之前，将首先在EAR中搜索其包与列出的包名称元素之一匹配的每个类。如果未在此处列出特定类的软件包，则WebLogic将首先尝试加载其自己的（可能是较旧的）版本，因此，如果由于任何特定类而遇到部署错误，则可能希望在此处添加其软件包。</p><p>还要注意就可以了，可能需要，如在weblogic-application.xml文件的其他选项，如XML处理工厂<a shape="rect" class="external-link" href="http://cxf.547215.n5.nabble.com/Getting-error-while-deploying-on-weblogic-9-2-but-able-to-do-in-tomcat-td554060.html#a554061" rel="nofollow">在这里</a> 。有关更多信息，请参见WebLogic <a shape="rect" class="external-link" href="http://download.oracle.com/docs/cd/E12840_01/wls/docs103/programming/app_xml.html#wp1064995" rel="nofollow">指南</a> 。</p><ul><li>运行“ jar cvf ...”命令来创建耳朵，然后部署它。另外，此<a shape="rect" class="external-link" href="http://www.jroller.com/gmazza/entry/deploying_webservices_on_weblogic" rel="nofollow">博客条目</a>提供了一种构建EAR的Mavenized方法。</li></ul><h2 id="ApplicationServerSpecificConfigurationGuide-Websphere">网络圈</h2><h3 id="ApplicationServerSpecificConfigurationGuide-ForWebSphereVersions<6.1.0.29">对于<6.1.0.29版的WebSphere版本</h3><p>将罐子添加到“认可”文件夹似乎是主要解决方案：</p><h4 id="ApplicationServerSpecificConfigurationGuide-NoWebServicesFeaturePackforWebSphereinstalled">没有安装WebSphere Web Services Feature Pack</h4><h5 id="ApplicationServerSpecificConfigurationGuide-putjarintheendorsedfolder">将jar放在认可的文件夹中</h5><ul><li>将wsdl4j-1.6.1.jar放入$ WebSphere_HOME / java / jre / lib / endorsed文件夹中。</li><li>在WebSphere控制台中，找到特定的企业应用程序，单击“类加载和更新检测”。<ul><li>标记为“首先使用应用程序类加载器加载类”。</li><li>标记为“应用程序中每个war文件的类加载器”。</li></ul></li></ul><p>然后重新启动Websphere服务器。（因为我们更改了认可的文件夹，所以我们需要重新启动它才能使其生效）。</p><div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>请确保您的类路径没有servlet-2.5库，因为WebSphere6.1是servlet-2.4兼容的！</p></div></div><h5 id="ApplicationServerSpecificConfigurationGuide-Addyourownclassloader">添加自己的类加载器</h5><p>如果将wsdl4j-1.6.1 jar放在$ WAS_HOME / java / jre / lib / endorsed中，则所有应用程序都将取决于wsdl4j的版本。另一个解决方案是在服务器中创建一个新的类加载器，该服务器在父类加载器之前加载，使用wsdl4j版本创建共享库，并将此共享库添加到新的类加载器中。此版本的wsdl4j仅可用于您的特定服务器，而不会影响在其他服务器上运行的应用程序。</p><p><strong>一步步</strong></p><ol><li>在WAS控制台中，导航到“ <strong>环境”>“共享库”</strong></li><li>选择您希望库在其中显示的范围</li><li>单击<strong>新建，</strong>然后设置值，例如： <code>name=MYAPP_SHARED_LIB, classpath=PATH_TO/wsdl4j-1.6.2.jar</code>并<strong>保存</strong></li><li>导航到<strong>应用程序服务器> [您的服务器名称]</strong> <strong>> Java和进程管理>类加载器>新建</strong></li><li>首先选择<strong>使用应用程序类加载器加载的类，</strong>然后<strong>保存</strong></li><li>选择新的类加载器，然后单击<strong>共享库引用</strong></li><li>添加您的共享库（MYAPP_SHARED_LIB） <strong>保存</strong>并重新启动服务器。</li></ol><p>仅在WAS 6.1中进行了测试，但也应在早期版本中工作。</p><p>另一个运行WS6.1 FP 23且没有Web服务功能包的用户提出了此解决方案，该解决方案似乎适用于他们：</p><blockquote><p>使用以下jar创建共享库：<br clear="none">jsr173_api-1.0.jar<br clear="none">jaxp-ri-1.4.2.jar<br clear="none">saaj-impl-1.3.2.jar<br clear="none">wsdl4j-1.6.2.jar</p><p>创建一个新的父优先级类加载器，并使其引用您刚创建的共享库。重新启动一切，它应该工作。</p></blockquote><h4 id="ApplicationServerSpecificConfigurationGuide-WebServicesFeaturePackforWebSphereInstalled">已安装WebSphere Web Services Feature Pack</h4><p>如果安装了WebSphere Web Services Feature Pack，事情将变得更加复杂。安装此功能部件包之后，就不可能使用CXF部署应用程序，因为WebSphere Web Services引擎开始解析服务的JAX-WS批注并尝试部署服务。</p><p>直到修订包27（6.1.0.27），都无法禁用WebSphere Web Services引擎。</p><h3 id="ApplicationServerSpecificConfigurationGuide-ForWebSphere6.1.0.29+,V7andV8">对于WebSphere 6.1.0.29 +，V7和V8</h3><p>请遵循此IBM developerWorks文章中提供的PDF下载： <a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/websphere/library/techarticles/1001_thaker/1001_thaker.html" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/websphere/library/techarticles/1001_thaker/1001_thaker.html" rel="nofollow">//www.ibm.com/developerworks/websphere/library/techarticles/1001_thaker/1001_thaker.html</a></p><p>如PDF中所述，您需要将整个JVM或特定模块的Classloader顺序更改为“首先使用本地类加载器加载的类（最后使用父类加载的类）”，并禁用IBM Web服务引擎。 。</p><p>要禁用整个JVM，请设置JVM属性</p><p>com.ibm.websphere.webservices。DisableIBMJAXWSEngine = true</p><p>或者通过添加来仅针对特定模块禁用引擎</p><p>禁用IBMJAXWSEngine：true</p><p>到WAR / META-INF / MANIFEST.MF。</p><p>某些版本的WebSphere附带的另一个问题是与SAAJ实现的不兼容。建议使用org.apache.servicemix.bundles.saaj-impl-1.3.18_1.jar saaj impl，可从<a shape="rect" class="external-link" href="http://repo1.maven.org/maven2/org/apache/servicemix/bundles/org.apache.servicemix.bundles.saaj-impl/1.3.18_1/" rel="nofollow">http://repo1.maven.org/maven2/org/apache/servicemix/bundles/org.apache获得.servicemix.bundles.saaj-impl / 1.3.18_1 /，</a>因为它包含SAAJ的最新版本以及必需的DOM实现，该实现将在IBM JDK上运行。</p><p>一位用户报告说，通过遵循上面的内容，他能够用最少的CXF jar集在WebSphere上运行CXF。<br clear="none">程序和使用罐子列表：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">FastInfoset-1.2.9.jar
aopalliance-1.0.jar
commons-logging-1.1.1.jar
cxf-2.5.2.jar
geronimo-activation_1.1_spec-1.1.jar
geronimo-annotation_1.0_spec-1.1.1.jar
geronimo-javamail_1.4_spec-1.7.1.jar
geronimo-jaxws_2.2_spec-1.1.jar
geronimo-stax-api_1.0_spec-1.0.1.jar
geronimo-ws-metadata_2.0_spec-1.1.3.jar
jars_in_war.txt
jaxb-api-2.2.3.jar
jaxb-impl-2.2.4-1.jar
neethi-3.0.1.jar
org.apache.servicemix.bundles.saaj-impl-1.3.18_1.jar
spring-aop-3.0.6.RELEASE.jar
spring-asm-3.0.6.RELEASE.jar
spring-beans-3.0.6.RELEASE.jar
spring-context-3.0.6.RELEASE.jar
spring-core-3.0.6.RELEASE.jar
spring-expression-3.0.6.RELEASE.jar
spring-web-3.0.6.RELEASE.jar
stax2-api-3.1.1.jar
woodstox-core-asl-4.1.1.jar
wsdl4j-1.6.2.jar
xmlschema-core-2.0.1.jar
</pre>
</div></div><h2 id="ApplicationServerSpecificConfigurationGuide-Glassfish">玻璃鱼</h2><p>没有该sun-web.xml文件来配置类加载器，CXF拦截器将无法在Glassfish中使用。默认情况下，Glassfish将Metro用于JAX-WS服务，因此需要将类加载器配置为允许CXF库提供JAX-WS服务。以下sun-web.xml xml源已添加到/ WEB-INF中以解决此问题：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE sun-web-app PUBLIC '-//Sun Microsystems, Inc.//DTD
Application Server 9.0 Servlet 2.5//EN'
'http://www.sun.com/software/appserver/dtds/sun-web-app_2_5-0.dtd'&gt;
&lt;sun-web-app&gt;
&lt;class-loader delegate="false"/&gt;
&lt;/sun-web-app&gt;
</pre>
</div></div><h2 id="ApplicationServerSpecificConfigurationGuide-OC4J">OC4J</h2><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>本指南要求对OC4J配置进行大量自定义。请记住，下面介绍的某些步骤是未记录的或不受支持的。我们强烈建议您在专用于CXF的单独容器中执行这些步骤。</p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>另请参阅： <a shape="rect" class="external-link" href="http://chadthedeveloper.blogspot.com/2008/06/cxf-vs-oc4j-round-1.html" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://chadthedeveloper.blogspot.com/2008/06/cxf-vs-oc4j-round-1.html" rel="nofollow">//chadthedeveloper.blogspot.com/2008/06/cxf-vs-oc4j-round-1.html，</a>以获取有关如何配置OC4J的其他建议。</p></div></div><h3 id="ApplicationServerSpecificConfigurationGuide-Disclaimer">免责声明</h3><p>本指南仅涵盖10.1.3。OC4J的XX版本。请注意，OC4J 10.1.2不是JSE 1.5认证的服务器。OC4J 11_g_是<a shape="rect" class="external-link" href="http://java.sun.com/javaee/overview/compatibility.jsp" rel="nofollow">完全JEE 5.0认证的堆栈，</a>并带有自己的JAX-WS实现。</p><h3 id="ApplicationServerSpecificConfigurationGuide-Background">背景</h3><p>Oracle OC4J附带了Oracle高度定制的XML堆栈，包括SAX，StAX，JAXP，JAX-WS，SAAJ，WSDL等。所有这些框架都是OC4J发行版中Oracle专有的实现。这使Oracle在其产品之间确实具有良好的互操作性，但是很难引入需要对上述API（例如CXF）进行不同实现的功能。</p><div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span class="confluence-anchor-link" id="ApplicationServerSpecificConfigurationGuide-orajaxws"></span><br clear="none">OC4J 10.1.3附带了<a shape="rect" class="external-link" href="http://www.oracle.com/technology/tech/java/oc4j/10131/OracleAS-NF-10131.pdf" rel="nofollow">JAX-WS（JSR-181）的初步实现，</a>但是该实现在某种程度上仅限于自上而下的场景，并且定制非常有限（缺少JAXB 2.0等）。</p></div></div><h4 id="ApplicationServerSpecificConfigurationGuide-Configurationoverview">配置概述</h4><p>需要在OC4J中自定义一些组件以允许CFX集成：</p><ul><li><a shape="rect" class="external-link" href="http://xerces.apache.org/xerces2-j/">Xerces</a></li><li>JAX-WS 2.0 API</li><li><a shape="rect" class="external-link" href="http://sourceforge.net/projects/wsdl4j" rel="nofollow">WSDL4J</a></li></ul><p>不幸的是，这些组件必须在OC4J的不同部分中进行配置。</p><h4 id="ApplicationServerSpecificConfigurationGuide-OracleOC4Jclassloading">Oracle OC4J类加载</h4><p>成功将CXF集成到OC4J中的关键部分是了解类加载器如何在OC4J中工作。启动OC4J时，通常可以进行定制的三个阶段：</p><ol><li>虚拟机启动</li><li>OC4J开机</li><li>CXF（应用程序）启动</li></ol><p>最后一步的自定义<a shape="rect" class="external-link" href="http://download-uk.oracle.com/docs/cd/B25221_03/web.1013/b14433/classload.htm" rel="nofollow">很容易实现</a> -基本上，OC4J具有强大的类加载器和简单的自定义控制台。不幸的是，有些组件无法通过这种方式进行配置。它们是在OC4J引导期间配置的。不幸的是，其中之一是OC4J Web服务堆栈（位于<code>$ORACLE_HOME/webservices/lib</code> ）。</p><h4 id="ApplicationServerSpecificConfigurationGuide-Neededcomponents">所需组件</h4><p>在开始之前，请下载<a shape="rect" href="http://cxf.apache.org/download.html">Apache CXF 2.0.6或更高版本</a>以及<a shape="rect" class="external-link" href="http://archive.apache.org/dist/xml/xerces-j/">Xerces 2.8.1</a></p><h4 id="ApplicationServerSpecificConfigurationGuide-Preparingstax-api">准备stax-api</h4><p>如果您使用的CXF版本包含stax-api.jar，而该版本又包含QName类，请删除<code>javax.xml.namespace.QName</code>从CXF附带的stax-api中获取。 Oracle显然已经在使用它<code>$ORACLE_HOME/j2ee/home/lib/jax-qname-namespace.jar</code> 。</p><p><span class="confluence-anchor-link" id="ApplicationServerSpecificConfigurationGuide-xerces"></span></p><h4 id="ApplicationServerSpecificConfigurationGuide-ReplacetheOracleXMLparserwithXerces">用Xerces替换Oracle XML分析器</h4><p><a shape="rect" class="external-link" href="http://www.oracle.com/technology/tech/java/oc4j/1013/how_to/how-to-swapxmlparser/doc/readme.html" rel="nofollow">此处</a>详细介绍了如何执行此操作的基本思想</p><p>创建名为的OC4J共享库<code>cxf.foundation</code>并填写：</p><ul><li>xercesImpl.jar（来自Xerces发行版）</li><li>xml-apis-1.2.02.jar（来自CXF-distribution）</li><li>xalan-2.7.0.jar（同上）</li><li><p>geronimo-ws-metadata_2.0_spec-1.1.1.jar（同上）</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>构建应用程序时， <strong>请勿</strong>再次<strong>包含这些组件</strong> 。</p></div></div></li></ul><h4 id="ApplicationServerSpecificConfigurationGuide-GetridofOC4JJAX-WSlibraries">摆脱OC4J JAX-WS库</h4><p>OC4J <a shape="rect" href="application-server-specific-configuration-guide.html">初步支持JAX-WS</a> ，不幸的是，这意味着在OC4J引导期间，它会加载<em>过时的</em> JAX-WS API和Oracle的实现。在OC4J引导的早期阶段，甚至在共享库开始起作用之前就发生这种情况。引导时OC4J库在<code>boot.xml</code>归档在<code>$ORACLE_HOME/j2ee/home/oc4j.jar</code>自举罐。要摆脱这种情况：</p><ul><li>打开包装<code>oc4j.jar</code>文件</li><li>定位<code>META-INF/boot.xml</code>档案并编辑</li><li>查找部分</li></ul><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;!-- WS jax-rpc --&gt;
        &lt;code-source path="${oracle.home}/webservices/lib/jaxr-api.jar"/&gt;
        &lt;code-source path="${oracle.home}/webservices/lib/jaxrpc-api.jar"/&gt;
        &lt;code-source path="${oracle.home}/webservices/lib/jaxb-api.jar"/&gt;
        &lt;code-source path="${oracle.home}/webservices/lib/saaj-api.jar"/&gt;
        &lt;code-source path="${oracle.home}/webservices/lib/jws-api.jar" if="java.specification.version == /1\.[5-6]/"/&gt;
</pre>
</div></div><p>并注释掉其中的行<code>jws-api.jar</code>条目，如下所示</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;!-- &lt;code-source path="${oracle.home}/webservices/lib/jws-api.jar" if="java.specification.version == /1\.[5-6]/"/&gt; --&gt;
</pre>
</div></div><ul><li>重新包装<code>oc4j.jar</code> （不要忘记<code>MANIFEST.MF</code> - 使用<code>jar -m META-INF/MANIFEST.MF</code> ）</li></ul><p><span class="confluence-anchor-link" id="ApplicationServerSpecificConfigurationGuide-wsdl4j"></span></p><h4 id="ApplicationServerSpecificConfigurationGuide-swappingOraclewsdl.jarwithwsdl4j.jarandjaxb.jarAPIwithjaxb-api-2.0.jar">交换Oracle <code>wsdl.jar</code>与<code>wsdl4j.jar</code>和<code>jaxb.jar</code> API与<code>jaxb-api-2.0.jar</code></h4><p>另外，Oracle提供了自己的WSDL功能实现，该实现与<code>wsdl4j.jar</code> 。为了摆脱这个添加<code>-Xbootclasspath/p:"<path to wsdlj>/wsdl4j-1.6.1.jar;<path to jaxb2>/jaxb-api-2.0.jar"</code> JVM参数的选项（在独立运行OC4J的命令行中或在OPMN中）。</p><h4 id="ApplicationServerSpecificConfigurationGuide-Deployingapplications">部署应用</h4><p>部署时，请遵循以下步骤：</p><ul><li>编辑部署计划</li><li>编辑<code>Configure class loading</code>在<a shape="rect" class="external-link" href="http://www.oracle.com/technology/tech/java/oc4j/1013/how_to/how-to-swapxmlparser/doc/readme.html" rel="nofollow">此处</a>所述的部署计划中</li><li><strong>取消选中</strong> <code><strong>oracle.xml</strong></code>图书馆</li><li><strong>校验</strong> <code><strong>cxf.foundation</strong></code>图书馆</li><li><strong>取消选中</strong> <code><strong>Search Local Classes First</strong></code></li><li><p>不包括<code>xercesImpl</code> ， <code>xml-apis</code> ， <code>xalan</code>和<code>geronimo-ws-metadata_2.0_spec-1.1.1.jar</code>在<code>war</code> -这些将由OC4J共享库类加载器自动加载。</p><div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>您可以通过打包来自动执行上述步骤<code>war</code>进入<code>ear</code>存档（即使），即使只有<code>war</code>并提供<code>orion-application.xml</code>专有的描述符描述<a shape="rect" class="external-link" href="http://download-west.oracle.com/docs/cd/B32110_01/web.1013/b28952/classload.htm#CIHIHDEG" rel="nofollow">在这里</a> 。您也可以提供专有<code>orion-web.xml</code>在你的<code>war</code>仪器<code>Search Local Classes First</code>上述属性。此步骤描述<a shape="rect" class="external-link" href="http://www.oracle.com/technology/tech/java/oc4j/htdocs/how-to-servlet-sysclassloader.html" rel="nofollow">这里</a> 。</p></div></div></li></ul><h4 id="ApplicationServerSpecificConfigurationGuide-OracleFAQ">Oracle常见问题解答</h4><h5 id="ApplicationServerSpecificConfigurationGuide-I'mgettingjava.lang.ClassCastException:org.apache.xerces.jaxp.DocumentBuilderFactoryImpl">我越来越<code>java.lang.ClassCastException: org.apache.xerces.jaxp.DocumentBuilderFactoryImpl</code></h5><p>这主要发生在以下情况：</p><ul><li>xerces被加载两次-通过共享库类加载器和应用程序类加载器</li><li>或之间<code>xerces</code>和<code>oracle</code> SAX API的实现</li></ul><p>请确保您已正确安装并启用了应用程序<code>cxf.foundation</code>如所描述的共享库<a shape="rect" href="application-server-specific-configuration-guide.html">这里</a> 。如果是，请确保您未在其中包括xercesImpl.jar <code>war</code> 。如果仍然有问题，请<a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/parsers/SAXParserFactory.html#newInstance()" rel="nofollow">查看如何调试JAXP问题</a> -确保<code>org.apache.xerces.jaxp.DocumentBuilderFactoryImpl</code>从内部实例化<code>JAXP</code>并不是<code>oracle.xml.parser.v2.DocumentBuilder</code> 。</p><p><span class="confluence-anchor-link" id="ApplicationServerSpecificConfigurationGuide-f2"></span></p><h5 id="ApplicationServerSpecificConfigurationGuide-IcannotgetWSDL(gettingHTTP500accesingmyCXFserviceWSDLwithhttp://myshot/myservice?wsdl)">我无法获得WSDL（使用<a shape="rect" class="external-link" href="http://myshot/myservice?wsdl" rel="nofollow">http：// myshot / myservice？wsdl来</a>获取HTTP 500以访问我的CXF服务WSDL）</h5><p>请确保<code>wsdl4j.jar</code>之前加载<code>wsdl.jar</code>描述<a shape="rect" href="application-server-specific-configuration-guide.html">在这里</a></p><h5 id="ApplicationServerSpecificConfigurationGuide-I'mgettingjava.lang.NoSuchMethodException:oracle.j2ee.ws.wsdl.extensions.soap.SOAPBodyImpl.getElementType()">我越来越<code>java.lang.NoSuchMethodException: oracle.j2ee.ws.wsdl.extensions.soap.SOAPBodyImpl.getElementType()</code></h5><p><a shape="rect" href="application-server-specific-configuration-guide.html">看到这个</a></p><h5 id="ApplicationServerSpecificConfigurationGuide-Icannotgetittoworkstill">我不能让它继续工作</h5><p>尝试一些简单的事情。下载OC4J独立版本并直接从命令行引导它： <code>java [options] -jar oc4j.jar</code> 。启用<a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/parsers/SAXParserFactory.html#newInstance()" rel="nofollow">SAX调试</a> 。确保您的应用程序中不包含重复的jar <code>xercesImpl, xalan, xml-apis and geronimo-ws-metadata_2.0_spec-1.1.1.jar</code> 。再次查看上述步骤。有用<img class="emoticon emoticon-wink" src="https://cwiki.apache.org/confluence/s/en_GB/5997/6f42626d00e36f53fe51440403446ca61552e2a2.1/_/images/icons/emoticons/wink.png" alt="（眨眼）" data-emoticon-name="wink"> 。</p><h2 id="ApplicationServerSpecificConfigurationGuide-IntegrationwithApplicationServerFAQ">与Application Server常见问题解答集成</h2><p>1。<br clear="none">问：我有此错误：javax.xml.ws。WebServiceException：无法创建SAAJ工厂实例。<br clear="none">答：请确保您在类路径中有saaj-impl-1.3.jar，并确保您的应用选择了该文件而不是weblogic的文件。</p><h2 id="ApplicationServerSpecificConfigurationGuide-Resources">资源资源</h2><p><a shape="rect" class="external-link" href="http://download-uk.oracle.com/docs/cd/B25221_03/web.1013/b14433/classload.htm" rel="nofollow">利用OC4J类加载框架</a><br clear="none"> <a shape="rect" class="external-link" href="http://xfire.codehaus.org/XFire+on+WebLogic+9.2" rel="nofollow">在WebLogic中部署XFire</a><br clear="none"> <a shape="rect" class="external-link" href="http://edocs.bea.com/wls/docs92/programming/classloading.html" rel="nofollow">了解WebLogic ClassLoader</a><br clear="none"> <a shape="rect" class="external-link" href="http://www.jboss.org/wiki/Wiki.jsp?page=ClassLoadingConfiguration" rel="nofollow">JBoss类配置</a><br clear="none"> <a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/parsers/SAXParserFactory.html#newInstance()" rel="nofollow">SAX故障排除</a></p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=68526">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=68526&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>