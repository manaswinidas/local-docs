<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Security Configuration">




    <title>Apache CXF-安全配置</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="securing-cxf-services.html">保护CXF服务</a> > <a href="security-configuration.html">安全配置</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><div class="aui-message aui-message-error"><p class="title"><strong>呈现宏'html'时出错</strong></p><p>您的Confluence管理员不允许在HTML宏中使用Javascript。可以使用HTML for Confluence Configuration更改此设置。请与您的管理员联系以获取详细信息。</p></div><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h2 id="SecurityConfiguration-Backgroundtocommonsecurityconfiguration">通用安全配置的背景</h2><p>从Apache CXF 3.1.0起，CXF中的<a shape="rect" href="ws-securitypolicy.html">WS-SecurityPolicy</a>和<a shape="rect" href="jax-rs-xml-security.html">XML安全性</a> （JAX-RS）组件共享一组公共的配置标签。以前，所有配置标记都是在cxf-rt-ws-security模块的SecurityConstants类中定义的。然后，JAX-RS XML安全性组件直接引用这些配置标签，这意味着XML安全性组件必须依赖于SOAP模块，这是不理想的。</p><h2 id="SecurityConfiguration-NewconfigurationtagsinApacheCXF3.1.0">Apache CXF 3.1.0中的新配置标签</h2><p>从Apache CXF 3.1.0开始，cxf-rt-security模块现在在WS-Security和JAX-RS XML Security模块之间共享，并且包含一个SecurityConstants类，该类定义了两个堆栈使用的安全常量。这些配置标记与在先前发行版的WS-Security SecurityConstants类中找到的一组先前配置标记完全相同，只是前缀现在为“ security”（以前为“ ws-security”）。这是一组新的配置标签：</p><h4 id="SecurityConfiguration-Userproperties">用户属性</h4><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.username</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用户名。每个安全功能对其使用的方式有所不同，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#USERNAME">此处</a>以获取更多信息。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>安全密码</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>未定义“ security.callback-handler”时的用户密码。当前仅用于将密码添加到UsernameToken的情况。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.signature.username</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>签名的用户名。它用作密钥库中的别名，以获取用户的证书和签名专用密钥。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#SIGNATURE_USERNAME">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.signature.password <strong>CXF 3.3.2</strong></td><td colspan="1" rowspan="1" class="confluenceTd">未定义“ security.callback-handler”时用于签名的用户密码。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.encryption.username</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于加密的用户名。它在密钥库中用作别名，以获取用户的公共密钥进行加密。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#ENCRYPT_USERNAME">此处</a> 。</p></td></tr></tbody></table></div><h4 id="SecurityConfiguration-CallbackClassandCryptoproperties">回调类和加密属性</h4><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.callback-handler</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于获取密码的CallbackHandler <a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#CALLBACK_HANDLER">实现</a>类。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.saml回调处理程序</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于构造SAML断言的SAML CallbackHandler <a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#SAML_CALLBACK_HANDLER">实现</a>类。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.signature.properties</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果未设置“ security.signature.crypto”，则用于签名的Crypto属性<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#SIGNATURE_PROPERTIES">配置</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.encryption.properties</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果未设置“ security.encryption.crypto”，则用于加密的Crypto属性<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#ENCRYPT_PROPERTIES">配置</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.signature.crypto</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于签名的加密<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/components/crypto/Crypto.html">对象</a> 。如果未定义，则使用“ security.signature.properties”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.encryption.crypto</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于加密的加密<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/components/crypto/Crypto.html">对象</a> 。如果未定义，则使用“ security.encryption.properties”。</p></td></tr></tbody></table></div><p><strong>注意：</strong>对于指定保护令牌的对称绑定，将使用安全加密属性。</p><h4 id="SecurityConfiguration-BooleanSecurityconfigurationtags,e.g.thevalueshouldbe" tru="or" fals="." ="">布尔型安全配置标签，例如，值应为“ true”或“ false”。</h4><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>不变</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>默认</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>定义</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.enableRevocation</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>假</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>验证对证书的信任时是否启用证书吊销列表（CRL）检查。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.enable.unsigned-saml-assertion.principal</td><td colspan="1" rowspan="1" class="confluenceTd">假</td><td colspan="1" rowspan="1" class="confluenceTd">是否允许将未签名的saml断言作为SecurityContext主体。默认为false。<p>请注意，“未签名”是指内部签名。即使令牌由外部签名签名（按照“发件人凭证”要求），如果您要使用令牌来设置安全上下文，也必须配置此布尔值。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.validate.saml.subject.conf</td><td colspan="1" rowspan="1" class="confluenceTd">真正</td><td colspan="1" rowspan="1" class="confluenceTd">是否验证收到的SAML令牌的SubjectConfirmation要求。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.sc.jaas-subject</td><td colspan="1" rowspan="1" class="confluenceTd">真正</td><td colspan="1" rowspan="1" class="confluenceTd">如果不能从JAAS主题创建安全上下文，则将其设置为“ false”。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">安全。验证。观众限制</td><td colspan="1" rowspan="1" class="confluenceTd">（可变）</td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果将其设置为“ true”，则如果SAML令牌包含受众限制URI，则其中之一必须与AUDIENCE_RESTRICTIONS属性的值之一匹配。对于CXF 3.0.x中的SOAP服务，默认值为“ true”；对于2.7.x，默认值为“ false”。REST服务的默认值为“ false”。</p></td></tr></tbody></table></div><h4 id="SecurityConfiguration-Non-booleanSecurityConfigurationparameters">非布尔安全配置参数</h4><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.saml-role-属性名称</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>存储角色信息的SAML AttributeStatement的属性URI。默认值为“ <a shape="rect" class="external-link" href="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role" rel="nofollow">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</a> ”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.subject.cert.constraints</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>正则表达式的字符串（由“ security.cert.constraints.separator”指定的值分隔），将在与证书关联的证书链的信任验证之后，将应用于用于签名验证的证书的主题DN。当证书包含在密钥库（直接信任）中时，不使用这些约束。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.cert.constraints.separator <strong>CXF 3.3.3 / 3.2.10</strong></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于解析通过“ security.subject.cert.constraints”配置的证书约束的分隔符。默认情况下，它是一个逗号。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.audience-restrictions <strong>CXF 3.1.13</strong></td><td colspan="1" rowspan="1" class="confluenceTd"><p>逗号分隔的字符串，对应于受众限制URI的列表。此属性的默认值包含请求URL和服务QName。如果AUDIENCE_RESTRICTION_VALIDATION属性为“ true”，并且如果收到的SAML令牌包含受众限制URI，则其中之一必须与在此属性中指定的值之一匹配。</p></td></tr></tbody></table></div><h4 id="SecurityConfiguration-STSClientConfigurationtags">STS客户端配置标签</h4><p><strong>注意：</strong>从CXF 3.1.3开始。在CXF 3.1.3之前，这些标记具有“ ws-”前缀。由于向后兼容的原因，较早的标记仍将起作用。</p><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.client</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>对用于与STS通信的STSClient类的引用。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.app适用于</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>发送到STS的“ AppliesTo”地址。默认值为服务提供商的端点地址。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.token.usecert</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果为true，则在UseKey / KeyInfo中写出X509Certificate结构。如果为false（默认值），则改写一个KeyValue结构。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.token.do.cancel</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>成功调用后使用SecureConversation时是否取消令牌。默认值为“ false”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">更新后的安全性问题</td><td colspan="1" rowspan="1" class="confluenceTd"><p>无法续订已过期的令牌后是否退回到调用“问题”。默认值为“ true”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>端点的security.cache.issued.token.inpoint</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>将此属性设置为“ false”以不将每个代理对象的SecurityToken缓存在IssuedTokenInterceptorProvider中。如果正在从中介机构的STS检索令牌，则应这样做。默认值是true”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.disable-wsmex呼叫使用epr地址</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>当端点协定不包含WS-MetadataExchange信息时，是否避免STS客户端尝试使用STS EPR WSA地址发送WS-MetadataExchange调用。默认值为“ false”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.token.crypto</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于STS的加密对象。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#STS_TOKEN_CRYPTO">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.token.properties</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于STS的Crypto属性配置。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#STS_TOKEN_PROPERTIES">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.token.username</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>密钥库中的别名，用于获取用户的公共密钥，以发送给PublicKey KeyType案例的STS。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>security.sts.token.act-as</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>要在“ ActAs”字段中发送到STS的令牌。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#STS_TOKEN_ACT_AS">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>代表安全性令牌</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>要在“ OnBehalfOf”字段中发送给STS的令牌。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#STS_TOKEN_ON_BEHALF_OF">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">更新后的安全性问题</td><td colspan="1" rowspan="1" class="confluenceTd">如果令牌“续订”失败，是否调用“问题”。一些STS不支持续订绑定。默认为“ true”。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.sts.token.imminent-expiry-value</td><td colspan="1" rowspan="1" class="confluenceTd">客户端认为令牌已过期的秒数（即，如果令牌将在小于此标记指定的值的时间内过期），则视为令牌已过期。对于CXF 3.0.2+，默认值为“ 10”，对于CXF 2.7.13+，默认值为“ 0”。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">security.sts.token.cacher.impl <strong>CXF 3.1.11</strong></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果要为STS客户端插入自定义缓存行为，则为STSTokenCacher接口的实现。默认值为DefaultSTSTokenCacher。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">用于<strong>递归调用的</strong> security.sts.check.CXF <strong>3.3.3 / 3.2.10</strong></td><td colspan="1" rowspan="1" class="confluenceTd"><p>检查我们是否没有使用其自己的IssuedToken策略调用STS-在这种情况下，我们将以递归循环结束。在远程端点具有与STS相同的服务/端口QName的不太可能的情况下，此检查可能是一个问题，因此此配置标志允许在该情况下禁用此检查。默认值为“ true”。</p></td></tr></tbody></table></div><h2 id="SecurityConfiguration-Backwardscompatibility">向后兼容</h2><p>3.1.0之前的Apache CXF的用户不需要对其代码或spring文件进行任何调整。与上面的配置标签关联的较早的“ ws-”前缀将继续被接受。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=56066405">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=56066405&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>