<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - CXF 2.x JMS configuration (removed in CXF 3)">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-CXF 2.x JMS配置（在CXF 3中已删除）</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="transports.html">传输</a> > <a href="jms-transport.html">JMS传输</a> > <a href="cxf-2x-jms-configuration-removed-in-cxf-3.html">CXF 2.x JMS配置（在CXF 3中已删除）</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p>通过定义JMSConduit或JMSDestination，可以完成CXF中的标准JMS传输配置，如下所述。</p><h2 id="CXF2.xJMSconfiguration(removedinCXF3)-JMSNamespaces">JMS命名空间</h2><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-WSDLNamespace">WSDL命名空间</h3><p>在名称空间中定义了用于定义JMS端点的WSDL扩展<code><a shape="rect" href="http://cxf.apache.org/transports/jms">http://cxf.apache.org/transports/jms</a></code> 。为了使用JMS扩展，您需要将以下所示的名称空间定义添加到合同的definitions元素中。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS扩展命名空间</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">xmlns:jms="http://cxf.apache.org/transports/jms"
</pre>
</div></div><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-ConfigurationNamespaces">配置命名空间</h3><p>为了使用JMS配置属性，您需要将以下所示的行添加到<code>beans</code>您的配置元素。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS配置命名空间</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">xmlns:jms="http://cxf.apache.org/transports/jms"
</pre>
</div></div><h2 id="CXF2.xJMSconfiguration(removedinCXF3)-BasicEndpointConfiguration">基本端点配置</h2><p>JMS端点需要了解有关如何建立到正确目的地的连接的某些基本信息。可以在以下两个位置之一中提供此信息：WSDL或XML配置。所描述的以下配置元素可以在客户端管道和服务器端目标中使用。</p><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-UsingWSDL">使用WSDL</h3><p>JMS目的地信息是使用<code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>元素及其子元素<code>jms:JMSNamingProperties</code>元件。的<code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>元素的属性指定标识JMS代理和目的地所需的信息。的<code>jms:JMSNamingProperties</code>元素指定用于连接到JNDI服务的Java属性。</p><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Theaddresselement">地址元素</h4><p>JMS端点的基本配置是通过使用<code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>元素作为服务的子元素<code>port</code>元件。的<code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>元素使用下面描述的属性来配置与JMS代理的连接。</p><p><span class="confluence-anchor-link" id="CXF2.xJMSconfiguration(removedinCXF3)-addressTable"></span></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>destinationStyle</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定JMS目标是JMS队列还是JMS主题。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>jndiConnectionFactoryName</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定绑定到JMS连接工厂的JNDI名称，以在连接到JMS目标时使用。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>jndiDestinationName</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定绑定到向其发送请求的JMS目标的JNDI名称。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>jndiReplyDestinationName</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定绑定到发送答复的JMS目标的JNDI名称。此属性允许您将用户定义的目标用于答复。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>connectionUserName</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定连接到JMS代理时要使用的用户名。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>connectionPassword</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定连接到JMS代理时要使用的密码。</p></td></tr></tbody></table></div><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-TheJMSNamingPropertieselement">JMSNamingProperties元素</h4><p>为了提高与JMS和JNDI提供程序的互操作性， <code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>元素有一个子元素， <code>jms:JMSNamingProperties</code> ，它允许您指定用于填充连接到JNDI提供程序时使用的属性的值。的<code>jms:JMSNamingProperties</code>元素具有两个属性： <code>name</code>和<code>value</code> 。的<code>name</code>属性指定要设置的属性的名称。的<code>value</code>属性指定指定属性的值。的<code>jms:JMSNamingProperties</code>元素也可以用于指定提供者特定的属性。<br clear="none">以下是可以设置的常见JNDI属性的列表：</p><ol><li><code>java.naming.factory.initial</code></li><li><code>java.naming.provider.url</code></li><li><code>java.naming.factory.object</code></li><li><code>java.naming.factory.state</code></li><li><code>java.naming.factory.url.pkgs</code></li><li><code>java.naming.dns.url</code></li><li><code>java.naming.authoritative</code></li><li><code>java.naming.batchsize</code></li><li><code>java.naming.referral</code></li><li><code>java.naming.security.protocol</code></li><li><code>java.naming.security.authentication</code></li><li><code>java.naming.security.principal</code></li><li><code>java.naming.security.credentials</code></li><li><code>java.naming.language</code></li><li><code>java.naming.applet</code></li></ol><p>有关在这些属性中使用哪些信息的更多详细信息，请查看JNDI提供程序的文档并查阅Java API参考资料。</p><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Usinganamedreplydestination">使用命名回复目的地</h4><p>默认情况下，使用JMS的CXF端点创建一个临时队列，用于来回发送答复。您可以通过设置<code>jndiReplyDestinationName</code>端点合同中的属性。客户端端点将侦听对指定目标的答复，并且将在客户端中指定属性的值。 <code>ReplyTo</code>所有外发请求的字段。服务端点将使用<code>jndiReplyDestinationName</code>属性（如果在请求的请求中未指定目的地）作为放置回复的位置<code>ReplyTo</code>领域。</p><p>静态回复队列不能由服务客户端的多个实例共享。请改为为每个实例使用动态回复队列或不同的队列名称。</p><p>以下示例显示了JMS WSDL端口规范的示例。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS WSDL端口规范</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;service name="JMSService"&gt;
  &lt;port binding="tns:Greeter_SOAPBinding" name="SoapPort"&gt;
    &lt;jms:address jndiConnectionFactoryName="ConnectionFactory"
                 jndiDestinationName="dynamicQueues/test.cxf.jmstransport"&gt;
      &lt;jms:JMSNamingProperty name="java.naming.factory.initial"
                             value="org.apache.activemq.jndi.ActiveMQInitialContextFactory" /&gt;
      &lt;jms:JMSNamingProperty name="java.naming.provider.url"
                             value="tcp://localhost:61616" /&gt;
    &lt;/jms:address&gt;
  &lt;/port&gt;
&lt;/service&gt;
</pre>
</div></div><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-UsingConfiguration">使用配置</h3><p>除了使用WSDL文件为JMS端点指定连接信息之外，您还可以在端点的XML配置中提供它。配置文件中的信息将覆盖端点的WSDL文件中的信息。</p><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Configurationelements">配置元素</h4><p>您可以使用以下配置元素之一配置JMS端点：</p><ul><li><p><strong><a shape="rect" class="external-link" href="http://jmsconduit" rel="nofollow">jms：conduit</a></strong> ： <code><a shape="rect" class="external-link" href="http://jmsconduit" rel="nofollow">jms:conduit</a></code>元素包含使用者端点的配置。它有一个属性， <code>name</code> ，其值采用以下形式</p><div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>{WSDLNamespace}WSDLPortName.jms-conduit
</pre>
</div></div><p>。</p></li><li><p><strong><a shape="rect" class="external-link" href="http://jmsdestination" rel="nofollow">jms：destination</a></strong> ： <code><a shape="rect" class="external-link" href="http://jmsdestination" rel="nofollow">jms:destination</a></code>元素包含提供者端点的配置。它有一个属性， <code>name</code> ，其值的形式为</p><div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>{WSDLNamespace}WSDLPortName.jms-destination
</pre>
</div></div><p>。</p></li></ul><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Theaddresselement.1">的<code>address</code>元件</h4><p>通过添加一个JMS连接信息来指定<code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>子元素到基本配置元素。的<code><a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms:address</a></code>配置文件中使用的元素与WSDL文件中使用的元素相同。其属性列在<a shape="rect" href="cxf-2x-jms-configuration-removed-in-cxf-3.html">地址元素的属性表中</a> 。就像WSDL文件中的<a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms：address</a>元素一样， <a shape="rect" class="external-link" href="http://jmsaddress" rel="nofollow">jms：address</a>配置元素也有一个<code>jms:JMSNamingProperties</code>子元素，用于指定用于连接到JNDI提供程序的其他信息。</p><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Example">例</h4><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>地址信息配置文件</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ct="http://cxf.apache.org/configuration/types"
       xmlns:jms="http://cxf.apache.org/transports/jms"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://cxf.apache.org/jaxws
           http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/transports/jms
           http://cxf.apache.org/schemas/configuration/jms.xsd"&gt;
&lt;jms:conduit name="{http://cxf.apache.org/jms_endpt}HelloWorldJMSPort.jms-conduit"&gt;
  &lt;jms:address destinationStyle="queue"
               jndiConnectionFactoryName="myConnectionFactory"
               jndiDestinationName="myDestination"
               jndiReplyDestinationName="myReplyDestination"
               connectionUserName="testUser"
               connectionPassword="testPassword"&gt;
    &lt;jms:JMSNamingProperty name="java.naming.factory.initial"
         value="org.apache.cxf.transport.jms.MyInitialContextFactory"/&gt;
    &lt;jms:JMSNamingProperty name="java.naming.provider.url"
         value="tcp://localhost:61616"/&gt;
  &lt;/jms:address&gt;
&lt;/jms:conduit&gt;
&lt;/beans&gt;
</pre>
</div></div><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-ConsumerEndpointConfiguration">消费者终端配置</h3><p>JMS使用者端点指定其使用的消息类型。JMS使用者端点可以使用JMS <code>ObjectMessage</code>或JMS <code>TextMessage</code> 。当使用<code>ObjectMessage</code>消费者端点使用<code>byte[]</code>作为将数据存储到JMS消息正文中以及从中检索数据的方法。发送邮件后，邮件数据（包括所有格式信息）都打包到<code>byte[]</code>并先放置在JMS消息主体中，然后再放置在电线上。收到消息后，使用者端点将尝试解组存储在JMS正文中的数据，就像打包在一个JMS正文中一样。 <code>byte[]</code> 。</p><p>当使用<code>TextMessage</code> ，使用者端点使用字符串作为从JMS消息主体存储和检索数据的方法。发送消息时，消息信息（包括任何特定于格式的信息）将转换为字符串并放入JMS消息正文中。接收到消息时，使用者端点将尝试解压缩存储在JMS消息正文中的所有数据，就像打包成字符串一样。</p><p>当本机JMS应用程序与CXF使用者交互时，JMS应用程序负责解释消息和格式信息。例如，如果CXF合同指定用于JMS端点的绑定是SOAP，并且消息打包为<code>TextMessage</code> ，接收JMS应用程序将获得一条包含所有SOAP信封信息的文本消息。</p><p>可以通过XML配置和WSDL来配置使用者端点。</p><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-UsingConfiguration.1">使用配置</h3><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Specifyingthemessagetype">指定消息类型</h4><p>您可以使用以下命令指定使用者端点支持的消息类型： <code><a shape="rect" class="external-link" href="http://jmsruntimePolicy" rel="nofollow">jms:runtimePolicy</a></code>具有单个属性的元素：</p><ul><li><code>messageType</code> -指定如何将消息数据打包为JMS消息。 <code>text</code>指定将数据打包为<code>TextMessage</code> 。 <code>binary</code>指定将数据打包为<code>ObjectMessage</code> 。</li></ul><p>以下示例显示了用于配置JMS使用者端点的配置条目。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS使用者端点的配置</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ct="http://cxf.apache.org/configuration/types"
       xmlns:jms="http://cxf.apache.org/transports/jms"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans.xsd"
           http://cxf.apache.org/jaxws
           http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/transports/jms
           http://cxf.apache.org/schemas/configuration/jms.xsd"&gt;
...
&lt;jms:conduit name="{http://cxf.apache.org/jms_endpt}HelloWorldJMSPort.jms-conduit"&gt;
  &lt;jms:address ... &gt;
    ...
  &lt;/jms:address&gt;
  &lt;jms:runtimePolicy messageType="binary"/&gt;
...
&lt;/jms:conduit&gt;
...
&lt;/beans&gt;
</pre>
</div></div><p>的ID <code><a shape="rect" class="external-link" href="http://jmsconduit" rel="nofollow">jms:conduit</a></code>的形式为{ <code><em>WSDLNamespace</em>}<em>WSDLPortName</em>.jms-conduit</code> 。这将为CXF提供信息，以便它可以将配置与服务的端点关联。</p><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-UsingWSDL.1">使用WSDL</h3><p>JMS使用者端点接受的消息类型是使用可选的配置的<code><a shape="rect" class="external-link" href="http://jmsclient" rel="nofollow">jms:client</a></code>元件。的<code><a shape="rect" class="external-link" href="http://jmsclient" rel="nofollow">jms:client</a></code>元素是WSDL port元素的子元素，并具有一个属性：</p><ul><li><code>messageType</code> -指定如何将消息数据打包为JMS消息。 <code>text</code>指定将数据打包为<code>TextMessage</code> 。 <code>binary</code>指定将数据打包为ObjectMessage。</li></ul><h2 id="CXF2.xJMSconfiguration(removedinCXF3)-ServiceEndpointConfiguration">服务端点配置</h2><p>JMS服务端点具有许多可在合同中配置的行为。这些包括：</p><ul><li>消息如何关联</li><li>永久订阅的使用</li><li>如果服务使用本地JMS事务</li><li>端点使用的消息选择器</li></ul><p>可以通过以下两种方式之一配置服务端点：</p><ul><li>组态</li><li>WSDL</li></ul><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-UsingConfiguration.2">使用配置</h3><h4 id="CXF2.xJMSconfiguration(removedinCXF3)-Specifyingconfigurationdata">指定配置数据</h4><p>使用<code><a shape="rect" class="external-link" href="http://jmsdestination" rel="nofollow">jms:destination</a></code>元素，您可以配置服务的端点。您可以使用以下命令指定服务端点的行为<code><a shape="rect" class="external-link" href="http://jmsruntimePolicy" rel="nofollow">jms:runtimePolicy</a></code>具有以下属性的元素：</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>useMessageIDAsCorrealationID</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定JMS代理是否将使用消息ID来关联消息。默认是<code>false</code> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>durableSubscriberName</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定用于注册持久订阅的名称。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>messageSelector</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定要使用的消息选择器的字符串值。有关用于指定消息的语法的更多信息<br class="atl-forced-newline" clear="none">选择器，请参阅JMS 1.1规范。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>transactional</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定本地JMS代理是否将围绕消息处理创建事务。默认是<code>false</code> 。</p></td></tr></tbody></table></div><p>以下示例显示了用于配置JMS服务端点的CXF配置条目。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS服务端点的配置</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ct="http://cxf.apache.org/configuration/types"
       xmlns:jms="http://cxf.apache.org/transports/jms"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd"
           http://cxf.apache.org/jaxws
           http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/transports/jms
           http://cxf.apache.org/schemas/configuration/jms.xsd"&gt;
...
&lt;jms:destination name="{http://cxf.apache.org/jms_endpt}HelloWorldJMSPort.jms-destination"&gt;
  &lt;jms:address ... &gt;
    ...
  &lt;/jms:address&gt;
  ...
  &lt;jms:runtimePolicy messageSelector="cxf_message_selector"
       useMessageIDAsCorrelationID="true"
       transactional="true"
       durableSubscriberName="cxf_subscriber" /&gt;
  ...
&lt;/jms:destination&gt;
...
&lt;/beans&gt;
</pre>
</div></div><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-UsingWSDL.2">使用WSDL</h3><p>使用可选的配置服务端点行为<code><a shape="rect" class="external-link" href="http://jmsserver" rel="nofollow">jms:server</a></code>元件。的<code><a shape="rect" class="external-link" href="http://jmsserver" rel="nofollow">jms:server</a></code>元素是WSDL的子元素<code>port</code>元素，并具有以下属性：</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>useMessageIDAsCorrealationID</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定JMS是否将使用消息ID来关联消息。默认是<code>false</code> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>durableSubscriberName</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定用于注册持久订阅的名称。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>messageSelector</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定要使用的消息选择器的字符串值。有关用于指定消息的语法的更多信息<br class="atl-forced-newline" clear="none">选择器，请参阅JMS 1.1规范。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>transactional</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定本地JMS代理是否将围绕消息处理创建事务。默认是<code>false</code> 。当前，运行时不支持此功能。</p></td></tr></tbody></table></div><h2 id="CXF2.xJMSconfiguration(removedinCXF3)-JMSRuntimeConfiguration">JMS运行时配置</h2><p>除了配置JMS端点的外部可见方面之外，您还可以配置其内部运行时行为的各个方面。有三种类型的运行时配置：</p><ul><li>会话池配置（对于服务和使用者均通用）</li><li>消费者特定配置</li><li>服务特定的配置</li></ul><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-SessionPoolConfiguration">会话池配置</h3><p>您可以使用以下命令配置端点的JMS会话池<code><a shape="rect" class="external-link" href="http://jmssessionPoolConfig" rel="nofollow">jms:sessionPoolConfig</a></code>元件。此属性允许您为端点将保持池化的JMS会话数设置高低水位线。保证端点保持会话池等于低水位线，并且绝不池超过高水位线所指定的会话。<br clear="none">的<code><a shape="rect" class="external-link" href="http://jmssessionPool" rel="nofollow">jms:sessionPool</a></code>元素的属性（在下面列出）指定端点的JMS会话池的高水位线和低水位线。</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>lowWaterMark</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定端点池化的最小JMS会话数。默认值为20。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>highWaterMark</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定端点池化的最大JMS会话数。默认值为500。</p></td></tr></tbody></table></div><p>以下示例显示了为CXF JMS服务端点配置会话池的示例。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS会话池配置</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;jms:destination 
   name="{http://cxf.apache.org/jms_endpit}HelloWorldJMSPort.jms-destination"&gt;
...
  &lt;jms:sessionPool lowWaterMark="10" highWaterMark="5000" /&gt;
&lt;/jms:destination&gt;
</pre>
</div></div><p>的<code><a shape="rect" class="external-link" href="http://jmssessionPool" rel="nofollow">jms:sessionPool</a></code>元素也可以在<code><a shape="rect" class="external-link" href="http://jmsconduit" rel="nofollow">jms:conduit</a></code> 。</p><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-ConsumerSpecificRuntimeConfiguration">使用者特定的运行时配置</h3><p>JMS使用者配置允许您指定两个运行时行为：</p><ul><li>消费者将等待响应的毫秒数。</li><li>JMS代理可以删除请求之前存在的毫秒数。</li></ul><p>您使用<code><a shape="rect" class="external-link" href="http://jmsclientConfig" rel="nofollow">jms:clientConfig</a></code>设置JMS使用者运行时行为的元素。下表中列出的该元素的属性指定使用者运行时行为的配置值。</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>clientReceiveTimeout</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定端点在超时和发出异常之前等待响应的时间（以毫秒为单位）。默认值为2000。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>messageTimeToLive</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定在JMS代理可以删除请求之前，该请求可以保持未接收状态的时间（以毫秒为单位）。默认值是0，它指定永远不能删除该消息。</p></td></tr></tbody></table></div><p>以下示例显示了一个配置片段，该片段将使用者端点的请求生存期设置为500毫秒，并将其超时值设置为500毫秒。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS使用者端点运行时配置</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;jms:conduit name="{http://cxf.apache.org/jms_endpt}HelloWorldJMSPort.jms-conduit"&gt;
...
  &lt;jms:clientConfig clientReceiveTimeout="500"
                    messageTimeToLive="500" /&gt;
&lt;/jms:conduit&gt;
</pre>
</div></div><h3 id="CXF2.xJMSconfiguration(removedinCXF3)-ServiceSpecificRuntimeConfiguration">服务特定的运行时配置</h3><p>JMS服务配置允许您指定运行时行为：</p><ul><li>在JMS代理删除它之前，响应消息可以保持未被接收的时间。</li><li>创建和访问持久订阅时使用的客户端标识符。</li></ul><p>的<code><a shape="rect" class="external-link" href="http://jmsserverConfig" rel="nofollow">jms:serverConfig</a></code>元素用于指定服务运行时配置。下面列出的该元素的属性指定控制服务运行时行为的配置值。</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>messageTimeToLive</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定在允许JMS代理删除响应之前，响应可以保持未读状态的时间（以毫秒为单位）。默认值为0，它指定消息可以永远存在。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><code>durableSubscriptionClientId</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>指定端点用于创建和访问持久订阅的客户端标识符。</p></td></tr></tbody></table></div><p>以下示例显示了一个配置片段，该片段将服务端点的响应生存期设置为500毫秒，并将其持久订阅客户端标识符设置为<code>jms-test-id</code> 。</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>JMS服务端点运行时配置</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;jms:destination id="{http://cxf.apache.org/jms_endpt}HelloWorldJMSPort.jms-destination"&gt;
  &lt;jms:address ... &gt;
    ...
  &lt;/jms:address&gt;
  &lt;jms:serverConfig messageTimeToLive="500"
                    durableSubscriptionClientId="jms-test-id" /&gt;
&lt;/jms:destination&gt;
</pre>
</div></div></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=40508913">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=40508913&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>