<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Securing CXF Services">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-保护CXF服务</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="securing-cxf-services.html">保护CXF服务</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1567522564627 {padding: 0px;}
div.rbtoc1567522564627 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1567522564627 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1567522564627">
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-Securetransports">安全运输</a>
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-HTTPS">HTTPS</a></li></ul>
</li><li><a shape="rect" href="#SecuringCXFServices-SecuringJAX-WSservices">保护JAX-WS服务</a>
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-WS-Security">WS-安全性</a></li><li><a shape="rect" href="#SecuringCXFServices-WS-SecurityPolicy">WS-SecurityPolicy</a></li><li><a shape="rect" href="#SecuringCXFServices-WS-SecureConversation">WS-SecureConversation</a></li><li><a shape="rect" href="#SecuringCXFServices-WS-Trust,STS">WS-Trust，STS</a></li></ul>
</li><li><a shape="rect" href="#SecuringCXFServices-SecuringJAX-RSservices">保护JAX-RS服务</a>
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-JAX-RSXMLSecurity">JAX-RS XML安全性</a></li><li><a shape="rect" href="#SecuringCXFServices-JAX-RSSAML">JAX-RS SAML</a></li><li><a shape="rect" href="#SecuringCXFServices-JAX-RSJOSE">JAX-RS约瑟</a></li><li><a shape="rect" href="#SecuringCXFServices-HTTPSignature">HTTP签名</a></li></ul>
</li><li><a shape="rect" href="#SecuringCXFServices-SSO">单点登录</a>
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-SAMLWebSSO">SAML Web单点登录</a></li><li><a shape="rect" href="#SecuringCXFServices-WS-Federation">WS联合会</a></li></ul>
</li><li><a shape="rect" href="#SecuringCXFServices-OAuth">OAuth</a></li><li><a shape="rect" href="#SecuringCXFServices-Authentication">认证方式</a>
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-JAASLoginInterceptor">JAAS登录拦截器</a></li><li><a shape="rect" href="#SecuringCXFServices-Kerberos">的Kerberos</a></li></ul>
</li><li><a shape="rect" href="#SecuringCXFServices-Authorization">授权书</a></li><li><a shape="rect" href="#SecuringCXFServices-ControllingLargeRequestPayloads">控制大请求有效负载</a>
<ul class="toc-indentation"><li><a shape="rect" href="#SecuringCXFServices-XML">XML格式</a></li><li><a shape="rect" href="#SecuringCXFServices-XML-CXFversionspriorto2.7.4">XML-2.7.4之前的CXF版本</a></li><li><a shape="rect" href="#SecuringCXFServices-Multiparts">多部分</a></li></ul>
</li><li><a shape="rect" href="#SecuringCXFServices-Largedatastreamcaching">大数据流缓存</a></li></ul>
</div><h1 id="SecuringCXFServices-Securetransports">安全运输</h1><h2 id="SecuringCXFServices-HTTPS">HTTPS</h2><p>请参阅<a shape="rect" href="http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html">配置SSL支持</a>页面以获取更多信息。</p><h1 id="SecuringCXFServices-SecuringJAX-WSservices">保护JAX-WS服务</h1><h2 id="SecuringCXFServices-WS-Security">WS-安全性</h2><p>CXF通过Apache WSS4J项目支持WS-Security。WSS4J提供以下WS-Security标准的实现：</p><ul><li><a shape="rect" class="external-link" href="http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-SOAPMessageSecurity.pdf" rel="nofollow">SOAP邮件安全性1.1</a></li><li><a shape="rect" class="external-link" href="http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-UsernameTokenProfile.pdf" rel="nofollow">用户名令牌配置文件1.1</a></li><li><a shape="rect" class="external-link" href="http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-x509TokenProfile.pdf" rel="nofollow">X.509证书令牌配置文件1.1</a></li><li><a shape="rect" class="external-link" href="http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-SAMLTokenProfile.pdf" rel="nofollow">SAML令牌配置文件1.1</a></li><li><a shape="rect" class="external-link" href="http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-KerberosTokenProfile.pdf" rel="nofollow">Kerberos令牌配置文件1.1</a></li><li><a shape="rect" class="external-link" href="http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-SwAProfile.pdf" rel="nofollow">带有附件配置文件1.1的SOAP消息</a></li><li><a shape="rect" class="external-link" href="http://www.ws-i.org/Profiles/BasicSecurityProfile-1.1.html" rel="nofollow">基本安全配置文件1.1</a></li></ul><p>请参阅<a shape="rect" href="ws-security.html">WS-Security</a>页面以获取更多信息。</p><h2 id="SecuringCXFServices-WS-SecurityPolicy">WS-SecurityPolicy</h2><p>CXF完全支持WS-SecurityPolicy，它允许您使用WS-Policy批注为端点配置WS-Security要求。这是配置WS-Security的推荐方法。可以在WSDL中添加策略，也可以通过代码中的注释引用策略。</p><p>Apache CXF中的WS-SecurityPolicy层和XML-Security层共享CXF 3.1.0中的一组公共的安全配置标签。“ <a shape="rect" href="security-configuration.html">安全配置”</a>页面详细说明了这些标记和值。还有一些附加配置标记，仅在通过WS-SecurityPolicy配置安全性时才使用，请参阅<a shape="rect" href="ws-securitypolicy.html">下一页</a>以获取更多信息。</p><h2 id="SecuringCXFServices-WS-SecureConversation">WS-SecureConversation</h2><p>CXF完全支持WS-SecureConveration，有关更多信息，请参见<a shape="rect" href="ws-secureconversation.html">下一页</a> 。</p><h2 id="SecuringCXFServices-WS-Trust,STS">WS-Trust，STS</h2><p>CXF附带了一个高级SecurityTokenService（STS）实现，可用于发行（SAML）令牌进行身份验证。CXF还支持使用WS-Trust规范与STS进行通信。通过在客户端缓存令牌来支持SSO。请参阅<a shape="rect" href="ws-trust.html">WS-Trust</a>页面以获取更多信息。</p><h1 id="SecuringCXFServices-SecuringJAX-RSservices">保护JAX-RS服务</h1><h2 id="SecuringCXFServices-JAX-RSXMLSecurity">JAX-RS XML安全性</h2><p>使用XML签名和加密可以保护基于XML的JAX-RS请求（和响应）。有关更多信息，请参见<a shape="rect" href="jax-rs-xml-security.html">JAX-RS XML安全性</a>页面。</p><h2 id="SecuringCXFServices-JAX-RSSAML">JAX-RS SAML</h2><p>请参阅有关创建SAML断言并将其添加到JAX-RS请求中的<a shape="rect" href="jax-rs-saml.html">JAX-RS SAML</a>页面，以及如何在接收方进行验证。</p><h2 id="SecuringCXFServices-JAX-RSJOSE">JAX-RS约瑟</h2><p>有关对JWA，JWK，JWS，JWE和JWT规范的支持，请参见<a shape="rect" href="jax-rs-jose.html">JAX-RS JOSE</a>页面。</p><h2 id="SecuringCXFServices-HTTPSignature">HTTP签名</h2><p>有关HTTP签名规范的支持，请参见<a shape="rect" href="jax-rs-http-signature.html">JAX-RS HTTP签名</a>页面。</p><h1 id="SecuringCXFServices-SSO">单点登录</h1><h2 id="SecuringCXFServices-SAMLWebSSO">SAML Web单点登录</h2><p>请参阅<a shape="rect" class="external-link" href="http://coheigea.blogspot.ie/2012/06/saml-web-sso-profile-support-in-apache.html" rel="nofollow">此博客条目，</a>宣布支持SAML Web SSO配置文件和“ <a shape="rect" href="https://cwiki.apache.org/confluence/display/CXF20DOC/SAML+Web+SSO">SAML Web SSO”</a>页面，以获取更多信息。CXF在服务提供商端完全支持SAML Web SSO配置文件。但是，到目前为止，CXF中没有IdP。</p><h2 id="SecuringCXFServices-WS-Federation">WS联合会</h2><p>Apache CXF <a shape="rect" href="../fediz.html">Fediz</a>是CXF的子项目。 Fediz帮助您保护Web应用程序的安全，并将安全性实施委派给基础应用程序服务器。使用Fediz，身份验证从Web应用程序外部化为作为专用服务器组件安装的身份提供程序。支持的标准是<a shape="rect" class="external-link" rel="nofollow" href="http://docs.oasis-open.org/wsfed/federation/v1.2/os/ws-federation-1.2-spec-os.html#_Toc223175002">WS-Federation Passive Requestor Profile</a> 。Fediz支持<a shape="rect" class="external-link" href="http://en.wikipedia.org/wiki/Claims-based_identity" rel="nofollow">基于</a>角色的访问控制（RBAC）以外的基于声明的访问控制。</p><h1 id="SecuringCXFServices-OAuth">OAuth</h1><p>请检查<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html">OAuth2.0</a>和<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth.html">OAuth1.0</a>页面，以获取有关CXF中对OAuth 2.0和OAuth 1.0的支持的信息。</p><h1 id="SecuringCXFServices-Authentication">认证方式</h1><h2 id="SecuringCXFServices-JAASLoginInterceptor">JAAS登录拦截器</h2><p>容器或Spring Security托管身份验证以及自定义身份验证都是CXF开发人员使用的所有可行选项。</p><p>从CXF 2.3.2和2.4.0开始，可以使用org.apache.cxf.interceptor.security。JAASLoginInterceptor以便认证当前用户并填充CXF SecurityContext。</p><p>范例：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;jaxws:endpoint address="/soapService"&gt;
 &lt;jaxws:inInterceptors&gt;
   &lt;ref bean="authenticationInterceptor"/&gt;
 &lt;/jaxws:inInterceptors&gt;
&lt;/jaxws:endpoint&gt;

&lt;bean id="authenticationInterceptor" class="org.apache.cxf.interceptor.security.JAASLoginInterceptor"&gt;
   &lt;property name="contextName" value="jaasContext"/&gt;
   &lt;property name="roleClassifier" value="ROLE_"/&gt;

&lt;/bean&gt;
&lt;!--
  Similarly for JAX-RS endpoints.
  Note that org.apache.cxf.jaxrs.security.JAASAuthenticationFilter
  can be registered as jaxrs:provider instead
--&gt;
</pre>
</div></div><p>JAAS身份验证器配置有JAAS登录上下文的名称（通常在服务器知道的JAAS配置资源中指定的名称）。它还配置了一个可选的“ roleClassifier”属性，CXF SecurityContext需要使用该属性来区分用户主体和角色主体。默认情况下，CXF将假定角色主体由javax.security.acl表示。组实例。</p><p>在某些情况下，代表用户主体和角色的对象正在实现相同的标记接口，例如Principal。可以这样处理：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;bean id="authenticationInterceptor" class="org.apache.cxf.interceptor.security.JAASLoginInterceptor"&gt;
   &lt;property name="contextName" value="jaasContext"/&gt;
   &lt;property name="roleClassifier" value="RolePrincipal"/&gt;
   &lt;property name="roleClassifierType" value="classname"/&gt;
&lt;/bean&gt;
&lt;!-- Similarly for JAX-RS endpoints --&gt;
</pre>
</div></div><p>在这种情况下，JAASLoginInterceptor将知道角色由简单名称为RolePrincipal的类表示。请注意，还支持完整的类名。</p><h2 id="SecuringCXFServices-Kerberos">的Kerberos</h2><p>请参阅<a shape="rect" href="http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport%28includingSSLsupport%29-SpnegoAuthentication%28Kerberos%29">此页面</a>以获取有关Spnego / Kerberos HTTPConduit客户端支持的信息。</p><p>请检查以下有关CXF中WS-Security Kerberos支持的博客条目：</p><p><a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/10/using-kerberos-with-web-services-part-i.html" rel="nofollow">将Kerberos与Web服务一起使用-第1部分</a><br clear="none"><a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/10/using-kerberos-with-web-services-part.html" rel="nofollow">将Kerberos与Web服务结合使用-第2部分</a><br clear="none"><a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2012/02/ws-trust-spnego-support-in-apache-cxf.html" rel="nofollow">Apache CXF中的WS-Trust SPNego支持</a></p><p>请检查以下有关JAX-RS中Kerberos支持的<a shape="rect" href="jaxrs-kerberos.html">页面</a> 。</p><h1 id="SecuringCXFServices-Authorization">授权书</h1><p>容器或Spring Security托管授权以及自定义授权都是CXF开发人员使用的所有可行选项。</p><p>CXF 2.3.2和2.4.0引入了org.apache.cxf.interceptor.security。SimpleAuthorizingInterceptor和org.apache.cxf.interceptor.security。SecureAnnotationsInterceptor拦截器，可帮助执行授权规则。</p><p>范例：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;jaxws:endpoint id="endpoint1" address="/soapService1"&gt;
 &lt;jaxws:inInterceptors&gt;
   &lt;ref bean="authorizationInterceptor"/&gt;
 &lt;/jaxws:inInterceptors&gt;
&lt;/jaxws:endpoint&gt;

&lt;bean id="authorizationInterceptor" class="org.apache.cxf.interceptor.security.SimpleAuthorizingInterceptor"&gt;
   &lt;property name="methodRolesMap"&gt;
      &lt;map&gt;
        &lt;!-- no wildcard support, names need to match exactly --&gt;
        &lt;entry key="addNumbers" value="ROLE_USER ROLE_ADMIN"/&gt;
        &lt;entry key="divideNumbers" value="ROLE_ADMIN"/&gt;
      &lt;/map&gt;
   &lt;/property&gt;
   &lt;!-- its possible to define global roles that apply to all WSDL operations not listed above --&gt;
   &lt;property name="globalRoles" value="ROLE_ADMIN"/&gt;
&lt;/bean&gt;

&lt;jaxws:endpoint id="endpoint2" address="/soapService2" implementor="#secureBean"&gt;
 &lt;jaxws:inInterceptors&gt;
   &lt;ref bean="authorizationInterceptor2"/&gt;
 &lt;/jaxws:inInterceptors&gt;
&lt;/jaxws:endpoint&gt;

&lt;!-- This bean is annotated with secure annotations such as RolesAllowed --&gt;
&lt;bean id="secureBean" class="org.apache.cxf.tests.security.SecureService"/&gt;

&lt;bean id="authorizationInterceptor2" class="org.apache.cxf.interceptor.security.SecureAnnotationsInterceptor"&gt;
   &lt;property name="securedObject" ref="secureBean"/&gt;
&lt;/bean&gt;

</pre>
</div></div><h1 id="SecuringCXFServices-ControllingLargeRequestPayloads">控制大请求有效负载</h1><h2 id="SecuringCXFServices-XML">XML格式</h2><p>从CXF 2.7.4开始，CXF现在需要使用StAX解析器，该解析器可以对传入XML的大小提供精细的控制。当前唯一可用的解析器是Woodstox 4.2或更高版本。主要原因是有一系列的DOS攻击只能在StAX分析器级别上防止。可以将系统属性“ org.apache.cxf.stax.allowInsecureParser”设置为true，以允许使用不安全的解析器，但是不建议这样做，并且现在也允许本节中描述的设置。</p><p>CXF具有几种默认设置，可以防止恶意XML导致各种DOS故障。如果您知道传入的XML将超过这些限制，则可以覆盖默认值。这些设置可以设置为总线级别属性，端点级别属性，甚至可以根据每个请求通过拦截器进行设置。</p><div class="table-wrap"><table class="wrapped confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>设置</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>默认</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxChildElements</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>50000</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>给定父元素的最大子元素数</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxElementDepth</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>100</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>元素的最大深度</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxAttributeCount</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>500</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>单个元素上的最大属性数</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxAttributeSize</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>64K</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>单个属性的最大大小</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxTextLength</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>128M</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>元素的最大大小文本值</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxElementCount</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>长。MAX_VALUE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>XML文档中元素的最大总数</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.stax.maxXMLCharacters</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>长。MAX_VALUE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>解析器解析的最大字符总数</p></td></tr></tbody></table></div><h2 id="SecuringCXFServices-XML-CXFversionspriorto2.7.4">XML-2.7.4之前的CXF版本</h2><p>期望XML有效负载的端点可以注册并配置<a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/rt/core/src/main/java/org/apache/cxf/interceptor/security/DepthRestrictingStreamInterceptor.java">DepthRestrictingInterceptor</a>以便控制给定XML有效负载可能不超过的限制。这对于在各种情况下很有用，以防止可能导致拒绝服务情况或使服务速度大大降低的大量有效负载。</p><p>XML元素的完整数目，给定XML元素的直接子元素数目可以包含，并且有效载荷的堆栈深度可以受到限制，例如：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;bean id="depthInterceptor" class="org.apache.cxf.interceptor.security.DepthRestrictingStreamInterceptor"&gt;
  &lt;!-- Total number of elements in the XML payload --&gt;
  &lt;property name="elementCountThreshold" value="5000"/&gt;

  &lt;!-- Total number of child elements for XML elements --&gt;
  &lt;property name="innerElementCountThreshold" value="3000"/&gt;

  &lt;!-- Maximum stack depth of the XML payload --&gt;
  &lt;property name="innerElementLevelThreshold" value="20"/&gt;

&lt;/bean&gt;

&lt;jaxws:endpoint&gt;
  &lt;jaxws:inInterceptors&gt;
   &lt;ref bean="depthInterceptor"/&gt;
 &lt;/jaxws:inInterceptors&gt;
&lt;jaxws:endpoint&gt;

&lt;jaxrs:server&gt;
  &lt;jaxrs:inInterceptors&gt;
   &lt;ref bean="depthInterceptor"/&gt;
 &lt;/jaxrs:inInterceptors&gt;
&lt;jaxrs:server&gt;

</pre>
</div></div><p>当达到限制之一时，将返回错误。JAX-WS使用者将收到500个JAX-RS / HTTP使用者：413。</p><p>还可以为JAX-WS端点设置以下系统属性：“ org.apache.cxf.staxutils.innerElementCountThreshold”和“ org.apache.cxf.staxutils.innerElementLevelThreshold”。</p><p>请检查本<a shape="rect" href="https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Data+Bindings#JAX-RSDataBindings-ControllingLargeJAXBXMLandJSONinputpayloads">节</a>以获取有关如何配置基于JAX-RS JAXB的提供程序的附加信息。</p><h2 id="SecuringCXFServices-Multiparts">多部分</h2><p>通过以下每个端点上下文属性，可以控制与缓存大型附件相关联的各种属性：</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>物业名称</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>值</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>附件内存阈值</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>从内存切换到文件缓存的阈值（以字节为单位）。默认值为1024K。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>附件最大尺寸</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>数据大小（以字节为单位）以限制要缓存的最大数据大小。自CXF 3.0.16、3.1.14、3.2.1。</p><p>默认情况下未设置最大大小。达到限制后，将返回错误。JAX-WS使用者将收到500个JAX-RS / HTTP使用者：413。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>附件目录</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于存储临时文件的目录名称。默认情况下未指定任何内容。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>附件最大标头大小</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>MIME头的最大长度。默认值为300。也可以通过系统属性“ org.apache.cxf.attachment-max-header-size”设置此值。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">附件最大数量</td><td colspan="1" rowspan="1" class="confluenceTd"><strong>CXF 3.3.4 3.2.11</strong>消息中允许的最大附件数。默认值为50。</td></tr></tbody></table></div><p>如果未指定每个端点的上下文属性，则CXF将检查为下面列出的相应系统属性设置的任何值，以进行大型数据流缓存，并将其重新用于缓存附件。</p><h1 id="SecuringCXFServices-Largedatastreamcaching">大数据流缓存</h1><p>基于大型流的消息或数据将被缓存在一个临时文件中，该文件将写入系统的临时目录中。您可以通过显式设置以下属性来更改此行为以及缓存功能的其他属性。</p><p>要更改整个系统的默认行为，可以设置以下系统属性。</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>物业名称</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>值</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.io。CachedOutputStream。阈</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>从内存切换到文件缓存的阈值（以字节为单位）。对于CachedOutputStream，默认值为128K；对于CachedWriter，默认值为64K。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.io。CachedOutputStream。最大尺寸</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>数据大小（以字节为单位）以限制要缓存的最大数据大小。默认情况下未设置最大大小。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.io。CachedOutputStream。输出目录</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于存储临时文件的目录名称。默认情况下未指定任何内容。如果指定，该目录必须已经存在。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.io。CachedOutputStream。密码转换</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于加密缓存内容的密码转换名称。默认情况下未指定任何内容。</p></td></tr></tbody></table></div><p>要更改特定总线的默认行为，可以设置相应的bus.io。CachedOutputStream属性（例如bus.io。CachedOutputStream。org.apache.cxf.io的阈值。CachedOutputStream。阈）。</p><p>CXF 2.6.4和2.7.1提供了加密选项，它使用生成的密钥使用对称加密，并且可以用来保护缓存的内容免遭未经授权的访问。为了启用加密，可以将CipherTransformation属性设置为环境支持的适当流的名称或8位块密码转换（例如RC4，AES / CTR / NoPadding等）。但是，请注意，启用加密将导致处理时间增加，因此，仅在没有其他方法来保护缓存内容的特定使用情况下才建议这样做。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=24190972">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=24190972&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>