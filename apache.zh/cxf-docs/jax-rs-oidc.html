<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - JAX-RS OIDC">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-JAX-RS OIDC</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="restful-services.html">RESTful服务</a> > <a href="jax-rs.html">JAX-RS</a> > <a href="jax-rs-oauth2.html">JAX-RS OAuth2</a> > <a href="jax-rs-oidc.html">JAX-RS OIDC</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1573746975228 {padding: 0px;}
div.rbtoc1573746975228 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1573746975228 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1573746975228">
<ul class="toc-indentation"><li><a shape="rect" href="#JAX-RSOIDC-Introduction">介绍</a></li><li><a shape="rect" href="#JAX-RSOIDC-MavenDependencies">Maven依赖</a></li><li><a shape="rect" href="#JAX-RSOIDC-IdTokenandUserInfo">IdToken和UserInfo</a></li><li><a shape="rect" href="#JAX-RSOIDC-OIDCIDPsupport">OIDC IDP支持</a>
<ul class="toc-indentation"><li><a shape="rect" href="#JAX-RSOIDC-OIDCFlowServices">OIDC流程服务</a>
<ul class="toc-indentation"><li><a shape="rect" href="#JAX-RSOIDC-AuthorizationCodeFlow">授权码流程</a></li><li><a shape="rect" href="#JAX-RSOIDC-ImplicitFlow">隐式流</a></li><li><a shape="rect" href="#JAX-RSOIDC-HybridFlow">混合流</a></li></ul>
</li><li><a shape="rect" href="#JAX-RSOIDC-UserInfoEndpoint">UserInfo端点</a></li><li><a shape="rect" href="#JAX-RSOIDC-JWKKeysService">JWK钥匙服务</a></li><li><a shape="rect" href="#JAX-RSOIDC-OidcDynamicRegistrationService">OidcDynamicRegistrationService</a></li><li><a shape="rect" href="#JAX-RSOIDC-OidcConfigurationService">OidcConfigurationService</a></li></ul>
</li><li><a shape="rect" href="#JAX-RSOIDC-FedizOIDCIDP">Fediz OIDC IDP</a></li><li><a shape="rect" href="#JAX-RSOIDC-OIDCRPsupport">OIDC RP支持</a>
<ul class="toc-indentation"><li><a shape="rect" href="#JAX-RSOIDC-Demos">演示版</a></li></ul>
</li></ul>
</div><h1 id="JAX-RSOIDC-Introduction">介绍</h1><p><a shape="rect" class="external-link" href="http://openid.net/connect/" rel="nofollow">OpenId Connect</a> （OIDC）是基于OAuth2协议构建的标识层。</p><p>当需要用户认证时，客户端应用程序将启动<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">OIDC核心</a>流之一，并将该用户重定向到OIDC提供程序。身份验证后，用户将重定向到客户端，客户端应用程序接收<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#IDToken" rel="nofollow">IdToken</a> 。如果使用<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth" rel="nofollow">授权码流，</a>则作为后续<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#TokenResponse" rel="nofollow">代码的</a>一部分返回IdToken <a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#TokenResponse" rel="nofollow">以访问令牌交换</a> ，如果使用<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth" rel="nofollow">隐式流，</a>则<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#ImplicitAuthResponse" rel="nofollow">立即</a>返回IdToken。除了返回一个额外的IdToken参数外，它与OAuth2非常相似。</p><p>CXF附带了OIDC提供程序（IDP）和依赖方（RP）实用程序代码，以使开发人员可以轻松创建自己的自定义OIDC提供程序或将JAX-RS应用程序与知名的第三方OIDC IDP集成在一起。</p><p>此代码在很大程度上依赖于<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html">CXF OAuth2</a>和<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-jose.html">CXF JOSE</a>模块。</p><h1 id="JAX-RSOIDC-MavenDependencies">Maven依赖</h1><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>CXF OIDC模块</b></div><div class="codeContent panelContent pdl">
<pre class="brush: xml; gutter: false; theme: Default">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;
    &lt;artifactId&gt;cxf-rt-rs-security-sso-oidc&lt;/artifactId&gt;
    &lt;version&gt;3.1.7&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div></div><h1 id="JAX-RSOIDC-IdTokenandUserInfo">IdToken和UserInfo</h1><p><a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#IDToken" rel="nofollow">IdToken</a>是OIDC对OAuth2进行的主要扩展。它提供了描述经过身份验证的用户的声明的集合。IdToken是安全的<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-jose.html#JAX-RSJOSE-JSONWebToken">JWT令牌</a> ，由OIDC IDP进行<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-jose.html#JAX-RSJOSE-JWSSignature">JWS签名</a>和/或<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-jose.html#JAX-RSJOSE-JWEEncryption">JWE加密</a> 。</p><p>CXF提供<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/common/IdToken.java" rel="nofollow"><span class="pl-smi">org.apache.cxf.rs.security.oidc.common</span> 。IdToken</a> 。</p><p>填充它的一种方法是使用OidcAuthorizationCodeService或OidcImplicitService注册自定义<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/SubjectCreator.java" rel="nofollow">SubjectCreator</a> 。例如， <a shape="rect" href="https://cxf.apache.org/fediz-oidc.html">Fediz OIDC</a>使用<a shape="rect" class="external-link" href="https://github.com/apache/cxf-fediz/blob/master/services/oidc/src/main/java/org/apache/cxf/fediz/service/oidc/FedizSubjectCreator.java" rel="nofollow">以下SubjectCreator：</a>它访问由Fediz Authenticators准备的用户主体，并通过将已经可用的SAML令牌转换为IdToken来创建IdToken并将其设置在<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcUserSubject.java" rel="nofollow">OidcUserSubject上</a> 。在其他情况下，用户主体可能已经具有准备好的IdToken。</p><p>另一种方法是在持久保存代码授予或访问令牌时在<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html#JAX-RSOAuth2-WritingOAuthDataProvider">自定义OAuthDataProvider</a>中创建IdToken。在这种情况下，需要先填充IdToken，然后将其转换为JWS或JWE序列，并保存为授权或令牌的“ id_token”属性：如果它是代码流，则在授予授权时将其设置为授权属性。如果是隐式流，则持久化-在持久化令牌时将其设置为令牌属性。这种方法涉及更多，但是使用<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-jose.html">CXF JOSE</a>创建JWS或JWS IdToken表示很简单。</p><p>通常，IdToken的创建方式特定于容器/实现。创建IdToken是将CXF OIDC代码与第三方容器集成的主要要求。</p><p>最后， <a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenResponseFilter.java" rel="nofollow">IdTokenResponseFilter</a> （通过使用<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html#JAX-RSOAuth2-AccessTokenService">AccessTokenService</a>完成授权码流）或<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcImplicitService.java#L140" rel="nofollow">OidcImplicitService</a>可以要求<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenProvider.java" rel="nofollow">IdTokenProvider</a>它需要返回给客户端应用程序的那一刻创造IdToken。</p><p>IdToken可以提供足够的信息供客户端应用程序与当前用户一起使用。但是，客户端可以从OIDC <a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#UserInfo" rel="nofollow">UserInfo端点</a>获取有关用户的更多信息。</p><p>CXF提供<span class="pl-smi"> </span> <a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/common/UserInfo.java" rel="nofollow"><span class="pl-smi">org.apache.cxf.rs.security.oidc.common</span> 。用户信息。</a>可以在创建<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcUserSubject.java" rel="nofollow">IdToken</a>的同时在<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcUserSubject.java" rel="nofollow">OidcUserSubject</a>上创建和设置它，或者如下所述让CXF OIDCUserInfo服务创建它。</p><h1 id="JAX-RSOIDC-OIDCIDPsupport">OIDC IDP支持</h1><p>当前，CXF OIDC IDP代码提供JAX-RS服务，以支持OIDC <a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth" rel="nofollow">授权代码</a> ， <a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth" rel="nofollow">隐式</a>和<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#HybridFlowAuth" rel="nofollow">混合</a>流。这些服务支持<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#Authentication" rel="nofollow">所有OIDC响应类型</a> 。</p><p>还提供了用于支持<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#UserInfo" rel="nofollow">UserInfo请求</a>和返回IdToken <a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html#Signing" rel="nofollow">签名验证密钥</a>的服务。</p><h2 id="JAX-RSOIDC-OIDCFlowServices">OIDC流程服务</h2><h3 id="JAX-RSOIDC-AuthorizationCodeFlow">授权码流程</h3><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcAuthorizationCodeService.java" rel="nofollow">OidcAuthorizationCodeService</a>是一个简单的<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html#JAX-RSOAuth2-AuthorizationService">AuthorizationCodeGrantService</a>扩展，它强制执行OIDC特定的约束。</p><p>该服务发出代码授权，而<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html#JAX-RSOAuth2-AccessTokenService">AccessTokenService</a>返回Access和Id令牌。</p><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenResponseFilter.java" rel="nofollow">IdTokenResponseFilter</a> （由<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-oauth2.html#JAX-RSOAuth2-AccessTokenService">AccessTokenService使用</a> ）是将IdToken实际上添加到客户端响应的位置。</p><h3 id="JAX-RSOIDC-ImplicitFlow">隐式流</h3><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcImplicitService.java" rel="nofollow">OidcImplicitService</a>是一个简单的ImplicitGrantService扩展，它强制执行OIDC特定的约束并将IdToken添加到客户端响应。</p><h3 id="JAX-RSOIDC-HybridFlow">混合流</h3><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcHybridService.java" rel="nofollow">OidcHybridService</a>通过委派给<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcImplicitService.java" rel="nofollow">OidcImplicitService</a>和<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcAuthorizationCodeService.java" rel="nofollow">OidcAuthorizationCodeService</a>来支持混合流。</p><h2 id="JAX-RSOIDC-UserInfoEndpoint">UserInfo端点</h2><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/UserInfoService.java" rel="nofollow">UserInfoService</a>返回UserInfo。它首先检查<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenProvider.java" rel="nofollow">UserInfoProvider</a> ，然后检查<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcUserSubject.java" rel="nofollow">OidcUserSubject</a> ，最后默认将现有的IdToken转换为UserInfo。</p><p>注意<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/UserInfoService.java" rel="nofollow">UserInfoService</a>由客户端访问，该客户端使用在用户身份验证过程中颁发给它的访问令牌。</p><h2 id="JAX-RSOIDC-JWKKeysService">JWK钥匙服务</h2><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcKeysService.java" rel="nofollow">OidcKeysService</a>返回包含公共验证JWK密钥的JWK密钥集。默认情况下，仅返回公共密钥，但是也可以将服务配置为JWK密钥以包括相应的X509证书链。如果IdToken由私有RSA或EC密钥签名，则客户端可以获取验证密钥而不必将其导入本地密钥存储中，请使用此服务。通过通过“ rs.security.keystore.alias”指定密钥的ID并指定密钥库的类型（“ rs.security.keystore.type”），OidcKeysService还可以返回存储在JWK密钥文件中的公共密钥。作为“ jwk”。</p><h2 id="JAX-RSOIDC-OidcDynamicRegistrationService">OidcDynamicRegistrationService</h2><p>此服务从CXF 3.1.8开始可用。它也支持<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-registration-1_0.html" rel="nofollow">OIDC特定属性</a>的动态客户端<a shape="rect" class="external-link" href="https://tools.ietf.org/html/rfc7591" rel="nofollow">注册</a>和<a shape="rect" class="external-link" href="https://tools.ietf.org/html/rfc7592" rel="nofollow">管理</a> 。目前，一些高级注册属性尚未处理，并已链接到核心OIDC服务的运行方式，但该服务将根据需要进行增强。</p><h2 id="JAX-RSOIDC-OidcConfigurationService">OidcConfigurationService</h2><p>此服务从CXF 3.1.8开始可用。它支持“ .well-known / openid-configuration”中的OIDC <a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig" rel="nofollow">服务器配置</a>查询。</p><h1 id="JAX-RSOIDC-FedizOIDCIDP">Fediz OIDC IDP</h1><p><a shape="rect" href="https://cxf.apache.org/fediz-oidc.html">Fediz OIDC</a>项目在CXF OIDC IDP代码和Fediz身份验证系统之间提供了参考集成。它以最少的代码和配置支持<a shape="rect" class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">OIDC核心</a> 。</p><p>如上所述，它在自定义<a shape="rect" class="external-link" href="https://github.com/apache/cxf-fediz/blob/master/services/oidc/src/main/java/org/apache/cxf/fediz/service/oidc/FedizSubjectCreator.java" rel="nofollow">SubjectCreator中</a>创建IdToken。当前，它取决于CXF Ehcache <a shape="rect" class="external-link" href="https://github.com/apache/cxf-fediz/blob/master/services/oidc/src/main/webapp/WEB-INF/data-manager.xml#L47" rel="nofollow">OAuthDataProvider</a> OOB，因此不需要自定义持久性代码。除此之外，它还提供了管理客户注册的支持。<a shape="rect" class="external-link" href="https://github.com/apache/cxf-fediz/blob/master/services/oidc/src/main/webapp/WEB-INF/applicationContext.xml" rel="nofollow">它将</a> OIDC服务<a shape="rect" class="external-link" href="https://github.com/apache/cxf-fediz/blob/master/services/oidc/src/main/webapp/WEB-INF/applicationContext.xml" rel="nofollow">注册</a>为JAX-RS端点。</p><p>尽管某些实现细节可能会发生变化（例如，可能会引入替代数据提供者，等等），但是在大多数情况下，它表明创建IdToken是使容器与CXF OIDC代码集成的真正所需。</p><h1 id="JAX-RSOIDC-OIDCRPsupport">OIDC RP支持</h1><p>客户端应用程序需要OIDC RP客户端支持，才能将用户重定向到OIDC IDP，获取并验证IdToken，可选地获取UserInfo，并使客户端应用程序代码可轻松访问IdToken和UserInfo。</p><h2 id="JAX-RSOIDC-Demos">演示版</h2><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/big_query" rel="nofollow">BigQuery</a> <a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/big_query/src/main/java/demo/jaxrs/server/BigQueryService.java" rel="nofollow">演示服务</a>是OAuth2客户端，它依赖于CXF OIDC RP代码来支持与用户的交互，将用户重定向到Google以进行身份验证，以及验证从Google AccessTokenService返回的IdToken和新的访问令牌（OIDC授权代码流）。演示服务使用IdToken正确寻址用户，并使用访问令牌访问用户授权的用户资源。</p><p>例如，上下文被<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/big_query/src/main/java/demo/jaxrs/server/BigQueryService.java#L51" rel="nofollow">注入</a>并用于获取<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/big_query/src/main/java/demo/jaxrs/server/BigQueryService.java#L68" rel="nofollow">访问令牌</a>和<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/big_query/src/main/java/demo/jaxrs/server/BigQueryService.java#L75" rel="nofollow">用户信息</a> 。请参阅带有有关如何配置RP筛选器的注释<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/big_query/src/main/webapp/WEB-INF/applicationContext.xml#L70" rel="nofollow">的上下文</a> 。</p><p><a shape="rect" class="external-link" href="https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/basic_oidc" rel="nofollow">BasicOidc</a> <a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/distribution/src/main/release/samples/jax_rs/basic_oidc/src/main/java/demo/jaxrs/server/IdTokenService.java" rel="nofollow">演示服务</a>不是OAuth2客户端，而是基本的JAX-RS服务器。此服务器与HTTP浏览器客户端一起使用，该客户端使用Google脚本库从Google OIDC授权端点（OIDC隐式流）获取IdToken。该浏览器客户端与CXF OIDC RP代码进行交互，以验证IdToken，然后将此令牌发布到演示服务。演示服务取决于CXF OIDC RP，以便在其代码中轻松访问此IdToken</p><p><br clear="none"></p><p><br clear="none"></p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=63407087">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=63407087&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>