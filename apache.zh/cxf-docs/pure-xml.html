<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Pure XML">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-纯XML</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="wsdl-bindings.html">WSDL绑定</a> > <a href="pure-xml.html">纯XML</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h2 id="PureXML-XMLBindingNamespace">XML绑定命名空间</h2>

<p>用于描述XML格式绑定的扩展名在名称空间<a shape="rect" href="http://cxf.apache.org/bindings/xformat">http://cxf.apache.org/bindings/xformat</a>中定义。 CXF工具使用前缀<code>xformat</code>表示XML绑定扩展。将以下行添加到您的合同中：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
xmlns:xformat="http://cxf.apache.org/bindings/xformat"
</pre>
</div></div>

<h2 id="PureXML-Editing">编辑中</h2>

<p>要将接口映射为纯XML有效负载格式，请执行以下操作：</p>
<ol><li>添加名称空间声明以包括定义XML绑定的扩展。</li><li>添加标准的WSDL <code>binding</code>合同中包含XML绑定的元素，为绑定赋予唯一的名称，并指定WSDL的名称<code>portType</code>表示要绑定的接口的元素。</li><li>添加一个<code>xformat:binding</code>子元素<code>binding</code>元素，用于标识将消息作为纯XML文档处理而没有SOAP信封。</li><li>（可选）设置<code>xformat:binding</code>元素的<code>rootNode</code>属性赋予有效的QName。</li><li>对于绑定接口中定义的每个操作，添加一个标准WSDL <code>operation</code>元素，用于保存操作消息的绑定信息。</li><li>对于添加到绑定的每个操作，请添加<code>input</code> ， <code>output</code>和<code>fault</code>子元素代表操作使用的消息。这些元素对应于逻辑操作的接口定义中定义的消息。</li><li>（可选）添加一个<code>xformat:body</code>具有有效元素<code>rootNode</code>属性添加到<code>input</code> ， <code>output</code>和<code>fault</code>覆盖值的元素<code>rootNode</code>在绑定级别设置。
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>如果您的任何消息没有任何部分，例如返回空值的操作的输出消息，则必须设置<code>rootNode</code>消息的属性，以确保在线上写入的消息是有效但为空的XML文档。</p></div></div></li></ol>


<h2 id="PureXML-XMLMessagesontheWire">线上的XML讯息</h2>

<p>当您指定将接口消息作为XML文档而不带SOAP信封传递时，您必须注意确保消息在网络上写入时形成有效的XML文档。您还需要确保接收XML文档的非CXF参与者理解CXF生成的消息。</p>

<p>解决这两个问题的简单方法是使用可选<code>rootNode</code>全局属性<code>xformat:binding</code>元素或个别邮件的<code>xformat:body</code>元素。的<code>rootNode</code>属性为作为CXF生成的XML文档的根节点的元素指定QName。当。。。的时候<code>rootNode</code>未设置属性，CXF在使用doc样式消息时将消息部分的根元素用作根元素，在使用rpc样式消息时将消息部分名称的元素用作根元素。</p>

<p>例如，如果<code>rootNode</code>未设置属性，下面定义的消息将生成带有根元素的XML文档<code>lineNumber</code> 。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;type ...&gt;
  ...
  &lt;element name="operatorID" type="xsd:int"/&gt;
  ...
&lt;/types&gt;
&lt;message name="operator"&gt;
  &lt;part name="lineNumber" element="ns1:operatorID"/&gt;
&lt;/message&gt;
</pre>
</div></div>

<p>对于只有一部分的邮件，即使CXF会始终生成有效的XML文档， <code>rootNode</code>未设置属性。但是，以下消息将生成无效的XML文档。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;types&gt;
  ...
  &lt;element name="pairName" type="xsd:string"/&gt;
  &lt;element name="entryNum" type="xsd:int"/&gt;
  ...
&lt;/types&gt;

&lt;message name="matildas"&gt;
  &lt;part name="dancing" element="ns1:pairName"/&gt;
  &lt;part name="number" element="ns1:entryNum"/&gt;
&lt;/message&gt;
</pre>
</div></div>

<p>没有<code>rootNode</code>如果在XML绑定中指定了XML属性，则CXF会为上面定义的消息生成与下面类似的XML文档。生成的XML文档无效，因为它具有两个根元素： <code>pairName</code>和<code>entryNum</code> 。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;pairName&gt;
  Fred&amp;Linda
&lt;/pairName&gt;
&lt;entryNum&gt;
  123
&lt;/entryNum&gt;
</pre>
</div></div>

<p>如果您设定<code>rootNode</code>属性，如下所示，CXF会将元素包装在指定的根元素中。在此示例中， <code>rootNode</code>为整个绑定定义了attribute属性，并指定将根元素命名为entrants。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;portType name="danceParty"&gt;
  &lt;operation name="register"&gt;
    &lt;input message="tns:matildas" name="contestant"/&gt;
  &lt;/operation&gt;
&lt;/portType&gt;

&lt;binding name="matildaXMLBinding" type="tns:dancingMatildas"&gt;
  &lt;xmlformat:binding rootNode="entrants"/&gt;
  &lt;operation name="register"&gt;
    &lt;input name="contestant"/&gt;
    &lt;output name="entered"/&gt;
&lt;/binding&gt;
</pre>
</div></div>

<p>根据输入消息生成的XML文档将类似于以下所示。注意，XML文档现在只有一个根元素。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;entrants&gt;
  &lt;pairName&gt;
    Fred&amp;Linda
  &lt;entryNum&gt;
    123
  &lt;/entryNum&gt;
&lt;/entrants&gt;
</pre>
</div></div>

<h2 id="PureXML-OverridingtheBinding'srootNodeAttributeSetting">重写绑定的<code>rootNode</code>属性设定</h2>

<p>您还可以设置<code>rootNode</code>每个邮件的属性，或通过使用来覆盖特定邮件的全局设置<code>xformat:body</code>消息绑定内的元素。例如，如果您希望输出消息的根元素与输入消息的根元素不同，则可以覆盖绑定的根元素，如下所示。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;binding name="matildaXMLBinding" type="tns:dancingMatildas"&gt;
  &lt;xmlformat:binding rootNode="entrants"/&gt;
  &lt;operation name="register"&gt;
    &lt;input name="contestant"/&gt;
    &lt;output name="entered"&gt;
      &lt;xformat:body rootNode="entryStatus"/&gt;
    &lt;/output&gt;
  &lt;/operation&gt;
&lt;/binding&gt;
</pre>
</div></div></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=56199">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=56199&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>