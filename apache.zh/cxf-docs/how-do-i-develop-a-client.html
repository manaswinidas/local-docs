<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - How do I develop a client?">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-如何开发客户端？</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="overview.html">概述</a> > <a href="how-do-i-develop-a-client.html">如何开发客户端？</a>
                <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p><br clear="none">CXF为您提供了许多选择来为您的服务构建客户端。本指南旨在为您提供这些选项的快速概述，并帮助您快速使用CXF调整方向。</p>
<style type="text/css">/*<![CDATA[*/
div.rbtoc1524513366616 {padding: 0px;}
div.rbtoc1524513366616 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1524513366616 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1524513366616">
<ul class="toc-indentation"><li><a shape="rect" href="#HowdoIdevelopaclient?-BuildingClients">建立客户</a>
<ul class="toc-indentation"><li><a shape="rect" href="#HowdoIdevelopaclient?-WSDL2JavageneratedClient">WSDL2Java生成的客户端</a></li><li><a shape="rect" href="#HowdoIdevelopaclient?-JAX-WSProxy">JAX-WS代理</a></li><li><a shape="rect" href="#HowdoIdevelopaclient?-JAX-WSDispatchAPIs">JAX-WS调度API</a></li><li><a shape="rect" href="#HowdoIdevelopaclient?-SimpleFrontendClientProxy">简单的前端客户端代理</a></li><li><a shape="rect" href="#HowdoIdevelopaclient?-DynamicClient">动态客户端</a></li></ul>
</li></ul>
</div>

<h1 id="HowdoIdevelopaclient?-BuildingClients">建立客户</h1>


<h2 id="HowdoIdevelopaclient?-WSDL2JavageneratedClient">WSDL2Java生成的客户端</h2>

<p>最常见的情况之一是，您拥有可以管理或不可以管理的服务，并且该服务具有WSDL。在这种情况下，您通常需要从WSDL生成客户端。这为您提供了与服务进行交互的强类型接口。生成客户端后，其典型用法如下所示：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
HelloService service = new HelloService();
Hello client = service.getHelloHttpPort();

String result = client.sayHi("Joe");
</pre>
</div></div>

<p>WSDL2Java工具将从您的WSDL生成JAX-WS客户端。您可以通过以下三种方式之一运行WSDL2java：</p>
<ul><li><a shape="rect" href="wsdl-to-java.html">命令行</a></li><li><a shape="rect" href="using-cxf-with-maven.html">Maven插件</a></li><li>使用WSDL2Java API</li></ul>


<p>有关更多详细信息，请阅读“ <a shape="rect" href="developing-a-consumer.html">开发JAX-WS使用者”</a>或查看发行版中的Hello World演示。</p>

<h2 id="HowdoIdevelopaclient?-JAX-WSProxy">JAX-WS代理</h2>

<p>您可以使用Service.create来创建Service实例，而不是直接使用wsdl2java生成的存根客户端，以下代码说明了此过程：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import java.net.URL;
import javax.xml.ws.Service;
...

URL wsdlURL = new URL("http://localhost/hello?wsdl");
QName SERVICE_NAME = new QName("http://apache.org/hello_world_soap_http", "SOAPService");
Service service = Service.create(wsdlURL, SERVICE_NAME);
Greeter client = service.getPort(Greeter.class);
String result = client.greetMe("test");
</pre>
</div></div>

<h2 id="HowdoIdevelopaclient?-JAX-WSDispatchAPIs">JAX-WS调度API</h2>

<p>JAX-WS提供了“调度”机制，该机制使动态调用尚未为其生成客户端的服务变得容易。使用Dispatch机制，您可以创建消息（可以是JAXB对象，Source对象或SAAJMessage）并将其分发到服务器。一个简单的示例可能如下所示：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import java.net.URL;
import javax.xml.transform.Source;
import javax.xml.ws.Dispatch;
import javax.xml.ws.Service;
...

URL wsdlURL = new URL("http://localhost/hello?wsdl");
Service service = Service.create(wsdlURL, new QName("HelloService"));
Dispatch&lt;Source&gt; disp = service.createDispatch(new QName("HelloPort"), Source.class, Service.Mode.PAYLOAD);

Source request = new StreamSource("&lt;hello/&gt;")
Source response = disp.invoke(request);
</pre>
</div></div>

<p>注意：您也可以使用没有WSDL的调度。</p>

<p>有关更多详细信息，请参阅发行版中的Hello World演示。</p>


<h2 id="HowdoIdevelopaclient?-SimpleFrontendClientProxy">简单的前端客户端代理</h2>

<p>如果您使用简单的前端开发了服务，则可以使用ClientProxyFactoryBean API为您的服务创建Java代理客户端。这样，您可以使用服务界面与您的服务进行通话。有关更多信息，请参见<a shape="rect" href="simple-frontend.html">Simple Frontend</a>文档。</p>

<h2 id="HowdoIdevelopaclient?-DynamicClient">动态客户端</h2>

<p>CXF包括一个Client接口，该接口允许您调用操作并传递这些操作的参数。例如：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
Client client = ....;
Object[] result = client.invoke("sayHi", "Dan");
</pre>
</div></div>
<p>有两种在运行时创建客户端的方法。首选是使用ClientFactoryBean或JaxWsClientFactoryBean类。这些将为服务的SEI创建代理对象。这些代理无法处理复杂的对象。</p>

<p>第二个使用DynamicClientFactory或其子类之一。DynamicClientFactory是为WSDL中描述的复杂对象生成和编译JAXB POJO的附加步骤，以便在运行时通过反射使用。</p>

<p>当您将动态语言（例如Groovy与CXF一起使用）时，这非常有用，但是可以直接从Java使用反射。</p>

<p>详细信息： <a shape="rect" href="dynamic-clients.html">动态客户端</a></p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=59871">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=59871&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>