<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Aegis Databinding (2.0.x)">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script src='/resources/highlighter/scripts/shBrushBash.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-Aegis数据绑定（2.0.x）</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> >数据<a href="databindings.html">绑定</a> > <a href="aegis-databinding-20x.html">Aegis数据绑定（2.0.x）</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p>对于CXF最高为2.0.x</p>
<h1 id="AegisDatabinding(2.0.x)-WhyAegis?">为什么选择宙斯盾？</h1>
<p>Aegis是一种基于StAX的快速数据绑定，可以使开发代码优先服务尽可能简单。它能够处理大多数类并为其创建智能模式。</p>

<p>功能包括：</p>
<ul class="alternate"><li>无需注释即可公开类</li><li>支持接口</li><li>支持包括地图在内的收藏</li><li>支持多种数据类型</li></ul>


<h1 id="AegisDatabinding(2.0.x)-CXF2.1Documentation">CXF 2.1文档</h1>

<p>CXF 2.1中的“宙斯盾”有一些重大更改。参见<a shape="rect" href="aegis-21.html">宙斯盾（2.1）</a> 。</p>

<h1 id="AegisDatabinding(2.0.x)-DetailsonHowItWorks">工作原理的详细信息</h1>

<p><a shape="rect" href="aegis-theory-of-operation-20x.html">此页面</a>正在进行中，它解释了Aegis的一些模块化。您可能会发现它对了解Aegis的行为和开发定制很有帮助。</p>

<h1 id="AegisDatabinding(2.0.x)-UsingAegis">使用宙斯盾</h1>
<p>大多数使用“宙斯盾”的人都使用“ <a shape="rect" href="simple-frontend.html">简单前端”</a> 。如果使用的是Aegis，则不能在不修改所有代码以使其可与JAXB或其他绑定一起使用的情况下，将代码移至其他Web服务框架，因此，使用JAX-WS前端没有太多优势。您可能想将Aegis与某些专业前端一起使用，例如JAX-RS。我们在本文档中没有此类示例。</p>

<h2 id="AegisDatabinding(2.0.x)-SpringConfiguration">弹簧配置</h2>

<p>大多数使用“宙斯盾”的人都使用“简单”前端。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;simple:server id="pojoservice" serviceClass="demo.hw.server.HelloWorld" address="/hello_world"&gt;
  &lt;simple:serviceBean&gt;
    &lt;bean class="demo.hw.server.HelloWorldImpl" /&gt;
  &lt;/simple:serviceBean&gt;
  &lt;simple:dataBinding&gt;
    &lt;bean class="org.apache.cxf.aegis.databinding.AegisDatabinding" /&gt;
  &lt;/simple:dataBinding&gt;
  &lt;!-- Use this property only for XFire compatibility -- this version for 2.0.x ...
  &lt;property name="serviceConfigurations"&gt;
    &lt;list&gt;
      &lt;bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/&gt;
      &lt;bean class="org.apache.cxf.aegis.databinding.AegisServiceConfiguration"/&gt;
      &lt;bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/&gt; 
    &lt;/list&gt;
  &lt;/property&gt;
  --&gt;
&lt;/simple:server&gt;
</pre>
</div></div>

<p>您也可以将Aegis与JAX-WS一起使用。这是一个Spring配置示例。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;bean id="aegisBean" class="org.apache.cxf.aegis.databinding.AegisDatabinding" scope="prototype"/&gt; 
&lt;bean id="jaxws-and-aegis-service-factory"
  class="org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean"
  scope="prototype"&gt; 
  &lt;property name="dataBinding" ref="aegisBean"/&gt;
  &lt;!-- Use this property only for XFire compatibility -- this version for 2.0.x ...
  &lt;property name="serviceConfigurations"&gt;
    &lt;list&gt;
      &lt;bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/&gt;
      &lt;bean class="org.apache.cxf.aegis.databinding.AegisServiceConfiguration"/&gt;
      &lt;bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/&gt; 
    &lt;/list&gt;
  &lt;/property&gt;
  --&gt;
  &lt;!-- Use this property only for XFire compatibility -- this version for 2.1
  &lt;property name="serviceConfigurations"&gt;
    &lt;list&gt;
      &lt;bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/&gt;
      &lt;bean class="org.apache.cxf.aegis.databinding.XFireCompatibilityServiceConfiguration"/&gt;
      &lt;bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/&gt; 
    &lt;/list&gt;
  &lt;/property&gt;
  --&gt;
&lt;/bean&gt;

&lt;jaxws:endpoint id="my_service_endpoint" implementor="#my-service" address="/MyIndex"&gt;
  &lt;jaxws:serviceFactory&gt;
    &lt;ref bean='jaxws-and-aegis-service-factory' /&gt;
  &lt;/jaxws:serviceFactory&gt;
&lt;/jaxws:endpoint&gt;
</pre>
</div></div>

<h2 id="AegisDatabinding(2.0.x)-Javaconfiguration">Java配置</h2>

<p>这是使用简单前端的Java配置。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import org.apache.cxf.aegis.databinding.AegisDatabinding;
import org.apache.cxf.frontend.ServerFactoryBean;

ServerFactoryBean sf = new ServerFactoryBean();
sf.setServiceClass(serviceClass);
sf.setAddress("http://myhost/service");
sf.getServiceFactory().setDataBinding(new AegisDatabinding());
sf.create();
</pre>
</div></div>

<p>同样，这是使用简单前端的客户端。注意WSDL的使用。没有WSDL，简单的前端将尝试学习<br clear="none">Java反射的参数名称。与往常一样，Java接口不携带参数名称，这会导致诸如“ arg0”，“ arg1”等名称与服务不匹配。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import org.apache.cxf.aegis.databinding.AegisDatabinding;
import org.apache.cxf.frontend.ClientProxyFactoryBean;

ClientProxyFactoryBean factory = new ClientProxyFactoryBean();
factory.setServiceClass(serviceInterfaceClassObject);
factory.setAddress("http://myhost/service");
factory.setWsdlLocation("http://myhost/service?wsdl");
factory.getServiceFactory().setDataBinding(new AegisDatabinding());
MyService client = (MyService) factory.create();
</pre>
</div></div>

<h2 id="AegisDatabinding(2.0.x)-XFireCompatibility">XFire兼容性</h2>

<p>XFire具有/具有从Java包名称生成名称空间URI值的约定。它添加了一个附加的“ /”字符。<br clear="none">如果需要与XFire进行互操作，则需要启用与此行为的兼容性。您可以通过添加启用此兼容性<br clear="none">服务配置的另一个服务配置类：XFireCompatibilityServiceConfiguration（在2.0.x中为AegisServiceConfiguration）。<br clear="none">上面的spring示例在注释中显示了必要的配置。对于Java的客户端，您需要将服务配置添加到服务工厂，如下所示：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import org.apache.cxf.aegis.databinding.AegisServiceConfiguration;
// for 2.0.x
sf.getServiceFactory().getServiceConfigurations().add(0, new AegisServiceConfiguration());
// for 2.1
sf.getServiceFactory().getServiceConfigurations().add(0, new XFireCompatibilityServiceConfiguration());

</pre>
</div></div>
<p>这将更改CXF默认生成的名称空间，以使它们与XFire生成的名称空间相同。</p>


<h1 id="AegisDatabinding(2.0.x)-Class<->XMLMappingOverview">类<-> XML映射概述</h1>

<p>Aegis具有灵活的映射系统，因此您可以控制如何控制bean。默认情况下，您的POJO会根据其名称和名称空间进行序列化。如果您在“ org.codehaus.xfire”包中有一个名为“ Employee”的类，则它将在名称空间“ http://xfire.codehaus.org”中以本地名称“ Employee”进行序列化</p>

<p>例如，java类：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
public class Employee
{
  private String name;
  private String title;

  public String getName() { return name; }
  public void setName(String name) { this.name = name; }

  public String getTitle() { return title; }
  public void setTitle(String title) { this.title = title; }
}
</pre>
</div></div>
<p>在XML中，它转换为：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;Employee xmlns="http://xfire.codehaus.org"&gt;
  &lt;name&gt;Santa Claus&lt;/name&gt;
  &lt;title&gt;Chief Present Officer (CPO)&lt;/title&gt;
&lt;/Employee&gt;
</pre>
</div></div>
<p>在XML Schema中，这将成为复杂的类型：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;xsd:complexType name="Employee"&gt;
  &lt;xsd:sequence&gt;
    &lt;xsd:element name="name" type="xsd:string" minOccurs="0" maxOccurs="1/&gt;
    &lt;xsd:element name="title" type="xsd:string" minOccurs="0" maxOccurs="1/&gt;
  &lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
</pre>
</div></div>

<div class="confluence-information-macro confluence-information-macro-information"><p class="title">验证您的映射！</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>您可以<a shape="rect" href="aegis-databinding-20x.data/aegis.xsd?version=1&modificationDate=1190737394000&api=v2" data-linked-resource-id="59670732" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="aegis.xsd" data-linked-resource-content-type="application/xml" data-linked-resource-container-id="49562" data-linked-resource-container-version="29">在此处</a>找到Aegis映射文件的XML模式。<br clear="none">
 <a shape="rect" href="annotated-aegis-file-schema.html">此</a>版本的XML模式具有注释以解释细节。</p></div></div>

<h2 id="AegisDatabinding(2.0.x)-SupportedTypes">支持的类型</h2>

<ul><li>基本类型：int，double，float，long，byte []，short，String，BigDecimal</li><li>数组</li><li>收藏-包括地图</li><li>日期：java.util。日期，java.util。日历，java.sql。时间戳，java.sql。日期，java.sql。时间</li><li>XML：org.w3c.dom。文件，org.jdom。元素，XMLStreamReader，源</li><li>复杂类型是上述的集合</li></ul>


<p>如果您在Java Bean中定义了构造函数，请确保还声明了默认构造函数（即，没有参数）。（Aegis需要一个无参数的构造函数来实例化客户端Java类。）</p>

<h1 id="AegisDatabinding(2.0.x)-SettingDefaultminOccursandnillableParametersfromJava">从Java设置默认的minOccurs和可设置的参数</h1>

<p>如果您有许多属性，并且希望大多数或所有这些属性都具有非0的minO或非<strong>false</strong>的nilable，则可以从Java代码（其他地方）更改Aegis的默认值。<br clear="none">这是一个示例：它从服务工厂提取绑定提供程序，并更改配置参数。</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
ServerFactoryBean sf = new ServerFactoryBean();
sf.setServiceClass(serviceClass);
sf.setAddress("http://myhost/service");
AegisDatabinding db = new AegisDatabinding();
sf.getServiceFactory().setDataBinding(db);

DefaultTypeMappingRegistry tmr = (DefaultTypeMappingRegistry)db.getTypeMappingRegistry();
// here we disuade XFire from its rather annoying tendency to assume that, just because
// anything in Java can be null, that we want to advertise all that nullity all over.
Configuration configuration = tmr.getConfiguration();
configuration.setDefaultMinOccurs(1);
configuration.setDefaultNillable(false);

sf.create();
</pre>
</div></div>

<h1 id="AegisDatabinding(2.0.x)-MoreInformation....">更多信息....</h1>

<p>本部分正在建设中。有关Aegis数据绑定如何工作的更多信息，请在XFire站点（http://xfire.codehaus.org/User's%2bGuide）上查看Aegis文档。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=49562">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=49562&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>