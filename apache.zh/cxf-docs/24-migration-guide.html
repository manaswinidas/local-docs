<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - 2.4 Migration Guide">




    <title>Apache CXF-2.4迁移指南</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">指数</a> > <a href="how-tos.html">入门指南</a> > <a href="migration-guides.html">迁移指南</a> > <a href="24-migration-guide.html">2.4迁移指南</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h3 id="id-2.4MigrationGuide-NewFeatures">新的功能</h3>

<ul><li><a shape="rect" href="http://cxf.apache.org/docs/logbrowser.html">LogBrowser</a>控制台</li><li>转换功能提供了一种快速有效的方法来转换入站和/或出站XML消息，请参阅<a shape="rect" href="transformationfeature.html">TransformationFeature</a>页面以获取更多信息。</li><li>JIBX数据绑定</li><li>加快启动速度并减少弹簧配置。重做了Spring支持，使其基于ExtensionManagerBus。这样可以加快启动速度。这也意味着不再需要所有META-INF / cxf / cxf-extension-*。xml的导入，并且已弃用。</li><li>WSS4J已从1.5.x更新到1.6。有关Apache WSS4J 1.6的新功能和升级说明的列表，请参见<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/wss4j16.html">此处</a> （尚未发布）。另请参阅<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/" rel="nofollow">Colm的博客</a> ，以获取WSS4J 1.6中正在发生的事情的持续列表。CXF用户值得注意的一些新功能包括：<ul><li>SAML2支持：WSS4J 1.6完全支持通过Opensaml2库创建，操作和解析SAML2断言。有关更多信息，请参见<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/02/support-for-saml2-assertions-in-wss4j.html" rel="nofollow">此处</a> 。</li><li>性能工作：已经完成了通用代码重写，重点是提高性能。</li><li>支持加密信任库：WSS4J 1.6分离了密钥库和信任库的概念。有关更多信息，请参见<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/01/wss4j-16-crypto-property-change.html" rel="nofollow">此处</a>和<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/02/wss4j-16-changes-to-crypto-interface.html" rel="nofollow">此处</a> 。</li></ul>
	</li><li>WS-SecurityPolicy支持SAML令牌。</li><li>最初的Apache Aries Blueprint支持。这项工作正在进行中，但是许多与Spring一起使用以启动/创建/配置客户端和服务的Spring命名空间处理程序现在也具有Blueprint版本。请参阅<a shape="rect" href="http://cxf.apache.org/schemas/blueprint/">http://cxf.apache.org/schemas/blueprint/，</a>以获取已移植到Blueprint的一些模式。</li></ul>


<h3 id="id-2.4MigrationGuide-Removedmodules">卸下的模块</h3>

<p>osgi http传输已被删除（cxf-rt-transports-http-osgi），cxf-rt-transport-http现在也支持osgi情况。由于OSGi捆绑包是分开的，因此容器中无需进行任何更改。</p>

<h3 id="id-2.4MigrationGuide-APIChanges">API变更</h3>

<ul><li>GZIP相关的拦截器/功能已从http模块中移出，因此它们可与其他传输方式（例如JMS）一起使用。因此，他们的软件包已从org.apache.cxf.transport.http.gzip更改为org.apache.cxf.transport.common.gzip</li></ul>


<ul><li>XmlSchema已从1.4.x更新到2.0。这样，对XmlSchema类的任何使用都可能已更改。特别是，XmlSchema 2.0使用Java 5集合来更改其使用方式。另外，org.apache.cxf.common.xmlschema中存在许多静态实用程序方法。XmlSchemaUtils现在已直接合并到XmlSchema API中，不再需要或不可用。</li></ul>


<ul><li>WSS4J已从1.5.x更新到1.6。WSS4J 1.6放弃了JDK 1.4的要求，因此已升级为使用Java 5集合等。需要注意的一些API更改包括：<ul><li>SAMLTokenProcessor不再将所有令牌另存为“ WSConstants”。ST_UNSIGNED”操作。它将不具有信封签名的令牌保存为该操作，而将具有信封签名的令牌保存为“ WSConstants”。ST_SIGNED”操作。保存的对象已从特定于Opensaml1的Assertion对象更改为AssertionWrapper实例，该实例是封装了Assertion以及与签名验证相对应的某些信息的WSS4J特定对象。</li><li>已对CallbackHandler实现中使用的WSPasswordCallback标识符进行了一些更改。有关更多信息，请参见<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/02/wspasswordcallback-changes-in-wss4j-16.html" rel="nofollow">此处</a> 。</li></ul>
	</li></ul>


<ul><li>Neethi已从2.0.x升级到3.0。由于Neethi 2.0.x API的缺陷和限制，CXF在org.apache.cxf.ws.policy软件包中维护了Neethi各个部分的半分叉。使用CXF 2.4.x和Neethi 3.0，可以解决Neethi中的不足，并将派生的更改推到Neethi中，并且CXF可以更好地直接利用Neethi中的增强功能和新功能，而无需复制功能。如果您编写CXF的自定义策略，则需要进行一些更改。这些包括：<ul><li>CXF AssertionBuilder接口已被删除。现在，我们直接使用Neethi AssertionBuilders和Assertions。</li><li>PolicyAssertion的“ getPolicy（）”方法已删除。可以包含嵌套策略的策略应直接实现Neethi PolicyContainingAssertion接口。</li><li>Neethi已更新，能够处理WS-Policy 1.5策略。因此，Assertion接口现在具有必须实现的isIgnorable（）方法。返回false的实现应该足够并且与以前的行为兼容。</li><li>随着CXF AssertionBuilder的删除以及Neethi中的交集算法的实现，不再需要CXF AssertionBuilder上的“ buildCompatible”方法。如果策略需要自定义交叉算法，则它们现在可以实现Neethi IntersectableAssertion接口。</li><li>现在，CXF中所有期望使用CXF特定PolicyAssertion的位置都希望使用正常的Neethi声明。如果断言需要特定的逻辑来确定是否已断言，则可以实现CXF PolicyAssertion接口，否则将使用默认逻辑。</li><li>由于Neethi已更新为使用Java 5泛型，因此您可能需要更新并强制转换和调用现在键入的新方法时可能发生的警告。</li></ul>
	</li></ul>


<ul><li>JAX-RS搜索扩展：org.apache.cxf.jaxrs.ext.search。SearchContext具有一个新的getSearchExpression方法，该方法返回原始搜索查询。 org.apache.cxf.jaxrs.ext.search。SearchCondition已弃用其toSQL方法，并添加了新的accept方法。请参阅<a shape="rect" href="http://cxf.apache.org/docs/jax-rs-advanced-features.html#JAX-RSAdvancedFeatures-FIQLsearchqueries">此页面</a>以获取更多信息。</li></ul>


<ul><li>JAX-RS WADL生成：org.apache.cxf.jaxrs.ext。说明和org.apache.cxf.jaxrs.ext.xml。XMLName已被移至org.apache.cxf.jaxrs.model.wadl包，因为它们的目的是改善WADL的生成。另外，org.apache.cxf.jaxrs.model.wadl。WadlElement已重命名为“ ElementClass”。</li></ul>


<h3 id="id-2.4MigrationGuide-RuntimeChanges">运行时更改</h3>

<ul><li>ExtensionManagerBus（通常在Spring不可用时使用）已更新为完全支持所有功能，包括WS-SecurityPolicy，WS-RM等功能。包含策略片段的先前WSDL文档现在在执行策略时可能会有所不同。</li></ul>


<ul><li>现在，WS-Security Crypto实现默认不加载JDK附带的默认CA证书，该实现用于加密/解密和签名创建/验证。</li></ul>


<ul><li>WSS4J 1.5.x忽略了SAML（1.1）断言上的（封装的）签名-情况不再如此，因此未设置正确的密钥库/信任库配置来处理签名验证的部署将失败。</li></ul>


<ul><li>WSS4J处理UsernameTokens的方式已更改。有关更多信息，请参见<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/02/usernametoken-processing-changes-in.html" rel="nofollow">此处</a> 。纯文本密码的回调处理程序标识符现在为WSPasswordCallback。USERNAME_TOKEN，与摘要情况相同。CallbackHandler实现仅在回调上设置密码，而从不对密码进行任何验证。</li></ul>



<h3 id="id-2.4MigrationGuide-PropertyChanges">物业变更</h3>

<ul><li>“ ws-security.ut.no-callbacks”属性已重命名为“ ws-security.validate.token”，因此为了配置CXF WS-Security拦截器将当前（UT）令牌的验证推迟一需要将“ ws-security.validate.token”设置为false。<br clear="none">请参阅本<a shape="rect" href="securing-cxf-services.html">节</a>以获取更多信息。</li></ul>


<ul><li>WSS4J 1.6增加了对分离密钥库和信任库的支持。有关更多信息，请参见<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/01/wss4j-16-crypto-property-change.html" rel="nofollow">此处</a>和<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/02/wss4j-16-changes-to-crypto-interface.html" rel="nofollow">此处</a> 。所做的更改是100％向后兼容的（除了不加载默认的CA证书之外）。</li></ul>


<ul><li>通过属性文件创建SAML断言的方式已经完全改变。有关更多信息，请参见<a shape="rect" class="external-link" href="http://coheigea.blogspot.com/2011/03/wss4j-16-saml-property-changes.html" rel="nofollow">此处</a>和<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/config.html">此处</a> 。</li></ul></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=24190088">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=24190088&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>