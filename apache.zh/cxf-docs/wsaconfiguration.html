<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - WSAConfiguration">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-WSA配置</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="configuration.html">配置</a> > <a href="wsaconfiguration.html">WSA</a> <a href="configuration.html">配置</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="WSAConfiguration-WS-AddressingConfiguration">WS-寻址配置</h1>

<p>为了在消息交换中使用WS-Addressing，需要做两件事：</p>
<ol><li>寻址拦截器（org.apache.cxf.ws.addressing。MAPAggregator和org.apache.cxf.ws.addressing.soap。MAPCodec）必须位于入站和出站拦截器链上。</li><li>WS-Addressing的使用由以下之一指示：<ol><li><usingaddressing xmlns="http://www.w3.org/2005/02/addressing/wsdl">元素附加到<wsdl:port><wsdl:service>或<wsdl:binding>元素。</wsdl:binding></wsdl:service></wsdl:port></usingaddressing></li><li>消息的（有效的选择策略）包含一个<addressing xmlns="http://www.w3.org/2007/02/addressing/metadata">断言或<usingaddressing>来自以下三个名称空间之一的断言： <a shape="rect" class="external-link" href="http://www.w3.org/2005/02/addressing/wsdl" rel="nofollow">http:</a> <a shape="rect" class="external-link" href="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" rel="nofollow">//schemas.xmlsoap.org/ws/2004/08/addressing/policy，http</a> <a shape="rect" class="external-link" href="http://www.w3.org/2005/02/addressing/wsdl" rel="nofollow">：/ /www.w3.org/2005/02/addressing/wsdl</a> ， <a shape="rect" class="external-link" href="http://www.w3.org/2006/05/addressing/wsdl" rel="nofollow">http://www.w3.org/2006/05/addressing/wsdl</a> 。</usingaddressing></addressing></li><li>消息上下文中的org.apache.cxf.ws.addressing.using属性设置为Boolean。真正。</li></ol>
	</li></ol>


<p>请注意，要使2.2生效，必须启用CXF的策略引擎，请参阅<a shape="rect" href="wspconfiguration.html">WS-Policy Framework Configuration</a> 。</p>

<h2 id="WSAConfiguration-UsingtheAddressingFeature">使用寻址功能</h2>

<p>寻址功能元素在名称空间<a shape="rect" href="http://cxf.apache.org/ws/addressing">http://cxf.apache.org/ws/addressing中</a>定义。它支持两个属性：</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>名称</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>值</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>allowDuplicates</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>一个布尔值，用于确定是否允许重复的MessageID（默认值：true）</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>usingAddressingAdvisory</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>一个布尔值，指示<usingaddressing>wsdl中元素的存在<usingaddressing>是否纯粹是建议性的，即 ， <usingaddressing>元素的缺失并不妨碍WS-A标头的编码。这对于在没有wsdl且因此不满足2.1和2.2中的任何条件的java-first情况下启用WS-Addressing尤其有用。</usingaddressing></usingaddressing></usingaddressing></p></td></tr></tbody></table></div>


<p>例如，要将此功能应用于JAX-WS服务器端点：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;beans ... xmlns:wsa="http://cxf.apache.org/ws/addressing" ...&gt;
    &lt;jaxws:endpoint ...&gt;
        &lt;jaxws:features&gt;
            &lt;wsa:addressing allowDuplicates="false"/&gt;
        &lt;/jaxws:features&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</pre>
</div></div>

<h2 id="WSAConfiguration-AddingtheAddressingInterceptorsManually">手动添加寻址拦截器</h2>

<p>org.apache.cxf.ws。寻址。MAPAggregator和org.apache.cxf.ws.addressing.soap。必须将MAPCodec添加到拦截器链中，以处理入站和出站消息以及故障。<br clear="none">在全局级别（即适用于所有客户端和服务器端点），可以按照以下示例进行操作（另请参见“ <a shape="rect" href="bus-configuration.html">总线配置”</a> ）。请注意，由于allowDuplicates和usingAddressingAdvisory实际上是MAPAggregator拦截器的属性，因此也可以使用Spring语法设置它们。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;bean id="mapAggregator" class="org.apache.cxf.ws.addressing.MAPAggregator"&gt;
    &lt;property name="allowDuplicates" value="false"/&gt;
&lt;/bean&gt;
&lt;bean id="mapCodec" class="org.apache.cxf.ws.addressing.soap.MAPCodec"/&gt;

&lt;cxf:bus&gt;
    &lt;cxf:inInterceptors&gt;
        &lt;ref bean="mapAggregator"/&gt;
        &lt;ref bean="mapCodec"/&gt;
    &lt;/cxf:inInterceptors&gt;
    &lt;cxf:inFaultInterceptors&gt;
        &lt;ref bean="mapAggregator"/&gt;
        &lt;ref bean="mapCodec"/&gt;
    &lt;/cxf:inFaultInterceptors&gt;
    &lt;cxf:outInterceptors&gt;
        &lt;ref bean="mapAggregator"/&gt;
        &lt;ref bean="mapCodec"/&gt;
    &lt;/cxf:outInterceptors&gt;
    &lt;cxf:outFaultInterceptors&gt;
        &lt;ref bean="mapAggregator"/&gt;
        &lt;ref bean="mapCodec"/&gt;
    &lt;/cxf:outFaultInterceptors&gt;
&lt;/cxf:bus&gt;
</pre>
</div></div>

</div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=62749">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=62749&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>