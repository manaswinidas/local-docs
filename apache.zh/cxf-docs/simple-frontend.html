<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Simple Frontend">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-简单前端</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="frontends.html">前端</a> > <a href="simple.html">简单</a> > <a href="simple-frontend.html">简单前端</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><p>CXF提供了“简单”的前端，可以将Java API与Web服务的WSDL模型进行映射。简单的前端很像<a shape="rect" href="jax-ws.html">JAX-WS</a> ，但是JAX-WS使用Java注释来指定详细的配置（实际上需要一些注释），Simple愿意将“裸”接口或类映射到服务，并尊重与Aegis数据绑定共享的.aegis.xml文件中的某些配置选项。</p>

<div class="confluence-information-macro confluence-information-macro-note"><p class="title">大多数应用程序应使用JAX-WS</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>JAX-WS前端比简单前端要灵活得多。选择JAX-WS上的Simple仅有两个原因：</p>
<ol><li>您必须避免使用Java批注。JAX-WS需要它们，而Simple则不需要。</li><li>您想要绝对最小的附加依赖项集合。JAX-WS比简单具有更多的依赖性。</li></ol>


<p>除了这些项目之外，Simple与JAX-WS相比没有任何优势。 CXF中的JAX-WS的实现类都是Simple的实现类的子类。在“简单”情况下，与JAX-WS一样，简单前端中发生的事情几乎相同。另一方面，CXF对JAX-WS的扩展使其使用起来非常“简单”。</p></div></div>
<h2 id="SimpleFrontend-SimplePitfall:UnreliableParameterNames">简单的陷阱：不可靠的参数名称</h2>

<p>Web服务的典型模式是定义服务端点接口，然后创建实现该接口的类。当您拥有该过程的两端时，您只需在服务器和客户端中都使用SEI。</p>

<p>问题与Java反射的怪癖有关。如果程序使用Java反射检查类的具体方法，则可用数据<strong>可能会</strong>提供源中的参数名称。当前Java编译器的行为取决于您是否要求它们提供调试符号。但是，如果程序使用反射来查看<strong>抽象方法</strong> ，则当前的Java编译器将<strong>永远不会</strong>提供参数名称。</p>

<p>如果没有名称，Simple将创建难看的参数，命名为<code>arg0</code> ， <code>arg1</code> ，...此外，如果您在创建服务时忘记指定SEI，而仅提供SEB，则Simple将看到您的具体方法并分配实际的参数名称（如果有调试符号）。如果您的客户使用SEI，他们将无法通信。如果您对调试符号改变主意，则将更改合同。</p>

<p>因此，虽然JAX-WS <code>@WebParam</code>批注似乎嘈杂且不便，实际上是在确保您的服务具有一致的合同。</p>

<p>如果您选择使用简单前端，则需要使用<code>parameter</code>一个元素<code>.aegis.xml</code>文件以提供有用的名称，或确保将SEI提供给<code>ServerFactoryBean</code> 。</p>

<h2 id="SimpleFrontend-SimpleandDataBindings">简单和数据绑定</h2>

<p>默认情况下，CXF使用JAXB数据绑定。这是历史上的默认设置，但由于上述陷阱和本页底部所述的JAX-B问题，通常不是您想要的。如果您选择使用简单前端，我们建议您使用<a shape="rect" href="aegis-21.html">Aegis数据绑定</a> 。</p>

<h2 id="SimpleFrontend-ServerFactoryBean–MakingaServiceEndpoint">ServerFactoryBean –创建服务端点</h2>
<p>ServerFactoryBean为您生成一个Server实例。它需要一个服务类和一个地址来发布服务。通过创建服务器，您将启动服务并将其提供给外界。</p>

<p>首先，您要创建服务类：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
public interface HelloWorld {
  String sayHi(String text);
}
</pre>
</div></div>
<p>这不一定是接口，但是在本示例中我们将使用接口，因为</p>
<ol><li>最好将服务合同（您的界面）与实施分开</li><li>这使我们可以轻松地创建Java代理客户端</li></ol>


<p>我们还需要一个实现类：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
public class HelloWorldImpl implements HelloWorld {
  public String sayHi(String text) {
    return "Hello " + text;
  }
}
</pre>
</div></div>

<p>现在我们要从中创建一个服务器</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import org.apache.cxf.frontend.ServerFactoryBean;
...

// Create our service implementation
HelloWorldImpl helloWorldImpl = new HelloWorldImpl();

// Create our Server
ServerFactoryBean svrFactory = new ServerFactoryBean();
svrFactory.setServiceClass(HelloWorld.class);
svrFactory.setAddress("http://localhost:9000/Hello");
svrFactory.setServiceBean(helloWorldImpl);
svrFactory.create();
</pre>
</div></div>

<p>您的服务现已开始！您可以通过“ <a shape="rect" class="external-link" href="http://localhost:9000/Hello?wsdl" rel="nofollow">http：// localhost：9000 / Hello？wsdl</a> ”访问<a shape="rect" class="external-link" href="http://localhost:9000/Hello?wsdl" rel="nofollow">wsdl</a> 。</p>

<h2 id="SimpleFrontend-ClientProxyFactoryBean–MakingaClientProxy">ClientProxyFactoryBean –制作客户端代理</h2>
<p>您还需要为服务创建一个客户端。CXF包含一个ClientProxyFactoryBean，它将从您的界面中为您创建一个Java代理，该代理将调用该服务。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
import demo.hw.server.HelloWorld;
import org.apache.cxf.frontend.ClientProxyFactoryBean;
...

ClientProxyFactoryBean factory = new ClientProxyFactoryBean();
factory.setServiceClass(HelloWorld.class);
factory.setAddress("http://localhost:9000/Hello");
HelloWorld client = (HelloWorld) factory.create();
</pre>
</div></div>

<p>您只需要在bean上设置服务类和服务的URL。然后，调用create（）将根据您的界面为您创建一个代理。</p>

<h2 id="SimpleFrontend-ConfigurewithSpring">用Spring配置</h2>

<p>自己动手做的Spring Bean和cxf.xml或cxf-servlet.xml的XML配置都非常相似。<br clear="none">简单的前端没有自己的扩展名，因此如果您要设置自己的扩展程序，则不需要任何额外的导入<br clear="none">自己的应用程序上下文。</p>

<p>这是具有简单前端端点配置的示例cxf-servlet.xml。如果使用自己的应用程序上下文，则需要导入soap扩展名和http servlet扩展名。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:simple="http://cxf.apache.org/simple"
      xmlns:soap="http://cxf.apache.org/bindings/soap"
      xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://cxf.apache.org/bindings/soap http://cxf.apache.org/schemas/configuration/soap.xsd
http://cxf.apache.org/simple http://cxf.apache.org/schemas/simple.xsd"&gt;

  &lt;simple:server id="pojoservice" serviceClass="demo.hw.server.HelloWorld" address="/hello_world"&gt;
  	&lt;simple:serviceBean&gt;
  		&lt;bean class="demo.hw.server.HelloWorldImpl" /&gt;
  	&lt;/simple:serviceBean&gt;
  &lt;/simple:server&gt;
&lt;/beans&gt;
</pre>
</div></div>

<h2 id="SimpleFrontend-DeployingSimpleFrontEndservicetoacontainer">将简单的FrontEnd服务部署到容器</h2>
<p>如果希望将服务部署到容器，请遵循目录中“传输-> HTTP传输-> Servlet传输”部分中的步骤。从上面的“配置cxf-servlet.xml”部分添加xml内容。将您的配置文件命名为“ services.xml”。不要将其命名为cxf-servlet.xml。<br clear="none">您需要在“传输-> HTTP传输-> Servlet传输”中从示例配置文件添加导入语句。</p>

<h2 id="SimpleFrontend-Well-KnownIssue">众所周知的问题</h2>
<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>与POJO绑定JAXB数据存在一个已知问题，请参阅<a shape="rect" class="external-link" href="https://issues.apache.org/jira/browse/CXF-897">https://issues.apache.org/jira/browse/CXF-897中的</a> Dan Kulp评论。<br clear="none">如果要使用JAXB绑定，则应使用<a shape="rect" href="jax-ws.html">JAX-WS</a>前端。混合使用简单的前端和JAXB绑定会导致问题。文章<a shape="rect" href="a-simple-jax-ws-service.html">简单的JAX-WS服务</a>显示了代码优先的JAX-WS服务，它几乎和简单前端一样容易使用。</p></div></div></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=49556">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=49556&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>