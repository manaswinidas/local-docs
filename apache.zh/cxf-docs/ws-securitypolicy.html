<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - WS-SecurityPolicy">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-WS-SecurityPolicy</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="ws-support.html">WS- *支持</a> > <a href="ws-securitypolicy.html">WS-SecurityPolicy</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><div class="aui-message aui-message-error"><p class="title"><strong>呈现宏'html'时出错</strong></p><p>您的Confluence管理员不允许在HTML宏中使用Javascript。可以使用HTML for Confluence Configuration更改此设置。请与您的管理员联系以获取详细信息。</p></div><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="WS-SecurityPolicy-WS-SecurityPolicy">WS-SecurityPolicy</h1><p>CXF 2.2引入了对使用<a shape="rect" class="external-link" href="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.3/ws-securitypolicy.html" rel="nofollow">WS-SecurityPolicy</a>配置WSS4J（而不是<a shape="rect" href="ws-security.html">WS-Security</a>页面上记录的自定义配置）的支持。但是， <a shape="rect" href="ws-security.html">WS-Security</a>页面上的所有“背景”材料仍然适用，并且很重要。WS-SecurityPolicy只是提供了一种更轻松，更基于标准的方式来配置和控制安全需求。有了WSDL中作为<a shape="rect" href="ws-policy.html">WS-Policy</a>片段记录在WSDL中的安全性要求，其他工具（例如.NET）可以轻松地知道如何配置自身以与CXF服务互操作。</p><p>CXF支持WS-SecurityPolicy版本1.1和更高版本。它不支持WS-SecurityPolicy 1.0。</p><h3 id="WS-SecurityPolicy-Backwardscompatibilityconfigurationnote">向后兼容性配置说明</h3><p>从Apache CXF 3.1.0起，某些基于WS-Security的配置标签已更改为仅以“ security-”开头。这样便可以与<a shape="rect" href="jax-rs-xml-security.html">JAX-RS XML安全性</a>组件共享它们。除前缀更改外，标签完全相同。CXF 3.1.0继续接受较旧的“ ws-security-”值。有关新的共享配置标签的信息，请参阅“ <a shape="rect" href="security-configuration.html">安全性配置”</a>页面。</p><h3 id="WS-SecurityPolicy-EnablingWS-SecurityPolicy">启用WS-SecurityPolicy</h3><p>在CXF 2.2中，如果类路径上提供了cxf-rt-ws-policy和cxf-rt-ws-security模块，则将自动启用WS-SecurityPolicy。由于整个安全运行时都是由策略驱动的，因此唯一的要求就是策略引擎和安全策略可用。</p><p>如果您使用的是完整的“捆绑” jar，则所有安全性和策略方面的内容都已包含在内。</p><h3 id="WS-SecurityPolicy-Policydescription">政策说明</h3><p>使用WS-SecurityPolicy，wsdl中的绑定和/或操作引用了<a shape="rect" href="ws-policy.html">WS-Policy</a>片段，该片段描述了与该服务进行交互的基本安全要求。<a shape="rect" class="external-link" href="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.3/ws-securitypolicy.html" rel="nofollow">WS-SecurityPolicy规范</a>允许使用传输（https）进行加密，指定要加密或签名的部分/标题，是否先签名然后加密，先加密还是先加密然后签名，是否包括时间戳记，是否使用等非对称/对称密钥之类的东西。派生密钥等基本上，它描述了与WSDL中描述的服务安全交互所必需的操作。</p><p>但是，WS-SecurityPolicy片段不包含运行时能够创建消息所需的“所有内容”。它没有描述诸如密钥库的位置，用户名和密码等内容。需要在运行时对其进行配置，以扩展WS-SecurityPolicy片段。</p><h3 id="WS-SecurityPolicy-Configuringtheextraproperties">配置额外的属性</h3><p>可能需要设置一些额外的属性才能为运行时提供更多的信息。请注意，您应该检查所使用的CXF版本是否支持特定的属性。首先，请参阅“ <a shape="rect" href="security-configuration.html">安全性配置”</a>页面，以获取与JAX-RS XML安全性组件共享的配置标签的信息。这里是仅适用于WS-SecurityPolicy层的配置标签，因此所有配置标签都以“ ws-security”开头（与现在以“ security-”开头的通用标签相反）。</p><p><br clear="none"></p><h4 id="WS-SecurityPolicy-BooleanWS-Securityconfigurationtags,e.g.thevalueshouldbe" tru="or" fals="." ="">布尔值WS-Security配置标记，例如，值应为“ true”或“ false”。</h4><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>不变</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>默认</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>定义</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.validate.token</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>真正</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否验证收到的UsernameToken的密码。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.username-token.always.encrypted</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>真正</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否始终加密定义为SupportingToken的UsernameToken。在生产环境中，不应将此设置为false，因为它会在网络上公开密码（或密码摘要）。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.is-bsp兼容</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>真正</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否确保符合基本安全配置文件（BSP）1.1。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.self-sign-saml断言</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>假</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否自签名SAML声明。如果将其设置为true，则在构造SAML断言时将生成一个信封签名。仅适用于CXF2.7.x。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.enable.nonce.cache</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>（可变）</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否缓存UsernameToken随机数。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#ENABLE_NONCE_CACHE">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.enable.timestamp.cache</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>（可变）</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否缓存时间戳创建的字符串。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#ENABLE_TIMESTAMP_CACHE">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.enable.saml.cache</td><td colspan="1" rowspan="1" class="confluenceTd">（可变）</td><td colspan="1" rowspan="1" class="confluenceTd">如果令牌包含“ OneTimeUse”条件，是否缓存SAML2令牌标识符。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.enable.streaming</td><td colspan="1" rowspan="1" class="confluenceTd">假</td><td colspan="1" rowspan="1" class="confluenceTd">是否启用流WS-Security。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.return.security.error</td><td colspan="1" rowspan="1" class="confluenceTd">假</td><td colspan="1" rowspan="1" class="confluenceTd"><p>是否将安全错误消息返回给客户端，而不是默认错误QNames之一。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security。必须了解</td><td colspan="1" rowspan="1" class="confluenceTd">真正</td><td colspan="1" rowspan="1" class="confluenceTd"><p>将其设置为“ false”，以便从基于WS-SecurityPolicy生成的安全性标头中删除SOAP mustUnderstand标头。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.store.bytes.in。附件</td><td colspan="1" rowspan="1" class="confluenceTd">（可变）</td><td colspan="1" rowspan="1" class="confluenceTd"><strong>CXF 3.1.3 / 3.0.6</strong>如果启用了MTOM，是否在附件中存储字节（CipherData或BinarySecurityToken）。在CXF 3.1.x中默认为true，在CXF 3.0.x中为false。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.use.str.transform</td><td colspan="1" rowspan="1" class="confluenceTd">真正</td><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>CXF 3.1.5 / 3.0.8</strong> （外部）签署SAML令牌时是否使用STR（安全令牌参考）转换。默认值为true。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.add.inclusive.prefixes</td><td colspan="1" rowspan="1" class="confluenceTd">真正</td><td colspan="1" rowspan="1" class="confluenceTd"><strong>CXF 3.1.7</strong>使用WSConstants生成签名时，是否将InclusiveNamespaces PrefixList添加为CanonicalizationMethod子级。C14N_EXCL_OMIT_COMMENTS。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.expand.xop.include</td><td colspan="1" rowspan="1" class="confluenceTd">（可变）</td><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>CXF 3.3.3 / 3.2.10</strong>是否搜索和扩展xop：包括用于加密和签名（在出站侧）或用于签名验证（在入站侧）的元素。这样可以确保对实际字节进行签名，而不仅仅是引用。如果启用了MTOM，则默认值为“ true”，否则为false。</p></td></tr></tbody></table></div><h4 id="WS-SecurityPolicy-Non-booleanWS-SecurityConfigurationparameters">非布尔值WS-Security配置参数</h4><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.timestamp.timeToLive</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>附加到传入时间戳记的Creation值上的时间（以秒为单位），以确定是否接受时间戳记为有效。默认值为300秒（5分钟）。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.timestamp.futureTimeToLive</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>未来时间（以秒为单位），其中传入时间戳记的“创建时间”有效。默认值为“ 60”。有关更多信息，请参见<a shape="rect" href="http://cxf.apache.org/javadoc/latest/org/apache/cxf/ws/security/SecurityConstants.html#TIMESTAMP_FUTURE_TTL">此处</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.spnego.client.action</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于SPNEGO的<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/spnego/SpnegoClientAction.html">SpnegoClientAction</a>实现。这允许用户插入其他实现以获得服务票证。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.nonce.cache.instance</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>它包含对用于缓存UsernameToken随机数的<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/cache/ReplayCache.html">ReplayCache</a>实例的引用。使用的默认实例是<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/cache/EHCacheReplayCache.html">EHCacheReplayCache</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.timestamp.cache.instance</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>它包含对<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/cache/ReplayCache.html">ReplayCache</a>实例的引用，该实例用于缓存Timestamp创建的字符串。使用的默认实例是<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/cache/EHCacheReplayCache.html">EHCacheReplayCache</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.saml.cache.instance</td><td colspan="1" rowspan="1" class="confluenceTd">当令牌具有“ OneTimeUse”条件时，该引用保留对用于缓存SAML2令牌标识符的<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/cache/ReplayCache.html">ReplayCache</a>实例的引用。使用的默认实例是<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/wss4j/common/cache/EHCacheReplayCache.html">EHCacheReplayCache</a> 。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.cache.config.file</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>将此属性设置为指向基础缓存实现的配置文件。使用的默认配置文件是cxf-rt-ws-security模块中的cxf- <a shape="rect" class="external-link" href="http://svn.apache.org/viewvc/cxf/trunk/rt/ws/security/src/main/resources/cxf-ehcache.xml?view=markup">ehcache.xml</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.cxf.ws.security.tokenstore。令牌存储</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于缓存安全令牌的<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/TokenStore.java" rel="nofollow">TokenStore</a>实例。默认情况下，如果EhCache可用，则使用<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/EHCacheTokenStore.java" rel="nofollow">EHCacheTokenStore</a> 。否则，它将使用<a shape="rect" class="external-link" href="https://github.com/apache/cxf/blob/master/rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/MemoryTokenStore.java" rel="nofollow">MemoryTokenStore</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.cache.identifier</td><td colspan="1" rowspan="1" class="confluenceTd">与TokenStore一起使用的缓存标识符。CXF使用以下密钥检索令牌存储：“ org.apache.cxf.ws.security.tokenstore。TokenStore- <identifier>”。该密钥可用于配置特定于服务的缓存配置。如果标识符不匹配，则使用键“ org.apache.cxf.ws.security.tokenstore”回退到缓存配置。TokenStore”。默认的“ <identifier>”是相关服务的QName。</identifier></identifier></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.role.classifier</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果WSS4J验证程序之一从验证返回JAAS主题，则WSS4JInInterceptor将尝试基于此主题创建SecurityContext。如果未指定此值，则它将尝试使用cxf-rt-core中的DefaultSecurityContext获得角色。否则，它将结合使用此值和SUBJECT_ROLE_CLASSIFIER_TYPE从主题获取角色。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.role.classifier.type</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>如果WSS4J验证程序之一从验证返回JAAS主题，则WSS4JInInterceptor将尝试基于此主题创建SecurityContext。当前接受的值为“前缀”或“类名”。必须与SUBJECT_ROLE_CLASSIFIER结合使用。默认值为“前缀”。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.asymmetric.signature.algorithm</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>由于WS-SecurityPolicy规范目前不允许使用其他算法，因此此配置标记将覆盖在WS-SecurityPolicy中使用的默认非对称签名算法（RSA-SHA1）。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.symmetric.signature.algorithm</td><td colspan="1" rowspan="1" class="confluenceTd">由于WS-SecurityPolicy规范目前不允许使用其他算法，因此此配置标记将覆盖在WS-SecurityPolicy中使用的默认对称签名算法（HMAC-SHA1）。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.password.encryptor.instance</td><td colspan="1" rowspan="1" class="confluenceTd"><p>一个PasswordEncryptor实例，该实例用于在Merlin Crypto实现中加密或解密密码</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.delegated.credential</td><td colspan="1" rowspan="1" class="confluenceTd">用于WS-Security的委托凭证。当前仅支持Kerberos GSSCredential对象。这用于检索服务票证，而不使用客户端凭据。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.security.token.lifetime</td><td colspan="1" rowspan="1" class="confluenceTd"><p><strong>CXF 3.1.9</strong>安全令牌生存期值（以毫秒为单位）。默认值为“ 300000”（5分钟）。</p></td></tr></tbody></table></div><h4 id="WS-SecurityPolicy-Validatorimplementationsforvalidatingreceivedsecuritytokens">验证器实现，用于验证收到的安全令牌</h4><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.ut.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于验证UsernameToken的WSS4J Validator实例。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/UsernameTokenValidator.html">UsernameTokenValidator</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.saml1.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于验证SAML 1.1令牌的WSS4J Validator实例。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/SamlAssertionValidator.html">SamlAssertionValidator</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.saml2.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于验证SAML 2.0令牌的WSS4J Validator实例。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/SamlAssertionValidator.html">SamlAssertionValidator</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.timestamp.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于验证时间戳的WSS4J Validator实例。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/TimestampValidator.html">TimestampValidator</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.signature.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>WSS4J Validator实例，用于验证对签名验证中使用的凭据的信任。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/SignatureTrustValidator.html">SignatureTrustValidator</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.bst.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于验证BinarySecurityTokens的WSS4J Validator实例。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/NoOpValidator.html">NoOpValidator</a> 。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.sct.validator</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于验证SecurityContextToken的WSS4J Validator实例。默认值为<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/apidocs/org/apache/ws/security/validate/NoOpValidator.html">NoOpValidator</a> 。</p></td></tr></tbody></table></div><h4 id="WS-SecurityPolicy-KerberosConfigurationtags">Kerberos配置标签</h4><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>不变</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>默认</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>定义</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.kerberos.request.credential.delegation</td><td colspan="1" rowspan="1" class="confluenceTd">假</td><td colspan="1" rowspan="1" class="confluenceTd">是否在KerberosClient中请求凭据委派。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.kerberos.use.credential.delegation</td><td colspan="1" rowspan="1" class="confluenceTd">假</td><td colspan="1" rowspan="1" class="confluenceTd">是否在KerberosClient中使用凭据委派。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd">ws-security.kerberos.is.username.in.servicename.form</td><td colspan="1" rowspan="1" class="confluenceTd">假</td><td colspan="1" rowspan="1" class="confluenceTd">Kerberos用户名是否采用servicename形式。</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.kerberos.client</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>不适用</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>对用于获取服务票证的<a shape="rect" class="external-link" href="http://svn.apache.org/viewvc/cxf/trunk/rt/ws/security/src/main/java/org/apache/cxf/ws/security/kerberos/KerberosClient.java?view=markup">KerberosClient</a>类的引用。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.kerberos.jaas.context</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>不适用</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于Kerberos的JAAS上下文名称。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ws-security.kerberos.spn</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>不适用</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>要使用的Kerberos服务提供者名称（spn）。</p></td></tr></tbody></table></div><h4 id="WS-SecurityPolicy-ConfiguringviaSpring">通过Spring配置</h4><p>这些属性很容易配置为客户端或端点属性-前者用于SOAP客户端，后者用于Web服务提供者。</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">&lt;beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jaxws="http://cxf.apache.org/jaxws"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
   http://cxf.apache.org/jaxws
   http://cxf.apache.org/schemas/jaxws.xsd"&gt;

   &lt;jaxws:client name="{http://cxf.apache.org}MyPortName"
      createdFromAPI="true"&gt;
      &lt;jaxws:properties&gt;
         &lt;entry key="security.callback-handler"
             value="interop.client.KeystorePasswordCallback"/&gt;
         &lt;entry key="security.signature.properties"
             value="etc/client.properties"/&gt;
         &lt;entry key="security.encryption.properties"
             value="etc/service.properties"/&gt;
         &lt;entry key="security.encryption.username"
             value="servicekeyalias"/&gt;
      &lt;/jaxws:properties&gt;
   &lt;/jaxws:client&gt;

&lt;/beans&gt;
</pre>
</div></div><p>对于上面的jaxws：client的<em>name</em>属性，请使用WSDL的名称空间以及WSDL的service部分下所需的wsdl：port元素的<em>name</em>属性。（有关示例，请参见<a shape="rect" class="external-link" href="http://tinyurl.com/yatskw4" rel="nofollow">此处</a>和<a shape="rect" class="external-link" href="http://tinyurl.com/y9e7rjf" rel="nofollow">此处</a> 。）</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">&lt;beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jaxws="http://cxf.apache.org/jaxws"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
   http://cxf.apache.org/jaxws
   http://cxf.apache.org/schemas/jaxws.xsd"&gt;

   &lt;jaxws:endpoint
      id="MyService"
      address="https://localhost:9001/MyService"
      serviceName="interop:MyService"
      endpointName="interop:MyServiceEndpoint"
      implementor="com.foo.MyService"&gt;

      &lt;jaxws:properties&gt;
         &lt;entry key="security.callback-handler"
             value="interop.client.UTPasswordCallback"/&gt;
         &lt;entry key="security.signature.properties"
             value="etc/keystore.properties"/&gt;
         &lt;entry key="security.encryption.properties"
             value="etc/truststore.properties"/&gt;
         &lt;entry key="security.encryption.username"
             value="useReqSigCert"/&gt;
      &lt;/jaxws:properties&gt;

   &lt;/jaxws:endpoint&gt;
&lt;/beans&gt;
</pre>
</div></div><p>有关使用带有X.509密钥的WS-SecurityPolicy的更多端到端示例，请参阅此<a shape="rect" class="external-link" href="http://www.jroller.com/gmazza/entry/cxf_x509_profile" rel="nofollow">博客条目</a> 。</p><h4 id="WS-SecurityPolicy-ConfiguringviaAPI's">通过API配置</h4><p>为客户端配置属性仅涉及在客户端的RequestContext中设置属性：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">Map&lt;String, Object&gt; ctx = ((BindingProvider)port).getRequestContext();
ctx.put("security.encryption.properties", properties);
port.echoString("hello");
</pre>
</div></div></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=112639">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=112639&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>