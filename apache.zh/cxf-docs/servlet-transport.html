<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - Servlet Transport">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-Servlet传输</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="index.html">索引</a> > <a href="transports.html">传输</a> > <a href="http-transport.html">HTTP传输</a> > <a href="servlet-transport.html">Servlet传输</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="ServletTransport-Settingupyourweb.xml">设置您的web.xml</h1><p>要创建使用此传输的服务，您可以使用CXF API（例如，请参阅<a shape="rect" href="developing-a-service.html">JAX-WS</a> ），也可以创建一个XML文件来为您注册服务。</p><h2 id="ServletTransport-PublishinganendpointfromXML">从XML发布端点</h2><p>CXF使用<a shape="rect" href="configuration.html">Spring</a>提供服务的XML配置。这意味着首先我们要通过Servlet侦听器加载Spring并告诉它XML配置文件在哪里：</p><p>接下来，您需要将CXFServlet添加到web.xml中：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;
&lt;web-app&gt;
  &lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;
      classpath:com/acme/ws/services.xml
    &lt;/param-value&gt;
  &lt;/context-param&gt;

  &lt;listener&gt;
    &lt;listener-class&gt;
      org.springframework.web.context.ContextLoaderListener
    &lt;/listener-class&gt;
  &lt;/listener&gt;

  &lt;servlet&gt;
    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
    &lt;display-name&gt;CXF Servlet&lt;/display-name&gt;
    &lt;servlet-class&gt;
       org.apache.cxf.transport.servlet.CXFServlet
    &lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; 
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</pre>
</div></div><p>另外，您可以使用CXFServlet init参数指向配置文件：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;
&lt;web-app&gt;

  &lt;servlet&gt;
    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
    &lt;display-name&gt;CXF Servlet&lt;/display-name&gt;
    &lt;servlet-class&gt;
        org.apache.cxf.transport.servlet.CXFServlet
    &lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;config-location&lt;/param-name&gt;
      &lt;param-value&gt;/WEB-INF/beans.xml&lt;/param-value&gt;    
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
  
&lt;/web-app&gt;
</pre>
</div></div><p>下一步是实际写入配置文件：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:jaxws="http://cxf.apache.org/jaxws"
      xmlns:jaxrs="http://cxf.apache.org/jaxrs"
      xsi:schemaLocation="
         http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
         http://cxf.apache.org/jaxws
         http://cxf.apache.org/schemas/jaxws.xsd
         http://cxf.apache.org/jaxrs
         http://cxf.apache.org/schemas/jaxrs.xsd"&gt;

  &lt;import resource="classpath:META-INF/cxf/cxf.xml"/&gt;
  &lt;import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/&gt;
  &lt;import resource="classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml"/&gt;
  &lt;import resource="classpath:META-INF/cxf/cxf-servlet.xml"/&gt;

  &lt;jaxws:endpoint id="greeter"
      implementor="org.apache.hello_soap_http.GreeterImpl"
      address="/Greeter1"/&gt;

  &lt;jaxrs:server id="greeterRest"
      serviceClass="org.apache.hello_soap_http.GreeterImpl"
      address="/GreeterRest"/&gt; 

&lt;/beans&gt;
</pre>
</div></div><p>在这里，我们基于实现类GreeterImpl创建一个JAX-WS端点。</p><p><strong>注意：</strong>我们正在发布端点“ http：// localhost / mycontext / services / Greeter1”和“ http：// localhost / mycontext / services / GreeterRest”，但是我们设置了jaxws：endpoint / @ address和jaxrs：server / @地址到相对值，例如“ / Greeter1”，“ / GreeterRest”。</p><h2 id="ServletTransport-DisablingtheServicesPage">禁用服务页面</h2><p>默认情况下，Apache CXF创建一个/ services页面，其中包含可用端点的列表。要禁用此清单，请按以下方式配置Servlet：</p><div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>禁用服务列表</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;servlet&gt;
    ....
    &lt;init-param&gt;
        &lt;param-name&gt;hide-service-list-page&lt;/param-name&gt;
        &lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/init-param&gt; 
&lt;/servlet&gt;</pre>
</div></div><p> </p><h2 id="ServletTransport-SupportforAsynchronousRequests">支持异步请求</h2><p>如果您使用Servlet3 API容器并需要支持异步请求，请启用“异步支持”的servlet属性：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;servlet&gt;
    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
    &lt;display-name&gt;CXF Servlet&lt;/display-name&gt;
    &lt;servlet-class&gt;
       org.apache.cxf.transport.servlet.CXFServlet
    &lt;/servlet-class&gt;

    &lt;!-- Enable asynchronous requests --&gt;
 
    &lt;async-supported&gt;true&lt;/async-supported&gt;

    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; 
&lt;/servlet&gt;
</pre>
</div></div><h2 id="ServletTransport-Redirectingrequestsandservingthestaticcontent">重定向请求并提供静态内容</h2><p>从CXF 2.2.5开始，可以配置CXFServlet以将当前请求重定向到其他servlet或服务静态资源。</p><p>“ redirects-list” init参数可用于提供以空格分隔的URI模式列表；如果给定的请求URI与模式之一匹配，则CXFServlet将尝试使用当前HTTP请求的pathInfo查找一个RequestDispatcher，并将请求重定向到该请求。</p><p>“ redirect-servlet-path”可用于影响RequestDispatcher查找，如果已指定，则它将与当前请求的pathInfo串联在一起。</p><p>在“重定向列表”中的URI模式之一与当前请求URI匹配之后，可以使用“ redirect-servlet-name” init参数来启用命名的RequestDispatcher查找。</p><p>“ static-resources-list” init参数可用于提供以空格分隔的静态资源列表，例如CXFServlet将直接提供服务的html，css或pdf文件。</p><p>可以将请求重定向到其他servlet或JSP页面。</p><p>服务于基于JAXWS和基于JAXRS的端点的CXFServlet可以利用此功能。</p><p>例如，请参阅此<a shape="rect" class="external-link" href="http://svn.apache.org/repos/asf/cxf/trunk/systests/jaxrs/src/test/resources/jaxrs_dispatch/WEB-INF/web.xml">web.xml</a> 。</p><p>假设“ http：// localhost：9080 / the / bookstore1 / books / html / 123”请求URI首先与CXFServlet匹配，因为它具有比RedirectCXFServlet更具体的URI模式。当前URI到达jaxrs：server端点后，该响应将由JAXRS <a shape="rect" href="http://cxf.apache.org/docs/jax-rs.html#JAX-RS-WithRequestDispatcherProvider">RequestDispatcherProvider</a>重定向到“ /book.html”地址，请参见<a shape="rect" class="external-link" href="https://git-wip-us.apache.org/repos/asf?p=cxf.git;a=blob;f=systests/jaxrs/src/test/resources/jaxrs_dispatch/WEB-INF/web.xml;h=a2212337bd6a9ed7a212b21a6826850581601121;hb=HEAD">此处的</a> “ dispatchProvider1” bean。</p><p>接下来，请求URI“ /book.html”将由RedirectCXFServlet处理。请注意，uri模式可以是正则表达式。该servlet将请求进一步重定向到能够处理“ /static/book.html”的RequestDispatcher。</p><p>最后，DefaultCXFServlet提供请求的book.html。</p><h2 id="ServletTransport-Servingwelcomepages">提供欢迎页面</h2><p>从CXF 2.5.5和2.6.2开始，可以配置CXFServlet以多种方式提供欢迎页面。</p><p>例如，假设我们有一个名为“ webapp”的Web应用程序，它的根资源为“ index.html”。为了使CXFServlet同时支持返回“ index.html”的“ / webapp”和“ /webapp/index.html”请求，同时允许所有其他请求继续进行到实际端点，可以执行以下操作。</p><p>选项1。委派给默认Servlet</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;servlet&gt;
   &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
   &lt;display-name&gt;CXF Servlet&lt;/display-name&gt;
   &lt;servlet-class&gt;
      org.apache.cxf.transport.servlet.CXFServlet
   &lt;/servlet-class&gt;
   &lt;init-param&gt;
      &lt;param-name&gt;redirects-list&lt;/param-name&gt;
      &lt;param-value&gt;
         /
         /index.html
      &lt;/param-value&gt;
   &lt;/init-param&gt;
   &lt;init-param&gt;
       &lt;param-name&gt;redirect-attributes&lt;/param-name&gt;
       &lt;param-value&gt;
         javax.servlet.include.request_uri
       &lt;/param-value&gt;
   &lt;/init-param&gt;
   &lt;init-param&gt;
       &lt;param-name&gt;redirect-servlet-name&lt;/param-name&gt;
       &lt;param-value&gt;default&lt;/param-value&gt;
   &lt;/init-param&gt;
   &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
 
&lt;servlet-mapping&gt;
   &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;welcome-file-list&gt;
   &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;
</pre>
</div></div><p>请注意，redirects-list参数具有两个用空格分隔的值“ /”和“ index.html”。可能需要为基础容器（如Jetty）设置请求属性'javax.servlet.include.request_uri'，以成功读取“ index.html”。</p><p>选项2。使用CXFServlet本身读取index.html</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">&lt;servlet&gt;
   &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
   &lt;display-name&gt;CXF Servlet&lt;/display-name&gt;
   &lt;servlet-class&gt;
      org.apache.cxf.transport.servlet.CXFServlet
   &lt;/servlet-class&gt;
   &lt;init-param&gt;
      &lt;param-name&gt;static-welcome-file&lt;/param-name&gt;
      &lt;param-value&gt;/index.html&lt;/param-value&gt;
   &lt;/init-param&gt; 
   &lt;init-param&gt;
      &lt;param-name&gt;static-resources-list&lt;/param-name&gt;
      &lt;param-value&gt;/index.html&lt;/param-value&gt;
   &lt;/init-param&gt; 
   &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
   &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre>
</div></div><h2 id="ServletTransport-PublishinganendpointwiththeAPI">使用API发布端点</h2><p>一旦在Web.xml中注册了Servlet，就应该使用CXFServlet的总线设置默认总线，以确保CXF将其用作HTTP传输。只需使用相关路径“ Greeter”发布，您的服务就会出现在您指定的地址上：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">import javax.xml.ws.Endpoint;
import org.apache.cxf.Bus;
import org.apache.cxf.BusFactory;
import org.apache.cxf.transport.servlet.CXFServlet;
.....
// cxf is the instance of the CXFServlet, you could also get 
// this instance by extending the CXFServlet
Bus bus = cxf.getBus();
BusFactory.setDefaultBus(bus); 
Endpoint.publish("/Greeter", new GreeterImpl());
</pre>
</div></div><p>您必须确保的一件事是将CXFServlet设置为侦听该路径。否则，CXFServlet将永远不会收到请求。</p><p><strong>注意：</strong></p><p>Endpoint.publish（...）是用于发布JAX-WS端点的JAX-WS API。因此，这将需要存在JAX-WS模块和API。如果您不使用JAX-WS或希望更好地控制已发布的终结点属性，则应使用对适当ServerFactory的适当调用来替换该调用。</p><p>由于CXFServlet对Web容器侦听端口和应用程序上下文路径一无所知，因此您需要指定相对路径而不是完整的http地址。</p><h2 id="ServletTransport-UsingtheservlettransportwithoutSpring">在不使用Spring的情况下使用servlet传输</h2><p>不想接触任何Spring东西的用户也可以使用CXF servlet传输发布端点。首先，您应该扩展CXFNonSpringServlet，然后覆盖方法loadBus，例如：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">import javax.xml.ws.Endpoint;
...  
  
    @Override
    public void loadBus(ServletConfig servletConfig) throws ServletException {
        super.loadBus(servletConfig);        
        
        // You could add the endpoint publish codes here
        Bus bus = cxf.getBus();
        BusFactory.setDefaultBus(bus); 
        Endpoint.publish("/Greeter", new GreeterImpl());
        
        // You can als use the simple frontend API to do this
        ServerFactoryBean factroy = new ServerFactoryBean();
        factory.setBus(bus);
        factory.setServiceClass(GreeterImpl.class);
        factory.setAddress("/Greeter");
        factory.create();              
    }
</pre>
</div></div><p>如果您将Jetty用作嵌入式servlet引擎，则可以这样发布端点：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">import javax.xml.ws.Endpoint;
...

        // Setup the system properties to use the CXFBusFactory not the SpringBusFactory
        String busFactory = 
            System.getProperty(BusFactory.BUS_FACTORY_PROPERTY_NAME);
        System.setProperty(BusFactory.BUS_FACTORY_PROPERTY_NAME, 
            "org.apache.cxf.bus.CXFBusFactory");
        try {
            // Start up the jetty embedded server
            httpServer = new Server(9000);
            ContextHandlerCollection contexts = new ContextHandlerCollection();
            httpServer.setHandler(contexts);
            
            Context root = new Context(contexts, "/", Context.SESSIONS);
            
            CXFNonSpringServlet cxf = new CXFNonSpringServlet();
            ServletHolder servlet = new ServletHolder(cxf);
            servlet.setName("soap");
            servlet.setForcedPath("soap");
            root.addServlet(servlet, "/soap/*");
            
            httpServer.start();
            
            Bus bus = cxf.getBus();
            setBus(bus);
            BusFactory.setDefaultBus(bus);
            GreeterImpl impl = new GreeterImpl();
            Endpoint.publish("/Greeter", impl);
        } catch (Exception e) {
            throw new RuntimeException(e);
        } finally {
            // clean up the system properties
            if (busFactory != null) {
                System.setProperty(BusFactory.BUS_FACTORY_PROPERTY_NAME, 
                   busFactory);
            } else {
                System.clearProperty(BusFactory.BUS_FACTORY_PROPERTY_NAME);
            }
        }
</pre>
</div></div><h2 id="ServletTransport-AccessingtheMessageContextand/orHTTPRequestandResponse">访问MessageContext和/或HTTP请求和响应</h2><p>有时，您可能想在服务实现中访问更具体的消息详细信息。一个示例可能是访问实际的请求或响应对象本身。可以使用WebServiceContext对象来完成。</p><p>首先，在服务实现中为<a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/ws/WebServiceContext.html" rel="nofollow">WebServiceContext</a>声明一个私有字段，并将其注释为资源：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">@Resource
private WebServiceContext context;
</pre>
</div></div><p>然后，在实现方法中，可以按以下方式访问MessageContext，HttpServletRequest和HttpServletResponse：</p><div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.xml.ws.handler.MessageContext;
import org.apache.cxf.transport.http.AbstractHTTPDestination;
...

MessageContext ctx = context.getMessageContext();
HttpServletRequest request = (HttpServletRequest) 
    ctx.get(AbstractHTTPDestination.HTTP_REQUEST);
HttpServletResponse response = (HttpServletResponse) 
    ctx.get(AbstractHTTPDestination.HTTP_RESPONSE);
</pre>
</div></div><p>当然，如果使用特定于传输的实体（例如HttpServletRequest和HttpServletResponse）进行防御性编程，总是一个好主意。如果更改了传输方式（例如，更改为JMS传输方式），则这些值可能为null。</p></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=46339">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=46339&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>