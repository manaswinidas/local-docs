<html ><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - LogBrowser - Configuration">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css">

<script src='/resources/highlighter/scripts/shCore.js'></script>
<script src='/resources/highlighter/scripts/shBrushJava.js'></script>
<script src='/resources/highlighter/scripts/shBrushXml.js'></script>
<script src='/resources/highlighter/scripts/shBrushPlain.js'></script>
<script>
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


    <title>Apache CXF-LogBrowser-配置</title>
  </head>
<body  onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td id="cell-0-0" colspan="2"> </td>
    <td id="cell-0-1"> </td>
    <td id="cell-0-2" colspan="2"> </td>
  </tr>
  <tr>
    <td id="cell-1-0"> </td>
    <td id="cell-1-1"> </td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight:bold;font-size:170%;color:white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="阿帕奇软件基金会"><img border="0" alt="ASF徽标" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tbody><tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs --> <a href="logbrowser.html">LogBrowser</a> > <a href="logbrowser-configuration.html">LogBrowser-配置</a> <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">下载</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">文献资料</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3"> </td>
    <td id="cell-1-4"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2"> </td>
    <td id="cell-2-1">
      <table>
        <tbody><tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">总览</a></li><li><a shape="rect" href="how-tos.html">操作方法</a></li><li><a shape="rect" href="frontends.html">前端</a></li><li><a shape="rect" href="databindings.html">数据绑定</a></li><li><a shape="rect" href="transports.html">运输工具</a></li><li><a shape="rect" href="configuration.html">组态</a></li><li><a shape="rect" href="debugging-and-logging.html">调试和记录</a></li><li><a shape="rect" href="tools.html">工具类</a></li><li><a shape="rect" href="restful-services.html">RESTful服务</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL绑定</a></li><li><a shape="rect" href="service-routing.html">服务路由</a></li><li><a shape="rect" href="dynamic-languages.html">动态语言</a></li><li><a shape="rect" href="ws-support.html">WS- *支持</a></li><li><a shape="rect" href="advanced-integration.html">进阶整合</a></li><li><a shape="rect" href="deployment.html">部署方式</a></li><li><a shape="rect" href="schemas-and-namespaces.html">模式和命名空间的使用</a></li></ul><hr><ul class="alternate"><li><p>搜索</p></li></ul><form id="cse-search-box" enctype="application/x-www-form-urlencoded" method="get" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x（Javadoc）</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF网站</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h1 id="LogBrowser-Configuration-LogBrowser">日志浏览器</h1>

<p><strong>此功能仅从2.3.0起可用，作为cxf-rt-management-web组件的一部分</strong></p>

<p>LogBrowser是日志条目查看器。它是丰富的Internet应用程序，可以嵌入您的Web应用程序中。配置您想要查看的日志条目，并在您喜欢的浏览器中查看它们。随时随地无需使用控制台。让我们简要概述一下如何在应用程序内部配置LogBrowser。</p>

<div class="confluence-information-macro confluence-information-macro-tip"><p class="title">文献资料</p><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>有关LogBrowser的更多信息，请转到<a shape="rect" href="logbrowser-software-requirements-specification.html">软件需求规范（SRS）</a>或<a shape="rect" href="logbrowser-system-architectural-design.html">系统架构设计（SAD）</a>文档。</p></div></div>

<h2 id="LogBrowser-Configuration-Screenshots">屏幕截图</h2>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-configuration.data/accessControl.png"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-configuration.data/accessControl-wrongUsernameOrPassword.png"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-configuration.data/browser.png"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-configuration.data/settings.png"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-configuration.data/settings-addEndpoint.png"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail confluence-content-image-border" src="logbrowser-configuration.data/settings-addEndpoint-emptyFields.png"></span></p>

<h2 id="LogBrowser-Configuration-ConfiguringLogBrowserapplicationincontainerwithoutSpring">在没有Spring的容器中配置LogBrowser应用程序</h2>

<h5 id="LogBrowser-Configuration-Step1">步骤1</h5>

<p>加<code>cxf-rt-management-web</code>对您的Maven项目的依赖（如果您不使用Maven作为管理工具，请省略此步骤并添加<code>cxf-rt-management-web</code>手动库）：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>pom.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: true; theme: Default" style="font-size:12px;">
&lt;project&gt;

    [...]

    &lt;dependencies&gt;

        [...]

        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;
            &lt;artifactId&gt;cxf-rt-management-web&lt;/artifactId&gt;
            &lt;version&gt;2.3.0&lt;/version&gt;
        &lt;/dependency&gt;

        [...]

    &lt;/dependencies&gt;

    [...]

&lt;/project&gt;
</pre>
</div></div>

<h5 id="LogBrowser-Configuration-Step2">第2步</h5>

<p>在您的项目中添加新课程， <code>LogBrowserApp</code> 。从下面的示例中添加内容。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>LogBrowserApp.java</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: true; theme: Default" style="font-size:12px;">
package yourpackage;

import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Set;
import javax.ws.rs.core.Application;
import javax.ws.rs.ext.Provider;

import org.apache.cxf.jaxrs.provider.AtomEntryProvider;
import org.apache.cxf.jaxrs.provider.AtomFeedProvider;
import org.apache.cxf.management.web.logging.atom.AtomPullServer;
import org.apache.cxf.management.web.logging.logbrowser.bootstrapping.BootstrapStorage;
import org.apache.cxf.management.web.logging.logbrowser.bootstrapping.SimpleAuthenticationFilter;
import org.apache.cxf.management.web.logging.logbrowser.bootstrapping.SimpleXMLSettingsStorage;

@Provider
public class LogBrowserApp extends Application {
	Set&lt;Object&gt; classes = new HashSet&lt;Object&gt;();
	
	static {
        AtomPullServer aps = new AtomPullServer();
        aps.setLoggers("yourpackage:INFO");
        aps.init();

        classes.add(aps);
        classes.add(new AtomFeedProvider());
        classes.add(new AtomEntryProvider());
        classes.add(new BootstrapStorage(new SimpleXMLSettingsStorage()));
        classes.add(new SimpleAuthenticationFilter(new HashMap&lt;String, String&gt;() {
            {
            	// add all required users by specified username and password, for example: put("admin", "admin");
            }
        }));
        classes.add(new BootstrapStorage.StaticFileProvider());
        classes.add(new BootstrapStorage.SettingsProvider());
	}
	
    @Override
    public Set&lt;Class&lt;?&gt;&gt; getClasses() {
        return Collections.emptySet();
    }

    @Override
    public Set&lt;Object&gt; getSingletons() {
        return classes;
    }
}
</pre>
</div></div>

<p>我们必须对新创建的类进行一些修改：</p>
<ul><li>转到第1行。更换<code>yourpackage</code>带有有效软件包的词组。</li><li>转到第23行。配置应捕获的日志条目。如果您想在INFO级别捕获与您的应用程序相关的所有日志条目，只需替换<code>yourpackage</code>与您的应用程序包相对应的短语。有关如何配置自定义记录器的更多信息，请转到<a shape="rect" href="jax-rs.html">AtomPullServer说明</a> 。</li><li>转到第32行。添加所有必需的用户。请记住，每个用户都有自己的独立配置。</li></ul>


<h5 id="LogBrowser-Configuration-Step3">第三步</h5>

<p>将新的servlet定义添加到您的<code>web.xml</code>文件，如以下示例所示：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>web.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: true; theme: Default" style="font-size:12px;">
&lt;web-app&gt;

	[...]
	
	&lt;servlet&gt;
		&lt;servlet-name&gt;LogBrowserApp&lt;/servlet-name&gt;
		&lt;display-name&gt;LogBrowserApp&lt;/display-name&gt;
		&lt;servlet-class&gt;
			org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;
			&lt;param-value&gt;yourpackage.LogBrowserApp&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
	&lt;/servlet&gt;

	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;LogBrowserApp&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/log/*&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	
	[...]

&lt;/web-app&gt;	
</pre>
</div></div>

<p>转到第13行并替换<code>yourpackage</code>带有有效软件包的词组。</p>

<h5 id="LogBrowser-Configuration-Step4">第四步</h5>

<p>重建并运行您的应用程序。</p>

<h5 id="LogBrowser-Configuration-Step5">第5步</h5>

<p>打开浏览器并转到URL：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">http://localhost:9002/log/bootstrapstorage/resources/LogBrowser.html</pre>
</div></div>

<h5 id="LogBrowser-Configuration-Step6">第6步</h5>

<p>使用URL添加新端点：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">http://localhost:9002/log/logs</pre>
</div></div>

<p>恭喜你现在，您可以使用LogBrowser轻松查看日志实体。</p>

<div class="confluence-information-macro confluence-information-macro-tip"><p class="title">完整样本</p><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>有关配置的更多详细信息，请转到<a shape="rect" class="external-link" href="https://svn.apache.org/repos/asf/cxf/sandbox/logbrowser/distribution/src/main/release/samples/logbrowser/">示例项目</a> 。</p></div></div>
</div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </tbody></table>
   </td>
   <td id="cell-2-2" colspan="2"> </td>
  </tr>
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=23336032">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=23336032&showComments=true&showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</tbody></table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>