<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <title>Apache HBase – Apache HBase（TM）ACID属性</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.1-HBase.min.css">
    <link rel="stylesheet" href="./css/site.css">
    <link rel="stylesheet" href="./css/print.css" media="print">
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.1-HBase.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="asset?aid=4">
      <link rel="stylesheet" href="asset?aid=5">
      <link rel="stylesheet" href="css/site.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  </head>
  <body class="topBarEnabled" >
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container">
              <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </a>
              <div class="nav-collapse">
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache HBase项目<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="总览">总览</a></li>
            <li><a href="licenses.html" title="执照">执照</a></li>
            <li><a href="http://www.apache.org/dyn/closer.cgi/hbase/" title="资料下载">资料下载</a></li>
            <li><a href="https://issues.apache.org/jira/browse/HBASE?report=com.atlassian.jira.plugin.system.project:changelog-panel#selectedTab=com.atlassian.jira.plugin.system.project%3Achangelog-panel" title="发行说明">发行说明</a></li>
            <li><a href="coc.html" title="行为守则">行为守则</a></li>
            <li><a href="http://blogs.apache.org/hbase/" title="博客">博客</a></li>
            <li><a href="mailing-lists.html" title="邮件列表">邮件列表</a></li>
            <li><a href="team.html" title="球队">球队</a></li>
            <li><a href="https://reviews.apache.org/" title="评审委员会">评审委员会</a></li>
            <li><a href="sponsors.html" title="谢谢">谢谢</a></li>
            <li><a href="poweredbyhbase.html" title="由HBase提供支持">由HBase提供支持</a></li>
            <li><a href="resources.html" title="其他资源">其他资源</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">项目信息<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="summary.html" title="项目总结">项目总结</a></li>
            <li><a href="dependency-info.html" title="依赖信息">依赖信息</a></li>
            <li><a href="scm.html" title="源存储库">源存储库</a></li>
            <li><a href="issue-management.html" title="问题跟踪">问题跟踪</a></li>
            <li><a href="dependency-management.html" title="依赖管理">依赖管理</a></li>
            <li><a href="dependencies.html" title="依存关系">依存关系</a></li>
            <li><a href="dependency-convergence.html" title="依赖收敛">依赖收敛</a></li>
            <li><a href="plugin-management.html" title="插件管理">插件管理</a></li>
            <li><a href="plugins.html" title="外挂程式">外挂程式</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">文档和API <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="book.html" title="参考指南" target="_blank">参考指南</a></li>
            <li><a href="apache_hbase_reference_guide.pdf" title="参考指南（PDF）" target="_blank">参考指南（PDF）</a></li>
            <li><a href="book.html#quickstart" title="入门" target="_blank">入门</a></li>
            <li><a href="apidocs/index.html" title="用户API" target="_blank">用户API</a></li>
            <li><a href="testapidocs/index.html" title="用户API（测试）" target="_blank">用户API（测试）</a></li>
            <li><a href="2.0/devapidocs/index.html" title="开发人员API" target="_blank">开发人员API</a></li>
            <li><a href="2.0/testdevapidocs/index.html" title="开发人员API（测试）" target="_blank">开发人员API（测试）</a></li>
            <li><a href="http://abloz.com/hbase/book.html" title="中文参考指南（单页）" target="_blank">中文参考指南（单页）</a></li>
            <li><a href="book.html#faq" title="常问问题" target="_blank">常问问题</a></li>
            <li><a href="book.html#other.info" title="影片/简报" target="_blank">影片/简报</a></li>
            <li><a href="http://wiki.apache.org/hadoop/Hbase" title="维基" target="_blank">维基</a></li>
            <li><a href="acid-semantics.html" title="酸性语义" target="_blank">酸性语义</a></li>
            <li><a href="book.html#arch.bulk.load" title="散装" target="_blank">散装</a></li>
            <li><a href="metrics.html" title="指标" target="_blank">指标</a></li>
            <li><a href="cygwin.html" title="Windows上的HBase" target="_blank">Windows上的HBase</a></li>
            <li><a href="book.html#replication" title="集群复制" target="_blank">集群复制</a></li>
            <li class="dropdown-submenu">
<a title="1.2文档" href="">1.2文档</a>
              <ul class="dropdown-menu">
                  <li><a href="1.2/apidocs/index.html" title="API" target="_blank">API</a></li>
                  <li><a href="1.2/xref/index.html" title="参考" target="_blank">参考</a></li>
                  <li><a href="1.2/book.html" title="参考指南（单页）" target="_blank">参考指南（单页）</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a title="1.1文档" href="">1.1文档</a>
              <ul class="dropdown-menu">
                  <li><a href="1.1/apidocs/index.html" title="API" target="_blank">API</a></li>
                  <li><a href="1.1/xref/index.html" title="参考" target="_blank">参考</a></li>
                  <li><a href="1.1/book.html" title="参考指南（单页）" target="_blank">参考指南（单页）</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">美国空军<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/foundation/" title="Apache软件基金会" target="_blank">Apache软件基金会</a></li>
            <li><a href="http://www.apache.org/foundation/how-it-works.html" title="Apache的工作方式" target="_blank">Apache的工作方式</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html" title="赞助Apache" target="_blank">赞助Apache</a></li>
        </ul>
      </li>
            </ul>
    <div id="search-form" class="navbar-search pull-right">
      <script type="text/javascript">
      var cx = '000385458301414556862:sq1bb0xugjg';

      (function() {
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();

      </script>
      <gcse:search></gcse:search>
  </div>
            </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><img src="" alt=""></a></div>
        <div class="pull-right"><a href="http://hbase.apache.org/" id="bannerRight"><img src="images/hbase_logo_with_orca_large.png" alt="Apache HBase"></a></div>
        <div class="clear"><hr></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        </ul>
      </div>
        <div id="bodyColumn">

  
    <div class="section">
<h2><a name="About_this_Document"></a>关于本文件</h2>
      
<p>Apache HBase（TM）不是兼容ACID的数据库。但是，它确实保证了某些特定的属性。</p>
      
<p>该规范列举了HBase的ACID属性。</p>
    </div>
    
<div class="section">
<h2><a name="Definitions"></a>定义</h2>
      
<p>为了通用词汇，我们定义以下术语：</p>
      
<dl>
        
<dt>原子性</dt>
        
<dd>如果操作完全完成或根本不完成，则它是原子操作</dd>

        
<dt>一致性</dt>
        
<dd>所有操作都会导致表从一种有效状态直接转换为另一种有效状态（例如，更新期间行不会消失，等等）</dd>

        
<dt>隔离</dt>
        
<dd>如果操作似乎独立于任何其他并发事务完成，则将隔离该操作</dd>

        
<dt>耐用性</dt>
        
<dd>向客户端报告“成功”的任何更新都不会丢失</dd>

        
<dt>能见度</dt>
        
<dd>如果任何后续读取将更新视为已提交，则认为更新是可见的</dd>
      </dl>
      
<p><i>必须</i>和<i>可以</i>按照RFC 2119的规定使用这些术语。简而言之，“必须”一词意味着，如果在某些情况下该陈述不正确，那就是一个错误。“可能”一词表示即使在当前版本中提供了保证，用户也不应依赖它。
      </p>
    </div>
    
<div class="section">
<h2><a name="APIs_to_consider"></a>需要考虑的API</h2>
      
<ul>
        
<li>读取API<ul>
          
<li>得到</li>
          
<li>扫描</li>
        </ul>
        </li>
        
<li>编写API</li>
        
<ul>
          
<li>放</li>
          
<li>分批放</li>
          
<li>删除</li>
        </ul>
        
<li>组合（读-修改-写）API</li>
        
<ul>
          
<li>crementColumnValue</li>
          
<li>checkAndPut</li>
        </ul>
      </ul>
    </div>

    
<div class="section">
<h2><a name="Guarantees_Provided"></a>提供的保证</h2>

      
<div class="section">
<h2><a name="Atomicity"></a>原子性</h2>

        
<ol style="list-style-type:decimal">
          
<li>所有突变都是连续的原子。任何认沽权将完全成功或完全失败。[3]</li>
          
<ol style="list-style-type:decimal">
            
<li>返回“成功”代码的操作已完全成功。</li>
            
<li>返回“失败”代码的操作完全失败。</li>
            
<li>超时操作可能成功，也可能失败。但是，它不会部分成功或失败。</li>
          </ol>
          
<li>即使该突变在一行中跨越多个列族也是如此。</li>
          
<li>变异多行的API不会在多行中具有原子性。例如，对行“ a”，“ b”和“ c”进行操作的多输入可能会使部分但并非全部行发生突变而返回。在这种情况下，这些API将返回成功代码列表，如上所述，每个成功代码都可能成功，失败或超时。</li>
          
<li>checkAndPut API在原子上的发生与在许多硬件体系结构中发现的典型compareAndSet（CAS）操作类似。</li>
          
<li>每一行的突变顺序都以明确定义的顺序发生，没有交错。例如，如果一个作者发布了突变“ a = 1，b = 1，c = 1”，而另一个作者发布了突变“ a = 2，b = 2，c = 2”，则该行必须为“ a = 1，b = 1，c = 1”或“ a = 2，b = 2，c = 2”，并且<i>不得</i>类似于“ a = 1，b = 2，c = 1”。</li>
          
<ol style="list-style-type:decimal">
            
<li>请注意，对于多行批量突变，这不是正确的“跨行”。</li>
          </ol>
        </ol>
      </div>
      
<div class="section">
<h2><a name="Consistency_and_Isolation"></a>一致性和隔离性</h2>
        
<ol style="list-style-type:decimal">
          
<li>通过任何访问API返回的所有行都将包含一个完整的行，该行存在于表历史记录中的某个时刻。</li>
          
<li>跨列族也是如此-即，获得与某些突变1,2,3,4,5同时发生的完整行将返回完整行，该完整行存在于某些突变i和i + 1之间的某个时间点我在1到5之间。</li>
          
<li>行的状态只会在编辑的历史记录中向前移动。</li>
        </ol>

        
<div class="section">
<h2><a name="Consistency_of_Scans"></a>扫描一致性</h2>
        
<p>扫描<b>不是</b>表的一致视图。扫描<b>不</b>显示<i>快照隔离</i> 。
        </p>
        
<p>扫描具有以下属性：</p>

        
<ol style="list-style-type:decimal">
          
<li>扫描返回的任何行都将是一致的视图（即完整行的版本在某个时间点存在）[1]</li>
          
<li>扫描将始终反映出<i>至少</i>与扫描开始时<i>一样新</i>的数据视图。这满足下面列举的可见性保证。</li>
          
<ol style="list-style-type:decimal">
            
<li>例如，如果客户端A写入数据X，然后通过边信道与客户端B通信，则客户端B启动的任何扫描都将包含至少与X一样新的数据。</li>
            
<li>扫描必须反映出在构造扫描仪之前发生的所有突变，并且可能反映出在构造扫描仪之后所犯的某些突变。</li>
            
<li>扫描必须包含<i>所有</i>在扫描之前写入的数据（除非随后对数据进行了突变，在这种情况下，它可能反映了突变）</li>
          </ol>
        </ol>
        
<p>那些熟悉关系数据库的人会将这种隔离级别识别为“读取已提交”。
        </p>
        
<p>请注意，上面列出的有关扫描程序一致性的保证是指“事务提交时间”，而不是每个单元格的“时间戳”字段。也就是说，如果在<i>t</i>时刻启动的扫描程序在构造扫描程序之前以“转发日期”时间戳进行提交，则该编辑程序可能会看到时间戳值大于<i>t的</i>编辑。
        </p>
        </div>
      </div>
      
<div class="section">
<h2><a name="Visibility"></a>能见度</h2>
        
<ol style="list-style-type:decimal">
          
<li>当客户收到针对任何突变的“成功”响应时，该突变立即对该客户及其以后通过副渠道与之通信的任何客户可见。[3]</li>
          
<li>行绝不能显示所谓的“时间旅行”属性。也就是说，如果一系列突变在一系列状态中依次移动一行，那么任何并发读取序列将返回这些状态的子序列。</li>
          
<ol style="list-style-type:decimal">
            
<li>例如，如果使用“ incrementColumnValue” API对行的单元格进行了突变，则客户端必须永远不会看到任何单元格减小的值。</li>
            
<li>无论使用哪种读取API来读取突变，都是如此。</li>
          </ol>
          
<li>已保证返回到读取操作的单元的任何版本都可以持久存储。</li>
        </ol>

      </div>
      
<div class="section">
<h2><a name="Durability"></a>耐用性</h2>
        
<ol style="list-style-type:decimal">
          
<li>所有可见数据也是持久数据。也就是说，读取将永远不会返回尚未在磁盘上持久化的数据[2]。</li>
          
<li>任何返回“成功”代码的操作（例如，不引发异常）将被设为持久性。[3]</li>
          
<li>返回“失败”代码的任何操作都不会变得持久（受上述原子性保证的约束）</li>
          
<li>所有合理的故障情况均不会影响本文档的任何保证。</li>

        </ol>
      </div>
      
<div class="section">
<h2><a name="Tunability"></a>可调整性</h2>
        
<p>以上所有保证都必须在Apache HBase中实现。对于想要权衡性能保证的用户，HBase可以提供几个调整选项。例如：</p>
        
<ul>
          
<li>可以在每次读取的基础上调整可见性，以允许过时的读取或时间旅行。</li>
          
<li>耐久性可以调整为仅定期将数据刷新到磁盘</li>
        </ul>
      </div>
    </div>
    
<div class="section">
<h2><a name="More_Information"></a>更多信息</h2>
      
<p>有关更多信息，请参阅《 Apache HBase参考指南》中的<a href="book.html#client">客户机体系结构</a>或<a href="book.html#datamodel">数据模型</a>部分。
      </p>
    </div>

    
<div class="section">
<h2><a name="Footnotes"></a>脚注</h2>
      
<p>[1]不能保证一致的视图进行行内扫描-即在一个RPC中获取行的一部分，然后返回以在后续RPC中获取行的另一部分。当您设置每个Scan＃next返回多少值的限制时，将发生行内扫描（请参见<a class="externalLink" href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html#setBatch(int)">Scan＃setBatch（int）</a> ）。
      </p>

      
<p>[2]在Apache HBase的上下文中，“持久地在磁盘上”意味着对事务日志进行hflush（）调用。这实际上并不意味着将fsync（）应用于磁性介质，而仅仅是将数据写入了日志的所有副本上的OS缓存中。在整个数据中心断电的情况下，编辑可能不是真正持久的。</p>
      
<p>[3]认沽期权将完全成功或全部失败，前提是它们实际上已发送到RegionServer。如果使用了写缓冲区，则在写缓冲区被填充或显式刷新之前，将不会发送Puts。</p>

    </div>

  

        </div>
    </div>
    <hr>
    <footer>
      <div class="container">
        <div class="row">
            <p>版权所有©2007–2019 <a href="https://www.apache.org/">Apache Software Foundation</a> 。版权所有。</p><li id="publishDate" class="pull-right">上次发布时间：2019-10-19</li>
<p></p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="由Maven建造" class="poweredBy"><img class="builtBy" alt="由Maven建造" src="./images/logos/maven-feather.png"></a>
</p>
      </div>
    </footer>
  

</body></html>