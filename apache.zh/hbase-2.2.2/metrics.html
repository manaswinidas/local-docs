<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <title>Apache HBase – Apache HBase（TM）指标</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.1-HBase.min.css">
    <link rel="stylesheet" href="./css/site.css">
    <link rel="stylesheet" href="./css/print.css" media="print">
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.1-HBase.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="asset?aid=6">
      <link rel="stylesheet" href="asset?aid=7">
      <link rel="stylesheet" href="css/site.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  </head>
  <body class="topBarEnabled" >
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container">
              <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </a>
              <div class="nav-collapse">
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache HBase项目<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="总览">总览</a></li>
            <li><a href="licenses.html" title="执照">执照</a></li>
            <li><a href="http://www.apache.org/dyn/closer.cgi/hbase/" title="资料下载">资料下载</a></li>
            <li><a href="https://issues.apache.org/jira/browse/HBASE?report=com.atlassian.jira.plugin.system.project:changelog-panel#selectedTab=com.atlassian.jira.plugin.system.project%3Achangelog-panel" title="发行说明">发行说明</a></li>
            <li><a href="coc.html" title="行为守则">行为守则</a></li>
            <li><a href="http://blogs.apache.org/hbase/" title="博客">博客</a></li>
            <li><a href="mailing-lists.html" title="邮件列表">邮件列表</a></li>
            <li><a href="team.html" title="球队">球队</a></li>
            <li><a href="https://reviews.apache.org/" title="评审委员会">评审委员会</a></li>
            <li><a href="sponsors.html" title="谢谢">谢谢</a></li>
            <li><a href="poweredbyhbase.html" title="由HBase提供支持">由HBase提供支持</a></li>
            <li><a href="resources.html" title="其他资源">其他资源</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">项目信息<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="summary.html" title="项目总结">项目总结</a></li>
            <li><a href="dependency-info.html" title="依赖信息">依赖信息</a></li>
            <li><a href="scm.html" title="源存储库">源存储库</a></li>
            <li><a href="issue-management.html" title="问题跟踪">问题跟踪</a></li>
            <li><a href="dependency-management.html" title="依赖管理">依赖管理</a></li>
            <li><a href="dependencies.html" title="依存关系">依存关系</a></li>
            <li><a href="dependency-convergence.html" title="依赖收敛">依赖收敛</a></li>
            <li><a href="plugin-management.html" title="插件管理">插件管理</a></li>
            <li><a href="plugins.html" title="外挂程式">外挂程式</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">文档和API <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="book.html" title="参考指南" target="_blank">参考指南</a></li>
            <li><a href="apache_hbase_reference_guide.pdf" title="参考指南（PDF）" target="_blank">参考指南（PDF）</a></li>
            <li><a href="book.html#quickstart" title="入门" target="_blank">入门</a></li>
            <li><a href="apidocs/index.html" title="用户API" target="_blank">用户API</a></li>
            <li><a href="testapidocs/index.html" title="用户API（测试）" target="_blank">用户API（测试）</a></li>
            <li><a href="2.0/devapidocs/index.html" title="开发人员API" target="_blank">开发人员API</a></li>
            <li><a href="2.0/testdevapidocs/index.html" title="开发人员API（测试）" target="_blank">开发人员API（测试）</a></li>
            <li><a href="http://abloz.com/hbase/book.html" title="中文参考指南（单页）" target="_blank">中文参考指南（单页）</a></li>
            <li><a href="book.html#faq" title="常问问题" target="_blank">常问问题</a></li>
            <li><a href="book.html#other.info" title="影片/简报" target="_blank">影片/简报</a></li>
            <li><a href="http://wiki.apache.org/hadoop/Hbase" title="维基" target="_blank">维基</a></li>
            <li><a href="acid-semantics.html" title="酸性语义" target="_blank">酸性语义</a></li>
            <li><a href="book.html#arch.bulk.load" title="散装" target="_blank">散装</a></li>
            <li><a href="metrics.html" title="指标" target="_blank">指标</a></li>
            <li><a href="cygwin.html" title="Windows上的HBase" target="_blank">Windows上的HBase</a></li>
            <li><a href="book.html#replication" title="集群复制" target="_blank">集群复制</a></li>
            <li class="dropdown-submenu">
<a title="1.2文档" href="">1.2文档</a>
              <ul class="dropdown-menu">
                  <li><a href="1.2/apidocs/index.html" title="API" target="_blank">API</a></li>
                  <li><a href="1.2/xref/index.html" title="参考" target="_blank">参考</a></li>
                  <li><a href="1.2/book.html" title="参考指南（单页）" target="_blank">参考指南（单页）</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a title="1.1文档" href="">1.1文档</a>
              <ul class="dropdown-menu">
                  <li><a href="1.1/apidocs/index.html" title="API" target="_blank">API</a></li>
                  <li><a href="1.1/xref/index.html" title="参考" target="_blank">参考</a></li>
                  <li><a href="1.1/book.html" title="参考指南（单页）" target="_blank">参考指南（单页）</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">美国空军<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="http://www.apache.org/foundation/" title="Apache软件基金会" target="_blank">Apache软件基金会</a></li>
            <li><a href="http://www.apache.org/foundation/how-it-works.html" title="Apache的工作方式" target="_blank">Apache的工作方式</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html" title="赞助Apache" target="_blank">赞助Apache</a></li>
        </ul>
      </li>
            </ul>
    <div id="search-form" class="navbar-search pull-right">
      <script type="text/javascript">
      var cx = '000385458301414556862:sq1bb0xugjg';

      (function() {
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();

      </script>
      <gcse:search></gcse:search>
  </div>
            </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><img src="" alt=""></a></div>
        <div class="pull-right"><a href="http://hbase.apache.org/" id="bannerRight"><img src="images/hbase_logo_with_orca_large.png" alt="Apache HBase"></a></div>
        <div class="clear"><hr></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        </ul>
      </div>
        <div id="bodyColumn">

  
    <div class="section">
<h2><a name="Introduction"></a>介绍</h2>
      
<p>Apache HBase（TM）发出Hadoop <a class="externalLink" href="http://hadoop.apache.org/core/docs/current/api/org/apache/hadoop/metrics/package-summary.html">指标</a> 。
      </p>
      </div>
      
<div class="section">
<h2><a name="Setup"></a>设定</h2>
      
<p>首先阅读Hadoop <a class="externalLink" href="http://hadoop.apache.org/core/docs/current/api/org/apache/hadoop/metrics/package-summary.html">指标</a> 。如果您正在使用神经节，则可以阅读<a class="externalLink" href="http://wiki.apache.org/hadoop/GangliaMetrics">GangliaMetrics</a> Wiki页面。</p>
      
<p>要使HBase发出度量标准，请编辑<tt>$ HBASE_HOME / conf / hadoop-metrics.properties</tt>并为每个插件启用度量标准“上下文”。在撰写本文时，hadoop支持<b>文件</b>和<b>神经节</b>插件。是的，hbase指标文件被命名为hadoop-metrics而不是<i>hbase-metrics，</i>因为当前至少hadoop metrics系统具有属性文件名硬编码。根据指标<i>上下文</i> ，注释掉NullContext并启用一个或多个插件。
      </p>
      
<p>如果启用<i>hbase</i>上下文，则在区域服务器上您将看到自上次度量标准发出以来的总请求数，区域和存储文件的数量以及内存存储大小的数量。在主服务器上，您将看到集群请求的计数。
      </p>
      
<p>如果您有兴趣查看每个hbase rpc方法调用的指标（计数和花费的时间），则启用<i>rpc</i>上下文是很好的。
      </p>
      
<p><i>jvm</i>上下文对于正在运行的hbase <i>jvm</i>的长期统计信息（包括已使用的内存，线程数等）很有用。在撰写本文时，如果有多个jvm正在运行发出指标，至少在神经节中，这些统计信息是聚合而不是每个实例报告。
      </p>
    </div>

    
<div class="section">
<h2><a name="Using_with_JMX"></a>与JMX一起使用</h2>
      
<p>除了Hadoop度量标准软件包支持的标准输出上下文外，您还可以通过Java管理扩展（JMX）导出HBase度量标准。这将允许在JConsole或任何其他JMX客户端中查看HBase统计信息。
      </p>
      
<div class="section">
<h2><a name="Enable_HBase_stats_collection"></a>启用HBase统计信息收集</h2>
      
<p>要在HBase中启用JMX支持，请首先编辑<tt>$ HBASE_HOME / conf / hadoop-metrics.properties</tt>以支持指标刷新。（如果您运行的是0.94.1及更高版本，或者已经为另一个输出上下文配置了<tt>hadoop-metrics.properties</tt> ，则可以跳过此步骤）。
      </p>
      
<div class="source"><pre class="prettyprint">
# Configuration of the &quot;hbase&quot; context for null
hbase.class=org.apache.hadoop.metrics.spi.NullContextWithUpdateThread
hbase.period=60

# Configuration of the &quot;jvm&quot; context for null
jvm.class=org.apache.hadoop.metrics.spi.NullContextWithUpdateThread
jvm.period=60

# Configuration of the &quot;rpc&quot; context for null
rpc.class=org.apache.hadoop.metrics.spi.NullContextWithUpdateThread
rpc.period=60
      </pre></div>
      </div>
      
<div class="section">
<h2><a name="Setup_JMX_remote_access"></a>设置JMX远程访问</h2>
      
<p>对于远程访问，您将需要配置JMX远程密码和访问配置文件。创建文件：</p>
      
<dl>
        
<dt><tt>$ HBASE_HOME / conf / jmxremote.passwd</tt> （将权限设置为600）</dt>
        
<dd>
        
<div class="source"><pre class="prettyprint">
monitorRole monitorpass
controlRole controlpass
        </pre></div>
        </dd>

        
<dt><tt>$ HBASE_HOME / conf / jmxremote.access</tt></dt>
        
<dd>
        
<div class="source"><pre class="prettyprint">
monitorRole readonly
controlRole readwrite
        </pre></div>
        </dd>
      </dl>
      </div>
      
<div class="section">
<h2><a name="Configure_JMX_in_HBase_startup"></a>在HBase启动中配置JMX</h2>
      
<p>最后，编辑<tt>$ HBASE_HOME / conf / hbase-env.sh</tt>脚本以添加JMX支持：</p>
      
<dl>
        
<dt><tt>$ HBASE_HOME / conf / hbase-env.sh</tt></dt>
        
<dd>
        
<p>添加行：</p>
        
<div class="source"><pre class="prettyprint">
HBASE_JMX_OPTS=&quot;-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.ssl=false&quot;
HBASE_JMX_OPTS=&quot;$HBASE_JMX_OPTS -Dcom.sun.management.jmxremote.password.file=$HBASE_HOME/conf/jmxremote.passwd&quot;
HBASE_JMX_OPTS=&quot;$HBASE_JMX_OPTS -Dcom.sun.management.jmxremote.access.file=$HBASE_HOME/conf/jmxremote.access&quot;

export HBASE_MASTER_OPTS=&quot;$HBASE_JMX_OPTS -Dcom.sun.management.jmxremote.port=10101&quot;
export HBASE_REGIONSERVER_OPTS=&quot;$HBASE_JMX_OPTS -Dcom.sun.management.jmxremote.port=10102&quot;
        </pre></div>
        </dd>
      </dl>
      
<p>重新启动您要监视的进程之后，您现在应该可以运行JConsole（自JDK 5.0起包含在JDK中）以通过JMX查看统计信息。HBase MBean在JMX的<b><tt>hadoop</tt></b>域下导出。</p>
      </div>
      
<div class="section">
<h2><a name="Understanding_HBase_Metrics"></a>了解HBase指标</h2>
      
<p>有关了解HBase指标的更多信息，请参阅《 Apache HBase参考指南》中的“ <a href="book.html#hbase_metrics">指标”部分</a> 。
      </p>
      </div>
    </div>
  

        </div>
    </div>
    <hr>
    <footer>
      <div class="container">
        <div class="row">
            <p>版权所有©2007–2019 <a href="https://www.apache.org/">Apache Software Foundation</a> 。版权所有。</p><li id="publishDate" class="pull-right">上次发布时间：2019-10-19</li>
<p></p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="由Maven建造" class="poweredBy"><img class="builtBy" alt="由Maven建造" src="./images/logos/maven-feather.png"></a>
</p>
      </div>
    </footer>
  

</body></html>