<html lang="zh-Hans" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="./images/docs-stylesheet.css" rel="stylesheet" type="text/css"><title>Apache Tomcat 9（9.0.21）-虚拟主机和Tomcat</title><script type="application/javascript" data-comments-identifier="tomcat-9.0-doc/virtual-hosting-howto">
    "use strict"; // Enable strict mode

    (function() {
      var thisScript = document.currentScript;
      if (!thisScript) { // Workaround for IE <= 11
        var scripts = document.getElementsByTagName("script");
        thisScript = scripts[scripts.length - 1];
      }
      document.addEventListener("DOMContentLoaded", (function() {
        var commentsDiv = document.getElementById("comments_thread");
        var commentsShortname = "tomcat";
        var commentsIdentifier = "https://tomcat.apache.org/" +
          thisScript.getAttribute("data-comments-identifier") + ".html";

        (function(w, d) {
          if (w.location.hostname.toLowerCase() == "tomcat.apache.org") {
            var s = d.createElement("script");
            s.type = "application/javascript";
            s.async = true;
            s.src = "https://comments.apache.org/show_comments.lua?site=" +
              encodeURIComponent(commentsShortname) +
              "&page=" + encodeURIComponent(commentsIdentifier);
            d.head.appendChild(s);
          } else {
            commentsDiv.appendChild(d.createTextNode("Comments are disabled for this page at the moment."));
          }
        })(window, document);
      }), false);
    })();
  </script></head><body ><div id="wrapper"><header><div id="header"><div><div><div class="logo noPrint"><a href="https://tomcat.apache.org/"><img alt="Tomcat主页" src="./images/tomcat.png"></a></div><div style="height:1px"></div><div class="asfLogo noPrint"><a href="https://www.apache.org/" target="_blank"><img src="./images/asf-logo.svg" alt="Apache软件基金会" style="width:266px;height:83px"></a></div><h1>Apache Tomcat 9</h1><div class="versionInfo">版本9.0.21， <time datetime="2019-06-04"> 2019年6月4日</time></div><div style="height:1px"></div><div style="clear:left"></div></div></div></div></header><div id="middle"><div><div id="mainLeft" class="noprint"><div><nav><div><h2>链接</h2><ul><li><a href="index.html">文件首页</a></li><li><a href="https://wiki.apache.org/tomcat/FAQ">常问问题</a></li><li><a href="#comments_section">用户评论</a></li></ul></div><div><h2>用户指南</h2><ul><li><a href="introduction.html">1）简介</a></li><li><a href="setup.html">2）设定</a></li><li><a href="appdev/index.html">3）第一个webapp</a></li><li><a href="deployer-howto.html">4）部署者</a></li><li><a href="manager-howto.html">5）经理</a></li><li><a href="host-manager-howto.html">6）主机管理员</a></li><li><a href="realm-howto.html">7）领域和AAA</a></li><li><a href="security-manager-howto.html">8）安全经理</a></li><li><a href="jndi-resources-howto.html">9）JNDI资源</a></li><li><a href="jndi-datasource-examples-howto.html">10）JDBC数据源</a></li><li><a href="class-loader-howto.html">11）类加载</a></li><li><a href="jasper-howto.html">12）JSP</a></li><li><a href="ssl-howto.html">13）SSL / TLS</a></li><li><a href="ssi-howto.html">14）SSI</a></li><li><a href="cgi-howto.html">15）CGI</a></li><li><a href="proxy-howto.html">16）代理支持</a></li><li><a href="mbeans-descriptors-howto.html">17）MBean描述符</a></li><li><a href="default-servlet.html">18）默认Servlet</a></li><li><a href="cluster-howto.html">19）聚类</a></li><li><a href="balancer-howto.html">20）负载均衡器</a></li><li><a href="connectors.html">21）连接器</a></li><li><a href="monitoring.html">22）监控与管理</a></li><li><a href="logging.html">23）记录</a></li><li><a href="apr.html">24）APR /本地</a></li><li><a href="virtual-hosting-howto.html">25）虚拟主机</a></li><li><a href="aio.html">26）高级IO</a></li><li><a href="extras.html">27）附加组件</a></li><li><a href="maven-jars.html">28）行刑</a></li><li><a href="security-howto.html">29）安全注意事项</a></li><li><a href="windows-service-howto.html">30）Windows服务</a></li><li><a href="windows-auth-howto.html">31）Windows身份验证</a></li><li><a href="jdbc-pool.html">32）Tomcat的JDBC池</a></li><li><a href="web-socket-howto.html">33）WebSocket</a></li><li><a href="rewrite.html">34）改写</a></li></ul></div><div><h2>参考</h2><ul><li><a href="RELEASE-NOTES.txt">发行说明</a></li><li><a href="config/index.html">组态</a></li><li><a href="api/index.html">Tomcat Java文档</a></li><li><a href="servletapi/index.html">Servlet Java文档</a></li><li><a href="jspapi/index.html">JSP 2.3 Java文档</a></li><li><a href="elapi/index.html">EL 3.0 Java文档</a></li><li><a href="websocketapi/index.html">WebSocket 1.1 Java文档</a></li><li><a href="https://tomcat.apache.org/connectors-doc/">JK 1.2文档</a></li></ul></div><div><h2>Apache Tomcat开发</h2><ul><li><a href="building.html">建造</a></li><li><a href="changelog.html">变更日志</a></li><li><a href="https://wiki.apache.org/tomcat/TomcatVersions">状态</a></li><li><a href="developers.html">开发者</a></li><li><a href="architecture/index.html">建筑</a></li><li><a href="funcspecs/index.html">功能规格。</a></li><li><a href="tribes/introduction.html">部族</a></li></ul></div></nav></div></div><div id="mainRight"><div id="content"><h2>虚拟主机和Tomcat</h2><h3 id="Table_of_Contents">目录</h3><div class="text">
<ul><li><a href="#Assumptions">假设条件</a></li><li><a href="#server.xml">server.xml</a></li><li><a href="#Webapps_Directory">Webapps目录</a></li><li><a href="#Configuring_Your_Contexts">配置上下文</a><ol><li><a href="#General">一般</a></li><li><a href="#context.xml_-_approach__1">context.xml-方法＃1</a></li><li><a href="#context.xml_-_approach__2">context.xml-方法2</a></li><li><a href="#Defaults_per_host">每个主机的默认值</a></li><li><a href="#Further_Information">更多信息</a></li></ol></li></ul>
</div><h3 id="Assumptions">假设条件</h3><div class="text">
    <p>为了这个方法，假设您有一个包含两个主机名的开发主机， <code>ren</code>和<code>stimpy</code> 。我们还假设一个Tomcat实例正在运行，因此<code>$CATALINA_HOME</code>指的是安装在任何地方的<code>/usr/local/tomcat</code> 。
    </p>
    <p>另外，本操作方法使用Unix风格的路径分隔符和命令；如果您在Windows上，请进行相应的修改。
    </p>
  </div><h3 id="server.xml">server.xml</h3><div class="text">
    <p>在最简单的，编辑<a href="config/engine.html">引擎</a>的部分你<code>server.xml</code>文件看起来像这样：</p>
    <div class="codeBox"><pre><code>&lt;Engine name="Catalina" defaultHost="ren"&gt;
    &lt;Host name="ren"    appBase="renapps"/&gt;
    &lt;Host name="stimpy" appBase="stimpyapps"/&gt;
&lt;/Engine&gt;</code></pre></div>
    <p>请注意，每个主机在appBase下的目录结构不应相互重叠。
    </p>
    <p>有关<a href="config/engine.html">引擎</a>和<a href="config/host.html">主机</a>元素的其他属性，请查阅配置文档。
    </p>
  </div><h3 id="Webapps_Directory">Webapps目录</h3><div class="text">
    <p>为每个虚拟主机创建目录：</p>
    <div class="codeBox"><pre><code>mkdir $CATALINA_HOME/renapps
mkdir $CATALINA_HOME/stimpyapps</code></pre></div>
  </div><h3 id="Configuring_Your_Contexts">配置上下文</h3><div class="text">
    <div class="subsection"><h4 id="General">一般</h4><div class="text">
      <p>上下文通常位于appBase目录下。例如，部署<code>foobar</code>上下文作为战争文件<code>ren</code>主机，使用<code>$CATALINA_HOME/renapps/foobar.war</code> 。请注意，默认或ROOT上下文<code>ren</code>将部署为<code>$CATALINA_HOME/renapps/ROOT.war</code> （战争）或<code>$CATALINA_HOME/renapps/ROOT</code> （目录）。
      </p>
      <p><strong>注意： <code>docBase</code>因为上下文永远不应该与<code>appBase</code>为主机。</strong>
      </p>
    </div></div>
    <div class="subsection"><h4 id="context.xml_-_approach__1">context.xml-方法＃1</h4><div class="text">
      <p>在您的上下文中，创建一个<code>META-INF</code>目录，然后将您的上下文定义放在一个名为的文件中<code>context.xml</code> 。即<code>$CATALINA_HOME/renapps/ROOT/META-INF/context.xml</code>这使部署更加容易，尤其是在分发WAR文件时。
      </p>
    </div></div>
    <div class="subsection"><h4 id="context.xml_-_approach__2">context.xml-方法2</h4><div class="text">
      <p>在下面创建一个结构<code>$CATALINA_HOME/conf/Catalina</code>对应于您的虚拟主机，例如：</p>
      <div class="codeBox"><pre><code>mkdir $CATALINA_HOME/conf/Catalina/ren
mkdir $CATALINA_HOME/conf/Catalina/stimpy</code></pre></div>
      <p>请注意，结尾目录名称“ Catalina”代表<code>name</code> <a href="config/engine.html">引擎</a>元素的属性，如上所示。
      </p>
      <p>现在，对于您的默认Web应用程序，添加：</p>
      <div class="codeBox"><pre><code>$CATALINA_HOME/conf/Catalina/ren/ROOT.xml
$CATALINA_HOME/conf/Catalina/stimpy/ROOT.xml</code></pre></div>
      <p>如果要为每个主机使用Tomcat管理器Webapp，则还需要在此处添加它：</p>
      <div class="codeBox"><pre><code>cd $CATALINA_HOME/conf/Catalina
cp localhost/manager.xml ren/
cp localhost/manager.xml stimpy/</code></pre></div>
    </div></div>
    <div class="subsection"><h4 id="Defaults_per_host">每个主机的默认值</h4><div class="text">
      <p>您可以覆盖在中找到的默认值<code>conf/context.xml</code>和<code>conf/web.xml</code>通过在名为的文件中指定新值<code>context.xml.default</code>和<code>web.xml.default</code>从主机特定的xml目录中。</p>
      <p>按照前面的示例，您可以使用<code>$CATALINA_HOME/conf/Catalina/ren/web.xml.default</code>为名为的虚拟主机中部署的所有Web应用程序自定义默认设置<code>ren</code> 。
      </p>
    </div></div>
    <div class="subsection"><h4 id="Further_Information">更多信息</h4><div class="text">
      <p>有关<a href="config/context.html">Context</a>元素的其他属性，请查阅配置文档。
      </p>
    </div></div>
  </div><div class="noprint"><h3 id="comments_section">评论</h3><div class="text"><p class="notice"><strong>注意：</strong>此注释部分收集有关改进Apache Tomcat文档的建议。<br><br>如果您遇到问题并需要帮助，请阅读“ <a href="https://tomcat.apache.org/findhelp.html">查找帮助”</a>页面，然后在tomcat-users <a href="https://tomcat.apache.org/lists.html">邮件列表中</a>询问您的问题。不要在这里问这样的问题。这不是“问答”部分。<br><br><a href="./comments.html">这里</a>解释<a href="./comments.html">了</a> Apache Comments System。如果评论已被实施或被认为无效/偏离主题，则我们的主持人可能会将其删除。
                  </p><div id="comments_thread"></div></div></div></div></div></div></div><footer><div id="footer">版权所有©1999-2019，Apache软件基金会</div></footer></div></body></html>