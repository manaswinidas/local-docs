<html lang="zh-Hans" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="./images/docs-stylesheet.css" rel="stylesheet" type="text/css"><title>Apache Tomcat 9（9.0.21）-主机管理器应用-文本界面</title><script type="application/javascript" data-comments-identifier="tomcat-9.0-doc/host-manager-howto">
    "use strict"; // Enable strict mode

    (function() {
      var thisScript = document.currentScript;
      if (!thisScript) { // Workaround for IE <= 11
        var scripts = document.getElementsByTagName("script");
        thisScript = scripts[scripts.length - 1];
      }
      document.addEventListener("DOMContentLoaded", (function() {
        var commentsDiv = document.getElementById("comments_thread");
        var commentsShortname = "tomcat";
        var commentsIdentifier = "https://tomcat.apache.org/" +
          thisScript.getAttribute("data-comments-identifier") + ".html";

        (function(w, d) {
          if (w.location.hostname.toLowerCase() == "tomcat.apache.org") {
            var s = d.createElement("script");
            s.type = "application/javascript";
            s.async = true;
            s.src = "https://comments.apache.org/show_comments.lua?site=" +
              encodeURIComponent(commentsShortname) +
              "&page=" + encodeURIComponent(commentsIdentifier);
            d.head.appendChild(s);
          } else {
            commentsDiv.appendChild(d.createTextNode("Comments are disabled for this page at the moment."));
          }
        })(window, document);
      }), false);
    })();
  </script></head><body ><div id="wrapper"><header><div id="header"><div><div><div class="logo noPrint"><a href="https://tomcat.apache.org/"><img alt="Tomcat主页" src="./images/tomcat.png"></a></div><div style="height:1px"></div><div class="asfLogo noPrint"><a href="https://www.apache.org/" target="_blank"><img src="./images/asf-logo.svg" alt="Apache软件基金会" style="width:266px;height:83px"></a></div><h1>Apache Tomcat 9</h1><div class="versionInfo">版本9.0.21， <time datetime="2019-06-04"> 2019年6月4日</time></div><div style="height:1px"></div><div style="clear:left"></div></div></div></div></header><div id="middle"><div><div id="mainLeft" class="noprint"><div><nav><div><h2>链接</h2><ul><li><a href="index.html">文件首页</a></li><li><a href="https://wiki.apache.org/tomcat/FAQ">常问问题</a></li><li><a href="#comments_section">用户评论</a></li></ul></div><div><h2>用户指南</h2><ul><li><a href="introduction.html">1）简介</a></li><li><a href="setup.html">2）设定</a></li><li><a href="appdev/index.html">3）第一个webapp</a></li><li><a href="deployer-howto.html">4）部署者</a></li><li><a href="manager-howto.html">5）经理</a></li><li><a href="host-manager-howto.html">6）主机管理员</a></li><li><a href="realm-howto.html">7）领域和AAA</a></li><li><a href="security-manager-howto.html">8）安全经理</a></li><li><a href="jndi-resources-howto.html">9）JNDI资源</a></li><li><a href="jndi-datasource-examples-howto.html">10）JDBC数据源</a></li><li><a href="class-loader-howto.html">11）类加载</a></li><li><a href="jasper-howto.html">12）JSP</a></li><li><a href="ssl-howto.html">13）SSL / TLS</a></li><li><a href="ssi-howto.html">14）SSI</a></li><li><a href="cgi-howto.html">15）CGI</a></li><li><a href="proxy-howto.html">16）代理支持</a></li><li><a href="mbeans-descriptors-howto.html">17）MBean描述符</a></li><li><a href="default-servlet.html">18）默认Servlet</a></li><li><a href="cluster-howto.html">19）聚类</a></li><li><a href="balancer-howto.html">20）负载均衡器</a></li><li><a href="connectors.html">21）连接器</a></li><li><a href="monitoring.html">22）监控与管理</a></li><li><a href="logging.html">23）记录</a></li><li><a href="apr.html">24）APR /本地</a></li><li><a href="virtual-hosting-howto.html">25）虚拟主机</a></li><li><a href="aio.html">26）高级IO</a></li><li><a href="extras.html">27）附加组件</a></li><li><a href="maven-jars.html">28）行刑</a></li><li><a href="security-howto.html">29）安全注意事项</a></li><li><a href="windows-service-howto.html">30）Windows服务</a></li><li><a href="windows-auth-howto.html">31）Windows身份验证</a></li><li><a href="jdbc-pool.html">32）Tomcat的JDBC池</a></li><li><a href="web-socket-howto.html">33）WebSocket</a></li><li><a href="rewrite.html">34）改写</a></li></ul></div><div><h2>参考</h2><ul><li><a href="RELEASE-NOTES.txt">发行说明</a></li><li><a href="config/index.html">组态</a></li><li><a href="api/index.html">Tomcat Java文档</a></li><li><a href="servletapi/index.html">Servlet Java文档</a></li><li><a href="jspapi/index.html">JSP 2.3 Java文档</a></li><li><a href="elapi/index.html">EL 3.0 Java文档</a></li><li><a href="websocketapi/index.html">WebSocket 1.1 Java文档</a></li><li><a href="https://tomcat.apache.org/connectors-doc/">JK 1.2文档</a></li></ul></div><div><h2>Apache Tomcat开发</h2><ul><li><a href="building.html">建造</a></li><li><a href="changelog.html">变更日志</a></li><li><a href="https://wiki.apache.org/tomcat/TomcatVersions">状态</a></li><li><a href="developers.html">开发者</a></li><li><a href="architecture/index.html">建筑</a></li><li><a href="funcspecs/index.html">功能规格。</a></li><li><a href="tribes/introduction.html">部族</a></li></ul></div></nav></div></div><div id="mainRight"><div id="content"><h2>主机管理器应用程序-文本界面</h2><h3 id="Table_of_Contents">目录</h3><div class="text">
  <ul><li><a href="#Introduction">介绍</a></li><li><a href="#Configuring_Manager_Application_Access">配置Manager应用程序访问</a></li><li><a href="#List_of_Commands">命令清单</a><ol><li><a href="#List_command">清单命令</a></li><li><a href="#Add_command">添加命令</a></li><li><a href="#Remove_command">删除命令</a></li><li><a href="#Start_command">启动命令</a></li><li><a href="#Stop_command">停止指令</a></li><li><a href="#Persist_command">坚持命令</a></li></ol></li></ul>
</div><h3 id="Introduction">介绍</h3><div class="text">
  <p><strong>Tomcat Host Manager</strong>应用程序使您可以在Tomcat中创建，删除和管理虚拟主机。最佳做法是此指南随附以下文档：</p>
  <ul>
    <li>
      <a href="virtual-hosting-howto.html">虚拟主机操作方法，以</a>获取有关虚拟主机的更多信息。
    </li>
    <li>
      <a href="config/host.html">主机容器</a> ，以获取有关虚拟主机的基础xml配置和属性描述的更多信息。
    </li>
  </ul>

  <p><strong>Tomcat Host Manager</strong>应用程序是Tomcat安装的一部分，默认情况下可使用以下上下文使用： <code>/host-manager</code> 。您可以通过以下方式使用主机管理器：</p>

  <ul>
    <li>利用图形用户界面，可从以下位置访问： <code>{server}:{port}/host-manager/html</code> 。
    </li>
    <li>使用一组适合脚本编写的最小HTTP请求。您可以通过以下方式访问此模式： <code>{server}:{port}/host-manager/text</code> 。
    </li>
  </ul>
  <p>两种方式都可以使您添加，删除，启动和停止虚拟主机。可以通过使用<code>persist</code>命令。本文档重点介绍文本界面。有关图形界面的更多信息，请参阅<a href="html-host-manager-howto.html">Host Manager App-HTML Interface</a> 。
  </p>
</div><h3 id="Configuring_Manager_Application_Access">配置Manager应用程序访问</h3><div class="text">
  <p><em>以下说明使用<code>$CATALINA_HOME</code>引用基本的Tomcat目录。例如，它是安装Tomcat的目录。 <code>C:/tomcat9</code> ， 要么<code>/usr/share/tomcat9</code> 。</em></p>

  <p>主机管理器应用程序要求用户具有以下角色之一：</p>

  <ul>
    <li>
      <code>admin-gui</code> -将此角色用于图形Web界面。
    </li>
    <li>
      <code>admin-script</code> -在脚本Web界面中使用此角色。
    </li>
  </ul>

  <p>要允许访问主机管理器应用程序的文本界面，请为Tomcat用户授予适当的角色，或者创建一个具有正确角色的新角色。例如打开<code>${CATALINA_BASE}/conf/tomcat-users.xml</code>并输入以下内容：</p>
  <div class="codeBox"><pre><code>&lt;user username="test" password="chang3m3N#w" roles="admin-script"/&gt;</code></pre></div>
  <p>无需其他设置。现在访问<code>{server}:{port}/host-manager/text/${COMMAND}</code> ，您就可以使用创建的凭据登录。例如：</p><div class="codeBox"><pre><code>$ curl -u ${USERNAME}:${PASSWORD} http://localhost:8080/host-manager/text/list
OK - Listed hosts
localhost:</code></pre></div>
  <p></p>
  <p>请注意，如果您使用<code>DataSourceRealm</code> ， <code>JDBCRealm</code> ， 要么<code>JNDIRealm</code>机制，分别在数据库或目录服务器中添加适当的角色。
  </p>
</div><h3 id="List_of_Commands">命令清单</h3><div class="text">
  <p>支持以下命令：</p>
  <ul>
    <li>清单</li>
    <li>加</li>
    <li>去掉</li>
    <li>开始</li>
    <li>停</li>
    <li>坚持</li>
  </ul>
  <p>在以下小节中，假定用户名和密码为<b>test：test</b> 。对于您的环境，请使用前面几节中创建的凭据。
  </p>
  <div class="subsection"><h4 id="List_command">清单命令</h4><div class="text">
    <p>使用<b>list</b>命令查看Tomcat实例上的可用虚拟主机。
    </p>
    <p><i>示例命令</i> ：</p>
    <code>curl -u test:test http://localhost:8080/host-manager/text/list</code>
    <p><i>响应示例</i> ：</p>
    <div class="codeBox"><pre><code>OK - Listed hosts
localhost:</code></pre></div>
  </div></div>
  <div class="subsection"><h4 id="Add_command">添加命令</h4><div class="text">
    <p>使用<b>add</b>命令添加新的虚拟主机。用于<b>add</b>命令的参数：</p>
    <ul>
      <li>字符串<b>名称</b> ：虚拟主机的名称。<b>需要</b></li>
      <li>字符串<b>别名</b> ：虚拟主机的别名。</li>
      <li>字符串<b>appBase</b> ：此虚拟主机将服务的应用程序的基本路径。提供相对或绝对路径。</li>
      <li>布尔值<b>管理器</b> ：如果为true，则将Manager应用程序添加到虚拟主机。您可以使用<i>/ manager</i>上下文访问它。</li>
      <li>布尔值<b>autoDeploy</b> ：如果为true，则Tomcat自动重新部署放置在appBase目录中的应用程序。</li>
      <li>布尔值<b>deployOnStartup</b> ：如果为true，则Tomcat在启动时会自动部署放置在appBase目录中的应用程序。</li>
      <li>布尔值<b>deployXML</b> ：如果为true，则将读取<i>/META-INF/context.xml</i>文件并由Tomcat使用。</li>
      <li>布尔值<b>copyXML</b> ：如果为true，则Tomcat复制<i>/META-INF/context.xml</i>文件并使用原始副本，而不管应用程序的<i>/META-INF/context.xml</i>文件是否更新。</li>
    </ul>
    <p><i>示例命令</i> ：</p>
    <div class="codeBox"><pre><code>curl -u test:test http://localhost:8080/host-manager/text/add?name=www.awesomeserver.com&amp;aliases=awesomeserver.com&amp;appBase/mnt/appDir&amp;deployOnStartup=true</code></pre></div>
    <p><i>响应示例</i> ：</p>
    <div class="codeBox"><pre><code>add: Adding host [www.awesomeserver.com]</code></pre></div>
  </div></div>
  <div class="subsection"><h4 id="Remove_command">删除命令</h4><div class="text">
    <p>使用<b>remove</b>命令删除虚拟主机。用于<b>remove</b>命令的参数：</p>
    <ul>
      <li>字符串<b>名称</b> ：要删除的虚拟主机的名称。
      <b>需要</b></li>
    </ul>
    <p><i>示例命令</i> ：</p>
    <div class="codeBox"><pre><code>curl -u test:test http://localhost:8080/host-manager/text/remove?name=www.awesomeserver.com</code></pre></div>
    <p><i>响应示例</i> ：</p>
    <div class="codeBox"><pre><code>remove: Removing host [www.awesomeserver.com]</code></pre></div>
  </div></div>
  <div class="subsection"><h4 id="Start_command">启动命令</h4><div class="text">
    <p>使用<b>start</b>命令启动虚拟主机。用于<b>启动</b>命令的参数：</p>
    <ul>
      <li>字符串<b>名称</b> ：要启动的虚拟主机的名称。
      <b>需要</b></li>
    </ul>
    <p><i>示例命令</i> ：</p>
    <div class="codeBox"><pre><code>curl -u test:test http://localhost:8080/host-manager/text/start?name=www.awesomeserver.com</code></pre></div>
    <p><i>响应示例</i> ：</p>
    <div class="codeBox"><pre><code>OK - Host www.awesomeserver.com started</code></pre></div>
  </div></div>
  <div class="subsection"><h4 id="Stop_command">停止指令</h4><div class="text">
    <p>使用<b>stop</b>命令停止虚拟主机。用于<b>stop</b>命令的参数：</p>
    <ul>
      <li>字符串<b>名称</b> ：要停止的虚拟主机的名称。
      <b>需要</b></li>
    </ul>
    <p><i>示例命令</i> ：</p>
    <div class="codeBox"><pre><code>curl -u test:test http://localhost:8080/host-manager/text/stop?name=www.awesomeserver.com</code></pre></div>
    <p><i>响应示例</i> ：</p>
    <div class="codeBox"><pre><code>OK - Host www.awesomeserver.com stopped</code></pre></div>
  </div></div>
  <div class="subsection"><h4 id="Persist_command">坚持命令</h4><div class="text">
    <p>使用<b>persist</b>命令将虚拟主机持久存储到<b>server.xml中</b> 。用于<b>持久</b>命令的参数：</p>
    <ul>
      <li>字符串<b>名称</b> ：要保留的虚拟主机的名称。
      <b>需要</b></li>
    </ul>
    <p>默认情况下禁用此功能。要启用此选项，您必须配置<code>StoreConfigLifecycleListener</code>听众第一。为此，请将以下侦听器添加到<i>server.xml中</i> ：</p>
    <div class="codeBox"><pre><code>&lt;Listener className="org.apache.catalina.storeconfig.StoreConfigLifecycleListener"/&gt;</code></pre></div>
    <p><i>示例命令</i> ：</p>
    <div class="codeBox"><pre><code>curl -u test:test http://localhost:8080/host-manager/text/persist?name=www.awesomeserver.com</code></pre></div>
    <p><i>响应示例</i> ：</p>
    <div class="codeBox"><pre><code>OK - Configuration persisted</code></pre></div>
    <p><i>手动输入示例</i> ：</p>
    <div class="codeBox"><pre><code>&lt;Host appBase="www.awesomeserver.com" name="www.awesomeserver.com" deployXML="false" unpackWARs="false"&gt;
&lt;/Host&gt;</code></pre></div>
  </div></div>
</div><div class="noprint"><h3 id="comments_section">评论</h3><div class="text"><p class="notice"><strong>注意：</strong>此注释部分收集有关改进Apache Tomcat文档的建议。<br><br>如果您遇到问题并需要帮助，请阅读“ <a href="https://tomcat.apache.org/findhelp.html">查找帮助”</a>页面，然后在tomcat-users <a href="https://tomcat.apache.org/lists.html">邮件列表中</a>询问您的问题。不要在这里问这样的问题。这不是“问答”部分。<br><br><a href="./comments.html">这里</a>解释<a href="./comments.html">了</a> Apache Comments System。如果评论已被实施或被认为无效/偏离主题，则我们的主持人可能会将其删除。
                  </p><div id="comments_thread"></div></div></div></div></div></div></div><footer><div id="footer">版权所有©1999-2019，Apache软件基金会</div></footer></div></body></html>