<html lang="zh-Hans" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="../images/docs-stylesheet.css" rel="stylesheet" type="text/css"><title>Apache Tomcat 9配置参考（9.0.21）-管理器组件</title><meta name="author" content="Craig R. McClanahan"><meta name="author" content="Yoav Shapira"><script type="application/javascript" data-comments-identifier="tomcat-9.0-doc/config/manager">
    "use strict"; // Enable strict mode

    (function() {
      var thisScript = document.currentScript;
      if (!thisScript) { // Workaround for IE <= 11
        var scripts = document.getElementsByTagName("script");
        thisScript = scripts[scripts.length - 1];
      }
      document.addEventListener("DOMContentLoaded", (function() {
        var commentsDiv = document.getElementById("comments_thread");
        var commentsShortname = "tomcat";
        var commentsIdentifier = "https://tomcat.apache.org/" +
          thisScript.getAttribute("data-comments-identifier") + ".html";

        (function(w, d) {
          if (w.location.hostname.toLowerCase() == "tomcat.apache.org") {
            var s = d.createElement("script");
            s.type = "application/javascript";
            s.async = true;
            s.src = "https://comments.apache.org/show_comments.lua?site=" +
              encodeURIComponent(commentsShortname) +
              "&page=" + encodeURIComponent(commentsIdentifier);
            d.head.appendChild(s);
          } else {
            commentsDiv.appendChild(d.createTextNode("Comments are disabled for this page at the moment."));
          }
        })(window, document);
      }), false);
    })();
  </script></head><body ><div id="wrapper"><header><div id="header"><div><div><div class="logo noPrint"><a href="https://tomcat.apache.org/"><img alt="Tomcat主页" src="../images/tomcat.png"></a></div><div style="height:1px"></div><div class="asfLogo noPrint"><a href="https://www.apache.org/" target="_blank"><img src="../images/asf-logo.svg" alt="Apache软件基金会" style="width:266px;height:83px"></a></div><h1>Apache Tomcat 9配置参考</h1><div class="versionInfo">版本9.0.21， <time datetime="2019-06-04"> 2019年6月4日</time></div><div style="height:1px"></div><div style="clear:left"></div></div></div></div></header><div id="middle"><div><div id="mainLeft" class="noprint"><div><nav><div><h2>链接</h2><ul><li><a href="../index.html">文件首页</a></li><li><a href="index.html">配置参考家</a></li><li><a href="https://wiki.apache.org/tomcat/FAQ">常问问题</a></li><li><a href="#comments_section">用户评论</a></li></ul></div><div><h2>顶级元素</h2><ul><li><a href="server.html">服务器</a></li><li><a href="service.html">服务</a></li></ul></div><div><h2>执行者</h2><ul><li><a href="executor.html">执行者</a></li></ul></div><div><h2>连接器</h2><ul><li><a href="http.html">HTTP / 1.1</a></li><li><a href="http2.html">HTTP / 2</a></li><li><a href="ajp.html">AJP</a></li></ul></div><div><h2>货柜</h2><ul><li><a href="context.html">语境</a></li><li><a href="engine.html">发动机</a></li><li><a href="host.html">主办</a></li><li><a href="cluster.html">簇</a></li></ul></div><div><h2>嵌套组件</h2><ul><li><a href="cookie-processor.html">Cookie处理器</a></li><li><a href="credentialhandler.html">凭证处理程序</a></li><li><a href="globalresources.html">全球资源</a></li><li><a href="jar-scanner.html">JarScanner</a></li><li><a href="jar-scan-filter.html">JarScanFilter</a></li><li><a href="listeners.html">听众</a></li><li><a href="loader.html">装载机</a></li><li><a href="manager.html">经理</a></li><li><a href="realm.html">领域</a></li><li><a href="resources.html">资源资源</a></li><li><a href="sessionidgenerator.html">SessionIdGenerator</a></li><li><a href="valve.html">阀</a></li></ul></div><div><h2>集群元素</h2><ul><li><a href="cluster.html">簇</a></li><li><a href="cluster-manager.html">经理</a></li><li><a href="cluster-channel.html">渠道</a></li><li><a href="cluster-membership.html">频道/会员</a></li><li><a href="cluster-sender.html">频道/发件人</a></li><li><a href="cluster-receiver.html">频道/接收器</a></li><li><a href="cluster-interceptor.html">通道/拦截器</a></li><li><a href="cluster-valve.html">阀</a></li><li><a href="cluster-deployer.html">部署者</a></li><li><a href="cluster-listener.html">集群监听器</a></li></ul></div><div><h2>web.xml</h2><ul><li><a href="filter.html">过滤</a></li></ul></div><div><h2>其他</h2><ul><li><a href="systemprops.html">系统属性</a></li><li><a href="jaspic.html">日本宝石</a></li></ul></div></nav></div></div><div id="mainRight"><div id="content"><h2>管理器组件</h2><h3 id="Table_of_Contents">目录</h3><div class="text">
<ul><li><a href="#Introduction">介绍</a></li><li><a href="#Attributes">属性</a><ol><li><a href="#Common_Attributes">共同属性</a></li><li><a href="#Standard_Implementation">标准实施</a></li></ol></li><li><a href="#Nested_Components">嵌套组件</a></li><li><a href="#Special_Features">特殊功能</a><ol><li><a href="#Persistence_Across_Restarts">重新启动的持久性</a></li><li><a href="#Disable_Session_Persistence">禁用会话持久性</a></li></ol></li></ul>
</div><h3 id="Introduction">介绍</h3><div class="text">

  <p><strong>Manager</strong>元素代表<em>会话管理器</em> ，该<em>会话管理器</em>将用于根据关联的Web应用程序的请求创建和维护HTTP会话。</p>

  <p>Manager元素可以嵌套在<a href="context.html">Context</a>组件内。如果未包括在内，则将自动创建默认的Manager配置，该配置足以满足大多数要求，有关此配置的详细信息，请参阅下面的<em>Standard Manager实施</em> 。</p>

</div><h3 id="Attributes">属性</h3><div class="text">

  <div class="subsection"><h4 id="Common_Attributes">共同属性</h4><div class="text">

    <p><strong>Manager的</strong>所有实现均支持以下属性：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">className</code></td><td>
        <p>使用的Java类名称。此类必须实现<code>org.apache.catalina.Manager</code>接口。如果未指定，将使用标准值（定义如下）。</p>
      </td></tr><tr><td><code class="attributeName">maxActiveSessions</code></td><td>
        <p>此管理器将创建的最大活动会话数，或者<code>-1</code> （默认）（无限制）。</p>

        <p>达到限制后，任何尝试创建新会话的尝试（例如<code>HttpServletRequest.getSession()</code>通话）将失败并显示<code>IllegalStateException</code> 。</p>
      </td></tr><tr><td><code class="attributeName">notifyAttributeListenerOnUnchangedValue</code></td><td>
        <p>如果将属性添加到会话中并且该属性已经以相同名称存在于会话中，则将<code>HttpSessionAttributeListener</code>通知该属性已被替换。如果未指定，则默认值为<code>true</code>将会被使用。</p>
      </td></tr><tr><td><code class="attributeName">notifyBindingListenerOnUnchangedValue</code></td><td>
        <p>如果将属性添加到会话中，则该属性已经以相同的名称存在于会话中，并且该属性实现<code>HttpSessionBindingListener</code> ，将通知侦听器该属性已取消绑定并再次绑定。如果未指定，则默认值为<code>false</code>将会被使用。</p>
      </td></tr></tbody></table>

  </div></div>


  <div class="subsection"><h4 id="Standard_Implementation">标准实施</h4><div class="text">

    <p>Tomcat提供了<strong>Manager的</strong>两种标准实现供使用-缺省的一种存储活动会话，而可选的一种将交换出的活动会话（除了通过Tomcat重新启动保存会话外）存储在通过以下方式选择的存储位置中使用适当的<strong>Store</strong>嵌套元素。</p>

    <h3>标准经理实施</h3>

    <p><strong>Manager</strong>的标准实现是<strong>org.apache.catalina.session。StandardManager</strong> 。它支持以下其他属性（除了上面列出的常见属性之外）：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">pathname</code></td><td>
        <p>如果可能的话，在应用程序重新启动后将保留会话状态的文件的绝对路径或相对路径（相对于此上下文的工作目录）。默认值为“ SESSIONS.ser”。<br>有关更多信息，请参见<a href="#Persistence_Across_Restarts">重新启动时的持久性</a> 。通过将此属性设置为空字符串，可以禁用此持久性。</p>
      </td></tr><tr><td><code class="attributeName">processExpiresFrequency</code></td><td>
        <p>会话到期的频率以及相关的管理员操作。对于指定数量的backgroundProcess调用，管理器操作将执行一次（即，数量越低，检查将越频繁）。最小值为1，默认值为6。
        </p>
      </td></tr><tr><td><code class="attributeName">secureRandomClass</code></td><td>
        <p>扩展的Java类的名称<code>java.security.SecureRandom</code>用于生成会话ID。如果未指定，则默认值为<code>java.security.SecureRandom</code> 。</p>
      </td></tr><tr><td><code class="attributeName">secureRandomProvider</code></td><td>
        <p>提供者的名称，用于创建<code>java.security.SecureRandom</code>生成会话ID的实例。如果指定了无效的算法和/或提供程序，则Manager将使用平台默认提供程序和默认算法。如果未指定，将使用平台默认提供程序。</p>
      </td></tr><tr><td><code class="attributeName">secureRandomAlgorithm</code></td><td>
        <p>用于创建算法的算法名称<code>java.security.SecureRandom</code>生成会话ID的实例。如果指定了无效的算法和/或提供程序，则Manager将使用平台默认提供程序和默认算法。如果未指定，将使用SHA1PRNG的默认算法。如果不支持默认算法，则将使用平台默认值。要指定应使用平台默认值，请不要设置secureRandomProvider属性并将此属性设置为空字符串。</p>
      </td></tr><tr><td><code class="attributeName">sessionAttributeNameFilter</code></td><td>
        <p>用于过滤将分配哪些会话属性的正则表达式。仅当属性名称与此模式匹配时，该属性才会被分发。如果图案是零长度或<code>null</code> ，所有属性均可分配。该模式已锚定，因此会话属性名称必须与该模式完全匹配。例如，值<code>(userName|sessionHistory)</code>只会分配两个名为<code>userName</code>和<code>sessionHistory</code> 。如果未指定，则默认值为<code>null</code>将会被使用。</p>
      </td></tr><tr><td><code class="attributeName">sessionAttributeValueClassNameFilter</code></td><td>
        <p>用于过滤将分配哪些会话属性的正则表达式。仅当值的实现类名称与此模式匹配时，才会分配属性。如果图案是零长度或<code>null</code> ，所有属性均可分配。模式是固定的，因此完全限定的类名称必须与模式完全匹配。如果未指定，则默认值为<code>null</code>除非使用<code>SecurityManager</code>在这种情况下默认启用<code>java\\.lang\\.(?:Boolean|Integer|Long|Number|String)</code> 。</p>
      </td></tr><tr><td><code class="attributeName">warnOnSessionAttributeFilterFailure</code></td><td>
        <p>如果<strong>sessionAttributeNameFilter</strong>或<strong>sessionAttributeValueClassNameFilter</strong>阻止属性，则应在以下位置记录该属性<code>WARN</code>水平？如果<code>WARN</code>级别的日志记录被禁用，那么它将被记录在<code>DEBUG</code> 。此属性的默认值为<code>false</code>除非<code>SecurityManager</code>在这种情况下默认启用<code>true</code> 。</p>
      </td></tr></tbody></table>

    <h3>持久管理器实施</h3>

    <p><strong>注意：</strong>您必须设置<code>org.apache.catalina.session.StandardSession.ACTIVITY_CHECK</code>要么<code>org.apache.catalina.STRICT_SERVLET_COMPLIANCE</code> <a href="systemprops.html">系统属性</a> <code>true</code>使持久性管理器正常工作。</p>

    <p><strong>Manager</strong>的永久实现是<strong>org.apache.catalina.session。PersistentManager</strong> 。除了创建和删除会话的常规操作外， <code>PersistentManager</code>能够将活动的（但空闲的）会话交换为持久性存储机制，并可以在Tomcat的正常重启中保存所有会话。通过选择嵌套在<strong>Manager</strong>元素内的<strong>Store</strong>元素，可以选择所使用的实际持久存储机制-这对于使用<code>PersistentManager</code> 。</p>

    <p>Manager的此实现除了前面介绍的“ <a href="#Common_Attributes">通用属性”</a>外，还支持以下属性。</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>
        <p>它具有与上面“ <a href="#Common_Attributes">通用属性”中</a>所述相同的含义。您<strong>必须</strong>指定<code>org.apache.catalina.session.PersistentManager</code>使用此管理器实现。</p>
      </td></tr><tr><td><code class="attributeName">maxIdleBackup</code></td><td>
        <p>自从上一次访问会话以来，有资格将其保留到会话存储之前的时间间隔（以秒为单位），或者<code>-1</code>禁用此功能。默认情况下，此功能处于禁用状态。</p>
      </td></tr><tr><td><code class="attributeName">maxIdleSwap</code></td><td>
        <p>由于不活动，会话有资格被交换到磁盘之前可能处于空闲状态的最长时间。设置为<code>-1</code>意味着不应仅由于不活动而换出会话。如果启用了此功能，则此处指定的时间间隔应等于或大于为<code>maxIdleBackup</code> 。默认情况下，此功能处于禁用状态。</p>
      </td></tr><tr><td><code class="attributeName">minIdleSwap</code></td><td>
        <p>一个会话必须空闲的最短时间（以秒为单位），才有资格被交换到磁盘上，以使活动会话数保持在maxActiveSessions以下。设定为<code>-1</code>意味着将不会交换会话以保持活动会话的计数。如果指定，则该值应小于<code>maxIdleSwap</code> 。默认情况下，此值设置为<code>-1</code> 。</p>
      </td></tr><tr><td><code class="attributeName">processExpiresFrequency</code></td><td>
        <p>与上面针对<code>org.apache.catalina.session.StandardManager</code>类。
        </p>
      </td></tr><tr><td><code class="attributeName">saveOnRestart</code></td><td>
        <p>在Tomcat关闭并重新启动后（或在重新加载此应用程序时）是否应保留并重新加载所有会话？默认情况下，此属性设置为<code>true</code> 。</p>
      </td></tr><tr><td><code class="attributeName">secureRandomClass</code></td><td>
        <p>与上面针对<code>org.apache.catalina.session.StandardManager</code>类。
        </p>
      </td></tr><tr><td><code class="attributeName">secureRandomProvider</code></td><td>
        <p>与上面针对<code>org.apache.catalina.session.StandardManager</code>类。
        </p>
      </td></tr><tr><td><code class="attributeName">secureRandomAlgorithm</code></td><td>
        <p>与上面针对<code>org.apache.catalina.session.StandardManager</code>类。
        </p>
      </td></tr><tr><td><code class="attributeName">sessionAttributeNameFilter</code></td><td>
        <p>用于过滤将分配哪些会话属性的正则表达式。仅当属性名称与此模式匹配时，该属性才会被分发。如果图案是零长度或<code>null</code> ，所有属性均可分配。该模式已锚定，因此会话属性名称必须与该模式完全匹配。例如，值<code>(userName|sessionHistory)</code>只会分配两个名为<code>userName</code>和<code>sessionHistory</code> 。如果未指定，则默认值为<code>null</code>将会被使用。</p>
      </td></tr><tr><td><code class="attributeName">sessionAttributeValueClassNameFilter</code></td><td>
        <p>用于过滤将分配哪些会话属性的正则表达式。仅当值的实现类名称与此模式匹配时，才会分配属性。如果图案是零长度或<code>null</code> ，所有属性均可分配。模式是固定的，因此完全限定的类名称必须与模式完全匹配。如果未指定，则默认值为<code>null</code>除非使用<code>SecurityManager</code>在这种情况下默认启用<code>java\\.lang\\.(?:Boolean|Integer|Long|Number|String)</code> 。</p>
      </td></tr><tr><td><code class="attributeName">warnOnSessionAttributeFilterFailure</code></td><td>
        <p>如果<strong>sessionAttributeNameFilter</strong>或<strong>sessionAttributeValueClassNameFilter</strong>阻止属性，则应在以下位置记录该属性<code>WARN</code>水平？如果<code>WARN</code>级别的日志记录被禁用，那么它将被记录在<code>DEBUG</code> 。此属性的默认值为<code>false</code>除非<code>SecurityManager</code>在这种情况下默认启用<code>true</code> 。</p>
      </td></tr></tbody></table>

    <p>为了成功使用PersistentManager，您必须在其中嵌套一个<strong><store></store></strong>元素，如下所述。</p>

  </div></div>


</div><h3 id="Nested_Components">嵌套组件</h3><div class="text">

  <h3>所有经理实施</h3>

  <p>所有Manager的实现都允许嵌套一个<strong><sessionidgenerator></sessionidgenerator></strong>元件。它定义了会话ID生成的行为。<a href="sessionidgenerator.html">SessionIdGenerator的</a>所有实现均具有以下属性：</p>

  <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">sessionIdLength</code></td><td>
      <p>会话ID的长度可以使用<strong>sessionIdLength</strong>属性更改。
      </p>
    </td></tr></tbody></table>

  <h3>持久管理器实施</h3>

  <p>如果您如上所述使用<em>Persistent Manager实施</em> ，则<strong>必须</strong>嵌套一个<strong><store></store></strong>内部的元素，它定义了持久数据存储的特征。的两种实现<code><Store></code>元素当前可用，具有不同的特性，如下所述。</p>

  <h5>基于文件的存储</h5>

  <p>“ <em>基于文件的存储”</em>实现将换出的会话保存在可配置目录中的各个文件中（基于会话标识符命名）。因此，随着活动会话数的增加，您可能会遇到可伸缩性问题，因此应首先将其视为轻松进行实验的一种方法。</p>

  <p>要进行配置，请添加一个<code><Store></code>嵌套在您的<code><Manager></code>具有以下属性的元素：</p>

  <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>
      <p>使用的Java类名称。此类必须实现<code>org.apache.catalina.Store</code>接口。您<strong>必须</strong>指定<code>org.apache.catalina.session.FileStore</code>使用此实现。</p>
    </td></tr><tr><td><code class="attributeName">directory</code></td><td>
      <p>单个会话文件写入的目录的绝对路径或相对路径（相对于此Web应用程序的临时工作目录）。如果未指定，则使用容器分配的临时工作目录。</p>
    </td></tr></tbody></table>


  <h5>基于JDBC的存储</h5>

  <p><em>基于JDBC的存储</em>实现将交换出的会话保存在通过JDBC驱动程序访问的数据库的预配置表的各个行中。与大量换出的会话相比，此实现将表现出比上述基于文件存储更好的性能。</p>

  <p>要进行配置，请添加一个<code><Store></code>嵌套在您的<code><Manager></code>具有以下属性的元素：</p>

  <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>
      <p>使用的Java类名称。此类必须实现<code>org.apache.catalina.Store</code>接口。您<strong>必须</strong>指定<code>org.apache.catalina.session.JDBCStore</code>使用此实现。</p>
    </td></tr><tr><td><strong><code class="attributeName">connectionName</code></strong></td><td>
      <p>将传递给已配置的JDBC驱动程序以建立与包含会话表的数据库的连接的用户名。</p>
    </td></tr><tr><td><strong><code class="attributeName">connectionPassword</code></strong></td><td>
      <p>密码将传递给已配置的JDBC驱动程序，以建立与包含会话表的数据库的连接。</p>
    </td></tr><tr><td><strong><code class="attributeName">connectionURL</code></strong></td><td>
      <p>连接URL，将传递给已配置的JDBC驱动程序，以建立与包含我们的会话表的数据库的连接。</p>
    </td></tr><tr><td><code class="attributeName">dataSourceName</code></td><td>
      <p>JDBC DataSource工厂的JNDI资源的名称。如果指定了此选项，并且可以找到有效的JDBC资源，则将使用它，并且可以通过以下方式直接配置JDBC连接<code>connectionURL</code> ， <code>connectionName</code> ， <code>connectionPassword</code>和<code>driverName</code>将被忽略。由于此代码使用预处理语句，因此您可能想要配置池化的预处理语句，如<a href="../jndi-resources-howto.html">JNDI资源How-To所示</a> 。</p>
    </td></tr><tr><td><strong><code class="attributeName">driverName</code></strong></td><td>
      <p>要使用的JDBC驱动程序的Java类名称。</p>
    </td></tr><tr><td><code class="attributeName">localDataSource</code></td><td>
      <p>这允许商店使用为上下文定义的数据源，而不是全局数据源。如果未指定，则默认为<code>false</code> ：使用全局数据源。</p>
    </td></tr><tr><td><code class="attributeName">sessionAppCol</code></td><td>
      <p>指定会话表中包含的数据库列的名称，其中包含格式为Engine，Host和Web Application Context的名称<code>/Engine/Host/Context</code> 。如果未指定，则默认值为<code>app</code>将会被使用。</p>
    </td></tr><tr><td><code class="attributeName">sessionDataCol</code></td><td>
      <p>指定会话表中包含的数据库列的名称，其中包含换出会话的所有会话属性的序列化形式。列类型必须接受一个二进制对象（通常称为BLOB）。如果未指定，则默认值为<code>data</code>将会被使用。</p>
    </td></tr><tr><td><code class="attributeName">sessionIdCol</code></td><td>
      <p>指定会话表中包含的数据库列的名称，其中包含换出会话的会话标识符。列类型必须接受至少与Tomcat创建的会话标识符中包含的字符数相同的字符串数据（通常为32）。如果未指定，则默认值为<code>id</code>将会被使用。</p>
    </td></tr><tr><td><code class="attributeName">sessionLastAccessedCol</code></td><td>
      <p>指定会话表中包含的数据库列的名称，该列包含<code>lastAccessedTime</code>此会话的属性。列类型必须接受Java <code>long</code> （64位）。如果未指定，则默认值为<code>maxinactive</code>将会被使用。</p>
    </td></tr><tr><td><code class="attributeName">sessionMaxInactiveCol</code></td><td>
      <p>指定会话表中包含的数据库列的名称，该列包含<code>maxInactiveInterval</code>此会话的属性。列类型必须接受Java <code>integer</code> （32位）。如果未指定，则默认值为<code>maxinactive</code>将会被使用。</p>
    </td></tr><tr><td><code class="attributeName">sessionTable</code></td><td>
      <p>用于存储换出的会话的数据库表的名称。该表必须包含（至少）由该元素的其他属性配置的数据库列。如果未指定，则默认值为<code>tomcat$sessions</code>将会被使用。</p>
    </td></tr><tr><td><code class="attributeName">sessionValidCol</code></td><td>
      <p>指定会话表中包含的数据库列的名称，该列包含一个标志，该标志指示此换出的会话是否仍然有效。列类型必须接受一个字符。如果未指定，则默认值为<code>valid</code>将会被使用。</p>
    </td></tr></tbody></table>

  <p>首次尝试使用基于JDBC的存储之前，必须创建将用于存储换出会话的表。详细的SQL命令取决于您所使用的数据库，但是通常需要这样的脚本：</p>

<div class="codeBox"><pre><code>create table tomcat_sessions (
  session_id     varchar(100) not null primary key,
  valid_session  char(1) not null,
  max_inactive   int not null,
  last_access    bigint not null,
  app_name       varchar(255),
  session_data   mediumblob,
  KEY kapp_name(app_name)
);</code></pre></div>

  <p>注意：上面的SQL命令没有为表或列使用默认名称，因此需要配置JDBC存储来反映这一点。</p>

  <p>为了使基于JDBC的存储成功连接到数据库，您配置的JDBC驱动程序必须对Tomcat的内部类加载器可见。通常，这意味着您必须将包含该驱动程序的JAR文件放入<code>$CATALINA_HOME/lib</code>目录。</p>

</div><h3 id="Special_Features">特殊功能</h3><div class="text">


  <div class="subsection"><h4 id="Persistence_Across_Restarts">重新启动的持久性</h4><div class="text">

    <p>只要Apache Tomcat正常关闭并重新启动，或者触发了应用程序重载，则标准Manager实现将尝试将所有当前活动的会话序列化为通过<code>pathname</code>属性。当应用程序重新加载完成时，所有这些保存的会话将被反序列化并激活（假设它们同时没有过期）。</p>

    <p>为了成功恢复会话属性的状态，所有此类属性务必实现<code>java.io.Serializable</code>接口。您可以通过添加以下内容来使管理者强制执行此限制： <code><distributable></code> Web应用程序部署描述符中的元素（ <code>/WEB-INF/web.xml</code> ）。</p>

    <p>与<strong>PersistentManager</strong>提供的<strong>持久性</strong>相比， <strong>StandardManager</strong>提供的跨重启的持久性是一种更简单的实现。如果功能强大，则需要在重新启动之间保持生产质量持久<strong>性，</strong>则应在适当的配置下使用<strong>PersistentManager</strong> 。</p>

  </div></div>

  <div class="subsection"><h4 id="Disable_Session_Persistence">禁用会话持久性</h4><div class="text">

    <p>如上文所述，每个Web应用程序默认都配置了标准管理器实现，并且在重新启动后执行会话持久性。要禁用此持久性功能，请为您的Web应用程序创建一个<a href="context.html">上下文</a>配置文件，并在其中添加以下元素：</p>

    <div class="codeBox"><pre><code>&lt;Manager pathname="" /&gt;</code></pre></div>
  </div></div>

</div><div class="noprint"><h3 id="comments_section">评论</h3><div class="text"><p class="notice"><strong>注意：</strong>此注释部分收集有关改进Apache Tomcat文档的建议。<br><br>如果您遇到问题并需要帮助，请阅读“ <a href="https://tomcat.apache.org/findhelp.html">查找帮助”</a>页面，然后在tomcat-users <a href="https://tomcat.apache.org/lists.html">邮件列表中</a>询问您的问题。不要在这里问这样的问题。这不是“问答”部分。<br><br><a href="../comments.html">这里</a>解释<a href="../comments.html">了</a> Apache Comments System。如果评论已被实施或被认为无效/偏离主题，则我们的主持人可能会将其删除。
                  </p><div id="comments_thread"></div></div></div></div></div></div></div><footer><div id="footer">版权所有©1999-2019，Apache软件基金会</div></footer></div></body></html>