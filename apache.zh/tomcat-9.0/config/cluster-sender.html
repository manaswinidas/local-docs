<html lang="zh-Hans" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="../images/docs-stylesheet.css" rel="stylesheet" type="text/css"><title>Apache Tomcat 9配置参考（9.0.21）-Cluster Sender对象</title><meta name="author" content="Filip Hanik"><script type="application/javascript" data-comments-identifier="tomcat-9.0-doc/config/cluster-sender">
    "use strict"; // Enable strict mode

    (function() {
      var thisScript = document.currentScript;
      if (!thisScript) { // Workaround for IE <= 11
        var scripts = document.getElementsByTagName("script");
        thisScript = scripts[scripts.length - 1];
      }
      document.addEventListener("DOMContentLoaded", (function() {
        var commentsDiv = document.getElementById("comments_thread");
        var commentsShortname = "tomcat";
        var commentsIdentifier = "https://tomcat.apache.org/" +
          thisScript.getAttribute("data-comments-identifier") + ".html";

        (function(w, d) {
          if (w.location.hostname.toLowerCase() == "tomcat.apache.org") {
            var s = d.createElement("script");
            s.type = "application/javascript";
            s.async = true;
            s.src = "https://comments.apache.org/show_comments.lua?site=" +
              encodeURIComponent(commentsShortname) +
              "&page=" + encodeURIComponent(commentsIdentifier);
            d.head.appendChild(s);
          } else {
            commentsDiv.appendChild(d.createTextNode("Comments are disabled for this page at the moment."));
          }
        })(window, document);
      }), false);
    })();
  </script></head><body ><div id="wrapper"><header><div id="header"><div><div><div class="logo noPrint"><a href="https://tomcat.apache.org/"><img alt="Tomcat主页" src="../images/tomcat.png"></a></div><div style="height:1px"></div><div class="asfLogo noPrint"><a href="https://www.apache.org/" target="_blank"><img src="../images/asf-logo.svg" alt="Apache软件基金会" style="width:266px;height:83px"></a></div><h1>Apache Tomcat 9配置参考</h1><div class="versionInfo">版本9.0.21， <time datetime="2019-06-04"> 2019年6月4日</time></div><div style="height:1px"></div><div style="clear:left"></div></div></div></div></header><div id="middle"><div><div id="mainLeft" class="noprint"><div><nav><div><h2>链接</h2><ul><li><a href="../index.html">文件首页</a></li><li><a href="index.html">配置参考家</a></li><li><a href="https://wiki.apache.org/tomcat/FAQ">常问问题</a></li><li><a href="#comments_section">用户评论</a></li></ul></div><div><h2>顶级元素</h2><ul><li><a href="server.html">服务器</a></li><li><a href="service.html">服务</a></li></ul></div><div><h2>执行者</h2><ul><li><a href="executor.html">执行者</a></li></ul></div><div><h2>连接器</h2><ul><li><a href="http.html">HTTP / 1.1</a></li><li><a href="http2.html">HTTP / 2</a></li><li><a href="ajp.html">AJP</a></li></ul></div><div><h2>货柜</h2><ul><li><a href="context.html">语境</a></li><li><a href="engine.html">发动机</a></li><li><a href="host.html">主办</a></li><li><a href="cluster.html">簇</a></li></ul></div><div><h2>嵌套组件</h2><ul><li><a href="cookie-processor.html">Cookie处理器</a></li><li><a href="credentialhandler.html">凭证处理程序</a></li><li><a href="globalresources.html">全球资源</a></li><li><a href="jar-scanner.html">JarScanner</a></li><li><a href="jar-scan-filter.html">JarScanFilter</a></li><li><a href="listeners.html">听众</a></li><li><a href="loader.html">装载机</a></li><li><a href="manager.html">经理</a></li><li><a href="realm.html">领域</a></li><li><a href="resources.html">资源资源</a></li><li><a href="sessionidgenerator.html">SessionIdGenerator</a></li><li><a href="valve.html">阀</a></li></ul></div><div><h2>集群元素</h2><ul><li><a href="cluster.html">簇</a></li><li><a href="cluster-manager.html">经理</a></li><li><a href="cluster-channel.html">渠道</a></li><li><a href="cluster-membership.html">频道/会员</a></li><li><a href="cluster-sender.html">频道/发件人</a></li><li><a href="cluster-receiver.html">频道/接收器</a></li><li><a href="cluster-interceptor.html">通道/拦截器</a></li><li><a href="cluster-valve.html">阀</a></li><li><a href="cluster-deployer.html">部署者</a></li><li><a href="cluster-listener.html">集群监听器</a></li></ul></div><div><h2>web.xml</h2><ul><li><a href="filter.html">过滤</a></li></ul></div><div><h2>其他</h2><ul><li><a href="systemprops.html">系统属性</a></li><li><a href="jaspic.html">日本宝石</a></li></ul></div></nav></div></div><div id="mainRight"><div id="content"><h2>群集发件人对象</h2><h3 id="Table_of_Contents">目录</h3><div class="text">
<ul><li><a href="#Introduction">介绍</a></li><li><a href="#Concurrent_Parallel_Delivery">并行并行交付</a></li><li><a href="#Nested_Elements">嵌套元素</a></li><li><a href="#Attributes">属性</a><ol><li><a href="#Common_Sender_Attributes">常用发件人属性</a></li><li><a href="#Common_Transport_Attributes">常见的运输属性</a></li><li><a href="#Common_PooledSender_Attributes">公用PooledSender属性</a></li></ol></li></ul>
</div><h3 id="Introduction">介绍</h3><div class="text">
  <p>通道发送方组件负责通过网络传递传出群集消息。在默认实现中， <code>org.apache.catalina.tribes.transport.ReplicationTransmitter</code> ，发件人是一个相当空的外壳，在相当复杂的周围没有太多逻辑<code><Transport></code>组件实现实际的交付机制。
  </p>
</div><h3 id="Concurrent_Parallel_Delivery">并行并行交付</h3><div class="text">
  <p>在默认情况下<code>transport</code>实施， <code>org.apache.catalina.tribes.transport.nio.PooledParallelSender</code> ，Apache Tribes实现了我们所谓的“并行并行交付”。这意味着我们可以同时（并行）将消息发送到多个目的地，并同时（并行）将两个消息传递到同一目的地。结合这两个，我们就可以实现“并行并行交付”。
  </p>
  <p>什么时候有用？我们可以想到的最简单的示例是，当代码的一部分正在发送10MB消息时（例如正在部署战争文件），而您需要推送一小段10KB消息，例如正在复制会话，则不必等待为了完成10MB的消息，因为一个单独的线程将同时推送小消息传输。当前没有可用的中断，暂停或优先级机制，但请稍后再检查。
  </p>
</div><h3 id="Nested_Elements">嵌套元素</h3><div class="text">
 <p>嵌套元素<code><Transport></code>不是必需的，而是鼓励使用，因为这是您设置传出消息的所有套接字选项的地方。请在下面查看其属性。有两种实现方式，类似于<a href="cluster-receiver.html">接收器</a> ，一种是基于非阻塞的，另一种是使用阻塞IO构建的。<br>
   <code>org.apache.catalina.tribes.transport.bio.PooledMultiSender</code>是阻塞的实现， <code>org.apache.catalina.tribes.transport.nio.PooledParallelSender</code> 。并行传递不可用于阻塞实现，因为它在发送数据时阻塞了线程。
 </p>
</div><h3 id="Attributes">属性</h3><div class="text">
  <div class="subsection"><h4 id="Common_Sender_Attributes">常用发件人属性</h4><div class="text">
    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>必需，只有可用的实现<code>org.apache.catalina.tribes.transport.ReplicationTransmitter</code>
      </td></tr></tbody></table>
  </div></div>
  <div class="subsection"><h4 id="Common_Transport_Attributes">常见的运输属性</h4><div class="text">
    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>必填，实现<code>org.apache.catalina.tribes.transport.MultiPointSender</code> 。<br>非阻塞实现是<code>org.apache.catalina.tribes.transport.nio.PooledParallelSender</code><br>阻止实施为<code>org.apache.catalina.tribes.transport.bio.PooledMultiSender</code>
      </td></tr><tr><td><code class="attributeName">rxBufSize</code></td><td>套接字上的接收缓冲区大小。默认值为<code>25188</code>个字节。
      </td></tr><tr><td><code class="attributeName">txBufSize</code></td><td>套接字上的发送缓冲区大小。默认值为<code>43800</code>个字节。
      </td></tr><tr><td><code class="attributeName">udpRxBufSize</code></td><td>数据报套接字上的接收缓冲区大小。默认值为<code>25188</code>个字节。
      </td></tr><tr><td><code class="attributeName">udpTxBufSize</code></td><td>数据报套接字上的发送缓冲区大小。默认值为<code>43800</code>个字节。
      </td></tr><tr><td><code class="attributeName">directBuffer</code></td><td>可能的值为<code>true</code>要么<code>false</code> 。如果希望接收方在向套接字写入数据时使用直接字节缓冲区，则设置为true。默认值为<code>false</code>
      </td></tr><tr><td><code class="attributeName">keepAliveCount</code></td><td>关闭套接字之前可以通过套接字的请求数，并为下一个请求重新打开该请求数。默认值为<code>-1</code> ，这是无限的。
      </td></tr><tr><td><code class="attributeName">keepAliveTime</code></td><td>连接打开后保持打开状态的毫秒数。默认值为<code>-1</code> ，这是无限的。
      </td></tr><tr><td><code class="attributeName">timeout</code></td><td>在套接字上设置SO_TIMEOUT选项。该值以毫秒为单位，默认值为<code>3000</code>毫秒（3秒）。此超时从开始尝试发送消息开始，直到传输完成。对于NIO套接字，这意味着调用者可以保证我们发送消息的尝试时间不会超过此超时值。对于阻塞的IO实现，这直接转换为soTimeout。<br>为了保证应用程序线程的返回，超时不会产生重试尝试。
      </td></tr><tr><td><code class="attributeName">maxRetryAttempts</code></td><td>我们重试失败的消息多少次，该消息在套接字级别收到IOException。默认值为<code>1</code> ，这意味着我们将重试一次失败的消息。换句话说，我们将尝试发送不超过两次的消息。一种是原始发送，一种是<code>maxRetryAttempts</code> 。
      </td></tr><tr><td><code class="attributeName">ooBInline</code></td><td>套接字OOBINLINE选项的布尔值。可能的值为<code>true</code>要么<code>false</code> 。
      </td></tr><tr><td><code class="attributeName">soKeepAlive</code></td><td>套接字SO_KEEPALIVE选项的布尔值。可能的值为<code>true</code>要么<code>false</code> 。
      </td></tr><tr><td><code class="attributeName">soLingerOn</code></td><td>布尔值，用于确定是否使用SO_LINGER套接字选项。可能的值为<code>true</code>要么<code>false</code> 。默认值为<code>true</code> 。
      </td></tr><tr><td><code class="attributeName">soLingerTime</code></td><td>设置SO_LINGER套接字选项时间值。该值以秒为单位。默认值为<code>3</code>秒。
      </td></tr><tr><td><code class="attributeName">soReuseAddress</code></td><td>套接字SO_REUSEADDR选项的布尔值。可能的值为<code>true</code>要么<code>false</code> 。
      </td></tr><tr><td><code class="attributeName">soTrafficClass</code></td><td>设置套接字的通信量级别，该值介于0和255之间。默认值为<code>int soTrafficClass = 0x04 | 0x08 | 0x010;</code>在<a href="http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setTrafficClass(int)">java.net中定义了不同的值</a><a href="http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setTrafficClass(int)">。Socket＃setTrafficClass（int）</a> 。
      </td></tr><tr><td><code class="attributeName">tcpNoDelay</code></td><td>套接字TCP_NODELAY选项的布尔值。可能的值为<code>true</code>要么<code>false</code> 。默认值为<code>true</code>
      </td></tr><tr><td><code class="attributeName">throwOnFailedAck</code></td><td>布尔值，默认值为<code>true</code> 。如果设置为true，发件人将抛出一个<code>org.apache.catalina.tribes.RemoteProcessException</code>当我们收到来自远程成员的否定确认。设置为false，部落将以肯定确认与否定确认相同的方式对待收到邮件。
      </td></tr></tbody></table>
  </div></div>
  <div class="subsection"><h4 id="Common_PooledSender_Attributes">公用PooledSender属性</h4><div class="text">
    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">poolSize</code></td><td>从A到B的最大并发连接数。该值基于每个目标计数。默认值为<code>25</code>
      </td></tr><tr><td><code class="attributeName">maxWait</code></td><td>没有可用的发件人时，senderPool将等待的最大毫秒数。默认值为<code>3000</code>毫秒（3秒）。
      </td></tr></tbody></table>
  </div></div>
</div><div class="noprint"><h3 id="comments_section">评论</h3><div class="text"><p class="notice"><strong>注意：</strong>此注释部分收集有关改进Apache Tomcat文档的建议。<br><br>如果您遇到麻烦并需要帮助，请阅读“ <a href="https://tomcat.apache.org/findhelp.html">查找帮助”</a>页面，然后在tomcat-users <a href="https://tomcat.apache.org/lists.html">邮件列表中</a>询问您的问题。不要在这里问这样的问题。这不是“问答”部分。<br><br><a href="../comments.html">这里</a>解释<a href="../comments.html">了</a> Apache Comments System。如果评论已实施或被认为无效/偏离主题，我们的主持人可能会将其删除。
                  </p><div id="comments_thread"></div></div></div></div></div></div></div><footer><div id="footer">版权所有©1999-2019，Apache软件基金会</div></footer></div></body></html>