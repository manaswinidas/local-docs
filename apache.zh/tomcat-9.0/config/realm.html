<html lang="zh-Hans" ><head></head><body >﻿<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="../images/docs-stylesheet.css" rel="stylesheet" type="text/css"><title>Apache Tomcat 9配置参考（9.0.21）-领域组件</title><meta name="author" content="Craig R. McClanahan"><script type="application/javascript" data-comments-identifier="tomcat-9.0-doc/config/realm">
    "use strict"; // Enable strict mode

    (function() {
      var thisScript = document.currentScript;
      if (!thisScript) { // Workaround for IE <= 11
        var scripts = document.getElementsByTagName("script");
        thisScript = scripts[scripts.length - 1];
      }
      document.addEventListener("DOMContentLoaded", (function() {
        var commentsDiv = document.getElementById("comments_thread");
        var commentsShortname = "tomcat";
        var commentsIdentifier = "https://tomcat.apache.org/" +
          thisScript.getAttribute("data-comments-identifier") + ".html";

        (function(w, d) {
          if (w.location.hostname.toLowerCase() == "tomcat.apache.org") {
            var s = d.createElement("script");
            s.type = "application/javascript";
            s.async = true;
            s.src = "https://comments.apache.org/show_comments.lua?site=" +
              encodeURIComponent(commentsShortname) +
              "&page=" + encodeURIComponent(commentsIdentifier);
            d.head.appendChild(s);
          } else {
            commentsDiv.appendChild(d.createTextNode("Comments are disabled for this page at the moment."));
          }
        })(window, document);
      }), false);
    })();
  </script><div id="wrapper"><header><div id="header"><div><div><div class="logo noPrint"><a href="https://tomcat.apache.org/"><img alt="Tomcat主页" src="../images/tomcat.png"></a></div><div style="height:1px"></div><div class="asfLogo noPrint"><a href="https://www.apache.org/" target="_blank"><img src="../images/asf-logo.svg" alt="Apache软件基金会" style="width:266px;height:83px"></a></div><h1>Apache Tomcat 9配置参考</h1><div class="versionInfo">版本9.0.21， <time datetime="2019-06-04"> 2019年6月4日</time></div><div style="height:1px"></div><div style="clear:left"></div></div></div></div></header><div id="middle"><div><div id="mainLeft" class="noprint"><div><nav><div><h2>链接</h2><ul><li><a href="../index.html">文件首页</a></li><li><a href="index.html">配置参考家</a></li><li><a href="https://wiki.apache.org/tomcat/FAQ">常问问题</a></li><li><a href="#comments_section">用户评论</a></li></ul></div><div><h2>顶级元素</h2><ul><li><a href="server.html">服务器</a></li><li><a href="service.html">服务</a></li></ul></div><div><h2>执行者</h2><ul><li><a href="executor.html">执行者</a></li></ul></div><div><h2>连接器</h2><ul><li><a href="http.html">HTTP / 1.1</a></li><li><a href="http2.html">HTTP / 2</a></li><li><a href="ajp.html">AJP</a></li></ul></div><div><h2>货柜</h2><ul><li><a href="context.html">语境</a></li><li><a href="engine.html">发动机</a></li><li><a href="host.html">主办</a></li><li><a href="cluster.html">簇</a></li></ul></div><div><h2>嵌套组件</h2><ul><li><a href="cookie-processor.html">Cookie处理器</a></li><li><a href="credentialhandler.html">凭证处理程序</a></li><li><a href="globalresources.html">全球资源</a></li><li><a href="jar-scanner.html">JarScanner</a></li><li><a href="jar-scan-filter.html">JarScanFilter</a></li><li><a href="listeners.html">听众</a></li><li><a href="loader.html">装载机</a></li><li><a href="manager.html">经理</a></li><li><a href="realm.html">领域</a></li><li><a href="resources.html">资源资源</a></li><li><a href="sessionidgenerator.html">SessionIdGenerator</a></li><li><a href="valve.html">阀</a></li></ul></div><div><h2>集群元素</h2><ul><li><a href="cluster.html">簇</a></li><li><a href="cluster-manager.html">经理</a></li><li><a href="cluster-channel.html">渠道</a></li><li><a href="cluster-membership.html">频道/会员</a></li><li><a href="cluster-sender.html">频道/发件人</a></li><li><a href="cluster-receiver.html">频道/接收器</a></li><li><a href="cluster-interceptor.html">通道/拦截器</a></li><li><a href="cluster-valve.html">阀</a></li><li><a href="cluster-deployer.html">部署者</a></li><li><a href="cluster-listener.html">集群监听器</a></li></ul></div><div><h2>web.xml</h2><ul><li><a href="filter.html">过滤</a></li></ul></div><div><h2>其他</h2><ul><li><a href="systemprops.html">系统属性</a></li><li><a href="jaspic.html">日本宝石</a></li></ul></div></nav></div></div><div id="mainRight"><div id="content"><h2>领域组件</h2><h3 id="Table_of_Contents">目录</h3><div class="text">
<ul><li><a href="#Introduction">介绍</a></li><li><a href="#Attributes">属性</a><ol><li><a href="#Common_Attributes">共同属性</a></li><li><a href="#JDBC_Database_Realm_-_org.apache.catalina.realm.JDBCRealm">JDBC数据库领域-org.apache.catalina.realm。JDBC领域</a></li><li><a href="#DataSource_Database_Realm_-_org.apache.catalina.realm.DataSourceRealm">数据源数据库领域-org.apache.catalina.realm。数据源领域</a></li><li><a href="#JNDI_Directory_Realm_-_org.apache.catalina.realm.JNDIRealm">JNDI目录领域-org.apache.catalina.realm。JNDIRealm</a></li><li><a href="#UserDatabase_Realm_-_org.apache.catalina.realm.UserDatabaseRealm">UserDatabase领域-org.apache.catalina.realm。UserDatabaseRealm</a></li><li><a href="#Memory_Based_Realm_-_org.apache.catalina.realm.MemoryRealm">基于内存的领域-org.apache.catalina.realm。内存领域</a></li><li><a href="#JAAS_Realm_-_org.apache.catalina.realm.JAASRealm">JAAS领域-org.apache.catalina.realm。JAASRealm</a></li><li><a href="#Combined_Realm_-_org.apache.catalina.realm.CombinedRealm">组合领域-org.apache.catalina.realm。合并领域</a></li><li><a href="#LockOut_Realm_-_org.apache.catalina.realm.LockOutRealm">锁定领域-org.apache.catalina.realm。锁定领域</a></li><li><a href="#Null_Realm_-_org.apache.catalina.realm.NullRealm">空域-org.apache.catalina.realm。空域</a></li><li><a href="#Authenticated_User_Realm_-_org.apache.catalina.realm.AuthenticatedUserRealm">经过身份验证的用户领域-org.apache.catalina.realm。AuthenticatedUserRealm</a></li></ol></li><li><a href="#Nested_Components">嵌套组件</a></li><li><a href="#Special_Features">特殊功能</a></li></ul>
</div><h3 id="Introduction">介绍</h3><div class="text">

  <p><strong>Realm</strong>元素代表分配给这些用户的用户名，密码和<em>角色</em> （类似于Unix <em>组</em> ）的“数据库”。Realm的不同实现方式允许Catalina集成到已经创建和维护了此类认证信息的环境中，然后按照Servlet规范中的描述，利用该信息来实现<em>容器管理的安全性</em> 。</p>

  <p>Catalina容器（ <a href="engine.html">Engine</a> ， <a href="host.html">Host</a>或<a href="context.html">Context</a> ）最多可以包含一个Realm元素（尽管如果Realm支持，则该Realm本身可能包含多个嵌套Realm）。另外，与引擎或主机相关联的领域由下层容器自动继承，除非下层容器显式定义其自己的领域。如果未为引擎配置任何领域，则将为引擎自动配置<a href="#Null_Realm_-_org.apache.catalina.realm.NullRealm">Null领域</a>的实例。</p>

  <p>有关Web应用程序中容器管理的安全性的更多深入信息，以及有关配置和使用标准领域组件实现的更多信息，请参阅《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。
  </p>

    <p><em>下面的描述使用变量名$ CATALINA_BASE来引用可解决大多数相对路径的基本目录。如果尚未通过设置CATALINA_BASE目录为多个实例配置Tomcat，则$ CATALINA_BASE将设置为$ CATALINA_HOME的值，该目录已将Tomcat安装到该目录中。</em></p>

</div><h3 id="Attributes">属性</h3><div class="text">

  <div class="subsection"><h4 id="Common_Attributes">共同属性</h4><div class="text">

    <p><strong>Realm的</strong>所有实现均支持以下属性：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><strong><code class="attributeName">className</code></strong></td><td>
        <p>使用的Java类名称。此类必须实现<code>org.apache.catalina.Realm</code>接口。</p>
      </td></tr></tbody></table>

    <p>与大多数Catalina组件不同，有几种标准的<strong>Realm</strong>实现可用。结果， <code>className</code>属性必须用于选择您要使用的实现。</p>

  </div></div>


  <div class="subsection"><h4 id="JDBC_Database_Realm_-_org.apache.catalina.realm.JDBCRealm">JDBC数据库领域-org.apache.catalina.realm。JDBC领域</h4><div class="text">

    <p><strong>JDBC数据库领域</strong>将Tomcat连接到关系数据库，该关系数据库可通过适当的JDBC驱动程序进行访问，以执行用户名，密码及其相关角色的查找。由于每次都需要查找，因此对数据库的更改将立即反映在用于认证新登录名的信息中。</p>

    <p>丰富的附加属性集使您可以配置与基础数据库的所需连接，以及用于检索所需信息的表和列名称：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
        <p>当此属性的值为<code>authOnly</code>要么<code>strictAuthOnly</code> ， <strong>roleNameCol</strong>和<strong>userRoleTable</strong>属性变为可选。如果省略了这两个属性，则此领域将不会加载用户的角色。</p>
      </td></tr><tr><td><strong><code class="attributeName">connectionName</code></strong></td><td>
        <p>建立JDBC连接时要使用的数据库用户名。</p>
      </td></tr><tr><td><strong><code class="attributeName">connectionPassword</code></strong></td><td>
        <p>建立JDBC连接时要使用的数据库密码。</p>
      </td></tr><tr><td><strong><code class="attributeName">connectionURL</code></strong></td><td>
        <p>建立数据库连接时要传递给JDBC驱动程序的连接URL。</p>
      </td></tr><tr><td><strong><code class="attributeName">driverName</code></strong></td><td>
        <p>用于连接到身份验证数据库的JDBC驱动程序的标准Java类名称。</p>
      </td></tr><tr><td><code class="attributeName">roleNameCol</code></td><td>
        <p>“用户角色”表中的列名称，其中包含分配给相应用户的角色名称。</p>
        <p>在大多数配置中，此属性是<strong>必需</strong>的。请参阅<strong>allRolesMode</strong>属性，以在极少数情况下可以将其省略。</p>
      </td></tr><tr><td><code class="attributeName">stripRealmForGss</code></td><td>
        <p>当处理通过GSS-API认证的用户时，此属性控制是否从用户名的末尾删除任何“ @ ...”。如果未指定，则默认为<code>true</code> 。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr><tr><td><strong><code class="attributeName">userCredCol</code></strong></td><td>
        <p>“用户”表中的列名称，其中包含用户的凭据（即密码）。如果一个<code>CredentialHandler</code>如果指定了“密码”，则此组件将假定密码已使用指定的算法编码。否则，将假定它们为明文。</p>
      </td></tr><tr><td><strong><code class="attributeName">userNameCol</code></strong></td><td>
        <p>“用户”和“用户角色”表中的列名称，其中包含用户的用户名。</p>
      </td></tr><tr><td><code class="attributeName">userRoleTable</code></td><td>
        <p>“用户角色”表的名称，该表必须包含以<code>userNameCol</code>和<code>roleNameCol</code>属性。</p>
        <p>在大多数配置中，此属性是<strong>必需</strong>的。请参阅<strong>allRolesMode</strong>属性，以在极少数情况下可以将其省略。</p>
      </td></tr><tr><td><strong><code class="attributeName">userTable</code></strong></td><td>
        <p>“用户”表的名称，其中必须包含以<code>userNameCol</code>和<code>userCredCol</code>属性。</p>
      </td></tr><tr><td><code class="attributeName">X509UsernameRetrieverClassName</code></td><td>
        <p>使用X509客户端证书时，它指定将用于从证书中检索用户名的类名。该类必须实现<code>org.apache.catalina.realm.X509UsernameRetriever</code>接口。默认值为使用证书的SubjectDN作为用户名。</p>
      </td></tr></tbody></table>

    <p>有关使用JDBC数据库领域组件设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。</p>

  </div></div>


  <div class="subsection"><h4 id="DataSource_Database_Realm_-_org.apache.catalina.realm.DataSourceRealm">数据源数据库领域-org.apache.catalina.realm。数据源领域</h4><div class="text">

    <p><strong>数据源数据库领域</strong>将Tomcat连接到关系数据库，可通过名为JDBC数据源的JNDI访问该关系数据库，以执行用户名，密码及其相关角色的查找。由于每次都需要查找，因此对数据库的更改将立即反映在用于认证新登录名的信息中。</p>

    <p>JDBC领域使用单个数据库连接。这要求同步基于领域的身份验证，即一次只能进行一次身份验证。对于具有大量基于领域的身份验证的应用程序来说，这可能是瓶颈。</p>

    <p>数据源数据库领域支持基于同时领域的身份验证，并允许基础JDBC数据源处理诸如数据库连接池之类的优化。</p>

    <p>丰富的附加属性集使您可以配置JNDI JDBC数据源的名称，以及用于检索所需信息的表和列名称：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
        <p>当此属性的值为<code>authOnly</code>要么<code>strictAuthOnly</code> ， <strong>roleNameCol</strong>和<strong>userRoleTable</strong>属性变为可选。如果省略了这两个属性，则此领域将不会加载用户的角色。</p>
      </td></tr><tr><td><strong><code class="attributeName">dataSourceName</code></strong></td><td>
        <p>此领域的JNDI JDBC数据源的名称。</p>
      </td></tr><tr><td><code class="attributeName">localDataSource</code></td><td>
        <p>当领域嵌套在Context元素内时，这允许领域使用为Context定义的数据源，而不是全局数据源。如果未指定，则默认为<code>false</code> ：使用全局数据源。</p>
      </td></tr><tr><td><code class="attributeName">roleNameCol</code></td><td>
        <p>“用户角色”表中的列名称，其中包含分配给相应用户的角色名称。</p>
        <p>在大多数配置中，此属性是<strong>必需</strong>的。请参阅<strong>allRolesMode</strong>属性，以在极少数情况下可以将其省略。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">stripRealmForGss</code></td><td>
        <p>当处理通过GSS-API认证的用户时，此属性控制是否从用户名的末尾删除任何“ @ ...”。如果未指定，则默认为<code>true</code> 。</p>
      </td></tr><tr><td><strong><code class="attributeName">userCredCol</code></strong></td><td>
        <p>“用户”表中的列名称，其中包含用户的凭据（即密码）。如果一个<code>CredentialHandler</code>如果指定了“密码”，则此组件将假定密码已使用指定的算法编码。否则，将假定它们为明文。</p>
      </td></tr><tr><td><strong><code class="attributeName">userNameCol</code></strong></td><td>
        <p>“用户”和“用户角色”表中的列名称，其中包含用户的用户名。</p>
      </td></tr><tr><td><code class="attributeName">userRoleTable</code></td><td>
        <p>“用户角色”表的名称，该表必须包含以<code>userNameCol</code>和<code>roleNameCol</code>属性。</p>
        <p>在大多数配置中，此属性是<strong>必需</strong>的。请参阅<strong>allRolesMode</strong>属性，以在极少数情况下可以将其省略。</p>
      </td></tr><tr><td><strong><code class="attributeName">userTable</code></strong></td><td>
        <p>“用户”表的名称，其中必须包含以<code>userNameCol</code>和<code>userCredCol</code>属性。</p>
      </td></tr><tr><td><code class="attributeName">X509UsernameRetrieverClassName</code></td><td>
        <p>使用X509客户端证书时，它指定将用于从证书中检索用户名的类名。该类必须实现<code>org.apache.catalina.realm.X509UsernameRetriever</code>接口。默认值为使用证书的SubjectDN作为用户名。</p>
      </td></tr></tbody></table>

    <p>有关使用DataSource Database Realm组件设置容器管理的安全性的更多信息，请参见<a href="../realm-howto.html#DataSourceRealm">DataSource Realm How-To</a> 。</p>

  </div></div>


  <div class="subsection"><h4 id="JNDI_Directory_Realm_-_org.apache.catalina.realm.JNDIRealm">JNDI目录领域-org.apache.catalina.realm。JNDIRealm</h4><div class="text">

    <p><strong>JNDI目录领域</strong>将Tomcat连接到LDAP目录，可通过适当的JNDI驱动程序访问该目录，该驱动程序存储用户名，密码及其相关角色。对目录的更改将立即反映在用于验证新登录名的信息中。</p>


    <p>目录领域支持使用LDAP进行身份验证的多种方法：</p>

    <ul>
    <li>领域可以使用一种模式来确定用户目录条目的专有名称（DN），也可以搜索目录以找到该条目。
    </li>

    <li>领域可以通过使用用户条目的DN和用户提供的密码绑定到目录或通过从用户条目中检索密码并在本地进行比较来对用户进行身份验证。
    </li>

    <li>角色可以在目录中表示为通过目录搜索找到的显式条目（例如，用户是其成员的组条目），在用户条目中的属性值或两者。
    </li>
    </ul>

    <p>丰富的附加属性集使您可以配置所需的行为以及与基础目录的连接以及用于从目录检索信息的元素和属性名称：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">adCompat</code></td><td>
        <p>Microsoft Active Directory经常返回引用。遍历NamingEnumerations时，这些将导致PartialResultExceptions。如果要我们忽略这些例外，请将此属性设置为“ true”。不幸的是，没有一种稳定的方法来检测异常是否真的来自AD引用。默认值为“ false”。</p>
      </td></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
      </td></tr><tr><td><code class="attributeName">alternateURL</code></td><td>
        <p>如果无法通过以下方式与提供者建立套接字连接<code>connectionURL</code>尝试使用<code>alternateURL</code> 。</p>
      </td></tr><tr><td><code class="attributeName">authentication</code></td><td>
        <p>一个字符串，指定要使用的身份验证类型。可以使用“无”，“简单”，“强”或提供者特定的定义。如果未指定任何值，则使用提供程序默认值。</p>
      </td></tr><tr><td><code class="attributeName">cipherSuites</code></td><td>
        <p>指定尝试使用StartTLS打开安全连接时允许使用的密码套件。允许的密码套件由逗号分隔的列表指定。默认设置是使用JVM的密码套件。</p>
      </td></tr><tr><td><code class="attributeName">commonRole</code></td><td>
        <p>除从LDAP检索到的角色外，还分配给每个成功通过身份验证的用户的角色名称。如果未指定，则仅使用通过LDAP检索的角色。</p>
      </td></tr><tr><td><code class="attributeName">connectionName</code></td><td>
        <p>建立到LDAP搜索操作的目录的连接时使用的目录用户名。如果未指定，则进行匿名连接，这通常就足够了，除非您指定<code>userPassword</code>属性。</p>
      </td></tr><tr><td><code class="attributeName">connectionPassword</code></td><td>
        <p>建立与LDAP搜索操作的目录的连接时使用的目录密码。如果未指定，则进行匿名连接，这通常就足够了，除非您指定<code>userPassword</code>属性。</p>
      </td></tr><tr><td><code class="attributeName">connectionTimeout</code></td><td>
        <p>建立到LDAP目录的连接时使用的超时（以毫秒为单位）。如果未指定，则使用5000（5秒）的值。</p>
      </td></tr><tr><td><strong><code class="attributeName">connectionURL</code></strong></td><td>
        <p>建立与目录的连接时要传递给JNDI驱动程序的连接URL。</p>
      </td></tr><tr><td><code class="attributeName">contextFactory</code></td><td>
        <p>用于获取我们的JNDI的工厂类的标准Java类名<code>InitialContext</code> 。默认情况下，假设将使用标准的JNDI LDAP提供程序。</p>
      </td></tr><tr><td><code class="attributeName">derefAliases</code></td><td>
        <p>一个字符串，指定在搜索操作期间如何取消别名的引用。允许的值为“始终”，“从不”，“查找”和“搜索”。如果未指定，则使用“始终”。</p>
      </td></tr><tr><td><code class="attributeName">forceDnHexEscape</code></td><td>
        <p>的设置<code>true</code>强制使用可分辨名称的字符串表示形式转义以使用<code>\nn</code>形成。这样可以避免使用Active Directory的领域出现问题，该领域似乎更容忍在进行<code>\nn</code>使用表格。如果未指定，则默认为<code>false</code>将会被使用。</p>
      </td></tr><tr><td><code class="attributeName">hostnameVerifierClassName</code></td><td>
        <p>使用StartTLS保护与ldap服务器的连接时，用于主机名验证的类的名称。默认构造函数将用于构造验证程序类的实例。缺省值是仅接受根据ldap服务器的对等证书有效的那些主机名。</p>
      </td></tr><tr><td><code class="attributeName">protocol</code></td><td>
         <p>一个字符串，指定要使用的安全协议。如果未提供，则使用提供者默认值。</p>
      </td></tr><tr><td><code class="attributeName">readTimeout</code></td><td>
          <p>尝试从目录的连接读取时使用的超时（以毫秒为单位）。如果未指定，则使用默认值5000（5秒）。</p>
      </td></tr><tr><td><code class="attributeName">referrals</code></td><td>
        <p>我们如何处理JNDI推荐？允许的值为“忽略”，“跟随”或“抛出”（请参阅javax.naming。上下文。有关更多信息，请参见参考。Microsoft Active Directory经常返回引用。如果您需要遵循它们，请将引荐设置为“关注”。警告：如果您的DNS不属于AD，则LDAP客户端库可能会尝试在DNS中解析您的域名以查找其他LDAP服务器。</p>
      </td></tr><tr><td><code class="attributeName">roleBase</code></td><td>
        <p>用于执行角色搜索的基本目录条目。如果未指定，将使用目录上下文中的顶级元素。如果指定，它可以可选地包括模式替换“ {0}” ..“ {n}”，对应于用户专有名称的名称部分（由<code>javax.naming.Name.get()</code> ）。</p>
      </td></tr><tr><td><code class="attributeName">roleName</code></td><td>
        <p>在角色搜索找到的目录条目中包含角色名称的属性名称。另外，您可以使用<code>userRoleName</code>属性，用于在用户条目中指定包含其他角色名称的属性名称。</p>
        <p>如果<code>roleName</code>未指定不会进行角色搜索，并且仅从用户的条目中获得角色。</p>
      </td></tr><tr><td><code class="attributeName">roleNested</code></td><td>
        <p>调成<code>true</code>如果要将角色嵌套到角色中。当执行角色搜索并且此属性的值为<code>true</code> ，则将递归重复搜索，以找到直接或间接属于用户的所有角色。如果未指定，则默认值为<code>false</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">roleSearch</code></td><td>
        <p>用于执行角色搜索的LDAP过滤器表达式。</p>

        <p>使用<code>{0}</code>替换用户的专有名称（DN），和/或<code>{1}</code>替换用户名，和/或<code>{2}</code>用于用户目录条目中已验证用户的属性值。为以下项提供值的属性名称<code>{2}</code>由配置<code>userRoleAttribute</code>属性。</p>

        <p>什么时候<code>roleNested</code>财产是<code>true</code> ，此过滤器表达式还将用于递归搜索间接属于该用户的其他角色。要查找与新找到的角色匹配的角色，请使用以下值： <code>{0}</code>被新找到的角色的专有名称替换，并且两者<code>{1}</code>和<code>{2}</code>由角色名称代替（请参见<code>roleName</code>属性）。的<code>userRoleAttribute</code>属性不适用于此搜索。</p>

        <p>如果未指定此属性，则不会进行角色搜索，并且仅从由用户指定的用户条目中的属性中获取角色<code>userRoleName</code>属性。</p>
      </td></tr><tr><td><code class="attributeName">roleSearchAsUser</code></td><td>
        <p>在搜索用户角色时，是否应该以当前正在认证的用户身份执行搜索？如果为假， <code>connectionName</code>和<code>connectionPassword</code>如果指定则将使用，否则为匿名。如果未指定，则默认值为<code>false</code>用来。请注意，使用委派凭据访问目录时，始终会忽略此属性，并且会使用委派凭据执行搜索。</p>
      </td></tr><tr><td><code class="attributeName">roleSubtree</code></td><td>
        <p>调成<code>true</code>如果您要搜索由指定的元素的整个子树<code>roleBase</code>与用户关联的角色条目的属性。的默认值<code>false</code>导致仅顶层搜索。</p>
      </td></tr><tr><td><code class="attributeName">sizeLimit</code></td><td>
        <p>指定使用时的最大返回记录数<code>userSearch</code>属性。如果未指定，则默认为<code>0</code>表示没有限制。</p>
      </td></tr><tr><td><code class="attributeName">spnegoDelegationQop</code></td><td>
        <p>当JNDI Realm与SPNEGO身份验证器一起使用时， <code>useDelegatedCredential</code>是<code>true</code>此属性控制身份验证后用于连接LDAP服务器的QOP（保护质量）。此值用于设置<code>javax.security.sasl.qop</code> LDAP连接的环境属性。此属性应该是逗号分隔的值列表，该列表选自<code>auth-conf</code> ， <code>auth-int</code>和<code>auth</code> 。有关更多详细信息，请参见<a href="http://docs.oracle.com/javase/7/docs/api/javax/security/sasl/Sasl.html#QOP" rel="nofollow">Java文档</a> 。</p>
        <p>默认值为<code>auth-conf</code> 。</p>
      </td></tr><tr><td><code class="attributeName">sslProtocol</code></td><td>
        <p>指定在与StartTLS连接时应使用哪种ssl协议。默认是让jre决定。如果您需要更多控制权，则可以指定<code>SSLSocketFactory</code>使用。</p>
      </td></tr><tr><td><code class="attributeName">sslSocketFactory</code></td><td>
        <p>指定哪个<code>SSLSocketFactory</code>使用StartTLS连接到ldap服务器时使用。该类的实例将使用默认构造函数构造。如果没有给出类名，则默认为jre <code>SSLSocketFactory</code>将会被使用。</p>
      </td></tr><tr><td><code class="attributeName">stripRealmForGss</code></td><td>
        <p>当处理通过GSS-API认证的用户时，此属性控制是否从用户名的末尾删除任何“ @ ...”。如果未指定，则默认为<code>true</code> 。</p>
      </td></tr><tr><td><code class="attributeName">timeLimit</code></td><td>
        <p>指定使用时等待返回记录的时间（以毫秒为单位） <code>userSearch</code>属性。如果未指定，则默认为<code>0</code>表示没有限制。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">useDelegatedCredential</code></td><td>
        <p>当JNDIRealm与SPNEGO身份验证器一起使用时，可以为用户提供委派的凭据。如果存在此类凭据，则此属性控制是否将它们用于连接到目录。如果未指定，则默认值为<code>true</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">userBase</code></td><td>
        <p>用户搜索的基本元素是使用<code>userSearch</code>表达。如果您使用的是<code>userPattern</code>表达。</p>
      </td></tr><tr><td><code class="attributeName">userPassword</code></td><td>
        <p>用户条目中包含用户密码的属性名称。如果指定此值，则JNDIRealm将使用由以下命令指定的值绑定到目录<code>connectionName</code>和<code>connectionPassword</code>属性，并检索对应的属性，以便与正在验证的用户指定的值进行比较。如果<strong>未</strong>指定此值，则JNDIRealm将尝试使用用户条目的DN和用户提供的密码来简单绑定到目录，并将成功绑定解释为已认证用户。</p>
      </td></tr><tr><td><code class="attributeName">userPattern</code></td><td>
        <p>用户目录条目的专有名称（DN）的模式，带有<code>{0}</code>标记实际用户名应插入的位置。您可以使用此属性代替<code>userSearch</code> ， <code>userSubtree</code>和<code>userBase</code>当专有名称包含用户名时，否则对于所有用户都相同。请注意，使用委派凭据访问目录时，始终会忽略此属性，并且<code>userSearch</code> ， <code>userSubtree</code>和<code>userBase</code>总是代替使用。</p>
      </td></tr><tr><td><code class="attributeName">userRoleName</code></td><td>
        <p>用户目录条目中的属性名称，其中包含零个或多个分配给该用户的角色名称的值。另外，您可以使用<code>roleName</code>属性，用于指定要从通过搜索目录找到的单个角色条目中检索的属性的名称。如果<code>userRoleName</code>未指定用户的所有角色都源自角色搜索。</p>
      </td></tr><tr><td><code class="attributeName">userRoleAttribute</code></td><td>
        <p>用户目录条目中的属性名称，其中包含您在搜索角色时希望使用的值。这对于RFC 2307尤其有用，其中的memberUid角色可以是<code>uid</code>或者<code>uidNumber</code>用户。该值将被标记为<code>{2}</code>在您的角色搜索过滤器表达式中。此值不适用于嵌套角色搜索。</p>
      </td></tr><tr><td><code class="attributeName">userSearch</code></td><td>
        <p>搜索用户目录条目时要使用的LDAP过滤器表达式，其中包括<code>{0}</code>标记实际用户名应插入的位置。使用此属性（以及<code>userBase</code>和<code>userSubtree</code>属性），而不是<code>userPattern</code>在目录中搜索用户的条目。</p>
      </td></tr><tr><td><code class="attributeName">userSearchAsUser</code></td><td>
        <p>在搜索用户的条目时，是否应该按照当前正在认证的用户来执行搜索？如果为假， <code>connectionName</code>和<code>connectionPassword</code>如果指定则将使用，否则为匿名。如果未指定，则默认值为<code>false</code>用来。请注意，使用委派凭据访问目录时，始终会忽略此属性，并且会使用委派凭据执行搜索。</p>
      </td></tr><tr><td><code class="attributeName">userSubtree</code></td><td>
        <p>调成<code>true</code>如果您要搜索由指定的元素的整个子树<code>userBase</code>用户输入的属性。的默认值<code>false</code>导致仅顶层搜索。如果您使用的是<code>userPattern</code>表达。</p>
      </td></tr><tr><td><code class="attributeName">useStartTls</code></td><td>
        <p>调成<code>true</code>如果要使用StartTLS保护与ldap服务器的连接。默认值为<code>false</code> 。
        </p>
      </td></tr><tr><td><code class="attributeName">X509UsernameRetrieverClassName</code></td><td>
        <p>使用X509客户端证书时，它指定将用于从证书中检索用户名的类名。该类必须实现<code>org.apache.catalina.realm.X509UsernameRetriever</code>接口。默认值为使用证书的SubjectDN作为用户名。</p>
      </td></tr></tbody></table>

    <p>有关使用JNDI Directory Realm组件设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。</p>

  </div></div>


  <div class="subsection"><h4 id="UserDatabase_Realm_-_org.apache.catalina.realm.UserDatabaseRealm">UserDatabase领域-org.apache.catalina.realm。UserDatabaseRealm</h4><div class="text">

    <p><strong>UserDatabase领域</strong>是一个Realm实现，该实现基于通过为此Tomcat实例配置的全局JNDI资源提供的UserDatabase资源。</p>

    <p>UserDatabase Realm实现支持以下附加属性：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
      </td></tr><tr><td><strong><code class="attributeName">resourceName</code></strong></td><td>
        <p>全球名称<code>UserDatabase</code>该领域将用于用户，密码和角色信息的资源。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">X509UsernameRetrieverClassName</code></td><td>
        <p>使用X509客户端证书时，它指定将用于从证书中检索用户名的类名。该类必须实现<code>org.apache.catalina.realm.X509UsernameRetriever</code>接口。默认值为使用证书的SubjectDN作为用户名。</p>
      </td></tr></tbody></table>

    <p>有关使用UserDatabase Realm组件和<a href="../jndi-resources-howto.html">JNDI资源方法来</a>设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> ， <a href="../jndi-resources-howto.html">以</a>获取有关如何配置UserDatabase资源的更多信息。</p>

  </div></div>


  <div class="subsection"><h4 id="Memory_Based_Realm_-_org.apache.catalina.realm.MemoryRealm">基于内存的领域-org.apache.catalina.realm。内存领域</h4><div class="text">

    <p><strong>基于内存的领域</strong>是一个简单的Realm实现，它从XML格式读取用户信息，并将其表示为内存中Java对象的集合。此实现仅旨在通过容器管理的安全性启动和运行-并非用于生产用途。这样，当底层数据文件的内容更改时，没有机制可用于更新用户的内存中集合。</p>

    <p>基于内存的领域实现支持以下附加属性：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
      </td></tr><tr><td><code class="attributeName">pathname</code></td><td>
        <p>包含我们的用户信息的XML文件的URL，绝对路径或相对路径（到$ CATALINA_BASE）。有关所需XML元素格式的详细信息，请参见下文。如果未指定路径名，则默认值为<code>conf/tomcat-users.xml</code> 。</p>
      </td></tr><tr><td><code class="attributeName">stripRealmForGss</code></td><td>
        <p>当处理通过GSS-API认证的用户时，此属性控制是否从用户名的末尾删除任何“ @ ...”。如果未指定，则默认为<code>true</code> 。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">X509UsernameRetrieverClassName</code></td><td>
        <p>使用X509客户端证书时，它指定将用于从证书中检索用户名的类名。该类必须实现<code>org.apache.catalina.realm.X509UsernameRetriever</code>接口。默认值为使用证书的SubjectDN作为用户名。</p>
      </td></tr></tbody></table>

    <p>XML文档所引用的<code>pathname</code>属性必须符合以下要求：</p>
    <ul>
    <li>根（外部）元素必须为<code><tomcat-users></code> 。
        </li>
    <li>每个授权用户必须由单个XML元素表示<code><user></code> ，嵌套在根元素中。</li>
    <li>每<code><user></code>元素必须具有以下属性：<ul>
        <li><strong>用户名</strong> -该用户的用户名（在此文件中必须唯一）。<br>为了兼容，允许使用<strong>名称</strong>作为此属性的替代名称。</li>
        <li><strong>密码</strong> -该用户的密码（以明文形式）。</li>
        <li><strong>角色</strong> -分配给该用户的角色名称的逗号分隔列表。</li>
        </ul></li>
    </ul>

    <p>有关使用基于内存的领域组件设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。</p>

  </div></div>


  <div class="subsection"><h4 id="JAAS_Realm_-_org.apache.catalina.realm.JAASRealm">JAAS领域-org.apache.catalina.realm。JAASRealm</h4><div class="text">

    <p><strong>JAASRealm</strong>是Tomcat的实现<code>Realm</code>通过Java身份验证和授权服务（JAAS）框架对用户进行身份验证的接口，该框架现在作为标准J2SE API的一部分提供。</p>

    <p>使用JAASRealm，使开发人员能够将几乎所有可能的安全领域与Tomcat的CMA相结合。</p>

    <p>JAASRealm是基于<a href="https://www.jcp.org/en/jsr/detail?id=196">JCP规范请求196</a>的基于JAAS的J2EE v1.4的基于JAAS的J2EE身份验证框架的Tomcat的原型，以增强容器管理的安全性并促进实现与容器无关的“可插拔”身份验证机制。</p>

    <p>基于JAAS登录模块和主体（请参阅<code>javax.security.auth.spi.LoginModule</code>和<code>javax.security.Principal</code> ），则可以开发自己的安全性机制或包装另一种第三方机制，以与Tomcat实施的CMA集成。</p>

    <p>JAAS Realm实现支持以下附加属性：</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
      </td></tr><tr><td><code class="attributeName">appName</code></td><td>
       <p>在您的登录配置文件（ <a href="http://docs.oracle.com/javase/1.4.2/docs/guide/security/jaas/tutorials/LoginConfigFile.html">JAAS LoginConfig</a> ）中配置的应用程序的名称。</p>
       <p>如果未指定<code>appName</code>源自容器的名称，例如<code>Catalina</code>要么<code>ROOT</code> 。如果该领域未放置在任何容器中，则默认值为<code>Tomcat</code> 。
       </p>
      </td></tr><tr><td><strong><code class="attributeName">userClassNames</code></strong></td><td>
        <p>用逗号分隔的用户名称列表<code>Principals</code> 。</p>
      </td></tr><tr><td><code class="attributeName">configFile</code></td><td>
        <p>与该领域一起使用的JAAS配置文件的名称。将搜索使用<code>ClassLoader#getResource(String)</code>因此有可能将配置捆绑在Web应用程序中。如果未指定，将使用默认的JVM全局JAAS配置。</p>
      </td></tr><tr><td><code class="attributeName">roleClassNames</code></td><td>
        <p>用逗号分隔的角色名称列表<code>Principals</code> 。</p>
      </td></tr><tr><td><code class="attributeName">stripRealmForGss</code></td><td>
        <p>当处理通过GSS-API认证的用户时，此属性控制是否从用户名的末尾删除任何“ @ ...”。如果未指定，则默认为<code>true</code> 。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr><tr><td><code class="attributeName">useContextClassLoader</code></td><td>
        <p>指示JAASRealm使用上下文类加载器加载用户指定的<code>LoginModule</code>类及相关<code>Principal</code>类。默认值为<code>true</code> ，与Tomcat 5的工作方式向后兼容。要使用容器的类加载器加载类，请指定<code>false</code> 。</p>
      </td></tr><tr><td><code class="attributeName">X509UsernameRetrieverClassName</code></td><td>
        <p>使用X509客户端证书时，它指定将用于从证书中检索用户名的类名。该类必须实现<code>org.apache.catalina.realm.X509UsernameRetriever</code>接口。默认值为使用证书的SubjectDN作为用户名。</p>
      </td></tr></tbody></table>

    <p>有关使用JAAS Realm组件设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。</p>

  </div></div>


  <div class="subsection"><h4 id="Combined_Realm_-_org.apache.catalina.realm.CombinedRealm">组合领域-org.apache.catalina.realm。合并领域</h4><div class="text">

    <p><strong>CombinedRealm</strong>是Tomcat的实现<code>Realm</code>通过一个或多个子领域对用户进行身份验证的界面。</p>

    <p>使用CombinedRealm使开发人员能够组合相同或不同类型的多个Realm。这可以用于针对不同的来源进行身份验证，以防万一一个Realm失败而退回，或者用于需要多个Realm的任何其他目的。</p>

    <p>子领域是通过嵌套定义的<code>Realm</code>里面的元素<code>Realm</code>定义CombinedRealm的元素。将尝试对每个认证<code>Realm</code>按照它们列出的顺序。针对任何领域的身份验证就足以对用户进行身份验证。身份验证的用户及其相关角色将从成功验证用户的第一个领域中获取。</p>

    <p>有关使用CombinedRealm组件设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。</p>

    <p>CombinedRealm实现支持以下附加属性。</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr></tbody></table>
  </div></div>


  <div class="subsection"><h4 id="LockOut_Realm_-_org.apache.catalina.realm.LockOutRealm">锁定领域-org.apache.catalina.realm。锁定领域</h4><div class="text">

    <p><strong>LockOutRealm</strong>是Tomcat的实现<code>Realm</code>扩展CombinedRealm的接口，以提供锁定功能，以在给定的时间内失败的身份验证尝试过多时提供用户锁定机制。</p>

    <p>为了确保正确操作，此领域中存在合理程度的同步。</p>

    <p>该领域不需要修改基础领域或相关的用户存储机制。它通过记录所有失败的登录（包括那些不存在的用户的登录）来实现此目的。为了防止DOS通过考虑向无效用户发出请求（从而导致此高速缓存增长），限制了身份验证失败的用户列表的大小。</p>

    <p>子领域是通过嵌套定义的<code>Realm</code>里面的元素<code>Realm</code>定义LockOutRealm的元素。将尝试对每个认证<code>Realm</code>按照它们列出的顺序。针对任何领域的身份验证就足以对用户进行身份验证。</p>

    <p>LockOutRealm实现支持以下附加属性。</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">allRolesMode</code></td><td>
        <p>此属性控制特殊角色名称的方式<code>*</code>在处理web.xml中的授权约束时处理。默认情况下，符合规范的值<code>strict</code>使用，这意味着必须为用户分配web.xml中定义的角色之一。替代值是<code>authOnly</code>这意味着必须对用户进行身份验证，但不检查分配的角色，并且<code>strictAuthOnly</code>这意味着必须对用户进行身份验证，除非在web.xml中定义了角色，否则不会检查分配的角色，在这种情况下，必须为用户分配至少这些角色之一。</p>
      </td></tr><tr><td><code class="attributeName">cacheRemovalWarningTime</code></td><td>
       <p>如果由于缓存太大而无法进入失败的用户，因为该缓存在缓存中至少存在此时间段（以秒为单位）之前就太大了，则会记录一条警告消息。默认为3600（1小时）。</p>
      </td></tr><tr><td><code class="attributeName">cacheSize</code></td><td>
       <p>身份验证失败以保留在高速缓存中的用户数。随着时间的流逝，缓存将增长到该大小，并且可能不会缩小。预设为1000。</p>
      </td></tr><tr><td><code class="attributeName">failureCount</code></td><td>
       <p>用户必须通过身份验证才能被锁定的连续次数。默认为5。</p>
      </td></tr><tr><td><code class="attributeName">lockOutTime</code></td><td>
       <p>身份验证失败过多后，用户被锁定的时间（以秒为单位）。默认为300（5分钟）。在锁定时间内进一步的身份验证失败将导致锁定计时器重置为零，从而有效地延长了锁定时间。锁定期间的有效身份验证尝试将不会成功，但也不会重置锁定时间。</p>
      </td></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr></tbody></table>

    <p>有关使用LockOutRealm组件设置容器管理的安全性的更多信息，请参见《 <a href="../realm-howto.html">容器管理的安全性指南》</a> 。</p>

  </div></div>

  <div class="subsection"><h4 id="Null_Realm_-_org.apache.catalina.realm.NullRealm">空域-org.apache.catalina.realm。空域</h4><div class="text">

    <p><strong>NullRealm</strong>是Tomcat的最小实现<code>Realm</code>尝试验证用户名和关联的凭据时始终返回null的接口。当未指定其他领域时，它打算用作默认的领域实现。</p>

    <p>NullRealm实现支持以下其他属性。</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr></tbody></table>

  </div></div>

  <div class="subsection"><h4 id="Authenticated_User_Realm_-_org.apache.catalina.realm.AuthenticatedUserRealm">经过身份验证的用户领域-org.apache.catalina.realm。AuthenticatedUserRealm</h4><div class="text">

    <p><strong>AuthenticatedUserRealm</strong>旨在与Authenticator实现（SSLAuthenticator，SpnegoAuthenticator）一起使用，该实现对用户进行身份验证并获取用户凭据。始终根据提供的用户名创建经过身份验证的主体，而无需进一步验证。</p>
    <p><strong>注意：</strong>将此Realm与不验证提供的凭据的Authenticator实现一起使用是不安全的。</p>

    <p>AuthenticatedUserRealm实现支持以下附加属性。</p>

    <table class="defaultTable"><tbody><tr><th style="width:15%">属性</th><th style="width:85%">描述</th></tr><tr><td><code class="attributeName">transportGuaranteeRedirectStatus</code></td><td>
        <p>容器需要发出HTTP重定向以满足已配置的传输保证的要求时使用的HTTP状态代码。提供的状态码未通过验证。如果未指定，则默认值为<code>302</code>用来。</p>
      </td></tr></tbody></table>

  </div></div>

</div><h3 id="Nested_Components">嵌套组件</h3><div class="text">

  <p>您可以通过在<strong>Realm</strong>元素内嵌套相应的元素来嵌套以下组件：</p>
  <ul>
  <li><strong>CombinedRealm实施</strong> -如果您使用<em>CombinedRealm实施</em>或扩展CombinedRealm的领域，例如LockOutRealm，则一个或多个<strong><realm></realm></strong>元素可能嵌套在其中。</li>
  <li><a href="credentialhandler.html"><strong>CredentialHandler-</strong></a>您最多可以在Realm中嵌套此元素的一个实例。这将配置凭据处理程序，该处理程序将用于通过Realm存储的凭据来验证提供的凭据。如果未指定，将配置默认的<em>MessageDigestCredentialHandler</em> 。</li>
  </ul>

</div><h3 id="Special_Features">特殊功能</h3><div class="text">

  <p>有关配置虚拟主机的单点登录支持的信息，请参阅<a href="host.html">单点登录</a> 。</p>

</div><div class="noprint"><h3 id="comments_section">评论</h3><div class="text"><p class="notice"><strong>注意：</strong>此注释部分收集有关改进Apache Tomcat文档的建议。<br><br>如果您遇到问题并需要帮助，请阅读“ <a href="https://tomcat.apache.org/findhelp.html">查找帮助”</a>页面，然后在tomcat-users <a href="https://tomcat.apache.org/lists.html">邮件列表中</a>询问您的问题。不要在这里问这样的问题。这不是“问答”部分。<br><br><a href="../comments.html">这里</a>解释<a href="../comments.html">了</a> Apache Comments System。如果评论已被实施或被认为无效/偏离主题，则我们的主持人可能会将其删除。
                  </p><div id="comments_thread"></div></div></div></div></div></div></div><footer><div id="footer">版权所有©1999-2019，Apache软件基金会</div></footer></div></body></html>