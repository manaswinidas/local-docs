<html ><head></head><body >﻿
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <title>Storm SQL语言</title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="/assets/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="asset?aid=0">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/assets/css/owl.theme.css" rel="stylesheet">
    <link href="/assets/css/owl.carousel.css" rel="stylesheet">
    <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/owl.carousel.min.js"></script>
    <script type="text/javascript" src="/assets/js/storm.js"></script>
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


  
    <header>
  <div class="container-fluid">
     <div class="row">
          <div class="col-md-5">
            <a href="/index.html"><img src="/images/logo.png" class="logo"></a>
          </div>
          <div class="col-md-5">
            
              <h1>版本：2.1.0</h1>
            
          </div>
          <div class="col-md-2">
            <a href="/downloads.html" class="btn-std btn-block btn-download">下载</a>
          </div>
        </div>
    </div>
</header>
<!--Header End-->
<!--Navigation Begin-->
<div class="navbar" role="banner">
  <div class="container-fluid">
      <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse"></button>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
              <li><a href="/index.html" id="home">家</a></li>
                <li><a href="/getting-help.html" id="getting-help">获得帮助</a></li>
                <li><a href="/about/integrates.html" id="project-info">项目信息</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" id="documentation" data-toggle="dropdown">文献资料<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                      
                        
                          <li><a href="/releases/2.1.0/index.html">2.1.0</a></li>
                        
                      
                        
                          <li><a href="/releases/2.0.0/index.html">2.0.0</a></li>
                        
                      
                        
                          <li><a href="/releases/1.2.3/index.html">1.2.3</a></li>
                        
                      
                    </ul>
                </li>
                <li><a href="/talksAndVideos.html">讲座和幻灯片</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" id="contribute" data-toggle="dropdown">社区<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/contribute/Contributing-to-Storm.html">贡献</a></li>
                        <li><a href="/contribute/People.html">人</a></li>
                        <li><a href="/contribute/BYLAWS.html">按照法律规定</a></li>
                    </ul>
                </li>
                <li><a href="/2019/10/31/storm210-released.html" id="news">新闻</a></li>
            </ul>
        </nav>
    </div>
</div>



    <div class="container-fluid">
    <h1 class="page-title">Storm SQL语言</h1>
          <div class="row">
           	<div class="col-md-12">
	             <!-- Documentation -->

<p class="post-meta"></p>

<div class="documentation-content"><p>Storm SQL使用Apache Calcite解析和评估SQL语句。Storm SQL还采用了Calcite的Rex编译器，因此Storm SQL有望处理Calcite的默认SQL解析器识别的SQL方言。</p>

<p>该页面基于网站上的Calcite SQL参考，并删除了Storm SQL不支持的区域，还添加了Storm SQL支持的区域。</p>

<p>请先阅读<a href="storm-sql.html">Storm SQL集成</a>页面，以了解Storm SQL支持哪些功能。</p>

<h2 id="grammar">语法</h2>

<p>方解石提供了更广泛的SQL语法。但是Storm SQL不是数据库系统，而是处理流数据，因此仅支持语法子集。Storm SQL不会重新定义SQL语法，而只是利用提供的解析器Calcite，因此仍基于Calcite的SQL语法来解析SQL语句。</p>

<p><a href="http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form">类似于BNF</a>形式的SQL语法。</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">statement</span><span class="p">:</span>
      <span class="n">setStatement</span>
  <span class="o">|</span>   <span class="n">resetStatement</span>
  <span class="o">|</span>   <span class="k">explain</span>
  <span class="o">|</span>   <span class="k">describe</span>
  <span class="o">|</span>   <span class="k">insert</span>
  <span class="o">|</span>   <span class="k">update</span>
  <span class="o">|</span>   <span class="n">merge</span>
  <span class="o">|</span>   <span class="k">delete</span>
  <span class="o">|</span>   <span class="n">query</span>

<span class="n">setStatement</span><span class="p">:</span>
      <span class="p">[</span> <span class="k">ALTER</span> <span class="p">(</span> <span class="k">SYSTEM</span> <span class="o">|</span> <span class="k">SESSION</span> <span class="p">)</span> <span class="p">]</span> <span class="k">SET</span> <span class="n">identifier</span> <span class="s1">'='</span> <span class="n">expression</span>

<span class="n">resetStatement</span><span class="p">:</span>
      <span class="p">[</span> <span class="k">ALTER</span> <span class="p">(</span> <span class="k">SYSTEM</span> <span class="o">|</span> <span class="k">SESSION</span> <span class="p">)</span> <span class="p">]</span> <span class="k">RESET</span> <span class="n">identifier</span>
  <span class="o">|</span>   <span class="p">[</span> <span class="k">ALTER</span> <span class="p">(</span> <span class="k">SYSTEM</span> <span class="o">|</span> <span class="k">SESSION</span> <span class="p">)</span> <span class="p">]</span> <span class="k">RESET</span> <span class="k">ALL</span>

<span class="k">explain</span><span class="p">:</span>
      <span class="k">EXPLAIN</span> <span class="n">PLAN</span>
      <span class="p">[</span> <span class="k">WITH</span> <span class="k">TYPE</span> <span class="o">|</span> <span class="k">WITH</span> <span class="k">IMPLEMENTATION</span> <span class="o">|</span> <span class="k">WITHOUT</span> <span class="k">IMPLEMENTATION</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">EXCLUDING</span> <span class="n">ATTRIBUTES</span> <span class="o">|</span> <span class="k">INCLUDING</span> <span class="p">[</span> <span class="k">ALL</span> <span class="p">]</span> <span class="n">ATTRIBUTES</span> <span class="p">]</span>
      <span class="k">FOR</span> <span class="p">(</span> <span class="n">query</span> <span class="o">|</span> <span class="k">insert</span> <span class="o">|</span> <span class="k">update</span> <span class="o">|</span> <span class="n">merge</span> <span class="o">|</span> <span class="k">delete</span> <span class="p">)</span>

<span class="k">describe</span><span class="p">:</span>
      <span class="k">DESCRIBE</span> <span class="k">DATABASE</span> <span class="n">databaseName</span>
   <span class="o">|</span>  <span class="k">DESCRIBE</span> <span class="k">CATALOG</span> <span class="p">[</span> <span class="n">databaseName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">catalogName</span>
   <span class="o">|</span>  <span class="k">DESCRIBE</span> <span class="k">SCHEMA</span> <span class="p">[</span> <span class="p">[</span> <span class="n">databaseName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">catalogName</span> <span class="p">]</span> <span class="p">.</span> <span class="n">schemaName</span>
   <span class="o">|</span>  <span class="k">DESCRIBE</span> <span class="p">[</span> <span class="k">TABLE</span> <span class="p">]</span> <span class="p">[</span> <span class="p">[</span> <span class="p">[</span> <span class="n">databaseName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">catalogName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">schemaName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">tableName</span> <span class="p">[</span> <span class="n">columnName</span> <span class="p">]</span>
   <span class="o">|</span>  <span class="k">DESCRIBE</span> <span class="p">[</span> <span class="k">STATEMENT</span> <span class="p">]</span> <span class="p">(</span> <span class="n">query</span> <span class="o">|</span> <span class="k">insert</span> <span class="o">|</span> <span class="k">update</span> <span class="o">|</span> <span class="n">merge</span> <span class="o">|</span> <span class="k">delete</span> <span class="p">)</span>

<span class="k">insert</span><span class="p">:</span>
      <span class="p">(</span> <span class="k">INSERT</span> <span class="o">|</span> <span class="n">UPSERT</span> <span class="p">)</span> <span class="k">INTO</span> <span class="n">tablePrimary</span>
      <span class="p">[</span> <span class="s1">'('</span> <span class="k">column</span> <span class="p">[,</span> <span class="k">column</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span>
      <span class="n">query</span>

<span class="k">update</span><span class="p">:</span>
      <span class="k">UPDATE</span> <span class="n">tablePrimary</span>
      <span class="k">SET</span> <span class="n">assign</span> <span class="p">[,</span> <span class="n">assign</span> <span class="p">]</span><span class="o">*</span>
      <span class="p">[</span> <span class="k">WHERE</span> <span class="n">booleanExpression</span> <span class="p">]</span>

<span class="n">assign</span><span class="p">:</span>
      <span class="n">identifier</span> <span class="s1">'='</span> <span class="n">expression</span>

<span class="n">merge</span><span class="p">:</span>
      <span class="n">MERGE</span> <span class="k">INTO</span> <span class="n">tablePrimary</span> <span class="p">[</span> <span class="p">[</span> <span class="k">AS</span> <span class="p">]</span> <span class="k">alias</span> <span class="p">]</span>
      <span class="k">USING</span> <span class="n">tablePrimary</span>
      <span class="k">ON</span> <span class="n">booleanExpression</span>
      <span class="p">[</span> <span class="k">WHEN</span> <span class="n">MATCHED</span> <span class="k">THEN</span> <span class="k">UPDATE</span> <span class="k">SET</span> <span class="n">assign</span> <span class="p">[,</span> <span class="n">assign</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">WHEN</span> <span class="k">NOT</span> <span class="n">MATCHED</span> <span class="k">THEN</span> <span class="k">INSERT</span> <span class="k">VALUES</span> <span class="s1">'('</span> <span class="n">value</span> <span class="p">[</span> <span class="p">,</span> <span class="n">value</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span>

<span class="k">delete</span><span class="p">:</span>
      <span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">tablePrimary</span> <span class="p">[</span> <span class="p">[</span> <span class="k">AS</span> <span class="p">]</span> <span class="k">alias</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">WHERE</span> <span class="n">booleanExpression</span> <span class="p">]</span>

<span class="n">query</span><span class="p">:</span>
      <span class="k">values</span>
  <span class="o">|</span>   <span class="k">WITH</span> <span class="n">withItem</span> <span class="p">[</span> <span class="p">,</span> <span class="n">withItem</span> <span class="p">]</span><span class="o">*</span> <span class="n">query</span>
  <span class="o">|</span>   <span class="err">{</span>
          <span class="k">select</span>
      <span class="o">|</span>   <span class="n">selectWithoutFrom</span>
      <span class="o">|</span>   <span class="n">query</span> <span class="k">UNION</span> <span class="p">[</span> <span class="k">ALL</span> <span class="p">]</span> <span class="n">query</span>
      <span class="o">|</span>   <span class="n">query</span> <span class="k">EXCEPT</span> <span class="n">query</span>
      <span class="o">|</span>   <span class="n">query</span> <span class="k">INTERSECT</span> <span class="n">query</span>
      <span class="err">}</span>
      <span class="p">[</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderItem</span> <span class="p">[,</span> <span class="n">orderItem</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">LIMIT</span> <span class="err">{</span> <span class="k">count</span> <span class="o">|</span> <span class="k">ALL</span> <span class="err">}</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">OFFSET</span> <span class="k">start</span> <span class="err">{</span> <span class="k">ROW</span> <span class="o">|</span> <span class="k">ROWS</span> <span class="err">}</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">FETCH</span> <span class="err">{</span> <span class="k">FIRST</span> <span class="o">|</span> <span class="k">NEXT</span> <span class="err">}</span> <span class="p">[</span> <span class="k">count</span> <span class="p">]</span> <span class="err">{</span> <span class="k">ROW</span> <span class="o">|</span> <span class="k">ROWS</span> <span class="err">}</span> <span class="p">]</span>

<span class="n">withItem</span><span class="p">:</span>
      <span class="n">name</span>
      <span class="p">[</span> <span class="s1">'('</span> <span class="k">column</span> <span class="p">[,</span> <span class="k">column</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span>
      <span class="k">AS</span> <span class="s1">'('</span> <span class="n">query</span> <span class="s1">')'</span>

<span class="n">orderItem</span><span class="p">:</span>
      <span class="n">expression</span> <span class="p">[</span> <span class="k">ASC</span> <span class="o">|</span> <span class="k">DESC</span> <span class="p">]</span> <span class="p">[</span> <span class="n">NULLS</span> <span class="k">FIRST</span> <span class="o">|</span> <span class="n">NULLS</span> <span class="k">LAST</span> <span class="p">]</span>

<span class="k">select</span><span class="p">:</span>
      <span class="k">SELECT</span> <span class="p">[</span> <span class="n">STREAM</span> <span class="p">]</span> <span class="p">[</span> <span class="k">ALL</span> <span class="o">|</span> <span class="k">DISTINCT</span> <span class="p">]</span>
          <span class="err">{</span> <span class="o">*</span> <span class="o">|</span> <span class="n">projectItem</span> <span class="p">[,</span> <span class="n">projectItem</span> <span class="p">]</span><span class="o">*</span> <span class="err">}</span>
      <span class="k">FROM</span> <span class="n">tableExpression</span>
      <span class="p">[</span> <span class="k">WHERE</span> <span class="n">booleanExpression</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="err">{</span> <span class="n">groupItem</span> <span class="p">[,</span> <span class="n">groupItem</span> <span class="p">]</span><span class="o">*</span> <span class="err">}</span> <span class="p">]</span>
      <span class="p">[</span> <span class="k">HAVING</span> <span class="n">booleanExpression</span> <span class="p">]</span>
      <span class="p">[</span> <span class="n">WINDOW</span> <span class="n">windowName</span> <span class="k">AS</span> <span class="n">windowSpec</span> <span class="p">[,</span> <span class="n">windowName</span> <span class="k">AS</span> <span class="n">windowSpec</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>

<span class="n">selectWithoutFrom</span><span class="p">:</span>
      <span class="k">SELECT</span> <span class="p">[</span> <span class="k">ALL</span> <span class="o">|</span> <span class="k">DISTINCT</span> <span class="p">]</span>
          <span class="err">{</span> <span class="o">*</span> <span class="o">|</span> <span class="n">projectItem</span> <span class="p">[,</span> <span class="n">projectItem</span> <span class="p">]</span><span class="o">*</span> <span class="err">}</span>

<span class="n">projectItem</span><span class="p">:</span>
      <span class="n">expression</span> <span class="p">[</span> <span class="p">[</span> <span class="k">AS</span> <span class="p">]</span> <span class="n">columnAlias</span> <span class="p">]</span>
  <span class="o">|</span>   <span class="n">tableAlias</span> <span class="p">.</span> <span class="o">*</span>

<span class="n">tableExpression</span><span class="p">:</span>
      <span class="n">tableReference</span> <span class="p">[,</span> <span class="n">tableReference</span> <span class="p">]</span><span class="o">*</span>
  <span class="o">|</span>   <span class="n">tableExpression</span> <span class="p">[</span> <span class="k">NATURAL</span> <span class="p">]</span> <span class="p">[</span> <span class="k">LEFT</span> <span class="o">|</span> <span class="k">RIGHT</span> <span class="o">|</span> <span class="k">FULL</span> <span class="p">]</span> <span class="k">JOIN</span> <span class="n">tableExpression</span> <span class="p">[</span> <span class="n">joinCondition</span> <span class="p">]</span>

<span class="n">joinCondition</span><span class="p">:</span>
      <span class="k">ON</span> <span class="n">booleanExpression</span>
  <span class="o">|</span>   <span class="k">USING</span> <span class="s1">'('</span> <span class="k">column</span> <span class="p">[,</span> <span class="k">column</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>

<span class="n">tableReference</span><span class="p">:</span>
      <span class="n">tablePrimary</span>
      <span class="p">[</span> <span class="p">[</span> <span class="k">AS</span> <span class="p">]</span> <span class="k">alias</span> <span class="p">[</span> <span class="s1">'('</span> <span class="n">columnAlias</span> <span class="p">[,</span> <span class="n">columnAlias</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span> <span class="p">]</span>

<span class="n">tablePrimary</span><span class="p">:</span>
      <span class="p">[</span> <span class="p">[</span> <span class="n">catalogName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">schemaName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">tableName</span>
      <span class="s1">'('</span> <span class="k">TABLE</span> <span class="p">[</span> <span class="p">[</span> <span class="n">catalogName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">schemaName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">tableName</span> <span class="s1">')'</span>
  <span class="o">|</span>   <span class="p">[</span> <span class="k">LATERAL</span> <span class="p">]</span> <span class="s1">'('</span> <span class="n">query</span> <span class="s1">')'</span>
  <span class="o">|</span>   <span class="k">UNNEST</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="s1">')'</span> <span class="p">[</span> <span class="k">WITH</span> <span class="k">ORDINALITY</span> <span class="p">]</span>
  <span class="o">|</span>   <span class="p">[</span> <span class="k">LATERAL</span> <span class="p">]</span> <span class="k">TABLE</span> <span class="s1">'('</span> <span class="p">[</span> <span class="k">SPECIFIC</span> <span class="p">]</span> <span class="n">functionName</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="s1">')'</span>

<span class="k">values</span><span class="p">:</span>
      <span class="k">VALUES</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span>

<span class="n">groupItem</span><span class="p">:</span>
      <span class="n">expression</span>
  <span class="o">|</span>   <span class="s1">'('</span> <span class="s1">')'</span>
  <span class="o">|</span>   <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>
  <span class="o">|</span>   <span class="k">CUBE</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>
  <span class="o">|</span>   <span class="k">ROLLUP</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>
  <span class="o">|</span>   <span class="k">GROUPING</span> <span class="k">SETS</span> <span class="s1">'('</span> <span class="n">groupItem</span> <span class="p">[,</span> <span class="n">groupItem</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>

<span class="n">windowRef</span><span class="p">:</span>
      <span class="n">windowName</span>
  <span class="o">|</span>   <span class="n">windowSpec</span>

<span class="n">windowSpec</span><span class="p">:</span>
      <span class="p">[</span> <span class="n">windowName</span> <span class="p">]</span>
      <span class="s1">'('</span>
      <span class="p">[</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderItem</span> <span class="p">[,</span> <span class="n">orderItem</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
      <span class="p">[</span> <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
      <span class="p">[</span>
          <span class="n">RANGE</span> <span class="n">numericOrIntervalExpression</span> <span class="err">{</span> <span class="n">PRECEDING</span> <span class="o">|</span> <span class="n">FOLLOWING</span> <span class="err">}</span>
      <span class="o">|</span>   <span class="k">ROWS</span> <span class="n">numericExpression</span> <span class="err">{</span> <span class="n">PRECEDING</span> <span class="o">|</span> <span class="n">FOLLOWING</span> <span class="err">}</span>
      <span class="p">]</span>
      <span class="s1">')'</span></code></pre></figure>

<p>在<em>merge中</em> ，必须存在WHEN MATCHED和WHEN NOT MATCHED子句中的至少一个。</p>

<p>在<em>orderItem中</em> ，如果<em>expression</em>是一个正整数<em>n</em> ，则表示SELECT子句中的第<em>n</em>个项目。</p>

<p>聚合查询是包含GROUP BY或HAVING子句或SELECT子句中的聚合函数的查询。在聚合查询的SELECT，HAVING和ORDER BY子句中，所有表达式在当前组内必须是常量（即，分组由GROUP BY子句定义的常量或常量），聚合函数或常量的组合和汇总功能。聚合和分组功能只能出现在聚合查询中，并且只能出现在SELECT，HAVING或ORDER BY子句中。</p>

<p>标量子查询是用作表达式的子查询。如果子查询不返回任何行，则值为NULL；否则为0。如果返回多行，则为错误。</p>

<p>IN，EXISTS和标量子查询可以出现在可以出现表达式的任何位置（例如，JOIN的SELECT子句，WHERE子句，ON子句，或作为聚合函数的参数）。</p>

<p>IN，EXISTS或标量子查询可能是相关的；也就是说，它可以引用封闭查询的FROM子句中的表。</p>

<p><em>selectWithoutFrom</em>等效于VALUES，但不是标准SQL，仅在某些<a href="https://calcite.apache.org/apidocs/org/apache/calcite/sql/validate/SqlConformance.html#isFromRequired--">符合级别中</a>允许使用。</p>

<h2 id="keywords">关键词</h2>

<p>以下是SQL关键字的列表。此列表也来自Calcite SQL参考。保留关键字为<strong>粗体</strong> 。</p>

<p><strong>A，ABS，</strong>绝对的，ACTION，ADA，ADD，ADMIN，之后， <strong>所有</strong> ， <strong>配备</strong> <strong>允许</strong> <strong>，ALTER，</strong>总是<strong>和</strong> ， <strong><strong>有的</strong>话</strong> <strong><strong><strong>，ARRAY，AS，ASC，ASENSITIVE，ASSERTION，</strong></strong></strong>转让， <strong>非对称</strong> <strong>，AT，</strong> <strong>原子</strong> ， ATTRIBUTE，属性， <strong>授权</strong> <strong><strong>，AVG，BEFORE，BEGIN，</strong></strong>伯努利<strong><strong><strong><strong><strong><strong><strong>BETWEEN，BIGINT，BINARY，BIT，BLOB，BOOLEAN，BOTH，</strong></strong></strong></strong></strong></strong></strong>广度<strong><strong><strong><strong>，BY，C，CALL，CALLED，CARDINALITY，CASCADE</strong></strong></strong></strong> <strong>级联</strong> <strong><strong>，CASE，CAST，CATALOG，</strong></strong> <strong>CATALOG_NAME，CEIL，</strong> <strong>天花板</strong> ，世纪链条<strong>，CHAR，</strong> <strong>性格</strong> ，CHARACTERISTICTS，人物<strong><strong>，CHARACTER_LENGTH，CHARACTER_SET_CATALOG，CHARACTER_SET_NAME，CHARACTER_SET_SCHEMA，CHAR_LENGTH，</strong></strong> <strong>检查</strong> <strong><strong><strong>，CLASS_ORIGIN，CLOB，CLOSE，COALESCE，COBOL，</strong></strong></strong> <strong>整理</strong> ，整理，COLLATION_CATALOG，COLLATION_NAME，COLLATION_SCHEMA， <strong>COLLECT</strong> ， <strong>COLUMN</strong> ，COLUMN_NAME，COMMAND_FUNCTION，COMMAND_FUNCTION_CODE， <strong>COMMIT</strong> ，COMMITTED， <strong>CONDITION</strong> ，CONDITION_NUMBER， <strong>CONNECT</strong> ，CONNECTION，CONNECTION_NAME， <strong>CONSTRAINT</strong> ，CONSTRAINTS，CONSTRAINT_CATALOG，CONSTRAINT_NAME，CONSTRAINT_SCHEMA， CONTINUE， <strong>转换</strong> <strong>，CORR，</strong> <strong>相应的</strong> <strong><strong><strong><strong><strong><strong><strong>，COUNT，COVAR_POP，COVAR_SAMP，CREATE，CROSS，CUBE，CUME_DIST，</strong></strong></strong></strong></strong></strong></strong> <strong>电流</strong> <strong><strong><strong>，CURRENT_CATALOG，CURRENT_DATE，CURRENT_DEFAULT_TRANSFORM_GROUP，</strong></strong></strong> <strong>的<strong><strong><strong><strong><strong><strong><strong><strong>current_path，CURRENT_ROLE，CURRENT_SCHEMA，CURRENT_TIME，CURRENT_TIMESTAMP，CURRENT_TRANSFORM_GROUP_FOR_TYPE，CURRENT_USER，CURSOR，CURSOR_NAME，CYCLE，</strong></strong></strong></strong></strong></strong></strong></strong></strong>数据，数据库， <strong>日期</strong> <strong><strong><strong>，DATETIME_INTERVAL_CODE，DATETIME_INTERVAL_PRECISION，DAY，DEALLOCATE，DEC，</strong></strong></strong>十年来<strong>，DECIMAL，</strong> <strong>声明</strong> ， <strong>违约</strong> ，违约，DEFERRABLE，推迟，定义DEFINER，程度<strong><strong>，DELETE，DENSE_RANK，</strong></strong>深度<strong>，DEREF，</strong>派生<strong>，DESC，DESCRIBE</strong>说明，描述<strong>，DETERMINISTIC，</strong>诊断<strong><strong>，DISALLOW，DISCONNECT，</strong></strong>调度<strong><strong><strong><strong><strong>，DISTINCT，DOMAIN，DOUBLE，DOW，DOY，DROP，DYNAMIC，DYNAMIC_FUNCTION，DYNAMIC_FUNCTION_CODE，EACH，</strong></strong></strong></strong></strong> <strong>元素</strong> <strong><strong><strong>，ELSE，END，END-EXEC，EPOCH，</strong></strong></strong>等于<strong>ESCAPE，</strong> <strong>EVERY，</strong> <strong>除</strong> ，异常，排除不计<strong><strong>，EXEC，EXECUTE</strong></strong> <strong>存在</strong> <strong>，EXP，</strong> <strong>讲解</strong> ， <strong>扩展</strong> ， <strong>外部</strong> ， <strong>提取</strong> <strong><strong>，FALSE，FETCH</strong></strong> <strong>FIL TER</strong> ，FINAL，FIRST， <strong>FIRST_VALUE</strong> ， <strong>FLOAT</strong> ， <strong>FLOOR</strong> ，以下， <strong>FOR</strong> ， <strong>FOREIGN</strong> ，FORTRAN，FOUND，FRAC_SECOND， <strong>FREE</strong> ， <strong>FROM</strong> ， <strong>FULL</strong> ， <strong>FULL</strong> ， <strong>FUNCTION</strong> ， <strong>FUSION</strong> ，G，GENERAL，GENERGENED， <strong>GET</strong> ， <strong>GET</strong> ， <strong>GLOBAL</strong> ，GO，GOTO， <strong>GRANT</strong> ，当然， <strong>集团</strong> ， <strong>分组</strong> <strong>，HAVING，</strong>层次<strong><strong>，HOLD，HOUR，</strong></strong> <strong>身份</strong> ，立即，实施， <strong>进口</strong> <strong>，IN，</strong>包括增量<strong>指标</strong> ，最初<strong><strong>，INNER，INOUT，</strong></strong>投入， <strong>没心没肺</strong> <strong>，INSERT，</strong>实例，实例化<strong><strong>，INT，INTEGER，</strong></strong> <strong>INTERSECT</strong> ， <strong>INTERSECTION</strong> ， <strong>INTERVAL</strong> ， <strong>INTO</strong> ，INVOKER， <strong>IS</strong> ，隔离，JAVA， <strong>JOIN</strong> ，K，KEY，KEY_MEMBER，KEY_TYPE，LABEL， <strong>LANGUAGE</strong> ， <strong>LARGE</strong> ，LAST， <strong>LAST_VALUE</strong> ， <strong>LATERAL</strong> ， <strong>LEADING</strong> ， <strong>LEFT</strong> ，LENGTH，LEVEL，LIBRARY， <strong>LIKE</strong> ， <strong><strong><strong><strong><strong><strong>LIMIT，LN，LOCAL，LOCALTIME，LOCALTIMESTAMP，LOCATOR，LOWER，</strong></strong></strong></strong></strong></strong>男<strong>，MAP，MATCH，</strong>匹配时<strong>，MAX，MAXVALUE，</strong> <strong>构件</strong> <strong>MERGE，message_length</strong>中<strong><strong><strong><strong>，MESSAGE_OCTET_LENGTH，MESSAGE_TEXT，METHOD，MICROSECOND，MILLENNIUM，MIN，MINUTE，MINVALUE，MOD，</strong></strong></strong></strong> <strong><strong><strong><strong>MODIFIES，MODULE，MONTH，MORE，MULTISET，</strong></strong></strong></strong>腮腺炎，名称，姓名， <strong>民族</strong> ， <strong>自然</strong> <strong>，NCHAR，</strong> <strong>NCLOB</strong> ，嵌套， <strong>NEW</strong> ， <strong>NEXT</strong> ， <strong>NO</strong> ， <strong>NONE</strong> ， <strong>NORMALIZE</strong> ，NORMALIZED， <strong>NOT</strong> ， <strong>NULL</strong> ，NULLABLE， <strong>NULLIF</strong> ，NULLS，NUMBER， <strong>NUMERIC</strong> ，OBJECT，OCTETS， <strong>OCTET_LENGTH</strong> ， <strong>OF</strong> ， <strong>OFFSET</strong> ， <strong>OLD</strong> ， <strong>ON</strong> ， <strong>ON</strong> ， <strong>ON</strong> ， <strong>ONLY</strong> ， <strong>OPEN</strong> ，OPTION，选项， <strong>或者</strong> ， <strong>订单</strong> ，订货，序数，其他<strong><strong><strong><strong>，OUT，OUTER，OUTPUT，OVER，OVERLAPS，</strong></strong></strong></strong> <strong>叠加</strong> ，覆盖，PAD， <strong>参数</strong> PARAMETER_MODE，PARAMETER_NAME，PARAMETER_ORDINAL_POSITION，PARAMETER_SPECIFIC_CATALOG，PARAMETER_SPECIFIC_NAME，PARAMETER_SPECIFIC_SCHEMA，部分， <strong>分区</strong> ，PASCAL，直通， <strong><strong><strong>PATH，PERCENTILE_CONT，PERCENTILE_DISC，PERCENT_RANK，</strong></strong></strong>配售，计划，PLI， <strong>地位</strong> ， <strong>权力</strong> ，以上， <strong>精度</strong> ， <strong>准备</strong> ，保存<strong>，PRIMARY，PRIOR，</strong>特权， <strong>程序</strong> ，公众，季， <strong>范围</strong> <strong>，RANK，</strong>读， <strong>读</strong> <strong>，REAL，</strong> <strong>递归</strong> <strong>REF，</strong> <strong>参考文献</strong> ， <strong>引用</strong> <strong><strong><strong><strong><strong><strong><strong><strong><strong>REGR_AVGX，REGR_AVGY，REGR_COUNT，REGR_INTERCEPT，REGR_R2，REGR_SLOPE，REGR_SXX，REGR_SXY，REGR_SYY，</strong></strong></strong></strong></strong></strong></strong></strong></strong>亲戚， <strong>发布</strong> ，可重复的<strong>，RESET</strong>重启，限制<strong>结果</strong> ， <strong>返回</strong> ，RETURNED_CARDINALITY， RETURNED_LENGTH，RETURNED_OCTET_LENGTH，RETURNED_SQLSTATE， <strong>退货</strong> <strong><strong>，REVOKE，RIGHT，</strong></strong>角色<strong>，ROLLBACK，</strong> <strong>汇总</strong>操作，常规<strong>，ROUTINE_CATALOG，ROUTINE_NAME，ROUTINE_SCHEMA，ROW，</strong> <strong>行数</strong> <strong><strong>，ROW_COUNT，ROW_NUMBER，SAVEPOINT，</strong></strong>规模，模式，SCHEMA_NAME， <strong>范围</strong> ，SCOPE_CATALOGS，SCOPE_NAME，SCOPE_SCHEMA， <strong>SCROLL</strong> ， <strong>SEARCH</strong> ， <strong>SECOND</strong> ，SECTION，SECURITY， <strong>SELECT</strong> ，SELF， <strong>SENSITIVE</strong> ，SEQUENCE，SERIALIZABLE，SERVER，SERVER_NAME，SESSION， <strong>SESSION_USER</strong> ， <strong>SET</strong> ， <strong>SET</strong> ， <strong>SETSIRLAR</strong> ，SIMPLE，SIMPLE，SIZE， <strong>SMALLINT</strong> ， <strong>SOMECE</strong> ，SOURCE，SPACE， <strong>SPECIFIC</strong> ， <strong>SPECIFIC</strong> <strong><strong><strong><strong><strong><strong>SPECIFIC_NAME，SQL，SQLEXCEPTION，SQLSTATE，SQLWARNING，SQL_TSI_DAY，SQL_TSI_FRAC_SECOND，SQL_TSI_HOUR，SQL_TSI_MICROSECOND，SQL_TSI_MINUTE，SQL_TSI_MONTH，SQL_TSI_QUARTER，SQL_TSI_SECOND，SQL_TSI_WEEK，SQL_TSI_YEAR，SQRT，START，</strong></strong></strong></strong></strong></strong>州，声明<strong><strong><strong><strong>，STATIC，STDDEV_POP，STDDEV_SAMP，STREAM，</strong></strong></strong></strong>结构，风格， SUBCLASS_ORIGIN， <strong>SUBMULTISET</strong> ，SUBSTITUTE， <strong>SUBSTRING</strong> ， <strong>SUM</strong> ， <strong>SYMMETRIC</strong> ， <strong>SYSTEM</strong> ， <strong>SYSTEM_USER</strong> ， <strong>TABLE</strong> ， <strong>TABLESAMPLE</strong> ，TABLE_NAME，TEMPORARY， <strong>THEN</strong> ，TI ES， <strong>时间</strong> ， <strong>时间戳</strong> <strong><strong><strong><strong>TIMESTAMPADD，TIMESTAMPDIFF，TIMEZONE_HOUR，TIMEZONE_MINUTE，TINYINT，TO，TOP_LEVEL_COUNT，</strong></strong></strong></strong> <strong>尾随</strong> ，交易，TRANSACTIONS_ACTIVE，TRANSACTIONS_COMMITTED，TRANSACTIONS_ROLLED_BACK，转换，转换， <strong>翻译</strong> ， <strong>翻译</strong> ， <strong>处理</strong> ， <strong>触发器</strong> <strong>，TRIGGER_CATALOG，TRIGGER_NAME，TRIGGER_SCHEMA，TRIM，</strong> <strong><strong>TRUE，TYPE，UESCAPE，</strong></strong>无界的，未提交，下<strong>，UNION，</strong> <strong>独特</strong> <strong>的</strong> ， <strong>未知的</strong> ，未命名<strong><strong>，UNNEST，UPDATE，</strong></strong> <strong>上</strong> <strong>，UPSERT，</strong>用法<strong>，USER，USER_DEFINED_TYPE_CATALOG，USER_DEFINED_TYPE_CODE，USER_DEFINED_TYPE_NAME，USER_DEFINED_TYPE_SCHEMA</strong> <strong>使用</strong> ， <strong>价值</strong> ， <strong>价值</strong> <strong><strong>，VARBINARY，VARCHAR，</strong></strong> <strong>VARYING</strong> ， <strong>VAR_POP</strong> ， <strong>VAR_SAMP</strong> ，版本，视图，星期， <strong>何时</strong> ， <strong>何时</strong> ， <strong>何地</strong> ， <strong>WHERE</strong> ， <strong>WIDTH_BUCKET</strong> ， <strong>窗口</strong> ， <strong>WITH</strong> ， <strong>WITHIN</strong> ， <strong>WITHOUT</strong> ， <strong>WITH</strong> ，WORK，WRAPPER，WRITE，XML， <strong>YEAR</strong> ，ZONE。</p>

<h2 id="identifiers">身份标识</h2>

<p>标识符是SQL查询中使用的表，列和其他元数据元素的名称。</p>

<p>未加引号的标识符（例如emp）必须以字母开头，并且只能包含字母，数字和下划线。它们隐式转换为大写。</p>

<p>带引号的标识符，例如<code>"Employee Name"</code> ，以双引号开头和结尾。它们实际上可以包含任何字符，包括空格和其他标点符号。如果希望在标识符中包含双引号，请使用另一个双引号将其转义，如下所示： <code>"An employee called ""Fred""."</code> 。</p>

<p>在Calcite中，将标识符与引用对象的名称匹配是区分大小写的。但是请记住，未匹配的标识符在匹配之前会隐式转换为大写，并且如果引用的对象是使用未引用的标识符为其名称创建的，则其名称也将转换为大写。</p>

<h2 id="data-types">资料类型</h2>

<h3 id="scalar-types">标量类型</h3>

<table><thead>
<tr>
<th style="text-align:left">数据类型</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">范围和示例</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">布兰</td>
<td style="text-align:left">逻辑值</td>
<td style="text-align:left">值：TRUE，FALSE，UNKNOWN</td>
</tr>
<tr>
<td style="text-align:left">天音</td>
<td style="text-align:left">1个字节的有符号整数</td>
<td style="text-align:left">范围是-255至256</td>
</tr>
<tr>
<td style="text-align:left">SMALLINT</td>
<td style="text-align:left">2字节有符号整数</td>
<td style="text-align:left">范围是-32768至32767</td>
</tr>
<tr>
<td style="text-align:left">整数，整数</td>
<td style="text-align:left">4字节有符号整数</td>
<td style="text-align:left">范围是-2147483648至2147483647</td>
</tr>
<tr>
<td style="text-align:left">比金特</td>
<td style="text-align:left">8字节有符号整数</td>
<td style="text-align:left">范围是-9223372036854775808至9223372036854775807</td>
</tr>
<tr>
<td style="text-align:left">十进制（p，s）</td>
<td style="text-align:left">固定点</td>
<td style="text-align:left">示例：123.45是DECIMAL（5，2）值。</td>
</tr>
<tr>
<td style="text-align:left">数字</td>
<td style="text-align:left">固定点</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">真实，浮动</td>
<td style="text-align:left">4字节浮点数</td>
<td style="text-align:left">6位十进制数字精度</td>
</tr>
<tr>
<td style="text-align:left">双</td>
<td style="text-align:left">8字节浮点数</td>
<td style="text-align:left">15位小数精度</td>
</tr>
<tr>
<td style="text-align:left">CHAR（n），CHARACTER（n）</td>
<td style="text-align:left">定宽字符串</td>
<td style="text-align:left">'Hello'，''（空字符串），_latin1'Hello'，n'Hello'，_UTF16'Hello'，'Hello''there'（分为多个部分）</td>
</tr>
<tr>
<td style="text-align:left">VARCHAR（n），字符变化（n）</td>
<td style="text-align:left">可变长度字符串</td>
<td style="text-align:left">作为CHAR（n）</td>
</tr>
<tr>
<td style="text-align:left">二进制（n）</td>
<td style="text-align:left">定宽二进制字符串</td>
<td style="text-align:left">x'45F0AB'，x''（空二进制字符串），x'AB''CD'（多部分二进制字符串常量）</td>
</tr>
<tr>
<td style="text-align:left">VARBINARY（n），BINARY VARYING（n）</td>
<td style="text-align:left">可变长度的二进制字符串</td>
<td style="text-align:left">作为BINARY（n）</td>
</tr>
<tr>
<td style="text-align:left">日期</td>
<td style="text-align:left">日期</td>
<td style="text-align:left">示例：DATE'1969-07-20'</td>
</tr>
<tr>
<td style="text-align:left">时间</td>
<td style="text-align:left">一天中的时间</td>
<td style="text-align:left">示例：TIME '20：17：40'</td>
</tr>
<tr>
<td style="text-align:left">时间戳[无时区]</td>
<td style="text-align:left">日期和时间</td>
<td style="text-align:left">示例：TIMESTAMP'1969-07-20 20:17:40'</td>
</tr>
<tr>
<td style="text-align:left">时区时间戳</td>
<td style="text-align:left">带时区的日期和时间</td>
<td style="text-align:left">示例：TIMESTAMP'1969-07-20 20:17:40美国/洛杉矶'</td>
</tr>
<tr>
<td style="text-align:left">INTERVAL timeUnit [TO timeUnit]</td>
<td style="text-align:left">日期时间间隔</td>
<td style="text-align:left">示例：每年MONTVAL'1：5'，MONTVAL DAY'45'</td>
</tr>
<tr>
<td style="text-align:left">锚定间隔</td>
<td style="text-align:left">日期时间间隔</td>
<td style="text-align:left">示例：（DATE'1969-07-20'，DATE'1972-08-29'）</td>
</tr>
</tbody></table>

<p>哪里：</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">timeUnit</span><span class="p">:</span>
  <span class="n">MILLENNIUM</span> <span class="o">|</span> <span class="n">CENTURY</span> <span class="o">|</span> <span class="n">DECADE</span> <span class="o">|</span> <span class="k">YEAR</span> <span class="o">|</span> <span class="n">QUARTER</span> <span class="o">|</span> <span class="k">MONTH</span> <span class="o">|</span> <span class="n">WEEK</span> <span class="o">|</span> <span class="n">DOY</span> <span class="o">|</span> <span class="n">DOW</span> <span class="o">|</span> <span class="k">DAY</span> <span class="o">|</span> <span class="n">HOUR</span> <span class="o">|</span> <span class="k">MINUTE</span> <span class="o">|</span> <span class="k">SECOND</span> <span class="o">|</span> <span class="n">EPOCH</span></code></pre></figure>

<p>注意：</p>

<ul>
<li>DATE，TIME和TIMESTAMP没有时区。甚至没有隐式时区，例如UTC（如Java）或本地时区。它留给用户或应用程序提供时区。</li>
</ul>

<h3 id="non-scalar-types">非标量类型</h3>

<table><thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">任何</td>
<td style="text-align:left">未知类型的值</td>
</tr>
<tr>
<td style="text-align:left">行</td>
<td style="text-align:left">具有1列或更多列的行</td>
</tr>
<tr>
<td style="text-align:left">地图</td>
<td style="text-align:left">映射到值的键集合</td>
</tr>
<tr>
<td style="text-align:left">多组</td>
<td style="text-align:left">无序集合可能包含重复项</td>
</tr>
<tr>
<td style="text-align:left">阵列</td>
<td style="text-align:left">有序，连续的集合可能包含重复项</td>
</tr>
<tr>
<td style="text-align:left">光标</td>
<td style="text-align:left">游标执行查询的结果</td>
</tr>
</tbody></table>

<h2 id="operators-and-functions">运算符和功能</h2>

<h3 id="operator-precedence">运算符优先级</h3>

<p>运算符的优先级和关联性，从高到低。</p>

<table><thead>
<tr>
<th style="text-align:left">操作员</th>
<th style="text-align:left">关联性</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">。</td>
<td style="text-align:left">剩下</td>
</tr>
<tr>
<td style="text-align:left">[]（数组元素）</td>
<td style="text-align:left">剩下</td>
</tr>
<tr>
<td style="text-align:left">+-（一元加号，减号）</td>
<td style="text-align:left">对</td>
</tr>
<tr>
<td style="text-align:left">* /</td>
<td style="text-align:left">剩下</td>
</tr>
<tr>
<td style="text-align:left">+-</td>
<td style="text-align:left">剩下</td>
</tr>
<tr>
<td style="text-align:left">在，喜欢，相似之间</td>
<td style="text-align:left">--</td>
</tr>
<tr>
<td style="text-align:left"><> = <=> = <>！=</td>
<td style="text-align:left">剩下</td>
</tr>
<tr>
<td style="text-align:left">IS NULL，IS FALSE，IS NOT TRUE等。</td>
<td style="text-align:left">--</td>
</tr>
<tr>
<td style="text-align:left">不</td>
<td style="text-align:left">对</td>
</tr>
<tr>
<td style="text-align:left">和</td>
<td style="text-align:left">剩下</td>
</tr>
<tr>
<td style="text-align:left">要么</td>
<td style="text-align:left">剩下</td>
</tr>
</tbody></table>

<h3 id="comparison-operators">比较运算符</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">值1 =值2</td>
<td style="text-align:left">等于</td>
</tr>
<tr>
<td style="text-align:left">值1 <>值2</td>
<td style="text-align:left">不相等</td>
</tr>
<tr>
<td style="text-align:left">值1！= value2</td>
<td style="text-align:left">不相等（仅在某些一致性级别可用）</td>
</tr>
<tr>
<td style="text-align:left">值1>值2</td>
<td style="text-align:left">比...更棒</td>
</tr>
<tr>
<td style="text-align:left">值1> =值2</td>
<td style="text-align:left">大于或等于</td>
</tr>
<tr>
<td style="text-align:left">值1 <值2</td>
<td style="text-align:left">少于</td>
</tr>
<tr>
<td style="text-align:left">值1 <=值2</td>
<td style="text-align:left">小于或等于</td>
</tr>
<tr>
<td style="text-align:left">值IS NULL</td>
<td style="text-align:left"><em>值</em>是否为空</td>
</tr>
<tr>
<td style="text-align:left">值不为空</td>
<td style="text-align:left"><em>值</em>是否不为null</td>
</tr>
<tr>
<td style="text-align:left">值1与值2不同</td>
<td style="text-align:left">两个值是否不相等，将空值视为相同</td>
</tr>
<tr>
<td style="text-align:left">值1与值2的区别不大</td>
<td style="text-align:left">两个值是否相等，将空值视为相同</td>
</tr>
<tr>
<td style="text-align:left">value1和value3之间的value1</td>
<td style="text-align:left"><em>value1</em>大于或等于<em>value2</em>且小于或等于<em>value3</em></td>
</tr>
<tr>
<td style="text-align:left">value1不在value2和value3之间</td>
<td style="text-align:left"><em>value1</em>小于<em>value2</em>还是大于<em>value3</em></td>
</tr>
<tr>
<td style="text-align:left">string1喜欢string2 [ESCAPE string3]</td>
<td style="text-align:left">无论是<em>字符串1</em>模式<em>字符串2</em>相匹配</td>
</tr>
<tr>
<td style="text-align:left">string1不喜欢string2 [ESCAPE string3]</td>
<td style="text-align:left"><em>string1</em>是否与模式<em>string2</em>不匹配</td>
</tr>
<tr>
<td style="text-align:left">字符串1与字符串2类似[ESCAPE字符串3]</td>
<td style="text-align:left"><em>string1</em>是否与正则表达式<em>string2</em>匹配</td>
</tr>
<tr>
<td style="text-align:left">string1与string2不相似[ESCAPE string3]</td>
<td style="text-align:left"><em>string1</em>是否与正则表达式<em>string2</em>不匹配</td>
</tr>
<tr>
<td style="text-align:left">值IN（值[，值] *）</td>
<td style="text-align:left"><em>值</em>是否等于列表中的值</td>
</tr>
<tr>
<td style="text-align:left">值NOT IN（值[，值] *）</td>
<td style="text-align:left"><em>值</em>是否不等于列表中的每个值</td>
</tr>
</tbody></table>

<p>Storm SQL尚不支持：</p>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">值IN（子查询）</td>
<td style="text-align:left"><em>值</em>是否等于<em>子查询</em>返回的行</td>
</tr>
<tr>
<td style="text-align:left">值NOT IN（子查询）</td>
<td style="text-align:left"><em>值</em>是否不等于<em>子查询</em>返回的每一行</td>
</tr>
<tr>
<td style="text-align:left">EXISTS（子查询）</td>
<td style="text-align:left"><em>子查询</em>是否返回至少一行</td>
</tr>
</tbody></table>

<p>Storm SQL还不支持子查询，因此上述运算符无法正常工作。这将在不久的将来解决。</p>

<h3 id="logical-operators">逻辑运算符</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">boolean1或boolean2</td>
<td style="text-align:left"><em>boolean1</em>为TRUE还是<em>boolean2</em>为TRUE</td>
</tr>
<tr>
<td style="text-align:left">布尔值1和布尔值2</td>
<td style="text-align:left"><em>boolean1</em>和<em>boolean2</em>是否均为TRUE</td>
</tr>
<tr>
<td style="text-align:left">非布尔值</td>
<td style="text-align:left"><em>布尔值</em>是否不为TRUE；如果<em>布尔</em>值为UNKNOWN，则返回UNKNOWN</td>
</tr>
<tr>
<td style="text-align:left">布尔值是FALSE</td>
<td style="text-align:left"><em>布尔值</em>是否为FALSE；如果<em>布尔</em>值为UNKNOWN，则返回FALSE</td>
</tr>
<tr>
<td style="text-align:left">布尔值不是虚假的</td>
<td style="text-align:left"><em>布尔值</em>是否不是FALSE；如果<em>布尔</em>值为UNKNOWN，则返回TRUE</td>
</tr>
<tr>
<td style="text-align:left">布尔值是TRUE</td>
<td style="text-align:left"><em>布尔值</em>是否为TRUE；如果<em>布尔</em>值为UNKNOWN，则返回FALSE</td>
</tr>
<tr>
<td style="text-align:left">布尔值不正确</td>
<td style="text-align:left"><em>布尔值</em>是否不为TRUE；如果<em>布尔</em>值为UNKNOWN，则返回TRUE</td>
</tr>
<tr>
<td style="text-align:left">布尔值IS未知</td>
<td style="text-align:left"><em>布尔值</em>是否未知</td>
</tr>
<tr>
<td style="text-align:left">布尔值未知</td>
<td style="text-align:left"><em>布尔值</em>是否未知</td>
</tr>
</tbody></table>

<h3 id="arithmetic-operators-and-functions">算术运算符和函数</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">+数字</td>
<td style="text-align:left">返回<em>数字</em></td>
</tr>
<tr>
<td style="text-align:left">：-数字</td>
<td style="text-align:left">返回负<em>数值</em></td>
</tr>
<tr>
<td style="text-align:left">数字1 +数字2</td>
<td style="text-align:left">返回<em>numeric1</em>加<em>numeric2</em></td>
</tr>
<tr>
<td style="text-align:left">numeric1-numeric2</td>
<td style="text-align:left">返回<em>numeric1</em>减去<em>numeric2</em></td>
</tr>
<tr>
<td style="text-align:left">数字1 *数字2</td>
<td style="text-align:left">返回<em>numeric1</em>乘以<em>numeric2</em></td>
</tr>
<tr>
<td style="text-align:left">数字1 /数字2</td>
<td style="text-align:left">返回<em>numeric1</em>除以<em>numeric2</em></td>
</tr>
<tr>
<td style="text-align:left">电源（数字1，数字2）</td>
<td style="text-align:left">返回<em>numerical1</em>提高到<em>numeric2的幂</em></td>
</tr>
<tr>
<td style="text-align:left">ABS（数字）</td>
<td style="text-align:left">返回<em>数值</em>的绝对值</td>
</tr>
<tr>
<td style="text-align:left">MOD（数字，数字）</td>
<td style="text-align:left">返回<em>numeric1</em>除以<em>numerical2</em>的余数（模数）。仅当<em>numeric1</em>为负时结果为负</td>
</tr>
<tr>
<td style="text-align:left">SQRT（数字）</td>
<td style="text-align:left">返回<em>数值的</em>平方根</td>
</tr>
<tr>
<td style="text-align:left">LN（数字）</td>
<td style="text-align:left">返回<em>数字</em>的自然对数（以<em>e</em>为底）</td>
</tr>
<tr>
<td style="text-align:left">LOG10（数字）</td>
<td style="text-align:left">返回<em>数字的</em>以10为底的对<em>数</em></td>
</tr>
<tr>
<td style="text-align:left">EXP（数值）</td>
<td style="text-align:left">返回<em>e</em>升为<em>数字</em>的幂</td>
</tr>
<tr>
<td style="text-align:left">CEIL（数字）</td>
<td style="text-align:left">将<em>数字</em>向上舍入，并返回大于或等于<em>数字</em>的最小<em>数字</em></td>
</tr>
<tr>
<td style="text-align:left">楼层（数值）</td>
<td style="text-align:left">将<em>数字</em>四舍五入，并返回小于或等于<em>数字</em>的最大<em>数字</em></td>
</tr>
</tbody></table>

<h3 id="character-string-operators-and-functions">字符串运算符和函数</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">字符串||串</td>
<td style="text-align:left">连接两个字符串。</td>
</tr>
<tr>
<td style="text-align:left">CHAR_LENGTH（字符串）</td>
<td style="text-align:left">返回字符串中的字符数</td>
</tr>
<tr>
<td style="text-align:left">CHARACTER_LENGTH（字符串）</td>
<td style="text-align:left">作为CHAR_LENGTH（ <em>string</em> ）</td>
</tr>
<tr>
<td style="text-align:left">UPPER（字符串）</td>
<td style="text-align:left">返回转换为大写的字符串</td>
</tr>
<tr>
<td style="text-align:left">LOWER（字符串）</td>
<td style="text-align:left">返回转换为小写的字符串</td>
</tr>
<tr>
<td style="text-align:left">位置（字符串1输入字符串2）</td>
<td style="text-align:left">返回<em>string2中</em>第一次出现的<em>string1</em>的位置</td>
</tr>
<tr>
<td style="text-align:left">TRIM（{双方|领先|跟踪} string1从string2）</td>
<td style="text-align:left">移除仅包含在<em>字符串1</em>中的字符从开始/结束/两端<em>字符串1</em>的最长的字符串</td>
</tr>
<tr>
<td style="text-align:left">OVERLAY（字符串1放置字符串2从整数[FOR整数2]）</td>
<td style="text-align:left">用<em>string2</em>替换<em>string1</em>的子字符串</td>
</tr>
<tr>
<td style="text-align:left">SUBSTRING（字符串从整数开始）</td>
<td style="text-align:left">返回从给定点开始的字符串的子字符串。</td>
</tr>
<tr>
<td style="text-align:left">SUBSTRING（字符串从整数FOR整数）</td>
<td style="text-align:left">返回从给定点以给定长度开始的字符串的子字符串。</td>
</tr>
<tr>
<td style="text-align:left">INITCAP（字符串）</td>
<td style="text-align:left">返回每个单词转换器的首字母为大写，其余为小写的<em>字符串</em> 。单词是由非字母数字字符分隔的字母数字字符序列。</td>
</tr>
</tbody></table>

<p>未实现：</p>

<ul>
<li>SUBSTRING（字符串来自regexp FOR regexp）</li>
</ul>

<h3 id="binary-string-operators-and-functions">二进制字符串运算符和函数</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">二进制||二元</td>
<td style="text-align:left">连接两个二进制字符串。</td>
</tr>
<tr>
<td style="text-align:left">位置（binary1 IN binary2）</td>
<td style="text-align:left">返回<em>binary2中</em>第一次出现的<em>binary1</em>的<em>位置</em></td>
</tr>
<tr>
<td style="text-align:left">OVERLAY（binary1从整数[FOR integer2]放置binary2）</td>
<td style="text-align:left">用<em>binary2</em>替换<em>binary1</em>的子字符串</td>
</tr>
</tbody></table>

<p>已知错误：</p>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">SUBSTRING（二进制FROM整数）</td>
<td style="text-align:left">从给定点返回<em>二进制</em>的子字符串</td>
</tr>
<tr>
<td style="text-align:left">SUBSTRING（二进制FROM整数FOR整数）</td>
<td style="text-align:left">从给定的点开始以给定的长度返回<em>二进制</em>的子字符串</td>
</tr>
</tbody></table>

<p>Calcite 1.9.0的二进制SUBSTRING函数存在错误，在编译SQL语句时会引发异常。可以将其固定为更高版本的方解石。</p>

<h3 id="date-time-functions">日期/时间功能</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">EXTRACT（timeUnit FROM datetime）</td>
<td style="text-align:left">从日期时间值表达式中提取并返回指定的日期时间字段的值</td>
</tr>
<tr>
<td style="text-align:left">楼层（日期时间到timeUnit）</td>
<td style="text-align:left">将<em>日期</em>时间舍入为<em>timeUnit</em></td>
</tr>
<tr>
<td style="text-align:left">CEIL（datetime TO timeUnit）</td>
<td style="text-align:left">将<em>日期</em>时间四舍五入为<em>timeUnit</em></td>
</tr>
</tbody></table>

<p>未实现：</p>

<ul>
<li>EXTRACT（timeUnit FROM间隔）</li>
<li>CEIL（间隔）</li>
<li>楼层（间隔）</li>
<li>datetime-datetime timeUnit [TO timeUnit]</li>
<li>间隔重叠间隔</li>
<li>+间隔</li>
<li>-间隔</li>
<li>间隔+间隔</li>
<li>间隔-间隔</li>
<li>间隔/间隔</li>
<li>日期时间+间隔</li>
<li>日期时间-间隔</li>
</ul>

<p>关于Storm SQL的注意事项：</p>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">当地时间</td>
<td style="text-align:left">以数据类型TIME的值返回会话时区中的当前日期和时间</td>
</tr>
<tr>
<td style="text-align:left">LOCALTIME（精度）</td>
<td style="text-align:left">以数据类型TIME的值返回会话时区中的当前日期和时间， <em>精度</em>为精度数字</td>
</tr>
<tr>
<td style="text-align:left">本地时间戳</td>
<td style="text-align:left">以数据类型TIMESTAMP返回会话时区中的当前日期和时间</td>
</tr>
<tr>
<td style="text-align:left">LOCALTIMESTAMP（精度）</td>
<td style="text-align:left">以数据类型TIMESTAMP的值返回会话时区中的当前日期和时间， <em>精度</em>为精度数字</td>
</tr>
<tr>
<td style="text-align:left">当前时间</td>
<td style="text-align:left">以数据类型TIMESTAMP WITH TIME ZONE的值返回会话时区中的当前时间</td>
</tr>
<tr>
<td style="text-align:left">当前日期</td>
<td style="text-align:left">以数据类型DATE的值返回会话时区中的当前日期</td>
</tr>
<tr>
<td style="text-align:left">CURRENT_TIMESTAMP</td>
<td style="text-align:left">以数据类型TIMESTAMP WITH TIME ZONE的值返回会话时区中的当前日期和时间</td>
</tr>
</tbody></table>

<p>SQL标准指出，上述运算符在评估查询时应返回相同的值。Storm SQL将每个查询转换为Trident拓扑并运行，因此从技术上讲，在评估SQL语句时应固定当前日期/时间。由于此限制，在创建Trident拓扑时，当前日期/时间将是固定的，并且这些运算符应在拓扑的生命周期中返回相同的值。</p>

<h3 id="system-functions">系统功能</h3>

<p>Storm SQL尚不支持：</p>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">用户</td>
<td style="text-align:left">相当于CURRENT_USER</td>
</tr>
<tr>
<td style="text-align:left">当前用户</td>
<td style="text-align:left">当前执行上下文的用户名</td>
</tr>
<tr>
<td style="text-align:left">SESSION_USER</td>
<td style="text-align:left">会话用户名</td>
</tr>
<tr>
<td style="text-align:left">SYSTEM_USER</td>
<td style="text-align:left">返回操作系统标识的当前数据存储用户的名称</td>
</tr>
<tr>
<td style="text-align:left">CURRENT_PATH</td>
<td style="text-align:left">返回表示当前查找范围的字符串，以引用用户定义的例程和类型</td>
</tr>
<tr>
<td style="text-align:left">目前角色</td>
<td style="text-align:left">返回当前活动角色</td>
</tr>
</tbody></table>

<p>这些运算符对Storm SQL的运行时没有意义，因此，除非我们找到适当的语义，否则可能永远不会支持它。</p>

<h3 id="conditional-functions-and-operators">条件函数和运算符</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">案例价值<br>当value1 [，value11] * THEN result1时<br>[当valueN [，valueN1] * THEN resultN] *<br>[ELSE resultZ]<br>结束</td>
<td style="text-align:left">简单的情况</td>
</tr>
<tr>
<td style="text-align:left">案件<br>当condition1然后THEN1<br>[当条件然后结果N] *<br>[ELSE resultZ]<br>结束</td>
<td style="text-align:left">搜索案例</td>
</tr>
<tr>
<td style="text-align:left">NULLIF（值，值）</td>
<td style="text-align:left">如果值相同，则返回NULL。<br><br>例如， <code>NULLIF(5, 5)</code>返回NULL; <code>NULLIF(5, 0)</code>返回5。</td>
</tr>
<tr>
<td style="text-align:left">COALESCE（值，值[，值] *）</td>
<td style="text-align:left">如果第一个值为null，则提供一个值。<br><br>例如， <code>COALESCE(NULL, 5)</code>返回5。</td>
</tr>
</tbody></table>

<h3 id="type-conversion">类型转换</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">CAST（值AS类型）</td>
<td style="text-align:left">将值转换为给定类型。</td>
</tr>
</tbody></table>

<h3 id="value-constructors">值构造函数</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">ROW（值[，值] *）</td>
<td style="text-align:left">从值列表创建一行。</td>
</tr>
<tr>
<td style="text-align:left">（值[，值] *）</td>
<td style="text-align:left">从值列表创建一行。</td>
</tr>
<tr>
<td style="text-align:left">映射'['key']'</td>
<td style="text-align:left">返回具有特定键的地图元素。</td>
</tr>
<tr>
<td style="text-align:left">数组'['索引']'</td>
<td style="text-align:left">返回数组中特定位置的元素。</td>
</tr>
<tr>
<td style="text-align:left">数组'['value [，value] *']'</td>
<td style="text-align:left">从值列表创建数组。</td>
</tr>
<tr>
<td style="text-align:left">MAP'['键，值[，键，值] *']'</td>
<td style="text-align:left">根据键值对列表创建地图。</td>
</tr>
</tbody></table>

<h3 id="collection-functions">收集功能</h3>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">ELEMENT（值）</td>
<td style="text-align:left">返回数组或多集的唯一元素；如果集合为空，则为null；否则为null。如果具有多个元素，则抛出该异常。</td>
</tr>
<tr>
<td style="text-align:left">基数（值）</td>
<td style="text-align:left">返回数组或多集中元素的数量。</td>
</tr>
</tbody></table>

<p>另请参见：UNNEST关系运算符将集合转换为关系。</p>

<h3 id="jdbc-function-escape">JDBC函数转义</h3>

<h4 id="numeric">数字</h4>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">{fn ABS（数字）}</td>
<td style="text-align:left">返回<em>数值</em>的绝对值</td>
</tr>
<tr>
<td style="text-align:left">{fn EXP（数字）}</td>
<td style="text-align:left">返回<em>e</em>升为<em>数字</em>的幂</td>
</tr>
<tr>
<td style="text-align:left">{fn LOG（数字）}</td>
<td style="text-align:left">返回<em>数字</em>的自然对数（以<em>e</em>为底）</td>
</tr>
<tr>
<td style="text-align:left">{fn LOG10（数字）}</td>
<td style="text-align:left">返回<em>数字的</em>以10为底的对<em>数</em></td>
</tr>
<tr>
<td style="text-align:left">{fn MOD（numeric1，numeric2）}</td>
<td style="text-align:left">返回<em>numeric1</em>除以<em>numerical2</em>的余数（模数）。仅当<em>numeric1</em>为负时结果为负</td>
</tr>
<tr>
<td style="text-align:left">{fn POWER（numeric1，numeric2）}</td>
<td style="text-align:left">返回<em>numerical1</em>提高到<em>numeric2的幂</em></td>
</tr>
</tbody></table>

<p>未实现：</p>

<ul>
<li>{fn ACOS（numeric）}-返回<em>数字的反</em>余弦</li>
<li>{fn ASIN（numeric）}-返回<em>数字的</em>反正弦</li>
<li>{fn ATAN（numeric）}-返回<em>数字的</em>反正切</li>
<li>{fn ATAN2（数字，数字）}</li>
<li>{fn CEILING（numeric）}-将<em>数字</em>向上取整，并返回大于或等于<em>数字</em>的最小<em>数字</em></li>
<li>{fn COS（numeric）}-返回<em>数字</em>的余弦值</li>
<li>{fn COT（数字）}</li>
<li>{fn DEGREES（numeric）}-将<em>数字</em>从弧度转换为度</li>
<li>{fn FLOOR（numeric）}-将<em>数字</em>四舍五入，并返回小于或等于<em>数字</em>的最大<em>数字</em></li>
<li>{fn PI（）}-返回一个比<em>pi</em>更近的值</li>
<li>{fn RADIANS（numeric）}-将<em>数值</em>从度转换为弧度</li>
<li>{fn RAND（numeric）}</li>
<li>{fn ROUND（数字，数字）}</li>
<li>{fn SIGN（数字）}</li>
<li>{fn SIN（numeric）}-返回<em>数字</em>的正弦</li>
<li>{fn SQRT（numeric）}-返回<em>数字的</em>平方根</li>
<li>{fn TAN（numeric）}-返回<em>数字</em>的切线</li>
<li>{fn TRUNCATE（数字，数字）}</li>
</ul>

<h4 id="string">串</h4>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">{fn CONCAT（字符，字符）}</td>
<td style="text-align:left">返回字符串的串联</td>
</tr>
<tr>
<td style="text-align:left">{fn LOCATE（string1，string2）}</td>
<td style="text-align:left">返回第一次出现的<em>string1</em>在<em>string2</em>中的位置。从第二个CharacterExpression的开头搜索，除非指定了startIndex参数。</td>
</tr>
<tr>
<td style="text-align:left">{fn INSERT（字符串1，开头，长度，字符串2）}</td>
<td style="text-align:left">将<em>string2</em>插入<em>string1</em>的插槽中</td>
</tr>
<tr>
<td style="text-align:left">{fn LCASE（string）}</td>
<td style="text-align:left">返回在其中将<em>字符串</em>中的所有字母都被转换为小写的字符串</td>
</tr>
<tr>
<td style="text-align:left">{fn LENGTH（string）}</td>
<td style="text-align:left">返回字符串中的字符数</td>
</tr>
<tr>
<td style="text-align:left">{fn SUBSTRING（字符串，偏移量，长度）}</td>
<td style="text-align:left">返回由的<em>长度</em>字符从<em>字符串</em>起始于<em>偏移</em>位置的字符串</td>
</tr>
<tr>
<td style="text-align:left">{fn UCASE（string）}</td>
<td style="text-align:left">返回在其中将<em>字符串</em>中的所有字母都被转换为大写的字符串</td>
</tr>
</tbody></table>

<p>已知错误：</p>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">{fn LOCATE（string1，string2 [，整数]）}</td>
<td style="text-align:left">返回第一次出现的<em>string1</em>在<em>string2</em>中的位置。从<em>string2</em>的开头搜索，除非指定了<em>integer</em> 。</td>
</tr>
<tr>
<td style="text-align:left">{fn LTRIM（string）}</td>
<td style="text-align:left">返回删除了前导空格字符的<em>字符串</em></td>
</tr>
<tr>
<td style="text-align:left">{fn RTRIM（string）}</td>
<td style="text-align:left">返回删除了尾部空格字符的<em>字符串</em></td>
</tr>
</tbody></table>

<p>方解石1.9.0在编译SQL语句时，在具有位置参数{fn LTRIM}和{fn RTRIM}的{fn LOCATE}上引发异常。可以将其固定为更高版本的方解石。</p>

<p>未实现：</p>

<ul>
<li>{fn ASCII（string）}-将单字符字符串转换为相应的ASCII代码，0到255之间的整数</li>
<li>{fn CHAR（string）}</li>
<li>{fn DIFFERENCE（string，string）}</li>
<li>{fn LEFT（string，integer）}</li>
<li>{fn REPEAT（string，integer）}</li>
<li>{fn REPLACE（string，string，string）}</li>
<li>{fn RIGHT（字符串，整数）}</li>
<li>{fn SOUNDEX（string）}</li>
<li>{fn SPACE（integer）}</li>
</ul>

<h4 id="date-time">约会时间</h4>

<table><thead>
<tr>
<th style="text-align:left">运算符语法</th>
<th style="text-align:left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">{fn CURDATE（）}</td>
<td style="text-align:left">相当于<code>CURRENT_DATE</code></td>
</tr>
<tr>
<td style="text-align:left">{fn CURTIME（）}</td>
<td style="text-align:left">相当于<code>LOCALTIME</code></td>
</tr>
<tr>
<td style="text-align:left">{fn NOW（）}</td>
<td style="text-align:left">相当于<code>LOCALTIMESTAMP</code></td>
</tr>
<tr>
<td style="text-align:left">{fn QUARTER（date）}</td>
<td style="text-align:left">相当于<code>EXTRACT(QUARTER FROM date)</code> 。返回1到4之间的整数。</td>
</tr>
<tr>
<td style="text-align:left">{fn TIMESTAMPADD（timeUnit，count，timestamp）}</td>
<td style="text-align:left">将<em>计数</em>间隔* timeUnit * s添加到时间戳</td>
</tr>
<tr>
<td style="text-align:left">{fn TIMESTAMPDIFF（timeUnit，timestamp1，timestamp2）}</td>
<td style="text-align:left">从<em>timestamp2中</em>减去<em>timestamp1</em>并以* timeUnit * s返回结果</td>
</tr>
</tbody></table>

<p>未实现：</p>

<ul>
<li>{fn DAYNAME（date）}</li>
<li>{fn DAYOFMONTH（date）}</li>
<li>{fn DAYOFWEEK（日期）}</li>
<li>{fn DAYOFYEAR（date）}</li>
<li>{fn小时（时间）}</li>
<li>{fn分钟（时间）}</li>
<li>{fn MONTH（date）}</li>
<li>{fn MONTHNAME（日期）}</li>
<li>{fn秒（时间）}</li>
<li>{fn周（日期）}</li>
<li>{fn YEAR（date）}</li>
</ul>

<h4 id="system">系统</h4>

<p>未实现：</p>

<ul>
<li>{fn DATABASE（）}</li>
<li>{fn IFNULL（value，value）}</li>
<li>{fn USER（值，值）}</li>
<li>{fn CONVERT（value，type）}</li>
</ul>

<h3 id="aggregate-functions">汇总功能</h3>

<p>Storm SQL还不支持聚合。</p>

<h3 id="window-functions">视窗功能</h3>

<p>Storm SQL还不支持窗口化。</p>

<h3 id="grouping-functions">分组功能</h3>

<p>Storm SQL不支持分组功能。</p>

<h3 id="user-defined-functions">用户定义的功能</h3>

<p>用户可以使用以下命令定义用户定义的函数（标量） <code>CREATE FUNCTION</code>声明。例如，以下语句定义<code>MYPLUS</code>使用的功能<code>org.apache.storm.sql.TestUtils$MyPlus</code>类。</p>
<div class="highlight"><pre><code class="language-" data-lang="">CREATE FUNCTION MYPLUS AS 'org.apache.storm.sql.TestUtils$MyPlus'
</code></pre></div>
<p>Storm SQL通过检查定义了哪些方法来确定函数是标量函数还是聚合函数。如果该类定义<code>evaluate</code>方法，Storm SQL将函数视为<code>scalar</code> 。</p>

<p>标量函数的类示例在这里：</p>
<div class="highlight"><pre><code class="language-" data-lang="">  public class MyPlus {
    public static Integer evaluate(Integer x, Integer y) {
      return x + y;
    }
  }

</code></pre></div>
<p>请注意，用户应使用<code>--jars</code>要么<code>--artifacts</code>在运行Storm SQL运行程序时，请确保UDF在类路径中可用。</p>

<h2 id="external-data-sources">外部资料来源</h2>

<h3 id="specifying-external-data-sources">指定外部数据源</h3>

<p>在StormSQL中，数据由外部表表示。用户可以使用<code>CREATE EXTERNAL TABLE</code>声明。的语法<code>CREATE EXTERNAL TABLE</code>紧密遵循<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL">Hive数据定义语言中</a>定义的一种：</p>
<div class="highlight"><pre><code class="language-" data-lang="">CREATE EXTERNAL TABLE table_name field_list
    [ STORED AS
      INPUTFORMAT input_format_classname
      OUTPUTFORMAT output_format_classname
    ]
    LOCATION location
    [ TBLPROPERTIES tbl_properties ]
    [ AS select_stmt ]
</code></pre></div>
<p>默认输入格式和输出格式为JSON。我们将介绍<code>supported formats</code>从进一步的部分。</p>

<p>例如，以下语句指定一个Kafka出口和接收器：</p>
<div class="highlight"><pre><code class="language-" data-lang="">CREATE EXTERNAL TABLE FOO (ID INT PRIMARY KEY) LOCATION 'kafka://test?bootstrap-hosts=localhost:9092' TBLPROPERTIES '{"producer":{"acks":"1","key.serializer":"org.apache.storm.kafka.IntSerializer"}}'
</code></pre></div>
<p>请注意，用户应使用<code>--jars</code>要么<code>--artifacts</code>在运行Storm SQL运行程序时，请确保UDF在类路径中可用。</p>

<h3 id="plugging-in-external-data-sources">插入外部数据源</h3>

<p>用户通过实施以下操作插入外部数据源<code>ISqlTridentDataSource</code>接口并使用Java的服务加载程序的机制注册它们。将根据表URI的方案选择外部数据源。请参考执行<code>storm-sql-kafka</code>更多细节。</p>

<h3 id="supported-formats">支持的格式</h3>

<table><thead>
<tr>
<th style="text-align:left">格式</th>
<th style="text-align:left">输入格式类别</th>
<th style="text-align:left">输出格式类</th>
<th style="text-align:left">需要属性</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">JSON格式</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.json。杰森计划</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.json。JsonSerializer</td>
<td style="text-align:left">没有</td>
</tr>
<tr>
<td style="text-align:left">阿夫罗</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.avro。AvroScheme</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.avro。AvroSerializer</td>
<td style="text-align:left">是</td>
</tr>
<tr>
<td style="text-align:left">CSV</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.csv.CsvScheme</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.csv.CsvSerializer</td>
<td style="text-align:left">没有</td>
</tr>
<tr>
<td style="text-align:left">硅通孔</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.tsv.TsvScheme</td>
<td style="text-align:left">org.apache.storm.sql.runtime.serde.tsv.TsvSerializer</td>
<td style="text-align:left">没有</td>
</tr>
</tbody></table>

<h4 id="avro">阿夫罗</h4>

<p>Avro要求用户描述记录的架构（输入和输出）。模式应在<code>TBLPROPERTIES</code> 。输入格式需要描述为<code>input.avro.schema</code> ，并且需要描述输出格式以<code>output.avro.schema</code> 。架构字符串应为转义的JSON，以便<code>TBLPROPERTIES</code>是有效的JSON。</p>

<p>模式说明示例：</p>

<p><code>"input.avro.schema": "{\"type\": \"record\", \"name\": \"large_orders\", \"fields\" : [ {\"name\": \"ID\", \"type\": \"int\"}, {\"name\": \"TOTAL\", \"type\": \"int\"} ]}"</code></p>

<p><code>"output.avro.schema": "{\"type\": \"record\", \"name\": \"large_orders\", \"fields\" : [ {\"name\": \"ID\", \"type\": \"int\"}, {\"name\": \"TOTAL\", \"type\": \"int\"} ]}"</code></p>

<h4 id="csv">CSV</h4>

<p>它使用<a href="https://tools.ietf.org/html/rfc4180">标准RFC4180</a> CSV解析器，不需要任何其他属性。</p>

<h4 id="tsv">硅通孔</h4>

<p>默认情况下，TSV使用<code>\t</code>作为分隔符，但用户可以通过设置另一个分隔符<code>input.tsv.delimiter</code>和/或<code>output.tsv.delimiter</code> 。请注意，它仅支持一个字母作为分隔符。</p>

<h3 id="supported-data-sources">支持的数据源</h3>

<table><thead>
<tr>
<th style="text-align:left">数据源</th>
<th style="text-align:left">工件名称</th>
<th style="text-align:left">位置前缀</th>
<th style="text-align:left">支持输入数据源</th>
<th style="text-align:left">支持输出数据源</th>
<th style="text-align:left">需要属性</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align:left">插座</td>
<td style="text-align:left"><built-in></built-in></td>
<td style="text-align:left"><code>socket://host:port</code></td>
<td style="text-align:left">是</td>
<td style="text-align:left">是</td>
<td style="text-align:left">没有</td>
</tr>
<tr>
<td style="text-align:left">卡夫卡</td>
<td style="text-align:left">org.apache.storm：storm-sql-kafka</td>
<td style="text-align:left"><code>kafka://topic?bootstrap-servers=host1:port1,host2:port2</code></td>
<td style="text-align:left">是</td>
<td style="text-align:left">是</td>
<td style="text-align:left">是</td>
</tr>
<tr>
<td style="text-align:left">雷迪斯</td>
<td style="text-align:left">org.apache.storm：storm-sql-redis</td>
<td style="text-align:left"><code>redis://:[password]@host:port/[dbIdx]</code></td>
<td style="text-align:left">没有</td>
<td style="text-align:left">是</td>
<td style="text-align:left">是</td>
</tr>
<tr>
<td style="text-align:left">MongoDB</td>
<td style="text-align:left">org.apache.stormg：storm-sql-mongodb</td>
<td style="text-align:left"><code>mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]</code></td>
<td style="text-align:left">没有</td>
<td style="text-align:left">是</td>
<td style="text-align:left">是</td>
</tr>
<tr>
<td style="text-align:left">HDFS</td>
<td style="text-align:left">org.apache.storm：storm-sql-hdfs</td>
<td style="text-align:left"><code>hdfs://host:port/path-to-file</code></td>
<td style="text-align:left">没有</td>
<td style="text-align:left">是</td>
<td style="text-align:left">是</td>
</tr>
</tbody></table>

<h4 id="socket">插座</h4>

<p>套接字数据源是一项内置功能，因此用户无需向其中添加任何工件<code>--artifacts</code>选项。</p>

<p>请注意，Socket数据源仅用于测试：它不能确保任何交付保证。</p>

<p>小费： <code>netcat</code>是用于Socket的便捷工具：用户可以使用netcat连接Socket数据源，以用于输入或输出目的之一。</p>

<h4 id="kafka">卡夫卡</h4>

<p>Kafka数据源仅在用于输出数据源时才需要以下属性：</p>

<ul>
<li><code>producer</code> ：指定卡夫卡生产者配置-请参考<a href="http://kafka.apache.org/documentation.html#producerconfigs">卡夫卡生产CONFIGS</a>了解详情。

<ul>
<li>不设置<code>bootstrap.servers</code> 。它是从您为数据源提供的URI中提取的（例如<code>kafka://topic?bootstrap-servers=localhost:9092,localhost:9093</code>将提取到<code>localhost:9092,localhost:9093</code> ）。</li>
<li>不设置<code>value.serializer</code> 。它被硬编码使用<code>ByteBufferSerializer</code> 。而是使用<code>STORED AS INPUTFORMAT ... OUTPUTFORMAT ...</code>指定输出序列化程序的语法，Storm将使用该语法从输入元组创建ByteBuffer。</li>
</ul></li>
</ul>

<p>请注意<code>storm-sql-kafka</code>要求用户提供<code>storm-kafka-client</code>和<code>storm-kafka-client</code>要求用户提供<code>kafka-clients</code> 。您可以在下面将其用作<code>--artifacts</code>选项，并更改依赖项版本，然后查看它是否有效：</p>

<p><code>org.apache.storm:storm-sql-kafka:2.0.0-SNAPSHOT,org.apache.storm:storm-kafka-client:2.0.0-SNAPSHOT,org.apache.kafka:kafka-clients:1.1.0^org.slf4j:slf4j-log4j12</code></p>

<h4 id="redis">雷迪斯</h4>

<p>Redis数据源需要设置以下属性：</p>

<ul>
<li><code>data.type</code> ：仅用于存储的数据类型<code>"STRING"</code>和<code>"HASH"</code>被支持</li>
<li><code>data.additional.key</code> ：如果数据类型同时需要键和字段，则为键（字段将用作字段）</li>
<li><code>redis.timeout</code> ：超时（以毫秒为单位）（例如<code>"3000"</code> ）</li>
<li><code>use.redis.cluster</code> ： <code>"true"</code>如果数据源是Redis Cluster env。， <code>"false"</code>除此以外。</li>
</ul>

<p>请注意<code>storm-sql-redis</code>要求用户提供<code>storm-redis</code> 。您可以在下面将其用作<code>--artifacts</code>选项，如果确实需要，请更改依赖项版本：</p>

<p><code>org.apache.storm:storm-sql-redis:2.0.0-SNAPSHOT,org.apache.storm:storm-redis:2.0.0-SNAPSHOT</code></p>

<h4 id="mongodb">MongoDB</h4>

<p>MongoDB数据源需要设置以下属性：</p>

<p><code>{"collection.name": "storm_sql_mongo", "ser.field": "serfield"}</code></p>

<ul>
<li><code>ser.field</code> ：要存储的字段-记录将被序列化并作为BSON存储在此字段中</li>
<li><code>collection.name</code> ：馆藏名称</li>
</ul>

<p>请注意<code>storm-sql-mongodb</code>要求用户提供<code>storm-mongodb</code> 。您可以在下面将其用作<code>--artifacts</code>选项，如果确实需要，请更改依赖项版本：</p>

<p><code>org.apache.storm:storm-sql-mongodb:2.0.0-SNAPSHOT,org.apache.storm:storm-mongodb:2.0.0-SNAPSHOT</code></p>

<p>目前不支持使用保留字段存储记录。</p>

<h4 id="hdfs">HDFS</h4>

<p>HDFS数据源需要设置以下属性：</p>

<ul>
<li><code>hdfs.file.path</code> ：HDFS文件路径</li>
<li><code>hdfs.file.name</code> ：HDFS文件名-请参阅<a href="http://github.com/apache/storm/blob/v2.1.0/external/storm-hdfs/src/main/java/org/apache/storm/hdfs/bolt/format/SimpleFileNameFormat.java">SimpleFileNameFormat</a></li>
<li><code>hdfs.rotation.size.kb</code> ：HDFS FileSizeRotationPolicy以KB为单位</li>
<li><code>hdfs.rotation.time.seconds</code> ：HDFS TimedRotationPolicy以秒为单位</li>
</ul>

<p>请注意<code>hdfs.rotation.size.kb</code>和<code>hdfs.rotation.time.seconds</code>只能用于hdfs旋转。</p>

<p>并注意<code>storm-sql-hdfs</code>要求用户提供<code>storm-hdfs</code> 。您可以在下面将其用作<code>--artifacts</code>选项，如果确实需要，请更改依赖项版本：</p>

<p><code>org.apache.storm:storm-sql-hdfs:2.0.0-SNAPSHOT,org.apache.storm:storm-hdfs:2.0.0-SNAPSHOT</code></p>

<p>另外，应提供hdfs配置文件。你可以把<code>core-site.xml</code>和<code>hdfs-site.xml</code>进入<code>conf</code>该目录位于Storm安装目录中。</p>
</div>


	          </div>
	       </div>
	  </div>
<footer>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>聚会</h5>
                    <ul class="latest-news">
                        
                        <li><a href="http://www.meetup.com/Apache-Storm-Apache-Kafka/">Apache Storm和Apache Kafka</a> <span class="small">（加利福尼亚州桑尼维尔）</span></li>
                        
                        <li><a href="http://www.meetup.com/Apache-Storm-Kafka-Users/">Apache Storm和Kafka用户</a> <span class="small">（华盛顿州西雅图）</span></li>
                        
                        <li><a href="http://www.meetup.com/New-York-City-Storm-User-Group/">NYC Storm用户组</a> <span class="small">（纽约州纽约）</span></li>
                        
                        <li><a href="http://www.meetup.com/Bay-Area-Stream-Processing">湾区流处理</a> <span class="small">（加利福尼亚州埃默里维尔）</span></li>
                        
                        <li><a href="http://www.meetup.com/Boston-Storm-Users/">波士顿实时数据</a> <span class="small">（马萨诸塞州波士顿）</span></li>
                        
                        <li><a href="http://www.meetup.com/storm-london">伦敦风暴用户组</a> <span class="small">（英国伦敦）</span></li>
                        
                        <!-- <li><a href="http://www.meetup.com/Apache-Storm-Kafka-Users/">Seatle, WA</a> <span class="small">(27 Jun 2015)</span></li> -->
                    </ul>
                </div>
            </div>
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>关于Apache Storm</h5>
                    <p>Apache Storm与任何排队系统和任何数据库系统集成。Apache Storm的喷口抽象使集成新排队系统变得容易。同样，将Apache Storm与数据库系统集成很容易。</p>
               </div>
            </div>
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>第一眼</h5>
                    <ul class="footer-list">
                        <li><a href="/releases/current/Rationale.html">基本原理</a></li>
                        <li><a href="/releases/current/Tutorial.html">讲解</a></li>
                        <li><a href="/releases/current/Setting-up-development-environment.html">搭建开发环境</a></li>
                        <li><a href="/releases/current/Creating-a-new-Storm-project.html">创建一个新的Apache Storm项目</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>文献资料</h5>
                    <ul class="footer-list">
                        <li><a href="/releases/current/index.html">指数</a></li>
                        <li><a href="/releases/current/javadocs/index.html">Java文档</a></li>
                        <li><a href="/releases/current/FAQ.html">常问问题</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">   
            <div class="col-md-12">
                <p align="center">版权所有©2019 <a href="http://www.apache.org">Apache Software Foundation</a> 。版权所有。
                    <br>Apache Storm，Apache，Apache Feather徽标和Apache Storm项目徽标是The Apache Software Foundation的商标。
                    <br>提及的所有其他商标可能是其各自所有者的商标或注册商标。</p>
            </div>
        </div>
    </div>
</footer>
<!--Footer End-->
<!-- Scroll to top -->
<span class="totop"><a href="#"><i class="fa fa-angle-up"></i></a></span> 





</body></html>