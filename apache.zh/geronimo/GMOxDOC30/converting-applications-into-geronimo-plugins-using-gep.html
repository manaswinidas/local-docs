<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Converting applications into Geronimo plugins using GEP">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Converting applications into Geronimo plugins using GEP">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" /="" /www.icra.org="" /ratingsv02.htm="=" http:="" /www.rsac.org="" /ratingsv01.htm="=" ="" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript" data-markx="17"></script>


    <title>Apache Geronimo v3.0文档：使用GEP将应用程序转换为Geronimo插件</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap="">
          <a href="/geronimo">主页</a> &gt; <a href="documentation.html">文档</a> &gt; <a href="developing.html">开发</a> &gt; <a href="tutorials.html">教程</a> &gt; <a href="getting-familiar-with-the-development-environment.html">熟悉开发环境</a> &gt; <a href="getting-familiar-with-geronimo-eclipse-plugin-gep.html">熟悉Geronimo Eclipse插件（GEP）</a> &gt; <a href="converting-applications-into-geronimo-plugins-using-gep.html">使用GEP将应用程序转换为Geronimo插件</a>
        </td>
        <td align="right" valign="middle" nowrap="">
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We&#39;ll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">使用GEP将应用程序转换为Geronimo插件</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645245"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645245">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&amp;fromPageId=20645245"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&amp;fromPageId=20645245">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&amp;fromPageId=20645245"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&amp;fromPageId=20645245">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<p><rich-text-body></rich-text-body></p><p>本文是关于如何使用Geronimo Eclipse插件（GEP）将应用程序转换为Geronimo插件并将它们重新安装到服务器中的。</p><p></p>

<p>在整个教程中，我们使用Apache Geronimo v2.2和现有的示例应用程序。有关应用程序的开发和部署，请参阅<a shape="rect" href="stateless-session-bean.html">无状态会话Bean</a> 。</p>



<h1 id="ConvertingapplicationsintoGeronimopluginsusingGEP-CreatingGeronimoplugins">创建Geronimo插件</h1>

<h2 id="ConvertingapplicationsintoGeronimopluginsusingGEP-Prerequisites">先决条件</h2>

<p>为了将应用程序转换为Geronimo插件，必须安装并启动Geronimo Server。请注意，只能从服务器导出文件类型为<em>.car</em>的Geronimo配置。</p>

<p>并且您必须已在运行的服务器上安装了示例应用程序。</p>

<h2 id="ConvertingapplicationsintoGeronimopluginsusingGEP-CreatingpluginsusingGEP">使用GEP创建插件</h2>

<p>完成后，请按照以下步骤使用GEP导出Geronimo插件。</p>
<ol><li>双击您定义的Geronimo服务器，它将在主窗口中显示“服务器编辑器”，然后选择“ <strong>插件”</strong>页面。</li><li>单击<strong>将应用程序转换为插件</strong>按钮将显示一个名为<strong>插件管理器</strong>的向导。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/ManagerPage1.png"></span><br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>输入或创建目录名称，然后选择<strong>创建Geronimo插件</strong>单选按钮。您定义的目录是一个临时存储库，用于存储导出的插件，您可以在必要时在此进行任何手动更新。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/ServerManagerPage0.png"></span><br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>向导的下一页包含可以在运行的服务器上转换为Geronimo插件的所有模块的下拉列表。例如，从列表中选择<strong>console.dbpool / jdbc_userds / 1.0 / car</strong> 。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/ServerManagerPage1.png"></span><br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>选择您的应用程序对象（一次选择一个），然后单击“ <strong>下一步”，</strong>将显示允许您更改以下属性的页面： <code data-markx="108"></code>保存之前保存文件。接下来两页中的所有字段都是将与插件一起保存并有助于安装的数据。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/ManagerPage3.png"></span><br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">
	<ul><li><strong>名称</strong><br clear="none">该插件将显示的人类可读名称。</li><li><strong>ID</strong><br clear="none">此插件的全局唯一ID。该值在安装要导出的应用程序期间定义。此值还定义了插件的版本号。</li><li><strong>下载仓库</strong><br clear="none">存储库列表，用于检查是否需要下载任何依赖项。这应该是每行一个URL的列表，并带有诸如<a shape="rect" class="external-link" href="http://geronimoplugins.com/repository/" rel="nofollow">http://geronimoplugins.com/repository/</a>和<a shape="rect" class="external-link" href="http://www.ibiblio.org/maven2/" rel="nofollow">http://www.ibiblio.org/maven2/之类的</a>值。请注意，此插件部署到的存储库通常应该是列出的第一个。</li><li><strong>类别</strong><br clear="none">该插件所属的类别。同一类别的插件将一起列出。如果打算在geronimoplugins.com上列出此插件，则应使用其中任何一个类别名称（如果适合）。否则，您可以自由选择它，也可以根据计划发布它的存储库可接受的类别进行选择。</li><li><strong>描述</strong><br clear="none">此插件的说明。您应仅使用纯文本，并用空行分隔段落。</li><li><strong>插件网址</strong><br clear="none">用于获取有关插件的更多信息的URL（例如，插件主页）。</li><li><strong>作者</strong><br clear="none">插件的作者，可以是个人，公司，开源社区等。</li><li><strong>Geronimo版本</strong><br clear="none">该插件支持的Geronimo版本的可选列表。如果未列出任何值，那么该插件可以安装在任何版本的Geronimo中。否则，您可以在一个可接受的Geronimo版本中安装此插件。</li><li><strong>JVM版本</strong><br clear="none">此插件支持的JVM版本前缀的可选列表。如果未列出任何值，那么可以在任何版本的JVM中运行的Geronimo中安装插件。否则，您可以在一个可接受的JVM版本中安装此插件。</li><li><strong>依存关系</strong><br clear="none">此插件依赖的Geronimo配置列表。安装此插件时，将自动下载这些依赖项。通常，您不应该更改此列表。但是，如果用户在安装插件之前必须手动安装依赖项，则可以将条目从依赖项列表移至先决条件列表（例如，对于插件不知道要连接到哪个服务器的数据库池）。此列表中的每个条目都应使用唯一ID格式，就像上面用于此插件的格式一样。如果您希望插件可以使用任何版本的依赖项，则可以删除版本号，尽管这样做可能会有风险。每个值应在单独的行上。</li><li><strong>过时的</strong><br clear="none">此插件替换的模块ID的列表。这些插件或模块在安装后将被删除。如果要安装它以“升级”，而不是仅仅提供其他替代方法，则可能包括此插件的早期版本。该列表应为每行一个模块ID的列表。</li></ul>
	</li><li>下一页有2个表。您可以使用“ <strong>添加”</strong> ，“ <strong>编辑</strong> ”和“ <strong>删除”</strong>按钮来更新“ <strong>许可证”</strong>表和“ <strong>先决条件”</strong>表中的数据。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/ServerManagerPage3.png"></span><br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">
	<ul><li><strong>执照</strong><br clear="none">该插件涵盖的许可证名称。理想情况下，它将以许可证类别作为前缀，例如“ BSD –（名称）”或“ GPL –（名称）”。指定许可证是否为OSI批准的开源许可证。有关开源许可证的更多信息，请参见<a shape="rect" class="external-link" href="http://www.opensource.org/licenses/index.php" rel="nofollow">http://www.opensource.org/licenses/index.php</a> 。</li><li><strong>先决条件</strong><br clear="none">此插件必备组件的模块ID。这些是安装插件之前服务器中必须存在的模块。它们可能类似于Web应用程序的特定Web容器（ <code data-markx="171"></code> ）或用户必须安装的数据库池或安全领域之类的内容，因为插件作者无法创建将在目标服务器中有效的值。您可能需要保留模块ID的尽可能多的段，以容纳更多用户。例如使用<code data-markx="172"></code>而不是<code data-markx="174"></code> 。
<br class="atl-forced-newline" clear="none"></li></ul>
	</li><li>单击页面上的“ <strong>下一步</strong> ”，该插件将与<code data-markx="178"></code>文件。向导返回首页，以供用户导出另一个插件。
<br class="atl-forced-newline" clear="none"></li><li>（可选）要导出多个插件，请重复上述步骤。例如，通过从列表中选择它们，使用相同的过程导出<strong>ApplicationClient</strong>和<strong>StatelessSessionEJB</strong>插件。
<br class="atl-forced-newline" clear="none"></li><li>（可选）单击“ <strong>取消”</strong>退出向导。</li></ol>


<p>上面的过程创建了一个类似于maven的存储库，其名称在向导首页上的“ <strong>本地插件存储库”</strong>字段中指定。一种<code data-markx="188"></code>在其插件下为每个插件创建文件<code data-markx="189"></code>目录。资料库的顶层目录包含一个<code data-markx="190"></code>该文件跟踪所有已创建的插件。这些文件中的值来自向导最后两页中的字段。</p>

<parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">geronimo-plugins.xml</parameter><plain-text-body>
<?xml version="1.0" encoding="UTF-8" standalone="yes"? gtc:encodedoriginal="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI_Pg==">
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<ns2:geronimo-plugin-list xmlns="http://geronimo.apache.org/xml/ns/attributes-1.2" xmlns:ns2="http://geronimo.apache.org/xml/ns/plugins-1.3" gtc:encodedoriginal="PG5zMjpnZXJvbmltby1wbHVnaW4tbGlzdCB4bWxucz0iaHR0cDovL2dlcm9uaW1vLmFwYWNoZS5vcmcveG1sL25zL2F0dHJpYnV0ZXMtMS4yIiB4bWxuczpuczI9Imh0dHA6Ly9nZXJvbmltby5hcGFjaGUub3JnL3htbC9ucy9wbHVnaW5zLTEuMyI-">
    <ns2:plugin>
        <ns2:name>jdbc_userds</ns2:name>
        <ns2:category>Unknown</ns2:category>
        <ns2:description/>
        <ns2:url/>
        <ns2:author/>
        <ns2:plugin-artifact>
            <ns2:module-id>
                <ns2:groupId>console.dbpool</ns2:groupId>
                <ns2:artifactId>jdbc_userds</ns2:artifactId>
                <ns2:version>1.0</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:module-id>
            <ns2:geronimo-version>2.2-SNAPSHOT</ns2:geronimo-version>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>system-database</ns2:artifactId>
                <ns2:version>2.2-SNAPSHOT</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>transaction</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>j2ee-server</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:obsoletes>
                <ns2:groupId>console.dbpool</ns2:groupId>
                <ns2:artifactId>jdbc_userds</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:obsoletes>
        </ns2:plugin-artifact>
    </ns2:plugin>
    <ns2:plugin>
        <ns2:name>ApplictionClient</ns2:name>
        <ns2:category>Unknown</ns2:category>
        <ns2:description/>
        <ns2:url/>
        <ns2:author/>
        <ns2:plugin-artifact>
            <ns2:module-id>
                <ns2:groupId>default</ns2:groupId>
                <ns2:artifactId>ApplictionClient</ns2:artifactId>
                <ns2:version>1.0</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:module-id>
            <ns2:geronimo-version>2.2-SNAPSHOT</ns2:geronimo-version>
            <ns2:dependency>
                <ns2:groupId>default</ns2:groupId>
                <ns2:artifactId>StatelessSessionEJB</ns2:artifactId>
                <ns2:version>1.0</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>tomcat6</ns2:artifactId>
                <ns2:version>2.2-SNAPSHOT</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>concurrent</ns2:artifactId>
                <ns2:version>2.2-SNAPSHOT</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>j2ee-corba-yoko</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>openjpa</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>openejb</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>axis</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>axis2</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>jasper</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:obsoletes>
                <ns2:groupId>default</ns2:groupId>
                <ns2:artifactId>ApplictionClient</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:obsoletes>
        </ns2:plugin-artifact>
    </ns2:plugin>
    <ns2:plugin>
        <ns2:name>StatelessSessionEJB</ns2:name>
        <ns2:category>Unknown</ns2:category>
        <ns2:description/>
        <ns2:url/>
        <ns2:author/>
        <ns2:plugin-artifact>
            <ns2:module-id>
                <ns2:groupId>default</ns2:groupId>
                <ns2:artifactId>StatelessSessionEJB</ns2:artifactId>
                <ns2:version>1.0</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:module-id>
            <ns2:geronimo-version>2.2-SNAPSHOT</ns2:geronimo-version>
            <ns2:dependency>
                <ns2:groupId>console.dbpool</ns2:groupId>
                <ns2:artifactId>jdbc_userds</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>openejb</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>system-database</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>tomcat6</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>concurrent</ns2:artifactId>
                <ns2:version>2.2-SNAPSHOT</ns2:version>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>j2ee-corba-yoko</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>openjpa</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>axis</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:dependency>
                <ns2:groupId>org.apache.geronimo.configs</ns2:groupId>
                <ns2:artifactId>axis2</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:dependency>
            <ns2:obsoletes>
                <ns2:groupId>default</ns2:groupId>
                <ns2:artifactId>StatelessSessionEJB</ns2:artifactId>
                <ns2:type>car</ns2:type>
            </ns2:obsoletes>
        </ns2:plugin-artifact>
    </ns2:plugin>
    <ns2:default-repository>http://geronimo.apache.org/plugins/geronimo-2.2/</ns2:default-repository>
</ns2:geronimo-plugin-list>
</plain-text-body>

<h1 id="ConvertingapplicationsintoGeronimopluginsusingGEP-InstallingGeronimoPlugins" gtc:encodedoriginal="PGgxIGlkPSJDb252ZXJ0aW5nYXBwbGljYXRpb25zaW50b0dlcm9uaW1vcGx1Z2luc3VzaW5nR0VQLUluc3RhbGxpbmdHZXJvbmltb1BsdWdpbnMiPg==">Installing Geronimo Plugins</h1>

<h2 id="ConvertingapplicationsintoGeronimopluginsusingGEP-Prerequisites.1" gtc:encodedoriginal="PGgyIGlkPSJDb252ZXJ0aW5nYXBwbGljYXRpb25zaW50b0dlcm9uaW1vcGx1Z2luc3VzaW5nR0VQLVByZXJlcXVpc2l0ZXMuMSI-">Prerequisites</h2>
<p>If you intend to install plugins into the same server that is used to export the plugins, you have to remove the projects and relevant resources from the server firstly. </p>

<ul><li>To remove the projects, use <strong>Add and Remove</strong> item on the right-click list of the server in Eclipse;</li><li>To remove the resources, the database pool in this tutorial, you can use undeploy command as followed;
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">
<parameter ac:name="borderStyle" gtc:encodedoriginal="PHBhcmFtZXRlciBhYzpuYW1lPSJib3JkZXJTdHlsZSI-">solid</parameter><plain-text-body>
./deploy.sh --user system --password manager undeploy console.dbpool/jdbc_userds/1.0/car
Using GERONIMO_HOME:   /home/jeffchi/Geronimo/g2.2-tomcat6
Using GERONIMO_TMPDIR: var/temp
Using JRE_HOME:        /opt/ibm/java-i386-60/jre
    Module console.dbpool/jdbc_userds/1.0/car unloaded.
    Module console.dbpool/jdbc_userds/1.0/car uninstalled.

    Undeployed console.dbpool/jdbc_userds/1.0/car
</plain-text-body>
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4="></li></ul>


<h2 id="ConvertingapplicationsintoGeronimopluginsusingGEP-Installingtheplugins" gtc:encodedoriginal="PGgyIGlkPSJDb252ZXJ0aW5nYXBwbGljYXRpb25zaW50b0dlcm9uaW1vcGx1Z2luc3VzaW5nR0VQLUluc3RhbGxpbmd0aGVwbHVnaW5zIj4=">Installing the plugins</h2>
<p>To install the plugins back into a Geronimo server, follow the steps below:</p>
<ol><li>Select <strong>Plugin</strong> page and then click <strong>Convert Apps to Plugins</strong> button.</li><li>Enter the name of the plugin repository, and then select <strong>install Geronimo plugins</strong> radio button.
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">   <span class="confluence-embedded-file-wrapper" gtc:encodedoriginal="PHNwYW4gY2xhc3M9ImNvbmZsdWVuY2UtZW1iZWRkZWQtZmlsZS13cmFwcGVyIj4="><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/InstallPlugin.png" gtc:encodedoriginal="PGltZyBjbGFzcz0iY29uZmx1ZW5jZS1lbWJlZGRlZC1pbWFnZSIgc3JjPSJjb252ZXJ0aW5nLWFwcGxpY2F0aW9ucy1pbnRvLWdlcm9uaW1vLXBsdWdpbnMtdXNpbmctZ2VwLmRhdGEvSW5zdGFsbFBsdWdpbi5wbmciPg=="></span><br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4="></li><li>Click <strong>Next</strong> to select the Geronimo plugins that you want to install on the server.
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">  <span class="confluence-embedded-file-wrapper" gtc:encodedoriginal="PHNwYW4gY2xhc3M9ImNvbmZsdWVuY2UtZW1iZWRkZWQtZmlsZS13cmFwcGVyIj4="><img class="confluence-embedded-image" src="converting-applications-into-geronimo-plugins-using-gep.data/ManagerPage4.png" gtc:encodedoriginal="PGltZyBjbGFzcz0iY29uZmx1ZW5jZS1lbWJlZGRlZC1pbWFnZSIgc3JjPSJjb252ZXJ0aW5nLWFwcGxpY2F0aW9ucy1pbnRvLWdlcm9uaW1vLXBsdWdpbnMtdXNpbmctZ2VwLmRhdGEvTWFuYWdlclBhZ2U0LnBuZyI-"></span><br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">
	<ul><li>If <em>Installable</em> is <code data-markx="230" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMwIj4="></code>, the plugin cannot be selected.  The most common reason that a plugin cannot be installed is that the version of this plugin is already installed on the server or its prerequisites are not met.
<br clear="none" class="atl-forced-newline" gtc:encodedoriginal="PGJyIGNsZWFyPSJub25lIiBjbGFzcz0iYXRsLWZvcmNlZC1uZXdsaW5lIj4=">  </li></ul>
	</li><li>Click <strong>Next</strong> to install all selected plugins. After that, a confirmation page comes up showing that the plugins have been installed successfully.</li></ol></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%" gtc:encodedoriginal="PHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjIiIGNlbGxzcGFjaW5nPSIwIiB3aWR0aD0iMTAwJSI-">
        <tbody><tr>
          <td align="left" valign="middle" class="footer" gtc:encodedoriginal="PHRkIGFsaWduPSJsZWZ0IiB2YWxpZ249Im1pZGRsZSIgY2xhc3M9ImZvb3RlciI-">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" gtc:encodedoriginal="PGltZyBzcmM9Imh0dHA6Ly9zdGF0aWMuZGVsaWNpb3VzLmNvbS9pbWcvZGVsaWNpb3VzLnNtYWxsLmdpZiIgaGVpZ2h0PSIxMCIgd2lkdGg9IjEwIiBhbHQ9IkRlbGljaW91cyI-">
            <a href="http://delicious.com/save" onclick="window.open(&#39;http://delicious.com/save?v=5&noui&jump=close&url=&#39;+encodeURIComponent(location.href)+&#39;&title=&#39;+encodeURIComponent(document.title),&#39;delicious&#39;,&#39;toolbar=no,width=550,height=550&#39;); return false;" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2RlbGljaW91cy5jb20vc2F2ZSIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHA6Ly9kZWxpY2lvdXMuY29tL3NhdmU_dj01Jm5vdWkmanVtcD1jbG9zZSZ1cmw9JytlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZikrJyZ0aXRsZT0nK2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC50aXRsZSksJ2RlbGljaW91cycsJ3Rvb2xiYXI9bm8sd2lkdGg9NTUwLGhlaWdodD01NTAnKTsgcmV0dXJuIGZhbHNlOyI-">Bookmark this on Delicious</a>
              
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" gtc:encodedoriginal="PGltZyBzcmM9Imh0dHA6Ly9kaWdnLmNvbS9pbWcvYmFkZ2VzLzE2eDE2LWRpZ2ctZ3V5LmdpZiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBhbHQ9IkRpZ2chIj4=">
            <a href="" onclick="window.open(&#39;http://digg.com/submit?url=&#39;+encodeURIComponent(location.href)+&#39;&title=&#39;+encodeURIComponent(document.title)+&#39;&topic=programming&#39;);" gtc:encodedoriginal="PGEgaHJlZj0iIiBvbmNsaWNrPSJ3aW5kb3cub3BlbignaHR0cDovL2RpZ2cuY29tL3N1Ym1pdD91cmw9JytlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZikrJyZ0aXRsZT0nK2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC50aXRsZSkrJyZ0b3BpYz1wcm9ncmFtbWluZycpOyI-">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Converting applications into Geronimo plugins using GEP';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer" gtc:encodedoriginal="PHRkIGFsaWduPSJyaWdodCIgdmFsaWduPSJtaWRkbGUiIGNsYXNzPSJmb290ZXIiPg==">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2N3aWtpLmFwYWNoZS5vcmcvR01PeFBNR1QvZ2Vyb25pbW8tcHJpdmFjeS1wb2xpY3kuaHRtbCI-">Privacy Policy</a>  -  
            Copyright © 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wIj4=">ASL 2.0.</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript" data-markx="245" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGRhdGEtbWFya3g9IjI0NSI-"></script>
    <script type="text/javascript" data-markx="246" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGRhdGEtbWFya3g9IjI0NiI-"></script>

  

</body></html><html id=&#39;2509.mllib-decision-tree.html&#39; gtc:encodedoriginal="PGh0bWwgaWQ9JzI1MDkubWxsaWItZGVjaXNpb24tdHJlZS5odG1sJz4="></html><!doctype html gtc:encodedoriginal="PCFkb2N0eXBlIGh0bWw-"><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class="no-js" gtc:encodedoriginal="PGh0bWwgY2xhc3M9Im5vLWpzIj4="><!--<![endif]--><head>
        <meta charset="utf-8" gtc:encodedoriginal="PG1ldGEgY2hhcnNldD0idXRmLTgiPg==">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" gtc:encodedoriginal="PG1ldGEgaHR0cC1lcXVpdj0iWC1VQS1Db21wYXRpYmxlIiBjb250ZW50PSJJRT1lZGdlLGNocm9tZT0xIj4=">
        <title>Decision Trees - RDD-based API - Spark 2.4.4 Documentation</title>
        

        

        <link rel="stylesheet" href="css/bootstrap.min.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvYm9vdHN0cmFwLm1pbi5jc3MiPg==">
        <style data-markx="7" gtc:encodedoriginal="PHN0eWxlIGRhdGEtbWFya3g9IjciPg=="></style>
        <meta name="viewport" content="width=device-width" gtc:encodedoriginal="PG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCI-">
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvYm9vdHN0cmFwLXJlc3BvbnNpdmUubWluLmNzcyI-">
        <link rel="stylesheet" href="css/main.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvbWFpbi5jc3MiPg==">

        <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js" data-markx="11" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9tb2Rlcm5penItMi42LjEtcmVzcG9uZC0xLjEuMC5taW4uanMiIGRhdGEtbWFya3g9IjExIj4="></script>

        <link rel="stylesheet" href="css/pygments-default.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvcHlnbWVudHMtZGVmYXVsdC5jc3MiPg==">

        
        <!-- Google analytics script -->
        <script type="text/javascript" data-markx="13" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGRhdGEtbWFya3g9IjEzIj4="></script>
        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="https://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        <div class="navbar navbar-fixed-top" id="topbar" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibmF2YmFyIG5hdmJhci1maXhlZC10b3AiIGlkPSJ0b3BiYXIiPg==">
            <div class="navbar-inner" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibmF2YmFyLWlubmVyIj4=">
                <div class="container" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29udGFpbmVyIj4=">
                    <div class="brand" gtc:encodedoriginal="PGRpdiBjbGFzcz0iYnJhbmQiPg=="><a href="index.html" gtc:encodedoriginal="PGEgaHJlZj0iaW5kZXguaHRtbCI-">
                      <img src="img/spark-logo-hd.png" style="height:50px;" gtc:encodedoriginal="PGltZyBzcmM9ImltZy9zcGFyay1sb2dvLWhkLnBuZyIgc3R5bGU9ImhlaWdodDo1MHB4OyI-"></a><span class="version" gtc:encodedoriginal="PHNwYW4gY2xhc3M9InZlcnNpb24iPg==">2.4.4</span>
                    </div>
                    <ul class="nav" gtc:encodedoriginal="PHVsIGNsYXNzPSJuYXYiPg==">
                        <!--TODO(andyk): Add class="active" attribute to li some how.-->
                        <li><a href="index.html" gtc:encodedoriginal="PGEgaHJlZj0iaW5kZXguaHRtbCI-">Overview</a></li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iIyIgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4=">Programming Guides<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="quick-start.html" gtc:encodedoriginal="PGEgaHJlZj0icXVpY2stc3RhcnQuaHRtbCI-">Quick Start</a></li>
                                <li><a href="rdd-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0icmRkLXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">RDDs, Accumulators, Broadcasts Vars</a></li>
                                <li><a href="sql-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ic3FsLXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">SQL, DataFrames, and Datasets</a></li>
                                <li><a href="structured-streaming-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ic3RydWN0dXJlZC1zdHJlYW1pbmctcHJvZ3JhbW1pbmctZ3VpZGUuaHRtbCI-">Structured Streaming</a></li>
                                <li><a href="streaming-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ic3RyZWFtaW5nLXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">Spark Streaming (DStreams)</a></li>
                                <li><a href="ml-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZ3VpZGUuaHRtbCI-">MLlib (Machine Learning)</a></li>
                                <li><a href="graphx-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0iZ3JhcGh4LXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">GraphX (Graph Processing)</a></li>
                                <li><a href="sparkr.html" gtc:encodedoriginal="PGEgaHJlZj0ic3BhcmtyLmh0bWwiPg==">SparkR (R on Spark)</a></li>
                            </ul>
                        </li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iIyIgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4=">API Docs<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="api/scala/index.html#org.apache.spark.package" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5wYWNrYWdlIj4=">Scala</a></li>
                                <li><a href="api/java/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvaW5kZXguaHRtbCI-">Java</a></li>
                                <li><a href="api/python/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9pbmRleC5odG1sIj4=">Python</a></li>
                                <li><a href="api/R/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL1IvaW5kZXguaHRtbCI-">R</a></li>
                                <li><a href="api/sql/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NxbC9pbmRleC5odG1sIj4=">SQL, Built-in Functions</a></li>
                            </ul>
                        </li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iIyIgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4=">Deploying<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="cluster-overview.html" gtc:encodedoriginal="PGEgaHJlZj0iY2x1c3Rlci1vdmVydmlldy5odG1sIj4=">Overview</a></li>
                                <li><a href="submitting-applications.html" gtc:encodedoriginal="PGEgaHJlZj0ic3VibWl0dGluZy1hcHBsaWNhdGlvbnMuaHRtbCI-">Submitting Applications</a></li>
                                <li class="divider" gtc:encodedoriginal="PGxpIGNsYXNzPSJkaXZpZGVyIj4="></li>
                                <li><a href="spark-standalone.html" gtc:encodedoriginal="PGEgaHJlZj0ic3Bhcmstc3RhbmRhbG9uZS5odG1sIj4=">Spark Standalone</a></li>
                                <li><a href="running-on-mesos.html" gtc:encodedoriginal="PGEgaHJlZj0icnVubmluZy1vbi1tZXNvcy5odG1sIj4=">Mesos</a></li>
                                <li><a href="running-on-yarn.html" gtc:encodedoriginal="PGEgaHJlZj0icnVubmluZy1vbi15YXJuLmh0bWwiPg==">YARN</a></li>
                                <li><a href="running-on-kubernetes.html" gtc:encodedoriginal="PGEgaHJlZj0icnVubmluZy1vbi1rdWJlcm5ldGVzLmh0bWwiPg==">Kubernetes</a></li>
                            </ul>
                        </li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="api.html" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iYXBpLmh0bWwiIGNsYXNzPSJkcm9wZG93bi10b2dnbGUiIGRhdGEtdG9nZ2xlPSJkcm9wZG93biI-">More<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="configuration.html" gtc:encodedoriginal="PGEgaHJlZj0iY29uZmlndXJhdGlvbi5odG1sIj4=">Configuration</a></li>
                                <li><a href="monitoring.html" gtc:encodedoriginal="PGEgaHJlZj0ibW9uaXRvcmluZy5odG1sIj4=">Monitoring</a></li>
                                <li><a href="tuning.html" gtc:encodedoriginal="PGEgaHJlZj0idHVuaW5nLmh0bWwiPg==">Tuning Guide</a></li>
                                <li><a href="job-scheduling.html" gtc:encodedoriginal="PGEgaHJlZj0iam9iLXNjaGVkdWxpbmcuaHRtbCI-">Job Scheduling</a></li>
                                <li><a href="security.html" gtc:encodedoriginal="PGEgaHJlZj0ic2VjdXJpdHkuaHRtbCI-">Security</a></li>
                                <li><a href="hardware-provisioning.html" gtc:encodedoriginal="PGEgaHJlZj0iaGFyZHdhcmUtcHJvdmlzaW9uaW5nLmh0bWwiPg==">Hardware Provisioning</a></li>
                                <li class="divider" gtc:encodedoriginal="PGxpIGNsYXNzPSJkaXZpZGVyIj4="></li>
                                <li><a href="building-spark.html" gtc:encodedoriginal="PGEgaHJlZj0iYnVpbGRpbmctc3BhcmsuaHRtbCI-">Building Spark</a></li>
                                <li><a href="https://spark.apache.org/contributing.html" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly9zcGFyay5hcGFjaGUub3JnL2NvbnRyaWJ1dGluZy5odG1sIj4=">Contributing to Spark</a></li>
                                <li><a href="https://spark.apache.org/third-party-projects.html" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly9zcGFyay5hcGFjaGUub3JnL3RoaXJkLXBhcnR5LXByb2plY3RzLmh0bWwiPg==">Third Party Projects</a></li>
                            </ul>
                        </li>
                    </ul>
                    <!--<p class="navbar-text pull-right"><span class="version-text">v2.4.4</span></p>-->
                </div>
            </div>
        </div>

        <div class="container-wrapper" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29udGFpbmVyLXdyYXBwZXIiPg==">

            
                
                    <div class="left-menu-wrapper" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibGVmdC1tZW51LXdyYXBwZXIiPg==">
    <div class="left-menu" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibGVmdC1tZW51Ij4=">
        <h3><a href="ml-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZ3VpZGUuaHRtbCI-">MLlib: Main Guide</a></h3>
        
<ul>

    <li>
        <a href="ml-statistics.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtc3RhdGlzdGljcy5odG1sIj4=">
            
                Basic statistics
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-datasource" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZGF0YXNvdXJjZSI-">
            
                Data sources
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-pipeline.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtcGlwZWxpbmUuaHRtbCI-">
            
                Pipelines
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-features.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZmVhdHVyZXMuaHRtbCI-">
            
                Extracting, transforming and selecting features
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-classification-regression.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtY2xhc3NpZmljYXRpb24tcmVncmVzc2lvbi5odG1sIj4=">
            
                Classification and Regression
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-clustering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtY2x1c3RlcmluZy5odG1sIj4=">
            
                Clustering
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-collaborative-filtering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtY29sbGFib3JhdGl2ZS1maWx0ZXJpbmcuaHRtbCI-">
            
                Collaborative filtering
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-frequent-pattern-mining.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZnJlcXVlbnQtcGF0dGVybi1taW5pbmcuaHRtbCI-">
            
                Frequent Pattern Mining
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-tuning.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtdHVuaW5nLmh0bWwiPg==">
            
                Model selection and tuning
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-advanced.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtYWR2YW5jZWQuaHRtbCI-">
            
                Advanced topics
            
        </a>
    </li>
    
    

</ul>

        <h3><a href="mllib-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZ3VpZGUuaHRtbCI-">MLlib: RDD-based API Guide</a></h3>
        
<ul>

    <li>
        <a href="mllib-data-types.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZGF0YS10eXBlcy5odG1sIj4=">
            
                Data types
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-statistics.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItc3RhdGlzdGljcy5odG1sIj4=">
            
                Basic statistics
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-classification-regression.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItY2xhc3NpZmljYXRpb24tcmVncmVzc2lvbi5odG1sIj4=">
            
                Classification and regression
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-collaborative-filtering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItY29sbGFib3JhdGl2ZS1maWx0ZXJpbmcuaHRtbCI-">
            
                Collaborative filtering
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-clustering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItY2x1c3RlcmluZy5odG1sIj4=">
            
                Clustering
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-dimensionality-reduction.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZGltZW5zaW9uYWxpdHktcmVkdWN0aW9uLmh0bWwiPg==">
            
                Dimensionality reduction
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-feature-extraction.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZmVhdHVyZS1leHRyYWN0aW9uLmh0bWwiPg==">
            
                Feature extraction and transformation
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-frequent-pattern-mining.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZnJlcXVlbnQtcGF0dGVybi1taW5pbmcuaHRtbCI-">
            
                Frequent pattern mining
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-evaluation-metrics.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZXZhbHVhdGlvbi1tZXRyaWNzLmh0bWwiPg==">
            
                Evaluation metrics
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-pmml-model-export.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItcG1tbC1tb2RlbC1leHBvcnQuaHRtbCI-">
            
                PMML model export
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-optimization.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItb3B0aW1pemF0aW9uLmh0bWwiPg==">
            
                Optimization (developer)
            
        </a>
    </li>
    
    

</ul>

    </div>
</div>
                
                <input id="nav-trigger" class="nav-trigger" checked type="checkbox" gtc:encodedoriginal="PGlucHV0IGlkPSJuYXYtdHJpZ2dlciIgY2xhc3M9Im5hdi10cmlnZ2VyIiBjaGVja2VkIHR5cGU9ImNoZWNrYm94Ij4=">
                <label for="nav-trigger" gtc:encodedoriginal="PGxhYmVsIGZvcj0ibmF2LXRyaWdnZXIiPg=="></label>
                <div class="content-with-sidebar" id="content" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29udGVudC13aXRoLXNpZGViYXIiIGlkPSJjb250ZW50Ij4=">
                    
                        <h1 class="title" gtc:encodedoriginal="PGgxIGNsYXNzPSJ0aXRsZSI-">Decision Trees - RDD-based API</h1>
                    

                    <ul id="markdown-toc" gtc:encodedoriginal="PHVsIGlkPSJtYXJrZG93bi10b2MiPg==">
  <li><a href="#basic-algorithm" id="markdown-toc-basic-algorithm" gtc:encodedoriginal="PGEgaHJlZj0iI2Jhc2ljLWFsZ29yaXRobSIgaWQ9Im1hcmtkb3duLXRvYy1iYXNpYy1hbGdvcml0aG0iPg==">Basic algorithm</a>    <ul>
      <li><a href="#node-impurity-and-information-gain" id="markdown-toc-node-impurity-and-information-gain" gtc:encodedoriginal="PGEgaHJlZj0iI25vZGUtaW1wdXJpdHktYW5kLWluZm9ybWF0aW9uLWdhaW4iIGlkPSJtYXJrZG93bi10b2Mtbm9kZS1pbXB1cml0eS1hbmQtaW5mb3JtYXRpb24tZ2FpbiI-">Node impurity and information gain</a></li>
      <li><a href="#split-candidates" id="markdown-toc-split-candidates" gtc:encodedoriginal="PGEgaHJlZj0iI3NwbGl0LWNhbmRpZGF0ZXMiIGlkPSJtYXJrZG93bi10b2Mtc3BsaXQtY2FuZGlkYXRlcyI-">Split candidates</a></li>
      <li><a href="#stopping-rule" id="markdown-toc-stopping-rule" gtc:encodedoriginal="PGEgaHJlZj0iI3N0b3BwaW5nLXJ1bGUiIGlkPSJtYXJrZG93bi10b2Mtc3RvcHBpbmctcnVsZSI-">Stopping rule</a></li>
    </ul>
  </li>
  <li><a href="#usage-tips" id="markdown-toc-usage-tips" gtc:encodedoriginal="PGEgaHJlZj0iI3VzYWdlLXRpcHMiIGlkPSJtYXJrZG93bi10b2MtdXNhZ2UtdGlwcyI-">Usage tips</a>    <ul>
      <li><a href="#problem-specification-parameters" id="markdown-toc-problem-specification-parameters" gtc:encodedoriginal="PGEgaHJlZj0iI3Byb2JsZW0tc3BlY2lmaWNhdGlvbi1wYXJhbWV0ZXJzIiBpZD0ibWFya2Rvd24tdG9jLXByb2JsZW0tc3BlY2lmaWNhdGlvbi1wYXJhbWV0ZXJzIj4=">Problem specification parameters</a></li>
      <li><a href="#stopping-criteria" id="markdown-toc-stopping-criteria" gtc:encodedoriginal="PGEgaHJlZj0iI3N0b3BwaW5nLWNyaXRlcmlhIiBpZD0ibWFya2Rvd24tdG9jLXN0b3BwaW5nLWNyaXRlcmlhIj4=">Stopping criteria</a></li>
      <li><a href="#tunable-parameters" id="markdown-toc-tunable-parameters" gtc:encodedoriginal="PGEgaHJlZj0iI3R1bmFibGUtcGFyYW1ldGVycyIgaWQ9Im1hcmtkb3duLXRvYy10dW5hYmxlLXBhcmFtZXRlcnMiPg==">Tunable parameters</a></li>
      <li><a href="#caching-and-checkpointing" id="markdown-toc-caching-and-checkpointing" gtc:encodedoriginal="PGEgaHJlZj0iI2NhY2hpbmctYW5kLWNoZWNrcG9pbnRpbmciIGlkPSJtYXJrZG93bi10b2MtY2FjaGluZy1hbmQtY2hlY2twb2ludGluZyI-">Caching and checkpointing</a></li>
    </ul>
  </li>
  <li><a href="#scaling" id="markdown-toc-scaling" gtc:encodedoriginal="PGEgaHJlZj0iI3NjYWxpbmciIGlkPSJtYXJrZG93bi10b2Mtc2NhbGluZyI-">Scaling</a></li>
  <li><a href="#examples" id="markdown-toc-examples" gtc:encodedoriginal="PGEgaHJlZj0iI2V4YW1wbGVzIiBpZD0ibWFya2Rvd24tdG9jLWV4YW1wbGVzIj4=">Examples</a>    <ul>
      <li><a href="#classification" id="markdown-toc-classification" gtc:encodedoriginal="PGEgaHJlZj0iI2NsYXNzaWZpY2F0aW9uIiBpZD0ibWFya2Rvd24tdG9jLWNsYXNzaWZpY2F0aW9uIj4=">Classification</a></li>
      <li><a href="#regression" id="markdown-toc-regression" gtc:encodedoriginal="PGEgaHJlZj0iI3JlZ3Jlc3Npb24iIGlkPSJtYXJrZG93bi10b2MtcmVncmVzc2lvbiI-">Regression</a></li>
    </ul>
  </li>
</ul>

<p><a href="http://en.wikipedia.org/wiki/Decision_tree_learning" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWNpc2lvbl90cmVlX2xlYXJuaW5nIj4=">Decision trees</a>
and their ensembles are popular methods for the machine learning tasks of
classification and regression. Decision trees are widely used since they are easy to interpret,
handle categorical features, extend to the multiclass classification setting, do not require
feature scaling, and are able to capture non-linearities and feature interactions. Tree ensemble
algorithms such as random forests and boosting are among the top performers for classification and
regression tasks.</p>

<p><code data-markx="187" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTg3Ij4="></code> supports decision trees for binary and multiclass classification and for regression,
using both continuous and categorical features. The implementation partitions data by rows,
allowing distributed training with millions of instances.</p>

<p>Ensembles of trees (Random Forests and Gradient-Boosted Trees) are described in the <a href="mllib-ensembles.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZW5zZW1ibGVzLmh0bWwiPg==">Ensembles guide</a>.</p>

<h2 id="basic-algorithm" gtc:encodedoriginal="PGgyIGlkPSJiYXNpYy1hbGdvcml0aG0iPg==">Basic algorithm</h2>

<p>The decision tree is a greedy algorithm that performs a recursive binary partitioning of the feature
space.  The tree predicts the same label for each bottommost (leaf) partition.
Each partition is chosen greedily by selecting the <em>best split</em> from a set of possible splits,
in order to maximize the information gain at a tree node. In other words, the split chosen at each
tree node is chosen from the set <code data-markx="193" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTkzIj4="></code> where <code data-markx="194" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk0Ij4="></code>
is the information gain when a split <code data-markx="195" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk1Ij4="></code> is applied to a dataset <code data-markx="196" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk2Ij4="></code>.</p>

<h3 id="node-impurity-and-information-gain" gtc:encodedoriginal="PGgzIGlkPSJub2RlLWltcHVyaXR5LWFuZC1pbmZvcm1hdGlvbi1nYWluIj4=">Node impurity and information gain</h3>

<p>The <em>node impurity</em> is a measure of the homogeneity of the labels at the node. The current
implementation provides two impurity measures for classification (Gini impurity and entropy) and one
impurity measure for regression (variance).</p>

<table class="table" gtc:encodedoriginal="PHRhYmxlIGNsYXNzPSJ0YWJsZSI-">
  <thead>
    <tr><th>Impurity</th><th>Task</th><th>Formula</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>Gini impurity</td>
	  <td>Classification</td>
	  <td>$sum_{i=1}^{C} f_i(1-f_i)$</td><td>$f_i$ is the frequency of label $i$ at a node and $C$ is the number of unique labels.</td>
    </tr>
    <tr>
      <td>Entropy</td>
	  <td>Classification</td>
	  <td>$sum_{i=1}^{C} -f_ilog(f_i)$</td><td>$f_i$ is the frequency of label $i$ at a node and $C$ is the number of unique labels.</td>
    </tr>
    <tr>
      <td>Variance</td>
	  <td>Regression</td>
     <td>$frac{1}{N} sum_{i=1}^{N} (y_i - mu)^2$</td><td>$y_i$ is label for an instance,
	  $N$ is the number of instances and $mu$ is the mean given by $frac{1}{N} sum_{i=1}^N y_i$.</td>
    </tr>
  </tbody>
</table>

<p>The <em>information gain</em> is the difference between the parent node impurity and the weighted sum of
the two child node impurities. Assuming that a split $s$ partitions the dataset <code data-markx="225" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI1Ij4="></code> of size <code data-markx="226" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI2Ij4="></code>
into two datasets <code data-markx="227" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI3Ij4="></code> and <code data-markx="228" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI4Ij4="></code> of sizes <code data-markx="229" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI5Ij4="></code> and <code data-markx="230" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMwIj4="></code>,
respectively, the information gain is:</p>

<p><code data-markx="232" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMyIj4="></code></p>

<h3 id="split-candidates" gtc:encodedoriginal="PGgzIGlkPSJzcGxpdC1jYW5kaWRhdGVzIj4=">Split candidates</h3>

<p><strong>Continuous features</strong></p>

<p>For small datasets in single-machine implementations, the split candidates for each continuous
feature are typically the unique values for the feature. Some implementations sort the feature
values and then use the ordered unique values as split candidates for faster tree calculations.</p>

<p>Sorting feature values is expensive for large distributed datasets.
This implementation computes an approximate set of split candidates by performing a quantile
calculation over a sampled fraction of the data.
The ordered splits create “bins” and the maximum number of such
bins can be specified using the <code data-markx="238" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjM4Ij4="></code> parameter.</p>

<p>Note that the number of bins cannot be greater than the number of instances <code data-markx="240" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQwIj4="></code> (a rare scenario
since the default <code data-markx="241" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQxIj4="></code> value is 32). The tree algorithm automatically reduces the number of
bins if the condition is not satisfied.</p>

<p><strong>Categorical features</strong></p>

<p>For a categorical feature with <code data-markx="245" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ1Ij4="></code> possible values (categories), one could come up with
<code data-markx="246" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ2Ij4="></code> split candidates. For binary (0/1) classification and regression,
we can reduce the number of split candidates to <code data-markx="247" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ3Ij4="></code> by ordering the
categorical feature values by the average label. (See Section 9.2.4 in
<a href="https://web.stanford.edu/~hastie/ElemStatLearn/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly93ZWIuc3RhbmZvcmQuZWR1L35oYXN0aWUvRWxlbVN0YXRMZWFybi8iPg==">Elements of Statistical Machine Learning</a> for
details.) For example, for a binary classification problem with one categorical feature with three
categories A, B and C whose corresponding proportions of label 1 are 0.2, 0.6 and 0.4, the categorical
features are ordered as A, C, B. The two split candidates are A | C, B
and A , C | B where | denotes the split.</p>

<p>In multiclass classification, all <code data-markx="250" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUwIj4="></code> possible splits are used whenever possible.
When <code data-markx="251" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUxIj4="></code> is greater than the <code data-markx="252" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUyIj4="></code> parameter, we use a (heuristic) method
similar to the method used for binary classification and regression.
The <code data-markx="253" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUzIj4="></code> categorical feature values are ordered by impurity,
and the resulting <code data-markx="254" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU0Ij4="></code> split candidates are considered.</p>

<h3 id="stopping-rule" gtc:encodedoriginal="PGgzIGlkPSJzdG9wcGluZy1ydWxlIj4=">Stopping rule</h3>

<p>The recursive tree construction is stopped at a node when one of the following conditions is met:</p>

<ol>
  <li>The node depth is equal to the <code data-markx="259" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU5Ij4="></code> training parameter.</li>
  <li>No split candidate leads to an information gain greater than <code data-markx="261" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjYxIj4="></code>.</li>
  <li>No split candidate produces child nodes which each have at least <code data-markx="263" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjYzIj4="></code> training instances.</li>
</ol>

<h2 id="usage-tips" gtc:encodedoriginal="PGgyIGlkPSJ1c2FnZS10aXBzIj4=">Usage tips</h2>

<p>We include a few guidelines for using decision trees by discussing the various parameters.
The parameters are listed below roughly in order of descending importance.  New users should mainly consider the “Problem specification parameters” section and the <code data-markx="266" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjY2Ij4="></code> parameter.</p>

<h3 id="problem-specification-parameters" gtc:encodedoriginal="PGgzIGlkPSJwcm9ibGVtLXNwZWNpZmljYXRpb24tcGFyYW1ldGVycyI-">Problem specification parameters</h3>

<p>These parameters describe the problem you want to solve and your dataset.
They should be specified and do not require tuning.</p>

<ul>
  <li>
    <p><strong><code data-markx="273" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjczIj4="></code></strong>: Type of decision tree, either <code data-markx="274" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc0Ij4="></code> or <code data-markx="275" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc1Ij4="></code>.</p>
  </li>
  <li>
    <p><strong><code data-markx="279" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc5Ij4="></code></strong>: Number of classes (for <code data-markx="280" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjgwIj4="></code> only).</p>
  </li>
  <li>
    <p><strong><code data-markx="284" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg0Ij4="></code></strong>: Specifies which features are categorical and how many categorical values each of those features can take.  This is given as a map from feature indices to feature arity (number of categories).  Any features not in this map are treated as continuous.</p>
    <ul>
      <li>For example, <code data-markx="287" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg3Ij4="></code> specifies that feature <code data-markx="288" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg4Ij4="></code> is binary (taking values <code data-markx="289" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg5Ij4="></code> or <code data-markx="290" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkwIj4="></code>) and that feature <code data-markx="291" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkxIj4="></code> has 10 categories (values <code data-markx="292" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkyIj4="></code>).  Note that feature indices are 0-based: features <code data-markx="293" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkzIj4="></code> and <code data-markx="294" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk0Ij4="></code> are the 1st and 5th elements of an instance’s feature vector.</li>
      <li>Note that you do not have to specify <code data-markx="296" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk2Ij4="></code>.  The algorithm will still run and may get reasonable results.  However, performance should be better if categorical features are properly designated.</li>
    </ul>
  </li>
</ul>

<h3 id="stopping-criteria" gtc:encodedoriginal="PGgzIGlkPSJzdG9wcGluZy1jcml0ZXJpYSI-">Stopping criteria</h3>

<p>These parameters determine when the tree stops building (adding new nodes).
When tuning these parameters, be careful to validate on held-out test data to avoid overfitting.</p>

<ul>
  <li>
    <p><strong><code data-markx="303" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzAzIj4="></code></strong>: Maximum depth of a tree.  Deeper trees are more expressive (potentially allowing higher accuracy), but they are also more costly to train and are more likely to overfit.</p>
  </li>
  <li>
    <p><strong><code data-markx="307" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzA3Ij4="></code></strong>: For a node to be split further, each of its children must receive at least this number of training instances.  This is commonly used with <a href="api/scala/index.html#org.apache.spark.mllib.tree.RandomForest$" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLlJhbmRvbUZvcmVzdCQiPg==">RandomForest</a> since those are often trained deeper than individual trees.</p>
  </li>
  <li>
    <p><strong><code data-markx="312" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzEyIj4="></code></strong>: For a node to be split further, the split must improve at least this much (in terms of information gain).</p>
  </li>
</ul>

<h3 id="tunable-parameters" gtc:encodedoriginal="PGgzIGlkPSJ0dW5hYmxlLXBhcmFtZXRlcnMiPg==">Tunable parameters</h3>

<p>These parameters may be tuned.  Be careful to validate on held-out test data when tuning in order to avoid overfitting.</p>

<ul>
  <li><strong><code data-markx="318" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzE4Ij4="></code></strong>: Number of bins used when discretizing continuous features.
    <ul>
      <li>Increasing <code data-markx="321" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzIxIj4="></code> allows the algorithm to consider more split candidates and make fine-grained split decisions.  However, it also increases computation and communication.</li>
      <li>Note that the <code data-markx="323" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzIzIj4="></code> parameter must be at least the maximum number of categories <code data-markx="324" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI0Ij4="></code> for any categorical feature.</li>
    </ul>
  </li>
  <li><strong><code data-markx="327" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI3Ij4="></code></strong>: Amount of memory to be used for collecting sufficient statistics.
    <ul>
      <li>The default value is conservatively chosen to be 256 MB to allow the decision algorithm to work in most scenarios.  Increasing <code data-markx="330" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzMwIj4="></code> can lead to faster training (if the memory is available) by allowing fewer passes over the data.  However, there may be decreasing returns as <code data-markx="331" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzMxIj4="></code> grows since the amount of communication on each iteration can be proportional to <code data-markx="332" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzMyIj4="></code>.</li>
      <li><em>Implementation details</em>: For faster processing, the decision tree algorithm collects statistics about groups of nodes to split (rather than 1 node at a time).  The number of nodes which can be handled in one group is determined by the memory requirements (which vary per features).  The <code data-markx="335" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzM1Ij4="></code> parameter specifies the memory limit in terms of megabytes which each worker can use for these statistics.</li>
    </ul>
  </li>
  <li>
    <p><strong><code data-markx="339" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzM5Ij4="></code></strong>: Fraction of the training data used for learning the decision tree.  This parameter is most relevant for training ensembles of trees (using <a href="api/scala/index.html#org.apache.spark.mllib.tree.RandomForest$" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLlJhbmRvbUZvcmVzdCQiPg=="><code data-markx="341" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQxIj4="></code></a> and <a href="api/scala/index.html#org.apache.spark.mllib.tree.GradientBoostedTrees" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLkdyYWRpZW50Qm9vc3RlZFRyZWVzIj4="><code data-markx="343" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQzIj4="></code></a>), where it can be useful to subsample the original data.  For training a single decision tree, this parameter is less useful since the number of training instances is generally not the main constraint.</p>
  </li>
  <li><strong><code data-markx="346" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQ2Ij4="></code></strong>: Impurity measure (discussed above) used to choose between candidate splits.  This measure must match the <code data-markx="347" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQ3Ij4="></code> parameter.</li>
</ul>

<h3 id="caching-and-checkpointing" gtc:encodedoriginal="PGgzIGlkPSJjYWNoaW5nLWFuZC1jaGVja3BvaW50aW5nIj4=">Caching and checkpointing</h3>

<p>MLlib 1.2 adds several features for scaling up to larger (deeper) trees and tree ensembles.  When <code data-markx="350" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzUwIj4="></code> is set to be large, it can be useful to turn on node ID caching and checkpointing.  These parameters are also useful for <a href="api/scala/index.html#org.apache.spark.mllib.tree.RandomForest$" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLlJhbmRvbUZvcmVzdCQiPg==">RandomForest</a> when <code data-markx="352" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzUyIj4="></code> is set to be large.</p>

<ul>
  <li><strong><code data-markx="356" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzU2Ij4="></code></strong>: If this is set to true, the algorithm will avoid passing the current model (tree or trees) to executors on each iteration.
    <ul>
      <li>This can be useful with deep trees (speeding up computation on workers) and for large Random Forests (reducing communication on each iteration).</li>
      <li><em>Implementation details</em>: By default, the algorithm communicates the current model to executors so that executors can match training instances with tree nodes.  When this setting is turned on, then the algorithm will instead cache this information.</li>
    </ul>
  </li>
</ul>

<p>Node ID caching generates a sequence of RDDs (1 per iteration).  This long lineage can cause performance problems, but checkpointing intermediate RDDs can alleviate those problems.
Note that checkpointing is only applicable when <code data-markx="362" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzYyIj4="></code> is set to true.</p>

<ul>
  <li>
    <p><strong><code data-markx="367" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzY3Ij4="></code></strong>: Directory for checkpointing node ID cache RDDs.</p>
  </li>
  <li>
    <p><strong><code data-markx="371" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzcxIj4="></code></strong>: Frequency for checkpointing node ID cache RDDs.  Setting this too low will cause extra overhead from writing to HDFS; setting this too high can cause problems if executors fail and the RDD needs to be recomputed.</p>
  </li>
</ul>

<h2 id="scaling" gtc:encodedoriginal="PGgyIGlkPSJzY2FsaW5nIj4=">Scaling</h2>

<p>Computation scales approximately linearly in the number of training instances,
in the number of features, and in the <code data-markx="374" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzc0Ij4="></code> parameter.
Communication scales approximately linearly in the number of features and in <code data-markx="375" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzc1Ij4="></code>.</p>

<p>The implemented algorithm reads both sparse and dense data. However, it is not optimized for sparse input.</p>

<h2 id="examples" gtc:encodedoriginal="PGgyIGlkPSJleGFtcGxlcyI-">Examples</h2>

<h3 id="classification" gtc:encodedoriginal="PGgzIGlkPSJjbGFzc2lmaWNhdGlvbiI-">Classification</h3>

<p>The example below demonstrates how to load a
<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5jc2llLm50dS5lZHUudHcvfmNqbGluL2xpYnN2bXRvb2xzL2RhdGFzZXRzLyI-">LIBSVM data file</a>,
parse it as an RDD of <code data-markx="381" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzgxIj4="></code> and then
perform classification using a decision tree with Gini impurity as an impurity measure and a
maximum tree depth of 5. The test error is calculated to measure the algorithm accuracy.</p>

<div class="codetabs" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29kZXRhYnMiPg==">

<div data-lang="scala" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InNjYWxhIj4=">
    <p>Refer to the <a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="386" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzg2Ij4="></code> Scala docs</a> and <a href="api/scala/index.html#org.apache.spark.mllib.tree.model.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLm1vZGVsLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="388" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzg4Ij4="></code> Scala docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="390" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIzOTAiPg=="></pre></div>
    <div><small>Find full example code at "examples/src/main/scala/org/apache/spark/examples/mllib/DecisionTreeClassificationExample.scala" in the Spark repo.</small></div>
  </div>

<div data-lang="java" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9ImphdmEiPg==">
    <p>Refer to the <a href="api/java/org/apache/spark/mllib/tree/DecisionTree.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL0RlY2lzaW9uVHJlZS5odG1sIj4="><code data-markx="580" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNTgwIj4="></code> Java docs</a> and <a href="api/java/org/apache/spark/mllib/tree/model/DecisionTreeModel.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL21vZGVsL0RlY2lzaW9uVHJlZU1vZGVsLmh0bWwiPg=="><code data-markx="582" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNTgyIj4="></code> Java docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="584" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSI1ODQiPg=="></pre></div>
    <div><small>Find full example code at "examples/src/main/java/org/apache/spark/examples/mllib/JavaDecisionTreeClassificationExample.java" in the Spark repo.</small></div>
  </div>

<div data-lang="python" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InB5dGhvbiI-">
    <p>Refer to the <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="863" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iODYzIj4="></code> Python docs</a> and <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="865" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iODY1Ij4="></code> Python docs</a> for more details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="867" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSI4NjciPg=="></pre></div>
    <div><small>Find full example code at "examples/src/main/python/mllib/decision_tree_classification_example.py" in the Spark repo.</small></div>
  </div>

</div>

<h3 id="regression" gtc:encodedoriginal="PGgzIGlkPSJyZWdyZXNzaW9uIj4=">Regression</h3>

<p>The example below demonstrates how to load a
<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5jc2llLm50dS5lZHUudHcvfmNqbGluL2xpYnN2bXRvb2xzL2RhdGFzZXRzLyI-">LIBSVM data file</a>,
parse it as an RDD of <code data-markx="1040" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA0MCI-"></code> and then
perform regression using a decision tree with variance as an impurity measure and a maximum tree
depth of 5. The Mean Squared Error (MSE) is computed at the end to evaluate
<a href="http://en.wikipedia.org/wiki/Goodness_of_fit" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Hb29kbmVzc19vZl9maXQiPg==">goodness of fit</a>.</p>

<div class="codetabs" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29kZXRhYnMiPg==">

<div data-lang="scala" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InNjYWxhIj4=">
    <p>Refer to the <a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="1046" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA0NiI-"></code> Scala docs</a> and <a href="api/scala/index.html#org.apache.spark.mllib.tree.model.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLm1vZGVsLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="1048" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA0OCI-"></code> Scala docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="1050" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIxMDUwIj4="></pre></div>
    <div><small>Find full example code at "examples/src/main/scala/org/apache/spark/examples/mllib/DecisionTreeRegressionExample.scala" in the Spark repo.</small></div>
  </div>

<div data-lang="java" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9ImphdmEiPg==">
    <p>Refer to the <a href="api/java/org/apache/spark/mllib/tree/DecisionTree.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL0RlY2lzaW9uVHJlZS5odG1sIj4="><code data-markx="1236" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTIzNiI-"></code> Java docs</a> and <a href="api/java/org/apache/spark/mllib/tree/model/DecisionTreeModel.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL21vZGVsL0RlY2lzaW9uVHJlZU1vZGVsLmh0bWwiPg=="><code data-markx="1238" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTIzOCI-"></code> Java docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="1240" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIxMjQwIj4="></pre></div>
    <div><small>Find full example code at "examples/src/main/java/org/apache/spark/examples/mllib/JavaDecisionTreeRegressionExample.java" in the Spark repo.</small></div>
  </div>

<div data-lang="python" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InB5dGhvbiI-">
    <p>Refer to the <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="1512" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTUxMiI-"></code> Python docs</a> and <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="1514" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTUxNCI-"></code> Python docs</a> for more details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="1516" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIxNTE2Ij4="></pre></div>
    <div><small>Find full example code at "examples/src/main/python/mllib/decision_tree_regression_example.py" in the Spark repo.</small></div>
  </div>

</div>


                </div>
            
             <!-- /container -->
        </div>

        <script src="js/vendor/jquery-1.12.4.min.js" data-markx="1694" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9qcXVlcnktMS4xMi40Lm1pbi5qcyIgZGF0YS1tYXJreD0iMTY5NCI-"></script>
        <script src="js/vendor/bootstrap.min.js" data-markx="1695" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9ib290c3RyYXAubWluLmpzIiBkYXRhLW1hcmt4PSIxNjk1Ij4="></script>
        <script src="js/vendor/anchor.min.js" data-markx="1696" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9hbmNob3IubWluLmpzIiBkYXRhLW1hcmt4PSIxNjk2Ij4="></script>
        <script src="js/main.js" data-markx="1697" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL21haW4uanMiIGRhdGEtbWFya3g9IjE2OTciPg=="></script>

        <!-- MathJax Section -->
        <script type="text/x-mathjax-config" data-markx="1698" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L3gtbWF0aGpheC1jb25maWciIGRhdGEtbWFya3g9IjE2OTgiPg=="></script>
        <script data-markx="1699" gtc:encodedoriginal="PHNjcmlwdCBkYXRhLW1hcmt4PSIxNjk5Ij4="></script>
    

</body></html><html id=&#39;2236.content-negotiation.html&#39; gtc:encodedoriginal="PGh0bWwgaWQ9JzIyMzYuY29udGVudC1uZWdvdGlhdGlvbi5odG1sJz4="></html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" gtc:encodedoriginal="PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIGxhbmc9ImVuIiB4bWw6bGFuZz0iZW4iPg=="><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type" gtc:encodedoriginal="PG1ldGEgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PUlTTy04ODU5LTEiIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSI-">
<title>Content Negotiation - Apache HTTP Server Version 2.4</title>
<link href="./style/css/manual-zip.css" rel="stylesheet" media="all" type="text/css" title="Main stylesheet" gtc:encodedoriginal="PGxpbmsgaHJlZj0iLi9zdHlsZS9jc3MvbWFudWFsLXppcC5jc3MiIHJlbD0ic3R5bGVzaGVldCIgbWVkaWE9ImFsbCIgdHlwZT0idGV4dC9jc3MiIHRpdGxlPSJNYWluIHN0eWxlc2hlZXQiPg==">
<link href="./style/css/manual-zip-100pc.css" rel="alternate stylesheet" media="all" type="text/css" title="No Sidebar - Default font size" gtc:encodedoriginal="PGxpbmsgaHJlZj0iLi9zdHlsZS9jc3MvbWFudWFsLXppcC0xMDBwYy5jc3MiIHJlbD0iYWx0ZXJuYXRlIHN0eWxlc2hlZXQiIG1lZGlhPSJhbGwiIHR5cGU9InRleHQvY3NzIiB0aXRsZT0iTm8gU2lkZWJhciAtIERlZmF1bHQgZm9udCBzaXplIj4=">
<link href="./style/css/manual-print.css" rel="stylesheet" media="print" type="text/css" gtc:encodedoriginal="PGxpbmsgaHJlZj0iLi9zdHlsZS9jc3MvbWFudWFsLXByaW50LmNzcyIgcmVsPSJzdHlsZXNoZWV0IiBtZWRpYT0icHJpbnQiIHR5cGU9InRleHQvY3NzIj4="><link rel="stylesheet" type="text/css" href="./style/css/prettify.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iLi9zdHlsZS9jc3MvcHJldHRpZnkuY3NzIj4=">
<script src="./style/scripts/prettify.min.js" type="text/javascript" data-markx="9" gtc:encodedoriginal="PHNjcmlwdCBzcmM9Ii4vc3R5bGUvc2NyaXB0cy9wcmV0dGlmeS5taW4uanMiIHR5cGU9InRleHQvamF2YXNjcmlwdCIgZGF0YS1tYXJreD0iOSI-"></script>
</head>
<body id="manual-page" gtc:encodedoriginal="PGJvZHkgaWQ9Im1hbnVhbC1wYWdlIj4="><div id="page-header" gtc:encodedoriginal="PGRpdiBpZD0icGFnZS1oZWFkZXIiPg==">
<p class="menu" gtc:encodedoriginal="PHAgY2xhc3M9Im1lbnUiPg=="><a href="./mod/index.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9tb2QvaW5kZXguaHRtbCI-">Modules</a> | <a href="./mod/directives.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9tb2QvZGlyZWN0aXZlcy5odG1sIj4=">Directives</a> | <a href="http://wiki.apache.org/httpd/FAQ" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9odHRwZC9GQVEiPg==">FAQ</a> | <a href="./glossary.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9nbG9zc2FyeS5odG1sIj4=">Glossary</a> | <a href="./sitemap.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9zaXRlbWFwLmh0bWwiPg==">Sitemap</a></p>
<p class="apache" gtc:encodedoriginal="PHAgY2xhc3M9ImFwYWNoZSI-">Apache HTTP Server Version 2.4</p>
<img alt="" src="./images/feather.png" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9mZWF0aGVyLnBuZyI-"></div>
<div class="up" gtc:encodedoriginal="PGRpdiBjbGFzcz0idXAiPg=="><a href="./index.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9pbmRleC5odG1sIj4="><img title="<-" alt="<-" src="./images/left.gif" gtc:encodedoriginal="PGltZyB0aXRsZT0iPC0iIGFsdD0iPC0iIHNyYz0iLi9pbWFnZXMvbGVmdC5naWYiPg=="></a></div>
<div id="path" gtc:encodedoriginal="PGRpdiBpZD0icGF0aCI-">
<a href="http://www.apache.org/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5hcGFjaGUub3JnLyI-">Apache</a> > <a href="http://httpd.apache.org/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2h0dHBkLmFwYWNoZS5vcmcvIj4=">HTTP Server</a> > <a href="http://httpd.apache.org/docs/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2h0dHBkLmFwYWNoZS5vcmcvZG9jcy8iPg==">Documentation</a> > <a href="./index.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9pbmRleC5odG1sIj4=">Version 2.4</a></div><div id="page-content" gtc:encodedoriginal="PGRpdiBpZD0icGFnZS1jb250ZW50Ij4="><div id="preamble" gtc:encodedoriginal="PGRpdiBpZD0icHJlYW1ibGUiPg=="><h1>Content Negotiation</h1>



    <p>Apache HTTPD supports content negotiation as described in
    the HTTP/1.1 specification. It can choose the best
    representation of a resource based on the browser-supplied
    preferences for media type, languages, character set and
    encoding. It also implements a couple of features to give
    more intelligent handling of requests from browsers that send
    incomplete negotiation information.</p>

    <p>Content negotiation is provided by the
    <code class="module" data-markx="33" gtc:encodedoriginal="PGNvZGUgY2xhc3M9Im1vZHVsZSIgZGF0YS1tYXJreD0iMzMiPg=="></code> module, which is compiled in
    by default.</p>
</div>
<div id="quickview" gtc:encodedoriginal="PGRpdiBpZD0icXVpY2t2aWV3Ij4="><a href="https://www.apache.org/foundation/contributing.html" class="badge" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9mb3VuZGF0aW9uL2NvbnRyaWJ1dGluZy5odG1sIiBjbGFzcz0iYmFkZ2UiPg=="><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support Apache!" gtc:encodedoriginal="PGltZyBzcmM9Imh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvaW1hZ2VzL1N1cHBvcnRBcGFjaGUtc21hbGwucG5nIiBhbHQ9IlN1cHBvcnQgQXBhY2hlISI-"></a><ul id="toc" gtc:encodedoriginal="PHVsIGlkPSJ0b2MiPg=="><li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#about" gtc:encodedoriginal="PGEgaHJlZj0iI2Fib3V0Ij4=">About Content Negotiation</a></li>
<li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#negotiation" gtc:encodedoriginal="PGEgaHJlZj0iI25lZ290aWF0aW9uIj4=">Negotiation in httpd</a></li>
<li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#methods" gtc:encodedoriginal="PGEgaHJlZj0iI21ldGhvZHMiPg==">The Negotiation Methods</a></li>
<li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#better" gtc:encodedoriginal="PGEgaHJlZj0iI2JldHRlciI-">Fiddling with Quality
    Values</a></li>
<li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#extensions" gtc:encodedoriginal="PGEgaHJlZj0iI2V4dGVuc2lvbnMiPg==">Extensions to Transparent Content
Negotiation</a></li>
<li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#naming" gtc:encodedoriginal="PGEgaHJlZj0iI25hbWluZyI-">Note on hyperlinks and naming conventions</a></li>
<li><img alt="" src="./images/down.gif" gtc:encodedoriginal="PGltZyBhbHQ9IiIgc3JjPSIuL2ltYWdlcy9kb3duLmdpZiI-"> <a href="#caching" gtc:encodedoriginal="PGEgaHJlZj0iI2NhY2hpbmciPg==">Note on Caching</a></li>
</ul></div>
<div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="about" id="about" gtc:encodedoriginal="PGEgbmFtZT0iYWJvdXQiIGlkPSJhYm91dCI-">About Content Negotiation</a></h2>

    <p>A resource may be available in several different
    representations. For example, it might be available in
    different languages or different media types, or a combination.
    One way of selecting the most appropriate choice is to give the
    user an index page, and let them select. However it is often
    possible for the server to choose automatically. This works
    because browsers can send, as part of each request, information
    about what representations they prefer. For example, a browser
    could indicate that it would like to see information in French,
    if possible, else English will do. Browsers indicate their
    preferences by headers in the request. To request only French
    representations, the browser would send</p>

<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="69" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNjkiPg=="></code></p></div>

    <p>Note that this preference will only be applied when there is
    a choice of representations and they vary by language.</p>

    <p>As an example of a more complex request, this browser has
    been configured to accept French and English, but prefer
    French, and to accept various media types, preferring HTML over
    plain text or other text types, and preferring GIF or JPEG over
    other media types, but also allowing any other media type as a
    last resort:</p>

<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="74" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNzQiPg=="></code></p></div>

    <p>httpd supports 'server driven' content negotiation, as
    defined in the HTTP/1.1 specification. It fully supports the
    <code data-markx="77" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNzciPg=="></code>, <code data-markx="78" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNzgiPg=="></code>,
    <code data-markx="79" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNzkiPg=="></code> and <code data-markx="80" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iODAiPg=="></code>
    request headers. httpd also supports 'transparent'
    content negotiation, which is an experimental negotiation
    protocol defined in RFC 2295 and RFC 2296. It does not offer
    support for 'feature negotiation' as defined in these RFCs.</p>

    <p>A <strong>resource</strong> is a conceptual entity
    identified by a URI (RFC 2396). An HTTP server like Apache HTTP Server
    provides access to <strong>representations</strong> of the
    resource(s) within its namespace, with each representation in
    the form of a sequence of bytes with a defined media type,
    character set, encoding, etc. Each resource may be associated
    with zero, one, or more than one representation at any given
    time. If multiple representations are available, the resource
    is referred to as <strong>negotiable</strong> and each of its
    representations is termed a <strong>variant</strong>. The ways
    in which the variants for a negotiable resource vary are called
    the <strong>dimensions</strong> of negotiation.</p>
</div><div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="negotiation" id="negotiation" gtc:encodedoriginal="PGEgbmFtZT0ibmVnb3RpYXRpb24iIGlkPSJuZWdvdGlhdGlvbiI-">Negotiation in httpd</a></h2>

    <p>In order to negotiate a resource, the server needs to be
    given information about each of the variants. This is done in
    one of two ways:</p>

    <ul>
      <li>Using a type map (<em>i.e.</em>, a <code data-markx="97" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iOTciPg=="></code>
      file) which names the files containing the variants
      explicitly, or</li>

      <li>Using a 'MultiViews' search, where the server does an
      implicit filename pattern match and chooses from among the
      results.</li>
    </ul>

   <h3><a name="type-map" id="type-map" gtc:encodedoriginal="PGEgbmFtZT0idHlwZS1tYXAiIGlkPSJ0eXBlLW1hcCI-">Using a type-map file</a></h3>

    <p>A type map is a document which is associated with the handler
    named <code data-markx="102" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTAyIj4="></code> (or, for backwards-compatibility with
    older httpd configurations, the <a class="glossarylink" href="./glossary.html#mime-type" title="see glossary" gtc:encodedoriginal="PGEgY2xhc3M9Imdsb3NzYXJ5bGluayIgaHJlZj0iLi9nbG9zc2FyeS5odG1sI21pbWUtdHlwZSIgdGl0bGU9InNlZSBnbG9zc2FyeSI-">MIME-type</a>
    <code data-markx="104" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA0Ij4="></code>). Note that to use this
    feature, you must have a handler set in the configuration that
    defines a file suffix as <code data-markx="105" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA1Ij4="></code>; this is best done
    with</p>

<pre class="prettyprint lang-config" data-markx="106" gtc:encodedoriginal="PHByZSBjbGFzcz0icHJldHR5cHJpbnQgbGFuZy1jb25maWciIGRhdGEtbWFya3g9IjEwNiI-"></pre>


    <p>in the server configuration file.</p>

    <p>Type map files should have the same name as the resource
    which they are describing, followed by the extension
    <code data-markx="109" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA5Ij4="></code>. In the examples shown below, the resource is
    named <code data-markx="110" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTEwIj4="></code>, so the type map file is named
    <code data-markx="111" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTExIj4="></code>.</p>

    <p>This file should have an entry for each available
    variant; these entries consist of contiguous HTTP-format header
    lines. Entries for different variants are separated by blank
    lines. Blank lines are illegal within an entry. It is
    conventional to begin a map file with an entry for the combined
    entity as a whole (although this is not required, and if
    present will be ignored). An example map file is shown below.</p>

    <p>URIs in this file are relative to the location of the type map
    file. Usually, these files will be located in the same directory as
    the type map file, but this is not required. You may provide
    absolute or relative URIs for any file located on the same server as
    the map file.</p>

<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="116" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTE2Ij4="></code></p></div>

    <p>Note also that a typemap file will take precedence over the
    filename's extension, even when Multiviews is on. If the
    variants have different source qualities, that may be indicated
    by the "qs" parameter to the media type, as in this picture
    (available as JPEG, GIF, or ASCII-art): </p>

<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="129" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTI5Ij4="></code></p></div>

    <p>qs values can vary in the range 0.000 to 1.000. Note that
    any variant with a qs value of 0.000 will never be chosen.
    Variants with no 'qs' parameter value are given a qs factor of
    1.0. The qs parameter indicates the relative 'quality' of this
    variant compared to the other available variants, independent
    of the client's capabilities. For example, a JPEG file is
    usually of higher source quality than an ASCII file if it is
    attempting to represent a photograph. However, if the resource
    being represented is an original ASCII art, then an ASCII
    representation would have a higher source quality than a JPEG
    representation. A qs value is therefore specific to a given
    variant depending on the nature of the resource it
    represents.</p>

    <p>The full list of headers recognized is available in the <a href="mod/mod_negotiation.html#typemaps" gtc:encodedoriginal="PGEgaHJlZj0ibW9kL21vZF9uZWdvdGlhdGlvbi5odG1sI3R5cGVtYXBzIj4=">mod_negotiation
    typemap</a> documentation.</p>


<h3><a name="multiviews" id="multiviews" gtc:encodedoriginal="PGEgbmFtZT0ibXVsdGl2aWV3cyIgaWQ9Im11bHRpdmlld3MiPg==">Multiviews</a></h3>

    <p><code data-markx="146" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTQ2Ij4="></code> is a per-directory option, meaning it
    can be set with an <code class="directive" data-markx="147" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTQ3Ij4="></code>
    directive within a <code class="directive" data-markx="149" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTQ5Ij4="></code>, <code class="directive" data-markx="151" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTUxIj4="></code> or <code class="directive" data-markx="153" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTUzIj4="></code> section in
    <code data-markx="155" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTU1Ij4="></code>, or (if <code class="directive" data-markx="156" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTU2Ij4="></code> is properly set) in
    <code data-markx="158" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTU4Ij4="></code> files. Note that <code data-markx="159" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTU5Ij4="></code>
    does not set <code data-markx="160" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTYwIj4="></code>; you have to ask for it by
    name.</p>

    <p>The effect of <code data-markx="162" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTYyIj4="></code> is as follows: if the
    server receives a request for <code data-markx="163" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTYzIj4="></code>, if
    <code data-markx="164" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTY0Ij4="></code> has <code data-markx="165" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTY1Ij4="></code> enabled, and
    <code data-markx="166" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTY2Ij4="></code> does <em>not</em> exist, then the
    server reads the directory looking for files named foo.*, and
    effectively fakes up a type map which names all those files,
    assigning them the same media types and content-encodings it
    would have if the client had asked for one of them by name. It
    then chooses the best match to the client's requirements.</p>

    <p><code data-markx="169" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTY5Ij4="></code> may also apply to searches for the file
    named by the <code class="directive" data-markx="170" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTcwIj4="></code> directive, if the
    server is trying to index a directory. If the configuration files
    specify</p>
<pre class="prettyprint lang-config" data-markx="172" gtc:encodedoriginal="PHByZSBjbGFzcz0icHJldHR5cHJpbnQgbGFuZy1jb25maWciIGRhdGEtbWFya3g9IjE3MiI-"></pre>

    <p>then the server will arbitrate between <code data-markx="174" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTc0Ij4="></code>
    and <code data-markx="175" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTc1Ij4="></code> if both are present. If neither
    are present, and <code data-markx="176" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTc2Ij4="></code> is there, the server
    will run it.</p>

    <p>If one of the files found when reading the directory does not
    have an extension recognized by <code data-markx="178" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTc4Ij4="></code> to designate
    its Charset, Content-Type, Language, or Encoding, then the result
    depends on the setting of the <code class="directive" data-markx="179" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMTc5Ij4="></code> directive.  This
    directive determines whether handlers, filters, and other
    extension types can participate in MultiViews negotiation.</p>

</div><div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="methods" id="methods" gtc:encodedoriginal="PGEgbmFtZT0ibWV0aG9kcyIgaWQ9Im1ldGhvZHMiPg==">The Negotiation Methods</a></h2>

    <p>After httpd has obtained a list of the variants for a given
    resource, either from a type-map file or from the filenames in
    the directory, it invokes one of two methods to decide on the
    'best' variant to return, if any. It is not necessary to know
    any of the details of how negotiation actually takes place in
    order to use httpd's content negotiation features. However the
    rest of this document explains the methods used for those
    interested. </p>

    <p>There are two negotiation methods:</p>

    <ol>
      <li><strong>Server driven negotiation with the httpd
      algorithm</strong> is used in the normal case. The httpd
      algorithm is explained in more detail below. When this
      algorithm is used, httpd can sometimes 'fiddle' the quality
      factor of a particular dimension to achieve a better result.
      The ways httpd can fiddle quality factors is explained in
      more detail below.</li>

      <li><strong>Transparent content negotiation</strong> is used
      when the browser specifically requests this through the
      mechanism defined in RFC 2295. This negotiation method gives
      the browser full control over deciding on the 'best' variant,
      the result is therefore dependent on the specific algorithms
      used by the browser. As part of the transparent negotiation
      process, the browser can ask httpd to run the 'remote
      variant selection algorithm' defined in RFC 2296.</li>
    </ol>

<h3><a name="dimensions" id="dimensions" gtc:encodedoriginal="PGEgbmFtZT0iZGltZW5zaW9ucyIgaWQ9ImRpbWVuc2lvbnMiPg==">Dimensions of Negotiation</a></h3>

    <table>
      
      <tbody><tr valign="top" gtc:encodedoriginal="PHRyIHZhbGlnbj0idG9wIj4=">
        <th>Dimension</th>

        <th>Notes</th>
      </tr>

      <tr valign="top" gtc:encodedoriginal="PHRyIHZhbGlnbj0idG9wIj4=">
        <td>Media Type</td>

        <td>Browser indicates preferences with the <code data-markx="204" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjA0Ij4="></code>
        header field. Each item can have an associated quality factor.
        Variant description can also have a quality factor (the "qs"
        parameter).</td>
      </tr>

      <tr valign="top" gtc:encodedoriginal="PHRyIHZhbGlnbj0idG9wIj4=">
        <td>Language</td>

        <td>Browser indicates preferences with the
        <code data-markx="208" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjA4Ij4="></code> header field. Each item can have
        a quality factor. Variants can be associated with none, one or
        more than one language.</td>
      </tr>

      <tr valign="top" gtc:encodedoriginal="PHRyIHZhbGlnbj0idG9wIj4=">
        <td>Encoding</td>

        <td>Browser indicates preference with the
        <code data-markx="212" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjEyIj4="></code> header field. Each item can have
        a quality factor.</td>
      </tr>

      <tr valign="top" gtc:encodedoriginal="PHRyIHZhbGlnbj0idG9wIj4=">
        <td>Charset</td>

        <td>Browser indicates preference with the
        <code data-markx="216" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjE2Ij4="></code> header field. Each item can have a
        quality factor. Variants can indicate a charset as a parameter
        of the media type.</td>
      </tr>
    </tbody></table>


<h3><a name="algorithm" id="algorithm" gtc:encodedoriginal="PGEgbmFtZT0iYWxnb3JpdGhtIiBpZD0iYWxnb3JpdGhtIj4=">httpd Negotiation Algorithm</a></h3>

    <p>httpd can use the following algorithm to select the 'best'
    variant (if any) to return to the browser. This algorithm is
    not further configurable. It operates as follows:</p>

    <ol>
      <li>First, for each dimension of the negotiation, check the
      appropriate <em>Accept*</em> header field and assign a
      quality to each variant. If the <em>Accept*</em> header for
      any dimension implies that this variant is not acceptable,
      eliminate it. If no variants remain, go to step 4.</li>

      <li>
        Select the 'best' variant by a process of elimination. Each
        of the following tests is applied in order. Any variants
        not selected at each test are eliminated. After each test,
        if only one variant remains, select it as the best match
        and proceed to step 3. If more than one variant remains,
        move on to the next test.

        <ol>
          <li>Multiply the quality factor from the <code data-markx="227" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI3Ij4="></code>
          header with the quality-of-source factor for this variants
          media type, and select the variants with the highest
          value.</li>

          <li>Select the variants with the highest language quality
          factor.</li>

          <li>Select the variants with the best language match,
          using either the order of languages in the
          <code data-markx="230" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMwIj4="></code> header (if present), or else
          the order of languages in the <code data-markx="231" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMxIj4="></code>
          directive (if present).</li>

          <li>Select the variants with the highest 'level' media
          parameter (used to give the version of text/html media
          types).</li>

          <li>Select variants with the best charset media
          parameters, as given on the <code data-markx="234" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjM0Ij4="></code>
          header line.  Charset ISO-8859-1 is acceptable unless
          explicitly excluded. Variants with a <code data-markx="235" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjM1Ij4="></code>
          media type but not explicitly associated with a particular
          charset are assumed to be in ISO-8859-1.</li>

          <li>Select those variants which have associated charset
          media parameters that are <em>not</em> ISO-8859-1. If
          there are no such variants, select all variants
          instead.</li>

          <li>Select the variants with the best encoding. If there
          are variants with an encoding that is acceptable to the
          user-agent, select only these variants. Otherwise if
          there is a mix of encoded and non-encoded variants,
          select only the unencoded variants. If either all
          variants are encoded or all variants are not encoded,
          select all variants.</li>

          <li>Select the variants with the smallest content
          length.</li>

          <li>Select the first variant of those remaining. This
          will be either the first listed in the type-map file, or
          when variants are read from the directory, the one whose
          file name comes first when sorted using ASCII code
          order.</li>
        </ol>
      </li>

      <li>The algorithm has now selected one 'best' variant, so
      return it as the response. The HTTP response header
      <code data-markx="242" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQyIj4="></code> is set to indicate the dimensions of
      negotiation (browsers and caches can use this information when
      caching the resource).  End.</li>

      <li>To get here means no variant was selected (because none
      are acceptable to the browser). Return a 406 status (meaning
      "No acceptable representation") with a response body
      consisting of an HTML document listing the available
      variants. Also set the HTTP <code data-markx="244" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ0Ij4="></code> header to
      indicate the dimensions of variance.</li>
    </ol>

</div><div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="better" id="better" gtc:encodedoriginal="PGEgbmFtZT0iYmV0dGVyIiBpZD0iYmV0dGVyIj4=">Fiddling with Quality
    Values</a></h2>

    <p>httpd sometimes changes the quality values from what would
    be expected by a strict interpretation of the httpd
    negotiation algorithm above. This is to get a better result
    from the algorithm for browsers which do not send full or
    accurate information. Some of the most popular browsers send
    <code data-markx="252" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUyIj4="></code> header information which would otherwise
    result in the selection of the wrong variant in many cases. If a
    browser sends full and correct information these fiddles will not
    be applied.</p>

<h3><a name="wildcards" id="wildcards" gtc:encodedoriginal="PGEgbmFtZT0id2lsZGNhcmRzIiBpZD0id2lsZGNhcmRzIj4=">Media Types and Wildcards</a></h3>

    <p>The <code data-markx="256" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU2Ij4="></code> request header indicates preferences
    for media types. It can also include 'wildcard' media types, such
    as "image/*" or "*/*" where the * matches any string. So a request
    including:</p>

<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="259" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU5Ij4="></code></p></div>

    <p>would indicate that any type starting "image/" is acceptable,
    as is any other type.
    Some browsers routinely send wildcards in addition to explicit
    types they can handle. For example:</p>

<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="263" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjYzIj4="></code></p></div>
    <p>The intention of this is to indicate that the explicitly listed
    types are preferred, but if a different representation is
    available, that is ok too.  Using explicit quality values,
    what the browser really wants is something like:</p>
<div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><p><code data-markx="267" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjY3Ij4="></code></p></div>
    <p>The explicit types have no quality factor, so they default to a
    preference of 1.0 (the highest). The wildcard */* is given a
    low preference of 0.01, so other types will only be returned if
    no variant matches an explicitly listed type.</p>

    <p>If the <code data-markx="270" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjcwIj4="></code> header contains <em>no</em> q
    factors at all, httpd sets the q value of "*/*", if present, to
    0.01 to emulate the desired behavior. It also sets the q value of
    wildcards of the format "type/*" to 0.02 (so these are preferred
    over matches against "*/*". If any media type on the
    <code data-markx="272" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjcyIj4="></code> header contains a q factor, these special
    values are <em>not</em> applied, so requests from browsers which
    send the explicit information to start with work as expected.</p>


<h3><a name="exceptions" id="exceptions" gtc:encodedoriginal="PGEgbmFtZT0iZXhjZXB0aW9ucyIgaWQ9ImV4Y2VwdGlvbnMiPg==">Language Negotiation Exceptions</a></h3>

    <p>New in httpd 2.0, some exceptions have been added to the
    negotiation algorithm to allow graceful fallback when language
    negotiation fails to find a match.</p>

    <p>When a client requests a page on your server, but the server
    cannot find a single page that matches the
    <code data-markx="278" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc4Ij4="></code> sent by
    the browser, the server will return either a "No Acceptable
    Variant" or "Multiple Choices" response to the client.  To avoid
    these error messages, it is possible to configure httpd to ignore
    the <code data-markx="279" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc5Ij4="></code> in these cases and provide a
    document that does not explicitly match the client's request.  The
    <code class="directive" data-markx="280" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMjgwIj4="></code>
    directive can be used to override one or both of these error
    messages and substitute the servers judgement in the form of the
    <code class="directive" data-markx="282" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMjgyIj4="></code>
    directive.</p>

    <p>The server will also attempt to match language-subsets when no
    other match can be found.  For example, if a client requests
    documents with the language <code data-markx="285" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg1Ij4="></code> for British
    English, the server is not normally allowed by the HTTP/1.1
    standard to match that against a document that is marked as simply
    <code data-markx="286" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg2Ij4="></code>.  (Note that it is almost surely a configuration
    error to include <code data-markx="287" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg3Ij4="></code> and not <code data-markx="288" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg4Ij4="></code> in the
    <code data-markx="289" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg5Ij4="></code> header, since it is very unlikely
    that a reader understands British English, but doesn't understand
    English in general.  Unfortunately, many current clients have
    default configurations that resemble this.)  However, if no other
    language match is possible and the server is about to return a "No
    Acceptable Variants" error or fallback to the <code class="directive" data-markx="290" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMjkwIj4="></code>, the server
    will ignore the subset specification and match <code data-markx="292" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkyIj4="></code>
    against <code data-markx="293" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkzIj4="></code> documents.  Implicitly, httpd will add
    the parent language to the client's acceptable language list with
    a very low quality value.  But note that if the client requests
    "en-GB; q=0.9, fr; q=0.8", and the server has documents
    designated "en" and "fr", then the "fr" document will be returned.
    This is necessary to maintain compliance with the HTTP/1.1
    specification and to work effectively with properly configured
    clients.</p>

    <p>In order to support advanced techniques (such as cookies or
    special URL-paths) to determine the user's preferred language,
    since httpd 2.0.47 <code class="module" data-markx="295" gtc:encodedoriginal="PGNvZGUgY2xhc3M9Im1vZHVsZSIgZGF0YS1tYXJreD0iMjk1Ij4="></code> recognizes
    the <a href="env.html" gtc:encodedoriginal="PGEgaHJlZj0iZW52Lmh0bWwiPg==">environment variable</a>
    <code data-markx="298" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk4Ij4="></code>. If it exists and contains an
    appropriate language tag, <code class="module" data-markx="299" gtc:encodedoriginal="PGNvZGUgY2xhc3M9Im1vZHVsZSIgZGF0YS1tYXJreD0iMjk5Ij4="></code> will
    try to select a matching variant. If there's no such variant,
    the normal negotiation process applies.</p>

    <div class="example" gtc:encodedoriginal="PGRpdiBjbGFzcz0iZXhhbXBsZSI-"><h3>Example</h3><pre class="prettyprint lang-config" data-markx="303" gtc:encodedoriginal="PHByZSBjbGFzcz0icHJldHR5cHJpbnQgbGFuZy1jb25maWciIGRhdGEtbWFya3g9IjMwMyI-"></pre>
</div>

</div><div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="extensions" id="extensions" gtc:encodedoriginal="PGEgbmFtZT0iZXh0ZW5zaW9ucyIgaWQ9ImV4dGVuc2lvbnMiPg==">Extensions to Transparent Content
Negotiation</a></h2>

<p>httpd extends the transparent content negotiation protocol (RFC
2295) as follows. A new <code data-markx="311" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzExIj4="></code> element is used in
variant lists to label variants which are available with a specific
content-encoding only. The implementation of the RVSA/1.0 algorithm
(RFC 2296) is extended to recognize encoded variants in the list, and
to use them as candidate variants whenever their encodings are
acceptable according to the <code data-markx="312" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzEyIj4="></code> request
header. The RVSA/1.0 implementation does not round computed quality
factors to 5 decimal places before choosing the best variant.</p>
</div><div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="naming" id="naming" gtc:encodedoriginal="PGEgbmFtZT0ibmFtaW5nIiBpZD0ibmFtaW5nIj4=">Note on hyperlinks and naming conventions</a></h2>

    <p>If you are using language negotiation you can choose between
    different naming conventions, because files can have more than
    one extension, and the order of the extensions is normally
    irrelevant (see the <a href="mod/mod_mime.html#multipleext" gtc:encodedoriginal="PGEgaHJlZj0ibW9kL21vZF9taW1lLmh0bWwjbXVsdGlwbGVleHQiPg==">mod_mime</a> documentation
    for details).</p>

    <p>A typical file has a MIME-type extension (<em>e.g.</em>,
    <code data-markx="323" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzIzIj4="></code>), maybe an encoding extension (<em>e.g.</em>,
    <code data-markx="325" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI1Ij4="></code>), and of course a language extension
    (<em>e.g.</em>, <code data-markx="327" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI3Ij4="></code>) when we have different
    language variants of this file.</p>

    <p>Examples:</p>

    <ul>
      <li>foo.en.html</li>

      <li>foo.html.en</li>

      <li>foo.en.html.gz</li>
    </ul>

    <p>Here some more examples of filenames together with valid and
    invalid hyperlinks:</p>

    <table class="bordered" gtc:encodedoriginal="PHRhYmxlIGNsYXNzPSJib3JkZXJlZCI-">
      
      <tbody><tr>
        <th>Filename</th>

        <th>Valid hyperlink</th>

        <th>Invalid hyperlink</th>
      </tr>

      <tr>
        <td><em>foo.html.en</em></td>

        <td>foo<br>
         foo.html</td>

        <td>-</td>
      </tr>

      <tr>
        <td><em>foo.en.html</em></td>

        <td>foo</td>

        <td>foo.html</td>
      </tr>

      <tr>
        <td><em>foo.html.en.gz</em></td>

        <td>foo<br>
         foo.html</td>

        <td>foo.gz<br>
         foo.html.gz</td>
      </tr>

      <tr>
        <td><em>foo.en.html.gz</em></td>

        <td>foo</td>

        <td>foo.html<br>
         foo.html.gz<br>
         foo.gz</td>
      </tr>

      <tr>
        <td><em>foo.gz.html.en</em></td>

        <td>foo<br>
         foo.gz<br>
         foo.gz.html</td>

        <td>foo.html</td>
      </tr>

      <tr>
        <td><em>foo.html.gz.en</em></td>

        <td>foo<br>
         foo.html<br>
         foo.html.gz</td>

        <td>foo.gz</td>
      </tr>
    </tbody></table>

    <p>Looking at the table above, you will notice that it is always
    possible to use the name without any extensions in a hyperlink
    (<em>e.g.</em>, <code data-markx="381" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzgxIj4="></code>). The advantage is that you
    can hide the actual type of a document rsp. file and can change
    it later, <em>e.g.</em>, from <code data-markx="383" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzgzIj4="></code> to
    <code data-markx="384" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzg0Ij4="></code> or <code data-markx="385" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzg1Ij4="></code> without changing any
    hyperlink references.</p>

    <p>If you want to continue to use a MIME-type in your
    hyperlinks (<em>e.g.</em> <code data-markx="388" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzg4Ij4="></code>) the language
    extension (including an encoding extension if there is one)
    must be on the right hand side of the MIME-type extension
    (<em>e.g.</em>, <code data-markx="390" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzkwIj4="></code>).</p>
</div><div class="top" gtc:encodedoriginal="PGRpdiBjbGFzcz0idG9wIj4="><a href="#page-header" gtc:encodedoriginal="PGEgaHJlZj0iI3BhZ2UtaGVhZGVyIj4="><img alt="top" src="./images/up.gif" gtc:encodedoriginal="PGltZyBhbHQ9InRvcCIgc3JjPSIuL2ltYWdlcy91cC5naWYiPg=="></a></div>
<div class="section" gtc:encodedoriginal="PGRpdiBjbGFzcz0ic2VjdGlvbiI-">
<h2><a name="caching" id="caching" gtc:encodedoriginal="PGEgbmFtZT0iY2FjaGluZyIgaWQ9ImNhY2hpbmciPg==">Note on Caching</a></h2>

    <p>When a cache stores a representation, it associates it with
    the request URL. The next time that URL is requested, the cache
    can use the stored representation. But, if the resource is
    negotiable at the server, this might result in only the first
    requested variant being cached and subsequent cache hits might
    return the wrong response. To prevent this, httpd normally
    marks all responses that are returned after content negotiation
    as non-cacheable by HTTP/1.0 clients. httpd also supports the
    HTTP/1.1 protocol features to allow caching of negotiated
    responses.</p>

    <p>For requests which come from a HTTP/1.0 compliant client
    (either a browser or a cache), the directive <code class="directive" data-markx="399" gtc:encodedoriginal="PGNvZGUgY2xhc3M9ImRpcmVjdGl2ZSIgZGF0YS1tYXJreD0iMzk5Ij4="></code> can be
    used to allow caching of responses which were subject to
    negotiation. This directive can be given in the server config or
    virtual host, and takes no arguments. It has no effect on requests
    from HTTP/1.1 clients.</p>

    <p>For HTTP/1.1 clients, httpd sends a <code data-markx="402" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNDAyIj4="></code> HTTP
    response header to indicate the negotiation dimensions for the
    response.  Caches can use this information to determine whether a
    subsequent request can be served from the local copy.  To
    encourage a cache to use the local copy regardless of the
    negotiation dimensions, set the <code data-markx="403" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNDAzIj4="></code> <a href="env.html#special" gtc:encodedoriginal="PGEgaHJlZj0iZW52Lmh0bWwjc3BlY2lhbCI-">environment variable</a>.</p>

</div></div>
<div id="footer" gtc:encodedoriginal="PGRpdiBpZD0iZm9vdGVyIj4=">
<p class="apache" gtc:encodedoriginal="PHAgY2xhc3M9ImFwYWNoZSI-">Copyright 2018 The Apache Software Foundation.<br>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wIj4=">Apache License, Version 2.0</a>.</p>
<p class="menu" gtc:encodedoriginal="PHAgY2xhc3M9Im1lbnUiPg=="><a href="./mod/index.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9tb2QvaW5kZXguaHRtbCI-">Modules</a> | <a href="./mod/directives.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9tb2QvZGlyZWN0aXZlcy5odG1sIj4=">Directives</a> | <a href="http://wiki.apache.org/httpd/FAQ" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9odHRwZC9GQVEiPg==">FAQ</a> | <a href="./glossary.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9nbG9zc2FyeS5odG1sIj4=">Glossary</a> | <a href="./sitemap.html" gtc:encodedoriginal="PGEgaHJlZj0iLi9zaXRlbWFwLmh0bWwiPg==">Sitemap</a></p></div><script type="text/javascript" data-markx="415" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGRhdGEtbWFya3g9IjQxNSI-"></script>

</body></html><html id=&#39;2599.mllib-decision-tree.html&#39; gtc:encodedoriginal="PGh0bWwgaWQ9JzI1OTkubWxsaWItZGVjaXNpb24tdHJlZS5odG1sJz4="></html><!doctype html gtc:encodedoriginal="PCFkb2N0eXBlIGh0bWw-"><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class="no-js" gtc:encodedoriginal="PGh0bWwgY2xhc3M9Im5vLWpzIj4="><!--<![endif]--><head>
        <meta charset="utf-8" gtc:encodedoriginal="PG1ldGEgY2hhcnNldD0idXRmLTgiPg==">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" gtc:encodedoriginal="PG1ldGEgaHR0cC1lcXVpdj0iWC1VQS1Db21wYXRpYmxlIiBjb250ZW50PSJJRT1lZGdlLGNocm9tZT0xIj4=">
        <title>Decision Trees - RDD-based API - Spark 3.0.0-preview Documentation</title>
        

        

        <link rel="stylesheet" href="css/bootstrap.min.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvYm9vdHN0cmFwLm1pbi5jc3MiPg==">
        <style data-markx="7" gtc:encodedoriginal="PHN0eWxlIGRhdGEtbWFya3g9IjciPg=="></style>
        <meta name="viewport" content="width=device-width" gtc:encodedoriginal="PG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCI-">
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvYm9vdHN0cmFwLXJlc3BvbnNpdmUubWluLmNzcyI-">
        <link rel="stylesheet" href="css/main.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvbWFpbi5jc3MiPg==">

        <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js" data-markx="11" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9tb2Rlcm5penItMi42LjEtcmVzcG9uZC0xLjEuMC5taW4uanMiIGRhdGEtbWFya3g9IjExIj4="></script>

        <link rel="stylesheet" href="css/pygments-default.css" gtc:encodedoriginal="PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvcHlnbWVudHMtZGVmYXVsdC5jc3MiPg==">

        
        <!-- Google analytics script -->
        <script type="text/javascript" data-markx="13" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGRhdGEtbWFya3g9IjEzIj4="></script>
        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="https://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        <div class="navbar navbar-fixed-top" id="topbar" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibmF2YmFyIG5hdmJhci1maXhlZC10b3AiIGlkPSJ0b3BiYXIiPg==">
            <div class="navbar-inner" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibmF2YmFyLWlubmVyIj4=">
                <div class="container" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29udGFpbmVyIj4=">
                    <div class="brand" gtc:encodedoriginal="PGRpdiBjbGFzcz0iYnJhbmQiPg=="><a href="index.html" gtc:encodedoriginal="PGEgaHJlZj0iaW5kZXguaHRtbCI-">
                      <img src="img/spark-logo-hd.png" style="height:50px;" gtc:encodedoriginal="PGltZyBzcmM9ImltZy9zcGFyay1sb2dvLWhkLnBuZyIgc3R5bGU9ImhlaWdodDo1MHB4OyI-"></a><span class="version" gtc:encodedoriginal="PHNwYW4gY2xhc3M9InZlcnNpb24iPg==">3.0.0-preview</span>
                    </div>
                    <ul class="nav" gtc:encodedoriginal="PHVsIGNsYXNzPSJuYXYiPg==">
                        <!--TODO(andyk): Add class="active" attribute to li some how.-->
                        <li><a href="index.html" gtc:encodedoriginal="PGEgaHJlZj0iaW5kZXguaHRtbCI-">Overview</a></li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iIyIgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4=">Programming Guides<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="quick-start.html" gtc:encodedoriginal="PGEgaHJlZj0icXVpY2stc3RhcnQuaHRtbCI-">Quick Start</a></li>
                                <li><a href="rdd-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0icmRkLXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">RDDs, Accumulators, Broadcasts Vars</a></li>
                                <li><a href="sql-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ic3FsLXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">SQL, DataFrames, and Datasets</a></li>
                                <li><a href="structured-streaming-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ic3RydWN0dXJlZC1zdHJlYW1pbmctcHJvZ3JhbW1pbmctZ3VpZGUuaHRtbCI-">Structured Streaming</a></li>
                                <li><a href="streaming-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ic3RyZWFtaW5nLXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">Spark Streaming (DStreams)</a></li>
                                <li><a href="ml-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZ3VpZGUuaHRtbCI-">MLlib (Machine Learning)</a></li>
                                <li><a href="graphx-programming-guide.html" gtc:encodedoriginal="PGEgaHJlZj0iZ3JhcGh4LXByb2dyYW1taW5nLWd1aWRlLmh0bWwiPg==">GraphX (Graph Processing)</a></li>
                                <li><a href="sparkr.html" gtc:encodedoriginal="PGEgaHJlZj0ic3BhcmtyLmh0bWwiPg==">SparkR (R on Spark)</a></li>
                            </ul>
                        </li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iIyIgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4=">API Docs<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="api/scala/index.html#org.apache.spark.package" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5wYWNrYWdlIj4=">Scala</a></li>
                                <li><a href="api/java/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvaW5kZXguaHRtbCI-">Java</a></li>
                                <li><a href="api/python/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9pbmRleC5odG1sIj4=">Python</a></li>
                                <li><a href="api/R/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL1IvaW5kZXguaHRtbCI-">R</a></li>
                                <li><a href="api/sql/index.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NxbC9pbmRleC5odG1sIj4=">SQL, Built-in Functions</a></li>
                            </ul>
                        </li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iIyIgY2xhc3M9ImRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4=">Deploying<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="cluster-overview.html" gtc:encodedoriginal="PGEgaHJlZj0iY2x1c3Rlci1vdmVydmlldy5odG1sIj4=">Overview</a></li>
                                <li><a href="submitting-applications.html" gtc:encodedoriginal="PGEgaHJlZj0ic3VibWl0dGluZy1hcHBsaWNhdGlvbnMuaHRtbCI-">Submitting Applications</a></li>
                                <li class="divider" gtc:encodedoriginal="PGxpIGNsYXNzPSJkaXZpZGVyIj4="></li>
                                <li><a href="spark-standalone.html" gtc:encodedoriginal="PGEgaHJlZj0ic3Bhcmstc3RhbmRhbG9uZS5odG1sIj4=">Spark Standalone</a></li>
                                <li><a href="running-on-mesos.html" gtc:encodedoriginal="PGEgaHJlZj0icnVubmluZy1vbi1tZXNvcy5odG1sIj4=">Mesos</a></li>
                                <li><a href="running-on-yarn.html" gtc:encodedoriginal="PGEgaHJlZj0icnVubmluZy1vbi15YXJuLmh0bWwiPg==">YARN</a></li>
                                <li><a href="running-on-kubernetes.html" gtc:encodedoriginal="PGEgaHJlZj0icnVubmluZy1vbi1rdWJlcm5ldGVzLmh0bWwiPg==">Kubernetes</a></li>
                            </ul>
                        </li>

                        <li class="dropdown" gtc:encodedoriginal="PGxpIGNsYXNzPSJkcm9wZG93biI-">
                            <a href="api.html" class="dropdown-toggle" data-toggle="dropdown" gtc:encodedoriginal="PGEgaHJlZj0iYXBpLmh0bWwiIGNsYXNzPSJkcm9wZG93bi10b2dnbGUiIGRhdGEtdG9nZ2xlPSJkcm9wZG93biI-">More<b class="caret" gtc:encodedoriginal="PGIgY2xhc3M9ImNhcmV0Ij4="></b></a>
                            <ul class="dropdown-menu" gtc:encodedoriginal="PHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij4=">
                                <li><a href="configuration.html" gtc:encodedoriginal="PGEgaHJlZj0iY29uZmlndXJhdGlvbi5odG1sIj4=">Configuration</a></li>
                                <li><a href="monitoring.html" gtc:encodedoriginal="PGEgaHJlZj0ibW9uaXRvcmluZy5odG1sIj4=">Monitoring</a></li>
                                <li><a href="tuning.html" gtc:encodedoriginal="PGEgaHJlZj0idHVuaW5nLmh0bWwiPg==">Tuning Guide</a></li>
                                <li><a href="job-scheduling.html" gtc:encodedoriginal="PGEgaHJlZj0iam9iLXNjaGVkdWxpbmcuaHRtbCI-">Job Scheduling</a></li>
                                <li><a href="security.html" gtc:encodedoriginal="PGEgaHJlZj0ic2VjdXJpdHkuaHRtbCI-">Security</a></li>
                                <li><a href="hardware-provisioning.html" gtc:encodedoriginal="PGEgaHJlZj0iaGFyZHdhcmUtcHJvdmlzaW9uaW5nLmh0bWwiPg==">Hardware Provisioning</a></li>
                                <li><a href="migration-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWlncmF0aW9uLWd1aWRlLmh0bWwiPg==">Migration Guide</a></li>
                                <li class="divider" gtc:encodedoriginal="PGxpIGNsYXNzPSJkaXZpZGVyIj4="></li>
                                <li><a href="building-spark.html" gtc:encodedoriginal="PGEgaHJlZj0iYnVpbGRpbmctc3BhcmsuaHRtbCI-">Building Spark</a></li>
                                <li><a href="https://spark.apache.org/contributing.html" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly9zcGFyay5hcGFjaGUub3JnL2NvbnRyaWJ1dGluZy5odG1sIj4=">Contributing to Spark</a></li>
                                <li><a href="https://spark.apache.org/third-party-projects.html" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly9zcGFyay5hcGFjaGUub3JnL3RoaXJkLXBhcnR5LXByb2plY3RzLmh0bWwiPg==">Third Party Projects</a></li>
                            </ul>
                        </li>
                    </ul>
                    <!--<p class="navbar-text pull-right"><span class="version-text">v3.0.0-preview</span></p>-->
                </div>
            </div>
        </div>

        <div class="container-wrapper" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29udGFpbmVyLXdyYXBwZXIiPg==">

            
                
                    <div class="left-menu-wrapper" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibGVmdC1tZW51LXdyYXBwZXIiPg==">
    <div class="left-menu" gtc:encodedoriginal="PGRpdiBjbGFzcz0ibGVmdC1tZW51Ij4=">
        <h3><a href="ml-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZ3VpZGUuaHRtbCI-">MLlib: Main Guide</a></h3>
        
<ul>

    <li>
        <a href="ml-statistics.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtc3RhdGlzdGljcy5odG1sIj4=">
            
                Basic statistics
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-datasource.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZGF0YXNvdXJjZS5odG1sIj4=">
            
                Data sources
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-pipeline.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtcGlwZWxpbmUuaHRtbCI-">
            
                Pipelines
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-features.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZmVhdHVyZXMuaHRtbCI-">
            
                Extracting, transforming and selecting features
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-classification-regression.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtY2xhc3NpZmljYXRpb24tcmVncmVzc2lvbi5odG1sIj4=">
            
                Classification and Regression
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-clustering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtY2x1c3RlcmluZy5odG1sIj4=">
            
                Clustering
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-collaborative-filtering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtY29sbGFib3JhdGl2ZS1maWx0ZXJpbmcuaHRtbCI-">
            
                Collaborative filtering
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-frequent-pattern-mining.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtZnJlcXVlbnQtcGF0dGVybi1taW5pbmcuaHRtbCI-">
            
                Frequent Pattern Mining
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-tuning.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtdHVuaW5nLmh0bWwiPg==">
            
                Model selection and tuning
            
        </a>
    </li>
    
    

    <li>
        <a href="ml-advanced.html" gtc:encodedoriginal="PGEgaHJlZj0ibWwtYWR2YW5jZWQuaHRtbCI-">
            
                Advanced topics
            
        </a>
    </li>
    
    

</ul>

        <h3><a href="mllib-guide.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZ3VpZGUuaHRtbCI-">MLlib: RDD-based API Guide</a></h3>
        
<ul>

    <li>
        <a href="mllib-data-types.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZGF0YS10eXBlcy5odG1sIj4=">
            
                Data types
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-statistics.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItc3RhdGlzdGljcy5odG1sIj4=">
            
                Basic statistics
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-classification-regression.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItY2xhc3NpZmljYXRpb24tcmVncmVzc2lvbi5odG1sIj4=">
            
                Classification and regression
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-collaborative-filtering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItY29sbGFib3JhdGl2ZS1maWx0ZXJpbmcuaHRtbCI-">
            
                Collaborative filtering
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-clustering.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItY2x1c3RlcmluZy5odG1sIj4=">
            
                Clustering
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-dimensionality-reduction.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZGltZW5zaW9uYWxpdHktcmVkdWN0aW9uLmh0bWwiPg==">
            
                Dimensionality reduction
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-feature-extraction.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZmVhdHVyZS1leHRyYWN0aW9uLmh0bWwiPg==">
            
                Feature extraction and transformation
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-frequent-pattern-mining.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZnJlcXVlbnQtcGF0dGVybi1taW5pbmcuaHRtbCI-">
            
                Frequent pattern mining
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-evaluation-metrics.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZXZhbHVhdGlvbi1tZXRyaWNzLmh0bWwiPg==">
            
                Evaluation metrics
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-pmml-model-export.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItcG1tbC1tb2RlbC1leHBvcnQuaHRtbCI-">
            
                PMML model export
            
        </a>
    </li>
    
    

    <li>
        <a href="mllib-optimization.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItb3B0aW1pemF0aW9uLmh0bWwiPg==">
            
                Optimization (developer)
            
        </a>
    </li>
    
    

</ul>

    </div>
</div>
                
                <input id="nav-trigger" class="nav-trigger" checked type="checkbox" gtc:encodedoriginal="PGlucHV0IGlkPSJuYXYtdHJpZ2dlciIgY2xhc3M9Im5hdi10cmlnZ2VyIiBjaGVja2VkIHR5cGU9ImNoZWNrYm94Ij4=">
                <label for="nav-trigger" gtc:encodedoriginal="PGxhYmVsIGZvcj0ibmF2LXRyaWdnZXIiPg=="></label>
                <div class="content-with-sidebar" id="content" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29udGVudC13aXRoLXNpZGViYXIiIGlkPSJjb250ZW50Ij4=">
                    
                        <h1 class="title" gtc:encodedoriginal="PGgxIGNsYXNzPSJ0aXRsZSI-">Decision Trees - RDD-based API</h1>
                    

                    <ul id="markdown-toc" gtc:encodedoriginal="PHVsIGlkPSJtYXJrZG93bi10b2MiPg==">
  <li><a href="#basic-algorithm" id="markdown-toc-basic-algorithm" gtc:encodedoriginal="PGEgaHJlZj0iI2Jhc2ljLWFsZ29yaXRobSIgaWQ9Im1hcmtkb3duLXRvYy1iYXNpYy1hbGdvcml0aG0iPg==">Basic algorithm</a>    <ul>
      <li><a href="#node-impurity-and-information-gain" id="markdown-toc-node-impurity-and-information-gain" gtc:encodedoriginal="PGEgaHJlZj0iI25vZGUtaW1wdXJpdHktYW5kLWluZm9ybWF0aW9uLWdhaW4iIGlkPSJtYXJrZG93bi10b2Mtbm9kZS1pbXB1cml0eS1hbmQtaW5mb3JtYXRpb24tZ2FpbiI-">Node impurity and information gain</a></li>
      <li><a href="#split-candidates" id="markdown-toc-split-candidates" gtc:encodedoriginal="PGEgaHJlZj0iI3NwbGl0LWNhbmRpZGF0ZXMiIGlkPSJtYXJrZG93bi10b2Mtc3BsaXQtY2FuZGlkYXRlcyI-">Split candidates</a></li>
      <li><a href="#stopping-rule" id="markdown-toc-stopping-rule" gtc:encodedoriginal="PGEgaHJlZj0iI3N0b3BwaW5nLXJ1bGUiIGlkPSJtYXJrZG93bi10b2Mtc3RvcHBpbmctcnVsZSI-">Stopping rule</a></li>
    </ul>
  </li>
  <li><a href="#usage-tips" id="markdown-toc-usage-tips" gtc:encodedoriginal="PGEgaHJlZj0iI3VzYWdlLXRpcHMiIGlkPSJtYXJrZG93bi10b2MtdXNhZ2UtdGlwcyI-">Usage tips</a>    <ul>
      <li><a href="#problem-specification-parameters" id="markdown-toc-problem-specification-parameters" gtc:encodedoriginal="PGEgaHJlZj0iI3Byb2JsZW0tc3BlY2lmaWNhdGlvbi1wYXJhbWV0ZXJzIiBpZD0ibWFya2Rvd24tdG9jLXByb2JsZW0tc3BlY2lmaWNhdGlvbi1wYXJhbWV0ZXJzIj4=">Problem specification parameters</a></li>
      <li><a href="#stopping-criteria" id="markdown-toc-stopping-criteria" gtc:encodedoriginal="PGEgaHJlZj0iI3N0b3BwaW5nLWNyaXRlcmlhIiBpZD0ibWFya2Rvd24tdG9jLXN0b3BwaW5nLWNyaXRlcmlhIj4=">Stopping criteria</a></li>
      <li><a href="#tunable-parameters" id="markdown-toc-tunable-parameters" gtc:encodedoriginal="PGEgaHJlZj0iI3R1bmFibGUtcGFyYW1ldGVycyIgaWQ9Im1hcmtkb3duLXRvYy10dW5hYmxlLXBhcmFtZXRlcnMiPg==">Tunable parameters</a></li>
      <li><a href="#caching-and-checkpointing" id="markdown-toc-caching-and-checkpointing" gtc:encodedoriginal="PGEgaHJlZj0iI2NhY2hpbmctYW5kLWNoZWNrcG9pbnRpbmciIGlkPSJtYXJrZG93bi10b2MtY2FjaGluZy1hbmQtY2hlY2twb2ludGluZyI-">Caching and checkpointing</a></li>
    </ul>
  </li>
  <li><a href="#scaling" id="markdown-toc-scaling" gtc:encodedoriginal="PGEgaHJlZj0iI3NjYWxpbmciIGlkPSJtYXJrZG93bi10b2Mtc2NhbGluZyI-">Scaling</a></li>
  <li><a href="#examples" id="markdown-toc-examples" gtc:encodedoriginal="PGEgaHJlZj0iI2V4YW1wbGVzIiBpZD0ibWFya2Rvd24tdG9jLWV4YW1wbGVzIj4=">Examples</a>    <ul>
      <li><a href="#classification" id="markdown-toc-classification" gtc:encodedoriginal="PGEgaHJlZj0iI2NsYXNzaWZpY2F0aW9uIiBpZD0ibWFya2Rvd24tdG9jLWNsYXNzaWZpY2F0aW9uIj4=">Classification</a></li>
      <li><a href="#regression" id="markdown-toc-regression" gtc:encodedoriginal="PGEgaHJlZj0iI3JlZ3Jlc3Npb24iIGlkPSJtYXJrZG93bi10b2MtcmVncmVzc2lvbiI-">Regression</a></li>
    </ul>
  </li>
</ul>

<p><a href="http://en.wikipedia.org/wiki/Decision_tree_learning" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWNpc2lvbl90cmVlX2xlYXJuaW5nIj4=">Decision trees</a>
and their ensembles are popular methods for the machine learning tasks of
classification and regression. Decision trees are widely used since they are easy to interpret,
handle categorical features, extend to the multiclass classification setting, do not require
feature scaling, and are able to capture non-linearities and feature interactions. Tree ensemble
algorithms such as random forests and boosting are among the top performers for classification and
regression tasks.</p>

<p><code data-markx="189" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTg5Ij4="></code> supports decision trees for binary and multiclass classification and for regression,
using both continuous and categorical features. The implementation partitions data by rows,
allowing distributed training with millions of instances.</p>

<p>Ensembles of trees (Random Forests and Gradient-Boosted Trees) are described in the <a href="mllib-ensembles.html" gtc:encodedoriginal="PGEgaHJlZj0ibWxsaWItZW5zZW1ibGVzLmh0bWwiPg==">Ensembles guide</a>.</p>

<h2 id="basic-algorithm" gtc:encodedoriginal="PGgyIGlkPSJiYXNpYy1hbGdvcml0aG0iPg==">Basic algorithm</h2>

<p>The decision tree is a greedy algorithm that performs a recursive binary partitioning of the feature
space.  The tree predicts the same label for each bottommost (leaf) partition.
Each partition is chosen greedily by selecting the <em>best split</em> from a set of possible splits,
in order to maximize the information gain at a tree node. In other words, the split chosen at each
tree node is chosen from the set <code data-markx="195" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk1Ij4="></code> where <code data-markx="196" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk2Ij4="></code>
is the information gain when a split <code data-markx="197" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk3Ij4="></code> is applied to a dataset <code data-markx="198" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTk4Ij4="></code>.</p>

<h3 id="node-impurity-and-information-gain" gtc:encodedoriginal="PGgzIGlkPSJub2RlLWltcHVyaXR5LWFuZC1pbmZvcm1hdGlvbi1nYWluIj4=">Node impurity and information gain</h3>

<p>The <em>node impurity</em> is a measure of the homogeneity of the labels at the node. The current
implementation provides two impurity measures for classification (Gini impurity and entropy) and one
impurity measure for regression (variance).</p>

<table class="table" gtc:encodedoriginal="PHRhYmxlIGNsYXNzPSJ0YWJsZSI-">
  <thead>
    <tr><th>Impurity</th><th>Task</th><th>Formula</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>Gini impurity</td>
	  <td>Classification</td>
	  <td>$sum_{i=1}^{C} f_i(1-f_i)$</td><td>$f_i$ is the frequency of label $i$ at a node and $C$ is the number of unique labels.</td>
    </tr>
    <tr>
      <td>Entropy</td>
	  <td>Classification</td>
	  <td>$sum_{i=1}^{C} -f_ilog(f_i)$</td><td>$f_i$ is the frequency of label $i$ at a node and $C$ is the number of unique labels.</td>
    </tr>
    <tr>
      <td>Variance</td>
	  <td>Regression</td>
     <td>$frac{1}{N} sum_{i=1}^{N} (y_i - mu)^2$</td><td>$y_i$ is label for an instance,
	  $N$ is the number of instances and $mu$ is the mean given by $frac{1}{N} sum_{i=1}^N y_i$.</td>
    </tr>
  </tbody>
</table>

<p>The <em>information gain</em> is the difference between the parent node impurity and the weighted sum of
the two child node impurities. Assuming that a split $s$ partitions the dataset <code data-markx="227" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI3Ij4="></code> of size <code data-markx="228" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI4Ij4="></code>
into two datasets <code data-markx="229" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjI5Ij4="></code> and <code data-markx="230" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMwIj4="></code> of sizes <code data-markx="231" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMxIj4="></code> and <code data-markx="232" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjMyIj4="></code>,
respectively, the information gain is:</p>

<p><code data-markx="234" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjM0Ij4="></code></p>

<h3 id="split-candidates" gtc:encodedoriginal="PGgzIGlkPSJzcGxpdC1jYW5kaWRhdGVzIj4=">Split candidates</h3>

<p><strong>Continuous features</strong></p>

<p>For small datasets in single-machine implementations, the split candidates for each continuous
feature are typically the unique values for the feature. Some implementations sort the feature
values and then use the ordered unique values as split candidates for faster tree calculations.</p>

<p>Sorting feature values is expensive for large distributed datasets.
This implementation computes an approximate set of split candidates by performing a quantile
calculation over a sampled fraction of the data.
The ordered splits create “bins” and the maximum number of such
bins can be specified using the <code data-markx="240" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQwIj4="></code> parameter.</p>

<p>Note that the number of bins cannot be greater than the number of instances <code data-markx="242" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQyIj4="></code> (a rare scenario
since the default <code data-markx="243" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQzIj4="></code> value is 32). The tree algorithm automatically reduces the number of
bins if the condition is not satisfied.</p>

<p><strong>Categorical features</strong></p>

<p>For a categorical feature with <code data-markx="247" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ3Ij4="></code> possible values (categories), one could come up with
<code data-markx="248" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ4Ij4="></code> split candidates. For binary (0/1) classification and regression,
we can reduce the number of split candidates to <code data-markx="249" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjQ5Ij4="></code> by ordering the
categorical feature values by the average label. (See Section 9.2.4 in
<a href="https://web.stanford.edu/~hastie/ElemStatLearn/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cHM6Ly93ZWIuc3RhbmZvcmQuZWR1L35oYXN0aWUvRWxlbVN0YXRMZWFybi8iPg==">Elements of Statistical Machine Learning</a> for
details.) For example, for a binary classification problem with one categorical feature with three
categories A, B and C whose corresponding proportions of label 1 are 0.2, 0.6 and 0.4, the categorical
features are ordered as A, C, B. The two split candidates are A | C, B
and A , C | B where | denotes the split.</p>

<p>In multiclass classification, all <code data-markx="252" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUyIj4="></code> possible splits are used whenever possible.
When <code data-markx="253" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjUzIj4="></code> is greater than the <code data-markx="254" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU0Ij4="></code> parameter, we use a (heuristic) method
similar to the method used for binary classification and regression.
The <code data-markx="255" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU1Ij4="></code> categorical feature values are ordered by impurity,
and the resulting <code data-markx="256" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjU2Ij4="></code> split candidates are considered.</p>

<h3 id="stopping-rule" gtc:encodedoriginal="PGgzIGlkPSJzdG9wcGluZy1ydWxlIj4=">Stopping rule</h3>

<p>The recursive tree construction is stopped at a node when one of the following conditions is met:</p>

<ol>
  <li>The node depth is equal to the <code data-markx="261" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjYxIj4="></code> training parameter.</li>
  <li>No split candidate leads to an information gain greater than <code data-markx="263" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjYzIj4="></code>.</li>
  <li>No split candidate produces child nodes which each have at least <code data-markx="265" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjY1Ij4="></code> training instances.</li>
</ol>

<h2 id="usage-tips" gtc:encodedoriginal="PGgyIGlkPSJ1c2FnZS10aXBzIj4=">Usage tips</h2>

<p>We include a few guidelines for using decision trees by discussing the various parameters.
The parameters are listed below roughly in order of descending importance.  New users should mainly consider the “Problem specification parameters” section and the <code data-markx="268" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjY4Ij4="></code> parameter.</p>

<h3 id="problem-specification-parameters" gtc:encodedoriginal="PGgzIGlkPSJwcm9ibGVtLXNwZWNpZmljYXRpb24tcGFyYW1ldGVycyI-">Problem specification parameters</h3>

<p>These parameters describe the problem you want to solve and your dataset.
They should be specified and do not require tuning.</p>

<ul>
  <li>
    <p><strong><code data-markx="275" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc1Ij4="></code></strong>: Type of decision tree, either <code data-markx="276" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc2Ij4="></code> or <code data-markx="277" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjc3Ij4="></code>.</p>
  </li>
  <li>
    <p><strong><code data-markx="281" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjgxIj4="></code></strong>: Number of classes (for <code data-markx="282" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjgyIj4="></code> only).</p>
  </li>
  <li>
    <p><strong><code data-markx="286" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg2Ij4="></code></strong>: Specifies which features are categorical and how many categorical values each of those features can take.  This is given as a map from feature indices to feature arity (number of categories).  Any features not in this map are treated as continuous.</p>
    <ul>
      <li>For example, <code data-markx="289" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjg5Ij4="></code> specifies that feature <code data-markx="290" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkwIj4="></code> is binary (taking values <code data-markx="291" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkxIj4="></code> or <code data-markx="292" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkyIj4="></code>) and that feature <code data-markx="293" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjkzIj4="></code> has 10 categories (values <code data-markx="294" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk0Ij4="></code>).  Note that feature indices are 0-based: features <code data-markx="295" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk1Ij4="></code> and <code data-markx="296" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk2Ij4="></code> are the 1st and 5th elements of an instance’s feature vector.</li>
      <li>Note that you do not have to specify <code data-markx="298" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMjk4Ij4="></code>.  The algorithm will still run and may get reasonable results.  However, performance should be better if categorical features are properly designated.</li>
    </ul>
  </li>
</ul>

<h3 id="stopping-criteria" gtc:encodedoriginal="PGgzIGlkPSJzdG9wcGluZy1jcml0ZXJpYSI-">Stopping criteria</h3>

<p>These parameters determine when the tree stops building (adding new nodes).
When tuning these parameters, be careful to validate on held-out test data to avoid overfitting.</p>

<ul>
  <li>
    <p><strong><code data-markx="305" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzA1Ij4="></code></strong>: Maximum depth of a tree.  Deeper trees are more expressive (potentially allowing higher accuracy), but they are also more costly to train and are more likely to overfit.</p>
  </li>
  <li>
    <p><strong><code data-markx="309" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzA5Ij4="></code></strong>: For a node to be split further, each of its children must receive at least this number of training instances.  This is commonly used with <a href="api/scala/index.html#org.apache.spark.mllib.tree.RandomForest$" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLlJhbmRvbUZvcmVzdCQiPg==">RandomForest</a> since those are often trained deeper than individual trees.</p>
  </li>
  <li>
    <p><strong><code data-markx="314" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzE0Ij4="></code></strong>: For a node to be split further, the split must improve at least this much (in terms of information gain).</p>
  </li>
</ul>

<h3 id="tunable-parameters" gtc:encodedoriginal="PGgzIGlkPSJ0dW5hYmxlLXBhcmFtZXRlcnMiPg==">Tunable parameters</h3>

<p>These parameters may be tuned.  Be careful to validate on held-out test data when tuning in order to avoid overfitting.</p>

<ul>
  <li><strong><code data-markx="320" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzIwIj4="></code></strong>: Number of bins used when discretizing continuous features.
    <ul>
      <li>Increasing <code data-markx="323" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzIzIj4="></code> allows the algorithm to consider more split candidates and make fine-grained split decisions.  However, it also increases computation and communication.</li>
      <li>Note that the <code data-markx="325" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI1Ij4="></code> parameter must be at least the maximum number of categories <code data-markx="326" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI2Ij4="></code> for any categorical feature.</li>
    </ul>
  </li>
  <li><strong><code data-markx="329" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzI5Ij4="></code></strong>: Amount of memory to be used for collecting sufficient statistics.
    <ul>
      <li>The default value is conservatively chosen to be 256 MiB to allow the decision algorithm to work in most scenarios.  Increasing <code data-markx="332" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzMyIj4="></code> can lead to faster training (if the memory is available) by allowing fewer passes over the data.  However, there may be decreasing returns as <code data-markx="333" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzMzIj4="></code> grows since the amount of communication on each iteration can be proportional to <code data-markx="334" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzM0Ij4="></code>.</li>
      <li><em>Implementation details</em>: For faster processing, the decision tree algorithm collects statistics about groups of nodes to split (rather than 1 node at a time).  The number of nodes which can be handled in one group is determined by the memory requirements (which vary per features).  The <code data-markx="337" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzM3Ij4="></code> parameter specifies the memory limit in terms of megabytes which each worker can use for these statistics.</li>
    </ul>
  </li>
  <li>
    <p><strong><code data-markx="341" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQxIj4="></code></strong>: Fraction of the training data used for learning the decision tree.  This parameter is most relevant for training ensembles of trees (using <a href="api/scala/index.html#org.apache.spark.mllib.tree.RandomForest$" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLlJhbmRvbUZvcmVzdCQiPg=="><code data-markx="343" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQzIj4="></code></a> and <a href="api/scala/index.html#org.apache.spark.mllib.tree.GradientBoostedTrees" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLkdyYWRpZW50Qm9vc3RlZFRyZWVzIj4="><code data-markx="345" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQ1Ij4="></code></a>), where it can be useful to subsample the original data.  For training a single decision tree, this parameter is less useful since the number of training instances is generally not the main constraint.</p>
  </li>
  <li><strong><code data-markx="348" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQ4Ij4="></code></strong>: Impurity measure (discussed above) used to choose between candidate splits.  This measure must match the <code data-markx="349" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzQ5Ij4="></code> parameter.</li>
</ul>

<h3 id="caching-and-checkpointing" gtc:encodedoriginal="PGgzIGlkPSJjYWNoaW5nLWFuZC1jaGVja3BvaW50aW5nIj4=">Caching and checkpointing</h3>

<p>MLlib 1.2 adds several features for scaling up to larger (deeper) trees and tree ensembles.  When <code data-markx="352" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzUyIj4="></code> is set to be large, it can be useful to turn on node ID caching and checkpointing.  These parameters are also useful for <a href="api/scala/index.html#org.apache.spark.mllib.tree.RandomForest$" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLlJhbmRvbUZvcmVzdCQiPg==">RandomForest</a> when <code data-markx="354" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzU0Ij4="></code> is set to be large.</p>

<ul>
  <li><strong><code data-markx="358" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzU4Ij4="></code></strong>: If this is set to true, the algorithm will avoid passing the current model (tree or trees) to executors on each iteration.
    <ul>
      <li>This can be useful with deep trees (speeding up computation on workers) and for large Random Forests (reducing communication on each iteration).</li>
      <li><em>Implementation details</em>: By default, the algorithm communicates the current model to executors so that executors can match training instances with tree nodes.  When this setting is turned on, then the algorithm will instead cache this information.</li>
    </ul>
  </li>
</ul>

<p>Node ID caching generates a sequence of RDDs (1 per iteration).  This long lineage can cause performance problems, but checkpointing intermediate RDDs can alleviate those problems.
Note that checkpointing is only applicable when <code data-markx="364" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzY0Ij4="></code> is set to true.</p>

<ul>
  <li>
    <p><strong><code data-markx="369" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzY5Ij4="></code></strong>: Directory for checkpointing node ID cache RDDs.</p>
  </li>
  <li>
    <p><strong><code data-markx="373" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzczIj4="></code></strong>: Frequency for checkpointing node ID cache RDDs.  Setting this too low will cause extra overhead from writing to HDFS; setting this too high can cause problems if executors fail and the RDD needs to be recomputed.</p>
  </li>
</ul>

<h2 id="scaling" gtc:encodedoriginal="PGgyIGlkPSJzY2FsaW5nIj4=">Scaling</h2>

<p>Computation scales approximately linearly in the number of training instances,
in the number of features, and in the <code data-markx="376" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzc2Ij4="></code> parameter.
Communication scales approximately linearly in the number of features and in <code data-markx="377" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzc3Ij4="></code>.</p>

<p>The implemented algorithm reads both sparse and dense data. However, it is not optimized for sparse input.</p>

<h2 id="examples" gtc:encodedoriginal="PGgyIGlkPSJleGFtcGxlcyI-">Examples</h2>

<h3 id="classification" gtc:encodedoriginal="PGgzIGlkPSJjbGFzc2lmaWNhdGlvbiI-">Classification</h3>

<p>The example below demonstrates how to load a
<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5jc2llLm50dS5lZHUudHcvfmNqbGluL2xpYnN2bXRvb2xzL2RhdGFzZXRzLyI-">LIBSVM data file</a>,
parse it as an RDD of <code data-markx="383" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzgzIj4="></code> and then
perform classification using a decision tree with Gini impurity as an impurity measure and a
maximum tree depth of 5. The test error is calculated to measure the algorithm accuracy.</p>

<div class="codetabs" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29kZXRhYnMiPg==">

<div data-lang="scala" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InNjYWxhIj4=">
    <p>Refer to the <a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="388" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzg4Ij4="></code> Scala docs</a> and <a href="api/scala/index.html#org.apache.spark.mllib.tree.model.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLm1vZGVsLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="390" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMzkwIj4="></code> Scala docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="392" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIzOTIiPg=="></pre></div>
    <div><small>Find full example code at "examples/src/main/scala/org/apache/spark/examples/mllib/DecisionTreeClassificationExample.scala" in the Spark repo.</small></div>
  </div>

<div data-lang="java" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9ImphdmEiPg==">
    <p>Refer to the <a href="api/java/org/apache/spark/mllib/tree/DecisionTree.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL0RlY2lzaW9uVHJlZS5odG1sIj4="><code data-markx="582" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNTgyIj4="></code> Java docs</a> and <a href="api/java/org/apache/spark/mllib/tree/model/DecisionTreeModel.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL21vZGVsL0RlY2lzaW9uVHJlZU1vZGVsLmh0bWwiPg=="><code data-markx="584" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iNTg0Ij4="></code> Java docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="586" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSI1ODYiPg=="></pre></div>
    <div><small>Find full example code at "examples/src/main/java/org/apache/spark/examples/mllib/JavaDecisionTreeClassificationExample.java" in the Spark repo.</small></div>
  </div>

<div data-lang="python" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InB5dGhvbiI-">
    <p>Refer to the <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="865" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iODY1Ij4="></code> Python docs</a> and <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="867" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iODY3Ij4="></code> Python docs</a> for more details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="869" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSI4NjkiPg=="></pre></div>
    <div><small>Find full example code at "examples/src/main/python/mllib/decision_tree_classification_example.py" in the Spark repo.</small></div>
  </div>

</div>

<h3 id="regression" gtc:encodedoriginal="PGgzIGlkPSJyZWdyZXNzaW9uIj4=">Regression</h3>

<p>The example below demonstrates how to load a
<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL3d3dy5jc2llLm50dS5lZHUudHcvfmNqbGluL2xpYnN2bXRvb2xzL2RhdGFzZXRzLyI-">LIBSVM data file</a>,
parse it as an RDD of <code data-markx="1042" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA0MiI-"></code> and then
perform regression using a decision tree with variance as an impurity measure and a maximum tree
depth of 5. The Mean Squared Error (MSE) is computed at the end to evaluate
<a href="http://en.wikipedia.org/wiki/Goodness_of_fit" gtc:encodedoriginal="PGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Hb29kbmVzc19vZl9maXQiPg==">goodness of fit</a>.</p>

<div class="codetabs" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29kZXRhYnMiPg==">

<div data-lang="scala" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InNjYWxhIj4=">
    <p>Refer to the <a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="1048" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA0OCI-"></code> Scala docs</a> and <a href="api/scala/index.html#org.apache.spark.mllib.tree.model.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3NjYWxhL2luZGV4Lmh0bWwjb3JnLmFwYWNoZS5zcGFyay5tbGxpYi50cmVlLm1vZGVsLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="1050" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTA1MCI-"></code> Scala docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="1052" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIxMDUyIj4="></pre></div>
    <div><small>Find full example code at "examples/src/main/scala/org/apache/spark/examples/mllib/DecisionTreeRegressionExample.scala" in the Spark repo.</small></div>
  </div>

<div data-lang="java" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9ImphdmEiPg==">
    <p>Refer to the <a href="api/java/org/apache/spark/mllib/tree/DecisionTree.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL0RlY2lzaW9uVHJlZS5odG1sIj4="><code data-markx="1238" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTIzOCI-"></code> Java docs</a> and <a href="api/java/org/apache/spark/mllib/tree/model/DecisionTreeModel.html" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL2phdmEvb3JnL2FwYWNoZS9zcGFyay9tbGxpYi90cmVlL21vZGVsL0RlY2lzaW9uVHJlZU1vZGVsLmh0bWwiPg=="><code data-markx="1240" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTI0MCI-"></code> Java docs</a> for details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="1242" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIxMjQyIj4="></pre></div>
    <div><small>Find full example code at "examples/src/main/java/org/apache/spark/examples/mllib/JavaDecisionTreeRegressionExample.java" in the Spark repo.</small></div>
  </div>

<div data-lang="python" gtc:encodedoriginal="PGRpdiBkYXRhLWxhbmc9InB5dGhvbiI-">
    <p>Refer to the <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTree" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZSI-"><code data-markx="1514" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTUxNCI-"></code> Python docs</a> and <a href="api/python/pyspark.mllib.html#pyspark.mllib.tree.DecisionTreeModel" gtc:encodedoriginal="PGEgaHJlZj0iYXBpL3B5dGhvbi9weXNwYXJrLm1sbGliLmh0bWwjcHlzcGFyay5tbGxpYi50cmVlLkRlY2lzaW9uVHJlZU1vZGVsIj4="><code data-markx="1516" gtc:encodedoriginal="PGNvZGUgZGF0YS1tYXJreD0iMTUxNiI-"></code> Python docs</a> for more details on the API.</p>

    <div class="highlight" gtc:encodedoriginal="PGRpdiBjbGFzcz0iaGlnaGxpZ2h0Ij4="><pre data-markx="1518" gtc:encodedoriginal="PHByZSBkYXRhLW1hcmt4PSIxNTE4Ij4="></pre></div>
    <div><small>Find full example code at "examples/src/main/python/mllib/decision_tree_regression_example.py" in the Spark repo.</small></div>
  </div>

</div>


                </div>
            
             <!-- /container -->
        </div>

        <script src="js/vendor/jquery-3.4.1.min.js" data-markx="1696" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9qcXVlcnktMy40LjEubWluLmpzIiBkYXRhLW1hcmt4PSIxNjk2Ij4="></script>
        <script src="js/vendor/bootstrap.min.js" data-markx="1697" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9ib290c3RyYXAubWluLmpzIiBkYXRhLW1hcmt4PSIxNjk3Ij4="></script>
        <script src="js/vendor/anchor.min.js" data-markx="1698" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL3ZlbmRvci9hbmNob3IubWluLmpzIiBkYXRhLW1hcmt4PSIxNjk4Ij4="></script>
        <script src="js/main.js" data-markx="1699" gtc:encodedoriginal="PHNjcmlwdCBzcmM9ImpzL21haW4uanMiIGRhdGEtbWFya3g9IjE2OTkiPg=="></script>

        <!-- MathJax Section -->
        <script type="text/x-mathjax-config" data-markx="1700" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L3gtbWF0aGpheC1jb25maWciIGRhdGEtbWFya3g9IjE3MDAiPg=="></script>
        <script data-markx="1701" gtc:encodedoriginal="PHNjcmlwdCBkYXRhLW1hcmt4PSIxNzAxIj4="></script>
    

</body></html><html id=&#39;0062.aegis-21.html&#39; gtc:encodedoriginal="PGh0bWwgaWQ9JzAwNjIuYWVnaXMtMjEuaHRtbCc-"></html><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEgVHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0L2xvb3NlLmR0ZCI-"><!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
--><html><head>

<link type="text/css" rel="stylesheet" href="/resources/site.css" gtc:encodedoriginal="PGxpbmsgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iL3Jlc291cmNlcy9zaXRlLmNzcyI-">
<script src="/resources/space.js" data-markx="4" gtc:encodedoriginal="PHNjcmlwdCBzcmM9Ii9yZXNvdXJjZXMvc3BhY2UuanMiIGRhdGEtbWFya3g9IjQiPg=="></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8" gtc:encodedoriginal="PG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC10eXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7Y2hhcnNldD1VVEYtOCI-">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source" gtc:encodedoriginal="PG1ldGEgbmFtZT0ia2V5d29yZHMiIGNvbnRlbnQ9ImJ1c2luZXNzIGludGVncmF0aW9uLCBFQUksIFNPQSwgU2VydmljZSBPcmllbnRlZCBBcmNoaXRlY3R1cmUsIHdlYiBzZXJ2aWNlcywgU09BUCwgSkJJLCBKTVMsIFdTREwsIFhNTCwgRURJLCBFbGVjdHJvbmljIERhdGEgSW50ZXJjaGFuZ2UsIHN0YW5kYXJkcyBzdXBwb3J0LCBpbnRlZ3JhdGlvbiBzdGFuZGFyZHMsIGFwcGxpY2F0aW9uIGludGVncmF0aW9uLCBtaWRkbGV3YXJlLCBzb2Z0d2FyZSwgc29sdXRpb25zLCBzZXJ2aWNlcywgQ1hGLCBvcGVuIHNvdXJjZSI-">
<meta name="description" content="Apache CXF, Services Framework - Aegis (2.1)" gtc:encodedoriginal="PG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9IkFwYWNoZSBDWEYsIFNlcnZpY2VzIEZyYW1ld29yayAtIEFlZ2lzICgyLjEpIj4=">


<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shCoreCXF.css" gtc:encodedoriginal="PGxpbmsgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iL3Jlc291cmNlcy9oaWdobGlnaHRlci9zdHlsZXMvc2hDb3JlQ1hGLmNzcyI-">
<link type="text/css" rel="stylesheet" href="/resources/highlighter/styles/shThemeCXF.css" gtc:encodedoriginal="PGxpbmsgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iL3Jlc291cmNlcy9oaWdobGlnaHRlci9zdHlsZXMvc2hUaGVtZUNYRi5jc3MiPg==">

<script src="/resources/highlighter/scripts/shCore.js" data-markx="10" gtc:encodedoriginal="PHNjcmlwdCBzcmM9Ii9yZXNvdXJjZXMvaGlnaGxpZ2h0ZXIvc2NyaXB0cy9zaENvcmUuanMiIGRhdGEtbWFya3g9IjEwIj4="></script>
<script src="/resources/highlighter/scripts/shBrushJava.js" data-markx="11" gtc:encodedoriginal="PHNjcmlwdCBzcmM9Ii9yZXNvdXJjZXMvaGlnaGxpZ2h0ZXIvc2NyaXB0cy9zaEJydXNoSmF2YS5qcyIgZGF0YS1tYXJreD0iMTEiPg=="></script>
<script src="/resources/highlighter/scripts/shBrushXml.js" data-markx="12" gtc:encodedoriginal="PHNjcmlwdCBzcmM9Ii9yZXNvdXJjZXMvaGlnaGxpZ2h0ZXIvc2NyaXB0cy9zaEJydXNoWG1sLmpzIiBkYXRhLW1hcmt4PSIxMiI-"></script>
<script src="/resources/highlighter/scripts/shBrushBash.js" data-markx="13" gtc:encodedoriginal="PHNjcmlwdCBzcmM9Ii9yZXNvdXJjZXMvaGlnaGxpZ2h0ZXIvc2NyaXB0cy9zaEJydXNoQmFzaC5qcyIgZGF0YS1tYXJreD0iMTMiPg=="></script>
<script data-markx="14" gtc:encodedoriginal="PHNjcmlwdCBkYXRhLW1hcmt4PSIxNCI-"></script>


    <title>
Apache CXF -- Aegis (2.1)
    </title>
  </head>
<body onload="init()" gtc:encodedoriginal="PGJvZHkgb25sb2FkPSJpbml0KCkiPg==">


<table width="100%" cellpadding="0" cellspacing="0" gtc:encodedoriginal="PHRhYmxlIHdpZHRoPSIxMDAlIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiPg==">
  <tbody><tr>
    <td id="cell-0-0" colspan="2" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTAtMCIgY29sc3Bhbj0iMiI-"> </td>
    <td id="cell-0-1" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTAtMSI-"> </td>
    <td id="cell-0-2" colspan="2" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTAtMiIgY29sc3Bhbj0iMiI-"> </td>
  </tr>
  <tr>
    <td id="cell-1-0" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTEtMCI-"> </td>
    <td id="cell-1-1" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTEtMSI-"> </td>
    <td id="cell-1-2" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTEtMiI-">
      <!-- Banner -->
<div class="banner" id="banner" gtc:encodedoriginal="PGRpdiBjbGFzcz0iYmFubmVyIiBpZD0iYmFubmVyIj4="><div><table border="0" cellpadding="0" cellspacing="0" width="100%" gtc:encodedoriginal="PHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiB3aWR0aD0iMTAwJSI-"><tbody><tr><td align="left" colspan="1" nowrap gtc:encodedoriginal="PHRkIGFsaWduPSJsZWZ0IiBjb2xzcGFuPSIxIiBub3dyYXA-">
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly9jeGYuYXBhY2hlLm9yZy8iIHRpdGxlPSJBcGFjaGUgQ1hGIj4="><span style="font-weight: bold; font-size: 170%; color: white" gtc:encodedoriginal="PHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE3MCU7IGNvbG9yOiB3aGl0ZSI-">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap gtc:encodedoriginal="PHRkIGFsaWduPSJyaWdodCIgY29sc3Bhbj0iMSIgbm93cmFwPg==">
<a shape="rect" href="http://www.apache.org/" title="The Apache Sofware Foundation" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly93d3cuYXBhY2hlLm9yZy8iIHRpdGxlPSJUaGUgQXBhY2hlIFNvZndhcmUgRm91bmRhdGlvbiI-"><img border="0" alt="ASF Logo" src="http://cxf.apache.org/images/asf-logo.png" gtc:encodedoriginal="PGltZyBib3JkZXI9IjAiIGFsdD0iQVNGIExvZ28iIHNyYz0iaHR0cDovL2N4Zi5hcGFjaGUub3JnL2ltYWdlcy9hc2YtbG9nby5wbmciPg=="></a>
</td></tr></tbody></table></div></div>
      <!-- Banner -->
      <div id="top-menu" gtc:encodedoriginal="PGRpdiBpZD0idG9wLW1lbnUiPg==">
        <table border="0" cellpadding="1" cellspacing="0" width="100%" gtc:encodedoriginal="PHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjEiIGNlbGxzcGFjaW5nPSIwIiB3aWR0aD0iMTAwJSI-">
          <tbody><tr>
            <td>
              <div align="left" gtc:encodedoriginal="PGRpdiBhbGlnbj0ibGVmdCI-">
                <!-- Breadcrumbs -->
<a href="index.html" gtc:encodedoriginal="PGEgaHJlZj0iaW5kZXguaHRtbCI-">Index</a> > <a href="databindings.html" gtc:encodedoriginal="PGEgaHJlZj0iZGF0YWJpbmRpbmdzLmh0bWwiPg==">DataBindings</a> > <a href="aegis-21.html" gtc:encodedoriginal="PGEgaHJlZj0iYWVnaXMtMjEuaHRtbCI-">Aegis (2.1)</a>
                <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right" gtc:encodedoriginal="PGRpdiBhbGlnbj0icmlnaHQiPg==">
                <!-- Quicklinks -->
<div id="quicklinks" gtc:encodedoriginal="PGRpdiBpZD0icXVpY2tsaW5rcyI-"><p><a shape="rect" href="http://cxf.apache.org/download.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly9jeGYuYXBhY2hlLm9yZy9kb3dubG9hZC5odG1sIj4=">Download</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly9jeGYuYXBhY2hlLm9yZy9kb2NzL2luZGV4Lmh0bWwiPg==">Documentation</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </tbody></table>
      </div>
    </td>
    <td id="cell-1-3" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTEtMyI-"> </td>
    <td id="cell-1-4" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTEtNCI-"> </td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTItMCIgY29sc3Bhbj0iMiI-"> </td>
    <td id="cell-2-1" gtc:encodedoriginal="PHRkIGlkPSJjZWxsLTItMSI-">
      <table>
        <tbody><tr valign="top" gtc:encodedoriginal="PHRyIHZhbGlnbj0idG9wIj4=">
          <td height="100%" gtc:encodedoriginal="PHRkIGhlaWdodD0iMTAwJSI-">
            <div id="wrapper-menu-page-right" gtc:encodedoriginal="PGRpdiBpZD0id3JhcHBlci1tZW51LXBhZ2UtcmlnaHQiPg==">
              <div id="wrapper-menu-page-top" gtc:encodedoriginal="PGRpdiBpZD0id3JhcHBlci1tZW51LXBhZ2UtdG9wIj4=">
                <div id="wrapper-menu-page-bottom" gtc:encodedoriginal="PGRpdiBpZD0id3JhcHBlci1tZW51LXBhZ2UtYm90dG9tIj4=">
                  <div id="menu-page" gtc:encodedoriginal="PGRpdiBpZD0ibWVudS1wYWdlIj4=">
                    <!-- NavigationBar -->
<div id="navigation" gtc:encodedoriginal="PGRpdiBpZD0ibmF2aWdhdGlvbiI-"><ul class="alternate" gtc:encodedoriginal="PHVsIGNsYXNzPSJhbHRlcm5hdGUiPg=="><li><a shape="rect" href="overview.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Im92ZXJ2aWV3Lmh0bWwiPg==">Overview</a></li><li><a shape="rect" href="how-tos.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imhvdy10b3MuaHRtbCI-">How-Tos</a></li><li><a shape="rect" href="frontends.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImZyb250ZW5kcy5odG1sIj4=">Frontends</a></li><li><a shape="rect" href="databindings.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImRhdGFiaW5kaW5ncy5odG1sIj4=">DataBindings</a></li><li><a shape="rect" href="transports.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9InRyYW5zcG9ydHMuaHRtbCI-">Transports</a></li><li><a shape="rect" href="configuration.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImNvbmZpZ3VyYXRpb24uaHRtbCI-">Configuration</a></li><li><a shape="rect" href="debugging-and-logging.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImRlYnVnZ2luZy1hbmQtbG9nZ2luZy5odG1sIj4=">Debugging and Logging</a></li><li><a shape="rect" href="tools.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9InRvb2xzLmh0bWwiPg==">Tools</a></li><li><a shape="rect" href="restful-services.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9InJlc3RmdWwtc2VydmljZXMuaHRtbCI-">RESTful Services</a></li><li><a shape="rect" href="wsdl-bindings.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9IndzZGwtYmluZGluZ3MuaHRtbCI-">WSDL Bindings</a></li><li><a shape="rect" href="service-routing.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9InNlcnZpY2Utcm91dGluZy5odG1sIj4=">Service Routing</a></li><li><a shape="rect" href="dynamic-languages.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImR5bmFtaWMtbGFuZ3VhZ2VzLmh0bWwiPg==">Dynamic Languages</a></li><li><a shape="rect" href="ws-support.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9IndzLXN1cHBvcnQuaHRtbCI-">WS-* Support</a></li><li><a shape="rect" href="advanced-integration.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImFkdmFuY2VkLWludGVncmF0aW9uLmh0bWwiPg==">Advanced Integration</a></li><li><a shape="rect" href="deployment.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9ImRlcGxveW1lbnQuaHRtbCI-">Deployment</a></li><li><a shape="rect" href="schemas-and-namespaces.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9InNjaGVtYXMtYW5kLW5hbWVzcGFjZXMuaHRtbCI-">Use of Schemas and Namespaces</a></li></ul><hr><ul class="alternate" gtc:encodedoriginal="PHVsIGNsYXNzPSJhbHRlcm5hdGUiPg=="><li><p>Search</p></li></ul><form enctype="application/x-www-form-urlencoded" method="get" id="cse-search-box" action="http://www.google.com/cse" gtc:encodedoriginal="PGZvcm0gZW5jdHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiBtZXRob2Q9ImdldCIgaWQ9ImNzZS1zZWFyY2gtYm94IiBhY3Rpb249Imh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9jc2UiPg==">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4" gtc:encodedoriginal="PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3giIHZhbHVlPSIwMDI4OTAzNjc3NjgyOTEwNTE3MzA6bzk5cWl3YTA5eTQiPg==">
    <input type="hidden" name="ie" value="UTF-8" gtc:encodedoriginal="PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iaWUiIHZhbHVlPSJVVEYtOCI-">
    <input type="text" name="q" size="21" gtc:encodedoriginal="PGlucHV0IHR5cGU9InRleHQiIG5hbWU9InEiIHNpemU9IjIxIj4=">
    <input type="submit" name="sa" value="Search" gtc:encodedoriginal="PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic2EiIHZhbHVlPSJTZWFyY2giPg==">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en" data-markx="110" gtc:encodedoriginal="PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cDovL3d3dy5nb29nbGUuY29tL2NzZS9icmFuZD9mb3JtPWNzZS1zZWFyY2gtYm94Jmxhbmc9ZW4iIGRhdGEtbWFya3g9IjExMCI-"></script><hr><ul class="alternate" gtc:encodedoriginal="PHVsIGNsYXNzPSJhbHRlcm5hdGUiPg=="><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly9jeGYuYXBhY2hlLm9yZy9qYXZhZG9jL2xhdGVzdC8iPg==">API 3.2.x (Javadoc)</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly9jeGYuYXBhY2hlLm9yZy9qYXZhZG9jL2xhdGVzdC0zLjEueC8iPg==">API 3.1.x (Javadoc)</a></li><li><a shape="rect" href="http://cxf.apache.org/" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGhyZWY9Imh0dHA6Ly9jeGYuYXBhY2hlLm9yZy8iPg==">CXF Website</a></li></ul><p> </p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html" gtc:encodedoriginal="PGEgc2hhcGU9InJlY3QiIGNsYXNzPSJleHRlcm5hbC1saW5rIiBocmVmPSJodHRwOi8vd3d3LmFwYWNoZS5vcmcvZXZlbnRzL2N1cnJlbnQtZXZlbnQuaHRtbCI-"><span class="confluence-embedded-file-wrapper" gtc:encodedoriginal="PHNwYW4gY2xhc3M9ImNvbmZsdWVuY2UtZW1iZWRkZWQtZmlsZS13cmFwcGVyIj4="><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png" gtc:encodedoriginal="PGltZyBjbGFzcz0iY29uZmx1ZW5jZS1lbWJlZGRlZC1pbWFnZSBjb25mbHVlbmNlLWV4dGVybmFsLXJlc291cmNlIiBzcmM9Imh0dHA6Ly93d3cuYXBhY2hlLm9yZy9ldmVudHMvY3VycmVudC1ldmVudC0xMjV4MTI1LnBuZyIgZGF0YS1pbWFnZS1zcmM9Imh0dHA6Ly93d3cuYXBhY2hlLm9yZy9ldmVudHMvY3VycmVudC1ldmVudC0xMjV4MTI1LnBuZyI-"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%" gtc:encodedoriginal="PHRkIGhlaWdodD0iMTAwJSI-">
           <!-- Content -->
           <div class="wiki-content" gtc:encodedoriginal="PGRpdiBjbGFzcz0id2lraS1jb250ZW50Ij4=">
<div id="ConfluenceContent" gtc:encodedoriginal="PGRpdiBpZD0iQ29uZmx1ZW5jZUNvbnRlbnQiPg=="><p>For CXF 2.1 or newer</p>

<h1 id="Aegis(2.1)-WhatisAegis?" gtc:encodedoriginal="PGgxIGlkPSJBZWdpcygyLjEpLVdoYXRpc0FlZ2lzPyI-">What is Aegis?</h1>

<p>Aegis is a databinding. That is, it is a subsystem that can map Java objects to XML documents described by XML schema, and vica-versa. Aegis is designed to give useful mappings with a minimum of programmer effort, while allowing detailed control and customization.</p>

<p>Aegis began as part of XFire, and moved with XFire into Apache CXF.</p>

<p>You can use Aegis independently of CXF as a mechanism for mapping Java objects to and from XML. This page, however, describes Aegis as used inside of CXF.</p>

<p>Aegis has some advantages over JAXB for some applications. Some users find that it produces a more natural XML mapping for less configuration. For example, Aegis has a default setting for 'nillable', allowing you to declare it for your entire service in one place instead of having to annotate every single element. The biggest advantage of Aegis, however, is a convenient way to customize the mapping without adding (@)annotations to your Java code. This allows you to avoid class loading dependencies between your data classes and your web service binding. </p>

<h1 id="Aegis(2.1)-GettingStarted:BasicUseofAegis" gtc:encodedoriginal="PGgxIGlkPSJBZWdpcygyLjEpLUdldHRpbmdTdGFydGVkOkJhc2ljVXNlb2ZBZWdpcyI-">Getting Started: Basic Use of Aegis</h1>

<p>You can configure any web <em>service</em> to use the Aegis data binding. A service configured with Aegis will yield a valid WSDL description, and you can use that to configure any <em>client</em> that you like. You can talk to an Aegis service with JAXB, or .NET, or a scripted language, or ... Aegis itself.</p>

<p>You can use Aegis as a client to talk to Aegis, by using the very same Java classes and configuration files in the client environment that you use on the server. However, it's not all that practical to use Aegis as a client to talk to some a service using some other data binding, since Aegis lacks a 'wsdl2java' tool.</p>

<p>Using Aegis on the client side also carries severe risks of compatibility problems. Since there is no WSDL to specify the contract, small changes in your code or in CXF can result in a situation where the client and the server are incompatible. If you want to use Aegis on the client side, you should be sure to use exactly the same version of CXF on both sides. If you cannot do that, you should consider generating JAX-WS/JAX-B code for the client using wsdl2java.</p>

<p>Every CXF service and client uses a front end: JAX-WS, Simple, etc. Each of these provides a place to configure the data binding, both in Spring and via Java code.</p>

<p>For example, here is a Simple front-end service using Aegis as a data binding.</p>

<div class="code panel pdl" style="border-width: 1px;" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29kZSBwYW5lbCBwZGwiIHN0eWxlPSJib3JkZXItd2lkdGg6IDFweDsiPg=="><div class="codeContent panelContent pdl" gtc:encodedoriginal="PGRpdiBjbGFzcz0iY29kZUNvbnRlbnQgcGFuZWxDb250ZW50IHBkbCI-">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;" data-markx="143" gtc:encodedoriginal="PHByZSBjbGFzcz0iYnJ1c2g6IGphdmE7IGd1dHRlcjogZmFsc2U7IHRoZW1lOiBEZWZhdWx0IiBzdHlsZT0iZm9udC1zaXplOjEycHg7IiBkYXRhLW1hcmt4PSIxNDMiPg=="></pre>
</div></div>

<p>AegisDatabinding is the class that integrates Aegis into CXF as a databinding.</p>

<p>Note that AegisDatabinding beans, like all databinding beans, are <em>not reusable</em>. The example above uses an anonymous nested bean for the databinding. If you make a first-class bean for a databinding, be sure to use scope='prototype' if you are inclined to define more than one endpoint.</p>

<h1 id="Aegis(2.1)-AegisOperations-TheSimpleCase" gtc:encodedoriginal="PGgxIGlkPSJBZWdpcygyLjEpLUFlZ2lzT3BlcmF0aW9ucy1UaGVTaW1wbGVDYXNlIj4=">Aegis Operations - The Simple Case</h1>

<p>How does Aegis work? Aegis maintains, for each service, a set of mappings from Java types (Class<?> objects) to XML Schema types. 它使用该映射来读取和写入XML。让我们看一个简单的服务，其中涉及的所有Java类型都是Java内置类型，具有预定义到XML Schema的映射的其他类型，或者具有（递归）简单属性的简单bean模式类。

<p>让我们从<em>序列化开始</em> ：从Java到XML的映射。 （JAXB称为编组，无法确定在拼写中使用多少个“ l”。）给定一个Java对象，Aegis会查看它是否具有映射。默认情况下，Aegis具有一组针对XML Schema中定义的基本类型的<a shape="rect" href="aegis-default-mappings.html">默认映射</a> ，以及一些其他特殊项。这些映射由Aegis的Java类实现，可以将对象转换为XML，反之亦然。特别要注意的是，Aegis会将DataSource或DataHandler映射到MTOM附件。</p>

<p>如果Aegis没有找到类型的映射该怎么办？在默认配置中，Aegis调用<em>类型创建者</em>来创建映射。类型创建者使用多种机制从Java对象创建XML模式。这包括反射，注释和XML类型映射文件。作为映射过程的一部分，Aegis将基于Java包分配名称空间URI。（ <strong>注意</strong> ：Aegis目前不支持elementForm ='unqualified'。）这些映射由通用映射类实现，并被存储起来。</p>

<p>反向过程如何： <em>反序列化</em> ？（JAXB称此为非编组。）在这种情况下，默认情况下，将为Aegis提供XML元素，并要求其生成Java对象。但是，请记住，宙斯盾维护从Java类型到XML模式类型的映射。默认情况下，XML实例文档不提供有关给定元素类型的信息。Aegis如何确定Java类型？在CXF之外，应用程序必须告诉Aegis文档根元素的预期类型。</p>

<p>或者，作为替代方案，Aegis可以在编写时将xsi：type属性添加到顶级元素。阅读时，它将始终尊重他们。</p>

<p>在CXF内部，Aegis可以从该服务的消息和零件信息中受益。服务的WSDL服务配置提供了足够的信息来将XML Schema类型与每个部分相关联。前端确定了零件后，就可以使用QName调用Aegis作为架构类型，并且Aegis可以在映射中查找它。</p>

<p>会在映射中吗？是的，在CXF内部是因为Aegis为服务的各个部分中的类型预先创建了映射。Aegis <em>无法</em>基于XML模式动态创建或选择Java类，因此类型创建者无法从XML开始。因此，在CXF之外，您有责任确保映射您的顶级类型。</p>

<h3 id="Aegis(2.1)-SchemaValidation">模式验证</h3>
<p>从CXF 2.3开始，Aegis数据绑定可以利用Woodstox 4.x Stax解析器中内置的“模式验证”功能来验证传入请求。要启用此功能，您必须执行以下操作：</p>
<ol><li>确保您使用的是Woodstox 4.x Stax解析器，而不是3.x或其他解析器。默认情况下，CXF 2.3附带适当版本的Woodstox。</li><li>如果不使用CXF bundle jar（例如，如果使用maven），则需要将cxf-wstx-msv-validation-2.3.0.jar添加到类路径中</li><li>如果未使用maven或类似工具来获取cxf-wstx-msv-validation jar，则还需要添加msv验证jar，因为CXF默认情况下不提供它们。你会需要：<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="169"></pre>
</div></div></li><li>如果不使用默认总线（例如配置自己的spring上下文），则需要添加：<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="173"></pre>
</div></div>加载Aegis将使用的验证器实用程序。</li><li>通过使用@SchemaValidation批注或将端点上的“ schema-validation-enabled”属性设置为“ true”，可以像对JAXB一样打开模式验证。</li></ol>


<h1 id="Aegis(2.1)-UsingJavaClassesThatAren&#39;tVisibletotheServiceInterface">使用服务接口不可见的Java类</h1>

<p>许多Web服务程序员都希望使用通过反映服务接口而<em>无法</em>直接看到的类型。这是程序员想要用于属性或参数类型的一些常见类型的示例：</p>

<ul><li>声明一个基本类型，但是传输扩展它的许多类中的任何一个。</li><li>声明原始的Collection类，例如Set，List或Map，并发送任意对象作为键和值。</li><li>为“ throws”声明一个基本异常类型，然后抛出从其派生的其他异常类。</li><li>声明接口或抽象类型。</li></ul>


<p>宙斯盾可以处理所有这些问题。对于除接口以外的所有接口，都涉及两种机制：根类列表和xsi：type属性。</p>

<p>如上所述，Aegis可以写“任何东西”，但是它只能读取映射类型的对象。您必须给Aegis一个列表，列出要在服务中可见的所有类型之外您要使用的所有类型，并且必须指示Aegis在发送时发送xsi：type属性。<br clear="none">这种类型的对象。<br clear="none">这些类型属性使Aegis可以识别这些其他对象的类型并在映射中查找它们。</p>

<p>接口和抽象类型还需要进一步的步骤。显然，宙斯盾无法在接口上实例化（运行“新”）。因此，仅知道特定的XML Schema类型映射到接口是不够的信息。为了能够读取与接口相对应的XML元素，Aegis必须知道实现该接口的“代理类”。您必须为Aegis提供从接口类型到代理类名称的映射。</p>

<p>这是如何运作的？Aegis的核心是AegisContext类。每个AegisDatabinding对象都有一个AegisContext。（可能无法在数据绑定之间共享AegisContext。）</p>

<p>默认情况下，AegisDatabinding将使用默认属性创建自己的AegisContext。要配置其他类型，以及控制稍后将要检查的其他选项，您必须为自己创建AegisContext并指定其某些属性。然后，将AegisContext对象传递到AegisDatabinding对象中。</p>

<p>要使用其他类或接口，您需要设置AegisContext的两个（或三个）属性。</p>

<ul><li><strong>rootClasses</strong>是Java类<?> objects. These are added to the list of types known to Aegis. Aegis will create a mapping for each. For convenience, there is a rootClassNames property for use from Spring. It is a list of Strings containing class names.</li></ul>


<ul><li><strong>writeXsiTypes</strong> is a boolean. Set it to <strong>true</strong> to send xsi:type attributes.</li></ul>


<ul><li><strong>beanImplementationMap</strong> is a mapping from Class<?>到类名的集合。使用它为接口（或抽象类）指定代理类。</li></ul>


<h1 id="Aegis(2.1)-GlobalTypeCreationOptions">全局类型创建选项</h1>

<p>默认类型映射过程有一些全局选项。您可以通过创建org.apache.cxf.aegis.type来控制它们。TypeCreationOptions并将其传递到您的AegisContext对象。</p>

<p>该类中有四个属性，其中两个更常用。</p>

<ul><li><strong>defaultNillable</strong>定义为非基本类型构建的xsd：sequences中xsd：element项的<strong>nillable</strong>属性的默认值。默认情况下为true，因为任何Java引用都可以为null。但是，nillable ='true'在某些wsdl2java工具中会产生令人讨厌的后果（例如，将标量转换为数组），因此许多程序员更喜欢默认为<strong>false</strong> 。</li></ul>


<ul><li><strong>defaultMinOccurs</strong>定义为Java数组构建的xsd：sequences中xsd：element项的<strong>minOccurs</strong>属性的默认值。与nillable结合使用时，程序员通常希望将此值从0调整为1，以获得更有用的数组映射。</li></ul>


<ul><li><strong>defaultExtensibleElements</strong>使每个序列以xsd：any结尾。这里的想法是允许模式发展；从一种服务版本生成Java的客户端将允许来自具有附加元素的较新版本的数据。请谨慎使用此功能； Web服务的版本管理是一个复杂的话题，而xsd：any可能会带来意想不到的后果。</li></ul>


<ul><li><strong>defaultExtensibleAttributes</strong>导致每个元素允许任何属性。默认情况下，Aegis不会将<strong>任何</strong>属性或参数映射到属性。与元素情况一样，需要小心。</li></ul>


<p>请注意，这些是默认类型创建者的选项。如果您采取创建自定义类型创建器的步骤，则由您决定是否尊重或忽略这些选项。</p>

<p>这是设置这些选项的Java代码的快速示例。在Spring中，您将执行类似于属性的操作。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="224"></pre>
</div></div>

<h1 id="Aegis(2.1)-DetailedControlofBeanTypeMapping">Bean类型映射的详细控制</h1>

<p>该页面已逐渐从依赖于“宙斯盾”的默认设置逐步过渡到对该过程进行更详细的控制。下一级别的细节是通过XML映射文件和注释来自定义默认类型创建者的行为。</p>

<h2 id="Aegis(2.1)-XMLMappingFiles">XML映射文件</h2>

<p>XML映射文件是Aegis的主要区别功能。它们使您可以指定映射过程的详细信息，而无需（a）修改类型的Java源代码，或（b）维护某种包含映射指令的中央文件。</p>

<p>Aegis XML映射适用于服务和bean。“ beans”是指“在Web服务中使用的遵循bean模式的Java类”。 “服务”，您问？他们不是CXF前端的责任吗？前端和数据绑定的职责有些重叠。</p>

<p>总的来说，前端将服务映射到XML模式，为消息和部件填充XML模式元素和类型。然后，数据绑定从那些模式项映射到Java。但是，Aegis还为方法和参数提供XML配置，这些方法和参数在前端区域“偷猎”。这对于Simple前端非常有效，Simple前端没有其他方法可以控制这些映射。本作者不确定在宙斯盾与任何其他具有显式配置的前端（例如JAX-WS）之间发生冲突时会发生什么。因此，Aegis服务配置最好与Simple前端一起使用。</p>

<p>对于bean和服务定制，Aegis都在类加载器找到的文件中寻找定制。如果您的班级是my.hovercraft.is.full.of。鳗鱼，宙斯盾将在类路径中搜索/my/hovercraft/is/full/of/Eels.aegis.xml。换句话说，如果Eels.class位于JAR文件或目录中，则Eels.aegis.xml可以紧邻它。</p>

<p>或者，另一方面，它可以位于完全不同的JAR或树中，只要它最终位于相同的逻辑位置即可。换句话说，您甚至可以在没有类源的情况下为类创建XML文件。</p>

<p><a shape="rect" href="annotated-aegis-file-schema.html">这</a>是用于映射XML文件的XML模式的副本，该注释带有注释。</p>

<h3 id="Aegis(2.1)-BeanMapping">豆映射</h3>

<p>这是一个非常简单的映射。它接受一个名为“马”的属性，将其重命名为“羽毛”，并使其成为属性而不是元素。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="239"></pre>
</div></div>

<h4 id="Aegis(2.1)-NamesandNamespaces">名称和命名空间</h4>

<p>您还可以指定bean本身的完整QName。以下映射使一个类具有QName {urn：north-pole：operations} Employee。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="244"></pre>
</div></div>

<p>注意，名称空间是在mappings元素上声明的，然后使用前缀为name / title属性指定元素QNames。</p>

<p>这将导致如下所示的映射：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="249"></pre>
</div></div>

<h4 id="Aegis(2.1)-Ignoringproperties">忽略属性</h4>

<p>如果您不想序列化某个属性，则可以轻松忽略它：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="254"></pre>
</div></div>

<h4 id="Aegis(2.1)-MinOccursandNillable">极少发生和可治愈</h4>

<p>默认的Aegis映射假定由于任何Java对象都可以为null，因此相应的架构元素的minOccurs应该为0，nillable为true。映射上具有用于控制此属性的属性。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="259"></pre>
</div></div>

<h4 id="Aegis(2.1)-AlternativeTypeBinding">替代类型绑定</h4>

<p>稍后，我们将说明如何替换Aegis为基本类型提供的默认映射。但是，在某些情况下，您可能只想为其中一个属性指定所提供的类型映射之一。您可以从XML映射文件执行此操作，而无需创建任何Java定制。</p>

<p>例如，默认情况下，如果Aegis将属性映射为Date，则它将使用XML模式类型xsd：dateTime。这是一个使用xsd：date的示例。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="265"></pre>
</div></div>

<h4 id="Aegis(2.1)-Collections">馆藏</h4>

<p>如果使用“原始”集合类型，则“宙斯盾”会将其映射为xsd：any粒子的集合。如果您希望WSDL将其显示为某些特定类型的集合，那么最简单的方法是使用Java泛型而不是原始类型。如果由于某种原因而不能这样做，则可以使用属性的componentType和keyType属性来指定Java类。</p>

<h4 id="Aegis(2.1)-MultiplemappingsforDifferentServices">针对不同服务的多个映射</h4>

<p>如果要为相同类型的不同服务指定不同的映射行为，该怎么办？文件的“映射”元素接受“ uri”属性。每个AegisContext都有一个'mappingNamespaceURI'属性。如果.aegis.xml文件中的映射具有uri属性，则它必须与当前服务的uri相匹配。</p>

<h3 id="Aegis(2.1)-ServicesandParameters">服务和参数</h3>

<p>对于服务，映射文件指定操作和参数的属性。</p>

<p>此示例指定getUnannotatedStrings返回一个名为UnannotatedStringCollection的元素，该元素是String值的原始集合。然后，它指定getValues的第一个参数也是String值的原始集合。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px" data-markx="275"></pre>
</div></div>

<h2 id="Aegis(2.1)-Annotations">注解</h2>

<p>像JAXB一样，Aegis支持一些Java注释来控制映射过程。这些属性是在JAXB之后建模的。 Aegis在包org.apache.cxf.aegis.type.java5中定义它们。他们是：</p>

<ul><li>XmlAttribute</li><li>XmlType</li><li>XmlElement</li><li>XmlReturnType</li><li>XmlIgnore</li></ul>


<p>此外，Aegis将遵循以下列表中的实际JAXB注释：</p>

<ul><li>javax.jws。Web参数</li><li>javax.jws。Web结果</li><li>javax.xml.bind.annotation。XmlAttribute</li><li>javax.xml.bind.annotation。XmlElement</li><li>javax.xml.bind.annotation。XmlSchema</li><li>javax.xml.bind.annotation。XmlType</li><li>javax.xml.bind.annotation。XmlTransient</li></ul>


<p>但是请注意，Aegis不处理package-info.java类，因此XmlSchema必须应用于一个类。</p>

<h1 id="Aegis(2.1)-CreatingYourOwnTypeMappings">创建自己的类型映射</h1>

<p>如果要完全控制Java和XML之间的映射，则必须创建自己的类型映射。为此，您应该创建一个扩展org.apache.cxf.aegis.type的类。键入，然后必须在服务的类型映射中注册它。</p>

<p>要查看这些类如何工作，请阅读源代码。</p>

<p>要注册类型映射，您有两种选择。</p>

<p>如果仅要将自定义类型映射添加到服务中，最简单的方法是从AegisContext检索TypeMapping，并将您的类型注册为从Class <?>到您的自定义映射对象的映射。</?></p>

<p>如果要完全控制该过程，则可以创建自己的TypeMapping。DefaultTypeMapping类是标准类型映射。您可以使用它们，也可以创建自己的TypeMapping实现。根据需要设置类型映射，并在初始化服务<em>之前</em>将其安装在上下文中。</p>

<h1 id="Aegis(2.1)-CustomizingTypeCreation">自定义类型创建</h1>

<p>如果要更改Aegis从Java类构建新的类型映射和类型的方式，该怎么办？您可以创建自己的TypeCreator，然后将其放在类型创建者列表的前面或替换整个标准列表。</p>

<p>与类型映射一样，阅读源代码是了解详细信息的唯一方法。类型创建者与类型映射相关联。您可以在DefaultTypeMapping实例上调用setTypeCreator进行安装。</p>



</plain-text-body></div>
           </div>
           <!-- Content -->
         
        
      
   
   <table><td id="cell-2-2" colspan="2"> </td>
  
  <tr>
   <td id="cell-3-0"> </td>
   <td id="cell-3-1"> </td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">隐私政策</a> -（ <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=78311">编辑页面</a> ）（ <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=78311&amp;showComments=true&amp;showCommentArea=true#addcomment">添加评论</a> ）<br>Apache CXF，CXF，Apache，Apache Feather徽标是The Apache Software Foundation的商标。<br>提及的所有其他商标可能是其各自所有者的商标或注册商标。
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3"> </td>
   <td id="cell-3-4"> </td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2"> </td>
    <td id="cell-4-1"> </td>
    <td id="cell-4-2" colspan="2"> </td>
  </tr>
</table>

<script type="text/javascript" data-markx="322"></script>
<script type="text/javascript" data-markx="323"></script>




</div></div></body></html>