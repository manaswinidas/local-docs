<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="EJB failover" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi EJB failover" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0 Documentation: EJB failover</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="configuring-and-administering.html">Configuring and administering</a>&nbsp;&gt;&nbsp;<a href="configuring-and-administering-the-apache-geronimo-server.html">Configuring and administering the Apache Geronimo Server</a>&nbsp;&gt;&nbsp;<a href="clustering-and-farming.html">Clustering and farming</a>&nbsp;&gt;&nbsp;<a href="ejb-failover.html">EJB failover</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">EJB failover</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=23334723">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=23334723">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=23334723">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=23334723">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=23334723">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=23334723">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">

<p>In Geronimo, you can configure <a shape="rect" class="external-link" href="http://openejb.apache.org/3.0/failover.html" title="OpenEJB failover">OpenEJB for failover scenarios</a>, such as multipoint and multicast. Further more, Geronimo uses WADI to support failover for Stateful Session Bean (SFSB) in a unicast way.</p>

<style type="text/css">/*<![CDATA[*/
div.rbtoc1572612995026 {padding: 0px;}
div.rbtoc1572612995026 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1572612995026 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1572612995026">
<ul class="toc-indentation"><li><a shape="rect" href="#EJBfailover-Enablingmultipoint/multicastfailover">Enabling multipoint/multicast failover</a>
<ul class="toc-indentation"><li><a shape="rect" href="#EJBfailover-Developingtheclient">Developing the client</a></li><li><a shape="rect" href="#EJBfailover-failoverstrategies">failover strategies</a></li></ul>
</li><li><a shape="rect" href="#EJBfailover-Enablingunicastfailover">Enabling unicast failover</a>
<ul class="toc-indentation"><li><a shape="rect" href="#EJBfailover-UnderstandingunicastsupportinGeronimo">Understanding unicast support in Geronimo</a></li><li><a shape="rect" href="#EJBfailover-EnablingunicastsupportinGeronimo">Enabling unicast support in Geronimo</a></li><li><a shape="rect" href="#EJBfailover-Configuringtheapplication">Configuring the application</a></li><li><a shape="rect" href="#EJBfailover-Configuringtheclient">Configuring the client</a></li></ul>
</li></ul>
</div>

<h1 id="EJBfailover-Enablingmultipoint/multicastfailover">Enabling multipoint/multicast failover </h1>
<p>By default, OpenEJB can use either <strong>multicast</strong> or <strong>multipoint</strong> strategies for failover scenarios. Basically the server cluster members maintain membership information using heartbeats and the ejb client maintains a list of servers to change target server based on availability. Each heartbeat packet contains a single URI that advertises a service, its cluster group, and its location in the form of "cluster1:ejb:ejbd://thehost:4201". </p>

<p>By updating different attributes in the <code>config-substitutions.properties</code> file, you can choose the appropriate discovery strategies in your cluster.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Multicast </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> MultiPoint</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> ServerHostname=&lt;LocalIP&gt;<br clear="none" class="atl-forced-newline">
MulticastEnabled=true </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> ServerHostname=&lt;LocalIP&gt;<br clear="none" class="atl-forced-newline">
MultipointEnable=true<br clear="none" class="atl-forced-newline">
MultipointServers=&lt;Remotehost/IP&gt;:&lt;port&gt;</p></td></tr></tbody></table></div>

<p>where </p>
<ul><li><em>LocalIP</em> is the ip address of the current node</li><li><em>Remotehost/IP</em> is the host name or IP address of EJB member(s) in a cluster.</li><li><em>port</em> is the port number used to communicate with remote node. The port must not be the default openEJB server port 4201.</li></ul>


<p>Note that for multicast scenario, you have to set <code>openejb.client.requestretry property</code> to <em>true</em> when starting up the Geronimo server. For example</p>
<div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>./geronimo.sh run --long -Dopenejb.client.requestretry=true</p>
</div></div>

<h2 id="EJBfailover-Developingtheclient">Developing the client</h2>
<p>EJB clients must know the address of EJB members to make sure that its request will be handled with high availability, regardless of whether EJB members are clustered in a <strong>Multipoint</strong> or <strong>Multicast</strong> way.</p>

<p>See the following code snippet for your client application development for remote host lookup.</p>
<div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro" style="width:50%;min-width:50%;max-width:50%;">
<div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>URI for Multicast</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Properties p = new Properties();
p.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.RemoteInitialContextFactory");
p.setProperty(Context.PROVIDER_URL,"multicast://239.255.3.2:6142?group=cluster1");
...
</pre>
</div></div></div>
<div class="columnMacro" style="width:50%;min-width:50%;max-width:50%;">
<div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>URI for Multipoint/Unicast</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Properties p = new Properties();
p.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.RemoteInitialContextFactory");
p.setProperty(Context.PROVIDER_URL,"failover:ejbd://ejbd://foo:4201");
...
</pre>
</div></div></div></div></div></div>

<h2 id="EJBfailover-failoverstrategies">failover strategies </h2>
<p>OpenEJB supports 3 kinds of failover strategies when the original node was shut down abnormally. </p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>round-robin</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Properties p = new Properties();
p.setProperty(Context.PROVIDER_URL,"failover:round-robin:ejbd://foo:4201,ejbds://bar:4201,multicast://239.255.2.3:6142");
...
</pre>
</div></div>

<div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro" style="width:50%;min-width:50%;max-width:50%;">
<div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>sticky</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Properties p = new Properties();
p.setProperty(Context.PROVIDER_URL,"failover:ejbd://foo:4201,ejbd://bar:4201");
...
</pre>
</div></div></div>

<div class="columnMacro" style="width:50%;min-width:50%;max-width:50%;">
<div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>random</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Properties p = new Properties();
p.setProperty(Context.PROVIDER_URL,"failover:random:ejbd://foo:4201,ejbd://bar:4201");
...
</pre>
</div></div></div></div></div></div>

<h1 id="EJBfailover-Enablingunicastfailover">Enabling unicast failover </h1>
<p>You can configure <strong>unicast-based</strong> support for EJB clustering. WADI can be configured to use unicast instead of multicast to support failover for Stateless Session Bean. </p>

<h2 id="EJBfailover-UnderstandingunicastsupportinGeronimo">Understanding unicast support in Geronimo</h2>

<p>The following server configurations, shipped out-of-the-box with the Java EE assemblies, must be installed and enabled for the unicast EJB failover to work:</p>
<ul><li><em>org.apache.geronimo.configs/openejb-clustering-wadi//car</em>: it defines runtime dependencies and OpenEJB clustering contracts.</li><li><em>org.apache.geronimo.configs/openejb-clustering-builder-wadi//car</em>: it defines deployment time dependencies along with a <em>OpenEJBClusteringBuilder</em> GBean declaring the default clustering configuration.</li></ul>


<p>This configuration must be running when a cluster is started. If it is not, then the substitution group <em>openejb-clustering-wadi</em> is not properly recognized and the deployment fails.</p>

<h2 id="EJBfailover-EnablingunicastsupportinGeronimo">Enabling unicast support in Geronimo</h2>
<p>To enable unicast-based failover for Stateless Session Bean, the <code>wadi-clustering</code> module in <code>&lt;GERONIMO_HOME&gt;/var/config/config.xml</code> should be configured for each server node. You must specify the real IP address to <em>ServerHostname</em>  and the node name to <em>ClusterNodeName</em> for each static member in the <code>config-substitutions.properties</code> file. Each member has its own GBean configuration in the <code>wadi-cluster</code> module in <code>config.xml</code>. Ensure that you define all the static members in it. The following example shows the configuration with two static members.</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
...
&lt;module name="org.apache.geronimo.configs/wadi-clustering/3.0-SNAPSHOT/car"&gt;
	&lt;gbean name="DefaultBackingStrategyFactory"&gt;
		&lt;attribute name="nbReplica"&gt;${ReplicaCount}&lt;/attribute&gt;
	&lt;/gbean&gt;
	&lt;gbean name="DefaultDispatcherHolder"&gt;
		&lt;attribute name="disableMCastService"&gt;true&lt;/attribute&gt;
		&lt;attribute name="receiverPort"&gt;4002&lt;/attribute&gt;
		&lt;attribute name="endPointURI"&gt;${EndPointURI}&lt;/attribute&gt;
		&lt;attribute name="clusterName"&gt;${WADIClusterName}&lt;/attribute&gt;
		&lt;reference name="staticMember"&gt;
			&lt;pattern&gt;
				&lt;groupId&gt;org.apache.geronimo.configs&lt;/groupId&gt;
				&lt;artifactId&gt;wadi-clustering&lt;/artifactId&gt;
				&lt;version&gt;2.2.1-SNAPSHOT&lt;/version&gt;
				&lt;type&gt;car&lt;/type&gt;
				&lt;name&gt;firstStaticMember&lt;/name&gt;
			&lt;/pattern&gt;
		&lt;/reference&gt;
	&lt;/gbean&gt;
	&lt;gbean name="org.apache.geronimo.configs/wadi-clustering/3.0-SNAPSHOT/car?ServiceModule=org.apache.geronimo.configs/wadi-clustering/3.0-SNAPSHOT/car,j2eeType=GBean,name=firstStaticMember"
		gbeanInfo="org.apache.geronimo.clustering.wadi.WadiStaticMember"&gt;
		&lt;attribute name="className"&gt;org.apache.catalina.tribes.membership.StaticMember&lt;/attribute&gt;
		&lt;attribute name="port"&gt;4002&lt;/attribute&gt;
		&lt;attribute name="securePort"&gt;-1&lt;/attribute&gt;
		&lt;attribute name="domain"&gt;test-domain&lt;/attribute&gt;
		&lt;attribute name="UniqueId"&gt;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0&lt;/attribute&gt;
		&lt;attribute name="host"&gt;Node1_IP&lt;/attribute&gt;
		&lt;reference name="nextWadiStaticMember"&gt;
			&lt;pattern&gt;
				&lt;groupId&gt;org.apache.geronimo.configs&lt;/groupId&gt;
				&lt;artifactId&gt;wadi-clustering&lt;/artifactId&gt;
				&lt;version&gt;2.2.1-SNAPSHOT&lt;/version&gt;
				&lt;type&gt;car&lt;/type&gt;
				&lt;name&gt;secondStaticMember&lt;/name&gt;
			&lt;/pattern&gt;
		&lt;/reference&gt;
	&lt;/gbean&gt;
	&lt;gbean name="org.apache.geronimo.configs/wadi-clustering/3.0-SNAPSHOT/car?ServiceModule=org.apache.geronimo.configs/wadi-clustering/3.0-SNAPSHOT/car,j2eeType=GBean,name=secondStaticMember"
		gbeanInfo="org.apache.geronimo.clustering.wadi.WadiStaticMember"&gt;
		&lt;attribute name="className"&gt;org.apache.catalina.tribes.membership.StaticMember&lt;/attribute&gt;
		&lt;attribute name="port"&gt;4003&lt;/attribute&gt;
		&lt;attribute name="securePort"&gt;-1&lt;/attribute&gt;
		&lt;attribute name="domain"&gt;test-domain&lt;/attribute&gt;
		&lt;attribute name="UniqueId"&gt;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1&lt;/attribute&gt;
		&lt;attribute name="host"&gt;Node2_IP&lt;/attribute&gt;
		&lt;reference name="nextWadiStaticMember" /&gt;
	&lt;/gbean&gt;
&lt;/module&gt;
...
</pre>
</div></div>

<p>where</p>

<p><em>Node1_IP</em> is the IP address of the first server node.<br clear="none">
<em>Node2_IP</em> is the IP address of the second server node. </p>

<h2 id="EJBfailover-Configuringtheapplication">Configuring the application</h2>

<p>The Geronimo-specific deployment plan for an EJB application, which is usually packaged as an EJB JAR file, is called <strong>"openejb-jar.xml"</strong>. The <strong>openejb-jar.xml</strong> deployment plan is used in conjunction with the <strong>ejb-jar.xml</strong> Java EE deployment plan to deploy enterprise applications to the Geronimo application server. </p>

<p>To enable WADI configuration for your application, add <code>openejb-clustering-wadi</code> into the deployment plan as follows:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;ejb-jar xmlns="http://geronimo.apache.org/xml/ns/j2ee/ejb/openejb-2.0" 
         xmlns:wadi="http://geronimo.apache.org/xml/ns/openejb-clustering-wadi-1.2"&gt; 
...
   &lt;wadi:openejb-clustering-wadi&gt;
      &lt;wadi:deltaReplication&gt;false&lt;/wadi:deltaReplication&gt;
   &lt;/wadi:openejb-clustering-wadi&gt;
&lt;/ejb-jar&gt;
</pre>
</div></div>

<h2 id="EJBfailover-Configuringtheclient">Configuring the client</h2>

<p>An application client must find an EJB node and make sure that the client could find another node when the original one was shut down abnormally in a unicast scenario. Use the following code snippet when programming your client applications.</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
Properties p = new Properties();
p.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.RemoteInitialContextFactory");

p.setProperty(Context.PROVIDER_URL,"ejbd://foo:4201");   
Context context1 = new InitialContext(p);
...
p.setProperty(Context.PROVIDER_URL,"ejbd://bar:4201");
Context context2 = new InitialContext(p);
</pre>
</div></div>



</div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : EJB failover';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
