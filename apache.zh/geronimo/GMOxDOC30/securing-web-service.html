<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Securing Web Service">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Securing Web Service">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：保护Web服务</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="developing.html">开发</a> > <a href="tutorials.html">教程</a> > <a href="developing-web-services.html">开发Web服务</a> > <a href="securing-web-service.html">保护Web服务</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">保护Web服务</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645400"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645400">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645400"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645400">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645400"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645400">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>Web服务安全性（WS-security）是基于SOAP的安全标准，为Web服务提供消息级的完整性，机密性和身份验证。</p>

<p>使用WS-security，简单对象访问协议（SOAP）消息包含SOAP标头，该标头包含签名，加密信息，用于处理安全信息的协议以及用于凭证传播的安全令牌。</p>

<p>WS-安全策略文件（WSSE）与Web服务相关联，因此入站和出站SOAP消息均根据WSSE文件中的安全策略进行处理。</p>

<p>Geronimo 2.2具有两个WS-security提供程序：用于Tomcat Web容器的Axis2和用于Jetty的CXF。它们在Geronimo的Web服务开发中启用了以下WS-security功能：</p>
<ul><li><strong>XML安全性</strong> -允许人与消息一起发送其数字签名，从而确保没有人修改发送方和接收方之间的消息内容。</li><li><strong>XML加密-</strong>允许使用给定的加密算法对消息正文或消息正文进行加密。</li><li><strong>用户</strong>名<strong>令牌</strong> -将用户名和密码值添加到消息头。</li><li><strong>安全声明标记语言（SAML）令牌</strong> -通过Geronimo部署描述符和/或注释在Web服务上配置。</li><li><strong>时间戳记</strong> -指定安全性数据保持有效的时间。</li></ul>


<p>在本指南中，将以CXF / Jetty为例。</p>

<h2 id="SecuringWebService-EnablingWS-securityinWebserviceclient">在Web服务客户端中启用WS-security</h2>
<h3 id="SecuringWebService-Configuringsecurityproperties">配置安全属性</h3>
<p>您可以使用<property>中的<port>部分中的<property>元素指定各种属性<property><port><code>geronimo-web.xml</code>对于CXF / Jetty客户。<br clear="none">要配置ws-security属性，您只需为每个属性添加前缀<code>wss4j.in</code>入站设置文件，或<code>wss4j.out</code>出站设置。例如：</port></property></property></port></property></p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;property name=&quot;wss4j.out.action&quot;&gt;UsernameToken Timestamp&lt;/property&gt;
&lt;property name=&quot;wss4j.out.user&quot;&gt;foo&lt;/property&gt;
&lt;property name=&quot;wss4j.out.password&quot;&gt;bar&lt;/property&gt;
]]></script>
</div></div>

<h3 id="SecuringWebService-EnablingsignedorencryptedSOAPmessages">启用签名或加密的SOAP消息</h3>
<p>Geronimo允许CXF / Jetty客户端发送或接收已签名或加密的SOAP消息。您<port>可以启用这个功能里面<port><code>geronimo-web.xml</code>在客户端。以下代码段是签名和加密的示例：</port></port></p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;port&gt;
&lt;port-name&gt;DoubleItPort&lt;/port-name&gt;
&lt;protocol&gt;http&lt;/protocol&gt;
&lt;host&gt;localhost&lt;/host&gt;
&lt;port&gt;8080&lt;/port&gt;
&lt;uri&gt;/doubleit/services/doubleit&lt;/uri&gt;
...
&lt;port&gt;
]]></script>
</div></div>

<h2 id="SecuringWebService-EnablingWS-securityatserviceside">在服务端启用WS-security</h2>
<h3 id="SecuringWebService-ConfiguringUsernametoken">配置用户名令牌</h3>
<p>Geronimo CXF / Jetty在服务器端支持UsernameToken Profile。例如，要涉及Web服务<strong>CalculatorService的</strong> UsernameToken配置文件，请在中添加以下行<code>geronimo-web.xml</code> ：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;servlet&gt;
&lt;servlet-name&gt;CalculatorService&lt;/servlet-name&gt;
&lt;ws-security-binding&gt;
&lt;security-realm-name&gt;geronimo-admin&lt;/security-realm-name&gt;
&lt;property name=&quot;wss4j.in.action&quot;&gt;UsernameToken&lt;/property&gt;
&lt;/ws-security-binding&gt;
&lt;/servlet&gt;
]]></script>
</div></div>


<h3 id="SecuringWebService-EnablingsignedorencryptedSOAPmessages.1">启用签名或加密的SOAP消息</h3>
<p>同样，您可以通过配置以下<port>部分中的<port>部分，使服务端能够发送或接收签名或加密的SOAP消息<port>。 <code>geronimo-web.xml</code> 。下面的示例传递安全属性：</port></port></port></p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;&lt;servlet&gt;
&lt;servlet-name&gt;DoubleItServiceImpl&lt;/servlet-name&gt;
&lt;ws-security-binding&gt;
&lt;security-realm-name&gt;&lt;/security-realm-name&gt;
&lt;property name=&quot;wss4j.in.action&quot;&gt;Signature Encrypt Timestamp&lt;/property&gt;
&lt;property name=&quot;wss4j.in.user&quot;&gt;myservicekey&lt;/property&gt;
&lt;property name=&quot;wss4j.in.keyPassword&quot;&gt;skpass&lt;/property&gt;
&lt;property name=&quot;wss4j.in.signaturePropFile&quot;&gt;serviceKeystore.properties&lt;/property&gt;
&lt;property name=&quot;wss4j.in.decryptionPropFile&quot;&gt;serviceKeystore.properties&lt;/property&gt;

&lt;property name=&quot;wss4j.out.action&quot;&gt;Signature Encrypt Timestamp&lt;/property&gt;
&lt;property name=&quot;wss4j.out.user&quot;&gt;myservicekey&lt;/property&gt;
&lt;property name=&quot;wss4j.out.signaturePropFile&quot;&gt;serviceKeystore.properties&lt;/property&gt;
&lt;property name=&quot;wss4j.out.encryptionPropFile&quot;&gt;serviceKeystore.properties&lt;/property&gt;
&lt;property name=&quot;wss4j.out.encryptionUser&quot;&gt;myclientkey&lt;/property&gt;
&lt;property name=&quot;wss4j.out.signatureKeyIdentifier&quot;&gt;DirectReference&lt;/property&gt;
&lt;property name=&quot;wss4j.out.keyPassword&quot;&gt;skpass&lt;/property&gt;
&lt;property name=&quot;wss4j.out.encryptionSymAlgorithm&quot;&gt;http://www.w3.org/2001/04/xmlenc#tripledes-cbc&lt;/property&gt;
&lt;/ws-security-binding&gt;
&lt;/servlet&gt;
]]></script>
</div></div></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Securing Web Service';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>