<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Migrating from JAX-RPC to JAX-WS">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Migrating from JAX-RPC to JAX-WS">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：从JAX-RPC迁移到JAX-WS</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="developing.html">开发</a> > <a href="tutorials.html">教程</a> > <a href="developing-web-services.html">开发Web服务</a> > <a href="migrating-from-jax-rpc-to-jax-ws.html">从JAX-RPC迁移到JAX-WS</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">从JAX-RPC迁移到JAX-WS</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645398"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645398">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645398"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645398">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645398"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645398">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>本教程将带您完成将Web服务从JAX-RPC移植到JAX-WS时最常涉及的步骤。本教程没有详细介绍为什么需要这些更改以及其背后的概念。这是一个简短的注释，可以帮助您处理将应用程序从旧的Web服务堆栈迁移到新的堆栈的过程。</p>

<p>即使Java EE 5中仍支持JAX-RPC，它也缺少JAX-WS具有的许多高级功能，例如注释，JAXB绑定，SOAP 1.2，RESTful服务等。因此，强烈建议您使用JAX-WS而不是JAX-RPC来用Java实现Web服务。</p>

<parameter ac:name="maxLevel">2</parameter> <parameter ac:name="type">清单</parameter> <parameter ac:name="separator">管</parameter>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-JAXBmigration">JAXB迁移</h1>
<p>JAX-WS 2.0中最显着的变化是使用<strong>JAXB 2.0</strong>在Java和XML之间进行数据绑定。 JAX-RPC 1.0指定了XML和Java之间的有限映射。<br clear="none">这有效地消除了在Java和WSDL之间定义映射的情况下使用JAX-RPC映射文件的需要，而且还强加了条件，即返回值和请求值可以绑定到JAXB。同样，考虑到JAXB支持的多种数据类型，这应该不是问题。</p>

<parameter ac:name="title">JAX-RPC和JAXB</parameter> <rich-text-body>
<p>JAX-RPC没有使用JAXB，因为JAX-RPC的第一个版本在JAXB之前完成了很多。因此，编写人员开发自己的自定义映射，而不必等待JAXB完成。</p></rich-text-body>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Annotations">注解</h1>
<p>JAX-WS 2.0严重依赖于<strong>Annotations</strong>的使用。这些批注用于自定义从JAVA到XML模式/ WSDL的映射，并在运行时用于创建必要的文件。<br clear="none">Geronimo使用Sun提供的<strong>wsgen</strong>实用程序在部署时通过处理指定的注释即时创建WSDL和存根。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-SOAPstandards">SOAP标准</h1>
<p>JAX-RPC和JAX-WS都支持SOAP 1.1。JAX-WS支持的默认绑定是HTTP上的SOAP 1.1。但是它也可以支持通过HTTP的SOAP 1.2绑定。作为Java程序员，您可能不会在SOAP 1.1和SOAP 1.2之间遇到任何区别。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-ServiceEndpointInterfacerequirements">服务端点接口要求</h1>
<p>根据JAX-RPC，服务端点接口必须扩展<strong>Remote</strong> 。JAX-WS消除了这种情况，您只需添加以下内容即可创建<strong>POJO</strong>类Web服务： <code>@WebService</code>类顶部的注释。</p>

<parameter ac:name="borderStyle">固体</parameter> <parameter ac:name="title">JAX-RPC Converter SEI</parameter> <plain-text-body>包org.apache.geronimo.samples.jaxrpc;导入java.math。BigDecimal;导入java.rmi。远程;导入java.rmi。RemoteException;公共接口转换器扩展了Remote {public BigDecimal dollarToRupees（BigDecimal dollars）引发RemoteException;公共BigDecimal rupeesToEuro（BigDecimal rupees）引发RemoteException; }</plain-text-body> <parameter ac:name="borderStyle">可靠的</parameter> <parameter ac:name="title">JAX-WS Converter SEI</parameter> <plain-text-body>包org.apache.geronimo.samples.jaxrpc；导入java.math。BigDecimal;导入javax.jws。WebService @WebService（name =“ Converter”，targetNamespace =“ http：//org.apache.geronimo.samples.jaxws”）公共接口转换器{public BigDecimal dollarToRupees（BigDecimal dollars）; public BigDecimal rupeesToEuro（BigDecimal rupees）; }</plain-text-body>

<p>您可以在这里找到的主要区别是：</p>
<ul><li><strong>注释</strong> -JAX-WS要求所有SEI都包含<code>@WebService</code>注解</li><li><strong>java.rmi。远程</strong> -JAX-RPC SEI扩展了java.rmi。远程接口。JAX-WS不再需要此。</li></ul>


<p>而且，JAX-WS SEI广泛使用批注来指定Java到WSDL的映射，而此信息在任何形式的JAX-RPC SEI中都不存在（这需要JAX-RPC映射文件才能将Java映射到WSDL）。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Deploymentdescriptor">部署描述符</h1>
<p>部署描述符<code>web.xml</code>从JAX-RPC到JAX-WS并没有改变，我们只需要将POJO类公开为servlet，服务器就可以动态创建工件，而对于JAX-RPC，我们需要指定WSDL和JAX-RPC映射文件位置。<br clear="none">通过将JAX-WS映射到Java EE 5并利用注释的优势，需要Web Service描述符文档<code>webservices.xml</code>由于可以使用注释有效地描述Web服务，因此无需使用Web服务。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Clientportlookup">客户端端口查找</h1>
<p>以下代码示例演示了客户端端口查找中JAX-RPC和JAX-WS之间的区别。</p>

<parameter ac:name="borderStyle">可靠的</parameter> <parameter ac:name="title">JAX-RPC Converter Client</parameter> <plain-text-body>软件包org.apache.geronimo.samples.jaxrpc;导入java.net。网址；导入javax.xml.namespace。QName;导入javax.xml.rpc。服务;导入javax.xml.rpc。ServiceFactory;导入javax.xml.rpc。ServiceException; //部分客户网址url =新网址（“ http：// localhost：8080 / jaxrpc-converter / converter？wsdl”）； QName qname =新的QName（“ http：//org.apache.geronimo.samples.jaxrpc/”，“ ConverterService”）; ServiceFactory工厂= ServiceFactory.newInstance（）;服务服务= factory.createService（url，qname）;转换器conv =（转换器）service.getPort（Converter.class）;</plain-text-body> <parameter ac:name="borderStyle">可靠的</parameter> <parameter ac:name="title">JAX-WS Converter Client</parameter> <plain-text-body>软件包org.apache.geronimo.samples.jaxrpc;导入java.net。网址；导入javax.xml.namespace。QName;导入javax.xml.ws。服务; //部分客户网址url =新网址（“ http：// localhost：8080 / jaxrpc-converter / converter？wsdl”）； QName qname =新的QName（“ http：//org.apache.geronimo.samples.jaxrpc/”，“ ConverterService”）;服务服务= Service.create（url，qname）;转换器转换=（转换器）service.getPort（Converter.class）;</plain-text-body>

<p>我们在这里可以观察到的主要区别是</p>
<ul><li>创建Service不再需要创建<strong>ServiceFactory</strong>实例</li><li>服务映射到<strong>javax.xml.rpc。服务</strong>在JAX-RPC和<strong>javax.xml.ws。JAX-WS中的服务</strong> 。</li></ul>


<h1 id="MigratingfromJAX-RPCtoJAX-WS-RESTfulservices">RESTful服务</h1>
<p>JAX-WS引入了<strong>RESTful Web服务</strong>作为基于SOAP的Web服务的后继者。RESTful服务已经获得了许多供应商的大力支持，例如Google AdSense，Yahoo API，Amazon等。<br clear="none">JAX-WS中引入的支持RESTful服务的重要内容是：</p>

<h2 id="MigratingfromJAX-RPCtoJAX-WS-Provider">提供者</h2>
<p>Web服务端点可以选择通过实现Provider接口在XML消息级别工作。此处，端点使用此底层通用API访问消息或消息有效负载。</p>

<h2 id="MigratingfromJAX-RPCtoJAX-WS-Dispatch">调度</h2>
<p>Dispatch API适用于高级XML开发人员，他们喜欢在Web站点上使用XML构造。 <code>java.lang.transform.Source</code>要么<code>javax.xml.soap.SOAPMessage</code>水平。为了更加方便，支持将Dispatch API与JAXB数据绑定对象一起使用。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-Asynchronousoperations">异步操作</h1>
<p>通过JAX-RPC进行JAX-WS的操作映射的主要区别是引入了异步操作。任何具有双向消息流的WSDL操作，或客户端希望接收响应的WSDL操作，都可以映射到异步Java表示形式。<br clear="none">有关JAX-WS中异步操作的更多参考，请参考参考部分。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-MTOMandSAAJ">MTOM和SAAJ</h1>
<p>JAXWS 2.0支持MTOM（SOAP消息传输优化机制）和SAAJ（带有Java附件API的SOAP）指定的二进制数据的优化传输。<br clear="none">MTOM允许优化传输二进制数据-可以按照MTOM规范定义的规则将任何xs：base64Binary或xs：hexBinary模式类型作为附件发送。</p>

<h1 id="MigratingfromJAX-RPCtoJAX-WS-References">参考文献</h1>
<ul><li><a shape="rect" href="developing-a-jax-ws-pojo-web-service.html">开发JAX-WS POJO Web服务</a>和<a shape="rect" href="developing-jax-rpc-web-services.html">开发JAX-RPC Web服务</a></li><li><a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html" rel="nofollow">http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html</a></li><li><a shape="rect" class="external-link" href="https://jax-rpc.dev.java.net/jaxws20-ea2/docs/UsersGuide.html" rel="nofollow">https://jax-rpc.dev.java.net/jaxws20-ea2/docs/UsersGuide.html</a></li><li><a shape="rect" class="external-link" href="http://blogs.sun.com/trajesh/entry/migrating_from_jax_rpc_to" rel="nofollow">http://blogs.sun.com/trajesh/entry/migrating_from_jax_rpc_to</a></li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Migrating from JAX-RPC to JAX-WS';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>