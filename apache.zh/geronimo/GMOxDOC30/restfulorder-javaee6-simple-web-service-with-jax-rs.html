<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=1">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="restfulorder-javaee6 - Simple Web Service with JAX-RS">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi restfulorder-javaee6 - Simple Web Service with JAX-RS">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：restfulorder-javaee6-带有JAX-RS的简单Web服务</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="reference.html">参考</a> > <a href="samples.html">示例</a> > <a href="java-ee-sample-applications.html">Java EE示例应用程序</a> > <a href="restfulorder-javaee6-simple-web-service-with-jax-rs.html">restfulorder-javaee6-带有JAX-RS的简单Web服务</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">restfulorder-javaee6-使用JAX-RS的简单Web服务</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=24192541"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=24192541">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=24192541"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=24192541">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=24192541"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=24192541">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<h1 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-ApplicationOverviewapplication">应用概述<parameter ac:name="">应用</parameter></h1>
<p>该示例应用程序演示了一个简单的订购系统，该系统可以使用RESTful Web服务获取，删除和编辑订购数据。此RESTful Web服务应用程序在XML消息级别工作。它使用异步JavaScript和XML（Ajax）技术将Java技术，XML和JavaScript结合到Web服务应用程序中，以使用客户端脚本与服务器交换数据。当用户创建新订单或编辑现有订单时，资源数据将转换为XML模式进行处理。该Web服务在Geronimo应用程序服务器中作为Servlet公开。有关此概念的更多信息，请参见<a shape="rect" href="restful-web-services.html">RESTful Web服务</a> 。</p>



<h1 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-Applicationcontents">申请内容</h1>

<p>restfulorder-javaee6应用程序作为WAR部署到应用程序服务器。该WAR文件的结构内容概述如下。</p>

<parameter ac:name="borderColor">#FFFFFF</parameter> <parameter ac:name="bgColor">#FFFFFF</parameter> <parameter ac:name="borderStyle">实体</parameter> <plain-text-body>| -restfulorder-javaee6.war + -index.html + -rest +-restfulorder +-Support.js +-showAll.html + -WEB-INF +-web.xml +-类+-org。 apache.geronimo.samples.javaee6.restfulorder +-META-INF + -META-INF</plain-text-body>

<p>的<code>org.apache.geronimo.samples.javaee6.restfulorder</code>程序包包含以下文件。</p>

<parameter ac:name="borderColor">#FFFFFF</parameter> <parameter ac:name="bgColor">#FFFFFF</parameter> <parameter ac:name="borderStyle">实体</parameter> <plain-text-body>+-org.apache.geronimo.samples.javaee6.restfulorder +-服务+-RestfulordersResource.class +-RestfulorderResource.class + -config +-ApplicationConfig.class +-转换器+-RestfulorderConverter.class +-RestfulordersConverter .class +-实体+-Restfulorder.class + -JPASessionBeans</plain-text-body>

<p>哪里，</p>
<ul><li><strong>服务</strong>文件夹包含RESTful应用程序的资源类。</li><li><strong>config</strong>文件夹包含扩展的servlet类<code>javax.ws.rs.core.Application</code>在JAX-RS运行时中配置应用程序类。的<code>javax.ws.rs.core.Application</code>类提供了一些方法，这些方法可以指定一组根资源和可从指定应用程序路径访问的提供程序。这样，用户可以在单个应用程序中指定几组资源。</li><li><strong>转换器</strong>文件夹包含带XML绑定的Java体系结构（JAXB）注释的类，以支持在请求和响应中处理XML。</li><li><strong>实体</strong>文件夹包含一个实体类，该实体类表示数据库中的订单信息表。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li></ul>


<p>运行restfulorder-javaee6应用程序时， <strong>index.html</strong>作为<strong>web.xml中</strong>指定的欢迎文件启动。从<strong>index.html</strong> ， <strong>调用showAll.html</strong> 。通过单击<strong>showAll.html</strong>上的<strong>Add a new order</strong>链接，您将链接到<strong>addOrder.html</strong> 。在此页面上，您可以通过在字段中输入数据来创建新订单。订单数据由<strong>Restfulorder</strong> JavaScript对象接收，该对象提供了记录和配置订单资源的方法<code>String</code>类型。然后， <code>addItem</code>调用<strong>Restfulorders.js</strong>提供的方法将新订单资源添加到数据库中。工作过程如下：</p>

<ol><li>的<code>addItem</code>方法调用<code>postJson</code>发送方法<code>XMLHttpRequest</code>包含资源数据<code>application/json</code>键入Servlet类<strong>ApplicationConfig</strong> 。</li><li>的<code>XMLHttpRequest</code>到达servlet就像一个<code>HttpServletRequest</code> 。解析请求参数后，Servlet将调用必要的应用程序逻辑。对于此应用程序，根据请求类型调用<strong>RestfulordersResource</strong>和<strong>RestfulorderResource</strong>类的请求方法。</li><li>请求方法通过采用<strong>RestfulorderConverter</strong>或<strong>RestfulordersConverter</strong>的JAXB对象实例来处理XML格式的资源数据，从而在XML消息级别处理资源数据。</li><li>通过使用<strong>RestfulorderConverter</strong>或<strong>RestfulordersConverter</strong>对象实例访问<strong>Restfulorder</strong>实体类，将订单数据记录到数据库中。</li></ol>



<h1 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-Applicationimplementation">应用实施</h1>
<p>的<code>postJson</code>方法，称为发送<code>XMLHttpRequest</code>到Servlet类，请使用以下JavaScript <strong>support.js中</strong>提供的Ajax技术。</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">support.js</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body>var rjsSupport = {proxy：“，getHttpProxy：function（）{return this.proxy; }，setHttpProxy：function（proxy_）{this.proxy = proxy_; }，isSetHttpProxy：function（）{返回this.getHttpProxy（）。length> 0; }，getHttpRequest：function（）{var xmlHttpReq;尝试{// Firefox，Opera 8.0 +，Safari，IE7.0 + xmlHttpReq = new XMLHttpRequest（）; } catch（e）{// Internet Explorer 6.0 +，5.0 +尝试{xmlHttpReq = new ActiveXObject（“ Msxml2。XMLHTTP“）;}捕获（e）{尝试{xmlHttpReq = new ActiveXObject（” Microsoft.XMLHTTP“）;}捕获（e）{this.debug（”您的浏览器不支持AJAX！“）;}}}返回xmlHttpReq;}，findUrl：function（url，method）{var url2 = url; if（this.isSetHttpProxy（））url2 = this.getHttpProxy（）+”？method =“ + method +”＆url =“ + url2; return url2;}，findMethod：function（method）{var method2 = method; if（method！=“ GET” && this.isSetHttpProxy（））method2 =“ POST”;返回方法2; }，打开：function（method2，url2，mimeType，paramLen，async）{//如果使用http代理，则更改url和方法var url = this.findUrl（url2，method2）; var method = this.findMethod（method2）; //如果是IE7，则添加时间戳以使URL唯一var timestamp = new Date（）。getTime（）; if（url.indexOf（“？“）！= -1）url = url +“＆timestamp =” + timestamp;否则url = url +”？timestamp =“ + timestamp; var xmlHttpReq = this.getHttpRequest（）; if（xmlHttpReq == null）{this.debug（'Error：Cannot create XMLHttpRequest'）; return null;}尝试{netscape.security。PrivilegeManager.enablePrivilege（“ UniversalBrowserRead”）; } catch（e）{//this.debug("Permission UniversalBrowserRead拒绝。“）; }试试{xmlHttpReq.open（method，url，async）; } catch（e）{this.debug（'错误：XMLHttpRequest.open因以下原因而失败：'+ url +'错误名称：'+ e.name +'错误消息：'+ e.message）;返回null; }如果（mimeType！= null）{if（method =='GET'）{//this.debug（“设置GET接受：” + mimeType）; xmlHttpReq.setRequestHeader（'Accept'，mimeType）; } else if（method =='POST'|| method =='PUT'）{//this.debug("setting content-type：“ + mimeType）; //发送正确的标头信息以及请求xmlHttpReq.setRequestHeader（“ Content-Type”，mimeType）; xmlHttpReq.setRequestHeader（“ Content-Length”，paramLen）; xmlHttpReq.setRequestHeader（“ Connection”，“ close”）; } //对于IE7上的缓存控制xmlHttpReq.setRequestHeader（“ Cache-Control”，“ no-cache”）; xmlHttpReq.setRequestHeader（“ Pragma”，“ no-cache”）; xmlHttpReq.setRequestHeader（“ Expires”，“ -1”）;返回xmlHttpReq; }，loadXml：function（xmlStr）{var doc2; // IE的代码if（窗口ActiveXObject）{doc2 = new ActiveXObject（“ Microsoft.XMLDOM”）; doc2.async =“ false”; doc2.loadXML（xmlStr）; } // Mozilla，Firefox，Opera等的代码。else {var parser = new DOMParser（）; doc2 = parser.parseFromString（xmlStr，getDefaultMime（））; } return doc2; }，findIdFromUrl：function（u）{var li = u.lastIndexOf（'/'）;如果（li！= -1）{var u2 = u.substring（0，li）; var li2 = u2.lastIndexOf（'/'）; u2 = u.substring（0，li2）;返回u.substring（li2 + 1，li）; } return -1; }，获取：function（url，mime）{var xmlHttpReq = this.open（'GET'，url，mime，0，false）;尝试{xmlHttpReq.send（null）;如果（xmlHttpReq.readyState == 4）{var rtext = xmlHttpReq.responseText; if（rtext ==未定义|| rtext ==''|| rtext.indexOf（'HTTP Status'）！= -1）{if（rtext！= undefined）this.debug（'失败的XHR（GET，'+ url +'）：服务器返回->'+ rtext）;返回'-1'; } return rtext; }} catch（e）{this.debug（'Caught Exception; name：['+ e.name +'] message：['+ e.message +']'）; }返回“ -1”； }，post：function（url，mime，content）{var xmlHttpReq = this.open（'POST'，url，mime，content.length，false）;尝试{xmlHttpReq.send（content）;如果（xmlHttpReq.readyState == 4）{var status = xmlHttpReq.status; if（status == 201）{return true; } else {this.debug（'XHR（POST，'+ url +'）失败：服务器返回->'+状态）; }}} catch（e）{this.debug（'Caught Exception; name：['+ e.name +'] message：['+ e.message +']'）;返回false； }，输入：function（url，mime，content）{var xmlHttpReq = this.open（'PUT'，url，mime，content.length，false）;尝试{xmlHttpReq.send（content）;如果（xmlHttpReq.readyState == 4）{var status = xmlHttpReq.status; if（状态== 204）{返回true; } else {this.debug（'XHR（PUT，'+ url +'）失败：服务器返回->'+状态）; }}} catch（e）{this.debug（'Caught Exception; name：['+ e.name +'] message：['+ e.message +']'）;返回false； }，delete_：function（url）{var xmlHttpReq = this.open（'DELETE'，url，'application / xml'，0，false）;尝试{xmlHttpReq.send（null）;如果（xmlHttpReq.readyState == 4）{var status = xmlHttpReq.status; if（状态== 204）{返回true; } else {this.debug（'XHR（DELETE，'+ url +'）失败：服务器返回->'+ status）; }}} catch（e）{this.debug（'Caught Exception; name：['+ e.name +'] message：['+ e.message +']'）;返回false； }，调试：function（message）{var dbgComp = document.getElementById（“ dbgComp”）; if（dbgComp == null）{dbgComp = document.createElement（“ div”）; dbgComp.setAttribute（“ id”，“ dbgComp”）; dbgComp.style.border =“＃2574B7 1px固体”; dbgComp.style.font =“ 12pt / 14pt sans-serif”; var br = document.createElement（“ div”）; document.getElementsByTagName（“ body”）[0] .appendChild（br）; br.innerHTML ='<br><br><br>'; document.getElementsByTagName（“ body”）[0] .appendChild（dbgComp）; if（（types rjsConfig！=“ undefined”）&& rjsConfig.isDebug）{dbgComp.style.display =“”; } else {dbgComp.style.display =“ none”; } var tab ='width：20px;右边框：＃2574B7 1px实线; border-top：＃2574B7 1px实线；左边框：＃2574B7 1px实线；边框底部：＃2574B7 1px实线；颜色：＃000000; text-align：center;'; var addActionStr ='<div><a href="javascript:void(0);" style="text-decoration:none"><span style="color:red">X</span></a></div>'; dbgComp.innerHTML ='<table><tbody><tr><td><span style="color:blue">其余调试窗口</span></td><td>'+ addActionStr +'</td></tr></tbody></table><br>'; } var s = dbgComp.innerHTML; var now = new Date（）; var dateStr = now.getHours（）+'：'+ now.getMinutes（）+'：'+ now.getSeconds（）; dbgComp.innerHTML = s +' <span style="color:red">rest debug（'+ dateStr +'）：</span> '+消息+“<br>“;}，closeDebug：function（）{var dbgComp = document.getElementById（” dbgComp“）; if（dbgComp！= null）{dbgComp.style.display =“ none”; dbgComp.innerHTML =''; }}}</plain-text-body>
<p>哪里，</p>
<ul><li><code>XMLHttpRequest</code>是一个JavaScript对象，用于直接将HTTP或HTTPS请求发送到Web服务器，并将服务器响应数据直接加载回脚本中。在此应用中， <code>XMLHttpRequest</code>实例<code>xmlHttpReq</code>创建以帮助客户端脚本执行HTTP请求。在请求，目标URL和请求内容类型上使用的HTTP方法是在<code>XMLHttpRequest</code>与对象<code>open</code>初始化请求时的功能。</li><li><code>open : function(method2, url2, mimeType, paramLen, async)</code>是用于在指定的URL（ <code>url2</code> ）用于指定的方法（ <code>method2</code> ）。此函数初始化HTTP和HTTPS请求的<code>XMLHttpRequest</code>对象，必须在实际发送请求之前调用它。</li><li><code>setRequestHeader</code>是一种方法<code>XMLHttpRequest</code>用于设置要与请求一起发送的HTTP标头的对象。</li><li><code>get</code> ， <code>post</code> ， <code>put</code>和<code>delete</code>是负责调度请求的功能。每个函数首先获取的一个实例<code>XMLHttpRequest</code>并用初始化<code>open</code> 。然后，请求将发送到Web服务器，并将像其他HttpServletRequest一样到达服务器。</li><li><code>send</code>是用于将请求发送到Web服务器的功能。它接受一个参数，该参数可以包含要与请求一起发送的内容。请求的执行类似于Web服务器上的HttpServletRequests，并且在解析请求参数之后，Servlet将调用必要的应用程序逻辑。对于此应用， <code>get</code> ， <code>post</code> ， <code>put</code>和<code>delete</code>根据请求类型调用<strong>RestfulordersResource</strong>和<strong>RestfulorderResource</strong>类的request方法。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li></ul>


<p><strong>ApplicationConfig</strong>是一个servlet，它扩展了<code>javax.ws.rs.core.Application</code>类来配置JAX-RS运行时中的应用程序类。</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">ApplicationConfig.java</parameter> <parameter ac:name="borderStyle">固定</parameter> <plain-text-body>包org.apache.geronimo.samples.javaee6.restfulorder.config; @ javax.ws.rs。ApplicationPath（“ resources”）公共类ApplicationConfig扩展了javax.ws.rs.core。申请{}</plain-text-body>
<p>哪里，</p>
<ul><li><code>@javax.ws.rs.ApplicationPath</code>是有助于指定应用程序资源路径的注释。此注释的值用作servlet URL模式。例如，此应用程序中提供的资源的URI可以为<a shape="rect" class="external-link" href="http://localhost:8080/restfulorder-javaee6/resources/restfulorders/" rel="nofollow">http：// localhost：8080 / restfulorder-javaee6 / resources / restfulorders /</a> ，其中<strong>/ resources</strong>是Servlet URL。您也可以在自己的网址中指定此网址格式<code>web.xml</code>文件，如果没有此注释。</li><li><code>javax.ws.rs.core.Application</code>是提供<code>getClasses</code>和<code>getSingletons</code>可以分别指定一组根资源和提供者的方法，可从指定的应用程序路径访问这些提供者。<strong>ApplicationConfig</strong>类使用的默认实现<code>javax.ws.rs.core.Application</code>子类<code>getClasses</code>和<code>getSingletons</code>返回空集的方法。在这种情况下，当两个方法都返回空集时，应用程序中打包的所有根资源类和提供程序都将包含在已发布的JAX-RS应用程序中。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li></ul>



<p><strong>RestfulordersResource</strong>是一个资源类，它使用JAX-RS批注来实现相应的Web资源。当服务器接收到相应的HTTP请求时，将调用此类中定义的请求方法。</p>

<parameter ac:name="">java</parameter> <parameter ac:name="title">RestfulordersResource.java</parameter> <parameter ac:name="borderStyle">固定</parameter> <plain-text-body>包org.apache.geronimo.samples.javaee6.restfulorder.service;导入java.util。采集;导入javax.ws.rs。路径;导入javax.ws.rs。得到;导入javax.ws.rs。POST;导入javax.ws.rs。产生;导入javax.ws.rs。消费；导入javax.ws.rs。PathParam;导入javax.ws.rs。QueryParam;导入javax.ws.rs。默认值;导入javax.ws.rs.core。响应;导入javax.ws.rs.core。上下文；导入javax.ws.rs.core。UriInfo;导入javax.persistence。EntityManager;导入org.apache.geronimo.samples.javaee6.restfulorder.converter。RestfulordersConverter;导入org.apache.geronimo.samples.javaee6.restfulorder.converter。RestfulorderConverter;导入javax.persistence。PersistenceContext;导入javax.ejb。无状态导入org.apache.geronimo.samples.javaee6.restfulorder.entities。宁静的秩序； @Path（“ / restfulorders /”）@Stateless公共类RestfulordersResource {@ javax.ejb。EJB私有RestfulorderResource restfulorderResource; @Context受保护的UriInfo uriInfo; @PersistenceContext（unitName =“ RestfulProduct2PU”）受保护的EntityManager em; / **创建RestfulordersResource的新实例* / public RestfulordersResource（）{} / ** *获取用于以XML格式检索Restfulorder实例集合的方法。* * @返回RestfulordersConverter的实例* / @GET @Produces（{“ application / xml”，“ application / json”}）public RestfulordersConverter get（@QueryParam（“ start”）@DefaultValue（“ 0”）int start， @QueryParam（“ max”）@DefaultValue（“ 10”）int max，@QueryParam（“ expandLevel”）@DefaultValue（“ 1”）int expandLevel，@QueryParam（“ query”）@DefaultValue（“从Restfulorder e中选择“）字符串查询）{返回新的RestfulordersConverter（getEntities（start，max，query），uriInfo.getAbsolutePath（），expandLevel）; } / ** *用于使用XML作为输入格式创建Restfulorder实例的Post方法。* * @param数据是从XML流反序列化的RestfulorderConverter实体* @返回RestfulorderConverter的实例* / @POST @Consumes（{“ application / xml”，“ application / json”}）公共响应发布（RestfulorderConverter数据） {System.out.println（“在解决之前，在后”）; Restfulorder实体= data.resolveEntity（em）; createEntity（data.resolveEntity（em））;返回Response.created（uriInfo.getAbsolutePath（）。resolve（entity.getId（）+“ /”））。build（）; } / ** *返回用于实体导航的RestfulorderResource的动态实例。* * @返回RestfulorderResource的实例* / @Path（“ {id} /”）public RestfulorderResource getRestfulorderResource（@PathParam（“ id”）整数id）{restfulorderResource.setId（id）; restfulorderResource.setEm（em）;返回restfulorderResource； } / ** *返回与此资源关联的所有实体。* * @返回Restfulorder实例的集合* /受保护的集合<restfulorder>getEntities（int start，int max，字符串查询）{return em.createQuery（query）.setFirstResult（start）.setMaxResults（max）.getResultList（）; } / ** *坚持给定的实体。* * @param实体，持久化的实体* /受保护的void createEntity（Restfulorder实体）{em.persist（entity）; }}</restfulorder></plain-text-body>
<p>哪里，</p>
<ul><li><code>@Path("/restfulorders/")</code>是定义资源相对URI的注释。基本URI由您的主机名，端口，应用程序上下文根以及应用程序的所有URI模式映射的组合提供<code>web.xml</code>文件。例如，此资源类提供的资源的URI可以为<a shape="rect" class="external-link" href="http://localhost:8080/restfulorder-javaee6/resources/restfulorders/" rel="nofollow">http：// localhost：8080 / restfulorder-javaee6 / resources / restfulorders /</a> 。</li><li><code>@Path("{id}/")</code>注释子资源定位符，该子资源定位符返回<code>RestfulorderResource</code>对象来处理HTTP请求。的<code>id</code>此批注中的参数定义下的相对URI <code>/restfulorders/<em>id</em></code>资源。</li><li><code>@Context</code>在此资源类中用于注入的实例<code>UriInfo</code>进入班级领域。</li><li><code>UriInfo</code>实例可以提供有关请求URI组件的信息。</li><li><code>@GET</code>和<code>@POST</code>是用于在资源类中注释资源方法的请求方法指示符。其他常见的请求方法指示符包括<code>@PUT</code> ， <code>@DELETE</code>和<code>@HEAD</code> 。</li><li><code>@Consumes</code>和<code>@Produces</code>批注用于声明受支持的请求和响应媒体类型。在此资源类中， <code>post</code>和<code>get</code>两种方法都支持<code>application/xml</code>和<code>application/json</code> 。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li></ul>




<p><strong>RestfulordersConverter</strong>是带有XML绑定的Java体系结构（JAXB）注释的类，支持在请求和响应中处理XML。</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">RestfulordersConverter.java</parameter> <parameter ac:name="borderStyle">固定</parameter> <plain-text-body>包org.apache.geronimo.samples.javaee6.restfulorder.converter;导入java.net。URI;导入java.util。采集;导入javax.xml.bind.annotation。XmlRootElement;导入javax.xml.bind.annotation。XmlElement;导入javax.xml.bind.annotation。XmlTransient;导入javax.xml.bind.annotation。XmlAttribute;导入java.util。数组列表;导入org.apache.geronimo.samples.javaee6.restfulorder.entities。宁静的秩序； @XmlRootElement（name =“ restfulorders”）公共类RestfulordersConverter {私人收藏家<restfulorder>实体；私人收藏<restfulorderconverter>品；私人URI uri； private int expandLevel; / **创建一个RestfulordersConverter的新实例* / public RestfulordersConverter（）{} / ** *创建一个RestfulordersConverter的新实例。* * @param实体关联的实体* @param uri关联的uri * @param expandLevel指示应扩展实体图的级别数* / public RestfulordersConverter（Collection elements <restfulorder>，URI uri，int expandLevel）{this.entities =实体； this.uri = uri; this.expandLevel = expandLevel; getRestfulorder（）; } ......
</restfulorder></restfulorderconverter></restfulorder></plain-text-body>
<p>哪里，</p>
<ul><li><code>@XmlRootElement(name = "restfulorders")</code>是将类映射到XML文档根目录的注释。在此应用程序中，当用户创建具有唯一<em>ID</em>的新订单（例如01）时，包含相应数据的XML文档位于<a shape="rect" class="external-link" href="http://localhost:8080/restfulorder-javaee6/resources/restfulorders/01" rel="nofollow">http：// localhost：8080 / restfulorder-javaee6 / resources / restfulorders / 01</a> 。<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li></ul>





<h1 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-Getthesourcecode">获取源代码</h1>

<p>请参阅<a shape="rect" href="java-ee-sample-applications.html">示例常规信息，</a>以获取有关获取和构建此示例和其他示例的源的信息。</p>

<h1 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-BuildtheRESTfulWebservicesapplication">生成RESTful Web服务应用程序</h1>

<p>一旦所有源都签出，下一步就是构建<strong>restfulorder-javaee6</strong>示例。需要Maven 2或更高版本来构建二进制文件。</p>

<p>从<strong><</strong> <strong>restfulorder-javaee6</strong> <strong>_home></strong>目录运行以下命令。</p>

<rich-text-body>
<p>mvn全新安装</p></rich-text-body>
<p>此过程将花费几分钟。二进制文件将在相应的<strong>目标</strong>目录中生成。</p>

<h2 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-DeploytheRESTfulWebservicesapplication">部署RESTful Web服务应用程序</h2>

<p>部署示例应用程序非常简单，因为我们将使用Geronimo Console。</p>
<ol><li>从“ <strong>控制台”->“导航”面板</strong>向下滚动至<strong>Deploy New</strong> 。</li><li>负载<strong>restfulorder-javaee6，受战争</strong>从<strong>restfulorder-javaee6战\目标</strong>文件夹<strong><em>版本</em></strong> <strong>的.war</strong>到<strong>存档</strong>输入框。</li><li>按<strong>安装</strong>按钮以在服务器中部署应用程序。</li></ol>


<h2 id="restfulorder-javaee6-SimpleWebServicewithJAX-RS-TesttheRESTfulWebservicesapplication">测试RESTful Web服务应用程序</h2>

<p>该应用程序位于<a shape="rect" class="external-link" href="http://localhost:8080/restfulorder-javaee6" rel="nofollow">http：// localhost：8080 / restfulorder-javaee6上</a> 。</p>

<p>点击<strong>添加新订单</strong>链接以创建新订单。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="restfulorder-javaee6-simple-web-service-with-jax-rs.data/restfulorder1.jpg"></span></p>

<p>输入订单的所有数据后，单击“ <strong>保存”</strong> 。您将在下一页上看到添加的订单。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="restfulorder-javaee6-simple-web-service-with-jax-rs.data/restfulorder2.jpg"></span></p>

<p>您还可以在<a shape="rect" class="external-link" href="http://localhost:8080/restfulorder-javaee6/resources/restfulorders/id" rel="nofollow">http：// localhost：8080 / restfulorder-javaee6 / resources / restfulorders / id中</a>以XML格式查看订单资源，其中<em>id</em>是您为订单定义的唯一id值。</p>


</div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : restfulorder-javaee6 - Simple Web Service with JAX-RS';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>