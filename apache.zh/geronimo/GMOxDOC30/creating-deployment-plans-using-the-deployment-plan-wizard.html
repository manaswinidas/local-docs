<html lang="zh-Hans" ><head></head><body  onload="init()">﻿
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Creating deployment plans using the deployment plan wizard">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Creating deployment plans using the deployment plan wizard">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：使用部署计划向导创建部署计划</title>
  

  

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="creating-deployment-plans.html">创建部署计划</a> > <a href="creating-deployment-plans-using-the-deployment-plan-wizard.html">使用部署计划向导创建部署计划</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">使用部署计划向导创建部署计划</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645273"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645273">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645273"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645273">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645273"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645273">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>为了促进特定于Geronimo的部署计划的创建，现在提供了一个新的portlet。<parameter ac:name="atlassian-macro-output-type">排队</parameter><rich-text-body></rich-text-body></p><p>Geronimo管理控制台中提供的<strong>Plan Creator</strong>向导通过逐步执行一系列步骤来自动生成<code>geronimo-web.xml</code>给定的<strong>WAR</strong>文件。</p><p></p>

<p>向导将搜索在<code>web.xml</code>以及现在通过注释在代码本身中定义的内容。根据应用程序的类型，计划创建器向导将显示一系列页面，要求提供特定信息来解析引用和相关性。该向导还提供适用于大多数配置的默认值。</p>

<p>根据要部署的应用程序的类型，可能会为您提供六个单独的页面，以解决应用程序的特定配置。这些页面是（按顺序）：</p>

<ol><li>加载战争</li><li>战争-环境</li><li>WAR-参考</li><li>战争-安全</li><li>战争-依赖</li><li>创建计划和部署WAR</li></ol>


<p>本文档提供了一系列不同的示例应用程序，因此您可以更好地了解此向导的工作方式。本文档分为以下几节：</p>

<ul><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">＃支持的功能</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">带注释的样本</a>
	<ul><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JDBC访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">EJB访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JMS访问</a></li></ul>
	</li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">没有注释的样本</a>
	<ul><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JDBC访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">EJB访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JMS访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">安全配置</a></li></ul>
	</li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">＃附件</a></li></ul>


<h1 id="Creatingdeploymentplansusingthedeploymentplanwizard-Supportedfeatures">支持的功能</h1>
<p><strong>Plan Creator</strong>向导将帮助您为要部署的应用程序生成适当的部署计划。该向导当前可用于Web应用程序，并支持以下功能：</p>
<ul><li><strong>参考</strong> ：会自动发现在Web应用程序中声明的EJB，EJB本地，JDBC连接池，JMS连接工厂，JMS目标，JavaMail会话和Web服务引用，并要求用户通过列出他们所使用的服务器环境中的可用资源来对其进行解析。可以链接。</li><li>通过<strong>注解</strong>在Java类内部声明的上述引用类型也会被自动发现。</li><li><strong>安全性的</strong>简化配置。</li></ul>


<p>以下各节提供了具有不同功能的示例应用程序，因此您可以更好地理解向导的行为。</p>

<h1 id="Creatingdeploymentplansusingthedeploymentplanwizard-Samplewithannotationsannotations">带注释的样本<parameter ac:name="">注释</parameter></h1>

<p>附带了四个简单的应用程序，使您可以更好地了解部署Web应用程序时计划创建者向导的工作方式。</p>
<ul><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JDBC访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">EJB访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JMS访问</a></li></ul>


<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-JDBCaccessjdbc">JDBC访问<parameter ac:name="">jdbc</parameter></h2>

<p>该示例是一个使用批注的非常简单的数据库访问应用程序。在此示例中，我们在嵌入式Derby上创建了一个示例<strong>BankDB</strong>数据库以及一个数据库连接池。尽管我们不会在本节中介绍如何创建数据库或连接池，但仍在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">#Attachments</a>部分中提供一些SQL示例以生成所需的示例数据库。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestJDBCAccess.zip?version=1&modificationDate=1199867783000&api=v2" data-linked-resource-id="20873998" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Annotations-TestJDBCAccess.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/x-zip-compressed" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">Annotations-TestJDBCAccess.zip</a>文件提供了一个<code>BankDB.sql</code> ， <code>WebAppJDBCAccessAnnotations.war</code>这是我们将要部署的WAR以及生成的部署计划的样本<code>WebAppJDBCAccessAnnotations_generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p><code>WebAppJDBCAccessAnnotations.war</code>包括Servlet，JSP和基本<code>web.xml</code> 。以下摘录显示了向导已识别的注释部分，并且在部署应用程序时可能会提示您提供其他信息。</p>

<parameter ac:name="">java的</parameter> <parameter ac:name="title">摘自ListCustomers.java</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body>...导入javax.annotation。资源； .../ ** * Servlet的Servlet实现类：ListCustomers * * /公共类ListCustomers扩展了javax.servlet.http。HttpServlet实现javax.servlet。Servlet {@Resource（name =“ jdbc / MyDataSource”）私有数据源dataSource; ...
</plain-text-body>

<p>在服务器启动并运行时，使用Web浏览器访问Geronimo管理控制台，然后单击左侧菜单上的<strong>Plan Creator</strong> 。</p>

<p>浏览到<code>WebAppJDBCAccessAnnotations.war</code>您刚刚提取并单击<strong>Configure</strong> 。在出现的屏幕中，您将配置Web应用程序身份。您可能想要更改默认的建议值，但是在本例中，我们将接受默认值。单击<strong>下一步</strong> 。</p>

<p>在以下屏幕中，向导将标识所有需要解决的WAR参考。此屏幕上列出的参考是特定于此应用程序的。<em>JDBCRef</em>列显示了在中定义的资源名称<code>ListCustomers.java</code> 。看到<code>@Resource(name = "jdbc/MyDataSource")</code>从上面的摘录。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestJDBCAccess-Refs.jpg"></span></p>

<p>如前所述，在此示例中，我们创建了一个数据库连接池，称为<em>BankDB_Pool</em> 。现在，可以从<strong>JDBC Pools</strong>下拉菜单中选择适当的连接池，然后单击<strong>Next</strong> 。</p>

<p>以下屏幕列出了所有可用的模块，并允许您指定此WAR依赖的模块。该屏幕还提供了默认选择，在这种情况下，数据库连接池将已经被选择。接受默认值，然后单击“ <strong>下一步”</strong> 。对于大多数情况，默认值应足够。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestJDBCAccess-Deps.jpg"></span></p>

<p>最终配置页面显示生成的部署计划，并允许您进行任何其他编辑。以下示例显示了生成的部署计划。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">生成的部署计划</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppJDBCAccessAnnotations</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>war</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>console.dbpool</dep:groupid> <dep:artifactid>BankDB_Pool</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>rar</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppJDBCAccessAnnotations</context-root> <nam:resource-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>jdbc / MyDataSource</nam:ref-name> <nam:pattern><nam:groupid>console.dbpool</nam:groupid> <nam:artifactid>BankDB_Pool</nam:artifactid> <nam:version>1.0</nam:version> <nam:name>BankDB_Pool</nam:name></nam:pattern></nam:resource-ref></web-app><!--?xml--></plain-text-body>

<p>最后一步是实际部署并启动应用程序，单击<strong>Deploy WAR</strong> 。</p>

<p>您应该收到两条确认消息，说明该应用程序已成功部署并成功启动。<strong>Launch Web App</strong>链接会根据您先前定义的上下文根将您的浏览器直接带到您刚刚部署的应用程序。<strong>Finish</strong>链接使您再次进入Plan Creator Portlet，以开始部署新应用程序。</p>

<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-EJBaccessejb">EJB访问<parameter ac:name="">ejb</parameter></h2>

<p>此样本是访问会话EJB的简单Web应用程序。在部署Web应用程序之前，需要先部署JAR。在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">#Attachments</a>部分中，我们包含了测试此示例应用程序的部署所需的所有文件。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestEJBAccess.zip?version=1&modificationDate=1199867794000&api=v2" data-linked-resource-id="20873995" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Annotations-TestEJBAccess.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/x-zip-compressed" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">Annotations-TestEJBAccess.zip</a>文件提供了<code>CurrencyConverterEJB.jar</code>首先需要部署的<strong><code>WebAppEjbAccessAnnotations.war</code></strong>这是我们将要部署的WAR以及生成的部署计划的样本<code>WebAppEjbAccessAnnotations_generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p>在服务器启动并运行时，使用Web浏览器访问Geronimo管理控制台，然后单击左侧菜单上的<strong>Deploy New</strong> 。现在，我们将部署WAR必备JAR文件。</p>

<p>在“ <strong>存档：”</strong>字段上，浏览至<code>CurrencyConverterEJB.jar</code>您刚刚提取的文件，然后单击<strong>Install</strong> ，这将安装并启动JAR。您可以通过单击左侧菜单中的<strong>EJB JAR</strong>链接来验证此JAR的状态。它应该显示如下内容：</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestEJBAccess-PreReq.jpg"></span></p>

<p><strong><code>WebAppEjbAccessAnnotations.war</code></strong>包括Servlet，JSP和基本<code>web.xml</code> 。以下摘录显示了向导已识别的注释部分，并且在部署应用程序时可能会提示您提供其他信息。</p>

<parameter ac:name="">java的</parameter> <parameter ac:name="title">摘自ConverterHandler.java</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body>...公共类ConverterHandler扩展了javax.servlet.http。HttpServlet实现javax.servlet。Servlet {@EJB（name =“ ejb / Converter”）专用Converter转换器； ...
</plain-text-body>

<p>刚安装了必备JAR时，请单击左侧菜单上的<strong>Plan Creator</strong> ，以继续进行WAR安装。浏览到<code>WebAppEjbAccessAnnotations.war</code>您刚刚提取并单击<strong>Configure</strong> 。在出现的屏幕中，您将配置Web应用程序身份。您可能想要更改默认的建议值，但是在本例中，我们将接受默认值。单击<strong>下一步</strong> 。</p>

<p>在以下屏幕中，向导将标识所有需要解决的WAR参考。此屏幕上列出的参考是特定于此应用程序的。<strong>EJBRef</strong>列显示了在中定义的资源名称<code>ConverterHandler.java</code> 。看到<strong><code>@EJB(name = "ejb/Converter")</code></strong>从上面的摘录。</p>

<p>从“ <strong>部署</strong>的<strong>EJB”</strong>下拉菜单中选择您先前部署的JAR <strong><code>ConverterBean (default/CurrencyConverterEJB/1199912901187/jar)</code></strong>然后单击<strong>下一步</strong> 。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestEJBAccess-Refs.jpg"></span></p>

<p>以下屏幕列出了所有可用的模块，并允许您指定此WAR依赖的其他模块。该屏幕还提供了一个默认选择，在这种情况下，您先前部署的EJB JAR将已经被选择。接受默认值，然后单击“ <strong>下一步”</strong> 。对于大多数情况，默认值应足够。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestEJBAccess-Deps.jpg"></span></p>

<p>最终配置页面显示生成的部署计划，并允许您进行任何其他编辑。以下示例显示了生成的部署计划。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">生成的部署计划</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppEjbAccessAnnotations</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>默认</dep:groupid> <dep:artifactid>CurrencyConverterEJB</dep:artifactid> <dep:version>1199912901187</dep:version> <dep:type>jar</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppEjbAccessAnnotations</context-root> <nam:ejb-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>ejb /转换器</nam:ref-name> <nam:pattern><nam:groupid>默认</nam:groupid> <nam:artifactid>CurrencyConverterEJB</nam:artifactid> <nam:version>1199912901187</nam:version> <nam:name>ConverterBean</nam:name></nam:pattern></nam:ejb-ref></web-app><!--?xml--></plain-text-body>

<p>最后一步是实际部署并启动应用程序，单击<strong>Deploy WAR</strong> 。</p>

<p>您应该收到两条确认消息，说明该应用程序已成功部署并成功启动。<strong>Launch Web App</strong>链接会根据您先前定义的上下文根将您的浏览器直接带到您刚刚部署的应用程序。<strong>Finish</strong>将您带到Plan Creator Portlet，以开始部署新应用程序。</p>

<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-JMSaccessjms">JMS访问<parameter ac:name="">JMS</parameter></h2>
<p>这是一个访问JMS连接工厂和JMS目标的简单Web应用程序。<strong>生产者</strong> Servlet向JMS队列发送5条消息，而<strong>使用者</strong> Servlet从同一队列同步接收消息。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestJMSAccess.zip?version=1&modificationDate=1199867770000&api=v2" data-linked-resource-id="20874003" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Annotations-TestJMSAccess.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/x-zip" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">Annotations-TestJMSAccess.zip</a>文件提供了<strong><code>WebAppJMSAccessAnnotations.war</code></strong>这是我们将要部署的WAR以及生成的部署计划的样本<code>WebAppJMSAccessAnnotations_generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p><strong><code>WebAppJMSAccessAnnotations.war</code></strong>包括上面提到的两个Servlet，一个JSP和一个基本的web.xml。以下摘录显示了向导已识别的注释部分，并且在部署应用程序时可能会提示您提供其他信息。</p>

<parameter ac:name="">java的</parameter> <parameter ac:name="title">摘自ProducerServlet.java</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body>.../ ** * Servlet的Servlet实现类：ProducerServlet * * /公共类ProducerServlet扩展了javax.servlet.http。HttpServlet实现javax.servlet。Servlet {@Resource（name =“ jms / TestConnectionFactory”）私人ConnectionFactory connectionFactory; @Resource（name =“ jms / TestQueue”）私有队列队列； ...
</plain-text-body> <parameter ac:name="">java的</parameter> <parameter ac:name="title">摘自ConsumerServlet.java</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body>.../ ** * Servlet的Servlet实现类：ConsumerServlet * * /公共类ConsumerServlet扩展了javax.servlet.http。HttpServlet实现javax.servlet。Servlet {@Resource（name =“ jms / TestConnectionFactory”）私人ConnectionFactory connectionFactory; @Resource（name =“ jms / TestQueue”）私有队列队列； ...
</plain-text-body>

<p>在服务器启动并运行时，使用Web浏览器访问Geronimo管理控制台，然后单击左侧菜单上的<strong>Plan Creator</strong> 。</p>

<p>浏览到<code>WebAppJMSAccessAnnotations.war</code>您刚刚提取并单击<strong>Configure</strong> 。在出现的屏幕中，您将配置Web应用程序身份。您可能想要更改默认的建议值，但是在本例中，我们将接受默认值。单击<strong>下一步</strong> 。</p>

<p>在以下屏幕中，向导将标识所有需要解决的WAR参考。此屏幕上列出的参考是特定于此应用程序的。<strong>JMS Ref</strong>列显示了在上面显示的servlet中定义的资源名称。看到<strong><code>@Resource(name="jms/TestConnectionFactory")</code></strong>和<strong><code>@Resource(name="jms/TestQueue")</code></strong> 。下图显示了已经在Geronimo中定义的工厂和目的地，您可能要特别在运行此向导之前为应用程序定义自己的工厂和目的地。对于此示例，我们只接受默认值，然后单击<strong>Next</strong> 。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestJMSAccess-Refs.jpg"></span></p>

<p>以下屏幕列出了所有可用的模块，并允许您指定此WAR依赖的模块。该屏幕还提供了默认选择，在这种情况下，数据库连接池将已经被选择。接受默认值，然后单击“ <strong>下一步”</strong> 。对于大多数情况，默认值应足够。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/Annotations-TestJMSAccess-Deps.jpg"></span></p>

<p>最终配置页面显示生成的部署计划，并允许您进行任何其他编辑。以下示例显示了生成的部署计划。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">生成的部署计划</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppJMSAccessAnnotations</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>war</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>org.apache.geronimo.configs</dep:groupid> <dep:artifactid>activemq-ra</dep:artifactid> <dep:version>2.1-SNAPSHOT</dep:version> <dep:type>汽车</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppJMSAccessAnnotations</context-root> <nam:resource-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>jms / TestConnectionFactory</nam:ref-name> <nam:pattern><nam:groupid>org.apache.geronimo.configs</nam:groupid> <nam:artifactid>activemq-ra</nam:artifactid> <nam:version>2.1-SNAPSHOT</nam:version> <nam:name>DefaultActiveMgerConnectionimo</nam:name></nam:pattern></nam:resource-ref> <nam:resource-env-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>jms / TestQueue</nam:ref-name> <nam:pattern><nam:groupid>org.apache。配置</nam:groupid> <nam:artifactid>activemq-ra</nam:artifactid> <nam:version>2.1-SNAPSHOT</nam:version> <nam:name>MDBTransferBeanOutQueue</nam:name></nam:pattern></nam:resource-env-ref></web-app><!--?xml--></plain-text-body>

<p>最后一步是实际部署并启动应用程序，单击<strong>Deploy WAR</strong> 。</p>

<p>您应该收到两条确认消息，说明该应用程序已成功部署并成功启动。<strong>Launch Web App</strong>链接会根据您先前定义的上下文根将您的浏览器直接带到您刚刚部署的应用程序。<strong>Finish</strong>将您带到Plan Creator Portlet，以开始部署新应用程序。</p>

<p>到目前为止，我们已经向您展示了使用注释时部署Web应用程序有多么容易。下一节将重点介绍不使用注释的应用程序，这主要是针对基于先前J2EE规范的应用程序。</p>

<h1 id="Creatingdeploymentplansusingthedeploymentplanwizard-Samplewithoutannotationsnoannotations">不含注释的<parameter ac:name="">样本</parameter></h1>
<p>为了便于比较，我们提供了与上一节类似的应用程序集（JDBC，EJB和JMS），但是没有使用注释的优势。此外，我们还包括一个安全配置应用程序，以涵盖上一节中未介绍的其他功能。</p>

<ul><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JDBC访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">EJB访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">JMS访问</a></li><li><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">安全配置</a></li></ul>


<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-JDBCaccessjdbc2">JDBC访问<parameter ac:name="">jdbc2</parameter></h2>
<p>这基本上与我们在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">带有注释</a>的<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">示例</a>部分中使用的示例应用程序相同，但显然没有注释。在该示例中，我们再次创建了一个示例数据库和一个连接池。但是，本节重点放在<strong>web.xml</strong>文件上，该文件包含此应用程序运行所需的资源参考。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-TestJDBCAccess.zip?version=1&modificationDate=1199946082000&api=v2" data-linked-resource-id="20873993" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="noAnnotations-TestJDBCAccess.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/x-zip" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">noAnnotations-TestJDBCAccess.zip</a>文件提供了一个<code>BankDB.sql</code> ， <strong><code>WebAppJDBCAccess.war</code></strong>这是我们将要部署的WAR以及生成的部署计划的样本<code>generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p><strong><code>WebAppJDBCAccess.war</code></strong>包括Servlet，JSP和<code>web.xml</code> 。以下示例说明了<code>web.xml</code> ，在此示例中，Plan Creator向导将调查<strong><code><resource-ref></code></strong>部分。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">web.xml</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app id="WebApp_ID" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"><servlet><description></description> <display-name>ListCustomers</display-name> <servlet-name>ListCustomers</servlet-name> <servlet-class>myPackage。ListCustomers</servlet-class></servlet> <servlet-mapping><servlet-name>ListCustomers</servlet-name> <url-pattern>/ listCustomers</url-pattern></servlet-mapping> <resource-ref><res-ref-name>jdbc / MyDataSource</res-ref-name> <res-type>javax.sql。数据源</res-type> <res-auth>容器</res-auth> <res-sharing-scope>可共享</res-sharing-scope>
  </resource-ref>
</web-app>
<!--?xml--></plain-text-body>

<p>在服务器启动并运行时，使用Web浏览器访问Geronimo管理控制台，然后单击左侧菜单上的<strong>Plan Creator</strong> 。浏览到<code>WebAppJDBCAccess.war</code>您刚刚提取并单击<strong>Configure</strong> 。后续的配置页面与我们在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">带有注释</a>的<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">示例</a>部分中描述的页面相同，因此我们将跳过分步详细信息。最终结果是相同的，Plan Creator向导直接从提供的<strong>web.xml中</strong>生成了部署计划。为了便于比较，我们同时提供了两个生成的部署计划，请注意，只有<strong><code><artifactId></code></strong>和<strong><code><context-root></code></strong>为了使这些应用程序部署在同一服务器上时的唯一性而有所不同。</p>

<rich-text-body>
<rich-text-body><parameter ac:name="title">没有注解</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppJDBCAccess</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>console.dbpool</dep:groupid> <dep:artifactid>BankDB_Pool</dep:artifactid></dep:dependency></dep:dependencies></dep:environment></web-app><!--?xml--></plain-text-body> <parameter ac:name="width"><parameter ac:name="">50％XML</parameter></parameter> <parameter ac:name="title">生成的部署计划</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:dependencies><dep:dependency><dep:version>1.0</dep:version> <dep:type>RAR</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppJDBCAccess</context-root> <nam:resource-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>的jdbc / MyDataSource</nam:ref-name> <nam:pattern><nam:groupid>console.dbpool</nam:groupid> <nam:artifactid>BankDB_Pool</nam:artifactid> <nam:version>1.0</nam:version> <nam:name>BankDB_Pool</nam:name></nam:pattern></nam:resource-ref></web-app><!--?xml--></plain-text-body></rich-text-body> <rich-text-body><parameter ac:name="width"><parameter ac:name="">50％XML</parameter></parameter> <parameter ac:name="title">生成与批注</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppJDBCAccessAnnotations</dep:artifactid></dep:moduleid></dep:environment></web-app><!--?xml--></plain-text-body> <parameter ac:name="title">部署计划</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>console.dbpool</dep:groupid> <dep:artifactid>BankDB_Pool</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>RAR</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppJDBCAccessAnnotations</context-root> <nam:resource-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>JDBC / MyDataSource</nam:ref-name> <nam:pattern><nam:groupid>console.dbpool</nam:groupid> <nam:artifactid>BankDB_Pool</nam:artifactid> <nam:version>1.0</nam:version> <nam:name>BankDB_Pool</nam:name></nam:pattern></nam:resource-ref></web-app><!--?xml--></plain-text-body></rich-text-body></rich-text-body>

<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-EJBaccessejb2">EJB访问<parameter ac:name="">ejb2</parameter></h2>
<p>本示例基于我们在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">带有注释</a>的<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">示例</a>部分中使用的相同示例应用程序<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">，</a>但没有注释。在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">#Attachments</a>部分中，我们包含了测试此示例应用程序的部署所需的所有文件。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-TestEJBAccess.zip?version=1&modificationDate=1199946115000&api=v2" data-linked-resource-id="20873994" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="noAnnotations-TestEJBAccess.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/x-zip" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">noAnnotations-TestEJBAccess.zip</a>文件提供了<code>CurrencyConverterEJB.jar</code>首先需要部署的<strong><code>WebAppEjbAccess.war</code></strong>这是我们将要部署的WAR以及生成的部署计划的样本<code>generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p><strong><code>WebAppEjbAccess.war</code></strong>包括一个Servlet和<code>web.xml</code> 。在注释示例中，我们还提供了一个servlet，但是对于此示例，所有处理都直接由JSP完成。以下示例说明了<code>web.xml</code> ，在此示例中，Plan Creator向导将调查<strong><code><ejb-ref></code></strong>部分。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">web.xml</parameter> <parameter ac:name="borderStyle">实体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app id="WebApp_ID" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"><ejb-ref><ejb-ref-name>ejb / Converter</ejb-ref-name> <ejb-ref-type>会话</ejb-ref-type> <remote>myPackage。转换器</remote>
	</ejb-ref>
</web-app>
<!--?xml--></plain-text-body>

<p><strong><code>WebAppEjbAccess.war</code></strong>需要您首先部署EJB JAR。如果您在测试注释样本时还没有做任何事情，请确保立即部署它。在服务器启动并运行时，使用Web浏览器访问Geronimo Administration Console，然后单击左侧菜单上的<strong>Deploy New</strong> 。在“ <strong>存档：”</strong>字段上，浏览至<code>CurrencyConverterEJB.jar</code>您刚刚提取的文件，然后单击<strong>Install</strong> ，这将安装并启动JAR。</p>

<p>安装所需的EJB JAR之后，单击左侧菜单上的<strong>Plan Creator</strong> 。浏览到<code>WebAppEjbAccess.war</code>您刚刚提取并单击<strong>Configure</strong> 。后续的配置页面与我们在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">带有注释</a>的<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">示例</a>部分中描述的页面相同，因此我们将跳过分步详细信息。最终结果是相同的，Plan Creator向导直接从提供的<strong>web.xml中</strong>生成了部署计划。为了便于比较，我们同时提供了两个生成的部署计划，请注意，只有<strong><code><artifactId></code></strong>和<strong><code><context-root></code></strong>为了使这些应用程序部署在同一服务器上时的唯一性而有所不同。</p>

<rich-text-body>
<rich-text-body><parameter ac:name="title">没有注解</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppEjbAccess</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>默认</dep:groupid> <dep:artifactid>CurrencyConverterEJB</dep:artifactid> <dep:version>1199912901187</dep:version> <dep:type>罐子</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppEjbAccess</context-root> <nam:ejb-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>EJB /转换器</nam:ref-name> <nam:pattern><nam:groupid>默认</nam:groupid> <nam:artifactid>CurrencyConverterEJB</nam:artifactid> <nam:version>1199912901187</nam:version> <nam:name>ConverterBean</nam:name></nam:pattern></nam:ejb-ref></web-app><!--?xml--></plain-text-body></rich-text-body> <rich-text-body><parameter ac:name="width"><parameter ac:name="">50％XML</parameter></parameter> <parameter ac:name="title">生成的部署与批注</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppEjbAccessAnnotations</dep:artifactid></dep:moduleid></dep:environment></web-app><!--?xml--></plain-text-body> <parameter ac:name="title">计划</parameter></rich-text-body> <parameter ac:name="width">50％</parameter> <rich-text-body><parameter ac:name="">的XML</parameter> <parameter ac:name="title">生成的部署计划</parameter></rich-text-body> <rich-text-body><plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>默认</dep:groupid> <dep:artifactid>CurrencyConverterEJB</dep:artifactid> <dep:version>1199912901187</dep:version> <dep:type>罐子</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppEjbAccessAnnotations</context-root> <nam:ejb-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>EJB /转换器</nam:ref-name> <nam:pattern><nam:groupid>默认</nam:groupid> <nam:artifactid>CurrencyConverterEJB</nam:artifactid> <nam:version>1199912901187</nam:version> <nam:name>ConverterBean</nam:name></nam:pattern></nam:ejb-ref></web-app><!--?xml--></plain-text-body></rich-text-body></rich-text-body>

<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-JMSaccessjms2">JMS访问<parameter ac:name="">jms2</parameter></h2>
<p>我们再次基于此示例应用程序作为注释部分中使用的应用程序。有一个<strong>Producer</strong> Servlet，它向JMS队列发送5条消息，而<strong>Consumer</strong> Servlet，它从同一队列同步接收消息。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-TestJMSAccess.zip?version=1&modificationDate=1199947648000&api=v2" data-linked-resource-id="20873996" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="noAnnotations-TestJMSAccess.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/x-zip" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">noAnnotations-TestJMSAccess.zip</a>文件提供了<strong><code>WebAppJMSAccess.war</code></strong>这是我们将要部署的WAR以及生成的部署计划的样本<code>generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p><strong><code>WebAppJMSAccess.war</code></strong>包括上面提到的两个Servlet，一个JSP和一个<code>web.xml</code> 。以下示例说明了<code>web.xml</code> ，在此示例中，Plan Creator向导将调查<strong><code><resource-ref></code></strong> ， <strong><code><message-destination-ref></code></strong>和<strong><code><message-destination></code></strong>部分。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">web.xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"><display-name>WebAppJMSAccess</display-name> <servlet><description>
		</description> <display-name>ProducerServlet</display-name> <servlet-name>ProducerServlet</servlet-name> <servlet-class>com.apache.geronimo.samples.webAppJMSacess。ProducerServlet</servlet-class></servlet> <servlet><description>
		</description> <display-name>ConsumerServlet</display-name> <servlet-name>ConsumerServlet</servlet-name> <servlet-class>com.apache.geronimo.samples.webAppJMSacess。ConsumerServlet</servlet-class></servlet> <servlet-mapping><servlet-name>ProducerServlet</servlet-name> <url-pattern>/ producer</url-pattern></servlet-mapping> <servlet-mapping><servlet-name>ConsumerServlet</servlet-name> <url-pattern>/ consumer</url-pattern></servlet-mapping> <welcome-file-list><welcome-file>index.html</welcome-file> <welcome-file>index.htm</welcome-file> <welcome-file>index.jsp</welcome-file> <welcome-file>default.html</welcome-file> <welcome-file>default.htm</welcome-file> <welcome-file>default.jsp</welcome-file></welcome-file-list> <resource-ref><res-ref-name>jms / TestConnectionFactory</res-ref-name> <res-type>javax.jms。ConnectionFactory</res-type> <res-auth>容器</res-auth> <res-sharing-scope>可共享的</res-sharing-scope></resource-ref> <message-destination-ref><message-destination-ref-name>jms / TestQueue</message-destination-ref-name> <message-destination-type>javax.jms。队列</message-destination-type> <message-destination-usage>消耗产生</message-destination-usage> <message-destination-link>TestQueue</message-destination-link></message-destination-ref> <message-destination><message-destination-name>TestQueue</message-destination-name></message-destination>
</web-app>
<!--?xml--></plain-text-body>

<p>在服务器启动并运行时，使用Web浏览器访问Geronimo管理控制台，然后单击左侧菜单上的<strong>Plan Creator</strong> 。浏览到<code>WebAppJMSAccess.war</code>您刚刚提取并单击<strong>Configure</strong> 。后续的配置页面与我们在<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">带有注释</a>的<a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.html">示例</a>部分中描述的页面几乎相同，因此我们将跳过分步详细信息。最终结果是相同的，Plan Creator向导直接根据提供的内容生成了部署计划<code>web.xml</code> 。</p>

<p>我们再次并排提供了两个生成的部署计划，以方便比较。这两个示例应用程序略有不同，因此您可以在生成的部署计划中看到一些其他变化。</p>

<rich-text-body>
<rich-text-body><parameter ac:name="title">没有注解</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppJMSAccess</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>org.apache.geronimo.configs</dep:groupid></dep:dependency></dep:dependencies></dep:environment></web-app><!--?xml--></plain-text-body> <parameter ac:name="width"><parameter ac:name="">50％XML</parameter></parameter> <parameter ac:name="title">生成的部署计划</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:dependencies><dep:dependency><dep:artifactid>的ActiveMQ-RA</dep:artifactid> <dep:version>2.1快照</dep:version> <dep:type>车</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppJMSAccess</context-root> <nam:resource-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>JMS / TestConnectionFactory</nam:ref-name> <nam:pattern><nam:groupid>org.apache.geronimo.configs</nam:groupid> <nam:artifactid>ActiveMQ的-RA</nam:artifactid> <nam:version>2.1快照</nam:version> <nam:name>DefaultActiveMQConnectionFactory</nam:name></nam:pattern></nam:resource-ref> <nam:message-destination xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:message-destination-name>TestQueue</nam:message-destination-name> <nam:admin-object-link>MDBTransferBeanOutQueue</nam:admin-object-link></nam:message-destination></web-app><!--?xml--></plain-text-body></rich-text-body> <parameter ac:name="width">50％</parameter> <rich-text-body><parameter ac:name="">的xml</parameter> <parameter ac:name="title">与批注</parameter> <parameter ac:name="borderStyle">实</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>WebAppJMSAccessAnnotations</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>org.apache.geronimo.configs</dep:groupid> <dep:artifactid>ActiveMQ的-RA</dep:artifactid></dep:dependency></dep:dependencies></dep:environment></web-app><!--?xml--></plain-text-body> <parameter ac:name="title">生成的部署计划</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:dependencies><dep:dependency><dep:version>2.1快照</dep:version> <dep:type>车</dep:type></dep:dependency></dep:dependencies></dep:environment> <context-root>WebAppJMSAccessAnnotations</context-root> <nam:resource-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>JMS / TestConnectionFactory</nam:ref-name> <nam:pattern><nam:groupid>org.apache.geronimo.configs</nam:groupid> <nam:artifactid>ActiveMQ的-RA</nam:artifactid> <nam:version>2.1快照</nam:version> <nam:name>DefaultActiveMQConnectionFactory</nam:name></nam:pattern></nam:resource-ref> <nam:resource-env-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"><nam:ref-name>JMS / TestQueue</nam:ref-name> <nam:pattern><nam:groupid>org.apache.geronimo .configs</nam:groupid> <nam:artifactid>activemq-ra</nam:artifactid> <nam:version>2.1-SNAPSHOT</nam:version> <nam:name>MDBTransferBeanOutQueue</nam:name></nam:pattern></nam:resource-env-ref></web-app><!--?xml--></plain-text-body></rich-text-body></rich-text-body>

<h2 id="Creatingdeploymentplansusingthedeploymentplanwizard-Securityconfigurationsecurity2">安全配置<parameter ac:name="">安全性2</parameter></h2>
<p>此样本应用程序是使用Servlet，JSP和Java EE声明式安全性的基本时间报告系统。除上述功能外，它还使用Geronimo的嵌入式Derby数据库来存储系统的用户信息。即使此应用程序使用数据库来保存用户信息，也仅出于配置目的。该示例应用程序与<a shape="rect" href="https://cwiki.apache.org/confluence/display/GMOxDOC20">Geronimo v2.0文档中</a>介绍的应用程序略有不同。本文档的重点是计划创建器向导，因此我们将不详细介绍该应用程序的内部工作，有关更多详细信息，请参阅<a shape="rect" href="../GMOxDOC22/timereport-web-application-security-sample.html">Web应用程序安全性示例</a> 。</p>

<p><a shape="rect" href="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-TestSecuritySettings.zip?version=1&modificationDate=1243898309000&api=v2" data-linked-resource-id="20874007" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="noAnnotations-TestSecuritySettings.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645273" data-linked-resource-container-version="20">noAnnotations-TestSecuritySettings.zip</a>提供了许多SQL脚本和部署计划，以帮助设置安全性示例应用程序需要运行的环境。提供的文件是<code>1_TimeReportDB.sql</code> ， <code>2_dbPoolPlan.xml</code> ， <code>3_securityRealmPlan.xml</code> 。另外还有一个<code>0_Readme.txt</code>这是用于部署此示例应用程序的简要说明， <code>timereport.war</code>我们将要部署的应用程序以及生成的部署计划的示例<code>timereport_generatedPlan.xml</code> 。将zip文件下载并解压缩到方便的目录中。</p>

<p>在继续安全应用程序本身之前，我们需要使用提供的计划创建一些其他配置。</p>

<ol><li>在服务器启动并运行的情况下，访问Geronimo管理控制台，然后单击<strong>DB Manager</strong> 。通过名称<em>TimeReportDB</em>创建数据库并运行<code>1_TimeReportDB.sql</code>在这个新数据库上。</li><li>通过单击<strong>Deploy New</strong>创建数据库连接池并指定<code><geronimo_home>\repository\org\tranql\tranql-connector-ra\1.3\tranql-connector-ra-1.3.rar</code>作为<em>存档：</em>和<code>2_dbPoolPlan.xml</code>作为<em>计划</em> 。这将创建新的数据库池<strong>TimeReportPool</strong> 。</li><li>通过单击<strong>Deploy New</strong>并仅指定来创建新的安全领域<code>3_securityRealmPlan.xml</code>作为<em>计划</em> 。这将创建<strong>TimeReportRealm</strong>安全领域。</li></ol>


<p>现在我们已经配置了环境，我们回到应用程序。 <code>timereport.war</code>提供2个Servlet，几个JSP和<code>web.xml</code>我们将专注于。此外，该WAR还包含源代码和完整的Java文档。以下示例说明了<code>web.xml</code> ，这里定义了Plan Creator向导将用来生成Geronimo特定部署计划的所有安全约束，领域和角色。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">web.xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/j2ee
	 http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" version="2.4"><welcome-file-list><welcome-file>index.html</welcome-file></welcome-file-list> <security-constraint><web-resource-collection><web-resource-name>员工</web-resource-name> <url-pattern>/ employee / *</url-pattern></web-resource-collection> <auth-constraint><role-name>员工</role-name></auth-constraint></security-constraint> <security-constraint><web-resource-collection><web-resource-name>经理</web-resource-name> <url-pattern>/ manager / *</url-pattern></web-resource-collection> <auth-constraint><role-name>经理</role-name></auth-constraint></security-constraint> <login-config><auth-method>FORM</auth-method> <realm-name>TimeReportRealm</realm-name> <form-login-config><form-login-page>/login/login.jsp</form-login-page> <form-error-page>/login/login_error.jsp</form-error-page></form-login-config></login-config> <security-role><role-name>员工</role-name></security-role> <security-role><role-name>经理</role-name></security-role> <servlet><display-name>AddTimeRecordServlet</display-name> <servlet-name>AddTimeRecordServlet</servlet-name> <servlet-class>org.apache.geronimo.samples.timereport.web。AddTimeRecordServlet</servlet-class></servlet> <servlet><display-name>AddEmployeeServlet</display-name> <servlet-name>AddEmployeeServlet</servlet-name> <servlet-class>org.apache.geronimo.samples.timereport.web。AddEmployeeServlet</servlet-class></servlet> <servlet-mapping><servlet-name>AddTimeRecordServlet</servlet-name> <url-pattern>/ employee / add_timerecord</url-pattern></servlet-mapping> <servlet-mapping><servlet-name>AddEmployeeServlet</servlet-name> <url-pattern>/ manager / add_employee</url-pattern></servlet-mapping>
        
</web-app>
<!--?xml--></plain-text-body>

<ol><li>返回Geronimo管理控制台，单击<strong>Plan Creator</strong> 。浏览到<code>timereport.war</code>您刚刚提取并单击<strong>Configure</strong> 。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-Security-1.jpg"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在出现的屏幕中，您将配置Web应用程序身份。您可能想要更改默认的建议值，但是在本例中，我们将接受默认值。单击<strong>下一步</strong> 。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-Security-2.jpg"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>与其他示例应用程序不同，在本示例中，我们不必解析任何资源引用，因此该向导将直接跳转到配置的安全性部分。在出现的屏幕中，定义安全性配置。
	<ol><li>从“ <em>安全领域名称：”</em>下拉菜单中选择“ <strong>TimeReportRealm”</strong> 。这是您先前部署的安全领域。</li><li>对于安全角色<strong>员工，请</strong>从下拉菜单中选择<strong>添加</strong> -> <strong>负责人</strong> ，然后添加2个名称为<em>EmployeeGroup</em>和<em>ManagerGroup的</em> <strong>组</strong> <em>特权</em> 。</li><li>对于安全角色<strong>管理器</strong> ，选择“ <strong>添加”</strong> ->“ <strong>主体”，</strong>并添加名称为“ <em>ManagerGroup”的</em> 1 <strong>Group</strong> <em>Prinicipal</em> 。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-using-the-deployment-plan-wizard.data/noAnnotations-Security-3.jpg"></span><br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li></ol>
	</li><li>单击“ <strong>下一步”</strong> ，以下屏幕允许您选择WAR依赖项。此应用程序不依赖于这些模块，请单击“ <strong>下一步”</strong> 。</li><li>在“ <em>创建的计划”</em>屏幕中，您应该看到与此计划相似的计划。
<parameter ac:name="title">没有注解</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>timereport</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>战争</dep:type></dep:moduleid></dep:environment> <context-root>timereport</context-root> <security-realm-name>TimeReportRealm</security-realm-name></web-app><!--?xml--></plain-text-body> <parameter ac:name="">XML</parameter> <parameter ac:name="title">生成的部署计划</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"><app:security xsi:type="sec:securityType" xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" xmlns:app="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><sec:role-mappings><sec:role role-name="employee"><sec:principal name="EmployeeGroup" class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal"></sec:principal><sec:principal name="ManagerGroup" class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal"></sec:principal></sec:role> <sec:role role-name="manager"><sec:principal name="ManagerGroup" class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal"></sec:principal></sec:role></sec:role-mappings></app:security></web-app><!--?xml--></plain-text-body></li><li>单击“ <strong>部署WAR”</strong> ，然后单击“ <strong>启动Web应用程序”</strong>以运行示例应用程序。验证来自的<em>用户名</em>和<em>密码</em>值<code>1_TimeReportDB.sql</code> 。</li></ol>


<h1 id="Creatingdeploymentplansusingthedeploymentplanwizard-Attachments">附件</h1>
<parameter ac:name="patterns">。*压缩</parameter></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Creating deployment plans using the deployment plan wizard';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>