<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=1">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="deploy">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi deploy">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href="asset?aid=4" rel="stylesheet" type="text/css">
  <link href="asset?aid=5" rel="stylesheet" type="text/css">
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0文档：部署</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="reference.html">参考</a> > <a href="tools-and-commands.html">工具和命令</a> > <a href="deploy.html">部署</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">部署</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645495"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645495">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645495"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645495">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645495"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645495">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">
<p><strong>部署</strong>脚本用于安装，卸载，重新安装，启动和停止应用程序和模块，以及用于安装和卸载配置（例如某些特定于配置的部署计划，安全领域，数据库连接池等）。</p>

<h1><a shape="rect" name="deploy-Usage"></a>用法</h1>

<p>该命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; &lt;command&gt; &lt;command_options&gt;
</pre>
</div></div>
<p>哪里<em><general_options></general_options></em>指定适用于所有命令的通用选项，并控制应用程序的行为， <em><command></em>是一个命令名称，用于指定要执行的操作，并且<em><command_options></command_options></em>是指定命令唯一的选项。</p>

<p>也可以使用java -jar命令启动<strong>deploy</strong>命令：</p>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -Djava.endorsed.dirs=lib/endorsed -jar bin/deployer.jar &lt;general_options&gt; &lt;command&gt; &lt;command_options&gt;
</pre>
</div></div>

<h2><a shape="rect" name="deploy-Generaloptions"></a>常规选项</h2>

<p>本节列出了Geronimo部署程序工具的所有可用常规选项。</p>
<ul><li><strong>--uri</strong> <identifier><br clear="none">哪里<em><identifier></identifier></em>是通用资源标识符（URI），它指定部署者如何与服务器联系。如果未指定此标志，则部署者将尝试使用本地主机上的标准端口与服务器联系。标识符必须具有以下形式：<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deployer:geronimo:jmx:rmi:///jndi/rmi://host:port/JMXConnector
</pre>
</div></div>哪里<em><host></host></em>用服务器运行所在系统的主机名或TCP / IP地址<port>替换，并用服务器正在侦听的端口号替换。如果未指定，将使用localhost和默认端口。</port></identifier></li></ul>


<ul><li><strong>- 主办</strong> <host><br clear="none">哪里<em><host></host></em>是您尝试部署该应用程序或资源的服务器的主机名。此选项使您可以将资源和应用程序部署到远程服务器。此参数是可选的，默认为<geronimo_home>/var/config/config-substitutions.properties中定义为RemoteDeployHostname = localhost的localhost <geronimo_home>。如果要在其上启用远程部署，请将localhost更改为服务器的IP地址。</geronimo_home></geronimo_home></host></li></ul>


<ul><li><strong>- 港口</strong> <port><br clear="none">哪里<em><port></port></em>是您尝试部署该应用程序或资源的远程服务器的端口。此参数是可选的，默认为端口1099。</port></li></ul>


<ul><li><strong>-司机</strong> <driver_path><br clear="none">哪里<em><driver_path></driver_path></em>如果要将此工具与Geronimo以外的服务器一起使用，则为驱动程序JAR的路径。当前，该JAR中的清单类路径条目将被忽略。</driver_path></li></ul>


<ul><li><strong>- 用户</strong> <username><br clear="none">哪里<em><username></username></em>是被授权为服务器管理员的用户名。如果命令需要授权，则必须使用此选项。</username></li></ul>


<ul><li><strong>- 密码</strong> <password><br clear="none">哪里<em><password></password></em>是验证用户名所需的密码。如果未指定此标志，则部署程序将尝试不使用密码来执行命令，但是如果失败，它将提示您输入密码。</password></li></ul>


<ul><li><strong>- 安全</strong><br clear="none">使用安全通道与JMX服务器通信，有关详细信息，请参阅<a shape="rect" href="#deploy-Security">安全性</a> 。</li></ul>


<ul><li><strong>--syserr</strong> <select>
Where </select> can be either true or false. If this flag is unspecified. false is assumed. Specify true when you want errors to be logged to the syserr device.</li></ul>


<ul><li><strong>-详细</strong> <select>
Where </select> can be either true or false. If this flag is unspecified. false is assumed. Specify true when you need more messages to determine the cause of an error.</li></ul>


<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h2><a shape="rect" name="deploy-Security"></a>安全</h2>

<p>从Geronimo 2.1.2开始，部署程序工具可以使用安全通道（SSL / TLS）与JMX服务器通信以执行给定的操作。要启用安全通信，只需添加<strong>--secure</strong>选项。根据您的配置，您可能还需要指定一些Java安全性属性，以将JVM配置为使用正确的密钥库和密码。例如，在默认的Geronimo安装中，您可能需要设置以下内容（全部在一行中）：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>export JAVA_OPTS="-Djavax.net.ssl.trustStore=&lt;geronimo_home&gt;/var/security/keystores/geronimo-default -Djavax.net.ssl.trustStorePassword=secret"
</pre>
</div></div>

<p>设置该属性后，您可以执行以下命令（仅作为示例）：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>&lt;GERONIMO_HOME&gt;/bin/deploy -u system -p manager --secure list-modules
</pre>
</div></div>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>默认情况下，安全JMX服务器未运行。请参阅<a shape="rect" href="securing-rmi-port-of-geronimo.html" title="保护Geronimo的RMI端口">保护Geronimo的RMI端口以</a>获取更多信息。</p></div></div>
<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h2><a shape="rect" name="deploy-Sub-commands"></a>子指令</h2>

<p>下面列出了Geronimo部署程序工具的可用子命令：</p>
<ul><li>常用命令<ul><li><a shape="rect" href="#deploy-Deploy">部署</a></li><li><a shape="rect" href="#deploy-Login">登录</a></li><li><a shape="rect" href="#deploy-Redeploy">重新部署</a></li><li><a shape="rect" href="#deploy-Start">开始</a></li><li><a shape="rect" href="#deploy-Stop">停止</a></li><li><a shape="rect" href="#deploy-Undeploy">取消部署</a></li></ul>
	</li><li>其他命令<ul><li><a shape="rect" href="#deploy-Distribute">分发</a></li><li><a shape="rect" href="#deploy-Encrypt">加密</a></li><li><a shape="rect" href="#deploy-Install-library">安装库</a></li><li><a shape="rect" href="#deploy-List-modules">列表模块</a></li><li><a shape="rect" href="#deploy-List-targets">列出目标</a></li><li><a shape="rect" href="#deploy-UnlockKeystore">解锁密钥库</a></li></ul>
	</li><li>Geronimo插件<ul><li><a shape="rect" href="#deploy-Install-plugin">安装插件</a></li><li><a shape="rect" href="#deploy-Search-plugins">搜索插件</a></li></ul>
	</li><li>捆绑命令<ul><li><a shape="rect" href="#deploy-Install-bundle">安装捆绑</a></li><li><a shape="rect" href="#deploy-Uninstall-bundle">卸载捆绑</a></li></ul>
	</li></ul>


<p>此外，您可以键入<strong>帮助</strong>以获取有关给定命令的更多详细信息，语法如下：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy help &lt;command&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Deploy"></a>部署</h3>

<p>使用<strong>deploy</strong>命令添加并启动新模块。deploy命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; deploy &lt;module&gt; &lt;deployment_plan&gt;
</pre>
</div></div>

<p><module>指定应用程序文件名和位置。<deployment_plan>使用部署计划指定XML的文件名和位置。有时应用程序模块已经在软件包中包含了部署计划，或者应用程序是如此简单以至于不需要任何部署计划，在这种情况下，可以忽略此参数。</deployment_plan></module></p>

<p>模块文件可以是以下之一：</p>
<ul><li>J2EE企业应用程序归档文件（EAR）文件</li><li>J2EE Web应用程序存档（WAR）文件</li><li>J2EE Enterprise JavaBean存档（JAR）文件</li><li>J2EE Java资源存档（RAR）文件</li></ul>


<p>如果在部署应用程序时服务器当前未在运行，则该模块将标记为在下次启动服务器时启动。</p>

<p>最常见的<general_options>是--user和--password。--inPlace选项使您可以直接从Geornimo外部目录指向并部署应用程序，而无需打包应用程序。换句话说，您可以在Geronimo中<strong>运行</strong>一个应用程序，但是该应用程序可能在文件系统上的其他任何位置。</general_options></p>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>请注意，将应用程序部署到远程服务器时，不能使用--inPlace选项。</p></div></div>

<p>要使用此选项，您应该输入：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; deploy --inPlace &lt;APP_HOME&gt;
</pre>
</div></div>

<p>其中<app_home>表示您的应用程序所在的主目录（分解）。</app_home></p>

<p>如果Geronimo没有运行，也可以使用--offline选项部署应用程序，该命令的语法为：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; --offline deploy &lt;module&gt;
</pre>
</div></div>

<p>当然，您也可以将--offline和--inPlace结合使用</p>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; --offline deploy --inPlace &lt;APP_HOME&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Login"></a>登录</h3>

<p>使用<strong>login</strong>命令保存当前与文件连接的用户名和密码<code><strong>.geronimo-deployer</strong></code>在当前用户的主目录中。将来与同一服务器的连接将尝试使用此保存的身份验证信息，而不是在可能的情况下提示。</p>

<p>此信息将针对每个连接URL单独保存，因此您可以在命令行上指定--url或--host和/或--port，以将登录名保存到其他服务器。</p>

<p><strong>login</strong>命令具有以下语法：</p>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy --user &lt;user_name&gt; --password &lt;password&gt; login
</pre>
</div></div>

<p>因此，下一次您运行另一个原本需要用户名和密码的命令时，可以直接运行该命令，例如：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy list-modules
</pre>
</div></div>

<p>同样，使用<a shape="rect" href="shutdown.html" title="关掉">shutdown</a>命令关闭服务器时，也不必指定或重新输入用户名和密码。</p>

<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>即使登录信息未以明文形式保存，也不安全。如果要安全地保存身份验证，则应更改主目录中的.geronimo-deployer文件，以便其他任何人都无法读取或写入该文件。</p></div></div>
<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Redeploy"></a>重新部署</h3>

<p>使用<strong>redeploy</strong>命令停止，更换和重新启动之前已部署的模块。redeploy命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; redeploy -targets target&lt;module&gt; &lt;deployment_plan&gt;
</pre>
</div></div>

<p>就像<a shape="rect" href="#deploy-Deploy">deploy命令一样</a> ，redeploy命令接受以下模块文件类型：</p>
<ul><li>J2EE企业应用程序归档文件（EAR）文件</li><li>J2EE Web应用程序存档（WAR）文件</li><li>J2EE Enterprise JavaBean存档（JAR）文件</li><li>J2EE Java资源存档（RAR）文件</li></ul>


<p>通常，同时指定模块和计划。如果模块包含计划，或者可以使用默认计划，则可以忽略该计划。但是，如果在这种情况下指定了一个计划，它将覆盖其他计划。如果计划引用了已在服务器环境中部署的服务器组件，则将省略该模块。</p>

<p>仅将<strong>--targets</strong>选项用于群集重新部署。对于集群重新部署，可以使用deploy <a shape="rect" href="#deploy-deploy-Listtargetscommandandoptions" title="列表目标命令和选项">list-targets</a>命令找到目标。复制一个名称为<code>MasterConfigurationStore</code>并将其用作目标变量。<br clear="none">
<a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Start"></a>开始</h3>

<p>使用<strong>start</strong>命令启动以前部署的模块。start命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; start &lt;moduleIDs&gt;
</pre>
</div></div>

<p>其中<moduleids>是一个或多个以空格分隔的模块（configID）的列表。在各自的部署计划中，在部署时为先前部署的每个模块定义模块标识（或ConfigID）。</moduleids></p>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Stop"></a>停止</h3>

<p>使用<strong>stop</strong>命令停止正在运行的模块。stop命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; stop &lt;moduleIDs&gt;
</pre>
</div></div>

<p>其中<moduleids>是一个或多个以空格分隔的模块（configID）的列表。在各自的部署计划中，在部署时为先前部署的每个模块定义模块标识（或ConfigID）。</moduleids></p>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Undeploy"></a>取消部署</h3>

<p>使用<strong>undeploy</strong>命令从服务器中停止和删除模块（正在运行或未运行）及其部署信息。undeploy命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; undeploy &lt;moduleIDs&gt;
</pre>
</div></div>

<p>其中<moduleids>是一个或多个以空格分隔的模块（configID）的列表。在各自的部署计划中，在部署时为先前部署的每个模块定义模块标识（或ConfigID）。</moduleids></p>

<p>该命令与在服务器未运行时卸载应用程序的<strong>部署</strong>具有相同的功能，该命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; --offline undeploy &lt;moduleID&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Distribute"></a>分发</h3>

<p>使用<strong>distribute</strong>命令将新模块添加到服务器。此命令不会启动模块，也不会将其标记为将来启动。Distribution命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; distribute &lt;module&gt; &lt;deployment_plan&gt;
</pre>
</div></div>

<p>就像deploy命令一样， <module>指定应用程序文件名和位置。<deployment_plan>使用部署计划指定XML的文件名和位置。有时应用程序模块已经在软件包中包含了部署计划，或者应用程序是如此简单以至于不需要任何部署计划，在这种情况下，可以省略此参数。</deployment_plan></module></p>

<p>模块文件可以是以下之一：</p>
<ul><li>J2EE企业应用程序归档文件（EAR）文件</li><li>J2EE Web应用程序存档（WAR）文件</li><li>J2EE Enterprise JavaBean存档（JAR）文件</li><li>J2EE Java资源存档（RAR）文件</li></ul>


<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Encrypt"></a>加密</h3>

<p>使用<strong>crypto</strong>命令生成加密的字符串。此命令使用org.apache.geronimo.util。EncryptionManager并具有以下语法：</p>

<p><code><strong><geronimo_home>/bin/deploy <general_options> encrypt <string></strong></code></p>

<p><general_options>适用于所有命令的通用选项</general_options>在哪里<general_options>， <string>指定要加密的字符串。</string></general_options></p>

<p>当前，密码字符串是部署计划中的纯文本，例如EAR中的数据源或JMS部署计划。即使仅在部署过程中使用部署计划，而不在运行时使用部署计划，也可能将安全密码字符串存储为纯文本，这会带来安全问题。从Geronimo 2.1.5开始，用户可以使用crypto命令加密密码，并将加密后的字符串作为密码粘贴到部署计划中。</p>

<p>例子：</p>

<p>使用此语法来加密字符串<code>passw0rd</code>在活动服务器上，以便使用该服务器的加密设置</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --user myadmin --password mypassword encrypt passw0rd
</pre>
</div></div>

<p>在线加密结果：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
......
String to encrypt: passw0rd
Online encryption result:
{Simple}rO0ABXNyABlqYXZheC5jcnlwdG8uU2VhbGVkT2JqZWN0PjY9psO3VHACAARbAA1lbmNv
ZGVkUGFyYW1zdAACW0JbABBlbmNyeXB0ZWRDb250ZW50cQB+AAFMAAlwYXJhbXNBbGd0ABJMamF2YS9s
YW5nL1N0cmluZztMAAdzZWFsQWxncQB+AAJ4cHB1cgACW0Ks8xf4BghU4AIAAHhwAAAAEG2NoqXONCcU
GqfK0reVCpVwdAADQUVT
</pre>
</div></div>

<p>使用此语法脱机加密字符串passw0rd</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --offline encrypt passw0rd
</pre>
</div></div>

<p>离线加密结果：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
......
String to encrypt: passw0rd
Offline encryption result:
{Simple}rO0ABXNyABlqYXZheC5jcnlwdG8uU2VhbGVkT2JqZWN0PjY9psO3VHACAARbAA1lbmNv
ZGVkUGFyYW1zdAACW0JbABBlbmNyeXB0ZWRDb250ZW50cQB+AAFMAAlwYXJhbXNBbGd0ABJMamF2YS9s
YW5nL1N0cmluZztMAAdzZWFsQWxncQB+AAJ4cHB1cgACW0Ks8xf4BghU4AIAAHhwAAAAEG2NoqXONCcU
GqfK0reVCpVwdAADQUVT
</pre>
</div></div>

<p>注意：在线加密需要一个正在运行的服务器进行连接，并将使用该服务器的加密设置（例如加密密钥）进行加密。结果，加密的密码通常只能用于该特定服务器。脱机加密使用默认的加密设置，并且加密的密码可以被所有服务器使用。因此，离线加密不如在线加密安全。</p>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Install-library"></a>安装库</h3>

<p>使用<strong>install-library</strong>命令将<strong>库</strong>安装到服务器的存储库中。install-library命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; install-library --groupId groupName &lt;libraryFile&gt;
</pre>
</div></div>

<p>使用<strong>--groupId</strong>选项为库指定非默认的组ID。否则，将以名为<strong>default</strong>的组标识安装库文件。</p>

<p>例子：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy -u system -p manager install-library mylib-1.0.jar
</pre>
</div></div>

<p>该命令会将mylib-1.0.jar安装在<geronimo_home>/repository/default/mylib/1.0/mylib-1.0.jar</geronimo_home></p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy -u system -p manager install-library --groupId mygroup mylib-1.0.jar
</pre>
</div></div>

<p>该命令将在<geronimo_home>/repository/mygroup/mylib/1.0/mylib-1.0.jar中</geronimo_home>安装mylib-1.0.jar。</p>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-List-modules"></a>列表模块</h3>

<p>使用<strong>list-modules</strong>命令列出服务器上所有可用的模块，请注意，要运行此命令，服务器必须正在运行。list-modules命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; list-modules [--all|--started|--stopped]
</pre>
</div></div>

<ul><li>--all：默认情况下，未指定其他选项时使用。它将列出所有可用的模块。</li><li>--started：此选项将仅列出正在运行的模块。</li><li>--stopped：此选项将仅列出未运行的模块。</li></ul>


<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-List-targets"></a>列出目标</h3>

<p>使用<strong>list-targets</strong>命令列出您连接到的服务器已知的目标。list-targets命令具有以下语法：</p>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy &lt;general_options&gt; list-targets
</pre>
</div></div>

<p>对于Geronimo，每个配置存储都是一个单独的目标。Geronimo尚不支持将集群作为目标。</p>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-UnlockKeystore"></a>解锁密钥库</h3>

<p>使用<strong>unlockKeystore</strong>命令来解锁密钥库和私钥。unlockKeystore命令具有以下语法：</p>

<p><code><strong><geronimo_home>/bin/deploy <general_options> unlockKeystore <keyStoreName> <keyAlias1> <keyAlias2></strong></code></p>

<p>其中<keystorename>指定要解锁的锁定密钥库， <keyalias1>并<keyalias2>可选地用于指定要解锁的密钥库中的一个或多个锁定私钥。</keyalias2></keyalias1></keystorename></p>

<p>请注意，在使用unlockKeystore命令之前，需要确保将以下行添加到<geronimo_home>/var/config/config-substitutions.properties：</geronimo_home></p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;keyStoreName&gt;=&lt;keyStoreEncryptedPassword&gt;
&lt;keyAlias1&gt;=&lt;keyAlias1EncryptedPassword&gt;
&lt;keyAlias2&gt;=&lt;keyAlias1EncryptedPassword&gt;
...
</pre>
</div></div>

<p>哪里</p>
<ul><li><keystorename>是密钥库的名称。</keystorename></li><li><keystoreencryptedpassword>是密钥库的加密密码，可以使用<strong>crypto</strong>命令生成。将生成的加密密码复制并粘贴到<geronimo_home>/var/config/config-substitutions.properties时，加密密码字符串中不应包含空格。</geronimo_home></keystoreencryptedpassword></li><li><keyalias1>， <keyalias2>是密钥库中私钥的名称。</keyalias2></keyalias1></li><li><keyalias1encryptedpassword>， <keyalias2encryptedpassword>是私钥的加密密码，也可以通过使用crypto命令生成。</keyalias2encryptedpassword></keyalias1encryptedpassword></li></ul>


<p>或者，您可以创建一个密钥文件以包含密钥库的密码及其私钥。使用<code>org.apache.geronimo.keyStoreTrustStorePasswordFile</code>属性以指定密钥文件。有关更多详细说明，请参阅<a shape="rect" href="creating-your-keystorefile-for-ssl-authentication.html" title="创建用于SSL身份验证的密钥库文件">创建用于SSL身份验证的密钥库文件</a> 。</p>

<p>例子：</p>

<p>使用此语法来解锁名称为mykeystore的密钥库</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --user myadmin --password mypassword unlockKeystore mykeystore
</pre>
</div></div>

<p>使用此语法来解锁名称为mykeystore的密钥库和别名为key1的私钥</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
deploy --user myadmin --password mypassword unlockKeystore mykeystore key1
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Install-plugin"></a>安装插件</h3>

<p>使用<strong>install-plugin</strong>命令安装以前从Geronimo服务器导出或从存储库下载的Geronimo插件。Geronimo插件可以是应用程序，数据源和驱动程序之类的配置或组合。install-plugin命令具有以下语法：</p>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy install-plugin &lt;plugin_file&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-Search-plugins"></a>搜索插件</h3>

<p>使用<strong>search-plugins</strong>命令列出Maven存储库中所有可用的Geronimo插件。search-plugins命令具有以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy search-plugins &lt;maven_repository_URL&gt;
</pre>
</div></div>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" name="deploy-install-bundlecommandandoptions"></a> install-bundle命令和选项</h3>

<p>的<code>install-bundle</code>该命令将在服务器中安装并记录OSGi捆绑软件文件，以便即使在清理OSGi框架的缓存目录后也可以自动启动已安装的捆绑软件。使用以下语法：</p>

<div class="panel" style="border-style:solid;border-width:1px"><div class="panelContent">
<h6><a shape="rect" name="deploy-<font color=" black="black">部署<em>generalOptions</em> install-bundle --groupId <em>groupId</em> --startLevel <em>编号</em> {norender} <span class="error">[--start]</span> {norender}“></a> <font color="black">部署<em>generalOptions</em> install-bundle --groupId <em>groupId</em> --startLevel <em>number</em> {norender} <span class="error">[--start]</span> {norender}</font></h6>

<p>哪里</p>

<div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>常规选项</em></strong></p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>是适用于所有命令的<a shape="rect" href="#deploy-deploy" rel="nofollow">常用选项</a> 。请注意，您只能运行<code>install-bundle</code>本地服务器上的命令。</p></div>
<div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>groupId</em></strong></p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>（可选）用于指定已安装捆绑软件的groupId，默认值为<strong>default</strong> 。</p></div>
<div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>数</em></strong></p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>（可选）用于指定已安装捆绑软件的开始级别。默认值为60。</p></div>
<div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>- 开始</p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>指定是否自动启动已安装的捆绑软件。如果您未指定此参数，则捆绑软件将处于<strong>已解决</strong>状态。</p></div>
</div></div>

<p>在服务器存储库中，所有模块都存储在maven样式的结构目录中。安装OSGi捆绑软件后，其Maven工件名称为<em>groupId / Bundle-SymbolicName / Bundle-Version / jar</em> 。</p>

<p><a shape="rect" href="#deploy-top">回到顶部</a></p>

<h3><a shape="rect" id="deploy-Uninstallbundlecommandandoptions" name="deploy-Uninstall-bundlecommandandoptions<span class=" confluence-anchor-link="confluence-anchor-link">“></a> Uninstall-bundle命令和选项<span class="confluence-anchor-link" id="deploy-Uninstallbundlecommandandoptions"></span></h3>

<p>的<code>uninstall-bundle</code>命令停止并从服务器中删除OSGi捆绑软件及其部署信息，并使用以下语法：</p>

<div class="panel" style="border-style:solid;border-width:1px"><div class="panelContent">
<h6><a shape="rect" name="deploy-<font color=" black="black">部署<em>generalOptions</em>卸载捆绑包<em>bundleId</em> “></a> <font color="black">部署<em>generalOptions</em>卸载捆绑包<em>bundleId</em></font></h6>

<p>哪里</p>

<div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><strong><em>常规选项</em></strong></p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>是适用于所有命令的<a shape="rect" href="#deploy-deploy" rel="nofollow">常用选项</a> 。请注意，您只能运行<code>uninstall-bundle</code>本地服务器上的命令。</p></div><div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p></p><div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style></div>* <em>bundleId</em> *<p></p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>是要完全删除的OSGi捆绑软件的捆绑软件ID。</p></div>
</div></div>

<p><strong>注意：</strong> <code>uninstall-bundle</code>命令不支持</p>
<div class="error"><span class="error">未知的巨集：{norender}</span> <p>- 离线</p></div>
<p>选项。<br clear="none">
<a shape="rect" href="#deploy-top">回到顶部</a></p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : deploy';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>