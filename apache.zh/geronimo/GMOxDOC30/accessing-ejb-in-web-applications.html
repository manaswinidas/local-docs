<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Accessing EJB in Web applications" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Accessing EJB in Web applications" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0 Documentation: Accessing EJB in Web applications</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="developing.html">Developing</a>&nbsp;&gt;&nbsp;<a href="tutorials.html">Tutorials</a>&nbsp;&gt;&nbsp;<a href="developing-web-applications.html">Developing Web applications</a>&nbsp;&gt;&nbsp;<a href="accessing-ejb-in-web-applications.html">Accessing EJB in Web applications</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Accessing EJB in Web applications</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645267">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645267">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645267">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645267">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645267">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645267">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">
<p>To run this tutorial, as a minimum you will be required to have installed the following prerequisite software:</p>

<ol><li>Sun JDK 6.0+ (J2SE 1.6)</li><li>Eclipse IDE for Java EE Developers, which is platform specific</li><li>Apache Geronimo Eclipse Plugin 2.1.x</li><li>Apache Geronimo Server 2.1.x
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Geronimo version 2.1.x, Java 1.5 runtime, and Eclipse Ganymede are used is used in this tutorial but other versions can be used instead (e.g., Geronimo version 2.2, Java 1.6, Eclipse Europa)</p></div></div></li></ol>


<p>Details on installing eclipse are provided in the <a shape="rect" href="development-environment.html">Development environment</a> section. This tutorial is organized in the following sections:</p>
<style type="text/css">/*<![CDATA[*/
div.rbtoc1572612945439 {padding: 0px;}
div.rbtoc1572612945439 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1572612945439 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1572612945439">
<ul class="toc-indentation"><li><a shape="rect" href="#AccessingEJBinWebapplications-DefineanewGeronimoServerRuntime">Define a new Geronimo Server Runtime</a></li><li><a shape="rect" href="#AccessingEJBinWebapplications-CreatingaEJBProject">Creating a EJB Project</a></li><li><a shape="rect" href="#AccessingEJBinWebapplications-CreatingaDynamicWebProject">Creating a Dynamic Web Project</a></li><li><a shape="rect" href="#AccessingEJBinWebapplications-AddingcodetoEJBProject">Adding code to EJB Project</a></li><li><a shape="rect" href="#AccessingEJBinWebapplications-AddingcodetoWebProject">Adding code to Web Project</a></li><li><a shape="rect" href="#AccessingEJBinWebapplications-Somemoreconfigurations">Some more configurations</a></li><li><a shape="rect" href="#AccessingEJBinWebapplications-DeployandRun">Deploy and Run</a></li></ul>
</div>

<h1 id="AccessingEJBinWebapplications-DefineanewGeronimoServerRuntime">Define a new Geronimo Server Runtime </h1>
<ol><li>Launch Eclipse and Select <strong>New -&gt; Other -&gt; Server -&gt; Server</strong> and select <strong>Next</strong>. <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/NewServer1.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Select <strong>Apache -&gt; Apache Geronimo v2.1 Server</strong> and select <strong>Next</strong>. <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/NewServer2.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Specify the installation directory of an existing Geronimo server installation and select <strong>Finish</strong>. <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/NewServer3_updated.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Start the server in Eclipse from the <em>J2EE</em> perspective. <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/NewServer4.png"></span> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li></ol>


<h1 id="AccessingEJBinWebapplications-CreatingaEJBProject">Creating a EJB Project</h1>
<ol><li>Launch Eclipse and right click under the Project Explorer. Select <strong>New -&gt; EJB Project</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/CreateEJB.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Name the project as <em>CurrencyConvertEJB</em> and select <strong>Next</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
!<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/ganymede_CreateEJB3a.jpg"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Use the default values and select <strong>Finish</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/CreateEJB4.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> 
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/CreateEJB5.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> </li><li>Right click on <strong>ejbModule</strong> and select <strong>New -&gt; Interface</strong>. <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/CreateEJB6.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Name the package as <em>ejb</em> and the Interface as <em>Converter</em>. Select <strong>Finish</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/CreateEJB7.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Right click on <strong>ejb</strong> package and select <strong>New -&gt; Class</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/CreateEJB8.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Name the class as <em>ConverterBean</em> and select <strong>Finish</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li></ol>


<h1 id="AccessingEJBinWebapplications-CreatingaDynamicWebProject">Creating a Dynamic Web Project</h1>
<ol><li>Launch Eclipse. Select <strong>File -&gt; New -&gt; Project</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Select <strong>Web -&gt; Dynamic Web Project</strong>. Select <strong>Next</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj2.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>On the next screen, name the project as <em>WebEJB</em>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/ganymede_createproj3.jpg"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Select default values for all other fields. Finally select <strong>Finish</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj4.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Right click on <strong>WebContent</strong> and select <strong>New -&gt; JSP</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj5.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Name the JSP <em>index.jsp</em>. Select <strong>Next --&gt; Finish</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj6.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj7.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Right click on <strong>Java Resources</strong> and select <strong>New -&gt; Other</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj8.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> </li><li>Select <strong>Web -&gt; Servlet</strong>. Select <strong>Next</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj9.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Name the package as <em>webejb</em> and Servlet as <em>ConverterHandler</em>. Select <strong>Next -&gt; Finish</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj10.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> 
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/createproj11.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> </li></ol>


<h1 id="AccessingEJBinWebapplications-AddingcodetoEJBProject">Adding code to EJB Project</h1>
<ol><li>Add the following code to the interface <code>Converter.java</code>.
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>Converter.java</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
package ejb;

import java.math.BigDecimal;
import javax.ejb.Remote;

@Remote
public interface Converter {
	public BigDecimal dollarToRupees(BigDecimal dollars);

	public BigDecimal rupeesToEuro(BigDecimal rupees);
}
</pre>
</div></div>
Here the <strong>@Remote</strong> annotation is used to declare it as a Remote Interface.<br clear="none" class="atl-forced-newline"></li><li>Add the following code to the class <code>ConverterBean.java</code>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ConverterBean.java</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
package ejb;

import java.math.BigDecimal;
import javax.ejb.*;

@Stateless
public class ConverterBean implements Converter {
	private BigDecimal rupeeRate = new BigDecimal("40.58");
	private BigDecimal euroRate = new BigDecimal("0.018368");

	public BigDecimal dollarToRupees(BigDecimal dollars) {
		BigDecimal result = dollars.multiply(rupeeRate);
		return result.setScale(2, BigDecimal.ROUND_UP);
	}

	public BigDecimal rupeesToEuro(BigDecimal rupees) {
		BigDecimal result = rupees.multiply(euroRate);
		return result.setScale(2, BigDecimal.ROUND_UP);
	}
}
</pre>
</div></div>
Here the <strong>@Stateless</strong> annotation declares the POJO(Plain Old Java Object) as a Stateless session bean.<br clear="none">
This complete the EJB code.</li></ol>


<h1 id="AccessingEJBinWebapplications-AddingcodetoWebProject">Adding code to Web Project</h1>
<ol><li>Add the following code to <code>index.jsp</code>.
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>index.jsp</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Converter&lt;/title&gt;
&lt;/head&gt;

&lt;body bgcolor="white"&gt;
&lt;h1&gt;Converter&lt;/h1&gt;
&lt;hr&gt;
&lt;p&gt;Enter an amount to convert:&lt;/p&gt;
&lt;form method="get" action="index.jsp"&gt;
	&lt;input type="text" name="amount" size="25"&gt;&lt;br&gt;
	&lt;p&gt;
	&lt;input type="submit" value="Submit"&gt;

	&lt;input type="reset" value="Reset"&gt;
&lt;/form&gt;

&lt;jsp:include page="/ConverterHandler" /&gt;

&lt;/body&gt;
</pre>
</div></div></li></ol>


<ol><li>Add the following code to <em>ConverterHandler</em> servlet.
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ConverterHandler.java</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
package webejb;
import ejb.Converter;

import java.io.IOException;
import java.io.PrintWriter;
import java.math.BigDecimal;

import javax.ejb.EJB;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ConverterHandler extends javax.servlet.http.HttpServlet implements
		javax.servlet.Servlet {
	@EJB(name = "ejb/Converter")
	private Converter converter;

	protected void doGet(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		String amount = request.getParameter("amount");
		if (amount != null &amp;&amp; amount.length() &gt; 0) {
			BigDecimal d = new BigDecimal(amount);
			BigDecimal rupeeAmount = converter.dollarToRupees(d);
			out.println("&lt;p&gt;" + amount + " Dollars are " + rupeeAmount + " Rupees.&lt;p&gt;");
			BigDecimal euroAmount = converter.rupeesToEuro(rupeeAmount);
			out.println(amount + " Dollars are " + euroAmount + " Euro.");
		}
	}

	protected void doPost(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}
}
</pre>
</div></div>
<br clear="none" class="atl-forced-newline">
The <strong>@EJB(name = "ejb/Converter")</strong> injects the EJB into the servlet. This completes the code for Web project.</li></ol>


<h1 id="AccessingEJBinWebapplications-Somemoreconfigurations">Some more configurations</h1>

<ol><li>Modify the deployment plan that is <code>geronimo-web.xml</code> as follows:
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" 
xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2" 
xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" 
xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;

    &lt;sys:environment&gt;
        &lt;sys:moduleId&gt;
            &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
            &lt;sys:artifactId&gt;WebEJB&lt;/sys:artifactId&gt;
            &lt;sys:version&gt;1.0&lt;/sys:version&gt;
            &lt;sys:type&gt;car&lt;/sys:type&gt;
        &lt;/sys:moduleId&gt;
        &lt;sys:dependencies&gt;
            &lt;sys:dependency&gt;
                &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
                    &lt;sys:artifactId&gt;CurrencyConvertEJB&lt;/sys:artifactId&gt;
      		    &lt;sys:version&gt;1.0&lt;/sys:version&gt;
      		    &lt;sys:type&gt;car&lt;/sys:type&gt;
            &lt;/sys:dependency&gt;        
        &lt;/sys:dependencies&gt;
    &lt;/sys:environment&gt;

    &lt;context-root&gt;/WebEJB&lt;/context-root&gt;

    &lt;nam:ejb-ref xmlns:nam="http://geronimo.apache.org/xml/ns/naming-1.2"&gt;
        &lt;nam:ref-name&gt;ejb/Converter&lt;/nam:ref-name&gt;
        &lt;nam:pattern&gt;
            &lt;nam:groupId&gt;default&lt;/nam:groupId&gt;
            &lt;nam:artifactId&gt;CurrencyConvertEJB&lt;/nam:artifactId&gt;
            &lt;nam:version&gt;1.0&lt;/nam:version&gt;
            &lt;nam:name&gt;ConverterBean&lt;/nam:name&gt;
        &lt;/nam:pattern&gt;
    &lt;/nam:ejb-ref&gt;

&lt;/web-app&gt;
</pre>
</div></div>
We have added a dependencies element (i.e., <strong>&lt;dependencies&gt;</strong>) and an ejb reference element (i.e., <strong>&lt;ejb-ref&gt;</strong>) to <code>geronimo-web.xml</code>. This step is required to make our CurrencyConvertEJB visible to our web application.</li><li>Right-click on <strong>WebEJB</strong> project and select <strong>properties</strong>. Select <strong>Java Build Path -&gt; Projects</strong>. Click <strong>add</strong> and add <strong>CurrencyConvertEJB</strong>. This is required for the compilation of Client code. This is explained with the following screenshots.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/AddProj.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/AddProj1.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/AddProj2.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/AddProj3.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/AddProj4.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li></ol>


<h1 id="AccessingEJBinWebapplications-DeployandRun">Deploy and Run</h1>
<ol><li>Right click on the Geronimo server in the <em>J2EE</em> perspective and select <strong>Add and Remove Projects...</strong> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>There should be 2 projects in your workspace. Select <strong>Add All &gt;&gt;</strong> and then select <strong>Finish</strong>. <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/AddProjects.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li></ol>


<ol><li>Launch the browser in Eclipse (use the Globe icon at the top of the Eclipse main window) and run the application using <strong><a shape="rect" class="external-link" href="http://localhost:8080/WebEJB/" rel="nofollow">http://localhost:8080/WebEJB/</a></strong>. This will give the following page.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/RunInEclipse1.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>Give the amount as <strong>15</strong> and select <strong>Submit</strong>.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/RunInEclipse2.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"></li><li>This will convert the Dollar amount to Rupees and Euro.<br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="accessing-ejb-in-web-applications.data/RunInEclipse3.png"></span><br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> </li></ol></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Accessing EJB in Web applications';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
