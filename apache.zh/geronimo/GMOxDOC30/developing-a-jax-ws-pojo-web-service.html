<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Developing a JAX-WS POJO Web Service">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Developing a JAX-WS POJO Web Service">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：开发JAX-WS POJO Web服务</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="developing.html">开发</a> > <a href="tutorials.html">教程</a> > <a href="developing-web-services.html">开发Web服务</a> > <a href="developing-a-jax-ws-pojo-web-service.html">开发JAX-WS POJO Web服务</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">开发JAX-WS POJO Web服务</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645256"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645256">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645256"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645256">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645256"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645256">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>本教程将带您完成在Apache Geronimo中开发，部署和测试Web服务所需的步骤。完成本教程之后，您应该能够了解如何使用Eclipse开发环境在Apache Geronimo中开发简单的，与JAX-WS兼容的Web服务。</p>

<p>此应用程序有一个Java类，其中包含两个函数，一个将美元金额转换为卢比，另一个将卢比转换为欧元。我们将把这两种方法公开为已部署的Web服务提供的服务。</p>

<p>我们还将通过使用Eclipse中的<strong>Web服务资源管理器</strong>来测试已部署的<strong>Web服务</strong> 。</p>

<parameter ac:name="title">Web服务的类型</parameter> <rich-text-body>
<p>对于新用户，可以通过两种方式创建Web服务：</p>
<ul><li>自下而上的Web服务-从Java类创建Web服务。</li><li>自上而下的Web服务-从WSDL文档创建Web服务。</li></ul>


<p>本教程将帮助您从Java类创建自下而上的Web服务，该类将作为Servlet公开给客户端应用程序。</p></rich-text-body> 

<p>要运行本教程，至少需要您安装以下必备软件。</p>

<ol><li>Sun JDK 6.0+（J2SE 1.6）</li><li>面向特定平台的Java EE开发人员的Eclipse IDE</li><li>Apache Geronimo Eclipse插件2.1.x</li><li>Apache Geronimo服务器2.1.x <rich-text-body>
<p>在本教程中使用了Geronimo 2.1.x版，Java 1.5运行时和Eclipse Ganymede，但是可以使用其他版本（例如Geronimo 2.2版，Java 1.6，Eclipse Europa）</p></rich-text-body></li></ol>


<p><a shape="rect" href="development-environment.html">开发环境</a>部分中提供了有关安装Eclipse的详细信息。本教程将带您完成以下步骤：</p>
<parameter ac:name="maxLevel">2</parameter> <parameter ac:name="type">清单</parameter> <parameter ac:name="separator">管</parameter>

<h1 id="DevelopingaJAX-WSPOJOWebService-CreateaDynamicWebProjecttohosttheWebService">创建一个动态Web项目来承载Web服务</h1>

<ol><li>从Eclipse主菜单中，选择<strong>File-> New-> Other</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在“ <strong>新建”</strong>对话框中，选择“ <strong>Web->动态Web项目”</strong> ，然后单击“ <strong>下一步”</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>键入<strong>jaxws-converter</strong>作为<strong>项目名称</strong> ，然后单击<strong>下一步</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>确保选中了复选框<strong>Generate Deployment Descriptor</strong> ，然后单击<strong>Next</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在<strong>Geronimo部署页面上，</strong>将<strong>组ID</strong>修改为<strong>org.apache.geronimo.samples.jaxws</strong> ，并将<strong>工件ID修改</strong>为<strong>jaxws-converter</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>点击<strong>完成</strong></li></ol>


<h1 id="DevelopingaJAX-WSPOJOWebService-AddthePOJOInterfaceandClassthatimplementstheWebService">添加实现Web服务的POJO接口和类</h1>

<ol><li>在<strong>Project Explorer</strong>视图中，展开<strong>jaxws-converter</strong>项目，右键单击<strong>Java Resources：src</strong>并选择<strong>New-> Package</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将<strong>org.apache.geronimo.samples.jaxws</strong>指定为软件包名称，然后单击<strong>Finish</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>右键单击新软件包，然后选择“ <strong>新建->接口”</strong> 。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将接口命名为<strong>Converter</strong> ，然后单击<strong>Finish</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将以下代码添加到<strong>Converter</strong>接口： <parameter ac:name="borderStyle">固态</parameter> <parameter ac:name="title">Converter.java</parameter> <plain-text-body>包org.apache.geronimo.samples.jaxws;导入java.math。BigDecimal;导入javax.jws。网络服务; @WebService（name =“ ConverterPortType”，targetNamespace =“ http://jaxws.samples.geronimo.apache.org”）公共接口转换器{public BigDecimal dollarToRupees（BigDecimal dollars）; public BigDecimal rupeesToEuro（BigDecimal rupees）; }</plain-text-body></li><li>右键单击新包，然后选择“ <strong>新建->类”</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将类命名为<strong>ConverterService</strong> ，添加<strong>org.apache.geronimo.samples.jaxws。Converter</strong>作为界面，然后单击<strong>Finish</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将以下代码添加到<strong>ConverterService</strong>类： <parameter ac:name="borderStyle">固态</parameter> <parameter ac:name="title">ConverterService.java</parameter> <plain-text-body>包org.apache.geronimo.samples.jaxws;导入java.math。BigDecimal;导入javax.jws。网络服务; @WebService（serviceName =“ Converter”，portName =“ ConverterPort”，endpointInterface =“ org.apache.geronimo.samples.jaxws。Converter“，targetNamespace =” http://jaxws.samples.geronimo.apache.org“）公共类ConverterService实现Converter {private BigDecimal rupeeRate = new BigDecimal（” 40.58“）; private BigDecimal euroRate = new BigDecimal（” 0.018368“） ; public BigDecimal dollarToRupees（BigDecimal dollars）{BigDecimal result = dollars.multiply（rupeeRate）; return result.setScale（2，BigDecimal。围捕）; }公开BigDecimal rupeesToEuro（BigDecimal rupees）{BigDecimal结果= rupees.multiply（euroRate）;返回result.setScale（2，BigDecimal。围捕）; }}</plain-text-body></li><li>让我们尝试了解每个注释：<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li></ol>
<ul><li><strong>@WebService-</strong>此注释可以与Java类以及接口一起使用。在我们的案例中，我们将其与接口以及POJO一起使用。该注释将POJO声明为WebService。@WebService批注用于生成WSDL文件。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
	<ul><li><strong>serviceName</strong>与WSDL元素服务相同</li><li><strong>名称</strong>与WSDL元素相同<strong><porttype name=""></porttype></strong></li><li><strong>endpointInterface</strong>指定了服务端点接口（SEI）的类名称。</li><li><strong>portName</strong>是元素portName</li><li><strong>targetNamespace</strong>是WSDL的XML名称空间，也是从WebService生成的一些XML元素<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li></ul>
	</li><li><strong>@WebMethod-</strong>此注释应用于一种方法，以将其公开为WebService方法。如果您有多个方法，则可以使用此批注将方法选择性地公开为WebService方法。如果不使用此批注，则所有公共方法都将公开为WebService。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li><strong>@WebParam-</strong>此注释与@WebMethod注释一起使用以定义WebService。它用于定制WSDL消息部分中使用的参数。</li></ul>


<h1 id="DevelopingaJAX-WSPOJOWebService-ExposetheWebServiceasaServletinweb.xml">在web.xml中将Web服务公开为Servlet</h1>

<ol><li>在<strong>Project Explorer</strong>视图中，双击<strong>jaxws-converter-> WebContent-> WEB-INF-> web.xml</strong>在编辑器中将其打开并添加以下内容<strong><servlet></servlet></strong>和<strong><servlet-mapping></servlet-mapping></strong>里面的元素。<br class="atl-forced-newline" clear="none">
<parameter ac:name="">xml</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app id="WebApp_ID" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"><display-name>jaxws-converter</display-name> <servlet><display-name>转换</display-name> <servlet-name>器</servlet-name> <display-name>转换</display-name> <servlet-name>器</servlet-name> <servlet-class>org.apache.geronimo.samples.jaxws。ConverterService</servlet-class></servlet> <servlet-mapping><servlet-name>转换器</servlet-name> <url-pattern>/转换器</url-pattern></servlet-mapping>

</web-app>
<!--?xml--></plain-text-body></li></ol>


<h1 id="DevelopingaJAX-WSPOJOWebService-DeploytheWebService">部署Web服务</h1>

<ol><li>在“ <strong>服务器”</strong>视图中，右键单击“ <strong>Apache Geronimo Server运行时”，</strong>然后选择“ <strong>添加和删除项目”</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在弹出对话框中，选择<strong>jaxws-converter</strong>项目，单击<strong>添加</strong> ，然后单击<strong>完成</strong> 。如果Geronimo服务器尚未运行，请启动它。现在将部署Web Service，并且Geronimo将创建所需的WSDL和其他所需的工件。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>一旦将Web Service部署到服务器上（“服务器状态”显示为<strong>Synchronized</strong> ），请启动浏览器并转到以下URL：<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
<a shape="rect" class="external-link" href="http://localhost:8080/jaxws-converter/converter" rel="nofollow">http：// localhost：8080 / jaxws-converter / converter</a> 。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">您应该看到来自Axis2引擎的消息，如下所示：<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-a-jax-ws-pojo-web-service.data/axis2msg.gif"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>您还可以通过转到以下URL查看Geronimo生成的WSDL文件：<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
<a shape="rect" class="external-link" href="http://localhost:8080/jaxws-converter/converter?wsdl" rel="nofollow">http：// localhost：8080 / jaxws-converter / converter？wsdl</a>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none">
<parameter ac:name="title">Geronimo生成的文件</parameter> <rich-text-body>
<p>Geronimo处理源文件中的注释，并自动生成所需的工件以部署Web Service。</p>

<p>您可以在目录<strong><install_dir>/repository/org/apache/geronimo/samples/jaxws/jaxws-converter/1.0/jaxws-converter-1.0.car/中</install_dir></strong>看到Geronimo创建的文件。在此位置，您可以找到Geronimo创建的用于部署Web服务的新目录，其中包含WSDL文件和其他必需的存根。</p></rich-text-body></li></ol>


<parameter ac:name="title">Geronimo如何创建WSDL和其他必需的文件？</parameter><rich-text-body>
<p>Geronimo有一个名为<strong>jaxws-tools</strong>的内置插件，该插件提供用于生成WSDL和JAX-WS Web服务中使用的其他必要文件的工具。该插件依赖于Sun的<strong>wsgen</strong>和<strong>wsimport</strong>工具来生成Web服务工件。请参阅<a shape="rect" class="external-link" href="http://java.sun.com/webservices/docs/2.0/jaxws/wsgen.html" rel="nofollow">wsgen</a>或<a shape="rect" class="external-link" href="http://java.sun.com/webservices/docs/2.0/jaxws/wsimport.html" rel="nofollow">wsimport</a>文档以获取更多信息。</p></rich-text-body>

<h1 id="DevelopingaJAX-WSPOJOWebService-TesttheWebServiceusingEclipseWebServicesExplorer">使用Eclipse Web Services Explorer测试Web Service</h1>

<ol><li>从Eclipse的主菜单中，单击<strong>运行->启动Web服务资源管理器</strong> 。<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li><strong>Web Services Explorer</strong>将打开，如下所示：<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-a-jax-ws-pojo-web-service.data/eclipsewse.gif"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> </li><li>在此资源管理器的右上角，单击<strong>WSDL Page</strong>的图标。在<strong>导航</strong>框架下，您现在将看到<strong>WSDL Main</strong> （而不是<strong>UDDI Main</strong> ）。单击该<strong>WSDL Main</strong>链接，然后<strong>Actions</strong>框架将显示如下形式：<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-a-jax-ws-pojo-web-service.data/wsdlmain.gif"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在表单中输入WSDL文档的URL，即<a shape="rect" class="external-link" href="http://localhost:8080/jaxws-converter/converter?wsdl" rel="nofollow">http：// localhost：8080 / jaxws-converter / converter？wsdl</a> ，然后单击<strong>Go</strong> 。现在，您可以看到Web服务公开的方法。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-a-jax-ws-pojo-web-service.data/wsoperations.gif"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>单击任何方法都将带您进入要求输入参数的表格。如果您看不到要输入输入参数的任何字段，请单击<strong>添加</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-a-jax-ws-pojo-web-service.data/invokeoperation.gif"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>输入输入参数，然后单击<strong>Go</strong> 。您可以在底部的状态框中看到Web服务的输出。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-a-jax-ws-pojo-web-service.data/operationresult.gif"></span> <br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li></ol>


<p>这样就完成了将Web服务部署到Geronimo并对其进行测试的过程。您还可以参考以下教程，为已部署在Geronimo上的Web服务开发实际的客户<a shape="rect" href="developing-clients-for-a-jax-ws-web-service.html">端，为JAX-WS Web Service开发客户端</a> 。</p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Developing a JAX-WS POJO Web Service';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>