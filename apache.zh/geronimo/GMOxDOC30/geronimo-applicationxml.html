<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="geronimo-application.xml" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi geronimo-application.xml" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: geronimo-application.xml</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans.html">Creating deployment plans</a>&nbsp;&gt;&nbsp;<a href="understanding-deployment-plans.html">Understanding deployment plans</a>&nbsp;&gt;&nbsp;<a href="geronimo-applicationxml.html">geronimo-application.xml</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">geronimo-application.xml</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645406">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645406">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645406">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645406">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645406">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645406">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>


<h1 id="geronimo-application.xml-Overview">Overview</h1>
<p><parameter ac:name="atlassian-macro-output-type">INLINE</parameter><rich-text-body><p>The Geronimo deployment plan for an enterprise application, which is usually packaged as a EAR file, is called "<strong>geronimo-application.xml</strong>".</p></rich-text-body> The <strong>geronimo-application.xml</strong> deployment plan is used in conjunction with the <strong>application.xml</strong> JAVA EE deployment plan to deploy enterprise applications consisting of Web Application WAR(s), EJB JAR(s), client application JAR(s), JCA connector JAR(s), and resource adapter module RAR(s) to the Geronimo application server.  The <strong>geronimo-application.xml</strong> deployment plan is an optional file, but is typically used when deploying an EAR file.  It is used to specify a moduleId for the deployed module, any third party dependencies, security options, and services.</p>

<h2 id="geronimo-application.xml-Packaging">Packaging</h2>
<p>The <strong>geronimo-application.xml</strong> deployment plan can be packaged as follows:</p>
<ol><li>Embedded in an EAR file. In this case, a <strong>geronimo-application.xml</strong> file must be placed in the <strong>/META-INF</strong> directory of the EAR, which is the same place where the <strong>application.xml</strong> file must be located.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>Maintained separately from the EAR file. In this case, the path to the file must be provided to the appropriate Geronimo deployer (e.g., command-line or console). Note that in this case, the filename can be named something other than <strong>geronimo-application.xml</strong> but must adhere to the same schema.</li></ol>


<h1 id="geronimo-application.xml-Schema">Schema</h1>
<p>The <strong>geronimo-application.xml</strong> deployment plan is defined by the <strong>geronimo-application-2.0.xsd</strong> schema located in the <strong>&lt;geronimo_home&gt;/schema/</strong> subdirectory of the main Geronimo installation directory. The <strong>geronimo-application-2.0.xsd</strong> schema is briefly described here:</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html">http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html</a></p>

<h2 id="geronimo-application.xml-Schematop-levelelements">Schema top-level elements</h2>
<p>The root XML element in the <strong>geronimo-application-2.0.xsd</strong> schema is the <strong>&lt;application&gt;</strong> element. The top-level XML elements of the <strong>&lt;application&gt;</strong> root element are described in the sections below. The deployment plan should always use the Web application namespace, and it typically requires elements from Geronimo System and Geronimo Security namespaces. Additionally, it has an attribute to identify its name. A typical deployment for <strong>geronimo-application.xml</strong> can be presented as follows:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="borderStyle">solid</parameter><parameter ac:name="title">geronimo-application.xml Example</parameter><plain-text-body>
&lt;app:application xmlns:app="http://geronimo.apache.org/xml/ns/j2ee/application-2.0"
             xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"
             xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0"
             application-name="SampleApplicationName"&gt; 
             ...
&lt;/app:application&gt;

</plain-text-body>

<h3 id="geronimo-application.xml-&lt;sys:environment&gt;">&lt;sys:environment&gt;</h3>
<p>The <strong>&lt;sys:environment&gt;</strong> XML element uses the Geronimo System namespace, which is used to specify the common elements for common libraries and module-scoped services, and is described here: </p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-2.1/docs/geronimo-module-1.2.xsd.html">http://geronimo.apache.org/schemas-2.1/docs/geronimo-module-1.2.xsd.html</a></li></ul>


<p>The <strong>&lt;sys:environment&gt;</strong> element contains the following elements:</p>

<ul><li>The <strong>&lt;moduleId&gt;</strong> element is used to provide the configuration name for the web application as deployed in the Geronimo server. It contains elements for the <strong>groupId</strong>, <strong>artifactId</strong>, <strong>version</strong> and module <strong>type</strong>. Module IDs are normally printed with slashes between the four components, such as <strong>GroupID/ArtifactID/Version/Type</strong>.
<br clear="none" class="atl-forced-newline"> 
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;dependencies&gt;</strong> element is used to provide the configurations and third party libraries on which the web module is dependent upon. These configurations and libraries are made available to the web module via the Geronimo classloader hierarchy.
<br clear="none" class="atl-forced-newline"> 
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;hidden-classes&gt;</strong> element can be used to provide some degree of control of the Geronimo classloader hierarchy, and mitigate clashes between classes loaded by the server and classes loaded by the web application. It is used to lists packages or classes that may be in a parent classloader, but must not be exposed to the web application. Since Geronimo is entirely open-source and utilizes many other open-source libraries it is possible that the server itself and the web application may have different requirements and/or priorities for the same open source project libraries. The <strong>&lt;hidden-classes&gt;</strong> element is typically used when the web application has requirements for a specific version of a library that is different than the version used by Geronimo itself. A simple example of this is when a web application uses, and most importantly includes,  a version of the <strong>Log4J</strong> common logging library that is different than the version used by the Geronimo server itself. This might not provide the desired results.  Thus, the <strong>&lt;hidden-classes&gt;</strong> element can be used to "hide" the Log4J classes loaded by all the parent classloaders of the web application module, including those loaded by and for the Geronimo server itself, and only the Log4J classes included with the web application library will get loaded.
<br clear="none" class="atl-forced-newline"> 
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;non-overridable-classes&gt;</strong> element can also be used to provide some degree of control of the Geronimo classloader hierarchy, but in the exact opposite manner than provided by the <strong>&lt;hidden-classes&gt;</strong> element. This element can be used to specify a list of classes or packages which will <strong>only</strong> be loaded from the parent classloader of the web application module to ensure that the Geronimo server's version of a libary is used instead of the version included with the web application.
<br clear="none" class="atl-forced-newline"> 
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;inverse-classloading&gt;</strong> element can be used to specify that standard classloader delegation is to be reversed for this module. The Geronimo classloader delegation follows the Java EE 5 specifications, and the normal behavior is to load classes from a parent classloader (if available) before checking the current classloader. When the <strong>&lt;inverse-classloading&gt;</strong> element is used, this behavior is reversed and the current classloader will always be checked before looking in the parent classloader(s). This element is similar to the <strong>&lt;hidden-classes&gt;</strong> element since the desired behavior is to give the libraries packaged with the web application (i.e., in WEB-INF/lib) precedence over anything used by the Geroimo server itself.
<br clear="none" class="atl-forced-newline"> 
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;suppress-default-environment&gt;</strong> element can be used to suppress inheritance of environment by module (i.e., any default environment built by a Geronimo builder when deploying the plan will be suppressed). If the <strong>&lt;suppress-default-environment&gt;</strong> element is specified then any default environment built by a builder when deploying the plan will be suppressed. An example of where this is useful is when deploying a connector on an app client in a separate (standalone) module (not as part of a client plan). The connector builder defaultEnvironment includes some server modules that won't work on an app client, so you need to suppress the default environment and supply a complete environment including all parents for a non-app-client module you want to run on an app client. This element should not be used for applications however.</li></ul>


<p>An example <strong>geronimo-application.xml file</strong> is shown below using the <strong>&lt;sys:environment&gt;</strong> elements:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;sys:environment&gt; example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;app:application
  xmlns:conn="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2"
  xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"
  xmlns:app="http://geronimo.apache.org/xml/ns/j2ee/application-2.0"
  application-name="SampleEAR"&gt;

    &lt;dep:environment&gt;

        &lt;dep:moduleId&gt;
            &lt;dep:groupId&gt;sampleear&lt;/dep:groupId&gt;
            &lt;dep:artifactId&gt;sample-ear&lt;/dep:artifactId&gt;
            &lt;dep:version&gt;1.0&lt;/dep:version&gt;
            &lt;dep:type&gt;ear&lt;/dep:type&gt;
        &lt;/dep:moduleId&gt;

        &lt;dep:dependencies&gt;
            &lt;dep:dependency&gt;
                &lt;dep:groupId&gt;org.apache.geronimo.configs&lt;/dep:groupId&gt;
                &lt;dep:artifactId&gt;tomcat6&lt;/dep:artifactId&gt;
                &lt;dep:version&gt;2.2-SNAPSHOT&lt;/dep:version&gt;
                &lt;dep:type&gt;car&lt;/dep:type&gt;
            &lt;/dep:dependency&gt;

            &lt;dep:dependency&gt;
                &lt;dep:groupId&gt;default&lt;/dep:groupId&gt;
                &lt;dep:artifactId&gt;geronim-web-4&lt;/dep:artifactId&gt;
                &lt;dep:version&gt;1.0&lt;/dep:version&gt;
                &lt;dep:type&gt;car&lt;/dep:type&gt;
            &lt;/dep:dependency&gt;
        &lt;/dep:dependencies&gt;

    &lt;/dep:environment&gt;

&lt;/app:application&gt;
</plain-text-body> 

<h3 id="geronimo-application.xml-&lt;module&gt;">&lt;module&gt;</h3>
<p>The <strong>&lt;module&gt;</strong> uses the Geronimo default namespace for a geronimo-application.xml file that is described here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html">http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html</a></li></ul>


<p>This element is used to define a single Java EE module and contains one of the following elements to identify the module:</p>
<ul><li><strong>&lt;connector&gt;</strong> holds the location of a Java EE Connector module. Must match the same element in <strong>application.xml</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;ejb&gt;</strong> holds the location of an EJB module. Must match the same element in <strong>application.xml</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;java&gt;</strong> holds the location of a client application module. Must match the same element in <strong>application.xml</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;web&gt;</strong> holds the location of a web application module. Must match <strong>&lt;web-uri&gt;</strong> in <strong>application.xml</strong>.</li></ul>


<p>The &lt;module&gt; element also contains an optional &lt;alt-dd&gt; element that specifies an optional URI to the post-assembly version of the deployment descriptor file for a particular Java EE module.  If &lt;alt-dd&gt; is not specified, the deployer must read the deployment descriptor from the default location and file name required by the respective component specification.</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;module&gt; example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;application 
  xmlns="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" 
  xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" 
  application-name="MDBSampleEAR"&gt;

  &lt;module&gt;
    &lt;ejb&gt;example-ejb.jar&lt;/ejb&gt;
    &lt;alt-dd&gt;dds/my-ejb-geronimo-plan.xml&lt;/alt-dd&gt;
  &lt;/module&gt;
  &lt;module&gt;
    &lt;web&gt;
      &lt;web-uri&gt;example-web.war&lt;/web-uri&gt;
      &lt;context-root&gt;example&lt;/context-root&gt;
    &lt;/web&gt;
  &lt;/module&gt;

&lt;/application&gt;
</plain-text-body>

<p>Then the Geronimo deployment plan could include separate deployment plans for both modules like this:</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;module&gt; example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;application 
  xmlns="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" 
  xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" 
  application-name="MDBSampleEAR"&gt;

  &lt;module&gt;
    &lt;ejb&gt;example-ejb.jar&lt;/ejb&gt;
    &lt;alt-dd&gt;dds/my-ejb-jar.xml&lt;/alt-dd&gt;
  &lt;/module&gt;
  &lt;module&gt;
    &lt;web&gt;
      &lt;web-uri&gt;example-web.war&lt;/web-uri&gt;
      &lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.0"
               xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.0"&gt;
        &lt;naming:resource-ref&gt;
          &lt;naming:ref-name&gt;jms/AConnectionFactory&lt;/naming:ref-name&gt;
          &lt;naming:resource-link&gt;MyConnectionFactory&lt;/naming:resource-link&gt;
        &lt;/naming:resource-ref&gt;
      &lt;/web-app&gt;
    &lt;/web&gt;
  &lt;/module&gt;

&lt;/application&gt;
</plain-text-body>

<p>In this case, the EJB deployment plan is stored inside the EAR (in a directory called dds/ that also holds a replacement for ejb-jar.xml for that module).  The Web application deployment plan is right there inside the EAR deployment plan, in its entirety.</p>

<h3 id="geronimo-application.xml-&lt;ext-module&gt;">&lt;ext-module&gt;</h3>
<p>The <strong>&lt;ext-module&gt;</strong> uses the Geronimo default namespace for a geronimo-application.xml file that is described here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html">http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html</a></li></ul>


<p>This element can be used to define a single external Jave EE module that is being deployed or redeployed and contains one of the following elements to identify the module:</p>
<ul><li><strong>&lt;connector&gt;</strong> holds the location of a Java EE Connector module. Must match the same element in <strong>application.xml</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;ejb&gt;</strong> holds the location of an EJB module. Must match the same element in <strong>application.xml</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;java&gt;</strong> holds the location of a client application module. Must match the same element in <strong>application.xml</strong>.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li><strong>&lt;web&gt;</strong> holds the location of a web application module. Must match <strong>&lt;web-uri&gt;</strong> in <strong>application.xml</strong>.</li></ul>


<p>The &lt;ext-module&gt; element also contains either an &lt;internal-path&gt; or an <strong>&lt;external-path&gt;</strong>.  <strong>&lt;internal-path&gt;</strong> indicates that the module is packaged in the EAR and the path specified is relative to the enterprise application package main directory.  <strong>&lt;external-path&gt;</strong> indicates that the module is not part of the enterprise application and must be located by matching the supplied pattern in a Geronimo repository.</p>

<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;ext-module&gt; example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;application 
  xmlns="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" 
  xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" 
  application-name="MDBSampleEAR"&gt;

  &lt;sys:environment&gt;
    &lt;sys:moduleId&gt;
      &lt;sys:groupId&gt;default&lt;/sys:groupId&gt;
      &lt;sys:artifactId&gt;MDBSampleEAR&lt;/sys:artifactId&gt;
      &lt;sys:version&gt;1.0&lt;/sys:version&gt;
      &lt;sys:type&gt;car&lt;/sys:type&gt;
    &lt;/sys:moduleId&gt;
  &lt;/sys:environment&gt;
  
  &lt;ext-module&gt;
    &lt;connector&gt;TopicJMSSample&lt;/connector&gt;
    &lt;external-path&gt;
     &lt;sys:groupId&gt;org.apache.geronimo.modules&lt;/sys:groupId&gt;
     &lt;sys:artifactId&gt;geronimo-activemq-ra&lt;/sys:artifactId&gt;
     &lt;sys:version&gt;2.1&lt;/sys:version&gt;
    &lt;/external-path&gt;
    &lt;connector xmlns="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2"&gt;
     &lt;resourceadapter&gt;
      &lt;!--how to connect to the JMS Server--&gt;
      &lt;resourceadapter-instance&gt;
       &lt;resourceadapter-name&gt;TradeJMSResources&lt;/resourceadapter-name&gt;
       &lt;config-property-setting name="ServerUrl"&gt;tcp://localhost:61616&lt;/config-property-setting&gt;
       &lt;config-property-setting name="UserName"&gt;not needed&lt;/config-property-setting&gt;
       &lt;config-property-setting name="Password"&gt;not needed&lt;/config-property-setting&gt;
       &lt;workmanager&gt;
        &lt;gbean-link&gt;DefaultWorkManager&lt;/gbean-link&gt;
       &lt;/workmanager&gt;
      &lt;/resourceadapter-instance&gt;
        
      &lt;!--defines a ConnectionFactory--&gt;
      &lt;outbound-resourceadapter&gt;
       &lt;connection-definition&gt;
        &lt;connectionfactory-interface&gt;javax.jms.ConnectionFactory&lt;/connectionfactory-interface&gt;
        &lt;connectiondefinition-instance&gt;
         &lt;name&gt;jms/TopicConnectionFactory&lt;/name&gt;
         &lt;implemented-interface&gt;javax.jms.TopicConnectionFactory&lt;/implemented-interface&gt;
         &lt;connectionmanager&gt;
          &lt;xa-transaction&gt;
           &lt;transaction-caching/&gt;
          &lt;/xa-transaction&gt;
          &lt;single-pool&gt;
           &lt;max-size&gt;10&lt;/max-size&gt;
           &lt;min-size&gt;0&lt;/min-size&gt;
           &lt;blocking-timeout-milliseconds&gt;5000&lt;/blocking-timeout-milliseconds&gt;
           &lt;idle-timeout-minutes&gt;0&lt;/idle-timeout-minutes&gt;
           &lt;match-one/&gt;
          &lt;/single-pool&gt;
         &lt;/connectionmanager&gt;
        &lt;/connectiondefinition-instance&gt;
       &lt;/connection-definition&gt;
      &lt;/outbound-resourceadapter&gt;
     &lt;/resourceadapter&gt;
     &lt;adminobject&gt;
      &lt;adminobject-interface&gt;javax.jms.Topic&lt;/adminobject-interface&gt;
      &lt;adminobject-class&gt;org.activemq.message.ActiveMQTopic&lt;/adminobject-class&gt;
      &lt;adminobject-instance&gt;
       &lt;message-destination-name&gt;TextMessageTopic&lt;/message-destination-name&gt;
       &lt;config-property-setting name="PhysicalName"&gt;TextMessageTopic&lt;/config-property-setting&gt;
      &lt;/adminobject-instance&gt;
     &lt;/adminobject&gt;
    &lt;/connector&gt;
  &lt;/ext-module&gt;
&lt;/application&gt;
</plain-text-body>

<h3 id="geronimo-application.xml-&lt;sec:security&gt;">&lt;sec:security&gt; </h3>
<p>The <strong>&lt;sec:security&gt;</strong> uses the Geronimo applicaiton namespace described here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html">http://geronimo.apache.org/schemas-2.1/docs/geronimo-application-2.0.xsd.html</a></li></ul>


<p>It is used to map roles specified in the EAR file to roles or principals in the security realm that will be used when deploying the module. If this optional element is present, all web and EJB modules must make the appropriate access checks as outlined in the JACC spec. This element groups the security role mapping settings for the application. <strong>&lt;app:security&gt;</strong> contains the following elements:</p>
<ul><li>The <strong>&lt;doas-current-caller&gt;</strong> optional element may be set to true or false (default). If set to true, any work done by the application will be performed as the calling Subject, instead of "as the application server". This can be used to hook into the Java JVM security sandbox (for example, to only allow trusted users to access the server filesystem).  It is not ususally necessary, as the application-level security features are typically sufficient. When it is enabled, you may want to adjust the security policy used for the server to control certain permissions by subject.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;use-context-handler&gt;</strong> optional element may be set to true or false (default). If set to true, the installed JACC policy contexts will use PolicyContextHandlers.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;default-role&gt;</strong> element is used by the the Deployer to assign method permissions for all of the unspecified methods, either by assigning them to security roles, or by marking them as unchecked. If the value of default-role is empty, then the unspecified methods are marked unchecked.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;description&gt;</strong> element holds the description.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;credential-store-ref&gt;</strong> element holds the pattern for matching a module.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;default-subject&gt;</strong> element provides a description, realm, and id.
<br clear="none" class="atl-forced-newline">
<br clear="none" class="atl-forced-newline"></li><li>The <strong>&lt;role-mappings&gt;</strong> element holds the information mapping roles declared in the <strong>application.xml</strong> deployment descriptor to specific principals present in the security realms available to Geronimo.</li></ul>


<parameter ac:name="">xml</parameter><parameter ac:name="title">&lt;sec:security&gt; example</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;application xmlns="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" 
             xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" 
             xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0"
             application-name="SampleSecurityEAR"&gt;

  &lt;dep:environment&gt;

    &lt;dep:moduleId&gt;
      &lt;dep:groupId&gt;sampleear&lt;/dep:groupId&gt;
      &lt;dep:artifactId&gt;sample-ear&lt;/dep:artifactId&gt;
      &lt;dep:version&gt;1.0&lt;/dep:version&gt;
      &lt;dep:type&gt;ear&lt;/dep:type&gt;
    &lt;/dep:moduleId&gt;

    &lt;dep:dependencies&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.geronimo.configs&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;tomcat6&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;2.2-SNAPSHOT&lt;/dep:version&gt;
        &lt;dep:type&gt;car&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;

      &lt;dep:dependency&gt;
         &lt;dep:groupId&gt;default&lt;/dep:groupId&gt;
         &lt;dep:artifactId&gt;geronim-web-4&lt;/dep:artifactId&gt;
         &lt;dep:version&gt;1.0&lt;/dep:version&gt;
         &lt;dep:type&gt;car&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
    &lt;/dep:dependencies&gt;

  &lt;/dep:environment&gt;

  &lt;sec:security use-context-handler="false" doas-current-caller="true" default-role="admin1"&gt;
    &lt;sec:role-mappings&gt;
      &lt;sec:role role-name="admin-role"&gt;
        &lt;sec:description&gt;ability to do everything&lt;/sec:description&gt;
      &lt;/sec:role&gt;
      &lt;sec:role role-name="user-role"&gt;
        &lt;sec:description&gt;limited access&lt;/sec:description&gt;
      &lt;/sec:role&gt;
    &lt;/sec:role-mappings&gt;
  &lt;/sec:security&gt;

&lt;/application&gt;
</plain-text-body>

<h3 id="geronimo-application.xml-&lt;sys:service&gt;">&lt;sys:service&gt;</h3>
<p>The <strong>&lt;sys:service&gt;</strong> element uses the Geronimo deployment namespace described here:</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-2.1/docs/geronimo-module-1.2.xsd.html">http://geronimo.apache.org/schemas-2.1/docs/geronimo-module-1.2.xsd.html</a></li></ul>


<p>It is used to define GBean(s) that are configured and deployed with the application. These additional Geronimo services will be deployed when the application is deployed (and stopped when the application is stopped). Normally, the implementation classes for these services are included at the server level and referenced using a dependency element.</p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : geronimo-application.xml';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
