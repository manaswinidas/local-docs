<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="How to Access Resources via JNDI">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi How to Access Resources via JNDI">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：如何通过JNDI访问资源</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="questionable-doc-pages.html">可疑的文档页面</a> > <a href="how-to-access-resources-via-jndi.html">如何通过JNDI访问资源</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">如何通过JNDI访问资源</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645381"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645381">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645381"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645381">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645381"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645381">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<h2 id="HowtoAccessResourcesviaJNDI-Introduction">介绍</h2>

<p>Java命名和目录接口（JNDI）是Apache Geronimo和其他应用程序服务器中资源的接口。通过此接口，开发人员可以访问各种资源，例如Java对象，Enterprise Java Bean（EJB），数据库，邮件会话和其他连接。</p>

<p>下面的文章提供了有关如何使用JNDI访问数据源，Java Messaging Services（JMS），邮件会话和URL连接的连接池的概念丰富的文档： <strong><em>Apache Geronimo JNDI命名和Java资源连接池，第1部分：数据源连接</em></strong> 。URL： <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-jndi1" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-jndi1" rel="nofollow">//www-128.ibm.com/developerworks/opensource/library/os-ag-jndi1</a> 。这是一篇有用的文章，但它是为Geronimo 1.x编写的。</p>

<h2 id="HowtoAccessResourcesviaJNDI-HowtoAccessResourcesusingJNDIinGeronimo">如何在Geronimo中使用JNDI访问资源</h2>

<p>为了使示例J2EE企业应用程序正常运行，还需要一些其他配置。这是如何在运行的Geronimo 2.x实例中部署J2EE企业应用程序的概述：<br clear="none">1）将j2ee.jar文件添加到您的类路径中。<br clear="none">2）使用Geronimo / Tomcat发行版。<br clear="none">3）创建数据库池（CustomerServicePool）。<br clear="none">一种。手动创建和部署部署测试计划文件。<br clear="none">b。更新CustomerServicePool的部署版本。<br clear="none">C。更新依赖版本号。<br clear="none">d。更新部署描述符。<br clear="none">4）部署和测试应用程序。</p>

<p>注意：此信息的工作环境是Windows XP Professional，版本5.1.2600 Service Pack 2 Build 2600。</p>

<p>以下步骤将指导您成功部署Customer Service J2EE企业应用程序，可以在这里下载： <a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/views/download.jsp?contentid=175237&filename=CustomerService-part1.zip&method=http&locale=worldwide" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/views/download.jsp?contentid=175237&filename=CustomerService-part1.zip&method=http&locale=worldwide" rel="nofollow">//www.ibm.com/developerworks/views/download.jsp?</a> contentid=175237&filename=CustomerService-part1 <a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/views/download.jsp?contentid=175237&filename=CustomerService-part1.zip&method=http&locale=worldwide" rel="nofollow">。 zip＆method = http＆locale = worldwide</a></p>

<p>1）将j2ee.jar文件添加到您的类路径中。</p>

<p>必须将j2ee.jar文件添加到类路径中，该文件可以在应用程序服务器（例如WebSphere或WebLogic）的lib目录中找到，否则在尝试运行ant构建脚本时会出现以下错误：</p>

<p><span style="color:white"><parameter ac:name="bgColor">＃000000</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>编译：[javac]将9个源文件编译到E：\ DOWNLOADS \ GERONIMO \ CustomerService \ build \ class [javac] E：\ DOWNLOADS \ GERONIMO \ CustomerService \ src \ com \ service \ customer \ ejb \ Customer.java ：6：包javax.ejb不存在[javac]导入javax.ejb。EJBObject; [javac] ^</plain-text-body></span></p>

<p>2）使用Geronimo / Tomcat发行版。</p>

<p>使用Tomcat发行版，因为Jetty（geronimo-jetty6-jee5-2.0-M1）发行版当前在Geronimo Server控制台| Windows Server 2003的“数据库类型”下拉列表中不显示任何项目。服务|数据库池|数据库向导。</p>

<p>3）创建数据库池（CustomerServicePool）。甚至Tomcat发行版在创建新数据库池时也遇到问题。例如，当您尝试创建新的数据库池时，请从数据库类型中选择“嵌入式Derby”，然后测试连接。可以，但是不会创建新的数据库池。<geronimo_home>\ var \ log \ geronimo.log文件将具有以下条目：</geronimo_home></p>

<p><span style="color:white"><parameter ac:name="bgColor">＃000000</parameter> <parameter ac:name="borderStyle">固定</parameter> <plain-text-body>14：20：19,687错误[DatabasePoolPortlet]无法保存连接池javax.enterprise.deploy.spi.exceptions。InvalidModuleException：org.apache.geronimo.deployment.plugin.jmx不支持。org.apache.geronimo.console.databasemanager.wizard上的JMXDeploymentManager.createConfiguration（JMXDeploymentManager.java:297）。org.apache.geronimo.console.databasemanager.wizard上的DatabasePoolPortlet.save（DatabasePoolPortlet.java:880）。org.apache.pluto.core上的DatabasePoolPortlet.processAction（DatabasePoolPortlet.java:341）。位于org.apache.pluto.core的PortletServlet.dispatch（PortletServlet.java:229）。javax.servlet.http上的PortletServlet.doPost（PortletServlet.java:163）。javax.servlet.http上的HttpServlet.service（HttpServlet.java:713）。org.apache.pluto.core上的HttpServlet.service（HttpServlet.java:806）。位于org.apache.catalina.core的PortletServlet.service（PortletServlet.java:153）。org.apache.catalina.core上的ApplicationFilterChain.internalDoFilter（ApplicationFilterChain.java:290）。org.apache.catalina.core上的ApplicationFilterChain.doFilter（ApplicationFilterChain.java:206）。org.apache.catalina.core上的ApplicationDispatcher.invoke（ApplicationDispatcher.java:683）。org.apache.catalina.core上的ApplicationDispatcher.doInclude（ApplicationDispatcher.java:585）。org.apache.pluto.invoker.impl上的ApplicationDispatcher.include（ApplicationDispatcher.java:505）。位于org.apache.pluto.invoker.impl的PortletInvokerImpl.invoke（PortletInvokerImpl.java:120）。org.apache.pluto上的PortletInvokerImpl.action（PortletInvokerImpl.java:68）。位于org.apache.pluto.portalImpl.core的PortletContainerImpl.processPortletAction（PortletContainerImpl.java:164）。位于org.apache.pluto.portalImpl的PortletContainerWrapperImpl.processPortletAction（PortletContainerWrapperImpl.java:82）。org.apache.pluto.portalImpl上的Servlet.doGet（Servlet.java:227）。javax.servlet.http上的Servlet.doPost（Servlet.java:267）。javax.servlet.http上的HttpServlet.service（HttpServlet.java:713）。org.apache.catalina.core上的HttpServlet.service（HttpServlet.java:806）。org.apache.catalina.core上的ApplicationFilterChain.internalDoFilter（ApplicationFilterChain.java:290）。org.apache.catalina.core上的ApplicationFilterChain.doFilter（ApplicationFilterChain.java:206）。位于org.apache.catalina.core的StandardWrapperValve.invoke（StandardWrapperValve.java:228）。org.apache.geronimo.tomcat.valve的StandardContextValve.invoke（StandardContextValve.java:175）。org.apache.catalina.authenticator上的DefaultSubjectValve.invoke（DefaultSubjectValve.java:56）。org.apache.geronimo.tomcat上的AuthenticatorBase.invoke（AuthenticatorBase.java:525）。org.apache.geronimo.tomcat.valve上的GeronimoStandardContext $ SystemMethodValve.invoke（GeronimoStandardContext.java:325）。位于org.apache.catalina.core的GeronimoBeforeAfterValve.invoke（GeronimoBeforeAfterValve.java:47）。org.apache.catalina.valves上的StandardHostValve.invoke（StandardHostValve.java:128）。org.apache.catalina.core上的ErrorReportValve.invoke（ErrorReportValve.java:105）。org.apache.catalina.valves上的StandardEngineValve.invoke（StandardEngineValve.java:109）。org.apache.catalina.connector上的AccessLogValve.invoke（AccessLogValve.java:542）。位于org.apache.coyote.http11的CoyoteAdapter.service（CoyoteAdapter.java:212）。org.apache.coyote.http11上的Http11Processor.process（Http11Processor.java:818）。org.apache.tomcat.util.net上的Http11Protocol $ Http11ConnectionHandler.process（Http11Protocol.java:624）。JIoEndpoint $ Worker.run（JIoEndpoint.java:445）在java.lang。Thread.run（Thread.java:595）</plain-text-body></span></p>

<p>3.a）手动创建和部署部署测试计划文件。</p>

<p>Geronimo不会为“ Derby Embedded”连接池创建部署计划。因此，您必须手动创建一个部署计划并按以下步骤进行部署：</p>

<p>创建以下部署计划文件（CustomerServicePool_test_plan.xml）</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><connector xmlns="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>console.dbpool</dep:groupid> <dep:artifactid>CustomerServicePool</dep:artifactid> <dep:version>2.0</dep:version> <dep:type>rar</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>org.apache.derby</dep:groupid> <dep:artifactid>derby</dep:artifactid> <dep:version>10.1.3.1</dep:version> <dep:type>jar</dep:type></dep:dependency></dep:dependencies></dep:environment> <resourceadapter><outbound-resourceadapter><connection-definition><connectionfactory-interface>javax.sql。数据源</connectionfactory-interface> <connectiondefinition-instance><name>CustomerServicePool</name> <config-property-setting name="Driver">org.apache.derby.jdbc。EmbeddedDriver</config-property-setting> <config-property-setting name="ConnectionURL">jdbc：derby：CustomerServiceDatabase</config-property-setting> <connectionmanager><local-transaction></local-transaction> <single-pool><max-size>10</max-size> <min-size>0</min-size> <match-one></match-one></single-pool></connectionmanager>
                </connectiondefinition-instance>
            </connection-definition>
        </outbound-resourceadapter>
    </resourceadapter>
</connector>
<!--?xml--></plain-text-body>

<p>在<geronimo_home>\ bin目录</geronimo_home>中的命令提示符处运行以下命令<geronimo_home>：</geronimo_home></p>

<p><strong><code>deploy --verbose --user system --password manager deploy D:\appsData\GERONIMO\JNDIApp\CustomerService.ear</code></strong></p>

<p>3.b）更新CustomerServicePool的部署版本。</p>

<p>运行前面的deploy命令将带来另一个配置机会：<br clear="none">
<span style="color:white"><parameter ac:name="bgColor">＃000000</parameter> <parameter ac:name="borderStyle">固态</parameter> <plain-text-body>使用GERONIMO_BASE：C：\ GERONIMO使用GERONIMO_HOME：C：\ GERONIMO使用GERONIMO_TMPDIR：C：\ GERONIMO \ var \ temp使用JRE_HOME：C：\ Java \ Java150_10 \ jre错误：无法分发CustomerService.ear：无法为部署org.apache.geronimo.common创建配置。DeploymentException：无法在org.apache.geronimo.deployment创建用于部署的配置。org.apache.geronimo.deployment上的DeploymentContext.createTempConfiguration（DeploymentContext.java:121）。DeploymentContext。 <init>（org.apache.geronimo.deployment的DeploymentContext.java:101）。DeploymentContext。 <init>（DeploymentContext.java:81），位于org.apache.geronimo.j2ee.deployment。EARContext。 <init>（EARContext.java:65），网址为org.apache.geronimo.j2ee.deployment。org.apache.geronimo.j2ee.deployment的EARConfigBuilder.buildConfiguration（EARConfigBuilder.java:475）。EARConfigBuilder $$ FastClassByCGLIB $ 38e56ec6.invoke（ <generated>）位于net.sf.cglib.reflect。位于org.apache.geronimo.gbean.runtime的FastMethod.invoke（FastMethod.java:53）。org.apache.geronimo.gbean.runtime上的FastMethodInvoker.invoke（FastMethodInvoker.java:38）。位于org.apache.geronimo.gbean.runtime的GBeanOperation.invoke（GBeanOperation.java:124）。位于org.apache.geronimo.gbean.runtime的GBeanInstance.invoke（GBeanInstance.java:820）。org.apache.geronimo.kernel.basic上的RawInvoker.invoke（RawInvoker.java:57）。RawOperationInvoker.invoke（RawOperationInvoker.java:35）位于org.apache.geronimo.kernel.basic。org.apache.geronimo.j2ee.deployment上的ProxyMethodInterceptor.intercept（ProxyMethodInterceptor.java:96）。<generated>位于org.apache.geronimo.deployment的 CorbaGBeanNameSource $$ EnhancerByCGLIB $$ 44342279.buildConfiguration（ <generated>）。org.apache.geronimo.deployment上的Deployer.deploy（Deployer.java:302）。org.apache.geronimo.deployment上的Deployer.deploy（Deployer.java:124）。部署程序$$ FastClassByCGLIB $ 734a235d.invoke（ <generated>）位于net.sf.cglib.reflect。位于org.apache.geronimo.gbean.runtime的FastMethod.invoke（FastMethod.java:53）。org.apache.geronimo.gbean.runtime上的FastMethodInvoker.invoke（FastMethodInvoker.java:38）。位于org.apache.geronimo.gbean.runtime的GBeanOperation.invoke（GBeanOperation.java:124）。位于org.apache.geronimo.kernel.basic的GBeanInstance.invoke（GBeanInstance.java:855）。org.apache.geronimo.kernel上的BasicKernel.invoke（BasicKernel.java:239）。org.apache.geronimo.kernel上的KernelGBean.invoke（KernelGBean.java:338）。net.sf.cglib.reflect中的KernelGBean $$ FastClassByCGLIB $$ 1cccefc9.invoke（ <generated>）。位于org.apache.geronimo.gbean.runtime的FastMethod.invoke（FastMethod.java:53）。org.apache.geronimo.gbean.runtime上的FastMethodInvoker.invoke（FastMethodInvoker.java:38）。位于org.apache.geronimo.gbean.runtime的GBeanOperation.invoke（GBeanOperation.java:124）。位于org.apache.geronimo.kernel.basic的GBeanInstance.invoke（GBeanInstance.java:855）。org.apache.geronimo.system.jmx上的BasicKernel.invoke（BasicKernel.java:239）。com.sun.jmx.mbeanserver上的MBeanGBeanBridge.invoke（MBeanGBeanBridge.java:168）。com.sun.jmx.mbeanserver上的DynamicMetaDataImpl.invoke（DynamicMetaDataImpl.java:213）。位于com.sun.jmx.interceptor的MetaDataImpl.invoke（MetaDataImpl.java:220）。com.sun.jmx.mbeanserver上的DefaultMBeanServerInterceptor.invoke（DefaultMBeanServerInterceptor.java:815）。位于javax.management.remote.rmi的JmxMBeanServer.invoke（JmxMBeanServer.java:784）。位于javax.management.remote.rmi的RMIConnectionImpl.doOperation（RMIConnectionImpl.java:1408）。RMIConnectionImpl.access $ 100（RMIConnectionImpl.java:81），位于javax.management.remote.rmi。位于Java.security的RMIConnectionImpl $ PrivilegedOperation.run（RMIConnectionImpl.java:1245）。javax.management.remote.rmi上的AccessController.doPrivileged（本机方法）。javax.management.remote.rmi上的RMIConnectionImpl.doPrivilegedOperation（RMIConnectionImpl.java:1348）。位于sun.reflect的RMIConnectionImpl.invoke（RMIConnectionImpl.java:782）。sun.reflect处的NativeMethodAccessorImpl.invoke0（本机方法）。在sun.reflect处调用NativeMethodAccessorImpl.invoke（NativeMethodAccessorImpl.java:39）。java.lang.reflect上的DelegatingMethodAccessorImpl.invoke（DelegatingMethodAccessorImpl.java:25）。sun.rmi.server上的Method.invoke（Method.java:585）。sun.rmi.transport上的UnicastServerRef.dispatch（UnicastServerRef.java:294）。位于java.security的Transport $ 1.run（Transport.java:153）。sun.rmi.transport上的AccessController.doPrivileged（本机方法）。sun.rmi.transport.tcp上的Transport.serviceCall（Transport.java:149）。位于sun.rmi.transport.tcp的TCPTransport.handleMessages（TCPTransport.java:466）。位于java.lang的TCPTransport $ ConnectionHandler.run（TCPTransport.java:707）。Thread.run（Thread.java:595）由org.apache.geronimo.kernel.config引起。LifecycleException：在org.apache.geronimo.kernel.config上加载default / CustomerService / 1.0 / ear失败。org.apache.geronimo.deployment上的SimpleConfigurationManager.loadConfiguration（SimpleConfigurationManager.java:322）。org.apache.geronimo.kernel.config上的DeploymentConfigurationManager.loadConfiguration（DeploymentConfigurationManager.java:115）。org.apache.geronimo.deployment上的SimpleConfigurationManager.loadConfiguration（SimpleConfigurationManager.java:281）。org.apache.geronimo.deployment上的DeploymentConfigurationManager.loadConfiguration（DeploymentConfigurationManager.java:111）。DeploymentContext.createTempConfiguration（DeploymentContext.java:118）... 50更多原因：org.apache.geronimo.kernel.config。InvalidConfigException：在org.apache.geronimo.kernel.config处启动配置gbean default / CustomerService / 1.0 / ear时出错。org.apache.geronimo.deployment上的SimpleConfigurationManager.load（SimpleConfigurationManager.java:347）。org.apache.geronimo.kernel.config上的DeploymentConfigurationManager.load（DeploymentConfigurationManager.java:119）。SimpleConfigurationManager.loadConfiguration（SimpleConfigurationManager.java:307）... 54更多原因：org.apache.geronimo.kernel.repository。MissingDependencyException：无法在org.apache.geronimo.kernel.config上解析依赖项console.dbpool / CustomerServicePool / 1.0 / rar。org.apache.geronimo.kernel.config上的ConfigurationResolver.resolve（ConfigurationResolver.java:112）。org.apache.geronimo.kernel.config上的Configuration.buildClassPath（Configuration.java:402）。org.apache.geronimo.kernel.config上的Configuration.createConfigurationClasssLoader（Configuration.java:324）。组态。 <init>（Configuration.java:268），网址为org.apache.geronimo.kernel.config。SimpleConfigurationManager.load（SimpleConfigurationManager.java:343）...还有56个</init></generated></generated></generated></generated></generated></init></init></init></plain-text-body></span></p>

<p>请注意以下几点：<br clear="none">
<span style="color:white"><parameter ac:name="bgColor">＃000000</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>原因：org.apache.geronimo.kernel.repository。MissingDependencyException：无法解析依赖项console.dbpool / CustomerServicePool / 1.0 / rar</plain-text-body></span></p>

<p>这突出了以下事实：本文中的文件针对CustomerServicePool（Derby嵌入式数据库池）的早期（1.0）部署。</p>

<p>3.c）更新依赖版本号。</p>

<p>您可以通过将CustomerEJB-openejb.xml文件的“依赖关系”部分中的“ dep：version”标记从“ 1.0”更改为“ 2.0”来解决此问题，如下所示：</p>
<parameter ac:name="">XML</parameter> <parameter ac:name="borderStyle">可靠的</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar-2.1" xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.1"><dep:moduleid><dep:groupid>默认</dep:groupid> <dep:artifactid>CustomerEJB</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>jar</dep:type></dep:moduleid> <dep:dependencies><dep:dependency><dep:groupid>console.dbpool</dep:groupid> <dep:artifactid>CustomerServicePool</dep:artifactid> <dep:version>2.0</dep:version> <dep:type>rar</dep:type></dep:dependency></dep:dependencies> 。 。 。
</dep:environment></openejb-jar><!--?xml--></plain-text-body>

<p>在<geronimo_home>\ bin目录</geronimo_home>中的命令提示符处重新运行以下命令<geronimo_home>：</geronimo_home></p>

<p><strong><code>deploy --verbose --user system --password manager deploy D:\appsData\GERONIMO\JNDIApp\CustomerService.ear</code></strong></p>

<p>3.d）更新部署描述符。</p>

<p>修改application.xml部署描述符文件以使其与Geronimo 2.x要求兼容。</p>

<p>运行上一个deploy命令后，然后可以在geronimo.log文件中找到另一个错误：</p>

<p><span style="color:white"><parameter ac:name="bgColor">＃000000</parameter> <parameter ac:name="borderStyle">稳定的</parameter> <plain-text-body>Deployer操作失败：无法解析application.xml org.apache.geronimo.common。DeploymentException：无法在org.apache.geronimo.j2ee.deployment处解析application.xml。org.apache.geronimo.j2ee.deployment的EARConfigBuilder.getEarPlan（EARConfigBuilder.java:314）。org.apache.geronimo.j2ee.deployment的EARConfigBuilder.getDeploymentPlan（EARConfigBuilder.java:261）。EARConfigBuilder $$ FastClassByCGLIB $ 38e56ec6.invoke（ <generated>）位于net.sf.cglib.reflect。位于org.apache.geronimo.gbean.runtime的FastMethod.invoke（FastMethod.java:53）。org.apache.geronimo.gbean.runtime上的FastMethodInvoker.invoke（FastMethodInvoker.java:38）。位于org.apache.geronimo.gbean.runtime的GBeanOperation.invoke（GBeanOperation.java:124）。位于org.apache.geronimo.gbean.runtime的GBeanInstance.invoke（GBeanInstance.java:820）。org.apache.geronimo.kernel.basic上的RawInvoker.invoke（RawInvoker.java:57）。RawOperationInvoker.invoke（RawOperationInvoker.java:35）位于org.apache.geronimo.kernel.basic。org.apache.geronimo.j2ee.deployment上的ProxyMethodInterceptor.intercept（ProxyMethodInterceptor.java:96）。<generated>位于org.apache.geronimo.deployment的 CorbaGBeanNameSource $$ EnhancerByCGLIB $$ 44342279.getDeploymentPlan（ <generated>）。org.apache.geronimo.deployment上的Deployer.deploy（Deployer.java:232）。org.apache.geronimo.deployment上的Deployer.deploy（Deployer.java:124）。部署程序$$ FastClassByCGLIB $ 734a235d.invoke（ <generated>）位于net.sf.cglib.reflect。位于org.apache.geronimo.gbean.runtime的FastMethod.invoke（FastMethod.java:53）。org.apache.geronimo.gbean.runtime上的FastMethodInvoker.invoke（FastMethodInvoker.java:38）。位于org.apache.geronimo.gbean.runtime的GBeanOperation.invoke（GBeanOperation.java:124）。位于org.apache.geronimo.kernel.basic的GBeanInstance.invoke（GBeanInstance.java:855）。org.apache.geronimo.deployment.plugin.local上的BasicKernel.invoke（BasicKernel.java:239）。org.apache.geronimo.deployment.plugin.local上的AbstractDeployCommand.doDeploy（AbstractDeployCommand.java:114）。java.lang上的DistributeCommand.run（DistributeCommand.java:60）。Thread.run（Thread.java:595）由org.apache.xmlbeans引起。XmlException：无效的部署描述符：[错误：cvc-complex-type.2.4a：预期元素'module @ http：//java.sun.co m / xml / ns / j2ee'而不是'description @ http：// java “ .sun.com / xml / ns / j2ee”（此处位于元素application @ http：//java.sun.com/xml/ns/j2ee）中。描述符： <application xsi:schemalocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/application_1_4.xsd" version="1.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><display-name>客户服务实用程序</display-name> <description>客户服务实用程序</description> <module><web><web-uri>CustomerService-web.war</web-uri> <context-root>/ service</context-root></web></module> <module><ejb>CustomerEJB.jar</ejb></module></application>位于org.apache.geronimo.deployment.xmlbeans的<application xsi:schemalocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/application_1_4.xsd" version="1.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><module><ejb>ProcessCustomerEJB.jar</ejb></module></application> 。位于org.apache.geronimo.j2ee.deployment的XmlBeansUtil.validateDD（XmlBeansUtil.java:213）。org.apache.geronimo.j2ee.deployment的EARConfigBuilder.convertToApplicationSchema（EARConfigBuilder.java:420）。EARConfigBuilder.getEarPlan（EARConfigBuilder.java:312）...还有21个</generated></generated></generated></generated></plain-text-body></span></p>

<p>从application.xml文件中删除“ description：”和“ display-name”标签，然后将其保存回CustomerService.ear file.application.xml文件中：</p>
<parameter ac:name="">XML</parameter> <parameter ac:name="borderStyle">可靠的</parameter> <plain-text-body><!--?xml version="1.0" ?=""--><application xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/application_1_4.xsd" version="1.4"><display-name>客户服务实用程序</display-name> <module><web><web-uri>CustomerService-web.war</web-uri> <context-root>/ service</context-root></web></module> <module><ejb>CustomerEJB.jar</ejb></module> <module><ejb>ProcessCustomerEJB.jar</ejb></module></application><!--?xml--></plain-text-body>

<p>这次，CustomerService.ear文件将成功部署。</p>

<p><strong><code>deploy --verbose --user system --password manager deploy D:\appsData\GERONIMO\JNDIApp\CustomerService.ear</code></strong></p>

<p>4）部署和测试应用程序。</p>
<ul><li>转到Geronimo Server控制台|应用领域部署新窗口。</li><li>单击<browse>按钮，然后选择CustomerService.ear文件。</browse></li><li>请点击<install></install></li><li>在<a shape="rect" class="external-link" href="http://localhost:8080/service/customers/" rel="nofollow">http：// localhost：8080 / service / customers /上</a>测试已部署的应用程序</li></ul>


<h2 id="HowtoAccessResourcesviaJNDI-Summary">摘要</h2>

<p>使用以下步骤，我们可以在正在运行的Geronimo 2.x实例中成功部署J2EE企业应用程序：<br clear="none">1）将j2ee.jar文件添加到您的类路径中。<br clear="none">2）使用Geronimo / Tomcat发行版。<br clear="none">3）创建数据库池（CustomerServicePool）。<br clear="none">一种。手动创建和部署部署测试计划文件。<br clear="none">b。更新CustomerServicePool的部署版本。<br clear="none">C。更新依赖版本号。<br clear="none">d。更新部署描述符。<br clear="none">4）部署和测试应用程序。</p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : How to Access Resources via JNDI';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>