<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="JBoss to Geronimo - Servlets and JSPs Migration">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi JBoss to Geronimo - Servlets and JSPs Migration">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：从JBoss到Geronimo-Servlet和JSP的迁移</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="migrating-to-apache-geronimo.html">迁移到Apache Geronimo</a> > <a href="migrating-from-jboss-to-geronimo.html">从JBoss迁移到Geronimo</a> > <a href="jboss-to-geronimo-servlets-and-jsps-migration.html">JBoss到Geronimo-Servlet和JSP迁移</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">从JBoss到Geronimo-Servlet和JSP迁移</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645284"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645284">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645284"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645284">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645284"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645284">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p><span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-top"></span><br clear="none">本文将帮助您将已部署的JBoss v4的servlet和JSP迁移到Apache Geronimo。本文是一系列迁移文章的一部分，涵盖了不同类型的应用程序迁移。</p>

<p>本文介绍了迁移是J2EE的最基本方面之一：servlet和JSP。用于此迁移练习的示例应用程序是<a shape="rect" href="jboss-to-geronimo-servlets-and-jsps-migration.data/college_fest.zip?version=1&modificationDate=1204181831000&api=v2" data-linked-resource-id="20874023" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="college_fest.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3">College Fest</a> ，它仅包含用于处理控制流的servlet和JSP。College Fest示例应用程序不使用任何数据库，有关将JDBC应用程序迁移的详细信息，请参阅<a shape="rect" href="jboss-to-geronimo-jdbc-migration.html">JBoss到Geronimo-JDBC迁移</a>文章。</p>

<p>阅读本文之后，您应该能够重新配置JBoss构建文件和部署描述符，以设置Apache Geronimo目标环境，然后部署简单的Web应用程序。</p>

<p>本文分为以下几节：</p>

<ul><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-implementation">Servlet和JSP实施分析</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-sampleApp">样品申请</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-JBoss">JBoss环境</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-Geronimo">Geronimo环境</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-migration">分步迁移</a></li><li><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-summary">摘要</a></li></ul>


<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-ServletsandJSPsimplementationanalysisimplementation">Servlet和JSP实施分析<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-implementation"></span></h1>
<p>Servlet和JSP的实现可能因一台应用程序服务器而异。本部分的目的是在JBoss和Apache Geronimo之间提供servlet和JSP特定功能的比较，以便您可以清楚地识别差异并在迁移之前进行相应的计划。</p>

<p>Apache Geronimo包含一个支持J2EE Web应用程序的Web应用程序容器。Web容器本身支持基本配置，例如网络端口和SSL选项，并且每个Web应用程序也可能包含Geronimo特定的配置信息。Web应用程序参与了Geronimo安全基础结构，因此，通过对Web应用程序进行身份验证，还可以访问安全的EJB和连接器。</p>

<p>Apache Geronimo当前支持两个Web容器： <strong>Jetty</strong>和<strong>Tomcat</strong> 。</p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-Jetty">码头</h3>
<p>Jetty是100％的Java HTTP Server和Servlet容器。这意味着您无需配置和运行单独的Web服务器即可使用Servlet和JSP生成动态内容。Jetty是用于静态和动态内容的功能齐全的Web服务器。</p>

<p>与单独的服务器/容器解决方案不同，Jetty的Web服务器和Web应用程序在同一过程中运行，而没有互连开销和复杂性。此外，作为一个纯Java组件，Jetty可以轻松地包含在您的应用程序中以进行演示，分发或部署。所有Java支持的平台上都可以使用Jetty。</p>

<p>在Geronimo中，您需要显式配置尝试连接到Web容器的浏览器使用的路径。对于默认Web容器Jetty，这些路径称为连接器。标准配置包括在端口8080上支持HTTP的Jetty连接器以及在端口8443上的HTTPS连接器。</p>

<p>每个Jetty连接器都是一个GBean，因此配置Jetty连接器的过程涉及配置GBean。</p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-ApacheTomcat">阿帕奇雄猫</h3>
<p>Apache Tomcat是Servlet容器，在Java Servlet和JavaServer Pages技术的官方参考实现中使用。</p>

<p><a shape="rect" class="external-link" href="http://java.sun.com/products/servlet" rel="nofollow">http://java.sun.com/products/servlet</a><br clear="none">
<a shape="rect" class="external-link" href="http://java.sun.com/products/jsp" rel="nofollow">http://java.sun.com/products/jsp</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Thedifferences">差异</h2>
<p>JBoss v4仅支持Tomcat 5.5，这是默认的Web容器。嵌入式Tomcat服务是<strong>deploy</strong>目录中扩展的SAR <strong>jbossweb-tomcat55.sar</strong> 。的<code>web.xml</code>在此扩展的SAR目录结构中也找到了为Web应用程序提供默认配置集的文件。</p>

<p>如果要通过单独的Web服务器（例如Apache HTTP）进行连接，则在端口8080上设置HTTP连接器，并使用端口8009。</p>

<p>除了默认的Web容器之外，第二个主要区别在于部署计划。Geronimo中的部署计划在某种意义上类似于J2EE部署描述符，因为它是一个XML文件，其中包含特定应用程序模块或服务的配置信息。</p>

<p>对于没有安全性或资源引用的非常简单的Web应用程序，不需要Geronimo部署计划，在部署时将自动提供默认上下文根和依赖关系。</p>

<p>Geronimo Web应用程序的部署计划是<strong>geronimo-web.xml</strong> 。Jboss中相应的部署描述符是<code>jboss-web.xml</code> 。有关Geronimo部署体系结构的更多详细信息，请参考<a shape="rect" class="external-link" href="http://www.ibm.com/developerworks/library/os-ag-deploy" rel="nofollow">了解Geronimo的部署体系结构</a> 。</p>

<p>Servlet和JSP的另一个区别在于Web应用程序的部署方式。在Geronimo中，使用部署工具来部署应用程序包（ear，war，rar或jar） <code>deployer.jar</code>位于<code><geronimo_home>/bin</code>目录。<br clear="none">
<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-deploymentTool"></span><br clear="none">的<code>deployer.jar</code>根据部署计划中提供的信息（如果提供了计划）将应用程序模块部署到Geronimo服务器。然后，服务器将元数据保存到配置存储中，并将可执行文件保存到二进制存储库中。下图说明了部署工具的行为。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="jboss-to-geronimo-servlets-and-jsps-migration.data/deployer.jpg" data-image-src="/confluence/download/attachments/20645284/deployer.jpg?version=1&modificationDate=1204181831000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="20874022" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="deployer.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3"></span></p>

<p>在JBoss中，只需将应用程序包（ear，war，rar或jar）复制到Windows Server 2003中即可部署Web应用程序。 <code><jboss_home>/server/<your_server_name>/deploy</code>服务器从中检测到其存在的目录，并进行相应的部署。</p>

<p>下表总结了JBoss和Geronimo之间的区别。</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>特征</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss v4</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>阿帕奇·杰罗尼莫</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>部署描述符/计划</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>jboss.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>geronimo-web.xml</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>部署方法</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>将软件包（ear，war，rar或jar）复制到JBoss服务器的deploy文件夹中<code><jboss_home>/server/<your_server_name>/deploy</code></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>服务器的bin目录中提供了<a shape="rect" href="tools-and-commands.html#Toolsandcommands-Deployertool">部署工具</a><br clear="none">
<code><geronimo_home>/bin</code> 。也可以通过<a shape="rect" href="deploying-and-undeploying-applications.html#Deployingandundeployingapplications-ViaGeronimoAdministrationConsole">管理控制台进行</a>部署。第三种选择是<a shape="rect" href="deploying-and-undeploying-applications.html#Deployingandundeployingapplications-Viahotdeployment">Hot Deployment</a> ，它等同于JBoss功能。</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Web容器</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Apache Tomcat 5.5</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>码头和/或Apache Tomcat</p></td></tr></tbody></table></div>


<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-SampleapplicationsampleApp">样品申请<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-sampleApp"></span></h1>
<p><a shape="rect" href="jboss-to-geronimo-servlets-and-jsps-migration.data/college_fest.zip?version=1&modificationDate=1204181831000&api=v2" data-linked-resource-id="20874023" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="college_fest.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3">College Fest</a>应用程序处理大学节日活动的注册。这是一个非常简单的应用程序，不使用任何类型的数据库。College Fest应用程序具有以下四个页面：</p>

<ul><li>欢迎页面</li><li>活动列表页面</li><li>活动详细信息页面</li><li>注册页面</li></ul>


<p>下图说明了应用程序流程：</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="jboss-to-geronimo-servlets-and-jsps-migration.data/webApp_flow.jpg" data-image-src="/confluence/download/attachments/20645284/webApp_flow.jpg?version=1&modificationDate=1204181831000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="20874021" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="webApp_flow.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3"></span></p>

<p>用户访问欢迎页面并输入用户名和大学。从那里用户可以看到可用事件的列表。用户可以通过从列表中单击来访问每个事件的详细信息。用户可以从“事件详细信息”页面注册该特定事件。</p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-ApplicationclassesandJSPpages">应用程序类和JSP页面</h2>
<p>College Fest示例应用程序由以下两个servlet组成：</p>
<ul><li>WelcomeServlet-处理用户登录，然后获取用户名并将其分派给下一个servlet。</li><li>PersonalServlet-为用户个性化页面，并将控件移交给welcome.jsp。</li></ul>


<p>College Fest示例应用程序还包括以下JSP页面：</p>
<ul><li>welcome.jsp-向用户显示事件列表，以便他/他可以选择要注册的事件。</li><li>dc.jsp-显示Dumb Charades事件的详细信息。</li><li>pp.jsp-显示Pot Potpourri事件的详细信息。</li><li>wtgw.jsp-显示“ What's the Good Word”事件的详细信息。</li><li>gq.jsp-显示常规测验事件的详细信息。</li><li>team_reg.jsp-处理一个事件的用户注册。</li></ul>


<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Toolsused">使用的工具</h2>
<p>用于开发和构建College Fest示例应用程序的工具是：</p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-Eclipse">日食</h3>
<p>Eclipse IDE用于示例应用程序的开发。这是一个非常强大且流行的开源开发工具。集成插件可用于JBoss和Geronimo。可以从以下URL下载Eclipse：<br clear="none">
<a shape="rect" class="external-link" href="http://www.eclipse.org" rel="nofollow">http://www.eclipse.org</a></p>

<h3 id="JBosstoGeronimo-ServletsandJSPsMigration-ApacheAnt">阿帕奇蚂蚁</h3>
<p>Ant是一个纯Java构建工具。它用于为College Fest应用程序构建战争文件。可以从以下URL下载Ant：<br clear="none">
<a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-TheJBossenvironmentJBoss">JBoss环境<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-JBoss"></span></h1>
<p>本节向您展示示例JBoss参考环境的安装方式和安装位置，以便您可以将这种情况映射到您自己的实现中。</p>

<p>产品文档中提供了有关安装，配置和管理JBoss的详细说明。在<a shape="rect" class="external-link" href="http://www.jboss.org/jbossas/docs/" rel="nofollow">产品网站上</a>查看最新文档。</p>

<p>以下列表突出显示了您需要完成的常规任务，以安装和配置初始环境作为部署示例应用程序的起点。</p>

<ol><li>按照产品文档指南中的说明下载并安装JBoss v4。从现在开始，安装目录将被称为<code><jboss_home></code> 。</li><li>创建默认的JBoss v4应用程序服务器的副本。递归复制<code><jboss_home>\server\default</code>至<code><jboss_home>\server\<your_server_name></code> 。</li><li>通过运行以下命令启动新服务器<code>run.sh -c <your_server_name></code>来自的命令<code><jboss_home>\bin</code>目录。</li><li>服务器启动后，可以通过打开Web浏览器并将其指向以下URL来验证它是否正在运行： <a shape="rect" class="external-link" href="http://localhost:8080" rel="nofollow">http：// localhost：8080</a> 。您应该看到JBoss Welcome窗口，并且能够访问JBoss控制台。</li><li>一旦应用程序服务器启动并运行，下一步就是安装和配置示例应用程序所需的所有其余必备软件。下一节将介绍此步骤。</li></ol>


<p>如前所述，Apache Ant用于为College Fest应用程序构建二进制文件。如果您没有安装Ant，那么这是个不错的时机，并确保将<strong><ant_home>\ bin</ant_home></strong>目录添加到系统的path变量中。</p>

<p>可以从以下URL下载Apache Ant：</p>

<p><a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Buildthesampleapplication">构建示例应用程序</h2>
<p>本文附带的College Fest应用程序提供了一个Ant脚本，您将使用该脚本来构建该应用程序。从以下链接下载College Fest应用程序：</p>

<p><a shape="rect" href="jboss-to-geronimo-servlets-and-jsps-migration.data/college_fest.zip?version=1&modificationDate=1204181831000&api=v2" data-linked-resource-id="20874023" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="college_fest.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645284" data-linked-resource-container-version="3">大学节</a></p>

<p>解压缩zip文件后，将创建一个college_fest目录。在该目录中，打开<strong>build.properties</strong>文件，然后编辑属性以匹配您的环境，如以下示例所示：</p>

<div class="preformatted panel" style="border-style:solid;border-width:1px"><div class="preformattedHeader panelHeader" style="border-bottom-width:1px;border-bottom-style:solid"><b>更新build.properties文件</b></div><div class="preformattedContent panelContent">
<pre>#Replace java.home with your jdk directory
java.home=&lt;JAVA_HOME&gt;
#Replace j2ee.home with the parent directory of lib/j2ee.jar
j2ee.home=&lt;jboss_home&gt;/server/&lt;your_server_name&gt;
#Replace with jboss home directory
jboss.server=&lt;jboss_home&gt;/server/&lt;your_server_name&gt;
#geronimo home directory
geronimo.home=&lt;geronimo_home&gt;
</pre>
</div></div>

<p>在college_fest目录中，您还可以找到两个构建文件， <code>build.xml</code>和<code>jboss-build.xml</code> 。 <code>build.xml</code>是默认的构建文件，因此，如果您仅键入<strong>ant，则</strong>此文件将用于构建应用程序。对于此特定的示例应用程序， <code>jboss-build.xml</code>提供文件。</p>

<p>在仍然位于college_fest目录中的命令行中，输入以下命令：</p>

<p><strong><code>ant -f jboss-build.xml clean deploy</code></strong></p>

<p>使用此命令，ant将使用在<code>jboss-build.xml</code>文件来构建College Fest应用程序并将其部署到JBoss服务器。特别看一下<strong><target name="deploy" ...=""></target></strong> ，这是<code>jboss-build.xml</code>告诉蚂蚁在哪里部署WAR文件。以下示例显示了<code>jboss-build.xml</code>文件。</p>

<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>jboss-build.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!-- build file for building a war --&gt;

&lt;project name=&quot;build&quot; default=&quot;war&quot; basedir=&quot;.&quot;&gt;

    &lt;property file=&quot;build.properties&quot;/&gt;
    &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt;
    &lt;property name=&quot;dest.dir&quot; value=&quot;bin&quot;/&gt;
    
    &lt;target name=&quot;clean&quot; description=&quot;Delete all generated files&quot;&gt;
        &lt;echo message=&quot;Deleting bin directory&quot; /&gt;
        &lt;delete dir=&quot;bin&quot; /&gt;
    &lt;/target&gt;

	&lt;target name=&quot;compile&quot;&gt;
		&lt;mkdir dir=&quot;${dest.dir}&quot;/&gt;
		&lt;javac srcdir=&quot;${src.dir}&quot; destdir=&quot;${dest.dir}&quot;&gt;
			&lt;classpath path=&quot;${java.home}/lib/tools.jar&quot;/&gt;
			&lt;classpath path=&quot;${j2ee.home}/lib/j2ee.jar&quot;/&gt;
		&lt;/javac&gt;
	&lt;/target&gt;

	&lt;target name=&quot;war&quot; depends=&quot;compile&quot;&gt;
		&lt;war destfile=&quot;college_fest.war&quot; webxml=&quot;WEB-INF/web.xml&quot;&gt;
			&lt;zipfileset dir=&quot;jsp&quot; prefix=&quot;jsp&quot;/&gt;   	 
			&lt;zipfileset dir=&quot;pix&quot; prefix=&quot;pix&quot;/&gt;   	 
			&lt;classes dir=&quot;${dest.dir}&quot;/&gt;   
                        &lt;webinf dir=&quot;WEB-INF&quot; /&gt;
		&lt;/war&gt;
	&lt;/target&gt;

	&lt;target name=&quot;deploy&quot; depends=&quot;war&quot;&gt;
		&lt;copy file=&quot;college_fest.war&quot; todir=&quot;${jboss.server}/deploy&quot;/&gt;
	&lt;/target&gt;

	&lt;target name=&quot;undeploy&quot;&gt;
		&lt;delete file=&quot;${jboss.server}/deploy/college_fest.war&quot;/&gt;
    &lt;/target&gt;
&lt;/project&gt;
]]></script>
</div></div>

<p>ant构建所产生的战争包含JBoss特定的部署描述符，即<code>jboss-web.xml</code>文件在<code>WEB-INF</code>以下示例显示了WAR的目录。</p>

<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>JBoss部署描述符</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;jboss-web&gt;

    &lt;context-root&gt;college_fest&lt;/context-root&gt;
    &lt;context-priority-classloader&gt;
      false
    &lt;/context-priority-classloader&gt;
&lt;/jboss-web&gt;]]></script>
</div></div>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Deploythesampleapplication">部署样本应用程序</h2>
<p>上一步显示了如何在构建时通过指定自定义来部署应用程序<code>jboss-build.xml</code>文件。如果使用默认值<code>build.xml</code>文件在生成时，您仍然需要手动部署College Fest应用程序。要在JBoss中部署College Fest应用程序，请复制<code>college_fest.war</code>您刚刚用Ant构建的文件到以下目录：</p>

<p><code><jboss_home>\server\<your_server_name>\deploy</code></p>

<p>如果JBoss已经启动，它将自动部署并启动应用程序；否则，该应用程序将被部署并在下次启动时启动。</p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Testingtheapplicationtest">测试应用程序<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-test"></span></h2>
<p>要测试该应用程序，请打开Web浏览器并访问以下URL：</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/college_fest" rel="nofollow">http：// localhost：8080 / college_fest</a></p>

<p>您应该看到“欢迎”屏幕，您可以在其中使用您的姓名和大学登录。输入大学名称并单击“提交”后，页面末尾会显示一条消息，说明您的姓名，并带有指向“单击此处”的链接以进入该站点。浏览站点并检查选项，此时，College Fest应用程序已配置并正在运行。</p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-TheGeronimoenvironmentGeronimo">Geronimo环境<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-Geronimo"></span></h1>
<p>从以下URL下载并安装Geronimo：</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a></p>

<p>那里提供的发行说明提供了有关系统要求以及如何安装和启动Geronimo的明确说明。在本文的其余部分中，我们将Geronimo安装目录称为<strong><geronimo_home></geronimo_home></strong> 。</p>

<div class="confluence-information-macro confluence-information-macro-warning"><p class="title">TCP / IP端口冲突</p><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>如果您打算在同一台机器上运行JBoss和Geronimo，请考虑至少更改其中一台服务器上的默认服务端口。</p></div></div>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-Step-by-stepmigrationmigration">分步迁移<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-migration"></span></h1>
<p>为了将College Fest应用程序迁移到Geronimo，您需要替换<code>jboss-web.xml</code>带有一个文件<code>geronimo-web.xml</code>该文件是Geronimo特定的描述符文件。geronimo-web.xml文件位于带有College_fest目录结构的WEB-INF目录中。以下示例说明了Geronimo部署计划geronimo-web.xml。</p>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>以下geronimo-web.xml是使用J2G工具生成的。</p></div></div>

<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>Geronimo特定的部署计划geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;web-app xmlns=&quot;http://geronimo.apache.org/xml/ns/j2ee/web-1.1&quot; 
         xmlns:naming=&quot;http://geronimo.apache.org/xml/ns/naming-1.1&quot; 
         xmlns:security=&quot;http://geronimo.apache.org/xml/ns/security-1.1&quot; 
         xmlns:sys=&quot;http://geronimo.apache.org/xml/ns/deployment-1.1&quot;&gt;
  &lt;sys:environment&gt;
    &lt;sys:moduleId&gt;
      &lt;sys:groupId&gt;j2g&lt;/sys:groupId&gt;
      &lt;sys:artifactId&gt;web-module&lt;/sys:artifactId&gt;
      &lt;sys:version&gt;1.0&lt;/sys:version&gt;
      &lt;sys:type&gt;war&lt;/sys:type&gt;
    &lt;/sys:moduleId&gt;
    &lt;sys:dependencies/&gt;
  &lt;/sys:environment&gt;
  &lt;context-root&gt;college_fest&lt;/context-root&gt;
&lt;/web-app&gt;
]]></script>
</div></div>

<p>鉴于College Fest是一个非常简单的应用程序，Geronimo的部署计划也将非常简单。请记住，此应用程序不使用任何数据库访问权限，也没有配置安全性。在阅读从<strong>JBoss到Geronimo的</strong>迁移系列中的其他文章时，您会注意到部署计划的复杂性是如何随着不同迁移场景的示例应用程序的复杂性而增加的。</p>

<p>本文前面讨论了<a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-deploymentTool">部署工具</a>的行为。在部署过程中，您需要向部署工具提供应用程序模块和部署计划。College Fest示例应用程序是如此简单，您可以选择不提供任何部署计划，而让Geronimo使用一组默认值（例如，一个默认上下文根）来进行部署。</p>

<p>上次构建College Fest示例应用程序时，它已配置为供ant使用。 <code>jboss-build.xml</code>文件而不是默认文件<code>build.xml</code> 。以下示例显示了默认内容<code>build.xml</code>文件。</p>

<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>build.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!-- build file for building a war --&gt;

&lt;project name=&quot;build&quot; default=&quot;war&quot; basedir=&quot;.&quot;&gt;

    &lt;property file=&quot;build.properties&quot;/&gt;
    &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt;
    &lt;property name=&quot;dest.dir&quot; value=&quot;bin&quot;/&gt;


    &lt;target name=&quot;clean&quot; description=&quot;Delete all generated files.&quot;&gt;
        &lt;echo message=&quot;Deleting bin folder&quot; /&gt;
        &lt;delete dir=&quot;bin&quot;/&gt;
    &lt;/target&gt;

      &lt;target name=&quot;compile&quot;&gt;
    	&lt;mkdir dir=&quot;${dest.dir}&quot;/&gt;

        &lt;javac srcdir=&quot;${src.dir}&quot; destdir=&quot;${dest.dir}&quot;&gt;
            &lt;classpath path=&quot;${java.home}/lib/tools.jar&quot;/&gt;
            &lt;!--classpath path=&quot;${j2ee.home}/lib/j2ee.jar&quot;/--&gt;
            &lt;classpath path=&quot;${geronimo.home}/repository/org/apache/geronimo/specs/geronimo-servlet_2.5_spec/1.1/geronimo-servlet_2.5_spec-1.1.jar&quot; /&gt;
        &lt;/javac&gt;
    &lt;/target&gt;

    &lt;target name=&quot;war&quot; depends=&quot;compile&quot;&gt;
        &lt;war destfile=&quot;college_fest.war&quot; webxml=&quot;WEB-INF/web.xml&quot;&gt;
            &lt;zipfileset dir=&quot;jsp&quot; prefix=&quot;jsp&quot;/&gt;
            &lt;zipfileset dir=&quot;pix&quot; prefix=&quot;pix&quot;/&gt;   	    
            &lt;classes dir=&quot;${dest.dir}&quot;/&gt;    
            &lt;webinf dir=&quot;WEB-INF&quot; /&gt;
        &lt;/war&gt;
&lt;/target&gt;


&lt;/project&gt;
]]></script>
</div></div>

<p>要在不指定任何其他参数的情况下从命令行运行<strong>ant</strong>迁移的应用程序，将在College Fest应用程序目录结构的根目录中创建一个college_fest.war文件。</p>

<p>要删除干净构建的生成文件，请先运行<strong>ant clean</strong> ，再运行<strong>ant。</strong></p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h2 id="JBosstoGeronimo-ServletsandJSPsMigration-Deploythemigratedsampleapplication">部署迁移的样本应用程序</h2>
<p>要部署迁移的College Fest应用程序，请确保Geronimo服务器已启动并正在运行。</p>

<p>在命令行中，将目录更改为<code><geronimo_home>/bin</code>并键入以下命令：</p>

<p><strong><code>deploy --user system --password manager deploy <college_fest_home>/college_fest.war</code></strong></p>

<p>部署应用程序后，打开Web浏览器并访问以下URL：</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/college_fest/" rel="nofollow">http：// localhost：8080 / college_fest /</a></p>

<p>重复在JBoss环境中<a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-test">测试应用程序</a>时执行的步骤。</p>

<p><a shape="rect" href="#JBosstoGeronimo-ServletsandJSPsMigration-top">回到顶部</a></p>

<h1 id="JBosstoGeronimo-ServletsandJSPsMigration-Summarysummary">摘要<span class="confluence-anchor-link" id="JBosstoGeronimo-ServletsandJSPsMigration-summary"></span></h1>
<p>本文向您展示了如何将简单的Servlet和JSP应用程序从JBoss迁移到Apache Geronimo应用程序服务器。您按照分步说明构建了应用程序，对其进行了部署和运行，然后将其迁移到Geronimo环境中。</p>

<p>阅读本文后的一些评论：</p>
<ul><li>Apache Geronimo提供了两个不同的Web容器，Jetty和Apache Tomcat。</li><li>您还学习了如何在Geronimo中使用部署程序来部署应用程序。</li><li>并非总是需要Geronimo部署计划，如果应用程序不使用资源引用，则可以接受Geronimo的部署默认值。</li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : JBoss to Geronimo - Servlets and JSPs Migration';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>