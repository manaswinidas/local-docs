<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="JBoss to Geronimo - EJB-BMP Migration (Unverified on 2.2)">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi JBoss to Geronimo - EJB-BMP Migration (Unverified on 2.2)">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：从JBoss到Geronimo-EJB-BMP迁移（在2.2上未经验证）</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">Home</a> > <a href="documentation.html">文档</a> > <a href="migrating-to-apache-geronimo.html">迁移到Apache Geronimo</a> > <a href="migrating-from-jboss-to-geronimo.html">从JBoss迁移到Geronimo</a> > <a href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">JBoss到Geronimo-EJB-BMP迁移（在2.2上未经验证）</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">JBoss到Geronimo-EJB-BMP迁移（在2.2上未验证）</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645285"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645285">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645285"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645285">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645285"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645285">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p><parameter ac:name="">最佳</parameter><br clear="none">实体bean被定义为持久性数据的表示形式，该持久性数据具有从数据库中读取数据并用数据填充其字段的能力。可以将其更新并存储回数据库。企业Java Bean随附两种类型的实体Bean：Bean管理的持久性（BMP）和容器管理的持久性（CMP）。本文介绍了BMP示例应用程序的迁移。对于这种类型的实体bean，必须编写实际代码来处理持久性操作，例如加载，保存和查找数据。开发人员必须使用诸如JDBC之类的持久性API从数据库中进行选择，插入，更新和删除。</p>

<p>本文分为以下几节：</p>
<ul><li><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">BMP实施分析</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">样品申请</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">JBoss环境</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">Geronimo环境</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">分步迁移</a></li><li><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">摘要</a></li></ul>


<h1 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-BMPimplementationanalysisanalysis">BMP实施<parameter ac:name="">分析</parameter></h1>

<p>BMP实施可能因一家供应商而异。本部分的目的是在JBoss v4.0.5和Apache Geronimo之间提供BMP特定功能的比较，以便您可以清楚地识别差异并在迁移之前进行相应的计划。</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>特征</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss v4.2.1</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>阿帕奇·杰罗尼莫</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>EJB容器</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>JBoss带有自己的实现</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Geronimo使用OpenEJB作为其EJB容器</p></td></tr></tbody></table></div>


<p><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">回到顶部</a></p>

<h1 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Sampleapplicationsample">样品申请<parameter ac:name="">样品</parameter></h1>

<p>这是一个简单的贷款注册应用程序，它允许用户申请贷款，而管理员可以批准/拒绝贷款。客户可以使用Web站点申请贷款，而经理则使用简单的Java应用程序批准/拒绝贷款。BMP实体Bean已用于管理数据库中与贷款相关的持久性数据。除此之外，还使用了无状态会话Bean处理与工作流程相关的活动。</p>

<p>下图说明了贷款管理Web应用程序流程：<br clear="none">
<span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.data/loan_web_overview.gif"></span></p>

<p>贷款注册Web应用程序的第一页充当公告板，其中显示贷款列表及其当前状态。当客户决定申请贷款时，他/她可以使用贷款登记表。贷款注册后，将其分类为未决状态。具有管理员特权的经理将使用一个小应用程序来更改贷款状态。使用此应用程序，经理可以将未决贷款的状态更改为已批准或已拒绝。</p>

<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-ApplicationclassesandJSPpages">应用程序类和JSP页面</h2>

<ul><li>org.apache.geronimo.samples.loan.client<ul><li>LoanStatusChanger-独立的应用程序，有助于批准已申请的贷款。</li></ul>
	</li><li>org.apache.geronimo.samples.loan.dto<ul><li>LoanDTO-Web和EJB层之间用于贷款相关信息的数据传输对象。</li></ul>
	</li><li>org.apache.geronimo.samples.loan.ejb<ul><li>LoanBean-BMP，用于处理数据库中与贷款相关的持久性数据。</li><li>LoanManagerBean-要处理的无状态会话Bean。</li></ul>
	</li><li>org.apache.geronimo.samples.loan.util<ul><li>PropertyLoader-将与应用程序服务器相关的属性加载到不同类型的客户端。</li></ul>
	</li><li>org.apache.geronimo.samples.loan.web<ul><li>LoanManagerDispatchServlet-一个从前端到Web层调度与贷款处理相关的活动的servlet。</li></ul>
	</li></ul>


<p>该贷款管理Web应用程序还包括以下JSP页面：</p>
<ul><li>error.jsp-常见错误页面，用于处理意外情况。</li><li>index.jsp-转发到应用程序中的贷款列表。</li><li>list_loans.jsp-显示贷款清单及其信息。</li><li>register_loan.jsp-客户填写的贷款注册表格。</li></ul>


<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Toolsused">使用的工具</h2>
<p>用于开发和构建“贷款管理器”应用程序的工具为：</p>

<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Eclipse">日食</h3>
<p>Eclipse IDE用于示例应用程序的开发。这是一个非常强大且流行的开源开发工具。集成插件可用于JBoss和Geronimo。可以从以下URL下载Eclipse：<br clear="none">
<a shape="rect" class="external-link" href="http://www.eclipse.org" rel="nofollow">http://www.eclipse.org</a></p>

<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-ApacheAnt">阿帕奇蚂蚁</h3>
<p>Ant是一个纯Java构建工具。它用于构建war文件并为Online Brokerage应用程序填充数据库。可以从以下URL下载Ant：<br clear="none">
<a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<p><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">回到顶部</a></p>

<h1 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-TheJBossenvironmentjboss">JBoss环境<parameter ac:name="">jboss</parameter></h1>

<p>本节向您展示示例JBoss参考环境的安装方式和安装位置，以便您可以将这种情况映射到您自己的实现中。注意，对于此迁移示例，使用了JBoss v4.2.1。</p>

<p>产品文档中提供了有关安装，配置和管理JBoss的详细说明。在产品网站上查看最新文档。</p>

<p>以下列表突出显示了您需要完成的常规任务，以安装和配置初始环境作为部署示例应用程序的起点。</p>

<ol><li>按照产品文档指南中的说明下载并安装JBoss v4.2.1。从现在开始，安装目录将被称为<strong><jboss_home></jboss_home></strong></li><li>创建默认的JBoss v4.2.1应用程序服务器的副本。将<strong><jboss_home>\ server \ default</jboss_home></strong>递归复制到<strong><jboss_home>\ server \<your_server_name></your_server_name></jboss_home></strong></li><li>通过运行<strong>run.sh -c</strong>启动新服务器<strong><your_server_name></your_server_name></strong> <strong><jboss_home>\ bin</jboss_home></strong>目录中的命令。</li><li>服务器启动后，可以通过打开Web浏览器并将其指向以下URL来验证它是否正在运行： <a shape="rect" class="external-link" href="http://localhost:8080" rel="nofollow">http：// localhost：8080</a> 。您应该看到JBoss Welcome窗口，并且能够访问JBoss控制台。</li><li>一旦应用程序服务器启动并运行，下一步就是安装和配置示例应用程序所需的所有其余必备软件。下一节将介绍此步骤。</li></ol>


<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Installandconfigureprerequisitesoftware">安装和配置必备软件</h2>
<p>为了构建和运行本文中包含的Loan Management应用程序，您将需要安装和配置构建工具以及该应用程序使用的数据库。</p>

<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Modifydatabasesettings">修改数据库设置</h3>

<p>该应用程序正在使用JBoss捆绑包中附带的HSQL数据库。您需要修改用于创建数据库的脚本。编辑位于<strong><jboss_home>\ server \ <your_server_name>\ data \ hypersonic</your_server_name></jboss_home></strong>目录中的<strong>localDB.script</strong>文件：</p>

<p>将以下示例的内容添加到<strong>localDB.script</strong>文件的顶部，以创建示例HSQL数据库。最后，将示例数据添加到<strong>config / db.sql</strong>中JBoss Specific Data下的相同文件中。</p>

<rich-text-body><p><strong>确保在修改此文件时JBoss没有运行。</strong></p></rich-text-body>

<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-ConfigureAnt">配置蚂蚁</h3>

<p>如前所述，Apache Ant用于构建Online Brokerage应用程序的二进制文件。如果您没有安装Ant，那么这是个好时机，并确保将<strong><ant_home>/ bin</ant_home></strong>目录添加到系统的path变量中。</p>

<p>可以从以下URL下载Apache Ant：</p>

<p><a shape="rect" class="external-link" href="http://ant.apache.org">http://ant.apache.org</a></p>

<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-ConfigureXDoclet">配置XDoclet</h3>

<p>XDoclet将用作生成配置文件的构建工具。它是一个开源代码生成引擎。它启用Java的面向属性的编程。简而言之，这意味着您可以通过向Java源代码中添加元数据（属性）来为代码增加更多意义。这是通过特殊的JavaDoc标记完成的。<br clear="none">尽管XDoclet最初是作为创建EJB的工具，但它已经演变为通用代码生成引擎。XDoclet由一个核心和数量不断增长的模块组成。如果需要一种新型的组件，那么编写新的模块是相当直接的。<br clear="none">
<a shape="rect" class="external-link" href="http://xdoclet.sourceforge.net/xdoclet/index.html" rel="nofollow">http://xdoclet.sourceforge.net/xdoclet/index.html</a></p>

<p>只需提取最新版本的XDoclet，并将<strong>xdoclet.home</strong>参数设置为<strong>build.properties</strong>文件即可。</p>

<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Buildthesampleapplication">构建示例应用程序</h2>

<p>本文附带的贷款管理器应用程序提供了一个Ant脚本，您将使用该脚本来构建该应用程序。从以下链接下载贷款管理器应用程序：</p>

<p><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.data/loan.zip?version=1&modificationDate=1204179892000&api=v2" data-linked-resource-id="20874026" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="loan.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="20645285" data-linked-resource-container-version="20">贷款</a></p>

<p>解压缩zip文件后，将创建一个<strong>贷款</strong>目录。在该目录中，打开build.properties文件，然后编辑属性以匹配您的环境，如以下示例所示：</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">build.properties</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body>##在此处设置Geronimo 2.0主页geronimo.home = <geronimo_home>##设置XDoclet 1.2.3 Home xdoclet.home = <xdoclet_home>
</xdoclet_home></geronimo_home></plain-text-body>

<p>在开始构建过程之前，只需在<strong>config</strong>目录的<strong>build.properties</strong>文件中为<strong>geronimo.home</strong>和<strong>xdoclet.home</strong>条目设置正确的路径。</p>

<p>从命令提示符或shell转到<strong>放贷</strong>目录并运行<strong>ant jboss</strong> 。这将构建ear文件并将其直接放置在<strong>releases / jboss</strong>目录中。</p>


<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Deploythesampleapplication">部署样本应用程序</h2>

<p>要部署示例应用程序，只需复制<strong>Loan.ear，</strong>它将在<strong>loan / releases / jboss</strong>文件夹下创建到<strong><jboss_home>/ server / <your_server_name>/ deploy</your_server_name></jboss_home></strong>文件夹。</p>

<p>如果JBoss已经启动，它将自动部署并启动应用程序；否则，该应用程序将被部署并在下次启动时启动。</p>

<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Testthesampleapplication">测试示例应用程序</h2>

<p>要测试该应用程序，请打开Web浏览器并访问以下URL：</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/loan" rel="nofollow">http：// localhost：8080 / loan</a></p>

<p>这将打开贷款管理器主页，其中包含贷款列表及其当前状态。<strong>注册</strong>链接将把您转发到贷款登记表，该表在将贷款添加到贷款信息数据库之前接受多个字段。</p>

<p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.data/loan_screen.gif"></span></p>

<p>要更改贷款的状态，经理必须从Web应用程序中找到贷款ID，并必须在客户端应用程序中提供它，如下所示。</p>

<p><strong>java -jar LoanStatusChanger.jar <loanid> <status></status></loanid></strong></p>

<p>提交的状态将根据以下值更改。以下是相关贷款的状态值。</p>
<ol><li>0-待处理</li><li>1-已接受</li><li>其他-已拒绝</li></ol>


<rich-text-body><p>在运行上述命令之前，请确保将<strong><jboss-home>/client/jbossall-client.jar</jboss-home></strong>文件添加到类路径中。</p></rich-text-body>

<p><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">回到顶部</a></p>

<h1 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-TheGeronimoenvironmentgeronimo">Geronimo环境<parameter ac:name="">geronimo</parameter></h1>

<p>从以下URL下载并安装Geronimo：</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a></p>

<p>那里提供的发行说明提供了有关系统要求以及如何安装和启动Geronimo的明确说明。在本文的其余部分中，我们将Geronimo安装目录称为<strong><geronimo_home></geronimo_home></strong> 。</p>

<parameter ac:name="title">TCP / IP端口冲突</parameter> <rich-text-body>
<p>如果您打算在同一台机器上运行JBoss和Geronimo，请考虑至少更改其中一台服务器上的默认服务端口。</p></rich-text-body>


<p><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">回到顶部</a></p>
<h1 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Step-by-stepmigrationmigration">分步迁移<parameter ac:name="">迁移</parameter></h1>

<p>构建贷款管理器样本应用程序时，Ant打包了JBoss <strong>jboss.xml</strong>和Geronimo <strong>openejb-jar.xml</strong>的部署描述<strong>符</strong> ，因为它们已由样本应用程序提供。这些文件位于<strong>loan / config</strong>目录中。</p>

<p>以下示例显示了JBoss部署描述符。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">jboss.xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--> <jboss><enterprise-beans><entity><ejb-name>贷款</ejb-name> <local-jndi-name>贷款</local-jndi-name> <method-attributes>
        </method-attributes></entity> <session><ejb-name>LoanManager</ejb-name> <jndi-name>org.apache.geronimo.samples.loan.ejb。贷款</jndi-name> <local-jndi-name>经理</local-jndi-name> 贷款 <local-jndi-name>经理</local-jndi-name> <method-attributes>
        </method-attributes></session></enterprise-beans> <resource-managers>
   </resource-managers>
  
</jboss>
<!--?xml--></plain-text-body>

<p>将其与以下示例中显示的Geronimo部署计划的内容进行比较。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">openejb-jar.xml</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar-2.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:moduleid><dep:groupid>org.apache.geronimo.samples</dep:groupid> <dep:artifactid>LoanManagerEJB</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>汽车</dep:type></dep:moduleid> <dep:dependencies></dep:dependencies><dep:hidden-classes></dep:hidden-classes><dep:non-overridable-classes></dep:non-overridable-classes></dep:environment> <enterprise-beans><session><ejb-name>LoanManager</ejb-name> <ejb-ref><ref-name>ejb / LoanLocal</ref-name> <ejb-link>Loan</ejb-link></ejb-ref></session> <entity><ejb-name>贷款</ejb-name> <resource-ref><ref-name>jdbc / LoanDataSource</ref-name> <resource-link>SystemDatasource</resource-link></resource-ref></entity></enterprise-beans></openejb-jar><!--?xml--></plain-text-body>

<p>可以清楚地注意到，第一个区别是Geronimo特定的配置比JBoss特定的配置具有更多信息。Geronimo配置文件的该部分与Maven 2构建脚本非常相似。这两个给定的配置文件都具有EJB信息。JBoss使用本地JNDI名称来链接EJB，而Geronimo直接使用EJB名称。除了上述差异之外， <strong>openejb-jar.xml</strong>文件比<strong>jboss.xml</strong>文件清楚地提供了EJB参考信息。</p>

<p>与Web存档相关的配置文件为您提供了更多区别。</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title">jboss-web.xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><jboss-web><ejb-local-ref><ejb-ref-name>ejb / LoanManagerLocal</ejb-ref-name> <local-jndi-name>LoanManager</local-jndi-name></ejb-local-ref></jboss-web><!--?xml--></plain-text-body> <parameter ac:name="">xml</parameter> <parameter ac:name="title">geronimo-web.xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.1" xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.1"><dep:environment xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.1"><dep:moduleid><dep:groupid>org.apache.geronimo.samples</dep:groupid> <dep:artifactid>LoanManagerWeb</dep:artifactid> <dep:version>1.0</dep:version> <dep:type>汽车</dep:type></dep:moduleid> <dep:dependencies></dep:dependencies><dep:hidden-classes></dep:hidden-classes><dep:non-overridable-classes></dep:non-overridable-classes></dep:environment> <naming:ejb-local-ref><naming:ref-name>ejb / LoanManagerLocal</naming:ref-name> <naming:ejb-link>LoanManager</naming:ejb-link></naming:ejb-local-ref></web-app><!--?xml--></plain-text-body>

<p>如上所述， <strong>jboss-web.xml</strong>使用JNDI名称映射EJB，而<strong>geronimo-web.xml</strong>直接使用EJB名称。每个映射中给定的引用名称将用于引用Servlet中的EJB。 WAR文件的<strong>web.xml</strong>文件包含有关每个EJB引用名称的更多信息，这对于该应用程序的Geronimo和JBoss风格都是通用的。</p>

<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Buildthesampleapplication.1">构建示例应用程序</h2>

<p>通过从<strong>借贷</strong>目录运行以下命令，构建示例应用程序的迁移Geronimo版本。<br clear="none">
<strong>蚂蚁杰罗尼莫</strong><br clear="none">它将在<strong>loan / releases / geronimo</strong>文件夹中创建<strong>Loan.ear</strong>文件。</p>

<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Deploythemigratedapplication">部署迁移的应用程序</h2>

<p>要部署迁移的Loan Manager应用程序，请确保Geronimo服务器已启动并正在运行，并且用户必须填充数据库，然后部署示例应用程序。</p>

<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-PopulatingtheDatabase">填充数据库</h3>
<p>该样本应用程序将使用默认的Geronimo System数据库来保存应用程序特定的数据。<br clear="none">在Geronimo控制台中，执行给定的步骤。</p>
<ol><li>从左侧的控制台导航中选择DB Manager链接。</li><li>选择<strong>SystemDatabase</strong>到<strong>使用DB</strong>领域。</li><li>通过文本编辑器在<strong>借项/配置</strong>目录中打开<strong>db.sql</strong> ，并将内容复制到Geronimo特定数据库SQL下方。</li><li>将内容粘贴到上面“ SQL命令”文本区域中，然后按“运行SQL”按钮。</li></ol>


<h3 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-DeploySampleApplication">部署样本应用程序</h3>
<p>在浏览器中打开Geronimo控制台，然后执行给定的步骤：</p>
<ol><li>从“ <strong>控制台导航”</strong>面板向下滚动到<strong>Deploy New</strong> 。</li><li>从<strong>loan / releases / geronimo</strong>文件夹中将<strong>loan.ear</strong>加载到“ <strong>存档”</strong>输入框中。</li><li>按<strong>安装</strong>按钮以在服务器中部署应用程序。</li></ol>


<h2 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Testthesampleapplication.1">测试示例应用程序</h2>

<p>要测试该应用程序，请打开Web浏览器并访问以下URL：</p>

<p><a shape="rect" class="external-link" href="http://localhost:8080/loan" rel="nofollow">http：// localhost：8080 / loan</a></p>

<p>要更改贷款的状态，用户必须从Web应用程序中找到贷款ID，并必须在客户端应用程序中提供它，如下所示。</p>

<p><strong>java -jar LoanStatusChanger.jar <loanid> <status></status></loanid></strong></p>

<rich-text-body>
<p>在运行上述命令之前，请确保将以下JAR文件列表添加到类路径中。</p>
<ol><li>geronimo-kernel-2.0.x.jar</li><li>geronimo-j2ee_connector_1.5_spec-1.xxjar</li><li>geronimo-j2ee_management_1.1_spec-1.x.jar</li><li>geronimo-security-2.0.x.jar</li><li>cglib-nodep-2.1_3.jar</li><li>openejb-core-3.0.jar</li></ol>
</rich-text-body>

<p><a shape="rect" href="jboss-to-geronimo-ejb-bmp-migration-unverified-on-22.html">回到顶部</a></p>

<h1 id="JBosstoGeronimo-EJB-BMPMigration(Unverifiedon2.2)-Summarysummary">摘要<parameter ac:name="">摘要</parameter></h1>
<p>本文展示了如何将使用BMP实体bean的示例应用程序从JBoss v4.2.1迁移到Apache Geronimo。本文提供了分步说明，以构建应用程序，部署和运行该应用程序，然后将其迁移到Geronimo环境。</p>

<p>下表总结了在此示例应用程序迁移期间发现的主要差异。</p>

<ul><li>为了在JBoss中部署EJB jar文件，您只需要将配置文件复制到deploy目录，但是在Geronimo中，您可以使用部署工具，控制台或热部署目录。</li><li>JBoss和Geronimo中EJB jar文件的部署计划的内容几乎相似，只是Geronimo的开始部分与Maven 2构建文件更相似。</li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : JBoss to Geronimo - EJB-BMP Migration (Unverified on 2.2)';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>