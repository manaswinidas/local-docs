<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Substituting one module with another" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Substituting one module with another" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href='http://geronimo.apache.org/resources/highlighter/styles/shCoreGeronimo.css' rel='stylesheet' type='text/css' />
  <link href='http://geronimo.apache.org/resources/highlighter/styles/shThemeGeronimo.css' rel='stylesheet' type='text/css' />
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0 Documentation: Substituting one module with another</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="installing-and-running.html">Installing and running</a>&nbsp;&gt;&nbsp;<a href="initial-configuration.html">Initial configuration</a>&nbsp;&gt;&nbsp;<a href="substituting-one-module-with-another.html">Substituting one module with another</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Substituting one module with another</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645437">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645437">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645437">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645437">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645437">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645437">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">
<h2 id="Substitutingonemodulewithanother-Aliasingjarsandmodules">Aliasing jars and modules</h2>

<p>You may want to change the version of jars or plugins from those used when your Geronimo server was assembled, or completely replace one with another.  This can be done for any artifacts in the Geronimo repository, but not for jars in the <code>lib</code> directory.  We hope to move almost all the jars out of lib shortly, but this is not yet possible.</p>

<p>Recall that the Geronimo repository, like a maven 2 repository, is structured like</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
/path/like/groupId/artifactId/version/artifactId-version.type
</pre>
</div></div>

<p>An artifact is structured like</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
path.like.groupId/artifactId/version/type
</pre>
</div></div>

<p>To install  a new version of an artifact you typically need to create a new directory corresponding to the version, then copy the artifact into that directory.  There is an administrative console page that helps with <a shape="rect" href="adding-jars-to-the-geronimo-repository.html">Adding JARs to the Geronimo repository</a>.</p>

<p>Dependencies in Geronimo plugins can be specified with or without a fixed version.  If all the dependencies on the artifact you are replacing are specified without a fixed version, you can simply add your new artifact to the appropriate place in the Geronimo repository and, if the version is newer than the old artifact, it will be used by Geronimo the next time the plugins that use it are started.  If your artifact has a lower version than what it is replacing, you need to remove the old artifact.</p>

<p>If at least one dependency is specified with a fixed version or you are using a different artifact, you need to specify the replacement more explicitly. For the main Geronimo server this would be in the <code>var/config/artifact_aliases.properties</code> file, and for the application client it would be in the <code>var/config/client_artifact_aliases.properties</code> file.</p>

<p>The format for entries in these files is <strong>oldartifactid=newartifactId</strong>. Here are two examples. </p>
<ul><li>Versions can be omitted on the left side but not the right. This can also specify explicit versions in the same format.</li><li>Note that many of these examples have two lines for the "same" replacement.
	<ul><li>If all the dependencies specify the version, you only need the line with the version specified in the left hand side.</li><li>If all the dependencies omit the version, you only need the line without the version specified in the left hand side.  At the moment whether or not versions are specified in geronimo dependencies is somewhat disorganized and random.</li></ul>
	</li></ul>


<div class="preformatted panel" style="border-style: solid;border-width: 1px;"><div class="preformattedHeader panelHeader" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>artifact-aliases.properties</b></div><div class="preformattedContent panelContent">
<pre>org.apache.geronimo.configs/j2ee-server//car=org.apache.geronimo.configs/j2ee-server/2.2/car
org.apache.geronimo.configs/j2ee-server/2.2/car=org.apache.geronimo.configs/j2ee-server/2.2/car
</pre>
</div></div>

<div class="preformatted panel" style="border-style: solid;border-width: 1px;"><div class="preformattedHeader panelHeader" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>client-artifact-aliases.properties</b></div><div class="preformattedContent panelContent">
<pre>org.apache.geronimo.framework/j2ee-system//car=org.apache.geronimo.framework/client-system/2.2/car
org.apache.geronimo.framework/j2ee-system/2.2/car=org.apache.geronimo.framework/client-system/2.2/car
org.apache.geronimo.framework/j2ee-security//car=org.apache.geronimo.configs/client-security/2.2/car
org.apache.geronimo.framework/j2ee-security/2.2/car=org.apache.geronimo.configs/client-security/2.2/car
org.apache.geronimo.configs/j2ee-server//car=org.apache.geronimo.configs/client/2.2/car
org.apache.geronimo.configs/j2ee-server/2.2/car=org.apache.geronimo.configs/client/2.2/car
org.apache.geronimo.configs/transaction//car=org.apache.geronimo.configs/client-transaction/2.2/car
org.apache.geronimo.configs/transaction/2.2/car=org.apache.geronimo.configs/client-transaction/2.2/car
</pre>
</div></div>

<p>While you can modify these files by hand, a more recommended method is to deploy your applications as Geronimo plugins and to install these aliases through the <code>geronimo-plugin.xml</code> descriptor, which is genereated when you build your plugin using maven.  There are some examples about <a shape="rect" href="deploying-and-administering-plugins.html">Deploying and administering plugins</a>.</p>

<p>And you can also update or remove artifact aliases on the Geronimo server by using <strong>JAR Aliases</strong> feature on the Console. </p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Substituting one module with another';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
