<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="geronimo-web.xml">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi geronimo-web.xml">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：geronimo-web.xml</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="creating-deployment-plans.html">创建部署计划</a> > <a href="understanding-deployment-plans.html">了解部署计划</a> > <a href="geronimo-webxml.html">geronimo-web.xml</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">geronimo-web.xml</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645409"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645409">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645409"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645409">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645409"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645409">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<h1 id="geronimo-web.xml-Overview">总览</h1>
<p><parameter ac:name="atlassian-macro-output-type">排队</parameter><rich-text-body></rich-text-body></p><p>Web应用程序特定于Geronimo的部署计划（通常打包为WAR文件）称为“ <strong>geronimo-web.xml</strong> ”。</p><strong>geronimo-web.xml</strong>部署计划用于与<strong>web.xml</strong> Java EE部署描述符结合使用，以将由Java Servlet页面（JSP）和servlet组成的Web应用程序部署到Geronimo应用程序服务器，并且可以选择用来配置将在其中部署Web应用程序的Geronimo Web服务器（即Tomcat或Jetty）。<strong>geronimo-web.xml</strong>部署计划是一个可选文件，但通常在部署WAR文件时使用。它用于指定在<strong>web.xml</strong>中向服务器中部署的相应实体声明的应用程序安全角色，EJB名称，数据库资源，JMS资源等。除此之外，如果有任何特定于Web容器的配置（例如Tomcat或Jetty特定），则取决于应用程序的需求，所有这些设置也在此处配置。如果Web应用程序依赖于服务器中运行的任何第三方库或其他服务，则所有这些依赖项都将在计划中声明。某些Web应用程序要求的类加载要求不同于默认的类加载行为。<strong>geronimo-web.xml</strong>允许应用程序部署程序也进行配置。根据Web应用程序的需求，可以通过<strong>geronimo-web.xml</strong>完成更多配置。<p></p>

<h2 id="geronimo-web.xml-Packaging">打包</h2>

<p>特定于<strong>geronimo的geronimo-web.xml</strong>部署计划可以打包如下：</p>
<ol><li>嵌入WAR文件中。在这种情况下，必须将<strong>geronimo-web.xml</strong>文件放在WAR的<strong>/ WEB-INF</strong>目录中，该目录与<strong>web.xml</strong>文件所在的位置相同。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>与WAR文件分开维护：在这种情况下，部署WAR文件时，必须将文件路径提供给适当的Geronimo部署程序（例如，命令行或控制台）。请注意，在这种情况下，文件名可以使用<strong>geronimo-web.xml</strong>以外的其他名称，但必须遵循相同的架构。还要注意，如果将EJB JAR文件嵌入到企业应用程序EAR文件中，这将不起作用（请参见下文）。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>嵌入到企业应用程序EAR文件中：在一种情况下，根级元素<strong><web-app></web-app></strong>可以将<strong>geronimo-web-2.0.1.xsd</strong>模式的一部分嵌入EAR文件的<strong>geronimo-application.xml</strong>文件中的WAR文件之外。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>嵌入到企业应用程序EAR文件中：在另一种情况下，可以将实际的<strong>geronimo-web.xml</strong>文件放置在EAR的<strong>/ META-INF</strong>目录中，该目录与<strong>application.xml</strong>文件位于同一位置。</li></ol>


<h1 id="geronimo-web.xml-Schema">架构图</h1>

<p><strong>geronimo-web.xml</strong>部署计划由位于Geronimo主安装目录的<strong><geronimo_home>/ schema /</geronimo_home></strong>子目录中的<strong>geronimo-web-2.0.1.xsd</strong>模式定义。<strong>geronimo-web-2.0.1.xsd</strong>模式记录在这里：</p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li></ul>


<p>该模式<strong>不是</strong>特定于容器的，这意味着它可用于将Web应用程序部署到Geronimo支持的Tomcat或Jetty Web容器中。如果有必要部署到特定的容器，则可以使用以下两个特定于容器的模式之一。这些允许特定于容器的配置元素，只有Tomcat或Jetty Web容器才能理解。</p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html</a></li><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html</a></li></ul>


<p>最后，虽然通用架构没有特定于容器的元素，但通过使用<strong><container-config></container-config></strong>元件。该元素将在下面更详细地描述。</p>

<h2 id="geronimo-web.xml-Schematop-levelelements">架构顶级元素</h2>

<p><strong>geronimo-web-2.0.1.xsd</strong>模式中的根XML元素是<strong><web-app></web-app></strong>元件。的顶级XML元素<strong><web-app></web-app></strong>根元素将在以下各节中介绍。部署计划应始终使用Web应用程序名称空间，并且通常需要来自Geronimo System，Geronimo Naming，Geronimo Security，Geronimo Application和Geronimo Persistence命名空间的元素。此外，它具有标识其配置名称的必需属性，以及用于选择父配置的可选属性。<strong>geronimo-web.xml的</strong>典型部署可以如下所示：</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="borderStyle">solid</parameter> <parameter ac:name="title">geronimo-web.xml示例</parameter> <plain-text-body><web:web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" xmlns:name="http://geronimo.apache.org/xml/ns/naming-1.2" xmlns:app="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" xmlns:jaspi="http://geronimo.apache.org/xml/ns/geronimo-jaspi" xmlns:pers="http://java.sun.com/xml/ns/persistence">...
</web:web-app>

</plain-text-body>

<h3 id="geronimo-web.xml-<sys:environment>"><sys:environment></sys:environment></h3>

<p>的<strong><sys:environment></sys:environment></strong> XML元素使用Geronimo System命名空间，该命名空间用于指定公共库和模块作用域服务的公共元素，并在此处进行记录：</p>

<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html</a></li></ul>


<p>的<strong><sys:environment></sys:environment></strong>元素包含以下元素：</p>

<ul><li>的<strong><moduleid></moduleid></strong>元素用于提供在Geronimo服务器中部署的Web应用程序的配置名称。它包含<strong>groupId</strong> ， <strong>artifactId</strong> ， <strong>版本</strong>和模块<strong>类型的</strong>元素。模块ID通常在四个组件之间带有斜线，例如<strong>GroupID / ArtifactID / Version / Type</strong> 。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><dependencies></dependencies></strong>元素用于提供Web模块所依赖的配置和第三方库。这些配置和库可通过Geronimo类加载器层次结构提供给Web模块。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><bundle-activator></bundle-activator></strong>元素用于在Web应用程序的清单文件中创建<strong>Bundle-Activator</strong>标头。它指定了在Geronimo服务器中部署的Web应用程序的入口点。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><bundle-classpath></bundle-classpath></strong>元素用于在Web应用程序的清单文件中创建<strong>导入-Package</strong>头。它包含目录或嵌入式jar文件的列表，这些目录也称为捆绑资源并扩展了Web应用程序的类路径。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><import-package></import-package></strong>元素用于在Web应用程序的清单文件中创建<strong>Import-Package</strong>标头。它指定了在启动Web应用程序之前要解决的软件包的列表。使用<import-package>！packagename</import-package>覆盖服务器中的特定软件包。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><export-package></export-package></strong>元素用于在Web应用程序的清单文件中创建<strong>出口-Package</strong>头。它指定要导出的软件包的列表。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><require-bundle></require-bundle></strong>元素用于在Web应用程序的清单文件中创建<strong>Require-Bundle</strong>标头。它指定要绑定到的捆绑包列表，而不管捆绑包如何。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><dynamic-import-package></dynamic-import-package></strong>元素用于在Web应用程序的清单文件中创建<strong>DynamicImport-Package</strong>标头。它指定要动态导入的打包列表，尤其是在类加载期间。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><hidden-classes></hidden-classes></strong>元素可用于提供对Geronimo类加载器层次结构的某种程度的控制，并减轻服务器加载的类与Web应用程序加载的类之间的冲突。它用于列出可能位于父类加载器中但不能公开给Web应用程序的包或类。由于Geronimo完全是开源的，并且利用了许多其他开源库，因此服务器本身和Web应用程序可能对同一开源项目库具有不同的要求和/或优先级。的<strong><hidden-classes></hidden-classes></strong>当Web应用程序对库的特定版本的需求与Geronimo本身使用的版本不同时，通常使用element。一个简单的例子是Web应用程序使用<strong>Log4J</strong>通用日志记录库的版本，并且最重要的是包括它的版本与Geronimo服务器本身使用的版本不同。这可能无法提供所需的结果。就这样<strong><hidden-classes></hidden-classes></strong>元素可用于“隐藏”由Web应用程序模块的所有父类加载器加载的Log4J类，包括由Geronimo服务器本身加载的Log4J类，并且只有Web应用程序库随附的Log4J类将被加载（不是不再支持）。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><non-overridable-classes></non-overridable-classes></strong>元素也可以用来提供对Geronimo类加载器层次结构的某种程度的控制，但是所使用的方式与Java所提供的方式完全相反。 <strong><hidden-classes></hidden-classes></strong>元件。此元素可用于指定<strong>仅从</strong> Web应用程序模块的父类加载器加载的类或软件包的列表，以确保使用Geronimo服务器的库版本而不是Web应用程序随附的版本（不是不再支持）。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><inverse-classloading></inverse-classloading></strong>元素可用于指定该模块的标准类加载器委托将被反转。Geronimo类加载器委托遵循Java EE 5规范，并且正常的行为是在检查当前类加载器之前从父类加载器（如果有）加载类。当。。。的时候<strong><inverse-classloading></inverse-classloading></strong>使用元素时，此行为将被逆转，并且在查找父类加载器之前将始终检查当前类加载器。此元素类似于<strong><hidden-classes></hidden-classes></strong>元素，因为所需的行为是给予与Web应用程序一起打包的库（即，在WEB-INF / lib中）优先于Geronimo服务器本身使用的任何库（不再受支持，请使用<import-package></import-package>以上）。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li>的<strong><suppress-default-environment></suppress-default-environment></strong>元素可用于抑制模块对环境的继承（即，将抑制Geronimo构建器在部署计划时构建的任何默认环境）。如果<strong><suppress-default-environment></suppress-default-environment></strong>指定元素，那么将取消构建器在部署计划时构建的任何默认环境。一个有用的例子是在应用程序客户端上的单独（独立）模块中部署连接器时（不作为客户端计划的一部分）。连接器构建器的defaultEnvironment包含一些无法在应用程序客户端上运行的服务器模块，因此您需要取消默认环境并提供完整的环境，包括要在应用程序客户端上运行的非应用程序客户端模块的所有父级。 。但是，此元素不应用于Web应用程序。</li></ul>


<p>下面显示了一个示例<strong>geronimo-web.xml</strong>文件，使用<strong><sys:environment></sys:environment></strong>元件：</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title"><sys:environment>示例</sys:environment></parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"><sys:environment><sys:moduleid><sys:groupid>默认</sys:groupid> <sys:artifactid>geronimo-web-7</sys:artifactid> <sys:version>1.0</sys:version> <sys:type>车</sys:type></sys:moduleid> <sys:dependencies><sys:dependency><sys:groupid>org.apache.geronimo.configs</sys:groupid> <sys:artifactid>tomcat7</sys:artifactid> <sys:version>3.0</sys:version> <sys:type>车</sys:type></sys:dependency> <sys:dependency><sys:groupid>默认</sys:groupid> <sys:artifactid>geronimo-web-6</sys:artifactid> <sys:version>1.0</sys:version> <sys:type>车</sys:type></sys:dependency></sys:dependencies> <sys:hidden-classes></sys:hidden-classes><sys:non-overridable-classes></sys:non-overridable-classes><sys:inverse-classloading></sys:inverse-classloading><sys:suppress-default-environment></sys:suppress-default-environment></sys:environment></web-app></plain-text-body>
<h3 id="geronimo-web.xml-<context-root>"><context-root></context-root></h3>

<p>的<strong><context-root></context-root></strong> XML元素使用geronimo-web.xml文件的Geronimo默认名称空间，并在此处进行了说明：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li></ul>


<p>此元素可用于提供已部署的Web应用程序的Web上下文路径，该路径出现在用于寻址Geronimo服务器上的应用程序的URL中。例如，如果将上下文根指定为<strong><context-root>web-app-test，</context-root></strong>则该应用程序的URL将类似于<a shape="rect" class="external-link" href="http://host:8080/web-app-test/" rel="nofollow">http：// host：8080 / web-app-test /</a> 。如果上下文根目录指定为<strong><context-root>/</context-root></strong> ，则它将成为服务器的默认Web应用程序。的<strong><context-root></context-root></strong> element是可选的，但是如果未指定，则Web应用程序的上下文根将默认为WAR名称（不带扩展名）。如果Web应用程序打包在EAR中，则可以指定上下文根<br clear="none">在EAR的application.xml部署描述符中。</p>

<h3 id="geronimo-web.xml-<work-dir>"><work-dir></work-dir></h3>

<p>的<strong><work-dir></work-dir></strong> XML元素使用geronimo-web.xml文件的Geronimo默认名称空间，并在此处进行了说明：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li></ul>


<p>该元素可用于提供该Web应用程序将使用的工作目录。对于Jetty，这将相对于jetty home，默认情况下为<strong>var / jetty</strong> ；对于Tomcat，这将相对于<strong>catalina.home</strong> 。</p>

<h3 id="geronimo-web.xml-<naming:web-container>"><naming:web-container></naming:web-container></h3>

<p>的<strong><naming:web-container></naming:web-container></strong> XML元素使用Geronimo Naming命名空间，该命名空间用于标识用于解析EJB引用，资源引用和Web服务引用的公共元素，并在此处进行记录：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html</a></li></ul>


<p>此元素用于通过对配置的moduleId的模式或对GBean的链接来指定对<strong>Web容器</strong>特定的GBean的引用。例如，考虑需要使用专用端口在Tomcat容器中运行Web应用程序的情况，这样不允许其他Web应用程序使用该端口。为此，必须为“容器”，“引擎”，“主机”和“连接器”定义一个单独的GBean，并且<strong><naming:web-container></naming:web-container></strong>元素必须用于引用此新的Tomcat容器。下面显示了一个示例<strong>geronimo-web.xml</strong>文件：</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title"><naming:web-container>示例</naming:web-container></parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.2" xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"><sys:environment><sys:moduleid><sys:groupid>默认</sys:groupid> <sys:artifactid>geronimo-web-7</sys:artifactid> <sys:version>1.0</sys:version> <sys:type>汽车</sys:type></sys:moduleid> <sys:dependencies></sys:dependencies><sys:hidden-classes></sys:hidden-classes><sys:non-overridable-classes></sys:non-overridable-classes><sys:inverse-classloading></sys:inverse-classloading><sys:suppress-default-environment></sys:suppress-default-environment></sys:environment> <context-root>contextroot工作<work-dir>目录<naming:web-container><naming:gbean-link>TomcatWebAppContainer</naming:gbean-link></naming:web-container> <host>virtualhost2.com</host> <gbean name="TomcatWebAppContainer1" class="org.apache.geronimo.tomcat.TomcatContainer"><attribute name="catalinaHome">var / catalina</attribute> <reference name="EngineGBean"><name>TomcatWebAppEngine1</name></reference> <reference name="ServerInfo"><name>ServerInfo</name></reference> <reference name="WebManager"><name>TomcatWebManager</name></reference></gbean> <gbean name="TomcatWebAppEngine1"><attribute name="className">org.apache.geronimo.tomcat。TomcatEngine</attribute> <attribute name="initParams">名称= TomcatEngine4WebApp</attribute> <reference name="DefaultHost"><name>TomcatWebAppHost1</name></reference> <reference name="TomcatValveChain"><name>AccessLogValve</name></reference></gbean> <gbean name="TomcatWebAppHost1"><attribute name="className">org.apache.catalina.core。StandardHost</attribute> <attribute name="initParams">名称= virtualhost1.com appBase = workDir =工作</attribute></gbean> <gbean name="TomcatWebAppHost2"><attribute name="className">org.apache.catalina.core。StandardHost</attribute> <attribute name="initParams">名称= virtualhost2.com appBase = workDir =工作</attribute> <reference name="Engine"><name>TomcatWebAppEngine1</name></reference></gbean> <gbean name="AccessLogValve"><attribute name="className">org.apache.catalina.valves。AccessLogValve</attribute> <attribute name="initParams">前缀= virtualhost2_access_log。suffix = .txt pattern = common</attribute></gbean> <gbean name="TomcatWebAppConnector1"><attribute name="name">HTTP</attribute> <attribute name="host">0.0.0.0</attribute> <attribute name="port">8081</attribute> <attribute name="maxHttpHeaderSize">8192</attribute> <attribute name="maxThreads">150</attribute> <attribute name="minSpareThreads">25</attribute> <attribute name="maxSpareThreads">75</attribute> <attribute name="enableLookups">false</attribute> <attribute name="redirectPort">8453</attribute> <attribute name="acceptCount">100</attribute> <attribute name="connectionTimeout">20000</attribute> <attribute name="disableUploadTimeout">是</attribute> <reference name="TomcatContainer"><name>TomcatWebAppContainer1</name></reference> <reference name="ServerInfo"><name>ServerInfo</name></reference></gbean>

</work-dir></context-root></web-app>
</plain-text-body>
<h3 id="geronimo-web.xml-<container-config>"><container-config></container-config></h3>

<p>如前所述， <strong>geronimo-web.xml</strong>文件实际上可以使用三种模式。第一个与容器无关，可用于将Web应用程序部署到Geronimo支持的两个Web容器中。后两个是容器相关的，其中包含特定于Tomcat或Jetty Web容器的元素：</p>

<ol><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a></li><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-tomcat-2.0.1.xsd.html</a></li><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-jetty-2.0.2.xsd.html</a></li></ol>


<p>由用户自行决定使用哪个。如果要将Web应用程序同时部署到Tomcat和Jetty中，则通常使用通用模式，如果要将Web应用程序仅部署到Tomcat或Jetty中，则通常使用特定于容器的模式之一。但是，可以使用另一个选项，因为通用架构允许通过使用<strong><container-config></container-config></strong>元件。即使Web应用程序要求针对Tomcat或Jetty（或两者）进行容器特定的配置，这也允许用户使用通用模式。下面显示了一个示例<strong>geronimo-web.xml</strong>文件，使用<strong><container-config></container-config></strong>元素以配置Tomcat Web容器。请注意<strong><host></host></strong> ， <strong><valve-chain></valve-chain></strong>和<strong><tomcat-realm></tomcat-realm></strong>元素仅由Tomcat容器而不是Jetty理解：</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title"><container-config>示例</container-config></parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"><sys:environment><sys:moduleid><sys:groupid>默认</sys:groupid> <sys:artifactid>geronimo-web-6</sys:artifactid> <sys:version>1.0</sys:version> <sys:type>汽车</sys:type></sys:moduleid></sys:environment> <container-config><tomcat xmlns="http://geronimo.apache.org/xml/ns/web/tomcat/config-1.0"><host>testhost.com</host> <valve-chain>FirstValve</valve-chain> <tomcat-realm>TomcatRealm</tomcat-realm></tomcat></container-config></web-app></plain-text-body>
<h3 id="geronimo-web.xml-<sys:gbean>"><sys:gbean></sys:gbean></h3>

<p>的<strong><sys:gbean></sys:gbean></strong> XML元素使用Geronimo System命名空间，并在此处进行记录：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-module-1.2.xsd.html</a></li></ul>


<p>的<strong><sys:gbean></sys:gbean></strong>元素用于定义与Web应用程序模块一起配置和部署的GBean。这些其他Geronimo服务将在部署应用程序时部署（并在应用程序停止时停止）。通常，这些服务的实现类包含在服务器级别，并使用依赖项元素进行引用。</p>

<h3 id="geronimo-web.xml-<ee:persistence>"><ee:persistence></ee:persistence></h3>

<p>的<strong><ee:persistence></ee:persistence></strong> XML元素使用Java EE Persistence名称空间，并在此处进行记录：</p>
<ul><li><a shape="rect" class="external-link" href="http://java.sun.com/xml/ns/persistence/" rel="nofollow">http://java.sun.com/xml/ns/persistence/</a></li></ul>


<p>Apache Geronimo使用<a shape="rect" class="external-link" href="http://openjpa.apache.org/">OpenJPA</a>向服务器中部署的Java EE应用程序提供Java Persistence API。持久性部署描述符信息通常使用<strong>persistence.xml</strong>文件提供。的<strong><ee:persistence></ee:persistence></strong>可以使用顶级元素在<strong>geronimo-web.xml</strong>文件中包括持久性部署描述符。可以在以下位置找到有关JPA部署描述符的更多信息和细节： <a shape="rect" href="creating-deployment-plans-for-java-persistence-api.html">为Java Persistence API创建部署计划</a> 。</p>

<h3 id="geronimo-web.xml-Security">安全</h3>

<p>可以在此处找到有关配置Geronimo安全性的其他信息和详细信息：</p>

<ul><li><a shape="rect" href="administering-security.html">管理安全</a></li></ul>


<h4 id="geronimo-web.xml-<security-realm-name>"><security-realm-name></security-realm-name></h4>

<p>的<strong><security-realm-name></security-realm-name></strong> XML元素使用geronimo-web.xml文件的Geronimo默认名称空间，并在此处进行了说明：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-web-2.0.1.xsd.html</a> 。</li></ul>


<p>的<strong><security-realm-name></security-realm-name></strong>元素用于指定将用于Web应用程序的用户身份验证的安全领域的名称。它与<strong><security-constraint></security-constraint></strong>此Web应用程序的相应<strong>web.xml</strong>部署计划中的元素。该元素不会导致在Geronimo中创建新的安全领域，它引用了已经创建和配置的安全领域。有关通常如何从Geronimo管理控制台完成此操作的详细信息，请参见<a shape="rect" href="administering-security.html">管理安全性</a> 。</p>

<h2 id="geronimo-web.xml-<authenticaiton>"><authenticaiton></authenticaiton></h2>

<p>的<strong><authenticaiton></authenticaiton></strong>元件被用于指定特定JASPI <strong><strong><strong>AuthConfProvider，ServerAuthConfig，ServerAuthContext，</strong></strong></strong>或<strong>ServerAuthModule</strong>配置，以用于认证，而不是在<strong>web.xml</strong>配置标准的认证方法。</p>

<p><strong><jaspi:authconfprovider></jaspi:authconfprovider></strong> ， <strong><jaspi:serverauthconfig></jaspi:serverauthconfig></strong> <strong><jaspi；serverauthcontext》>< /strong="">，和<strong><jaspi:serverauthmodule></jaspi:serverauthmodule></strong> XML元素使用Geronimo JASPI命名空间，并在此处进行记录：</jaspi；serverauthcontext》><></strong></p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-jaspi.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-jaspi.html</a> 。</li></ul>


<parameter ac:name="">xml</parameter> <parameter ac:name="title"><authentication>示例</authentication></parameter> <parameter ac:name="borderStyle">可靠的</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"><sys:environment><sys:moduleid><sys:groupid>默认</sys:groupid> <sys:artifactid>geronimo-web-6</sys:artifactid> <sys:version>1.0</sys:version> <sys:type>汽车</sys:type></sys:moduleid></sys:environment> <authentication><jaspi xmlns="http://geronimo.apache.org/xml/ns/geronimo-jaspi"><configprovider><messagelayer>Http</messagelayer> <appcontext>test-app1</appcontext> <description>描述</description> <clientauthconfig><authenticationcontextid>authenticationContextID1</authenticationcontextid> <protected>true</protected> <clientauthcontext><clientauthmodule><classname>org.apache.geronimo.components.jaspi.providers。DummyClientAuthModule</classname></clientauthmodule></clientauthcontext></clientauthconfig> <serverauthconfig><authenticationcontextid>authenticationContextID2</authenticationcontextid> <protected>true</protected> <serverauthcontext><serverauthmodule><classname>org.apache.geronimo.components.jaspi.providers。DummyServerAuthModule</classname></serverauthmodule></serverauthcontext></serverauthconfig> <persistent>true</persistent>
	</configprovider>
       </jaspi>
    </authentication>

</web-app>
</plain-text-body>
<h4 id="geronimo-web.xml-<app:security>"><app:security></app:security></h4>

<p>的<strong><app:security></app:security></strong> XML元素使用Geronimo Security名称空间，并在此处进行记录：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-security-2.0.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-security-2.0.xsd.html</a> 。</li></ul>


<p>的<strong><app:security></app:security></strong>元素将Web应用程序的安全角色映射设置分组。这是一个可选元素，但如果存在，则所有Web模块都必须按照JACC规范中的概述进行适当的访问检查。此元素包括<strong><role-mapping></role-mapping></strong>引用了在<strong><security-role></security-role></strong> <strong>web.xml</strong>文件中的元素。下面显示了一个示例<strong>web.xml</strong>和相应的<strong>geronimo-web.xml</strong>文件，其中在<strong>geronimo-web.xml中</strong>引用了<strong>web.xml中</strong>定义的<strong>“ admin”</strong>角色名称：</p>

<parameter ac:name="">xml</parameter> <parameter ac:name="title"><security>web.xml示例</security></parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"><display-name>Geronimo Remote Deployer</display-name> <description>在与Geronimo服务器不同的机器上运行时，接收来自部署程序的文件上载请求。
    </description> <servlet><display-name>文件上传</display-name> <servlet-name>文件上传</servlet-name> <servlet-class>org.apache.geronimo.deployment.remote。FileUploadServlet</servlet-class></servlet> <servlet-mapping><servlet-name>文件上传</servlet-name> <url-pattern>/上传</url-pattern></servlet-mapping> <security-constraint><web-resource-collection><web-resource-name>上传的Servlet</web-resource-name> <url-pattern>/载</url-pattern> <http-method>POST</http-method></web-resource-collection> <auth-constraint><role-name>管理员</role-name></auth-constraint></security-constraint> <login-config><auth-method>BASIC</auth-method> <realm-name>Geronimo的文件上传</realm-name></login-config> <security-role><role-name>管理</role-name></security-role></web-app></plain-text-body> <parameter ac:name="">XML</parameter> <parameter ac:name="title"><security>Geronimo的web.xml文件示例</security></parameter> <parameter ac:name="borderStyle">固态</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0" xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" xmlns:cfg="http://geronimo.apache.org/xml/ns/deployment-1.2"><dep:environment><dep:moduleid><dep:groupid>org.apache.geronimo.plugins</dep:groupid> <dep:artifactid>Geronimo的远程部署</dep:artifactid> <dep:version>2.1.1</dep:version></dep:moduleid> <dep:dependencies></dep:dependencies><dep:hidden-classes></dep:hidden-classes><dep:non-overridable-classes></dep:non-overridable-classes></dep:environment> <context-root>/远程部署</context-root> <security-realm-name>geronimo-admin</security-realm-name> <sec:security><sec:role-mappings><sec:role role-name="admin"><sec:principal class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal" name="admin" designated-run-as="true"></sec:principal></sec:role></sec:role-mappings></sec:security></web-app></plain-text-body>
<h3 id="geronimo-web.xml-JNDIEnvironmentReferences">JNDI环境参考</h3>

<p>本节中的所有JNDI参考元素都使用Geronimo Naming名称空间，该名称空间用于标识用于解析EJB参考，资源参考和Web服务参考的公共元素，并在此处进行了说明：</p>
<ul><li><a shape="rect" class="external-link" href="http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html">http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2.xsd.html</a></li></ul>


<p>此外，可以在这里找到有关JNDI引用的更多信息和详细信息： <a shape="rect" href="global-jndi.html">Global JNDI</a> 。</p>

<h4 id="geronimo-web.xml-<naming:abstract-naming-entry>"><naming:abstract-naming-entry></naming:abstract-naming-entry></h4>

<p>的<strong><abstract-naming-entry></abstract-naming-entry></strong>元素在技术上不是JNDI参考元素。它包含在本节中，因为它是用于包含以下JNDI引用类型的抽象元素：</p>
<ul><li><strong><gbean-ref></gbean-ref></strong>
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">的<strong><gbean-ref></gbean-ref></strong>元素用于将GBean引用映射到当前模块外部配置的GBean<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li><strong><persistenceunit-ref></persistenceunit-ref></strong>
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">的<strong><persistenceunit-ref></persistenceunit-ref></strong>元素用于将持久性单元引用映射到当前模块外部配置的持久性单元<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></li><li><strong><persistencecontext-ref></persistencecontext-ref></strong>
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">的<strong><persistencecontext-ref></persistencecontext-ref></strong>元素用于将持久性上下文引用映射到当前模块外部配置的持久性上下文</li></ul>


<p>下面显示了一个示例<strong>geronimo-web.xml</strong>文件，使用<strong><abstract-naming-entry></abstract-naming-entry></strong>引用持久性单元的元素：</p>

<parameter ac:name="">XML</parameter> <parameter ac:name="title"><abstract-naming-entry>示例</abstract-naming-entry></parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" xmlns:naming="http://geronimo.apache.org/schemas-3.0/docs/geronimo-naming-1.2"><sys:environment><sys:moduleid><sys:groupid>默认</sys:groupid> <sys:artifactid>的geronimo的web-6</sys:artifactid> <sys:version>1.0</sys:version> <sys:type>汽车</sys:type></sys:moduleid></sys:environment> <naming:abstract-naming-entry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="naming:persistence-unit-refType"><naming:persistence-unit-ref-name>消息驱动-persistenceunitref-unitrefname</naming:persistence-unit-ref-name> <naming:persistence-unit-name>消息驱动-persistenceunitref-单元名</naming:persistence-unit-name> <naming:pattern><naming:groupid>消息驱动-persistenceunitref图案GROUPID</naming:groupid> <naming:artifactid>消息驱动-persistenceunitref图案的artifactId</naming:artifactid> <naming:version>消息驱动-persistenceunitref图案版本</naming:version> <naming:module>消息驱动-persistenceunitref图案模块</naming:module> <naming:name>消息驱动-persistenceunitref模式名称</naming:name></naming:pattern></naming:abstract-naming-entry></web-app></plain-text-body>
<h4 id="geronimo-web.xml-<naming:ejb-ref>"><naming:ejb-ref></naming:ejb-ref></h4>

<p>的<strong><naming:ejb-ref></naming:ejb-ref></strong>元素用于使用远程本地和远程接口将EJB引用映射到其他应用程序中的EJB。包含被引用的EJB的应用程序应该在同一EAR中，或者应该包含在此应用程序的依赖项列表中。还应注意，由于所引用的EJB在不同的JVM中，因此所有客户端接口也应包括在当前应用程序中。</p>

<h4 id="geronimo-web.xml-<naming:ejb-local-ref>"><naming:ejb-local-ref></naming:ejb-local-ref></h4>

<p>的<strong><naming:ejb-local-ref></naming:ejb-local-ref></strong>元素用于使用本地home和本地接口将EJB引用映射到其他应用程序中的EJB。包含被引用的EJB的应用程序应该在同一EAR中，或者应该包含在此应用程序的依赖项列表中。还应注意，由于所引用的EJB在不同的JVM中，因此所有客户端接口也应包括在当前应用程序中。</p>

<h4 id="geronimo-web.xml-<naming:service-ref>"><naming:service-ref></naming:service-ref></h4>

<p>的<strong><naming:service-ref></naming:service-ref></strong>用于将服务引用映射到其他应用程序中的服务。包含被引用的EJB的应用程序应该在同一EAR中，或者应该包含在此应用程序的依赖项列表中。</p>

<h4 id="geronimo-web.xml-<naming:resource-ref>"><naming:resource-ref></naming:resource-ref></h4>

<p>的<strong><naming:resource-ref></naming:resource-ref></strong>元素用于将资源引用映射到在当前应用程序外部配置的诸如JDBC资源，JMS资源等资源。</p>

<h4 id="geronimo-web.xml-<naming:resource-env-ref>"><naming:resource-env-ref></naming:resource-env-ref></h4>

<p>的<strong><naming:resource-env-ref></naming:resource-env-ref></strong>元素用于将资源引用映射到作为连接器一部分部署的管理对象。</p>

<h4 id="geronimo-web.xml-<naming:message-destination>"><naming:message-destination></naming:message-destination></h4>

<p>的<strong><naming:message-destination></naming:message-destination></strong>元素用于将资源引用映射到已部署的Web应用程序中使用的消息目标。这些通常是JMS队列或主题，其作用类似于传递消息的目的地。与本节中的所有JNDI引用一样，此元素将不会导致创建消息目标，而是引用已部署的Web应用程序中使用的现有消息目标。</p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : geronimo-web.xml';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>