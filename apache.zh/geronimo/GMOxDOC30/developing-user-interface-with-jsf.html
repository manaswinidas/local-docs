<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Developing user interface with JSF">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Developing user interface with JSF">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href="asset?aid=6" rel="stylesheet" type="text/css">
  <link href="asset?aid=7" rel="stylesheet" type="text/css">
  <script src="http://geronimo.apache.org/resources/highlighter/scripts/shCore.js" type="text/javascript"></script>
  <script src="http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js" type="text/javascript"></script>
  <script src="http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js" type="text/javascript"></script>
  <script src="http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js" type="text/javascript"></script>
  
  <script type="text/javascript">SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();</script>

    <title>Apache Geronimo v3.0文档：使用JSF开发用户界面</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="developing.html">开发</a> > <a href="tutorials.html">教程</a> > <a href="developing-web-applications.html">开发Web应用程序</a> > <a href="developing-javaserver-faces-applications.html">开发JavaServer Faces应用程序</a> > <a href="developing-user-interface-with-jsf.html">使用JSF开发用户界面</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">使用JSF开发用户界面</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645271"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645271">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645271"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645271">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645271"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645271">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">

<p>本教程说明了JSF的以下方面。</p>

<ul><li>JSF的各种UI组件（文本框，组合框，选择框，单选按钮，提交按钮）。</li><li>将验证与UI组件相关联。</li><li>使用eclipse向导配置导航规则。</li><li>配置JSF管理的bean。</li><li>将托管bean动作与事件相关联。</li><li>使用JPA通过托管bean持久化JSP中捕获的数据。</li></ul>


<p>本教程分为以下几节。</p>
<style type="text/css">/*<![CDATA[*/
div.rbtoc1572612947985 {padding: 0px;}
div.rbtoc1572612947985 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1572612947985 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1572612947985">
<ul class="toc-indentation"><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-SettinguptheEclipseenvironment">设置Eclipse环境</a></li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-CreatingWEBapplicationwithentities">使用实体创建WEB应用程序</a>
<ul class="toc-indentation"><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-CreatingadynamicWebprojectanddefiningJSFcapabilities">创建一个动态Web项目并定义JSF功能</a></li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-Implementingpersistencefortheapplication">为应用程序实现持久性</a></li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-DefiningUIcomponents">定义UI组件</a></li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-ConfiguringJSFmanagedbeansandassociatingmanagedbeanactionstoevents">配置JSF受管Bean并将受管Bean操作与事件相关联</a></li></ul>
</li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-SettingupthedatabasetablesandtheDatasource">设置数据库表和数据源</a></li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-Deployingthe(war)application">部署（战争）应用程序</a></li><li><a shape="rect" href="#DevelopinguserinterfacewithJSF-Runningtheapplication">运行应用程序</a></li></ul>
</div>

<p>为了开发，部署和运行该应用程序，需要以下环境。</p>

<ul><li>Sun JDK 5.0+（J2SE 1.5）</li><li>Eclipse 3.3.1.1（Europa发行版的Eclipse Classic软件包），特定于平台</li><li>Web工具平台（WTP）2.0.1</li><li>数据工具平台（DTP）1.5.1</li><li>Eclipse建模框架（EMF）2.3.1</li><li>图形编辑框架（GEF）3.3.1</li></ul>



<p>可以从此<a shape="rect" href="developing-user-interface-with-jsf.data/EmployeeWEB.war?version=1&modificationDate=1214966340000&api=v2" data-linked-resource-id="20873958" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="EmployeeWEB.war" data-nice-type="Java Archive" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645271" data-linked-resource-container-version="47">链接</a>下载整个应用程序。</p>

<h2 id="DevelopinguserinterfacewithJSF-SettinguptheEclipseenvironment">设置Eclipse环境</h2>

<ol><li>下载Apache Geronimo并将其安装在服务器上。请参阅<a shape="rect" href="getting-and-installing-geronimo.html">获取和安装Geronimo</a>中的说明。</li><li>安装eclipse IDE，下载geronimo eclipse插件并将其安装在eclipse之上。请参阅<a shape="rect" href="installing-geronimo-eclipse-plugin.html">安装Geronimo Eclipse插件</a>以获取指示信息。</li><li>在Eclipse中为Apache Geronimo创建运行时环境。查看<a shape="rect" class="unresolved" href="#">定义Geronimo服务器运行时和服务器</a>以获取有关为Apache Geronimo安装运行时的说明。</li></ol>


<h2 id="DevelopinguserinterfacewithJSF-CreatingWEBapplicationwithentities">使用实体创建WEB应用程序</h2>
<p>本节按以下步骤组织：</p>
<h3 id="DevelopinguserinterfacewithJSF-CreatingadynamicWebprojectanddefiningJSFcapabilities">创建一个动态Web项目并定义JSF功能</h3>
<ol><li>启动eclipse向导，右键单击<em>Project Explorer</em> ，然后单击<strong>New-> Dynamic Web Project。</strong>
<br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/1.jpg"></span> </li><li>输入项目名称为<em>EmployeeWEB</em> ，然后单击“ <strong>下一步”</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/2.jpg"></span> </li><li>在“ <em>新建动态Web项目”</em>向导上，选中“ <strong>项目构面”</strong>复选框，然后选择以下屏幕快照中的<em>版本</em>值，然后单击“ <strong>下一步”</strong>按钮。
<br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/3.jpg"></span></li><li>在“ <em>Web模块”</em>向导上，确保按以下方式检查了“ <strong>生成部署描述符”</strong> ，然后单击“ <strong>下一步”</strong>按钮。
<br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/4.jpg"></span></li><li>在<em>Geronimo Deployment Plan</em>向导上，提供如下屏幕截图所示的moduleId值，然后单击<strong>Next</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/5.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>在“ <em>JSF功能”</em>向导上，选中第二个单选按钮，然后单击组合框旁边的“ <strong>新建”</strong>按钮。这将打开“ <em>创建JSF实现库”</em>向导。</li><li>提供<em>库名称</em>作为<strong>MyJSFLibrary</strong>并通过单击<strong>添加</strong>按钮添加以下jar。最后，单击<strong>完成</strong>按钮。
	<ul><li><geronimo_home>\ repository \ commons-beanutils \ commons-beanutils \ 1.7.0 \ commons-beanutils-1.7.0.jar</geronimo_home></li><li><geronimo_home>\ repository \ commons-collections \ commons-collections \ 3.2 \ commons-collections-3.2.jar</geronimo_home></li><li><geronimo_home>\ repository \ commons-digester \ commons-digester \ 1.8 \ commons-digester-1.8.jar</geronimo_home></li><li><geronimo_home>\ repository \ commons-logging \ commons-logging \ 1.0.4 \ commons-logging-1.0.4.jar</geronimo_home></li><li><geronimo_home>\ repository \ org \ apache \ myfaces \ core \ myfaces-api \ 1.2.6 \ myfaces-api-1.2.6.jar</geronimo_home></li><li><geronimo_home>\ repository \ org \ apache \ myfaces \ core \ myfaces-impl \ 1.2.6 \ myfaces-impl-1.2.6.jar<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/6.jpg"></span> </geronimo_home></li></ul>
	</li><li>现在，在“ <em>JSF功能”</em>向导上，将<em>URL映射模式</em>添加为<strong>* .jsf</strong> ，然后单击“ <strong>完成”</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/7.jpg"></span> <br class="atl-forced-newline" clear="none"></li><li>如下图所示，这将在<em>Project Explorer中</em>创建<strong>EmployeeWEB</strong>应用程序。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/8.jpg"></span> <br class="atl-forced-newline" clear="none"></li><li>右键单击<strong>WEB-INF</strong>文件夹，然后导航到“ <strong>新建”->“文件夹”，</strong>并按名称<em>tld</em>创建一个文件夹，如下面的屏幕快照所示。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/9.jpg"></span> <br class="atl-forced-newline" clear="none"></li><li>复制<code>myfaces_core.tld</code>和<code>myfaces_html.tld</code>文件放入<em>tld</em>文件夹。这些<code>*.tld</code>文件位于<code>myfaces-impl-1.2.6.jar</code>文件。</li><li>我们将使用JPA连接到在嵌入式Derby数据库中创建的EmployeeDB数据库。JPA用途<code>persistence.xml</code>配置文件。在<em>Project Explorer</em>的<em>EmployeeWEB-> build-> classes</em>文件夹中创建一个<em>META-INF</em>文件夹。的内容<code>persistence.xml</code>如下面所述。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/10.jpg"></span>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>persistence.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
 http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0"&gt;

 &lt;persistence-unit name="Employee" transaction-type="JTA"&gt;  
  &lt;provider&gt;org.apache.openjpa.persistence.PersistenceProviderImpl&lt;/provider&gt;
  &lt;non-jta-data-source&gt;EmployeeDS&lt;/non-jta-data-source&gt;
 &lt;/persistence-unit&gt;
	
&lt;/persistence&gt;

</pre>
</div></div></li></ol>


<h3 id="DevelopinguserinterfacewithJSF-Implementingpersistencefortheapplication">为应用程序实现持久性</h3>
<ol><li>右键单击<strong>EmployeeWEB</strong>并导航到<strong>New-> Class</strong>并创建<code>Employee.java</code>如以下屏幕截图所示。提供值后，单击<strong>完成</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/11.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>的内容<code>com.jpa.sample.Employee</code>如下面所述。这是与JPA一起用于持久性的实体类。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>com.jpa.sample。雇员</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
package com.jpa.sample;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "EMPLOYEE")
public class Employee {

 @Id
 public int empNo;
 public String empName;
 public String deptName;
 public String sex;
 public double salary;
 public String band;

 public int getEmpNo() {
  return empNo;
 }

 public void setEmpNo(int empNo) {
  this.empNo = empNo;
 }

 public String getEmpName() {
  return empName;
 } 

 public void setEmpName(String empName) {
  this.empName = empName;
 }

 public String getDeptName() {
  return deptName;
 }

 public void setDeptName(String deptName) {
  this.deptName = deptName;
 }

 public String getSex() {
  return sex;
 }

 public void setSex(String sex) {
  this.sex = sex;
 }

 public double getSalary() {
  return salary;
 }

 public void setSalary(double salary) {
  this.salary = salary;
 }

 public String getBand() {
  return band;
 }

 public void setBand(String band) {
  this.band = band;
 }

}
</pre>
</div></div></li><li>同样，创建<code>sample.jsf.Employee</code> 。该类的内容如下。这是JSF使用的托管bean。<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>sample.jsf。雇员</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
package sample.jsf;

import java.util.ArrayList;

import javax.faces.event.ActionEvent;
import javax.faces.model.SelectItem;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.transaction.UserTransaction;

public class Employee {

 public int empNo;
 public String empName;
 public String deptName;
 public String sex;
 public double salary;
 public String band;
 ArrayList&lt;SelectItem&gt; deptOptions;

 @PersistenceContext    
 private EntityManager em;

 public Employee(){

  deptOptions = new ArrayList&lt;SelectItem&gt;();
  
  SelectItem option = new SelectItem("Inventory", "Inventory");
  deptOptions.add(option);

  option = new SelectItem("Production", "Production");
  deptOptions.add(option);

  option = new SelectItem("Accounts", "Accounts");
  deptOptions.add(option);

  option = new SelectItem("Finance", "Finance");
  deptOptions.add(option);

  option = new SelectItem("Marketing", "Marketing");
  deptOptions.add(option);

  option = new SelectItem("IncomeTax", "IncomeTax");
  deptOptions.add(option);

  option = new SelectItem("Engineering", "Engineering");
  deptOptions.add(option);

 }

 public int getEmpNo() {
  return empNo;
 }

 public void setEmpNo(int empNo) {
  this.empNo = empNo;
 }

 public String getEmpName() {
  return empName;
 }

 public void setEmpName(String empName) {
  this.empName = empName;
 }

 public String getDeptName() {
  return deptName;
 }

 public void setDeptName(String deptName) {
  this.deptName = deptName;
 }

 public String getSex() {
  return sex;
 }

 public void setSex(String sex) {
  this.sex = sex;
 }

 public double getSalary() {
 return salary;
 }

 public void setSalary(double salary) {
  this.salary = salary;
 }

 public String getBand() {
  return band;
 }

 public void setBand(String band) {
  this.band = band;
 }

 public void addEmployee(ActionEvent event){

  com.jpa.sample.Employee employeeDup = 
    em.find(com.jpa.sample.Employee.class, this.empNo);
  
  if(employeeDup != null)
    throw new IllegalArgumentException
    ("Message : sample.jsf.Employee :
      Employee Already Exits ("+this.empNo+")");

  com.jpa.sample.Employee employee = 
   new com.jpa.sample.Employee();

  employee.setBand(this.band);
  employee.setDeptName(this.deptName);
  employee.setEmpName(this.empName);
  employee.setEmpNo(this.empNo);
  employee.setSalary(this.salary);
  employee.setSex(this.sex);

  try{

   Context ctx = new InitialContext();
   UserTransaction ut = 
       (UserTransaction)ctx.lookup("java:comp/UserTransaction");
   ut.begin();
   em.persist(employee);
   ut.commit();

  }catch (Exception e){
   throw new IllegalArgumentException
    ("Message : sample.jsf.Employee : Exception :"+e);
  }


}

 public void editEmployee(ActionEvent event){

 try{

  Context ctx = new InitialContext();
  UserTransaction ut = (UserTransaction)
         ctx.lookup("java:comp/UserTransaction");
  ut.begin();
  com.jpa.sample.Employee employee = 
    em.find(com.jpa.sample.Employee.class, this.empNo);
  employee.setBand(this.band);
  employee.setDeptName(this.deptName);
  employee.setEmpName(this.empName);
  employee.setEmpNo(this.empNo);
  employee.setSalary(this.salary);
  employee.setSex(this.sex);
  ut.commit();
 }catch (Exception e){
  throw new IllegalArgumentException
  ("Message : sample.jsf.Employee : Exception :"+e);
 }

 }

 public ArrayList&lt;SelectItem&gt; getDeptOptions() {
  return deptOptions;
 }

 public void setDeptOptions(ArrayList&lt;SelectItem&gt; deptOptions) {
  this.deptOptions = deptOptions;
 }

 public void retrieveEmployee(ActionEvent event){

  com.jpa.sample.Employee employeeDup = 
   em.find(com.jpa.sample.Employee.class, this.empNo);

  if(employeeDup == null)
  throw new IllegalArgumentException
   ("Message : sample.jsf.Employee : Employee does not exit ("+this.empNo+")");

  this.setBand(employeeDup.getBand());
  this.setDeptName(employeeDup.getDeptName());
  this.setEmpName(employeeDup.getEmpName());
  this.setEmpNo(employeeDup.getEmpNo());
  this.setSalary(employeeDup.getSalary());
  this.setSex(employeeDup.getSex());

 }

}

</pre>
</div></div></li></ol>


<h3 id="DevelopinguserinterfacewithJSF-DefiningUIcomponents">定义UI组件</h3>
<ol><li>右键单击<strong>EmployeeWEB</strong>项目并创建<code>index.jsp</code>如下。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/12.jpg"></span>
<br class="atl-forced-newline" clear="none">的内容<code>index.jsp</code>如下面所述。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>index.jsp</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
&lt;body&gt;
  &lt;a href="/EmployeeWEB/addEmployee.jsf"&gt;
    &lt;font size=4 color='blue'&gt;
      Add employee details
    &lt;/font&gt;&lt;/a&gt; &lt;br/&gt;

  &lt;a href="/EmployeeWEB/RetrieveEmployee.jsf"&gt;
  &lt;font size=4 color='blue'&gt;
   Edit employee details
  &lt;/font&gt;&lt;/a&gt; &lt;br/&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>
</div></div></li><li>同样，创建<code>addEmployee.jsp</code>并且内容如下。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>addEmployee.jsp</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%&gt;
&lt;%@ page language="java" %&gt;

&lt;%@ taglib uri="/WEB-INF/tld/myfaces_html.tld"  prefix="h" %&gt;
&lt;%@ taglib uri="/WEB-INF/tld/myfaces_core.tld"  prefix="f" %&gt;  

&lt;%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"
 +request.getServerName()+":"+request.getServerPort()+path+"/";
%&gt;    
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 
 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" 
 content="text/html; charset=ISO-8859-1"&gt;
&lt;base href="&lt;%=basePath%&gt;"&gt;

&lt;script type="text/javascript"&gt;

&lt;/script&gt;
&lt;title&gt;Add employee details&lt;/title&gt;
&lt;/head&gt; 
&lt;body&gt;

&lt;f:view&gt; 
 &lt;h:form&gt;

 &lt;h:inputHidden id="id" value="#{Employee.empNo}"/&gt;

 &lt;h:panelGrid columns="2" border="0"&gt;

 &lt;h:outputText value="Employee No :" /&gt;

 &lt;h:inputText id="empNo" 
  value="#{Employee.empNo}" required="true"&gt;
 &lt;f:validateLongRange maximum="100000" minimum="1"/&gt;				     
 &lt;/h:inputText&gt;


 &lt;h:outputText value="Employee Name :" /&gt;

 &lt;h:inputText id="empName" 
 value="#{Employee.empName}" required="true"&gt;
 &lt;f:validateLength maximum="100" minimum="2"/&gt;					     
 &lt;/h:inputText&gt;

 &lt;h:outputText value="Department Name :" /&gt;

 &lt;h:selectOneMenu id="deptName" value="#{Employee.deptName}" 
  required="true" &gt;
  &lt;f:selectItems value="#{Employee.deptOptions}" /&gt;
 &lt;/h:selectOneMenu&gt;

 &lt;h:outputText value="Sex :" /&gt;

 &lt;h:selectOneRadio id="sex" value="#{Employee.sex}" required="true"&gt;
 &lt;f:selectItem id="male" itemLabel="Male" itemValue="male" /&gt;
 &lt;f:selectItem id="female" itemLabel="Female" itemValue="female" /&gt;
 &lt;/h:selectOneRadio&gt;

 &lt;h:outputText value="Salary :" /&gt;

 &lt;h:inputText id="salary" 
 value="#{Employee.salary}" required="true"&gt;
 &lt;f:validateDoubleRange minimum="1000.00" maximum="10000000.00"/&gt;					     
 &lt;/h:inputText&gt;

  &lt;h:outputText value="Employee Band :" /&gt;

  &lt;h:selectOneListbox id="band" value="#{Employee.band}" size="3" required="true"&gt;
  &lt;f:selectItem id="bandA" itemLabel="Band A" itemValue="A" /&gt;
  &lt;f:selectItem id="bandB" itemLabel="Band B" itemValue="B" /&gt;
 &lt;f:selectItem id="bandC" itemLabel="Band C" itemValue="C" /&gt;
 &lt;f:selectItem id="bandD" itemLabel="Band D" itemValue="D" /&gt;
  &lt;f:selectItem id="bandE" itemLabel="Band E" itemValue="E" /&gt;
  &lt;f:selectItem id="bandF" itemLabel="Band F" itemValue="F" /&gt;
  &lt;/h:selectOneListbox&gt;


  &lt;/h:panelGrid&gt;

  &lt;h:messages id="errors" 
  style="color:red;font-weight:bold" 
  layout="table" /&gt;

  &lt;h:commandButton value="Save" 
   action="saveEmployee" 
   actionListener="#{Employee.addEmployee}" /&gt;


  &lt;/h:form&gt;

 &lt;/f:view&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>
</div></div></li><li>同样，创建<code>editEmployee.jsp</code>并且内容如下。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>editEmployee.jsp</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;%@ page language="java" contentType="text/html;
 charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%&gt;
&lt;%@ page language="java" %&gt;

&lt;%@ taglib uri="/WEB-INF/tld/myfaces_html.tld"  prefix="h" %&gt;
&lt;%@ taglib uri="/WEB-INF/tld/myfaces_core.tld"  prefix="f" %&gt;  

&lt;%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+
  request.getServerName()+":"+
  request.getServerPort()+path+"/";
%&gt;    
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 
 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" 
 content="text/html; charset=ISO-8859-1"&gt;
&lt;base href="&lt;%=basePath%&gt;"&gt;
&lt;title&gt;Edit employee details&lt;/title&gt;
&lt;/head&gt; 
&lt;body&gt;

 &lt;f:view&gt; 
  &lt;h:form&gt;

   &lt;h:inputHidden id="id" value="#{Employee.empNo}"/&gt;

  &lt;h:panelGrid columns="2" border="0"&gt;

  &lt;h:outputText value="Employee No :" /&gt;

 &lt;h:inputText id="empNo" disabled="true"
  value="#{Employee.empNo}" required="true"&gt;
  &lt;f:validateLongRange maximum="100000" minimum="1"/&gt;					     
  &lt;/h:inputText&gt;


  &lt;h:outputText value="Employee Name :" /&gt;

  &lt;h:inputText id="empName" 
   value="#{Employee.empName}" required="true"&gt;
    &lt;f:validateLength maximum="100" minimum="2"/&gt;						     
  &lt;/h:inputText&gt;

  &lt;h:outputText value="Department Name :" /&gt;

  &lt;h:selectOneMenu id="deptName" value="#{Employee.deptName}" required="true"&gt;
   &lt;f:selectItems value="#{Employee.deptOptions}" /&gt;
  &lt;/h:selectOneMenu&gt;

  &lt;h:outputText value="Sex :" /&gt;

  &lt;h:selectOneRadio id="sex" value="#{Employee.sex}" required="true"&gt;
   &lt;f:selectItem id="male" itemLabel="Male" itemValue="male" /&gt;
   &lt;f:selectItem id="female" itemLabel="Female" itemValue="female" /&gt;
  &lt;/h:selectOneRadio&gt;

  &lt;h:outputText value="Salary :" /&gt;

  &lt;h:inputText id="salary" 
    value="#{Employee.salary}" required="true"&gt;
    &lt;f:validateDoubleRange minimum="1000.00" maximum="10000000.00"/&gt;	
  &lt;/h:inputText&gt;

   &lt;h:outputText value="Employee Band :" /&gt;

  &lt;h:selectOneListbox id="band" value="#{Employee.band}" 
     size="3" required="true"&gt;
   &lt;f:selectItem id="bandA" itemLabel="Band A" itemValue="A" /&gt;
   &lt;f:selectItem id="bandB" itemLabel="Band B" itemValue="B" /&gt;
   &lt;f:selectItem id="bandC" itemLabel="Band C" itemValue="C" /&gt;
   &lt;f:selectItem id="bandD" itemLabel="Band D" itemValue="D" /&gt;
   &lt;f:selectItem id="bandE" itemLabel="Band E" itemValue="E" /&gt;
  &lt;f:selectItem id="bandF" itemLabel="Band F" itemValue="F" /&gt;
  &lt;/h:selectOneListbox&gt;


  &lt;/h:panelGrid&gt;

  &lt;h:messages id="errors" 
    style="color:red;font-weight:bold" 
   layout="table" /&gt;

   &lt;h:commandButton value="Save" 
   action="saveEmployee" 
   actionListener="#{Employee.editEmployee}"  /&gt;


   &lt;/h:form&gt;
  &lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div></div></li><li>同样，创建<code>RetrieveEmployee.jsp</code>并且内容如下。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>RetrieveEmployee.jsp</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;%@ page language="java" contentType="text/html; 
 charset=ISO-8859-1" pageEncoding="ISO-8859-1"%&gt;
&lt;%@ page language="java" %&gt;

&lt;%@ taglib uri="/WEB-INF/tld/myfaces_html.tld"  prefix="h" %&gt;
&lt;%@ taglib uri="/WEB-INF/tld/myfaces_core.tld"  prefix="f" %&gt;  

&lt;%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+
request.getServerName()+":"+request.getServerPort()+path+"/";
%&gt;    
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 
 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html;
  charset=ISO-8859-1"&gt;
&lt;base href="&lt;%=basePath%&gt;"&gt;
&lt;title&gt;Add employee details&lt;/title&gt;
&lt;/head&gt; 
&lt;body&gt;

 &lt;f:view&gt; 
  &lt;h:form&gt;
   &lt;h:panelGrid columns="2" border="0"&gt;

  &lt;h:outputText value="Employee No :" /&gt;

 &lt;h:inputText id="empNo" 
  value="#{Employee.empNo}"&gt;
  &lt;/h:inputText&gt;

  &lt;/h:panelGrid&gt;

&lt;h:messages id="errors" 
style="color:red;font-weight:bold" 
layout="table" /&gt;

&lt;h:commandButton value="Retrieve" 
action="retrieveEmployee" 
actionListener="#{Employee.retrieveEmployee}" /&gt;

&lt;h:commandButton value="Cancel" 
action="cancel"/&gt;


  &lt;/h:form&gt;
 &lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div></div></li><li>打开<code>geronimo-web.xml</code>并将现有内容替换为以下内容。我们稍后将在创建数据源时解释其内容。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" 
 xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.2" 
  xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" 
  xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2"&gt;
 
  &lt;sys:environment&gt;
   &lt;sys:moduleId&gt;
    &lt;sys:groupId&gt;EmployeeJSF&lt;/sys:groupId&gt;
    &lt;sys:artifactId&gt;WEB&lt;/sys:artifactId&gt;
    &lt;sys:version&gt;1.0&lt;/sys:version&gt;
    &lt;sys:type&gt;car&lt;/sys:type&gt;
  &lt;/sys:moduleId&gt;

 &lt;sys:dependencies&gt;
  &lt;sys:dependency&gt;
   &lt;sys:groupId&gt;console.dbpool&lt;/sys:groupId&gt;
   &lt;sys:artifactId&gt;EmployeeDS&lt;/sys:artifactId&gt;
  &lt;/sys:dependency&gt;
 &lt;/sys:dependencies&gt;

 &lt;/sys:environment&gt;

 &lt;context-root&gt;/EmployeeWEB&lt;/context-root&gt;
&lt;/web-app&gt;
</pre>
</div></div></li></ol>


<h3 id="DevelopinguserinterfacewithJSF-ConfiguringJSFmanagedbeansandassociatingmanagedbeanactionstoevents">配置JSF受管Bean并将受管Bean操作与事件相关联</h3>
<ol><li>点击<code>faces-config.xml</code>打开<em>Faces配置编辑器</em> 。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/13.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击下面的<em>ManagedBean</em>选项卡，然后单击<strong>Add</strong>按钮。这将打开“ <em>New Managed Bean Wizard”</em> 。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/14.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击<strong>浏览</strong>按钮并搜索<code>sample.jsf.Employee</code>课，然后单击<strong>确定</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/15.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击“ <em>新建托管Bean向导”</em>上的“ <strong>下一步”</strong>按钮。在下一个屏幕上，选择“按<em>要求</em> <em>合并范围</em> ”，然后单击“ <strong>下一步”</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/16.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击<strong>下一步</strong>按钮，最后单击<strong>完成</strong>按钮。这将显示以下屏幕截图，如下所示。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/17.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击“ <em>导航规则”</em>选项卡，然后将鼠标移到“组件<em>面板”上，</em>以使其位于最前面。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/18.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击<strong>页面</strong>并将鼠标移到主要区域上，然后单击一次。这将显示“ <em>选择JSP文件”</em>向导。选择<strong>index.jsp</strong> ，然后单击<strong>OK</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/19.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>同样，将其他JSP也添加到主要区域，如下所示。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/20.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>将选<em>板</em>置于最前面，然后单击<strong>链接</strong> 。
	<ul><li>将鼠标放在<code>addEmployee.jsp</code>在主区域上，单击一次并将其移至<code>index.jsp</code>然后单击一次。</li><li>同样，将鼠标移到<code>RetrieveEmployee.jsp</code>并将鼠标移至<code>index.jsp</code>然后单击一次。</li><li>点击鼠标<code>RtrieveEmployee.jsp</code>并将鼠标移到<code>editEmployee.jsp</code>然后单击一次。</li><li>点击鼠标<code>editEmployee.jsp</code>并将鼠标移到<code>RetrieveEmployee.jsp</code>然后单击一次。<br clear="none">上面的操作创建了导航规则，如下图所示。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/21.jpg"></span>
<br class="atl-forced-newline" clear="none"></li></ul>
	</li><li>按下逃逸按钮一次，然后单击之间的链接<code>addEmployee.jsp</code>和<code>index.jsp</code> 。在底部的“ <em>属性”</em>窗口中，转到“ <em>从结果”</em>文本框，然后将值提供为<em>saveEmployee</em> 。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/22.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>同样，单击之间的链接<code>RetrieveEmployee.jsp</code>和<code>index.jsp</code> ，然后在底部的“ <em>属性”</em>窗口中，转到“ <em>从结果”</em>文本框，并将值提供为<em>cancel</em> 。</li><li>同样，单击之间的链接<code>RetrieveEmployee.jsp</code>和<code>editEmployee.jsp</code> ，然后在底部的“ <em>属性”</em>窗口中，转到“ <em>从结果”</em>文本框，并将值提供为<em>resolveEmployee</em> 。</li><li>同样，单击之间的链接<code>editEmployee.jsp</code>和<code>RetrieveEmployee.jsp</code> ，然后在底部的“ <em>属性”</em>窗口中，转到“ <em>从结果”</em>文本框，并将值提供为<em>saveEmployee</em> 。</li><li>单击“ <em>源”</em>以查看根据这些导航规则和配置生成的XML内容。内容应如下。
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>faces-config.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;faces-config
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"
 version="1.2"&gt;

  &lt;navigation-rule&gt;
   &lt;description&gt;Add Employee&lt;/description&gt;
   &lt;from-view-id&gt;/addEmployee.jsp&lt;/from-view-id&gt;
   &lt;navigation-case&gt;
    &lt;from-outcome&gt;saveEmployee&lt;/from-outcome&gt;
    &lt;to-view-id&gt;/index.jsp&lt;/to-view-id&gt;
   &lt;/navigation-case&gt;
 &lt;/navigation-rule&gt;


  &lt;navigation-rule&gt;
   &lt;description&gt;Retrieve Employee&lt;/description&gt;
   &lt;from-view-id&gt;/RetrieveEmployee.jsp&lt;/from-view-id&gt;
   &lt;navigation-case&gt;
    &lt;from-outcome&gt;retrieveEmployee&lt;/from-outcome&gt;
    &lt;to-view-id&gt;/editEmployee.jsp&lt;/to-view-id&gt;
   &lt;/navigation-case&gt;
 &lt;/navigation-rule&gt;

  &lt;navigation-rule&gt;
    &lt;description&gt;Retrieve Employee&lt;/description&gt;
    &lt;from-view-id&gt;/RetrieveEmployee.jsp&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
     &lt;from-outcome&gt;cancel&lt;/from-outcome&gt;
      &lt;to-view-id&gt;/index.jsp&lt;/to-view-id&gt;
     &lt;/navigation-case&gt;
 &lt;/navigation-rule&gt;

  &lt;navigation-rule&gt;
    &lt;description&gt;Edit Employee&lt;/description&gt;
    &lt;from-view-id&gt;/editEmployee.jsp&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
      &lt;from-outcome&gt;saveEmployee&lt;/from-outcome&gt;
      &lt;to-view-id&gt;/RetrieveEmployee.jsp&lt;/to-view-id&gt;
 &lt;/navigation-case&gt;
&lt;/navigation-rule&gt;


  &lt;managed-bean&gt; 
    &lt;description&gt;
     Employee Bean
   &lt;/description&gt;
   &lt;managed-bean-name&gt;Employee&lt;/managed-bean-name&gt;
   &lt;managed-bean-class&gt;sample.jsf.Employee&lt;/managed-bean-class&gt;
   &lt;managed-bean-scope&gt;request&lt;/managed-bean-scope&gt; 
  &lt;/managed-bean&gt;


&lt;/faces-config&gt;

</pre>
</div></div>这样就完成了WEB应用程序的创建和JSF配置。将<em>EmployeeWEB</em>导出到<code>EmployeeWEB.war</code>文件。</li></ol>


<h2 id="DevelopinguserinterfacewithJSF-SettingupthedatabasetablesandtheDatasource">设置数据库表和数据源</h2>

<ol><li>启动geronimo服务器，然后单击<strong>控制台导航->嵌入式DB-> DB管理器</strong> 。如下图所示，在<em>Create DB</em>文本框中输入<em>EmployeeDB</em> ，然后单击<strong>Create</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/23.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>通过输入以下SQL语句并单击<strong>Run SQL</strong>按钮来创建<strong>Employee</strong>表，如下面的屏幕快照所示。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/24.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击<strong>控制台导航->服务->数据库池</strong> ，然后单击<strong>使用Geronimo数据库池向导</strong>链接以创建新的数据源。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/25.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>在下一个屏幕上，在“ <em>数据库池名称”</em>文本框中输入<em>EmployeeDS</em> ，然后在“ <em>数据库类型”</em>组合框中选择“ <strong>嵌入式Derby</strong> ”。单击<strong>下一步</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/26.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>在下一个屏幕上，在“ <em>驱动程序JAR”</em>选择框中选择配置，然后在“ <em>数据库名称”</em>文本框中输入<em>EmployeeDB</em> ，然后单击底部的“ <strong>部署”</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/27.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>这将部署<em>EmployeeDS</em>数据库池。数据库池的moduleId为<code>console.dbpool/EmployeeDS/1.0/rar</code>在其中被声明为依赖项<code>geronimo-web.xml</code> 。这是因为，JPA使用此数据库源来保留实体。</li></ol>


<h2 id="DevelopinguserinterfacewithJSF-Deployingthe(war)application">部署（战争）应用程序</h2>

<p>部署<code>EmployeeWEB.war</code>使用命令提示符，如下所示。</p>
<div class="preformatted panel" style="border-style:solid;border-width:1px"><div class="preformattedContent panelContent">
<pre>C:\Geronimo-2.1\bin&gt;deploy.bat --user system --password manager deploy EmployeeWEB.war
Using GERONIMO_BASE:   C:\Geronimo-2.1
Using GERONIMO_HOME:   C:\Geronimo-2.1
Using GERONIMO_TMPDIR: var\temp
Using JRE_HOME:        C:\SDK-May-31-2007\jre
    Deployed EmployeeJSF/WEB/1.0/car @ /EmployeeWEB
</pre>
</div></div>

<h2 id="DevelopinguserinterfacewithJSF-Runningtheapplication">运行应用程序</h2>
<ol><li>打开浏览器窗口并点击URL <code><a shape="rect" class="external-link" href="http://localhost:8080/EmployeeWEB/" rel="nofollow">http://localhost:8080/EmployeeWEB/</a></code> 。这将显示以下屏幕。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/28.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击<strong>添加员工详细信息</strong>链接以获取以下屏幕，以将员工添加到数据库中。只需单击<strong>保存</strong>按钮，而不输入任何值。JSF抱怨验证错误如下。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/29.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>输入以下屏幕中给出的值，然后单击“ <strong>保存”</strong>按钮。这将返回到主页。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/30.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>单击“ <strong>编辑员工详细信息”</strong>链接以显示以下屏幕。输入<em>Employee No</em>值作为10，然后单击<strong>Retrieve</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/31.jpg"></span>
<br class="atl-forced-newline" clear="none"></li><li>这将显示雇员编号为10的雇员的详细信息。我们可以根据需要编辑值，然后单击“ <strong>保存”</strong>按钮。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="developing-user-interface-with-jsf.data/32.jpg"></span></li></ol>


</div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Developing user interface with JSF';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script>
    <script type="text/javascript">var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();</script>

  

</body></html>