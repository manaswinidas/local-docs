<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Deploying and undeploying applications">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Deploying and undeploying applications">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href="asset?aid=4" rel="stylesheet" type="text/css">
  <link href="asset?aid=5" rel="stylesheet" type="text/css">
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushXml.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushPlain.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0文档：部署和取消部署应用程序</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">Home</a> > <a href="documentation.html">文档</a> > <a href="configuring-and-administering.html">配置和管理</a> > <a href="deploying-and-administering-assets-in-geronimo.html">在Geronimo中部署和管理资产</a> > <a href="deploying-and-administering-applications.html">部署和管理应用程序</a> > <a href="deploying-and-undeploying-applications.html">部署和取消部署应用程序</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">部署和取消部署应用程序</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645345"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645345">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645345"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645345">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645345"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645345">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent">

<p>部署和取消部署应用程序有几种选择：</p>
<style type="text/css">/*<![CDATA[*/
div.rbtoc1572612969499 {padding: 0px;}
div.rbtoc1572612969499 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1572612969499 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1572612969499">
<ul class="toc-indentation"><li><a shape="rect" href="#Deployingandundeployingapplications-ViaGeronimoAdministrationConsoleGACdeploy">通过Geronimo管理控制台</a></li><li><a shape="rect" href="#Deployingandundeployingapplications-ViahotdeploymentHotdeploy">通过热部署</a></li><li><a shape="rect" href="#Deployingandundeployingapplications-ViaDeployertooldeployertool">通过部署工具</a></li><li><a shape="rect" href="#Deployingandundeployingapplications-Viagogocommandgogodeploy">通过gogo命令</a></li><li><a shape="rect" href="#Deployingandundeployingapplications-ViaGEPGEPdeploy">通过GEP</a></li><li><a shape="rect" href="#Deployingandundeployingapplications-ViaClusteringWADIdeploy">通过聚类</a></li></ul>
</div>

<p>打包应用程序时，可以将部署计划包括在打包中或不包括在其中。在部署时，Geronimo会寻找部署计划（例如， <code>geronimo-web.xml</code>和部署描述符（例如， <code>web.xml</code> ） 在里面<code>WEB-INF</code>打包的应用程序中的目录。如果Geronimo找不到这些信息，它将尝试使用缺省值来部署应用程序。如果使用默认设置失败，则必须提供在应用程序中重新打包的部署计划，或者提供外部部署计划。在以下各节中，我们将进一步讨论这些替代方案。</p>

<h1 id="Deployingandundeployingapplications-ViaGeronimoAdministrationConsoleGACdeploy">通过Geronimo管理控制台<span class="confluence-anchor-link" id="Deployingandundeployingapplications-GACdeploy"></span></h1>
<p>要使用Geronimo Administration Console安装新应用程序，请在左侧的<strong>Console Navigation</strong>菜单上选择<strong>Deployer</strong> ，以启动<strong>Install Applications</strong> portlet。您可以选择<strong>在安装后启动应用程序</strong>复选框，以选择在部署后立即自动<strong>启动应用程序</strong> 。默认情况下，此复选框处于选中状态。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="deploying-and-undeploying-applications.data/installnewapps.gif"></span></p>

<p>对于此示例，我们使用在<a shape="rect" href="quick-start-apache-geronimo-for-the-impatient.html">快速入门-Apache Geronimo中为不耐烦的</a>部分创建的简单JSP HelloWorld示例。但是，在该部分中，我们使用了<strong>--inPlace</strong>部署选项，并且不需要将应用程序打包到<strong>WAR</strong>文件中。要创建WAR文件类型，请从<strong><app_home></app_home></strong>目录：</p>

<p><strong><code>jar -cvf HelloWorld.war</code></strong> *</p>

<p>该WAR已将部署计划包括在软件包中。</p>

<p>返回到Geronimo管理控制台，从“ <strong>安装新应用程序”</strong> portlet中，单击“ <strong>浏览”</strong>以指定到的路径。 <code>HelloWorld.war</code>在<strong>存档：</strong>部分。确保选中“ <strong>安装后启动应用程序”</strong>复选框，然后单击“ <strong>安装”</strong> 。</p>

<p>您应该看到“ <code>The application was successfully deployed.</code> “和” <code>The application was successfully started.</code>在portlet顶部的确认消息。</p>

<p>验证应用程序已成功安装和启动的另一种方法是检查“ <strong>已安装的Web应用程序”</strong> Portlet，可通过选择左侧“ <strong>控制台导航”</strong>菜单上的“ <strong>Web App WAR”</strong>来使用。您应该看到该应用程序被列为<strong>hello</strong>且状态为<strong>running</strong> 。</p>

<p>因为我们安装的应用程序是<code>HelloWold.<strong>WAR</strong></code> ，我们使用此<strong>Installed Web Applications</strong> portlet来验证安装。安装EAR时，可以通过在左侧的<strong>Console Navigation</strong>菜单上选择<strong>Application EAR</strong> ，使用可用的<strong>Installed Application EARs</strong> portlet来检查状态。WAR和EAR应用程序的安装过程相同。</p>

<p>要使用Geronimo管理控制台删除应用程序，请根据要卸载的应用程序使用<strong>Installed Web Applications</strong> portlet或<strong>Installed Application EARs</strong> portlet。</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="deploying-and-undeploying-applications.data/adminapps.gif"></span></p>

<p>对于我们的示例，访问已<strong>安装的Web应用程序</strong> portlet，然后为具有<strong>组件名称</strong>的应用程序单击<strong>卸载</strong> 。 <strong><code>sample.applications/HelloWorldApp/1.0/war</code></strong> 。这将停止应用程序，然后将其卸载。确认消息“ <code>Uninstalled application</code> ”应列在portlet的底部。</p>

<p>这些是使用Geronimo管理控制台安装和卸载应用程序的基本步骤。以下两节将重点介绍命令行选项。</p>

<h1 id="Deployingandundeployingapplications-ViahotdeploymentHotdeploy">通过热部署<span class="confluence-anchor-link" id="Deployingandundeployingapplications-Hotdeploy"></span></h1>

<p>Apache Geronimo支持<em>热部署</em> ，这意味着您可以将应用程序JAR文件复制到<code><geronimo_home>/deploy</code>目录和应用程序将自动部署。这也适用于卸载或刷新以前使用此方法部署的应用程序。或者，您也可以复制应用程序模块的<em>目录</em> （未打包），而不是复制单个JAR文件。</p>

<p>请注意，使用此部署方法时，您必须在应用程序包中包括部署计划，因为该方法不支持外部部署计划。另请注意，使用部署程序<a shape="rect" href="deploy.html">工具</a>或Geronimo管理控制台部署的应用程序未在<code><geronimo_home>/deploy</code>目录。</p>

<p>当您将应用程序复制到<code>deploy</code>目录，例如HelloWorld.war，您将在<code>geronimo.log</code> ，位于<code><geronimo_home>/var/log</code>目录。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
11:45:23,500 INFO  [DirectoryHotDeployer] Deploying HelloWorld.war
11:45:23,953 INFO  [DirectoryHotDeployer] Deployed sample.applications/HelloWorldApp/1.0/war @ /hello
</pre>
</div></div>

<p>要删除该应用程序，请从以下位置删除WAR或EAR文件： <code>deploy</code>目录。删除应用程序后，您应该在<code>geronimo.log</code> ，位于<code><geronimo_home>/var/log</code>目录。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default">
11:46:17,953 INFO  [DirectoryHotDeployer] Undeploying HelloWorld.war
11:46:18,281 INFO  [DirectoryMonitor] Hot deployer notified that an artifact was removed: sample.applications/HelloWorldApp/1.0/war
11:46:18,281 INFO  [DirectoryHotDeployer]     Undeployed sample.applications/HelloWorldApp/1.0/war
</pre>
</div></div>

<h1 id="Deployingandundeployingapplications-ViaDeployertooldeployertool">通过部署工具<span class="confluence-anchor-link" id="Deployingandundeployingapplications-deployertool"></span></h1>

<p>您可以通过运行命令行使用部署工具来安装和卸载应用程序。在本节中，我们仅关注示例应用程序的这两个任务。其余功能在“ <a shape="rect" href="deploy.html">部署程序”工具</a>部分中完全介绍。</p>

<p>要使用Deployer工具部署HelloWorld.war示例应用程序，请打开命令行窗口，然后从<code><geronimo_home>\bin</code>目录：</p>

<p><strong><code>deploy --user system --password manager deploy <app_home>\HelloWorld.war</code></strong></p>

<p>如果您的应用程序未在其中包含Geronimo特定的部署计划， <code>WEB-INF</code>目录，仍然可以像在Geronimo Administration Console中一样在外部指定它。您只需要将部署计划的路径和文件名添加到上一个命令。</p>

<p><strong><code>deploy --user system --password manager deploy <app_home>\HelloWorld.war <deployment_plan_home>\plan.xml</code></strong></p>

<p>请注意，在外部指定部署计划时，可以使用任何文件名来标识该计划。您不需要使用<code>geronimo-XYZ.xml</code>形成。在我们的示例中，我们不需要指定任何其他部署计划，因为我们已经在软件包中包含了Geronimo特定的计划。</p>

<p>部署应用程序后，您应该看到一条与以下消息相似的确认消息，其中包含moduleID <code>sample.applications/HelloWorldApp/1.0/war</code> ，在部署计划中已分配给该应用程序。确认消息显示在命令窗口中，与使用Geronimo管理控制台进行部署的情况不同。</p>

<div class="preformatted panel" style="border-style:solid;border-width:1px"><div class="preformattedContent panelContent">
<pre>D:\geronimo-tomcat7-javaee6-3.0\bin&gt;deploy --user system --password manager deploy \HelloWorld_1.0\HelloWorld.war
Using GERONIMO_BASE:   D:\geronimo-tomcat7-javaee6-3.0
Using GERONIMO_HOME:   D:\geronimo-tomcat7-javaee6-3.0
Using GERONIMO_TMPDIR: D:\geronimo-tomcat7-javaee6-3.0\var\temp
Using JRE_HOME:        C:\Java\jdk1.6.0_21\\jre
    Deployed sample.applications/HelloWorldApp/1.0/war @ /hello
</pre>
</div></div>

<p>或者，如果尚未打包应用程序，则可以使用<strong>--inPlace</strong>选项直接从实际开发应用程序的目录中部署应用程序。此选项用于在“ <a shape="rect" href="quick-start-apache-geronimo-for-the-impatient.html">快速入门-急躁的人的Apache Geronimo”</a>部分中部署此示例应用程序。</p>

<p>在这种情况下，请使用<code><geronimo_home>\bin</code>目录：</p>

<p><strong><code>deploy --user system --password manager deploy --inPlace <app_home></code></strong></p>

<p>要卸载应用程序，请从<code><geronimo_home>\bin</code>目录，其中包含部署计划中指定的moduleID。</p>

<p><strong><code>deploy --user system --password manager undeploy sample.applications/HelloWorldApp/1.0/war</code></strong></p>

<p>此命令将停止正在运行的应用程序，然后将其卸载。您应该看到类似于以下内容的确认消息：</p>

<div class="preformatted panel" style="border-style:solid;border-width:1px"><div class="preformattedContent panelContent">
<pre>D:\geronimo-tomcat7-javaee6-3.0\bin&gt;deploy --user system --password manager undeploy sample.applications/HelloWorldApp/1.0/war
Using GERONIMO_BASE:   D:\geronimo-tomcat7-javaee6-3.0
Using GERONIMO_HOME:   D:\geronimo-tomcat7-javaee6-3.0
Using GERONIMO_TMPDIR: D:\geronimo-tomcat7-javaee6-3.0\var\temp
Using JRE_HOME:        C:\Java\jdk1.6.0_21\\jre
    Module sample.applications/HelloWorldApp/1.0/war unloaded.
    Module sample.applications/HelloWorldApp/1.0/war uninstalled.

    Undeployed sample.applications/HelloWorldApp/1.0/war
</pre>
</div></div>

<p>此部署程序工具还有其他选项和命令可用，请访问“ <a shape="rect" href="tools-and-commands.html">工具和命令”</a>部分以获取更多详细信息。</p>

<h1 id="Deployingandundeployingapplications-Viagogocommandgogodeploy">通过gogo命令<span class="confluence-anchor-link" id="Deployingandundeployingapplications-gogodeploy"></span></h1>

<p>您还可以在Karaf shell中部署或取消部署应用程序。有关部署和取消部署gogo命令的详细信息，请参阅<a shape="rect" href="gogo-commands-for-geronimo.html">Geronimo</a>的gogo命令。</p>

<h1 id="Deployingandundeployingapplications-ViaGEPGEPdeploy">通过GEP<span class="confluence-anchor-link" id="Deployingandundeployingapplications-GEPdeploy"></span></h1>

<p>如果安装了<a shape="rect" href="installing-geronimo-eclipse-plugin.html">Geronimo Eclipse插件（GEP），</a>则还可以在Eclipse中部署或取消部署应用程序。有关<a shape="rect" href="deploying-and-debugging-applications-using-gep.html">使用GEP</a>部署和取消部署应用程序的详细信息，请参阅<a shape="rect" href="deploying-and-debugging-applications-using-gep.html">使用GEP部署和调试应用</a>程序。</p>

<h1 id="Deployingandundeployingapplications-ViaClusteringWADIdeploy">通过聚类<span class="confluence-anchor-link" id="Deployingandundeployingapplications-WADIdeploy"></span></h1>

<p>现在可以使用WADI支持在多个Geronimo服务器之间复制HTTP会话状态。在Geronimo的先前发行版中，WADI只能与Geronimo的Jetty配置一起使用。WADI现在可以与Geronimo的Tomcat配置一起使用。除了新的会话复制支持之外，现在还可以将应用程序部署到Geronimo服务器的管理定义组中。这使得跨多个Geronimo服务器管理单个应用程序变得更加容易。有关群集部署的更多信息和详细信息，请参见<a shape="rect" href="farming-using-deployment.html">使用部署</a>进行<a shape="rect" href="farming-using-deployment.html">养殖</a> 。</p>
</div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Deploying and undeploying applications';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>