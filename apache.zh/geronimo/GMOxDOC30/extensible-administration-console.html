<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Extensible Administration Console">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Extensible Administration Console">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>

  <link href="asset?aid=1" rel="stylesheet" type="text/css">
  <link href="asset?aid=2" rel="stylesheet" type="text/css">
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shCore.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushJava.js' type='text/javascript'></script>
  <script src='http://geronimo.apache.org/resources/highlighter/scripts/shBrushBash.js' type='text/javascript'></script>
  
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script>

    <title>Apache Geronimo v3.0文档：可扩展管理控制台</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="configuring-and-administering.html">配置和管理</a> > <a href="extensible-administration-console.html">可扩展管理控制台</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">可扩展管理控制台</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645341"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645341">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645341"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645341">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645341"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645341">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>本文档包含以下部分：</p>
<style type="text/css">/*<![CDATA[*/
div.rbtoc1515428667972 {padding: 0px;}
div.rbtoc1515428667972 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1515428667972 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1515428667972">
<ul class="toc-indentation"><li><a shape="rect" href="#ExtensibleAdministrationConsole-Introduction">介绍</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-InstallationPlanning">安装计划</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-InstallingtheExtensibleAdministrationConsole">安装可扩展管理控制台</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-InstallinganAdministrationConsoleExtensionin.carformatfromarepository">从存储库安装.car格式的管理控制台扩展</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Examples">例子</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Customization">客制化</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Architecture">建筑</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-Class/DependencyStructure">类/依赖结构</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-HowtoDevelopanAdministratorConsoleExtension(ACE)">如何开发管理员控制台扩展（ACE）</a></li><li><a shape="rect" href="#ExtensibleAdministrationConsole-SampleExtension">样品扩展</a></li></ul>
</div>

<h2 id="ExtensibleAdministrationConsole-Introduction">介绍</h2>

<p>可扩展管理控制台是一个新的管理控制台，旨在反映Geronimo体系结构的灵活性。尽管以前的控制台是静态的，仅允许对预定义的组件进行配置，但是新的可扩展控制台会随着服务器上安装的组件而动态更改。</p>

<p>该框架允许Geronimo插件开发人员将扩展及其组件打包到管理控制台（称为ACE）。安装插件后，此新内容将自动添加到可扩展管理控制台，以便用户可以从一个位置管理所有配置和工具。</p>

<h3 id="ExtensibleAdministrationConsole-Objective">目的</h3>

<p>阅读该文档后，Geronimo用户将能够</p>
<ol><li>将可扩展管理控制台安装到Geronimo Framework程序集中（Tomcat或Jetty）</li><li>下载并安装管理控制台扩展</li></ol>


<h3 id="ExtensibleAdministrationConsole-Scope">范围</h3>

<p>本文档介绍将Geronimo的管理控制台安装到Geronimo最小组件中以及安装ACE插件的过程。有关基础体系结构和ACE开发的更多信息，请参见《管理控制台扩展开发人员指南》。</p>

<h3 id="ExtensibleAdministrationConsole-Whoshouldreadthisdocument">谁应该阅读这份文件</h3>

<p>这些说明适用于想要在管理控制台上安装新组件的Geronimo的基本用户。不需要了解服务器的内部工作原理。</p>

<h3 id="ExtensibleAdministrationConsole-Assumptions">假设条件</h3>

<p>读者应该熟悉Geronimo应用程序服务器及其应用程序。读者还应该熟悉Geronimo插件框架的基础。有关该体系结构的更多信息，该指南也可能是宝贵的资源： <a shape="rect" class="external-link" href="http://media.wiley.com/product_ancillary/31/04717854/DOWNLOAD/Pro_Apache_Geronimo_ch17.pdf" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://media.wiley.com/product_ancillary/31/04717854/DOWNLOAD/Pro_Apache_Geronimo_ch17.pdf" rel="nofollow">//media.wiley.com/product_ancillary/31/04717854/DOWNLOAD/Pro_Apache_Geronimo_ch17.pdf</a> 。<br clear="none">阅读器应已安装并运行Apache Geronimo 3.0 Minimal + Web容器程序集，并以Tomcat7或Jetty8作为Web容器。Java EE程序集已经安装了可扩展管理控制台。有关开始使用或更新到正确版本的更多信息，请访问以下网站： <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC30/installation.html">http</a> : <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC30/installation.html">//cwiki.apache.org/GMOxDOC30/installation.html</a> 。</p>

<h2 id="ExtensibleAdministrationConsole-InstallationPlanning">安装计划</h2>

<p>本节将通过提供必要的术语并介绍将要讨论的安装方案，为用户准备安装ACE。</p>

<h3 id="ExtensibleAdministrationConsole-CommonTerminology">通用术语</h3>
<p>	<strong>插件</strong> -一个归档文件（.car或.war），可以将其安装到Geronimo中以安装特定的新服务，例如ActiveMQ。有关插件的更多信息，或查看可用的插件，请访问geronimoplugins.com或geronimoplugincentral.org。<br clear="none">
	<strong>。CAR文件</strong> （配置存档）-一个存档文件，用于存储Geronimo特定的配置以及类，库，网页和与应用程序相关的其他信息。<br clear="none">
	<strong>。WAR文件</strong> （Web ARchive）-包含Web应用程序的存档文件，包括其所有类，库，HTML和JSP页面以及其他信息。它可以部署在任何与Java Enterprise兼容的servlet容器上。<br clear="none">
	<strong>ACE</strong> （管理控制台扩展）-包含管理控制台portlet的存档文件（.car或.war）。激活ACE后，这些portlet将被添加到可扩展管理控制台中。<br clear="none">
	<strong>可扩展管理控制台</strong> -Geronimo原始管理控制台的灵活版本。安装后，可以在<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http：// localhost：8080 / console上获得它</a> ，并包括一些与Geronimo中当前激活的服务相对应的portlet。<br clear="none">
	<strong>服务</strong> -Geronimo的组件或功能集-可以预先安装，例如Tomcat或Jetty Web容器，也可以作为插件安装。<br clear="none">
	<strong>最小控制台</strong> -最初安装的管理控制台-仅包含基本功能所需的服务。<br clear="none">
	<strong>Portlet</strong> -Web用户界面组件，可以与其他类似组件组装在一起以创建Web（门户）页面。请参阅Portlet规范JSR 286。</p>

<h3 id="ExtensibleAdministrationConsole-InstallationScenarios">安装方案</h3>

<ol><li>将可扩展管理控制台安装到Geronimo最小组件中</li><li>从磁盘安装.war格式的ACE</li><li>从在线存储库以.car格式安装ACE<div class="confluence-information-macro confluence-information-macro-information"><p class="title">我要哪种文件格式？</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<ul><li><strong>是否需要已有组件的控制台扩展？</strong> 如果计划为服务器上已安装的组件添加管理控制台Portlet，则.war文件是最简单的。 .war格式的ACE仅具有所需的portlet，并且取决于已经安装的组件。</li><li><strong>需要组件及其扩展名吗？</strong> 如果您需要安装新组件及其关联的管理控制台Portlet，那么.car文件是正确的选择。这将查找并下载所有必要的组件和依赖项，还将安装新的ACE文件。如果已经安装了该组件，也可以使用.car文件。</li><li><strong>不确定？</strong> 如果不确定是否已安装所有先决条件，则.car是最安全的选择。无论组件是否已预先安装，这都将起作用。</li></ul>
</div></div>
<div class="confluence-information-macro confluence-information-macro-information"><p class="title">从磁盘安装.car文件怎么办？</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>您可以从命令行使用<strong>deploy install-plugin</strong>工具。有关更多信息，请参见<a shape="rect" class="external-link" href="https://cwiki.apache.org/GMOxDOC30/deploy.html">https://cwiki.apache.org/GMOxDOC30/deploy.html</a></p></div></div></li></ol>


<h2 id="ExtensibleAdministrationConsole-InstallingtheExtensibleAdministrationConsole">安装可扩展管理控制台</h2>

<p>本节介绍了在Geronimo 3.0 Minimal Server上安装新的可扩展管理控制台的所有必要步骤。Geronimo 3.0 Java EE服务器已经安装了控制台。</p>

<h3 id="ExtensibleAdministrationConsole-Prerequisites">先决条件</h3>

<ol><li>Geronimo 3.0-已安装最小版本（“ Little-G”）</li><li>当前未安装其他Geronimo管理控制台</li></ol>


<h3 id="ExtensibleAdministrationConsole-Installasaplugin">作为插件安装</h3>

<ol><li>启动Geronimo</li><li>使用<strong>deploy list-plugins</strong>命令从在线插件存储库下载并安装管理控制台。根据最小服务器中的Web容器支持，选择：<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre> deploy list-plugins -r http://geronimo.apache.org/plugins/geronimo-3.0/ org.apache.geronimo.plugins/console-tomcat/3.0/car</pre>
</div></div>要么<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>deploy list-plugins -r http://geronimo.apache.org/plugins/geronimo-3.0/ org.apache.geronimo.plugins/console-jetty/3.0/car</pre>
</div></div></li></ol>



<p>更新后，我们需要验证此步骤（及后续步骤）。</p>


<p>现在，您可以将Web浏览器指向<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http：// localhost：8080 / console</a>并查看新安装的控制台。</p>


<h3 id="ExtensibleAdministrationConsole-InstallinganACEin.warformatfromanarchivefile">从存档文件安装.war格式的ACE</h3>

<p>.war格式的ACE将仅安装控制台扩展。它的先决条件必须已经安装在您的系统上。例如，如果要安装控制台扩展来监视Derby数据库，则Derby必须预先安装在服务器上。<br clear="none">先决条件</p>
<ol><li>您需要安装.war格式的ACE。</li><li><a shape="rect" href="extensible-administration-console.html">如上所述</a> ，已经部署了可扩展管理控制台。</li><li>ACE的所有先决条件已经安装。<br clear="none">使用说明</li><li>在地址为<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http：// localhost：8080 / console</a>的Internet浏览器中打开管理<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">控制台</a> 。</li><li>在左侧导航栏上选择<strong>Deployer</strong> 。</li><li>单击<strong>浏览</strong> ，然后导航到ACE文件。</li><li>点击<strong>安装</strong> 。</li><li>刷新浏览器。您的新组件将显示在左侧导航菜单上。</li></ol>


<h2 id="ExtensibleAdministrationConsole-InstallinganAdministrationConsoleExtensionin.carformatfromarepository">从存储库安装.car格式的管理控制台扩展</h2>

<p>.car格式的ACE将安装组件，并将其配置portlet添加到可扩展管理控制台。<br clear="none">先决条件</p>
<ol><li>您的插件提供商已经指定了存储库URL。要获得更多可用插件，请查看<a shape="rect" class="external-link" href="http://geronimo.apache.org/plugins/geronimo-3.0/">http://geronimo.apache.org/plugins/geronimo-3.0/</a>是一个不错的起点。</li><li>如上一节所述，已经安装了可扩展管理控制台。</li></ol>


<h3 id="ExtensibleAdministrationConsole-Instructions">使用说明</h3>

<ol><li>通过将Web浏览器指向以下地址<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http：// localhost：8080 / console</a>来访问可扩展管理<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">控制台</a> 。</li><li>选择左侧导航栏上的<strong>插件</strong> 。</li><li>在“安装Geronimo插件”下，单击“ <strong>更新存储库列表”</strong>以将Geronimo 3.0的默认插件存储库添加到存储库列表中。
	<ul><li>如果正确的地址没有出现在“存储库”列表中，请选择“ <strong>添加存储库”</strong> 。</li><li>在“ <strong>新建存储库”</strong>文本框中输入存储库的地址。确保在地址末尾包含正斜杠（/）。选择添加存储库。</li><li>单击<strong>更新存储库列表</strong> 。现在，新地址将显示在“存储库”列表中。</li></ul>
	</li><li>在“存储库”框中显示正确的存储库的情况下，选择<strong>“在所选存储</strong>库中<strong>显示插件”</strong> 。</li><li>直接单击插件名称，从“可用插件”列表中选择插件。
	<ul><li>如果所需插件的可<strong>安装</strong>字段标记为红叉，则表明该插件可能已安装在您的服务器上。在“系统模块”选项卡上检查其名称，以确保其正在运行，并在必要时启动或卸载它。</li><li>如果未显示“可用插件”列表，或者未列出所需插件，则可能是您输入了错误的存储库地址。请尝试再次输入。如果问题仍然存在，请联系插件提供商或通过电子邮件将用户邮件列表发送到user@geronimo.apache.org。<br clear="none">6。选择要添加的插件，然后单击页面底部的* Install。<br clear="none">7。插件安装完成后，刷新浏览器。新菜单项将出现在左侧。现在，您可以从新安装的Portlet配置此插件的设置。</li></ul>
	</li></ol>


<h2 id="ExtensibleAdministrationConsole-Examples">例子</h2>

<h3 id="ExtensibleAdministrationConsole-InstallingtheHelloWorldACE(.warfile)">安装HelloWorld ACE（.war文件）</h3>

<p>这是一个简单的ACE文件的示例。它没有附加到任何组件上，只是向可扩展管理控制台添加了一个新的“ Hello World” portlet。</p>

<p>1。下载example-extension-new.war <a shape="rect" href="extensible-administration-console.data/example_extension_new.war?version=1&modificationDate=1235001591000&api=v2" data-linked-resource-id="20874237" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example_extension_new.war" data-nice-type="Java Archive" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645341" data-linked-resource-container-version="19">example_extension_new.war</a><br clear="none">2。通过将Web浏览器指向<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http：// localhost：8080 / console</a>来访问可扩展管理<a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">控制台</a> 。<br clear="none">3。在左侧导航栏上选择Deploy New。<br clear="none">4。单击存档旁边的浏览，然后选择example-extension-new.war文件。将“计划”框保留为空白，选中“安装后启动应用程序”，然后取消选中“重新部署应用程序”。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/helloworld1.jpg"></span><br clear="none">5，单击安装。您的新组件将显示在左侧导航菜单上。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/helloworld2.jpg"></span></p>

<h2 id="ExtensibleAdministrationConsole-Customization">客制化</h2>

<p>通常，当用户安装Geronimo时，管理控制台将成为他们配置应用程序服务器的第一站。因此，管理控制台必须具有一项功能，即为用户提供必要的功能以轻松管理服务器的插件和组件，这一点很重要。管理控制台允许动态控制管理功能。这样，它反映了Geronimo的高度灵活和可插入的基础体系结构。我们在这里所做的是为插件开发人员提供一个框架，以包括其插件的管理控制台扩展。目的是提供一种具有简单体系结构的简单，灵活的解决方案，以使Geronimo的用户可以直观地配置组件，并且开发人员可以轻松扩展此处列出的基础。</p>

<p>本文档其余部分的目的是向开发人员提供必要的说明，以利用管理控制台提供的基础结构为其Apache Geronimo插件添加自定义的控制台扩展。第一部分将描述系统的管道及其工作方式，而后一部分将提供一个实际示例，以实际创建自己的功能正常的控制台扩展。</p>

<h2 id="ExtensibleAdministrationConsole-Architecture">建筑</h2>
<p>下面我们对新插件和Pluto之间的交互进行了高级介绍。这实质上是管理控制台下的“管道”。</p>
    
<div class="cfm-align-center" style="text-align:center"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/HighLevelPluto.jpg"></span><br clear="none">图1-Pluto与可部署WAR交互的高级视图</div>


<p>我们有一个WAR文件，其中包含Portlet信息以及左侧的管理控制台扩展（ACE）GBean的定义。 ACE GBean是我们可以在Pluto上调用操作的方式（稍后将介绍）。</p>

<p>我们使用的portlet容器是Apache Pluto 1.2。Pluto允许动态添加和删除页面和Portlet，而无需重新启动Portlet容器。从用户界面的角度来看，该方法非常重要，因为我们不必因不必要地重新启动服务器组件而陷入性能瓶颈。</p>

<p>Pluto及其Pluto API的虚线框旨在描述将Pluto的实现与我们自己的实现脱钩的方法。这是一项设计决策，允许将Pluto替换为其他Portlet引擎，以进行将来的开发。</p>

<h3 id="ExtensibleAdministrationConsole-UnderstandingThroughUsecases">通过用例了解</h3>
<p>现在让我们进一步研究该体系结构。应该注意的是，该体系结构的预期目的是利用Geronimo的灵活特性，并使实际的管理控制台反映Geronimo的可插入性。基础结构应该易于理解并且易于构建。</p>

<p>我们将看到的第一个用例也将用于描述使管理控制台起作用的各个部分。</p>
    
<div class="cfm-align-center" style="text-align:center"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/startcase.jpg"></span><br clear="none">图2-向控制台添加功能的用例</div>


<p>在左侧，我们从一个简单的Geronimo部署计划开始，例如geronimo-web.xml。该部署计划与您可能希望部署到Geronimo的任何归档中包含的部署计划相同。在这种情况下，部署计划包括针对特殊情况的定义<code>AdminConsoleExtensionGBean</code> 。关于什么的细节<code>AdminConsoleExtensionGBean</code>稍后将更详细地描述。</p>

<p>在右边，我们有冥王星。冥王星启动时， <code>PortalContainerServicesGBean</code>开始。这就是我们访问冥王星的方式。当我们部署存档时， <code>AdminConsoleExtensionGBean</code>将启动包含portlet配置信息的信息（基于部署描述符中指定的配置）。的<code>AdminConsoleExtensionGBean</code>是开发人员在其中指定要添加到管理控制台的Portlet和页面的信息的地方。</p>

<p>的<code>AdminConsoleExtensionGBean</code>贯彻<code>GBeanLifecycle</code> 。当。。。的时候<code>AdminConsoleExtensionGBean</code>启动后，它要求内核提供<code>PortalContainerServicesGBean</code> （1）。的<code>AdminConsoleExtensionGBean</code>获得服务（2）-现在<code>AdminConsoleExtensionGBean</code>可以通过其API访问Pluto。我们想向我们的管理控制台中添加一个Portlet，因此我们调用Pluto的addPortlet方法，该方法将更新Pluto的内部模型。</p>

<p>在上图中，每个变灰的GBean是一个<code>AdminConsoleExtensionGBean</code>由部署描述符实例化。每<code>AdminConsoleExtensionGBean</code>在管理控制台中修改或仅添加一页。这实质上意味着可以通过指定现有页面的名称将portlet添加到现有页面，或者如果不存在具有指定名称的页面，则可以创建单独的页面。</p>

<p>部署计划可能还包括多个定义<code>AdminConsoleExtensionGBeans</code> 。这意味着，如果选择这样做，则部署计划可能会向控制台添加任意数量的页面。</p>
    
<div class="cfm-align-center" style="text-align:center"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/stopcase.jpg"></span><br clear="none">图3-从控制台删除功能的用例</div>


<p>从控制台删除页面（图3）的过程与此类似。因为<code>AdminConsoleExtensionGBean</code>实现<code>GBeanLifecycle</code> ，当安装的组件停止时， <code>AdminConsoleExtensionGBean</code>也将停止。发生这种情况时，我们再次要求内核提供<code>PortalContainerServiceGBean</code> ，用于调用<code>removePortlet</code>通过其API在Pluto上运行。从管理控制台的视图中，用户将看到页面从导航菜单中消失了（图4）。如果用户再次启动该组件，则<code>dostart()</code>的方法<code>GBeanLifecycle</code>调用Pluto Container上的{{addPortlet（）}}方法，管理控制台扩展将再次出现在导航菜单上（图5）。</p>

    
<div class="cfm-align-center" style="text-align:center">
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/noext.jpg"></span><br clear="none">图4-我们看不到停止组件的左侧管理扩展</p>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/withext.jpg"></span><br clear="none">图5-我们看到HelloWorldPortlet的管理功能出现在导航中</p></div>


<h2 id="ExtensibleAdministrationConsole-Class/DependencyStructure">类/依赖结构</h2>
<div class="panel" style="border-width:1px"><div class="panelHeader" style="border-bottom-width:1px"><b>件之间的依赖关系</b></div><div class="panelContent">
<div class="indent0 inline" style="margin-left:0px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>PortalContainer</p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _PortalContainerServiceGBean</p></div>
<div class="indent40 inline" style="margin-left:40px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _AdminConsoleExtensionGBean</p></div>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _Pluto门户</p></div>
<div class="indent40 inline" style="margin-left:40px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _管理控制台</p></div>
<div class="indent60 inline" style="margin-left:60px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _新的Portlet</p></div>
</div></div>

<p>的<code>PortalContainer</code>是管理控制台的基本要求。冥王星门户和<code>PortalContainerServiceGBean</code>是将任何内容安装到控制台框架的基本要求。管理控制台和<code>AdminConsoleExtensionGBean</code>取决于<code>PortalContainerServiceGBean</code>和冥王星门户。为了添加新的控制台扩展，所有描述的组件都必须安装到位。</p>

<p>这里的关键是添加控制台扩展的要求是<code>AdminConsoleExtensionGBean</code>和新的Portlet文件。这意味着需要在部署描述符中指定的必需依赖项是管理控制台和<code>PortalContainerServicesGBean</code> 。</p>


<h2 id="ExtensibleAdministrationConsole-HowtoDevelopanAdministratorConsoleExtension(ACE)">如何开发管理员控制台扩展（ACE）</h2>
<p>为了开发自己的控制台扩展，您将需要执行以下步骤：</p>
<ol><li>创建一个portlet</li><li>添加一个<code>AdminConsoleExtensionGBean</code>部署计划</li><li>建立战争或汽车</li><li>部署应用</li><li>验证安装</li></ol>


<p>每个步骤将在下面进一步详细说明。</p>

<h3 id="ExtensibleAdministrationConsole-Differentwaysofstructuring">不同的结构方式</h3>
<p>为Geronimo创建ACE的整个概念是，您正在以Portlet的形式向管理员控制台添加扩展。您可以随意包装。一些选项如下：</p>
<ol><li>您的portlet</li><li>您的Portlet +相关组件</li><li>您的portlet声明了对相关组件的依赖</li></ol>


<h3 id="ExtensibleAdministrationConsole-Createaportlet">创建一个portlet</h3>
<p>在最基本的状态下，ACE定义了在控制台中放置新/旧Portlet的位置。Portlet是管理员控制台的基本构建块。我们将Pluto 2.x用作我们的门户网站引擎，因为它非常符合JSR 286 [ <a shape="rect" class="unresolved" href="#">链接到JSR 2868</a> ]。我们将不介绍如何开发portlet的细节，因为您会找到许多在此方面更好的教程和工具。您将需要适当的<code>web.xml</code>和<code>portlet.xml</code>文件已定义。作为一个简单的示例，请参阅<code>HelloWorldPortlet</code>在本节末尾定义。</p>

<h3 id="ExtensibleAdministrationConsole-AddanAdminConsoleExtensionGBean">添加一个<code>AdminConsoleExtensionGBean</code></h3>
<p>要添加<code>AdminConsoleExtensionGBean</code>到可部署的存档文件中，您需要在您的文件中包含以下内容<code>geronimo-web.xml</code>部署计划：</p>
<ol><li>声明对<code>pluto-porta</code>插入<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;dependencies&gt;
    ...
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.geronimo.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;pluto-support&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
</pre>
</div></div></li><li>定义一个<code>AdminConsoleExtensionGBean</code>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;gbean name="example" class="org.apache.geronimo.pluto.AdminConsoleExtensionGBean"&gt;
    &lt;attribute name="pageTitle"&gt;Testing&lt;/attribute&gt;
    &lt;attribute name="portletContext"&gt;/HelloWorldPortlet&lt;/attribute&gt;
    &lt;attribute name="portletList"&gt;[HelloWorldPortlet]&lt;/attribute&gt;
&lt;/gbean&gt;
</pre>
</div></div>其中的属性定义如下：</li></ol>
<ul><li><strong>pageTitle</strong>是将这些portlet添加到（新的或现有的）页面的名称</li><li><strong>portletContext</strong>是安装Portlet的上下文。</li><li><strong>portletList</strong>是要添加到此页面的portlet的逗号分隔列表。</li></ul>


<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>样本geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.2"&gt;
    &lt;environment&gt;
        &lt;moduleId&gt;
            &lt;groupId&gt;org.apache.geronimo.portals&lt;/groupId&gt;
            &lt;artifactId&gt;pluto-example&lt;/artifactId&gt;
            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
            &lt;type&gt;war&lt;/type&gt;
        &lt;/moduleId&gt;
        
        &lt;dependencies&gt;
            &lt;dependency&gt; &lt;!-- Put a dependancy on the hosting portal (pluto) --&gt;
                &lt;groupId&gt;org.apache.geronimo.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;pluto-support&lt;/artifactId&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/environment&gt;
    
    &lt;!-- This is where the files are accessed from. (aka - portletContext) --&gt;
    &lt;context-root&gt;/HelloWorldPortlet&lt;/context-root&gt;
    
    &lt;!-- Start off a ACEGBean, this is the lifecycle for the portlet --&gt;
    &lt;gbean name="PlutoTest" class="org.apache.geronimo.pluto.AdminConsoleExtensionGBean"&gt;
        &lt;attribute name="pageTitle"&gt;Hello&lt;/attribute&gt;
        &lt;attribute name="portletContext"&gt;/HelloWorldPortlet&lt;/attribute&gt;
        &lt;attribute name="portletList"&gt;[HelloWorldPortlet]&lt;/attribute&gt;
        &lt;reference name="PortalContainerServices"&gt;
            &lt;name&gt;PlutoPortalServices&lt;/name&gt;
        &lt;/reference&gt;
    &lt;/gbean&gt;
&lt;/web-app&gt;
</pre>
</div></div>

<h3 id="ExtensibleAdministrationConsole-Puttingittogether">把它放在一起</h3>
<p>将修改后的“ geronimo-web.xml”部署计划添加到WEB-INF文件夹中的WAR或CAR。另外，如果要包括portlet，则归档文件应包含适当的类文件以及“ web.xml”和“ portlet.xml”文件。</p>
<div class="panel" style="border-width:1px"><div class="panelHeader" style="border-bottom-width:1px"><b>简单战争的样本结构</b></div><div class="panelContent">
<p>HelloWorldPortlet.war</p>
<div class="indent20 inline" style="margin-left:20px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _WEB-INF /</p></div>
<div class="indent40 inline" style="margin-left:40px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _classes /</p></div>
<div class="indent60 inline" style="margin-left:60px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _（portlet类文件）</p></div>
<div class="indent40 inline" style="margin-left:40px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _geronimo-web.xml</p></div>
<div class="indent40 inline" style="margin-left:40px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _portlet.xml</p></div>
<div class="indent40 inline" style="margin-left:40px"><style type="text/css">div.inline p:first-child { display: inline; }</style><p>| _web.xml</p></div>
</div></div>

<h3 id="ExtensibleAdministrationConsole-Deployingtheapplication">部署应用程序</h3>
<p>使用<strong>部署</strong>命令或使用管理控制台中的<strong>Deployer</strong> portlet <strong>像平常一样</strong>部署归档文件。</p>
<ol><li><em>命令行</em> ：<br clear="none">例：<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre> deploy deploy c:/HelloWorldPortlet.war</pre>
</div></div> </li><li><em>使用管理控制台</em> ：<div class="cfm-align-center" style="text-align:center"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="extensible-administration-console.data/InstApp.jpg"></span></div>
</li></ol>



<h3 id="ExtensibleAdministrationConsole-Verifyinginstallation">验证安装</h3>
<p>转到<a shape="rect" class="external-link" href="http://localhost:8080/console/" rel="nofollow">http：// localhost：8080 / console /</a>验证是否已将portlet添加到正确的页面。（如果从命令行部署了应用程序，则可能需要刷新浏览器。）</p>

<h2 id="ExtensibleAdministrationConsole-SampleExtension">样品扩展</h2>
<p>这是管理控制台扩展的工作示例。<br clear="none">
<a shape="rect" href="extensible-administration-console.data/example_extension.war?version=1&modificationDate=1212646675000&api=v2" data-linked-resource-id="20874233" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example_extension.war" data-nice-type="Java Archive" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645341" data-linked-resource-container-version="19">下载示例WAR</a></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>HelloWorldPortlet.java</b></div><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
package org.apache.pluto.examples;

import java.io.IOException; 
import java.io.PrintWriter;

import javax.portlet.GenericPortlet;
import javax.portlet.PortletException;
import javax.portlet.RenderRequest;
import javax.portlet.RenderResponse;

/**
 * A very simple portlet example.
 * This portlet displays 'Hello World' to the end user
 */
public class HelloWorldPortlet extends GenericPortlet {

    // This function is called when a user requests to view this portlet (by
    // navigating to the webpage in Pluto)
    public void doView(RenderRequest request, RenderResponse response)
            throws PortletException, IOException {

        // Set the response to read HTML
        response.setContentType("text/html;charset=UTF-8");

        // Required call for use of getWriter() and getPortletOutputStream()
        PrintWriter out = response.getWriter();
        // Write content to the portlet
        out.println("&lt;h1&gt;Hello World&lt;/h1&gt;");
    }
}
</pre>
</div></div></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Extensible Administration Console';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>