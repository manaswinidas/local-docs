<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Configuring resources in the application scope" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Configuring resources in the application scope" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: Configuring resources in the application scope</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans.html">Creating deployment plans</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans-for-applications.html">Creating deployment plans for applications</a>&nbsp;&gt;&nbsp;<a href="configuring-resources-in-the-application-scope.html">Configuring resources in the application scope</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Configuring resources in the application scope</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645423">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645423">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645423">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645423">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645423">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645423">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>In this section, we will discuss about the configurations that are already deployed and running in the server when the server is installed and started. </p>

<div class="toc-macro client-side-toc-macro" data-headerelements="H1,H2,H3,H4,H5,H6,H7"></div>

<h1 id="Configuringresourcesintheapplicationscope-Connectionpools">Connection pools</h1>

<p>Apache Geronimo ships with embedded Derby database and ActiveMQ message broker. There are also connection pools that connect to Derby and activeMQ configured to run in the installed server. The following sections discuss about various such configurations already running in the installed server.</p>

<h2 id="Configuringresourcesintheapplicationscope-EmbeddedDerbyDatabaseconnectionpool">Embedded Derby Database connection pool</h2>

<p>Apache Geronimo ships with embedded Derby database. The Derby libraries are present in the server repository at <code>&lt;geronimo_home&gt;/repository/org/apache/derby</code>. By default, a Derby database by name <code>SystemDatabase</code> is created and the files related to the database are stored at <code>&lt;geronimo_home&gt;/var/derby/SystemDatabase</code>. Along with that, by default, server deploys a database connection pool over the <code>SystemDatabase</code> with the configuration name <code>org.apache.geronimo.configs/system-database/2.1/car</code>. The name of the database connection pool is <code>SystemDatasource</code>. The configuration artifacts are stored at <code>&lt;geronimo_home&gt;/repository/org/apache/geronimo/configs/system-database</code>. The deployment plan used for database connection pool is as follows. </p>

<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>SystemDatasource</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;connector xmlns=&quot;http://geronimo.apache.org/xml/ns/j2ee/connector-1.2&quot;&gt;
  &lt;dep:environment xmlns:dep=&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot;&gt;
    &lt;dep:moduleId&gt;
      &lt;dep:groupId&gt;org.apache.geronimo.configs&lt;/dep:groupId&gt;
      &lt;dep:artifactId&gt;system-database&lt;/dep:artifactId&gt;
      &lt;dep:version&gt;2.1&lt;/dep:version&gt;
      &lt;dep:type&gt;car&lt;/dep:type&gt;
    &lt;/dep:moduleId&gt;
    &lt;dep:dependencies&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.geronimo.configs&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;transaction&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;2.1&lt;/dep:version&gt;
        &lt;dep:type&gt;car&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.geronimo.modules&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;geronimo-derby&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;2.1&lt;/dep:version&gt;
        &lt;dep:type&gt;jar&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.geronimo.modules&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;geronimo-timer&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;2.1&lt;/dep:version&gt;
        &lt;dep:type&gt;jar&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.derby&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;derby&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;10.2.2.0&lt;/dep:version&gt;
        &lt;dep:type&gt;jar&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.derby&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;derbynet&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;10.2.2.0&lt;/dep:version&gt;
        &lt;dep:type&gt;jar&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.derby&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;derbyclient&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;10.2.2.0&lt;/dep:version&gt;
        &lt;dep:type&gt;jar&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.tranql&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;tranql-connector-derby-embed-xa
        &lt;/dep:artifactId&gt;
        &lt;dep:version&gt;1.3&lt;/dep:version&gt;
        &lt;dep:type&gt;rar&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
    &lt;/dep:dependencies&gt;
    &lt;dep:hidden-classes/&gt;
    &lt;dep:non-overridable-classes/&gt;
  &lt;/dep:environment&gt;
  &lt;resourceadapter&gt;
    &lt;outbound-resourceadapter&gt;
      &lt;connection-definition&gt;
        &lt;connectionfactory-interface&gt;javax.sql.DataSource
        &lt;/connectionfactory-interface&gt;
        &lt;connectiondefinition-instance&gt;
          &lt;name&gt;SystemDatasource&lt;/name&gt;
          &lt;config-property-setting name=&quot;UserName&quot;/&gt;
          &lt;config-property-setting name=&quot;Password&quot;/&gt;
          &lt;config-property-setting name=&quot;DatabaseName&quot;&gt;
             SystemDatabase
          &lt;/config-property-setting&gt;
          &lt;config-property-setting name=&quot;CreateDatabase&quot;&gt;
             true
          &lt;/config-property-setting&gt;
          &lt;connectionmanager&gt;
            &lt;xa-transaction&gt;
              &lt;transaction-caching/&gt;
            &lt;/xa-transaction&gt;
            &lt;single-pool&gt;
              &lt;max-size&gt;100&lt;/max-size&gt;
              &lt;blocking-timeout-milliseconds&gt;
                 5000
              &lt;/blocking-timeout-milliseconds&gt;
              &lt;select-one-assume-match/&gt;
            &lt;/single-pool&gt;
          &lt;/connectionmanager&gt;
        &lt;/connectiondefinition-instance&gt;
        &lt;connectiondefinition-instance&gt;
          &lt;name&gt;NoTxDatasource&lt;/name&gt;
          &lt;config-property-setting name=&quot;UserName&quot;/&gt;
          &lt;config-property-setting name=&quot;Password&quot;/&gt;
          &lt;config-property-setting name=&quot;DatabaseName&quot;&gt;
             SystemDatabase
          &lt;/config-property-setting&gt;
          &lt;config-property-setting name=&quot;CreateDatabase&quot;&gt;
             true
          &lt;/config-property-setting&gt;
          &lt;connectionmanager&gt;
            &lt;no-transaction/&gt;
            &lt;single-pool&gt;
              &lt;max-size&gt;100&lt;/max-size&gt;
              &lt;blocking-timeout-milliseconds&gt;5000
              &lt;/blocking-timeout-milliseconds&gt;
              &lt;select-one-assume-match/&gt;
            &lt;/single-pool&gt;
          &lt;/connectionmanager&gt;
        &lt;/connectiondefinition-instance&gt;
      &lt;/connection-definition&gt;
    &lt;/outbound-resourceadapter&gt;
  &lt;/resourceadapter&gt;
  &lt;gbean name=&quot;DerbySystem&quot; 
         class=&quot;org.apache.geronimo.derby.DerbySystemGBean&quot;&gt;
    &lt;reference name=&quot;ServerInfo&quot;&gt;
      &lt;name&gt;ServerInfo&lt;/name&gt;
    &lt;/reference&gt;
    &lt;attribute name=&quot;derbySystemHome&quot;&gt;var/derby&lt;/attribute&gt;
  &lt;/gbean&gt;
  &lt;gbean name=&quot;DerbyNetwork&quot; 
         class=&quot;org.apache.geronimo.derby.DerbyNetworkGBean&quot;&gt;
    &lt;reference name=&quot;derbySystem&quot;&gt;
      &lt;name&gt;DerbySystem&lt;/name&gt;
    &lt;/reference&gt;
    &lt;attribute name=&quot;host&quot;&gt;localhost&lt;/attribute&gt;
    &lt;attribute name=&quot;port&quot;&gt;1527&lt;/attribute&gt;
  &lt;/gbean&gt;
  &lt;gbean name=&quot;DerbyLog&quot; 
         class=&quot;org.apache.geronimo.derby.DerbyLogGBean&quot;&gt;
    &lt;reference name=&quot;DerbySystem&quot;&gt;
      &lt;name&gt;DerbySystem&lt;/name&gt;
    &lt;/reference&gt;
  &lt;/gbean&gt;
  &lt;gbean name=&quot;DerbyDriver&quot; 
  class=&quot;org.apache.geronimo.system.util.JDBCDriverRegistrationGBean&quot;&gt;
    &lt;attribute name=&quot;driverClassName&quot;&gt;
       org.apache.derby.jdbc.EmbeddedDriver
    &lt;/attribute&gt;
  &lt;/gbean&gt;
  &lt;gbean name=&quot;DerbyClientDriver&quot; 
   class=&quot;org.apache.geronimo.system.util.JDBCDriverRegistrationGBean&quot;&gt;
    &lt;attribute name=&quot;driverClassName&quot;&gt;
      org.apache.derby.jdbc.ClientDriver
    &lt;/attribute&gt;
  &lt;/gbean&gt;
  &lt;gbean name=&quot;TransactionalThreadPooledTimer&quot; class=&quot;org.apache.geronimo.timer.jdbc.JDBCStoreThreadPooledTransactionalTimer&quot;&gt;
    &lt;attribute name=&quot;repeatCount&quot;&gt;5&lt;/attribute&gt;
    &lt;reference name=&quot;TransactionManager&quot;&gt;
      &lt;name&gt;TransactionManager&lt;/name&gt;
    &lt;/reference&gt;
    &lt;reference name=&quot;ManagedConnectionFactoryWrapper&quot;&gt;
      &lt;name&gt;SystemDatasource&lt;/name&gt;
    &lt;/reference&gt;
    &lt;reference name=&quot;ThreadPool&quot;&gt;
      &lt;name&gt;DefaultThreadPool&lt;/name&gt;
    &lt;/reference&gt;
    &lt;dependency&gt;
      &lt;name&gt;DerbySystem&lt;/name&gt;
    &lt;/dependency&gt;
  &lt;/gbean&gt;
  &lt;gbean name=&quot;NonTransactionalThreadPooledTimer&quot; class=&quot;org.apache.geronimo.timer.jdbc.JDBCStoreThreadPooledNonTransactionalTimer&quot;&gt;
    &lt;reference name=&quot;TransactionManager&quot;&gt;
      &lt;name&gt;TransactionManager&lt;/name&gt;
    &lt;/reference&gt;
    &lt;reference name=&quot;ManagedConnectionFactoryWrapper&quot;&gt;
      &lt;name&gt;SystemDatasource&lt;/name&gt;
    &lt;/reference&gt;
    &lt;reference name=&quot;ThreadPool&quot;&gt;
      &lt;name&gt;DefaultThreadPool&lt;/name&gt;
    &lt;/reference&gt;
    &lt;dependency&gt;
      &lt;name&gt;DerbySystem&lt;/name&gt;
    &lt;/dependency&gt;
  &lt;/gbean&gt;
&lt;/connector&gt;
]]></script>
</div></div>


<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The default namespace of the above XML document is <code><a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2">http://geronimo.apache.org/xml/ns/j2ee/connector-1.2</a></code>. The XML elements that do not have a namespace prefix belong to the default namespace.</p></div></div>

<p>After starting the server, the running database connection pool <code>SystemDatasource</code> can be observed on the admin console from <code>console Navigation =&gt; Services =&gt; Database pools</code>. The resource adapter used to deploy the above database connection pool is <code>tranql-connector-derby-embed-xa-1.3.rar</code>. The above plan is actually deployment plan of a outbound resource adapter. If the above plan is packaged along with the <code>rar</code> file, the xml content will be placed in <code>META-INF/geronimo-ra.xml</code> of the archive. </p>

<p>Closely observe various configurations in the deployment plan. Many derby libraries in the server repository are mentioned as dependencies. After configuring the outbound resource adapter, there are series of gbeans configured for the database connection pool. </p>

<h2 id="Configuringresourcesintheapplicationscope-EmbeddedActiveMQresourceadapter">Embedded ActiveMQ resource adapter</h2>

<p>By default, a JMS resource adapter that connects to embedded activemq message broker is deployed and running in the apache geronimo server. This is an outbound jms resource adapter that configures a connection factory and two message queues. The configuration name of the resource adapter is <code>org.apache.geronimo.configs/activemq-ra/2.1/car</code>. The artifacts of the resource adapter are stored at <code>&lt;geronimo_home&gt;/repository/org/apache/geronimo/configs/activemq-ra</code>. The deployment plan is as follows.</p>
<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>ActiveMQ RA</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;connector xmlns=&quot;http://geronimo.apache.org/xml/ns/j2ee/connector-1.2&quot;&gt;
  &lt;dep:environment xmlns:dep=&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot;&gt;
    &lt;dep:moduleId&gt;
      &lt;dep:groupId&gt;org.apache.geronimo.configs&lt;/dep:groupId&gt;
      &lt;dep:artifactId&gt;activemq-ra&lt;/dep:artifactId&gt;
      &lt;dep:version&gt;2.1&lt;/dep:version&gt;
      &lt;dep:type&gt;car&lt;/dep:type&gt;
    &lt;/dep:moduleId&gt;
    &lt;dep:dependencies&gt;
      &lt;dep:dependency&gt;
        &lt;dep:groupId&gt;org.apache.geronimo.configs&lt;/dep:groupId&gt;
        &lt;dep:artifactId&gt;activemq-broker&lt;/dep:artifactId&gt;
        &lt;dep:version&gt;2.1&lt;/dep:version&gt;
        &lt;dep:type&gt;car&lt;/dep:type&gt;
      &lt;/dep:dependency&gt;
    &lt;/dep:dependencies&gt;
    &lt;dep:hidden-classes/&gt;
    &lt;dep:non-overridable-classes/&gt;
  &lt;/dep:environment&gt;
  &lt;resourceadapter&gt;
    &lt;resourceadapter-instance&gt;
      &lt;resourceadapter-name&gt;ActiveMQ RA&lt;/resourceadapter-name&gt;
      &lt;config-property-setting name=&quot;ServerUrl&quot;&gt;tcp://0.0.0.0:61616&lt;/config-property-setting&gt;
      &lt;config-property-setting name=&quot;UserName&quot;&gt;geronimo&lt;/config-property-setting&gt;
      &lt;config-property-setting name=&quot;Password&quot;&gt;geronimo&lt;/config-property-setting&gt;
      &lt;workmanager&gt;
        &lt;gbean-link&gt;DefaultWorkManager&lt;/gbean-link&gt;
      &lt;/workmanager&gt;
    &lt;/resourceadapter-instance&gt;
    &lt;outbound-resourceadapter&gt;
      &lt;connection-definition&gt;
        &lt;connectionfactory-interface&gt;javax.jms.ConnectionFactory&lt;/connectionfactory-interface&gt;
        &lt;connectiondefinition-instance&gt;
          &lt;name&gt;DefaultActiveMQConnectionFactory&lt;/name&gt;
          &lt;implemented-interface&gt;javax.jms.QueueConnectionFactory&lt;/implemented-interface&gt;
          &lt;implemented-interface&gt;javax.jms.TopicConnectionFactory&lt;/implemented-interface&gt;
          &lt;connectionmanager&gt;
            &lt;xa-transaction&gt;
              &lt;transaction-caching/&gt;
            &lt;/xa-transaction&gt;
            &lt;single-pool&gt;
              &lt;max-size&gt;10&lt;/max-size&gt;
              &lt;blocking-timeout-milliseconds&gt;5000&lt;/blocking-timeout-milliseconds&gt;
              &lt;match-one/&gt;
            &lt;/single-pool&gt;
          &lt;/connectionmanager&gt;
        &lt;/connectiondefinition-instance&gt;
      &lt;/connection-definition&gt;
    &lt;/outbound-resourceadapter&gt;
  &lt;/resourceadapter&gt;
  &lt;adminobject&gt;
    &lt;adminobject-interface&gt;javax.jms.Queue&lt;/adminobject-interface&gt;
    &lt;adminobject-class&gt;org.apache.activemq.command.ActiveMQQueue&lt;/adminobject-class&gt;
    &lt;adminobject-instance&gt;
      &lt;message-destination-name&gt;MDBTransferBeanOutQueue&lt;/message-destination-name&gt;
      &lt;config-property-setting name=&quot;PhysicalName&quot;&gt;MDBTransferBeanOutQueue&lt;/config-property-setting&gt;
    &lt;/adminobject-instance&gt;
  &lt;/adminobject&gt;
  &lt;adminobject&gt;
    &lt;adminobject-interface&gt;javax.jms.Queue&lt;/adminobject-interface&gt;
    &lt;adminobject-class&gt;org.apache.activemq.command.ActiveMQQueue&lt;/adminobject-class&gt;
    &lt;adminobject-instance&gt;
      &lt;message-destination-name&gt;SendReceiveQueue&lt;/message-destination-name&gt;
      &lt;config-property-setting name=&quot;PhysicalName&quot;&gt;SendReceiveQueue&lt;/config-property-setting&gt;
    &lt;/adminobject-instance&gt;
  &lt;/adminobject&gt;
&lt;/connector&gt;
]]></script>
</div></div>

<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>The default namespace of the deployment plan is <code><a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2">http://geronimo.apache.org/xml/ns/j2ee/connector-1.2</a></code>. The xml elements that do not have a namespace prefix belong to default namespace.</p></div></div>

<p>The resource adapter used to deploy the above plan is <code>&lt;geronimo_home&gt;/repository/org/apache/geronimo/modules/geronimo-activemq-ra/2.1</code>. After the server is started, the running resource adapter can be looked up on the admin console from <code>Console Navigation =&gt; Services =&gt; JMS Resource</code>. We can also observe the connection factories and queues deployed by the resource adapter on the admin console.</p>

<h1 id="Configuringresourcesintheapplicationscope-Security">Security</h1>

<p>A Java EE application may consist of several components that can be deployed into different containers such as WEB container, EJB container, WebServices container in a JEE5 server. This kind of deployment allows multi-tier applications that interact with one another to perform a given user task. Multi-tier JEE5 applications can be secured by properly selecting authenticating mechanisms and designing authorization levels or roles. If the application components use declarative security management, the authentication and authorization aspects are declared in corresponding JEE5 deployment descriptors. The declared security roles or levels are mapped to real security roles or levels in the geronimo deployment plans through security realms. In Apache Geronimo , the security realms abstract away authentication and authorization aspects of the application components. The authentication and authorization together enable access control for the various components of the application.</p>

<p>Depending on the selected authenticating system, a JAAS login module is selected and configured in a security realm. JAAS login modules connect to corresponding user/group repositories and perform authentication and retrieve authorization information. The Geronimo server provides login modules that connect to different types of user/group repositories. These are <strong>PropertiesFileLoginModule</strong>, <strong>LDAPLoginModule</strong>, <strong>SQLLoginModule</strong> and <strong>CertificatePropertiesFileLoginModule</strong>.</p>

<p>For example, Geronimo uses <strong>geronimo-admin</strong> security realm to authenticate users when they login to the geronimo administration Console. The deployment plan of the security realm is follows.</p>

<h3 id="Configuringresourcesintheapplicationscope-geronimo-adminsecurityrealm">geronimo-admin security realm</h3>

<div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>geronimo-admin security realm</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;module xmlns=&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot;&gt;
    &lt;environment&gt;
        &lt;moduleId&gt;
            &lt;groupId&gt;console.realm&lt;/groupId&gt;
            &lt;artifactId&gt;geronimo-admin&lt;/artifactId&gt;
            &lt;version&gt;1.0&lt;/version&gt;
            &lt;type&gt;car&lt;/type&gt;
        &lt;/moduleId&gt;

        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.geronimo.framework&lt;/groupId&gt;
                &lt;artifactId&gt;j2ee-security&lt;/artifactId&gt;
                &lt;type&gt;car&lt;/type&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/environment&gt;
    
    &lt;gbean name=&quot;geronimo-admin&quot;
           class=&quot;org.apache.geronimo.security.realm.GenericSecurityRealm&quot;
           xsi:type=&quot;dep:gbeanType&quot;
           xmlns:dep=&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot;
           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;

        &lt;attribute name=&quot;realmName&quot;&gt;geronimo-admin&lt;/attribute&gt;
        &lt;reference name=&quot;ServerInfo&quot;&gt;
            &lt;name&gt;ServerInfo&lt;/name&gt;
        &lt;/reference&gt;
        
        &lt;xml-reference name=&quot;LoginModuleConfiguration&quot;&gt;
            &lt;log:login-config xmlns:log=&quot;http://geronimo.apache.org/xml/ns/loginconfig-2.0&quot;&gt;
                &lt;log:login-module control-flag=&quot;REQUIRED&quot; wrap-principals=&quot;false&quot;&gt;
                    &lt;log:login-domain-name&gt;geronimo-admin&lt;/log:login-domain-name&gt;
                    &lt;log:login-module-class&gt;
                        org.apache.geronimo.security.realm.providers.PropertiesFileLoginModule
                    &lt;/log:login-module-class&gt;
                    &lt;log:option name=&quot;groupsURI&quot;&gt;var/security/groups.properties&lt;/log:option&gt;
                    &lt;log:option name=&quot;usersURI&quot;&gt;var/security/users.properties&lt;/log:option&gt;
                &lt;/log:login-module&gt;
            &lt;/log:login-config&gt;
        &lt;/xml-reference&gt;
    &lt;/gbean&gt;

&lt;/module&gt;
]]></script>
</div></div> 
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The default namespace of the above XML document is <code><a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/deployment-1.2">http://geronimo.apache.org/xml/ns/deployment-1.2</a></code>. The XML elements that do not have a namespace prefix belong to the default namespace.</p></div></div>
<p>The above security realm is deployed over two property files <code>&lt;geronimo_home&gt;/var/security/users.properties</code> and <code>var/security/groups.properties</code> that contain user/group information using <code>org.apache.geronimo.security.realm.providers.PropertiesFileLoginModule</code>. The <a shape="rect" href="introducing-geronimo-administration-console.html">Geronimo Administration Console</a> is a web application that uses the above security realm for user authentication.</p>

<p>The security realm deployment plan is an XML file that uses <a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/deployment-1.2">http://geronimo.apache.org/xml/ns/deployment-1.2</a> schema for <strong>moduleId</strong>, dependency and security realm GBean configurations. The XML file uses <a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/loginconfig-2.0">http://geronimo.apache.org/xml/ns/loginconfig-2.0</a> schema for login module configuration. All the XML schema files <code>(.xsd)</code> are located at <code>&lt;geronimo_home&gt;/schema</code> directory. </p>

<p>The following table provides the summary of user/group repositories and corresponding login modules in Apache Geronimo</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p> User/Group Repository    </p></th><th colspan="1" rowspan="1" class="confluenceTh"><p> LoginModule                                                                                  </p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Property files            </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <code>org.apache.geronimo.security.realm.providers.PropertiesFileLoginModule</code>                    </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Database                  </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <code>org.apache.geronimo.security.realm.providers.SQLLoginModule</code>                               </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Ldap repository           </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <code>org.apache.geronimo.security.realm.providers.LDAPLoginModule</code>                              </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Certificate Repository    </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <code>org.apache.geronimo.security.realm.providers.CertificatePropertiesFileLoginModule</code>         </p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p> Any other                 </p></td><td colspan="1" rowspan="1" class="confluenceTd"><p> <code>User has to supply the custom JAAS module. Admin console can be used to deploy a security</code><br clear="none" class="atl-forced-newline">
                              <code>realm over custom JAAS login modules</code>                                                      </p></td></tr></tbody></table></div>


<p>Depending on the type of the login module, the options for configuration may change.</p>

<p>Once a security realm is deployed, it is available for any JEE5 application deployed in Geronimo to map declared roles to actual users/groups through a Geronimo specific deployment plan.</p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Configuring resources in the application scope';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
