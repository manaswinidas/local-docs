<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=2">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Migrating with the J2G Migration Tool">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Migrating with the J2G Migration Tool">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：使用J2G迁移工具进行迁移</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">Home</a> > <a href="documentation.html">文档</a> > <a href="migrating-to-apache-geronimo.html">迁移到Apache Geronimo</a> > <a href="migrating-from-jboss-to-geronimo.html">从JBoss迁移到Geronimo</a> > <a href="migrating-with-the-j2g-migration-tool.html">使用J2G迁移工具迁移</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">使用J2G迁移工具进行迁移</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645278"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645278">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645278"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645278">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645278"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645278">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar} 20</plain-text-body> <parameter ac:name="indent">像素</parameter> <parameter ac:name="style">光盘</parameter>

<h1 id="MigratingwiththeJ2GMigrationTool-Overview">总览</h1>
<p>JBoss to Geronimo（J2G）是作为Eclipse SDK插件构建的工具集，旨在帮助将为JBoss应用服务器编写或为Java 2 Enterprise Edition（J2EE）编写的应用程序源迁移到Apache Geronimo平台。</p>

<h1 id="MigratingwiththeJ2GMigrationTool-Downloading">正在下载</h1>
<p>有关下载J2G的信息，请访问<a shape="rect" class="external-link" href="http://geronimo.apache.org/development-tools.html">Geronimo开发工具</a>页面。<br clear="none">有关从源代码<a shape="rect" href="building-j2g-from-source.html">构建J2G的</a>信息，请访问从源代码<a shape="rect" href="building-j2g-from-source.html">构建J2G</a> 。</p>

<h1 id="MigratingwiththeJ2GMigrationTool-Components">组件</h1>

<p>J2G由具有基本Eclipse IDE UI扩展的三个可执行实用程序组成。“配置器”组件和三个主要组件，每个组件具有相对特定的功能，并且必须按以下顺序运行。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-Dependencies">依存关系</h2>

<p>J2G工具集至少需要以下应用程序版本<br clear="none">（这些是已知可以使用的J2G版本）</p>
<ul><li>Sun JDK 5.0+（J2SE 1.5）</li><li>带有JDT Core插件的Eclipse SDK 3.3M7</li><li>Apache Geronimo 1.1.1及更高版本</li><li>为JBoss 3.2及更高版本或J2EE 1.2及更高版本编写的应用程序。</li></ul>


<h3 id="MigratingwiththeJ2GMigrationTool-EnvironmentVariables">环境变量</h3>

<p>J2G中的工具要求将以下环境变量设置为正确的位置：</p>
<ul><li>JAVA_HOME（JDK的位置）</li><li>ECLIPSE_HOME（Eclipse SDK的位置）</li><li>WORKSPACE（临时蚀工作区的位置）</li></ul>


<h2 id="MigratingwiththeJ2GMigrationTool-Configurator">配置器</h2>

<p>要运行此组件，请导航至bin，然后运行j2g-configure</p>
<parameter ac:name="borderStyle">solid</parameter> <plain-text-body>user @ lappy-486：〜/ j2g $ cd bin user @ lappy-486：〜/ j2g / bin $ ./j2g-configure.sh将J2G插件复制到/home/user/.m2/repository/eclipse/eclipse/插件/ ...`../plugins/org.apache.geronimo.j2g.common_1.0.0-SNAPSHOT.jar'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.common_1 .0.0-SNAPSHOT.jar'`../plugins/org.apache.geronimo.j2g.descriptors_1.0.0-SNAPSHOT.jar'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org。 apache.geronimo.j2g.descriptors_1.0.0-SNAPSHOT.jar'`../plugins/org.apache.geronimo.j2g.jasper_1.0.0-SNAPSHOT.jar'->`/home/user/.m2/repository/eclipse /eclipse/plugins/org.apache.geronimo.j2g.jasper_1.0.0-SNAPSHOT.jar'`../plugins/org.apache.geronimo.j2g.resources_1.0.0-SNAPSHOT.jar'->`/ home / user /.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.resources_1.0.0-SNAPSHOT.jar'`../plugins/org.apache.geronimo.j2g.sources_1.0.0-SNAPSHOT.jar' -> /home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources_1.0.0-SNAPSHOT.jar'`../plugins/org.apache.geronimo.j2g.util_1。 0.0-SNAPSHOT.jar'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.util _1.0.0-SNAPSHOT.jar'`../properties/org.apache.geronimo.j2g.descriptors.ejb/persistence_differences.properties'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org .apache.geronimo.j2g.descriptors.ejb / persistence_differences.properties'`../properties/org.apache.geronimo.j2g.descriptors.ejb.annotation/annotation_differences.properties'-> /home/user/.m2/repository /eclipse/eclipse/plugins/org.apache.geronimo.j2g.descriptors.ejb.annotation/annotation_differences.properties'`../properties/org.apache.geronimo.j2g.sources.dependence/default_jars.properties'->` /home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.dependence/default_jars.properties'`../properties/org.apache.geronimo.j2g.sources.dependence/ class_analogies.properties'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.dependence/class_analogies.properties'`../properties/org.apache.geronimo .j2g.sources.dependence / compatible_sources.properties'->`/ home / use r / .m2 / repository / eclipse / eclipse / plugins / org.apache.geronimo.j2g.sources.dependence / compatible_sources.properties'`../properties/org.apache.geronimo.j2g.sources.environment/beans-types .properties'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.environment/beans-types.properties'`../properties/org.apache。 geronimo.j2g.sources.environment / beans-interfaces.properties'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.environment/beans-interfaces.properties '`../properties/org.apache.geronimo.j2g.sources.environment/beans-references.properties'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo。 j2g.sources.environment / beans-references.properties'`../compatibility/org.apache.geronimo.j2g.sources.dependence.compatibility/DigestCallback.java'->`/home/user/.m2/repository/eclipse /eclipse/plugins/org.apache.geronimo.j2g.sources.dependence.compatibility/DigestCallback.java'`../compatibility/org。 apache.geronimo.j2g.sources.dependence.compatibility / GeronimoLoginModule.java'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.dependence.compatibility/GeronimoLoginModule .java'`../compatibility/org.apache.geronimo.j2g.sources.dependence.compatibility/PasswordHasher.java'->`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache。 geronimo.j2g.sources.dependence.compatibility / PasswordHasher.java'`../compatibility/org.apache.geronimo.j2g.sources.dependence.compatibility/Nobody.java'->`/home/user/.m2/repository /eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.dependence.compatibility/Nobody.java'`../compatibility/org.apache.geronimo.j2g.sources.dependence.compatibility/GeronimoSimpleGroup.java'- >`/home/user/.m2/repository/eclipse/eclipse/plugins/org.apache.geronimo.j2g.sources.dependence.compatibility/GeronimoSimpleGroup.java'../compatibility/org.apache.geronimo.j2g。 sources.dependence.compatibility / Anybody.java'->`/home/user/.m 2 / repository / eclipse / eclipse / plugins / org.apache.geronimo.j2g.sources.dependence.compatibility / Anybody.java'配置文件的备份已写入/home/user/.m2/repository/eclipse/ eclipse / configuration / config.bak配置完成。user @ lappy-486：〜/ j2g / bin $</plain-text-body>
<p>这将自动将./plugins、./properties和./compatibility目录的内容复制到ECLIPSE_HOME / plugins，并进行更改（或在必要时创建）ECLIPSE_HOME / configuration / config.ini。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-SourceIdentificationToolSummary">来源识别工具摘要</h2>

<p>此工具在作为命令行参数传递给它的目录中递归地解析源代码（.java和.jsp文件）。这样做时，它将替换所有与Geronimo等效的JBoss类和依赖项。如果没有等效项，它将警告用户该问题，必须通过手动创建替换类或重写依赖于JBoss类的代码段来解决。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-DescriptorsConversionToolSummary">描述符转换工具摘要</h2>

<p>该工具将JBoss特定的部署描述符和J2EE标准部署描述符（如果需要）转换为它们的Geronimo等效项。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-ResourceConversionToolSummary">资源转换工具摘要</h2>

<p>该工具将JBoss特定的资源（例如Java消息服务（JMS）队列，JMS主题，Java数据库连接（JDBC）数据源）转换为与它们的Geronimo等效的资源。</p>

<h1 id="MigratingwiththeJ2GMigrationTool-SourceIdentificationTool">来源识别工具</h1>

<rich-text-body>
<p><strong>强烈建议</strong>在运行J2G之前创建应用程序源的备份。</p></rich-text-body>

<h2 id="MigratingwiththeJ2GMigrationTool-Description">描述</h2>

<p>源识别工具应首先启动。它扫描源并识别在迁移过程中需要更改的文件。这些文件包括Java类（.java文件），JSP（.jsp文件），以及用参数-jspext指定的具有覆盖的JSP文件扩展名的文件。（例如：.js文件的-jspext html）</p>

<p>在这些文件中，该工具检查：</p>
<ul><li>使用与Geronimo不兼容的API（例如JBoss内部API）；</li><li>违反J2EE命名原则。</li></ul>


<p>当该工具检查与Geronimo不兼容的API的使用情况时，这些JBoss类将自动替换为Geronimo兼容类</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss类</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Geronimo兼容的类</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.jboss.security。简单主体</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.geronimo.security.realm.providers。GeronimoUserPrincipal</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.jboss.security.auth.spi。DigestCallback</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.geronimo.j2g.sources.dependence.compatibility。DigestCallback</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.jboss.security。没有人</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.geronimo.j2g.sources.dependence.compatibility。没有人</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.jboss.security。任何人</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.geronimo.j2g.sources.dependence.compatibility。任何人</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.jboss.security.auth.spi。用户名密码登录模块</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.geronimo.j2g.sources.dependence.compatibility。GeronimoLoginModule</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>org.jboss.security。简单组</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>org.apache.geronimo.j2g.sources.dependence.compatibility。GeronimoSimpleGroup</p></td></tr></tbody></table></div>

<p>上表以外的任何引用都必须手动更正，以使它们不再依赖JBoss的各个部分。重要的是要注意，JSP文件处理仅限于识别问题，并且当前不支持自动更正。</p>

<p>当该工具验证J2EE命名时，它会检测到组件（类或JSP）引用不属于要转换的应用程序一部分的命名对象的情况（例如：数据源，JMS或电子邮件提供者引用）。在简单的情况下，当组件使用直接的完整路径请求外部资源且没有任何环境引用时，该工具会尝试通过将资源引用添加到组件的部署描述符中来自动解决此问题，并用添加参考的名称。</p>

<p>当使用“源识别工具”自动更改源文件时，原始版本将以.j2g扩展名保存，并输出参考消息。在所有其他情况下，当需要手动解决问题时，该工具仅会打印警告消息。</p>

<h3 id="MigratingwiththeJ2GMigrationTool-Specifyingadditionalclasses">指定其他类别</h3>

<p>可以通过修改<strong><eclipse_home>/plugins/org.apache.geronimo.j2g.sources.dependence/class_analogies.properties</eclipse_home></strong>以包括适当的关系以及<strong><eclipse_home>/plugins/org.apache，</eclipse_home></strong>来定义JBoss特定类的其他直接替换<strong><eclipse_home>。 geronimo.j2g.sources.dependence / compatible_sources.properties</eclipse_home></strong>包含类名称。这些替换类的源代码必须放置在目录<strong><eclipse_home>/plugins/org.apache.geronimo.j2g.sources.dependence.compatibility中，</eclipse_home></strong>以便正确包含。</p>

<p>Geronimo jar中已经存在的类也可以添加到class-analogies.properties文件中。这些类无需放置在兼容性目录中，但是必须将依赖项添加到转换后的应用程序中的相应xml中。</p>

<p>以下是默认class_analogies.properties文件的示例</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="title">class_analogies.properties</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body>＃＃根据一项或多项贡献者许可协议授权给Apache Software Foundation（ASF）。有关版权拥有权的其他信息，请参见随本作品一起分发的NOTICE文件。＃ASF根据Apache许可证2.0版（“许可证”）将此文件许可给您。除非遵守＃许可，否则您不得使用此文件。您可以在＃＃http://www.apache.org/licenses/LICENSE-2.0处获得许可的副本。＃＃除非适用法律要求或书面同意，否则根据许可分发的软件＃将在“ “按现状”，＃没有任何明示或暗示的保证或条件。＃请参阅许可证，以了解许可证下特定的语言管理权限和限制。＃############################################### ################################################ ########＃Jboss类及其类比。################################################ ################################################ ####### org.jboss.security。SimplePrincipal = org.apache.geronimo.security.realm.providers。GeronimoUserPrincipal org.jboss.security.auth.spi。DigestCallback = org.apache.geronimo.j2g.sources.dependence.compatibility。DigestCallback org.jboss.security。没有人= org.apache.geronimo.j2g.sources.dependence.compatibility。没有人org.jboss.security。任何人= org.apache.geronimo.j2g.sources.dependence.compatibility。任何人org.jboss.security.auth.spi。UsernamePasswordLoginModule = org.apache.geronimo.j2g.sources.dependence.compatibility。GeronimoLoginModule org.jboss.security。SimpleGroup = org.apache.geronimo.j2g.sources.dependence.compatibility。GeronimoSimpleGroup</plain-text-body>
<p>以下是默认的compatible_sources.properties文件的示例</p>
<parameter ac:name="">XML</parameter> <parameter ac:name="title">compatible_sources.properties</parameter> <plain-text-body>在一个或多个＃贡献者许可协议，授权给Apache软件基金会（ASF） <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>##。有关版权拥有权的其他信息，请参见随本作品一起分发的NOTICE文件。＃ASF根据Apache许可证2.0版（“许可证”）将此文件许可给您。除非遵守＃许可，否则您不得使用此文件。您可以在＃＃http://www.apache.org/licenses/LICENSE-2.0处获得许可的副本。＃＃除非适用法律要求或书面同意，否则根据许可分发的软件＃将在“ “按现状”，＃没有任何明示或暗示的保证或条件。＃请参阅许可证，以了解许可证下特定的语言管理权限和限制。＃############################################### #####################兼容性来源列表####################### ############################################# org.apache。 geronimo.j2g.sources.dependence.compatibility。DigestCallback org.apache.geronimo.j2g.sources.dependence.compatibility。没有人org.apache.geronimo.j2g.sources.dependence.compatibility。org.apache.geronimo.j2g.sources.dependence.compatibility的任何人。GeronimoLoginModule org.apache.geronimo.j2g.sources.dependence.compatibility。GeronimoSimpleGroup org.apache.geronimo.j2g.sources.dependence.compatibility。密码哈希</plain-text-body>

<h2 id="MigratingwiththeJ2GMigrationTool-RunningtheSourceIdentificationTool-EclipseGUI">运行源识别工具-Eclipse GUI</h2>

<p>要在Eclipse IDE GUI中运行此组件，左面板必须首先在Navigator视图中。</p>

<p>进入Navigator视图后，可以右键单击并从上下文菜单中选择J2G Migration。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="migrating-with-the-j2g-migration-tool.data/menu.png"></span></p>

<p>在“ J2G迁移”子菜单中，选择“ 1。源标识工具（jsrc2g）”，然后按照给出的提示进行操作。</p>

<p>输出将显示在Eclipse IDE底部的集成控制台窗口中。<br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="migrating-with-the-j2g-migration-tool.data/output.png"></span></p>

<h2 id="MigratingwiththeJ2GMigrationTool-RunningtheSourceIdentificationTool-CommandLine">运行源代码识别工具-命令行</h2>

<p>要运行此组件，请从j2g bin目录执行以下命令，以<application>表示要转换的应用程序<geronimo_home>的路径</geronimo_home> ，并<geronimo_home>表示Geronimo 2.0的路径。</geronimo_home></application></p>

<p>* <strong>尼克斯</strong></p>
<parameter ac:name="borderStyle">固体</parameter> <plain-text-body>./jsrc2g.sh -src <application>/ src -web <application>/ web -geronimo <geronimo_home>
</geronimo_home></application></application></plain-text-body>
<p><strong>视窗</strong></p>
<parameter ac:name="borderStyle">固态</parameter> <plain-text-body>jsrc2g.bat -src <application>\ src -web <application>\ web -geronimo <geronimo_home>
</geronimo_home></application></application></plain-text-body>
<p>注意：要指定多个转换源，只需将它们用，s（逗号）分开，如下所示。</p>
<parameter ac:name="borderStyle">固态</parameter> <plain-text-body>jsrc2g.cmd -src <application><application><application>/src、/src2、.../srcn -web <application>/ web -geronimo <geronimo_home>
</geronimo_home></application></application></application></application></plain-text-body>
<p>该工具运行后（可能需要几秒钟，具体取决于系统速度和应用程序的复杂性），它将在控制台输出中显示所有警告和错误。这些消息应在用户认为合适的情况下进行解释和纠正。进行更改后，可以再次运行源工具以验证正确性。</p>

<h1 id="MigratingwiththeJ2GMigrationTool-DescriptorsConversionTool">描述符转换工具</h1>


<h2 id="MigratingwiththeJ2GMigrationTool-Description.1">描述</h2>

<p>描述符转换工具查找并尝试自动转换以下部署描述符，以便它们被Geronimo接受：</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>文档名称</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>目的</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>application.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>J2EE应用程序部署描述符</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>jboss-app.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>JBoss特定于元素的描述符，例如安全域，类加载器配置以及其他一些元素</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>web.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Web应用程序描述符</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>jboss-web.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>JBoss特定于元素的描述符，例如安全角色，会话设置，Web服务配置。它用于将Web应用程序集成到JBoss部署中</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ejb-jar.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>EJB部署描述符</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>jboss.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>JBoss描述符提供任何可选信息，例如bean的自定义容器配置或JNDI名称。它由JBoss使用，但未在相应的ejb-jar.xml中进行描述</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>jbosscmp-jdbc.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>JBossCMP-JDBC配置文件，描述CMP-数据库映射和密钥生成信息</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>standardjbosscmp-jdbc.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>默认的JBossCMP-JDBC配置文件</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>persistence.xml</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>数据源连接配置文件</p></td></tr></tbody></table></div>

<p>注意：Geronimo使用OpenEJB，它需要自己的描述符（openejb-jar.xml）。在某些情况下，可能没有给出jboss.xml。在这些情况下，将在指定给J2G的源路径中的最顶层目录上创建openejb-jar.xml。</p>

<h3 id="MigratingwiththeJ2GMigrationTool-Annotations(forEJB3.0)">注释（对于EJB 3.0）</h3>

<p>Geronimo和JBoss都支持标准EJB注释。但是，某些注释中提供的属性有所不同。<br clear="none">以下列出了所有可能在指定注释中出现的标准属性差异。</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>注解</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss属性</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Geronimo属性</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>资源资源</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>被映射的名字</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>名称</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>EJB</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>被映射的名字</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>名称</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>消息驱动</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>被映射的名字</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>名称</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>有状态的</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>被映射的名字</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>名称</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>无状态</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>被映射的名字</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>名称</p></td></tr></tbody></table></div>

<p>上表以外的任何引用都必须手动更正，以使它们不再依赖JBoss的各个部分。</p>
<rich-text-body>
<p>JBoss有自己的EJB注释扩展。这些必须根据需要手动更正</p></rich-text-body>

<h3 id="MigratingwiththeJ2GMigrationTool-Specifyingadditionalannotations">指定其他注释</h3>

<p>用户可以通过修改<strong><eclipse_home>/plugins/org.apache.geronimo.j2g.descriptors.ejb.annotation/annotation_differences.properties</eclipse_home></strong>来包含适当的关系，从而定义JBoss特定注释属性的其他直接替换。由于这些映射的性质不是一对一的，因此我们无法使用<em><annotation>=</annotation></em>的传统格式来格式化属性。 <em><annotation><attribute></attribute></annotation></em> 。而是，正确的格式如下：</p>

<p>对于标准EJB注释</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><property>:: <annotation>= <mapping>
</mapping></annotation></property></plain-text-body>
<p>哪里<strong><annotation></annotation></strong>是标准的EJB注释</p>

<p>对于特定于Geronimo兼容关系的标准jBoss</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><mapping>:: <j_attribute>-> <g_attribute>
</g_attribute></j_attribute></mapping></plain-text-body>
<p>哪里<strong><j_attribute></j_attribute></strong>是JBoss支持的属性，并且<strong><g_attribute></g_attribute></strong>是Geronimo支持的属性</p>

<p>最后，在单个注释需要多个属性映射的情况下</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body><mapping>:: <j_attribute>-> <g_attribute>， <mapping>
</mapping></g_attribute></j_attribute></mapping></plain-text-body>
<p>哪里<strong><j_attribute></j_attribute></strong>是JBoss支持的属性，并且<strong><g_attribute></g_attribute></strong>是Geronimo支持的属性</p>

<p>以下是默认的注解_differences.properties文件的示例</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="title">注解_differences.properties</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body>＃＃根据一项或多项贡献者许可协议获得Apache软件基金会（ASF）的许可。有关版权拥有权的其他信息，请参见随本作品一起分发的NOTICE文件。＃ASF根据Apache许可证2.0版（“许可证”）将此文件许可给您。除非遵守＃许可，否则您不得使用此文件。您可以在＃＃http://www.apache.org/licenses/LICENSE-2.0处获得许可的副本。＃＃除非适用法律要求或书面同意，否则根据许可分发的软件＃将在“ “按现状”，＃没有任何明示或暗示的保证或条件。＃请参阅许可证，以了解许可证下特定的语言管理权限和限制。＃############################################### ##########################＃Jboss类及其类推。################################################ ##########################资源=映射名称->名称EJB =映射名称->名称MessageDriven =映射名称->名称状态=映射名称- ->名称无状态=映射名称->名称</plain-text-body>

<h3 id="MigratingwiththeJ2GMigrationTool-OpenEJB">OpenEJB的</h3>

<p>当该工具检查与Geronimo不兼容的EJB引用的使用时，这些JBoss EJB引用将自动替换为与Geronimo兼容的OpenEJB引用。这是为在persistence.xml（用于EJB 3.0）中更改而指定的差异，以使配置一致。</p>
<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>JBoss EJB</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Geronimo OpenEJB</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>hibernate.connection.url</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>openjpa。连接网址</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>hibernate.connection.driver_class</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>openjpa。ConnectionDriverName</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>休眠连接密码</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>openjpa。连接密码</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>hibernate.connection.username</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>openjpa。ConnectionUserName</p></td></tr></tbody></table></div>

<p>上表以外的任何引用都必须手动更正，以使它们不再依赖JBoss的各个部分。</p>

<h3 id="MigratingwiththeJ2GMigrationTool-SpecifyingadditionalOpenEJBassociationsforpersistence.xml">为persistence.xml指定其他OpenEJB关联</h3>

<p>用户可以通过修改<strong><eclipse_home>/plugins/org.apache.geronimo.j2g.descriptors.ejb/persistence_differences.properties</eclipse_home></strong>来包含适当的关系，从而定义JBoss特定注释的其他直接替换。</p>

<p>以下是默认的persistence_differences.properties文件的示例</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="title">persistence_differences.properties</parameter> <parameter ac:name="borderStyle">solid</parameter> <plain-text-body>＃＃根据一项或多项贡献者许可协议授权给Apache Software Foundation（ASF）。有关版权拥有权的其他信息，请参见随本作品一起分发的NOTICE文件。＃ASF根据Apache许可证2.0版（“许可证”）将此文件许可给您。除非遵守＃许可，否则您不得使用此文件。您可以在＃＃http://www.apache.org/licenses/LICENSE-2.0处获得许可的副本。＃＃除非适用法律要求或书面同意，否则根据许可分发的软件＃将在“ “按现状”，＃没有任何明示或暗示的保证或条件。＃请参阅许可证，以了解许可证下特定的语言管理权限和限制。＃############################################### ##########################＃＃Jboss persistence.xml属性名称及其类似物。################################################ ######################### hibernate.connection.url = openjpa。ConnectionURL hibernate.connection.driver_class = openjpa。ConnectionDriverName hibernate.connection.password = openjpa。ConnectionPassword hibernate.connection.username = openjpa。ConnectionUserName hibernate.hbm2ddl.auto =建议：openjpa.jdbc。同步映射</plain-text-body>
<p>为了仅向用户建议X可以替代Y（这是有条件的，因为这不是直接翻译），因此可以将该属性写为<strong><y>=建议： <x></x></y></strong> 。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-RunningtheDescriptorsConversionTool-EclipseGUI">运行描述符转换工具-Eclipse GUI</h2>

<p>要在Eclipse IDE GUI中运行此组件，左面板必须首先在Navigator视图中。</p>

<p>进入Navigator视图后，可以右键单击并从上下文菜单中选择J2G Migration。</p>

<p>在“ J2G迁移”子菜单中，选择“ 2。描述符转换工具（jdes2g）”，然后按照给出的提示进行操作。<br clear="none">输出将显示在Eclipse IDE底部的集成控制台窗口中。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-RunningtheDescriptorsConversionTool-CommandLine">运行描述符转换工具-命令行</h2>

<p>要启动描述符转换工具，请从j2g bin目录中运行以下命令，其中再次<application>代表要转换的应用程序的路径</application></p>

<p>* <strong>尼克斯</strong></p>
<parameter ac:name="borderStyle">固体</parameter> <plain-text-body>./jdesc2g.sh <application>
</application></plain-text-body>
<p><strong>视窗</strong></p>
<parameter ac:name="borderStyle">固态</parameter> <plain-text-body>jdesc2g.bat <application>
</application></plain-text-body>
<p>该工具输出中给出的警告将仅报告无法自动转换的不受支持的元素，因此必须手动解决和转换。此过程在很大程度上取决于要转换的应用程序的结构，因此超出了本文档的范围。</p>

<h1 id="MigratingwiththeJ2GMigrationTool-ResourceMigrationTool">资源迁移工具</h1>


<h2 id="MigratingwiththeJ2GMigrationTool-Description.2">描述</h2>

<p>资源迁移工具将JBoss的特定资源转换为其Geronimo等效资源。它处理以下类型的资源：</p>
<ul><li>定义JDBC连接池和数据源的JBoss / JCA数据源描述符（* -ds.xml文件）。由于数据源取决于数据库类型，因此该工具将自动迁移以下知名数据库<ul><li>DB2</li><li>德比</li><li>高超音速</li><li>Informix</li><li>Microsoft SQL</li><li>的MySQL</li><li>甲骨文</li><li>PostgreSQL的</li><li>其他数据源定义必须手动迁移。如果定义包含未知参数，则该工具将通过警告消息进行指示。</li></ul>
	</li></ul>


<ul><li>JBoss MBean描述符（* -service.xml文件）。仅以下资源定义将被迁移<ul><li>javax.mail。届会</li><li>javax.jms。QueueConnectionFactory</li><li>javax.jms。TopicConnectionFactory</li><li>javax.transaction。交易管理器</li></ul>
	</li></ul>


<ul><li>提供JAAS登录模块配置的JBoss安全策略描述符（login-config.xml）。该工具将为以下JBoss登录模块迁移角色和策略定义以及用户和组。<ul><li>org.jboss.security.auth.spi。身份登录模块</li><li>org.jboss.security.auth.spi。UsersRolesLoginModule</li><li>org.jboss.security.auth.spi。LdapLoginModule</li><li>org.jboss.security.auth.spi。数据库服务器登录模块</li></ul>
	</li></ul>


<h2 id="MigratingwiththeJ2GMigrationTool-RunningtheResourceMigrationTool-EclipseGUI">运行资源迁移工具-Eclipse GUI</h2>

<p>要在Eclipse IDE GUI中运行此组件，左面板必须首先在Navigator视图中。</p>

<p>进入Navigator视图后，可以右键单击并从上下文菜单中选择J2G Migration。</p>

<p>在“ J2G迁移”子菜单中，选择“ 3。资源迁移工具（jres2g）”，然后按照提示进行操作。<br clear="none">输出将显示在Eclipse IDE底部的集成控制台窗口中。</p>

<h2 id="MigratingwiththeJ2GMigrationTool-RunningtheResourceMigrationTool-CommandLine">运行资源迁移工具-命令行</h2>

<p>要启动资源迁移工具，请从j2g bin目录运行以下命令，其中再次<application>代表要转换的应用程序的路径。</application></p>

<p>* <strong>尼克斯</strong></p>
<parameter ac:name="borderStyle">固体</parameter> <plain-text-body>./jres2g.sh <application>
</application></plain-text-body>
<p><strong>视窗</strong></p>
<parameter ac:name="borderStyle">固体</parameter> <plain-text-body>jres2g.bat <application>
</application></plain-text-body>
<p>该工具将输出要迁移的每个资源的名称，以及带有相关文件名和行号的信息，错误和警告消息。如果资源迁移完成而没有错误，该工具将输出一条成功消息，并在与原始文件夹相同的文件夹中生成迁移的资源。</p>

<p>与其他工具一样，必须手动更正“错误”和“警告”消息以完成转换过程，这同样是针对特定应用程序的，并且超出了本文档的范围。</p>

<h1 id="MigratingwiththeJ2GMigrationTool-Completion">完成时间</h1>

<p>一旦正确地执行了上述所有工具，并且不再有错误或警告，则可以为Geronimo构建转换后的应用程序。同样，这是非常特定于应用程序的，必须针对每种情况完全定制。</p>

<p>成功构建之后，应该可以将应用程序部署在正在运行的Geronimo 2.0实例中，而不会出现问题，但是如果不是这样，则必须解决部署时显示的错误，并且必须重新构建应用程序。</p></plain-text-body></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Migrating with the J2G Migration Tool';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>