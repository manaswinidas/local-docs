<html lang="zh-Hans" ><head></head><body  onload="init()">﻿
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="SPECjAppServer2004">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi SPECjAppServer2004">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：SPECjAppServer2004</title>
  

  

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="specjappserver2004.html">SPECjAppServer2004</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">SPECjAppServer2004</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645287"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645287">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645287"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645287">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645287"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645287">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p><parameter ac:name="">最佳</parameter></p>
<h1 id="SPECjAppServer2004-RunningSPECjAppServer2004benchmarkonGeronimo">在Geronimo上运行SPECjAppServer2004基准测试</h1>

<h2 id="SPECjAppServer2004-Stillnotasuccess,yourhelpneeded!">仍然没有成功，需要您的帮助！</h2>

<p><strong>本文展示了如何使用行业标准<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>基准评测<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>应用服务器的性能。</strong></p>

<rich-text-body><p>仍然存在阻止<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>在<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo上</a>运行的问题。</p>

<p>本文不是成功的故事，而是有关在该方向上取得的进展的注释集。</p>

<p>需要您帮助的当前问题是： <a shape="rect" href="specjappserver2004.html">＃运行基准测试</a></p></rich-text-body>

<rich-text-body><p><strong>免责声明：</strong>创建本文是为了记下现有经验并使其可复制。本手册的目标不是成为有关产品或将它们合并在一起的全面指南。它也不是产品文档的替代品，而只是逐步的指南，该指南对我来说很有效，如何使事情以简单的配置运行。在继续之前，请确保您至少阅读了两个产品的文档。</p></rich-text-body>

<rich-text-body><p><strong>SPECjAppServer</strong>是<strong>Standard Performance Evaluation Corp.</strong> （<a shape="rect" class="external-link" href="http://www.spec.org" rel="nofollow">SPEC</a> ）。<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>的官方网站位于<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">http://www.spec.org/jAppServer2004/</a> 。</p>

<p><strong>SPECjAppServer2004</strong> <strong>1.08</strong>版引入了称为<strong>EAStress2004</strong>的减少的工作量，该工作量放宽了运行和报告规则，使非正式结果可以在开源研究与开发项目中更轻松地共享。</p>

<p><strong>SPECjAppServer2004</strong> <strong>v1.08</strong>中的<strong>EAStress2004</strong>工作负载可用作优化开发中产品性能并在公共论坛上共享结果的工具。与<strong>SPECjAppServer2004</strong>结果不同，来自<strong>EAStress2004</strong>工作负载的测试结果无需在公开之前由<strong>SPEC</strong>进行检查。</p>

<p><strong>EAStress2004</strong>工作负载的结果不能用于营销目的，并且不允许与其他<strong>SPECjAppServer2004</strong>结果进行比较。</p>

<p>在此处查看<strong>SPECjAppServer2004 / EAStress2004 v1.08的</strong>完整新闻稿： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">//www.spec.org/jAppServer2004/jAppServer2004v108.html</a> 。</p>

<p>本文中的所有日志，堆栈和结果文件均从<strong>EAStress2004 v1.08</strong>运行中提取。</p></rich-text-body>

<p>本文是针对<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">v1.08</a>和<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> <a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v21-release.html">v2.1</a>编写的。对于其他版本，某些阶段可能有所不同。可在此处找到本文针对<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> v1.05的旧版本和<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo的</a>旧版本： <a shape="rect" class="external-link" href="http://cwiki.apache.org/confluence/display/GMOxDOC10/SPECjAppServer2004">v1.0</a> ， <a shape="rect" class="external-link" href="http://cwiki.apache.org/confluence/display/GMOxDOC11/SPECjAppServer2004">v1.1</a> ， <a shape="rect" class="external-link" href="http://cwiki.apache.org/confluence/display/GMOxDOC12/SPECjAppServer2004">v1.2</a> ， <a shape="rect" class="external-link" href="http://cwiki.apache.org/confluence/display/GMOxDOC20/SPECjAppServer2004">v2.0.2</a> 。</p>

<p>所描述的配置使用尽可能多的<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>组件，包括内置的<a shape="rect" class="external-link" href="http://db.apache.org/derby/">Derby</a>数据库和内置的<a shape="rect" class="external-link" href="http://jetty.mortbay.com" rel="nofollow">Jetty</a>或<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a> servlet容器。实际上，该配置仅使用<a shape="rect" class="external-link" href="http://java.sun.com" rel="nofollow">Java</a> ， <a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> ，外部servlet容器（例如<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a> ）和<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> 。要插入外部组件（很可能是数据库），您必须相应地更改配置。</p>

<p>此配置还假定所有组件（可能，除了<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>驱动程序和<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> Supplier Emulator及其Servlet容器之外）都在同一台计算机上运行。如果要运行“分布式”工作负载，则您的配置将有所不同。</p>

<p>此配置使用<a shape="rect" class="external-link" href="http://www.microsoft.com" rel="nofollow">Microsoft</a> <a shape="rect" class="external-link" href="http://www.microsoft.com/windows/products/windowsxp/" rel="nofollow">Windows XP Professional</a> <a shape="rect" class="external-link" href="http://www.microsoft.com/technet/prodtechnol/winxppro/maintain/winxpsp2.mspx" rel="nofollow">Service Pack 2</a>操作系统， <a shape="rect" class="external-link" href="http://cygwin.com" rel="nofollow">Cygwin</a> Shell， <a shape="rect" class="external-link" href="http://www.sun.com" rel="nofollow">Sun</a> <a shape="rect" class="external-link" href="http://java.sun.com" rel="nofollow">Java</a> <a shape="rect" class="external-link" href="http://java.sun.com/javase/" rel="nofollow">SE</a> <a shape="rect" class="external-link" href="http://java.sun.com/javase/downloads/index_jdk5.jsp" rel="nofollow">5.0</a> Update 11和<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a> v5.0.30撰写本文。如果您使用其他OS，Java或servlet容器，则某些阶段可能会有所不同。</p>

<p>本文对命令行使用正斜杠（/），如果使用<a shape="rect" class="external-link" href="http://www.microsoft.com/windows/" rel="nofollow">Windows</a>命令提示符，请相应地调整为反斜杠（\）。</p>

<hr>

<p>本文具有以下结构：</p>

<ul><li><a shape="rect" href="specjappserver2004.html">＃一般信息</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃关于Geronimo</a></li><li><a shape="rect" href="specjappserver2004.html">＃关于SPECjAppServer2004 / EAStress2004</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃获取产品</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃获得Geronimo</a></li><li><a shape="rect" href="specjappserver2004.html">＃获取SPECjAppServer2004</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃公约与环境</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃主机</a></li><li><a shape="rect" href="specjappserver2004.html">＃目录</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃安装产品</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃安装Geronimo</a></li><li><a shape="rect" href="specjappserver2004.html">＃安装SPECjAppServer2004</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃配置Geronimo</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃调整配置</a></li><li><a shape="rect" href="specjappserver2004.html">＃启动Geronimo</a></li><li><a shape="rect" href="specjappserver2004.html">＃访问控制台</a></li><li><a shape="rect" href="specjappserver2004.html">＃创建数据库</a></li><li><a shape="rect" href="specjappserver2004.html">＃找到SQL文件</a></li><li><a shape="rect" href="specjappserver2004.html">＃创建表格</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃配置SPECjAppServer2004</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃基本配置</a></li><li><a shape="rect" href="specjappserver2004.html">＃构建应用程序</a></li><li><a shape="rect" href="specjappserver2004.html">＃准备数据库配置</a></li><li><a shape="rect" href="specjappserver2004.html">＃加载表格</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃部署组件</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃在登录</a></li><li><a shape="rect" href="specjappserver2004.html">#Deploying数据库连接器</a></li><li><a shape="rect" href="specjappserver2004.html">＃部署JMS连接器</a></li><li><a shape="rect" href="specjappserver2004.html">＃部署主应用程序</a></li><li><a shape="rect" href="specjappserver2004.html">＃验证部署</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃部署供应商仿真器</a>
	<ul><li><a shape="rect" href="specjappserver2004.html">＃使用Geronimo servlet容器</a></li><li><a shape="rect" href="specjappserver2004.html">＃使用独立的servlet容器</a></li><li><a shape="rect" href="specjappserver2004.html">＃验证部署</a></li></ul>
	</li><li><a shape="rect" href="specjappserver2004.html">＃运行基准</a></li><li><a shape="rect" href="specjappserver2004.html">＃处理结果</a></li></ul>


<h1 id="SPECjAppServer2004-Generalinformation">一般信息</h1>

<h2 id="SPECjAppServer2004-AboutGeronimo">关于杰罗尼莫</h2>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>是经过<a shape="rect" class="external-link" href="http://www.apache.org">Apache Software Foundation</a> <a shape="rect" class="external-link" href="http://java.sun.com" rel="nofollow">Java</a> <a shape="rect" class="external-link" href="http://java.sun.com/javaee/" rel="nofollow">EE</a> 5认证的应用程序服务器。它是根据<a shape="rect" class="external-link" href="http://www.apache.org/licenses/LICENSE-2.0">Apache许可</a>开发的，可以免费下载。</p>

<p>Apache网站： <a shape="rect" class="external-link" href="http://apache.org">http</a> ： <a shape="rect" class="external-link" href="http://apache.org">//apache.org</a></p>

<p>产品站点： <a shape="rect" class="external-link" href="http://geronimo.apache.org">http</a> : <a shape="rect" class="external-link" href="http://geronimo.apache.org">//geronimo.apache.org</a></p>

<p>最新版本2.1： <a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v21-release.html">http</a> ： <a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v21-release.html">//geronimo.apache.org/apache-geronimo-v21-release.html</a></p>

<p>发行说明： <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC22/release-notes-21txt.html">http</a> : <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC22/release-notes-21txt.html">//cwiki.apache.org/GMOxDOC22/release-notes-21txt.html</a></p>

<p>文档页面： <a shape="rect" class="external-link" href="http://geronimo.apache.org/documentation.html">http</a> : <a shape="rect" class="external-link" href="http://geronimo.apache.org/documentation.html">//geronimo.apache.org/documentation.html</a></p>

<p>可用的最佳文档是<a shape="rect" class="external-link" href="mailto:ammulder@apache.org" rel="nofollow">Aaron Mulder</a>撰写的<strong>“ Apache Geronimo：J2EE开发和部署”</strong>一书： <a shape="rect" class="external-link" href="http://chariotsolutions.com/geronimo/" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://chariotsolutions.com/geronimo/" rel="nofollow">//chariotsolutions.com/geronimo/</a></p>

<p>其他重要资源是常见问题解答： <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxKB">http</a> : <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxKB">//cwiki.apache.org/GMOxKB</a>和Wiki： <a shape="rect" class="external-link" href="http://cwiki.apache.org/geronimo">http</a> : <a shape="rect" class="external-link" href="http://cwiki.apache.org/geronimo">//cwiki.apache.org/geronimo</a></p>

<h2 id="SPECjAppServer2004-AboutSPECjAppServer2004/EAStress2004">关于SPECjAppServer2004 / EAStress2004</h2>

<p><a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>是用于衡量<a shape="rect" class="external-link" href="http://java.sun.com" rel="nofollow">Java</a> <a shape="rect" class="external-link" href="http://java.sun.com/javaee/" rel="nofollow">EE</a>应用程序服务器性能的商业基准。</p>

<p><a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">EAStress2004</a>是减少工作量是一部分<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">的SPECjAppServer2004</a> <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">V1.08</a> ，它放松跑和报告规则，使非正式结果将在开源研究和开发项目更容易共享。</p>

<p>SPEC网站： <a shape="rect" class="external-link" href="http://www.spec.org" rel="nofollow">http</a> ： <a shape="rect" class="external-link" href="http://www.spec.org" rel="nofollow">//www.spec.org</a></p>

<p>产品站点： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">//www.spec.org/jAppServer2004/</a></p>

<p>关于v1.08和EAStress2004的新闻发布： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">//www.spec.org/jAppServer2004/jAppServer2004v108.html</a></p>

<p>常见问题解答： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/FAQ.html" rel="nofollow">http</a> ： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/FAQ.html" rel="nofollow">//www.spec.org/jAppServer2004/docs/FAQ.html</a></p>

<p>用户指南： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/UserGuide.html" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/UserGuide.html" rel="nofollow">//www.spec.org/jAppServer2004/docs/UserGuide.html</a></p>

<p>运行和报告规则： <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/RunRules.html" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/RunRules.html" rel="nofollow">//www.spec.org/jAppServer2004/docs/RunRules.html</a></p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-Obtainingproducts">获得产品</h1>

<h2 id="SPECjAppServer2004-ObtainingGeronimo">获取Geronimo</h2>

<p>目前， <a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>的最新版本是<a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v21-release.html">2.1</a> 。</p>

<p>常规下载页面： <a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http</a> : <a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">//geronimo.apache.org/downloads.html</a></p>

<p>存在两种<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>版本，默认情况下启用了<a shape="rect" class="external-link" href="http://jetty.mortbay.com" rel="nofollow">Jetty</a>或<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a> servlet容器。您可以从<a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http://geronimo.apache.org/downloads.html</a>下载任何一种，它们每个的大小约为80 MB。本文档主要使用<a shape="rect" class="external-link" href="http://jetty.mortbay.com" rel="nofollow">Jetty</a>版本编写，但是<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a>版本也可以正常工作。</p>

<h2 id="SPECjAppServer2004-ObtainingSPECjAppServer2004">获取SPECjAppServer2004</h2>

<p><a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004的</a>价格为2000美元（非营利/教育用途为250美元），您可以在线订购。有关详细信息，请参见<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/FAQ.html#Q10" rel="nofollow">FAQ</a> 。</p>

<p>最新版本是<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/jAppServer2004v108.html" rel="nofollow">1.08</a> ， <code>SPECjAppServer2004-Kit-v1.08.jar</code>文件，大小为12 MB。</p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-Conventionsandenvironment">公约与环境</h1>

<p>本节包含标记重要主机和目录的重要概念。</p>

<h2 id="SPECjAppServer2004-Hosts">主持人</h2>

<p>本文是针对以下计算机编写的：</p>

<ul><li><code><strong>geronimo.host</strong></code> –运行<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>的机器，已部署<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> 。</li></ul>


<ul><li><code><strong>emulator.host</strong></code> –部署<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> Supplier Emulator的计算机。</li></ul>


<ul><li><code><strong>driver.host</strong></code> –运行<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>驱动程序的计算机。如果将配置与多个驱动程序一起使用，则必须在所有驱动程序主机上对该主机重复所有操作。</li></ul>


<ul><li><code><strong>master.host</strong></code> –主，师父<code><strong>driver.host</strong></code>在具有多个驱动程序的配置中。</li></ul>


<p>的<code><strong>emulator.host</strong></code>和<code><strong>driver.host</strong></code>可能是同一台机器。</p>

<p>的<code><strong>geronimo.host</strong></code>和<code><strong>emulator.host</strong></code>可能是同一台机器，而且<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> Supplier Emulator可能会部署到<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>内置的Servlet容器（ <a shape="rect" class="external-link" href="http://jetty.mortbay.com" rel="nofollow">Jetty</a>或<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a> ）中。</p>

<p>的<code><strong>geronimo.host</strong></code>和<code><strong>driver.host</strong></code>可能是同一台机器，但是您必须<a shape="rect" href="specjappserver2004.html">调整</a> <a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>配置，因为<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>和<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>驱动程序都会在默认端口（1099）上创建<a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/rmi/" rel="nofollow">RMI</a>注册表，并且会在该端口上发生冲突。</p>

<rich-text-body><p>分享中<code><strong>geronimo.host</strong></code>与<code><strong>emulator.host</strong></code>要么<code><strong>driver.host</strong></code>与<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>文档矛盾，将严重影响性能并使基准测试结果无效。但是从技术上讲，这是可能的。</p></rich-text-body>

<h2 id="SPECjAppServer2004-Directories">目录</h2>

<p>本节列出了本文中将进一步介绍的重要目录。可以任意选择它们，但不应重叠。</p>

<ul><li><code><strong><GERONIMO></strong></code> –目录<code><strong>geronimo.host</strong></code> <a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>的安装位置。</li></ul>


<ul><li><code><strong><SPEC></strong></code> –目录<code><strong>geronimo.host</strong></code>安装了<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004的</a>位置。</li></ul>


<ul><li><code><strong><KIT></strong></code> –目录<code><strong>geronimo.host</strong></code>包含本文所附的文件。</li></ul>


<ul><li><code><strong><TOMCAT></strong></code> –目录<code><strong>emulator.host</strong></code> <a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a>的安装位置。</li></ul>


<ul><li><code><strong><DRIVER></strong></code> –目录<code><strong>driver.host</strong></code>那是<code><strong><SPEC></strong></code>目录。</li></ul>


<ul><li><code><strong><DRIVER_GERONIMO></strong></code> –目录<code><strong>driver.host</strong></code>那是<code><strong><GERONIMO></strong></code>目录。</li></ul>


<ul><li><code><strong><JAVA_HOME></strong></code> – <code>JAVA_HOME</code>位置<code><strong>driver.host</strong></code> 。</li></ul>


<ul><li><code><strong><OUTPUT></strong></code> –目录<code><strong>driver.host</strong></code> <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>驱动程序将在其中存储其输出的位置。</li></ul>


<ul><li><code><strong><DUMP></strong></code> –目录<code><strong>driver.host</strong></code> <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>驱动程序将在其中存储其临时文件的位置。
<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none">
<rich-text-body><p><strong>在Windows上，</strong>如果工作路径太长或包含空格，则某些组件可能无法正常工作。因此建议您避免使用长路径和空格。</p></rich-text-body></li></ul>


<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-Installingproducts">安装产品</h1>

<p>首先，将本文附带的文件保存到本地目录。这将是你的<code><strong><KIT></strong></code>目录。</p>

<h2 id="SPECjAppServer2004-InstallingGeronimo">安装Geronimo</h2>

<p>您可以使用以下命令轻松安装<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> <code>.zip</code>要么<code>.tar.gz</code>存档。</p>

<p>将下载的存档解压缩到本地目录。的<code>geronimo-jetty6-javaee5-2.1</code>要么<code>geronimo-tomcat6-javaee5-2.1</code>目录已创建，即您的<code><strong><GERONIMO></strong></code>目录。</p>

<h2 id="SPECjAppServer2004-InstallingSPECjAppServer2004">安装SPECjAppServer2004</h2>

<p>跑：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar SPECjAppServer2004-Kit-v1.08.jar</code></p></rich-text-body>

<p>单击“ <strong>下一步”</strong> ，阅读并接受许可协议，然后键入要将<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>安装到的目录。该目录将是您的<code><strong><SPEC></strong></code>目录。</p>

<p>点击<strong>安装</strong> 。</p>

<p>等待安装完成，然后单击“ <strong>就绪”</strong> 。</p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-ConfiguringGeronimo">配置Geronimo</h1>

<h2 id="SPECjAppServer2004-Adjustingconfiguration">调整配置</h2>

<p>如果你的<code><strong>geronimo.host</strong></code>和你的<code><strong>driver.host</strong></code>如果是同一台机器，则必须调整<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/rmi/" rel="nofollow">RMI</a>注册表的端口号（例如为1199），否则它将与使用默认端口1099的<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>驱动程序冲突。编辑<code><strong><GERONIMO></strong>/var/config/config-substitutions.properties</code>文件并更改<code>NamingPort</code>可变值。</p>

<h2 id="SPECjAppServer2004-StartingGeronimo">启动Geronimo</h2>

<p>去你的<code><strong><GERONIMO></strong></code>目录。</p>

<p>通过输入以下命令启动<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> ：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -Djava.endorsed.dirs=lib/endorsed -javaagent:bin/jpa.jar -Dopenejb.jndiname.failoncollision=true -Dopenejb.jndiname.format={ejbName} -jar bin/server.jar</code></p></rich-text-body>

<rich-text-body><p>请注意两个<a shape="rect" class="external-link" href="http://openejb.apache.org">OpenEJB</a>设置，它们是将<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>调整为<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>使用的EJB JNDI名称的简单格式所必需的。</p>

<p>请参阅<a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC22/client-jndi-names.html">http://cwiki.apache.org/GMOxDOC22/client-jndi-names.html</a>和<a shape="rect" class="external-link" href="http://cwiki.apache.org/OPENEJB/service-locator.html">http://cwiki.apache.org/OPENEJB/service-locator.html上的</a>详细信息。</p></rich-text-body>

<p>您也可以使用<code><strong><GERONIMO></strong>/bin/geronimo.sh</code>要么<code><strong><GERONIMO></strong>/bin/geronimo.bat</code>脚本，经过适当的调整。</p>

<rich-text-body><p><a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> <a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v21-release.html">v2.1</a>需要访问Internet才能部署<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>应用程序–它试图从<a shape="rect" class="external-link" href="http://java.sun.com" rel="nofollow">http://java.sun.com</a>站点获取XML模式。</p>

<p>因此，如果您位于防火墙后面，请在<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>启动行中添加适当的代理选项：</p>

<p><code>-Dhttp.proxyHost=PROXY_HOST -Dhttp.proxyPort=PROXY_PORT -Dhttp.nonProxyHosts="127.0.0.1|localhost|<strong>geronimo.host</strong>|<strong>emulator.host</strong>"</code></p>

<p>此问题是由已修复的<a shape="rect" class="external-link" href="http://issues.apache.org/jira/browse/OPENEJB-700">OPENEJB-700</a>错误引起的，该修复应适用于<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> v2.1.1。</p>

<p>如果您的<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>安装根本无法访问Internet，或者您的代理服务器需要身份验证，则可以使用以下变通方法（感谢<a shape="rect" class="external-link" href="mailto:soap_man@mail.ru" rel="nofollow">Konstantin Malynkin对其</a>进行描述）。您可以将必要的DTD下载到本地驱动器，并在部署描述符中指定它们的本地路径（请参阅<code><strong><SPEC></strong>/src/deploy/geronimo</code>目录）。例如，您可以使用<code><!DOCTYPE ejb-jar SYSTEM "C:/DTD/ejb-jar_2_0.dtd"></code>代替<code><!DOCTYPE ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN' 'http://java.sun.com/dtd/ejb-jar_2_0.dtd'></code> 。另一种方法是完全删除验证，方法是删除或注释掉部署描述符中对DTD的引用。请注意，在这两种情况下，你必须<a shape="rect" href="specjappserver2004.html">重建</a>和<a shape="rect" href="specjappserver2004.html">重新部署</a>的<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004的</a> ，以使更改生效应用。</p></rich-text-body>

<p>这将需要一些时间来开始。之后，您将看到：</p>

<p><span style="color:white"><parameter ac:name="bgColor">黑色</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>Booting Geronimo Kernel（在Java 1.5.0_11中）...启动Geronimo Application Server v2.1 [********************************************] 100 ％25s启动完成监听端口：0 0.0.0.0 Derby连接器1050 127.0.0.1 CORBA命名服务1099 0.0.0.0 RMI命名2001 127.0.0.1 OpenEJB ORB适配器4201 0.0.0.0 OpenEJB守护程序6882 127.0.0.1 OpenEJB ORB适配器8009 0.0。 0.0 Jetty连接器AJP13 8080 0.0.0.0 Jetty SelectChannel连接器HTTP 8443 0.0.0.0 Jetty SelectChannel连接器HTTPS 9999 0.0.0.0 JMX远程连接器61613 0.0.0.0 ActiveMQ Transport连接器61616 0.0.0.0 ActiveMQ Transport连接器已启动的应用程序模块：EAR：org.apache .geronimo.configs / uddi-jetty6 / 2.1 / car EAR：org.apache.geronimo.plugins / agent / 2.1 / car EAR：org.apache.geronimo.plugins / console-jetty / 2.1 / car EAR：org.apache。 geronimo.plugins / mconsole-jetty / 2.1 / car JAR：org.apache.geronimo.configs / mejb / 2.1 / car RAR：org.apache.geronimo.configs / activemq-ra / 2.1 / car RAR：org.apache.geronimo .configs / system-database / 2.1 / car RAR：org.apache.geronimo.plugins / ag ent-ds / 2.1 / car RAR：org.apache.geronimo.plugins / mconsole-ds / 2.1 / car WAR：org.apache.geronimo.configs / ca-helper-jetty / 2.1 / car WAR：org.apache.geronimo .configs / dojo-jetty6 / 2.1 / car WAR：org.apache.geronimo.configs / dojo-legacy-jetty6 / 2.1 / car WAR：org.apache.geronimo.configs / remote-deploy-jetty / 2.1 / car WAR： org.apache.geronimo.configs / welcome-jetty / 2.1 / car WAR：org.apache.geronimo.plugins / activemq-console-jetty / 2.1 / car WAR：org.apache.geronimo.plugins / debugviews-console-jetty / 2.1 /汽车WAR：org.apache.geronimo.plugins / plancreator-console-jetty / 2.1 /汽车WAR：org.apache.geronimo.plugins / plugin-console-jetty / 2.1 / car WAR：org.apache.geronimo.plugins /sysdb-console-jetty/2.1/car Web应用程序：/ / CAHelper / activemq / console / console-base / debug-views / dojo /dojo/0.4 / juddi / monitoring / plan-creator / plugin / remote-deploy / system数据库Geronimo Application Server已启动</plain-text-body></span></p>

<p>如果您得到不同的结果，特别是如果出现网络错误，则说明出现了问题。</p>

<rich-text-body><p>有时，由于某些本地网络地址不可访问而导致启动失败。例如，如果您使用的VPN接口现在已断开连接，则可能会发生这种情况。默认情况下， <a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>使用遇到的第一个本地地址来访问其组件，并且可能尝试使用陈旧的地址，从而导致启动错误。</p>

<p>您可以尝试禁用然后重新启用未使用的网络接口来解决此类问题。</p></rich-text-body>

<h2 id="SPECjAppServer2004-Accessingtheconsole">访问控制台</h2>

<p>打开您的Web浏览器，并通过以下网址连接到<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> Console。<code><strong>http:/</strong><strong>/geronimo.host:8080/console/</strong></code></p>

<p>使用用户名和密码（默认情况下为<strong>系统</strong>和<strong>管理员</strong> ）登录。</p>

<p>现在，您可以根据需要调查控制台。</p>

<h2 id="SPECjAppServer2004-Creatingthedatabase">创建数据库</h2>

<p>在控制台导航中，转到<strong>嵌入式DB-DB Manager</strong> 。</p>

<p>通过在“ <strong>创建数据库”</strong>字段中键入其名称（ <strong>SPECDB</strong> ）并单击“ <strong>创建”</strong>来<strong>创建</strong>基准数据库。</p>

<h2 id="SPECjAppServer2004-LocatingtheSQLfiles">查找SQL文件</h2>

<p>要创建数据库表，您可以使用提供的默认SQL脚本。 <code><strong><SPEC></strong>/schema/sql</code>目录。但是，该目录包含五个脚本，并且它们包含<code>DROP TABLE</code>如果尚未创建表时尝试在控制台中执行命令，这些命令将失败。</p>

<p>相反，建议您使用<a shape="rect" href="specjappserver2004.data/allTablesNoDrop.sql?version=1&modificationDate=1204189826000&api=v2" data-linked-resource-id="20874038" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="allTablesNoDrop.sql" data-nice-type="Text File" data-linked-resource-content-type="text/plain" data-linked-resource-container-id="20645287" data-linked-resource-container-version="20">allTablesNoDrop.sql</a>文件，如果你是从头开始创建表，或<a shape="rect" href="specjappserver2004.data/allTables.sql?version=1&modificationDate=1204189826000&api=v2" data-linked-resource-id="20874037" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="allTables.sql" data-nice-type="Text File" data-linked-resource-content-type="text/plain" data-linked-resource-container-id="20645287" data-linked-resource-container-version="20">allTables.sql</a>文件，如果你想删除并重新创建表。这两个文件都是从<code><strong><SPEC></strong>/schema/sql</code>通过简单的串联文件， <a shape="rect" href="specjappserver2004.data/allTablesNoDrop.sql?version=1&modificationDate=1204189826000&api=v2" data-linked-resource-id="20874038" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="allTablesNoDrop.sql" data-nice-type="Text File" data-linked-resource-content-type="text/plain" data-linked-resource-container-id="20645287" data-linked-resource-container-version="20">allTablesNoDrop.sql</a>也有<code>DROP TABLE</code>命令已删除。</p>

<h2 id="SPECjAppServer2004-Creatingthetables">创建表</h2>

<p>确保在“ <strong>使用数据库”</strong>字段中选择了<strong>SPECDB</strong> ，然后将SQL代码复制粘贴到<strong>SQL Command / s</strong>框架中。单击其上方的<strong>“运行SQL”</strong>按钮。</p>

<p>短暂延迟后，该框将清除，并且其下面的“ <strong>结果”</strong>字段将显示<strong>SQL命令成功</strong> 。如果不是，请检查您做错了什么，然后重试。</p>

<p>如果使用多个SQL脚本，请对每个脚本重复上述操作。</p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-ConfiguringSPECjAppServer2004">配置SPECjAppServer2004</h1>

<h2 id="SPECjAppServer2004-Basicconfiguration">基本配置</h2>

<h3 id="SPECjAppServer2004-deploydirectory"><code>deploy</code>目录</h3>

<p>转到<code><strong><SPEC></strong>/src/deploy</code>目录并复制<code>reference</code>子目录，其内容为名称<code>geronimo</code> 。</p>

<h3 id="SPECjAppServer2004-geronimo.envfile"><code>geronimo.env</code>文件</h3>

<p>转到<code><strong><SPEC></strong>/config</code>目录。</p>

<p>将随附的<a shape="rect" href="specjappserver2004.data/geronimo.env?version=1&modificationDate=1205865997000&api=v2" data-linked-resource-id="20874039" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="geronimo.env" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645287" data-linked-resource-container-version="20">geronimo.env</a>模板文件放在此处。编辑它，确保设置以下变量的值：</p>

<p><code>JAS_HOME=<strong><SPEC></strong></code><br clear="none">
<code>JAVA_HOME=<strong><JAVA_HOME></strong></code><br clear="none">
<code>J2EE_HOME=<strong><GERONIMO></strong></code><br clear="none">
<code>JAS_HOST=<strong>geronimo.host</strong></code><br clear="none">
<code>EMULATOR_HOST=<strong>emulator.host</strong></code></p>

<rich-text-body><p>使用正斜杠（/）作为目录分隔符！</p></rich-text-body>

<p>您可以保留其他变量不变。</p>

<h3 id="SPECjAppServer2004-appsserverfile"><code>appsserver</code>文件</h3>

<p>编辑<code><strong><SPEC></strong>/config/appsserver</code>文件–用<strong>geronimo</strong>代替<strong>default</strong> 。</p>

<h3 id="SPECjAppServer2004-run.propertiesfile"><code>run.properties</code>文件</h3>

<p>编辑<code><strong><SPEC></strong>/config/run.properties</code>文件。请注意，它将用于<code><strong>driver.host</strong></code>并确保以下变量具有正确的值：</p>

<p><code>researchMode = true # Turns EAStress mode on</code><br clear="none">
<code>Url = http:/</code><code>/<strong>geronimo.host</strong>:8080/SPECjAppServer/app?</code><br clear="none">
<code>outDir = <strong><OUTPUT></strong></code><br clear="none">
<code>dumpDir = <strong><DUMP></strong></code></p>

<h3 id="SPECjAppServer2004-setenv.batfile"><code>setenv.bat</code>文件</h3>

<p>编辑<code><strong><SPEC></strong>/bin/setenv.bat</code>文件，请确保设置以下变量的值：</p>

<p><code>JAVA_HOME=<strong><JAVA_HOME></strong></code><br clear="none">
<code>JAS_HOME=<strong><DRIVER></strong></code><br clear="none">
<code>APPSSERVER=geronimo</code></p>

<h2 id="SPECjAppServer2004-Buildingtheapplication">建立应用程式</h2>

<p>转到<code><strong><SPEC></strong></code>目录。</p>

<p>清理安装：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>ant/bin/ant clean</code></p></rich-text-body>

<p>生成应用程序并为<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>配置它：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>ant/bin/ant -Dappserver=geronimo</code></p></rich-text-body>

<p>您将获得<strong>BUILD SUCCESSFUL</strong>诊断。</p>

<p>确保文件<code>SPECjAppServer.ear</code>和<code>emulator.war</code>在中创建<code><strong><SPEC></strong>/jars</code>目录。</p>

<p>改名<code>emulator.war</code>至<code>Emulator.war</code> 。</p>

<h2 id="SPECjAppServer2004-Preparingdatabaseconfiguration">准备数据库配置</h2>

<p>在描述的配置中，所有表都使用相同的数据库。</p>

<p>转到<code><strong><SPEC></strong>/config</code>目录。替换每个内容<code>*db.properties</code>您在其中找到的文件以及随附的<a shape="rect" href="specjappserver2004.data/db.properties?version=1&modificationDate=1204189826000&api=v2" data-linked-resource-id="20874036" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="db.properties" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="20645287" data-linked-resource-container-version="20">db.properties</a>模板文件的内容。确保<code>pipeDir</code>该变量指向有效的临时目录，必要时进行调整。</p>

<h2 id="SPECjAppServer2004-Loadingthetables">加载表格</h2>

<p>跑：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>ant/bin/ant -Dappserver=geronimo loaddb</code></p></rich-text-body>

<p>一段时间后，您将获得<strong>BUILD SUCCESSFUL</strong>诊断。</p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-Deployingcomponents">部署组件</h1>

<p>在这一阶段，您需要将已配置的组件部署到<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> 。</p>

<rich-text-body><p>请注意，如果您的<code><strong>geronimo.host</strong></code>和你的<code><strong>driver.host</strong></code>是同一台机器，并且<a shape="rect" href="specjappserver2004.html">更改</a>了<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/rmi/" rel="nofollow">RMI</a> Registry的端口号，则应在所有部署程序命令中指定该端口号，如下所示：<br class="atl-forced-newline" clear="none">
<br class="atl-forced-newline" clear="none"></p>
<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar bin/deployer.jar -port 1199 ...</code></p></rich-text-body></rich-text-body> 

<h2 id="SPECjAppServer2004-Loggingin">在登录</h2>

<p>为避免在对部署程序的任何调用中指定登录凭据，您可以先登录：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar bin/deployer.jar -u system -p manager login</code></p></rich-text-body>

<h2 id="SPECjAppServer2004-Deployingdatabaseconnector">部署数据库连接器</h2>

<p>要将连接器部署到您先前创建的<a shape="rect" class="external-link" href="http://db.apache.org/derby/">Derby</a> <strong>SPECDB</strong>数据库，请转至<code><strong><GERONIMO></strong></code>目录并运行：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar bin/deployer.jar deploy repository/org/tranql/tranql-connector-derby-embed-xa/1.3/tranql-connector-derby-embed-xa-1.3.rar <strong><KIT></strong>/sjas-db.xml</code></p></rich-text-body>

<p>您将获得<strong>SPECjAppServer2004 / DB / 1.08 / rar</strong>诊断。</p>

<h2 id="SPECjAppServer2004-DeployingJMSconnector">部署JMS连接器</h2>

<p>要为<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>部署<a shape="rect" class="external-link" href="http://www.activemq.org" rel="nofollow">ActiveMQ</a> JMS连接器，请转到<code><strong><GERONIMO></strong></code>目录并运行：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar bin/deployer.jar deploy repository/org/apache/geronimo/modules/geronimo-activemq-ra/2.1/geronimo-activemq-ra-2.1.rar <strong><KIT></strong>/sjas-jms.xml</code></p></rich-text-body>

<p>您将获得<strong>SPECjAppServer2004 / JMS / 1.08 / rar</strong>诊断。</p>

<h2 id="SPECjAppServer2004-Deployingthemainapplication">部署主应用程序</h2>

<p>要在<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>上部署<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> ，此配置使用最初在<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>来源<a shape="rect" class="external-link" href="http://svn.apache.org/viewcvs.cgi/geronimo/sandbox/specjappserver2004/specj2004-deployment-plan.xml">http://svn.apache.org中</a>找到的部署计划，该计划已针对<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> 2.1版进行了修改和更新。</p>

<p>转到<code><strong><GERONIMO></strong></code>目录并运行：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar bin/deployer.jar deploy <strong><SPEC></strong>/jars/SPECjAppServer.ear <strong><KIT></strong>/sjas-app.xml</code></p></rich-text-body>

<p>您将获得<strong>SPECjAppServer2004 / Application / 1.08 / ear</strong>诊断。</p>

<h2 id="SPECjAppServer2004-Verifyingthedeployment">验证部署</h2>

<p>在此阶段，您可以检查部署是否正确完成以及<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>是否可运行。</p>

<h3 id="SPECjAppServer2004-Deliveryservlet">交付servlet</h3>

<p>转到页面<code><strong>http:/</strong><strong>/geronimo.host:8080/Supplier/</strong></code> 。它应正常加载并包含一个目录， <code>dtd</code> ，里面有两个文件， <code>delivery.dtd</code>和<code>po.dtd</code> 。</p>

<p>转到页面<code><strong>http:/</strong><strong>/geronimo.host:8080/Supplier/DeliveryServlet</strong></code> 。您应该会看到一个包含以下文本的页面：</p>

<parameter ac:name="bgColor">白色</parameter> <parameter ac:name="borderStyle">固体</parameter> <rich-text-body>
<p><strong>Servlet似乎正常工作</strong><br clear="none">
<strong>交易数：0</strong><br clear="none">
<sup><strong>在未指定命令的情况下调用Servlet</strong></sup></p></rich-text-body>

<h3 id="SPECjAppServer2004-Manualtransactions">手动交易</h3>

<p>打开部署的<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>页面：<code><strong>http:/</strong><strong>/geronimo.host:8080/SPECjAppServer/</strong></code></p>

<p>在左侧菜单中，点击<strong>Go Trade Autos！</strong> 或<strong>去造车！</strong> 链接。</p>

<p>使用默认凭据登录（ <code><strong>1</strong></code> ），点击<strong>登录</strong> 。</p>

<p>您应该看到程序界面并能够执行事务。</p>

<h3 id="SPECjAppServer2004-Atomicitytests">原子度测试</h3>

<p>打开部署的<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a>页面：<code><strong>http:/</strong><strong>/geronimo.host:8080/SPECjAppServer/</strong></code></p>

<p>在左侧菜单中，单击<strong>原子性测试</strong>链接。</p>

<p>您将看到三个原子性测试运行的结果。如果它们三个都标记为<span style="color:red"><strong>PASSED</strong></span> ，则您的部署是正确的。</p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-DeployingtheSupplierEmulator">部署供应商仿真器</h1>

<p>在以下位置部署<a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> Supplier Emulator <code><strong>emulator.host</strong></code> ，请使用以下之一：</p>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a>内置的servlet容器（如果<code><strong>emulator.host</strong></code>和<code><strong>geronimo.host</strong></code>是同一台机器）；或独立的servlet容器<code><strong>emulator.host</strong></code> 。</p>

<rich-text-body><p>请注意， <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/" rel="nofollow">SPECjAppServer2004</a> <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/UserGuide.html#Section3" rel="nofollow">文档</a>要求Supplier Emulator servlet容器应具有<code>keep-alive</code>选项已关闭。您可以忽略此要求，但这会严重影响性能。</p></rich-text-body>

<h2 id="SPECjAppServer2004-UsingtheGeronimoservletcontainer">使用Geronimo servlet容器</h2>

<p>转到<code><strong><GERONIMO></strong></code>目录并运行：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -jar bin/deployer.jar deploy <strong><SPEC></strong>/jars/Emulator.war <strong><KIT></strong>/sjas-emulator.xml</code></p></rich-text-body>

<p>您将获得<strong>SPECjAppServer2004 / Emulator / 1.08 / war @ / Emulator</strong>诊断。</p>

<h2 id="SPECjAppServer2004-Usingastand-aloneservletcontainer">使用独立的servlet容器</h2>

<p>此配置假定您的独立servlet容器位于<code><strong>emulator.host</strong></code>是<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a>在默认端口（8080）上运行。</p>

<p>将<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a>安装到您的<code><strong><TOMCAT></strong></code>目录在<code><strong>emulator.host</strong></code> 。</p>

<rich-text-body><p><strong>不要打扰</strong>编辑<code><strong><SPEC></strong>/config/tomcat.env</code>文件或正在运行<code>ant/bin/ant -f tomcat.xml</code> 。</p>

<p>这两个文件都已过时，它们会生成<code>Emulator.war</code>文件，该文件已在<a shape="rect" href="specjappserver2004.html">#Building应用程序</a>阶段创建。</p></rich-text-body>

<p>复制<code><strong><SPEC></strong>/jars/Emulator.war</code>归档到<code><strong><TOMCAT></strong>/webapps</code>目录并删除<code><strong><TOMCAT></strong>/webapps/Emulator</code>目录（如果存在）。</p>

<p>转到<code><strong><TOMCAT></strong></code>目录在<code><strong>emulator.host</strong></code>并启动<a shape="rect" class="external-link" href="http://tomcat.apache.org">Tomcat</a> ：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>bin/catalina run</code></p></rich-text-body>

<h2 id="SPECjAppServer2004-Veryfyingthedeployment">非常部署</h2>

<p>转到页面<code><strong>http:/</strong><strong>/emulator.host:8080/Emulator/</strong></code> 。它应正常加载并包含一个目录， <code>dtd</code> ，里面有两个文件， <code>delivery.dtd</code>和<code>po.dtd</code> 。</p>

<p>转到页面<code><strong>http:/</strong><strong>/emulator.host:8080/Emulator/EmulatorServlet</strong></code> 。您应该会看到一个包含以下文本的页面：</p>

<parameter ac:name="bgColor">白色</parameter> <parameter ac:name="borderStyle">固体</parameter> <rich-text-body>
<p><strong>Emulator Servlet似乎可以正常工作</strong><br clear="none">
<strong>JAS_HOST：geronimo.host</strong><br clear="none">
<strong>JAS_PORT：8080</strong><br clear="none">
<strong>Servlet URL：供应商/交货Servlet</strong></p>

<p><strong>交易数：0</strong><br clear="none">
<sup><strong>在未指定命令的情况下调用Servlet</strong></sup></p></rich-text-body>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-Runningthebenchmark">运行基准</h1>

<p>复制<code><strong><GERONIMO></strong></code>目录到<code><strong>driver.host</strong></code> ，副本将是您的<code><strong><DRIVER_GERONIMO></strong></code>目录（实际上您只需要其中的一些jar）。</p>

<p>复制<code><strong><SPEC></strong></code>目录到<code><strong>driver.host</strong></code> ，副本将是您的<code><strong><DRIVER></strong></code>目录。</p>

<p>在里面<code><strong><DRIVER></strong>/config/geronimo.env</code>文件调整<code>JAS_HOME</code>变量<code><strong><DRIVER></strong></code>目录和<code>J2EE_HOME</code>变量<code><strong><DRIVER_GERONIMO></strong></code>目录。</p>

<p>转到<code><strong><DRIVER></strong></code>目录在<code><strong>driver.host</strong></code>并运行：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>bin/setenv.bat</code></p></rich-text-body>

<p>这将配置环境以运行驱动程序。</p>

<p>要启动驱动程序本身，请运行：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>bin/driver.bat</code></p></rich-text-body>

<p>如果您希望使用多个驱动程序运行分布式负载，请在第一台主机上启动驱动程序后， <code><strong>master.host</strong></code> ），在其他驱动程序主机上启动驱动程序，如下所示：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>bin/driver.bat <strong>master.host</strong></code></p></rich-text-body>

<p>启动驱动程序后，您应该看到如下输出：</p>

<p><span style="color:white"><parameter ac:name="bgColor">黑色</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>以下环境设置有效：* ========================= * JAVA_HOME = <java_home>JAS_HOME = <driver>CONFIG_DIR = <driver>\ config APPSSERVER = geronimo ENVFILE = <driver>\ config \ geronimo.env * * ======================== *驱动程序主机： <driver.host>此结果是使用EAStress2004创建的，EAStress2004是利用SPECjAppServer2004基准测试具有唯一的指标。仅在由于技术原因（例如，开发中的项目使用，实验平台的使用）而无法满足基准运行规则的情况下，仅将其作为研究测试和实验的工具提供。SPEC未审查EAStress2004结果，因此不能与SPECjAppServer2004结果进行比较。由于EAStress结果不符合基准运行规则，因此禁止在供应商之间进行竞争性比较时使用EAStress结果。SPECjAppServer2004基准测试结果（包括EAStress工作负载）的公共使用受SPEC OSSC合理使用指南和SPECjAppServer2004特定的运行和报告规则的约束。所有出版物都必须明确声明这些结果尚未由SPEC审查或接受，其文字等同于以下内容：SPECjAppServer是Standard Performance Evaluation Corp.的商标。SPEC）。SPEC未审查或接受本出版物中的EAStress工作负载结果或发现，因此无法与任何已发布的SPEC结果进行比较或性能推断。SPECjAppServer2004的官方网站位于http://www.spec.org/osg/jAppServer2004。将控制器绑定到// <driver.host>/ / Controller DriverDebug：DealerAgent <propsfile><agentname><mastermachine>控制器：在计算机上注册M1 <driver.host ip="" address="">控制器：在计算机上注册O1 <driver.host ip="" address="">控制器：在计算机上注册L1 <driver.host ip="" address="">调用switchLog作为该运行的主RunID是：75该运行的输出目录是： <output> <driver.host><propsfile><agentname><mastermachine><driver.host ip="" address=""><driver.host ip="" address=""><driver.host ip="" address="">\ 75 TTF1 = 93 ttf = 93配置1个DealerAgent ... DealerAgent O1，线程0启动DealerAgent O1，线程1启动DealerAgent O1，线程2启动DealerAgent O1，线程3启动DealerAgent O1，线程4启动DealerAgent O1，线程5启动DealerAgent O1，线程6启动DealerAgent O1，线程7启动DealerAgent O1 ，线程8启动DealerAgent O1，线程9开始配置1 MfgAgent ...MfgAgent M1，线程0已启动MfgAgent M1，线程1已启动MfgAgent M1，线程2已启动配置1 LargeOLAgent ...MfgAgent L1，线程0已启动Rampup = Fri May 12 20:49:51 MSD 2006 SteadyState = Fri May 12 20:59:51 MSD 2006 Rampdown = Fri May 12 21:59:51 MSD 2006 Finish = Fri May 12 22:04 ：51 MSD 2006睡眠时间为28417，请注意，这是触发启动斜坡所需的时间...
</driver.host></driver.host></driver.host></mastermachine></agentname></propsfile></driver.host></output></driver.host></driver.host></driver.host></mastermachine></agentname></propsfile></driver.host></driver.host></driver></driver></driver></java_home></plain-text-body></span></p>

<p>这意味着驱动程序正常启动。</p>

<p>请注意<strong>Rampup</strong> ， <strong>SteadyState</strong> ， <strong>Rampdown</strong>和<strong>Finish</strong>的时间，以计算完成基准测试所需的时间。</p>

<rich-text-body><p>您可以随时通过以下方式中断运行<code>Ctrl-C</code> 。</p></rich-text-body>

<p>有时，驱动程序启动时可能会发生绑定异常或其他问题。在这种情况下，请中断测试运行<code>Ctrl-C</code>然后重新运行。有时会有所帮助。</p>

<rich-text-body><p>建议在每次运行之前<a shape="rect" href="specjappserver2004.html">重新加载</a>数据库表，尤其是如果先前的运行未正确完成时。否则，可能会发生以下错误：</p>

<p><span style="color:white"><parameter ac:name="bgColor">黑色</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>java.rmi。RemoteException：调用validateInitialValues（）java.rmi失败。RemoteException：org.spec.jappserver.driver处的无效初始Order DB状态。org.spec.jappserver.driver上的Auditor.validateInitialValues（Auditor.java:201）。org.spec.jappserver.driver上的Driver.configure（Driver.java:330）。司机<init>（org.spec.jappserver.driver中的Driver.java:160）。Driver.main（Driver.java:1137）</init></plain-text-body></span></p></rich-text-body>

<p>在运行期间，类似这样的诊断可能会出现在Driver输出和<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> shell中：</p>

<p><span style="color:white"><parameter ac:name="bgColor">黑色</parameter> <parameter ac:name="borderStyle">实心</parameter> <plain-text-body>AbstractSJASLoad>应用程序错误已以错误的格式在块大小字段b = 70中出售。仅将事务标记为回滚，原因仅是Bean遇到非应用程序异常：由于死锁，锁定周期而无法获得锁定服务员是：</plain-text-body></span></p>

<rich-text-body><p>这些诊断可能是由于<a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo</a> <a shape="rect" class="external-link" href="http://geronimo.apache.org/apache-geronimo-v21-release.html">v2.1</a>中使用的<a shape="rect" class="external-link" href="http://tranql.codehaus.org" rel="nofollow">TranQL</a>版本1.3没有提供必要的事务隔离级别这一事实引起的。希望此问题将在以后的版本中解决。</p></rich-text-body>

<p>运行成功完成后，您将看到如下输出：</p>

<p><span style="color:white"><parameter ac:name="bgColor">黑色</parameter> <parameter ac:name="borderStyle">固体</parameter> <plain-text-body>Gathering DealerStats ...收集MfgStats ...摘要文件是<output> \ 75 \ EAStress.summary EAStress2004 v1.08结果EAStress2004 HASOPM：0.574经销商响应购买时间... 2.3000000000000003管理..... 10.0浏览..... 4.0制造响应时间制造........ 0.25以主身份调用getLog </output></plain-text-body></span></p>

<p><strong>HASOPM</strong>的数量是<strong>EAStress</strong>的最终基准指标。如果尝试完全运行<strong>SPECjAppServer2004，</strong>则会得到<strong>JOPS</strong>结果。</p>

<rich-text-body><p>目前， <a shape="rect" class="external-link" href="http://geronimo.apache.org">Geronimo的</a>这些值非常低，并且不依赖于所使用的硬件。可能是由于某些配置问题仍然存在，或者是由于上述<a shape="rect" class="external-link" href="http://tranql.codehaus.org" rel="nofollow">TranQL</a>问题。</p></rich-text-body>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p>

<h1 id="SPECjAppServer2004-Processingresults">处理结果</h1>

<p>运行驱动程序时，将在目录中创建一个带有数字名称的子目录。 <code><strong><OUTPUT></strong></code>目录。编号最大的子目录对应于最新运行。驱动程序运行完成后， <code>result.props</code>在此处创建文件，其中包含基准测试的原始结果。</p>

<p>转到<code><strong><DRIVER></strong>/reporter</code>目录，复制文件<code>Sample_Submission.txt</code>以仲裁名称（例如<code>Your_Submission.txt</code> ）并编辑副本，如《 <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/UserGuide.html#Section5" rel="nofollow">SPECjAppServer2004用户指南::第5节-结果》中所述</a> ，从<code>result.props</code>文件。</p>

<p>运行以下命令以生成HTML基准测试报告，该报告将命名为<code>Your_Submission.report.html</code> ：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -cp reporter.jar reporter Your_Submission.txt</code></p></rich-text-body>

<p>运行以下命令以生成纯文本基准报告，该报告将命名为<code>Your_Submission.report.txt</code> ：</p>

<parameter ac:name="borderStyle">固体</parameter><rich-text-body><p><code>java -cp reporter.jar reporter -a Your_Submission.txt</code></p></rich-text-body>

<p>有关如何提交结果的详细信息，请参见《 <a shape="rect" class="external-link" href="http://www.spec.org/jAppServer2004/docs/UserGuide.html#S53" rel="nofollow">SPECjAppServer2004用户指南:: :: 5.3节-提交结果》。</a></p>

<p><a shape="rect" href="specjappserver2004.html">回到顶部</a></p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : SPECjAppServer2004';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>