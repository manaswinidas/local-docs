<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Developing and Deploying a Geronimo GBean">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Developing and Deploying a Geronimo GBean">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：开发和部署Geronimo GBean</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">Home</a> > <a href="documentation.html">文档</a> > <a href="reference.html">参考</a> > <a href="geronimo-architecture.html">Geronimo体系结构</a> > <a href="gbeans.html">GBeans</a> > <a href="developing-and-deploying-a-geronimo-gbean.html">开发和部署Geronimo GBean</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">开发和部署Geronimo GBean</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645474"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645474">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645474"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645474">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645474"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645474">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>Geronimo是一个系统框架，可用于构建各种量身定制的基础架构服务，而<strong>GBean</strong>为其提供了一个松散耦合且可配置的运行时环境。GBean是控制反转（IoC）或依赖项注入的实现，它允许在引用可用时自动注入。本教程的结构如下：</p>


<h1 id="DevelopingandDeployingaGeronimoGBean-GeronimoKernelandGBean">Geronimo内核和GBean</h1>

<h2 id="DevelopingandDeployingaGeronimoGBean-Geronimokernel">Geronimo内核</h2>
<p>Geronimo内核是内核服务的框架，并通过以下服务控制基本服务器组件：</p>
<ul><li>组件配置</li><li>组件库</li><li>依赖管理</li><li>生命周期管理</li></ul>


<p>基本服务器组件（即<strong>安全性</strong> ， <strong>日志记录</strong> ， <strong>事务</strong>和<strong>命名</strong> ）与内核服务一起使用，以构建Java EE服务器组件，例如Tomcat，Jetty和OpenEJB。所有这些组件都与内核协作以支持Java EE应用程序。</p>

<h2 id="DevelopingandDeployingaGeronimoGBean-GBeans">GBeans</h2>
<p>Geronimo中的几乎所有东西都是GBean：容器，连接器，适配器，应用程序等。GBean是Geronimo中的原子单元，由实现类（.jar）和<em>plan组成</em> 。</p>

<p>该<em>计划</em>是一个配置文件，GBean通过该文件在运行时依赖于内核进行IoC和依赖项注入。可以通过计划中的属性和引用来配置对其他GBean的依赖关系。Geronimo的配置构建器根据这些计划构造GBean，将它们分组为<em>配置</em> ，并将其存储在<em>配置存储中</em> 。</p>

<p><em>配置</em>是一个或多个GBean和一个类加载器的逻辑耦合集合。配置随服务器一起加载。<em>配置存储</em>是标准的Geronimo存储机制。</p>

<p>通过定制<em>部署描述符</em>和Java类描述的，在Java EE容器中运行的应用程序将由Geronimo <strong>Deployer</strong>的配置构建器解析并转换为GBean。这些GBean也存储在配置存储中。</p>

<h3 id="DevelopingandDeployingaGeronimoGBean-GBeanLifecycle">GBean生命周期</h3>

<p>GBean可以处于以下三种状态中的任何一种：已存储，已加载或正在运行。</p>
<ul><li>已存储：GBean存在于计划或配置存储中。</li><li>已加载：由内核加载时，GBean映射到一个非永久性名称，从而允许存在同一GBean的多个实例。</li><li>正在运行：GBean处于运行状态，正在协调其包含的应用程序类。</li></ul>


<p>为了参与生命周期操作，GBeans实现了一个<em>GBeanLifecycle</em>接口。该接口定义了三种方法， <code>doStart()</code> ， <code>doStop()</code>和<code>doFail()</code> 。</p>
<ul><li>的<code>doStart()</code>方法用于启动GBean，并实现GBean操作。当GBean处于失败状态时，不应使用它。</li><li>的<code>doFail()</code>当GBean无法启动，运行或停止时执行。它将GBean标记为失败，并始终调用doStop（）将其停止。</li><li>的<code>doStop()</code>人们停止了GBean。
<parameter ac:name="">Java</parameter> <plain-text-body>包org.apache.geronimo.gbean;公共接口GBeanLifecycle {void doStart（）引发异常； void doStop（）引发异常； void doFail（）; }</plain-text-body>如果实现了可选接口GBeanLifecycle，则该实现将从内核获取生命周期回调。</li></ul>



<h3 id="DevelopingandDeployingaGeronimoGBean-GBeanmethods">GBean方法</h3>
<p>GBean的类应实现特定的方法以支持GBean的每个功能：</p>
<ul><li><strong>GBeanInfo</strong> ：GBean具有一个名为getGBeanInfo（）的方法，该方法返回GBeanInfo类的实例。GBeanInfo定义了应该向其他子系统公开的方法，公开了属性和引用，以便可以在运行时注入它们，并定义有关GBean的信息，以便以后可以定位。GBeanInfo对象是在静态初始化程序中构造的。</li><li><strong>构造函数</strong> ：GBean构造函数参数应对应于GBean的属性或引用。它由<strong>GBeanInfo</strong>中的<strong>setConstructor</strong>方法定义。</li><li><strong>属性</strong> ：属性应具有设置方法，获取方法或同时具有这两种方法。GBeanInfo中的<strong>addAttribute</strong>方法应该定义属性的名称，类型以及它是否是持久性的，以便可以通过Geronimo内核注入属性。</li><li><strong>操作</strong> ：GBean上不是getter或setter的任何公共方法都可以是操作。操作方法应与<strong>GBeanInfo</strong>中的操作的addOperation列出的名称和参数类型匹配。</li><li><strong>引用</strong> ：引用（如属性）在运行时注入。但是，引用是另一个GBean，而不是String或整数。</li><li><strong>接口</strong> ：在GBeanInfo中添加引用是一种单独添加属性或操作的更快方法。接口中的所有变量将作为属性添加，所有方法将作为操作添加。</li></ul>


<h1 id="DevelopingandDeployingaGeronimoGBean-DevelopingaGBean">开发一个GBean</h1>
<p>为了开发GBean，您至少必须执行以下步骤：</p>
<ol><li>编写一个POJO类</li><li>添加GBeanInfo部分以公开属性，方法，接口和构造函数</li><li>实现GbeanLifecycle接口以使用Gbean内核生命周期回调（ <strong>可选</strong> ）</li></ol>



<h2 id="DevelopingandDeployingaGeronimoGBean-AsampleGBean">GBean示例</h2>
<p>样本GBean SimpleServerGBean只是在Geronimo服务器上启动一个套接字，并检索GBean的名称和套接字端口。以下代码片段实现了“普通旧Java对象”（POJO）部分：</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">SimpleServerGBean POJO</parameter> <plain-text-body>公共类SimpleServerGBean实现GBeanLifecycle，InterfaceNamed {private final String gbeanName;私人国际港口；私有布尔值开始=假;私有ServerSocket服务器套接字; public SimpleServerGBean（String gbeanName，int port）{this.gbeanName = gbeanName; this.port =端口; } public String getName（）{返回this.gbeanName; } public boolean isStarted（）{返回开始； } private void printConsoleLog（String log）{System.out.println（“ LOG：” + log）; }</plain-text-body>

<p>在下面的代码片段中，GBean为GBEAN_INFO静态初始化程序公开其属性，操作，接口和构造函数。</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">SimpleServerGBean GBeanInfo</parameter> <plain-text-body>私有静态最终GBeanInfo GBEAN_INFO;静态{GBeanInfoBuilder infoFactory = new GBeanInfoBuilder（SimpleServerGBean.class.getName（），SimpleServerGBean.class）; infoFactory.addAttribute（“ gbeanName”，String.class，false）; infoFactory.addAttribute（“ port”，int.class，true）; infoFactory.addOperation（“ isStarted”，“ String”）; infoFactory.addInterface（InterfaceNamed.class）; infoFactory.setConstructor（new String [] {“ gbeanName”，“ port”}）; GBEAN_INFO = infoFactory.getBeanInfo（）; }公共静态GBeanInfo getGBeanInfo（）{return GBEAN_INFO; }</plain-text-body>


<p>SimpleServerGBean Gbean易于启动和关闭。在启动过程中，它仅接受传入的套接字连接请求，并发出回显消息。停止时，GBean将关闭其消耗的资源。</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">SimpleServerGBean生命周期</parameter> <plain-text-body>public void doFail（）{starts = false; printConsoleLog（“ GBean” + gbeanName +“失败”）； } public void doStart（）引发异常{serversocket = new ServerSocket（port）;开始=真;线程simpleServerThread = new Thread（new Runnable（）{套接字socket; InputStream是; OutputStream os; public void run（）{while（started）{try {socket = serversocket.accept（）; is = socket.getInputStream（）; os = socket.getOutputStream（）; BufferedReader bufferedReader = new BufferedReader（new InputStreamReader（is））;字符串responseMessage =“ simpleServer response：” + bufferedReader.readLine（）; os.write（responseMessage.getBytes（））; bufferedReader.close（ ）;如果（os！= null）{os.close（）; }如果（套接字！= null &&！socket.isClosed（））{socket.close（）; }} catch（Exception e）{// ingore}}}}）; simpleServerThread.start（）; printConsoleLog（“ GBean” + gbeanName +“已启动，正在侦听端口：” + port）； } public void doStop（）引发异常{starts = false; serversocket.close（）; printConsoleLog（“ GBean” + gbeanName +“已停止”）; }}</plain-text-body>

<p>对于此示例，我们仍然需要一个类来测试SimpleServerGBean。本节创建一个套接字，并将连接请求发送到SimpleServerGBean。建立连接后，它将发出消息并从simpleServerGBean服务器实例检索回显消息。</p>
<parameter ac:name="java:title">SimpleServerTest</parameter> <plain-text-body>包org.apache.geronimo.sample;导入java.io。BufferedReader;导入java.io。InputStream;导入java.io。InputStreamReader;导入java.io。OutputStream;导入java.net。InetSocketAddress;导入java.net。插座;导入org.junit。忽视;导入org.junit。测试;公共类SimpleServerTest {@Test @忽略公共无效connectToSimpleServer（）引发异常{套接字套接字=新的Socket（）; socket.connect（new InetSocketAddress（“ 127.0.0.1”，7777））; OutputStream os = socket.getOutputStream（）;字符串requestMessage =“ Hello简单服务器”; os.write（requestMessage.getBytes（））; os.write（“ \ n” .getBytes（））; os.flush（）; InputStream是= socket.getInputStream（）; BufferedReader bufferReader = new BufferedReader（new InputStreamReader（is））;字符串responseMessage = bufferReader.readLine（）; System.out.println（responseMessage）; socket.close（）; }}</plain-text-body>

<p>在部署GBean之前，您仍然必须编译GBean类并构建适当的.jar文件。<a shape="rect" class="external-link" href="http://maven.apache.org/">Maven</a>用于构建Geronimo，因此可以用于构建GBean项目。你必须写一个<code>pom.xml</code>文件。有关该文件的更多信息，请参见<a shape="rect" class="external-link" href="http://maven.apache.org/">Maven网站</a> 。</p>
<parameter ac:name="">xml</parameter> <parameter ac:name="title">pom.xml</parameter> <plain-text-body><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"><modelversion>4.0.0</modelversion> <groupid>org.apache.geronimo.sample</groupid> <artifactid>simpleServer</artifactid> <packaging>jar</packaging> <version>1.0</version> <name>示例GBean作为简单服务器</name> <dependencies><dependency><groupid>org.apache.geronimo.framework</groupid> <artifactid>geronimo内核</artifactid> <version>2.1.3</version></dependency> <dependency><groupid>junit</groupid> <artifactid>junit</artifactid> <version>4.1</version> <scope>测试</scope></dependency></dependencies> <build><plugins><plugin><artifactid>maven-compiler-plugin</artifactid> <configuration><source> 1.5 <target>1.5</target></configuration></plugin></plugins></build></project></plain-text-body>
<p>在上方的POM文件中，</p>
<ul><li>开发GBean所需的唯一依赖项是<parameter ac:name="">xml</parameter> <plain-text-body><dependency><groupid>org.apache.geronimo.framework</groupid> <artifactid>geronimo-kernel</artifactid> <version>2.1.3。</version></dependency></plain-text-body> </li><li>仅出于测试代码的缘故，我们将以下部分添加到POM中。
<parameter ac:name="">xml</parameter> <plain-text-body><dependency><groupid>junit</groupid> <artifactid>junit</artifactid> <version>4.1</version> <scope>测试</scope></dependency> <build><plugins><plugin><artifactid>maven-compiler-plugin</artifactid> <configuration><source> 1.5 <target>1.5</target></configuration></plugin></plugins></build></plain-text-body></li></ul>


<h1 id="DevelopingandDeployingaGeronimoGBean-DeployingtheGBean">部署GBean</h1>
<p>请按照以下步骤将GBean部署到Geronimo。</p>
<ol><li>部署GBean程序包。有两种方法可以将GBean软件包部署到Geronimo。
	<ul><li>通过Geronimo管理控制台中的<strong>JAR存储库</strong> portlet将.jar部署到服务器。例如，您可以使用以下信息来部署SimpleServerGBean：<ul><li><strong>GroupId</strong> ：org.apache.geronimo.sample</li><li><strong>ArtifactId</strong> ：simpleServer</li><li><strong>版本</strong> ：1.0</li><li><strong>类型</strong> ：罐子</li></ul>
		</li><li>手动将jar文件复制到带有路径和程序包名称规则的GERONIMO_HOME /存储库。
		<ul><li>路径：<code>GroupId/ArtifactId/Version/ArtifactId-Version.Type</code></li><li>样品：<code><GERONIMO_HOME>/repository/org/apache/geronimo/sample/simpleServer/1.0/simpleServer-1.0.jar</code><br clear="none">
<strong>注意</strong> ：如果GBean依赖于外部库，则必须将两个.jars都部署到存储库中，并在<dependencies>下面描述的部署计划</dependencies>的<dependencies>部分中将它们都列出。</dependencies></li></ul>
		</li></ul>
	</li><li>下一步是制定GBean部署计划。部署计划是将Geronimo <em>模块</em>定义为.xml文件，其中包括一个或多个现有GBean实例的描述。
<parameter ac:name="">xml</parameter> <parameter ac:name="title">simpleServer_deployment_plan.xml</parameter> <plain-text-body><!--?xml version="1.0" encoding="UTF-8" ?=""--><module xmlns="http://geronimo.apache.org/xml/ns/deployment-1.2"><environment><moduleid><groupid>org.apache.geronimo.sample</groupid> <artifactid>simpleServerModule</artifactid> <version>1.0</version> <type>汽车</type></moduleid> <dependencies><dependency><groupid>org.apache.geronimo.sample</groupid> <artifactid>simpleServer</artifactid> <version>1.0</version></dependency></dependencies> <hidden-classes></hidden-classes><non-overridable-classes></non-overridable-classes></environment> <gbean name="echoserver" class="org.apache.geronimo.sample.SimpleServerGBean"><attribute name="port">7777</attribute> <attribute name="gbeanName">simpleServer</attribute></gbean></module><!--?xml--></plain-text-body>让我们简要地研究一下这个计划。
	<ul><li>的<strong><moduleid></moduleid></strong>元素用于提供在Geronimo服务器中部署的模块的配置名称。它包含<strong>groupId</strong> ， <strong>artifactId</strong> ， <strong>version</strong>和<strong>type的</strong>元素。模块ID通常在四个组件之间用斜杠打印，例如<code>GroupID/ArtifactID/Version/Type</code> 。在此示例中，模块ID为<code>org.apache.geronimo.sample/simpleServer/1.0/car</code> 。</li><li>的<strong><dependencies></dependencies></strong>元素用于提供模块所依赖的配置。在此示例中，模块取决于<code>org.apache.geronimo.sample/simpleServer/1.0</code> 。</li></ul>
	</li><li>将部署计划部署到服务器。有两种将带有计划的GBean模块部署到Geronimo的方法。
	<ul><li>在管理控制台中使用<strong>Deploy New</strong> portlet。</li><li>使用<a shape="rect" href="deploy.html">部署程序</a>工具或<a shape="rect" class="unresolved" href="#">GShell</a>命令。</li></ul>
	</li><li>如果成功，您可以访问<a shape="rect" class="external-link" href="http://localhost:7777" rel="nofollow">http：// localhost：7777</a>并从服务器获得回显。</li></ol>


<p><strong>注意</strong> ：如果在Geronimo服务器中已经存在一个GBean实现（可能是.jar），则只需制定一个部署计划并将其部署到服务器即可使GBean实例正常工作。</p>

<h1 id="DevelopingandDeployingaGeronimoGBean-ReferencinganotherGBean">引用另一个GBean</h1>
<p>通过注入<strong>Reference</strong>方法，可以在GBean中使用其他GBean。例如，GBean <em>SimpleServerGBean</em>可以利用另一个名为<em>EchoMessageGBean的</em> GBean及其POJO类和实现如下的GBeanInfo：</p>
<parameter ac:name="">java</parameter> <parameter ac:name="title">EchoMessageGBean</parameter> <plain-text-body>包org.apache.geronimo.sample;导入org.apache.geronimo.gbean。GBeanInfo;导入org.apache.geronimo.gbean。GBeanInfoBuilder;公共类EchoMessageGBean实现EchoMessageInterface {private final String msg;公共EchoMessageGBean（String name）{this.msg = name; }私有静态最终GBeanInfo GBEAN_INFO；静态{GBeanInfoBuilder infoFactory =新的GBeanInfoBuilder（EchoMessageGBean.class）; infoFactory.addAttribute（“ msg”，String.class，false）; infoFactory.addInterface（EchoMessageInterface.class）; infoFactory.setConstructor（new String [] {“ msg”}）; GBEAN_INFO = infoFactory.getBeanInfo（）; }公共静态GBeanInfo getGBeanInfo（）{return GBEAN_INFO; } public String getEchoMessage（）{return msg; }}</plain-text-body>
<p>为了简单起见，此EchoMessageGBean不实现GbeanLifecycle。它仅公开一个接口<em>EchoMessageInterface</em> ，该接口检索预定义的回显消息。</p>

<p>要在SimpleServerGBean中引用<em>EchoMessageGBean</em> ，必须采取以下步骤：</p>
<ol><li>现在，SimpleServerGBean具有更多的私有成员和不同的构造函数： <parameter ac:name="">java</parameter> <parameter ac:name="title">来自SimpleServerGBean POJO的</parameter> <plain-text-body>私有私有最终字符串gbeanName的摘录；私人国际港口； / *一个新的私有成员* /私有EchoMessageInterface echo;私有布尔值开始=假;私有ServerSocket服务器套接字; / *构造函数已更改* / public SimpleServerGBean（String gbeanName，int port，EchoMessageInterface echomsg）{this.gbeanName = gbeanName; this.port =端口; this.echo = echomsg; }</plain-text-body></li><li>在SimpleServerGBean实现的doStart（）中，我们现在从EchoMessageGBean检索消息并重新组织响应消息： <parameter ac:name="title">SimpleServerGBean的</parameter> <parameter ac:name="">java</parameter> <parameter ac:name="title">摘录doStart（）</parameter> <plain-text-body>字符串appendMessage = echo.getEchoMessage（）;字符串responseMessage = appendMessage + bufferedReader.readLine（）;</plain-text-body></li><li>向GBeanInfo添加一个<strong>Reference</strong>方法： <parameter ac:name="">java</parameter> <parameter ac:name="title">SimpleServerGBean GBeanInfo</parameter> <plain-text-body>private静态最终GBeanInfo GBEAN_INFO;静态{GBeanInfoBuilder infoFactory = new GBeanInfoBuilder（SimpleServerGBean.class.getName（），SimpleServerGBean.class）; infoFactory.addAttribute（“ gbeanName”，String.class，false）; infoFactory.addAttribute（“ port”，int.class，true）; infoFactory.addOperation（“ isStarted”，“ String”）; infoFactory.addInterface（InterfaceNamed.class）; / *添加参考* / infoFactory.addReference（“ echoMessenger”，EchoMessageInterface.class）; / *不同的构造函数* / infoFactory.setConstructor（new String [] {“ gbeanName”，“ port”，“ echoMessenger”}）;; GBEAN_INFO = infoFactory.getBeanInfo（）; }</plain-text-body> </li><li>相应地，必须修改SimpleServerGBean的部署计划。
<parameter ac:name="">XML</parameter> <parameter ac:name="title">摘自simpleServer_deployment_plan.xml</parameter> <plain-text-body><gbean name="echoserver" class="org.apache.geronimo.sample.SimpleServerGBean"><attribute name="port">7777</attribute> <attribute name="gbeanName">SimpleServer来</attribute> <reference name="echoMessenger"><name>msgAppender</name></reference></gbean> <gbean name="msgAppender" class="org.apache.geronimo.sample.EchoMessageGBean"><attribute gbeanname="msg">[回音从服务器]：</attribute></gbean></plain-text-body>之后，我们将.jar文件添加到服务器，并部署计划，测试类，它启动对端口7777的插座会从服务器获取效应初探消息。<br clear="none">
<parameter ac:name="nopanel">true</parameter> <plain-text-body>[从服务器回显]：您好简单服务器</plain-text-body></li></ol>


<p>GBean SimpleServerGBean可以引用EchoMessageGBean的不同实例。例如，SimpleServerGBean改为侦听端口7778，并从实例<strong>msgAppender2</strong>获取消息。</p>
<parameter ac:name="">XML</parameter> <parameter ac:name="title">摘录自simpleServer_deployment_plan2.xml</parameter> <plain-text-body><gbean name="echoserver" class="org.apache.geronimo.sample.SimpleServerGBean"><attribute name="port">7778</attribute> <attribute name="gbeanName">SimpleServer来</attribute> <reference name="echoMessenger"><!-- Reference another instance of EchoMessageGBean --> <name>msgAppender2</name></reference></gbean> <gbean name="msgAppender" class="org.apache.geronimo.sample.EchoMessageGBean"><attribute name="msg">[回声从服务器]：</attribute> <!--Another instance of EchoMessageGBean --> <gbean name="msgAppender2" class="org.apache.geronimo.sample.EchoMessageGBean"><attribute name="msg">[回声从服务器2]：</attribute></gbean></gbean></plain-text-body>
<p>当我们部署这个计划（.jar文件并没有改变），这在端口启动一个插座测试类7778意志会从服务器2 <parameter ac:name="nopanel">真</parameter> <plain-text-body>[回音从服务器2]</plain-text-body>的回复<plain-text-body>：你好简单的服务器</plain-text-body></p>


<h1 id="DevelopingandDeployingaGeronimoGBean-GeronimoBootstrap">Geronimo靴子</h1>
<p>Geronimo启动时， <code><GERONIMO_HOME>/bin/server.jar</code>与执行<code>org.apache.geronimo.cli.daemon.DaemonCLI</code>作为主要课程。这将引导Geronimo内核，并从模块加载初始GBean。 <code>j2ee-system-2.1.3.car</code>进入狗窝。</p>

</div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Developing and Deploying a Geronimo GBean';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>