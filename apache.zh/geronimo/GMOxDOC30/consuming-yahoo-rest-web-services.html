<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=2">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Consuming Yahoo! REST Web Services">
    <meta name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Consuming Yahoo! REST Web Services">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2010-05-11">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0文档：使用Yahoo! REST Web服务</title>
  </head>

  <body  onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="documentation.html">文档</a> > <a href="developing.html">开发</a> > <a href="tutorials.html">教程</a> > <a href="developing-web-services.html">开发Web服务</a> > <a href="restful-web-services.html">RESTful Web服务</a> > <a href="consuming-yahoo-rest-web-services.html">消耗Yahoo! REST Web服务</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo v3.0</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">消费Yahoo! REST Web服务</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645397"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645397">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645397"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645397">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645397"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645397">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>本教程将引导您完成使用<strong>Yahoo!</strong>所需的步骤。 REST Web服务。尽管本教程没有太多内容要解决<strong>Geronimacal问题</strong> ，但是与SOAP Web Services相比，这清楚地证明了无需任何外部工具即可轻松开发或使用REST服务的问题。</p>

<p>我们将从Yahoo!公开的许多服务中探索两种REST服务。这是雅虎！搜索和Yahoo!地图。您可能需要一个<strong>appid</strong>来查询Yahoo Server的结果。暂时我已经在需要的地方在代码中添加了我的appid。</p>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>雅虎！是一家非常支持RESTful Web服务的公司。许多雅虎！ API和服务是REST。一些示例是<strong>Search</strong> ， <strong>Maps</strong> ， <strong>Mail</strong> ， <strong>Flickr</strong> ， <strong>del.ico.us</strong>等</p></div></div>

<p>要运行本教程，至少需要您安装以下必备软件。</p>

<ul><li>Sun JDK 5.0+（J2SE 1.5）</li><li>Apache Geronimo 2.x</li><li>适用于Java EE开发人员的Eclipse IDE-Europa版本</li><li>Geronimo Eclipse插件2.x</li></ul>


<p>“ <a shape="rect" href="development-environment.html">开发环境”</a>部分中提供了有关安装Eclipse的详细信息。</p>

<p>所需的步骤是：</p>
<div class="toc-macro client-side-toc-macro" data-preseparator="" data-postseparator="" data-headerelements="H1,H2" data-midseparator=" | " data-structure="list"></div>

<h1 id="ConsumingYahoo!RESTWebServices-CreateaDynamicWebProjecttoconsumetheWebService">创建一个动态Web项目以使用Web服务</h1>
<ul><li>从Eclipse主菜单中，选择<strong>File-> New-> Other</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在“ <strong>新建”</strong>对话框中，选择“ <strong>Web”->“ Dynamic Web Project”</strong> ，然后单击“ <strong>下一步”。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>键入<strong>jaxws-rest-yahoo</strong>作为<strong>项目名称</strong> ，然后单击<strong>下一步。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在“ <strong>项目构面”</strong>页面上，默认选择就足够了。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>确保选中复选框<strong>Generate Deployment Descriptor</strong> ，然后单击<strong>下一步。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>在<strong>Geronimo部署页面上，</strong>将<strong>组ID</strong>修改为<strong>org.apache.geronimo.samples.jaxws.rest</strong>并将<strong>工件ID修改</strong>为<strong>jaxws-rest-yahoo</strong> 。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>点击<strong>完成</strong></li></ul>


<h1 id="ConsumingYahoo!RESTWebServices-DevelopingtheWebbasedClient">开发基于Web的客户端</h1>
<ul><li>右键单击<strong>jaxws-rest-yahoo</strong> ，然后选择<strong>New-> JSP。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> </li><li>将jsp命名为<strong>index.jsp</strong> ，然后单击<strong>Finish。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将以下代码添加到<strong>index.jsp</strong></li></ul>


<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>index.jsp</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[

&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;
	pageEncoding=&quot;ISO-8859-1&quot;%&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot;&gt;
&lt;title&gt;My Yahoo! Search&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;center&gt;
&lt;h1&gt;Yahoo! Web Search&lt;/h1&gt;
&lt;a href=&quot;maps.jsp&quot;&gt;Search Yahoo! Maps&lt;/a&gt; &lt;br&gt;
&lt;br&gt;
&lt;fieldset&gt;&lt;legend&gt;&lt;b&gt;Enter your query here&lt;/b&gt;&lt;/legend&gt;
&lt;table bgcolor=&quot;#CCC&quot;&gt;
	&lt;tr&gt;
		&lt;td&gt;
		&lt;form action=&quot;index.jsp&quot;&gt;Search: &lt;input type=&quot;text&quot;
			name=&quot;query&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;
		&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;/fieldset&gt;
&lt;/center&gt;
&lt;jsp:include page=&quot;/SearchHandler&quot; /&gt;
&lt;/body&gt;
&lt;/html&gt;

]]></script>
</div></div>

<ul><li>再次右键单击并添加另一个名为<strong>maps.jsp的</strong> jsp。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> </li><li>将以下代码添加到<strong>maps.jsp</strong></li></ul>


<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>maps.jsp</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[

&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;
	pageEncoding=&quot;ISO-8859-1&quot;%&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot;&gt;
&lt;title&gt;My Yahoo! Maps&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;center&gt;
&lt;h1&gt;Yahoo! Maps Search&lt;/h1&gt;
&lt;a href=&quot;index.jsp&quot;&gt;Search Yahoo! Web&lt;/a&gt; &lt;br&gt;
&lt;br&gt;
&lt;fieldset&gt;&lt;legend&gt;&lt;b&gt;Address Details&lt;/b&gt;&lt;/legend&gt;
&lt;form action=&quot;maps.jsp&quot;&gt;
&lt;table bgcolor=&quot;#ABC&quot;&gt;
	&lt;tr align=&quot;center&quot;&gt;
		&lt;td&gt;Street: &lt;input type=&quot;text&quot; name=&quot;street&quot;&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr align=&quot;center&quot;&gt;
		&lt;td&gt;City: &lt;input type=&quot;text&quot; name=&quot;city&quot;&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr align=&quot;center&quot;&gt;
		&lt;td&gt;State: &lt;input type=&quot;text&quot; name=&quot;state&quot;&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr align=&quot;center&quot;&gt;
		&lt;td&gt;Zip: &lt;input type=&quot;text&quot; name=&quot;zip&quot;&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr align=&quot;center&quot;&gt;
		&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;/fieldset&gt;
&lt;/center&gt;
&lt;jsp:include page=&quot;/MapHandler&quot; /&gt;
&lt;/body&gt;
&lt;/html&gt;

]]></script>
</div></div>

<ul><li>现在，我们需要创建两个servlet，以处理用户生成的请求。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>再次右键单击并添加一个名为<strong>ConverterHandler</strong>的<strong>Servlet。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> </li><li>将以下代码添加到<strong>ConverterHandler.java</strong></li></ul>


<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>SearchHandler.java</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[

package org.apache.geronimo.jaxws.rest;

import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpStatus;
import org.apache.commons.httpclient.methods.GetMethod;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class SearchHandler extends javax.servlet.http.HttpServlet implements
		javax.servlet.Servlet {
	static final long serialVersionUID = 1L;

	public SearchHandler() {
		super();
	}

	protected void doGet(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {

		PrintWriter out = response.getWriter();
		String query = request.getParameter(&quot;query&quot;);
		if (query != null) {
			out.println(&quot;&lt;fieldset&gt;&quot;);
			out.println(&quot;&lt;legend&gt;&lt;b&gt;Results&lt;/b&gt;&lt;/legend&gt;&quot;);
			query = query.replace(&quot; &quot;, &quot;+&quot;);
			String requestquery = &quot;http://api.search.yahoo.com/WebSearchService/V1/webSearch?appid=cW2Y0DPV34GoE6x.f&quot;+
&quot;JJQNp503kCIXUd21hrSIzSNF2GjZ1VkpMPdMuq6keXrJu2kKWnSMFY-&amp;query=&quot;
					+ query + &quot;&amp;results=10&quot;;
			HttpClient client = new HttpClient();
			GetMethod method = new GetMethod(requestquery);
			int statusCode = client.executeMethod(method);

			if (statusCode != HttpStatus.SC_OK) {
				System.err.println(&quot;Method failed: &quot; + method.getStatusLine());
			}
			InputStream rstream = null;
			rstream = method.getResponseBodyAsStream();
			Document queryresponse = null;
			try {
				queryresponse = DocumentBuilderFactory.newInstance()
						.newDocumentBuilder().parse(rstream);
			} catch (SAXException e) {
				e.printStackTrace();
			} catch (ParserConfigurationException e) {
				e.printStackTrace();
			}

			XPathFactory factory = XPathFactory.newInstance();
			XPath xPath = factory.newXPath();
			NodeList nodes = null;
			try {
				nodes = (NodeList) xPath.evaluate(&quot;/ResultSet/Result&quot;,
						queryresponse, XPathConstants.NODESET);
			} catch (XPathExpressionException e) {
				e.printStackTrace();
			}
			int nodeCount = nodes.getLength();
			for (int i = 0; i &lt; nodeCount; i++) {
				String title = null;
				String summary = null;
				String url = null;
				String size = null;
				String cached = null;
				try {
					title = (String) xPath.evaluate(&quot;Title&quot;, nodes.item(i),
							XPathConstants.STRING);
					summary = (String) xPath.evaluate(&quot;Summary&quot;, nodes.item(i),
							XPathConstants.STRING);
					url = (String) xPath.evaluate(&quot;Url&quot;, nodes.item(i),
							XPathConstants.STRING);
					NodeList n = (NodeList) xPath.evaluate(&quot;Cache&quot;, nodes
							.item(i), XPathConstants.NODESET);
					for (int j = 0; j &lt; n.getLength(); j++) {
						cached = (String) xPath.evaluate(&quot;Url&quot;, n.item(j),
								XPathConstants.STRING);
						size = (String) xPath.evaluate(&quot;Size&quot;, n.item(j),
								XPathConstants.STRING);
					}

				} catch (XPathExpressionException e) {
					e.printStackTrace();
				}
				out.print(&quot;&lt;font size=&#39;4&#39;&gt;&lt;a href=&#39;&quot; + url + &quot;&#39;&gt;&quot; + title
						+ &quot;&lt;/a&gt;&lt;/font&gt;&quot;);
				out.print(&quot;&lt;br&gt;&quot; + summary);
				out.print(&quot;&lt;br&gt;&lt;font color=&#39;green&#39;&gt;&quot; + url + &quot;&lt;/font&gt;&quot;);
				if (size != null) {
					out
							.print(&quot;&lt;font color=&#39;blue&#39;&gt; - &quot;
									+ (new Integer(size) / 1000)
									+ &quot;k - &lt;/font&gt; &lt;a href=&#39;&quot; + cached
									+ &quot;&#39;&gt;Cached&lt;/a&gt;&quot;);
				}
				out.println(&quot;&lt;br&gt;&lt;br&gt;&quot;);

			}
			out.println(&quot;&lt;/fieldset&gt;&quot;);
		}
	}

	protected void doPost(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}
}

]]></script>
</div></div>

<ul><li>再次右键单击并添加一个名为<strong>MapHandler</strong>的<strong>Servlet。</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"> </li><li>将以下代码添加到<strong>MapHandler.java</strong></li></ul>


<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>MapHandler.java</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[

package org.apache.geronimo.jaxws.rest;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpStatus;
import org.apache.commons.httpclient.methods.GetMethod;

public class MapHandler extends javax.servlet.http.HttpServlet implements
		javax.servlet.Servlet {
	static final long serialVersionUID = 1L;

	public MapHandler() {
		super();
	}

	protected void doGet(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		String street = request.getParameter(&quot;street&quot;);
		String city = request.getParameter(&quot;city&quot;);
		String state = request.getParameter(&quot;state&quot;);
		String zip = request.getParameter(&quot;zip&quot;);
		String query = null;
		if (street != null)
			query += &quot;street=&quot; + street + &quot;&amp;&quot;;
		if (city != null)
			query += &quot;city=&quot; + city + &quot;&amp;&quot;;
		if (state != null)
			query += &quot;state=&quot; + state + &quot;&amp;&quot;;
		if (city != null)
			query += &quot;zip=&quot; + zip;
		if (query != null) {
			out.println(&quot;&lt;fieldset&gt;&quot;);
			out.println(&quot;&lt;legend&gt;&lt;b&gt;Map View&lt;/b&gt;&lt;/legend&gt;&quot;);
			query = query.replace(&quot; &quot;, &quot;+&quot;);
			String requestquery = &quot;http://local.yahooapis.com/MapsService/V1/mapImage?appid=cW2Y0DPV34GoE6x.f&quot;
+&quot;JJQNp503kCIXUd21hrSIzSNF2GjZ1VkpMPdMuq6keXrJu2kKWnSMFY-&amp;amp&quot;
					+ query;
			HttpClient client = new HttpClient();
			GetMethod method = new GetMethod(requestquery);
			int statusCode = client.executeMethod(method);

			if (statusCode != HttpStatus.SC_OK) {
				System.err.println(&quot;Method failed: &quot; + method.getStatusLine());
			}
			InputStream rstream = null;
			rstream = method.getResponseBodyAsStream();
			BufferedReader br = new BufferedReader(new InputStreamReader(
					rstream));
			String line, url = null;
			int i = 0;
			out.println(&quot;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;center&gt;&quot;);
			while ((line = br.readLine()) != null) {
				if (i == 1 &amp;&amp; line.contains(&quot;Result&quot;)) {
					url = line.substring(62, line.length() - 9);
					out.println(&quot;&lt;img src=&#39;&quot; + url + &quot;&#39; /&gt;&quot;);
				}
				i++;
			}
			out.println(&quot;&lt;/center&gt;&quot;);
			br.close();
		}
		out.println(&quot;&lt;/fieldset&gt;&quot;);

	}

	protected void doPost(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}
}

]]></script>
</div></div>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>此处servlet可能会通知某些导入未解决。我们需要添加两个外部jar文件来解决这些错误。<br clear="none">需要在构建路径中添加的jar文件是：<br clear="none">
<strong>commons-codec-1.3.jar-</strong> <geronimo_install_dir>\ repository \ commons-codec \ commons-codec \ 1.3 \ commons-codec-1.3.jar<br clear="none">
<strong>commons-httpclient-3.0.1.jar-</strong> <geronimo_install_dir>\ repository \ commons-httpclient \ commons-httpclient \ 3.0.1 \ commons-httpclient-3.0.1.jar</geronimo_install_dir></geronimo_install_dir></p></div></div>

<p>到此结束我们基于Web的客户端的开发部分。</p>

<h2 id="ConsumingYahoo!RESTWebServices-SettingUptheDeploymentPlan">制定部署计划</h2>
<ul><li>由于两个外部jar已添加到项目的构建路径中，因此需要将它们指定为依赖项，以便在运行时应用程序可以解析这些类。
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>展开<strong>WebContent / WEB-INF</strong>目录并打开<strong>geronimo-web.xml</strong>
<br class="atl-forced-newline" clear="none"> <br class="atl-forced-newline" clear="none"></li><li>将以下代码添加到<strong>geronimo-web.xml</strong></li></ul>


<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>geronimo-web.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;ns8:web-app xmlns=&quot;http://geronimo.apache.org/xml/ns/j2ee/connector-1.2&quot;
	xmlns:ns2=&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot;
	xmlns:ns3=&quot;http://geronimo.apache.org/xml/ns/naming-1.2&quot;
	xmlns:ns4=&quot;http://openejb.apache.org/xml/ns/openejb-jar-2.2&quot; 
	xmlns:ns5=&quot;http://openejb.apache.org/xml/ns/pkgen-2.1&quot;
	xmlns:ns6=&quot;http://geronimo.apache.org/xml/ns/j2ee/application-2.0&quot;
	xmlns:ns7=&quot;http://geronimo.apache.org/xml/ns/security-2.0&quot; 
	xmlns:ns8=&quot;http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1&quot;
	xmlns:ns9=&quot;http://java.sun.com/xml/ns/persistence&quot;
	xmlns:ns10=&quot;http://geronimo.apache.org/xml/ns/j2ee/application-client-2.0&quot;&gt;
	&lt;ns2:environment&gt;
		&lt;ns2:moduleId&gt;
			&lt;ns2:groupId&gt;org.apache.geronimo.samples.jaxws.rest&lt;/ns2:groupId&gt;
			&lt;ns2:artifactId&gt;jaxws-rest-yahoo&lt;/ns2:artifactId&gt;
			&lt;ns2:version&gt;1.0&lt;/ns2:version&gt;
			&lt;ns2:type&gt;car&lt;/ns2:type&gt;
		&lt;/ns2:moduleId&gt;

		&lt;ns2:dependencies&gt;
			&lt;ns2:dependency&gt;
				&lt;ns2:groupId&gt;commons-codec&lt;/ns2:groupId&gt;
				&lt;ns2:artifactId&gt;commons-codec&lt;/ns2:artifactId&gt;
				&lt;ns2:version&gt;1.3&lt;/ns2:version&gt;
				&lt;ns2:type&gt;jar&lt;/ns2:type&gt;
			&lt;/ns2:dependency&gt;
			&lt;ns2:dependency&gt;
				&lt;ns2:groupId&gt;commons-httpclient&lt;/ns2:groupId&gt;
				&lt;ns2:artifactId&gt;commons-httpclient&lt;/ns2:artifactId&gt;
				&lt;ns2:version&gt;3.0.1&lt;/ns2:version&gt;
				&lt;ns2:type&gt;jar&lt;/ns2:type&gt;
			&lt;/ns2:dependency&gt;
		&lt;/ns2:dependencies&gt;
	&lt;/ns2:environment&gt;
	&lt;ns8:context-root&gt;/jaxws-rest-yahoo&lt;/ns8:context-root&gt;
&lt;/ns8:web-app&gt;

]]></script>
</div></div>

<ul><li>部署并测试我们定制的Yahoo!</li></ul></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Consuming Yahoo! REST Web Services';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2013，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  

</body></html>