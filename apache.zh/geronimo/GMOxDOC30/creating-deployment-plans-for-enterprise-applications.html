<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="Creating deployment plans for enterprise applications" />
    <META name="Keywords" content="Apache Geronimo 3.0 Documentation JavaEE6 OSGi Creating deployment plans for enterprise applications" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2010-05-11" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2013, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo v3.0 Documentation: Creating deployment plans for enterprise applications</title>
  </head>

  <body onload="init()">

        <!-- banner -->
    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

        <!-- topNav -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="documentation.html">Documentation</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans.html">Creating deployment plans</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans-for-applications.html">Creating deployment plans for applications</a>&nbsp;&gt;&nbsp;<a href="creating-deployment-plans-for-enterprise-applications.html">Creating deployment plans for enterprise applications</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

        <!-- pageContent -->
    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo v3.0</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">Creating deployment plans for enterprise applications</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645276">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=20645276">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDOC30">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645276">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDOC30&fromPageId=20645276">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645276">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDOC30&fromPageId=20645276">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>
<p>An enterprise application archive (<code>EAR</code>) can consist of many sub modules. The sub modules can be web modules (<code>WAR</code>), ejb modules (<code>JAR</code>), resource adapter modules (<code>RAR</code>) or application client modules (<code>jar</code>). <parameter ac:name="atlassian-macro-output-type">INLINE</parameter><rich-text-body><p>When an <code>EAR</code> consist of many sub modules, the deployment plans for all the sub modules can be provided in a single file named <code>geronimo-application.xml</code>.</p></rich-text-body> This single file contains the deployment details of each of the sub modules of the <code>EAR</code>. Alternatively, each of the sub modules can package its corresponding deployment plan file within itself. However, the preferable way is to provide a single deployment plan through <code>geronimo-application.xml</code> for all the sub modules. This mechanism provides flexibility of allowing us to modify the deployment configuration for all modules through a single file. In this section, we explore <code>EAR</code> deployment plan and understand what it contains.</p>

<rich-text-body>
<p>There are 3 places a deployment plan (partial) can be associated with an ear, and they are used in this order:</p>

<p>1. external plan to be specified at deployment time<br clear="none">
2. ear level geronimo-application.xml<br clear="none">
3. module level geronimo|openejb-*.xml</p>

<p>So, anything in an external plan takes precedence over bits in (2) or (3) configuring the same module.  Anything in (2) takes precedence over a module level plan.  If a module level plan is missing from (1) its looked for in (2),then (3); if missing from (1) and (2), then its looked for in the module (3).</p>

<p>There is no attempt to merge plans from these different locations: e.g. if there's something in (1) for a module, any other plans are ignored.</p></rich-text-body>

<p>An enterprise application archive (<code>EAR</code>) should provide its deployment descriptor in the <a shape="rect" class="external-link" href="http://java.sun.com/xml/ns/javaee/application_5.xsd" rel="nofollow">application.xml</a> file. The <code>application.xml</code> lists all the sub modules in the <code>EAR</code> file along with the descriptions. In addition to the standard deployment descriptor, the <code>EAR</code> should also provide Geronimo specific deployment plan in <a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/j2ee/application-2.0">geronimo-application.xml</a>.  Along with the description of each of the sub modules of the <code>EAR</code> file, this file also provides mappings for JEE resources that each of the sub modules refers in their deployment descriptor. The <code>geronimo-application.xml</code> is divided into several sections where in each section, the deployment plan for a sub module is provided. <code>geronimo-application.xml</code> is the highest level plan that provides deployment plan for all sub modules; hence it can contain XML elements from every other Geronimo XML schema used by Geronimo application deployer. The <code>geronimo-application.xml</code> is the super set of all other deployment plans.</p>

<p>For example, following is the structure of an <code>EAR</code> that has a web module and an ejb module.</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="creating-deployment-plans-for-enterprise-applications.data/ear-structure.GIF"></span></p>

<p>The <code>Order.ear</code> file shown above contains two modules. One is <code>OrderWEB.war</code> file which is a web module and the other is <code>OrderEJB.jar</code> file which is an ejb module. The <code>META-INF</code> folder in <code>Order.ear</code>  contains the application deployment descriptor (<code>application.xml</code>) and the Geronimo application deployment plan (<code>geronimo-application.xml</code>). The web application and the ejb application have packaged only their respective deployment descriptors. But the deployment plans for these modules are provided in the <code>geronimo-application.xml</code>. <br clear="none">
The web application (<code>OrderWAR.war</code>) looks up stateless session bean in the <code>OrderEJB.jar</code> module to retrieve the order information. The <code>RetrieveOrderInfoBean</code> in <code>OrderEJB.jar</code> module uses JDBC connection to read the order information from a DB2 database. </p>

<p>The deployment descriptor of the OrderEJB.jar is as follows.</p>

<parameter ac:name="title">ejb-jar.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8" ?&gt; 
&lt;ejb-jar xmlns="http://java.sun.com/xml/ns/javaee" version="3.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"&gt;
         
    &lt;description&gt;Stateless Session Bean Example&lt;/description&gt;
    &lt;display-name&gt;Stateless Session Bean Example&lt;/display-name&gt; 

    &lt;enterprise-beans&gt;
        &lt;session&gt;
            &lt;ejb-name&gt;RetrieveOrderInfoBean&lt;/ejb-name&gt;
            &lt;business-local&gt;
                examples.session.stateless_dd.RetrieveOrderInfo
            &lt;/business-local&gt;
            &lt;ejb-class&gt;
                examples.session.stateless_dd.RetrieveOrderInfoBean
            &lt;/ejb-class&gt;
            &lt;session-type&gt;Stateless&lt;/session-type&gt;
            &lt;transaction-type&gt;Container&lt;/transaction-type&gt; 
            
            &lt;resource-ref&gt;
                &lt;res-ref-name&gt;jdbc/DB2DataSource&lt;/res-ref-name&gt;
                &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;
                &lt;res-auth&gt;Container&lt;/res-auth&gt;
                &lt;res-sharing-scope&gt;Shareable&lt;/res-sharing-scope&gt;
            &lt;/resource-ref&gt;
        &lt;/session&gt;
    &lt;/enterprise-beans&gt;
    
    &lt;interceptors&gt;
        &lt;interceptor&gt;
            &lt;interceptor-class&gt;
                examples.session.stateless_dd.RetrieveOrderCallbacks
            &lt;/interceptor-class&gt;
            &lt;post-construct&gt;
                &lt;lifecycle-callback-method&gt;construct&lt;/lifecycle-callback-method&gt;
            &lt;/post-construct&gt;
            
            &lt;pre-destroy&gt;
                &lt;lifecycle-callback-method&gt;destroy&lt;/lifecycle-callback-method&gt;
            &lt;/pre-destroy&gt;
        &lt;/interceptor&gt;
    &lt;/interceptors&gt;
    
    &lt;assembly-descriptor&gt;
        &lt;interceptor-binding&gt;
            &lt;ejb-name&gt;RetrieveOrderInfoBean&lt;/ejb-name&gt;
            &lt;interceptor-class&gt;
                examples.session.stateless_dd.RetrieveOrderCallbacks
            &lt;/interceptor-class&gt;
        &lt;/interceptor-binding&gt;
    &lt;/assembly-descriptor&gt;  
&lt;/ejb-jar&gt;
</plain-text-body>
<rich-text-body><p>The default namespace of the above XML document is <code><a shape="rect" class="external-link" href="http://java.sun.com/xml/ns/javaee" rel="nofollow">http://java.sun.com/xml/ns/javaee</a></code>. The XML elements that do not have a namespace prefix belong to the default namespace.</p></rich-text-body>
<p>In the <code>RetrieveOrderInfoBean</code>, the following code is used to look up the Datasource object and obtain a database connection.</p>

<parameter ac:name="">JAVA</parameter><parameter ac:name="title">examples.session.stateless_dd.RetrieveOrderInfoBean</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
...
...
Context initContext = new InitialContext();
Context envContext  = (Context)initContext.lookup("java:comp/env");
DataSource ds = (DataSource)envContext.lookup("jdbc/DB2DataSource");
System.out.println("Got DataSource\n");
con = ds.getConnection();
System.out.println("Got Connection\n");
...
...
</plain-text-body>


<p>The deployment descriptor of the <code>OrderWEB.war</code> is as follows.</p>

<parameter ac:name="title">web.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"  
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5"&gt;
         
    &lt;display-name&gt;OrderWEB&lt;/display-name&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
        &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;
        &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    
    &lt;servlet&gt;
        &lt;description&gt;&lt;/description&gt;
        &lt;display-name&gt;RetrieveOrder&lt;/display-name&gt;
        &lt;servlet-name&gt;RetrieveOrder&lt;/servlet-name&gt;
        &lt;servlet-class&gt;
           examples.web.servlet.RetrieveOrder
        &lt;/servlet-class&gt;
    &lt;/servlet&gt;
    
    &lt;ejb-local-ref&gt;
        &lt;ejb-ref-name&gt;ejb/RetrieveOrderInfo&lt;/ejb-ref-name&gt;
        &lt;ejb-ref-type&gt;Session&lt;/ejb-ref-type&gt;
        &lt;local&gt;
            examples.session.stateless_dd.RetrieveOrderInfo
        &lt;/local&gt;
        &lt;ejb-link&gt;RetrieveOrderInfoBean&lt;/ejb-link&gt;
    &lt;/ejb-local-ref&gt;
    
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;RetrieveOrder&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/RetrieveOrder&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</plain-text-body>
<rich-text-body><p>The default namespace of the above XML document is <code><a shape="rect" class="external-link" href="http://java.sun.com/xml/ns/javaee" rel="nofollow">http://java.sun.com/xml/ns/javaee</a></code>. The XML elements that do not have a namespace prefix belong to the default namespace.</p></rich-text-body>
<p>In the <code>RetrieveOrder</code> servlet, the following code is used to look up the ejb to retrieve the order details.</p>

<parameter ac:name="">JAVA</parameter><parameter ac:name="title">examples.web.servlet.RetrieveOrder</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
...
...
Context ctx  = new InitialContext();
System.out.println("Instantiating beans...");
retrieveOInfo = (RetrieveOrderInfo)ctx.lookup("java:comp/env/ejb/RetrieveOrderInfo");
String orderIdStr = request.getParameter("orderid");
int orderId = Integer.parseInt(orderIdStr);
OrderInfo oInfo = retrieveOInfo.getOrderInfo(orderId);
...
...
</plain-text-body>      


<p>The deployment descriptor of the Order.ear is as follows.</p>

<parameter ac:name="title">application.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			 xmlns="http://java.sun.com/xml/ns/javaee" 
			 xmlns:application="http://java.sun.com/xml/ns/javaee/application_5.xsd"
			 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
			 http://java.sun.com/xml/ns/j2ee/application_5.xsd" version="5"&gt;
			 
	&lt;description&gt;EAR Example&lt;/description&gt;
	&lt;display-name&gt;Order Sample&lt;/display-name&gt;
	
	&lt;module&gt;
		&lt;web&gt;
			&lt;web-uri&gt;OrderWEB.war&lt;/web-uri&gt;
			&lt;context-root&gt;/OrderDemo&lt;/context-root&gt;
		&lt;/web&gt;
	&lt;/module&gt;
	
	&lt;module&gt;
		&lt;ejb&gt;OrderEJB.jar&lt;/ejb&gt;
	&lt;/module&gt;
&lt;/application&gt;
</plain-text-body>
<rich-text-body><p>The default namespace of the above XML document is <code><a shape="rect" class="external-link" href="http://java.sun.com/xml/ns/javaee" rel="nofollow">http://java.sun.com/xml/ns/javaee</a></code>. The XML elements that do not have a namespace prefix belong to the default namespace.</p></rich-text-body>
<p>The deployment plan of the <code>Order.ear</code> is as follows.</p>

<parameter ac:name="title">geronimo-application.xml</parameter><parameter ac:name="borderStyle">solid</parameter><plain-text-body>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application xmlns="http://geronimo.apache.org/xml/ns/j2ee/application-2.0" 
             xmlns:sys="http://geronimo.apache.org/xml/ns/deployment-1.2" 
             application-name="Order"&gt;

	&lt;sys:environment&gt;
		&lt;sys:moduleId&gt;
			&lt;sys:groupId&gt;Order&lt;/sys:groupId&gt;
			&lt;sys:artifactId&gt;OrderEAR&lt;/sys:artifactId&gt;
			&lt;sys:version&gt;5.0&lt;/sys:version&gt;
			&lt;sys:type&gt;car&lt;/sys:type&gt;
		&lt;/sys:moduleId&gt;
	&lt;/sys:environment&gt;
  
    &lt;module&gt;
        &lt;web&gt;OrderWEB.war&lt;/web&gt;
        &lt;web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1" &gt;
        &lt;sys:environment&gt;
            &lt;sys:moduleId&gt;
                &lt;sys:groupId&gt;Order&lt;/sys:groupId&gt;
                &lt;sys:artifactId&gt;OrderWEB&lt;/sys:artifactId&gt;
                &lt;sys:version&gt;2.5&lt;/sys:version&gt;
                &lt;sys:type&gt;war&lt;/sys:type&gt;
            &lt;/sys:moduleId&gt;
        &lt;/sys:environment&gt;
            &lt;context-root&gt;/OrderDemo&lt;/context-root&gt;
        &lt;/web-app&gt;
    &lt;/module&gt;
    
    &lt;module&gt;
        &lt;ejb&gt;OrderEJB.jar&lt;/ejb&gt;
        &lt;openejb-jar xmlns="http://openejb.apache.org/xml/ns/openejb-jar-2.2" 
					 xmlns:naming="http://geronimo.apache.org/xml/ns/naming-1.2"&gt;
					 
			&lt;sys:environment&gt;
				&lt;sys:moduleId&gt;
					&lt;sys:groupId&gt;Order&lt;/sys:groupId&gt;
					&lt;sys:artifactId&gt;OrderEJB&lt;/sys:artifactId&gt;
					&lt;sys:version&gt;3.0&lt;/sys:version&gt;
					&lt;sys:type&gt;jar&lt;/sys:type&gt;
				&lt;/sys:moduleId&gt;
				
				&lt;sys:dependencies&gt;
					&lt;sys:dependency&gt;
						&lt;sys:groupId&gt;console.dbpool&lt;/sys:groupId&gt;
						&lt;sys:artifactId&gt;OrderDS&lt;/sys:artifactId&gt;
						&lt;sys:version&gt;1.0&lt;/sys:version&gt;
						&lt;sys:type&gt;rar&lt;/sys:type&gt;
					&lt;/sys:dependency&gt;
				&lt;/sys:dependencies&gt;
			&lt;/sys:environment&gt;
			
			&lt;enterprise-beans&gt;
				&lt;session&gt;
					&lt;ejb-name&gt;RetrieveOrderInfoBean&lt;/ejb-name&gt;
					&lt;naming:resource-ref&gt;
						&lt;naming:ref-name&gt;jdbc/DB2DataSource&lt;/naming:ref-name&gt;
						&lt;naming:resource-link&gt;OrderDS&lt;/naming:resource-link&gt;
					&lt;/naming:resource-ref&gt;
				&lt;/session&gt;
			&lt;/enterprise-beans&gt;
		&lt;/openejb-jar&gt;
	&lt;/module&gt;
&lt;/application&gt;
</plain-text-body>
<rich-text-body><p>The default namespace of the above XML document is <code><a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/j2ee/application-2.0">http://geronimo.apache.org/xml/ns/j2ee/application-2.0</a></code>. The XML elements that do not have a namespace prefix belong to the default namespace.</p></rich-text-body>
<p>Observe how the JEE 5 resource names and ejb names in <code>ejb-jar.xml</code> and <code>web.xml</code> are mapped to actual resources deployed in the server through <code>geronimo-application.xml</code>.</p>

<p>As we can observe from the <code>geronimo-application.xml</code>, the deployment plans for web and ejb modules are wrapped in <code>&lt;module&gt; .... &lt;/module&gt;</code> elements. The xml elements used to provide deployment plan for the web module are from the schema <a shape="rect" class="external-link" href="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1">http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1</a> which is the schema for <code>geronimo-web.xml</code>. Similarly, the xml elements used to provide ejb deployment plan are from the schema <a shape="rect" class="external-link" href="http://openejb.apache.org/xml/ns/openejb-jar-2.2">http://openejb.apache.org/xml/ns/openejb-jar-2.2</a> which is the schema for <code>openejb-jar.xml</code>. Hence, <code>geronimo-application.xml</code> borrows elements from all other schemas to provide deployment plan for its sub modules.</p>

<p>Also, observe that, in the <code>geronimo-application.xml</code>, along with moduleId configuration for the <code>EAR</code> itself, there is a moduleId configuration for each web and ejb modules. If the above <code>EAR</code> file deployed on the server and the configurations are listed, the following output would be displayed on the console.</p>

<parameter ac:name="borderStyle">solid</parameter><plain-text-body>
C:\Geronimo-2.1\bin&gt;deploy.bat --user system --password manager list-modules
Using GERONIMO_BASE:   C:\Geronimo-2.1
Using GERONIMO_HOME:   C:\Geronimo-2.1
Using GERONIMO_TMPDIR: var\temp
Using JRE_HOME:        C:\sun\jre
Found 92 modules
  + Order/OrderEAR/5.0/car
      `-&gt; OrderWEB.war
      `-&gt; OrderEJB.jar
  + console.dbpool/OrderDS/1.0/rar
 </plain-text-body>

<p>The moduleId <code>Order/OrderEAR/5.0/car</code> is the configuration for the <code>Order.ear</code>. The ejb module declares a dependency on the <code>console.dbpool/OrderDS/1.0/rar</code> configuration in <code>&lt;sys:dependencies&gt;</code> section. This is the moduleId of the database pool that connects to the DB2 database where the order details are stored.</p></div>
        </div>

              </div>
    </div>

        <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo v3.0 Documentation : Creating deployment plans for enterprise applications';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2013, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

        <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-4380560-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>

  </body>
</html>
