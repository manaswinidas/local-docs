<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=2">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Apache Geronimo With A Monitor Component (JMX and JConsole)">
    <meta name="Keywords" content="Apache Geronimo development documentation Apache Geronimo With A Monitor Component (JMX and JConsole)">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：具有监视器组件（JMX和JConsole）的Apache Geronimo</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="index.html">索引</a> > <a href="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.html">具有监视器组件的Apache Geronimo（JMX和JConsole）</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">带有监视器组件的Apache Geronimo（JMX和JConsole）</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=43470"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=43470">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=43470"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=43470">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=43470"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=43470">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><p>这篇文章的目的是显示服务器端的使用Geronimo中，一个Java <sup>TM</sup> 2平台企业版（J2EE）应用服务器监控的可能性。从内部监视应用程序服务器可以节省网络流量，因为可以对监视的信息进行分析，过滤，汇总并设置到服务器内部特定于应用程序的上下文中。例如，当我们的网上商店的响应时间变得无法接受时，应用程序服务器可以发送电子邮件。一个简单的Web应用程序已用于开发服务器端监视组件，该组件监视三个Servlet并在总体平均处理时间超过某个给定阈值时发出警报。</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-WhatisneededWhatisneeded">需要什么<span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Whatisneeded"></span></h1>

<ul><li>JDK 5.0（由于使用了JConsole工具； JDK1.4中未包含该工具）： <a shape="rect" class="external-link" href="http://java.sun.com/javase/downloads/index.jsp" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://java.sun.com/javase/downloads/index.jsp" rel="nofollow">//java.sun.com/javase/downloads/index.jsp</a></li><li>标准Geronimo： <a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">http</a> : <a shape="rect" class="external-link" href="http://geronimo.apache.org/downloads.html">//geronimo.apache.org/downloads.html</a></li><li>示例代码： <a shape="rect" class="external-link" href="http://www.informatik.hs-furtwangen.de/~reich/Geronimo/GMontiorSample.zip" rel="nofollow">http</a> : <a shape="rect" class="external-link" href="http://www.informatik.hs-furtwangen.de/~reich/Geronimo/GMontiorSample.zip" rel="nofollow">//www.informatik.hs-furtwangen.de/~reich/Geronimo/GMontiorSample.zip</a> （内容：源，shell脚本，档案，自述文件等）</li></ul>


<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Introduction">介绍</h1>

<p>在使用Java管理扩展（JMX; <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a> ）通过远程客户端管理应用服务器时，可以找到很多文章。这些管理客户端应用程序描述了如何将管理客户端连接到服务器以及如何从服务器应用程序检索信息。尽管已经对JMX的客户端方面给予了很多关注，但很少考虑开发和部署管理Bean（MBean）的服务器端挑战。原因在于开发和集成这些组件的困难。通常根本不可能。随着Geronimo的出现，通过实现用于监视servlet或EJB的MBean简化了服务器端的监视。</p>

<p>本文展示了如何从内部监视应用程序服务器Geronimo，以及如何分析，分组和生成查询MBean的详细信息，并将其生成为服务器内部的元数据。这样可以节省管理客户端和服务器之间的带宽，并允许在内部装有监视程序组件的情况下构建效率更高的受控应用程序服务器。</p>

<p>为简单起见，Geronimo监视组件正在调查三个servlet的处理时间。建立所有三个处理时间的平均值，如果总处理时间大于预定值，则会生成警报。发达监控组件是如何集成到Geronimo架构以及它是如何部署和管理的JConsole的<a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a>是内容本文的。</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-OverviewaboutMBeansandGBeans">关于MBean和GBean的概述</h1>

<p>本节简要介绍了管理标准JMX（ <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a> ）及其基本bean MBean。它解释说，如果Geronimo是GBean，则可以通过新组件进行扩展。</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-JavaManagementExtension">Java管理扩展</h2>

<p>Java管理扩展（JMX）（ <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a> ）标准化了对应用程序和服务的管理和监视。它使开发人员能够以供应商/中立的方式为其应用程序编写管理程序。J2EE领域的另一个重要标准是JSR-77（ <a shape="rect" class="external-link" href="http://jcp.org/en/jsr/detail?id=77" rel="nofollow">http://jcp.org/en/jsr/detail?id=77</a> ）。 JSR-77是用于管理J2EE平台的标准模型，并允许应用程序服务器供应商以标准方式提供性能指标。它定义了一组标准度量标准类型，可用于监视J2EE平台。JSR-77中定义了以下类型的度量：范围统计信息，边界统计信息，有界范围统计信息，计数统计信息和时间统计信息。JMX的基础是管理Bean MBean。MBean有四种类型（标准，动态，模型，开放），每种都提供了不同级别的管理和监视功能（请参见<a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/ javamanagement /</a>了解更多信息）。在本文中，MBean用于监视servlet和控制GBean监视组件。</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimohostingourMonitorComponent">Geronimo托管我们的Monitor组件</h2>

<p>Geronimo首先是Java <sup>TM</sup> 2平台企业版（J2EE）应用程序服务器，但可以将其视为常规服务容器。开发Geronimo的主要重点是应用服务器的管理和扩展。Geronimo的意图绝不是重新实现servlet或EJB容器，而是尽可能使用现有的开源应用程序（主要来自Apache <a shape="rect" class="external-link" href="http://www.apache.org/">http://www.apache.org/</a> ），将其插入在一起并构建新的应用程序服务器。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoextendedbyamonitorcomponent"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/architectureBigFigure.jpg" data-image-src="/confluence/download/attachments/43470/architectureBigFigure.jpg?version=1&modificationDate=1170258515000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3577" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="architectureBigFigure.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">标准的Geronimo发行版包含Apache Tomcat <a shape="rect" class="external-link" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a>和EJB容器（OpenEJB <a shape="rect" class="external-link" href="http://incubator.apache.org/openejb/">http://incubator.apache.org/openejb/</a> ）组件。用本文开发的监视组件扩展Geronimo就像Tomcat一样，只要是GBean，就可以是任何其他组件，如图所示： <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoextendedbyamonitorcomponent">#Geronimo由监视组件扩展</a> 。Geronimo中的基本实体是Geronimo Bean（GBean）。</p>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoBeansGeronimoBeans">Geronimo豆<span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoBeans"></span></h3>

<p>Geronimo中的所有内容基本上都是Geronimo Bean（GBean）。Geronimo的内核处理这些GBean，并将它们存储在其存储库中。默认情况下，Geronimo不使用数据库，而是使用名为<code>repository</code> 。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoGBeans"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/architectureOverview.jpg" data-image-src="/confluence/download/attachments/43470/architectureOverview.jpg?version=1&modificationDate=1170259539000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3579" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="architectureOverview.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">用户可以通过使用部署计划描述它们来安装自己的GBean，并使用GBeanBuilder将它们部署到Geronimo中（参见图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoGBeans">#Geronimo GBeans</a> ）。每个GBean必须实现<code>GBeanLifecycle</code>接口。该接口定义了三种方法： <code>doStart()</code> ， <code>doStop()</code> ， <code>doFail()</code>如您在类图中所看到的（图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample">＃管理组件示例</a>的类图）。的<code>GBeanLifecycle</code>接口是Geronimo插件框架和我们的应用程序GBean之间的契约。Geronimo框架使用依赖项注入（请参阅Fowler： <a shape="rect" class="external-link" href="http://www.martinfowler.com/articles/injection.html" rel="nofollow">控制容器的反转和依赖项注入模式</a> ，Frod： <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc1/" rel="nofollow">apache geronimo中的依赖项注入，第1部分</a> ， <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc2/" rel="nofollow">apache geronimo中的依赖项注入，第2部分</a> ）在部署过程中设置GBean参数。在GBean的部署过程中，有两种方法可以注入信息：</p>
<ol><li>getter / setter注入：框架使用GBean的setter和getter方法注入信息。</li><li>构造函数注入：实例化时，框架使用GBean的构造函数注入信息。</li></ol>


<p>本文的示例使用构造函数注入将servlet MBean名称和MBean服务器引用传递给监视器GBean。</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TheServer-SideMonitorComponent">服务器端监视器组件</h1>

<p>本节的主题是有关GBean和MBean如何交互的详细体系结构描述。讨论了已开发的监视器类以及如何将监视器组件部署到Geronimo中。最后，使用JConsole测试监视器组件。</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GeronimoArchitectureOverview">Geronimo体系结构概述</h2>

<p>首先，在图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">#Geronimo具有集成监控器组件的体系结构中，</a>概述了如何将监控器组件集成到Geronimo的体系<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">结构中</a> 。它显示了带有MBeanServer和MBean的JMX层，Tomcat组件和监视器组件。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/architectureFigure.jpg" data-image-src="/confluence/download/attachments/43470/architectureFigure.jpg?version=1&modificationDate=1170259522000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3578" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="architectureFigure.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">启动服务器时，Geronimo将每个GBean作为MBean注册到MBean服务器。例如，Tomcat <a shape="rect" class="external-link" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a>包含多个GBean，因此包含多个MBean（TomcatWebContainer，TomcatWebConnector，TomcatEngine，TomcatJAASRealm等）。对于<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">具有集成监控器组件的## Geronimo体系结构中的</a>每个servlet（S1，S2，S3），存在一个MBean（MB <sub>S1</sub> ，MB <sub>S2</sub> ，MB <sub>S3</sub> ），其信息在JSR-77规范中定义。当使用“ GBean Builder”将示例监视器组件（Servlet Monitor GBean）部署到Geronimo中时，将实例化虚线对象。MBeanServerKernelBridge在MBean服务器上将每个已加载的GBean注册为MBean（MB <sub>MC</sub> ）。实例化的螺纹（T <sub>C）</sub>检索从servlet的MBeans（MB <sub><sub>S1，S2</sub></sub> MB，MB <sub>S3）</sub>的信息。</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Servletsunderobservation">正在观察的Servlet</h2>

<p>本文的内容不是显示如何开发和部署servlet。如果您想进一步了解Geronimo中的Web应用程序，请在Geronimo的用户指南<a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html">http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html中</a>有一个简单的安全servlet示例。当您解压缩源文件时（请<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Whatisneeded">参阅#Whatsed</a>部分中的<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Whatisneeded">内容</a> ）并遵循随附的自述文件，您可以部署包含3个简单servlet（ServletStatistic，ServeletData，ServletSystemTime）的Web应用程序。现在，您应该可以调用servlet了。例如： <a shape="rect" class="external-link" href="http://localhost:8080/mysample/app1/ServletSystemTime" rel="nofollow">http：// localhost：8080 / mysample / app1 / ServletSystemTime</a> 。</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Server-SideMonitorComponent">服务器端监视器组件</h2>

<p>服务器端监控器组件由2个类组成（请参见<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample">管理组件示例的#Class图</a> ）。</p>
<ul><li>\ verb + ServletMonitorGBean +，它实现了<code>GBeanLifecyle</code>接口和</li><li>\ verb + AverageBuilder +线程，该线程正在从Servlet MBean实际收集数据。如果计算出的平均处理时间超过阈值，则会生成警报。警报功能不发送电子邮件，仅记录“ ALARM”以保持代码简单。</li></ul>


<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/ClassDiagram.jpg" data-image-src="/confluence/download/attachments/43470/ClassDiagram.jpg?version=1&modificationDate=1170263296000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3580" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ClassDiagram.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span></p>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TheMonitorGBean">Monitor GBean</h3>

<p>Geronimo框架正在部署期间将有关MBean服务器引用和MBean servlet对象名称的信息注入构造函数。清单{#Listing 1]显示了如何通知Geronimo内核有关GBean的功能。的<code>GBeanInfoBuilder</code>用于告诉Geronimo GBean类的名称。然后构造函数注入定义为<code>addAttribute</code>指定三个Servlet MBean名称， <code>addReference</code>指定MBean服务器引用，以及<code>setConstructor</code>指定构造函数调用。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing1"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>ServletMonitorGBean.java（切除）</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
public static final GBeanInfo GBEAN_INFO;
static {
 GBeanInfoBuilder infoB = GBeanInfoBuilder.createStatic(&quot;ServletMonitorGBean&quot;, ServletMonitorGBean.class);
 infoB.addAttribute(&quot;servletName1&quot;, String.class, true);
 infoB.addAttribute(&quot;servletName2&quot;, String.class, true);
 infoB.addAttribute(&quot;servletName3&quot;, String.class, true);
 infoB.addReference(&quot;MBeanServerReference&quot;, MBeanServerReference.class);
 infoB.setConstructor(new String[] { &quot;MBeanServerReference&quot;, &quot;servletName1&quot;, &quot;servletName2&quot;, &quot;servletName3&quot;});
]]></script>
</div></div>
<p>此外，我们需要这些方法， <code>startCalcAverage</code> ， <code>stopCalcAverage</code> ， <code>defineThreshold</code>和<code>defineUpdateInterval</code>由JMX管理客户端使用。这使我们能够使用JConsole通过MBean通过MBean与监视器组件进行交互，如在<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-AccessingGeronimousingJConsole">＃使用JConsole访问Geronimo中</a>所示。通过MBean发布GBean方法是由<code>addOperation</code>的<code>GBeanInfoBuilder</code>通过指定方法名称和参数，如清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing2">2所示</a> ：</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing2"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>ServletMonitorGBean.java（切除）</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
infoB.addOperation(&quot;startCalcAverage&quot;);
 infoB.addOperation(&quot;stopCalcAverage&quot;);
 infoB.addOperation(&quot;defineThreshold&quot;,new Class[]{int.class});
 infoB.addOperation(&quot;defineUpdateInterval&quot;,new Class[]{int.class});
]]></script>
</div></div>
<p>通过设置变量完成MBean配置过程<code>GBEAN_INFO</code> 。就这样<code>MBeanServerKernelBridge</code>可以使用<code>getGBeanInfo()</code>得到一个<code>GBeanInfo</code>具有MBean配置的对象（清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing3">＃3</a> ）（清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing3">3</a> ），并构建适当的MBean MB <sub>MC</sub>图： <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Geronimoarchitecturewithintegratedmonitorcomponent">具有集成监视器组件的#Geronimo体系结构</a> 。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing3"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>ServletMonitorGBean.java（切除）</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
GBEAN_INFO = infoB.getBeanInfo();
public static GBeanInfo getGBeanInfo() { return GBEAN_INFO; }
]]></script>
</div></div>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TheAverageBuilderThread">AverageBuilder线程</h3>

<p>的<code>AverageBuilder</code> class（ <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Classdiagramofthemanagementcomponentexample">管理组件示例的#Class图</a> ）是一个查询Servlet MBean的线程。要从Servlet MBean查询信息，例如<code>requestCounter</code> ，您必须知道MBean的对象名称。您可以使用JMX管理客户端找到有关对象名称的信息。在<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-InteractingwiththeMonitorComponent">＃与Monitor Component进行交互</a>一节中，展示了如何查找servlet MBean的对象名称。由于我们在GBean的部署过程中注入了此信息，因此我们现在不必担心。有了MBean对象名，我们可以获得信息<code>precessingTime</code>和<code>requestCount</code>如下所示（请参见清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing4">＃</a>清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing4">4</a> ）：</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing4"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>ServletMonitorGBean.java（切除）</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
ObjectName objNameStatisticServlet = ObjectName.getInstance(statisticServlet);
ObjectName objNameDataServlet=ObjectName.getInstance(dataServlet);
ObjectName objNameSystemTimeServlet = ObjectName.getInstance(systemTimeServlet);
long pt1=((Long)mbserver.getAttribute(objNameStatisticServlet, &quot;processingTime&quot;)).longValue();
int rc1=((Integer)mbserver.getAttribute(objNameStatisticServlet, &quot;requestCount&quot;)).intValue();
]]></script>
</div></div>
<p>在源代码中可以看到对所有3个servlet进行此操作并建立平均值。</p>

<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeployingtheServer-SideMonitorComponent">部署服务器端监视器组件</h2>

<p>编译GBean监视器组件时，必须将其部署到Geronimo中。<br clear="none">为了部署监视器组件，必须根据Geronimo打包所有内容（请参阅Geronimo的《用户指南》 <a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html">http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html</a> ）。这意味着您必须将带有部署计划的GBean打包到jar文件中，例如<code>SimpleServletMonitor-1.0.jar</code>并部署它。对于部署，我们选择了Java部署程序deployer：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
java -jar $GERONIMOHOME/bin/deployer.jar --user system --password manager deploy SimpleServletMonitor-1.0.jar
]]></script>
</div></div>
<p>使用部署程序的速度要快得多，然后使用Geronimo基于浏览器的管理工具（ <a shape="rect" class="external-link" href="http://localhost:8080/console" rel="nofollow">http：// localhost：8080 / console</a> ）进行所有单击。在示例代码中，还提供了一些简单的Linux Shell脚本，它们支持部署，取消部署，列表等。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeploymentPlansforGeronimo'sGBeans"></span></p>
<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeploymentPlansforGeronimo'sGBeans">Geronimo的GBean的部署计划</h3>

<p>Geronimo的部署计划（ <code>geronimo-service.xml</code> ）有关GBean名称，引用和依赖项的状态信息。有关部署描述符的详细说明，请参见<a shape="rect" class="external-link" href="http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html">http://cwiki.apache.org/GMOxDOC11/apache-geronimo-v11-users-guide.html</a> 。我们的部署描述符（清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing5">＃</a>清单<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing5">5</a> ）由一个<code><environment></code>和<code><gbean></code>部分：</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing5"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>geronimo-service.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;module xmlns=&quot;http://geronimo.apache.org/xml/ns/deployment-1.1&quot;&gt;
  &lt;environment&gt;...&lt;/environment&gt;
  &lt;gbean ...&gt;...&lt;/gbean&gt;
&lt;/module&gt;
]]></script>
</div></div>

<h4 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-The``environment''part:">``环境''部分：</h4>

<p>我们必须通过定义监控器GBean在Geronimo中的唯一名称<code>groupId</code> ， <code>artifactId</code> ， <code>version</code>和<code>type</code> 。此外，我们必须定义<code><dependencies></code> （请参见清单： <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing6">＃Listing6</a> ）。因为我们要注入对象引用<code>MBeanServerReference</code>对于GBean构造函数，我们的部署过程取决于<code>geronimo/rmi-naming</code>定义为<code>geronimo-service.xml</code> 。<br clear="none">该参考的序列化版本可在以下位置的存储库中找到： <code>geronimo/rmi-naming</code> 。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing6"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>geronimo-service.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;environment&gt;
  &lt;moduleId&gt;
    &lt;groupId&gt;mysample&lt;/groupId&gt;
    &lt;artifactId&gt;SimpleServletMonitor&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;type&gt;car&lt;/type&gt;
  &lt;/moduleId&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;geronimo&lt;/groupId&gt;
      &lt;artifactId&gt;rmi-naming&lt;/artifactId&gt;
      &lt;type&gt;car&lt;/type&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/environment&gt;
]]></script>
</div></div>

<h4 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-The``gbean''part:">``豆子''部分：</h4>

<p>首先，您必须定义GBean的名称和确切的类名称作为元素的XML属性。 <code><gbean></code> （请参见清单： <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing7">＃Listing7</a> ）。<br clear="none">然后，定义所有引用和属性，这些引用和属性应在部署期间注入。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing7"></span></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>geronimo-service.xml</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;gbean name=&quot;ServletMonitorGBean&quot; class=&quot;de.hsfurtwangen.informatik.ServletMonitorGBean&quot;&gt;
  &lt;reference name=&quot;MBeanServerReference&quot;&gt;
    &lt;name&gt;MBeanServerReference&lt;/name&gt;
  &lt;/reference&gt;
  &lt;attribute name=&quot;servletName1&quot; type=&quot;java.lang.String&quot;&gt;
    Geronimo:j2eeType=Servlet,name=ServletStatistic,WebModule=//localhost/mysample,J2EEApplication=none,J2EEServer=none
  &lt;/attribute&gt;
  &lt;attribute name=&quot;servletName2&quot; type=&quot;java.lang.String&quot;&gt;
    Geronimo:j2eeType=Servlet,name=ServletData,WebModule=//localhost/mysample,J2EEApplication=none,J2EEServer=none
  &lt;/attribute&gt;
  &lt;attribute name=&quot;servletName3&quot; type=&quot;java.lang.String&quot;&gt;
    Geronimo:j2eeType=Servlet,name=ServletSystemTime,WebModule=//localhost/mysample,J2EEApplication=none,J2EEServer=none
  &lt;/attribute&gt;
&lt;/gbean&gt;
]]></script>
</div></div>
<p>如上面的示例所示（清单： <a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Listing7">＃Listing7</a> ），通过Geronimo框架的构造函数注入来注入以下参数：</p>
<ul><li>MBeanServerReference：GBean类中的相应源代码为：<code>GBeanInfoBuilder.addReference("MBeanServerReference",MBeanServerReference.class)</code></li><li>servleteName1：GBean类中的相应源代码为：<code>GBeanInfoBuilder.addAttribute("servletName1",String.class)</code></li><li>servletName2：GBean类中的相应源代码为：<code>GBeanInfoBuilder.addAttribute("servletName2",String.class)</code></li><li>servletName3：GBean类中的相应源代码为：<code>GBeanInfoBuilder.addAttribute("servletName3",String.class)</code></li></ul>


<h2 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-TestingtheMonitorComponent">测试监视器组件</h2>


<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-AccessingGeronimousingJConsole">使用JConsole访问Geronimo</h3>

<p>我们要使用的JConsole <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html</a> ， <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/tooldocs /share/jconsole.html</a> ，这是一个JMX兼容的GUI工具，可连接到正在运行的JVM。如果<code>JAVA_HOME</code>环境变量设置为JDK 5.0，只需输入：</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-JConsole"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleConnect.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleConnect.jpg?version=1&modificationDate=1170270450000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3582" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleConnect.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span><br clear="none">要连接到Geronimo服务器，您必须在JConsole中使用以下设置（参见图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-JConsole">#JConsole</a> ）：</p>
<ul><li><strong>JMX URL：</strong> <code>service:jmx:rmi:///jndi/rmi://localhost:1099/JMXConnector</code></li><li><strong>用户名：</strong> <code>system</code></li><li><strong>密码：</strong> <code>manager</code></li></ul>


<p>在管理客户端连接到Geronimo之后，您将切换到MBean视图（参见图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">#Servlet MBean视图</a> ）并导航到已部署的servlet之一，例如<code>ServletStatistic</code> （图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">#Servlet MBean视图的</a>第一和第二图）。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleMBeans1.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleMBeans1.jpg?version=1&modificationDate=1170270782000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3583" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleMBeans1.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleMBeans2.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleMBeans2.jpg?version=1&modificationDate=1170272169000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3584" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleMBeans2.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleServletStatistic.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleServletStatistic.jpg?version=1&modificationDate=1170272197000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3585" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleServletStatistic.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span></p>

<p>一个有趣的信息是对象名称（图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">#Servlet MBean视图的</a>第三<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-ServletMBeanview">幅图</a> ），该对象名称用于Geronimo的GBean部署计划的部署描述符中（请参阅<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-DeploymentPlansforGeronimo'sGBeans">#Geronimo的GBeans</a>部署计划）。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-InteractingwiththeMonitorComponent"></span></p>

<h3 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-InteractingwiththeMonitorComponent:ServletMonitorGBean">与Monitor组件进行交互：ServletMonitorGBean</h3>

<p>首先，导航到GBean（请参见图<a shape="rect" href="#ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GBeanOperations">#GBean操作</a> ）。然后，您切换到操作视图。现在，您可以使用\ verb + GBeanInfoBuilder +访问在GBean中定义的所有方法。让我们通过计算3个Servlet的平均处理时间开始该过程。只需单击\ verb + startCalcAverage（）+，您就可以在\ verb + GERONIMO_HOME / var / log / geronimo.out +文件中看到计算出的平均值。现在，重新加载servlet几次，以便您可以看到输出中的更改。您还可以更改servlet信息轮询的更新时间。首先单击\ verb + parameter0 +并将其值设置为5000，然后单击\ verb + defineUpdateInterval +。现在每隔5秒就会从Servlet中收集一次数据。<br clear="none">玩耍，玩得开心。</p>

<p><span class="confluence-anchor-link" id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-GBeanOperations"></span><br clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="apache-geronimo-with-a-monitor-component-jmx-and-jconsole.data/jconsoleMBeanView.jpg" data-image-src="/confluence/download/attachments/43470/jconsoleMBeanView.jpg?version=1&modificationDate=1170272471000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3586" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jconsoleMBeanView.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="43470" data-linked-resource-container-version="26"></span></p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-Conclusion">结论</h1>

<p>概述了所用技术，Geronimo的GBeans和JMX。您现在应该对如何在Geronimo应用程序服务器中开发和部署监视程序组件以及如何改进监视程序有所了解。开发的示例显示了服务器执行自己的监视和特定于应用程序的警报的能力。还有更多的可能性可以做。例如，服务器可以监视servlet请求的数量，如果数量超过了例如每秒20个，则可能存在拒绝服务攻击。分析服务器内部的监视数据并优化Geronimo的配置，例如线程池大小。等等</p>

<h1 id="ApacheGeronimoWithAMonitorComponent(JMXandJConsole)-References">参考文献</h1>

<ul><li>Sun的Java管理扩展（JMX）页面。 <a shape="rect" class="external-link" href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" rel="nofollow">http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/</a> 。</li><li>JConsole参考。 <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jconsole.html</a> 。</li><li>JConsole手册。 <a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html</a> 。</li><li>JSR-77：J2EE管理规范。 <a shape="rect" class="external-link" href="http://jcp.org/en/jsr/detail?id=77" rel="nofollow">http://jcp.org/en/jsr/detail?id=77</a> 。</li><li>Apache主页。 <a shape="rect" class="external-link" href="http://www.apache.org/">http://www.apache.org/</a> 。</li><li>Tomcat主页。 <a shape="rect" class="external-link" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a> 。</li><li>OpenEJB主页。 <a shape="rect" class="external-link" href="http://incubator.apache.org/openejb/">http://incubator.apache.org/openejb/</a> 。</li><li>马丁·福勒<em>控制容器的反转和依赖项注入模式。</em> ; <a shape="rect" class="external-link" href="http://www.martinfowler.com/articles/injection.html" rel="nofollow">http://www.martinfowler.com/articles/injection.html</a> ;一月; 2004年。</li><li>尼尔·弗罗德； <em>apache geronimo中的依赖注入，第1部分：研究j2ee应用程序中解耦的新方法。</em> ; <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc1/" rel="nofollow">http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc1/</a> ;二月; 2006年。</li><li>尼尔·弗罗德； <em>Apache Geronimo中的依赖注入，第2部分：下一代。</em> ; <a shape="rect" class="external-link" href="http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc2/" rel="nofollow">http://www-128.ibm.com/developerworks/opensource/library/os-ag-ioc2/</a> ;二月; 2006年。</li></ul></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Apache Geronimo With A Monitor Component (JMX and JConsole)';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</body></html>