<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Integration Testing">
    <meta name="Keywords" content="Apache Geronimo development documentation Integration Testing">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：集成测试</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">首页</a> > <a href="index.html">索引</a> > <a href="integration-testing.html">集成测试</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">整合测试</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=26297"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=26297">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=26297"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=26297">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=26297"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=26297">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><div class="confluence-information-macro confluence-information-macro-warning"><p class="title">过时的内容</p><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>此页面的内容过时，可能包含或可能不包含相关，有用或正确的信息。</p></div></div>

<div class="toc-macro client-side-toc-macro" data-headerelements="H1,H2,H3,H4,H5,H6,H7"></div>

<h1 id="IntegrationTesting-Objective">目的</h1>

<p>我们在模块级别进行测试，测试对每个模块中的代码执行基本的单元测试。然后，我们进行了TCK测试，以确保Geronimo符合J2EE规范。现在，集成测试引入的测试级别超出了单元测试或TCK测试的范围。它执行Geronimo提供给最终用户的特性和功能的系统级测试。由于Geronimo是各种开源技术的集成平台，因此该集成测试可验证并确保成功进行聚合。</p>

<p>集成测试被设计为在装配体构建后运行，但作为同一构建过程的一部分。因此，快速进行集成测试也将确保并证明“真正”成功的构建。集成测试还可以针对先前组装的Geronimo归档文件（目前，仅* .zip）独立运行。</p>

<h1 id="IntegrationTesting-Gettingstarted">入门</h1>

<p>检出或更新中继。<br clear="none">自上而下构建它（直到我们发布了所有2.0-SNAPSHOT工件）</p>

<p><strong>创建原型（模板）测试套件</strong></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>命令</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
$&gt;cd geronimo/testsuite
$&gt;mvn archetype:create \
    -DarchetypeGroupId=org.apache.geronimo.plugins \
    -DarchetypeArtifactId=geronimo-archetype-testsuite \
    -DarchetypeVersion=2.0-SNAPSHOT \
    -DartifactId=newFunc-testsuite \
    -Dversion=2.0-SNAPSHOT
]]></script>
</div></div>
<p>现在，您应该在geronimo / testsuite目录下有一个名为<em>newFunc-testsuite</em>的模板测试包。<br clear="none">这个Maven项目完全是自给自足的。它启动和停止服务器。它尚无任何测试可运行。它甚至具有用于服务器启动/停止执行的surefire报告。</p>

<p><strong>修改模板以适合您的功能测试</strong></p>
<ol><li>更改<em>newFunc-testsuite</em> / <em>testset-1</em>目录名称以反映您的测试集名称（例如<em>basic-testset</em> ）。</li><li>编辑<em>newFunc-testsuite</em> / <em>basic-testset</em> /pom.xml并替换<artifactid>元素值以匹配新目录名称。</artifactid></li><li><em>用测试</em>填充<em>newFunc-testsuite</em> / <em>basic-testset</em>项目。<em>basic-testset</em> /pom.xml中的所有执行都必须在ID为“ child”的配置文件中。</li></ol>


<p><strong>注意</strong>可以跳过上述步骤1和2。但是，该artifactId可能会与通过原型创建的另一个artifactId发生冲突。因此，建议使用。</p>

<p><strong>运行测试</strong></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>命令</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
$&gt;cd geronimo/testsuite
$&gt;mvn [-DinstallDirectory=/path/to/geronimoHome]
]]></script>
</div></div>
<p>Maven将运行所有测试套件。对于每个测试套件，它将调用其下的所有测试集。到完成时，它应该已经在每个target / surefire-reports目录中创建了surefire xml。</p>

<p>使用-DinstallDirectory参数会将Geronimo安装在一个位置，并且每个<em>foo-testsuite</em>将使用相同的服务器实例。每个服务器也将启动/停止。默认值为每个<em>foo-testsuite</em>在其目标目录中都有服务器的自己安装。它下面的所有测试集将使用正在运行的服务器的同一实例。</p>

<p>您可以转到任何单个测试套件并从中执行“ mvn”以仅运行其测试。</p>

<p><strong>查看测试结果</strong></p>
<div class="code panel pdl" style="border-style:solid;border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px;border-bottom-style:solid"><b>命令</b></div><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
$&gt;cd geronimo/testsuite
$&gt;mvn site-deploy -DbuildNumber=&lt;a timestamp&gt;
]]></script>
</div></div>
<p>这将为整个测试套件生成一个网站，并将其部署到geronimo.apache.org下的网站。在<a shape="rect" class="external-link" href="http://geronimo.apache.org/maven/server/testsuite/ResultsSummary.html">这里</a>查看结果摘要。</p>

<h1 id="IntegrationTesting-Framework">构架</h1>

<p>集成测试是常规geronimo树的一部分，它位于<em>geronimo / testsuite下</em> 。此pom.xml下的子模块分为服务器的各种功能类别。例如，控制台测试人员将在控制台上执行测试，而网络测试人员将针对Web容器执行测试。</p>

<p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="integration-testing.data/testsuite-framework.jpg" data-image-src="/confluence/download/attachments/26297/testsuite-framework.jpg?version=2&modificationDate=1163934091000&api=v2" data-unresolved-comment-count="0" data-linked-resource-id="2487" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="testsuite-framework.jpg" data-base-url="https://cwiki.apache.org/confluence" data-linked-resource-content-type="image/pjpeg" data-linked-resource-container-id="26297" data-linked-resource-container-version="35"></span></p>

<p>每个<em>foo-testsuite</em>将包含另一组实际执行测试的子模块。每个<em>foo-testsuite</em>还将执行以下基本步骤</p>
<ul><li>安装服务器。</li><li>启动它。</li><li>调用<em>testset-</em> <em>n</em>下的测试<em>。</em></li><li>停止服务器。</li><li>为该套件中的测试创建surefire报告。</li></ul>


<h1 id="IntegrationTesting-Pluginssupport.">插件支持。</h1>

<ul><li><a shape="rect" href="#IntegrationTesting-geronimo-maven-plugin">＃geronimo-maven-plugin</a> ：安装/启动/停止服务器。部署/取消部署模块</li><li><a shape="rect" href="#IntegrationTesting-selenium-maven-plugin">＃selenium-maven-plugin</a> ：启动硒服务器</li><li><a shape="rect" href="#IntegrationTesting-maven-maven-plugin">＃maven-maven-plugin</a> ：调用<em>testset-n</em> /pom.xml并运行测试。</li><li><a shape="rect" href="#IntegrationTesting-testsuite-maven-plugin">＃testsuite-maven-plugin</a> ：为<em>foo-testsuite</em>生成surefire-report.html</li></ul>


<p><span class="confluence-anchor-link" id="IntegrationTesting-geronimo-maven-plugin"></span></p>

<h2 id="IntegrationTesting-geronimo-maven-plugin">geronimo-maven-plugin</h2>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/maven/server/maven-plugins/geronimo-maven-plugin/index.html">http://geronimo.apache.org/maven/server/maven-plugins/geronimo-maven-plugin/index.html</a></p>

<p><strong>geronimo-maven-plugin</strong>提供了安装/启动/停止服务器以及部署/取消部署模块的目标。它具有配置选项，可以为每个<em>foo-testsuite</em>安装单独的Geronimo服务器，或者重用服务器安装的一个实例。它还具有用于记录结果的配置选项，以便生成surefire报告xml。Maven生命周期的集成前测试阶段和集成后测试阶段会适当调用此插件的目标。</p>

<p>提供了一组用于测试目的的模块。它们位于<em>geronimo / testsupport</em>目录中。此pom.xml在构建周期的开始阶段构建，并提供了供测试套件使用的各种j2ee归档文件。</p>

<p>有关示例，请参见部署测试套件</p>

<p><span class="confluence-anchor-link" id="IntegrationTesting-selenium-maven-plugin"></span></p>

<h2 id="IntegrationTesting-selenium-maven-plugin">硒Maven插件</h2>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/maven/server/maven-plugins/selenium-maven-plugin/index.html">http://geronimo.apache.org/maven/server/maven-plugins/selenium-maven-plugin/index.html</a></p>

<p>geronimo / testsuite下的console-testsuite使用Selenium（ <a shape="rect" class="external-link" href="http://openqa.org/" rel="nofollow">http://openqa.org</a> ）测试控制台。这需要启动一个特殊的服务器进程，该进程由我们的<strong>selenium-maven-plugin提供</strong> 。</p>

<p>有关示例，请参见console-testsuite</p>

<p><span class="confluence-anchor-link" id="IntegrationTesting-maven-maven-plugin"></span></p>

<h2 id="IntegrationTesting-maven-maven-plugin">Maven的Maven插件</h2>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/maven/genesis/plugins/maven-maven-plugin/index.html">http://geronimo.apache.org/maven/genesis/plugins/maven-maven-plugin/index.html</a></p>

<p>这个插件在Maven生命周期的集成测试阶段调用每个<em>testset-n</em> /pom.xml。测试用例在那些项目中定义。测试可以是junit或<a shape="rect" class="external-link" href="http://www.testng.org/" rel="nofollow">testng</a>测试用例。 <strong>maven-surefire-plugin</strong>配置为在测试阶段跳过测试，并在集成测试阶段运行。测试后会生成surefire-report xml。</p>

<p><span class="confluence-anchor-link" id="IntegrationTesting-testsuite-maven-plugin"></span></p>

<h2 id="IntegrationTesting-testsuite-maven-plugin">testsuite-maven-plugin</h2>

<p><a shape="rect" class="external-link" href="http://geronimo.apache.org/maven/server/maven-plugins/testsuite-maven-plugin/index.html">http://geronimo.apache.org/maven/server/maven-plugins/testsuite-maven-plugin/index.html</a></p>

<p>Maven不会为pom包装生成surefire报告。 <em>foo-testsuite</em>是一个pom打包程序，在集成前测试阶段和集成后测试阶段都有执行。这些测试的结果将不会被Maven捕获。同样，来自<em>testset</em> -n项目的<em>surefire</em>报告应汇总到其父foo-testsuite中。这是通过testsuite-maven-plugin中的generate-surefire-xml目标完成的。另一个目标，generate-surefire-report将根据这些surefire xmls生成surefire-report.html。最终修复菜单目标将修复此html文件的菜单。</p></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Integration Testing';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</body></html>