<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Client JNDI Names">
    <meta name="Keywords" content="Apache Geronimo development documentation Client JNDI Names">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：客户端JNDI名称</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="index.html">索引</a> > <a href="client-jndi-names.html">客户端JNDI名称</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">客户端JNDI名称</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=76657"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=76657">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=76657"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=76657">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=76657"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=76657">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><h1 id="ClientJNDINames-What'sMyBean'sJNDIName?">我的Bean的JNDI名称是什么？</h1>
<p>在开始阅读之前，请记住以下几点：</p>
<ol><li>为您的EJB提供了一个默认的JNDI名称。</li><li>您可以自定义JNDI名称。</li><li>如果使用该名称，将记录错误并继续部署。</li></ol>


<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>如果要严格保证创建所需的jndi名称， <strong>请将openejb.jndiname.failoncollision</strong>系统属性设置为'true'。</p></div></div>

<h2 id="ClientJNDINames-DefaultJNDIname">默认的JNDI名称</h2>
<p>默认的JNDI名称采用以下格式：</p>
<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
{ejbName}{interfaceType.annotationName}
]]></script>
</div></div>
<p>让我们尝试了解以上格式。<strong>ejbName</strong>和<strong>interfaceType.annotationName</strong>都是预定义的变量。还有其他可用的预定义变量，可用于自定义JNDI名称格式。</p>

<h1 id="ClientJNDINames-JNDINameFormatting">JNDI名称格式</h1>
<p>
</p><p><strong>openejb.jndiname.format</strong>属性使您可以为所有EJB的全局JNDI名称提供模板。有了它，您就可以完全控制JNDI布局的结构，从而可以建立恰好适合您的客户端应用程序的设计模式。有关在客户端代码中使用JNDI名称格式化功能的巧妙方法，请参阅<a shape="rect" href="https://cwiki.apache.org/confluence/display/OPENEJBx30/Service+Locator">服务定位器</a>文档。</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>变量</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>moduleId</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>通常是ejb-jar文件的名称或<ejb-jar id="">id值（如果已指定）</ejb-jar></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ejbType</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>STATEFUL，STATELESS，BMP_ENTITY，CMP_ENTITY或MESSAGE_DRIVEN</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ejbClass</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于名为<em>org.acme.superfun的类<em>。WidgetBean生成</em> <strong>org.acme.superfun。WidgetBean</strong> </em></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ejbClass.simpleName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于名为<em>org.acme.superfun的类<em>。WidgetBean</em>导致<strong>WidgetBean</strong> </em></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ejbClass.packageName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于名为<em>org.acme.superfun的类<em>。WidgetBean</em>结果为<strong>org.acme.superfun</strong> </em></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ejbName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>xml中或通过@ Stateful，@ Stateless或@MessageDriven批注中的'name'属性指定的ejb名称</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>deploymentId</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>ejb的唯一系统ID。通常，除非在openejb-jar.xml中指定或通过更改openejb.deploymentId.format进行指定，否则ejbName</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceType</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>参见interfaceType.annotationName</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceType.annotationName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>遵循EJB 3批注@ RemoteHome，@ LocalHome，@ Remote和@Local</p>
<ul class="alternate"><li><strong>RemoteHome</strong> <em>（EJB 2 EJBHome）</em></li><li><strong>LocalHome</strong> <em>（EJB 2 EJBLocalHome）</em></li><li><strong>远程</strong> <em>（EJB 3业务远程）</em></li><li><strong>本地</strong> <em>（EJB 3业务本地）</em></li><li><strong>端点</strong> <em>（EJB Web服务端点）</em></li></ul>
</td></tr><tr><td></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceType.xmlName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>跟随ejb-jar.xml描述符元素，，， <home><local-home><business-remote><business-local>和<service-endpoint>：</service-endpoint></business-local></business-remote></local-home></home></p>
<ul class="alternate"><li><strong>home</strong> <em>（EJB 2 EJBHome）</em></li><li><strong>本地家庭</strong> <em>（EJB 2 EJBLocalHome）</em></li><li><strong>业务远程</strong> <em>（EJB 3业务远程）</em></li><li><strong>业务本地</strong> <em>（EJB 3业务本地）</em></li><li><strong>服务端点</strong> <em>（EJB Web服务端点）</em></li></ul>
</td></tr><tr><td></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceType.xmlNameCc</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceType.xmlName的驼峰版本：</p>
<ul class="alternate"><li><strong>主页</strong> <em>（EJB 2 EJBHome）</em></li><li><strong>LocalHome</strong> <em>（EJB 2 EJBLocalHome）</em></li><li><strong>BusinessRemote</strong> <em>（EJB 3商业远程）</em></li><li><strong>BusinessLocal</strong> <em>（EJB 3业务本地）</em></li><li><strong>ServiceEndpoint</strong> <em>（EJB Web</em> <strong>服务</strong> <em>端点）</em></li></ul>
</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceType.openejbLegacyName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>遵循OpenEJB 1.0硬编码格式：</p>
<ul class="alternate"><li><em>（空字符串）</em> <em>（EJB 2 EJBHome）</em></li><li><strong>本地</strong> <em>（EJB 2 EJBLocalHome）</em></li><li><strong>BusinessRemote</strong> <em>（EJB 3商业远程）</em></li><li><strong>BusinessLocal</strong> <em>（EJB 3业务本地）</em></li><li><strong>ServiceEndpoint</strong> <em>（EJB Web</em> <strong>服务</strong> <em>端点）</em></li></ul>
</td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceClass</p></td><td colspan="1" rowspan="1" class="confluenceTd"><ul class="alternate"><li><em>（业务）</em>用于名为<em>org.acme.superfun的类<em>。WidgetRemote的</em>结果为<strong>org.acme.superfun。WidgetRemote</strong></em></li><li><em><em>（家庭），</em>用于名为<em>org.acme.superfun的类<em>。WidgetHome</em>结果为<strong>org.acme.superfun。WidgetHome</strong></em></em></li></ul><em><em>
</em></em></td></tr><tr><td></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceClass.simpleName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><ul class="alternate"><li><em>（业务）</em>用于名为<em>org.acme.superfun的类<em>。WidgetRemote</em>结果<strong>WidgetRemote</strong></em></li><li><em><em>（家庭），</em>用于名为<em>org.acme.superfun的类<em>。WidgetHome</em>在<strong>WidgetHome中的</strong>结果</em></em></li></ul><em><em>
</em></em></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>interfaceClass.packageName</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>用于名为<em>org.acme.superfun的类<em>。WidgetRemote</em>结果进入<strong>org.acme.superfun</strong> </em></p></td></tr></tbody></table></div>
<br clear="none">可以通过<em>系统属性</em>在服务器级别上进行设置，例如：<div class="confluence-information-macro confluence-information-macro-information"><p class="title">去做</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>显示设置系统属性或此属性的推荐方法（如果添加了gbean属性）</p></div></div>


<h1 id="ClientJNDINames-SettingtheJNDIname">设置JNDI名称</h1>

<p>可以为整个服务器级别，一个ejb，一个ejb的“本地”接口（local / remote / local-home / home）以及为ejb实现的单个接口设置所需的jndi名称格式。更具体的jndi名称格式可替代所有更通用的格式。最具体的格式规定了将用于ejb的任何给定接口的jndi名称。可以为您的服务器指定一种通用格式，在ejb级别覆盖它，然后对该ejb的特定接口进一步覆盖它。</p>

<h2 id="ClientJNDINames-Viathe<jndi>tagforaspecificejb">通过<jndi>特定ejb</jndi>的<jndi>标签</jndi></h2>

<p>下面专门为接口org.superbiz设置名称。oo</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;jndi name=&quot;foo&quot; interface=&quot;org.superbiz.Foo&quot;/&gt;  
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<p>或更一般地...</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;jndi name=&quot;foo&quot; interface=&quot;Remote&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<p>或更一般而言...</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;jndi name=&quot;foo&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<p>如果喜欢，“名称”属性仍可以使用模板，例如：</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;jndi name=&quot;ejb/{interfaceClass.simpleName}&quot; interface=&quot;org.superbiz.Foo&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<h3 id="ClientJNDINames-Multiple<jndi>tags">多个<jndi>标签</jndi></h3>

<p><jndi>允许使用</jndi>多个<jndi>标签，从而使您可以根据需要对每个接口或Iterfaces的每个逻辑组（本地，远程，LocalHome，RemoteHome）的jndi名称进行具体说明。</jndi></p>

<p>给定一个ejb FooBean，它具有以下接口：</p>
<ul class="alternate"><li>本地商家：org.superbiz。LocalOne</li><li>本地商家：org.superbiz。本地二</li><li>业务远程：org.superbiz。RemoteOne</li><li>业务远程：org.superbiz。遥控二</li><li>家：org.superbiz。富家</li><li>本地住所：org.superbiz。FooLocalHome</li></ul>


<p>以下四个示例将产生相同的jndi名称。这些示例的目的是显示各种方法，您可以使用这些方法来隔离特定的接口或接口类型，从而获得对它们的命名方式的更具体的控制。</p>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>＃1</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;jndi name=&quot;LocalOne&quot; interface=&quot;org.superbiz.LocalOne&quot;/&gt; 
    &lt;jndi name=&quot;LocalTwo&quot; interface=&quot;org.superbiz.LocalTwo&quot;/&gt; 
    &lt;jndi name=&quot;RemoteOne&quot; interface=&quot;org.superbiz.RemoteOne&quot;/&gt; 
    &lt;jndi name=&quot;RemoteTwo&quot; interface=&quot;org.superbiz.RemoteTwo&quot;/&gt; 
    &lt;jndi name=&quot;FooHome&quot; interface=&quot;org.superbiz.FooHome&quot;/&gt; 
    &lt;jndi name=&quot;FooLocalHome&quot; interface=&quot;org.superbiz.FooLocalHome&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>＃2</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;!-- applies to LocalOne and LocalTwo --&gt;
    &lt;jndi name=&quot;{interfaceClass.simpleName}&quot; interface=&quot;Local&quot;/&gt; 

    &lt;!-- applies to RemoteOne and RemoteTwo --&gt;
    &lt;jndi name=&quot;{interfaceClass.simpleName}&quot; interface=&quot;Remote&quot;/&gt; 

    &lt;!-- applies to FooHome --&gt;
    &lt;jndi name=&quot;{interfaceClass.simpleName}&quot; interface=&quot;RemoteHome&quot;/&gt; 

    &lt;!-- applies to FooLocalHome --&gt;
    &lt;jndi name=&quot;{interfaceClass.simpleName}&quot; interface=&quot;LocalHome&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>＃3</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;!-- applies to RemoteOne, RemoteTwo, FooHome, and FooLocalHome --&gt;
    &lt;jndi name=&quot;{interfaceClass.simpleName}&quot;/&gt; 

    &lt;!-- these two would count as an override on the above format --&gt;
    &lt;jndi name=&quot;LocalOne&quot; interface=&quot;org.superbiz.LocalOne&quot;/&gt; 
    &lt;jndi name=&quot;LocalTwo&quot; interface=&quot;org.superbiz.LocalTwo&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>

<div class="code panel pdl" style="border-width:1px"><div class="codeHeader panelHeader pdl" style="border-bottom-width:1px"><b>＃4</b></div><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;openejb-jar&gt;
  ...

  &lt;session&gt;
    ...

    &lt;!-- applies to LocalOne, LocalTwo, RemoteOne, RemoteTwo, FooHome, and FooLocalHome --&gt;
    &lt;jndi name=&quot;{interfaceClass.simpleName}&quot;/&gt; 
  &lt;/session&gt;
&lt;/openejb-jar&gt;
]]></script>
</div></div>


<h2 id="ClientJNDINames-GlobalSettings">全局设置</h2>

<p>可以在放弃命令之前指定GERONIMO_OPTS来更改JNDI设置<code>geronimo start</code> 。例如，要将JNDI格式更改为<em>{ejbName} / {interfaceClass}</em> ，请使用以下语法：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>set GERONIMO_OPTS="-Dopenejb.jndiname.format={ejbName}/{interfaceClass}</pre>
</div></div>

<p><strong>您有责任确保名称不冲突。</strong>  </p>

<h3 id="ClientJNDINames-Conservativesettings">保守设置</h3>

<p>诸如“ <em>{deploymentId} / {interfaceClass}</em> ”这样的非常保守的设置将保证每个接口都绑定到JNDI。如果您的bean具有旧的EJBObject接口，三个业务远程接口和两个业务本地接口，则此模式将导致将<strong>六个</strong>代理绑定到JNDI中。</p>

<p>同样，保守的设置是：</p>
<ul class="alternate"><li><em>{deploymentId} / {interfaceClass.simpleName}</em></li><li><em>{moduleId} / {ejbName} / {interfaceClass}</em></li><li><em>{ejbName} / {interfaceClass}</em></li><li><em>{moduleId} / {ejbClass} / {interfaceClass}</em></li><li><em>{ejbClass} / {interfaceClass}</em></li><li><em>{ejbClass} / {interfaceClass.simpleName}</em></li><li><em>{ejbClass.simpleName} / {interfaceClass.simpleName}</em></li><li><em>{interfaceClass} / {ejbName}</em></li></ul>


<p>Bordeline乐观：</p>
<ul class="alternate"><li><em>{moduleId} / {interfaceClass}</em></li><li><em>{interfaceClass}</em></li></ul>


<p>如果该接口未由其他bean共享，则以上两个设置将起作用。</p>

<h3 id="ClientJNDINames-Pragmaticsettings">务实的设置</h3>

<p>更加中间的设置（例如“ <em>{deploymentId} {interfaceType.annotationName}</em> ”）将确保每种接口类型的至少一个代理绑定到JNDI。如果您的bean具有旧的EJBObject接口，三个业务远程接口和两个业务本地接口，则此模式将导致将<strong>三个</strong>代理绑定到JNDI中：一个专用于您的EJBObject接口的代理；一个代理用于您的EJBObject接口。一个代理实现所有三个业务远程接口；一个代理实现两个业务本地接口。</p>

<p>同样，实用的设置是：</p>
<ul class="alternate"><li><em>{moduleId} / {ejbClass} / {interfaceType.annotationName}</em></li><li><em>{ejbClass} / {interfaceType.xmlName}</em></li><li><em>{ejbClass.simpleName} / {interfaceType.xmlNameCc}</em></li><li><em>{interfaceType} / {ejbName}</em></li><li><em>{interfaceType} / {ejbClass}</em></li></ul>


<h3 id="ClientJNDINames-Optimisticsettings">乐观的设置</h3>

<p>一个非常乐观的设置，例如“ <em>{deploymentId}</em> ”，可以保证只有一个Bean代理将绑定到JNDI。如果您知道bean中只有一种类型的接口，那将是很好的。例如，仅业务远程接口，或仅业务本地接口，或仅EJBObject接口，或仅EJBLocalObject接口。</p>

<p>如果应用程序中的Bean确实具有多个接口类型，例如，一个业务本地和一个业务远程，默认情况下，OpenEJB在检测到它无法绑定第二个接口时将拒绝该应用程序。通过将<strong>openejb.jndiname.failoncollision</strong>系统属性设置为<em>false</em>可以禁用此严格行为。当此属性设置为false时，我们将简单记录一个错误，指出第二个代理无法绑定到JNDI，告诉您哪个ejb使用该名称，然后继续加载您的应用程序。</p>

<p>同样，乐观的设置是：</p>
<ul class="alternate"><li><em>{ejbName}</em></li><li><em>{ejbClass}</em></li><li><em>{ejbClass.simpleName}</em></li><li><em>{moduleId} / {ejbClass.simpleName}</em></li><li><em>{moduleId} / {ejbName}</em></li></ul>


<h1 id="ClientJNDINames-AdvancedDetailsonEJB3.0BusinessProxies(thesimplepart)">EJB 3.0业务代理的高级详细信息（简单部分）</h1>

<p>如果您实现自己的业务接口，那么您的生活就很简单，因为代理也将实现相同类型的业务接口。意味着OpenEJB为业务本地接口创建的任何代理也将实现您的其他业务本地接口。同样，OpenEJB为业务远程接口创建的任何代理也将实现您的其他业务远程接口。</p>

<h1 id="ClientJNDINames-AdvancedDetailsonEJB3.0BusinessProxies(thecomplicatedpart)">EJB 3.0业务代理的高级详细信息（复杂部分）</h1>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>阅读本节，这两项适用于您：</p>
<ul class="alternate"><li>您没有在bean类中实现业务接口</li><li>您的一个或多个业务远程接口从javax.rmi扩展。远程</li></ul>


<p>如果这两项均未描述您的应用，则无需进一步阅读。去玩吧</p></div></div>
<h3 id="ClientJNDINames-Notimplementingbusinessinterfaces">没有实现业务接口</h3>

<p>如果您没有实现您的业务接口，那么我们可能无法在单个接口中实现所有业务接口。throws子句中的冲突和返回值可能会在<a shape="rect" href="https://cwiki.apache.org/confluence/display/OPENEJB/Multiple+Business+Interface+Hazzards">此处</a>详细说明。在为接口创建代理时，我们将检测并删除任何其他与主接口冲突的业务接口。</p>

<h3 id="ClientJNDINames-Businessinterfacesextendingjavax.rmi.Remote">扩展javax.rmi的业务接口。远程</h3>

<p>根据规范规则，从javax.rmi抛出许多运行时异常（与容器或连接有关）。远程代理，如java.rmi。RemoteException，它不是运行时异常，必须作为检查后的异常通过代理抛出。问题是，对于共享相同方法签名的两个接口，实际上删除了冲突的throws子句。例如，以下两种方法：</p>
<ul class="alternate"><li>InterfaceA：void doIt（）抛出Foo；</li><li>InterfaceB：void doIt（）引发RemoteException;</li></ul>


<p>可以通过以下方式消除冲突的throws子句来实现：</p>
<ul class="alternate"><li>实现：void doIt（）{}</li></ul>


<p>这对于bean类很好，因为它不需要抛出RMI必需的javax.rmi。RemoteException。但是，如果我们从这两个接口创建代理，则它还会使用不会抛出javax.rmi的'doIt（）{}'方法结束。RemoteException。这是非常糟糕的，因为容器确实需要将RemoteException抛出给扩展java.rmi的任何业务接口。远程处理任何与容器相关的问题或连接问题。如果容器尝试从代理“ doIt（）{}”方法引发RemoteException，则将导致VM引发UndeclaredThrowableException。</p>

<p>保证代理具有InterfaceB的“ doIt（）引发RemoteException {}”方法的唯一方法是，当我们创建专用于InterfaceB的代理时，切出InterfaceA。<br clear="none">
</p></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Client JNDI Names';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</body></html>