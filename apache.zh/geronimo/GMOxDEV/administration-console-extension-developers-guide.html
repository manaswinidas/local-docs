<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Administration Console Extension Developer's Guide">
    <meta name="Keywords" content="Apache Geronimo development documentation Administration Console Extension Developer's Guide">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：管理控制台扩展开发人员指南</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="index.html">索引</a> > <a href="extensible-administration-console.html">可扩展管理控制台</a> > <a href="administration-console-extension-developers-guide.html">管理控制台扩展开发人员指南</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">管理控制台扩展开发人员指南</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=63621"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=63621">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=63621"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=63621">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=63621"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=63621">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<p>Geronimo的早期版本包括一个不可自定义的静态管理控制台。通常，当用户安装Geronimo时，管理控制台将首先成为配置其应用程序服务器的第一步。因此，管理控制台必须具有一项功能，即为用户提供必要的功能以轻松管理服务器的插件和组件，这一点很重要。这个新的管理控制台允许对管理功能进行更多的动态控制。这样，它更紧密地反映了Geronimo的高度灵活和可插入的基础体系结构。我们在这里所做的是为插件开发人员提供一个框架，以包括其插件的管理控制台扩展。目的是提供一种具有简单体系结构的简单，灵活的解决方案，以使Geronimo的用户可以直观地配置组件，并且开发人员可以轻松扩展此处列出的基础。</p>

<p>本文档旨在为开发人员提供必要的说明，以利用管理控制台提供的基础结构为其Apache Geronimo插件添加控制台扩展。本文档的第一部分将描述系统的管道系统及其工作原理，而后一部分将提供一个坚实的示例，说明如何实际获得自己的功能正常的控制台扩展。</p>


<p>本文档分为以下几节：</p>


<h1 id="AdministrationConsoleExtensionDeveloper'sGuide-Architecture">建筑</h1>
<p>下面我们对新插件和Pluto之间的交互进行了高级介绍。这实质上是管理控制台下的“管道”。</p>
<rich-text-body>
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="administration-console-extension-developers-guide.data/HighLevelPluto.jpg"></span><br clear="none">图1-Pluto与可部署WAR交互的高级视图</p></rich-text-body>

<p>我们有一个WAR文件，其中包含Portlet信息以及左侧的管理控制台扩展（ACE）GBean的定义。 ACE GBean是我们可以在Pluto上调用操作的方式（稍后将介绍）。</p>

<p>我们使用的portlet容器是Apache Pluto 1.2。Pluto允许动态添加和删除页面和Portlet，而无需重新启动Portlet容器。从用户界面的角度来看，该方法非常重要，因为我们不必因不必要地重新启动服务器组件而陷入性能瓶颈。</p>

<p>Pluto及其Pluto API的虚线框旨在描述将Pluto的实现与我们自己的实现脱钩的方法。这是一项设计决策，允许将Pluto替换为其他Portlet引擎，以进行将来的开发。</p>

<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-UnderstandingThroughUsecases">通过用例了解</h2>
<p>现在让我们进一步研究该体系结构。应该注意的是，该体系结构的预期目的是利用Geronimo的灵活特性，并使实际的管理控制台反映Geronimo的可插入性。基础结构应该易于理解并且易于构建。</p>

<p>我们将看到的第一个用例也将用于描述使管理控制台起作用的各个部分。</p>
<rich-text-body>
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="administration-console-extension-developers-guide.data/startcase.jpg"></span><br clear="none">图2-向控制台添加功能的用例</p></rich-text-body>

<p>在左侧，我们从一个简单的Geronimo部署计划开始（例如，geronimo-web.xml）。该部署计划与您可能希望部署到Geronimo的任何归档中包含的部署计划相同。在这种情况下，部署计划包括特殊AdminConsoleExtensionGBean的定义。稍后将更详细地描述AdminConsoleExtensionGBean的内容。</p>

<p>在右边，我们有冥王星。当Pluto启动时，将启动PortalContainerServicesGBean。这就是我们访问冥王星的方式。当我们部署归档文件时，将启动一个包含Portlet配置信息的AdminConsoleExtensionGBean（基于部署描述符中指定的配置）。在AdminConsoleExtensionGBean上，开发人员可以在其中指定要添加到管理控制台的Portlet和页面的信息。</p>

<p>AdminConsoleExtensionGBean实现GBeanLifecycle。启动AdminConsoleExtensionGBean时，它将向内核询问PortalContainerServicesGBean（1）。AdminConsoleExtensionGBean获得服务（2）-现在AdminConsoleExtensionGBean可以通过其API访问Pluto。我们想向我们的管理控制台中添加一个Portlet，因此我们调用Pluto的addPortlet方法，该方法将更新Pluto的内部模型。</p>

<p>在上图中，每个变灰的GBean是一个由部署描述符实例化的AdminConsoleExtensionGBean。每个AdminConsoleExtensionGBean都会在管理控制台中修改或添加一个页面。这实质上意味着可以通过指定现有页面的名称将portlet添加到现有页面，或者如果不存在具有指定名称的页面，则可以创建单独的页面。</p>

<p>部署计划可能还包括多个AdminConsoleExtensionGBean的定义。这意味着，如果选择这样做，则部署计划可能会向控制台添加任意数量的页面。</p>
<rich-text-body>
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="administration-console-extension-developers-guide.data/stopcase.jpg"></span><br clear="none">图3-从控制台删除功能的用例</p></rich-text-body>

<p>从控制台删除页面（图3）的过程与此类似。因为AdminConsoleExtensionGBean实现了GBeanLifecycle，所以在停止安装的组件时，其AdminConsoleExtensionGBean也将停止。发生这种情况时，我们再次向内核请求PortalContainerServiceGBean，该内核用于通过其API在Pluto上调用removePortlet。从管理控制台的视图中，用户将看到页面从导航菜单中消失了（图4）。如果用户再次启动该组件，则GBeanLifecycle的doStart调用Pluto Container上的addPortlet，并且管理控制台扩展会重新出现在导航菜单上（图5）。</p>

<rich-text-body>
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="administration-console-extension-developers-guide.data/noext.jpg"></span><br clear="none">图4-我们看不到停止组件的左侧管理扩展</p>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="administration-console-extension-developers-guide.data/withext.jpg"></span><br clear="none">图5-我们看到HelloWorldPortlet的管理功能出现在导航中</p></rich-text-body>

<h1 id="AdministrationConsoleExtensionDeveloper'sGuide-Class/DependencyStructure">类/依赖结构</h1>
<rich-text-body>
<p>件之间的依赖关系</p>
<ul><li>PortalContainer<ul><li>PortalContainerServiceGBean<ul><li>AdminConsoleExtensionGBean</li></ul>
		</li><li>冥王星门户<ul><li>管理控制台<ul><li>新的Portlet</li></ul>
			</li></ul>
		</li></ul>
	</li></ul>
</rich-text-body>

<p>PortalContainer是管理控制台的基本要求。Pluto Portal和PortalContainerServiceGBean是将任何内容安装到控制台框架的基本要求。管理控制台和AdminConsoleExtensionGBean取决于PortalContainerServiceGBean和Pluto Portal。为了添加新的控制台扩展，所有描述的组件都必须安装到位。</p>

<p>这里的关键是添加控制台扩展的要求是AdminConsoleExtensionGBean和New Portlet文件。这意味着需要在部署描述符中指定的必需依赖项是管理控制台和PortalContainerServicesGBean。</p>


<h1 id="AdministrationConsoleExtensionDeveloper'sGuide-HowtoDevelopanAdministratorConsoleExtension(ACE)">如何开发管理员控制台扩展（ACE）</h1>
<p>待办事项：简介应该在这里</p>

<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-Differentwaysofstructuring">不同的结构方式</h2>
<p>为Geronimo创建ACE的整个概念是，您正在以Portlet的形式向管理员控制台添加扩展。您可以随意包装。一些选项如下：</p>
<ol><li>您的portlet</li><li>您的Portlet +相关组件</li><li>您的portlet声明了对相关组件的依赖</li></ol>


<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-Createaportlet">创建一个portlet</h2>
<p>在最基本的状态下，ACE定义了在控制台中放置新/旧Portlet的位置。Portlet是管理员控制台的基本构建块。我们将Pluto 2.x用作我们的门户网站引擎，因为它非常符合JSR 168 [ <a shape="rect" class="unresolved" href="#">链接到JSR 168</a> ]。我们将不介绍如何开发portlet的细节，因为您会找到许多在此方面更好的教程和工具。 [ <a shape="rect" class="unresolved" href="#">这里有许多教程链接</a> ]。您将需要定义适当的“ web.xml”和“ portlet.xml”文件。作为一个简单的示例，请参考本节末尾定义的[HelloWorldPortlet的<a shape="rect" class="unresolved" href="#">链接</a> ]。</p>

<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-AddanAdminConsoleExtensionGBean">添加一个AdminConsoleExtensionGBean</h2>
<p>要将AdminConsoleExtensionGBean添加到可部署的存档文件中，您需要在“ geronimo-web.xml”部署计划中包括以下内容：</p>
<ol><li>声明对“ pluto-portal” <parameter ac:name="">XML</parameter> <parameter ac:name="borderStyle">实体</parameter>的依赖<plain-text-body><dependencies>...
<dependency>
    <groupid>org.apache.geronimo.plugins</groupid> <artifactid>冥王星支持</artifactid>
</dependency>
</dependencies>
</plain-text-body></li><li>定义一个AdminConsoleExtensionGBean <parameter ac:name="">XML</parameter> <parameter ac:name="borderStyle">实体</parameter> <plain-text-body><gbean name="example" class="org.apache.geronimo.pluto.AdminConsoleExtensionGBean"><attribute name="pageTitle">测试</attribute> <attribute name="portletContext">/ HelloWorldPortlet</attribute> <attribute name="portletList">[HelloWorldPortlet]</attribute></gbean></plain-text-body> ，其中属性定义如下：</li></ol>
<ul><li>pageTitle：要将这些portlet添加到（新的或现有的）页面的名称</li><li>portletContext：Portlet的安装位置的上下文。</li><li>portletList：要添加到此页面的portlet的逗号分隔列表。</li></ul>


<parameter ac:name="">XML</parameter> <parameter ac:name="borderStyle">实体</parameter> <parameter ac:name="title">样本geronimo-web.xml</parameter> <plain-text-body><web-app xmlns="http://geronimo.apache.org/xml/ns/j2ee/web-1.2"><environment><moduleid><groupid>org.apache.geronimo.portals</groupid> <artifactid>pluto-example</artifactid> <version>1.0-SNAPSHOT</version> <type>war</type></moduleid> <dependencies><dependency><!-- Put a dependancy on the hosting portal (pluto) --> <groupid>org.apache.geronimo.plugins</groupid> <artifactid>pluto-支持</artifactid></dependency></dependencies></environment> <!-- This is where the files are accessed from. (aka - portletContext) --> <context-root>/ HelloWorldPortlet</context-root> <!-- Start off a ACEGBean, this is the lifecycle for the portlet --> <gbean name="PlutoTest" class="org.apache.geronimo.pluto.AdminConsoleExtensionGBean"><attribute name="pageTitle">Hello</attribute> <attribute name="portletContext">/ HelloWorldPortlets</attribute> <attribute name="portletList">[</attribute> <reference name="PortalContainerServices"><name>Pello</name></reference> <attribute name="portletList">]</attribute></gbean></web-app></plain-text-body>

<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-Puttingittogether">把它放在一起</h2>
<p>将修改后的“ geronimo-web.xml”部署计划添加到WEB-INF文件夹中的WAR或CAR。另外，如果要包括portlet，则归档文件应包含适当的类文件以及“ web.xml”和“ portlet.xml”文件。</p>
<parameter ac:name="title">简单战争的示例结构是什么？</parameter><rich-text-body>
<ul><li>HelloWorldPortlet.war<ul><li>WEB-INF /<ul><li>班级/<ul><li>（portlet类文件）</li></ul>
			</li><li>geronimo-web.xml</li><li>portlet.xml</li><li>web.xml</li></ul>
		</li></ul>
	</li></ul>
</rich-text-body>

<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-Deployingtheapplication">部署应用程序</h2>
<p>可以像平常一样使用“部署”命令或使用管理员控制台的“部署新”或“插件”来部署存档。</p>
<ol><li><em>命令行</em> ：<code><strong><geronimo bin folder>/deploy.bat deploy <path to war></strong></code><br clear="none">例：<br clear="none">
<code><strong>cd c:/g/target/geronimo-tomcat6-minimal-2.0-SNAPSHOT/bin/</strong></code><br clear="none">
<code><strong>deploy.bat deploy c:/HelloWorldPortlet.war</strong></code></li><li><em>使用管理控制台</em> ： <rich-text-body>
<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="administration-console-extension-developers-guide.data/InstApp.jpg"></span></p></rich-text-body></li></ol>



<h2 id="AdministrationConsoleExtensionDeveloper'sGuide-Verifyinginstallation">验证安装</h2>
<p>转到<a shape="rect" class="external-link" href="http://localhost:8080/console/" rel="nofollow">http：// localhost：8080 / console /</a>验证是否已将portlet添加到正确的页面。（如果从命令行部署，则可能需要刷新浏览器。）</p>

<h1 id="AdministrationConsoleExtensionDeveloper'sGuide-SampleExtension">样品扩展</h1>
<p>这是管理控制台扩展的工作示例。<br clear="none">
<a shape="rect" href="administration-console-extension-developers-guide.data/example_extension.war?version=1&modificationDate=1204602381000&api=v2" data-linked-resource-id="59671571" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example_extension.war" data-nice-type="Java Archive" data-linked-resource-content-type="application/octet-stream" data-linked-resource-container-id="63621" data-linked-resource-container-version="47">下载示例WAR</a></p>
<parameter ac:name="">Java</parameter> <parameter ac:name="borderStyle">可靠的</parameter> <parameter ac:name="title">HelloWorldPortlet.java</parameter> <plain-text-body>包org.apache.pluto.examples;导入java.io。IOException;导入java.io。PrintWriter;导入javax.portlet。GenericPortlet;导入javax.portlet。PortletException;导入javax.portlet。RenderRequest;导入javax.portlet。RenderResponse; / ** *一个非常简单的portlet示例。*此portlet向最终用户显示'Hello World'* /公共类HelloWorldPortlet扩展GenericPortlet {//当用户请求查看此portlet（通过//导航至Pluto中的网页）时，调用此函数public void doView（RenderRequest请求，RenderResponse响应）引发PortletException，IOException {//将响应设置为读取HTML response.setContentType（“ text / html; charset = UTF-8”）; //使用getWriter（）和getPortletOutputStream（）的必需调用PrintWriter out = response.getWriter（）; //将内容写入portlet out.println（“<h1>你好，世界</h1>“）;}}</plain-text-body></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Administration Console Extension Developer's Guide';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</body></html>