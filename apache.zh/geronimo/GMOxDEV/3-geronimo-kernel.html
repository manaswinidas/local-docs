<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="3 - Geronimo Kernel">
    <meta name="Keywords" content="Apache Geronimo development documentation 3 - Geronimo Kernel">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：3-Geronimo内核</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="index.html">索引</a> > <a href="geronimo-architecture.html">Geronimo体系结构</a> > <a href="3-geronimo-kernel.html">3-Geronimo内核</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">3-Geronimo内核</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=31158"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=31158">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=31158"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=31158">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=31158"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=31158">添加新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><plain-text-body>{scrollbar}</plain-text-body>

<h1 id="id-3-GeronimoKernel-Overview">总览</h1>

<p>本节讨论Geronimo内核。在深入了解整个Geronimo体系结构之前，了解内核很重要。通过内核，Geronimo中的GBeans可以与管理实用程序进行通信，同时可以松散地耦合并且不与JMX绑定。内核提供的这种松散耦合还使测试变得更加容易，并允许进行依赖项管理和注入。内核跟踪系统中的各种GBean以及各种依赖关系，对其他GBean的引用，属性和方法。下面是Geronimo内核的高级概述：</p>

<p><br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="3-geronimo-kernel.data/kernel_component_diagram.png"></span>
<br class="atl-forced-newline" clear="none"></p>

<p>Geronimo Console是一种基于Web的方式，用于部署/启动/停止应用程序，更改JMS信息等。除了Geronimo控制台之外，这还可以是一些自定义的书面工具或其他J2EE管理软件。如果用户想要使用Geronimo Console停止应用程序，则该用户将登录Web控制台并选择要停止的应用程序。停止应用程序的操作发生时，Web控制台将无法直接访问Tomcat。相反，Web控制台将（通过MBeanServer）向内核查询Tomcat GBean，然后内核将以反射方式在Tomcat中执行适当的stop函数。请注意，这允许分别测试Web控制台，内核和Tomcat。GBean上的所有操作都通过对内核接口实现的调用而发生，从而允许更改内核的实现细节，而对系统的影响最小。在幕后，实现了Kernel接口并利用许多其他类的帮助的BasicKernel类。这些其他类都隐藏在内核接口的后面。</p>

<h2 id="id-3-GeronimoKernel-Kernel">核心</h2>

<p>内核接口是所有接口的起点。下面是Geronimo Kernel的类图。注意，省略了许多细节，例如内核接口的每种方法，以免混淆内核的核心概念。</p>

<p><br class="atl-forced-newline" clear="none">
<span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image image-left" src="3-geronimo-kernel.data/basic_kernel_class_diagram.png"></span>
<br class="atl-forced-newline" clear="none"></p>


<p>内核的目的是对挂接到Geronimo的GBean进行操作。在上图中，Kernel是一个接口，并且显示了BasicKernel和KernelGBean来实现该接口。就像Tomcat或ActiveMQ一样，内核被封装在GBean中。为此，KernelGBean是内核的<a shape="rect" class="external-link" href="http://en.wikipedia.org/wiki/Decorator_pattern" rel="nofollow">装饰器</a> 。内核实例通过构造函数传递，因此内核的所有方法都委托给该实例。getKBeanInfo（）方法是添加到Kernel的新功能，它使Kernel成为GBean。BasicKernel是Kernel的具体实现，并具有操纵GBean的功能。为给定的GBean调用getAttribute（）将返回调用通过方法参数传递的getter方法的结果（这些参数将在下面详细讨论）。与getAttribute（）方法类似，invoke（）方法将在GBean上执行特定的方法。请注意，您还需要其他常规操作，例如启动或停止GBean。</p>

<h2 id="id-3-GeronimoKernel-ReferencingGBeans">引用GBean</h2>

<p>在上面的类图中，Kernel类具有一个名为loadGBean（）的方法。此方法将GBeanData的实例（实际上只是GBean信息的包装器）和类加载器作为输入。从<a shape="rect" href="2-gbeans-architecture.html">GBeans</a>回忆起，不需要GBean来实现任何接口。因此，GBeanData对象包装有关应如何访问GBean的信息（它的名称）以及该GBean的方法/属性。BasicKernel接收GBeanData并将其传递给GBeanInstance来创建将用于对该GBean的所有引用的对象。GBeanInstance具有所有可以调用的方法，指向引用的链接以及对其他GBean的依赖关系等。依赖项也在这里注入。GBeanInstance中包含的最重要的信息之一就是如何对其进行引用。浏览javadocs中的内核（此处链接）将发现接口中的许多方法被覆盖了四次。每个被覆盖的方法都有相似的方法签名。这是因为有四种可能的方式来引用GBean。有抽象名称，简称，对象名称（现已弃用按对象名称查找GBean的对象）和类类型。下表是四种类型的表，每个名称都有定义：</p>

<div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>名称</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>对象类型</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>描述</p></th></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>摘要名称</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>抽象名称</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Geronimo对象的特定名称。这是一个URI，用于唯一标识给定的GBean。在javadocs中，它的定义是：[vendorId] / artifactId / [version] / [type]？键=值[，键=值] [，...]</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>对象名称</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>对象名</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>GBean的JMX名称。这是JMX规范所必需的，并且将由基于JMX的工具用来引用GBean对象</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>简称</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>串</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>将按名称引用GBean（抽象名称的键/值对）</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>类型</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>类</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>基于摘要名称中URI的类型的引用</p></td></tr></tbody></table></div>


<p>尽管有四种访问GBean的方法，但实际上只有两种，然后是两种捷径。如果通过短名称或其类型引用了bean，则会查询所有抽象名称，以查找该类型或短名称所属的抽象名称。然后，一旦找到，它就会被抽象名称引用。在BasicRegistry中，有两个GBean引用的数据结构。一种用于对象名称，另一种用于GBean。添加GBean时，将同时为这两个条目创建一个条目，以启用“抽象名称”或“对象名称”的快速搜索。</p>
</div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : 3 - Geronimo Kernel';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</body></html>