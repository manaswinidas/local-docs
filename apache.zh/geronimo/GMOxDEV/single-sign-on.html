<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="Single Sign On">
    <meta name="Keywords" content="Apache Geronimo development documentation Single Sign On">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：单一登录</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">主页</a> > <a href="index.html">索引</a> > <a href="single-sign-on.html">单点登录</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">单点登录</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=105832"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=105832">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=105832"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=105832">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=105832"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=105832">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><h1 id="SingleSignOn-SingleSignOn">单点登录</h1>

<p>单一登录（SSO）用于表示几种不同的含义。我将描述（我的理解）尺寸以及一些可能的解决方案和技术。</p>

<h2 id="SingleSignOn-WhatdoesSSOMean?">SSO是什么意思？</h2>
<p>现在，我只讨论Web应用程序SSO</p>

<h3 id="SingleSignOn-Severalappsononeserver">一台服务器上有多个应用程序</h3>
<h4 id="SingleSignOn-BASIC/DIGESTauthentication">BASIC / DIGEST认证</h4>
<p>RFC 2617说</p>
<blockquote>
<p>所有区域都需要realm指令（不区分大小写）<br clear="none">发出挑战的身份验证方案。领域价值<br clear="none">（区分大小写），并结合规范的根网址（<br clear="none">abs_path为空的服务器的absoluteURI;见5.1.2节<br clear="none">被访问的服务器的<a shape="rect" class="unresolved" href="#">2</a> ）中的，定义了保护空间。</p></blockquote>
<p>这意味着，一旦客户端获得了服务器和领域名称的凭据，它将继续使用该领域名称将其提供给该服务器上的每个应用程序。因此，您可以为所有看起来与客户端相同（例如通过负载平衡器访问）且具有相同域的服务器获取SSO。对于似乎与客户端不同的服务器上的多个应用程序，这将不起作用。</p>

<h4 id="SingleSignOn-FORMauthentication">FORM认证</h4>
<p>Servlet规范说，会话信息仅限于上下文上下文根标识的单个Web应用程序。通常，表单身份验证是通过将凭据存储在http会话中来实现的，因此您不能在Web应用程序之间共享这些凭据。Web容器通常提供一种违反规范的方法，并且可以在共享某些初始URI的上下文根之间共享会话。Jetty 7可以提供跨上下文伪会话，可以为任意应用程序配置该会话，该任意应用程序可以用来存储所有应用程序的凭据。</p>

<p>从客户端的角度来看，表单身份验证通常是借助提及域和路径的cookie来实现的。至少在码头，这些是可配置的，尽管非默认路径值不符合servlet规范，因为它们会导致在多个Web应用程序之间共享会话。</p>

<h3 id="SingleSignOn-Morethanoneserver,withdifferentapps">一台以上的服务器，具有不同的应用程序</h3>
<p>如果客户端可以识别出存在不同的服务器（即未隐藏在负载均衡器后面），则在这种情况下似乎没有BASIC或DIGEST sso。</p>

<p>对于类似FORM的身份验证，使用Cookie可以实现更多功能。服务器必须位于相关域egafoo.com和b.foo.com上，以便cookie域可以是foo.com。同样，路径必须兼容，例如“ /”。在这些情况下，当访问兼容路径时，用户代理会将相同的cookie发送到相关域中的所有服务器。Cookie可以包含跨上下文伪指令“会话”的ID或安全信息本身。如果安全信息（身份）已加密，则我看不到发送安全信息的安全性不如发送伪会话ID。但是，它很容易超过Cookie的大小限制。</p>

<p>跨上下文伪会话将需要在所有服务器上复制，或者当请求到达时使用未知的会话ID，或者更优先地使用集群解决方案（例如部落，旱谷或兵马俑）来复制跨上下文伪会话。</p>

<h2 id="SingleSignOn-Othermethods">其他方法</h2>
<h3 id="SingleSignOn-Kerberos">的Kerberos</h3>
<p>在已经使用kerberos进行了身份验证的kerberos环境中，从理论上讲，SPNEGO可以用于自动对kerberos环境中所有服务器的用户进行身份验证。AFAIK基本上需要具有SPNEGO身份验证模块和SPNEGO兼容用户代理的JASPI支持。JASPI支持应该在码头7中可用（当前在实验分支中可用）。</p>

<h3 id="SingleSignOn-OpenID">OpenID</h3>
<p>OpenID提供了一些类似于SSO的功能，因为实际上只有一个服务器（openid提供程序）登录您，但是您必须向希望访问的每个启用了openid的服务器指示您的openID标识符，并且必须告知要允许的openid提供程序对每个这样的服务器进行身份验证。</p>

<h2 id="SingleSignOn-SSOImplementations">SSO实施</h2>

<h3 id="SingleSignOn-JSecurity">JSecurity</h3>
<p><a shape="rect" class="external-link" href="http://incubator.apache.org/jsecurity/">JSecurity</a>或更有用的<a shape="rect" class="external-link" href="http://www.jsecurity.org/" rel="nofollow">http://www.jsecurity.org/</a>是一个完善的安全框架，目前正在迁移到apache，目前正在孵化中。它是ASL 2.0。它尚未集成到Geronimo中，并且似乎与Javaee规范安全性没有直接关系，尽管将其作为JACC提供程序进行集成可能很有用。有关SSO支持的一些详细信息， <a shape="rect" class="external-link" href="http://www.jsecurity.org/node/996" rel="nofollow">请参见http://www.jsecurity.org/node/996</a> ，这些表面似乎表明它依赖于跨上下文的伪会话，并且需要与特定服务器进行自定义通信才能共享会话内容。</p>

<h3 id="SingleSignOn-CAS(CentralAuthenticationServer)">CAS（中央身份验证服务器）</h3>
<p><a shape="rect" class="external-link" href="http://www.ja-sig.org/products/cas/index.html" rel="nofollow">CAS</a>是BSD许可的框架，类似于kerberos。用户登录到中央服务器，该服务器维护一个cookie和记住该登录名的会话。应用程序重定向到中央服务器以进行身份验证，并且中央服务器在身份验证后重定向回，包括票证。然后，客户端应用程序针对中央服务器验证票证。显然，返回的唯一信息是“已验证”和用户标识。没有返回角色信息。因此，与openid一样，每个应用程序都需要维护身份到角色的映射。有一个spring安全集成，但我找不到允许使用javaee安全约束的直接码头或tomcat集成。</p>

<h3 id="SingleSignOn-JOSSO">乔索</h3>
<p><a shape="rect" class="external-link" href="http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home" rel="nofollow">JOSSO</a>是GPL许可的，这使得它很难与ASL许可的代码一起使用。它似乎具有geronimo-tomcat集成。与码头或geronimo-jetty一起使用时，将需要修改码头服务器以在安全处理程序之前包含拦截器或处理程序，以便可以在正常安全处理之前注入sso信息。假定此代码将是GPL，因此可以使用Jetty或Geronimo GPL。因此，Geronimo无法包含JOSSO的集成代码。<br clear="none">JOSSO通过使中央认证服务器（“网关”）和“会话”在认证服务器和受保护的“合作伙伴”应用程序之间共享来工作。大概会话ID是使用Cookie共享的。重定向到中央身份验证服务器的身份验证消息流与合作伙伴应用程序的JAAS登录模块结合在一起，该模块使用SOAP从中央服务器检索身份验证信息。当前可能显然通过tomcat阀实现的身份验证消息流可以使用JASPI来实现，从而使其跨平台更多。这里有一些描述：<br clear="none">
<a shape="rect" class="external-link" href="http://www.josso.org/confluence/display/JOSSO1/Architecture+Overview" rel="nofollow">http://www.josso.org/confluence/display/JOSSO1/Architecture+概述</a></p>

<h3 id="SingleSignOn-ESOE">经济合作组织</h3>
<p><a shape="rect" class="external-link" href="http://www.esoeproject.org/" rel="nofollow">ESOE</a>是ASL 2.0，但显然主要是用C ++编写的。它支持SAML和XACML等标准。目前尚不清楚它与上述讨论之间的关系。有一个tomcat集成，但没有可见的码头或geronimo集成。它依赖中央认证服务器。</p></div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : Single Sign On';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</body></html>