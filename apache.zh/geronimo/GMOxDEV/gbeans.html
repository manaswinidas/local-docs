<html lang="zh-Hans" ><head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="asset?aid=0">
    <link rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <meta name="Description" content="GBeans">
    <meta name="Keywords" content="Apache Geronimo development documentation GBeans">
    <meta name="Owner" content="dev@geronimo.apache.org">
    <meta name="Robots" content="index, follow">
    <meta name="Security" content="Public">
    <meta name="Source" content="wiki template">
    <meta name="DC.Date" scheme="iso8601" content="2009-01-06">
    <meta name="DC.Language" scheme="rfc1766" content="en">
    <meta name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation">
    <meta http-equiv="PICS-Label" content="(PICS-1.1 " http:="" ="" www.icra.org="" ratingsv02.htm="=" www.rsac.org="" ratingsv01.htm="=" (ss~~000="" 1)="=">

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo开发：GBeans</title>

  </head>

  <body  onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tbody><tr>
        <td align="left" valing="top">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </tbody></table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tbody><tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" nowrap>
          <a href="/geronimo">首页</a> > <a href="index.html">索引</a> > <a href="gbeans.html">GBeans</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8">
            <input type="hidden" name="oe" value="UTF-8">
            <input type="hidden" name="domains" value="">
            <input type="hidden" name="sitesearch" value="">
            <input type="text" name="q" value="" maxlength="255">        
            <input type="submit" name="btnG" value="谷歌搜索">
          </form>
        </td>
      </tr> 
    </tbody></table>

    <div id="PageContent">
      <div class="pageheader" style="padding:6px 0px 0px 0px">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div class="smalltext" style="margin:0px 10px 0px 10px">Apache Geronimo开发</div>
        <div class="pagetitle" style="margin:0px 10px 8px 10px">GBeans</div>

        <div class="greynavbar" align="right" style="padding:2px 10px;margin:0px">
<!-- --> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=13453"><img src="http://geronimo.apache.org/images/icons/notep_16.gif" height="16" width="16" border="0" title="编辑页面"></a> <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=13453">编辑页面</a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV"><img src="http://geronimo.apache.org/images/icons/browse_space.gif" height="16" width="16" border="0" title="浏览空间"></a> <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">浏览空间</a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=13453"><img src="http://geronimo.apache.org/images/icons/add_page_16.gif" height="16" width="16" border="0" title="添加页面"></a> <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=13453">添加页面</a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=13453"><img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" title="新增新闻"></a> <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=13453">新增新闻</a> <!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><div class="confluence-information-macro confluence-information-macro-warning"><p class="title">过时的内容</p><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>此页面的内容过时，可能包含或可能不包含相关，有用或正确的信息。</p></div></div>

<h1 id="GBeans-Overview">总览</h1>

<p>GBeanMBean是J2EE管理托管对象，并且是Geronimo服务的标准基础。GBean是Geronimo容器可以管理其生命周期的类或对象。因此，例如，当您将零件部署到容器中时，您想要启动它们并停止它们，并且它们具有依赖关系：例如，“ Bean A”只能在准备就绪时才能启动，因为“ Bean B”因为“ Bean B”提供“ Bean A”所需的服务。因此，GBean是Geronimo的打包方式，需要进行管理并且可以表达依赖性。GBeans架构是Geronimo强大功能的核心，它使开发人员能够迁移或使用其现有的J2EE资产，无论是开源的还是商业的。</p>

<p>GBean旨在让您拿走自己拥有的东西，在它们周围放置一个GBean包装器，并使用该包装器桥接GBeans支持的JSR 77生命周期要求。您可以随意摆弄任何东西，并将其与GBeans配合使用。另外，GBeans将使开发人员可以将其他现有的开源Java项目引入Geronimo轨道。</p>

<p>这包装了一个或多个目标POJO，并根据提供的<a shape="rect" class="unresolved" href="#">GBeanInfo</a>实例公开了属性和操作。GBeanMBean还支持属性值和调用结果的缓存，这可以减少对目标的调用次数。</p>

<ul><li>Gbeans是向Geronimo提供管理服务的方式</li><li>目前，它是在JMX之上实现的，但是假定它独立于JMX。用户应该能够在不了解JMX的情况下使用它们。并且可以使其独立于GBeans。</li><li>可以使用GBeanMBean将GBean转换为MBean并使用JMX提供服务</li></ul>


<h1 id="GBeans-SampleGBeans">示例GBean</h1>

<p>获取源代码并搜索GBeanLifecycle的实现者。这是查找GBeans示例的好方法。已经发现，jetty模块和GBeanTest类非常有用。</p>

<p><strong>TODO</strong> ：添加完全限定的类名称</p>

<h1 id="GBeans-HowtowriteGBean">如何编写GBean</h1>

<ul><li>GBean可以实现可选的org.apache.geronimo.gbean。GBeanLifecycle接口。当GBean实现此接口时，实现将获得生命周期回调。</li><li>它们可以具有带有getter和setter的属性。有些属性是最终的，我认为它们是标准的..（它们的列表是什么），例如名称，内核（它们可以用来获取系统信息，请查看示例GBean。）有普通属性..有吸气剂和吸气剂</li><li>GBean可以具有方法..</li><li>GBean的构造函数<em><strong>不得</strong></em>调用其自己的成员函数，这些成员函数在其G <a shape="rect" class="unresolved" href="#">BeanInfo</a>中声明！</li><li>GBean必须实现具有以下签名的方法：<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>public static GBeanInfo getGBeanInfo()
</pre>
</div></div></li></ul>



<p>此方法提供有关GBean公开或使用的属性，操作和引用的元数据。按照标准惯例（Geronimo模式）在静态块初始化程序中初始化此元数据。以下块描述了这种方法：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>public static final GBeanInfo GBEAN_INFO;

static {
    GBeanInfoBuilder infoBuilder = new GBeanInfoBuilder("AxisGbean", AxisGbean.class);
    infoBuilder.addAttribute("name", String.class, true);
    infoBuilder.addAttribute("kernel", Kernel.class, false);
    infoBuilder.addOperation("echo", new Class[]{String.class});
    infoBuilder.setConstructor(new String[] {"kernel","Name"});
    GBEAN_INFO = infoBuilder.getBeanInfo();
}
</pre>
</div></div></li></ul>



<p>属性和引用必须符合以下命名约定：属性必须以小写第一个字符开头；并且引用必须以大写第一个字符开头。这个简单的命名约定应简化GBean的配置。</p>

<h2 id="GBeans-Step1:YourfirstsimpleGBean">步骤1：您的第一个简单GBean</h2>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>package example1;

import org.apache.geronimo.gbean.GBeanInfo;
import org.apache.geronimo.gbean.GBeanInfoBuilder;

public class MyGBean {

    public static final GBeanInfo GBEAN_INFO;

    static {
        GBeanInfoBuilder infoBuilder = new GBeanInfoBuilder("MyGBean", MyGBean.class);

        GBEAN_INFO = infoBuilder.getBeanInfo();
    }

    public static GBeanInfo getGBeanInfo() {
        return GBEAN_INFO;
    }
}
</pre>
</div></div></li></ul>



<p>使用以下命令编译该类（ <strong>TODO</strong> ：创建一个maven任务来编译用户的gbean；只需找到一种更好的方法即可）。</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>$ javac -classpath &lt;geronimo_home&gt;/assembly/target/geronimo-1.0-SNAPSHOT/lib/geronimo-kernel-1.0-SNAPSHOT.jar example1/MyGBean.java
</pre>
</div></div></li></ul>



<p><strong>TODO</strong> ：更改本节中的内容（暂时有用）</p>

<p>使用gbean类创建一个jar，并将其放入<geronimo_home>/assembly/target/geronimo-1.0-SNAPSHOT/repository/example1。</geronimo_home></p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>$ jar -Mcvf mygbean.jar example1/*.class
$ mkdir &lt;geronimo_home&gt;/assembly/target/repository
$ cp mygbean.jar &lt;geronimo_home&gt;/assembly/target/repository
</pre>
</div></div></li></ul>



<h1 id="GBeans-HowtodeployGBean">如何部署GBean</h1>

<p>将GBean部署到Geronimo上需要创建专门的Geronimo计划（也称为配置）。它与J2EE部署描述符相似，因为它还描述了它的外观以及在启动之前必须已启动的对其他GBean的引用。</p>

<p>该计划必须符合<em>schema / geronimo-config.xsd</em> （在存储库中，它位于<em>modules / deployment / src / schema / geronimo-config.xsd中</em> ）</p>

<p>这是Geronimo二进制发行版中已经可用的gbean部署描述符的一部分（它在回购中是<em>modules / assembly / src / plan / j2ee-server-plan.xml</em> ）。如果这是您第一次看到它，那真是太恐怖了。在下面，我们有一个简单的示例，将用于您的GBean。</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>    &lt;gbean name="openejb:type=ContainerIndex" class="org.openejb.ContainerIndex"&gt;
        &lt;references name="EJBContainers"&gt;
            &lt;pattern&gt;geronimo.server:j2eeType=StatelessSessionBean,*&lt;/pattern&gt;
            &lt;pattern&gt;geronimo.server:j2eeType=StatefulSessionBean,*&lt;/pattern&gt;
            &lt;pattern&gt;geronimo.server:j2eeType=EntityBean,*&lt;/pattern&gt;
        &lt;/references&gt;
    &lt;/gbean&gt;

    &lt;!-- EJB Protocol --&gt;
    &lt;gbean name="openejb:type=SocketService,name=EJB" class="org.openejb.server.SimpleSocketService"&gt;
        &lt;attribute name="serviceClassName" type="java.lang.String"&gt;org.openejb.server.ejbd.EjbServer&lt;/attribute&gt;
        &lt;attribute name="onlyFrom" type="java.net.InetAddress[]"&gt;127.0.0.1&lt;/attribute&gt;
        &lt;reference name="ContainerIndex"&gt;openejb:type=ContainerIndex&lt;/reference&gt;
    &lt;/gbean&gt;
    &lt;gbean name="openejb:type=ServiceDaemon,name=EJB" class="org.openejb.server.ServiceDaemon"&gt;
        &lt;attribute name="port" type="int"&gt;4201&lt;/attribute&gt;
        &lt;attribute name="inetAddress" type="java.net.InetAddress"&gt;127.0.0.1&lt;/attribute&gt;
        &lt;reference name="SocketService"&gt;openejb:type=SocketService,name=EJB&lt;/reference&gt;
    &lt;/gbean&gt;

    &lt;!-- JSR77 Management Objects --&gt;
    &lt;gbean name="geronimo.server:j2eeType=J2EEDomain,name=geronimo.server" class="org.apache.geronimo.j2ee.management.impl.J2EEDomainImpl"/&gt;
    &lt;gbean name="geronimo.server:j2eeType=J2EEServer,name=geronimo" class="org.apache.geronimo.j2ee.management.impl.J2EEServerImpl"&gt;
        &lt;reference name="ServerInfo"&gt;geronimo.system:role=ServerInfo&lt;/reference&gt;
    &lt;/gbean&gt;
    &lt;gbean name="geronimo.server:j2eeType=JVM,J2EEServer=geronimo" class="org.apache.geronimo.j2ee.management.impl.JVMImpl"/&gt;

    &lt;!-- JMX Remoting --&gt;
    &lt;gbean name="geronimo.server:role=JMXService,name=localhost" class="org.apache.geronimo.jmxremoting.JMXConnector"&gt;
        &lt;attribute name="URL" type="java.lang.String"&gt;service:jmx:rmi://localhost/jndi/rmi:/JMXConnector&lt;/attribute&gt;
        &lt;attribute name="applicationConfigName" type="java.lang.String"&gt;JMX&lt;/attribute&gt;
    &lt;/gbean&gt;
</pre>
</div></div></li></ul>



<p>另请参见<strong>Wiki的破碎的INTERWIKI链接：Deployment＃head-5cbd584046863bc7b753e57e8681a98a87f36f0f（标签=服务配置和部署）</strong> 。</p>

<p><strong>待办事项</strong> ：描述这些元素的含义（此处或在xsd中甚至更好）</p>

<p>所以这很可怕。下一节将描述GBean所需的部署计划。真的还不错...</p>

<h2 id="GBeans-Step2:Yourfirstdeploymentplan">步骤2：您的第一个部署计划</h2>

<p>这是您的第一个简单GBean-MyGBean的计划。gbean不公开任何属性，也没有引用其他GBean。</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration
    xmlns="http://geronimo.apache.org/xml/ns/deployment"
    configId="example1/MyGBean"
    &gt;

    &lt;dependency&gt;
        &lt;uri&gt;mygbean.jar&lt;/uri&gt;
    &lt;/dependency&gt;

    &lt;gbean name="geronimo.example:name=My first simple GBean" class="example1.MyGBean" /&gt;

&lt;/configuration&gt;
</pre>
</div></div></li></ul>



<p>有两种方法可以将GBean部署到您的服务器，所谓的“脱机”模式用于服务器不运行时，以及“联机”模式，用于服务器时。两者都概述如下。部署gbean需要执行<em>Geronimo Deployer</em> 。归结为执行可执行的jar <em>bin / deployer.jar</em> 。</p>

<h3 id="GBeans-OfflineDeployment">离线部署</h3>

<p>当Geronimo服务器未运行时，可以在其配置中添加一个GBean，然后在服务器运行时启动GBean。</p>

<p>首先，将GBean“分发”到服务器：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -jar bin/deployer.jar distribute mygbean-plan.xml
</pre>
</div></div></li></ul>



<p>这将完成将GBean送入服务器的所有必要操作，但是在服务器启动时GBean不会运行。</p>

<p>现在，启动服务器：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -jar bin/server.jar
</pre>
</div></div></li></ul>



<p>完成后，启动您的GBean：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -jar bin/deployer.jar start example1/MyGBean
Username: system
Password: manager
</pre>
</div></div></li></ul>



<p>如上所示，系统将提示您输入用户名和密码以启动GBean。使用上面显示的值。</p>

<p>请注意，除非您“在后台”启动服务器，否则将需要另一个命令提示符来启动GBean。</p>

<p>启动后，您应该在服务器日志中看到以下内容：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>11:43:11,652 INFO  [ConfigurationManagerImpl] Loaded Configuration geronimo.config:name="example1/MyGBean"
11:43:11,717 INFO  [Configuration] Started configuration example1/MyGBean
</pre>
</div></div></li></ul>



<h3 id="GBeans-OnlineDeployment">在线部署</h3>

<p>当您已经在运行服务器时，可以通过以下步骤分发和启动GBean：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -jar bin/deployer.jar deploy  mygbean-plan.xml
Username: system
Password: manager
</pre>
</div></div></li></ul>



<p>而且您会在日志中看到一条稍微不同的消息。</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>11:44:25,340 INFO  [LocalConfigStore:config-store] Installed configuration example1/MyGBean in location 19
11:44:25,432 INFO  [ConfigurationManagerImpl] Loaded Configuration geronimo.config:name="example1/MyGBean"
11:44:25,446 INFO  [Configuration] Started configuration example1/MyGBean
</pre>
</div></div></li></ul>



<h1 id="GBeans-HowtorunGBean">如何运行GBean</h1>

<h2 id="GBeans-Step3:YourfirstGBeaninaction">步骤3：您的第一个GBean投入使用</h2>

<p>部署完成后，从Geronimo主目录启动以下命令：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -jar bin/server.jar example1/MyGBean
</pre>
</div></div></li></ul>



<p>您应该在控制台上看到以下输出：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>$ java -jar bin/server.jar example1/MyGBean
15:29:42,376 WARN  [ToolsJarHack] Could not all find java compiler: lib\tools.jar file not found in C:\Program Files\Jav
a\j2re1.4.2_05 or C:\Program Files\Java
15:29:42,386 INFO  [Daemon] Server startup begun
15:29:43,230 INFO  [Kernel] Starting boot
15:29:43,612 INFO  [MBeanServerFactory] Created MBeanServer with ID: 17ce4e7:ff076f1f39:-8000:JLASKOWSKI:1
15:29:43,833 INFO  [Kernel] Booted
15:29:43,963 INFO  [ConfigurationManagerImpl] Loaded Configuration geronimo.config:name="org/apache/geronimo/System"
15:29:44,586 INFO  [Configuration] Started configuration org/apache/geronimo/System
15:29:45,048 INFO  [RMIRegistryService] Started RMI Registry on port 1099
15:29:45,139 INFO  [ReadOnlyRepository] Repository root is file:/C:/projects/geronimo/trunk/modules/assembly/target/geronimo-1.0-SNAPSHOT/repository/
15:29:45,229 INFO  [ConfigurationManagerImpl] Loaded Configuration geronimo.config:name="MyGBean"
15:29:45,249 INFO  [Configuration] Started configuration MyGBean
15:29:45,249 INFO  [Daemon] Server startup completed
</pre>
</div></div></li></ul>



<p>“ <em>已加载的配置</em> ”行<em>geronimo.config：name =“ MyGBean”</em>表示您的第一个GBean已真正部署并运行！欢呼！</p>

<p>您可能还希望在Geronimo调试控制台中查看有关gbean的一些信息。使用以下命令启动服务器：</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>java -jar bin/server.jar org/apache/geronimo/DebugConsole example1/MyGBean
</pre>
</div></div></li></ul>



<p>并在浏览器中打开<a shape="rect" class="external-link" href="http://localhost:8080/debug-tool/index.vm?ObjectNameFilter=*%3Aname%3D"MyGBean"&MBeanName=geronimo.config%3Aname%3D"MyGBean"" rel="nofollow">http：// localhost：8080 / debug-tool / index.vm？ObjectNameFilter = *％3Aname％3D％22MyGBean％22＆MBeanName = geronimo.config％3Aname％3D％22MyGBean％22</a> 。</p>

<p>这是如何以编程方式运行gbean的方法：</p>

<p>创建了这样的GBean来启动/停止/设置值/调用操作，并且GBean服务使用如下代码</p>

<ul><li>
<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>name = new ObjectName("test:name=AxisGBean");
kernel = new Kernel("test.kernel", "test");
kernel.boot();
ClassLoader cl = getClass().getClassLoader();
ClassLoader myCl = new URLClassLoader(new URL[0], cl);
GBeanMBean gbean = new GBeanMBean(AxisGbean.getGBeanInfo(), myCl);
gbean.setAttribute("name", "Test");

kernel.loadGBean(name, gbean);
Kernel.startGBean(name);
System.out.println(kernel.getMBeanServer().getAttribute(name, "state"));
System.out.println(kernel.getMBeanServer().invoke(name, "echo", new
Object[]{"Hello"}, new String[]{String.class.getName()}));

kernel.stopGBean(name);
kernel.unloadGBean(name)
</pre>
</div></div></li></ul>



<h1 id="GBeans-Otherquestionstobeansweredlater">其他问题待稍后回答</h1>

<p>如果您可以回答一些问题，请这样做！</p>

<h2 id="GBeans-WhatisGBeanMetaData?">什么是GBean元数据？</h2>

<h2 id="GBeans-WhatdoestheGBeanInfoclassrepresent?">GBeanInfo类代表什么？</h2>

<h2 id="GBeans-CanIconfiguremyGBeanusingaflatfile?">我可以使用平面文件配置GBean吗？</h2>

<h2 id="GBeans-HowdoImanagetheattributesofmyGBeanremotely?">如何远程管理GBean的属性？</h2>

<p>GBean通过JMX内核作为MBean公开。因此，可以像控制“标准” MBean一样控制/查询它们。</p>

<p>例如，要远程管理给定的MBean，可以利用Geronimo支持的Java管理扩展远程API（JSR 160）。</p>

<p>更准确地说，需要启用并运行两个服务才能在服务器端启用由JSR 160定义的RMI连接器：</p>

<ul><li><em>org.apache.geronimo.system。RMI <a shape="rect" class="unresolved" href="#">RegistryService</a></em> ：在指定端口上启动RMI注册表。该服务是“系统”计划的一部分，换句话说，它始终会启动；和</li><li><em>org.apache.geronimo.jmx远程处理。JMXConnector</em> ：它创建一个RMI连接器服务器并将其导出到嵌入在其URL中的RMI注册表中（有关URL格式的更多详细信息，请参见JSR 160）。您可以查看<em>j2ee-server</em>计划以获取有关其GBean定义的更多详细信息。</li></ul>


<p>如果以上两个服务正在运行，那么以下代码片段将为您提供<em>M <a shape="rect" class="unresolved" href="#">BeanServerConnection</a></em> ：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>        Map environment = new HashMap();
        String[] credentials = new String[]{&lt;username&gt;, &lt;password&gt;};
        environment.put(JMXConnector.CREDENTIALS, credentials);

        JMXServiceURL address = new JMXServiceURL(&lt;URI defined by the JMXConnector  service&gt;);
        JMXConnector jmxConnector = JMXConnectorFactory.connect(address, environment);
        MBeanServerConnection mbServerConnection = jmxConnector.getMBeanServerConnection();
</pre>
</div></div>

<p>注意： <em>用户名</em>和<em>密码</em>必须由<em>org.apache.geronimo.security.jaas定义<em>。具有由<em>org.apache.geronimo.jmxremoting的<em>applicationConfigName</em>属性定义的名称的<a shape="rect" class="unresolved" href="#">ConfigurationEntry</a></em> <em>。JMXConnector</em>服务。</em></em></p><em>

<p>话虽如此，如果您不想编写代码，也可以使用支持JSR 160的JMX控制台。</p>

<h2 id="GBeans-HowdoIcallmethodsonaGBeandeployedintheserverfromaJ2EEApp?">如何从J2EE App调用服务器中部署的GBean上的方法？</h2>

<p>首先通过调用<a shape="rect" class="unresolved" href="#">KernelRegistry</a> .getSingleKernel（）获得内核的句柄，然后在Kernel接口中使用invoke方法。例如：</p>

<div class="preformatted panel" style="border-width:1px"><div class="preformattedContent panelContent">
<pre>        ObjectName obj = new ObjectName("geronimo.example:name=EchoServer");
        Kernel kernel = KernelRegistry.getSingleKernel();
        String outputs=(String)kernel.invoke(obj,"hello");
</pre>
</div></div>

<p>hello（）是GBean上的方法。只要GBean在部署J2EE应用程序的同一服务器实例中运行，就可以使用。</p>

<h1 id="GBeans-ArticleaboutGBeans">关于GBeans的文章</h1>

<p><a shape="rect" class="external-link" href="http://wiki.apache.org/geronimo/GBeansArticle1">Geronimo GBeans体系结构</a> </p></em></div><em>
        </em></div><em>

                  <div class="tabletitle">儿童<span class="smalltext" id="show" style="display:inline"><a href="javascript:void(0);">节目儿童</a></span> <span class="smalltext" id="hide" style="display:none"><a href="javascript:void(0);">隐藏儿童</a></span>
          </div>
          <div class="greybox" id="children" style="display:none">
                                      <a href="https://cwiki.apache.org/confluence/display/GMOxDEV/GBean+Annotations" title="GBean注释">GBean注释</a> <span class="smalltext">（Apache Geronimo开发）</span>
              <br>
                      </div>
        
      </em></div><em>
    </em></div><em>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody><tr>
          <td align="left" valign="middle" class="footer">
              
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="美味的"> <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">在Delicious上添加书签</a> <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="掘客！"> <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)+'&topic=programming');">挖这个</a> <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : GBeans';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
              
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">隐私权政策</a> -版权所有©2003-2011，Apache软件基金会，根据<a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0</a>许可<a href="http://www.apache.org/licenses/LICENSE-2.0">。</a>  
          </td>
        </tr>
    </tbody></table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  

</em></body></html>