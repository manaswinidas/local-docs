<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="http://geronimo.apache.org/style/default.css">
    <LINK rel="SHORTCUT ICON" href="http://geronimo.apache.org/images/favicon.ico">
    <LINK rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
    <META name="Description" content="OSGI conversion tips" />
    <META name="Keywords" content="Apache Geronimo development documentation OSGI conversion tips" />
    <META name="Owner" content="dev@geronimo.apache.org" />
    <META name="Robots" content="index, follow" />
    <META name="Security" content="Public" />
    <META name="Source" content="wiki template" />
    <META name="DC.Date" scheme="iso8601" content="2009-01-06" />
    <META name="DC.Language" scheme="rfc1766" content="en" />
    <META name="DC.Rights" content="Copyright Â© 2003-2011, The Apache Software Foundation" />
    <META http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>

    <script src="http://geronimo.apache.org/functions.js" type="text/javascript"></script>


    <title>Apache Geronimo Development : OSGI conversion tips</title>

  </head>

  <body onload="init()">

    <table valign="top" border="0" cellspacing="0" cellpadding="0" width="100%" background="http://geronimo.apache.org/images/top_bgstretch_1x64.gif">
      <tr>
        <td valing="top" align="left">
          <img src="http://geronimo.apache.org/images/topleft_logo_437x64.gif" border="0">
        </td>
      </tr>
    </table>

    <table border="0" cellpadding="2" cellspacing="0" width="100%">
      <tr class="topBar">
        <td align="left" valign="middle" class="topBarDiv" align="left" nowrap>
          <a href="/geronimo"> Home</a> >&nbsp;<a href="index.html">Index</a>&nbsp;&gt;&nbsp;<a href="osgi-conversion-tips.html">OSGI conversion tips</a>
        </td>
        <td align="right" valign="middle" nowrap>
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="hidden" name="oe" value="UTF-8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
        </td>
      </tr> 
    </table>

    <div id="PageContent">
      <div class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="http://geronimo.apache.org/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <div style="margin: 0px 10px 0px 10px" class="smalltext">Apache Geronimo Development</div>
        <div style="margin: 0px 10px 8px 10px"  class="pagetitle">OSGI conversion tips</div>

        <div class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
<!-- -->         
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=5603340">
            <img src="http://geronimo.apache.org/images/icons/notep_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Edit Page"></a>
            <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=5603340">Edit Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">
            <img src="http://geronimo.apache.org/images/icons/browse_space.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>
            <a href="https://cwiki.apache.org/confluence/pages/listpages.action?key=GMOxDEV">Browse Space</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=5603340">
            <img src="http://geronimo.apache.org/images/icons/add_page_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add Page"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=GMOxDEV&fromPageId=5603340">Add Page</a>
          &nbsp;
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=5603340">
            <img src="http://geronimo.apache.org/images/icons/add_blogentry_16.gif"
                 height="16" width="16" border="0" align="absmiddle" title="Add News"></a>
          <a href="https://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=GMOxDEV&fromPageId=5603340">Add News</a>
<!-- -->	 
        </div>
      </div>

      <div class="pagecontent">
        <div class="wiki-content">
          <div class="wiki-content maincontent"><h2 id="OSGIconversiontips-CollectionofOSGiconversiontips">Collection of OSGi conversion tips</h2>

<div class="toc-macro client-side-toc-macro" data-headerelements="H3,H4,H5,H6,H7"></div>

<h3 id="OSGIconversiontips-jarswithxmlbeanscompilation">jars with xmlbeans compilation</h3>
<p>To use xmlbeans generated code you need access to the SchemaTypeSystemImpl, which is not imported by the maven-bundle-plugin.  So you need to add something like this to the pom:</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
                &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;instructions&gt;
                        &lt;!--packages containing &quot;impl&quot; or &quot;internal&quot; are excluded by default --&gt;
                        &lt;Import-Package&gt;org.apache.xmlbeans.impl.schema;version=&quot;2.4&quot;,*&lt;/Import-Package&gt;
                        &lt;!--&lt;_versionpolicy&gt;[$(version;==;$(@)),$(version;+;$(@)))&lt;/_versionpolicy&gt;--&gt;
                    &lt;/instructions&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
]]></script>
</div></div>

<p>Also, any package we may have with "impl" or "internal" needs to be explicitly listed in the Export-Packages.</p>

<p>If the xmlbeans compilation is to be used by an xmlbeans compilation in another bundle (for example, the "environment" element defined in the geronimo-service-builder compilation), extra steps are needed to make these available.  In the defining bundle, all of the generated classes AND all of the packages under the schemaorg_apache_xmlbeans directory need to be exported.  Because the bnd tool omits impl directories by default, these must be explicitly listed.  Here's a sample from the geronimo-service-builder:</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
                    &lt;instructions&gt;
                        &lt;!--&lt;_versionpolicy&gt;[$(version;==;$(@)),$(version;+;$(@)))&lt;/_versionpolicy&gt;--&gt;
                        &lt;Import-Package&gt;org.apache.xmlbeans.impl.schema,*&lt;/Import-Package&gt;
                        &lt;Export-Package&gt;
                            org.apache.geronimo.deployment.xbeans.impl,
                            org.apache.geronimo.deployment.javabean.xbeans.impl,
                            org.apache.geronimo.deployment.xbeans*,
                            org.apache.geronimo.deployment.javabean.xbeans*,
                            schemaorg_apache_xmlbeans*,
                            org.apache.geronimo.deployment.dconfigbean,
                            org.apache.geronimo.deployment.service*
                        &lt;/Export-Package&gt;
                    &lt;/instructions&gt;
]]></script>
</div></div>

<p>On the importing side, all of these classes need to be imported as well.  The schemaorg_apache_xmlbeans directory is a bit <br clear="none">
problematic because the bnd tool cannot handle wild-cards on the import unless the packages are explicitly referenced in the <br clear="none">
code.  The schemaorg packages are not referenced in the code and generate lot of cryptically named directories that are difficult to transfer over to the importing side.  For the schemaorg directories, DynamicImport-Package can be used.  This example is from the geronimo-connector-builder-1_6 plugin: </p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
                    &lt;instructions&gt;
                        &lt;!--packages containing &quot;impl&quot; or &quot;internal&quot; are excluded by default --&gt;
                        &lt;Import-Package&gt;org.apache.xmlbeans.impl.schema;version=&quot;2.4&quot;,org.apache.geronimo.deployment.xbeans.impl,org.apache.geronimo.deployment.javabean.xbeans.impl,*&lt;/Import-Package&gt;
                        &lt;DynamicImport-Package&gt;schemaorg_apache_xmlbeans.*&lt;/DynamicImport-Package&gt;
                        &lt;!--&lt;_versionpolicy&gt;[$(version;==;$(@)),$(version;+;$(@)))&lt;/_versionpolicy&gt;--&gt;
                    &lt;/instructions&gt;

]]></script>
</div></div>

<p>If the xmlbeans compilation is to be used by an xmlbeans compilation in another bundle (for example, the "environment" element defined in the geronimo-service-builder compilation), extra steps are needed to make these available.  In the defining bundle, all of the generated classes AND all of the packages under the schemaorg_apache_xmlbeans directory need to be exported.  Because the bnd tool omits impl directories by default, these must be explicitly listed.  Here's a sample from the geronimo-service-builder:</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
                    &lt;instructions&gt;
                        &lt;!--&lt;_versionpolicy&gt;[$(version;==;$(@)),$(version;+;$(@)))&lt;/_versionpolicy&gt;--&gt;
                        &lt;Import-Package&gt;org.apache.xmlbeans.impl.schema,*&lt;/Import-Package&gt;
                        &lt;Export-Package&gt;
                            org.apache.geronimo.deployment.xbeans.impl,
                            org.apache.geronimo.deployment.javabean.xbeans.impl,
                            org.apache.geronimo.deployment.xbeans*,
                            org.apache.geronimo.deployment.javabean.xbeans*,
                            schemaorg_apache_xmlbeans*,
                            org.apache.geronimo.deployment.dconfigbean,
                            org.apache.geronimo.deployment.service*
                        &lt;/Export-Package&gt;
                    &lt;/instructions&gt;
]]></script>
</div></div>

<p>On the importing side, all of these classes need to be imported as well.  The schemaorg_apache_xmlbeans directory is a bit <br clear="none">
problematic because the bnd tool cannot handle wild-cards on the import unless the packages are explicitly referenced in the <br clear="none">
code.  The schemaorg packages are not referenced in the code and generate lot of cryptically named directories that are difficult to transfer over to the importing side.  For the schemaorg directories, DynamicImport-Package can be used.  This example is from the geronimo-connector-builder-1_6 plugin: </p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
                    &lt;instructions&gt;
                        &lt;!--packages containing &quot;impl&quot; or &quot;internal&quot; are excluded by default --&gt;
                        &lt;Import-Package&gt;org.apache.xmlbeans.impl.schema;version=&quot;2.4&quot;,org.apache.geronimo.deployment.xbeans.impl,org.apache.geronimo.deployment.javabean.xbeans.impl,*&lt;/Import-Package&gt;
                        &lt;DynamicImport-Package&gt;schemaorg_apache_xmlbeans.*&lt;/DynamicImport-Package&gt;
                        &lt;!--&lt;_versionpolicy&gt;[$(version;==;$(@)),$(version;+;$(@)))&lt;/_versionpolicy&gt;--&gt;
                    &lt;/instructions&gt;

]]></script>
</div></div>

<h3 id="OSGIconversiontips-Non-bundleinterference">Non-bundle interference</h3>
<p>Many problems with building plugins are caused by non-bundle dependencies getting installed in felix rather than bundleized equivalents.  Unfortuneately it looks like felix only says "non-framework bundles cannot be started" without telling us the location of the non-bundle.  Running</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
mvn dependency:tree
]]></script>
</div></div>
<p>helps to find the bad dependencies.  On a related note, generally you have to exclude original jars from the dependencyManagement dependency entry of a bundleized repackaging.  This seems like a serious defect in maven-bundle-plugin.</p>

<h3 id="OSGIconversiontips-Assembleaservertomakesureeachsetofpluginsstarts.">Assemble a server to make sure each set of plugins starts.</h3>
<p>I think it's a good idea to assemble a server for each set of plugins to make sure they at least start.  Here's how:</p>

<ol><li>run
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
mvn archetype:create \
   -DarchetypeGroupId=org.apache.geronimo.buildsupport \
   -DarchetypeArtifactId=geronimo-assembly-archetype \
   -DarchetypeVersion=3.0-SNAPSHOT \
   -DgroupId=org.apache.geronimo.plugins \
   -DartifactId=geronimo-&lt;foo&gt;-server
]]></script>
</div></div> 
where &lt;foo&gt; is your set of plugins</li><li>add it to svn</li><li>add the plugins you want to test as depedendencies</li><li>add this to start the server when run with -Pit<br clear="none">
in plugin management:
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
                &lt;plugin&gt;
                    &lt;groupId&gt;org.apache.geronimo.buildsupport&lt;/groupId&gt;
                    &lt;artifactId&gt;geronimo-maven-plugin&lt;/artifactId&gt;
                    &lt;version&gt;${version}&lt;/version&gt;

                    &lt;configuration&gt;
                       &lt;assemblyArchive&gt;${project.build.directory}/${pom.artifactId}-${pom.version}-bin.zip&lt;/assemblyArchive&gt;
                        &lt;optionSets&gt;
                            &lt;optionSet&gt;
                                &lt;id&gt;morememory&lt;/id&gt;
                                &lt;options&gt;
                                    &lt;option&gt;-Xmx512m&lt;/option&gt;
                                    &lt;option&gt;-XX:MaxPermSize=128m&lt;/option&gt;
                                &lt;/options&gt;
                            &lt;/optionSet&gt;

                            &lt;optionSet&gt;
                                &lt;id&gt;debug&lt;/id&gt;
                                &lt;options&gt;
                                    &lt;option&gt;-Xdebug&lt;/option&gt;
                                    &lt;option&gt;-Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n&lt;/option&gt;
                                &lt;/options&gt;
                            &lt;/optionSet&gt;
                        &lt;/optionSets&gt;
                    &lt;/configuration&gt;
                    &lt;executions&gt;
                         &lt;execution&gt;
                             &lt;id&gt;start&lt;/id&gt;
                             &lt;phase&gt;pre-integration-test&lt;/phase&gt;
                             &lt;goals&gt;
                                 &lt;goal&gt;start-server&lt;/goal&gt;
                             &lt;/goals&gt;
                             &lt;configuration&gt;
                                 &lt;assemblyId&gt;${it-server}&lt;/assemblyId&gt;
                                 &lt;logOutput&gt;true&lt;/logOutput&gt;
                                 &lt;background&gt;true&lt;/background&gt;
                                 &lt;verifyTimeout&gt;300&lt;/verifyTimeout&gt;
                                 &lt;refresh&gt;true&lt;/refresh&gt;
                                 &lt;optionSets&gt;
                                     &lt;optionSet&gt;
                                         &lt;id&gt;default&lt;/id&gt;
                                         &lt;options&gt;
                                            &lt;option&gt;-XX:MaxPermSize=128m&lt;/option&gt;
                                         &lt;/options&gt;
                                     &lt;/optionSet&gt;

                                     &lt;optionSet&gt;
                                          &lt;id&gt;morememory&lt;/id&gt;
                                          &lt;options&gt;
                                              &lt;option&gt;-Xmx512m&lt;/option&gt;
                                              &lt;option&gt;-XX:MaxPermSize=128m&lt;/option&gt;
                                          &lt;/options&gt;
                                      &lt;/optionSet&gt;

                                      &lt;optionSet&gt;
                                          &lt;id&gt;debug&lt;/id&gt;
                                          &lt;options&gt;
                                              &lt;option&gt;-Xdebug&lt;/option&gt;
                                              &lt;option&gt;-Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n&lt;/option&gt;
                                          &lt;/options&gt;
                                      &lt;/optionSet&gt;
                                 &lt;/optionSets&gt;
                             &lt;/configuration&gt;
                         &lt;/execution&gt;
                         &lt;execution&gt;
                             &lt;id&gt;stop&lt;/id&gt;
                             &lt;phase&gt;install&lt;/phase&gt;
                             &lt;goals&gt;
                                 &lt;goal&gt;stop-server&lt;/goal&gt;
                             &lt;/goals&gt;
                         &lt;/execution&gt;
                     &lt;/executions&gt;
                &lt;/plugin&gt;
]]></script>
</div></div>
and a profile
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;it&lt;/id&gt;
            &lt;build&gt;
                &lt;plugins&gt;
                    &lt;plugin&gt;
                        &lt;groupId&gt;org.apache.geronimo.buildsupport&lt;/groupId&gt;
                        &lt;artifactId&gt;geronimo-maven-plugin&lt;/artifactId&gt;
                    &lt;/plugin&gt;
                &lt;/plugins&gt;
            &lt;/build&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
]]></script>
</div></div></li></ol>


<p>Note that at the moment the -Pit doesn't actually work, you have to try to start the server by hand</p>

<h3 id="OSGIconversiontips-Classloadingproblems">Classloading problems</h3>
<p>Frequently, you'll see build problems with attempting to load a class when starting a configuration.  Most of the time, this is caused by a bundle resolution problem that occurs earlier, but the information has been swallowed.  If you use the -X option on the build, the resolution error will be given earlier in the build and you can generally figure out what's missing from that. </p>

<p>Occasionally, the resolution error will be a very generic "Constraint violation" without much information on what actually failed.  Turning on debug logging in Felix will give some information, but I've found that building Felix with the following patch applied helps diagnose the problem more quickly: </p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
Index: src/main/java/org/apache/felix/framework/searchpolicy/Resolver.java
===================================================================
--- src/main/java/org/apache/felix/framework/searchpolicy/Resolver.java	(revision 831350)
+++ src/main/java/org/apache/felix/framework/searchpolicy/Resolver.java	(working copy)
@@ -332,8 +332,12 @@
                     }
                     else
                     {
+                        System.out.println(
+                            &quot;Constraint violation for &quot; + importer
+                            + &quot; detected; module can see &quot;
+                            + rp + &quot; and &quot; + rpUses);
                         m_logger.log(
-                            Logger.LOG_DEBUG,
+                            Logger.LOG_ERROR,
                             &quot;Constraint violation for &quot; + importer
                             + &quot; detected; module can see &quot;
                             + rp + &quot; and &quot; + rpUses);
@@ -705,7 +709,7 @@
         catch (ResolveException ex)
         {
             m_logger.log(
-                Logger.LOG_DEBUG,
+                Logger.LOG_ERROR,
                 &quot;Constraint violation for &quot; + targetModule + &quot; detected.&quot;,
                 ex);
             return false;
@@ -789,7 +793,7 @@
         catch (ResolveException ex)
         {
             m_logger.log(
-                Logger.LOG_DEBUG,
+                Logger.LOG_ERROR,
                 &quot;Constraint violation for &quot; + targetModule + &quot; detected.&quot;,
                 ex);
             return false;
@@ -824,7 +828,7 @@
         catch (ResolveException ex)
         {
             m_logger.log(
-                Logger.LOG_DEBUG,
+                Logger.LOG_ERROR,
                 &quot;Constraint violation for &quot; + targetModule + &quot; detected.&quot;,
                 ex);
             return false;
@@ -875,7 +879,7 @@
                     else
                     {
                         m_logger.log(
-                            Logger.LOG_DEBUG,
+                            Logger.LOG_ERROR,
                             &quot;Constraint violation for &quot; + targetModule
                             + &quot; detected; module can see &quot;
                             + rp + &quot; and &quot; + rpUses);
Index: src/main/java/org/apache/felix/framework/ModuleImpl.java
===================================================================
--- src/main/java/org/apache/felix/framework/ModuleImpl.java	(revision 831350)
+++ src/main/java/org/apache/felix/framework/ModuleImpl.java	(working copy)
@@ -1295,7 +1295,7 @@
 
     public String toString()
     {
-        return m_id;
+        return getSymbolicName() + &quot; (&quot; + m_id + &quot;)&quot;;
     }
 
     private synchronized ModuleClassLoader getClassLoader()
@@ -1590,12 +1590,12 @@
 
             try
             {
-                dexFileClassLoadDex = dexFileClass.getMethod(&quot;loadDex&quot;, 
+                dexFileClassLoadDex = dexFileClass.getMethod(&quot;loadDex&quot;,
                     new Class[]{String.class, String.class, Integer.TYPE});
             }
             catch (Exception ex)
             {
-                // Nothing we need to do 
+                // Nothing we need to do
             }
             dexFileClassConstructor = dexFileClass.getConstructor(
                 new Class[] { java.io.File.class });
@@ -1717,7 +1717,7 @@
 
                         if (clazz == null)
                         {
-                            int activationPolicy = 
+                            int activationPolicy =
                                 ((BundleImpl) getBundle()).isDeclaredActivationPolicyUsed()
                                 ? ((BundleImpl) getBundle()).getCurrentModule().getDeclaredActivationPolicy()
                                 : IModule.EAGER_ACTIVATION;
@@ -1873,8 +1873,8 @@
                 {
                     if (m_dexFileClassLoadDex != null)
                     {
-                        dexFile = m_dexFileClassLoadDex.invoke(null, 
-                            new Object[]{content.getFile().getAbsolutePath(), 
+                        dexFile = m_dexFileClassLoadDex.invoke(null,
+                            new Object[]{content.getFile().getAbsolutePath(),
                                 content.getFile().getAbsolutePath() + &quot;.dex&quot;, new Integer(0)});
                     }
                     else

]]></script>
</div></div>



<h3 id="OSGIconversiontips-Loggingconversion">Logging conversion</h3>

<p>When converting plugins make sure to avoid the following dependencies: <code>log4j</code>, <code>jcl-over-slf4j</code>,<br clear="none">
<code>jul-to-slf4j</code>, <code>slf4j-api</code>, or <code>slf4j-log4j12</code>. Instead use <code>pax-logging-api</code>. This bundle exports all of these logging API. </p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
            &lt;dependency&gt;
                &lt;groupId&gt;org.ops4j.pax.logging&lt;/groupId&gt;
                &lt;artifactId&gt;pax-logging-api&lt;/artifactId&gt;              
            &lt;/dependency&gt;
]]></script>
</div></div>

<p>The <code>pax-logging-api</code> together with <code>pax-logging-service</code> provides a logging service in the OSGi environment that works with all commonly used logging API.</p>

<h3 id="OSGIconversiontips-GeneralOSGitips">General OSGi tips</h3>

<ul><li>The Bundle-ClassPath can refer to a directory within the bundle. Make sure there is an entry just for that directory in the JAR file of the bundle. Otherwise, classes might not be loaded from that directory.</li><li>Always specify some wild mark in the filePattern (the second argument) in the bundle.findEntries() call to ensure the same set of entries is returned on different OSGi frameworks.</li></ul>
</div>
        </div>

        
      </div>
    </div>

    <!-- footer -->
    <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tr>
          <td align="left" valign="middle" class="footer">
            &nbsp;&nbsp;
            <img src="http://static.delicious.com/img/delicious.small.gif" height="10" width="10" alt="Delicious" />
            <a href="http://delicious.com/save" onclick="window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title),'delicious','toolbar=no,width=550,height=550'); return false;">Bookmark this on Delicious</a>
            &nbsp;&nbsp;
            <img src="http://digg.com/img/badges/16x16-digg-guy.gif" width="16" height="16" alt="Digg!" />
            <a href="" onclick="window.open('http://digg.com/submit?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)+'&amp;topic=programming');">Digg this</a>
            <!-- Slicker, but no text
            <script type="text/javascript">
              digg_skin = 'icon';
              digg_window = 'new';
              digg_title = 'Apache Geronimo Development : OSGI conversion tips';
              digg_topic = 'programming';
            </script>
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
            -->
            &nbsp;&nbsp;
          </td>
          <td align="right" valign="middle" class="footer">
            <a href="http://cwiki.apache.org/GMOxPMGT/geronimo-privacy-policy.html">Privacy Policy</a>&nbsp;&nbsp;-&nbsp;&nbsp;
            Copyright &#169; 2003-2011, The Apache Software Foundation, Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">ASL 2.0.</a>&nbsp;&nbsp;
          </td>
        </tr>
    </table> 

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4380560-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>
