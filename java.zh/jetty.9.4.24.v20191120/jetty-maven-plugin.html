<html ><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>配置Jetty Maven插件</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="jetty, servlet, servlet-api, cometd, http, websocket, eclipse, maven, java, server, software"><link rel="home" href="index.html" title="Jetty"><link rel="up" href="maven-and-jetty.html" title="Chapter 23. Maven and Jetty"><link rel="prev" href="maven-and-jetty.html" title="Chapter 23. Maven and Jetty"><link rel="next" href="jetty-maven-scanning.html" title="Files Scanned by the Jetty Maven Plugin"><link rel="shortcut icon" href="images/favicon.ico" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><link rel="stylesheet" href="css/highlighter/foundation.css"><script src="js/highlight.pack.js"></script><script>
      hljs.initHighlightingOnLoad();
    </script><link type="text/css" rel="stylesheet" href="css/font-awesome/font-awesome.min.css"></head><body bgcolor="white"  text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><tbody><tr><td style="width:25%"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-header-logo.png" alt="Jetty标志"></a><br><span style="font-size:small">版本：9.4.24.v20191120</span></td><td style="width:50%"></td></tr></tbody></table><div class="navheader" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><table width="100%" summary="Navigation header"><tbody><tr><th colspan="3" align="center">配置Jetty Maven插件</th></tr><tr><td width="20%" align="left"><a href="maven-and-jetty.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><th width="60%" align="center">第23章Maven和Jetty<br><a href="index.html" accesskey="p"><i class="fa fa-home" aria-hidden="true"></i>家</a></th><td width="20%" align="right"> <a href="jetty-maven-scanning.html" accesskey="n">下一个<i class="fa fa-chevron-right" aria-hidden="true"></i></a></td></tr></tbody></table><hr></div><div class="jetty-callout" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><h5 class="callout"><a href="http://www.webtide.com/">通过<span class="website">www.webtide.com</span>与Jetty核心开发人员联系。</a></h5><p>内部/客户项目的私人支持...自定义扩展和发行版...无限期支持的版本快照...您的应用程序和Ajax / Comet项目的可伸缩性指南...赞助功能开发的开发服务</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear:both"><a name="jetty-maven-plugin"></a>配置Jetty Maven插件</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="jetty-maven-plugin.html#get-up-and-running">快速入门：启动并运行</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#running-and-deploying">支持的目标</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#configuring-jetty-container">配置Jetty容器</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#configuring-your-webapp">配置您的WebApp</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#jetty-run-goal">Jetty</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#running-assembled-webapp-as-war">Jetty：战争</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#running-assembled-webapp-as-expanded-war">Jetty：爆炸</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#deploy-war-running-pre-assembled-war">Jetty：部署战争</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#jetty-run-forked-goal">Jetty：分叉</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#jetty-run-distro-goal">Jetty：运行发行</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#jetty-start-goal">Jetty：开始</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#jetty-stop-goal">Jetty：停止</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#jetty-effective-web-xml">Jetty：有效的网络XML</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#using-overlaid-wars">使用叠加战</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#configuring-security-settings">配置安全设置</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#using-multiple-webapp-root-directories">使用多个Webapp根目录</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#running-more-than-one-webapp">运行多个Webapp</a></span></dt><dt><span class="section"><a href="jetty-maven-plugin.html#setting-system-properties">设置系统属性</a></span></dt></dl></div><p>Jetty Maven插件对于快速开发和测试很有用。您可以将其添加到根据Maven默认设置构造的任何webapp项目中。然后，该插件可以定期扫描您的项目以进行更改，并在发现任何问题后自动重新部署该Web应用。这通过消除构建和部署步骤来提高开发周期的生产力：您使用IDE来对项目进行更改，并且运行的Web容器会自动选择它们，从而使您可以立即对其进行测试。</p><div class="blockquote"><blockquote class="blockquote"><div class="important" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-plus" aria-hidden="true"></i>重要</h3><p>您应该为此插件使用Maven 3.3+。</p></div></blockquote></div><p>尽管Jetty Maven插件对于开发非常有用，但我们不建议在生产能力中使用它。为了使插件正常工作，它需要利用许多内部Maven API，而Maven本身不是生产部署工具。我们建议使用传统的分发部署方法或使用<a class="link" href="advanced-embedding.html" title="第21章嵌入">嵌入式Jetty。</a></p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="get-up-and-running"></a>快速入门：启动并运行</h3></div></div></div><p>首先，添加<code class="literal">jetty-maven-plugin</code>给你<code class="literal">pom.xml</code>定义：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
&lt;/plugin&gt;</code></pre><p>然后，从与您的根目录相同的目录<code class="literal">pom.xml</code> ，输入：</p><div class="screenexample"><pre class="screen">mvn jetty:run</pre></div><p>这将启动Jetty并在<a class="link" href="http://localhost:8080/" target="_top">http：// localhost：8080 /</a>上提供您的项目。</p><p>Jetty将继续运行，直到您停止它。在运行时，它会定期扫描项目文件的更改。如果保存更改并重新编译类文件，Jetty将重新部署您的Web应用程序，您可以立即测试刚刚进行的更改。</p><p>您可以使用<code class="literal">ctrl-c</code>在运行它的终端窗口中。</p><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>正在运行的Jetty实例及其部署的Webapp的类路径由Maven管理，可能与您期望的不完全相同。例如：可能是通过本地存储库而不是通过<code class="literal">WEB-INF/lib</code>目录。</p></div></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="running-and-deploying"></a>支持的目标</h3></div></div></div><p>Jetty Maven插件具有许多独特的Maven目标。可以说，最有用的是<code class="literal">run</code>在未组装的Webapp上运行Jetty的目标。还有其他目标可以帮助您完成不同的任务。例如，您可能需要在Jetty的分支实例中运行Webapp，而不是在运行Maven的进程中运行。或者您可能希望在希望部署Web应用程序的Maven生命周期阶段进行更精细的控制。完成这些任务有不同的目标，还有其他几个目标。</p><p>要查看Jetty Maven插件支持的所有目标的列表，请执行以下操作：</p><div class="screenexample"><pre class="screen">mvn jetty:help</pre></div><p>除了描述之外，要查看可以为特定目标配置的参数的详细列表，请执行以下操作：</p><div class="screenexample"><pre class="screen">mvn jetty:help -Ddetail=true -Dgoal= &lt;goal name&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-jetty-container"></a>配置Jetty容器</h3></div></div></div><p>这些配置元素设置了Webapp在其中执行的Jetty环境。它们是大多数目标的共同点：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">httpConnector</span></dt><dd><p class="simpara">可选的。如果未指定，Jetty将创建一个侦听端口8080的<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/server/ServerConnector.html" target="_top">ServerConnector</a>实例。您可以使用system属性更改此默认端口号<code class="literal">jetty.http.port</code>例如，在命令行上， <code class="literal">mvn -Djetty.http.port=9999 jetty:run</code> 。或者，您可以使用此配置元素来设置ServerConnector的信息。以下是有效的配置子元素：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">港口</span></dt><dd>侦听连接器的端口号。默认为8080。</dd><dt><span class="term">主办</span></dt><dd>连接器侦听的特定接口。默认情况下，所有接口。</dd><dt><span class="term">名称</span></dt><dd>连接器的名称，可用于<a class="link" href="serving-webapp-from-particular-port.html" title="从特定端口/连接器服务WebApp">配置上下文以仅在特定连接器上响应</a> 。</dd><dt><span class="term">空闲超时</span></dt><dd><p class="simpara">连接的最大空闲时间。</p><p class="simpara">您可以改为在标准<a class="link" href="jetty-xml-config.html" title="jetty.xml">jetty xml配置文件中</a>配置连接器，然后将其位置放入<code class="literal">jettyXml</code>参数。请注意，由于Jetty 9.0，因此不再可以直接在pom.xml中配置<a class="link" href="jetty-maven-plugin.html#maven-config-https" title="配置Https连接器">https连接器</a> ：您需要<a class="link" href="jetty-maven-plugin.html#maven-config-https" title="配置Https连接器">使用jetty xml配置文件来执行此操作</a> 。</p></dd></dl></div></dd><dt><span class="term">jettyXml</span></dt><dd>可选的。除任何插件配置参数外，以逗号分隔的Jetty xml文件位置列表。如果要部署其他Web应用程序，处理程序，特定类型的连接器等，或者有其他无法从插件配置的Jetty对象，则可以使用它。</dd><dt><span class="term">scanIntervalSeconds</span></dt><dd>两次扫描Web应用程序之间的暂停（以秒为单位），以检查更改并在检测到任何变化时自动进行热重新部署。
<span class="strong"><strong>默认情况下，该值为0，这将禁用热部署扫描。</strong></span>大于0的数字将启用它。</dd><dt><span class="term">重装</span></dt><dd>默认值为“自动”，与非零的<span class="strong"><strong><span class="emphasis"><em>scanIntervalSeconds</em></span></strong></span>结合使用时，在检测到更改时会自动进行热重新部署。改为设置为“ manual”，以通过在运行插件的控制台中键入换行来触发扫描。当您要进行一系列更改之前，要忽略这些更改，这可能会很有用。在这种情况下，请使用<code class="literal">reload</code>参数。</dd><dt><span class="term">dumpOnStart</span></dt><dd>可选的。默认值为false。如果为true，则jetty将在启动时转储服务器结构。</dd><dt><span class="term">loginServices</span></dt><dd>可选的。的列表<code class="literal">org.eclipse.jetty.security.LoginService</code>实现。请注意，没有默认领域。如果您在自己的领域<code class="literal">web.xml</code>您可以在此处指定相应的领域。您可以改为在jetty xml文件中配置登录服务，并将其位置添加到<code class="literal">jettyXml</code>参数。</dd><dt><span class="term">requestLog</span></dt><dd><p class="simpara">可选的。一个的实现<code class="literal">org.eclipse.jetty.server.RequestLog</code>请求日志界面。遵循NCSA格式的实现可通过以下方式获得： <code class="literal">org.eclipse.jetty.server.NCSARequestLog</code> 。还有其他三种方法来配置RequestLog：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">在Jetty xml配置文件中，如<code class="literal">jettyXml</code>参数。</li><li class="listitem">在上下文xml配置文件中，如<code class="literal">contextXml</code>参数。</li><li class="listitem">在里面<code class="literal">webApp</code>元件。</li></ul></div><p class="simpara">有关更多信息，请参见<a class="link" href="configuring-jetty-request-logs.html" title="配置Jetty请求日志">配置请求日志</a> 。</p></dd><dt><span class="term">服务器</span></dt><dd>从Jetty 9.3.1开始是可选的。这将配置一个实例<a class="link" href="https://github.com/eclipse/jetty.project/tree/jetty-9.4.x/jetty-server/src/main/java/org/eclipse/jetty/server/Server.java" target="_top"><code class="literal">org.eclipse.jetty.server.Server</code></a>供插件使用，但是通常无需配置此设置，因为插件会自动为您配置一个。特别是，如果您使用jettyXml元素，则通常不想定义该元素，因为您可能正在使用jettyXml文件来配置带有特殊构造函数参数（例如自定义线程池）的服务器。如果您同时定义一个server元素并使用jetty xml元素，该元素指向具有以下内容的行的配置文件<code class="literal"><Configure id="Server" class="org.eclipse.jetty.server.Server"></code>那么xml配置将覆盖您在服务器中为服务器配置的配置<code class="literal">pom.xml</code> 。</dd><dt><span class="term">stopPort</span></dt><dd>可选的。用于侦听停止命令的端口。与<a class="link" href="jetty-maven-plugin.html#jetty-stop-goal" title="Jetty：停止">停止</a>或<a class="link" href="jetty-maven-plugin.html#jetty-run-forked-goal" title="Jetty：分叉">分叉</a>目标结合使用时很有用。</dd><dt><span class="term">停止键</span></dt><dd>可选的。与stopPort结合使用可停止Jetty。与停止目标或分叉目标结合使用时很有用。</dd><dt><span class="term">系统属性</span></dt><dd>可选的。允许您配置系统属性以执行插件。有关更多信息，请参见设置系统属性。</dd><dt><span class="term">systemPropertiesFile</span></dt><dd>可选的。包含要设置为执行插件的系统属性的文件。默认情况下，您在此处<span class="strong"><strong>进行的</strong></span>设置<span class="strong"><strong>不会</strong></span>覆盖已在命令行，JVM或POM中通过以下方式设置的任何系统属性： <code class="literal">systemProperties</code> 。阅读设置系统属性以了解如何强制覆盖。</dd><dt><span class="term">跳跃</span></dt><dd>默认为false。如果为true，则退出该插件的执行。与设置系统属性相同<code class="literal">-Djetty.skip</code>在命令行上。当配置Jetty以便在集成测试期间执行并且您想跳过测试时，这是最有用的。</dd><dt><span class="term">useProvidedScope</span></dt><dd>默认值为<code class="literal">false</code> 。如果为true，则依赖项与<code class="literal"><scope>provided</scope></code>被放置在<span class="emphasis"><em>容器classpath上</em></span> 。请注意，这不是webapp类路径，因为“提供”表示通常希望容器提供这些依赖关系。您应该很少需要使用它。相反，您应该将提供的依赖项复制为<code class="literal">plugin</code>代替。</dd><dt><span class="term">目标</span></dt><dd>可选的。Jetty插件目标名称的列表，这些目标名称将导致插件打印信息性消息并退出。如果要阻止用户执行您无法与项目一起使用的目标，则很有用。</dd></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="maven-config-https"></a>配置Https连接器</h4></div></div></div><p>为了配置HTTPS连接器，您需要使用jetty xml配置文件。本示例使用直接从jetty发行版etc /目录复制的文件，尽管您当然可以组成自己的xml文件。我们将使用以下文件：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">jetty.xml</span></dt><dd><p class="simpara">设置各种特征<a class="link" href="https://github.com/eclipse/jetty.project/tree/jetty-9.4.x/jetty-server/src/main/java/org/eclipse/jetty/server/Server.java" target="_top"><code class="literal">org.eclipse.jetty.server.Server</code></a>供插件使用的实例。重要的是，它设置了<a class="link" href="https://github.com/eclipse/jetty.project/tree/jetty-9.4.x/jetty-server/src/main/java/org/eclipse/jetty/server/HttpConfiguration.java" target="_top"><code class="literal">org.eclipse.jetty.server.HttpConfiguration</code></a>我们可以在配置连接器的后续xml文件中引用的元素。以下是从<a class="link" href="https://github.com/eclipse/jetty.project/tree/jetty-9.4.x/jetty-server/src/main/config/etc/jetty.xml" target="_top">jetty.xml中</a>提取的相关部分。</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;Configure id="Server" class="org.eclipse.jetty.server.Server"&gt;
  ...
    &lt;New id="httpConfig" class="org.eclipse.jetty.server.HttpConfiguration"&gt;
      &lt;Set name="secureScheme"&gt;&lt;Property name="jetty.httpConfig.secureScheme" default="https" /&gt;&lt;/Set&gt;
      &lt;Set name="securePort"&gt;&lt;Property name="jetty.httpConfig.securePort" deprecated="jetty.secure.port" default="8443" /&gt;&lt;/Set&gt;
      &lt;Set name="outputBufferSize"&gt;&lt;Property name="jetty.httpConfig.outputBufferSize" deprecated="jetty.output.buffer.size" default="32768" /&gt;&lt;/Set&gt;
      &lt;Set name="outputAggregationSize"&gt;&lt;Property name="jetty.httpConfig.outputAggregationSize" deprecated="jetty.output.aggregation.size" default="8192" /&gt;&lt;/Set&gt;
      &lt;Set name="requestHeaderSize"&gt;&lt;Property name="jetty.httpConfig.requestHeaderSize" deprecated="jetty.request.header.size" default="8192" /&gt;&lt;/Set&gt;
      &lt;Set name="responseHeaderSize"&gt;&lt;Property name="jetty.httpConfig.responseHeaderSize" deprecated="jetty.response.header.size" default="8192" /&gt;&lt;/Set&gt;
      &lt;Set name="sendServerVersion"&gt;&lt;Property name="jetty.httpConfig.sendServerVersion" deprecated="jetty.send.server.version" default="true" /&gt;&lt;/Set&gt;
      &lt;Set name="sendDateHeader"&gt;&lt;Property name="jetty.httpConfig.sendDateHeader" deprecated="jetty.send.date.header" default="false" /&gt;&lt;/Set&gt;
      &lt;Set name="headerCacheSize"&gt;&lt;Property name="jetty.httpConfig.headerCacheSize" default="1024" /&gt;&lt;/Set&gt;
      &lt;Set name="delayDispatchUntilContent"&gt;&lt;Property name="jetty.httpConfig.delayDispatchUntilContent" deprecated="jetty.delayDispatchUntilContent" default="true"/&gt;&lt;/Set&gt;
      &lt;Set name="maxErrorDispatches"&gt;&lt;Property name="jetty.httpConfig.maxErrorDispatches" default="10"/&gt;&lt;/Set&gt;
      &lt;Set name="blockingTimeout"&gt;&lt;Property name="jetty.httpConfig.blockingTimeout" default="-1"/&gt;&lt;/Set&gt;
      &lt;Set name="persistentConnectionsEnabled"&gt;&lt;Property name="jetty.httpConfig.persistentConnectionsEnabled" default="true"/&gt;&lt;/Set&gt;
      &lt;Set name="cookieCompliance"&gt;&lt;Call class="org.eclipse.jetty.http.CookieCompliance" name="valueOf"&gt;&lt;Arg&gt;&lt;Property name="jetty.httpConfig.cookieCompliance" default="RFC6265"/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Set&gt;

      &lt;!-- Uncomment to enable handling of X-Forwarded- style headers
      &lt;Call name="addCustomizer"&gt;
        &lt;Arg&gt;&lt;New class="org.eclipse.jetty.server.ForwardedRequestCustomizer"/&gt;&lt;/Arg&gt;
      &lt;/Call&gt;
      --&gt;
    &lt;/New&gt;
  ...
&lt;/Configure&gt;</code></pre></dd><dt><span class="term">jetty-ssl.xml</span></dt><dd><p class="simpara">设置将由https连接器使用的ssl。这是<code class="literal">jetty-ssl.xml</code>来自Jetty分布的文件：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd"&gt;

&lt;!-- ============================================================= --&gt;&lt;!-- Base SSL configuration                                        --&gt;&lt;!-- This configuration needs to be used together with 1 or more   --&gt;&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;&lt;!-- ============================================================= --&gt;
&lt;Configure id="Server" class="org.eclipse.jetty.server.Server"&gt;

  &lt;!-- =========================================================== --&gt;
  &lt;!-- Add an SSL Connector with no protocol factories              --&gt;
  &lt;!-- =========================================================== --&gt;
  &lt;Call  name="addConnector"&gt;
    &lt;Arg&gt;
      &lt;New id="sslConnector" class="org.eclipse.jetty.server.ServerConnector"&gt;
        &lt;Arg name="server"&gt;&lt;Ref refid="Server" /&gt;&lt;/Arg&gt;
        &lt;Arg name="acceptors" type="int"&gt;&lt;Property name="jetty.ssl.acceptors" deprecated="ssl.acceptors" default="-1"/&gt;&lt;/Arg&gt;
        &lt;Arg name="selectors" type="int"&gt;&lt;Property name="jetty.ssl.selectors" deprecated="ssl.selectors" default="-1"/&gt;&lt;/Arg&gt;
        &lt;Arg name="factories"&gt;
          &lt;Array type="org.eclipse.jetty.server.ConnectionFactory"&gt;
            &lt;!-- uncomment to support proxy protocol
            &lt;Item&gt;
              &lt;New class="org.eclipse.jetty.server.ProxyConnectionFactory"/&gt;
            &lt;/Item&gt;--&gt;
          &lt;/Array&gt;
        &lt;/Arg&gt;

        &lt;Set name="host"&gt;&lt;Property name="jetty.ssl.host" deprecated="jetty.host" /&gt;&lt;/Set&gt;
        &lt;Set name="port"&gt;&lt;Property name="jetty.ssl.port" deprecated="ssl.port" default="8443" /&gt;&lt;/Set&gt;
        &lt;Set name="idleTimeout"&gt;&lt;Property name="jetty.ssl.idleTimeout" deprecated="ssl.timeout" default="30000"/&gt;&lt;/Set&gt;
        &lt;Set name="acceptorPriorityDelta"&gt;&lt;Property name="jetty.ssl.acceptorPriorityDelta" deprecated="ssl.acceptorPriorityDelta" default="0"/&gt;&lt;/Set&gt;
        &lt;Set name="acceptQueueSize"&gt;&lt;Property name="jetty.ssl.acceptQueueSize" deprecated="ssl.acceptQueueSize" default="0"/&gt;&lt;/Set&gt;
        &lt;Get name="SelectorManager"&gt;
          &lt;Set name="connectTimeout"&gt;&lt;Property name="jetty.ssl.connectTimeout" default="15000"/&gt;&lt;/Set&gt;
        &lt;/Get&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;

  &lt;!-- =========================================================== --&gt;
  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;
  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;
  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;
  &lt;!-- session information                                         --&gt;
  &lt;!-- =========================================================== --&gt;
  &lt;New id="sslHttpConfig" class="org.eclipse.jetty.server.HttpConfiguration"&gt;
    &lt;Arg&gt;&lt;Ref refid="httpConfig"/&gt;&lt;/Arg&gt;
    &lt;Call name="addCustomizer"&gt;
      &lt;Arg&gt;
        &lt;New class="org.eclipse.jetty.server.SecureRequestCustomizer"&gt;
          &lt;Arg name="sniRequired" type="boolean"&gt;&lt;Property name="jetty.ssl.sniRequired" default="false"/&gt;&lt;/Arg&gt;
          &lt;Arg name="sniHostCheck" type="boolean"&gt;&lt;Property name="jetty.ssl.sniHostCheck" default="true"/&gt;&lt;/Arg&gt;
          &lt;Arg name="stsMaxAgeSeconds" type="int"&gt;&lt;Property name="jetty.ssl.stsMaxAgeSeconds" default="-1"/&gt;&lt;/Arg&gt;
          &lt;Arg name="stsIncludeSubdomains" type="boolean"&gt;&lt;Property name="jetty.ssl.stsIncludeSubdomains" default="false"/&gt;&lt;/Arg&gt;
        &lt;/New&gt;
      &lt;/Arg&gt;
    &lt;/Call&gt;
  &lt;/New&gt;

&lt;/Configure&gt;</code></pre></dd><dt><span class="term">Jetty-https.xml</span></dt><dd><p class="simpara">使用以下命令中的HttpConfiguration设置https连接器<code class="literal">jetty.xml</code>和ssl配置从<code class="literal">jetty-ssl.xml</code> ：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd"&gt;

&lt;!-- ============================================================= --&gt;&lt;!-- Configure an HTTPS connector.                                  --&gt;&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;&lt;!-- and jetty-ssl.xml.                                            --&gt;&lt;!-- ============================================================= --&gt;
&lt;Configure id="sslConnector" class="org.eclipse.jetty.server.ServerConnector"&gt;

  &lt;Call name="addIfAbsentConnectionFactory"&gt;
    &lt;Arg&gt;
      &lt;New class="org.eclipse.jetty.server.SslConnectionFactory"&gt;
        &lt;Arg name="next"&gt;http/1.1&lt;/Arg&gt;
        &lt;Arg name="sslContextFactory"&gt;&lt;Ref refid="sslContextFactory"/&gt;&lt;/Arg&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;

  &lt;Call name="addConnectionFactory"&gt;
    &lt;Arg&gt;
      &lt;New class="org.eclipse.jetty.server.HttpConnectionFactory"&gt;
        &lt;Arg name="config"&gt;&lt;Ref refid="sslHttpConfig" /&gt;&lt;/Arg&gt;
        &lt;Arg name="compliance"&gt;&lt;Call class="org.eclipse.jetty.http.HttpCompliance" name="valueOf"&gt;&lt;Arg&gt;&lt;Property name="jetty.http.compliance" default="RFC7230"/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;

&lt;/Configure&gt;</code></pre></dd></dl></div><p>现在，您需要让插件知道要应用上述文件：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><div class="blockquote"><blockquote class="blockquote"><div class="caution" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-exclamation" aria-hidden="true"></i>警告</h3><p>就像已安装的Jetty发行版一样，xml文件的顺序也很重要。</p></div></blockquote></div><p>您还可以使用Jetty xml文件配置供插件使用的http连接器。在这里我们使用相同的<code class="literal">jetty-http.xml</code> Jetty发行版中的文件：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd"&gt;

&lt;!-- ============================================================= --&gt;&lt;!-- Configure the Jetty Server instance with an ID "Server"       --&gt;&lt;!-- by adding an HTTP connector.                                   --&gt;&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;&lt;!-- ============================================================= --&gt;
&lt;Configure id="Server" class="org.eclipse.jetty.server.Server"&gt;

  &lt;!-- =========================================================== --&gt;
  &lt;!-- Add an HTTP Connector.                                       --&gt;
  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;
  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;
  &lt;!-- instance defined in jetty.xml                               --&gt;
  &lt;!--                                                             --&gt;
  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;
  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;
  &lt;!-- that may be set here.                                       --&gt;
  &lt;!-- =========================================================== --&gt;
  &lt;Call name="addConnector"&gt;
    &lt;Arg&gt;
      &lt;New id="httpConnector" class="org.eclipse.jetty.server.ServerConnector"&gt;
        &lt;Arg name="server"&gt;&lt;Ref refid="Server" /&gt;&lt;/Arg&gt;
        &lt;Arg name="acceptors" type="int"&gt;&lt;Property name="jetty.http.acceptors" deprecated="http.acceptors" default="-1"/&gt;&lt;/Arg&gt;
        &lt;Arg name="selectors" type="int"&gt;&lt;Property name="jetty.http.selectors" deprecated="http.selectors" default="-1"/&gt;&lt;/Arg&gt;
        &lt;Arg name="factories"&gt;
          &lt;Array type="org.eclipse.jetty.server.ConnectionFactory"&gt;
            &lt;Item&gt;
              &lt;New class="org.eclipse.jetty.server.HttpConnectionFactory"&gt;
                &lt;Arg name="config"&gt;&lt;Ref refid="httpConfig" /&gt;&lt;/Arg&gt;
                &lt;Arg name="compliance"&gt;&lt;Call class="org.eclipse.jetty.http.HttpCompliance" name="valueOf"&gt;&lt;Arg&gt;&lt;Property name="jetty.http.compliance" default="RFC7230_LEGACY"/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;
              &lt;/New&gt;
            &lt;/Item&gt;
          &lt;/Array&gt;
        &lt;/Arg&gt;
        &lt;Set name="host"&gt;&lt;Property name="jetty.http.host" deprecated="jetty.host" /&gt;&lt;/Set&gt;
        &lt;Set name="port"&gt;&lt;Property name="jetty.http.port" deprecated="jetty.port" default="8080" /&gt;&lt;/Set&gt;
        &lt;Set name="idleTimeout"&gt;&lt;Property name="jetty.http.idleTimeout" deprecated="http.timeout" default="30000"/&gt;&lt;/Set&gt;
        &lt;Set name="acceptorPriorityDelta"&gt;&lt;Property name="jetty.http.acceptorPriorityDelta" deprecated="http.acceptorPriorityDelta" default="0"/&gt;&lt;/Set&gt;
        &lt;Set name="acceptQueueSize"&gt;&lt;Property name="jetty.http.acceptQueueSize" deprecated="http.acceptQueueSize" default="0"/&gt;&lt;/Set&gt;
        &lt;Get name="SelectorManager"&gt;
          &lt;Set name="connectTimeout"&gt;&lt;Property name="jetty.http.connectTimeout" default="15000"/&gt;&lt;/Set&gt;
        &lt;/Get&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;

&lt;/Configure&gt;</code></pre><p>现在，我们将其添加到配置列表中以使插件适用：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><p>另外，您也可以<span class="strong"><strong>如上所述</strong></span>使用pom内的<span class="strong"><strong>httpConnector</strong></span>配置元素。</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-your-webapp"></a>配置您的WebApp</h3></div></div></div><p>这些配置参数适用于您的Web应用程序。它们是几乎所有目标所共有的。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">webApp</span></dt><dd><p class="simpara">这是<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/maven/plugin/JettyWebAppContext.html" target="_top">org.eclipse.jetty.maven.plugin的实例</a><a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/maven/plugin/JettyWebAppContext.html" target="_top">。JettyWebAppContext</a> ，它是对该类的扩展<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/webapp/WebAppContext.hml" target="_top"><code class="literal">org.eclipse.jetty.webapp.WebAppContext</code></a> 。您可以在此对象上使用任何setter方法来配置您的webapp。以下是一些最有用的方法：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">contextPath</span></dt><dd>您的webapp的上下文路径。默认情况下，此设置为<code class="literal">/</code> 。如果对此参数使用自定义值，则可能要包含前导<code class="literal">/</code> ，例子<code class="literal">/mycontext</code> 。</dd><dt><span class="term">描述符</span></dt><dd>通往的道路<code class="literal">web.xml</code>您的webapp的文件。</dd><dt><span class="term">defaultsDescriptor</span></dt><dd>通往的道路<code class="literal">webdefault.xml</code>之前将应用于您的Web应用的文件<code class="literal">web.xml</code> 。如果您不提供任何文件，Jetty将使用一个默认文件，该文件包含在<code class="literal">jetty-webapp.jar</code> 。</dd><dt><span class="term">overlayDescriptor</span></dt><dd>通往的道路<code class="literal">web.xml</code>阅读您的文件后，Jetty应用的文件<code class="literal">web.xml</code> 。您可以使用它来替换或添加配置。</dd><dt><span class="term">临时目录</span></dt><dd>当您的webapp运行时，Jetty可以用来扩展或复制jar和jsp的目录的路径会编译。默认是<code class="literal">${project.build.outputDirectory}/tmp</code> 。</dd><dt><span class="term">baseResource</span></dt><dd>Jetty提供静态资源的路径。默认为<code class="literal">src/main/webapp</code> 。</dd><dt><span class="term">资源库</span></dt><dd>使用代替<code class="literal">baseResource</code>如果您有多个要提供静态内容的目录。这是目录名称的数组。</dd><dt><span class="term">baseAppFirst</span></dt><dd>默认为“ true”。控制是否在Webapp的原始基础资源之前或之后添加任何叠加式战争。有关更多信息，请参见<a class="link" href="jetty-maven-plugin.html#using-overlaid-wars" title="使用叠加战">重叠战争</a>部分。</dd><dt><span class="term">containerIncludeJarPattern</span></dt><dd>默认为<code class="literal">.*/javax.servlet-[^/]*\.jar$|.*/servlet-api-[^/]*\.jar$|.*javax.servlet.jsp.jstl-[^/]*\.jar|.*taglibs-standard-impl-.*\.jar</code> 。这是一种模式，适用于容器的类路径（即插件的类路径，而不是Webapp的类路径）上的jar的名称，应对其进行扫描以查找片段，tld，注释等。这类似于context属性<a class="link" href="configuring-webapps.html#container-include-jar-pattern" title="org.eclipse.jetty.server.webapp。ContainerIncludeJarPattern">org.eclipse.jetty.server.webapp。</a><a class="link" href="configuring-webapps.html#container-include-jar-pattern" title="org.eclipse.jetty.server.webapp。ContainerIncludeJarPattern">在此处</a>记录的ContainerIncludeJarPattern 。您可以定义将包含在扫描中的罐子的其他模式。</dd><dt><span class="term">webInfIncludeJarPattern</span></dt><dd>默认为匹配web应用程序的<span class="emphasis"><em>所有</em></span>依赖项jar（即，等效于WEB-INF / lib）。您可以使用此setter来限制此模式，使其仅匹配某些罐子。这类似于上下文属性<a class="link" href="configuring-webapps.html#web-inf-include-jar-pattern" title="org.eclipse.jetty.server.webapp。WebInfIncludeJarPattern">org.eclipse.jetty.server.webapp。</a><a class="link" href="configuring-webapps.html#web-inf-include-jar-pattern" title="org.eclipse.jetty.server.webapp。WebInfIncludeJarPattern">在此处</a>记录的WebInfIncludeJarPattern 。</dd></dl></div></dd><dt><span class="term">contextXml</span></dt><dd>之后，应用到您的Web应用的上下文xml文件的路径<code class="literal">webApp</code>元件。</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-run-goal"></a>Jetty</h3></div></div></div><p>的<code class="literal">run</code>目标运行在无需内置到WAR中的Web应用程序上。相反，Jetty从源头部署了webapp。尽管您可以在插件配置中覆盖这些内容，但它会在Maven默认项目位置中查找webapp的组成部分。例如，默认情况下它将查找：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">的资源<code class="literal">${project.basedir}/src/main/webapp</code></li><li class="listitem">中的课程<code class="literal">${project.build.outputDirectory}</code></li><li class="listitem"><code class="literal">web.xml</code>在<code class="literal">${project.basedir}/src/main/webapp/WEB-INF/</code></li></ul></div><p>该插件会自动确保在部署之前重建并更新了这些类。如果您更改了一个类的源，并且您的IDE会在后台自动对其进行编译，则插件会选择更改后的类。</p><p>您无需将Web应用程序组装成WAR，从而节省了开发周期的时间。调用后，您可以将插件配置为连续运行，扫描项目中的更改，并在必要时自动执行热重新部署。您所做的任何更改都会立即反映在正在运行的Jetty实例中，让您快速从编码跳到测试，而无需经历以下过程：代码，编译，重新组装，重新部署，测试。</p><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>从Jetty 9.4.7开始，在多模块构建中使用jetty：run时，不再需要先构建构成Webapp依赖项的每个模块。因此，如果您的webapp依赖于项目中的其他模块，并且它们同时存在于反应堆中，则jetty将使用其编译的类，而不是本地maven存储库中的jar文件。</p></div></blockquote></div><p>这是一个示例，该示例每十秒钟打开一次扫描更改，并将webapp上下文路径设置为<code class="literal">/test</code> ：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="configuring-additional-parameters"></a>组态</h4></div></div></div><p>除了<code class="literal">webApp</code>大多数目标共有的要素<code class="literal">jetty:run</code>目标支持：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">classesDirectory</span></dt><dd>Webapp的已编译类的位置。您几乎不需要设置此参数。相反，您应该设置<code class="literal">build outputDirectory</code>在你的<code class="literal">pom.xml</code> 。</dd><dt><span class="term">testClassesDirectory</span></dt><dd>您的Web应用程序的已编译测试类的位置。默认情况下是<code class="literal">${project.build.testOutputDirectory}</code> 。</dd><dt><span class="term">useTestScope</span></dt><dd>如果为true，则来自<code class="literal">testClassesDirectory</code>范围“ test”的依赖项首先放在类路径上。默认情况下为false。</dd><dt><span class="term">webAppSourceDirectory</span></dt><dd>默认情况下，此设置为<code class="literal">${project.basedir}/src/main/webapp</code> 。如果您的静态源位于其他位置，请相应地设置此参数。</dd><dt><span class="term">jettyEnvXml</span></dt><dd>可选的。一个的位置<code class="literal">jetty-env.xml</code>文件，使您可以制作满足以下条件的JNDI绑定： <code class="literal">env-entry</code> ， <code class="literal">resource-env-ref</code>和<code class="literal">resource-ref</code>中的联系<code class="literal">web.xml</code>仅适用于该Web应用程序，不能与您可能同时部署的其他Web应用程序共享（例如，通过使用`jettyConfig`文件）。</dd><dt><span class="term">scanTargets</span></dt><dd>可选的。除了插件自动扫描的文件和目录之外，还需要定期扫描的文件和目录的列表。</dd><dt><span class="term">scanTargetPatterns</span></dt><dd>可选的。如果您要扫描的额外文件列表很长，则使用模式匹配表达式来指定它们而不是使用<code class="literal">scanTargetsList</code>的<code class="literal">scanTargetPatterns</code> ，每个都包含一个目录，并包含和/或排除参数以指定文件匹配模式。</dd><dt><span class="term">scanClassesPattern</span></dt><dd>从9.3.0开始。可选的。包括和排除可以适用于classesDirectory扫描的目的模式，它<span class="strong"><strong>不会</strong></span>影响到类路径。如果模式排除了文件或目录，则该文件（或目录的子树）中的更改将被忽略，并且不会导致webapp重新部署。如<a class="link" href="http://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-" target="_top">JavaFile中</a>对<a class="link" href="http://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-" target="_top">FileSystem.getPathMatcher</a>所述，使用类似于glob的语法将模式指定为相对路径。</dd><dt><span class="term">scanTestClassesPattern</span></dt><dd>从9.3.0开始。可选的。包括和排除可以适用于testClassesDirectory扫描的目的模式，它<span class="strong"><strong>不会</strong></span>影响到类路径。如果模式排除了文件或目录，则该文件（或目录的子树）中的更改将被忽略，并且不会导致webapp重新部署。如<a class="link" href="http://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-" target="_top">JavaFile中</a>对<a class="link" href="http://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-" target="_top">FileSystem.getPathMatcher</a>所述，使用类似于glob的语法将模式指定为相对路径。</dd></dl></div><p>这是一个例子：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;project&gt;
...
  &lt;plugins&gt;
...
    &lt;plugin&gt;
      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
      &lt;configuration&gt;
        &lt;webAppSourceDirectory&gt;${project.basedir}/src/staticfiles&lt;/webAppSourceDirectory&gt;
        &lt;webApp&gt;
          &lt;contextPath&gt;/&lt;/contextPath&gt;
          &lt;descriptor&gt;${project.basedir}/src/over/here/web.xml&lt;/descriptor&gt;
          &lt;jettyEnvXml&gt;${project.basedir}/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;
        &lt;/webApp&gt;
        &lt;classesDirectory&gt;${project.basedir}/somewhere/else&lt;/classesDirectory&gt;
        &lt;scanClassesPattern&gt;
          &lt;excludes&gt;
             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;
          &lt;/excludes&gt;
        &lt;/scanClassesPattern&gt;
        &lt;scanTargets&gt;
          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;
          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;
        &lt;/scanTargets&gt;
        &lt;scanTargetPatterns&gt;
          &lt;scanTargetPattern&gt;
            &lt;directory&gt;src/other-resources&lt;/directory&gt;
            &lt;includes&gt;
              &lt;include&gt;**/*.xml&lt;/include&gt;
              &lt;include&gt;**/*.properties&lt;/include&gt;
            &lt;/includes&gt;
            &lt;excludes&gt;
              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;
              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;
            &lt;/excludes&gt;
          &lt;/scanTargetPattern&gt;
        &lt;/scanTargetPatterns&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
...
&lt;/project&gt;</code></pre><p>如果出于某种原因您无法在未组装的Web应用程序上运行，则目标<code class="literal">run-war</code>和<code class="literal">run-exploded</code>在未组装的Webapp上工作。</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="running-assembled-webapp-as-war"></a>Jetty：战争</h3></div></div></div><p>此目标首先将您的Web应用程序打包为WAR文件，然后将其部署到Jetty。如果设置为非零<code class="literal">scanInterval</code> ，Jetty看着你<code class="literal">pom.xml</code>和WAR文件；如果其中任何一个改变，它将重新部署战争。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="configuring-war"></a>组态</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">战争</span></dt><dd>生成的WAR文件的位置。默认为<code class="literal">${project.build.directory}/${project.build.finalName}.war</code> 。如果这还不够，请将其设置为您的自定义位置。</dd></dl></div><p>设置方法如下：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;project&gt;
...
  &lt;plugins&gt;
...
    &lt;plugin&gt;
      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
      &lt;configuration&gt;
        &lt;war&gt;${project.basedir}/target/mycustom.war&lt;/war&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/project&gt;</code></pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="running-assembled-webapp-as-expanded-war"></a>Jetty：爆炸</h3></div></div></div><p>运行爆炸的目标首先将您的Web应用程序组装到爆炸的WAR文件中，然后将其部署到Jetty。如果设置为非零<code class="literal">scanInterval</code> ，Jetty看着你<code class="literal">pom.xml,`WEB-INF/lib</code> ， <code class="literal">WEB-INF/</code>和<code class="literal">WEB-INF/web.xml</code>进行更改，并在必要时进行重新部署。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="configuring-exploded-war"></a>组态</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">战争</span></dt><dd>爆炸的WAR的位置。默认为<code class="literal">${project.build.directory}/${project.build.finalName}</code> ，但是您可以通过设置此参数来覆盖默认值。</dd></dl></div><p>设置方法如下：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;project&gt;
...
  &lt;plugins&gt;
...
    &lt;plugin&gt;
      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;
      &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
      &lt;configuration&gt;
        &lt;war&gt;${project.basedir}/target/myfunkywebapp&lt;/war&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/project&gt;</code></pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="deploy-war-running-pre-assembled-war"></a>Jetty：部署战争</h3></div></div></div><p>这基本上和<code class="literal">jetty:run-war</code> ，但无需组合当前模块的WAR-您可以指定要进行的任何战争的地点。不像<code class="literal">run-war</code> ，此插件执行的阶段未绑定到“打包”阶段-您可以将其绑定到任何阶段以使用它。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_configuration_2"></a>组态</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">战争</span></dt><dd>WAR文件的位置。默认为<code class="literal">${project.build.directory}/${project.build.finalName}</code> ，但是您可以通过设置此参数来覆盖默认值。</dd><dt><span class="term">守护程序</span></dt><dd>如果为true，则此插件将启动Jetty，但继续构建。如果要在特定阶段中将Jetty作为执行绑定启动，然后在另一个阶段中将其停止，则这很有用。或者，您可以将此参数设置为false，在这种情况下，Jetty将被阻止，您将需要使用ctrl-c来停止它。</dd></dl></div><p>配置如下：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;project&gt;
...
  &lt;plugins&gt;
...
  &lt;plugin&gt;
    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
    &lt;configuration&gt;
      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;
      &lt;stopKey&gt;alpha&lt;/stopKey&gt;
      &lt;stopPort&gt;9099&lt;/stopPort&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
      &lt;execution&gt;
        &lt;id&gt;start-jetty&lt;/id&gt;
        &lt;phase&gt;test-compile&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;deploy-war&lt;/goal&gt;
        &lt;/goals&gt;
      &lt;/execution&gt;
      &lt;execution&gt;
        &lt;id&gt;stop-jetty&lt;/id&gt;
        &lt;phase&gt;test&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;stop&lt;/goal&gt;
        &lt;/goals&gt;
      &lt;/execution&gt;
     &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/project&gt;</code></pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-run-forked-goal"></a>Jetty：分叉</h3></div></div></div><p>此目标使您可以在新的JVM中启动webapp，可以选择将参数传递给该新的JVM。该目标支持的配置参数与<code class="literal">jetty:run</code>目标，还有几个额外功能可帮助您配置分叉的流程。不像<code class="literal">jetty:run</code>目标， <code class="literal">jetty:run-forked</code>目标将不会扫描Webapp进行更改和重新部署。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_configuration_3"></a>组态</h4></div></div></div><p>可用的配置参数-除了用于<code class="literal">jetty:run</code>目标-是：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">jvmArgs</span></dt><dd>可选的。一个字符串，表示要传递给派生的JVM的任意参数。</dd><dt><span class="term">环保</span></dt><dd>可选的。键/值对的映射，以作为环境传递给派生的JVM。</dd><dt><span class="term">waitForChild</span></dt><dd>默认为<code class="literal">true</code> 。这将导致父进程等待分叉的进程退出。在这种情况下，您可以使用<code class="literal">ctrl-c</code>终止两个过程。将其设置为更有用<code class="literal">false</code> ，在这种情况下，父进程终止，而子进程仍在运行。您使用<code class="literal">jetty:stop</code>目标停止子进程。在这种情况下<code class="literal">waitForChild</code>是<code class="literal">false</code> ，子进程的输出将写入<code class="literal">target/jetty.out</code> 。</dd><dt><span class="term">maxChildChecks</span></dt><dd>默认为<code class="literal">50</code> 。这是父进程检查子进程是否已启动的最大次数。仅在以下情况下相关<code class="literal">waitForChild</code>是<code class="literal">false</code> 。</dd><dt><span class="term">maxChildCheckInterval</span></dt><dd>默认为<code class="literal">100</code> 。这是检查子进程是否已启动之间的时间（以毫秒为单位）。仅在以下情况下相关<code class="literal">waitForChild</code>是<code class="literal">false</code> 。</dd><dt><span class="term">forkWebXml</span></dt><dd>默认为<code class="literal">target/fork-web.xml</code> 。这是jetty生成供子进程使用的有效web.xml的文件的名称。</dd><dt><span class="term">javaPath</span></dt><dd>默认为您<code class="literal">${java.home}/bin/java</code>这是用于启动子进程的java可执行文件</dd></dl></div><p>下列<code class="literal">jetty:run</code>参数不适用：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem"><span class="strong"><strong>scanTargets</strong></span></li><li class="listitem"><span class="strong"><strong>scanTargetPatterns</strong></span></li><li class="listitem"><span class="strong"><strong>scanClassesPattern</strong></span></li><li class="listitem"><span class="strong"><strong>scanTestClassesPattern</strong></span></li></ul></div><p>一些容器配置参数<span class="strong"><strong>不</strong></span>适用于此目标：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">scanIntervalSeconds</span></dt><dd>不支持。分叉的Jetty将不会监视和重新部署Webapp。</dd><dt><span class="term">重装</span></dt><dd>不支持。分叉的Jetty将不会重新部署webapp。</dd><dt><span class="term">httpConnector</span></dt><dd>不支持。要定义自定义连接器，请使用jetty xml文件。</dd><dt><span class="term">loginServices</span></dt><dd>不支持。要定义LoginService，请改用jetty xml或context xml文件。</dd><dt><span class="term">requestLog</span></dt><dd>不支持。要定义RequestLog设置，请改用jetty xml或context xml文件。</dd><dt><span class="term">系统属性</span></dt><dd>不支持。使用<code class="literal">jvmArgs</code>参数，以将系统属性传递给分支过程。</dd></dl></div><p>要将未组装的Web应用程序部署到在新的JVM中运行的Jetty：</p><div class="screenexample"><pre class="screen">mvn jetty:run-forked</pre></div><p>Jetty继续执行，直到您执行以下任一操作：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">按<code class="literal">ctrl-c</code>在终端窗口中停止插件，插件也会停止分叉的JVM（仅当您以<code class="literal">waitForChild=true</code> ）</li><li class="listitem">使用<code class="literal">jetty:stop</code>停止派生的JVM，这也会停止插件。</li></ul></div><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>如果要为Jetty连接器设置自定义端口，则需要在<code class="literal">jetty xml</code>文件，而不是设置连接器和端口标签。您可以指定<code class="literal">jetty.xml</code>使用<code class="literal">jettyXml</code>参数。</p></div></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-run-distro-goal"></a>Jetty：运行发行</h3></div></div></div><p>在Jetty 9.4.8中引入的此目标使您可以在Jetty的本地发行版中执行未组装的webapp。如果您的Web应用需要运行高度自定义的环境，这将很有用。如果您的webapp设计为在生产中的Jetty发行版中运行，则此目标是最接近该环境的目标。</p><p>类似于<code class="literal">jetty:run-forked</code>目标，该目标将派生一个子进程，以在该子进程中执行Webapp。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_configuration_4"></a>组态</h4></div></div></div><p>配置参数与<code class="literal">jetty:run</code>目标（尽管有一些例外情况，请参见下文），并添加以下内容：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Jetty</span></dt><dd>可选的。用于部署Web应用程序的现有Jetty基础目录的位置。现有的库将被复制到<code class="literal">target/</code> Webapp部署之前的目录。如果没有现有的Jetty基地，将在<code class="literal">target/jetty-base</code> 。</dd><dt><span class="term">Jetty</span></dt><dd>可选的。现有未装箱Jetty分布的位置。如果不存在，将从maven下载新的Jetty发行版并将其安装到<code class="literal">target</code>目录。</dd><dt><span class="term">Jetty物业</span></dt><dd>可选的。在子进程的命令行上指定的一系列Jetty属性。</dd><dt><span class="term">jvmArgs</span></dt><dd>可选的。一个字符串，表示应传递给子进程的jvm的参数。</dd><dt><span class="term">模组</span></dt><dd>可选的。jetty子进程将激活的一系列jetty模块的名称。</dd><dt><span class="term">waitForChild</span></dt><dd>默认为<code class="literal">true</code> 。像Jetty一样： <code class="literal">true</code> ，父进程将等待子进程退出并将其所有输出回显到父进程的stdout / stderr。在这种情况下，您可以使用<code class="literal">cntrl-c</code> 。如果<code class="literal">false</code> ，父级不会等待子级完成，并且子级会将其所有输出写入<code class="literal">target/jetty.out</code> 。要停止异步执行的子进程，您可以使用<code class="literal">jetty:stop</code> 。</dd><dt><span class="term">maxChildChecks</span></dt><dd>默认值10。这是父母在以下情况下将检查孩子是否正确启动的最大次数： <code class="literal">waitForChild</code>是<code class="literal">false</code> 。</dd><dt><span class="term">maxChildCheckInterval</span></dt><dd>预设值100。这是检查孩子是否正确启动的两次检查之间的间隔（以毫秒为单位）。仅适用于<code class="literal">waitForChild</code>是<code class="literal">false</code> 。</dd><dt><span class="term">javaPath</span></dt><dd>默认为您<code class="literal">${java.home}/bin/java</code>这是用于启动子进程的java可执行文件</dd></dl></div><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>使用<code class="literal">modules</code>参数以适当地配置Jetty分布，而不是使用Jetty构件作为<code class="literal">plugin dependencies</code> 。</p></div></blockquote></div><p>下列<code class="literal">jetty:run</code>参数<span class="strong"><strong>不</strong></span>适用于此目标：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem"><span class="strong"><strong>scanTargets</strong></span></li><li class="listitem"><span class="strong"><strong>scanTargetPatterns</strong></span></li><li class="listitem"><span class="strong"><strong>scanClassesPattern</strong></span></li><li class="listitem"><span class="strong"><strong>scanTestClassesPattern</strong></span></li></ul></div><p>以下容器的配置选项<span class="strong"><strong>不适</strong></span>用于这个目的：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">scanIntervalSeconds</span></dt><dd>不支持。此目标将不会监视和重新部署Webapp。</dd><dt><span class="term">重装</span></dt><dd>不支持。此目标不会重新部署Web应用程序。</dd><dt><span class="term">httpConnector</span></dt><dd>不支持。使用<code class="literal">modules</code>参数以启用适当的模块，或者<code class="literal">jettyBase</code>参数以指向适当配置的Jetty基础。</dd><dt><span class="term">loginServices</span></dt><dd>不支持。使用<code class="literal">modules</code>参数以启用适当的模块，或者<code class="literal">jettyBase</code>参数以指向适当配置的Jetty基础。</dd><dt><span class="term">requestLog</span></dt><dd>不支持。使用<code class="literal">modules</code>参数以启用适当的模块，或者<code class="literal">jettyBase</code>参数以指向适当配置的Jetty基础。</dd><dt><span class="term">系统属性</span></dt><dd>不支持。使用<code class="literal">jvmArgs</code>参数，以将系统属性传递给分支过程。</dd></dl></div><p>这是使用配置参数的示例：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;project&gt;
...
  &lt;plugins&gt;
...
  &lt;plugin&gt;
    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
    &lt;configuration&gt;
      &lt;stopKey&gt;alpha&lt;/stopKey&gt;
      &lt;stopPort&gt;9099&lt;/stopPort&gt;
      &lt;jettyBase&gt;/my/existing/jetty-base&lt;/jettyBase&gt;
      &lt;contextXml&gt;/some/existing/context.xml&lt;/contextXml&gt;
      &lt;useTestClasspath&gt;true&lt;/useTestClasspath&gt;
      &lt;modules&gt;
       &lt;module&gt;apache-jsp&lt;/module&gt;
       &lt;module&gt;apache-jstl&lt;/module&gt;
       &lt;module&gt;jmx&lt;/module&gt;
      &lt;/modules&gt;
      &lt;jettyProperties&gt;
        &lt;jettyProperty&gt;jetty.server.dumpAfterStart=true&lt;/jettyProperty&gt;
      &lt;/jettyProperties&gt;
      &lt;jvmArgs&gt;-Dorg.eclipse.jetty.webapp.LEVEL=DEBUG&lt;/jvmArgs&gt;
      &lt;webApp&gt;
        &lt;contextPath&gt;/mypath&lt;/contextPath&gt;
      &lt;/webApp&gt;
    &lt;/configuration&gt;
    &lt;/plugin&gt;
...
  &lt;/plugins&gt;
&lt;/project&gt;</code></pre><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>在为此目标定义模块时，请使用标准<a class="link" href="startup-modules.html" title="管理启动模块">Jetty模块</a>名称，而不要使用相关Jetty子项目的名称。例如，在上述配置中，通过添加以下命令来配置对JMX的支持<code class="literal">jmx</code>Jetty模块，而不是<code class="literal">jetty-jmx</code>子项目。</p></div></blockquote></div><p>要将未组装的Web应用程序部署到作为本地发行版运行的jetty：</p><div class="screenexample"><pre class="screen">mvn jetty:run-distro</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-start-goal"></a>Jetty：开始</h3></div></div></div><p>此目标是与您的执行绑定一起使用<code class="literal">pom.xml</code> 。它类似于<code class="literal">jetty:run</code>目标，但是直到<code class="literal">test-compile</code>阶段，以确保已生成Webapp的所有必要类和文件。当您想通过自己的执行绑定来控制Jetty的启动和停止时，这是最有用的<code class="literal">pom.xml</code> 。</p><p>例如，您可以将插件配置为在单元测试开始时启动Webapp，然后在结束时停止。为此，您需要设置几个<code class="literal">execution</code> Jetty插件的场景。您使用<code class="literal">pre-integration-test</code>和<code class="literal">post-integration-test</code> Maven构建阶段可触发Jetty的执行和终止：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;
    &lt;stopKey&gt;foo&lt;/stopKey&gt;
    &lt;stopPort&gt;9999&lt;/stopPort&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;start-jetty&lt;/id&gt;
      &lt;phase&gt;pre-integration-test&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;start&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
    &lt;execution&gt;
      &lt;id&gt;stop-jetty&lt;/id&gt;
      &lt;phase&gt;post-integration-test&lt;/phase&gt;
       &lt;goals&gt;
         &lt;goal&gt;stop&lt;/goal&gt;
       &lt;/goals&gt;
     &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-stop-goal"></a>Jetty：停止</h3></div></div></div><p>停止目标停止正在运行的Jetty实例。要使用它，您需要为插件配置特殊的端口号和密钥。启动Jetty的其他目标也将使用相同的端口号和密钥。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">stopPort</span></dt><dd>Jetty侦听以接收停止命令以使其关闭的端口号。</dd><dt><span class="term">停止键</span></dt><dd>字符串值发送到<code class="literal">stopPort</code>验证停止命令。</dd><dt><span class="term">停止等待</span></dt><dd>插件等待确认Jetty停止的最长时间（以秒为单位）。如果为false或未指定，则插件不等待确认，而是在发出stop命令后退出。</dd></dl></div><p>这是一个配置示例：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;stopPort&gt;9966&lt;/stopPort&gt;
    &lt;stopKey&gt;foo&lt;/stopKey&gt;
    &lt;stopWait&gt;10&lt;/stopWait&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><p>然后，在Jetty运行时（在另一个窗口中），键入：</p><div class="screenexample"><pre class="screen">mvn jetty:stop</pre></div><p>的<code class="literal">stopPort</code>在运行的计算机上必须免费。如果不是这种情况，则在``启动ServerConnector ...</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-effective-web-xml"></a>Jetty：有效的网络XML</h3></div></div></div><p>这个目标计算出一个综合<code class="literal">web.xml</code> （“有效的web.xml”）根据Servlet规范的规则，并考虑了应用程序中Web组件可发现的配置的所有来源：描述符（ <code class="literal">webdefault.xml</code> ， <code class="literal">web.xml</code> ， <code class="literal">web-fragment.xml`s, `web-override.xml</code> ）和发现的注释（ <code class="literal">@WebServlet</code> ， <code class="literal">@WebFilter</code> ， <code class="literal">@WebListener</code> ）。注意，不能考虑servlet，过滤器和侦听器的程序化声明。有效的<code class="literal">web.xml</code>从这些组合源生成并显示为Maven日志输出。在分析过程中生成的有关Web应用程序的其他有用信息也作为上下文参数存储在有效web.xml中。有效的web.xml可以与<a class="link" href="quickstart-webapp.html" title="快速入门Web应用程序">快速启动</a>功能结合使用，以快速启动您的Web应用程序（请注意，快速启动不适用于mvnJetty目标）。</p><p>以下配置参数使您可以保存文件：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">deleteOnExit</span></dt><dd>默认情况下是<code class="literal">true</code> 。如果设置为<code class="literal">false</code> ，有效的web.xml会生成到一个名为<code class="literal">effective-web.xml</code>在构建中<code class="literal">target</code>目录。</dd><dt><span class="term">有效的WebXml</span></dt><dd>您要将有效的Web xml生成到的文件的完整路径名。</dd></dl></div><p>您还可以将每个元素的来源生成到有效的web.xml文件中。源是描述符（例如，web.xml，web-fragment.xml，override-web.xml文件）或注释（例如，@ WebServlet）。具有原始属性信息的元素的一些示例是：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;listener origin="DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21"&gt;
&lt;listener origin="WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22"&gt;
&lt;servlet-class origin="FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23"&gt;
&lt;servlet-class origin="@WebServlet(com.acme.test.TestServlet):24"&gt;</code></pre><p>要生成来源信息，请在<code class="literal">webApp</code>元件：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">originAttribute</span></dt><dd>包含原点的属性名称。默认情况下是<code class="literal">origin</code> 。</dd><dt><span class="term">generateOrigin</span></dt><dd>默认为False。如果为true，将强制将originAttribute生成到每个元素上。</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="using-overlaid-wars"></a>使用叠加战</h3></div></div></div><p>如果您的Web应用程序依赖于其他战争文件，则<a class="link" href="jetty-maven-plugin.html#jetty-run-goal" title="Jetty">jetty：run</a>和<a class="link" href="jetty-maven-plugin.html#jetty-run-forked-goal" title="Jetty：分叉">jetty：run分叉的</a>目标能够合并所有资源。它可以基于<a class="link" href="http://maven.apache.org/plugins/maven-war-plugin/" target="_top">maven-war-plugin</a>的设置来执行此操作，或者如果您的项目不使用<a class="link" href="http://maven.apache.org/plugins/maven-war-plugin/" target="_top">maven-war-plugin</a>来处理叠加层，则可以使用简单的算法来确定资源的顺序。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_with_maven_war_plugin"></a>使用Maven-war-plugin</h4></div></div></div><p>Maven-war-plugin具有丰富的资源合并功能。的<code class="literal">jetty:run</code>和<code class="literal">jetty:run-forked</code>目标能够解释大多数目标，并在执行未组装的Webapp期间将其应用。通过看一个具体的例子可能最好地看到这一点。</p><p>假设您的webapp依赖以下战争：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;dependency&gt;
  &lt;groupId&gt;com.acme&lt;/groupId&gt;
  &lt;artifactId&gt;X&lt;/artifactId&gt;
  &lt;type&gt;war&lt;/type&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.acme&lt;/groupId&gt;
  &lt;artifactId&gt;Y&lt;/artifactId&gt;
  &lt;type&gt;war&lt;/type&gt;
&lt;/dependency&gt;</code></pre><p>包含：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>WebAppX:

 /foo.jsp
 /bar.jsp
 /WEB-INF/web.xml

WebAppY:

 /bar.jsp
 /baz.jsp
 /WEB-INF/web.xml
 /WEB-INF/special.xml</code></pre><p>它们是为<a class="link" href="http://maven.apache.org/plugins/maven-war-plugin/overlays.html" target="_top">maven-war-plugin配置的</a> ：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;overlays&gt;
      &lt;overlay&gt;
        &lt;groupId&gt;com.acme&lt;/groupId&gt;
        &lt;artifactId&gt;X&lt;/artifactId&gt;
        &lt;excludes&gt;
          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;
        &lt;/excludes&gt;
      &lt;/overlay&gt;
      &lt;overlay&gt;
        &lt;groupId&gt;com.acme&lt;/groupId&gt;
        &lt;artifactId&gt;Y&lt;/artifactId&gt;
        &lt;excludes&gt;
          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;
        &lt;/excludes&gt;
      &lt;/overlay&gt;
      &lt;overlay&gt;
      &lt;/overlay&gt;
    &lt;/overlays&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><p>然后执行jetty：run将产生以下资源排序： <code class="literal">com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp</code> 。请注意，由于空白，当前项目的资源位于排序的最后<overlay></overlay> maven-war-plugin中的元素。您可以使用它，也可以指定<code class="literal"><baseAppFirst>false</baseAppFirst></code> jetty-maven-plugin的参数。</p><p>而且，由于<code class="literal">exclusions</code>上面指定的，对资源`bar.jsp`的请求只能从<code class="literal">com.acme.Y.war.</code>与<code class="literal">baz.jsp</code>被排除，对其的请求将导致404错误。</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_without_maven_war_plugin"></a>没有Maven-war-plugin</h4></div></div></div><p>该算法非常简单，基于从属战争的声明顺序，并且不支持排除。配置参数<code class="literal"><baseAppFirst></code> （有关更多信息，请参阅“ <a class="link" href="jetty-maven-plugin.html#configuring-your-webapp" title="配置您的WebApp">配置Webapp</a> ”一节）可用于控制在运行时将Webapp的资源放在资源路径的最前还是最后。</p><p>例如，假设我们的webapp依赖于这两次战争：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;dependency&gt;
  &lt;groupId&gt;com.acme&lt;/groupId&gt;
  &lt;artifactId&gt;X&lt;/artifactId&gt;
  &lt;type&gt;war&lt;/type&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.acme&lt;/groupId&gt;
  &lt;artifactId&gt;Y&lt;/artifactId&gt;
  &lt;type&gt;war&lt;/type&gt;
&lt;/dependency&gt;</code></pre><p>假设Webapp包含：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>WebAppX:

 /foo.jsp
 /bar.jsp
 /WEB-INF/web.xml

WebAppY:

 /bar.jsp
 /baz.jsp
 /WEB-INF/web.xml
 /WEB-INF/special.xml</code></pre><p>然后，我们的Web应用程序将提供以下其他资源：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>/foo.jsp (X)
/bar.jsp (X)
/baz.jsp (Y)
/WEB-INF/web.xml (X)
/WEB-INF/special.xml (Y)</code></pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-security-settings"></a>配置安全设置</h3></div></div></div><p>您可以在插件中配置LoginServices。这是为Web应用程序设置HashLoginService的示例：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
    &lt;loginServices&gt;
      &lt;loginService implementation="org.eclipse.jetty.security.HashLoginService"&gt;
        &lt;name&gt;Test Realm&lt;/name&gt;
        &lt;config&gt;${project.basedir}/src/etc/realm.properties&lt;/config&gt;
      &lt;/loginService&gt;
    &lt;/loginServices&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="using-multiple-webapp-root-directories"></a>使用多个Webapp根目录</h3></div></div></div><p>如果您有要合并到Webapp执行中的外部资源，但没有组合到war文件中，则不能使用上述重叠的wars方法，但是可以将这些外部资源所在的目录告诉Jetty位于。在运行时，Jetty收到资源请求时，它将搜索所有位置以检索资源。这很像战争叠加的情况，但是没有战争。</p><p>这是一个配置示例：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;configuration&gt;
  &lt;webApp&gt;
    &lt;contextPath&gt;/${build.finalName}&lt;/contextPath&gt;
    &lt;baseResource implementation="org.eclipse.jetty.util.resource.ResourceCollection"&gt;
      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;
    &lt;/baseResource&gt;
  &lt;/webApp&gt;
&lt;/configuration&gt;</code></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="running-more-than-one-webapp"></a>运行多个Webapp</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_with_jetty_run"></a>带Jetty：运行</h4></div></div></div><p>您可以使用<code class="literal">jetty.xml</code>文件以配置要部署的其他（预编译）Web应用程序，也可以使用<code class="literal"><contextHandlers></code>这样做的配置元素。如果要在同一Jetty实例中部署webapp A以及webapp B和C：</p><p>将配置放入webapp A <code class="literal">pom.xml</code> ：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
    &lt;contextHandlers&gt;
      &lt;contextHandler implementation="org.eclipse.jetty.maven.plugin.JettyWebAppContext"&gt;
        &lt;war&gt;${project.basedir}../../B.war&lt;/war&gt;
        &lt;contextPath&gt;/B&lt;/contextPath&gt;
      &lt;/contextHandler&gt;
      &lt;contextHandler implementation="org.eclipse.jetty.maven.plugin.JettyWebAppContext"&gt;
        &lt;war&gt;${project.basedir}../../C.war&lt;/war&gt;
        &lt;contextPath&gt;/C&lt;/contextPath&gt;
      &lt;/contextHandler&gt;
    &lt;/contextHandlers&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><div class="blockquote"><blockquote class="blockquote"><div class="important" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-plus" aria-hidden="true"></i>重要</h3><p>如果<code class="literal">ContextHandler</code>您要部署的是一个Web应用程序，因此<span class="strong"><strong>必须</strong></span>使用<code class="literal">org.eclipse.jetty.maven.plugin.JettyWebAppContext</code>实例而不是标准<code class="literal">org.eclipse.jetty.webapp.WebAppContext</code>实例。只有前者将允许Web应用程序在Maven环境中正常运行。</p></div></blockquote></div><p>或者，添加一个<code class="literal">jetty.xml</code>文件到webappA。复制<code class="literal">jetty.xml</code>文件从Jetty发行版中添加，然后为其他2个webapp添加WebAppContexts：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;Ref refid="Contexts"&gt;
  &lt;Call name="addHandler"&gt;
    &lt;Arg&gt;
      &lt;New class="org.eclipse.jetty.maven.plugin.JettyWebAppContext"&gt;
        &lt;Set name="contextPath"&gt;/B&lt;/Set&gt;
        &lt;Set name="war"&gt;../../B.war&lt;/Set&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;
  &lt;Call&gt;
    &lt;Arg&gt;
      &lt;New class="org.eclipse.jetty.maven.plugin.JettyWebAppContext"&gt;
        &lt;Set name="contextPath"&gt;/C&lt;/Set&gt;
        &lt;Set name="war"&gt;../../C.war&lt;/Set&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;
&lt;/Ref&gt;</code></pre><p>然后配置这个的位置<code class="literal">jetty.xml</code>文件放入webapp A的Jetty插件：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;9.4.24.v20191120&lt;/version&gt;
  &lt;configuration&gt;
    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><p>对于这两种解决方案中的任何一种，必须已经构建了其他Web应用程序，并且不会自动监视它们的更改。您可以引用预构建的Web应用程序的打包WAR文件，也可以引用其扩展的等效文件。</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_with_jetty_run_distro"></a>带Jetty：运行发行</h4></div></div></div><p>只需配置包含您要部署的所有其他预构建Web应用程序的Jetty基础。</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="setting-system-properties"></a>设置系统属性</h3></div></div></div><p>您可以指定Jetty设置为执行插件的系统属性的属性名称/值对。此功能对于整理命令行并节省大量键入很有用。</p><p>但是， <span class="strong"><strong>有时无法使用此功能来设置系统属性</strong></span> -有时，使用System属性的软件组件已在maven运行时进行了初始化（在这种情况下，您将需要在命令行上提供System属性） ，或者在Jetty运行之前。在后一种情况下，您可以使用<a class="link" href="http://www.mojohaus.org/" target="_top">maven属性插件</a>来定义系统属性。这是一个将回送日志记录系统配置为Jetty记录器的示例：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.0-alpha-2&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;
        &lt;goal&gt;set-system-properties&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;properties&gt;
          &lt;property&gt;
            &lt;name&gt;logback.configurationFile&lt;/name&gt;
            &lt;value&gt;${project.baseUri}/resources/logback.xml&lt;/value&gt;
          &lt;/property&gt;
        &lt;/properties&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>如果已经设置了系统属性（例如，从命令行或JVM本身），则默认情况下，这些已配置的属性<span class="strong"><strong>不会</strong></span>覆盖它们（有关<force>参数的</force>使用，请参见下文<force>）。</force></p></div></blockquote></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="specifying-properties-in-pom"></a>在POM中指定系统属性</h4></div></div></div><p>这是有关如何在POM中指定系统属性的示例：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;systemProperties&gt;
      &lt;systemProperty&gt;
        &lt;name&gt;fooprop&lt;/name&gt;
        &lt;value&gt;222&lt;/value&gt;
      &lt;/systemProperty&gt;
    &lt;/systemProperties&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><p>要更改默认行为，以使这些系统属性覆盖命令行上的属性，请使用<code class="literal"><force></code>参数：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;systemProperties&gt;
      &lt;force&gt;true&lt;/force&gt;
      &lt;systemProperty&gt;
       &lt;name&gt;fooprop&lt;/name&gt;
       &lt;value&gt;222&lt;/value&gt;
     &lt;/systemProperty&gt;
    &lt;/systemProperties&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="specifying-properties-in-file"></a>在文件中指定系统属性</h4></div></div></div><p>您也可以在文件中指定系统属性。您以这种方式指定的系统属性<span class="strong"><strong>不会</strong></span>覆盖由JVM或直接通过POM在POM中在命令行上设置的系统属性。 <code class="literal">systemProperties</code> 。</p><p>假设我们有一个名为<code class="literal">mysys.props</code>其中包含以下内容：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>fooprop=222</code></pre><p>可以在插件上进行配置，如下所示：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;systemPropertiesFile&gt;${project.basedir}/mysys.props&lt;/systemPropertiesFile&gt;
    &lt;webApp&gt;
      &lt;contextPath&gt;/test&lt;/contextPath&gt;
    &lt;/webApp&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre><p>您可以通过设置System属性来指定文件<code class="literal">jetty.systemPropertiesFile</code>在命令行上。</p></div></div></div><script type="text/javascript">
      SyntaxHighlighter.all()
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tbody><tr><td width="40%" align="left"><a href="maven-and-jetty.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><td width="20%" align="center"><a href="maven-and-jetty.html" accesskey="u"><i class="fa fa-chevron-up" aria-hidden="true"></i>最佳</a></td><td width="40%" align="right"> <a href="jetty-maven-scanning.html" accesskey="n">下一个<i class="fa fa-chevron-right" aria-hidden="true"></i></a></td></tr><tr><td width="40%" align="left" valign="top">第23章Maven和Jetty</td><td width="20%" align="center"><a href="index.html" accesskey="h"><i class="fa fa-home" aria-hidden="true"></i>家</a></td><td width="40%" align="right" valign="top">Jetty Maven插件扫描的文件</td></tr></tbody></table></div><p xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"></p><div class="jetty-callout">看到错误或缺少的东西？
            <span class="callout"><a href="http://github.com/eclipse/jetty.project">在以下位置对此文档做出贡献<span class="website"><i class="fa fa-github" aria-hidden="true"></i> Github！</span></a></span> <span style="float:right"><i>（产生：2019-11-20）</i></span></div><p></p></body></html>