<html ><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>释放Jetty</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="jetty, servlet, servlet-api, cometd, http, websocket, eclipse, maven, java, server, software"><link rel="home" href="index.html" title="Jetty"><link rel="up" href="advanced-contributing.html" title="Chapter 35. Contributing to Jetty"><link rel="prev" href="security-reporting.html" title="Reporting Security Issues"><link rel="next" href="release-testing.html" title="Testing a Jetty Release"><link rel="shortcut icon" href="images/favicon.ico" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><link rel="stylesheet" href="css/highlighter/foundation.css"><script src="js/highlight.pack.js"></script><script>
      hljs.initHighlightingOnLoad();
    </script><link type="text/css" rel="stylesheet" href="css/font-awesome/font-awesome.min.css"></head><body bgcolor="white"  text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><tbody><tr><td style="width:25%"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-header-logo.png" alt="Jetty标志"></a><br><span style="font-size:small">版本：9.4.24.v20191120</span></td><td style="width:50%"></td></tr></tbody></table><div class="navheader" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><table width="100%" summary="Navigation header"><tbody><tr><th colspan="3" align="center">释放Jetty</th></tr><tr><td width="20%" align="left"><a href="security-reporting.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><th width="60%" align="center">第三十五章为Jetty做贡献<br><a href="index.html" accesskey="p"><i class="fa fa-home" aria-hidden="true"></i>家</a></th><td width="20%" align="right"> <a href="release-testing.html" accesskey="n">下一个<i class="fa fa-chevron-right" aria-hidden="true"></i></a></td></tr></tbody></table><hr></div><div class="jetty-callout" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><h5 class="callout"><a href="http://www.webtide.com/">通过<span class="website">www.webtide.com</span>与Jetty核心开发人员联系。</a></h5><p>内部/客户项目的私人支持...自定义扩展和发行版...无限期支持的版本快照...您的应用程序和Ajax / Comet项目的可伸缩性指南...赞助功能开发的开发服务</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear:both"><a name="releasing-jetty"></a>释放Jetty</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="releasing-jetty.html#releasing-process">构建和分阶段发布版本</a></span></dt><dt><span class="section"><a href="releasing-jetty.html#releasing-aggregates">构建和部署聚合Javadoc和Xref</a></span></dt><dt><span class="section"><a href="releasing-jetty.html#releasing-distributions">部署分发文件</a></span></dt><dt><span class="section"><a href="releasing-jetty.html#releasing-stable-links">更新稳定链接</a></span></dt><dt><span class="section"><a href="releasing-jetty.html#_building_an_osgi_p2_repository">建立OSGi P2储存库</a></span></dt><dt><span class="section"><a href="releasing-jetty.html#releasing-documentation">发布文件</a></span></dt></dl></div><p>释放Jetty有许多步骤。它不仅限于运行几个Maven命令，然后转移到更大更好的事情上。一旦完成了乐趣专家位，就会遇到许多与过程相关的问题。</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="releasing-process"></a>构建和分阶段发布版本</h3></div></div></div><p>该发行脚本适用于jetty-9（要发行jetty-7或jetty-8，请参见旧文档）。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">选择您的版本标识字符串。</p><p class="simpara">这些遵循严格的格式，并在下面的步骤listitem_title期间提示时使用。</p><pre class="literallayout">Release Version                : 9.0.0.v20130322  (v[year][month][day])
Next Development Version       : 9.0.1-SNAPSHOT
Tag Name                       : jetty-9.9.0.v20130322</pre></li><li class="listitem"><p class="simpara">我们使用<span class="emphasis"><em>release-9</em></span>分支来避免其他开发人员积极参与master分支的问题。</p><div class="screenexample"><pre class="screen">// Get all of the remotes
$ git pull origin
// Create a local tracking branch (if you haven't already)
$ git branch --track release-9 refs/remotes/origin/release-9
// Check out your local tracking branch.
$ git checkout release-9
// Merge from master into the branch (this becomes your point in time
// from master that you will be releasing from)
$ git merge --no-ff master</pre></div></li><li class="listitem"><p class="simpara">使用git日志中的更改更新VERSION.txt，这将填充自上次发行以来的已解决问题。</p><div class="screenexample"><pre class="screen">$ mvn -N -Pupdate-version</pre></div></li><li class="listitem"><p class="simpara">编辑VERSION.txt文件，以在此发行日期旁边的顶部设置<span class="emphasis"><em>发行版本</em></span> 。</p><div class="screenexample"><pre class="screen">$ vi VERSION.txt</pre></div></li><li class="listitem"><p class="simpara">确保所有内容都已提交并推送到github.com/eclipse/jetty.project</p><div class="screenexample"><pre class="screen">$ git commit -m "Updating VERSION.txt top section" VERSION.txt
$ git push origin release-9</pre></div></li><li class="listitem"><p class="simpara">准备发布</p><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>此步骤将更新<version>pom.xml文件中的<version>元素，使用这些新版本进行测试构建，然后将pom.xml更改提交到本地git repo。的<code class="literal">eclipse-release</code>为了引入Jetty集料，在备件上需要一个轮廓，因为该轮廓定义了一个模块，否则将被忽略。</version></version></p></div></blockquote></div><div class="screenexample"><pre class="screen">$ mvn release:prepare -DreleaseVersion=9.0.0.v20130322 \
                      -DdevelopmentVersion=9.0.1-SNAPSHOT \
                      -Dtag=jetty-9.0.0.v20130322 \
                      -Peclipse-release</pre></div></li><li class="listitem"><p class="simpara">执行发布</p><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>此步骤执行发行并将其部署到oss.sonatype.org登台存储库。</p></div></blockquote></div><div class="screenexample"><pre class="screen">$ mvn release:perform</pre></div></li><li class="listitem"><p class="simpara">为下一个开发版本设置文件。</p><p class="simpara">编辑<code class="literal">VERSION.txt</code>顶部的“ <span class="emphasis"><em>下一开发版本</em></span> ”。不要在这行上注明日期。</p><p class="simpara">确保所有内容都已提交并推送到github.com/eclipse/jetty.project</p><div class="screenexample"><pre class="screen">$ vi VERSION.txt
$ git commit -m "Updating VERSION.txt top section" VERSION.txt
$ git push origin release-9</pre></div></li><li class="listitem">关闭oss.sonatype.org上的登台存储库</li><li class="listitem">宣布阶段到邮件列表进行测试。</li><li class="listitem"><p class="simpara">一旦分阶段的存储库被其余提交者批准。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">在oss.sonatype.org上将登台存储库发布到Maven Central</li><li class="listitem"><p class="simpara">将版本9中的更改合并回主版本</p><div class="screenexample"><pre class="screen">$ git checkout master
$ git merge --no-ff release-9
$ git push origin master</pre></div></li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="releasing-aggregates"></a>构建和部署聚合Javadoc和Xref</h3></div></div></div><p>在.m2 / settings.xml文件中定义jetty.eclipse.website服务器条目。您需要访问dev.eclipse.org机器才能执行这些操作。如果您不知道是否可以访问此文件，则可能不知道，因此需要向项目负责人寻求帮助。</p><p>要构建和部署聚合的javadoc和jxr位：</p><div class="screenexample"><pre class="screen">$ cd target/checkout
$ mvn -Paggregate-site javadoc:aggregate jxr:jxr
$ mvn -N site:deploy</pre></div><p>这将生成汇总文档并将其部署到<code class="literal">/home/www/jetty/<project version>/jetty-project</code> download.eclipse.org上的目录。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="releasing-distributions"></a>部署分发文件</h3></div></div></div><p>由于我们还提供其他位置来下载Jetty分布，因此我们需要将其复制到位。尽管需要将它们本地化到您的特定执行环境，并且有一些脚本需要您授权才能将其放置在需要的地方。这些脚本位于：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem"><a class="link" href="http://git.eclipse.org/c/jetty/org.eclipse.jetty.admin.git/tree/release-scripts" target="_top">http://git.eclipse.org/c/jetty/org.eclipse.jetty.admin.git/tree/release-scripts</a> 。</li></ul></div><p>要将脚本本地化到您的环境：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">确保您已安装“ curl”</li><li class="listitem">编辑脚本并将所有ssh登录行替换为您自己的登录ID</li></ul></div><p>设置好这些后，您可以通过以下方式部署发布以使其黯然失色：</p><div class="screenexample"><pre class="screen">$ ./promote-to-eclipse.sh 9.0.0.v20130322</pre></div><p>这些脚本中的每个脚本都将从maven Central下载所有相关文件，然后将它们复制到Eclipse基础结构上的正确位置。在eclipse方面，如果它们仍然损坏，它们还将调整外部参照和javadoc文档链接，并重新生成eclipse下载站点上的所有html文件。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="releasing-stable-links"></a>更新稳定链接</h3></div></div></div><p>由于不允许我们在下载站点上使用符号链接，因此我们必须手动登录计算机并删除以前的稳定目录，然后使用新版本进行更新。维护我们在网站上使用的约定，将使所有<span class="emphasis"><em>稳定的</em></span>链接保持稳定，并且不需要更新到最新的主要Jetty构建版本：</p><div class="screenexample"><pre class="screen">$ ssh &lt;user&gt;@build.eclipse.org
$ cd ~downloads/jetty/
$ rm -Rf stable-9
$ cp -r &lt;version&gt; stable-9
$ ./index.sh</pre></div><p>对于所有Eclipse Jetty版本（无论版本），都需要完成此操作。另外，我们必须努力减少主要Eclipse下载资源上的Jetty占用，因此我们希望将较早的发行版移至Eclipse存档站点。</p><div class="screenexample"><pre class="screen">$ cd ~/downloads/jetty
$ mv &lt;old release&gt; /home/data/httpd/archive.eclipse.org/jetty/
$ ./index.sh</pre></div><p>我们需要定期对osgi P2存储库执行相同的操作，以将下载目录的大小保持在合理的大小。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_building_an_osgi_p2_repository"></a>建立OSGi P2储存库</h3></div></div></div><p>大多数Jetty罐也是osgi捆绑包，此外，我们还发布了一些特定的捆绑包， <a class="link" href="framework-jetty-osgi.html" title="OSGI">将jetty与osgi紧密集成在一起</a> 。为此，我们在Eclipse基础结构上使用了Hudson作业。您将需要具有访问<a class="link" href="https://ci.eclipse.org/shared/view/Jetty-RT/" target="_top">https://ci.eclipse.org/shared/view/Jetty-RT/的</a>权限</p><p>Hudson的工作为每个主要版本的jetty构建了osgi p2存储库：7（jetty-rt-bundles-7），8（jetty-rt-bundles-8）和9（jetty-rt-bundles-9） 。您将需要开始手动构建与您要发布的Jetty版本相匹配的作业。系统将提示您向构建提供一些参数：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">pack_and_sign</span></dt><dd>默认情况下，此复选框被勾选。让它打勾。</dd><dt><span class="term">jetty_release-version</span></dt><dd>输入发行版的版本号，例如9.2.6.v20141205</dd><dt><span class="term">force_context_qualifier</span></dt><dd>将此留空。</dd><dt><span class="term">set_pom_version</span></dt><dd>输入major.minor.point版本号，例如9.2.6</dd><dt><span class="term">delete_tycho_meta</span></dt><dd>默认情况下已勾选。留下打勾</dd><dt><span class="term">分店名称</span></dt><dd>这不是Jetty释放的分支。而是指推动Jettyp2释放的项目分支结构。对于所选作业，它已经正确设置了，因此除非有充分的理由，否则不要更改它。</dd></dl></div><p>提供必要的参数后，构建作业将开始，捆绑软件和更新站点的zip文件将生成并自动放置在<code class="literal">/home/data/httpd/downlaod.eclipse.org/jetty/updates/jetty-bundles-[MAJOR.VERSION].x</code> ，其中[MAJOR.VERSION]与您正在执行的Jetty版本的主要版本号匹配。这些文件将从<a class="link" href="http://download.eclipse.org/jetty/updates/jetty-bundles-" target="_top">MAJOR.VERSION</a> .x中可见，其中[MAJOR.VERSION]对应于您正在执行的Jetty发行版的主要版本。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="releasing-documentation"></a>发布文件</h3></div></div></div><p>要发布Jetty文档，需要注意两个git存储库。Jetty文档位于我们的github存储库中，Jetty网站位于eclipse。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Jetty文件</span></dt><dd><a class="link" href="https://github.com/jetty-project/jetty-documentation" target="_top">https://github.com/jetty-project/jetty-documentation</a></dd><dt><span class="term">Jetty网站</span></dt><dd><a class="link" href="http://git.eclipse.org/c/www.eclipse.org/jetty.git" target="_top">http://git.eclipse.org/c/www.eclipse.org/jetty.git</a></dd></dl></div><p>执行以下步骤来发布该发行版的文档：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">签出Jetty文件库。</li><li class="listitem">编辑<version>jetty-documentation pom.xml的并将其<span class="emphasis"><em>本地</em></span>更改为发行版号，例如9.2.6.v20141205</version></li><li class="listitem">使用mvn clean install构建文档</li><li class="listitem">签出Jetty网站</li><li class="listitem">在documentation /目录中，创建一个与发行版号相同的目录，例如9.2.6.v20141205 /</li><li class="listitem">复制已建<code class="literal">documentation</code>从jetty-documentation / target / docbkx / html / jetty进入新目录</li><li class="listitem">编辑<code class="literal">index.html</code>文件在<code class="literal">documentation</code>目录并添加新发布的文档URL。确保您遵循其他示例并包括<code class="literal">rel="nofollow"</code>链接上的属性，以便搜索引擎不会抓取新创建的文档，否则我们将受到SEO中重复的内容处罚。</li><li class="listitem">提交对Jetty网站项目的更改</li></ol></div><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>有一个单独的Jenkins构建工作，该工作将文档发布到<a class="link" href="http://www.eclipse.org/jetty/documentation/current" target="_top">http://www.eclipse.org/jetty/documentation/current，这</a>是由将更改的文件推送到jetty-documentation项目触发的。如果您对<version>步骤2中的<version>编号进行更改<version>，则这些版本将使用相同的发行版本号。如果您<span class="emphasis"><em>不</em></span>提交版本号更改，或者最好<span class="emphasis"><em>不要</em></span>更改版本号，请确保将其设置为您的Jetty主要发行版号的下一个-SNAPSHOT版本号。</version></version></version></p></div></blockquote></div></div></div><script type="text/javascript">
      SyntaxHighlighter.all()
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tbody><tr><td width="40%" align="left"><a href="security-reporting.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><td width="20%" align="center"><a href="advanced-contributing.html" accesskey="u"><i class="fa fa-chevron-up" aria-hidden="true"></i>最佳</a></td><td width="40%" align="right"> <a href="release-testing.html" accesskey="n">下一个<i class="fa fa-chevron-right" aria-hidden="true"></i></a></td></tr><tr><td width="40%" align="left" valign="top">报告安全问题</td><td width="20%" align="center"><a href="index.html" accesskey="h"><i class="fa fa-home" aria-hidden="true"></i>家</a></td><td width="40%" align="right" valign="top">测试Jetty释放</td></tr></tbody></table></div><p xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"></p><div class="jetty-callout">看到错误或缺少的东西？
            <span class="callout"><a href="http://github.com/eclipse/jetty.project">在以下位置对此文档做出贡献<span class="website"><i class="fa fa-github" aria-hidden="true"></i> Github！</span></a></span> <span style="float:right"><i>（产生：2019-11-20）</i></span></div><p></p></body></html>