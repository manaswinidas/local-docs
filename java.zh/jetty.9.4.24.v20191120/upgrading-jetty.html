<html ><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>第三十六章升级码头</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="jetty, servlet, servlet-api, cometd, http, websocket, eclipse, maven, java, server, software"><link rel="home" href="index.html" title="Jetty"><link rel="up" href="jetty-ref-guide.html" title="Part V. Jetty Reference Guide"><link rel="prev" href="release-testing.html" title="Testing a Jetty Release"><link rel="shortcut icon" href="images/favicon.ico" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><link rel="stylesheet" href="css/highlighter/foundation.css"><script src="js/highlight.pack.js"></script><script>
      hljs.initHighlightingOnLoad();
    </script><link type="text/css" rel="stylesheet" href="css/font-awesome/font-awesome.min.css"></head><body bgcolor="white"  text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><tbody><tr><td style="width:25%"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-header-logo.png" alt="码头标志"></a><br><span style="font-size:small">版本：9.4.24.v20191120</span></td><td style="width:50%"></td></tr></tbody></table><div class="navheader" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><table width="100%" summary="Navigation header"><tbody><tr><th colspan="3" align="center">第三十六章升级码头</th></tr><tr><td width="20%" align="left"><a href="release-testing.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><th width="60%" align="center">第五部分码头参考指南<br><a href="index.html" accesskey="p"><i class="fa fa-home" aria-hidden="true"></i>家</a></th><td width="20%" align="right"> </td></tr></tbody></table><hr></div><div class="jetty-callout" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><h5 class="callout"><a href="http://www.webtide.com/">通过<span class="website">www.webtide.com</span>与Jetty核心开发人员联系。</a></h5><p>内部/客户项目的私人支持...自定义扩展和发行版...无限期支持的版本快照...您的应用程序和Ajax / Comet项目的可伸缩性指南...赞助功能开发的开发服务</p></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="upgrading-jetty"></a>第三十六章升级码头</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl class="toc"><dt><span class="section"><a href="upgrading-jetty.html#_upgrading_from_jetty_9_3_x_to_jetty_9_4_0">从Jetty 9.3.x升级到Jetty 9.4.0</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear:both"><a name="_upgrading_from_jetty_9_3_x_to_jetty_9_4_0"></a>从Jetty 9.3.x升级到Jetty 9.4.0</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="upgrading-jetty.html#_the_jetty_sh_script">jetty.sh脚本</a></span></dt><dt><span class="section"><a href="upgrading-jetty.html#_removed_classes">删除的课程</a></span></dt><dt><span class="section"><a href="upgrading-jetty.html#_module_changes_in_jetty_9_4">Jetty 9.4中的模块更改</a></span></dt><dt><span class="section"><a href="upgrading-jetty.html#_session_management">会话管理</a></span></dt><dt><span class="section"><a href="upgrading-jetty.html#_servletcontainerinitializers">ServletContainerInitializers</a></span></dt></dl></div><p>本指南的目的是帮助用户从Jetty 9.3.x迁移到9.4.0。它并不全面，但涵盖了该发行版中包含的许多主要更改，这些更改可能证明是用户遇到的问题。</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_the_jetty_sh_script"></a> jetty.sh脚本</h3></div></div></div><p>文件<code class="literal">jetty.sh</code> ，通常用于在Linux / Unix机器上将Jetty作为服务启动，仅进行了很小的更改，例如添加了<a class="link" href="https://wiki.debian.org/LSBInitScripts" target="_top">LSB标签</a> 。</p><p>您可以安全地更换<code class="literal">jetty.sh</code> Jetty 9.3附带的文件以及在Jetty 9.4中找到的版本。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_removed_classes"></a>删除的课程</h3></div></div></div><p><code class="literal">ConcurrentArrayQueue</code>已从Jetty 9.3中删除使用，并且该类已作为Jetty 9.4的一部分完全删除。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_module_changes_in_jetty_9_4"></a> Jetty 9.4中的模块更改</h3></div></div></div><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">Jetty 9.3模块</th><th align="left" valign="top">Jetty 9.4模块</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">logging</code></p></td><td align="left" valign="top"><p><code class="literal">console-capture</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">infinispan</code></p></td><td align="left" valign="top"><p><code class="literal">session-store-infinispan-embedded</code>要么<code class="literal">session-store-infinispan-remote</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">jdbc-sessions</code></p></td><td align="left" valign="top"><p><code class="literal">session-store-jdbc</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">gcloud-memcached-sessions</code> ， <code class="literal">gcloud-session-idmgr</code>和<code class="literal">gcloud-sessions</code></p></td><td align="left" valign="top"><p><code class="literal">session-store-gcloud</code>和<code class="literal">session-store-cache</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">nosql</code></p></td><td align="left" valign="top"><p><code class="literal">session-store-mongo</code></p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_logging_modules"></a>记录模块</h4></div></div></div><p>模块<code class="literal">logging</code>在Jetty 9.4中不再可用。</p><p>Jetty 9.3中存在的日志记录模块结构已被Jetty 9.4中更细粒度的结构取代，因此您现在有更多可用的选项，这些选项也更易于配置。</p><p>迁移路径会有所不同，具体取决于您是否已完全自定义此模块。</p><p>如果您安装了Jetty 9.3，并且同时拥有<code class="literal">$jetty.base/modules/logging.mod</code>和<code class="literal">$jetty.base/etc/jetty-logging.xml</code> ，那么此模块是您本地的<code class="literal">$jetty.base</code>设置，并将像以前一样被Jetty 9.4使用。您的实施无需任何更改。</p><p>如果有<code class="literal">$jetty.base/modules/logging.mod</code>要么<code class="literal">$jetty.base/etc/jetty-logging.xml</code>失踪了，那你就是依靠那些<code class="literal">$jetty.home</code> ，在Jetty 9.3中存在，但在Jetty 9.4中不再可用。</p><p>码头9.3 <code class="literal">logging</code>模块已重命名为<code class="literal">console-capture</code>在Jetty 9.4中。您需要打开您的Jetty 9.3 <code class="literal">start.ini</code>并替换对<code class="literal">logging</code>与模块<code class="literal">console-capture</code> 。</p><p>例如，在现有的Jetty 9.3中<code class="literal">start.ini</code>文件用于日志记录的模块声明如下所示：</p><div class="screenexample"><pre class="screen">--module=logging
jetty.logging.retainDays=7</pre></div><p>在9.4中，应将其替换为：</p><div class="screenexample"><pre class="screen">--module=console-capture
jetty.console-capture.retainDays=7</pre></div><p>您的Jetty 9.3的属性可能存在<code class="literal">start.ini</code> ， 如<code class="literal">jetty.logging.retainDays</code>仍将在Jetty 9.4中工作，但在Jetty 9.4启动时将显示警告，表示将其替换为通讯员<code class="literal">jetty.console-capture.*</code>诸如<code class="literal">jetty.console-capture.retainDays</code> 。</p><p>有关Jetty 9.4体系结构中的日志记录模块的信息，请参阅有关<a class="link" href="configuring-logging-modules.html" title="Jetty Logging Integrations (SLF4J, Log4j, Logback, JCL, JUL)">配置日志记录模块</a>的部分<a class="link" href="configuring-logging-modules.html" title="码头记录集成（SLF4J，Log4j，Logback，JCL，JUL）">。</a></p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_session_management"></a>会话管理</h3></div></div></div><p>会议管理在Jetty 9.4中得到了重大改进。会话功能已经过重构，以促进代码重用，更轻松的配置和更轻松的自定义。以前，用户需要编辑xml配置文件，而在Jetty 9.4中，所有会话行为均由各个会话模块公开的属性控制。用户现在可以通过选择会话模块的组成来配置会话管理。</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_change_overview"></a>变更总览</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">SessionIdManager</span></dt><dd>以前，存在不同类的SessionIdManager-具有不同的配置选项-取决于所选的群集技术类型。在Jetty 9.4中，只有一种类型，即<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/server/session/DefaultSessionIdManager.html" target="_top">org.eclipse.jetty.server.session。DefaultSessionIdManager</a> 。</dd><dt><span class="term">会话管理器</span></dt><dd><p class="simpara">以前，根据选择的集群技术类型，存在不同的SessionManager类。在Jetty 9.4中，我们删除了SessionManager类，并将其功能划分为不同的，更易于扩展和可组合的类：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">一般的二传手</span></dt><dd>所有常见的会话设置（例如maxInactiveInterval和与会话Cookie相关的配置）已移至<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/server/session/SessionHandler.html" target="_top">org.eclipse.jetty.server.session。会话处理程序</a></dd></dl></div></dd></dl></div><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">9.3 SessionManager</th><th align="left" valign="top">9.4 SessionHandler</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">setMaxInactiveInterval(sec)</code></p></td><td align="left" valign="top"><p><code class="literal">setMaxInactiveInterval(sec)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setSessionCookie(String)</code></p></td><td align="left" valign="top"><p><code class="literal">setSessionCookie(String)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setRefreshCookieAge(sec)</code></p></td><td align="left" valign="top"><p><code class="literal">setRefreshCookieAge(sec)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setSecureRequestOnly(boolean)</code></p></td><td align="left" valign="top"><p><code class="literal">setSecureRequestOnly(boolean)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setSessionIdPathParameterName(String)</code></p></td><td align="left" valign="top"><p><code class="literal">setSessionIdPathParameterName(String)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setSessionTrackingModes(Set<SessionTrackingMode>)</code></p></td><td align="left" valign="top"><p><code class="literal">setSessionTrackingModes(Set<SessionTrackingMode>)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setHttpOnly(boolean)</code></p></td><td align="left" valign="top"><p><code class="literal">setHttpOnly(boolean)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setUsingCookies(boolean)</code></p></td><td align="left" valign="top"><p><code class="literal">setUsingCookies(boolean)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">setCheckingRemoteSessionIdEncoding(boolean)</code></p></td><td align="left" valign="top"><p><code class="literal">setCheckingRemoteSessionIdEncoding(boolean)</code></p></td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">坚持不懈</span></dt><dd>在Jetty 9.3中<code class="literal">SessionManagers</code> （有时<code class="literal">SessionIdManagers</code> ）实施了持久化机制。在Jetty 9.4中，我们已将此功能移至<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/server/session/SessionDataStore.html" target="_top"><code class="literal">org.eclipse.jetty.server.session.SessionDataStore</code></a> 。</dd><dt><span class="term">会话缓存</span></dt><dd>在Jetty 9.3中<code class="literal">SessionManager</code>在内存中保存了会话对象的映射。在Jetty 9.4中，这已移至新<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/org/eclipse/jetty/server/session/SessionCache.html" target="_top"><code class="literal">org.eclipse.jetty.server.session.SessionCache</code></a>接口。</dd></dl></div><p>有关更多信息，请参阅<a class="link" href="session-management.html#jetty-sessions-architecture" title="Session Architecture">Jetty Session Architecture</a>文档<a class="link" href="session-management.html#jetty-sessions-architecture" title="会话架构">。</a></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_default_sessions"></a>默认会话</h4></div></div></div><p>与早期版本的Jetty一样，如果您未显式配置任何会话模块，则将启用默认会话基础结构。在以前的Jetty版本中，这称为“哈希”会话管理。新的默认提供与旧的哈希会话管理类似的功能：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">会话清除线程每10分钟运行一次，并删除过期的会话</li><li class="listitem">会话ID管理器，它生成唯一的会话ID，并在上下文转发期间处理会话ID共享</li><li class="listitem">会话对象的内存中缓存。</li></ul></div><p>在相同上下文中对相同会话的请求共享相同的会话对象。会话对象将保留在高速缓存中，直到它们到期或显式失效为止。</p><p>如果您想进一步配置默认设置，请启用<code class="literal">session-cache-hash</code>模块。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>由于会话对象在服务器重启后不会持续存在，因此不存在兼容性问题。</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_sessions_using_the_filesystem"></a>使用文件系统的会话</h4></div></div></div><p>在早期版本的Jetty中，持久存储到本地文件系统的会话是“哈希”会话管理器的一个选项。在Jetty 9.4中，它已重构为自己的可配置模块<code class="literal">session-store-file</code> 。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>早期版本的jetty存储到文件的会话与jetty-9.4会话不兼容。这是文件格式的比较，请注意，文件内容按文件输出的顺序列出：</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">码头9.3</th><th align="left" valign="top">码头9.4</th></tr></thead><tbody><tr><td align="left" valign="top"><p>文档名称：<code class="literal">sessionid</code></p></td><td align="left" valign="top"><p>文档名称：<code class="literal">expirytime_contextpath_vhost_sessionid</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">sessionid (utf)</code></p></td><td align="left" valign="top"><p><code class="literal">sessionid (utf)</code></p></td></tr><tr><td align="left" valign="top"> </td><td align="left" valign="top"><p><code class="literal">contextpath (utf)</code></p></td></tr><tr><td align="left" valign="top"> </td><td align="left" valign="top"><p><code class="literal">vhost (utf)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">nodeid (utf)</code></p></td><td align="left" valign="top"><p><code class="literal">lastnode (utf)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">createtime (long)</code></p></td><td align="left" valign="top"><p><code class="literal">createtime (long)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">accessed (long)</code></p></td><td align="left" valign="top"><p><code class="literal">accessed (long)</code></p></td></tr><tr><td align="left" valign="top"> </td><td align="left" valign="top"><p><code class="literal">lastaccessed (long)</code></p></td></tr><tr><td align="left" valign="top"> </td><td align="left" valign="top"><p><code class="literal">cookiesettime (long)</code></p></td></tr><tr><td align="left" valign="top"> </td><td align="left" valign="top"><p><code class="literal">expiry (long)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">requests (int)</code></p></td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"> </td><td align="left" valign="top"><p><code class="literal">maxInactive (long)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">attributes size (int)</code></p></td><td align="left" valign="top"><p><code class="literal">attributes size (int)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">attributes serialized (obj)</code></p></td><td align="left" valign="top"><p><code class="literal">attributes serialized (obj)</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">maxInactive (long)</code></p></td><td align="left" valign="top"> </td></tr></tbody></table></div><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>现在仅在请求时才加载会话数据。以前的功能，例如<code class="literal">setLazyLoad</code>已被删除。</p></div></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_jdbc_sessions"></a> JDBC会话</h4></div></div></div><p>与早期版本的Jetty一样，会话可以持久保存到关系数据库中。启用<code class="literal">session-store-jdbc</code>模块。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>早期版本的jetty存储到数据库的会话与jetty-9.4会话不兼容。不兼容程度不大：在9.4码头<code class="literal">rowid</code>主键列不再使用，并且主键是以下各项的组合<code class="literal">(sessionid,contextpath,vhost)</code>列。</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_nosql_sessions"></a> NoSQL会话</h4></div></div></div><p>与早期版本的Jetty一样，会话可以持久保存到文档数据库中。Jetty支持Mongo文档数据库。启用<code class="literal">session-store-mongo</code>模块。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>早期版本的jetty存储到mongo的会话与jetty-9.4会话不兼容。每个子文档的键代表上下文的会话信息在jetty-9.3和9.4之间是不同的：</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">码头9.3</th><th align="left" valign="top">码头9.4</th></tr></thead><tbody><tr><td align="left" valign="top"><p>每个上下文密钥为：vhost + context + path，其中空的vhosts =“ ::”和root context =“ *”，并且/替换为_</p></td><td align="left" valign="top"><p>每个上下文密钥为：vhost：contextpath，其中空的vhosts =“ 0_0_0_0”和根上下文=“”，并/替换为_</p></td></tr><tr><td align="left" valign="top"><p>例如“ :: / contextA”</p></td><td align="left" valign="top"><p>例如“ 0_0_0_0：_contextA”</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_infinispan_sessions"></a> Infinispan会议</h4></div></div></div><p>与早期版本的Jetty一样，会话可以通过Infinispan集群到进程内或远程infinispan实例。启用<code class="literal">session-store-infinispan</code>模块。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>通过jetty-9.3存储在infinispan中的会话与jetty-9.4不兼容。在Jetty 9.3中，存储的代表会话数据的序列化对象是<code class="literal">org.eclipse.jetty.session.infinispan.SerializableSessionData</code> 。在Jetty 9.4中，序列化的对象是<code class="literal">org.eclipse.jetty.serer.session.SessionData</code> 。</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_gcloud_datastore"></a> GCloud数据存储</h4></div></div></div><p>与早期版本的Jetty一样，会话可能会保留在Google的GCloud Datastore中。启用<code class="literal">session-store-gcloud</code>模块。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>Jetty 9.3存储到GCloud Datastore中的会话与Jetty 9.4 <span class="strong"><strong>不兼容</strong></span> ，尽管不兼容很简单：会话id实体属性的名称已更改：</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">码头9.3</th><th align="left" valign="top">码头9.4</th></tr></thead><tbody><tr><td align="left" valign="top"><p>类：<code class="literal">GCloudSession</code></p></td><td align="left" valign="top"><p>类：<code class="literal">GCloudSession</code></p></td></tr><tr><td align="left" valign="top"><p>键：<code class="literal">contextpath_vhost_sessionid</code></p></td><td align="left" valign="top"><p>键：<code class="literal">contextpath_vhost_sessionid</code></p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>“ clusterId”</strong></span> ：<code class="literal">sessionId</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>“ id”</strong></span> ：<code class="literal">sessionId</code></p></td></tr><tr><td align="left" valign="top"><p>“ contextPath”：<code class="literal">contextpath</code></p></td><td align="left" valign="top"><p>“ contextPath”：<code class="literal">contextpath</code></p></td></tr><tr><td align="left" valign="top"><p>“虚拟主机”：<code class="literal">vhost</code></p></td><td align="left" valign="top"><p>“虚拟主机”：<code class="literal">vhost</code></p></td></tr><tr><td align="left" valign="top"><p>“已访问”：<code class="literal">accesstime</code></p></td><td align="left" valign="top"><p>“已访问”：<code class="literal">accesstime</code></p></td></tr><tr><td align="left" valign="top"><p>“ lastAccessed”：<code class="literal">lastaccesstime</code></p></td><td align="left" valign="top"><p>“ lastAccessed”：<code class="literal">lastaccesstime</code></p></td></tr><tr><td align="left" valign="top"><p>“ createTime”：<code class="literal">createtime</code></p></td><td align="left" valign="top"><p>“ createTime”：<code class="literal">createtime</code></p></td></tr><tr><td align="left" valign="top"><p>“ cookieSetTime”：<code class="literal">cookiesettime</code></p></td><td align="left" valign="top"><p>“ cookieSetTime”：<code class="literal">cookiesettime</code></p></td></tr><tr><td align="left" valign="top"><p>“ lastNode”：<code class="literal">lastnode</code></p></td><td align="left" valign="top"><p>“ lastNode”：<code class="literal">lastnode</code></p></td></tr><tr><td align="left" valign="top"><p>“到期”：<code class="literal">expiry</code></p></td><td align="left" valign="top"><p>“到期”：<code class="literal">expiry</code></p></td></tr><tr><td align="left" valign="top"><p>“ maxInactive”：<code class="literal">maxInactive</code></p></td><td align="left" valign="top"><p>“ maxInactive”：<code class="literal">maxInactive</code></p></td></tr><tr><td align="left" valign="top"><p>“属性”：<code class="literal">blob</code></p></td><td align="left" valign="top"><p>“属性”：<code class="literal">blob</code></p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_gcloud_datastore_with_memcached"></a>具有Memcached的GCloud数据存储</h4></div></div></div><p>与早期版本的Jetty一样，会话既可以持久保存到Google的GCloud Datastore，也可以缓存到Memcached中以实现更快的访问。启用<code class="literal">session-store-gcloud</code>和<code class="literal">session-store-cache</code>模块。</p><p><span class="strong"><strong>兼容性</strong></span></p><p>早期版本的jetty存储到Memcached中的会话与Jetty 9.4不兼容。存储的先前版本的码头<code class="literal">org.eclipse.jetty.gcloud.memcached.session.SerializableSessionData</code>而Jetty 9.4商店<code class="literal">org.eclipse.jetty.server.session.SessionData</code> 。</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_servletcontainerinitializers"></a> ServletContainerInitializers</h3></div></div></div><p>从Jetty 9.4.4开始，除非<code class="literal">web.xml</code>是3.0或更高版本<code class="literal">ServletContainerInitializers</code>将发现容器类路径上的内容。希望使用的用户<code class="literal">ServletContainerInitializers</code>从具有较旧版本的网络应用程序中<code class="literal">web.xml</code>必须要么升级他们的<code class="literal">web.xml</code>版本或通话<code class="literal">WebAppContext.setConfigurationDiscovered(true)</code>以编程方式或在xml中。升级<code class="literal">web.xml</code>版本是可取的。</p></div></div></div><script type="text/javascript">
      SyntaxHighlighter.all()
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tbody><tr><td width="40%" align="left"><a href="release-testing.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><td width="20%" align="center"><a href="jetty-ref-guide.html" accesskey="u"><i class="fa fa-chevron-up" aria-hidden="true"></i>最佳</a></td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">测试码头释放</td><td width="20%" align="center"><a href="index.html" accesskey="h"><i class="fa fa-home" aria-hidden="true"></i>家</a></td><td width="40%" align="right" valign="top"> </td></tr></tbody></table></div><p xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"></p><div class="jetty-callout">看到错误或缺少的东西？
            <span class="callout"><a href="http://github.com/eclipse/jetty.project">在以下位置对此文档做出贡献<span class="website"><i class="fa fa-github" aria-hidden="true"></i> Github！</span></a></span> <span style="float:right"><i>（产生：2019-11-20）</i></span></div><p></p></body></html>