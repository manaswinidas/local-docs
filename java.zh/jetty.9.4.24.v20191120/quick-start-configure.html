<html ><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>第3章。码头配置简介</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="jetty, servlet, servlet-api, cometd, http, websocket, eclipse, maven, java, server, software"><link rel="home" href="index.html" title="Jetty"><link rel="up" href="quick-start.html" title="Part I. Getting Started With Jetty"><link rel="prev" href="quickstart-deploying-webapps.html" title="Deploying Web Applications"><link rel="next" href="quickstart-config-what.html" title="What to Configure in Jetty"><link rel="shortcut icon" href="images/favicon.ico" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><link rel="stylesheet" href="css/highlighter/foundation.css"><script src="js/highlight.pack.js"></script><script>
      hljs.initHighlightingOnLoad();
    </script><link type="text/css" rel="stylesheet" href="css/font-awesome/font-awesome.min.css"></head><body bgcolor="white"  text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><tbody><tr><td style="width:25%"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-header-logo.png" alt="码头标志"></a><br><span style="font-size:small">版本：9.4.24.v20191120</span></td><td style="width:50%"></td></tr></tbody></table><div class="navheader" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><table width="100%" summary="Navigation header"><tbody><tr><th colspan="3" align="center">第3章。码头配置简介</th></tr><tr><td width="20%" align="left"><a href="quickstart-deploying-webapps.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><th width="60%" align="center">第一部分：Jetty入门<br><a href="index.html" accesskey="p"><i class="fa fa-home" aria-hidden="true"></i>家</a></th><td width="20%" align="right"> <a href="quickstart-config-what.html" accesskey="n">下一个<i class="fa fa-chevron-right" aria-hidden="true"></i></a></td></tr></tbody></table><hr></div><div class="jetty-callout" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><h5 class="callout"><a href="http://www.webtide.com/">通过<span class="website">www.webtide.com</span>与Jetty核心开发人员联系。</a></h5><p>内部/客户项目的私人支持...自定义扩展和发行版...无限期支持的版本快照...您的应用程序和Ajax / Comet项目的可伸缩性指南...赞助功能开发的开发服务</p></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="quick-start-configure"></a>第3章。码头配置简介</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl class="toc"><dt><span class="section"><a href="quick-start-configure.html#quickstart-config-how">如何配置码头</a></span></dt><dt><span class="section"><a href="quickstart-config-what.html">在Jetty中配置什么</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear:both"><a name="quickstart-config-how"></a>如何配置码头</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="quick-start-configure.html#_jetty_pojo_configuration">Jetty POJO配置</a></span></dt><dt><span class="section"><a href="quick-start-configure.html#_jetty_start_configuration_files">码头启动配置文件</a></span></dt><dt><span class="section"><a href="quick-start-configure.html#_a_closer_look">近距离观察</a></span></dt><dt><span class="section"><a href="quick-start-configure.html#_other_configuration_files">其他配置文件</a></span></dt><dt><span class="section"><a href="quick-start-configure.html#_jetty_ioc_xml_format">Jetty IoC XML格式</a></span></dt></dl></div><p>要了解Jetty的配置，您需要了解“如何”和“什么”。本节从如何执行配置的角度介绍了如何配置Jetty。<a class="link" href="quickstart-config-what.html" title="在Jetty中配置什么">下一节</a>概述了可以使用这些机制配置的操作组件和字段。</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_jetty_pojo_configuration"></a> Jetty POJO配置</h3></div></div></div><p>Jetty的核心组件是普通的Java对象（ <a class="link" href="http://en.wikipedia.org/wiki/Plain_Old_Java_Object" target="_top">POJO</a> ）。配置Jetty的过程主要是在Jetty POJO上实例化，组装和设置字段的过程。这可以通过以下方式实现：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">编写Java代码以直接实例化和组装Jetty对象。这被称为<a class="xref" href="embedding-jetty.html" title="嵌入码头">嵌入码头</a> 。</li><li class="listitem">使用Jetty XML配置（即<a class="link" href="http://en.wikipedia.org/wiki/Inversion_of_Control" target="_top">控制反转（IoC）</a>框架）将Jetty对象实例化并组装为XML对象。的<code class="literal">etc/jetty.xml</code>文件是主要的Jetty XML配置文件，但还有许多其他文件<code class="literal">etc/jetty-__feature__.xml</code> Jetty发行版中包含的文件。</li><li class="listitem">使用像<a class="link" href="http://en.wikipedia.org/wiki/Spring_Framework" target="_top">Spring</a>这样的第三方<a class="link" href="http://en.wikipedia.org/wiki/Inversion_of_Control" target="_top">IoC</a>框架，将Jetty对象实例化并组装为Spring bean。</li></ul></div><p>因为主要的Jetty配置是由IoC完成的，所以<a class="link" href="http://www.eclipse.org/jetty/javadoc/9.4.24.v20191120/" target="_top">Jetty API文档</a>是最终的配置参考。</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_jetty_start_configuration_files"></a>码头启动配置文件</h3></div></div></div><p>Jetty发行版使用以下配置文件来通过实例化，注入和启动服务器。 <code class="literal">start.jar</code>机制。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ini</code>档案</span></dt><dd><p class="simpara">码头启动机制使用命令行， <code class="literal">$JETTY_BASE/start.ini</code>和/或<code class="literal">$JETTY_BASE/start.d/*.ini</code>文件以创建有效的参数命令行。参数可能是：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">形式的模块激活<code class="literal">--module=name</code></li><li class="listitem">属性形式<code class="literal">name=value</code> ，用于参数化Jetty IoC XML</li><li class="listitem">Jetty IoC（或Spring）XML格式的XML文件</li><li class="listitem">包含其他启动属性的标准<a class="link" href="http://en.wikipedia.org/wiki/Java_properties" target="_top">Java属性文件</a></li><li class="listitem">其他start.jar选项（请参阅<code class="literal">java -jar start.jar --help</code> ）</li><li class="listitem">一些JVM选项与<code class="literal">--exec</code> ， 如<code class="literal">-Xbootclasspath</code> 。</li></ul></div></dd></dl></div><div class="blockquote"><blockquote class="blockquote"><div class="note" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-asterisk" aria-hidden="true"></i>注意</h3><p>它是<code class="literal">ini</code>位于Jetty基本目录中的文件（如果不同于Jetty主目录），通常会对其进行编辑以更改配置（例如，更改端口）。</p></div></blockquote></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">mod</code>档案</span></dt><dd><p class="simpara">的<code class="literal">$JETTY_HOME/modules/*.mod</code>文件包含可通过以下方式激活的模块的定义<code class="literal">--module=name</code> 。每<code class="literal">mod</code>文件定义：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">用于订购和激活的模块依赖性</li><li class="listitem">模块需要将其添加到类路径中的库</li><li class="listitem">模块需要添加到有效命令行的XML文件</li><li class="listitem">激活模块所需的文件</li><li class="listitem"><p class="simpara">模板<code class="literal">ini</code>激活时使用的文件<code class="literal">--add-to-start=name</code>选项</p><p class="simpara">通常，很少编辑模块文件，然后才进行重大的结构更改。的<code class="literal">*.mod</code>文件通常位于<code class="literal">$JETTY_HOME/modules/</code> ，但可以将其他模块或已编辑的模块添加到<code class="literal">$JETTY_BASE/module</code> 。如果需要更改模块，则最佳做法是复制特定的<code class="literal">*.mod</code>来自的文件<code class="literal">$JETTY_HOME/modules/</code>至<code class="literal">$JETTY_BASE/modules/</code>在被修改之前。</p></li></ul></div></dd><dt><span class="term">XML文件</span></dt><dd>命令行中列出了<a class="link" href="reference-section.html#jetty-xml-syntax" title="Jetty XML语法">Jetty IoC XML格式</a>或Spring IoC格式的XML文件。 <code class="literal">ini</code>文件，或通过模块定义添加到有效命令行。XML文件实例化并注入了构成服务器，连接器和上下文的实际Java对象。因为Jetty IoC XML文件使用属性，所以大多数常见的配置任务都可以在不编辑这些XML文件的情况下完成，而可以通过在相应的属性中编辑该属性来完成。 <code class="literal">ini</code>文件。XML文件通常位于<code class="literal">$JETTY_HOME/etc/</code> ，但可能会将其他或经过编辑的XML文件添加到<code class="literal">$JETTY_BASE/etc/</code> 。
<span class="strong"><strong>注意</strong></span>如果需要更改XML配置，则最佳做法是从以下位置复制XML文件： <code class="literal">$JETTY_HOME/etc/</code>至<code class="literal">$JETTY_BASE/etc/</code>在被修改之前。</dd></dl></div><p>以下是各种Jetty配置文件（ <code class="literal">ini</code> ， <code class="literal">mod</code>和XML）相关：</p><p><span class="inlinemediaobject"><img src="images/Jetty_Configuration_File_Relationships.png" width="693" alt="图片"></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_a_closer_look"></a>近距离观察</h3></div></div></div><p>简单地说：XML文件负责实例化组成服务器的Jetty POJO。它们定义了属性，用户可以修改这些属性来满足其服务器的需求。这些XML文件在分发中按类型细分，因此可以在用户/服务器需要它们时使用它们。例如，服务器可能需要HTTP和HTTPS功能，但选择不使用HTTP / 2和Websocket。</p><p>模块文件允许用户快速轻松地从其服务器实现中启用和删除功能。它们包括关联的XML文件中包含的不同属性的模板，以及指向它们所引用的XML或JAR文件的指针。激活模块后，这些属性将添加到相关的<code class="literal">ini</code>用户可以在其中配置文件以满足其需求的文件。我们将在下一章中进一步详细讨论模块。</p><p>大多数用户将在Ini文件中花费大量时间来编辑服务器的配置。如前所述，它们包含在其关联的XML文件中定义的属性，而这些XML文件又引用了Jetty Java对象。</p><p>首先，这可能有点让人不知所措，所以让我们看一个示例-在这种情况下， <code class="literal">http</code>模块。我们将从ini文件向后处理到关联的模块，然后是有问题的XML文件。</p><p>首先， <code class="literal">http.ini</code>文件。如果我们看一下它的内容，将会看到以下内容：</p><div class="screenexample"><pre class="screen">$ cat start.d/http.ini
# ---------------------------------------
# Module: http
# Enables a HTTP connector on the server.
# By default HTTP/1 is support, but HTTP2C can
# be added to the connector with the http2c module.
# ---------------------------------------
--module=http

### HTTP Connector Configuration

## Connector host/address to bind to
# jetty.http.host=0.0.0.0

## Connector port to listen on
# jetty.http.port=8080

## Connector idle timeout in milliseconds
# jetty.http.idleTimeout=30000

## Number of acceptors (-1 picks default based on number of cores)
# jetty.http.acceptors=-1

## Number of selectors (-1 picks default based on number of cores)
# jetty.http.selectors=-1

## ServerSocketChannel backlog (0 picks platform default)
# jetty.http.acceptorQueueSize=0

## Thread priority delta to give to acceptor threads
# jetty.http.acceptorPriorityDelta=0

## Reserve threads for high priority tasks (-1 use a heuristic, 0 no reserved threads)
# jetty.http.reservedThreads=-1

## Connect Timeout in milliseconds
# jetty.http.connectTimeout=15000

## HTTP Compliance: RFC7230, RFC2616, LEGACY
# jetty.http.compliance=RFC7230</pre></div><p>那我们看到了什么？我们有一个模块名称，模块激活（ <code class="literal">--module=http</code> ），说明以及要配置的属性。那些将具有一些脚本/编码经验的人可能会注意到，大多数行都带有注释<code class="literal">#</code>你是正确的。启用模块后， <code class="literal">ini</code>创建文件后，您在此处看到的所有属性都设置为这些默认值-服务器已经在使用显示的值。如果您想更改其中一个属性，例如<code class="literal">jetty.http.port</code> ，您只需取消注释该行并更改值。例如：</p><div class="screenexample"><pre class="screen">$ cat start.d/http.ini
# ---------------------------------------
# Module: http
# Enables a HTTP connector on the server.
# By default HTTP/1 is support, but HTTP2C can
# be added to the connector with the http2c module.
# ---------------------------------------
--module=http

### HTTP Connector Configuration

## Connector host/address to bind to
# jetty.http.host=0.0.0.0

## Connector port to listen on
jetty.http.port=1234
...</pre></div><p>如前所述，这些属性是基于相关模块填充到此ini文件中的。标准Jetty模块以适当的名称存在于Jetty发行版的主页中<code class="literal">modules</code>目录。因此，让我们快速看一下相关的<code class="literal">$JETTY_HOME/modules/http.mod</code>文件：</p><div class="screenexample"><pre class="screen">$ cat $JETTY_HOME/modules/http.mod
[description]
Enables a HTTP connector on the server.
By default HTTP/1 is support, but HTTP2C can
be added to the connector with the http2c module.

[tags]
connector
http

[depend]
server

[xml]
etc/jetty-http.xml

[ini-template]
### HTTP Connector Configuration

## Connector host/address to bind to
# jetty.http.host=0.0.0.0

## Connector port to listen on
# jetty.http.port=8080

## Connector idle timeout in milliseconds
# jetty.http.idleTimeout=30000
...</pre></div><p>乍一看，它看起来很像<code class="literal">ini</code>我们刚刚看过的文件。我们仍然有描述和可以编辑的属性，但是现在我们还有其他几个部分。这些其他部分将在我们有关模块的章节中进一步介绍，但目前值得一提的是<code class="literal">[xml]</code>和<code class="literal">[ini-template]</code>部分。您可能会感到困惑， <code class="literal">[ini-template]</code>包含用于放置在相关属性中的属性的模板（参见图） <code class="literal">ini</code>激活模块时的文件。的<code class="literal">[xml]</code>部分是指这些属性所基于的文件和XML文件的位置。重要的是要注意，并非每个模块文件都具有相同的节，但是大多数文件在结构上应相同。</p><p>既然我们知道这些属性与哪个XML文件相关，我们就可以导航到该文件并进行查看。</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>$ cat $JETTY_HOME/etc/jetty-http.xml
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd"&gt;

&lt;!-- ============================================================= --&gt;
&lt;!-- Configure the Jetty Server instance with an ID "Server"       --&gt;
&lt;!-- by adding a HTTP connector.                                   --&gt;
&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;
&lt;!-- ============================================================= --&gt;
&lt;Configure id="Server" class="org.eclipse.jetty.server.Server"&gt;

  &lt;!-- =========================================================== --&gt;
  &lt;!-- Add a HTTP Connector.                                       --&gt;
  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;
  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;
  &lt;!-- instance defined in jetty.xml                               --&gt;
  &lt;!--                                                             --&gt;
  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;
  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;
  &lt;!-- that may be set here.                                       --&gt;
  &lt;!-- =========================================================== --&gt;
  &lt;Call name="addConnector"&gt;
    &lt;Arg&gt;
      &lt;New id="httpConnector" class="org.eclipse.jetty.server.ServerConnector"&gt;
        &lt;Arg name="server"&gt;&lt;Ref refid="Server" /&gt;&lt;/Arg&gt;
        &lt;Arg name="acceptors" type="int"&gt;&lt;Property name="jetty.http.acceptors" deprecated="http.acceptors" default="-1"/&gt;&lt;/Arg&gt;
        &lt;Arg name="selectors" type="int"&gt;&lt;Property name="jetty.http.selectors" deprecated="http.selectors" default="-1"/&gt;&lt;/Arg&gt;
        &lt;Arg name="factories"&gt;
          &lt;Array type="org.eclipse.jetty.server.ConnectionFactory"&gt;
            &lt;Item&gt;
              &lt;New class="org.eclipse.jetty.server.HttpConnectionFactory"&gt;
                &lt;Arg name="config"&gt;&lt;Ref refid="httpConfig" /&gt;&lt;/Arg&gt;
                &lt;Arg name="compliance"&gt;&lt;Call class="org.eclipse.jetty.http.HttpCompliance" name="valueOf"&gt;&lt;Arg&gt;&lt;Property name="jetty.http.compliance" default="RFC7230"/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;
              &lt;/New&gt;
            &lt;/Item&gt;
          &lt;/Array&gt;
        &lt;/Arg&gt;
        &lt;Set name="host"&gt;&lt;Property name="jetty.http.host" deprecated="jetty.host" /&gt;&lt;/Set&gt;
        &lt;Set name="port"&gt;&lt;Property name="jetty.http.port" deprecated="jetty.port" default="8080" /&gt;&lt;/Set&gt;
        &lt;Set name="idleTimeout"&gt;&lt;Property name="jetty.http.idleTimeout" deprecated="http.timeout" default="30000"/&gt;&lt;/Set&gt;
        &lt;Set name="acceptorPriorityDelta"&gt;&lt;Property name="jetty.http.acceptorPriorityDelta" deprecated="http.acceptorPriorityDelta" default="0"/&gt;&lt;/Set&gt;
        &lt;Set name="acceptQueueSize"&gt;&lt;Property name="jetty.http.acceptQueueSize" deprecated="http.acceptQueueSize" default="0"/&gt;&lt;/Set&gt;
        &lt;Get name="SelectorManager"&gt;
          &lt;Set name="connectTimeout"&gt;&lt;Property name="jetty.http.connectTimeout" default="15000"/&gt;&lt;/Set&gt;
          &lt;Set name="reservedThreads"&gt;&lt;Property name="jetty.http.reservedThreads" default="-2"/&gt;&lt;/Set&gt;
        &lt;/Get&gt;
      &lt;/New&gt;
    &lt;/Arg&gt;
  &lt;/Call&gt;

&lt;/Configure&gt;</code></pre><p>现在我们可以看到这些属性在我们的哪里<code class="literal">ini</code>和模块文件来自。在Jetty XML文件中，Jetty对象栩栩如生。设置了定义的属性，这些属性链接回jar库，并根据用户的说明运行服务器。</p><div class="blockquote"><blockquote class="blockquote"><div class="important" xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title"><i class="fa fa-plus" aria-hidden="true"></i>重要</h3><p>重要的是要记住，你<span class="strong"><strong>不</strong></span>应该修改的XML文件是很重要的<code class="literal">$JETTY_HOME</code> 。如果出于某种原因确实要更改XML文件的操作方式，则最好在您的计算机中复制该文件。 <code class="literal">$JETTY_BASE</code>在一个<code class="literal">/etc</code>目录。码头永远是第一位的<code class="literal">$JETTY_BASE</code>用于配置。</p></div></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_other_configuration_files"></a>其他配置文件</h3></div></div></div><p>除了上述配置文件外，服务器的配置还可以使用以下文件类型：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">上下文XML文件</span></dt><dd>在以下<a class="link" href="reference-section.html#jetty-xml-syntax" title="Jetty XML Syntax">网址</a>中发现的任何<a class="link" href="reference-section.html#jetty-xml-syntax" title="Jetty XML语法">Jetty IoC XML格式</a>或Spring IoC格式的XML文件： <code class="literal">/webapps</code>目录由部署模块用来实例化和注入<code class="literal">HttpContext</code>实例来创建特定的上下文。这些可以是标准的Web应用程序，也可以是从特殊用途处理程序创建的定制上下文。</dd><dt><span class="term">web.xml</span></dt><dd><p class="simpara"><a class="link" href="http://en.wikipedia.org/wiki/Servlet" target="_top">Servlet</a>规范定义了<a class="link" href="http://en.wikipedia.org/wiki/Web.xml" target="_top"><code class="literal">web.xml</code></a>部署描述符，用于定义和配置<a class="link" href="http://en.wikipedia.org/wiki/Web_application" target="_top">Web应用程序</a>使用的过滤器，Servlet和资源。码头<code class="literal">WebAppContext</code>组件使用此XML格式执行以下操作：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">设置Web应用程序上下文的默认配置。</li><li class="listitem">解释Web应用程序随附的特定于应用程序的配置， <code class="literal">WEB-INF/web.xml</code>文件。</li><li class="listitem"><p class="simpara">解释包含在<code class="literal">META-INF</code>内的Jar文件目录<code class="literal">WEB-INF/lib.</code></p><p class="simpara">通常情况下<code class="literal">web.xml</code> Web应用程序的文件位于<code class="literal">WEB-INF/web.xml</code>战争文件/目录中的位置或作为<code class="literal">web.xml</code>碎片与<code class="literal">.jar</code>在中找到文件<code class="literal">WEB-INF/lib</code> 。码头还支持多种<code class="literal">web.xml</code>文件，以便可以在之前应用默认描述符<code class="literal">WEB-INF/web.xml</code> （通常设置为<code class="literal">etc/webdefault.xml</code>由部署模块）和覆盖描述符可以在之后应用<code class="literal">WEB-INF/web.xml</code> （通常由上下文XML文件设置，请参见<code class="literal">test.xml</code> ）</p></li></ul></div></dd><dt><span class="term">属性文件</span></dt><dd><p class="simpara">标准<a class="link" href="http://en.wikipedia.org/wiki/Java_properties" target="_top">Java属性文件</a>还以多种方式用于Jetty配置：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc"><li class="listitem">通过使用参数化Jetty IoC XML <code class="literal">Property</code>元件。</li><li class="listitem">配置默认日志记录机制（ <code class="literal">StdErrLog</code> ）。可以利用其他日志记录框架，也可以使用属性文件（例如， <code class="literal">log4j</code> ）。</li><li class="listitem">作为用于登录用户名和凭据的简单数据库。</li></ul></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_jetty_ioc_xml_format"></a> Jetty IoC XML格式</h3></div></div></div><p>要了解<a class="link" href="reference-section.html#jetty-xml-syntax" title="Jetty XML语法">Jetty IoC XML格式</a> ，请考虑以下示例，该示例以Java实例化并配置了嵌入式Jetty服务器：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>//
//  ========================================================================
//  Copyright (c) 1995-2019 Mort Bay Consulting Pty. Ltd.
//  ------------------------------------------------------------------------
//  All rights reserved. This program and the accompanying materials
//  are made available under the terms of the Eclipse Public License v1.0
//  and Apache License v2.0 which accompanies this distribution.
//
//      The Eclipse Public License is available at
//      http://www.eclipse.org/legal/epl-v10.html
//
//      The Apache License v2.0 is available at
//      http://www.opensource.org/licenses/apache2.0.php
//
//  You may elect to redistribute this code under either of these licenses.
//  ========================================================================
//

package org.eclipse.jetty.embedded;

import org.eclipse.jetty.server.Connector;
import org.eclipse.jetty.server.Handler;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.ServerConnector;
import org.eclipse.jetty.server.handler.DefaultHandler;
import org.eclipse.jetty.server.handler.HandlerCollection;
import org.eclipse.jetty.servlet.ServletContextHandler;

public class ExampleServer
{
    public static Server createServer(int port)
    {
        Server server = new Server();

        ServerConnector connector = new ServerConnector(server);
        connector.setPort(port);
        server.setConnectors(new Connector[]{connector});

        ServletContextHandler context = new ServletContextHandler();
        context.setContextPath("/");
        context.addServlet(HelloServlet.class, "/hello");
        context.addServlet(AsyncEchoServlet.class, "/echo/*");

        HandlerCollection handlers = new HandlerCollection();
        handlers.setHandlers(new Handler[]{context, new DefaultHandler()});
        server.setHandler(handlers);

        return server;
    }

    public static void main(String[] args) throws Exception
    {
        int port = ExampleUtil.getPort(args, "jetty.http.port", 8080);
        Server server = createServer(port);
        server.start();
        server.join();
    }
}</code></pre><p><a class="link" href="reference-section.html#jetty-xml-syntax" title="Jetty XML Syntax">Jetty IoC XML格式</a>允许您以<a class="link" href="reference-section.html#jetty-xml-syntax" title="Jetty XML语法">XML</a>实例化和配置完全相同的服务器，而无需编写任何Java代码：</p><pre xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><code>&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd"&gt;

&lt;Configure id="ExampleServer" class="org.eclipse.jetty.server.Server"&gt;

  &lt;Set name="connectors"&gt;
    &lt;Array type="org.eclipse.jetty.server.Connector"&gt;
      &lt;Item&gt;
        &lt;New class="org.eclipse.jetty.server.ServerConnector"&gt;
          &lt;Arg&gt;&lt;Ref refid="ExampleServer"/&gt;&lt;/Arg&gt;
          &lt;Set name="port"&gt;
            &lt;Property name="http.port" default="8080" /&gt;
          &lt;/Set&gt;
        &lt;/New&gt;
      &lt;/Item&gt;
    &lt;/Array&gt;
  &lt;/Set&gt;

  &lt;New id="context" class="org.eclipse.jetty.servlet.ServletContextHandler"&gt;
    &lt;Set name="contextPath"&gt;/hello&lt;/Set&gt;
    &lt;Call name="addServlet"&gt;
      &lt;Arg&gt;org.eclipse.jetty.embedded.HelloServlet&lt;/Arg&gt;
      &lt;Arg&gt;/&lt;/Arg&gt;
    &lt;/Call&gt;
  &lt;/New&gt;

  &lt;Set name="handler"&gt;
    &lt;New class="org.eclipse.jetty.server.handler.HandlerCollection"&gt;
      &lt;Set name="handlers"&gt;
        &lt;Array type="org.eclipse.jetty.server.Handler"&gt;
          &lt;Item&gt;
            &lt;Ref refid="context" /&gt;
          &lt;/Item&gt;
          &lt;Item&gt;
            &lt;New class="org.eclipse.jetty.server.handler.DefaultHandler" /&gt;
          &lt;/Item&gt;
        &lt;/Array&gt;
      &lt;/Set&gt;
    &lt;/New&gt;
  &lt;/Set&gt;
&lt;/Configure&gt;</code></pre></div></div></div><script type="text/javascript">
      SyntaxHighlighter.all()
    </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tbody><tr><td width="40%" align="left"><a href="quickstart-deploying-webapps.html" accesskey="p"><i class="fa fa-chevron-left" aria-hidden="true"></i>以前</a> </td><td width="20%" align="center"><a href="quick-start.html" accesskey="u"><i class="fa fa-chevron-up" aria-hidden="true"></i>最佳</a></td><td width="40%" align="right"> <a href="quickstart-config-what.html" accesskey="n">下一个<i class="fa fa-chevron-right" aria-hidden="true"></i></a></td></tr><tr><td width="40%" align="left" valign="top">部署Web应用程序</td><td width="20%" align="center"><a href="index.html" accesskey="h"><i class="fa fa-home" aria-hidden="true"></i>家</a></td><td width="40%" align="right" valign="top">在Jetty中配置什么</td></tr></tbody></table></div><p xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"></p><div class="jetty-callout">看到错误或缺少的东西？
            <span class="callout"><a href="http://github.com/eclipse/jetty.project">在以下位置对此文档做出贡献<span class="website"><i class="fa fa-github" aria-hidden="true"></i> Github！</span></a></span> <span style="float:right"><i>（产生：2019-11-20）</i></span></div><p></p></body></html>