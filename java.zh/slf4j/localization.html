<html  xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
    <title>本土化</title>
    <link rel="stylesheet" type="text/css" href="css/site.css" media="screen">
    <link rel="stylesheet" type="text/css" href="css/prettify.css">
  </head>
  <body  onload="prettyPrint()">
    
    <script type="text/javascript">prefix='';</script>

    <script type="text/javascript" src="js/prettify.js"></script>
    <script src="templates/header.js" type="text/javascript"></script>
    <div id="left">
      <noscript>请打开Javascript查看此菜单</noscript>
      <script src="templates/left.js" type="text/javascript"></script>
    </div>
    <div id="right">
      <script src="templates/right.js" type="text/javascript"></script>
    </div>

    <div id="content">
  

    <h1>本地化支持</h1>
    
    <p>对slf4j-dev邮件列表的<a href="http://markmail.org/thread/drcabfc6z42sijdo">讨论</a>产生了一个名为<a href="http://cal10n.qos.ch"><b>CAL10N或编译器辅助本地化</b></a>的开源项目。顾名思义，CAL10N专注于Java应用程序中的本地化/国际化问题。
    </p>

    <p>的<code>org.slf4j.cal10n</code>随<em>slf4j-ext-2.0.0-</em> alpha0.jar一起提供的软件包在CALI0N的顶部增加了一个非常薄的层，以提供本地化的日志记录。</p>
    
    
    <p>一旦拥有<a href="http://cal10n.qos.ch/apidocs/ch/qos/cal10n/IMessageConveyor.html">IMessageConveyor</a>实例的句柄，就可以创建<a href="xref/org/slf4j/cal10n/LocLoggerFactory.html">LocLoggerFactory</a> ，而它又可以创建能够进行本地化日志记录的<a href="xref/org/slf4j/cal10n/LocLogger.html">LocLogger</a>实例。
    </p>


    <p>让我们假设您已经在应用程序中定义了本地化消息。根据CAL10N的理念，您已以枚举类型声明了这些消息的密钥<code>Production</code> 。</p>


   <pre class="prettyprint source">import ch.qos.cal10n.LocaleData;
import ch.qos.cal10n.Locale;
import ch.qos.cal10n.BaseName;

@BaseName("production")
@LocaleData( { @Locale("en_UK"), @Locale("ja_JP") })
public enum Production  {
  APPLICATION_STARTED,
  APPLICATION_STOPPED,
  ...
  DB_CONNECTION,
  DB_CONNECTION_FAILURE;
}</pre>

    <p>假定您已为各种语言环境“ en_UK”和“ ja_JP”创建了适当的捆绑文件。这是“ en_UK”语言环境的样本包。
    </p>


    <pre class="source">APPLICATION_STARTED=Application <b>{0}</b> has started.
APPLICATION_STOPPED=Application <b>{0}</b> has stopped.
... </pre>

    <p>然后，您可以实例化一个<code>IMessageConveyor</code> ，将其注入<code>LogLoggerFactory</code> ，检索多个<code>LogLogger</code>实例按名称命名并注销，如下面的示例代码所示。
    </p>
    

    <pre class="prettyprint source">import java.util.Locale;

import org.slf4j.cal10n.LocLogger;
import org.slf4j.cal10n.LocLoggerFactory;

import ch.qos.cal10n.IMessageConveyor;
import ch.qos.cal10n.MessageConveyor;

public class MyApplication {

  // create a message conveyor for a given locale 
  IMessageConveyor  messageConveyor = new MessageConveyor(Locale.UK);
  
  // create the LogLoggerFactory
  LocLoggerFactory llFactory_uk = new LocLoggerFactory(messageConveyor);
  
  // create a locLogger
  LocLogger locLogger = llFactory_uk.getLocLogger(this.getClass());
  

  public void applicationStart() {
    locLogger.info(Production.APPLICATION_STARTED, "fooApp");
    // ..
  }
  
  public void applicationStop() {
    locLogger.info(Production.APPLICATION_STOPPED, "fooApp");
    // ...
  }
}</pre>

    <p>假设存在资源束<em>production_en_UK.properties</em> ，并且已为信息级别启用了底层日志记录框架，那么日志消息将以英国英语输出。
    </p>

    <p>请注意<code>LogLogger</code>是常规SLF4J记录器，具有支持本地化的其他方法。对于将枚举作为第一个参数的其他方法， <code>LogLogger</code>遵循由<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html">java.text定义的标准Java约定进行参数替换</a><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html">。MessageFormat</a>类。对于将字符串作为第一个参数的非本地化日志， <code>LogLogger</code>遵循{}惯例，所有惯例<code>org.slf4j.Logger</code>实现。
    </p>

    <p>这是说明差异的示例。</p>
    
    <pre  class="prettyprint source">import ...;
public class MyApplication {

  IMessageConveyor  messageConveyor = new MessageConveyor(Locale.UK);
  LocLoggerFactory llFactory_uk = new LocLoggerFactory(messageConveyor);
  LocLogger locLogger = llFactory_uk.getLocLogger(this.getClass());

  public void someMethod() {
    // follows the MessageFormat convention
    locLogger.info(Production.APPLICATION_STARTED, "fooApp");

   // follows the {} convention
   logLogger.info("Hello {}", name);
   ...  
  }  
}</pre>
    <script src="templates/footer.js" type="text/javascript"></script>
    </div>
  

</body></html>