<html><head></head><body lang="zh-Hans" ><!-- This manual is for the GNU Source Release Collection (version
2014.10.11, updated 6 January 2014).

Copyright (C) 2011, 2012, 2013, 2014 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License." --><!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<title>GNU Source Release Collection 2014.10.11</title>

<meta name="description" content="GNU Source Release Collection 2014.10.11">
<meta name="keywords" content="GNU Source Release Collection 2014.10.11">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="Top">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="dir.html#Top" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">





<h1 class="settitle" align="center">GNU Source Release Collection 2014.10.11</h1>



<a name="SEC_Contents"></a>
<h2 class="contents-heading">目录</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1引言</a>
  <ul class="no-bullet">
    <li><a name="toc-Building-GNU-packages-1" href="#Building-GNU-packages">1.1构建GNU软件包</a></li>
  </ul></li>
  <li><a name="toc-Getting-started-1" href="#Getting-started">2入门</a>
  <ul class="no-bullet">
    <li><a name="toc-Initial-setup-1" href="#Initial-setup">2.1初始设置</a></li>
    <li><a name="toc-Building-a-simple-package-1" href="#Building-a-simple-package">2.2构建一个简单的程序包</a></li>
    <li><a name="toc-Installing-a-package-1" href="#Installing-a-package">2.3安装软件包</a></li>
    <li><a name="toc-Setting-your-environment-1" href="#Setting-your-environment">2.4设置环境</a></li>
    <li><a name="toc-Useful-targets-1" href="#Useful-targets">2.5有用的目标</a></li>
    <li><a name="toc-Complex-packages-1" href="#Complex-packages">2.6复杂包装</a></li>
    <li><a name="toc-Finding-packages-1" href="#Finding-packages">2.7查找包裹</a></li>
  </ul></li>
  <li><a name="toc-Advanced-configuration-1" href="#Advanced-configuration">3高级配置</a>
  <ul class="no-bullet">
    <li><a name="toc-Global-configuration-1" href="#Global-configuration">3.1全局配置</a></li>
    <li><a name="toc-Package-configuration-1" href="#Package-configuration">3.2软件包配置</a></li>
    <li><a name="toc-Patching-packages-1" href="#Patching-packages">3.3补丁包</a></li>
    <li><a name="toc-Package-versions-1" href="#Package-versions">3.4套件版本</a></li>
  </ul></li>
  <li><a name="toc-Technical-information-1" href="#Technical-information">附录A技术信息</a>
  <ul class="no-bullet">
    <li><a name="toc-The-GSRC-build-system-1" href="#The-GSRC-build-system">A.1 GSRC构建系统</a></li>
    <li><a name="toc-Anatomy-of-a-GSRC-Makefile-1" href="#Anatomy-of-a-GSRC-Makefile">A.2 GSRC Makefile的剖析</a>
    <ul class="no-bullet">
      <li><a name="toc-Metadata-variables-1" href="#Metadata-variables">A.2.1元数据变量</a></li>
      <li><a name="toc-Build-variables-1" href="#Build-variables">A.2.2构建变量</a></li>
      <li><a name="toc-Build-recipes-1" href="#Build-recipes">A.2.3建立配方</a></li>
      <li><a name="toc-A-simple-example-1" href="#A-simple-example">A.2.4一个简单的例子</a></li>
      <li><a name="toc-A-complex-example-1" href="#A-complex-example">A.2.5一个复杂的例子</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">附录B GNU自由文档许可证</a></li>
</ul>
</div>



<a name="Top"></a>
<div class="header">
<p>下一页： <a href="#Introduction" rel="next" accesskey="n">简介</a> ，上一页：（ <a href="dir.html#Top" rel="prev" accesskey="p">目录）</a> ，上页：（ <a href="dir.html#Top" rel="up" accesskey="u">目录）</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="GNU-Source-Release-Collection"></a>
<h1 class="top">GNU源代码发布合集</h1>

<p>本手册适用于GNU Source Release Collection（2014.10.11版，2014年1月6日）。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Introduction" accesskey="1">简介</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Getting-started" accesskey="2">入门</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Advanced-configuration" accesskey="3">高级配置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Technical-information" accesskey="4">技术信息</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#GNU-Free-Documentation-License" accesskey="5">GNU自由文档许可证</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"> &mdash; The Detailed Node Listing &mdash;

Introduction

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Building-GNU-packages" accesskey="6">构建GNU软件包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Getting started

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Initial-setup" accesskey="7">初始设置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Building-a-simple-package" accesskey="8">构建一个简单的程序包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Installing-a-package" accesskey="9">安装软件包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Setting-your-environment">设置环境</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Useful-targets">有用的目标</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Complex-packages">复杂包装</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Finding-packages">查找软件包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Advanced configuration

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Global-configuration">全局配置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Package-configuration">软件包配置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Patching-packages">补丁包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Package-versions">软件包版本</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Technical information

</pre></th></tr><tr><td align="left" valign="top">• <a href="#The-GSRC-build-system">GSRC构建系统</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Anatomy-of-a-GSRC-Makefile">GSRC Makefile的剖析</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Anatomy of a GSRC Makefile

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Metadata-variables">元数据变量</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Build-variables">构建变量</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Build-recipes">建立配方</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#A-simple-example">一个简单的例子</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#A-complex-example">一个复杂的例子</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr></tbody></table>


<hr>
<a name="Introduction"></a>
<div class="header">
<p>下一页： <a href="#Getting-started" rel="next" accesskey="n">入门</a> ，上一篇： <a href="#Top" rel="prev" accesskey="p">顶部</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Introduction-1"></a>
<h2 class="chapter">1引言</h2>

<p>GNU Source Release Collection（GSRC）提供了一种在现有发行版上安装最新GNU软件包的简单方法。通过使用GSRC，GNU源软件包从<code>ftp.gnu.org</code>会自动下载，编译并安装到您的主目录或系统范围的目录中，例如<code>/opt</code> 。
</p>
<p>它的核心是以最合适的形式表示GNU系统的当前状态：可构建和可安装的源代码。GSRC使您可以轻松地从GNU系统中发现出色的新软件，以及提供优于标准软件发行版的其他好处。例如，它允许您轻松地在没有权限安装系统范围软件的系统上自行安装GNU软件。或在随操作系统分发的软件包过时或未按您的喜好配置时安装最新的未修补软件包。
</p>
<p>GSRC基于Nick Moffitt的GAR构建系统和Adam Sampson的GARstow增强功能。GAR受到BSD Ports（一个基于Makefile的构建系统）的启发，并使用GNU Make编写。用于GNOME的GARNOME构建系统是使用GAR的系统的另一个示例。</p>
<p>请注意，GSRC并非旨在成为完整的软件包管理系统或源分发。这是从现有系统上的源代码编译GNU软件包的更便捷的方法。
</p>
<p>由于GSRC并不是完整的发行版，因此有时您需要从发行版中安装其他软件包以构建和运行GNU程序。例如，GSRC本身不包括Perl或Python，因此您需要确保已为使用它们的GNU程序安装了它们。
</p>





<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Building-GNU-packages" accesskey="1">构建GNU软件包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>


<hr>
<a name="Building-GNU-packages"></a>
<div class="header">
<p>上一篇： <a href="#Introduction" rel="prev" accesskey="p">简介</a> ，上一篇： <a href="#Introduction" rel="up" accesskey="u">简介</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Building-GNU-packages-1"></a>
<h3 class="section">1.1构建GNU软件包</h3>

<p>如果您从未手工构建过GNU软件包，本节将简要介绍该过程，以便您对GSRC的工作有所了解。如果您已经对此很熟悉，则可以跳过本节。
</p>
<p>构建过程是通过输入到外壳程序中的命令执行的，通常在终端或终端仿真器中完成。在以下示例中，美元符号表示<em>shell提示符</em> ，表示您输入命令的时间点，而提示符后的字符表示您必须输入的命令。尽管大部分构建过程都方便地实现了自动化，因此您无需手动编译每个文件，但仍必须采取一些步骤。
</p>
<p>例如，要构建“ hello” 2.9版软件包，必须在终端中执行以下步骤：</p>
<ol>
<li>下载包装并解压<div class="example">
<pre class="example">$ wget http://ftpmirror.gnu.org/gnu/hello/hello-2.9.tar.gz
$ tar xvfz hello-2.9.tar.gz
</pre></div>

</li><li>跑过<samp>configure</samp>脚本<div class="example">
<pre class="example">$ cd hello-2.9
$ ./configure
</pre></div>

</li><li>编译源代码<div class="example">
<pre class="example">$ make
</pre></div>

</li><li>安装它<div class="example">
<pre class="example">$ make install
</pre></div>

</li></ol>

<p>在某些不幸的情况下，该过程并不那么直接，可能需要您进行一些额外的干预。GSRC摘录了其中的大多数步骤，因此您只需输入以下内容即可安装程序： <code>make install</code> 。
</p>

<hr>
<a name="Getting-started"></a>
<div class="header">
<p>下一页： <a href="#Advanced-configuration" rel="next" accesskey="n">高级配置</a> ，上一页： <a href="#Introduction" rel="prev" accesskey="p">简介</a> ，向上： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Getting-started-1"></a>
<h2 class="chapter">2入门</h2>

<p>GSRC是直接使用Bazaar版本控制系统或通过压缩存档分发的。您可以使用以下方法从Bazaar存储库中签出最新版本：</p>
<div class="example">
<pre class="example">$ bzr checkout bzr://bzr.savannah.gnu.org/gsrc/trunk/ gsrc
</pre></div>

<p>这将创建一个目录<samp>gsrc</samp> 。GNU软件包的构建定义在<samp>gnu</samp>子目录。大型子项目，例如GNOME，有其自己的包含软件包的子目录（即<samp>gnome</samp> ）。的<samp>external</samp>子目录包含对依赖项的引用，您可能必须在GSRC之外安装依赖项，例如通过GNU / Linux发行版的程序包管理器（APT，Pacman，Yum等）。如果给定程序包需要这些依赖关系，而在系统上找不到这些依赖关系，则会自动通知您。最后， <samp>decommissioned</samp>目录包含已退役的以前的GNU软件包。
</p>
<p>每个包在其父目录中都有自己的子目录，例如<samp>gnu/emacs</samp>要么<samp>gnome/evince</samp> 。软件包目录包含一个<samp>config.mk</samp>用于配置软件包的文件和一个<samp>Makefile</samp>用于建造它。这个<samp>Makefile</samp>将自动执行<samp>./configure</samp>和<code>make</code>构建GNU软件包所需的命令。
</p>
<p>要保持最新版本的GNU软件，您可以将最新更改引入到本地GSRC副本中：</p>
<div class="example">
<pre class="example">$ bzr update
</pre></div>

<p>另外，也可以从<a href="http://ftpmirror.gnu.org/gnu/gsrc">http://ftpmirror.gnu.org/gnu/gsrc</a>下载GSRC的每半年一次的“快照”。</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Initial-setup" accesskey="1">初始设置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Building-a-simple-package" accesskey="2">构建一个简单的程序包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Installing-a-package" accesskey="3">安装软件包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Setting-your-environment" accesskey="4">设置环境</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Useful-targets" accesskey="5">有用的目标</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Complex-packages" accesskey="6">复杂包装</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Finding-packages" accesskey="7">查找软件包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>


<hr>
<a name="Initial-setup"></a>
<div class="header">
<p>下一页： <a href="#Building-a-simple-package" rel="next" accesskey="n">构建一个简单的程序包</a> ，上一页： <a href="#Getting-started" rel="prev" accesskey="p">入门</a> ，向上： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Initial-setup-1"></a>
<h3 class="section">2.1初始设置</h3>

<p>如果您已从Bazaar存储库中签出源代码树，则需要使用以下命令创建构建文件，</p>
<div class="example">
<pre class="example">$ ./bootstrap
</pre></div>

<p>在构建任何软件包之前，您将需要运行顶级配置脚本。只有一个配置参数，即安装前缀，用<samp>--prefix</samp> 。例如，将所有已编译的软件包安装在<samp>/gnu</samp>使用：</p>
<div class="example">
<pre class="example">$ ./configure --prefix=/gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for recsel... /usr/bin/recsel
checking for recfmt... /usr/bin/recfmt
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating gsrc
config.status: creating config.mk
config.status: creating setup.sh
config.status: creating GNUmakefile
config.status: creating doc/Makefile
</pre></div>

<p>您可以选择安装文档和<samp>gsrc</samp>脚本（请参阅<a href="#Finding-packages">查找软件包</a> ）。请注意，这些文件已安装到上一步中指定的目录中。确保将您的环境设置为可以使用它们（请参阅<a href="#Setting-your-environment">设置环境</a> ）。
</p>
<div class="example">
<pre class="example">$ make install
</pre></div>


<hr>
<a name="Building-a-simple-package"></a>
<div class="header">
<p>下一篇： <a href="#Installing-a-package" rel="next" accesskey="n">安装软件包</a> ，上一篇： <a href="#Initial-setup" rel="prev" accesskey="p">初始设置</a> ，上一篇： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Building-a-simple-package-1"></a>
<h3 class="section">2.2构建一个简单的程序包</h3>

<p>与GSRC的所有交互都通过程序Make进行。当您通过<code>make</code>命令时，你通常必须提供一个<em>目标</em>是告诉make它<em>的配方</em> ，由一系列预先定义的命令，要执行。例如， <samp>build</samp>目标会告诉Make执行配方来构建软件，而<samp>install</samp>目标将执行安装食谱。通常，通常会使用默认配方来构建该软件，从而可以省略<samp>build</samp>目标。
</p>
<p>因此，在GSRC中，要构建任何包，请输入<code>make build</code> （或者， <code>make</code> ）放在包的子目录中。您可以使用<code>cd</code>命令在外壳中，或与<samp>-C</samp>的选择<code>make</code> 。例如，建立在<em>hello</em>包<samp>gnu/hello</samp>根GSRC目录中的子目录使用：</p>
<div class="example">
<pre class="example">$ make -C gnu/hello
</pre></div>

<p>这将下载，解压缩，配置和构建<em>hello</em>软件包。该软件包将构建在子目录中<samp>gnu/hello/work</samp> 。
</p>
<div class="example">
<pre class="example">$ ./gnu/hello/work/hello-2.9/src/hello
Hello, world!
</pre></div>


<hr>
<a name="Installing-a-package"></a>
<div class="header">
<p>下一页： <a href="#Setting-your-environment" rel="next" accesskey="n">设置环境</a> ，上一篇： <a href="#Building-a-simple-package" rel="prev" accesskey="p">构建一个简单的程序包</a> ，上<a href="#Building-a-simple-package" rel="prev" accesskey="p">一篇</a> ： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Installing-a-package-1"></a>
<h3 class="section">2.3安装软件包</h3>

<p>现在您可以安装软件包了。如果要安装到新目录树，请首先创建顶级配置中指定的目录<samp>--prefix</samp>如有必要，</p>
<div class="example">
<pre class="example">$ mkdir /gnu
</pre></div>

<p>然后使用<samp>install</samp>目标，</p>
<div class="example">
<pre class="example">$ make -C gnu/hello install
</pre></div>

<p>该软件包应自动安装在<samp>/gnu</samp> ，其中包含任何可执行程序<samp>/gnu/bin/</samp> 。
</p>
<div class="example">
<pre class="example">$ /gnu/bin/hello --version
hello (GNU hello) 2.9
</pre></div>


<hr>
<a name="Setting-your-environment"></a>
<div class="header">
<p>下一页： <a href="#Useful-targets" rel="next" accesskey="n">有用的目标</a> ，上一页： <a href="#Installing-a-package" rel="prev" accesskey="p">安装软件包</a> ，向上： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Setting-your-environment-1"></a>
<h3 class="section">2.4设置环境</h3>

<p>如果要使用新安装的软件包而不必指定其完整路径，则需要修改环境中的相关变量，例如<code>PATH</code> ， <code>LD_LIBRARY_PATH</code> ， <code>INFOPATH</code>等等。这些变量会将相关文件的位置告知您的系统。例如， <code>PATH</code>包含所有包含可执行文件的目录的列表。
</p>
<p>有一个示例脚本<samp>setup.sh</samp>在顶级GSRC目录中，该目录可用于设置主要环境变量。
</p>
<div class="example">
<pre class="example">$ source setup.sh
</pre></div>

<p>请注意，您需要使用以下命令将该文件加载到当前shell中： <code>source</code>命令，而不是执行它（这只会在子shell中临时应用定义）。
</p>
<p>加载此文件后，您的环境变量应包括目标目录，以便您可以直接运行新软件包：</p>
<div class="example">
<pre class="example">$ echo $PATH
/gnu/bin:/usr/local/bin:/usr/bin:/bin
$ which hello
/gnu/bin/hello
</pre></div>

<p>如果要还原原始环境变量，它们将保存在变量中<code>ORIG_PATH</code> ， <code>ORIG_LD_LIBRARY_PATH</code>等</p>
<div class="example">
<pre class="example">$ PATH=$ORIG_PATH
$ LD_LIBRARY_PATH=$ORIG_LD_LIBRARY_PATH
</pre></div>


<hr>
<a name="Useful-targets"></a>
<div class="header">
<p>下一页： <a href="#Complex-packages" rel="next" accesskey="n">复杂软件包</a> ，上一篇： <a href="#Setting-your-environment" rel="prev" accesskey="p">设置环境</a> ，上一篇： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Useful-targets-1"></a>
<h3 class="section">2.5有用的目标</h3>

<p>要清理构建目录并删除所有下载的文件，请使用<samp>clean</samp>目标：</p>
<div class="example">
<pre class="example">$ make -C gnu/hello clean
</pre></div>

<p>还有其他有用的目标。例如，整个构建序列可以分为以下几个阶段：</p>
<div class="example">
<pre class="example">$ make -C gnu/hello fetch checksum extract configure build install
</pre></div>

<p>每个目标都取决于前一个目标，因此输入<code>make -C gnu/hello install</code>首先执行所有较早的目标。
</p>
<p>您可以安装软件包的源代码（例如， <samp>/gnu/src/hello-2.9</samp> ） 使用<samp>install-src</samp>目标。同样，可以使用<samp>uninstall-src</samp>目标。
</p>
<p>要查看有关软件包的一些信息，请使用目标<samp>pkg-info</samp> 。
</p>
<div class="example">
<pre class="example">$ make -C gnu/hello pkg-info
make: Entering directory `/home/gnu/gsrc/gnu/hello'
Name:        GNU Hello
Version:     2.9
URL:         http://www.gnu.org/software/hello/manual/
Description:
 GNU Hello prints the message &quot;Hello, world!&quot; and then exits.  It
 serves as an example of standard GNU coding practices.  As such, it
 supports command-line arguments, multiple languages, and so on.
Status:      installed (stowed)
make: Leaving directory `/home/gnu/gsrc/gnu/hello'
</pre></div>

<p>“状态”可以是以下任何一种：“未安装”，“已安装（未收起）”或“已安装（收起）”（请参阅<a href="#Package-versions">软件包版本</a> ）。
</p>
<p>要查看更简洁的摘要（非常适合在脚本中生成软件包列表），请使用target <samp>pkg-info-curt</samp> 。
</p>
<div class="example">
<pre class="example">$ make -C gnu/hello pkg-info-curt
make: Entering directory `/home/gnu/gsrc/gnu/hello'
gnu/hello 2.9
 A program that produces a familiar, friendly greeting
make: Leaving directory `/home/gnu/gsrc/gnu/hello'
</pre></div>

<p>为了更好地了解要下载哪些文件以及必须构建哪些依赖关系才能使用软件包，请使用<samp>fetch-list</samp>目标。
</p>
<div class="example">
<pre class="example">$ make -C gnu/hello fetch-list
make: Entering directory `/home/gnu/gsrc/gnu/hello'
Name: hello
Version: 2.9
Location: http://ftpmirror.gnu.org/hello/
Distribution files:
	hello-2.9.tar.gz
Patch files:
Signature files:
	hello-2.9.tar.gz.sig
Dependencies:
make: Leaving directory `/home/gnu/gsrc/gnu/hello'
</pre></div>

<p>大多数GNU软件包都是高度可配置的。要查看可用的配置选项，您可以调用<samp>help-config</samp>目标。
</p>
<p>最后，如果您选择删除软件包，则可以使用<samp>uninstall</samp>目标。此目标“取消寄存”包装；如果您要重新安装它，则无需重新构建该软件包。相反，它只会重新存放。要完全删除软件包，请使用<samp>uninstall-pkg</samp>目标。当您将软件包更新为新版本时，旧版本只是未存放的，而新版本则与它一同安装（请参阅<a href="#Package-versions">软件包版本</a> ）。为了清除旧的软件包版本，请使用<samp>uninstall-pkg-old</samp>目标。
</p>

<hr>
<a name="Complex-packages"></a>
<div class="header">
<p>下一页： <a href="#Finding-packages" rel="next" accesskey="n">查找软件包</a> ，上一步： <a href="#Useful-targets" rel="prev" accesskey="p">有用的目标</a> ，上一步： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Complex-packages-1"></a>
<h3 class="section">2.6复杂包装</h3>

<p>如果构建或使用软件包依赖于其他GNU软件包，则将以正确的顺序自动构建这些软件包。要查看任何软件包的依赖关系，请使用<samp>dep-list</samp>目标。
</p>
<div class="example">
<pre class="example">$ make -C gnu/gnupg dep-list
make: Entering directory `/home/gnu/gsrc/gnu/gnupg'
libgpg-error libgcrypt libassuan libksba pth zlib readline
make: Leaving directory `/home/gnu/gsrc/gnu/gnupg'
</pre></div>

<p>依赖项在<samp>gnu</samp> ， <samp>gnustep</samp>和<samp>gnome</samp>子目录默认情况下。当然，程序包可能取决于不属于GNU项目的软件。在这种情况下，GSRC将尝试确定您的系统上是否安装了这些外部软件包。如果不存在，则必须单独安装，例如通过发行版的软件存储库。
</p>
<p>请注意，相关性可能会超过一级，</p>
<div class="example">
<pre class="example">$ make -C gnu/readline dep-list
make: Entering directory `/home/gnu/gsrc/gnu/readline'
ncurses
make: Leaving directory `/home/gnu/gsrc/gnu/readline'
</pre></div>

<p>因此，要安装像<em>gnupg</em>这样的复杂软件包，请使用与简单软件包相同的命令，</p>
<div class="example">
<pre class="example">$ make -C gnu/gnupg
$ make -C gnu/gnupg install
</pre></div>

<p>根据需要，将首先构建并安装所有依赖项（以及依赖项的依赖项）。
</p>

<hr>
<a name="Finding-packages"></a>
<div class="header">
<p>上一页： <a href="#Complex-packages" rel="prev" accesskey="p">复杂程序包</a> ，向上： <a href="#Getting-started" rel="up" accesskey="u">入门</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Finding-packages-1"></a>
<h3 class="section">2.7查找包裹</h3>

<p>GSRC提供了数百个软件包的构建配方。那么，如何找到或发现与您的需求相关的包裹？幸运的是，构建配方由元数据描述，可以帮助您进行搜索。例如，您可以使用标准的GNU工具，例如<code>grep</code>在构建配方的文本中搜索关键字。
</p>
<p>安装了一个模板脚本，名为<samp>gsrc</samp> ，它提供了一种简单的方法，可通过关键字搜索软件包，打印有关软件包的信息并打印其位置。以来<samp>gsrc</samp>与GSRC安装的可执行文件安装在同一位置，如果已将环境设置为使用GSRC软件包（请参阅<a href="#Setting-your-environment">设置环境</a> ），则可以使用<samp>gsrc</samp>脚本以从GSRC目录外部访问GSRC。
</p>
<p>例如，在这里我们搜索一个编辑器，发现程序<em>moe</em> ，阅读有关它的信息，然后安装它。
</p>
<div class="example">
<pre class="example">$ gsrc search editor
gnu/denemo 1.0.0
 A music notation editor
gnu/ed 1.7
 An implementation of the standard Unix editor
gnu/emacs 24.3
 The extensible, customizable text editor
gnu/global 6.2.8
 A source code tag system
gnu/gnusound 0.7.5
 A multitrack sound editor
gnu/leg
 Libraries for game engines and game development
gnu/less 451
 A pager
gnu/mc 4.6.1
 A two-paned file manager
gnu/mit-scheme 9.1.1
 An implementation of the Scheme programming language
gnu/moe 1.5
 A simple-to-use text editor
gnu/nano 2.3.2
 A simple text editor
gnu/sed 4.2.2
 A text stream editor
$ gsrc info moe
Name:        Moe
Version:     1.5
URL:         http://www.gnu.org/software/moe
Description:
 GNU Moe is a powerful-but-simple-to-use text editor.  It works in a
 modeless manner, and features an intuitive set of key-bindings that
 assign a degree of &quot;severity&quot; to each key; for example key
 combinations with the Alt key are for harmless commands like cursor
 movements while combinations with the Control key are for commands
 that will modify the text.  Moe features multiple windows, unlimited
 undo/redo, unlimited line length, global search and replace, and
 more.
Status:      not installed
$ make -C $(gsrc path moe) install
</pre></div>

<p>如果您查看<samp>gsrc</samp>脚本的代码，您会发现它非常简单，并且确实可以用作扩展模板以包含所需功能的模板。
</p>
<p>可以使用该文件执行更强大的搜索<samp>MANIFEST.rec</samp> 。如果您通过下载GSRC获得了GSRC <samp>tar.gz</samp>存档，此文件应位于包的根目录中。如果您是通过克隆其代码存储库而获得GSRC的，则必须生成此文件。只需导航到软件包的根目录并输入<code>make manifest</code> ;您每次将更新拉到存储库时都将要运行此程序。生成的文件是一个<em>recfile</em> ，可以使用GNU Recutils将其查询为数据库，必须将其安装（请参见<a href="http://www.gnu.org/software/recutils/manual/recutils.html#recsel">Recutils</a>中的<cite>recsel</cite> ）。
</p>

<hr>
<a name="Advanced-configuration"></a>
<div class="header">
<p>下一页： <a href="#Technical-information" rel="next" accesskey="n">技术信息</a> ，上一篇： <a href="#Getting-started" rel="prev" accesskey="p">入门</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Advanced-configuration-1"></a>
<h2 class="chapter">3高级配置</h2>

<p>GSRC的默认行为可以全局配置，也可以针对单个软件包配置。所有配置都是在简单的Makefile中完成的，因此建议您对GNU Make有所了解，尽管不是必需的，但要进行更高级的更改。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Global-configuration" accesskey="1">全局配置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Package-configuration" accesskey="2">软件包配置</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Patching-packages" accesskey="3">补丁包</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Package-versions" accesskey="4">软件包版本</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>


<hr>
<a name="Global-configuration"></a>
<div class="header">
<p>下一页： <a href="#Package-configuration" rel="next" accesskey="n">软件包配置</a> ，上一页： <a href="#Advanced-configuration" rel="prev" accesskey="p">高级配置</a> ，向上： <a href="#Advanced-configuration" rel="up" accesskey="u">高级配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Global-configuration-1"></a>
<h3 class="section">3.1全局配置</h3>

<p>生成软件包将加载以下配置文件：</p>
<dl compact>
<dt><samp>config.mk</samp></dt>
<dd><p>指定安装目录前缀。由配置脚本从创建<samp>config.mk.in</samp>
</p></dd>
<dt><samp>gar.conf.mk</samp></dt>
<dd><p>指定常规配置变量</p></dd>
<dt><samp>gar.env.mk</samp></dt>
<dd><p>定义在每个构建步骤中设置的环境变量。
</p></dd>
<dt><samp>gar.master.mk</samp></dt>
<dd><p>定义用于下载源tarball的镜像站点列表。建议将其修改为使用本地镜像。
</p></dd>
<dt><samp>gar.site.mk</samp></dt>
<dd><p>您可以创建一个可选文件，以加载要在程序包上使用的其他配方。该文件必须由用户创建（但是，如果该文件不存在，则不是错误。）
</p></dd>
</dl>

<p>GSRC的许多行为由可以自定义的变量定义。一般来说，您应该在自己的代码中覆盖这些变量<samp>config.mk</samp>文件而不是<samp>gar.*.mk</samp>文件。这样，您不必担心GSRC的更新会覆盖您的更改。
</p>
<p>一些更重要的配置变量是：</p>
<dl compact>
<dt><code>BOOTSTRAP</code></dt>
<dd><p>如果定义（默认值），则环境变量<code>C_INCLUDE_PATH</code> ， <code>CPLUS_INCLUDE_PATH</code>和<code>LDFLAGS</code>指向<samp>include</samp>和<samp>lib</samp>安装目录的子目录。这会强制使用任何先前安装的库，而不是普通系统库。要禁用此功能，请删除定义<code>BOOTSTRAP=1</code>在<samp>config.mk.in</samp>并重新运行配置或使用<code>BOOTSTRAP</code>在命令行上未定义：</p>
<div class="example">
<pre class="example">$ make -C gnu/gnupg BOOTSTRAP=
</pre></div>

<p>设置在<samp>conf.mk</samp>
</p>
</dd>
<dt><code>IGNORE_DEPS</code></dt>
<dd><p>指定应作为依赖项跳过的所有程序包（例如，如果您更喜欢使用现有的系统程序包）。用空格分隔的列表。设置在<samp>gar.conf.mk</samp> 。
</p>
</dd>
<dt><code>GARCHIVEDIR</code></dt>
<dt><code>GARBALLDIR</code></dt>
<dd><p>指定用于缓存下载的源代码档案的目录（ <code>GARCHIVEDIR</code> ）以及已安装软件包的归档文件（ <code>GARBALLDIR</code> ）。设置在<samp>gar.conf.mk</samp> 。
</p>
</dd>
<dt><code>MAKE_ARGS_PARALLEL</code></dt>
<dd><p>设置为<code>-j <var>N</var></code>在构建中允许N个并行进程。注意，多个依赖关系是一个一个地建立的。只有每个构建中的命令是并行执行的。设置在<samp>gar.conf.mk</samp>
</p>
</dd>
<dt><code>USE_COLOR</code></dt>
<dd><p>在构建过程的所有输出中，很容易错过GSRC打印的消息。将此设置为“ y”以启用GSRC消息的彩色输出，这可能会使它们更可见。将其设置为其他任何颜色即可禁用颜色。无论哪种情况，都定义了另外四个变量： <code>MSG</code> ， <code>MSG2</code> ， <code>ERR</code> ， <code>OK</code>和<code>OFF</code> 。前四个定义在普通消息开头插入的字符串（ <code>MSG</code> ， <code>MSG2</code> ），错误消息（ <code>ERR</code> ），或表示成功的消息（ <code>OK</code> ）。的<code>OFF</code>消息末尾插入了代码。什么时候<code>USE_COLOR</code>为“ y”时，这些变量包含ANSI转义序列以更改文本的属性（即，设置颜色或文本粗细）。否则，它们可能包含文本指示符，例如“ ==>”以开始发送消息。这两种情况都包含一些合理的默认值。设置在<samp>gar.conf.mk</samp> 。
</p>
</dd>
<dt><code>REDIRECT_OUTPUT</code></dt>
<dd><p>典型的构建过程会产生大量文本输出。在某些情况下，您可能希望将此输出重定向到屏幕以外的其他位置。在这种情况下，您可以设置变量<code>REDIRECT_OUTPUT</code>除“ n”以外的任何值。要编辑将输出重定向到的位置，请设置<code>OUTPUT</code>变量。默认情况下，如果您设置<code>REDIRECT_OUTPUT</code> ，标准文本输出将重定向到<samp>/dev/null</samp> ，这意味着它将被丢弃，而错误将被打印到屏幕上。例如，您可以改为重定向到您选择的日志文件（有关<a href="http://www.gnu.org/software/bash/manual/bash.html#Redirections">重定向</a>的更多详细信息，请参见<cite>Bash</cite>中的重定向）。设置在<samp>gar.conf.mk</samp>
</p>
</dd>
</dl>


<hr>
<a name="Package-configuration"></a>
<div class="header">
<p>下一页： <a href="#Patching-packages" rel="next" accesskey="n">补丁程序包</a> ，上一页： <a href="#Global-configuration" rel="prev" accesskey="p">全局配置</a> ，上一页： <a href="#Advanced-configuration" rel="up" accesskey="u">高级配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Package-configuration-1"></a>
<h3 class="section">3.2软件包配置</h3>

<p>每个包装都可以根据您的喜好进行定制。由于GNU软件包遵循标准化的构建过程，因此为一个自定义GSRC构建非常简单。
</p>
<p>GNU软件包以传递给<samp>configure</samp>脚本。您可以通过设置GSRC Makefile轻松地自定义这些选项<code>CONFIGURE_OPTS</code>变量。添加到此变量的所有选项都将附加到GSRC默认设置的选项之后。</p>
<div class="example">
<pre class="example">CONFIGURE_OPTS = --disable-gtk --without-png
</pre></div>

<p>为了方便起见，每个软件包都有一个名为<samp>config.mk</samp>在其目录中，该目录由其构建脚本导入。通常，所有用户配置都应在此处完成。默认情况下，它包含<code>CONFIGURE_OPTS</code>和<code>BUILD_OPTS</code>变量。在某些特殊情况下，此文件中还定义了特定于包的，用户可自定义的变量。
</p>
<p>一般而言，用户配置专门在<samp>config.mk</samp>而<samp>Makefile</samp>包含正确构建软件包所需的信息和配方。因此，您无需修改<samp>Makefile</samp>除非您有特殊要求。请注意，大多数与目录位置有关的配置选项（例如安装位置，库搜索位置等）都在<samp>Makefile</samp> ，因为它们对于在GSRC中进行正确的构建和安装是必需的。因此，您不必担心会在<samp>config.mk</samp> 。
</p>
<hr>
<a name="Patching-packages"></a>
<div class="header">
<p>下一个： <a href="#Package-versions" rel="next" accesskey="n">软件包版本</a> ，上一个： <a href="#Package-configuration" rel="prev" accesskey="p">软件包配置</a> ，上一个： <a href="#Advanced-configuration" rel="up" accesskey="u">高级配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Patching-packages-1"></a>
<h3 class="section">3.3补丁包</h3>

<p>如果您有要应用到软件包的补丁程序，则GSRC可以自动执行该过程。首先，在包的目录中，创建一个名为<samp>files</samp>并将补丁文件移到那里。接下来，在包的<samp>Makefile</samp> ：</p>
<div class="example">
<pre class="example">PATCHFILES = my-patch.diff my-patch2.diff
PATCHOPTS = -p0
</pre></div>

<p><code>PATCHFILES</code>包含所有补丁文件的列表<samp>files</samp>子目录。 <code>PATCHOPTS</code>包含用于传递给<code>patch</code>程序。
</p>
<p>接下来，将补丁文件的校验和添加到软件包的校验和文件中。
</p>
<div class="example">
<pre class="example">$ make makesum
</pre></div>

<p>请注意，如果<code>make makesums</code>由于GPG验证，该命令失败，并且您信任从中下载软件包或补丁程序的源，可以改用<code>make makesums GPGV=true</code>跳过此密钥验证步骤。
</p>
<p>最后，您可以正常构建软件包。补丁将在此过程中自动应用。
</p>
<div class="example">
<pre class="example">$ make install
</pre></div>

<p>如果补丁程序失败，并且您确定补丁程序适用于GSRC中包含的软件包的版本，那么您可能必须修改<samp>-p</samp>中的选项<code>PATCHOPTS</code>可变（参照<a href="http://www.gnu.org/software/diffutils/manual/diffutils#patch-Options">补丁选项</a>在<cite>补丁</cite> ）。
</p>
<p>如果软件包需要修补程序才能正确构建，则这是GSRC中的错误。请报告这样的构建问题<a href="mailto:bug-gsrc@gnu.org">bug-gsrc@gnu.org</a> 。您还应该联系软件包的维护人员，以使他们知道问题所在。
</p>

<hr>
<a name="Package-versions"></a>
<div class="header">
<p>上<a href="#Patching-packages" rel="prev" accesskey="p">一篇</a> ： <a href="#Patching-packages" rel="prev" accesskey="p">修补软件包</a> ，上<a href="#Patching-packages" rel="prev" accesskey="p">一篇</a> ： <a href="#Advanced-configuration" rel="up" accesskey="u">高级配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Package-versions-1"></a>
<h3 class="section">3.4套件版本</h3>

<p>GSRC安装软件包时，“实际情况”实际上要比到目前为止所描述的要复杂得多。
</p>
<p>当您安装软件包时，它实际上是先安装到<samp>/gnu/packages</samp>目录位于名称为<package>- <version>（即<samp>/gnu/packages/hello-2.8</samp> ）。在包<em>hello</em>的示例中，可执行文件<samp>hello</samp>安装到<samp>/gnu/packages/hello-2.8/bin/hello</samp>代替<samp>/gnu/bin/hello</samp> 。软件包安装的所有其他文件都以类似的方式安装。接下来，GSRC建立到父级文件的符号链接<samp>/gnu</samp>目录。从而， <samp>/gnu/bin/hello</samp>最终是与之的符号链接<samp>/gnu/packages/hello-2.8/bin/hello</samp> 。这被称为<em>存放</em> ；装有指向其安装在系统中文件的符号链接的软件包被认为是<em>存放的</em> 。
</version></package></p>
<p>发行新版本的软件包时，不必先卸载以前的版本。构建并安装<em>hello 2.9后</em> ，它会放入其自己的package目录中， <samp>/gnu/packages/hello-2.9</samp>并且<em>hello 2.8</em>的目录保持不变。GSRC完成安装后，将删除旧的符号链接，并将新的符号链接创建到最新版本的文件。因此，尽管实际上将安装该软件包的两个版本，但只能存放最新版本。
</p>
<p>如果您想存放特定版本的软件包，可以通过<code>GARVERSION</code>可变为<code>make install</code> 。确保在执行此操作时更新校验和，否则该过程将失败！
</p>
<div class="example">
<pre class="example">$ make -C gnu/hello makesum install GARVERSION=2.8
</pre></div>

<p>如果您先前已构建2.8版，则GSRC只会重新存储这些文件。当然，如果您以前没有构建它，或者您以前已经运行过<code>make clean</code> ，该软件包将从头开始构建。
</p>
<p>注意：如果版本之间的软件包命名格式或压缩算法已更改（即从tar.gz更改为tar.xz），则此方法可能会失败；在这种情况下，您还必须修改<code>DISTFILES</code> 。
</p>
<p>希望维护包装的不同配置的用户可以利用<code>GARPROFILE</code>变量。它的值仅附加到软件包目录名称后，使您可以安装同一软件包版本的多个配置。例如：</p>
<div class="example">
<pre class="example">$ make -C gnu/hello install CONFIGURE_OPTS=&quot;--disable-nls&quot; GARPROFILE=&quot;-no-nls&quot;
</pre></div>

<p>这会将新配置的软件包安装到<samp>/gnu/packages/hello-2.9-no-nls</samp> 。
</p>

<hr>
<a name="Technical-information"></a>
<div class="header">
<p>下一篇： <a href="#GNU-Free-Documentation-License" rel="next" accesskey="n">GNU自由文档许可证</a> ，上一篇： <a href="#Advanced-configuration" rel="prev" accesskey="p">高级配置</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Technical-information-1"></a>
<h2 class="appendix">附录A技术信息</h2>

<p>本附录提供了有关GSRC构建系统的详细信息。对于大多数用户来说，此信息不是必需的，但对于开发人员和GSRC维护人员而言，它可能是有意义的。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#The-GSRC-build-system" accesskey="1">GSRC构建系统</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Anatomy-of-a-GSRC-Makefile" accesskey="2">GSRC Makefile的剖析</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>


<hr>
<a name="The-GSRC-build-system"></a>
<div class="header">
<p>下一篇： <a href="#Anatomy-of-a-GSRC-Makefile" rel="next" accesskey="n">GSRC Makefile的剖析，上一篇</a> ： <a href="#Technical-information" rel="prev" accesskey="p">技术信息</a> ，上<a href="#Anatomy-of-a-GSRC-Makefile" rel="next" accesskey="n">一篇</a> ： <a href="#Technical-information" rel="up" accesskey="u">技术信息</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="The-GSRC-build-system-1"></a>
<h3 class="section">A.1 GSRC构建系统</h3>

<p>GSRC构建系统基于Adam Sampson的名为GARstow的系统，而该系统又基于Nick Moffitt的较早的系统GAR。在本节中，将描述GSRC构建系统的基本体系结构。
</p>
<p>GSRC包含多个系统Makefile，以及每个软件包的Makefile。当用户打电话时<code>make</code>在软件包的Makefile中，将GSRC系统的Makefile放入。这些系统的Makefile有几种：</p>
<table>
<thead><tr><th width="25%">文件</th><th width="75%">描述</th></tr></thead>
<tbody><tr><td width="25%"><samp>gar.mk</samp></td><td width="75%">该文件包含顶级目标，例如<samp>build</samp>要么<samp>install</samp> 。</td></tr>
<tr><td width="25%"><samp>gar.lib.mk</samp></td><td width="75%">该文件包含执行每个顶级目标的子任务的配方（请参见下文）。</td></tr>
<tr><td width="25%"><samp>gar.master.mk</samp></td><td width="75%">此文件包含下载包主的网址（即<a href="http://ftp.gnu.org/gnu">http://ftp.gnu.org/gnu</a> ）。</td></tr>
<tr><td width="25%"><samp>gar.lib</samp></td><td width="75%">该目录还包含其他Makefile文件，用于定义典型构建系统（例如标准GNU Autotools进程）的公用变量值。</td></tr>
<tr><td width="25%"><samp>gar.conf.mk</samp></td><td width="75%">该文件包含GSRC的常规配置。</td></tr>
<tr><td width="25%"><samp>gar.env.mk</samp></td><td width="75%">该文件中的变量用于正确设置GSRC的构建环境。</td></tr>
<tr><td width="25%"><samp>config.mk</samp></td><td width="75%">该文件包含用户的特定GSRC配置。</td></tr>
</tbody></table>

<p>典型的用户级GSRC Make目标，例如<samp>fetch</samp> ， <samp>build</samp>要么<samp>install</samp> ， 来自<samp>gar.mk</samp> 。根据软件包的GSRC Makefile中定义的软件包的构建要求，这些用户级别的目标将取决于实际执行所需任务的较低级别的目标。
</p>
<p>例如，在典型的GNU软件包中，配置是通过<samp>configure</samp>脚本在构建和安装时使用<samp>Makefile</samp> 。因此，对于包<em>打招呼</em>时， <samp>build</samp>目标将取决于称为<samp>build-work/hello-2.9/Makefile</samp> （ <samp>build-</samp>加上位置<samp>Makefile</samp>随包装一起分发）。对于通过安装的基于Python的软件包<samp>setup.py</samp> ， <samp>install</samp>目标将取决于目标<samp>install-work/foo-1.0/setup.py</samp> 。文件<samp>gar.lib.mk</samp>包含许多通用的Make配方来处理这些不同的情况。
</p>
<p>目录<samp>gar.lib</samp>包含为共享相似构建系统的软件包设置通用变量值的Makefile。它有一个名为<samp>auto.mk</samp>例如，它定义了使用标准Autotools流程的程序包的设置。
</p>

<hr>
<a name="Anatomy-of-a-GSRC-Makefile"></a>
<div class="header">
<p>上<a href="#The-GSRC-build-system" rel="prev" accesskey="p">一篇</a> ： <a href="#The-GSRC-build-system" rel="prev" accesskey="p">GSRC构建系统</a> ，上<a href="#The-GSRC-build-system" rel="prev" accesskey="p">一篇</a> ： <a href="#Technical-information" rel="up" accesskey="u">技术信息</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Anatomy-of-a-GSRC-Makefile-1"></a>
<h3 class="section">A.2 GSRC Makefile的剖析</h3>

<p>GSRC Makefile是用户进入GSRC系统的入口点。由于GSRC提供了GNU软件，并且有一些GNU编码标准规定了软件包安装的工作方式，因此大多数GNU软件包的GSRC Makefile文件都是相似的。
</p>
<p>为了便于以自动化方式使用GSRC Makefile，例如通过脚本进行搜索，它们都具有相同的结构，分为三部分：元数据变量，构建变量和构建配方。按照惯例，这三个部分由七十个哈希符号（“＃”）行分隔。这有助于在视觉上分隔各部分，并在扫描或搜索文件时提供方便的停止点。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Metadata-variables" accesskey="1">元数据变量</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Build-variables" accesskey="2">构建变量</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Build-recipes" accesskey="3">建立配方</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#A-simple-example" accesskey="4">一个简单的例子</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#A-complex-example" accesskey="5">一个复杂的例子</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>


<hr>
<a name="Metadata-variables"></a>
<div class="header">
<p>下一篇： <a href="#Build-variables" rel="next" accesskey="n">构建变量</a> ，上一篇： <a href="#Anatomy-of-a-GSRC-Makefile" rel="prev" accesskey="p">GSRC Makefile剖析</a> ，上一部分： <a href="#Anatomy-of-a-GSRC-Makefile" rel="prev" accesskey="p">GSRC Makefile</a> <a href="#Anatomy-of-a-GSRC-Makefile" rel="up" accesskey="u">剖析</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Metadata-variables-1"></a>
<h4 class="subsection">A.2.1元数据变量</h4>

<p>本节包含描述包本身的变量声明。应该存在以下变量：</p>
<table>
<thead><tr><th width="25%">变量名</th><th width="75%">描述</th></tr></thead>
<tbody><tr><td width="25%"><code>NAME</code></td><td width="75%">这是程序包的通用语言正式名称。它可以包含多个单词和任何字符。示例：“ GNU Source-highlight”</td></tr>
<tr><td width="25%"><code>GARNAME</code></td><td width="75%">这是软件包的内部GSRC名称。它应与包含该软件包的目录名匹配，并且按照约定，对于GNU软件包，它是<a href="http://www.gnu.org/software">http://www.gnu.org/software</a>上该软件包的HTTP子目录的名称。它只能包含小写字母，数字，连字符或下划线。示例：“ src-highlite”</td></tr>
<tr><td width="25%"><code>UPSTREAMNAME</code></td><td width="75%">[可选]如果软件包维护者曾经为软件包使用其他名称，例如不同的拼写或大写字母，请在此处添加。这通常在指定URL或程序包的归档名称时很有用。示例：“ source-highlight”</td></tr>
<tr><td width="25%"><code>GARVERSION</code></td><td width="75%">这是软件包的当前版本号。示例：“ 3.1.7”</td></tr>
<tr><td width="25%"><code>DISTNAME</code></td><td width="75%">[可选]此变量包含软件包的分发名称。此变量是自动构造的，默认情况下为<code>$(GARNAME)-$(GARVERSION)</code> 。示例：“ src-highlite-3.1.7”</td></tr>
<tr><td width="25%"><code>HOME_URL</code></td><td width="75%">这是软件包的原始URL，用户可以在其中找到有关它的更多信息。示例：“ http://www.gnu.org/software/src-highlite”</td></tr>
<tr><td width="25%"><code>DESCRIPTION</code></td><td width="75%">此变量应具有对程序包的简短的单行描述。</td></tr>
<tr><td width="25%"><code>BLURB</code></td><td width="75%">[可选]这应该包含该程序包的更长的多行描述。为此，需要使用Make声明其值。 <code>define</code>声明。</td></tr>
</tbody></table>


<hr>
<a name="Build-variables"></a>
<div class="header">
<p>下一篇： <a href="#Build-recipes" rel="next" accesskey="n">构建配方</a> ，上一篇： <a href="#Metadata-variables" rel="prev" accesskey="p">元数据变量</a> ，上一篇： <a href="#Anatomy-of-a-GSRC-Makefile" rel="up" accesskey="u">GSRC Makefile的剖析</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Build-variables-1"></a>
<h4 class="subsection">A.2.2构建变量</h4>

<p>GSRC Makefile的第二部分包含在构建过程中使用的变量定义。如果可能，最好在构建变量定义中使用元数据变量，以最大程度地减少发生任何更改时需要修改的项目数。
</p>
<table>
<thead><tr><th width="25%">变量名</th><th width="75%">描述</th></tr></thead>
<tbody><tr><td width="25%"><code>MASTER_SITES</code></td><td width="75%">此变量定义应从中检索软件包文件的顶级URL。文件中的变量中已经定义了许多URL <samp>gar.master.mk</samp> 。大多数GNU软件包可从<a href="http://ftp.gnu.org/gnu">http://ftp.gnu.org/gnu</a>检索，该软件包已分配给变量<code>MASTER_GNU</code>在<samp>gar.master.mk</samp> ，因此对于GNU软件包， <code>MASTER_SITES</code>将设置为<code>$(MASTER_GNU)</code> 。可能会列出多个站点；尝试下载文件的操作将针对列出的每个站点进行，直到成功为止。</td></tr>
<tr><td width="25%"><code>MASTER_SUBDIR</code></td><td width="75%">这是可在其中找到软件包文件的主站点目录。对于大多数GNU软件包，这可以简单地是<code>$(GARNAME)/</code> 。</td></tr>
<tr><td width="25%"><code>DISTFILE_SITES</code></td><td width="75%">此变量包含URL，仅从中可以下载源分发档案。</td></tr>
<tr><td width="25%"><code>DISTFILE_SUBDIR</code></td><td width="75%">此变量包含以下内容的子目录： <code>DISTFILE_SITES</code>可以找到源代码分布的位置。</td></tr>
<tr><td width="25%"><code>SIGFILE_SITES</code></td><td width="75%">此变量包含仅从其下载签名文件的URL。</td></tr>
<tr><td width="25%"><code>SIGFILE_SUBDIR</code></td><td width="75%">此变量包含以下内容的子目录： <code>SIGFILE_SITES</code>可以在其中找到签名文件。</td></tr>
<tr><td width="25%"><code>PATCHFILE_SITES</code></td><td width="75%">此变量包含仅从中下载修补程序文件的URL。</td></tr>
<tr><td width="25%"><code>PATCHFILE_SUBDIR</code></td><td width="75%">此变量包含以下内容的子目录： <code>DISTFILE_SITES</code>可以找到源代码分布的位置。</td></tr>
<tr><td width="25%"><code>FILE_SITES</code></td><td width="75%">此变量列出了文件URI，可以在本地找到文件。默认情况下，它包含<samp>files</samp>包的GSRC目录的子目录以及该变量指定的位置<code>GARCHIVEDIR</code> 。请注意，这些URI应该以“ file：//”开头。</td></tr>
<tr><td width="25%"><code>DISTFILES</code></td><td width="75%">该变量包含所有要获取的源分发档案的用空格分隔的列表。</td></tr>
<tr><td width="25%"><code>SIGFILES</code></td><td width="75%">此变量包含所有要提取的签名文件的以空格分隔的列表。</td></tr>
<tr><td width="25%"><code>PATCHFILES</code></td><td width="75%">此变量包含所有要提取的修补程序文件的空格分隔列表。</td></tr>
<tr><td width="25%"><code>WORKSRC</code></td><td width="75%">此变量包含应执行所有工作的目录的名称。其默认值为<code>$(WORKDIR)/$(DISTNAME)</code> ，在大多数情况下就足够了，因此通常无需设置此变量。但是，如果软件包的源归档文件提取到其他名称的目录中，则应在此处进行设置。这应该始终以<code>$(WORKDIR)</code> ，默认情况下是<samp>work</samp> GSRC软件包子目录的子目录。</td></tr>
<tr><td width="25%"><code>WORKOBJ</code></td><td width="75%">该变量定义了构建过程应该发生的位置。通常，默认情况下，这与<code>WORKSRC</code> ，但是有些软件包建议在与源代码位置不同的目录中进行构建。</td></tr>
<tr><td width="25%"><code>CONFIGURE_SCRIPTS</code></td><td width="75%">此变量包含在构建过程的配置步骤中需要运行的脚本或文件的列表。可能还包括了仿冒目标。</td></tr>
<tr><td width="25%"><code>BUILD_SCRIPTS</code></td><td width="75%">此变量包含在构建过程的构建步骤中需要运行的脚本或文件的列表。可能还包括了仿冒目标。</td></tr>
<tr><td width="25%"><code>INSTALL_SCRIPTS</code></td><td width="75%">此变量包含在构建过程的安装步骤中需要运行的脚本或文件的列表。可能还包括了仿冒目标。</td></tr>
<tr><td width="25%"><code>INFO_FILES</code></td><td width="75%">此变量包含程序安装的所有Info文档文件的列表。要使用此变量，您必须包括<samp>info.mk</samp>来自的文件<samp>gar.lib</samp>目录。如果未定义此变量，则<samp>info.mk</samp>包含在内，则默认值为<code>$(GARNAME).info</code></td></tr>
<tr><td width="25%"><code>BUILDDEPS</code></td><td width="75%">此变量包含使用其GARNAME构建软件包所需的程序的空格分隔列表。</td></tr>
<tr><td width="25%"><code>LIBDEPS</code></td><td width="75%">这个变量有点用词不当。它是软件包在运行时所需的所有程序和/或库的空格分隔列表。</td></tr>
</tbody></table>


<hr>
<a name="Build-recipes"></a>
<div class="header">
<p>下一个： <a href="#A-simple-example" rel="next" accesskey="n">一个简单的示例</a> ，上一个： <a href="#Build-variables" rel="prev" accesskey="p">构建变量</a> ，上<a href="#Anatomy-of-a-GSRC-Makefile" rel="up" accesskey="u">一个：GSRC Makefile的剖析</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="Build-recipes-1"></a>
<h4 class="subsection">A.2.3建立配方</h4>

<p>GSRC Makefile的最后一部分包含构建软件包的细节。在大多数情况下，只需添加<code>include ../../gar.lib/auto.mk</code> ，它将适用于所有遵循GNU构建和安装标准的软件包。除其他动作外，这将自动定义<code>CONFIGURE_SCRIPTS</code> ， <code>BUILD_SCRIPTS</code>和<code>INSTALL_SCRIPTS</code>变量，它将包括<samp>gar.mk</samp>生成文件。如果包装不符合该建筑标准，则添加<code>include ../../gar.mk</code>直。此后，用户的软件包配置应加载<code>include config.mk</code> 。
</p>
<p>由于用户可能会指定一些配置选项，因此必须在加载用户配置之后执行Makefile中必须设置的任何其他选项。按照惯例，而用户使用<code>CONFIGURE_OPTS</code>和<code>BUILD_OPTS</code>变量，GSRC Makefile选项内的变量应<em>附加</em>到<code>CONFIGURE_ARGS</code>和<code>BUILD_ARGS</code>变量：</p>
<div class="example">
<pre class="example">CONFIGURE_ARGS += --some-option
</pre></div>

<p>最后，如有必要，编写实际配方。请注意，如果<samp>gar.lib/auto.mk</samp>已包含在内，无需编写任何食谱。通常，可能需要针对两种目标编写配方。
</p>
<p>第一个对应于下面列出的文件<code>CONFIGURE_SCRIPTS</code> ， <code>BUILD_SCRIPTS</code>和<code>INSTALL_SCRIPTS</code> 。如前所述，用户级别的目标，例如<samp>build</samp> ，取决于较低级别的目标，例如<samp>build-work/hello-2.9/Makefile</samp> 。这些是必须为每个指定的configure / build / install脚本实现的目标。对于每个目标，使用正常的Make语法编写配方以执行必要的任务。回想一下，伪音目标可以指定为配置/构建/安装脚本。因此，如果<code>INSTALL_SCRIPTS = java</code> ，然后是一个名为<code>install-java</code>必须写。
</p>
<p>可以写的第二类目标是规则前和规则后。这些配方在指定的顶级目标之前或之后运行。例如，一个名为<samp>pre-build</samp>在<samp>build</samp>目标。这些目标可方便地对文件执行预处理或后处理。请注意， <samp>pre-everything</samp>和<samp>post-everything</samp>可以写的目标。
</p>

<hr>
<a name="A-simple-example"></a>
<div class="header">
<p>下一个： <a href="#A-complex-example" rel="next" accesskey="n">一个复杂的示例</a> ，上一个： <a href="#Build-recipes" rel="prev" accesskey="p">构建配方</a> ，上<a href="#Anatomy-of-a-GSRC-Makefile" rel="up" accesskey="u">一个：GSRC Makefile的剖析</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="A-simple-example-1"></a>
<h4 class="subsection">A.2.4一个简单的例子</h4>

<div class="example">
<pre class="example">NAME = GNU Hello
GARNAME = hello
GARVERSION = 2.9
HOME_URL = http://www.gnu.org/software/hello/manual/
DESCRIPTION = A program that produces a familiar, friendly greeting
define BLURB
GNU Hello prints the message &quot;Hello, world!&quot; and then exits.  It
serves as an example of standard GNU coding practices.  As such, it
supports command-line arguments, multiple languages, and so on.
endef

######################################################################

MASTER_SITES = $(MASTER_GNU)
MASTER_SUBDIR = $(GARNAME)/
DISTFILES = $(DISTNAME).tar.gz
SIGFILES = $(DISTNAME).tar.gz.sig

BUILDDEPS =
LIBDEPS =

######################################################################

include ../../gar.lib/auto.mk
include config.mk
</pre></div>


<hr>
<a name="A-complex-example"></a>
<div class="header">
<p>上<a href="#A-simple-example" rel="prev" accesskey="p">一篇</a> ： <a href="#A-simple-example" rel="prev" accesskey="p">一个简单的例子</a> ，上篇： <a href="#Anatomy-of-a-GSRC-Makefile" rel="up" accesskey="u">GSRC Makefile的剖析</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="A-complex-example-1"></a>
<h4 class="subsection">A.2.5一个复杂的例子</h4>

<div class="example">
<pre class="example">NAME = Linux Libre
GARNAME = linux-libre
GARVERSION = 3.8.5
HOME_URL = http://www.fsfla.org/svnwiki/selibre/linux-libre/
DESCRIPTION = A free version of the Linux kernel
define BLURB
Linux Libre is a free (as in freedom) variant of the Linux kernel.
It has been modified to remove any non-free binary blobs.
endef

######################################################################

MASTER_SITES = http://linux-libre.fsfla.org/pub/
MASTER_SUBDIR = $(GARNAME)/releases/$(GARVERSION)-gnu/
DISTFILES = $(DISTNAME)-gnu.tar.xz
SIGFILES = $(DISTNAME)-gnu.tar.xz.sign

WORKSRC = $(WORKDIR)/linux-$(GARVERSION)
CONFIGURE_SCRIPTS = $(WORKSRC)/Makefile
BUILD_SCRIPTS = $(WORKSRC)/Makefile
INSTALL_SCRIPTS = kernel

BUILDDEPS =
LIBDEPS =

######################################################################

include ../../gar.mk
include config.mk

CONFIGURE_ARGS = $(CONFIGURE_OPTS)
BUILD_ARGS += $(if $(USE_PARALLEL),$(MAKE_ARGS_PARALLEL),)

CREATED_MERGE_DIRS = \
	sysconf $(sysconfdir) \
	var $(vardir) \
	rootlib /lib

pre-configure:
	make -C $(WORKSRC) mrproper
	$(MAKECOOKIE)

configure-%/Makefile:
	$(CONFIGURE_ENV) make -C $* $(MAKE_ARGS) $(CONFIGURE_ARGS) $(CONFIGURE_TARGET)
	$(MAKECOOKIE)

post-configure:
	cd $(WORKSRC) &amp;&amp; make $(MAKE_ARGS) prepare
	$(MAKECOOKIE)

build-%/Makefile:
	$(BUILD_ENV) make -C $* $(BUILD_ARGS)
	$(MAKECOOKIE)

install-kernel:
	make -C $(WORKOBJ) $(MAKE_ARGS) \
		INSTALL_MOD_PATH=$(packageprefix) \
		INSTALL_HDR_PATH=$(packageprefix) \
		modules_install \
		headers_install \
		firmware_install
	@install -m755 -D $(WORKSRC)/arch/$(ARCH)/boot/bzImage $(packageprefix)/boot/vmlinuz-$(DISTNAME)
	@install -m755 $(WORKSRC)/System.map $(packageprefix)/boot/System.map-$(GARVERSION)
	@install -m755 $(WORKSRC)/.config $(packageprefix)/boot/config-$(GARVERSION)
	$(MAKECOOKIE)
</pre></div>

<hr>
<a name="GNU-Free-Documentation-License"></a>
<div class="header">
<p>上一页： <a href="#Technical-information" rel="prev" accesskey="p">技术信息</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ]</p>
</div>
<a name="GNU-Free-Documentation-License-1"></a>
<h2 class="appendix">附录B GNU自由文档许可证</h2>

<div align="center">1.3版，2008年11月3日</div>

<div class="display">
<pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="http://fsf.org/">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol>
<li>前言<p>本许可的目的是免费提供手册，教科书或其他实用且有用的文档： <em>自由</em> ，以确保每个人都有有效的自由，无论是否进行商业或非商业修改，都可以对其进行复制和重新分发。其次，本许可为作者和出版商保留了一种因其作品而获得好评的方式，同时不被视为对他人所做的修改负责。
</p>
<p>该许可是一种“版权所有”，这意味着文档的衍生作品本身必须在相同意义上是免费的。它是GNU通用公共许可证的补充，GNU通用公共许可证是专为自由软件设计的Copyleft许可证。
</p>
<p>我们设计此许可证是为了将其用于免费软件的手册，因为免费软件需要免费的文档：免费程序应随附手册，以提供与软件相同的自由。但是本许可不限于软件手册；它可以用于任何文本作品，而无论其主题是什么，还是以印刷书的形式出版。我们建议您将该许可证主要用于目的是作为指导或参考的作品。
</p>
</li><li>适用性和定义<p>本许可适用于任何形式的手册或其他作品，其中包含版权所有者发布的声明，声明该声明可以根据本许可的条款进行分发。此类通知授予了世界范围内的，免版税的，无限期的许可，可以在此处所述的条件下使用该作品。下面的“文档”是指任何此类手册或作品。任何公众人士都是被许可人，称呼为“您”。如果您按照版权法要求许可的方式复制，修改或分发作品，则您接受许可。
</p>
<p>文档的“修改版本”是指包含文档或文档一部分的任何作品，无论是逐字复制还是经过修改和/或翻译成另一种语言。
</p>
<p>“第二部分”是本文档的命名附录或最重要的部分，专门处理本文档的出版者或作者与本文档的整体主题（或相关事宜）之间的关系，不包含任何可能直接涉及的内容。在整个主题范围内。（因此，如果该文档在某种程度上是一本数学教科书，那么第二部分可能不会解释任何数学。）这种关系可以是与主题或相关问题的历史联系，也可以是关于它们的法律，商业，哲学，道德或政治立场。
</p>
<p>“不变部分”是某些二级部分，其标题在声明中指出，本文件是根据本许可发布的，其标题与不变部分相同。如果某个部分不符合上面对“辅助”的定义，则不允许将其指定为“不变式”。该文档可能包含零个不变部分。如果文档未标识任何不变节，则没有任何不变节。
</p>
<p>“封面文字”是某些简短的文本段落，在声明中指出该文档是根据本许可发布的，这些文字作为“封面文字”或“封面文字”列出。“封面文本”最多可以包含5个字，“封面文本”最多可以包含25个字。
</p>
<p>文档的“透明”副本是指一种机器可读的副本，以其规格可供大众使用的格式表示，适用于使用通用文本编辑器或（对于由像素组成的图像）通用颜料进行直接修改的文档程序或（用于绘图的）一些广泛使用的绘图编辑器，它适合于输入文本格式化程序或自动转换为适合输入到文本格式化程序的多种格式。以其他方式透明的文件格式制作的副本，其标记或没有标记的安排，可以阻止或阻止读者的后续修改，则该副本不是透明的。如果用于大量文本，则图像格式不是“透明”的。非“透明”的副本称为“不透明”。
</p>
<p>适用于透明副本的格式的示例包括不带标记的纯ASCII，Texinfo输入格式，LaTeX输入格式，使用公开可用的DTD的SGML或XML，以及设计用于人工修改的符合标准的简单HTML，PostScript或PDF。透明图像格式的示例包括PNG，XCF和JPG。不透明格式包括只能由专有文字处理器，SGML或XML读取和编辑的专有格式，而SGML或XML通常不提供DTD和/或处理工具，以及某些文字处理器为某些文字处理器生成的机器生成的HTML，PostScript或PDF仅用于输出目的。
</p>
<p>“标题页”对于印刷书籍而言，是指标题页本身，以及以下用于保持本许可证要求在标题页中显示的材料的以下页面。对于没有此类标题页的格式的作品，“标题页”是指在文本正文开头之前，靠近作品标题最突出外观的文本。
</p>
<p>“发布者”是指向公众分发文档副本的任何个人或实体。
</p>
<p>“标题为XYZ”一节是指文档的命名子单元，其标题恰好是XYZ或在括号中包含XYZ的文字，后面是将XYZ转换为另一种语言的文字。（此处XYZ代表以下提到的特定部分名称，例如“致谢”，“奉献”，“认可”或“历史记录”。）在修改文档时，要“保留此部分的标题”，则意味着根据此定义，该部分仍为“已命名的XYZ”部分。
</p>
<p>该文件的声明旁边可能包含“免责声明”，该声明指出本许可适用于该文件。这些保修免责声明被视为已包含在本许可中，但仅用于免责声明：这些保修免责声明可能具有的任何其他暗示都是无效的，并且对本许可的含义没有任何影响。
</p>
</li><li>VERBATIM复制<p>您可以在任何媒介中以商业或非商业方式复制和分发本文档，但前提是本许可，版权声明和声明本许可适用于本文档的许可声明均以所有副本形式复制，并且您不添加任何其他条件符合本许可的规定。您不得使用技术措施来阻碍或控制您复制或分发的副本的阅读或进一步复制。但是，您可以接受赔偿以换取副本。如果分发足够多的副本，则还必须遵循第3节中的条件。
</p>
<p>您还可以在上述相同条件下出借副本，并可以公开展示副本。
</p>
</li><li>大量复制<p>如果您发布文档的印刷副本（或通常具有印刷封面的介质副本），且编号超过100，并且文档的许可通知书要求包含封面文字，则必须将这些副本随附在清晰可见的所有文档中封面文字：封面上的封面文字和封底上的封面文字。两种封面都必须清楚，清楚地标识您是这些副本的发行者。封面必须显示完整的标题，标题中的所有单词均应同样醒目且可见。您还可以在封面上添加其他材料。只要封面保留了文档标题并满足这些条件，则仅对封面进行更改即可在其他方面被视为逐字复印。
</p>
<p>如果任何一个封面所需的文本量太大，无法清晰地容纳，则应将列出的第一个（合理合理的数量）放在实际的封面上，然后将其余部分继续放在相邻的页面上。
</p>
<p>如果您发布或分发的Opaque文档副本数量超过100，则必须在每份Opaque副本中包含机器可读的透明副本，或者在每份Opaque副本中或其中声明一个计算机网络位置，通用网络将从该位置开始使用public可以使用公共标准网络协议下载完整的文档透明副本，而无需添加任何材料。如果使用后一种选项，则在开始批量分发不透明副本时，必须采取合理的审慎步骤，以确保该透明副本将在指定位置保持可访问的状态，直到您上一次分发不透明副本至少一年之后。该版本的不透明副本（直接或通过您的代理商或零售商）向公众发布。
</p>
<p>要求（但不是必须）在重新分发大量副本之前，与文档作者保持良好联系，以便他们有机会为您提供文档的更新版本。
</p>
</li><li>修改方式<p>您可以在上述第2节和第3节的条件下复制和分发本文档的修改版本，前提是您严格按照本许可协议发布修改版本，而修改版本则充当文档的角色，从而许可对本文档的分发和修改拥有副本的修改版本。此外，您必须在修改后的版本中执行以下操作：</p>
<ol>
<li>在标题页（和封面，如果有的话）中使用与本文档以及先前版本（如果有的话，应在文档的“历史记录”部分中列出）不同的标题。如果该版本的原始发行者给予许可，则可以使用与先前版本相同的标题。

</li><li>在标题页上列出作者，一个或多个负责修改版本著作权的作者或实体，以及至少五名文档的主要作者（所有主要作者，如果少于五），除非他们使您脱离此要求。

</li><li>在“标题”页面上声明修改版本的发布者的名称，作为发布者。

</li><li>保留文档的所有版权声明。

</li><li>在其他版权声明旁边添加用于修改的适当版权声明。

</li><li>在版权声明之后，立即包含一个许可声明，以下面的附录中所示的形式，向公众授予根据本许可条款使用修改版的许可。

</li><li>在该许可证声明中保留不可变部分的完整列表以及文档的许可证声明中提供的必需封面文字。

</li><li>随附本许可证的未更改副本。

</li><li>保留标题为“历史”的部分，保留其标题，并在其上添加至少说明标题页上给出的修改版本的标题，年份，新作者和发行者的项目。如果文档中没有标题为“历史记录”的部分，请在其标题页上创建一个说明文档的标题，年份，作者和出版者的内容，然后添加一项描述上一句中所述的修改版本。

</li><li>保留文档中给出的网络位置（如果有），以供公众访问文档的透明副本，同样，保留文档中给出的基于其以前版本的网络位置。这些可以放在“历史记录”部分中。对于在文档本身之前至少四年出版的作品，或者如果其所指版本的原始发行者给予许可，您可以省略其网络位置。

</li><li>对于标题为“致谢”或“奉献”的任何部分，请保留本部分的标题，并在本部分中保留其中给出的每个贡献者致谢和/或奉献的所有内容和基调。

</li><li>保留文档的所有不变部分，其文本和标题保持不变。章节编号或同等编号不视为章节标题的一部分。

</li><li>删除任何标题为“背书”的部分。这样的部分可能不包含在修改版本中。

</li><li>请勿将任何现有部分的标题重命名为“背书”，或与任何不变部分的标题冲突。

</li><li>保留所有保修免责声明。
</li></ol>

<p>如果修改后的版本包括新的前节或附录，这些节或附录符合第二节的规定，并且不包含从文档中复制的材料，则可以选择将其中的部分或全部指定为不变的。为此，请将其标题添加到“修改版本”许可声明中的“不变部分”列表中。这些标题必须与任何其他节标题不同。
</p>
<p>您可以添加标题为“背书”的部分，但其中仅包含各方对您的修改版本的背书，例如，同行评审声明或该文本已被组织批准为标准的权威定义。
</p>
<p>您可以在修改版本的封面文本列表的末尾添加最多5个单词的段落作为“封面文本”，以及最多25个单词的段落作为“封面文本”。任何一个实体（或通过它们的安排）都只能添加“封面文字”和“封面文字”中的一个段落。如果文档已经包含同一封面的封面文字，该文字是您先前添加的或由您代表的同一实体做出的安排而添加的，则不得添加其他文字；但是您可以在添加了旧版本的以前的发布者的明确许可下替换旧版本。
</p>
<p>本文档的作者和发行者未获得本许可证的许可，不得使用其名称进行宣传或主张或暗示认可任何修改版本。
</p>
</li><li>合并文件<p>您可以根据上文第4节中针对修改版本定义的条款，将文档与根据本许可发布的其他文档进行组合，但前提是您必须将所有未经修改的原始文档的所有不变部分都包含在其中，并列出所有这些文档作为您许可协议中合并工作的不变部分，并保留其所有保修免责声明。
</p>
<p>合并后的作品仅包含此许可的一个副本，并且多个相同的不变部分可用一个副本代替。如果存在多个具有相同名称但内容不同的不变部分，请在该部分的末尾加上括号，在该部分的末尾添加原始作者或发布者的名称（如果已知），以使每个此类的标题唯一。唯一编号。对合并作品的许可声明中不变部分列表中的部分标题进行相同的调整。
</p>
<p>在组合中，必须将各种原始文档中标题为“ History”的任何部分组合在一起，组成一个标题为“ History”的部分；同样，将标题为“致谢”的所有部分以及标题为“奉献”的任何部分组合在一起。您必须删除所有标题为“背书”的部分。
</p>
</li><li>文件收集<p>您可以收集由本许可协议下发布的文档和其他文档组成的集合，并在该文档中将其替换为各个文档中包含的单个副本，前提是您遵守本许可协议的规定。在所有其他方面逐字抄录每份文件。
</p>
<p>您可以从此类集合中提取单个文档，并根据本许可证单独分发它，前提是您将本许可证的副本插入提取的文档中，并且在与该文档的逐字复制有关的所有其他方面遵守本许可证。
</p>
</li><li>独立工作的集合<p>如果文件或衍生产品的版权不用于限制合法权利，则该文件或其衍生物与其他单独或独立的文件或作品在存储或分发介质中或在其上的汇编将被称为“汇总”。汇编用户的数量超出了个人作品的许可范围。当文档包含在汇总中时，本许可不适用于汇总中的其他作品，而这些作品本身不是文档的衍生作品。
</p>
<p>如果第3节的封面文字要求适用于本文档的这些副本，则如果该文档少于全部汇总的一半，则可以将文档的封面文字放在汇总中将文档括起来的封面上，或者如果文档为电子形式，则具有等同的封面电子形式。否则，它们必须出现在将整个集合括起来的印刷封面上。
</p>
</li><li>翻译<p>翻译被视为一种修改，因此您可以根据第4节的条款分发文档的翻译。用翻译替换不变部分需要其版权所有者的特殊许可，但是除了这些不变部分的原始版本之外，您还可以包括部分或全部不变部分的翻译。您可以在本文档以及所有保修免责声明中包括本许可，所有许可声明的翻译，但前提是您还包括本许可的原始英文版以及这些声明和免责声明的原始版本。如果本许可的翻译版本与原始版本或声明或免责声明之间存在分歧，则以原始版本为准。
</p>
<p>如果文档中某节的标题为“致谢”，“奉献”或“历史记录”，则保留其标题（第1节）的要求（第4节）通常要求更改实际标题。
</p>
</li><li>终止<p>除非本许可明确规定，否则您不得复制，修改，再许可或分发文档。否则，任何尝试复制，修改，再许可或分发的尝试均无效，并且将自动终止您在本许可下的权利。
</p>
<p>但是，如果您停止一切违反本许可的行为，则将恢复（a）临时恢复特定版权持有者的许可，除非且直到该版权持有者明确终止并最终终止您的许可为止；以及（b）如果该版权持有者失败，则永久地在停止交易发生后的60天之内通过某种合理的方式通知您违规行为。
</p>
<p>此外，如果版权所有者以某种合理的方式通知您有关侵权的信息，那么该版权所有者的许可将被永久恢复，这是您第一次从该版权所有者那里收到关于该许可（对于任何作品）的违反通知，并且您会在收到通知后的30天内纠正违规行为。
</p>
<p>根据本节终止您的权利并不会终止根据本许可从您那里收到副本或权利的各方的许可。如果您的权利已被终止且未永久恢复，则收到部分或全部相同材料的副本将不会赋予您使用该材料的任何权利。
</p>
</li><li>本许可证的未来修订<p>自由软件基金会可能会不时发布GNU自由文档许可证的新修订版。这样的新版本将在本质上与当前版本相似，但是可能在细节上有所不同以解决新问题或疑虑。参见<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a> 。</p>
<p>许可证的每个版本都有一个不同的版本号。如果文档指定适用于此许可的特定编号版本“或任何更高版本”，则您可以选择遵循该指定版本或已发布的任何更高版本的条款和条件（不作为草稿）由自由软件基金会提供。如果文档未指定此许可的版本号，则可以选择自由软件基金会曾经发布的任何版本（而不是草稿）。如果文档指定代理可以决定可以使用此许可证的将来版本，则该代理对版本的公开接受声明将永久授权您为文档选择该版本。
</p>
</li><li>许可<p>“大型多作者协作网站”（或“ MMC网站”）是指发布版权作品并为任何人提供编辑这些作品的重要便利的任何万维网服务器。任何人都可以编辑的公共Wiki是此类服务器的示例。网站中包含的“大型多作者合作”（或“ MMC”）是指在MMC网站上发布的任何受版权保护的作品集。
</p>
<p>“ CC-BY-SA”指由知识共享公司发行的知识共享署名-相同方式共享3.0许可，该公司是一家非营利性公司，主要营业地点位于加利福尼亚州旧金山，并且该版本的未来copyleft版本该组织发布的许可。
</p>
<p>“合并”是指作为另一文档的一部分全部或部分发布或重新发布文档。
</p>
<p>如果MMC已根据本许可获得许可，并且所有根据该许可在MMC以外的其他地方首次发行并随后全部或部分合并到MMC中的作品，则该MMC是“有资格获得许可的”，（1）没有封面文字或不变部分，因此（2）在2008年11月1日之前合并。
</p>
<p>MMC站点的运营商可以在2009年8月1日之前的任何时间在CC-BY-SA之下的同一站点上重新发布该站点中包含的MMC，前提是该MMC有资格获得许可。
</p>
</li></ol>

<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h3 class="heading">附录：如何对您的文档使用此许可证</h3>

<p>要在您编写的文档中使用此许可，请在该文档中包括一个许可副本，并在标题页后放置以下版权和许可声明：</p>
<div class="smallexample">
<pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>如果您有不变的部分，封面文本和封面文本，则将“ with…Texts。”行替换为：</p>
<div class="smallexample">
<pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>如果您有不带封面文本的不变部分，或这三个部分的其他组合，请合并这两种选择以适应情况。
</p>
<p>如果您的文档包含不平凡的程序代码示例，我们建议您根据自由软件许可（例如GNU通用公共许可）的选择，并行发布这些示例，以允许它们在自由软件中使用。
</p>


<hr>





</body></html>