<html><head></head><body lang="zh-Hans" ><!-- 
This manual is for GNU Automake (version 1.16.1,
26 February 2018), a program that creates GNU standards-compliant
Makefiles from template files.

Copyright (C) 1995-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License,
Version 1.3 or any later version published by the Free Software
Foundation; with no Invariant Sections, with no Front-Cover texts,
and with no Back-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License."
 --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>自动制作</title>

<meta name="description" content="automake">
<meta name="keywords" content="automake">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#Top" rel="start" title="Top">
<link href="#Indices" rel="index" title="Indices">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="/manual" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="manual.css">





<h1 class="settitle" align="center">自动制作</h1>








<a name="SEC_Contents"></a>
<h2 class="contents-heading">目录</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1引言</a></li>
  <li><a name="toc-An-Introduction-to-the-Autotools" href="#Autotools-Introduction">2自动工具简介</a>
  <ul class="no-bullet">
    <li><a name="toc-Introducing-the-GNU-Build-System" href="#GNU-Build-System">2.1介绍GNU Build系统</a></li>
    <li><a name="toc-Use-Cases-for-the-GNU-Build-System" href="#Use-Cases">2.2 GNU构建系统的用例</a>
    <ul class="no-bullet">
      <li><a name="toc-Basic-Installation-1" href="#Basic-Installation">2.2.1基本安装</a></li>
      <li><a name="toc-Standard-Makefile-Targets" href="#Standard-Targets">2.2.2标准<samp>Makefile</samp>目标</a></li>
      <li><a name="toc-Standard-Directory-Variables-1" href="#Standard-Directory-Variables">2.2.3标准目录变量</a></li>
      <li><a name="toc-Standard-Configuration-Variables-1" href="#Standard-Configuration-Variables">2.2.4标准配置变量</a></li>
      <li><a name="toc-Overriding-Default-Configuration-Setting-with-config_002esite" href="#config_002esite">2.2.5使用覆盖默认配置设置<samp>config.site</samp></a></li>
      <li><a name="toc-Parallel-Build-Trees-_0028a_002ek_002ea_002e-VPATH-Builds_0029" href="#VPATH-Builds">2.2.6并行构建树（又名VPATH构建）</a></li>
      <li><a name="toc-Two_002dPart-Installation" href="#Two_002dPart-Install">2.2.7两部分安装</a></li>
      <li><a name="toc-Cross_002dCompilation-1" href="#Cross_002dCompilation">2.2.8交叉编译</a></li>
      <li><a name="toc-Renaming-Programs-at-Install-Time" href="#Renaming">2.2.9在安装时重命名程序</a></li>
      <li><a name="toc-Building-Binary-Packages-Using-DESTDIR" href="#DESTDIR">2.2.10使用DESTDIR构建二进制包</a></li>
      <li><a name="toc-Preparing-Distributions-1" href="#Preparing-Distributions">2.2.11准备发行版</a></li>
      <li><a name="toc-Automatic-Dependency-Tracking" href="#Dependency-Tracking">2.2.12自动依赖性跟踪</a></li>
      <li><a name="toc-Nested-Packages-1" href="#Nested-Packages">2.2.13嵌套包</a></li>
    </ul></li>
    <li><a name="toc-How-Autotools-Help" href="#Why-Autotools">2.3自动工具的帮助</a></li>
    <li><a name="toc-A-Small-Hello-World" href="#Hello-World">2.4一个小的Hello World</a>
    <ul class="no-bullet">
      <li><a name="toc-Creating-amhello_002d1_002e0_002etar_002egz" href="#Creating-amhello">2.4.1创建<samp>amhello-1.0.tar.gz</samp></a></li>
      <li><a name="toc-amhello_0027s-configure_002eac-Setup-Explained-1" href="#amhello_0027s-configure_002eac-Setup-Explained">2.4.2 <code>amhello</code>的<samp>configure.ac</samp>安装说明</a></li>
      <li><a name="toc-amhello_0027s-Makefile_002eam-Setup-Explained-1" href="#amhello_0027s-Makefile_002eam-Setup-Explained">2.4.3 <code>amhello</code>的<samp>Makefile.am</samp>安装说明</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-General-ideas" href="#Generalities">3总体思路</a>
  <ul class="no-bullet">
    <li><a name="toc-General-Operation-1" href="#General-Operation">3.1一般操作</a></li>
    <li><a name="toc-Strictness-1" href="#Strictness">3.2严谨性</a></li>
    <li><a name="toc-The-Uniform-Naming-Scheme" href="#Uniform">3.3统一命名方案</a></li>
    <li><a name="toc-Staying-below-the-command-line-length-limit" href="#Length-Limitations">3.4保持在命令行长度限制以下</a></li>
    <li><a name="toc-How-derived-variables-are-named" href="#Canonicalization">3.5如何命名派生变量</a></li>
    <li><a name="toc-Variables-reserved-for-the-user" href="#User-Variables">3.6为用户保留的变量</a></li>
    <li><a name="toc-Programs-automake-might-require" href="#Auxiliary-Programs">3.7程序可能需要自动制作</a></li>
  </ul></li>
  <li><a name="toc-Some-example-packages" href="#Examples">4一些示例包</a>
  <ul class="no-bullet">
    <li><a name="toc-A-simple-example_002c-start-to-finish" href="#Complete">4.1一个简单的例子，从头开始</a></li>
    <li><a name="toc-Building-true-and-false" href="#true">4.2建立真假</a></li>
  </ul></li>
  <li><a name="toc-Creating-a-Makefile_002ein" href="#automake-Invocation">5创建一个<samp>Makefile.in</samp></a></li>
  <li><a name="toc-Scanning-configure_002eac_002c-using-aclocal" href="#configure">6扫描<samp>configure.ac</samp> ，使用<code>aclocal</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Configuration-requirements" href="#Requirements">6.1配置要求</a></li>
    <li><a name="toc-Other-things-Automake-recognizes" href="#Optional">6.2 Automake可以识别的其他内容</a></li>
    <li><a name="toc-Auto_002dgenerating-aclocal_002em4" href="#aclocal-Invocation">6.3自动生成aclocal.m4</a>
    <ul class="no-bullet">
      <li><a name="toc-aclocal-Options-1" href="#aclocal-Options">6.3.1 aclocal选项</a></li>
      <li><a name="toc-Macro-Search-Path-1" href="#Macro-Search-Path">6.3.2宏搜索路径</a></li>
      <li><a name="toc-Writing-your-own-aclocal-macros" href="#Extending-aclocal">6.3.3编写自己的aclocal宏</a></li>
      <li><a name="toc-Handling-Local-Macros" href="#Local-Macros">6.3.4处理本地宏</a></li>
      <li><a name="toc-Serial-Numbers" href="#Serials">6.3.5序列号</a></li>
      <li><a name="toc-The-Future-of-aclocal" href="#Future-of-aclocal">6.3.6的未来<code>aclocal</code></a></li>
    </ul></li>
    <li><a name="toc-Autoconf-macros-supplied-with-Automake" href="#Macros">6.4 Automake随附的Autoconf宏</a>
    <ul class="no-bullet">
      <li><a name="toc-Public-Macros-1" href="#Public-Macros">6.4.1公共宏</a></li>
      <li><a name="toc-Obsolete-Macros-1" href="#Obsolete-Macros">6.4.2过时的宏</a></li>
      <li><a name="toc-Private-Macros-1" href="#Private-Macros">6.4.3专用宏</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Directories-1" href="#Directories">7目录</a>
  <ul class="no-bullet">
    <li><a name="toc-Recursing-subdirectories" href="#Subdirectories">7.1递归子目录</a></li>
    <li><a name="toc-Conditional-Subdirectories-1" href="#Conditional-Subdirectories">7.2条件子目录</a>
    <ul class="no-bullet">
      <li><a name="toc-SUBDIRS-vs_002e-DIST_005fSUBDIRS" href="#SUBDIRS-vs-DIST_005fSUBDIRS">7.2.1 <code>SUBDIRS</code>与<code>DIST_SUBDIRS</code></a></li>
      <li><a name="toc-Subdirectories-with-AM_005fCONDITIONAL-1" href="#Subdirectories-with-AM_005fCONDITIONAL">7.2.2带有<code>AM_CONDITIONAL</code></a></li>
      <li><a name="toc-Subdirectories-with-AC_005fSUBST-1" href="#Subdirectories-with-AC_005fSUBST">7.2.3带有<code>AC_SUBST</code></a></li>
      <li><a name="toc-Unconfigured-Subdirectories-1" href="#Unconfigured-Subdirectories">7.2.4未配置的子目录</a></li>
    </ul></li>
    <li><a name="toc-An-Alternative-Approach-to-Subdirectories" href="#Alternative">7.3子目录的替代方法</a></li>
    <li><a name="toc-Nesting-Packages" href="#Subpackages">7.4嵌套包</a></li>
  </ul></li>
  <li><a name="toc-Building-Programs-and-Libraries" href="#Programs">8建筑程序和图书馆</a>
  <ul class="no-bullet">
    <li><a name="toc-Building-a-program" href="#A-Program">8.1编写程序</a>
    <ul class="no-bullet">
      <li><a name="toc-Defining-program-sources" href="#Program-Sources">8.1.1定义程序源</a></li>
      <li><a name="toc-Linking-the-program" href="#Linking">8.1.2链接程序</a></li>
      <li><a name="toc-Conditional-compilation-of-sources" href="#Conditional-Sources">8.1.3有条件的源汇编</a></li>
      <li><a name="toc-Conditional-compilation-of-programs" href="#Conditional-Programs">8.1.4程序的条件编译</a></li>
    </ul></li>
    <li><a name="toc-Building-a-library" href="#A-Library">8.2建立图书馆</a></li>
    <li><a name="toc-Building-a-Shared-Library" href="#A-Shared-Library">8.3建立共享库</a>
    <ul class="no-bullet">
      <li><a name="toc-The-Libtool-Concept" href="#Libtool-Concept">8.3.1 Libtool概念</a></li>
      <li><a name="toc-Building-Libtool-Libraries" href="#Libtool-Libraries">8.3.2构建Libtool库</a></li>
      <li><a name="toc-Building-Libtool-Libraries-Conditionally" href="#Conditional-Libtool-Libraries">8.3.3有条件地构建Libtool库</a></li>
      <li><a name="toc-Libtool-Libraries-with-Conditional-Sources" href="#Conditional-Libtool-Sources">8.3.4具有条件源的Libtool库</a></li>
      <li><a name="toc-Libtool-Convenience-Libraries-1" href="#Libtool-Convenience-Libraries">8.3.5 Libtool便利性图书馆</a></li>
      <li><a name="toc-Libtool-Modules-1" href="#Libtool-Modules">8.3.6 Libtool模块</a></li>
      <li><a name="toc-_005fLIBADD_002c-_005fLDFLAGS_002c-and-_005fLIBTOOLFLAGS" href="#Libtool-Flags">8.3.7 <code>_LIBADD</code> ， <code>_LDFLAGS</code>和<code>_LIBTOOLFLAGS</code></a></li>
      <li><a name="toc-LTLIBOBJS-and-LTALLOCA" href="#LTLIBOBJS">8.3.8 <code>LTLIBOBJS</code>和<code>LTALLOCA</code></a></li>
      <li><a name="toc-Common-Issues-Related-to-Libtool_0027s-Use" href="#Libtool-Issues">8.3.9与Libtool使用相关的常见问题</a>
      <ul class="no-bullet">
        <li><a name="toc-Error_003a-required-file-_0060_002e_002fltmain_002esh_0027-not-found" href="#Error-required-file-ltmain_002esh-not-found">8.3.9.1错误：“ <samp>required file `./ltmain.sh' not found</samp> '</a></li>
        <li><a name="toc-Objects-created-with-both-libtool-and-without" href="#Objects-created-both-with-libtool-and-without">8.3.9.2对象' <samp>created with both libtool and without</samp> '</a></li>
      </ul></li>
    </ul></li>
    <li><a name="toc-Program-and-Library-Variables-1" href="#Program-and-Library-Variables">8.4程序和库变量</a></li>
    <li><a name="toc-Default-_005fSOURCES-1" href="#Default-_005fSOURCES">8.5默认<code>_SOURCES</code></a></li>
    <li><a name="toc-Special-handling-for-LIBOBJS-and-ALLOCA" href="#LIBOBJS">8.6特殊处理<code>LIBOBJS</code>和<code>ALLOCA</code></a></li>
    <li><a name="toc-Variables-used-when-building-a-program" href="#Program-Variables">8.7编译程序时使用的变量</a></li>
    <li><a name="toc-Yacc-and-Lex-support" href="#Yacc-and-Lex">8.8 Yacc和Lex支持</a></li>
    <li><a name="toc-C_002b_002b-Support-1" href="#C_002b_002b-Support">8.9 C ++支持</a></li>
    <li><a name="toc-Objective-C-Support-1" href="#Objective-C-Support">8.10目标C支持</a></li>
    <li><a name="toc-Objective-C_002b_002b-Support-1" href="#Objective-C_002b_002b-Support">8.11目标C ++支持</a></li>
    <li><a name="toc-Unified-Parallel-C-Support-1" href="#Unified-Parallel-C-Support">8.12统一并行C支持</a></li>
    <li><a name="toc-Assembly-Support-1" href="#Assembly-Support">8.13装配支持</a></li>
    <li><a name="toc-Fortran-77-Support-1" href="#Fortran-77-Support">8.14 Fortran 77支持</a>
    <ul class="no-bullet">
      <li><a name="toc-Preprocessing-Fortran-77-1" href="#Preprocessing-Fortran-77">8.14.1预处理Fortran 77</a></li>
      <li><a name="toc-Compiling-Fortran-77-Files-1" href="#Compiling-Fortran-77-Files">8.14.2编译Fortran 77文件</a></li>
      <li><a name="toc-Mixing-Fortran-77-With-C-and-C_002b_002b-1" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">8.14.3将Fortran 77与C和C ++混合</a>
      <ul class="no-bullet">
        <li><a name="toc-How-the-Linker-is-Chosen-1" href="#How-the-Linker-is-Chosen">8.14.3.1如何选择链接器</a></li>
      </ul></li>
    </ul></li>
    <li><a name="toc-Fortran-9x-Support-1" href="#Fortran-9x-Support">8.15 Fortran 9x支持</a>
    <ul class="no-bullet">
      <li><a name="toc-Compiling-Fortran-9x-Files-1" href="#Compiling-Fortran-9x-Files">8.15.1编译Fortran 9x文件</a></li>
    </ul></li>
    <li><a name="toc-Compiling-Java-sources-using-gcj" href="#Java-Support-with-gcj">8.16使用gcj编译Java源代码</a></li>
    <li><a name="toc-Vala-Support-1" href="#Vala-Support">8.17 Vala支持</a></li>
    <li><a name="toc-Support-for-Other-Languages-1" href="#Support-for-Other-Languages">8.18支持其他语言</a></li>
    <li><a name="toc-Automatic-dependency-tracking" href="#Dependencies">8.19自动依赖性跟踪</a></li>
    <li><a name="toc-Support-for-executable-extensions" href="#EXEEXT">8.20支持可执行扩展</a></li>
  </ul></li>
  <li><a name="toc-Other-Derived-Objects" href="#Other-Objects">9其他派生对象</a>
  <ul class="no-bullet">
    <li><a name="toc-Executable-Scripts" href="#Scripts">9.1可执行脚本</a></li>
    <li><a name="toc-Header-files" href="#Headers">9.2头文件</a></li>
    <li><a name="toc-Architecture_002dindependent-data-files" href="#Data">9.3与体系结构无关的数据文件</a></li>
    <li><a name="toc-Built-Sources" href="#Sources">9.4内置源</a>
    <ul class="no-bullet">
      <li><a name="toc-Built-Sources-Example-1" href="#Built-Sources-Example">9.4.1内置源示例</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Other-GNU-Tools-1" href="#Other-GNU-Tools">10个其他GNU工具</a>
  <ul class="no-bullet">
    <li><a name="toc-Emacs-Lisp-1" href="#Emacs-Lisp">10.1 Emacs Lisp</a></li>
    <li><a name="toc-Gettext" href="#gettext">10.2 Gettext</a></li>
    <li><a name="toc-Libtool-1" href="#Libtool">10.3 Libtool</a></li>
    <li><a name="toc-Java-bytecode-compilation-_0028deprecated_0029" href="#Java">10.4 Java字节码编译（不建议使用）</a></li>
    <li><a name="toc-Python-1" href="#Python">10.5的Python</a></li>
  </ul></li>
  <li><a name="toc-Building-documentation" href="#Documentation">11建筑文件</a>
  <ul class="no-bullet">
    <li><a name="toc-Texinfo-1" href="#Texinfo">11.1 Texinfo</a></li>
    <li><a name="toc-Man-Pages-1" href="#Man-Pages">11.2手册页</a></li>
  </ul></li>
  <li><a name="toc-What-Gets-Installed" href="#Install">12安装什么</a>
  <ul class="no-bullet">
    <li><a name="toc-Basics-of-Installation-1" href="#Basics-of-Installation">12.1安装基础</a></li>
    <li><a name="toc-The-Two-Parts-of-Install-1" href="#The-Two-Parts-of-Install">12.2安装的两个部分</a></li>
    <li><a name="toc-Extending-Installation-1" href="#Extending-Installation">12.3扩展安装</a></li>
    <li><a name="toc-Staged-Installs-1" href="#Staged-Installs">12.4分阶段安装</a></li>
    <li><a name="toc-Install-Rules-for-the-User-1" href="#Install-Rules-for-the-User">12.5用户安装规则</a></li>
  </ul></li>
  <li><a name="toc-What-Gets-Cleaned" href="#Clean">13清洁什么</a></li>
  <li><a name="toc-What-Goes-in-a-Distribution" href="#Dist">14发行内容</a>
  <ul class="no-bullet">
    <li><a name="toc-Basics-of-Distribution-1" href="#Basics-of-Distribution">14.1发行基础</a></li>
    <li><a name="toc-Fine_002dgrained-Distribution-Control-1" href="#Fine_002dgrained-Distribution-Control">14.2细粒度的分发控制</a></li>
    <li><a name="toc-The-dist-Hook-1" href="#The-dist-Hook">14.3 dist钩</a></li>
    <li><a name="toc-Checking-the-Distribution-1" href="#Checking-the-Distribution">14.4检查分布</a></li>
    <li><a name="toc-The-Types-of-Distributions-1" href="#The-Types-of-Distributions">14.5分布类型</a></li>
  </ul></li>
  <li><a name="toc-Support-for-test-suites" href="#Tests">15对测试套件的支持</a>
  <ul class="no-bullet">
    <li><a name="toc-Generalities-about-Testing-1" href="#Generalities-about-Testing">15.1有关测试的一般性</a></li>
    <li><a name="toc-Simple-Tests-1" href="#Simple-Tests">15.2简单测试</a>
    <ul class="no-bullet">
      <li><a name="toc-Scripts_002dbased-Testsuites-1" href="#Scripts_002dbased-Testsuites">15.2.1基于脚本的测试套件</a></li>
      <li><a name="toc-Older-_0028and-discouraged_0029-serial-test-harness" href="#Serial-Test-Harness">15.2.2旧的（不鼓励使用的）串行测试工具</a></li>
      <li><a name="toc-Parallel-Test-Harness-1" href="#Parallel-Test-Harness">15.2.3并行测试线束</a></li>
    </ul></li>
    <li><a name="toc-Custom-Test-Drivers-1" href="#Custom-Test-Drivers">15.3自定义测试驱动程序</a>
    <ul class="no-bullet">
      <li><a name="toc-Overview-of-Custom-Test-Drivers-Support-1" href="#Overview-of-Custom-Test-Drivers-Support">15.3.1自定义测试驱动程序支持概述</a></li>
      <li><a name="toc-Declaring-Custom-Test-Drivers-1" href="#Declaring-Custom-Test-Drivers">15.3.2声明自定义测试驱动程序</a></li>
      <li><a name="toc-API-for-Custom-Test-Drivers-1" href="#API-for-Custom-Test-Drivers">15.3.3自定义测试驱动程序的API</a>
      <ul class="no-bullet">
        <li><a name="toc-Command_002dline-arguments-for-test-drivers-1" href="#Command_002dline-arguments-for-test-drivers">15.3.3.1测试驱动程序的命令行参数</a></li>
        <li><a name="toc-Log-files-generation-and-test-results-recording-1" href="#Log-files-generation-and-test-results-recording">15.3.3.2日志文件生成和测试结果记录</a></li>
        <li><a name="toc-Testsuite-progress-output-1" href="#Testsuite-progress-output">15.3.3.3测试套件进度输出</a></li>
      </ul></li>
    </ul></li>
    <li><a name="toc-Using-the-TAP-test-protocol-1" href="#Using-the-TAP-test-protocol">15.4使用TAP测试协议</a>
    <ul class="no-bullet">
      <li><a name="toc-Introduction-to-TAP-1" href="#Introduction-to-TAP">15.4.1 TAP简介</a></li>
      <li><a name="toc-Use-TAP-with-the-Automake-test-harness-1" href="#Use-TAP-with-the-Automake-test-harness">15.4.2将TAP与Automake测试工具一起使用</a></li>
      <li><a name="toc-Incompatibilities-with-other-TAP-parsers-and-drivers-1" href="#Incompatibilities-with-other-TAP-parsers-and-drivers">15.4.3与其他TAP解析器和驱动程序不兼容</a></li>
      <li><a name="toc-Links-and-external-resources-on-TAP-1" href="#Links-and-external-resources-on-TAP">15.4.4 TAP上的链接和外部资源</a></li>
    </ul></li>
    <li><a name="toc-DejaGnu-Tests-1" href="#DejaGnu-Tests">15.5 DejaGnu测试</a></li>
    <li><a name="toc-Install-Tests-1" href="#Install-Tests">15.6安装测试</a></li>
  </ul></li>
  <li><a name="toc-Rebuilding-Makefiles" href="#Rebuilding">16重建Makefile</a></li>
  <li><a name="toc-Changing-Automake_0027s-Behavior" href="#Options">17更改Automake的行为</a>
  <ul class="no-bullet">
    <li><a name="toc-Options-generalities-1" href="#Options-generalities">17.1选项概述</a></li>
    <li><a name="toc-List-of-Automake-options-1" href="#List-of-Automake-options">17.2自动制作选项列表</a></li>
  </ul></li>
  <li><a name="toc-Miscellaneous-Rules" href="#Miscellaneous">18条其他规则</a>
  <ul class="no-bullet">
    <li><a name="toc-Interfacing-to-etags" href="#Tags">18.1与<code>etags</code></a></li>
    <li><a name="toc-Handling-new-file-extensions" href="#Suffixes">18.2处理新的文件扩展名</a></li>
  </ul></li>
  <li><a name="toc-Include-1" href="#Include">19包括</a></li>
  <li><a name="toc-Conditionals-1" href="#Conditionals">20个条件</a>
  <ul class="no-bullet">
    <li><a name="toc-Usage-of-Conditionals-1" href="#Usage-of-Conditionals">20.1条件句的用法</a></li>
    <li><a name="toc-Limits-of-Conditionals-1" href="#Limits-of-Conditionals">20.2条件限制</a></li>
  </ul></li>
  <li><a name="toc-Silencing-make" href="#Silencing-Make">21沉默<code>make</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Make-is-verbose-by-default" href="#Make-verbosity">21.1默认情况下make为冗长</a></li>
    <li><a name="toc-Standard-and-generic-ways-to-silence-make" href="#Tricks-For-Silencing-Make">21.2静音的标准方法和通用方法</a></li>
    <li><a name="toc-How-Automake-can-help-in-silencing-make" href="#Automake-Silent-Rules">21.3 Automake如何帮助静音</a></li>
  </ul></li>
  <li><a name="toc-The-effect-of-_002d_002dgnu-and-_002d_002dgnits" href="#Gnits">22的影响<samp>--gnu</samp>和<samp>--gnits</samp></a></li>
  <li><a name="toc-When-Automake-Isn_0027t-Enough" href="#Not-Enough">23 Automake不够用时</a>
  <ul class="no-bullet">
    <li><a name="toc-Extending-Automake-Rules" href="#Extending">23.1扩展自动制作规则</a></li>
    <li><a name="toc-Third_002dParty-Makefiles-1" href="#Third_002dParty-Makefiles">23.2第三方<samp>Makefile</samp> s</a></li>
  </ul></li>
  <li><a name="toc-Distributing-Makefile_002eins" href="#Distributing">24分配<samp>Makefile.in</samp> s</a></li>
  <li><a name="toc-Automake-API-Versioning" href="#API-Versioning">25 Automake API版本控制</a></li>
  <li><a name="toc-Upgrading-a-Package-to-a-Newer-Automake-Version" href="#Upgrading">26将软件包升级到较新的Automake版本</a></li>
  <li><a name="toc-Frequently-Asked-Questions-about-Automake" href="#FAQ">关于Automake的27个常见问题</a>
  <ul class="no-bullet">
    <li><a name="toc-CVS-and-generated-files" href="#CVS">27.1 CVS和生成的文件</a></li>
    <li><a name="toc-missing-and-AM_005fMAINTAINER_005fMODE" href="#maintainer_002dmode">27.2 <code>missing</code>和<code>AM_MAINTAINER_MODE</code></a></li>
    <li><a name="toc-Why-doesn_0027t-Automake-support-wildcards_003f" href="#Wildcards">27.3为什么Automake不支持通配符？</a></li>
    <li><a name="toc-Limitations-on-File-Names-1" href="#Limitations-on-File-Names">27.4文件名限制</a></li>
    <li><a name="toc-Errors-with-distclean-1" href="#Errors-with-distclean">27.5 distclean错误</a></li>
    <li><a name="toc-Flag-Variables-Ordering-1" href="#Flag-Variables-Ordering">27.6标志变量排序</a></li>
    <li><a name="toc-Why-are-object-files-sometimes-renamed_003f" href="#Renamed-Objects">27.7为什么有时会重命名目标文件？</a></li>
    <li><a name="toc-Per_002dObject-Flags-Emulation" href="#Per_002dObject-Flags">27.8每对象标志仿真</a></li>
    <li><a name="toc-Handling-Tools-that-Produce-Many-Outputs" href="#Multiple-Outputs">27.9处理产生大量输出的工具</a></li>
    <li><a name="toc-Installing-to-Hard_002dCoded-Locations" href="#Hard_002dCoded-Install-Paths">27.10安装到硬编码位置</a></li>
    <li><a name="toc-Debugging-Make-Rules-1" href="#Debugging-Make-Rules">27.11调试制作规则</a></li>
    <li><a name="toc-Reporting-Bugs-1" href="#Reporting-Bugs">27.12报告错误</a></li>
  </ul></li>
  <li><a name="toc-Copying-This-Manual-1" href="#Copying-This-Manual">附录A复制本手册</a>
  <ul class="no-bullet">
    <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">A.1 GNU免费文档许可证</a></li>
  </ul></li>
  <li><a name="toc-Indices-1" href="#Indices">附录B指标</a>
  <ul class="no-bullet">
    <li><a name="toc-Macro-Index-1" href="#Macro-Index">B.1宏索引</a></li>
    <li><a name="toc-Variable-Index-1" href="#Variable-Index">B.2变量索引</a></li>
    <li><a name="toc-General-Index-1" href="#General-Index">B.3总索引</a></li>
  </ul></li>
</ul>
</div>






<a name="Top"></a>
<div class="header">
<p>下一篇： <a href="#Introduction" rel="next" accesskey="n">简介</a> ，上一篇：（ <a href="/manual" rel="up" accesskey="u">目录）</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="GNU-Automake"></a>
<h1 class="top">GNU Automake</h1>


<p>本手册适用于GNU Automake（2018年2月26日版本1.16.1），该程序可从模板文件创建符合GNU标准的Makefile。
</p>
<p>版权所有©1995-2018自由软件基金会，Inc.</p>
<blockquote>
<p>根据GNU自由文档许可版本1.3或自由软件基金会发布的任何更高版本，授予复制，分发和/或修改本文档的权限；没有不变部分，没有前封面文字，也没有后封面文字。许可证的副本包含在标题为“ GNU自由文档许可证”的部分中。
</p>
</blockquote>


<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Introduction" accesskey="1">简介</a> ：</td><td>  </td><td align="left" valign="top">Automake的目的</td></tr>
<tr><td align="left" valign="top">•自动工具<a href="#Autotools-Introduction" accesskey="2">简介</a> ：</td><td>  </td><td align="left" valign="top">自动工具简介</td></tr>
<tr><td align="left" valign="top">• <a href="#Generalities" accesskey="3">一般性</a> ：</td><td>  </td><td align="left" valign="top">总体思路</td></tr>
<tr><td align="left" valign="top">• <a href="#Examples" accesskey="4">示例</a> ：</td><td>  </td><td align="left" valign="top">一些示例包</td></tr>
<tr><td align="left" valign="top">• <a href="#automake-Invocation" accesskey="5">automake调用</a> ：</td><td>  </td><td align="left" valign="top">创建一个Makefile.in</td></tr>
<tr><td align="left" valign="top">• <a href="#configure" accesskey="6">配置</a> ：</td><td>  </td><td align="left" valign="top">使用aclocal扫描configure.ac</td></tr>
<tr><td align="left" valign="top">• <a href="#Directories" accesskey="7">目录</a> ：</td><td>  </td><td align="left" valign="top">声明子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Programs" accesskey="8">程序</a> ：</td><td>  </td><td align="left" valign="top">构建程序和库</td></tr>
<tr><td align="left" valign="top">• <a href="#Other-Objects" accesskey="9">其他对象</a> ：</td><td>  </td><td align="left" valign="top">其他派生对象</td></tr>
<tr><td align="left" valign="top">• <a href="#Other-GNU-Tools">其他GNU工具</a> ：</td><td>  </td><td align="left" valign="top">其他GNU工具</td></tr>
<tr><td align="left" valign="top">• <a href="#Documentation">文档</a> ：</td><td>  </td><td align="left" valign="top">建筑文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Install">安装</a> ：</td><td>  </td><td align="left" valign="top">安装了什么</td></tr>
<tr><td align="left" valign="top">• <a href="#Clean">清洁</a> ：</td><td>  </td><td align="left" valign="top">清洁什么</td></tr>
<tr><td align="left" valign="top">• <a href="#Dist">距离</a> ：</td><td>  </td><td align="left" valign="top">发行中的内容</td></tr>
<tr><td align="left" valign="top">• <a href="#Tests">测试</a> ：</td><td>  </td><td align="left" valign="top">支持测试套件</td></tr>
<tr><td align="left" valign="top">• <a href="#Rebuilding">重建</a> ：</td><td>  </td><td align="left" valign="top">自动重建Makefile</td></tr>
<tr><td align="left" valign="top">• <a href="#Options">选项</a> ：</td><td>  </td><td align="left" valign="top">改变Automake的行为</td></tr>
<tr><td align="left" valign="top">• <a href="#Miscellaneous">杂项</a> ：</td><td>  </td><td align="left" valign="top">杂项规则</td></tr>
<tr><td align="left" valign="top">• <a href="#Include">包括</a> ：</td><td>  </td><td align="left" valign="top">在Automake模板中包含其他文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditionals">条件</a> ：</td><td>  </td><td align="left" valign="top">有条件的</td></tr>
<tr><td align="left" valign="top">• <a href="#Silencing-Make">静音制作</a> ：</td><td>  </td><td align="left" valign="top">从中获取较少的详细输出<code>make</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Gnits">针织衫</a> ：</td><td>  </td><td align="left" valign="top">的效果<samp>--gnu</samp>和<samp>--gnits</samp>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Not-Enough">不够</a> ：</td><td>  </td><td align="left" valign="top">当Automake不够用时</td></tr>
<tr><td align="left" valign="top">• <a href="#Distributing">分发</a> ：</td><td>  </td><td align="left" valign="top">分发Makefile.in</td></tr>
<tr><td align="left" valign="top">• <a href="#API-Versioning">API版本控制</a> ：</td><td>  </td><td align="left" valign="top">关于Automake版本之间的兼容性</td></tr>
<tr><td align="left" valign="top">• <a href="#Upgrading">升级</a> ：</td><td>  </td><td align="left" valign="top">升级到较新的Automake版本</td></tr>
<tr><td align="left" valign="top">• <a href="#FAQ">常见问题解答</a> ：</td><td>  </td><td align="left" valign="top">经常问的问题</td></tr>
<tr><td align="left" valign="top">• <a href="#Copying-This-Manual">复制本手册</a> ：</td><td>  </td><td align="left" valign="top">如何制作本手册的副本</td></tr>
<tr><td align="left" valign="top">• <a href="#Indices">指标</a> ：</td><td>  </td><td align="left" valign="top">变量，宏和概念的索引</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"> &mdash; The Detailed Node Listing &mdash;

An Introduction to the Autotools

</pre></th></tr><tr><td align="left" valign="top">• <a href="#GNU-Build-System">GNU Build系统</a> ：</td><td>  </td><td align="left" valign="top">介绍GNU Build系统</td></tr>
<tr><td align="left" valign="top">• <a href="#Use-Cases">用例</a> ：</td><td>  </td><td align="left" valign="top">GNU构建系统的用例</td></tr>
<tr><td align="left" valign="top">• <a href="#Why-Autotools">为什么使用自动工具</a> ：</td><td>  </td><td align="left" valign="top">自动工具如何提供帮助</td></tr>
<tr><td align="left" valign="top">• <a href="#Hello-World">Hello World</a> ：</td><td>  </td><td align="left" valign="top">Hello World小包装</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Use Cases for the GNU Build System

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Basic-Installation">基本安装</a> ：</td><td>  </td><td align="left" valign="top">通用安装步骤</td></tr>
<tr><td align="left" valign="top">• <a href="#Standard-Targets">标准目标</a> ：</td><td>  </td><td align="left" valign="top">标准Makefile目标列表</td></tr>
<tr><td align="left" valign="top">• <a href="#Standard-Directory-Variables">标准目录变量</a> ：</td><td>  </td><td align="left" valign="top">标准目录变量列表</td></tr>
<tr><td align="left" valign="top">• <a href="#Standard-Configuration-Variables">标准配置变量</a> ：</td><td>  </td><td align="left" valign="top">使用配置变量</td></tr>
<tr><td align="left" valign="top">• <a href="#config_002esite">config.site</a> ：</td><td>  </td><td align="left" valign="top">使用config.site文件</td></tr>
<tr><td align="left" valign="top">• <a href="#VPATH-Builds">VPATH构建</a> ：</td><td>  </td><td align="left" valign="top">并行构建树</td></tr>
<tr><td align="left" valign="top">• <a href="#Two_002dPart-Install">两部分安装</a> ：</td><td>  </td><td align="left" valign="top">分别安装数据和程序</td></tr>
<tr><td align="left" valign="top">• <a href="#Cross_002dCompilation">交叉编译</a> ：</td><td>  </td><td align="left" valign="top">适用于其他架构</td></tr>
<tr><td align="left" valign="top">• <a href="#Renaming">重命名</a> ：</td><td>  </td><td align="left" valign="top">在安装时重命名程序</td></tr>
<tr><td align="left" valign="top">• <a href="#DESTDIR">DESTDIR</a> ：</td><td>  </td><td align="left" valign="top">使用DESTDIR构建二进制软件包</td></tr>
<tr><td align="left" valign="top">• <a href="#Preparing-Distributions">准备发行</a> ：</td><td>  </td><td align="left" valign="top">推出tarball</td></tr>
<tr><td align="left" valign="top">• <a href="#Dependency-Tracking">依赖性跟踪</a> ：</td><td>  </td><td align="left" valign="top">自动依赖性跟踪</td></tr>
<tr><td align="left" valign="top">• <a href="#Nested-Packages">嵌套包装</a> ：</td><td>  </td><td align="left" valign="top">GNU构建系统可以嵌套</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

A Small Hello World

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Creating-amhello">创建amhello</a> ：</td><td>  </td><td align="left" valign="top">创建<samp>amhello-1.0.tar.gz</samp>从头开始</td></tr>
<tr><td align="left" valign="top">• <a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello的configure.ac安装说明</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#amhello_0027s-Makefile_002eam-Setup-Explained">amhello的Makefile.am安装说明</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

General ideas

</pre></th></tr><tr><td align="left" valign="top">• <a href="#General-Operation">一般操作</a> ：</td><td>  </td><td align="left" valign="top">Automake的常规操作</td></tr>
<tr><td align="left" valign="top">• <a href="#Strictness">严格性</a> ：</td><td>  </td><td align="left" valign="top">标准一致性检查</td></tr>
<tr><td align="left" valign="top">• <a href="#Uniform">制服</a> ：</td><td>  </td><td align="left" valign="top">统一命名方案</td></tr>
<tr><td align="left" valign="top">• <a href="#Length-Limitations">长度限制</a> ：</td><td>  </td><td align="left" valign="top">保持低于命令行长度限制</td></tr>
<tr><td align="left" valign="top">• <a href="#Canonicalization">规范化</a> ：</td><td>  </td><td align="left" valign="top">衍生变量的命名方式</td></tr>
<tr><td align="left" valign="top">• <a href="#User-Variables">用户变量</a> ：</td><td>  </td><td align="left" valign="top">为用户保留的变量</td></tr>
<tr><td align="left" valign="top">• <a href="#Auxiliary-Programs">辅助程序</a> ：</td><td>  </td><td align="left" valign="top">程序可能需要自动制作</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Some example packages

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Complete">完成</a> ：</td><td>  </td><td align="left" valign="top">一个简单的例子，从头到尾</td></tr>
<tr><td align="left" valign="top">• <a href="#true">正确</a> ：</td><td>  </td><td align="left" valign="top">建立真假</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Scanning <samp>configure.ac</samp>, using <code>aclocal</code>

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Requirements">要求</a> ：</td><td>  </td><td align="left" valign="top">配置要求</td></tr>
<tr><td align="left" valign="top">• <a href="#Optional">可选</a> ：</td><td>  </td><td align="left" valign="top">Automake可以识别的其他内容</td></tr>
<tr><td align="left" valign="top">• <a href="#aclocal-Invocation">本地调用</a> ：</td><td>  </td><td align="left" valign="top">自动生成aclocal.m4</td></tr>
<tr><td align="left" valign="top">• <a href="#Macros">宏</a> ：</td><td>  </td><td align="left" valign="top">Automake随附的Autoconf宏</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Auto-generating aclocal.m4

</pre></th></tr><tr><td align="left" valign="top">• <a href="#aclocal-Options">aclocal选项</a> ：</td><td>  </td><td align="left" valign="top">aclocal支持的选项</td></tr>
<tr><td align="left" valign="top">• <a href="#Macro-Search-Path">宏搜索路径</a> ：</td><td>  </td><td align="left" valign="top">aclocal如何查找.m4文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Extending-aclocal">扩展aclocal</a> ：</td><td>  </td><td align="left" valign="top">编写自己的aclocal宏</td></tr>
<tr><td align="left" valign="top">• <a href="#Local-Macros">本地宏</a> ：</td><td>  </td><td align="left" valign="top">组织本地宏</td></tr>
<tr><td align="left" valign="top">• <a href="#Serials">序列号</a> ：</td><td>  </td><td align="left" valign="top">Autoconf宏中的串行线</td></tr>
<tr><td align="left" valign="top">• <a href="#Future-of-aclocal">aclocal的未来</a> ：</td><td>  </td><td align="left" valign="top">aclocal的预定死亡</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Autoconf macros supplied with Automake

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Public-Macros">公共宏</a> ：</td><td>  </td><td align="left" valign="top">您可以使用的宏。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Private-Macros">专用宏</a> ：</td><td>  </td><td align="left" valign="top">您不应该使用的宏。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Directories

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Subdirectories">子目录</a> ：</td><td>  </td><td align="left" valign="top">递归建立子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Subdirectories">条件子目录</a> ：</td><td>  </td><td align="left" valign="top">有条件不建立目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Alternative">替代方案</a> ：</td><td>  </td><td align="left" valign="top">没有递归的子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Subpackages">分包</a> ：</td><td>  </td><td align="left" valign="top">套料包装</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Conditional Subdirectories

</pre></th></tr><tr><td align="left" valign="top">• <a href="#SUBDIRS-vs-DIST_005fSUBDIRS">SUBDIRS与DIST_SUBDIRS</a> ：</td><td>  </td><td align="left" valign="top">两组目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Subdirectories-with-AM_005fCONDITIONAL">带有AM_CONDITIONAL的子目录</a> ：</td><td>  </td><td align="left" valign="top">指定条件子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Subdirectories-with-AC_005fSUBST">具有AC_SUBST的子目录</a> ：</td><td>  </td><td align="left" valign="top">条件递归的另一种方式</td></tr>
<tr><td align="left" valign="top">•未<a href="#Unconfigured-Subdirectories">配置的子目录</a> ：</td><td>  </td><td align="left" valign="top">甚至没有创建“ <samp>Makefile</samp> '</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Building Programs and Libraries

</pre></th></tr><tr><td align="left" valign="top">• <a href="#A-Program">一个程序</a> ：</td><td>  </td><td align="left" valign="top">建立程式</td></tr>
<tr><td align="left" valign="top">• <a href="#A-Library">图书馆</a> ：</td><td>  </td><td align="left" valign="top">建立图书馆</td></tr>
<tr><td align="left" valign="top">• <a href="#A-Shared-Library">共享库</a> ：</td><td>  </td><td align="left" valign="top">建立一个Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Program-and-Library-Variables">程序和库变量</a> ：</td><td>  </td><td align="left" valign="top">控制程序和库构建的变量</td></tr>
<tr><td align="left" valign="top">• <a href="#Default-_005fSOURCES">默认_SOURCES</a> ：</td><td>  </td><td align="left" valign="top">默认源文件</td></tr>
<tr><td align="left" valign="top">• <a href="#LIBOBJS">LIBOBJS</a> ：</td><td>  </td><td align="left" valign="top">LIBOBJS和ALLOCA的特殊处理</td></tr>
<tr><td align="left" valign="top">• <a href="#Program-Variables">程序变量</a> ：</td><td>  </td><td align="left" valign="top">构建程序时使用的变量</td></tr>
<tr><td align="left" valign="top">• <a href="#Yacc-and-Lex">Yacc和Lex</a> ：</td><td>  </td><td align="left" valign="top">Yacc和Lex支持</td></tr>
<tr><td align="left" valign="top">• <a href="#C_002b_002b-Support">C ++支持</a> ：</td><td>  </td><td align="left" valign="top">编译C ++源代码</td></tr>
<tr><td align="left" valign="top">• <a href="#Objective-C-Support">目标C支持</a> ：</td><td>  </td><td align="left" valign="top">编译目标C源</td></tr>
<tr><td align="left" valign="top">• <a href="#Objective-C_002b_002b-Support">目标C ++支持</a> ：</td><td>  </td><td align="left" valign="top">编译Objective C ++源代码</td></tr>
<tr><td align="left" valign="top">• <a href="#Unified-Parallel-C-Support">统一并行C支持</a> ：</td><td>  </td><td align="left" valign="top">编译Unified Parallel C源</td></tr>
<tr><td align="left" valign="top">• <a href="#Assembly-Support">装配支持</a> ：</td><td>  </td><td align="left" valign="top">编译汇编源</td></tr>
<tr><td align="left" valign="top">• <a href="#Fortran-77-Support">Fortran 77支持</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 77源</td></tr>
<tr><td align="left" valign="top">• <a href="#Fortran-9x-Support">Fortran 9x支持</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 9x源</td></tr>
<tr><td align="left" valign="top">• <a href="#Java-Support-with-gcj">gcj的Java支持</a> ：</td><td>  </td><td align="left" valign="top">使用gcj编译Java源代码</td></tr>
<tr><td align="left" valign="top">• <a href="#Vala-Support">Vala支持</a> ：</td><td>  </td><td align="left" valign="top">编译Vala源</td></tr>
<tr><td align="left" valign="top">• <a href="#Support-for-Other-Languages">支持其他语言</a> ：</td><td>  </td><td align="left" valign="top">编译其他语言</td></tr>
<tr><td align="left" valign="top">• <a href="#Dependencies">依赖关系</a> ：</td><td>  </td><td align="left" valign="top">自动依赖性跟踪</td></tr>
<tr><td align="left" valign="top">• <a href="#EXEEXT">EXEEXT</a> ：</td><td>  </td><td align="left" valign="top">支持可执行扩展</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Building a program

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Program-Sources">节目来源</a> ：</td><td>  </td><td align="left" valign="top">定义程序源</td></tr>
<tr><td align="left" valign="top">• <a href="#Linking">链接</a> ：</td><td>  </td><td align="left" valign="top">链接库或其他对象</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Sources">有条件的来源</a> ：</td><td>  </td><td align="left" valign="top">处理条件源</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Programs">条件程序</a> ：</td><td>  </td><td align="left" valign="top">有条件地构建程序</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Building a Shared Library

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Libtool-Concept">Libtool概念</a> ：</td><td>  </td><td align="left" valign="top">Libtool简介</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Libraries">Libtool库</a> ：</td><td>  </td><td align="left" valign="top">声明Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Libtool-Libraries">条件Libtool库</a> ：</td><td>  </td><td align="left" valign="top">有条件地构建Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Libtool-Sources">条件Libtool来源</a> ：</td><td>  </td><td align="left" valign="top">有条件地选择图书馆资源</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Convenience-Libraries">Libtool便利性图书馆</a> ：</td><td>  </td><td align="left" valign="top">建立便利性Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Modules">Libtool模块</a> ：</td><td>  </td><td align="left" valign="top">构建Libtool模块</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Flags">Libtool标志</a> ：</td><td>  </td><td align="left" valign="top">使用_LIBADD，_LDFLAGS和_LIBTOOLFLAGS</td></tr>
<tr><td align="left" valign="top">• <a href="#LTLIBOBJS">LTLIBOBJS</a> ：</td><td>  </td><td align="left" valign="top">使用$（LTLIBOBJS）和$（LTALLOCA）</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Issues">Libtool问题</a> ：</td><td>  </td><td align="left" valign="top">与Libtool使用相关的常见问题</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Common Issues Related to Libtool&rsquo;s Use

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a> ：</td><td>  </td><td align="left" valign="top">需要运行libtoolize</td></tr>
<tr><td align="left" valign="top">• <a href="#Objects-created-both-with-libtool-and-without">使用libtool和不使用libtool创建的对象</a> ：</td><td>  </td><td align="left" valign="top">避免特定的构建竞赛</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Fortran 77 Support

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Preprocessing-Fortran-77">预处理Fortran 77</a> ：</td><td>  </td><td align="left" valign="top">预处理Fortran 77来源</td></tr>
<tr><td align="left" valign="top">• <a href="#Compiling-Fortran-77-Files">编译Fortran 77文件</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 77源</td></tr>
<tr><td align="left" valign="top">• <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a> ：</td><td>  </td><td align="left" valign="top">将Fortran 77与C和C ++混合</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Mixing Fortran 77 With C and C++

</pre></th></tr><tr><td align="left" valign="top">• <a href="#How-the-Linker-is-Chosen">如何选择链接器</a> ：</td><td>  </td><td align="left" valign="top">自动链接器选择</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Fortran 9x Support

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Compiling-Fortran-9x-Files">编译Fortran 9x文件</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 9x源</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Other Derived Objects

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Scripts">脚本</a> ：</td><td>  </td><td align="left" valign="top">可执行脚本</td></tr>
<tr><td align="left" valign="top">•标<a href="#Headers">头</a> ：</td><td>  </td><td align="left" valign="top">头文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Data">数据</a> ：</td><td>  </td><td align="left" valign="top">与体系结构无关的数据文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Sources">资料来源</a> ：</td><td>  </td><td align="left" valign="top">派生来源</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Built Sources

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Built-Sources-Example">内置源示例</a> ：</td><td>  </td><td align="left" valign="top">处理内置源的几种方法。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Other GNU Tools

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Emacs-Lisp">Emacs Lisp</a> ：</td><td>  </td><td align="left" valign="top">埃马克斯·利斯普（Emacs Lisp）</td></tr>
<tr><td align="left" valign="top">• <a href="#gettext">gettext</a> ：</td><td>  </td><td align="left" valign="top">文字</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool">Libtool</a> ：</td><td>  </td><td align="left" valign="top">Libtool</td></tr>
<tr><td align="left" valign="top">• <a href="#Java">Java</a> ：</td><td>  </td><td align="left" valign="top">Java字节码编译（不建议使用）</td></tr>
<tr><td align="left" valign="top">• <a href="#Python">Python</a> ：</td><td>  </td><td align="left" valign="top">蟒蛇</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Building documentation

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Texinfo">Texinfo</a> ：</td><td>  </td><td align="left" valign="top">Texinfo</td></tr>
<tr><td align="left" valign="top">•手册<a href="#Man-Pages">页</a> ：</td><td>  </td><td align="left" valign="top">手册页</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

What Gets Installed

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Basics-of-Installation">安装基础</a> ：</td><td>  </td><td align="left" valign="top">什么安装在哪里</td></tr>
<tr><td align="left" valign="top">• <a href="#The-Two-Parts-of-Install">安装的两个部分</a> ：</td><td>  </td><td align="left" valign="top">分别安装数据和程序</td></tr>
<tr><td align="left" valign="top">• <a href="#Extending-Installation">扩展安装</a> ：</td><td>  </td><td align="left" valign="top">添加您自己的安装规则</td></tr>
<tr><td align="left" valign="top">• <a href="#Staged-Installs">分阶段安装</a> ：</td><td>  </td><td align="left" valign="top">在临时位置安装</td></tr>
<tr><td align="left" valign="top">• <a href="#Install-Rules-for-the-User">为用户安装规则</a> ：</td><td>  </td><td align="left" valign="top">有用的附加规则</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

What Goes in a Distribution

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Basics-of-Distribution">分发基础</a> ：</td><td>  </td><td align="left" valign="top">默认情况下分发的文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Fine_002dgrained-Distribution-Control">细粒度的分发控制</a> ：</td><td>  </td><td align="left" valign="top"><code>dist_</code>和<code>nodist_</code>前缀</td></tr>
<tr><td align="left" valign="top">• <a href="#The-dist-Hook">dist挂钩</a> ：</td><td>  </td><td align="left" valign="top">最后分发目标更改</td></tr>
<tr><td align="left" valign="top">• <a href="#Checking-the-Distribution">检查分布</a> ：</td><td>  </td><td align="left" valign="top">' <samp>make distcheck</samp>解释</td></tr>
<tr><td align="left" valign="top">• <a href="#The-Types-of-Distributions">分布类型</a> ：</td><td>  </td><td align="left" valign="top">多种格式和压缩方法</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Support for test suites

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Generalities-about-Testing">关于测试的一般性</a> ：</td><td>  </td><td align="left" valign="top">有关测试的通用概念和术语</td></tr>
<tr><td align="left" valign="top">• <a href="#Simple-Tests">简单测试</a> ：</td><td>  </td><td align="left" valign="top">列出测试脚本<code>TESTS</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Custom-Test-Drivers">定制测试驱动程序</a> ：</td><td>  </td><td align="left" valign="top">编写和使用自定义测试驱动程序</td></tr>
<tr><td align="left" valign="top">• <a href="#Using-the-TAP-test-protocol">使用TAP测试协议</a> ：</td><td>  </td><td align="left" valign="top">集成使用TAP协议的测试脚本</td></tr>
<tr><td align="left" valign="top">• <a href="#DejaGnu-Tests">DejaGnu测试</a> ：</td><td>  </td><td align="left" valign="top">与<code>dejagnu</code>测试框架</td></tr>
<tr><td align="left" valign="top">• <a href="#Install-Tests">安装测试</a> ：</td><td>  </td><td align="left" valign="top">在已安装的程序包上运行测试</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Simple Tests

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a> ：</td><td>  </td><td align="left" valign="top">特定于汽车制造的概念和术语</td></tr>
<tr><td align="left" valign="top">• <a href="#Serial-Test-Harness">串行测试线束</a> ：</td><td>  </td><td align="left" valign="top">较旧（不鼓励使用）的串行测试工具</td></tr>
<tr><td align="left" valign="top">• <a href="#Parallel-Test-Harness">并行测试线束</a> ：</td><td>  </td><td align="left" valign="top">通用并发测试工具</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Using the TAP test protocol

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Introduction-to-TAP">TAP简介</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Use-TAP-with-the-Automake-test-harness">将TAP与Automake测试工具一起使用</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Incompatibilities-with-other-TAP-parsers-and-drivers">与其他TAP解析器和驱动程序不兼容</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Links-and-external-resources-on-TAP">TAP上的链接和外部资源</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Custom Test Drivers

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Overview-of-Custom-Test-Drivers-Support">自定义测试驱动程序支持概述</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#API-for-Custom-Test-Drivers">自定义测试驱动程序的API</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

API for Custom Test Drivers

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Command_002dline-arguments-for-test-drivers">测试驱动程序的命令行参数</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">•测试<a href="#Testsuite-progress-output">套件进度输出</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Changing Automake&rsquo;s Behavior

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Options-generalities">选项概述</a> ：</td><td>  </td><td align="left" valign="top">Automake选项的语义</td></tr>
<tr><td align="left" valign="top">•自动制作<a href="#List-of-Automake-options">选项列表</a> ：</td><td>  </td><td align="left" valign="top">Automake选项的完整列表</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Miscellaneous Rules

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Tags">标签</a> ：</td><td>  </td><td align="left" valign="top">与cscope，etags和mkid的接口</td></tr>
<tr><td align="left" valign="top">• <a href="#Suffixes">后缀</a> ：</td><td>  </td><td align="left" valign="top">处理新的文件扩展名</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Conditionals

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Usage-of-Conditionals">条件句的用法</a> ：</td><td>  </td><td align="left" valign="top">声明条件内容</td></tr>
<tr><td align="left" valign="top">• <a href="#Limits-of-Conditionals">条件限制</a> ：</td><td>  </td><td align="left" valign="top">附上完整的陈述</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Silencing Make

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Make-verbosity">使冗长</a> ：</td><td>  </td><td align="left" valign="top">默认情况下Make冗长</td></tr>
<tr><td align="left" valign="top">• <a href="#Tricks-For-Silencing-Make">静音技巧</a> ：</td><td>  </td><td align="left" valign="top">沉默的标准和通用方法</td></tr>
<tr><td align="left" valign="top">•自动制作<a href="#Automake-Silent-Rules">静音规则</a> ：</td><td>  </td><td align="left" valign="top">Automake如何帮助沉默制作</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

When Automake Isn&rsquo;t Enough

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Extending">扩展</a> ：</td><td>  </td><td align="left" valign="top">添加新规则或覆盖现有规则。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Third_002dParty-Makefiles">第三方Makefile</a> ：</td><td>  </td><td align="left" valign="top">集成非Automake <samp>Makefile</samp> s。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Frequently Asked Questions about Automake

</pre></th></tr><tr><td align="left" valign="top">• <a href="#CVS">CVS</a> ：</td><td>  </td><td align="left" valign="top">CVS和生成的文件</td></tr>
<tr><td align="left" valign="top">• <a href="#maintainer_002dmode">维护者模式</a> ：</td><td>  </td><td align="left" valign="top">缺少和AM_MAINTAINER_MODE</td></tr>
<tr><td align="left" valign="top">• <a href="#Wildcards">通配符</a> ：</td><td>  </td><td align="left" valign="top">为什么Automake不支持通配符？
</td></tr>
<tr><td align="left" valign="top">• <a href="#Limitations-on-File-Names">文件名限制</a> ：</td><td>  </td><td align="left" valign="top">源文件名和已安装文件名的限制</td></tr>
<tr><td align="left" valign="top">• <a href="#Errors-with-distclean">distclean错误</a> ：</td><td>  </td><td align="left" valign="top">distclean之后保留在构建目录中的文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Flag-Variables-Ordering">标志变量排序</a> ：</td><td>  </td><td align="left" valign="top">CFLAGS vs.AM_CFLAGS vs.mumble_CFLAGS</td></tr>
<tr><td align="left" valign="top">• <a href="#Renamed-Objects">重命名的对象</a> ：</td><td>  </td><td align="left" valign="top">为什么有时会重命名目标文件？
</td></tr>
<tr><td align="left" valign="top">• <a href="#Per_002dObject-Flags">每个对象标志</a> ：</td><td>  </td><td align="left" valign="top">如何模拟每个对象的标志？
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiple-Outputs">多个输出</a> ：</td><td>  </td><td align="left" valign="top">为具有许多输出文件的工具编写规则</td></tr>
<tr><td align="left" valign="top">• <a href="#Hard_002dCoded-Install-Paths">硬编码的安装路径</a> ：</td><td>  </td><td align="left" valign="top">安装到硬编码的位置</td></tr>
<tr><td align="left" valign="top">• <a href="#Debugging-Make-Rules">调试制作规则</a> ：</td><td>  </td><td align="left" valign="top">事情无法按预期进行时的策略</td></tr>
<tr><td align="left" valign="top">• <a href="#Reporting-Bugs">报告错误</a> ：</td><td>  </td><td align="left" valign="top">有关错误和功能要求的反馈</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Copying This Manual

</pre></th></tr><tr><td align="left" valign="top">• <a href="#GNU-Free-Documentation-License">GNU自由文档许可证</a> ：</td><td>  </td><td align="left" valign="top">复制本手册的许可</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Indices

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Macro-Index">宏索引</a> ：</td><td>  </td><td align="left" valign="top">Autoconf宏的索引</td></tr>
<tr><td align="left" valign="top">• <a href="#Variable-Index">可变索引</a> ：</td><td>  </td><td align="left" valign="top">Makefile变量的索引</td></tr>
<tr><td align="left" valign="top">• <a href="#General-Index">综合指数</a> ：</td><td>  </td><td align="left" valign="top">综合指标</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr></tbody></table>



<hr>
<a name="Introduction"></a>
<div class="header">
<p>下一页： <a href="#Autotools-Introduction" rel="next" accesskey="n">Autotools简介</a> ，上一页： <a href="#Top" rel="prev" accesskey="p">顶部</a> ， <a href="#Top" rel="up" accesskey="u">顶部</a> ： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Introduction-1"></a>
<h2 class="chapter">1引言</h2>

<p>Automake是用于自动生成的工具<samp>Makefile.in</samp>来自名为的文件的<samp>Makefile.am</samp> 。每<samp>Makefile.am</samp>基本上是一系列<code>make</code>变量定义<a name="DOCF1" href="#FOOT1"><sup>1</sup></a> ，有时会抛出规则。产生的<samp>Makefile.in</samp>符合GNU Makefile标准。
</p>
<a name="index-GNU-Makefile-standards"></a>

<p>GNU Makefile标准文档（请参见<cite>GNU编码标准</cite>中<cite>的</cite> <a href="http://www.gnu.org/prep/standards/standards.html#Makefile-Conventions">Makefile约定</a> ）冗长，复杂，并且随时可能更改。Automake的目的是减轻单个GNU维护者背后的Makefile维护负担（并将其放在Automake维护者的背面）。
</p>
<p>典型的Automake输入文件只是一系列变量定义。每个这样的文件都经过处理以创建一个<samp>Makefile.in</samp> 。
</p>
<a name="index-Constraints-of-Automake"></a>
<a name="index-Automake-constraints"></a>

<p>Automake确实以某些方式限制了项目。例如，假设该项目使用Autoconf（请参见<cite>Autoconf手册中的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Top">简介</a> ），并且对<samp>configure.ac</samp>内容。
</p>
<a name="index-Automake-requirements"></a>
<a name="index-Requirements_002c-Automake"></a>

<p>自动制作要求<code>perl</code>为了产生<samp>Makefile.in</samp> s。但是，由Automake创建的发行版完全符合GNU标准，并且不需要<code>perl</code>为了建造。
</p>
<a name="index-Bugs_002c-reporting"></a>
<a name="index-Reporting-bugs"></a>
<a name="index-E_002dmail_002c-bug-reports"></a>

<p>有关错误报告的更多信息，请参见<a href="#Reporting-Bugs">报告错误</a> 。
</p>
<hr>
<a name="Autotools-Introduction"></a>
<div class="header">
<p>下一页： <a href="#Generalities" rel="next" accesskey="n">通则</a> ，上一篇： <a href="#Introduction" rel="prev" accesskey="p">介绍</a> ，上级： <a href="#Top" rel="up" accesskey="u">顶</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Introduction-to-the-Autotools"></a>
<h2 class="chapter">2自动工具简介</h2>

<p>如果您不熟悉Automake，也许您知道它是一组称为<em>The Autotools</em>的工具的一部分。也许您已经钻研了一个充满名为<samp>configure</samp> ， <samp>configure.ac</samp> ， <samp>Makefile.in</samp> ， <samp>Makefile.am</samp> ， <samp>aclocal.m4</samp> ，…，其中一些声称是<em>由</em> Autoconf或Automake <em>生成的</em> 。但是这些文件及其关系的确切目的可能是模糊的。本章的目的是向您介绍这种机器，向您展示其工作方式和功能。如果您从未安装过或从未见过这样的软件包，请不要担心：本章将逐步指导您。
</p>
<p>如果您需要一些教材，更多插图或更少内容<code>automake</code>以幻灯片为中心的延续，此简介的一些幻灯片可在Alexandre Duret-Lutz的<a href="http://www.lrde.epita.fr/~adl/autotools.html">Autotools Tutorial中找到</a> 。本章是本教程第一部分的书面版本。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#GNU-Build-System" accesskey="1">GNU Build系统</a> ：</td><td>  </td><td align="left" valign="top">介绍GNU Build系统</td></tr>
<tr><td align="left" valign="top">• <a href="#Use-Cases" accesskey="2">用例</a> ：</td><td>  </td><td align="left" valign="top">GNU构建系统的用例</td></tr>
<tr><td align="left" valign="top">• <a href="#Why-Autotools" accesskey="3">为什么使用自动工具</a> ：</td><td>  </td><td align="left" valign="top">自动工具如何提供帮助</td></tr>
<tr><td align="left" valign="top">• <a href="#Hello-World" accesskey="4">Hello World</a> ：</td><td>  </td><td align="left" valign="top">Hello World小包装</td></tr>
</tbody></table>

<hr>
<a name="GNU-Build-System"></a>
<div class="header">
<p>下一页： <a href="#Use-Cases" rel="next" accesskey="n">用例</a> ，上一篇： <a href="#Autotools-Introduction" rel="up" accesskey="u">Autotools简介</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Introducing-the-GNU-Build-System"></a>
<h3 class="section">2.1介绍GNU Build系统</h3>
<a name="index-GNU-Build-System_002c-introduction"></a>

<p>公认的事实是，作为拥有新软件包的开发人员，您必须缺少构建系统。
</p>
<p>在Unix世界中，传统上使用以下命令来实现这样的构建系统： <code>make</code> （请参阅<cite>GNU Make手册中的</cite> <a href="http://www.gnu.org/software/make/manual/make.html#Top">概述</a> ）。您表达将包装打包到<samp>Makefile</samp> 。该文件是在软件包中构建文件的一组规则。例如程序<samp>prog</samp>可以通过在文件上运行链接器来构建<samp>main.o</samp> ， <samp>foo.o</samp>和<samp>bar.o</samp> ;文件<samp>main.o</samp>可以通过在以下位置运行编译器来构建<samp>main.c</samp> ;等等每一次<code>make</code>运行，它读取<samp>Makefile</samp> ，检查提到的文件的存在和修改时间，确定需要构建（或重建）哪些文件并运行关联的命令。
</p>
<p>当需要在与开发套件不同的平台上构建软件包时， <samp>Makefile</samp>通常需要进行调整。例如，编译器可能具有其他名称或需要更多选项。1991年，David J. MacKenzie厌倦了自定义<samp>Makefile</samp>他必须处理的20个平台。相反，他手工制作了一个叫做<samp>configure</samp>自动调整<samp>Makefile</samp> （请参见<cite>Autoconf手册中的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Genesis">Genesis</a> ）。现在，编译他的包就像运行一样简单<code>./configure && make</code> 。
</p>
<a name="index-GNU-Coding-Standards"></a>

<p>今天，此过程已在GNU项目中标准化。GNU编码标准（见<a href="http://www.gnu.org/prep/standards/standards.html#Managing-Releases">释放过程</a>中<cite>的GNU编码标准</cite> ）解释了GNU项目的每个包如何应该有一个<samp>configure</samp>脚本及其应具有的最小接口。的<samp>Makefile</samp>也应该遵循一些既定的惯例。结果？统一的构建系统，安装程序几乎无法区分所有软件包。在最简单的情况下，安装程序要做的就是解压软件包，然后运行<code>./configure && make && make install</code> ，然后重复安装下一个软件包。
</p>
<p>我们将此构建系统称为<em>GNU Build System</em> ，因为它是从GNU项目发展而来的。但是，许多其他软件包也使用它：遵循任何现有约定都有其优点。
</p>
<a name="index-Autotools_002c-introduction"></a>

<p>Autotools是可以为您的软件包创建GNU Build System的工具。Autoconf主要关注<samp>configure</samp>和自动制作<samp>Makefile</samp> s。无需这些工具的帮助，完全可以创建GNU Build System。然而，这是相当麻烦且容易出错的。在对实际使用的GNU Build System进行一些说明之后，我们将再次讨论。
</p>
<hr>
<a name="Use-Cases"></a>
<div class="header">
<p>下一篇： <a href="#Why-Autotools" rel="next" accesskey="n">为什么选择Autotools</a> ，上一篇： <a href="#GNU-Build-System" rel="prev" accesskey="p">GNU Build System</a> ，上一篇： <a href="#Autotools-Introduction" rel="up" accesskey="u">Autotools简介</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Use-Cases-for-the-GNU-Build-System"></a>
<h3 class="section">2.2 GNU构建系统的用例</h3>
<a name="index-GNU-Build-System_002c-use-cases"></a>
<a name="index-GNU-Build-System_002c-features"></a>
<a name="index-Features-of-the-GNU-Build-System"></a>
<a name="index-Use-Cases-for-the-GNU-Build-System"></a>
<a name="index-amhello_002d1_002e0_002etar_002egz_002c-location"></a>
<a name="index-amhello_002d1_002e0_002etar_002egz_002c-use-cases"></a>

<p>在本节中，我们将探讨GNU构建系统的几个用例。您可以在<samp>amhello-1.0.tar.gz</samp>与Automake一起分发的软件包。如果您的系统上安装了Automake，则应在以下位置找到此文件的副本： <samp><var>prefix</var>/share/doc/automake/amhello-1.0.tar.gz</samp> ，在哪里<var>prefix</var>是在配置过程中指定的安装前缀（ <var>prefix</var>默认为<samp>/usr/local</samp> ，但是，如果某些GNU / Linux发行版安装了Automake，则很可能已将其设置为<samp>/usr</samp> ）。如果您没有安装Automake的副本，则可以在以下位置找到该文件的副本： <samp>doc/</samp> Automake软件包的目录。
</p>
<p>以下某些用例提供的功能实际上是GNU Build System的扩展。阅读：GNU编码标准未指定它们，但是它们仍然是Autotools创建的构建系统的一部分。为了简单起见，我们没有指出区别。我们的目标是向您展示Autotools创建的构建系统将为您提供的许多功能。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Basic-Installation" accesskey="1">基本安装</a> ：</td><td>  </td><td align="left" valign="top">通用安装步骤</td></tr>
<tr><td align="left" valign="top">• <a href="#Standard-Targets" accesskey="2">标准目标</a> ：</td><td>  </td><td align="left" valign="top">标准Makefile目标列表</td></tr>
<tr><td align="left" valign="top">• <a href="#Standard-Directory-Variables" accesskey="3">标准目录变量</a> ：</td><td>  </td><td align="left" valign="top">标准目录变量列表</td></tr>
<tr><td align="left" valign="top">• <a href="#Standard-Configuration-Variables" accesskey="4">标准配置变量</a> ：</td><td>  </td><td align="left" valign="top">使用配置变量</td></tr>
<tr><td align="left" valign="top">• <a href="#config_002esite" accesskey="5">config.site</a> ：</td><td>  </td><td align="left" valign="top">使用config.site文件</td></tr>
<tr><td align="left" valign="top">• <a href="#VPATH-Builds" accesskey="6">VPATH构建</a> ：</td><td>  </td><td align="left" valign="top">并行构建树</td></tr>
<tr><td align="left" valign="top">• <a href="#Two_002dPart-Install" accesskey="7">两部分安装</a> ：</td><td>  </td><td align="left" valign="top">分别安装数据和程序</td></tr>
<tr><td align="left" valign="top">• <a href="#Cross_002dCompilation" accesskey="8">交叉编译</a> ：</td><td>  </td><td align="left" valign="top">适用于其他架构</td></tr>
<tr><td align="left" valign="top">• <a href="#Renaming" accesskey="9">重命名</a> ：</td><td>  </td><td align="left" valign="top">在安装时重命名程序</td></tr>
<tr><td align="left" valign="top">• <a href="#DESTDIR">DESTDIR</a> ：</td><td>  </td><td align="left" valign="top">使用DESTDIR构建二进制软件包</td></tr>
<tr><td align="left" valign="top">• <a href="#Preparing-Distributions">准备发行</a> ：</td><td>  </td><td align="left" valign="top">推出tarball</td></tr>
<tr><td align="left" valign="top">• <a href="#Dependency-Tracking">依赖性跟踪</a> ：</td><td>  </td><td align="left" valign="top">自动依赖性跟踪</td></tr>
<tr><td align="left" valign="top">• <a href="#Nested-Packages">嵌套包装</a> ：</td><td>  </td><td align="left" valign="top">GNU构建系统可以嵌套</td></tr>
</tbody></table>

<hr>
<a name="Basic-Installation"></a>
<div class="header">
<p>下一页： <a href="#Standard-Targets" rel="next" accesskey="n">标准目标</a> ，上： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Basic-Installation-1"></a>
<h4 class="subsection">2.2.1基本安装</h4>
<a name="index-Configuration_002c-basics"></a>
<a name="index-Installation_002c-basics"></a>
<a name="index-GNU-Build-System_002c-basics"></a>

<p>最常见的安装过程如下。
</p>
<div class="example">
<pre class="example">~ % <kbd>tar zxf amhello-1.0.tar.gz</kbd>
~ % <kbd>cd amhello-1.0</kbd>
~/amhello-1.0 % <kbd>./configure</kbd>
&hellip;
config.status: creating Makefile
config.status: creating src/Makefile
&hellip;
~/amhello-1.0 % <kbd>make</kbd>
&hellip;
~/amhello-1.0 % <kbd>make check</kbd>
&hellip;
~/amhello-1.0 % <kbd>su</kbd>
Password:
/home/adl/amhello-1.0 # <kbd>make install</kbd>
&hellip;
/home/adl/amhello-1.0 # <kbd>exit</kbd>
~/amhello-1.0 % <kbd>make installcheck</kbd>
&hellip;
</pre></div>

<a name="index-Unpacking"></a>

<p>用户首先打开包装。在这里和以下示例中，我们将使用非便携式<code>tar zxf</code>为了简化命令。在没有GNU的系统上<code>tar</code>已安装，此命令应显示为<code>gunzip -c amhello-1.0.tar.gz | tar xf -</code> 。
</p>
<p>然后，用户进入新创建的目录以运行<samp>configure</samp>脚本。这个指令码会探索系统的各种功能，最后建立<samp>Makefile</samp> s。在此玩具示例中，只有两个<samp>Makefile</samp> s，但在实际项目中，可能会有更多，通常是一个<samp>Makefile</samp>每个目录。
</p>
<p>现在可以运行<code>make</code> 。这将构造需要为该程序包构造的所有程序，库和脚本。在我们的示例中，这将编译<samp>hello</samp>程序。所有文件都在源树中就地构建；我们将在后面看到如何更改。
</p>
<p><code>make check</code>使程序包的测试运行。此步骤不是强制性的，但是在决定安装程序之前，最好先确保已构建的程序的行为符合预期。我们的示例不包含任何测试，因此运行<code>make check</code>是无人操作。
</p>
<a name="index-su_002c-before-make-install"></a>
<p>一切构建完成并经过测试之后，就该将其安装在系统上了。这意味着将程序，库，头文件，脚本和其他数据文件从源目录复制到它们在系统上的最终目标。命令<code>make install</code>会做到的。但是，默认情况下，所有内容都将安装在以下目录的子目录中<samp>/usr/local</samp> ：二进制文件将进入<samp>/usr/local/bin</samp> ，图书馆将以<samp>/usr/local/lib</samp>等通常，任何用户都无法写入此目标，因此我们假设必须先成为root用户，然后才能运行<code>make install</code> 。在我们的示例中，运行<code>make install</code>将复制程序<samp>hello</samp>进入<samp>/usr/local/bin</samp>和<samp>README</samp>进入<samp>/usr/local/share/doc/amhello</samp> 。
</p>
<p>最后一个可选步骤是运行<code>make installcheck</code> 。该命令可以对已安装的文件运行测试。 <code>make check</code>测试源代码树中的文件，而<code>make installcheck</code>测试其已安装的副本。后者进行的测试可能与前者进行的测试不同。例如，有些测试无法在源代码树中运行。相反，设置了一些软件包，以便<code>make installcheck</code>将运行与<code>make check</code> ，仅适用于其他文件（未安装和已安装）。例如，当源树的布局与安装的布局不同时，它可能会有所不同。此外，它可能有助于诊断安装不完整。
</p>
<p>目前大多数程序包都没有<code>installcheck</code>测试，因为存在<code>installcheck</code>鲜为人知，它的用处被忽略了。我们的小玩具包再好不过了： <code>make installcheck</code>什么也没做。
</p>
<hr>
<a name="Standard-Targets"></a>
<div class="header">
<p>下一篇： <a href="#Standard-Directory-Variables" rel="next" accesskey="n">标准目录变量</a> ，上一篇： <a href="#Basic-Installation" rel="prev" accesskey="p">基本安装</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Standard-Makefile-Targets"></a>
<h4 class="subsection">2.2.2标准<samp>Makefile</samp>目标</h4>

<p>到目前为止，我们已经遇到了四种运行方式<code>make</code>在GNU Build系统中： <code>make</code> ， <code>make check</code> ， <code>make install</code>和<code>make installcheck</code> 。话<code>check</code> ， <code>install</code>和<code>installcheck</code> ，作为参数传递给<code>make</code>称为<em>目标</em> 。 <code>make</code>是的简写<code>make all</code> ， <code>all</code>是GNU Build System中的默认目标。
</p>
<p>这是GNU编码标准指定的最有用的目标的列表。
</p>
<dl compact>
<dt><code>make all</code></dt>
<dd><a name="index-all"></a>
<p>构建程序，库，文档等（与<code>make</code> ）。
</p></dd>
<dt><code>make install</code></dt>
<dd><a name="index-install"></a>
<p>安装需要安装的内容，将文件从软件包的树复制到系统范围的目录中。
</p></dd>
<dt><code>make install-strip</code></dt>
<dd><a name="index-install_002dstrip"></a>
<p>和...一样<code>make install</code> ，然后去除调试符号。一些用户喜欢用空间来获取有用的错误报告<small class="enddots">...</small>
</p></dd>
<dt><code>make uninstall</code></dt>
<dd><a name="index-uninstall"></a>
<p>相反的<code>make install</code> ：清除安装的文件。（这需要从已安装的同一构建树中运行。）
</p></dd>
<dt><code>make clean</code></dt>
<dd><a name="index-clean"></a>
<p>从构建树中删除构建文件<code>make all</code> 。
</p></dd>
<dt><code>make distclean</code></dt>
<dd><a name="index-distclean"></a>
<p>另外擦除任何东西<code>./configure</code>创建。
</p></dd>
<dt><code>make check</code></dt>
<dd><a name="index-check"></a>
<p>运行测试套件（如果有）。
</p></dd>
<dt><code>make installcheck</code></dt>
<dd><a name="index-installcheck"></a>
<p>检查安装的程序或库（如果支持）。
</p></dd>
<dt><code>make dist</code></dt>
<dd><a name="index-dist"></a>
<p>重新建立<samp><var>package</var>-<var>version</var>.tar.gz</samp>从所有源文件。
</p></dd>
</dl>

<hr>
<a name="Standard-Directory-Variables"></a>
<div class="header">
<p>下一篇： <a href="#Standard-Configuration-Variables" rel="next" accesskey="n">标准配置变量</a> ，上一篇： <a href="#Standard-Configuration-Variables" rel="next" accesskey="n">标准</a> <a href="#Standard-Targets" rel="prev" accesskey="p">目标</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Standard-Directory-Variables-1"></a>
<h4 class="subsection">2.2.3标准目录变量</h4>
<a name="index-directory-variables"></a>

<p>GNU编码标准还指定了变量的层次结构来表示安装目录。其中一些是：</p>
<table>
<thead><tr><th>目录变量</th><th>默认值</th></tr></thead>
<tbody><tr><td><code>prefix</code></td><td><code>/usr/local</code></td></tr>
<tr><td>  <code><span class="nolinebreak">exec_prefix</span></code><!-- /@w --></td><td><code>${prefix}</code></td></tr>
<tr><td>    <code>bindir</code><!-- /@w --></td><td><code>${exec_prefix}/bin</code></td></tr>
<tr><td>    <code>libdir</code><!-- /@w --></td><td><code>${exec_prefix}/lib</code></td></tr>
<tr><td>… <!-- /@w --></td></tr>
<tr><td>  <code>includedir</code><!-- /@w --></td><td><code>${prefix}/include</code></td></tr>
<tr><td>  <code>datarootdir</code><!-- /@w --></td><td><code>${prefix}/share</code></td></tr>
<tr><td>    <code>datadir</code><!-- /@w --></td><td><code>${datarootdir}</code></td></tr>
<tr><td>    <code>mandir</code><!-- /@w --></td><td><code>${datarootdir}/man</code></td></tr>
<tr><td>    <code>infodir</code><!-- /@w --></td><td><code>${datarootdir}/info</code></td></tr>
<tr><td>    <code>docdir</code><!-- /@w --></td><td><code>${datarootdir}/doc/${PACKAGE}</code></td></tr>
<tr><td>… <!-- /@w --></td></tr>
</tbody></table>


<p>这些目录中的每一个都具有从其名称通常显而易见的作用。在软件包中，任何可安装的文件将安装在这些目录之一中。例如在<code>amhello-1.0</code> ， 该程序<samp>hello</samp>将安装在<var>bindir</var> ，即二进制文件的目录。该目录的默认值为<samp>/usr/local/bin</samp> ，但用户可以在调用时提供其他值<code>configure</code> 。还有文件<samp>README</samp>将安装到<var>docdir</var> ，默认为<samp>/usr/local/share/doc/amhello</samp> 。
</p>
<a name="index-_002d_002dprefix"></a>

<p>作为用户，如果您希望使用自己的帐户安装软件包，则可以按照以下步骤操作：</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --prefix ~/usr</kbd>
&hellip;
~/amhello-1.0 % <kbd>make</kbd>
&hellip;
~/amhello-1.0 % <kbd>make install</kbd>
&hellip;
</pre></div>

<p>这将安装<samp>~/usr/bin/hello</samp>和<samp>~/usr/share/doc/amhello/README</samp> 。
</p>
<p>所有此类目录选项的列表如下所示： <code>./configure --help</code> 。
</p>
<hr>
<a name="Standard-Configuration-Variables"></a>
<div class="header">
<p>下一篇： <a href="#config_002esite" rel="next" accesskey="n">config.site</a> ，上一篇： <a href="#Standard-Directory-Variables" rel="prev" accesskey="p">标准目录变量</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Standard-Configuration-Variables-1"></a>
<h4 class="subsection">2.2.4标准配置变量</h4>
<a name="index-configuration-variables_002c-overriding"></a>

<p>GNU编码标准还定义了在构建过程中使用的一组标准配置变量。这里有一些：</p>
<dl compact>
<dt><code>CC</code></dt>
<dd><p>C编译器命令</p></dd>
<dt><code>CFLAGS</code></dt>
<dd><p>C编译器标志</p></dd>
<dt><code>CXX</code></dt>
<dd><p>C ++编译器命令</p></dd>
<dt><code>CXXFLAGS</code></dt>
<dd><p>C ++编译器标志</p></dd>
<dt><code>LDFLAGS</code></dt>
<dd><p>链接器标志</p></dd>
<dt><code>CPPFLAGS</code></dt>
<dd><p>C / C ++预处理器标志</p></dd>
<dt>…</dt>
</dl>

<p><code>configure</code>通常可以很好地为这些变量设置适当的值，但是在某些情况下，您可能需要覆盖它们。例如，您可能安装了多个版本的编译器，并且想使用另一个版本，则可能已将头文件安装在编译器的默认搜索路径之外，甚至是链接器无法使用的库。
</p>
<p>这是一个如何称呼<code>configure</code>强迫它使用<code>gcc-3</code>作为C编译器，请使用来自<samp>~/usr/include</samp>编译时，以及来自<samp>~/usr/lib</samp>链接时。
</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --prefix ~/usr CC=gcc-3 \
CPPFLAGS=-I$HOME/usr/include LDFLAGS=-L$HOME/usr/lib</kbd>
</pre></div>

<p>同样，这些变量的完整列表将显示在<code>./configure --help</code> 。
</p>
<hr>
<a name="config_002esite"></a>
<div class="header">
<p>下一篇： <a href="#VPATH-Builds" rel="next" accesskey="n">VPATH构建</a> ，上一篇： <a href="#Standard-Configuration-Variables" rel="prev" accesskey="p">标准配置变量</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overriding-Default-Configuration-Setting-with-config_002esite"></a>
<h4 class="subsection">2.2.5使用覆盖默认配置设置<samp>config.site</samp></h4>
<a name="index-config_002esite-example"></a>

<p>使用相同的设置安装多个软件包时，可以方便地创建一个文件来捕获常用设置。如果文件名为<samp><var>prefix</var>/share/config.site</samp>存在， <code>configure</code>将在执行开始时获取它。
</p>
<p>回顾上一节中的命令：</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --prefix ~/usr CC=gcc-3 \
CPPFLAGS=-I$HOME/usr/include LDFLAGS=-L$HOME/usr/lib</kbd>
</pre></div>

<p>假设我们要在其中安装许多软件包<samp>~/usr</samp> ，并且总是希望使用以下这些定义<code>CC</code> ， <code>CPPFLAGS</code>和<code>LDFLAGS</code> ，我们可以通过创建以下代码来自动执行此操作<samp>~/usr/share/config.site</samp>文件：</p>
<div class="example">
<pre class="example">test -z &quot;$CC&quot; &amp;&amp; CC=gcc-3
test -z &quot;$CPPFLAGS&quot; &amp;&amp; CPPFLAGS=-I$HOME/usr/include
test -z &quot;$LDFLAGS&quot; &amp;&amp; LDFLAGS=-L$HOME/usr/lib
</pre></div>

<p>现在，任何时候<samp>configure</samp>脚本正在使用<samp>~/usr</samp>前缀，它将执行上面的<samp>config.site</samp>并定义这三个变量。
</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --prefix ~/usr</kbd>
configure: loading site script /home/adl/usr/share/config.site
&hellip;
</pre></div>

<p>有关此功能的更多信息，请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Site-Defaults">设置站点默认值</a> <cite>”</cite> 。
</p>

<hr>
<a name="VPATH-Builds"></a>
<div class="header">
<p>下一篇： <a href="#Two_002dPart-Install" rel="next" accesskey="n">两部分安装</a> ，上一篇： <a href="#config_002esite" rel="prev" accesskey="p">config.site</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Parallel-Build-Trees-_0028a_002ek_002ea_002e-VPATH-Builds_0029"></a>
<h4 class="subsection">2.2.6并行构建树（又名VPATH构建）</h4>
<a name="index-Parallel-build-trees"></a>
<a name="index-VPATH-builds"></a>
<a name="index-source-tree-and-build-tree"></a>
<a name="index-build-tree-and-source-tree"></a>
<a name="index-trees_002c-source-vs_002e-build"></a>

<p>GNU Build System区分两棵树：源树和构建树。
</p>
<p>源代码树根植于包含以下内容的目录中<samp>configure</samp> 。它包含所有源文件（已分发的文件），并且可以使用几个子目录进行排列。
</p>
<p>构建树植根于以下目录中<samp>configure</samp>已运行，并填充了所有目标文件，程序，库以及从源构建的其他派生文件（因此未分发）。构建树通常具有与源树相同的子目录布局；其子目录由构建系统自动创建。
</p>
<p>如果<samp>configure</samp>在其自己的目录中执行时，将源代码树和构建树结合在一起：派生文件与其源文件位于相同的目录中。在我们的第一个安装示例中就是这种情况（请参阅<a href="#Basic-Installation">基本安装</a> ）。
</p>
<p>用户的普遍要求是，他们希望将所有派生文件限制在一个目录中，以使源目录保持整洁。这是我们可以运行的方式<samp>configure</samp>将所有内容构建在一个名为<samp>build/</samp> 。
</p>
<div class="example">
<pre class="example">~ % <kbd>tar zxf ~/amhello-1.0.tar.gz</kbd>
~ % <kbd>cd amhello-1.0</kbd>
~/amhello-1.0 % <kbd>mkdir build &amp;&amp; cd build</kbd>
~/amhello-1.0/build % <kbd>../configure</kbd>
&hellip;
~/amhello-1.0/build % <kbd>make</kbd>
&hellip;
</pre></div>

<p>这些设置（其中源树和构建树不同）通常被称为<em>并行构建</em>或<em>VPATH构建</em> 。“ <em>并行构建”</em>一词具有误导性：“ <em>并行</em> ”一词是对构建树遮盖源树的方式的引用，与构建命令的运行方式并发无关。因此，我们在下文中使用名称<em>VPATH builds</em>来指代此类设置。<em>VPATH</em>是名称<code>make</code>所使用的功能<samp>Makefile</samp>允许这些构建（请参见<a href="http://www.gnu.org/software/make/manual/make.html#General-Search"><code>VPATH</code></a>在<cite>GNU Make手册中</cite> <a href="http://www.gnu.org/software/make/manual/make.html#General-Search">搜索所有必备软件的路径</a> ）。
</p>
<a name="index-multiple-configurations_002c-example"></a>
<a name="index-debug-build_002c-example"></a>
<a name="index-optimized-build_002c-example"></a>

<p>VPATH构建还有其他有趣的用途。一种是使用多种配置构建相同的源。例如：</p>
<div class="example">
<pre class="example">~ % <kbd>tar zxf ~/amhello-1.0.tar.gz</kbd>
~ % <kbd>cd amhello-1.0</kbd>
~/amhello-1.0 % <kbd>mkdir debug optim &amp;&amp; cd debug</kbd>
~/amhello-1.0/debug % <kbd>../configure CFLAGS='-g -O0'</kbd>
&hellip;
~/amhello-1.0/debug % <kbd>make</kbd>
&hellip;
~/amhello-1.0/debug % cd ../optim
~/amhello-1.0/optim % <kbd>../configure CFLAGS='-O3 -fomit-frame-pointer'</kbd>
&hellip;
~/amhello-1.0/optim % <kbd>make</kbd>
&hellip;
</pre></div>

<p>对于网络文件系统，可以使用类似的方法在不同的机器上构建相同的源。例如，假设源安装在两个主机共享的目录中： <code>HOST1</code>和<code>HOST2</code> ，这可能是不同的平台。
</p>
<div class="example">
<pre class="example">~ % <kbd>cd /nfs/src</kbd>
/nfs/src % <kbd>tar zxf ~/amhello-1.0.tar.gz</kbd>
</pre></div>

<p>在第一台主机上，您可以创建一个本地构建目录：</p><div class="example">
<pre class="example">[HOST1] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
[HOST1] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure</kbd>
...
[HOST1] /tmp/amh % <kbd>make &amp;&amp; sudo make install</kbd>
...
</pre></div>

<p>（这里我们假设安装程序已配置<code>sudo</code>这样它就可以执行<code>make install</code>具有root特权；比使用更方便<code>su</code>就像在<a href="#Basic-Installation">基本安装中</a> ）。
</p>
<p>在第二台主机上，您可能会同时执行完全相同的操作：</p><div class="example">
<pre class="example">[HOST2] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
[HOST2] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure</kbd>
...
[HOST2] /tmp/amh % <kbd>make &amp;&amp; sudo make install</kbd>
...
</pre></div>

<a name="index-read_002donly-source-tree"></a>
<a name="index-source-tree_002c-read_002donly"></a>

<p>在这种情况下，没有什么可以禁止<samp>/nfs/src/amhello-1.0</samp>目录为只读。实际上，VPATH构建也是从只读介质（例如CD-ROM）构建软件包的一种方式。（在GNU项目变得如此庞大之前，FSF曾经出售带有解包源代码的CD-ROM。）
</p>
<hr>
<a name="Two_002dPart-Install"></a>
<div class="header">
<p>下一篇： <a href="#Cross_002dCompilation" rel="next" accesskey="n">交叉编译</a> ，上一篇： <a href="#VPATH-Builds" rel="prev" accesskey="p">VPATH构建</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Two_002dPart-Installation"></a>
<h4 class="subsection">2.2.7两部分安装</h4>

<p>在我们的最后一个示例中（请参阅<a href="#VPATH-Builds">VPATH Builds</a> ），源树由两个主机共享，但是在每个主机上分别进行编译和安装。
</p>
<p>GNU Build System还支持网络设置，其中部分已安装文件应在多个主机之间共享。它通过将与体系结构相关的文件与与体系结构无关的文件区分开来，并提供两个<samp>Makefile</samp>目标是安装所有这些类的文件。
</p>
<a name="index-install_002dexec"></a>
<a name="index-install_002ddata"></a>

<p>这些目标是<code>install-exec</code>用于架构相关的文件和<code>install-data</code>用于与体系结构无关的文件。到目前为止，我们使用的命令<code>make install</code> ，可以看作是<code>make install-exec install-data</code> 。
</p>
<p>从GNU Build System的角度来看，与体系结构相关的文件和与体系结构无关的文件之间的区别仅基于用于指定其安装目标的目录变量。在我们之前提供的目录变量列表中（请参阅“ <a href="#Standard-Directory-Variables">标准目录变量”</a> ），所有变量基于<var>exec-prefix</var>指定与体系结构相关的目录，其文件将通过以下目录安装<code>make install-exec</code> 。其他的则指定与体系结构无关的目录，并将提供由<code>make install-data</code> 。有关更多详细信息，请参见<a href="#The-Two-Parts-of-Install">安装的两个部分</a> 。
</p>
<p>假设（1）我们想直接在以下位置安装软件包，这是我们如何重新查看两主机安装示例的方法<samp>/usr</samp> ，以及（2）目录<samp>/usr/share</samp>由两个主机共享。
</p>
<p>在第一台主机上，我们将运行</p><div class="example">
<pre class="example">[HOST1] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
[HOST1] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure --prefix /usr</kbd>
...
[HOST1] /tmp/amh % <kbd>make &amp;&amp; sudo make install</kbd>
...
</pre></div>

<p>但是，在第二台主机上，我们仅需要安装特定于体系结构的文件。
</p><div class="example">
<pre class="example">[HOST2] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
[HOST2] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure --prefix /usr</kbd>
...
[HOST2] /tmp/amh % <kbd>make &amp;&amp; sudo make install-exec</kbd>
...
</pre></div>

<p>在具有安装检查的软件包中，有意义的是运行<code>make installcheck</code> （请参阅<a href="#Basic-Installation">基本安装</a> ），以验证尽管进行了明显的部分安装，该软件包仍可正常工作。
</p>
<hr>
<a name="Cross_002dCompilation"></a>
<div class="header">
<p>下一篇： <a href="#Renaming" rel="next" accesskey="n">重命名</a> ，上一篇： <a href="#Two_002dPart-Install" rel="prev" accesskey="p">两部分安装</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Cross_002dCompilation-1"></a>
<h4 class="subsection">2.2.8交叉编译</h4>
<a name="index-cross_002dcompilation"></a>

<p><em>交叉编译</em>是在一个平台上构建将在另一平台上运行的二进制文件。当谈到交叉编译时，重要的是要区分执行编译的<em>构建平台</em>和期望在其上运行生成的可执行文件的<em>主机平台</em> 。下列<code>configure</code>选项用于指定每个选项：</p>
<dl compact>
<dt><samp>--build=<var>build</var></samp></dt>
<dd><a name="index-_002d_002dbuild_003dbuild"></a>
<p>构建软件包的系统。
</p></dd>
<dt><samp>--host=<var>host</var></samp></dt>
<dd><a name="index-_002d_002dhost_003dhost"></a>
<p>将在其中运行内置程序和库的系统。
</p></dd>
</dl>

<p>当。。。的时候<samp>--host</samp>用来， <code>configure</code>将搜索该平台的交叉编译套件。交叉编译工具通常将其目标体系结构作为其名称的前缀。例如，我的MinGW32交叉编译器的二进制文件名为<code>i586-mingw32msvc-gcc</code> ， <code>i586-mingw32msvc-ld</code> ， <code>i586-mingw32msvc-as</code>等</p>
<a name="index-MinGW-cross_002dcompilation-example"></a>
<a name="index-cross_002dcompilation-example"></a>

<p>这是我们如何建立<code>amhello-1.0</code>对于<code>i586-mingw32msvc</code>在GNU / Linux PC上。</p>
<div class="smallexample">
<pre class="smallexample">~/amhello-1.0 % <kbd>./configure --build i686-pc-linux-gnu --host i586-mingw32msvc</kbd>
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i586-mingw32msvc-strip... i586-mingw32msvc-strip
checking for i586-mingw32msvc-gcc... i586-mingw32msvc-gcc
checking for C compiler default output file name... a.exe
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables... .exe
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether i586-mingw32msvc-gcc accepts -g... yes
checking for i586-mingw32msvc-gcc option to accept ANSI C...
&hellip;
~/amhello-1.0 % <kbd>make</kbd>
&hellip;
~/amhello-1.0 % <kbd>cd src; file hello.exe</kbd>
hello.exe: MS Windows PE 32-bit Intel 80386 console executable not relocatable
</pre></div>

<p>的<samp>--host</samp>和<samp>--build</samp>选项通常是我们进行交叉编译所需的全部。唯一的例外是所构建的软件包本身是交叉编译器：我们需要第三个选项来指定其目标体系结构。
</p>
<dl compact>
<dt><samp>--target=<var>target</var></samp></dt>
<dd><a name="index-_002d_002dtarget_003dtarget"></a>
<p>在构建编译器工具时：工具将为其创建输出的系统。
</p></dd>
</dl>

<p>例如，当安装GCC，GNU编译器集合时，我们可以使用<samp>--target=<var>target</var></samp>指定我们要构建GCC作为以下产品的交叉编译器<var>target</var> 。混合<samp>--build</samp>和<samp>--target</samp> ，我们实际上可以交叉编译一个交叉编译器；这样的三向交叉编译称为<em>加拿大交叉</em> 。
</p>
<p>有关这些的更多信息，请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Specifying-Names">指定系统类型”</a> 。 <code>configure</code>选项。
</p>
<hr>
<a name="Renaming"></a>
<div class="header">
<p>下一篇： <a href="#DESTDIR" rel="next" accesskey="n">DESTDIR</a> ，上一篇： <a href="#Cross_002dCompilation" rel="prev" accesskey="p">交叉编译</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Renaming-Programs-at-Install-Time"></a>
<h4 class="subsection">2.2.9在安装时重命名程序</h4>
<a name="index-Renaming-programs"></a>
<a name="index-Transforming-program-names"></a>
<a name="index-Programs_002c-renaming-during-installation"></a>

<p>GNU Build System提供了一种在安装可执行文件和手册页之前对其进行自动重命名的方法（请参阅手册<a href="#Man-Pages">页</a> ）。在已经具有您不想覆盖的专有实现的系统上安装GNU软件包时，这特别方便。例如，您可能要安装GNU <code>tar</code>如<code>gtar</code>因此您可以将其与供应商的<code>tar</code> 。
</p>
<p>可以使用以下三种方法之一来完成<code>configure</code>选项。
</p>
<dl compact>
<dt><samp>--program-prefix=<var>prefix</var></samp></dt>
<dd><a name="index-_002d_002dprogram_002dprefix_003dprefix"></a>
<p>前置<var>prefix</var>到已安装的程序名称。
</p></dd>
<dt><samp>--program-suffix=<var>suffix</var></samp></dt>
<dd><a name="index-_002d_002dprogram_002dsuffix_003dsuffix"></a>
<p>附加<var>suffix</var>到已安装的程序名称。
</p></dd>
<dt><samp>--program-transform-name=<var>program</var></samp></dt>
<dd><a name="index-_002d_002dprogram_002dtransform_002dname_003dprogram"></a>
<p>跑<code>sed <var>program</var></code>在已安装的程序名称上。
</p></dd>
</dl>

<p>以下命令将安装<samp>hello</samp>如<samp>/usr/local/bin/test-hello</samp> ， 例如。
</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --program-prefix test-</kbd>
&hellip;
~/amhello-1.0 % <kbd>make</kbd>
&hellip;
~/amhello-1.0 % <kbd>sudo make install</kbd>
&hellip;
</pre></div>

<hr>
<a name="DESTDIR"></a>
<div class="header">
<p>下一篇： <a href="#Preparing-Distributions" rel="next" accesskey="n">准备发行版</a> ，上一篇： <a href="#Renaming" rel="prev" accesskey="p">重命名</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-Binary-Packages-Using-DESTDIR"></a>
<h4 class="subsection">2.2.10使用DESTDIR构建二进制包</h4>
<a name="index-DESTDIR"></a>

<p>GNU构建系统的<code>make install</code>和<code>make uninstall</code>该界面并不完全适合必须在许多主机上部署和升级软件包的系统管理员的需求。换句话说，GNU Build System不会替换软件包管理器。
</p>
<p>此类软件包管理器通常需要知道软件包已安装了哪些文件，因此仅<code>make install</code>是不合适的。
</p>
<a name="index-Staged-installation"></a>

<p>的<code>DESTDIR</code>变量可用于执行分阶段安装。该软件包的配置应与将其安装在最终位置一样（例如， <code>--prefix /usr</code> ），但在运行时<code>make install</code> ， <code>DESTDIR</code>应该设置为要将安装转移到的目录的绝对名称。从此目录中可以很容易地查看在哪里安装了哪些文件，并最终通过某种方式将它们复制到最终位置。
</p>
<a name="index-Binary-package"></a>

<p>例如，这是我们如何创建一个二进制包，其中包含要安装的所有文件的快照。
</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --prefix /usr</kbd>
&hellip;
~/amhello-1.0 % <kbd>make</kbd>
&hellip;
~/amhello-1.0 % <kbd>make DESTDIR=$HOME/inst install</kbd>
&hellip;
~/amhello-1.0 % <kbd>cd ~/inst</kbd>
~/inst % <kbd>find . -type f -print &gt; ../files.lst</kbd>
~/inst % <kbd>tar zcvf ~/amhello-1.0-i686.tar.gz `cat ../files.lst`</kbd>
./usr/bin/hello
./usr/share/doc/amhello/README
</pre></div>

<p>在这个例子之后， <code>amhello-1.0-i686.tar.gz</code>准备将其解压缩<samp>/</samp>在许多主机上。（使用<code>`cat ../files.lst`</code>代替 ' <samp>.</samp> '作为参数<code>tar</code>避免存档中每个子目录的条目：我们不希望<code>tar</code>恢复的修改时间<samp>/</samp> ， <samp>/usr/</samp>等）
</p>
<p>请注意，为几种架构构建软件包时，使用起来可能很方便<code>make install-data</code>和<code>make install-exec</code> （请参阅<a href="#Two_002dPart-Install">两部分安装</a> ）以在单个程序包中收集与体系结构无关的文件。
</p>
<p>有关更多信息，请参见<a href="#Install">安装</a> 。
</p>

<hr>
<a name="Preparing-Distributions"></a>
<div class="header">
<p>下一篇： <a href="#Dependency-Tracking" rel="next" accesskey="n">依赖关系跟踪</a> ，上一篇： <a href="#DESTDIR" rel="prev" accesskey="p">DESTDIR</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Preparing-Distributions-1"></a>
<h4 class="subsection">2.2.11准备发行版</h4>
<a name="index-Preparing-distributions"></a>
<a name="index-Packages_002c-preparation"></a>
<a name="index-Distributions_002c-preparation"></a>

<p>我们已经提到<code>make dist</code> 。此目标收集所有源文件和构建系统的必要部分，以创建名为<samp><var>package</var>-<var>version</var>.tar.gz</samp> 。
</p>
<a name="index-distcheck-better-than-dist"></a>

<p>另一个更有用的命令是<code>make distcheck</code> 。的<code>distcheck</code>目标结构<samp><var>package</var>-<var>version</var>.tar.gz</samp>以及<code>dist</code> ，但它还可以确保到目前为止提供的大多数用例都能正常工作：</p>
<ul>
<li>它会尝试对该软件包进行完整编译（请参阅<a href="#Basic-Installation">基本安装</a> ），打开新构建的tarball的包装，然后运行<code>make</code> ， <code>make check</code> ， <code>make install</code> ， 以及<code>make installcheck</code> ， 乃至<code>make dist</code> ，</li><li>它使用只读源树测试VPATH构建（请参阅<a href="#VPATH-Builds">VPATH Builds</a> ），</li><li>它确保<code>make clean</code> ， <code>make distclean</code>和<code>make uninstall</code>不要忽略任何文件（请参见“ <a href="#Standard-Targets">标准目标”</a> ），</li><li>然后检查<code>DESTDIR</code>安装工作（请参阅<a href="#DESTDIR">DESTDIR</a> ）。
</li></ul>

<p>所有这些操作都在一个临时目录中执行，因此不需要root特权。请注意，此类子目录的确切位置和确切结构（提取的源文件的放置位置，临时生成和安装目录的命名方式以及它们嵌套的深度等）将被视为实现细节，其中可以随时更改；所以不要依赖它。
</p>
<p>发布失败的软件包<code>make distcheck</code>意味着我们介绍的其中一种情况将不起作用，并且某些用户会感到失望。因此，良好的做法是仅在成功之后才释放软件包<code>make distcheck</code> 。当然，这并不意味着该软件包将是完美无缺的，但至少它可以防止您在从未听说过的人发布的软件包中发现一些令人尴尬的错误。 <code>distcheck</code> （喜欢<code>DESTDIR</code>由于输入错误或分布式文件被删除而无法工作<code>make clean</code> ， 甚至<code>VPATH</code>构建不起作用）。
</p>
<p>请参阅<a href="#Creating-amhello">创建amhello</a> ，以重新创建<samp>amhello-1.0.tar.gz</samp>使用<code>make distcheck</code> 。有关更多信息，请参见<a href="#Checking-the-Distribution">检查分发</a> 。 <code>distcheck</code> 。
</p>
<hr>
<a name="Dependency-Tracking"></a>
<div class="header">
<p>下一页： <a href="#Nested-Packages" rel="next" accesskey="n">嵌套包</a> ，上一页： <a href="#Preparing-Distributions" rel="prev" accesskey="p">准备发行版</a> ，向上： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Automatic-Dependency-Tracking"></a>
<h4 class="subsection">2.2.12自动依赖性跟踪</h4>
<a name="index-Dependency-tracking"></a>

<p>依赖性跟踪是编译的副作用。每次编译系统编译源文件时，它都会计算其依赖项列表（在C中，这些是正在编译的源文件所包含的头文件）。以后任何时候<code>make</code>运行，并且依赖项似乎已更改，则将重建依赖文件。
</p>
<p>默认情况下，Automake会生成用于自动依赖项跟踪的代码，除非开发人员选择覆盖它；否则，Automake会自动生成代码。有关更多信息，请参见<a href="#Dependencies">Dependencies</a> 。
</p>
<p>什么时候<code>configure</code>执行后，您会看到它正在为每个编译器探寻它所支持的依赖机制（可以使用几种机制）：</p>
<div class="example">
<pre class="example">~/amhello-1.0 % <kbd>./configure --prefix /usr</kbd>
&hellip;
checking dependency style of gcc... gcc3
&hellip;
</pre></div>

<p>因为依赖关系仅作为编译的副作用进行计算，所以第一次构建软件包时不存在依赖关系信息。可以，因为无论如何都需要构建所有文件： <code>make</code>不必决定需要重建哪些文件。实际上，依赖跟踪对于一次性构建是完全没有用的，并且存在<code>configure</code>禁用此选项：</p>
<dl compact>
<dt><samp>--disable-dependency-tracking</samp></dt>
<dd><a name="index-_002d_002ddisable_002ddependency_002dtracking"></a>
<p>加快一次性构建。
</p></dd>
</dl>

<p>一些编译器没有提供任何实用的方法来导出依赖项列表作为编译的副作用，因此需要单独运行（可能是另一种工具）来计算这些依赖项。这些方法暗含的性能损失很重要，足以默认情况下禁用它们。选项<samp>--enable-dependency-tracking</samp>必须传递给<code>configure</code>激活它们。
</p>
<dl compact>
<dt><samp>--enable-dependency-tracking</samp></dt>
<dd><a name="index-_002d_002denable_002ddependency_002dtracking"></a>
<p>不要拒绝慢速依赖提取程序。
</p></dd>
</dl>

<p>有关Automake多年来使用的不同依赖项跟踪方案的一些讨论，请参见<cite>《 Automake简要历史》中的</cite> <a href="automake-history.html#Dependency-Tracking-Evolution">依赖项跟踪演变</a> 。
</p>
<hr>
<a name="Nested-Packages"></a>
<div class="header">
<p>上一篇： <a href="#Dependency-Tracking" rel="prev" accesskey="p">依赖性跟踪</a> ，上一篇： <a href="#Use-Cases" rel="up" accesskey="u">用例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Nested-Packages-1"></a>
<h4 class="subsection">2.2.13嵌套包</h4>
<a name="index-Nested-packages"></a>
<a name="index-Packages_002c-nested"></a>
<a name="index-Subpackages"></a>

<p>尽管我们不建议嵌套包使用，但建议发现Autotools的人使用，但在这个小型广告之旅中，它是一个不错的功能，值得一提。
</p>
<p>自动没收的软件包（这意味着其构建系统已由Autoconf和其朋友创建的软件包）可以嵌套到任意深度。
</p>
<p>一个典型的设置是，程序包A将在子目录中分发它需要的一个库。该库B是具有其自己的GNU Build System的完整软件包。的<code>configure</code> A的脚本将运行<code>configure</code> B的脚本作为其执行的一部分，构建和安装A也将构建和安装B。为A生成分布还将包括B。</p>
<p>这样可以收集多个程序包。GCC经常使用此功能。这为安装人员提供了一个用于配置，构建和安装的软件包，同时允许开发人员独立处理子软件包。
</p>
<p>配置嵌套软件包时， <code>configure</code>顶级选项<code>configure</code>递归传递给嵌套<code>configure</code> s。如果某个选项对某些其他软件包有意义，则不了解该选项的软件包将忽略该选项。
</p>
<a name="index-_002d_002dhelp_003drecursive"></a>

<p>命令<code>configure --help=recursive</code>可用于显示所有随附软件包支持的选项。
</p>
<p>有关示例设置，请参见子<a href="#Subpackages">包</a> 。
</p>
<hr>
<a name="Why-Autotools"></a>
<div class="header">
<p>下一篇： <a href="#Hello-World" rel="next" accesskey="n">Hello World</a> ，上一篇： <a href="#Use-Cases" rel="prev" accesskey="p">用例</a> ，上一篇： <a href="#Autotools-Introduction" rel="up" accesskey="u">Autotools简介</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="How-Autotools-Help"></a>
<h3 class="section">2.3自动工具的帮助</h3>
<a name="index-Autotools_002c-purpose"></a>

<p>您可能不愿意自己实现GNU Build System的原因有很多（请阅读：编写<samp>configure</samp>脚本和<samp>Makefile</samp>自己）。
</p>
<ul>
<li>正如我们所看到的，GNU Build System具有很多功能（请参阅<a href="#Use-Cases">用例</a> ）。一些用户可能会期望您尚未实现的功能，因为您不需要它们。
</li><li>可移植地实现这些功能既困难又费力。考虑编写可移植的shell脚本，并且可移植<samp>Makefile</samp> s，对于您可能没有用的系统。要说服自己，请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Portable-Shell">Portable Shell编程</a> 。
</li><li>您将必须升级您的设置，才能遵循GNU编码标准的更改。
</li></ul>

<p>GNU Autotools减轻了所有这些负担，并提供：</p>
<ul>
<li>通过简单的说明即可创建可移植，完整且独立的GNU Build System的工具。
<em>自包含的，</em>意味着生成的构建系统不需要GNU Autotools。
</li><li>进行修复和改进的中心位置：针对可移植性问题的错误修复将使每个软件包都受益。
</li></ul>

<p>但是，还有一些原因可能导致您不希望使用自动工具的原因<small class="enddots">...</small> 例如，您可能已经在使用（或习惯于）另一个不兼容的构建系统。仅当您接受GNU Build System的概念时，自动工具才有用。那些对构建系统应该如何工作有自己想法的人会对Autotools感到沮丧。
</p>
<hr>
<a name="Hello-World"></a>
<div class="header">
<p>上一页： <a href="#Why-Autotools" rel="prev" accesskey="p">为什么选择Autotools</a> ，上<a href="#Autotools-Introduction" rel="up" accesskey="u">一篇</a> ： <a href="#Autotools-Introduction" rel="up" accesskey="u">Autotools简介</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="A-Small-Hello-World"></a>
<h3 class="section">2.4一个小的Hello World</h3>
<a name="index-Example-Hello-World"></a>
<a name="index-Hello-World-example"></a>
<a name="index-amhello_002d1_002e0_002etar_002egz_002c-creation"></a>

<p>在本节中，我们将重新创建<samp>amhello-1.0</samp>从头开始打包。第一部分说明如何调用自动工具以实例化GNU Build System，第二部分说明<samp>configure.ac</samp>和<samp>Makefile.am</samp>自动工具读取的文件。
</p>
<a name="amhello-Explained"></a><table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Creating-amhello" accesskey="1">创建amhello</a> ：</td><td>  </td><td align="left" valign="top">创建<samp>amhello-1.0.tar.gz</samp>从头开始</td></tr>
<tr><td align="left" valign="top">• <a href="#amhello_0027s-configure_002eac-Setup-Explained" accesskey="2">amhello的configure.ac安装说明</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#amhello_0027s-Makefile_002eam-Setup-Explained" accesskey="3">amhello的Makefile.am安装说明</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr>
<a name="Creating-amhello"></a>
<div class="header">
<p>下一篇： <a href="#amhello_0027s-configure_002eac-Setup-Explained" rel="next" accesskey="n">amhello的configure.ac设置说明</a> ，上一篇： <a href="#Hello-World" rel="up" accesskey="u">Hello World</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Creating-amhello_002d1_002e0_002etar_002egz"></a>
<h4 class="subsection">2.4.1创建<samp>amhello-1.0.tar.gz</samp></h4>

<p>这是我们如何重新创建<samp>amhello-1.0.tar.gz</samp>从头开始。该软件包非常简单，因此我们只需要编写5个文件。（您可以从最终版本中复制它们<samp>amhello-1.0.tar.gz</samp>如果您不想编写它们，请使用Automake分发它们。）
</p>
<p>在一个空目录中创建以下文件。
</p>
<ul>
<li> <samp>src/main.c</samp>是该文件的源文件<samp>hello</samp>程序。我们将其存储在<samp>src/</samp>子目录，因为稍后，当程序包演化时，它将简化添加一个<samp>man/</samp>手册页目录，一个<samp>data/</samp>数据文件的目录等<div class="example">
<pre class="example">~/amhello % <kbd>cat src/main.c</kbd>
#include &lt;config.h&gt;
#include &lt;stdio.h&gt;

int
main (void)
{
  puts (&quot;Hello World!&quot;);
  puts (&quot;This is &quot; PACKAGE_STRING &quot;.&quot;);
  return 0;
}
</pre></div>

</li><li> <samp>README</samp>包含一些关于我们的小包装的非常有限的文档。
<div class="example">
<pre class="example">~/amhello % <kbd>cat README</kbd>
This is a demonstration package for GNU Automake.
Type 'info Automake' to read the Automake manual.
</pre></div>

</li><li> <samp>Makefile.am</samp>和<samp>src/Makefile.am</samp>包含这两个目录的自动制作说明。

<div class="example">
<pre class="example">~/amhello % <kbd>cat src/Makefile.am</kbd>
bin_PROGRAMS = hello
hello_SOURCES = main.c
~/amhello % <kbd>cat Makefile.am</kbd>
SUBDIRS = src
dist_doc_DATA = README
</pre></div>

</li><li>最后， <samp>configure.ac</samp>包含Autoconf指令以创建<code>configure</code>脚本。

<div class="example">
<pre class="example">~/amhello % <kbd>cat configure.ac</kbd>
AC_INIT([amhello], [1.0], [bug-automake@gnu.org])
AM_INIT_AUTOMAKE([-Wall -Werror foreign])
AC_PROG_CC
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([
 Makefile
 src/Makefile
])
AC_OUTPUT
</pre></div>
</li></ul>

<a name="index-autoreconf_002c-example"></a>

<p>一旦拥有了这五个文件，就可以运行自动工具来实例化构建系统了。使用<code>autoreconf</code>命令如下：</p>
<div class="example">
<pre class="example">~/amhello % <kbd>autoreconf --install</kbd>
configure.ac: installing './install-sh'
configure.ac: installing './missing'
configure.ac: installing './compile'
src/Makefile.am: installing './depcomp'
</pre></div>

<p>至此，构建系统完成。
</p>
<p>除了输出中提到的三个脚本外，您还可以看到<code>autoreconf</code>创建了另外四个文件： <samp>configure</samp> ， <samp>config.h.in</samp> ， <samp>Makefile.in</samp>和<samp>src/Makefile.in</samp> 。后三个文件是模板，将通过以下方式适应系统<code>configure</code>在名字下<samp>config.h</samp> ， <samp>Makefile</samp>和<samp>src/Makefile</samp> 。我们开工吧：</p>
<div class="example">
<pre class="example">~/amhello % <kbd>./configure</kbd>
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of gcc... gcc3
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating config.h
config.status: executing depfiles commands
</pre></div>

<a name="index-distcheck"></a>
<a name="index-distcheck-example"></a>

<p>你可以看到<samp>Makefile</samp> ， <samp>src/Makefile</samp>和<samp>config.h</samp>在最后创建<code>configure</code>已经探测了系统。现在可以运行我们希望的所有目标（请参阅“ <a href="#Standard-Targets">标准目标”</a> ）。例如：</p>
<div class="example">
<pre class="example">~/amhello % <kbd>make</kbd>
&hellip;
~/amhello % <kbd>src/hello</kbd>
Hello World!
This is amhello 1.0.
~/amhello % <kbd>make distcheck</kbd>
&hellip;
=============================================
amhello-1.0 archives ready for distribution:
amhello-1.0.tar.gz
=============================================
</pre></div>

<p>注意运行<code>autoreconf</code>仅在最初不存在GNU Build System时才需要。以后当您在<samp>Makefile.am</samp>要么<samp>configure.ac</samp> ，执行时会自动重新生成构建系统的相关部分<code>make</code> 。
</p>
<p><code>autoreconf</code>是一个调用的脚本<code>autoconf</code> ， <code>automake</code> ，以及其他按正确顺序排列的命令。如果您是从这些工具开始的，那么弄清楚应该以什么顺序调用所有这些工具以及原因为何并不重要。但是，由于Autoconf和Automake拥有单独的手册，因此需要了解的重点是<code>autoconf</code>负责创建<samp>configure</samp>从<samp>configure.ac</samp> ，而<code>automake</code>负责创建<samp>Makefile.in</samp>来自的<samp>Makefile.am</samp>和<samp>configure.ac</samp> 。寻找答案时，这至少应该将您引向正确的手册。
</p>

<hr>
<a name="amhello_0027s-configure_002eac-Setup-Explained"></a>
<div class="header">
<p>下一篇： <a href="#amhello_0027s-Makefile_002eam-Setup-Explained" rel="next" accesskey="n">amhello的Makefile.am安装说明</a> ，上<a href="#Creating-amhello" rel="prev" accesskey="p">一篇</a> ： <a href="#Creating-amhello" rel="prev" accesskey="p">创建amhello</a> ，上<a href="#Creating-amhello" rel="prev" accesskey="p">一篇</a> ： <a href="#Hello-World" rel="up" accesskey="u">Hello World</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="amhello_0027s-configure_002eac-Setup-Explained-1"></a>
<h4 class="subsection">2.4.2 <code>amhello</code>的<samp>configure.ac</samp>安装说明</h4>

<a name="index-configure_002eac_002c-Hello-World"></a>

<p>让我们从以下内容开始<samp>configure.ac</samp> 。
</p>
<div class="example">
<pre class="example">AC_INIT([amhello], [1.0], [bug-automake@gnu.org])
AM_INIT_AUTOMAKE([-Wall -Werror foreign])
AC_PROG_CC
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([
 Makefile
 src/Makefile
])
AC_OUTPUT
</pre></div>

<p>双方都读取此文件<code>autoconf</code> （去创造<samp>configure</samp> ）和<code>automake</code> （创建各种<samp>Makefile.in</samp> s）。它包含一系列M4宏，这些宏将作为外壳程序代码扩展为最终形成<samp>configure</samp>脚本。我们不会详细说明该文件的语法，因为Autoconf手册中有一个完整的章节（请参见<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Writing-Autoconf-Input">编写<samp>configure.ac</samp></a>在<cite>Autoconf手册中</cite> ）。
</p>
<p>以开头的宏<code>AC_</code>是Autoconf宏，在Autoconf的手册中（见<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Autoconf-Macro-Index">的Autoconf宏指数</a>在<cite>autoconf的手册</cite> ）。开头的宏<code>AM_</code>是Automake宏，将在本手册的后面部分进行介绍（请参见“ <a href="#Macro-Index">宏索引”</a> ）。
</p>
<p>的前两行<samp>configure.ac</samp>初始化Autoconf和Automake。 <code>AC_INIT</code>将软件包的名称，版本号以及有关该软件包的错误报告的联系地址作为参数（此地址输出在末尾） <code>./configure --help</code> ， 例如）。当使此设置适应您自己的软件包时，请绝对不要盲目复制Automake的地址：使用软件包的邮件列表或您自己的邮件地址。
</p>
<a name="index-_002dWall"></a>
<a name="index-_002dWerror"></a>
<a name="index-foreign"></a>

<p>争论<code>AM_INIT_AUTOMAKE</code>是以下选项的列表<code>automake</code> （请参阅<a href="#Options">选项</a> ）。 <samp>-Wall</samp>和<samp>-Werror</samp>问<code>automake</code>打开所有警告并将其报告为错误。我们在这里说的是<strong>Automake</strong>警告，例如<samp>Makefile.am</samp> 。尽管它可能支持名称相似的选项，但这与编译器的调用方式绝对无关。使用<samp>-Wall -Werror</samp>是开始使用软件包时的安全设置：您不想错过任何问题。稍后，您可能会决定放松一下。的<samp>foreign</samp>选项告诉Automake该软件包将不遵循GNU标准。GNU软件包应始终分发其他文件，例如<samp>ChangeLog</samp> ， <samp>AUTHORS</samp>等我们不要<code>automake</code>在我们的小示例中抱怨这些丢失的文件。
</p>
<p>的<code>AC_PROG_CC</code>线导致<code>configure</code>脚本以搜索C编译器并定义变量<code>CC</code>它的名字。的<samp>src/Makefile.in</samp> Automake生成的文件使用变量<code>CC</code>建立<samp>hello</samp> ，所以什么时候<code>configure</code>创造<samp>src/Makefile</samp>从<samp>src/Makefile.in</samp> ，它将定义<code>CC</code>与找到的值。如果要求Automake创建一个<samp>Makefile.in</samp>使用<code>CC</code>但<samp>configure.ac</samp>没有定义，它将建议您添加一个呼叫<code>AC_PROG_CC</code> 。
</p>
<p>的<code>AC_CONFIG_HEADERS([config.h])</code>调用导致<code>configure</code>创建一个脚本<samp>config.h</samp>文件收集' <samp>#define</samp>由其他宏定义<samp>configure.ac</samp> 。就我们而言， <code>AC_INIT</code>宏已经定义了其中的一些。这是摘录<samp>config.h</samp>后<code>configure</code>已经运行：</p>
<div class="smallexample">
<pre class="smallexample">&hellip;
/* Define to the address where bug reports for this package should be sent. */
#define PACKAGE_BUGREPORT &quot;bug-automake@gnu.org&quot;

/* Define to the full name and version of this package. */
#define PACKAGE_STRING &quot;amhello 1.0&quot;
&hellip;
</pre></div>

<p>您可能已经注意到， <samp>src/main.c</samp>包括<samp>config.h</samp>这样就可以使用<code>PACKAGE_STRING</code> 。在一个真实的项目中<samp>config.h</samp>可以变得很大，只有一个<samp>#define</samp> '在系统上探测到的每个功能。
</p>
<p>的<code>AC_CONFIG_FILES</code>宏声明了以下文件列表<code>configure</code>应该从他们创造<samp>*.in</samp>模板。Automake还会扫描此列表以查找<samp>Makefile.am</samp>它必须处理的文件。（记住这一点很重要：在向项目添加新目录时，应添加其目录。 <samp>Makefile</samp>到此列表，否则Automake将永远不会处理新的<samp>Makefile.am</samp>您写在该目录中。）
</p>
<p>最后， <code>AC_OUTPUT</code> line是一个关闭命令，实际上会产生脚本的一部分，该脚本负责创建向其注册的文件<code>AC_CONFIG_HEADERS</code>和<code>AC_CONFIG_FILES</code> 。
</p>
<a name="index-autoscan"></a>

<p>开始新项目时，建议您从一个简单的步骤开始<samp>configure.ac</samp> ，并逐步添加所需的其他测试。命令<code>autoscan</code>还可以建议您的包装可能需要进行的一些测试（请参阅<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#autoscan-Invocation">使用<code>autoscan</code>去创造<samp>configure.ac</samp></a>在<cite>Autoconf手册中</cite> ）。
</p>

<hr>
<a name="amhello_0027s-Makefile_002eam-Setup-Explained"></a>
<div class="header">
<p>上一页： <a href="#amhello_0027s-configure_002eac-Setup-Explained" rel="prev" accesskey="p">amhello的configure.ac设置说明</a> ，上： <a href="#Hello-World" rel="up" accesskey="u">Hello World</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="amhello_0027s-Makefile_002eam-Setup-Explained-1"></a>
<h4 class="subsection">2.4.3 <code>amhello</code>的<samp>Makefile.am</samp>安装说明</h4>

<a name="index-Makefile_002eam_002c-Hello-World"></a>

<p>现在我们转向<samp>src/Makefile.am</samp> 。此文件包含有关构建和安装的Automake说明<samp>hello</samp> 。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = hello
hello_SOURCES = main.c
</pre></div>

<p>一种<samp>Makefile.am</samp>具有与普通语法相同的语法<samp>Makefile</samp> 。什么时候<code>automake</code>处理一个<samp>Makefile.am</samp>它将整个文件复制到输出中<samp>Makefile.in</samp> （稍后将变成<samp>Makefile</samp>通过<code>configure</code> ），但会通过生成一些构建规则和其他变量来对某些变量定义做出反应。经常<samp>Makefile.am</samp>只能包含上述变量定义的列表，但是它们还可以包含其他变量和规则定义， <code>automake</code>将不加解释地传递。
</p>
<p>以结尾的变量<code>_PROGRAMS</code>是特殊的变量，列出了生成的程序<samp>Makefile</samp>应该建立。用Automake讲，这<code>_PROGRAMS</code>后缀称为<em>主要词</em> ; Automake可以识别其他原色，例如<code>_SCRIPTS</code> ， <code>_DATA</code> ， <code>_LIBRARIES</code>等等对应于不同类型的文件。
</p>
<p>' <samp>bin</samp> ' 的一部分<code>bin_PROGRAMS</code>告诉<code>automake</code>结果程序应该安装在<var>bindir</var> 。回想一下，GNU Build System使用一组变量来表示目标目录，并允许用户自定义这些位置（请参阅“ <a href="#Standard-Directory-Variables">标准目录变量”</a> ）。任何这样的目录变量都可以放在主变量的前面（省略<code>dir</code>后缀）告诉<code>automake</code>在何处安装列出的文件。
</p>
<p>程序需要从源文件构建，因此对于每个程序<code><var>prog</var></code>列在<code><span class="nolinebreak">_PROGRAMS</span>
<!-- /@w --></code>变量， <code>automake</code>将寻找另一个名为<code><var>prog</var>_SOURCES</code>列出其源文件。可能有多个源文件：它们都将被编译并链接在一起。
</p>
<p>Automake还知道在创建tarball时需要分发源文件（与内置程序不同）。所以这个的副作用<code>hello_SOURCES</code>声明是<samp>main.c</samp>将成为由<code>make dist</code> 。
</p>
<p>最后，这里是有关顶层的一些说明<samp>Makefile.am</samp> 。
</p>
<div class="example">
<pre class="example">SUBDIRS = src
dist_doc_DATA = README
</pre></div>

<p><code>SUBDIRS</code>是一个特殊变量，列出了所有<code>make</code>应该在处理当前目录之前递归到。所以这条线负责<code>make</code>建造<samp>src/hello</samp>即使我们从顶层运行它。这条线也导致<code>make install</code>安装<samp>src/hello</samp>在安装之前<samp>README</samp> （这并不重要）。
</p>
<p>线<code>dist_doc_DATA = README</code>原因<samp>README</samp>分发并安装在<var>docdir</var> 。列出的文件<code>_DATA</code>主要对象不会自动成为使用以下内容构建的tarball的一部分<code>make dist</code> ，因此我们添加了<code>dist_</code>前缀，以便它们被分发。但是，对于<samp>README</samp>不需要： <code>automake</code>自动分发任何<samp>README</samp>遇到的文件（自动分发的其他文件的列表由<code>automake --help</code> ）。因此，第二行的唯一重要作用是安装<samp>README</samp>中<code>make install</code> 。
</p>
<p>此示例未涵盖的一件事是从程序代码访问安装目录值（请参阅“ <a href="#Standard-Directory-Variables">标准目录变量”</a> ），即将其转换为定义的宏。为此，请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Defining-Directories">定义目录</a> <cite>”</cite> 。
</p>

<hr>
<a name="Generalities"></a>
<div class="header">
<p>下一篇： <a href="#Examples" rel="next" accesskey="n">示例</a> ，上一篇： <a href="#Autotools-Introduction" rel="prev" accesskey="p">Autotools简介</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="General-ideas"></a>
<h2 class="chapter">3总体思路</h2>

<p>以下各节介绍了一些基本概念，可帮助您了解Automake的工作原理。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#General-Operation" accesskey="1">一般操作</a> ：</td><td>  </td><td align="left" valign="top">Automake的常规操作</td></tr>
<tr><td align="left" valign="top">• <a href="#Strictness" accesskey="2">严格性</a> ：</td><td>  </td><td align="left" valign="top">标准一致性检查</td></tr>
<tr><td align="left" valign="top">• <a href="#Uniform" accesskey="3">制服</a> ：</td><td>  </td><td align="left" valign="top">统一命名方案</td></tr>
<tr><td align="left" valign="top">• <a href="#Length-Limitations" accesskey="4">长度限制</a> ：</td><td>  </td><td align="left" valign="top">保持低于命令行长度限制</td></tr>
<tr><td align="left" valign="top">• <a href="#Canonicalization" accesskey="5">规范化</a> ：</td><td>  </td><td align="left" valign="top">衍生变量的命名方式</td></tr>
<tr><td align="left" valign="top">• <a href="#User-Variables" accesskey="6">用户变量</a> ：</td><td>  </td><td align="left" valign="top">为用户保留的变量</td></tr>
<tr><td align="left" valign="top">• <a href="#Auxiliary-Programs" accesskey="7">辅助程序</a> ：</td><td>  </td><td align="left" valign="top">程序可能需要自动制作</td></tr>
</tbody></table>


<hr>
<a name="General-Operation"></a>
<div class="header">
<p>下一页： <a href="#Strictness" rel="next" accesskey="n">严谨</a> ，向上： <a href="#Generalities" rel="up" accesskey="u">通则</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="General-Operation-1"></a>
<h3 class="section">3.1一般操作</h3>

<p>Automake通过阅读<samp>Makefile.am</samp>并生成一个<samp>Makefile.in</samp> 。某些变量和规则在<samp>Makefile.am</samp>指示Automake生成更专业的代码；例如，一个<code>bin_PROGRAMS</code>变量定义将导致生成用于编译和链接程序的规则。
</p>
<a name="index-Non_002dstandard-targets"></a>
<a name="index-git_002ddist_002c-non_002dstandard-example"></a>
<a name="index-git_002ddist"></a>

<p>变量中的变量定义和规则<samp>Makefile.am</samp>几乎全部复制到生成的文件中，所有变量定义都位于所有规则之前。这使您可以将几乎任意的代码添加到生成的<samp>Makefile.in</samp> 。例如，Automake发行版包含针对<code>git-dist</code>目标，Automake维护人员将其用于从源代码控制系统进行分发。
</p>
<a name="index-GNU-make-extensions"></a>

<p>请注意，大多数GNU make扩展名都不能被Automake识别。在<samp>Makefile.am</samp>会导致错误或令人困惑的行为。
</p>
<a name="index-Append-operator"></a>
<a name="index-_002b_003d"></a>
<p>一个特殊的例外是GNU make append运算符“ <samp>+=</samp> '，受支持。此运算符将其右手参数附加到左侧指定的变量。Automake会将操作员转换为普通的“ <samp>=</samp> '运算符； ' <samp>+=</samp>因此可以与任何make程序一起使用。
</p>
<p>Automake尝试将注释与任何相邻的规则或变量定义分组。
</p>
<a name="index-Limitations-of-automake-parser"></a>
<a name="index-Automake-parser_002c-limitations-of"></a>
<a name="index-indentation-in-Makefile_002eam"></a>
<p>通常，Automake在解析异常的Makefile结构时不是特别聪明，因此建议您避免使用奇特的结构或“创造性”使用空格。例如<tt class="key">，TAB</tt>字符不能目标名称和以下“之间使用<code>:</code> ”字符，并且变量赋值不应使用<tt class="key">TAB</tt>字符缩进。此外，在目标名称中使用更复杂的宏也会引起麻烦：</p>
<div class="example">
<pre class="example">% <kbd>cat Makefile.am</kbd>
$(FOO:=x): bar
% <kbd>automake</kbd>
Makefile.am:1: bad characters in variable name '$(FOO'
Makefile.am:1: ':='-style assignments are not portable
</pre></div>

<a name="index-Make-targets_002c-overriding"></a>
<a name="index-Make-rules_002c-overriding"></a>
<a name="index-Overriding-make-rules"></a>
<a name="index-Overriding-make-targets"></a>

<p>在中定义的规则<samp>Makefile.am</samp>通常会覆盖任何类似名称的规则，这些规则将由<code>automake</code> 。尽管这是受支持的功能，但通常最好避免使用它，因为有时生成的规则非常特殊。
</p>
<a name="index-Variables_002c-overriding"></a>
<a name="index-Overriding-make-variables"></a>

<p>同样，在<samp>Makefile.am</samp>要么<code>AC_SUBST</code> ed from <samp>configure.ac</samp>将覆盖该变量的任何定义<code>automake</code>通常会创建。该功能比覆盖规则的功能更有用。请注意，由<code>automake</code>被认为仅供内部使用，它们的名称在将来的发行版中可能会更改。
</p>
<a name="index-Recursive-operation-of-Automake"></a>
<a name="index-Automake_002c-recursive-operation"></a>
<a name="index-Example-of-recursive-operation"></a>

<p>检查变量定义时，Automake将递归检查定义中引用的变量。例如，如果Automake正在查看<code>foo_SOURCES</code>在这个片段中</p>
<div class="example">
<pre class="example">xs = a.c b.c
foo_SOURCES = c.c $(xs)
</pre></div>

<p>它会使用文件<samp>a.c</samp> ， <samp>b.c</samp>和<samp>c.c</samp>作为内容<code>foo_SOURCES</code> 。
</p>
<a name="index-_0023_0023-_0028special-Automake-comment_0029"></a>
<a name="index-Special-Automake-comment"></a>
<a name="index-Comment_002c-special-to-Automake"></a>

<p>Automake还允许注释形式<em>不</em>复制到输出中。所有以“ <samp>##</samp> Automake将完全忽略'（允许前导空格）。
</p>
<p>习惯上将<samp>Makefile.am</samp>读：</p>
<a name="index-Makefile_002eam_002c-first-line"></a>
<a name="index-First-line-of-Makefile_002eam"></a>

<div class="example">
<pre class="example">## Process this file with automake to produce Makefile.in
</pre></div>



<hr>
<a name="Strictness"></a>
<div class="header">
<p>下一篇： <a href="#Uniform" rel="next" accesskey="n">统一</a> ，上一篇： <a href="#General-Operation" rel="prev" accesskey="p">一般操作</a> ，向上： <a href="#Generalities" rel="up" accesskey="u">通则</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Strictness-1"></a>
<h3 class="section">3.2严谨性</h3>

<a name="index-Non_002dGNU-packages"></a>

<p>虽然Automake是供GNU软件包的维护者使用的，但它确实在努力适应那些希望使用它但又不想使用所有GNU约定的人。
</p>
<a name="index-Strictness_002c-defined"></a>
<a name="index-Strictness_002c-foreign"></a>
<a name="index-foreign-strictness"></a>
<a name="index-Strictness_002c-gnu"></a>
<a name="index-gnu-strictness"></a>
<a name="index-Strictness_002c-gnits"></a>
<a name="index-gnits-strictness"></a>

<p>为此，Automake支持三个级别的<em>严格性</em> -严格性指示了Automake应该多么严格地检查标准一致性。
</p>
<p>有效的严格等级为：</p>
<dl compact>
<dt><samp>foreign</samp></dt>
<dd><p>Automake将仅检查正确操作绝对必需的那些内容。例如，尽管GNU标准规定了<samp>NEWS</samp>文件，在此模式下将不需要。这种严格性还将默认关闭一些警告（其中包括可移植性警告）。该名称来源于Automake旨在用于GNU程序的事实。这些宽松的规则不是标准的操作模式。
</p>
</dd>
<dt><samp>gnu</samp></dt>
<dd><p>Automake将尽可能地检查是否符合软件包的GNU标准。这是默认值。
</p>
</dd>
<dt><samp>gnits</samp></dt>
<dd><p>Automake将检查是否符合尚未<em>编写的Gnits标准</em> 。这些基于GNU标准，但更加详细。除非您是Gnits标准撰稿人，否则建议您避免使用此选项，直到Gnits标准实际发布为止（这可能永远不会发生）。
</p></dd>
</dl>

<p>有关严格性级别的确切含义的更多信息，请参见<a href="#Gnits">Gnits</a> 。
</p>

<hr>
<a name="Uniform"></a>
<div class="header">
<p>下一个： <a href="#Length-Limitations" rel="next" accesskey="n">长度限制</a> ，上一个： <a href="#Strictness" rel="prev" accesskey="p">严格</a> ，上： <a href="#Generalities" rel="up" accesskey="u">一般性</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-Uniform-Naming-Scheme"></a>
<h3 class="section">3.3统一命名方案</h3>

<a name="index-Uniform-naming-scheme"></a>

<p>Automake变量通常遵循<em>统一的命名方案</em> ，可以轻松决定程序（和其他派生对象）的构建方式以及安装方式。该方案还支持<code>configure</code>时间确定应该建造什么。
</p>
<a name="index-_005fPROGRAMS-primary-variable"></a>
<a name="index-PROGRAMS-primary-variable"></a>
<a name="index-Primary-variable_002c-PROGRAMS"></a>
<a name="index-Primary-variable_002c-defined"></a>
<a name="index-_005fPROGRAMS"></a>

<p>在<code>make</code>时间，某些变量用于确定要构建的对象。变量名由几部分组成，这些部分串联在一起。
</p>
<p>告诉的片断<code>automake</code>建造的东西通常被称为<em>主要的</em> 。例如，主要<code>PROGRAMS</code>包含要编译和链接的程序列表。
<a name="index-PROGRAMS"></a>
</p>
<a name="index-pkgdatadir_002c-defined"></a>
<a name="index-pkgincludedir_002c-defined"></a>
<a name="index-pkglibdir_002c-defined"></a>
<a name="index-pkglibexecdir_002c-defined"></a>

<a name="index-pkgdatadir"></a>
<a name="index-pkgincludedir"></a>
<a name="index-pkglibdir"></a>
<a name="index-pkglibexecdir"></a>

<a name="index-PACKAGE_002c-directory"></a>
<p>使用一组不同的名称来确定应在何处安装构建对象。这些名称是主要名称的前缀，它们指示应将哪个标准目录用作安装目录。标准目录名称在GNU标准中给出（请参见<cite>GNU编码标准</cite>中<cite>的</cite> <a href="http://www.gnu.org/prep/standards/standards.html#Directory-Variables">目录变量</a> ）。Automake通过以下方式扩展了此列表<code>pkgdatadir</code> ， <code>pkgincludedir</code> ， <code>pkglibdir</code>和<code>pkglibexecdir</code> ;这些与非'相同<samp>pkg</samp> '版本，但带有' <samp>$(PACKAGE)</samp> ”。例如， <code>pkglibdir</code>被定义为“ <samp>$(libdir)/$(PACKAGE)</samp> '。
</p>
<a name="index-EXTRA_005f_002c-prepending"></a>
<p>对于每个主要对象，还有一个附加变量，其前缀为' <samp>EXTRA_</samp> '改为主要名称。此变量用于列出可能会或可能不会建立的对象，具体取决于<code>configure</code>决定。此变量是必需的，因为Automake必须静态地知道可能要生成的对象的完整列表才能生成<samp>Makefile.in</samp>在所有情况下都可以使用。
</p>
<a name="index-EXTRA_005fPROGRAMS_002c-defined"></a>
<a name="index-Example_002c-EXTRA_005fPROGRAMS"></a>
<a name="index-cpio-example"></a>

<p>例如， <code>cpio</code>决定在配置时应构建哪些程序。一些程序安装在<code>bindir</code> ，有些安装在<code>sbindir</code> ：</p>
<div class="example">
<pre class="example">EXTRA_PROGRAMS = mt rmt
bin_PROGRAMS = cpio pax
sbin_PROGRAMS = $(MORE_PROGRAMS)
</pre></div>

<p>将没有前缀的主变量定义为变量，例如“ <samp>PROGRAMS</samp> '，是一个错误。
</p>
<p>请注意，常见的“ <samp>dir</samp>构造变量名称时，后缀';因此有人写道<samp>bin_PROGRAMS</samp> ' 并不是 ' <samp>bindir_PROGRAMS</samp> '。
</p>
<p>并非每种对象都可以安装在每个目录中。Automake将标记那些发现错误的尝试（但请参阅下面的内容，如果确实需要，则如何覆盖检查）。Automake还将诊断目录名称中明显的拼写错误。
</p>
<a name="index-Extending-list-of-installation-directories"></a>
<a name="index-Installation-directories_002c-extending-list"></a>

<p>有时，标准目录（甚至通过Automake进行扩展）还不够。特别是，为清楚起见，有时在一些预定义目录的子目录中安装对象很有用。为此，Automake允许您扩展可能的安装目录的列表。给定的前缀（例如，“ <samp>zar</samp>如果与'同名的变量，则'）有效<samp>dir</samp> '附加已定义（例如' <samp>zardir</samp> '）。
</p>
<p>例如，以下代码段将安装<samp>file.xml</samp>进入<samp>$(datadir)/xml</samp> '。
</p>
<div class="example">
<pre class="example">xmldir = $(datadir)/xml
xml_DATA = file.xml
</pre></div>

<p>此功能还可以用于覆盖Automake进行的健全性检查，以诊断可疑的目录/主要对（在极少数情况下，这些检查是不可取的，并且您确实知道自己在做什么）。例如，Automake将在此输入上出错：</p>
<div class="example">
<pre class="example"># Forbidden directory combinations, automake will error out on this.
pkglib_PROGRAMS = foo
doc_LIBRARIES = libquux.a
</pre></div>

<p>但它将成功：</p>
<div class="example">
<pre class="example"># Work around forbidden directory combinations.  Do not use this
# without a very good reason!
my_execbindir = $(pkglibdir)
my_doclibdir = $(docdir)
my_execbin_PROGRAMS = foo
my_doclib_LIBRARIES = libquux.a
</pre></div>

<p>' <samp>exec</samp> '的子字符串<samp>my_execbindir</samp>使用'变量可以在正确的时间安装文件（请参阅<a href="#The-Two-Parts-of-Install">安装的两个部分</a> ）。
</p>
<a name="index-noinst_005f-primary-prefix_002c-definition"></a>
<a name="index-noinst_005f"></a>

<p>特殊前缀“ <samp>noinst_</samp> '表示应构建但不安装所有相关对象。这通常用于构建软件包其余部分所需的对象，例如静态库（请参阅<a href="#A-Library">A Library</a> ）或帮助程序脚本。
</p>
<a name="index-check_005f-primary-prefix_002c-definition"></a>
<a name="index-check_005f"></a>

<p>特殊前缀“ <samp>check_</samp> '表示只有在' <samp>make check</samp> '命令运行。这些对象也未安装。
</p>
<p>当前的主要名称是“ <samp>PROGRAMS</samp> '，' <samp>LIBRARIES</samp> '，' <samp>LTLIBRARIES</samp> '，' <samp>LISP</samp> '，' <samp>PYTHON</samp> '，' <samp>JAVA</samp> '，' <samp>SCRIPTS</samp> '，' <samp>DATA</samp> '，' <samp>HEADERS</samp> '，' <samp>MANS</samp> '和' <samp>TEXINFOS</samp> '。
<a name="index-PROGRAMS-1"></a>
<a name="index-LIBRARIES"></a>
<a name="index-LTLIBRARIES"></a>
<a name="index-LISP"></a>
<a name="index-PYTHON"></a>
<a name="index-JAVA"></a>
<a name="index-SCRIPTS"></a>
<a name="index-DATA"></a>
<a name="index-HEADERS"></a>
<a name="index-MANS"></a>
<a name="index-TEXINFOS"></a>
</p>
<p>某些原语还允许控制其他方面的其他前缀<code>automake</code>的行为。当前定义的前缀为' <samp>dist_</samp> '，' <samp>nodist_</samp> '，' <samp>nobase_</samp> '和' <samp>notrans_</samp> '。这些前缀将在后面进行说明（请参阅<a href="#Program-and-Library-Variables">程序和库变量</a> ）（请参见手册<a href="#Man-Pages">页</a> ）。
</p>

<hr>
<a name="Length-Limitations"></a>
<div class="header">
<p>下一篇： <a href="#Canonicalization" rel="next" accesskey="n">规范化</a> ，上一篇： <a href="#Uniform" rel="prev" accesskey="p">制服</a> ，上： <a href="#Generalities" rel="up" accesskey="u">一般性</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Staying-below-the-command-line-length-limit"></a>
<h3 class="section">3.4保持在命令行长度限制以下</h3>

<a name="index-command-line-length-limit"></a>
<a name="index-ARG_005fMAX"></a>

<p>传统上，大多数类unix的系统在创建新进程时都对命令行参数和环境内容有长度限制（例如，有关以下内容的概述，请参见<a href="http://www.in-ulm.de/~mascheck/various/argmax/">http://www.in-ulm.de/~mascheck/various/argmax/）</a> 。这个问题），这当然也适用于由<code>make</code> 。POSIX要求此限制至少为4096字节，并且大多数现代系统都有相当高的限制（或无限制）。
</p>
<p>为了创建不会超出这些限制的可移植Makefile，必须使文件列表的长度有界。不幸的是，在Automake中不可能完全透明地执行此操作，因此可能需要您的帮助。通常，您可以手动拆分长文件列表，并对每个列表使用不同的安装目录名称。例如，</p>
<div class="example">
<pre class="example">data_DATA = file1 &hellip; file<var>N</var> file<var>N+1</var> &hellip; file<var>2N</var>
</pre></div>

<p>也可以写成</p>
<div class="example">
<pre class="example">data_DATA = file1 &hellip; file<var>N</var>
data2dir = $(datadir)
data2_DATA = file<var>N+1</var> &hellip; file<var>2N</var>
</pre></div>

<p>并使Automake在处理过程中分别处理两个列表<code>make install</code> 。请参阅<a href="#The-Two-Parts-of-Install">“安装的两个部分”</a>以选择目录名称，以保持安装的两个部分的顺序。请注意， <code>make dist</code>在此示例中，可能仍只能在具有更大长度限制的主机上工作。
</p>
<p>Automake本身采用了两种策略来避免较长的命令行。例如，当“ <samp>${srcdir}/</samp> '前面是文件名，就像上面那样<code>$(data_DATA)</code>列表，它限制了传递给外部命令的参数数量。
</p>
<p>不幸的是，某些系统<code>make</code>命令可能会前置<code>VPATH</code>像“ <samp>${srcdir}/</samp> '来自动从源树中添加文件名（请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Automatic-Rule-Rewriting">自动规则重写</a> <cite>”</cite> ）。在这种情况下，用户可能必须切换到使用GNU Make，或避免使用VPATH构建，以保持在长度限制以下。
</p>
<p>对于从许多来源构建的库和程序，为了限制对象列表的长度，可以将便利归档用作中间文件（请参见<a href="#Libtool-Convenience-Libraries">Libtool便利库</a> ）。
</p>

<hr>
<a name="Canonicalization"></a>
<div class="header">
<p>下一篇： <a href="#User-Variables" rel="next" accesskey="n">用户变量</a> ，上一篇： <a href="#Length-Limitations" rel="prev" accesskey="p">长度限制</a> ，上一篇： <a href="#Generalities" rel="up" accesskey="u">通用性</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="How-derived-variables-are-named"></a>
<h3 class="section">3.5如何命名派生变量</h3>

<a name="index-canonicalizing-Automake-variables"></a>

<p>有时，Makefile变量名称是从维护人员提供的某些文本中派生的。例如，“ <samp>_PROGRAMS</samp> '被改写为' <samp>_SOURCES</samp> '变量。在这种情况下，Automake可以规范化文本，因此程序名称等不必遵循Makefile变量命名规则。进行变量引用时，名称中的所有字符（字母，数字，果馅奶酪卷（@）和下划线除外）都将变为下划线。
</p>
<p>例如，如果您的程序名为<samp>sniff-glue</samp> ，则派生的变量名称将为' <samp>sniff_glue_SOURCES</samp> '，不是' <samp>sniff-glue_SOURCES</samp> '。同样，名为的库的来源<samp>libmumble++.a</samp>应该在“ <samp>libmumble___a_SOURCES</samp> '变量。
</p>
<p>该果馅卷是一个附加项，目的是使变量名中的Autoconf替代使用不那么模糊。
</p>

<hr>
<a name="User-Variables"></a>
<div class="header">
<p>下一篇： <a href="#Auxiliary-Programs" rel="next" accesskey="n">辅助程序</a> ，上一篇： <a href="#Canonicalization" rel="prev" accesskey="p">规范化</a> ，上一篇： <a href="#Generalities" rel="up" accesskey="u">通用性</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Variables-reserved-for-the-user"></a>
<h3 class="section">3.6为用户保留的变量</h3>

<a name="index-variables_002c-reserved-for-the-user"></a>
<a name="index-user-variables"></a>

<p>一些<samp>Makefile</samp> GNU编码标准保留了一些变量，以供“用户”（即构建程序包的人）使用。例如， <code>CFLAGS</code>是这样的变量之一。
</p>
<p>有时，软件包开发人员倾向于设置用户变量，例如<code>CFLAGS</code>因为它看起来使他们的工作更轻松。但是，程序包本身不应该设置用户变量，尤其是不包括正确编译程序包所需的开关。由于这些变量被记录为软件包生成器所用，因此该人员正确地希望能够在构建时覆盖这些变量中的任何一个。
</p>
<p>为解决此问题，Automake为每个用户标志变量引入了特定于automake的阴影变量。（对于诸如<code>CC</code> ，它们将毫无意义。）阴影变量以' <samp>AM_</samp> '表示用户变量的名称。例如，阴影变量<code>YFLAGS</code>是<code>AM_YFLAGS</code> 。程序包维护者，即程序包的作者<samp>Makefile.am</samp>和<samp>configure.ac</samp>文件-可以根据需要调整这些阴影变量。
</p>
<p>有关这些变量及其与每个目标变量的交互方式的更多讨论，请参见<a href="#Flag-Variables-Ordering">标记变量排序</a> 。
</p>
<hr>
<a name="Auxiliary-Programs"></a>
<div class="header">
<p>上一页： <a href="#User-Variables" rel="prev" accesskey="p">用户变量</a> ，上： <a href="#Generalities" rel="up" accesskey="u">一般性</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Programs-automake-might-require"></a>
<h3 class="section">3.7程序可能需要自动制作</h3>

<a name="index-Programs_002c-auxiliary"></a>
<a name="index-Auxiliary-programs"></a>

<p>Automake有时需要帮助程序，以便生成<samp>Makefile</samp>可以正常工作。其中有很多，我们在这里列出。
</p>
<p>尽管所有这些文件都是通过Automake分发和安装的，但其中的两个文件是分开维护的。Automake副本在每个发行版之前都会更新，但是如果您需要更新的版本，我们会提及原始来源。
</p>
<dl compact>
<dt><code>ar-lib</code></dt>
<dd><p>这是一个包装程序，主要用于Microsoft lib归档程序，使其更像POSIX。
</p>
</dd>
<dt><code>compile</code></dt>
<dd><p>这是不接受选项的编译器的包装<samp>-c</samp>和<samp>-o</samp>同时。仅在绝对需要时使用。此类编译器很少见，其中最显着的例外是Microsoft C / C ++编译器。该包装器还使以下通用选项可用于该编译器，同时在需要时执行文件名转换： <samp>-I</samp> ， <samp>-L</samp> ， <samp>-l</samp> ， <samp>-Wl,</samp>和<samp>-Xlinker</samp> 。
</p>
</dd>
<dt><code>config.guess</code></dt>
<dt><code>config.sub</code></dt>
<dd><p>这两个程序为给定的构建，主机或目标体系结构计算规范的三元组。这些程序会定期更新，以支持新的体系结构并修复由于新内核版本的更改而中断的探针。每个新版本的Automake都带有这些程序的最新副本。如果您的Automake副本越来越旧，建议您在发布之前从<a href="https://savannah.gnu.org/git/?group=config">https://savannah.gnu.org/git/?group=config</a>获取这些文件的最新版本。
</p>
</dd>
<dt><code>depcomp</code></dt>
<dd><p>该程序理解如何运行编译器，以便它不仅生成所需的输出，还生成自动依赖项跟踪功能随后使用的依赖项信息（请参阅<a href="#Dependencies">Dependencies</a> ）。
</p>
</dd>
<dt><code>install-sh</code></dt>
<dd><p>这是对<code>install</code>在以下平台上运行的程序<code>install</code>不可用或不可用。
</p>
</dd>
<dt><code>mdate-sh</code></dt>
<dd><p>该脚本用于生成<samp>version.texi</samp>文件。它检查文件并打印有关该文件的一些日期信息。
</p>
</dd>
<dt><code>missing</code></dt>
<dd><p>这包装了通常仅维护人员需要的许多程序。如果相关程序不存在或看起来很旧， <code>missing</code>会在失败之前打印出提示性警告，以向用户提供更多上下文和信息。
</p>
</dd>
<dt><code>mkinstalldirs</code></dt>
<dd><p>该脚本曾经是' <samp>mkdir -p</samp> '，这是不可移植的。现在我们更喜欢使用' <samp>install-sh -d</samp> ' 什么时候<code>configure</code>发现“ <samp>mkdir -p</samp> '不起作用，这使分发的脚本少了一个。
</p>
<p>为了向后兼容<samp>mkinstalldirs</samp>仍在使用和分发时<code>automake</code>在包装中找到它。但是它不再自动安装，应该可以安全删除。
</p>
</dd>
<dt><code>py-compile</code></dt>
<dd><p>这用于字节编译Python脚本。
</p>
</dd>
<dt><code>test-driver</code></dt>
<dd><p>这实现了并行测试套件线束提供的默认测试驱动程序。
</p>
</dd>
<dt><code>texinfo.tex</code></dt>
<dd><p>不是程序，此文件是“ <samp>make dvi</samp> '，' <samp>make ps</samp> '和' <samp>make pdf</samp>可以在Texinfo来源包含在软件包中时使用。可以从<a href="https://www.gnu.org/software/texinfo/">https://www.gnu.org/software/texinfo/</a>下载最新版本。</p>
</dd>
<dt><code>ylwrap</code></dt>
<dd><p>该程序包装<code>lex</code>和<code>yacc</code>重命名其输出文件。它还确保，例如，多个<code>yacc</code>实例可以在单个目录中并行调用。
</p>
</dd>
</dl>


<hr>
<a name="Examples"></a>
<div class="header">
<p>下一页： <a href="#automake-Invocation" rel="next" accesskey="n">automake的调用</a> ，上一篇： <a href="#Generalities" rel="prev" accesskey="p">通则</a> ，向上： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Some-example-packages"></a>
<h2 class="chapter">4一些示例包</h2>

<p>本节包含两个小示例。
</p>
<p>第一个示例（请参见<a href="#Complete">Complete</a> ）假设您已经有一个已经使用Autoconf手工制作的现有项目。 <samp>Makefile</samp> s，并且您要将其转换为使用Automake。如果您发现这两种工具，那么最好看一下前面介绍的Hello World示例（请参见<a href="#Hello-World">Hello World</a> ）。
</p>
<p>第二个示例（请参阅<a href="#true">true</a> ）显示了如何使用不同的编译参数从同一文件构建两个程序。它包含一些技术题，可能最好在初读时略过。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Complete" accesskey="1">完成</a> ：</td><td>  </td><td align="left" valign="top">一个简单的例子，从头到尾</td></tr>
<tr><td align="left" valign="top">• <a href="#true" accesskey="2">正确</a> ：</td><td>  </td><td align="left" valign="top">建立真假</td></tr>
</tbody></table>


<hr>
<a name="Complete"></a>
<div class="header">
<p>下一篇： <a href="#true" rel="next" accesskey="n">true</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="A-simple-example_002c-start-to-finish"></a>
<h3 class="section">4.1一个简单的例子，从头开始</h3>

<a name="index-Complete-example"></a>

<p>假设您刚写完<code>zardoz</code> ，这是一个使您的头从涡流浮到涡流的程序。您一直在使用Autoconf提供可移植性框架，但是您的<samp>Makefile.in</samp>一直是临时的。您想要使它们防弹，因此请转到“自动制作”。
</p>
<a name="index-AM_005fINIT_005fAUTOMAKE_002c-example-use"></a>

<p>第一步是更新您的<samp>configure.ac</samp>包括命令<code>automake</code>需要。这样做的方法是添加一个<code>AM_INIT_AUTOMAKE</code>刚打完电话<code>AC_INIT</code> ：</p>
<div class="example">
<pre class="example">AC_INIT([zardoz], [1.0])
AM_INIT_AUTOMAKE
&hellip;
</pre></div>

<p>由于您的程序没有任何复杂因素（例如，它不使用<code>gettext</code> ，它不想建立共享库），这部分就完成了。那很简单！
</p>
<a name="index-aclocal-program_002c-introduction"></a>
<a name="index-aclocal_002em4_002c-preexisting"></a>
<a name="index-acinclude_002em4_002c-defined"></a>

<p>现在您必须重新生成<samp>configure</samp> 。但是要做到这一点，你需要告诉<code>autoconf</code>如何找到您使用过的新宏。最简单的方法是使用<code>aclocal</code>生成您的程序<samp>aclocal.m4</samp>为了你。但是等等...也许您已经有一个<samp>aclocal.m4</samp> ，因为您必须为程序编写一些毛茸茸的宏。的<code>aclocal</code>该程序使您可以将自己的宏放入<samp>acinclude.m4</samp> ，因此只需重命名然后运行：</p>
<div class="example">
<pre class="example">mv aclocal.m4 acinclude.m4
aclocal
autoconf
</pre></div>

<a name="index-zardoz-example"></a>

<p>现在是时候写你的<samp>Makefile.am</samp>对于<code>zardoz</code> 。以来<code>zardoz</code>是一个用户程序，您想将其安装在其余用户程序所在的位置： <code>bindir</code> 。另外， <code>zardoz</code>有一些Texinfo文档。你的<samp>configure.ac</samp>脚本使用<code>AC_REPLACE_FUNCS</code> ，因此您需要针对“ <samp>$(LIBOBJS)</samp> '。所以这是你要写的：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = zardoz
zardoz_SOURCES = main.c head.c float.c vortex9.c gun.c
zardoz_LDADD = $(LIBOBJS)

info_TEXINFOS = zardoz.texi
</pre></div>

<p>现在您可以运行“ <samp>automake --add-missing</samp> '生成您的<samp>Makefile.in</samp>并获取您可能需要的所有辅助文件，您就完成了！
</p>

<hr>
<a name="true"></a>
<div class="header">
<p>上一页： <a href="#Complete" rel="prev" accesskey="p">完整</a> ，向上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-true-and-false"></a>
<h3 class="section">4.2建立真假</h3>

<a name="index-Example_002c-false-and-true"></a>
<a name="index-false-Example"></a>
<a name="index-true-Example"></a>

<p>这是另一个更棘手的例子。它显示了如何生成两个程序（ <code>true</code>和<code>false</code> ）来自同一源文件（ <samp>true.c</samp> ）。困难的部分是每次的汇编<samp>true.c</samp>需要不同<code>cpp</code>标志。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = true false
false_SOURCES =
false_LDADD = false.o

true.o: true.c
        $(COMPILE) -DEXIT_CODE=0 -c true.c

false.o: true.c
        $(COMPILE) -DEXIT_CODE=1 -o false.o -c true.c
</pre></div>

<p>请注意，没有<code>true_SOURCES</code>定义。Automake将隐式假定存在一个名为<samp>true.c</samp> （请参见<a href="#Default-_005fSOURCES">Default _SOURCES</a> ），并定义要编译的规则<samp>true.o</samp>并链接<samp>true</samp> 。' <samp>true.o: true.c</samp>上面提供的规则<samp>Makefile.am</samp> ，将覆盖Automake生成的规则以进行构建<samp>true.o</samp> 。
</p>
<p><code>false_SOURCES</code>定义为空-这样就不会替换任何隐式值。因为我们没有列出来源<samp>false</samp> ，我们必须告诉Automake如何链接程序。这是目的<code>false_LDADD</code>线。一种<code>false_DEPENDENCIES</code>变量，包含<samp>false</samp>目标将由Automake根据以下内容自动生成<code>false_LDADD</code> 。
</p>
<p>如果您的编译器不接受以上两个规则，则以上规则将不起作用<samp>-c</samp>和<samp>-o</samp> 。最简单的解决方法是引入伪造的依赖关系（以避免并行操作出现问题<code>make</code> ）：</p>
<div class="example">
<pre class="example">true.o: true.c false.o
        $(COMPILE) -DEXIT_CODE=0 -c true.c

false.o: true.c
        $(COMPILE) -DEXIT_CODE=1 -c true.c &amp;&amp; mv true.o false.o
</pre></div>

<p>事实证明，还有一种更简单的方法可以完成相同的任务。上述某些技巧足够有用，因此我们将示例保存在手册中。但是，如果您要建造<code>true</code>和<code>false</code>在现实生活中，您可能会使用每个程序的编译标志，如下所示：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = false true

false_SOURCES = true.c
false_CPPFLAGS = -DEXIT_CODE=1

true_SOURCES = true.c
true_CPPFLAGS = -DEXIT_CODE=0
</pre></div>

<p>在这种情况下，Automake将导致<samp>true.c</samp>被编译两次，带有不同的标志。在这种情况下，目标文件的名称将由automake选择。他们将是<samp>false-true.o</samp>和<samp>true-true.o</samp> 。（目标文件的名称很少有关系。）
</p>
<hr>
<a name="automake-Invocation"></a>
<div class="header">
<p>下一篇： <a href="#configure" rel="next" accesskey="n">configure</a> ，上一篇： <a href="#Examples" rel="prev" accesskey="p">示例</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Creating-a-Makefile_002ein"></a>
<h2 class="chapter">5创建一个<samp>Makefile.in</samp></h2>
<a name="Invoking-automake"></a>
<a name="index-Multiple-configure_002eac-files"></a>
<a name="index-Invoking-automake"></a>
<a name="index-automake_002c-invoking"></a>
<a name="index-Invocation-of-automake"></a>
<a name="index-automake_002c-invocation"></a>

<p>要创建所有<samp>Makefile.in</samp>对于软件包，请运行<code>automake</code>顶级目录中的程序，不带参数。 <code>automake</code>会自动找到每个合适的<samp>Makefile.am</samp> （通过扫描<samp>configure.ac</samp> ;参见<a href="#configure">configure</a> ）并生成相应的<samp>Makefile.in</samp> 。注意<code>automake</code>对构成包装的东西有一个相当简单的看法；它假设一个包装只有一个<samp>configure.ac</samp> ， 在顶部。如果您的包裹有多个<samp>configure.ac</samp> s，那么您必须运行<code>automake</code>在每个目录中， <samp>configure.ac</samp> 。（或者，您可以依靠Autoconf的<code>autoreconf</code> ，它可以递归您的包树并运行<code>automake</code>在适当情况下。）
</p>
<p>您可以选择给<code>automake</code>争论<samp>.am</samp>会附加到参数，结果将用作输入文件的名称。此功能通常仅用于自动重建过期<samp>Makefile.in</samp> 。注意<code>automake</code>必须始终从项目的最高目录运行，即使用于重新生成项目<samp>Makefile.in</samp>在某些子目录中。这是必要的，因为<code>automake</code>必须扫描<samp>configure.ac</samp> ，因为<code>automake</code>使用的知识是<samp>Makefile.in</samp>在某些情况下位于子目录中以更改其行为。
</p>
<a name="index-AUTOCONF"></a>
<p>自动制作将运行<code>autoconf</code>扫描<samp>configure.ac</samp>及其依赖项（即， <samp>aclocal.m4</samp>以及任何包含的文件），因此<code>autoconf</code>必须在你的<code>PATH</code> 。如果有<code>AUTOCONF</code>您环境中的变量将代替<code>autoconf</code> ，这使您可以选择特定版本的Autoconf。顺便说一句，不要误会本段： <code>automake</code>运行<code>autoconf</code> <strong>扫描</strong>你的<samp>configure.ac</samp> ，这不会建立<samp>configure</samp>而且你还得跑<code>autoconf</code>为此目的自己。
</p>
<a name="index-automake-options"></a>
<a name="index-Options_002c-automake"></a>
<a name="index-Strictness_002c-command-line"></a>

<p><code>automake</code>接受以下选项：</p>
<a name="index-Extra-files-distributed-with-Automake"></a>
<a name="index-Files-distributed-with-Automake"></a>
<a name="index-config_002eguess"></a>

<dl compact>
<dt><code>-a</code></dt>
<dt><code>--add-missing</code></dt>
<dd><a name="index-_002da"></a>
<a name="index-_002d_002dadd_002dmissing"></a>
<p>自动制作需要在某些情况下存在某些通用文件；例如， <samp>config.guess</samp>如果需要<samp>configure.ac</samp>调用<code>AC_CANONICAL_HOST</code> 。Automake随这些文件中的几个一起分发（请参阅<a href="#Auxiliary-Programs">辅助程序</a> ）。如果可能，此选项将导致丢失的文件自动添加到程序包中。通常，如果Automake告诉您文件丢失，请尝试使用此选项。默认情况下，Automake会尝试建立一个符号链接，指向其自己的丢失文件副本；这可以用<samp>--copy</samp> 。
</p>
<p>许多可能会丢失的文件是通用脚本，其位置可以通过<code>AC_CONFIG_AUX_DIR</code>宏。因此， <code>AC_CONFIG_AUX_DIR</code>的设置会影响是否将文件视为丢失文件以及添加丢失文件的位置（请参阅<a href="#Optional">可选</a> ）。
</p>
<p>在某些严格性模式下，将安装其他文件，有关更多信息，请参见<a href="#Gnits">Gnits</a> 。
</p>
</dd>
<dt><code>--libdir=<var>dir</var></code></dt>
<dd><a name="index-_002d_002dlibdir"></a>
<p>在目录中查找Automake数据文件<var>dir</var>而不是安装目录中。通常用于调试。
</p>
<a name="index-AUTOMAKE_005fLIBDIR"></a>
<p>环境变量<code>AUTOMAKE_LIBDIR</code>提供了另一种设置包含Automake数据文件的目录的方法。然而<samp>--libdir</samp>优先于它。
</p>
</dd>
<dt><code>--print-libdir</code></dt>
<dd><a name="index-_002d_002dprint_002dlibdir"></a>
<p>打印包含Automake提供的脚本和数据文件的安装目录的路径（例如， <samp>texinfo.texi</samp>和<samp>install-sh</samp> ）。
</p>
</dd>
<dt><code>-c</code></dt>
<dd><a name="index-_002dc"></a>
</dd>
<dt><code>--copy</code></dt>
<dd><a name="index-_002d_002dcopy"></a>
<p>当与<samp>--add-missing</samp> ，导致复制已安装的文件。默认设置是建立符号链接。
</p>
</dd>
<dt><code>-f</code></dt>
<dd><a name="index-_002df"></a>
</dd>
<dt><code>--force-missing</code></dt>
<dd><a name="index-_002d_002dforce_002dmissing"></a>
<p>当与<samp>--add-missing</samp> ，即使源文件树中已经存在标准文件，也可以重新安装它们。这涉及在创建新的符号链接之前将文件从源树中删除（或<samp>--copy</samp> ，复制新文件）。
</p>
</dd>
<dt><code>--foreign</code></dt>
<dd><a name="index-_002d_002dforeign"></a>
<p>将全局严格性设置为<samp>foreign</samp> 。有关更多信息，请参见<a href="#Strictness">严格性</a> 。
</p>
</dd>
<dt><code>--gnits</code></dt>
<dd><a name="index-_002d_002dgnits"></a>
<p>将全局严格性设置为<samp>gnits</samp> 。有关更多信息，请参见<a href="#Gnits">Gnits</a> 。
</p>
</dd>
<dt><code>--gnu</code></dt>
<dd><a name="index-_002d_002dgnu"></a>
<p>将全局严格性设置为<samp>gnu</samp> 。有关更多信息，请参见<a href="#Gnits">Gnits</a> 。这是默认的严格性。
</p>
</dd>
<dt><code>--help</code></dt>
<dd><a name="index-_002d_002dhelp"></a>
<p>打印命令行选项摘要并退出。
</p>
</dd>
<dt><code>-i</code></dt>
<dt><code>--ignore-deps</code></dt>
<dd><a name="index-_002di"></a>
<p>这将禁用生成的依赖项跟踪功能<samp>Makefile</samp> s;请参阅<a href="#Dependencies">依赖项</a> 。
</p>
</dd>
<dt><code>--include-deps</code></dt>
<dd><a name="index-_002d_002dinclude_002ddeps"></a>
<p>这将启用依赖项跟踪功能。默认情况下启用此功能。提供此选项仅出于历史原因，可能不应该使用。
</p>
</dd>
<dt><code>--no-force</code></dt>
<dd><a name="index-_002d_002dno_002dforce"></a>
<p>通常<code>automake</code>创建所有<samp>Makefile.in</samp>在中提到的<samp>configure.ac</samp> 。此选项导致它仅更新那些<samp>Makefile.in</samp>相对于其家属之一而言已过时。
</p>
</dd>
<dt><code>-o <var>dir</var></code></dt>
<dt><code>--output-dir=<var>dir</var></code></dt>
<dd><a name="index-_002do"></a>
<a name="index-_002d_002doutput_002ddir"></a>
<p>把生成的<samp>Makefile.in</samp>在目录中<var>dir</var> 。通常每个<samp>Makefile.in</samp>在相应目录中创建<samp>Makefile.am</samp> 。此选项已被弃用，并将在以后的版本中删除。
</p>
</dd>
<dt><code>-v</code></dt>
<dt><code>--verbose</code></dt>
<dd><a name="index-_002dv"></a>
<a name="index-_002d_002dverbose"></a>
<p>使Automake打印有关正在读取或创建的文件的信息。
</p>
</dd>
<dt><code>--version</code></dt>
<dd><a name="index-_002d_002dversion"></a>
<p>打印Automake的版本号并退出。
</p>
</dd>
<dt><code>-W CATEGORY</code></dt>
<dt><code>--warnings=<var>category</var></code></dt>
<dd><a name="index-_002dW"></a>
<a name="index-_002d_002dwarnings"></a>
<p>输出警告进入<var>category</var> 。 <var>category</var>可以是以下之一：</p><dl compact>
<dt><code>gnu</code></dt>
<dd><p>与GNU编码标准有关的警告（请参阅<cite><a href="http://www.gnu.org/prep/standards/standards.html#Top">GNU编码标准</a></cite> ）。
</p></dd>
<dt><code>obsolete</code></dt>
<dd><p>过时的功能或结构</p></dd>
<dt><code>override</code></dt>
<dd><p>用户对Automake规则或变量的重新定义</p></dd>
<dt><code>portability</code></dt>
<dd><p>可移植性问题（例如使用<code>make</code>已知无法移植的功能）</p></dd>
<dt><code>extra-portability</code></dt>
<dd><p>与晦涩难懂的工具有关的其他可移植性问题。Microsoft就是这种工具的一个例子。 <code>lib</code>存档器。
</p></dd>
<dt><code>syntax</code></dt>
<dd><p>奇怪的语法，未使用的变量，错别字</p></dd>
<dt><code>unsupported</code></dt>
<dd><p>不支持或不完整的功能</p></dd>
<dt><code>all</code></dt>
<dd><p>所有警告</p></dd>
<dt><code>none</code></dt>
<dd><p>关闭所有警告</p></dd>
<dt><code>error</code></dt>
<dd><p>将警告视为错误</p></dd>
</dl>

<p>可以通过在类别名称前添加'来关闭类别<samp>no-</samp> '。例如， <samp>-Wno-syntax</samp>将隐藏有关未使用变量的警告。
</p>
<p>默认输出的类别是“ <samp>obsolete</samp> '，' <samp>syntax</samp> '和' <samp>unsupported</samp> '。此外， <samp>gnu</samp> '和' <samp>portability</samp>在中启用<samp>--gnu</samp>和<samp>--gnits</samp>严格。
</p>
<p>关闭 ' <samp>portability</samp> '也会关闭' <samp>extra-portability</samp> '，然后类似地打开' <samp>extra-portability</samp> '也将打开' <samp>portability</samp> '。但是，打开“ <samp>portability</samp> '或关闭' <samp>extra-portability</samp> '不会影响其他类别。
</p>
<a name="index-WARNINGS"></a>
<p>环境变量<code>WARNINGS</code>可以包含逗号分隔的类别列表以启用。通过这种方式，将在命令行切换之前将其考虑在内<samp>-Wnone</samp>也将忽略由启用的任何警告类别<code>WARNINGS</code> 。其他工具也使用此变量<code>autoconf</code> ;因此，未知类别将被忽略。
</p>
</dd>
</dl>

<a name="index-AUTOMAKE_005fJOBS"></a>
<p>如果环境变量<code>AUTOMAKE_JOBS</code>包含一个正数，它被视为要在其中使用的Perl线程的最大数量<code>automake</code>用于生成多个<samp>Makefile.in</samp>并发文件。这是一项实验功能。
</p>

<hr>
<a name="configure"></a>
<div class="header">
<p>下一篇： <a href="#Directories" rel="next" accesskey="n">目录</a> ，上一篇： <a href="#automake-Invocation" rel="prev" accesskey="p">automake调用</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Scanning-configure_002eac_002c-using-aclocal"></a>
<h2 class="chapter">6扫描<samp>configure.ac</samp> ，使用<code>aclocal</code></h2>

<a name="index-configure_002eac_002c-scanning"></a>
<a name="index-Scanning-configure_002eac"></a>
<a name="index-Using-aclocal"></a>
<a name="index-aclocal_002c-using"></a>

<p>Automake扫描包裹的<samp>configure.ac</samp>确定有关包装的某些信息。一些<code>autoconf</code>宏是必需的，并且必须在<samp>configure.ac</samp> 。Automake还将使用来自<samp>configure.ac</samp>进一步调整其输出。
</p>
<p>Automake还提供了一些Autoconf宏，以简化维护。这些宏可以自动放入您的<samp>aclocal.m4</samp>使用<code>aclocal</code>程序。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Requirements" accesskey="1">要求</a> ：</td><td>  </td><td align="left" valign="top">配置要求</td></tr>
<tr><td align="left" valign="top">• <a href="#Optional" accesskey="2">可选</a> ：</td><td>  </td><td align="left" valign="top">Automake可以识别的其他内容</td></tr>
<tr><td align="left" valign="top">• <a href="#aclocal-Invocation" accesskey="3">本地调用</a> ：</td><td>  </td><td align="left" valign="top">自动生成aclocal.m4</td></tr>
<tr><td align="left" valign="top">• <a href="#Macros" accesskey="4">宏</a> ：</td><td>  </td><td align="left" valign="top">Automake随附的Autoconf宏</td></tr>
</tbody></table>


<hr>
<a name="Requirements"></a>
<div class="header">
<p>下一页： <a href="#Optional" rel="next" accesskey="n">可选</a> ，上一步： <a href="#configure" rel="up" accesskey="u">配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Configuration-requirements"></a>
<h3 class="section">6.1配置要求</h3>

<a name="index-Automake-requirements-1"></a>
<a name="index-Requirements-of-Automake"></a>

<a name="index-AM_005fINIT_005fAUTOMAKE"></a>
<p>Automake的一个真正要求是您的<samp>configure.ac</samp>呼叫<code>AM_INIT_AUTOMAKE</code> 。该宏执行正确的Automake操作所需的几项操作（请参见<a href="#Macros">Macros</a> ）。
</p>
<p>这是Automake所需但不由其运行的其他宏<code>AM_INIT_AUTOMAKE</code> ：</p>
<dl compact>
<dt><code>AC_CONFIG_FILES</code></dt>
<dt><code>AC_OUTPUT</code></dt>
<dd><a name="index-AC_005fCONFIG_005fFILES"></a>
<a name="index-AC_005fOUTPUT"></a>
<p>这两个宏通常在的结尾处按如下方式调用<samp>configure.ac</samp> 。
</p>
<div class="example">
<pre class="example">&hellip;
AC_CONFIG_FILES([
  Makefile
  doc/Makefile
  src/Makefile
  src/lib/Makefile
  &hellip;
])
AC_OUTPUT
</pre></div>

<p>Automake使用这些文件来确定要创建的文件（请参见<cite>《 Autoconf手册</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Output">》</a>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Output">创建输出文件</a> <cite>”</cite> ）。列出的文件被认为是自动生成的<samp>Makefile</samp>如果存在同名文件，并且<samp>.am</samp>附加扩展名。通常，“ <samp>AC_CONFIG_FILES([foo/Makefile])</samp> '将导致自动制作生成<samp>foo/Makefile.in</samp>如果<samp>foo/Makefile.am</samp>存在。
</p>
<p>使用时<code>AC_CONFIG_FILES</code>具有多个输入文件，如</p>
<div class="example">
<pre class="example">AC_CONFIG_FILES([Makefile:top.in:Makefile.in:bot.in])
</pre></div>

<p><code>automake</code>将产生第一个<samp>.in</samp>输入文件的<samp>.am</samp>文件已存在。如果不存在这样的文件，则认为输出文件不是由Automake生成的。
</p>
<p>文件创建者<code>AC_CONFIG_FILES</code>他们是Automake <samp>Makefile</samp>是否将所有内容都用' <samp>make distclean</samp> '。它们的输入将自动分配，除非它们是先前的输出<code>AC_CONFIG_FILES</code>命令。最后，在Automake中生成重建规则<samp>Makefile</samp>存在于输出文件的子目录中（如果存在），或者存在于顶层<samp>Makefile</samp>除此以外。
</p>
<p>如果上述设备（清洁，分配和重建）工作正常， <code>AC_CONFIG_FILES</code>规范仅包含文字。如果规范的一部分使用外壳变量， <code>automake</code>将无法完成此设置，您将需要手动完成丢失的位。例如，在</p>
<div class="example">
<pre class="example">file=input
&hellip;
AC_CONFIG_FILES([output:$file],, [file=$file])
</pre></div>

<p><code>automake</code>将输出规则进行清理<samp>output</samp> ，然后重建它。但是，重建规则将不依赖于<samp>input</samp> ，并且此文件也不会分发。（您必须添加“ <samp>EXTRA_DIST = input</samp> '到你的<samp>Makefile.am</samp>如果<samp>input</samp>是源文件。）
</p>
<p>相似地</p>
<div class="example">
<pre class="example">file=output
file2=out:in
&hellip;
AC_CONFIG_FILES([$file:input],, [file=$file])
AC_CONFIG_FILES([$file2],, [file2=$file2])
</pre></div>

<p>只会造成<samp>input</samp>分发。没有文件将被自动清除（添加' <samp>DISTCLEANFILES = output out</samp> '您自己），并且不会输出任何重建规则。
</p>
<p>明显<code>automake</code>无法猜测什么值<samp>$file</samp> '将在以后举行<samp>configure</samp>运行，它不能使用shell变量' <samp>$file</samp> ' 在一个<samp>Makefile</samp> 。但是，如果您引用“ <samp>$file</samp>作为<samp>${file}</samp> '（即，以一种与<code>make</code>的语法），并进一步使用<code>AC_SUBST</code>为了保证 ' <samp>${file}</samp> '在<samp>Makefile</samp> ， 然后<code>automake</code>将能够使用“ <samp>${file}</samp>以生成所有这些规则。例如，这是Automake软件包本身如何为其测试套件生成版本化脚本的方式：</p>
<div class="example">
<pre class="example">AC_SUBST([APIVERSION], &hellip;)
&hellip;
AC_CONFIG_FILES(
  [tests/aclocal-${APIVERSION}:tests/aclocal.in],
  [chmod +x tests/aclocal-${APIVERSION}],
  [APIVERSION=$APIVERSION])
AC_CONFIG_FILES(
  [tests/automake-${APIVERSION}:tests/automake.in],
  [chmod +x tests/automake-${APIVERSION}])
</pre></div>

<p>在这里，清理，分发和重建是自动完成的，因为“ <samp>${APIVERSION}</samp> '被称为<code>make</code> -时间。
</p>
<p>请注意，您不应使用shell变量来声明<samp>Makefile</samp>哪些文件<code>automake</code>必须创建<samp>Makefile.in</samp> 。甚至<code>AC_SUBST</code>在这里没有帮助，因为<code>automake</code>在运行时需要知道文件名以检查是否<samp>Makefile.am</samp>存在。（在非常麻烦的情况下，您的设置需要使用此类变量，因此您必须告诉Automake哪个<samp>Makefile.in</samp>在命令行上生成）。
</p>
<p>有可能让<code>automake</code>发出以下条件规则<code>AC_CONFIG_FILES</code>在...的帮助下<code>AM_COND_IF</code> （请参阅<a href="#Optional">可选</a> ）。
</p>
<p>总结一下：</p><ul>
<li>使用文字<samp>Makefile</samp> s，并在可能的情况下用于其他文件。
</li><li>使用 ' <samp>$file</samp> ' （要么 ' <samp>${file}</samp> '没有' <samp>AC_SUBST([file])</samp> '） <code>automake</code>应该忽略。
</li><li>使用 ' <samp>${file}</samp> '和' <samp>AC_SUBST([file])</samp> '用于<code>automake</code>不应该忽略。
</li></ul>

</dd>
</dl>


<hr>
<a name="Optional"></a>
<div class="header">
<p>下一篇： <a href="#aclocal-Invocation" rel="next" accesskey="n">aclocal调用</a> ，上一篇： <a href="#Requirements" rel="prev" accesskey="p">要求</a> ，上一篇： <a href="#configure" rel="up" accesskey="u">配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Other-things-Automake-recognizes"></a>
<h3 class="section">6.2 Automake可以识别的其他内容</h3>

<a name="index-Macros-Automake-recognizes"></a>
<a name="index-Recognized-macros-by-Automake"></a>

<p>每次运行Automake时，它都会调用Autoconf进行跟踪<samp>configure.ac</samp> 。这样，它可以识别某些宏的使用并定制生成的宏。 <samp>Makefile.in</samp>适当地。当前公认的宏及其作用是：</p>
<dl compact>
<dt><code>AC_CANONICAL_BUILD</code>
<a name="index-AC_005fCANONICAL_005fBUILD"></a>
</dt>
<dt><code>AC_CANONICAL_HOST</code>
<a name="index-AC_005fCANONICAL_005fHOST"></a>
</dt>
<dt><code>AC_CANONICAL_TARGET</code>
<a name="index-AC_005fCANONICAL_005fTARGET"></a>
</dt>
<dd><a name="index-build_005ftriplet"></a>
<a name="index-host_005ftriplet"></a>
<a name="index-target_005ftriplet"></a>
<p>Automake将确保<samp>config.guess</samp>和<samp>config.sub</samp>存在。另外， <samp>Makefile</samp>变数<code>build_triplet</code> ， <code>host_triplet</code>和<code>target_triplet</code>介绍。请参见<cite>《 Autoconf手册》</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Canonicalizing">获取规范系统类型</a> 。
</p>
</dd>
<dt><code>AC_CONFIG_AUX_DIR</code>
<a name="index-AC_005fCONFIG_005fAUX_005fDIR-1"></a>
</dt>
<dd><p>Automake将查找各种帮助程序脚本，例如<samp>install-sh</samp> ，在此宏调用中命名的目录中。（脚本的完整列表为： <samp>ar-lib</samp> ， <samp>config.guess</samp> ， <samp>config.sub</samp> ， <samp>depcomp</samp> ， <samp>compile</samp> ， <samp>install-sh</samp> ， <samp>ltmain.sh</samp> ， <samp>mdate-sh</samp> ， <samp>missing</samp> ， <samp>mkinstalldirs</samp> ， <samp>py-compile</samp> ， <samp>test-driver</samp> ， <samp>texinfo.tex</samp> ， <samp>ylwrap</samp> ）并非总是搜索所有脚本。有些脚本只有在生成了<samp>Makefile.in</samp>需要他们。
</p>
<p>如果<code>AC_CONFIG_AUX_DIR</code>如果未给出，则在其标准位置查找脚本。对于<samp>mdate-sh</samp> ， <samp>texinfo.tex</samp>和<samp>ylwrap</samp> ，标准位置是与当前目录相对应的源目录<samp>Makefile.am</samp> 。对于其他地区，标准位置是第一个<samp>.</samp> ， <samp>..</samp> ， 要么<samp>../..</samp> （相对于顶级源目录）提供任何一种辅助脚本。请参见<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">《</a> <cite>Autoconf手册</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">》</a>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">查找“配置”输入</a> 。
</p>
<p>所需文件来自<code>AC_CONFIG_AUX_DIR</code>即使没有<samp>Makefile.am</samp>在此目录中。
</p>
</dd>
<dt><code>AC_CONFIG_LIBOBJ_DIR</code>
<a name="index-AC_005fCONFIG_005fLIBOBJ_005fDIR-1"></a>
</dt>
<dd><p>Automake将要求使用以下命令声明源文件<code>AC_LIBSOURCE</code> （请参见下文）在此宏指定的目录中。
</p>
</dd>
<dt><code>AC_CONFIG_HEADERS</code>
<a name="index-AC_005fCONFIG_005fHEADERS"></a>
</dt>
<dd><p>Automake会生成规则，以根据相应的模板（通常是<samp>foo.h</samp>标头为<samp>foo.h.in</samp> ）。旧版本的Automake需要使用<code>AM_CONFIG_HEADER</code> ;情况不再如此，并且该宏确实已被删除。
</p>
<p>与<code>AC_CONFIG_FILES</code> （请参阅<a href="#Requirements">需求</a> ），就清洁，分发和重建而言，将忽略使用shell变量的规范的某些部分。
</p>
</dd>
<dt><code>AC_CONFIG_LINKS</code>
<a name="index-AC_005fCONFIG_005fLINKS"></a>
</dt>
<dd><p>自动制作将生成要删除的规则<samp>configure</samp>在“ <samp>make distclean</samp> '，并将命名源文件作为' <samp>make dist</samp> '。
</p>
<p>至于<code>AC_CONFIG_FILES</code> （请参阅<a href="#Requirements">需求</a> ），就清洁和分发而言，将忽略使用shell变量的规范的某些部分。（没有链接的重建规则。）
</p>
</dd>
<dt><code>AC_LIBOBJ</code>
<a name="index-AC_005fLIBOBJ-2"></a>
</dt>
<dt><code>AC_LIBSOURCE</code>
<a name="index-AC_005fLIBSOURCE-1"></a>
</dt>
<dt><code>AC_LIBSOURCES</code>
<a name="index-AC_005fLIBSOURCES"></a>
</dt>
<dd><a name="index-LIBOBJS"></a>
<p>Automake将自动分发列表中列出的任何文件<code>AC_LIBSOURCE</code>要么<code>AC_LIBSOURCES</code> 。
</p>
<p>请注意<code>AC_LIBOBJ</code>宏调用<code>AC_LIBSOURCE</code> 。因此，如果记录了Autoconf宏以调用“ <samp>AC_LIBOBJ([file])</samp> '， 然后<samp>file.c</samp>将由Automake自动分发。这包括许多宏，例如<code>AC_FUNC_ALLOCA</code> ， <code>AC_FUNC_MEMCMP</code> ， <code>AC_REPLACE_FUNCS</code> ， 和别的。
</p>
<p>顺便说一句，直接分配给<code>LIBOBJS</code>不再受支持。你应该经常使用<code>AC_LIBOBJ</code>以此目的。看到<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code>与<code>LIBOBJS</code></a>在<cite>Autoconf手册中</cite> 。
</p>
</dd>
<dt><code>AC_PROG_RANLIB</code>
<a name="index-AC_005fPROG_005fRANLIB"></a>
</dt>
<dd><p>如果软件包中内置了任何库，则这是必需的。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_PROG_CXX</code>
<a name="index-AC_005fPROG_005fCXX"></a>
</dt>
<dd><p>如果包含任何C ++源，则这是必需的。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_PROG_OBJC</code>
<a name="index-AC_005fPROG_005fOBJC"></a>
</dt>
<dd><p>如果包含任何Objective C源，则这是必需的。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_PROG_OBJCXX</code>
<a name="index-AC_005fPROG_005fOBJCXX"></a>
</dt>
<dd><p>如果包含任何Objective C ++源，则这是必需的。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_PROG_F77</code>
<a name="index-AC_005fPROG_005fF77"></a>
</dt>
<dd><p>如果包括任何Fortran 77源，则这是必需的。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_F77_LIBRARY_LDFLAGS</code>
<a name="index-AC_005fF77_005fLIBRARY_005fLDFLAGS"></a>
</dt>
<dd><p>对于包含Fortran 77的多种语言的程序和共享库，这是必需的（请参阅<a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合使用</a> ）。请参见<a href="#Macros">Automake随附的Autoconf宏</a> 。
</p>
</dd>
<dt><code>AC_FC_SRCEXT</code>
<a name="index-AC_005fFC_005fSRCEXT"></a>
</dt>
<dd><p>Automake将添加由<code>AC_FC_SRCEXT</code>编译具有相应源扩展名的文件（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Fortran-Compiler">Fortran编译器特性</a> ）。
</p>
</dd>
<dt><code>AC_PROG_FC</code>
<a name="index-AC_005fPROG_005fFC"></a>
</dt>
<dd><p>如果包括任何Fortran 90/95源，则这是必需的。此宏与Autoconf 2.58和更高版本一起分发。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_PROG_LIBTOOL</code>
<a name="index-AC_005fPROG_005fLIBTOOL"></a>
</dt>
<dd><p>Automake将开启<code>libtool</code> （请参阅<cite>《 Libtool手册</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Top">》</a>中的<cite>“</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Top">简介</a> <cite>”</cite> ）。
</p>
</dd>
<dt><code>AC_PROG_YACC</code>
<a name="index-AC_005fPROG_005fYACC"></a>
</dt>
<dd><a name="index-YACC"></a>
<p>如果看到了Yacc源文件，则必须使用此宏或定义变量<code>YACC</code>在<samp>configure.ac</samp> 。前者是首选（请参见<cite>Autoconf手册</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> <cite>”</cite> ）。
</p>
</dd>
<dt><code>AC_PROG_LEX</code>
<a name="index-AC_005fPROG_005fLEX-1"></a>
</dt>
<dd><p>如果看到Lex源文件，则必须使用此宏。请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> 。
</p>
</dd>
<dt><code>AC_REQUIRE_AUX_FILE</code>
<a name="index-AC_005fREQUIRE_005fAUX_005fFILE"></a>
</dt>
<dd><p>对于每个<code>AC_REQUIRE_AUX_FILE([<var>file</var>])</code> ， <code>automake</code>将确保<samp><var>file</var></samp>存在于aux目录中，否则会抱怨。它还将自动分发文件。第三方Autoconf宏应使用此宏，这些宏在使用以下命令指定的aux目录中需要一些支持文件<code>AC_CONFIG_AUX_DIR</code>以上。见<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">发现<code>configure</code></a>在<cite>《 Autoconf手册》中</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">输入</a> 。
</p>
</dd>
<dt><code>AC_SUBST</code>
<a name="index-AC_005fSUBST"></a>
</dt>
<dd><p>第一个参数自动定义为每个生成的变量<samp>Makefile.in</samp> ，除非<code>AM_SUBST_NOTMAKE</code>也用于此变量。请参见<cite>《 Autoconf手册》</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Setting-Output-Variables">设置输出变量</a> 。
</p>
<p>对于每个替换变量<var>var</var> ， <code>automake</code>将添加一行<code><var>var</var> = <var>value</var></code>每一个<samp>Makefile.in</samp>文件。许多Autoconf宏调用<code>AC_SUBST</code>以这种方式设置输出变量，例如， <code>AC_PATH_XTRA</code>定义<code>X_CFLAGS</code>和<code>X_LIBS</code> 。因此，您可以按以下方式访问这些变量<code>$(X_CFLAGS)</code>和<code>$(X_LIBS)</code>在任何<samp>Makefile.am</samp>如果<code>AC_PATH_XTRA</code>叫做。
</p>
</dd>
<dt><code>AM_CONDITIONAL</code>
<a name="index-AM_005fCONDITIONAL-1"></a>
</dt>
<dd><p>这引入了Automake条件语句（请参阅<a href="#Conditionals">条件</a>语句）。
</p>
</dd>
<dt><code>AM_COND_IF</code>
<a name="index-AM_005fCOND_005fIF-1"></a>
</dt>
<dd><p>该宏允许<code>automake</code>检测内部的后续访问<samp>configure.ac</samp>到先前引入的条件<code>AM_CONDITIONAL</code> ，从而启用条件<code>AC_CONFIG_FILES</code> （请参阅<a href="#Usage-of-Conditionals">“条件句的用法”</a> ）。
</p>
</dd>
<dt><code>AM_GNU_GETTEXT</code>
<a name="index-AM_005fGNU_005fGETTEXT"></a>
</dt>
<dd><p>对于使用GNU gettext的包，此宏是必需的（请参阅<a href="#gettext">gettext</a> ）。它与gettext一起分发。如果Automake看到此宏，则可以确保该软件包满足gettext的某些要求。
</p>
</dd>
<dt><code>AM_GNU_GETTEXT_INTL_SUBDIR</code>
<a name="index-AM_005fGNU_005fGETTEXT_005fINTL_005fSUBDIR"></a>
</dt>
<dd><p>此宏指定<samp>intl/</samp>即使要建立子目录<code>AM_GNU_GETTEXT</code>使用第一个参数'调用宏<samp>external</samp> '。
</p>
</dd>
<dt><code>AM_MAINTAINER_MODE(<span class="roman">[</span><var>default-mode</var><span class="roman">]</span>)</code>
<a name="index-AM_005fMAINTAINER_005fMODE_0028_005bdefault_002dmode_005d_0029"></a>
</dt>
<dd><a name="index-_002d_002denable_002dmaintainer_002dmode"></a>
<a name="index-_002d_002ddisable_002dmaintainer_002dmode"></a>
<p>此宏添加了一个<samp>--enable-maintainer-mode</samp>选择<code>configure</code> 。如果使用了<code>automake</code>将导致默认情况下在生成的“仅维护者”规则中关闭<samp>Makefile.in</samp> s，除非<var>default-mode</var>是' <samp>enable</samp> '。此宏定义了<code>MAINTAINER_MODE</code>有条件的，可以自己使用<samp>Makefile.am</samp> 。请参阅<a href="#maintainer_002dmode">维护者模式</a> 。
</p>
</dd>
<dt><code>AM_SUBST_NOTMAKE(<var>var</var>)</code>
<a name="index-AM_005fSUBST_005fNOTMAKE_0028var_0029"></a>
</dt>
<dd><p>阻止自动制作定义变量<var>var</var> ，即使被取代<code>config.status</code> 。通常，Automake会定义<code>make</code>每个变量<code>configure</code>替代，即每个<code>AC_SUBST([<var>var</var>])</code> 。此宏可防止Automake使用该定义。如果<code>AC_SUBST</code>尚未为此变量调用，则<code>AM_SUBST_NOTMAKE</code>没有影响。防止变量定义对于替换多行值可能有用，其中<code><var>var</var> = @<var>value</var>@</code>可能会产生意想不到的结果。
</p>
</dd>
<dt><code>m4_include</code>
<a name="index-m4_005finclude-1"></a>
</dt>
<dd><p>包含的文件<samp>configure.ac</samp> Automake会检测到使用此宏的对象并自动对其进行分发。它们也将作为依赖项出现在<samp>Makefile</samp>规则。
</p>
<p><code>m4_include</code>很少被<samp>configure.ac</samp>作者，但可以出现在<samp>aclocal.m4</samp>什么时候<code>aclocal</code>检测到某些必需的宏来自于程序包本地的文件（与安装在系统范围目录中的宏相反，请参见<a href="#aclocal-Invocation">aclocal Invocation</a> ）。
</p>
</dd>
</dl>

<hr>
<a name="aclocal-Invocation"></a>
<div class="header">
<p>下一个： <a href="#Macros" rel="next" accesskey="n">宏</a> ，上一个： <a href="#Optional" rel="prev" accesskey="p">可选</a> ，上： <a href="#configure" rel="up" accesskey="u">配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Auto_002dgenerating-aclocal_002em4"></a>
<h3 class="section">6.3自动生成aclocal.m4</h3>
<a name="Invoking-aclocal"></a>
<a name="index-Invocation-of-aclocal"></a>
<a name="index-aclocal_002c-Invocation"></a>
<a name="index-Invoking-aclocal"></a>
<a name="index-aclocal_002c-Invoking"></a>

<p>Automake包含许多可以在包中使用的Autoconf宏（请参见<a href="#Macros">Macros</a> ）；在某些情况下，Automake实际上需要其中的一些。这些宏必须在您的<samp>aclocal.m4</samp> ;否则它们将不会被看到<code>autoconf</code> 。
</p>
<p>的<code>aclocal</code>程序将自动生成<samp>aclocal.m4</samp>文件的内容基于<samp>configure.ac</samp> 。这提供了获取Automake提供的宏的便捷方法，而无需四处搜索。的<code>aclocal</code>该机制允许其他程序包提供自己的宏（请参阅<a href="#Extending-aclocal">扩展aclocal</a> ）。您还可以使用它来维护自己的一组自定义宏（请参见<a href="#Local-Macros">Local Macros</a> ）。
</p>
<p>在启动时， <code>aclocal</code>扫描所有<samp>.m4</samp>它可以找到的文件，寻找宏定义（请参阅“ <a href="#Macro-Search-Path">宏搜索路径”</a> ）。然后扫描<samp>configure.ac</samp> 。第一步中提到的任何一个宏都将导致该宏及其相应的宏被放入<samp>aclocal.m4</samp> 。
</p>
<p><em>将</em>包含宏定义的文件放入<samp>aclocal.m4</samp>通常是通过复制此文件的整个文本来完成的，包括未使用的宏定义以及“ <samp>#</samp> '和' <samp>dnl</samp> ' 评论。如果您想发表评论，而该评论将被完全忽略<code>aclocal</code> ， 使用 ' <samp>##</samp> ”作为评论负责人。
</p>
<p>当一个文件被选择<code>aclocal</code>位于指定为相对搜索路径的子目录中<code>aclocal</code>的<samp>-I</samp>论据<code>aclocal</code>假设该文件属于该软件包并使用<code>m4_include</code>而不是将其复制到<samp>aclocal.m4</samp> 。这使程序包更小，简化了依赖性跟踪，并使文件自动分发。（有关示例，请参见<a href="#Local-Macros">Local Macros</a> 。）在系统范围的目录中或通过绝对搜索路径找到的任何宏都将被复制。因此使用“ <samp>-I `pwd`/reldir</samp> ' 代替 ' <samp>-I reldir</samp> '应该在软件包外部考虑某些相对目录时使用。
</p>
<p>内容<samp>acinclude.m4</samp> ，如果此文件存在，也会自动包含在<samp>aclocal.m4</samp> 。我们建议不要使用<samp>acinclude.m4</samp>在新程序包中（请参阅<a href="#Local-Macros">Local Macros</a> ）。
</p>
<a name="index-AUTOM4TE"></a>
<a name="index-autom4te"></a>
<p>在计算时<samp>aclocal.m4</samp> ， <code>aclocal</code>运行<code>autom4te</code> （请参阅<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Using-autom4te">使用<code>Autom4te</code></a>在<cite>《 Autoconf手册》中</cite> ），以跟踪实际使用的宏，并从中省略<samp>aclocal.m4</samp>提及的所有宏，但未展开（如果有条件地调用宏，则可能会发生）。 <code>autom4te</code>预计会在<code>PATH</code> ， 就像<code>autoconf</code> 。可以使用以下命令覆盖其位置<code>AUTOM4TE</code>环境变量。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#aclocal-Options" accesskey="1">aclocal选项</a> ：</td><td>  </td><td align="left" valign="top">aclocal支持的选项</td></tr>
<tr><td align="left" valign="top">• <a href="#Macro-Search-Path" accesskey="2">宏搜索路径</a> ：</td><td>  </td><td align="left" valign="top">aclocal如何查找.m4文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Extending-aclocal" accesskey="3">扩展aclocal</a> ：</td><td>  </td><td align="left" valign="top">编写自己的aclocal宏</td></tr>
<tr><td align="left" valign="top">• <a href="#Local-Macros" accesskey="4">本地宏</a> ：</td><td>  </td><td align="left" valign="top">组织本地宏</td></tr>
<tr><td align="left" valign="top">• <a href="#Serials" accesskey="5">序列号</a> ：</td><td>  </td><td align="left" valign="top">Autoconf宏中的串行线</td></tr>
<tr><td align="left" valign="top">• <a href="#Future-of-aclocal" accesskey="6">aclocal的未来</a> ：</td><td>  </td><td align="left" valign="top">aclocal的预定死亡</td></tr>
</tbody></table>

<hr>
<a name="aclocal-Options"></a>
<div class="header">
<p>下一篇： <a href="#Macro-Search-Path" rel="next" accesskey="n">宏搜索路径</a> ，上一篇： <a href="#aclocal-Invocation" rel="up" accesskey="u">aclocal调用</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="aclocal-Options-1"></a>
<h4 class="subsection">6.3.1 aclocal选项</h4>

<a name="index-aclocal_002c-Options"></a>
<a name="index-Options_002c-aclocal"></a>

<p><code>aclocal</code>接受以下选项：</p>
<dl compact>
<dt><code>--automake-acdir=<var>dir</var></code></dt>
<dd><a name="index-_002d_002dautomake_002dacdir"></a>
<p>在以下位置查找自动制作提供的宏文件<var>dir</var>而不是安装目录中。通常用于调试。
</p>
<a name="index-ACLOCAL_005fAUTOMAKE_005fDIR"></a>
<p>环境变量<code>ACLOCAL_AUTOMAKE_DIR</code>提供了另一种设置目录的方法，该目录包含自动提供的宏文件。然而<samp>--automake-acdir</samp>优先于它。
</p>
</dd>
<dt><code>--system-acdir=<var>dir</var></code></dt>
<dd><a name="index-_002d_002dsystem_002dacdir"></a>
<p>查找系统范围内的第三方宏文件（以及特殊的<samp>dirlist</samp>文件） <var>dir</var>而不是安装目录中。通常用于调试。
</p>
</dd>
<dt><code>--diff[=<var>command</var>]</code></dt>
<dd><a name="index-_002d_002ddiff"></a>
<p>跑<var>command</var>在将要安装或覆盖的M4文件上<samp>--install</samp> 。默认值<var>command</var>是' <samp>diff -u</samp> '。此选项暗示<samp>--install</samp>和<samp>--dry-run</samp> 。
</p>
</dd>
<dt><code>--dry-run</code></dt>
<dd><a name="index-_002d_002ddry_002drun"></a>
<p>实际不覆盖（或创建） <samp>aclocal.m4</samp>和安装的M4文件<samp>--install</samp> 。
</p>
</dd>
<dt><code>--help</code></dt>
<dd><a name="index-_002d_002dhelp-1"></a>
<p>打印命令行选项摘要并退出。
</p>
</dd>
<dt><code>-I <var>dir</var></code></dt>
<dd><a name="index-_002dI"></a>
<p>添加目录<var>dir</var>到搜索的目录列表<samp>.m4</samp>文件。
</p>
</dd>
<dt><code>--install</code></dt>
<dd><a name="index-_002d_002dinstall"></a>
<p>将系统范围的第三方宏安装到由'指定的第一个目录中<samp>-I <var>dir</var></samp> '，而不是将其复制到输出文件中。请注意，如果<var>dir</var>是一条绝对的道路。
</p>
<a name="index-serial-number-and-_002d_002dinstall"></a>
<p>使用此选项时，并且仅当使用此选项时， <code>aclocal</code>也将荣誉<samp>#serial <var>number</var></samp> “出现在宏行：如果存在具有相同基本名称的另一个M4文件，并在搜索路径更大序列号的M4文件被忽略（见<a href="#Serials">序列号</a> ）。
</p>
</dd>
<dt><code>--force</code></dt>
<dd><a name="index-_002d_002dforce"></a>
<p>始终覆盖输出文件。默认设置是仅在真正需要时覆盖输出文件，即，当其内容更改或其中一个依赖项较年轻时。
</p>
<p>此选项强制更新<samp>aclocal.m4</samp> （或用指定的文件<samp>--output</samp>下面）和仅此文件，它对可能需要安装的文件绝对没有影响<samp>--install</samp> 。
</p>
</dd>
<dt><code>--output=<var>file</var></code></dt>
<dd><a name="index-_002d_002doutput"></a>
<p>使输出被放入<var>file</var>代替<samp>aclocal.m4</samp> 。
</p>
</dd>
<dt><code>--print-ac-dir</code></dt>
<dd><a name="index-_002d_002dprint_002dac_002ddir"></a>
<p>打印以下目录的名称<code>aclocal</code>将搜索以查找第三方<samp>.m4</samp>文件。给出此选项时，将抑制正常处理。第三方软件包<em>过去</em>曾使用此选项来确定安装位置<samp>.m4</samp>宏文件，但<em>今天不建议使用此</em>文件，因为它会导致“ <samp>$(prefix)</samp> '不能被完全尊重（这违反了GNU编码标准），并且类似的语义可以通过<code>ACLOCAL_PATH</code>环境变量请参阅<a href="#Extending-aclocal">扩展aclocal</a> 。
</p>
</dd>
<dt><code>--verbose</code></dt>
<dd><a name="index-_002d_002dverbose-1"></a>
<p>打印它检查的文件的名称。
</p>
</dd>
<dt><code>--version</code></dt>
<dd><a name="index-_002d_002dversion-1"></a>
<p>打印Automake的版本号并退出。
</p>
</dd>
<dt><code>-W CATEGORY</code></dt>
<dt><code>--warnings=<var>category</var></code></dt>
<dd><a name="index-_002dW-1"></a>
<a name="index-_002d_002dwarnings-1"></a>
<p>输出警告进入<var>category</var> 。 <var>category</var>可以是以下之一：</p><dl compact>
<dt><code>syntax</code></dt>
<dd><p>可疑的语法结构，带引号的宏，未使用的宏等。</p></dd>
<dt><code>unsupported</code></dt>
<dd><p>未知的巨集</p></dd>
<dt><code>all</code></dt>
<dd><p>所有警告，这是默认设置</p></dd>
<dt><code>none</code></dt>
<dd><p>关闭所有警告</p></dd>
<dt><code>error</code></dt>
<dd><p>将警告视为错误</p></dd>
</dl>

<p>默认情况下将输出所有警告。
</p>
<a name="index-WARNINGS-1"></a>
<p>环境变量<code>WARNINGS</code>被尊敬的方式与<code>automake</code> （请参见<a href="#automake-Invocation">automake调用</a> ）。
</p>
</dd>
</dl>

<hr>
<a name="Macro-Search-Path"></a>
<div class="header">
<p>下一篇： <a href="#Extending-aclocal" rel="next" accesskey="n">扩展aclocal</a> ，上一篇： <a href="#aclocal-Options" rel="prev" accesskey="p">aclocal选项</a> ，上一篇： <a href="#aclocal-Invocation" rel="up" accesskey="u">aclocal调用</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Macro-Search-Path-1"></a>
<h4 class="subsection">6.3.2宏搜索路径</h4>

<a name="index-Macro-search-path"></a>
<a name="index-aclocal-search-path"></a>

<p>默认， <code>aclocal</code>搜索<samp>.m4</samp>文件按以下顺序位于以下目录中：</p>
<dl compact>
<dt><code><var>acdir-APIVERSION</var></code></dt>
<dd><p>这是<samp>.m4</samp>存储与Automake本身一起分发的宏。 <var>APIVERSION</var>取决于使用的Automake版本；例如，对于Automake 1.11.x， <var>APIVERSION</var> = <code>1.11</code> 。
</p>
</dd>
<dt><code><var>acdir</var></code></dt>
<dd><p>此目录供第三方使用<samp>.m4</samp>文件，并在以下时间配置<code>automake</code>本身是建造的。这是<samp>@datadir@/aclocal/</samp> ，通常会扩展为<samp>${prefix}/share/aclocal/</samp> 。找出的内建值<var>acdir</var> ， 使用<samp>--print-ac-dir</samp>选项（请参阅<a href="#aclocal-Options">aclocal选项</a> ）。
</p></dd>
</dl>

<p>例如，假设<code>automake-1.11.2</code>配置了<samp>--prefix=/usr/local</samp> 。然后，搜索路径将是：</p>
<ol>
<li> <samp>/usr/local/share/aclocal-1.11.2/</samp>
</li><li> <samp>/usr/local/share/aclocal/</samp>
</li></ol>

<p>的路径<var>acdir</var>和<var>acdir-APIVERSION</var>可以通过aclocal选项分别更改目录<samp>--system-acdir</samp>和<samp>--automake-acdir</samp> （请参阅<a href="#aclocal-Options">aclocal选项</a> ）。但是请注意，这些选项仅供内部Automake测试套件使用，或用于在非常特殊的情况下进行调试；最终用户通常不需要它们。
</p>
<p>如（在<a href="#aclocal-Options">aclocal选项中</a> ）中所述，有几个选项可用于更改或扩展此搜索路径。
</p>
<a name="Modifying-the-Macro-Search-Path_003a-_002dI-dir"></a>
<h4 class="subsubheading">修改宏搜索路径： <samp>-I <var>dir</var></samp> '</h4>

<p>使用指定的任何其他目录<samp>-I</samp>选项（请参阅<a href="#aclocal-Options">aclocal选项</a> ）位于此搜索列表的<em>前面</em> 。因此， <samp>aclocal -I /foo -I /bar</samp> '产生以下搜索路径：</p>
<ol>
<li> <samp>/foo</samp>
</li><li> <samp>/bar</samp>
</li><li> <var>acdir</var> -- <var>APIVERSION</var>
</li><li> <var>acdir</var>
</li></ol>

<a name="Modifying-the-Macro-Search-Path_003a-dirlist"></a>
<h4 class="subsubheading">修改宏搜索路径：<samp>dirlist</samp></h4>
<a name="index-dirlist"></a>

<p>第三种机制可以自定义搜索路径。如果一个<samp>dirlist</samp>文件存在于<var>acdir</var> ，则假定该文件包含目录模式列表，每行一个。<code>aclocal</code>将这些模式扩展为目录名称，并将它们添加到所有其他目录<em>之后</em>的搜索列表中。 <samp>dirlist</samp>条目可以使用shell通配符，例如“ <samp>*</samp> '，' <samp>?</samp> '， 要么<code>[...]</code> 。
</p>
<p>例如，假设<samp><var>acdir</var>/dirlist</samp>包含以下内容：</p>
<div class="example">
<pre class="example">/test1
/test2
/test3*
</pre></div>

<p>然后<code>aclocal</code>被称为“ <samp>-I /foo -I /bar</samp>选项。然后，搜索路径为</p>
<ol>
<li> <code>/foo</code>
</li><li> <code>/bar</code>
</li><li> <var>acdir</var> -- <var>APIVERSION</var>
</li><li> <var>acdir</var>
</li><li> <code>/test1</code>
</li><li> <code>/test2</code>
</li></ol>

<p>以及所有路径名称以开头的目录<code>/test3</code> 。
</p>
<p>如果<samp>--system-acdir=<var>dir</var></samp>使用选项，然后<code>aclocal</code>将搜索<samp>dirlist</samp>归档在<var>dir</var> ;但请记住上述警告，禁止使用<samp>--system-acdir</samp> 。
</p>
<p><samp>dirlist</samp>在以下情况下很有用：假设<code>automake</code>版<code>1.11.2</code>已安装“ <samp>--prefix=/usr</samp>由系统供应商提供。因此，默认搜索目录为</p>
<ol>
<li> <code>/usr/share/aclocal-1.11/</code>
</li><li> <code>/usr/share/aclocal/</code>
</li></ol>

<p>但是，进一步假设，通常已经使用$ prefix = / usr / local在系统上手动安装了许多软件包。在这种情况下，其中许多“额外” <samp>.m4</samp>文件在<samp>/usr/local/share/aclocal</samp> 。强制的唯一方法<samp>/usr/bin/aclocal</samp>找到这些“额外” <samp>.m4</samp>文件是要始终调用“ <samp>aclocal -I /usr/local/share/aclocal</samp> '。这很不方便。用<samp>dirlist</samp> ，可能会创建一个文件<samp>/usr/share/aclocal/dirlist</samp>仅包含单行</p>
<div class="example">
<pre class="example">/usr/local/share/aclocal
</pre></div>

<p>现在，受影响系统上的“默认”搜索路径为</p>
<ol>
<li> <code>/usr/share/aclocal-1.11/</code>
</li><li> <code>/usr/share/aclocal/</code>
</li><li> <code>/usr/local/share/aclocal/</code>
</li></ol>

<p>不需要<samp>-I</samp>选项; <samp>-I</samp>可以为项目特定需求保留选项（ <samp>my-source-dir/m4/</samp> ），而不是使用它来解决与本地系统相关的工具安装目录。
</p>
<p>同样， <samp>dirlist</samp>如果您在帐户中安装了Automake的本地副本，并且想要<code>aclocal</code>查找安装在系统其他位置的宏。
</p>
<a name="ACLOCAL_005fPATH"></a><a name="Modifying-the-Macro-Search-Path_003a-ACLOCAL_005fPATH"></a>
<h4 class="subsubheading">修改宏搜索路径：<samp>ACLOCAL_PATH</samp></h4>
<a name="index-ACLOCAL_005fPATH"></a>

<p>定制宏搜索路径的第四个也是最后一个机制也是最简单的。用冒号分隔的环境变量中包含的任何目录<code>ACLOCAL_PATH</code>被添加到搜索路径，并且优先于系统目录（包括通过<samp>dirlist</samp> ），版本化目录除外<var>acdir-APIVERSION</var> （请参阅<a href="#Macro-Search-Path">宏搜索路径</a> ）。但是，目录通过<samp>-I</samp>将优先于目录<code>ACLOCAL_PATH</code> 。
</p>
<p>另请注意，如果<samp>--install</samp>使用选项，任何<samp>.m4</samp>包含所需宏的文件，该宏可在以下目录中找到<code>ACLOCAL_PATH</code>将在本地安装。在这种情况下，序列号<samp>.m4</samp>也很荣幸，请参见<a href="#Serials">连续出版物</a> 。
</p>
<p>相反地<samp>dirlist</samp> ， <code>ACLOCAL_PATH</code>如果您正在使用Automake的全局副本并且需要<code>aclocal</code>在主目录下的某个位置查找宏。
</p>
<a name="Planned-future-incompatibilities"></a>
<h4 class="subsubheading">计划未来的不兼容性</h4>

<p>当前在宏搜索路径中查找目录的顺序在各个方面都很混乱和/或次优，并且可能会在以后的Automake版本中更改。特别是目录<code>ACLOCAL_PATH</code>和<samp><var>acdir</var></samp>可能最终优先于<samp><var>acdir-APIVERSION</var></samp>和中的目录<samp><var>acdir</var>/dirlist</samp>可能最终优先于<samp><var>acdir</var></samp> 。<em>这可能是将来的不兼容性！</em>
</p>
<hr>
<a name="Extending-aclocal"></a>
<div class="header">
<p>下一篇： <a href="#Local-Macros" rel="next" accesskey="n">本地宏</a> ，上一篇： <a href="#Macro-Search-Path" rel="prev" accesskey="p">宏搜索路径</a> ，上一篇： <a href="#aclocal-Invocation" rel="up" accesskey="u">aclocal调用</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Writing-your-own-aclocal-macros"></a>
<h4 class="subsection">6.3.3编写自己的aclocal宏</h4>

<a name="index-aclocal_002c-extending"></a>
<a name="index-Extending-aclocal"></a>

<p>的<code>aclocal</code>程序没有任何宏的内置知识，因此很容易用自己的宏对其进行扩展。
</p>
<p>想要提供自己的Autoconf宏供其他程序使用的库可以使用此方法。例如， <code>gettext</code>图书馆提供了一个宏<code>AM_GNU_GETTEXT</code>任何使用以下软件包的软件包都应使用<code>gettext</code> 。安装库后，它将安装此宏，以便<code>aclocal</code>会找到它。
</p>
<p>宏文件的名称应以结尾<samp>.m4</samp> 。此类文件应安装在<samp>$(datadir)/aclocal</samp> 。这就像编写代码一样简单：</p>
<div class="example">
<pre class="example">aclocaldir = $(datadir)/aclocal
aclocal_DATA = mymacro.m4 myothermacro.m4
</pre></div>

<p>请使用<samp>$(datadir)/aclocal</samp> ，而不是基于“ <samp>aclocal --print-ac-dir</samp> '（有关参数，请参见“ <a href="#Hard_002dCoded-Install-Paths">硬编码安装路径”</a> ）。建议用户添加<samp>$(datadir)/aclocal</samp>目录到他的<code>ACLOCAL_PATH</code>变量（请参见<a href="#ACLOCAL_005fPATH">ACLOCAL_PATH</a> ），以便<code>aclocal</code>会发现<samp>.m4</samp>软件包自动安装的文件。
</p>
<p>宏文件应该用一系列正确的引号引起来<code>AC_DEFUN</code> （请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Macro-Definitions">宏定义</a> ）。的<code>aclocal</code>程序也了解<code>AC_REQUIRE</code> （请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Prerequisite-Macros">先决条件宏</a> ），因此可以安全地将每个宏放在单独的文件中。每个文件都不应有副作用，而是宏定义。特别是任何<code>AC_PREREQ</code>应该在定义的宏内完成，而不是在文件开头。
</p>
<a name="index-underquoted-AC_005fDEFUN"></a>
<a name="index-AC_005fDEFUN"></a>
<a name="index-AC_005fPREREQ"></a>

<p>从Automake 1.8开始， <code>aclocal</code>会警告所有对以下内容的引用不足的电话<code>AC_DEFUN</code> 。我们意识到这会惹恼很多人，因为<code>aclocal</code>过去不太严格，许多第三方宏的引用不足。对于由此给您带来的不便，我们深表歉意。我们必须更加严格的原因是， <code>aclocal</code> （请参阅<a href="#Future-of-aclocal">aclocal的未来</a> ）必须暂时包括所有这些第三方<samp>.m4</samp>文件，可能几次，甚至包括实际上不需要的文件。这样做可以减轻当前实现的许多问题，但是需要宏作者采用更严格的样式。希望很容易修改现有的宏。例如，</p>
<div class="example">
<pre class="example"># bad style
AC_PREREQ(2.68)
AC_DEFUN(AX_FOOBAR,
[AC_REQUIRE([AX_SOMETHING])dnl
AX_FOO
AX_BAR
])
</pre></div>

<p>应该改写为</p>
<div class="example">
<pre class="example">AC_DEFUN([AX_FOOBAR],
[AC_PREREQ([2.68])dnl
AC_REQUIRE([AX_SOMETHING])dnl
AX_FOO
AX_BAR
])
</pre></div>

<p>包装<code>AC_PREREQ</code>在宏内调用可确保在以下情况下不需要Autoconf 2.68 <code>AX_FOOBAR</code>实际不使用。最重要的是，引用第一个论点<code>AC_DEFUN</code>允许宏重新定义或包含两次（否则，第一个参数将在第二个定义期间扩展）。为了保持一致，我们甚至引用诸如<code>2.68</code>不需要它。
</p>
<p>如果您是由<code>aclocal</code>诊断性的，但不是相关宏的维护者，则需要与该宏的维护者联系。请确保您具有最新版本的宏，并且尚未报告此问题，然后再进行报告：当人们不被邮件淹没时，人们的工作速度往往会更快。
</p>
<p>另一种情况<code>aclocal</code>通常用于管理程序包<a href="#Local-Macros">Local Locals</a>在<a href="#Local-Macros">本地使用的宏</a> 。
</p>
<hr>
<a name="Local-Macros"></a>
<div class="header">
<p>下一篇： <a href="#Serials" rel="next" accesskey="n">序列号</a> ，上一篇： <a href="#Extending-aclocal" rel="prev" accesskey="p">扩展aclocal</a> ，上一篇： <a href="#aclocal-Invocation" rel="up" accesskey="u">aclocal调用</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Handling-Local-Macros"></a>
<h4 class="subsection">6.3.4处理本地宏</h4>

<p>Autoconf提供的功能测试不能满足所有需求。人们通常不得不用自己的宏或第三方宏来补充现有的测试。
</p>
<p>有两种方法可以在程序包中组织自定义宏。
</p>
<p>第一种可能性（历史做法）是列出您所有的宏<samp>acinclude.m4</samp> 。该文件将包含在<samp>aclocal.m4</samp>当你跑步时<code>aclocal</code> ，此后它的宏将对<code>autoconf</code> 。但是，如果包含大量宏，它将很快变得难以维护，并且几乎不可能在软件包之间共享宏。
</p>
<p>我们建议的第二种可能性是将每个宏写入其自己的文件，并将所有这些文件收集在目录中。该目录通常称为<samp>m4/</samp> 。然后就足以更新<samp>configure.ac</samp>通过添加适当的调用<code>AC_CONFIG_MACRO_DIRS</code> ：</p>
<div class="example">
<pre class="example">AC_CONFIG_MACRO_DIRS([m4])
</pre></div>

<p><code>aclocal</code>然后会照顾自动添加<samp>m4/</samp>到m4文件的搜索路径。
</p>
<p>什么时候 ' <samp>aclocal</samp> '运行，它将建立一个<samp>aclocal.m4</samp>那<code>m4_include</code>来自的任何文件<samp>m4/</samp>定义必需的宏。如<a href="#Macro-Search-Path">宏搜索路径中</a>所述，仍将在系统范围的目录中搜索在本地找不到的<a href="#Macro-Search-Path">宏</a> 。
</p>
<p>出于以下原因，应该分发自定义宏： <samp>configure.ac</samp>是：这样，其他人就可以使用您的软件包的所有源代码。实际上，这种分布是自动发生的，因为<code>m4_include</code> d个文件已分发。
</p>
<p>但是，对于您的程序包可能使用的第三方宏的分布尚无共识。许多库在系统范围内安装自己的宏<code>aclocal</code>目录（请参阅<a href="#Extending-aclocal">扩展aclocal</a> ）。例如，Guile附带了一个名为<samp>guile.m4</samp>包含宏<code>GUILE_FLAGS</code>可以用来定义适合使用Guile的设置编译器和链接器标志。使用<code>GUILE_FLAGS</code>在<samp>configure.ac</samp>会引发<code>aclocal</code>复制<samp>guile.m4</samp>进入<samp>aclocal.m4</samp> ，但<samp>guile.m4</samp>不是项目的一部分，因此不会分发。从技术上讲，这意味着需要重建的用户<samp>aclocal.m4</samp>将必须先安装Guile。如果Guile已经是构建软件包的要求，这可能就可以了。但是，如果Guile只是一项可选功能，或者您的软件包可能在无法安装Guile的体系结构上运行，则此要求将阻碍开发。一个简单的解决方案是在本地复制此类第三方宏<samp>m4/</samp>目录，以便它们被分发。
</p>
<p>自Automake 1.10起， <code>aclocal</code>提供选项<code>--install</code>将这些系统范围的第三方宏复制到本地宏目录中，有助于解决上述问题。
</p>
<p>使用此设置，系统范围的宏将复制到<samp>m4/</samp>第一次跑步<code>aclocal</code> 。然后，本地安装的宏每次都会优先于系统范围内安装的宏<code>aclocal</code>再次运行。
</p>
<p>你应该保持的原因之一<samp>--install</samp>在标志中，即使在第一次运行之后，是当您稍后编辑时<samp>configure.ac</samp>并依赖于新的宏，该宏将安装在您的<samp>m4/</samp>自动。另一个问题是，在安装新的系统范围的版本时，可以使用序列号（请参阅<a href="#Serials">Serials</a> ）自动更新源树中的宏。序列号应为表格的一行</p>
<div class="example">
<pre class="example">#serial <var>nnn</var>
</pre></div>

<p>哪里<var>nnn</var>仅包含数字和点。它应该出现在M4文件中的任何宏定义之前。即使您不使用该宏，也要为分配的每个宏维护一个序列号。 <samp>--install</samp>的选择<code>aclocal</code> ：这允许其他人使用它。
</p>

<hr>
<a name="Serials"></a>
<div class="header">
<p>下一篇： <a href="#Future-of-aclocal" rel="next" accesskey="n">aclocal的未来</a> ，上一篇： <a href="#Local-Macros" rel="prev" accesskey="p">本地宏</a> ，上一篇： <a href="#aclocal-Invocation" rel="up" accesskey="u">aclocal调用</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Serial-Numbers"></a>
<h4 class="subsection">6.3.5序列号</h4>
<a name="index-serial-numbers-in-macros"></a>
<a name="index-macro-serial-numbers"></a>
<a name="index-_0023serial-syntax"></a>
<a name="index-aclocal-and-serial-numbers"></a>

<p>因为第三方宏在<samp>*.m4</samp>文件自然在多个项目之间共享，有些人喜欢对其进行版本控制。这样可以更轻松地分辨出两个M4文件中的哪个是较新的。至少从1996年开始，传统上一直在使用“ <samp>#serial</samp> '为此。
</p>
<p>序列号应为表格的一行</p>
<div class="example">
<pre class="example"># serial <var>version</var>
</pre></div>

<p>哪里<var>version</var>是仅包含数字和点的版本号。通常，人们使用单个整数，并且每次更改宏时都将其递增（因此，其名称为“ serial”）。这样的行应该在任何宏定义之前出现在M4文件中。
</p>
<p>' <samp>#</samp> '必须是该行的第一个字符，并且版本之后可以有多余的单词，例如</p>
<div class="example">
<pre class="example">#serial <var>version</var> <var>garbage</var>
</pre></div>

<p>通常，这些序列号会被忽略<code>aclocal</code>和<code>autoconf</code> ，就像任何真正的评论一样。但是当使用<code>aclocal</code>的<samp>--install</samp>功能，这些序列号将修改方式<code>aclocal</code>选择要安装在软件包中的宏：如果搜索路径中存在两个具有相同基本名称的文件，并且其中至少有一个使用' <samp>#serial</samp> '行， <code>aclocal</code>将忽略具有较旧的' <samp>#serial</samp> '行（或没有文件的文件）。
</p>
<p>请注意，序列号适用于整个M4文件，而不适用于它包含的任何宏。一个文件可以包含多个宏，但只能包含一个串行。
</p>
<p>这是一个用例，说明了<samp>--install</samp>及其与序列号的交互假设我们维护一个名为MyPackage的软件包， <samp>configure.ac</samp>其中需要第三方宏<code>AX_THIRD_PARTY</code>定义于<samp>/usr/share/aclocal/thirdparty.m4</samp>如下：</p>
<div class="example">
<pre class="example"># serial 1
AC_DEFUN([AX_THIRD_PARTY], [...])
</pre></div>

<p>MyPackage使用<samp>m4/</samp>如<a href="#Local-Macros">Local Macros中所述</a> ，用于存储本地宏的目录，并具有</p>
<div class="example">
<pre class="example">AC_CONFIG_MACRO_DIRS([m4])
</pre></div>

<p>在其<samp>configure.ac</samp> 。
</p>
<p>最初<samp>m4/</samp>目录为空。我们第一次跑步<code>aclocal --install</code> ，它会注意到</p>
<ul>
<li> <samp>configure.ac</samp>用途<code>AX_THIRD_PARTY</code>
</li><li>没有本地宏定义<code>AX_THIRD_PARTY</code>
</li><li> <samp>/usr/share/aclocal/thirdparty.m4</samp>定义<code>AX_THIRD_PARTY</code>与序列号1。
</li></ul>

<p>因为<samp>/usr/share/aclocal/thirdparty.m4</samp>是系统范围的宏， <code>aclocal</code>被给予<samp>--install</samp>选项，它将复制该文件到<samp>m4/thirdparty.m4</samp> ，并输出一个<samp>aclocal.m4</samp>包含“ <samp>m4_include([m4/thirdparty.m4])</samp> '。
</p>
<p>下一次 ' <samp>aclocal --install</samp> '运行时，发生了一些不同的事情。 <code>aclocal</code>注意到</p>
<ul>
<li> <samp>configure.ac</samp>用途<code>AX_THIRD_PARTY</code>
</li><li> <samp>m4/thirdparty.m4</samp>定义<code>AX_THIRD_PARTY</code>与序列号1。
</li><li> <samp>/usr/share/aclocal/thirdparty.m4</samp>定义<code>AX_THIRD_PARTY</code>与序列号1。
</li></ul>

<p>由于两个文件的序列号相同， <code>aclocal</code>使用按其搜索路径顺序找到的第一个（请参阅“ <a href="#Macro-Search-Path">宏搜索路径”</a> ）。 <code>aclocal</code>因此忽略<samp>/usr/share/aclocal/thirdparty.m4</samp>并输出一个<samp>aclocal.m4</samp>包含“ <samp>m4_include([m4/thirdparty.m4])</samp> '。
</p>
<p>指定的本地目录<samp>-I</samp>总是在系统范围的目录之前进行搜索，因此在序列号相同的情况下，本地文件始终比系统范围的文件优先。
</p>
<p>现在，假设系统范围内的第三方宏已更改。如果更新了安装此宏的程序包，则会发生这种情况。假设新宏的序列号为2。下一次 ' <samp>aclocal --install</samp> '正在运行的情况如下：</p>
<ul>
<li> <samp>configure.ac</samp>用途<code>AX_THIRD_PARTY</code>
</li><li> <samp>m4/thirdparty.m4</samp>定义<code>AX_THIRD_PARTY</code>与序列号1。
</li><li> <samp>/usr/share/aclocal/thirdparty.m4</samp>定义<code>AX_THIRD_PARTY</code>带序列号2。
</li></ul>

<p>什么时候<code>aclocal</code>如果看到一个更大的序列号，它会立即忘记从具有相同基名和一个较小序列号的文件中得知的所有信息。所以找到之后<samp>/usr/share/aclocal/thirdparty.m4</samp>使用序列号2 <code>aclocal</code>会像从未见过一样继续进行<samp>m4/thirdparty.m4</samp> 。这使我们回到与示例开头相似的情况，其中没有本地文件定义该宏。 <code>aclocal</code>将在以下位置安装新版本的宏<samp>m4/thirdparty.m4</samp> ，在这种情况下，将覆盖旧版本。MyPackage刚刚对其宏进行了更新，作为运行的副作用<code>aclocal</code> 。
</p>
<p>如果你对租车持怀疑态度<code>aclocal</code>更新您的本地宏，您可以运行“ <samp>aclocal --diff</samp> “查看更改” <samp>aclocal --install</samp> '将在这些宏上执行。
</p>
<p>最后，请注意<samp>--force</samp>的选择<code>aclocal</code>绝对不会影响安装的文件<samp>--install</samp> 。例如，如果您修改了本地宏，不要指望<samp>--install --force</samp>用其系统范围的版本替换本地宏。如果要这样做，只需清除要还原的本地宏，然后运行“ <samp>aclocal --install</samp> '。
</p>

<hr>
<a name="Future-of-aclocal"></a>
<div class="header">
<p>上一页： <a href="#Serials" rel="prev" accesskey="p">序列号</a> ，上： <a href="#aclocal-Invocation" rel="up" accesskey="u">aclocal调用</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-Future-of-aclocal"></a>
<h4 class="subsection">6.3.6的未来<code>aclocal</code></h4>
<a name="index-aclocal_0027s-scheduled-death"></a>

<p><code>aclocal</code>预计会消失。Automake确实不应该提供此功能。自动制作应专注于生成<samp>Makefile</samp> s;处理M4宏确实是Autoconf的工作。有些人安装Automake只是为了使用<code>aclocal</code> ，但不要使用<code>automake</code>否则表明该功能的放置位置不正确。
</p>
<p>新的实现可能会略有不同。例如，它可以强制执行<samp>m4/</samp> <a href="#Local-Macros">局部宏中</a>讨论的样式布局。
</p>
<p>我们不知道何时以及如何发生。过去已经对此进行了多次讨论，但是仍然有人必须致力于这项艰巨的任务。
</p>
<p>从用户的角度来看， <code>aclocal</code>的删除可能会很痛苦。您可以采取一个简单的预防措施来使该开关更加无缝：从不致电<code>aclocal</code>你自己将此人置于独家控制之下<code>autoreconf</code>以及Automake的重建规则。希望您不必担心什么时候会发生问题<code>aclocal</code>消失了，因为一切都会得到照顾。否则你曾经打电话<code>aclocal</code>直接您自己或从某些脚本中，您将很快注意到更改。
</p>
<p>许多软件包都带有一个名为<samp>bootstrap</samp>要么<samp>autogen.sh</samp> ，那只会<code>aclocal</code> ， <code>libtoolize</code> ， <code>gettextize</code>要么<code>autopoint</code> ， <code>autoconf</code> ， <code>autoheader</code>和<code>automake</code>以正确的顺序。其实这就是<code>autoreconf</code>可以为你做。如果您的包裹有这样的<samp>bootstrap</samp>要么<samp>autogen.sh</samp>脚本，请考虑使用<code>autoreconf</code> 。那应该大大简化其逻辑（需要维护的东西少一些，好吧！），甚至可能您将不再需要该脚本，甚至更不用说了<code>aclocal</code>直接。
</p>
<p>目前，第三方软件包应继续将公共宏安装到<samp>/usr/share/aclocal/</samp> 。如果<code>aclocal</code>被另一种工具代替，可能会重命名目录，但支持<samp>/usr/share/aclocal/</samp>如果正确编写了所有宏，则向后兼容应该非常容易（请参阅<a href="#Extending-aclocal">扩展aclocal</a> ）。
</p>


<hr>
<a name="Macros"></a>
<div class="header">
<p>上<a href="#aclocal-Invocation" rel="prev" accesskey="p">一篇</a> ： <a href="#aclocal-Invocation" rel="prev" accesskey="p">aclocal调用</a> ，上<a href="#aclocal-Invocation" rel="prev" accesskey="p">一篇</a> ： <a href="#configure" rel="up" accesskey="u">配置</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Autoconf-macros-supplied-with-Automake"></a>
<h3 class="section">6.4 Automake随附的Autoconf宏</h3>

<p>Automake附带了几个Autoconf宏，您可以在其中使用<samp>configure.ac</samp> 。当您使用其中之一时， <code>aclocal</code>在<samp>aclocal.m4</samp> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Public-Macros" accesskey="1">公共宏</a> ：</td><td>  </td><td align="left" valign="top">您可以使用的宏。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Obsolete-Macros" accesskey="2">过时的宏</a> ：</td><td>  </td><td align="left" valign="top">不久将被删除的宏。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Private-Macros" accesskey="3">专用宏</a> ：</td><td>  </td><td align="left" valign="top">您不应该使用的宏。
</td></tr>
</tbody></table>


<hr>
<a name="Public-Macros"></a>
<div class="header">
<p>下一页： <a href="#Obsolete-Macros" rel="next" accesskey="n">过时的宏</a> ，上一篇： <a href="#Macros" rel="up" accesskey="u">宏</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Public-Macros-1"></a>
<h4 class="subsection">6.4.1公共宏</h4>

<dl compact>
<dt><code>AM_INIT_AUTOMAKE([OPTIONS])</code></dt>
<dd><a name="index-AM_005fINIT_005fAUTOMAKE-1"></a>
<p>运行生成的Makefile的正确操作所需的许多宏。
</p>
<a name="index-AUTOMAKE_005fOPTIONS"></a>
<p>今天， <code>AM_INIT_AUTOMAKE</code>使用单个参数调用：以空格分隔的Automake选项列表，应将其应用于每个<samp>Makefile.am</samp>在树上。效果就像每个选项都列在<code>AUTOMAKE_OPTIONS</code> （请参阅<a href="#Options">选项</a> ）。
</p>
<a name="index-AC_005fINIT"></a>
<p>也可以以另一种<em>不推荐使用的</em>形式调用此宏： <code>AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])</code> 。在此格式中，有两个必需的参数：程序包和版本号。这种用法通常已经过时，因为<var>package</var>和<var>version</var>可以从Autoconf的<code>AC_INIT</code>宏。但是，与发生的情况不同<code>AC_INIT</code>调用，这个<code>AM_INIT_AUTOMAKE</code>调用支持shell变量在<code>PACKAGE</code>和<code>VERSION</code>参数（否则分别默认为<code>PACKAGE_TARNAME</code>和<code>PACKAGE_VERSION</code>通过定义<code>AC_INIT</code>调用看<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#AC_005fINIT">的<code>AC_INIT</code></a> <cite>Autoconf手册中的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#AC_005fINIT">宏</a> ）；在某些特定情况下这仍然很有用。我们希望将来的Autoconf版本将改善对配置运行时动态定义的程序包版本的支持。当（如果发生）这种情况时，支持两个参数<code>AM_INIT_AUTOMAKE</code>调用可能会从Automake中删除。
</p>
<a name="Modernize-AM_005fINIT_005fAUTOMAKE-invocation"></a><p>如果你的<samp>configure.ac</samp>拥有：</p>
<div class="example">
<pre class="example">AC_INIT([src/foo.c])
AM_INIT_AUTOMAKE([mumble], [1.5])
</pre></div>

<p>您应该对其进行如下现代化：</p>
<div class="example">
<pre class="example">AC_INIT([mumble], [1.5])
AC_CONFIG_SRCDIR([src/foo.c])
AM_INIT_AUTOMAKE
</pre></div>

<p>请注意，如果您要升级<samp>configure.ac</samp>在较早版本的Automake中，仅将包和版本参数从<code>AM_INIT_AUTOMAKE</code>直接到<code>AC_INIT</code> ，如上例所示。第一个论点<code>AC_INIT</code>应该是您包裹的名称（例如，“ <samp>GNU Automake</samp> '），而不是tarball名称（例如' <samp>automake</samp> '），您过去曾传递给<code>AM_INIT_AUTOMAKE</code> 。Autoconf尝试从程序包名称派生一个tarball名称，该名称应适用于大多数但并非所有程序包名称。（如果对您不起作用，则可以使用以下四个参数的形式： <code>AC_INIT</code>以明确提供tarball名称）。
</p>
<a name="index-PACKAGE_002c-prevent-definition"></a>
<a name="index-VERSION_002c-prevent-definition"></a>
<a name="index-no_002ddefine"></a>
<p>默认情况下，此宏<code>AC_DEFINE</code>的<code>PACKAGE</code>和<code>VERSION</code> 。可以通过传递<samp>no-define</samp>选项（请参见<a href="#List-of-Automake-options">Automake选项列表</a> ）：</p><div class="example">
<pre class="example">AM_INIT_AUTOMAKE([no-define ...])
</pre></div>

</dd>
<dt><code>AM_PATH_LISPDIR</code></dt>
<dd><a name="index-AM_005fPATH_005fLISPDIR"></a>
<a name="index-EMACS"></a>
<a name="index-lispdir"></a>
<p>搜索程序<code>emacs</code> ，如果找到，则设置输出变量<code>lispdir</code>到Emacs的site-lisp目录的完整路径。
</p>
<p>请注意，此测试假设<code>emacs</code>被发现是支持Emacs Lisp的版本（例如GNU Emacs或XEmacs）。其他emacsen可能导致该测试挂起（某些版本（例如旧版本的MicroEmacs）以交互模式启动，要求<kbd>C-x C-c</kbd>退出，对于非emacs用户而言几乎不明显）。但是，在大多数情况下，您应该可以使用<kbd>C-c</kbd>杀死测试。为了避免出现问题，可以设置<code>EMACS</code>在环境中“否”，或使用<samp>--with-lispdir</samp>选择<code>configure</code>明确设置正确的路径（如果您确定自己有<code>emacs</code>支持Emacs Lisp）。
</p>
</dd>
<dt><code>AM_PROG_AR(<span class="roman">[</span><var>act-if-fail</var><span class="roman">]</span>)</code></dt>
<dd><a name="index-AM_005fPROG_005fAR"></a>
<a name="index-AR"></a>
<p>如果要支持不寻常的归档器（例如Microsoft），则在项目中使用归档器时必须使用此宏。 <code>lib</code> 。如果未识别存档器接口，则执行可选参数的内容；否则，将执行可选参数的内容。默认操作是通过错误消息中止配置。
</p>
</dd>
<dt><code>AM_PROG_AS</code></dt>
<dd><a name="index-AM_005fPROG_005fAS"></a>
<a name="index-CCAS"></a>
<a name="index-CCASFLAGS"></a>
<p>当项目中有汇编代码时，请使用此宏。这将为您选择汇编器（默认为C编译器）并进行设置<code>CCAS</code> ，并且还会设置<code>CCASFLAGS</code>如果需要的话。
</p>
</dd>
<dt><code>AM_PROG_CC_C_O</code></dt>
<dd><a name="index-AM_005fPROG_005fCC_005fC_005fO"></a>
<p>这是一个过时的宏，用于检查C编译器是否支持<samp>-c</samp>和<samp>-o</samp>选项在一起。请注意，自Automake 1.14起， <code>AC_PROG_CC</code>被重写以实现此类检查本身，因此明确使用<code>AM_PROG_CC_C_O</code>不再需要。
</p>
</dd>
<dt><code>AM_PROG_LEX</code></dt>
<dd><a name="index-AM_005fPROG_005fLEX"></a>
<a name="index-AC_005fPROG_005fLEX"></a>
<a name="index-HP_002dUX-10_002c-lex-problems"></a>
<a name="index-lex-problems-with-HP_002dUX-10"></a>
<p>喜欢<code>AC_PROG_LEX</code> （请参阅<cite>Autoconf手册</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> <cite>”</cite> ），但使用<code>missing</code>没有系统的脚本<code>lex</code> 。HP-UX 10就是这样一种系统。
</p>
</dd>
<dt><code>AM_PROG_GCJ</code></dt>
<dd><a name="index-AM_005fPROG_005fGCJ"></a>
<a name="index-GCJ"></a>
<a name="index-GCJFLAGS"></a>
<p>这个宏找到<code>gcj</code>程序或导致错误。它设置<code>GCJ</code>和<code>GCJFLAGS</code> 。 <code>gcj</code>是GNU编译器集合的Java前端。
</p>
</dd>
<dt><code>AM_PROG_UPC([<var>compiler-search-list</var>])</code></dt>
<dd><a name="index-AM_005fPROG_005fUPC"></a>
<a name="index-UPC"></a>
<p>查找Unified Parallel C的编译器并定义<code>UPC</code>变量。默认值<var>compiler-search-list</var>是' <samp>upcc upc</samp> '。该宏将中止<code>configure</code>如果未找到Unified Parallel C编译器。
</p>
</dd>
<dt><code>AM_MISSING_PROG(<var>name</var>, <var>program</var>)</code></dt>
<dd><a name="index-AM_005fMISSING_005fPROG"></a>
<a name="index-MISSING"></a>
<p>查找维护工具<var>program</var>并定义<var>name</var>环境变量及其位置。如果<var>program</var>未检测到，则<var>name</var>而是调用<code>missing</code>脚本，以便向用户提供有关缺少的维护工具的有用建议。有关何时执行以下操作的更多信息，请参见<a href="#maintainer_002dmode">维护者模式</a> 。 <code>missing</code>脚本是合适的。
</p>
</dd>
<dt><code>AM_SILENT_RULES</code></dt>
<dd><a name="index-AM_005fSILENT_005fRULES"></a>
<p>控制机器以减少冗长的构建输出（请参见<a href="#Automake-Silent-Rules">Automake Silent Rules</a> ）。
</p>
</dd>
<dt><code>AM_WITH_DMALLOC</code></dt>
<dd><a name="index-AM_005fWITH_005fDMALLOC"></a>
<a name="index-dmalloc_002c-support-for"></a>
<a name="index-WITH_005fDMALLOC"></a>
<a name="index-_002d_002dwith_002ddmalloc"></a>
<p>添加对<a href="http://dmalloc.com/">Dmalloc包的</a>支持。如果用户运行<code>configure</code>与<samp>--with-dmalloc</samp> ，然后定义<code>WITH_DMALLOC</code>并添加<samp>-ldmalloc</samp>至<code>LIBS</code> 。
</p>
</dd>
</dl>


<hr>
<a name="Obsolete-Macros"></a>
<div class="header">
<p>下一篇： <a href="#Private-Macros" rel="next" accesskey="n">私有宏</a> ，上一篇： <a href="#Public-Macros" rel="prev" accesskey="p">公共宏</a> ，上一篇： <a href="#Macros" rel="up" accesskey="u">宏</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Obsolete-Macros-1"></a>
<h4 class="subsection">6.4.2过时的宏</h4>
<a name="index-obsolete-macros"></a>
<a name="index-autoupdate"></a>

<p>尽管在以前的发行版中需要使用以下某些宏，但您不应在新代码中使用其中的任何宏。<em>所有这些宏将在下一个主要的Automake版本中删除</em> ;如果您仍在使用它们，请运行<code>autoupdate</code>应该调整你的<samp>configure.ac</samp>自动（请参阅<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#autoupdate-Invocation">使用<code>autoupdate</code>现代化<samp>configure.ac</samp></a>在<cite>Autoconf手册中</cite> ）。
<em>现在做！</em>
</p>
<dl compact>
<dt><code>AM_PROG_MKDIR_P</code></dt>
<dd><a name="index-AM_005fPROG_005fMKDIR_005fP"></a>
<a name="index-mkdir-_002dp_002c-macro-check"></a>
<a name="index-MKDIR_005fP"></a>
<a name="index-mkdir_005fp"></a>

<p>从Automake 1.8到1.9.6，此宏用于定义输出变量<code>mkdir_p</code>到其中之一<code>mkdir -p</code> ， <code>install-sh -d</code> ， 要么<code>mkinstalldirs</code> 。
</p>
<p>如今，Autoconf提供了与<code>AC_PROG_MKDIR_P</code> （请参阅<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> <cite>”</cite> ），但这定义了输出变量<code>MKDIR_P</code>代替。如果您仍在使用<code>AM_PROG_MKDIR_P</code>您的宏<samp>configure.ac</samp> ，或其提供的变量<code>$(mkdir_p)</code>在你的<samp>Makefile.am</samp> ，建议您尽快切换到更现代的Autoconf提供的界面；在以后的主要Automake版本中，宏和变量都可能会被删除。
</p>
</dd>
</dl>


<hr>
<a name="Private-Macros"></a>
<div class="header">
<p>上一页： <a href="#Obsolete-Macros" rel="prev" accesskey="p">过期的宏</a> ，向上： <a href="#Macros" rel="up" accesskey="u">宏</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Private-Macros-1"></a>
<h4 class="subsection">6.4.3专用宏</h4>

<p>以下宏是不应该直接调用的私有宏。适当时，其他公共宏也会调用它们。不要依赖它们，因为它们可能会在将来的版本中进行更改。将它们视为实施细节；甚至更好，根本不要考虑它们：跳过此部分！
</p>
<dl compact>
<dt><code>_AM_DEPENDENCIES</code>
<a name="index-_005fAM_005fDEPENDENCIES"></a>
</dt>
<dt><code>AM_SET_DEPDIR</code>
<a name="index-AM_005fSET_005fDEPDIR"></a>
</dt>
<dt><code>AM_DEP_TRACK</code>
<a name="index-AM_005fDEP_005fTRACK"></a>
</dt>
<dt><code>AM_OUTPUT_DEPENDENCY_COMMANDS</code>
<a name="index-AM_005fOUTPUT_005fDEPENDENCY_005fCOMMANDS"></a>
</dt>
<dd><p>这些宏用于实现Automake的自动依赖项跟踪方案。必要时，它们将由Automake自动调用，并且无需手动调用它们。
</p>
</dd>
<dt><code>AM_MAKE_INCLUDE</code>
<a name="index-AM_005fMAKE_005fINCLUDE"></a>
</dt>
<dd><p>此宏用于发现用户的<code>make</code>处理<code>include</code>陈述。需要时会自动调用此宏。无需手动调用它。
</p>
</dd>
<dt><code>AM_PROG_INSTALL_STRIP</code>
<a name="index-AM_005fPROG_005fINSTALL_005fSTRIP"></a>
</dt>
<dd><p>这是用来查找的版本<code>install</code>可以在安装时剥离程序。需要时会自动包含此宏。
</p>
</dd>
<dt><code>AM_SANITY_CHECK</code>
<a name="index-AM_005fSANITY_005fCHECK"></a>
</dt>
<dd><p>这将检查以确保在构建目录中创建的文件比源目录中的文件新。在时钟设置不正确的系统上，这可能会失败。该宏会自动从<code>AM_INIT_AUTOMAKE</code> 。
</p>
</dd>
</dl>


<hr>
<a name="Directories"></a>
<div class="header">
<p>下一页： <a href="#Programs" rel="next" accesskey="n">程序</a> ，上一页： <a href="#configure" rel="prev" accesskey="p">配置</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Directories-1"></a>
<h2 class="chapter">7目录</h2>

<p>对于将所有文件分发到同一目录中的简单项目，只需一个文件就足够了<samp>Makefile.am</samp>一切就位。
</p>
<p>在较大的项目中，通常将树中不同目录中的文件组织起来。例如，可能有一个目录用于程序源，一个目录用于测试对象，一个目录用于文档。或者，对于大型项目，每个程序，每个库或每个模块可能只有一个目录。
</p>
<p>传统方法是使用<em>make recursion递归</em>地构建这些子目录：每个目录都包含自己的目录<samp>Makefile</samp> ， 什么时候<code>make</code>从顶层目录运行，依次进入每个子目录，并在其中调用新的<code>make</code>实例来构建目录的内容。
</p>
<p>因为这种方法非常普遍，所以Automake为此提供了内置支持。但是，使用make递归有其自身的严重问题和弊端是毫无价值的，而且很可能使带有多目录布局的软件包很少使用或根本不使用此类递归（此类软件包的示例为GNU Bison和GNU Automake本身）；另请参见下面的<a href="#Alternative">替代</a>部分。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Subdirectories" accesskey="1">子目录</a> ：</td><td>  </td><td align="left" valign="top">递归建立子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Subdirectories" accesskey="2">条件子目录</a> ：</td><td>  </td><td align="left" valign="top">有条件不建立目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Alternative" accesskey="3">替代方案</a> ：</td><td>  </td><td align="left" valign="top">没有递归的子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Subpackages" accesskey="4">分包</a> ：</td><td>  </td><td align="left" valign="top">套料包装</td></tr>
</tbody></table>

<hr>
<a name="Subdirectories"></a>
<div class="header">
<p>下一篇： <a href="#Conditional-Subdirectories" rel="next" accesskey="n">条件子目录</a> ，上一篇： <a href="#Directories" rel="up" accesskey="u">目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Recursing-subdirectories"></a>
<h3 class="section">7.1递归子目录</h3>

<a name="index-SUBDIRS_002c-explained"></a>

<p>在使用make递归的软件包中，顶层<samp>Makefile.am</samp>必须告诉Automake要构建哪些子目录。这是通过<code>SUBDIRS</code>变量。
<a name="index-SUBDIRS"></a>
</p>
<p>的<code>SUBDIRS</code>变量包含一个子目录列表，在其中可以进行各种构建。许多目标的规则（例如， <code>all</code> ）中的<samp>Makefile</samp>将在本地和所有指定的子目录中运行命令。请注意，其中列出的目录<code>SUBDIRS</code>不需要包含<samp>Makefile.am</samp> s;只要<samp>Makefile</samp> s（配置后）。这允许包含不使用Automake的软件包中的库（例如<code>gettext</code> ;另请参见<a href="#Third_002dParty-Makefiles">第三方Makefiles</a> ）。
</p>
<p>在使用子目录的程序包中，顶层<samp>Makefile.am</samp>通常很短。例如，这是<samp>Makefile.am</samp>来自GNU Hello发行版：</p>
<div class="example">
<pre class="example">EXTRA_DIST = BUGS ChangeLog.O README-alpha
SUBDIRS = doc intl po src tests
</pre></div>

<p>Automake调用时<code>make</code>在子目录中，它使用<code>MAKE</code>变量。它传递变量的值<code>AM_MAKEFLAGS</code>到<code>make</code>调用这可以设置在<samp>Makefile.am</samp>如果有标志，您必须始终传递给<code>make</code> 。
<a name="index-MAKE"></a>
<a name="index-AM_005fMAKEFLAGS"></a>
</p>
<p>提到的目录<code>SUBDIRS</code>通常是当前目录的直接子目录，每个子目录都包含自己的子目录<samp>Makefile.am</samp>与一个<code>SUBDIRS</code>指向更深的子目录。Automake可用于以这种方式构造任意深度的软件包。
</p>
<p>默认情况下，Automake生成<samp>Makefiles</samp>以后缀顺序按深度优先的顺序工作：子目录在当前目录之前构建。但是，可以更改此顺序。您可以通过将“ <samp>.</samp> '成<code>SUBDIRS</code> 。例如，将“ <samp>.</samp> '首先将导致目录的前缀排序。
</p>
<p>使用</p>
<div class="example">
<pre class="example">SUBDIRS = lib src . test
</pre></div>

<p>会引发<samp>lib/</samp>之前要建造<samp>src/</samp> ，则将构建当前目录，最后是<samp>test/</samp>目录将被建立。通常将测试目录安排在其他所有目录之后，因为它们旨在测试已构建的目录。
</p>
<p>除了由Automake定义的内置递归目标（ <code>all</code> ， <code>check</code>等），开发人员还可以定义自己的递归目标。这是通过将这些目标的名称作为参数传递给m4宏来完成的<code>AM_EXTRA_RECURSIVE_TARGETS</code>在<samp>configure.ac</samp> 。Automake生成规则来处理此类目标的递归；开发人员可以通过定义相应的<code>-local</code>目标。
</p>
<div class="example">
<pre class="example">% <kbd>cat configure.ac</kbd>
AC_INIT([pkg-name], [1.0]
AM_INIT_AUTOMAKE
AM_EXTRA_RECURSIVE_TARGETS([foo])
AC_CONFIG_FILES([Makefile sub/Makefile sub/src/Makefile])
AC_OUTPUT
% <kbd>cat Makefile.am</kbd>
SUBDIRS = sub
foo-local:
        @echo This will be run by &quot;make foo&quot;.
% <kbd>cat sub/Makefile.am</kbd>
SUBDIRS = src
% <kbd>cat sub/src/Makefile.am</kbd>
foo-local:
        @echo This too will be run by a &quot;make foo&quot; issued either in
        @echo the 'sub/src/' directory, the 'sub/' directory, or the
        @echo top-level directory.
</pre></div>

<hr>
<a name="Conditional-Subdirectories"></a>
<div class="header">
<p>下一个： <a href="#Alternative" rel="next" accesskey="n">替代</a> ，上一个： <a href="#Subdirectories" rel="prev" accesskey="p">子目录</a> ，上： <a href="#Directories" rel="up" accesskey="u">目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Conditional-Subdirectories-1"></a>
<h3 class="section">7.2条件子目录</h3>
<a name="index-Subdirectories_002c-building-conditionally"></a>
<a name="index-Conditional-subdirectories"></a>
<a name="index-SUBDIRS_002c-conditional"></a>
<a name="index-Conditional-SUBDIRS"></a>

<p>可以定义<code>SUBDIRS</code>如果像GNU Inetutils一样只想构建整个包的一个子集，则可以有条件地将其设置为变量。
</p>
<p>为了说明它是如何工作的，我们假设我们有两个目录<samp>src/</samp>和<samp>opt/</samp> 。 <samp>src/</samp>应该总是建立，但我们要决定<code>configure</code>是否<samp>opt/</samp>是否会建立。（对于此示例，我们假设<samp>opt/</samp>应该在变量' <samp>$want_opt</samp> “设置为” <samp>yes</samp> '。）
</p>
<p>跑步<code>make</code>因此应该递归为<samp>src/</samp>总是，然后也许<samp>opt/</samp> 。
</p>
<p>但是， <samp>make dist</samp> '应该总是递归到两者<samp>src/</samp>和<samp>opt/</samp> 。因为<samp>opt/</samp>即使当前配置中不需要它，也应将其分发。这意味着<samp>opt/Makefile</samp>应该<em>无条件</em>创建。
</p>
<p>可以使用两种方法来设置这样的项目。您可以使用Automake条件句（请参阅<a href="#Conditionals">条件</a>句）或使用Autoconf <code>AC_SUBST</code>变量（请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Setting-Output-Variables">设置输出变量</a> <cite>”</cite> ）。使用Automake条件句是首选解决方案。在说明这两种可能性之前，让我们介绍一下<code>DIST_SUBDIRS</code> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#SUBDIRS-vs-DIST_005fSUBDIRS" accesskey="1">SUBDIRS与DIST_SUBDIRS</a> ：</td><td>  </td><td align="left" valign="top">两组目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Subdirectories-with-AM_005fCONDITIONAL" accesskey="2">带有AM_CONDITIONAL的子目录</a> ：</td><td>  </td><td align="left" valign="top">指定条件子目录</td></tr>
<tr><td align="left" valign="top">• <a href="#Subdirectories-with-AC_005fSUBST" accesskey="3">具有AC_SUBST的子目录</a> ：</td><td>  </td><td align="left" valign="top">条件递归的另一种方式</td></tr>
<tr><td align="left" valign="top">•未<a href="#Unconfigured-Subdirectories" accesskey="4">配置的子目录</a> ：</td><td>  </td><td align="left" valign="top">甚至没有创建“ <samp>Makefile</samp> '</td></tr>
</tbody></table>

<hr>
<a name="SUBDIRS-vs-DIST_005fSUBDIRS"></a>
<div class="header">
<p>下一页： <a href="#Subdirectories-with-AM_005fCONDITIONAL" rel="next" accesskey="n">具有AM_CONDITIONAL的子目录</a> ，向上： <a href="#Conditional-Subdirectories" rel="up" accesskey="u">条件子目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="SUBDIRS-vs_002e-DIST_005fSUBDIRS"></a>
<h4 class="subsection">7.2.1 <code>SUBDIRS</code>与<code>DIST_SUBDIRS</code></h4>
<a name="index-DIST_005fSUBDIRS_002c-explained"></a>

<p>Automake考虑两组由变量定义的目录<code>SUBDIRS</code>和<code>DIST_SUBDIRS</code> 。
</p>
<p><code>SUBDIRS</code>包含必须构建的当前目录的子目录（请参见<a href="#Subdirectories">Subdirectories</a> ）。必须手动定义； Automake永远不会猜测要建立目录。正如我们将在接下来的两节中看到的那样，可以有条件地定义它，以便在构建中省略某些目录。
</p>
<p><code>DIST_SUBDIRS</code>用于需要在所有目录中递归的规则，即使是那些有条件地被排除在构建之外的规则。回想一下我们可能不想建立子目录的示例<samp>opt/</samp> ，但是我们要分发它吗？这是哪里<code>DIST_SUBDIRS</code>发挥作用：' <samp>opt</samp> '可能不会出现在<code>SUBDIRS</code> ，但必须出现在<code>DIST_SUBDIRS</code> 。
</p>
<p>恰好<code>DIST_SUBDIRS</code>由“ <samp>make maintainer-clean</samp> '，' <samp>make distclean</samp> '和' <samp>make dist</samp> '。所有其他递归规则使用<code>SUBDIRS</code> 。
</p>
<p>如果<code>SUBDIRS</code>是使用Automake条件句有条件定义的，Automake将定义<code>DIST_SUBDIRS</code>自动从的可能值<code>SUBDIRS</code>在所有情况下。
</p>
<p>如果<code>SUBDIRS</code>包含<code>AC_SUBST</code>变量<code>DIST_SUBDIRS</code>不会正确定义，因为Automake不知道这些变量的可能值。在这种情况下<code>DIST_SUBDIRS</code>需要手动定义。
</p>
<hr>
<a name="Subdirectories-with-AM_005fCONDITIONAL"></a>
<div class="header">
<p>下一个： <a href="#Subdirectories-with-AC_005fSUBST" rel="next" accesskey="n">具有AC_SUBST的子目录</a> ，上一个： <a href="#SUBDIRS-vs-DIST_005fSUBDIRS" rel="prev" accesskey="p">SUBDIRS与DIST_SUBDIRS</a> ，上： <a href="#Conditional-Subdirectories" rel="up" accesskey="u">有条件的子目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Subdirectories-with-AM_005fCONDITIONAL-1"></a>
<h4 class="subsection">7.2.2带有<code>AM_CONDITIONAL</code></h4>
<a name="index-SUBDIRS-and-AM_005fCONDITIONAL"></a>
<a name="index-AM_005fCONDITIONAL-and-SUBDIRS"></a>


<p><samp>configure</samp>应该输出<samp>Makefile</samp>为每个目录定义一个条件<samp>opt/</samp>应该建造。
</p>
<div class="example">
<pre class="example">&hellip;
AM_CONDITIONAL([COND_OPT], [test &quot;$want_opt&quot; = yes])
AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile])
&hellip;
</pre></div>

<p>然后<code>SUBDIRS</code>可以在顶层定义<samp>Makefile.am</samp>如下。
</p>
<div class="example">
<pre class="example">if COND_OPT
  MAYBE_OPT = opt
endif
SUBDIRS = src $(MAYBE_OPT)
</pre></div>

<p>如您所见，运行<code>make</code>将正确地递归到<samp>src/</samp>有可能<samp>opt/</samp> 。
</p>
<a name="index-DIST_005fSUBDIRS"></a>
<p>如您所见，运行“ <samp>make dist</samp> '将递归到两者<samp>src/</samp>和<samp>opt/</samp>目录，因为<samp>make dist</samp> '，与' <samp>make all</samp> '，不使用<code>SUBDIRS</code>变量。它使用<code>DIST_SUBDIRS</code>变量。
</p>
<p>在这种情况下，Automake将定义“ <samp>DIST_SUBDIRS = src opt</samp> '因为它知道<code>MAYBE_OPT</code>可以包含“ <samp>opt</samp>在某种情况下。
</p>
<hr>
<a name="Subdirectories-with-AC_005fSUBST"></a>
<div class="header">
<p>下一个：未<a href="#Unconfigured-Subdirectories" rel="next" accesskey="n">配置的子目录</a> ，上一个： <a href="#Subdirectories-with-AM_005fCONDITIONAL" rel="prev" accesskey="p">具有AM_CONDITIONAL的子目录</a> ，上： <a href="#Conditional-Subdirectories" rel="up" accesskey="u">有条件的子目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Subdirectories-with-AC_005fSUBST-1"></a>
<h4 class="subsection">7.2.3带有<code>AC_SUBST</code></h4>
<a name="index-SUBDIRS-and-AC_005fSUBST"></a>
<a name="index-AC_005fSUBST-and-SUBDIRS"></a>


<p>另一种可能性是定义<code>MAYBE_OPT</code>从<samp>./configure</samp>使用<code>AC_SUBST</code> ：</p>
<div class="example">
<pre class="example">&hellip;
if test &quot;$want_opt&quot; = yes; then
  MAYBE_OPT=opt
else
  MAYBE_OPT=
fi
AC_SUBST([MAYBE_OPT])
AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile])
&hellip;
</pre></div>

<p>在这种情况下，顶层<samp>Makefile.am</samp>应该看起来如下。
</p>
<div class="example">
<pre class="example">SUBDIRS = src $(MAYBE_OPT)
DIST_SUBDIRS = src opt
</pre></div>

<p>缺点是由于Automake无法猜测的可能值<code>MAYBE_OPT</code>是，有必要定义<code>DIST_SUBDIRS</code> 。
</p>
<hr>
<a name="Unconfigured-Subdirectories"></a>
<div class="header">
<p>上一页： <a href="#Subdirectories-with-AC_005fSUBST" rel="prev" accesskey="p">具有AC_SUBST的子目录</a> ，向上： <a href="#Conditional-Subdirectories" rel="up" accesskey="u">有条件的子目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Unconfigured-Subdirectories-1"></a>
<h4 class="subsection">7.2.4未配置的子目录</h4>
<a name="index-Subdirectories_002c-configured-conditionally"></a>

<p>的语义<code>DIST_SUBDIRS</code>经常被某些试图有条件地<em>配置和构建</em>子目录的用户误解。通过配置，我们的意思是创建<samp>Makefile</samp> （这也可能涉及运行嵌套<code>configure</code>脚本：这是一项费用很高的操作，它解释了为什么人们要有条件地这样做，但只有<samp>Makefile</samp>与讨论有关）。
</p>
<p>以上示例均假设<samp>Makefile</samp>即使在不打算建立的目录中也可以创建。原因很简单，我们想要“ <samp>make dist</samp> '甚至分发未构建的目录（例如，与平台相关的代码），因此<samp>make dist</samp>必须递归到子目录，因此必须配置此目录并出现在<code>DIST_SUBDIRS</code> 。
</p>
<p>构建不配置每个子目录的程序包是一件棘手的事，我们不建议新手使用它，因为很容易错误地生成不完整的tarball。我们不会在这里深入讨论这个主题，但是对于冒险的这里要记住一些规则。
</p>
<table class="cartouche" border="1"><tbody><tr><td>
<ul>
<li> <code>SUBDIRS</code>应该始终是<code>DIST_SUBDIRS</code> 。

<p>在其中建立目录几乎没有意义<code>SUBDIRS</code>那不在<code>DIST_SUBDIRS</code> 。将前者视为一种方法，该方法可以告诉您应构建后者中列出的目录。
</p></li><li>列出的任何目录<code>DIST_SUBDIRS</code>和<code>SUBDIRS</code>必须配置。

<p>即， <samp>Makefile</samp>必须存在或递归<code>make</code>规则将无法处理目录。
</p></li><li>任何配置的目录都必须在<code>DIST_SUBDIRS</code> 。

<p>以便清理规则删除生成的<samp>Makefile</samp> s。看到是正确的<code>DIST_SUBDIRS</code>作为列出所有已配置目录的变量。
</p></li></ul>
</td></tr></tbody></table>

<p>为了防止在某些未配置的目录中进行递归，因此必须确保该目录不会出现在<code>DIST_SUBDIRS</code> （和<code>SUBDIRS</code> ）。例如，如果您定义<code>SUBDIRS</code>有条件地使用<code>AC_SUBST</code>并没有定义<code>DIST_SUBDIRS</code>明确地，它将默认为' <samp>$(SUBDIRS)</samp> ';另一种可能性是强迫<code>DIST_SUBDIRS = $(SUBDIRS)</code> 。
</p>
<p>当然，从中省略的目录<code>DIST_SUBDIRS</code>除非您为此做出其他安排（例如，始终运行“ <samp>make dist</samp>在已知所有目录都出现在其中的配置中<code>DIST_SUBDIRS</code> ;或写一个<code>dist-hook</code>目标以分发这些目录）。
</p>
<a name="index-Subdirectories_002c-not-distributed"></a>
<p>在少数软件包中，甚至不希望分发未配置的目录。尽管这些软件包不需要上述额外的安排，但是还有另一个陷阱。如果目录名称出现在<code>SUBDIRS</code>要么<code>DIST_SUBDIRS</code> ， <code>automake</code>将确保目录存在。所以<code>automake</code>如果省略了一个目录，则无法在这种发行版上运行。避免进行此检查的一种方法是使用<code>AC_SUBST</code>声明条件目录的方法；以来<code>automake</code>不知道的价值<code>AC_SUBST</code>变量，它不能确保相应目录存在。
</p>
<hr>
<a name="Alternative"></a>
<div class="header">
<p>下一篇：子<a href="#Subpackages" rel="next" accesskey="n">包</a> ，上一篇： <a href="#Conditional-Subdirectories" rel="prev" accesskey="p">有条件的子目录</a> ，上一篇： <a href="#Directories" rel="up" accesskey="u">目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Alternative-Approach-to-Subdirectories"></a>
<h3 class="section">7.3子目录的替代方法</h3>

<p>如果您曾经阅读过Peter Miller的出色论文，《 <a href="http://miller.emu.id.au/pmiller/books/rmch/">递归使被认为有害》</a> ，前面有关使用make递归的部分可能会成为不受欢迎的建议。对于那些还没有读过这篇论文的人，米勒的主要论点是递归<code>make</code>调用既缓慢又容易出错。
</p>
<p>Automake提供了足够的跨目录支持<a name="DOCF2" href="#FOOT2"><sup>2</sup></a> ，使您可以编写单个<samp>Makefile.am</samp>用于复杂的多目录程序包。
</p>
<p>默认情况下，在子目录中指定的可安装文件在安装前将删除其目录名称。例如，在此示例中，头文件将安装为<samp>$(includedir)/stdio.h</samp> ：</p>
<div class="example">
<pre class="example">include_HEADERS = inc/stdio.h
</pre></div>

<a name="index-nobase_005f"></a>
<a name="index-nobase_005f-prefix"></a>
<a name="index-Path-stripping_002c-avoiding"></a>
<a name="index-Avoiding-path-stripping"></a>

<p>然而 ' <samp>nobase_</samp> '前缀可用于规避此路径剥离。在此示例中，头文件将安装为<samp>$(includedir)/sys/types.h</samp> ：</p>
<div class="example">
<pre class="example">nobase_include_HEADERS = sys/types.h
</pre></div>

<a name="index-nobase_005f-and-dist_005f-or-nodist_005f"></a>
<a name="index-dist_005f-and-nobase_005f"></a>
<a name="index-nodist_005f-and-nobase_005f"></a>
<a name="index-dist_005f"></a>
<a name="index-nodist_005f"></a>

<p>' <samp>nobase_</samp>与以下任何一个一起使用时，应首先指定“ <samp>dist_</samp> ' 要么 ' <samp>nodist_</samp> '（请参阅<a href="#Fine_002dgrained-Distribution-Control">细粒度的分发控制</a> ）。例如：</p>
<div class="example">
<pre class="example">nobase_dist_pkgdata_DATA = images/vortex.pgm sounds/whirl.ogg
</pre></div>

<p>最后，请注意，使用' <samp>nobase_</samp> '前缀通常可以用几个变量替换，每个目标目录一个（请参见<a href="#Uniform">Uniform</a> ）。例如，最后一个示例可以重写如下：</p>
<div class="example">
<pre class="example">imagesdir = $(pkgdatadir)/images
soundsdir = $(pkgdatadir)/sounds
dist_images_DATA = images/vortex.pgm
dist_sounds_DATA = sounds/whirl.ogg
</pre></div>

<p>后一种语法使更改一个目标目录成为可能，而无需更改源树的布局。
</p>
<p>目前， ' <samp>nobase_*_LTLIBRARIES</samp> '是此规则的唯一例外，因为对于没有'的其他等效变量集，没有特殊的安装顺序保证<samp>nobase_</samp> ' 字首。
</p>
<hr>
<a name="Subpackages"></a>
<div class="header">
<p>上一篇： <a href="#Alternative" rel="prev" accesskey="p">替代</a> ，上一篇： <a href="#Directories" rel="up" accesskey="u">目录</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Nesting-Packages"></a>
<h3 class="section">7.4嵌套包</h3>
<a name="index-Nesting-packages"></a>
<a name="index-Subpackages-1"></a>
<a name="index-AC_005fCONFIG_005fSUBDIRS"></a>
<a name="index-AC_005fCONFIG_005fAUX_005fDIR"></a>


<p>在GNU Build System中，包可以嵌套到任意深度。这意味着一个包可以嵌入其他包<samp>configure</samp> ， <samp>Makefile</samp> s等</p>
<p>这些其他程序包应仅作为其父程序包的子目录出现。它们必须列在<code>SUBDIRS</code>像其他普通目录一样。但是子包的<samp>Makefile</samp> s应该自己输出<samp>configure</samp>脚本，而不是由父母的<samp>configure</samp> 。这是通过使用<code>AC_CONFIG_SUBDIRS</code> Autoconf宏（请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Subdirectories">在子目录</a>中<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Subdirectories">配置其他软件包</a> <cite>”</cite> ）。
</p>
<p>这是一个<code>arm</code>与一个链接的程序<code>hand</code>库是子目录中的嵌套包<samp>hand/</samp> 。
</p>
<p><code>arm</code>的<samp>configure.ac</samp> ：</p>
<div class="example">
<pre class="example">AC_INIT([arm], [1.0])
AC_CONFIG_AUX_DIR([.])
AM_INIT_AUTOMAKE
AC_PROG_CC
AC_CONFIG_FILES([Makefile])
# Call hand's ./configure script recursively.
AC_CONFIG_SUBDIRS([hand])
AC_OUTPUT
</pre></div>

<p><code>arm</code>的<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example"># Build the library in the hand subdirectory first.
SUBDIRS = hand

# Include hand's header when compiling this directory.
AM_CPPFLAGS = -I$(srcdir)/hand

bin_PROGRAMS = arm
arm_SOURCES = arm.c
# link with the hand library.
arm_LDADD = hand/libhand.a
</pre></div>

<p>现在在这里<code>hand</code>的<samp>hand/configure.ac</samp> ：</p>
<div class="example">
<pre class="example">AC_INIT([hand], [1.2])
AC_CONFIG_AUX_DIR([.])
AM_INIT_AUTOMAKE
AC_PROG_CC
AM_PROG_AR
AC_PROG_RANLIB
AC_CONFIG_FILES([Makefile])
AC_OUTPUT
</pre></div>

<p>及其<samp>hand/Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">lib_LIBRARIES = libhand.a
libhand_a_SOURCES = hand.c
</pre></div>

<p>什么时候 ' <samp>make dist</samp>从顶层目录运行，它将创建一个存档<samp>arm-1.0.tar.gz</samp>包含<code>arm</code>代码以及<samp>hand</samp>子目录。该软件包可以像任何普通软件包一样进行构建和安装，通常使用“ <samp>./configure && make && make install</samp> '顺序（ <code>hand</code>子包将由该过程生成并安装）。
</p>
<p>什么时候 ' <samp>make dist</samp> '从hand目录运行，它将创建一个独立的<samp>hand-1.2.tar.gz</samp>存档。因此，尽管它似乎已嵌入另一个软件包中，但仍可以单独使用。
</p>
<p>'的目的<samp>AC_CONFIG_AUX_DIR([.])</samp> '指令是强制Automake和Autoconf在当前目录中搜索辅助脚本。例如，这意味着将有两个副本<samp>install-sh</samp> ：顶级的<code>arm</code>包中的另一个<samp>hand/</samp>的子目录<code>hand</code>包。
</p>
<p>历史默认值是在父目录和祖父母目录中搜索这些辅助脚本。因此，如果“ <samp>AC_CONFIG_AUX_DIR([.])</samp> '行已从中删除<samp>hand/configure.ac</samp> ，则该子包将共享<code>arm</code>包。这看起来像是大小的增加（几千字节），但实际上是模块化的损失，因为<code>hand</code>子包不再是独立的（' <samp>make dist</samp>子目录中的'将不再起作用）。
</p>
<p>不使用Automake的软件包需要更多工作才能通过这种方式进行集成。请参阅<a href="#Third_002dParty-Makefiles">第三方Makefile</a> 。
</p>
<hr>
<a name="Programs"></a>
<div class="header">
<p>下一个： <a href="#Other-Objects" rel="next" accesskey="n">其他对象</a> ，上一个： <a href="#Directories" rel="prev" accesskey="p">目录</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-Programs-and-Libraries"></a>
<h2 class="chapter">8建筑程序和图书馆</h2>

<p>Automake的大部分功能致力于简化程序和库的构建。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#A-Program" accesskey="1">一个程序</a> ：</td><td>  </td><td align="left" valign="top">建立程式</td></tr>
<tr><td align="left" valign="top">• <a href="#A-Library" accesskey="2">图书馆</a> ：</td><td>  </td><td align="left" valign="top">建立图书馆</td></tr>
<tr><td align="left" valign="top">• <a href="#A-Shared-Library" accesskey="3">共享库</a> ：</td><td>  </td><td align="left" valign="top">建立一个Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Program-and-Library-Variables" accesskey="4">程序和库变量</a> ：</td><td>  </td><td align="left" valign="top">控制程序和库构建的变量</td></tr>
<tr><td align="left" valign="top">• <a href="#Default-_005fSOURCES" accesskey="5">默认_SOURCES</a> ：</td><td>  </td><td align="left" valign="top">默认源文件</td></tr>
<tr><td align="left" valign="top">• <a href="#LIBOBJS" accesskey="6">LIBOBJS</a> ：</td><td>  </td><td align="left" valign="top">LIBOBJS和ALLOCA的特殊处理</td></tr>
<tr><td align="left" valign="top">• <a href="#Program-Variables" accesskey="7">程序变量</a> ：</td><td>  </td><td align="left" valign="top">构建程序时使用的变量</td></tr>
<tr><td align="left" valign="top">• <a href="#Yacc-and-Lex" accesskey="8">Yacc和Lex</a> ：</td><td>  </td><td align="left" valign="top">Yacc和Lex支持</td></tr>
<tr><td align="left" valign="top">• <a href="#C_002b_002b-Support" accesskey="9">C ++支持</a> ：</td><td>  </td><td align="left" valign="top">编译C ++源代码</td></tr>
<tr><td align="left" valign="top">• <a href="#Objective-C-Support">目标C支持</a> ：</td><td>  </td><td align="left" valign="top">编译目标C源</td></tr>
<tr><td align="left" valign="top">• <a href="#Objective-C_002b_002b-Support">目标C ++支持</a> ：</td><td>  </td><td align="left" valign="top">编译Objective C ++源代码</td></tr>
<tr><td align="left" valign="top">• <a href="#Unified-Parallel-C-Support">统一并行C支持</a> ：</td><td>  </td><td align="left" valign="top">编译Unified Parallel C源</td></tr>
<tr><td align="left" valign="top">• <a href="#Assembly-Support">装配支持</a> ：</td><td>  </td><td align="left" valign="top">编译汇编源</td></tr>
<tr><td align="left" valign="top">• <a href="#Fortran-77-Support">Fortran 77支持</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 77源</td></tr>
<tr><td align="left" valign="top">• <a href="#Fortran-9x-Support">Fortran 9x支持</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 9x源</td></tr>
<tr><td align="left" valign="top">• <a href="#Java-Support-with-gcj">gcj的Java支持</a> ：</td><td>  </td><td align="left" valign="top">使用gcj编译Java源代码</td></tr>
<tr><td align="left" valign="top">• <a href="#Vala-Support">Vala支持</a> ：</td><td>  </td><td align="left" valign="top">编译Vala源</td></tr>
<tr><td align="left" valign="top">• <a href="#Support-for-Other-Languages">支持其他语言</a> ：</td><td>  </td><td align="left" valign="top">编译其他语言</td></tr>
<tr><td align="left" valign="top">• <a href="#Dependencies">依赖关系</a> ：</td><td>  </td><td align="left" valign="top">自动依赖性跟踪</td></tr>
<tr><td align="left" valign="top">• <a href="#EXEEXT">EXEEXT</a> ：</td><td>  </td><td align="left" valign="top">支持可执行扩展</td></tr>
</tbody></table>


<hr>
<a name="A-Program"></a>
<div class="header">
<p>下一篇： <a href="#A-Library" rel="next" accesskey="n">图书馆</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-a-program"></a>
<h3 class="section">8.1编写程序</h3>

<p>为了构建程序，您需要告诉Automake程序中包含哪些源，以及应将其链接到哪些库。
</p>
<p>本节还介绍了源代码或程序的条件编译。关于这些的大多数注释也适用于库（请参阅<a href="#A-Library">A Library</a> ）和libtool库（请参阅<a href="#A-Shared-Library">A Shared Library</a> ）。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Program-Sources" accesskey="1">节目来源</a> ：</td><td>  </td><td align="left" valign="top">定义程序源</td></tr>
<tr><td align="left" valign="top">• <a href="#Linking" accesskey="2">链接</a> ：</td><td>  </td><td align="left" valign="top">链接库或其他对象</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Sources" accesskey="3">有条件的来源</a> ：</td><td>  </td><td align="left" valign="top">处理条件源</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Programs" accesskey="4">条件程序</a> ：</td><td>  </td><td align="left" valign="top">有条件地构建程序</td></tr>
</tbody></table>

<hr>
<a name="Program-Sources"></a>
<div class="header">
<p>下一页： <a href="#Linking" rel="next" accesskey="n">链接</a> ，上一页： <a href="#A-Program" rel="up" accesskey="u">一个程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Defining-program-sources"></a>
<h4 class="subsection">8.1.1定义程序源</h4>

<a name="index-PROGRAMS_002c-bindir"></a>
<a name="index-_005fPROGRAMS-1"></a>
<a name="index-bin_005fPROGRAMS"></a>
<a name="index-sbin_005fPROGRAMS"></a>
<a name="index-libexec_005fPROGRAMS"></a>
<a name="index-pkglibexec_005fPROGRAMS"></a>
<a name="index-noinst_005fPROGRAMS"></a>
<a name="index-check_005fPROGRAMS"></a>

<p>在包含内置到程序中的源的目录中（与库或脚本相对）， <code>PROGRAMS</code>主要使用。程序可以安装在<code>bindir</code> ， <code>sbindir</code> ， <code>libexecdir</code> ， <code>pkglibexecdir</code> ，或根本不（ <code>noinst_</code> ）。它们也只能为“ <samp>make check</samp> '，在这种情况下，前缀为' <samp>check_</samp> '。
</p>
<p>例如：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = hello
</pre></div>

<p>在这种简单情况下， <samp>Makefile.in</samp>将包含代码以生成名为<code>hello</code> 。
</p>
<p>与每个程序相关联的是几个以该程序命名的辅助变量。这些变量都是可选的，并且具有合理的默认值。每个变量，其用法和默认值如下所述；我们始终使用“ hello”示例。
</p>
<p>变量<code>hello_SOURCES</code>用于指定将哪些源文件内置到可执行文件中：</p>
<div class="example">
<pre class="example">hello_SOURCES = hello.c version.c getopt.c getopt1.c getopt.h system.h
</pre></div>

<p>这导致每个提到<samp>.c</samp>文件要编译成相应的<samp>.o</samp> 。然后将所有链接生成<samp>hello</samp> 。
</p>
<a name="index-_005fSOURCES-primary_002c-defined"></a>
<a name="index-SOURCES-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-SOURCES"></a>
<a name="index-_005fSOURCES"></a>

<p>如果<code>hello_SOURCES</code>未指定，则默认为单个文件<samp>hello.c</samp> （请参阅<a href="#Default-_005fSOURCES">默认_SOURCES</a> ）。
<a name="index-_005fSOURCES-1"></a>
<a name="index-SOURCES"></a>
</p>
<p>可以在一个目录中构建多个程序。多个程序可以共享一个源文件，每个源文件必须列出<code>_SOURCES</code>定义。
</p>
<a name="index-Header-files-in-_005fSOURCES"></a>
<a name="index-_005fSOURCES-and-header-files"></a>

<p>标头文件列在<code>_SOURCES</code>定义将包含在分发中，但其他情况下将被忽略。如果不太明显，则不应包含由生成的头文件<samp>configure</samp>在一个<code>_SOURCES</code>变量;此文件不应分发。Lex（ <samp>.l</samp> ）和Yacc（ <samp>.y</samp> ）文件也可以列出；参见<a href="#Yacc-and-Lex">Yacc和Lex</a> 。
</p>

<hr>
<a name="Linking"></a>
<div class="header">
<p>下一篇： <a href="#Conditional-Sources" rel="next" accesskey="n">有条件的源</a> ，上一篇： <a href="#Program-Sources" rel="prev" accesskey="p">程序源</a> ，上： <a href="#A-Program" rel="up" accesskey="u">一个程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Linking-the-program"></a>
<h4 class="subsection">8.1.2链接程序</h4>

<p>如果您需要链接到未找到的库<code>configure</code> ， 您可以使用<code>LDADD</code>这样做。此变量用于指定要链接的其他对象或库。指定特定的链接器标志是不合适的，您应该使用<code>AM_LDFLAGS</code>以此目的。
<a name="index-LDADD"></a>
<a name="index-AM_005fLDFLAGS"></a>
</p>
<a name="index-prog_005fLDADD_002c-defined"></a>

<p>有时，多个程序构建在一个目录中，但是没有共享相同的链接时间要求。在这种情况下，您可以使用<code><var>prog</var>_LDADD</code>变量（其中<var>prog</var>是在某些程序中显示的程序名称<code>_PROGRAMS</code>变量，通常用小写字母表示） <code>LDADD</code> 。如果给定程序存在此变量，则不会使用链接该程序<code>LDADD</code> 。
<a name="index-maude_005fLDADD"></a>
</p>
<p>例如，在GNU cpio中， <code>pax</code> ， <code>cpio</code>和<code>mt</code>链接到图书馆<samp>libcpio.a</samp> 。然而， <code>rmt</code>在同一目录中构建，并且没有此类链接要求。也， <code>mt</code>和<code>rmt</code>仅建立在某些架构上。这是cpio的<samp>src/Makefile.am</samp>看起来像（删节）：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = cpio pax $(MT)
libexec_PROGRAMS = $(RMT)
EXTRA_PROGRAMS = mt rmt

LDADD = ../lib/libcpio.a $(INTLLIBS)
rmt_LDADD =

cpio_SOURCES = &hellip;
pax_SOURCES = &hellip;
mt_SOURCES = &hellip;
rmt_SOURCES = &hellip;
</pre></div>

<a name="index-_005fLDFLAGS_002c-defined"></a>
<a name="index-maude_005fLDFLAGS"></a>
<p><code><var>prog</var>_LDADD</code>不适合传递程序特定的链接器标志（ <samp>-l</samp> ， <samp>-L</samp> ， <samp>-dlopen</samp>和<samp>-dlpreopen</samp> ）。因此，使用<code><var>prog</var>_LDFLAGS</code>为此目的的变量。
</p>
<a name="index-_005fDEPENDENCIES_002c-defined"></a>
<a name="index-maude_005fDEPENDENCIES"></a>
<a name="index-EXTRA_005fmaude_005fDEPENDENCIES"></a>
<p>有时，使程序依赖于某个实际上不是该程序一部分的其他目标也很有用。可以使用<code><var>prog</var>_DEPENDENCIES</code>或者<code>EXTRA_<var>prog</var>_DEPENDENCIES</code>变量。每个程序都取决于两个变量的内容，但是没有做进一步的解释。
</p>
<p>由于这些依赖项与用于创建程序的链接规则相关联，因此它们通常应列出link命令使用的文件。那是<samp>*.$(OBJEXT)</samp> ， <samp>*.a</samp> ， 要么<samp>*.la</samp>文件。在极少数情况下，您可能需要添加其他类型的文件，例如链接描述文件，但会<em>在<code>_DEPENDENCIES</code>是错误的</em> 。如果在构建程序的所有组件之前需要先构建一些源文件，请考虑使用<code>BUILT_SOURCES</code>而是使用变量（请参见<a href="#Sources">Sources</a> ）。
</p>
<p>如果<code><var>prog</var>_DEPENDENCIES</code>未提供，由Automake计算。自动分配的值是<code><var>prog</var>_LDADD</code> ，使用大多数配置替换项， <samp>-l</samp> ， <samp>-L</samp> ， <samp>-dlopen</samp>和<samp>-dlpreopen</samp>选项已删除。剩下的配置替换仅是' <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp> ';之所以保留这些值，是因为它们不会导致无效的值<code><var>prog</var>_DEPENDENCIES</code>被生成。
</p>
<p><a href="#Conditional-Sources">条件源</a>显示一种情况<code>_DEPENDENCIES</code>可能用过了。
</p>
<p>的<code>EXTRA_<var>prog</var>_DEPENDENCIES</code>在您只想增加<code>automake</code>产生的<code><var>prog</var>_DEPENDENCIES</code>而不是更换它。
</p>
<a name="index-LDADD-and-_002dl"></a>
<a name="index-_002dl-and-LDADD"></a>
<p>我们建议您避免使用<samp>-l</samp>在选项<code>LDADD</code>要么<code><var>prog</var>_LDADD</code>当指代您的程序包构建的库时。而是像上面一样显式地编写库的文件名<code>cpio</code>例。使用<samp>-l</samp>仅列出第三方库。如果遵循此规则，则默认值为<code><var>prog</var>_DEPENDENCIES</code>将列出您所有的本地图书馆，并省略其他图书馆。
</p>

<hr>
<a name="Conditional-Sources"></a>
<div class="header">
<p>下一个： <a href="#Conditional-Programs" rel="next" accesskey="n">条件程序</a> ，上一个： <a href="#Linking" rel="prev" accesskey="p">链接</a> ，上： <a href="#A-Program" rel="up" accesskey="u">一个程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Conditional-compilation-of-sources"></a>
<h4 class="subsection">8.1.3有条件的源汇编</h4>

<p>您不能放置配置替换项（例如，“ <samp>@FOO@</samp> ' 要么 ' <samp>$(FOO)</samp> '在哪里<code>FOO</code>通过定义<code>AC_SUBST</code> ）成<code>_SOURCES</code>变量。其原因有点难以解释，但足以说它根本行不通。如果尝试这样做，Automake将给出错误。
</p>
<p>幸运的是，还有两种其他方法可以达到相同的结果。一种是在<code>_LDADD</code>变量，另一种是使用Automake条件。
</p>
<a name="Conditional-Compilation-using-_005fLDADD-Substitutions"></a>
<h4 class="subsubheading">使用条件编译<code>_LDADD</code>换人</h4>

<a name="index-EXTRA_005fprog_005fSOURCES_002c-defined"></a>

<p>即使不是在每种情况下都构建所有文件，Automake也必须知道所有可能进入程序的源文件。任何仅有条件构建的文件都应在适当的位置列出<code>EXTRA_</code>变量。例如，如果<samp>hello-linux.c</samp>要么<samp>hello-generic.c</samp>被有条件地包括在<code>hello</code> ， <samp>Makefile.am</samp>将包含：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = hello
hello_SOURCES = hello-common.c
EXTRA_hello_SOURCES = hello-linux.c hello-generic.c
hello_LDADD = $(HELLO_SYSTEM)
hello_DEPENDENCIES = $(HELLO_SYSTEM)
</pre></div>

<p>然后，您可以设置“ <samp>$(HELLO_SYSTEM)</samp>从替代<samp>configure.ac</samp> ：</p>
<div class="example">
<pre class="example">&hellip;
case $host in
  *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;;
  *)       HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;;
esac
AC_SUBST([HELLO_SYSTEM])
&hellip;
</pre></div>

<p>在这种情况下，变量<code>HELLO_SYSTEM</code>应该替换为<samp>hello-linux.o</samp>要么<samp>hello-generic.o</samp> ，并添加到两者<code>hello_DEPENDENCIES</code>和<code>hello_LDADD</code>为了建立和链接。
</p>
<a name="Conditional-Compilation-using-Automake-Conditionals"></a>
<h4 class="subsubheading">使用Automake条件句进行条件编译</h4>

<p>有条件地编译源文件的一种通常更简单的方法是使用Automake条件。例如，您可以使用此<samp>Makefile.am</samp>构建相同的<samp>hello</samp>例：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = hello
if LINUX
hello_SOURCES = hello-linux.c hello-common.c
else
hello_SOURCES = hello-generic.c hello-common.c
endif
</pre></div>

<p>在这种情况下， <samp>configure.ac</samp>应该设置<code>LINUX</code>有条件的使用<code>AM_CONDITIONAL</code> （请参阅“ <a href="#Conditionals">条件”</a> ）。
</p>
<p>使用此类条件时，您无需使用<code>EXTRA_</code>变量，因为Automake将检查每个变量的内容以构造源文件的完整列表。
</p>
<p>如果您的程序使用了大量文件，则您可能会希望使用有条件的“ <samp>+=</samp> '。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = hello
hello_SOURCES = hello-common.c
if LINUX
hello_SOURCES += hello-linux.c
else
hello_SOURCES += hello-generic.c
endif
</pre></div>

<hr>
<a name="Conditional-Programs"></a>
<div class="header">
<p>上<a href="#A-Program" rel="up" accesskey="u">一篇</a> ： <a href="#Conditional-Sources" rel="prev" accesskey="p">有条件的资料</a> ，向上： <a href="#A-Program" rel="up" accesskey="u">一个程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Conditional-compilation-of-programs"></a>
<h4 class="subsection">8.1.4程序的条件编译</h4>
<a name="index-Conditional-programs"></a>
<a name="index-Programs_002c-conditional"></a>

<p>有时在配置时确定要构建的程序很有用。例如，GNU <code>cpio</code>只建<code>mt</code>和<code>rmt</code>在特殊情况下。有条件地编译程序的方式与有条件地编译源文件的方式相同：替换或有条件。
</p>
<a name="Conditional-Programs-using-configure-Substitutions"></a>
<h4 class="subsubheading">使用条件程序<code>configure</code>换人</h4>

<a name="index-EXTRA_005fPROGRAMS"></a>
<a name="index-EXTRA_005fPROGRAMS_002c-defined-1"></a>
<p>在这种情况下，您必须将可能可以生成的所有程序通知Automake，但同时会导致生成<samp>Makefile.in</samp>使用由指定的程序<code>configure</code> 。这是通过让<code>configure</code>将值代入每个<code>_PROGRAMS</code>定义，同时列出所有可选构建的程序<code>EXTRA_PROGRAMS</code> 。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = cpio pax $(MT)
libexec_PROGRAMS = $(RMT)
EXTRA_PROGRAMS = mt rmt
</pre></div>

<p>如<a href="#EXEEXT">EXEEXT所述</a> ，Automake将重写<code>bin_PROGRAMS</code> ， <code>libexec_PROGRAMS</code>和<code>EXTRA_PROGRAMS</code> ，附加“ <samp>$(EXEEXT)</samp> '到每个二进制文件。显然，它无法重写在运行时通过<code>configure</code>替换，因此您应注意附加' <samp>$(EXEEXT)</samp> '你自己，就像' <samp>AC_SUBST([MT], ['mt${EXEEXT}'])</samp> '。
</p>
<a name="Conditional-Programs-using-Automake-Conditionals"></a>
<h4 class="subsubheading">使用Automake条件句的条件程序</h4>

<p>您还可以使用Automake条件语句（请参见<a href="#Conditionals">条件</a>语句）来选择要构建的程序。在这种情况下，您不必担心“ <samp>$(EXEEXT)</samp> ' 要么<code>EXTRA_PROGRAMS</code> 。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = cpio pax
if WANT_MT
  bin_PROGRAMS += mt
endif
if WANT_RMT
  libexec_PROGRAMS = rmt
endif
</pre></div>


<hr>
<a name="A-Library"></a>
<div class="header">
<p>下一个： <a href="#A-Shared-Library" rel="next" accesskey="n">共享库</a> ，上一个： <a href="#A-Program" rel="prev" accesskey="p">程序</a> ，上： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-a-library"></a>
<h3 class="section">8.2建立图书馆</h3>

<a name="index-_005fLIBRARIES-primary_002c-defined"></a>
<a name="index-LIBRARIES-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-LIBRARIES"></a>
<a name="index-_005fLIBRARIES"></a>

<a name="index-lib_005fLIBRARIES"></a>
<a name="index-pkglib_005fLIBRARIES"></a>
<a name="index-noinst_005fLIBRARIES"></a>

<p>建立一个库就像建立一个程序。在这种情况下，主要名称为<code>LIBRARIES</code> 。库可以安装在<code>libdir</code>要么<code>pkglibdir</code> 。
</p>
<p>有关如何使用libtool和共享库构建共享库的信息，请参见<a href="#A-Shared-Library">共享库</a> 。 <code>LTLIBRARIES</code>主。
</p>
<p>每<code>_LIBRARIES</code> variable是要构建的库的列表。例如，创建一个名为<samp>libcpio.a</samp> ，但没有安装它，您将编写：</p>
<div class="example">
<pre class="example">noinst_LIBRARIES = libcpio.a
libcpio_a_SOURCES = &hellip;
</pre></div>

<p>进入库的源是完全通过程序确定的，方法是通过<code>_SOURCES</code>变量。请注意，库名已规范化（请参阅<a href="#Canonicalization">Canonicalization</a> ），因此<code>_SOURCES</code>对应于<samp>libcpio.a</samp>是' <samp>libcpio_a_SOURCES</samp> '，不是' <samp>libcpio.a_SOURCES</samp> '。
</p>
<a name="index-maude_005fLIBADD"></a>
<p>可以使用<code><var>library</var>_LIBADD</code>变量。这应该用于由<code>configure</code> 。再次从<code>cpio</code> ：</p>
<div class="example">
<pre class="example">libcpio_a_LIBADD = $(LIBOBJS) $(ALLOCA)
</pre></div>

<p>此外，必须在配置时间之前添加不存在的其他对象的源。 <code>BUILT_SOURCES</code>变量（请参阅<a href="#Sources">Sources</a> ）。
</p>
<p>通过编译所有目标文件，然后调用“ <samp>$(AR) $(ARFLAGS)</samp> '，然后是库名和对象列表，最后调用' <samp>$(RANLIB)</samp>在那个图书馆。你应该打电话<code>AC_PROG_RANLIB</code>从你的<samp>configure.ac</samp>界定<code>RANLIB</code> （否则，Automake会抱怨）。你也应该打电话<code>AM_PROG_AR</code>界定<code>AR</code> ，以支持非常规的存档器，例如Microsoft lib。 <code>ARFLAGS</code>将默认为<code>cru</code> ;您可以通过在您的<samp>Makefile.am</samp>或<code>AC_SUBST</code>从你的<samp>configure.ac</samp> 。您可以覆盖<code>AR</code>通过定义每个库来变量<code>maude_AR</code>变量（请参阅<a href="#Program-and-Library-Variables">程序和库变量</a> ）。
</p>
<a name="index-Empty-libraries"></a>
<p>有条件地选择库组件时要小心。由于构建空库不是可移植的，因此您应确保任何库始终至少包含一个对象。
</p>
<p>要在构建程序时使用静态库，请将其添加到<code>LDADD</code>对于这个程序。在下面的示例中，程序<samp>cpio</samp>与库静态链接<samp>libcpio.a</samp> 。
</p>
<div class="example">
<pre class="example">noinst_LIBRARIES = libcpio.a
libcpio_a_SOURCES = &hellip;

bin_PROGRAMS = cpio
cpio_SOURCES = cpio.c &hellip;
cpio_LDADD = libcpio.a
</pre></div>


<hr>
<a name="A-Shared-Library"></a>
<div class="header">
<p>下一篇： <a href="#Program-and-Library-Variables" rel="next" accesskey="n">程序和库变量</a> ，上一篇： <a href="#Program-and-Library-Variables" rel="next" accesskey="n">库</a> ，上<a href="#A-Library" rel="prev" accesskey="p">一篇</a> ： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-a-Shared-Library"></a>
<h3 class="section">8.3建立共享库</h3>

<a name="index-Shared-libraries_002c-support-for"></a>

<p>可移植地构建共享库是一个相对复杂的事情。因此，创建了GNU Libtool（请参见<cite>Libtool手册中的</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Top">简介</a> ）以帮助以独立于平台的方式构建共享库。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Libtool-Concept" accesskey="1">Libtool概念</a> ：</td><td>  </td><td align="left" valign="top">Libtool简介</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Libraries" accesskey="2">Libtool库</a> ：</td><td>  </td><td align="left" valign="top">声明Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Libtool-Libraries" accesskey="3">条件Libtool库</a> ：</td><td>  </td><td align="left" valign="top">有条件地构建Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Conditional-Libtool-Sources" accesskey="4">条件Libtool来源</a> ：</td><td>  </td><td align="left" valign="top">有条件地选择图书馆资源</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Convenience-Libraries" accesskey="5">Libtool便利性图书馆</a> ：</td><td>  </td><td align="left" valign="top">建立便利性Libtool库</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Modules" accesskey="6">Libtool模块</a> ：</td><td>  </td><td align="left" valign="top">构建Libtool模块</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Flags" accesskey="7">Libtool标志</a> ：</td><td>  </td><td align="left" valign="top">使用_LIBADD，_LDFLAGS和_LIBTOOLFLAGS</td></tr>
<tr><td align="left" valign="top">• <a href="#LTLIBOBJS" accesskey="8">LTLIBOBJS</a> ：</td><td>  </td><td align="left" valign="top">使用$（LTLIBOBJS）和$（LTALLOCA）</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool-Issues" accesskey="9">Libtool问题</a> ：</td><td>  </td><td align="left" valign="top">与Libtool使用相关的常见问题</td></tr>
</tbody></table>

<hr>
<a name="Libtool-Concept"></a>
<div class="header">
<p>下一页： <a href="#Libtool-Libraries" rel="next" accesskey="n">Libtool库</a> ，向上： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-Libtool-Concept"></a>
<h4 class="subsection">8.3.1 Libtool概念</h4>

<a name="index-libtool_002c-introduction"></a>
<a name="index-libtool-library_002c-definition"></a>
<a name="index-suffix-_002ela_002c-defined"></a>
<a name="index-_002ela-suffix_002c-defined"></a>

<p>Libtool从此将共享库和静态库抽象为一个统一的概念，称为<em>libtool库</em> 。Libtool库是使用<samp>.la</samp>后缀，并且可以指定静态库，共享库或同时指定两者。直到它们的确切性质才能确定<samp>./configure</samp>运行：并非所有平台都支持所有类型的库，用户可以显式选择应构建的库。（但是包的维护者可以调整默认情况下，看到<a href="http://www.gnu.org/software/libtool/manual/libtool.html#AC_005fPROG_005fLIBTOOL">的<code>AC_PROG_LIBTOOL</code></a> <cite>Libtool手册中的</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#AC_005fPROG_005fLIBTOOL">宏</a> 。）
</p>
<a name="index-suffix-_002elo_002c-defined"></a>
<p>由于共享库和静态库的目标文件必须以不同的方式进行编译，因此在编译过程中也会使用libtool。由libtool构建的目标文件称为<em>libtool对象</em> ：这些文件使用<samp>.lo</samp>后缀。Libtool库是从这些libtool对象构建的。
</p>
<p>您不应该假设任何有关<samp>.la</samp>要么<samp>.lo</samp>文件以及libtool的构造方式：这是libtool的关注点，而人们想要做的最后一件事就是了解libtool的内脏。但是，这些文件的存在很重要，因为它们被用作目标和依赖项<samp>Makefile</samp>构建libtool库时的s规则。在某些情况下，您可能必须引用这些情况，例如，当有条件地表达用于构建源文件的依赖项时（请参阅<a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a> ）。
</p>
<a name="index-libltdl_002c-introduction"></a>

<p>考虑编写带有动态加载模块的插件系统的人们应该研究<samp>libltdl</samp> ：libtool的倾斜库（请参阅<cite>《 Libtool手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Using-libltdl">使用libltdl</a> <cite>”</cite> ）。这提供了一个可移植的倾斜工具，可以动态加载libtool库，并且在不可避免的情况下还可以实现静态链接。
</p>
<p>在详细讨论如何将libtool与Automake结合使用之前，应注意libtool手册中还有一节介绍如何将Automake与libtool一起使用（请参见<cite>The Libtool Manual</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Using-Automake">将Automake与Libtool</a>一起<cite>使用</cite> ）。
</p>
<hr>
<a name="Libtool-Libraries"></a>
<div class="header">
<p>下一篇： <a href="#Conditional-Libtool-Libraries" rel="next" accesskey="n">条件Libtool库</a> ，上一篇： <a href="#Libtool-Concept" rel="prev" accesskey="p">Libtool概念</a> ，上<a href="#A-Shared-Library" rel="up" accesskey="u">一篇</a> ： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-Libtool-Libraries"></a>
<h4 class="subsection">8.3.2构建Libtool库</h4>

<a name="index-_005fLTLIBRARIES-primary_002c-defined"></a>
<a name="index-LTLIBRARIES-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-LTLIBRARIES"></a>
<a name="index-Example-of-shared-libraries"></a>
<a name="index-lib_005fLTLIBRARIES"></a>
<a name="index-pkglib_005fLTLIBRARIES"></a>
<a name="index-_005fLTLIBRARIES"></a>

<p>Automake使用libtool来构建用<code>LTLIBRARIES</code>主。每<code>_LTLIBRARIES</code> variable是要构建的libtool库的列表。例如，创建一个名为libtool的库<samp>libgettext.la</samp> ，并将其安装在<code>libdir</code> ，写：</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES = libgettext.la
libgettext_la_SOURCES = gettext.c gettext.h &hellip;
</pre></div>

<p>Automake预定义变量<code>pkglibdir</code> ，因此您可以使用<code>pkglib_LTLIBRARIES</code>在“ <samp>$(libdir)/@PACKAGE@/</samp> '。
</p>
<p>如果<samp>gettext.h</samp>是一个公共头文件，需要安装才能使人们使用该库，应使用<code>_HEADERS</code>变量，不在<code>libgettext_la_SOURCES</code> 。后者中列出的标头应该是不属于公共接口的内部标头。
</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES = libgettext.la
libgettext_la_SOURCES = gettext.c &hellip;
include_HEADERS = gettext.h &hellip;
</pre></div>

<p>软件包可以与使用它的其他程序一起构建和安装这样的库。此依赖关系应使用<code>LDADD</code> 。下面的示例生成一个名为<samp>hello</samp>与<samp>libgettext.la</samp> 。
</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES = libgettext.la
libgettext_la_SOURCES = gettext.c &hellip;

bin_PROGRAMS = hello
hello_SOURCES = hello.c &hellip;
hello_LDADD = libgettext.la
</pre></div>

<p>是否<samp>hello</samp>与之静态或动态链接<samp>libgettext.la</samp>未知：这将取决于libtool的配置和主机的功能。
</p>

<hr>
<a name="Conditional-Libtool-Libraries"></a>
<div class="header">
<p>下一篇： <a href="#Conditional-Libtool-Sources" rel="next" accesskey="n">有条件的Libtool来源</a> ，上一篇： <a href="#Libtool-Libraries" rel="prev" accesskey="p">Libtool库</a> ，上<a href="#A-Shared-Library" rel="up" accesskey="u">一篇</a> ： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-Libtool-Libraries-Conditionally"></a>
<h4 class="subsection">8.3.3有条件地构建Libtool库</h4>
<a name="index-libtool-libraries_002c-conditional"></a>
<a name="index-conditional-libtool-libraries"></a>

<p>与条件程序一样（请参阅<a href="#Conditional-Programs">条件程序</a> ），有两种主要的方法来构建条件库：使用Automake条件或使用Autoconf <code>AC_SUBST</code>重复。
</p>
<p>您需要了解的重要实现细节是，库的安装位置对libtool至关重要：需要<em>在链接时</em>使用<samp>-rpath</samp>选项。
</p>
<p>对于运行Automake时目标目录已知的库，Automake将自动提供适当的<samp>-rpath</samp> libtool的选项。在某些可安装文件中明确列出的库就是这种情况<code>_LTLIBRARIES</code>诸如<code>lib_LTLIBRARIES</code> 。
</p>
<p>但是，对于在配置时确定的库（因此在<code>EXTRA_LTLIBRARIES</code> ），Automake不知道最终的安装目录。对于此类库，您必须添加<samp>-rpath</samp>适当的选择<code>_LDFLAGS</code>手动可变。
</p>
<p>下面的示例说明了这两种方法之间的区别。
</p>
<p>这是一个例子<code>WANTEDLIBS</code>是一个<code>AC_SUBST</code> ed变量设置在<samp>./configure</samp> -时间到<samp>libfoo.la</samp> ， <samp>libbar.la</samp> ，全部或全部不选。虽然“ <samp>$(WANTEDLIBS)</samp> '出现在<code>lib_LTLIBRARIES</code> ，Automake无法猜测它与<samp>libfoo.la</samp>要么<samp>libbar.la</samp>在为这两个库创建链接规则时。因此<samp>-rpath</samp>必须明确提供参数。
</p>
<div class="example">
<pre class="example">EXTRA_LTLIBRARIES = libfoo.la libbar.la
lib_LTLIBRARIES = $(WANTEDLIBS)
libfoo_la_SOURCES = foo.c &hellip;
libfoo_la_LDFLAGS = -rpath '$(libdir)'
libbar_la_SOURCES = bar.c &hellip;
libbar_la_LDFLAGS = -rpath '$(libdir)'
</pre></div>

<p>这是一样的<samp>Makefile.am</samp>使用名为<code>WANT_LIBFOO</code>和<code>WANT_LIBBAR</code> 。现在，Automake可以计算出<samp>-rpath</samp>自行设置，因为很明显两个库都将以“ <samp>$(libdir)</samp> '（如果已安装）。
</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES =
if WANT_LIBFOO
lib_LTLIBRARIES += libfoo.la
endif
if WANT_LIBBAR
lib_LTLIBRARIES += libbar.la
endif
libfoo_la_SOURCES = foo.c &hellip;
libbar_la_SOURCES = bar.c &hellip;
</pre></div>

<hr>
<a name="Conditional-Libtool-Sources"></a>
<div class="header">
<p>下一篇： <a href="#Libtool-Convenience-Libraries" rel="next" accesskey="n">Libtool便利性图书馆</a> ，上一篇： <a href="#Conditional-Libtool-Libraries" rel="prev" accesskey="p">有条件的Libtool图书馆</a> ，向上： <a href="#A-Shared-Library" rel="up" accesskey="u">共享图书馆</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Libtool-Libraries-with-Conditional-Sources"></a>
<h4 class="subsection">8.3.4具有条件源的Libtool库</h4>

<p>可以按与程序中的<a href="#Conditional-Sources">条件源</a>编译相同的方式来实现库中条件源的编译（请参见<a href="#Conditional-Sources">条件源</a> ）。唯一的区别是<code>_LIBADD</code>应该代替<code>_LDADD</code>并且应该提到libtool对象（ <samp>.lo</samp>文件）。
</p>
<p>所以，模仿<samp>hello</samp>来自<a href="#Conditional-Sources">条件源的</a>示例，我们可以构建一个<samp>libhello.la</samp>图书馆使用<samp>hello-linux.c</samp>要么<samp>hello-generic.c</samp>与以下<samp>Makefile.am</samp> 。
</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES = libhello.la
libhello_la_SOURCES = hello-common.c
EXTRA_libhello_la_SOURCES = hello-linux.c hello-generic.c
libhello_la_LIBADD = $(HELLO_SYSTEM)
libhello_la_DEPENDENCIES = $(HELLO_SYSTEM)
</pre></div>

<p>并确保<code>configure</code>定义<code>HELLO_SYSTEM</code>就像<samp>hello-linux.lo</samp>要么<samp>hello-generic.lo</samp> 。
</p>
<p>或者我们可以简单地使用Automake条件，如下所示。
</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES = libhello.la
libhello_la_SOURCES = hello-common.c
if LINUX
libhello_la_SOURCES += hello-linux.c
else
libhello_la_SOURCES += hello-generic.c
endif
</pre></div>

<hr>
<a name="Libtool-Convenience-Libraries"></a>
<div class="header">
<p>下一篇： <a href="#Libtool-Modules" rel="next" accesskey="n">Libtool模块</a> ，上一篇： <a href="#Conditional-Libtool-Sources" rel="prev" accesskey="p">条件Libtool源</a> ，上<a href="#A-Shared-Library" rel="up" accesskey="u">一篇</a> ： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Libtool-Convenience-Libraries-1"></a>
<h4 class="subsection">8.3.5 Libtool便利性图书馆</h4>
<a name="index-convenience-libraries_002c-libtool"></a>
<a name="index-libtool-convenience-libraries"></a>
<a name="index-noinst_005fLTLIBRARIES"></a>
<a name="index-check_005fLTLIBRARIES"></a>

<p>有时您想构建不应安装的libtool库。这些被称为<em>libtool便利程序库</em> ，通常用于封装许多子<em>库</em> ，这些子<em>库</em>随后被收集到一个已安装的大型库中。
</p>
<p>Libtool便捷库由无目录变量声明，例如<code>noinst_LTLIBRARIES</code> ， <code>check_LTLIBRARIES</code> ， 甚至<code>EXTRA_LTLIBRARIES</code> 。与已安装的libtool库不同，它们不需要<samp>-rpath</samp>链接时标记（实际上这是唯一的区别）。
</p>
<p>列出的便利库<code>noinst_LTLIBRARIES</code>总是建造的。那些在<code>check_LTLIBRARIES</code>仅基于“ <samp>make check</samp> '。最后，列出的库<code>EXTRA_LTLIBRARIES</code>永远不会显式构建：Automake输出规则来构建它们，但是如果该库在任何地方都没有显示为Makefile依赖项，那么它将无法构建（这就是为什么<code>EXTRA_LTLIBRARIES</code>用于条件编译）。
</p>
<p>这是将libtool便捷库从子目录合并到一个主要目录的示例设置<samp>libtop.la</samp>图书馆。
</p>
<div class="example">
<pre class="example"># -- Top-level Makefile.am --
SUBDIRS = sub1 sub2 &hellip;
lib_LTLIBRARIES = libtop.la
libtop_la_SOURCES =
libtop_la_LIBADD = \
  sub1/libsub1.la \
  sub2/libsub2.la \
  &hellip;

# -- sub1/Makefile.am --
noinst_LTLIBRARIES = libsub1.la
libsub1_la_SOURCES = &hellip;

# -- sub2/Makefile.am --
# showing nested convenience libraries
SUBDIRS = sub2.1 sub2.2 &hellip;
noinst_LTLIBRARIES = libsub2.la
libsub2_la_SOURCES =
libsub2_la_LIBADD = \
  sub21/libsub21.la \
  sub22/libsub22.la \
  &hellip;
</pre></div>

<p>使用此类设置时，请注意<code>automake</code>会假设<samp>libtop.la</samp>将与C链接器链接。这是因为<code>libtop_la_SOURCES</code>是空的，所以<code>automake</code>选择C作为默认语言。如果<code>libtop_la_SOURCES</code>不为空， <code>automake</code>会按照<a href="#How-the-Linker-is-Chosen">如何</a>选择链接器中所述选择链接<a href="#How-the-Linker-is-Chosen">器</a> 。
</p>
<p>如果子库之一包含非C源，则选择适当的链接器很重要。实现此目的的一种方法是假装库源之间存在这样的非C文件，因此强制<code>automake</code>选择适当的链接器。这是顶层<samp>Makefile</samp>我们的示例已更新为强制C ++链接。
</p>
<div class="example">
<pre class="example">SUBDIRS = sub1 sub2 &hellip;
lib_LTLIBRARIES = libtop.la
libtop_la_SOURCES =
# Dummy C++ source to cause C++ linking.
nodist_EXTRA_libtop_la_SOURCES = dummy.cxx
libtop_la_LIBADD = \
  sub1/libsub1.la \
  sub2/libsub2.la \
  &hellip;
</pre></div>

<p>' <samp>EXTRA_*_SOURCES</samp> '变量用于跟踪可能被编译的源文件（这在使用条件进行条件编译时最有用<code>AC_SUBST</code> ，请参见“ <a href="#Conditional-Libtool-Sources">条件Libtool来源”</a> ）和<code>nodist_</code>前缀意味着不会分发列出的源（请参阅<a href="#Program-and-Library-Variables">Program和Library Variables</a> ）。有效文件<samp>dummy.cxx</samp>不需要存在于源代码树中。当然，如果您要列出一些真实的源文件<code>libtop_la_SOURCES</code>欺骗是没有意义的<code>nodist_EXTRA_libtop_la_SOURCES</code> 。
</p>

<hr>
<a name="Libtool-Modules"></a>
<div class="header">
<p>下一篇： <a href="#Libtool-Flags" rel="next" accesskey="n">Libtool标志</a> ，上一篇： <a href="#Libtool-Flags" rel="next" accesskey="n">Libtool</a> <a href="#Libtool-Convenience-Libraries" rel="prev" accesskey="p">便利库</a> ，上： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Libtool-Modules-1"></a>
<h4 class="subsection">8.3.6 Libtool模块</h4>
<a name="index-modules_002c-libtool"></a>
<a name="index-libtool-modules"></a>
<a name="index-_002dmodule_002c-libtool"></a>

<p>这些是libtool库，意在倾斜。它们通过传递到libtool <samp>-module</samp>在链接时。
</p>
<div class="example">
<pre class="example">pkglib_LTLIBRARIES = mymodule.la
mymodule_la_SOURCES = doit.c
mymodule_la_LDFLAGS = -module
</pre></div>

<p>通常，Automake要求库的名称以<code>lib</code> 。但是，在构建可动态加载的模块时，您可能希望使用“非标准”名称。如果Automake知道所构建的库是libtool模块，则不会抱怨此类非标准名称。 <samp>-module</samp>明确出现在图书馆的<code>_LDFLAGS</code>变量（或共同点<code>AM_LDFLAGS</code>没有每个库时变量<code>_LDFLAGS</code>变量）。
</p>
<p>一如既往， <code>AC_SUBST</code>变量是Automake的黑匣子，因为何时知道它们的值<code>automake</code>运行。因此，如果<samp>-module</samp>通过这样的变量进行设置，Automake将不会注意到它，并且将继续执行该库，就像该库是普通的libtool库一样，并具有严格的命名。
</p>
<p>如果<code>mymodule_la_SOURCES</code>未指定，则默认为单个文件<samp>mymodule.c</samp> （请参阅<a href="#Default-_005fSOURCES">默认_SOURCES</a> ）。
</p>
<hr>
<a name="Libtool-Flags"></a>
<div class="header">
<p>下一篇： <a href="#LTLIBOBJS" rel="next" accesskey="n">LTLIBOBJS</a> ，上一篇： <a href="#Libtool-Modules" rel="prev" accesskey="p">Libtool模块</a> ，上一篇： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="g_t_005fLIBADD_002c-_005fLDFLAGS_002c-and-_005fLIBTOOLFLAGS"></a>
<h4 class="subsection">8.3.7 <code>_LIBADD</code> ， <code>_LDFLAGS</code>和<code>_LIBTOOLFLAGS</code></h4>
<a name="index-_005fLIBADD_002c-libtool"></a>
<a name="index-_005fLDFLAGS_002c-libtool"></a>
<a name="index-_005fLIBTOOLFLAGS_002c-libtool"></a>
<a name="index-AM_005fLIBTOOLFLAGS"></a>
<a name="index-LIBTOOLFLAGS"></a>
<a name="index-maude_005fLIBTOOLFLAGS"></a>

<p>如前几节所示， <samp><var>library</var>_LIBADD</samp> '变量应用于列出额外的libtool对象（ <samp>.lo</samp>文件）或libtool库（ <samp>.la</samp> ）添加到<var>library</var> 。
</p>
<p>' <samp><var>library</var>_LDFLAGS</samp> 'variable是列出其他libtool链接标志的地方，例如<samp>-version-info</samp> ， <samp>-static</samp> ，还有更多。请参见<cite>《 Libtool手册》</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Link-mode">链接模式</a> 。
</p>
<p>的<code>libtool</code>该命令具有两种选项：特定于模式的选项和通用选项。特定于模式的选项（例如上述链接标志）应与传递给工具调用的其他标志混在一起<code>libtool</code> （因此使用' <samp><var>library</var>_LDFLAGS</samp> '（用于libtool链接标志）。通用选项包括<samp>--tag=<var>tag</var></samp>和<samp>--silent</samp> （请参阅<a href="http://www.gnu.org/software/libtool/manual/libtool.html#Invoking-libtool">调用<code>libtool</code></a>在<cite>Libtool手册中</cite>以获取更多选项）应该出现在命令行上的模式选择之前；在<samp>Makefile.am</samp>他们应该在“ <samp><var>library</var>_LIBTOOLFLAGS</samp> '变量。
</p>
<p>如果“ <samp><var>library</var>_LIBTOOLFLAGS</samp> '未定义，则变量<code>AM_LIBTOOLFLAGS</code>改为使用。
</p>
<p>这些标志在<samp>--tag=<var>tag</var></samp>由Automake计算的选项（如果有），因此“ <samp><var>library</var>_LIBTOOLFLAGS</samp> ' （要么<code>AM_LIBTOOLFLAGS</code> ）是覆盖或补充<samp>--tag=<var>tag</var></samp>设置。
</p>
<p>libtool规则还使用<code>LIBTOOLFLAGS</code>不应设置的变量<samp>Makefile.am</samp> ：这是一个用户变量（请参见<a href="#Flag-Variables-Ordering">标志变量排序）</a> 。它允许用户运行“ <samp>make LIBTOOLFLAGS=--silent</samp> '， 例如。请注意， <code>libtool</code>也可能受到Automake对静默规则的支持的影响（请参阅<a href="#Automake-Silent-Rules">Automake Silent Rules</a> ）。
</p>
<hr>
<a name="LTLIBOBJS"></a>
<div class="header">
<p>下一篇： <a href="#Libtool-Issues" rel="next" accesskey="n">Libtool问题</a> ，上一篇： <a href="#Libtool-Issues" rel="next" accesskey="n">Libtool</a> <a href="#Libtool-Flags" rel="prev" accesskey="p">标志</a> ，上： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="LTLIBOBJS-and-LTALLOCA"></a>
<h4 class="subsection">8.3.8 <code>LTLIBOBJS</code>和<code>LTALLOCA</code></h4>
<a name="index-LTLIBOBJS_002c-special-handling"></a>
<a name="index-LIBOBJS_002c-and-Libtool"></a>
<a name="index-LTALLOCA_002c-special-handling"></a>
<a name="index-ALLOCA_002c-and-Libtool"></a>
<a name="index-LTLIBOBJS"></a>
<a name="index-LIBOBJS-1"></a>
<a name="index-LTALLOCA"></a>
<a name="index-ALLOCA"></a>
<a name="index-AC_005fLIBOBJ"></a>

<p>普通图书馆可能包含“ <samp>$(LIBOBJS)</samp> ' 要么 ' <samp>$(ALLOCA)</samp> '（请参阅<a href="#LIBOBJS">LIBOBJS</a> ），libtool库必须使用' <samp>$(LTLIBOBJS)</samp> ' 要么 ' <samp>$(LTALLOCA)</samp> '。这是必需的，因为libtool操作的目标文件不一定以结尾<samp>.o</samp> 。
</p>
<p>如今， <code>LTLIBOBJS</code>从<code>LIBOBJS</code>由Autoconf自动执行（请参见<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code>与<code>LIBOBJS</code></a>在<cite>Autoconf手册中</cite> ）。
</p>
<hr>
<a name="Libtool-Issues"></a>
<div class="header">
<p>上一页： <a href="#LTLIBOBJS" rel="prev" accesskey="p">LTLIBOBJS</a> ，向上： <a href="#A-Shared-Library" rel="up" accesskey="u">共享库</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Common-Issues-Related-to-Libtool_0027s-Use"></a>
<h4 class="subsection">8.3.9与Libtool使用相关的常见问题</h4>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Error-required-file-ltmain_002esh-not-found" accesskey="1">找不到所需的错误文件ltmain.sh</a> ：</td><td>  </td><td align="left" valign="top">需要运行libtoolize</td></tr>
<tr><td align="left" valign="top">• <a href="#Objects-created-both-with-libtool-and-without" accesskey="2">使用libtool和不使用libtool创建的对象</a> ：</td><td>  </td><td align="left" valign="top">避免特定的构建竞赛</td></tr>
</tbody></table>

<hr>
<a name="Error-required-file-ltmain_002esh-not-found"></a>
<div class="header">
<p>下一页： <a href="#Objects-created-both-with-libtool-and-without" rel="next" accesskey="n">使用libtool和不使用libtool创建的对象</a> ，上： <a href="#Libtool-Issues" rel="up" accesskey="u">Libtool问题</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Error_003a-required-file-_0060_002e_002fltmain_002esh_0027-not-found"></a>
<h4 class="subsubsection">8.3.9.1错误：“ <samp>required file `./ltmain.sh' not found</samp> '</h4>
<a name="index-ltmain_002esh-not-found"></a>
<a name="index-libtoolize_002c-no-longer-run-by-automake"></a>
<a name="index-libtoolize-and-autoreconf"></a>
<a name="index-autoreconf-and-libtoolize"></a>
<a name="index-bootstrap-and-autoreconf"></a>
<a name="index-autogen_002esh-and-autoreconf"></a>

<p>Libtool附带了一个名为<code>libtoolize</code>会将libtool的支持文件安装到软件包中。运行此命令将安装<samp>ltmain.sh</samp> 。你应该先执行它<code>aclocal</code>和<code>automake</code> 。
</p>
<p>将旧软件包升级到较新的自动工具的人们可能会遇到此问题，因为以前使用较旧的Automake版本进行调用<code>libtoolize</code> 。因此，旧的构建脚本不会调用<code>libtoolize</code> 。
</p>
<p>从Automake 1.6开始，已经决定<code>libtoolize</code>与Automake无关。相反，该功能已移至<code>autoreconf</code>命令（请参阅<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#autoreconf-Invocation">使用<code>autoreconf</code></a>在<cite>Autoconf手册中</cite> ）。如果您不想记住运行什么以及何时运行，只需学习<code>autoreconf</code>命令。希望取代现有的<samp>bootstrap</samp>要么<samp>autogen.sh</samp>通过调用脚本<code>autoreconf</code>将来也应该使您摆脱任何类似的不兼容更改。
</p>
<hr>
<a name="Objects-created-both-with-libtool-and-without"></a>
<div class="header">
<p>上一页： <a href="#Error-required-file-ltmain_002esh-not-found" rel="prev" accesskey="p">找不到所需的错误文件ltmain.sh</a> ，向上： <a href="#Libtool-Issues" rel="up" accesskey="u">Libtool发行了</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Objects-created-with-both-libtool-and-without"></a>
<h4 class="subsubsection">8.3.9.2对象' <samp>created with both libtool and without</samp> '</h4>

<p>有时，使用相同的源文件来构建libtool库和构建另一个非libtool目标（程序或其他库）。
</p>
<p>让我们考虑以下<samp>Makefile.am</samp> 。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = prog
prog_SOURCES = prog.c foo.c &hellip;

lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = foo.c &hellip;
</pre></div>

<p>（在这种琐碎的情况下，可以通过链接避免问题<samp>libfoo.la</samp>与<samp>prog</samp>而不是上市<samp>foo.c</samp>在<code>prog_SOURCES</code> 。但让我们假设我们真的想保留<samp>prog</samp>和<samp>libfoo.la</samp>分离。）
</p>
<p>从技术上讲，这意味着我们应该建立<samp>foo.$(OBJEXT)</samp>对于<samp>prog</samp>和<samp>foo.lo</samp>对于<samp>libfoo.la</samp> 。问题是在创建过程中<samp>foo.lo</samp> ，libtool可能会擦除（或替换） <samp>foo.$(OBJEXT)</samp> ，这是不可避免的。
</p>
<p>因此，当Automake检测到这种情况时，它将发出诸如以下消息：</p><div class="example">
<pre class="example">object 'foo.$(OBJEXT)' created both with libtool and without
</pre></div>

<p>此问题的解决方法是确保这两个对象获得不同的基名。如<a href="#Renamed-Objects">重命名对象中所述</a> ，当使用每个目标标志时，这会自动发生。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = prog
prog_SOURCES = prog.c foo.c &hellip;
prog_CFLAGS = $(AM_CFLAGS)

lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = foo.c &hellip;
</pre></div>

<p>加' <samp>prog_CFLAGS = $(AM_CFLAGS)</samp> '几乎是空手，因为当<code>prog_CFLAGS</code>被定义，它被用来代替<code>AM_CFLAGS</code> 。但是作为副作用，它将导致<samp>prog.c</samp>和<samp>foo.c</samp>被编译为<samp>prog-prog.$(OBJEXT)</samp>和<samp>prog-foo.$(OBJEXT)</samp> ，即可解决问题。
</p>
<hr>
<a name="Program-and-Library-Variables"></a>
<div class="header">
<p>下一个： <a href="#Default-_005fSOURCES" rel="next" accesskey="n">默认_SOURCES</a> ，上一个： <a href="#A-Shared-Library" rel="prev" accesskey="p">共享库</a> ，上一个： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Program-and-Library-Variables-1"></a>
<h3 class="section">8.4程序和库变量</h3>

<p>与每个程序相关联的是变量集合，可用于修改该程序的构建方式。每个库都有类似的此类变量列表。程序（或库）的规范名称用作命名这些变量的基础。
</p>
<p>在下面的列表中，我们使用名称“ maude”来指代程序或库。在你的<samp>Makefile.am</samp>您可以将其替换为程序的规范名称。该列表也将“ maude”称为程序，但通常，相同的规则适用于静态库和动态库。下面的文档指出了程序和库不同的情况。
</p>
<dl compact>
<dt><code>maude_SOURCES</code>
<a name="index-maude_005fSOURCES"></a>
</dt>
<dd><p>该变量（如果存在）列出所有为构建程序而编译的源文件。这些文件默认情况下添加到分发中。生成程序时，Automake会导致将每个源文件编译为单个文件<samp>.o</samp>文件（或<samp>.lo</samp>使用libtool时）。通常，这些目标文件是以源文件命名的，但是其他因素也可以改变这一点。如果文件在<code>_SOURCES</code>变量具有无法识别的扩展名，Automake将使用它执行以下两项操作之一。如果存在后缀规则，用于将扩展名无法识别的文件转换为<samp>.o</samp>文件，然后<code>automake</code>将此文件与其他任何源文件一样对待（请参阅<a href="#Support-for-Other-Languages">支持其他语言</a> ）。否则，该文件将被视为头文件而被忽略。
</p>
<p>前缀<code>dist_</code>和<code>nodist_</code>可用于控制是否在<code>_SOURCES</code>变量是分布式的。
<code>dist_</code>这是多余的，因为默认情况下是分发源，但是可以根据需要指定它以便清楚。
</p>
<p>可能两者兼有<code>dist_</code>和<code>nodist_</code>给定的变体<code>_SOURCES</code>一次变这使您可以轻松分发某些文件，而不是其他文件，例如：</p>
<div class="example">
<pre class="example">nodist_maude_SOURCES = nodist.c
dist_maude_SOURCES = dist-me.c
</pre></div>

<p>默认情况下，输出文件（在Unix系统上， <samp>.o</samp>文件）将放入当前的构建目录中。但是，如果选择<samp>subdir-objects</samp>在当前目录中有效，则<samp>.o</samp>文件将放在以源文件命名的子目录中。例如， <samp>subdir-objects</samp>已启用<samp>sub/dir/file.c</samp>将被编译为<samp>sub/dir/file.o</samp> 。有些人喜欢这种操作方式。您可以指定<samp>subdir-objects</samp>在<code>AUTOMAKE_OPTIONS</code> （请参阅<a href="#Options">选项</a> ）。
<a name="index-Subdirectory_002c-objects-in"></a>
<a name="index-Objects-in-subdirectory"></a>
</p>

</dd>
<dt><code>EXTRA_maude_SOURCES</code>
<a name="index-EXTRA_005fmaude_005fSOURCES"></a>
</dt>
<dd><p>Automake需要知道您打算<em>静态</em>编译的文件列表。一方面，这是Automake知道给定语言支持哪种语言的唯一方法<samp>Makefile.in</samp>要求。<a name="DOCF3" href="#FOOT3"><sup>3</sup></a>这意味着，例如，您不能放置“ <samp>@my_sources@</samp> '成' <samp>_SOURCES</samp> '变量。如果您打算有条件地编译源文件并使用<samp>configure</samp>将适当的对象名称替换为例如<code>_LDADD</code> （请参见下文），然后您应在<code>EXTRA_</code>变量。
</p>
<p>此变量还支持<code>dist_</code>和<code>nodist_</code>前缀。例如， <code>nodist_EXTRA_maude_SOURCES</code>将列出可能需要构建但不应分发的其他资源。
</p>
</dd>
<dt><code>maude_AR</code>
<a name="index-maude_005fAR"></a>
</dt>
<dd><p>默认情况下，通过调用' <samp>$(AR) $(ARFLAGS)</samp> '，然后是库的名称，然后是要放入库中的对象。您可以通过设置<code>_AR</code>变量。这通常与C ++一起使用。一些C ++编译器需要特殊的调用才能实例化应放入库中的所有模板。例如，SGI C ++编译器喜欢此变量集，如下所示：</p><div class="example">
<pre class="example">libmaude_a_AR = $(CXX) -ar -o
</pre></div>

</dd>
<dt><code>maude_LIBADD</code>
<a name="index-maude_005fLIBADD-1"></a>
</dt>
<dd><p>额外的对象可以使用被添加到<em>库</em> <code>_LIBADD</code>变量。例如，应将其用于由<code>configure</code> （请参阅<a href="#A-Library">库</a> ）。
</p>
<p>对于libtool库， <code>maude_LIBADD</code>也可以参考其他libtool库。
</p>
</dd>
<dt><code>maude_LDADD</code>
<a name="index-maude_005fLDADD-1"></a>
</dt>
<dd><p>多余的物品（ <samp>*.$(OBJEXT)</samp> ）和库（ <samp>*.a</samp> ， <samp>*.la</samp> ）可以通过将它们列出来添加到<em>程序</em>中<code>_LDADD</code>变量。例如，应将其用于由<code>configure</code> （请参阅<a href="#Linking">链接</a> ）。
</p>
<p><code>_LDADD</code>和<code>_LIBADD</code>不适合传递程序特定的链接器标志（ <samp>-l</samp> ， <samp>-L</samp> ， <samp>-dlopen</samp>和<samp>-dlpreopen</samp> ）。使用<code>_LDFLAGS</code>为此目的的变量。
</p>
<p>例如，如果您的<samp>configure.ac</samp>用途<code>AC_PATH_XTRA</code> ，您可以将程序链接到X库，如下所示：</p>
<div class="example">
<pre class="example">maude_LDADD = $(X_PRE_LIBS) $(X_LIBS) $(X_EXTRA_LIBS)
</pre></div>

<p>我们建议您使用<samp>-l</samp>和<samp>-L</samp>仅在引用第三方库时，并提供由您的软件包构建的任何库的显式文件名。这样做将确保<code>maude_DEPENDENCIES</code> （请参见下文）默认情况下正确定义。
</p>
</dd>
<dt><code>maude_LDFLAGS</code>
<a name="index-maude_005fLDFLAGS-1"></a>
</dt>
<dd><p>此变量用于将额外的标志传递给程序或共享库的链接步骤。它覆盖了<code>AM_LDFLAGS</code>变量。
</p>
</dd>
<dt><code>maude_LIBTOOLFLAGS</code>
<a name="index-maude_005fLIBTOOLFLAGS-1"></a>
</dt>
<dd><p>此变量用于将其他选项传递给<code>libtool</code> 。它覆盖了<code>AM_LIBTOOLFLAGS</code>变量。这些选项在输出之前<code>libtool</code>的<samp>--mode=<var>mode</var></samp>选项，因此它们不应是特定于模式的选项（那些属于编译器或链接器标志）。请参见<a href="#Libtool-Flags">Libtool标志</a> 。
</p>
</dd>
<dt><code>maude_DEPENDENCIES</code>
<a name="index-maude_005fDEPENDENCIES-1"></a>
</dt>
<dt><code>EXTRA_maude_DEPENDENCIES</code>
<a name="index-EXTRA_005fmaude_005fDEPENDENCIES-1"></a>
</dt>
<dd><p>使目标（程序或库）依赖于实际上不是该目标一部分的其他文件有时也很有用。可以使用<code>_DEPENDENCIES</code>变量。每个目标都取决于此类变量的内容，但是没有做进一步的解释。
</p>
<p>由于这些依赖项与用于创建程序的链接规则相关联，因此它们通常应列出link命令使用的文件。那是<samp>*.$(OBJEXT)</samp> ， <samp>*.a</samp> ， 要么<samp>*.la</samp>程序文件； <samp>*.lo</samp>和<samp>*.la</samp> Libtool库的文件；和<samp>*.$(OBJEXT)</samp>静态库的文件。在极少数情况下，您可能需要添加其他类型的文件，例如链接描述文件，但会<em>在<code>_DEPENDENCIES</code>是错误的</em> 。如果在构建程序的所有组件之前需要先构建一些源文件，请考虑使用<code>BUILT_SOURCES</code>变量（请参阅<a href="#Sources">Sources</a> ）。
</p>
<p>如果<code>_DEPENDENCIES</code>未提供，由Automake计算。自动分配的值是<code>_LDADD</code>要么<code>_LIBADD</code> ，使用大多数配置替换项， <samp>-l</samp> ， <samp>-L</samp> ， <samp>-dlopen</samp>和<samp>-dlpreopen</samp>选项已删除。剩下的配置替换仅是' <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp> ';之所以保留这些值，是因为它们不会导致无效的值<code>_DEPENDENCIES</code>被生成。
</p>
<p><code>_DEPENDENCIES</code>更可能用于使用<code>AC_SUBST</code>包含对象列表的变量。请参见<a href="#Conditional-Sources">条件源</a>和<a href="#Conditional-Libtool-Sources">条件Libtool源</a> 。
</p>
<p>的<code>EXTRA_*_DEPENDENCIES</code>变量在您只想增加<code>automake</code>产生的<code>_DEPENDENCIES</code>变量而不是替换它。
</p>
</dd>
<dt><code>maude_LINK</code>
<a name="index-maude_005fLINK"></a>
</dt>
<dd><p>您可以基于每个程序覆盖链接器。默认情况下，根据程序使用的语言选择链接器。例如，包含C ++源代码的程序将使用C ++编译器进行链接。的<code>_LINK</code>变量必须包含可以传递所有命令的命令的名称<samp>.o</samp>文件参数和要作为参数链接的库。请注意，基础程序的名称<em>不会</em>传递给<code>_LINK</code> ;通常一个使用“ <samp>$@</samp> '：</p>
<div class="example">
<pre class="example">maude_LINK = $(CCLD) -magic -o $@
</pre></div>

<p>如果一个<code>_LINK</code>变量未提供，由于使用了每个目标的链接标志，例如，Automake可能仍会生成和使用该变量<code>_CFLAGS</code> ， <code>_LDFLAGS</code>要么<code>_LIBTOOLFLAGS</code> （如果适用）。
</p>
</dd>
<dt><code>maude_CCASFLAGS</code>
<a name="index-maude_005fCCASFLAGS"></a>
</dt>
<dt><code>maude_CFLAGS</code>
<a name="index-maude_005fCFLAGS"></a>
</dt>
<dt><code>maude_CPPFLAGS</code>
<a name="index-maude_005fCPPFLAGS"></a>
</dt>
<dt><code>maude_CXXFLAGS</code>
<a name="index-maude_005fCXXFLAGS"></a>
</dt>
<dt><code>maude_FFLAGS</code>
<a name="index-maude_005fFFLAGS"></a>
</dt>
<dt><code>maude_GCJFLAGS</code>
<a name="index-maude_005fGCJFLAGS"></a>
</dt>
<dt><code>maude_LFLAGS</code>
<a name="index-maude_005fLFLAGS"></a>
</dt>
<dt><code>maude_OBJCFLAGS</code>
<a name="index-maude_005fOBJCFLAGS"></a>
</dt>
<dt><code>maude_OBJCXXFLAGS</code>
<a name="index-maude_005fOBJCXXFLAGS"></a>
</dt>
<dt><code>maude_RFLAGS</code>
<a name="index-maude_005fRFLAGS"></a>
</dt>
<dt><code>maude_UPCFLAGS</code>
<a name="index-maude_005fUPCFLAGS"></a>
</dt>
<dt><code>maude_YFLAGS</code>
<a name="index-maude_005fYFLAGS"></a>
</dt>
<dd><a name="index-per_002dtarget-compilation-flags_002c-defined"></a>
<p>Automake允许您基于每个程序（或每个库）设置编译标志。单个源文件可以包含在多个程序中，并且可能会为每个程序使用不同的标志进行编译。这适用于Automake直接支持的任何语言。这些<em>按目标编译的标志</em>是“ <samp>_CCASFLAGS</samp> '，' <samp>_CFLAGS</samp> '，' <samp>_CPPFLAGS</samp> '，' <samp>_CXXFLAGS</samp> '，' <samp>_FFLAGS</samp> '，' <samp>_GCJFLAGS</samp> '，' <samp>_LFLAGS</samp> '，' <samp>_OBJCFLAGS</samp> '，' <samp>_OBJCXXFLAGS</samp> '，' <samp>_RFLAGS</samp> '，' <samp>_UPCFLAGS</samp> '和' <samp>_YFLAGS</samp> '。
</p>
<p>当使用每个目标的编译标志时，Automake将为中间目标文件选择一个不同的名称。通常像<samp>sample.c</samp>将被编译产生<samp>sample.o</samp> 。但是，如果程序的<code>_CFLAGS</code>设置变量，然后将目标文件命名，例如， <samp>maude-sample.o</samp> 。（另请参阅<a href="#Renamed-Objects">重命名对象</a> ）。
</p>
<p>在具有按目标标志的编译中，普通的' <samp>AM_</samp> '标志变量的形式<em>不会</em>自动包含在编译中（但是，变量的用户形式<em>已</em>包括在内）。例如，如果您想要假设<samp>maude</samp>汇编也使用<code>AM_CFLAGS</code> ，您需要编写：</p>
<div class="example">
<pre class="example">maude_CFLAGS = &hellip; your flags &hellip; $(AM_CFLAGS)
</pre></div>

<p>有关用户变量之间的交互的更多讨论，请参见<a href="#Flag-Variables-Ordering">标记变量排序</a> ， <samp>AM_</samp>阴影变量和每个目标变量。
</p>
</dd>
<dt><code>maude_SHORTNAME</code>
<a name="index-maude_005fSHORTNAME"></a>
</dt>
<dd><p>在某些平台上，允许的文件名非常短。为了同时支持这些系统和每个目标的编译标志，Automake允许您设置一个“短名称”，该名称将影响中间目标文件的命名方式。例如，在以下示例中，</p>
<div class="example">
<pre class="example">bin_PROGRAMS = maude
maude_CPPFLAGS = -DSOMEFLAG
maude_SHORTNAME = m
maude_SOURCES = sample.c &hellip;
</pre></div>

<p>目标文件将被命名<samp>m-sample.o</samp>而不是<samp>maude-sample.o</samp> 。
</p>
<p>在实践中很少需要使用此功能，我们建议您在需要它之前避免使用它。
</p></dd>
</dl>

<hr>
<a name="Default-_005fSOURCES"></a>
<div class="header">
<p>下一篇： <a href="#LIBOBJS" rel="next" accesskey="n">LIBOBJS</a> ，上一篇： <a href="#Program-and-Library-Variables" rel="prev" accesskey="p">程序和库变量</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Default-_005fSOURCES-1"></a>
<h3 class="section">8.5默认<code>_SOURCES</code></h3>

<a name="index-_005fSOURCES-2"></a>
<a name="index-SOURCES-1"></a>
<a name="index-_005fSOURCES_002c-default"></a>
<a name="index-default-_005fSOURCES"></a>
<a name="index-AM_005fDEFAULT_005fSOURCE_005fEXT"></a>

<p><code>_SOURCES</code>变量用于指定程序（请参阅<a href="#A-Program">A Program</a> ），库（请参阅<a href="#A-Library">A Library</a> ）和Libtool库（请参阅<a href="#A-Shared-Library">A Shared Library</a> ）的源文件。
</p>
<p>如果未为目标指定任何此类变量，则Automake将自己定义一个。默认是编译一个C文件，其基本名称是目标本身的名称，并且所有扩展名都替换为<code>AM_DEFAULT_SOURCE_EXT</code> ，默认为<samp>.c</samp> 。
</p>
<p>例如，如果您的某处有以下内容<samp>Makefile.am</samp>没有对应的<code>libfoo_a_SOURCES</code> ：</p>
<div class="example">
<pre class="example">lib_LIBRARIES = libfoo.a sub/libc++.a
</pre></div>

<p><samp>libfoo.a</samp>将使用名为<samp>libfoo.c</samp>和<samp>sub/libc++.a</samp>将由<samp>sub/libc++.c</samp> 。（在旧版本中<samp>sub/libc++.a</samp>将由<samp>sub_libc___a.c</samp> ，即默认来源是目标的规范名称， <samp>.c</samp>附加。我们认为新行为更明智，但是为了向后兼容<code>automake</code>如果存在具有该名称的文件或规则，并且将使用旧名称，并且<code>AM_DEFAULT_SOURCE_EXT</code>未使用。）
</p>
<a name="index-check_005fPROGRAMS-example"></a>
<a name="index-check_005fPROGRAMS-1"></a>
<p>当从单个源构建许多测试程序时，默认源主要在测试套件中有用。例如，在</p>
<div class="example">
<pre class="example">check_PROGRAMS = test1 test2 test3
AM_DEFAULT_SOURCE_EXT = .cpp
</pre></div>

<p><samp>test1</samp> ， <samp>test2</samp>和<samp>test3</samp>将由<samp>test1.cpp</samp> ， <samp>test2.cpp</samp>和<samp>test3.cpp</samp> 。没有最后一行，它们将从<samp>test1.c</samp> ， <samp>test2.c</samp>和<samp>test3.c</samp> 。
</p>
<a name="index-Libtool-modules_002c-default-source-example"></a>
<a name="index-default-source_002c-Libtool-modules-example"></a>
<p>另一种方便的情况是构建许多Libtool模块（ <samp>module<var>n</var>.la</samp> ），每个都在自己的文件中定义（ <samp>module<var>n</var>.c</samp> ）。
</p>
<div class="example">
<pre class="example">AM_LDFLAGS = -module
lib_LTLIBRARIES = module1.la module2.la module3.la
</pre></div>

<a name="index-empty-_005fSOURCES"></a>
<a name="index-_005fSOURCES_002c-empty"></a>
<p>最后，在一种情况下，需要避免这种默认的源计算：当不应从源构建目标时。我们已经<a href="#true">真正</a>看到了这样一个例子;当目标的所有组成部分都已经编译并且仅需要使用<code>_LDADD</code>变量。然后有必要定义一个空<code>_SOURCES</code>变量，这样<code>automake</code>不计算默认值。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = target
target_SOURCES =
target_LDADD = libmain.a libmisc.a
</pre></div>

<hr>
<a name="LIBOBJS"></a>
<div class="header">
<p>下一个： <a href="#Program-Variables" rel="next" accesskey="n">程序变量</a> ，上一个： <a href="#Default-_005fSOURCES" rel="prev" accesskey="p">默认值_SOURCES</a> ，上一个： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Special-handling-for-LIBOBJS-and-ALLOCA"></a>
<h3 class="section">8.6特殊处理<code>LIBOBJS</code>和<code>ALLOCA</code></h3>

<a name="index-LIBOBJS_002c-example"></a>
<a name="index-ALLOCA_002c-example"></a>
<a name="index-LIBOBJS_002c-special-handling"></a>
<a name="index-ALLOCA_002c-special-handling"></a>
<a name="index-LTLIBOBJS-1"></a>
<a name="index-LIBOBJS-2"></a>
<a name="index-LTALLOCA-1"></a>
<a name="index-ALLOCA-1"></a>

<p>' <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp>变量列出了应编译到项目中的目标文件，以提供对宿主系统上丢失或损坏的功能的实现。它们被替换<samp>configure</samp> 。
</p>
<a name="index-AC_005fLIBOBJ-1"></a>

<p>这些变量由Autoconf宏定义，例如<code>AC_LIBOBJ</code> ， <code>AC_REPLACE_FUNCS</code> （请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Generic-Functions">通用功能检查</a> <cite>”</cite> ），或<code>AC_FUNC_ALLOCA</code> （请参见<cite>Autoconf手册</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Functions">特定功能检查</a> <cite>”</cite> ）。许多其他Autoconf宏调用<code>AC_LIBOBJ</code>要么<code>AC_REPLACE_FUNCS</code>填充“ <samp>$(LIBOBJS)</samp> '。
</p>
<a name="index-AC_005fLIBSOURCE"></a>

<p>使用这些变量与使用条件编译非常相似<code>AC_SUBST</code>变量，如“ <a href="#Conditional-Sources">条件来源”中所述</a> 。也就是说，在构建程序时， <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp> '应该添加到关联的' <samp>*_LDADD</samp> '变量，或者为' <samp>*_LIBADD</samp> '在构建库时变量。但是，无需在“ <samp>EXTRA_*_SOURCES</samp> '也没有定义' <samp>*_DEPENDENCIES</samp> '。自动制作会自动添加“ <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp> '到依赖项，它将自动发现相应源文件的列表（通过跟踪<code>AC_LIBSOURCE</code> Autoconf宏）。如果您已经定义了“ <samp>*_DEPENDENCIES</samp> '出于不相关的原因而明确，那么您要么需要手动添加这些变量，要么使用' <samp>EXTRA_*_DEPENDENCIES</samp> ' 代替 ' <samp>*_DEPENDENCIES</samp> '。
</p>
<p>这些变量通常用于构建与项目的所有程序链接的可移植性库。现在，我们回顾一个示例设置。第一， <samp>configure.ac</samp>包含一些可能影响<code>LIBOBJS</code>要么<code>ALLOCA</code> 。
</p>
<div class="example">
<pre class="example"># configure.ac
&hellip;
AC_CONFIG_LIBOBJ_DIR([lib])
&hellip;
AC_FUNC_MALLOC             dnl May add malloc.$(OBJEXT) to LIBOBJS
AC_FUNC_MEMCMP             dnl May add memcmp.$(OBJEXT) to LIBOBJS
AC_REPLACE_FUNCS([strdup]) dnl May add strdup.$(OBJEXT) to LIBOBJS
AC_FUNC_ALLOCA             dnl May add alloca.$(OBJEXT) to ALLOCA
&hellip;
AC_CONFIG_FILES([
  lib/Makefile
  src/Makefile
])
AC_OUTPUT
</pre></div>

<a name="index-AC_005fCONFIG_005fLIBOBJ_005fDIR"></a>

<p>的<code>AC_CONFIG_LIBOBJ_DIR</code>告诉Autoconf，这些目标文件的源文件将在<samp>lib/</samp>目录。Automake也可以使用此信息，否则它期望源文件位于“ <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp>使用变量。
</p>
<p>的<samp>lib/</samp>因此，目录应包含<samp>malloc.c</samp> ， <samp>memcmp.c</samp> ， <samp>strdup.c</samp> ， <samp>alloca.c</samp> 。这是它的<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example"># lib/Makefile.am

noinst_LIBRARIES = libcompat.a
libcompat_a_SOURCES =
libcompat_a_LIBADD = $(LIBOBJS) $(ALLOCA)
</pre></div>

<p>当然，该库可以具有任何名称，并且无论如何都不会被安装：它仅包含丢失或损坏的函数的替换版本，因此我们以后可以将其链接。许多项目在该库中还包含特定于该项目的额外功能：只需将它们添加到<code>_SOURCES</code>线。
</p>
<a name="index-Empty-libraries-and-_0024_0028LIBOBJS_0029"></a>
<a name="index-_0024_0028LIBOBJS_0029-and-empty-libraries"></a>
<p>不过，这里有一个小陷阱： <samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp> '可能是空的，并且构建空库不是可移植的。您应确保始终放入一些东西<samp>libcompat.a</samp> 。大多数项目还将在该目录中添加一些实用程序功能，并将其列出在<code>libcompat_a_SOURCES</code> ，所以实际上<samp>libcompat.a</samp>不能为空。
</p>
<p>最后，这里是如何从<samp>src/</samp>目录。
</p>
<div class="example">
<pre class="example"># src/Makefile.am

# Link all programs in this directory with libcompat.a
LDADD = ../lib/libcompat.a

bin_PROGRAMS = tool1 tool2 &hellip;
tool1_SOURCES = &hellip;
tool2_SOURCES = &hellip;
</pre></div>

<p>当选项<samp>subdir-objects</samp>不使用，如上例所示，变量“ <samp>$(LIBOBJS)</samp> ' 要么 ' <samp>$(ALLOCA)</samp>只能在其来源所在的目录中使用。例如，在这里使用' <samp>$(LIBOBJS)</samp> ' 要么 ' <samp>$(ALLOCA)</samp>在<samp>src/Makefile.am</samp> 。但是如果两者<samp>subdir-objects</samp>和<code>AC_CONFIG_LIBOBJ_DIR</code>使用，可以在其他目录中使用这些变量。例如<samp>src/Makefile.am</samp>可以进行如下更改。
</p>
<div class="example">
<pre class="example"># src/Makefile.am

AUTOMAKE_OPTIONS = subdir-objects
LDADD = $(LIBOBJS) $(ALLOCA)

bin_PROGRAMS = tool1 tool2 &hellip;
tool1_SOURCES = &hellip;
tool2_SOURCES = &hellip;
</pre></div>

<p>因为<samp>$(LIBOBJS)</samp> '和' <samp>$(ALLOCA)</samp> '包含以'结尾的目标文件名<samp>.$(OBJEXT)</samp> '，它们不适用于Libtool库（预期的对象扩展名是<samp>.lo</samp> ）： <code>LTLIBOBJS</code>和<code>LTALLOCA</code>应该改为使用。
</p>
<p><code>LTLIBOBJS</code>是由Autoconf自动定义的，不应手动定义（与过去一样），但是在撰写本文时<code>LTALLOCA</code>仍然需要从<code>ALLOCA</code>手动。看到<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code>与<code>LIBOBJS</code></a>在<cite>Autoconf手册中</cite> 。
</p>

<hr>
<a name="Program-Variables"></a>
<div class="header">
<p>下一篇： <a href="#Yacc-and-Lex" rel="next" accesskey="n">Yacc和Lex</a> ，上一篇： <a href="#LIBOBJS" rel="prev" accesskey="p">LIBOBJS</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Variables-used-when-building-a-program"></a>
<h3 class="section">8.7编译程序时使用的变量</h3>

<p>有时候，了解哪个<samp>Makefile</samp> Automake用于编译的变量，以及编译的顺序（请参见<a href="#Flag-Variables-Ordering">标记变量排序</a> ）；例如，在某些特殊情况下，您可能需要自己进行编译。
</p>
<p>有些变量是从Autoconf继承的。这些是<code>CC</code> ， <code>CFLAGS</code> ， <code>CPPFLAGS</code> ， <code>DEFS</code> ， <code>LDFLAGS</code>和<code>LIBS</code> 。
<a name="index-CC"></a>
<a name="index-CFLAGS"></a>
<a name="index-CPPFLAGS"></a>
<a name="index-DEFS"></a>
<a name="index-LDFLAGS"></a>
<a name="index-LIBS"></a>
</p>
<p>Automake自己定义了一些其他变量：</p>
<dl compact>
<dt><code>AM_CPPFLAGS</code>
<a name="index-AM_005fCPPFLAGS"></a>
</dt>
<dd><p>该变量的内容被传递给每个调用C预处理程序的编译。它是预处理器的参数列表。例如， <samp>-I</samp>和<samp>-D</samp>选项应在此处列出。
</p>
<p>Automake已经提供了一些<samp>-I</samp>选项自动添加到一个单独的变量中，该变量也传递给调用C预处理程序的每个编译。特别是它会产生“ <samp>-I.</samp> '，' <samp>-I$(srcdir)</samp> '和一个<samp>-I</samp>指向目录保存<samp>config.h</samp> （如果您使用过<code>AC_CONFIG_HEADERS</code> ）。您可以禁用默认<samp>-I</samp>使用选项<samp>nostdinc</samp>选项。
</p>
<p>当在构建过程中生成要包含的文件而不是分发tarball的一部分时，其位置在<code>$(builddir)</code> ，不在<code>$(srcdir)</code> 。这对于使用放置在子目录中的头文件并希望允许在源树之外进行构建的软件包尤其重要（请参见<a href="#VPATH-Builds">VPATH Builds</a> ）。在这种情况下，我们建议使用一对<samp>-I</samp>选项，例如“ <samp>-Isome/subdir -I$(srcdir)/some/subdir</samp> ' 要么 ' <samp>-I$(top_builddir)/some/subdir -I$(top_srcdir)/some/subdir</samp> '。请注意，对构建树的引用应先于对源树的引用，以便忽略源目录中意外遗留的生成文件。
</p>
<p><code>AM_CPPFLAGS</code>优先于每个可执行文件（或每个库）而被忽略<code>_CPPFLAGS</code>变量（如果已定义）。
</p>
</dd>
<dt><code>INCLUDES</code>
<a name="index-INCLUDES"></a>
</dt>
<dd><p>这项工作与<code>AM_CPPFLAGS</code> （或任何按目标<code>_CPPFLAGS</code>变量（如果使用）。这是相同功能的旧名称。不建议使用此变量；我们建议使用<code>AM_CPPFLAGS</code>和每个目标<code>_CPPFLAGS</code>代替。
</p>
</dd>
<dt><code>AM_CFLAGS</code>
<a name="index-AM_005fCFLAGS"></a>
</dt>
<dd><p>这是变量<samp>Makefile.am</samp>作者可以用来传递其他C编译器标志。在某些情况下，它不使用，而是优先于每个可执行文件（或每个库） <code>_CFLAGS</code> 。
</p>
</dd>
<dt><code>COMPILE</code>
<a name="index-COMPILE"></a>
</dt>
<dd><p>这是用于实际编译C源文件的命令。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>AM_LDFLAGS</code>
<a name="index-AM_005fLDFLAGS-1"></a>
</dt>
<dd><p>这是变量<samp>Makefile.am</samp>作者可以用来传递其他链接器标志。在某些情况下，它不使用，而是优先于每个可执行文件（或每个库） <code>_LDFLAGS</code> 。
</p>
</dd>
<dt><code>LINK</code>
<a name="index-LINK"></a>
</dt>
<dd><p>这是用于实际链接C程序的命令。它已经包含“ <samp>-o $@</samp> '和通常的变量引用（例如， <code>CFLAGS</code> ）;它以链接到的目标文件和库的名称作为“参数”。当链接器被每个目标覆盖时，不使用此变量<code>_LINK</code>变量或按目标标记导致Automake定义这样的<code>_LINK</code>变量。
</p></dd>
</dl>


<hr>
<a name="Yacc-and-Lex"></a>
<div class="header">
<p>下一篇： <a href="#C_002b_002b-Support" rel="next" accesskey="n">C ++支持</a> ，上一篇： <a href="#Program-Variables" rel="prev" accesskey="p">程序变量</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Yacc-and-Lex-support"></a>
<h3 class="section">8.8 Yacc和Lex支持</h3>

<p>Automake对Yacc和Lex有一些特殊的支持。
</p>
<p>Automake假设<samp>.c</samp>由生成的文件<code>yacc</code> （要么<code>lex</code> ）应使用输入文件的基本名称命名。也就是说，对于yacc源文件<samp>foo.y</samp> ，Automake将导致中间文件被命名<samp>foo.c</samp> （相对于<samp>y.tab.c</samp> ，这比较传统）。
</p>
<p>yacc源文件的扩展名用于确定生成的C或C ++源文件和头文件的扩展名。请注意，仅当<samp>-d</samp>使用Yacc选项；有关此标志及其指定方法的更多信息，请参见下文。带有扩展名的文件<samp>.y</samp>因此将变成<samp>.c</samp>来源和<samp>.h</samp>标头；同样<samp>.yy</samp>会变成<samp>.cc</samp>和<samp>.hh</samp> ， <samp>.y++</samp>会变成<samp>c++</samp>和<samp>h++</samp> ， <samp>.yxx</samp>会变成<samp>.cxx</samp>和<samp>.hxx</samp>和<samp>.ypp</samp>会变成<samp>.cpp</samp>和<samp>.hpp</samp> 。
</p>
<p>同样，lex源文件可用于生成C或C ++。扩展名<samp>.l</samp> ， <samp>.ll</samp> ， <samp>.l++</samp> ， <samp>.lxx</samp>和<samp>.lpp</samp>被认可。
</p>
<p>您绝对不应在任何文件中明确提及中间文件（C或C ++） <code>SOURCES</code>变量;只列出源文件。
</p>
<p>由生成的中间文件<code>yacc</code> （要么<code>lex</code> ）将包含在所做的任何分发中。这样，用户不需要<code>yacc</code>要么<code>lex</code> 。
</p>
<p>如果一个<code>yacc</code>看到源文件，那么您的<samp>configure.ac</samp>必须定义变量<code>YACC</code> 。这最容易通过调用宏来完成<code>AC_PROG_YACC</code> （请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ）。
</p>
<a name="index-YFLAGS"></a>
<a name="index-AM_005fYFLAGS"></a>
<p>什么时候<code>yacc</code>被调用，它被传递<code>AM_YFLAGS</code>和<code>YFLAGS</code> 。后者是用户变量，而前者是为<samp>Makefile.am</samp>作者。
</p>
<p><code>AM_YFLAGS</code>通常用于传递<samp>-d</samp>选择<code>yacc</code> 。Automake知道这意味着什么，并将自动调整其规则以更新和分发由' <samp>yacc -d</samp> ' <a name="DOCF4" href="#FOOT4"><sup>4</sup></a> 。但是，Automake无法猜测的是将使用此头文件的位置：由您决定在首次使用头文件之前先构建它。通常，这是必需的，以便在另一个文件包含头时，依赖项跟踪才能起作用。常见的解决方案是在以下位置列出头文件<code>BUILT_SOURCES</code> （请参阅<a href="#Sources">参考资料</a> ），如下所示。
</p>
<div class="example">
<pre class="example">BUILT_SOURCES = parser.h
AM_YFLAGS = -d
bin_PROGRAMS = foo
foo_SOURCES = &hellip; parser.y &hellip;
</pre></div>

<p>如果一个<code>lex</code>看到源文件，那么您的<samp>configure.ac</samp>必须定义变量<code>LEX</code> 。您可以使用<code>AC_PROG_LEX</code>为此（请参阅<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> <cite>”</cite> ），但使用<code>AM_PROG_LEX</code>建议使用Macro（请参阅<a href="#Macros">Macros</a> ）。
</p>
<a name="index-LFLAGS"></a>
<a name="index-AM_005fLFLAGS"></a>
<p>什么时候<code>lex</code>被调用，它被传递<code>AM_LFLAGS</code>和<code>LFLAGS</code> 。后者是用户变量，而前者是为<samp>Makefile.am</samp>作者。
</p>
<p>什么时候<code>AM_MAINTAINER_MODE</code> （请参阅<a href="#maintainer_002dmode">maintainer-mode</a> ），仅在以下情况下使用分布式Yacc和Lex源的重建规则： <code>maintainer-mode</code>启用，或文件被删除时。
</p>
<a name="index-ylwrap"></a>
<a name="index-yacc_002c-multiple-parsers"></a>
<a name="index-Multiple-yacc-parsers"></a>
<a name="index-Multiple-lex-lexers"></a>
<a name="index-lex_002c-multiple-lexers"></a>

<p>什么时候<code>lex</code>要么<code>yacc</code>使用了来源<code>automake -a</code>自动安装一个名为<code>ylwrap</code>在您的软件包中（请参阅<a href="#Auxiliary-Programs">辅助程序</a> ）。构建规则使用该程序来重命名这些工具的输出，并使其可以包含多个<code>yacc</code> （要么<code>lex</code> ）源文件放在一个目录中。（这是必需的，因为yacc的输出文件名是固定的，并且可以想象并行make可以调用多个以下实例） <code>yacc</code>同时。）
</p>
<p>对于<code>yacc</code> ，仅仅管理锁定是不够的。输出<code>yacc</code>内部始终使用相同的符号名称，因此无法链接两个<code>yacc</code>解析器放入同一可执行文件。
</p>
<p>我们建议使用以下用于<code>gdb</code> ：</p><div class="example">
<pre class="example">#define yymaxdepth c_maxdepth
#define yyparse c_parse
#define yylex   c_lex
#define yyerror c_error
#define yylval  c_lval
#define yychar  c_char
#define yydebug c_debug
#define yypact  c_pact
#define yyr1    c_r1
#define yyr2    c_r2
#define yydef   c_def
#define yychk   c_chk
#define yypgo   c_pgo
#define yyact   c_act
#define yyexca  c_exca
#define yyerrflag c_errflag
#define yynerrs c_nerrs
#define yyps    c_ps
#define yypv    c_pv
#define yys     c_s
#define yy_yys  c_yys
#define yystate c_state
#define yytmp   c_tmp
#define yyv     c_v
#define yy_yyv  c_yyv
#define yyval   c_val
#define yylloc  c_lloc
#define yyreds  c_reds
#define yytoks  c_toks
#define yylhs   c_yylhs
#define yylen   c_yylen
#define yydefred c_yydefred
#define yydgoto  c_yydgoto
#define yysindex c_yysindex
#define yyrindex c_yyrindex
#define yygindex c_yygindex
#define yytable  c_yytable
#define yycheck  c_yycheck
#define yyname   c_yyname
#define yyrule   c_yyrule
</pre></div>

<p>对于每个定义，请替换“ <samp>c_</samp> '加上您喜欢的前缀。这些定义了<code>bison</code> ， <code>byacc</code>和传统<code>yacc</code> s。如果找到使用此处未涵盖的符号的解析器生成器，请报告新名称，以便可以将其添加到列表中。
</p>

<hr>
<a name="C_002b_002b-Support"></a>
<div class="header">
<p>下一篇： <a href="#Objective-C-Support" rel="next" accesskey="n">Objective C支持</a> ，上一篇： <a href="#Yacc-and-Lex" rel="prev" accesskey="p">Yacc和Lex</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="C_002b_002b-Support-1"></a>
<h3 class="section">8.9 C ++支持</h3>

<a name="index-C_002b_002b-support"></a>
<a name="index-Support-for-C_002b_002b"></a>

<p>Automake包括对C ++的完全支持。
</p>
<p>任何包含C ++代码的软件包都必须定义输出变量<code>CXX</code>在<samp>configure.ac</samp> ;最简单的方法是使用<code>AC_PROG_CXX</code>宏（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ）。
</p>
<p>看到C ++源文件时，定义了一些其他变量：</p>
<dl compact>
<dt><code>CXX</code>
<a name="index-CXX"></a>
</dt>
<dd><p>C ++编译器的名称。
</p>
</dd>
<dt><code>CXXFLAGS</code>
<a name="index-CXXFLAGS"></a>
</dt>
<dd><p>任何要传递给C ++编译器的标志。
</p>
</dd>
<dt><code>AM_CXXFLAGS</code>
<a name="index-AM_005fCXXFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>CXXFLAGS</code> 。
</p>
</dd>
<dt><code>CXXCOMPILE</code>
<a name="index-CXXCOMPILE"></a>
</dt>
<dd><p>该命令用于实际编译C ++源文件。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>CXXLINK</code>
<a name="index-CXXLINK"></a>
</dt>
<dd><p>该命令用于实际链接C ++程序。
</p></dd>
</dl>


<hr>
<a name="Objective-C-Support"></a>
<div class="header">
<p>下一页： <a href="#Objective-C_002b_002b-Support" rel="next" accesskey="n">目的C ++的支持</a> ，上一篇： <a href="#C_002b_002b-Support" rel="prev" accesskey="p">C ++的支持</a> ，最多： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Objective-C-Support-1"></a>
<h3 class="section">8.10目标C支持</h3>

<a name="index-Objective-C-support"></a>
<a name="index-Support-for-Objective-C"></a>

<p>Automake包括对Objective C的一些支持。</p>
<p>任何包含目标C代码的程序包都必须定义输出变量<code>OBJC</code>在<samp>configure.ac</samp> ;最简单的方法是使用<code>AC_PROG_OBJC</code>宏（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ）。
</p>
<p>看到Objective C源文件时，还定义了一些其他变量：</p>
<dl compact>
<dt><code>OBJC</code>
<a name="index-OBJC"></a>
</dt>
<dd><p>Objective C编译器的名称。
</p>
</dd>
<dt><code>OBJCFLAGS</code>
<a name="index-OBJCFLAGS"></a>
</dt>
<dd><p>任何要传递给Objective C编译器的标志。
</p>
</dd>
<dt><code>AM_OBJCFLAGS</code>
<a name="index-AM_005fOBJCFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>OBJCFLAGS</code> 。
</p>
</dd>
<dt><code>OBJCCOMPILE</code>
<a name="index-OBJCCOMPILE"></a>
</dt>
<dd><p>该命令用于实际编译Objective C源文件。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>OBJCLINK</code>
<a name="index-OBJCLINK"></a>
</dt>
<dd><p>该命令用于实际链接Objective C程序。
</p></dd>
</dl>


<hr>
<a name="Objective-C_002b_002b-Support"></a>
<div class="header">
<p>下一篇： <a href="#Unified-Parallel-C-Support" rel="next" accesskey="n">统一并行C支持</a> ，上一篇： <a href="#Objective-C-Support" rel="prev" accesskey="p">目标C支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Objective-C_002b_002b-Support-1"></a>
<h3 class="section">8.11目标C ++支持</h3>

<a name="index-Objective-C_002b_002b-support"></a>
<a name="index-Support-for-Objective-C_002b_002b"></a>

<p>Automake包括对Objective C ++的一些支持。
</p>
<p>任何包含Objective C ++代码的软件包都必须定义输出变量<code>OBJCXX</code>在<samp>configure.ac</samp> ;最简单的方法是使用<code>AC_PROG_OBJCXX</code>宏（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ）。
</p>
<p>看到Objective C ++源文件时，定义了一些其他变量：</p>
<dl compact>
<dt><code>OBJCXX</code>
<a name="index-OBJCXX"></a>
</dt>
<dd><p>Objective C ++编译器的名称。
</p>
</dd>
<dt><code>OBJCXXFLAGS</code>
<a name="index-OBJCXXFLAGS"></a>
</dt>
<dd><p>任何要传递给Objective C ++编译器的标志。
</p>
</dd>
<dt><code>AM_OBJCXXFLAGS</code>
<a name="index-AM_005fOBJCXXFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>OBJCXXFLAGS</code> 。
</p>
</dd>
<dt><code>OBJCXXCOMPILE</code>
<a name="index-OBJCXXCOMPILE"></a>
</dt>
<dd><p>该命令用于实际编译Objective C ++源文件。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>OBJCXXLINK</code>
<a name="index-OBJCXXLINK"></a>
</dt>
<dd><p>该命令用于实际链接Objective C ++程序。
</p></dd>
</dl>


<hr>
<a name="Unified-Parallel-C-Support"></a>
<div class="header">
<p>下一篇： <a href="#Assembly-Support" rel="next" accesskey="n">汇编支持</a> ，上一篇： <a href="#Objective-C_002b_002b-Support" rel="prev" accesskey="p">Objective C ++支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Unified-Parallel-C-Support-1"></a>
<h3 class="section">8.12统一并行C支持</h3>

<a name="index-Unified-Parallel-C-support"></a>
<a name="index-Support-for-Unified-Parallel-C"></a>

<p>Automake包括对Unified Parallel C的一些支持。</p>
<p>任何包含Unified Parallel C代码的程序包都必须定义输出变量<code>UPC</code>在<samp>configure.ac</samp> ;最简单的方法是使用<code>AM_PROG_UPC</code>宏（请参见<a href="#Public-Macros">公共宏</a> ）。
</p>
<p>看到Unified Parallel C源文件时，还定义了一些其他变量：</p>
<dl compact>
<dt><code>UPC</code>
<a name="index-UPC-1"></a>
</dt>
<dd><p>Unified Parallel C编译器的名称。
</p>
</dd>
<dt><code>UPCFLAGS</code>
<a name="index-UPCFLAGS"></a>
</dt>
<dd><p>任何要传递给Unified Parallel C编译器的标志。
</p>
</dd>
<dt><code>AM_UPCFLAGS</code>
<a name="index-AM_005fUPCFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>UPCFLAGS</code> 。
</p>
</dd>
<dt><code>UPCCOMPILE</code>
<a name="index-UPCCOMPILE"></a>
</dt>
<dd><p>该命令用于实际编译Unified Parallel C源文件。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>UPCLINK</code>
<a name="index-UPCLINK"></a>
</dt>
<dd><p>该命令用于实际链接Unified Parallel C程序。
</p></dd>
</dl>


<hr>
<a name="Assembly-Support"></a>
<div class="header">
<p>下一篇： <a href="#Fortran-77-Support" rel="next" accesskey="n">Fortran 77支持</a> ，上一篇： <a href="#Unified-Parallel-C-Support" rel="prev" accesskey="p">统一并行C支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Assembly-Support-1"></a>
<h3 class="section">8.13装配支持</h3>

<p>Automake包括对汇编代码的某些支持。汇编器文件有两种形式：普通（ <samp>*.s</samp> ）并由...预处理<code>CPP</code> （ <samp>*.S</samp>要么<samp>*.sx</samp> ）。
</p>
<a name="index-CCAS-1"></a>
<a name="index-CCASFLAGS-1"></a>
<a name="index-CPPFLAGS-1"></a>
<a name="index-AM_005fCCASFLAGS"></a>
<a name="index-AM_005fCPPFLAGS-1"></a>
<p>变量<code>CCAS</code>保存用于生成汇编代码的编译器的名称。该编译器必须有点像C编译器。特别是它必须接受<samp>-c</samp>和<samp>-o</samp> 。的值<code>CCASFLAGS</code>和<code>AM_CCASFLAGS</code> （或其按目标定义）传递给编译。对于预处理文件， <code>DEFS</code> ， <code>DEFAULT_INCLUDES</code> ， <code>INCLUDES</code> ， <code>CPPFLAGS</code>和<code>AM_CPPFLAGS</code>也被使用。
</p>
<p>autoconf宏<code>AM_PROG_AS</code>将定义<code>CCAS</code>和<code>CCASFLAGS</code>为您服务（除非已设置，否则只需设置<code>CCAS</code>到C编译器<code>CCASFLAGS</code>到C编译器标志），但是您可以通过其他方式自由定义这些变量。
</p>
<p>仅后缀<samp>.s</samp> ， <samp>.S</samp>和<samp>.sx</samp>被认可<code>automake</code>作为包含汇编代码的文件。
</p>

<hr>
<a name="Fortran-77-Support"></a>
<div class="header">
<p>下一篇： <a href="#Fortran-9x-Support" rel="next" accesskey="n">Fortran 9x支持</a> ，上一篇： <a href="#Assembly-Support" rel="prev" accesskey="p">组装支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Fortran-77-Support-1"></a>
<h3 class="section">8.14 Fortran 77支持</h3>

<a name="index-Fortran-77-support"></a>
<a name="index-Support-for-Fortran-77"></a>

<p>Automake包括对Fortran 77的完全支持。
</p>
<p>包括Fortran 77代码在内的任何程序包都必须定义输出变量<code>F77</code>在<samp>configure.ac</samp> ;最简单的方法是使用<code>AC_PROG_F77</code>宏（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ）。
</p>
<p>看到Fortran 77源文件时，还定义了一些其他变量：</p>
<dl compact>
<dt><code>F77</code>
<a name="index-F77"></a>
</dt>
<dd><p>Fortran 77编译器的名称。
</p>
</dd>
<dt><code>FFLAGS</code>
<a name="index-FFLAGS"></a>
</dt>
<dd><p>任何要传递给Fortran 77编译器的标志。
</p>
</dd>
<dt><code>AM_FFLAGS</code>
<a name="index-AM_005fFFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>FFLAGS</code> 。
</p>
</dd>
<dt><code>RFLAGS</code>
<a name="index-RFLAGS"></a>
</dt>
<dd><p>任何要传递给Ratfor编译器的标志。
</p>
</dd>
<dt><code>AM_RFLAGS</code>
<a name="index-AM_005fRFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>RFLAGS</code> 。
</p>
</dd>
<dt><code>F77COMPILE</code>
<a name="index-F77COMPILE"></a>
</dt>
<dd><p>该命令用于实际编译Fortran 77源文件。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>FLINK</code>
<a name="index-FLINK"></a>
</dt>
<dd><p>该命令用于实际链接纯Fortran 77程序或共享库。
</p>
</dd>
</dl>

<p>Automake除了可以对Fortran 77和Ratfor源文件进行编译之外，还可以进行预处理<a name="DOCF5" href="#FOOT5"><sup>5</sup></a> 。Automake还包含一些对创建程序和共享库的支持，这些程序和共享库是Fortran 77和其他语言的<a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">混合体</a> （请参阅<a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合使用</a> ）。
</p>
<p>以下各节将介绍这些问题。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Preprocessing-Fortran-77" accesskey="1">预处理Fortran 77</a> ：</td><td>  </td><td align="left" valign="top">预处理Fortran 77来源</td></tr>
<tr><td align="left" valign="top">• <a href="#Compiling-Fortran-77-Files" accesskey="2">编译Fortran 77文件</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 77源</td></tr>
<tr><td align="left" valign="top">• <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b" accesskey="3">将Fortran 77与C和C ++混合</a> ：</td><td>  </td><td align="left" valign="top">将Fortran 77与C和C ++混合</td></tr>
</tbody></table>


<hr>
<a name="Preprocessing-Fortran-77"></a>
<div class="header">
<p>下一页： <a href="#Compiling-Fortran-77-Files" rel="next" accesskey="n">编译Fortran 77文件</a> ，向上： <a href="#Fortran-77-Support" rel="up" accesskey="u">Fortran 77支持</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Preprocessing-Fortran-77-1"></a>
<h4 class="subsection">8.14.1预处理Fortran 77</h4>

<a name="index-Preprocessing-Fortran-77"></a>
<a name="index-Fortran-77_002c-Preprocessing"></a>
<a name="index-Ratfor-programs"></a>

<p><samp>N.f</samp>是从<samp>N.F</samp>要么<samp>N.r</samp> 。该规则仅运行预处理器，以将可预处理的Fortran 77或Ratfor源文件转换为严格的Fortran 77源文件。使用的精确命令如下：</p>
<dl compact>
<dt><samp>.F</samp></dt>
<dd><p><code>$(F77) -F $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS)<br> $(AM_FFLAGS) $(FFLAGS)</code>
</p>
</dd>
<dt><samp>.r</samp></dt>
<dd><p><code>$(F77) -F $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)</code>
</p>
</dd>
</dl>


<hr>
<a name="Compiling-Fortran-77-Files"></a>
<div class="header">
<p>下一篇： <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b" rel="next" accesskey="n">将Fortran 77与C和C ++混合在一起</a> ，上一篇：对<a href="#Mixing-Fortran-77-With-C-and-C_002b_002b" rel="next" accesskey="n">Fortran 77进行</a> <a href="#Preprocessing-Fortran-77" rel="prev" accesskey="p">预处理</a> ，上一篇： <a href="#Fortran-77-Support" rel="up" accesskey="u">Fortran 77支持</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Compiling-Fortran-77-Files-1"></a>
<h4 class="subsection">8.14.2编译Fortran 77文件</h4>

<p><samp>N.o</samp>是从<samp>N.f</samp> ， <samp>N.F</samp>要么<samp>N.r</samp>通过运行Fortran 77编译器。使用的精确命令如下：</p>
<dl compact>
<dt><samp>.f</samp></dt>
<dd><p><code>$(F77) -c $(AM_FFLAGS) $(FFLAGS)</code>
</p>
</dd>
<dt><samp>.F</samp></dt>
<dd><p><code>$(F77) -c $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS)<br> $(AM_FFLAGS) $(FFLAGS)</code>
</p>
</dd>
<dt><samp>.r</samp></dt>
<dd><p><code>$(F77) -c $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)</code>
</p>
</dd>
</dl>


<hr>
<a name="Mixing-Fortran-77-With-C-and-C_002b_002b"></a>
<div class="header">
<p>上一页： <a href="#Compiling-Fortran-77-Files" rel="prev" accesskey="p">编译Fortran 77文件</a> ，向上： <a href="#Fortran-77-Support" rel="up" accesskey="u">Fortran 77支持</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Mixing-Fortran-77-With-C-and-C_002b_002b-1"></a>
<h4 class="subsection">8.14.3将Fortran 77与C和C ++混合</h4>

<a name="index-Fortran-77_002c-mixing-with-C-and-C_002b_002b"></a>
<a name="index-Mixing-Fortran-77-with-C-and-C_002b_002b"></a>
<a name="index-Linking-Fortran-77-with-C-and-C_002b_002b"></a>
<a name="index-cfortran"></a>
<a name="index-Mixing-Fortran-77-with-C-and_002for-C_002b_002b"></a>

<p>Automake当前仅提供<em>有限的</em>支持来创建由Fortran 77和C和/或C ++混合而成的程序和共享库。但是，还有许多其他问题与将Fortran 77与其他语言混合使用有关，这些问题（当前） <em>尚未</em>由Automake处理，而是由其他软件包<a name="DOCF6" href="#FOOT6"><sup>6</sup></a>处理。
</p>
<p>自动制作可以通过两种方式提供帮助：</p>
<ol>
<li>根据源代码的组合自动选择链接器。

</li><li>自动选择适当的链接器标志（例如， <samp>-L</samp>和<samp>-l</samp> ）传递给自动选择的链接器，以便在适当的Fortran 77内部和运行时库中进行链接。

<a name="index-FLIBS_002c-defined"></a>
<a name="index-FLIBS"></a>
<p>这些额外的Fortran 77链接器标志在输出变量中提供<code>FLIBS</code>由<code>AC_F77_LIBRARY_LDFLAGS</code> Autoconf宏。请参见<cite>《 Autoconf手册》</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Fortran-Compiler">Fortran编译器特性</a> 。
</p></li></ol>

<p>如果Automake检测到程序或共享库（如某些<code>_PROGRAMS</code>要么<code>_LTLIBRARIES</code>主要）包含源代码，该源代码是Fortran 77与C和/或C ++的混合，因此它要求该宏<code>AC_F77_LIBRARY_LDFLAGS</code>被召唤<samp>configure.ac</samp> ，或者<code>$(FLIBS)</code>出现在适当的位置<code>_LDADD</code> （对于程序）或<code>_LIBADD</code> （对于共享库）变量。这是写信的人的责任<samp>Makefile.am</samp>确保“ <samp>$(FLIBS)</samp> '出现在适当的位置<code>_LDADD</code>要么<code>_LIBADD</code>变量。
</p>
<a name="index-Mixed-language-example"></a>
<a name="index-Example_002c-mixed-language"></a>

<p>例如，考虑以下<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES  = main.cc foo.f
foo_LDADD    = libfoo.la $(FLIBS)

pkglib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES  = bar.f baz.c zardoz.cc
libfoo_la_LIBADD   = $(FLIBS)
</pre></div>

<p>在这种情况下，Automake将坚持认为<code>AC_F77_LIBRARY_LDFLAGS</code>在中提到<samp>configure.ac</samp> 。另外，如果“ <samp>$(FLIBS)</samp> ”中没有提到<code>foo_LDADD</code>和<code>libfoo_la_LIBADD</code> ，则Automake会发出警告。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#How-the-Linker-is-Chosen" accesskey="1">如何选择链接器</a> ：</td><td>  </td><td align="left" valign="top">自动链接器选择</td></tr>
</tbody></table>

<hr>
<a name="How-the-Linker-is-Chosen"></a>
<div class="header">
<p>上一篇： <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b" rel="up" accesskey="u">将Fortran 77与C和C ++混合</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="How-the-Linker-is-Chosen-1"></a>
<h4 class="subsubsection">8.14.3.1如何选择链接器</h4>

<a name="index-Automatic-linker-selection"></a>
<a name="index-Selecting-the-linker-automatically"></a>

<p>当程序或库混合几种语言时，Automake将根据以下优先级选择链接器。（括号中的名称是包含链接命令的变量。）
</p>
<ol>
<li> <a name="index-GCJLINK"></a>本机Java（ <code>GCJLINK</code> ）</li><li> <a name="index-OBJCXXLINK-1"></a>目标C ++（ <code>OBJCXXLINK</code> ）</li><li> <a name="index-CXXLINK-1"></a> C ++（ <code>CXXLINK</code> ）</li><li> <a name="index-F77LINK"></a> Fortran 77（ <code>F77LINK</code> ）</li><li> <a name="index-FCLINK"></a> Fortran（ <code>FCLINK</code> ）</li><li> <a name="index-OBJCLINK-1"></a>目标C（ <code>OBJCLINK</code> ）</li><li> <a name="index-UPCLINK-1"></a>统一并行C（ <code>UPCLINK</code> ）</li><li> <a name="index-LINK-1"></a> C （ <code>LINK</code> ）</li></ol>

<p>例如，如果将Fortran 77，C和C ++源代码编译成程序，则将使用C ++链接器。在这种情况下，如果C或Fortran 77链接器需要C ++链接器未包含的任何特殊库，则必须将它们手动添加到<code>_LDADD</code>要么<code>_LIBADD</code>由用户编写变量<samp>Makefile.am</samp> 。
</p>
<p>自动制作仅查看列在其中的文件名<samp>_SOURCES</samp>变量以选择链接器，默认为C链接器。有时这很不方便，因为您正在链接使用另一种语言编写的库，并且希望更适当地设置链接器。请参阅<a href="#Libtool-Convenience-Libraries">Libtool便利库</a> ，获得有关技巧的信息<code>nodist_EXTRA_…_SOURCES</code> 。
</p>
<p>每个目标<code>_LINK</code>变量将覆盖上面的选择。每个目标的链接标志将导致Automake写入每个目标<code>_LINK</code>根据上面选择的语言来选择变量。
</p>

<hr>
<a name="Fortran-9x-Support"></a>
<div class="header">
<p>下一篇： <a href="#Java-Support-with-gcj" rel="next" accesskey="n">带有gcj的Java支持</a> ，上一篇： <a href="#Fortran-77-Support" rel="prev" accesskey="p">Fortran 77支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Fortran-9x-Support-1"></a>
<h3 class="section">8.15 Fortran 9x支持</h3>

<a name="index-Fortran-9x-support"></a>
<a name="index-Support-for-Fortran-9x"></a>

<p>Automake包括对Fortran 9x的支持。
</p>
<p>任何包含Fortran 9x代码的软件包都必须定义输出变量<code>FC</code>在<samp>configure.ac</samp> ;最简单的方法是使用<code>AC_PROG_FC</code>宏（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ）。
</p>
<p>看到Fortran 9x源文件时，还定义了一些其他变量：</p>
<dl compact>
<dt><code>FC</code>
<a name="index-FC"></a>
</dt>
<dd><p>Fortran 9x编译器的名称。
</p>
</dd>
<dt><code>FCFLAGS</code>
<a name="index-FCFLAGS"></a>
</dt>
<dd><p>任何传递给Fortran 9x编译器的标志。
</p>
</dd>
<dt><code>AM_FCFLAGS</code>
<a name="index-AM_005fFCFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>FCFLAGS</code> 。
</p>
</dd>
<dt><code>FCCOMPILE</code>
<a name="index-FCCOMPILE"></a>
</dt>
<dd><p>该命令用于实际编译Fortran 9x源文件。文件名被附加以形成完整的命令行。
</p>
</dd>
<dt><code>FCLINK</code>
<a name="index-FCLINK-1"></a>
</dt>
<dd><p>该命令用于实际链接纯Fortran 9x程序或共享库。
</p>
</dd>
</dl>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Compiling-Fortran-9x-Files" accesskey="1">编译Fortran 9x文件</a> ：</td><td>  </td><td align="left" valign="top">编译Fortran 9x源</td></tr>
</tbody></table>

<hr>
<a name="Compiling-Fortran-9x-Files"></a>
<div class="header">
<p>向上： <a href="#Fortran-9x-Support" rel="up" accesskey="u">Fortran 9x支持</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Compiling-Fortran-9x-Files-1"></a>
<h4 class="subsection">8.15.1编译Fortran 9x文件</h4>

<p><samp><var>file</var>.o</samp>是从<samp><var>file</var>.f90</samp> ， <samp><var>file</var>.f95</samp> ， <samp><var>file</var>.f03</samp> ， 要么<samp><var>file</var>.f08</samp>通过运行Fortran 9x编译器。使用的精确命令如下：</p>
<dl compact>
<dt><samp>.f90</samp></dt>
<dd><p><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f90) $<</code>
</p>
</dd>
<dt><samp>.f95</samp></dt>
<dd><p><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f95) $<</code>
</p>
</dd>
<dt><samp>.f03</samp></dt>
<dd><p><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f03) $<</code>
</p>
</dd>
<dt><samp>.f08</samp></dt>
<dd><p><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f08) $<</code>
</p>
</dd>
</dl>

<hr>
<a name="Java-Support-with-gcj"></a>
<div class="header">
<p>下一篇： <a href="#Vala-Support" rel="next" accesskey="n">Vala支持</a> ，上一篇： <a href="#Fortran-9x-Support" rel="prev" accesskey="p">Fortran 9x支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Compiling-Java-sources-using-gcj"></a>
<h3 class="section">8.16使用gcj编译Java源代码</h3>

<a name="index-Java-support-with-gcj"></a>
<a name="index-Support-for-Java-with-gcj"></a>
<a name="index-Java-to-native-code_002c-compilation"></a>
<a name="index-Compilation-of-Java-to-native-code"></a>

<p>Automake使用以下命令支持本机编译的Java： <code>gcj</code> ，即GNU Compiler Collection的Java前端（对使用Java将Java编译为字节码的基本支持）。 <code>javac</code> <em>尽管不推荐使用</em>编译器；参见<a href="#Java">Java</a> ）。
</p>
<p>任何包含要编译的Java代码的软件包都必须定义输出变量<code>GCJ</code>在<samp>configure.ac</samp> ;变量<code>GCJFLAGS</code>还必须以某种方式定义（在<samp>configure.ac</samp>要么<samp>Makefile.am</samp> ）。最简单的方法是使用<code>AM_PROG_GCJ</code>宏。
</p>
<a name="index-GCJFLAGS-1"></a>

<p>默认情况下，包含Java源文件的程序与<code>gcj</code> 。
</p>
<p>与往常一样， <code>AM_GCJFLAGS</code>传递给每个编译调用<code>gcj</code> （以其作为提前编译器的角色，在调用它进行创建时<samp>.class</samp>文件， <code>AM_JAVACFLAGS</code>改为使用）。如果有必要将选项传递给<code>gcj</code>从<samp>Makefile.am</samp> ，此变量，而不是用户变量<code>GCJFLAGS</code> ，应使用。
</p>
<a name="index-AM_005fGCJFLAGS"></a>

<p><code>gcj</code>可以用来编译<samp>.java</samp> ， <samp>.class</samp> ， <samp>.zip</samp> ， 要么<samp>.jar</samp>文件。
</p>
<p>连结时<code>gcj</code>要求使用<samp>--main=</samp>选项。最简单的方法是使用<code>_LDFLAGS</code>程序的变量。
</p>

<hr>
<a name="Vala-Support"></a>
<div class="header">
<p>下一篇： <a href="#Support-for-Other-Languages" rel="next" accesskey="n">对其他语言的支持</a> ，上一篇： <a href="#Java-Support-with-gcj" rel="prev" accesskey="p">gcj对Java的支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Vala-Support-1"></a>
<h3 class="section">8.17 Vala支持</h3>

<a name="index-Vala-Support"></a>
<a name="index-Support-for-Vala"></a>

<p>Automake为Vala提供初始支持（ <a href="http://www.vala-project.org/">http://www.vala-project.org/</a> ）。这需要valac版本0.7.0或更高版本，并且当前需要用户使用GNU <code>make</code> 。
</p>
<div class="example">
<pre class="example">foo_SOURCES = foo.vala bar.vala zardoc.c
</pre></div>

<p>任何<samp>.vala</samp>列出的文件<code>_SOURCES</code>变量将由Vala编译器编译为C代码。产生的<samp>.c</samp>文件已分发。最终用户不需要安装Vala编译器。
</p>
<p>Automake附带了一个名为Autoconf的宏<code>AM_PROG_VALAC</code>它将找到Vala编译器并有选择地检查其版本号。
</p>
<dl>
<dt><a name="index-AM_005fPROG_005fVALAC"></a>巨集： <strong>AM_PROG_VALAC</strong> <em>（ <span class="roman">[</span> <var>minimum-version</var> <span class="roman">]</span> ， <span class="roman">[</span> <var>action-if-found</var> <span class="roman">]</span> ，</em></dt>
<dd><p><span class="roman">[</span> <var>action-if-not-found</var> <span class="roman">]</span> ）在以下位置搜索Vala编译器<code>PATH</code> 。如果找到，则变量<code>VALAC</code>设置为指向它（有关更多详细信息，请参见下文）。该宏带有三个可选参数。第一个参数（如果存在）是编译此程序包所需的Vala编译器的最低版本。如果找到编译器并且满足<var>minimum-version</var> ， 然后<var>action-if-found</var>运行（默认不执行任何操作）。除此以外， <var>action-if-not-found</var>运行。如果<var>action-if-not-found</var>如果未指定，则默认值为在未找到编译器或发现编译器版本太旧的情况下显示警告。
</p></dd></dl>

<p>编译Vala源时使用了一些变量：</p>
<dl compact>
<dt><code>VALAC</code>
<a name="index-VALAC"></a>
</dt>
<dd><p>到Vala编译器的绝对路径，或简称为' <samp>valac</samp> '如果在配置运行时找不到合适的编译器Vala。
</p>
</dd>
<dt><code>VALAFLAGS</code>
<a name="index-VALAFLAGS"></a>
</dt>
<dd><p>Vala编译器的其他参数。
</p>
</dd>
<dt><code>AM_VALAFLAGS</code>
<a name="index-AM_005fVALAFLAGS"></a>
</dt>
<dd><p>维护者的变体<code>VALAFLAGS</code> 。
</p>
<div class="example">
<pre class="example">lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = foo.vala
</pre></div>
</dd>
</dl>

<p>请注意，当前您无法使用每个目标<code>*_VALAFLAGS</code> （请参阅<a href="#Renamed-Objects">重命名对象</a> ）以从一个Vala源文件生成不同的C文件。
</p>

<hr>
<a name="Support-for-Other-Languages"></a>
<div class="header">
<p>下一篇： <a href="#Dependencies" rel="next" accesskey="n">依赖项</a> ，上一篇： <a href="#Vala-Support" rel="prev" accesskey="p">Vala支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Support-for-Other-Languages-1"></a>
<h3 class="section">8.18支持其他语言</h3>

<p>Automake当前仅包括对C，C ++（请参阅<a href="#C_002b_002b-Support">C ++支持</a> ），Objective C（请参见<a href="#Objective-C-Support">Objective C支持</a> ），Objective C ++（请参见<a href="#Objective-C_002b_002b-Support">Objective C ++支持</a> ），Fortran 77（请参见<a href="#Fortran-77-Support">Fortran 77支持</a> ），Fortran 9x（请参阅<a href="#Fortran-9x-Support">Fortran 9x支持）的完全支持。</a> ）和Java（请参阅<a href="#Java-Support-with-gcj">带有gcj的Java支持</a> ）。对其他语言的基本支持，将根据用户需求对其提供更好的支持。
</p>
<p>通过后缀规则处理（请参见<a href="#Suffixes">后缀</a> ）可以对添加自己的语言提供一些有限的支持。
</p>
<hr>
<a name="Dependencies"></a>
<div class="header">
<p>下一篇： <a href="#EXEEXT" rel="next" accesskey="n">EXEEXT</a> ，上一篇： <a href="#Support-for-Other-Languages" rel="prev" accesskey="p">对其他语言的支持</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Automatic-dependency-tracking"></a>
<h3 class="section">8.19自动依赖性跟踪</h3>

<p>作为开发人员，不断更新<samp>Makefile.am</samp>每当项目中包含文件的依存关系发生更改时。Automake提供了一种自动跟踪依赖项更改的方法（请参阅<a href="#Dependency-Tracking">Dependency Tracking</a> ）。
</p>
<a name="index-Dependency-tracking-1"></a>
<a name="index-Automatic-dependency-tracking"></a>

<p>Automake始终使用完整的依赖项进行编译，包括系统头文件。Automake的模型是依赖性计算应该是构建的副作用。为此，通过一个特殊的包装程序运行所有编译来计算依赖关系<code>depcomp</code> 。<code>depcomp</code>了解如何哄骗许多不同的C和C ++编译器以所需的格式生成依赖项信息。' <samp>automake -a</samp> ' 将会安装<code>depcomp</code>进入您的源代码树。如果<code>depcomp</code>由于无法弄清楚如何正确调用编译器，因此将仅对构建禁用依赖跟踪。
</p>
<a name="index-depcomp"></a>

<p>拥有较早版本的Automake的经验（请参见《 Automake <cite>简要历史》中的</cite> <a href="automake-history.html#Dependency-Tracking-Evolution">依赖关系跟踪演变</a> ）告诉我们，由于配置变化太大，仅在维护者系统上生成依赖关系并不可靠。因此，Automake会在构建时实现依赖项跟踪。
</p>
<p>自动依赖跟踪可以通过以下方式禁止<samp>no-dependencies</samp>在变量中<code>AUTOMAKE_OPTIONS</code>或通过<samp>no-dependencies</samp>作为对<code>AM_INIT_AUTOMAKE</code> （这应该是首选方式）。或者，您可以调用<code>automake</code>与<samp>-i</samp>选项。默认情况下，依赖跟踪已启用。
</p>
<a name="index-AUTOMAKE_005fOPTIONS-1"></a>
<a name="index-no_002ddependencies"></a>

<p>制作软件包的人还可以选择通过配置以下项来禁用依赖项跟踪<samp>--disable-dependency-tracking</samp> 。
</p>
<a name="index-Disabling-dependency-tracking"></a>
<a name="index-Dependency-tracking_002c-disabling"></a>


<hr>
<a name="EXEEXT"></a>
<div class="header">
<p>上一篇： <a href="#Dependencies" rel="prev" accesskey="p">依赖项</a> ，上一篇： <a href="#Programs" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Support-for-executable-extensions"></a>
<h3 class="section">8.20支持可执行扩展</h3>

<a name="index-Executable-extension"></a>
<a name="index-Extension_002c-executable"></a>
<a name="index-Windows"></a>

<p>在某些平台（例如Windows）上，可执行文件应具有扩展名，例如<samp>.exe</samp> 。在这些平台上，某些编译器（其中包括GCC）将自动生成<samp>foo.exe</samp>当要求生成<samp>foo</samp> 。
</p>
<p>Automake为此提供了几乎透明的支持。不幸的是<em>大多数</em>情况并不<em>完全</em>意味着。在英语词典被修订之前，如果您的软件包必须支持这些平台，则您将不得不协助Automake。
</p>
<p>您必须意识到的一件事是，在内部，Automake会重写如下内容：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = liver
</pre></div>

<p>对此：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = liver$(EXEEXT)
</pre></div>

<p>Automake生成的目标也被赋予了' <samp>$(EXEEXT)</samp> ' 延期。
</p>
<p>变量<code>TESTS</code>和<code>XFAIL_TESTS</code> （请参阅<a href="#Simple-Tests">简单测试</a> ）（如果它们包含已在同一程序中声明为程序的文件名）也将被重写<samp>Makefile</samp> 。（当某些来自<code>check_PROGRAMS</code>列在<code>TESTS</code> ）
</p>
<p>但是，Automake无法将此重写应用于<code>configure</code>换人。这意味着，如果您有条件地使用此类替换来构建程序，则您的<samp>configure.ac</samp>必须注意添加“ <samp>$(EXEEXT)</samp> '在构造输出变量时。
</p>
<p>有时维护者喜欢为他们的程序编写一个明确的链接规则。没有可执行文件扩展支持，这很容易-您只需编写一个目标为程序名称的规则即可。但是，启用可执行扩展名支持后，您必须改为添加“ <samp>$(EXEEXT)</samp>后缀。
</p>
<p>对于知道自己的程序包永远不会在具有可执行扩展名的平台上运行的维护人员而言，这可能是个麻烦。对于那些维护者， <samp>no-exeext</samp>选项（请参阅<a href="#Options">选项</a> ）将禁用此功能。这以相当丑陋的方式起作用。如果<samp>no-exeext</samp>可见，则存在一个名为的目标的规则<code>foo</code>在<samp>Makefile.am</samp>将覆盖<code>automake</code>生成的规则<samp>foo$(EXEEXT)</samp> '。没有<samp>no-exeext</samp>选项，此用法将提供诊断。
</p>

<hr>
<a name="Other-Objects"></a>
<div class="header">
<p>下一页： <a href="#Other-GNU-Tools" rel="next" accesskey="n">其他GNU工具</a> ，上一页： <a href="#Programs" rel="prev" accesskey="p">程序</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Other-Derived-Objects"></a>
<h2 class="chapter">9其他派生对象</h2>

<p>Automake可以处理不是C程序的派生对象。有时必须明确提供对实际构建此类对象的支持，但是Automake仍将自动处理安装和分发。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Scripts" accesskey="1">脚本</a> ：</td><td>  </td><td align="left" valign="top">可执行脚本</td></tr>
<tr><td align="left" valign="top">•标<a href="#Headers" accesskey="2">头</a> ：</td><td>  </td><td align="left" valign="top">头文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Data" accesskey="3">数据</a> ：</td><td>  </td><td align="left" valign="top">与体系结构无关的数据文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Sources" accesskey="4">资料来源</a> ：</td><td>  </td><td align="left" valign="top">派生来源</td></tr>
</tbody></table>


<hr>
<a name="Scripts"></a>
<div class="header">
<p>下一页：标<a href="#Headers" rel="next" accesskey="n">头</a> ，上一页： <a href="#Other-Objects" rel="up" accesskey="u">其他对象</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Executable-Scripts"></a>
<h3 class="section">9.1可执行脚本</h3>

<a name="index-_005fSCRIPTS-primary_002c-defined"></a>
<a name="index-SCRIPTS-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-SCRIPTS"></a>
<a name="index-_005fSCRIPTS"></a>
<a name="index-Installing-scripts"></a>

<p>可以定义和安装脚本程序。此类程序使用<code>SCRIPTS</code>主要名称。当脚本以最终的可安装形式分发时， <samp>Makefile</samp>通常看起来如下： <a name="index-SCRIPTS-1"></a>
</p>
<div class="example">
<pre class="example"># Install my_script in $(bindir) and distribute it.
dist_bin_SCRIPTS = my_script
</pre></div>

<p>默认情况下不分发脚本。正如我们刚刚看到的，可以使用<code>dist_</code>与其他主要元素一样的前缀。
</p>
<a name="index-SCRIPTS_002c-installation-directories"></a>
<a name="index-bin_005fSCRIPTS"></a>
<a name="index-sbin_005fSCRIPTS"></a>
<a name="index-libexec_005fSCRIPTS"></a>
<a name="index-pkgdata_005fSCRIPTS"></a>
<a name="index-pkglibexec_005fSCRIPTS"></a>
<a name="index-noinst_005fSCRIPTS"></a>
<a name="index-check_005fSCRIPTS"></a>

<p>脚本可以安装在<code>bindir</code> ， <code>sbindir</code> ， <code>libexecdir</code> ， <code>pkglibexecdir</code> ， 要么<code>pkgdatadir</code> 。
</p>
<p>不需要安装的脚本可以列在<code>noinst_SCRIPTS</code> ，其中只有“ <samp>make check</samp> '应该进去<code>check_SCRIPTS</code> 。
</p>
<p>当需要构建脚本时， <samp>Makefile.am</samp>应该包括适当的规则。例如<code>automake</code>程序本身是一个Perl脚本，是从<samp>automake.in</samp> 。处理方法如下：</p>
<div class="example">
<pre class="example">bin_SCRIPTS = automake
CLEANFILES = $(bin_SCRIPTS)
EXTRA_DIST = automake.in

do_subst = sed -e 's,[@]datadir[@],$(datadir),g' \
            -e 's,[@]PERL[@],$(PERL),g' \
            -e 's,[@]PACKAGE[@],$(PACKAGE),g' \
            -e 's,[@]VERSION[@],$(VERSION),g' \
            &hellip;

automake: automake.in Makefile
        $(do_subst) &lt; $(srcdir)/automake.in &gt; automake
        chmod +x automake
</pre></div>

<p>需要使用以下方式明确删除已为其提供构建规则的此类脚本： <code>CLEANFILES</code> （请参阅<a href="#Clean">Clean</a> ），并且必须分发其来源，通常使用<code>EXTRA_DIST</code> （请参阅<a href="#Basics-of-Distribution">分发基础</a> ）。
</p>
<p>生成脚本的另一种常用方法是从<samp>configure</samp>与<code>AC_CONFIG_FILES</code> 。在这种情况下，Automake知道应清除和分发哪些文件，以及重建规则应为什么样。
</p>
<p>例如，如果<samp>configure.ac</samp>包含</p>
<div class="example">
<pre class="example">AC_CONFIG_FILES([src/my_script], [chmod +x src/my_script])
</pre></div>

<p>建立<samp>src/my_script</samp>从<samp>src/my_script.in</samp> ，然后<samp>src/Makefile.am</samp>在安装此脚本<code>$(bindir)</code>可以简单到</p>
<div class="example">
<pre class="example">bin_SCRIPTS = my_script
CLEANFILES = $(bin_SCRIPTS)
</pre></div>

<p>不需要<code>EXTRA_DIST</code>或任何构建规则：Automake从中推断它们<code>AC_CONFIG_FILES</code> （请参阅<a href="#Requirements">要求</a> ）。
<code>CLEANFILES</code>仍然有用，因为默认情况下Automake将清除目标<code>AC_CONFIG_FILES</code>在<code>distclean</code> ，不是<code>clean</code> 。
</p>
<p>尽管这看起来更简单，但是以这种方式构建脚本有一个缺点：目录变量，例如<code>$(datadir)</code>未完全展开，可能会引用其他目录变量。
</p>
<hr>
<a name="Headers"></a>
<div class="header">
<p>下一页： <a href="#Data" rel="next" accesskey="n">数据</a> ，上一页： <a href="#Scripts" rel="prev" accesskey="p">脚本</a> ，向上： <a href="#Other-Objects" rel="up" accesskey="u">其他对象</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Header-files"></a>
<h3 class="section">9.2头文件</h3>

<a name="index-_005fHEADERS-primary_002c-defined"></a>
<a name="index-HEADERS-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-HEADERS"></a>
<a name="index-_005fHEADERS"></a>
<a name="index-noinst_005fHEADERS"></a>
<a name="index-HEADERS_002c-installation-directories"></a>
<a name="index-Installing-headers"></a>
<a name="index-include_005fHEADERS"></a>
<a name="index-oldinclude_005fHEADERS"></a>
<a name="index-pkginclude_005fHEADERS"></a>


<p>必须安装的头文件由<code>HEADERS</code>变量家族。标头可以安装在<code>includedir</code> ， <code>oldincludedir</code> ， <code>pkgincludedir</code>或您可能已定义的任何其他目录（请参见<a href="#Uniform">Uniform</a> ）。例如，</p>
<div class="example">
<pre class="example">include_HEADERS = foo.h bar/bar.h
</pre></div>

<p>将安装两个文件为<samp>$(includedir)/foo.h</samp>和<samp>$(includedir)/bar.h</samp> 。
</p>
<p>的<code>nobase_</code>还支持前缀，</p>
<div class="example">
<pre class="example">nobase_include_HEADERS = foo.h bar/bar.h
</pre></div>

<p>将安装两个文件为<samp>$(includedir)/foo.h</samp>和<samp>$(includedir)/bar/bar.h</samp> （请参阅<a href="#Alternative">替代方法</a> ）。
</p>
<a name="index-noinst_005fHEADERS-1"></a>
<p>通常，仅需要安装已安装库随附的头文件。未安装程序或便捷库使用的头。的<code>noinst_HEADERS</code>变量可用于此类标头。但是，当标头实际上属于一个便捷库或程序时，我们建议将其列出在程序或库的<code>_SOURCES</code>变量（请参阅<a href="#Program-Sources">Program Sources</a> ），而不是in <code>noinst_HEADERS</code> 。这对于<samp>Makefile.am</samp>读者。 <code>noinst_HEADERS</code>将是在仅包含标头且不包含任何相关库或程序的目录中使用的正确变量。
</p>
<p>所有头文件必须在某处列出；在一个<code>_SOURCES</code>变量或<code>_HEADERS</code>变量。缺少的将不会出现在分发中。
</p>
<p>对于已构建且不得分发的头文件，请使用<code>nodist_</code>前缀如<code>nodist_include_HEADERS</code>要么<code>nodist_prog_SOURCES</code> 。如果在构建过程中需要这些生成的标头，则还必须确保它们在使用前就存在（请参阅<a href="#Sources">参考资料</a> ）。
</p>

<hr>
<a name="Data"></a>
<div class="header">
<p>下一页： <a href="#Sources" rel="next" accesskey="n">来源</a> ，上一页：标<a href="#Headers" rel="prev" accesskey="p">头</a> ，上一页： <a href="#Other-Objects" rel="up" accesskey="u">其他对象</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Architecture_002dindependent-data-files"></a>
<h3 class="section">9.3与体系结构无关的数据文件</h3>

<a name="index-_005fDATA-primary_002c-defined"></a>
<a name="index-DATA-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-DATA"></a>
<a name="index-_005fDATA"></a>

<p>Automake支持使用以下命令安装其他数据文件： <code>DATA</code>变量家族。
<a name="index-DATA-1"></a>
</p>
<a name="index-data_005fDATA"></a>
<a name="index-sysconf_005fDATA"></a>
<a name="index-sharedstate_005fDATA"></a>
<a name="index-localstate_005fDATA"></a>
<a name="index-pkgdata_005fDATA"></a>

<p>这样的数据可以安装在目录中<code>datadir</code> ， <code>sysconfdir</code> ， <code>sharedstatedir</code> ， <code>localstatedir</code> ， 要么<code>pkgdatadir</code> 。
</p>
<p>默认情况下，数据文件<em>不</em>包含在分发中。当然，您可以使用<code>dist_</code>前缀以根据变量进行更改。
</p>
<p>这是Automake声明其辅助数据文件的方式：</p>
<div class="example">
<pre class="example">dist_pkgdata_DATA = clean-kr.am clean.am &hellip;
</pre></div>


<hr>
<a name="Sources"></a>
<div class="header">
<p>上一页： <a href="#Data" rel="prev" accesskey="p">数据</a> ，向上： <a href="#Other-Objects" rel="up" accesskey="u">其他对象</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Built-Sources"></a>
<h3 class="section">9.4内置源</h3>

<p>因为Automake的自动依赖项跟踪是编译的副作用（请参阅<a href="#Dependencies">Dependencies</a> ），所以存在一个引导问题：在创建依赖项之前，不应编译目标，但是在首次编译目标之前，这些依赖项是未知的。
</p>
<p>通常，这不是问题，因为依赖项是分布式源：它们是预先存在的，不需要构建。假设<samp>foo.c</samp>包括<samp>foo.h</samp> 。初次编译时<samp>foo.o</samp> ， <code>make</code>只知道<samp>foo.o</samp>依赖于取决于<samp>foo.c</samp> 。作为此汇编的副作用<code>depcomp</code>记录<samp>foo.h</samp>依赖关系，以便在以下调用<code>make</code>将兑现。在这些情况下，很明显没有问题： <samp>foo.o</samp>不存在并且必须构建（无论依赖项如何），或者存在精确的依赖项，并且可以使用它们来确定是否<samp>foo.o</samp>应该重建。
</p>
<p>如果是另外一个故事<samp>foo.h</samp>最初不存在<code>make</code>跑。例如，可能有一条规则要建立<samp>foo.h</samp> 。这次<samp>file.o</samp>的构建将失败，因为编译器找不到<samp>foo.h</samp> 。 <code>make</code>未能触发建立规则<samp>foo.h</samp>首先是缺乏依赖信息。
</p>
<a name="index-BUILT_005fSOURCES"></a>
<a name="index-BUILT_005fSOURCES_002c-defined"></a>

<p>的<code>BUILT_SOURCES</code>变量是解决此问题的方法。列出的源文件<code>BUILT_SOURCES</code>是在“ <samp>make all</samp> ' 要么 ' <samp>make check</samp> ' （甚至 ' <samp>make install</samp> '），然后再处理其他目标。但是，除非通过在其他地方提到它来明确请求，否则不会<em>编译</em>此类源文件。 <code>_SOURCES</code>变量。
</p>
<p>因此，总结一下我们的介绍性示例，我们可以使用' <samp>BUILT_SOURCES = foo.h</samp> ' 确保<samp>foo.h</samp>在其他任何目标（包括<samp>foo.o</samp> ） 中 ' <samp>make all</samp> ' 要么 ' <samp>make check</samp> '。
</p>
<p><code>BUILT_SOURCES</code>实际上有点用词不当，因为必须在构建过程的早期创建的任何文件都可以在此变量中列出。而且，所有内置资源不一定都必须在<code>BUILT_SOURCES</code> 。例如， <samp>.c</samp>文件不需要出现在<code>BUILT_SOURCES</code> （除非它被另一个来源包含），因为它是关联对象的已知依赖项。
</p>
<p>需要强调的是， <code>BUILT_SOURCES</code>仅以“ <samp>make all</samp> '，' <samp>make check</samp> '和' <samp>make install</samp> '。这意味着您无法建立特定的目标（例如，“ <samp>make foo</samp> '）放在干净的树中（如果它取决于构建的源）。但是，如果您运行“ <samp>make all</samp>较早，因为已经有了准确的依赖关系。
</p>
<p>下一节将说明和讨论玩具示例中内置源的处理。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Built-Sources-Example" accesskey="1">内置源示例</a> ：</td><td>  </td><td align="left" valign="top">处理内置源的几种方法。
</td></tr>
</tbody></table>

<hr>
<a name="Built-Sources-Example"></a>
<div class="header">
<p>上： <a href="#Sources" rel="up" accesskey="u">来源</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Built-Sources-Example-1"></a>
<h4 class="subsection">9.4.1内置源示例</h4>

<p>假设<samp>foo.c</samp>包括<samp>bindir.h</samp> ，它依赖于安装并且不是分布式的：需要构建。这里<samp>bindir.h</samp>定义预处理器宏<code>bindir</code>到<code>make</code>变量<code>bindir</code> （继承自<samp>configure</samp> ）。
</p>
<p>我们建议以下几种实现。这并不是要详尽列出处理内置源的所有方式，但是如果遇到此问题，它将为您提供一些想法。
</p>
<a name="First-Try"></a>
<h4 class="subsubheading">第一次尝试</h4>

<p>第一个实现将说明上一节中提到的引导问题（请参阅<a href="#Sources">参考资料</a> ）。
</p>
<p>这是暂定的<samp>Makefile.am</samp> 。
</p>
<div class="example">
<pre class="example"># This won't work.
bin_PROGRAMS = foo
foo_SOURCES = foo.c
nodist_foo_SOURCES = bindir.h
CLEANFILES = bindir.h
bindir.h: Makefile
        echo '#define bindir &quot;$(bindir)&quot;' &gt;$@
</pre></div>

<p>此设置无效，因为Automake不知道<samp>foo.c</samp>包括<samp>bindir.h</samp> 。请记住，自动依赖项跟踪是编译的副作用，因此， <samp>foo.o</samp>只有在<samp>foo.o</samp>已编译（请参阅<a href="#Dependencies">Dependencies</a> ）。症状如下。
</p>
<div class="example">
<pre class="example">% make
source='foo.c' object='foo.o' libtool=no \
depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
depmode=gcc /bin/sh ./depcomp \
gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
foo.c:2: bindir.h: No such file or directory
make: *** [foo.o] Error 1
</pre></div>

<p>在这个例子中<samp>bindir.h</samp>没有分发或安装，甚至没有按时构建。有人可能想知道“ <samp>nodist_foo_SOURCES = bindir.h</samp> '行根本没有用。这行简单说明<samp>bindir.h</samp>是...的来源<code>foo</code> ，因此，例如，应在生成标签时对其进行检查（请参见<a href="#Tags">标签</a> ）。换句话说，它没有帮助我们解决当前的问题，如果没有它，构建将同样失败。
</p>
<a name="Using-BUILT_005fSOURCES"></a>
<h4 class="subsubheading">使用<code>BUILT_SOURCES</code></h4>

<p>一个解决方案是要求<samp>bindir.h</samp>要先建造。这是什么<code>BUILT_SOURCES</code>是用于（请参阅<a href="#Sources">参考资料</a> ）。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES = foo.c
nodist_foo_SOURCES = bindir.h
BUILT_SOURCES = bindir.h
CLEANFILES = bindir.h
bindir.h: Makefile
        echo '#define bindir &quot;$(bindir)&quot;' &gt;$@
</pre></div>

<p>怎么看<samp>bindir.h</samp>首先建立：</p>
<div class="example">
<pre class="example">% make
echo '#define bindir &quot;/usr/local/bin&quot;' &gt;bindir.h
make  all-am
make[1]: Entering directory `/home/adl/tmp'
source='foo.c' object='foo.o' libtool=no \
depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
depmode=gcc /bin/sh ./depcomp \
gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
gcc  -g -O2   -o foo  foo.o
make[1]: Leaving directory `/home/adl/tmp'
</pre></div>

<p>但是，如前所述， <code>BUILT_SOURCES</code>仅适用于<code>all</code> ， <code>check</code>和<code>install</code>目标。如果您尝试运行“ <samp>make foo</samp>明确地：</p>
<div class="example">
<pre class="example">% make clean
test -z &quot;bindir.h&quot; || rm -f bindir.h
test -z &quot;foo&quot; || rm -f foo
rm -f *.o
% : &gt; .deps/foo.Po # Suppress previously recorded dependencies
% make foo
source='foo.c' object='foo.o' libtool=no \
depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
depmode=gcc /bin/sh ./depcomp \
gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
foo.c:2: bindir.h: No such file or directory
make: *** [foo.o] Error 1
</pre></div>

<a name="Recording-Dependencies-manually"></a>
<h4 class="subsubheading">手动记录依赖项</h4>

<p>通常人们对<code>BUILT_SOURCES</code>因为他们从不建立诸如“ <samp>make foo</samp> '之前' <samp>make all</samp> ，如上例所示。但是，如果这对您很重要，则可以避免<code>BUILT_SOURCES</code>并在<samp>Makefile.am</samp> 。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES = foo.c
nodist_foo_SOURCES = bindir.h
foo.$(OBJEXT): bindir.h
CLEANFILES = bindir.h
bindir.h: Makefile
        echo '#define bindir &quot;$(bindir)&quot;' &gt;$@
</pre></div>

<p>您不必列出<em>所有</em>的依赖项<samp>foo.o</samp>明确地，仅那些可能需要构建的。如果已经存在依赖项，则它不会妨碍第一次编译，并且将由常规的依赖项跟踪代码记录。（请注意，在第一次编译之后，依赖项跟踪代码还将记录下<samp>foo.o</samp>和<samp>bindir.h</samp> ;因此，我们的显式依赖项仅对首次构建有用。）
</p>
<p>如果您不够小心，添加这样的显式依赖项可能会有些危险。这是由于Automake尝试不覆盖您的规则的方式（假定您比它更了解）。' <samp>foo.$(OBJEXT): bindir.h</samp> '取代了Automake可能要输出以构建的任何规则' <samp>foo.$(OBJEXT)</samp> '。在这种情况下它可以正常工作，因为Automake不必输出任何“ <samp>foo.$(OBJEXT):</samp> '目标：它改为依靠后缀规则（例如，' <samp>.c.$(OBJEXT):</samp> '）。始终检查生成的<samp>Makefile.in</samp>如果您这样做。
</p>
<a name="Build-bindir_002eh-from-configure"></a>
<h4 class="subsubheading">建立<samp>bindir.h</samp>从<samp>configure</samp></h4>

<p>可以从中定义此预处理器宏<samp>configure</samp> ，无论在<samp>config.h</samp> （请参阅<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Defining-Directories">定义目录</a> <cite>”</cite> ），或通过处理<samp>bindir.h.in</samp>文件使用<code>AC_CONFIG_FILES</code> （请参阅<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Configuration-Actions">配置操作</a> <cite>”</cite> ）。
</p>
<p>在这一点上应该很清楚<samp>bindir.h</samp>从<samp>configure</samp>在此示例中效果很好。 <samp>bindir.h</samp>在构建任何目标之前将存在，因此不会引起任何依赖性问题。
</p>
<p>Makefile可以按如下方式缩小。我们甚至不必提<samp>bindir.h</samp> 。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES = foo.c
</pre></div>

<p>但是，并非总是可以从<samp>configure</samp> ，尤其是当这些源是由需要首先构建的工具生成时。
</p>
<a name="Build-bindir_002ec_002c-not-bindir_002eh_002e"></a>
<h4 class="subsubheading">建立<samp>bindir.c</samp> ，不是<samp>bindir.h</samp> 。</h4>

<p>另一个有吸引力的想法是定义<code>bindir</code>作为从中导出的变量或函数<samp>bindir.o</samp> ，并建立<samp>bindir.c</samp>代替<samp>bindir.h</samp> 。
</p>
<div class="example">
<pre class="example">noinst_PROGRAMS = foo
foo_SOURCES = foo.c bindir.h
nodist_foo_SOURCES = bindir.c
CLEANFILES = bindir.c
bindir.c: Makefile
        echo 'const char bindir[] = &quot;$(bindir)&quot;;' &gt;$@
</pre></div>

<p><samp>bindir.h</samp>仅包含变量的声明，不需要构建，因此不会造成任何麻烦。 <samp>bindir.o</samp>一直依赖<samp>bindir.c</samp> ，所以<samp>bindir.c</samp>将首先建立。
</p>
<a name="Which-is-best_003f"></a>
<h4 class="subsubheading">哪个最好？</h4>

<p>当然，没有万能药。每种解决方案都有其优点和缺点。
</p>
<p>你不能使用<code>BUILT_SOURCES</code>如果能够运行' <samp>make foo</samp> '在干净的树上对您很重要。
</p>
<p>如果您不愿意错误地重写Automake规则，则不会添加显式依赖项。
</p>
<p>从生成文件<samp>./configure</samp>并非总是可能，也没有转换<samp>.h</samp>文件成<samp>.c</samp>文件。
</p>

<hr>
<a name="Other-GNU-Tools"></a>
<div class="header">
<p>下一页： <a href="#Documentation" rel="next" accesskey="n">文档</a> ，上一页： <a href="#Other-Objects" rel="prev" accesskey="p">其他对象</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Other-GNU-Tools-1"></a>
<h2 class="chapter">10个其他GNU工具</h2>

<p>由于Automake主要用于生成<samp>Makefile.in</samp>用于GNU程序，它会努力与其他GNU工具进行互操作。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Emacs-Lisp" accesskey="1">Emacs Lisp</a> ：</td><td>  </td><td align="left" valign="top">埃马克斯·利斯普（Emacs Lisp）</td></tr>
<tr><td align="left" valign="top">• <a href="#gettext" accesskey="2">gettext</a> ：</td><td>  </td><td align="left" valign="top">文字</td></tr>
<tr><td align="left" valign="top">• <a href="#Libtool" accesskey="3">Libtool</a> ：</td><td>  </td><td align="left" valign="top">Libtool</td></tr>
<tr><td align="left" valign="top">• <a href="#Java" accesskey="4">Java</a> ：</td><td>  </td><td align="left" valign="top">Java字节码编译（不建议使用）</td></tr>
<tr><td align="left" valign="top">• <a href="#Python" accesskey="5">Python</a> ：</td><td>  </td><td align="left" valign="top">蟒蛇</td></tr>
</tbody></table>


<hr>
<a name="Emacs-Lisp"></a>
<div class="header">
<p>下一页： <a href="#gettext" rel="next" accesskey="n">gettext</a> ，上一篇： <a href="#Other-GNU-Tools" rel="up" accesskey="u">其他GNU工具</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Emacs-Lisp-1"></a>
<h3 class="section">10.1 Emacs Lisp</h3>

<a name="index-_005fLISP-primary_002c-defined"></a>
<a name="index-LISP-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-LISP"></a>

<a name="index-_005fLISP"></a>
<a name="index-lisp_005fLISP"></a>
<a name="index-noinst_005fLISP"></a>

<p>Automake为Emacs Lisp提供了一些支持。的<code>LISP</code> primary用于保存列表<samp>.el</samp>文件。该主要数据库的可能前缀为<code>lisp_</code>和<code>noinst_</code> 。请注意，如果<code>lisp_LISP</code>被定义，然后<samp>configure.ac</samp>必须运行<code>AM_PATH_LISPDIR</code> （请参阅<a href="#Macros">宏</a> ）。
</p>
<a name="index-dist_005flisp_005fLISP"></a>
<a name="index-dist_005fnoinst_005fLISP"></a>
<p>默认情况下，不分发Lisp源。您可以在<code>LISP</code>主要与<code>dist_</code> ，如<code>dist_lisp_LISP</code>要么<code>dist_noinst_LISP</code> ，指示应分发这些文件。
</p>
<p>Automake将使用以下命令找到的Emacs对所有Emacs Lisp源文件进行字节编译： <code>AM_PATH_LISPDIR</code> ，如果找到了。执行此类字节编译时，（开发人员保留）中指定的标志<code>AM_ELCFLAGS</code>和（用户保留） <code>ELCFLAGS</code> make变量将传递给Emacs调用。
</p>
<p>字节编译的Emacs Lisp文件不能在所有版本的Emacs中移植，因此，如果您希望站点安装多个版本的Emacs，则有必要将其关闭。此外，许多软件包实际上并没有从字节编译中受益。尽管如此，我们还是建议您对Emacs Lisp源代码进行字节编译。对于安装了奇怪设置的站点来说，应对自己进行安装可能比使安装对其他所有人的安装效果好一些更好。
</p>
<p>有两种避免字节编译的方法。从历史上看，我们推荐以下构造。
</p>
<div class="example">
<pre class="example">lisp_LISP = file1.el file2.el
ELCFILES =
</pre></div>

<p><code>ELCFILES</code>是内部Automake变量，通常会列出所有<samp>.elc</samp>必须字节编译的文件。自动制作定义<code>ELCFILES</code>自动从<code>lisp_LISP</code> 。明确清空此变量可以防止字节编译。
</p>
<p>从Automake 1.8开始，我们现在建议使用<code>lisp_DATA</code>代替：</p>
<div class="example">
<pre class="example">lisp_DATA = file1.el file2.el
</pre></div>

<p>请注意，这两种构造并不等效。 <code>_LISP</code>如果未安装Emacs，则不会安装文件，而<code>_DATA</code>将始终安装其文件。
</p>
<hr>
<a name="gettext"></a>
<div class="header">
<p>下一篇： <a href="#Libtool" rel="next" accesskey="n">Libtool</a> ，上一篇： <a href="#Emacs-Lisp" rel="prev" accesskey="p">Emacs Lisp</a> ，上一篇： <a href="#Other-GNU-Tools" rel="up" accesskey="u">其他GNU工具</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Gettext"></a>
<h3 class="section">10.2 Gettext</h3>

<a name="index-GNU-Gettext-support"></a>
<a name="index-Gettext-support"></a>
<a name="index-Support-for-GNU-Gettext"></a>

<p>如果<code>AM_GNU_GETTEXT</code>被看中<samp>configure.ac</samp> ，然后Automake开启对GNU gettext（用于国际化的消息目录系统）的支持（请参阅<cite>GNU gettext实用程序中的</cite> <a href="http://www.gnu.org/software/gettext/manual/gettext.html#Top">简介</a> ）。
</p>
<p>的<code>gettext</code>要支持Automake，需要在程序包中添加一个或两个子目录： <samp>po</samp>还有可能<samp>intl</samp> 。如果需要后者<code>AM_GNU_GETTEXT</code>不使用' <samp>external</samp> '参数，或者<code>AM_GNU_GETTEXT_INTL_SUBDIR</code>用来。Automake确保这些目录存在并且在中提到<code>SUBDIRS</code> 。
</p>
<hr>
<a name="Libtool"></a>
<div class="header">
<p>下一篇： <a href="#Java" rel="next" accesskey="n">Java</a> ，上一篇： <a href="#gettext" rel="prev" accesskey="p">gettext</a> ，上一篇： <a href="#Other-GNU-Tools" rel="up" accesskey="u">其他GNU工具</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Libtool-1"></a>
<h3 class="section">10.3 Libtool</h3>

<p>Automake通过以下方式为GNU Libtool提供支持（请参见<cite>Libtool手册中的</cite> <a href="http://www.gnu.org/software/libtool/manual/libtool.html#Top">简介</a> ）： <code>LTLIBRARIES</code>主。请参阅<a href="#A-Shared-Library">共享库</a> 。
</p>

<hr>
<a name="Java"></a>
<div class="header">
<p>下一页： <a href="#Python" rel="next" accesskey="n">Python</a> ，上一篇： <a href="#Libtool" rel="prev" accesskey="p">Libtool</a> ，上一篇： <a href="#Other-GNU-Tools" rel="up" accesskey="u">其他GNU工具</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Java-bytecode-compilation-_0028deprecated_0029"></a>
<h3 class="section">10.4 Java字节码编译（不建议使用）</h3>

<a name="index-_005fJAVA-primary_002c-defined"></a>
<a name="index-JAVA-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-JAVA"></a>
<a name="index-Java-to-bytecode_002c-compilation"></a>
<a name="index-Compilation-of-Java-to-bytecode"></a>

<p>Automake为Java字节码编译提供了一些最小的支持， <code>JAVA</code> primary（除了支持将Java编译为本机代码；请参阅<a href="#Java-Support-with-gcj">Java支持gcj</a> ）。但是请注意， <em>不建议使用此处描述的界面和大多数功能</em> 。未来的Automake版本将努力提供更好，更简洁的界面，但是该界面<em>将不向后兼容</em> ；在引入新界面后的某个时间（如果可能的话），当前界面可能会被完全删除。无论如何，当前<code>JAVA</code>主要功能已冻结，将不再开发，甚至无法修复错误。
</p>
<p>任何<samp>.java</samp>列出的文件<code>_JAVA</code>变量将被编译<code>JAVAC</code>在构建时。默认， <samp>.java</samp>文件不包含在分发中，您应该使用<code>dist_</code>前缀以分发它们。
</p>
<p>这是分发的典型设置<samp>.java</samp>文件并安装<samp>.class</samp>编译产生的文件。
</p>
<div class="example">
<pre class="example">javadir = $(datadir)/java
dist_java_JAVA = a.java b.java &hellip;
</pre></div>

<a name="index-JAVA-restrictions"></a>
<a name="index-Restrictions-for-JAVA"></a>

<p>目前，Automake强制执行以下限制： <code>_JAVA</code>可以在给定的条件下使用<samp>Makefile.am</samp> 。造成这种限制的原因是，通常无法知道哪个<samp>.class</samp>从中生成文件<samp>.java</samp>文件，因此不可能知道将哪些文件安装在哪里。例如，一个<samp>.java</samp>文件可以定义多个类；所结果的<samp>.class</samp>无法解析文件名，无法预测文件名<samp>.java</samp>文件。
</p>
<p>编译Java源代码时会使用一些变量：</p>
<dl compact>
<dt><code>JAVAC</code>
<a name="index-JAVAC"></a>
</dt>
<dd><p>Java编译器的名称。默认为“ <samp>javac</samp> '。
</p>
</dd>
<dt><code>JAVACFLAGS</code>
<a name="index-JAVACFLAGS"></a>
</dt>
<dd><p>传递给编译器的标志。这被认为是用户变量（请参阅<a href="#User-Variables">用户变量</a> ）。
</p>
</dd>
<dt><code>AM_JAVACFLAGS</code>
<a name="index-AM_005fJAVACFLAGS"></a>
</dt>
<dd><p>更多标志传递给Java编译器。这个，而不是<code>JAVACFLAGS</code> ，应在有必要将Java编译器标志放入时使用<samp>Makefile.am</samp> 。
</p>
</dd>
<dt><code>JAVAROOT</code>
<a name="index-JAVAROOT"></a>
</dt>
<dd><p>此变量的值传递给<samp>-d</samp>选择<code>javac</code> 。默认为“ <samp>$(top_builddir)</samp> '。
</p>
</dd>
<dt><code>CLASSPATH_ENV</code>
<a name="index-CLASSPATH_005fENV"></a>
</dt>
<dd><p>此变量是用于设置<code>CLASSPATH</code>上的环境变量<code>javac</code>命令行。（将来，我们可能会以不同的方式处理类路径设置。）
</p></dd>
</dl>


<hr>
<a name="Python"></a>
<div class="header">
<p>上一页： <a href="#Java" rel="prev" accesskey="p">Java</a> ，Up： <a href="#Other-GNU-Tools" rel="up" accesskey="u">其他GNU工具</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Python-1"></a>
<h3 class="section">10.5的Python</h3>

<a name="index-_005fPYTHON-primary_002c-defined"></a>
<a name="index-PYTHON-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-PYTHON"></a>
<a name="index-_005fPYTHON"></a>

<p>Automake通过以下方式为Python编译提供支持： <code>PYTHON</code>主。典型的设置是致电<code>AM_PATH_PYTHON</code>在<samp>configure.ac</samp>并在下面使用如下代码<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">python_PYTHON = tree.py leave.py
</pre></div>

<p>列表中列出的所有文件<code>_PYTHON</code>变量将用字节编译<code>py-compile</code>在安装时。<code>py-compile</code>实际上创建了两个标准（ <samp>.pyc</samp> ）并进行了优化（ <samp>.pyo</samp> ）源文件的字节编译版本。请注意，由于字节编译是在安装时发生的，因此在<code>noinst_PYTHON</code>将不会被编译。默认情况下，Python源文件包含在发行版中<code>nodist_</code> （如<code>nodist_python_PYTHON</code> ）忽略它们。
</p>
<p>Automake附带了一个名为Autoconf的宏<code>AM_PATH_PYTHON</code>这将确定一些与Python相关的目录变量（请参见下文）。如果你打电话<code>AM_PATH_PYTHON</code>从<samp>configure.ac</samp> ，那么您可以使用变量<code>python_PYTHON</code>要么<code>pkgpython_PYTHON</code>列出您的Python源文件<samp>Makefile.am</samp> ，具体取决于您要在何处安装文件（请参见<code>pythondir</code>和<code>pkgpythondir</code>下面）。
</p>
<dl>
<dt><a name="index-AM_005fPATH_005fPYTHON"></a>巨集： <strong>AM_PATH_PYTHON</strong> <em>（ <span class="roman">[</span> <var>version</var> <span class="roman">]</span> ， <span class="roman">[</span> <var>action-if-found</var> <span class="roman">]</span> ，</em></dt>
<dd><p><span class="roman">[</span> <var>action-if-not-found</var> <span class="roman">]</span> ）</p>
<p>在系统上搜索Python解释器。该宏带有三个可选参数。第一个参数（如果存在）是此软件包所需的最低Python版本： <code>AM_PATH_PYTHON</code>将跳过任何早于以下版本的Python解释器<var>version</var> 。如果找到口译员并满足要求<var>version</var> ， 然后<var>action-if-found</var>运行。除此以外， <var>action-if-not-found</var>运行。
</p>
<p>如果<var>action-if-not-found</var>未指定，如以下示例所示，默认为中止<code>configure</code> 。
</p>
<div class="example">
<pre class="example">AM_PATH_PYTHON([2.2])
</pre></div>

<p>当Python是该软件包的绝对要求时，这很好。如果Python> = 2.5仅是该软件包的<em>可选选项</em> ， <code>AM_PATH_PYTHON</code>可以这样称呼。
</p>
<div class="example">
<pre class="example">AM_PATH_PYTHON([2.5],, [:])
</pre></div>

<p>如果<code>PYTHON</code>变量何时设置<code>AM_PATH_PYTHON</code>被调用，那么它将是唯一尝试过的Python解释器。
</p>
<p><code>AM_PATH_PYTHON</code>根据配置期间发现的Python安装创建以下输出变量。
</p></dd></dl>

<dl compact>
<dt><code>PYTHON</code>
<a name="index-PYTHON-1"></a>
</dt>
<dd><p>Python可执行文件的名称，或' <samp>:</samp> '如果找不到合适的口译员。
</p>
<p>假设<var>action-if-not-found</var>使用（否则<samp>./configure</samp>如果没有Python，将中止）， <code>PYTHON</code>可以用来设置条件，以禁用构建的相关部分，如下所示。
</p>
<div class="example">
<pre class="example">AM_PATH_PYTHON(,, [:])
AM_CONDITIONAL([HAVE_PYTHON], [test &quot;$PYTHON&quot; != :])
</pre></div>

</dd>
<dt><code>PYTHON_VERSION</code>
<a name="index-PYTHON_005fVERSION"></a>
</dt>
<dd><p>Python版本号，格式为<var>major</var> 。<var>minor</var> （例如，“ <samp>2.5</samp> '）。当前是“ <samp>sys.version[:3]</samp> '。
</p>
</dd>
<dt><code>PYTHON_PREFIX</code>
<a name="index-PYTHON_005fPREFIX"></a>
</dt>
<dd><p>字符串' <samp>${prefix}</samp> '。该术语可用于以后需要Python的内容的工作中。 <samp>sys.prefix</samp> ”，但普遍共识是始终使用来自<code>configure</code> 。
</p>
</dd>
<dt><code>PYTHON_EXEC_PREFIX</code>
<a name="index-PYTHON_005fEXEC_005fPREFIX"></a>
</dt>
<dd><p>字符串' <samp>${exec_prefix}</samp> '。该术语可用于以后需要Python的内容的工作中。 <samp>sys.exec_prefix</samp> ”，但普遍共识是始终使用来自<code>configure</code> 。
</p>
</dd>
<dt><code>PYTHON_PLATFORM</code>
<a name="index-PYTHON_005fPLATFORM"></a>
</dt>
<dd><p>Python用于描述操作系统的规范名称，由' <samp>sys.platform</samp> '。构建Python扩展时，有时需要此值。
</p>
</dd>
<dt><code>pythondir</code>
<a name="index-pythondir"></a>
</dt>
<dd><p>的目录名称<samp>site-packages</samp>标准Python安装树的子目录。
</p>
</dd>
<dt><code>pkgpythondir</code>
<a name="index-pkgpythondir"></a>
</dt>
<dd><p>这是下的目录<code>pythondir</code>以包装命名。也就是说，它是“ <samp>$(pythondir)/$(PACKAGE)</samp> '。提供它是为了方便。
</p>
</dd>
<dt><code>pyexecdir</code>
<a name="index-pyexecdir"></a>
</dt>
<dd><p>这是应该在其中安装Python扩展模块（共享库）的目录。用C编写的扩展模块可以对Automake声明如下：</p>
<div class="example">
<pre class="example">pyexec_LTLIBRARIES = quaternion.la
quaternion_la_SOURCES = quaternion.c support.c support.h
quaternion_la_LDFLAGS = -avoid-version -module
</pre></div>

</dd>
<dt><code>pkgpyexecdir</code>
<a name="index-pkgpyexecdir"></a>
</dt>
<dd><p>这是一个方便变量，定义为“ <samp>$(pyexecdir)/$(PACKAGE)</samp> '。
</p></dd>
</dl>

<p>所有这些目录变量的值均以' <samp>${prefix}</samp> ' 要么 ' <samp>${exec_prefix}</samp> ”未展开。这在<samp>Makefiles</samp> ，但是这使得这些变量很难在<samp>configure</samp> 。这是GNU编码标准规定的，因此用户可以运行“ <samp>make prefix=/foo install</samp> '。Autoconf手册的一节中包含有关此主题的更多详细信息（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Installation-Directory-Variables">Installation Directory变量</a> ）。另请参见<a href="#Hard_002dCoded-Install-Paths">硬编码安装路径</a> 。
</p>

<hr>
<a name="Documentation"></a>
<div class="header">
<p>下一个： <a href="#Install" rel="next" accesskey="n">安装</a> ，上一个： <a href="#Other-GNU-Tools" rel="prev" accesskey="p">其他GNU工具</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Building-documentation"></a>
<h2 class="chapter">11建筑文件</h2>

<p>当前，Automake支持Texinfo和手册页。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Texinfo" accesskey="1">Texinfo</a> ：</td><td>  </td><td align="left" valign="top">Texinfo</td></tr>
<tr><td align="left" valign="top">•手册<a href="#Man-Pages" accesskey="2">页</a> ：</td><td>  </td><td align="left" valign="top">手册页</td></tr>
</tbody></table>


<hr>
<a name="Texinfo"></a>
<div class="header">
<p>下一页：手册<a href="#Man-Pages" rel="next" accesskey="n">页</a> ，上一页： <a href="#Documentation" rel="up" accesskey="u">文档</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Texinfo-1"></a>
<h3 class="section">11.1 Texinfo</h3>

<a name="index-_005fTEXINFOS-primary_002c-defined"></a>
<a name="index-TEXINFOS-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-TEXINFOS"></a>
<a name="index-HTML-output-using-Texinfo"></a>
<a name="index-PDF-output-using-Texinfo"></a>
<a name="index-PS-output-using-Texinfo"></a>
<a name="index-DVI-output-using-Texinfo"></a>
<a name="index-_005fTEXINFOS"></a>
<a name="index-info_005fTEXINFOS"></a>

<p>如果当前目录包含Texinfo源，则必须使用<code>TEXINFOS</code>主。通常，Texinfo文件会转换为info，因此<code>info_TEXINFOS</code>变量是这里最常用的。任何Texinfo源文件都应具有<samp>.texi</samp>延期。Automake也接受<samp>.txi</samp>要么<samp>.texinfo</samp>扩展，但现在不鼓励使用它们，并且会引发运行时警告。
</p>
<p>Automake生成要构建的规则<samp>.info</samp> ， <samp>.dvi</samp> ， <samp>.ps</samp> ， <samp>.pdf</samp>和<samp>.html</samp> Texinfo来源中的文件。遵循GNU编码标准，只有<samp>.info</samp>文件由“ <samp>make all</samp>并由'安装<samp>make install</samp> '（除非您使用<samp>no-installinfo</samp> ， 见下文）。此外， <samp>.info</samp>文件会自动分发，因此Texinfo并不是安装软件包的先决条件。
</p>
<p>值得注意的是，与其他格式相反，生成的<samp>.info</samp>文件默认放置在<code>srcdir</code>而不是在<code>builddir</code> 。可以使用<samp>info-in-builddir</samp>选项。
</p>
<a name="index-dvi"></a>
<a name="index-html"></a>
<a name="index-pdf"></a>
<a name="index-ps"></a>
<a name="index-install_002ddvi"></a>
<a name="index-install_002dhtml"></a>
<a name="index-install_002dpdf"></a>
<a name="index-install_002dps"></a>
<p>其他文档格式可以根据要求由' <samp>make dvi</samp> '，' <samp>make ps</samp> '，' <samp>make pdf</samp> '和' <samp>make html</samp> '，并且可以使用' <samp>make install-dvi</samp> '，' <samp>make install-ps</samp> '，' <samp>make install-pdf</samp> '和' <samp>make install-html</samp> ”。' <samp>make uninstall</samp> '将删除所有内容：默认情况下安装的Texinfo文档以及所有上述可选格式。
</p>
<p>所有这些目标都可以使用' <samp>-local</samp>规则（请参阅<a href="#Extending">扩展</a> ）。
</p>
<a name="index-Texinfo-flag_002c-VERSION"></a>
<a name="index-Texinfo-flag_002c-UPDATED"></a>
<a name="index-Texinfo-flag_002c-EDITION"></a>
<a name="index-Texinfo-flag_002c-UPDATED_002dMONTH"></a>

<a name="index-VERSION-Texinfo-flag"></a>
<a name="index-UPDATED-Texinfo-flag"></a>
<a name="index-EDITION-Texinfo-flag"></a>
<a name="index-UPDATED_002dMONTH-Texinfo-flag"></a>

<a name="index-mdate_002dsh"></a>

<p>如果<samp>.texi</samp>文件<code>@include</code> s <samp>version.texi</samp> ，那么该文件将自动生成。文件<samp>version.texi</samp>定义了四个Texinfo标志，您可以使用<code>@value{EDITION}</code> ， <code>@value{VERSION}</code> ， <code>@value{UPDATED}</code>和<code>@value{UPDATED-MONTH}</code> 。
</p>
<dl compact>
<dt><code>EDITION</code></dt>
<dt><code>VERSION</code></dt>
<dd><p>这两个标志都包含程序的版本号。为了清楚起见，将它们分开放置。
</p>
</dd>
<dt><code>UPDATED</code></dt>
<dd><p>这是主要日期<samp>.texi</samp>文件是最后修改的。
</p>
</dd>
<dt><code>UPDATED-MONTH</code></dt>
<dd><p>它保存了主要月份的月份名称<samp>.texi</samp>文件是最后修改的。
</p></dd>
</dl>

<p>的<samp>version.texi</samp>支持需要<code>mdate-sh</code>脚本;该脚本随Automake一起提供，并在<code>automake</code>与一起调用<samp>--add-missing</samp>选项。
</p>
<p>如果您有多个Texinfo文件，并且您想使用<samp>version.texi</samp>功能，则每个Texinfo文件都必须有一个单独的版本文件。Automake将处理Texinfo文件中与之匹配的所有包含项<samp>vers*.texi</samp>就像自动生成的版本文件一样。
</p>
<p>有时一个信息文件实际上取决于多个<samp>.texi</samp>文件。例如，在GNU Hello中， <samp>hello.texi</samp>包含文件<samp>fdl.texi</samp> 。您可以使用<code><var>texi</var>_TEXINFOS</code>变量。这是GNU Hello的工作方式： <a name="index-TEXINFOS-1"></a><a name="index-_005fTEXINFOS-1"></a>
</p>
<div class="example">
<pre class="example">info_TEXINFOS = hello.texi
hello_TEXINFOS = fdl.texi
</pre></div>

<a name="index-texinfo_002etex"></a>

<p>默认情况下，Automake需要该文件<samp>texinfo.tex</samp>出现在与<samp>Makefile.am</samp>列出了<samp>.texi</samp>文件。如果你用过<code>AC_CONFIG_AUX_DIR</code>在<samp>configure.ac</samp> （请参阅<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">《</a> <cite>Autoconf手册</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">》</a>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Input">“找到'configure'输入</a> <cite>”</cite> ），然后<samp>texinfo.tex</samp>寻找在那里。在这两种情况下<code>automake</code>然后供应<samp>texinfo.tex</samp>如果<samp>--add-missing</samp>给出，并照顾其分布。但是，如果您设置了<code>TEXINFO_TEX</code>变量（请参见下文），它将覆盖文件的位置，并关闭文件在源文件中的安装及其分发。
</p>
<p>选项<samp>no-texinfo.tex</samp>可用于消除文件要求<samp>texinfo.tex</samp> 。变量的使用<code>TEXINFO_TEX</code>是可取的，但是因为这样可以<code>dvi</code> ， <code>ps</code>和<code>pdf</code>目标仍然有效。
</p>
<a name="index-Option_002c-no_002dinstallinfo"></a>
<a name="index-Target_002c-install_002dinfo"></a>
<a name="index-install_002dinfo-target"></a>
<a name="index-no_002dinstallinfo-option"></a>

<a name="index-no_002dinstallinfo"></a>
<a name="index-install_002dinfo"></a>

<p>Automake会生成一个<code>install-info</code>规则;有些人显然使用此功能。默认情况下，信息页面由' <samp>make install</samp> '，所以跑步<code>make install-info</code>是没有意义的。这可以通过<code>no-installinfo</code>选项。在这种情况下， <samp>.info</samp>默认情况下未安装文件，用户必须使用“ <samp>make install-info</samp> '。
</p>
<a name="index-AM_005fUPDATE_005fINFO_005fDIR"></a>
<p>默认， <code>make install-info</code>和<code>make uninstall-info</code>将尝试运行<code>install-info</code>程序（如果有）来更新（或创建/删除） <samp><code>${infodir}</code>/dir</samp>指数。如果不希望这样做，可以通过导出<code>AM_UPDATE_INFO_DIR</code>变量为“ <code>no</code> ”。
</p>
<p>Texinfo构建规则使用以下变量。
</p>
<dl compact>
<dt><code>MAKEINFO</code>
<a name="index-MAKEINFO"></a>
</dt>
<dd><p>调用生成的程序的名称<samp>.info</samp>文件。此变量由Automake定义。如果<code>makeinfo</code>在系统上找到程序，默认情况下将使用该程序；除此以外<code>missing</code>将改为使用。
</p>
</dd>
<dt><code>MAKEINFOHTML</code>
<a name="index-MAKEINFOHTML"></a>
</dt>
<dd><p>调用生成的命令<samp>.html</samp>文件。Automake将其定义为“ <samp>$(MAKEINFO) --html</samp> '。
</p>
</dd>
<dt><code>MAKEINFOFLAGS</code>
<a name="index-MAKEINFOFLAGS"></a>
</dt>
<dd><p>用户标志传递给“ <samp>$(MAKEINFO)</samp> '和' <samp>$(MAKEINFOHTML)</samp> '。此用户变量（请参阅<a href="#User-Variables">用户变量</a> ）不应在任何<samp>Makefile</samp> ;用户可以使用它来传递额外的标志，以满足他们的需求。
</p>
</dd>
<dt><code>AM_MAKEINFOFLAGS</code>
<a name="index-AM_005fMAKEINFOFLAGS"></a>
</dt>
<dt><code>AM_MAKEINFOHTMLFLAGS</code>
<a name="index-AM_005fMAKEINFOHTMLFLAGS"></a>
</dt>
<dd><p>维护者标志传递给每个<code>makeinfo</code>调用。不像<code>MAKEINFOFLAGS</code> ，这些变量应由维护者在<samp>Makefile.am</samp> 。 ' <samp>$(AM_MAKEINFOFLAGS)</samp> '被传递给<code>makeinfo</code>在建造时<samp>.info</samp>文件；和' <samp>$(AM_MAKEINFOHTMLFLAGS)</samp> '在构建时使用<samp>.html</samp>文件。
</p>
<p>例如，以下设置可用于获取一个<samp>.html</samp>每本手册中的文件，没有节点分隔符。
</p><div class="example">
<pre class="example">AM_MAKEINFOHTMLFLAGS = --no-headers --no-split
</pre></div>

<p><code>AM_MAKEINFOHTMLFLAGS</code>默认为' <samp>$(AM_MAKEINFOFLAGS)</samp> '。这意味着定义<code>AM_MAKEINFOFLAGS</code>没有定义<code>AM_MAKEINFOHTMLFLAGS</code>将影响两者的建造<samp>.info</samp>和<samp>.html</samp>文件。
</p>
</dd>
<dt><code>TEXI2DVI</code>
<a name="index-TEXI2DVI"></a>
</dt>
<dd><p>转换命令的命令的名称<samp>.texi</samp>归档到<samp>.dvi</samp>文件。默认为“ <samp>texi2dvi</samp> '，Texinfo软件包随附的脚本。
</p>
</dd>
<dt><code>TEXI2PDF</code>
<a name="index-TEXI2PDF"></a>
</dt>
<dd><p>转换以下内容的命令的名称<samp>.texi</samp>归档到<samp>.pdf</samp>文件。默认为“ <samp>$(TEXI2DVI) --pdf --batch</samp> '。
</p>
</dd>
<dt><code>DVIPS</code>
<a name="index-DVIPS"></a>
</dt>
<dd><p>生成一个命令的命令的名称<samp>.ps</samp>从一个文件<samp>.dvi</samp>文件。默认为“ <samp>dvips</samp> '。
</p>
</dd>
<dt><code>TEXINFO_TEX</code>
<a name="index-TEXINFO_005fTEX"></a>
</dt>
<dd>
<p>如果您的软件包在许多目录中都有Texinfo文件，则可以使用变量<code>TEXINFO_TEX</code>告诉Automake在哪里可以找到规范<samp>texinfo.tex</samp>为您的包裹。该变量的值应该是当前值的相对路径<samp>Makefile.am</samp>至<samp>texinfo.tex</samp> ：</p>
<div class="example">
<pre class="example">TEXINFO_TEX = ../doc/texinfo.tex
</pre></div>
</dd>
</dl>


<hr>
<a name="Man-Pages"></a>
<div class="header">
<p>上<a href="#Texinfo" rel="prev" accesskey="p">一篇</a> ： <a href="#Texinfo" rel="prev" accesskey="p">Texinfo</a> ，上<a href="#Texinfo" rel="prev" accesskey="p">一篇</a> ： <a href="#Documentation" rel="up" accesskey="u">文档</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Man-Pages-1"></a>
<h3 class="section">11.2手册页</h3>

<a name="index-_005fMANS-primary_002c-defined"></a>
<a name="index-MANS-primary_002c-defined"></a>
<a name="index-Primary-variable_002c-MANS"></a>

<a name="index-_005fMANS"></a>
<a name="index-man_005fMANS"></a>
<p>一个包也可以包括手册页（但见这件事情，GNU的标准<a href="http://www.gnu.org/prep/standards/standards.html#Man-Pages">手册页</a>中<cite>的GNU编码标准</cite> 。）手册页使用<code>MANS</code>主。一般而言<code>man_MANS</code>使用变量。手册页会自动安装在以下位置的正确子目录中<code>mandir</code> ，基于文件扩展名。
</p>
<p>文件扩展名，例如<samp>.1c</samp>通过查找扩展名的有效部分并使用它来确定扩展名的正确子目录来进行处理<code>mandir</code> 。有效的部分名称是数字“ <samp>0</samp> '通过' <samp>9</samp> '和字母' <samp>l</samp> '和' <samp>n</samp> '。
</p>
<p>有时，开发人员喜欢将手册页命名为<samp>foo.man</samp>在源文件中，然后将其重命名为具有正确的后缀，例如<samp>foo.1</samp> ，安装文件时。Automake也支持此模式。对于名为的有效部分<var>section</var> ，有一个名为“ <samp>man<var>section</var>dir</samp> '，以及相应的<code>_MANS</code>变量。在指定的部分中安装了此类变量中列出的文件。如果文件已经具有有效的后缀，则按原样安装。否则，文件后缀将更改为与该部分匹配。
</p>
<p>例如，考虑以下示例：</p><div class="example">
<pre class="example">man1_MANS = rename.man thesame.1 alsothesame.1c
</pre></div>

<p>在这种情况下， <samp>rename.man</samp>将重命名为<samp>rename.1</samp>安装时，其他文件将保留其名称。
</p>
<a name="index-Target_002c-install_002dman"></a>
<a name="index-Option_002c-no_002dinstallman"></a>
<a name="index-install_002dman-target"></a>
<a name="index-no_002dinstallman-option"></a>
<a name="index-no_002dinstallman"></a>
<a name="index-install_002dman"></a>

<p>默认情况下，手册页由' <samp>make install</samp> '。但是，由于GNU项目不需要手册页，因此许多维护人员不会花费精力使手册页保持最新。在这些情况下， <samp>no-installman</samp>选项将阻止默认情况下安装手册页。用户仍然可以通过“ <samp>make install-man</samp> '。
</p>
<p>为了快速安装，包含许多文件，最好使用' <samp>man<var>section</var>_MANS</samp> '结束' <samp>man_MANS</samp>以及不需要重命名的文件。
</p>
<p>手册页当前不被视为源，因为自动生成手册页并不罕见。因此，它们不会自动包含在分发中。但是，可以通过使用<code>dist_</code>字首。例如，这里是如何分发和安装GNU的两个手册页的方法<code>cpio</code> （包括Texinfo文档和手册页）：</p>
<div class="example">
<pre class="example">dist_man_MANS = cpio.1 mt.1
</pre></div>

<p>的<code>nobase_</code>前缀对于手册页没有意义，因此是不允许的。
</p>
<a name="index-notrans_005f"></a>
<a name="index-notrans_005f-prefix"></a>
<a name="index-Man-page-renaming_002c-avoiding"></a>
<a name="index-Avoiding-man-page-renaming"></a>

<p>可执行文件和联机帮助页可以在安装时<a href="#Renaming">重命名</a> （请参阅<a href="#Renaming">重命名</a> ）。对于手册页，可以通过使用<code>notrans_</code>字首。例如，假设一个可执行文件' <samp>foo</samp> “允许访问库函数” <samp>foo</samp>从命令行。避免重命名的方式<samp>foo.3</samp>联机帮助页是：</p>
<div class="example">
<pre class="example">man_MANS = foo.1
notrans_man_MANS = foo.3
</pre></div>

<a name="index-notrans_005f-and-dist_005f-or-nodist_005f"></a>
<a name="index-dist_005f-and-notrans_005f"></a>
<a name="index-nodist_005f-and-notrans_005f"></a>

<p>' <samp>notrans_</samp>与以下任何一个一起使用时，必须先指定“ <samp>dist_</samp> ' 要么 ' <samp>nodist_</samp> '（请参阅<a href="#Fine_002dgrained-Distribution-Control">细粒度的分发控制</a> ）。例如：</p>
<div class="example">
<pre class="example">notrans_dist_man3_MANS = bar.3
</pre></div>

<hr>
<a name="Install"></a>
<div class="header">
<p>下一篇： <a href="#Clean" rel="next" accesskey="n">清洁</a> ，上一篇： <a href="#Documentation" rel="prev" accesskey="p">文档</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="What-Gets-Installed"></a>
<h2 class="chapter">12安装什么</h2>

<a name="index-Installation-support"></a>
<a name="index-make-install-support"></a>

<p>自然，一旦构建程序，Automake就会处理实际安装程序的详细信息。当用户运行“ <samp>make install</samp> '。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Basics-of-Installation" accesskey="1">安装基础</a> ：</td><td>  </td><td align="left" valign="top">什么安装在哪里</td></tr>
<tr><td align="left" valign="top">• <a href="#The-Two-Parts-of-Install" accesskey="2">安装的两个部分</a> ：</td><td>  </td><td align="left" valign="top">分别安装数据和程序</td></tr>
<tr><td align="left" valign="top">• <a href="#Extending-Installation" accesskey="3">扩展安装</a> ：</td><td>  </td><td align="left" valign="top">添加您自己的安装规则</td></tr>
<tr><td align="left" valign="top">• <a href="#Staged-Installs" accesskey="4">分阶段安装</a> ：</td><td>  </td><td align="left" valign="top">在临时位置安装</td></tr>
<tr><td align="left" valign="top">• <a href="#Install-Rules-for-the-User" accesskey="5">为用户安装规则</a> ：</td><td>  </td><td align="left" valign="top">有用的附加规则</td></tr>
</tbody></table>

<hr>
<a name="Basics-of-Installation"></a>
<div class="header">
<p>下一页： <a href="#The-Two-Parts-of-Install" rel="next" accesskey="n">安装的两个部分</a> ，上： <a href="#Install" rel="up" accesskey="u">安装</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Basics-of-Installation-1"></a>
<h3 class="section">12.1安装基础</h3>

<p>通过将生成的文件复制到适当的目录中，可以安装主要文件中的文件。安装时使用文件的基本名称。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = hello subdir/goodbye
</pre></div>

<p>在此示例中， <samp>hello</samp> '和' <samp>goodbye</samp>将安装在<samp>$(bindir)</samp> '。
</p>
<p>有时在安装时避免使用basename步骤很有用。例如，您可能在源树的子目录中有许多头文件，这些头文件正好按照您要如何安装它们的方式布置。在这种情况下，您可以使用<code>nobase_</code>前缀以取消基本名称步骤。例如：</p>
<div class="example">
<pre class="example">nobase_include_HEADERS = stdio.h sys/types.h
</pre></div>

<p>将会安装<samp>stdio.h</samp>在“ <samp>$(includedir)</samp> '和<samp>types.h</samp>在“ <samp>$(includedir)/sys</samp> '。
</p>
<p>对于大多数文件类型，Automake将一次安装多个文件，同时避免了命令行长度问题（请参阅“ <a href="#Length-Limitations">长度限制”</a> ）。由于一些<code>install</code>程序不会在一次调用中两次安装相同的文件，因此您可能需要确保文件列表在一个变量（例如“ <samp>nobase_include_HEADERS</samp> ' 以上。
</p>
<p>您不应依赖一个变量中列出的文件的安装顺序。同样，为了满足并行制作的需要，即使在不同的文件类型之间，您也不应依赖任何特定的文件安装顺序（库相关性在这里是一个例外）。
</p>

<hr>
<a name="The-Two-Parts-of-Install"></a>
<div class="header">
<p>下一页： <a href="#Extending-Installation" rel="next" accesskey="n">扩展安装</a> ，上一页： <a href="#Basics-of-Installation" rel="prev" accesskey="p">安装基础</a> ，向上： <a href="#Install" rel="up" accesskey="u">安装</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-Two-Parts-of-Install-1"></a>
<h3 class="section">12.2安装的两个部分</h3>

<p>Automake生成单独的<code>install-data</code>和<code>install-exec</code>如果安装程序要在共享目录结构的多台机器上安装，则这些规则允许这些独立于机器的部件仅安装一次。 <code>install-exec</code>安装平台相关的文件，以及<code>install-data</code>安装平台无关的文件。的<code>install</code>目标取决于这两个目标。当Automake尝试将对象自动隔离到正确的类别时， <samp>Makefile.am</samp>最后，作者负责确保正确完成此操作。
<a name="index-install_002ddata-1"></a>
<a name="index-install_002dexec-1"></a>
<a name="index-install-1"></a>
<a name="index-Install_002c-two-parts-of"></a>
</p>
<p>使用标准目录前缀的变量<samp>data</samp> '，' <samp>info</samp> '，' <samp>man</samp> '，' <samp>include</samp> '，' <samp>oldinclude</samp> '，' <samp>pkgdata</samp> '， 要么 ' <samp>pkginclude</samp> '由安装<code>install-data</code> 。
</p>
<p>使用标准目录前缀的变量<samp>bin</samp> '，' <samp>sbin</samp> '，' <samp>libexec</samp> '，' <samp>sysconf</samp> '，' <samp>localstate</samp> '，' <samp>lib</samp> '， 要么 ' <samp>pkglib</samp> '由安装<code>install-exec</code> 。
</p>
<p>例如， <code>data_DATA</code>文件由安装<code>install-data</code> ，而<code>bin_PROGRAMS</code>文件由安装<code>install-exec</code> 。
</p>
<p>任何使用带有“ <samp>exec</samp>的名称（例如， <code>myexecbin_PROGRAMS</code> ）由安装<code>install-exec</code> 。所有其他用户定义的前缀均由安装<code>install-data</code> 。
</p>
<hr>
<a name="Extending-Installation"></a>
<div class="header">
<p>下一篇： <a href="#Staged-Installs" rel="next" accesskey="n">分阶段安装</a> ，上一篇： <a href="#Staged-Installs" rel="next" accesskey="n">安装</a> <a href="#The-Two-Parts-of-Install" rel="prev" accesskey="p">的两个部分</a> ，上一篇： <a href="#Install" rel="up" accesskey="u">安装</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Extending-Installation-1"></a>
<h3 class="section">12.3扩展安装</h3>

<p>通过定义一个<code>install-exec-local</code>要么<code>install-data-local</code>规则。如果存在这些规则，它们将在“ <samp>make install</samp> ' 时间。这些规则几乎可以做任何事情。需要照顾。
<a name="index-install_002dexec_002dlocal"></a>
<a name="index-install_002ddata_002dlocal"></a>
</p>
<p>Automake还支持两个安装挂钩， <code>install-exec-hook</code>和<code>install-data-hook</code> 。这些挂钩在适当类型（exec或data）的所有其他安装规则完成后运行。因此，例如，可以使用安装挂钩执行安装后修改。有关示例，请参见<a href="#Extending">扩展</a> 。
<a name="index-Install-hook"></a>
</p>
<hr>
<a name="Staged-Installs"></a>
<div class="header">
<p>下一页： <a href="#Install-Rules-for-the-User" rel="next" accesskey="n">为用户安装规则</a> ，上一页： <a href="#Extending-Installation" rel="prev" accesskey="p">扩展安装</a> ，上一页： <a href="#Install" rel="up" accesskey="u">安装</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Staged-Installs-1"></a>
<h3 class="section">12.4分阶段安装</h3>

<a name="index-DESTDIR-1"></a>
<p>Automake生成对<code>DESTDIR</code>所有安装规则中的变量。 <code>DESTDIR</code>在“ <samp>make install</samp>步骤将安装对象重新放置到暂存区域。每个对象和路径都以的值作为前缀<code>DESTDIR</code>在复制到安装区域之前。这是典型的DESTDIR用法示例：</p>
<div class="example">
<pre class="example">mkdir /tmp/staging &amp;&amp;
make DESTDIR=/tmp/staging install
</pre></div>

<p>的<code>mkdir</code>如果攻击者从以下位置创建符号链接，则该命令可避免安全问题： <samp>/tmp/staging</samp>到受害地区；然后<code>make</code>将安装对象放置在以下目录树中<samp>/tmp/staging</samp> 。如果<samp>/gnu/bin/foo</samp>和<samp>/gnu/share/aclocal/foo.m4</samp>要安装，上面的命令将安装<samp>/tmp/staging/gnu/bin/foo</samp>和<samp>/tmp/staging/gnu/share/aclocal/foo.m4</samp> 。
</p>
<p>此功能通常用于构建安装映像和软件包（请参阅<a href="#DESTDIR">DESTDIR</a> ）。
</p>
<p>支持<code>DESTDIR</code>通过将其直接编码为安装规则来实现。如果你的<samp>Makefile.am</samp>使用本地安装规则（例如， <code>install-exec-local</code> ）或安装挂钩，那么您必须编写该代码以遵守<code>DESTDIR</code> 。
</p>
<p>有关另一个用法示例，请参见<cite>GNU编码标准</cite>中<cite>的</cite> <a href="http://www.gnu.org/prep/standards/standards.html#Makefile-Conventions">Makefile约定</a> 。
</p>
<hr>
<a name="Install-Rules-for-the-User"></a>
<div class="header">
<p>上一页： <a href="#Staged-Installs" rel="prev" accesskey="p">分段安装</a> ，向上： <a href="#Install" rel="up" accesskey="u">安装</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Install-Rules-for-the-User-1"></a>
<h3 class="section">12.5用户安装规则</h3>

<p>Automake还为目标生成规则<code>uninstall</code> ， <code>installdirs</code>和<code>install-strip</code> 。
<a name="index-uninstall-1"></a>
<a name="index-installdirs"></a>
<a name="index-install_002dstrip-1"></a>
</p>
<p>自动制作支持<code>uninstall-local</code>和<code>uninstall-hook</code> 。没有针对“ exec”和“ data”进行单独卸载的概念，因为这些功能不会提供其他功能。
</p>
<p>注意<code>uninstall</code>并不意味着可以代替真正的包装工具。
</p>

<hr>
<a name="Clean"></a>
<div class="header">
<p>下一页： <a href="#Dist" rel="next" accesskey="n">Dist</a> ，上一页： <a href="#Install" rel="prev" accesskey="p">安装</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="What-Gets-Cleaned"></a>
<h2 class="chapter">13清洁什么</h2>

<a name="index-make-clean-support"></a>

<p>GNU Makefile标准指定了许多不同的清除规则。请参阅<cite>GNU编码标准中的</cite> <a href="http://www.gnu.org/prep/standards/standards.html#Standard-Targets">用户标准目标</a> 。
</p>
<p>通常，可以清除的文件由Automake自动确定。当然，Automake还可以识别一些可以定义的变量，以指定要清除的其他文件。这些变量是<code>MOSTLYCLEANFILES</code> ， <code>CLEANFILES</code> ， <code>DISTCLEANFILES</code>和<code>MAINTAINERCLEANFILES</code> 。
<a name="index-MOSTLYCLEANFILES"></a>
<a name="index-CLEANFILES"></a>
<a name="index-DISTCLEANFILES"></a>
<a name="index-MAINTAINERCLEANFILES"></a>
</p>
<a name="index-mostlyclean_002dlocal"></a>
<a name="index-clean_002dlocal"></a>
<a name="index-distclean_002dlocal"></a>
<a name="index-maintainer_002dclean_002dlocal"></a>
<p>如果清理涉及的不仅仅是删除一些硬编码的文件列表，还可以使用自己的命令来补充清理规则。只需为任何<code>mostlyclean-local</code> ， <code>clean-local</code> ， <code>distclean-local</code> ， 要么<code>maintainer-clean-local</code>目标（请参阅<a href="#Extending">扩展</a> ）。常见的情况是删除目录，例如，由测试套件创建的目录：</p>
<div class="example">
<pre class="example">clean-local:
        -rm -rf testSubDir
</pre></div>

<p>以来<code>make</code>给定目标仅允许使用一组规则，一种更可扩展的编写方式是使用列出为依赖项的单独目标：</p>
<div class="example">
<pre class="example">clean-local: clean-local-check
.PHONY: clean-local-check
clean-local-check:
        -rm -rf testSubDir
</pre></div>

<p>由于GNU标准并不总是明确应通过哪种规则删除哪些文件，因此我们采用了一种启发式方法，我们认为该方法最初是由FrançoisPinard提出的：</p>
<ul>
<li>如果<code>make</code>建造它，通常这是人们想要重建的东西（例如， <samp>.o</samp>文件），然后<code>mostlyclean</code>应该删除它。

</li><li>否则，如果<code>make</code>建造它，然后<code>clean</code>应该删除它。

</li><li>如果<code>configure</code>建造它，然后<code>distclean</code>应该删除它。

</li><li>如果维护者构建了它（例如， <samp>.info</samp>文件），然后<code>maintainer-clean</code>应该删除它。然而<code>maintainer-clean</code>不应删除运行时所需的任何内容， <samp>./configure && make</samp> '。
</li></ul>

<p>我们建议您在自己的方法中遵循相同的启发式方法<samp>Makefile.am</samp> 。
</p>

<hr>
<a name="Dist"></a>
<div class="header">
<p>下一个： <a href="#Tests" rel="next" accesskey="n">测试</a> ，上一个： <a href="#Clean" rel="prev" accesskey="p">清理</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="What-Goes-in-a-Distribution"></a>
<h2 class="chapter">14发行内容</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Basics-of-Distribution" accesskey="1">分发基础</a> ：</td><td>  </td><td align="left" valign="top">默认情况下分发的文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Fine_002dgrained-Distribution-Control" accesskey="2">细粒度的分发控制</a> ：</td><td>  </td><td align="left" valign="top"><code>dist_</code>和<code>nodist_</code>前缀</td></tr>
<tr><td align="left" valign="top">• <a href="#The-dist-Hook" accesskey="3">dist挂钩</a> ：</td><td>  </td><td align="left" valign="top">最后分发目标更改</td></tr>
<tr><td align="left" valign="top">• <a href="#Checking-the-Distribution" accesskey="4">检查分布</a> ：</td><td>  </td><td align="left" valign="top">' <samp>make distcheck</samp>解释</td></tr>
<tr><td align="left" valign="top">• <a href="#The-Types-of-Distributions" accesskey="5">分布类型</a> ：</td><td>  </td><td align="left" valign="top">多种格式和压缩方法</td></tr>
</tbody></table>

<hr>
<a name="Basics-of-Distribution"></a>
<div class="header">
<p>下一页： <a href="#Fine_002dgrained-Distribution-Control" rel="next" accesskey="n">细粒度的分发控制</a> ，上： <a href="#Dist" rel="up" accesskey="u">远</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Basics-of-Distribution-1"></a>
<h3 class="section">14.1发行基础</h3>

<a name="index-make-dist"></a>

<a name="index-PACKAGE"></a>
<a name="index-VERSION"></a>
<a name="index-dist-1"></a>
<p>的<code>dist</code>生成的规则<samp>Makefile.in</samp>可用于生成压缩文件<code>tar</code>文件和其他可用于分发的存档。该文件的命名基于<code>PACKAGE</code>和<code>VERSION</code>由以下任一者自动定义的变量<code>AC_INIT</code>调用或通过<em>不赞成使用的</em>两个参数调用<code>AM_INIT_AUTOMAKE</code>宏（有关这些变量如何从默认值或显式值获取其值的信息，请参见<a href="#Public-Macros">公共宏</a> ，这比预期的要难一些）。更精确地说<code>tar</code>文件名为“ <samp>${PACKAGE}-${VERSION}.tar.gz</samp> '。
<a name="index-GZIP_005fENV"></a>您可以使用<code>make</code>变量<code>GZIP_ENV</code>控制gzip的运行方式。默认设置是<samp>--best</samp> 。
</p>
<a name="index-m4_005finclude_002c-distribution"></a>
<a name="index-include_002c-distribution"></a>
<a name="index-m4_005finclude"></a>
<a name="index-include"></a>
<p>在大多数情况下，Automake会自动找到要分发的文件：所有源文件都会自动包含在分发中<samp>Makefile.am</samp>和<samp>Makefile.in</samp>文件。Automake还具有一个内置的常用文件列表，如果在当前目录中找到这些文件，则这些文件会自动包含在内（物理上或作为目标文件） <samp>Makefile.am</samp>规则）;此列表由“ <samp>automake --help</samp> '。请注意，只有在满足其他某些条件（例如， <samp>config.h.top</samp>和<samp>config.h.bot</samp>仅在例如“ <samp>AC_CONFIG_HEADERS([config.h])</samp> '用于<samp>configure.ac</samp> ）。另外，读取的文件<code>configure</code> （即与各种Autoconf宏中指定的文件相对应的源文件，例如<code>AC_CONFIG_FILES</code>和兄弟姐妹）自动分配。包含在<samp>Makefile.am</samp> （使用<code>include</code> ）或中<samp>configure.ac</samp> （使用<code>m4_include</code> ），以及与“ <samp>automake --add-missing</samp> '也分布。
</p>
<a name="index-EXTRA_005fDIST"></a>
<p>仍然有一些文件必须分发，但自动规则未涵盖这些文件。这些文件应列在<code>EXTRA_DIST</code>变量。您可以在子目录中提及文件<code>EXTRA_DIST</code> 。
</p>
<p>您还可以在中提及目录<code>EXTRA_DIST</code> ;在这种情况下，整个目录将被递归复制到发行版中。请注意，这还将复制目录中的<em>所有内容</em> ，包括Subversion的<samp>.svn</samp>私有目录或CVS / RCS版本控制文件；因此，我们建议不要按原样使用此功能。但是，您可以使用<code>dist-hook</code>改善问题的功能；请参阅<a href="#The-dist-Hook">dist Hook</a> 。
</p>
<a name="index-SUBDIRS-1"></a>
<a name="index-DIST_005fSUBDIRS-1"></a>
<p>如果您定义<code>SUBDIRS</code> ，Automake将以递归方式将子目录包含在分发中。如果<code>SUBDIRS</code>是有条件定义的（请参阅<a href="#Conditionals">Conditionals</a> ），Automake通常将包括可能出现在所有目录中的所有目录。 <code>SUBDIRS</code>在分发中。如果需要有条件地指定目录集，则可以设置变量<code>DIST_SUBDIRS</code>到要包含在分发中的确切子目录列表（请参阅<a href="#Conditional-Subdirectories">条件子目录</a> ）。
</p>

<hr>
<a name="Fine_002dgrained-Distribution-Control"></a>
<div class="header">
<p>下一篇： <a href="#The-dist-Hook" rel="next" accesskey="n">dist Hook</a> ，上一篇： <a href="#Basics-of-Distribution" rel="prev" accesskey="p">发行基础</a> ，上一篇： <a href="#Dist" rel="up" accesskey="u">Dist</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Fine_002dgrained-Distribution-Control-1"></a>
<h3 class="section">14.2细粒度的分发控制</h3>

<a name="index-dist_005f-1"></a>
<a name="index-nodist_005f-1"></a>
<p>有时您需要对分发中<em>没有的内容</em>进行更严格的控制。例如，您可能具有已生成的并且不想分发的源文件。在这种情况下，Automake可以使用<code>dist</code>和<code>nodist</code>前缀。任何主要或<code>_SOURCES</code>变量可以以<code>dist_</code>将列出的文件添加到分发中。同样， <code>nodist_</code>可用于从分发中省略文件。
</p>
<p>举例来说，这是在分配一些数据同时不分配某些源代码的情况下如何进行分配：</p>
<div class="example">
<pre class="example">dist_data_DATA = distribute-this
bin_PROGRAMS = foo
nodist_foo_SOURCES = do-not-distribute.c
</pre></div>

<hr>
<a name="The-dist-Hook"></a>
<div class="header">
<p>下一篇： <a href="#Checking-the-Distribution" rel="next" accesskey="n">检查发行版</a> ，上一篇： <a href="#Fine_002dgrained-Distribution-Control" rel="prev" accesskey="p">细粒度发行控制</a> ，上一篇： <a href="#Dist" rel="up" accesskey="u">远</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-dist-Hook-1"></a>
<h3 class="section">14.3 dist钩</h3>

<a name="index-dist_002dhook"></a>

<p>有时，在打包之前可以更改发行版很有用。如果<code>dist-hook</code>规则存在，它将在填充分发目录之后但在创建实际的分发归档文件之前运行。一种使用此方法的方法是通过在目录中指定目录来删除递归包含的不必要文件。 <code>EXTRA_DIST</code> ：</p>
<div class="example">
<pre class="example">EXTRA_DIST = doc
dist-hook:
        rm -rf `find $(distdir)/doc -type d -name .svn`
</pre></div>

<p>请注意<code>dist-hook</code>配方不应假定分发目录中的常规文件可写；如果是从只读的源代码树中打包，或者当<code>make distcheck</code>正在完成。出于类似的原因，配方不应假定将子目录放在分发目录中是因为将子目录列出<code>EXTRA_DIST</code>可写的。所以，如果<code>dist-hook</code>配方想要修改现有文件的内容（或<code>EXTRA_DIST</code>子目录），则应明确使其首先可写：</p>
<div class="example">
<pre class="example">EXTRA_DIST = README doc
dist-hook:
        chmod u+w $(distdir)/README $(distdir)/doc
        echo &quot;Distribution date: `date`&quot; &gt;&gt; README
        rm -f $(distdir)/doc/HACKING
</pre></div>

<a name="index-distdir-1"></a>
<a name="index-top_005fdistdir"></a>
<p>编写时方便使用的两个变量<code>dist-hook</code>规则是<samp>$(distdir)</samp> '和' <samp>$(top_distdir)</samp> '。
</p>
<p>' <samp>$(distdir)</samp> '指向目录<code>dist</code>规则将在创建tarball之前从当前目录复制文件。如果您位于顶层目录，则“ <samp>distdir = $(PACKAGE)-$(VERSION)</samp> '。在名为的子目录中使用时<samp>foo/</samp> ， 然后 ' <samp>distdir = ../$(PACKAGE)-$(VERSION)/foo</samp> '。' <samp>$(distdir)</samp> '可以是相对路径或绝对路径，请勿采用任何形式。
</p>
<p>' <samp>$(top_distdir)</samp> '始终指向分布式树的根目录。在顶层，它等于“ <samp>$(distdir)</samp> '。在里面<samp>foo/</samp>子目录“ <samp>top_distdir = ../$(PACKAGE)-$(VERSION)</samp> '。' <samp>$(top_distdir)</samp> '也可以是相对路径或绝对路径。
</p>
<p>请注意，使用<code>AC_CONFIG_SUBDIRS</code> （请参阅子<a href="#Subpackages">包</a> ），然后选择“ <samp>$(distdir)</samp> '和' <samp>$(top_distdir)</samp> '相对于包装，其中' <samp>make dist</samp>已运行，而不涉及任何子包。
</p>
<hr>
<a name="Checking-the-Distribution"></a>
<div class="header">
<p>下一个： <a href="#The-Types-of-Distributions" rel="next" accesskey="n">分布类型</a> ，上一个： <a href="#The-dist-Hook" rel="prev" accesskey="p">dist Hook</a> ，上： <a href="#Dist" rel="up" accesskey="u">Dist</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Checking-the-Distribution-1"></a>
<h3 class="section">14.4检查分布</h3>

<a name="index-make-distcheck"></a>
<a name="index-distcheck-1"></a>
<p>Automake还会生成一个<code>distcheck</code>可以帮助确保给定分发确实有效的规则。简化一下，可以说此规则首先进行分配，然后<em>从中进行操作</em> ，采取以下步骤：</p><ul>
<li>尝试做一个<code>VPATH</code>构建（请参见<a href="#VPATH-Builds">VPATH构建</a> ）， <code>srcdir</code>并且其所有内容均设为<em>只读</em> ；</li><li>运行测试套件（带有<code>make check</code> ）在这个新的版本上；</li><li>将软件包安装在一个临时目录（带有<code>make install</code> ），然后尝试在生成的安装中运行测试套件（带有<code>make installcheck</code> ）;</li><li>检查软件包是否可以正确卸载（通过<code>make uninstall</code> ）并清洗（通过<code>make distclean</code> ）;</li><li>最后，制作另一个tarball以确保分发是独立的。
</li></ul>

<p>所有这些操作都在一个临时目录中执行。请注意，此类目录的确切位置和确切结构（放置只读源的位置，临时生成和安装目录的命名方式以及它们嵌套的深度等）将被视为实现细节。 ，可以随时更改；所以不要回复。
</p>
<a name="index-AM_005fDISTCHECK_005fCONFIGURE_005fFLAGS"></a>
<a name="index-DISTCHECK_005fCONFIGURE_005fFLAGS"></a>
<a name="DISTCHECK_005fCONFIGURE_005fFLAGS"></a>
<h4 class="subheading">DISTCHECK_CONFIGURE_FLAGS</h4>
<p>构建程序包涉及运行“ <samp>./configure</samp> '。如果您需要提供其他标志来<code>configure</code> ，在<code>AM_DISTCHECK_CONFIGURE_FLAGS</code>顶层变量<samp>Makefile.am</samp> 。用户仍然可以通过定义<code>DISTCHECK_CONFIGURE_FLAGS</code>变量，在调用时在命令行上<code>make</code> 。值得注意的是<code>make distcheck</code>需要完全控制<code>configure</code>选项<samp>--srcdir</samp>和<samp>--prefix</samp> ，因此这些选项不能被覆盖<code>AM_DISTCHECK_CONFIGURE_FLAGS</code>也不由<code>DISTCHECK_CONFIGURE_FLAGS</code> 。
</p>
<p>还应注意，鼓励开发人员在无需任何特殊配置选项的情况下努力使其代码可构建；因此，一般而言，您不应该定义<code>AM_DISTCHECK_CONFIGURE_FLAGS</code> 。但是，可能在少数情况下可以合理使用此变量。GNU <code>m4</code>提供了一个例子。GNU <code>m4</code>默认情况下进行配置，其实验性的和很少使用的“ changeword”功能被禁用；因此，在这种情况下<code>make distcheck</code>运行配置<samp>--with-changeword</samp>选项，以确保支持changeword的代码仍能正确编译。GNU <code>m4</code>也雇用<code>AM_DISTCHECK_CONFIGURE_FLAGS</code>变量以压力测试使用<samp>--program-prefix=g</samp> ，因为在某一时刻<code>m4</code>构建系统有一个错误<code>make installcheck</code>错误地假设它可以盲目测试“ <code>m4</code> ”，而不是刚刚安装的“ <code>gm4</code> ”。
</p>
<a name="index-distcheck_002dhook"></a>
<a name="distcheck_002dhook"></a>
<h4 class="subheading">distcheck-hook</h4>
<p>如果<code>distcheck-hook</code>规则是在您的顶层定义的<samp>Makefile.am</samp> ，那么它将由调用<code>distcheck</code>在解压缩新发行版之后，但在配置和构建解压缩后的副本之前。你的<code>distcheck-hook</code>尽管一如既往地建议您注意，但几乎可以做任何事情。通常，此挂钩用于检查标准机制未捕获的潜在分发错误。注意<code>distcheck-hook</code>以及<code>AM_DISTCHECK_CONFIGURE_FLAGS</code>和<code>DISTCHECK_CONFIGURE_FLAGS</code>在子包中不被接受<samp>Makefile.am</samp> ，但标志来自<code>AM_DISTCHECK_CONFIGURE_FLAGS</code>和<code>DISTCHECK_CONFIGURE_FLAGS</code>传递给<code>configure</code>子程序包的脚本。
</p>
<a name="index-make-distcleancheck"></a>
<a name="index-distcleancheck"></a>
<a name="index-DISTCLEANFILES-1"></a>
<a name="index-distcleancheck_005flistfiles"></a>

<a name="distcleancheck"></a>
<h4 class="subheading">distcleancheck</h4>
<p>说到潜在的分配错误， <code>distcheck</code>还可以确保<code>distclean</code>规则实际上会删除所有构建的文件。这是通过运行“ <samp>make distcleancheck</samp> '在末尾<code>VPATH</code>建立。默认， <code>distcleancheck</code>会跑<code>distclean</code>然后通过运行'确保构建树已清空<samp>$(distcleancheck_listfiles)</samp> '。通常，此检查会找到您忘记添加到文件中的生成文件<code>DISTCLEANFILES</code>变量（请参阅<a href="#Clean">Clean</a> ）。
</p>
<p>的<code>distcleancheck</code>大多数包的行为应该可以，否则您可以覆盖以下任一包的定义<code>distcleancheck</code>规则或“ <samp>$(distcleancheck_listfiles)</samp> '变量。例如，禁用<code>distcleancheck</code>完全，将以下规则添加到顶层<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">distcleancheck:
        @:
</pre></div>

<p>如果你想<code>distcleancheck</code>要忽略由于它们也是发行版的一部分而尚未清除的构建文件，请添加以下定义：</p>
<div class="example">
<pre class="example">distcleancheck_listfiles = \
  find . -type f -exec sh -c 'test -f $(srcdir)/$$1 || echo $$1' \
       sh '{}' ';'
</pre></div>

<p>上面的定义不是默认的，因为如果您的Makefile在用户生成软件包时导致某些分布式文件被重建，则通常是错误的。（考虑到用户缺少构建文件所需的工具；或者如果所需的工具是由程序包构建的，请考虑无法运行该文件的交叉编译情况。）常见问题解答中有一个与此相关的条目（请参阅<a href="#Errors-with-distclean">distclean的错误</a> ），请确保您在玩游戏之前先阅读了该条目。 <code>distcleancheck_listfiles</code> 。
</p>
<a name="index-make-distuninstallcheck"></a>
<a name="index-distuninstallcheck"></a>
<a name="index-distuninstallcheck_005flistfiles"></a>

<a name="distuninstallcheck"></a>
<h4 class="subheading">distuninstallcheck</h4>
<p><code>distcheck</code>还检查<code>uninstall</code>规则适用于普通人和<code>DESTDIR</code>建立。它通过调用“ <samp>make uninstall</samp> '，然后检查安装树以查看是否有剩余文件。此检查将确保您正确编码了<code>uninstall</code>相关规则。
</p>
<p>默认情况下，检查是通过<code>distuninstallcheck</code>规则，并且安装树中的文件列表由“ <samp>$(distuninstallcheck_listfiles)</samp> '（这是一个变量，其值是要运行的shell命令，该命令将文件列表打印到stdout）。
</p>
<p>这些都可以被覆盖以修改行为<code>distcheck</code> 。例如，要完全禁用此检查，您可以编写：</p>
<div class="example">
<pre class="example">distuninstallcheck:
        @:
</pre></div>

<hr>
<a name="The-Types-of-Distributions"></a>
<div class="header">
<p>上一页： <a href="#Checking-the-Distribution" rel="prev" accesskey="p">检查分布</a> ，向上： <a href="#Dist" rel="up" accesskey="u">远</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-Types-of-Distributions-1"></a>
<h3 class="section">14.5分布类型</h3>

<p>Automake生成规则以提供项目档案，以各种格式分发。他们的目标是：</p>
<dl compact>
<dt><code>dist-gzip</code></dt>
<dd><p>生成一个<samp>gzip</samp> tar的发行档案。这是默认情况下唯一启用的格式。
<a name="index-dist_002dgzip"></a>
</p>
<a name="index-BZIP2"></a>
</dd>
<dt><code>dist-bzip2</code></dt>
<dd><p>生成一个<samp>bzip2</samp> tar的发行档案。 bzip2存档通常小于压缩的存档。默认情况下，此规则使“ <samp>bzip2</samp> '使用压缩选项<samp>-9</samp> 。要使其使用另一种，请设置<code>BZIP2</code>环境变量。例如， ' <samp>make dist-bzip2 BZIP2=-7</samp> '。
<a name="index-dist_002dbzip2-1"></a>
</p>
</dd>
<dt><code>dist-lzip</code></dt>
<dd><p>生成一个“ <samp>lzip</samp> tar的发行档案。<code>lzip</code>档案通常小于<code>bzip2</code>压缩档案。
<a name="index-dist_002dlzip-1"></a>
</p>
<a name="index-XZ_005fOPT"></a>
</dd>
<dt><code>dist-xz</code></dt>
<dd><p>生成一个“ <samp>xz</samp> tar的发行档案。<code>xz</code>档案通常小于<code>bzip2</code>压缩档案。默认情况下，此规则使“ <samp>xz</samp> '使用压缩选项<samp>-e</samp> 。要使其使用另一种，请设置<code>XZ_OPT</code>环境变量。例如，运行以下命令以使用默认压缩率，但带有进度指示器：“ <samp>make dist-xz XZ_OPT=-ve</samp> '。
<a name="index-dist_002dxz-1"></a>
</p>
</dd>
<dt><code>dist-zip</code></dt>
<dd><p>生成一个<samp>zip</samp>分发的存档。
<a name="index-dist_002dzip-1"></a>
</p>
</dd>
<dt><code>dist-tarZ</code></dt>
<dd><p>生成发行版的tar归档文件，并使用历史（且过时）程序进行压缩<code>compress</code> 。不建议使用该选项，并且在Automake 2.0中将完全删除该选项和相应的功能。
<a name="index-dist_002dtarZ-1"></a>
</p>
</dd>
<dt><code>dist-shar</code></dt>
<dd><p>生成一个<samp>shar</samp>分发的存档。该格式存档已过时，并且不建议使用此选项。它和相应的功能将在Automake 2.0中完全删除。
<a name="index-dist_002dshar-1"></a>
</p>
</dd>
</dl>

<p>规则<code>dist</code> （及其历史同义词<code>dist-all</code> ）将以所有启用的格式创建档案（有关如何更改此列表，请参见自动制作<a href="#List-of-Automake-options">选项</a>列表）。默认情况下，仅<code>dist-gzip</code>目标挂钩<code>dist</code> 。
</p>

<hr>
<a name="Tests"></a>
<div class="header">
<p>下一篇： <a href="#Rebuilding" rel="next" accesskey="n">重建</a> ，上一篇： <a href="#Dist" rel="prev" accesskey="p">Dist</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Support-for-test-suites"></a>
<h2 class="chapter">15对测试套件的支持</h2>

<a name="index-Test-suites"></a>
<a name="index-make-check"></a>
<a name="index-check-1"></a>

<p>Automake可以生成用于处理两种测试套件的代码。一种是基于与<code>dejagnu</code>框架。另一种（也是最常用的）形式是基于通用测试脚本的使用，其激活是由特殊的定义触发的。 <code>TESTS</code>变量。第二种形式允许各种程度的复杂性和定制化；特别是，它允许并发执行测试脚本，使用已建立的测试协议（例如TAP）以及定义自定义测试驱动程序和测试运行程序。
</p>
<p>无论哪种情况，测试套件都通过' <samp>make check</samp> '。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Generalities-about-Testing" accesskey="1">关于测试的一般性</a> ：</td><td>  </td><td align="left" valign="top">有关测试的概念和术语</td></tr>
<tr><td align="left" valign="top">• <a href="#Simple-Tests" accesskey="2">简单测试</a> ：</td><td>  </td><td align="left" valign="top">列出测试脚本<code>TESTS</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Custom-Test-Drivers" accesskey="3">定制测试驱动程序</a> ：</td><td>  </td><td align="left" valign="top">编写和使用自定义测试驱动程序</td></tr>
<tr><td align="left" valign="top">• <a href="#Using-the-TAP-test-protocol" accesskey="4">使用TAP测试协议</a> ：</td><td>  </td><td align="left" valign="top">集成使用TAP协议的测试脚本</td></tr>
<tr><td align="left" valign="top">• <a href="#DejaGnu-Tests" accesskey="5">DejaGnu测试</a> ：</td><td>  </td><td align="left" valign="top">与<code>dejagnu</code>测试框架</td></tr>
<tr><td align="left" valign="top">• <a href="#Install-Tests" accesskey="6">安装测试</a> ：</td><td>  </td><td align="left" valign="top">在已安装的程序包上运行测试</td></tr>
</tbody></table>

<hr>
<a name="Generalities-about-Testing"></a>
<div class="header">
<p>下一页： <a href="#Simple-Tests" rel="next" accesskey="n">简单测试</a> ，上一步： <a href="#Tests" rel="up" accesskey="u">测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Generalities-about-Testing-1"></a>
<h3 class="section">15.1有关测试的一般性</h3>

<p>测试的目的是确定程序或系统的行为是否符合预期（例如，已知的输入会产生预期的输出，正确处理或报告错误情况以及不会重现较旧的错误）。
</p>
<a name="index-test-case"></a>
<p>测试的最小单位通常称为<em>测试用例</em> ，或简称为<em>test</em> 。如何测试情况被定义或界定，甚至究竟是什么<em>构成</em>一个测试用例，在很大程度上取决于所使用的测试模式和/或框架，所以我们不会尝试任何更精确的定义。给定程序或系统的测试用例集构成其<em>测试套件</em> 。
</p>
<a name="index-test-harness"></a>
<a name="index-testsuite-harness"></a>
<p><em>测试工具</em> （也称为<em>测试套件工具</em> ）是一种程序或软件组件，它执行所有（或部分）已定义的测试用例，分析其结果并适当地报告或注册这些结果。同样，如何完成此操作的详细信息（以及开发人员和用户如何影响它或与之交互）的细节千差万别，我们将不做任何精确的定义。
</p>
<a name="index-test-pass"></a>
<a name="index-test-failure"></a>
<p>测试被认为<em>通过</em>时，它能够确定它意味着验证状态或行为成立，并且被认为<em>失败</em>时，它能够确定的行为<em>不</em>成立的，这样的条件。
</p>
<a name="index-test-skip"></a>
<p>有时，测试可能依赖于不可移植的工具或先决条件，或者在给定的系统上根本没有意义（例如，检查Windows特定功能的测试在GNU / Linux系统上没有意义）。在这种情况下，根据上面的定义，测试不能被认为是通过或失败。相反，它们将被<em>跳过</em> -即它们没有运行，或者无论是关于失败计数还是成功计数，其结果都将被忽略。不过，通常会明确报告跳过情况，以便用户知道并非所有测试套件都已真正运行。
</p>
<a name="index-xfail"></a>
<a name="index-expected-failure"></a>
<a name="index-expected-test-failure"></a>
<a name="index-xpass"></a>
<a name="index-unexpected-pass"></a>
<a name="index-unexpected-test-pass"></a>
<p>某些测试由于已知的原因而失败，并且开发人员不希望立即解决这些失败（尤其是在失败的测试处理极端情况时尤其如此），这种情况并不少见，尤其是在早期开发阶段。在这种情况下，更好的策略是声明这些故障中的每一个都是<em>预期的故障</em> （或<em>xfail</em> ）。万一预期失败的测试最终通过通过，许多测试环境会将结果标记为一种特殊类型的失败，称为<em>意外通过</em> （或<em>xpass</em> ）。
</p>
<a name="index-hard-error"></a>
<a name="index-Distinction-between-errors-and-failures-in-testsuites"></a>
<p>许多测试环境和框架区分测试失败和硬错误。如我们所见，当未满足被测软件的某些不变或预期行为时，就会发生测试失败。当例如测试用例场景的设置失败或遇到其他一些意外或非常不希望的情况时（例如，被测程序遇到分段错误），就会发生<em>硬错误</em> 。
</p>
<hr>
<a name="Simple-Tests"></a>
<div class="header">
<p>下一页： <a href="#Custom-Test-Drivers" rel="next" accesskey="n">自定义测试车手</a> ，前一页： <a href="#Generalities-about-Testing" rel="prev" accesskey="p">通则有关测试</a> ，向上： <a href="#Tests" rel="up" accesskey="u">测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Simple-Tests-1"></a>
<h3 class="section">15.2简单测试</h3>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Scripts_002dbased-Testsuites" accesskey="1">基于脚本的测试套件</a> ：</td><td>  </td><td align="left" valign="top">特定于汽车制造的概念和术语</td></tr>
<tr><td align="left" valign="top">• <a href="#Serial-Test-Harness" accesskey="2">串行测试线束</a> ：</td><td>  </td><td align="left" valign="top">较旧（不鼓励使用）的串行测试工具</td></tr>
<tr><td align="left" valign="top">• <a href="#Parallel-Test-Harness" accesskey="3">并行测试线束</a> ：</td><td>  </td><td align="left" valign="top">通用并发测试工具</td></tr>
</tbody></table>

<hr>
<a name="Scripts_002dbased-Testsuites"></a>
<div class="header">
<p>下一篇： <a href="#Serial-Test-Harness" rel="next" accesskey="n">串行测试工具</a> ，上一篇： <a href="#Simple-Tests" rel="up" accesskey="u">简单测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Scripts_002dbased-Testsuites-1"></a>
<h4 class="subsection">15.2.1基于脚本的测试套件</h4>

<p>如果特殊变量<code>TESTS</code>被定义时，其值被视为要执行测试的程序或脚本的列表。在适当的情况下， <code>TESTS</code>还列出要传递给以不同方式定义的一个或多个测试脚本的数据文件（所谓的“日志编译器”，请参见<a href="#Parallel-Test-Harness">并行测试工具</a> ）。
</p>
<p>测试脚本可以串行或并发执行。Automake支持这两种测试执行，默认情况下并行测试工具。并发测试工具依赖于底层提供的并发功能（如果有） <code>make</code>实施，因此只能和它们一样好。
</p>
<p>默认情况下，确定测试套件结果时仅考虑测试脚本的退出状态。但是Automake也允许使用更复杂的测试协议，无论是标准协议（请参阅<a href="#Using-the-TAP-test-protocol">使用TAP测试协议</a> ）还是自定义<a href="#Using-the-TAP-test-protocol">协议</a> （请参阅<a href="#Custom-Test-Drivers">自定义测试驱动程序</a> ）。请注意，但是在使用串行线束时您无法启用此类协议。在本节的其余部分中，我们将主要集中在无协议的测试上，因为我们将在后面的部分中介绍测试协议（同样，请参见<a href="#Custom-Test-Drivers">Custom Test Drivers</a> ）。
</p>
<a name="index-Exit-status-77_002c-special-interpretation"></a>
<a name="index-Exit-status-99_002c-special-interpretation"></a>
<p>如果未使用任何测试协议，则测试脚本的退出状态为0表示成功，跳过测试的退出状态为77，硬错误为99的退出状态，其他任何退出状态都表示失败。
</p>
<a name="index-Tests_002c-expected-failure"></a>
<a name="index-Expected-test-failure"></a>
<a name="index-XFAIL_005fTESTS"></a>
<a name="index-DISABLE_005fHARD_005fERRORS"></a>
<a name="index-Disabling-hard-errors"></a>
<p>您可以定义变量<code>XFAIL_TESTS</code>测试列表（通常是<code>TESTS</code> ）预期会失败；这将有效地扭转那些测试的结果（提供跳过和硬错误保持不变的规定）。您还可以通过定义以下内容来指示测试套件工具处理诸如简单故障之类的硬错误： <code>DISABLE_HARD_ERRORS</code>将变量设为非空值。
</p>
<p>但是请注意，对于基于更复杂的测试协议的测试， <code>XFAIL_TESTS</code>和<code>DISABLE_HARD_ERRORS</code>可能会更改，甚至根本没有任何效果（例如，在使用TAP的测试中，无法禁用硬错误，并且<code>DISABLE_HARD_ERRORS</code>变量对它们没有影响）。
</p>
<a name="Testsuite-progress-on-console"></a><a name="index-Testsuite-progress-on-console"></a>
<p>每个测试用例的结果均由中的脚本运行<code>TESTS</code>将与测试名称一起打印在标准输出上。对于允许每个测试脚本（例如TAP）使用更多测试用例的测试协议，除了测试脚本的名称之外，还应打印特定于单个测试用例的数字，标识符和/或简短描述。可能的结果（其含义应从先前<a href="#Generalities-about-Testing">有关测试</a>的一般性中清楚看出）是<code>PASS</code> ， <code>FAIL</code> ， <code>SKIP</code> ， <code>XFAIL</code> ， <code>XPASS</code>和<code>ERROR</code> 。这是使用简单测试和TAP测试的假设测试套件输出的示例：</p><div class="example">
<pre class="example">PASS: foo.sh
PASS: zardoz.tap 1 - Daemon started
PASS: zardoz.tap 2 - Daemon responding
SKIP: zardoz.tap 3 - Daemon uses /proc # SKIP /proc is not mounted
PASS: zardoz.tap 4 - Daemon stopped
SKIP: bar.sh
PASS: mu.tap 1
XFAIL: mu.tap 2 # TODO frobnication not yet implemented
</pre></div>

<p>在测试套件运行结束时，将打印测试套件摘要（预期至少报告运行，已跳过和失败的测试数量）。
</p>
<a name="Simple-tests-and-color_002dtests"></a><a name="index-AM_005fCOLOR_005fTESTS"></a>
<a name="index-Colorized-testsuite-output"></a>
<p>如果将标准输出连接到有能力的端子，则测试结果和摘要将正确着色。开发者和用户可以通过设置<code>make</code>变数' <samp>AM_COLOR_TESTS=no</samp> ';即使没有连接端子，用户也可以强制彩色输出<samp>AM_COLOR_TESTS=always</samp> '。还值得注意的是<code>make</code>在并行模式下使用时，实现的语义略有不同（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Parallel-make">Parallel make</a> ），这可能会中断对有能力终端的连接的自动检测。在这种情况下，用户将不得不诉诸“ <samp>AM_COLOR_TESTS=always</samp>以使测试套件输出变色。
</p>
<p>需要数据文件的测试程序应在以下位置查找它们<code>srcdir</code> （这是供测试使用的make变量和环境变量），以便它们在单独的目录中<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Build-Directories">构建</a>时可以工作（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Build-Directories">Build Directories</a> ），尤其是对于<code>distcheck</code>规则（请参阅<a href="#Checking-the-Distribution">检查分发</a> ）。
</p>
<a name="index-TESTS"></a>
<a name="index-TESTS_005fENVIRONMENT"></a>
<a name="index-AM_005fTESTS_005fENVIRONMENT"></a>
<p>的<code>AM_TESTS_ENVIRONMENT</code>和<code>TESTS_ENVIRONMENT</code>变量可用于运行初始化代码并为测试脚本设置环境变量。前一个变量是开发者保留的，可以在<samp>Makefile.am</samp> ，而后者是为用户保留的，用户可以使用它来扩展或覆盖前者的设置；为了使其可移植，但是，非空的内容<code>AM_TESTS_ENVIRONMENT</code> <em>必须</em>以分号终止。
</p>
<a name="index-AM_005fTESTS_005fFD_005fREDIRECT"></a>
<p>的<code>AM_TESTS_FD_REDIRECT</code>变量可用于定义测试脚本的文件描述符重定向。有人可能会认为<code>AM_TESTS_ENVIRONMENT</code>可以将其用于此目的，但经验表明，这种移植几乎是不可能的。主要障碍由Korn Shells构成，它们通常在使用.com打开的文件描述符上设置close-on-exec标志。 <code>exec</code>内置的，因此呈现成语<code>AM_TESTS_ENVIRONMENT = exec 9>&2;</code>无效的。此问题还影响某些Bourne外壳，例如HP-UX的<code>/bin/sh</code> ，</p>
<div class="example">
<pre class="example">AM_TESTS_ENVIRONMENT = \
## Some environment initializations are kept in a separate shell
## file 'tests-env.sh', which can make it easier to also run tests
## from the command line.
  . $(srcdir)/tests-env.sh; \
## On Solaris, prefer more POSIX-compliant versions of the standard
## tools by default.
  if test -d /usr/xpg4/bin; then \
    PATH=/usr/xpg4/bin:$$PATH; export PATH; \
  fi;
## With this, the test scripts will be able to print diagnostic
## messages to the original standard error stream, even if the test
## driver redirects the stderr of the test scripts to a log file
## before executing them.
AM_TESTS_FD_REDIRECT = 9&gt;&amp;2
</pre></div>

<p>但是请注意<code>AM_TESTS_ENVIRONMENT</code>出于历史和实现原因，串行线束<em>不</em>支持该功能（请参阅“ <a href="#Serial-Test-Harness">串行测试线束”</a> ）。
</p>
<p>Automake确保列出的每个文件<code>TESTS</code>在运行之前已构建；您可以在以下位置列出源程序和派生程序（或脚本） <code>TESTS</code> ;生成的规则将在<code>srcdir</code>和<samp>.</samp> 。例如，您可能想运行C程序作为测试。为此，您将在<code>TESTS</code>并且在<code>check_PROGRAMS</code> ，然后像指定其他程序一样指定它。
</p>
<p>列出的程序<code>check_PROGRAMS</code> （和<code>check_LIBRARIES</code> ， <code>check_LTLIBRARIES</code> ...）仅在<code>make check</code> ，而不是在<code>make all</code> 。您应该在此处列出测试所需的任何程序，这些程序不需要<code>make all</code> 。注意<code>check_PROGRAMS</code> <em>不会</em>自动添加到<code>TESTS</code>因为<code>check_PROGRAMS</code>通常列出测试使用的程序，而不是测试本身。当然可以设定<code>TESTS = $(check_PROGRAMS)</code>如果所有程序都是测试用例。
</p>
<hr>
<a name="Serial-Test-Harness"></a>
<div class="header">
<p>下一篇： <a href="#Parallel-Test-Harness" rel="next" accesskey="n">并行测试工具</a> ，上一篇： <a href="#Scripts_002dbased-Testsuites" rel="prev" accesskey="p">基于脚本的</a> <a href="#Parallel-Test-Harness" rel="next" accesskey="n">测试套件</a> ，上一篇： <a href="#Simple-Tests" rel="up" accesskey="u">简单测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Older-_0028and-discouraged_0029-serial-test-harness"></a>
<h4 class="subsection">15.2.2旧的（不鼓励使用的）串行测试工具</h4>
<a name="index-serial_002dtests_002c-Using"></a>

<p>首先，请注意，今天强烈建议不要使用此线束，而建议使用并行测试线束（请参阅<a href="#Parallel-Test-Harness">并行测试线束</a> ）。但是，在<em>少数</em>情况下，并行线束所提供的优势无关紧要，并且测试并发甚至会引起棘手的问题。在这种情况下，出于简化和可靠性的考虑，仍然可以使用串行线束（尽管我们仍然建议尝试使用并行线束）。
</p>
<p>串行测试工具由Automake选项启用<samp>serial-tests</samp> 。它只需简单地连续运行测试一次即可运行，而无需任何I / O重定向。如果需要或需要，则由用户来实现对测试输出的记录。
</p>
<p>由于历史和实施原因， <code>AM_TESTS_ENVIRONMENT</code>该工具<em>不</em>支持变量（如果已定义，它将被静默忽略）；只要<code>TESTS_ENVIRONMENT</code>是，并且应将其视为开发者保留的变量。这样做是为了在使用串行线束时， <code>TESTS_ENVIRONMENT</code>可以定义为调用解释器来运行测试。例如，以下设置可用于使用Perl运行测试：</p>
<div class="example">
<pre class="example">TESTS_ENVIRONMENT = $(PERL) -Mstrict -w
TESTS = foo.pl bar.pl baz.pl
</pre></div>

<p>重要的是要注意<code>TESTS_ENVIRONMENT</code>此处认可的平行线束<em>无效</em> 。该安全带提供了一种更优雅的方式来实现相同的效果，并具有释放操纵杆的更多好处。 <code>TESTS_ENVIRONMENT</code>用户的变量（请参阅“ <a href="#Parallel-Test-Harness">并行测试线束”</a> ）。
</p>
<p>串行线束的另一个不太严重的限制是它不能真正区分简单故障和硬错误。这仅是由于历史原因，可能会在将来的Automake版本中修复。
</p>
<hr>
<a name="Parallel-Test-Harness"></a>
<div class="header">
<p>上一篇： <a href="#Serial-Test-Harness" rel="prev" accesskey="p">串行测试工具</a> ，上一篇： <a href="#Simple-Tests" rel="up" accesskey="u">简单测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Parallel-Test-Harness-1"></a>
<h4 class="subsection">15.2.3并行测试线束</h4>

<p>默认情况下，Automake会生成并行（并行）测试工具。它具有自动收集测试脚本输出的功能<samp>.log</samp>文件，并发执行测试<code>make -j</code> ，测试间依赖关系的规范，先前运行中未完成的测试的延迟重新运行以及异常失败的硬错误。
</p>
<a name="Basics-of-test-metadata"></a><a name="index-TEST_005fSUITE_005fLOG"></a>
<a name="index-TESTS-1"></a>
<a name="index-_002elog-files"></a>
<a name="index-_002etrs-files"></a>
<a name="index-test-metadata"></a>
<p>并行测试线束通过定义一组<code>make</code>运行“测试脚本”中列出的规则<code>TESTS</code> ，并针对每个此类脚本将其输出保存在相应的<samp>.log</samp>文件及其结果（以及其他“元数据”，请参见“ <a href="#API-for-Custom-Test-Drivers">自定义测试驱动程序的API</a> ”） <samp>.trs</samp> （作为<b>T</b>中的EST <b>- [R（E</b> <b>S）ULTS）</b>文件。的<samp>.log</samp>文件将包含测试在其标准输出及其标准错误上发出的所有输出。的<samp>.trs</samp>文件将包含脚本运行的测试用例的结果等。
</p>
<p>并行测试工具还将创建一个摘要日志文件， <code>TEST_SUITE_LOG</code> ，默认为<samp>test-suite.log</samp>并需要一个<samp>.log</samp>后缀。该文件取决于所有<samp>.log</samp>和<samp>.trs</samp>为列出的测试脚本创建的文件<code>TESTS</code> 。
</p>
<a name="index-VERBOSE"></a>
<p>与上面的串行线束一样，默认情况下，每项完成的测试都会打印一条状态行，套件完成后会简要列出。但是，标准输出和测试的标准错误被重定向到每个测试的日志文件，因此并行执行不会产生混合输出。失败测试的输出收集在<samp>test-suite.log</samp>文件。如果变量“ <samp>VERBOSE</samp>设置为'，在摘要后输出该文件。
</p>
<a name="index-TEST_005fEXTENSIONS"></a>
<a name="index-TEST_005fLOGS"></a>
<p>每对<samp>.log</samp>和<samp>.trs</samp>相应的测试完成后，将创建文件。日志文件集在只读变量中列出<code>TEST_LOGS</code> ，默认为<code>TESTS</code> ，可执行文件扩展名（如果有）（请参阅<a href="#EXEEXT">EXEEXT</a> ）以及后缀中列出的任何后缀<code>TEST_EXTENSIONS</code>删除，并且<samp>.log</samp>附加。如果测试文件名以多个串联的后缀结尾，则结果不确定。 <code>TEST_EXTENSIONS</code>默认为<samp>.test</samp> ;用户可以覆盖它，在这种情况下，其中列出的任何扩展名都必须由点组成，后跟一个非数字字母字符，然后是任意数量的字母字符。例如， ' <samp>.sh</samp> '，' <samp>.T</samp> '和' <samp>.t1</samp> '是有效的扩展名，而' <samp>.x-y</samp> '，' <samp>.6c</samp> '和' <samp>.t.1</samp> ' 不是。
</p>
<a name="index-Configure-substitutions-in-TESTS"></a>
<p>请务必注意，由于当前的限制（不太可能取消），请在<code>TESTS</code>仅当它们将扩展到后缀为的测试列表时才有效<code>TEST_EXTENSIONS</code> 。
</p>
<a name="index-_005fLOG_005fCOMPILE"></a>
<a name="index-_005fLOG_005fCOMPILER"></a>
<a name="index-_005fLOG_005fFLAGS"></a>
<a name="index-LOG_005fCOMPILE"></a>
<a name="index-LOG_005fCOMPILER"></a>
<a name="index-LOG_005fFLAGS"></a>
<a name="index-ext_005fLOG_005fCOMPILE"></a>
<a name="index-ext_005fLOG_005fCOMPILER"></a>
<a name="index-ext_005fLOG_005fFLAGS"></a>
<a name="index-AM_005fext_005fLOG_005fFLAGS"></a>
<a name="index-AM_005fLOG_005fFLAGS"></a>
<p>对于与扩展名匹配的测试<code>.<var>ext</var></code>列于<code>TEST_EXTENSIONS</code> ，您可以使用变量提供自定义的“测试跑步者” <code><var>ext</var>_LOG_COMPILER</code> （请注意大写扩展名）并在中传递选项<code>AM_<var>ext</var>_LOG_FLAGS</code>并允许用户在中传递选项<code><var>ext</var>_LOG_FLAGS</code> 。这将导致此扩展程序调用具有此扩展名的所有测试。对于所有没有注册扩展名的测试，变量<code>LOG_COMPILER</code> ， <code>AM_LOG_FLAGS</code>和<code>LOG_FLAGS</code>可能用过了。例如，</p>
<div class="example">
<pre class="example">TESTS = foo.pl bar.py baz
TEST_EXTENSIONS = .pl .py
PL_LOG_COMPILER = $(PERL)
AM_PL_LOG_FLAGS = -w
PY_LOG_COMPILER = $(PYTHON)
AM_PY_LOG_FLAGS = -v
LOG_COMPILER = ./wrapper-script
AM_LOG_FLAGS = -d
</pre></div>

<p>将调用“ <samp>$(PERL) -w foo.pl</samp> '，' <samp>$(PYTHON) -v bar.py</samp> '和' <samp>./wrapper-script -d baz</samp> ' 生产<samp>foo.log</samp> ， <samp>bar.log</samp>和<samp>baz.log</samp> ， 分别。的<samp>foo.trs</samp> ， <samp>bar.trs</samp>和<samp>baz.trs</samp>文件将自动产生副作用。
</p>
<p>请务必注意，与我们在串行测试工具（请参阅“ <a href="#Serial-Test-Harness">串行测试工具”</a> ）中看到的不同， <code>AM_TESTS_ENVIRONMENT</code>和<code>TESTS_ENVIRONMENT</code>变量<em>不能</em>用于定义自定义测试运行器；的<code>LOG_COMPILER</code>和<code>LOG_FLAGS</code> （或其对应于扩展名的对应对象）应改为：</p>
<div class="example">
<pre class="example">## This is WRONG!
AM_TESTS_ENVIRONMENT = PERL5LIB='$(srcdir)/lib' $(PERL) -Mstrict -w
</pre></div>

<div class="example">
<pre class="example">## Do this instead.
AM_TESTS_ENVIRONMENT = PERL5LIB='$(srcdir)/lib'; export PERL5LIB;
LOG_COMPILER = $(PERL)
AM_LOG_FLAGS = -Mstrict -w
</pre></div>

<p>默认情况下，测试套件工具将运行所有测试，但是有几种方法可以限制运行的测试集：</p>
<ul>
<li>您可以设置<code>TESTS</code>变量。例如，您可以使用如下命令仅运行一部分测试：<div class="example">
<pre class="example">env TESTS=&quot;foo.test bar.test&quot; make -e check
</pre></div>

<p>但是请注意，上面的命令将无条件地覆盖<samp>test-suite.log</samp>文件，从而破坏了以前的任何测试套件运行的记录结果。对于测试套件需要很长时间才能执行的程序包，这可能是不希望的。幸运的是，通过覆盖也可以轻松避免此问题<code>TEST_SUITE_LOG</code>在运行时；例如，</p>
<div class="example">
<pre class="example">env TEST_SUITE_LOG=partial.log TESTS=&quot;...&quot; make -e check
</pre></div>

<p>将部分测试套件运行的结果写入<samp>partial.log</samp> ，不碰<samp>test-suite.log</samp> 。
</p>
</li><li>您可以设置<code>TEST_LOGS</code>变量。默认情况下，此变量在<code>make</code>运行时间从<code>TESTS</code>如上所述。例如，您可以使用以下命令：<div class="example">
<pre class="example">set x subset*.log; shift
env TEST_LOGS=&quot;foo.log $*&quot; make -e check
</pre></div>

<p>上面的评论约<code>TEST_SUITE_LOG</code>覆盖也适用于此。
</p>
</li><li> <a name="index-RECHECK_005fLOGS"></a><a name="index-lazy-test-execution"></a>默认情况下，测试工具删除所有旧的每次测试<samp>.log</samp>和<samp>.trs</samp>文件开始运行测试以重新生成它们之前。变量<code>RECHECK_LOGS</code>包含一组<samp>.log</samp> （而且， <samp>.trs</samp> ）已删除的文件。<code>RECHECK_LOGS</code>默认为<code>TEST_LOGS</code> ，这意味着需要重新检查所有测试。通过覆盖此变量，您可以选择需要重新考虑的测试。例如，通过将此变量设置为空值，您可以懒惰地仅重新运行那些已过期（即早于其先决条件测试文件）的测试：<div class="example">
<pre class="example">env RECHECK_LOGS= make -e check
</pre></div>

</li><li> <a name="index-recheck"></a>您可以通过运行以下命令来确保重新运行所有失败或意外通过的测试： <code>make recheck</code>在测试目录中。此便利目标将设定<code>RECHECK_LOGS</code>在调用主测试线束之前适当地进行。
</li></ul>

<p>为了保证测试之间的顺序，即使<code>make -j<var>N</var></code> ，对应之间的依赖关系<samp>.log</samp>文件可以通过通常指定<code>make</code>依赖性。例如，以下代码片段使测试名为<samp>foo-execute.test</samp>取决于测试的完成<samp>foo-compile.test</samp> ：</p>
<div class="example">
<pre class="example">TESTS = foo-compile.test foo-execute.test
foo-execute.log: foo-compile.log
</pre></div>

<p>请注意，此顺序忽略了必需测试的<em>结果</em> ，因此测试<samp>foo-execute.test</samp>即使测试运行<samp>foo-compile.test</samp>失败或被事先跳过。此外，请注意，指定此类依存关系目前仅适用于以下列所列后缀之一结尾的测试<code>TEST_EXTENSIONS</code> 。
</p>
<p>没有这种指定依赖性的测试可以与并行并行运行<code>make -j<var>N</var></code> ，因此请确保它们已准备好并发执行。
</p>
<a name="index-Unit-tests"></a>
<p>在开发过程中，可以利用懒惰的测试执行以及测试及其源之间正确的依赖关系的组合来进行有效的单元测试。为了进一步加快编辑-编译-测试周期，甚至在以下位置指定编译程序可能会很有用： <code>EXTRA_PROGRAMS</code>代替<code>check_PROGRAMS</code> ，因为前者允许交错的编译和测试执行（但请注意， <code>EXTRA_PROGRAMS</code>不会被自动清除，请参阅<a href="#Uniform">统一</a> ）。
</p>
<p>变量<code>TESTS</code>和<code>XFAIL_TESTS</code>可能包含条件部分以及配置替换。但是，在后一种情况下，有一些限制：替代的测试名称必须以非空的测试后缀结尾，例如<samp>.test</samp> ，因此由<code>automake</code>可以申请。对于文字测试名称， <code>automake</code>可以生成针对每个目标的规则来避免这种限制。
</p>
<p>请注意，目前无法使用<code>$(srcdir)/</code>要么<code>$(top_srcdir)/</code>在里面<code>TESTS</code>变量。为了避免在源代码树中生成测试日志，此技术限制是必需的，并且其不幸的结果是，无法指定通过显式规则自身生成的分布式测试，而分布式测试本身可以被所有人移植<code>make</code>实现（参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Make-Target-Lookup">使目标查找</a> ，FreeBSD和OpenBSD的语义。 <code>make</code>与此冲突）。如有疑问，您可能需要使用GNU <code>make</code> ，或使用推理规则解决问题以生成测试。
</p>
<hr>
<a name="Custom-Test-Drivers"></a>
<div class="header">
<p>下一篇： <a href="#Using-the-TAP-test-protocol" rel="next" accesskey="n">使用TAP测试协议</a> ，上一篇： <a href="#Simple-Tests" rel="prev" accesskey="p">简单测试</a> ，上一篇： <a href="#Tests" rel="up" accesskey="u">测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Custom-Test-Drivers-1"></a>
<h3 class="section">15.3自定义测试驱动程序</h3>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Overview-of-Custom-Test-Drivers-Support" accesskey="1">自定义测试驱动程序支持概述</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Declaring-Custom-Test-Drivers" accesskey="2">声明自定义测试驱动程序</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#API-for-Custom-Test-Drivers" accesskey="3">自定义测试驱动程序的API</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr>
<a name="Overview-of-Custom-Test-Drivers-Support"></a>
<div class="header">
<p>下一页： <a href="#Declaring-Custom-Test-Drivers" rel="next" accesskey="n">声明自定义测试驱动程序</a> ，向上： <a href="#Custom-Test-Drivers" rel="up" accesskey="u">自定义测试驱动程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overview-of-Custom-Test-Drivers-Support-1"></a>
<h4 class="subsection">15.3.1自定义测试驱动程序支持概述</h4>

<p>从Automake版本1.12开始，并行测试工具允许程序包作者使用第三方自定义测试驱动程序，以防默认驱动程序不能满足其目的或不支持所选的测试协议。
</p>
<p>自定义测试驱动程序应正确运行传递给它的测试程序（包括传递给那些程序的命令行参数（如果有）），以分析其执行和结果，以创建自定义测试驱动程序。 <samp>.log</samp>和<samp>.trs</samp>与这些测试运行相关的文件，并在控制台上显示测试结果。测试驱动程序的作者有责任确保其有意义且正确地实施上述所有步骤； Automake在这里也没有任何帮助。另一方面，Automake提供的用于测试套件摘要生成的代码提供了对测试驱动程序的支持，如果驱动程序注意正确注册此类结果，请允许每个测试脚本提供多个测试结果（请参阅<a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a> ）。
</p>
<p>如何确定和分析测试脚本结果的确切细节留给各个驱动程序。某些驱动程序可能仅考虑测试脚本的退出状态（例如，这由并行测试工具使用的默认测试驱动程序完成，如上一节所述）。其他驱动程序可能实现更复杂和高级的测试协议，这可能要求它们解析和解释它们正在运行的测试脚本发出的输出（此类协议的示例为TAP和SubUnit）。
</p>
<p>需要特别注意的是，即使使用自定义测试驱动程序，上一节中关于并行线束描述的大多数基础结构也仍然存在；这包括：</p>
<ul>
<li>在中定义的测试脚本列表<code>TESTS</code> ，并且在运行时可以通过重新定义<code>TESTS</code>要么<code>TEST_LOGS</code> ;</li><li>通过使用并发<code>make</code>的选项<samp>-j</samp> ;</li><li>每次测试<samp>.log</samp>和<samp>.trs</samp>文件，并生成摘要<samp>.log</samp>从他们那里归档；</li><li> <code>recheck</code>目标， <code>RECHECK_LOGS</code>变量，并且懒惰地重新运行测试；</li><li>测试间的依赖关系；</li><li>支持<code>check_*</code>变数（ <code>check_PROGRAMS</code> ， <code>check_LIBRARIES</code> ，...）;</li><li>用于<code>VERBOSE</code>环境变量，用于在测试套件失败时获得详细的输出；</li><li>的定义和尊重<code>TESTS_ENVIRONMENT</code> ， <code>AM_TESTS_ENVIRONMENT</code>和<code>AM_TESTS_FD_REDIRECT</code>变量</li><li>通用和扩展特定的定义<code>LOG_COMPILER</code>和<code>LOG_FLAGS</code>变量。
</li></ul>

<p>另一方面，测试套件如何（以及是否）输出颜色的确切语义， <code>XFAIL_TESTS</code> ，并且硬错误得到支持和处理留给各个测试驱动程序。
</p>

<hr>
<a name="Declaring-Custom-Test-Drivers"></a>
<div class="header">
<p>下一篇： <a href="#API-for-Custom-Test-Drivers" rel="next" accesskey="n">定制测试驱动程序的API</a> ，上一篇： <a href="#API-for-Custom-Test-Drivers" rel="next" accesskey="n">定制测试驱动</a> <a href="#Overview-of-Custom-Test-Drivers-Support" rel="prev" accesskey="p">程序支持概述</a> ，上一篇： <a href="#API-for-Custom-Test-Drivers" rel="next" accesskey="n">定制测试驱动</a> <a href="#Custom-Test-Drivers" rel="up" accesskey="u">程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Declaring-Custom-Test-Drivers-1"></a>
<h4 class="subsection">15.3.2声明自定义测试驱动程序</h4>

<a name="index-_005fLOG_005fDRIVER"></a>
<a name="index-_005fLOG_005fDRIVER_005fFLAGS"></a>
<a name="index-LOG_005fDRIVER"></a>
<a name="index-LOG_005fDRIVER_005fFLAGS"></a>
<a name="index-ext_005fLOG_005fDRIVER"></a>
<a name="index-ext_005fLOG_005fDRIVER_005fFLAGS"></a>
<a name="index-AM_005fext_005fLOG_005fDRIVER_005fFLAGS"></a>
<a name="index-AM_005fLOG_005fDRIVER_005fFLAGS"></a>
<p>通过定义make变量来声明自定义测试套件驱动程序<code>LOG_DRIVER</code>要么<code><var>ext</var>_LOG_DRIVER</code> （哪里<var>ext</var>必须在<code>TEST_EXTENSIONS</code> ）。必须将它们定义为程序或脚本，这些程序或脚本将用于驱动具有相应扩展名（或在没有扩展名的情况下没有注册扩展名的测试）的执行，日志记录和结果报告。 <code>LOG_DRIVER</code> ）。显然，可以在同一声明中声明多个不同的测试驱动程序<samp>Makefile.am</samp> 。另外请注意<code>LOG_DRIVER</code>变量是<em>不是</em>为替代<code>LOG_COMPILER</code>变量：两组变量可以并且经常有用且合法地共存。
</p>

<p>开发者保留的变量<code>AM_LOG_DRIVER_FLAGS</code>和用户保留的变量<code>LOG_DRIVER_FLAGS</code>可用于定义将传递给每次调用的标志<code>LOG_DRIVER</code> ，而用户定义的标志显然要优先于开发者保留的标志。同样，对于每个扩展<var>ext</var>宣告<code>TEST_EXTENSIONS</code> ，其中列出的标志<code>AM_<var>ext</var>_LOG_DRIVER_FLAGS</code>和<code><var>ext</var>_LOG_DRIVER_FLAGS</code>将传递给的调用<code><var>ext</var>_LOG_DRIVER</code> 。
</p>
<hr>
<a name="API-for-Custom-Test-Drivers"></a>
<div class="header">
<p>上<a href="#Declaring-Custom-Test-Drivers" rel="prev" accesskey="p">一篇</a> ： <a href="#Declaring-Custom-Test-Drivers" rel="prev" accesskey="p">声明自定义测试驱动程序</a> ，上一篇： <a href="#Custom-Test-Drivers" rel="up" accesskey="u">自定义测试驱动程序</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="API-for-Custom-Test-Drivers-1"></a>
<h4 class="subsection">15.3.3自定义测试驱动程序的API</h4>

<p>请注意， <em>此处描述的API仍处于高度试验阶段</em> ，将来很可能会收紧并且可能还会进行广泛更改，以适应新功能或满足其他可移植性要求。
</p>
<p>这些API的主要特征是它们旨在与并行测试工具及其默认驱动程序共享尽可能多的基础结构，语义和实现细节。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Command_002dline-arguments-for-test-drivers" accesskey="1">测试驱动程序的命令行参数</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Log-files-generation-and-test-results-recording" accesskey="2">日志文件生成和测试结果记录</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">•测试<a href="#Testsuite-progress-output" accesskey="3">套件进度输出</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr>
<a name="Command_002dline-arguments-for-test-drivers"></a>
<div class="header">
<p>下一页： <a href="#Log-files-generation-and-test-results-recording" rel="next" accesskey="n">日志文件生成和测试结果记录</a> ，上一篇： <a href="#API-for-Custom-Test-Drivers" rel="up" accesskey="u">自定义测试驱动程序的API</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Command_002dline-arguments-for-test-drivers-1"></a>
<h4 class="subsubsection">15.3.3.1测试驱动程序的命令行参数</h4>

<p>自定义驱动程序可以依靠由Automake生成的测试工具自动传递给它的各种命令行选项和参数。<em>必须</em>理解所有这些知识（即使对关联语义的准确解释可以在测试驱动程序与另一驱动程序之间合法地改变，甚至在某些驱动程序中成为空手）。
</p>
<p>以下是选项列表：</p>
<dl compact>
<dt><samp>--test-name=<var>NAME</var></samp></dt>
<dd><p>测试名称，已删除VPATH前缀（如果有）。它可以有一个后缀和一个目录组件（例如， <samp>sub/foo.test</samp> ），并且主要用于控制台中有关测试套件<a href="#Testsuite-progress-output">进度</a>和结果的报告（请参阅测试套件<a href="#Testsuite-progress-output">进度输出</a> ）。
</p></dd>
<dt><samp>--log-file=<samp><var>PATH</var>.log</samp></samp></dt>
<dd><p>的<samp>.log</samp>测试驱动程序必须创建的文件（请参阅<a href="#Basics-of-test-metadata">测试元数据基础</a> ）。如果它具有目录组件（例如<samp>sub/foo.log</samp> ），测试工具将<em>在</em>调用测试驱动程序<em>之前</em>确保该目录存在。
</p></dd>
<dt><samp>--trs-file=<samp><var>PATH</var>.trs</samp></samp></dt>
<dd><p>的<samp>.trs</samp>测试驱动程序必须创建的文件（请参阅<a href="#Basics-of-test-metadata">测试元数据基础</a> ）。如果它具有目录组件（例如<samp>sub/foo.trs</samp> ），测试工具将<em>在</em>调用测试驱动程序<em>之前</em>确保该目录存在。
</p></dd>
<dt><samp>--color-tests={yes|no}</samp></dt>
<dd><p>控制台输出是否应该着色（请参阅“ <a href="#Simple-tests-and-color_002dtests">简单测试”和“颜色测试”</a> ，以了解何时激活此选项以及何时不激活该选项）。
</p></dd>
<dt><samp>--expect-failure={yes|no}</samp></dt>
<dd><p>测试程序是否预期会失败。
</p></dd>
<dt><samp>--enable-hard-errors={yes|no}</samp></dt>
<dd><p>被测试程序中的“硬错误”是否应与正常故障区别对待（默认值应为<code>yes</code> ）。“硬错误”的确切含义高度取决于所使用的测试协议或约定。
</p></dd>
<dt><samp>--</samp></dt>
<dd><p>明确终止选项列表。
</p></dd>
</dl>

<p>传递给测试驱动程序的第一个非选项参数是要运行的程序，接下来的所有参数都是该程序的命令行选项和参数。
</p>
<p>请注意， <samp>--color-tests</samp> ， <samp>--expect-failure</samp>和<samp>--enable-hard-errors</samp>选项由各个测试驱动程序决定。仍建议行为兼容或至少类似于默认驱动程序提供的行为，因为这将提供更好的一致性和更令人愉悦的用户体验。
</p>
<hr>
<a name="Log-files-generation-and-test-results-recording"></a>
<div class="header">
<p>下一篇： <a href="#Testsuite-progress-output" rel="next" accesskey="n">Testsuite进度输出</a> ，上一篇： <a href="#Command_002dline-arguments-for-test-drivers" rel="prev" accesskey="p">测试驱动程序的命令行参数</a> ，上一篇： <a href="#API-for-Custom-Test-Drivers" rel="up" accesskey="u">自定义测试驱动程序的API</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Log-files-generation-and-test-results-recording-1"></a>
<h4 class="subsubsection">15.3.3.2日志文件生成和测试结果记录</h4>

<p>测试驱动程序必须正确生成由<samp>--log-file</samp>和<samp>--trs-file</samp>选项（即使测试的程序失败或崩溃）。
</p>
<p>的<samp>.log</samp>理想情况下，文件应包含被测试程序产生的所有输出，以及可选的其他可能有助于调试或分析错误报告的信息。除此之外，它的格式基本上是免费的。
</p>
<p>的<samp>.trs</samp>该文件用于通过使用自定义reStructuredText字段注册一些元数据。期望并行测试工具以各种方式使用此元数据；例如，在打印测试套件摘要时对测试结果进行计数，或者确定要重新运行的测试<code>make recheck</code> 。无法识别的元数据<samp>.trs</samp>线束当前忽略该文件，但将来可能会更改。当前识别的元数据列表如下。
</p>
<dl compact>
<dt><code>:test-result:</code></dt>
<dd><a name="index-Register-test-result"></a>
<a name="index-Register-test-case-result"></a>
<a name="index-Test-result_002c-registering"></a>
<a name="index-Test-case-result_002c-registering"></a>
<a name="index-_003atest_002dresult_003a"></a>
<a name="index-reStructuredText-field_002c-_003atest_002dresult_003a"></a>
<p>测试驱动程序必须使用此字段来注册由测试脚本文件运行的<em>每个</em>测试用例的结果。一些<code>:test-result:</code>字段可以存在于同一位置<samp>.trs</samp>文件;这样做是为了支持允许单个测试脚本运行更多测试用例的测试协议。
</p>
<p>当前唯一认可的测试结果<code>PASS</code> ， <code>XFAIL</code> ， <code>SKIP</code> ， <code>FAIL</code> ， <code>XPASS</code>和<code>ERROR</code> 。这些结果在声明时<code>:test-result:</code> ，后面可以选择包含相应测试名称和/或简短说明的文本；生成时，线束将忽略这些多余的文本<samp>test-suite.log</samp>并准备测试套件摘要。
</p>
</dd>
<dt><code><code>:recheck:</code></code></dt>
<dd><a name="index-_003arecheck_003a"></a>
<a name="index-reStructuredText-field_002c-_003arecheck_003a"></a>
<p>如果存在此字段并将其定义为<code>no</code> ，则相应的测试脚本将<em>不会</em>在<code>make recheck</code> 。当两个或多个时会发生什么<code>:recheck:</code>字段存在于同一位置<samp>.trs</samp>文件是未定义的行为。
</p>
</dd>
<dt><code><code>:copy-in-global-log:</code></code></dt>
<dd><a name="index-_003acopy_002din_002dglobal_002dlog_003a"></a>
<a name="index-reStructuredText-field_002c-_003acopy_002din_002dglobal_002dlog_003a"></a>
<p>如果存在此字段并将其定义为<code>no</code> ，则内容<samp>.log</samp>文件<em>不会</em>被复制到全局<samp>test-suite.log</samp> 。我们允许放弃这种复制，因为尽管它在调试和分析错误报告中很有用，但在正常情况下（例如，测试脚本成功时），也可能只是浪费空间。当两个或多个时会发生什么<code>:copy-in-global-log:</code>字段存在于同一位置<samp>.trs</samp>文件是未定义的行为。
</p>
</dd>
<dt><code><code>:test-global-result:</code></code></dt>
<dd><a name="index-_003atest_002dglobal_002dresult_003a"></a>
<a name="index-reStructuredText-field_002c-_003atest_002dglobal_002dresult_003a"></a>
<p>这用于声明脚本的“全局结果”。当前，仅需要在生成的全局日志文件中（几乎逐字记录）报告此字段的值<code>$(TEST_SUITE_LOG)</code> ，因此格式相当自由。例如，运行10个测试用例（其中6个通过和4个被跳过）的测试脚本可以合理地具有一个<code>PASS/SKIP</code>该字段的值，而运行19个成功测试和一个失败测试的测试脚本可能会有一个<code>ALMOST PASSED</code>值。当两个或多个时会发生什么<code>:test-global-result:</code>字段存在于同一位置<samp>.trs</samp>文件是未定义的行为。
</p></dd>
</dl>

<p>让我们看一个小例子。假设一个<samp>.trs</samp>文件包含以下几行：</p>
<div class="example">
<pre class="example">:test-result: PASS server starts
:global-log-copy: no
:test-result: PASS HTTP/1.1 request
:test-result: FAIL HTTP/1.0 request
:recheck: yes
:test-result: SKIP HTTPS request (TLS library wasn't available)
:test-result: PASS server stops
</pre></div>

<p>然后，将通过以下方式重新运行相应的测试脚本： <code>make check</code> ，将为测试套件摘要提供<em>五项</em>测试结果（其中三项测试成功，一项失败，而一项跳过），以及相应内容<samp>.log</samp>文件将<em>不会</em>复制到全局日志文件中<samp>test-suite.log</samp> 。
</p>
<hr>
<a name="Testsuite-progress-output"></a>
<div class="header">
<p>上一页： <a href="#Log-files-generation-and-test-results-recording" rel="prev" accesskey="p">日志文件生成和测试结果记录</a> ，上一篇： <a href="#API-for-Custom-Test-Drivers" rel="up" accesskey="u">定制测试驱动程序的API</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Testsuite-progress-output-1"></a>
<h4 class="subsubsection">15.3.3.3测试套件进度输出</h4>

<p>定制测试驱动程序还具有在标准输出上尽快显示测试结果的任务。根据所使用的协议，它还可以显示失败和跳过的原因，以及更一般的任何有用的诊断输出（但请记住，屏幕上的每一行都是宝贵的，因此用过于冗长的信息将屏幕弄乱是不好的理念）。此进度输出的确切格式由测试驱动程序决定；实际上，定制测试驱动程序<em>理论上</em>甚至可以决定不做任何此类报告，而将所有报告留给测试套件摘要（当然，这是一个非常糟糕的想法，并且仅用于说明此处授予的灵活性）。
</p>
<p>记住一致性是好的。因此，如果可能，请尝试与内置的Automake测试驱动程序的输出保持一致，以提供类似的“外观”。特别是，当<samp>--color-tests</samp>被传递给驱动程序。另一方面，如果您使用已知且广泛使用的测试协议以及完善的实现，则与这些实现的输出保持一致可能也是一个好主意。
</p>
<hr>
<a name="Using-the-TAP-test-protocol"></a>
<div class="header">
<p>下一篇： <a href="#DejaGnu-Tests" rel="next" accesskey="n">DejaGnu测试</a> ，上一篇： <a href="#Custom-Test-Drivers" rel="prev" accesskey="p">自定义测试驱动程序</a> ，上一篇： <a href="#Tests" rel="up" accesskey="u">测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Using-the-TAP-test-protocol-1"></a>
<h3 class="section">15.4使用TAP测试协议</h3>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Introduction-to-TAP" accesskey="1">TAP简介</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Use-TAP-with-the-Automake-test-harness" accesskey="2">将TAP与Automake测试工具一起使用</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Incompatibilities-with-other-TAP-parsers-and-drivers" accesskey="3">与其他TAP解析器和驱动程序不兼容</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Links-and-external-resources-on-TAP" accesskey="4">TAP上的链接和外部资源</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr>
<a name="Introduction-to-TAP"></a>
<div class="header">
<p>下一页： <a href="#Use-TAP-with-the-Automake-test-harness" rel="next" accesskey="n">将TAP与Automake测试工具一起</a> <a href="#Using-the-TAP-test-protocol" rel="up" accesskey="u">使用</a> ，上一篇： <a href="#Use-TAP-with-the-Automake-test-harness" rel="next" accesskey="n">使用TAP</a> <a href="#Using-the-TAP-test-protocol" rel="up" accesskey="u">测试协议</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Introduction-to-TAP-1"></a>
<h4 class="subsection">15.4.1 TAP简介</h4>

<p>TAP（任何测试协议）是测试模块或程序与测试工具之间基于文本的简单接口。测试（在本文中也称为“ TAP生产者”）将测试结果以简单的格式写入标准输出中。测试工具（也称为“ TAP使用者”）将解析并解释这些结果，并将其正确呈现给用户，和/或注册它们以供以后分析。如何完成此操作的确切详细信息可能会因不同的测试工具而异。Automake工具将以通常的方式在控制台上显示结果（请参阅控制台上的<a href="#Testsuite-progress-on-console">Testsuite进度</a> ），并将使用<samp>.trs</samp>文件（请参阅<a href="#Basics-of-test-metadata">测试元数据的基础知识</a> ）来存储测试结果和相关的元数据。除此之外，它将尝试与已有的广泛使用的工具（例如<a href="http://search.cpan.org/~andya/Test-Harness/bin/prove"><code>prove</code>实用程序</a> ，至少用于更简单的用法。
</p>
<p>TAP最初是Perl测试工具的一部分，但今天（大多数）已经标准化，并以不同的语言提供了各种独立的实现。其中包括C，C ++，Perl，Python，PHP和Java。有关TAP协议的半官方规范，请参阅<a href="http://search.cpan.org/~petdance/Test-Harness/lib/Test/Harness/TAP.pod">“ <samp>Test::Harness::TAP</samp> '</a> 。
</p>
<p>TAP最真实的用法显然是在<code>perl</code>和许多perl模块。另外，还有其他重要的第三方软件包，例如<a href="http://git-scm.com/"><code>git</code></a> ，在他们的测试套件中使用TAP。
</p>
<hr>
<a name="Use-TAP-with-the-Automake-test-harness"></a>
<div class="header">
<p>下一篇： <a href="#Incompatibilities-with-other-TAP-parsers-and-drivers" rel="next" accesskey="n">与其他TAP解析器和驱动程序不兼容，上</a>一篇： <a href="#Incompatibilities-with-other-TAP-parsers-and-drivers" rel="next" accesskey="n">TAP</a> <a href="#Introduction-to-TAP" rel="prev" accesskey="p">简介</a> ，上一篇： <a href="#Using-the-TAP-test-protocol" rel="up" accesskey="u">使用TAP测试协议</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Use-TAP-with-the-Automake-test-harness-1"></a>
<h4 class="subsection">15.4.2将TAP与Automake测试工具一起使用</h4>

<p>当前，Automake附带的TAP驱动程序需要开发人员方面的一些手动步骤（希望在将来的Automake版本中可以改善这种情况）。您必须抓住<samp>tap-driver.sh</samp>手动从Automake发行版中获取脚本，将其复制到源代码树中，并使用Automake对第三方测试驱动程序的支持来指示线束使用<samp>tap-driver.sh</samp>脚本和awk程序，由<code>AM_INIT_AUTOMAKE</code>运行您的TAP生产测试。请参阅下面的示例以进行澄清。
</p>
<p>除了所有Automake测试驱动程序的通用选项（请参阅测试驱动程序的<a href="#Command_002dline-arguments-for-test-drivers">命令行参数</a> ）之外， <samp>tap-driver.sh</samp>支持以下选项，选择其名称是为了增强与<code>prove</code>效用。
</p>
<dl compact>
<dt><samp>--ignore-exit</samp></dt>
<dd><p>使测试驱动程序忽略测试脚本的退出状态；默认情况下，如果脚本以非零状态退出，驱动程序将报告错误。由于信号终止，该选项还对非零退出状态产生影响。
</p></dd>
<dt><samp>--comments</samp></dt>
<dd><p>指示测试驱动程序显示TAP诊断（即以' <samp>#</samp> '字符）也在测试套件进度输出中；默认情况下，TAP诊断仅复制到<samp>.log</samp>文件。
</p></dd>
<dt><samp>--no-comments</samp></dt>
<dd><p>恢复效果<samp>--comments</samp> 。
</p></dd>
<dt><samp>--merge</samp></dt>
<dd><p>指示测试驱动程序将测试脚本的标准错误合并到其标准输出中。如果要确保测试脚本的诊断以相对于测试结果的正确顺序显示，则这是必需的。这对于调试很有帮助（特别是如果您的测试脚本是在外壳跟踪处于活动状态时运行的外壳脚本）。不利的一面是，如果标准错误上出现的任何内容看起来像测试结果，此选项可能会使测试工具感到困惑。
</p></dd>
<dt><samp>--no-merge</samp></dt>
<dd><p>恢复效果<samp>--merge</samp> 。
</p></dd>
<dt><samp>--diagnostic-string=<var>STRING</var></samp></dt>
<dd><p>将引入TAP诊断的字符串更改为默认值“ <code>#</code> “ 至<code><var>STRING</var></code> 。如果您的基于TAP的测试脚本产生的详细输出具有有限的控制权（例如，该输出来自脚本中调用的其他工具），并且它可能包含一些被误认为是TAP诊断的文本，则这可能很有用：可以通过将激活TAP诊断的字符串重新定义为一个您不会在测试输出中偶然出现的值来解决此问题。但是请注意，此功能是非标准的，因为“官方” TAP协议不允许进行此类自定义。因此，如果可以避免，请勿使用它。
</p></dd>
</dl>

<p>这是有关如何设置和使用TAP驱动程序的示例。
</p>
<div class="example">
<pre class="example">% <kbd>cat configure.ac</kbd>
AC_INIT([GNU Try Tap], [1.0], [bug-automake@gnu.org])
AC_CONFIG_AUX_DIR([build-aux])
AM_INIT_AUTOMAKE([foreign -Wall -Werror])
AC_CONFIG_FILES([Makefile])
AC_REQUIRE_AUX_FILE([tap-driver.sh])
AC_OUTPUT

% <kbd>cat Makefile.am</kbd>
TEST_LOG_DRIVER = env AM_TAP_AWK='$(AWK)' $(SHELL) \
                  $(top_srcdir)/build-aux/tap-driver.sh
TESTS = foo.test bar.test baz.test
EXTRA_DIST = $(TESTS)

% <kbd>cat foo.test</kbd>
#!/bin/sh
echo 1..4 # Number of tests to be executed.
echo 'ok 1 - Swallows fly'
echo 'not ok 2 - Caterpillars fly # TODO metamorphosis in progress'
echo 'ok 3 - Pigs fly # SKIP not enough acid'
echo '# I just love word plays ...'
echo 'ok 4 - Flies fly too :-)'

% <kbd>cat bar.test</kbd>
#!/bin/sh
echo 1..3
echo 'not ok 1 - Bummer, this test has failed.'
echo 'ok 2 - This passed though.'
echo 'Bail out! Ennui kicking in, sorry...'
echo 'ok 3 - This will not be seen.'

% <kbd>cat baz.test</kbd>
#!/bin/sh
echo 1..1
echo ok 1
# Exit with error, even if all the tests have been successful.
exit 7

% <kbd>cp <var>PREFIX</var>/share/automake-<var>APIVERSION</var>/tap-driver.sh .</kbd>
% <kbd>autoreconf -vi &amp;&amp; ./configure &amp;&amp; make check</kbd>
...
PASS: foo.test 1 - Swallows fly
XFAIL: foo.test 2 - Caterpillars fly # TODO metamorphosis in progress
SKIP: foo.test 3 - Pigs fly # SKIP not enough acid
PASS: foo.test 4 - Flies fly too :-)
FAIL: bar.test 1 - Bummer, this test has failed.
PASS: bar.test 2 - This passed though.
ERROR: bar.test - Bail out! Ennui kicking in, sorry...
PASS: baz.test 1
ERROR: baz.test - exited with status 7
...
Please report to bug-automake@gnu.org
...
% <kbd>echo exit status: $?</kbd>
exit status: 1

% <kbd>env TEST_LOG_DRIVER_FLAGS='--comments --ignore-exit' \
      TESTS='foo.test baz.test' make -e check</kbd>
...
PASS: foo.test 1 - Swallows fly
XFAIL: foo.test 2 - Caterpillars fly # TODO metamorphosis in progress
SKIP: foo.test 3 - Pigs fly # SKIP not enough acid
# foo.test: I just love word plays...
PASS: foo.test 4 - Flies fly too :-)
PASS: baz.test 1
...
% <kbd>echo exit status: $?</kbd>
exit status: 0
</pre></div>

<hr>
<a name="Incompatibilities-with-other-TAP-parsers-and-drivers"></a>
<div class="header">
<p>下一篇： <a href="#Links-and-external-resources-on-TAP" rel="next" accesskey="n">TAP</a>上的<a href="#Links-and-external-resources-on-TAP" rel="next" accesskey="n">链接和外部资源，上</a>一篇： <a href="#Use-TAP-with-the-Automake-test-harness" rel="prev" accesskey="p">将TAP与Automake测试工具一起使用</a> ，上一篇： <a href="#Using-the-TAP-test-protocol" rel="up" accesskey="u">使用TAP测试协议</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Incompatibilities-with-other-TAP-parsers-and-drivers-1"></a>
<h4 class="subsection">15.4.3与其他TAP解析器和驱动程序不兼容</h4>

<p>由于实施或历史原因，由Automake实施的TAP驱动程序和线束与主流版本存在一些细微的不兼容，您应该注意。
</p>
<ul>
<li>一种<code>Bail out!</code>指令不会停止整个测试套件，而只会停止其中出现的测试脚本。这不符合TAP规范，但另一方面，它通过默认测试套件驱动程序的“硬错误”概念最大程度地提高了兼容性（和代码共享）。
</li><li>的<code>version</code>和<code>pragma</code>不支持指令。
</li><li>的<samp>--diagnostic-string</samp>我们的驱动程序选项允许从默认值“ <code>#</code> ”。目前，标准TAP协议尚无此方法，因此，如果使用它，诊断将丢失给更兼容的工具，例如<code>prove</code>和<code>Test::Harness</code>
</li><li>而且可能还存在其他一些小的但尚未发现的不兼容性，尤其是在极端情况下或使用很少的情况下。
</li></ul>

<hr>
<a name="Links-and-external-resources-on-TAP"></a>
<div class="header">
<p>上一页： <a href="#Incompatibilities-with-other-TAP-parsers-and-drivers" rel="prev" accesskey="p">与其他TAP解析器和驱动程序不兼容</a> ，向上： <a href="#Using-the-TAP-test-protocol" rel="up" accesskey="u">使用TAP测试协议</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Links-and-external-resources-on-TAP-1"></a>
<h4 class="subsection">15.4.4 TAP上的链接和外部资源</h4>

<p>以下是一些指向TAP协议及相关工具和库的更广泛的官方或第三方文档和资源的链接。
</p><ul>
<li> <a href="http://search.cpan.org/~petdance/Test-Harness/lib/Test/Harness/TAP.pod">' <samp>Test::Harness::TAP</samp> ”</a> ，（主要是有关TAP格式和协议的官方文档）。
</li><li> <a href="http://search.cpan.org/~andya/Test-Harness/bin/prove"><code>prove</code></a> ，最著名的命令行TAP测试驱动程序，包含在<code>perl</code>和<a href="http://search.cpan.org/~andya/Test-Harness/lib/Test/Harness.pm">' <samp>Test::Harness</samp> '</a> 。
</li><li><a href="http://testanything.org/wiki/index.php/Main_Page">TAP Wiki</a> 。
</li><li>A“温柔的介绍”，以测试为Perl编程人员： <a href="http://search.cpan.org/dist/Test-Simple/lib/Test/Tutorial.pod">“ <samp>Test::Tutorial</samp> '</a> 。
</li><li> <a href="http://search.cpan.org/~mschwern/Test-Simple/lib/Test/Simple.pm">' <samp>Test::Simple</samp> '</a>和<a href="http://search.cpan.org/~mschwern/Test-Simple/lib/Test/More.pm">' <samp>Test::More</samp> '</a> ，perl的标准测试库，其基于TAP。</li><li> <a href="http://www.eyrie.org/~eagle/software/c-tap-harness/">C TAP Harness</a> ，一个基于C的项目，同时实现了TAP生产者和TAP消费者。
</li><li> <a href="http://www.tap4j.org/">tap4j</a> ，这是一个基于Java的项目，同时实现了TAP生产者和TAP消费者。
</li></ul>

<hr>
<a name="DejaGnu-Tests"></a>
<div class="header">
<p>下一页： <a href="#Install-Tests" rel="next" accesskey="n">安装测试</a> ，上一步： <a href="#Using-the-TAP-test-protocol" rel="prev" accesskey="p">使用TAP测试协议</a> ，上一步： <a href="#Tests" rel="up" accesskey="u">测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="DejaGnu-Tests-1"></a>
<h3 class="section">15.5 DejaGnu测试</h3>

<p>如果<a href="https://ftp.gnu.org/gnu/dejagnu/"><code>dejagnu</code></a>出现在<code>AUTOMAKE_OPTIONS</code> ，然后<code>dejagnu</code>基于测试套件。变量<code>DEJATOOL</code>是一次传递的名称列表，作为<samp>--tool</samp>争论<code>runtest</code>调用；它默认为软件包的名称。
</p>
<p>变量<code>RUNTESTDEFAULTFLAGS</code>持有<samp>--tool</samp>和<samp>--srcdir</samp>默认情况下传递给dejagnu的标志；如有必要，可以将其覆盖。
<a name="index-RUNTESTDEFAULTFLAGS"></a>
</p>
<p>变量<code>EXPECT</code>和<code>RUNTEST</code>也可以重写以提供特定于项目的值。例如，如果要测试编译器工具链，则需要执行此操作，因为默认值未考虑主机名和目标名。
<a name="index-dejagnu"></a>
<a name="index-DEJATOOL"></a>
<a name="index-EXPECT"></a>
<a name="index-RUNTEST"></a>
</p>
<p>变量的内容<code>RUNTESTFLAGS</code>被传递给<code>runtest</code>调用。这被认为是“用户变量”（请参阅<a href="#User-Variables">用户变量</a> ）。如果需要设置<code>runtest</code>标志在<samp>Makefile.am</samp> ， 您可以使用<code>AM_RUNTESTFLAGS</code>代替。
<a name="index-RUNTESTFLAGS"></a>
<a name="index-AM_005fRUNTESTFLAGS"></a>
</p>
<a name="index-site_002eexp"></a>
<p>Automake将生成规则以创建本地<samp>site.exp</samp>文件，定义了检测到的各种变量<code>configure</code> 。该文件由DejaGnu自动读取。包的用户可以编辑此文件以调整测试套件。但是，这里不是测试套件作者应定义新变量的地方：这应该在实际测试套件代码中的其他位置进行。特别， <samp>site.exp</samp>不应该分发。
</p>
<p>不过，如果套件作者有正当理由扩展<samp>site.exp</samp>在<code>make</code>时间，他可以通过定义变量来实现<code>EXTRA_DEJAGNU_SITE_CONFIG</code> ;列出的文件将被考虑<samp>site.exp</samp>先决条件，并且它们的内容将附加到它（按照它们在出现的顺序<code>EXTRA_DEJAGNU_SITE_CONFIG</code> ）。请注意，默认情况下<em>不</em>分发文件。
</p>
<p>有关DejaGnu测试套件的更多信息，请参见<cite><a href="dejagnu.html#Top">《 DejaGnu手册》</a></cite> 。
</p>
<hr>
<a name="Install-Tests"></a>
<div class="header">
<p>上一页： <a href="#DejaGnu-Tests" rel="prev" accesskey="p">DejaGnu测试</a> ，上： <a href="#Tests" rel="up" accesskey="u">测试</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Install-Tests-1"></a>
<h3 class="section">15.6安装测试</h3>

<p>的<code>installcheck</code>在安装软件包后，用户可以使用target来运行任何测试。您可以通过编写一个<code>installcheck-local</code>规则。
</p>

<hr>
<a name="Rebuilding"></a>
<div class="header">
<p>下一页： <a href="#Options" rel="next" accesskey="n">选项</a> ，上一页： <a href="#Tests" rel="prev" accesskey="p">测试</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Rebuilding-Makefiles"></a>
<h2 class="chapter">16重建Makefile</h2>
<a name="index-rebuild-rules"></a>

<p>Automake生成规则以自动重建<samp>Makefile</samp> s <samp>configure</samp> ，以及其他衍生文件，例如<samp>Makefile.in</samp> 。
</p>
<a name="index-AM_005fMAINTAINER_005fMODE"></a>
<p>如果您正在使用<code>AM_MAINTAINER_MODE</code>在<samp>configure.ac</samp> ，那么这些自动重建规则仅在维护者模式下启用。
</p>
<a name="index-CONFIG_005fSTATUS_005fDEPENDENCIES"></a>
<a name="index-CONFIGURE_005fDEPENDENCIES"></a>
<a name="index-version_002esh_002c-example"></a>
<a name="index-version_002em4_002c-example"></a>

<p>有时，补充以下内容的重建规则很方便<samp>configure</samp>要么<samp>config.status</samp>与其他依赖项。变量<code>CONFIGURE_DEPENDENCIES</code>和<code>CONFIG_STATUS_DEPENDENCIES</code>可用于列出这些额外的依赖项。这些变量应在所有<samp>Makefile</samp>的树（因为这两个重建规则全部输出），因此更安全，更容易<code>AC_SUBST</code>他们来自<samp>configure.ac</samp> 。例如，以下语句将导致<samp>configure</samp>每次都重新运行<samp>version.sh</samp>被改变了。
</p>
<div class="example">
<pre class="example">AC_SUBST([CONFIG_STATUS_DEPENDENCIES], ['$(top_srcdir)/version.sh'])
</pre></div>

<p>注意“ <samp>$(top_srcdir)/</samp>在文件名中。由于此变量将在所有<samp>Makefile</samp> s，其值在构建层次结构中的任何级别上都必须合理。
</p>
<p>当心不要误会<code>CONFIGURE_DEPENDENCIES</code>对于<code>CONFIG_STATUS_DEPENDENCIES</code> 。
</p>
<p><code>CONFIGURE_DEPENDENCIES</code>将依赖项添加到<samp>configure</samp>规则，其作用是运行<code>autoconf</code> 。很少使用此变量，因为<code>automake</code>已经追踪<code>m4_include</code> d个文件。但是，当使用<code>m4_esyscmd</code>或具有副作用的类似的非推荐宏。另请注意，该变量与<cite>《 Autoconf手册》</cite>中的<a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Autom4te-Cache">autom4te缓存的</a>交互存在很大问题，并且可能导致细微的损坏，因此，如果要使用该缓存，则可能需要禁用缓存<code>CONFIGURE_DEPENDENCIES</code> 。
</p>
<p><code>CONFIG_STATUS_DEPENDENCIES</code>将依赖项添加到<samp>config.status</samp>规则，其作用是运行<samp>configure</samp> 。因此，此变量应带有任何非标准来源，可以将其视为运行的副作用<code>configure</code> ， 喜欢<samp>version.sh</samp>在上面的示例中。
</p>
<p>说起<samp>version.sh</samp>脚本，我们今天建议不要使用它们。它们主要在由脚本自动更新软件包的版本时使用（例如，在日常构建中）。这是一些老式的<samp>configure.ac</samp> s可能看起来像：</p>
<div class="example">
<pre class="example">AC_INIT
. $srcdir/version.sh
AM_INIT_AUTOMAKE([name], $VERSION_NUMBER)
&hellip;
</pre></div>

<p>这里， <samp>version.sh</samp>是设置的shell片段<code>VERSION_NUMBER</code> 。这个例子的问题是<code>automake</code>无法跟踪依赖关系（列出<samp>version.sh</samp>在<code>CONFIG_STATUS_DEPENDENCIES</code> ，然后由用户决定是否分发此文件），并且使用过时的形式<code>AC_INIT</code>和<code>AM_INIT_AUTOMAKE</code> 。升级到新语法并非易事，因为在其中不允许使用shell变量。 <code>AC_INIT</code>的论点。我们建议<samp>version.sh</samp>被替换为包含的M4文件<samp>configure.ac</samp> ：</p>
<div class="example">
<pre class="example">m4_include([version.m4])
AC_INIT([name], VERSION_NUMBER)
AM_INIT_AUTOMAKE
&hellip;
</pre></div>

<p>这里<samp>version.m4</samp>可能包含类似“ <samp>m4_define([VERSION_NUMBER], [1.2])</samp> '。第二种形式的优点是<code>automake</code>在定义重建规则时将处理依赖项，并且还将自动分发文件。不便之处在于<code>autoconf</code>现在，每次更改版本号时，都会重新运行<samp>configure</samp>必须在以前的设置中重新运行。
</p>

<hr>
<a name="Options"></a>
<div class="header">
<p>下一篇： <a href="#Miscellaneous" rel="next" accesskey="n">其他</a> ，上一篇： <a href="#Rebuilding" rel="prev" accesskey="p">重建</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Changing-Automake_0027s-Behavior"></a>
<h2 class="chapter">17更改Automake的行为</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Options-generalities" accesskey="1">选项概述</a> ：</td><td>  </td><td align="left" valign="top">Automake选项的语义</td></tr>
<tr><td align="left" valign="top">•自动制作<a href="#List-of-Automake-options" accesskey="2">选项列表</a> ：</td><td>  </td><td align="left" valign="top">Automake选项的完整列表</td></tr>
</tbody></table>

<hr>
<a name="Options-generalities"></a>
<div class="header">
<p>下一页： <a href="#List-of-Automake-options" rel="next" accesskey="n">Automake选项列表，</a>上一页： <a href="#Options" rel="up" accesskey="u">选项</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Options-generalities-1"></a>
<h3 class="section">17.1选项概述</h3>

<p>可以通过选项控制Automake的各种功能。除非另有说明，否则可以通过几种方式之一指定选项。大多数选项可以应用于每个<samp>Makefile</samp>在特殊情况下列出的依据<samp>Makefile</samp>变量名为<code>AUTOMAKE_OPTIONS</code> 。其中一些选项仅在顶层指定时才有意义<samp>Makefile.am</samp>文件。选项将全局应用于所有已处理<samp>Makefile</samp>在以下文件的第一个参数中列出的文件<code>AM_INIT_AUTOMAKE</code>在<samp>configure.ac</samp> ，以及一些需要更改<code>configure</code>只能在此处指定脚本。这些在下面注释。
</p>
<p>通常，在<code>AUTOMAKE_OPTIONS</code>优先于<code>AM_INIT_AUTOMAKE</code> ，它们的优先级高于命令行上指定的优先级。
</p>
<p>此外，必须注意严格程度和警告类别之间的相互作用。通常，严格性警告会被显式选项指定的警告所覆盖。例如，即使“ <samp>portability</samp> '默认情况下，警告处于禁用状态<samp>foreign</samp>严格来说，像这样的用法最终将使它们成为可能：</p>
<div class="example">
<pre class="example">AUTOMAKE_OPTIONS = -Wportability foreign
</pre></div>

<p>但是，在较高优先级上下文中指定的严格性级别将覆盖在较低优先级上下文中指定的所有显式警告。例如，如果<samp>configure.ac</samp>包含：</p>
<div class="example">
<pre class="example">AM_INIT_AUTOMAKE([-Wportability])
</pre></div>

<p>和<samp>Makefile.am</samp>包含：</p>
<div class="example">
<pre class="example">AUTOMAKE_OPTIONS = foreign
</pre></div>

<p>然后 ' <samp>portability</samp> “警告将被<em>禁用</em> <samp>Makefile.am</samp> 。
</p>
<hr>
<a name="List-of-Automake-options"></a>
<div class="header">
<p>上一页： <a href="#Options-generalities" rel="prev" accesskey="p">选项概述</a> ，向上： <a href="#Options" rel="up" accesskey="u">选项</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="List-of-Automake-options-1"></a>
<h3 class="section">17.2自动制作选项列表</h3>

<a name="index-AUTOMAKE_005fOPTIONS-2"></a>

<dl compact>
<dt><samp>gnits</samp></dt>
<dt><samp>gnu</samp></dt>
<dt><samp>foreign</samp></dt>
<dd><a name="index-Option_002c-gnits"></a>
<a name="index-Option_002c-gnu"></a>
<a name="index-Option_002c-foreign"></a>
<a name="index-gnits"></a>
<a name="index-gnu"></a>
<a name="index-foreign-1"></a>

<p>适当设置严格性。的<samp>gnits</samp>选项还意味着选项<samp>readme-alpha</samp>和<samp>check-news</samp> 。
</p>
</dd>
<dt><samp>check-news</samp></dt>
<dd><a name="index-Option_002c-check_002dnews"></a>
<a name="index-check_002dnews"></a>
<p>原因<samp>make dist</samp>除非当前版本号出现在<samp>NEWS</samp>文件。
</p>
</dd>
<dt><samp>dejagnu</samp></dt>
<dd><a name="index-Option_002c-dejagnu"></a>
<a name="index-dejagnu-1"></a>
<p>原因<code>dejagnu</code>特定的规则。请参阅<a href="#DejaGnu-Tests">DejaGnu测试</a> 。
</p>
</dd>
<dt><samp>dist-bzip2</samp></dt>
<dd><a name="index-Option_002c-dist_002dbzip2"></a>
<a name="index-dist_002dbzip2"></a>
<p>钩<code>dist-bzip2</code>至<code>dist</code> 。
<a name="index-dist_002dbzip2-2"></a>
</p>
</dd>
<dt><samp>dist-lzip</samp></dt>
<dd><a name="index-Option_002c-dist_002dlzip"></a>
<a name="index-dist_002dlzip"></a>
<p>钩<code>dist-lzip</code>至<code>dist</code> 。
<a name="index-dist_002dlzip-2"></a>
</p>
</dd>
<dt><samp>dist-xz</samp></dt>
<dd><a name="index-Option_002c-dist_002dxz"></a>
<a name="index-dist_002dxz"></a>
<p>钩<code>dist-xz</code>至<code>dist</code> 。
<a name="index-dist_002dxz-2"></a>
</p>
</dd>
<dt><samp>dist-zip</samp></dt>
<dd><a name="index-Option_002c-dist_002dzip"></a>
<a name="index-dist_002dzip"></a>
<p>钩<code>dist-zip</code>至<code>dist</code> 。
<a name="index-dist_002dzip-2"></a>
</p>
</dd>
<dt><samp>dist-shar</samp></dt>
<dd><a name="index-Option_002c-dist_002dshar"></a>
<a name="index-dist_002dshar"></a>
<p>钩<code>dist-shar</code>至<code>dist</code> 。不建议使用此选项，因为“ <samp>shar</samp>格式过时且有问题。在Automake 2.0中将完全删除对它的支持。
<a name="index-dist_002dshar-2"></a>
</p>
</dd>
<dt><samp>dist-tarZ</samp></dt>
<dd><a name="index-Option_002c-dist_002dtarZ"></a>
<a name="index-dist_002dtarZ"></a>
<p>钩<code>dist-tarZ</code>至<code>dist</code> 。不建议使用此选项，因为“ <samp>compress</samp>程序已过时。在Automake 2.0中将完全删除对它的支持。
<a name="index-dist_002dtarZ-2"></a>
</p>
</dd>
<dt><samp>filename-length-max=99</samp></dt>
<dd><a name="index-Option_002c-filename_002dlength_002dmax_003d99"></a>
<a name="index-filename_002dlength_002dmax_003d99"></a>
<p>如果在'期间发现文件名超过99个字符，则中止<samp>make dist</samp> '。这样的长文件名通常被认为不能在tarball中移植。见<samp>tar-v7</samp>和<samp>tar-ustar</samp>下面的选项。此选项应在顶层使用<samp>Makefile.am</samp>或作为<code>AM_INIT_AUTOMAKE</code>在<samp>configure.ac</samp> ，否则将被忽略。嵌套包的子包中也将忽略它（请参阅<a href="#Subpackages">Subpackages</a> ）。
</p>
</dd>
<dt><samp>info-in-builddir</samp></dt>
<dd><a name="index-Option_002c-info_002din_002dbuilddir"></a>
<a name="index-info_002din_002dbuilddir"></a>
<p>指示Automake放置生成的<samp>.info</samp>中的文件<code>builddir</code>而不是在<code>srcdir</code> 。请注意，这可能会使使用某些非GNU的VPATH构建会使实现更加脆弱。
</p>
</dd>
<dt><samp>no-define</samp></dt>
<dd><a name="index-Option_002c-no_002ddefine"></a>
<a name="index-no_002ddefine-1"></a>
<p>仅当作为参数传递给此选项时，此选项才有意义<code>AM_INIT_AUTOMAKE</code> 。它将防止<code>PACKAGE</code>和<code>VERSION</code>存在的变量<code>AC_DEFINE</code> d。但是请注意，它们将在生成的<code>configure</code> ，并将其作为生成变量<code>Makefile</code> ;这是故意的，并且是向后兼容所必需的。
</p>
</dd>
<dt><samp>no-dependencies</samp></dt>
<dd><a name="index-Option_002c-no_002ddependencies"></a>
<a name="index-no_002ddependencies-1"></a>
<p>这类似于使用<samp>--ignore-deps</samp>在命令行上，但是对于那些没有必要的位来进行自动依赖项跟踪工作的情况很有用（请参阅<a href="#Dependencies">Dependencies</a> ）。在这种情况下，效果是有效禁用自动依赖项跟踪。
</p>
</dd>
<dt><samp>no-dist</samp></dt>
<dd><a name="index-Option_002c-no_002ddist"></a>
<a name="index-no_002ddist"></a>
<p>不要发出任何与<code>dist</code>目标。当程序包具有自己的分发方法时，这很有用。
</p>
</dd>
<dt><samp>no-dist-gzip</samp></dt>
<dd><a name="index-Option_002c-no_002ddist_002dgzip"></a>
<a name="index-no_002ddist_002dgzip"></a>
<p>不要钩<code>dist-gzip</code>至<code>dist</code> 。
<a name="index-no_002ddist_002dgzip-1"></a>
</p>
</dd>
<dt><samp>no-exeext</samp></dt>
<dd><a name="index-Option_002c-no_002dexeext"></a>
<a name="index-no_002dexeext"></a>
<p>如果你的<samp>Makefile.am</samp>为目标定义规则<code>foo</code> ，它将覆盖名为“ <samp>foo$(EXEEXT)</samp> '。这是必要的<code>EXEEXT</code>被发现为空。但是，默认情况下<code>automake</code>会为此使用产生错误。的<samp>no-exeext</samp>选项将禁用此错误。仅在事先知道该软件包将不会移植到Windows或使用可执行文件扩展名的任何其他操作系统的情况下，才应使用此方法。
</p>
</dd>
<dt><samp>no-installinfo</samp></dt>
<dd><a name="index-Option_002c-no_002dinstallinfo-1"></a>
<a name="index-no_002dinstallinfo-1"></a>
<p>产生的<samp>Makefile.in</samp>默认情况下不会导致信息页面的构建或安装。然而， <code>info</code>和<code>install-info</code>目标仍然可用。不允许使用此选项<samp>gnu</samp>严格和以上。
<a name="index-info"></a>
<a name="index-install_002dinfo-1"></a>
</p>
</dd>
<dt><samp>no-installman</samp></dt>
<dd><a name="index-Option_002c-no_002dinstallman-1"></a>
<a name="index-no_002dinstallman-1"></a>
<p>产生的<samp>Makefile.in</samp>不会导致默认情况下安装手册页。但是， <code>install-man</code>目标仍可用于可选安装。不允许使用此选项<samp>gnu</samp>严格和以上。
<a name="index-install_002dman-1"></a>
</p>
</dd>
<dt><samp>nostdinc</samp></dt>
<dd><a name="index-Option_002c-nostdinc"></a>
<a name="index-nostdinc"></a>
<p>此选项可用于禁用标准<samp>-I</samp>通常由Automake自动提供的选项。
</p>
</dd>
<dt><samp>no-texinfo.tex</samp></dt>
<dd><a name="index-Option_002c-no_002dtexinfo_002etex"></a>
<a name="index-no_002dtexinfo_002etex"></a>
<p>不需要<samp>texinfo.tex</samp> ，即使此目录中有texinfo文件。
</p>
</dd>
<dt><samp>serial-tests</samp></dt>
<dd><a name="index-Option_002c-serial_002dtests"></a>
<a name="index-serial_002dtests"></a>
<p>为以下产品启用较旧的串行测试套件工具<code>TESTS</code> （有关更多信息，请参见<a href="#Serial-Test-Harness">串行测试线束</a> ）。
</p>
</dd>
<dt><samp>parallel-tests</samp></dt>
<dd><a name="index-Option_002c-parallel_002dtests"></a>
<a name="index-parallel_002dtests"></a>
<p>启用测试套件工具<code>TESTS</code>可以并行运行测试（有关更多信息，请参见<a href="#Parallel-Test-Harness">并行测试工具</a> ）。仅保留此选项是为了向后兼容，因为并行测试工具现在是默认设置。
</p>
</dd>
<dt><samp>readme-alpha</samp></dt>
<dd><a name="index-Option_002c-readme_002dalpha"></a>
<a name="index-readme_002dalpha"></a>
<p>如果此版本是Alpha版本，则该文件<samp>README-alpha</samp>存在，则将其添加到分发中。如果提供此选项，则版本号应遵循以下两种形式之一。第一种形式是“ <samp><var>major</var>.<var>minor</var>.<var>alpha</var></samp> '，其中每个元素都是一个数字；对于非Alpha版本，应保留最终期限和编号。第二种形式是<samp><var>major</var>.<var>minor</var><var>alpha</var></samp> '，在哪里<var>alpha</var>是一封信；对于非alpha版本，应将其省略。
</p>
</dd>
<dt><samp>std-options</samp></dt>
<dd><a name="index-Options_002c-std_002doptions"></a>
<a name="index-make-installcheck_002c-testing-_002d_002dhelp-and-_002d_002dversion"></a>
<a name="index-_002d_002dhelp-check"></a>
<a name="index-_002d_002dversion-check"></a>
<a name="index-std_002doptions"></a>

<p>使<code>installcheck</code>规则检查已安装的脚本和程序是否支持<samp>--help</samp>和<samp>--version</samp>选项。这还提供了基本检查，以确保安装后程序的运行时依赖关系得到满足。
</p>
<a name="index-AM_005fINSTALLCHECK_005fSTD_005fOPTIONS_005fEXEMPT"></a>
<p>在某些情况下，程序（或脚本）必须免除此测试。例如， <code>false</code> （来自GNU coreutils）永远不会成功，即使对于<samp>--help</samp>要么<samp>--version</samp> 。您可以在变量中列出此类程序<code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code> 。此变量中列出的程序（不是脚本）应以'。 <samp>$(EXEEXT)</samp>为了Windows或OS / 2。例如，假设我们建立<samp>false</samp>作为一个程序，但<samp>true.sh</samp>作为脚本，而且它们都不支持<samp>--help</samp>要么<samp>--version</samp> ：</p>
<div class="example">
<pre class="example">AUTOMAKE_OPTIONS = std-options
bin_PROGRAMS = false ...
bin_SCRIPTS = true.sh ...
AM_INSTALLCHECK_STD_OPTIONS_EXEMPT = false$(EXEEXT) true.sh
</pre></div>

</dd>
<dt><samp>subdir-objects</samp></dt>
<dd><a name="index-Options_002c-subdir_002dobjects"></a>
<a name="index-subdir_002dobjects"></a>
<p>如果指定了此选项，则将对象放置在与源文件的子目录相对应的构建目录的子目录中。例如，如果源文件是<samp>subdir/file.cxx</samp> ，则输出文件将是<samp>subdir/file.o</samp> 。
</p>
<a name="tar_002dformats"></a></dd>
<dt><samp>tar-v7</samp></dt>
<dt><samp>tar-ustar</samp></dt>
<dt><samp>tar-pax</samp></dt>
<dd><a name="index-Option_002c-tar_002dv7"></a>
<a name="index-Option_002c-tar_002dustar"></a>
<a name="index-Option_002c-tar_002dpax"></a>
<a name="index-tar-formats"></a>
<a name="index-v7-tar-format"></a>
<a name="index-ustar-format"></a>
<a name="index-pax-format"></a>
<a name="index-tar_002dv7"></a>
<a name="index-tar_002dustar"></a>
<a name="index-tar_002dpax"></a>

<p>这三个互斥选项选择在生成带有“ <samp>make dist</samp> '。（然后，将创建的tar文件根据<samp>no-dist-gzip</samp> ， <samp>dist-bzip2</samp> ， <samp>dist-lzip</samp> ， <samp>dist-xz</samp>和<samp>dist-tarZ</samp>使用中的选项。）
</p>
<p>这些选项必须作为参数传递给<code>AM_INIT_AUTOMAKE</code> （请参阅<a href="#Macros">宏</a> ），因为它们可能需要其他配置检查。如果Automake在<code>AUTOMAKE_OPTIONS</code>变量。
</p>
<p><samp>tar-v7</samp>选择旧的V7 tar格式。这是历史默认值。所有tar实现都可以理解这种过时的格式，并且支持最多99个字符的文件名。当给定更长的文件名时，某些tar实现将诊断问题，而其他则将生成损坏的tarball或使用不可移植的扩展名。此外，V7格式不能存储空目录。使用此格式时，请考虑使用<samp>filename-length-max=99</samp>捕获文件名太长的选项。
</p>
<p><samp>tar-ustar</samp>选择POSIX 1003.1-1988定义的ustar格式。此格式已经足够老，可以移植：从2018年开始，本机支持<code>tar</code>至少在GNU，FreeBSD，NetBSD，OpenBSD，AIX，HP-UX，Solaris上执行命令。它完全支持空目录。它可以存储最多256个字符的文件名，但前提是该文件名可以在目录分隔符中分为两部分，第一部分的最大长度为155个字节。因此，在大多数情况下，最大文件名长度将小于256个字符。
</p>
<p><samp>tar-pax</samp>选择POSIX 1003.1-2001定义的新的pax交换格式。它不限制文件名的长度。但是，这种格式还很年轻，应该仅限于仅针对非常现代的平台的软件包。截至2018年，本机支持此格式<code>tar</code>仅在GNU，FreeBSD，OpenBSD系统上执行命令；本机不支持<code>tar</code> NetBSD，AIX，HP-UX，Solaris上的命令。有一些以向上兼容的方式更改pax格式的措施，因此此选项将来可能会引用较新的版本。
</p>
<p>有关tar格式的进一步讨论，请参见在<cite>GNU Tar中</cite> <a href="http://www.gnu.org/software/tar/manual/tar.html#Formats">控制存档</a>格式。
</p>
<p><code>configure</code>知道几种构造这些格式的方法。如果找不到能够完成任务的工具（因此仍可以构建该程序包），它将不会中止，但是“ <samp>make dist</samp> ' 将失败。
</p>
</dd>
<dt><var>version</var></dt>
<dd><a name="index-Option_002c-version"></a>
<p>版本号（例如，“ <samp>0.30</samp> '）可以指定。如果Automake不比指定的版本新，请创建<samp>Makefile.in</samp>将被抑制。
</p>
</dd>
<dt><samp>-W<var>category</var></samp>要么<samp>--warnings=<var>category</var></samp></dt>
<dd><a name="index-Option_002c-warnings"></a>
<a name="index-Option_002c-_002dWcategory"></a>
<a name="index-Option_002c-_002d_002dwarnings_003dcategory"></a>
<p>这些选项的行为与命令行选项完全相同（请参见<a href="#automake-Invocation">automake Invocation</a> ）。这使您可以按文件启用或禁用某些警告类别。您还可以为整个项目设置一些警告。例如，尝试“ <samp>AM_INIT_AUTOMAKE([-Wall])</samp> ' 在你的<samp>configure.ac</samp> 。
</p>
</dd>
</dl>

<p>无法识别的选项由诊断<code>automake</code> 。
</p>
<p>如果您希望将选项应用于树中的所有文件，则可以使用<code>AM_INIT_AUTOMAKE</code>宏输入<samp>configure.ac</samp> 。参见<a href="#Macros">宏</a> 。
</p>

<hr>
<a name="Miscellaneous"></a>
<div class="header">
<p>下一个： <a href="#Include" rel="next" accesskey="n">包括</a> ，上一个： <a href="#Options" rel="prev" accesskey="p">选项</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Miscellaneous-Rules"></a>
<h2 class="chapter">18条其他规则</h2>

<p>有一些规则和变量不适合其他任何地方。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Tags" accesskey="1">标签</a> ：</td><td>  </td><td align="left" valign="top">与cscope，etags和mkid的接口</td></tr>
<tr><td align="left" valign="top">• <a href="#Suffixes" accesskey="2">后缀</a> ：</td><td>  </td><td align="left" valign="top">处理新的文件扩展名</td></tr>
</tbody></table>


<hr>
<a name="Tags"></a>
<div class="header">
<p>下一页： <a href="#Suffixes" rel="next" accesskey="n">后缀</a> ，上： <a href="#Miscellaneous" rel="up" accesskey="u">其他</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Interfacing-to-etags"></a>
<h3 class="section">18.1与<code>etags</code></h3>

<a name="index-TAGS-support"></a>

<p>Automake将生成规则以生成<samp>TAGS</samp>在某些情况下与GNU Emacs一起使用的文件。
</p>
<a name="index-tags"></a>
<p>如果存在任何C，C ++或Fortran 77源代码或标头，则<code>tags</code>和<code>TAGS</code>将为目录生成规则。使用列出的所有文件<code>_SOURCES</code> ， <code>_HEADERS</code>和<code>_LISP</code> primaries将用于生成标签。请注意，未分发的生成的源文件必须在变量中声明，例如<code>nodist_noinst_HEADERS</code>要么<code>nodist_<var>prog</var>_SOURCES</code>否则它们将被忽略。
</p>
<p>一种<code>tags</code>规则将在多目录包的最顶层目录中输出。从此最顶层目录运行时，“ <samp>make tags</samp> '会产生一个<samp>TAGS</samp>通过引用包含全部的文件<samp>TAGS</samp>子目录中的文件。
</p>
<p>的<code>tags</code>如果该变量也将生成规则<code>ETAGS_ARGS</code>被定义为。此变量旨在用于包含可标记源的目录，该可标记源<code>etags</code>不明白。用户可以使用<code>ETAGSFLAGS</code>将其他标志传递给<code>etags</code> ; <code>AM_ETAGSFLAGS</code>也可用于<samp>Makefile.am</samp> 。
<a name="index-ETAGS_005fARGS"></a>
<a name="index-ETAGSFLAGS"></a>
<a name="index-AM_005fETAGSFLAGS"></a>
</p>
<p>这是Automake如何为其源及其Texinfo文件中的节点生成标签的方式：</p>
<div class="example">
<pre class="example">ETAGS_ARGS = automake.in --lang=none \
 --regex='/^@node[ \t]+\([^,]+\)/\1/' automake.texi
</pre></div>

<p>如果将文件名添加到<code>ETAGS_ARGS</code> ，您可能还想定义<code>TAGS_DEPENDENCIES</code> 。此变量的内容直接添加到<code>tags</code>规则。
<a name="index-TAGS_005fDEPENDENCIES"></a>
</p>
<p>Automake还会生成一个<code>ctags</code>可用于构建的规则<code>vi</code> -样式<samp>tags</samp>文件。变量<code>CTAGS</code>是要调用的程序的名称（默认情况下<code>ctags</code> ）; <code>CTAGSFLAGS</code>可由用户用来传递其他标志，并且<code>AM_CTAGSFLAGS</code>可以被<samp>Makefile.am</samp> 。
</p>
<a name="index-id"></a>
<p>Automake还将生成一个<code>ID</code>将运行的规则<code>mkid</code>在源头上。仅逐个目录支持此功能。
</p>
<p>同样， <code>cscope</code>规则将在树中创建所有源文件的列表并运行<code>cscope</code>建立一个倒排索引数据库。变量<code>CSCOPE</code>是要调用的程序的名称（默认情况下<code>cscope</code> ）; <code>CSCOPEFLAGS</code>和<code>CSCOPE_ARGS</code>用户可以使用它分别传递其他标志和文件名，而<code>AM_CSCOPEFLAGS</code>可以被<samp>Makefile.am</samp> 。请注意，目前，Automake提供<code>cscope</code>当在VPATH版本中使用该支持时，该支持可能不适用于非GNU make实现（尤其是与执行<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Automatic-Rule-Rewriting">VPATH重写的</a> make实现）。
</p>
<p>最后，Automake还发出规则以支持<a href="https://www.gnu.org/software/global/">GNU全局标签程序</a> 。的<code>GTAGS</code>规则运行“全局标签”，并将结果放置在顶层构建目录中。变量<code>GTAGS_ARGS</code>保留传递给的参数<code>gtags</code> 。
<a name="index-GTAGS_005fARGS"></a>
</p>

<hr>
<a name="Suffixes"></a>
<div class="header">
<p>上一页： <a href="#Tags" rel="prev" accesskey="p">标签</a> ，上： <a href="#Miscellaneous" rel="up" accesskey="u">其他</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Handling-new-file-extensions"></a>
<h3 class="section">18.2处理新的文件扩展名</h3>

<a name="index-Adding-new-SUFFIXES"></a>
<a name="index-SUFFIXES_002c-adding"></a>
<a name="index-SUFFIXES"></a>

<p>有时引入一个新的隐式规则来处理Automake不知道的文件类型很有用。
</p>
<p>例如，假设您有一个可以编译的编译器<samp>.foo</samp>文件到<samp>.o</samp>文件。您只需为您的语言定义一个后缀规则：</p>
<div class="example">
<pre class="example">.foo.o:
        foocc -c -o $@ $&lt;
</pre></div>

<p>然后，您可以直接使用<samp>.foo</samp>归档在<code>_SOURCES</code>变量并期望正确的结果：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = doit
doit_SOURCES = doit.foo
</pre></div>

<p>这是更简单，更常见的情况。在其他情况下，您将必须帮助Automake找出要为其定义后缀规则的扩展。当您的扩展名不以点开头时，通常会发生这种情况。然后，您要做的就是在列表中放入新后缀列表<code>SUFFIXES</code>变量， <strong>然后</strong>再定义隐式规则。
</p>
<p>例如，以下定义可防止Automake误解“ <samp>.idlC.cpp:</samp>的规则，试图转变<samp>.idlC</samp>文件成<samp>.cpp</samp>文件。
</p>
<div class="example">
<pre class="example">SUFFIXES = .idl C.cpp
.idlC.cpp:
        # whatever
</pre></div>

<p>您可能已经注意到， <code>SUFFIXES</code>变量的行为类似于<code>.SUFFIXES</code>的特殊目标<code>make</code> 。你不应该碰<code>.SUFFIXES</code>你自己，但使用<code>SUFFIXES</code>而是让Automake生成后缀列表<code>.SUFFIXES</code> 。任何给定<code>SUFFIXES</code>转到生成的后缀列表的开头，然后是列表中尚未存在的Automake生成的后缀。
</p>
<hr>
<a name="Include"></a>
<div class="header">
<p>下一篇： <a href="#Conditionals" rel="next" accesskey="n">有条件的</a> ，上一篇： <a href="#Miscellaneous" rel="prev" accesskey="p">杂项</a> ，上： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Include-1"></a>
<h2 class="chapter">19包括</h2>

<a name="index-include-1"></a>
<a name="index-Including-Makefile-fragment"></a>
<a name="index-Makefile-fragment_002c-including"></a>

<p>Automake支持<code>include</code>可以用来包含其他指令的指令<samp>Makefile</samp>何时碎片<code>automake</code>运行。请注意，这些片段是由<code>automake</code> ，而不是<code>make</code> 。和条件句一样<code>make</code>不知道<code>include</code>正在使用中。
</p>
<p>有两种形式<code>include</code> ：</p>
<dl compact>
<dt><code>include $(srcdir)/file</code></dt>
<dd><p>包括相对于当前源目录找到的片段。
</p>
</dd>
<dt><code>include $(top_srcdir)/file</code></dt>
<dd><p>包括相对于顶级源目录找到的片段。
</p></dd>
</dl>

<p>请注意，如果条件条件中包含片段，则该条件适用于该片段的全部内容。
</p>
<p>这种方式包含的Makefile片段始终会被分发，因为它们需要重建<samp>Makefile.in</samp> 。
</p>
<p>在片段内部，构造<code>%reldir%</code>相对于基片的片段目录替换<samp>Makefile.am</samp> 。同样， <code>%canon_reldir%</code>替换为以下形式的规范化（请参见<a href="#Canonicalization">Canonicalization</a> ）形式： <code>%reldir%</code> 。为方便起见， <code>%D%</code>是的同义词<code>%reldir%</code>和<code>%C%</code>是的同义词<code>%canon_reldir%</code> 。
</p>
<p>一个特殊的功能是，如果片段与基本文件位于同一目录中<samp>Makefile.am</samp> （即<code>%reldir%</code>是<code>.</code> ）， 然后<code>%reldir%</code>和<code>%canon_reldir%</code>将扩展为空字符串，并分别吃下一个斜杠或下划线（如果存在）。
</p>
<p>因此，makefile片段可能如下所示：</p>
<div class="example">
<pre class="example">bin_PROGRAMS += %reldir%/mumble
%canon_reldir%_mumble_SOURCES = %reldir%/one.c
</pre></div>

<hr>
<a name="Conditionals"></a>
<div class="header">
<p>下一个： <a href="#Silencing-Make" rel="next" accesskey="n">静音制作</a> ，上一个： <a href="#Include" rel="prev" accesskey="p">包含</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Conditionals-1"></a>
<h2 class="chapter">20个条件</h2>

<a name="index-Conditionals"></a>

<p>Automake支持简单类型的条件。
</p>
<p>这些条件与GNU Make中的条件不同。自动配置条件在配置时由<samp>configure</samp>脚本，并影响翻译<samp>Makefile.in</samp>至<samp>Makefile</samp> 。它们基于传递给<samp>configure</samp>在结果上<samp>configure</samp>已发现有关主机系统的信息。GNU Make条件句在<code>make</code>时间，并且基于传递给make程序或在<samp>Makefile</samp> 。
</p>
<p>Automake条件句将与任何make程序一起使用。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Usage-of-Conditionals" accesskey="1">条件句的用法</a> ：</td><td>  </td><td align="left" valign="top">声明条件内容</td></tr>
<tr><td align="left" valign="top">• <a href="#Limits-of-Conditionals" accesskey="2">条件限制</a> ：</td><td>  </td><td align="left" valign="top">附上完整的陈述</td></tr>
</tbody></table>

<hr>
<a name="Usage-of-Conditionals"></a>
<div class="header">
<p>下一篇： <a href="#Limits-of-Conditionals" rel="next" accesskey="n">条件句的限制</a> ，上一篇： <a href="#Limits-of-Conditionals" rel="next" accesskey="n">条件</a> <a href="#Conditionals" rel="up" accesskey="u">句</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Usage-of-Conditionals-1"></a>
<h3 class="section">20.1条件句的用法</h3>

<a name="index-AM_005fCONDITIONAL"></a>
<p>使用条件之前，必须使用<code>AM_CONDITIONAL</code>在里面<samp>configure.ac</samp>文件（请参阅<a href="#Macros">宏</a> ）。
</p>
<dl>
<dt><a name="index-AM_005fCONDITIONAL-2"></a>巨集： <strong>AM_CONDITIONAL</strong> <em>（ <var>conditional</var> ， <var>condition</var> ）</em></dt>
<dd><p>条件名称<var>conditional</var> ，应该是一个简单的字符串，以字母开头，并且仅包含字母，数字和下划线。它必须不同于“ <samp>TRUE</samp> '和' <samp>FALSE</samp> '由Automake保留。
</p>
<p>贝壳<var>condition</var> （适合在外壳中使用<code>if</code>陈述式）在<code>configure</code>运行。请注意，您必须安排<em>每</em> <code>AM_CONDITIONAL</code>每次都被调用<code>configure</code>运行。如果<code>AM_CONDITIONAL</code>有条件地运行（例如，在shell中） <code>if</code>语句），那么结果将造成混乱<code>automake</code> 。
</p></dd></dl>

<a name="index-_002d_002denable_002ddebug_002c-example"></a>
<a name="index-Example-conditional-_002d_002denable_002ddebug"></a>
<a name="index-Conditional-example_002c-_002d_002denable_002ddebug"></a>

<p>条件通常取决于用户提供给用户的选项。 <code>configure</code>脚本。这是一个示例，如果用户使用<samp>--enable-debug</samp>选项。
</p>
<div class="example">
<pre class="example">AC_ARG_ENABLE([debug],
[  --enable-debug    Turn on debugging],
[case &quot;${enableval}&quot; in
  yes) debug=true ;;
  no)  debug=false ;;
  *) AC_MSG_ERROR([bad value ${enableval} for --enable-debug]) ;;
esac],[debug=false])
AM_CONDITIONAL([DEBUG], [test x$debug = xtrue])
</pre></div>

<p>这是一个如何在<samp>Makefile.am</samp> ：</p>
<a name="index-if"></a>
<a name="index-endif"></a>
<a name="index-else"></a>

<div class="example">
<pre class="example">if DEBUG
DBG = debug
else
DBG =
endif
noinst_PROGRAMS = $(DBG)
</pre></div>

<p>这个简单的例子也可以使用<code>EXTRA_PROGRAMS</code> （请参阅<a href="#Conditional-Programs">条件程序</a> ）。
</p>
<p>您只能在一个<code>if</code>语句，可能使用' <samp>!</samp> '。的<code>else</code>语句可以省略。条件语句可以嵌套到任何深度。您可以指定一个参数<code>else</code>在这种情况下，它必须是当前条件的否定<code>if</code> 。同样，您可以指定在<code>endif</code>线：</p>
<div class="example">
<pre class="example">if DEBUG
DBG = debug
else !DEBUG
DBG =
endif !DEBUG
</pre></div>

<p>不平衡的情况就是错误。的<code>if</code> ， <code>else</code>和<code>endif</code>语句不应缩进，即从第一列开始。
</p>
<p>的<code>else</code>可以省略上述两个示例的分支，因为将空字符串分配给否则未定义的变量没有区别。
</p>
<a name="index-AM_005fCOND_005fIF"></a>
<p>为了允许访问由...注册的条件<code>AM_CONDITIONAL</code>内<samp>configure.ac</samp> ，并允许有条件<code>AC_CONFIG_FILES</code> ， <code>AM_COND_IF</code>可能用过了：</p>
<dl>
<dt><a name="index-AM_005fCOND_005fIF-2"></a>巨集： <strong>AM_COND_IF</strong> <em>（ <var>conditional</var> ， <span class="roman">[</span> <var>if-true</var> <span class="roman">]</span> ， <span class="roman">[</span> <var>if-false</var> <span class="roman">]</span> ）</em></dt>
<dd><p>如果<var>conditional</var>完成，执行<var>if-true</var> ，否则执行<var>if-false</var> 。如果任一分支包含<code>AC_CONFIG_FILES</code> ，这会导致<code>automake</code>仅针对给定条件输出相应文件的规则。
</p></dd></dl>

<p><code>AM_COND_IF</code>正确使用m4引用时，宏可能会嵌套（请参见<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#M4-Quotation">M4引用</a> ）。
</p>
<a name="index-Example-conditional-AC_005fCONFIG_005fFILES"></a>
<a name="index-AC_005fCONFIG_005fFILES_002c-conditional"></a>

<p>这是如何定义条件配置文件的示例：</p>
<div class="example">
<pre class="example">AM_CONDITIONAL([SHELL_WRAPPER], [test &quot;x$with_wrapper&quot; = xtrue])
AM_COND_IF([SHELL_WRAPPER],
           [AC_CONFIG_FILES([wrapper:wrapper.in])])
</pre></div>

<hr>
<a name="Limits-of-Conditionals"></a>
<div class="header">
<p>上一篇： <a href="#Conditionals" rel="up" accesskey="u">条件</a> <a href="#Usage-of-Conditionals" rel="prev" accesskey="p">句的用法</a> ，上一篇： <a href="#Conditionals" rel="up" accesskey="u">条件句</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Limits-of-Conditionals-1"></a>
<h3 class="section">20.2条件限制</h3>

<p>条件语句应包含完整的语句，例如变量或规则定义。例如，Automake无法处理变量定义中使用的条件，甚至无法诊断这种情况。以下示例不起作用：</p>
<div class="example">
<pre class="example"># This syntax is not understood by Automake
AM_CPPFLAGS = \
  -DFEATURE_A \
if WANT_DEBUG
  -DDEBUG \
endif
  -DFEATURE_B
</pre></div>

<p>但是，预期的定义<code>AM_CPPFLAGS</code>可以实现</p>
<div class="example">
<pre class="example">if WANT_DEBUG
  DEBUGFLAGS = -DDEBUG
endif
AM_CPPFLAGS = -DFEATURE_A $(DEBUGFLAGS) -DFEATURE_B
</pre></div>

<p>要么</p>
<div class="example">
<pre class="example">AM_CPPFLAGS = -DFEATURE_A
if WANT_DEBUG
AM_CPPFLAGS += -DDEBUG
endif
AM_CPPFLAGS += -DFEATURE_B
</pre></div>

<p>本手册中的各种Automake功能与更多条件细节和示例一起进行了描述（请参见“ <a href="#Conditional-Subdirectories">条件子目录”</a> ，“ <a href="#Conditional-Sources">条件源”</a> ，“ <a href="#Conditional-Programs">条件程序”</a> ，“ <a href="#Conditional-Libtool-Libraries">条件Libtool库”</a> ，“ <a href="#Conditional-Libtool-Sources">条件Libtool源”</a> ）。
</p>
<hr>
<a name="Silencing-Make"></a>
<div class="header">
<p>下一个： <a href="#Gnits" rel="next" accesskey="n">编织物</a> ，上一个： <a href="#Conditionals" rel="prev" accesskey="p">有条件的</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Silencing-make"></a>
<h2 class="chapter">21沉默<code>make</code></h2>

<a name="index-Silent-make"></a>
<a name="index-Silencing-make"></a>
<a name="index-Silent-rules"></a>
<a name="index-Silent-make-rules"></a>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Make-verbosity" accesskey="1">使冗长</a> ：</td><td>  </td><td align="left" valign="top">默认情况下Make冗长</td></tr>
<tr><td align="left" valign="top">• <a href="#Tricks-For-Silencing-Make" accesskey="2">静音技巧</a> ：</td><td>  </td><td align="left" valign="top">沉默的标准和通用方法</td></tr>
<tr><td align="left" valign="top">•自动制作<a href="#Automake-Silent-Rules" accesskey="3">静音规则</a> ：</td><td>  </td><td align="left" valign="top">Automake如何帮助沉默制作</td></tr>
</tbody></table>

<hr>
<a name="Make-verbosity"></a>
<div class="header">
<p>下一页： <a href="#Tricks-For-Silencing-Make" rel="next" accesskey="n">静音化妆的技巧</a> ，向上： <a href="#Silencing-Make" rel="up" accesskey="u">静音化妆</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Make-is-verbose-by-default"></a>
<h3 class="section">21.1默认情况下make为冗长</h3>

<p>通常，在执行与目标相关的一组规则时， <code>make</code>在执行每个规则之前将其打印出来。这种行为已经存在很长时间了，甚至由POSIX标准强制执行，但完全违反了“沉默就是黄金”的UNIX原则<a name="DOCF7" href="#FOOT7"><sup>7</sup></a> ：</p>
<blockquote>
<p>当程序没有什么有趣或令人惊讶的说法时，它什么也不要说。行为良好的Unix程序可以毫不费力地完成其工作，而不必大惊小怪。沉默是金。
</p></blockquote>

<p>实际上，尽管如此冗长<code>make</code>从理论上讲可以用于跟踪错误并立即了解失败原因，还可以隐藏警告和错误消息， <code>make</code> -调用工具，将其淹没在无趣且很少有用的消息中，从而使它们易于被发现。
</p>
<p>这个问题可能非常烦人，尤其是对于通常非常了解幕后情况以及开发人员的冗长输出的开发人员<code>make</code>最终主要是噪音，妨碍了对潜在重要警告消息的轻松检测。
</p>
<hr>
<a name="Tricks-For-Silencing-Make"></a>
<div class="header">
<p>下一个： <a href="#Automake-Silent-Rules" rel="next" accesskey="n">Automake静默规则</a> ，上一个： <a href="#Make-verbosity" rel="prev" accesskey="p">制作冗长</a> ，上一个： <a href="#Automake-Silent-Rules" rel="next" accesskey="n">静音</a> <a href="#Silencing-Make" rel="up" accesskey="u">Make</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Standard-and-generic-ways-to-silence-make"></a>
<h3 class="section">21.2静音的标准方法和通用方法</h3>

<p>在这里，我们介绍一些常见的习惯用法/技巧，以获取更安静的make输出，以及它们的相对优缺点。在下一节（“自动制作<a href="#Automake-Silent-Rules">静音规则”</a> ）中，我们将了解自动制作如何在这方面提供帮助，从而提供更详尽，更灵活的用法。
</p>
<ul>
<li> <code>make -s</code>

<p>这只是导致<code>make</code>在执行之前不要打印<em>任何</em>规则。
</p>
<p>的<samp>-s</samp>该标志是POSIX强制要求的，并得到普遍支持，其目的和功能易于理解。
</p>
<p>但是它也有其严重的局限性。首先，它体现了一种“全有或全无”的策略，即要么一切都安静下来，要么什么都没有。缺乏粒度有时可能是致命的缺陷。而且，当<samp>-s</samp>使用标志， <code>make</code>输出结果可能太简洁了；在出现错误的情况下，用户将无法轻松查看导致它们的规则或命令，甚至在错误报告错误的工具中，错误是什么！
</p>
</li><li> <code>make >/dev/null || make</code>

<p>显然，这完全符合“沉默是黄金”的规则：来自stderr的警告会通过，仅在出现错误的情况下才进行输出报告，在这种情况下，它应该提供足够详细的报告以方便确定错误位置和原因。
</p>
<p>但是，打电话<code>make</code>连续两次可能会隐藏错误（尤其是间歇性错误），或巧妙地更改预期的语义<code>make</code>调用-这些东西显然会使调试和错误评估变得非常困难。
</p>
</li><li> <code>make --no-print-directory</code>

<p>这是GNU <code>make</code>具体。当与<samp>--no-print-directory</samp>选项，GNU <code>make</code>将通过调用子菜单禁用打印工作目录<code>make</code> s（著名的“正在<i>进入/离开目录...</i> ”消息）。这有助于减少输出的详细程度，但是经验表明，在使用深度嵌套的项目中，调试也常常使调试变得相当困难<code>make</code>递归。
</p>
<p>顺便说一句，请注意<samp>--no-print-directory</samp>如果<samp>-s</samp>标志被使用。
</p>

</li></ul>

<hr>
<a name="Automake-Silent-Rules"></a>
<div class="header">
<p>上一页： <a href="#Tricks-For-Silencing-Make" rel="prev" accesskey="p">静音化妆的技巧</a> ，向上： <a href="#Silencing-Make" rel="up" accesskey="u">静音化妆</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="How-Automake-can-help-in-silencing-make"></a>
<h3 class="section">21.3 Automake如何帮助静音</h3>

<p>沉默的窍门和成语<code>make</code>上一节中描述的内容有时会很有用，但是我们已经看到它们都有严重的缺点和局限性。这就是为什么automake为更高级，更灵活的方式提供支持，以从中获得更安静的输出的原因<code>make</code> （至少对于大多数规则而言）。
</p>
<p>为了说明Automake在这方面可以做些什么，以下是对典型的<code>make</code>输出（禁用静默规则）和启用了静默规则的输出：</p>
<div class="example">
<pre class="example">% <kbd>cat Makefile.am</kbd>
bin_PROGRAMS = foo
foo_SOURCES = main.c func.c
% <kbd>cat main.c</kbd>
int main (void) { return func (); }  /* func used undeclared */
% <kbd>cat func.c</kbd>
int func (void) { int i; return i; } /* i used uninitialized */

<i>The make output is by default very verbose.  This causes warnings
from the compiler to be somewhat hidden, and not immediate to spot.</i>
% <kbd>make CFLAGS=-Wall</kbd>
gcc -DPACKAGE_NAME=\&quot;foo\&quot; -DPACKAGE_TARNAME=\&quot;foo\&quot; ...
-DPACKAGE_STRING=\&quot;foo\ 1.0\&quot; -DPACKAGE_BUGREPORT=\&quot;\&quot; ...
-DPACKAGE=\&quot;foo\&quot; -DVERSION=\&quot;1.0\&quot; -I. -Wall -MT main.o
-MD -MP -MF .deps/main.Tpo -c -o main.o main.c
main.c: In function ‘main’:
main.c:3:3: warning: implicit declaration of function ‘func’
mv -f .deps/main.Tpo .deps/main.Po
gcc -DPACKAGE_NAME=\&quot;foo\&quot; -DPACKAGE_TARNAME=\&quot;foo\&quot; ...
-DPACKAGE_STRING=\&quot;foo\ 1.0\&quot; -DPACKAGE_BUGREPORT=\&quot;\&quot; ...
-DPACKAGE=\&quot;foo\&quot; -DVERSION=\&quot;1.0\&quot; -I. -Wall -MT func.o
-MD -MP -MF .deps/func.Tpo -c -o func.o func.c
func.c: In function ‘func’:
func.c:4:3: warning: ‘i’ used uninitialized in this function
mv -f .deps/func.Tpo .deps/func.Po
gcc -Wall -o foo main.o func.o

<i>Clean up, so that we we can rebuild everything from scratch.</i>
% <kbd>make clean</kbd>
test -z &quot;foo&quot; || rm -f foo
rm -f *.o

<i>Silent rules enabled: the output is minimal but informative.  In
particular, the warnings from the compiler stick out very clearly.</i>
% <kbd>make V=0 CFLAGS=-Wall</kbd>
  CC     main.o
main.c: In function ‘main’:
main.c:3:3: warning: implicit declaration of function ‘func’
  CC     func.o
func.c: In function ‘func’:
func.c:4:3: warning: ‘i’ used uninitialized in this function
  CCLD   foo
</pre></div>

<a name="index-silent-rules-and-libtool"></a>
<p>另外，在使用<code>libtool</code> ，使用静默规则可以自动启用<code>libtool</code>的<samp>--silent</samp>选项：</p>
<div class="example">
<pre class="example">% <kbd>cat Makefile.am</kbd>
lib_LTLIBRARIES = libx.la

% <kbd>make # Both make and libtool are verbose by default.</kbd>
...
libtool: compile: gcc -DPACKAGE_NAME=\&quot;foo\&quot; ... -DLT_OBJDIR=\&quot;.libs/\&quot;
  -I. -g -O2 -MT libx.lo -MD -MP -MF .deps/libx.Tpo -c libx.c -fPIC
  -DPIC -o .libs/libx.o
mv -f .deps/libx.Tpo .deps/libx.Plo
/bin/sh ./libtool --tag=CC --mode=link gcc -g -O2 -o libx.la -rpath
  /usr/local/lib libx.lo
libtool: link: gcc -shared .libs/libx.o -Wl,-soname -Wl,libx.so.0
  -o .libs/libx.so.0.0.0
libtool: link: cd .libs &amp;&amp; rm -f libx.so &amp;&amp; ln -s libx.so.0.0.0 libx.so
...

% <kbd>make V=0</kbd>
  CC     libx.lo
  CCLD   libx.la
</pre></div>

<p>对于自动生成的<samp>Makefile</samp> s，用户可能会在以下方面影响详细程度<code>configure</code>运行时间以及<code>make</code>运行：</p>
<ul>
<li> <a name="index-_002d_002denable_002dsilent_002drules"></a><a name="index-_002d_002ddisable_002dsilent_002drules"></a>通过<samp>--enable-silent-rules</samp>至<code>configure</code>会导致构建规则不那么冗长；选项<samp>--disable-silent-rules</samp>将导致正常的详细输出。
</li><li> <a name="index-V"></a>在<code>make</code>运行时，默认选择为<code>configure</code>时间可能会被覆盖： <code>make V=1</code>将产生详细的输出， <code>make V=0</code>输出较少的详细信息。
</li></ul>

<a name="index-default-verbosity-for-silent-rules"></a>
<p>请注意，默认情况下，静默规则是<em>禁用</em>的；用户必须在任一位置显式启用它们<code>configure</code>运行时间或<code>make</code>运行。我们认为这是一个很好的策略，因为它可以为临时用户提供足够的信息，以便在发生任何问题时准备好的错误报告。
</p>
<p>尽管如此，尽管具有上述基本原理，但真正想要在自己的程序包中默认启用默认规则的开发人员可以通过调用<code>AM_SILENT_RULES([yes])</code>在<samp>configure.ac</samp> 。
</p>
<p>希望默认启用静音规则的用户可以编辑其<samp>config.site</samp>制作变量的文件<code>enable_silent_rules</code>默认为' <samp>yes</samp> '。这仍应允许在以下位置禁用静默规则<code>configure</code>时间和时间<code>make</code>时间。
</p>
<p>对于不同的便携性<code>make</code>实施时，建议软件包作者不要设置变量<code>V</code>在 - 的里面<samp>Makefile.am</samp>文件，以允许用户也覆盖子目录的值。
</p>
<p>为了达到最佳效果，此功能的当前实现通常使用嵌套变量扩展' <samp>$(<var>var1</var>$(V))</samp> '， 一种<samp>Makefile</samp> POSIX 2008不需要此功能，但实际上得到了广泛的支持。难得<code>make</code>不支持嵌套变量扩展，规则是否静音的实现总是在配置时确定，并且不能在make时覆盖。POSIX的未来版本可能需要嵌套变量扩展，因此这个次要限制应随时间而消失。
</p>
<a name="index-AM_005fV_005fGEN"></a>
<a name="index-AM_005fV_005fat"></a>
<a name="index-AM_005fDEFAULT_005fVERBOSITY"></a>
<a name="index-AM_005fV"></a>
<a name="index-AM_005fDEFAULT_005fV"></a>
<p>要将静默模式扩展到您自己的规则，您有几种选择：</p>
<ul>
<li>您可以使用预定义的变量<code>AM_V_GEN</code>作为应以静默方式输出状态行的命令的前缀，以及<code>AM_V_at</code>作为在静默模式下不应输出任何内容的命令的前缀。当输出是冗长的时，这两个变量都将扩展为空字符串。

</li><li>您可以使用以下方式无条件地使食谱静音<code>@</code> ，然后使用预定义变量<code>AM_V_P</code>要知道make是在静默模式下运行还是在详细模式下运行，请相应地调整配方显示的详细信息：<div class="example">
<pre class="example">generate-headers:
                ... [commands defining a shell variable '$headers'] ...; \
        if $(AM_V_P); then set -x; else echo &quot; GEN   [headers]&quot;; fi; \
        rm -f $$headers &amp;&amp; generate-header --flags $$headers
</pre></div>

</li><li>您可以添加自己的变量，以便显示您自己选择的字符串。以下代码段显示了如何定义自己的等价物<code>AM_V_GEN</code> ：<div class="example">
<pre class="example">pkg_verbose = $(pkg_verbose_@AM_V@)
pkg_verbose_ = $(pkg_verbose_@AM_DEFAULT_V@)
pkg_verbose_0 = @echo PKG-GEN $@;

foo: foo.in
        $(pkg_verbose)cp $(srcdir)/foo.in $@
</pre></div>

</li></ul>

<p>最后，请注意，即使启用了静默规则， <samp>--no-print-directory</samp> GNU仍然需要该选项<code>make</code>如果要禁用“ <i>进入/离开目录...</i> ”消息。
</p>
<hr>
<a name="Gnits"></a>
<div class="header">
<p>下一个： <a href="#Not-Enough" rel="next" accesskey="n">不够</a> ，上一个： <a href="#Silencing-Make" rel="prev" accesskey="p">静音</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-effect-of-_002d_002dgnu-and-_002d_002dgnits"></a>
<h2 class="chapter">22的影响<samp>--gnu</samp>和<samp>--gnits</samp></h2>

<a name="index-_002d_002dgnu_002c-required-files"></a>
<a name="index-_002d_002dgnu_002c-complete-description"></a>

<p>的<samp>--gnu</samp>选项（或<samp>gnu</samp>在里面<code>AUTOMAKE_OPTIONS</code>变量）原因<code>automake</code>检查以下内容：</p>
<ul>
<li>文件<samp>INSTALL</samp> ， <samp>NEWS</samp> ， <samp>README</samp> ， <samp>AUTHORS</samp>和<samp>ChangeLog</samp> ，再加上以下之一<samp>COPYING.LIB</samp> ， <samp>COPYING.LESSER</samp>要么<samp>COPYING</samp> ，位于软件包最顶层的目录中。

<p>如果<samp>--add-missing</samp>给出了选项<code>automake</code>将添加通用版本<samp>INSTALL</samp>文件以及<samp>COPYING</samp>文件，其中包含此Automake发行时存在的GNU通用公共许可证当前版本的文本（撰写本文时为版本3， <a href="https://www.gnu.org/copyleft/gpl.html">https：//www.gnu.org/copyleft/gpl.html</a> ）。但是，现有的<samp>COPYING</samp>文件将永远不会被覆盖<code>automake</code> 。
</p>
</li><li>选项<samp>no-installman</samp>和<samp>no-installinfo</samp>被禁止。
</li></ul>

<p>请注意，将来会扩展此选项以进行更多检查；建议您熟悉GNU标准的确切要求。也， <samp>--gnu</samp>可能要求存在某些非标准的GNU程序，以供各种仅维护人员的规则使用；例如在未来<code>pathchk</code>可能需要“ <samp>make dist</samp> '。
</p>
<a name="index-_002d_002dgnits_002c-complete-description"></a>

<p>的<samp>--gnits</samp>选项可以做的所有事情<samp>--gnu</samp>并检查以下内容：</p>
<ul>
<li>' <samp>make installcheck</samp> '将检查以确保<samp>--help</samp>和<samp>--version</samp>分别分别打印用法消息和版本字符串。这是<samp>std-options</samp>选项（请参阅<a href="#Options">选项</a> ）。

</li><li>' <samp>make dist</samp> '将检查以确保<samp>NEWS</samp>文件已更新为当前版本。

</li><li> <code>VERSION</code>已检查以确保其格式符合Gnits标准。

</li><li> <a name="index-README_002dalpha"></a>如果<code>VERSION</code>表示这是Alpha版本，文件<samp>README-alpha</samp>出现在包的最顶层目录中，然后包含在分发中。这是在完成<samp>--gnits</samp>模式，没有其他选择，因为此模式是唯一一种版本号格式受约束的模式，因此也是唯一一种可以使Automake自动确定是否<samp>README-alpha</samp>应该包括在内。

</li><li>文件<samp>THANKS</samp>是必须的。
</li></ul>


<hr>
<a name="Not-Enough"></a>
<div class="header">
<p>下一篇： <a href="#Distributing" rel="next" accesskey="n">发行</a> ，上一篇： <a href="#Gnits" rel="prev" accesskey="p">编织</a> ，上<a href="#Gnits" rel="prev" accesskey="p">一篇</a> ： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="When-Automake-Isn_0027t-Enough"></a>
<h2 class="chapter">23 Automake不够用时</h2>

<p>在某些情况下，Automake不能完成一项任务，因此必须依靠手写规则甚至手写<samp>Makefile</samp> s。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Extending" accesskey="1">扩展</a> ：</td><td>  </td><td align="left" valign="top">添加新规则或覆盖现有规则。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Third_002dParty-Makefiles" accesskey="2">第三方Makefile</a> ：</td><td>  </td><td align="left" valign="top">集成非Automake <samp>Makefile</samp> s。
</td></tr>
</tbody></table>

<hr>
<a name="Extending"></a>
<div class="header">
<p>下一页： <a href="#Third_002dParty-Makefiles" rel="next" accesskey="n">第三方Makefiles</a> ，向上： <a href="#Not-Enough" rel="up" accesskey="u">不够</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Extending-Automake-Rules"></a>
<h3 class="section">23.1扩展自动制作规则</h3>

<p>除一些次要例外（例如<code>_PROGRAMS</code>变量<code>TESTS</code> ， 要么<code>XFAIL_TESTS</code> ）被重写为追加“ <samp>$(EXEEXT)</samp> '）的内容<samp>Makefile.am</samp>复制到<samp>Makefile.in</samp>逐字。
</p>
<a name="index-copying-semantics"></a>

<p>这些复制语义意味着，只需添加一些即可解决许多问题<code>make</code>变量和规则<samp>Makefile.am</samp> 。Automake将忽略这些添加。
</p>
<a name="index-conflicting-definitions"></a>
<a name="index-rules_002c-conflicting"></a>
<a name="index-variables_002c-conflicting"></a>
<a name="index-definitions_002c-conflicts"></a>

<p>由于一个<samp>Makefile.in</samp>是根据从三个不同地方（ <samp>Makefile.am</samp> ， <samp>configure.ac</samp>和<code>automake</code>本身），则规则或变量的定义可能会冲突。建造时<samp>Makefile.in</samp>以下优先事项受到尊重<code>automake</code>确保用户始终拥有硬道理：</p>
<ul>
<li>用户定义的变量<samp>Makefile.am</samp>优先于变量<code>AC_SUBST</code> ed from <samp>configure.ac</samp>和<code>AC_SUBST</code> ed变量的优先级高于<code>automake</code>定义的变量。
</li><li>就规则而言，用户定义的规则将覆盖任何<code>automake</code>相同目标的定义规则。
</li></ul>

<a name="index-overriding-rules"></a>
<a name="index-overriding-semantics"></a>
<a name="index-rules_002c-overriding"></a>

<p>这些最重要的语义使得可以微调Automake的某些默认设置，或替换其某些规则。通常不建议覆盖Automake规则，尤其是在带有子目录的程序包的最顶层目录中。的<samp>-Woverride</samp> option（请参见<a href="#automake-Invocation">automake Invocation</a> ）非常有用，可以捕获被覆盖的定义。
</p>
<p>请注意，Automake在带有命令的规则和仅指定依赖项的规则之间没有任何区别。因此，不可能将新的依赖项附加到<code>automake</code>定义的目标，而无需重新定义整个规则。
</p>
<a name="index-_002dlocal-targets"></a>
<a name="index-local-targets"></a>

<p>但是，各种有用的目标都有一个“ <samp>-local</samp>您可以在您的<samp>Makefile.am</samp> 。Automake将用这些用户提供的目标来补充标准目标。
</p>
<a name="index-all-1"></a>
<a name="index-all_002dlocal"></a>
<a name="index-info-1"></a>
<a name="index-info_002dlocal"></a>
<a name="index-dvi-1"></a>
<a name="index-dvi_002dlocal"></a>
<a name="index-ps-1"></a>
<a name="index-ps_002dlocal"></a>
<a name="index-pdf-1"></a>
<a name="index-pdf_002dlocal"></a>
<a name="index-html-1"></a>
<a name="index-html_002dlocal"></a>
<a name="index-check-2"></a>
<a name="index-check_002dlocal"></a>
<a name="index-install-2"></a>
<a name="index-install_002ddata-2"></a>
<a name="index-install_002ddata_002dlocal-1"></a>
<a name="index-install_002ddvi-1"></a>
<a name="index-install_002ddvi_002dlocal"></a>
<a name="index-install_002dexec-2"></a>
<a name="index-install_002dexec_002dlocal-1"></a>
<a name="index-install_002dhtml-1"></a>
<a name="index-install_002dhtml_002dlocal"></a>
<a name="index-install_002dinfo-2"></a>
<a name="index-install_002dinfo_002dlocal"></a>
<a name="index-install_002dpdf-1"></a>
<a name="index-install_002dpdf_002dlocal"></a>
<a name="index-install_002dps-1"></a>
<a name="index-install_002dps_002dlocal"></a>
<a name="index-uninstall-2"></a>
<a name="index-uninstall_002dlocal"></a>
<a name="index-mostlyclean"></a>
<a name="index-mostlyclean_002dlocal-1"></a>
<a name="index-clean-1"></a>
<a name="index-clean_002dlocal-1"></a>
<a name="index-distclean-1"></a>
<a name="index-distclean_002dlocal-1"></a>
<a name="index-installdirs-1"></a>
<a name="index-installdirs_002dlocal"></a>
<a name="index-installcheck-1"></a>
<a name="index-installcheck_002dlocal"></a>

<p>支持本地版本的目标是<code>all</code> ， <code>info</code> ， <code>dvi</code> ， <code>ps</code> ， <code>pdf</code> ， <code>html</code> ， <code>check</code> ， <code>install-data</code> ， <code>install-dvi</code> ， <code>install-exec</code> ， <code>install-html</code> ， <code>install-info</code> ， <code>install-pdf</code> ， <code>install-ps</code> ， <code>uninstall</code> ， <code>installdirs</code> ， <code>installcheck</code>和各种<code>clean</code>目标（ <code>mostlyclean</code> ， <code>clean</code> ， <code>distclean</code>和<code>maintainer-clean</code> ）。
</p>
<p>请注意，没有<code>uninstall-exec-local</code>要么<code>uninstall-data-local</code>目标；只是使用<code>uninstall-local</code> 。仅卸载数据或可执行文件是没有意义的。
</p>
<p>例如，这是在“ <samp>make clean</samp> '（请参阅<a href="#Clean">清洁</a> ）。
</p>
<div class="example">
<pre class="example">clean-local:
        -rm -rf testSubDir
</pre></div>

<p>您可能会想使用<code>install-data-local</code>将文件安装到某个硬编码位置，但是您应该避免这种情况（请参阅<a href="#Hard_002dCoded-Install-Paths">硬编码安装路径</a> ）。
</p>
<p>随着<code>-local</code>目标，没有特别的执行顺序保证；通常，它们运行得较早，但是对于并行制造，无法确定这一点。
</p>
<a name="index-_002dhook-targets"></a>
<a name="index-hook-targets"></a>
<a name="index-install_002ddata_002dhook"></a>
<a name="index-install_002dexec_002dhook"></a>
<a name="index-uninstall_002dhook"></a>
<a name="index-dist_002dhook-1"></a>

<p>相反，某些规则也有运行另一条规则的方法，称为“ <em>钩子”</em> 。总是在完成主规则的工作后执行钩子。挂钩是根据主要目标命名的，带有“ <samp>-hook</samp> ”。允许钩子的目标是<code>install-data</code> ， <code>install-exec</code> ， <code>uninstall</code> ， <code>dist</code>和<code>distcheck</code> 。
</p>
<p>例如，以下是如何创建到已安装程序的硬链接：</p>
<div class="example">
<pre class="example">install-exec-hook:
        ln $(DESTDIR)$(bindir)/program$(EXEEXT) \
           $(DESTDIR)$(bindir)/proglink$(EXEEXT)
</pre></div>

<p>尽管比符号链接更便宜且更可移植，但是硬链接将无法在任何地方使用（例如，OS / 2并没有<code>ln</code> ）。理想情况下，您应该退回到“ <samp>cp -p</samp> ' 什么时候<code>ln</code>不起作用。如果您可以接受符号链接，一种简单的方法是添加<code>AC_PROG_LN_S</code>至<samp>configure.ac</samp> （请参阅<cite>Autoconf手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Particular-Programs">特定程序检查</a> ），并使用“ <samp>$(LN_S)</samp>在<samp>Makefile.am</samp> 。
</p>
<a name="index-versioned-binaries_002c-installing"></a>
<a name="index-installing-versioned-binaries"></a>
<a name="index-LN_005fS-example"></a>
<p>举例来说，您可以使用以下方法来安装程序的版本副本： <samp>$(LN_S)</samp> '：</p>
<div class="example">
<pre class="example">install-exec-hook:
        cd $(DESTDIR)$(bindir) &amp;&amp; \
          mv -f prog$(EXEEXT) prog-$(VERSION)$(EXEEXT) &amp;&amp; \
          $(LN_S) prog-$(VERSION)$(EXEEXT) prog$(EXEEXT)
</pre></div>

<p>请注意，我们重命名了程序，以便新版本将删除符号链接，而不是真正的二进制文件。还有我们<code>cd</code>进入目标目录以创建相对链接。
</p>
<p>写作时<code>install-exec-hook</code>要么<code>install-data-hook</code> ，请记住exec / data的区别是基于安装目录，而不是基于所使用的主要目录（请参阅<a href="#The-Two-Parts-of-Install">安装的两个部分</a> ）。所以<code>foo_SCRIPTS</code>将由安装<code>install-data</code>和<code>barexec_SCRIPTS</code>将由安装<code>install-exec</code> 。因此，您应该定义您的钩子。
</p>

<hr>
<a name="Third_002dParty-Makefiles"></a>
<div class="header">
<p>上一页： <a href="#Extending" rel="prev" accesskey="p">扩展</a> ，向上： <a href="#Not-Enough" rel="up" accesskey="u">不够</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Third_002dParty-Makefiles-1"></a>
<h3 class="section">23.2第三方<samp>Makefile</samp> s</h3>

<a name="index-Third_002dparty-packages_002c-interfacing-with"></a>
<a name="index-Interfacing-with-third_002dparty-packages"></a>

<p>在大多数项目中<samp>Makefile</samp>由Automake生成。但是，在某些情况下，项目需要使用手写体嵌入子目录<samp>Makefile</samp> s。例如，一个子目录可能是具有自己的生成系统的第三方项目，而不使用Automake。
</p>
<p>可以列出任意目录<code>SUBDIRS</code>要么<code>DIST_SUBDIRS</code>只要这些目录都有一个<samp>Makefile</samp>识别以下所有递归目标。
</p>
<a name="index-recursive-targets-and-third_002dparty-Makefiles"></a>
<p>当用户运行这些目标之一时，该目标将在所有子目录中递归运行。这就是为什么即使是第三方也很重要的原因<samp>Makefile</samp>支持他们。
</p>
<dl compact>
<dt><code>all</code></dt>
<dd><p>编译整个程序包。这是Automake生成的默认目标<samp>Makefile</samp> s，但不一定是第三方的默认值<samp>Makefile</samp> s。
</p>
</dd>
<dt><code>distdir</code></dt>
<dd><a name="index-distdir"></a>
<a name="index-distdir-2"></a>
<a name="index-top_005fdistdir-1"></a>
<p>复制文件以分发到“ <samp>$(distdir)</samp> '，然后再构建tarball。当然，如果<samp>no-dist</samp>选项（请参阅<a href="#Options">选项</a> ）。
</p>
<p>变量“ <samp>$(top_distdir)</samp> '和' <samp>$(distdir)</samp> '（请参阅<a href="#The-dist-Hook">dist Hook</a> ）将在以下情况下从外包装传递到子包装： <code>distdir</code>目标被调用。这两个变量已经针对递归到的目录进行了调整，因此可以随时使用。
</p>
</dd>
<dt><code>install</code></dt>
<dt><code>install-data</code></dt>
<dt><code>install-exec</code></dt>
<dt><code>uninstall</code></dt>
<dd><p>安装或卸载文件（请参阅<a href="#Install">安装</a> ）。
</p>
</dd>
<dt><code>install-dvi</code></dt>
<dt><code>install-html</code></dt>
<dt><code>install-info</code></dt>
<dt><code>install-ps</code></dt>
<dt><code>install-pdf</code></dt>
<dd><p>仅安装某些特定的文档格式（请参阅<a href="#Texinfo">Texinfo</a> ）。
</p>
</dd>
<dt><code>installdirs</code></dt>
<dd><p>创建安装目录，但不要安装任何文件。
</p>
</dd>
<dt><code>check</code></dt>
<dt><code>installcheck</code></dt>
<dd><p>检查包装（请参阅“ <a href="#Tests">测试”</a> ）。
</p>
</dd>
<dt><code>mostlyclean</code></dt>
<dt><code>clean</code></dt>
<dt><code>distclean</code></dt>
<dt><code>maintainer-clean</code></dt>
<dd><p>清洁规则（请参阅<a href="#Clean">清洁</a> ）。
</p>
</dd>
<dt><code>dvi</code></dt>
<dt><code>pdf</code></dt>
<dt><code>ps</code></dt>
<dt><code>info</code></dt>
<dt><code>html</code></dt>
<dd><p>构建各种格式的文档（请参阅<a href="#Texinfo">Texinfo</a> ）。
</p>
</dd>
<dt><code>tags</code></dt>
<dt><code>ctags</code></dt>
<dd><p>建立<samp>TAGS</samp>和<samp>CTAGS</samp> （请参见<a href="#Tags">标签</a> ）。
</p></dd>
</dl>

<p>如果您曾经在项目中使用过Gettext，则这是第三方如何使用它的一个很好的例子<samp>Makefile</samp>可以与Automake一起使用。的<samp>Makefile</samp> s <code>gettextize</code>放在<samp>po/</samp>和<samp>intl/</samp>目录是手写的<samp>Makefile</samp>实现所有这些目标的。这样就可以将它们添加到<code>SUBDIRS</code>在Automake软件包中。
</p>
<p>仅列出的目录<code>DIST_SUBDIRS</code>但不在<code>SUBDIRS</code>只需要<code>distclean</code> ， <code>maintainer-clean</code>和<code>distdir</code>规则（请参阅<a href="#Conditional-Subdirectories">条件子目录</a> ）。
</p>
<p>通常，这些规则中的许多规则与第三方子项目无关，但是它们是整个程序包运行所必需的。可以设置一条不执行任何操作的规则，因此，如果您要集成没有文档或标签支持的第三方项目，则只需增加其内容即可。 <samp>Makefile</samp>如下：</p>
<div class="example">
<pre class="example">EMPTY_AUTOMAKE_TARGETS = dvi pdf ps info html tags ctags
.PHONY: $(EMPTY_AUTOMAKE_TARGETS)
$(EMPTY_AUTOMAKE_TARGETS):
</pre></div>

<p>集成第三方构建系统的另一个方面是它们是否支持VPATH构建（请参阅<a href="#VPATH-Builds">VPATH构建</a> ）。显然，如果子软件包不支持VPATH构建，则整个软件包将不支持VPATH构建。这反过来意味着“ <samp>make distcheck</samp>不会起作用，因为它依赖VPATH构建。有些人可以没有这种生活（实际上，许多Automake用户从未听说过“ <samp>make distcheck</samp> '）。其他人可能更喜欢改造现有的<samp>Makefile</samp>支持VPATH。这样做并不一定需要Automake，仅需要Autoconf（请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Build-Directories">Build Directories</a> <cite>”</cite> ）。必要的替换： <samp>@srcdir@</samp> '，' <samp>@top_srcdir@</samp> '和' <samp>@top_builddir@</samp> '由...定义<samp>configure</samp>当它处理一个<samp>Makefile</samp> （请参见<cite>《 Autoconf手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Preset-Output-Variables">预设输出变量</a> <cite>”</cite> ），Makefile不会像上述“ <samp>$(distdir)</samp> '和' <samp>$(top_distdir)</samp> '变量。
</p>
<p>有时修改第三方很不方便<samp>Makefile</samp>介绍上述要求的目标。例如，您可能希望保持第三方资源不变，以简化对新版本的升级。
</p>
<a name="index-GNUmakefile-including-Makefile"></a>
<p>这是另外两个想法。如果假定使用GNU make，则一种可能性是将a添加到该子目录中。 <samp>GNUmakefile</samp>定义了必需的目标并包括第三方<samp>Makefile</samp> 。为了使其在VPATH版本中起作用， <samp>GNUmakefile</samp>必须位于构建目录中；最简单的方法是编写一个<samp>GNUmakefile.in</samp>相反，并用<code>AC_CONFIG_FILES</code>从外包装。例如，如果我们假设<samp>Makefile</samp>定义除文档目标之外的所有目标，并且<code>check</code>目标实际上被称为<code>test</code> ，我们可以写<samp>GNUmakefile</samp> （要么<samp>GNUmakefile.in</samp> ） 像这样：</p>
<div class="example">
<pre class="example"># First, include the real Makefile
include Makefile
# Then, define the other targets needed by Automake Makefiles.
.PHONY: dvi pdf ps info html check
dvi pdf ps info html:
check: test
</pre></div>

<a name="index-Proxy-Makefile-for-third_002dparty-packages"></a>
<p>一个不使用的类似想法<code>include</code>是写一个代理<samp>Makefile</samp>分配规则到真实<samp>Makefile</samp> ，或者使用“ <samp>$(MAKE) -f Makefile.real $(AM_MAKEFLAGS) target</samp> '（如果可以，则可以重命名原始<samp>Makefile</samp> ）或使用' <samp>cd subdir && $(MAKE) $(AM_MAKEFLAGS) target</samp> '（如果可以的话，将子目录项目更深地存储一个目录）。好消息是这个代理<samp>Makefile</samp>可以用Automake生成。我们需要的是<samp>-local</samp>执行调度的目标（请参阅<a href="#Extending">Extending</a> ）。当然，其他Automake功能也可用，因此您可以决定让Automake执行分发或安装。这是可能的<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">all-local:
        cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) all
check-local:
        cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) test
clean-local:
        cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) clean

# Assuming the package knows how to install itself
install-data-local:
        cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) install-data
install-exec-local:
        cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) install-exec
uninstall-local:
        cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) uninstall

# Distribute files from here.
EXTRA_DIST = subdir/Makefile subdir/program.c ...
</pre></div>

<p>将此想法推到极致，也有可能忽略子项目构建系统，并从此代理构建所有内容<samp>Makefile.am</samp> 。如果您需要VPATH构建，但是子项目不支持它们，这听起来可能非常明智。
</p>
<hr>
<a name="Distributing"></a>
<div class="header">
<p>下一篇： <a href="#API-Versioning" rel="next" accesskey="n">API版本控制</a> ，上一篇： <a href="#Not-Enough" rel="prev" accesskey="p">还不够</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Distributing-Makefile_002eins"></a>
<h2 class="chapter">24分配<samp>Makefile.in</samp> s</h2>

<p>Automake对结果的分布没有任何限制<samp>Makefile.in</samp> s。我们仍然鼓励软件作者按照GPL的条款分发其作品，但是使用Automake不需要这样做。
</p>
<p>可以通过以下方式自动安装的某些文件<samp>--add-missing</samp>开关确实属于GPL。但是，这些也有一个特殊的例外，无论您选择哪种许可，都可以将它们与软件包一起分发。
</p>

<hr>
<a name="API-Versioning"></a>
<div class="header">
<p>下一个： <a href="#Upgrading" rel="next" accesskey="n">升级</a> ，上一个： <a href="#Distributing" rel="prev" accesskey="p">分发</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Automake-API-Versioning"></a>
<h2 class="chapter">25 Automake API版本控制</h2>

<p>新的Automake版本通常包含错误修复和新功能。不幸的是，它们可能还会引入新的错误和不兼容之处。这说明了为什么软件包可能需要特定的Automake版本的四个原因。
</p>
<p>当维护一大包软件包时，情况变得更糟，每个软件包都需要使用不同版本的Automake。过去，这意味着任何开发人员（有时甚至是用户）都必须在不同位置安装多个版本的Automake，然后切换“ <samp>$PATH</samp> '适合每个包装。
</p>
<p>从版本1.6开始，Automake将安装版本化的二进制文件。这意味着您可以在同一“ <samp>$prefix</samp> '，并可以通过运行选择任意Automake版本<code>automake-1.6</code>要么<code>automake-1.7</code>不用玩弄<samp>$PATH</samp> '。此外， <samp>Makefile</samp>由Automake 1.6生成的<code>automake-1.6</code>明确地在他们的重建规则中。
</p>
<p>数字 ' <samp>1.6</samp>在<code>automake-1.6</code>是Automake的API版本，而不是Automake的版本。如果发布了错误修复程序，例如Automake 1.6.1，则API版本将保持为1.6。这意味着与Automake 1.6兼容的软件包也应与1.6.1兼容。毕竟，这是人们对错误修复版本的期望。
</p>
<p>如果您的软件包依赖于发行版中引入的功能或错误修复，则可以将此版本作为选项传递给Automake，以确保不会使用较旧的发行版。例如，在您的<samp>configure.ac</samp> ：</p>
<div class="example">
<pre class="example">  AM_INIT_AUTOMAKE([1.6.1])    dnl Require Automake 1.6.1 or better.
</pre></div>

<p>或者，特别是<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">  AUTOMAKE_OPTIONS = 1.6.1   # Require Automake 1.6.1 or better.
</pre></div>

<p>如果Automake的版本早于所请求的版本，它将打印一条错误消息。
</p>

<a name="What-is-in-the-API"></a>
<h3 class="heading">API中有什么</h3>

<p>Automake的编程界面不容易定义。基本上，它至少应包括所有已<strong>记录的</strong>变量和目标， <samp>Makefile.am</samp>作者可以使用与他们相关的任何行为（例如，“ <samp>-hook</samp> ”），命令行界面<code>automake</code>和<code>aclocal</code> ，…</p>
<a name="What-is-not-in-the-API"></a>
<h3 class="heading">API中没有什么</h3>

<p>每个未记录的变量，目标或命令行选项都不是API的一部分。您应该避免使用它们，因为它们可能会从一个版本更改为另一个版本（即使在错误修复版本中，如果这有助于修复错误）。
</p>
<p>如果事实证明您需要使用这种未记录的功能，请联系<a href="mailto:automake@gnu.org">automake@gnu.org</a>并尝试将其记录下来并由测试套件进行练习。
</p>
<hr>
<a name="Upgrading"></a>
<div class="header">
<p>下一个： <a href="#FAQ" rel="next" accesskey="n">常见问题解答</a> ，上一个： <a href="#API-Versioning" rel="prev" accesskey="p">API版本控制</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Upgrading-a-Package-to-a-Newer-Automake-Version"></a>
<h2 class="chapter">26将软件包升级到较新的Automake版本</h2>

<p>Automake在包中维护三种文件。
</p>
<ul>
<li> <samp>aclocal.m4</samp>
</li><li> <samp>Makefile.in</samp> s</li><li>辅助工具，例如<samp>install-sh</samp>要么<samp>py-compile</samp>
</li></ul>

<p><samp>aclocal.m4</samp>由产生<code>aclocal</code>并包含一些Automake提供的M4宏。辅助工具由' <samp>automake --add-missing</samp> ' 需要的时候。 <samp>Makefile.in</samp> s是从<samp>Makefile.am</samp>通过<code>automake</code> ，并依赖于放置的M4宏的定义<samp>aclocal.m4</samp>以及安装的辅助工具的行为。
</p>
<p>因为所有这些文件都密切相关，所以在升级到较新的Automake版本时，重新生成所有文件很重要。通常的方法是</p>
<div class="example">
<pre class="example">aclocal # with any option needed (such a -I m4)
autoconf
automake --add-missing --force-missing
</pre></div>

<p>或更方便的是：</p>
<div class="example">
<pre class="example">autoreconf -vfi
</pre></div>

<p>指某东西的用途<samp>--force-missing</samp>确保辅助工具将被新版本覆盖（请参见<a href="#automake-Invocation">automake Invocation</a> ）。
</p>
<p>每次升级Automake时，即使在各个错误修复版本之间，都必须重新生成所有这些文件，这一点很重要。例如，错误修复涉及更改在<samp>Makefile.in</samp>并将支持的M4宏复制到<samp>aclocal.m4</samp> 。
</p>
<p>目前<code>automake</code>能够诊断情况<samp>aclocal.m4</samp>已使用其他版本的<code>aclocal</code> 。但是，它从不检查辅助脚本是否是最新的。换一种说法， <code>automake</code>会告诉你什么时候<code>aclocal</code>需要重新运行，但它永远不会诊断出丢失的内容<samp>--force-missing</samp> 。
</p>
<p>在升级到新的主要版本之前，最好先阅读文件<samp>NEWS</samp> 。该文件列出了发行版之间的所有更改：新功能，过时的构造，已知的不兼容性和解决方法。
</p>
<hr>
<a name="FAQ"></a>
<div class="header">
<p>下一篇： <a href="#Copying-This-Manual" rel="next" accesskey="n">复制本手册</a> ，上一篇： <a href="#Upgrading" rel="prev" accesskey="p">升级</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Frequently-Asked-Questions-about-Automake"></a>
<h2 class="chapter">关于Automake的27个常见问题</h2>

<p>本章涵盖了邮件列表中经常出现的一些问题。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#CVS" accesskey="1">CVS</a> ：</td><td>  </td><td align="left" valign="top">CVS和生成的文件</td></tr>
<tr><td align="left" valign="top">• <a href="#maintainer_002dmode" accesskey="2">维护者模式</a> ：</td><td>  </td><td align="left" valign="top">缺少和AM_MAINTAINER_MODE</td></tr>
<tr><td align="left" valign="top">• <a href="#Wildcards" accesskey="3">通配符</a> ：</td><td>  </td><td align="left" valign="top">为什么Automake不支持通配符？
</td></tr>
<tr><td align="left" valign="top">• <a href="#Limitations-on-File-Names" accesskey="4">文件名限制</a> ：</td><td>  </td><td align="left" valign="top">源文件名和已安装文件名的限制</td></tr>
<tr><td align="left" valign="top">• <a href="#Errors-with-distclean" accesskey="5">distclean错误</a> ：</td><td>  </td><td align="left" valign="top">distclean之后保留在构建目录中的文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Flag-Variables-Ordering" accesskey="6">标志变量排序</a> ：</td><td>  </td><td align="left" valign="top">CFLAGS vs.AM_CFLAGS vs.mumble_CFLAGS</td></tr>
<tr><td align="left" valign="top">• <a href="#Renamed-Objects" accesskey="7">重命名的对象</a> ：</td><td>  </td><td align="left" valign="top">为什么有时会重命名目标文件？
</td></tr>
<tr><td align="left" valign="top">• <a href="#Per_002dObject-Flags" accesskey="8">每个对象标志</a> ：</td><td>  </td><td align="left" valign="top">如何模拟每个对象的标志？
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiple-Outputs" accesskey="9">多个输出</a> ：</td><td>  </td><td align="left" valign="top">为具有许多输出文件的工具编写规则</td></tr>
<tr><td align="left" valign="top">• <a href="#Hard_002dCoded-Install-Paths">硬编码的安装路径</a> ：</td><td>  </td><td align="left" valign="top">安装到硬编码的位置</td></tr>
<tr><td align="left" valign="top">• <a href="#Debugging-Make-Rules">调试制作规则</a> ：</td><td>  </td><td align="left" valign="top">事情无法按预期进行时的策略</td></tr>
<tr><td align="left" valign="top">• <a href="#Reporting-Bugs">报告错误</a> ：</td><td>  </td><td align="left" valign="top">有关错误和功能要求的反馈</td></tr>
</tbody></table>

<hr>
<a name="CVS"></a>
<div class="header">
<p>下一页： <a href="#maintainer_002dmode" rel="next" accesskey="n">维护人员模式</a> ，上一页： <a href="#FAQ" rel="up" accesskey="u">常见问题</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="CVS-and-generated-files"></a>
<h3 class="section">27.1 CVS和生成的文件</h3>

<a name="Background_003a-distributed-generated-Files"></a>
<h4 class="subheading">背景：分布式生成的文件</h4>
<a name="index-generated-files_002c-distributed"></a>
<a name="index-rebuild-rules-1"></a>

<p>使用Autoconf和Automake制作的软件包附带一些生成的文件，例如<samp>configure</samp>要么<samp>Makefile.in</samp> 。这些文件是在开发人员的计算机上生成的，并且已分发，因此最终用户不必安装重建文件所需的维护工具。其他生成的文件（例如Lex扫描仪，Yacc解析器或信息文档）通常以相似的理由分发。
</p>
<p>自动制作输出规则<samp>Makefile</samp>重建这些文件。例如， <code>make</code>会跑<code>autoconf</code>重建<samp>configure</samp>每当<samp>configure.ac</samp>被改变了。这样可以确保开发过程更安全<samp>configure</samp>永远不会过时<samp>configure.ac</samp> 。
</p>
<p>软件包中附带的生成文件是最新的，并且<code>tar</code>保留时间戳，当用户打开包装并生成软件包时，不会触发这些重建规则。
</p>
<a name="Background_003a-CVS-and-Timestamps"></a>
<h4 class="subheading">背景：CVS和时间戳</h4>
<a name="index-timestamps-and-CVS"></a>
<a name="index-CVS-and-timestamps"></a>

<p>除非您使用CVS关键字（在这种情况下必须在提交时更新文件），否则CVS会在“ <samp>cvs commit</samp> '和' <samp>cvs import -d</samp>的操作。
</p>
<p>当您使用“ <samp>cvs checkout</samp> '其时间戳记设置为正在签出的修订版本的时间戳记。
</p>
<p>但是，在<code>cvs update</code> ，文件将具有更新日期，而不是此修订版的原始时间戳。这是为了确保<code>make</code>通知源文件已更新。
</p>
<p>当源文件和生成的文件都保存在CVS下时，这种时间戳转换很麻烦。由于CVS以词法顺序处理文件， <samp>configure.ac</samp>会比<samp>configure</samp>之后<code>cvs update</code>即使两个文件都更新<samp>configure</samp>比...新<samp>configure.ac</samp>当它签入。呼唤<code>make</code>然后将触发虚假的重建<samp>configure</samp> 。
</p>
<a name="Living-with-CVS-in-Autoconfiscated-Projects"></a>
<h4 class="subheading">在自动没收的项目中使用CVS</h4>
<a name="index-CVS-and-generated-files"></a>
<a name="index-generated-files-and-CVS"></a>

<p>基本上有两种氏族之间维护者：那些谁保持在CVS全分布式的文件，包括生成的文件，以及那些谁保持生成的文件<em>了</em> CVS的。</p>
<a name="All-Files-in-CVS"></a>
<h4 class="subsubheading">CVS中的所有文件</h4>

<ul>
<li>CVS存储库包含所有分发的文件，因此您可以确切地知道分发了什么文件，并且可以完全检出任何以前的版本。

</li><li>维护人员可以看到生成的文件如何演变（例如，您可以看到发生了什么情况<samp>Makefile.in</samp>在升级Automake并确保它们看起来确定时）。

</li><li>用户不需要自动工具来构建项目的签出，它的工作原理与发布的tarball一样。

</li><li>如果用户使用<code>cvs update</code>更新他们的副本，而不是<code>cvs checkout</code>要获取一个新的时间戳，时间戳将不准确。一些重建规则将被触发，并尝试运行开发人员工具，例如<code>autoconf</code>要么<code>automake</code> 。

<p>对此类工具的调用都包含在对<code>missing</code>稍后讨论的脚本（请参阅<a href="#maintainer_002dmode">维护者模式</a> ），以便用户将看到有关缺少或过时的工具的更多描述性警告，以及有关如何获取它们的可能建议，而不仅仅是一些“找不到命令”错误，或者（更糟）一些恰好已安装的必需工具的较旧版本发出的模糊消息。
</p>
<p>即使对于缺少维护者专用工具的用户，维护者也有兴趣使他们的软件包可通过CVS结帐生成，而他们可能希望提供帮助脚本（或增强其现有的引导脚本）来修复时间戳。 <code>cvs update</code>或一个<code>git checkout</code> ，以防止虚假重建。如果项目提交了Autotools生成的文件以及生成的文件<samp>.info</samp>文件，这样的脚本可能看起来像这样：</p>
<div class="smallexample">
<pre class="smallexample">#!/bin/sh
# fix-timestamp.sh: prevents useless rebuilds after &quot;cvs update&quot;
sleep 1
# aclocal-generated aclocal.m4 depends on locally-installed
# '.m4' macro files, as well as on 'configure.ac'
touch aclocal.m4
sleep 1
# autoconf-generated configure depends on aclocal.m4 and on
# configure.ac
touch configure
# so does autoheader-generated config.h.in
touch config.h.in
# and all the automake-generated Makefile.in files
touch `find . -name Makefile.in -print`
# finally, the makeinfo-generated '.info' files depend on the
# corresponding '.texi' files
touch doc/*.info
</pre></div>

</li><li>在分布式开发中，开发人员可能会安装不同版本的维护工具。在这种情况下，时间戳丢失引发的重建将导致对生成文件的虚假更改。有几种解决方案：<ul>
<li>所有开发人员都应使用相同的版本，以便重建的文件与CVS中的文件相同。（当您从事的每个项目使用不同的版本时，这将变得很困难。）
</li><li>或者人们在结帐后使用脚本来修复时间戳（GCC人员有这样的脚本）。
</li><li>要么<samp>configure.ac</samp>用途<code>AM_MAINTAINER_MODE</code> ，默认情况下将禁用所有这些重建规则。这将在<a href="#maintainer_002dmode">维护者模式下</a>进一步讨论。
</li></ul>

</li><li>尽管我们专注于虚假的重建，但是相反的情况也可能发生。CVS的时间戳处理功能还可以使您认为过期的文件是最新的。

<p>例如，假设开发人员已修改<samp>Makefile.am</samp>并已重建<samp>Makefile.in</samp> ，然后决定对<samp>Makefile.am</samp>在检入两个文件之前（无需重建） <samp>Makefile.in</samp>以说明更改）。
</p>
<p>最后更改为<samp>Makefile.am</samp>复制<samp>Makefile.in</samp>过时的。由于CVS按字母顺序处理文件，因此当另一个开发人员“ <samp>cvs update</samp>是他或她的树， <samp>Makefile.in</samp>碰巧会比<samp>Makefile.am</samp> 。此其他开发人员不会看到<samp>Makefile.in</samp>过时了。
</p>
</li></ul>

<a name="Generated-Files-out-of-CVS"></a>
<h4 class="subsubheading">从CVS生成文件</h4>

<p>获得CVS和<code>make</code>和平地工作是永远不要将生成的文件存储在CVS中，即不要使用CVS控制的文件<samp>Makefile</samp>目标（也称为<em>派生</em>文件）。
</p>
<p>这样，开发人员就不会因生成文件的更改而烦恼。它们是否具有不同的版本都没关系（当然，假设它们是兼容的）。最后，时间戳不会丢失，对源文件的更改也不会丢失<samp>Makefile.am</samp> / <samp>Makefile.in</samp>前面讨论的示例。
</p>
<p>缺点是CVS存储库不是所分发内容的精确副本，并且用户现在需要先安装各种开发工具（甚至是特定版本），然后才能构建结帐功能。但是，毕竟，CVS的工作是版本控制，而不是分发。
</p>
<p>允许开发人员使用其工具的不同版本还可以在分布式开发过程中隐藏错误。实际上，开发人员将使用（因此测试）他们自己的生成的文件，而不是将实际发布的生成的文件。准备压缩包的开发人员可能正在使用该工具产生虚假输出的版本（例如，不可移植的C文件），如果其他开发人员未使用自己的版本，可能会注意到这一点。
</p>
<a name="Third_002dparty-Files"></a>
<h4 class="subheading">第三方档案</h4>
<a name="index-CVS-and-third_002dparty-files"></a>
<a name="index-third_002dparty-files-and-CVS"></a>

<p>此处未讨论的另一类文件（因为它们不会引起时间戳问题）是与软件包一起提供但在其他位置维护的文件。例如，诸如<code>gettextize</code>和<code>autopoint</code> （来自Gettext）或<code>libtoolize</code> （来自Libtool），将安装或更新软件包中的文件。
</p>
<p>这些文件，无论是否保存在CVS中，都引起了有关开发人员工具之间版本不匹配的类似担忧。Gettext手册包含有关此内容的部分，请参见<cite>GNU gettext工具中的</cite> <a href="http://www.gnu.org/software/gettext/manual/gettext.html#CVS-Issues">与CVS集成</a> 。
</p>
<hr>
<a name="maintainer_002dmode"></a>
<div class="header">
<p>下一篇： <a href="#Wildcards" rel="next" accesskey="n">通配符</a> ，上一篇： <a href="#CVS" rel="prev" accesskey="p">CVS</a> ，上一篇： <a href="#FAQ" rel="up" accesskey="u">常见问题</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="missing-and-AM_005fMAINTAINER_005fMODE"></a>
<h3 class="section">27.2 <code>missing</code>和<code>AM_MAINTAINER_MODE</code></h3>

<a name="missing"></a>
<h4 class="subheading"><code>missing</code></h4>
<a name="index-missing_002c-purpose"></a>

<p>的<code>missing</code>脚本是几种维护工具的包装，旨在警告用户是否需要维护工具但缺少维护工具。典型的维护工具是<code>autoconf</code> ， <code>automake</code> ， <code>bison</code>等由于这些工具生成的文件与软件包的其他来源一起提供，因此在用户构建期间不需要使用这些工具，并且不检查它们的位置。 <samp>configure</samp> 。
</p>
<p>但是，如果由于某种原因触发了重建规则并涉及缺少的工具， <code>missing</code>将会注意到它并警告用户，甚至建议如何获得这种工具（至少在它是众所周知的情况下，例如<code>makeinfo</code>要么<code>bison</code> ）。这不仅比重新生成规则喷出简短的错误消息（例如“ <samp>sh: <var>tool</var>: command not found</samp> '。同样， <code>missing</code>会在检测到尝试使用的维护工具似乎过旧时向用户发出警告（警告您，正确诊断此问题通常比检测缺少的工具更困难，并且需要工具本身的配合，因此无法始终正常工作） 。
</p>
<p>如果已安装所需的工具， <code>missing</code>将运行它，并且不会在失败后继续尝试。在开发过程中这是正确的：开发人员喜欢修复失败。但是，如果虚假触发了重建规则，则缺少维护工具或维护工具太旧的用户可能会收到错误消息，从而停止构建。这种让构建继续进行的失败是该问题的论点之一。 <code>AM_MAINTAINER_MODE</code>拥护者。
</p>
<a name="AM_005fMAINTAINER_005fMODE"></a>
<h4 class="subheading"><code>AM_MAINTAINER_MODE</code></h4>
<a name="index-AM_005fMAINTAINER_005fMODE_002c-purpose"></a>
<a name="index-AM_005fMAINTAINER_005fMODE-1"></a>

<p><code>AM_MAINTAINER_MODE</code>允许您选择是启用还是禁用所谓的“重建规则”。用<code>AM_MAINTAINER_MODE([enable])</code> ，默认情况下启用它们，否则默认情况下禁用它们。在后一种情况下，如果您有<code>AM_MAINTAINER_MODE</code>在<samp>configure.ac</samp> ，然后运行<samp>./configure && make</samp> '， 然后<code>make</code>绝不会尝试重建<samp>configure</samp> ， <samp>Makefile.in</samp> ，Lex或Yacc输出等。即，这将禁用通常分发的文件的构建规则，并且用户通常不必更新。
</p>
<p>用户可以通过传递“ <samp>--enable-maintainer-mode</samp> ' 要么 ' <samp>--disable-maintainer-mode</samp> ' 至<code>configure</code> 。
</p>
<p>人们使用<code>AM_MAINTAINER_MODE</code>要么是因为他们不希望其用户（或他们自己）因时间戳的丢失而烦恼（请参阅<a href="#CVS">CVS</a> ），要么是因为他们根本无法承受重建规则，而是更喜欢明确地运行维护工具。
</p>
<p><code>AM_MAINTAINER_MODE</code>还允许您有条件地禁用一些自定义构建规则。一些开发人员使用此功能来禁用需要用户可能没有的奇特工具的规则。
</p>
<p>几年前，弗朗索瓦·皮纳德（FrançoisPinard）指出了一些反对这一观点的论点<code>AM_MAINTAINER_MODE</code>宏。其中大多数与不安全感有关。通过删除依赖关系，您将获得不可靠的内部版本：对源文件的更改不会对生成的文件产生任何影响，并且在不引起注意的情况下可能会造成很大的混乱。他补充说，不应将安全性保留给维护者（ <samp>--enable-maintainer-mode</samp>相反）。如果一个用户必须修改一个<samp>Makefile.am</samp> ，然后<samp>Makefile.in</samp>应该更新或警告输出（这是Automake使用的<code>missing</code> ），但您想要的最后一件事是什么也没发生，并且用户没有注意到（这是当通过以下方式禁用重建规则时发生的情况） <code>AM_MAINTAINER_MODE</code> ）。
</p>
<p>Jim Meyering，发明人<code>AM_MAINTAINER_MODE</code>宏因弗朗索瓦的论点而摇摆不定<code>AM_MAINTAINER_MODE</code>在他所有的包裹中。
</p>
<p>还有很多人继续使用<code>AM_MAINTAINER_MODE</code> ，因为它可以帮助他们在所有文件都受版本控制的项目中工作，并且<code>missing</code>如果您使用的工具版本不正确，还不够。
</p>

<hr>
<a name="Wildcards"></a>
<div class="header">
<p>下一篇： <a href="#Limitations-on-File-Names" rel="next" accesskey="n">文件名的限制，上</a>一篇： <a href="#maintainer_002dmode" rel="prev" accesskey="p">维护者模式</a> ，上一篇： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Why-doesn_0027t-Automake-support-wildcards_003f"></a>
<h3 class="section">27.3为什么Automake不支持通配符？</h3>
<a name="index-wildcards"></a>

<p>开发人员很懒。他们经常想在其中使用通配符<samp>Makefile.am</samp> s，这样他们就不需要记住更新<samp>Makefile.am</samp>每次他们添加，删除或重命名文件时。
</p>
<p>有几个反对意见：</p><ul>
<li>使用CVS（或类似工具）时，开发人员需要记住他们必须运行“ <samp>cvs add</samp> ' 要么 ' <samp>cvs rm</samp> '反正。更新中<samp>Makefile.am</samp>因此很快就变成了反射。

<p>相反，如果您的应用程序由于您忘记在其中添加文件而无法编译， <samp>Makefile.am</samp> ，它将帮助您记住“ <samp>cvs add</samp> '它。
</p>
</li><li>使用通配符使错误分配文件变得容易。例如，开发人员正在尝试的某些代码（例如测试用例）不应包含在发行版中。

</li><li>使用通配符很容易会误删一些文件。例如，一个开发人员创建了一个新文件，在许多地方都使用了它，却忘记了提交。然后，另一位开发人员签出了未完成的项目，并能够运行“ <samp>make dist</samp>成功，即使文件丢失。通过列出文件， <samp>make dist</samp> ' <em>会</em>抱怨。

</li><li>通配符不可移植到某些非GNU <code>make</code>实现，例如，NetBSD <code>make</code>不会扩展“ <samp>*</samp>目标的先决条件。

</li><li>最后，真的很难<em>忘记</em>将文件添加到<samp>Makefile.am</samp> ：未列出的文件<samp>Makefile.am</samp>尚未编译或安装，因此您甚至无法测试它们。
</li></ul>

<p>不过，这些都是哲学上的异议，因此您可能会不同意，或者在通配符中找到足够的价值来消除所有这些。在开始编写针对Automake的补丁以教授通配符之前，让我们看一下主要的技术问题：可移植性。
</p>
<p>虽然“ <samp>$(wildcard ...)</samp>与GNU一起使用<code>make</code> ，它不能移植到其他<code>make</code>实现。
</p>
<p>Automake可以支持的唯一方法<code>$(wildcard ...)</code>是通过扩展<code>$(wildcard ...)</code>什么时候<code>automake</code>运行。所结果的<samp>Makefile.in</samp>可以移植，因为它们会列出所有文件而不使用' <samp>$(wildcard ...)</samp> '。但是，这意味着开发人员需要记住运行<code>automake</code>每次添加，删除或重命名文件。
</p>
<p>与编辑相比<samp>Makefile.am</samp> ，这是非常小的收益。当然，键入“ <samp>automake; make</samp> '比键入' <samp>emacs Makefile.am; make</samp> '。但是没有人费心编写一个补丁来增加对该语法的支持。有些人使用脚本来生成文件列表<samp>Makefile.am</samp>或单独<samp>Makefile</samp>碎片。
</p>
<p>即使您不关心可移植性，也很想使用“ <samp>$(wildcard ...)</samp> '无论如何，因为仅以GNU Make为目标，所以您应该知道在许多地方Automake需要确切地知道应该处理哪些文件。由于Automake不知道如何扩展“ <samp>$(wildcard ...)</samp> '，则不能在这些地方使用它。' <samp>$(wildcard ...)</samp> '是可比的黑匣子<code>AC_SUBST</code>关于Automake的ed变量。
</p>
<p>您会收到有关“ <samp>$(wildcard ...</samp> '）使用<samp>-Wportability</samp>旗。
</p>
<hr>
<a name="Limitations-on-File-Names"></a>
<div class="header">
<p>下一个： <a href="#Errors-with-distclean" rel="next" accesskey="n">distclean错误</a> ，上一个： <a href="#Wildcards" rel="prev" accesskey="p">通配符</a> ，上： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Limitations-on-File-Names-1"></a>
<h3 class="section">27.4文件名限制</h3>
<a name="index-file-names_002c-limitations-on"></a>

<p>Automake尝试支持所有类型的文件名，即使是包含不寻常字符或异常长的文件名。但是，底层操作系统和工具施加了一些限制。
</p>
<p>大多数操作系统禁止在文件名中使用空字节，并保留' <samp>/</samp> '作为目录分隔符。而且，它们要求文件名必须针对用户的语言环境进行正确编码。自动制作受这些限制。
</p>
<p>可移植程序包应将自己限制为POSIX文件名。这些可以包含ASCII字母和数字，“ <samp>_</samp> '，' <samp>.</samp> '和' <samp>-</samp> '。文件名由用'分隔的组件组成<samp>/</samp> '。文件名组件不能以“ <samp>-</samp> '。
</p>
<p>可移植POSIX文件名不能包含超过14字节限制的组件，但是如今，通常可以假定更宽泛的XOPEN限制为255字节。POSIX将文件名限制为255个字节（XOPEN允许1023个字节），但是您可能希望将源tarball限制为99个字节的文件名，以避免与旧版本的互操作性问题<code>tar</code> 。
</p>
<p>如果您违反这些规则（例如，通过在文件名中使用非ASCII字符或使用冗长的文件名），则由于与Automake不相关的原因，安装程序可能会出现问题。但是，如果这与您无关，则应了解Automake本身施加的限制。这些限制是不可取的，但是其中一些似乎是基础工具（如Autoconf，Make，M4和Shell）固有的。它们分为三类：安装目录，构建目录和文件名。
</p>
<p>以下字符：</p>
<div class="example">
<pre class="example"><span class="roman">newline</span> &quot; # $ ' `
</pre></div>

<p>不应出现在安装目录的名称中。例如， <code>configure</code>的<samp>--prefix</samp>选项不应包含这些字符。
</p>
<p>构建目录与安装目录具有相同的限制，并且不应包含以下字符：</p>
<div class="example">
<pre class="example">&amp; @ \
</pre></div>

<p>例如，包含源文件的目录的全名不应包含这些字符。
</p>
<p>源文件和安装文件名，例如<samp>main.c</samp>受到进一步限制：它们应符合上述POSIX / XOPEN规则。此外，如果您打算移植到非POSIX环境，则应避免仅在大小写不同的情况下使用文件名（例如， <samp>makefile</samp>和<samp>Makefile</samp> ）。如今，不再需要担心DOS文件系统的8.3限制。
</p>
<hr>
<a name="Errors-with-distclean"></a>
<div class="header">
<p>下一篇： <a href="#Flag-Variables-Ordering" rel="next" accesskey="n">标记变量排序</a> ，上一篇： <a href="#Limitations-on-File-Names" rel="prev" accesskey="p">文件名限制</a> ，上一篇： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Errors-with-distclean-1"></a>
<h3 class="section">27.5 distclean错误</h3>
<a name="index-distclean_002c-diagnostic"></a>
<a name="index-make-distclean_002c-diagnostic"></a>
<a name="index-dependencies-and-distributed-files"></a>
<a name="index-distclean-2"></a>

<p>这是您在运行“ <samp>make distcheck</samp> '。
</p>
<p>如<a href="#Checking-the-Distribution">检查发行版中所述</a> ， <samp>make distcheck</samp> '尝试构建并检查您的程序包中是否存在此类错误。
</p>
<p>' <samp>make distcheck</samp> '将执行<code>VPATH</code>构建您的软件包（请参见<a href="#VPATH-Builds">VPATH Builds</a> ），然后调用“ <samp>make distclean</samp> '。在“ <samp>make distclean</samp>在此错误之后列出了已运行的内容。
</p>
<p>该诊断实际上涵盖了两种错误：</p>
<ul>
<li>distclean忘记的文件；</li><li>错误地重建的分布式文件。
</li></ul>

<p>以前的剩余文件没有分发，因此解决方法是将它们标记为要清理（请参见<a href="#Clean">Clean</a> ），这很明显，不需要更多说明。
</p>
<p>后一个错误并不总是易于理解和修复，因此让我们继续一个示例。假设我们的软件包包含一个我们要使用以下内容构建手册页的程序<code>help2man</code> 。GNU <code>help2man</code>从<samp>--help</samp>和<samp>--version</samp>其他命令的输出（请参阅<cite>《 Help2man手册》中的</cite> <a href="http://www.gnu.org/software/help2man/help2man.html#Top">概述</a> ）。因为我们不想强迫我们的用户安装<code>help2man</code> ，我们决定使用以下设置来分发生成的手册页。
</p>
<div class="example">
<pre class="example"># This Makefile.am is bogus.
bin_PROGRAMS = foo
foo_SOURCES = foo.c
dist_man_MANS = foo.1

foo.1: foo$(EXEEXT)
        help2man --output=foo.1 ./foo$(EXEEXT)
</pre></div>

<p>这将有效地分发手册页。但是， <samp>make distcheck</samp> '将失败，并显示：</p>
<div class="example">
<pre class="example">ERROR: files left in build directory after distclean:
./foo.1
</pre></div>

<p>为何是<samp>foo.1</samp>重建？因为尽管分布<samp>foo.1</samp>取决于非分布式构建文件： <samp>foo$(EXEEXT)</samp> 。 <samp>foo$(EXEEXT)</samp>是由用户构建的，因此它总是看起来比分布式的要新<samp>foo.1</samp> 。
</p>
<p>' <samp>make distcheck</samp>在我们的包裹中发现不一致之处。我们的目的是分发<samp>foo.1</samp>因此用户无需安装<code>help2man</code> ，但是由于此规则会导致始终重建该文件，因此用户<em>确实</em>需要<code>help2man</code> 。我们要么确保<samp>foo.1</samp>不能由用户重建，或者分发毫无意义<samp>foo.1</samp> 。
</p>
<p>更普遍的是，规则是分布式文件永远不应依赖于非分布式构建文件。如果分发生成的内容，请分发其来源。
</p>
<p>解决上述示例的一种方法，同时仍在分发<samp>foo.1</samp>是不依赖<samp>foo$(EXEEXT)</samp> 。例如，假设<code>foo --version</code>和<code>foo --help</code>除非没有改变<samp>foo.c</samp>要么<samp>configure.ac</samp>更改，我们可以编写以下内容<samp>Makefile.am</samp> ：</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES = foo.c
dist_man_MANS = foo.1

foo.1: foo.c $(top_srcdir)/configure.ac
        $(MAKE) $(AM_MAKEFLAGS) foo$(EXEEXT)
        help2man --output=foo.1 ./foo$(EXEEXT)
</pre></div>

<p>这条路， <samp>foo.1</samp>不会每次都得到重建<samp>foo$(EXEEXT)</samp>变化。的<code>make</code>电话确保<samp>foo$(EXEEXT)</samp>是最新的<code>help2man</code> 。确保这一点的另一种方法是对二进制文件和手册页使用单独的目录，并设置<code>SUBDIRS</code>这样就可以在手册页之前建立二进制文件。
</p>
<p>我们也可以决定不分发<samp>foo.1</samp> 。在这种情况下，可以<samp>foo.1</samp>依赖于<samp>foo$(EXEEXT)</samp> ，因为两者都必须重建。但是，以交叉编译的方式构建软件包是不可能的，因为<samp>foo.1</samp>涉及<em>执行</em> <samp>foo$(EXEEXT)</samp> 。
</p>
<p>常见此类错误的另一种情况是，使用软件包构建的工具构建分布式文件时。模式类似于：</p>
<div class="example">
<pre class="example">distributed-file: built-tools distributed-sources
        build-command
</pre></div>

<p>应该更改为</p>
<div class="example">
<pre class="example">distributed-file: distributed-sources
        $(MAKE) $(AM_MAKEFLAGS) built-tools
        build-command
</pre></div>

<p>或者您可以选择不分发<samp>distributed-file</samp> ，如果交叉编译没有关系。
</p>
<p>通过这些示例得出的观点值得总结：</p>
<table class="cartouche" border="1"><tbody><tr><td>
<ul>
<li>分布式文件永远不应依赖于非分布式构建文件。
</li><li>分发的文件应随其所有依赖关系一起分发。
</li><li>如果文件<em>要</em>由用户进行重建，那么在分配它没有任何意义。
</li></ul>
</td></tr></tbody></table>

<a name="index-distcleancheck_005flistfiles-1"></a>
<p>在绝望的情况下，总是可以通过设置禁用此检查<code>distcleancheck_listfiles</code>如<a href="#Checking-the-Distribution">检查发行</a>记录中<a href="#Checking-the-Distribution">所述</a> 。确保您了解“ <samp>make distcheck</samp>在您这样做之前会抱怨。 <code>distcleancheck_listfiles</code>是<em>隐藏</em>错误而不是修复错误的一种方法。您总是可以做得更好。
</p>
<hr>
<a name="Flag-Variables-Ordering"></a>
<div class="header">
<p>下一个： <a href="#Renamed-Objects" rel="next" accesskey="n">重命名对象</a> ，上一个： <a href="#Errors-with-distclean" rel="prev" accesskey="p">distclean错误</a> ，上一个： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Flag-Variables-Ordering-1"></a>
<h3 class="section">27.6标志变量排序</h3>
<a name="index-Ordering-flag-variables"></a>
<a name="index-Flag-variables_002c-ordering"></a>

<div class="display">
<pre class="display">What is the difference between <code>AM_CFLAGS</code>, <code>CFLAGS</code>, and
<code>mumble_CFLAGS</code>?
</pre></div>

<div class="display">
<pre class="display">Why does <code>automake</code> output <code>CPPFLAGS</code> after
<code>AM_CPPFLAGS</code> on compile lines?  Shouldn&rsquo;t it be the converse?
</pre></div>

<div class="display">
<pre class="display">My <samp>configure</samp> adds some warning flags into <code>CXXFLAGS</code>.  In
one <samp>Makefile.am</samp> I would like to append a new flag, however if I
put the flag into <code>AM_CXXFLAGS</code> it is prepended to the other
flags, not appended.
</pre></div>

<a name="Compile-Flag-Variables"></a>
<h4 class="subheading">编译标志变量</h4>
<a name="index-Flag-Variables_002c-Ordering"></a>
<a name="index-Compile-Flag-Variables"></a>
<a name="index-AM_005fCCASFLAGS-and-CCASFLAGS"></a>
<a name="index-AM_005fCFLAGS-and-CFLAGS"></a>
<a name="index-AM_005fCPPFLAGS-and-CPPFLAGS"></a>
<a name="index-AM_005fCXXFLAGS-and-CXXFLAGS"></a>
<a name="index-AM_005fFCFLAGS-and-FCFLAGS"></a>
<a name="index-AM_005fFFLAGS-and-FFLAGS"></a>
<a name="index-AM_005fGCJFLAGS-and-GCJFLAGS"></a>
<a name="index-AM_005fLDFLAGS-and-LDFLAGS"></a>
<a name="index-AM_005fLFLAGS-and-LFLAGS"></a>
<a name="index-AM_005fLIBTOOLFLAGS-and-LIBTOOLFLAGS"></a>
<a name="index-AM_005fOBJCFLAGS-and-OBJCFLAGS"></a>
<a name="index-AM_005fOBJCXXFLAGS-and-OBJXXCFLAGS"></a>
<a name="index-AM_005fRFLAGS-and-RFLAGS"></a>
<a name="index-AM_005fUPCFLAGS-and-UPCFLAGS"></a>
<a name="index-AM_005fYFLAGS-and-YFLAGS"></a>
<a name="index-CCASFLAGS-and-AM_005fCCASFLAGS"></a>
<a name="index-CFLAGS-and-AM_005fCFLAGS"></a>
<a name="index-CPPFLAGS-and-AM_005fCPPFLAGS"></a>
<a name="index-CXXFLAGS-and-AM_005fCXXFLAGS"></a>
<a name="index-FCFLAGS-and-AM_005fFCFLAGS"></a>
<a name="index-FFLAGS-and-AM_005fFFLAGS"></a>
<a name="index-GCJFLAGS-and-AM_005fGCJFLAGS"></a>
<a name="index-LDFLAGS-and-AM_005fLDFLAGS"></a>
<a name="index-LFLAGS-and-AM_005fLFLAGS"></a>
<a name="index-LIBTOOLFLAGS-and-AM_005fLIBTOOLFLAGS"></a>
<a name="index-OBJCFLAGS-and-AM_005fOBJCFLAGS"></a>
<a name="index-OBJCXXFLAGS-and-AM_005fOBJCXXFLAGS"></a>
<a name="index-RFLAGS-and-AM_005fRFLAGS"></a>
<a name="index-UPCFLAGS-and-AM_005fUPCFLAGS"></a>
<a name="index-YFLAGS-and-AM_005fYFLAGS"></a>

<p>本节试图回答以上所有问题。我们将主要讨论<code>CPPFLAGS</code>在我们的示例中，但实际上答案适用于Automake中使用的所有编译标志： <code>CCASFLAGS</code> ， <code>CFLAGS</code> ， <code>CPPFLAGS</code> ， <code>CXXFLAGS</code> ， <code>FCFLAGS</code> ， <code>FFLAGS</code> ， <code>GCJFLAGS</code> ， <code>LDFLAGS</code> ， <code>LFLAGS</code> ， <code>LIBTOOLFLAGS</code> ， <code>OBJCFLAGS</code> ， <code>OBJCXXFLAGS</code> ， <code>RFLAGS</code> ， <code>UPCFLAGS</code>和<code>YFLAGS</code> 。
</p>
<p><code>CPPFLAGS</code> ， <code>AM_CPPFLAGS</code>和<code>mumble_CPPFLAGS</code>三个变量可用于将标志传递给C预处理器（实际上，这些变量也用于其他语言，例如C ++或预处理的Fortran）。 <code>CPPFLAGS</code>是用户变量（请参阅<a href="#User-Variables">用户变量</a> ）， <code>AM_CPPFLAGS</code>是Automake变量，并且<code>mumble_CPPFLAGS</code>是特定于<code>mumble</code>目标（我们将其称为每个目标变量，请参阅“ <a href="#Program-and-Library-Variables">程序和库变量”</a> ）。
</p>
<p>在编译C源文件时，Automake始终使用这些变量中的两个。编译目标文件时<code>mumble</code>目标，第一个变量将是<code>mumble_CPPFLAGS</code>如果已定义，或者<code>AM_CPPFLAGS</code>除此以外。第二个变量总是<code>CPPFLAGS</code> 。
</p>
<p>在以下示例中，</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo bar
foo_SOURCES = xyz.c
bar_SOURCES = main.c
foo_CPPFLAGS = -DFOO
AM_CPPFLAGS = -DBAZ
</pre></div>

<p><samp>xyz.o</samp>将使用' <samp>$(foo_CPPFLAGS) $(CPPFLAGS)</samp> '，（因为<samp>xyz.o</samp>是<code>foo</code>目标），而<samp>main.o</samp>将使用' <samp>$(AM_CPPFLAGS) $(CPPFLAGS)</samp> '（因为没有针对目标的按目标变量<code>bar</code> ）。
</p>
<p>和...之间的不同<code>mumble_CPPFLAGS</code>和<code>AM_CPPFLAGS</code>足够清楚，让我们专注于<code>CPPFLAGS</code> 。<code>CPPFLAGS</code>是用户变量，即用户有权修改以编译程序包的变量。与其他变量一样，该变量记录在“ <samp>configure --help</samp> '。
</p>
<p>例如，某人需要添加<samp>/home/my/usr/include</samp>到C编译器的搜索路径将使用</p>
<div class="example">
<pre class="example">./configure CPPFLAGS='-I /home/my/usr/include'
</pre></div>

<p>并且此标志将传播到所有的编译规则<samp>Makefile</samp> s。
</p>
<p>在以下位置覆盖用户变量也很常见<code>make</code> -时间。许多安装程序都这样做<code>prefix</code> ，但这对编译器标志也很有用。例如，如果在调试C ++项目时需要在一个特定的目标文件中禁用优化，则可以运行以下命令</p>
<div class="example">
<pre class="example">rm file.o
make CXXFLAGS=-O0 file.o
make
</pre></div>

<p>原因 ' <samp>$(CPPFLAGS)</samp> “出现在”之后<samp>$(AM_CPPFLAGS)</samp> ' 要么 ' <samp>$(mumble_CPPFLAGS)</samp>编译命令中的'是用户应该始终拥有最后发言权。如果您在查看“ <samp>CXXFLAGS=-O0</samp> '，它应取代其他任何来自<code>AM_CXXFLAGS</code>要么<code>mumble_CXXFLAGS</code> （当然，这会取代之前的值<code>CXXFLAGS</code> ）。
</p>
<p>您永远不要重新定义用户变量，例如<code>CPPFLAGS</code>在<samp>Makefile.am</samp> 。使用 ' <samp>automake -Woverride</samp>诊断此类错误。甚至像</p>
<div class="example">
<pre class="example">CPPFLAGS = -DDATADIR=\&quot;$(datadir)\&quot; @CPPFLAGS@
</pre></div>

<p>是错误的。虽然这保留了<samp>configure</samp>的价值<code>CPPFLAGS</code> ，的定义<code>DATADIR</code>如果用户尝试覆盖将消失<code>CPPFLAGS</code>来自<code>make</code>命令行。
</p>
<div class="example">
<pre class="example">AM_CPPFLAGS = -DDATADIR=\&quot;$(datadir)\&quot;
</pre></div>

<p>如果不使用每个目标标志，则此处仅需要这些。
</p>
<p>您不应该在这些用户变量中添加选项<samp>configure</samp>出于相同的原因。有时，您需要修改这些变量以执行测试，但之后应重置它们的值。相反，可以修改“ <samp>AM_</samp> '内的变量<samp>configure</samp>如果你<code>AC_SUBST</code>它们，但是很少需要这样做，除非您真的想更改' <samp>AM_</samp>所有变量<samp>Makefile</samp> s。
</p>
<p>我们建议您在单独的变量中定义额外的标志。例如，您可以编写一个Autoconf宏，该宏为C编译器计算一组警告选项，并且<code>AC_SUBST</code>他们在<code>WARNINGCFLAGS</code> ;您可能还具有一个Autoconf宏，该宏确定应使用哪个编译器和哪些链接器标志与库链接<samp>libfoo</samp>和<code>AC_SUBST</code>这些在<code>LIBFOOCFLAGS</code>和<code>LIBFOOLDFLAGS</code> 。然后， <samp>Makefile.am</samp>可以如下使用这些变量：</p>
<div class="example">
<pre class="example">AM_CFLAGS = $(WARNINGCFLAGS)
bin_PROGRAMS = prog1 prog2
prog1_SOURCES = &hellip;
prog2_SOURCES = &hellip;
prog2_CFLAGS = $(LIBFOOCFLAGS) $(AM_CFLAGS)
prog2_LDFLAGS = $(LIBFOOLDFLAGS)
</pre></div>

<p>在此示例中，两个程序都将用标记替换为' <samp>$(WARNINGCFLAGS)</samp> '和<code>prog2</code>还将使用链接所需的标志进行编译<samp>libfoo</samp> 。
</p>
<p>注意清单<code>AM_CFLAGS</code>在每个目标中<code>CFLAGS</code>变量是确保<code>AM_CFLAGS</code>适用于<samp>Makefile.in</samp> 。
</p>
<p>使用这样的变量可以使您完全控制标志的顺序。例如，如果$（WARNINGCFLAGS）中有一个标志要为特定目标取反，则可以使用' <samp>prog1_CFLAGS = $(AM_CFLAGS) -no-flag</samp> '。如果所有这些标志都已强制附加到<code>CFLAGS</code> ，将无法禁用一个标志。将用户变量留给用户的另一个原因。
</p>
<p>最后，我们避免命名示例的变量<code>LIBFOO_LDFLAGS</code> （带下划线），因为这会使Automake认为这实际上是每个目标变量（例如<code>mumble_LDFLAGS</code> ）对于一些未声明的<code>LIBFOO</code>目标。
</p>
<a name="Other-Variables"></a>
<h4 class="subheading">其他变量</h4>

<p>Automake中还有其他遵循类似原理的变量，以允许用户选择。例如，Texinfo规则（请参阅<a href="#Texinfo">Texinfo</a> ）使用<code>MAKEINFOFLAGS</code>和<code>AM_MAKEINFOFLAGS</code> 。同样，DejaGnu测试（请参阅<a href="#DejaGnu-Tests">DejaGnu Tests</a> ）使用<code>RUNTESTDEFAULTFLAGS</code>和<code>AM_RUNTESTDEFAULTFLAGS</code> 。标签和ctags规则（请参阅<a href="#Tags">标签</a> ）使用<code>ETAGSFLAGS</code> ， <code>AM_ETAGSFLAGS</code> ， <code>CTAGSFLAGS</code>和<code>AM_CTAGSFLAGS</code> 。Java规则（请参阅<a href="#Java">Java</a> ）的使用<code>JAVACFLAGS</code>和<code>AM_JAVACFLAGS</code> 。这些规则均不支持按目标标记（尚未）。
</p>
<p>在某种程度上，甚至<code>AM_MAKEFLAGS</code> （请参阅<a href="#Subdirectories">子目录</a> ）遵循此命名方案。轻微的区别是<code>MAKEFLAGS</code>传递给子<code>make</code>由隐含地<code>make</code>本身。
</p>
<p><code>ARFLAGS</code> （请参阅<a href="#A-Library">A Library</a> ）通常由Automake定义，并且两者都不<code>AM_</code>也不是每个目标的堂兄。
</p>
<p>最后，您不应该认为每个目标变量的存在就意味着存在一个<code>AM_</code>变量或用户变量。例如， <code>mumble_LDADD</code>每个目标变量覆盖整个makefile范围<code>LDADD</code>变量（不是用户变量），以及<code>mumble_LIBADD</code>仅作为每个目标变量存在。请参阅<a href="#Program-and-Library-Variables">程序和库变量</a> 。
</p>

<hr>
<a name="Renamed-Objects"></a>
<div class="header">
<p>下一篇： <a href="#Per_002dObject-Flags" rel="next" accesskey="n">基于对象的标志</a> ，上一篇： <a href="#Flag-Variables-Ordering" rel="prev" accesskey="p">标志变量的排序</a> ，上一篇： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Why-are-object-files-sometimes-renamed_003f"></a>
<h3 class="section">27.7为什么有时会重命名目标文件？</h3>

<p>当使用每个目标的编译标志时，会发生这种情况。需要重命名目标文件，以防它们与从相同来源但使用不同标志编译的目标文件发生冲突。考虑以下示例。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = true false
true_SOURCES = generic.c
true_CPPFLAGS = -DEXIT_CODE=0
false_SOURCES = generic.c
false_CPPFLAGS = -DEXIT_CODE=1
</pre></div>

<p>显然，这两个程序是从相同的源构建的，但是如果它们共享相同的对象，那将是不好的，因为<samp>generic.o</samp>不能同时使用' <samp>-DEXIT_CODE=0</samp> ' <em>和</em> ' <samp>-DEXIT_CODE=1</samp> '。因此<code>automake</code>输出规则以构建两个不同的对象： <samp>true-generic.o</samp>和<samp>false-generic.o</samp> 。
</p>
<p><code>automake</code>实际上并不会查看是否共享源文件来决定是否必须重命名对象。一旦看到使用的每个目标编译标志，它将立即重命名目标的所有对象。
</p>
<p>不使用每个目标的编译标志时，可以共享目标文件。例如， <samp>true</samp>和<samp>false</samp>都会使用<samp>version.o</samp>在以下示例中。
</p>
<div class="example">
<pre class="example">AM_CPPFLAGS = -DVERSION=1.0
bin_PROGRAMS = true false
true_SOURCES = true.c version.c
false_SOURCES = false.c version.c
</pre></div>

<p>请注意，对象的重命名也会受到<code>_SHORTNAME</code>变量（请参阅<a href="#Program-and-Library-Variables">程序和库变量</a> ）。
</p>

<hr>
<a name="Per_002dObject-Flags"></a>
<div class="header">
<p>下一个： <a href="#Multiple-Outputs" rel="next" accesskey="n">多个输出</a> ，上一个： <a href="#Renamed-Objects" rel="prev" accesskey="p">重命名对象</a> ，上一个： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Per_002dObject-Flags-Emulation"></a>
<h3 class="section">27.8每对象标志仿真</h3>
<a name="index-Per_002dobject-flags_002c-emulated"></a>

<div class="display">
<pre class="display">One of my source files needs to be compiled with different flags.  How
do I do?
</pre></div>

<p>Automake支持按程序和按库编译标志（请参阅<a href="#Program-and-Library-Variables">程序和库变量</a>以及<a href="#Flag-Variables-Ordering">标志变量排序</a> ）。这样，您可以定义适用于为目标编译的所有文件的编译标志。例如，在</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES = foo.c foo.h bar.c bar.h main.c
foo_CFLAGS = -some -flags
</pre></div>

<p><samp>foo-foo.o</samp> ， <samp>foo-bar.o</samp>和<samp>foo-main.o</samp>将全部用' <samp>-some -flags</samp> '。（如果您想知道这些对象文件的名称，请参阅<a href="#Renamed-Objects">重命名对象</a> 。）注意<code>foo_CFLAGS</code>编译<em>程序</em>的所有C源文件时给人的标志来使用<code>foo</code> ，这与<samp>foo.c</samp>要么<samp>foo-foo.o</samp>特别。
</p>
<p>如果<samp>foo.c</samp>需要编译成<samp>foo.o</samp>使用一些特定的标志，其他文件都不需要吗？显然，每个程序标志在这里不直接适用。每个对象的标志都是可以预期的，例如，仅在创建时才使用的标志<samp>foo-foo.o</samp> 。Automake不支持此功能，但是使用仅包含该对象的库并使用每个库的标志编译该库很容易进行模拟。
</p>
<div class="example">
<pre class="example">bin_PROGRAMS = foo
foo_SOURCES = bar.c bar.h main.c
foo_CFLAGS = -some -flags
foo_LDADD = libfoo.a
noinst_LIBRARIES = libfoo.a
libfoo_a_SOURCES = foo.c foo.h
libfoo_a_CFLAGS = -some -other -flags
</pre></div>

<p>这里<samp>foo-bar.o</samp>和<samp>foo-main.o</samp>将全部用' <samp>-some -flags</samp> '，而<samp>libfoo_a-foo.o</samp>将使用' <samp>-some -other -flags</samp> '。最终，所有三个对象都将链接到表单<samp>foo</samp> 。
</p>
<p>也可以使用Libtool便利程序库来实现此技巧，例如“ <samp>noinst_LTLIBRARIES = libfoo.la</samp> '（请参阅<a href="#Libtool-Convenience-Libraries">Libtool便利性图书馆</a> ）。
</p>
<p>实施每个对象标志的另一个诱人想法是重写编译规则<code>automake</code>将为这些文件输出。Automake不会为您已定义的目标定义规则，因此您可以考虑定义“ <samp>foo-foo.o: foo.c</samp>统治自己。我们建议不要这样做，因为这容易出错。例如，如果您在第一个示例中添加这样的规则，它将打破您决定删除的日期<code>foo_CFLAGS</code> （因为<samp>foo.c</samp>然后将被编译为<samp>foo.o</samp>代替<samp>foo-foo.o</samp> ，请参阅“ <a href="#Renamed-Objects">重命名对象”</a> ）。另外为了支持依赖性跟踪，这两个<samp>.o</samp> / <samp>.obj</samp>扩展，以及编译中涉及的所有其他标志变量，您最终将修改以前由<code>automake</code>该文件。如果新版本的Automake生成了不同的规则，则需要手动更新您的副本。
</p>
<hr>
<a name="Multiple-Outputs"></a>
<div class="header">
<p>下一篇： <a href="#Hard_002dCoded-Install-Paths" rel="next" accesskey="n">硬编码的安装路径</a> ，上一篇： <a href="#Per_002dObject-Flags" rel="prev" accesskey="p">每个对象的标志</a> ，上一篇： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Handling-Tools-that-Produce-Many-Outputs"></a>
<h3 class="section">27.9处理产生大量输出的工具</h3>
<a name="index-multiple-outputs_002c-rules-with"></a>
<a name="index-many-outputs_002c-rules-with"></a>
<a name="index-rules-with-multiple-outputs"></a>

<p>本节介绍了<code>make</code>一个工具产生多个输出文件时可以使用的惯用语。它不是特定于Automake的，可以在普通情况下使用<samp>Makefile</samp> s。
</p>
<p>假设我们有一个名为<code>foo</code>将读取一个名为<samp>data.foo</samp>并产生两个名为<samp>data.c</samp>和<samp>data.h</samp> 。我们要写一个<samp>Makefile</samp>捕获此一二依赖关系的规则。
</p>
<p>天真规则不正确：</p>
<div class="example">
<pre class="example"># This is incorrect.
data.c data.h: data.foo
        foo data.foo
</pre></div>

<p>以上规则的真正含义是<samp>data.c</samp>和<samp>data.h</samp>每个取决于<samp>data.foo</samp> ，并且每个都可以通过运行' <samp>foo data.foo</samp> '。换句话说，它等效于：</p>
<div class="example">
<pre class="example"># We do not want this.
data.c: data.foo
        foo data.foo
data.h: data.foo
        foo data.foo
</pre></div>

<p>意思就是<code>foo</code>可以运行两次。通常它不会运行两次，因为<code>make</code>实现很聪明，可以在构建第一个文件之后检查第二个文件是否存在；因此，他们将检测到它已经存在。但是，在某些情况下它仍然可以运行两次：</p>
<ul>
<li>最令人担忧的情况是在并行运行时<code>make</code> 。如果<samp>data.c</samp>和<samp>data.h</samp>是并行构建的，两个<samp>foo data.foo</samp> '命令将同时运行。这是有害的。
</li><li>另一种情况是依赖项（此处<samp>data.foo</samp> ）是（或取决于）虚假目标。
</li></ul>

<p>与并行工作的解决方案<code>make</code>但不是虚假依赖项的是：</p>
<div class="example">
<pre class="example">data.c data.h: data.foo
        foo data.foo
data.h: data.c
</pre></div>

<p>以上规则等同于</p>
<div class="example">
<pre class="example">data.c: data.foo
        foo data.foo
data.h: data.foo data.c
        foo data.foo
</pre></div>

<p>因此平行<code>make</code>将不得不序列化的构建<samp>data.c</samp>和<samp>data.h</samp> ，一旦第一个结束，它将检测到不再需要第二个。
</p>
<p>在大多数情况下，使用此模式可能就足够了。但是，它不容易扩展到更多输出文件（在此方案中，所有输出文件必须通过依赖关系完全排序），因此我们将探索更复杂的解决方案。
</p>
<p>另一个想法是编写以下内容：</p>
<div class="example">
<pre class="example"># There is still a problem with this one.
data.c: data.foo
        foo data.foo
data.h: data.c
</pre></div>

<p>这个想法是<samp>foo data.foo</samp> '仅在以下情况下运行<samp>data.c</samp>需要更新，但我们进一步指出<samp>data.h</samp>取决于<samp>data.c</samp> 。这样，如果<samp>data.h</samp>是必需的<samp>data.foo</samp>已经过时，对<samp>data.c</samp>将触发构建。
</p>
<p>这几乎是完美的，但是假设我们已经建立了<samp>data.h</samp>和<samp>data.c</samp> ，然后我们擦除<samp>data.h</samp> 。然后，运行“ <samp>make data.h</samp> '不会重建<samp>data.h</samp> 。以上规则仅说明<samp>data.c</samp>必须是最新的<samp>data.foo</samp> ，这已经是事实了。
</p>
<p>我们需要的是在以下情况下强制重建的规则<samp>data.h</samp>不见了。这里是：</p>
<div class="example">
<pre class="example">data.c: data.foo
        foo data.foo
data.h: data.c
## Recover from the removal of $@
        @if test -f $@; then :; else \
          rm -f data.c; \
          $(MAKE) $(AM_MAKEFLAGS) data.c; \
        fi
</pre></div>

<p>以上方案可以扩展为处理更多的输出和更多的输入。选择输出之一作为成功完成命令的见证，它取决于所有输入，而所有其他输出也取决于它。例如，如果<code>foo</code>应该另外阅读<samp>data.bar</samp>并产生<samp>data.w</samp>和<samp>data.x</samp> ，我们将这样写：</p>
<div class="example">
<pre class="example">data.c: data.foo data.bar
        foo data.foo data.bar
data.h data.w data.x: data.c
## Recover from the removal of $@
        @if test -f $@; then :; else \
          rm -f data.c; \
          $(MAKE) $(AM_MAKEFLAGS) data.c; \
        fi
</pre></div>

<p>但是，此设置中现在存在三个小问题。一个与时间戳顺序有关<samp>data.h</samp> ， <samp>data.w</samp> ， <samp>data.x</samp>和<samp>data.c</samp> 。另一个是比赛条件，如果平行<code>make</code>尝试一次运行恢复块的多个实例。最后，递归规则打破了“ <samp>make -n</samp> '与GNU一起运行时<code>make</code> （以及其他一些<code>make</code>实现），因为它可能会删除<samp>data.h</samp>甚至当它不应该（见<a href="http://www.gnu.org/software/make/manual/make.html#MAKE-Variable">如何<code>MAKE</code>变量工作</a>在<cite>GNU Make手册中</cite> ）。
</p>
<p>让我们处理第一个问题。 <code>foo</code>输出四个文件，但我们不知道这些文件的创建顺序。假设<samp>data.h</samp>在之前创建<samp>data.c</samp> 。然后我们有一个奇怪的情况。下一次<code>make</code>运行<samp>data.h</samp>会比<samp>data.c</samp> ，第二条规则将被触发，shell将开始执行“ <samp>if…fi</samp> '命令，但实际上它只会执行<code>then</code>分支，即：什么都没有。换句话说，因为我们选择的见证人不是由创建的第一个文件<code>foo</code> ， <code>make</code>会在每次运行时启动Shell使其不执行任何操作。
</p>
<p>一个简单的riposte是在发生这种情况时修复时间戳。
</p>
<div class="example">
<pre class="example">data.c: data.foo data.bar
        foo data.foo data.bar
data.h data.w data.x: data.c
        @if test -f $@; then \
          touch $@; \
        else \
## Recover from the removal of $@
          rm -f data.c; \
          $(MAKE) $(AM_MAKEFLAGS) data.c; \
        fi
</pre></div>

<p>另一种解决方案是使用其他专用文件作为见证，而不是使用任何<code>foo</code>的输出。
</p>
<div class="example">
<pre class="example">data.stamp: data.foo data.bar
        @rm -f data.tmp
        @touch data.tmp
        foo data.foo data.bar
        @mv -f data.tmp $@
data.c data.h data.w data.x: data.stamp
## Recover from the removal of $@
        @if test -f $@; then :; else \
          rm -f data.stamp; \
          $(MAKE) $(AM_MAKEFLAGS) data.stamp; \
        fi
</pre></div>

<p><samp>data.tmp</samp>在之前创建<code>foo</code>运行，因此它的时间戳早于<code>foo</code> 。然后将其重命名为<samp>data.stamp</samp>后<code>foo</code>已运行，因为我们不想更新<samp>data.stamp</samp>如果<code>foo</code>失败。
</p>
<p>该解决方案仍然遭受第二个问题：恢复规则中的竞争条件。如果在成功构建之后，用户删除了<samp>data.c</samp>和<samp>data.h</samp>并运行“ <samp>make -j</samp> '， 然后<code>make</code>可能会同时启动两个恢复规则。如果规则的两个实例执行' <samp>$(MAKE) $(AM_MAKEFLAGS) data.stamp</samp>同时生成可能会失败（例如，这两个规则将创建<samp>data.tmp</samp> ，但只有一个可以重命名）。
</p>
<p>诚然，在普通版本中不会出现这种奇怪的情况。它仅在构建树被残缺时发生。这里<samp>data.c</samp>和<samp>data.h</samp>已被明确删除而未删除<samp>data.stamp</samp>和其他输出文件。
<code>make clean; make</code>即使使用并行制造商，它们也将始终从这些情况中恢复，因此您可以决定恢复规则仅用于帮助非并行制造商并使用户保持现状。解决此问题需要某种锁定机制，以确保仅重建恢复规则的一个实例<samp>data.stamp</samp> 。可以想象以下几句话。
</p>
<div class="example">
<pre class="example">data.c data.h data.w data.x: data.stamp
## Recover from the removal of $@
        @if test -f $@; then :; else \
          trap 'rm -rf data.lock data.stamp' 1 2 13 15; \
## mkdir is a portable test-and-set
          if mkdir data.lock 2&gt;/dev/null; then \
## This code is being executed by the first process.
            rm -f data.stamp; \
            $(MAKE) $(AM_MAKEFLAGS) data.stamp; \
            result=$$?; rm -rf data.lock; exit $$result; \
          else \
## This code is being executed by the follower processes.
## Wait until the first process is done.
            while test -d data.lock; do sleep 1; done; \
## Succeed if and only if the first process succeeded.
            test -f data.stamp; \
          fi; \
        fi
</pre></div>

<p>使用专门的证人，例如<samp>data.stamp</samp>如果事先不知道输出文件列表，则非常方便。作为说明，请考虑以下规则以编译许多<samp>*.el</samp>文件成<samp>*.elc</samp>单个命令中的文件。没关系<code>ELFILES</code>定义（只要它不为空：POSIX不接受空目标）。
</p>
<div class="example">
<pre class="example">ELFILES = one.el two.el three.el &hellip;
ELCFILES = $(ELFILES:=c)

elc-stamp: $(ELFILES)
        @rm -f elc-temp
        @touch elc-temp
        $(elisp_comp) $(ELFILES)
        @mv -f elc-temp $@

$(ELCFILES): elc-stamp
        @if test -f $@; then :; else \
## Recover from the removal of $@
          trap 'rm -rf elc-lock elc-stamp' 1 2 13 15; \
          if mkdir elc-lock 2&gt;/dev/null; then \
## This code is being executed by the first process.
            rm -f elc-stamp; \
            $(MAKE) $(AM_MAKEFLAGS) elc-stamp; \
            rmdir elc-lock; \
          else \
## This code is being executed by the follower processes.
## Wait until the first process is done.
            while test -d elc-lock; do sleep 1; done; \
## Succeed if and only if the first process succeeded.
            test -f elc-stamp; exit $$?; \
          fi; \
        fi
</pre></div>

<p>这些解决方案都仍然存在第三个问题，即它们违反了“ <samp>make -n</samp> '不会对树造成任何实际更改。对于那些不创建锁定文件的解决方案，可以将恢复规则拆分为两个单独的配方命令，其中一个功能除递归外全部起作用，另一个调用递归' <samp>$(MAKE)</samp> '。涉及锁定的解决方案可以作用于“ <samp>MAKEFLAGS</samp> '变量，但是要进行可移植的解析并不容易（请参见<cite>Autoconf手册中</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#The-Make-Macro-MAKEFLAGS">的Make Macro MAKEFLAGS</a> ）。这是一个例子：</p>
<div class="example">
<pre class="example">ELFILES = one.el two.el three.el &hellip;
ELCFILES = $(ELFILES:=c)

elc-stamp: $(ELFILES)
        @rm -f elc-temp
        @touch elc-temp
        $(elisp_comp) $(ELFILES)
        @mv -f elc-temp $@

$(ELCFILES): elc-stamp
## Recover from the removal of $@
        @dry=; for f in x $$MAKEFLAGS; do \
          case $$f in \
            *=*|--*);; \
            *n*) dry=:;; \
          esac; \
        done; \
        if test -f $@; then :; else \
          $$dry trap 'rm -rf elc-lock elc-stamp' 1 2 13 15; \
          if $$dry mkdir elc-lock 2&gt;/dev/null; then \
## This code is being executed by the first process.
            $$dry rm -f elc-stamp; \
            $(MAKE) $(AM_MAKEFLAGS) elc-stamp; \
            $$dry rmdir elc-lock; \
          else \
## This code is being executed by the follower processes.
## Wait until the first process is done.
            while test -d elc-lock &amp;&amp; test -z &quot;$$dry&quot;; do \
              sleep 1; \
            done; \
## Succeed if and only if the first process succeeded.
            $$dry test -f elc-stamp; exit $$?; \
          fi; \
        fi
</pre></div>

<p>为了完整起见，应注意GNU <code>make</code>能够使用模式规则来表达具有多个输出文件的规则（请参见<cite>《 GNU Make手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/make/manual/make.html#Pattern-Examples">模式规则示例</a> <cite>”</cite> ）。我们不在这里讨论模式规则，因为它们不是可移植的，但是在假定GNU的软件包中它们可能很方便<code>make</code> 。
</p>

<hr>
<a name="Hard_002dCoded-Install-Paths"></a>
<div class="header">
<p>下一个： <a href="#Debugging-Make-Rules" rel="next" accesskey="n">调试制作规则</a> ，上一个： <a href="#Multiple-Outputs" rel="prev" accesskey="p">多个输出</a> ，上一个： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Installing-to-Hard_002dCoded-Locations"></a>
<h3 class="section">27.10安装到硬编码位置</h3>

<div class="display">
<pre class="display">My package needs to install some configuration file.  I tried to use
the following rule, but &lsquo;<samp>make distcheck</samp>&rsquo; fails.  Why?

</pre><div class="example">
<pre class="example"># Do not do this.
install-data-local:
        $(INSTALL_DATA) $(srcdir)/afile $(DESTDIR)/etc/afile
</pre></div>
</div>

<div class="display">
<pre class="display">My package needs to populate the installation directory of another
package at install-time.  I can easily compute that installation
directory in <samp>configure</samp>, but if I install files therein,
&lsquo;<samp>make distcheck</samp>&rsquo; fails.  How else should I do?
</pre></div>

<p>这两种设置共有其症状： <samp>make distcheck</samp> '失败，因为他们正在将文件安装到硬编码的路径。在后一种情况下，路径并不是真正在程序包中进行硬编码的，但是我们可以认为它在系统中（或在提供路径的任何工具中）都是硬编码的。只要路径不使用任何标准目录变量（' <samp>$(prefix)</samp> '，' <samp>$(bindir)</samp> '，' <samp>$(datadir)</samp> '等），效果将是相同的：用户无法安装。
</p>
<p>作为要安装软件包的（非root）用户，您通常无权在其中安装任何程序<samp>/usr</samp>要么<samp>/usr/local</samp> 。所以你做类似“ <samp>./configure --prefix ~/usr</samp> '自行安装软件包<samp>~/usr</samp>树。
</p>
<p>如果某个软件包尝试将某些东西安装到某个硬编码的路径中（例如， <samp>/etc/afile</samp> ），无论如何<samp>--prefix</samp>设置，则安装将失败。 ' <samp>make distcheck</samp> '执行这样的<samp>--prefix</samp>安装，因此也会失败。
</p>
<p>现在，有一些简单的解决方案。
</p>
<p>以上<code>install-data-local</code>安装示例<samp>/etc/afile</samp>最好用</p>
<div class="example">
<pre class="example">sysconf_DATA = afile
</pre></div>

<p>默认<code>sysconfdir</code>将会 ' <samp>$(prefix)/etc</samp> '，因为这是GNU标准所要求的。当此类软件包安装在符合FHS的系统上时，安装程序将必须设置“ <samp>--sysconfdir=/etc</samp> '。作为软件包的维护者，您不必担心此类站点策略：使用适当的标准目录变量来安装文件，以便安装程序可以轻松地重新定义这些变量以匹配其站点约定。
</p>
<p>安装本应由另一个软件包使用的文件会稍微复杂一些。让我们举个例子，并假设您要安装一个共享库，该共享库是Python扩展模块。如果您问Python在哪里安装该库，它将回答以下内容：</p>
<div class="example">
<pre class="example">% <kbd>python -c 'from distutils import sysconfig;
             print sysconfig.get_python_lib(1,0)'</kbd>
/usr/lib/python2.5/site-packages
</pre></div>

<p>如果确实使用此绝对路径安装共享库，则非root用户将无法安装该软件包，因此distcheck失败。
</p>
<p>让我们做得更好。' <samp>sysconfig.get_python_lib()</samp>函数实际上接受了第三个参数，它将替换Python的安装前缀。
</p>
<div class="example">
<pre class="example">% <kbd>python -c 'from distutils import sysconfig;
             print sysconfig.get_python_lib(1,0,&quot;${exec_prefix}&quot;)'</kbd>
${exec_prefix}/lib/python2.5/site-packages
</pre></div>

<p>您也可以使用此新路径。如果你这样做</p><ul>
<li>root用户可以使用相同的方法安装软件包<samp>--prefix</samp>作为Python（您可以得到上一次尝试的行为）</li><li>非root用户也可以安装您的软件包，他们会将扩展模块放置在Python不会搜索的位置，但是他们可以使用环境变量来解决此问题（如果您安装了使用此共享库的脚本，则很容易知道Python会查看脚本的开头，因此该脚本在两种情况下均有效。
</li></ul>

<p>的<code>AM_PATH_PYTHON</code>宏使用类似的命令来定义“ <samp>$(pythondir)</samp> '和' <samp>$(pyexecdir)</samp> '（请参阅<a href="#Python">Python</a> ）。
</p>
<p>当然，就替换而言，并非所有工具都像Python一样先进。 <var>prefix</var> 。因此，另一种策略是确定必须保留的安装目录部分。例如，这是如何<code>AM_PATH_LISPDIR</code> （请参阅<a href="#Emacs-Lisp">Emacs Lisp</a> ）计算“ <samp>$(lispdir)</samp> '：</p>
<div class="example">
<pre class="example">$EMACS -batch -Q -eval '(while load-path
  (princ (concat (car load-path) &quot;\n&quot;))
  (setq load-path (cdr load-path)))' &gt;conftest.out
lispdir=`sed -n
  -e 's,/$,,'
  -e '/.*\/lib\/x*emacs\/site-lisp$/{
        s,.*/lib/\(x*emacs/site-lisp\)$,${libdir}/\1,;p;q;
      }'
  -e '/.*\/share\/x*emacs\/site-lisp$/{
        s,.*/share/\(x*emacs/site-lisp\),${datarootdir}/\1,;p;q;
      }'
  conftest.out`
</pre></div>

<p>即，它只是选择看起来像第一个目录<samp>*/lib/*emacs/site-lisp</samp>要么<samp>*/share/*emacs/site-lisp</samp>在emacs的搜索路径中，然后替换为' <samp>${libdir}</samp> ' 要么 ' <samp>${datadir}</samp>适当地。
</p>
<p>emacs案例看起来很复杂，因为它处理一个列表并需要两种可能的布局，否则很容易，而且非root用户的收益确实值得<code>sed</code>调用。
</p>

<hr>
<a name="Debugging-Make-Rules"></a>
<div class="header">
<p>下一篇： <a href="#Reporting-Bugs" rel="next" accesskey="n">报告错误</a> ，上一篇： <a href="#Hard_002dCoded-Install-Paths" rel="prev" accesskey="p">硬编码安装路径</a> ，上一篇： <a href="#FAQ" rel="up" accesskey="u">FAQ</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Debugging-Make-Rules-1"></a>
<h3 class="section">27.11调试制作规则</h3>
<a name="index-debugging-rules"></a>
<a name="index-rules_002c-debugging"></a>

<p>生成的规则和依赖关系树<code>automake</code>可能会变得相当复杂，并且当事情无法按预期进行时，开发人员会为之烦恼。除了提供的调试选项<code>make</code>命令（请参见<cite>《 GNU Make手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/make/manual/make.html#Options-Summary">选项摘要</a> <cite>”</cite> ），这是调试由以下命令生成的makefile的一些其他提示<code>automake</code>有效：</p>
<ul>
<li>如果使用静默规则在包中启用了较少的详细输出（请参见<a href="#Automake-Silent-Rules">Automake Silent Rules</a> ），则可以使用<code>make V=1</code>查看正在执行的命令。
</li><li> <code>make -n</code>可以帮助显示在没有实际执行的情况下会执行的操作。但是请注意，这<em>仍将执行</em>前缀为' <samp>+</samp> '，并且在使用GNU时<code>make</code> ，包含字符串' <samp>$(MAKE)</samp> ' 要么 ' <samp>${MAKE}</samp> '（请参见<cite>《 GNU Make手册</cite> 》中的“ <a href="http://www.gnu.org/software/make/manual/make.html#Instead-of-Execution">代替执行</a> <cite>”</cite> ）。通常，这有助于显示递归规则将执行的操作，但这意味着在您自己的规则中，请勿将此类递归与更改任何文件的操作混合使用。 <a name="DOCF8" href="#FOOT8"><sup>8</sup></a>此外，请注意，GNU <code>make</code>将更新<samp>Makefile</samp>甚至可以自己归档<samp>-n</samp> （请参阅<cite>《 GNU Make手册》</cite>中的<cite>“重新制作</cite> <a href="http://www.gnu.org/software/make/manual/make.html#Remaking-Makefiles">Makefile</a> <cite>”</cite> ）。
</li><li> <code>make SHELL="/bin/bash -vx"</code>可以帮助调试复杂的规则。有关与此构造相关联的一些可移植性怪癖，请参见<cite>Autoconf手册中</cite> <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#The-Make-Macro-SHELL">的Make Macro SHELL</a> 。
</li><li> <code>echo 'print: ; @echo "$(VAR)"' | make -f Makefile -f - print</code>可以方便地检查变量的扩展值。您可能需要使用除“ <samp>print</samp> '（如果已经使用或存在具有该名称的文件）。
</li><li> <a href="http://bashdb.sourceforge.net/remake/">http://bashdb.sourceforge.net/remake/</a>提供了修改后的GNU <code>make</code>命令称为<code>remake</code>应付复杂的GNU <code>make</code>特定的Makefile，并可以像调试器一样以交互方式跟踪执行，检查变量和调用规则。
</li></ul>


<hr>
<a name="Reporting-Bugs"></a>
<div class="header">
<p>上一页： <a href="#Debugging-Make-Rules" rel="prev" accesskey="p">调试规则</a> ，上一页： <a href="#FAQ" rel="up" accesskey="u">常见问题</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Reporting-Bugs-1"></a>
<h3 class="section">27.12报告错误</h3>

<p>大多数非同寻常的软件都有错误。自动制作也不例外。尽管我们不能保证可以或将要修复一个错误，甚至不能同意它是一个错误，但我们还是想听听您遇到的问题。通常，我们同意它们是bug，并希望对其进行修复。
</p>
<p>为了使我们能够修复错误，请报告此错误。为了有效地做到这一点，它有助于知道何时以及如何去做。
</p>
<p>在报告错误之前，最好先查看一下它是否已知。您可以查看<a href="https://debbugs.gnu.org/">GNU Bug Tracker</a>和<a href="https://lists.gnu.org/archive/html/bug-automake/">bug-automake邮件列表存档，</a>以获取先前的bug报告。我们以前使用<a href="http://sourceware.org/cgi-bin/gnatsweb.pl?database=automake">Gnats数据库</a>进行错误跟踪，因此可能已经在此报告了一些错误。但是，请勿将其用于新的错误报告。
</p>
<p>如果尚不知道该错误，则应报告该错误。以有用和高效的方式报告错误非常重要。为此，请熟悉<a href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html">如何有效地报告错误</a>以及<a href="http://catb.org/~esr/faqs/smart-questions.html">如何以明智的方式提出问题</a> 。这可以帮助您和开发人员节省时间，然后可以将时间用于修复更多的错误和实现更多的功能。
</p>
<p>有关错误报告，功能要求或其他建议，请发送电子邮件至<a href="mailto:bug-automake@gnu.org">bug-automake@gnu.org</a> 。然后，这将在<a href="https://debbugs.gnu.org/automake">错误跟踪器中</a>打开一个新的<a href="https://debbugs.gnu.org/automake">错误</a> 。确保包括您使用的Autoconf和Automake版本。理想情况下，发布一个最小的<samp>Makefile.am</samp>和<samp>configure.ac</samp>重现您遇到的问题。如果您遇到测试套件故障，请附上<samp>test-suite.log</samp>文件。
</p>

<hr>
<a name="Copying-This-Manual"></a>
<div class="header">
<p>下一个： <a href="#Indices" rel="next" accesskey="n">索引</a> ，上一个： <a href="#FAQ" rel="prev" accesskey="p">FAQ</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Copying-This-Manual-1"></a>
<h2 class="appendix">附录A复制本手册</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#GNU-Free-Documentation-License" accesskey="1">GNU自由文档许可证</a> ：</td><td>  </td><td align="left" valign="top">复制本手册的许可</td></tr>
</tbody></table>

<hr>
<a name="GNU-Free-Documentation-License"></a>
<div class="header">
<p>上一篇： <a href="#Copying-This-Manual" rel="up" accesskey="u">复制本手册</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="GNU-Free-Documentation-License-1"></a>
<h3 class="appendixsec">A.1 GNU免费文档许可证</h3>
<div align="center">1.3版，2008年11月3日</div>

<div class="display">
<pre class="display">Copyright &copy; 2000-2018 Free Software Foundation, Inc.
<a href="http://fsf.org/">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol start="0">
<li>前言<p>本许可的目的是免费提供手册，教科书或其他实用且有用的文档： <em>自由</em> ，以确保每个人都有有效的自由，无论是否进行商业或非商业修改，都可以对其进行复制和重新分发。其次，本许可证为作者和出版商保留了一种因其作品而获得好评的方式，同时不被视为对他人所做的修改负责。
</p>
<p>该许可是一种“版权所有”，这意味着该文档的衍生作品本身必须在相同意义上是免费的。它是GNU通用公共许可证的补充，GNU通用公共许可证是专为自由软件设计的Copyleft许可证。
</p>
<p>我们设计此许可证是为了将其用于免费软件的手册，因为免费软件需要免费的文档：免费程序应随附手册，以提供与软件相同的自由。但是本许可不限于软件手册；它可以用于任何文本作品，而无论其主题是什么，或者它是否作为印刷书籍出版。我们建议您将此许可证主要用于目的是作为指导或参考的作品。
</p>
</li><li>适用性和定义<p>本许可适用于任何形式的任何手册或其他作品，其中包含版权所有者发布的声明，声明其可以根据本许可的条款进行分发。此类通知授予了全球范围内的免版税使用许可，期限不限，可以在此处所述的条件下使用该作品。下面的“文档”是指任何此类手册或作品。任何公众人士都是被许可人，称呼为“您”。如果您按照版权法要求许可的方式复制，修改或分发作品，则您接受许可。
</p>
<p>文档的“修改版本”是指包含文档或文档一部分的任何作品，无论是逐字复制还是经过修改和/或翻译成另一种语言。
</p>
<p>“第二部分”是本文档的命名附录或最重要的部分，专门处理本文档的出版者或作者与本文档的整体主题（或相关事宜）之间的关系，不包含任何可能直接涉及的内容。在整个主题范围内。（因此，如果该文档部分是一本数学教科书，那么第二部分可能不会解释任何数学。）这种关系可以是与主题或相关问题的历史联系，也可以是关于它们的法律，商业，哲学，伦理或政治立场。
</p>
<p>“不变部分”是某些二级部分，在其声明中指出，该文件的标题与不变部分的标题相同，即该文件是根据本许可发布的。如果某个部分不符合上面对“辅助”的定义，则不允许将其指定为“不变式”。该文档可能包含零个不变部分。如果文档未标识任何不变节，则没有任何不变节。
</p>
<p>“封面文字”是某些简短的文本段落，在声明中指出该文档是根据本许可发布的，这些文字作为“封面文字”或“封面文字”列出。“封面文本”最多可以包含5个字，“封面文本”最多可以包含25个字。
</p>
<p>文档的“透明”副本是指一种机器可读的副本，以其规格可供大众使用的格式表示，适用于使用通用文本编辑器或（对于由像素组成的图像）通用颜料进行直接修改的文档程序或（用于绘图的）一些广泛使用的绘图编辑器，并且适合于输入文本格式化程序或自动转换为适合输入到文本格式化程序的多种格式。以其他方式透明的文件格式制作的副本，其标记或没有标记的安排，可以阻止或阻止读者的后续修改，则该副本不是透明的。如果用于大量文本，则图像格式不是“透明”的。非“透明”的副本称为“不透明”。
</p>
<p>适用于透明副本的格式的示例包括不带标记的纯<small>ASCII</small> ，Texinfo输入格式，LaTeX输入格式，使用公开可用的<acronym>DTD的</acronym> <acronym>SGML</acronym>或<acronym>XML</acronym>以及设计用于人为修改的符合标准的简单<acronym>HTML</acronym> ，PostScript或<acronym>PDF</acronym> 。透明图像格式的示例包括<acronym>PNG</acronym> ， <acronym>XCF</acronym>和<acronym>JPG</acronym> 。不透明格式包括只能由专有文字处理器， <acronym>SGML</acronym>或<acronym>XML</acronym>读取和编辑的专有格式，而<acronym>SGML</acronym>或<acronym>XML</acronym>通常不提供<acronym>DTD</acronym>和/或处理工具，以及某些文字处理器为某些文字处理器生成的机器生成的<acronym>HTML</acronym> ，PostScript或<acronym>PDF</acronym>仅用于输出目的。
</p>
<p>“标题页”对于印刷书籍而言，是指标题页本身，以及以下用于保持本许可证要求在标题页中显示的材料的以下页面。对于没有此类标题页的格式的作品，“标题页”是指在文本正文开头之前，靠近作品标题最突出外观的文本。
</p>
<p>“发布者”是指向公众分发文档副本的任何个人或实体。
</p>
<p>“标题为XYZ”一节是指文档的命名子单元，其标题恰好是XYZ或在括号中包含XYZ的文字，后面是将XYZ转换为另一种语言的文字。（此处XYZ代表以下提到的特定部分名称，例如“致谢”，“奉献”，“认可”或“历史记录”。）在修改文档时，要“保留此部分的标题”，则意味着根据此定义，该部分仍为“已命名的XYZ”部分。
</p>
<p>该文件的声明旁边可能包含“免责声明”，该声明指出本许可适用于该文件。这些保修免责声明被视为已包含在本许可中，但仅用于免责声明：这些保修免责声明可能具有的任何其他暗示都是无效的，并且对本许可的含义没有任何影响。
</p>
</li><li>VERBATIM复制<p>您可以在任何媒介中以商业或非商业方式复制和分发本文档，但前提是本许可，版权声明和声明本许可适用于本文档的许可声明均以所有副本形式复制，并且您不添加任何其他条件符合本许可的规定。您不得使用技术措施来阻碍或控制您复制或分发的副本的阅读或进一步复制。但是，您可以接受赔偿以换取副本。如果分发足够多的副本，则还必须遵循第3节中的条件。
</p>
<p>您还可以在上述相同条件下出借副本，并可以公开展示副本。
</p>
</li><li>大量复制<p>如果您发布文档的印刷副本（或通常具有印刷封面的介质副本），且编号超过100，并且文档的许可通知书要求使用“封面文字”，则您必须将这些副本附在封面上，该封面应清晰，清晰地包含以下所有内容：这些封面文字：封面上的封面文字和封底上的封面文字。两种封面都必须清楚，清楚地标识您是这些副本的发行者。封面必须显示完整的标题，标题中的所有单词均应同样醒目且可见。您还可以在封面上添加其他材料。只要封面保留了文档标题并满足这些条件，则仅对封面进行更改即可在其他方面被视为逐字复印。
</p>
<p>如果任何一个封面所需的文本量太大，无法清晰地容纳，则应将列出的第一个（合理合理的数量）放在实际的封面上，然后将其余部分继续放在相邻的页面上。
</p>
<p>如果您发布或分发的Opaque文档副本数量超过100，则必须在每份Opaque副本中包含机器可读的透明副本，或者在每份Opaque副本中或其中声明一个计算机网络位置，通用网络将从该位置开始使用public可以使用公共标准网络协议下载完整的文档透明副本，而无需添加任何材料。如果使用后一种选项，则在开始批量分发不透明副本时，必须采取合理的审慎步骤，以确保该透明副本将在指定位置保持可访问的状态，直到您上一次分发不透明副本至少一年之后。该版本的不透明副本（直接或通过您的代理商或零售商）向公众发布。
</p>
<p>要求（但不是必须）在重新分发大量副本之前，与文档作者保持良好联系，以便他们有机会为您提供文档的更新版本。
</p>
</li><li>修改方式<p>您可以在上述第2节和第3节的条件下复制和分发本文档的修改版本，前提是您严格按照本许可协议发布修改版本，而修改版本则充当文档的角色，从而许可对本文档的分发和修改拥有副本的修改版本。此外，您必须在修改后的版本中执行以下操作：</p>
<ol type="A" start="1">
<li>在标题页（和封面，如果有的话）中使用与本文档以及先前版本（如果有的话，应在文档的“历史记录”部分中列出）不同的标题。如果该版本的原始发行者给予许可，则可以使用与先前版本相同的标题。

</li><li>在标题页上列出作者，一个或多个负责修改版本著作权的作者或实体，以及至少五名文档的主要作者（所有主要作者，如果少于五），除非他们使您脱离此要求。

</li><li>在“标题”页面上声明修改版本的发布者的名称，作为发布者。

</li><li>保留文档的所有版权声明。

</li><li>在其他版权声明旁边添加用于修改的适当版权声明。

</li><li>在版权声明之后，立即包含一个许可声明，以下面的附录中所示的形式，向公众授予根据本许可条款使用修改版的许可。

</li><li>在该许可证声明中保留不可变部分的完整列表以及文档的许可证声明中提供的必需封面文字。

</li><li>随附本许可证的未更改副本。

</li><li>保留标题为“历史”的部分，保留其标题，并在其上添加至少说明标题页上给出的修改版本的标题，年份，新作者和发行者的项目。如果文档中没有标题为“历史记录”的部分，请在其标题页上创建一个说明文档的标题，年份，作者和出版者的内容，然后添加一项描述上一句中所述的修改版本。

</li><li>保留文档中给出的网络位置（如果有），以供公众访问文档的透明副本，同样，保留文档中给出的基于其以前版本的网络位置。这些可以放在“历史记录”部分中。对于在文档本身之前至少四年出版的作品，或者如果其所指版本的原始发行者给予许可，您可以省略其网络位置。

</li><li>对于标题为“致谢”或“奉献”的任何部分，请保留本部分的标题，并在本部分中保留其中给出的每个贡献者致谢和/或奉献的所有内容和基调。

</li><li>保留文档的所有不变部分，其文本和标题保持不变。章节编号或同等编号不视为章节标题的一部分。

</li><li>删除任何标题为“背书”的部分。这样的部分可能不包含在修改版本中。

</li><li>请勿将任何现有部分的标题重命名为“背书”，或与任何不变部分的标题冲突。

</li><li>保留所有保修免责声明。
</li></ol>

<p>如果修改后的版本包括新的前节或附录，这些节或附录符合第二节的规定，并且不包含从文档中复制的材料，则可以选择将其中的部分或全部指定为不变的。为此，请将其标题添加到“修改版本”许可声明中的“不变部分”列表中。这些标题必须与任何其他节标题不同。
</p>
<p>您可以添加标题为“背书”的部分，但其中仅包含各方对您的修改版本的背书，例如，同行评审声明或该文本已被组织批准为标准的权威定义。
</p>
<p>您可以在修改版本的封面文本列表的末尾添加最多5个单词的段落作为“封面文本”，以及最多25个单词的段落作为“封面文本”。任何一个实体（或通过它们的安排）都只能添加“封面文字”和“封面文字”中的一个段落。如果文档已经包含同一封面的封面文字，该文字是您先前添加的或由您代表的同一实体做出的安排而添加的，则不得添加其他文字；但是您可以在添加了旧版本的以前的发布者的明确许可下替换旧版本。
</p>
<p>本文档的作者和发行者未获得本许可证的许可，不得使用其名称进行宣传或主张或暗示认可任何修改版本。
</p>
</li><li>合并文件<p>您可以根据上文第4节中针对修改版本定义的条款，将文档与根据本许可发布的其他文档进行组合，但前提是您必须将所有未经修改的原始文档的所有不变部分都包含在其中，并列出所有这些文档作为您许可协议中合并工作的不变部分，并保留其所有保修免责声明。
</p>
<p>合并后的作品仅包含此许可的一个副本，并且多个相同的不变部分可用一个副本代替。如果存在多个具有相同名称但内容不同的不变部分，请在该部分的末尾加上括号，在该部分的末尾添加原始作者或发布者的名称（如果已知），以使每个此类的标题唯一。唯一编号。对合并作品的许可声明中不变部分列表中的部分标题进行相同的调整。
</p>
<p>在组合中，必须将各种原始文档中标题为“ History”的任何部分组合在一起，组成一个标题为“ History”的部分；同样，将标题为“致谢”的所有部分以及标题为“奉献”的任何部分组合在一起。您必须删除所有标题为“背书”的部分。
</p>
</li><li>文件收集<p>您可以收集由本许可协议下发布的文档和其他文档组成的集合，并在该文档中将其替换为各个文档中包含的单个副本，前提是您遵守本许可协议的规定。在所有其他方面逐字逐字复印。
</p>
<p>您可以从此类集合中提取单个文档，并根据本许可证单独分发它，前提是您将本许可证的副本插入提取的文档中，并且在与该文档的逐字复制有关的所有其他方面遵守本许可证。
</p>
</li><li>独立工作的集合<p>如果文件或衍生产品的版权不用于限制合法权利，则该文件或其衍生物与其他单独或独立的文件或作品在存储或分发介质中或在其上的汇编将被称为“汇总”。汇编用户的数量超出了个人作品的许可范围。当文档包含在汇总中时，本许可不适用于汇总中的其他作品，而这些作品本身不是文档的衍生作品。
</p>
<p>如果第3节的封面文字要求适用于本文档的这些副本，则如果该文档少于全部汇总的一半，则可以将文档的封面文字放在汇总中将文档括起来的封面上，或者如果文档为电子形式，则具有等同的封面电子形式。否则，它们必须出现在将整个集合括起来的印刷封面上。
</p>
</li><li>翻译<p>翻译被视为一种修改，因此您可以根据第4节的条款分发文档的翻译。用翻译替换不变部分需要其版权所有者的特殊许可，但是除了这些不变部分的原始版本之外，您还可以包括部分或全部不变部分的翻译。您可以在本文档以及所有保修免责声明中包括本许可，所有许可声明的翻译，但前提是您还包括本许可的原始英文版本以及这些声明和免责声明的原始版本。如果本许可的翻译版本与原始版本或声明或免责声明之间存在分歧，则以原始版本为准。
</p>
<p>如果文档中某节的标题为“致谢”，“奉献”或“历史记录”，则保留其标题（第1节）的要求（第4节）通常需要更改实际标题。
</p>
</li><li>终止<p>除非本许可明确规定，否则您不得复制，修改，再许可或分发文档。否则，任何尝试复制，修改，再许可或分发的尝试均无效，并且将自动终止您在本许可下的权利。
</p>
<p>但是，如果您停止所有对本许可的违反，则（a）临时恢复特定版权持有者的许可，除非且直到版权持有者明确终止并最终终止您的许可为止；以及（b）如果版权持有者失败，则永久地在停止交易发生后的60天之内通过某种合理的方式通知您违规行为。
</p>
<p>此外，如果版权所有者以某种合理的方式通知您有关侵权的信息，那么该版权所有者的许可将被永久恢复，这是您第一次从该版权所有者那里收到针对任何作品的违反本许可的通知，并且您会在收到通知后的30天内纠正违规行为。
</p>
<p>根据本节终止您的权利并不会终止根据本许可从您那里收到副本或权利的各方的许可。如果您的权利已被终止且未永久恢复，则收到部分或全部相同材料的副本将不会赋予您使用该材料的任何权利。
</p>
</li><li>本许可证的未来修订<p>自由软件基金会可能会不时发布GNU自由文档许可证的新修订版。这样的新版本将在本质上与当前版本相似，但是可能在细节上有所不同以解决新问题或疑虑。参见<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a> 。</p>
<p>许可证的每个版本都有一个不同的版本号。如果文档指定适用于此许可的特定编号版本“或任何更高版本”，则您可以选择遵循该指定版本或已发布的任何更高版本的条款和条件（不作为草稿）由自由软件基金会提供。如果文档未指定此许可的版本号，则可以选择自由软件基金会曾经发布的任何版本（而不是草稿）。如果文档指定代理可以决定可以使用此许可证的将来版本，则该代理对版本的公开接受声明将永久授权您为文档选择该版本。
</p>
</li><li>许可<p>“大型多作者协作网站”（或“ MMC网站”）是指发布版权作品并为任何人提供编辑这些作品的重要便利的任何万维网服务器。任何人都可以编辑的公共Wiki是此类服务器的示例。网站中包含的“大型多作者合作”（或“ MMC”）是指在MMC网站上发布的任何受版权保护的作品集。
</p>
<p>“ CC-BY-SA”指由知识共享公司发行的知识共享署名-相同方式共享3.0许可，该公司是一家非营利性公司，主要营业地点位于加利福尼亚州旧金山，并且该版本的未来copyleft版本该组织发布的许可。
</p>
<p>“合并”是指作为另一文档的一部分全部或部分发布或重新发布文档。
</p>
<p>如果MMC已根据本许可获得许可，并且所有根据该许可在MMC以外的其他地方首次发行并随后全部或部分合并到MMC中的作品，则该MMC是“有资格获得许可的”，（1）没有封面文字或不变部分，因此（2）在2008年11月1日之前合并。
</p>
<p>MMC站点的运营商可以在2009年8月1日之前的任何时间在CC-BY-SA之下的同一站点上重新发布该站点中包含的MMC，前提是该MMC有资格获得许可。
</p>
</li></ol>

<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h3 class="heading">附录：如何对您的文档使用此许可证</h3>

<p>要在您编写的文档中使用此许可，请在该文档中包括一个许可副本，并在标题页后放置以下版权和许可声明：</p>
<div class="smallexample">
<pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>如果您有不变的部分，封面文本和封面文本，则将“ with…Texts。”行替换为：</p>
<div class="smallexample">
<pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>如果您有不带封面文本的不变部分，或这三个部分的其他组合，请合并这两种选择以适应情况。
</p>
<p>如果您的文档包含不平凡的程序代码示例，我们建议您根据自由软件许可（例如GNU通用公共许可）的选择，并行发布这些示例，以允许它们在自由软件中使用。
</p>


<hr>
<a name="Indices"></a>
<div class="header">
<p>上一页： <a href="#Copying-This-Manual" rel="prev" accesskey="p">复制本手册</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Indices-1"></a>
<h2 class="appendix">附录B指标</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Macro-Index" accesskey="1">宏索引</a> ：</td><td>  </td><td align="left" valign="top">Autoconf宏的索引</td></tr>
<tr><td align="left" valign="top">• <a href="#Variable-Index" accesskey="2">可变索引</a> ：</td><td>  </td><td align="left" valign="top">Makefile变量的索引</td></tr>
<tr><td align="left" valign="top">• <a href="#General-Index" accesskey="3">综合指数</a> ：</td><td>  </td><td align="left" valign="top">综合指标</td></tr>
</tbody></table>

<hr>
<a name="Macro-Index"></a>
<div class="header">
<p>下一页： <a href="#Variable-Index" rel="next" accesskey="n">可变索引</a>上： <a href="#Indices" rel="up" accesskey="u">索引</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Macro-Index-1"></a>
<h3 class="appendixsec">B.1宏索引</h3>

<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Macro-Index_fn_symbol-1"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#Macro-Index_fn_letter-A"><b>一个</b></a> <a class="summary-letter" href="#Macro-Index_fn_letter-M"><b>M</b></a>
   
</td></tr></tbody></table>
<table class="index-fn" border="0">
<tbody><tr><td></td><th align="left">索引输入</th><td> </td><th align="left">部分</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Macro-Index_fn_symbol-1">_</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fAM_005fDEPENDENCIES"><code>_AM_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Macro-Index_fn_letter-A">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCANONICAL_005fBUILD"><code>AC_CANONICAL_BUILD</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCANONICAL_005fHOST"><code>AC_CANONICAL_HOST</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCANONICAL_005fTARGET"><code>AC_CANONICAL_TARGET</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fAUX_005fDIR-1"><code>AC_CONFIG_AUX_DIR</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fAUX_005fDIR"><code>AC_CONFIG_AUX_DIR</code></a> ：</td><td> </td><td valign="top"><a href="#Subpackages">分包</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fFILES"><code>AC_CONFIG_FILES</code></a> ：</td><td> </td><td valign="top"><a href="#Requirements">要求</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fHEADERS"><code>AC_CONFIG_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fLIBOBJ_005fDIR-1"><code>AC_CONFIG_LIBOBJ_DIR</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fLIBOBJ_005fDIR"><code>AC_CONFIG_LIBOBJ_DIR</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fLINKS"><code>AC_CONFIG_LINKS</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fSUBDIRS"><code>AC_CONFIG_SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Subpackages">分包</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fDEFUN"><code>AC_DEFUN</code></a> ：</td><td> </td><td valign="top"><a href="#Extending-aclocal">扩展aclocal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fF77_005fLIBRARY_005fLDFLAGS"><code>AC_F77_LIBRARY_LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fFC_005fSRCEXT"><code>AC_FC_SRCEXT</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fINIT"><code>AC_INIT</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fLIBOBJ-2"><code>AC_LIBOBJ</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fLIBOBJ"><code>AC_LIBOBJ</code></a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fLIBOBJ-1"><code>AC_LIBOBJ</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fLIBSOURCE-1"><code>AC_LIBSOURCE</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fLIBSOURCE"><code>AC_LIBSOURCE</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fLIBSOURCES"><code>AC_LIBSOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fOUTPUT"><code>AC_OUTPUT</code></a> ：</td><td> </td><td valign="top"><a href="#Requirements">要求</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPREREQ"><code>AC_PREREQ</code></a> ：</td><td> </td><td valign="top"><a href="#Extending-aclocal">扩展aclocal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fCXX"><code>AC_PROG_CXX</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fF77"><code>AC_PROG_F77</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fFC"><code>AC_PROG_FC</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fLEX"><code>AC_PROG_LEX</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fLEX-1"><code>AC_PROG_LEX</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fLIBTOOL"><code>AC_PROG_LIBTOOL</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fOBJC"><code>AC_PROG_OBJC</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fOBJCXX"><code>AC_PROG_OBJCXX</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fRANLIB"><code>AC_PROG_RANLIB</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fPROG_005fYACC"><code>AC_PROG_YACC</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fREQUIRE_005fAUX_005fFILE"><code>AC_REQUIRE_AUX_FILE</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fSUBST"><code>AC_SUBST</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCONDITIONAL-1"><code>AM_CONDITIONAL</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCONDITIONAL"><code>AM_CONDITIONAL</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCONDITIONAL-2"><code>AM_CONDITIONAL</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCOND_005fIF-1"><code>AM_COND_IF</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCOND_005fIF"><code>AM_COND_IF</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCOND_005fIF-2"><code>AM_COND_IF</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fDEP_005fTRACK"><code>AM_DEP_TRACK</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fGNU_005fGETTEXT"><code>AM_GNU_GETTEXT</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fGNU_005fGETTEXT_005fINTL_005fSUBDIR"><code>AM_GNU_GETTEXT_INTL_SUBDIR</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fINIT_005fAUTOMAKE"><code>AM_INIT_AUTOMAKE</code></a> ：</td><td> </td><td valign="top"><a href="#Requirements">要求</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fINIT_005fAUTOMAKE-1"><code>AM_INIT_AUTOMAKE</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAINTAINER_005fMODE"><code>AM_MAINTAINER_MODE</code></a> ：</td><td> </td><td valign="top"><a href="#Rebuilding">重建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAINTAINER_005fMODE-1"><code>AM_MAINTAINER_MODE</code></a> ：</td><td> </td><td valign="top"><a href="#maintainer_002dmode">维护者模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAINTAINER_005fMODE_0028_005bdefault_002dmode_005d_0029"><code>AM_MAINTAINER_MODE(<span class="roman">[</span><var>default-mode</var><span class="roman">]</span>)</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAKE_005fINCLUDE"><code>AM_MAKE_INCLUDE</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMISSING_005fPROG"><code>AM_MISSING_PROG</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fOUTPUT_005fDEPENDENCY_005fCOMMANDS"><code>AM_OUTPUT_DEPENDENCY_COMMANDS</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPATH_005fLISPDIR"><code>AM_PATH_LISPDIR</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPATH_005fPYTHON"><code>AM_PATH_PYTHON</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fAR"><code>AM_PROG_AR</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fAS"><code>AM_PROG_AS</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fCC_005fC_005fO"><code>AM_PROG_CC_C_O</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fGCJ"><code>AM_PROG_GCJ</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fINSTALL_005fSTRIP"><code>AM_PROG_INSTALL_STRIP</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fLEX"><code>AM_PROG_LEX</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fMKDIR_005fP"><code>AM_PROG_MKDIR_P</code></a> ：</td><td> </td><td valign="top"><a href="#Obsolete-Macros">过时的宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fUPC"><code>AM_PROG_UPC</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fPROG_005fVALAC"><code>AM_PROG_VALAC</code></a> ：</td><td> </td><td valign="top"><a href="#Vala-Support">瓦拉支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fSANITY_005fCHECK"><code>AM_SANITY_CHECK</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fSET_005fDEPDIR"><code>AM_SET_DEPDIR</code></a> ：</td><td> </td><td valign="top"><a href="#Private-Macros">私人巨集</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fSILENT_005fRULES"><code>AM_SILENT_RULES</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fSUBST_005fNOTMAKE_0028var_0029"><code>AM_SUBST_NOTMAKE(<var>var</var>)</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fWITH_005fDMALLOC"><code>AM_WITH_DMALLOC</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Macro-Index_fn_letter-M">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-m4_005finclude"><code>m4_include</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-m4_005finclude-1"><code>m4_include</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Macro-Index_fn_symbol-1"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#Macro-Index_fn_letter-A"><b>一个</b></a> <a class="summary-letter" href="#Macro-Index_fn_letter-M"><b>M</b></a>
   
</td></tr></tbody></table>

<hr>
<a name="Variable-Index"></a>
<div class="header">
<p>下一页： <a href="#General-Index" rel="next" accesskey="n">总指数</a> ，上一篇： <a href="#Macro-Index" rel="prev" accesskey="p">宏观指数</a> ，上： <a href="#Indices" rel="up" accesskey="u">指数</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Variable-Index-1"></a>
<h3 class="appendixsec">B.2变量索引</h3>

<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Variable-Index_vr_symbol-1"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#Variable-Index_vr_letter-A"><b>A</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-B"><b>B</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-C"><b>C</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-D"><b>D</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-E"><b>E</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-F"><b>F</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-G"><b>G</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-H"><b>H</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-I"><b>I</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-J"><b>J</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-L"><b>L</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-M"><b>M</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-N"><b>N</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-O"><b>O</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-P"><b>P</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-R"><b>R</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-S"><b>S</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-T"><b>T</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-U"><b>U</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-V"><b>V</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-W"><b>W</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-X"><b>X</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-Y"><b>Y</b></a>
   
</td></tr></tbody></table>
<table class="index-vr" border="0">
<tbody><tr><td></td><th align="left">索引输入</th><td> </td><th align="left">部分</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_symbol-1">_</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fDATA"><code>_DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fHEADERS"><code>_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLIBRARIES"><code>_LIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLISP"><code>_LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLOG_005fCOMPILE"><code>_LOG_COMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLOG_005fCOMPILER"><code>_LOG_COMPILER</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLOG_005fDRIVER"><code>_LOG_DRIVER</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLOG_005fDRIVER_005fFLAGS"><code>_LOG_DRIVER_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLOG_005fFLAGS"><code>_LOG_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLTLIBRARIES"><code>_LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fMANS"><code>_MANS</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fPROGRAMS"><code>_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fPROGRAMS-1"><code>_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fPYTHON"><code>_PYTHON</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSCRIPTS"><code>_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES"><code>_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES-1"><code>_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES-2"><code>_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fTEXINFOS"><code>_TEXINFOS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fTEXINFOS-1"><code>_TEXINFOS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-A">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ACLOCAL_005fAUTOMAKE_005fDIR"><code>ACLOCAL_AUTOMAKE_DIR</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOCA"><code>ALLOCA</code></a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOCA-1"><code>ALLOCA</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCCASFLAGS"><code>AM_CCASFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Assembly-Support">组装支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCFLAGS"><code>AM_CFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCOLOR_005fTESTS"><code>AM_COLOR_TESTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCPPFLAGS"><code>AM_CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCPPFLAGS-1"><code>AM_CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Assembly-Support">组装支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCXXFLAGS"><code>AM_CXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fDEFAULT_005fSOURCE_005fEXT"><code>AM_DEFAULT_SOURCE_EXT</code></a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fDEFAULT_005fV"><code><code>AM_DEFAULT_V</code></code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fDEFAULT_005fVERBOSITY"><code><code>AM_DEFAULT_VERBOSITY</code></code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fDISTCHECK_005fCONFIGURE_005fFLAGS"><code>AM_DISTCHECK_CONFIGURE_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fETAGSFLAGS"><code>AM_ETAGSFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fext_005fLOG_005fDRIVER_005fFLAGS"><code>AM_<var>ext</var>_LOG_DRIVER_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fext_005fLOG_005fFLAGS"><code>AM_<var>ext</var>_LOG_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fFCFLAGS"><code>AM_FCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fFFLAGS"><code>AM_FFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fGCJFLAGS"><code>AM_GCJFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Java-Support-with-gcj">gcj的Java支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fINSTALLCHECK_005fSTD_005fOPTIONS_005fEXEMPT"><code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fJAVACFLAGS"><code>AM_JAVACFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLDFLAGS"><code>AM_LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLDFLAGS-1"><code>AM_LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLFLAGS"><code>AM_LFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLIBTOOLFLAGS"><code>AM_LIBTOOLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Flags">Libtool标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLOG_005fDRIVER_005fFLAGS"><code>AM_LOG_DRIVER_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLOG_005fFLAGS"><code>AM_LOG_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAKEFLAGS"><code>AM_MAKEFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories">子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAKEINFOFLAGS"><code>AM_MAKEINFOFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAKEINFOHTMLFLAGS"><code>AM_MAKEINFOHTMLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fOBJCFLAGS"><code>AM_OBJCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fOBJCXXFLAGS"><code>AM_OBJCXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fRFLAGS"><code>AM_RFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fRUNTESTFLAGS"><code>AM_RUNTESTFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fTESTS_005fENVIRONMENT"><code>AM_TESTS_ENVIRONMENT</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fTESTS_005fFD_005fREDIRECT"><code>AM_TESTS_FD_REDIRECT</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fUPCFLAGS"><code>AM_UPCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fUPDATE_005fINFO_005fDIR"><code>AM_UPDATE_INFO_DIR</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fV"><code><code>AM_V</code></code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fVALAFLAGS"><code>AM_VALAFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Vala-Support">瓦拉支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fV_005fat"><code><code>AM_V_at</code></code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fV_005fGEN"><code><code>AM_V_GEN</code></code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fYFLAGS"><code>AM_YFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AR"><code>AR</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOCONF"><code>AUTOCONF</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOM4TE"><code>AUTOM4TE</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Invocation">本地调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOMAKE_005fJOBS"><code>AUTOMAKE_JOBS</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOMAKE_005fLIBDIR"><code>AUTOMAKE_LIBDIR</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOMAKE_005fOPTIONS"><code>AUTOMAKE_OPTIONS</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOMAKE_005fOPTIONS-1"><code>AUTOMAKE_OPTIONS</code></a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AUTOMAKE_005fOPTIONS-2"><code>AUTOMAKE_OPTIONS</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-B">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-bin_005fPROGRAMS"><code>bin_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bin_005fSCRIPTS"><code>bin_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-build_005ftriplet"><code>build_triplet</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BUILT_005fSOURCES"><code>BUILT_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Sources">资料来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BZIP2"><code>BZIP2</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-CC"><code>CC</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CCAS"><code>CCAS</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CCAS-1"><code>CCAS</code></a> ：</td><td> </td><td valign="top"><a href="#Assembly-Support">组装支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CCASFLAGS"><code>CCASFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CCASFLAGS-1"><code>CCASFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Assembly-Support">组装支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CFLAGS"><code>CFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005f"><code>check_</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005fLTLIBRARIES"><code>check_LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Convenience-Libraries">Libtool便利图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005fPROGRAMS"><code>check_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005fPROGRAMS-1"><code>check_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005fSCRIPTS"><code>check_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CLASSPATH_005fENV"><code>CLASSPATH_ENV</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CLEANFILES"><code>CLEANFILES</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-COMPILE"><code>COMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CONFIGURE_005fDEPENDENCIES"><code>CONFIGURE_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Rebuilding">重建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CONFIG_005fSTATUS_005fDEPENDENCIES"><code>CONFIG_STATUS_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Rebuilding">重建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CPPFLAGS"><code>CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CPPFLAGS-1"><code>CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Assembly-Support">组装支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CXX"><code>CXX</code></a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CXXCOMPILE"><code>CXXCOMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CXXFLAGS"><code>CXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CXXLINK"><code>CXXLINK</code></a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CXXLINK-1"><code>CXXLINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-D">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-DATA"><code>DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DATA-1"><code>DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-data_005fDATA"><code>data_DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DEFS"><code>DEFS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DEJATOOL"><code>DEJATOOL</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DESTDIR"><code>DESTDIR</code></a> ：</td><td> </td><td valign="top"><a href="#DESTDIR">DESTDIR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DESTDIR-1"><code>DESTDIR</code></a> ：</td><td> </td><td valign="top"><a href="#Staged-Installs">分阶段安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DISABLE_005fHARD_005fERRORS"><code>DISABLE_HARD_ERRORS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DISTCHECK_005fCONFIGURE_005fFLAGS"><code>DISTCHECK_CONFIGURE_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcleancheck_005flistfiles"><code>distcleancheck_listfiles</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcleancheck_005flistfiles-1"><code>distcleancheck_listfiles</code></a> ：</td><td> </td><td valign="top"><a href="#Errors-with-distclean">distclean错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DISTCLEANFILES"><code>DISTCLEANFILES</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DISTCLEANFILES-1"><code>DISTCLEANFILES</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distdir-1"><code>distdir</code></a> ：</td><td> </td><td valign="top"><a href="#The-dist-Hook">dist钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distdir-2"><code>distdir</code></a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distuninstallcheck_005flistfiles"><code>distuninstallcheck_listfiles</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_005f"><code>dist_</code></a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_005f-1"><code>dist_</code></a> ：</td><td> </td><td valign="top"><a href="#Fine_002dgrained-Distribution-Control">细粒度的分配控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_005flisp_005fLISP"><code>dist_lisp_LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_005fnoinst_005fLISP"><code>dist_noinst_LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIST_005fSUBDIRS"><code>DIST_SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories-with-AM_005fCONDITIONAL">具有AM_CONDITIONAL的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIST_005fSUBDIRS-1"><code>DIST_SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DVIPS"><code>DVIPS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-E">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-EMACS"><code>EMACS</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ETAGSFLAGS"><code>ETAGSFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ETAGS_005fARGS"><code>ETAGS_ARGS</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXPECT"><code>EXPECT</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fDIST"><code>EXTRA_DIST</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fmaude_005fDEPENDENCIES"><code>EXTRA_maude_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fmaude_005fDEPENDENCIES-1"><code>EXTRA_maude_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fmaude_005fSOURCES"><code>EXTRA_maude_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fPROGRAMS"><code>EXTRA_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Conditional-Programs">有条件程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ext_005fLOG_005fCOMPILE"><code><var>ext</var>_LOG_COMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ext_005fLOG_005fCOMPILER"><code><var>ext</var>_LOG_COMPILER</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ext_005fLOG_005fDRIVER"><code><var>ext</var>_LOG_DRIVER</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ext_005fLOG_005fDRIVER_005fFLAGS"><code><var>ext</var>_LOG_DRIVER_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ext_005fLOG_005fFLAGS"><code><var>ext</var>_LOG_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-F77"><code>F77</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-F77COMPILE"><code>F77COMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-F77LINK"><code>F77LINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FC"><code>FC</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FCCOMPILE"><code>FCCOMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FCFLAGS"><code>FCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FCLINK"><code>FCLINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FCLINK-1"><code>FCLINK</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FFLAGS"><code>FFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FLIBS"><code>FLIBS</code></a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FLINK"><code>FLINK</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-GCJ"><code>GCJ</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GCJFLAGS"><code>GCJFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GCJFLAGS-1"><code>GCJFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Java-Support-with-gcj">gcj的Java支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GCJLINK"><code>GCJLINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GTAGS_005fARGS"><code>GTAGS_ARGS</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GZIP_005fENV"><code>GZIP_ENV</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-HEADERS"><code>HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-host_005ftriplet"><code>host_triplet</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-I">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-INCLUDES"><code>INCLUDES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-include_005fHEADERS"><code>include_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-info_005fTEXINFOS"><code>info_TEXINFOS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-J">Ĵ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-JAVA"><code>JAVA</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-JAVAC"><code>JAVAC</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-JAVACFLAGS"><code>JAVACFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-JAVAROOT"><code>JAVAROOT</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-L">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LDADD"><code>LDADD</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LDFLAGS"><code>LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LFLAGS"><code>LFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libexec_005fPROGRAMS"><code>libexec_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libexec_005fSCRIPTS"><code>libexec_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBOBJS"><code>LIBOBJS</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBOBJS-1"><code>LIBOBJS</code></a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBOBJS-2"><code>LIBOBJS</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBRARIES"><code>LIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBS"><code>LIBS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBTOOLFLAGS"><code>LIBTOOLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Flags">Libtool标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_005fLIBRARIES"><code>lib_LIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_005fLTLIBRARIES"><code>lib_LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LINK"><code>LINK</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Variables">程序变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LINK-1"><code>LINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LISP"><code>LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lispdir"><code>lispdir</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lisp_005fLISP"><code>lisp_LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-localstate_005fDATA"><code>localstate_DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fCOMPILE"><code>LOG_COMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fCOMPILER"><code>LOG_COMPILER</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fDRIVER"><code>LOG_DRIVER</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fDRIVER_005fFLAGS"><code>LOG_DRIVER_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Declaring-Custom-Test-Drivers">声明自定义测试驱动程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fFLAGS"><code>LOG_FLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTALLOCA"><code>LTALLOCA</code></a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTALLOCA-1"><code>LTALLOCA</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTLIBOBJS"><code>LTLIBOBJS</code></a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTLIBOBJS-1"><code>LTLIBOBJS</code></a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTLIBRARIES"><code>LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-M">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAINTAINERCLEANFILES"><code>MAINTAINERCLEANFILES</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAKE"><code>MAKE</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories">子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAKEINFO"><code>MAKEINFO</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAKEINFOFLAGS"><code>MAKEINFOFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAKEINFOHTML"><code>MAKEINFOHTML</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MANS"><code>MANS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-man_005fMANS"><code>man_MANS</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fAR"><code>maude_AR</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fCCASFLAGS"><code>maude_CCASFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fCFLAGS"><code>maude_CFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fCPPFLAGS"><code>maude_CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fCXXFLAGS"><code>maude_CXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fDEPENDENCIES"><code>maude_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fDEPENDENCIES-1"><code>maude_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fFFLAGS"><code>maude_FFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fGCJFLAGS"><code>maude_GCJFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLDADD"><code>maude_LDADD</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLDADD-1"><code>maude_LDADD</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLDFLAGS"><code>maude_LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLDFLAGS-1"><code>maude_LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLFLAGS"><code>maude_LFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLIBADD"><code>maude_LIBADD</code></a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLIBADD-1"><code>maude_LIBADD</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLIBTOOLFLAGS"><code>maude_LIBTOOLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Flags">Libtool标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLIBTOOLFLAGS-1"><code>maude_LIBTOOLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fLINK"><code>maude_LINK</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fOBJCFLAGS"><code>maude_OBJCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fOBJCXXFLAGS"><code>maude_OBJCXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fRFLAGS"><code>maude_RFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fSHORTNAME"><code>maude_SHORTNAME</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fSOURCES"><code>maude_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fUPCFLAGS"><code>maude_UPCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maude_005fYFLAGS"><code>maude_YFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MISSING"><code>MISSING</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MKDIR_005fP"><code>MKDIR_P</code></a> ：</td><td> </td><td valign="top"><a href="#Obsolete-Macros">过时的宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mkdir_005fp"><code>mkdir_p</code></a> ：</td><td> </td><td valign="top"><a href="#Obsolete-Macros">过时的宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MOSTLYCLEANFILES"><code>MOSTLYCLEANFILES</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-N">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-nobase_005f"><code>nobase_</code></a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nodist_005f"><code>nodist_</code></a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nodist_005f-1"><code>nodist_</code></a> ：</td><td> </td><td valign="top"><a href="#Fine_002dgrained-Distribution-Control">细粒度的分配控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005f"><code>noinst_</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fHEADERS"><code>noinst_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fHEADERS-1"><code>noinst_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fLIBRARIES"><code>noinst_LIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fLISP"><code>noinst_LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fLTLIBRARIES"><code>noinst_LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Convenience-Libraries">Libtool便利图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fPROGRAMS"><code>noinst_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005fSCRIPTS"><code>noinst_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notrans_005f"><code>notrans_</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-O">Ø</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJC"><code>OBJC</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCCOMPILE"><code>OBJCCOMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCFLAGS"><code>OBJCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCLINK"><code>OBJCLINK</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCLINK-1"><code>OBJCLINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCXX"><code>OBJCXX</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCXXCOMPILE"><code>OBJCXXCOMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCXXFLAGS"><code>OBJCXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCXXLINK"><code>OBJCXXLINK</code></a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCXXLINK-1"><code>OBJCXXLINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-oldinclude_005fHEADERS"><code>oldinclude_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-PACKAGE"><code>PACKAGE</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgdatadir"><code>pkgdatadir</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgdata_005fDATA"><code>pkgdata_DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgdata_005fSCRIPTS"><code>pkgdata_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgincludedir"><code>pkgincludedir</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkginclude_005fHEADERS"><code>pkginclude_HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglibdir"><code>pkglibdir</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglibexecdir"><code>pkglibexecdir</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglibexec_005fPROGRAMS"><code>pkglibexec_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglibexec_005fSCRIPTS"><code>pkglibexec_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglib_005fLIBRARIES"><code>pkglib_LIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglib_005fLTLIBRARIES"><code>pkglib_LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgpyexecdir"><code>pkgpyexecdir</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgpythondir"><code>pkgpythondir</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PROGRAMS"><code>PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PROGRAMS-1"><code>PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pyexecdir"><code>pyexecdir</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON"><code>PYTHON</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON-1"><code>PYTHON</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pythondir"><code>pythondir</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON_005fEXEC_005fPREFIX"><code>PYTHON_EXEC_PREFIX</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON_005fPLATFORM"><code>PYTHON_PLATFORM</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON_005fPREFIX"><code>PYTHON_PREFIX</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON_005fVERSION"><code>PYTHON_VERSION</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-R">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-RECHECK_005fLOGS"><code>RECHECK_LOGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RFLAGS"><code>RFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RUNTEST"><code>RUNTEST</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RUNTESTDEFAULTFLAGS"><code>RUNTESTDEFAULTFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RUNTESTFLAGS"><code>RUNTESTFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-S">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-sbin_005fPROGRAMS"><code>sbin_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sbin_005fSCRIPTS"><code>sbin_SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCRIPTS"><code>SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCRIPTS-1"><code>SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sharedstate_005fDATA"><code>sharedstate_DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SOURCES"><code>SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SOURCES-1"><code>SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUBDIRS"><code>SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories">子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUBDIRS-1"><code>SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUFFIXES"><code>SUFFIXES</code></a> ：</td><td> </td><td valign="top"><a href="#Suffixes">后缀</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sysconf_005fDATA"><code>sysconf_DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-T">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-TAGS_005fDEPENDENCIES"><code>TAGS_DEPENDENCIES</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-target_005ftriplet"><code>target_triplet</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TESTS"><code>TESTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TESTS-1"><code>TESTS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TESTS_005fENVIRONMENT"><code>TESTS_ENVIRONMENT</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEST_005fEXTENSIONS"><code>TEST_EXTENSIONS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEST_005fLOGS"><code>TEST_LOGS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEST_005fSUITE_005fLOG"><code>TEST_SUITE_LOG</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEXI2DVI"><code>TEXI2DVI</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEXI2PDF"><code>TEXI2PDF</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEXINFOS"><code>TEXINFOS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEXINFOS-1"><code>TEXINFOS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEXINFO_005fTEX"><code>TEXINFO_TEX</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-top_005fdistdir"><code>top_distdir</code></a> ：</td><td> </td><td valign="top"><a href="#The-dist-Hook">dist钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-top_005fdistdir-1"><code>top_distdir</code></a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-U">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPC"><code>UPC</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPC-1"><code>UPC</code></a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPCCOMPILE"><code>UPCCOMPILE</code></a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPCFLAGS"><code>UPCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPCLINK"><code>UPCLINK</code></a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPCLINK-1"><code>UPCLINK</code></a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-V"><code><code>V</code></code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VALAC"><code>VALAC</code></a> ：</td><td> </td><td valign="top"><a href="#Vala-Support">瓦拉支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VALAFLAGS"><code>VALAFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Vala-Support">瓦拉支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VERBOSE"><code>VERBOSE</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VERSION"><code>VERSION</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-W">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-WARNINGS"><code>WARNINGS</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-WARNINGS-1"><code>WARNINGS</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-WITH_005fDMALLOC"><code>WITH_DMALLOC</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-XFAIL_005fTESTS"><code>XFAIL_TESTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-XZ_005fOPT"><code>XZ_OPT</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Variable-Index_vr_letter-Y">ÿ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-YACC"><code>YACC</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-YFLAGS"><code>YFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Variable-Index_vr_symbol-1"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#Variable-Index_vr_letter-A"><b>A</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-B"><b>B</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-C"><b>C</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-D"><b>D</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-E"><b>E</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-F"><b>F</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-G"><b>G</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-H"><b>H</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-I"><b>I</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-J"><b>J</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-L"><b>L</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-M"><b>M</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-N"><b>N</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-O"><b>O</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-P"><b>P</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-R"><b>R</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-S"><b>S</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-T"><b>T</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-U"><b>U</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-V"><b>V</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-W"><b>W</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-X"><b>X</b></a> <a class="summary-letter" href="#Variable-Index_vr_letter-Y"><b>Y</b></a>
   
</td></tr></tbody></table>

<hr>
<a name="General-Index"></a>
<div class="header">
<p>上一页： <a href="#Variable-Index" rel="prev" accesskey="p">可变索引</a> ，上一个： <a href="#Indices" rel="up" accesskey="u">索引</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Indices" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="General-Index-1"></a>
<h3 class="appendixsec">B.3总索引</h3>

<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#General-Index_cp_symbol-1"><b>＃</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-2"><b>$</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-3"><b>+</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-4"><b>-</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-5"><b>。</b></a>
   
<a class="summary-letter" href="#General-Index_cp_symbol-6"><b>：</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-7"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#General-Index_cp_letter-A"><b>A</b></a> <a class="summary-letter" href="#General-Index_cp_letter-B"><b>B</b></a> <a class="summary-letter" href="#General-Index_cp_letter-C"><b>C</b></a> <a class="summary-letter" href="#General-Index_cp_letter-D"><b>D</b></a> <a class="summary-letter" href="#General-Index_cp_letter-E"><b>E</b></a> <a class="summary-letter" href="#General-Index_cp_letter-F"><b>F</b></a> <a class="summary-letter" href="#General-Index_cp_letter-G"><b>G</b></a> <a class="summary-letter" href="#General-Index_cp_letter-H"><b>H</b></a> <a class="summary-letter" href="#General-Index_cp_letter-I"><b>I</b></a> <a class="summary-letter" href="#General-Index_cp_letter-J"><b>J</b></a> <a class="summary-letter" href="#General-Index_cp_letter-L"><b>L</b></a> <a class="summary-letter" href="#General-Index_cp_letter-M"><b>M</b></a> <a class="summary-letter" href="#General-Index_cp_letter-N"><b>N</b></a> <a class="summary-letter" href="#General-Index_cp_letter-O"><b>O</b></a> <a class="summary-letter" href="#General-Index_cp_letter-P"><b>P</b></a> <a class="summary-letter" href="#General-Index_cp_letter-R"><b>R</b></a> <a class="summary-letter" href="#General-Index_cp_letter-S"><b>S</b></a> <a class="summary-letter" href="#General-Index_cp_letter-T"><b>T</b></a> <a class="summary-letter" href="#General-Index_cp_letter-U"><b>U</b></a> <a class="summary-letter" href="#General-Index_cp_letter-V"><b>V</b></a> <a class="summary-letter" href="#General-Index_cp_letter-W"><b>W</b></a> <a class="summary-letter" href="#General-Index_cp_letter-X"><b>X</b></a> <a class="summary-letter" href="#General-Index_cp_letter-Y"><b>Y</b></a> <a class="summary-letter" href="#General-Index_cp_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>
<table class="index-cp" border="0">
<tbody><tr><td></td><th align="left">索引输入</th><td> </td><th align="left">部分</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-1">＃</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0023-_0028special-Automake-comment_0029"><code>##</code> （特殊的Automake评论）</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023serial-syntax"><code>#serial</code>语法</a> ：</td><td> </td><td valign="top"><a href="#Serials">连续剧</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-2">$</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0024_0028LIBOBJS_0029-and-empty-libraries">' <samp>$(LIBOBJS)</samp>和空库</a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-3">+</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002b_003d"><code>+=</code></a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-4">--</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dadd_002dmissing"><code>--add-missing</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dautomake_002dacdir"><code>--automake-acdir</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dbuild_003dbuild"><code>--build=<var>build</var></code></a> ：</td><td> </td><td valign="top"><a href="#Cross_002dCompilation">交叉编译</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dcopy"><code>--copy</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddiff"><code>--diff</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddisable_002ddependency_002dtracking"><code>--disable-dependency-tracking</code></a> ：</td><td> </td><td valign="top"><a href="#Dependency-Tracking">依赖追踪</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddisable_002dmaintainer_002dmode"><code>--disable-maintainer-mode</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddisable_002dsilent_002drules"><code>--disable-silent-rules</code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddry_002drun"><code>--dry-run</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002denable_002ddebug_002c-example"><samp>--enable-debug</samp> ，例如</a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002denable_002ddependency_002dtracking"><code>--enable-dependency-tracking</code></a> ：</td><td> </td><td valign="top"><a href="#Dependency-Tracking">依赖追踪</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002denable_002dmaintainer_002dmode"><code>--enable-maintainer-mode</code></a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002denable_002dsilent_002drules"><code>--enable-silent-rules</code></a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dforce"><code>--force</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dforce_002dmissing"><code>--force-missing</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dforeign"><code>--foreign</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dgnits"><code>--gnits</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dgnits_002c-complete-description"><samp>--gnits</samp> ，完整说明</a> ：</td><td> </td><td valign="top"><a href="#Gnits">针织衫</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dgnu"><code>--gnu</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dgnu_002c-complete-description"><samp>--gnu</samp> ，完整说明</a> ：</td><td> </td><td valign="top"><a href="#Gnits">针织衫</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dgnu_002c-required-files"><samp>--gnu</samp> ，所需文件</a> ：</td><td> </td><td valign="top"><a href="#Gnits">针织衫</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp"><code>--help</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp-1"><code>--help</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp-check"><samp>--help</samp>检查</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp_003drecursive"><code>--help=recursive</code></a> ：</td><td> </td><td valign="top"><a href="#Nested-Packages">嵌套包装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhost_003dhost"><code>--host=<var>host</var></code></a> ：</td><td> </td><td valign="top"><a href="#Cross_002dCompilation">交叉编译</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dinclude_002ddeps"><code>--include-deps</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dinstall"><code>--install</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dlibdir"><code>--libdir</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dno_002dforce"><code>--no-force</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002doutput"><code>--output</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002doutput_002ddir"><code>--output-dir</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dprefix"><code>--prefix</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Directory-Variables">标准目录变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002dac_002ddir"><code>--print-ac-dir</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002dlibdir"><code>--print-libdir</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dprogram_002dprefix_003dprefix"><code>--program-prefix=<var>prefix</var></code></a> ：</td><td> </td><td valign="top"><a href="#Renaming">重命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dprogram_002dsuffix_003dsuffix"><code>--program-suffix=<var>suffix</var></code></a> ：</td><td> </td><td valign="top"><a href="#Renaming">重命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dprogram_002dtransform_002dname_003dprogram"><code>--program-transform-name=<var>program</var></code></a> ：</td><td> </td><td valign="top"><a href="#Renaming">重命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dsystem_002dacdir"><code>--system-acdir</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dtarget_003dtarget"><code>--target=<var>target</var></code></a> ：</td><td> </td><td valign="top"><a href="#Cross_002dCompilation">交叉编译</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dverbose"><code>--verbose</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dverbose-1"><code>--verbose</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dversion"><code>--version</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dversion-1"><code>--version</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dversion-check"><samp>--version</samp>检查</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dwarnings"><code>--warnings</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dwarnings-1"><code>--warnings</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dwith_002ddmalloc"><code>--with-dmalloc</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002da"><code>-a</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dc"><code>-c</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df"><code>-f</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dhook-targets"><samp>-hook</samp>目标</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002di"><code>-i</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dI"><code>-I</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dl-and-LDADD"><samp>-l</samp>和<code>LDADD</code></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dlocal-targets"><samp>-local</samp>目标</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dmodule_002c-libtool"><samp>-module</samp> ，libtool</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Modules">Libtool模块</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002do"><code>-o</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dv"><code>-v</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dW"><code>-W</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dW-1"><code>-W</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dWall"><code>-Wall</code></a> ：</td><td> </td><td valign="top"><a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello的configure.ac安装说明</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dWerror"><code>-Werror</code></a> ：</td><td> </td><td valign="top"><a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello的configure.ac安装说明</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-5">。</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ela-suffix_002c-defined"><samp>.la</samp>后缀，定义</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Concept">Libtool概念</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002elog-files"><samp>.log</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002etrs-files"><samp>.trs</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-6">：</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003acopy_002din_002dglobal_002dlog_003a">：copy-in-global-log</a> ：：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003arecheck_003a">：重新检查</a> ：：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003atest_002dglobal_002dresult_003a">：test-global-result</a> ：：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003atest_002dresult_003a"><code>:test-result:</code></a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_symbol-7">_</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fDATA-primary_002c-defined"><code>_DATA</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fDEPENDENCIES_002c-defined"><code>_DEPENDENCIES</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fHEADERS-primary_002c-defined"><code>_HEADERS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fJAVA-primary_002c-defined"><code>_JAVA</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLDFLAGS_002c-defined"><code>_LDFLAGS</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLDFLAGS_002c-libtool"><code>_LDFLAGS</code> ，libtool</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Flags">Libtool标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLIBADD_002c-libtool"><code>_LIBADD</code> ，libtool</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Flags">Libtool标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLIBRARIES-primary_002c-defined"><code>_LIBRARIES</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLIBTOOLFLAGS_002c-libtool"><code>_LIBTOOLFLAGS</code> ，libtool</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Flags">Libtool标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLISP-primary_002c-defined"><code>_LISP</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fLTLIBRARIES-primary_002c-defined"><code>_LTLIBRARIES</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fMANS-primary_002c-defined"><code>_MANS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fPROGRAMS-primary-variable"><code>_PROGRAMS</code>主要变量</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fPYTHON-primary_002c-defined"><code>_PYTHON</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSCRIPTS-primary_002c-defined"><code>_SCRIPTS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES-and-header-files"><code>_SOURCES</code>和头文件</a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES-primary_002c-defined"><code>_SOURCES</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES_002c-default"><code>_SOURCES</code> ，默认值</a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fSOURCES_002c-empty"><code>_SOURCES</code> ，空</a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fTEXINFOS-primary_002c-defined"><code>_TEXINFOS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-A">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-acinclude_002em4_002c-defined"><samp>acinclude.m4</samp> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Complete">完成</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal-and-serial-numbers"><code>aclocal</code>和序列号</a> ：</td><td> </td><td valign="top"><a href="#Serials">连续剧</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal-program_002c-introduction"><code>aclocal</code>程序，介绍</a> ：</td><td> </td><td valign="top"><a href="#Complete">完成</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal-search-path"><code>aclocal</code>搜索路径</a> ：</td><td> </td><td valign="top"><a href="#Macro-Search-Path">宏搜索路径</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_0027s-scheduled-death"><code>aclocal</code>的预定死亡时间</a> ：</td><td> </td><td valign="top"><a href="#Future-of-aclocal">本地人的未来</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_002c-extending"><code>aclocal</code> ，扩展</a> ：</td><td> </td><td valign="top"><a href="#Extending-aclocal">扩展aclocal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_002c-Invocation"><code>aclocal</code> ，调用</a> ：</td><td> </td><td valign="top"><a href="#aclocal-Invocation">本地调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_002c-Invoking"><code>aclocal</code> ，调用</a> ：</td><td> </td><td valign="top"><a href="#aclocal-Invocation">本地调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_002c-Options"><code>aclocal</code> ，选项</a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_002c-using"><code>aclocal</code> ，使用</a> ：</td><td> </td><td valign="top"><a href="#configure">配置</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aclocal_002em4_002c-preexisting"><samp>aclocal.m4</samp> ，先前存在</a> ：</td><td> </td><td valign="top"><a href="#Complete">完成</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ACLOCAL_005fPATH"><code>ACLOCAL_PATH</code></a> ：</td><td> </td><td valign="top"><a href="#Macro-Search-Path">宏搜索路径</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fCONFIG_005fFILES_002c-conditional"><code>AC_CONFIG_FILES</code> ，有条件的</a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AC_005fSUBST-and-SUBDIRS"><code>AC_SUBST</code>和<code>SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories-with-AC_005fSUBST">带有AC_SUBST的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Adding-new-SUFFIXES">新增<code>SUFFIXES</code></a> ：</td><td> </td><td valign="top"><a href="#Suffixes">后缀</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-all"><code>all</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-all-1"><code>all</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-all_002dlocal"><code>all-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOCA_002c-and-Libtool"><code>ALLOCA</code>和Libtool</a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOCA_002c-example"><code>ALLOCA</code> ，例如</a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOCA_002c-special-handling"><code>ALLOCA</code> ，特殊处理</a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-amhello_002d1_002e0_002etar_002egz_002c-creation"><samp>amhello-1.0.tar.gz</samp> ，创作</a> ：</td><td> </td><td valign="top"><a href="#Hello-World">你好，世界</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-amhello_002d1_002e0_002etar_002egz_002c-location"><samp>amhello-1.0.tar.gz</samp> ，位置</a> ：</td><td> </td><td valign="top"><a href="#Use-Cases">用例</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-amhello_002d1_002e0_002etar_002egz_002c-use-cases"><samp>amhello-1.0.tar.gz</samp> ，用例</a> ：</td><td> </td><td valign="top"><a href="#Use-Cases">用例</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCCASFLAGS-and-CCASFLAGS"><code>AM_CCASFLAGS</code>和<code>CCASFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCFLAGS-and-CFLAGS"><code>AM_CFLAGS</code>和<code>CFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCONDITIONAL-and-SUBDIRS"><code>AM_CONDITIONAL</code>和<code>SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories-with-AM_005fCONDITIONAL">具有AM_CONDITIONAL的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCPPFLAGS-and-CPPFLAGS"><code>AM_CPPFLAGS</code>和<code>CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fCXXFLAGS-and-CXXFLAGS"><code>AM_CXXFLAGS</code>和<code>CXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fFCFLAGS-and-FCFLAGS"><code>AM_FCFLAGS</code>和<code>FCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fFFLAGS-and-FFLAGS"><code>AM_FFLAGS</code>和<code>FFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fGCJFLAGS-and-GCJFLAGS"><code>AM_GCJFLAGS</code>和<code>GCJFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fINIT_005fAUTOMAKE_002c-example-use"><code>AM_INIT_AUTOMAKE</code> ，示例使用</a> ：</td><td> </td><td valign="top"><a href="#Complete">完成</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLDFLAGS-and-LDFLAGS"><code>AM_LDFLAGS</code>和<code>LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLFLAGS-and-LFLAGS"><code>AM_LFLAGS</code>和<code>LFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fLIBTOOLFLAGS-and-LIBTOOLFLAGS"><code>AM_LIBTOOLFLAGS</code>和<code>LIBTOOLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fMAINTAINER_005fMODE_002c-purpose"><code>AM_MAINTAINER_MODE</code> ，目的</a> ：</td><td> </td><td valign="top"><a href="#maintainer_002dmode">维护者模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fOBJCFLAGS-and-OBJCFLAGS"><code>AM_OBJCFLAGS</code>和<code>OBJCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fOBJCXXFLAGS-and-OBJXXCFLAGS"><code>AM_OBJCXXFLAGS</code>和<code>OBJXXCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fRFLAGS-and-RFLAGS"><code>AM_RFLAGS</code>和<code>RFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fUPCFLAGS-and-UPCFLAGS"><code>AM_UPCFLAGS</code>和<code>UPCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AM_005fYFLAGS-and-YFLAGS"><code>AM_YFLAGS</code>和<code>YFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-operator">追加运算符</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ARG_005fMAX">ARG_MAX</a> ：</td><td> </td><td valign="top"><a href="#Length-Limitations">长度限制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autogen_002esh-and-autoreconf"><samp>autogen.sh</samp>和<code>autoreconf</code></a> ：</td><td> </td><td valign="top"><a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autom4te">autom4te</a> ：</td><td> </td><td valign="top"><a href="#aclocal-Invocation">本地调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automake-constraints">自动制作约束</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-automake-options"><code>automake</code>选项</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automake-parser_002c-limitations-of">Automake解析器，限制</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automake-requirements">自动制作要求</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automake-requirements-1">自动制作要求</a> ：</td><td> </td><td valign="top"><a href="#Requirements">要求</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-automake_002c-invocation"><code>automake</code> ，调用</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-automake_002c-invoking"><code>automake</code> ，调用</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automake_002c-recursive-operation">自动制作，递归操作</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automatic-dependency-tracking">自动依赖性跟踪</a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automatic-linker-selection">自动链接器选择</a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoreconf-and-libtoolize"><code>autoreconf</code>和<code>libtoolize</code></a> ：</td><td> </td><td valign="top"><a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoreconf_002c-example"><code>autoreconf</code> ，例如</a> ：</td><td> </td><td valign="top"><a href="#Creating-amhello">创建amhello</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoscan"><code>autoscan</code></a> ：</td><td> </td><td valign="top"><a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello的configure.ac安装说明</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Autotools_002c-introduction">自动工具，简介</a> ：</td><td> </td><td valign="top"><a href="#GNU-Build-System">GNU构建系统</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Autotools_002c-purpose">自动工具，用途</a> ：</td><td> </td><td valign="top"><a href="#Why-Autotools">为什么要使用自动工具</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoupdate">自动更新</a> ：</td><td> </td><td valign="top"><a href="#Obsolete-Macros">过时的宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Auxiliary-programs">辅助程序</a> ：</td><td> </td><td valign="top"><a href="#Auxiliary-Programs">辅助程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Avoiding-man-page-renaming">避免重命名手册页</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Avoiding-path-stripping">避免路径剥离</a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-B">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Binary-package">二进制包</a> ：</td><td> </td><td valign="top"><a href="#DESTDIR">DESTDIR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bootstrap-and-autoreconf"><samp>bootstrap</samp>和<code>autoreconf</code></a> ：</td><td> </td><td valign="top"><a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bugs_002c-reporting">错误报告</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-build-tree-and-source-tree">构建树和源树</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BUILT_005fSOURCES_002c-defined"><code>BUILT_SOURCES</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Sources">资料来源</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-C_002b_002b-support">C ++支持</a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-canonicalizing-Automake-variables">规范化Automake变量</a> ：</td><td> </td><td valign="top"><a href="#Canonicalization">规范化</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CCASFLAGS-and-AM_005fCCASFLAGS"><code>CCASFLAGS</code>和<code>AM_CCASFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CFLAGS-and-AM_005fCFLAGS"><code>CFLAGS</code>和<code>AM_CFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cfortran">cfortran</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check"><code>check</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check-1"><code>check</code></a> ：</td><td> </td><td valign="top"><a href="#Tests">测验</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check-2"><code>check</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dlocal"><code>check-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dnews"><code>check-news</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005f-primary-prefix_002c-definition">' <samp>check_</samp> '主要前缀，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_005fPROGRAMS-example"><code>check_PROGRAMS</code>例如</a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clean"><code>clean</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clean-1"><code>clean</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clean_002dlocal"><code>clean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clean_002dlocal-1"><code>clean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Colorized-testsuite-output">彩色测试套件输出</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command-line-length-limit">命令行长度限制</a> ：</td><td> </td><td valign="top"><a href="#Length-Limitations">长度限制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Comment_002c-special-to-Automake">评论，对Automake来说很特殊</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Compilation-of-Java-to-bytecode">将Java编译为字节码</a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Compilation-of-Java-to-native-code">Java到本机代码的编译</a> ：</td><td> </td><td valign="top"><a href="#Java-Support-with-gcj">gcj的Java支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Compile-Flag-Variables">编译标志变量</a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Complete-example">完整的例子</a> ：</td><td> </td><td valign="top"><a href="#Complete">完成</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-example_002c-_002d_002denable_002ddebug">有条件的例子<samp>--enable-debug</samp></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conditional-libtool-libraries">条件libtool库</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Libtool-Libraries">条件Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-programs">有条件的程序</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Programs">有条件程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-subdirectories">条件子目录</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Subdirectories">条件子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-SUBDIRS">有条件的<code>SUBDIRS</code></a> ：</td><td> </td><td valign="top"><a href="#Conditional-Subdirectories">条件子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditionals">有条件的</a> ：</td><td> </td><td valign="top"><a href="#Conditionals">有条件的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-config_002eguess"><samp>config.guess</samp></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-config_002esite-example"><samp>config.site</samp>例如</a> ：</td><td> </td><td valign="top"><a href="#config_002esite">config.site</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configuration-variables_002c-overriding">配置变量，覆盖</a> ：</td><td> </td><td valign="top"><a href="#Standard-Configuration-Variables">标准配置变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Configuration_002c-basics">配置，基础</a> ：</td><td> </td><td valign="top"><a href="#Basic-Installation">基本安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Configure-substitutions-in-TESTS">在中配置替代<code>TESTS</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configure_002eac_002c-Hello-World"><samp>configure.ac</samp> ，Hello World</a> ：</td><td> </td><td valign="top"><a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello的configure.ac安装说明</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configure_002eac_002c-scanning"><samp>configure.ac</samp> ，扫描</a> ：</td><td> </td><td valign="top"><a href="#configure">配置</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conflicting-definitions">定义冲突</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Constraints-of-Automake">Automake的约束</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-convenience-libraries_002c-libtool">便捷库libtool</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Convenience-Libraries">Libtool便利图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-copying-semantics">复制语义</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cpio-example"><code>cpio</code>例如</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CPPFLAGS-and-AM_005fCPPFLAGS"><code>CPPFLAGS</code>和<code>AM_CPPFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cross_002dcompilation">交叉编译</a> ：</td><td> </td><td valign="top"><a href="#Cross_002dCompilation">交叉编译</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cross_002dcompilation-example">交叉编译示例</a> ：</td><td> </td><td valign="top"><a href="#Cross_002dCompilation">交叉编译</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CVS-and-generated-files">CVS和生成的文件</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CVS-and-third_002dparty-files">CVS和第三方文件</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CVS-and-timestamps">CVS和时间戳</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CXXFLAGS-and-AM_005fCXXFLAGS"><code>CXXFLAGS</code>和<code>AM_CXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-D">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-DATA-primary_002c-defined"><code>DATA</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debug-build_002c-example">调试版本，例如</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugging-rules">调试规则</a> ：</td><td> </td><td valign="top"><a href="#Debugging-Make-Rules">调试制作规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-default-source_002c-Libtool-modules-example">默认来源，Libtool模块示例</a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-default-verbosity-for-silent-rules">静默规则的默认详细程度</a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-default-_005fSOURCES">默认<code>_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-definitions_002c-conflicts">定义，冲突</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dejagnu"><code>dejagnu</code></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dejagnu-1"><code>dejagnu</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-depcomp"><code>depcomp</code></a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dependencies-and-distributed-files">依赖项和分布式文件</a> ：</td><td> </td><td valign="top"><a href="#Errors-with-distclean">distclean错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Dependency-tracking">依赖跟踪</a> ：</td><td> </td><td valign="top"><a href="#Dependency-Tracking">依赖追踪</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Dependency-tracking-1">依赖跟踪</a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Dependency-tracking_002c-disabling">依赖跟踪，禁用</a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-directory-variables">目录变量</a> ：</td><td> </td><td valign="top"><a href="#Standard-Directory-Variables">标准目录变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dirlist"><samp>dirlist</samp></a> ：</td><td> </td><td valign="top"><a href="#Macro-Search-Path">宏搜索路径</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Disabling-dependency-tracking">禁用依赖项跟踪</a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Disabling-hard-errors">禁用硬错误</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist"><code>dist</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist-1"><code>dist</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dbzip2-1"><code>dist-bzip2</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dbzip2-2"><code>dist-bzip2</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dbzip2"><code>dist-bzip2</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dgzip"><code>dist-gzip</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dhook"><code>dist-hook</code></a> ：</td><td> </td><td valign="top"><a href="#The-dist-Hook">dist钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dhook-1"><code>dist-hook</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dlzip-1"><code>dist-lzip</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dlzip-2"><code>dist-lzip</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dlzip"><code>dist-lzip</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dshar-1"><code>dist-shar</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dshar-2"><code>dist-shar</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dshar"><code>dist-shar</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dtarZ-1"><code>dist-tarZ</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dtarZ-2"><code>dist-tarZ</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dtarZ"><code>dist-tarZ</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dxz-1"><code>dist-xz</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dxz-2"><code>dist-xz</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dxz"><code>dist-xz</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dzip-1"><code>dist-zip</code></a> ：</td><td> </td><td valign="top"><a href="#The-Types-of-Distributions">分布类型</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dzip-2"><code>dist-zip</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_002dzip"><code>dist-zip</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcheck"><code>distcheck</code></a> ：</td><td> </td><td valign="top"><a href="#Creating-amhello">创建amhello</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcheck-1"><code>distcheck</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcheck-better-than-dist"><code>distcheck</code>优于<code>dist</code></a> ：</td><td> </td><td valign="top"><a href="#Preparing-Distributions">准备发行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcheck-example"><code>distcheck</code>例如</a> ：</td><td> </td><td valign="top"><a href="#Creating-amhello">创建amhello</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcheck_002dhook"><code>distcheck-hook</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distclean"><code>distclean</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distclean-1"><code>distclean</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distclean-2"><code>distclean</code></a> ：</td><td> </td><td valign="top"><a href="#Errors-with-distclean">distclean错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distclean_002c-diagnostic"><code>distclean</code> ，诊断</a> ：</td><td> </td><td valign="top"><a href="#Errors-with-distclean">distclean错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distclean_002dlocal"><code>distclean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distclean_002dlocal-1"><code>distclean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distcleancheck"><code>distcleancheck</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distdir"><code>distdir</code></a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Distinction-between-errors-and-failures-in-testsuites">测试套件中错误和失败之间的区别</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Distributions_002c-preparation">发行，准备</a> ：</td><td> </td><td valign="top"><a href="#Preparing-Distributions">准备发行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distuninstallcheck"><code>distuninstallcheck</code></a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_005f-and-nobase_005f"><code>dist_</code>和<code>nobase_</code></a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dist_005f-and-notrans_005f"><code>dist_</code>和<code>notrans_</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIST_005fSUBDIRS_002c-explained"><code>DIST_SUBDIRS</code> ，说明</a> ：</td><td> </td><td valign="top"><a href="#SUBDIRS-vs-DIST_005fSUBDIRS">SUBDIRS与DIST_SUBDIRS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_002c-support-for"><code>dmalloc</code> ，支持</a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dvi"><code>dvi</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dvi-1"><code>dvi</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DVI-output-using-Texinfo">使用Texinfo的DVI输出</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dvi_002dlocal"><code>dvi-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-E">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-E_002dmail_002c-bug-reports">电子邮件，错误报告</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EDITION-Texinfo-flag"><code>EDITION</code> Texinfo标志</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-else"><code>else</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Empty-libraries">空库</a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Empty-libraries-and-_0024_0028LIBOBJS_0029">空库和“ <samp>$(LIBOBJS)</samp> '</a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-_005fSOURCES">空的<code>_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endif"><code>endif</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example-conditional-_002d_002denable_002ddebug">条件示例<samp>--enable-debug</samp></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example-conditional-AC_005fCONFIG_005fFILES">条件示例<code>AC_CONFIG_FILES</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example-Hello-World">示例Hello World</a> ：</td><td> </td><td valign="top"><a href="#Hello-World">你好，世界</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example-of-recursive-operation">递归操作示例</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example-of-shared-libraries">共享库示例</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example_002c-EXTRA_005fPROGRAMS">例， <code>EXTRA_PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example_002c-false-and-true">例， <code>false</code>和<code>true</code></a> ：</td><td> </td><td valign="top"><a href="#true">真正</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Example_002c-mixed-language">示例，混合语言</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Executable-extension">可执行扩展名</a> ：</td><td> </td><td valign="top"><a href="#EXEEXT">EXEEXT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Exit-status-77_002c-special-interpretation">退出状态77，特殊解释</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Exit-status-99_002c-special-interpretation">退出状态99，特殊解释</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expected-failure">预期的失败</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expected-test-failure">预期的测试失败</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Expected-test-failure">预期的测试失败</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extending-aclocal">延伸<code>aclocal</code></a> ：</td><td> </td><td valign="top"><a href="#Extending-aclocal">扩展aclocal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extending-list-of-installation-directories">扩展安装目录列表</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extension_002c-executable">扩展名，可执行文件</a> ：</td><td> </td><td valign="top"><a href="#EXEEXT">EXEEXT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extra-files-distributed-with-Automake">与Automake一起分发的其他文件</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005f_002c-prepending"><code>EXTRA_</code> ，前置</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fPROGRAMS_002c-defined"><code>EXTRA_PROGRAMS</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fPROGRAMS_002c-defined-1"><code>EXTRA_PROGRAMS</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Programs">有条件程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EXTRA_005fprog_005fSOURCES_002c-defined"><code>EXTRA_prog_SOURCES</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Sources">有条件的来源</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-false-Example"><code>false</code>范例</a> ：</td><td> </td><td valign="top"><a href="#true">真正</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FCFLAGS-and-AM_005fFCFLAGS"><code>FCFLAGS</code>和<code>AM_FCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Features-of-the-GNU-Build-System">GNU Build系统的功能</a> ：</td><td> </td><td valign="top"><a href="#Use-Cases">用例</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FFLAGS-and-AM_005fFFLAGS"><code>FFLAGS</code>和<code>AM_FFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-names_002c-limitations-on">文件名，限制</a> ：</td><td> </td><td valign="top"><a href="#Limitations-on-File-Names">文件名限制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-filename_002dlength_002dmax_003d99"><code>filename-length-max=99</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Files-distributed-with-Automake">用Automake分发的文件</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-First-line-of-Makefile_002eam">Makefile.am的第一行</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Flag-variables_002c-ordering">标记变量，顺序</a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Flag-Variables_002c-Ordering">标记变量，顺序</a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FLIBS_002c-defined"><code>FLIBS</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-foreign"><code>foreign</code></a> ：</td><td> </td><td valign="top"><a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello的configure.ac安装说明</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-foreign-1"><code>foreign</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-foreign-strictness"><samp>foreign</samp>严格性</a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fortran-77-support">Fortran 77支持</a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fortran-77_002c-mixing-with-C-and-C_002b_002b">Fortran 77，与C和C ++混合</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fortran-77_002c-Preprocessing">Fortran 77，预处理</a> ：</td><td> </td><td valign="top"><a href="#Preprocessing-Fortran-77">预处理Fortran 77</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fortran-9x-support">Fortran 9x支持</a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-GCJFLAGS-and-AM_005fGCJFLAGS"><code>GCJFLAGS</code>和<code>AM_GCJFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-generated-files-and-CVS">生成的文件和CVS</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-generated-files_002c-distributed">生成的文件，分布</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Gettext-support">Gettext支持</a> ：</td><td> </td><td valign="top"><a href="#gettext">文字</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-git_002ddist"><code>git-dist</code></a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-git_002ddist_002c-non_002dstandard-example"><code>git-dist</code> ，非标准示例</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gnits"><code>gnits</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gnits-strictness"><samp>gnits</samp>严格性</a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gnu"><code>gnu</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Build-System_002c-basics">GNU Build System，基础知识</a> ：</td><td> </td><td valign="top"><a href="#Basic-Installation">基本安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Build-System_002c-features">GNU Build System，功能</a> ：</td><td> </td><td valign="top"><a href="#Use-Cases">用例</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Build-System_002c-introduction">GNU Build System，简介</a> ：</td><td> </td><td valign="top"><a href="#GNU-Build-System">GNU构建系统</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Build-System_002c-use-cases">GNU Build System，用例</a> ：</td><td> </td><td valign="top"><a href="#Use-Cases">用例</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Coding-Standards">GNU编码标准</a> ：</td><td> </td><td valign="top"><a href="#GNU-Build-System">GNU构建系统</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Gettext-support">GNU Gettext支持</a> ：</td><td> </td><td valign="top"><a href="#gettext">文字</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-make-extensions">GNU make扩展</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-Makefile-standards">GNU Makefile标准</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gnu-strictness"><samp>gnu</samp>严格性</a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNUmakefile-including-Makefile"><samp>GNUmakefile</samp>包含<samp>Makefile</samp></a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hard-error">硬错误</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Header-files-in-_005fSOURCES">头文件在<code>_SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HEADERS-primary_002c-defined"><code>HEADERS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HEADERS_002c-installation-directories"><code>HEADERS</code> ，安装目录</a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hello-World-example">Hello World示例</a> ：</td><td> </td><td valign="top"><a href="#Hello-World">你好，世界</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hook-targets">挂钩目标</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HP_002dUX-10_002c-lex-problems">HP-UX 10， <code>lex</code>问题</a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-html"><code>html</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-html-1"><code>html</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HTML-output-using-Texinfo">使用Texinfo的HTML输出</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-html_002dlocal"><code>html-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-I">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-id"><code>id</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-if"><code>if</code></a> ：</td><td> </td><td valign="top"><a href="#Usage-of-Conditionals">条件句的用法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-include"><code>include</code></a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-include-1"><code>include</code></a> ：</td><td> </td><td valign="top"><a href="#Include">包括</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-include_002c-distribution"><code>include</code> ，分布</a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Including-Makefile-fragment">包含<samp>Makefile</samp>片段</a> ：</td><td> </td><td valign="top"><a href="#Include">包括</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-indentation-in-Makefile_002eam">Makefile.am中的缩进</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-info"><code>info</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-info-1"><code>info</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-info_002din_002dbuilddir"><code>info-in-builddir</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-info_002dlocal"><code>info-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install"><code>install</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install-1"><code>install</code></a> ：</td><td> </td><td valign="top"><a href="#The-Two-Parts-of-Install">安装的两个部分</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install-2"><code>install</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Install-hook">安装挂钩</a> ：</td><td> </td><td valign="top"><a href="#Extending-Installation">扩展安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Install_002c-two-parts-of">安装以下两个部分</a> ：</td><td> </td><td valign="top"><a href="#The-Two-Parts-of-Install">安装的两个部分</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddata"><code>install-data</code></a> ：</td><td> </td><td valign="top"><a href="#Two_002dPart-Install">两部分安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddata-1"><code>install-data</code></a> ：</td><td> </td><td valign="top"><a href="#The-Two-Parts-of-Install">安装的两个部分</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddata-2"><code>install-data</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddata_002dhook"><code>install-data-hook</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddata_002dlocal"><code>install-data-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending-Installation">扩展安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddata_002dlocal-1"><code>install-data-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddvi"><code>install-dvi</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddvi-1"><code>install-dvi</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002ddvi_002dlocal"><code>install-dvi-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dexec"><code>install-exec</code></a> ：</td><td> </td><td valign="top"><a href="#Two_002dPart-Install">两部分安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dexec-1"><code>install-exec</code></a> ：</td><td> </td><td valign="top"><a href="#The-Two-Parts-of-Install">安装的两个部分</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dexec-2"><code>install-exec</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dexec_002dhook"><code>install-exec-hook</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dexec_002dlocal"><code>install-exec-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending-Installation">扩展安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dexec_002dlocal-1"><code>install-exec-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dhtml"><code>install-html</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dhtml-1"><code>install-html</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dhtml_002dlocal"><code>install-html-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dinfo"><code>install-info</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dinfo-1"><code>install-info</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dinfo-2"><code>install-info</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dinfo-target"><code>install-info</code>目标</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dinfo_002dlocal"><code>install-info-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dman"><code>install-man</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dman-1"><code>install-man</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dman-target"><code>install-man</code>目标</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dpdf"><code>install-pdf</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dpdf-1"><code>install-pdf</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dpdf_002dlocal"><code>install-pdf-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dps"><code>install-ps</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dps-1"><code>install-ps</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dps_002dlocal"><code>install-ps-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dstrip"><code>install-strip</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-install_002dstrip-1"><code>install-strip</code></a> ：</td><td> </td><td valign="top"><a href="#Install-Rules-for-the-User">用户安装规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Installation-directories_002c-extending-list">安装目录，扩展列表</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Installation-support">安装支持</a> ：</td><td> </td><td valign="top"><a href="#Install">安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Installation_002c-basics">安装基础</a> ：</td><td> </td><td valign="top"><a href="#Basic-Installation">基本安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installcheck"><code>installcheck</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installcheck-1"><code>installcheck</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installcheck_002dlocal"><code>installcheck-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installdirs"><code>installdirs</code></a> ：</td><td> </td><td valign="top"><a href="#Install-Rules-for-the-User">用户安装规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installdirs-1"><code>installdirs</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installdirs_002dlocal"><code>installdirs-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Installing-headers">安装标题</a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Installing-scripts">安装脚本</a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installing-versioned-binaries">安装版本化的二进制文件</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Interfacing-with-third_002dparty-packages">与第三方软件包的接口</a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Invocation-of-aclocal">调用<code>aclocal</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Invocation">本地调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Invocation-of-automake">调用<code>automake</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Invoking-aclocal">调用中<code>aclocal</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Invocation">本地调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Invoking-automake">调用中<code>automake</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-J">Ĵ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-JAVA-primary_002c-defined"><code>JAVA</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-JAVA-restrictions"><code>JAVA</code>限制条件</a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Java-support-with-gcj">gcj对Java的支持</a> ：</td><td> </td><td valign="top"><a href="#Java-Support-with-gcj">gcj的Java支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Java-to-bytecode_002c-compilation">Java到字节码，编译</a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Java-to-native-code_002c-compilation">Java到本机代码，编译</a> ：</td><td> </td><td valign="top"><a href="#Java-Support-with-gcj">gcj的Java支持</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-L">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lazy-test-execution">懒惰的测试执行</a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LDADD-and-_002dl"><code>LDADD</code>和<samp>-l</samp></a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LDFLAGS-and-AM_005fLDFLAGS"><code>LDFLAGS</code>和<code>AM_LDFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lex-problems-with-HP_002dUX-10"><code>lex</code> HP-UX 10的问题</a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lex_002c-multiple-lexers"><code>lex</code> ，多个词法分析器</a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LFLAGS-and-AM_005fLFLAGS"><code>LFLAGS</code>和<code>AM_LFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libltdl_002c-introduction"><samp>libltdl</samp> ，简介</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Concept">Libtool概念</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBOBJS_002c-and-Libtool"><code>LIBOBJS</code>和Libtool</a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBOBJS_002c-example"><code>LIBOBJS</code> ，例如</a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBOBJS_002c-special-handling"><code>LIBOBJS</code> ，特殊处理</a> ：</td><td> </td><td valign="top"><a href="#LIBOBJS">LIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBRARIES-primary_002c-defined"><code>LIBRARIES</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtool-convenience-libraries">libtool便捷库</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Convenience-Libraries">Libtool便利图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtool-libraries_002c-conditional">libtool库，有条件的</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Libtool-Libraries">条件Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtool-library_002c-definition">libtool库，定义</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Concept">Libtool概念</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtool-modules">libtool模块</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Modules">Libtool模块</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Libtool-modules_002c-default-source-example">Libtool模块，默认源示例</a> ：</td><td> </td><td valign="top"><a href="#Default-_005fSOURCES">默认值_SOURCES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtool_002c-introduction"><code>libtool</code> ，简介</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Concept">Libtool概念</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LIBTOOLFLAGS-and-AM_005fLIBTOOLFLAGS"><code>LIBTOOLFLAGS</code>和<code>AM_LIBTOOLFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtoolize-and-autoreconf"><code>libtoolize</code>和<code>autoreconf</code></a> ：</td><td> </td><td valign="top"><a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libtoolize_002c-no-longer-run-by-automake"><code>libtoolize</code> ，不再由<code>automake</code></a> ：</td><td> </td><td valign="top"><a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Limitations-of-automake-parser">automake解析器的局限性</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Linking-Fortran-77-with-C-and-C_002b_002b">将Fortran 77与C和C ++链接</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LISP-primary_002c-defined"><code>LISP</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LN_005fS-example"><code>LN_S</code>例如</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-local-targets">本地目标</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTALLOCA_002c-special-handling"><code>LTALLOCA</code> ，特殊处理</a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTLIBOBJS_002c-special-handling"><code>LTLIBOBJS</code> ，特殊处理</a> ：</td><td> </td><td valign="top"><a href="#LTLIBOBJS">LTLIBOBJS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LTLIBRARIES-primary_002c-defined"><code>LTLIBRARIES</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ltmain_002esh-not-found"><samp>ltmain.sh</samp>找不到</a> ：</td><td> </td><td valign="top"><a href="#Error-required-file-ltmain_002esh-not-found">找不到所需的错误文件ltmain.sh</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-M">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-m4_005finclude_002c-distribution"><code>m4_include</code> ，分布</a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Macro-search-path">宏搜索路径</a> ：</td><td> </td><td valign="top"><a href="#Macro-Search-Path">宏搜索路径</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-serial-numbers">宏序列号</a> ：</td><td> </td><td valign="top"><a href="#Serials">连续剧</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Macros-Automake-recognizes">Automake宏可以识别</a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-maintainer_002dclean_002dlocal"><code>maintainer-clean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-check"><code>make check</code></a> ：</td><td> </td><td valign="top"><a href="#Tests">测验</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-clean-support">' <samp>make clean</samp>支持</a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-dist">' <samp>make dist</samp> '</a> ：</td><td> </td><td valign="top"><a href="#Basics-of-Distribution">发行基础</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-distcheck">' <samp>make distcheck</samp> '</a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-distclean_002c-diagnostic">' <samp>make distclean</samp> '，诊断</a> ：</td><td> </td><td valign="top"><a href="#Errors-with-distclean">distclean错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-distcleancheck">' <samp>make distcleancheck</samp> '</a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-distuninstallcheck">' <samp>make distuninstallcheck</samp> '</a> ：</td><td> </td><td valign="top"><a href="#Checking-the-Distribution">检查分布</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-install-support">' <samp>make install</samp>支持</a> ：</td><td> </td><td valign="top"><a href="#Install">安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make-installcheck_002c-testing-_002d_002dhelp-and-_002d_002dversion">' <samp>make installcheck</samp> '，测试<samp>--help</samp>和<samp>--version</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Make-rules_002c-overriding">制定规则，优先于</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Make-targets_002c-overriding">制定目标，覆盖</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Makefile-fragment_002c-including"><samp>Makefile</samp>片段，包括</a> ：</td><td> </td><td valign="top"><a href="#Include">包括</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Makefile_002eam_002c-first-line">Makefile.am，第一行</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Makefile_002eam_002c-Hello-World"><samp>Makefile.am</samp> ，Hello World</a> ：</td><td> </td><td valign="top"><a href="#amhello_0027s-Makefile_002eam-Setup-Explained">amhello的Makefile.am安装说明</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Man-page-renaming_002c-avoiding">重命名手册页，避免</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MANS-primary_002c-defined"><code>MANS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-many-outputs_002c-rules-with">许多输出，规则</a>如下：</td><td> </td><td valign="top"><a href="#Multiple-Outputs">多路输出</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mdate_002dsh"><samp>mdate-sh</samp></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MinGW-cross_002dcompilation-example">MinGW交叉编译示例</a> ：</td><td> </td><td valign="top"><a href="#Cross_002dCompilation">交叉编译</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-missing_002c-purpose"><code>missing</code> ，目的</a> ：</td><td> </td><td valign="top"><a href="#maintainer_002dmode">维护者模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixed-language-example">混合语言示例</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing-Fortran-77-with-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing-Fortran-77-with-C-and_002for-C_002b_002b">将Fortran 77与C和/或C ++混合</a> ：</td><td> </td><td valign="top"><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">将Fortran 77与C和C ++混合</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mkdir-_002dp_002c-macro-check"><code>mkdir -p</code> ，宏检查</a> ：</td><td> </td><td valign="top"><a href="#Obsolete-Macros">过时的宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modules_002c-libtool">模块，libtool</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Modules">Libtool模块</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mostlyclean"><code>mostlyclean</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mostlyclean_002dlocal"><code>mostlyclean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Clean">清洁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mostlyclean_002dlocal-1"><code>mostlyclean-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-configurations_002c-example">多种配置，例如</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multiple-configure_002eac-files">多<samp>configure.ac</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multiple-lex-lexers">多<code>lex</code> lexers</a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-outputs_002c-rules-with">多个输出，规则</a>如下：</td><td> </td><td valign="top"><a href="#Multiple-Outputs">多路输出</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multiple-yacc-parsers">多<code>yacc</code>解析器</a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-N">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Nested-packages">嵌套包装</a> ：</td><td> </td><td valign="top"><a href="#Nested-Packages">嵌套包装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Nesting-packages">嵌套包</a> ：</td><td> </td><td valign="top"><a href="#Subpackages">分包</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddefine"><code>no-define</code></a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddefine-1"><code>no-define</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddependencies"><code>no-dependencies</code></a> ：</td><td> </td><td valign="top"><a href="#Dependencies">依存关系</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddependencies-1"><code>no-dependencies</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddist"><code>no-dist</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddist_002dgzip-1"><code>no-dist-gzip</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002ddist_002dgzip"><code>no-dist-gzip</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dexeext"><code>no-exeext</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dinstallinfo"><code>no-installinfo</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dinstallinfo-1"><code>no-installinfo</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dinstallinfo-option"><code>no-installinfo</code>选项</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dinstallman"><code>no-installman</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dinstallman-1"><code>no-installman</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dinstallman-option"><samp>no-installman</samp>选项</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no_002dtexinfo_002etex"><code>no-texinfo.tex</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nobase_005f-and-dist_005f-or-nodist_005f"><code>nobase_</code>和<code>dist_</code>要么<code>nodist_</code></a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nobase_005f-prefix"><code>nobase_</code>前缀</a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nodist_005f-and-nobase_005f"><code>nodist_</code>和<code>nobase_</code></a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nodist_005f-and-notrans_005f"><code>nodist_</code>和<code>notrans_</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noinst_005f-primary-prefix_002c-definition">' <samp>noinst_</samp> '主要前缀，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dGNU-packages">非GNU软件包</a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dstandard-targets">非标准目标</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nostdinc"><code>nostdinc</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notrans_005f-and-dist_005f-or-nodist_005f"><code>notrans_</code>和<code>dist_</code>要么<code>nodist_</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notrans_005f-prefix"><code>notrans_</code>前缀</a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-O">Ø</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCFLAGS-and-AM_005fOBJCFLAGS"><code>OBJCFLAGS</code>和<code>AM_OBJCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OBJCXXFLAGS-and-AM_005fOBJCXXFLAGS"><code>OBJCXXFLAGS</code>和<code>AM_OBJCXXFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Objective-C-support">目标C支持</a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Objective-C_002b_002b-support">客观的C ++支持</a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Objects-in-subdirectory">子目录中的对象</a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-obsolete-macros">过时的宏</a> ：</td><td> </td><td valign="top"><a href="#Obsolete-Macros">过时的宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-optimized-build_002c-example">优化的构建，例如</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-_002d_002dwarnings_003dcategory">选项， <samp>--warnings=<var>category</var></samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-_002dWcategory">选项， <samp>-W<var>category</var></samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-check_002dnews">选项， <samp>check-news</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dejagnu">选项， <samp>dejagnu</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dist_002dbzip2">选项， <samp>dist-bzip2</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dist_002dlzip">选项， <samp>dist-lzip</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dist_002dshar">选项， <samp>dist-shar</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dist_002dtarZ">选项， <samp>dist-tarZ</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dist_002dxz">选项， <samp>dist-xz</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-dist_002dzip">选项， <samp>dist-zip</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-filename_002dlength_002dmax_003d99">选项， <samp>filename-length-max=99</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-foreign">选项， <samp>foreign</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-gnits">选项， <samp>gnits</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-gnu">选项， <samp>gnu</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-info_002din_002dbuilddir">选项， <samp>info-in-builddir</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002ddefine">选项， <samp>no-define</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002ddependencies">选项， <samp>no-dependencies</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002ddist">选项， <samp>no-dist</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002ddist_002dgzip">选项， <samp>no-dist-gzip</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002dexeext">选项， <samp>no-exeext</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002dinstallinfo">选项， <code>no-installinfo</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002dinstallinfo-1">选项， <samp>no-installinfo</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002dinstallman">选项， <samp>no-installman</samp></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002dinstallman-1">选项， <samp>no-installman</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-no_002dtexinfo_002etex">选项， <samp>no-texinfo.tex</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-nostdinc">选项， <samp>nostdinc</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-parallel_002dtests">选项， <samp>parallel-tests</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-readme_002dalpha">选项， <samp>readme-alpha</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-serial_002dtests">选项， <samp>serial-tests</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-tar_002dpax">选项， <samp>tar-pax</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-tar_002dustar">选项， <samp>tar-ustar</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-tar_002dv7">选项， <samp>tar-v7</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-version">选项， <var>version</var></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Option_002c-warnings">选项，警告</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Options_002c-aclocal">选项， <code>aclocal</code></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Options_002c-automake">选项， <code>automake</code></a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Options_002c-std_002doptions">选项， <samp>std-options</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Options_002c-subdir_002dobjects">选项， <samp>subdir-objects</samp></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Ordering-flag-variables">排序标志变量</a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Overriding-make-rules">覆盖制定规则</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Overriding-make-targets">覆盖目标</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Overriding-make-variables">覆盖make变量</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overriding-rules">首要规则</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overriding-semantics">覆盖语义</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-PACKAGE_002c-directory"><code>PACKAGE</code> ，目录</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PACKAGE_002c-prevent-definition"><code>PACKAGE</code> ，防止定义</a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Packages_002c-nested">嵌套包装</a> ：</td><td> </td><td valign="top"><a href="#Nested-Packages">嵌套包装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Packages_002c-preparation">包装，准备</a> ：</td><td> </td><td valign="top"><a href="#Preparing-Distributions">准备发行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Parallel-build-trees">并行构建树</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parallel_002dtests"><code>parallel-tests</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Path-stripping_002c-avoiding">路径剥离，避免</a> ：</td><td> </td><td valign="top"><a href="#Alternative">另类</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pax-format">pax格式</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pdf"><code>pdf</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pdf-1"><code>pdf</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF-output-using-Texinfo">使用Texinfo的PDF输出</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pdf_002dlocal"><code>pdf-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Per_002dobject-flags_002c-emulated">每个对象的标志，模拟</a> ：</td><td> </td><td valign="top"><a href="#Per_002dObject-Flags">每对象标志</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-per_002dtarget-compilation-flags_002c-defined">每个目标的编译标志，定义</a>如下：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgdatadir_002c-defined"><code>pkgdatadir</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkgincludedir_002c-defined"><code>pkgincludedir</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglibdir_002c-defined"><code>pkglibdir</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pkglibexecdir_002c-defined"><code>pkglibexecdir</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Preparing-distributions">准备发行版</a> ：</td><td> </td><td valign="top"><a href="#Preparing-Distributions">准备发行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Preprocessing-Fortran-77">预处理Fortran 77</a> ：</td><td> </td><td valign="top"><a href="#Preprocessing-Fortran-77">预处理Fortran 77</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-DATA">主要变量<code>DATA</code></a> ：</td><td> </td><td valign="top"><a href="#Data">数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-defined">主变量，定义为</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-HEADERS">主要变量<code>HEADERS</code></a> ：</td><td> </td><td valign="top"><a href="#Headers">标头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-JAVA">主要变量<code>JAVA</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-LIBRARIES">主要变量<code>LIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#A-Library">图书馆</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-LISP">主要变量<code>LISP</code></a> ：</td><td> </td><td valign="top"><a href="#Emacs-Lisp">埃马克斯·利斯普（Emacs Lisp）</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-LTLIBRARIES">主要变量<code>LTLIBRARIES</code></a> ：</td><td> </td><td valign="top"><a href="#Libtool-Libraries">Libtool库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-MANS">主要变量<code>MANS</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-PROGRAMS">主要变量<code>PROGRAMS</code></a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-PYTHON">主要变量<code>PYTHON</code></a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-SCRIPTS">主要变量<code>SCRIPTS</code></a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-SOURCES">主要变量<code>SOURCES</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Primary-variable_002c-TEXINFOS">主要变量<code>TEXINFOS</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PROGRAMS-primary-variable"><code>PROGRAMS</code>主要变量</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Programs_002c-auxiliary">辅助程序</a> ：</td><td> </td><td valign="top"><a href="#Auxiliary-Programs">辅助程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PROGRAMS_002c-bindir"><code>PROGRAMS</code> ， <code>bindir</code></a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Programs_002c-conditional">有条件的程序</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Programs">有条件程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Programs_002c-renaming-during-installation">程序，在安装过程中重命名</a> ：</td><td> </td><td valign="top"><a href="#Renaming">重命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-prog_005fLDADD_002c-defined"><code>prog_LDADD</code> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Linking">连结中</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Proxy-Makefile-for-third_002dparty-packages">代理<samp>Makefile</samp>对于第三方软件包</a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ps"><code>ps</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ps-1"><code>ps</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PS-output-using-Texinfo">使用Texinfo的PS输出</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ps_002dlocal"><code>ps-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PYTHON-primary_002c-defined"><code>PYTHON</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Python">蟒蛇</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-R">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Ratfor-programs">Ratfor程序</a> ：</td><td> </td><td valign="top"><a href="#Preprocessing-Fortran-77">预处理Fortran 77</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-read_002donly-source-tree">只读源树</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-readme_002dalpha"><code>readme-alpha</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-README_002dalpha"><samp>README-alpha</samp></a> ：</td><td> </td><td valign="top"><a href="#Gnits">针织衫</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rebuild-rules">重建规则</a> ：</td><td> </td><td valign="top"><a href="#Rebuilding">重建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rebuild-rules-1">重建规则</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-recheck"><code>recheck</code></a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Recognized-macros-by-Automake">Automake可识别的宏</a> ：</td><td> </td><td valign="top"><a href="#Optional">可选的</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Recursive-operation-of-Automake">Automake的递归操作</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-recursive-targets-and-third_002dparty-Makefiles">递归目标和第三方<samp>Makefile</samp> s</a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Register-test-case-result">注册测试用例结果</a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Register-test-result">注册测试结果</a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Renaming-programs">重命名程序</a> ：</td><td> </td><td valign="top"><a href="#Renaming">重命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Reporting-bugs">报告错误</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Requirements-of-Automake">Automake的要求</a> ：</td><td> </td><td valign="top"><a href="#Requirements">要求</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Requirements_002c-Automake">要求，自动制作</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Restrictions-for-JAVA">限制<code>JAVA</code></a> ：</td><td> </td><td valign="top"><a href="#Java">爪哇</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reStructuredText-field_002c-_003acopy_002din_002dglobal_002dlog_003a">reStructuredText字段， <code>:copy-in-global-log:</code></a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reStructuredText-field_002c-_003arecheck_003a">reStructuredText字段， <code>:recheck:</code></a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reStructuredText-field_002c-_003atest_002dglobal_002dresult_003a">reStructuredText字段， <code>:test-global-result:</code></a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reStructuredText-field_002c-_003atest_002dresult_003a">reStructuredText字段， <code>:test-result:</code></a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RFLAGS-and-AM_005fRFLAGS"><code>RFLAGS</code>和<code>AM_RFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rules-with-multiple-outputs">具有多个输出的规则</a> ：</td><td> </td><td valign="top"><a href="#Multiple-Outputs">多路输出</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rules_002c-conflicting">规则冲突</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rules_002c-debugging">规则，调试</a> ：</td><td> </td><td valign="top"><a href="#Debugging-Make-Rules">调试制作规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rules_002c-overriding">规则，最重要的是</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-S">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scanning-configure_002eac">扫描<samp>configure.ac</samp></a> ：</td><td> </td><td valign="top"><a href="#configure">配置</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCRIPTS-primary_002c-defined"><code>SCRIPTS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCRIPTS_002c-installation-directories"><code>SCRIPTS</code> ，安装目录</a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-the-linker-automatically">自动选择链接器</a> ：</td><td> </td><td valign="top"><a href="#How-the-Linker-is-Chosen">如何选择链接器</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-serial-number-and-_002d_002dinstall">序列号和<samp>--install</samp></a> ：</td><td> </td><td valign="top"><a href="#aclocal-Options">aclocal选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-serial-numbers-in-macros">宏中的序列号</a> ：</td><td> </td><td valign="top"><a href="#Serials">连续剧</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-serial_002dtests"><code>serial-tests</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-serial_002dtests_002c-Using"><samp>serial-tests</samp> ，使用</a> ：</td><td> </td><td valign="top"><a href="#Serial-Test-Harness">串行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Shared-libraries_002c-support-for">共享库，支持</a> ：</td><td> </td><td valign="top"><a href="#A-Shared-Library">共享库</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Silencing-make">沉默<code>make</code></a> ：</td><td> </td><td valign="top"><a href="#Silencing-Make">静音制作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Silent-make">无声<code>make</code></a> ：</td><td> </td><td valign="top"><a href="#Silencing-Make">静音制作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Silent-make-rules">无声<code>make</code>规则</a> ：</td><td> </td><td valign="top"><a href="#Silencing-Make">静音制作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Silent-rules">无声规则</a> ：</td><td> </td><td valign="top"><a href="#Silencing-Make">静音制作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-silent-rules-and-libtool">静默规则和libtool</a> ：</td><td> </td><td valign="top"><a href="#Automake-Silent-Rules">自动制作静音规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-site_002eexp"><samp>site.exp</samp></a> ：</td><td> </td><td valign="top"><a href="#DejaGnu-Tests">DejaGnu测试</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-source-tree-and-build-tree">源树和构建树</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-source-tree_002c-read_002donly">源代码树，只读</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SOURCES-primary_002c-defined"><code>SOURCES</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Program-Sources">节目来源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Special-Automake-comment">特殊的Automake评论</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Staged-installation">分阶段安装</a> ：</td><td> </td><td valign="top"><a href="#DESTDIR">DESTDIR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-std_002doptions"><code>std-options</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Strictness_002c-command-line">严格，命令行</a> ：</td><td> </td><td valign="top"><a href="#automake-Invocation">automake调用</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Strictness_002c-defined">严格定义</a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Strictness_002c-foreign">严格， <samp>foreign</samp></a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Strictness_002c-gnits">严格， <samp>gnits</samp></a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Strictness_002c-gnu">严格， <samp>gnu</samp></a> ：</td><td> </td><td valign="top"><a href="#Strictness">严格</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-su_002c-before-make-install">su，之前<code>make install</code></a> ：</td><td> </td><td valign="top"><a href="#Basic-Installation">基本安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-subdir_002dobjects"><code>subdir-objects</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subdirectories_002c-building-conditionally">有条件建立的子目录</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Subdirectories">条件子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subdirectories_002c-configured-conditionally">子目录，有条件地配置</a> ：</td><td> </td><td valign="top"><a href="#Unconfigured-Subdirectories">未配置的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subdirectories_002c-not-distributed">子目录，未分发</a> ：</td><td> </td><td valign="top"><a href="#Unconfigured-Subdirectories">未配置的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subdirectory_002c-objects-in">子目录中的对象</a> ：</td><td> </td><td valign="top"><a href="#Program-and-Library-Variables">程序和库变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUBDIRS-and-AC_005fSUBST"><code>SUBDIRS</code>和<code>AC_SUBST</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories-with-AC_005fSUBST">带有AC_SUBST的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUBDIRS-and-AM_005fCONDITIONAL"><code>SUBDIRS</code>和<code>AM_CONDITIONAL</code></a> ：</td><td> </td><td valign="top"><a href="#Subdirectories-with-AM_005fCONDITIONAL">具有AM_CONDITIONAL的子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUBDIRS_002c-conditional"><code>SUBDIRS</code> ，有条件的</a> ：</td><td> </td><td valign="top"><a href="#Conditional-Subdirectories">条件子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUBDIRS_002c-explained"><code>SUBDIRS</code> ，说明</a> ：</td><td> </td><td valign="top"><a href="#Subdirectories">子目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subpackages">分包</a> ：</td><td> </td><td valign="top"><a href="#Nested-Packages">嵌套包装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subpackages-1">分包</a> ：</td><td> </td><td valign="top"><a href="#Subpackages">分包</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-suffix-_002ela_002c-defined">后缀<samp>.la</samp> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Concept">Libtool概念</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-suffix-_002elo_002c-defined">后缀<samp>.lo</samp> ，定义</a> ：</td><td> </td><td valign="top"><a href="#Libtool-Concept">Libtool概念</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SUFFIXES_002c-adding"><code>SUFFIXES</code> ，并添加</a> ：</td><td> </td><td valign="top"><a href="#Suffixes">后缀</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-C_002b_002b">支持C ++</a> ：</td><td> </td><td valign="top"><a href="#C_002b_002b-Support">C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Fortran-77">支持Fortran 77</a> ：</td><td> </td><td valign="top"><a href="#Fortran-77-Support">Fortran 77支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Fortran-9x">支持Fortran 9x</a> ：</td><td> </td><td valign="top"><a href="#Fortran-9x-Support">Fortran 9x支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-GNU-Gettext">支持GNU Gettext</a> ：</td><td> </td><td valign="top"><a href="#gettext">文字</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Java-with-gcj">通过gcj支持Java</a> ：</td><td> </td><td valign="top"><a href="#Java-Support-with-gcj">gcj的Java支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Objective-C">对目标C的支持</a> ：</td><td> </td><td valign="top"><a href="#Objective-C-Support">目标C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Objective-C_002b_002b">支持Objective C ++</a> ：</td><td> </td><td valign="top"><a href="#Objective-C_002b_002b-Support">目标C ++支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Unified-Parallel-C">支持统一并行C</a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Support-for-Vala">对Vala的支持</a> ：</td><td> </td><td valign="top"><a href="#Vala-Support">瓦拉支持</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-T">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tags"><code>tags</code></a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TAGS-support"><samp>TAGS</samp>支持</a> ：</td><td> </td><td valign="top"><a href="#Tags">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tar-formats"><code>tar</code>格式</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tar_002dpax"><code>tar-pax</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tar_002dustar"><code>tar-ustar</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tar_002dv7"><code>tar-v7</code></a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Target_002c-install_002dinfo">目标， <code>install-info</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Target_002c-install_002dman">目标， <code>install-man</code></a> ：</td><td> </td><td valign="top"><a href="#Man-Pages">手册页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-test-case">测试用例</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Test-case-result_002c-registering">测试用例结果，注册</a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-test-failure">测试失败</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-test-harness">测试线束</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-test-metadata">测试元数据</a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-test-pass">测试合格</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Test-result_002c-registering">测试结果，注册</a> ：</td><td> </td><td valign="top"><a href="#Log-files-generation-and-test-results-recording">日志文件生成和测试结果记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-test-skip">测试跳过</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Test-suites">测试套件</a> ：</td><td> </td><td valign="top"><a href="#Tests">测验</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tests_002c-expected-failure">测试，预期失败</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-testsuite-harness">测试套件安全带</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Testsuite-progress-on-console">控制台上的测试套件进度</a> ：</td><td> </td><td valign="top"><a href="#Scripts_002dbased-Testsuites">基于脚本的测试套件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Texinfo-flag_002c-EDITION">Texinfo标志， <code>EDITION</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Texinfo-flag_002c-UPDATED">Texinfo标志， <code>UPDATED</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Texinfo-flag_002c-UPDATED_002dMONTH">Texinfo标志， <code>UPDATED-MONTH</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Texinfo-flag_002c-VERSION">Texinfo标志， <code>VERSION</code></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-texinfo_002etex"><samp>texinfo.tex</samp></a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TEXINFOS-primary_002c-defined"><code>TEXINFOS</code>主要的，已定义的</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-third_002dparty-files-and-CVS">第三方文件和CVS</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Third_002dparty-packages_002c-interfacing-with">第三方软件包，与</a> ：</td><td> </td><td valign="top"><a href="#Third_002dParty-Makefiles">第三方Makefile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-timestamps-and-CVS">时间戳和CVS</a> ：</td><td> </td><td valign="top"><a href="#CVS">CVS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transforming-program-names">转换程序名称</a> ：</td><td> </td><td valign="top"><a href="#Renaming">重命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-trees_002c-source-vs_002e-build">树，源与构建</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-Example"><code>true</code>范例</a> ：</td><td> </td><td valign="top"><a href="#true">真正</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-U">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-underquoted-AC_005fDEFUN">报价不足<code>AC_DEFUN</code></a> ：</td><td> </td><td valign="top"><a href="#Extending-aclocal">扩展aclocal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unexpected-pass">意外通过</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unexpected-test-pass">意外的测试通过</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unified-Parallel-C-support">统一Parallel C支持</a> ：</td><td> </td><td valign="top"><a href="#Unified-Parallel-C-Support">统一并行C支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Uniform-naming-scheme">统一命名方案</a> ：</td><td> </td><td valign="top"><a href="#Uniform">制服</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uninstall"><code>uninstall</code></a> ：</td><td> </td><td valign="top"><a href="#Standard-Targets">标准目标</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uninstall-1"><code>uninstall</code></a> ：</td><td> </td><td valign="top"><a href="#Install-Rules-for-the-User">用户安装规则</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uninstall-2"><code>uninstall</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uninstall_002dhook"><code>uninstall-hook</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uninstall_002dlocal"><code>uninstall-local</code></a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unit-tests">单元测试</a> ：</td><td> </td><td valign="top"><a href="#Parallel-Test-Harness">并行测试线束</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unpacking">开箱</a></td><td> </td><td valign="top"><a href="#Basic-Installation">基本安装</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPCFLAGS-and-AM_005fUPCFLAGS"><code>UPCFLAGS</code>和<code>AM_UPCFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPDATED-Texinfo-flag"><code>UPDATED</code> Texinfo标志</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPDATED_002dMONTH-Texinfo-flag"><code>UPDATED-MONTH</code> Texinfo标志</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Use-Cases-for-the-GNU-Build-System">GNU构建系统的用例</a> ：</td><td> </td><td valign="top"><a href="#Use-Cases">用例</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-user-variables">用户变量</a> ：</td><td> </td><td valign="top"><a href="#User-Variables">用户变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Using-aclocal">使用<code>aclocal</code></a> ：</td><td> </td><td valign="top"><a href="#configure">配置</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ustar-format">美元格式</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-v7-tar-format">v7 <code>tar</code>格式</a> ：</td><td> </td><td valign="top"><a href="#List-of-Automake-options">自动制作选项列表</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vala-Support">瓦拉支持</a> ：</td><td> </td><td valign="top"><a href="#Vala-Support">瓦拉支持</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_002c-conflicting">变量，冲突</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Variables_002c-overriding">变量，覆盖</a> ：</td><td> </td><td valign="top"><a href="#General-Operation">一般运作</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_002c-reserved-for-the-user">变量，为用户保留</a> ：</td><td> </td><td valign="top"><a href="#User-Variables">用户变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VERSION-Texinfo-flag"><code>VERSION</code> Texinfo标志</a> ：</td><td> </td><td valign="top"><a href="#Texinfo">Texinfo</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VERSION_002c-prevent-definition"><code>VERSION</code> ，防止定义</a> ：</td><td> </td><td valign="top"><a href="#Public-Macros">公共宏</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version_002em4_002c-example"><samp>version.m4</samp> ，例如</a> ：</td><td> </td><td valign="top"><a href="#Rebuilding">重建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version_002esh_002c-example"><samp>version.sh</samp> ，例如</a> ：</td><td> </td><td valign="top"><a href="#Rebuilding">重建</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-versioned-binaries_002c-installing">版本化的二进制文件，安装</a> ：</td><td> </td><td valign="top"><a href="#Extending">延伸</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VPATH-builds">VPATH构建</a> ：</td><td> </td><td valign="top"><a href="#VPATH-Builds">VPATH构建</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-W">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-wildcards">通配符</a> ：</td><td> </td><td valign="top"><a href="#Wildcards">通配符</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Windows">Windows</a> ：</td><td> </td><td valign="top"><a href="#EXEEXT">EXEEXT</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-xfail">xfail</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-xpass">xpass</a> ：</td><td> </td><td valign="top"><a href="#Generalities-about-Testing">关于测试的一般性</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-Y">ÿ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-yacc_002c-multiple-parsers"><code>yacc</code> ，多个解析器</a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-YFLAGS-and-AM_005fYFLAGS"><code>YFLAGS</code>和<code>AM_YFLAGS</code></a> ：</td><td> </td><td valign="top"><a href="#Flag-Variables-Ordering">标记变量排序</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ylwrap"><code>ylwrap</code></a> ：</td><td> </td><td valign="top"><a href="#Yacc-and-Lex">Yacc和Lex</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="General-Index_cp_letter-Z">ž</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-zardoz-example"><code>zardoz</code>例如</a> ：</td><td> </td><td valign="top"><a href="#Complete">完成</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#General-Index_cp_symbol-1"><b>＃</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-2"><b>$</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-3"><b>+</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-4"><b>-</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-5"><b>。</b></a>
   
<a class="summary-letter" href="#General-Index_cp_symbol-6"><b>：</b></a> <a class="summary-letter" href="#General-Index_cp_symbol-7"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#General-Index_cp_letter-A"><b>A</b></a> <a class="summary-letter" href="#General-Index_cp_letter-B"><b>B</b></a> <a class="summary-letter" href="#General-Index_cp_letter-C"><b>C</b></a> <a class="summary-letter" href="#General-Index_cp_letter-D"><b>D</b></a> <a class="summary-letter" href="#General-Index_cp_letter-E"><b>E</b></a> <a class="summary-letter" href="#General-Index_cp_letter-F"><b>F</b></a> <a class="summary-letter" href="#General-Index_cp_letter-G"><b>G</b></a> <a class="summary-letter" href="#General-Index_cp_letter-H"><b>H</b></a> <a class="summary-letter" href="#General-Index_cp_letter-I"><b>I</b></a> <a class="summary-letter" href="#General-Index_cp_letter-J"><b>J</b></a> <a class="summary-letter" href="#General-Index_cp_letter-L"><b>L</b></a> <a class="summary-letter" href="#General-Index_cp_letter-M"><b>M</b></a> <a class="summary-letter" href="#General-Index_cp_letter-N"><b>N</b></a> <a class="summary-letter" href="#General-Index_cp_letter-O"><b>O</b></a> <a class="summary-letter" href="#General-Index_cp_letter-P"><b>P</b></a> <a class="summary-letter" href="#General-Index_cp_letter-R"><b>R</b></a> <a class="summary-letter" href="#General-Index_cp_letter-S"><b>S</b></a> <a class="summary-letter" href="#General-Index_cp_letter-T"><b>T</b></a> <a class="summary-letter" href="#General-Index_cp_letter-U"><b>U</b></a> <a class="summary-letter" href="#General-Index_cp_letter-V"><b>V</b></a> <a class="summary-letter" href="#General-Index_cp_letter-W"><b>W</b></a> <a class="summary-letter" href="#General-Index_cp_letter-X"><b>X</b></a> <a class="summary-letter" href="#General-Index_cp_letter-Y"><b>Y</b></a> <a class="summary-letter" href="#General-Index_cp_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>


<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a name="FOOT1" href="#DOCF1">（1）</a></h3>
<p>这些变量在Make术语中也称为<em>make宏</em> ，但是在本手册中，我们为Autoconf的宏保留了术语<em>macro</em> 。</p>
<h3><a name="FOOT2" href="#DOCF2">（2）</a></h3>
<p>我们相信。这项工作是新的，可能有疣。有关报告错误的信息，请参见<a href="#Introduction">简介</a> 。</p>
<h3><a name="FOOT3" href="#DOCF3">（3）</a></h3>
<p>对于此限制，还有其他更晦涩的原因。</p>
<h3><a name="FOOT4" href="#DOCF4">（4）</a></h3>
<p>请注意<code>automake</code>认识到<samp>-d</samp>在<code>AM_YFLAGS</code>仅当它没有与其他选项组合在一起时；例如，如果<code>AM_YFLAGS</code>是<samp>-dt</samp> ，但是如果<code>AM_YFLAGS</code>是<samp>-d -t</samp>要么<samp>-t -d</samp> 。</p>
<h3><a name="FOOT5" href="#DOCF5">（5）</a></h3>
<p>以下部分中有关Fortran 77程序预处理的大部分信息（即使不是大多数）几乎完全取自<cite>《 GNU Make手册</cite> <a href="http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules">》</a>中<cite>的</cite> <a href="http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules">“规则目录”</a> 。</p>
<h3><a name="FOOT6" href="#DOCF6">（6）</a></h3>
<p>例如， <a href="http://www-zeus.desy.de/~burow/cfortran/">cfortran软件包</a>解决了所有这些中间语言问题，并在几乎所有平台上的几乎所有Fortran 77，C和C ++编译器下运行。然而， <code>cfortran</code>还不是免费软件，但是它将在下一个主要版本中发布。</p>
<h3><a name="FOOT7" href="#DOCF7">（7）</a></h3>
<p>另请参见<a href="http://catb.org/~esr/writings/taoup/html/ch11s09.html">http://catb.org/~esr/writings/taoup/html/ch11s09.html</a> 。</p>
<h3><a name="FOOT8" href="#DOCF8">（8）</a></h3>
<p>Automake的<samp>dist</samp> '和' <samp>distcheck</samp> '规则在这方面存在一个错误，即即使<samp>-n</samp> ，但这已在Automake 1.11中修复。</p>
</div>
<hr>





</body></html>