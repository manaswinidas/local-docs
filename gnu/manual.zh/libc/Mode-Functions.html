<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>模式函数（GNU C库）</title>

<meta name="description" content="Mode Functions (The GNU C Library)">
<meta name="keywords" content="Mode Functions (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Terminal-Modes.html#Terminal-Modes" rel="up" title="Terminal Modes">
<link href="Setting-Modes.html#Setting-Modes" rel="next" title="Setting Modes">
<link href="Mode-Data-Types.html#Mode-Data-Types" rel="prev" title="Mode Data Types">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Mode-Functions"></span><div class="header">
<p>下一页： <a href="Setting-Modes.html#Setting-Modes" rel="next" accesskey="n">设置模式</a> ，上一页： <a href="Mode-Data-Types.html#Mode-Data-Types" rel="prev" accesskey="p">模式数据类型</a> ，向上： <a href="Terminal-Modes.html#Terminal-Modes" rel="up" accesskey="u">终端模式</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Terminal-Mode-Functions"></span><h4 class="subsection">17.4.2终端模式功能</h4>
<span id="index-terminal-mode-functions"></span>

<dl>
<dt id="index-tcgetattr">函数： <em>int</em> <strong>tcgetattr</strong> <em>（int <var>filedes</var> ，struct termios * <var>termios-p</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能用于检查带有文件描述符的终端设备的属性<var>filedes</var> 。属性在以下结构中返回： <var>termios-p</var>指着。
</p>
<p>如果成功<code>tcgetattr</code>返回<em>0</em> 。返回值<em>-1</em>表示错误。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>参数不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>与终端无关。
</p></dd>
</dl>
</dd></dl>

<dl>
<dt id="index-tcsetattr">函数： <em>int</em> <strong>tcsetattr</strong> <em>（int <var>filedes</var> ，int <var>when</var> ，const struct termios * <var>termios-p</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能使用文件描述符设置终端设备的属性<var>filedes</var> 。新属性取自以下结构： <var>termios-p</var>指着。
</p>
<p>的<var>when</var>参数指定如何处理已排队的输入和输出。它可以是以下值之一：</p>
<dl compact>
<dt><code>TCSANOW</code>
<span id="index-TCSANOW"></span>
</dt>
<dd>
<p>立即进行更改。
</p>
</dd>
<dt><code>TCSADRAIN</code>
<span id="index-TCSADRAIN"></span>
</dt>
<dd>
<p>等到所有排队的输出都写完后再进行更改。更改影响输出的参数时，通常应使用此选项。
</p>
</dd>
<dt><code>TCSAFLUSH</code>
<span id="index-TCSAFLUSH"></span>
</dt>
<dd>
<p>就像<code>TCSADRAIN</code> ，但也会丢弃所有排队的输入。
</p>
</dd>
<dt><code>TCSASOFT</code>
<span id="index-TCSASOFT"></span>
</dt>
<dd>
<p>这是一个标志位，您可以将其添加到上述任何替代方案中。其含义是禁止更改终端硬件的状态。它是BSD扩展；它仅在BSD系统和GNU / Hurd系统上受支持。
</p>
<p>使用<code>TCSASOFT</code>与设置<code>CIGNORE</code>有点<code>c_cflag</code>结构的成员<var>termios-p</var>指着。有关<a href="Control-Modes.html#Control-Modes">控制面板</a>的说明，请参见<a href="Control-Modes.html#Control-Modes">控制模式</a> 。 <code>CIGNORE</code> 。
</p></dd>
</dl>

<p>如果从其控制终端上的后台进程调用此函数，则通常会向进程组中的所有进程发送<code>SIGTTOU</code>信号，就像进程尝试写入终端一样。例外是如果调用进程本身正在忽略或阻止<code>SIGTTOU</code>信号，在这种情况下将执行操作且不发送信号。请参阅<a href="Job-Control.html#Job-Control">作业控制</a> 。
</p>
<p>如果成功<code>tcsetattr</code>返回<em>0</em> 。返回值<em>-1</em>表示错误。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>参数不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>与终端无关。
</p>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p>的价值<code>when</code>参数无效，或者其中的数据有问题<var>termios-p</var>论点。
</p></dd>
</dl>
</dd></dl>

<p>虽然<code>tcgetattr</code>和<code>tcsetattr</code>用文件描述符指定终端设备，属性是终端设备本身的属性，而不是文件描述符的属性。这意味着更改终端属性的影响是持久的；如果以后有另一个进程打开终端文件，即使它与您最初在更改属性时指定的打开文件描述符没有任何关系，也将看到已更改的属性。
</p>
<p>同样，如果单个进程具有同一终端设备的多个或重复的文件描述符，则更改终端属性会影响所有这些文件描述符的输入和输出。例如，这意味着您无法在正常的行缓冲，回显模式下打开一个文件描述符或流以从终端读取。同时在单字符非回显模式下为同一终端使用另一个文件描述符，用于从该终端读取文件描述符。相反，您必须在两种模式之间来回切换终端。
</p>
<hr>
<div class="header">
<p>下一页： <a href="Setting-Modes.html#Setting-Modes" rel="next" accesskey="n">设置模式</a> ，上一页： <a href="Mode-Data-Types.html#Mode-Data-Types" rel="prev" accesskey="p">模式数据类型</a> ，向上： <a href="Terminal-Modes.html#Terminal-Modes" rel="up" accesskey="u">终端模式</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>