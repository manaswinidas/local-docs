<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>syslog; vsyslog（GNU C库）</title>

<meta name="description" content="syslog; vsyslog (The GNU C Library)">
<meta name="keywords" content="syslog; vsyslog (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Submitting-Syslog-Messages.html#Submitting-Syslog-Messages" rel="up" title="Submitting Syslog Messages">
<link href="closelog.html#closelog" rel="next" title="closelog">
<link href="openlog.html#openlog" rel="prev" title="openlog">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="syslog_003b-vsyslog"></span><div class="header">
<p>下一篇： <a href="closelog.html#closelog" rel="next" accesskey="n">closelog</a> ，上一篇： <a href="openlog.html#openlog" rel="prev" accesskey="p">openlog</a> ，上一篇： <a href="Submitting-Syslog-Messages.html#Submitting-Syslog-Messages" rel="up" accesskey="u">提交系统日志消息</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="syslog_002c-vsyslog"></span><h4 class="subsection">18.2.2 syslog，vsyslog</h4>

<p>本节中引用的符号在文件中声明<samp>syslog.h</samp> 。
</p>
<dl>
<dt id="index-syslog">功能： <em>void</em> <strong>syslog</strong> <em>（int <var>facility_priority</var> ，const char * <var>format</var> ，…）</em></dt>
<dd>
<p>初步： MT安全环境语言环境| AS不安全损坏的堆锁dlopen | AC不安全损坏的锁内存fd |请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p><code>syslog</code>向Syslog工具提交一条消息。它通过写入Unix域套接字来做到这一点<code>/dev/log</code> 。
</p>
<p><code>syslog</code>提交具有以下指示的功能和优先级的消息<var>facility_priority</var> 。宏<code>LOG_MAKEPRI</code>从设施和优先级生成设施/优先级，如以下示例所示：</p>
<div class="example">
<pre class="example">LOG_MAKEPRI(LOG_USER, LOG_WARNING)
</pre></div>

<p>设施代码的可能值为（宏）：</p>

<dl compact>
<dt><code>LOG_USER</code>
<span id="index-LOG_005fUSER"></span>
</dt>
<dd><p>杂项用户流程</p></dd>
<dt><code>LOG_MAIL</code>
<span id="index-LOG_005fMAIL"></span>
</dt>
<dd><p>邮件</p></dd>
<dt><code>LOG_DAEMON</code>
<span id="index-LOG_005fDAEMON"></span>
</dt>
<dd><p>杂项系统守护程序</p></dd>
<dt><code>LOG_AUTH</code>
<span id="index-LOG_005fAUTH"></span>
</dt>
<dd><p>安全性（授权）</p></dd>
<dt><code>LOG_SYSLOG</code>
<span id="index-LOG_005fSYSLOG"></span>
</dt>
<dd><p>系统日志</p></dd>
<dt><code>LOG_LPR</code>
<span id="index-LOG_005fLPR"></span>
</dt>
<dd><p>中央打印机</p></dd>
<dt><code>LOG_NEWS</code>
<span id="index-LOG_005fNEWS"></span>
</dt>
<dd><p>网络新闻（例如Usenet）</p></dd>
<dt><code>LOG_UUCP</code>
<span id="index-LOG_005fUUCP"></span>
</dt>
<dd><p>UUCP</p></dd>
<dt><code>LOG_CRON</code>
<span id="index-LOG_005fCRON"></span>
</dt>
<dd><p>Cron and At</p></dd>
<dt><code>LOG_AUTHPRIV</code>
<span id="index-LOG_005fAUTHPRIV"></span>
</dt>
<dd><p>私人保安（授权）</p></dd>
<dt><code>LOG_FTP</code>
<span id="index-LOG_005fFTP"></span>
</dt>
<dd><p>ftp服务器</p></dd>
<dt><code>LOG_LOCAL0</code>
<span id="index-LOG_005fLOCAL0"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL1</code>
<span id="index-LOG_005fLOCAL1"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL2</code>
<span id="index-LOG_005fLOCAL2"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL3</code>
<span id="index-LOG_005fLOCAL3"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL4</code>
<span id="index-LOG_005fLOCAL4"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL5</code>
<span id="index-LOG_005fLOCAL5"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL6</code>
<span id="index-LOG_005fLOCAL6"></span>
</dt>
<dd><p>局部定义</p></dd>
<dt><code>LOG_LOCAL7</code>
<span id="index-LOG_005fLOCAL7"></span>
</dt>
<dd><p>局部定义</p></dd>
</dl>

<p>如果设施代码为其他内容，则结果不确定。
</p>
<p><strong>注意：</strong> <code>syslog</code>识别另一种设施代码：内核代码。但是您不能使用这些功能指定该设施代码。如果尝试的话， <code>syslog</code>就像您要使用默认功能一样。但是您还是不想，因为任何使用GNU C库的程序都不是内核。
</p>
<p>您可以将优先级代码用作<var>facility_priority</var> 。在这种情况下， <code>syslog</code>假定在打开Syslog连接时建立的默认功能。请参阅<a href="Syslog-Example.html#Syslog-Example">Syslog示例</a> 。
</p>
<p>优先级代码的可能值为（宏）：</p>
<dl compact>
<dt><code>LOG_EMERG</code>
<span id="index-LOG_005fEMERG"></span>
</dt>
<dd><p>消息显示系统不可用。
</p></dd>
<dt><code>LOG_ALERT</code>
<span id="index-LOG_005fALERT"></span>
</dt>
<dd><p>必须立即对消息采取措施。
</p></dd>
<dt><code>LOG_CRIT</code>
<span id="index-LOG_005fCRIT"></span>
</dt>
<dd><p>该消息指出严重情况。
</p></dd>
<dt><code>LOG_ERR</code>
<span id="index-LOG_005fERR"></span>
</dt>
<dd><p>该消息描述了一个错误。
</p></dd>
<dt><code>LOG_WARNING</code>
<span id="index-LOG_005fWARNING"></span>
</dt>
<dd><p>该消息是警告。
</p></dd>
<dt><code>LOG_NOTICE</code>
<span id="index-LOG_005fNOTICE"></span>
</dt>
<dd><p>该消息描述了正常但重要的事件。
</p></dd>
<dt><code>LOG_INFO</code>
<span id="index-LOG_005fINFO"></span>
</dt>
<dd><p>该消息纯粹是信息性的。
</p></dd>
<dt><code>LOG_DEBUG</code>
<span id="index-LOG_005fDEBUG"></span>
</dt>
<dd><p>该消息仅用于调试目的。
</p></dd>
</dl>

<p>如果优先级代码是其他任何内容，则结果不确定。
</p>
<p>如果该进程当前没有打开Syslog连接（即，它没有调用<code>openlog</code> ）， <code>syslog</code>隐式打开连接，方法与<code>openlog</code>将具有以下默认值，否则将包含在<code>openlog</code>呼叫：默认标识字符串是程序名称。默认的默认功能是<code>LOG_USER</code> 。中所有连接选项的默认设置<var>options</var>好像这些位已关闭。
<code>syslog</code>使Syslog连接保持打开状态。
</p>
<p>如果<samp>/dev/log</samp>插座未打开并连接， <code>syslog</code>打开并连接它，与<code>openlog</code>与<code>LOG_NDELAY</code>选项会。
</p>
<p><code>syslog</code>树叶<samp>/dev/log</samp>除非尝试发送消息失败，否则打开并连接<code>syslog</code>关闭它（希望将来的隐式打开会将Syslog连接恢复到可用状态）。
</p>
<p>例：</p>
<div class="example">
<pre class="example">

#include &lt;syslog.h&gt;
syslog (LOG_MAKEPRI(LOG_LOCAL1, LOG_ERROR),
        &quot;Unable to make network connection to %s.  Error=%m&quot;, host);

</pre></div>

</dd></dl>


<dl>
<dt id="index-vsyslog">功能： <em>void</em> <strong>vsyslog</strong> <em>（int <var>facility_priority</var> ，const char * <var>format</var> ，va_list <var>arglist</var> ）</em></dt>
<dd>
<p>初步： MT安全环境语言环境| AS不安全损坏的堆锁dlopen | AC不安全损坏的锁内存fd |请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p>这在功能上与<code>syslog</code> ，带有BSD样式可变长度参数。
</p>
</dd></dl>


<hr>
<div class="header">
<p>下一篇： <a href="closelog.html#closelog" rel="next" accesskey="n">closelog</a> ，上一篇： <a href="openlog.html#openlog" rel="prev" accesskey="p">openlog</a> ，上一篇： <a href="Submitting-Syslog-Messages.html#Submitting-Syslog-Messages" rel="up" accesskey="u">提交系统日志消息</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>