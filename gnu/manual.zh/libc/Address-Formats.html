<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>地址格式（GNU C库）</title>

<meta name="description" content="Address Formats (The GNU C Library)">
<meta name="keywords" content="Address Formats (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Socket-Addresses.html#Socket-Addresses" rel="up" title="Socket Addresses">
<link href="Setting-Address.html#Setting-Address" rel="next" title="Setting Address">
<link href="Socket-Addresses.html#Socket-Addresses" rel="prev" title="Socket Addresses">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Address-Formats"></span><div class="header">
<p>下一页： <a href="Setting-Address.html#Setting-Address" rel="next" accesskey="n">设置地址</a> ，向上： <a href="Socket-Addresses.html#Socket-Addresses" rel="up" accesskey="u">套接字地址</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Address-Formats-1"></span><h4 class="subsection">16.3.1地址格式</h4>

<p>功能<code>bind</code>和<code>getsockname</code>使用通用数据类型<code>struct sockaddr *</code>表示一个指向套接字地址的指针。您不能有效地使用此数据类型来解释地址或构造一个地址。为此，必须为套接字的名称空间使用正确的数据类型。
</p>
<p>因此，通常的做法是构造一个正确的名称空间特定类型的地址，然后将指针转换为<code>struct sockaddr *</code>你打电话的时候<code>bind</code>要么<code>getsockname</code> 。
</p>
<p>您可以从中获得的一条信息<code>struct sockaddr</code>数据类型是<em>地址格式指示符</em> 。这告诉您使用哪种数据类型来完全了解地址。
</p>
<span id="index-sys_002fsocket_002eh-1"></span>
<p>本节中的符号在头文件中定义<samp>sys/socket.h</samp> 。
</p>
<dl>
<dt id="index-struct-sockaddr">数据类型： <strong>struct sockaddr</strong></dt>
<dd>
<p>的<code>struct sockaddr</code>类型本身具有以下成员：</p>
<dl compact>
<dt><code>short int sa_family</code></dt>
<dd><p>这是此地址的地址格式的代码。它标识随后的数据格式。
</p>
</dd>
<dt><code>char sa_data[14]</code></dt>
<dd><p>这是实际的套接字地址数据，与格式有关。它的长度也取决于格式，并且可能超过14。长度14 <code>sa_data</code>本质上是任意的。
</p></dd>
</dl>
</dd></dl>

<p>每种地址格式都有一个以'开头的符号名称<samp>AF_</samp> '。它们每个都对应一个' <samp>PF_</samp> '符号，表示相应的名称空间。这是地址格式名称的列表：</p>
<dl compact>
<dt><code>AF_LOCAL</code>
<span id="index-AF_005fLOCAL"></span>
</dt>
<dd>
<p>这将指定与本地名称空间一起使用的地址格式。（ <code>PF_LOCAL</code>是该名称空间的名称。）有关此地址格式的<a href="Local-Namespace-Details.html#Local-Namespace-Details">信息</a> ，请参见<a href="Local-Namespace-Details.html#Local-Namespace-Details">Local Namespace Details</a> 。
</p>
</dd>
<dt><code>AF_UNIX</code>
<span id="index-AF_005fUNIX"></span>
</dt>
<dd>

<p>这是的同义词<code>AF_LOCAL</code> 。虽然<code>AF_LOCAL</code>由POSIX.1g授权， <code>AF_UNIX</code>可移植到更多系统。
<code>AF_UNIX</code>是BSD的传统名称，因此即使大多数POSIX系统也支持它。它也是Unix98规范中的首选名称。（对于<code>PF_UNIX</code>与<code>PF_LOCAL</code> ）。
</p>
</dd>
<dt><code>AF_FILE</code>
<span id="index-AF_005fFILE"></span>
</dt>
<dd>
<p>这是的另一个同义词<code>AF_LOCAL</code> ，以确保兼容性。（ <code>PF_FILE</code>同样是的同义词<code>PF_LOCAL</code> ）
</p>
</dd>
<dt><code>AF_INET</code>
<span id="index-AF_005fINET"></span>
</dt>
<dd>
<p>这指定了Internet名称空间附带的地址格式。 （ <code>PF_INET</code>是该名称空间的名称。）请参阅<a href="Internet-Address-Formats.html#Internet-Address-Formats">Internet地址格式</a> 。
</p>
</dd>
<dt><code>AF_INET6</code>
<span id="index-AF_005fINET6"></span>
</dt>
<dd>
<p>这类似于<code>AF_INET</code> ，但指的是IPv6协议。（ <code>PF_INET6</code>是相应名称空间的名称。）
</p>
</dd>
<dt><code>AF_UNSPEC</code>
<span id="index-AF_005fUNSPEC"></span>
</dt>
<dd>
<p>这没有指定特定的地址格式。它仅在极少数情况下使用，例如清除“已连接”数据报套接字的默认目标地址。请参阅<a href="Sending-Datagrams.html#Sending-Datagrams">发送数据报</a> 。
</p>
<p>对应的名称空间指示符<code>PF_UNSPEC</code>存在是为了完整性，但是没有理由在程序中使用它。
</p></dd>
</dl>

<p><samp>sys/socket.h</samp>定义以'开头的符号<samp>AF_</samp>对于许多不同种类的网络，大多数或全部并未实际实现。当我们收到有关如何使用它们的信息时，我们将对其进行记录。
</p>
<hr>
<div class="header">
<p>下一页： <a href="Setting-Address.html#Setting-Address" rel="next" accesskey="n">设置地址</a> ，向上： <a href="Socket-Addresses.html#Socket-Addresses" rel="up" accesskey="u">套接字地址</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>