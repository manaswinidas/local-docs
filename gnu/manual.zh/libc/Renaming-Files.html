<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>重命名文件（GNU C库）</title>

<meta name="description" content="Renaming Files (The GNU C Library)">
<meta name="keywords" content="Renaming Files (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="File-System-Interface.html#File-System-Interface" rel="up" title="File System Interface">
<link href="Creating-Directories.html#Creating-Directories" rel="next" title="Creating Directories">
<link href="Deleting-Files.html#Deleting-Files" rel="prev" title="Deleting Files">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Renaming-Files"></span><div class="header">
<p>下一篇： <a href="Creating-Directories.html#Creating-Directories" rel="next" accesskey="n">创建目录</a> ，上一篇： <a href="Deleting-Files.html#Deleting-Files" rel="prev" accesskey="p">删除文件</a> ，上一篇： <a href="File-System-Interface.html#File-System-Interface" rel="up" accesskey="u">文件系统界面</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Renaming-Files-1"></span><h3 class="section">14.7重命名文件</h3>

<p>的<code>rename</code>函数用于更改文件名。
</p>
<span id="index-renaming-a-file"></span>
<dl>
<dt id="index-rename">函数： <em>int</em> <strong>重命名</strong> <em>（const char * <var>oldname</var> ，const char * <var>newname</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>rename</code>函数重命名文件<var>oldname</var>至<var>newname</var> 。该文件以前可以使用以下名称访问<var>oldname</var>之后可以访问<var>newname</var>代替。（如果该文件除具有其他名称， <var>oldname</var> ，它仍然具有这些名称。）
</p>
<p>包含名称的目录<var>newname</var>必须与包含名称的目录位于同一文件系统上<var>oldname</var> 。
</p>
<p>一种特殊情况<code>rename</code>那时候<var>oldname</var>和<var>newname</var>是同一文件的两个名称。处理这种情况的一致方法是删除<var>oldname</var> 。但是，在这种情况下，POSIX要求<code>rename</code>无所作为并报告成功-这是不一致的。我们不知道您的操作系统会做什么。
</p>
<p>如果<var>oldname</var>不是目录，则任何名为<var>newname</var>在重命名操作期间被删除。但是，如果<var>newname</var>是目录的名称， <code>rename</code>在这种情况下失败。
</p>
<p>如果<var>oldname</var>是一个目录，然后<var>newname</var>必须不存在，或者必须命名为空的目录。在后一种情况下，现有目录名为<var>newname</var>首先被删除。名字<var>newname</var>不得指定目录的子目录<code>oldname</code>正在重命名。
</p>
<p>的一项有用功能<code>rename</code>是那个意思<var>newname</var>从该名称先前任何现有文件“原子地”更改为其新含义（即，被称为<var>oldname</var> ）。没有瞬间<var>newname</var>在旧含义和新含义之间“不存在”。如果在操作过程中发生系统崩溃，则两个名称可能仍然存在；但<var>newname</var>如果存在的话将永远保持原样。
</p>
<p>如果<code>rename</code>失败，返回<code>-1</code> 。除了常见的文件名错误（请参阅<a href="File-Name-Errors.html#File-Name-Errors">文件名错误</a> ）之外，以下内容<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EACCES</code></dt>
<dd><p>包含以下目录之一<var>newname</var>要么<var>oldname</var>拒绝写许可；要么<var>newname</var>和<var>oldname</var>是目录，其中之一拒绝写权限。
</p>
</dd>
<dt><code>EBUSY</code></dt>
<dd><p>由命名的目录<var>oldname</var>要么<var>newname</var>被系统以某种方式使用，以防止重命名工作。这包括作为文件系统挂载点的目录，以及作为进程当前工作目录的目录。
</p>
</dd>
<dt><code>ENOTEMPTY</code></dt>
<dt><code>EEXIST</code></dt>
<dd><p>目录<var>newname</var>不为空。GNU / Linux和GNU / Hurd系统总是返回<code>ENOTEMPTY</code>为此，但其他一些系统返回<code>EEXIST</code> 。
</p>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p><var>oldname</var>是包含以下内容的目录<var>newname</var> 。
</p>
</dd>
<dt><code>EISDIR</code></dt>
<dd><p><var>newname</var>是一个目录，但是<var>oldname</var>不是。
</p>
</dd>
<dt><code>EMLINK</code></dt>
<dd><p>的父目录<var>newname</var>会有太多的链接（条目）。
</p>
</dd>
<dt><code>ENOENT</code></dt>
<dd><p>文件<var>oldname</var>不存在。
</p>
</dd>
<dt><code>ENOSPC</code></dt>
<dd><p>将包含的目录<var>newname</var>没有空间可容纳其他条目，并且文件系统中没有剩余空间来扩展它。
</p>
</dd>
<dt><code>EROFS</code></dt>
<dd><p>该操作将涉及写入只读文件系统上的目录。
</p>
</dd>
<dt><code>EXDEV</code></dt>
<dd><p>两个文件名<var>newname</var>和<var>oldname</var>在不同的文件系统上。
</p></dd>
</dl>
</dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="Creating-Directories.html#Creating-Directories" rel="next" accesskey="n">创建目录</a> ，上一篇： <a href="Deleting-Files.html#Deleting-Files" rel="prev" accesskey="p">删除文件</a> ，上一篇： <a href="File-System-Interface.html#File-System-Interface" rel="up" accesskey="u">文件系统界面</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>