<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>格式化输入基础（GNU C库）</title>

<meta name="description" content="Formatted Input Basics (The GNU C Library)">
<meta name="keywords" content="Formatted Input Basics (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Formatted-Input.html#Formatted-Input" rel="up" title="Formatted Input">
<link href="Input-Conversion-Syntax.html#Input-Conversion-Syntax" rel="next" title="Input Conversion Syntax">
<link href="Formatted-Input.html#Formatted-Input" rel="prev" title="Formatted Input">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Formatted-Input-Basics"></span><div class="header">
<p>下一篇： <a href="Input-Conversion-Syntax.html#Input-Conversion-Syntax" rel="next" accesskey="n">输入转换语法</a> ，上一篇： <a href="Formatted-Input.html#Formatted-Input" rel="up" accesskey="u">格式化输入</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Formatted-Input-Basics-1"></span><h4 class="subsection">12.14.1格式化输入基础</h4>

<p>致电<code>scanf</code>从表面上讲类似于<code>printf</code>因为在模板字符串的控制下读取了任意参数。虽然模板中转换规范的语法与<code>printf</code> ，模板的解释更多地面向自由格式输入和简单模式匹配，而不是固定字段格式。例如，大多数<code>scanf</code>转换会跳过输入文件中任何数量的“空白”（包括空格，制表符和换行符），数字输入转换没有精度概念，相应的输出转换也没有精度概念。通常，模板中的非空白字符应与输入流中的字符完全匹配，但是匹配失败与流中的输入错误不同。
<span id="index-conversion-specifications-_0028scanf_0029"></span>
</p>
<p>之间的另一个区别<code>scanf</code>和<code>printf</code>是必须记住要提供指针而不是立即值作为的可选参数<code>scanf</code> ;读取的值存储在指针指向的对象中。即使是经验丰富的程序员也会偶尔忘记这一点，因此，如果您的程序遇到奇怪的错误，似乎与<code>scanf</code> ，您可能需要仔细检查。
</p>
<p>当发生<em>匹配失败</em>时， <code>scanf</code>立即返回，将第一个不匹配的字符保留为要从流中读取的下一个字符。的正常返回值<code>scanf</code>是分配的值的数量，因此您可以使用它来确定在读取所有期望值之前是否发生匹配错误。
<span id="index-matching-failure_002c-in-scanf"></span>
</p>
<p>的<code>scanf</code>函数通常用于诸如读取表内容之类的事情。例如，这是一个使用<code>scanf</code>初始化一个数组<code>double</code> ：</p>
<div class="example">
<pre class="example">void
readarray (double *array, int n)
{
  int i;
  for (i=0; i&lt;n; i++)
    if (scanf (&quot; %lf&quot;, &amp;(array[i])) != 1)
      invalid_input_error ();
}
</pre></div>

<p>格式化输入功能的使用频率不如格式化输出功能高。部分原因是因为正确使用它们需要一定注意。另一个原因是很难从匹配错误中恢复。
</p>
<p>如果您尝试读取与单个固定模式不匹配的输入，则最好使用Flex之类的工具来生成词法扫描器，或者使用Bison之类的工具来生成解析器，而不是使用<code>scanf</code> 。有关这些工具的更多信息，请参见<cite><a href="https://westes.github.io/flex/manual/index.html#Top">Flex：《词法扫描器生成器</a></cite> 》和<cite><a href="https://www.gnu.org/software/bison/manual/html_node/index.html#Top">《 Bison参考手册》</a></cite> 。
</p>
<hr>
<div class="header">
<p>下一篇： <a href="Input-Conversion-Syntax.html#Input-Conversion-Syntax" rel="next" accesskey="n">输入转换语法</a> ，上一篇： <a href="Formatted-Input.html#Formatted-Input" rel="up" accesskey="u">格式化输入</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>