<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>运行make install（GNU C库）</title>

<meta name="description" content="Running make install (The GNU C Library)">
<meta name="keywords" content="Running make install (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Installation.html#Installation" rel="up" title="Installation">
<link href="Tools-for-Compilation.html#Tools-for-Compilation" rel="next" title="Tools for Compilation">
<link href="Configuring-and-compiling.html#Configuring-and-compiling" rel="prev" title="Configuring and compiling">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Running-make-install"></span><div class="header">
<p>下一页： <a href="Tools-for-Compilation.html#Tools-for-Compilation" rel="next" accesskey="n">编译工具</a> ，上一页： <a href="Configuring-and-compiling.html#Configuring-and-compiling" rel="prev" accesskey="p">配置和编译</a> ，上一页： <a href="Installation.html#Installation" rel="up" accesskey="u">安装</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Installing-the-C-Library"></span><h3 class="appendixsec">C.2安装C库</h3>
<span id="index-installing"></span>

<p>要安装库及其标题文件以及手册的信息文件，请键入<code>make install</code> 。如果需要，这将在安装它们之前构建它们。但是，您仍然应该先编译所有内容。如果要安装GNU C库作为主要C库，建议您先将系统关闭为单用户模式，然后再重启。当库从下面更改时，这最大程度地减少了损坏内容的风险。
</p>
<p>' <samp>make install</samp> ”将完成从以前安装的GNU C库2.x版进行升级的全部工作。以前的安装有时可能会留下标题，但是这些标题通常是无害的。如果要避免将标题留在后面，可以按以下顺序进行操作。
</p>
<p>您必须先构建库（' <samp>make</samp> '），可以选择检查它（' <samp>make check</samp> '），切换包含目录，然后安装（' <samp>make install</samp> '）。步骤必须按此顺序进行。在安装之前不移动目录将导致两个库中的头文件无法使用，但是配置，构建和检查库需要具有针对旧库编译和运行程序的能力。新的<samp>/usr/include</samp> ，在切换包含目录之后并且在安装库之前，应该包含Linux标头，但没有其他内容。如果这样做，则在安装库之后，您需要自己从GNU C库以外的库中恢复所有标头。
</p>
<p>您可以通过将GNU C库设置为GNU C库，而不是将其配置在要安装的位置。 <code>DESTDIR</code> GNU标准的make变量在命令行上用于' <samp>make install</samp> '。此变量的值位于所有安装路径的前面。在设置chroot环境或准备二进制发行版时，这很有用。应该使用绝对文件名指定目录。使用<code>prefix</code>和<code>exec_prefix</code>不支持GNU标准的make变量集。
</p>
<p>GNU C库包含一个称为<code>nscd</code> ，您可能希望也可能不想运行它。 <code>nscd</code>缓存名称服务查找；它可以极大地提高NIS +的性能，也可能有助于DNS。
</p>
<p>一个辅助程序， <samp>/usr/libexec/pt_chown</samp> ，已安装setuid <code>root</code>如果“ <samp>--enable-pt_chown</samp>使用配置选项。该程序由<code>grantpt</code>功能;它在伪终端上设置权限，以便调用进程可以使用它。如果您将Linux内核与<code>devpts</code>文件系统已启用并已安装在<samp>/dev/pts</samp> ，则不需要此程序。
</p>
<p>安装后，您应该配置时区并安装系统的语言环境。时区配置可确保您的系统时间与当前时区的时间匹配。语言环境确保系统上信息的显示与您的语言和地理区域的期望相匹配。
</p>
<p>GNU C库能够使用两种本地化信息源，第一种是名为<samp>locale-archive</samp>通常安装为<samp>/usr/lib/locale/locale-archive</samp> 。语言环境档案的好处是占用更少的空间并且加载速度非常快，但前提是您计划安装60个或更多的语言环境。如果您打算安装一个或两个语言环境，则可以将各个语言环境安装到其自命名目录中，例如<samp>/usr/lib/locale/en_US.utf8</samp> 。例如，使用名称为UTF-8的字符集安装德语语言环境<code>de_DE</code>进入区域档案，发出命令“ <samp>localedef -i de_DE -f UTF-8 de_DE</samp> '，并仅安装一种语言环境，请发出命令' <samp>localedef --no-archive -i de_DE -f UTF-8 de_DE</samp> '。要配置GNU C库支持的所有语言环境，您可以从构建目录中发出命令' <samp>make localedata/install-locales</samp> '将所有语言环境安装到语言环境档案中，或' <samp>make localedata/install-locale-files</samp> '，将所有语言环境作为文件安装在默认配置的语言环境安装目录中（源自“ <samp>--prefix</samp> ' 要么<code>--localedir</code> ）。要安装到备用系统根目录，请使用' <samp>DESTDIR</samp> '例如' <samp>make localedata/install-locale-files DESTDIR=/opt/glibc</samp> '，但请注意，这不会更改配置的前缀。
</p>
<p>要配置本地使用的时区，请设置<code>TZ</code>环境变量。剧本<code>tzselect</code>帮助您选择正确的值。例如，对于德国， <code>tzselect</code>会告诉您使用“ <samp>TZ='Europe/Berlin'</samp> '。对于系统范围的安装（给定的路径适用于带有“ <samp>--prefix=/usr</samp> '），链接位于其中的时区文件<samp>/usr/share/zoneinfo</samp>到文件<samp>/etc/localtime</samp> 。对于德国，您可以执行“ <samp>ln -s /usr/share/zoneinfo/Europe/Berlin /etc/localtime</samp> '。
</p>
<hr>
<div class="header">
<p>下一页： <a href="Tools-for-Compilation.html#Tools-for-Compilation" rel="next" accesskey="n">编译工具</a> ，上一页： <a href="Configuring-and-compiling.html#Configuring-and-compiling" rel="prev" accesskey="p">配置和编译</a> ，上一页： <a href="Installation.html#Installation" rel="up" accesskey="u">安装</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>