<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>接收参数（GNU C库）</title>

<meta name="description" content="Receiving Arguments (The GNU C Library)">
<meta name="keywords" content="Receiving Arguments (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="How-Variadic.html#How-Variadic" rel="up" title="How Variadic">
<link href="How-Many-Arguments.html#How-Many-Arguments" rel="next" title="How Many Arguments">
<link href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" title="Variadic Prototypes">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Receiving-Arguments"></span><div class="header">
<p>下一篇： <a href="How-Many-Arguments.html#How-Many-Arguments" rel="next" accesskey="n">多少个论点</a> ，上<a href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" accesskey="p">一篇</a> ： <a href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" accesskey="p">可变</a> <a href="How-Many-Arguments.html#How-Many-Arguments" rel="next" accesskey="n">参数的</a> <a href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" accesskey="p">原型</a> ，上： <a href="How-Variadic.html#How-Variadic" rel="up" accesskey="u">可变参数的</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Receiving-the-Argument-Values"></span><h4 class="subsubsection">A.2.2.2接收参数值</h4>
<span id="index-variadic-function-argument-access"></span>
<span id="index-arguments-_0028variadic-functions_0029"></span>

<p>普通的固定参数有单独的名称，您可以使用这些名称来访问它们的值。但是可选参数没有名称-除了' <samp>…</samp> '。您如何访问它们？
</p>
<span id="index-stdarg_002eh"></span>
<p>访问它们的唯一方法是按它们的写入顺序依次进行，并且必须使用来自以下对象的特殊宏<samp>stdarg.h</samp>在以下三步过程中：</p>
<ol>
<li>您初始化类型的参数指针变量<code>va_list</code>使用<code>va_start</code> 。初始化后的参数指针指向第一个可选参数。

</li><li>您可以通过连续调用来访问可选参数<code>va_arg</code> 。首次致电<code>va_arg</code>给您第一个可选参数，下一个调用给您第二个参数，依此类推。

<p>如果您希望忽略任何剩余的可选参数，则可以随时停止。一个函数访问的参数少于调用中提供的参数是完全可以的，但是，如果尝试访问太多的参数，则会得到垃圾值。
</p>
</li><li>您通过调用来表明您已经完成了参数指针变量<code>va_end</code> 。

<p>（实际上，对于大多数C编译器， <code>va_end</code>什么也没做。在GNU C编译器中总是如此。但是你最好打电话<code>va_end</code>以防万一有一天您的程序是用特殊的编译器编译的。）
</p></li></ol>

<p>有关的完整定义，请参见<a href="Argument-Macros.html#Argument-Macros">参数宏</a> 。 <code>va_start</code> ， <code>va_arg</code>和<code>va_end</code> 。
</p>
<p>步骤1和3必须在接受可选参数的函数中执行。但是，您可以通过<code>va_list</code>变量作为另一个函数的参数，并在那里执行步骤2的全部或部分。
</p>
<p>您可以在一个函数调用中多次执行三个步骤的整个序列。如果要忽略可选参数，可以将这些步骤执行零次。
</p>
<p>如果愿意，可以有多个参数指针变量。您可以使用以下命令初始化每个变量<code>va_start</code>您可以根据需要使用每个参数指针获取参数。每个参数指针变量将按相同的参数值序列进行排序，但步调相同。
</p>
<p><strong>可移植性说明：</strong>对于某些编译器，一旦将参数指针值传递给子例程，则在该子例程返回后，一定不要继续使用相同的参数指针值。为了实现完全的可移植性，您应该将其传递给<code>va_end</code> 。这实际上是ISO C <!-- /@w -->要求，但是无论如何，大多数ANSI C编译器都能愉快地工作。
</p>
<hr>
<div class="header">
<p>下一篇： <a href="How-Many-Arguments.html#How-Many-Arguments" rel="next" accesskey="n">多少个论点</a> ，上<a href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" accesskey="p">一篇</a> ： <a href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" accesskey="p">可变</a> <a href="How-Many-Arguments.html#How-Many-Arguments" rel="next" accesskey="n">参数的</a> <a href="Variadic-Prototypes.html#Variadic-Prototypes" rel="prev" accesskey="p">原型</a> ，上： <a href="How-Variadic.html#How-Variadic" rel="up" accesskey="u">可变参数的</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>