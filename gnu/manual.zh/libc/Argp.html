<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Argp（GNU C库）</title>

<meta name="description" content="Argp (The GNU C Library)">
<meta name="keywords" content="Argp (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Parsing-Program-Arguments.html#Parsing-Program-Arguments" rel="up" title="Parsing Program Arguments">
<link href="Argp-Global-Variables.html#Argp-Global-Variables" rel="next" title="Argp Global Variables">
<link href="Getopt-Long-Option-Example.html#Getopt-Long-Option-Example" rel="prev" title="Getopt Long Option Example">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Argp"></span><div class="header">
<p>下一篇：子<a href="Suboptions.html#Suboptions" rel="next" accesskey="n">选项</a> ，上一篇： <a href="Getopt.html#Getopt" rel="prev" accesskey="p">Getopt</a> ，上一篇： <a href="Parsing-Program-Arguments.html#Parsing-Program-Arguments" rel="up" accesskey="u">解析程序参数</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Parsing-Program-Options-with-Argp"></span><h3 class="section">25.3使用Argp解析程序选项</h3>
<span id="index-argp-_0028program-argument-parser_0029"></span>
<span id="index-argument-parsing-with-argp"></span>
<span id="index-option-parsing-with-argp"></span>

<p><em>Argp</em>是用于解析Unix风格参数向量的接口。请参阅<a href="Program-Arguments.html#Program-Arguments">程序参数</a> 。
</p>
<p>Argp提供了更常用的功能<code>getopt</code>接口。这些功能包括响应“ <samp>--help</samp> '和' <samp>--version</samp>选项，如GNU编码标准中所述。使用argp使得程序员不太可能忽略实现这些附加选项或使它们保持最新状态。
</p>
<p>Argp还提供了将多个独立定义的选项解析器合并为一个的能力，可以调解它们之间的冲突并使结果显得无缝。库可以导出用户程序可能与他们自己的选项解析器结合使用的argp选项解析器，从而减少了用户程序的工作量。某些程序可能仅使用由库导出的参数解析器，从而实现对由库实现的抽象的一致且有效的选项解析。
</p>
<span id="index-argp_002eh"></span>
<p>头文件<samp><argp.h></samp>应该包括在内才能使用argp。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="Argp-Global-Variables.html#Argp-Global-Variables" accesskey="1">Argp全局变量</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Parsers.html#Argp-Parsers" accesskey="2">指定Argp解析器</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Option-Vectors.html#Argp-Option-Vectors" accesskey="3">在Argp解析器中指定选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Parser-Functions.html#Argp-Parser-Functions" accesskey="4">Argp解析器功能</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Children.html#Argp-Children" accesskey="5">组合多个Argp解析器</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Flags.html#Argp-Flags" accesskey="6">标志<code>argp_parse</code></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Help-Filtering.html#Argp-Help-Filtering" accesskey="7">自定义Argp帮助输出</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Help.html#Argp-Help" accesskey="8">的<code>argp_help</code>功能</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Help-Flags.html#Argp-Help-Flags" accesskey="9">标志<code>argp_help</code>功能</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Examples.html#Argp-Examples">Argp示例</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-User-Customization.html#Argp-User-Customization">Argp用户自定义</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="Suboptions-Example.html#Suboptions-Example">解析子选项示例</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<span id="The-argp_005fparse-Function"></span><h4 class="subsection">25.3.1 <code>argp_parse</code>功能</h4>

<p>argp的主要接口是<code>argp_parse</code>功能。在许多情况下， <code>argp_parse</code>是唯一需要的参数解析代码<code>main</code> 。请参阅<a href="Program-Arguments.html#Program-Arguments">程序参数</a> 。
</p>
<dl>
<dt id="index-argp_005fparse">功能： <em>error_t</em> <strong>argp_parse</strong> <em>（const struct</em> <strong>argp</strong> <em>* <var>argp</var> ，int <var>argc</var> ，字符** <var>argv</var> ，未签名<var>flags</var> ，int * <var>arg_index</var> ，无效* <var>input</var> ）</em></dt>
<dd>
<p>初步： MT不安全种族：argpbuf语言环境| AS不安全堆i18n锁损坏| AC不安全的内存锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>argp_parse</code>函数解析参数<var>argv</var> ，长度<var>argc</var> ，使用argp解析器<var>argp</var> 。请参阅<a href="Argp-Parsers.html#Argp-Parsers">Argp分析器</a> 。为传递一个空指针<var>argp</var>与使用a相同<code>struct argp</code>包含所有零。
</p>
<p><var>flags</var>是一组修改分析行为的标志位。参见<a href="Argp-Flags.html#Argp-Flags">Argp标志</a> 。 <var>input</var>传递给argp解析器<var>argp</var> ，其含义由<var>argp</var> 。典型的用法是将指针传递给结构，该结构用于为解析器指定参数并返回结果。
</p>
<p>除非<code>ARGP_NO_EXIT</code>要么<code>ARGP_NO_HELP</code>标志包括在<var>flags</var> ，打电话<code>argp_parse</code>可能导致程序退出。如果检测到错误或遇到未知选项，则此行为为true。请参阅<a href="Program-Termination.html#Program-Termination">程序终止</a> 。
</p>
<p>如果<var>arg_index</var>为非null，则第一个未解析选项的索引<var>argv</var>作为值返回。
</p>
<p>成功解析的返回值为零，如果检测到错误，则返回错误代码（请参阅<a href="Error-Codes.html#Error-Codes">错误代码</a> ）。不同的argp解析器可能返回任意错误代码，但是标准错误代码是： <code>ENOMEM</code>如果发生内存分配错误，或者<code>EINVAL</code>如果遇到未知的选项或选项参数。
</p></dd></dl>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="Argp-Global-Variables.html#Argp-Global-Variables" accesskey="1">全球</a></td><td>  </td><td align="left" valign="top">全局argp参数。
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Parsers.html#Argp-Parsers" accesskey="2">解析器</a></td><td>  </td><td align="left" valign="top">定义解析器以用于<code>argp_parse</code> 。
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Flags.html#Argp-Flags" accesskey="3">标志</a></td><td>  </td><td align="left" valign="top">修改行为的标志<code>argp_parse</code> 。
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Help.html#Argp-Help" accesskey="4">帮助</a></td><td>  </td><td align="left" valign="top">不解析时打印帮助消息。
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-Examples.html#Argp-Examples" accesskey="5">例子</a></td><td>  </td><td align="left" valign="top">使用argp的程序的简单示例。
</td></tr>
<tr><td align="left" valign="top">• <a href="Argp-User-Customization.html#Argp-User-Customization" accesskey="6">定制</a></td><td>  </td><td align="left" valign="top">用户可以控制“ <samp>--help</samp> ' 输出格式。
</td></tr>
</tbody></table>

<hr>
<div class="header">
<p>下一篇：子<a href="Suboptions.html#Suboptions" rel="next" accesskey="n">选项</a> ，上一篇： <a href="Getopt.html#Getopt" rel="prev" accesskey="p">Getopt</a> ，上一篇： <a href="Parsing-Program-Arguments.html#Parsing-Program-Arguments" rel="up" accesskey="u">解析程序参数</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>