<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>预定义的Printf处理程序（GNU C库）</title>

<meta name="description" content="Predefined Printf Handlers (The GNU C Library)">
<meta name="keywords" content="Predefined Printf Handlers (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Customizing-Printf.html#Customizing-Printf" rel="up" title="Customizing Printf">
<link href="Formatted-Input.html#Formatted-Input" rel="next" title="Formatted Input">
<link href="Printf-Extension-Example.html#Printf-Extension-Example" rel="prev" title="Printf Extension Example">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Predefined-Printf-Handlers"></span><div class="header">
<p>上<a href="Printf-Extension-Example.html#Printf-Extension-Example" rel="prev" accesskey="p">一篇</a> ： <a href="Printf-Extension-Example.html#Printf-Extension-Example" rel="prev" accesskey="p">Printf扩展示例</a> ，上<a href="Customizing-Printf.html#Customizing-Printf" rel="up" accesskey="u">一篇</a> ： <a href="Customizing-Printf.html#Customizing-Printf" rel="up" accesskey="u">自定义Printf</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Predefined-printf-Handlers"></span><h4 class="subsection">12.13.5预定义<code>printf</code>处理程序</h4>

<p>GNU C库还包含以下内容的具体有用的应用程序： <code>printf</code>处理程序扩展。有两种功能可以实现一种特殊的方式来打印浮点数。
</p>
<dl>
<dt id="index-printf_005fsize">函数： <em>int</em> <strong>printf_size</strong> <em>（FILE * <var>fp</var> ，const struct printf_info * <var>info</var> ，const void * const * <var>args</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：fp语言环境| AS不安全的损坏堆| AC不安全的内存损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>按照格式打印给定的浮点数<code>%f</code>除了有一个后缀字符表示该数字的除数使该数小于1000。有两个可能的除数：1024的幂或1000的幂。使用哪一个取决于注册此处理程序时指定的格式字符。如果字符是小写字母，则使用1024。对于大写字符，使用1000。
</p>
<p>后缀标记对应于字节，千字节，兆字节，千兆字节等。完整表为：</p>

<p>默认精度为3，即以小写格式字符打印1024，就好像它是<code>%.3fk</code>并会产生<code>1.000k</code> 。
</p></dd></dl>

<p>由于要求<code>register_printf_function</code>我们还必须提供返回有关参数信息的函数。
</p>
<dl>
<dt id="index-printf_005fsize_005finfo">功能： <em>int</em> <strong>printf_size_info</strong> <em>（const struct printf_info * <var>info</var> ，size_t <var>n</var> ，int * <var>argtypes</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数将返回<var>argtypes</var>有关所用参数的信息<code>vfprintf</code>实施预期。格式总是带有一个参数。
</p></dd></dl>

<p>要使用这些功能，两个功能都必须注册一个调用，例如</p>
<div class="example">
<pre class="example">register_printf_function ('B', printf_size, printf_size_info);
</pre></div>

<p>由于格式字符，此处我们注册了将数字打印为1000的幂的函数<code>'B'</code>是大写字符。如果我们另外使用<code>'b'</code>像</p>
<div class="example">
<pre class="example">register_printf_function ('b', printf_size, printf_size_info);
</pre></div>

<p>我们也可以使用1024的幂进行打印。请注意，这两行的唯一不同之处在于格式说明符。的<code>printf_size</code>函数知道大小写格式说明符之间的区别。
</p>
<p>指某东西的用途<code>'B'</code>和<code>'b'</code>不是巧合。而是使用此功能的首选方法，因为它在某些也使用格式说明符的其他系统上可用。
</p>
<hr>
<div class="header">
<p>上<a href="Printf-Extension-Example.html#Printf-Extension-Example" rel="prev" accesskey="p">一篇</a> ： <a href="Printf-Extension-Example.html#Printf-Extension-Example" rel="prev" accesskey="p">Printf扩展示例</a> ，上<a href="Customizing-Printf.html#Customizing-Printf" rel="up" accesskey="u">一篇</a> ： <a href="Customizing-Printf.html#Customizing-Printf" rel="up" accesskey="u">自定义Printf</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>