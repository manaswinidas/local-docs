<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>浮点转换（GNU C库）</title>

<meta name="description" content="Floating-Point Conversions (The GNU C Library)">
<meta name="keywords" content="Floating-Point Conversions (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Formatted-Output.html#Formatted-Output" rel="up" title="Formatted Output">
<link href="Other-Output-Conversions.html#Other-Output-Conversions" rel="next" title="Other Output Conversions">
<link href="Integer-Conversions.html#Integer-Conversions" rel="prev" title="Integer Conversions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Floating_002dPoint-Conversions"></span><div class="header">
<p>下一篇： <a href="Other-Output-Conversions.html#Other-Output-Conversions" rel="next" accesskey="n">其他输出转换</a> ，上一篇： <a href="Integer-Conversions.html#Integer-Conversions" rel="prev" accesskey="p">整数转换</a> ，上一篇： <a href="Formatted-Output.html#Formatted-Output" rel="up" accesskey="u">格式化输出</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Floating_002dPoint-Conversions-1"></span><h4 class="subsection">12.12.5浮点转换</h4>

<p>本节讨论浮点数的转换规范： <samp>%f</samp> '，' <samp>%e</samp> '，' <samp>%E</samp> '，' <samp>%g</samp> '和' <samp>%G</samp>转换。
</p>
<p>' <samp>%f</samp> '转换以定点表示法打印其参数，从而产生[ <code><span class="nolinebreak">-</span></code> ] <var>ddd</var><code>.</code><var>ddd</var> <!-- /@w --> ，其中小数点后的位数由您指定的精度控制。
</p>
<p>' <samp>%e</samp> '转换以指数表示法输出其参数，从而产生[ <code><span class="nolinebreak">-</span></code> ] <var>d</var><code>.</code><var>ddd</var><code>e</code> [ <code>+</code> | <code><span class="nolinebreak">-</span></code> ] <var>dd</var> <!-- /@w --> 。同样，小数点后的位数由精度控制。指数始终至少包含两位数。' <samp>%E</samp> '转换类似，但指数标有字母' <samp>E</samp> ' 代替 ' <samp>e</samp> '。
</p>
<p>' <samp>%g</samp> '和' <samp>%G</samp> '转换会以' <samp>%e</samp> ' 要么 ' <samp>%E</samp> '（分别）是否指数小于-4或大于或等于精度；否则，他们会使用“ <samp>%f</samp>的风格。的精度<code>0</code> ，取为1。从结果的小数部分中删除尾随零，并且仅当小数点后跟数字时，才会出现小数点字符。
</p>
<p>' <samp>%a</samp> '和' <samp>%A</samp>转换旨在精确地以文本形式表示浮点数，以便可以在不同程序和/或机器之间将它们转换为文本。数字以[ <code><span class="nolinebreak">-</span></code> ] <code>0x</code><var>h</var><code>.</code><var>hhh</var><code>p</code> [ <code>+</code> | <code><span class="nolinebreak">-</span></code> ] <var>dd</var> <!-- /@w --> 。在小数点字符的左边正好打印一位。这个角色只是<code>0</code>如果数字是非规范化的。否则，该值不确定。它取决于实现方式使用多少位。小数点字符右边的十六进制位数等于精度。如果精度为零，则确定它足够大以提供数字的精确表示（或者，如果精度为零，则它足够大以区分两个相邻的值）。 <code>FLT_RADIX</code>不是2的幂，请参见<a href="Floating-Point-Parameters.html#Floating-Point-Parameters">浮点参数</a> 。为了 ' <samp>%a</samp> '转换小写字符用于表示十六进制数字，并且前缀和指数符号打印为<code>0x</code>和<code>p</code>分别。否则，使用大写字符，并且<code>0X</code>和<code>P</code>用于表示前缀和指数字符串。以2的底数为底的指数被打印为十进制数，至少使用一位，但最多需要多少位才能准确表示该值。
</p>
<p>如果要打印的值表示无穷大或NaN，则输出为[ <code><span class="nolinebreak">-</span></code> ] <code>inf</code> <!-- /@w -->或<code>nan</code>如果转换说明符为' <samp>%a</samp> '，' <samp>%e</samp> '，' <samp>%f</samp> '， 要么 ' <samp>%g</samp> '，它是[ <code><span class="nolinebreak">-</span></code> ] <code>INF</code> <!-- /@w -->或<code>NAN</code>如果转换为' <samp>%A</samp> '，' <samp>%E</samp> '， 要么 ' <samp>%G</samp> '。
</p>
<p>以下标志可用于修改行为：</p>
<dl compact>
<dt>' <samp>-</samp> '</dt>
<dd><p>在字段中左对齐结果。通常，结果是右对齐的。
</p>
</dd>
<dt>' <samp>+</samp> '</dt>
<dd><p>在结果中始终包含加号或减号。
</p>
</dd>
<dt>' <samp></samp> '</dt>
<dd><p>如果结果不是以加号或减号开头，请在其前面加上一个空格。自“ <samp>+</samp> '标志可确保结果包含一个符号，如果您同时提供这两个标志，则将忽略该标志。
</p>
</dd>
<dt>' <samp>#</samp> '</dt>
<dd><p>指定结果中应始终包含小数点，即使后面没有数字也是如此。为了 ' <samp>%g</samp> '和' <samp>%G</samp>转换时，这也会强制将小数点后的尾随零保留在原本可以删除的位置。
</p>
</dd>
<dt>' <samp>'</samp> '</dt>
<dd><p>将结果的整数部分的数字分成几组，这些组由为<code>LC_NUMERIC</code>类别;参见<a href="General-Numeric.html#General-Numeric">通用数值</a> 。此标志是GNU扩展。
</p>
</dd>
<dt>' <samp>0</samp> '</dt>
<dd><p>用零而不是空格填充字段；零放在任何符号后。如果“ <samp>-</samp>还指定了'标志。
</p></dd>
</dl>

<p>精度指定'的小数点后跟几位数字<samp>%f</samp> '，' <samp>%e</samp> '和' <samp>%E</samp>转换。对于这些转换，默认精度为<code>6</code> 。如果精确度明确<code>0</code> ，这将完全消除小数点字符。为了 ' <samp>%g</samp> '和' <samp>%G</samp>在转换中，精度指定要打印的有效位数。有效数字是小数点前的第一个数字，其后是所有数字。如果精度是<code>0</code>或未为“ <samp>%g</samp> ' 要么 ' <samp>%G</samp> '，它被视为值<code>1</code> 。如果无法用指定的位数准确表示要打印的值，则将值四舍五入为最接近的数字。
</p>
<p>没有类型修饰符，浮点转换将使用类型的参数<code>double</code> 。（通过默认的参数提升，任何<code>float</code>参数自动转换为<code>double</code> ）支持以下类型修饰符：</p>
<dl compact>
<dt>' <samp>L</samp> '</dt>
<dd><p>一个大写 ' <samp>L</samp> '指定参数为<code>long double</code> 。
</p></dd>
</dl>

<p>以下是一些示例，显示了如何使用各种浮点转换来打印数字。所有数字均使用以下模板字符串打印：</p>
<div class="example">
<pre class="example">&quot;|%13.4a|%13.4f|%13.4e|%13.4g|\n&quot;
</pre></div>

<p>这是输出：</p>
<div class="example">
<pre class="example">|  0x0.0000p+0|       0.0000|   0.0000e+00|            0|
|  0x1.0000p-1|       0.5000|   5.0000e-01|          0.5|
|  0x1.0000p+0|       1.0000|   1.0000e+00|            1|
| -0x1.0000p+0|      -1.0000|  -1.0000e+00|           -1|
|  0x1.9000p+6|     100.0000|   1.0000e+02|          100|
|  0x1.f400p+9|    1000.0000|   1.0000e+03|         1000|
| 0x1.3880p+13|   10000.0000|   1.0000e+04|        1e+04|
| 0x1.81c8p+13|   12345.0000|   1.2345e+04|    1.234e+04|
| 0x1.86a0p+16|  100000.0000|   1.0000e+05|        1e+05|
| 0x1.e240p+16|  123456.0000|   1.2346e+05|    1.235e+05|
</pre></div>

<p>请注意“ <samp>%g</samp> '转换后尾随零。
</p>
<hr>
<div class="header">
<p>下一篇： <a href="Other-Output-Conversions.html#Other-Output-Conversions" rel="next" accesskey="n">其他输出转换</a> ，上一篇： <a href="Integer-Conversions.html#Integer-Conversions" rel="prev" accesskey="p">整数转换</a> ，上一篇： <a href="Formatted-Output.html#Formatted-Output" rel="up" accesskey="u">格式化输出</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>