<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>设置用户ID（GNU C库）</title>

<meta name="description" content="Setting User ID (The GNU C Library)">
<meta name="keywords" content="Setting User ID (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Users-and-Groups.html#Users-and-Groups" rel="up" title="Users and Groups">
<link href="Setting-Groups.html#Setting-Groups" rel="next" title="Setting Groups">
<link href="Reading-Persona.html#Reading-Persona" rel="prev" title="Reading Persona">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Setting-User-ID"></span><div class="header">
<p>下一个： <a href="Setting-Groups.html#Setting-Groups" rel="next" accesskey="n">设置组</a> ，上一个： <a href="Reading-Persona.html#Reading-Persona" rel="prev" accesskey="p">阅读角色</a> ，上： <a href="Users-and-Groups.html#Users-and-Groups" rel="up" accesskey="u">用户和组</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Setting-the-User-ID"></span><h3 class="section">30.6设置用户ID</h3>

<p>本节介绍了用于更改进程的用户ID（真实和/或有效）的功能。要使用这些功能，必须包含头文件<samp>sys/types.h</samp>和<samp>unistd.h</samp> 。
<span id="index-unistd_002eh-23"></span>
<span id="index-sys_002ftypes_002eh-5"></span>
</p>
<dl>
<dt id="index-seteuid">函数： <em>int</em> <strong>seteuid</strong> <em>（uid_t <var>neweuid</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能将进程的有效用户ID设置为<var>neweuid</var> ，前提是允许该进程更改其有效用户ID。特权进程（有效用户ID为零）可以将其有效用户ID更改为任何合法值。具有文件用户ID的非特权进程可以将其有效用户ID更改为其实际用户ID或其文件用户ID。否则，进程可能根本不会更改其有效用户ID。
</p>
<p>的<code>seteuid</code>函数返回值<code>0</code>表示成功完成，值为<code>-1</code>表示错误。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EINVAL</code></dt>
<dd><p>的价值<var>neweuid</var>参数无效。
</p>
</dd>
<dt><code>EPERM</code></dt>
<dd><p>该过程可能不会更改为指定的ID。</p></dd>
</dl>

<p>较旧的系统（没有<code>_POSIX_SAVED_IDS</code>功能）没有此功能。
</p></dd></dl>

<dl>
<dt id="index-setuid">函数： <em>int</em> <strong>setuid</strong> <em>（uid_t <var>newuid</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果调用进程具有特权，则此函数会将进程的实际和有效用户ID设置为<var>newuid</var> 。它还将删除该进程的文件用户标识（如果有）。 <var>newuid</var>可能具有任何法律价值。（完成此操作后，将无法恢复旧的有效用户ID。）
</p>
<p>如果该进程没有特权，并且系统支持<code>_POSIX_SAVED_IDS</code>功能，则此功能的行为类似于<code>seteuid</code> 。
</p>
<p>返回值和错误条件与相同<code>seteuid</code> 。
</p></dd></dl>

<dl>
<dt id="index-setreuid">函数： <em>int</em> <strong>setreuid</strong> <em>（uid_t <var>ruid</var> ，uid_t <var>euid</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能将进程的实际用户ID设置为<var>ruid</var>和有效的用户ID <var>euid</var> 。如果<var>ruid</var>是<code>-1</code> ，表示不更改真实用户ID；如果<var>euid</var>是<code>-1</code> ，表示不更改有效用户ID。</p>
<p>的<code>setreuid</code>存在与4.3 BSD Unix兼容的功能，该版本不支持文件ID。您可以使用此功能交换过程的有效和实际用户ID。（特权进程不限于此特定用法。）如果支持文件ID，则应使用该功能代替此功能。请参阅<a href="Enable_002fDisable-Setuid.html#Enable_002fDisable-Setuid">启用/禁用Setuid</a> 。
</p>
<p>返回值为<code>0</code>成功与<code>-1</code>失败。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EPERM</code></dt>
<dd><p>该进程没有适当的特权；您无权更改为指定的ID。</p></dd>
</dl>
</dd></dl>

<hr>
<div class="header">
<p>下一个： <a href="Setting-Groups.html#Setting-Groups" rel="next" accesskey="n">设置组</a> ，上一个： <a href="Reading-Persona.html#Reading-Persona" rel="prev" accesskey="p">阅读角色</a> ，上： <a href="Users-and-Groups.html#Users-and-Groups" rel="up" accesskey="u">用户和组</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>