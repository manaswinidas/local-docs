<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>状态位操作（GNU C库）</title>

<meta name="description" content="Status bit operations (The GNU C Library)">
<meta name="keywords" content="Status bit operations (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Floating-Point-Errors.html#Floating-Point-Errors" rel="up" title="Floating Point Errors">
<link href="Math-Error-Reporting.html#Math-Error-Reporting" rel="next" title="Math Error Reporting">
<link href="Infinity-and-NaN.html#Infinity-and-NaN" rel="prev" title="Infinity and NaN">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Status-bit-operations"></span><div class="header">
<p>下一篇： <a href="Math-Error-Reporting.html#Math-Error-Reporting" rel="next" accesskey="n">数学错误报告</a> ，上一篇： <a href="Infinity-and-NaN.html#Infinity-and-NaN" rel="prev" accesskey="p">Infinity和NaN</a> ，上一篇： <a href="Floating-Point-Errors.html#Floating-Point-Errors" rel="up" accesskey="u">浮点错误</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Examining-the-FPU-status-word"></span><h4 class="subsection">20.5.3检查FPU状态字</h4>

<p>ISO C99 <!-- /@w -->定义了查询和操纵浮点状态字的函数。您可以在方便时使用这些函数检查未捕获的异常，而不必在计算过程中担心它们。
</p>
<p>这些常量表示各种IEEE 754 <!-- /@w -->异常。并非所有的FPU都报告所有不同的异常。仅当您要编译的FPU支持该异常时，才定义每个常量，因此您可以使用“ <samp>#ifdef</samp> '。它们在<samp>fenv.h</samp> 。
</p>
<dl compact>
<dt><code>FE_INEXACT</code>
<span id="index-FE_005fINEXACT"></span>
</dt>
<dd>
<p>不精确的异常。
</p></dd>
<dt><code>FE_DIVBYZERO</code>
<span id="index-FE_005fDIVBYZERO"></span>
</dt>
<dd>
<p>除零例外。
</p></dd>
<dt><code>FE_UNDERFLOW</code>
<span id="index-FE_005fUNDERFLOW"></span>
</dt>
<dd>
<p>下溢异常。
</p></dd>
<dt><code>FE_OVERFLOW</code>
<span id="index-FE_005fOVERFLOW"></span>
</dt>
<dd>
<p>溢出异常。
</p></dd>
<dt><code>FE_INVALID</code>
<span id="index-FE_005fINVALID"></span>
</dt>
<dd>
<p>无效的异常。
</p></dd>
</dl>

<p>宏<code>FE_ALL_EXCEPT</code>是FP实现支持的所有异常宏的按位或。
</p>
<p>这些功能使您可以清除异常标志，测试异常以及保存和还原标记的异常集。
</p>
<dl>
<dt id="index-feclearexcept">函数： <em>int</em> <strong>feclearexcept</strong> <em>（int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全！posix |交流安全！posix |请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能清除由指示的所有受支持的异常标志<var>excepts</var> 。
</p>
<p>如果操作成功，该函数将返回零，否则返回非零值。
</p></dd></dl>

<dl>
<dt id="index-feraiseexcept">函数： <em>int</em> <strong>feraiseexcept</strong> <em>（int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数引发以下指示的受支持的异常<var>excepts</var> 。如果有多个异常位<var>excepts</var>设置了引发异常的顺序是不确定的，除了溢出（ <code>FE_OVERFLOW</code> ）或下溢（ <code>FE_UNDERFLOW</code> ）在不精确（ <code>FE_INEXACT</code> ）。对于上溢还是下溢，还会引发不精确的异常，这也取决于实现。
</p>
<p>如果操作成功，该函数将返回零，否则返回非零值。
</p></dd></dl>

<dl>
<dt id="index-fesetexcept">函数： <em>int</em> <strong>fesetexcept</strong> <em>（int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数设置支持的异常标志，由<var>excepts</var> ， 喜欢<code>feraiseexcept</code> ，但不会导致启用陷阱。 <code>fesetexcept</code>来自TS 18661-1：2014。
</p>
<p>如果操作成功，该函数将返回零，否则返回非零值。
</p></dd></dl>

<dl>
<dt id="index-fetestexcept">函数： <em>int</em> <strong>fetestexcept</strong> <em>（int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>测试参数是否指示异常标志<var>except</var>目前已设定。如果它们中的任何一个返回非零值，该值指定设置了哪些异常。否则结果为零。
</p></dd></dl>

<p>要了解这些功能，请想象状态字是一个名为<var>status</var> 。 <code>feclearexcept</code>则等于<samp>status &= ~excepts</samp> '和<code>fetestexcept</code>等价于' <samp>(status & excepts)</samp> '。当然，实际的实现可能有很大的不同。
</p>
<p>仅当程序通过调用显式请求时才清除异常标志<code>feclearexcept</code> 。如果要从一组计算中检查异常，则应首先清除所有标志。这是使用方法的简单示例<code>fetestexcept</code> ：</p>
<div class="example">
<pre class="example">{
  double f;
  int raised;
  feclearexcept (FE_ALL_EXCEPT);
  f = compute ();
  raised = fetestexcept (FE_OVERFLOW | FE_INVALID);
  if (raised &amp; FE_OVERFLOW) { /* &hellip; */ }
  if (raised &amp; FE_INVALID) { /* &hellip; */ }
  /* &hellip; */
}
</pre></div>

<p>您不能在状态字中显式设置位。但是，您可以保存整个状态字，并在以后还原它。这是通过以下功能完成的：</p>
<dl>
<dt id="index-fegetexceptflag">函数： <em>int</em> <strong>fegetexceptflag</strong> <em>（fexcept_t * <var>flagp</var> ，int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数存储在由指向的变量中<var>flagp</var>一个实现定义的值，表示由表示的异常标志的当前设置<var>excepts</var> 。
</p>
<p>如果操作成功，该函数将返回零，否则返回非零值。
</p></dd></dl>

<dl>
<dt id="index-fesetexceptflag">函数： <em>int</em> <strong>fesetexceptflag</strong> <em>（const fexcept_t * <var>flagp</var> ，int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能恢复由指示的异常的标志<var>excepts</var>到存储在由指向的变量中的值<var>flagp</var> 。
</p>
<p>如果操作成功，该函数将返回零，否则返回非零值。
</p></dd></dl>

<p>注意，该值存储在<code>fexcept_t</code>与返回的位掩码没有任何相似之处<code>fetestexcept</code> 。该类型甚至可能不是整数。请勿尝试修改<code>fexcept_t</code>变量。
</p>
<dl>
<dt id="index-fetestexceptflag">函数： <em>int</em> <strong>fetestexceptflag</strong> <em>（const fexcept_t * <var>flagp</var> ，int <var>excepts</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>测试参数是否指示异常标志<var>excepts</var>在由指向的变量中设置<var>flagp</var> 。如果它们中的任何一个返回非零值，该值指定设置了哪些异常。否则结果为零。
<code>fetestexceptflag</code>来自TS 18661-1：2014。
</p></dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="Math-Error-Reporting.html#Math-Error-Reporting" rel="next" accesskey="n">数学错误报告</a> ，上一篇： <a href="Infinity-and-NaN.html#Infinity-and-NaN" rel="prev" accesskey="p">Infinity和NaN</a> ，上一篇： <a href="Floating-Point-Errors.html#Floating-Point-Errors" rel="up" accesskey="u">浮点错误</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>