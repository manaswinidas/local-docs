<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>TZ变量（GNU C库）</title>

<meta name="description" content="TZ Variable (The GNU C Library)">
<meta name="keywords" content="TZ Variable (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Calendar-Time.html#Calendar-Time" rel="up" title="Calendar Time">
<link href="Time-Zone-Functions.html#Time-Zone-Functions" rel="next" title="Time Zone Functions">
<link href="General-Time-String-Parsing.html#General-Time-String-Parsing" rel="prev" title="General Time String Parsing">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="TZ-Variable"></span><div class="header">
<p>下一个： <a href="Time-Zone-Functions.html#Time-Zone-Functions" rel="next" accesskey="n">时区函数</a> ，上一个： <a href="Parsing-Date-and-Time.html#Parsing-Date-and-Time" rel="prev" accesskey="p">解析日期和时间</a> ，上： <a href="Calendar-Time.html#Calendar-Time" rel="up" accesskey="u">日历时间</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Specifying-the-Time-Zone-with-TZ"></span><h4 class="subsection">21.4.7指定时区<code>TZ</code></h4>

<p>在POSIX系统中，用户可以通过以下方式指定时区<code>TZ</code>环境变量。有关如何设置环境变量的信息，请参见<a href="Environment-Variables.html#Environment-Variables">环境变量</a> 。访问时区的函数在<samp>time.h</samp> 。
<span id="index-time_002eh-4"></span>
<span id="index-time-zone"></span>
</p>
<p>您通常不需要设置<code>TZ</code> 。如果系统配置正确，则默认时区将是正确的。你可能会设置<code>TZ</code>如果您是通过其他时区通过网络使用计算机，并且希望在您本地的时区而不是计算机本地的时区中向您报告时间。
</p>
<p>在POSIX.1系统中， <code>TZ</code>变量可以是以下三种格式之一。使用GNU C库，最常用的格式是最后一种格式，它可以从世界上许多地区的大型时区信息数据库中指定一种选择。前两种格式用于直接描述时区信息，这既麻烦又精确。但是POSIX.1标准仅指定了前两种格式的详细信息，因此，如果遇到不支持时区信息数据库的POSIX.1系统，最好熟悉它们。
</p>
<p>如果本地时区中没有夏令时（或夏令时），则使用第一种格式：</p>
<div class="example">
<pre class="example"><span class="roman"><var>std</var> <var>offset</var></span>
</pre></div>

<p>的<var>std</var>字符串指定时区的名称。它必须是三个或更多字符，并且不能包含前导冒号，嵌入的数字，逗号或正负号。没有空格字符将时区名称与<var>offset</var> ，因此这些限制对于正确解析规范是必需的。
</p>
<p>的<var>offset</var>指定您必须将其添加到本地时间以获得协调世界时值的时间值。它的语法类似于[ <code>+</code> | <code>-</code> ] <var>hh</var> [ <code>:</code><var>mm</var> [ <code>:</code><var>ss</var> ]]。如果当地时区在本初子午线以西，则为正；如果当地时区在东，则为负。小时必须介于<code>0</code>和<code>24</code> ，以及之间的分钟和秒<code>0</code>和<code>59</code> 。
</p>
<p>例如，这是我们如何指定东部标准时间，但没有任何夏令时替代方法：</p>
<div class="example">
<pre class="example">EST+5
</pre></div>

<p>有夏令时时使用第二种格式：</p>
<div class="example">
<pre class="example"><span class="roman"><var>std</var> <var>offset</var> <var>dst</var> [<var>offset</var>]<code>,</code><var>start</var>[<code>/</code><var>time</var>]<code>,</code><var>end</var>[<code>/</code><var>time</var>]</span>
</pre></div>

<p>最初的<var>std</var>和<var>offset</var>指定标准时区，如上所述。的<var>dst</var>字符串和<var>offset</var>指定相应的夏令时区的名称和偏移量；如果<var>offset</var>省略，默认为标准时间之前一小时。
</p>
<p>规范的其余部分描述了夏令时的生效时间。的<var>start</var>字段是夏令时生效且<var>end</var>字段是将更改恢复为标准时间的时间。这些字段可识别以下格式：</p>
<dl compact>
<dt><code>J<var>n</var></code></dt>
<dd><p>这指定了儒略日， <var>n</var>之间<code>1</code>和<code>365</code> 。即使在leap年，也不会算出2月29日。
</p>
</dd>
<dt><code><var>n</var></code></dt>
<dd><p>这指定了儒略日， <var>n</var>之间<code>0</code>和<code>365</code> 。2月29日为leap年。
</p>
</dd>
<dt><code>M<var>m</var>.<var>w</var>.<var>d</var></code></dt>
<dd><p>这指定了一天<var>d</var>一周的<var>w</var>的月份<var>m</var> 。那天<var>d</var>必须介于<code>0</code> （周日）和<code>6</code> 。星期<var>w</var>必须介于<code>1</code>和<code>5</code> ;周<code>1</code>是哪一天的第一周<var>d</var>发生，并且一周<code>5</code>指定<em>最后一个</em> <var>d</var>一个月中的一天。这个月<var>m</var>应该介于<code>1</code>和<code>12</code> 。
</p></dd>
</dl>

<p>的<var>time</var>字段指定在当前生效的当地时间何时更改为其他时间。如果省略，则默认为<code>02:00:00</code> 。时间字段的小时部分的范围是-167至167；这是POSIX.1的扩展，它仅允许范围0到24。
</p>
<p>这是一些例子<code>TZ</code>值，包括适当的夏时制及其适用日期。在北美东部标准时间（EST）和东部夏令时间（EDT），通常与UTC的时差为5小时；由于这位于本初子午线以西，因此符号为正。夏季时间从3月的第二个星期日的凌晨2:00开始，到11月的第一个星期日的凌晨2:00结束。
</p>
<div class="example">
<pre class="example">EST+5EDT,M3.2.0/2,M11.1.0/2
</pre></div>

<p>以色列的标准时间（IST）和以色列的夏令时间（IDT）在冬季比本初子午线早2小时，在3月的第四个星期四26:00（即3月或之后的第一个星期五的02:00）提前一个小时23），然后回退到10月的最后一个星期日的02:00。
</p>
<div class="example">
<pre class="example">IST-2IDT,M3.4.4/26,M10.5.0
</pre></div>

<p>阿根廷西部夏时（WARST）全年比本初子午线晚3小时。在12月31日的夏令时（即24:00标准时间，相当于1月1日在00:00标准时间）有一个虚拟的后备过渡，在1月1日的春天向前同步过渡标准时间为00:00，因此夏令时全年有效<code>WART</code>是一个占位符。
</p>
<div class="example">
<pre class="example">WART4WARST,J1/0,J365/25
</pre></div>

<p>冬季，西部格陵兰时间（WGT）和西部格陵兰夏令时间（WGST）比世界标准时间晚3小时。它的时钟遵循欧盟的规定，即在3月的最后一个星期日UTC时间01:00（当地时间-02：00）前进一小时，然后回退到10月的最后一个星期日UTC 01:00（当地时间-01：00）后退。 。
</p>
<div class="example">
<pre class="example">WGT3WGST,M3.5.0/-2,M10.5.0/-1
</pre></div>

<p>多年来，任何特定司法管辖区的夏令时时间表都已更改。为了严格正确，过去的日期和时间的转换应基于当时生效的时间表。但是，此格式没有工具可让您指定时间表如何逐年更改。您所能做的就是指定一个特定的日程表（通常是今天的日程表），该日程表可用于转换任何日期，无论何时。为了获得精确的时区规范，最好使用时区信息数据库（请参见下文）。
</p>
<p>第三种格式如下：</p>
<div class="example">
<pre class="example">:<var>characters</var>
</pre></div>

<p>每个操作系统对这种格式的解释都不同。在GNU C库中<var>characters</var>是描述时区的文件名。
</p>
<span id="index-_002fetc_002flocaltime"></span>
<span id="index-localtime-1"></span>
<p>如果<code>TZ</code>环境变量没有值，默认情况下，该操作会选择一个时区。在GNU C库中，默认时区类似于规范' <samp>TZ=:/etc/localtime</samp> ' （要么 ' <samp>TZ=:/usr/local/etc/localtime</samp> '，具体取决于GNU C库的配置方式；请参阅<a href="Installation.html#Installation">安装</a> ）。其他C库使用它们自己的规则来选择默认时区，因此我们对此无能为力。
</p>
<span id="index-time-zone-database"></span>
<span id="index-_002fusr_002fshare_002fzoneinfo"></span>
<span id="index-zoneinfo"></span>
<p>如果<var>characters</var>以斜杠开头，它是绝对文件名；否则，库将查找文件<samp>/usr/share/zoneinfo/<var>characters</var></samp> <!-- /@w --> 。的<samp>zoneinfo</samp>目录包含描述世界许多地方的本地时区的数据文件。名称代表主要城市，并包含地理区域的子目录；例如， <samp>America/New_York</samp> ， <samp>Europe/London</samp> ， <samp>Asia/Hong_Kong</samp> 。这些数据文件由系统管理员安装，系统管理员还设置<samp>/etc/localtime</samp>指向本地时区的数据文件。这些文件通常来自世界上大多数地区的时区<a href="http://www.iana.org/time-zones">时区数据库</a>和夏时制信息，该数据库由志愿者社区维护并置于公共领域。
</p>
<hr>
<div class="header">
<p>下一个： <a href="Time-Zone-Functions.html#Time-Zone-Functions" rel="next" accesskey="n">时区函数</a> ，上一个： <a href="Parsing-Date-and-Time.html#Parsing-Date-and-Time" rel="prev" accesskey="p">解析日期和时间</a> ，上： <a href="Calendar-Time.html#Calendar-Time" rel="up" accesskey="u">日历时间</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>