<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>浮动分析（GNU C库）</title>

<meta name="description" content="Parsing of Floats (The GNU C Library)">
<meta name="keywords" content="Parsing of Floats (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Parsing-of-Numbers.html#Parsing-of-Numbers" rel="up" title="Parsing of Numbers">
<link href="Printing-of-Floats.html#Printing-of-Floats" rel="next" title="Printing of Floats">
<link href="Parsing-of-Integers.html#Parsing-of-Integers" rel="prev" title="Parsing of Integers">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Parsing-of-Floats"></span><div class="header">
<p>上一页： <a href="Parsing-of-Integers.html#Parsing-of-Integers" rel="prev" accesskey="p">整数解析</a> ，向上： <a href="Parsing-of-Numbers.html#Parsing-of-Numbers" rel="up" accesskey="u">数字解析</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Parsing-of-Floats-1"></span><h4 class="subsection">20.11.2浮动分析</h4>

<span id="index-stdlib_002eh-18"></span>
<p>' <samp>str</samp> '函数在<samp>stdlib.h</samp>那些以“ <samp>wcs</samp> '在<samp>wchar.h</samp> 。有人可能会怀疑<code>restrict</code>在本节功能的原型中。它似乎没有用，但是ISO C <!-- /@w -->标准使用了它（用于那里定义的功能），因此我们也必须这样做。
</p>
<dl>
<dt id="index-strtod">功能： <em>double</em> <strong>strtod</strong> <em>（const char * restrict <var>string</var> ，char ** restrict <var>tailptr</var> ）</em></dt>
<dd>
<p>初步： MT安全区域| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>strtod</code> （“ string-to-double”）功能可将<var>string</var>到一个浮点数，该浮点数作为类型的值返回<code>double</code> 。
</p>
<p>该函数试图分解<var>string</var>如下：</p>
<ul>
<li>空格字符序列（可能为空）。哪些字符是空格取决于<code>isspace</code>功能（请参阅<a href="Classification-of-Characters.html#Classification-of-Characters">字符分类</a> ）。这些被丢弃。

</li><li>可选的正负号（' <samp>+</samp> ' 要么 ' <samp>-</samp> '）。

</li><li>十进制或十六进制格式的浮点数。十进制格式为：<ul class="no-bullet">
<li>-非空数字序列，可以选择包含小数点字符-通常为“ <samp>.</samp> '，但取决于语言环境（请参见<a href="General-Numeric.html#General-Numeric">General Numeric</a> ）。

</li><li>-可选的指数部分，由字符' <samp>e</samp> ' 要么 ' <samp>E</samp> '，一个可选符号和一个数字序列。

</li></ul>

<p>十六进制格式如下：</p><ul class="no-bullet">
<li>-一个0x或0X，后跟一个非空的十六进制数字序列，可以选择包含小数点字符，通常是' <samp>.</samp> '，但取决于语言环境（请参见<a href="General-Numeric.html#General-Numeric">General Numeric</a> ）。

</li><li>-可选的二进制指数部分，由字符' <samp>p</samp> ' 要么 ' <samp>P</samp> '，一个可选符号和一个数字序列。

</li></ul>

</li><li>字符串中所有剩余的字符。如果<var>tailptr</var>不是空指针，则指向该字符串尾部的指针存储在<code>*<var>tailptr</var></code> 。
</li></ul>

<p>如果字符串为空，仅包含空格，或者不包含具有预期浮点数语法的初始子字符串，则不执行任何转换。在这种情况下， <code>strtod</code>返回零值，并且返回值in <code>*<var>tailptr</var></code>是...的价值<var>string</var> 。
</p>
<p>在标准以外的语言环境中<code>"C"</code>要么<code>"POSIX"</code>语言环境，此功能可能会识别其他与语言环境有关的语法。
</p>
<p>如果字符串具有浮点数的有效语法，但该值超出了a的范围<code>double</code> ， <code>strtod</code>将按照<a href="Math-Error-Reporting.html#Math-Error-Reporting">数学错误报告中的说明</a>发出上溢或下溢信号。
</p>
<p><code>strtod</code>识别四个特殊的输入字符串。琴弦<code>"inf"</code>和<code>"infinity"</code>如果浮点格式不支持无限，则将其转换为<em>∞</em>或最大可表示值。您可以在前面加一个<code>"+"</code>要么<code>"-"</code>指定符号。扫描这些字符串时忽略大小写。
</p>
<p>琴弦<code>"nan"</code>和<code>"nan(<var>chars…</var>)"</code>转换为NaN。同样，忽略大小写。如果<var>chars…</var>提供，它们以未指定的方式用于选择NaN的特定表示形式（可以有多个）。
</p>
<p>由于零是有效的结果，并且是错误时返回的值，因此，您应按照与检查错误相同的方式检查错误<code>strtol</code> ，通过检查<code>errno</code>和<var>tailptr</var> 。
</p></dd></dl>

<dl>
<dt id="index-strtof">功能： <em>float</em> <strong>strtof</strong> <em>（const char * <var>string</var> ，字符** <var>tailptr</var> ）</em></dt>
<dt id="index-strtold">功能： <em>长双</em> <strong>strtold</strong> <em>（const char * <var>string</var> ，字符** <var>tailptr</var> ）</em></dt>
<dd>
<p>初步： MT安全区域| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>这些功能类似于<code>strtod</code> ，但返回<code>float</code>和<code>long double</code>值。他们报告错误的方式与<code>strtod</code> 。 <code>strtof</code>可以比<code>strtod</code> ，但精度较低；反过来， <code>strtold</code>可能慢很多，但精度更高（在<code>long double</code>是一种单独的类型）。
</p>
<p>这些功能是GNU扩展，是ISO C99 <!-- /@w -->新增功能。
</p></dd></dl>

<dl>
<dt id="index-strtofN">函数： <em>_FloatN</em> <strong>strtofN</strong> <em>（const char * <var>string</var> ，字符** <var>tailptr</var> ）</em></dt>
<dt id="index-strtofNx">函数： <em>_FloatNx</em> <strong>strtofNx</strong> <em>（const char * <var>string</var> ，字符** <var>tailptr</var> ）</em></dt>
<dd>
<p>初步： MT安全区域| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>这些功能就像<code>strtod</code> ，但返回类型除外。
</p>
<p>它们是在ISO / IEC TS <span class="nolinebreak">18661-3</span> <!-- /@w -->中引入的，并且在支持相关类型的机器上可用；见<a href="Mathematics.html#Mathematics">数学</a> 。
</p></dd></dl>

<dl>
<dt id="index-wcstod">函数： <em>double</em> <strong>wcstod</strong> <em>（const wchar_t *限制<var>string</var> ，wchar_t **限制<var>tailptr</var> ）</em></dt>
<dt id="index-wcstof">函数： <em>float</em> <strong>wcstof</strong> <em>（const wchar_t * <var>string</var> ，wchar_t ** <var>tailptr</var> ）</em></dt>
<dt id="index-wcstold">函数： <em>long double</em> <strong>wcstold</strong> <em>（const wchar_t * <var>string</var> ，wchar_t ** <var>tailptr</var> ）</em></dt>
<dt id="index-wcstofN">函数： <em>_FloatN</em> <strong>wcstofN</strong> <em>（const wchar_t * <var>string</var> ，wchar_t ** <var>tailptr</var> ）</em></dt>
<dt id="index-wcstofNx">函数： <em>_FloatNx</em> <strong>wcstofNx</strong> <em>（const wchar_t * <var>string</var> ，wchar_t ** <var>tailptr</var> ）</em></dt>
<dd>


<p>初步： MT安全区域| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>wcstod</code> ， <code>wcstof</code> ， <code>wcstol</code> ， <code>wcstof<var>N</var></code>和<code>wcstof<var>N</var>x</code>功能几乎在所有方面都等同于<code>strtod</code> ， <code>strtof</code> ， <code>strtold</code> ， <code>strtof<var>N</var></code>和<code>strtof<var>N</var>x</code>函数，但它们处理宽字符串。
</p>
<p>的<code>wcstod</code> ISO C90 <!-- /@w -->修订1 <!-- /@w -->中引入了该函数。的<code>wcstof</code>和<code>wcstold</code> ISO C99 <!-- /@w -->中引入了功能。
</p>
<p>的<code>wcstof<var>N</var></code>和<code>wcstof<var>N</var>x</code>函数没有任何标准，但是已添加这些函数以提供完整的，不建议使用的宽字符串到浮点转换函数的接口。它们仅在支持相关类型的机器上可用。见<a href="Mathematics.html#Mathematics">数学</a> 。
</p></dd></dl>

<dl>
<dt id="index-atof">函数： <em>double</em> <strong>atof</strong> <em>（const char * <var>string</var> ）</em></dt>
<dd>
<p>初步： MT安全区域| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能类似于<code>strtod</code>功能，除了它不需要检测上溢和下溢错误。的<code>atof</code>提供功能主要是为了与现有代码兼容；使用<code>strtod</code>更强大。
</p></dd></dl>

<p>GNU C库还提供了“ <samp>_l</samp>这些功能的版本，需要额外的参数，即转换中使用的语言环境。
</p>
<p>另请参见<a href="Parsing-of-Integers.html#Parsing-of-Integers">解析整数</a> 。
</p>
<hr>
<div class="header">
<p>上一页： <a href="Parsing-of-Integers.html#Parsing-of-Integers" rel="prev" accesskey="p">整数解析</a> ，向上： <a href="Parsing-of-Numbers.html#Parsing-of-Numbers" rel="up" accesskey="u">数字解析</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>