<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SVID随机（GNU C库）</title>

<meta name="description" content="SVID Random (The GNU C Library)">
<meta name="keywords" content="SVID Random (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Pseudo_002dRandom-Numbers.html#Pseudo_002dRandom-Numbers" rel="up" title="Pseudo-Random Numbers">
<link href="FP-Function-Optimizations.html#FP-Function-Optimizations" rel="next" title="FP Function Optimizations">
<link href="BSD-Random.html#BSD-Random" rel="prev" title="BSD Random">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="SVID-Random"></span><div class="header">
<p>上一页： <a href="BSD-Random.html#BSD-Random" rel="prev" accesskey="p">BSD随机</a> ，向上： <a href="Pseudo_002dRandom-Numbers.html#Pseudo_002dRandom-Numbers" rel="up" accesskey="u">伪随机数</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="SVID-Random-Number-Function"></span><h4 class="subsection">19.8.3 SVID随机数功能</h4>

<p>SVID系统上的C库包含另一种随机数生成器函数。他们使用48位数据的状态。用户可以在函数集合中进行选择，这些函数以不同的形式返回随机位。
</p>
<p>通常有两种功能。第一种使用随机数生成器的状态，该状态在多个函数之间以及进程的所有线程之间共享。第二个要求用户处理状态。
</p>
<p>所有函数的共同点是它们使用具有相同常量的相同同余公式。公式是</p>
<div class="example">
<pre class="example">Y = (a * X + c) mod m
</pre></div>

<p>哪里<var>X</var>是开始时生成器的状态， <var>Y</var>最后的状态。 <code>a</code>和<code>c</code>是确定生成器工作方式的常量。默认情况下，它们是</p>
<div class="example">
<pre class="example">a = 0x5DEECE66D = 25214903917
c = 0xb = 11
</pre></div>

<p>但是用户也可以更改它们。 <code>m</code>当然是2 ^ 48，因为状态由48位数组组成。
</p>
<p>这些功能的原型位于<samp>stdlib.h</samp> 。
<span id="index-stdlib_002eh-14"></span>
</p>

<dl>
<dt id="index-drand48">功能： <em>双</em> <strong>drand48</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数返回一个<code>double</code>值在<code>0.0</code>至<code>1.0</code> （独家）。随机位由C库中随机数生成器的全局状态确定。
</p>
<p>自从<code>double</code>根据IEEE 754 <!-- /@w -->类型，尾数为52位，这意味着随机数生成器未初始化4位。（当然）选择这些为最低有效位，并将它们初始化为<code>0</code> 。
</p></dd></dl>

<dl>
<dt id="index-erand48">函数： <em>double</em> <strong>erand48</strong> <em>（无符号short int <var>xsubi</var> [3]）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数返回一个<code>double</code>值在<code>0.0</code>至<code>1.0</code> （独家），类似于<code>drand48</code> 。参数是一个描述随机数生成器状态的数组。
</p>
<p>此函数可以随后调用，因为它会更新数组以保证随机数。数组在使用前应已初始化以获得可重现的结果。
</p></dd></dl>

<dl>
<dt id="index-lrand48">函数： <em>long int</em> <strong>lrand48</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>lrand48</code>函数返回范围为<code>0</code>至<code>2^31</code> （独家）。即使大小<code>long int</code> type可以使用超过32位，不返回任何更高的数字。随机位由C库中随机数生成器的全局状态确定。
</p></dd></dl>

<dl>
<dt id="index-nrand48">函数： <em>long int</em> <strong>nrand48</strong> <em>（无符号short int <var>xsubi</var> [3]）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能类似于<code>lrand48</code>函数的作用是返回范围为<code>0</code>至<code>2^31</code> （不包括），但用于产生随机位的随机数生成器的状态由作为函数参数提供的数组确定。
</p>
<p>数组中的数字随后进行更新，以便对该函数的后续调用产生不同的结果（如随机数生成器所期望的）。数组应该在第一次调用之前已初始化以获得可重现的结果。
</p></dd></dl>

<dl>
<dt id="index-mrand48">函数： <em>long int</em> <strong>mrand48</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>mrand48</code>功能类似于<code>lrand48</code> 。唯一的区别是返回的数字在范围内<code>-2^31</code>至<code>2^31</code> （独家）。
</p></dd></dl>

<dl>
<dt id="index-jrand48">函数： <em>long int</em> <strong>jrand48</strong> <em>（无符号short int <var>xsubi</var> [3]）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>jrand48</code>功能类似于<code>nrand48</code> 。唯一的区别是返回的数字在范围内<code>-2^31</code>至<code>2^31</code> （独家）。为了<code>xsubi</code>参数有相同的要求是必要的。
</p></dd></dl>

<p>随机数生成器的内部状态可以通过几种方式初始化。这些方法在提供的信息的完整性方面有所不同。
</p>
<dl>
<dt id="index-srand48">函数： <em>void</em> <strong>srand48</strong> <em>（长整数） <var>seedval</var> ）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>srand48</code>函数将随机数发生器的内部状态的最高有效32位设置为<var>seedval</var>参数。低16位被初始化为值<code>0x330E</code> 。即使<code>long int</code>类型包含多于32位，仅使用低32位。
</p>
<p>由于该限制，该功能状态的初始化不是很有用。但这使得使用像<code>srand48 (time (0))</code> 。
</p>
<p>此功能的副作用是值<code>a</code>和<code>c</code>同余公式中使用的内部状态的“初始值”被重置为上面给出的默认值。一旦用户致电了<code>lcong48</code>功能（见下文）。
</p></dd></dl>

<dl>
<dt id="index-seed48">函数： <em>unsigned short int *</em> <strong>seed48</strong> <em>（unsigned short int <var>seed16v</var> [3]）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>seed48</code>函数根据参数的内容初始化内部随机数发生器的状态的所有48位<var>seed16v</var> 。这里的第一个元素的低16位<var>seed16v</var>初始化内部状态的最低有效16位，将内部状态的低16位<code><var>seed16v</var>[1]</code>初始化状态的中阶16位和的16个低位<code><var>seed16v</var>[2]</code>初始化状态的最高16位。
</p>
<p>不像<code>srand48</code>该功能使用户可以初始化状态的所有48位。
</p>
<p>传回的值<code>seed48</code>是指向包含更改前内部状态值的数组的指针。这对于在特定状态下重新启动随机数生成器可能很有用。否则，可以简单地忽略该值。
</p>
<p>至于<code>srand48</code> ， 价值<code>a</code>和<code>c</code>从同余公式中重置为默认值。
</p></dd></dl>

<p>还有一个初始化随机数生成器的功能，它使您可以通过更改同余公式中的参数来指定更多信息。
</p>
<dl>
<dt id="index-lcong48">函数： <em>void</em> <strong>lcong48</strong> <em>（无符号short int <var>param</var> [7]）</em></dt>
<dd>
<p>初步： MT-不安全种族：drand48 | AS不安全| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>lcong48</code>功能允许用户更改随机数发生器的完整状态。不像<code>srand48</code>和<code>seed48</code> ，此函数还会更改同余公式中的常数。
</p>
<p>从数组中的七个元素<var>param</var>条目的最低有效16位<code><var>param</var>[0]</code>至<code><var>param</var>[2]</code>确定初始状态，最低有效的16位<code><var>param</var>[3]</code>至<code><var>param</var>[5]</code>确定48位常数<code>a</code>和<code><var>param</var>[6]</code>确定16位值<code>c</code> 。
</p></dd></dl>

<p>以上所有功能的共同点是它们对全等公式使用全局参数。在多线程程序中，有时在不同的线程中使用不同的参数可能会很有用。因此，以上所有功能都有一个对应项，可用于描述用户提供的缓冲区中的随机数生成器，而不是全局状态。
</p>
<p>请注意，如果所有线程都使用带有指向包含该状态的数组的指针的函数的多个线程使用全局状态，那没有问题。随机数是在同一循环之后计算的，但是如果数组中的状态不同，则所有线程将获得一个单独的随机数生成器。
</p>
<p>用户提供的缓冲区必须是类型<code>struct drand48_data</code> 。此类型应视为不透明，不能直接操作。
</p>
<dl>
<dt id="index-drand48_005fr">函数： <em>int</em> <strong>drand48_r</strong> <em>（struct drand48_data * <var>buffer</var> ，双* <var>result</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能等效于<code>drand48</code>函数的区别在于它不修改全局随机数生成器参数，而是通过指针提供的缓冲区中的参数<var>buffer</var> 。随机数在由指向的变量中返回<var>result</var> 。
</p>
<p>该函数的返回值指示调用是否成功。如果值小于<code>0</code>发生错误， <code>errno</code>设置为指示问题。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-erand48_005fr">函数： <em>int</em> <strong>erand48_r</strong> <em>（unsigned short int <var>xsubi</var> [3]，结构drand48_data * <var>buffer</var> ，双* <var>result</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>erand48_r</code>功能像<code>erand48</code> ，但除此之外还需要一个参数<var>buffer</var>描述了随机数生成器。随机数发生器的状态取自<code>xsubi</code>数组，来自全局随机数生成器数据的同余公式的参数。随机数在由指向的变量中返回<var>result</var> 。
</p>
<p>如果调用成功，则返回值为非负数。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-lrand48_005fr">函数： <em>int</em> <strong>lrand48_r</strong> <em>（struct drand48_data * <var>buffer</var> ，长整数* <var>result</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该功能类似于<code>lrand48</code> ，但除此之外，它需要一个指向描述随机数生成器状态的缓冲区的指针，就像<code>drand48</code> 。
</p>
<p>如果函数的返回值是非负值，则指向的变量<var>result</var>包含结果。否则发生错误。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-nrand48_005fr">函数： <em>int</em> <strong>nrand48_r</strong> <em>（无符号short int <var>xsubi</var> [3]，结构drand48_data * <var>buffer</var> ，长整数* <var>result</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>nrand48_r</code>功能像<code>nrand48</code>因为它会产生一个范围内的随机数<code>0</code>至<code>2^31</code> 。但是，与其使用全局参数作为同余公式，不如使用缓冲区所指向的信息<var>buffer</var> 。状态由中的值描述<var>xsubi</var> 。
</p>
<p>如果返回值是非负数，则指向的变量<var>result</var>包含结果。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-mrand48_005fr">函数： <em>int</em> <strong>mrand48_r</strong> <em>（struct drand48_data * <var>buffer</var> ，长整数* <var>result</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该功能类似于<code>mrand48</code>但与其他可重入函数一样，它使用由指向的缓冲区中的值描述的随机数生成器<var>buffer</var> 。
</p>
<p>如果返回值是非负数，则指向的变量<var>result</var>包含结果。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-jrand48_005fr">函数： <em>int</em> <strong>jrand48_r</strong> <em>（无符号short int <var>xsubi</var> [3]，结构drand48_data * <var>buffer</var> ，长整数* <var>result</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>jrand48_r</code>功能类似于<code>jrand48</code> 。像该函数族的其他可重入函数一样，它使用由指向的缓冲区中的同余公式参数<var>buffer</var> 。
</p>
<p>如果返回值是非负数，则指向的变量<var>result</var>包含结果。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<p>在使用上述任何功能之前，类型为的缓冲区<code>struct drand48_data</code>应该初始化。最简单的方法是用空字节填充整个缓冲区，例如通过</p>
<div class="example">
<pre class="example">memset (buffer, '\0', sizeof (struct drand48_data));
</pre></div>

<p>现在，使用该系列的任何可重入函数，将自动将随机数生成器初始化为同余公式的状态和参数的默认值。
</p>
<p>另一种可能性是使用任何显式初始化缓冲区的函数。尽管很明显如何通过查看函数的参数来初始化缓冲区，但强烈建议使用这些函数，因为结果可能并不总是您所期望的。
</p>
<dl>
<dt id="index-srand48_005fr">函数： <em>int</em> <strong>srand48_r</strong> <em>（long int <var>seedval</var> ，struct drand48_data * <var>buffer</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>中的信息表示的随机数生成器的说明<var>buffer</var>初始化类似于什么功能<code>srand48</code>做。状态从参数初始化<var>seedval</var>并将同余公式的参数初始化为其默认值。
</p>
<p>如果返回值为非负数，则函数调用成功。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-seed48_005fr">函数： <em>int</em> <strong>seed48_r</strong> <em>（unsigned short int <var>seed16v</var> [3]，结构drand48_data * <var>buffer</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该功能类似于<code>srand48_r</code>但是喜欢<code>seed48</code>它从参数初始化状态的所有48位<var>seed16v</var> 。
</p>
<p>如果返回值为非负数，则函数调用成功。它不会返回指向随机数生成器之前状态的指针<code>seed48</code>功能呢。如果用户希望保留状态以供以后重新运行，则他/她可以复制指向的整个缓冲区<var>buffer</var> 。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<dl>
<dt id="index-lcong48_005fr">函数： <em>int</em> <strong>lcong48_r</strong> <em>（unsigned short int <var>param</var> [7]，结构drand48_data * <var>buffer</var> ）</em></dt>
<dd>
<p>初步： MT安全竞赛：缓冲| AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数初始化随机数发生器的所有方面，如<var>buffer</var>与数据<var>param</var> 。在这里，确实要特别注意的是，该功能不仅可以复制以下内容： <var>param</var>和<var>buffer</var> 。需要做更多的工作，因此使用此功能而不是直接初始化随机数生成器很重要。
</p>
<p>如果返回值为非负数，则函数调用成功。
</p>
<p>此函数是GNU扩展，不应在可移植程序中使用。
</p></dd></dl>

<hr>
<div class="header">
<p>上一页： <a href="BSD-Random.html#BSD-Random" rel="prev" accesskey="p">BSD随机</a> ，向上： <a href="Pseudo_002dRandom-Numbers.html#Pseudo_002dRandom-Numbers" rel="up" accesskey="u">伪随机数</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>