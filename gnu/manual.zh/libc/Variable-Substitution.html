<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>变量替换（GNU C库）</title>

<meta name="description" content="Variable Substitution (The GNU C Library)">
<meta name="keywords" content="Variable Substitution (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Word-Expansion.html#Word-Expansion" rel="up" title="Word Expansion">
<link href="I_002fO-Overview.html#I_002fO-Overview" rel="next" title="I/O Overview">
<link href="Tilde-Expansion.html#Tilde-Expansion" rel="prev" title="Tilde Expansion">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Variable-Substitution"></span><div class="header">
<p>上<a href="Tilde-Expansion.html#Tilde-Expansion" rel="prev" accesskey="p">一篇</a> ： <a href="Tilde-Expansion.html#Tilde-Expansion" rel="prev" accesskey="p">Tilde扩展</a> ，上： <a href="Word-Expansion.html#Word-Expansion" rel="up" accesskey="u">Word扩展</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Details-of-Variable-Substitution"></span><h4 class="subsection">10.4.6变量替换的详细信息</h4>

<p>普通shell语法的一部分是使用' <samp>$<var>variable</var></samp> '将shell变量的值替换为命令。这称为<em>变量替换</em> ，它是进行单词扩展的一部分。
</p>
<p>您可以通过两种基本方法编写变量引用进行替换：</p>
<dl compact>
<dt><code>${<var>variable</var>}</code></dt>
<dd><p>如果在变量名的周围写了括号，那么变量名的结尾是完全清楚的。您可以将其他字母连接到变量值的末尾，方法是在右花括号后立即将它们写入。例如， ' <samp>${foo}s</samp> '扩展为' <samp>tractors</samp> '。
</p>
</dd>
<dt><code>$<var>variable</var></code></dt>
<dd><p>如果您未在变量名称前加上花括号，则变量名称将由所有字母数字字符和下划线后面的下划线组成<samp>$</samp> '。下一个标点符号以变量名结尾。因此， <samp>$foo-bar</samp> '指变量<code>foo</code>并扩展为“ <samp>tractor-bar</samp> '。
</p></dd>
</dl>

<p>当使用大括号时，还可以使用各种构造来修改替换的值，或以各种方式对其进行测试。
</p>
<dl compact>
<dt><code>${<var>variable</var>:-<var>default</var>}</code></dt>
<dd><p>代入价值<var>variable</var> ，但如果为空或未定义，请使用<var>default</var>代替。
</p>
</dd>
<dt><code>${<var>variable</var>:=<var>default</var>}</code></dt>
<dd><p>代入价值<var>variable</var> ，但如果为空或未定义，请使用<var>default</var>而是将变量设置为<var>default</var> 。
</p>
</dd>
<dt><code>${<var>variable</var>:?<var>message</var>}</code></dt>
<dd><p>如果<var>variable</var>被定义并且不为空，替换其值。
</p>
<p>否则，打印<var>message</var>作为标准错误流上的错误消息，并考虑将单词扩展视为失败。
</p>

</dd>
<dt><code>${<var>variable</var>:+<var>replacement</var>}</code></dt>
<dd><p>替代<var>replacement</var> ，但前提是<var>variable</var>是定义的并且是非空的。否则，什么都不能替代此构造。
</p></dd>
</dl>

<dl compact>
<dt><code>${#<var>variable</var>}</code></dt>
<dd><p>替换一个数字，该数字以10为底的数字表示字符数<var>variable</var> 。 ' <samp>${#foo}</samp> ' 代表 ' <samp>7</samp> '，因为' <samp>tractor</samp> '是七个字符。
</p></dd>
</dl>

<p>这些变量替换的变体使您可以在替换变量之前删除部分变量的值。的<var>prefix</var>和<var>suffix</var>不只是字符串；它们是通配符模式，就像您用来匹配多个文件名的模式一样。但是在这种情况下，它们匹配变量值的一部分，而不是文件名。
</p>
<dl compact>
<dt><code>${<var>variable</var>%%<var>suffix</var>}</code></dt>
<dd><p>代入价值<var>variable</var> ，但首先要从该变量中丢弃与模式匹配的结尾部分<var>suffix</var> 。
</p>
<p>如果存在多种匹配方式<var>suffix</var> ，此构造使用最长的匹配项。
</p>
<p>因此， <samp>${foo%%r*}</samp> '替代品' <samp>t</samp> '，因为最大匹配项为' <samp>r*</samp> ' 在......的最后 ' <samp>tractor</samp> '是' <samp>ractor</samp> '。
</p>
</dd>
<dt><code>${<var>variable</var>%<var>suffix</var>}</code></dt>
<dd><p>代入价值<var>variable</var> ，但首先要从该变量中丢弃与模式匹配的结尾部分<var>suffix</var> 。
</p>
<p>如果存在多种匹配方式<var>suffix</var> ，此构造使用最短的替代方法。
</p>
<p>因此， <samp>${foo%r*}</samp> '替代品' <samp>tracto</samp> '，因为最短的匹配为' <samp>r*</samp> ' 在......的最后 ' <samp>tractor</samp> ' 只是 ' <samp>r</samp> '。
</p>
</dd>
<dt><code>${<var>variable</var>##<var>prefix</var>}</code></dt>
<dd><p>代入价值<var>variable</var> ，但首先从该变量中删除开头与模式匹配的任何部分<var>prefix</var> 。
</p>
<p>如果存在多种匹配方式<var>prefix</var> ，此构造使用最长的匹配项。
</p>
<p>因此， <samp>${foo##*t}</samp> '替代品' <samp>or</samp> '，因为最大匹配项为' <samp>*t</samp> ' 在。。。之初 ' <samp>tractor</samp> '是' <samp>tract</samp> '。
</p>
</dd>
<dt><code>${<var>variable</var>#<var>prefix</var>}</code></dt>
<dd><p>代入价值<var>variable</var> ，但首先从该变量中删除开头与模式匹配的任何部分<var>prefix</var> 。
</p>
<p>如果存在多种匹配方式<var>prefix</var> ，此构造使用最短的替代方法。
</p>
<p>因此， <samp>${foo#*t}</samp> '替代品' <samp>ractor</samp> '，因为最短的匹配为' <samp>*t</samp> ' 在。。。之初 ' <samp>tractor</samp> ' 只是 ' <samp>t</samp> '。
</p>
</dd>
</dl>
<hr>
<div class="header">
<p>上<a href="Tilde-Expansion.html#Tilde-Expansion" rel="prev" accesskey="p">一篇</a> ： <a href="Tilde-Expansion.html#Tilde-Expansion" rel="prev" accesskey="p">Tilde扩展</a> ，上： <a href="Word-Expansion.html#Word-Expansion" rel="up" accesskey="u">Word扩展</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>