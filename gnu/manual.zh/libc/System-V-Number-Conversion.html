<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>系统V号码转换（GNU C库）</title>

<meta name="description" content="System V Number Conversion (The GNU C Library)">
<meta name="keywords" content="System V Number Conversion (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Arithmetic.html#Arithmetic" rel="up" title="Arithmetic">
<link href="Date-and-Time.html#Date-and-Time" rel="next" title="Date and Time">
<link href="Printing-of-Floats.html#Printing-of-Floats" rel="prev" title="Printing of Floats">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="System-V-Number-Conversion"></span><div class="header">
<p>上一页： <a href="Printing-of-Floats.html#Printing-of-Floats" rel="prev" accesskey="p">浮点打印</a> ，上： <a href="Arithmetic.html#Arithmetic" rel="up" accesskey="u">算术</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Old_002dfashioned-System-V-number_002dto_002dstring-functions"></span><h3 class="section">20.13老式的System V数字转字符串功能</h3>

<p>旧的System V <!-- /@w --> C库提供了三个函数，它们具有不寻常且难以使用的语义，将数字转换为字符串。GNU C库还提供了这些功能和一些自然的扩展。
</p>
<p>这些功能仅在GNU C库和AT＆T Unix衍生的系统中可用。因此，除非这些功能完全满足您的需求，否则最好使用<code>sprintf</code> ，这是标准的。
</p>
<p>所有这些功能都在<samp>stdlib.h</samp> 。
</p>
<dl>
<dt id="index-ecvt">功能： <em>char *</em> <strong>ecvt</strong> <em>（双</em> <strong>精度</strong> <em><var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ）</em></dt>
<dd>

<p>初步： MT-不安全种族：ecvt | AS不安全|交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>功能<code>ecvt</code>转换浮点数<var>value</var>最多为一个字符串<var>ndigit</var>十进制数字。返回的字符串不包含小数点或符号。字符串的第一位非零（除非<var>value</var>实际上为零），最后一位四舍五入到最接近的数字。 <code>*<var>decpt</var></code>设置为小数点后第一位数字的字符串中的索引。
<code>*<var>neg</var></code>如果设置为非零值<var>value</var>为负，否则为零。
</p>
<p>如果<var>ndigit</var>十进制数字将超过a的精度<code>double</code>它减少到系统特定的值。
</p>
<p>返回的字符串是静态分配的，并且每次调用都会覆盖<code>ecvt</code> 。
</p>
<p>如果<var>value</var>为零，是否定义实现<code>*<var>decpt</var></code>是<code>0</code>要么<code>1</code> 。
</p>
<p>例如： <code>ecvt (12.3, 5, &d, &n)</code>退货<code>"12300"</code>和集<var>d</var>至<code>2</code>和<var>n</var>至<code>0</code> 。
</p></dd></dl>

<dl>
<dt id="index-fcvt">函数： <em>char *</em> <strong>fcvt</strong> <em>（双</em> <strong>精度</strong> <em><var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ）</em></dt>
<dd>

<p>初步： MT不安全种族：fcvt | AS不安全堆| AC不安全的内存|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>功能<code>fcvt</code>就好像<code>ecvt</code> ，但是<var>ndigit</var>指定小数点后的位数。如果<var>ndigit</var>小于零， <var>value</var>舍入到<em><var>ndigit</var></em>小数点左边第<em>+1</em>位。例如，如果<var>ndigit</var>是<code>-1</code> ， <var>value</var>将四舍五入到最接近的10。如果<var>ndigit</var>为负数，并且大于的小数点左侧的位数<var>value</var> ， <var>value</var>将四舍五入到一位有效数字。
</p>
<p>如果<var>ndigit</var>十进制数字将超过a的精度<code>double</code>它减少到系统特定的值。
</p>
<p>返回的字符串是静态分配的，并且每次调用都会覆盖<code>fcvt</code> 。
</p></dd></dl>

<dl>
<dt id="index-gcvt">功能： <em>char *</em> <strong>gcvt</strong> <em>（双</em> <strong>精度</strong> <em><var>value</var> ，int <var>ndigit</var> ，字符* <var>buf</var> ）</em></dt>
<dd>

<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>gcvt</code>在功能上等同于' <samp>sprintf(buf, "%*g", ndigit, value)</samp> '。仅出于兼容性考虑而提供。它返回<var>buf</var> 。
</p>
<p>如果<var>ndigit</var>十进制数字将超过a的精度<code>double</code>它减少到系统特定的值。
</p></dd></dl>

<p>作为扩展，GNU C库提供了这三个函数的版本， <code>long double</code>论点。
</p>
<dl>
<dt id="index-qecvt">功能： <em>char *</em> <strong>qecvt</strong> <em>（长双<var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ）</em></dt>
<dd>
<p>初步： MT不安全种族：qecvt | AS不安全|交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能等效于<code>ecvt</code>除了需要一个<code>long double</code>对于第一个参数， <var>ndigit</var>受到精度的限制<code>long double</code> 。
</p></dd></dl>

<dl>
<dt id="index-qfcvt">函数： <em>char *</em> <strong>qfcvt</strong> <em>（长双<var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ）</em></dt>
<dd>
<p>初步： MT不安全种族：qfcvt | AS不安全堆| AC不安全的内存|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能等效于<code>fcvt</code>除了需要一个<code>long double</code>对于第一个参数， <var>ndigit</var>受到精度的限制<code>long double</code> 。
</p></dd></dl>

<dl>
<dt id="index-qgcvt">功能： <em>char *</em> <strong>qgcvt</strong> <em>（长双<var>value</var> ，int <var>ndigit</var> ，字符* <var>buf</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能等效于<code>gcvt</code>除了需要一个<code>long double</code>对于第一个参数， <var>ndigit</var>受到精度的限制<code>long double</code> 。
</p></dd></dl>


<span id="index-gcvt_005fr"></span>
<p>的<code>ecvt</code>和<code>fcvt</code>功能及其<code>long double</code>等效项都返回位于静态缓冲区中的字符串，该字符串将在下一次调用该函数时被覆盖。GNU C库提供了另一组扩展函数，这些函数将转换后的字符串写入用户提供的缓冲区中。这些有常规<code>_r</code>后缀。
</p>
<p><code>gcvt_r</code>不必要，因为<code>gcvt</code>已经使用了用户提供的缓冲区。
</p>
<dl>
<dt id="index-ecvt_005fr">函数： <em>int</em> <strong>ecvt_r</strong> <em>（double <var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ，字符* <var>buf</var> ，size_t <var>len</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>ecvt_r</code>功能与<code>ecvt</code> ，除了将其结果放入由指向的用户指定的缓冲区中<var>buf</var> ，长度<var>len</var> 。返回值为<code>-1</code>如果有错误，则为零。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>

<dl>
<dt id="index-fcvt_005fr">函数： <em>int</em> <strong>fcvt_r</strong> <em>（double <var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ，字符* <var>buf</var> ，size_t <var>len</var> ）</em></dt>
<dd>

<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>fcvt_r</code>功能与<code>fcvt</code> ，除了将其结果放入由指向的用户指定的缓冲区中<var>buf</var> ，长度<var>len</var> 。返回值为<code>-1</code>如果有错误，则为零。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>

<dl>
<dt id="index-qecvt_005fr">函数： <em>int</em> <strong>qecvt_r</strong> <em>（long double <var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ，字符* <var>buf</var> ，size_t <var>len</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>qecvt_r</code>功能与<code>qecvt</code> ，除了将其结果放入由指向的用户指定的缓冲区中<var>buf</var> ，长度<var>len</var> 。返回值为<code>-1</code>如果有错误，则为零。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>

<dl>
<dt id="index-qfcvt_005fr">函数： <em>int</em> <strong>qfcvt_r</strong> <em>（long double <var>value</var> ，int <var>ndigit</var> ，int * <var>decpt</var> ，int * <var>neg</var> ，字符* <var>buf</var> ，size_t <var>len</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>qfcvt_r</code>功能与<code>qfcvt</code> ，除了将其结果放入由指向的用户指定的缓冲区中<var>buf</var> ，长度<var>len</var> 。返回值为<code>-1</code>如果有错误，则为零。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>
<hr>
<div class="header">
<p>上一页： <a href="Printing-of-Floats.html#Printing-of-Floats" rel="prev" accesskey="p">浮点打印</a> ，上： <a href="Arithmetic.html#Arithmetic" rel="up" accesskey="u">算术</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>