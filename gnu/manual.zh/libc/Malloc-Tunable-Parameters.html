<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Malloc可调参数（GNU C库）</title>

<meta name="description" content="Malloc Tunable Parameters (The GNU C Library)">
<meta name="keywords" content="Malloc Tunable Parameters (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Unconstrained-Allocation.html#Unconstrained-Allocation" rel="up" title="Unconstrained Allocation">
<link href="Heap-Consistency-Checking.html#Heap-Consistency-Checking" rel="next" title="Heap Consistency Checking">
<link href="Aligned-Memory-Blocks.html#Aligned-Memory-Blocks" rel="prev" title="Aligned Memory Blocks">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Malloc-Tunable-Parameters"></span><div class="header">
<p>下一篇： <a href="Heap-Consistency-Checking.html#Heap-Consistency-Checking" rel="next" accesskey="n">堆一致性检查</a> ，上一篇： <a href="Aligned-Memory-Blocks.html#Aligned-Memory-Blocks" rel="prev" accesskey="p">对齐的内存块</a> ，上一篇： <a href="Unconstrained-Allocation.html#Unconstrained-Allocation" rel="up" accesskey="u">不受约束的分配</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Malloc-Tunable-Parameters-1"></span><h4 class="subsubsection">3.2.3.7 Malloc可调参数</h4>

<p>您可以使用<code>mallopt</code>功能。此功能是通用的SVID / XPG接口，在<samp>malloc.h</samp> 。
<span id="index-malloc_002eh"></span>
</p>
<dl>
<dt id="index-mallopt">函数： <em>int</em> <strong>mallopt</strong> <em>（int <var>param</var> ，int <var>value</var> ）</em></dt>
<dd><p>初步： MT-Unsafe初始化const：mallopt | AS不安全初始化锁| AC不安全初始化锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p>打电话时<code>mallopt</code> ， <var>param</var>参数指定要设置的参数，并且<var>value</var>要设置的新值。可能的选择<var>param</var> ，定义如下<samp>malloc.h</samp> ， 是：</p>
<dl compact>
<dt><code>M_MMAP_MAX</code>
<span id="index-M_005fMMAP_005fMAX"></span>
</dt>
<dd><p>要分配的最大块数<code>mmap</code> 。将此设置为零将禁用所有<code>mmap</code> 。
</p>
<p>此参数的默认值为<code>65536</code> 。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_MMAP_MAX_</code>达到所需值。
</p>
</dd>
<dt><code>M_MMAP_THRESHOLD</code>
<span id="index-M_005fMMAP_005fTHRESHOLD"></span>
</dt>
<dd><p>所有大于此值的块都使用<code>mmap</code>系统调用。这样可以确保这些块的内存可以在<code>free</code> 。请注意，小于此阈值的请求仍可以通过<code>mmap</code> 。
</p>
<p>如果未设置此参数，则默认值设置为128 KiB，并且动态调整阈值以适合程序的分配模式。如果设置了该参数，则禁用动态调整，并且该值静态设置为输入值。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_MMAP_THRESHOLD_</code>达到所需值。
</p>
</dd>
<dt><code>M_PERTURB</code>
<span id="index-M_005fPERTURB"></span>
</dt>
<dd><p>如果非零，则在分配内存块时，将根据该参数的某些低阶位填充值（除非由<code>calloc</code> ）并释放。这可以用来调试未初始化或释放的堆内存的使用。请注意，此选项不能保证释放的块将具有任何特定值。它仅保证释放块之前所拥有的内容将被覆盖。
</p>
<p>此参数的默认值为<code>0</code> 。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_MMAP_PERTURB_</code>达到所需值。
</p>
</dd>
<dt><code>M_TOP_PAD</code>
<span id="index-M_005fTOP_005fPAD"></span>
</dt>
<dd><p>此参数确定需要扩展竞技场时从系统获得的额外内存量。它还指定缩小竞技场时要保留的字节数。这在堆大小中提供了必要的滞后，从而可以避免过多的系统调用。
</p>
<p>此参数的默认值为<code>0</code> 。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_TOP_PAD_</code>达到所需值。
</p>
</dd>
<dt><code>M_TRIM_THRESHOLD</code>
<span id="index-M_005fTRIM_005fTHRESHOLD"></span>
</dt>
<dd><p>这是将触发系统调用以便将内存返回给系统的最顶部可释放块的最小大小（以字节为单位）。
</p>
<p>如果未设置此参数，则默认值设置为128 KiB，并且动态调整阈值以适合程序的分配模式。如果设置了参数，则将禁用动态调整，并且将值静态设置为所提供的输入。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_TRIM_THRESHOLD_</code>达到所需值。
</p>
</dd>
<dt><code>M_ARENA_TEST</code>
<span id="index-M_005fARENA_005fTEST"></span>
</dt>
<dd><p>此参数指定在进行对竞技场数量的限制的测试之前可以创建的竞技场数量。如果该值被忽略<code>M_ARENA_MAX</code>被设置。
</p>
<p>此参数的默认值在32位系统上为2，在64位系统上为8。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_ARENA_TEST</code>达到所需值。
</p>
</dd>
<dt><code>M_ARENA_MAX</code>
<span id="index-M_005fARENA_005fMAX"></span>
</dt>
<dd><p>此参数设置要使用的竞技场数量，而与系统中的内核数量无关。
</p>
<p>此可调参数的默认值为<code>0</code> ，这意味着对竞技场数量的限制取决于在线CPU内核的数量。对于32位系统，此限制是联机内核数的两倍，而在64位系统上，此限制是联机内核数的八倍。请注意，默认值不是从M_ARENA_TEST的默认值得出的，而是独立计算的。
</p>
<p>也可以通过设置环境变量为启动时的进程设置此参数<code>MALLOC_ARENA_MAX</code>达到所需值。
</p></dd>
</dl>

</dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="Heap-Consistency-Checking.html#Heap-Consistency-Checking" rel="next" accesskey="n">堆一致性检查</a> ，上一篇： <a href="Aligned-Memory-Blocks.html#Aligned-Memory-Blocks" rel="prev" accesskey="p">对齐的内存块</a> ，上一篇： <a href="Unconstrained-Allocation.html#Unconstrained-Allocation" rel="up" accesskey="u">不受约束的分配</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>