<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>输出转换语法（GNU C库）</title>

<meta name="description" content="Output Conversion Syntax (The GNU C Library)">
<meta name="keywords" content="Output Conversion Syntax (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Formatted-Output.html#Formatted-Output" rel="up" title="Formatted Output">
<link href="Table-of-Output-Conversions.html#Table-of-Output-Conversions" rel="next" title="Table of Output Conversions">
<link href="Formatted-Output-Basics.html#Formatted-Output-Basics" rel="prev" title="Formatted Output Basics">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Output-Conversion-Syntax"></span><div class="header">
<p>下一篇： <a href="Table-of-Output-Conversions.html#Table-of-Output-Conversions" rel="next" accesskey="n">输出转换表</a> ，上一篇： <a href="Formatted-Output-Basics.html#Formatted-Output-Basics" rel="prev" accesskey="p">格式化输出基础</a> ，上一篇： <a href="Formatted-Output.html#Formatted-Output" rel="up" accesskey="u">格式化输出</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Output-Conversion-Syntax-1"></span><h4 class="subsection">12.12.2输出转换语法</h4>

<p>本节详细介绍了可能会出现在<code>printf</code>模板字符串。
</p>
<p>模板字符串中不属于转换规范的字符按原样打印到输出流。模板字符串中允许使用多字节字符序列（请参阅“ <a href="Character-Set-Handling.html#Character-Set-Handling">字符集处理”</a> ）。
</p>
<p>转换规范<code>printf</code>模板字符串的一般形式为：</p>
<div class="example">
<pre class="example">% <span class="roman">[</span> <var>param-no</var> <span class="roman">$]</span> <var>flags</var> <var>width</var> <span class="roman">[</span> . <var>precision</var> <span class="roman">]</span> <var>type</var> <var>conversion</var>
</pre></div>

<p>要么</p>
<div class="example">
<pre class="example">% <span class="roman">[</span> <var>param-no</var> <span class="roman">$]</span> <var>flags</var> <var>width</var> . <span class="roman">*</span> <span class="roman">[</span> <var>param-no</var> <span class="roman">$]</span> <var>type</var> <var>conversion</var>
</pre></div>

<p>例如，在转化说明符“ <samp>%-10.8ld</samp> '，' <samp>-</samp> '是一个标志，' <samp>10</samp> '指定字段宽度，精度为' <samp>8</samp> '，字母' <samp>l</samp> '是类型修饰符，而' <samp>d</samp> '指定转换样式。（此特定类型说明符说要打印一个<code>long int</code>参数以十进制表示法，并且在至少10个字符宽的字段中至少左对齐8个数字。）
</p>
<p>更详细地，输出转换规范由初始的“ <samp>%</samp> '字符，其后依次为：</p>
<ul>
<li>用于此格式的参数的可选规范。通常情况下， <code>printf</code>函数按照格式字符串中出现的顺序分配给格式。但是在某些情况下（例如消息翻译），这是不希望的，并且此扩展允许指定显式参数。

<p>的<var>param-no</var>格式的某些部分必须是1到函数调用出现的最大参数数目范围内的整数。一些实现将这个数字限制为某个上限。可以通过以下常数来检索确切的限制。
</p>
<dl>
<dt id="index-NL_005fARGMAX">巨集： <strong>NL_ARGMAX</strong></dt>
<dd><p>的价值<code>NL_ARGMAX</code>是用于指定位置参数的最大值<code>printf</code>呼叫。可以通过使用检索运行时有效的实际值<code>sysconf</code>使用<code>_SC_NL_ARGMAX</code>参数请参见<a href="Sysconf-Definition.html#Sysconf-Definition">Sysconf定义</a> 。
</p>
<p>某些系统的限制很低，例如System V <!-- /@w -->系统的限制为<em>9</em> 。GNU C库没有实际限制。
</p></dd></dl>

<p>如果任何一种格式都有参数位置的规范，那么格式字符串中的所有格式都应有一个。否则，行为是不确定的。
</p>
</li><li>零个或多个<em>标志字符</em> ，可修改转换规范的正常行为。
<span id="index-flag-character-_0028printf_0029"></span>

</li><li>一个可选的十进制整数，指定<em>最小字段宽度</em> 。如果普通转换产生的字符少于此字符，则将字段填充为指定宽度的空格。这是<em>最小值</em> 。如果普通转换产生的字符超过此数目，则该字段<em>不会</em>被截断。通常，输出在该字段内是右对齐的。
<span id="index-minimum-field-width-_0028printf_0029"></span>

<p>您还可以将字段宽度指定为“ <samp>*</samp> '。这意味着参数列表中的下一个参数（在要打印的实际值之前）用作字段宽度。该值必须是<code>int</code> 。如果该值为负，则意味着将“ <samp>-</samp> '标志（请参见下文），并使用绝对值作为字段宽度。
</p>
</li><li>一种可选的<em>精度，</em>用于指定要为数字转换写入的位数。如果指定了精度，则它由一个句点（' <samp>.</samp> '），后跟一个可选的十进制整数（如果省略，则默认为零）。
<span id="index-precision-_0028printf_0029"></span>

<p>您还可以将精度指定为“ <samp>*</samp> '。这意味着参数列表中的下一个参数（在要打印的实际值之前）将用作精度。该值必须是<code>int</code> ，如果为负数则被忽略。如果您指定“ <samp>*</samp>对于字段宽度和精度，字段宽度参数在precision参数之前。其他C库版本可能无法识别此语法。
</p>
</li><li>可选的<em>类型修饰符</em> ，如果与默认类型不同，则用于指定相应参数的数据类型。（例如，整数转换假定类型为<code>int</code> ，但您可以指定' <samp>h</samp> '，' <samp>l</samp> '， 要么 ' <samp>L</samp> '用于其他整数类型。）
<span id="index-type-modifier-character-_0028printf_0029"></span>

</li><li>一个字符，指定要应用的转换。
</li></ul>

<p>不同的转换说明符之间允许的确切选项及其解释方式有所不同。有关它们使用的特定选项的信息，请参见各个转换的描述。
</p>
<p>与“ <samp>-Wformat</samp> '选项，GNU C编译器会检查对<code>printf</code>和相关功能。它检查格式字符串，并验证是否提供了正确数量和类型的参数。还有一种GNU C语法告诉编译器您编写的函数使用<code>printf</code>样式的格式字符串。有关更多信息，请参见《 <cite>使用GNU CC》中的“</cite> <a href="https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes">声明函数的属性”</a> 。
</p>
<hr>
<div class="header">
<p>下一篇： <a href="Table-of-Output-Conversions.html#Table-of-Output-Conversions" rel="next" accesskey="n">输出转换表</a> ，上一篇： <a href="Formatted-Output-Basics.html#Formatted-Output-Basics" rel="prev" accesskey="p">格式化输出基础</a> ，上一篇： <a href="Formatted-Output.html#Formatted-Output" rel="up" accesskey="u">格式化输出</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>