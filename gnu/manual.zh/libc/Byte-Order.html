<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>字节顺序（GNU C库）</title>

<meta name="description" content="Byte Order (The GNU C Library)">
<meta name="keywords" content="Byte Order (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Internet-Namespace.html#Internet-Namespace" rel="up" title="Internet Namespace">
<link href="Protocols-Database.html#Protocols-Database" rel="next" title="Protocols Database">
<link href="Services-Database.html#Services-Database" rel="prev" title="Services Database">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Byte-Order"></span><div class="header">
<p>下一个： <a href="Protocols-Database.html#Protocols-Database" rel="next" accesskey="n">协议数据库</a> ，上一个： <a href="Services-Database.html#Services-Database" rel="prev" accesskey="p">服务数据库</a> ，上： <a href="Internet-Namespace.html#Internet-Namespace" rel="up" accesskey="u">Internet命名空间</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Byte-Order-Conversion"></span><h4 class="subsection">16.6.5字节顺序转换</h4>
<span id="index-byte-order-conversion_002c-for-socket"></span>
<span id="index-converting-byte-order"></span>

<span id="index-big_002dendian"></span>
<span id="index-little_002dendian"></span>
<p>不同种类的计算机使用不同的约定来对单词中的字节进行排序。一些计算机将最高有效字节放在一个单词的开头（这称为“大尾数”顺序），而其他计算机则将其放在最后一个字（“小尾数”顺序）。
</p>
<span id="index-network-byte-order"></span>
<p>为了使具有不同字节顺序约定的机器可以通信，Internet协议为通过网络传输的数据指定了规范的字节顺序约定。这称为<em>网络字节顺序</em> 。
</p>
<p>建立Internet套接字连接时，必须确保<code>sin_port</code>和<code>sin_addr</code>的成员<code>sockaddr_in</code>结构以网络字节顺序表示。如果要在通过套接字发送的消息中编码整数数据，则也应该将其转换为网络字节顺序。如果不这样做，则在其他计算机上运行或与之通信时，程序可能会失败。
</p>
<p>如果您使用<code>getservbyname</code>和<code>gethostbyname</code>要么<code>inet_addr</code>要获取端口号和主机地址，这些值已经按照网络字节顺序排列，您可以将它们直接复制到<code>sockaddr_in</code>结构体。
</p>
<p>否则，您必须显式转换值。使用<code>htons</code>和<code>ntohs</code>转换值<code>sin_port</code>会员。使用<code>htonl</code>和<code>ntohl</code>转换IPv4地址<code>sin_addr</code>会员。（记得， <code>struct in_addr</code>相当于<code>uint32_t</code> ）这些函数在中声明<samp>netinet/in.h</samp> 。
<span id="index-netinet_002fin_002eh-3"></span>
</p>
<dl>
<dt id="index-htons">功能： <em>uint16_t</em> <strong>htons</strong> <em>（uint16_t <var>hostshort</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p>此函数转换<code>uint16_t</code>整数<var>hostshort</var>从主机字节顺序到网络字节顺序。
</p></dd></dl>

<dl>
<dt id="index-ntohs">功能： <em>uint16_t</em> <strong>ntohs</strong> <em>（uint16_t <var>netshort</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数转换<code>uint16_t</code>整数<var>netshort</var>从网络字节顺序到主机字节顺序。
</p></dd></dl>

<dl>
<dt id="index-htonl">功能： <em>uint32_t</em> <strong>htonl</strong> <em>（uint32_t <var>hostlong</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数转换<code>uint32_t</code>整数<var>hostlong</var>从主机字节顺序到网络字节顺序。
</p>
<p>这用于IPv4 Internet地址。
</p></dd></dl>

<dl>
<dt id="index-ntohl">函数： <em>uint32_t</em> <strong>ntohl</strong> <em>（uint32_t <var>netlong</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数转换<code>uint32_t</code>整数<var>netlong</var>从网络字节顺序到主机字节顺序。
</p>
<p>这用于IPv4 Internet地址。
</p></dd></dl>

<hr>
<div class="header">
<p>下一个： <a href="Protocols-Database.html#Protocols-Database" rel="next" accesskey="n">协议数据库</a> ，上一个： <a href="Services-Database.html#Services-Database" rel="prev" accesskey="p">服务数据库</a> ，上： <a href="Internet-Namespace.html#Internet-Namespace" rel="up" accesskey="u">Internet命名空间</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>