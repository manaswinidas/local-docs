<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>消息目录文件（GNU C库）</title>

<meta name="description" content="The message catalog files (The GNU C Library)">
<meta name="keywords" content="The message catalog files (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Message-catalogs-a-la-X_002fOpen.html#Message-catalogs-a-la-X_002fOpen" rel="up" title="Message catalogs a la X/Open">
<link href="The-gencat-program.html#The-gencat-program" rel="next" title="The gencat program">
<link href="The-catgets-Functions.html#The-catgets-Functions" rel="prev" title="The catgets Functions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="The-message-catalog-files"></span><div class="header">
<p>下一篇： <a href="The-gencat-program.html#The-gencat-program" rel="next" accesskey="n">gencat程序</a> ，上一篇： <a href="The-catgets-Functions.html#The-catgets-Functions" rel="prev" accesskey="p">catgets函数</a> ，上<a href="The-catgets-Functions.html#The-catgets-Functions" rel="prev" accesskey="p">一篇</a> ： <a href="Message-catalogs-a-la-X_002fOpen.html#Message-catalogs-a-la-X_002fOpen" rel="up" accesskey="u">消息分类为X / Open</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Format-of-the-message-catalog-files"></span><h4 class="subsection">8.1.2消息目录文件的格式</h4>

<p>转换函数的所有消息并将结果存储在消息目录文件中的唯一合理方法，该目录文件可以由<code>catopen</code>功能是将所有消息文本写入翻译人员，然后让他/他翻译所有消息。即，我们必须有一个文件，其中包含将集合/消息元组与特定翻译相关联的条目。X / Open标准中指定了此文件格式，如下所示：</p>
<ul>
<li>仅包含空格字符的行或空行将被忽略。

</li><li>包含第一个非空白字符的行<code>$</code>后跟空白字符的是注释，也将被忽略。

</li><li>如果一行包含第一个非空白字符，则序列<code>$set</code>后面跟一个空白字符，需要附加一个参数。该参数可以是：<ul class="no-bullet">
<li>- 一个号码。在这种情况下，此数字的值确定要添加以下消息的集合。

</li><li>-由字母数字字符和下划线字符组成的标识符。在这种情况下，设备会自动分配一个编号。该值是迄今为止出现的最大设置数的一个值。

<p>“ <a href="Common-Usage.html#Common-Usage">常用用法”</a>部分中说明了如何使用符号名称。
</p>
<p>如果符号名称多次出现，这是一个错误。以下所有消息均与此编号放在一组中。
</p></li></ul>

</li><li>如果一行包含第一个非空白字符，则序列<code>$delset</code>后面跟一个空白字符，需要附加一个参数。该参数可以是：<ul class="no-bullet">
<li>- 一个号码。在这种情况下，此数字的值确定要删除的集合。

</li><li>-由字母数字字符和下划线字符组成的标识符。该符号标识符必须与先前定义的集合的名称匹配。如果名称未知，则为错误。
</li></ul>

<p>在这两种情况下，指定集中的所有消息都将被删除。它们不会出现在输出中。但是如果以后再次使用<code>$set</code>再次添加命令消息，这些消息将出现在输出中。
</p>
</li><li>如果一行在前导空格之后包含序列<code>$quote</code> ，用于此输入文件的引号字符将更改为后面的第一个非空白字符<code>$quote</code> 。如果在行结束之前没有非空格字符，则禁用引号。

<p>默认情况下，不使用引号。在这种模式下，字符串以第一个未转义的换行符终止。如果有<code>$quote</code>序列存在的换行符不需要转义。而是使用引号字符的第一个未转义的外观来终止字符串。
</p>
<p>此功能的常见用法是将引号字符设置为<code>"</code> 。然后任何外观<code>"</code>必须使用反斜杠对字符串中的字符进行转义（即， <code>\"</code>必须写成）。
</p>
</li><li>任何其他行都必须以数字或字母数字标识符（包括下划线字符）开头。以下字符（从第一个空格字符开始）将构成字符串，该字符串与当前选择的集合和分别由数字和标识符表示的消息号相关联。

<p>如果该行的开头是数字，则消息号很明显。如果该集合已经出现了相同的消息号，那就是一个错误。
</p>
<p>如果前导令牌是标识符，则会自动分配消息编号。该值是该集合的当前最大消息数加一。如果标识符已用于此集合中的消息，则是错误的。可以在另一个线程中重用消息的标识符。下面将说明如何使用符号标识符（请参阅“ <a href="Common-Usage.html#Common-Usage">常用用法”</a> ）。标识符有一个限制：不能是<code>Set</code> 。原因将在下面说明。
</p>
<p>消息的文本可以包含转义字符。可以识别ISO C <!-- /@w -->语言中常见的一堆字符（ <code>\n</code> ， <code>\t</code> ， <code>\v</code> ， <code>\b</code> ， <code>\r</code> ， <code>\f</code> ， <code>\\</code>和<code>\<var>nnn</var></code> ，在哪里<var>nnn</var>是字符代码的八进制编码）。
</p></li></ul>

<p><strong>要点：</strong> GNU扩展是对标识符和集合号和消息号的处理。严格遵循X / Open规范的系统没有此功能。消息目录文件的示例是这样的：</p>
<div class="example">
<pre class="example">$ This is a leading comment.
$quote &quot;

$set SetOne
1 Message with ID 1.
two &quot;   Message with ID \&quot;two\&quot;, which gets the value 2 assigned&quot;

$set SetTwo
$ Since the last set got the number 1 assigned this set has number 2.
4000 &quot;The numbers can be arbitrary, they need not start at one.&quot;
</pre></div>

<p>这个小例子显示了各个方面：</p><ul>
<li>第1行和第9行是注释，因为它们以<code>$</code>然后是空格。
</li><li>引号设置为<code>"</code> 。否则，必须忽略消息定义中的引号，在这种情况下，带有标识符的消息<code>two</code>将会失去其领先的空白。
</li><li>将带编号的消息与具有符号名称的消息混合是没有问题的，并且编号会自动进行。
</li></ul>


<p>尽管此文件格式非常简单，但并不是在正在运行的程序中使用的最佳方式。的<code>catopen</code>函数必须解析文件并优雅地处理语法错误。这不是那么容易，整个过程非常缓慢。因此<code>catgets</code>函数希望数据以另一种更紧凑和随时可用的文件格式显示。有一个特殊的程序<code>gencat</code>下一节将详细说明。
</p>
<p>这种其他格式的文件不可读。为了便于程序使用，它是一个二进制文件。但是格式是字节顺序无关的，因此转换文件可以由任意体系结构的系统共享（只要它们使用GNU C库）。
</p>
<p>有关二进制文件格式的详细信息并不重要，因为这些文件始终由<code>gencat</code>程序。GNU C库的源代码也提供了<code>gencat</code>程序，因此有兴趣的读者可以浏览这些源文件以了解文件格式。
</p>

<hr>
<div class="header">
<p>下一篇： <a href="The-gencat-program.html#The-gencat-program" rel="next" accesskey="n">gencat程序</a> ，上一篇： <a href="The-catgets-Functions.html#The-catgets-Functions" rel="prev" accesskey="p">catgets函数</a> ，上<a href="The-catgets-Functions.html#The-catgets-Functions" rel="prev" accesskey="p">一篇</a> ： <a href="Message-catalogs-a-la-X_002fOpen.html#Message-catalogs-a-la-X_002fOpen" rel="up" accesskey="u">消息分类为X / Open</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>