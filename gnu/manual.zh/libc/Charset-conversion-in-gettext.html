<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>gettext中的字符集转换（GNU C库）</title>

<meta name="description" content="Charset conversion in gettext (The GNU C Library)">
<meta name="keywords" content="Charset conversion in gettext (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Message-catalogs-with-gettext.html#Message-catalogs-with-gettext" rel="up" title="Message catalogs with gettext">
<link href="GUI-program-problems.html#GUI-program-problems" rel="next" title="GUI program problems">
<link href="Advanced-gettext-functions.html#Advanced-gettext-functions" rel="prev" title="Advanced gettext functions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Charset-conversion-in-gettext"></span><div class="header">
<p>下一篇： <a href="GUI-program-problems.html#GUI-program-problems" rel="next" accesskey="n">GUI程序问题</a> ，上一篇： <a href="Advanced-gettext-functions.html#Advanced-gettext-functions" rel="prev" accesskey="p">高级gettext函数</a> ，上一篇： <a href="Message-catalogs-with-gettext.html#Message-catalogs-with-gettext" rel="up" accesskey="u">带有gettext的消息目录</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="How-to-specify-the-output-character-set-gettext-uses"></span><h4 class="subsubsection">8.2.1.4如何指定输出字符集<code>gettext</code>用途</h4>

<p><code>gettext</code>不仅在消息目录中查找翻译，还将翻译即时转换为所需的输出字符集。如果用户使用的字符集与创建消息目录的翻译者使用的字符集不同，这将很有用，因为这样可以避免分发仅字符集不同的消息目录的变体。
</p>
<p>默认情况下，输出字符集的值为<code>nl_langinfo (CODESET)</code> ，这取决于<code>LC_CTYPE</code>当前语言环境的一部分。但是以语言环境无关的方式存储字符串的程序（例如UTF-8）可以请求<code>gettext</code>以及相关功能通过使用<code>bind_textdomain_codeset</code>功能。
</p>
<p>请注意<var>msgid</var>争论<code>gettext</code>不受字符集转换的限制。而且，当<code>gettext</code>找不到翻译<var>msgid</var> ，它返回<var>msgid</var>不变–与当前输出字符集无关。因此，建议所有<var>msgid</var> s是US-ASCII字符串。
</p>
<dl>
<dt id="index-bind_005ftextdomain_005fcodeset">函数： <em>char *</em> <strong>bind_textdomain_codeset</strong> <em>（const char * <var>domainname</var> ，const char * <var>codeset</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全堆| AC不安全的内存|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>bind_textdomain_codeset</code>函数可用于为域的邮件目录指定输出字符集<var>domainname</var> 。的<var>codeset</var>参数必须是可用于<code>iconv_open</code>函数或空指针。
</p>
<p>如果<var>codeset</var>参数是空指针， <code>bind_textdomain_codeset</code>返回名称为该域的当前所选代码集<var>domainname</var> 。它返回<code>NULL</code>如果尚未选择任何代码集。
</p>
<p>的<code>bind_textdomain_codeset</code>该功能可以使用多次。如果多次使用相同<var>domainname</var>参数，后面的调用将覆盖前面的设置。
</p>
<p>的<code>bind_textdomain_codeset</code>函数返回一个指向包含所选代码集名称的字符串的指针。字符串是在函数内部分配的，用户不能更改。如果系统在执行过程中超出核心<code>bind_textdomain_codeset</code> ，返回值为<code>NULL</code>和全局变量<code>errno</code>被相应地设置。
</p></dd></dl>


<hr>
<div class="header">
<p>下一篇： <a href="GUI-program-problems.html#GUI-program-problems" rel="next" accesskey="n">GUI程序问题</a> ，上一篇： <a href="Advanced-gettext-functions.html#Advanced-gettext-functions" rel="prev" accesskey="p">高级gettext函数</a> ，上一篇： <a href="Message-catalogs-with-gettext.html#Message-catalogs-with-gettext" rel="up" accesskey="u">带有gettext的消息目录</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>