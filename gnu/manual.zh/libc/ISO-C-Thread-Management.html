<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ISO C线程管理（GNU C库）</title>

<meta name="description" content="ISO C Thread Management (The GNU C Library)">
<meta name="keywords" content="ISO C Thread Management (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="ISO-C-Threads.html#ISO-C-Threads" rel="up" title="ISO C Threads">
<link href="Call-Once.html#Call-Once" rel="next" title="Call Once">
<link href="ISO-C-Threads-Return-Values.html#ISO-C-Threads-Return-Values" rel="prev" title="ISO C Threads Return Values">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="ISO-C-Thread-Management"></span><div class="header">
<p>下一个： <a href="Call-Once.html#Call-Once" rel="next" accesskey="n">调用一次</a> ，上一个： <a href="ISO-C-Threads-Return-Values.html#ISO-C-Threads-Return-Values" rel="prev" accesskey="p">ISO C线程返回值</a> ，向上： <a href="ISO-C-Threads.html#ISO-C-Threads" rel="up" accesskey="u">ISO C线程</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Creation-and-Control"></span><h4 class="subsection">35.1.2创建和控制</h4>
<span id="index-thread-creation"></span>
<span id="index-thread-control"></span>
<span id="index-thread-management"></span>

<p>GNU C库实现了一组函数，这些函数使用户可以轻松地创建和使用线程。提供了其他功能来控制线程的行为。
</p>
<p>为管理线程定义了以下数据类型：</p>
<dl>
<dt id="index-thrd_005ft">数据类型： <strong>thrd_t</strong></dt>
<dd>
<p>标识线程的唯一对象。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fstart_005ft">数据类型： <strong>thrd_start_t</strong></dt>
<dd>
<p>此数据类型是<code>int (*) (void *)</code>传递给的typedef <code>thrd_create</code>创建新线程时。它应该指向线程将运行的第一个函数。
</p></dd></dl>

<p>以下函数用于处理线程：</p>
<dl>
<dt id="index-thrd_005fcreate">函数： <em>int</em> <strong>thrd_create</strong> <em>（thrd_t * <var>thr</var> ，thrd_start_t <var>func</var> ，无效* <var>arg</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_create</code>创建一个新线程将执行该功能<var>func</var> 。指向的对象<var>arg</var>将用作以下参数<var>func</var> 。如果成功<var>thr</var>设置为新的线程标识符。
</p>
<p>该函数可能会返回<code>thrd_success</code> ， <code>thrd_nomem</code> ， 要么<code>thrd_error</code> 。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fcurrent">函数： <em>thrd_t</em> <strong>thrd_current</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数返回调用线程的标识符。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fequal">函数： <em>int</em> <strong>thrd_equal</strong> <em>（thrd_t <var>lhs</var> ，thrd_t <var>rhs</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_equal</code>检查是否<var>lhs</var>和<var>rhs</var>指同一线程。如果<var>lhs</var>和<var>rhs</var>是不同的线程，此函数返回<em>0</em> ；否则，返回值为非零。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fsleep">功能： <em>int</em> <strong>thrd_sleep</strong> <em>（const struct timespec * <var>time_point</var> ，struct timespec * <var>remaining</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_sleep</code>阻止当前线程的执行至少直到由指示的经过时间为止<var>time_point</var>已经达到。该函数不会花费绝对的时间，而是需要阻塞线程的持续时间。请参阅<a href="Time-Basics.html#Time-Basics">时间基础</a>和<a href="Elapsed-Time.html#Elapsed-Time">经过的时间</a> 。
</p>
<p>如果收到不被忽略的信号，线程可能会提前唤醒。在这种情况下，如果<code>remaining</code>不为NULL，剩余时间段存储在由指向的对象中<var>remaining</var> 。
</p>
<p><code>thrd_sleep</code>如果至少阻塞了一段时间，则返回<em>0</em> <code>time_point</code> <em>-1，</em>如果它被信号打断，则为<em>-1</em> ，否则为负数。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fyield">函数： <em>void</em> <strong>thrd_yield</strong> <em>（void）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_yield</code>为实现提供一个提示，以重新安排当前线程的执行，从而允许其他线程运行。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fexit">函数： <em>_Noreturn void</em> <strong>thrd_exit</strong> <em>（int <var>res</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_exit</code>终止执行调用线程并将其结果代码设置为<var>res</var> 。
</p>
<p>如果从单线程进程调用此函数，则该调用等效于调用<code>exit</code>与<code>EXIT_SUCCESS</code> （请参阅<a href="Normal-Termination.html#Normal-Termination">正常终止</a> ）。还要注意，从启动线程的函数返回等同于调用<code>thrd_exit</code> 。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fdetach">函数： <em>int</em> <strong>thrd_detach</strong> <em>（thrd_t <var>thr</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_detach</code>分离由标识的线程<code>thr</code>从当前控制线程。线程退出后，分离线程所拥有的资源将自动释放。父线程永远不会收到任何通知<var>thr</var>信号。
</p>
<p>呼唤<code>thrd_detach</code>在先前由另一个线程分离或连接的线程上，将导致未定义的行为。
</p>
<p>该函数返回<code>thrd_success</code>要么<code>thrd_error</code> 。
</p></dd></dl>

<dl>
<dt id="index-thrd_005fjoin">函数： <em>int</em> <strong>thrd_join</strong> <em>（thrd_t <var>thr</var> ，int * <var>res</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p><code>thrd_join</code>阻塞当前线程，直到由<code>thr</code>完成执行。如果<code>res</code>不为NULL，则将线程的结果代码放入由指向的位置<var>res</var> 。线程的终止<em>与</em>此功能的完成<em>同步</em> ，这意味着两个线程在执行过程中已到达一个共同点。
</p>
<p>呼唤<code>thrd_join</code>在先前由另一个线程分离或连接的线程上，将导致未定义的行为。
</p>
<p>该函数返回<code>thrd_success</code>要么<code>thrd_error</code> 。
</p></dd></dl>


<hr>
<div class="header">
<p>下一个： <a href="Call-Once.html#Call-Once" rel="next" accesskey="n">调用一次</a> ，上一个： <a href="ISO-C-Threads-Return-Values.html#ISO-C-Threads-Return-Values" rel="prev" accesskey="p">ISO C线程返回值</a> ，向上： <a href="ISO-C-Threads.html#ISO-C-Threads" rel="up" accesskey="u">ISO C线程</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>