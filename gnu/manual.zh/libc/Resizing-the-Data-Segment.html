<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>调整数据段的大小（GNU C库）</title>

<meta name="description" content="Resizing the Data Segment (The GNU C Library)">
<meta name="keywords" content="Resizing the Data Segment (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Memory.html#Memory" rel="up" title="Memory">
<link href="Memory-Protection.html#Memory-Protection" rel="next" title="Memory Protection">
<link href="GNU-C-Variable_002dSize-Arrays.html#GNU-C-Variable_002dSize-Arrays" rel="prev" title="GNU C Variable-Size Arrays">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Resizing-the-Data-Segment"></span><div class="header">
<p>下一页： <a href="Memory-Protection.html#Memory-Protection" rel="next" accesskey="n">内存保护</a> ，上一篇： <a href="Memory-Allocation.html#Memory-Allocation" rel="prev" accesskey="p">内存分配</a> ，最多： <a href="Memory.html#Memory" rel="up" accesskey="u">内存</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Resizing-the-Data-Segment-1"></span><h3 class="section">3.3调整数据段的大小</h3>

<p>本节中的符号在<samp>unistd.h</samp> 。
</p>
<p>通常不会使用本节中的功能，因为“ <a href="Memory-Allocation.html#Memory-Allocation">内存分配”</a>中描述的功能更易于使用。这些是GNU C库内存分配器的接口，该分配器使用下面的函数。以下功能是系统调用的简单接口。
</p>
<dl>
<dt id="index-brk">函数： <em>int</em> <strong>brk</strong> <em>（void * <var>addr</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p><code>brk</code>将调用过程的数据段的高端设置为<var>addr</var> 。
</p>
<p>段末尾的地址定义为该段末尾字节的地址加1。
</p>
<p>如果该功能无效<var>addr</var>低于数据段的低端。（顺便说一下，这被认为是成功的。）
</p>
<p>如果该函数将导致数据段与另一个段重叠或超出流程的数据存储限制（请参阅<a href="Limits-on-Resources.html#Limits-on-Resources">资源限制</a> ），则该函数将失败。
</p>
<p>该函数是根据一种常见的历史情况命名的，在这种情况下，数据存储和堆栈位于同一段中。数据存储分配从该段的底部向上增长，而堆栈从该段的顶部向其底部向下增长，它们之间的间隔称为<em>中断</em> 。
</p>
<p>成功时返回值为零。失败时，返回值为<code>-1</code>和<code>errno</code>被相应地设置。下列<code>errno</code>值特定于此功能：</p>
<dl compact>
<dt><code>ENOMEM</code></dt>
<dd><p>该请求将导致数据段与另一个段重叠或超出流程的数据存储限制。
</p></dd>
</dl>


</dd></dl>


<dl>
<dt id="index-_002asbrk">函数： <em>void</em> <strong>* sbrk</strong> <em>（ptrdiff_t <var>delta</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p>该功能与<code>brk</code>除了您将数据段的新末端指定为偏移量<var>delta</var>从当前端到成功为止，返回值是数据段结果端的地址，而不是零。
</p>
<p>这意味着您可以使用“ <samp>sbrk(0)</samp>以找出数据段的当前结尾是什么。
</p>
</dd></dl>

<hr>
<div class="header">
<p>下一页： <a href="Memory-Protection.html#Memory-Protection" rel="next" accesskey="n">内存保护</a> ，上一篇： <a href="Memory-Allocation.html#Memory-Allocation" rel="prev" accesskey="p">内存分配</a> ，最多： <a href="Memory.html#Memory" rel="up" accesskey="u">内存</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>