<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>传统调度功能（GNU C库）</title>

<meta name="description" content="Traditional Scheduling Functions (The GNU C Library)">
<meta name="keywords" content="Traditional Scheduling Functions (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Traditional-Scheduling.html#Traditional-Scheduling" rel="up" title="Traditional Scheduling">
<link href="CPU-Affinity.html#CPU-Affinity" rel="next" title="CPU Affinity">
<link href="Traditional-Scheduling-Intro.html#Traditional-Scheduling-Intro" rel="prev" title="Traditional Scheduling Intro">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Traditional-Scheduling-Functions"></span><div class="header">
<p>上一篇： <a href="Traditional-Scheduling-Intro.html#Traditional-Scheduling-Intro" rel="prev" accesskey="p">传统调度简介</a> ，上一篇： <a href="Traditional-Scheduling.html#Traditional-Scheduling" rel="up" accesskey="u">传统调度</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Functions-For-Traditional-Scheduling"></span><h4 class="subsubsection">22.3.4.2传统计划的功能</h4>

<span id="index-sys_002fresource_002eh-2"></span>
<p>本节介绍如何读取和设置进程的有效值。所有这些符号都在<samp>sys/resource.h</samp> 。
</p>
<p>函数和宏的名称由POSIX定义，并引用“优先级”，但是函数实际上与好的值有关，因为在手册和POSIX中都使用了这些术语。</p>
<p>有效nice值的范围取决于内核，但通常从<code>-20</code>至<code>20</code> 。较低的nice值对应于该过程的较高优先级。这些常量描述了优先级值的范围：</p>
<dl compact>
<dt><code>PRIO_MIN</code>
<span id="index-PRIO_005fMIN"></span>
</dt>
<dd>
<p>最低有效有效值。
</p>
</dd>
<dt><code>PRIO_MAX</code>
<span id="index-PRIO_005fMAX"></span>
</dt>
<dd>
<p>最高有效有效值。
</p></dd>
</dl>

<dl>
<dt id="index-getpriority">函数： <em>int</em> <strong>getpriority</strong> <em>（int <var>class</var> ，int <var>id</var> ）</em></dt>
<dd>

<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>返回一组进程的漂亮值； <var>class</var>和<var>id</var>指定哪些（请参见下文）。如果指定的进程并非都具有相同的nice值，则将返回它们中任何一个具有的最低值。
</p>
<p>成功时，返回值为<code>0</code> 。不然是<code>-1</code>和<code>errno</code>被相应地设置。的<code>errno</code>特定于此功能的值是：</p>
<dl compact>
<dt><code>ESRCH</code></dt>
<dd><p>的结合<var>class</var>和<var>id</var>与任何现有过程都不匹配。
</p>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p>的价值<var>class</var>无效。
</p></dd>
</dl>

<p>如果返回值为<code>-1</code> ，它可能表示失败，也可能是一个不错的值。确定的唯一方法是设置<code>errno = 0</code>致电之前<code>getpriority</code> ，然后使用<code>errno != 0</code>之后将其作为失败的标准。
</p></dd></dl>

<dl>
<dt id="index-setpriority">函数： <em>int</em> <strong>setpriority</strong> <em>（int <var>class</var> ，int <var>id</var> ，int <var>niceval</var> ）</em></dt>
<dd>

<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>将一组进程的值设置为<var>niceval</var> ; <var>class</var>和<var>id</var>指定哪些（请参见下文）。
</p>
<p>返回值为<code>0</code>成功的基础上<code>-1</code>失败。下列<code>errno</code>此功能可能会出现错误情况：</p>
<dl compact>
<dt><code>ESRCH</code></dt>
<dd><p>的结合<var>class</var>和<var>id</var>与任何现有过程都不匹配。
</p>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p>的价值<var>class</var>无效。
</p>
</dd>
<dt><code>EPERM</code></dt>
<dd><p>调用将设置一个与调用进程不同的用户拥有的进程的值（即，目标进程的实际或有效uid与调用进程的有效uid不匹配），并且调用进程没有<code>CAP_SYS_NICE</code>允许。
</p>
</dd>
<dt><code>EACCES</code></dt>
<dd><p>该调用将降低流程的合理价值，并且流程没有<code>CAP_SYS_NICE</code>允许。
</p></dd>
</dl>

</dd></dl>

<p>论点<var>class</var>和<var>id</var>一起指定您感兴趣的一组过程。这些是...的可能值<var>class</var> ：</p>
<dl compact>
<dt><code>PRIO_PROCESS</code>
<span id="index-PRIO_005fPROCESS"></span>
</dt>
<dd>
<p>一个特定的过程。争论<var>id</var>是一个进程ID（pid）。
</p>
</dd>
<dt><code>PRIO_PGRP</code>
<span id="index-PRIO_005fPGRP"></span>
</dt>
<dd>
<p>特定过程组中的所有过程。争论<var>id</var>是进程组标识（pgid）。
</p>
</dd>
<dt><code>PRIO_USER</code>
<span id="index-PRIO_005fUSER"></span>
</dt>
<dd>
<p>特定用户拥有的所有进程（即，其真实的uid指示该用户）。争论<var>id</var>是用户ID（uid）。
</p></dd>
</dl>

<p>如果论点<var>id</var>为0，表示调用进程，其进程组或其所有者（真实uid），根据<var>class</var> 。
</p>
<dl>
<dt id="index-nice">函数： <em>int</em> <strong>nice</strong> <em>（int <var>increment</var> ）</em></dt>
<dd>
<p>初步： MT不安全竞赛：setpriority | AS不安全|交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>通过增加调用过程的美观值<var>increment</var> 。返回值是成功后的新值。 <code>-1</code>失败。在失败的情况下<code>errno</code>将设置为与相同的值<code>setpriority</code> 。
</p>

<p>这是的等效定义<code>nice</code> ：</p>
<div class="example">
<pre class="example">int
nice (int increment)
{
  int result, old = getpriority (PRIO_PROCESS, 0);
  result = setpriority (PRIO_PROCESS, 0, old + increment);
  if (result != -1)
      return old + increment;
  else
      return -1;
}
</pre></div>
</dd></dl>


<hr>
<div class="header">
<p>上一篇： <a href="Traditional-Scheduling-Intro.html#Traditional-Scheduling-Intro" rel="prev" accesskey="p">传统调度简介</a> ，上一篇： <a href="Traditional-Scheduling.html#Traditional-Scheduling" rel="up" accesskey="u">传统调度</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>