<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>硬链接（GNU C库）</title>

<meta name="description" content="Hard Links (The GNU C Library)">
<meta name="keywords" content="Hard Links (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="File-System-Interface.html#File-System-Interface" rel="up" title="File System Interface">
<link href="Symbolic-Links.html#Symbolic-Links" rel="next" title="Symbolic Links">
<link href="Working-with-Directory-Trees.html#Working-with-Directory-Trees" rel="prev" title="Working with Directory Trees">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Hard-Links"></span><div class="header">
<p>下一篇： <a href="Symbolic-Links.html#Symbolic-Links" rel="next" accesskey="n">符号链接</a> ，上一篇： <a href="Working-with-Directory-Trees.html#Working-with-Directory-Trees" rel="prev" accesskey="p">使用目录树</a> ，上一篇： <a href="File-System-Interface.html#File-System-Interface" rel="up" accesskey="u">文件系统接口</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Hard-Links-1"></span><h3 class="section">14.4硬链接</h3>
<span id="index-hard-link"></span>
<span id="index-link_002c-hard"></span>
<span id="index-multiple-names-for-one-file"></span>
<span id="index-file-names_002c-multiple"></span>

<p>在POSIX系统中，一个文件可以同时具有多个名称。所有名称都是真实的，没有一个是其他名称的首选。
</p>
<p>要将名称添加到文件，请使用<code>link</code>功能。（新名称也称为文件的<em>硬链接</em> 。）创建指向文件的新链接不会复制文件的内容；除了文件的一个或多个现有名称之外，它只是简单地命名一个新名称，通过该名称即可知道该文件。
</p>
<p>一个文件可以在多个目录中具有名称，因此文件系统的组织不是严格的层次结构或树。
</p>
<p>在大多数实现中，不可能在多个文件系统中具有硬链接到同一文件。 <code>link</code>如果您无法建立从另一个文件系统到该文件的硬链接，则会报告错误。
</p>
<p>的原型<code>link</code>函数在头文件中声明<samp>unistd.h</samp> 。
<span id="index-unistd_002eh-5"></span>
</p>
<dl>
<dt id="index-link-1">函数： <em>int</em> <strong>链接</strong> <em>（const char * <var>oldname</var> ，const char * <var>newname</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>link</code>函数建立一个新链接，链接到现有文件，名称为<var>oldname</var> ，以新名称<var>newname</var> 。
</p>
<p>此函数返回值<code>0</code>如果成功，并且<code>-1</code>失败。除了通常的文件名错误（请参阅<a href="File-Name-Errors.html#File-Name-Errors">文件名错误</a> ） <var>oldname</var>和<var>newname</var> ， 下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EACCES</code></dt>
<dd><p>您不允许写入要在其中写入新链接的目录。
</p>
</dd>
<dt><code>EEXIST</code></dt>
<dd><p>已经有一个名为<var>newname</var> 。如果要使用新链接替换此链接，则必须首先明确删除旧链接。
</p>
</dd>
<dt><code>EMLINK</code></dt>
<dd><p>指向的文件的链接已经太多<var>oldname</var> 。（文件的最大链接数为<code><span class="nolinebreak">LINK_MAX</span></code> <!-- /@w --> ;请参阅<a href="Limits-for-Files.html#Limits-for-Files">文件限制</a> 。）
</p>
</dd>
<dt><code>ENOENT</code></dt>
<dd><p>由命名的文件<var>oldname</var>不存在。您无法链接到不存在的文件。
</p>
</dd>
<dt><code>ENOSPC</code></dt>
<dd><p>包含新链接的目录或文件系统已满，无法扩展。
</p>
</dd>
<dt><code>EPERM</code></dt>
<dd><p>在GNU / Linux和GNU / Hurd系统以及其他一些系统上，您无法建立目录链接。许多系统仅允许特权用户这样做。此错误用于报告问题。
</p>
</dd>
<dt><code>EROFS</code></dt>
<dd><p>包含新链接的目录位于只读文件系统上，因此无法修改。
</p>
</dd>
<dt><code>EXDEV</code></dt>
<dd><p>在中指定的目录<var>newname</var>与现有文件位于不同的文件系统上。
</p>
</dd>
<dt><code>EIO</code></dt>
<dd><p>尝试读取或写入文件系统时发生硬件错误。
</p></dd>
</dl>
</dd></dl>

<dl>
<dt id="index-linkat">函数： <em>int</em> <strong>linkat</strong> <em>（int oldfd，const char * <var>oldname</var> ，int newfd，const char * <var>newname</var> ，int标志）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p>的<code>linkat</code>功能类似于<code>link</code>函数，但它使用文件描述符（指目录）和路径名的组合来标识其源和目标。如果路径名不是绝对的，则相对于相应的文件描述符进行解析。特殊文件描述符<code>AT_FDCWD</code>表示当前目录。
</p>
<p>的<var>flags</var>参数是以下标志的组合：</p>
<dl compact>
<dt><code>AT_SYMLINK_FOLLOW</code></dt>
<dd><p>如果源路径由<var>oldfd</var>和<var>oldname</var>是一个符号链接， <code>linkat</code>跟随符号链接并创建指向其目标的链接。如果未设置标志，则创建符号链接本身的链接；否则，将创建符号链接。并非所有文件系统都支持此功能，并且<code>linkat</code>在这种情况下可能会失败。
</p>
</dd>
<dt><code>AT_EMPTY_PATH</code></dt>
<dd><p>如果指定了此标志， <var>oldname</var>可以是一个空字符串。在这种情况下，指向由描述符表示的文件的新链接<var>oldfd</var>已创建，可能已使用<code>O_PATH</code>要么<code>O_TMPFILE</code> 。此标志是GNU扩展。
</p></dd>
</dl>
</dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="Symbolic-Links.html#Symbolic-Links" rel="next" accesskey="n">符号链接</a> ，上一篇： <a href="Working-with-Directory-Trees.html#Working-with-Directory-Trees" rel="prev" accesskey="p">使用目录树</a> ，上一篇： <a href="File-System-Interface.html#File-System-Interface" rel="up" accesskey="u">文件系统接口</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>