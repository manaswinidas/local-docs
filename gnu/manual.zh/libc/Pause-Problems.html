<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>暂停问题（GNU C库）</title>

<meta name="description" content="Pause Problems (The GNU C Library)">
<meta name="keywords" content="Pause Problems (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Waiting-for-a-Signal.html#Waiting-for-a-Signal" rel="up" title="Waiting for a Signal">
<link href="Sigsuspend.html#Sigsuspend" rel="next" title="Sigsuspend">
<link href="Using-Pause.html#Using-Pause" rel="prev" title="Using Pause">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Pause-Problems"></span><div class="header">
<p>下一篇： <a href="Sigsuspend.html#Sigsuspend" rel="next" accesskey="n">Sigsuspend</a> ，上一篇： <a href="Using-Pause.html#Using-Pause" rel="prev" accesskey="p">使用暂停</a> ，上<a href="Waiting-for-a-Signal.html#Waiting-for-a-Signal" rel="up" accesskey="u">一篇</a> ： <a href="Waiting-for-a-Signal.html#Waiting-for-a-Signal" rel="up" accesskey="u">等待信号</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Problems-with-pause"></span><h4 class="subsection">24.8.2问题<code>pause</code></h4>

<p>的简单性<code>pause</code>可以掩盖严重的定时错误，这些错误会使程序神秘地挂起。
</p>
<p>使用安全<code>pause</code>如果您程序的真正工作是由信号处理程序本身完成的，那么“主程序”除了<code>pause</code> 。每次传递信号时，处理程序将执行下一批要完成的工作，然后返回，以便程序的主循环可以调用<code>pause</code>再次。
</p>
<p>你不能安全使用<code>pause</code>等到另一个信号到达，然后再恢复实际工作。即使您通过设置标志来安排信号处理程序进行协作，您仍然无法使用<code>pause</code>可靠地。这是此问题的示例：</p>
<div class="example">
<pre class="example">/* <span class="roman"><code>usr_interrupt</code> is set by the signal handler.</span>  */
if (!usr_interrupt)
  pause ();

/* <span class="roman">Do work once the signal arrives.</span>  */
&hellip;
</pre></div>

<p>这有一个错误：信号可能在变量之后到达<code>usr_interrupt</code>已检查，但在致电之前<code>pause</code> 。如果没有其他信号到达，则该过程将永远不会再次唤醒。
</p>
<p>您可以使用来设置等待的上限<code>sleep</code>循环，而不是使用<code>pause</code> 。（有关更多信息，请参见“ <a href="Sleeping.html#Sleeping">睡眠”</a> <code>sleep</code> ）看起来是这样的：</p>
<div class="example">
<pre class="example">/* <span class="roman"><code>usr_interrupt</code> is set by the signal handler.</span>
while (!usr_interrupt)
  sleep (1);

/* <span class="roman">Do work once the signal arrives.</span>  */
&hellip;
</pre></div>

<p>对于某些目的，这已经足够了。但是稍微复杂一点，您可以使用以下命令可靠地等待直到运行特定的信号处理程序<code>sigsuspend</code> 。
</p>
<hr>
<div class="header">
<p>下一篇： <a href="Sigsuspend.html#Sigsuspend" rel="next" accesskey="n">Sigsuspend</a> ，上一篇： <a href="Using-Pause.html#Using-Pause" rel="prev" accesskey="p">使用暂停</a> ，上<a href="Waiting-for-a-Signal.html#Waiting-for-a-Signal" rel="up" accesskey="u">一篇</a> ： <a href="Waiting-for-a-Signal.html#Waiting-for-a-Signal" rel="up" accesskey="u">等待信号</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>