<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>测试文件类型（GNU C库）</title>

<meta name="description" content="Testing File Type (The GNU C Library)">
<meta name="keywords" content="Testing File Type (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="File-Attributes.html#File-Attributes" rel="up" title="File Attributes">
<link href="File-Owner.html#File-Owner" rel="next" title="File Owner">
<link href="Reading-Attributes.html#Reading-Attributes" rel="prev" title="Reading Attributes">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Testing-File-Type"></span><div class="header">
<p>下一篇： <a href="File-Owner.html#File-Owner" rel="next" accesskey="n">文件所有者</a> ，上一篇： <a href="Reading-Attributes.html#Reading-Attributes" rel="prev" accesskey="p">阅读属性</a> ，上一篇： <a href="File-Owner.html#File-Owner" rel="next" accesskey="n">文件</a> <a href="File-Attributes.html#File-Attributes" rel="up" accesskey="u">属性</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Testing-the-Type-of-a-File"></span><h4 class="subsection">14.9.3测试文件类型</h4>

<p><em>文件模式</em> ，存储在<code>st_mode</code>文件属性的字段包含两种信息：文件类型代码和访问许可位。本节仅讨论类型代码，您可以使用该代码来判断文件是否是目录，套接字，符号链接等。有关访问权限的详细信息，请参阅<a href="Permission-Bits.html#Permission-Bits">权限位</a> 。
</p>
<p>您可以通过两种方式在文件模式下访问文件类型信息。首先，对于每种文件类型，都有一个<em>谓词宏</em> ，该<em>宏</em>检查给定的文件模式并返回其是否属于该类型。其次，您可以屏蔽掉文件模式的其余部分，仅保留文件类型代码，并将其与每种支持的文件类型的常量进行比较。
</p>
<p>本节中列出的所有符号都在头文件中定义<samp>sys/stat.h</samp> 。
<span id="index-sys_002fstat_002eh-3"></span>
</p>
<p>在给定值的情况下，以下谓词宏测试文件的类型<var>m</var>哪一个是<code>st_mode</code>字段返回<code>stat</code>在该文件上：</p>
<dl>
<dt id="index-S_005fISDIR">宏： <em>int</em> <strong>S_ISDIR</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果文件是目录，则此宏返回非零值。
</p></dd></dl>

<dl>
<dt id="index-S_005fISCHR">巨集： <em>int</em> <strong>S_ISCHR</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果文件是字符特殊文件（如终端的设备），则此宏返回非零值。
</p></dd></dl>

<dl>
<dt id="index-S_005fISBLK">巨集： <em>int</em> <strong>S_ISBLK</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果该文件是块特殊文件（如磁盘的设备），则此宏返回非零值。
</p></dd></dl>

<dl>
<dt id="index-S_005fISREG">巨集： <em>int</em> <strong>S_ISREG</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果文件是常规文件，则此宏返回非零值。
</p></dd></dl>

<dl>
<dt id="index-S_005fISFIFO">巨集： <em>int</em> <strong>S_ISFIFO</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果该文件是FIFO特殊文件或管道，则此宏返回非零值。请参阅<a href="Pipes-and-FIFOs.html#Pipes-and-FIFOs">管道和FIFO</a> 。
</p></dd></dl>

<dl>
<dt id="index-S_005fISLNK">巨集： <em>int</em> <strong>S_ISLNK</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果文件是符号链接，则此宏返回非零值。请参阅<a href="Symbolic-Links.html#Symbolic-Links">符号链接</a> 。
</p></dd></dl>

<dl>
<dt id="index-S_005fISSOCK">巨集： <em>int</em> <strong>S_ISSOCK</strong> <em>（mode_t <var>m</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果文件是套接字，则此宏返回非零值。请参阅<a href="Sockets.html#Sockets">套接字</a> 。
</p></dd></dl>

<p>支持与BSD兼容的另一种非POSIX测试文件类型的方法。该模式可以与<code>S_IFMT</code>提取文件类型代码，并与适当的常量进行比较。例如，</p>
<div class="example">
<pre class="example">S_ISCHR (<var>mode</var>)
</pre></div>

<p>等效于：</p>
<div class="example">
<pre class="example">((<var>mode</var> &amp; S_IFMT) == S_IFCHR)
</pre></div>

<dl>
<dt id="index-S_005fIFMT">巨集： <em>int</em> <strong>S_IFMT</strong></dt>
<dd>
<p>这是一个位掩码，用于从模式值中提取文件类型代码。
</p></dd></dl>

<p>这些是不同文件类型代码的符号名称：</p>
<dl compact>
<dt><code>S_IFDIR</code>
<span id="index-S_005fIFDIR"></span>
</dt>
<dd>
<p>这是目录文件的文件类型常量。
</p>
</dd>
<dt><code>S_IFCHR</code>
<span id="index-S_005fIFCHR"></span>
</dt>
<dd>
<p>这是面向字符的设备文件的文件类型常量。
</p>
</dd>
<dt><code>S_IFBLK</code>
<span id="index-S_005fIFBLK"></span>
</dt>
<dd>
<p>这是面向块的设备文件的文件类型常量。
</p>
</dd>
<dt><code>S_IFREG</code>
<span id="index-S_005fIFREG"></span>
</dt>
<dd>
<p>这是常规文件的文件类型常量。
</p>
</dd>
<dt><code>S_IFLNK</code>
<span id="index-S_005fIFLNK"></span>
</dt>
<dd>
<p>这是符号链接的文件类型常量。
</p>
</dd>
<dt><code>S_IFSOCK</code>
<span id="index-S_005fIFSOCK"></span>
</dt>
<dd>
<p>这是套接字的文件类型常量。
</p>
</dd>
<dt><code>S_IFIFO</code>
<span id="index-S_005fIFIFO"></span>
</dt>
<dd>
<p>这是FIFO或管道的文件类型常量。
</p></dd>
</dl>

<p>POSIX.1b标准引入了更多对象，这些对象可以实现为文件系统中的对象。这些是消息队列，信号量和共享内存对象。为了使这些对象与其他文件区分开，POSIX标准引入了三个新的测试宏。但与其他宏不同，它们不采用<code>st_mode</code>字段作为参数。相反，他们希望有一个指向整体的指针<code>struct stat</code>结构体。
</p>
<dl>
<dt id="index-S_005fTYPEISMQ">巨集： <em>int</em> <strong>S_TYPEISMQ</strong> <em>（结构统计* <var>s</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果系统将POSIX消息队列实现为不同的对象，并且该文件是消息队列对象，则此宏返回非零值。在所有其他情况下，结果均为零。
</p></dd></dl>

<dl>
<dt id="index-S_005fTYPEISSEM">巨集： <em>int</em> <strong>S_TYPEISSEM</strong> <em>（结构统计* <var>s</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果系统将POSIX信号量实现为不同的对象，并且文件是信号量对象，则此宏将返回非零值。在所有其他情况下，结果均为零。
</p></dd></dl>

<dl>
<dt id="index-S_005fTYPEISSHM">巨集： <em>int</em> <strong>S_TYPEISSHM</strong> <em>（结构统计* <var>s</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>如果系统将POSIX共享内存对象实现为不同的对象，并且文件是共享内存对象，则此宏返回一个非零值。在所有其他情况下，结果均为零。
</p></dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="File-Owner.html#File-Owner" rel="next" accesskey="n">文件所有者</a> ，上一篇： <a href="Reading-Attributes.html#Reading-Attributes" rel="prev" accesskey="p">阅读属性</a> ，上一篇： <a href="File-Owner.html#File-Owner" rel="next" accesskey="n">文件</a> <a href="File-Attributes.html#File-Attributes" rel="up" accesskey="u">属性</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>