<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>使用Getopt（GNU C库）</title>

<meta name="description" content="Using Getopt (The GNU C Library)">
<meta name="keywords" content="Using Getopt (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Getopt.html#Getopt" rel="up" title="Getopt">
<link href="Example-of-Getopt.html#Example-of-Getopt" rel="next" title="Example of Getopt">
<link href="Getopt.html#Getopt" rel="prev" title="Getopt">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Using-Getopt"></span><div class="header">
<p>下一页： <a href="Example-of-Getopt.html#Example-of-Getopt" rel="next" accesskey="n">Getopt示例</a> ，上： <a href="Getopt.html#Getopt" rel="up" accesskey="u">Getopt</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Using-the-getopt-function"></span><h4 class="subsection">25.2.1使用<code>getopt</code>功能</h4>

<p>以下是有关如何拨打电话的详细信息<code>getopt</code>功能。要使用此功能，您的程序必须包含头文件<samp>unistd.h</samp> 。
<span id="index-unistd_002eh-15"></span>
</p>
<dl>
<dt id="index-opterr">变量： <em>int</em> <strong>opterr</strong></dt>
<dd>
<p>如果此变量的值不为零，则<code>getopt</code>如果遇到未知的选项字符或缺少必需参数的选项，则将错误消息输出到标准错误流。这是默认行为。如果将此变量设置为零， <code>getopt</code>不打印任何消息，但仍返回字符<code>?</code>表示错误。
</p></dd></dl>

<dl>
<dt id="index-optopt">变量： <em>int</em> <strong>optopt</strong></dt>
<dd>
<p>什么时候<code>getopt</code>遇到未知的选项字符或缺少必需参数的选项，它将该选项字符存储在此变量中。您可以使用它来提供自己的诊断消息。
</p></dd></dl>

<dl>
<dt id="index-optind">变量： <em>int</em> <strong>optind</strong></dt>
<dd>
<p>该变量由<code>getopt</code>到下一个元素的索引<var>argv</var>要处理的数组。一旦<code>getopt</code>已找到所有选项参数，则可以使用此变量来确定其余非选项参数的开始位置。该变量的初始值为<code>1</code> 。
</p></dd></dl>

<dl>
<dt id="index-optarg">变量： <em>char *</em> <strong>optarg</strong></dt>
<dd>
<p>该变量由<code>getopt</code>指向选项参数的值，对于那些接受参数的选项。
</p></dd></dl>

<dl>
<dt id="index-getopt">函数： <em>int</em> <strong>getopt</strong> <em>（int <var>argc</var> ，char * const * <var>argv</var> ，const char * <var>options</var> ）</em></dt>
<dd>
<p>初步： MT不安全种族：getopt env | AS不安全堆i18n锁损坏| AC不安全的内存锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getopt</code>函数从由指定的参数列表中获取下一个选项参数<var>argv</var>和<var>argc</var>论点。通常，这些值直接来自于<code>main</code> 。
</p>
<p>的<var>options</var>参数是一个字符串，它指定对该程序有效的选项字符。此字符串中的选项字符后可以跟一个冒号（' <samp>:</samp> '）表示它接受必需的参数。如果选项字符后跟两个冒号（' <samp>::</samp> '），其参数是可选的；这是一个GNU扩展。
</p>
<p><code>getopt</code>有三种方法来处理非选项之后的选项<var>argv</var>元素。特殊参数“ <samp>--</samp> '在所有情况下都强制结束选项扫描。
</p>
<ul>
<li>默认是置换内容<var>argv</var>进行扫描时，最终所有非选项都将在末尾。这允许以任何顺序给出选项，即使对于未编写程序的程序也是如此。

</li><li>如果<var>options</var>参数字符串以连字符（' <samp>-</samp> '），这是特殊对待的。它允许返回非选项参数，就像它们与选项字符' <samp>\1</samp> '。

</li><li>POSIX要求以下行为：第一个非选项停止选项处理。通过设置环境变量来选择此模式<code>POSIXLY_CORRECT</code>或开始<var>options</var>带加号（' <samp>+</samp> '）。
</li></ul>

<p>的<code>getopt</code>函数返回下一个命令行选项的选项字符。当没有更多选项参数可用时，它将返回<code>-1</code> 。可能还有更多的非选择参数。您必须比较外部变量<code>optind</code>反对这<var>argc</var>参数进行检查。
</p>
<p>如果该选项具有参数， <code>getopt</code>通过将参数存储在变量中来返回参数<var>optarg</var> 。您通常不需要复制<code>optarg</code>字符串，因为它是原始指针<var>argv</var>数组，而不是放置到可能会覆盖的静态区域中。
</p>
<p>如果<code>getopt</code>在以下位置找到选项字符<var>argv</var>那不包括在内<var>options</var> ，或缺少选项参数，则返回“ <samp>?</samp>并设置外部变量<code>optopt</code>到实际的选项字符。如果第一个字符<var>options</var>是冒号（' <samp>:</samp> '）， 然后<code>getopt</code>返回“ <samp>:</samp> ' 代替 ' <samp>?</samp> '表示缺少选项参数。另外，如果外部变量<code>opterr</code>为非零（默认值）， <code>getopt</code>显示错误信息。
</p></dd></dl>

<hr>
<div class="header">
<p>下一页： <a href="Example-of-Getopt.html#Example-of-Getopt" rel="next" accesskey="n">Getopt示例</a> ，上： <a href="Getopt.html#Getopt" rel="up" accesskey="u">Getopt</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>