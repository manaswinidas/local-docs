<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>终端访问功能（GNU C库）</title>

<meta name="description" content="Terminal Access Functions (The GNU C Library)">
<meta name="keywords" content="Terminal Access Functions (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Functions-for-Job-Control.html#Functions-for-Job-Control" rel="up" title="Functions for Job Control">
<link href="Name-Service-Switch.html#Name-Service-Switch" rel="next" title="Name Service Switch">
<link href="Process-Group-Functions.html#Process-Group-Functions" rel="prev" title="Process Group Functions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Terminal-Access-Functions"></span><div class="header">
<p>上一页： <a href="Process-Group-Functions.html#Process-Group-Functions" rel="prev" accesskey="p">流程组功能</a> ，向上： <a href="Functions-for-Job-Control.html#Functions-for-Job-Control" rel="up" accesskey="u">作业控制功能</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Functions-for-Controlling-Terminal-Access"></span><h4 class="subsection">28.6.3控制终端访问的功能</h4>

<p>这些是用于读取或设置终端的前台处理组的功能。您应该包括头文件<samp>sys/types.h</samp>和<samp>unistd.h</samp>在您的应用程序中使用这些功能。
<span id="index-unistd_002eh-21"></span>
<span id="index-sys_002ftypes_002eh-3"></span>
</p>
<p>尽管这些函数采用文件描述符参数来指定终端设备，但前台作业与终端文件本身相关联，而不与特定的打开文件描述符相关联。
</p>
<dl>
<dt id="index-tcgetpgrp">函数： <em>pid_t</em> <strong>tcgetpgrp</strong> <em>（int <var>filedes</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数返回与在描述符上打开的终端相关联的前台进程组的进程组ID。 <var>filedes</var> 。
</p>
<p>如果没有前台进程组，则返回值大于<code>1</code>与任何现有进程组的进程组ID不匹配。如果该作业中以前是前台作业的所有进程都已终止，并且尚未将其他作业移到前台，则可能会发生这种情况。
</p>
<p>发生错误时，值为<code>-1</code>返回。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>参数不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOSYS</code></dt>
<dd><p>系统不支持作业控制。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>与终端相关的终端文件<var>filedes</var>参数不是调用过程的控制终端。
</p></dd>
</dl>
</dd></dl>

<dl>
<dt id="index-tcsetpgrp">函数： <em>int</em> <strong>tcsetpgrp</strong> <em>（int <var>filedes</var> ，pid_t <var>pgid</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该功能用于设置终端的前台进程组ID。争论<var>filedes</var>是指定终端的描述符； <var>pgid</var>指定进程组。调用进程必须是与该会话相同的成员<var>pgid</var>并且必须具有相同的控制终端。
</p>
<p>为了进行终端访问，将此功能视为输出。如果从其控制终端上的后台进程调用该进程，则通常向该进程组中的所有进程发送<code>SIGTTOU</code>信号。例外是如果调用进程本身正在忽略或阻止<code>SIGTTOU</code>信号，在这种情况下将执行操作且不发送信号。
</p>
<p>如果成功<code>tcsetpgrp</code>退货<code>0</code> 。返回值为<code>-1</code>表示错误。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>参数不是有效的文件描述符。
</p>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p>的<var>pgid</var>参数无效。
</p>
</dd>
<dt><code>ENOSYS</code></dt>
<dd><p>系统不支持作业控制。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>不是呼叫过程的控制终端。
</p>
</dd>
<dt><code>EPERM</code></dt>
<dd><p>的<var>pgid</var>与调用进程不在同一会话中的进程组。
</p></dd>
</dl>
</dd></dl>

<dl>
<dt id="index-tcgetsid">函数： <em>pid_t</em> <strong>tcgetsid</strong> <em>（int <var>fildes</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数用于获取终端指定的会话的进程组ID。 <var>fildes</var>是控制终端。如果呼叫成功，则返回组ID。否则返回值为<code>(pid_t) -1</code>和全局变量<code>errno</code>设置为以下值：</p><dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>参数不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>调用过程没有控制终端，或者文件不是控制终端。
</p></dd>
</dl>
</dd></dl>
<hr>
<div class="header">
<p>上一页： <a href="Process-Group-Functions.html#Process-Group-Functions" rel="prev" accesskey="p">流程组功能</a> ，向上： <a href="Functions-for-Job-Control.html#Functions-for-Job-Control" rel="up" accesskey="u">作业控制功能</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>