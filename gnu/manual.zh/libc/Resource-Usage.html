<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>资源使用情况（GNU C库）</title>

<meta name="description" content="Resource Usage (The GNU C Library)">
<meta name="keywords" content="Resource Usage (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Resource-Usage-And-Limitation.html#Resource-Usage-And-Limitation" rel="up" title="Resource Usage And Limitation">
<link href="Limits-on-Resources.html#Limits-on-Resources" rel="next" title="Limits on Resources">
<link href="Resource-Usage-And-Limitation.html#Resource-Usage-And-Limitation" rel="prev" title="Resource Usage And Limitation">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Resource-Usage"></span><div class="header">
<p>下一页： <a href="Limits-on-Resources.html#Limits-on-Resources" rel="next" accesskey="n">资源限制</a> ，上： <a href="Resource-Usage-And-Limitation.html#Resource-Usage-And-Limitation" rel="up" accesskey="u">资源使用和限制</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Resource-Usage-1"></span><h3 class="section">22.1资源使用</h3>

<span id="index-sys_002fresource_002eh"></span>
<p>功能<code>getrusage</code>和数据类型<code>struct rusage</code>用于检查进程的资源使用情况。它们在<samp>sys/resource.h</samp> 。
</p>
<dl>
<dt id="index-getrusage">函数： <em>int</em> <strong>getrusage</strong> <em>（int <var>processes</var> ，struct rusage * <var>rusage</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能报告由以下人员指定的进程的资源使用总计<var>processes</var> ，将信息存储在<code>*<var>rusage</var></code> 。
</p>
<p>在大多数系统中<var>processes</var>只有两个有效值：</p>
<dl compact>
<dt><code>RUSAGE_SELF</code>
<span id="index-RUSAGE_005fSELF"></span>
</dt>
<dd>
<p>只是当前的过程。
</p>
</dd>
<dt><code>RUSAGE_CHILDREN</code>
<span id="index-RUSAGE_005fCHILDREN"></span>
</dt>
<dd>
<p>已经终止的所有子进程（直接和间接）。
</p></dd>
</dl>

<p>的返回值<code>getrusage</code>成功为零，并且<code>-1</code>对于失败。
</p>
<dl compact>
<dt><code>EINVAL</code></dt>
<dd><p>争论<var>processes</var>无效。
</p></dd>
</dl>
</dd></dl>

<p>获取特定子进程的资源使用情况的一种方法是使用函数<code>wait4</code> ，该子项终止时返回子项的总数。请参见<a href="BSD-Wait-Functions.html#BSD-Wait-Functions">BSD等待功能</a> 。
</p>
<dl>
<dt id="index-struct-rusage">数据类型： <strong>struct rusage</strong></dt>
<dd>
<p>此数据类型存储各种资源使用情况统计信息。它具有以下成员，可能还有其他成员：</p>
<dl compact>
<dt><code>struct timeval ru_utime</code></dt>
<dd><p>执行用户指令所花费的时间。
</p>
</dd>
<dt><code>struct timeval ru_stime</code></dt>
<dd><p>代表花费在操作系统代码上的时间<var>processes</var> 。
</p>
</dd>
<dt><code>long int ru_maxrss</code></dt>
<dd><p>使用的最大居民集大小，以千字节为单位。也就是说，最大物理内存的千字节数<var>processes</var>同时使用。
</p>
</dd>
<dt><code>long int ru_ixrss</code></dt>
<dd><p>以千字节乘以执行时间的整数表示的整数值，它表示与其他进程共享的文本使用的内存量。
</p>
</dd>
<dt><code>long int ru_idrss</code></dt>
<dd><p>以相同方式表示的整数值，即用于数据的未共享内存的数量。
</p>
</dd>
<dt><code>long int ru_isrss</code></dt>
<dd><p>整数值以相同的方式表示，即用于堆栈空间的未共享内存的数量。
</p>
</dd>
<dt><code>long int ru_minflt</code></dt>
<dd><p>在不需要任何I / O的情况下进行服务的页面错误数。</p>
</dd>
<dt><code>long int ru_majflt</code></dt>
<dd><p>通过执行I / O服务的页面错误数。</p>
</dd>
<dt><code>long int ru_nswap</code></dt>
<dd><p>次数<var>processes</var>被完全换出主内存。
</p>
</dd>
<dt><code>long int ru_inblock</code></dt>
<dd><p>文件系统必须以的形式从磁盘读取的次数<var>processes</var> 。
</p>
</dd>
<dt><code>long int ru_oublock</code></dt>
<dd><p>文件系统必须代表写入磁盘的次数<var>processes</var> 。
</p>
</dd>
<dt><code>long int ru_msgsnd</code></dt>
<dd><p>发送的IPC消息数。
</p>
</dd>
<dt><code>long int ru_msgrcv</code></dt>
<dd><p>收到的IPC消息数。
</p>
</dd>
<dt><code>long int ru_nsignals</code></dt>
<dd><p>收到的信号数。
</p>
</dd>
<dt><code>long int ru_nvcsw</code></dt>
<dd><p>次数<var>processes</var>自愿调用上下文切换（通常等待一些服务）。
</p>
</dd>
<dt><code>long int ru_nivcsw</code></dt>
<dd><p>非自愿上下文切换发生的次数（由于时间片已到期，或已安排了另一个更高优先级的进程）。
</p></dd>
</dl>
</dd></dl>

<p><code>vtimes</code>是一个历史功能，可以执行某些操作<code>getrusage</code>做。 <code>getrusage</code>是更好的选择。
</p>
<p><code>vtimes</code>及其<code>vtimes</code>数据结构在<samp>sys/vtimes.h</samp> 。
<span id="index-sys_002fvtimes_002eh"></span>
</p>
<dl>
<dt id="index-vtimes">函数： <em>int</em> <strong>vtimes</strong> <em>（struct vtimes * <var>current</var> ，struct vtimes * <var>child</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p><code>vtimes</code>报告流程的资源使用总计。
</p>
<p>如果<var>current</var>不为空， <code>vtimes</code>仅将调用过程的资源使用总数存储在它指向的结构中。如果<var>child</var>不为空， <code>vtimes</code>将调用过程的所有过去子级（已终止）的资源使用总计存储在它指向的结构中。
</p>
<dl>
<dt id="index-struct-vtimes">数据类型： <strong>struct vtimes</strong></dt>
<dd><p>此数据类型包含有关进程的资源使用情况的信息。每个成员对应于<code>struct rusage</code>上述数据类型。
</p>
<dl compact>
<dt><code>vm_utime</code></dt>
<dd><p>用户CPU时间。类似于<code>ru_utime</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_stime</code></dt>
<dd><p>系统CPU时间。类似于<code>ru_stime</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_idsrss</code></dt>
<dd><p>数据和堆栈存储器。将报告为的值的总和<code>ru_idrss</code>和<code>ru_isrss</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_ixrss</code></dt>
<dd><p>共享内存。类似于<code>ru_ixrss</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_maxrss</code></dt>
<dd><p>最大居民人数。类似于<code>ru_maxrss</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_majflt</code></dt>
<dd><p>主要页面错误。类似于<code>ru_majflt</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_minflt</code></dt>
<dd><p>轻微页面错误。类似于<code>ru_minflt</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_nswap</code></dt>
<dd><p>掉期计数。类似于<code>ru_nswap</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_inblk</code></dt>
<dd><p>磁盘读取。类似于<code>ru_inblk</code>在<code>struct rusage</code>
</p></dd>
<dt><code>vm_oublk</code></dt>
<dd><p>磁盘写入。类似于<code>ru_oublk</code>在<code>struct rusage</code>
</p></dd>
</dl>
</dd></dl>


<p>如果函数成功，则返回值为零；否则为0。 <code>-1</code>除此以外。
</p>


</dd></dl>
<p>用于检查资源使用情况的附加历史功能， <code>vtimes</code>支持，但此处未记录。声明在<samp>sys/vtimes.h</samp> 。
</p>
<hr>
<div class="header">
<p>下一页： <a href="Limits-on-Resources.html#Limits-on-Resources" rel="next" accesskey="n">资源限制</a> ，上： <a href="Resource-Usage-And-Limitation.html#Resource-Usage-And-Limitation" rel="up" accesskey="u">资源使用和限制</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>