<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>主机标识（GNU C库）</title>

<meta name="description" content="Host Identification (The GNU C Library)">
<meta name="keywords" content="Host Identification (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="System-Management.html#System-Management" rel="up" title="System Management">
<link href="Platform-Type.html#Platform-Type" rel="next" title="Platform Type">
<link href="System-Management.html#System-Management" rel="prev" title="System Management">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Host-Identification"></span><div class="header">
<p>下一篇： <a href="Platform-Type.html#Platform-Type" rel="next" accesskey="n">平台类型</a> ，上一篇： <a href="System-Management.html#System-Management" rel="up" accesskey="u">系统管理</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Host-Identification-1"></span><h3 class="section">31.1主机识别</h3>

<p>本节说明如何识别程序在其上运行的特定系统。首先，让我们回顾一下计算机系统的各种命名方式，由于Internet的发展历史，这有点复杂。
</p>
<p>每个Unix系统（也称为主机）都有一个主机名，无论它是否连接到网络。以最简单的形式（就像在计算机网络成为问题之前使用的一样），它就像“ <samp>chicken</samp> '。
<span id="index-host-name"></span>
</p>
<p>但是，连接到Internet或任何类似网络的任何系统都遵循更严格的命名约定，这是域名系统（DNS）的一部分。在DNS中，每个主机名都由两部分组成： <span id="index-DNS"></span><span id="index-Domain-Name-System"></span>
</p>
<ol>
<li>主机名</li><li> <span id="index-hostname"></span>域名<span id="index-domain-name"></span>
</li></ol>

<p>您会注意到，“主机名”看起来很像“主机名”，但不是同一回事，而且人们经常错误地将整个主机名称为“域名”。
</p>
<p>在DNS中，完整的主机名正确地称为FQDN（完全合格域名），由主机名，句点和域名组成。域名本身通常具有多个由句点分隔的部分。因此，例如，系统的主机名可能是“ <samp>chicken</samp> ，其域名可能是“ <samp>ai.mit.edu</samp> '，因此其FQDN（即主机名）为' <samp>chicken.ai.mit.edu</samp> '。
<span id="index-FQDN"></span>
</p>
<p>但是，更令人困惑的是，DNS不是唯一需要知道计算机的名称空间。另一个名称空间是NIS（又名YP）名称空间。为了NIS的目的，还有另一个域名，称为NIS域名或YP域名。它与DNS域名没有任何关系。
<span id="index-YP"></span>
<span id="index-NIS"></span>
<span id="index-NIS-domain-name"></span>
<span id="index-YP-domain-name"></span>
</p>
<p>更令人困惑的是，在DNS中，多个FQDN可能引用同一系统。但是，总是有一个主机名是真实的主机名，它被称为规范FQDN。</p>
<p>在某些情况下，主机名称为“节点名”。
</p>
<p>有关DNS主机命名的更多信息，请参阅<a href="Host-Names.html#Host-Names">主机名</a> 。
</p>
<span id="index-hostname-1"></span>
<span id="index-hostid-1"></span>
<span id="index-unistd_002eh-26"></span>
<p>这些功能的原型出现在<samp>unistd.h</samp> 。
</p>
<p>程序<code>hostname</code> ， <code>hostid</code>和<code>domainname</code>通过调用这些函数来工作。
</p>
<dl>
<dt id="index-gethostname">函数： <em>int</em> <strong>gethostname</strong> <em>（char * <var>name</var> ，size_t <var>size</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数在数组中返回在其上调用系统的主机名<var>name</var> 。的<var>size</var>参数指定此数组的大小（以字节为单位）。请注意，这<em>不是</em> DNS主机名。如果系统参与DNS，则为FQDN（请参见上文）。
</p>
<p>返回值为<code>0</code>成功与<code>-1</code>失败。在GNU C库中， <code>gethostname</code>如果失败<var>size</var>还不够大那么您可以尝试使用更大的阵列。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>ENAMETOOLONG</code></dt>
<dd><p>的<var>size</var>参数小于主机名的大小加一。
</p></dd>
</dl>

<span id="index-sys_002fparam_002eh"></span>
<p>在某些系统上，有一个符号表示最大可能的主机名长度： <code>MAXHOSTNAMELEN</code> 。它在<samp>sys/param.h</samp> 。但是您不能指望它存在，因此处理故障并重试更加干净。
</p>
<p><code>gethostname</code>将主机名的开头存储在<var>name</var>即使主机名不完全适合。对于某些目的，截断的主机名就足够了。如果是这样，则可以忽略错误代码。
</p></dd></dl>

<dl>
<dt id="index-sethostname">函数： <em>int</em> <strong>sethostname</strong> <em>（const char * <var>name</var> ，size_t <var>length</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>sethostname</code>函数设置调用它的系统的主机名<var>name</var> ，长度为一个字符串<var>length</var> 。只允许特权进程执行此操作。
</p>
<p>通常<code>sethostname</code>在系统启动时仅被调用一次。通常，调用它的程序会将其设置为在文件中找到的值<code>/etc/hostname</code> 。
<span id="index-_002fetc_002fhostname"></span>
</p>
<p>确保将主机名设置为完整的主机名，而不仅仅是DNS主机名（请参见上文）。
</p>
<p>返回值为<code>0</code>成功与<code>-1</code>失败。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EPERM</code></dt>
<dd><p>此过程无法设置主机名，因为它没有特权。
</p></dd>
</dl>
</dd></dl>

<dl>
<dt id="index-getdomainnname">函数： <em>int</em> <strong>getdomainnname</strong> <em>（char * <var>name</var> ，size_t <var>length</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<span id="index-NIS-domain-name-1"></span>
<span id="index-YP-domain-name-1"></span>

<p><code>getdomainname</code>返回在其上被调用的系统的NIS（又名YP）域名。请注意，这不是更流行的DNS域名。用<code>gethostname</code> 。
</p>
<p>此功能的细节类似于<code>gethostname</code> ， 以上。
</p>
</dd></dl>

<dl>
<dt id="index-setdomainname">函数： <em>int</em> <strong>setdomainname</strong> <em>（const char * <var>name</var> ，size_t <var>length</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<span id="index-NIS-domain-name-2"></span>
<span id="index-YP-domain-name-2"></span>

<p><code>setdomainname</code>设置在其上被调用的系统的NIS（也称为YP）域名。请注意，这不是更流行的DNS域名。设置为<code>sethostname</code> 。
</p>
<p>此功能的细节类似于<code>sethostname</code> ， 以上。
</p>
</dd></dl>

<dl>
<dt id="index-gethostid">函数： <em>long int</em> <strong>gethostid</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT安全的hostid的环境设置| AS-Unsafe dlopen插件损坏了堆锁AC不安全锁损坏了内存fd |请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该函数返回程序正在运行的计算机的“主机ID”。按照惯例，这通常是该计算机的主要Internet IP地址，转换为<code>long int</code> <!-- /@w --> 。但是，在某些系统上，它是一个无意义但唯一的数字，每个数字都经过硬编码。
</p>
<p>这没有被广泛使用。它在BSD 4.2中出现，但在BSD 4.4中被删除。POSIX不需要它。</p>
<p>查询IP地址的正确方法是使用<code>gethostbyname</code>根据的结果<code>gethostname</code> 。有关IP地址的更多信息，请参阅<a href="Host-Addresses.html#Host-Addresses">主机地址</a> 。
</p></dd></dl>

<dl>
<dt id="index-sethostid">函数： <em>int</em> <strong>sethostid</strong> <em>（长整数<var>id</var> ）</em></dt>
<dd>
<p>初步： MT不安全const：hostid | AS不安全| AC不安全损坏的fd |请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>sethostid</code>函数将主机的“主机ID”设置为<var>id</var> 。只允许特权进程执行此操作。通常，它仅在系统启动时发生一次。
</p>
<p>建立系统主要IP地址的正确方法是配置IP地址解析器，以将该IP地址与系统的主机名关联，如<code>gethostname</code> 。例如，将系统记录放入<samp>/etc/hosts</samp> 。
</p>
<p>看到<code>gethostid</code>以上有关主机ID的更多信息。
</p>
<p>返回值为<code>0</code>成功与<code>-1</code>失败。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EPERM</code></dt>
<dd><p>此过程无法设置主机名，因为它没有特权。
</p>
</dd>
<dt><code>ENOSYS</code></dt>
<dd><p>操作系统不支持设置主机ID。在某些系统上，主机ID是对每台机器硬编码的无意义但唯一的数字。
</p></dd>
</dl>
</dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="Platform-Type.html#Platform-Type" rel="next" accesskey="n">平台类型</a> ，上一篇： <a href="System-Management.html#System-Management" rel="up" accesskey="u">系统管理</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>