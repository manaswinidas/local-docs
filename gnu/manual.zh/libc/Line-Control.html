<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>线路控制（GNU C库）</title>

<meta name="description" content="Line Control (The GNU C Library)">
<meta name="keywords" content="Line Control (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Low_002dLevel-Terminal-Interface.html#Low_002dLevel-Terminal-Interface" rel="up" title="Low-Level Terminal Interface">
<link href="Noncanon-Example.html#Noncanon-Example" rel="next" title="Noncanon Example">
<link href="BSD-Terminal-Modes.html#BSD-Terminal-Modes" rel="prev" title="BSD Terminal Modes">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Line-Control"></span><div class="header">
<p>下一个： <a href="Noncanon-Example.html#Noncanon-Example" rel="next" accesskey="n">Noncanon示例</a> ，上一个： <a href="BSD-Terminal-Modes.html#BSD-Terminal-Modes" rel="prev" accesskey="p">BSD终端模式</a> ，上： <a href="Low_002dLevel-Terminal-Interface.html#Low_002dLevel-Terminal-Interface" rel="up" accesskey="u">低级终端接口</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Line-Control-Functions"></span><h3 class="section">17.6线路控制功能</h3>
<span id="index-terminal-line-control-functions"></span>

<p>这些功能在终端设备上执行其他控制动作。关于终端访问，将它们视为输出：如果这些功能中的任何一个由其控制终端上的后台进程使用，则通常向该进程组中的所有进程发送一个消息。 <code>SIGTTOU</code>信号。例外是如果调用进程本身正在忽略或阻止<code>SIGTTOU</code>信号，在这种情况下将执行操作且不发送信号。请参阅<a href="Job-Control.html#Job-Control">作业控制</a> 。
</p>
<span id="index-break-condition_002c-generating"></span>
<dl>
<dt id="index-tcsendbreak">函数： <em>int</em> <strong>tcsendbreak</strong> <em>（int <var>filedes</var> ，int <var>duration</var> ）</em></dt>
<dd>
<p>初步： MT不安全种族：tcattr（filedes）/ bsd | AS不安全| AC不安全损坏/ bsd |请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此功能通过在与文件描述符关联的终端上传输零位流来生成中断条件<var>filedes</var> 。休息的时间由<var>duration</var>论点。如果为零，则持续时间在0.25到0.5秒之间。非零值的含义取决于操作系统。
</p>
<p>如果终端不是异步串行数据端口，则此功能不执行任何操作。
</p>
<p>返回值通常为零。如果发生错误，则返回值<em>-1</em> 。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>与终端设备无关。
</p></dd>
</dl>
</dd></dl>


<span id="index-flushing-terminal-output-queue"></span>
<span id="index-terminal-output-queue_002c-flushing"></span>
<dl>
<dt id="index-tcdrain">函数： <em>int</em> <strong>tcdrain</strong> <em>（int <var>filedes</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>tcdrain</code>函数等待，直到所有排队的输出到终端<var>filedes</var>已传送。
</p>
<p>此功能是多线程程序中的取消点。如果线程当时分配了一些资源（例如内存，文件描述符，信号量或其他内容），这将是一个问题<code>tcdrain</code>叫做。如果线程被取消，这些资源将保持分配状态，直到程序结束。为了避免这种情况<code>tcdrain</code>应该使用取消处理程序进行保护。
</p>
<p>返回值通常为零。如果发生错误，则返回值<em>-1</em> 。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>与终端设备无关。
</p>
</dd>
<dt><code>EINTR</code></dt>
<dd><p>传递信号中断了操作。请参阅<a href="Interrupted-Primitives.html#Interrupted-Primitives">中断的基元</a> 。
</p></dd>
</dl>
</dd></dl>


<span id="index-clearing-terminal-input-queue"></span>
<span id="index-terminal-input-queue_002c-clearing"></span>
<dl>
<dt id="index-tcflush">函数： <em>int</em> <strong>tcflush</strong> <em>（int <var>filedes</var> ，int <var>queue</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>tcflush</code>功能用于清除与终端文件关联的输入和/或输出队列<var>filedes</var> 。的<var>queue</var>参数指定要清除的队列，并且可以是以下值之一：</p>
<dl compact>
<dt><code>TCIFLUSH</code>
<span id="index-TCIFLUSH"></span>
</dt>
<dd>
<p>清除所有已接收但尚未读取的输入数据。
</p>
</dd>
<dt><code>TCOFLUSH</code>
<span id="index-TCOFLUSH"></span>
</dt>
<dd>
<p>清除所有已写入但尚未传输的输出数据。
</p>
</dd>
<dt><code>TCIOFLUSH</code>
<span id="index-TCIOFLUSH"></span>
</dt>
<dd>
<p>清除排队的输入和输出。
</p></dd>
</dl>

<p>返回值通常为零。如果发生错误，则返回值<em>-1</em> 。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>不是有效的文件描述符。
</p>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>与终端设备无关。
</p>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p>提供了一个错误的值<var>queue</var>论点。
</p></dd>
</dl>

<p>不幸的是这个函数被命名为<code>tcflush</code> ，因为“冲洗”一词通常用于另一种操作（等到所有输出传输完毕），然后将其用于丢弃输入或输出会造成混淆。不幸的是，这个名字<code>tcflush</code>来自POSIX，我们无法更改。
</p></dd></dl>

<span id="index-flow-control_002c-terminal"></span>
<span id="index-terminal-flow-control"></span>
<dl>
<dt id="index-tcflow">函数： <em>int</em> <strong>tcflow</strong> <em>（int <var>filedes</var> ，int <var>action</var> ）</em></dt>
<dd>
<p>初步： MT不安全种族：tcattr（filedes）/ bsd | AS不安全|交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>tcflow</code>功能用于在由以下命令指定的终端文件上执行与XON / XOFF流控制有关的操作<var>filedes</var> 。
</p>
<p>的<var>action</var>参数指定要执行的操作，并且可以是以下值之一：</p>
<dl compact>
<dt><code>TCOOFF</code>
<span id="index-TCOOFF"></span>
</dt>
<dd><p>暂停传输输出。
</p>
</dd>
<dt><code>TCOON</code>
<span id="index-TCOON"></span>
</dt>
<dd><p>重新开始传输输出。
</p>
</dd>
<dt><code>TCIOFF</code>
<span id="index-TCIOFF"></span>
</dt>
<dd><p>发送停止字符。
</p>
</dd>
<dt><code>TCION</code>
<span id="index-TCION"></span>
</dt>
<dd><p>传送一个开始字符。
</p></dd>
</dl>

<p>有关STOP和START字符的更多信息，请参见<a href="Special-Characters.html#Special-Characters">特殊字符</a> 。
</p>
<p>返回值通常为零。如果发生错误，则返回值<em>-1</em> 。下列<code>errno</code>为此功能定义了错误条件：</p>
<dl compact>
<dd><span id="index-EBADF-1"></span>
</dd>
<dt><code>EBADF</code></dt>
<dd><p>的<var>filedes</var>不是有效的文件描述符。
</p>
<span id="index-ENOTTY-1"></span>
</dd>
<dt><code>ENOTTY</code></dt>
<dd><p>的<var>filedes</var>与终端设备无关。
</p>
<span id="index-EINVAL-1"></span>
</dd>
<dt><code>EINVAL</code></dt>
<dd><p>提供了一个错误的值<var>action</var>论点。
</p></dd>
</dl>
</dd></dl>

<hr>
<div class="header">
<p>下一个： <a href="Noncanon-Example.html#Noncanon-Example" rel="next" accesskey="n">Noncanon示例</a> ，上一个： <a href="BSD-Terminal-Modes.html#BSD-Terminal-Modes" rel="prev" accesskey="p">BSD终端模式</a> ，上： <a href="Low_002dLevel-Terminal-Interface.html#Low_002dLevel-Terminal-Interface" rel="up" accesskey="u">低级终端接口</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>