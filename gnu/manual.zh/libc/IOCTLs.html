<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>IOCTL（GNU C库）</title>

<meta name="description" content="IOCTLs (The GNU C Library)">
<meta name="keywords" content="IOCTLs (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Low_002dLevel-I_002fO.html#Low_002dLevel-I_002fO" rel="up" title="Low-Level I/O">
<link href="File-System-Interface.html#File-System-Interface" rel="next" title="File System Interface">
<link href="Interrupt-Input.html#Interrupt-Input" rel="prev" title="Interrupt Input">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="IOCTLs"></span><div class="header">
<p>上一页： <a href="Interrupt-Input.html#Interrupt-Input" rel="prev" accesskey="p">中断输入</a> ，向上： <a href="Low_002dLevel-I_002fO.html#Low_002dLevel-I_002fO" rel="up" accesskey="u">低电平I / O</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Generic-I_002fO-Control-operations"></span><h3 class="section">13.20通用I / O控制操作</h3>
<span id="index-generic-i_002fo-control-operations"></span>
<span id="index-IOCTLs"></span>

<p>GNU系统可以根据一些文件原语来处理许多不同设备和对象上的大多数输入/输出操作- <code>read</code> ， <code>write</code>和<code>lseek</code> 。但是，大多数设备还具有一些不适合该模型的特殊操作。如：</p>
<ul>
<li>更改终端上使用的字符字体。

</li><li>告诉磁带系统倒带或快进。（由于它们不能以字节为单位移动， <code>lseek</code>不适用）。

</li><li>从驱动器弹出磁盘。

</li><li>播放CD-ROM驱动器中的音轨。

</li><li>维护网络的路由表。

</li></ul>

<p>尽管诸如插座和端子<a id="DOCF3" href="#FOOT3"><sup>3之</sup></a>类的一些这样的对象具有其自身的特殊功能，但是为所有这些情况创建功能是不切实际的。
</p>
<p>相反，这些次要操作（称为<em>IOCTL</em> ）被分配了代码编号，并通过<code>ioctl</code>功能，定义于<code>sys/ioctl.h</code> 。代码本身在许多不同的标头中定义。
</p>
<dl>
<dt id="index-ioctl">函数： <em>int</em> <strong>ioctl</strong> <em>（int <var>filedes</var> ，int <var>command</var> ，…）</em></dt>
<dd>
<p>初步： MT安全| AS安全交流安全请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>


<p>的<code>ioctl</code>函数执行通用I / O操作<var>command</var>上<var>filedes</var> 。
</p>
<p>通常存在第三个参数，可以是单个数字或指向结构的指针。该参数的含义，返回的值以及任何错误代码取决于所使用的命令。失败通常返回<em>-1</em> 。
</p>
</dd></dl>

<p>在某些系统上，不同设备使用的IOCTL共享相同的编号。因此，尽管使用不适当的IOCTL <em>通常</em>只会产生错误，但您不应尝试在未知设备上使用特定于设备的IOCTL。
</p>
<p>大多数IOCTL是特定于OS的和/或仅用于特殊的系统实用程序，因此不在本文档的范围之内。有关使用IOCTL的示例，请参阅<a href="Out_002dof_002dBand-Data.html#Out_002dof_002dBand-Data">带外数据</a> 。
</p>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a id="FOOT3" href="#DOCF3">（3）</a></h3>
<p>实际上，特定于终端的功能是在许多平台上使用IOCTL实现的。</p>
</div>
<hr>
<div class="header">
<p>上一页： <a href="Interrupt-Input.html#Interrupt-Input" rel="prev" accesskey="p">中断输入</a> ，向上： <a href="Low_002dLevel-I_002fO.html#Low_002dLevel-I_002fO" rel="up" accesskey="u">低电平I / O</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>