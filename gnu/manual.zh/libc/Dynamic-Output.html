<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>动态输出（GNU C库）</title>

<meta name="description" content="Dynamic Output (The GNU C Library)">
<meta name="keywords" content="Dynamic Output (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Formatted-Output.html#Formatted-Output" rel="up" title="Formatted Output">
<link href="Variable-Arguments-Output.html#Variable-Arguments-Output" rel="next" title="Variable Arguments Output">
<link href="Formatted-Output-Functions.html#Formatted-Output-Functions" rel="prev" title="Formatted Output Functions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Dynamic-Output"></span><div class="header">
<p>下一篇： <a href="Variable-Arguments-Output.html#Variable-Arguments-Output" rel="next" accesskey="n">可变参数输出</a> ，上一篇： <a href="Formatted-Output-Functions.html#Formatted-Output-Functions" rel="prev" accesskey="p">格式化输出函数</a> ，上一篇： <a href="Formatted-Output.html#Formatted-Output" rel="up" accesskey="u">格式化输出</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Dynamically-Allocating-Formatted-Output"></span><h4 class="subsection">12.12.8动态分配格式化输出</h4>

<p>本节中的功能执行格式化输出，并将结果放置在动态分配的内存中。
</p>
<dl>
<dt id="index-asprintf">函数： <em>int</em> <strong>asprintf</strong> <em>（char ** <var>ptr</var> ，const char * <var>template</var> ，…）</em></dt>
<dd>
<p>初步： MT安全区域| AS不安全堆| AC不安全的内存|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该功能类似于<code>sprintf</code> ，除了它会动态分配一个字符串（如<code>malloc</code> ;参见<a href="Unconstrained-Allocation.html#Unconstrained-Allocation">Unconstrained Allocation</a> ）来保存输出，而不是将输出放在预先分配的缓冲区中。的<var>ptr</var>参数应该是一个的地址<code>char *</code>对象，并成功调用<code>asprintf</code>在该位置存储指向新分配的字符串的指针。
</p>
<p>返回值是分配给缓冲区的字符数，如果发生错误，则返回零。通常，这意味着无法分配缓冲区。
</p>
<p>这是使用方法<code>asprintf</code>得到与<code>snprintf</code>示例，但更容易：</p>
<div class="example">
<pre class="example">/* <span class="roman">Construct a message describing the value of a variable</span>
   <span class="roman">whose name is <var>name</var> and whose value is <var>value</var>.</span> */
char *
make_message (char *name, char *value)
{
  char *result;
  if (asprintf (&amp;result, &quot;value of %s is %s&quot;, name, value) &lt; 0)
    return NULL;
  return result;
}
</pre></div>
</dd></dl>

<dl>
<dt id="index-obstack_005fprintf">功能： <em>int</em> <strong>obstack_printf</strong> <em>（struct obstack * <var>obstack</var> ，const char * <var>template</var> ，…）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：区域性语言| AS不安全的损坏堆| AC不安全的损坏的内存|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>该功能类似于<code>asprintf</code> ，除了它使用obstack <var>obstack</var>分配空间。请参阅<a href="Obstacks.html#Obstacks">Obstacks</a> 。
</p>
<p>字符被写到当前对象的末尾。要达到目标，您必须使用<code>obstack_finish</code> （请参阅“ <a href="Growing-Objects.html#Growing-Objects">增长对象”</a> ）。
</p></dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="Variable-Arguments-Output.html#Variable-Arguments-Output" rel="next" accesskey="n">可变参数输出</a> ，上一篇： <a href="Formatted-Output-Functions.html#Formatted-Output-Functions" rel="prev" accesskey="p">格式化输出函数</a> ，上一篇： <a href="Formatted-Output.html#Formatted-Output" rel="up" accesskey="u">格式化输出</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>