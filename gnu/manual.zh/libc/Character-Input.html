<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>字符输入（GNU C库）</title>

<meta name="description" content="Character Input (The GNU C Library)">
<meta name="keywords" content="Character Input (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="I_002fO-on-Streams.html#I_002fO-on-Streams" rel="up" title="I/O on Streams">
<link href="Line-Input.html#Line-Input" rel="next" title="Line Input">
<link href="Simple-Output.html#Simple-Output" rel="prev" title="Simple Output">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Character-Input"></span><div class="header">
<p>下一个： <a href="Line-Input.html#Line-Input" rel="next" accesskey="n">行输入</a> ，上一个： <a href="Simple-Output.html#Simple-Output" rel="prev" accesskey="p">简单输出</a> ，上： <a href="I_002fO-on-Streams.html#I_002fO-on-Streams" rel="up" accesskey="u">流</a>上的<a href="I_002fO-on-Streams.html#I_002fO-on-Streams" rel="up" accesskey="u">I / O</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Character-Input-1"></span><h3 class="section">12.8字符输入</h3>

<span id="index-reading-from-a-stream_002c-by-characters"></span>
<p>本节介绍用于执行面向字符的输入的功能。这些窄流函数在头文件中声明<samp>stdio.h</samp>并且宽字符函数在<samp>wchar.h</samp> 。
<span id="index-stdio_002eh-4"></span>
<span id="index-wchar_002eh-15"></span>
</p>
<p>这些函数返回一个<code>int</code>要么<code>wint_t</code>输入字符或特殊值的值（分别用于窄流函数和宽流函数） <code>EOF</code> / <code>WEOF</code> （通常为-1）。对于窄流函数，将这些函数的结果存储在类型变量中很重要<code>int</code>代替<code>char</code> ，即使您打算仅将其用作字符。储存<code>EOF</code>在一个<code>char</code>变量会将其值截断为字符的大小，以使其不再与有效字符“ <samp>(char) -1</samp> '。因此，请始终使用<code>int</code>对于的结果<code>getc</code>和朋友，并检查<code>EOF</code>通话后；一旦您确认结果不是<code>EOF</code> ，您可以确定它会适合在“ <samp>char</samp> '变量不丢失信息。
</p>
<dl>
<dt id="index-fgetc">函数： <em>int</em> <strong>fgetc</strong> <em>（FILE * <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数读取下一个字符作为<code>unsigned char</code>从流<var>stream</var>并返回其值，将其转换为<code>int</code> 。如果发生文件结束条件或读取错误， <code>EOF</code>而是返回。
</p></dd></dl>

<dl>
<dt id="index-fgetwc">函数： <em>wint_t</em> <strong>fgetwc</strong> <em>（文件* <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数从流中读取下一个宽字符<var>stream</var>并返回其值。如果发生文件结束条件或读取错误， <code>WEOF</code>而是返回。
</p></dd></dl>

<dl>
<dt id="index-fgetc_005funlocked">函数： <em>int</em> <strong>fgetc_unlocked</strong> <em>（FILE * <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：流|不安全AS损坏| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>fgetc_unlocked</code>功能相当于<code>fgetc</code>函数，但它不会隐式锁定流。
</p></dd></dl>

<dl>
<dt id="index-fgetwc_005funlocked">功能： <em>wint_t</em> <strong>fgetwc_unlocked</strong> <em>（文件* <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：流|不安全AS损坏| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>fgetwc_unlocked</code>功能相当于<code>fgetwc</code>函数，但它不会隐式锁定流。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>

<dl>
<dt id="index-getc">功能： <em>int</em> <strong>getc</strong> <em>（FILE * <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>就像<code>fgetc</code> ，但允许（通常）将其实现为可评估<var>stream</var>争论不止一次。 <code>getc</code>通常经过高度优化，因此通常是读取单个字符的最佳功能。
</p></dd></dl>

<dl>
<dt id="index-getwc">函数： <em>wint_t</em> <strong>getwc</strong> <em>（文件* <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>就像<code>fgetwc</code> ，但允许将其实现为评估<var>stream</var>争论不止一次。 <code>getwc</code>可以高度优化，因此通常这是读取单个宽字符的最佳功能。
</p></dd></dl>

<dl>
<dt id="index-getc_005funlocked">函数： <em>int</em> <strong>getc_unlocked</strong> <em>（FILE * <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：流|不安全AS损坏| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getc_unlocked</code>功能相当于<code>getc</code>函数，但它不会隐式锁定流。
</p></dd></dl>

<dl>
<dt id="index-getwc_005funlocked">功能： <em>wint_t</em> <strong>getwc_unlocked</strong> <em>（文件* <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：流|不安全AS损坏| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getwc_unlocked</code>功能相当于<code>getwc</code>函数，但它不会隐式锁定流。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>

<dl>
<dt id="index-getchar">函数： <em>int</em> <strong>getchar</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getchar</code>功能相当于<code>getc</code>与<code>stdin</code>作为的价值<var>stream</var>论点。
</p></dd></dl>

<dl>
<dt id="index-getwchar">函数： <em>wint_t</em> <strong>getwchar</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getwchar</code>功能相当于<code>getwc</code>与<code>stdin</code>作为的价值<var>stream</var>论点。
</p></dd></dl>

<dl>
<dt id="index-getchar_005funlocked">函数： <em>int</em> <strong>getchar_unlocked</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT不安全种族：stdin |不安全AS损坏| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getchar_unlocked</code>功能相当于<code>getchar</code>函数，但它不会隐式锁定流。
</p></dd></dl>

<dl>
<dt id="index-getwchar_005funlocked">函数： <em>wint_t</em> <strong>getwchar_unlocked</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT不安全种族：stdin |不安全AS损坏| AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>getwchar_unlocked</code>功能相当于<code>getwchar</code>函数，但它不会隐式锁定流。
</p>
<p>此函数是GNU扩展。
</p></dd></dl>

<p>这是使用以下命令输入的函数的示例<code>fgetc</code> 。使用它将同样有效<code>getc</code>相反，或使用<code>getchar ()</code>代替<code>fgetc (stdin)</code> <!-- /@w --> 。该代码对于宽字符流功能也将相同。
</p>
<div class="example">
<pre class="example">int
y_or_n_p (const char *question)
{
  fputs (question, stdout);
  while (1)
    {
      int c, answer;
      /* <span class="roman">Write a space to separate answer from question.</span> */
      fputc (' ', stdout);
      /* <span class="roman">Read the first character of the line.</span>
	 <span class="roman">This should be the answer character, but might not be.</span> */
      c = tolower (fgetc (stdin));
      answer = c;
      /* <span class="roman">Discard rest of input line.</span> */
      while (c != '\n' &amp;&amp; c != EOF)
	c = fgetc (stdin);
      /* <span class="roman">Obey the answer if it was valid.</span> */
      if (answer == 'y')
	return 1;
      if (answer == 'n')
	return 0;
      /* <span class="roman">Answer was invalid: ask for valid answer.</span> */
      fputs (&quot;Please answer y or n:&quot;, stdout);
    }
}
</pre></div>

<dl>
<dt id="index-getw">功能： <em>int</em> <strong>getw</strong> <em>（FILE * <var>stream</var> ）</em></dt>
<dd>
<p>初步： MT安全|不安全AS损坏| AC不安全锁损坏|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数读取一个单词（即<code>int</code> ）来自<var>stream</var> 。提供它是为了与SVID兼容。我们建议您使用<code>fread</code>相反（请参见<a href="Block-Input_002fOutput.html#Block-Input_002fOutput">块输入/输出</a> ）。不像<code>getc</code> ， 任何<code>int</code>值可能是有效的结果。 <code>getw</code>退货<code>EOF</code>当遇到文件结尾或错误时，但是无法将其与值为-1的输入字区分开。
</p></dd></dl>

<hr>
<div class="header">
<p>下一个： <a href="Line-Input.html#Line-Input" rel="next" accesskey="n">行输入</a> ，上一个： <a href="Simple-Output.html#Simple-Output" rel="prev" accesskey="p">简单输出</a> ，上： <a href="I_002fO-on-Streams.html#I_002fO-on-Streams" rel="up" accesskey="u">流</a>上的<a href="I_002fO-on-Streams.html#I_002fO-on-Streams" rel="up" accesskey="u">I / O</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>