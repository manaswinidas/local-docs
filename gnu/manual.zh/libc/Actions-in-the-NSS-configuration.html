<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>NSS配置中的操作（GNU C库）</title>

<meta name="description" content="Actions in the NSS configuration (The GNU C Library)">
<meta name="keywords" content="Actions in the NSS configuration (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="NSS-Configuration-File.html#NSS-Configuration-File" rel="up" title="NSS Configuration File">
<link href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" rel="next" title="Notes on NSS Configuration File">
<link href="Services-in-the-NSS-configuration.html#Services-in-the-NSS-configuration" rel="prev" title="Services in the NSS configuration">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="Actions-in-the-NSS-configuration"></span><div class="header">
<p>下一篇： <a href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" rel="next" accesskey="n">关于NSS配置文件的说明，上</a>一篇： <a href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" rel="next" accesskey="n">NSS配置中的</a> <a href="Services-in-the-NSS-configuration.html#Services-in-the-NSS-configuration" rel="prev" accesskey="p">服务</a> ，上一篇： <a href="NSS-Configuration-File.html#NSS-Configuration-File" rel="up" accesskey="u">NSS配置文件</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="Actions-in-the-NSS-configuration-1"></span><h4 class="subsection">29.2.2 NSS配置中的操作</h4>

<p>规范中的第二项为用户提供了对查找过程的更好控制。操作项放在两个服务名称之间，并括在方括号内。一般形式是</p>
<div class="display">
<pre class="display"><code>[</code> ( <code>!</code>? <var>status</var> <code>=</code> <var>action</var> )+ <code>]</code>
</pre></div>

<p>哪里</p>
<div class="example">
<pre class="example"><var>status</var> &rArr; success | notfound | unavail | tryagain
<var>action</var> &rArr; return | continue
</pre></div>

<p>关键字的大小写无关紧要。的<var>status</var>值是调用特定服务的查找功能的结果。他们的意思：</p>
<dl compact>
<dt>' <samp>success</samp> ' <span id="index-success"></span>
</dt>
<dd><p>没有错误发生，并返回了所需的条目。对此的默认操作是<code>return</code> 。
</p>
</dd>
<dt>' <samp>notfound</samp> ' <span id="index-notfound"></span>
</dt>
<dd><p>查找过程正常，但是找不到所需的值。默认动作是<code>continue</code> 。
</p>
</dd>
<dt>' <samp>unavail</samp> ' <span id="index-unavail"></span>
</dt>
<dd><span id="index-DNS-server-unavailable"></span>
<p>该服务永久不可用。这可能意味着所需的文件不可用，或者对于DNS，服务器不可用或不允许查询。默认动作是<code>continue</code> 。
</p>
</dd>
<dt>' <samp>tryagain</samp> ' <span id="index-tryagain"></span>
</dt>
<dd><p>该服务暂时不可用。这可能意味着文件已被锁定，或者服务器当前无法接受更多连接。默认动作是<code>continue</code> 。
</p></dd>
</dl>

<p>的<var>action</var>值表示：</p>
<dl compact>
<dt>' <samp>return</samp> ' <span id="index-return"></span>
</dt>
<dd>
<p>如果状态匹配，请在此服务规范处停止查找过程。如果有可用的条目，请将其提供给应用程序。如果发生错误，请向应用程序报告。如果是先前的' <samp>merge</samp>动作，将数据与以前的查找结果合并，如下所述。
</p>
</dd>
<dt>' <samp>continue</samp> ' <span id="index-continue"></span>
</dt>
<dd>
<p>如果状态匹配，则在下一个条目处继续查找过程，并丢弃当前查找的结果（以及所有合并的数据）。唯一的例外是“ <samp>initgroups</samp> '数据库和' <samp>success</samp> “状态，在哪里” <samp>continue</samp>像<code>merge</code>下面。
</p>
</dd>
<dt>' <samp>merge</samp> ' <span id="index-merge"></span>
</dt>
<dd>
<p>继续查找过程，保留当前的查找结果。此操作仅对“ <samp>success</samp> ' 状态。如果后续服务查找成功并且具有匹配的“ <samp>return</samp>根据规范，结果将合并，查找过程结束，并将合并的结果返回给应用程序。如果以下服务具有匹配的“ <samp>merge</samp>操作之后，查找过程将继续进行，并保留此查找和之前任何查找中的合并数据。
</p>
<p>之后<code>merge</code>因此，后续查询中的错误将被忽略，并将返回到目前为止收集的数据。
</p>
<p>' <samp>merge</samp> '仅适用于' <samp>success</samp> ' 状态。目前已针对“ <samp>group</samp> “数据库及其组成员字段” <samp>gr_mem</samp> '。如果为其他数据库指定，则会导致查找失败（如果<var>status</var>火柴）。
</p>
<p>处理时<samp>merge</samp> “为” <samp>group</samp>的成员资格，两个条目的组GID和名称必须相同。如果只有一个匹配，则行为是不确定的。
</p>
</dd>
</dl>

<p>如果我们有这样一条线</p>
<div class="example">
<pre class="example">ethers: nisplus [NOTFOUND=return] db files
</pre></div>

<p>这相当于</p>
<div class="example">
<pre class="example">ethers: nisplus [SUCCESS=return NOTFOUND=return UNAVAIL=continue
                 TRYAGAIN=continue]
        db      [SUCCESS=return NOTFOUND=continue UNAVAIL=continue
                 TRYAGAIN=continue]
        files
</pre></div>

<p>（除了它必须写在一行上）。这些操作的默认值通常是您想要的，只有在特殊情况下才需要更改。
</p>
<p>如果可选<code>!</code>放在<var>status</var>这意味着以下操作将用于所有状态，但<var>status</var>本身。即<code>!</code>与C语言（和其他语言）一样是否定的。
</p>
<p>在我们解释使该操作项成为必要的异常之前，请再说一遍：显然，在操作项之后添加另一个操作项是没有意义的。 <code>files</code>服务。由于没有其他服务，因此操作<em>始终</em>是<code>return</code> 。
</p>
<span id="index-nisplus_002c-and-completeness"></span>
<p>现在为什么<code>[NOTFOUND=return]</code>动作有用吗？要了解这一点，我们应该知道<code>nisplus</code>服务通常是完整的；即，如果一个条目在NIS +表中不可用，则在其他任何地方都不可用。这就是该行动项目所表达的：检查进一步的服务是没有用的，因为它们不会给我们带来结果。
</p>
<span id="index-nisplus_002c-and-booting"></span>
<span id="index-bootstrapping_002c-and-services"></span>
<p>如果由于计算机正在引导而无法使用NIS +服务，则情况将有所不同。在这种情况下，查找函数的返回值不是<code>notfound</code>但反而<code>unavail</code> 。正如您在上面的完整表格中所看到的：在这种情况下<code>db</code>和<code>files</code>使用服务。整洁，不是吗？系统管理员无需特别注意系统尚未完全准备好工作的时间（在启动或关闭或出现网络问题时）。
</p>

<hr>
<div class="header">
<p>下一篇： <a href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" rel="next" accesskey="n">关于NSS配置文件的说明，上</a>一篇： <a href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" rel="next" accesskey="n">NSS配置中的</a> <a href="Services-in-the-NSS-configuration.html#Services-in-the-NSS-configuration" rel="prev" accesskey="p">服务</a> ，上一篇： <a href="NSS-Configuration-File.html#NSS-Configuration-File" rel="up" accesskey="u">NSS配置文件</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>