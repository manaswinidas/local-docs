<html ><!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.30.

Copyright (C) 1993-2019 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>BSD Random（GNU C库）</title>

<meta name="description" content="BSD Random (The GNU C Library)">
<meta name="keywords" content="BSD Random (The GNU C Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Pseudo_002dRandom-Numbers.html#Pseudo_002dRandom-Numbers" rel="up" title="Pseudo-Random Numbers">
<link href="SVID-Random.html#SVID-Random" rel="next" title="SVID Random">
<link href="ISO-Random.html#ISO-Random" rel="prev" title="ISO Random">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="zh-Hans" >
<span id="BSD-Random"></span><div class="header">
<p>下一篇： <a href="SVID-Random.html#SVID-Random" rel="next" accesskey="n">SVID随机</a> ，上一篇： <a href="ISO-Random.html#ISO-Random" rel="prev" accesskey="p">ISO随机</a> ，上一篇： <a href="Pseudo_002dRandom-Numbers.html#Pseudo_002dRandom-Numbers" rel="up" accesskey="u">伪随机数</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<span id="BSD-Random-Number-Functions"></span><h4 class="subsection">19.8.2 BSD随机数函数</h4>

<p>本节描述了一组从BSD派生的随机数生成函数。将这些函数与GNU C库一起使用没有优势。我们仅支持BSD兼容性。
</p>
<p>这些功能的原型位于<samp>stdlib.h</samp> 。
<span id="index-stdlib_002eh-13"></span>
</p>
<dl>
<dt id="index-random">函数： <em>long int</em> <strong>随机</strong> <em>（无效）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>此函数返回序列中的下一个伪随机数。返回的值范围为<code>0</code>至<code>2147483647</code> 。
</p>
<p><strong>注意：</strong>暂时将此函数定义为返回一个<code>int32_t</code>指示返回值始终包含32位的值，即使<code>long int</code>更宽。该标准对它的要求有所不同。但是，用户必须始终注意32位限制。
</p></dd></dl>

<dl>
<dt id="index-srandom">功能： <em>无效的</em> <strong>随机性</strong> <em>（无符号int <var>seed</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>srandom</code>函数根据整数设置随机数生成器的状态<var>seed</var> 。如果您提供<var>seed</var>的价值<code>1</code> ，这将导致<code>random</code>重现默认的随机数集。
</p>
<p>要在每次程序运行时产生一组不同的伪随机数，请执行<code>srandom (time (0))</code> 。
</p></dd></dl>

<dl>
<dt id="index-initstate">函数： <em>char *</em> <strong>initstate</strong> <em>（无符号int <var>seed</var> ，字符* <var>state</var> ，size_t <var>size</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>initstate</code>函数用于初始化随机数生成器状态。争论<var>state</var>是一个数组<var>size</var>字节，用于保存状态信息。初始化基于<var>seed</var> 。大小必须介于8到256个字节之间，并且应为2的幂。越大<var>state</var>数组越好。
</p>
<p>返回值是状态信息数组的前一个值。您以后可以将此值用作<code>setstate</code>恢复该状态。
</p></dd></dl>

<dl>
<dt id="index-setstate">函数： <em>char *</em> <strong>setstate</strong> <em>（字符* <var>state</var> ）</em></dt>
<dd>
<p>初步： MT安全| AS不安全锁| AC不安全锁|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>setstate</code>功能恢复随机数状态信息<var>state</var> 。该参数必须是先前调用的结果<var>initstate</var>要么<var>setstate</var> 。
</p>
<p>返回值是状态信息数组的前一个值。您以后可以将此值用作<code>setstate</code>恢复该状态。
</p>
<p>如果函数失败，则返回值为<code>NULL</code> 。
</p></dd></dl>

<p>到目前为止，本节中介绍的四个功能均在所有线程共享的状态下工作。用户不能直接访问该状态，只能通过这些功能对其进行修改。这使得很难处理每个线程都应具有自己的伪随机数生成器的情况。
</p>
<p>GNU C库包含四个附加函数，这些函数包含状态作为显式参数，因此可以处理线程局部PRNG。除此之外，没有区别。实际上，已经讨论的四个功能是使用以下接口在内部实现的。
</p>
<p>的<samp>stdlib.h</samp>标头包含以下类型的定义：</p>
<dl>
<dt id="index-struct-random_005fdata">数据类型： <strong>struct random_data</strong></dt>
<dd>

<p>类型的对象<code>struct random_data</code>包含表示PRNG状态所必需的信息。尽管存在类型的完整定义，但应将类型视为不透明。
</p></dd></dl>

<p>修改状态的功能完全遵循已经描述的功能。
</p>
<dl>
<dt id="index-random_005fr">函数： <em>int</em> <strong>random_r</strong> <em>（结构random_data * restrict <var>buf</var> ，int32_t *限制<var>result</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：buf | AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>random_r</code>函数的行为与<code>random</code>函数，除了它使用和修改第一个参数所指向的对象中的状态（而不是全局状态）。
</p></dd></dl>

<dl>
<dt id="index-srandom_005fr">函数： <em>int</em> <strong>srandom_r</strong> <em>（无符号int <var>seed</var> ，struct random_data * <var>buf</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：buf | AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>srandom_r</code>函数的行为与<code>srandom</code>函数，除了使用和修改第二个参数所指向的对象中的状态（而不是全局状态）。
</p></dd></dl>

<dl>
<dt id="index-initstate_005fr">函数： <em>int</em> <strong>initstate_r</strong> <em>（无符号int <var>seed</var> ，char *限制<var>statebuf</var> ，size_t <var>statelen</var> ，struct random_data *限制<var>buf</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：buf | AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>initstate_r</code>函数的行为与<code>initstate</code>函数，除了使用和修改第四个参数所指向的对象中的状态（而不是全局状态）。
</p></dd></dl>

<dl>
<dt id="index-setstate_005fr">函数： <em>int</em> <strong>setstate_r</strong> <em>（char * restrict <var>statebuf</var> ，struct random_data *限制<var>buf</var> ）</em></dt>
<dd>
<p>初步： MT-Safe竞赛：buf | AS安全AC不安全的腐败|请参阅<a href="POSIX-Safety-Concepts.html#POSIX-Safety-Concepts">POSIX安全概念</a> 。
</p>

<p>的<code>setstate_r</code>函数的行为与<code>setstate</code>函数，除了它使用和修改第一个参数所指向的对象中的状态（而不是全局状态）。
</p></dd></dl>

<hr>
<div class="header">
<p>下一篇： <a href="SVID-Random.html#SVID-Random" rel="next" accesskey="n">SVID随机</a> ，上一篇： <a href="ISO-Random.html#ISO-Random" rel="prev" accesskey="p">ISO随机</a> ，上一篇： <a href="Pseudo_002dRandom-Numbers.html#Pseudo_002dRandom-Numbers" rel="up" accesskey="u">伪随机数</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Concept-Index.html#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>