<html ><head></head><body lang="zh-Hans" bgcolor="#FFFFFF"  text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">﻿<!--
This manual is for GNU tar (version
1.32, 4 February 2019), which creates and extracts files
from archives.

Copyright C 1992, 1994-1997, 1999-2001, 2003-2017 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual."

--><!-- Created on February, 23 2019 by texi2html 1.76 --><!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<title>GNU tar 1.32：GNU tar：一个存档器工具</title>

<meta name="description" content="GNU tar 1.32: GNU tar: an archiver tool">
<meta name="keywords" content="GNU tar 1.32: GNU tar: an archiver tool">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.76">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>






<a name="Top"></a>
<a name="SEC_Top"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="settitle"><acronym>GNU</acronym> tar：存档工具</h1>


<p>本手册适用于<acronym>GNU</acronym> <code>tar</code> （版本1.32，2019年2月4日），可从档案中创建和提取文件。
</p>
<p>版权所有©1992、1994-1997、1999-2001、2003-2017自由软件基金会，Inc.</p>
<blockquote><p>根据GNU自由文档许可版本1.3或自由软件基金会发布的任何更高版本，授予复制，分发和/或修改本文档的权限；不变部分为“ GNU通用公共许可证”，封面文本为“ A GNU手册”，后文文本如下（a）所示。许可证的副本包含在标题为“ GNU自由文档许可证”的部分中。
</p>
<p>（a）FSF的“后盖文本”为：“您可以自由复制和修改本GNU手册。”</p></blockquote>

<a name="IDX1"></a>
<a name="IDX2"></a>

<p>主菜单的第一部分列出了此Info文档中的主要节点。菜单的其余部分列出了所有较低级别的节点。
</p>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC1">1。介绍</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC8">2。教程简介<code>tar</code></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC32">3。调用<acronym>GNU</acronym> <code>tar</code></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC56">4。<acronym>GNU</acronym> <code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC94">5，执行备份和还原文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC105">6。选择文件和名称<code>tar</code></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC121">7。日期输入格式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC133">8。控制存档格式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC154">9。磁带和其他存档媒体</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC171">10。可靠性与安全性</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Appendices

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC181">A.变化</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC182">食谱</a></td><td>  </td><td align="left" valign="top">常用焦油配方</td></tr>
<tr><td align="left" valign="top"><a href="#SEC185">C.配置帮助摘要</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC186">D.修复快照文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC187">E. Tar内部</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC196">F.Genfile</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC200">G.自由软件需要自由文档</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC201">H. GNU免费文档许可证</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC203">一，命令行选项索引</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC204">J.索引</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
 --- The Detailed Node Listing ---

Introduction

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC2">1.1本书包含的内容</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC3">1.2一些定义</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC4">1.3什么<code>tar</code>是否</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC5">1.4如何<code>tar</code>档案被命名</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC6">1.5 <acronym>GNU</acronym> <code>tar</code> s</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC7">1.6报告错误或建议</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Tutorial Introduction to <code>tar</code>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC9">2.1本教程所做的假设</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC10">2.2文体惯例</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC11">2.3基础<code>tar</code>操作和选项</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC12">2.4三种最常用的操作</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC13">2.5两个常用选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC17">2.6如何创建档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC23">2.7如何列出档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC25">2.8如何从存档中提取成员</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC31">2.9在本手册中走得更远</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Two Frequently Used Options

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC14">的<samp>`--file'</samp>选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC15">的<samp>`--verbose'</samp>选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC16">获取帮助：使用<samp>`--help'</samp>选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
How to Create Archives

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC18">2.6.1为示例准备练习目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC19">2.6.2创建档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC20">2.6.3运行<samp>`--create'</samp>与<samp>`--verbose'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC21">2.6.4简短格式<samp>`create'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC22">2.6.5归档目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
How to List Archives

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC24">列出存储目录的内容</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
How to Extract Members from an Archive

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC26">2.8.1提取整个档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC27">2.8.2提取特定文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC28">2.8.3提取目录文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC29">2.8.4从不受信任的来源中提取档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC30">2.8.5将失败的命令</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Invoking <acronym>GNU</acronym> <code>tar</code>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC33">3.1概述<code>tar</code></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC34">3.2使用<code>tar</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC35">3.3三种选择样式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC40">3.4全部<code>tar</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC46">3.6获取<acronym>GNU</acronym> <code>tar</code>默认值</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC48">3.8检查点</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC49">3.9控制警告消息</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC54">3.10作业期间要求确认</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
The Three Option Styles

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC36">3.3.1长期权样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC37">3.3.2短期权样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC39">3.3.4混合选项样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
All <code>tar</code> Options

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC41">3.4.1操作</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC43">3.4.3短期期权交叉参考</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC44">3.4.4位置敏感选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
<acronym>GNU</acronym> <code>tar</code> Operations

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC57">4.1基本的<acronym>GNU</acronym> <code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC58">4.2高级<acronym>GNU</acronym> <code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC68">4.3所使用的选项<samp>`--create'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC72">4.4使用的选项<samp>`--extract'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC92">4.5备份选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC93">4.6展望未来：本手册的其余部分</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Advanced <acronym>GNU</acronym> <code>tar</code> Operations

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC59">4.2.1五大进阶<code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC63">4.2.3更新档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC67">4.2.6将存档成员与文件系统进行比较</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
How to Add Files to Existing Archives: <samp>`--append'</samp>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC61">4.2.2.1将文件追加到存档</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC62">4.2.2.2具有相同名称的多个成员</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Updating an Archive

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC64">4.2.3.1如何使用更新档案<samp>`--update'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Options Used by <samp>`--create'</samp>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC69">4.3.1覆盖文件元数据</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC70">4.3.2扩展文件属性</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC71">4.3.3忽略读取失败</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Options Used by <samp>`--extract'</samp>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC73">4.4.1帮助阅读档案的选项</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC76">4.4.2更改方式<code>tar</code>写文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC89">4.4.3应对稀缺资源</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Options to Help Read Archives

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC74">阅读完整记录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC75">忽略零块</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Changing How <code>tar</code> Writes Files

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC78">覆盖旧文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC79">保留旧文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC80">保留较新的文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC81">首先取消链接</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC82">递归取消链接</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC83">设置数据修改时间</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC84">设置访问权限</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC85">目录修改时间和权限</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC86">写入标准输出</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC87">写入外部程序</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC88">删除文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Coping with Scarce Resources

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC90">起始文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC91">相同顺序</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Performing Backups and Restoring Files

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC95">5.1使用<code>tar</code>执行完整转储</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC97">5.3备份级别</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC98">5.4设置备份和还原参数</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC103">5.5使用备份脚本</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC104">5.6使用还原脚本</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Setting Parameters for Backups and Restoration

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC99">5.4.1通用变量</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC100">5.4.2磁带控制</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC102">5.4.4 <tt>“备份规范”</tt>的示例文本</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Choosing Files and Names for <code>tar</code>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td><td>  </td><td align="left" valign="top">选择档案的名称</td></tr>
<tr><td align="left" valign="top"><a href="#SEC107">6.2选择存档成员</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC108">6.3从文件读取名称</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC110">6.4排除某些文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC112">6.5通配符模式和匹配</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC114">6.6引用会员名称</a></td><td>  </td><td align="left" valign="top">名称中特殊字符的引用方式</td></tr>
<tr><td align="left" valign="top"><a href="#SEC115">6.7修改文件和成员名称</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC117">6.9下降到目录</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC118">6.10跨越文件系统边界</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Reading Names from a File

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Excluding Some Files

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC111">使用问题<code>exclude</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Wildcards Patterns and Matching

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC113">控制模式匹配</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Crossing File System Boundaries

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC119">6.10.1更改工作目录</a></td><td>  </td><td align="left" valign="top">变更目录</td></tr>
<tr><td align="left" valign="top"><a href="#SEC120">6.10.2绝对文件名</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Date input formats

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC122">7.1通用日期语法</a></td><td>  </td><td align="left" valign="top">通用规则。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC123">7.2日历日期项目</a></td><td>  </td><td align="left" valign="top">1994年12月19日。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC124">7.3时间项目</a></td><td>  </td><td align="left" valign="top">晚上9:20。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC125">7.4时区项目</a></td><td>  </td><td align="left" valign="top">                <small>EST</small> ， <small>PDT</small> ， <small>GMT</small> 。</td></tr>
<tr><td align="left" valign="top"><a href="#SEC127">7.6星期几项目</a></td><td>  </td><td align="left" valign="top">星期一等。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td><td>  </td><td align="left" valign="top">2年前的下一个星期二。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC129">7.8日期字符串中的纯数字</a></td><td>  </td><td align="left" valign="top">19931219，1440。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC130">自大纪元7.9秒</a></td><td>  </td><td align="left" valign="top">@ 1078100502。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC131">7.10指定时区规则</a></td><td>  </td><td align="left" valign="top">TZ =“ America / New_York”，TZ =“ UTC0”。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td><td>  </td><td align="left" valign="top">Bellovin，Eggert，Salz，Berets等。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Controlling the Archive Format

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC134">8.1通过压缩使用更少的空间</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC138">8.2处理文件属性</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC139">8.3制作<code>tar</code>档案更便携</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC153">8.4比较<code>tar</code>和<code>cpio</code></a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Using Less Space through Compression

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Creating and Reading Compressed Archives

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC136">8.1.1.1将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Making <code>tar</code> Archives More Portable

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC140">8.3.1可移植名称</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC141">8.3.2符号链接</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC142">8.3.3硬链接</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC143">8.3.4旧的V7档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC144">8.3.5 Ustar存档格式</a></td><td>  </td><td align="left" valign="top">Ustar档案</td></tr>
<tr><td align="left" valign="top"><a href="#SEC145">8.3.6 <acronym>GNU</acronym>和旧的<acronym>GNU</acronym> <code>tar</code>格式</a></td><td>  </td><td align="left" valign="top">GNU和旧的GNU格式档案。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC146">8.3.7 <acronym>GNU</acronym> <code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a></td><td>  </td><td align="left" valign="top">                       <acronym>POSIX</acronym>档案</td></tr>
<tr><td align="left" valign="top"><a href="#SEC148">8.3.8校验和问题</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC149">8.3.9大或负值</a></td><td>  </td><td align="left" valign="top">大文件，负时间戳等</td></tr>
<tr><td align="left" valign="top"><a href="#SEC150">8.3.10如何使用其他方法提取GNU特定数据<code>tar</code>实作</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
<acronym>GNU</acronym> <code>tar</code> and <acronym>POSIX</acronym> <code>tar</code>

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC147">8.3.7.1控制扩展头关键字</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
How to Extract GNU-Specific Data Using Other <code>tar</code> Implementations

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC151">8.3.10.1提取在卷之间划分的成员</a></td><td>  </td><td align="left" valign="top">成员在卷之间分配</td></tr>
<tr><td align="left" valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td><td>  </td><td align="left" valign="top">稀疏成员</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Tapes and Other Archive Media

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC155">9.1设备选择和切换</a></td><td>  </td><td align="left" valign="top">设备选择和切换</td></tr>
<tr><td align="left" valign="top"><a href="#SEC156">9.2远程磁带服务器</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC157">9.3一些常见问题及其解决方案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC158">9.4封锁</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC161">9.5一卷磁带上有许多档案</a></td><td>  </td><td align="left" valign="top">一盘磁带上有许多档案</td></tr>
<tr><td align="left" valign="top"><a href="#SEC164">9.6使用多个磁带</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC169">9.8验证存储的数据</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC170">9.9写保护</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Blocking

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC159">9.4.1格式差异</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Many Archives on One Tape

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC162">9.5.1胶带位置和胶带标记</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC163">9.5.2 <code>mt</code>效用</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Using Multiple Tapes

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC166">9.6.2磁带文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC167">9.6.3将卷串联到单个存档中</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Tar Internals

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC188">基本的Tar格式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC189"><acronym>GNU</acronym>对存档格式的扩展</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC190">存储稀疏文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC194">增量快照文件的格式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC195">转储目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Storing Sparse Files

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC191">E.0.1旧的GNU格式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC192">E.0.2 PAX格式，版本0.0和0.1</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC193">E.0.3 PAX格式，版本1.0</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Genfile

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC197">F.1生成模式</a></td><td>  </td><td align="left" valign="top">文件生成模式。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC198">F.2状态模式</a></td><td>  </td><td align="left" valign="top">文件状态模式。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC199">F.3执行模式</a></td><td>  </td><td align="left" valign="top">同步执行模式。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Copying This Manual

</pre></th></tr><tr><td align="left" valign="top"><a href="#SEC201">H. GNU免费文档许可证</a></td><td>  </td><td align="left" valign="top">复制本手册的许可</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></tbody></table>

<hr size="1">
<a name="Introduction"></a>
<a name="SEC1"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC_Top" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC2" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[<<]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">1。介绍</h1>

<p><acronym>GNU</acronym> <code>tar</code>创建和操纵<em>档案馆</em>实际上许多其他文件的集合;该程序为用户提供了一种有组织的，系统的方法来控制大量数据。名称“ tar”最初来自短语“ Tape ARchive”，但是存档不必（而且如今通常不需要）存储在磁带上。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC2">1.1本书包含的内容</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC3">1.2一些定义</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC4">1.3什么<code>tar</code>是否</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC5">1.4如何<code>tar</code>档案被命名</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC6">1.5 <acronym>GNU</acronym> <code>tar</code> s</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC7">1.6报告错误或建议</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Book-Contents"></a>
<a name="SEC2"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC1" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC3" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC1" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">1.1本书包含的内容</h2>

<p>本章的第一部分向您介绍了贯穿本书的各种术语。它还告诉您谁在<acronym>GNU</acronym>上工作<code>tar</code>及其文档，以及应在哪里发送错误报告或评论。
</p>
<p>第二章是一个教程（请参阅<a href="#SEC8">教程入门）。 <code>tar</code></a> ），为刚开始使用的人提供了一个简短的介绍<code>tar</code> 。它的意思是独立的，不需要任何后续章节的阅读就可以理解。它以已经解释的信息为基础，以逻辑，渐进的顺序从一个主题移到另一个主题。
</p>
<p>尽管本教程的节奏和结构允许初学者学习如何使用<code>tar</code> ，而不仅仅是初学者。本教程说明了如何使用三个最常用的操作（ <samp>`create'</samp> ， <samp>`list'</samp>和<samp>`extract'</samp> ）以及两个常用选项（ <samp>`file'</samp>和<samp>`verbose'</samp> ）。其他章节并不经常参考本教程。但是，如果一节讨论的是基本概念的复杂变体，则可能会有对该基本概念的交叉引用。（包括本书在内的整本书都假定读者了解使用Unix型操作系统的一些基本概念；请参阅<a href="#SEC8">教程入门<code>tar</code></a> ）
</p>
<p>第三章介绍了剩余的五个操作以及有关使用的信息<code>tar</code>选项和选项语法。
</p>
<p>其他章节仅供参考。每章都介绍了有关特定主题的所有内容。
</p>
<p>其中一章（请参阅<a href="#SEC121">日期输入格式</a>一节）完整地存在于其他<acronym>GNU</acronym>手册中，并且大多是独立的。另外，本手册的一个部分（请参见<a href="#SEC188">基本Tar格式</a>部分）包含一个大引号，该引号直接取自<code>tar</code>资料来源。
</p>
<p>通常，在涉及相关选项的每个部分中，我们至少给长短（缩写）选项名称一次，以便新手读者会熟悉这两种样式。（一些选项没有简短版本，相关章节将对此进行说明。）
</p>
<hr size="6">
<a name="Definitions"></a>
<a name="SEC3"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC2" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC4" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC1" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">1.2一些定义</h2>

<p>的<code>tar</code>程序用于创建和操作<code>tar</code>档案。<em>归档文件</em>是一个包含多个文件内容的单个文件，同时仍在标识文件名，文件所有者等。（此外，档案记录访问权限，用户和组，字节大小以及数据修改时间。一些档案还会在每个档案目录中记录文件名，以及其他文件和目录信息。）您可以使用<code>tar</code>在指定目录中<em>创建</em>新档案。
</p>
<a name="IDX3"></a>
<a name="IDX4"></a>
<a name="IDX5"></a>
<a name="IDX6"></a>
<p>存档中的文件称为<em>成员</em> 。在本手册中，我们使用术语“ <em>文件”</em>仅指以常规方式可访问的文件（通过<code>ls</code> ， <code>cat</code> ，依此类推），术语“ <em>成员”</em>仅指档案馆的成员。同样， <em>文件名</em>是<em>文件名称</em> ，因为它位于文件系统中， <em>成员名称</em>是归档文件中的归档成员名称。
</p>
<a name="IDX7"></a>
<a name="IDX8"></a>
<p>术语<em>提取</em>是指将存档成员（或多个成员）复制到文件系统中的文件中的过程。提取档案的所有成员通常称为<em>提取档案</em> 。术语“ <em>解压缩”</em>也可以用来指代归档中许多或所有成员的提取。提取档案不会破坏档案的结构，就像创建档案不会破坏档案外部的文件副本一样。您也可以<em>列出</em>给定存档<em>中</em>的成员（通常认为这是将它们“打印”到标准输出或命令行中），或<em>将</em>成员<em>追加</em>到预先存在的存档中。所有这些操作都可以使用<code>tar</code> 。
</p>
<hr size="6">
<a name="What-tar-Does"></a>
<a name="SEC4"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC3" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC5" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC1" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">1.3什么<code>tar</code>是否</h2>

<p>的<code>tar</code>程序提供创建功能<code>tar</code>档案以及其他各种操作。例如，您可以使用<code>tar</code>在先前创建的存档中提取文件，存储其他文件，或更新或列出已存储的文件。
</p>
<p>原来， <code>tar</code>档案用于方便地将文件存储在磁带上。名字<code>tar</code>来自这种用途；它代表<code>t</code>猿<code>ar</code>细香葱。尽管有实用程序的名称， <code>tar</code>可以将其输出定向到可用的设备，文件或其他程序（使用管道）。 <code>tar</code>甚至可以访问远程设备或文件（作为存档）。
</p>
<p>您可以使用<code>tar</code>以多种方式存档。我们要强调其中一些：存储，备份和运输。
</p>
<p>请参阅<cite>下表，条目需要一些工作。</cite>
</p>
<dl compact>
<dt>存储</dt>
<dd><p>经常， <code>tar</code>归档文件用于存储相关文件，以便通过网络方便地传输文件。例如， <acronym>GNU</acronym>项目将捆绑的软件分发到<code>tar</code>档案，以便与特定程序（或一组相关程序）有关的所有文件都可以作为一个单元进行传输。
</p>
<p>磁带可以依次存储几个文件。但是，磁带上没有这些文件的名称。它只知道它们在磁带上的相对位置。将多个文件存储在一个磁带上并保留其名称的一种方法是创建一个<code>tar</code>存档。即使基本的传输机制可以像FTP一样跟踪名称，处理多个文件，目录和多个链接的麻烦也使得<code>tar</code>档案有用。
</p>
<p>存档文件也用于长期存储。您可以将其视为从现在到未来的运输。（这是一种科幻习语，您可以在时间和空间中移动；这里的想法是<code>tar</code>可用于在各个维度甚至时间上移动档案！）
</p>
</dd>
<dt>后备</dt>
<dd><p>因为存档创建者<code>tar</code>能够保留文件信息和目录结构， <code>tar</code>通常用于执行磁盘的完整和增量备份。备份将一组文件（可能与许多用户和项目有关）放在磁盘或磁带上。这可防止意外破坏这些文件中的信息。
<acronym>GNU</acronym> <code>tar</code>具有特殊功能，可用于对文件系统中的所有文件进行增量和完全转储。
</p>
</dd>
<dt>运输</dt>
<dd><p>您可以在一个系统上创建档案，将其传输到另一系统，然后在其中提取内容。这使您可以将一组文件从一个系统传输到另一个系统。
</p></dd>
</dl>

<hr size="6">
<a name="Naming-tar-Archives"></a>
<a name="SEC5"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC4" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC6" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC1" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">1.4如何<code>tar</code>档案被命名</h2>

<p>按照惯例， <code>tar</code>档案名称以结尾<samp>`.tar'</samp> 。这对于<code>tar</code>为了正确操作，但本手册遵循该约定，以便使读者习惯它并使示例更清楚。
</p>
<a name="IDX9"></a>
<a name="IDX10"></a>
<a name="IDX11"></a>
<p>人们经常提到<code>tar</code>存档为“ <code>tar</code>文件”，并将存档成员称为“文件”或“条目”。对于熟悉操作的人<code>tar</code> ，这不会造成任何困难。但是，在本手册中，我们始终引用“档案”和“档案成员”来学习使用<code>tar</code>对于新手来说更容易。
</p>
<hr size="6">
<a name="Authors"></a>
<a name="SEC6"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC5" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC7" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC1" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">1.5 <acronym>GNU</acronym> <code>tar</code> s</h2>

<p><acronym>GNU</acronym> <code>tar</code>最初由John Gilmore撰写，并被许多人修改。<acronym>GNU</acronym>增强功能由Jay Fenlason，Joy Kendall编写，整个程序包由Thomas Bushnell，n / BSG，FrançoisPinard，Paul Eggert和Sergey Poznyakoff进一步维护，并得到了众多用户的帮助。
</p>
<p>我们谨强调<code>tar</code>是一项集体工作，应归功于所有报告问题，提供解决方案和其他见解或分享想法和建议的人。可以在<acronym>GNU</acronym>的<tt>“感谢”</tt>文件中找到这些贡献者的令人印象深刻的部分清单<code>tar</code>分配。
</p>
<p>看到<cite>我想要提到所有这些名称，当然。但是，我不确定我是否想详细说明历史，至少不是印刷书籍。我只是不确定是否需要这样说。我会考虑一下。</cite>
</p>

<p>请参阅“ <cite>历史记录”比实际名称更重要，当然也更有趣。引用没有历史的名称将毫无意义。FP</cite>
</p>

<p>Jay Fenlason撰写了<acronym>GNU</acronym>草案<code>tar</code>手册，从约翰·吉尔莫尔（John Gilmore）的原始手册页中借用笔记。在版本1.11中已将其撤回。n / BSG的Thomas Bushnell和Amy Gorin为<acronym>GNU</acronym>编写了教程和手册<code>tar</code> 。FrançoisPinard通过从所有这些来源获得信息并将其合并在一起，将手册的1.11.8版放在一起。梅利莎·魏斯豪斯（Melissa Weisshaus）最终编辑并重新设计了该书，以创建1.12版。当前维护者Sergey Poznyakoff编辑了版本从1.14到1.32的书。
</p>
<p>对于版本1.12，Daniel Hagerty提供了大量技术咨询。特别是，他是《 <a href="#SEC94">执行备份和还原文件》</a>的主要作者。
</p>
<p>2003年7月， <acronym>GNU</acronym> <code>tar</code>已在savannah.gnu.org（请参阅<a href="http://savannah.gnu.org/projects/tar">http://savannah.gnu.org/projects/tar</a> ）上用于CVS，并且积极的开发和维护工作再次开始。目前<acronym>GNU</acronym> <code>tar</code>由Paul Eggert，Sergey Poznyakoff和Jeff Bailey维护。
</p>
<p>Sergey Poznyakoff添加了对<acronym>POSIX</acronym>存档的支持。
</p>
<hr size="6">
<a name="Reports"></a>
<a name="SEC7"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC6" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC1" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">1.6报告错误或建议</h2>

<p>如果您发现有关此程序或手册的问题或建议，请向<tt>`bug-tar@gnu.org'</tt>报告。
</p>
<p>报告错误时，请确保包含尽可能多的细节，以便重现它。请参阅<cite>更具体，我想将此节点详细说明为Emacs手册中的“错误报告”节点。</cite>
</p>

<hr size="6">
<a name="Tutorial"></a>
<a name="SEC8"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC7" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC9" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC1" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">2。教程简介<code>tar</code> </h1>

<p>本章将通过三个基本示例指导您<code>tar</code>操作： <samp>`--create'</samp> ， <samp>`--list'</samp>和<samp>`--extract'</samp> 。如果您已经知道如何使用其他版本的<code>tar</code> ，那么您可能不需要阅读本章。本章省略了有关如何<code>tar</code>作品。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC9">2.1本教程所做的假设</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC10">2.2文体惯例</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC11">2.3基础<code>tar</code>操作和选项</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC12">2.4三种最常用的操作</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC13">2.5两个常用选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC17">2.6如何创建档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC23">2.7如何列出档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC25">2.8如何从存档中提取成员</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC31">2.9在本手册中走得更远</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="assumptions"></a>
<a name="SEC9"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC8" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC10" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.1本教程所做的假设</h2>

<p>本章旨在让初学者学习<code>tar</code>慢慢来同时，我们将尝试涵盖这三个操作的所有基本方面。为了完成这两项任务，在阅读本手册以及您将使用的硬件之前，我们对您的知识进行了一些假设：</p>
<ul>
<li>在开始学习本教程之前，您应该了解术语“归档”和“归档成员”的含义（请参阅“ <a href="#SEC3">某些定义</a> ”部分）。另外，您应该了解有关Unix类型操作系统如何工作的知识，并且应该知道如何使用一些基本实用程序。例如，您应该知道如何创建，列出，复制，重命名，编辑和删除文件和目录。如何在目录之间切换；以及如何确定您在文件系统中的位置。您应该对目录结构以及如何根据文件所在的目录命名文件有一些基本的了解。您应该了解诸如标准输出和标准输入之类的概念，以及术语的各种定义<samp>`argument'</samp>均值以及相对和绝对文件名之间的差异。看到<cite>还有什么？</cite>


</li><li>本手册假定您正在自己的主目录中工作（除非另有说明）。在本教程中，您将创建一个目录来练习<code>tar</code>命令。当显示文件名时，我们将假定这些名称是相对于您的主目录的。例如，我的主目录是<tt>`/ home / fsf / melissa'</tt> 。我所有的示例都在该文件名命名的目录的子目录中。子目录称为<tt>`practice'</tt> 。

</li><li>通常，我们显示存在于硬盘上的目录（或可以写入或从其中使用）的存档示例。在大多数情况下，您可以将这些存档写入或在任何其他设备（例如磁带机）上使用。但是，本教程和下一章中的某些更高版本的示例在磁带机上不起作用。此外，使用磁带比使用硬盘要复杂得多。由于这些原因，本教程不涉及使用磁带机。有关使用的完整信息，请参见“ <a href="#SEC154">磁带和其他存档介质”</a>部分。 <code>tar</code>磁带驱动器存档。

<p>看到<cite>这是一个警察了。需要添加一些简单的磁带机信息。</cite>
</p>
</li></ul>

<hr size="6">
<a name="stylistic-conventions"></a>
<a name="SEC10"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC9" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC11" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.2文体惯例</h2>

<p>在示例中， <samp>`$'</samp>代表典型的shell提示。它在您应该键入的行之前；为了更清楚一点，这些行显示在<kbd>this font</kbd> ，而不是代表计算机响应的行；这些行显示在<code>this font</code> ，有时<samp>`like this'</samp> 。
</p>

<hr size="6">
<a name="basic-tar-options"></a>
<a name="SEC11"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC10" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC12" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.3基础<code>tar</code>操作和选项</h2>

<p><code>tar</code>可以使用各种各样的参数，这些参数指定并定义它将对特定文件集或归档文件执行的操作。参数的主要类型<code>tar</code>分为两类之一：操作和选项。
</p>
<p>一些论点属于称为<em>操作</em>的类;对于任何使用实例，都准许和要求其中之一<code>tar</code> ;你可能<em>不</em>指定不止一个。人们有时会谈论<em>操作模式</em> 。指定了指定操作的特定操作模式；总共有八种操作，因此有八种操作模式。
</p>
<p>其他参数属于称为<em>options</em>的类。您无需指定任何选项，并且一次可以指定多个（取决于您使用的方式） <code>tar</code>那时候）。一些选项的使用频率很高，对帮助您更仔细地键入命令非常有用，因此实际上是“必需”的。我们将在本章中讨论它们。
</p>
<p>您可以写大部分<code>tar</code>三种形式的操作和选项：长（助记符）形式，短形式和旧样式。一些操作和选项没有简短或“旧的”形式。但是，我们将在本教程中介绍的操作和选项都有相应的缩写。我们将适当地指示这些缩写，以使您习惯于看到它们。注意，“旧样式”选项形式存在于<acronym>GNU中</acronym> <code>tar</code>与Unix兼容<code>tar</code> 。在本书中，我们对这种编写选项和操作的方式进行了全面的讨论（请参阅“ <a href="#SEC38">旧选项样式”</a>一节），并讨论了其他两种书写选项的样式（请参见“ <a href="#SEC36">长选项样式”</a>一节和“ <a href="#SEC37">短选项样式”</a>一节）。
</p>
<p>在本教程的示例和文本中，我们通常使用长形式的操作和选项。但是“短”格式会产生相同的结果，并且可能会使输入变长<code>tar</code>命令更容易。例如，不要键入</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar --create --verbose --file=afiles.tar apple angst aspic</kbd>
</pre></td></tr></tbody></table>

<p>你可以输入</p><table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar -c -v -f afiles.tar apple angst aspic</kbd>
</pre></td></tr></tbody></table>

<p>甚至</p><table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar -cvf afiles.tar apple angst aspic</kbd>
</pre></td></tr></tbody></table>

<p>有关选项语法的更多信息，请参见<a href="#SEC58">Advanced <acronym>GNU。</acronym> <code>tar</code>运作</a> 。在本文的讨论中，当我们以长格式命名选项时，我们还会在括号中给出相应的短选项。
</p>
<p>术语“选项”有时会造成混淆，因为在某些通用类语句中，“操作”通常与实际的<em>可选</em> “选项”混为一谈。例如，我们刚刚谈到“选择和操作的简短形式”。但是，经验丰富<code>tar</code>用户通常通过诸如“短期和长期期权”之类的简称来指称这些。该术语还假定还包括“操作”。上下文将帮助您确定要使用的“选项”定义。
</p>
<p>同样，术语“命令”可能会造成混淆，因为它经常以两种不同的方式使用。人们有时会提到<code>tar</code> “命令”。一种<code>tar</code> <em>command</em>是用户输入的整个命令行，它告诉<code>tar</code>做什么-包括操作，选项和任何参数（文件名，管道，其他命令等）。但是，有时您还会听到“ <code>tar</code>命令”。像这样专门使用“命令”一词时，一个人通常是指<code>tar</code> <em>操作</em> ，而不是整个生产线。再次，使用上下文找出说话者打算表达的意思。
</p>
<hr size="6">
<a name="frequent-operations"></a>
<a name="SEC12"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC11" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC13" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.4三种最常用的操作</h2>

<p>这是三种最常用的操作（短格式和长格式），以及它们的含义的简要说明。本章的其余部分将详细介绍如何使用这些操作。我们将在下一章介绍其余的操作。
</p>
<dl compact>
<dt> <samp>`--create'</samp></dt>
<dt> <samp>`-c'</samp></dt>
<dd><p>创建一个新的<code>tar</code>存档。
</p></dd>
<dt> <samp>`--list'</samp></dt>
<dt> <samp>`-t'</samp></dt>
<dd><p>列出档案的内容。
</p></dd>
<dt> <samp>`--extract'</samp></dt>
<dt> <samp>`-x'</samp></dt>
<dd><p>从存档中提取一个或多个成员。
</p></dd>
</dl>

<hr size="6">
<a name="Two-Frequent-Options"></a>
<a name="SEC13"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC12" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC14" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.5两个常用选项</h2>

<p>了解如何运行<code>tar</code>在前面列出的三种操作模式下，您还需要了解如何使用其中两个选项<code>tar</code> ： <samp>`--file'</samp> （将存档文件作为参数）和<samp>`--verbose'</samp> 。（运行时通常<em>不需要</em>指定这两个选项中的任何一个<code>tar</code> ，但它们在使事情更清晰并帮助您避免错误方面非常有用。）
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC14">的<samp>`--file'</samp>选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC15">的<samp>`--verbose'</samp>选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC16">获取帮助：使用<samp>`--help'</samp>选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="file-tutorial"></a>
<a name="SEC14"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC13" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC15" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC13" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="unnumberedsubsec">的<samp>`--file'</samp>选项</h3>

<dl compact>
<dd><a name="IDX12"></a>
</dd>
<dt> <samp>`--file=<var>archive-name</var>'</samp></dt>
<dt> <samp>`-f <var>archive-name</var>'</samp></dt>
<dd><p>指定存档文件的名称。
</p></dd>
</dl>

<p>您可以为<samp>`--file=<var>archive-name</var>'</samp> （ <samp>`-f <var>archive-name</var>'</samp> ）选项<code>tar</code> ;此选项确定存档文件的名称， <code>tar</code>将继续工作。
</p>
<p>如果不指定此参数，则<code>tar</code>将检查环境变量<code>TAPE</code> 。如果设置，则其值将用作存档名称。除此以外， <code>tar</code>将使用在编译时确定的默认存档。通常它是标准输出或连接到计算机的某些物理磁带机（您可以通过运行以下命令验证默认值） <kbd>tar --show-defaults</kbd> ，请参阅<a href="#SEC46">获取<acronym>GNU</acronym></a>部分<a href="#SEC46"><code>tar</code>默认值</a> ）。如果没有连接磁带机，或者默认值没有意义，则<code>tar</code>将显示错误消息。该错误消息可能看起来大致类似于以下之一：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar: can't open /dev/rmt8 : No such device or address
tar: can't open /dev/rsmt0 : I/O error
</pre></td></tr></tbody></table>

<p>为避免混淆，我们建议您始终使用以下命令指定存档文件名<samp>`--file=<var>archive-name</var>'</samp> （ <samp>`-f <var>archive-name</var>'</samp> ）在编写您的<code>tar</code>命令。有关使用<samp>`--file=<var>archive-name</var>'</samp> （ <samp>`-f <var>archive-name</var>'</samp> ）选项，请参阅<a href="#SEC106">选择和命名存档文件</a> 。
</p>
<hr size="6">
<a name="verbose-tutorial"></a>
<a name="SEC15"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC14" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC16" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC13" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="unnumberedsubsec">的<samp>`--verbose'</samp>选项</h3>

<dl compact>
<dd><a name="IDX13"></a>
</dd>
<dt> <samp>`--verbose'</samp></dt>
<dt> <samp>`-v'</samp></dt>
<dd><p>将正在处理的文件显示为<code>tar</code>在跑。
</p></dd>
</dl>

<p><samp>`--verbose'</samp> （ <samp>`-v'</samp> ）显示有关运行结果的详细信息<code>tar</code> 。当结果可能不明显时，这尤其有用。例如，如果您想查看进度<code>tar</code>它将文件写入存档时，您可以使用<samp>`--verbose'</samp>选项。一开始，您可能会发现使用它很有用<samp>`--verbose'</samp>每时每刻;当你更习惯<code>tar</code> ，您可能会希望在某些时间使用它，而不是在其他时间使用。我们将使用<samp>`--verbose'</samp>有时会帮助您弄清楚，我们将使用和不使用两个示例<samp>`--verbose'</samp>展示差异。
</p>
<p>每个实例<samp>`--verbose'</samp>在命令行上，将详细级别增加一，因此，如果需要输出的更多详细信息，请指定两次。
</p>
<p>阅读档案时（ <samp>`--list'</samp> ， <samp>`--extract'</samp> ， <samp>`--diff'</samp> ）， <code>tar</code>默认情况下，仅打印要提取的成员的名称。使用<samp>`--verbose'</samp>将显示完整的<code>ls</code>样式成员列表。
</p>
<p>相反，在写档案时（ <samp>`--create'</samp> ， <samp>`--append'</samp> ， <samp>`--update'</samp> ）， <code>tar</code>默认情况下不打印文件名。所以，一个<samp>`--verbose'</samp>选项显示要添加到存档中的文件名，而两个<samp>`--verbose'</samp>选项启用完整列表。
</p>
<p>例如，要以详细模式创建档案：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cvf afiles.tar apple angst aspic</kbd>
apple
angst
aspic
</pre></td></tr></tbody></table>

<p>创建详细级别为2的相同档案可以提供：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cvvf afiles.tar apple angst aspic</kbd>
-rw-r--r-- gray/staff    62373 2006-06-09 12:06 apple
-rw-r--r-- gray/staff    11481 2006-06-09 12:06 angst
-rw-r--r-- gray/staff    23152 2006-06-09 12:06 aspic
</pre></td></tr></tbody></table>

<p>使用短选项或长选项都可以很好地工作。使用长格式，您只需将选项的助记符形式写出两次，如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --verbose --verbose &hellip;</kbd>
</pre></td></tr></tbody></table>

<p>请注意，每次都必须正确将连字符加倍。
</p>
<p>在本教程的后面，我们将使用<samp>`--verbose --verbose'</samp> 。
</p>
<p><a name="verbose-member-listing"></a>完整的输出包含六个字段：</p>
<ul>
<li>文件类型和权限以符号形式。这些显示格式与的第一列相同<code>ls -l</code>输出（请参阅<a href="fileutils.html#What-information-is-listed">format = verbose：（fileutils）</a> <cite>GNU文件实用程序的</cite> “详细列表”部分<a href="fileutils.html#What-information-is-listed">中列出了哪些信息</a> ）。

</li><li>所有者名称和组，以斜杠字符分隔。如果这些数据不可用（例如，列出一个<samp>`v7'</samp>格式存档），而是打印数字<acronym>ID</acronym>值。

</li><li>文件大小，以字节为单位。

</li><li>ISO 8601格式的文件修改日期。

</li><li>文件修改时间。

</li><li>文档名称。如果名称包含任何特殊字符（空格，换行符等），则使用所谓的<em>引用样式</em>以明确的形式显示它们。有关可用样式以及如何使用它们的详细讨论，请参见<a href="#SEC114">引用成员名称</a> 。

<p>根据文件类型的不同，名称后可以跟一些其他信息，如下表所述：</p>
<dl compact>
<dt> <samp>`-> <var>link-name</var>'</samp></dt>
<dd><p>文件或存档成员是<em>符号链接，</em>并且<var>link-name</var>是它链接到的文件的名称。
</p>
</dd>
<dt> <samp>`link to <var>link-name</var>'</samp></dt>
<dd><p>文件或存档成员是<em>硬链接，</em>并且<var>link-name</var>是它链接到的文件的名称。
</p>
</dd>
<dt> <samp>`--Long Link--'</samp></dt>
<dd><p>存档成员是旧的GNU格式的长链接。您通常不会遇到这种情况。
</p>
</dd>
<dt> <samp>`--Long Name--'</samp></dt>
<dd><p>存档成员是旧的GNU格式长名称。您通常不会遇到这种情况。
</p>
</dd>
<dt> <samp>`--Volume Header--'</samp></dt>
<dd><p>存档成员是GNU <em>卷标头</em> （请参见“ <a href="#SEC166">磁带文件”</a>部分）。
</p>
</dd>
<dt> <samp>`--Continued at byte <var>n</var>--'</samp></dt>
<dd><p>仅在多卷存档的开头遇到（请参阅<a href="#SEC164">使用多个磁带</a>部分）。该存档成员是上一卷的续篇。数字<var>n</var>给出原始文件拆分位置的偏移量。
</p>
</dd>
<dt>  <samp>`unknown file type <var>c</var>'</samp></dt>
<dd><p>未知类型的存档成员。 <var>c</var>是存档标题中的类型字符。如果您遇到这样的消息，则意味着您的归档文件包含专有成员类型<acronym>GNU</acronym> <code>tar</code>无法处理，或者档案已损坏。
</p></dd>
</dl>

</li></ul>

<p>例如，以下是包含以上解释的大多数特殊后缀的存档列表：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">V--------- 0/0            1536 2006-06-09 13:07 MyVolume--Volume Header--
-rw-r--r-- gray/staff   456783 2006-06-09 12:06 aspic--Continued at byte 32456--
-rw-r--r-- gray/staff    62373 2006-06-09 12:06 apple
lrwxrwxrwx gray/staff        0 2006-06-09 13:01 angst -&gt; apple
-rw-r--r-- gray/staff    35793 2006-06-09 12:06 blues
hrw-r--r-- gray/staff        0 2006-06-09 12:06 music link to blues
</pre></td></tr></tbody></table>

<hr size="6">
<a name="help-tutorial"></a>
<a name="SEC16"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC15" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC17" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC13" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="unnumberedsubsec">获取帮助：使用<samp>`--help'</samp>选项</h3>

<dl compact>
<dd><a name="IDX14"></a>
</dd>
<dt> <samp>`--help'</samp></dt>
<dd>
<p>的<samp>`--help'</samp>选择<code>tar</code>打印出非常简短的所有操作列表以及当前版本的可用选项<code>tar</code>在您的系统上可用。
</p></dd>
</dl>

<hr size="6">
<a name="create"></a>
<a name="SEC17"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC16" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC18" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.6如何创建档案</h2>

<p>的基本操作之一<code>tar</code>是<samp>`--create'</samp> （ <samp>`-c'</samp> ），您可以使用它创建一个<code>tar</code>存档。我们会解释<samp>`--create'</samp>首先，因为要了解其他操作，您会发现有一个可供练习的存档很有用。
</p>
<p>为了简化此过程，在本节中，您将首先创建一个包含三个文件的目录。然后，我们将向您展示如何创建<em>档案</em> （在新目录中）。目录和归档文件都是专门供您练习的。本章的其余部分和下一章将显示使用此目录和您将创建的文件的许多示例：其中一些文件可能是其他目录和其他归档文件。
</p>
<p>在此示例中，您将存档的三个文件分别称为<tt>`blues'</tt> ， <tt>`folk'</tt>和<tt>`jazz'</tt> 。归档文件称为<tt>“ collection.tar”</tt> 。
</p>
<p>本节将慢慢进行，详细说明如何使用<samp>`--create'</samp>在<code>verbose</code>模式，并显示使用短格式和长格式的示例。在本教程的其余部分以及下一章的示例中，我们将以更快的速度进行。本节的移动速度较慢，以使初学者可以了解<code>tar</code>作品。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC18">2.6.1为示例准备练习目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC19">2.6.2创建档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC20">2.6.3运行<samp>`--create'</samp>与<samp>`--verbose'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC21">2.6.4简短格式<samp>`create'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC22">2.6.5归档目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="prepare-for-examples"></a>
<a name="SEC18"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC17" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC19" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC17" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.6.1为示例准备练习目录</h3>

<p>为了继续进行本示例以及以后的示例，请创建一个新目录<tt>“ practice”，</tt>其中包含名为<tt>“ blues”</tt> ， <tt>“ folk”</tt>和<tt>“ jazz”的文件</tt> 。这些文件可以包含您喜欢的任何信息：理想情况下，它们应包含与其名称相关的信息，并且文件的长度可以不同。我们的示例假定<tt>'practice'</tt>是主目录的子目录。
</p>
<p>现在<code>cd</code>到名为<tt>“ practice”</tt>的目录；现在， <tt>“ practice”</tt>是您的<em>工作目录</em> 。（ <em>请注意</em> ：尽管此目录的完整文件名为<tt>`/ <var>homedir</var> / practice'</tt> ，在我们的示例中，我们将该目录称为<tt>'practice'</tt> ；的<var>homedir</var>假定。）
</p>
<p>通常，应通过运行以下命令检查要归档的文件是否存在（在工作目录中）： <code>ls</code> 。因为您刚刚创建了目录和文件，并且已经更改为该目录，所以您这次可能不需要这样做。
</p>
<p>确保工作目录中没有要使用的存档名称的文件非常重要（在这种情况下， <samp>`collection.tar'</samp> ），或者您不在乎其内容。每当您使用<samp>`create'</samp> ， <code>tar</code>将删除名为的文件的当前内容<samp>`--file=<var>archive-name</var>'</samp> （ <samp>`-f <var>archive-name</var>'</samp> ）（如果存在）。<code>tar</code>除非您指定执行此操作的选项，否则它不会告诉您是否要覆盖存档（有关如何执行此操作的信息，请参阅“ <a href="#SEC92">备份选项”</a>一节）。要将文件添加到现有存档中，您需要使用其他选项，例如<samp>`--append'</samp> （ <samp>`-r'</samp> ）;请参阅<a href="#SEC60">如何将文件添加到现有档案中： <samp>`--append'</samp></a>有关如何执行此操作的信息。
</p>
<hr size="6">
<a name="Creating-the-archive"></a>
<a name="SEC19"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC18" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC20" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC17" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.6.2创建档案</h3>

<p>要将文件<tt>“ blues”</tt> ， <tt>“ folk”</tt>和<tt>“ jazz”</tt>放入名为<tt>“ collection.tar”</tt>的档案中，请使用以下命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --file=collection.tar blues folk jazz</kbd>
</pre></td></tr></tbody></table>
<p><em>当使用长选项形式时</em> ，参数的顺序不是很重要，但是您应该始终记住将选项用作tar的第一个参数。例如，以下错误：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar blues -c folk -f collection.tar jazz</kbd>
tar: -c: Invalid blocking factor
Try 'tar --help' or 'tar --usage' for more information.
</pre></td></tr></tbody></table>
<p>产生错误消息的原因是<code>tar</code>始终将其第一个参数视为选项（或选项簇），即使它不是以破折号开头。这是<em>传统</em>或<em>旧的选项</em>样式，之所以这么称呼是因为， <code>tar</code>自1970年代tar存档器问世以来就一直使用它。此选项样式将在后面进行解释（请参阅“ <a href="#SEC38">旧选项样式”</a>部分），现在只需记住始终将选项作为第一个参数即可。
</p>
<p>话虽如此，您可以发出以下命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create folk blues --file=collection.tar jazz</kbd>
</pre></td></tr></tbody></table>

<p>但是，您会发现此顺序更难以理解。这就是为什么我们将按使命令最容易理解的顺序列出参数的原因（并且我们鼓励您在使用时也这样做<code>tar</code> ，以避免错误）。
</p>
<p>注意顺序<samp>`--file=collection.tar'</samp>被认为是<em>一个</em>论点。如果您用其他任何字符串替换<kbd>collection.tar</kbd> ，那么该字符串将成为您创建的存档文件的名称。
</p>
<p>当您开始使用简短格式时，选项的顺序变得更加重要。对于短格式，如果以错误的顺序键入命令（即使您以其他所有方式正确键入命令），也可能会得到意想不到的结果。因此，最好养成按内在顺序键入选项的习惯。请参阅<a href="#SEC21">带有<samp>`create'</samp></a> ，以获取更多信息。
</p>
<p>在此示例中，您按如下所示键入命令： <samp>`--create'</samp>是创建新档案（ <tt>“ collection.tar”</tt> ）的操作，并且<samp>`--file'</samp>是允许您为其选择名称的选项。该文件<tt>，'蓝色</tt> <tt>，'民间“</tt>和<tt>'爵士”，</tt>现在是存档的成员<tt>，`collection.tar”（</tt>它们是<em>文件名参数</em>给<samp>`--create'</samp>操作。请参阅“ <a href="#SEC105">选择文件和名称”部分<code>tar</code></a> ，以进行详细的讨论。）现在它们已在存档中，它们称为<em>存档成员</em> ，而不是文件。（请参阅部分<a href="#SEC3">成员</a> ）。
</p>
<p>创建档案时， <em>必须</em>指定要放置在档案中的文件。如果您未指定任何存档成员，则<acronym>GNU</acronym> <code>tar</code>会抱怨。
</p>
<p>如果现在列出工作目录的内容（ <code>ls</code> ），您将找到列出的存档文件以及之前看到的文件：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">blues   folk   jazz   collection.tar
</pre></td></tr></tbody></table>

<p>创建档案<samp>`collection.tar'</samp>没有销毁目录中文件的副本。
</p>
<p>请记住，如果您不指示操作， <code>tar</code>不会运行，并提示您输入一个。如果您没有命名任何文件， <code>tar</code>会抱怨。您必须对工作目录具有写权限，否则将无法在该目录中创建归档。
</p>
<p><em>注意</em> ：请勿尝试使用<samp>`--create'</samp> （ <samp>`-c'</samp> ）将文件添加到现有归档文件中；它将删除档案并写入一个新档案。使用<samp>`--append'</samp> （ <samp>`-r'</samp> ）。请参阅<a href="#SEC60">如何将文件添加到现有档案中： <samp>`--append'</samp></a> 。
</p>
<hr size="6">
<a name="create-verbose"></a>
<a name="SEC20"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC19" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC21" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC17" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.6.3运行<samp>`--create'</samp>与<samp>`--verbose'</samp> </h3>

<p>如果包括<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项， <code>tar</code>将列出正在运行的文件。在详细模式下， <code>create</code>上面的示例显示为：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --verbose --file=collection.tar blues folk jazz</kbd>
blues
folk
jazz
</pre></td></tr></tbody></table>
<p>这个例子就像我们展示的没有使用的例子<samp>`--verbose'</samp> ， 除了那个<code>tar</code>产生了剩余的</p>
<p>在本章的其余示例中，我们将经常使用<code>verbose</code>模式，以便我们可以显示操作或<code>tar</code>您原本不会看到的回复，对您来说很重要。
</p>
<hr size="6">
<a name="short-create"></a>
<a name="SEC21"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC20" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC22" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC17" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.6.4简短格式<samp>`create'</samp> </h3>

<p>正如我们之前所说， <samp>`--create'</samp> （ <samp>`-c'</samp> ）操作是的最基本用途之一<code>tar</code> ，您将无数次使用它。最终，您可能希望使用缩写形式（或“短”形式）的选项。<a href="#SEC35">“三种期权风格</a> ”中<a href="#SEC35">对</a>期权可以采取的三种不同形式进行了全面讨论;现在，这是前面的示例（包括<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项）看起来像使用简短的选项形式：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cvf collection.tar blues folk jazz</kbd>
blues
folk
jazz
</pre></td></tr></tbody></table>

<p>如您所见，无论您使用多头或空头期权表格，系统都会响应相同。
</p>
<p>看到<cite>我不喜欢这样写：</cite>简短和长选项格式之间的区别是，尽管使用简短格式时参数在选项后面的确切位置不再具体，但更容易引起混淆和犯错使用简短形式时。例如，假设您以以下方式尝试了上面的示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cfv collection.tar blues folk jazz</kbd>
</pre></td></tr></tbody></table>

<p>在这种情况下， <code>tar</code>将创建一个名为<tt>`v'</tt>的存档文件，其中包含<tt>`blues'</tt> ， <tt>`folk'</tt>和<tt>`jazz'文件</tt> ，因为<samp>`v'</samp>是最接近的“文件名” <samp>`-f'</samp>选项，因此将其视为所选的存档文件名。 <code>tar</code>将尝试将名为<tt>`collection.tar'</tt>的文件添加到<tt>`v'</tt>存档文件中；如果文件<tt>“ collection.tar”</tt>尚不存在， <code>tar</code>将报告一个错误，指示该文件不存在。如果文件<tt>“ collection.tar”</tt>已经存在（例如，您可能已经运行过上一个命令），则<code>tar</code>将此文件添加到存档中。因为<samp>`-v'</samp>选项未注册， <code>tar</code>不会在<samp>`verbose'</samp>模式，并且不会报告其进度。
</p>
<p>最终结果是您可能对所发生的事情感到困惑，并可能覆盖文件。为了进一步说明这一点，我们将向您展示以前使用短格式显示的示例的外观。
</p>
<p>这个例子</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create folk blues --file=collection.tar jazz</kbd>
</pre></td></tr></tbody></table>

<p>真是令人困惑。使用简写形式时，它变得更加如此：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c folk blues -f collection.tar jazz</kbd>
</pre></td></tr></tbody></table>

<p>将错误的字符串紧跟在<samp>`-f'</samp> ，但这样做可能会牺牲宝贵的数据。
</p>
<p>因此，我们建议您特别注意选项的顺序以及文件名和档案名的位置，特别是在使用简短选项形式时。没有用助记符的方式写出选项名称可能会影响您记住哪个选项执行的功能，并因此影响必须在何处放置不同的名称。
</p>
<hr size="6">
<a name="create-dir"></a>
<a name="SEC22"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC21" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC23" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC17" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.6.5归档目录</h3>

<p>您可以通过指定目录名称作为文件名参数来归档目录<code>tar</code> 。该目录中的文件将相对于工作目录进行存档，并且在提取存档时将重新创建目录及其内容。
</p>
<p>要归档目录，请首先移至其上级目录。如果您已按照本教程中的先前说明进行操作，则应输入：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cd ..</kbd>
$
</pre></td></tr></tbody></table>

<p>这会将您带入包含<tt>“ practice”</tt>的目录，即您的主目录。进入上级目录后，可以将子目录<tt>“ practice”</tt>指定为文件名参数。要将<tt>“练习”</tt>存储在新的存档文件<tt>“ music.tar”中</tt> ，请输入：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --verbose --file=music.tar practice</kbd>
</pre></td></tr></tbody></table>

<p><code>tar</code>应该输出：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">practice/
practice/blues
practice/folk
practice/jazz
practice/collection.tar
</pre></td></tr></tbody></table>
<p>请注意，这样创建的归档文件不在子目录<tt>“ practice”中</tt> ，而是在当前工作目录中，即当前目录中<code>tar</code>被调用。在尝试从其上级目录存档目录之前，应确保您具有对上级目录本身的写权限，而不仅是尝试使用其存档的目录<code>tar</code> 。例如，您可能无法通过调用将主目录存储在存档中<code>tar</code>从根目录；请参阅“ <a href="#SEC120">绝对文件名”</a>部分。（还要注意，原始存档文件<tt>`collection.tar'</tt>本身已被存档。 <code>tar</code>将接受任何文件作为要归档的文件，而不管其内容如何。提取<tt>“ music.tar”后</tt> ，存档文件<tt>“ collection.tar”</tt>将被重新写入文件系统。
</p>
<p>如果你给<code>tar</code>诸如</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --file=foo.tar .</kbd>
</pre></td></tr></tbody></table>

<p><code>tar</code>将报告<samp>`tar: ./foo.tar is the archive; not dumped'</samp> 。这是因为<code>tar</code>在将任何文件放入当前目录之前，在当前目录中创建档案<tt>“ foo.tar”</tt> 。然后，当<code>tar</code>尝试将所有文件添加到目录<tt>“。”中</tt>到档案，它注意到文件<tt>`./foo.tar'</tt>与档案<tt>`foo.tar'相同</tt> ，并跳过它。（将归档文件放入其中本身是没有意义的。）<acronym>GNU</acronym> <code>tar</code>在这种情况下将继续执行，并正常创建存档，但排除该文件除外。（ <em>请注意：的</em>其他实现<code>tar</code>可能不那么聪明；当发生这种情况时，它们将进入无限循环，因此除非您确定正在运行<acronym>GNU，</acronym>否则不应依赖此行为。 <code>tar</code> 。通常，明智的做法是始终将归档文件放置在要转储的目录之外。）
</p>
<hr size="6">
<a name="list"></a>
<a name="SEC23"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC22" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC24" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.7如何列出档案</h2>

<p>通常，您会发现自己想确切确定特定存档包含的内容。您可以使用<samp>`--list'</samp> （ <samp>`-t'</samp> ）操作，以获取当前在存档中显示的成员名称，以及在存档时文件的各种属性。例如，假设<tt>“实践”</tt>是您的工作目录，则可以使用以下命令检查您在上一节中创建的归档文件<tt>“ collection.tar”</tt> ，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=collection.tar</kbd>
</pre></td></tr></tbody></table>

<p>输出<code>tar</code>然后将是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">blues
folk
jazz
</pre></td></tr></tbody></table>

<p>请务必使用<samp>`--file=<var>archive-name</var>'</samp> （ <samp>`-f <var>archive-name</var>'</samp> ）选项与<samp>`--create'</samp> （ <samp>`-c'</samp> ）以指定档案名称。
</p>
<a name="IDX15"></a>
<a name="IDX16"></a>
<p>您可以在使用时指定一个或多个单独的成员名称作为参数<samp>`list'</samp> 。在这种情况下， <code>tar</code>将仅列出您标识的成员的名称。例如， <kbd>tar --list --file=collection.tar folk</kbd>只会打印<tt>`folk'</tt> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=collection.tar folk</kbd>
folk
</pre></td></tr></tbody></table>
<a name="IDX17"></a>
<a name="IDX18"></a>
<p>如果您使用<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项<samp>`--list'</samp> ， 然后<code>tar</code>将打印出让人想起的清单<samp>`ls -l'</samp> ，显示所有者，文件大小等。<a href="#verbose-member-listing">详细的成员清单</a>中<a href="#verbose-member-listing">详细</a>描述了此输出。
</p>
<p>如果你曾经用过<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）模式，上面的示例如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --verbose --file=collection.tar folk</kbd>
-rw-r--r-- myself/user      62 1990-05-23 10:55 folk
</pre></td></tr></tbody></table>
<a name="IDX19"></a>
<p><a name="listing-member-and-file-names"></a>重要的是要注意<kbd>tar --list --verbose</kbd>不一定与<kbd>tar --create --verbose</kbd>在创建档案时。这是因为<acronym>GNU</acronym> <code>tar</code> ，除非明确要求不要这样做，否则在将它们存储在归档文件之前，先从文件名中删除一些目录前缀（有关更多信息，请参见“ <a href="#SEC120">绝对文件名”</a>部分）。换句话说，在详细模式下， <acronym>GNU</acronym> <code>tar</code>创建档案时显示<em>文件名</em> ，列出档案时显示<em>成员名</em> 。考虑以下示例，从您的主目录运行：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --verbose --file practice.tar ~/practice</kbd>
tar: Removing leading '/' from member names
/home/myself/practice/
/home/myself/practice/blues
/home/myself/practice/folk
/home/myself/practice/jazz
/home/myself/practice/collection.tar
$ <kbd>tar --list --file practice.tar</kbd>
home/myself/practice/
home/myself/practice/blues
home/myself/practice/folk
home/myself/practice/jazz
home/myself/practice/collection.tar
</pre></td></tr></tbody></table>
<a name="IDX20"></a>
<p>这种默认行为有时会带来不便。您可以强制<acronym>GNU</acronym> <code>tar</code>通过提供创建存档时显示成员名称<samp>`--show-stored-names'</samp>选项。
</p>
<dl compact>
<dt> <samp>`--show-stored-names'</samp></dt>
<dd><p>创建档案时，打印成员名称（与<em>file</em>相对）。
</p></dd>
</dl>

<p>使用此选项，两个命令将产生相同的输出：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --verbose --show-stored-names \
           --file practice.tar ~/practice</kbd>
tar: Removing leading '/' from member names
home/myself/practice/
home/myself/practice/blues
home/myself/practice/folk
home/myself/practice/jazz
home/myself/practice/collection.tar
$ <kbd>tar --list --file practice.tar</kbd>
home/myself/practice/
home/myself/practice/blues
home/myself/practice/folk
home/myself/practice/jazz
home/myself/practice/collection.tar
</pre></td></tr></tbody></table>
<p>以来<code>tar</code>保留文件名，您要列出的文件名必须按照它们出现在归档文件中的方式指定（即，相对于创建归档文件的目录）。继续上面的示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=practice.tar folk</kbd>
tar: folk: Not found in archive
tar: Exiting with failure status due to previous errors
</pre></td></tr></tbody></table>
<p>由于没有名为<tt>`folk'的</tt>成员，只有一个名为<tt>`home / myself / folk'的</tt>成员，所以产生了错误消息。
</p>
<p>如果不确定确切的文件名，请使用<em>遍历模式</em> ，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=practice.tar --wildcards '*/folk'</kbd>
home/myself/practice/folk
</pre></td></tr></tbody></table>

<p>有关<a href="#SEC112">通配符模式</a>及其相关内容的详细讨论，请参见“ <a href="#SEC112">通配符模式和匹配”</a>部分。 <code>tar</code>命令行选项。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC24">列出存储目录的内容</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="list-dir"></a>
<a name="SEC24"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC23" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC25" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC23" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="unnumberedsubsec">列出存储目录的内容</h3>

<p>要获取有关已归档目录内容的信息，请结合使用目录名作为文件名参数<samp>`--list'</samp> （ <samp>`-t'</samp> ）。要找出文件属性，请包含<samp>`--verbose'</samp> （ <samp>`-v'</samp> ） 选项。
</p>
<p>例如，要查找存档文件<tt>“ music.tar”中</tt>目录<tt>“ practice”</tt>中的文件，请输入：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --verbose --file=music.tar practice</kbd>
</pre></td></tr></tbody></table>
<p><code>tar</code>回应：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">drwxrwxrwx myself/user       0 1990-05-31 21:49 practice/
-rw-r--r-- myself/user      42 1990-05-21 13:29 practice/blues
-rw-r--r-- myself/user      62 1990-05-23 10:55 practice/folk
-rw-r--r-- myself/user      40 1990-05-21 13:30 practice/jazz
-rw-r--r-- myself/user   10240 1990-05-31 21:49 practice/collection.tar
</pre></td></tr></tbody></table>
<p>当您使用目录名作为文件名参数时， <code>tar</code>作用于该目录中的所有文件（包括子目录）。
</p>
<hr size="6">
<a name="extract"></a>
<a name="SEC25"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC24" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC26" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.8如何从存档中提取成员</h2>

<p>创建档案只是工作的一半-如果您无法检索文件，则将文件存储在档案中毫无意义。从存档中检索成员以便再次将其用作未归档文件的操作称为<em>提取</em> 。要从存档中提取文件，请使用<samp>`--extract'</samp> （ <samp>`--get'</samp>要么<samp>`-x'</samp> ）操作。与<samp>`--create'</samp> ，请使用指定档案名称<samp>`--file'</samp> （ <samp>`-f'</samp> ） 选项。提取档案不会以任何方式修改档案；您可以根据需要多次提取它。
</p>
<p>使用<samp>`--extract'</samp> ，您可以提取整个档案或特定文件。这些文件可以是包含其他文件的目录，也可以不包含。与<samp>`--create'</samp> （ <samp>`-c'</samp> ）和<samp>`--list'</samp> （ <samp>`-t'</samp> ），则可以使用简短或长形式的操作，而不会影响性能。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC26">2.8.1提取整个档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC27">2.8.2提取特定文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC28">2.8.3提取目录文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC29">2.8.4从不受信任的来源中提取档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC30">2.8.5将失败的命令</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="extracting-archives"></a>
<a name="SEC26"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC25" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC27" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC25" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.8.1提取整个档案</h3>

<p>要提取整个档案，请仅指定档案文件名，不将单个文件名作为参数。例如，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xvf collection.tar</kbd>
</pre></td></tr></tbody></table>

<p>产生这个：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">-rw-r--r-- myself/user      28 1996-10-18 16:31 jazz
-rw-r--r-- myself/user      21 1996-09-23 16:44 blues
-rw-r--r-- myself/user      20 1996-09-23 16:44 folk
</pre></td></tr></tbody></table>
<hr size="6">
<a name="extracting-files"></a>
<a name="SEC27"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC26" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC28" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC25" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.8.2提取特定文件</h3>

<p>要提取特定的存档成员，请提供其确切的成员名称作为参数，如<samp>`--list'</samp> （ <samp>`-t'</samp> ）。如果您错误地删除了先前放置在存档<tt>“ collection.tar”</tt>中的一个文件（例如， <tt>“ blues”</tt> ），则可以在不更改存档结构的情况下从存档中提取文件。其内容将与您删除的原始文件<tt>“ blues”</tt>相同。
</p>
<p>首先，确保您位于<tt>“ practice”</tt>目录中，并在目录中列出文件。现在，删除文件， <samp>`blues'</samp> ，然后再次列出目录中的文件。
</p>
<p>现在，您可以像这样从存档文件<tt>“ collection.tar”中</tt>提取成员<tt>“ blues”</tt> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --extract --file=collection.tar blues</kbd>
</pre></td></tr></tbody></table>

<p>如果再次在目录中列出文件，则会看到文件<tt>“ blues”</tt>已还原，具有其原始权限，数据修改时间和所有者。 <a name="DOCF1" href="#FOOT1">（1） （</a>这些参数将是相同的那些，当你最初放置它在归档该文件有;但是， <em>不会</em>一直到归档构件作出的任何变化，你可能已经从文件系统删除该文件之前提出的，。 ）存档文件， <samp>`collection.tar'</samp> ，与提取之前的相同<samp>`blues'</samp> 。您可以通过运行来确认<code>tar</code>与<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p>
<p>请记住，与其他操作一样，指定确切的成员名称也很重要（有关更多示例，请参见<a href="#SEC30">将失败的命令</a>一节）。
</p>
<p>您可以将上述选项与<samp>`--to-stdout'</samp> （ <samp>`-O'</samp> ）选项（请参阅“ <a href="#SEC86">写入标准输出”部分</a> ）。
</p>
<p>如果你给<samp>`--verbose'</samp>选项，然后<samp>`--extract'</samp>将在提取存档成员时打印其名称。
</p>
<hr size="6">
<a name="extract-dir"></a>
<a name="SEC28"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC27" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC29" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC25" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.8.3提取目录文件</h3>

<p>提取属于归档文件的目录类似于提取其他文件。要注意的主要区别是，如果提取的目录与工作目录中已有的任何目录具有相同的名称，则提取的目录中的文件将被放置到相同名称的目录中。同样，如果现有目录中的文件与您提取的成员的名称相同，则提取的存档中的文件将替换工作目录（以及可能的子目录）中的文件。无论工作目录中的文件是否比提取的文件更新，都将发生这种情况（但是，存在更改此行为的特殊选项，请参见<a href="#SEC76">更改方式<code>tar</code>写入文件</a> ）。
</p>
<p>但是，如果使用目录名作为文件名的一部分存储文件，并且在提取文件时该目录在工作目录下不存在， <code>tar</code>将创建目录。
</p>
<p>我们可以演示如何使用<samp>`--extract'</samp>提取带有示例的目录文件。如果您不在的话，请转到<tt>“ practice”</tt>目录，然后删除<tt>“ folk”</tt>和<tt>“ jazz”文件</tt> 。然后，返回到父目录并提取档案文件<tt>“ music.tar”</tt> 。您可以提取整个档案，也可以仅提取刚删除的文件。要提取整个档案，请不要在档案名称<tt>“ music.tar”</tt>之后给出任何文件名作为参数。要仅提取您删除的文件，请使用以下命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xvf music.tar practice/folk practice/jazz</kbd>
practice/folk
practice/jazz
</pre></td></tr></tbody></table>

<p>如果要指定两个<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项， <code>tar</code>将会显示有关提取文件的更多详细信息，如以下示例所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xvvf music.tar practice/folk practice/jazz</kbd>
-rw-r--r-- me/user          28 1996-10-18 16:31 practice/jazz
-rw-r--r-- me/user          20 1996-09-23 16:44 practice/folk
</pre></td></tr></tbody></table>

<p>因为你创造了<tt>`实践</tt>目录<tt>“</tt>由归档<tt>`实际上，</tt>每个文件的文件名的一部分<tt>”</tt>目录<tt>'实践“</tt>你必须给<tt>'实践”</tt>作为文件名的一部分，当你要从中提取这些文件档案。
</p>
<hr size="6">
<a name="extracting-untrusted-archives"></a>
<a name="SEC29"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC28" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC30" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC25" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.8.4从不受信任的来源中提取档案</h3>

<p>从存档中提取文件可能会覆盖已经存在的文件。如果您收到来自不受信任来源的存档，则应创建一个新目录并将其提取到该目录中，这样就不必担心提取会覆盖现有文件之一。例如，如果<tt>“ untrusted.tar”</tt>来自Internet上的其他地方，而您不一定信任它的内容，则可以按以下方式提取它：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>mkdir newdir</kbd>
$ <kbd>cd newdir</kbd>
$ <kbd>tar -xvf ../untrusted.tar</kbd>
</pre></td></tr></tbody></table>
<p>在提取档案之前，使用以下方法检查档案内容也是一个好习惯<samp>`--list'</samp> （ <samp>`-t'</samp> ）选项，可能与<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）。
</p>
<hr size="6">
<a name="failing-commands"></a>
<a name="SEC30"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC29" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC31" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC25" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">2.8.5将失败的命令</h3>

<p>您可以尝试以下一些示例命令，这些命令将不起作用，以及为什么它们将不起作用。
</p>
<p>如果您尝试使用此命令，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xvf music.tar folk jazz</kbd>
</pre></td></tr></tbody></table>

<p>您将收到以下响应：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar: folk: Not found in archive
tar: jazz: Not found in archive
</pre></td></tr></tbody></table>

<p>这是因为，这些文件原本未<em>在</em>父目录<tt>'..”，</tt>在档案所在;它们位于<tt>“ practice”</tt>目录中，其文件名反映了这一点：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -tvf music.tar</kbd>
practice/blues
practice/folk
practice/jazz
</pre></td></tr></tbody></table>

<p>同样，如果您尝试使用此命令，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -tvf music.tar folk jazz</kbd>
</pre></td></tr></tbody></table>

<p>您会收到类似的回复。具有这些名称的成员不在存档中。为了从存档中提取文件，必须使用正确的成员名称或通配符。
</p>
<p>如果您忘记了存档中文件的正确名称，请使用<kbd>tar --list --verbose</kbd>正确列出它们。
</p>
<p>要提取名为<tt>“ practice / folk”</tt>的成员，必须指定</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --extract --file=music.tar practice/folk</kbd>
</pre></td></tr></tbody></table>

<p>还要注意，如上所述，将创建<tt>“ practice”</tt>目录（如果尚不存在）。有一些选项可让您剥离一定数量的前导目录组件（请参阅“ <a href="#SEC115">修改文件和成员名称”部分</a> ）。例如，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --extract --file=music.tar --strip-components=1 folk</kbd>
</pre></td></tr></tbody></table>

<p>会将文件<tt>“ folk”</tt>提取到当前工作目录中。
</p>
<hr size="6">
<a name="going-further"></a>
<a name="SEC31"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC30" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC8" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">2.9在本手册中走得更远</h2>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>有关<cite>在本手册其余部分中将要遇到的事情，</cite>请参见<cite>此处需要编写一个节点。</cite>
</p>

<hr size="6">
<a name="tar-invocation"></a>
<a name="SEC32"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC31" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC33" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC8" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">3。调用<acronym>GNU</acronym> <code>tar</code> </h1>

<p>本章是关于如何调用<acronym>GNU的</acronym> <code>tar</code>命令，在命令大纲（见<a href="#SEC33">的通用简介<code>tar</code></a> ）。有许多选项，以及用于编写它们的多种样式。一个强制选项指定了操作<code>tar</code>应该执行（请参阅“ <a href="#SEC41">操作”</a>部分），其他选项旨在详细说明应如何执行此操作（请参阅“ <a href="#SEC42"><code>tar</code>选项</a> ）。非选项参数并非总是以相同的方式解释，具体取决于操作是什么。
</p>
<p>在本章中，您将找到有关选项样式和编写规则的所有内容（请参见<a href="#SEC35">“三种选项样式”部分</a> ）。另一方面，其他章节将在其他地方全面介绍操作和选项。在这里，您将仅找到有关操作和选项的综合说明，以及指向其他部分的指针。 <code>tar</code>手册。
</p>
<p>一些选项是如此特别，本章将对它们进行全面介绍。他们有抑制正常运作的作用<code>tar</code>否则，它们会全局更改用户收到的有关正在发生的情况的反馈量。这些是<samp>`--help'</samp>和<samp>`--version'</samp> （请参见<a href="#SEC45"><acronym>GNU</acronym></a>部分<a href="#SEC45"><code>tar</code>文档</a> ）， <samp>`--verbose'</samp> （请参阅<a href="#SEC47">检查</a>部分<a href="#SEC47"><code>tar</code>进展</a> ）和<samp>`--interactive'</samp>选项（请参阅“ <a href="#SEC54">操作期间要求确认”部分</a> ）。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC33">3.1概述<code>tar</code></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC34">3.2使用<code>tar</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC35">3.3三种选择样式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC40">3.4全部<code>tar</code>选件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td><td>  </td><td align="left" valign="top">在哪里获得帮助。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC46">3.6获取<acronym>GNU</acronym> <code>tar</code>默认值</a></td><td>  </td><td align="left" valign="top">什么是默认值。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC48">3.8检查点</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC49">3.9控制警告消息</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC54">3.10作业期间要求确认</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC55">3.11运行外部命令</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Synopsis"></a>
<a name="SEC33"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC32" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC34" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.1概述<code>tar</code> </h2>

<p><acronym>GNU</acronym> <code>tar</code>程序作为以下之一被调用：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar <var>option</var>&hellip; [<var>name</var>]&hellip;</kbd>
<kbd>tar <var>letter</var>&hellip; [<var>argument</var>]&hellip; [<var>option</var>]&hellip; [<var>name</var>]&hellip;</kbd>
</pre></td></tr></tbody></table>
<p>第二种形式是使用旧选项时的形式。
</p>
<p>您可以使用<code>tar</code>将文件存储在存档中，从存档中提取文件以及执行其他类型的存档操作。的主要论点<code>tar</code> ，称为<em>操作</em> ，指定要执行的操作。其他论点<code>tar</code>都是<em>选择</em> ，它们改变了方式<code>tar</code>执行操作，或者指定文件或成员的文件名或归档成员<code>tar</code>要采取行动。
</p>
<p>实际上，您可以按任何顺序键入参数，即使在本手册中，选项始终位于其他参数之前，以使示例更易于理解。此外，说明主要操作模式的选项（ <code>tar</code>主命令）通常是第一个给出的。
</p>
<p>每<var>name</var>当主命令是以下命令之一时，以上提要中的解释为存档成员名称<samp>`--compare'</samp> （ <samp>`--diff'</samp> ， <samp>`-d'</samp> ）， <samp>`--delete'</samp> ， <samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）， <samp>`--list'</samp> （ <samp>`-t'</samp> ） 要么<samp>`--update'</samp> （ <samp>`-u'</samp> ）。命名存档成员时，必须提供存档中成员的确切名称，因为该名称由<samp>`--list'</samp> 。对于<samp>`--append'</samp> （ <samp>`-r'</samp> ）和<samp>`--create'</samp> （ <samp>`-c'</samp> ），这些<var>name</var>参数指定要放置在归档文件中的文件或目录层次结构的名称。在执行以下命令之前，这些文件或层次结构应已存在于文件系统中。 <code>tar</code>命令。
</p>
<p><code>tar</code>将相对文件名解释为相对于工作目录。 <code>tar</code>将使所有文件名相对（通过在归档或还原文件时删除前导斜杠），除非您另外指定（使用<samp>`--absolute-names'</samp>选项）。有关更多信息，请参见“ <a href="#SEC120">绝对文件名”</a>部分。 <samp>`--absolute-names'</samp> 。
</p>
<p>如果您将目录名指定为文件名或成员名，则<code>tar</code>递归作用于该目录下的所有文件和目录。例如，名称<tt>“ /”</tt>将文件系统中的所有文件标识为<code>tar</code> 。
</p>
<p>当使用shell globbing时，文件名和归档成员名之间的区别特别重要，这有时会使新用户感到困惑。有关<a href="#SEC112">通配</a>的更多信息，请参见“ <a href="#SEC112">通配符模式和匹配”</a>部分。问题在于，shell只能使用文件系统中的现有文件来进行遍历。只要<code>tar</code>本身可能会影响存档成员，因此在需要时，必须确保通配符达到<code>tar</code>无需先由shell解释。之前使用反斜杠<samp>`*'</samp>要么<samp>`?'</samp> ，或将整个参数放在引号之间通常就足够了。
</p>
<p>即使<var>name</var> s通常在命令行上指定，也可以使用以下命令从文件系统中的文本文件中读取<samp>`--files-from=<var>file-of-names</var>'</samp> （ <samp>`-T <var>file-of-names</var>'</samp> ） 选项。
</p>
<p>如果您不使用任何文件名参数， <samp>`--append'</samp> （ <samp>`-r'</samp> ）， <samp>`--delete'</samp>和<samp>`--concatenate'</samp> （ <samp>`--catenate'</samp> ， <samp>`-A'</samp> ）什么都不做，而<samp>`--create'</samp> （ <samp>`-c'</samp> ）通常会产生诊断并抑制<code>tar</code>执行。的其他操作<code>tar</code> （ <samp>`--list'</samp> ， <samp>`--extract'</samp> ， <samp>`--compare'</samp>和<samp>`--update'</samp> ）将对档案的全部内容进行处理。
</p>
<p><a name="exit-status"></a><a name="IDX21"></a><a name="IDX22"></a>除了成功退出， <acronym>GNU</acronym> <code>tar</code>可能由于多种原因而失败。某些原因与使用不当有关，即<code>tar</code>命令行编写不正确。稍后在处理存档或文件时可能会遇到错误。有些错误是可恢复的，在这种情况下，故障会延迟到<code>tar</code>已经完成了所有工作。某些错误使得继续处理没有意义，或者至少具有风险： <code>tar</code>然后立即中止处理。所有异常出口，无论是立即出口还是延迟出口，都应始终明确诊断<code>stderr</code> ，然后在一行中指出错误的性质。
</p>
<p><acronym>GNU</acronym>可能的退出代码<code>tar</code>下表中总结了：</p>
<dl compact>
<dt>0</dt>
<dd><p><samp>`Successful termination'</samp> 。
</p>
</dd>
<dt>1个</dt>
<dd><p><samp>`Some files differ'</samp> 。如果使用tar调用<samp>`--compare'</samp> （ <samp>`--diff'</samp> ， <samp>`-d'</samp> ）命令行选项，这意味着归档中的某些文件与磁盘上的文件不同（请参阅<a href="#SEC67">将归档成员与文件系统进行比较</a>一节）。如果给了焦油<samp>`--create'</samp> ， <samp>`--append'</samp>要么<samp>`--update'</samp>选项，此退出代码表示某些文件在存档时已更改，因此生成的存档不包含文件集的确切副本。
</p>
</dd>
<dt>2</dt>
<dd><p><samp>`Fatal error'</samp> 。这意味着发生了一些致命的，不可恢复的错误。
</p></dd>
</dl>

<p>如果<code>tar</code>已经调用了一个子流程，并且该子流程以非零的退出代码退出， <code>tar</code>退出与该代码。例如，如果发生这种情况<code>tar</code>被赋予了一些压缩选项（请参阅<a href="#SEC135">创建和读取压缩档案一节</a> ），并且外部压缩程序失败。另一个例子是<code>rmt</code>备份到远程设备期间发生故障（请参阅“ <a href="#SEC156">远程磁带服务器”</a>一节）。
</p>
<hr size="6">
<a name="using-tar-options"></a>
<a name="SEC34"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC33" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC35" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.2使用<code>tar</code>选件</h2>

<p><acronym>GNU</acronym> <code>tar</code>共有八种操作模式，可让您执行各种任务。每次使用时，都需要选择一种操作模式。 <code>tar</code>程序，只需指定一个，并且仅将一个操作作为参数<code>tar</code>命令（可以在<a href="#SEC12">“三个最常用的操作”</a>和<a href="#SEC59">“五个高级”中</a>找到相应的选项<a href="#SEC59"><code>tar</code>操作</a> ）。根据情况，您可能还希望自定义所选操作模式的行为。例如，您可能希望更改输出的外观，或者希望存档的文件格式可能需要您做一些特殊的事情才能使存档看起来正确。
</p>
<p>您可以自定义和控制<code>tar</code>跑步的表现<code>tar</code>具有一个或多个选项（例如<samp>`--verbose'</samp> （ <samp>`-v'</samp> ），我们在本教程中使用过）。正如我们在本教程中所说的那样， <em>选项</em>是<code>tar</code> （顾名思义）这是可选的。根据操作模式，您可以指定一个或多个选项。不同的选项会产生不同的效果，但是通常它们都会更改操作的详细信息，例如存档格式，存档名称或用户交互级别。有些选项对所有操作模式都有意义，而另一些选项仅对特定模式有意义。您可能会经常使用某些选项，而只会很少使用或根本不使用其他选项。（完整的选项列表请参见“ <a href="#SEC40">全部”</a>部分<a href="#SEC40">。 <code>tar</code>选项</a> 。）
</p>
<p><a name="TAR_005fOPTIONS"></a>的<code>TAR_OPTIONS</code>环境变量指定将默认选项放置在任何显式选项的前面。例如，如果<code>TAR_OPTIONS</code>是<samp>`-v --unlink-first'</samp> ， <code>tar</code>就像两个选项一样<samp>`-v'</samp>和<samp>`--unlink-first'</samp>在任何显式选项之前已指定。选项规格由空格分隔。反斜杠转义下一个字符，因此可用于指定包含空格或反斜杠的选项。
</p>
<p>注意<code>tar</code>选项区分大小写。例如，选项<samp>`-T'</samp>和<samp>`-t'</samp>是不同的;第一个需要一个参数来说明提供以下内容的文件名： <var>name</var> s，而第二个不需要参数，这是另一种写法<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p>
<p>除了八项操作外，还有许多选项可用于<code>tar</code> ，以及三种同时编写的样式：长（助记符）形式，短形式和旧样式。这些样式将在下面讨论。选项和操作都可以用这三种样式中的任何一种编写。
</p>
<p>请参阅<cite>此节点末尾的菜单。需要考虑本章的实际大纲；在合并第4章的内容之后，可能会这样做。</cite>
</p>

<hr size="6">
<a name="Styles"></a>
<a name="SEC35"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC34" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC36" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.3三种选择样式</h2>

<p>命令行调用有三种编写操作的方式和选项<code>tar</code> 。不同的风格是在历史的不同时期发展的<code>tar</code> 。这些样式将在下面显示，从最新到最旧。</p>
<p>一些选项必须带有参数<a name="DOCF2" href="#FOOT2">（2）</a> 。参数的<em>放置位置</em>通常取决于选择的选项样式。我们将在下面有关不同选项样式的部分中详细介绍与每种选项样式相关的特定信息。差异是细微的，但通常很重要。不正确的选项放置会导致您覆盖许多重要文件。我们敦促您注意这些差异，并仅使用对您最有意义的选项样式，直到您对其他样式感到满意为止。
</p>
<p>一些选项<em>可能</em>会引起争论。这样的选项最多可能具有长短形式，没有等效的旧样式。为此类选项指定参数的规则比指定强制参数的规则严格。请特别注意它们。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC36">3.3.1长期权样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC37">3.3.2短期权样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC39">3.3.4混合选项样式</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Long-Options"></a>
<a name="SEC36"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC35" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC37" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC35" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.3.1长期权样式</h3>

<p>每个选项至少有一个<em>长</em>名称（或<em>助记符</em> ），以连续的两个破折号开头，例如， <samp>`--list'</samp> 。长名称比其相应的短名称或旧名称更清晰。有时，一个长选项有很多同义的不同名称，例如<samp>`--compare'</samp>和<samp>`--diff'</samp> 。此外，长选项名称可以使用唯一的缩写。例如， <samp>`--cre'</samp>可以代替<samp>`--create'</samp>因为没有其他长选项以<samp>`cre'</samp> 。（找出这种情况的一种方法是尝试一下，看看会发生什么；如果特定的缩写可以代表多个选项， <code>tar</code>会告诉您该缩写不明确，并且您会知道该缩写不起作用。您也可以选择运行<samp>`tar --help'</samp>查看选项列表。请注意，如果您跑步<code>tar</code>如果您不想使用的选项的长名称带有唯一的缩写，则会陷入困境； <code>tar</code>将按命令执行命令。）
</p>
<p>长选项的含义是显而易见的，并且易于记住，并且其含义通常比相应的短选项的含义更容易辨认（请参见下文）。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --verbose --blocking-factor=20 --file=/dev/rmt0</kbd>
</pre></td></tr></tbody></table>

<p>给出了关于命令功能的相当不错的提示，即使对于那些不完全了解的人也是如此<code>tar</code> 。
</p>
<a name="IDX23"></a>
<a name="IDX24"></a>
<p>需要参数的长选项在选项名称后立即采用那些参数。有两种指定强制性参数的方法。可以用等号或任意数量的空格字符将其与选项名称分隔。例如， <samp>`--file'</samp>选项（说明名称<code>tar</code>存档）通过使用以下任何一种表示法，都被赋予了诸如<tt>“ archive.tar”之</tt>类的文件作为参数： <samp>`--file=archive.tar'</samp>要么<samp>`--file archive.tar'</samp> 。
</p>
<a name="IDX25"></a>
<a name="IDX26"></a>
<p>相反，必须始终使用等号引入可选参数。例如， <samp>`--backup'</samp>选项采用一个可选参数指定备份类型。它必须用作<samp>`--backup=<var>backup-type</var>'</samp> 。
</p>
<hr size="6">
<a name="Short-Options"></a>
<a name="SEC37"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC36" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC38" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC35" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.3.2短期权样式</h3>

<p>大多数选项还具有<em>简短的选项</em>名称。简短选项以单个破折号开头，后跟单个字符，例如， <samp>`-t'</samp> （相当于<samp>`--list'</samp> ）。形式在功能上完全相同；它们是可互换的。
</p>
<p>短选项名称的键入速度比长选项名称的键入速度更快。
</p>
<a name="IDX27"></a>
<a name="IDX28"></a>
<p>需要参数的简短选项在选项之后紧跟其参数，通常用空格隔开。也可以在短选项名称后紧接着插入参数，而无需插入空格。例如，您可能会写<samp>`-f archive.tar'</samp>要么<samp>`-farchive.tar'</samp>而不是使用<samp>`--file=archive.tar'</samp> 。都<samp>`--file=<var>archive-name</var>'</samp>和<samp>`-f <var>archive-name</var>'</samp>表示用于指示特定存档的选项，此处名为<tt>`archive.tar'</tt> 。
</p>
<a name="IDX29"></a>
<a name="IDX30"></a>
<p>带有可选参数的简短选项在选项字母后紧跟其参数， <em>而没有任何空格字符</em> 。
</p>
<p>卖空期权的字母可能会聚在一起，但是您不需要这样做（与旧期权相比；请参见下文）。如果将短期权集合在一起，则对它们全部使用一个（单个）破折号，例如， <samp>`<code>tar</code> -cvf'</samp> 。仅允许此类集合中的最后一个选项具有参数<a name="DOCF3" href="#FOOT3">（3）</a> 。
</p>
<p>当选项分开时，每个选项的参数都需要一个参数，该参数直接跟在该选项之后，与Unix程序一样。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -v -b 20 -f /dev/rmt0</kbd>
</pre></td></tr></tbody></table>
<p>如果您对短期权的位置进行重新排序，请确保移动属于它们的所有参数。如果您未正确移动参数，则可能最终会覆盖文件。
</p>
<hr size="6">
<a name="Old-Options"></a>
<a name="SEC38"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC37" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC39" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC35" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.3.3旧选项样式</h3>

<p>据我们所知<code>tar</code> <acronym>GNU</acronym>和非<acronym>GNU</acronym>程序都支持<em>旧选项</em> ：即，如果第一个参数不是以<samp>`-'</samp> ，假定指定选项字母。<acronym>GNU</acronym> <code>tar</code>支持旧选项不仅是出于历史原因，而且还因为很多人已经习惯了。如果第一个参数不是以破折号开头，则说明是旧的选项样式，而不是短的选项样式。旧选项的解码方式有所不同。
</p>
<p>像短期权一样，旧期权也是单个字母。但是，旧选项必须一起写成一个单独的集合，并且空格之间不能有空格或破折号。这组字母必须是第一个出现在命令行之后的字母<code>tar</code>程序名称和一些空格；旧选项不能出现在其他任何地方。旧期权的字母与相应的短期期权的字母完全相同。例如，旧选项<samp>`t'</samp>与短选项相同<samp>`-t'</samp> ，因此与long选项相同<samp>`--list'</samp> 。例如，命令<samp>`tar cv'</samp>指定选项<samp>`-v'</samp>除了操作<samp>`-c'</samp> 。
</p>
<a name="IDX31"></a>
<a name="IDX32"></a>
<p>当需要参数的选项与命令一起给出时，所有关联的参数都以与选项相同的顺序出现。因此，先前给出的示例也可以按旧样式编写，如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar cvbf 20 /dev/rmt0</kbd>
</pre></td></tr></tbody></table>

<p>这里， <samp>`20'</samp>是<samp>`-b'</samp>和<samp>`/dev/rmt0'</samp>是<samp>`-f'</samp> 。
</p>
<p>旧式语法可能使匹配选项字母及其对应的参数变得困难，并且经常造成混淆。在命令中<samp>`tar cvbf 20 /dev/rmt0'</samp> ， 例如， <samp>`20'</samp>是为<samp>`-b'</samp> ， <samp>`/dev/rmt0'</samp>是为<samp>`-f'</samp>和<samp>`-v'</samp>没有相应的参数。即使使用像这样的简短选项<samp>`tar -c -v -b 20 -f /dev/rmt0'</samp>更清晰，将所有参数放在它们所属的选项旁边。
</p>
<p>如果要对旧选项参数中的字母重新排序，请确保适当地对任何对应的参数重新排序。
</p>
<p>这种古老的写作方式<code>tar</code>选项甚至会让有经验的用户感到惊讶。例如，两个命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar cfz archive.tar.gz file</kbd>
<kbd>tar -cfz archive.tar.gz file</kbd>
</pre></td></tr></tbody></table>

<p>完全不同。第一个示例使用<tt>“ archive.tar.gz”</tt>作为option的值<samp>`f'</samp>并识别该选项<samp>`z'</samp> 。但是，第二个示例使用<tt>“ z”</tt>作为选项的值<samp>`f'</samp> -可能不是预期的。
</p>
<p>第二个示例可以通过多种方式进行更正，其中以下等效项是等效的：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar -czf archive.tar.gz file</kbd>
<kbd>tar -cf archive.tar.gz -z file</kbd>
<kbd>tar cf archive.tar.gz -z file</kbd>
</pre></td></tr></tbody></table>
<hr size="6">
<a name="Mixing"></a>
<a name="SEC39"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC38" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC40" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC35" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.3.4混合选项样式</h3>

<p>可以将所有三种样式混合在一起<code>tar</code>命令，只要完全遵守每种样式的规则<a name="DOCF4" href="#FOOT4">（4）即可</a> 。可以将旧样式选项和现代样式选项中的一个混合在一起<code>tar</code>命令。但是，必须遵循旧选项的规则，将旧样式选项仅作为第一个参数引入（旧选项必须直接出现在<code>tar</code>命令和一些空格）。只有在收集了所有旧选项的参数之后，才能给出现代选项。如果不遵守此规则，则现代选项可能会错误地解释为旧样式选项之一的参数值。
</p>
<p>例如，以下所有命令都是完全等效的，它们说明了选项样式的许多组合和顺序。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar --create --file=archive.tar</kbd>
<kbd>tar --create -f archive.tar</kbd>
<kbd>tar --create -farchive.tar</kbd>
<kbd>tar --file=archive.tar --create</kbd>
<kbd>tar --file=archive.tar -c</kbd>
<kbd>tar -c --file=archive.tar</kbd>
<kbd>tar -c -f archive.tar</kbd>
<kbd>tar -c -farchive.tar</kbd>
<kbd>tar -cf archive.tar</kbd>
<kbd>tar -cfarchive.tar</kbd>
<kbd>tar -f archive.tar --create</kbd>
<kbd>tar -f archive.tar -c</kbd>
<kbd>tar -farchive.tar --create</kbd>
<kbd>tar -farchive.tar -c</kbd>
<kbd>tar c --file=archive.tar</kbd>
<kbd>tar c -f archive.tar</kbd>
<kbd>tar c -farchive.tar</kbd>
<kbd>tar cf archive.tar</kbd>
<kbd>tar f archive.tar --create</kbd>
<kbd>tar f archive.tar -c</kbd>
<kbd>tar fc archive.tar</kbd>
</pre></td></tr></tbody></table>
<p>另一方面，以下命令与先前的命令<em>不</em>等效：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar -f -c archive.tar</kbd>
<kbd>tar -fc archive.tar</kbd>
<kbd>tar -fcarchive.tar</kbd>
<kbd>tar -farchive.tarc</kbd>
<kbd>tar cfarchive.tar</kbd>
</pre></td></tr></tbody></table>

<p>这些最后的示例的含义与用户的意图完全不同（根据前一组示例的判断，该示例使用长选项，因此其意图非常明确）。前四个指定<code>tar</code>存档将是一个名为<samp>`-c'</samp> ， <samp>`c'</samp> ， <samp>`carchive.tar'</samp>要么<samp>`archive.tarc'</samp> ， 分别。前两个示例还指定了一个非选项， <var>name</var>具有值的参数<samp>`archive.tar'</samp> 。最后一个示例仅包含旧样式选项字母（重复选项<samp>`c'</samp>两次），但并非所有都有意义（例如， <samp>`.'</samp> ， <samp>`h'</samp> ， 要么<samp>`i'</samp> ），没有参数值。<cite>不确定我是否喜欢本段的第一句话。</cite>
</p>

<hr size="6">
<a name="All-Options"></a>
<a name="SEC40"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC39" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC41" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.4全部<code>tar</code>选件</h2>

<p>接下来的手册部分将按字母顺序列出所有<code>tar</code>操作和选项，并在手册正文中进行了简要说明和交叉引用，以进行更深入的说明。它们还包含按字母顺序排列的短期期权表格及其相应的长期期权表格。您可以将此表用作解密的参考<code>tar</code>脚本中的命令。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC41">3.4.1操作</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC43">3.4.3短期期权交叉参考</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC44">3.4.4位置敏感选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Operation-Summary"></a>
<a name="SEC41"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC40" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC42" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC40" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.4.1操作</h3>

<dl compact>
<dd>
<p><a name="g_t_002d_002dappend"></a>
<a name="IDX33"></a>
</p></dd>
<dt> <samp>`--append'</samp></dt>
<dt> <samp>`-r'</samp></dt>
<dd>
<p>将文件追加到存档的末尾。请参阅<a href="#SEC60">如何将文件添加到现有档案中： <samp>`--append'</samp></a> 。
</p>
<p><a name="g_t_002d_002dcatenate"></a>
<a name="IDX34"></a>
</p></dd>
<dt> <samp>`--catenate'</samp></dt>
<dt> <samp>`-A'</samp></dt>
<dd>
<p>和...一样<samp>`--concatenate'</samp> 。请参阅<a href="#SEC65">将档案与<samp>`--concatenate'</samp></a> 。
</p>
<p><a name="g_t_002d_002dcompare"></a>
<a name="IDX35"></a>
</p></dd>
<dt> <samp>`--compare'</samp></dt>
<dt> <samp>`-d'</samp></dt>
<dd>
<p>将存档成员与文件系统中的存档成员进行比较，并报告文件大小，模式，所有者，修改日期和内容的差异。请参阅<a href="#SEC67">将存档成员与文件系统比较</a> 。
</p>
<p><a name="g_t_002d_002dconcatenate"></a>
<a name="IDX36"></a>
</p></dd>
<dt> <samp>`--concatenate'</samp></dt>
<dt> <samp>`-A'</samp></dt>
<dd>
<p>追加其他<code>tar</code>存档到存档末尾。请参阅<a href="#SEC65">将档案与<samp>`--concatenate'</samp></a> 。
</p>
<p><a name="g_t_002d_002dcreate"></a>
<a name="IDX37"></a>
</p></dd>
<dt> <samp>`--create'</samp></dt>
<dt> <samp>`-c'</samp></dt>
<dd>
<p>创建一个新的<code>tar</code>存档。请参阅<a href="#SEC17">如何创建档案</a>一节。
</p>
<p><a name="g_t_002d_002ddelete"></a>
<a name="IDX38"></a>
</p></dd>
<dt> <samp>`--delete'</samp></dt>
<dd>
<p>从档案中删除成员。不要在磁带上的存档上尝试！请参阅<a href="#SEC66">使用以下命令删除存档成员<samp>`--delete'</samp></a> 。
</p>
<p><a name="g_t_002d_002ddiff"></a>
<a name="IDX39"></a>
</p></dd>
<dt> <samp>`--diff'</samp></dt>
<dt> <samp>`-d'</samp></dt>
<dd>
<p>相同<samp>`--compare'</samp> 。请参阅<a href="#SEC67">将存档成员与文件系统比较</a> 。
</p>
<p><a name="g_t_002d_002dextract"></a>
<a name="IDX40"></a>
</p></dd>
<dt> <samp>`--extract'</samp></dt>
<dt> <samp>`-x'</samp></dt>
<dd>
<p>将档案中的成员提取到文件系统中。请参阅<a href="#SEC25">如何从存档中提取成员</a> 。
</p>
<p><a name="g_t_002d_002dget"></a>
<a name="IDX41"></a>
</p></dd>
<dt> <samp>`--get'</samp></dt>
<dt> <samp>`-x'</samp></dt>
<dd>
<p>和...一样<samp>`--extract'</samp> 。请参阅<a href="#SEC25">如何从存档中提取成员</a> 。
</p>
<p><a name="g_t_002d_002dlist"></a>
<a name="IDX42"></a>
</p></dd>
<dt> <samp>`--list'</samp></dt>
<dt> <samp>`-t'</samp></dt>
<dd>
<p>列出存档中的成员。请参阅<a href="#SEC23">如何列出档案</a> 。
</p>
<p><a name="g_t_002d_002dupdate"></a>
<a name="IDX43"></a>
</p></dd>
<dt> <samp>`--update'</samp></dt>
<dt> <samp>`-u'</samp></dt>
<dd>
<p>将文件添加到归档文件的末尾，但前提是文件比归档文件中已存在的文件新，或者文件不存在于归档文件中。请参阅<a href="#SEC63">更新档案</a>一节。
</p>
</dd>
</dl>

<hr size="6">
<a name="Option-Summary"></a>
<a name="SEC42"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC41" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC43" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC40" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.4.2 <code>tar</code>选件</h3>

<dl compact>
<dd>
<p><a name="g_t_002d_002dabsolute_002dnames"></a>
<a name="IDX44"></a>
</p></dd>
<dt> <samp>`--absolute-names'</samp></dt>
<dt> <samp>`-P'</samp></dt>
<dd>
<p>通常，在创建存档时， <code>tar</code>去除首字母<samp>`/'</samp>从成员名称中以及从存档中提取时<code>tar</code>如果名称有首字母，则特别对待名称<samp>`/'</samp>或内部<samp>`..'</samp> 。此选项禁用该行为。请参阅“ <a href="#SEC120">绝对文件名”</a>部分。
</p>
<p><a name="g_t_002d_002dacls"></a>
<a name="IDX45"></a>
</p></dd>
<dt> <samp>`--acls'</samp></dt>
<dd><p>启用POSIX ACL支持。参见<a href="#SEC70">acls</a>部分。
</p>
<p><a name="g_t_002d_002dafter_002ddate"></a>
<a name="IDX46"></a>
</p></dd>
<dt> <samp>`--after-date'</samp></dt>
<dd>
<p>（看到<samp>`--newer'</samp> ，请参阅<a href="#SEC116">仅对新文件进行操作</a> ）</p>
<p><a name="g_t_002d_002danchored"></a>
<a name="IDX47"></a>
</p></dd>
<dt> <samp>`--anchored'</samp></dt>
<dd><p>模式必须匹配名称组成部分的初始子序列。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002datime_002dpreserve"></a>
<a name="IDX48"></a>
</p></dd>
<dt> <samp>`--atime-preserve'</samp></dt>
<dt> <samp>`--atime-preserve=replace'</samp></dt>
<dt> <samp>`--atime-preserve=system'</samp></dt>
<dd>
<p>尝试在读取文件时保留文件的访问时间。当前，此选项仅对您拥有的文件有效，除非您具有超级用户特权。
</p>
<p><samp>`--atime-preserve=replace'</samp>在读取文件之前，它会记住文件的访问时间，然后再恢复访问时间。如果其他程序同时读取文件，则可能会导致问题，因为它们的访问时间将丢失。在大多数平台上，恢复访问时间也需要<code>tar</code>也可以恢复数据修改时间，因此，如果其他程序同时写入文件，此选项也可能会导致问题（ <code>tar</code>尝试检测这种情况，但由于比赛条件无法可靠地进行检测）。更糟糕的是，在大多数平台上，恢复访问时间也会更新状态更改时间，这意味着此选项与增量备份不兼容。
</p>
<p><samp>`--atime-preserve=system'</samp>避免更改文件上的时间戳，而不会干扰其他程序引起的时间戳更新，因此它与增量备份一起使用效果更好。但是，这需要特殊<code>O_NOATIME</code>底层操作和文件系统实现中的“选项”，并且还要求搜索目录不更新其访问时间。在撰写本文时（2005年11月），该功能仅适用于Linux，并且仅适用于Linux内核2.6.8及更高版本。更糟糕的是，目前尚没有可靠的方法来知道此功能是否真正起作用。有时<code>tar</code>知道它不起作用，如果您使用<samp>`--atime-preserve=system'</samp>然后<code>tar</code>抱怨并立即退出。但是其他时候<code>tar</code>可能认为该选项在实际上不起作用时起作用。
</p>
<p>目前<samp>`--atime-preserve'</samp>没有操作数的默认值为<samp>`--atime-preserve=replace'</samp> ，但将来随着支持<samp>`--atime-preserve=system'</samp>改善。
</p>
<p>如果您的操作系统或文件系统不支持<samp>`--atime-preserve=system'</samp> ，您可以通过使用<code>mount</code>命令。例如，您可以以只读方式挂载文件系统，或通过只读回送挂载访问文件系统，或使用<samp>`noatime'</samp>在某些系统上可以使用安装选项。但是，挂载通常需要超级用户特权，并且可能很难管理。
</p>
<p><a name="g_t_002d_002dauto_002dcompress"></a>
<a name="IDX49"></a>
</p></dd>
<dt> <samp>`--auto-compress'</samp></dt>
<dt> <samp>`-a'</samp></dt>
<dd>
<p>在一个<samp>`--create'</samp>操作，可基于存档后缀自动压缩格式识别。该选项的作用被取消<samp>`--no-auto-compress'</samp> 。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dbackup"></a>
<a name="IDX50"></a>
</p></dd>
<dt> <samp>`--backup=<var>backup-type</var>'</samp></dt>
<dd>
<p>与其从文件系统中删除文件， <code>tar</code>将使用简单或编号备份来备份它们，具体取决于<var>backup-type</var> 。请参阅<a href="#SEC92">备份选项</a>部分。
</p>
<p><a name="g_t_002d_002dblock_002dnumber"></a>
<a name="IDX51"></a>
</p></dd>
<dt> <samp>`--block-number'</samp></dt>
<dt> <samp>`-R'</samp></dt>
<dd>
<p>有了这个选项， <code>tar</code>使用归档文件中的块号打印读取错误的错误消息。请参阅<a href="#block_002dnumber">块号</a> 。
</p>
<p><a name="g_t_002d_002dblocking_002dfactor"></a>
<a name="IDX52"></a>
</p></dd>
<dt> <samp>`--blocking-factor=<var>blocking</var>'</samp></dt>
<dt> <samp>`-b <var>blocking</var>'</samp></dt>
<dd>
<p>设置阻塞因子<code>tar</code>用于<var>blocking</var> x每条记录512字节。请参阅<a href="#SEC160">存档的阻塞因素</a>部分。
</p>
<p><a name="g_t_002d_002dbzip2"></a>
<a name="IDX53"></a>
</p></dd>
<dt> <samp>`--bzip2'</samp></dt>
<dt> <samp>`-j'</samp></dt>
<dd>
<p>这个选项告诉<code>tar</code>通过读取或写入档案<code>bzip2</code> 。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dcheck_002ddevice"></a>
<a name="IDX54"></a>
</p></dd>
<dt> <samp>`--check-device'</samp></dt>
<dd><p>创建用于增量归档的已修改文件列表时，请检查设备编号。这是默认值。有关详细说明，请参见<a href="#device-numbers">设备编号</a> 。
</p>
<p><a name="g_t_002d_002dcheckpoint"></a>
<a name="IDX55"></a>
</p></dd>
<dt> <samp>`--checkpoint[=<var>number</var>]'</samp></dt>
<dd>
<p>此选项指示<code>tar</code>在读取档案时打印定期检查点消息。它用于需要视觉指示的地方<code>tar</code>仍在运行，但不想看到<samp>`--verbose'</samp>输出。您也可以指示<code>tar</code>要在每个检查点上执行操作列表，请参阅<samp>`--checkpoint-action'</samp>下面。有关详细说明，请参阅<a href="#SEC48">Checkpoints</a> 。
</p>
<p><a name="g_t_002d_002dcheckpoint_002daction"></a>
<a name="IDX56"></a>
</p></dd>
<dt> <samp>`--checkpoint-action=<var>action</var>'</samp></dt>
<dd><p>指导<code>tar</code>在达到断点时执行操作。在这里，我们仅给出简要概述。有关完整说明，请参见<a href="#SEC48">检查点</a>部分。
</p>
<p>的<var>action</var>参数可以是以下之一：</p>
<dl compact>
<dt>钟</dt>
<dd><p>在控制台上发出可听的铃声。
</p>
</dd>
<dt>点</dt>
<dt>。</dt>
<dd><p>在标准列表流上打印一个点。
</p>
</dd>
<dt>回声</dt>
<dd><p>显示有关标准错误的文本消息，以及检查点的状态和编号。这是默认值。
</p>
</dd>
<dt>回声=<var>string</var></dt>
<dd><p>显示<var>string</var>关于标准错误。在输出之前，字符串需要进行元字符扩展。
</p>
</dd>
<dt>exec =<var>command</var></dt>
<dd><p>执行给定<var>command</var> 。
</p>
</dd>
<dt>睡眠=<var>time</var></dt>
<dd><p>等待<var>time</var>秒。
</p>
</dd>
<dt>ttyout =<var>string</var></dt>
<dd><p>输出量<var>string</var>在当前控制台（ <tt>`/ dev / tty'</tt> ）上。
</p>
</dd>
<dt>总数</dt>
<dd><p>打印统计信息（请参阅<a href="#totals">总计</a> ）。
</p>
</dd>
<dt>等待=<var>signo</var></dt>
<dd><p>等待信号<var>signo</var> 。
</p></dd>
</dl>

<p>一些<samp>`--checkpoint-action'</samp>可以指定选项。提供的动作将按照它们在命令行中出现的顺序执行。
</p>
<p>使用<samp>`--checkpoint-action'</samp>没有<samp>`--checkpoint'</samp>假设默认检查点频率为每10条记录一个检查点。
</p>
<p><a name="g_t_002d_002dcheck_002dlinks"></a>
<a name="IDX57"></a>
</p></dd>
<dt> <samp>`--check-links'</samp></dt>
<dt> <samp>`-l'</samp></dt>
<dd><p>如果提供此选项， <code>tar</code>将检查每个处理文件转储的链接数。如果此数目与文件的硬链接总数不匹配，将输出警告消息<a name="DOCF5" href="#FOOT5">（5）</a> 。
</p>
<p>请参阅“ <a href="#SEC142">硬链接”</a>部分。
</p>
<p><a name="g_t_002d_002dcompress"></a>
<a name="IDX58"></a>
<a name="g_t_002d_002duncompress"></a>
<a name="IDX59"></a>
</p></dd>
<dt> <samp>`--compress'</samp></dt>
<dt> <samp>`--uncompress'</samp></dt>
<dt> <samp>`-Z'</samp></dt>
<dd>
<p><code>tar</code>将使用<code>compress</code>读取或写入存档时的程序。这样可以在节省空间的同时直接对归档执行操作。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dclamp_002dmtime"></a>
<a name="IDX60"></a>
</p></dd>
<dt> <samp>`--clamp-mtime'</samp></dt>
<dd>
<p>（看到<samp>`--mtime'</samp> ）
</p>
<p><a name="g_t_002d_002dconfirmation"></a>
<a name="IDX61"></a>
</p></dd>
<dt> <samp>`--confirmation'</samp></dt>
<dd>
<p>（看到<samp>`--interactive'</samp> ）请参阅<a href="#SEC54">操作期间要求确认</a>部分。
</p>
<p><a name="g_t_002d_002ddelay_002ddirectory_002drestore"></a>
<a name="IDX62"></a>
</p></dd>
<dt> <samp>`--delay-directory-restore'</samp></dt>
<dd>
<p>将设置修改时间和提取目录的权限延迟到提取结束为止。请参阅<a href="#SEC85">目录修改时间和权限部分</a> 。
</p>
<p><a name="g_t_002d_002ddereference"></a>
<a name="IDX63"></a>
</p></dd>
<dt> <samp>`--dereference'</samp></dt>
<dt> <samp>`-h'</samp></dt>
<dd>
<p>读取或写入要归档的文件时， <code>tar</code>访问符号链接指向的文件，而不是符号链接本身。请参阅<a href="#SEC141">符号链接</a>部分。
</p>
<p><a name="g_t_002d_002ddirectory"></a>
<a name="IDX64"></a>
</p></dd>
<dt> <samp>`--directory=<var>dir</var>'</samp></dt>
<dt> <samp>`-C <var>dir</var>'</samp></dt>
<dd>
<p>指定此选项后， <code>tar</code>将其当前目录更改为<var>dir</var>在执行任何操作之前。在归档创建期间使用此选项时，它对顺序敏感。请参阅<a href="#SEC119">更改工作目录部分</a> 。
</p>
<p><a name="g_t_002d_002dexclude"></a>
<a name="IDX65"></a>
</p></dd>
<dt> <samp>`--exclude=<var>pattern</var>'</samp></dt>
<dd>
<p>执行操作时， <code>tar</code>将跳过匹配的文件<var>pattern</var> 。请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
<p><a name="g_t_002d_002dexclude_002dbackups"></a>
<a name="IDX66"></a>
</p></dd>
<dt> <samp>`--exclude-backups'</samp></dt>
<dd><p>排除备份和锁定文件。请参阅<a href="#SEC110">排除备份</a>部分。
</p>
<p><a name="g_t_002d_002dexclude_002dfrom"></a>
<a name="IDX67"></a>
</p></dd>
<dt> <samp>`--exclude-from=<var>file</var>'</samp></dt>
<dt> <samp>`-X <var>file</var>'</samp></dt>
<dd>
<p>相似<samp>`--exclude'</samp> ， 除<code>tar</code>将使用文件中的模式列表<var>file</var> 。请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
<p><a name="g_t_002d_002dexclude_002dcaches"></a>
<a name="IDX68"></a>
</p></dd>
<dt> <samp>`--exclude-caches'</samp></dt>
<dd>
<p>从转储中排除包含有效缓存目录标记文件的任何目录，但仍转储目录节点和标记文件本身。
</p>
<p>请参阅<a href="#SEC110">排除缓存</a>部分。
</p>
<p><a name="g_t_002d_002dexclude_002dcaches_002dunder"></a>
<a name="IDX69"></a>
</p></dd>
<dt> <samp>`--exclude-caches-under'</samp></dt>
<dd>
<p>从转储中排除包含有效缓存目录标记文件的任何目录，但仍转储目录节点本身。
</p>
<p>请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
<p><a name="g_t_002d_002dexclude_002dcaches_002dall"></a>
<a name="IDX70"></a>
</p></dd>
<dt> <samp>`--exclude-caches-all'</samp></dt>
<dd>
<p>从转储中排除包含有效缓存目录标记文件的任何目录。请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
<p><a name="g_t_002d_002dexclude_002dignore"></a>
<a name="IDX71"></a>
</p></dd>
<dt> <samp>`--exclude-ignore=<var>file</var>'</samp></dt>
<dd><p>转储目录之前， <code>tar</code>检查是否包含<var>file</var> 。如果是这样，则从该文件读取排除模式。模式仅影响目录本身。请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
<p><a name="g_t_002d_002dexclude_002dignore_002drecursive"></a>
<a name="IDX72"></a>
</p></dd>
<dt> <samp>`--exclude-ignore-recursive=<var>file</var>'</samp></dt>
<dd><p>转储目录之前， <code>tar</code>检查是否包含<var>file</var> 。如果是这样，则从该文件读取排除模式。这些模式会影响目录及其所有子目录。请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
<p><a name="g_t_002d_002dexclude_002dtag"></a>
<a name="IDX73"></a>
</p></dd>
<dt> <samp>`--exclude-tag=<var>file</var>'</samp></dt>
<dd>
<p>从转储中排除包含名为的文件的任何目录<var>file</var> ，但转储目录节点和<var>file</var>本身。请参阅“ <a href="#SEC110">排除标签”</a>部分。
</p>
<p><a name="g_t_002d_002dexclude_002dtag_002dunder"></a>
<a name="IDX74"></a>
</p></dd>
<dt> <samp>`--exclude-tag-under=<var>file</var>'</samp></dt>
<dd>
<p>从转储中排除包含名为的文件的任何目录的内容<var>file</var> ，但转储目录节点本身。请参阅<a href="#SEC110">排除标签下部分</a> 。
</p>
<p><a name="g_t_002d_002dexclude_002dtag_002dall"></a>
<a name="IDX75"></a>
</p></dd>
<dt> <samp>`--exclude-tag-all=<var>file</var>'</samp></dt>
<dd>
<p>从转储中排除包含名为的文件的任何目录<var>file</var> 。请参阅“ <a href="#SEC110">排除标签全部”部分</a> 。
</p>
<p><a name="g_t_002d_002dexclude_002dvcs"></a>
<a name="IDX76"></a>
</p></dd>
<dt> <samp>`--exclude-vcs'</samp></dt>
<dd>
<p>从某些广泛使用的版本控制系统内部的转储目录和文件中排除。
</p>
<p>参见<a href="#exclude_002dvcs">exclude-vcs</a> 。
</p>
<p><a name="g_t_002d_002dexclude_002dvcs_002dignores"></a>
<a name="IDX77"></a>
</p></dd>
<dt> <samp>`--exclude-vcs-ignores'</samp></dt>
<dd><p>排除与从VCS特定的忽略文件读取的模式匹配的文件。支持的文件是： <tt>.cvsignore</tt> ， <tt>.gitignore</tt> ， <tt>.bzrignore</tt>和<tt>.hgignore</tt> 。每个文件的语义与对应的VCS的语义相同，例如，从<tt>“ .gitignore”</tt>读取的模式会影响目录及其所有子目录。请参阅<a href="#exclude_002dvcs_002dignores">exclude-vcs-ignores</a> 。
</p>
<p><a name="g_t_002d_002dfile"></a>
<a name="IDX78"></a>
</p></dd>
<dt> <samp>`--file=<var>archive</var>'</samp></dt>
<dt> <samp>`-f <var>archive</var>'</samp></dt>
<dd>
<p><code>tar</code>将使用文件<var>archive</var>作为<code>tar</code>存档，而不是对其执行操作<code>tar</code>依赖于编译的默认值。见节<a href="#SEC14">的<samp>`--file'</samp>选项</a> 。
</p>
<p><a name="g_t_002d_002dfiles_002dfrom"></a>
<a name="IDX79"></a>
</p></dd>
<dt> <samp>`--files-from=<var>file</var>'</samp></dt>
<dt> <samp>`-T <var>file</var>'</samp></dt>
<dd>
<p><code>tar</code>将使用的内容<var>file</var>除了在命令行上指定的成员或文件之外，还包括要操作的归档成员或文件的列表。请参阅<a href="#SEC108">从文件读取名称</a>部分。
</p>
<p><a name="g_t_002d_002dforce_002dlocal"></a>
<a name="IDX80"></a>
</p></dd>
<dt> <samp>`--force-local'</samp></dt>
<dd>
<p>势力<code>tar</code>解释给的文件名<samp>`--file'</samp>作为本地文件，即使它看起来像一个远程磁带驱动器名称。请参阅<a href="#local-and-remote-archives">本地和远程存档</a> 。
</p>
<p><a name="g_t_002d_002dformat"></a>
<a name="IDX81"></a>
</p></dd>
<dt> <samp>`--format=<var>format</var>'</samp></dt>
<dt> <samp>`-H <var>format</var>'</samp></dt>
<dd>
<p>选择输出存档格式。 <var>Format</var>可能是以下之一：</p>
<dl compact>
<dt> <samp>`v7'</samp></dt>
<dd><p>创建与Unix V7兼容的档案<code>tar</code> 。
</p>
</dd>
<dt> <samp>`oldgnu'</samp></dt>
<dd><p>创建与GNU兼容的档案<code>tar</code>版本1.12或更早版本。
</p>
</dd>
<dt> <samp>`gnu'</samp></dt>
<dd><p>以GNU tar 1.13格式创建档案。基本上和<samp>`oldgnu'</samp>唯一的区别在于它处理长数值字段的方式。
</p>
</dd>
<dt> <samp>`ustar'</samp></dt>
<dd><p>创建兼容<acronym>POSIX.1-1988的</acronym>档案。
</p>
</dd>
<dt> <samp>`posix'</samp></dt>
<dd><p>创建一个<acronym>POSIX.1-2001存档</acronym> 。
</p>
</dd>
</dl>

<p>有关这些格式的详细讨论，请参见<a href="#SEC133">控制存档格式</a>部分。
</p>
<p><a name="g_t_002d_002dfull_002dtime"></a>
<a name="IDX82"></a>
</p></dd>
<dt> <samp>`--full-time'</samp></dt>
<dd><p>该选项指示<code>tar</code>将文件时间打印为完整分辨率。通常，这意味着1秒钟的分辨率，但这取决于基础文件系统。的<samp>`--full-time'</samp>该选项仅在使用以下命令请求详细输出（详细级别2或更高）时才生效<samp>`--verbose'</samp>选项，例如在列出或提取档案时：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -t -v --full-time -f archive.tar</kbd>
</pre></td></tr></tbody></table>

<p>或者，在创建档案时：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -vv --full-time -f archive.tar .</kbd>
</pre></td></tr></tbody></table>
<p>注意，创建存档时需要指定<samp>`--verbose'</samp>两次获得详细的输出（见<a href="#SEC15">的<samp>`--verbose'</samp>选项</a> ）。
</p>
<p><a name="g_t_002d_002dgroup"></a>
<a name="IDX83"></a>
</p></dd>
<dt> <samp>`--group=<var>group</var>'</samp></dt>
<dd>
<p>文件已添加到<code>tar</code>存档的组<acronym>ID</acronym>为<var>group</var> ，而不是源文件中的组。 <var>group</var>可以指定符号名称或数字<acronym>ID</acronym> ，或两者都指定为<var>name</var> ： <var>id</var> 。请参阅<a href="#SEC69">覆盖文件元数据</a>一节。
</p>
<p>另请参阅<samp>`--group-map'</samp>选项和注释<samp>`--owner=<var>user</var>'</samp>选项。
</p>
<p><a name="g_t_002d_002dgroup_002dmap"></a>
<a name="IDX84"></a>
</p></dd>
<dt> <samp>`--group-map=<var>file</var>'</samp></dt>
<dd>
<p>从中读取所有者组翻译地图<var>file</var> 。此选项仅允许转换某些组名和/或UID。有关详细说明，请参见“ <a href="#SEC69">覆盖文件元数据”</a>部分。当与<samp>`--group'</samp>选项，后者仅影响所有者组未在<var>file</var> 。
</p>
<p>此选项不影响从存档中提取。
</p>
<p><a name="g_t_002d_002dgzip"></a>
<a name="IDX85"></a>
<a name="g_t_002d_002dgunzip"></a>
<a name="IDX86"></a>
<a name="g_t_002d_002dungzip"></a>
<a name="IDX87"></a>
</p></dd>
<dt> <samp>`--gzip'</samp></dt>
<dt> <samp>`--gunzip'</samp></dt>
<dt> <samp>`--ungzip'</samp></dt>
<dt> <samp>`-z'</samp></dt>
<dd>
<p>这个选项告诉<code>tar</code>通过读取或写入档案<code>gzip</code> ，允许<code>tar</code>透明地直接对多种压缩档案进行操作。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dhard_002ddereference"></a>
<a name="IDX88"></a>
</p></dd>
<dt> <samp>`--hard-dereference'</samp></dt>
<dd><p>创建档案时，请取消引用硬链接并存储它们引用的文件，而不是创建常规的硬链接成员。
</p>
<p>请参阅“ <a href="#SEC142">硬链接”</a>部分。
</p>
<p><a name="g_t_002d_002dhelp"></a>
<a name="IDX89"></a>
</p></dd>
<dt> <samp>`--help'</samp></dt>
<dt> <samp>`-?'</samp></dt>
<dd>
<p><code>tar</code>将打印一条简短的消息，总结操作和选项<code>tar</code>然后退出。见<a href="#SEC45"><acronym>GNU</acronym></a>部分<a href="#SEC45"><code>tar</code>文件</a> 。
</p>
<p><a name="g_t_002d_002dhole_002ddetection"></a>
<a name="IDX90"></a>
</p></dd>
<dt> <samp>`--hole-detection=<var>method</var>'</samp></dt>
<dd><p>使用<var>method</var>检测稀疏文件中的孔。此选项暗示<samp>`--sparse'</samp> 。有效方法是<samp>`seek'</samp>和<samp>`raw'</samp> 。默认为<samp>`seek'</samp>后退到<samp>`raw'</samp>不适用时。请参阅<a href="#SEC137">存档稀疏文件</a> 。
</p>
<p><a name="g_t_002d_002dignore_002dcase"></a>
<a name="IDX91"></a>
</p></dd>
<dt> <samp>`--ignore-case'</samp></dt>
<dd><p>将成员或文件名与模式匹配时，忽略大小写。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dignore_002dcommand_002derror"></a>
<a name="IDX92"></a>
</p></dd>
<dt> <samp>`--ignore-command-error'</samp></dt>
<dd><p>忽略子流程的退出代码。请参阅“ <a href="#SEC87">写入外部程序”一节</a> 。
</p>
<p><a name="g_t_002d_002dignore_002dfailed_002dread"></a>
<a name="IDX93"></a>
</p></dd>
<dt> <samp>`--ignore-failed-read'</samp></dt>
<dd>
<p>不要仅因为遇到无法读取的文件而成功退出。请参阅<a href="#SEC71">忽略读取失败</a>部分。
</p>
<p><a name="g_t_002d_002dignore_002dzeros"></a>
<a name="IDX94"></a>
</p></dd>
<dt> <samp>`--ignore-zeros'</samp></dt>
<dt> <samp>`-i'</samp></dt>
<dd>
<p>有了这个选项， <code>tar</code>将忽略存档中的归零块，该块通常以信号通知EOF。请参阅<a href="#SEC73">帮助阅读档案的选项</a>部分。
</p>
<p><a name="g_t_002d_002dincremental"></a>
<a name="IDX95"></a>
</p></dd>
<dt> <samp>`--incremental'</samp></dt>
<dt> <samp>`-G'</samp></dt>
<dd>
<p>通知<code>tar</code>它正在使用旧的<acronym>GNU</acronym>格式的增量备份存档。它主要仅用于向后兼容。请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code> “执行增量转储”</a> ，以详细讨论增量存档。
</p>
<p><a name="g_t_002d_002dindex_002dfile"></a>
<a name="IDX96"></a>
</p></dd>
<dt> <samp>`--index-file=<var>file</var>'</samp></dt>
<dd>
<p>发送详细输出到<var>file</var>而不是标准输出。
</p>
<p><a name="g_t_002d_002dinfo_002dscript"></a>
<a name="IDX97"></a>
<a name="g_t_002d_002dnew_002dvolume_002dscript"></a>
<a name="IDX98"></a>
</p></dd>
<dt> <samp>`--info-script=<var>command</var>'</samp></dt>
<dt> <samp>`--new-volume-script=<var>command</var>'</samp></dt>
<dt> <samp>`-F <var>command</var>'</samp></dt>
<dd>
<p>什么时候<code>tar</code>正在执行多磁带备份， <var>command</var>在每个磁带的末尾运行。如果它以非零状态退出， <code>tar</code>立即失败。有关此功能的详细讨论，请参见<a href="#info_002dscript">info-script</a> 。
</p>
<p><a name="g_t_002d_002dinteractive"></a>
<a name="IDX99"></a>
</p></dd>
<dt> <samp>`--interactive'</samp></dt>
<dt> <samp>`--confirmation'</samp></dt>
<dt> <samp>`-w'</samp></dt>
<dd>
<p>指定<code>tar</code>在执行潜在的破坏性选择（例如覆盖文件）之前，应先要求用户确认。请参阅<a href="#SEC54">操作期间要求确认</a>部分。
</p>
<p><a name="g_t_002d_002dkeep_002ddirectory_002dsymlink"></a>
<a name="IDX100"></a>
</p></dd>
<dt> <samp>`--keep-directory-symlink'</samp></dt>
<dd>
<p>当tar遇到与要提取的目录同名的符号链接时，此选项会更改tar的行为。默认情况下，在这种情况下，tar将首先删除符号链接，然后继续提取目录。
</p>
<p>的<samp>`--keep-directory-symlink'</samp>选项禁用此行为，并指示tar从存档中提取时遵循目录的符号链接。
</p>
<p>它主要旨在提供与Slackware安装脚本的兼容性。
</p>
<p><a name="g_t_002d_002dkeep_002dnewer_002dfiles"></a>
<a name="IDX101"></a>
</p></dd>
<dt> <samp>`--keep-newer-files'</samp></dt>
<dd>
<p>从存档中提取文件时，请勿替换比其存档副本新的现有文件。
</p>
<p><a name="g_t_002d_002dkeep_002dold_002dfiles"></a>
<a name="IDX102"></a>
</p></dd>
<dt> <samp>`--keep-old-files'</samp></dt>
<dt> <samp>`-k'</samp></dt>
<dd>
<p>从存档中提取文件时，请勿覆盖现有文件。如果存在此类文件，则返回错误。另请参见<a href="#g_t_002d_002dskip_002dold_002dfiles">-skip-old-files</a> 。
</p>
<p>请参阅<a href="#SEC79">保留旧文件</a>部分。
</p>
<p><a name="g_t_002d_002dlabel"></a>
<a name="IDX103"></a>
</p></dd>
<dt> <samp>`--label=<var>name</var>'</samp></dt>
<dt> <samp>`-V <var>name</var>'</samp></dt>
<dd>
<p>创建档案时，指示<code>tar</code>来写<var>name</var>作为档案中的名称记录。提取或列出档案时， <code>tar</code>仅适用于标签与中指定的模式匹配的档案<var>name</var> 。请参阅“ <a href="#SEC166">磁带文件”</a>部分。
</p>
<p><a name="g_t_002d_002dlevel"></a>
<a name="IDX104"></a>
</p></dd>
<dt> <samp>`--level=<var>n</var>'</samp></dt>
<dd><p>强制增量级别备份<var>n</var> 。截至<acronym>GNU</acronym> <code>tar</code> 1.32，选项<samp>`--level=0'</samp>截断快照文件，从而强制执行0级转储。的其他值<var>n</var>被有效地忽略了。有关详细信息和示例，请参见<a href="#g_t_002d_002dlevel_003d0">-level = 0</a> 。
</p>
<p>此选项的使用仅与<samp>`--listed-incremental'</samp>选项。请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code></a>有关详细说明，请<a href="#SEC96">参见执行增量转储</a> 。
</p>
<p><a name="g_t_002d_002dlisted_002dincremental"></a>
<a name="IDX105"></a>
</p></dd>
<dt> <samp>`--listed-incremental=<var>snapshot-file</var>'</samp></dt>
<dt> <samp>`-g <var>snapshot-file</var>'</samp></dt>
<dd>
<p>在一个<samp>`--create'</samp>操作，指定存档<code>tar</code> created是一个新的<acronym>GNU</acronym>格式的增量备份，使用<var>snapshot-file</var>确定要备份的文件。与其他操作一起，通知<code>tar</code>存档为增量格式。请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code>执行增量转储</a> 。
</p>
<p><a name="g_t_002d_002dlzip"></a>
<a name="IDX106"></a>
</p></dd>
<dt> <samp>`--lzip'</samp></dt>
<dd>
<p>这个选项告诉<code>tar</code>通过读取或写入档案<code>lzip</code> 。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dlzma"></a>
<a name="IDX107"></a>
</p></dd>
<dt> <samp>`--lzma'</samp></dt>
<dd>
<p>这个选项告诉<code>tar</code>通过读取或写入档案<code>lzma</code> 。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
</dd>
<dt> <samp>`--lzop'</samp></dt>
<dd>
<p>这个选项告诉<code>tar</code>通过读取或写入档案<code>lzop</code> 。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dmode"></a>
<a name="IDX108"></a>
</p></dd>
<dt> <samp>`--mode=<var>permissions</var>'</samp></dt>
<dd>
<p>将文件添加到存档时， <code>tar</code>将使用<var>permissions</var>存档成员，而不是文件权限。 <var>permissions</var>可以指定为八进制数字或符号权限，例如<code>chmod</code> 。请参阅<a href="#SEC69">覆盖文件元数据</a>一节。
</p>
<p><a name="g_t_002d_002dmtime"></a>
<a name="IDX109"></a>
</p></dd>
<dt> <samp>`--mtime=<var>date</var>'</samp></dt>
<dd>
<p>将文件添加到存档时， <code>tar</code>将使用<var>date</var>作为创建档案时成员的修改时间，而不是其实际修改时间。的价值<var>date</var>可以是文本日期表示形式（请参见<a href="#SEC121">日期输入格式</a>部分），也可以是现有文件的名称，以<samp>`/'</samp>要么<samp>`.'</samp> 。在后一种情况下，将使用该文件的修改时间。请参阅<a href="#SEC69">覆盖文件元数据</a>一节。
</p>
<p>什么时候<code>--clamp-mtime</code>还指定了，修改时间早于<var>date</var>将保留其实际修改时间，并且<var>date</var>仅用于修改时间晚于<var>date</var> 。
</p>
<p><a name="g_t_002d_002dmulti_002dvolume"></a>
<a name="IDX110"></a>
</p></dd>
<dt> <samp>`--multi-volume'</samp></dt>
<dt> <samp>`-M'</samp></dt>
<dd>
<p>通知<code>tar</code>它应该创建或以其他方式操作<code>tar</code>存档。请参阅<a href="#SEC164">使用多个磁带</a>部分。
</p>
<a name="IDX111"></a>
</dd>
<dt> <samp>`--new-volume-script'</samp></dt>
<dd>
<p>（看到<samp>`--info-script'</samp> ）</p>
<p><a name="g_t_002d_002dnewer"></a>
<a name="IDX112"></a>
</p></dd>
<dt> <samp>`--newer=<var>date</var>'</samp></dt>
<dt> <samp>`--after-date=<var>date</var>'</samp></dt>
<dt> <samp>`-N'</samp></dt>
<dd>
<p>创建档案时， <code>tar</code>只会添加自<var>date</var> 。如果<var>date</var>开始于<samp>`/'</samp>要么<samp>`.'</samp> ，它是文件的名称，其数据修改时间指定了日期。请参阅<a href="#SEC116">仅对新文件进行操作</a> 。
</p>
<p><a name="g_t_002d_002dnewer_002dmtime"></a>
<a name="IDX113"></a>
</p></dd>
<dt> <samp>`--newer-mtime=<var>date</var>'</samp></dt>
<dd>
<p>喜欢<samp>`--newer'</samp> ，但仅添加内容已更改的文件（而不是仅添加<samp>`--newer'</samp> ，这还将备份状态信息已更改的文件）。请参阅<a href="#SEC116">仅对新文件进行操作</a> 。
</p>
<p><a name="g_t_002d_002dno_002dacls"></a>
<a name="IDX114"></a>
</p></dd>
<dt> <samp>`--no-acls'</samp></dt>
<dd><p>禁用POSIX ACL支持。参见<a href="#SEC70">acls</a>部分。
</p>
<p><a name="g_t_002d_002dno_002danchored"></a>
<a name="IDX115"></a>
</p></dd>
<dt> <samp>`--no-anchored'</samp></dt>
<dd><p>排除模式可以匹配名称成分的任何子序列。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dno_002dauto_002dcompress"></a>
<a name="IDX116"></a>
</p></dd>
<dt> <samp>`--no-auto-compress'</samp></dt>
<dd>
<p>禁用基于存档后缀的自动压缩格式识别。请参见<a href="#g_t_002d_002dauto_002dcompress">-auto-compress</a> 。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dno_002dcheck_002ddevice"></a>
<a name="IDX117"></a>
</p></dd>
<dt> <samp>`--no-check-device'</samp></dt>
<dd><p>创建用于增量归档的已修改文件列表时，请勿检查设备编号。有关详细说明，请参见<a href="#device-numbers">设备编号</a> 。
</p>
<p><a name="g_t_002d_002dno_002ddelay_002ddirectory_002drestore"></a>
<a name="IDX118"></a>
</p></dd>
<dt> <samp>`--no-delay-directory-restore'</samp></dt>
<dd>
<p>从该目录提取所有文件后，将设置提取目录的修改时间和权限。这是默认值。请参阅<a href="#SEC85">目录修改时间和权限部分</a> 。
</p>
<p><a name="g_t_002d_002dno_002dignore_002dcase"></a>
<a name="IDX119"></a>
</p></dd>
<dt> <samp>`--no-ignore-case'</samp></dt>
<dd><p>使用区分大小写的匹配。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dno_002dignore_002dcommand_002derror"></a>
<a name="IDX120"></a>
</p></dd>
<dt> <samp>`--no-ignore-command-error'</samp></dt>
<dd><p>打印有关以非零退出代码终止的子流程的警告。请参阅“ <a href="#SEC87">写入外部程序”一节</a> 。
</p>
<p><a name="g_t_002d_002dno_002dnull"></a>
<a name="IDX121"></a>
</p></dd>
<dt> <samp>`--no-null'</samp></dt>
<dd>
<p>如果<samp>`--null'</samp>选项是先前给定的，此选项会取消其效果，因此以下任何<samp>`--files-from'</samp>选项将期望其文件列表以换行符结尾。
</p>
<p><a name="g_t_002d_002dno_002doverwrite_002ddir"></a>
<a name="IDX122"></a>
</p></dd>
<dt> <samp>`--no-overwrite-dir'</samp></dt>
<dd>
<p>从存档中提取文件时，保留现有目录的元数据。请参阅<a href="#SEC78">覆盖旧文件</a>部分。
</p>
<p><a name="g_t_002d_002dno_002dquote_002dchars"></a>
<a name="IDX123"></a>
</p></dd>
<dt> <samp>`--no-quote-chars=<var>string</var>'</samp></dt>
<dd><p>删除列出的字符<var>string</var>从上一个引号设置的字符列表中<samp>`--quote-chars'</samp>选项（请参阅“ <a href="#SEC114">引用成员名称”</a>一节）。
</p>
<p><a name="g_t_002d_002dno_002drecursion"></a>
<a name="IDX124"></a>
</p></dd>
<dt> <samp>`--no-recursion'</samp></dt>
<dd>
<p>有了这个选项， <code>tar</code>不会递归到目录中。请参阅“ <a href="#SEC117">下降到目录”</a>部分。
</p>
<p><a name="g_t_002d_002dno_002dsame_002downer"></a>
<a name="IDX125"></a>
</p></dd>
<dt> <samp>`--no-same-owner'</samp></dt>
<dt> <samp>`-o'</samp></dt>
<dd>
<p>提取档案时，请勿尝试保留档案中指定的拥有者<code>tar</code>存档。这是普通用户的默认行为。
</p>
<p><a name="g_t_002d_002dno_002dsame_002dpermissions"></a>
<a name="IDX126"></a>
</p></dd>
<dt> <samp>`--no-same-permissions'</samp></dt>
<dd>
<p>提取档案时，请从档案中指定的权限中减去文件中的用户umask。这是普通用户的默认行为。
</p>
<p><a name="g_t_002d_002dno_002dseek"></a>
<a name="IDX127"></a>
</p></dd>
<dt> <samp>`--no-seek'</samp></dt>
<dd>
<p>存档媒体不支持对任意位置的搜索。通常<code>tar</code>自动确定是否可以查找档案。使用此选项可禁用此机制。
</p>
<p><a name="g_t_002d_002dno_002dselinux"></a>
<a name="IDX128"></a>
</p></dd>
<dt> <samp>`--no-selinux'</samp></dt>
<dd><p>禁用SELinux上下文支持。请参阅<a href="#SEC70">SELinux</a>部分。
</p>
<p><a name="g_t_002d_002dno_002dunquote"></a>
<a name="IDX129"></a>
</p></dd>
<dt> <samp>`--no-unquote'</samp></dt>
<dd><p>从字面上对待所有输入文件或成员名称，请勿解释转义序列。请参见<a href="#input-name-quoting">输入名称引用</a> 。
</p>
<p><a name="g_t_002d_002dno_002dverbatim_002dfiles_002dfrom"></a>
<a name="IDX130"></a>
</p></dd>
<dt> <samp>`--no-verbatim-files-from'</samp></dt>
<dd>
<p>指导<acronym>GNU</acronym> <code>tar</code>将从文件列表中读取的每一行都视为命令行中提供的每一行。即，删除了前导和尾随空格，并且如果结果以短划线开头，则将其视为<acronym>GNU</acronym> <code>tar</code>命令行选项。
</p>
<p>这是默认行为。提供此选项是在以后恢复它的一种方式。 <samp>`--verbatim-files-from'</samp>选项。
</p>
<p>它暗示<samp>`--no-null'</samp>选项。
</p>
<p>请参阅<a href="#no_002dverbatim_002dfiles_002dfrom">no-verbatim-files-from</a> 。
</p>
<p><a name="g_t_002d_002dno_002dwildcards"></a>
<a name="IDX131"></a>
</p></dd>
<dt> <samp>`--no-wildcards'</samp></dt>
<dd><p>不要使用通配符。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dno_002dwildcards_002dmatch_002dslash"></a>
<a name="IDX132"></a>
</p></dd>
<dt> <samp>`--no-wildcards-match-slash'</samp></dt>
<dd><p>通配符不匹配<samp>`/'</samp> 。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dno_002dxattrs"></a>
<a name="IDX133"></a>
</p></dd>
<dt> <samp>`--no-xattrs'</samp></dt>
<dd><p>禁用扩展属性支持。参见章节<a href="#SEC70">xattrs</a> 。
</p>
<p><a name="g_t_002d_002dnull"></a>
<a name="IDX134"></a>
</p></dd>
<dt> <samp>`--null'</samp></dt>
<dd>
<p>什么时候<code>tar</code>正在使用<samp>`--files-from'</samp>选项，此选项指示<code>tar</code>期望文件名以<acronym>NUL</acronym>结尾，并逐字处理文件名。
</p>
<p>这意味着<code>tar</code>正确使用包含换行符或以破折号开头的文件名。
</p>
<p>见章节<a href="#SEC109"><code>NUL</code> -终止的文件名</a> 。
</p>
<p>另请参见<a href="#verbatim_002dfiles_002dfrom">verbatim-files-from</a> 。
</p>
<p><a name="g_t_002d_002dnumeric_002downer"></a>
<a name="IDX135"></a>
</p></dd>
<dt> <samp>`--numeric-owner'</samp></dt>
<dd>
<p>此选项将通知<code>tar</code>在创建广告时应使用数字用户名和组ID <code>tar</code>文件，而不是名称。请参阅<a href="#SEC138">处理文件属性</a>部分。
</p>
</dd>
<dt> <samp>`-o'</samp></dt>
<dd><p>此选项的功能取决于操作<code>tar</code>正在表演。提取文件时， <samp>`-o'</samp>是的同义词<samp>`--no-same-owner'</samp> ，即，它可以防止<code>tar</code>恢复所提取文件的所有权。
</p>
<p>创建档案时，它是的同义词<samp>`--old-archive'</samp> 。此行为是为了与<acronym>GNU的早期</acronym>版本兼容<code>tar</code> ，并将在以后的版本中删除。
</p>
<p>有关更多信息，请参见“ <a href="#SEC181">更改”</a>部分。
</p>
<p><a name="g_t_002d_002doccurrence"></a>
<a name="IDX136"></a>
</p></dd>
<dt> <samp>`--occurrence[=<var>number</var>]'</samp></dt>
<dd>
<p>此选项可以与子命令之一结合使用<samp>`--delete'</samp> ， <samp>`--diff'</samp> ， <samp>`--extract'</samp>要么<samp>`--list'</samp>在命令行或通过给出文件列表时<samp>`-T'</samp>选项。
</p>
<p>该选项指示<code>tar</code>只处理<var>number</var>每个命名文件的出现次数。 <var>Number</var>默认为1，所以</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar -x -f archive.tar --occurrence filename
</pre></td></tr></tbody></table>

<p>将从<tt>“ archive.tar”中</tt>提取成员<tt>“ filename”</tt>的第一个匹配项，并且将终止而不扫描到存档末尾。
</p>
<p><a name="g_t_002d_002dold_002darchive"></a>
<a name="IDX137"></a>
</p></dd>
<dt> <samp>`--old-archive'</samp></dt>
<dd><p>的同义词<samp>`--format=v7'</samp> 。
</p>
<p><a name="g_t_002d_002done_002dfile_002dsystem"></a>
<a name="IDX138"></a>
</p></dd>
<dt> <samp>`--one-file-system'</samp></dt>
<dd><p>在创建档案时使用。预防<code>tar</code>从递归到当前目录所在的不同文件系统上的目录。
</p>
<p><a name="g_t_002d_002done_002dtop_002dlevel"></a>
<a name="IDX139"></a>
</p></dd>
<dt> <samp>`--one-top-level[=<var>dir</var>]'</samp></dt>
<dd><p>告诉<code>tar</code>在提取目录下创建一个新目录（或传递给<samp>`-C'</samp> ），并用它来防御塔布炸弹。在缺少...之下<var>dir</var>参数，新目录的名称将等于档案的基本名称（文件名减去档案后缀，如果可以识别的话）。任何不以该目录名称开头的成员名称（从<samp>`--transform'</samp>和<samp>`--strip-components'</samp> ）作为前缀。公认的文件名后缀为<samp>`.tar'</samp> ，以及See <a href="#g_t_002d_002dauto_002dcompress">-auto-compress可以</a>识别的任何压缩后缀。
</p>
<p><a name="g_t_002d_002doverwrite"></a>
<a name="IDX140"></a>
</p></dd>
<dt> <samp>`--overwrite'</samp></dt>
<dd>
<p>从存档中提取文件时，覆盖现有文件和目录元数据。请参阅<a href="#SEC78">覆盖旧文件</a>部分。
</p>
<p><a name="g_t_002d_002doverwrite_002ddir"></a>
<a name="IDX141"></a>
</p></dd>
<dt> <samp>`--overwrite-dir'</samp></dt>
<dd>
<p>从存档中提取文件时，覆盖现有目录的元数据。请参阅<a href="#SEC78">覆盖旧文件</a>部分。
</p>
<p><a name="g_t_002d_002downer"></a>
<a name="IDX142"></a>
</p></dd>
<dt> <samp>`--owner=<var>user</var>'</samp></dt>
<dd>
<p>指定<code>tar</code>应该使用<var>user</var>作为创建档案时的成员所有者，而不是与源文件关联的用户。 <var>user</var>可以指定符号名称或数字<acronym>ID</acronym> ，或两者都指定为<var>name</var> ： <var>id</var> 。请参阅<a href="#SEC69">覆盖文件元数据</a>一节。
</p>
<p>此选项不影响从存档中提取。也可以看看<samp>`--owner-map'</samp> ，如下。
</p>
<p><a name="g_t_002d_002downer_002dmap"></a>
<a name="IDX143"></a>
</p></dd>
<dt> <samp>`--owner-map=<var>file</var>'</samp></dt>
<dd>
<p>从中读取所有者翻译地图<var>file</var> 。此选项仅允许转换某些所有者名称或UID。有关详细说明，请参见“ <a href="#SEC69">覆盖文件元数据”</a>部分。当与<samp>`--owner'</samp>选项，后者仅影响所有者未在<var>file</var> 。
</p>
<p>此选项不影响从存档中提取。
</p>
<p><a name="g_t_002d_002dpax_002doption"></a>
<a name="IDX144"></a>
</p></dd>
<dt> <samp>`--pax-option=<var>keyword-list</var>'</samp></dt>
<dd><p>通过此选项，可以创建<acronym>POSIX.1-2001</acronym>格式的归档文件（请参见<a href="#SEC146"><acronym>GNU</acronym></a>部分<a href="#SEC146"><code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a> ）并修改方式<code>tar</code>处理扩展标头关键字。 <var>Keyword-list</var>是关键字选项的逗号分隔列表。有关详细讨论，请参见<a href="#SEC147">控制扩展头关键字</a>部分。
</p>
<p><a name="g_t_002d_002dportability"></a>
<a name="IDX145"></a>
</p></dd>
<dt> <samp>`--portability'</samp></dt>
<dt> <samp>`--old-archive'</samp></dt>
<dd><p>的同义词<samp>`--format=v7'</samp> 。
</p>
<p><a name="g_t_002d_002dposix"></a>
<a name="IDX146"></a>
</p></dd>
<dt> <samp>`--posix'</samp></dt>
<dd><p>和...一样<samp>`--format=posix'</samp> 。
</p>
<p><a name="g_t_002d_002dpreserve_002dorder"></a>
<a name="IDX147"></a>
</p></dd>
<dt> <samp>`--preserve-order'</samp></dt>
<dd>
<p>（看到<samp>`--same-order'</samp> ;请参阅<a href="#SEC73">帮助阅读档案的选项</a>部分。）
</p>
<p><a name="g_t_002d_002dpreserve_002dpermissions"></a>
<a name="IDX148"></a>
<a name="g_t_002d_002dsame_002dpermissions"></a>
<a name="IDX149"></a>
</p></dd>
<dt> <samp>`--preserve-permissions'</samp></dt>
<dt> <samp>`--same-permissions'</samp></dt>
<dt> <samp>`-p'</samp></dt>
<dd>
<p>什么时候<code>tar</code>正在提取档案时，通常会从档案中指定的权限中减去用户的umask，然后使用该数字作为创建目标文件的权限。指定此选项指示<code>tar</code>它应该直接使用存档中的权限。请参阅<a href="#SEC84">设置访问权限</a>部分。
</p>
<p><a name="g_t_002d_002dquote_002dchars"></a>
<a name="IDX150"></a>
</p></dd>
<dt> <samp>`--quote-chars=<var>string</var>'</samp></dt>
<dd><p>一律引用以下字符： <var>string</var> ，即使所选的引用样式不会引用它们（请参见“ <a href="#SEC114">引用成员名称”</a>一节）。
</p>
<p><a name="g_t_002d_002dquoting_002dstyle"></a>
<a name="IDX151"></a>
</p></dd>
<dt> <samp>`--quoting-style=<var>style</var>'</samp></dt>
<dd><p>设置在打印成员名和文件名时要使用的引用样式（请参阅“ <a href="#SEC114">引用成员名”</a>一节）。有效<var>style</var>值是： <code>literal</code> ， <code>shell</code> ， <code>shell-always</code> ， <code>c</code> ， <code>escape</code> ， <code>locale</code>和<code>clocale</code> 。默认引用样式为<code>escape</code> ，除非在配置软件包时将其覆盖。
</p>
<p><a name="g_t_002d_002dread_002dfull_002drecords"></a>
<a name="IDX152"></a>
</p></dd>
<dt> <samp>`--read-full-records'</samp></dt>
<dt> <samp>`-B'</samp></dt>
<dd>
<p>指定<code>tar</code>应该重新阻止其输入，以便从具有错误实现的系统上的管道读取数据。请参阅<a href="#SEC73">帮助阅读档案的选项</a>部分。
</p>
<p><a name="g_t_002d_002drecord_002dsize"></a>
<a name="IDX153"></a>
</p></dd>
<dt> <samp>`--record-size=<var>size</var>[<var>suf</var>]'</samp></dt>
<dd>
<p>指示<code>tar</code>使用<var>size</var>访问档案时每个记录的字节数。该参数可以带有<em>大小后缀</em> ，例如<samp>`--record-size=10K'</samp> 10千字节。有关有效后缀的列表，请参见<a href="#size_002dsuffixes">size-</a> suffixes。有关此选项的详细说明，请参见<a href="#SEC160">“存档的阻塞因素”</a>部分。
</p>
<p><a name="g_t_002d_002drecursion"></a>
<a name="IDX154"></a>
</p></dd>
<dt> <samp>`--recursion'</samp></dt>
<dd>
<p>有了这个选项， <code>tar</code>递归到目录（默认）。请参阅“ <a href="#SEC117">下降到目录”</a>部分。
</p>
<p><a name="g_t_002d_002drecursive_002dunlink"></a>
<a name="IDX155"></a>
</p></dd>
<dt> <samp>`--recursive-unlink'</samp></dt>
<dd>
<p>从归档文件中提取具有相同名称的目录之前，请删除现有目录层次结构。请参阅“ <a href="#SEC82">递归取消链接”</a>部分。
</p>
<p><a name="g_t_002d_002dremove_002dfiles"></a>
<a name="IDX156"></a>
</p></dd>
<dt> <samp>`--remove-files'</samp></dt>
<dd>
<p>指挥<code>tar</code>在将源文件附加到归档文件后从文件系统中删除它。请参阅“ <a href="#SEC88">删除文件”</a>部分。
</p>
<p><a name="g_t_002d_002drestrict"></a>
<a name="IDX157"></a>
</p></dd>
<dt> <samp>`--restrict'</samp></dt>
<dd>
<p>禁止使用某些潜在有害的物质<code>tar</code>选项。当前，此选项禁用多卷菜单中的Shell调用（请参阅<a href="#SEC164">使用多个磁带</a>部分）。
</p>
<p><a name="g_t_002d_002drmt_002dcommand"></a>
<a name="IDX158"></a>
</p></dd>
<dt> <samp>`--rmt-command=<var>cmd</var>'</samp></dt>
<dd>
<p>通知<code>tar</code>它应该使用<var>cmd</var>而不是默认的<tt>`/ usr / libexec / rmt'</tt> （请参阅“ <a href="#SEC156">远程磁带服务器</a> <tt>”</tt>部分）。
</p>
<p><a name="g_t_002d_002drsh_002dcommand"></a>
<a name="IDX159"></a>
</p></dd>
<dt> <samp>`--rsh-command=<var>cmd</var>'</samp></dt>
<dd>
<p>通知<code>tar</code>那应该使用<var>cmd</var>与远程设备通信。请参阅<a href="#SEC155">设备选择和切换部分</a> 。
</p>
<p><a name="g_t_002d_002dsame_002dorder"></a>
<a name="IDX160"></a>
</p></dd>
<dt> <samp>`--same-order'</samp></dt>
<dt> <samp>`--preserve-order'</samp></dt>
<dt> <samp>`-s'</samp></dt>
<dd>
<p>此选项是针对<code>tar</code>在具有少量内存的计算机上运行时。它告知<code>tar</code>文件参数列表已被排序以匹配存档中文件的顺序。请参阅<a href="#SEC73">帮助阅读档案的选项</a>部分。
</p>
<p><a name="g_t_002d_002dsame_002downer"></a>
<a name="IDX161"></a>
</p></dd>
<dt> <samp>`--same-owner'</samp></dt>
<dd>
<p>提取档案时， <code>tar</code>将尝试保留在中指定的所有者<code>tar</code>使用此选项存档。这是超级用户的默认行为。此选项仅对普通用户有效。请参阅<a href="#SEC138">处理文件属性</a>部分。
</p>
<a name="IDX162"></a>
</dd>
<dt> <samp>`--same-permissions'</samp></dt>
<dd>
<p>（看到<samp>`--preserve-permissions'</samp> ;请参阅<a href="#SEC84">设置访问权限</a>部分。）
</p>
<p><a name="g_t_002d_002dseek"></a>
<a name="IDX163"></a>
</p></dd>
<dt> <samp>`--seek'</samp></dt>
<dt> <samp>`-n'</samp></dt>
<dd>
<p>假设存档媒体支持查找任意位置。通常<code>tar</code>自动确定是否可以查找档案。此选项旨在用于这种识别失败的情况。仅当存档可供读取时（例如， <samp>`--list'</samp>要么<samp>`--extract'</samp>选项）。
</p>
<p><a name="g_t_002d_002dselinux"></a>
<a name="IDX164"></a>
</p></dd>
<dt> <samp>`--selinux'</samp></dt>
<dd><p>启用SELinux上下文支持。请参见<a href="#SEC70">selinux</a>部分。
</p>
<p><a name="g_t_002d_002dshow_002ddefaults"></a>
<a name="IDX165"></a>
</p></dd>
<dt> <samp>`--show-defaults'</samp></dt>
<dd>
<p>显示用户使用的默认选项<code>tar</code>并成功退出。此选项适用于Shell脚本。这是使用此选项可以看到的示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --show-defaults</kbd>
--format=gnu -f- -b20 --quoting-style=escape
--rmt-command=/usr/libexec/rmt --rsh-command=/usr/bin/rsh
</pre></td></tr></tbody></table>

<p>注意，此选项仅输出一行。上面的示例输出已拆分为适合页面边界。请参阅“ <a href="#SEC46">获取<acronym>GNU”</acronym></a>部分<a href="#SEC46"><code>tar</code>默认值</a> 。
</p>
<p><a name="g_t_002d_002dshow_002domitted_002ddirs"></a>
<a name="IDX166"></a>
</p></dd>
<dt> <samp>`--show-omitted-dirs'</samp></dt>
<dd>
<p>指示<code>tar</code>提一下在操作时跳过的目录<code>tar</code>存档。请参阅<a href="#show_002domitted_002ddirs">show-omitted-dirs</a> 。
</p>
<p><a name="g_t_002d_002dshow_002dsnapshot_002dfield_002dranges"></a>
<a name="IDX167"></a>
</p></dd>
<dt> <samp>`--show-snapshot-field-ranges'</samp></dt>
<dd>
<p>显示此版本的版本允许的值范围<code>tar</code>对于快照文件中的每个字段，然后成功退出。请参阅<a href="#SEC194">“增量快照文件的格式”</a>部分。
</p>
<p><a name="g_t_002d_002dshow_002dtransformed_002dnames"></a>
<a name="IDX168"></a>
<a name="g_t_002d_002dshow_002dstored_002dnames"></a>
<a name="IDX169"></a>
</p></dd>
<dt> <samp>`--show-transformed-names'</samp></dt>
<dt> <samp>`--show-stored-names'</samp></dt>
<dd>
<p>应用任何转换后显示文件或成员名称（请参阅“ <a href="#SEC115">修改文件和成员名称”一节</a> ）。特别是，当与档案创建操作之一结合使用时，它会指示<code>tar</code>列出存储在档案中的成员名称，而不是实际的文件名。请参阅<a href="#listing-member-and-file-names">列出成员和文件名</a> 。
</p>
<p><a name="g_t_002d_002dskip_002dold_002dfiles"></a>
<a name="IDX170"></a>
</p></dd>
<dt> <samp>`--skip-old-files'</samp></dt>
<dd>
<p>从存档中提取文件时，请勿覆盖现有文件。请参阅<a href="#SEC79">保留旧文件</a>部分。
</p>
<p>此选项不同于<samp>`--keep-old-files'</samp>它不会将此类文件视为错误，而只是默默地避免覆盖它们。
</p>
<p>的<samp>`--warning=existing-file'</samp>选项可以与该选项一起使用，以生成有关现有旧文件的<a href="#SEC49">警告消息</a> （请参阅<a href="#SEC49">控制警告消息</a>部分）。
</p>
<p><a name="g_t_002d_002dsort"></a>
<a name="IDX171"></a>
</p></dd>
<dt> <samp>`--sort=<var>order</var>'</samp></dt>
<dd><p>读取目录时指定目录排序顺序。
<var>Order</var>可能是以下之一：</p>
<dl compact>
<dt> <samp>`none'</samp></dt>
<dd><p>不执行目录排序。这是默认值。
</p>
</dd>
<dt> <samp>`name'</samp></dt>
<dd><p>按名称对目录条目进行排序。操作系统可能会以或多或少的随机顺序传送目录条目，并对它们进行排序使可重复创建档案。
</p>
</dd>
<dt> <samp>`inode'</samp></dt>
<dd><p>在索引节点编号上对目录条目进行排序。在为某些文件系统创建归档文件时，按索引节点编号对目录进行排序可能会减少磁盘查找操作的数量。
</p>
</dd>
</dl>

<p><a name="g_t_002d_002dsparse"></a>
<a name="IDX172"></a>
</p></dd>
<dt> <samp>`--sparse'</samp></dt>
<dt> <samp>`-S'</samp></dt>
<dd>
<p>将文件添加到可有效处理稀疏文件的存档时，调用<acronym>GNU</acronym>扩展。请参阅<a href="#SEC137">存档稀疏文件</a> 。
</p>
<p><a name="g_t_002d_002dsparse_002dversion"></a>
<a name="IDX173"></a>
</p></dd>
<dt> <samp>`--sparse-version=<var>version</var>'</samp></dt>
<dd>
<p>指定存档稀疏文件时要使用的<em>格式版本</em> 。暗示<samp>`--sparse'</samp> 。请参阅<a href="#SEC137">存档稀疏文件</a> 。有关受支持的稀疏格式的描述，请参见“ <a href="#SEC190">存储稀疏文件”</a>一节。
</p>
<p><a name="g_t_002d_002dstarting_002dfile"></a>
<a name="IDX174"></a>
</p></dd>
<dt> <samp>`--starting-file=<var>name</var>'</samp></dt>
<dt> <samp>`-K <var>name</var>'</samp></dt>
<dd>
<p>此选项仅影响提取。 <code>tar</code>将跳过提取存档中的文件，直到找到与之匹配的文件为止<var>name</var> 。请参阅<a href="#SEC89">应对稀缺资源</a>一节。
</p>
<p><a name="g_t_002d_002dstrip_002dcomponents"></a>
<a name="IDX175"></a>
</p></dd>
<dt> <samp>`--strip-components=<var>number</var>'</samp></dt>
<dd><p>给定地带<var>number</var>提取文件名之前的主要组件。例如，如果归档文件<tt>“ archive.tar”</tt>包含<tt>“ / some / file / name”</tt> ，则运行</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar --extract --file archive.tar --strip-components=2
</pre></td></tr></tbody></table>

<p>会将该文件提取到文件<tt>“ name”中</tt> 。
</p>
<p>请参阅“ <a href="#SEC115">修改文件名和成员名”部分</a> 。
</p>
<p><a name="g_t_002d_002dsuffix"></a>
<a name="IDX176"></a>
</p></dd>
<dt> <samp>`--suffix=<var>suffix</var>'</samp></dt>
<dd>
<p>更改后缀<code>tar</code>从默认备份文件时使用<samp>`~'</samp> 。请参阅<a href="#SEC92">备份选项</a>部分。
</p>
<p><a name="g_t_002d_002dtape_002dlength"></a>
<a name="IDX177"></a>
</p></dd>
<dt> <samp>`--tape-length=<var>num</var>[<var>suf</var>]'</samp></dt>
<dt> <samp>`-L <var>num</var>[<var>suf</var>]'</samp></dt>
<dd>
<p>指定的磁带长度<code>tar</code>在写<var>num</var> x 1024字节长。如果可选<var>suf</var>给定，它指定要使用的乘数而不是1024。例如， <samp>`-L2M'</samp>表示2兆字节。请参阅<a href="#size_002dsuffixes">size-suffixes</a> ，以获取允许的后缀列表。有关此选项的详细讨论，请参见<a href="#SEC164">使用多个磁带</a> 。
</p>
<p><a name="g_t_002d_002dtest_002dlabel"></a>
<a name="IDX178"></a>
</p></dd>
<dt> <samp>`--test-label'</samp></dt>
<dd>
<p>读取音量标签。如果指定了参数，请测试其是否与卷标匹配。请参见<a href="#g_t_002d_002dtest_002dlabel-option">-test-label选项</a> 。
</p>
<p><a name="g_t_002d_002dto_002dcommand"></a>
<a name="IDX179"></a>
</p></dd>
<dt> <samp>`--to-command=<var>command</var>'</samp></dt>
<dd>
<p>提取期间<code>tar</code>将提取的文件通过管道传输到的标准输入<var>command</var> 。请参阅“ <a href="#SEC87">写入外部程序”一节</a> 。
</p>
<p><a name="g_t_002d_002dto_002dstdout"></a>
<a name="IDX180"></a>
</p></dd>
<dt> <samp>`--to-stdout'</samp></dt>
<dt> <samp>`-O'</samp></dt>
<dd>
<p>在提取过程中， <code>tar</code>会将文件提取到stdout而不是文件系统。请参阅“ <a href="#SEC86">写入标准输出”部分</a> 。
</p>
<p><a name="g_t_002d_002dtotals"></a>
<a name="IDX181"></a>
</p></dd>
<dt> <samp>`--totals[=<var>signo</var>]'</samp></dt>
<dd>
<p>显示处理归档文件时传输的字节总数。如果指定了参数，则在发出信号时根据请求显示这些数据<var>signo</var>交付给<code>tar</code> 。参见<a href="#totals">总计</a> 。
</p>
<p><a name="g_t_002d_002dtouch"></a>
<a name="IDX182"></a>
</p></dd>
<dt> <samp>`--touch'</samp></dt>
<dt> <samp>`-m'</samp></dt>
<dd>
<p>将提取文件的数据修改时间设置为提取时间，而不是存档中存储的数据修改时间。请参阅<a href="#SEC83">设置数据修改时间部分</a> 。
</p>
<p><a name="g_t_002d_002dtransform"></a>
<a name="IDX183"></a>
<a name="g_t_002d_002dxform"></a>
<a name="IDX184"></a>
</p></dd>
<dt> <samp>`--transform=<var>sed-expr</var>'</samp></dt>
<dt> <samp>`--xform=<var>sed-expr</var>'</samp></dt>
<dd><p>使用以下内容转换文件或成员名称<code>sed</code>替代表达<var>sed-expr</var> 。例如，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar cf archive.tar --transform 's,^\./,usr/,' .</kbd>
</pre></td></tr></tbody></table>

<p>将从当前工作目录添加到<tt>“存档”</tt>文件，替换初始文件<samp>`./'</samp>前缀<samp>`usr/'</samp> 。有关详细讨论，请参见“ <a href="#SEC115">修改文件和成员名称”部分</a> 。
</p>
<p>要在详细列表中查看转换后的成员名称，请使用<samp>`--show-transformed-names'</samp>选项（请参阅<a href="#show_002dtransformed_002dnames">show-transformed-names</a> ）。
</p>
<a name="IDX185"></a>
</dd>
<dt> <samp>`--uncompress'</samp></dt>
<dd>
<p>（看到<samp>`--compress'</samp> ，请参阅<a href="#SEC135">创建和读取压缩档案部分</a> ）</p>
<a name="IDX186"></a>
</dd>
<dt> <samp>`--ungzip'</samp></dt>
<dd>
<p>（看到<samp>`--gzip'</samp> ，请参阅<a href="#SEC135">创建和读取压缩档案部分</a> ）</p>
<p><a name="g_t_002d_002dunlink_002dfirst"></a>
<a name="IDX187"></a>
</p></dd>
<dt> <samp>`--unlink-first'</samp></dt>
<dt> <samp>`-U'</samp></dt>
<dd>
<p>指挥<code>tar</code>从档案系统中提取相应文件之前，先从文件系统中删除该文件。请参阅“ <a href="#SEC81">首先取消链接”</a>部分。
</p>
<p><a name="g_t_002d_002dunquote"></a>
<a name="IDX188"></a>
</p></dd>
<dt> <samp>`--unquote'</samp></dt>
<dd><p>启用取消引用输入文件或成员名称（默认）。请参见<a href="#input-name-quoting">输入名称引用</a> 。
</p>
<p><a name="g_t_002d_002duse_002dcompress_002dprogram"></a>
<a name="IDX189"></a>
</p></dd>
<dt> <samp>`--use-compress-program=<var>prog</var>'</samp></dt>
<dt> <samp>`-I=<var>prog</var>'</samp></dt>
<dd>
<p>指示<code>tar</code>通过访问档案<var>prog</var> ，假定是某种压缩程序。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
<p><a name="g_t_002d_002dutc"></a>
<a name="IDX190"></a>
</p></dd>
<dt> <samp>`--utc'</samp></dt>
<dd>
<p>以<acronym>UTC</acronym>显示文件修改日期。此选项暗示<samp>`--verbose'</samp> 。
</p>
<p><a name="g_t_002d_002dverbatim_002dfiles_002dfrom"></a>
<a name="IDX191"></a>
</p></dd>
<dt> <samp>`--verbatim-files-from'</samp></dt>
<dd>
<p>指导<acronym>GNU</acronym> <code>tar</code>将从文件列表中读取的每一行都视为文件名，即使它以短划线开头也是如此。
</p>
<p>文件列表随<samp>`--files-from'</samp> （ <samp>`-T'</samp> ） 选项。默认情况下，将从文件列表中读取的每一行都首先修剪掉开头和结尾的空格，如果结果以短划线开头，则将其视为<acronym>GNU</acronym> <code>tar</code>命令行选项。
</p>
<p>使用<samp>`--verbatim-files-from'</samp>选项以禁用此特殊处理。这有助于使用<code>tar</code>与创建的文件列表<code>file</code>命令。
</p>
<p>此选项影响所有<samp>`--files-from'</samp>在命令行之后出现的选项。其效果可通过<samp>`--no-verbatim-files-from'</samp>选项。
</p>
<p>该选项暗含<samp>`--null'</samp>选项。
</p>
<p>参见<a href="#verbatim_002dfiles_002dfrom">verbatim-files-from</a> 。
</p>
<p><a name="g_t_002d_002dverbose"></a>
<a name="IDX192"></a>
</p></dd>
<dt> <samp>`--verbose'</samp></dt>
<dt> <samp>`-v'</samp></dt>
<dd>
<p>指定<code>tar</code>应该对其执行的操作更为详细。对于某些操作，可以多次指定此选项，以增加显示的信息量。请参阅<a href="#SEC47">检查</a>部分<a href="#SEC47"><code>tar</code>进步</a> 。
</p>
<p><a name="g_t_002d_002dverify"></a>
<a name="IDX193"></a>
</p></dd>
<dt> <samp>`--verify'</samp></dt>
<dt> <samp>`-W'</samp></dt>
<dd>
<p>在创建档案时，验证档案是否正确写入。请参阅<a href="#SEC169">验证数据存储部分</a> 。
</p>
<p><a name="g_t_002d_002dversion"></a>
<a name="IDX194"></a>
</p></dd>
<dt> <samp>`--version'</samp></dt>
<dd>
<p>在标准输出上打印有关程序名称，版本，来源和法律状态的信息，然后成功退出。见<a href="#SEC45"><acronym>GNU</acronym></a>部分<a href="#SEC45"><code>tar</code>文件</a> 。
</p>
<p><a name="g_t_002d_002dvolno_002dfile"></a>
<a name="IDX195"></a>
</p></dd>
<dt> <samp>`--volno-file=<var>file</var>'</samp></dt>
<dd>
<p>与...结合使用<samp>`--multi-volume'</samp> 。 <code>tar</code>将跟踪正在处理的多卷档案的哪个卷<var>file</var> 。请参见<a href="#volno_002dfile">volno-file</a> 。
</p>
<p><a name="g_t_002d_002dwarning"></a>
<a name="IDX196"></a>
</p></dd>
<dt> <samp>`--warning=<var>keyword</var>'</samp></dt>
<dd>
<p>启用或禁用由...标识的警告消息<var>keyword</var> 。消息被抑制，如果<var>keyword</var>前缀为<samp>`no-'</samp> 。请参阅<a href="#SEC49">控制警告消息</a>部分。
</p>
<p><a name="g_t_002d_002dwildcards"></a>
<a name="IDX197"></a>
</p></dd>
<dt> <samp>`--wildcards'</samp></dt>
<dd><p>将成员名称与模式匹配时，请使用通配符。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dwildcards_002dmatch_002dslash"></a>
<a name="IDX198"></a>
</p></dd>
<dt> <samp>`--wildcards-match-slash'</samp></dt>
<dd><p>通配符匹配<samp>`/'</samp> 。请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
<p><a name="g_t_002d_002dxattrs"></a>
<a name="IDX199"></a>
</p></dd>
<dt> <samp>`--xattrs'</samp></dt>
<dd><p>启用扩展属性支持。参见章节<a href="#SEC70">xattrs</a> 。
</p>
<p><a name="g_t_002d_002dxattrs_002dexclude"></a>
<a name="IDX200"></a>
</p></dd>
<dt> <samp>`--xattrs-exclude=<var>pattern</var>'</samp></dt>
<dd><p>为xattr键指定排除模式。请参阅<a href="#SEC70">xattrs-exclude</a>部分。
</p>
<p><a name="g_t_002d_002dxattrs_002dinclude"></a>
<a name="IDX201"></a>
</p></dd>
<dt> <samp>`--xattrs-include=<var>pattern</var>.'</samp></dt>
<dd><p>指定xattr键的包含模式。 <var>pattern</var>是一种浮动模式，例如<samp>`--xattrs-include='user.*''</samp>仅包含用户名称空间中的属性。请参阅部分<a href="#SEC70">xattrs-include</a> 。
</p>
<p><a name="g_t_002d_002dxz"></a>
<a name="IDX202"></a>
</p></dd>
<dt> <samp>`--xz'</samp></dt>
<dt> <samp>`-J'</samp></dt>
<dd><p>使用<code>xz</code>用于压缩或解压缩档案。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
</dd>
<dt> <samp>`--zstd'</samp></dt>
<dd><p>使用<code>zstd</code>用于压缩或解压缩档案。请参阅<a href="#SEC135">创建和读取压缩档案一节</a> 。
</p>
</dd>
</dl>

<hr size="6">
<a name="Short-Option-Summary"></a>
<a name="SEC43"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC42" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC44" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC40" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.4.3短期期权交叉参考</h3>

<p>这是所有短期权形式的按字母顺序排列的列表，它们与等效的长期权匹配。
</p>
<table>
<thead><tr><th><p>短期权</p></th><th><p>参考</p>
</th></tr></thead>
<tbody><tr><td><p>-一种</p></td><td><p> <a href="#g_t_002d_002dconcatenate">-concatenate</a> 。
</p>
</td></tr>
<tr><td><p>-B</p></td><td><p> <a href="#g_t_002d_002dread_002dfull_002drecords">-阅读完整记录</a> 。
</p>
</td></tr>
<tr><td><p>-C</p></td><td><p> <a href="#g_t_002d_002ddirectory">目录</a> 。
</p>
</td></tr>
<tr><td><p>-F</p></td><td><p> <a href="#g_t_002d_002dinfo_002dscript">-info-script</a> 。
</p>
</td></tr>
<tr><td><p>-G</p></td><td><p> <a href="#g_t_002d_002dincremental">-增量</a> 。
</p>
</td></tr>
<tr><td><p>-J</p></td><td><p> <a href="#g_t_002d_002dxz">-xz</a> 。
</p>
</td></tr>
<tr><td><p>-K</p></td><td><p> <a href="#g_t_002d_002dstarting_002dfile">-starting-file</a> 。
</p>
</td></tr>
<tr><td><p>-L</p></td><td><p> <a href="#g_t_002d_002dtape_002dlength">-tape-length</a> 。
</p>
</td></tr>
<tr><td><p>-M</p></td><td><p> <a href="#g_t_002d_002dmulti_002dvolume">-多卷</a> 。
</p>
</td></tr>
<tr><td><p>-N</p></td><td><p> <a href="#g_t_002d_002dnewer">-更新</a> 。
</p>
</td></tr>
<tr><td><p>-O</p></td><td><p> <a href="#g_t_002d_002dto_002dstdout">-to-stdout</a> 。
</p>
</td></tr>
<tr><td><p>-P</p></td><td><p> <a href="#g_t_002d_002dabsolute_002dnames">-绝对名称</a>
</p>
</td></tr>
<tr><td><p>-R</p></td><td><p> <a href="#g_t_002d_002dblock_002dnumber">-block-number</a> 。
</p>
</td></tr>
<tr><td><p>-S</p></td><td><p> <a href="#g_t_002d_002dsparse">-稀疏</a> 。
</p>
</td></tr>
<tr><td><p>-T</p></td><td><p> <a href="#g_t_002d_002dfiles_002dfrom">-files-from</a> 。
</p>
</td></tr>
<tr><td><p>-U</p></td><td><p> <a href="#g_t_002d_002dunlink_002dfirst">-unlink-first</a> 。
</p>
</td></tr>
<tr><td><p>-V</p></td><td><p> <a href="#g_t_002d_002dlabel">标签</a>
</p>
</td></tr>
<tr><td><p>-W</p></td><td><p> <a href="#g_t_002d_002dverify">-verify</a> 。
</p>
</td></tr>
<tr><td><p>-X</p></td><td><p> <a href="#g_t_002d_002dexclude_002dfrom">-从-排除</a> 。
</p>
</td></tr>
<tr><td><p>-Z</p></td><td><p> <a href="#g_t_002d_002dcompress">-压缩</a>
</p>
</td></tr>
<tr><td><p>-b</p></td><td><p> <a href="#g_t_002d_002dblocking_002dfactor">阻碍因素</a> 。
</p>
</td></tr>
<tr><td><p>-C</p></td><td><p> <a href="#g_t_002d_002dcreate">-创建</a> 。
</p>
</td></tr>
<tr><td><p>-d</p></td><td><p> <a href="#g_t_002d_002dcompare">-比较</a> 。
</p>
</td></tr>
<tr><td><p>-F</p></td><td><p> <a href="#g_t_002d_002dfile">-文件</a> 。
</p>
</td></tr>
<tr><td><p>-G</p></td><td><p> <a href="#g_t_002d_002dlisted_002dincremental">列出的递增</a> 。
</p>
</td></tr>
<tr><td><p>-H</p></td><td><p> <a href="#g_t_002d_002ddereference">-dereference</a> 。
</p>
</td></tr>
<tr><td><p>-一世</p></td><td><p> <a href="#g_t_002d_002dignore_002dzeros">-ignore-zeros</a>
</p>
</td></tr>
<tr><td><p>-j</p></td><td><p> <a href="#g_t_002d_002dbzip2">-bzip2</a> 。
</p>
</td></tr>
<tr><td><p>-k</p></td><td><p> <a href="#g_t_002d_002dkeep_002dold_002dfiles">-keep-old-files</a> 。
</p>
</td></tr>
<tr><td><p>-l</p></td><td><p> <a href="#g_t_002d_002dcheck_002dlinks">-check-links</a> 。
</p>
</td></tr>
<tr><td><p>-米</p></td><td><p> <a href="#g_t_002d_002dtouch">-触摸</a> 。
</p>
</td></tr>
<tr><td><p>-o</p></td><td><p>提取时，与<a href="#g_t_002d_002dno_002dsame_002downer">-no-same-owner相同</a> 。创建时， <a href="#g_t_002d_002dold_002darchive">-old-archive</a> 。
</p>
<p>不推荐使用后者。保留它是为了与早期版本的<acronym>GNU</acronym>兼容<code>tar</code> 。在将来的版本中<samp>`-o'</samp>相当于<samp>`--no-same-owner'</samp>只要。
</p>
</td></tr>
<tr><td><p>-p</p></td><td><p> <a href="#g_t_002d_002dpreserve_002dpermissions">-preserve-permissions</a> 。
</p>
</td></tr>
<tr><td><p>-r</p></td><td><p> <a href="#g_t_002d_002dappend">-追加</a>
</p>
</td></tr>
<tr><td><p>-s</p></td><td><p> <a href="#g_t_002d_002dsame_002dorder">-相同顺序</a> 。
</p>
</td></tr>
<tr><td><p>-t</p></td><td><p> <a href="#g_t_002d_002dlist">-list</a> 。
</p>
</td></tr>
<tr><td><p>-u</p></td><td><p> <a href="#g_t_002d_002dupdate">-更新</a>
</p>
</td></tr>
<tr><td><p>-v</p></td><td><p> <a href="#g_t_002d_002dverbose">-冗长</a> 。
</p>
</td></tr>
<tr><td><p>-w</p></td><td><p> <a href="#g_t_002d_002dinteractive">-interactive</a> 。
</p>
</td></tr>
<tr><td><p>-X</p></td><td><p> <a href="#g_t_002d_002dextract">提取</a> 。
</p>
</td></tr>
<tr><td><p>-z</p></td><td><p> <a href="#g_t_002d_002dgzip">-gzip</a> 。
</p>
</td></tr>
</tbody></table>

<hr size="6">
<a name="Position_002dSensitive-Options"></a>
<a name="SEC44"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC43" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC45" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC40" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">3.4.4位置敏感选项</h3>

<p>一些<acronym>GNU</acronym> <code>tar</code>选项可以在同一调用中多次使用，并影响出现在它们之后的所有参数。这些选项可控制如何选择文件名以及使用哪种模式匹配。
</p>
<p>最明显的例子是<samp>`-C'</samp>选项。它指示<code>tar</code>在处理其余命令行之前，请<a href="#SEC119">更改</a>为作为其参数指定的目录（请参阅<a href="#SEC119">更改工作目录部分</a> ）。因此，在以下命令中：</p>
<table><tbody><tr><td> </td><td><pre class="example"><kbd>tar -c -f a.tar -C /etc passwd -C /var log spool</kbd>
</pre></td></tr></tbody></table>

<p>文件<tt>“ passwd”</tt>将在目录<tt>“ / etc”中搜索</tt> ，文件<tt>“ log”</tt>和<tt>“假脱机”</tt>在<tt>“ / var”中</tt> 。
</p>
<p>这些选项也可以在随设备提供的文件列表中使用。 <samp>`--files-from'</samp> （ <samp>`-T'</samp> ）选项（请参阅<a href="#SEC108">从文件读取名称</a>部分）。在这种情况下，它们会影响文件之后出现在该文件中的所有文件（模式），并对该文件之后处理的所有参数保持有效。例如，如果文件<tt>“ list.txt”</tt>包含：</p>
<table><tbody><tr><td> </td><td><pre class="example">README
-C src
main.c
</pre></td></tr></tbody></table>

<p>和<code>tar</code>被调用如下：</p>
<table><tbody><tr><td> </td><td><pre class="example"><kbd>tar -c -f a.tar -T list.txt Makefile</kbd>
</pre></td></tr></tbody></table>

<p>那么将在当前工作目录中查找文件<tt>“ README”</tt> ，并在目录<tt>“ src”中</tt>查找文件<tt>“ main.c”</tt>和<tt>“ Makefile</tt> <tt>”</tt> 。
</p>
<p>许多选项都可以加上前缀<samp>`--no-'</samp>取消原始选项的效果。
</p>
<p>例如， <samp>`--recursion'</samp>选项控制是否在子目录中递归。对应的<samp>`--no-recursion'</samp>禁用它。考虑下面的命令。它将目录中的所有文件和目录以及目录中的所有文件和目录存储在目录<tt>“ / usr</tt> <tt>”中</tt> ，而无需递归它们<a name="DOCF6" href="#FOOT6">（6）</a> ：</p>
<table><tbody><tr><td> </td><td><pre class="example">tar -cf a.tar --recursion /usr --no-recursion /var/*
</pre></td></tr></tbody></table>
<p>在创建档案期间， <acronym>GNU</acronym> <code>tar</code>跟踪使用的位置选项以及受它们影响的参数。如果发现任何此类选项以明显错误的方式使用，则将报告此事实并将退出代码设置为2。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>tar -cf a.tar . --exclude '*.o'</kbd>
tar: The following options were used after any non-optional
arguments in archive create or update mode.  These options are
positional and affect only arguments that follow them.  Please,
rearrange them properly.
tar: --exclude '*.o' has no effect
tar: Exiting with failure status due to previous errors
</pre></td></tr></tbody></table>
<p>下表总结了所有位置敏感的选项。
</p>
<dl compact>
<dt> <samp>`--directory=<var>dir</var>'</samp></dt>
<dt> <samp>`-C <var>dir</var>'</samp></dt>
<dd><p>请参阅<a href="#SEC119">更改工作目录部分</a> 。
</p>
</dd>
<dt> <samp>`--null'</samp></dt>
<dt> <samp>`--no-null'</samp></dt>
<dd><p>见章节<a href="#SEC109"><code>NUL</code> -终止的文件名</a> 。
</p>
</dd>
<dt> <samp>`--unquote'</samp></dt>
<dt> <samp>`--no-unquote'</samp></dt>
<dd><p>请参见<a href="#input-name-quoting">输入名称引用</a> 。
</p>
</dd>
<dt> <samp>`--verbatim-files-from'</samp></dt>
<dt> <samp>`--no-verbatim-files-from'</samp></dt>
<dd><p>参见<a href="#verbatim_002dfiles_002dfrom">verbatim-files-from</a> 。
</p>
</dd>
<dt> <samp>`--recursion'</samp></dt>
<dt> <samp>`--no-recursion'</samp></dt>
<dd><p>请参阅“ <a href="#SEC117">下降到目录”</a>部分。
</p>
</dd>
<dt> <samp>`--anchored'</samp></dt>
<dt> <samp>`--no-anchored'</samp></dt>
<dd><p>请参见<a href="#anchored-patterns">锚定模式</a> 。
</p>
</dd>
<dt> <samp>`--ignore-case'</samp></dt>
<dt> <samp>`--no-ignore-case'</samp></dt>
<dd><p>请参阅<a href="#case_002dinsensitive-matches">不区分大小写的匹配</a> 。
</p>
</dd>
<dt> <samp>`--wildcards'</samp></dt>
<dt> <samp>`--no-wildcards'</samp></dt>
<dd><p>请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
</dd>
<dt> <samp>`--wildcards-match-slash'</samp></dt>
<dt> <samp>`--no-wildcards-match-slash'</samp></dt>
<dd><p>请参阅<a href="#SEC113">控制模式匹配部分</a> 。
</p>
</dd>
<dt> <samp>`--exclude'</samp></dt>
<dd><p>请参阅<a href="#SEC110">排除某些文件</a>一节。
</p>
</dd>
<dt> <samp>`--exclude-from'</samp></dt>
<dt> <samp>`-X'</samp></dt>
<dt> <samp>`--exclude-caches'</samp></dt>
<dt> <samp>`--exclude-caches-under'</samp></dt>
<dt> <samp>`--exclude-caches-all'</samp></dt>
<dt> <samp>`--exclude-tag'</samp></dt>
<dt> <samp>`--exclude-ignore'</samp></dt>
<dt> <samp>`--exclude-ignore-recursive'</samp></dt>
<dt> <samp>`--exclude-tag-under'</samp></dt>
<dt> <samp>`--exclude-tag-all'</samp></dt>
<dt> <samp>`--exclude-vcs'</samp></dt>
<dt> <samp>`--exclude-vcs-ignores'</samp></dt>
<dt> <samp>`--exclude-backups'</samp></dt>
<dd><p>请参阅<a href="#SEC110">排除某些文件</a>一节。
</p></dd>
</dl>

<hr size="6">
<a name="help"></a>
<a name="SEC45"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC44" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC46" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</h2>

<p>注意，第一件事实际上是检查您是否正在使用<acronym>GNU</acronym> <code>tar</code> ， 确实。的<samp>`--version'</samp>选择原因<code>tar</code>在标准输出上打印有关其名称，版本，来源和法律地位的信息，然后成功退出。例如， <samp>`tar --version'</samp>可能会打印：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar (GNU tar) 1.32
Copyright (C) 2013-2019 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by John Gilmore and Jay Fenlason.
</pre></td></tr></tbody></table>

<p>第一次出现<samp>`tar'</samp>上面结果中的是程序包中的程序名称（例如， <code>rmt</code>是另一个程序），而第二次出现<samp>`tar'</samp>是程序包本身的名称，可能包含许多程序。该程序包当前名为<samp>`tar'</samp> ，在主程序名称之后包含<a name="DOCF7" href="#FOOT7">（7）</a> 。
</p>
<a name="IDX203"></a>
<a name="IDX204"></a>
<a name="IDX205"></a>
<p>您可能想做的另一件事是检查某些特定内容的拼写或含义<code>tar</code>您可以在不仔细阅读本手册的情况下选择本手册。<acronym>GNU</acronym> <code>tar</code>具有简短的帮助功能，可通过<samp>`--help'</samp>选项。通过使用此选项， <code>tar</code>将打印使用情况消息，列出标准输出上的所有可用选项，然后成功退出，无需执行任何其他操作并忽略所有其他选项。即使这只是一个简短的摘要，也可能需要几个屏幕。因此，如果您不使用某种可滚动窗口，则可能更喜欢使用以下内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --help | less</kbd>
</pre></td></tr></tbody></table>

<p>在这里假设您喜欢使用<code>less</code>传呼机。其他受欢迎的传呼机是<code>more</code>和<code>pg</code> 。如果你知道一些<var>keyword</var>哪个让您感兴趣并且不想阅读所有<samp>`--help'</samp>输出，另一个常见用法是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar --help | grep <var>keyword</var>
</pre></td></tr></tbody></table>

<p>仅获取相关行。但是请注意，有些<code>tar</code>选项的描述行很长，以上命令仅列出其中的第一行。
</p>
<p>选项摘要显示的确切外观<kbd>tar --help</kbd>是可配置的。有关详细说明，请参阅“ <a href="#SEC185">配置帮助摘要”</a>部分。
</p>
<a name="IDX206"></a>
<p>如果只希望检查选项的拼写，请运行<kbd>tar --usage</kbd>可能是一个更好的选择。这将显示一个简短的列表<code>tar</code>选项，不附带解释。
</p>
<p>简短的帮助输出非常简洁，您可能必须返回完整的文档以获取准确的要点。如果您正在阅读本段，则已经有<code>tar</code>某种形式的手册。该手册可从<a href="http://www.gnu.org/software/tar/manual">http://www.gnu.org/software/tar/manual中</a>以多种形式获得。它可能是从<acronym>GNU</acronym>打印出来的<code>tar</code>分发，前提是您已经在某个地方安装了TeX，并且周围装有激光打印机。只需配置发行版，执行命令<samp>`make dvi'</samp> ，然后按通常方式打印<tt>doc / tar.dvi</tt> （请联系您的本地专家以了解操作方法）。如果是<acronym>GNU</acronym> <code>tar</code>已方便地安装在您的位置，本手册也可以以交互，超文本形式作为信息文件提供。刚打电话<samp>`info tar'</samp>或者，如果您没有<code>info</code>程序方便，请使用<acronym>GNU</acronym> Emacs中提供的信息阅读器，调用<samp>`tar'</samp>从“信息”主菜单中。
</p>
<p>目前没有<code>man</code> <acronym>GNU的</acronym>页面<code>tar</code> 。如果您观察到这样的<code>man</code>您正在运行的系统上的页面，它不属于<acronym>GNU</acronym> <code>tar</code> ，或者它不是由<acronym>GNU</acronym>生产的。一些软件包维护者会转换<kbd>tar --help</kbd>使用以下命令输出到手册页<code>help2man</code> 。无论如何，请记住有关<acronym>GNU</acronym>的权威信息来源<code>tar</code>是Texinfo文档。
</p>
<hr size="6">
<a name="defaults"></a>
<a name="SEC46"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC45" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC47" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.6获取<acronym>GNU</acronym> <code>tar</code>默认值</h2>

<p><acronym>GNU</acronym> <code>tar</code>有一些预定义的默认值，当您未明确指定其他值时会使用这些默认值。要获取此类默认值的列表，请使用<samp>`--show-defaults'</samp>选项。这将以以下形式输出值<code>tar</code>命令行选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --show-defaults</kbd>
--format=gnu -f- -b20 --quoting-style=escape
--rmt-command=/etc/rmt --rsh-command=/usr/bin/rsh
</pre></td></tr></tbody></table>

<p>注意，此选项仅输出一行。上面的示例输出已拆分为适合页面边界。
</p>

<p>上面的输出显示此版本的<acronym>GNU</acronym> <code>tar</code>默认使用<samp>`gnu'</samp>存档格式（请参阅<a href="#SEC133">控制存档格式</a>一节），如果没有，它将使用标准输出作为存档<samp>`--file'</samp>选项的情况下（见<a href="#SEC14">的<samp>`--file'</samp>选项</a> ），默认阻止因子为20（请参阅<a href="#SEC160">“存档的阻止因子”</a>部分）。它还显示了默认位置<code>tar</code>会寻找<code>rmt</code>和<code>rsh</code>二进制文件。
</p>
<hr size="6">
<a name="verbose"></a>
<a name="SEC47"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC46" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC48" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.7检查<code>tar</code>进展</h2>

<p>通常， <code>tar</code>执行大多数操作时，不会向用户报告任何信息（错误消息除外）。使用时<code>tar</code>如果有很多选择，尤其是行为复杂或难以预测的选择，则可能会犯下严重的错误。
<code>tar</code>提供了几种观察方法<code>tar</code>更轻松。这些选项导致<code>tar</code>在工作过程中打印信息，您可能希望将它们用于对正在发生的事情更加谨慎，或者仅仅是为了娱乐自己。但是，如果在归档文件上操作时遇到问题，则可能不仅需要一条错误消息，还需要更多信息才能解决问题。以下选项可能是有用的诊断工具。
</p>
<a name="IDX207"></a>
<a name="IDX208"></a>
<p>通常， <samp>`--list'</samp> （ <samp>`-t'</samp> ）列出存档的命令仅打印文件名（每行一个），而其他命令则保持沉默。当用于大多数操作时， <samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项原因<code>tar</code>打印每个文件或归档成员在处理时的名称。这和其他使<code>tar</code>打印状态信息在监视中可能很有用<code>tar</code> 。
</p>
<p>用<samp>`--create'</samp>要么<samp>`--extract'</samp> ， <samp>`--verbose'</samp>一次使用仅打印文件或成员在处理时的名称。两次使用会导致<code>tar</code>为每个成员打印更长的列表（有关<a href="#verbose-member-listing">详细信息</a> ，请参阅<a href="#verbose-member-listing">详细成员列表</a> ）。以来<samp>`--list'</samp>已经打印出成员的名字， <samp>`--verbose'</samp>与<samp>`--list'</samp>原因<code>tar</code>打印<samp>`ls -l'</samp>输入档案中文件的清单。以下示例均提取具有长列表输出的成员：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --extract --file=archive.tar --verbose --verbose</kbd>
$ <kbd>tar xvvf archive.tar</kbd>
</pre></td></tr></tbody></table>
<p>详细输出出现在标准输出上，除非将归档写入标准输出时，如<samp>`tar --create --file=- --verbose'</samp> （ <samp>`tar cvf -'</samp> ， 甚至<samp>`tar cv'</samp> -如果安装程序将标准输出作为默认存档）。在这种情况下<code>tar</code>将详细输出写入标准错误流。
</p>
<p>如果<samp>`--index-file=<var>file</var>'</samp>被指定<code>tar</code>发送详细输出到<var>file</var>而不是标准输出或标准错误。
</p>
<p><a name="totals"></a><a name="IDX209"></a><a name="IDX210"></a>的<samp>`--totals'</samp>选择原因<code>tar</code>以在标准错误上打印处理归档文件时传输的字节总数。创建或附加到归档文件时，此选项将打印写入归档文件的字节数以及写入它们的平均速度，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --totals /home</kbd>
Total bytes written: 7924664320 (7.4GiB, 85MiB/s)
</pre></td></tr></tbody></table>
<p>读取档案时，此选项显示读取的字节数：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -x -f archive.tar --totals</kbd>
Total bytes read: 7924664320 (7.4GiB, 95MiB/s)
</pre></td></tr></tbody></table>
<p>最后，从存档中删除时， <samp>`--totals'</samp>选项显示数字和从存档中删除的字节数：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --delete -f foo.tar --totals --wildcards '*~'</kbd>
Total bytes read: 9543680 (9.2MiB, 201MiB/s)
Total bytes written: 3829760 (3.7MiB, 81MiB/s)
Total bytes deleted: 1474048
</pre></td></tr></tbody></table>
<p>您也可以根据要求获得此信息。什么时候<samp>`--totals'</samp>与参数一起使用时，此参数被解释为信号的符号名称，传递该信号时将打印统计信息：</p>
<dl compact>
<dt> <samp>`--totals=<var>signo</var>'</samp></dt>
<dd><p>在信号传递时打印统计信息<var>signo</var> 。有效参数为： <code>SIGHUP</code> ， <code>SIGQUIT</code> ， <code>SIGINT</code> ， <code>SIGUSR1</code>和<code>SIGUSR2</code> 。简称，无<samp>`SIG'</samp>前缀也被接受。
</p></dd>
</dl>

<p>两种形式<samp>`--totals'</samp>选项可以同时使用。从而， <kbd>tar -x --totals --totals=USR1</kbd>指示<code>tar</code>在提取完成后以及接收信号时从其默认存档中提取所有成员并打印统计信息<code>SIGUSR1</code> 。
</p>
<p><a name="Progress-information"></a><a name="IDX211"></a>的<samp>`--checkpoint'</samp>选项将偶尔的消息打印为<code>tar</code>读取或写入存档。它是为那些不需要更详细（且大量）输出的人而设计的<samp>`--block-number'</samp> （ <samp>`-R'</samp> ），但希望通过视觉确认<code>tar</code>实际上正在取得进步。默认情况下，它每读取或写入10条记录就会打印一条消息。可以通过在等号后给其数字参数来更改此值：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=1000</kbd> /var
tar: Write checkpoint 1000
tar: Write checkpoint 2000
tar: Write checkpoint 3000
</pre></td></tr></tbody></table>
<p>本示例显示了由以下人员使用的默认检查点消息<code>tar</code> 。如果您在等号后紧接一个点，它将打印一个<samp>`.'</samp>在每个检查点<a name="DOCF8" href="#FOOT8">（8）</a> 。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=.1000</kbd> /var
...
</pre></td></tr></tbody></table>
<p>的<samp>`--checkpoint'</samp> option提供了一种灵活的机制，可以在击中检查点时执行任意操作，请参阅下一节（请参阅<a href="#SEC48">Checkpoints</a>部分），以获取更多信息。
</p>
<a name="IDX212"></a>
<p><a name="show_002domitted_002ddirs"></a>的<samp>`--show-omitted-dirs'</samp>选项，在读取存档时- <samp>`--list'</samp>要么<samp>`--extract'</samp> ，例如-导致为归档中的每个目录打印一条消息，而该消息被跳过。不管跳过原因如何，都会发生这种情况：该目录可能未在命令行上（隐式或显式）命名，可能由于使用了<samp>`--exclude=<var>pattern</var>'</samp>选项或其他原因。
</p>
<a name="IDX213"></a>
<a name="IDX214"></a>
<p><a name="block_002dnumber"></a>如果<samp>`--block-number'</samp> （ <samp>`-R'</samp> ） 用来， <code>tar</code>在触发该消息的存档中，打印出它通常会产生的每条消息以及其块号。另外，读取充满NUL的块时或到达存档文件的末尾时，会触发补充消息。截至目前，如果档案文件已由NUL块正确终止，则文件的读取可能会在遇到文件结尾之前停止，因此，文件结尾位置通常不会显示<samp>`--block-number'</samp> （ <samp>`-R'</samp> ） 用来。注意， <acronym>GNU</acronym> <code>tar</code>从管道读取档案时，先退出档案，然后退出。
</p>
<a name="IDX215"></a>
<p>当读取损坏的档案时，此选项特别有用，因为它有助于查明损坏的部分。它也可以与<samp>`--list'</samp> （ <samp>`-t'</samp> ）列出文件系统备份磁带时，允许您稍后在检索文件时在多个备份磁带中进行选择，以文件最早出现在磁带中（最靠近磁带前端）的磁带为准。请参阅<a href="#SEC92">备份选项</a>部分。
</p>
<hr size="6">
<a name="checkpoints"></a>
<a name="SEC48"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC47" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC49" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.8检查点</h2>

<p><em>检查点</em>是写之前的一段时间<var>n</var>记录到存档（ <em>写检查点</em> ），或在读之前<var>n</var>存档中的记录（ <em>读检查点</em> ）。检查点允许定期执行任意操作。
</p>
<p>使用以下选项启用检查点功能：</p>
<dl compact>
<dd><a name="IDX216"></a>
</dd>
<dt> <samp>`--checkpoint[=<var>n</var>]'</samp></dt>
<dd><p>在写入或读取每个检查点之前安排检查点<var>n</var>记录。的默认值<var>n</var>是10。
</p></dd>
</dl>

<p>可以在每个检查点执行任意<em>动作</em>的列表。这些操作包括：暂停，显示文本消息以及执行任意外部程序。动作是使用<samp>`--checkpoint-action'</samp>选项。
</p>
<dl compact>
<dd><a name="IDX217"></a>
</dd>
<dt> <samp>`--checkpoint-action=<var>action</var>'</samp></dt>
<dd><p>执行一个<var>action</var>在每个检查站。
</p></dd>
</dl>

<a name="IDX218"></a>
<p>最简单的值<var>action</var>是<samp>`echo'</samp> 。它指示<code>tar</code>在到达每个检查点时在标准错误流上显示默认消息。默认消息是（在<acronym>POSIX</acronym>语言环境中） <samp>`Write checkpoint <var>n</var>'</samp> ，用于编写检查点，以及<samp>`Read checkpoint <var>n</var>'</samp> ，用于读取检查点。这里， <var>n</var>代表检查点的序号。
</p>
<p>在其他语言环境中，使用此消息的翻译版本。
</p>
<p>这是默认操作，因此运行：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=1000 --checkpoint-action=echo</kbd> /var
</pre></td></tr></tbody></table>

<p>等效于：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=1000</kbd> /var
</pre></td></tr></tbody></table>
<p>的<samp>`echo'</samp>动作还允许提供自定义消息。为此，请在其后放置等号和消息，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--checkpoint-action=&quot;echo=Hit %s checkpoint #%u&quot;
</pre></td></tr></tbody></table>
<p>的<samp>`%s'</samp>和<samp>`%u'</samp>在上面的示例中，是<em>格式说明符</em> 。的<samp>`%s'</samp>说明符被替换为检查点的<em>类型</em> ： <samp>`write'</samp>要么<samp>`read'</samp> （或<acronym>POSIX</acronym>以外的语言环境中的相应翻译版本）。的<samp>`%u'</samp>说明符被替换为检查点的序号。因此，上面的示例与<samp>`--create'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar: Hit write checkpoint #10
tar: Hit write checkpoint #20
tar: Hit write checkpoint #30
</pre></td></tr></tbody></table>
<p>可用格式说明符的完整列表如下。其中一些可以采用可选参数。如果给出这些参数，则在百分号和指定字母之间用花括号括起来。
</p>
<dl compact>
<dt> <samp>`%s'</samp></dt>
<dd><p>检查点的打印类型（ <samp>`write'</samp>要么<samp>`read'</samp> ）。
</p>
</dd>
<dt> <samp>`%u'</samp></dt>
<dd><p>打印检查点的编号。
</p>
</dd>
<dt> <samp>`%{r,w,d}T'</samp></dt>
<dd><p>打印到目前为止已传输的字节数和近似的传输速度。可选参数提供在相应的读取，写入和删除字节数之前要使用的前缀。如果不存在，则默认为<samp>`R'</samp> 。 <samp>`W'</samp> ， <samp>`D'</samp> 。它们中的任何一个或全部都可以省略，例如<samp>`%{}T'</samp>表示打印没有任何前缀的相应统计信息。任何多余的参数（如果存在）都将被静默忽略。
</p>
<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>tar --delete -f f.tar --checkpoint-action=echo=&quot;#%u: %T&quot; main.c</kbd>
tar: #1: R: 0 (0B, 0B/s),W: 0 (0B, 0B/s),D: 0
tar: #2: R: 10240 (10KiB, 19MiB/s),W: 0 (0B, 0B/s),D: 10240
</pre></td></tr></tbody></table>

<p>另请参阅<samp>`totals'</samp>动作，如下所述。
</p>
</dd>
<dt> <samp>`%{<var>fmt</var>}t'</samp></dt>
<dd><p>使用输出当前本地时间<var>fmt</var>作为格式<code>strftime</code> （请参见<a href="strftime(3.html#g_t_0029strftime">strftime：（strftime（3））strftime</a>在<cite>strftime（3）手册页中的</cite> `strftime'部分）。的<samp>`{<var>fmt</var>}'</samp>部分是可选的。如果不存在，则默认格式为<samp>`%c'</samp> ，即当前语言环境的首选日期和时间表示。
</p>
</dd>
<dt> <samp>`%{<var>n</var>}*'</samp></dt>
<dd><p>用空格填充输出到<var>n</var>第列。如果<samp>`{<var>n</var>}'</samp>省略部分，则假定当前屏幕宽度。
</p>
</dd>
<dt> <samp>`%c'</samp></dt>
<dd><p>这是<samp>`%{%Y-%m-%d %H:%M:%S}t: %ds, %{read,wrote}T%*\r'</samp> ，主要用于<samp>`ttyout'</samp>动作（请参见下文）。
</p></dd>
</dl>

<p>除格式扩展外，消息字符串<em>还需取消引用</em> ，在此期间，反斜杠<em>转义序列</em>将替换为其相应的<acronym>ASCII</acronym>字符（请参见<a href="#escape-sequences">转义序列</a> ）。例如，以下操作将在每个检查点产生铃声和上述消息：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--checkpoint-action='echo=\aHit %s checkpoint #%u'
</pre></td></tr></tbody></table>
<a name="IDX219"></a>
<p>还有一个特殊的动作会产生声音信号： <samp>`bell'</samp> 。它不等于<samp>`echo='\a''</samp> ，因为<samp>`bell'</samp>将铃声直接发送到控制台（ <tt>`/ dev / tty'</tt> ），而<samp>`echo='\a''</samp>将其发送到标准错误。
</p>
<a name="IDX220"></a>
<p>的<samp>`ttyout=<var>string</var>'</samp>动作输出<var>string</var>到<tt>`/ dev / tty'</tt> ，所以即使标准输出重定向到其他地方也可以使用它。的<var>string</var>受到与相同的修改<samp>`echo'</samp>行动。与后者相反<samp>`ttyout'</samp>不前置<code>tar</code>字符串的可执行文件名，也不会在其后输出换行符。例如，以下操作将在同一屏幕行上打印检查点消息，覆盖之前的任何消息：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--checkpoint-action=&quot;ttyout=Hit %s checkpoint #%u%*\r&quot;
</pre></td></tr></tbody></table>

<p>注意使用<samp>`%*'</samp>说明符，以清除先前输出线的所有最终残留。作为更复杂的示例，请考虑以下事项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--checkpoint-action=ttyout='%{%Y-%m-%d %H:%M:%S}t (%d sec): #%u, %T%*\r'
</pre></td></tr></tbody></table>

<p>这将打印当前的本地时间，自tar启动以来已过期的秒数，检查点的序数，已传输的字节数和计算出的平均I / O速度。
</p>
<a name="IDX221"></a>
<p>另一个可用的检查点操作是<samp>`dot'</samp> （要么<samp>`.'</samp> ）。它指示<code>tar</code>在标准列表流上打印一个点，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=1000 --checkpoint-action=dot</kbd> /var
...
</pre></td></tr></tbody></table>
<p>与以前的<acronym>GNU</acronym>兼容<code>tar</code>在上一版本中，可以通过在检查点频率前面放置一个点来简化此操作，如上一节所示。
</p>
<a name="IDX222"></a>
<p>的<samp>`totals'</samp> action打印到目前为止已传输的字节总数。数据格式与<samp>`--totals'</samp>选项（请参阅<a href="#totals">总计</a> ）。也可以看看<samp>`%T'</samp>的格式说明符<samp>`echo'</samp>要么<samp>`ttyout'</samp>行动。
</p>
<a name="IDX223"></a>
<p>另一个动作<samp>`sleep'</samp> ，暂停<code>tar</code>在指定的秒数内。以下示例将在每个检查点停止30秒：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=1000 --checkpoint-action=sleep=30</kbd>
</pre></td></tr></tbody></table>
<p><a name="checkpoint-wait"></a><a name="IDX224"></a>的<code>wait=<var>signo</var></code>动作停止进一步执行，直到发出信号<var>signo</var>已交付。的有效值<var>signo</var>是： <code>SIGHUP</code> ， <code>SIGQUIT</code> ， <code>SIGINT</code> ， <code>SIGUSR1</code>和<code>SIGUSR2</code> 。的<samp>`SIG'</samp>前缀是可选的。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>tar -c -f arc --checkpoint=1000 --checkpoint-action wait=USR1 .</kbd>
</pre></td></tr></tbody></table>
<p>在此示例中， <acronym>GNU</acronym> <code>tar</code>将在每个第1000个检查点停止归档。等到<samp>`SIGUSR1'</samp>信号已传递，并恢复处理。
</p>
<p>该操作由<code>genfile</code>实用程序，用于在击中某些检查点时对输入文件进行修改（请参阅<a href="#SEC199">genfile</a>部分）。
</p>
<p><a name="checkpoint-exec"></a><a name="IDX225"></a>最后， <code>exec</code>操作执行给定的外部命令。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c --checkpoint=1000 --checkpoint-action=exec=/sbin/cpoint</kbd>
</pre></td></tr></tbody></table>
<p>提供的命令可以是任何有效的命令调用，带有或不带有其他命令行参数。如果确实包含参数，请别忘了用引号将其阻止，以防止它被外壳分割。有关更多详细信息，请参见“ <a href="#SEC55">运行外部命令”</a>部分。
</p>
<p>该命令获得一份<code>tar</code>的环境以及以下变量：</p>
<dl compact>
<dt> <code>TAR_VERSION</code></dt>
<dd><p><acronym>GNU</acronym> <code>tar</code>版本号。
</p>
</dd>
<dt> <code>TAR_ARCHIVE</code></dt>
<dd><p>档案名称<code>tar</code>正在处理。
</p>
</dd>
<dt> <code>TAR_BLOCKING_FACTOR</code></dt>
<dd><p>电流阻塞系数（请参阅“ <a href="#SEC158">阻塞”</a>一节）。
</p>
</dd>
<dt> <code>TAR_CHECKPOINT</code></dt>
<dd><p>检查点的编号。
</p>
</dd>
<dt> <code>TAR_SUBCOMMAND</code></dt>
<dd><p>描述操作的简短选项<code>tar</code>正在执行。参见<a href="#SEC59">“五种高级课程” <code>tar</code>操作</a> ，以获取子命令选项的完整列表。
</p>
</dd>
<dt> <code>TAR_FORMAT</code></dt>
<dd><p>正在处理的档案格式。有关存档格式名称的完整列表，请参见<a href="#SEC133">控制存档格式</a>一节。
</p></dd>
</dl>

<p>这些环境变量也可以作为参数传递给命令，前提是可以对它们进行正确的转义，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar -c -f arc.tar \
     --checkpoint-action='exec=/sbin/cpoint $TAR_CHECKPOINT'</kbd>
</pre></td></tr></tbody></table>

<p>请注意，单引号可以防止变量名称在调用时被外壳扩展<code>tar</code> 。
</p>
<p>通过提供几个动作，可以定义任意数量的动作<samp>`--checkpoint-action'</samp>命令行中的选项。例如，以下命令显示两条消息，暂停执行30秒并执行<tt>`/ sbin / cpoint'</tt>脚本：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>tar -c -f arc.tar \
       --checkpoint-action='\aecho=Hit %s checkpoint #%u' \
       --checkpoint-action='echo=Sleeping for 30 seconds' \
       --checkpoint-action='sleep=30' \
       --checkpoint-action='exec=/sbin/cpoint'</kbd>
</pre></td></tr></tbody></table>
<p>这个例子也说明了<samp>`--checkpoint-action'</samp>可以不用<samp>`--checkpoint'</samp> 。在这种情况下，假定使用默认检查点频率（每10条记录）。
</p>
<hr size="6">
<a name="warnings"></a>
<a name="SEC49"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC48" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC54" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.9控制警告消息</h2>

<p>有时，在执行请求的任务时， <acronym>GNU</acronym> <code>tar</code>注意一些并非完全错误的条件，但用户应注意这些条件。当这个情况发生时， <code>tar</code>发出描述情况的<em>警告消息</em> 。警告消息将输出为标准错误，它们不会影响的退出代码<code>tar</code>命令。
</p>
<a name="IDX226"></a>
<p><acronym>GNU</acronym> <code>tar</code>允许用户禁止显示部分或全部警告消息：</p>
<dl compact>
<dt> <samp>`--warning=<var>keyword</var>'</samp></dt>
<dd><p>控制显示由以下内容标识的警告消息<var>keyword</var> 。如果<var>keyword</var>以前缀开头<samp>`no-'</samp> ，这样的消息被抑制。否则，将启用它们。
</p>
<p>多<samp>`--warning'</samp>消息积累。
</p>
<p>下表列出了允许的值<var>keyword</var>以及他们控制的警告消息。
</p></dd>
</dl>

<a name="SEC50"></a>
<h3 class="subheading">关键字控制<code>tar</code>运作</h3>
<dl compact>
<dd><a name="IDX227"></a>
</dd>
<dt>所有</dt>
<dd><p>启用所有警告消息。这是默认值。
<a name="IDX228"></a>
</p></dd>
<dt>没有</dt>
<dd><p>禁用所有警告消息。
<a name="IDX229"></a>
<a name="IDX230"></a>
</p></dd>
<dt>空文件名</dt>
<dd><p><samp>`%s: file name read contains nul character'</samp>
<a name="IDX231"></a>
<a name="IDX232"></a>
</p></dd>
<dt>零零块</dt>
<dd><p><samp>`A lone zero block at %s'</samp>
</p></dd>
</dl>

<a name="SEC51"></a>
<h3 class="subheading">适用于的关键字<code>tar --create</code> </h3>
<dl compact>
<dd><a name="IDX233"></a>
<a name="IDX234"></a>
</dd>
<dt>缓存目录</dt>
<dd><p><samp>`%s: contains a cache directory tag %s; %s'</samp>
<a name="IDX235"></a>
<a name="IDX236"></a>
</p></dd>
<dt>文件缩小</dt>
<dd><p><samp>`%s: File shrank by %s bytes; padding with zeros'</samp>
<a name="IDX237"></a>
<a name="IDX238"></a>
</p></dd>
<dt>xdev</dt>
<dd><p><samp>`%s: file is on a different filesystem; not dumped'</samp>
<a name="IDX239"></a>
<a name="IDX240"></a>
<a name="IDX241"></a>
<a name="IDX242"></a>
</p></dd>
<dt>忽略文件</dt>
<dd><p><samp>`%s: Unknown file type; file ignored'</samp>
<br><samp>`%s: socket ignored'</samp>
<br><samp>`%s: door ignored'</samp>
<a name="IDX243"></a>
<a name="IDX244"></a>
</p></dd>
<dt>文件不变</dt>
<dd><p><samp>`%s: file is unchanged; not dumped'</samp>
<a name="IDX245"></a>
<a name="IDX246"></a>
<a name="IDX247"></a>
<a name="IDX248"></a>
</p></dd>
<dt>忽略存档</dt>
<dd><p><samp>`%s: file is the archive; not dumped'</samp>
<a name="IDX249"></a>
<a name="IDX250"></a>
</p></dd>
<dt>文件已删除</dt>
<dd><p><samp>`%s: File removed before we read it'</samp>
<a name="IDX251"></a>
<a name="IDX252"></a>
</p></dd>
<dt>文件更改</dt>
<dd><p><samp>`%s: file changed as we read it'</samp>
</p></dd>
<dt>读失败</dt>
<dd><p>禁止显示有关不可读文件或目录的警告。仅当与<samp>`--ignore-failed-read'</samp>选项。请参阅<a href="#SEC71">忽略读取失败</a>部分。
</p></dd>
</dl>

<a name="SEC52"></a>
<h3 class="subheading">适用于的关键字<code>tar --extract</code> </h3>
<dl compact>
<dd><a name="IDX253"></a>
<a name="IDX254"></a>
</dd>
<dt>现有文件</dt>
<dd><p><samp>`%s: skipping existing file'</samp>
<a name="IDX255"></a>
<a name="IDX256"></a>
<a name="IDX257"></a>
</p></dd>
<dt>时间戳记</dt>
<dd><p><samp>`%s: implausibly old time stamp %s'</samp>
<br><samp>`%s: time stamp %s is %s s in the future'</samp>
<a name="IDX258"></a>
<a name="IDX259"></a>
</p></dd>
<dt>连铸</dt>
<dd><p><samp>`Extracting contiguous files as regular files'</samp>
<a name="IDX260"></a>
<a name="IDX261"></a>
</p></dd>
<dt>符号链接广播</dt>
<dd><p><samp>`Attempting extraction of symbolic links as hard links'</samp>
<a name="IDX262"></a>
<a name="IDX263"></a>
</p></dd>
<dt>未知广播</dt>
<dd><p><samp>`%s: Unknown file type '%c', extracted as normal file'</samp>
<a name="IDX264"></a>
<a name="IDX265"></a>
</p></dd>
<dt>忽略更新</dt>
<dd><p><samp>`Current %s is newer or same age'</samp>
<a name="IDX266"></a>
<a name="IDX267"></a>
</p></dd>
<dt>未知关键字</dt>
<dd><p><samp>`Ignoring unknown extended header keyword '%s''</samp>
<a name="IDX268"></a>
</p></dd>
<dt>解压缩程序</dt>
<dd><p>控制尝试运行替代解压缩程序时发生的故障的详细描述（请参阅<a href="#alternative-decompression-programs">替代解压缩程序</a> ）。默认情况下，此警告处于禁用状态（除非<samp>`--verbose'</samp>用来）。使用此警告可以得到的一个常见示例是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --warning=decompress-program -x -f archive.Z</kbd>
tar (child): cannot run compress: No such file or directory
tar (child): trying gzip
</pre></td></tr></tbody></table>
<p>这意味着<code>tar</code>首先尝试解压缩<tt>档案。Z'</tt>使用<code>compress</code> ，并且当失败时，切换到<code>gzip</code> 。
<a name="IDX269"></a>
<a name="IDX270"></a>
</p></dd>
<dt>记录大小</dt>
<dd><p><samp>`Record size = %lu blocks'</samp>
</p></dd>
</dl>

<a name="SEC53"></a>
<h3 class="subheading">控制增量提取的关键字：</h3>
<dl compact>
<dd><a name="IDX271"></a>
<a name="IDX272"></a>
<a name="IDX273"></a>
</dd>
<dt>重命名目录</dt>
<dd><p><samp>`%s: Directory has been renamed from %s'</samp>
<br><samp>`%s: Directory has been renamed'</samp>
<a name="IDX274"></a>
<a name="IDX275"></a>
</p></dd>
<dt>新目录</dt>
<dd><p><samp>`%s: Directory is new'</samp>
<a name="IDX276"></a>
<a name="IDX277"></a>
</p></dd>
<dt>xdev</dt>
<dd><p><samp>`%s: directory is on a different device: not purging'</samp>
<a name="IDX278"></a>
<a name="IDX279"></a>
</p></dd>
<dt>坏转储目录</dt>
<dd><p><samp>`Malformed dumpdir: 'X' never used'</samp>
</p></dd>
</dl>

<hr size="6">
<a name="interactive"></a>
<a name="SEC54"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC49" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC55" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.10作业期间要求确认</h2>

<p>通常， <code>tar</code>执行命令而不停止进一步的指示。但是，在某些情况下，您可能希望从操作中排除某些文件和归档成员（例如，如果磁盘或存储空间很紧）。您可以通过自动排除某些文件来做到这一点（请参阅“ <a href="#SEC105">为以下文件选择文件和名称”部分） <code>tar</code></a> ），或使用<samp>`--interactive'</samp> （ <samp>`-w'</samp> ） 选项。
<code>tar</code>也接受<samp>`--confirmation'</samp>对于此选项。
</p>
<a name="IDX280"></a>
<p>当。。。的时候<samp>`--interactive'</samp> （ <samp>`-w'</samp> ）选项已指定，然后才能读取，写入或删除文件， <code>tar</code>首先为每个这样的文件打印一条消息，告诉它打算执行什么操作，然后在终端上请求确认。需要确认的操作包括将文件添加到存档，从存档中提取文件，从存档中删除文件以及从磁盘中删除文件。要确认操作，您必须输入以下一行输入<samp>`y'</samp> 。如果您输入的行开头不是<samp>`y'</samp> ， <code>tar</code>跳过该文件。
</p>
<p>如果<code>tar</code>正在从标准输入中读取存档， <code>tar</code>打开文件<tt>“ / dev / tty”</tt>以支持交互式通信。
</p>
<p>详细输出通常发送到标准输出，与其他错误消息分开。但是，如果归档文件是直接在标准输出上生成的，则冗长的输出会与错误混合在一起<code>stderr</code> 。例如，当即将由另一个读取存档的进程使用该存档时，可以使用在标准输出上生成存档的方法来避免使用磁盘空间。有些人认为有必要在stdout上生成存档，但仍然愿意在详细输出和错误输出之间进行隔离。一种可能的方法是使用命名管道来接收存档，并让使用者进程从该命名管道中读取。这具有使标准输出自由接收详细输出的优点，所有详细输出均与错误分开。
</p>
<hr size="6">
<a name="external"></a>
<a name="SEC55"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC54" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC32" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">3.11运行外部命令</h2>

<p>某些<acronym>GNU</acronym> <code>tar</code>操作意味着运行您在命令行上提供的外部命令。这样的操作之一就是检查点，如上所述（请参阅<a href="#checkpoint-exec">checkpoint exec</a> ）。此功能的另一个示例是<samp>`-I'</samp>选项，该选项允许您提供用于压缩或解压缩归档文件<a href="#use_002dcompress_002dprogram">的程序</a> （请参阅<a href="#use_002dcompress_002dprogram">use-compress-program</a> ）。
</p>
<p>每当要求进行此类操作时， <code>tar</code>首先，将提供的命令拆分为多个单词，就像shell一样。然后，它将第一个单词作为要执行的程序或Shell脚本的名称，将其余单词作为其命令行参数。除非给出绝对文件名，否则将在外壳程序的目录中搜索该程序。 <code>PATH</code> 。
</p>
<p>通常，任何其他信息都以环境变量的形式提供给外部命令，这些特定于每个特定操作。例如， <samp>`--checkpoint-action=exec'</samp>选项，定义<code>TAR_ARCHIVE</code>变量到正在处理的档案的名称。您可以根据需要在外部命令的命令行中使用这些变量。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -x -f archive.tar \
    --checkpoint-action=exec='printf &quot;%04d in %32s\r&quot; $TAR_CHECKPOINT $TAR_ARCHIVE'</kbd>
</pre></td></tr></tbody></table>

<p>此命令使用屏幕上的相同输出行为每个检查点打印其编号和档案名称。
</p>
<p>请注意，在调用时使用单引号来防止变量名被外壳扩展<code>tar</code> 。
</p>
<hr size="6">
<a name="operations"></a>
<a name="SEC56"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC55" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC57" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC32" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">4。<acronym>GNU</acronym> <code>tar</code>运作方式</h1>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC57">4.1基本的<acronym>GNU</acronym> <code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC58">4.2高级<acronym>GNU</acronym> <code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC68">4.3所使用的选项<samp>`--create'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC72">4.4使用的选项<samp>`--extract'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC92">4.5备份选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC93">4.6展望未来：本手册的其余部分</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Basic-tar"></a>
<a name="SEC57"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC56" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">4.1基本的<acronym>GNU</acronym> <code>tar</code>运作方式</h2>

<p>基础的<code>tar</code>操作， <samp>`--create'</samp> （ <samp>`-c'</samp> ）， <samp>`--list'</samp> （ <samp>`-t'</samp> ）和<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ），目前在本手册的教程章节中介绍和描述。本节提供了有关这些操作的一些补充说明。
</p>
<dl compact>
<dd><a name="IDX281"></a>
</dd>
<dt> <samp>`--create'</samp></dt>
<dt> <samp>`-c'</samp></dt>
<dd>
<p>创建一个空的存档会有些优雅。可以初始化一个空的存档，然后再使用<samp>`--append'</samp> （ <samp>`-r'</samp> ）添加所有成员。某些应用程序不欢迎在添加第一个存档成员的方式中设置例外。另一方面，许多人报告说，对于<code>tar</code>用空的存档销毁磁带<a name="DOCF9" href="#FOOT9">（9）</a> 。两个最常见的错误是：</p>
<ol>
<li>错误使用<code>create</code>代替<code>extract</code> ，目的是提取档案的全部内容。可能出现此错误：键<kbd>c</kbd>和<kbd>x</kbd>在QWERTY键盘上彼此相邻。档案没有被解压缩，而是被完全破坏了。当用户谈论<em>爆炸</em>档案时，他们通常指的是:-)。

</li><li>忘记了<code>file</code> ，目的是创建一个包含单个文件的存档。此错误很可能是因为疲倦的用户可以轻松添加<kbd>f</kbd>仅凭习惯即可获得选项字母簇的关键，而没有意识到这样做的全部后果。通常的结果是原本应该保存的单个文件被破坏了。
</li></ol>

<p>因此，认识到这些错误的可能性和灾难性， <acronym>GNU</acronym> <code>tar</code>现在离优雅有些距离，怯ward地拒绝在创建档案时<samp>`--create'</samp>给定了选项，除了选项外没有参数，并且<samp>`--files-from'</samp> （ <samp>`-T'</samp> ）选项<em>未</em>使用。避开<acronym>GNU</acronym>的谨慎<code>tar</code>并且尽管创建了一个没有任何内容的档案，但仍可以用作该档案的价值<samp>`--files-from'</samp>选项，其中没有名称的文件，如以下命令所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar --create --file=empty-archive.tar --files-from=/dev/null</kbd>
<kbd>tar -cf empty-archive.tar -T /dev/null</kbd>
</pre></td></tr></tbody></table>
<a name="IDX282"></a>
</dd>
<dt> <samp>`--extract'</samp></dt>
<dt> <samp>`--get'</samp></dt>
<dt> <samp>`-x'</samp></dt>
<dd>
<p>套接字存储在<acronym>GNU内</acronym> <code>tar</code>存档，作为管道。
</p>
</dd>
<dt> <samp>`<samp>`--list'</samp> (<samp>`-t'</samp>)'</samp></dt>
<dd>
<p><acronym>GNU</acronym> <code>tar</code>现在显示日期为<samp>`1996-08-30'</samp> ，而过去通常将它们显示为<samp>`Aug 30 1996'</samp> 。最好，人们应该习惯于ISO 8601日期。准备好后，应再次提供全日程本地化支持，以提供美国本地日期。同时，无法针对日期进行本地化的程序应首选国际日期，这才是真正的方法。
</p>
<p>如果您感到好奇，请查找<a href="http://www.cl.cam.ac.uk/~mgk25/iso-time.html">http://www.cl.cam.ac.uk/~mgk25/iso-time.html</a> ，其中包含有关ISO 8601标准的详细说明。
</p>
</dd>
</dl>

<hr size="6">
<a name="Advanced-tar"></a>
<a name="SEC58"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC57" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC59" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">4.2高级<acronym>GNU</acronym> <code>tar</code>运作方式</h2>

<p>既然您已经了解了使用<acronym>GNU</acronym>的基础知识<code>tar</code> ，您可能想了解进一步的方法， <code>tar</code>能帮你。
</p>
<p>本章介绍了五种更高级的操作，您可能不会每天使用它们，但它们将提供更专门的功能。我们还将说明选项的不同样式，以及为什么要在您的选项中使用一个或另一个，或将它们组合使用<code>tar</code>命令。此外，本章还包括一些选项，这些选项使您可以定义以下项的输出<code>tar</code>更仔细，并在特殊情况下提供帮助和错误更正。
</p>
<p><cite>在实际修订本章后，</cite>请<cite>检查此内容，以确保仍正确介绍本章中的信息：）。</cite>
</p>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC59">4.2.1五大进阶<code>tar</code>运作方式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC63">4.2.3更新档案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC67">4.2.6将存档成员与文件系统进行比较</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Operations"></a>
<a name="SEC59"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC58" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC60" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.2.1五大进阶<code>tar</code>运作方式</h3>

<p>在上一章中，您了解了前三个操作<code>tar</code> 。本章介绍了剩下的五个操作<code>tar</code> ： <samp>`--append'</samp> ， <samp>`--update'</samp> ， <samp>`--concatenate'</samp> ， <samp>`--delete'</samp>和<samp>`--compare'</samp> 。
</p>
<p>您不太可能像上一章所述那样频繁地使用这些操作。但是，由于它们执行专门的功能，因此在需要使用它们时非常有用。我们将使用上一章中创建的相同目录和文件给出示例。您可能还记得，该目录称为<tt>“ practice”</tt> ，文件为<samp>`jazz'</samp> ， <samp>`blues'</samp> ， <samp>`folk'</samp> ，而您创建的两个归档文件是<samp>`collection.tar'</samp>和<samp>`music.tar'</samp> 。
</p>
<p>我们还将使用存档文件<samp>`afiles.tar'</samp>和<samp>`bfiles.tar'</samp> 。档案馆<samp>`afiles.tar'</samp>包含成员<samp>`apple'</samp> ， <samp>`angst'</samp>和<samp>`aspic'</samp> ; <samp>`bfiles.tar'</samp>包含成员<samp>`./birds'</samp> ， <samp>`baboon'</samp>和<samp>`./box'</samp> 。
</p>
<p>除非我们另有说明，否则本章中的所有练习和示例都将在上一章中创建的<tt>“ practice”</tt>目录中进行；请参阅<a href="#SEC18">准备实践目录以获取示例</a> 。（在本节下面，我们将提醒您上一章离开示例的状态。）
</p>
<p>我们将在本章中介绍的五个操作是：</p>
<dl compact>
<dt> <samp>`--append'</samp></dt>
<dt> <samp>`-r'</samp></dt>
<dd><p>将新条目添加到已存在的归档中。
</p></dd>
<dt> <samp>`--update'</samp></dt>
<dt> <samp>`-u'</samp></dt>
<dd><p>如果有存档成员，则将它们的最新副本添加到存档末尾。
</p></dd>
<dt> <samp>`--concatenate'</samp></dt>
<dt> <samp>`--catenate'</samp></dt>
<dt> <samp>`-A'</samp></dt>
<dd><p>将一个或多个先前存在的档案添加到另一档案的末尾。
</p></dd>
<dt> <samp>`--delete'</samp></dt>
<dd><p>从存档中删除项目（不适用于磁带）。
</p></dd>
<dt> <samp>`--compare'</samp></dt>
<dt> <samp>`--diff'</samp></dt>
<dt> <samp>`-d'</samp></dt>
<dd><p>将存档成员与文件系统中的存档成员进行比较。
</p></dd>
</dl>

<hr size="6">
<a name="append"></a>
<a name="SEC60"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC59" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC61" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.2.2如何将文件添加到现有档案中： <samp>`--append'</samp> </h3>

<p>如果要将文件添加到现有存档中，则无需创建新的存档。您可以使用<samp>`--append'</samp> （ <samp>`-r'</samp> ）。档案必须已经存在才能使用<samp>`--append'</samp> 。（相关的操作是<samp>`--update'</samp>操作您可以使用此功能将较新版本的存档成员添加到现有存档中。要了解如何使用<samp>`--update'</samp> ，请参阅<a href="#SEC63">更新档案</a>一节。）
</p>
<p>如果您使用<samp>`--append'</samp>将与存档成员同名的文件添加到包含该存档成员的存档中，则不会删除旧成员。但是，发生的事情有些复杂。 <code>tar</code> <em>允许</em>您拥有无数个同名文件。某些操作对待这些同名成员与其他任何存档成员集没有区别：例如，如果您使用以下方式查看存档： <samp>`--list'</samp> （ <samp>`-t'</samp> ），您将看到列出的所有这些成员，以及其数据修改时间，所有者等。</p>
<p>其他操作不能像您希望的那样完美地处理这些成员。如果您要使用<samp>`--extract'</samp>要提取归档文件，只有与其他成员同名的成员的最新添加副本会最终出现在工作目录中。这是因为<samp>`--extract'</samp>按照成员在档案中出现的顺序提取档案；最近存档的成员将在最后提取。此外，提取的成员将<em>替换</em>目录中已经存在的同名文件，并且<code>tar</code>不会提示您这一点<a name="DOCF10" href="#FOOT10">（10）</a> 。因此，只有最新存档的成员最终会被提取，因为它将替换之前提取的那个成员，依此类推。
</p>
<a name="IDX283"></a>
<a name="IDX284"></a>
<p>有一个特殊的选项，使您可以解决此问题，并仅提取（或列出）文件的特定副本。这是<samp>`--occurrence'</samp>选项。如果你跑<code>tar</code>使用此选项，它将仅提取文件的第一个副本。您还可以为该选项提供一个参数，指定要提取的副本数。因此，例如，如果归档文件<tt>“ archive.tar”</tt>包含文件<tt>“ myfile”的</tt>三个副本，则该命令</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar --extract --file archive.tar --occurrence=2 myfile
</pre></td></tr></tbody></table>

<p>将仅提取第二个副本。请参阅<a href="#SEC42">--occurrence</a>部分，以获取有关<samp>`--occurrence'</samp>选项。
</p>
<p>参见<cite>hag-您可能希望将以上内容合并到MMwtSN节点中；不确定。我不知道如何简化它...
</cite> </p>
<p><cite>有几种方法可以解决此问题。可能对具有相同名称的多个成员进行外部参照。</cite>
</p>

<a name="IDX285"></a>
<a name="IDX286"></a>
<a name="IDX287"></a>
<p>如果要替换存档成员，请使用<samp>`--delete'</samp>删除要从存档中删除的成员，然后使用<samp>`--append'</samp>添加您想要成为存档的成员。请注意，您无法更改存档的顺序；最近添加的成员仍将出现在最后。从这个意义上说，您不能真正地将“一个成员”替换为另一个成员。（将一个成员替换为另一个成员将不适用于某些类型的介质，例如磁带；请参阅<a href="#SEC66">使用<samp>`--delete'</samp></a>以及<a href="#SEC154">磁带和其他存档介质</a> ，以获取更多信息。）
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC61">4.2.2.1将文件追加到存档</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC62">4.2.2.2具有相同名称的多个成员</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="appending-files"></a>
<a name="SEC61"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC60" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC62" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC60" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">4.2.2.1将文件追加到存档</h4>

<p>将文件添加到现有存档的最简单方法是<samp>`--append'</samp> （ <samp>`-r'</samp> ）操作，无论指定文件是否已存在于归档文件中，都会将其写入归档。
</p>
<p>使用时<samp>`--append'</samp> ，您<em>必须</em>指定文件名参数，因为没有默认值。如果您指定档案中已经存在的文件，则该文件的另一个副本将添加到档案末尾。与其他操作一样，新添加的文件的成员名称将与在命令行中给出的名称完全相同。的<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项将在文件写入存档时打印出文件名。
</p>
<p><samp>`--append'</samp>不幸的是，由于这些磁带机使用的格式不足，因此无法在某些磁带机上执行。存档必须是有效的<code>tar</code>存档，否则使用此操作的结果将不可预测。请参阅<a href="#SEC154">磁带和其他存档介质部分</a> 。
</p>
<p>演示使用<samp>`--append'</samp>要将文件添加到存档，请在<tt>“ practice”</tt>目录中创建一个名为<tt>“ rock”</tt> <tt>的</tt>文件。确保您位于<tt>“练习”</tt>目录中。然后，运行以下命令<code>tar</code>将<tt>`rock'</tt>添加到<tt>`collection.tar'的命令</tt> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --append --file=collection.tar rock</kbd>
</pre></td></tr></tbody></table>

<p>如果您现在使用<samp>`--list'</samp> （ <samp>`-t'</samp> ）操作，您会看到<tt>`rock'</tt>已添加到档案中：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=collection.tar</kbd>
-rw-r--r-- me/user          28 1996-10-18 16:31 jazz
-rw-r--r-- me/user          21 1996-09-23 16:44 blues
-rw-r--r-- me/user          20 1996-09-23 16:44 folk
-rw-r--r-- me/user          20 1996-09-23 16:44 rock
</pre></td></tr></tbody></table>
<hr size="6">
<a name="multiple"></a>
<a name="SEC62"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC61" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC63" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC60" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">4.2.2.2具有相同名称的多个成员</h4>

<p>您可以使用<samp>`--append'</samp> （ <samp>`-r'</samp> ），以添加自创建存档以来已更新的文件副本。（但是，我们建议您不要这样做，因为<code>tar</code>选项称为<samp>`--update'</samp> ;有关更多信息，请参见<a href="#SEC63">更新档案</a> 。我们描述了这种用法<samp>`--append'</samp>为了完整起见，请点击此处。）提取存档时，较旧的版本将被有效丢失。之所以可行，是因为文件是按照归档顺序从归档中提取的。因此，在提取存档时，及时存档的文件将替换先前存档的同名文件，即使该文件的旧版本将保留在存档中，除非您删除该文件的所有版本。
</p>
<p>假设您更改了文件<tt>“ blues”</tt> ，然后将更改后的版本附加到<tt>“ collection.tar”</tt> 。如您在上面看到的，原始的<tt>“ blues”</tt>位于档案文件<tt>“ collection.tar”中</tt> 。如果更改文件并将文件的新版本附加到存档中，则存档中将有两个副本。提取存档时，将首先提取文件的旧版本，然后在提取文件时将其替换为新版本。
</p>
<p>您可以通过以下方式将更改后的文件<tt>“ blues”</tt>的新副本添加到存档中：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --append --verbose --file=collection.tar blues</kbd>
blues
</pre></td></tr></tbody></table>

<p>因为您指定了<samp>`--verbose'</samp>选项， <code>tar</code>已按照其操作打印了要添加的文件的名称。现在列出存档的内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --verbose --file=collection.tar</kbd>
-rw-r--r-- me/user          28 1996-10-18 16:31 jazz
-rw-r--r-- me/user          21 1996-09-23 16:44 blues
-rw-r--r-- me/user          20 1996-09-23 16:44 folk
-rw-r--r-- me/user          20 1996-09-23 16:44 rock
-rw-r--r-- me/user          58 1996-10-24 18:30 blues
</pre></td></tr></tbody></table>

<p>现在，最新版本的<tt>“ blues”</tt>位于存档的末尾（请注意不同的创建日期和文件大小）。如果解压缩档案，则文件<tt>“ blues”</tt>的旧版本将被较新的版本取代。您可以通过提取存档并运行来确认这一点<samp>`ls'</samp>在目录上。
</p>
<p>如果要从档案中提取文件<tt>“ blues”</tt>的第一个匹配项，请使用<samp>`--occurrence'</samp>选项，如以下示例所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --extract -vv --occurrence --file=collection.tar blues</kbd>
-rw-r--r-- me/user          21 1996-09-23 16:44 blues
</pre></td></tr></tbody></table>
<p>请参阅<a href="#SEC76">更改方式</a>部分<a href="#SEC76"><code>tar</code>写入文件</a> ，有关更多信息<samp>`--extract'</samp>并参见<a href="#SEC42">-occurrence</a> ，以获取有关<samp>`--occurrence'</samp>选项。
</p>
<hr size="6">
<a name="update"></a>
<a name="SEC63"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC62" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC64" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.2.3更新档案</h3>

<p>在上一节中，您学习了如何使用<samp>`--append'</samp>将文件添加到现有存档。一个相关的操作是<samp>`--update'</samp> （ <samp>`-u'</samp> ）。的<samp>`--update'</samp>操作更新一个<code>tar</code>通过将指定存档成员的日期与具有相同名称的文件日期进行比较来进行存档。如果文件的修改时间比归档文件的修改时间最近，则文件的较新版本将添加到归档文件中（与<samp>`--append'</samp> ）。
</p>
<p>不幸的是，您不能使用<samp>`--update'</samp>与磁带驱动器。操作将失败。
</p>
<p>查看<cite>其他介质的示例，在这些介质上-update将失败？需要询问查尔斯和/或mib / thomas / dave shevett。</cite>
</p>

<p>都<samp>`--update'</samp>和<samp>`--append'</samp>通过添加到存档的末尾来工作。从归档文件中提取文件时，除非使用以下命令，否则只有最后存储的版本才会在文件系统中显示。 <samp>`--backup'</samp>选项。有关详细讨论，请参见部分<a href="#SEC62">具有相同名称的多个成员</a> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC64">4.2.3.1如何使用更新档案<samp>`--update'</samp></a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="how-to-update"></a>
<a name="SEC64"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC63" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC65" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC63" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">4.2.3.1如何使用更新档案<samp>`--update'</samp> </h4>

<p>您必须将文件名参数与<samp>`--update'</samp> （ <samp>`-u'</samp> ）操作。如果您未指定任何文件， <code>tar</code>不会对任何文件采取行动，也不会告诉您它没有做任何事情（这可能最终会使您感到困惑）。
</p>

<p>看到<samp>`--update'</samp>选项工作时，在练习目录中创建一个新文件<tt>“古典”</tt> ，并使用任何文本编辑器在文件<tt>“ blues”中添加</tt>一些额外的文本。然后调用<code>tar</code>与<samp>`update'</samp>操作与<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项，使用<tt>`practice'</tt>目录中所有文件的名称作为文件名参数：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --update -v -f collection.tar blues folk rock classical</kbd>
blues
classical
$
</pre></td></tr></tbody></table>

<p>由于我们指定了详细模式， <code>tar</code>打印出正在处理的文件的名称，在这种情况下，这是需要更新的文件的名称。如果你跑<samp>`tar --list'</samp>并查看档案，您会在其末尾看到<tt>“ blues”</tt>和<tt>“ classical”</tt> 。成员将总共有两个版本<samp>`blues'</samp> ;由于您在更新之前添加了文本，因此最后一个将是更新的和更大的。
</p>
<p>原因<code>tar</code>不会在更新时覆盖较旧的文件，因为写入磁带的中间部分是一个困难的过程。磁带不能向后移动。有关<a href="#SEC154">磁带</a>的更多信息，请参见“ <a href="#SEC154">磁带和其他存档介质”</a>部分。
</p>
<p><samp>`--update'</samp> （ <samp>`-u'</samp> ）不适用于执行备份，原因有两个：不会更改目录内容条目，并且每次使用时都会延长存档。<acronym>GNU</acronym> <code>tar</code>专用于备份的选项效率更高。如果您需要运行备份，请查阅《 <a href="#SEC94">执行备份和还原文件》</a> 。
</p>
<hr size="6">
<a name="concatenate"></a>
<a name="SEC65"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC64" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC66" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.2.4将档案与<samp>`--concatenate'</samp> </h3>

<p>有时将第二个存档添加到存档末尾比将单个文件添加到存档可能更方便。要将一个或多个档案添加到另一个档案的末尾，应使用<samp>`--concatenate'</samp> （ <samp>`--catenate'</samp> ， <samp>`-A'</samp> ）操作。
</p>
<p>使用<samp>`--concatenate'</samp> ，给第一个档案<samp>`--file'</samp>选项，并在命令行上命名其余要合并的档案。成员及其成员名称将从这些档案文件逐字复制到第一个<a name="DOCF11" href="#FOOT11">（11）</a> 。新的级联档案将被调用，名称与<samp>`--file'</samp>选项。和往常一样，如果您省略<samp>`--file'</samp> ， <code>tar</code>将使用环境变量的值<code>TAPE</code> ，或者，如果尚未设置，则为默认存档名称。
</p>
<p>请参阅<cite>无法指定新名称...</cite>
</p>

<p>演示如何<samp>`--concatenate'</samp>作品中，创建两个小档案称为<tt>`bluesrock.tar“</tt>和<tt>'folkjazz.tar”，</tt>利用<tt>'实践”</tt>的相关文件：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cvf bluesrock.tar blues rock</kbd>
blues
rock
$ <kbd>tar -cvf folkjazz.tar folk jazz</kbd>
folk
jazz
</pre></td></tr></tbody></table>

<p>如果愿意，可以跑步<samp>`tar --list'</samp>确保档案包含应有的内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -tvf bluesrock.tar</kbd>
-rw-r--r-- melissa/user    105 1997-01-21 19:42 blues
-rw-r--r-- melissa/user     33 1997-01-20 15:34 rock
$ <kbd>tar -tvf jazzfolk.tar</kbd>
-rw-r--r-- melissa/user     20 1996-09-23 16:44 folk
-rw-r--r-- melissa/user     65 1997-01-30 14:15 jazz
</pre></td></tr></tbody></table>
<p>我们可以将这两个档案与<code>tar</code> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cd ..</kbd>
$ <kbd>tar --concatenate --file=bluesrock.tar jazzfolk.tar</kbd>
</pre></td></tr></tbody></table>
<p>如果现在列出<tt>“ bluesrock.tar”</tt>的内容，您将看到它现在还包含<tt>“ jazzfolk.tar”</tt>的存档成员：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=bluesrock.tar</kbd>
blues
rock
folk
jazz
</pre></td></tr></tbody></table>
<p>使用时<samp>`--concatenate'</samp> ，源归档文件和目标归档文件必须已经存在，并且必须已使用兼容的格式参数创建。注意， <code>tar</code>不会检查连接的档案是否具有兼容的格式，甚至不会检查文件是否真的是tar档案。
</p>
<p>喜欢<samp>`--append'</samp> （ <samp>`-r'</samp> ），由于某些磁带机使用的格式存在缺陷，因此无法在某些磁带机上执行此操作。
</p>
<a name="IDX288"></a>
<a name="IDX289"></a>
<p>您想要或尝试使用它似乎更直观<code>cat</code>连接两个档案，而不是使用<samp>`--concatenate'</samp>操作毕竟， <code>cat</code>是用于合并文件的实用程序。
</p>
<p>然而， <code>tar</code>归档文件包含一个文件结尾标记，如果要将串联的归档文件作为一个归档文件正确读取，则必须将其删除。 <samp>`--concatenate'</samp>在附加每个新存档之前，从目标存档中删除存档结束标记。如果您使用<code>cat</code>合并档案，结果将无效<code>tar</code>格式存档。如果您需要从添加到使用的存档中检索文件<code>cat</code>实用程序，使用<samp>`--ignore-zeros'</samp> （ <samp>`-i'</samp> ） 选项。请参阅<a href="#SEC75">忽略零块</a>一节，以了解有关使用<code>cat</code> Shell实用程序。
</p>
<hr size="6">
<a name="delete"></a>
<a name="SEC66"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC65" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC67" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp> </h3>

<p>您可以使用以下方法从存档中删除成员： <samp>`--delete'</samp>选项。使用以下命令指定存档的名称<samp>`--file'</samp> （ <samp>`-f'</samp> ），然后指定要删除的成员的名称；如果您未列出成员名称，则不会删除任何内容。的<samp>`--verbose'</samp>选项将导致<code>tar</code>在删除成员时打印其名称。与<samp>`--extract'</samp> ，使用时必须提供确切的会员名称<samp>`tar --delete'</samp> 。
<samp>`--delete'</samp>将从档案中删除命名文件的所有版本。的<samp>`--delete'</samp>操作可能会非常缓慢地运行。
</p>
<p>与其他操作不同， <samp>`--delete'</samp>没有简写形式。
</p>
<a name="IDX290"></a>
<a name="IDX291"></a>
<p>此操作将重写存档。你只能用<samp>`--delete'</samp>如果存档设备允许您写入媒体（例如磁盘）上的任何点，则在存档上；因此，它不适用于磁带。不要尝试从磁带上删除存档成员；操作将不会成功，您可能会打乱存档并损坏磁带。没有安全的方法（除非完全重写归档文件）从大多数类型的磁带中删除文件。请参阅<a href="#SEC154">磁带和其他存档介质部分</a> 。
</p>
<p>要从<tt>“ practice”</tt>目录中的<tt>“</tt> <tt>collection.tar”</tt>档案中删除<tt>“ blues”</tt>文件的所有版本，请确保您位于该目录中，然后，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --list --file=collection.tar</kbd>
blues
folk
jazz
rock
$ <kbd>tar --delete --file=collection.tar blues</kbd>
$ <kbd>tar --list --file=collection.tar</kbd>
folk
jazz
rock
</pre></td></tr></tbody></table>
<p>请参阅<cite>在collection.tar上运行所有示例之后，检查上面的清单是否真正生成。</cite>
</p>

<p>的<samp>`--delete'</samp>据报道该选项在以下情况下可以正常工作<code>tar</code>充当过滤器<code>stdin</code>至<code>stdout</code> 。
</p>
<hr size="6">
<a name="compare"></a>
<a name="SEC67"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC66" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC68" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC58" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.2.6将存档成员与文件系统进行比较</h3>

<p>的<samp>`--compare'</samp> （ <samp>`-d'</samp> ）， 要么<samp>`--diff'</samp>该操作将指定的存档成员与具有相同名称的文件进行比较，然后报告文件大小，模式，所有者，修改日期和内容的差异。您<em>仅</em>应指定存档成员名称，而不是文件名。如果您没有命名任何成员，那么<code>tar</code>将比较整个档案。如果档案代表档案，但档案系统中不存在， <code>tar</code>报告差异。
</p>
<p>使用非默认记录大小修改档案时，必须指定档案的记录大小。
</p>
<p><code>tar</code>忽略文件系统中在归档中没有相应成员的文件。
</p>
<p>以下示例将档案<tt>“ bluesrock.tar”中</tt>的档案成员<tt>“ rock”</tt> ， <tt>“ blues”</tt>和<tt>“ funk</tt> <tt>”</tt>与文件系统中相同名称的文件进行比较。（请注意，没有文件<tt>“ funk”</tt> ； <code>tar</code>将报告错误消息。）
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --compare --file=bluesrock.tar rock blues funk</kbd>
rock
blues
tar: funk not found in archive
</pre></td></tr></tbody></table>
<p>背后的精神<samp>`--compare'</samp> （ <samp>`--diff'</samp> ， <samp>`-d'</samp> ）选项是检查档案是否代表磁盘上文件的当前状态，而不是验证档案媒体的完整性。对于后一个目标，请参阅<a href="#SEC169">验证数据存储</a> 。
</p>
<hr size="6">
<a name="create-options"></a>
<a name="SEC68"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC67" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC69" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">4.3所使用的选项<samp>`--create'</samp> </h2>

<p>上一章介绍了如何使用的基础知识<samp>`--create'</samp> （ <samp>`-c'</samp> ）从一组文件中创建档案。请参阅<a href="#SEC17">如何创建档案</a>一节。本节介绍了与<samp>`--create'</samp> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC69">4.3.1覆盖文件元数据</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC70">4.3.2扩展文件属性</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC71">4.3.3忽略读取失败</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="override"></a>
<a name="SEC69"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC68" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC70" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC68" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.3.1覆盖文件元数据</h3>

<p>如上所述， <code>tar</code>归档文件为其包含的每个成员保留其<em>元数据</em> ，例如修改时间，模式和文件所有权。<acronym>GNU</acronym> <code>tar</code>允许在将文件添加到归档文件时用其他值替换这些数据。本节中描述的选项会影响任何类型的归档的创建。对于POSIX归档文件，另请参见<a href="#SEC147">控制扩展标题关键字</a> ，以获取控制存储在归档文件中的元数据的其他方法。
</p>
<dl compact>
<dd><a name="IDX292"></a>
</dd>
<dt> <samp>`--mode=<var>permissions</var>'</samp></dt>
<dd>
<p>将文件添加到存档时， <code>tar</code>将使用<var>permissions</var>存档成员，而不是文件权限。 <var>permissions</var>可以指定为八进制数字或符号权限，例如<code>chmod</code> （请参阅<cite><acronym>GNU</acronym>文件实用程序中的</cite> “ <a href="fileutils.html#File-permissions">权限：（fileutils）文件权限”</a>部分的“文件权限”。对于那些不太熟悉UNIX权限系统的人，该参考资料也提供了有用的信息。使用后一种语法可提供更大的灵活性。例如，值<samp>`a+rw'</samp>为所有人添加读写权限，同时保留目录或任何其他已标记为可执行文件的可执行文件：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --mode='a+rw' .</kbd>
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`--mtime=<var>date</var>'</samp></dt>
<dd><a name="IDX293"></a>

<p>将文件添加到存档时， <code>tar</code>将使用<var>date</var>作为创建档案时成员的修改时间，而不是其实际修改时间。争论<var>date</var>可以是几乎任意格式的文本日期表示形式（请参见<a href="#SEC121">日期输入格式</a>部分），也可以是现有文件的名称，以<samp>`/'</samp>要么<samp>`.'</samp> 。在后一种情况下，将使用该文件的修改时间。
</p>
<p>以下示例将修改日期设置为1970年1月1日00:00:00：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --mtime='1970-01-01' .</kbd>
</pre></td></tr></tbody></table>

<p>当与<samp>`--verbose'</samp> （见<a href="#SEC15">的<samp>`--verbose'</samp>选项</a> ） <acronym>GNU</acronym> <code>tar</code>将尝试将指定的日期转换回其文本表示形式，并将其与给定的日期进行比较<samp>`--mtime'</samp>选项。如果两个日期不同， <code>tar</code>将打印警告，说明将使用什么日期。这是为了帮助用户确保使用正确的日期。
</p>
<p>例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar -v --mtime=yesterday .</kbd>
tar: Option --mtime: Treating date 'yesterday' as 2006-06-20
13:06:29.152478
&hellip;
</pre></td></tr></tbody></table>

<p>当与<samp>`--clamp-mtime'</samp> <acronym>GNU</acronym> <code>tar</code>只会将修改日期设置为<var>date</var>实际修改日期晚于<var>date</var> 。在给定生成文件的通用时间戳的情况下，这很容易构建可复制的存档，同时仍保留未修改文件的原始时间戳。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --clamp-mtime --mtime=@$SOURCE_DATE_EPOCH .</kbd>
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`--owner=<var>user</var>'</samp></dt>
<dd><a name="IDX294"></a>

<p>指定<code>tar</code>应该使用<var>user</var>作为创建档案时的成员所有者，而不是与源文件关联的用户。
</p>
<p>如果<var>user</var>包含冒号，其形式应为<var>name</var> ： <var>id</var>非空<var>name</var>指定用户名和非空<var>id</var>指定十进制数字用户<acronym>ID</acronym> 。如果<var>user</var>不包含冒号，如果它是一个或多个十进制数字，则视为用户号；否则，将其视为用户名。
</p>
<p>如果给出名称但没有编号，则如果可能，从当前主机的用户数据库中推断出该编号，否则使用文件的用户编号。如果给出了一个数字但没有名称，则从该数字中推断出该名称（如果可能），否则使用一个空名称。如果同时提供名称和编号，则不会查询用户数据库，并且名称和编号在当前主机上不需要有效。
</p>
<p>没有值指示缺少数字，并且<samp>`0'</samp>通常意味着<code>root</code> 。有些人喜欢强迫<samp>`0'</samp>作为要在分发中为文件所有者提供的价值，因为<code>root</code>用户仍然是匿名的，因此也可能是匿名档案的所有者。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --owner=0 .</kbd>
</pre></td></tr></tbody></table>

<p>要么：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --owner=root .</kbd>
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`--group=<var>group</var>'</samp></dt>
<dd><a name="IDX295"></a>

<p>文件已添加到<code>tar</code>存档的组<acronym>ID</acronym>为<var>group</var> ，而不是源文件中的组。与<samp>`--owner'</samp> ，论点<var>group</var>可以是现有的组符号名称，也可以是十进制数字组<acronym>ID</acronym> ，或者<var>name</var> ： <var>id</var> 。
</p></dd>
</dl>

<p>的<samp>`--owner'</samp>和<samp>`--group'</samp>选项会影响所有添加到存档的文件。<acronym>GNU</acronym> <code>tar</code>还提供了两个选项，可以更详细地控制所有者的翻译：</p>
<dl compact>
<dt> <samp>`--owner-map=<var>file</var>'</samp></dt>
<dd><p>从中读取UID翻译地图<var>file</var> 。
</p>
<p>读取时，空行将被忽略。的<samp>`#'</samp>除非加引号，否则符号会引起注释，并延伸到行尾。每条非空行定义单个UID的映射。它必须包含两个由任意数量的空格分隔的字段。第一个字段定义原始用户名和UID。它可以是有效的用户名或带加号的有效UID。在这两种情况下，都将从当前主机的用户数据库中推断出相应的UID或用户名。
</p>
<p>第二个字段定义将原始ID映射到的UID和用户名。其格式可以与上述相同。否则，它可以具有以下形式<var>newname</var> ： <var>newuid</var> ，在这种情况下<var>newname</var>也不<var>newuid</var>必须根据用户数据库有效。
</p>
<p>例如，考虑以下文件：</p>
<table><tbody><tr><td> </td><td><pre class="example">+10     bin
smith   root:0
</pre></td></tr></tbody></table>

<p>给定该文件后，每个由UID 10拥有的输入文件都将以拥有者名称存储在归档中<samp>`bin'</samp>和所有者UID对应于<samp>`bin'</samp> 。用户拥有的每个文件<samp>`smith'</samp>将与所有者名称一起存储<samp>`root'</samp>和所有者ID 0。其他文件将保持不变。
</p>
<p>当与<samp>`--owner-map'</samp> ， <samp>`--owner'</samp>选项仅影响所有者未在地图文件中列出的文件。
</p>
</dd>
<dt> <samp>`--group-map=<var>file</var>'</samp></dt>
<dd><p>从阅读GID翻译地图<var>file</var> 。
</p>
<p>格式<var>file</var>与相同<samp>`--owner-map'</samp>选项：</p>
<p>每条非空行定义单个GID的映射。它必须包含两个由任意数量的空格分隔的字段。第一个字段定义原始组名和GID。它可以是有效的组名或带有加号的有效GID。在这两种情况下，都将从当前主机的组数据库中推断出相应的GID或用户名。
</p>
<p>第二个字段定义GID和组名以将原始ID映射到该组。其格式可以与上述相同。否则，它可以具有以下形式<var>newname</var> ： <var>newgid</var> ，在这种情况下<var>newname</var>也不<var>newgid</var>根据组数据库要求是有效的。
</p>
<p>当与<samp>`--group-map'</samp> ， <samp>`--group'</samp>该选项仅影响其所有者组未使用映射文件重写的文件。
</p></dd>
</dl>

<hr size="6">
<a name="Extended-File-Attributes"></a>
<a name="SEC70"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC69" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC71" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC68" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.3.2扩展文件属性</h3>

<p>扩展文件属性是可以与文件系统中每个节点关联的名称/值对。尽管提出了建议的POSIX.1e草案已被撤消，但扩展的文件属性得到许多文件系统的支持。<acronym>GNU</acronym> <code>tar</code>可以将扩展文件属性与文件一起存储。此功能由以下命令行参数控制：</p>
<dl compact>
<dt> <samp>`--xattrs'</samp></dt>
<dd><p>启用扩展属性支持。当与<samp>`--create'</samp> ，此选项指示<acronym>GNU</acronym> <code>tar</code>创建档案。这意味着POSIX.1-2001存档格式（ <samp>`--format=pax'</samp> ）。
</p>
<p>当与<samp>`--extract'</samp> ，这个选项告诉<code>tar</code> ，对于提取的每个文件，从档案中读取存储的属性并将其应用于文件。
</p>
</dd>
<dt> <samp>`--no-xattrs'</samp></dt>
<dd><p>禁用扩展属性支持。这是默认值。
</p></dd>
</dl>

<p>属性名称是以<em>名称空间</em>名称和点为前缀的字符串。当前，存在四个名称空间： <samp>`user'</samp> ， <samp>`trusted'</samp> ， <samp>`security'</samp>和<samp>`system'</samp> 。默认情况下，当<samp>`--xattr'</samp>使用时，所有名称都存储在存档中（或提取，如果使用<samp>`--extract'</samp> ）。可以使用以下选项进行控制：</p>
<dl compact>
<dt> <samp>`--xattrs-exclude=<var>pattern</var>'</samp></dt>
<dd><p>为扩展属性指定排除模式。
</p>
</dd>
<dt> <samp>`--xattrs-include=<var>pattern</var>'</samp></dt>
<dd><p>指定扩展属性的包含模式。
</p></dd>
</dl>

<p>在这里<var>pattern</var>是一种浮动模式。例如，以下命令：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>tar --xattrs --xattrs-exclude='user.*' -c a.tar .</kbd>
</pre></td></tr></tbody></table>
<p>将在档案库<tt>“ a.tar”中包含</tt>所有属性，但来自<samp>`user'</samp>命名空间。
</p>
<p>可以给出任意数量的这些选项，从而创建包含和排除模式的列表。
</p>
<p>同时使用两个选项时<samp>`--xattrs-include'</samp>用于选择要保留的属性名称集，然后<samp>`--xattrs-exclude'</samp>应用于结果集。换句话说，将仅存储那些名称与其中一个正则表达式匹配的属性。 <samp>`--xattrs-include'</samp>并且不匹配来自的任何正则表达式<samp>`--xattrs-exclude'</samp> 。
</p>
<p>列出档案时，如果同时<samp>`--xattrs'</samp>和<samp>`--verbose'</samp>提供了选项，具有扩展属性的文件在其权限掩码后标有星号。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">-rw-r--r--* smith/users      110 2016-03-16 16:07 file
</pre></td></tr></tbody></table>
<p>当两个以上<samp>`--verbose'</samp>提供了选项，每个文件条目后都会打印扩展属性的详细列表。每个属性都在单独的行中列出，该行以两个空格和字母开头<samp>`x'</samp>指示扩展属性。它后面是一个冒号，属性的长度及其名称，例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">-rw-r--r--* smith/users      110 2016-03-16 16:07 file
  x:  7 user.mime_type
  x: 32 trusted.md5sum
</pre></td></tr></tbody></table>
<p>文件访问控制列表（ <em>ACL</em> ）是POSIX.1e标准提出的另一项积极使用的功能。每个ACL包含一组ACL条目，每个条目均描述了单个用户或一组用户对文件的访问权限，这些权限是读，写和搜索/执行权限的组合。
</p>
<p>是否使用ACL由以下两个选项控制：</p>
<dl compact>
<dt> <samp>`--acls'</samp></dt>
<dd><p>启用POSIX ACL支持。当与<samp>`--create'</samp> ，此选项指示<acronym>GNU</acronym> <code>tar</code>将ACL存储在创建的档案中。这意味着POSIX.1-2001存档格式（ <samp>`--format=pax'</samp> ）。
</p>
<p>当与<samp>`--extract'</samp> ，这个选项告诉<code>tar</code> ，以恢复提取的每个文件的ACL（前提是它们存在于存档中）。
</p>
</dd>
<dt> <samp>`--no-acls'</samp></dt>
<dd><p>禁用POSIX ACL支持。这是默认值。
</p></dd>
</dl>

<p>列出档案时，如果同时<samp>`--acls'</samp>和<samp>`--verbose'</samp>提供了选项，具有ACL的文件在其权限掩码后标有加号。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">-rw-r--r--+ smith/users      110 2016-03-16 16:07 file
</pre></td></tr></tbody></table>
<p>当两个以上<samp>`--verbose'</samp>提供了选项，每个文件条目后都会打印ACL的详细列表：</p>
<table><tbody><tr><td> </td><td><pre class="example">-rw-r--r--+ smith/users      110 2016-03-16 16:07 file
  a: user::rw-,user:gray:-w-,group::r--,mask::rw-,other::r--
</pre></td></tr></tbody></table>
<p><em>增强安全性的Linux</em> （简称<em>SELinux</em> ）是Linux内核安全模块，它提供了一种机制来支持访问控制安全策略，包括所谓的强制性访问控制（ <em>MAC</em> ）。对SELinux属性的支持由以下命令行选项控制：</p>
<dl compact>
<dt> <samp>`--selinux'</samp></dt>
<dd><p>启用SELinux上下文支持。
</p>
</dd>
<dt> <samp>`--no-selinux'</samp></dt>
<dd><p>禁用SELinux上下文支持。
</p></dd>
</dl>

<hr size="6">
<a name="Ignore-Failed-Read"></a>
<a name="SEC71"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC70" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC72" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC68" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.3.3忽略读取失败</h3>

<dl compact>
<dt> <samp>`--ignore-failed-read'</samp></dt>
<dd><a name="IDX296"></a>
<p>在不可读的文件或目录上，请勿以非零退出。
</p></dd>
</dl>

<p>此选项仅在创建期间有效。它指示tar将任何丢失或不可读的文件（目录）视为温和条件。此类故障不会影响程序退出代码，并且相应的诊断消息将标记为警告，而不是错误。可以使用<samp>`--warning=failed-read'</samp>选项（请参阅<a href="#SEC49">控制警告消息</a>部分）。
</p>
<hr size="6">
<a name="extract-options"></a>
<a name="SEC72"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC71" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC73" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">4.4使用的选项<samp>`--extract'</samp> </h2>

<p>上一章介绍了如何使用<samp>`--extract'</samp>将档案提取到文件系统中。各种选择导致<code>tar</code>除了文件内容之外，还可以提取更多信息，例如所有者，权限，修改日期等。本节介绍了与<samp>`--extract'</samp>当出现某些特殊考虑时。您可以查看<a href="#SEC25">如何从存档中提取成员中提供的</a>信息，以获取有关以下方面的更多基本信息： <samp>`--extract'</samp>操作。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC73">4.4.1帮助阅读档案的选项</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC76">4.4.2更改方式<code>tar</code>写文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC89">4.4.3应对稀缺资源</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Reading"></a>
<a name="SEC73"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC72" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC74" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC72" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.4.1帮助阅读档案的选项</h3>

<p>一般， <code>tar</code>将从归档存储设备中以完整记录的增量请求数据。如果设备无法返回完整记录， <code>tar</code>将报告错误。但是，某些设备并不总是返回完整记录，也不需要将存档的最后一条记录填充到下一个记录边界。要继续阅读直到获得完整记录，或者接受包含记录结束标记的不完整记录，请指定<samp>`--read-full-records'</samp> （ <samp>`-B'</samp> ）选项与<samp>`--extract'</samp>要么<samp>`--list'</samp>操作。请参阅“ <a href="#SEC158">阻止”</a>部分。
</p>
<p>的<samp>`--read-full-records'</samp> （ <samp>`-B'</samp> ）选项默认情况下处于启用状态<code>tar</code>从标准输入或从远程计算机读取档案。这是因为在<acronym>BSD</acronym> Unix系统上，尝试读取管道返回的内容尽管管道中的内容少于请求的数量，但管道中却碰巧有很多东西。如果未启用此选项， <code>tar</code>一旦从管道中读取了不完整的记录，就会失败。
</p>
<p>如果不确定档案的阻塞因素，可以通过指定以下内容来读取档案<samp>`--read-full-records'</samp> （ <samp>`-B'</samp> ）和<samp>`--blocking-factor=<var>512-size</var>'</samp> （ <samp>`-b <var>512-size</var>'</samp> ），使用的阻止因子大于档案馆使用的阻止因子。这使您不必确定存档的阻塞因素。请参阅<a href="#SEC160">存档的阻塞因素</a>部分。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC74">阅读完整记录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC75">忽略零块</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="read-full-records"></a>
<a name="SEC74"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC73" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC75" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC73" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">阅读完整记录</h4>

<p><cite>在这里</cite>看到<cite>需要介绍的句子</cite>
</p>

<dl compact>
<dd><a name="IDX297"></a>
</dd>
<dt> <samp>`--read-full-records'</samp></dt>
<dt> <samp>`-B'</samp></dt>
<dd><p>与...结合使用<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）以读取包含不完整记录的存档，或读取的阻止因子小于指定的存档因子的存档。
</p></dd>
</dl>

<hr size="6">
<a name="Ignore-Zeros"></a>
<a name="SEC75"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC74" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC73" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">忽略零块</h4>

<p>一般， <code>tar</code>当文件条目之间遇到零块时（通常指示归档的结尾），它将停止读取。
<samp>`--ignore-zeros'</samp> （ <samp>`-i'</samp> ）允许<code>tar</code>以完全读取在结尾处包含零块的档案（即损坏的档案，或通过将多个档案连接在一起而创建的档案）。
</p>
<p>的<samp>`--ignore-zeros'</samp> （ <samp>`-i'</samp> ）选项默认情况下处于关闭状态，因为许多版本的<code>tar</code>在归档结束条目之后写入垃圾，因为从不应该读取介质的那部分。<acronym>GNU</acronym> <code>tar</code>在归档结束后不写，而是寻求保持归档实用程序之间的兼容性。
</p>
<dl compact>
<dt> <samp>`--ignore-zeros'</samp></dt>
<dt> <samp>`-i'</samp></dt>
<dd><p>忽略在读取存档时可能遇到的零块（即，归档结束条目）。与...结合使用<samp>`--extract'</samp>要么<samp>`--list'</samp> 。
</p></dd>
</dl>

<hr size="6">
<a name="Writing"></a>
<a name="SEC76"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC75" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC77" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC72" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.4.2更改方式<code>tar</code>写文件</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>见<cite>介绍段落</cite>
</p>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC78">覆盖旧文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC79">保留旧文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC80">保留较新的文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC81">首先取消链接</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC82">递归取消链接</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC83">设置数据修改时间</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC84">设置访问权限</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC85">目录修改时间和权限</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC86">写入标准输出</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC87">写入外部程序</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC88">删除文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Dealing-with-Old-Files"></a>
<a name="SEC77"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC76" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC78" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">控制覆盖现有文件的选项</h4>

<p>提取文件时，如果<code>tar</code>如果发现提取的文件已经存在，则通常在提取文件之前先将其删除，以替换该文件，以防止在存在硬链接或符号链接时造成混淆。（如果现有文件是符号链接，则将其删除，而不是遵循。）但是，如果由于目录为非空而无法删除目录， <code>tar</code>通常会覆盖其元数据（所有权，权限等）。的<samp>`--overwrite-dir'</samp>选项启用此默认行为。为了更加谨慎并保留此类目录的元数据，请使用<samp>`--no-overwrite-dir'</samp>选项。
</p>
<a name="IDX298"></a>
<a name="IDX299"></a>
<p>为了更加谨慎并防止替换现有文件，请使用<samp>`--keep-old-files'</samp> （ <samp>`-k'</samp> ） 选项。它导致<code>tar</code>拒绝替换或更新已经存在的文件，即与存档成员同名的文件会阻止提取该存档成员。而是，它报告一个错误。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>ls</kbd>
blues
$ <kbd>tar -x -k -f archive.tar</kbd>
tar: blues: Cannot open: File exists
tar: Exiting with failure status due to previous errors
</pre></td></tr></tbody></table>
<a name="IDX300"></a>
<p>如果您希望保留未更改的旧文件，但又不想<code>tar</code>要将其视为错误，请使用<samp>`--skip-old-files'</samp>选项。此选项导致<code>tar</code>以静默方式跳过对现有文件的提取。
</p>
<a name="IDX301"></a>
<p>要更积极地更改现有文件，请使用<samp>`--overwrite'</samp>选项。它导致<code>tar</code>提取时覆盖现有文件并遵循现有符号链接。
</p>
<a name="IDX302"></a>
<p>有人认为<acronym>GNU</acronym> <code>tar</code>提取时应毫不犹豫地用其他文件覆盖文件。提取时<code>tar</code>归档，他们希望在创建归档时看到文件系统状态的真实副本。有争议的是，这永远是适当的行为。例如，假设有一个归档文件，其中<tt>usr / local</tt>是指向<tt>usr / local2</tt>的链接。从那时起，也许站点删除了链接，并将整个层次结构从<tt>“ / usr / local2”</tt>重命名为<tt>“ / usr / local”</tt> 。这种事情一直在发生。我想这对<acronym>GNU</acronym>完全不受欢迎<code>tar</code>删除整个层次结构只是为了为链接恢复腾出空间（当然，除非它<em>同时还</em>恢复了完整的<tt>`/ usr / local2'</tt> ！）<acronym>GNU</acronym> <code>tar</code>确实能够删除整个层次结构以重新建立符号链接，例如，但<em>仅当</em> <samp>`--recursive-unlink'</samp>指定为允许这种行为。无论如何，单个文件都会被静默删除。
</p>
<a name="IDX303"></a>
<p>最后， <samp>`--unlink-first'</samp> （ <samp>`-U'</samp> ）选项可能会导致某些情况下提高性能<code>tar</code>在提取文件之前无条件删除文件。
</p>
<hr size="6">
<a name="Overwrite-Old-Files"></a>
<a name="SEC78"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC77" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC79" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">覆盖旧文件</h4>

<dl compact>
<dd><a name="IDX304"></a>
</dd>
<dt> <samp>`--overwrite'</samp></dt>
<dd><p>从存档中提取文件时，覆盖现有文件和目录元数据。
</p>
<p>这导致<code>tar</code>将提取的文件写入文件系统，而不考虑系统上已经存在的文件；即，提取存档时，将覆盖与存档成员同名的文件。这也导致<code>tar</code>将所有权，权限和时间戳提取到任何先前存在的文件或目录中。如果相应文件名的名称是符号链接，则符号链接所指向的文件将被覆盖，而不是符号链接本身（如果可能）。此外，如果提取特殊设备，空目录甚至符号链接，它们也会被自动删除。
</p>
<p>使用时要小心<samp>`--overwrite'</samp>选项，尤其是与<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ）选项，因为这种组合可以更改系统上任何文件的内容，所有权或权限。同样，许多系统并不能很好地覆盖当前正在执行的文件。
</p>
<a name="IDX305"></a>
</dd>
<dt> <samp>`--overwrite-dir'</samp></dt>
<dd><p>从存档中提取文件时，覆盖目录的元数据，但在提取之前删除其他文件。
</p></dd>
</dl>

<hr size="6">
<a name="Keep-Old-Files"></a>
<a name="SEC79"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC78" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC80" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">保留旧文件</h4>

<p><acronym>GNU</acronym> <code>tar</code>当要提取磁盘上已经存在的文件时，提供了两个选项来控制其行为。
</p>
<dl compact>
<dd><a name="IDX306"></a>
</dd>
<dt> <samp>`--keep-old-files'</samp></dt>
<dt> <samp>`-k'</samp></dt>
<dd><p>不要替换存档中的现有文件。遇到这样的文件时， <code>tar</code>发出错误消息。提取结束后， <code>tar</code>以代码2 <a href="#exit-status">退出</a> （请参阅<a href="#exit-status">退出状态</a> ）。
</p>
</dd>
<dt> <samp>`--skip-old-files'</samp></dt>
<dd><p>不要替换存档中的现有文件，但不要将其视为错误。此类文件会被静默跳过，不会影响<code>tar</code>退出状态。
</p>
<p>可以使用以下方法获得更多详细信息<samp>`--warning=existing-file'</samp>以及该选项（请参阅<a href="#SEC49">控制警告消息</a>部分）。
</p></dd>
</dl>

<hr size="6">
<a name="Keep-Newer-Files"></a>
<a name="SEC80"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC79" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC81" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">保留较新的文件</h4>

<dl compact>
<dd><a name="IDX307"></a>
</dd>
<dt> <samp>`--keep-newer-files'</samp></dt>
<dd><p>不要替换比其存档副本新的现有文件。此选项对<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p></dd>
</dl>

<hr size="6">
<a name="Unlink-First"></a>
<a name="SEC81"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC80" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC82" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">首先取消链接</h4>

<dl compact>
<dd><a name="IDX308"></a>
</dd>
<dt> <samp>`--unlink-first'</samp></dt>
<dt> <samp>`-U'</samp></dt>
<dd><p>提取文件之前，先删除它们。这可以使<code>tar</code>如果事先知道提取的文件都需要删除，则运行速度会更快一些。通常此选项会减慢速度<code>tar</code>略微下降，因此默认情况下处于禁用状态。
</p></dd>
</dl>

<hr size="6">
<a name="Recursive-Unlink"></a>
<a name="SEC82"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC81" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC83" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">递归取消链接</h4>

<dl compact>
<dd><a name="IDX309"></a>
</dd>
<dt> <samp>`--recursive-unlink'</samp></dt>
<dd><p>指定此选项后，请尝试删除文件和目录层次结构，然后再提取它们。<em>这是一个危险的选择！</em>
</p></dd>
</dl>

<p>如果您指定<samp>`--recursive-unlink'</samp>选项， <code>tar</code>删除<em>任何</em>使你不能提取文件就当前权限将允许它。这可能包括删除完整目录层次结构的内容。
</p>
<hr size="6">
<a name="Data-Modification-Times"></a>
<a name="SEC83"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC82" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC84" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">设置数据修改时间</h4>

<p>一般， <code>tar</code>将提取文件的数据修改时间设置为存档中文件记录的相应时间，但将提取文件的权限限制为当前<code>umask</code>设置。
</p>
<p>要将提取文件的数据修改时间设置为提取文件的时间，请使用<samp>`--touch'</samp> （ <samp>`-m'</samp> ）选项与<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）。
</p>
<dl compact>
<dd><a name="IDX310"></a>
</dd>
<dt> <samp>`--touch'</samp></dt>
<dt> <samp>`-m'</samp></dt>
<dd><p>将提取的存档成员的数据修改时间设置为提取的时间，而不是为其记录在存档中的时间。与...结合使用<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）。
</p></dd>
</dl>

<hr size="6">
<a name="Setting-Access-Permissions"></a>
<a name="SEC84"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC83" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC85" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">设置访问权限</h4>

<p>要将提取文件的模式（访问权限）设置为为存档中的那些文件记录的模式，请使用<samp>`--same-permissions'</samp>与<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）操作。
</p>
<dl compact>
<dd><a name="IDX311"></a>
<a name="IDX312"></a>
</dd>
<dt> <samp>`--preserve-permissions'</samp></dt>
<dt> <samp>`--same-permissions'</samp></dt>
<dt> <samp>`-p'</samp></dt>
<dd><p>将提取的存档成员的模式设置为存档中记录的模式，而不是当前的umask设置。与...结合使用<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）。
</p></dd>
</dl>

<hr size="6">
<a name="Directory-Modification-Times-and-Permissions"></a>
<a name="SEC85"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC84" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC86" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">目录修改时间和权限</h4>

<p>成功提取文件成员之后， <acronym>GNU</acronym> <code>tar</code>通常会恢复其权限和修改时间，如前几节所述。无法对目录执行此操作，因为提取目录后<code>tar</code>几乎可以肯定会将文件提取到该目录中，这将导致目录修改时间被更新。此外，恢复该目录权限可能不允许在其中创建文件。因此，恢复目录权限和修改时间必须至少延迟，直到所有文件都提取到该目录中为止。<acronym>GNU</acronym> <code>tar</code>使用以下方法还原目录。
</p>
<p>提取的目录是按照用户umask修改的，在归档文件中指定的模式创建的，该模式具有足够的权限来允许文件创建。有关目录的元信息记录在目录的临时列表中。准备提取下一个存档成员时， <acronym>GNU</acronym> <code>tar</code>检查此文件的目录前缀是否包含记住的目录。如果不是，程序将假定所有文件都已提取到该目录中，恢复其修改时间和权限，并从内部列表中删除其条目。这种方法可以在大多数情况下正确还原目录元信息，同时使内存需求足够小。基于以下事实： <code>tar</code>归档使用成员的预定义顺序：首先是目录，然后是该目录中的所有文件和子目录。
</p>
<p>但是，并非总是如此。最重要的例外是增量存档（请参阅<a href="#SEC96">使用<code>tar</code>执行增量转储</a> ）。增量归档中的成员顺序相反：首先存储所有目录成员，然后存储其他（非目录）成员。因此，从增量档案中提取时， <acronym>GNU</acronym> <code>tar</code>更改上述过程。它会记住所有已还原的目录，并仅在处理完整个存档后才还原其元数据。注意，您不需要为此指定任何特殊选项，例如<acronym>GNU</acronym> <code>tar</code>自动检测增量格式的档案。
</p>
<p>在某些情况下，普通存档也需要进行此类处理。考虑以下示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --no-recursion -cvf archive \
    foo foo/file1 bar bar/file foo/file2</kbd>
foo/
foo/file1
bar/
bar/file
foo/file2
</pre></td></tr></tbody></table>
<p>在正常操作期间，遇到<tt>“ bar”</tt> <acronym>GNU之后</acronym> <code>tar</code>将假定目录<tt>“ foo”</tt>中的所有文件均已被提取，因此将恢复其时间戳和权限位。但是，在提取<tt>`foo / file2'之后</tt> ，目录时间戳将再次偏移。
</p>
<p>要在这种情况下正确还原目录元信息，请使用<samp>`--delay-directory-restore'</samp>命令行选项：</p>
<dl compact>
<dd><a name="IDX313"></a>
</dd>
<dt> <samp>`--delay-directory-restore'</samp></dt>
<dd><p>将修改时间和提取目录的权限的恢复延迟到提取结束为止。这样，即使存档具有异常的成员顺序，也可以还原正确的元信息。
</p>
<a name="IDX314"></a>
</dd>
<dt> <samp>`--no-delay-directory-restore'</samp></dt>
<dd><p>取消上一个的效果<samp>`--delay-directory-restore'</samp> 。如果您使用过，请使用此选项<samp>`--delay-directory-restore'</samp>在<code>TAR_OPTIONS</code>变量（请参阅<a href="#TAR_005fOPTIONS">TAR_OPTIONS</a> ）并希望暂时将其禁用。
</p></dd>
</dl>

<hr size="6">
<a name="Writing-to-Standard-Output"></a>
<a name="SEC86"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC85" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC87" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">写入标准输出</h4>

<p>要将提取的文件写入标准输出，而不是在文件系统上创建文件，请使用<samp>`--to-stdout'</samp> （ <samp>`-O'</samp> ） 和这个结合<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）。如果要提取文件以通过管道将其发送，并且不需要将其保留在文件系统中，则此选项很有用。如果您提取多个成员，则它们将按在归档中找到的顺序显示在串联的标准输出中。
</p>
<dl compact>
<dd><a name="IDX315"></a>
</dd>
<dt> <samp>`--to-stdout'</samp></dt>
<dt> <samp>`-O'</samp></dt>
<dd><p>将文件写入标准输出。仅与<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）。使用此选项时，不是创建指定的文件，而是<code>tar</code>将提取的文件内容写入其标准输出。如果仅提取文件以便通过管道发送它们，则这可能很有用。此选项对<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p></dd>
</dl>

<p>例如，如果您的tar归档文件包含一个大文件，并且不想在处理文件之前将其存储在磁盘上，则此功能很有用。您可以使用如下命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar -xOzf foo.tgz bigfile | process
</pre></td></tr></tbody></table>
<p>如果要处理文件的串联，甚至可以这样：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar -xOzf foo.tgz bigfile1 bigfile2 | process
</pre></td></tr></tbody></table>
<p>然而， <samp>`--to-command'</samp>可能更方便用于多个文件。请参阅下一节。
</p>
<hr size="6">
<a name="Writing-to-an-External-Program"></a>
<a name="SEC87"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC86" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC88" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">写入外部程序</h4>

<p>你可以指导<code>tar</code>将每个提取文件的内容发送到外部程序的标准输入：</p>
<dl compact>
<dd><a name="IDX316"></a>
</dd>
<dt> <samp>`--to-command=<var>command</var>'</samp></dt>
<dd><p>提取文件并将其内容传输到的标准输入<var>command</var> 。使用此选项时，不是创建指定的文件，而是<code>tar</code>调用<var>command</var>并将文件内容通过管道传输到其标准输出。的<var>command</var>可能包含命令行参数（有关更多详细信息，请参见<a href="#SEC55">运行外部命令</a> ）。
</p>
<p>注意， <var>command</var>对每个提取的常规文件执行一次。使用此选项时，非常规文件（目录等）将被忽略。
</p></dd>
</dl>

<p>该命令可以从以下环境变量获取有关其处理的文件的信息：</p>
<dl compact>
<dt> <code>TAR_FILETYPE</code></dt>
<dd><p>文件类型。这是一个单字母，含义如下：</p>
<table>
<tbody><tr><td><p>F</p></td><td><p>常规文件</p></td></tr>
<tr><td><p>d</p></td><td><p>目录</p></td></tr>
<tr><td><p>升</p></td><td><p>符号链接</p></td></tr>
<tr><td><p>H</p></td><td><p>硬连结</p></td></tr>
<tr><td><p>b</p></td><td><p>块设备</p></td></tr>
<tr><td><p>C</p></td><td><p>角色装置</p></td></tr>
</tbody></table>

<p>当前仅支持常规文件。
</p>
</dd>
<dt> <code>TAR_MODE</code></dt>
<dd><p>文件模式，一个八进制数。
</p>
</dd>
<dt> <code>TAR_FILENAME</code></dt>
<dd><p>文件名。
</p>
</dd>
<dt> <code>TAR_REALNAME</code></dt>
<dd><p>存储在存档中的文件名。
</p>
</dd>
<dt> <code>TAR_UNAME</code></dt>
<dd><p>文件所有者的名称。
</p>
</dd>
<dt> <code>TAR_GNAME</code></dt>
<dd><p>文件所有者组的名称。
</p>
</dd>
<dt> <code>TAR_ATIME</code></dt>
<dd><p>上次访问时间。这是一个十进制数字，表示自纪元以来的秒数。如果档案库提供的时间具有纳秒级精度，则将纳秒数附加到小数点后的时间戳。
</p>
</dd>
<dt> <code>TAR_MTIME</code></dt>
<dd><p>上次修改时间。
</p>
</dd>
<dt> <code>TAR_CTIME</code></dt>
<dd><p>上次状态更改的时间。
</p>
</dd>
<dt> <code>TAR_SIZE</code></dt>
<dd><p>文件大小。
</p>
</dd>
<dt> <code>TAR_UID</code></dt>
<dd><p>文件所有者的UID。
</p>
</dd>
<dt> <code>TAR_GID</code></dt>
<dd><p>文件所有者的GID。
</p></dd>
</dl>

<p>此外，以下变量包含有关tar模式和正在处理的归档的信息：</p>
<dl compact>
<dt> <code>TAR_VERSION</code></dt>
<dd><p><acronym>GNU</acronym> <code>tar</code>版本号。
</p>
</dd>
<dt> <code>TAR_ARCHIVE</code></dt>
<dd><p>档案名称<code>tar</code>正在处理。
</p>
</dd>
<dt> <code>TAR_BLOCKING_FACTOR</code></dt>
<dd><p>电流阻塞系数（请参阅“ <a href="#SEC158">阻塞”</a>一节）。
</p>
</dd>
<dt> <code>TAR_VOLUME</code></dt>
<dd><p>卷序号<code>tar</code>正在处理。
</p>
</dd>
<dt> <code>TAR_FORMAT</code></dt>
<dd><p>正在处理的档案格式。有关存档格式名称的完整列表，请参见<a href="#SEC133">控制存档格式</a>一节。
</p></dd>
</dl>

<p>这些变量是在执行命令之前定义的，因此，您可以根据需要将它们作为参数传递。例如，如果命令<var>proc</var>将成员名称和大小作为其参数，则可以执行以下操作：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -x -f archive.tar \
       --to-command='proc $TAR_FILENAME $TAR_SIZE'</kbd>
</pre></td></tr></tbody></table>

<p>请注意，单引号可以防止变量名称在调用时被外壳扩展<code>tar</code> 。
</p>
<p>如果<var>command</var>以非零状态退出， <code>tar</code>将显示类似于以下内容的错误消息：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar: 2345: Child returned status 1
</pre></td></tr></tbody></table>
<p>这里， <samp>`2345'</samp>是完成过程的PID。
</p>
<p>如果不希望出现这种情况，请使用<samp>`--ignore-command-error'</samp> ：</p>
<dl compact>
<dd><a name="IDX317"></a>
</dd>
<dt> <samp>`--ignore-command-error'</samp></dt>
<dd><p>忽略子流程的退出代码。请注意，如果程序退出信号或异常终止，即使使用此选项，也会打印错误消息。
</p>
<a name="IDX318"></a>
</dd>
<dt> <samp>`--no-ignore-command-error'</samp></dt>
<dd><p>取消任何先前的效果<samp>`--ignore-command-error'</samp>选项。如果您设置了此选项，则此选项很有用<samp>`--ignore-command-error'</samp>在<code>TAR_OPTIONS</code> （请参阅<a href="#TAR_005fOPTIONS">TAR_OPTIONS</a> ），并希望暂时将其取消。
</p></dd>
</dl>

<hr size="6">
<a name="remove-files"></a>
<a name="SEC88"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC87" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC89" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC76" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">删除文件</h4>

<p>请参阅<cite>本节过于简洁。还有补充吗？举个例子吧？</cite>
</p>

<dl compact>
<dd><a name="IDX319"></a>
</dd>
<dt> <samp>`--remove-files'</samp></dt>
<dd><p>将文件添加到存档后删除文件。
</p></dd>
</dl>

<hr size="6">
<a name="Scarce"></a>
<a name="SEC89"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC88" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC90" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC72" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">4.4.3应对稀缺资源</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<a name="IDX320"></a>
<a name="IDX321"></a>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC90">起始文件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC91">相同顺序</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Starting-File"></a>
<a name="SEC90"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC89" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC91" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC89" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">起始文件</h4>

<dl compact>
<dd><a name="IDX322"></a>
</dd>
<dt> <samp>`--starting-file=<var>name</var>'</samp></dt>
<dt> <samp>`-K <var>name</var>'</samp></dt>
<dd><p>在存档中间开始操作。与...结合使用<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ） 要么<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p></dd>
</dl>

<a name="IDX323"></a>
<p>如果先前尝试提取文件由于磁盘空间不足而失败，则可以使用<samp>`--starting-file=<var>name</var>'</samp> （ <samp>`-K <var>name</var>'</samp> ）仅在成员后才开始提取<var>name</var>档案。当然，这假定现在有可用空间，或者您现在要提取到另一个文件系统中。（您也可以选择暂停<code>tar</code> ，从文件系统中删除不需要的文件，然后恢复相同的文件<code>tar</code>操作。在这种情况下， <samp>`--starting-file'</samp>没有必要。）另请参阅<a href="#SEC54">在操作过程中要求确认</a>以及<a href="#SEC110">排除某些文件</a> 。
</p>
<hr size="6">
<a name="Same-Order"></a>
<a name="SEC91"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC90" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC92" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC89" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="unnumberedsubsubsec">相同顺序</h4>

<dl compact>
<dd><a name="IDX324"></a>
<a name="IDX325"></a>
<a name="IDX326"></a>
</dd>
<dt> <samp>`--same-order'</samp></dt>
<dt> <samp>`--preserve-order'</samp></dt>
<dt> <samp>`-s'</samp></dt>
<dd><p>在内存量较小的计算机上处理大量文件名列表。与...结合使用<samp>`--compare'</samp> （ <samp>`--diff'</samp> ， <samp>`-d'</samp> ）， <samp>`--list'</samp> （ <samp>`-t'</samp> ） 要么<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）。
</p></dd>
</dl>

<p>的<samp>`--same-order'</samp> （ <samp>`--preserve-order'</samp> ， <samp>`-s'</samp> ）选项告诉<code>tar</code>要列出或提取的文件名列表的排序与存档中文件的排序顺序相同。这样即使在小型计算机上也可以使用大量的名称，否则将无法同时将所有名称保存在内存中。这样的排序列表可以通过运行轻松创建<samp>`tar -t'</samp>在存档上并编辑其输出。
</p>
<p>在现代计算机系统上可能永远不需要此选项。
</p>
<hr size="6">
<a name="backup"></a>
<a name="SEC92"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC91" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC93" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">4.5备份选项</h2>


<p><acronym>GNU</acronym> <code>tar</code>提供了在编写新版本之前进行文件备份的选项。这些选项控制这些备份的详细信息。在创建或重写归档文件之前，它们可能会应用于归档文件本身，以及提取的各个成员。其他<acronym>GNU</acronym>程序（ <code>cp</code> ， <code>install</code> ， <code>ln</code>和<code>mv</code> （例如）提供类似的选项。
</p>
<p>当提取包含许多具有相同名称的成员的归档文件时，或者在具有文件名限制的系统上提取归档文件时，备份选项可能会出乎意料地有用，这会通过名称截断的副作用使不同的成员显示为具有相似的名称。<cite>仅当我们对截断的备份名称有一个好的方案时，</cite>请参阅“ <cite>这是正确的”，我完全不确定：我怀疑这方面需要工作。</cite>
</p>
<p>在备份任何现有文件之前，先通过提取将其覆盖，然后将冲突文件自动重命名为唯一文件，并且仅对一系列冲突文件中的最后一个文件保留真实名称。通过使用详细模式，用户可以准确跟踪发生了什么。
</p>
<p>从细节上讲，某些决策仍处于试验阶段，并且将来可能会更改，我们正在等待用户的评论。因此，请不要学习盲目地依赖备份功能的细节。例如，当前，目录本身从未通过使用这些选项来重命名，因此，从目录中提取文件仍然有很大的失败机会。此外，备份选项不仅适用于提取的成员，还适用于创建的档案。对于创建的档案，当档案是块或字符设备，或者它引用远程文件时，将不尝试备份。
</p>
<p>为了简单和有效，备份是通过在创建或提取之前重命名旧文件而不是通过复制来进行的。如果文件创建失败，将恢复原始名称。如果在部分提取文件后发生故障，则备份文件和部分提取的文件都会保留。
</p>
<dl compact>
<dt> <samp>`--backup[=<var>method</var>]'</samp></dt>
<dd><a name="IDX327"></a>
<a name="IDX328"></a>
<a name="IDX329"></a>
<p>备份即将被覆盖或删除的文件。没有此选项，原始版本将被销毁。
</p>
<p>使用<var>method</var>确定制作的备份类型。如果<var>method</var>未指定，请使用<code>VERSION_CONTROL</code>环境变量。而如果<code>VERSION_CONTROL</code>未设置，请使用<samp>`existing'</samp>方法。
</p>
<a name="IDX330"></a>
<p>此选项对应于Emacs变量<samp>`version-control'</samp> ;相同的值<var>method</var>被Emacs接受。此选项还允许使用更多描述性名称。有效的<var>method</var> s是：</p>
<dl compact>
<dt> <samp>`t'</samp></dt>
<dt> <samp>`numbered'</samp></dt>
<dd><a name="IDX331"></a>
<p>始终进行编号备份。
</p>
</dd>
<dt> <samp>`nil'</samp></dt>
<dt> <samp>`existing'</samp></dt>
<dd><a name="IDX332"></a>
<p>对已有文件进行编号备份，对其他文件进行简单备份。
</p>
</dd>
<dt> <samp>`never'</samp></dt>
<dt> <samp>`simple'</samp></dt>
<dd><a name="IDX333"></a>
<p>始终进行简单的备份。
</p>
</dd>
</dl>

</dd>
<dt> <samp>`--suffix=<var>suffix</var>'</samp></dt>
<dd><a name="IDX334"></a>
<a name="IDX335"></a>
<a name="IDX336"></a>
<p>附加<var>suffix</var>到每个用<samp>`--backup'</samp> 。如果未指定此选项，则<code>SIMPLE_BACKUP_SUFFIX</code>使用环境变量。而如果<code>SIMPLE_BACKUP_SUFFIX</code>未设置，默认为<samp>`~'</samp> ，就像在Emacs中一样。
</p>
</dd>
</dl>

<hr size="6">
<a name="looking-ahead"></a>
<a name="SEC93"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC92" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC56" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">4.6展望未来：本手册的其余部分</h2>

<p>现在，您已经了解了如何使用所有可用的八种操作<code>tar</code> ，以及许多可能的选项。下一章说明如何选择和更改文件名和归档名，如何使用文件存储其他文件的名，然后可以将其用作参数<code>tar</code> （如果您希望多次存档同一文件列表，则可以帮助您节省时间），依此类推。看看<cite>情况是否不明显，我会根据我对下一章*真正*的所作所为的有限记忆来在某种意义上进行弥补。我只是想充实最后一节的内容，所以我记得把它放在这里。 :-)</cite>
</p>

<p>如果文件太多，无法在命令行上方便地列出，则可以列出文件中的名称，然后<code>tar</code>将读取该文件。请参阅<a href="#SEC108">从文件读取名称</a>部分。
</p>
<p>有多种方式引起<code>tar</code>跳过一些文件，而不是将其存档。请参阅“ <a href="#SEC105">选择文件和名称”部分<code>tar</code></a> 。
</p>
<hr size="6">
<a name="Backups"></a>
<a name="SEC94"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC93" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC95" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC56" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">5，执行备份和还原文件</h1>

<p><acronym>GNU</acronym> <code>tar</code>与用于执行备份和还原的脚本一起分发。即使这些脚本很可能会让您满意，但它们并不是唯一可用于执行备份和还原的脚本或方法。您可以自己创建一个，也可以使用专用于此目的的更复杂的软件包。
</p>
<p>一些用户热衷于<code>Amanda</code> （高级马里兰自动网络磁盘存档器），这是由James da <tt>Silva`jds@cs.umd.edu'</tt>开发的备份系统，可在许多Unix系统上使用。这是免费软件，可从<a href="http://www.amanda.org">http://www.amanda.org获得</a> 。</p>
<p>请参阅<cite>此处，是有关<acronym>GNU</acronym>内提供的备份脚本的未来文档的可能计划。 <code>tar</code>分配。
</cite> </p>
<ul>
<li><cite>转储</cite> <ul class="toc">
<li>- <cite>什么是垃圾场</cite> </li><li>- <cite>不同级别的转储</cite> <ul class="toc">
<li><cite>+全转储=转储所有内容</cite> 
</li><li><cite>+ 1级，2级转储等A级<var>n</var>转储转储自上一级别以来发生的所有更改<var>n</var> -1转储（？）
  </cite> 
</li></ul>
 </li><li>- <cite>如何使用脚本进行转储（即概念）</cite> <ul class="toc">
<li><cite>+在编辑备份规范后运行的脚本（详细信息）</cite> 
</li></ul>
 </li><li>- <cite>备份规格，这是什么。
  </cite> <ul class="toc">
<li><cite>+如何自定义</cite> 
</li><li><cite>+脚本的实际文本[/ sp / dump / backup-specs]</cite> 
</li></ul>
 </li><li>- <cite>问题</cite> <ul class="toc">
<li><cite>+ rsh不起作用</cite> 
</li><li><cite>+未安装rtape</cite> 
</li><li><cite>+（其他？）
  </cite> 
</li></ul>
 </li><li>- <cite>的<samp>`--incremental'</samp>焦油选项</cite> </li><li>- <cite>胶带</cite> <ul class="toc">
<li><cite>+写保护</cite> 
</li><li><cite>+媒体类型，不同大小和类型，对不同事物有用</cite> 
</li><li><cite>+文件和磁带标记文件之间有一个磁带标记，末尾有两个。
  </cite> 
</li><li><cite>+将磁带MT定位在写入结束时写入两个，在再次写入时退格一格。
  </cite> 
</li></ul>
<p><cite> </cite> </p></li></ul>
</li></ul>
<p><cite></cite>
</p>

<p>本章介绍了提供的shell脚本和<code>tar</code>特定于用作备份工具的选项。
</p>
<p><em>备份</em>文件系统意味着创建包含该文件系统中所有文件的档案。然后，这些存档可用于还原任何或所有这些文件（例如，如果磁盘崩溃或意外删除文件）。文件系统<em>备份</em>也称为<em>转储</em> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC95">5.1使用<code>tar</code>执行完整转储</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC97">5.3备份级别</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC98">5.4设置备份和还原参数</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC103">5.5使用备份脚本</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC104">5.6使用还原脚本</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Full-Dumps"></a>
<a name="SEC95"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC94" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC96" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">5.1使用<code>tar</code>执行完整转储</h2>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<a name="IDX337"></a>
<a name="IDX338"></a>

<a name="IDX339"></a>
<p>仅当没有其他人或程序在修改文件系统中的文件时才进行完全转储。如果在<code>tar</code>在进行备份时，它们可能无法正确存储在存档中，在这种情况下，您将无法还原它们。（未修改的文件写入不会有任何麻烦，并且不会破坏整个存档。）
</p>
<p>您将要使用<samp>`--label=<var>archive-label</var>'</samp> （ <samp>`-V <var>archive-label</var>'</samp> ）选项为存档提供卷标，因此即使标签从磁带上掉下来，您也可以知道该存档是什么，或者类似的东西。
</p>
<p>除非要保证转储的文件系统可以放在一个卷上，否则您将需要使用<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ） 选项。确保手头上有足够的磁带来完成备份。
</p>
<p>如果要分别转储每个文件系统，则需要使用<samp>`--one-file-system'</samp>防止选项<code>tar</code>在存储（子）目录时跨越文件系统边界。
</p>
<p>的<samp>`--incremental'</samp> （ <samp>`-G'</samp> ）（请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code></a>不需要<a href="#SEC96">执行“执行增量转储”</a>选项，因为这是文件系统中所有内容的完整副本，并且从此备份进行的完全还原只会在完全空的磁盘上进行。
</p>
<p>除非您着急，否则请相信<code>tar</code>程序（和您的磁带），最好使用<samp>`--verify'</samp> （ <samp>`-W'</samp> ）选项，以确保您的文件确实正确地放入了转储中。这还将检测在归档文件时（或之后）修改文件的情况。不幸的是，并非所有介质（尤其是盒式磁带）都可以通过验证。
</p>
<hr size="6">
<a name="Incremental-Dumps"></a>
<a name="SEC96"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC95" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC97" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">5.2使用<code>tar</code>执行增量转储</h2>

<p><em>增量备份</em>是<acronym>GNU的</acronym>一种特殊形式<code>tar</code>存档中存储其他元数据，以便在提取存档时可以恢复文件系统的确切状态。
</p>
<p><acronym>GNU</acronym> <code>tar</code>当前提供两个选项来处理增量备份： <samp>`--listed-incremental=<var>snapshot-file</var>'</samp> （ <samp>`-g <var>snapshot-file</var>'</samp> ）和<samp>`--incremental'</samp> （ <samp>`-G'</samp> ）。
</p>
<a name="IDX340"></a>
<p>选项<samp>`--listed-incremental'</samp>指示tar对增量归档进行操作，并将其他元数据存储在称为<em>快照文件</em>的独立<em>文件中</em> 。此文件的目的是帮助确定自上次备份以来已更改，添加或删除了哪些文件，以便下一次增量备份将仅包含已修改的文件。快照文件的名称作为该选项的参数给出：</p>
<dl compact>
<dt> <samp>`--listed-incremental=<var>file</var>'</samp></dt>
<dt> <samp>`-g <var>file</var>'</samp></dt>
<dd><p>使用快照数据处理增量备份<var>file</var> 。
</p></dd>
</dl>

<p>要创建增量备份，您可以使用<samp>`--listed-incremental'</samp>和...一起<samp>`--create'</samp> （请参阅<a href="#SEC17">如何创建档案部分</a> ）。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create \
           --file=archive.1.tar \
           --listed-incremental=/var/log/usr.snar \
           /usr</kbd>
</pre></td></tr></tbody></table>
<p>这将在<tt>“ archive.1.tar”中</tt>创建<tt>“ / usr”</tt>文件系统的增量备份，并将其他元数据存储在<tt>“ /var/log/usr.snar”</tt>文件中。如果此文件不存在，将创建它。然后，创建的档案将是<em>0级备份</em> ；请参阅下一部分以了解有关备份级别的更多信息。
</p>
<p>否则，如果文件<tt>`/var/log/usr.snar'</tt>存在，它将确定要修改的文件。在这种情况下，仅这些文件将存储在存档中。例如，假设运行上述命令后，删除文件<tt>“ / usr / doc / old”</tt>并创建目录<tt>“ / usr / local / db”</tt> ，其内容如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>ls /usr/local/db</kbd>
/usr/local/db/data
/usr/local/db/index
</pre></td></tr></tbody></table>
<p>一段时间后，您将创建另一个增量备份。然后，您将看到：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create \
           --file=archive.2.tar \
           --listed-incremental=/var/log/usr.snar \
           /usr</kbd>
tar: usr/local/db: Directory is new
usr/local/db/
usr/local/db/data
usr/local/db/index
</pre></td></tr></tbody></table>

<p>创建的档案<tt>“ archive.2.tar”</tt>将仅包含这三个成员。此存档称为1 <em>级备份</em> 。请注意， <tt>`/ var / log / usr.snar'</tt>将使用新数据进行更新，因此如果您打算创建更多数据<samp>`level 1'</samp>备份，有必要在运行之前创建快照文件的工作副本<code>tar</code> 。上面的示例将进行如下修改：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cp /var/log/usr.snar /var/log/usr.snar-1</kbd>
$ <kbd>tar --create \
           --file=archive.2.tar \
           --listed-incremental=/var/log/usr.snar-1 \
           /usr</kbd>
</pre></td></tr></tbody></table>
<p><a name="g_t_002d_002dlevel_003d0"></a><a name="IDX341"></a>你可以强迫<samp>`level 0'</samp>通过在运行前删除快照文件进行备份<code>tar</code> ，或者通过提供<samp>`--level=0'</samp>选项，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create \
           --file=archive.2.tar \
           --listed-incremental=/var/log/usr.snar-0 \
           --level=0 \
           /usr</kbd>
</pre></td></tr></tbody></table>
<p>增量转储主要取决于时间戳，因此，如果您在转储期间修改文件的时间戳（例如，使用<samp>`--atime-preserve=replace'</samp>选项），或者如果您将时钟向后设置。
</p>
<p><a name="device-numbers"></a><a name="IDX342"></a>快照文件中存储的元数据包含设备编号，显然应该是非易失性值。但是，事实证明，当自动挂载程序出现在图片中时， <acronym>NFS</acronym>设备的值就变得不确定。这会导致增量转储中的大量虚假还原，因此，随着时间的推移比较两个<acronym>NFS</acronym>设备编号似乎毫无用处。当前实施的解决方案是在比较目录时将所有<acronym>NFS</acronym>设备视为相等。这是相当粗略的，但是似乎没有更好的方法。
</p>
<p>除了使用<acronym>NFS之外</acronym> ，在许多情况下，依赖设备编号还可能导致伪造的未修改文件的还原。例如，在存档<acronym>LVM</acronym>快照卷时会发生这种情况。为了避免这种情况，请使用<samp>`--no-check-device'</samp>选项：</p>
<dl compact>
<dd><a name="IDX343"></a>
</dd>
<dt> <samp>`--no-check-device'</samp></dt>
<dd><p>准备增量转储的已更改文件列表时，请勿依赖设备编号。
</p>
<a name="IDX344"></a>
</dd>
<dt> <samp>`--check-device'</samp></dt>
<dd><p>准备增量转储的已更改文件列表时，请使用设备编号。这是默认行为。此选项的目的是撤消<samp>`--no-check-device'</samp>如果在<code>TAR_OPTIONS</code>环境变量（请参阅<a href="#TAR_005fOPTIONS">TAR_OPTIONS</a> ）。
</p></dd>
</dl>

<p>还有另一种方法来应对更改的设备编号。在<a href="#SEC186">修复快照文件中</a>对其进行了详细描述。
</p>
<p>请注意，增量存档使用<code>tar</code>扩展名，可能无法被非<acronym>GNU</acronym>版本的<code>tar</code>程序。
</p>
<a name="IDX345"></a>
<a name="IDX346"></a>
<p>要从增量转储中提取，请使用<samp>`--listed-incremental'</samp>和...一起<samp>`--extract'</samp>选项（请参阅<a href="#SEC27">提取特定文件</a>部分）。在这种情况下， <code>tar</code>不需要访问快照文件，因为提取所需的所有数据都存储在存档本身中。因此，提取时，您可以给任何参数<samp>`--listed-incremental'</samp> ，通常的做法是使用<samp>`--listed-incremental=/dev/null'</samp> 。或者，您可以使用<samp>`--incremental'</samp> ，不需要任何参数。一般来说， <samp>`--incremental'</samp> （ <samp>`-G'</samp> ）可以用作<samp>`--listed-incremental'</samp>列出或提取增量备份时（有关此选项的更多信息，请参阅<a href="#incremental_002dop">增量操作</a> ）。
</p>
<p>从增量备份<acronym>GNU中</acronym>提取时<code>tar</code>尝试还原创建归档文件时文件系统所具有的确切状态。特别是，它将在创建归档文件时<em>删除</em>文件系统中目录中不存在的那些文件。如果创建了多个级别的增量文件，则为了还原文件系统在创建上一级别时拥有的确切内容，您需要依次从所有备份中还原。继续我们的示例，要恢复<tt>`/ usr'</tt>文件系统的状态，可以这样做<a name="DOCF12" href="#FOOT12">（12）</a> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --extract \
           --listed-incremental=/dev/null \
           --file archive.1.tar</kbd>
$ <kbd>tar --extract \
           --listed-incremental=/dev/null \
           --file archive.2.tar</kbd>
</pre></td></tr></tbody></table>
<p>要列出增量存档的内容，请使用<samp>`--list'</samp> （请参阅“ <a href="#SEC23">如何列出档案”</a>一节）。要获取有关存档的更多信息，请使用<samp>`--listed-incremental'</samp>要么<samp>`--incremental'</samp>与两个结合<samp>`--verbose'</samp>选项<a name="DOCF13" href="#FOOT13">（13）</a> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar --list --incremental --verbose --verbose --file archive.tar</kbd>
</pre></td></tr></tbody></table>
<p>对于存档中的每个目录，此命令将在创建存档时打印该目录中文件的列表。这些信息以一种人类可读且对程序无歧义的格式输出：每个文件名都打印为</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><var>x</var> <var>file</var>
</pre></td></tr></tbody></table>

<p>哪里<var>x</var>是描述文件状态的字母： <samp>`Y'</samp>如果档案中存在档案， <samp>`N'</samp>如果档案未包含在档案中，或<samp>`D'</samp>如果文件是目录（并且包含在存档中）。有关<a href="#SEC195">转储</a>目录和状态代码的详细说明，请参见<a href="#SEC195">转储目录</a>部分。每条这样的行都以换行符结尾。最后一行之后是附加的换行符，以指示数据的结尾。
</p>
<p><a name="incremental_002dop"></a>选项<samp>`--incremental'</samp> （ <samp>`-G'</samp> ）的行为与<samp>`--listed-incremental'</samp>当与<samp>`--list'</samp>和<samp>`--extract'</samp>选项。当与<samp>`--create'</samp>选项，它将创建增量存档，而不创建快照文件。因此，使用以下命令无法创建多个级别的增量备份<samp>`--incremental'</samp>选项。
</p>
<hr size="6">
<a name="Backup-Levels"></a>
<a name="SEC97"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC96" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC98" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">5.3备份级别</h2>

<p>包含文件系统中所有文件的归档文件称为<em>完全备份</em>或<em>完全转储</em> 。您可以通过每天创建完整转储来确保数据安全。但是，这种策略将浪费大量的存档介质和用户时间，因为每天都会重新存档未更改的文件。
</p>
<p>仅偶尔执行一次完整转储会更有效率。要在完全转储之间备份文件，可以使用<em>增量转储</em> 。<em>一级</em>转储将存档自上次完整转储以来已更改的所有文件。
</p>
<p>典型的转储策略是每周执行一次完整转储，每天执行一次一级转储。这实际上意味着某些版本的文件将被多次存档，但是这种转储策略使得仅提取两个存档即可恢复文件系统在一天之内的准确性，即最后一次每周（完全）转储和最后一次存档。每天（一级）转储。唯一丢失的信息是自上次每日备份以来更改或创建的文件。（一天不只一次转储通常是不值得的。）
</p>
<p><acronym>GNU</acronym> <code>tar</code>附带的脚本可用于执行完整和一级（实际上，甚至二级）转储。使用脚本（shell程序）执行备份和还原是键入文件名列表和<code>tar</code>手工命令。
</p>
<p>在使用这些脚本之前，需要编辑文件<tt>“ backup-specs”</tt> ，该文件指定备份脚本和还原脚本使用的参数。该文件通常位于<tt>`/ etc / backup'</tt>目录中。有关详细说明，请参阅“ <a href="#SEC98">设置备份和还原参数”</a>一节。设置备份参数后，您可以通过运行适当的脚本来执行备份或还原。
</p>
<p>备份脚本的名称是<code>backup</code> 。还原脚本的名称是<code>restore</code> 。以下各节详细介绍了它们的用法。
</p>
<p><em>请注意：</em>备份和还原脚本旨在一起使用。虽然可以从使用备份脚本创建的存档中手动还原文件，并可以手动创建一个存档，然后可以使用还原脚本将其提取出来，但使用脚本更容易。请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code>尝试进行增量转储</a> 。
</p>
<hr size="6">
<a name="Backup-Parameters"></a>
<a name="SEC98"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC97" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC99" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">5.4设置备份和还原参数</h2>

<p>文件<tt>“ backup-specs”</tt>指定了随随附的备份和还原脚本的备份参数。 <code>tar</code> 。在使用这些脚本之前，您必须编辑<tt>“ backup-specs”</tt>以适合您的系统配置和计划。
</p>
<p>从语法上讲， <tt>“ backup-specs”</tt>是一个shell脚本，主要包含变量分配。但是，此文件中允许使用任何有效的Shell构造。特别是，您可能希望在该脚本中定义函数（例如，参见<code>RESTORE_BEGIN</code>下面）。有关Shell脚本语法的更多信息，请参考<a href="http://www.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#ta g_02">Shell Command Language的定义</a> 。另请参见《 <cite>bash参考手册</cite> 》中的<a href="bashref.html#Top">（bashref）顶部的</a> “ bash功能”。
</p>
<p>壳变量控制行为<code>backup</code>和<code>restore</code>在以下小节中介绍。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC99">5.4.1通用变量</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC100">5.4.2磁带控制</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC102">5.4.4 <tt>“备份规范”</tt>的示例文本</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="General_002dPurpose-Variables"></a>
<a name="SEC99"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC98" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC100" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC98" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">5.4.1通用变量</h3>

<dl>
<dt><u>备用变量：</u> <b>ADMININISTRATOR</b> <a name="IDX351"></a>
</dt>
<dd><p>备份管理员的用户名。 <code>Backup</code>脚本会将备份报告发送到该地址。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>BACKUP_HOUR</b> <a name="IDX352"></a>
</dt>
<dd><p>备份完成的时间。可以是0到23之间的数字，也可以是时间格式<var>hours</var> ： <var>minutes</var>或字符串<samp>`now'</samp> 。
</p>
<p>该变量由<code>backup</code> 。其值可以使用来覆盖<samp>`--time'</samp>选项（请参阅<a href="#SEC103">使用备份脚本部分</a> ）。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>TAPE_FILE</b> <a name="IDX353"></a>
</dt>
<dd><p>设备<code>tar</code>将存档写入。如果<var>TAPE_FILE</var>是一个远程存档（请参阅<a href="#remote_002ddev">remote-dev</a> ），备份脚本将假设您的<code>mt</code>能够访问远程设备。如果<var>RSH</var> （请参见<a href="#RSH">RSH</a> ）已设置， <samp>`--rsh-command'</samp>选项将添加到的调用中<code>mt</code> 。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>BLOCKING</b> <a name="IDX354"></a>
</dt>
<dd><p>阻碍因素<code>tar</code>将在写入转储存档时使用。请参阅<a href="#SEC160">存档的阻塞因素</a>部分。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>BACKUP_DIRS</b> <a name="IDX355"></a>
</dt>
<dd><p>要转储的文件系统列表（用于<code>backup</code> ）或已还原（用于<code>restore</code> ）。您可以在列表中包括任何目录名称-无论文件在其他联网计算机上的外观如何，都将包括该文件系统上的子目录。其他文件系统上的子目录将被忽略。
</p>
<p>主机名指定要运行的主机<code>tar</code> ，通常应该是实际包含文件系统的主机。但是，主机必须具有<acronym>GNU</acronym> <code>tar</code>已安装，并且必须能够使用运行脚本的计算机上使用的相同文件名访问包含备份脚本及其支持文件的目录。 <code>pwd</code>在该计算机上的该目录中时将打印）。如果包含文件系统的主机不具备此功能，则可以指定其他主机，只要它可以通过<acronym>NFS</acronym>访问文件系统即可。</p>
<p>如果文件系统列表很长，您可能希望将其放在单独的文件中。这个文件通常被命名为<tt>`/ etc / backup / dirs'</tt> ，但是这个名字可以在<tt>`backup-specs'中</tt>使用<code>DIRLIST</code>变量。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>DIRLIST</b> <a name="IDX356"></a>
</dt>
<dd><p>包含要备份或还原的文件系统列表的文件名。默认情况下是<tt>`/ etc / backup / dirs'</tt> 。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>BACKUP_FILES</b> <a name="IDX357"></a>
</dt>
<dd><p>要转储的单个文件的列表（用于<code>backup</code> ）或已还原（用于<code>restore</code> ）。这些应该可以从运行备份脚本的计算机上访问。
</p>
<p>如果单个文件的列表很长，您可能希望将其存储在单独的文件中。这个文件通常被命名为<tt>`/ etc / backup / files'</tt> ，但是这个名字可以在<tt>`backup-specs'中</tt>使用<code>FILELIST</code>变量。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>FILELIST</b> <a name="IDX358"></a>
</dt>
<dd><p>文件名，其中包含要备份或还原的单个文件的列表。默认情况下是<tt>`/ etc / backup / files'</tt> 。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>MT</b> <a name="IDX359"></a>
</dt>
<dd><p>的完整档案名称<code>mt</code>二进制
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>RSH</b> <a name="IDX360"></a>
</dt>
<dd><p><a name="RSH"></a>的完整档案名称<code>rsh</code>二进制或等效形式。您可能希望将其设置为<code>ssh</code> ，以提高安全性。在这种情况下，您将必须使用公共密钥身份验证。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>RSH_COMMAND</b> <a name="IDX361"></a>
</dt>
<dd><p>的完整档案名称<code>rsh</code>远程计算机上的二进制文件。这将通过<samp>`--rsh-command'</samp> <acronym>GNU</acronym>远程调用的选项<code>tar</code> 。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>VOLNO_FILE</b> <a name="IDX362"></a>
</dt>
<dd><p>用于保存卷号的临时文件的名称。所有具有要转储文件系统的机器都需要访问此文件。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>XLIST</b> <a name="IDX363"></a>
</dt>
<dd><p><em>排除文件列表的</em>名称。<em>排除文件列表</em>是位于远程计算机上的文件，其中包含要从备份中排除的文件列表。排除文件列表在/ etc / tar-backup目录中搜索。排除文件列表的常见用法是从备份中排除包含安全敏感信息（例如， <tt>“ / etc / shadow”</tt> ）的文件。
</p>
<p>此变量仅影响<code>backup</code> 。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>SLEEP_TIME</b> <a name="IDX364"></a>
</dt>
<dd><p>在任何两个连续文件系统的转储之间休眠的时间</p>
<p>此变量仅影响<code>backup</code> 。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>DUMP_REMIND_SCRIPT</b> <a name="IDX365"></a>
</dt>
<dd><p>当需要为下一个卷插入新磁带时运行的脚本。管理员可能想为其站点定制此脚本。如果未设置此变量，则为<acronym>GNU</acronym> <code>tar</code>将显示其内置提示，并期望从控制台进行确认。有关默认提示的说明，请参见<a href="#change-volume-prompt">更改音量提示</a> 。
</p>
</dd></dl>

<dl>
<dt><u>备用变量：</u> <b>SLEEP_MESSAGE</b> <a name="IDX366"></a>
</dt>
<dd><p>等待转储时间时在终端上显示的消息。通常这只是一些文字文本。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>TAR</b> <a name="IDX367"></a>
</dt>
<dd><p><acronym>GNU的</acronym>完整文件名<code>tar</code>可执行文件。如果未设置，备份脚本将搜索<code>tar</code>在当前shell路径中。
</p></dd></dl>

<hr size="6">
<a name="Magnetic-Tape-Control"></a>
<a name="SEC100"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC99" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC101" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC98" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">5.4.2磁带控制</h3>

<p>备份脚本使用特殊的<em>挂钩功能</em>访问磁带设备。这些函数采用一个参数-磁带设备的名称。它们的名称保存在以下变量中：</p>
<dl>
<dt><u>备用变量：</u> <b>MT_BEGIN</b> <a name="IDX368"></a>
</dt>
<dd><p><em>开始</em>函数的名称。在访问驱动器之前，将调用此函数。默认情况下，它会拉紧磁带：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">MT_BEGIN=mt_begin

mt_begin() {
    mt -f &quot;$1&quot; retension
}
</pre></td></tr></tbody></table></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>MT_REWIND</b> <a name="IDX369"></a>
</dt>
<dd><p><em>倒带</em>功能的名称。默认定义如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">MT_REWIND=mt_rewind

mt_rewind() {
    mt -f &quot;$1&quot; rewind
}
</pre></td></tr></tbody></table>
</dd></dl>

<dl>
<dt><u>备用变量：</u> <b>MT_OFFLINE</b> <a name="IDX370"></a>
</dt>
<dd><p>离线切换磁带的功能名称。默认情况下，其定义如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">MT_OFFLINE=mt_offline

mt_offline() {
    mt -f &quot;$1&quot; offl
}
</pre></td></tr></tbody></table></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>MT_STATUS</b> <a name="IDX371"></a>
</dt>
<dd><p>用于获取存档设备状态的函数名称，包括错误计数。默认定义：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">MT_STATUS=mt_status

mt_status() {
    mt -f &quot;$1&quot; status
}
</pre></td></tr></tbody></table></dd></dl>

<hr size="6">
<a name="User-Hooks"></a>
<a name="SEC101"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC100" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC102" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC98" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">5.4.3用户挂钩</h3>

<p><em>用户挂钩</em>是每个之前和之后执行的shell函数<code>tar</code>调用。因此，有<em>备份钩子</em> ，它们在转储每个文件系统之前和之后执行，而<em>还原钩子是</em>在还原文件系统之前和之后执行的。每个用户挂钩都是具有四个参数的shell函数：</p>
<dl>
<dt><u>用户挂钩功能：</u> <b>挂钩</b> <i><var>level</var><var>host</var><var>fs</var><var>fsname</var></i> <a name="IDX372"></a>
</dt>
<dd><p>它的参数是：</p>
<dl compact>
<dt> <var>level</var></dt>
<dd><p>当前的备份或还原级别。
</p>
</dd>
<dt> <var>host</var></dt>
<dd><p>转储或还原的主机的名称或IP地址。
</p>
</dd>
<dt> <var>fs</var></dt>
<dd><p>正在转储或还原的文件系统的完整文件名。
</p>
</dd>
<dt> <var>fsname</var></dt>
<dd><p>使用目录分隔符的文件系统名称用冒号代替。这对于例如创建唯一文件很有用。
</p></dd>
</dl>
</dd></dl>

<p>以下变量保留用户挂钩函数的名称：</p>
<dl>
<dt><u>备用变量：</u> <b>DUMP_BEGIN</b> <a name="IDX373"></a>
</dt>
<dd><p>转储开始功能。在转储文件系统之前执行它。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>DUMP_END</b> <a name="IDX374"></a>
</dt>
<dd><p>转储文件系统后执行。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>RESTORE_BEGIN</b> <a name="IDX375"></a>
</dt>
<dd><p>在还原文件系统之前执行。
</p></dd></dl>

<dl>
<dt><u>备用变量：</u> <b>RESTORE_END</b> <a name="IDX376"></a>
</dt>
<dd><p>恢复文件系统后执行。
</p></dd></dl>

<hr size="6">
<a name="backup_002dspecs-example"></a>
<a name="SEC102"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC101" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC103" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC98" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">5.4.4 <tt>“备份规范”</tt>的示例文本 </h3>

<p>以下是<tt>`backup-specs'</tt>的示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># site-specific parameters for file system backup.

ADMINISTRATOR=friedman
BACKUP_HOUR=1
TAPE_FILE=/dev/nrsmt0

# Use <code>ssh</code> instead of the less secure <code>rsh</code>
RSH=/usr/bin/ssh
RSH_COMMAND=/usr/bin/ssh

# Override MT_STATUS function:
my_status() {
      mts -t $TAPE_FILE
}
MT_STATUS=my_status

# Disable MT_OFFLINE function
MT_OFFLINE=:

BLOCKING=124
BACKUP_DIRS=&quot;
        albert:/fs/fsf
        apple-gunkies:/gd
        albert:/fs/gd2
        albert:/fs/gp
        geech:/usr/jla
        churchy:/usr/roland
        albert:/
        albert:/usr
        apple-gunkies:/
        apple-gunkies:/usr
        gnu:/hack
        gnu:/u
        apple-gunkies:/com/mailer/gnu
        apple-gunkies:/com/archive/gnu&quot;

BACKUP_FILES=&quot;/com/mailer/aliases /com/mailer/league*[a-z]&quot;

</pre></td></tr></tbody></table>
<hr size="6">
<a name="Scripted-Backups"></a>
<a name="SEC103"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC102" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC104" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">5.5使用备份脚本</h2>

<p>运行备份脚本的语法是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">backup --level=<var>level</var> --time=<var>time</var>
</pre></td></tr></tbody></table>
<p>的<samp>`--level'</samp>选项请求转储级别。因此，要产生完整的转储，请指定<code>--level=0</code> （这是默认设置，因此<samp>`--level'</samp>如果其值为<code>0</code> ） <a name="DOCF14" href="#FOOT14">（14）</a> 。
</p>
<p>的<samp>`--time'</samp>选项确定何时应运行备份。 <var>Time</var>可以采取三种形式：</p>
<dl compact>
<dt> <var>hh</var> ：<var>mm</var></dt>
<dd>
<p>转储必须在以下位置运行<var>hh</var>小时<var>mm</var>分钟。
</p>
</dd>
<dt> <var>hh</var></dt>
<dd>
<p>转储必须在以下位置运行<var>hh</var>小时。
</p>
</dd>
<dt>现在</dt>
<dd>
<p>转储必须立即运行。
</p></dd>
</dl>

<p>您应该在安装了磁带或磁盘的情况下启动脚本。启动脚本后，它会提示您输入新的磁带或磁盘。媒体卷不必与存档文件相对应-可以在已经包含另一个多卷存档结尾的磁带中间启动多卷存档。的<code>restore</code>脚本会根据其存档卷提示输入介质，因此，为避免出现错误消息，您应跟踪哪个磁带（或磁盘）包含存档的哪个卷（请参阅“ <a href="#SEC104">使用还原脚本”</a>一节）。
</p>
<p>备份脚本在文件系统上写入两个文件。第一个是<tt>`/ etc / tar-backup /'中</tt>的记录文件，脚本使用它来存储和检索有关转储了哪些文件的信息。此文件不是供人类阅读的，也不应该被人类删除。有关此文件的详细说明，请参见<a href="#SEC194">“增量快照文件的格式”</a>部分。
</p>
<p>第二个文件是一个日志文件，其中包含文件系统和转储文件的名称，进行备份的时间，生成的任何错误消息，以及最后一个卷之后在介质卷中剩余的空间。档案被写了。每次备份后，您都应检查此日志文件。文件名是<tt>`log- <var>mm-dd-yyyy</var> -水平- <var>n</var> '</tt> ，在哪里<var>mm-dd-yyyy</var>代表当前日期，并且<var>n</var>代表当前的转储级别号。
</p>
<p>该脚本还将打印每个转储到标准输出的系统的名称。
</p>
<p>以下是被接受的选项的完整列表<code>backup</code>脚本：</p>
<dl compact>
<dt> <samp>`-l <var>level</var>'</samp></dt>
<dt> <samp>`--level=<var>level</var>'</samp></dt>
<dd><p>做备份级别<var>level</var> （默认为0）。
</p>
</dd>
<dt> <samp>`-f'</samp></dt>
<dt> <samp>`--force'</samp></dt>
<dd><p>即使今天的日志文件已经存在，也要强制备份。
</p>
</dd>
<dt> <samp>`-v[<var>level</var>]'</samp></dt>
<dt> <samp>`--verbose[=<var>level</var>]'</samp></dt>
<dd><p>设置详细程度。级别越高，执行期间将输出更多的调试信息。默认<var>level</var>是100，表示最高的调试级别。
</p>
</dd>
<dt> <samp>`-t <var>start-time</var>'</samp></dt>
<dt> <samp>`--time=<var>start-time</var>'</samp></dt>
<dd><p>等到<var>time</var> ，然后做备份。
</p>
</dd>
<dt> <samp>`-h'</samp></dt>
<dt> <samp>`--help'</samp></dt>
<dd><p>显示简短帮助消息并退出。
</p>
</dd>
<dt> <samp>`-V'</samp></dt>
<dt> <samp>`--version'</samp></dt>
<dd><p>在标准输出上显示有关程序名称，版本，来源和合法状态的信息，然后成功退出。
</p></dd>
</dl>


<hr size="6">
<a name="Scripted-Restoration"></a>
<a name="SEC104"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC103" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC94" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">5.6使用还原脚本</h2>

<p>要还原使用脚本备份存档的文件，请使用<code>restore</code>脚本。它的用法非常简单。以最简单的形式调用<code>restore --all</code> ，它将恢复<tt>“ backup-specs”中</tt>指定的所有文件系统和文件（请参阅<a href="#SEC99">BACKUP_DIRS</a>部分）。
</p>
<p>您可以选择要还原的文件系统（和/或文件） <code>restore</code>命令行中的<em>模式</em>列表。例如，跑步</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">restore 'albert:*'
</pre></td></tr></tbody></table>

<p>将还原计算机上的所有文件系统<samp>`albert'</samp> 。一个更复杂的示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">restore 'albert:*' '*:/var'
</pre></td></tr></tbody></table>

<p>此命令将还原计算机上的所有文件系统<samp>`albert'</samp>以及所有机器上的<tt>`/ var'</tt>文件系统。
</p>
<p>默认<code>restore</code>将从最低可用转储级别（通常为零）开始恢复文件，并将在所有可用转储级别继续。在某些情况下，不需要进行如此彻底的还原。例如，您可能希望仅从最近的一级备份中还原文件。为此，请使用<samp>`--level'</samp>选项，如下例所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">restore --level=1
</pre></td></tr></tbody></table>
<p>接受的选项的完整列表<code>restore</code>如下：</p>
<dl compact>
<dt> <samp>`-a'</samp></dt>
<dt> <samp>`--all'</samp></dt>
<dd><p>恢复所有在<tt>`backup-specs'中</tt>指定的文件系统和文件。
</p>
</dd>
<dt> <samp>`-l <var>level</var>'</samp></dt>
<dt> <samp>`--level=<var>level</var>'</samp></dt>
<dd><p>从给定的备份级别（而不是默认值0）开始恢复。
</p>
</dd>
<dt> <samp>`-v[<var>level</var>]'</samp></dt>
<dt> <samp>`--verbose[=<var>level</var>]'</samp></dt>
<dd><p>设置详细程度。级别越高，执行期间将输出更多的调试信息。默认<var>level</var>是100，表示最高的调试级别。
</p>
</dd>
<dt> <samp>`-h'</samp></dt>
<dt> <samp>`--help'</samp></dt>
<dd><p>显示简短帮助消息并退出。
</p>
</dd>
<dt> <samp>`-V'</samp></dt>
<dt> <samp>`--version'</samp></dt>
<dd><p>在标准输出上显示有关程序名称，版本，来源和合法状态的信息，然后成功退出。
</p></dd>
</dl>

<p>您应该使用包含已装入的存档的第一卷的介质启动还原脚本。该脚本将提示需要其他卷。如果归档文件位于磁带上，则无需将磁带倒带到其开头-如果磁带头位于归档文件的开头之后，脚本将根据需要倒带。有关<a href="#SEC162">磁带位置</a>的讨论，请参见“ <a href="#SEC162">磁带位置和磁带标记”</a>部分。
</p>
<blockquote><p><strong>警告：</strong>如果在创建归档文件时脚本没有将其从活动文件系统中删除，则脚本将从该文件系统中删除这些文件。
</p></blockquote>

<p>请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code> “执行增量转储”</a> ，以解释脚本如何确定。
</p>
<hr size="6">
<a name="Choosing"></a>
<a name="SEC105"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC104" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC106" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC94" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">6。选择文件和名称<code>tar</code> </h1>

<p>某些选项<code>tar</code>使您可以为存档指定名称。其他选项使您可以根据何时或是否修改了文件，文件名是否匹配指定的模式或文件是否在指定目录中来决定要从存档中包括或排除哪些文件。
</p>
<p>本章将详细讨论这些选项。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td><td>  </td><td align="left" valign="top">选择档案的名称</td></tr>
<tr><td align="left" valign="top"><a href="#SEC107">6.2选择存档成员</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC108">6.3从文件读取名称</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC110">6.4排除某些文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC112">6.5通配符模式和匹配</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC114">6.6引用会员名称</a></td><td>  </td><td align="left" valign="top">名称中特殊字符的引用方式</td></tr>
<tr><td align="left" valign="top"><a href="#SEC115">6.7修改文件和成员名称</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC117">6.9下降到目录</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC118">6.10跨越文件系统边界</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="file"></a>
<a name="SEC106"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC105" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC107" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.1选择和命名存档文件</h2>

<p>默认， <code>tar</code>使用在系统上构建时已编译的存档文件名；通常，此名称是指计算机上的某些物理磁带机。但是，安装的人<code>tar</code>就大多数用户而言，系统上的默认值可能未设置为有意义的值。结果，您通常会想告诉<code>tar</code>在哪里找到（或创建）档案。的<samp>`--file=<var>archive-name</var>'</samp> （ <samp>`-f <var>archive-name</var>'</samp> ）选项可让您指定或命名要用作存档的文件，而不是默认的存档文件位置。
</p>
<dl compact>
<dd><a name="IDX377"></a>
</dd>
<dt> <samp>`--file=<var>archive-name</var>'</samp></dt>
<dt> <samp>`-f <var>archive-name</var>'</samp></dt>
<dd><p>命名要创建或操作的档案。与任何操作结合使用。
</p></dd>
</dl>

<p>例如在这个<code>tar</code>命令，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cvf collection.tar blues folk jazz</kbd>
</pre></td></tr></tbody></table>

<p><tt>“ collection.tar”</tt>是档案的名称。它必须直接跟随<samp>`-f'</samp>选项，因为任何紧随其后的<samp>`-f'</samp>最终<em>将</em>命名存档。如果您忽略指定档案名称，最终可能会使用您创建的档案覆盖工作目录中的文件，因为<code>tar</code>将使用此文件的名称作为存档名称。
</p>
<p>归档文件可以另存为文件系统中的文件，可以通过管道或网络发送，也可以写入I / O设备（例如磁带，软盘或CD写入驱动器）。
</p>
<a name="IDX378"></a>
<a name="IDX379"></a>
<p>如果您未命名存档， <code>tar</code>使用环境变量的值<code>TAPE</code>作为存档的文件名。如果那不可用， <code>tar</code>使用默认的，已编译的存档名称，通常是磁带机零（即<tt>“ / dev / tu00”</tt> ）。
</p>
<a name="IDX380"></a>
<a name="IDX381"></a>
<p>如果您将<tt>`-'</tt>用作<var>archive-name</var> ， <code>tar</code>从标准输入中读取档案（列出或提取文件时），或将其写入标准输出中（创建档案时）。如果您将<tt>`-'</tt>用作<var>archive-name</var>修改档案时， <code>tar</code>从其标准输入读取原始存档，然后将整个新存档写入其标准输出。
</p>
<p>以下示例是将目录层次结构从<tt>“ sourcedir”</tt>复制到<tt>“ targetdir”</tt>的便捷方法。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>(cd sourcedir; tar -cf - .) | (cd targetdir; tar -xpf -)</kbd>
</pre></td></tr></tbody></table>
<p>的<samp>`-C'</samp>选项可以避免使用子壳：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -C sourcedir -cf - . | tar -C targetdir -xpf -</kbd>
</pre></td></tr></tbody></table>
<p>在以上两个示例中，最左侧<code>tar</code>调用将<tt>`sourcedir'</tt>的内容归档到标准输出，而最右边的一个从其标准输入中读取该归档并将其提取。的<samp>`-p'</samp>选项告诉它恢复提取文件的权限。
</p>
<a name="IDX382"></a>
<a name="IDX383"></a>
<p><a name="remote_002ddev"></a>要在连接到远程计算机的设备上指定存档文件，请使用以下命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>--file=<var>hostname</var>:/<var>dev</var>/<var>file-name</var></kbd>
</pre></td></tr></tbody></table>

<p><code>tar</code>将在可能的情况下建立远程连接，并提示您输入用户名和密码。如果您使用<samp>`--file=@<var>hostname</var>:/<var>dev</var>/<var>file-name</var>'</samp> ， <code>tar</code>会尝试使用您的用户名作为远程计算机上的用户名来建立远程连接。
</p>
<a name="IDX384"></a>
<p><a name="local-and-remote-archives"></a>如果存档文件名包含冒号（ <samp>`:'</samp> ），则假定它是另一台计算机上的文件。如果存档文件是<samp>`<var>user</var>@<var>host</var>:<var>file</var>'</samp> ， 然后<var>file</var>在主机上使用<var>host</var> 。使用以下命令访问远程主机<code>rsh</code>程序，用户名是<var>user</var> 。如果省略了用户名（以及<samp>`@'</samp>符号），则将使用您的用户名。（这是正常现象<code>rsh</code>行为。）对于远程机器，除了允许您的<code>rsh</code>访问，以安装<tt>“ rmt”</tt>程序（此命令包含在<acronym>GNU中</acronym> <code>tar</code>发行版，默认情况下安装在<tt>` <var>prefix</var> / libexec / rmt'</tt> ，其中<var>prefix</var>表示您的安装前缀）。如果需要使用名称包含冒号的文件，则可以通过使用<samp>`--force-local'</samp>选项。
</p>
<p>当归档文件被创建为<tt>`/ dev / null'时</tt> ， <acronym>GNU</acronym> <code>tar</code>尝试最小化输入和输出操作。与<acronym>GNU一起</acronym>使用时，Amanda备份系统<code>tar</code> ，具有使用此功能的初始调整尺寸。
</p>
<hr size="6">
<a name="Selecting-Archive-Members"></a>
<a name="SEC107"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC106" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC108" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.2选择存档成员</h2>

<p><em>文件名参数</em>指定文件系统中的哪些文件<code>tar</code>在创建或添加到归档文件或归档文件成员时对其进行操作<code>tar</code>从档案中读取或删除档案时，将对其进行操作。参见<a href="#SEC59">“五种高级课程” <code>tar</code>运作</a> 。
</p>
<p>要指定文件名，可以将它们作为命令行中的最后一个参数包括在内，如下所示：</p><table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tar</kbd> <var>operation</var> [<var>option1</var> <var>option2</var> &hellip;] [<var>file name-1</var> <var>file name-2</var> &hellip;]
</pre></td></tr></tbody></table>
<p>如果文件名以破折号（ <samp>`-'</samp> ），在此之前<samp>`--add-file'</samp>选项以防止将其视为选项。
</p>
<p><a name="input-name-quoting"></a>默认情况下， <acronym>GNU</acronym> <code>tar</code>尝试取消对每个文件或成员名称的<em>引用</em> ，并根据下表替换<em>转义序列</em> ：</p>
<table>
<thead><tr><th><p>逃逸</p></th><th><p>替换为</p></th></tr></thead>
<tbody><tr><td><p>\一种</p></td><td><p>声音铃（ <acronym>ASCII</acronym> 7）</p></td></tr>
<tr><td><p>\ b</p></td><td><p>退格键（ <acronym>ASCII</acronym> 8）</p></td></tr>
<tr><td><p>\F</p></td><td><p>换页（ <acronym>ASCII</acronym> 12）</p></td></tr>
<tr><td><p>\ n</p></td><td><p>换行（ <acronym>ASCII</acronym> 10）</p></td></tr>
<tr><td><p>\ r</p></td><td><p>回车（ <acronym>ASCII</acronym> 13）</p></td></tr>
<tr><td><p>\ t</p></td><td><p>水平制表（ <acronym>ASCII</acronym> 9）</p></td></tr>
<tr><td><p>\ v</p></td><td><p>垂直制表（ <acronym>ASCII</acronym> 11）</p></td></tr>
<tr><td><p>\？</p></td><td><p> <acronym>ASCII</acronym> 127</p></td></tr>
<tr><td><p>\ <var>n</var>   </p></td><td><p> <acronym>ASCII码</acronym> <var>n</var> （ <var>n</var>应该是最多3位的八进制数）</p></td></tr>
</tbody></table>

<p>保留反斜杠，后跟任何其他符号。
</p>
<p>此默认行为由以下命令行选项控制：</p>
<dl compact>
<dd><a name="IDX385"></a>
</dd>
<dt> <samp>`--unquote'</samp></dt>
<dd><p>启用取消引用输入文件或成员名称（默认）。
</p>
<a name="IDX386"></a>
</dd>
<dt> <samp>`--no-unquote'</samp></dt>
<dd><p>禁用取消引用输入文件或成员名称。
</p></dd>
</dl>

<p>如果将目录名指定为文件名参数，则该目录中的所有文件都将由<code>tar</code> 。
</p>
<p>如果您不指定文件， <code>tar</code>行为因操作模式而异，如下所述：</p>
<p>什么时候<code>tar</code>被调用<samp>`--create'</samp> （ <samp>`-c'</samp> ）， <code>tar</code>将立即停止，并报告以下内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar cf a.tar</kbd>
tar: Cowardly refusing to create an empty archive
Try 'tar --help' or 'tar --usage' for more information.
</pre></td></tr></tbody></table>
<p>如果您指定<samp>`--list'</samp> （ <samp>`-t'</samp> ） 要么<samp>`--extract'</samp> （ <samp>`--get'</samp> ， <samp>`-x'</samp> ）， <code>tar</code>对存档中的所有存档成员进行操作。
</p>
<p>如果与<samp>`--diff'</samp>选项，tar会将存档与当前工作目录的内容进行比较。
</p>
<p>如果您指定其他任何操作， <code>tar</code>什么也没做。
</p>
<p>默认， <code>tar</code>从命令行获取文件名。但是，还有其他方法可以指定文件或成员名称，或修改<code>tar</code>选择要对其进行操作的文件或成员。通常，这些方法都可以用于指定文件名和存档成员。
</p>
<hr size="6">
<a name="files"></a>
<a name="SEC108"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC107" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC109" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.3从文件读取名称</h2>

<p>可以在命令行中输入名称或文件名，而不用在命令行中提供文件名或存档成员名，然后使用<samp>`--files-from=<var>file-of-names</var>'</samp> （ <samp>`-T <var>file-of-names</var>'</samp> ）选项<code>tar</code> 。给出文件名，该文件名包含要包含的文件列表作为参数<samp>`--files-from'</samp> 。在列表中，文件名应用换行符分隔。当您生成要使用以下命令存档的文件列表时，通常会使用此选项： <code>find</code>效用。
</p>
<dl compact>
<dd><a name="IDX387"></a>
</dd>
<dt> <samp>`--files-from=<var>file-name</var>'</samp></dt>
<dt> <samp>`-T <var>file-name</var>'</samp></dt>
<dd><p>获取要从文件中提取或创建的名称<var>file-name</var> 。
</p></dd>
</dl>

<p>如果您给单破折号作为文件名<samp>`--files-from'</samp> ，（即，您可以指定<code>--files-from=-</code>要么<code>-T -</code> ），然后从标准输入中读取文件名。
</p>
<p>除非你在跑步<code>tar</code>与<samp>`--create'</samp> ，您不能同时使用<code>--files-from=-</code>和<code>--file=-</code> （ <code>-f -</code> ）在同一命令中。
</p>
<p>任意数量<samp>`-T'</samp>选项可以在命令行中给出。
</p>
<p>以下示例显示了如何使用<code>find</code>生成长度小于400K的文件列表，并将该列表放入名为<tt>“ small-files”的文件中</tt> 。然后，您可以使用<samp>`-T'</samp>选择<code>tar</code>从文件<tt>“ small-files”中</tt>指定文件，以创建档案<tt>“ little.tgz”</tt> 。（ <samp>`-z'</samp>选择<code>tar</code>用压缩文件<code>gzip</code> ;有关更多信息，请参见<a href="#SEC135">创建和读取压缩档案</a>部分。）
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>find . -size -400 -print &gt; small-files</kbd>
$ <kbd>tar -c -v -z -T small-files -f little.tgz</kbd>
</pre></td></tr></tbody></table>

<p>默认情况下，将从文件列表中读取的每一行都首先去除所有前导和尾随空格。如果结果字符串以<samp>`-'</samp>字符，它被认为是<code>tar</code>选项，并进行相应处理<a name="DOCF15" href="#FOOT15">（15）</a> 。例如，此功能的常用用法是通过指定<samp>`-C'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cat list</kbd>
-C/etc
passwd
hosts
-C/lib
libc.a
$ <kbd>tar -c -f foo.tar --files-from list</kbd>
</pre></td></tr></tbody></table>

<p>在这个例子中<code>tar</code>首先将切换到<tt>“ / etc”</tt>目录，并将<tt>“ passwd”</tt>和<tt>“ hosts”</tt>文件添加到存档中。然后它将转到<tt>`/ lib'</tt>目录，并将文件<tt>`libc.a'</tt>存档。因此，生成的归档文件<tt>foo.tar</tt>将包含：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf foo.tar</kbd>
passwd
hosts
libc.a
</pre></td></tr></tbody></table>
<p>请注意，文件列表中使用的所有选项在其余命令行中仍然有效。例如，使用与上述相同的<tt>“列表”</tt>文件，以下命令</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f foo.tar --files-from list libcurses.a</kbd>
</pre></td></tr></tbody></table>

<p>将在目录<tt>“ / lib”中</tt>查找文件<tt>“ libcurses.a”</tt> ，因为它与最后一个文件一起使用<samp>`-C'</samp>选项（请参阅<a href="#SEC44">位置敏感选项部分</a> ）。
</p>
<p><a name="verbatim_002dfiles_002dfrom"></a><a name="IDX388"></a>如果不希望使用此类选项，请使用<samp>`--verbatim-files-from'</samp>选项。启用此选项后，将从文件列表中读取的每一行都视为文件名。请注意，这尤其意味着没有执行空白修剪。
</p>
<p><a name="no_002dverbatim_002dfiles_002dfrom"></a><a name="IDX389"></a>的<samp>`--verbatim-files-from'</samp>影响所有<samp>`-T'</samp>在命令行中跟随它的选项。可以使用以下方法恢复默认行为<samp>`--no-verbatim-files-from'</samp>选项。
</p>
<a name="IDX390"></a>
<p>要禁用单个文件名的选项处理，请使用<samp>`--add-file'</samp>选项，例如： <code>--add-file=--my-file</code> 。
</p>
<p>您可以使用任何<acronym>GNU</acronym> <code>tar</code>文件列表文件中的命令行选项，包括<samp>`--files-from'</samp>选项本身。这允许将文件列表的内容包含到另一个文件列表文件中。但是请注意，控制文件列表处理的选项，例如<samp>`--verbatim-files-from'</samp>要么<samp>`--null'</samp>不会影响它们出现在其中的文件。他们会影响下一个<samp>`--files-from'</samp>选项（如果有）。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="nul"></a>
<a name="SEC109"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC108" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC110" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC108" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">6.3.1 <code>NUL</code>终止的文件名</h3>

<p>的<samp>`--null'</samp>选择原因<samp>`--files-from=<var>file-of-names</var>'</samp> （ <samp>`-T <var>file-of-names</var>'</samp> ）读取以。结尾的文件名<code>NUL</code>而不是换行符，因此名称包含换行符的文件可以使用<samp>`--files-from'</samp> 。
</p>
<dl compact>
<dd><a name="IDX391"></a>
</dd>
<dt> <samp>`--null'</samp></dt>
<dd><p>只考虑<code>NUL</code>终止的文件名，而不是以换行符结尾的文件。
</p>
<a name="IDX392"></a>
</dd>
<dt> <samp>`--no-null'</samp></dt>
<dd><p>撤消任何先前的影响<samp>`--null'</samp>选项。
</p></dd>
</dl>

<p>的<samp>`--null'</samp>选项就像<acronym>GNU中的</acronym>那个<code>xargs</code>和<code>cpio</code> ，并且对于<samp>`-print0'</samp> <acronym>GNU的</acronym>谓词<code>find</code> 。在<code>tar</code> ， <samp>`--null'</samp>还会对以破折号开头的文件名禁用特殊处理（类似于<samp>`--verbatim-files-from'</samp>选项）。
</p>
<p>这个例子展示了如何使用<code>find</code>生成长度大于800K的文件列表，并将该列表放入名为<tt>“ long-files”的文件中</tt> 。的<samp>`-print0'</samp>选择<code>find</code>就像<samp>`-print'</samp> ，不同之处在于它使用<code>NUL</code>而不是换行符。然后可以运行<code>tar</code>与两个<samp>`--null'</samp>和<samp>`-T'</samp>用于指定的选项<code>tar</code>从该文件<tt>“ long-files”中</tt>获取文件，以创建档案<tt>“ big.tgz”</tt> 。的<samp>`--null'</samp>选择<code>tar</code>会引发<code>tar</code>认识到<code>NUL</code>文件之间的分隔符。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>find . -size +800 -print0 &gt; long-files</kbd>
$ <kbd>tar -c -v --null --files-from=long-files --file=big.tar</kbd>
</pre></td></tr></tbody></table>
<p>的<samp>`--no-null'</samp>如果您需要同时阅读两者，则可以使用该选项<code>NUL</code>终止和换行终止的文件在同一命令行上。例如，如果<tt>“ flist”</tt>是换行符终止的文件，则可以使用以下命令将其与上述命令结合使用：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>find . -size +800 -print0 |
  tar -c -f big.tar --null -T - --no-null -T flist</kbd>
</pre></td></tr></tbody></table>
<p>由于印刷原因，本示例使用短选项，以避免行很长。
</p>
<p><acronym>GNU</acronym> <code>tar</code>列表，因此在许多情况下，即使没有<samp>`--null'</samp>选项。在这种情况下<code>tar</code>将打印警告并继续读取该文件，就像<samp>`--null'</samp>实际给出了：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>find . -size +800 -print0 | tar -c -f big.tar -T -</kbd>
tar: -: file name read contains nul character
</pre></td></tr></tbody></table>
<p>但是，空终止符仅对该特定文件有效，以下任何<samp>`-T'</samp>选项将假定换行符终止。当然，空自动检测适用于这些最终盈余<samp>`-T'</samp>选项。
</p>
<hr size="6">
<a name="exclude"></a>
<a name="SEC110"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC109" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC111" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.4排除某些文件</h2>

<p>为避免对名称与特定模式匹配的文件进行操作，请使用<samp>`--exclude'</samp>要么<samp>`--exclude-from'</samp>选项。
</p>
<dl compact>
<dd><a name="IDX393"></a>
</dd>
<dt> <samp>`--exclude=<var>pattern</var>'</samp></dt>
<dd><p>原因<code>tar</code>忽略与<var>pattern</var> 。
</p></dd>
</dl>

<a name="IDX394"></a>
<p>的<samp>`--exclude=<var>pattern</var>'</samp>选项可防止名称与外壳通配符（ <var>pattern</var> ）。例如，要创建一个包含目录<tt>“ src”的</tt>所有内容的归档文件，文件名以<tt>“ .o”</tt>结尾的文件除外，请使用以下命令<samp>`tar -cf src.tar --exclude='*.o' src'</samp> 。
</p>
<p>您可以给多个<samp>`--exclude'</samp>选项。
</p>
<dl compact>
<dd><a name="IDX395"></a>
</dd>
<dt> <samp>`--exclude-from=<var>file</var>'</samp></dt>
<dt> <samp>`-X <var>file</var>'</samp></dt>
<dd><p>原因<code>tar</code>忽略与下列模式匹配的文件<var>file</var> 。
</p></dd>
</dl>

<a name="IDX396"></a>
<p>使用<samp>`--exclude-from'</samp>选择从中读取模式列表，每行一个<var>file</var> ; <code>tar</code>将忽略与这些模式匹配的文件。因此，如果<code>tar</code>被称为<samp>`tar -c -X foo .'</samp>并且文件<tt>“ foo”仅</tt>包含一行<tt>“ * .o”</tt> ，不会将名称以<tt>“ .o”</tt>结尾的文件添加到存档中。
</p>
<p>注意，从<var>file</var>逐字阅读。常见错误之一是在文件名后留下一些额外的空格，这很难使用文本编辑器来捕获。
</p>
<p>但是，空行是可以的。</p>
<a name="IDX397"></a>
<a name="IDX398"></a>
<a name="IDX399"></a>
<a name="IDX400"></a>
<a name="IDX401"></a>
<a name="IDX402"></a>
<p>当归档某个版本控制系统（VCS）下的目录时，从该VCS忽略文件（例如<tt>.cvsignore</tt> ， <tt>.gitignore</tt>等）中读取排除模式通常很方便。以下选项提供了这种可能性：</p>
<dl compact>
<dd><p><a name="exclude_002dvcs_002dignores"></a>
<a name="IDX403"></a>
</p></dd>
<dt> <samp>`--exclude-vcs-ignores'</samp></dt>
<dd><p>归档目录前，看它是否包含任何下列文件<tt><tt>：`CVSIGNORE“`</tt>的<tt>.gitignore”，`.bzrignore“</tt></tt>或<tt>'.hgignore”。</tt>如果是这样，请从这些文件中读取忽略模式。
</p>
<p>这些模式的处理方式与相应的VCS对待方式相同，即：</p>
<dl compact>
<dd><a name="IDX404"></a>
</dd>
<dt> <tt>`.cvsignore'</tt></dt>
<dd><p>包含仅适用于此文件所在目录的外壳样式的滚动模式。文件中不允许有注释。空行将被忽略。
</p>
<a name="IDX405"></a>
</dd>
<dt> <tt>`.gitignore'</tt></dt>
<dd><p>包含壳样式的globbing模式。适用于<tt>`.gitfile'</tt>所在的目录及其所有子目录。
</p>
<p>以a开头的任何行<samp>`#'</samp>是一条评论。反斜杠转义注释字符。
</p>
<a name="IDX406"></a>
</dd>
<dt> <tt>`.bzrignore'</tt></dt>
<dd><p>包含shell globbing-patterns和正则表达式（如果前缀为<samp>`RE:'</samp> <a name="DOCF16" href="#FOOT16">（16）</a> 。模式会影响目录及其所有子目录。
</p>
<p>以a开头的任何行<samp>`#'</samp>是一条评论。
</p>
<a name="IDX407"></a>
</dd>
<dt> <tt>`.hgignore'</tt></dt>
<dd><p>包含posix正则表达式<a name="DOCF17" href="#FOOT17">（17）</a> 。线<samp>`syntax: glob'</samp>切换到外壳浮动模式。线<samp>`syntax: regexp'</samp>切换回去。注释以a开头<samp>`#'</samp> 。模式会影响目录及其所有子目录。
</p></dd>
</dl>

<a name="IDX408"></a>
</dd>
<dt> <samp>`--exclude-ignore=<var>file</var>'</samp></dt>
<dd><p>转储目录之前， <code>tar</code>检查是否包含<var>file</var> 。如果是这样，则从该文件读取排除模式。模式仅影响目录本身。
</p>
<a name="IDX409"></a>
</dd>
<dt> <samp>`--exclude-ignore-recursive=<var>file</var>'</samp></dt>
<dd><p>和...一样<samp>`--exclude-ignore'</samp> ，除了读取的模式会影响目录<var>file</var>驻留及其所有子目录。
</p></dd>
</dl>

<dl compact>
<dd><a name="IDX410"></a>
<a name="IDX411"></a>
<a name="IDX412"></a>
<a name="IDX413"></a>
<a name="IDX414"></a>
<a name="IDX415"></a>
<a name="IDX416"></a>
<a name="IDX417"></a>
<a name="IDX418"></a>
<a name="IDX419"></a>
<a name="IDX420"></a>
<p><a name="exclude_002dvcs"></a>
<a name="IDX421"></a>
</p></dd>
<dt> <samp>`--exclude-vcs'</samp></dt>
<dd><p>排除以下版本控制系统使用的文件和目录： <samp>`CVS'</samp> ， <samp>`RCS'</samp> ， <samp>`SCCS'</samp> ， <samp>`SVN'</samp> ， <samp>`Arch'</samp> ， <samp>`Bazaar'</samp> ， <samp>`Mercurial'</samp>和<samp>`Darcs'</samp> 。
</p>
<p>从1.32版开始，不包括以下文件：</p>
<ul>
<li> <tt>`CVS /'</tt>及其下的所有内容</li><li> <tt>`RCS /'</tt>及其下的所有内容</li><li> <tt>SCCS /</tt> ，及其下的所有内容</li><li> <tt>`.git /'</tt>及其下的所有内容</li><li> <tt>`.gitignore'</tt>
</li><li> <tt>`.gitmodules'</tt>
</li><li> <tt>`.gitattributes'</tt>
</li><li> <tt>`.cvsignore'</tt>
</li><li> <tt>`.svn /'</tt>及其下的所有内容</li><li> <tt>`.arch-ids /'</tt>及其下的所有内容</li><li> <tt>`{arch} /'</tt>及其下的所有内容</li><li> <tt>`= RELEASE-ID'</tt>
</li><li> <tt>`=元更新'</tt>
</li><li> <tt>`=更新'</tt>
</li><li> <tt>`.bzr'</tt>
</li><li> <tt>`.bzrignore'</tt>
</li><li> <tt>`.bzrtags'</tt>
</li><li> <tt>`.hg'</tt>
</li><li> <tt>`.hgignore'</tt>
</li><li> <tt>`.hgrags'</tt>
</li><li> <tt>`_darcs'</tt>
</li></ul>

<a name="IDX422"></a>
</dd>
<dt> <samp>`--exclude-backups'</samp></dt>
<dd><p>排除备份和锁定文件。此选项将导致排除与以下外壳程序globe模式匹配的文件：</p>
<dl compact>
<dt>。＃*</dt>
<dt>*〜</dt>
<dt>＃*＃</dt>
</dl>

</dd>
</dl>

<a name="IDX423"></a>
<p>创建档案时， <samp>`--exclude-caches'</samp>选择家庭原因<code>tar</code>排除所有包含<em>缓存目录标记的目录</em> 。缓存目录标签是一个简短文件，具有众所周知的名称<tt>“ CACHEDIR.TAG”，</tt>并具有在<a href="http://www.brynosaurus.com/cachedir/spec.html">http://www.brynosaurus.com/cachedir/spec.html中</a>指定的标准头。各种应用程序将缓存目录标签写入它们用于保存可再生非贵重数据的目录中，以便可以更轻松地从备份中排除此类数据。
</p>
<p>有三种<samp>`exclude-caches'</samp>选项，每个选项提供不同的排除语义：</p>
<dl compact>
<dd><a name="IDX424"></a>
</dd>
<dt> <samp>`--exclude-caches'</samp></dt>
<dd><p>不要存档目录的内容，而是存档目录本身和<tt>“ CACHEDIR.TAG”</tt>文件。
</p>
<a name="IDX425"></a>
</dd>
<dt> <samp>`--exclude-caches-under'</samp></dt>
<dd><p>不要归档目录的内容，也不要归档<tt>“ CACHEDIR.TAG”</tt>文件，而只归档目录本身。
</p>
<a name="IDX426"></a>
</dd>
<dt> <samp>`--exclude-caches-all'</samp></dt>
<dd><p>完全省略包含<tt>“ CACHEDIR.TAG”</tt>文件的目录。
</p></dd>
</dl>

<a name="IDX427"></a>
<p>另一个选择家族<samp>`--exclude-tag'</samp>对此概念进行了概括。它只需要一个参数，即要查找的文件名。包含此文件的任何目录都将从转储中排除。类似于<samp>`exclude-caches'</samp> ，此选项系列中包含三个选项：</p>
<dl compact>
<dd><a name="IDX428"></a>
</dd>
<dt> <samp>`--exclude-tag=<var>file</var>'</samp></dt>
<dd><p>不要转储目录的内容，而是转储目录本身和<var>file</var> 。
</p>
<a name="IDX429"></a>
</dd>
<dt> <samp>`--exclude-tag-under=<var>file</var>'</samp></dt>
<dd><p>不要转储目录的内容，也不要转储<var>file</var> ，仅归档目录本身。
</p>
<a name="IDX430"></a>
</dd>
<dt> <samp>`--exclude-tag-all=<var>file</var>'</samp></dt>
<dd><p>省略包含<var>file</var>完全归档。
</p></dd>
</dl>

<p>多<samp>`--exclude-tag*'</samp>可以给出选项。
</p>
<p>例如，给定此目录：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>find dir</kbd>
dir
dir/blues
dir/jazz
dir/folk
dir/folk/tagfile
dir/folk/sanjuan
dir/folk/trote
</pre></td></tr></tbody></table>
<p>的<samp>`--exclude-tag'</samp>将产生以下内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf archive.tar --exclude-tag=tagfile -v dir</kbd>
dir/
dir/blues
dir/jazz
dir/folk/
tar: dir/folk/: contains a cache directory tag tagfile;
  contents not dumped
dir/folk/tagfile
</pre></td></tr></tbody></table>
<p><tt>dir / folk</tt>目录及其标记文件都保留在归档文件中，但是该目录中的其余文件则没有。
</p>
<p>现在，使用<samp>`--exclude-tag-under'</samp>选项将从转储中排除<tt>“ tagfile”</tt> ，同时仍保留目录本身，如以下示例所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf archive.tar --exclude-tag-under=tagfile -v dir</kbd>
dir/
dir/blues
dir/jazz
dir/folk/
./tar: dir/folk/: contains a cache directory tag tagfile;
  contents not dumped
</pre></td></tr></tbody></table>
<p>最后，使用<samp>`--exclude-tag-all'</samp>完全省略<tt>“ dir / folk”</tt>目录：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf archive.tar --exclude-tag-all=tagfile -v dir</kbd>
dir/
dir/blues
dir/jazz
./tar: dir/folk/: contains a cache directory tag tagfile;
  directory not dumped
</pre></td></tr></tbody></table>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC111">使用问题<code>exclude</code>选件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="problems-with-exclude"></a>
<a name="SEC111"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC110" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC112" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC110" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="unnumberedsubsec">使用问题<code>exclude</code>选件</h3>

<p>一些用户发现<samp>`exclude'</samp>选项令人困惑。以下是一些常见的陷阱：</p>
<ul>
<li>主要工作方式<code>tar</code>如果排除了文件名组成部分之一，则不会对命令行上明确列出的文件名起作用。在上面的示例中，如果您创建一个归档文件并排除以。结尾的文件<samp>`*.o'</samp> ，但明确命名文件<samp>`dir.o/foo'</samp>列出所有选项后， <samp>`dir.o/foo'</samp>将从存档中排除。

</li><li>您有时可能会混淆<samp>`--exclude'</samp>和<samp>`--exclude-from'</samp> 。注意：使用<samp>`--exclude'</samp>在命令行上将要排除的文件作为模式给出时。使用<samp>`--exclude-from'</samp>介绍一个包含模式列表的文件名，每行一个；这些模式中的每一个都可以排除零个，一个或多个文件。

</li><li>使用时<samp>`--exclude=<var>pattern</var>'</samp> ，请务必引用<var>pattern</var>参数，所以<acronym>GNU</acronym> <code>tar</code>看到通配符，例如<samp>`*'</samp> 。如果不这样做，则外壳可能会展开<samp>`*'</samp>本身使用手头的文件，所以<code>tar</code>可能会收到文件列表，而不是一个文件模式，或者根本不接收任何文件，从而使该命令有些非法。这可能与您想要的不符。

<p>例如，写：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f <var>archive.tar</var> --exclude '*.o' <var>directory</var></kbd>
</pre></td></tr></tbody></table>

<p>而不是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># <em>Wrong!</em>
$ <kbd>tar -c -f <var>archive.tar</var> --exclude *.o <var>directory</var></kbd>
</pre></td></tr></tbody></table>
</li><li>您必须使用use shell语法或通配符，而不是<code>regexp</code>语法，当在<code>tar</code> 。如果您尝试使用<code>regexp</code>语法来描述要排除的文件，您的命令可能会失败。

</li><li>请参阅<cite>语义更改必须在1.11之前发生，因此我怀疑是否值得一提。无论如何，至少应指定语义在哪个版本中进行了更改。</cite>

<p>在较早的版本中<code>tar</code> ，现在是什么<samp>`--exclude-from'</samp>选项被称为<samp>`--exclude'</samp>代替。现在， <samp>`--exclude'</samp>适用于命令行上列出的模式，并且<samp>`--exclude-from'</samp>适用于文件中列出的模式。
</p>
</li></ul>

<hr size="6">
<a name="wildcards"></a>
<a name="SEC112"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC111" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC113" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.5通配符模式和匹配</h2>

<p><em>通配符</em>是<em>通配符</em> ， <samp>`*'</samp>要么<samp>`?'</samp>例如，被替换并扩展为与给定模式匹配的所有现有文件。<acronym>GNU</acronym> <code>tar</code>从档案中提取或列出档案时，可以使用通配符模式来匹配（或遍历）档案成员。通配符模式还用于验证以下内容的卷标<code>tar</code>档案。本节的目的是解释用于<code>tar</code> 。
</p>
<p>请参阅<cite>接下来的几段需要工作。</cite>
</p>

<p>一种<var>pattern</var>应根据外壳语法编写，并使用通配符来实现通配符。模式中的大多数字符在匹配的字符串中代表自己，并且大小写很重要： <samp>`a'</samp>仅匹配<samp>`a'</samp> ， 并不是<samp>`A'</samp> 。性格<samp>`?'</samp>模式中的匹配匹配字符串中的任何单个字符。性格<samp>`*'</samp>模式中的匹配匹配的字符串中的零个，一个或多个单个字符。性格<samp>`\'</samp>表示<em>从字面上</em>接受模式的以下特征;当需要匹配<samp>`?'</samp> ， <samp>`*'</samp> ， <samp>`['</samp>要么<samp>`\'</samp>角色本身。
</p>
<p>性格<samp>`['</samp> ，直至匹配<samp>`]'</samp> ，介绍一个字符类。<em>字符类</em>是匹配字符串的下一个单个字符可接受的字符的列表。例如， <samp>`[abcde]'</samp>将匹配字母表的前五个字母中的任何一个。请注意，在字符类中，上面列出的所有“特殊字符”除外<samp>`\'</samp>失去其特殊的意义；例如， <samp>`[-\\[*?]]'</samp>会匹配任何字符， <samp>`-'</samp> ， <samp>`\'</samp> ， <samp>`['</samp> ， <samp>`*'</samp> ， <samp>`?'</samp> ， 要么<samp>`]'</samp> 。（由于解析约束，字符<samp>`-'</samp>和<samp>`]'</samp>必须在角色类中排在<em>第一位</em>或<em>最后</em>一位。）
</p>
<a name="IDX431"></a>
<a name="IDX432"></a>
<p>如果开课后上课的第一个字符<samp>`['</samp>是<samp>`!'</samp>要么<samp>`^'</samp> ，则该类的含义相反。它没有列出要匹配的字符，而是列出了那些被<em>禁止</em>作为匹配字符串的下一个单个字符的字符。
</p>
<p>班上的其他角色代表自己。特殊构造<samp>`[<var>a</var>-<var>e</var>]'</samp> ，在两个字母之间使用连字符，表示所有字符之间<var>a</var>和<var>e</var> ， 包括的。
</p>
<p>请参阅<cite>此处需要添加一句话，以使这些内容更清晰明了。</cite>
</p>

<p>期间（ <samp>`.'</samp> ）或正斜杠（ <samp>`/'</samp> ）对于通配符匹配不视为特殊。但是，如果模式与匹配字符串的目录前缀完全匹配，则它与完全匹配的字符串匹配：因此，排除目录也将排除其下的所有文件。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC113">控制模式匹配</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="controlling-pattern_002dmatching"></a>
<a name="SEC113"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC112" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC114" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC112" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="unnumberedsubsec">控制模式匹配</h3>

<p>就本节而言，我们将<em>排除成员</em>称为在处理过程中获得的所有成员名称。 <samp>`--exclude'</samp>和<samp>`--exclude-from'</samp>选项，并<em>包含成员，</em>这些成员名称是在命令行中给定的或从使用以下命令指定的文件中读取的成员名称<samp>`--files-from'</samp>选项。
</p>
<p>在以下操作中使用这两对成员列表： <samp>`--diff'</samp> ， <samp>`--extract'</samp> ， <samp>`--list'</samp> ， <samp>`--update'</samp> 。
</p>
<p>在创建模式下没有包含成员（ <samp>`--create'</samp>和<samp>`--append'</samp> ），因为在这种模式下，从命令行获取的名称是指<em>文件</em> ，而不是存档成员。
</p>
<p>默认情况下，将包含成员与存档成员按字面进行比较<a name="DOCF18" href="#FOOT18">（18）</a> ，将排除成员视为通配模式。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf foo.tar</kbd>
a.c
b.c
a.txt
[remarks]
# <i>Member names are used verbatim:</i>
$ <kbd>tar -xf foo.tar -v '[remarks]'</kbd>
[remarks]
# <i>Exclude member names are globbed:</i>
$ <kbd>tar -xf foo.tar -v --exclude '*.c'</kbd>
a.txt
[remarks]
</pre></td></tr></tbody></table>
<p>可以通过使用以下选项来更改此行为：</p>
<dl compact>
<dd><a name="IDX433"></a>
</dd>
<dt> <samp>`--wildcards'</samp></dt>
<dd><p>将所有成员名称视为通配符。
</p>
<a name="IDX434"></a>
</dd>
<dt> <samp>`--no-wildcards'</samp></dt>
<dd><p>将所有成员名称视为文字字符串。
</p></dd>
</dl>

<p>因此，要提取名称以结尾的文件<samp>`.c'</samp> ， 您可以使用：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xf foo.tar -v --wildcards '*.c'</kbd>
a.c
b.c
</pre></td></tr></tbody></table>

<p>请注意对模式的引用，以防止外壳解释它。
</p>
<p>的效果<samp>`--wildcards'</samp>选项被取消<samp>`--no-wildcards'</samp> 。这可以用来逐字传递部分命令行参数，而另一部分作为通配符模式传递。例如，以下调用：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xf foo.tar --wildcards '*.txt' --no-wildcards '[remarks]'</kbd>
</pre></td></tr></tbody></table>

<p>指示<code>tar</code>从<tt>foo.tar中</tt>提取名称以结尾<tt>的</tt>所有文件<samp>`.txt'</samp>和名为<tt>`[remarks]'</tt>的文件。
</p>
<p>通常，如果名称组成部分的初始子序列与该模式匹配，则该模式与该名称匹配，其中<samp>`*'</samp> ， <samp>`?'</samp>和<samp>`[...]'</samp>是通常的shell通配符， <samp>`\'</samp>转义通配符，并且通配符可以匹配<samp>`/'</samp> 。
</p>
<p>除了可选地剥离前导<samp>`/'</samp>从名称（请参阅“ <a href="#SEC120">绝对文件名”</a>部分）中，模式和名称按原样使用。例如，尾随<samp>`/'</samp>在决定是否排除用户指定的名称之前，不会从用户指定的名称中删除该名称。
</p>
<p>但是，可以通过下面列出的选项来更改此匹配过程。这些选项会累积。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--ignore-case --exclude='makefile' --no-ignore-case ---exclude='readme'
</pre></td></tr></tbody></table>

<p>排除时忽略大小写<samp>`makefile'</samp> ，但排除时不包括<samp>`readme'</samp> 。
</p>
<dl compact>
<dd><p><a name="anchored-patterns"></a>
<a name="IDX435"></a>
<a name="IDX436"></a>
</p></dd>
<dt> <samp>`--anchored'</samp></dt>
<dt> <samp>`--no-anchored'</samp></dt>
<dd><p>如果锚定，则模式必须与名称组成部分的初始子序列匹配。否则，模式可以匹配任何子序列。默认为<samp>`--no-anchored'</samp>对于排除成员和<samp>`--anchored'</samp>包含成员。
</p>
<p><a name="case_002dinsensitive-matches"></a>
<a name="IDX437"></a>
<a name="IDX438"></a>
</p></dd>
<dt> <samp>`--ignore-case'</samp></dt>
<dt> <samp>`--no-ignore-case'</samp></dt>
<dd><p>忽略大小写时，大写模式会匹配小写名称，反之亦然。不忽略大小写时（默认），匹配区分大小写。
</p>
<a name="IDX439"></a>
<a name="IDX440"></a>
</dd>
<dt> <samp>`--wildcards-match-slash'</samp></dt>
<dt> <samp>`--no-wildcards-match-slash'</samp></dt>
<dd><p>当通配符与斜杠匹配时（排除成员的默认值），通配符如<samp>`*'</samp>在模式中可以匹配一个<samp>`/'</samp>在名字里。除此以外， <samp>`/'</samp>仅与匹配<samp>`/'</samp> 。
</p>
</dd>
</dl>

<p>的<samp>`--recursion'</samp>和<samp>`--no-recursion'</samp>选项（请参阅“ <a href="#SEC117">下降到目录”</a>一节）也会影响成员模式的解释方式。如果递归有效，则模式匹配名称（如果它与名称的任何父目录匹配）。
</p>
<p>下表总结了模式匹配的默认值：</p>
<table>
<thead><tr><th><p>会员</p></th><th><p>默认设置</p></th></tr></thead>
<tbody><tr><td><p>包容性</p></td><td><p> <samp>`--no-wildcards --anchored --no-wildcards-match-slash'</samp>
</p></td></tr>
<tr><td><p>排除</p></td><td><p> <samp>`--wildcards --no-anchored --wildcards-match-slash'</samp>
</p></td></tr>
</tbody></table>

<hr size="6">
<a name="quoting-styles"></a>
<a name="SEC114"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC113" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC115" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.6引用会员名称</h2>

<p>显示会员名称时<code>tar</code>注意避免某些字符引起的歧义。这称为<em>名称引用</em> 。有问题的字符是：</p>
<ul>
<li>不可打印的控制字符： <a name="escape-sequences"></a>
<table>
<thead><tr><th><p>字符</p></th><th><p> <acronym>ASCII码</acronym> </p></th><th><p>角色名字</p></th></tr></thead>
<tbody><tr><td><p>\一种</p></td><td><p>7</p></td><td><p>声音铃</p></td></tr>
<tr><td><p>\ b</p></td><td><p>8</p></td><td><p>退格键</p></td></tr>
<tr><td><p>\F</p></td><td><p>12</p></td><td><p>换页</p></td></tr>
<tr><td><p>\ n</p></td><td><p>10</p></td><td><p>新队</p></td></tr>
<tr><td><p>\ r</p></td><td><p>13</p></td><td><p>回车</p></td></tr>
<tr><td><p>\ t</p></td><td><p>9</p></td><td><p>水平制表</p></td></tr>
<tr><td><p>\ v</p></td><td><p>11</p></td><td><p>垂直制表</p></td></tr>
</tbody></table>

</li><li>空格（ <acronym>ASCII</acronym> 32）</li><li>单引号和双引号（ <samp>`''</samp>和<samp>`"'</samp> ）</li><li>反斜线（ <samp>`\'</samp> ）</li></ul>

<p>确切方法<code>tar</code>引用这些字符的用法取决于<em>引用样式</em> 。默认的引用样式称为<em>转义</em> （请参见下文），使用反斜杠表示法表示控制字符和反斜杠。
</p>
<p><acronym>GNU</acronym> <code>tar</code>提供七种不同的报价样式，可以使用以下方式选择<samp>`--quoting-style'</samp>选项：</p>
<dl compact>
<dt> <samp>`--quoting-style=<var>style</var>'</samp></dt>
<dd><a name="IDX441"></a>

<p>设置引用样式。的有效值<var>style</var>参数为：立即数，shell，始终为shell，c，escape，locale，clocale。
</p></dd>
</dl>

<p>这些样式将在下面详细描述。为了说明它们的作用，我们将使用一个虚构的tar归档文件<tt>“ arch.tar”，</tt>其中包含以下成员：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># 1. Contains horizontal tabulation character.
a       tab
# 2. Contains newline character
a
newline
# 3. Contains a space
a space
# 4. Contains double quotes
a&quot;double&quot;quote
# 5. Contains single quotes
a'single'quote
# 6. Contains a backslash character:
a\backslash
</pre></td></tr></tbody></table>
<p>这是平常的<code>ls</code>如果它们已存在于当前工作目录中，则命令将列出它们：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>ls</kbd>
a\ttab
a\nnewline
a\ space
a&quot;double&quot;quote
a'single'quote
a\\backslash
</pre></td></tr></tbody></table>
<p>报价方式：</p>
<dl compact>
<dt> <samp>`literal'</samp></dt>
<dd><p>不引用，按原样显示每个字符：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=literal</kbd>
./
./a space
./a'single'quote
./a&quot;double&quot;quote
./a\backslash
./a     tab
./a
newline
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`shell'</samp></dt>
<dd><p>显示字符的方式与Bourne Shell相同：控制字符，除了<samp>`\t'</samp>和<samp>`\n'</samp> ，使用反斜杠转义符进行打印， <samp>`\t'</samp>和<samp>`\n'</samp>按原样打印，单引号按以下格式打印<samp>`\''</samp> 。如果名称包含任何带引号的字符，则将其用单引号引起来。特别是，如果名称包含单引号，则将其打印为多个单引号字符串：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=shell</kbd>
./
'./a space'
'./a'\''single'\''quote'
'./a&quot;double&quot;quote'
'./a\backslash'
'./a    tab'
'./a
newline'
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`shell-always'</samp></dt>
<dd><p>和...一样<samp>`shell'</samp> ，但名称始终用单引号引起来：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=shell-always</kbd>
'./'
'./a space'
'./a'\''single'\''quote'
'./a&quot;double&quot;quote'
'./a\backslash'
'./a    tab'
'./a
newline'
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`c'</samp></dt>
<dd><p>使用C编程语言的表示法。所有名称都用双引号引起来。控制字符用反斜杠表示，双引号表示为<samp>`\"'</samp> ，反斜杠字符表示为<samp>`\\'</samp> 。单引号和空格不加引号：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=c</kbd>
&quot;./&quot;
&quot;./a space&quot;
&quot;./a'single'quote&quot;
&quot;./a\&quot;double\&quot;quote&quot;
&quot;./a\\backslash&quot;
&quot;./a\ttab&quot;
&quot;./a\nnewline&quot;
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`escape'</samp></dt>
<dd><p>控制字符使用反斜杠符号打印，反斜杠为<samp>`\\'</samp> 。这是默认的引用样式，除非在配置程序包时对其进行了更改。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=escape</kbd>
./
./a space
./a'single'quote
./a&quot;double&quot;quote
./a\\backslash
./a\ttab
./a\nnewline
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`locale'</samp></dt>
<dd><p>控制字符，单引号和反斜杠使用反斜杠表示法打印。所有名称均使用适合当前语言环境的左右引号引起来。如果未定义引号，请使用<samp>`''</samp>如左和右引号。名称中右引号的所有出现都用<samp>`\'</samp> ， 例如：</p>
<p>例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=locale</kbd>
'./'
'./a space'
'./a\'single\'quote'
'./a&quot;double&quot;quote'
'./a\\backslash'
'./a\ttab'
'./a\nnewline'
</pre></td></tr></tbody></table>
</dd>
<dt> <samp>`clocale'</samp></dt>
<dd><p>和...一样<samp>`locale'</samp> ，但是<samp>`"'</samp>如果当前选定的语言环境未提供，则用于左右两个引号：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=clocale</kbd>
&quot;./&quot;
&quot;./a space&quot;
&quot;./a'single'quote&quot;
&quot;./a\&quot;double\&quot;quote&quot;
&quot;./a\\backslash&quot;
&quot;./a\ttab&quot;
&quot;./a\nnewline&quot;
</pre></td></tr></tbody></table></dd>
</dl>

<p>您可以指定除当前引用样式所隐含的字符外还应引用哪些字符：</p>
<dl compact>
<dt> <samp>`--quote-chars=<var>string</var>'</samp></dt>
<dd><p>一律引用以下字符： <var>string</var> ，即使所选的引用样式不会引用它们。
</p></dd>
</dl>

<p>例如，使用<samp>`escape'</samp>引用（与上面的常规转义列表比较）：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar tf arch.tar --quoting-style=escape --quote-chars=' &quot;'</kbd>
./
./a\ space
./a'single'quote
./a\&quot;double\&quot;quote
./a\\backslash
./a\ttab
./a\nnewline
</pre></td></tr></tbody></table>
<p>要禁用此类附加字符的引号，请使用以下选项：</p>
<dl compact>
<dt> <samp>`--no-quote-chars=<var>string</var>'</samp></dt>
<dd><p>删除列出的字符<var>string</var>从上一个引号设置的字符列表中<samp>`--quote-chars'</samp>选项。
</p></dd>
</dl>

<p>如果您添加了此选项，则该选项特别有用<samp>`--quote-chars'</samp>给你<code>TAR_OPTIONS</code> （请参阅<a href="#TAR_005fOPTIONS">TAR_OPTIONS</a> ），并希望针对当前调用将其禁用。
</p>
<p>注意<samp>`--no-quote-chars'</samp> <em>没有</em>禁用默认情况下在选择的报价风格引用这些字符。
</p>
<hr size="6">
<a name="transform"></a>
<a name="SEC115"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC114" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC116" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.7修改文件和成员名称</h2>

<p><code>Tar</code>存档包含有关存储在其中的文件的详细信息，完整文件名是该信息的一部分。将文件存储到存档时，其文件名以及实际文件内容都会记录在其中。从存档还原时，将在磁盘上创建一个文件，该文件的名称与存档中存储的名称完全相同。在大多数情况下，这是文件存档器的预期行为。但是，在某些情况下并非如此。
</p>
<p>首先，提取具有绝对文件名或以<tt>`。开头的归档文件成员通常是不安全的<tt>。/'</tt> 。<acronym>GNU</acronym> <code>tar</code>在提取此类名称时会采取特殊的预防措施，并提供了处理它们的特殊选项，这在“ <a href="#SEC120">绝对文件名”中进行了</a>描述。
</tt></p><tt>
<p>其次，您可能希望提取文件名而无需某些前导目录组件，或使用其他方式修改的名称。在其他情况下，希望将文件以不同的名称存储在档案中。
</p>
<p><acronym>GNU</acronym> <code>tar</code>为满足这些需求提供了几种选择。
</p>
<dl compact>
<dd><a name="IDX442"></a>
</dd>
<dt> <samp>`--strip-components=<var>number</var>'</samp></dt>
<dd><p>给定地带<var>number</var>提取文件名之前的主要组件。
</p></dd>
</dl>

<p>例如，假设您已将整个<tt>/ usr</tt>层次结构归档到名为<tt>usr.tar</tt>的tar归档文件中。在其他文件中，此归档文件包含<tt>`usr / include / stdlib.h'</tt> ，您希望将其提取到当前工作目录中。为此，您键入：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xf usr.tar --strip=2 usr/include/stdlib.h</kbd>
</pre></td></tr></tbody></table>
<p>选项<samp>`--strip=2'</samp>指示<code>tar</code>删除文件名中的两个前导组件（ <tt>“ usr /”</tt>和<tt>“ include /”</tt> ）。
</p>
<p>如果您添加<samp>`--verbose'</samp> （ <samp>`-v'</samp> ）选项，您会注意到详细列表仍然包含完整的文件名，而两个已删除的组件仍然存在。这可能很不方便，所以<code>tar</code>提供了用于更改此行为的特殊选项：</p>
<p><a name="show_002dtransformed_002dnames"></a>
</p><dl compact>
<dd><a name="IDX443"></a>
</dd>
<dt> <samp>`--show-transformed-names'</samp></dt>
<dd><p>显示文件或成员名称，并应用所有请求的转换。
</p></dd>
</dl>


<p>例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -xf usr.tar -v --strip=2 usr/include/stdlib.h</kbd>
usr/include/stdlib.h
$ <kbd>tar -xf usr.tar -v --strip=2 --show-transformed usr/include/stdlib.h</kbd>
stdlib.h
</pre></td></tr></tbody></table>
<p>请注意，在两种情况下，文件<tt>“ stdlib.h”都</tt>被提取到当前工作目录中， <samp>`--show-transformed-names'</samp>仅影响其名称的显示方式。
</p>
<p>此选项对于验证调用是否将具有所需效果特别有用。因此，在跑步之前</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -x --strip=<var>n</var></kbd>
</pre></td></tr></tbody></table>

<p>通常建议运行</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -t -v --show-transformed --strip=<var>n</var></kbd>
</pre></td></tr></tbody></table>

<p>确保该命令将产生预期的结果。
</p>
<p>如果您需要对文件名<acronym>GNU进行</acronym>更复杂的修改<code>tar</code>提供通用转换选项：</p>
<dl compact>
<dd><a name="IDX444"></a>
<a name="IDX445"></a>
</dd>
<dt> <samp>`--transform=<var>expression</var>'</samp></dt>
<dt> <samp>`--xform=<var>expression</var>'</samp></dt>
<dd><p>使用提供的修改文件名<var>expression</var> 。
</p></dd>
</dl>


<p>的<var>expression</var>是一个<code>sed</code>形式的替换表达式：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">s/<var>regexp</var>/<var>replace</var>/[<var>flags</var>]
</pre></td></tr></tbody></table>

<p>哪里<var>regexp</var>是一个<em>正则表达式</em> ， <var>replace</var>是每个匹配的文件名部分的替换<var>regexp</var> 。都<var>regexp</var>和<var>replace</var>在<a href="${GS}/sed/manual/sed.html#The-_0022s_0022-Command">“ s”命令</a>中进行了详细描述<a href="${GS}/sed/manual/sed.html#The-_0022s_0022-Command">：（sed）</a> <cite>GNU sed中</cite> <a href="${GS}/sed/manual/sed.html#The-_0022s_0022-Command">的“ s”命令</a>部分中的`s'命令'。
</p>
<p>可以使用任何定界符代替<samp>`/'</samp> ，唯一的要求是在整个表达式中始终使用它。例如，以下两个表达式是等效的：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">s/one/two/
s,one,two,
</pre></td></tr></tbody></table>
<p>在以下情况下，更改定界符通常很有用： <var>regex</var>包含斜线。例如，写起来更方便<code>s,/,-,</code>比<code>s/\//-/</code> 。
</p>
<p>如<code>sed</code> ，您可以给出几个用分号分隔的替换表达式。
</p>
<p>支持的<var>flags</var>是：</p>
<dl compact>
<dt> <samp>`g'</samp></dt>
<dd><p>将替换项应用于<em>所有</em>匹配项<var>regexp</var> ，而不仅仅是第一个。
</p>
</dd>
<dt> <samp>`i'</samp></dt>
<dd><p>使用不区分大小写的匹配。
</p>
</dd>
<dt> <samp>`x'</samp></dt>
<dd><p><var>regexp</var>是<em>扩展的正则表达式</em> （请参阅<a href="${GS}/sed/manual/sed.html#Extended-regexps">扩展的正则表达式：（sed）</a> <cite>GNU sed中的</cite>扩展的正则表达式部分“扩展的正则表达式”）。
</p>
</dd>
<dt> <samp>`<var>number</var>'</samp></dt>
<dd><p>仅更换<var>number</var>第的比赛<var>regexp</var> 。
</p>
<p>注意：当您混合使用<acronym>POSIX</acronym>标准时，没有指定<acronym>POSIX</acronym>标准<samp>`g'</samp>和<var>number</var>修饰符。<acronym>GNU</acronym> <code>tar</code>遵循GNU <code>sed</code>在这方面的实现，因此将交互定义为：在<var>number</var> th，然后匹配并替换所有来自<var>number</var>继续。
</p>
</dd>
</dl>

<p>此外，还支持多个<em>转换范围</em>标志，用于控制要应用哪些文件的转换。这些是：</p>
<dl compact>
<dt> <samp>`r'</samp></dt>
<dd><p>将转换应用于常规存档成员。
</p>
</dd>
<dt> <samp>`R'</samp></dt>
<dd><p>不要将转换应用于常规存档成员。
</p>
</dd>
<dt> <samp>`s'</samp></dt>
<dd><p>将转换应用于符号链接目标。
</p>
</dd>
<dt> <samp>`S'</samp></dt>
<dd><p>不要将转换应用于符号链接目标。
</p>
</dd>
<dt> <samp>`h'</samp></dt>
<dd><p>将转换应用于硬链接目标。
</p>
</dd>
<dt> <samp>`H'</samp></dt>
<dd><p>不要将转换应用于硬链接目标。
</p></dd>
</dl>

<p>默认为<samp>`rsh'</samp> ，这意味着将转换应用于归档成员以及符号和硬链接的目标。
</p>
<p>默认范围标志也可以使用<samp>`flags='</samp>转换表达式中的语句。以这种方式设置的标志将一直保留到下一个<samp>`flags='</samp>语句或表达式结尾，以先到者为准。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  --transform 'flags=S;s|^|/usr/local/|'
</pre></td></tr></tbody></table>
<p>这是几个例子<samp>`--transform'</samp>用法：</p>
<ol>
<li>将<tt>`usr /'</tt>层次结构提取到<tt>`usr / local /'中</tt> ：<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --transform='s,usr/,usr/local/,' -x -f arch.tar</kbd>
</pre></td></tr></tbody></table>
</li><li>剥离两个主要的目录组件（相当于<samp>`--strip-components=2'</samp> ）：<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --transform='s,/*[^/]*/[^/]*/,,' -x -f arch.tar</kbd>
</pre></td></tr></tbody></table>
</li><li>将每个文件名转换为小写：<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --transform 's/.*/\L&amp;/' -x -f arch.tar</kbd>
</pre></td></tr></tbody></table>
</li><li>在每个文件名前添加<tt>`/ prefix /'</tt> ：<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --transform 's,^,/prefix/,' -x -f arch.tar</kbd>
</pre></td></tr></tbody></table>
</li><li>存档<tt>`/ lib'</tt>目录，在前面<samp>`/usr/local'</samp>给每个存档成员：<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --transform 's,^,/usr/local/,S' -c -f arch.tar /lib</kbd>
</pre></td></tr></tbody></table></li></ol>

<p>注意最后一个示例中标志的使用。<tt>/ lib</tt>目录通常包含许多指向其中文件的符号链接。例如，它可能看起来像这样：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>ls -l</kbd>
drwxr-xr-x root/root       0 2008-07-08 16:20 /lib/
-rwxr-xr-x root/root 1250840 2008-05-25 07:44 /lib/libc-2.3.2.so
lrwxrwxrwx root/root       0 2008-06-24 17:12 /lib/libc.so.6 -&gt; libc-2.3.2.so
...
</pre></td></tr></tbody></table>
<p>使用表达式<samp>`s,^,/usr/local/,'</samp>意味着添加<samp>`/usr/local'</samp>到常规存档成员并链接目标。在这种情况下， <tt>“ / lib / libc.so.6”</tt>将变为：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  /usr/local/lib/libc.so.6 -&gt; /usr/local/libc-2.3.2.so
</pre></td></tr></tbody></table>
<p>这绝对是不希望的。为避免这种情况， <samp>`S'</samp>标志被使用，它从文件名转换中排除符号链接目标。结果是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --transform 's,^,/usr/local/,S' -c -v -f arch.tar \
       --show-transformed /lib</kbd>
drwxr-xr-x root/root       0 2008-07-08 16:20 /usr/local/lib/
-rwxr-xr-x root/root 1250840 2008-05-25 07:44 /usr/local/lib/libc-2.3.2.so
lrwxrwxrwx root/root       0 2008-06-24 17:12 /usr/local/lib/libc.so.6 \
 -&gt; libc-2.3.2.so
</pre></td></tr></tbody></table>
<p>不像<samp>`--strip-components'</samp> ， <samp>`--transform'</samp>可以在任何<acronym>GNU中使用</acronym> <code>tar</code>操作模式。例如，以下命令将文件添加到归档文件中，同时用<tt>`var /'</tt>替换领先的<tt>`usr /'</tt>组件：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf arch.tar --transform='s,^usr/,var/,' /</kbd>
</pre></td></tr></tbody></table>
<p>去测试<samp>`--transform'</samp>我们建议使用的效果<samp>`--show-transformed-names'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf arch.tar --transform='s,^usr/,var/,' \
       --verbose --show-transformed-names /</kbd>
</pre></td></tr></tbody></table>
<p>如果两者<samp>`--strip-components'</samp>和<samp>`--transform'</samp>一起使用，然后<samp>`--transform'</samp>首先应用，然后从结果中删除所需数量的组件。
</p>
<p>你可以用很多<samp>`--transform'</samp>您可以在单个命令行中使用选项。然后将按照出现的顺序应用指定的表达式。例如，以下两个调用是等效的：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf arch.tar --transform='s,/usr/var,/var/' \
                        --transform='s,/usr/local,/usr/,'</kbd>
$ <kbd>tar -cf arch.tar \
               --transform='s,/usr/var,/var/;s,/usr/local,/usr/,'</kbd>
</pre></td></tr></tbody></table>
<hr size="6">
<a name="after"></a>
<a name="SEC116"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC115" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC117" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.8仅在新文件上操作</h2>

<p>的<samp>`--after-date=<var>date</var>'</samp> （ <samp>`--newer=<var>date</var>'</samp> ， <samp>`-N <var>date</var>'</samp> ）选项原因<code>tar</code>仅适用于数据修改或状态更改时间比<var>date</var>给定的。如果<var>date</var>以。。开始<samp>`/'</samp>要么<samp>`.'</samp> ，它被当作文件名；该文件的数据修改时间用作日期。如果在创建或附加到存档时使用此选项，则存档将仅包括新文件。如果您使用<samp>`--after-date'</samp>提取档案时， <code>tar</code>只会解压缩比<var>date</var>您指定。
</p>
<p>如果你只想<code>tar</code>根据文件数据的修改（而不是状态更改）进行日期比较，然后使用<samp>`--newer-mtime=<var>date</var>'</samp>选项。
</p>
<a name="IDX446"></a>
<a name="IDX447"></a>
<p>您可以将这些选项用于任何操作。请注意，这些选项与<samp>`--update'</samp> （ <samp>`-u'</samp> ）操作，因为它们允许您指定一个特定的日期作为<code>tar</code>在决定是否归档文件时可以进行比较。
</p>
<dl compact>
<dd><a name="IDX448"></a>
<a name="IDX449"></a>
</dd>
<dt> <samp>`--after-date=<var>date</var>'</samp></dt>
<dt> <samp>`--newer=<var>date</var>'</samp></dt>
<dt> <samp>`-N <var>date</var>'</samp></dt>
<dd><p>仅存储比以下版本新的文件<var>date</var> 。
</p>
<p>仅当文件的数据修改或状态更改时间晚于文件时，才对文件起作用<var>date</var> 。与任何操作结合使用。
</p>
<p>如果<var>date</var>以。。开始<samp>`/'</samp>要么<samp>`.'</samp> ，它被当作文件名；该文件的数据修改时间用作日期。
</p>
<a name="IDX450"></a>
</dd>
<dt> <samp>`--newer-mtime=<var>date</var>'</samp></dt>
<dd><p>像<samp>`--after-date'</samp> ，但仅查看数据修改时间。
</p></dd>
</dl>

<p>这些选项限制<code>tar</code>仅对指定日期之后已修改的文件进行操作。如果文件的内容已修改，或者文件的所有者，权限等已更改，则认为文件的状态已更改。（有关如何指定日期的更多信息，请参见<a href="#SEC121">日期输入格式</a> ；请记住，如果整个日期参数包含空格，则必须用引号引起来。）
</p>
<p>上师会说<samp>`--after-date'</samp>测试两个数据修改时间（ <code>mtime</code> ，文件内容的最后修改时间）和状态更改时间（ <code>ctime</code> ，文件状态的最后更改时间：所有者，权限等）领域，而<samp>`--newer-mtime'</samp>仅测试<code>mtime</code>领域。
</p>
<p>确切地说， <samp>`--after-date'</samp> <em>同时</em>检查<code>mtime</code>和<code>ctime</code>并处理以下文件： <var>date</var> ，而<samp>`--newer-mtime'</samp>只检查<code>mtime</code>和无视<code>ctime</code> 。它既不使用<code>atime</code> （最后一次查看文件的内容）。
</p>
<p>日期说明符可以具有嵌入的空格。因此，您可能需要引用日期参数，以防止外壳程序将它们解析为单独的参数。例如，以下命令会将少于两天前修改的所有文件添加到存档中：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf foo.tar --newer-mtime '2 days ago'</kbd>
</pre></td></tr></tbody></table>
<p>当这些选项中的任何一个与该选项一起使用时<samp>`--verbose'</samp> （见<a href="#SEC15">的<samp>`--verbose'</samp>选项</a> ） <acronym>GNU</acronym> <code>tar</code>将尝试将指定的日期转换回其文本表示形式，并将其与使用该选项给出的日期进行比较。如果两个日期不同， <code>tar</code>将打印警告，说明将使用什么日期。这是为了帮助用户确保使用正确的日期。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar --after-date='10 days ago' .</kbd>
tar: Option --after-date: Treating date '10 days ago' as 2006-06-11
13:19:37.232434
</pre></td></tr></tbody></table>
<blockquote><p><strong>请注意：</strong> <samp>`--after-date'</samp>和<samp>`--newer-mtime'</samp>不应用于增量备份。请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code>执行增量转储</a> ，以创建增量备份的正确方法。
</p></blockquote>

<hr size="6">
<a name="recurse"></a>
<a name="SEC117"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC116" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC118" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.9下降到目录</h2>

<p>通常， <code>tar</code>将以递归方式浏览所有目录（在命令行或通过<samp>`--files-from'</samp>选项）以获取其中包含的各种文件。但是，您可能并不总是想要<code>tar</code>以这种方式行事。
</p>
<a name="IDX451"></a>
<a name="IDX452"></a>
<p>的<samp>`--no-recursion'</samp>选项禁止<code>tar</code>的递归下降到指定目录。如果指定<samp>`--no-recursion'</samp> ，您可以使用<code>find</code> （请参阅<a href="find.html#Top">（查找）</a> <cite>GNU查找手册中的</cite> “查找” <a href="find.html#Top">最上面的</a>部分）实用程序，用于遍历目录级别以构建文件名列表，然后可以将其传递给<code>tar</code> 。
<code>find</code>让您在选择要存档的文件时更具选择性；有关使用的更多信息，请参见<a href="#SEC108">从文件读取名称。</a> <code>find</code>与<code>tar</code> 。
</p>
<dl compact>
<dt> <samp>`--no-recursion'</samp></dt>
<dd><p>预防<code>tar</code>从递归降序目录。
</p>
<a name="IDX453"></a>
</dd>
<dt> <samp>`--recursion'</samp></dt>
<dd><p>需要<code>tar</code>递归地下降目录。这是默认值。
</p></dd>
</dl>

<p>使用时<samp>`--no-recursion'</samp> ， <acronym>GNU</acronym> <code>tar</code>自己获取目录条目，但不递归地进入它们。许多人使用<code>find</code>用于查找他们要备份的文件，并且<code>tar</code> <em>通常以</em>递归方式降级到目录，因此必须使用<samp>`-not -type d'</samp>在他们的测试<code>find</code>调用（请参阅“ <cite>查找文件</cite> ”中的“类型<a href="find.html#Type">：（查找）类型”</a>部分的“类型测试”），因为它们通常不希望目录中的所有文件。然后，他们使用<samp>`--files-from'</samp>选择通过以下方式归档文件<code>find</code> 。
</p>
<p>恢复以这种方式存档的文件时，问题在于目录本身不在存档中；所以<samp>`--same-permissions'</samp> （ <samp>`--preserve-permissions'</samp> ， <samp>`-p'</samp> ）选项不会对它们产生影响-尽管用户可能真的很喜欢。指定<samp>`--no-recursion'</samp>是一种告诉<code>tar</code>仅捕获分配给它的目录条目，而不添加任何新文件。总结一下，如果您使用<code>find</code>要创建要存储在档案中的文件列表，请按以下方式使用它：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>find <var>dir</var> <var>tests</var> | \
  tar -cf <var>archive</var> --no-recursion -T -</kbd>
</pre></td></tr></tbody></table>
<p>的<samp>`--no-recursion'</samp>选项在提取时也适用：它会导致<code>tar</code>仅提取匹配的目录条目，而不提取这些目录下的文件。
</p>
<p>的<samp>`--no-recursion'</samp>选项还会影响解释球形模式的方式（请参阅<a href="#SEC113">控制模式匹配部分</a> ）。
</p>
<p>的<samp>`--no-recursion'</samp>和<samp>`--recursion'</samp>选项适用于以后的选项和操作数，并且可以在以后出现时覆盖<samp>`--no-recursion'</samp>和<samp>`--recursion'</samp> 。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf jams.tar --no-recursion grape --recursion grape/concord</kbd>
</pre></td></tr></tbody></table>

<p>一个条目<tt>'葡萄“</tt>和<tt>'</tt>的<tt>葡萄/和睦</tt>递归内容<tt>”，</tt>但在<tt>'葡萄</tt>没有项<tt>“</tt>比<tt>'葡萄/协和</tt>其他<tt>”</tt>创建存档。
</p>
<hr size="6">
<a name="one"></a>
<a name="SEC118"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC117" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC119" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC105" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">6.10跨越文件系统边界</h2>

<p><code>tar</code>通常会自动跨越文件系统边界，以存档属于目录树的文件。您可以通过运行更改此行为<code>tar</code>并指定<samp>`--one-file-system'</samp> 。此选项仅会影响已归档的文件，因为它们位于正在归档的目录中。 <code>tar</code>仍将归档在命令行或通过以下方式显式命名的文件<samp>`--files-from'</samp> ，无论他们居住在哪里。
</p>
<dl compact>
<dd><a name="IDX454"></a>
</dd>
<dt> <samp>`--one-file-system'</samp></dt>
<dd><p>预防<code>tar</code>归档时跨越文件系统边界。与任何写操作结合使用。
</p></dd>
</dl>

<p>的<samp>`--one-file-system'</samp>选择原因<code>tar</code>修改其在归档目录内容中的正常行为。如果目录中的文件与目录本身不在同一文件系统上，则<code>tar</code>不会存档该文件。如果文件本身是目录， <code>tar</code>不会将其下的任何内容存档；换一种说法， <code>tar</code>不会越过安装点。
</p>
<p>此选项对于进行文件系统的完整或增量档案备份很有用。如果将此选项与<samp>`--verbose'</samp> （ <samp>`-v'</samp> ），排除的文件会在标准错误上用名称提及。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC119">6.10.1更改工作目录</a></td><td>  </td><td align="left" valign="top">变更目录</td></tr>
<tr><td align="left" valign="top"><a href="#SEC120">6.10.2绝对文件名</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="directory"></a>
<a name="SEC119"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC118" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC120" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC118" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">6.10.1更改工作目录</h3>

<p>请参阅<cite>现在需要读取该节点以确保连续性；我已经改变了一些事情。</cite>
</p>

<a name="IDX455"></a>
<a name="IDX456"></a>
<a name="IDX457"></a>
<p>要在文件名列表的中间更改工作目录，可以在命令行上或在使用以下命令指定的文件中<samp>`--files-from'</samp> （ <samp>`-T'</samp> ）， 使用<samp>`--directory'</samp> （ <samp>`-C'</samp> ）。在列表中的该位置之后，这会将工作目录更改为指定的目录。
</p>
<dl compact>
<dd><a name="IDX458"></a>
</dd>
<dt> <samp>`--directory=<var>directory</var>'</samp></dt>
<dt> <samp>`-C <var>directory</var>'</samp></dt>
<dd><p>在命令行中间更改工作目录。
</p></dd>
</dl>

<p>例如，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f jams.tar grape prune -C food cherry</kbd>
</pre></td></tr></tbody></table>

<p>会将当前目录中的文件<tt>grape</tt>和<tt>prune</tt>放入归档文件<tt>jams.tar中</tt> ，然后将其文件中的<tt>cherry</tt>文件放入<tt>食物</tt>目录中。当您有多个要分开存储的文件要存储在同一档案中时，此选项特别有用。
</p>
<p>请注意，文件<tt>“樱桃”</tt>以准确的名称<tt>“樱桃”</tt> <em>而不是</em> <tt>“食品/樱桃”</tt>记录在档案中。因此，存档将包含三个似乎都来自同一目录的文件。如果存档是用纯文本提取的<samp>`tar --extract'</samp> ，这三个文件都将写入当前目录。
</p>
<p>将此与命令进行对比，</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f jams.tar grape prune -C food red/cherry</kbd>
</pre></td></tr></tbody></table>

<p>它以<tt>`red / cherry'</tt>的名称记录档案中的第三个文件，因此，如果档案是使用以下方式提取的<samp>`tar --extract'</samp> ，第三个文件将被写入名为<tt>`red'</tt>的子目录中。
</p>
<p>您可以使用<samp>`--directory'</samp>选项，使归档文件独立于保存文件的目录的原始名称。以下命令将文件<tt>“ / etc / passwd”</tt> ， <tt>“ / etc / hosts”</tt>和<tt>“ /lib/libc.a”</tt>放入归档文件<tt>“ foo.tar”中</tt> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f foo.tar -C /etc passwd hosts -C /lib libc.a</kbd>
</pre></td></tr></tbody></table>

<p>但是，存档成员的名称将与命令行上的名称完全相同： <tt>`passwd'</tt> ， <tt>`hosts'</tt>和<tt>`libc.a'</tt> 。它们似乎不会通过文件名与这些文件所在的原始目录相关联。
</p>
<p>注意<samp>`--directory'</samp>选项是连续解释的。如果<samp>`--directory'</samp>指定一个相对文件名，它是相对于当时目录的解释，该目录可能与的当前当前目录不同。 <code>tar</code> ，由于先前<samp>`--directory'</samp>选项。
</p>
<p>使用时<samp>`--files-from'</samp> （请参阅<a href="#SEC108">从文件读取名称</a>部分），您可以放入各种<code>tar</code>选项（包括<samp>`-C'</samp> ）在文件列表中。但是请注意，在这种情况下，选项及其参数不能用空格分隔。如果使用短选项，则其参数必须立即跟随选项字母，且不插入任何空格，或占据下一行。否则，如果使用long选项，则用等号将其参数分开。
</p>
<p>例如，以上示例的文件列表将是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">-C/etc
passwd
hosts
--directory=/lib
libc.a
</pre></td></tr></tbody></table>

<p>要使用它，您将调用<code>tar</code>如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f foo.tar --files-from list</kbd>
</pre></td></tr></tbody></table>
<p>文件列表中选项的解释被禁用<samp>`--verbatim-files-from'</samp>和<samp>`--null'</samp>选项。
</p>
<hr size="6">
<a name="absolute"></a>
<a name="SEC120"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC119" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC118" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">6.10.2绝对文件名</h3>

<p>默认情况下， <acronym>GNU</acronym> <code>tar</code>领先<samp>`/'</samp>在输入或输出上，并抱怨文件名包含<tt>`..'</tt>组件。有一个选项可以关闭此行为：</p>
<dl compact>
<dd><a name="IDX459"></a>
</dd>
<dt> <samp>`--absolute-names'</samp></dt>
<dt> <samp>`-P'</samp></dt>
<dd><p>不要从文件名中去除前导斜杠，并允许文件名包含<tt>“ ..”</tt>文件名部分。
</p></dd>
</dl>

<p>什么时候<code>tar</code>从档案中提取档案成员，并去除所有前导斜线（ <samp>`/'</samp> ）。这会导致将存档中的绝对成员名视为相对文件名。这样，您就可以在所需的任何位置提取此类成员，而不仅限于在存档中命名的确切目录中提取成员。例如，如果存档成员的名称为<tt>`/ etc / passwd'</tt> ， <code>tar</code>将提取它，就好像名称实际上是<tt>`etc / passwd'一样</tt> 。
</p>
<p>包含<tt>“ ..”的</tt>文件名在提取时可能会引起问题，因此<code>tar</code>通常在创建存档时会警告您有关此类文件的信息，并拒绝尝试提取此类文件的尝试。
</p>
<p>其他<code>tar</code>程序不这样做。结果，如果创建一个归档文件，其成员名称以斜杠开头，则对于使用非<acronym>GNU的</acronym>其他人来说将很难<code>tar</code>程序使用。因此， <acronym>GNU</acronym> <code>tar</code>在将成员放入存档时，还会从成员名称中删除前导斜杠。例如，如果您问<code>tar</code>要将文件<tt>“ / bin / ls”添加</tt>到存档中，可以这样做，但是成员名称为<tt>“ bin / ls”</tt> <a name="DOCF19" href="#FOOT19">（19）</a> 。
</p>
<p>包含<tt>“ ..”</tt>或前导的符号链接<samp>`/'</samp>提取时也会引起问题，所以<code>tar</code>通常最后提取它们；它可能会在提取过程中创建空文件作为占位符。
</p>
<p>如果您使用<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ） 选项， <code>tar</code>这些转换都不做。
</p>
<p>要归档或提取相对于根目录的文件，请指定<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ） 选项。
</p>
<p>一般， <code>tar</code>对相对于工作目录的文件起作用-归档时忽略上级目录名，提取时忽略前导斜杠。
</p>
<p>当您指定<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ）， <code>tar</code>存储文件名，包括所有上级目录名，并保留前导斜杠。如果仅调用<code>tar</code>从根目录，您将不需要<samp>`--absolute-names'</samp>选项，但是使用此选项可能比切换到root用户更为方便。
</p>
<p>请参阅<cite>“教程/ wizardry”部分中的“示例”，使用该示例在系统之间传输文件。</cite>
</p>

<dl compact>
<dt> <samp>`--absolute-names'</samp></dt>
<dd><p>在归档和提取文件时保留完整的文件名（包括上级目录名）。
</p>
</dd>
</dl>

<p><code>tar</code>打印出有关删除<samp>`/'</samp>从文件名。该消息每个<acronym>GNU</acronym>出现一次<code>tar</code>调用。它代表了应该被告知的东西；忽略它的含义会在以后引起非常严重的意外。
</p>
<p>但是，有些人不希望看到此消息。想玩得很危险，当然可以改行<code>tar</code>水槽的标准误差。例如，在<code>sh</code> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar /home 2&gt; /dev/null</kbd>
</pre></td></tr></tbody></table>

<p>更好和更简单的另一种解决方案是，先更改到<tt>“ /”</tt>目录，然后再避免使用绝对符号。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -c -f archive.tar -C / home</kbd>
</pre></td></tr></tbody></table>
<p>有关使用此选项的一些与安全性相关的含义，请参阅“ <a href="#SEC178">完整性</a> ”部分。
</p>




<hr size="6">
<a name="Date-input-formats"></a>
<a name="SEC121"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC120" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC122" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC105" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">7。日期输入格式</h1>


<p>首先，引用：</p>
<blockquote><p>我们的时间测量单位（从几秒到几个月不等）非常复杂，不对称且分离，以至于无法及时进行连贯的心理测算。的确，如果有一些专横的上帝竭尽全力地奴役我们的思想，使我们几乎无法逃脱沉浸在例行公事和令人不快的意外之中，那么他几乎不可能做得比传承我们现有的制度更好。它就像一组梯形的构建块，没有垂直或水平的表面，就像一种最简单的思想要求华丽的结构，无用的粒子和冗长的割礼的语言。与语言和科学的更成功的模式不同，它使我们能够大胆地或至少从头到尾地面对经验，而我们的时间计算系统则无声地并持续地鼓励我们对时间的恐惧。
</p>
<p>……似乎建筑师必须以英尺为单位测量长度，以米为单位测量宽度，以ells测量高度。基本的指导手册要求具备五种不同语言的知识。因此，难怪我们经常在上周二或周日之后的一周里看着自己的过去或未来，感到无助的困惑。…</p>
<p>-罗伯特·格鲁丁（Robert Grudin），《 <cite>时间与生活的艺术》</cite> 。
</p></blockquote>

<p>本节描述了GNU程序接受的文本日期表示形式。这些是您作为用户可以提供给各种程序的参数的字符串。C接口（通过<code>parse_datetime</code>功能），此处不再赘述。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC122">7.1通用日期语法</a></td><td>  </td><td align="left" valign="top">通用规则。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC123">7.2日历日期项目</a></td><td>  </td><td align="left" valign="top">1994年12月19日。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC124">7.3时间项目</a></td><td>  </td><td align="left" valign="top">晚上9:20。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC125">7.4时区项目</a></td><td>  </td><td align="left" valign="top">EST，PDT，UTC等</td></tr>
<tr><td align="left" valign="top"><a href="#SEC126">7.5合并的日期和时间项</a></td><td>  </td><td align="left" valign="top">1972-09-24T20：02：00,000000-0500。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC127">7.6星期几项目</a></td><td>  </td><td align="left" valign="top">星期一等。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td><td>  </td><td align="left" valign="top">2年前的下一个星期二。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC129">7.8日期字符串中的纯数字</a></td><td>  </td><td align="left" valign="top">19931219，1440。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC130">自大纪元7.9秒</a></td><td>  </td><td align="left" valign="top">@ 1078100502。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC131">7.10指定时区规则</a></td><td>  </td><td align="left" valign="top">TZ =“ America / New_York”，TZ =“ UTC0”。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td><td>  </td><td align="left" valign="top">Bellovin，Eggert，Salz，Berets等。
</td></tr>
</tbody></table>


<hr size="6">
<a name="General-date-syntax"></a>
<a name="SEC122"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC121" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC123" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.1通用日期语法</h2>


<p><em>日期</em>是一个字符串，可能为空，包含许多由空格分隔的项目。当不产生歧义时，可以省略空格。空字符串表示今天的开始（即午夜）。项目的顺序无关紧要。日期字符串可能包含多种形式的项目：</p>
<ul>
<li>日历日期项目</li><li>时间项目</li><li>时区项目</li><li>日期项目的日期和时间的组合</li><li>星期几项目</li><li>相关项目</li><li>纯数字。
</li></ul>

<p>我们在下面依次描述了每种商品类型。
</p>
<a name="IDX460"></a>
<a name="IDX461"></a>
<a name="IDX462"></a>
<a name="IDX463"></a>
<a name="IDX464"></a>
<p>在某些情况下，可以用文字写出一些序数。这对于指定星期几项或相对项（见下文）最有用。在最常用的序数中，单词<samp>`last'</samp>代表<em>-1</em> ， <samp>`this'</samp>代表0，并且<samp>`first'</samp>和<samp>`next'</samp>两者都代表1。因为这个词<samp>`second'</samp>代表时间单位，无法写序数2，但为方便起见<samp>`third'</samp>代表3， <samp>`fourth'</samp>对于4 <samp>`fifth'</samp>为5 <samp>`sixth'</samp>对于6 <samp>`seventh'</samp>为7 <samp>`eighth'</samp>对于8 <samp>`ninth'</samp> 9 <samp>`tenth'</samp> 10 <samp>`eleventh'</samp> 11和<samp>`twelfth'</samp>为12
</p>
<a name="IDX465"></a>
<p>用这种方式写一个月时，仍被认为是数字书写，而不是“拼写完整”；这将更改允许的字符串。
</p>
<a name="IDX466"></a>
<p>在当前的实现中，仅支持英文单词和缩写，例如<samp>`AM'</samp> ， <samp>`DST'</samp> ， <samp>`EST'</samp> ， <samp>`first'</samp> ， <samp>`January'</samp> ， <samp>`Sunday'</samp> ， <samp>`tomorrow'</samp>和<samp>`year'</samp> 。
</p>
<a name="IDX467"></a>
<a name="IDX468"></a>
<p>输出<code>date</code>命令并非总是可以作为日期字符串使用，这不仅是因为语言问题，而且还因为时区等项目没有标准含义<samp>`IST'</samp> 。使用时<code>date</code>要生成打算稍后解析的日期字符串，请指定一种日期格式，该日期格式与语言无关，并且不使用除<samp>`UTC'</samp>和<samp>`Z'</samp> 。这里有一些方法可以做到这一点：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ LC_ALL=C TZ=UTC0 date
Mon Mar  1 00:21:42 UTC 2004
$ TZ=UTC0 date +'%Y-%m-%d %H:%M:%SZ'
2004-03-01 00:21:42Z
$ date --rfc-3339=ns  # --rfc-3339 is a GNU extension.
2004-02-29 16:21:42.692722128-08:00
$ date --rfc-2822  # a GNU extension
Sun, 29 Feb 2004 16:21:42 -0800
$ date +'%Y-%m-%d %H:%M:%S %z'  # %z is a GNU extension.
2004-02-29 16:21:42 -0800
$ date +'@%s.%N'  # %s and %N are GNU extensions.
@1078100502.692722128
</pre></td></tr></tbody></table>
<a name="IDX469"></a>
<a name="IDX470"></a>
<p>日期中完全忽略字母大小写。只要正确地嵌套了包含的括号，就可以在圆括号之间引入注释。当前将忽略不带数字的连字符。数字上的前导零将被忽略。
</p>
<a name="IDX471"></a>
<p>日期无效，例如<samp>`2005-02-29'</samp>或类似的时间<samp>`24:00'</samp>被拒绝。在主机不支持leap秒的典型情况下， <samp>`23:59:60'</samp>即使它对应于有效的leap秒，也会被拒绝。
</p>

<hr size="6">
<a name="Calendar-date-items"></a>
<a name="SEC123"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC122" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC124" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.2日历日期项目</h2>


<p><em>日历日期项</em>指定一年中的某一天。根据以数字还是字面量指定月份，可以使用不同的方式进行指定。所有这些字符串指定相同的日历日期：</p>
<table><tbody><tr><td> </td><td><pre class="example">1972-09-24     # ISO 8601.
72-9-24        # Assume 19xx for 69 through 99,
               # 20xx for 00 through 68.
72-09-24       # Leading zeros are ignored.
9/24/72        # Common U.S. writing.
24 September 1972
24 Sept 72     # September has a special abbreviation.
24 Sep 72      # Three-letter abbreviations always allowed.
Sep 24, 1972
24-sep-72
24sep72
</pre></td></tr></tbody></table>
<p>年份也可以省略。在这种情况下，将使用最后指定的年份，如果没有则使用当前年份。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">9/24
sep 24
</pre></td></tr></tbody></table>
<p>这是规则。
</p>
<a name="IDX472"></a>
<a name="IDX473"></a>
<p>对于数字月份，ISO 8601格式<samp>`<var>year</var>-<var>month</var>-<var>day</var>'</samp>被允许的地方<var>year</var>是任何正数， <var>month</var>是介于01和12之间的数字，并且<var>day</var>是介于01和31之间的数字。如果数字小于十，则必须存在前导零。如果<var>year</var>是68或更小，然后加上2000；否则，如果<var>year</var>小于100，则添加1900。构造<samp>`<var>month</var>/<var>day</var>/<var>year</var>'</samp> ，在美国很受欢迎。也<samp>`<var>month</var>/<var>day</var>'</samp> ，省略年份。
</p>
<a name="IDX474"></a>
<a name="IDX475"></a>
<p>文字月份可以完整说明： <samp>`January'</samp> ， <samp>`February'</samp> ， <samp>`March'</samp> ， <samp>`April'</samp> ， <samp>`May'</samp> ， <samp>`June'</samp> ， <samp>`July'</samp> ， <samp>`August'</samp> ， <samp>`September'</samp> ， <samp>`October'</samp> ， <samp>`November'</samp>要么<samp>`December'</samp> 。文字月份可以缩写为前三个字母，后面可以跟一个缩写点。也可以写<samp>`Sept'</samp>代替<samp>`September'</samp> 。
</p>
<p>如果逐字写上月份，则日历日期可以采用以下任意一种形式：</p>
<table><tbody><tr><td> </td><td><pre class="example"><var>day</var> <var>month</var> <var>year</var>
<var>day</var> <var>month</var>
<var>month</var> <var>day</var> <var>year</var>
<var>day</var>-<var>month</var>-<var>year</var>
</pre></td></tr></tbody></table>
<p>或者，省略年份：</p>
<table><tbody><tr><td> </td><td><pre class="example"><var>month</var> <var>day</var>
</pre></td></tr></tbody></table>

<hr size="6">
<a name="Time-of-day-items"></a>
<a name="SEC124"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC123" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC125" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.3时间项目</h2>


<p>日期字符串中<em>的一天</em>中的时间<em>项</em>指定给定日期的时间。以下是一些示例，所有示例都表示相同的时间：</p>
<table><tbody><tr><td> </td><td><pre class="example">20:02:00.000000
20:02
8:02pm
20:02-0500      # In EST (U.S. Eastern Standard Time).
</pre></td></tr></tbody></table>
<a name="IDX476"></a>
<p>一般而言，一天中的时间可以表示为<samp>`<var>hour</var>:<var>minute</var>:<var>second</var>'</samp> ，在哪里<var>hour</var>是介于0到23之间的数字， <var>minute</var>是介于0到59之间的数字，并且<var>second</var>是介于0和59之间的数字，可能后跟<samp>`.'</samp>要么<samp>`,'</samp>和一个包含一个或多个数字的分数。或者， <samp>`:<var>second</var>'</samp>可以省略，在这种情况下，它取为零。在支持leap秒的罕见主机上， <var>second</var>可能是60。
</p>
<a name="IDX477"></a>
<a name="IDX478"></a>
<a name="IDX479"></a>
<a name="IDX480"></a>
<p>如果时间紧随其后<samp>`am'</samp>要么<samp>`pm'</samp> （要么<samp>`a.m.'</samp>要么<samp>`p.m.'</samp> ）， <var>hour</var>限制为1到12，并且<samp>`:<var>minute</var>'</samp>可以省略（取为零）。<samp>`am'</samp>表示一天的前半段， <samp>`pm'</samp>表示一天的后半段。在此符号中，12是1的前身： <samp>`12am'</samp>而正午<samp>`12pm'</samp> 。（这是对零的解释<samp>`12am'</samp>和<samp>`12pm'</samp>与源自拉丁语的古老传统相反<samp>`12m'</samp>中午和<samp>`12pm'</samp>午夜。）
</p>
<a name="IDX481"></a>
<a name="IDX482"></a>
<p>可以选择在时间之后进行时区校正，表示为<samp>`<var>s</var><var>hh</var><var>mm</var>'</samp> ，在哪里<var>s</var>是<samp>`+'</samp>要么<samp>`-'</samp> ， <var>hh</var>是区域时数，并且<var>mm</var>是一个区域分钟数。区域分钟术语， <var>mm</var>可以省略，在这种情况下，一位或两位数的校正被解释为小时数。你也可以分开<var>hh</var>从<var>mm</var>用冒号。以这种方式给出时区校正后，它将强制解释相对于协调世界时（UTC）的时间，从而覆盖了该时区或本地时区的所有先前规范。例如， <samp>`+0530'</samp>和<samp>`+05:30'</samp>两者都代表比UTC提前5.5小时的时区（例如印度）。这是按小时的小数部分指定时区校正的最佳方法。最大区域校正为24小时。
</p>
<p>要么<samp>`am'</samp> / <samp>`pm'</samp>或可以指定时区校正，但不能同时指定。
</p>

<hr size="6">
<a name="Time-zone-items"></a>
<a name="SEC125"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC124" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC126" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.4时区项目</h2>


<p><em>时区项</em>指定国际时区，由一小部分字母表示，例如， <samp>`UTC'</samp>要么<samp>`Z'</samp>协调世界时。任何包含的期间都将被忽略。通过使用字符串遵循非夏时制时区<samp>`DST'</samp>在一个单独的单词（即，由一些空格分隔）中，可以指定相应的夏时制时区。或者，可以在非夏时制时区之后进行时区校正，以将两个值相加。这通常仅适用于<samp>`UTC'</samp> ;例如， <samp>`UTC+05:30'</samp>相当于<samp>`+05:30'</samp> 。
</p>
<p>时区以外的项目<samp>`UTC'</samp>和<samp>`Z'</samp>已过时，不建议使用，因为它们模棱两可；例如， <samp>`EST'</samp>在澳大利亚和美国具有不同的含义。相反，最好使用明确的数字时区校正，例如<samp>`-0500'</samp> ，如上一节所述。
</p>
<p>如果既未提供时区项目，也未提供时区校正，那么将使用默认时区的规则来解释时间戳（请参阅“ <a href="#SEC131">指定时区规则”</a>一节）。
</p>

<hr size="6">
<a name="Combined-date-and-time-of-day-items"></a>
<a name="SEC126"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC125" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC127" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.5合并的日期和时间项</h2>


<p>ISO 8601日期和时间扩展格式包含ISO 8601日期， <samp>`T'</samp>字符分隔符，以及一天中的ISO 8601时间。如果<samp>`T'</samp>被一个空格代替。
</p>
<p>在这种格式下，一天中的时间应使用24小时制。允许小数秒，小数点前可以带逗号或句点。不支持ISO 8601的小数分钟和小时。通常，主机支持纳秒级的时间戳分辨率；多余的精度会被静默丢弃。
</p>
<p>这里有些例子：</p>
<table><tbody><tr><td> </td><td><pre class="example">2012-09-24T20:02:00.052-05:00
2012-12-31T23:59:59,999999999+11:00
1970-01-01 00:00Z
</pre></td></tr></tbody></table>
<hr size="6">
<a name="Day-of-week-items"></a>
<a name="SEC127"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC126" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC128" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.6星期几项目</h2>


<p>明确提到一周中的某天会将日期（仅在必要时）转发到将来的该天。
</p>
<p>一周中的几天可能会完整说明： <samp>`Sunday'</samp> ， <samp>`Monday'</samp> ， <samp>`Tuesday'</samp> ， <samp>`Wednesday'</samp> ， <samp>`Thursday'</samp> ， <samp>`Friday'</samp>要么<samp>`Saturday'</samp> 。天数可以缩写为前三个字母，并可以选择后跟一个句点。特殊缩写<samp>`Tues'</samp>对于<samp>`Tuesday'</samp> ， <samp>`Wednes'</samp>对于<samp>`Wednesday'</samp>和<samp>`Thur'</samp>要么<samp>`Thurs'</samp>对于<samp>`Thursday'</samp>也被允许。
</p>
<a name="IDX483"></a>
<a name="IDX484"></a>
<p>一个数字可以在一周中的某天的项目之前，以向前移动补充周。最好用于类似<samp>`third monday'</samp> 。在这种情况下， <samp>`last <var>day</var>'</samp>要么<samp>`next <var>day</var>'</samp>也可以接受；他们在那天之前或之后的一个星期移动<var>day</var>本身将代表。
</p>
<p>星期几项后面的逗号将被忽略。
</p>

<hr size="6">
<a name="Relative-items-in-date-strings"></a>
<a name="SEC128"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC127" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC129" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.7日期字符串中的相对项</h2>


<p><em>相对项目会</em>向前或向后调整日期（如果没有，则为当前日期）。相关项目的影响会累积。这里有些例子：</p>
<table><tbody><tr><td> </td><td><pre class="example">1 year
1 year ago
3 years
2 days
</pre></td></tr></tbody></table>
<a name="IDX485"></a>
<a name="IDX486"></a>
<a name="IDX487"></a>
<a name="IDX488"></a>
<a name="IDX489"></a>
<a name="IDX490"></a>
<a name="IDX491"></a>
<p>时间位移的单位可以通过字符串选择<samp>`year'</samp>要么<samp>`month'</samp>整整几个月或几个月的移动。这些是模糊单位，因为年份和月份的持续时间并非都相等。更精确的单位是<samp>`fortnight'</samp>价值14天， <samp>`week'</samp>值得7天， <samp>`day'</samp>价值24小时<samp>`hour'</samp>值得60分钟<samp>`minute'</samp>要么<samp>`min'</samp>价值60秒，以及<samp>`second'</samp>要么<samp>`sec'</samp>值得一秒钟。一个<samp>`s'</samp>这些单位的后缀被接受并被忽略。
</p>
<a name="IDX492"></a>
<p>时间单位之前可以有一个乘数，它是一个可选的带符号数。无符号数字被视为带正符号。根本没有数字表示乘数为1。在字符串后面跟随相对项<samp>`ago'</samp>等于在单位前面加上值<em>-1</em>的乘数。
</p>
<a name="IDX493"></a>
<a name="IDX494"></a>
<a name="IDX495"></a>
<p>字符串<samp>`tomorrow'</samp>值得在未来的一天（相当于<samp>`day'</samp> ），字符串<samp>`yesterday'</samp>值得过去一天（相当于<samp>`day ago'</samp> ）。
</p>
<a name="IDX496"></a>
<a name="IDX497"></a>
<a name="IDX498"></a>
<p>琴弦<samp>`now'</samp>要么<samp>`today'</samp>是与零值时间位移相对应的相对项，这些字符串来自以下事实：零值时间位移表示当前时间，而以前的项目未对其进行更改。它们可能被用来强调其他项目，例如<samp>`12:00 today'</samp> 。字符串<samp>`this'</samp>也具有零值时间位移的含义，但在日期字符串（如<samp>`this thursday'</samp> 。
</p>
<p>当相对项目导致结果日期越过时钟调整的边界（通常是夏时制）时，结果日期和时间也会相应地进行调整。
</p>
<p>单位的绒毛可能导致相关项目出现问题。例如， <samp>`2003-07-31 -1 month'</samp>可能会评估为2003-07-01，因为2003-06-31是无效日期。为了更可靠地确定上个月，您可以要求当月15日之前的月份。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ date -R
Thu, 31 Jul 2003 13:02:39 -0700
$ date --date='-1 month' +'Last month was %B?'
Last month was July?
$ date --date=&quot;$(date +%Y-%m-15) -1 month&quot; +'Last month was %B!'
Last month was June!
</pre></td></tr></tbody></table>
<p>另外，在围绕时钟变化的日期（例如，夏时制飞跃）操作时要小心。在某些情况下，这些时钟会增加或减少24小时，因此通常明智的做法是通过设置<code>TZ</code>环境变量<samp>`UTC0'</samp>在开始进行日历计算之前。
</p>
<hr size="6">
<a name="Pure-numbers-in-date-strings"></a>
<a name="SEC129"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC128" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC130" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.8日期字符串中的纯数字</h2>


<p>纯十进制数字的精确解释取决于日期字符串中的上下文。
</p>
<p>如果十进制数的格式为<var>yyyy</var><var>mm</var><var>dd</var>并且在日期字符串中没有其他日历日期项目（请参阅“ <a href="#SEC123">日历日期项目”</a>一节）出现在该日期之前，然后<var>yyyy</var>被解读为年份， <var>mm</var>作为月份号和<var>dd</var>作为指定的日历日期的月份。
</p>
<p>如果十进制数的格式为<var>hh</var><var>mm</var>并且日期字符串中没有其他时间项出现在该日期项之前，则<var>hh</var>读取为一天中的小时，并且<var>mm</var>以一天中的指定时间为一小时中的分钟。 <var>mm</var>也可以省略。
</p>
<p>如果日历字符串和日期中的某个时间都出现在日期字符串中数字的左侧，但没有相对项，则该数字将覆盖年份。
</p>

<hr size="6">
<a name="Seconds-since-the-Epoch"></a>
<a name="SEC130"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC129" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC131" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">自大纪元7.9秒</h2>

<p>如果您在数字前加上<samp>`@'</samp> ，它表示内部时间戳（以秒为单位）。该数字可以包含内部小数点（ <samp>`.'</samp>要么<samp>`,'</samp> ）;内部表示形式不支持的任何多余精度都将被截断为负无穷大。这样的数字不能与任何其他日期项组合，因为它指定了完整的时间戳。
</p>
<a name="IDX499"></a>
<a name="IDX500"></a>
<p>在内部，计算机时间表示为从一个纪元（定义明确的时间点）开始的秒数。在GNU和POSIX系统上，纪元是1970-01-01 00:00:00 UTC，因此<samp>`@0'</samp>代表这次<samp>`@1'</samp>代表1970-01-01 00:00:01 UTC，依此类推。GNU和大多数其他POSIX兼容系统都支持使用负计数等时间来扩展POSIX。 <samp>`@-1'</samp>代表1969-12-31 23:59:59 UTC。</p>
<p>传统的Unix系统使用32位二进制补码整数来计数秒，并且可以表示从1901-12-13 20:45:52到2038-01-19 03:14:07 UTC的时间。更现代的系统使用具有纳秒子计数的64位秒计数，并且可以表示宇宙已知寿命中的所有时间，分辨率为1纳秒。
</p>
<a name="IDX501"></a>
<p>在大多数主机上，这些计数忽略of秒的存在。例如，在大多数主机上<samp>`@915148799'</samp>代表1998年12月31日23:59:59 UTC， <samp>`@915148800'</samp>代表1999年1月1日00:00:00世界标准时间（UTC），并且无法代表中间的leap秒1998-12-31 23:59:60世界标准时间（UTC）。</p>
<hr size="6">
<a name="Specifying-time-zone-rules"></a>
<a name="SEC131"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC130" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC132" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.10指定时区规则</h2>

<p>通常，日期是使用当前时区的规则来解释的，而规则则由<code>TZ</code>环境变量，如果是，则为系统默认值<code>TZ</code>未设置。要指定仅适用于一个日期的一组不同的默认时区规则，请使用以下格式的字符串开始日期<samp>`TZ="<var>rule</var>"'</samp> 。两个引号字符（ <samp>`"'</samp> ）必须在日期中出现，并且其中的所有引号或反斜杠<var>rule</var>必须以反斜杠转义。
</p>
<p>例如，使用GNU <code>date</code>命令您可以回答问题“ 2004年10月31日上午6:30，巴黎时钟在纽约几点钟了？通过使用以<samp>`TZ="Europe/Paris"'</samp>如以下外壳脚本所示：</p>
<table><tbody><tr><td> </td><td><pre class="example">$ export TZ=&quot;America/New_York&quot;
$ date --date='TZ=&quot;Europe/Paris&quot; 2004-10-31 06:30'
Sun Oct 31 01:30:00 EDT 2004
</pre></td></tr></tbody></table>
<p>在此示例中， <samp>`--date'</samp>操作数以其自身开头<code>TZ</code>设置，因此该操作数的其余部分将根据<samp>`Europe/Paris'</samp>规则，对待字符串<samp>`2004-10-31 06:30'</samp>好像在巴黎一样。但是，由于输出<code>date</code>命令是根据总体时区规则处理的，它使用纽约时间。（巴黎通常在2004年比纽约早6个小时，但此示例所指的是万圣节的短暂时段，间隔为5个小时。）
</p>
<p>一种<code>TZ</code>值是通常会在<a href="http://www.twinsun.com/tz/tz-link.htm"><samp>`tz'</samp>数据库</a> 。最近的位置名称目录出现在<a href="http://twiki.org/cgi-bin/xtra/tzdate">TWiki日期和时间网关中</a> 。一些非GNU主机要求在冒号之前的位置名称前加冒号<code>TZ</code>设置，例如<samp>`TZ=":America/New_York"'</samp> 。
</p>
<p>的<samp>`tz'</samp>数据库包括各种各样的位置，从<samp>`Arctic/Longyearbyen'</samp>至<samp>`Antarctica/South_Pole'</samp> ，但是如果您在海上并且有自己的私人时区，或者您使用的是不支持<samp>`tz'</samp>数据库，则可能需要使用POSIX规则。简单的POSIX规则，例如<samp>`UTC0'</samp>指定没有夏令时的时区；其他规则可以指定简单的夏时制。请参阅<a href="${GS}/libc/manual/html_mono/libc.html#TZ-Variable">（libc）TZ变量</a>部分`使用<code>TZ</code>在<cite>GNU C库中</cite> 。
</p>
<hr size="6">
<a name="Authors-of-parse_005fdatetime"></a>
<a name="SEC132"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC131" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC121" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">7.11的作者<code>parse_datetime</code> </h2>
<p><a name="Authors-of-get_005fdate"></a>
</p>
<a name="IDX502"></a>

<a name="IDX503"></a>
<a name="IDX504"></a>
<a name="IDX505"></a>
<a name="IDX506"></a>
<a name="IDX507"></a>
<a name="IDX508"></a>
<p><code>parse_datetime</code>作为开始生活<code>getdate</code>最初由史蒂文·贝洛文（Steven M. Bellovin）（ <a href="mailto:smb@research.att.com">smb@research.att.com</a> ）在北卡罗来纳大学教堂山分校实施。后来有人在Usenet上对代码进行了调整，然后在1990年8月由Rich $ <a href="mailto:rsalz@bbn.com">alz</a> （ <a href="mailto:rsalz@bbn.com">rsalz@bbn.com</a> ）和Jim Berets（ <a href="mailto:jberets@bbn.com">jberets@bbn.com</a> ）进行了<a href="mailto:jberets@bbn.com">全面修订</a> 。David MacKenzie，Jim Meyering，Paul Eggert和其他人对GNU系统进行了各种修订，包括将其重命名为<code>get_date</code>避免与备用Posix函数发生冲突<code>getdate</code> ，后来重命名为<code>parse_datetime</code> 。Posix功能<code>getdate</code>可以使用解析更多特定于区域设置的日期<code>strptime</code> ，但依赖于环境变量和外部文件，并且缺乏线程安全性<code>parse_datetime</code> 。
</p>
<a name="IDX509"></a>
<a name="IDX510"></a>
<p>本章最初是由FrançoisPinard（ <a href="mailto:pinard@iro.umontreal.ca">pinard@iro.umontreal.ca</a> ）根据<tt>“ parse_datetime.y”</tt>源代码制作的，然后由K. Berry（ <a href="mailto:kb@cs.umb.edu">kb@cs.umb.edu</a> ）编辑。
</p>
<hr size="6">
<a name="Formats"></a>
<a name="SEC133"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC132" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC134" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC121" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">8。控制存档格式</h1>

<p>由于历史原因，tar存档有多种格式。它们全部基于相同的原理，但是存在一些细微的差异，这些差异常常使它们彼此不兼容。
</p>
<p>GNU tar能够创建和处理各种格式的档案。最常用的格式是（按字母顺序）：</p>
<dl compact>
<dt>牛羚</dt>
<dd><p><acronym>GNU</acronym>使用的格式<code>tar</code>版本最高为1.13.25。这种格式源自早期的<acronym>POSIX</acronym>标准，添加了一些改进，例如稀疏文件处理和增量存档。不幸的是，这些功能是以与其他存档格式不兼容的方式实现的。
</p>
<p>档案在<samp>`gnu'</samp>格式能够保存无限长度的文件名。
</p>
</dd>
<dt>Oldgnu</dt>
<dd><p><acronym>GNU</acronym>使用的格式<code>tar</code> 1.12之前的版本。
</p>
</dd>
<dt>v7</dt>
<dd><p>存档格式，与tar的V7实现兼容。这种格式有很多限制。其中最重要的是：</p>
<ol>
<li>文件名的最大长度限制为99个字符。
</li><li>符号链接的最大长度限制为99个字符。
</li><li>无法存储特殊文件（块和字符设备，fifos等）
</li><li>用户或组<acronym>ID的</acronym>最大值限制为2097151（八进制的7777777）</li><li>V7归档文件不包含符号所有权信息（文件所有者的用户名和组名）。
</li></ol>

<p>传统上，Automake在生成Makefile时会使用这种格式。同时，这种做法会在将来有所改变，但是，这意味着包含文件名超过99个字符的项目将无法使用<acronym>GNU</acronym> <code>tar</code> 1.32和1.9之前的Automake。
</p>
</dd>
<dt>Ustar</dt>
<dd><p><acronym>POSIX.1-1988</acronym>规范定义的存档格式。它存储符号所有权信息。它还能够存储特殊文件。但是，它也施加了一些限制：</p>
<ol>
<li>文件名的最大长度限制为256个字符，前提是该文件名可以在目录分隔符中分为两部分，第一部分的最大长度为155个字节。因此，在大多数情况下，最大文件名长度将小于256个字符。
</li><li>符号链接名称的最大长度限制为100个字符。
</li><li>档案可以容纳的最大文件大小为8GB</li><li>UID / GID的最大值是2097151。
</li><li>设备主辅号的最大位数为21。
</li></ol>

</dd>
<dt>星</dt>
<dd><p>JörgSchilling使用的格式<code>star</code>实施。<acronym>GNU</acronym> <code>tar</code>能够阅读<samp>`star'</samp>档案，但目前不制作。
</p>
</dd>
<dt>posix</dt>
<dd><p><acronym>POSIX.1-2001</acronym>规范定义的存档格式。这是最灵活，功能最丰富的格式。它对文件大小或文件名长度没有任何限制。这种格式是很新的，因此并非所有的tar实现都能够正确处理它。但是，这种格式的设计方式使得任何tar实现都能够读取<samp>`ustar'</samp>档案将能够阅读最多<samp>`posix'</samp>存档，唯一的例外是在这种情况下，任何其他信息（例如长文件名等）都将作为纯文本文件及其引用的文件提取。
</p>
<p>该存档格式将是<acronym>GNU</acronym>未来版本的默认格式。 <code>tar</code> 。
</p>
</dd>
</dl>

<p>下表总结了每种格式的局限性：</p>
<table>
<thead><tr><th><p>格式</p></th><th><p>UID</p></th><th><p>文件大小</p></th><th><p>文档名称</p></th><th><p>德文</p></th></tr></thead>
<tbody><tr><td><p>牛羚</p></td><td><p>1.8e19</p></td><td><p>无限</p></td><td><p>无限</p></td><td><p>63</p></td></tr>
<tr><td><p>Oldgnu</p></td><td><p>1.8e19</p></td><td><p>无限</p></td><td><p>无限</p></td><td><p>63</p></td></tr>
<tr><td><p>v7</p></td><td><p>2097151</p></td><td><p>8GB</p></td><td><p>99</p></td><td><p>不适用</p></td></tr>
<tr><td><p>Ustar</p></td><td><p>2097151</p></td><td><p>8GB</p></td><td><p>256</p></td><td><p>21</p></td></tr>
<tr><td><p>posix</p></td><td><p>无限</p></td><td><p>无限</p></td><td><p>无限</p></td><td><p>无限</p></td></tr>
</tbody></table>

<p><acronym>GNU</acronym>的默认格式<code>tar</code>在编译时定义。您可以通过运行检查它<code>tar --help</code> ，并检查其输出的最后几行。通常， <acronym>GNU</acronym> <code>tar</code>配置为在以下位置创建档案<samp>`gnu'</samp>格式，但是将来的版本将切换到<samp>`posix'</samp> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC134">8.1通过压缩使用更少的空间</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC138">8.2处理文件属性</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC139">8.3制作<code>tar</code>档案更便携</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC153">8.4比较<code>tar</code>和<code>cpio</code></a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Compression"></a>
<a name="SEC134"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC133" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC135" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">8.1通过压缩使用更少的空间</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="gzip"></a>
<a name="SEC135"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC134" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC136" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC134" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.1.1创建和读取压缩档案</h3>

<p><acronym>GNU</acronym> <code>tar</code>能够创建和读取压缩档案。它支持多种压缩程序，即： <code>gzip</code> ， <code>bzip2</code> ， <code>lzip</code> ， <code>lzma</code> ， <code>lzop</code> ， <code>zstd</code> ， <code>xz</code>和传统<code>compress</code> 。支持后者主要是为了向后兼容，我们建议不要使用它，因为它远不如其他压缩程序有效<a name="DOCF20" href="#FOOT20">（20）</a> 。
</p>
<p>创建压缩的存档很简单：您只需指定<em>压缩选项</em>以及常用的存档创建命令即可。下表总结了可用的压缩选项：</p>
<table>
<thead><tr><th><p>长</p></th><th><p>短</p></th><th><p>存档格式</p></th></tr></thead>
<tbody><tr><td><p> <samp>`--gzip'</samp>     </p></td><td><p> <samp>`-z'</samp> </p></td><td><p> <code>gzip</code>
</p></td></tr>
<tr><td><p> <samp>`--bzip2'</samp>    </p></td><td><p> <samp>`-j'</samp> </p></td><td><p> <code>bzip2</code>
</p></td></tr>
<tr><td><p> <samp>`--xz'</samp>       </p></td><td><p> <samp>`-J'</samp> </p></td><td><p> <code>xz</code>
</p></td></tr>
<tr><td><p> <samp>`--lzip'</samp>     </p></td><td>             </td><td><p> <code>lzip</code>
</p></td></tr>
<tr><td><p> <samp>`--lzma'</samp>     </p></td><td>             </td><td><p> <code>lzma</code>
</p></td></tr>
<tr><td><p> <samp>`--lzop'</samp>     </p></td><td>             </td><td><p> <code>lzop</code>
</p></td></tr>
<tr><td><p> <samp>`--zstd'</samp>     </p></td><td>             </td><td><p> <code>zstd</code>
</p></td></tr>
<tr><td><p> <samp>`--compress'</samp> </p></td><td><p> <samp>`-Z'</samp> </p></td><td><p> <code>compress</code>
</p></td></tr>
</tbody></table>

<p>例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar czf archive.tar.gz .</kbd>
</pre></td></tr></tbody></table>
<p>您也可以让<acronym>GNU</acronym> <code>tar</code>根据存档文件名的后缀选择压缩程序。这是使用完成的<samp>`--auto-compress'</samp> （ <samp>`-a'</samp> ）命令行选项。例如，以下调用将使用<code>bzip2</code>用于压缩：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar caf archive.tar.bz2 .</kbd>
</pre></td></tr></tbody></table>

<p>而下一个将使用<code>lzma</code> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar caf archive.tar.lzma .</kbd>
</pre></td></tr></tbody></table>
<p>有关<acronym>GNU</acronym>识别的文件名后缀的完整列表<code>tar</code> ，请参阅<a href="#auto_002dcompress">自动压缩</a> 。
</p>
<p>读取压缩的归档文件甚至更简单：您无需将任何其他选项指定为<acronym>GNU</acronym> <code>tar</code>自动识别其格式。因此，以下命令将列出并提取在先前示例中创建的档案：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># List the compressed archive
$ <kbd>tar tf archive.tar.gz</kbd>
# Extract the compressed archive
$ <kbd>tar xf archive.tar.gz</kbd>
</pre></td></tr></tbody></table>
<p>格式识别算法基于<em>签名</em> ，即文件开头的特殊字节序列，这些<em>签名</em>特定于某些压缩格式。如果这种方法失败了， <code>tar</code>退回到使用档案名称后缀来确定其格式（请参阅<a href="#auto_002dcompress">auto-compress</a> ，以获取可识别后缀的列表）。
</p>
<p><a name="alternative-decompression-programs"></a><a name="IDX511"></a>某些压缩程序能够处理不同的压缩格式。<acronym>GNU</acronym> <code>tar</code>如果给定格式的主要解压缩器不可用，请使用此选项。例如，如果<code>compress</code>未安装， <code>tar</code>会尝试使用<code>gzip</code> 。从1.32版开始，尝试了以下替代方法<a name="DOCF21" href="#FOOT21">（21）</a> ：</p>
<table>
<thead><tr><th><p>格式</p></th><th><p>主解压器</p></th><th><p>备择方案</p></th></tr></thead>
<tbody><tr><td><p>压缩</p></td><td><p>压缩</p></td><td><p>gzip</p></td></tr>
<tr><td><p>伊兹玛</p></td><td><p>伊兹玛</p></td><td><p>z</p></td></tr>
<tr><td><p>bzip2</p></td><td><p>bzip2</p></td><td><p>lbzip2</p></td></tr>
</tbody></table>

<p>在读取存档时必须指定解压缩选项的唯一情况是从不支持随机访问的管道或磁带驱动器读取数据时。但是，在这种情况下， <acronym>GNU</acronym> <code>tar</code>将指示您应该使用哪个选项。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cat archive.tar.gz | tar tf -</kbd>
tar: Archive is compressed.  Use -z option
tar: Error is not recoverable: exiting now
</pre></td></tr></tbody></table>
<p>如果看到这样的诊断，只需将建议的选项添加到<acronym>GNU</acronym>的调用中<code>tar</code> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cat archive.tar.gz | tar tzf -</kbd>
</pre></td></tr></tbody></table>
<p>还要注意，对压缩归档文件的操作有一些限制。首先，压缩档案无法修改，即您无法更新（ <samp>`--update'</samp> ，别名<samp>`-u'</samp> ）或删除（ <samp>`--delete'</samp> ）个成员，或添加（ <samp>`--append'</samp> ，别名<samp>`-r'</samp> ）的成员。同样，您不能追加其他<code>tar</code>存档到压缩存档使用<samp>`--concatenate'</samp> （ <samp>`-A'</samp> ）。其次，无法压缩多卷存档。
</p>
<p>以下选项允许选择特定的压缩程序：</p>
<dl compact>
<dd><a name="IDX512"></a>
<a name="IDX513"></a>
</dd>
<dt> <samp>`-z'</samp></dt>
<dt> <samp>`--gzip'</samp></dt>
<dt> <samp>`--ungzip'</samp></dt>
<dd><p>通过过滤档案<code>gzip</code> 。
</p>
<a name="IDX514"></a>
</dd>
<dt> <samp>`-J'</samp></dt>
<dt> <samp>`--xz'</samp></dt>
<dd><p>通过过滤档案<code>xz</code> 。
</p>
</dd>
<dt> <samp>`-j'</samp></dt>
<dt> <samp>`--bzip2'</samp></dt>
<dd><p>通过过滤档案<code>bzip2</code> 。
</p>
<a name="IDX515"></a>
</dd>
<dt> <samp>`--lzip'</samp></dt>
<dd><p>通过过滤档案<code>lzip</code> 。
</p>
<a name="IDX516"></a>
</dd>
<dt> <samp>`--lzma'</samp></dt>
<dd><p>通过过滤档案<code>lzma</code> 。
</p>
<a name="IDX517"></a>
</dd>
<dt> <samp>`--lzop'</samp></dt>
<dd><p>通过过滤档案<code>lzop</code> 。
</p>
<a name="IDX518"></a>
</dd>
<dt> <samp>`--zstd'</samp></dt>
<dd><p>通过过滤档案<code>zstd</code> 。
</p>
<a name="IDX519"></a>
<a name="IDX520"></a>
</dd>
<dt> <samp>`-Z'</samp></dt>
<dt> <samp>`--compress'</samp></dt>
<dt> <samp>`--uncompress'</samp></dt>
<dd><p>通过过滤档案<code>compress</code> 。
</p></dd>
</dl>

<p>当给出这些选项中的任何一个时， <acronym>GNU</acronym> <code>tar</code>在当前路径中搜索压缩二进制文件并调用它。压缩程序的名称是在编译时使用相应的名称指定的<samp>`--with-<var>compname</var>'</samp>选择<code>configure</code> ，例如<samp>`--with-bzip2'</samp>选择一个特定的<code>bzip2</code>二进制请参见<a href="#SEC136">将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</a> ，进行详细讨论。
</p>
<p>由产生的输出<code>tar --help</code>显示实际的压缩机名称以及每个选项。
</p>
<p>您可以在物理设备（磁带驱动器等）和远程文件以及普通文件上使用这些选项中的任何一个。往返于此类设备或远程文件的数据会被另一个<code>tar</code>程序以强制执行指定的（或默认的）记录大小。使用默认的压缩参数。您可以使用<samp>`-I'</samp>选项（见下文），例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf archive.tar.gz -I 'gzip -9 -n' subdir</kbd>
</pre></td></tr></tbody></table>

<p>一种更传统的方法是使用管道：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar cf - subdir | gzip -9 -n &gt; archive.tar.gz</kbd>
</pre></td></tr></tbody></table>
<a name="IDX521"></a>
<p>压缩档案很容易损坏，因为压缩文件几乎没有冗余。压缩方案的适应性意味着压缩表会隐式地分布在整个存档中。如果丢失了几个块，则压缩表的动态构造将变得不同步，并且几乎没有机会在以后的归档中进行恢复。
</p>
<p>其他压缩选项可更好地控制创建压缩档案。这些是：</p>
<dl compact>
<dd><p><a name="auto_002dcompress"></a>
<a name="IDX522"></a>
</p></dd>
<dt> <samp>`--auto-compress'</samp></dt>
<dt> <samp>`-a'</samp></dt>
<dd><p>选择一个压缩程序以存档文件名后缀使用。可以识别以下后缀：</p>
<table>
<thead><tr><th><p>后缀</p></th><th><p>压缩程序</p></th></tr></thead>
<tbody><tr><td><p> <samp>`.gz'</samp> </p></td><td><p> <code>gzip</code>
</p></td></tr>
<tr><td><p> <samp>`.tgz'</samp> </p></td><td><p> <code>gzip</code>
</p></td></tr>
<tr><td><p> <samp>`.taz'</samp> </p></td><td><p> <code>gzip</code>
</p></td></tr>
<tr><td><p> <samp>`.Z'</samp> </p></td><td><p> <code>compress</code>
</p></td></tr>
<tr><td><p> <samp>`.taZ'</samp> </p></td><td><p> <code>compress</code>
</p></td></tr>
<tr><td><p> <samp>`.bz2'</samp> </p></td><td><p> <code>bzip2</code>
</p></td></tr>
<tr><td><p> <samp>`.tz2'</samp> </p></td><td><p> <code>bzip2</code>
</p></td></tr>
<tr><td><p> <samp>`.tbz2'</samp> </p></td><td><p> <code>bzip2</code>
</p></td></tr>
<tr><td><p> <samp>`.tbz'</samp> </p></td><td><p> <code>bzip2</code>
</p></td></tr>
<tr><td><p> <samp>`.lz'</samp> </p></td><td><p> <code>lzip</code>
</p></td></tr>
<tr><td><p> <samp>`.lzma'</samp> </p></td><td><p> <code>lzma</code>
</p></td></tr>
<tr><td><p> <samp>`.tlz'</samp> </p></td><td><p> <code>lzma</code>
</p></td></tr>
<tr><td><p> <samp>`.lzo'</samp> </p></td><td><p> <code>lzop</code>
</p></td></tr>
<tr><td><p> <samp>`.xz'</samp> </p></td><td><p> <code>xz</code>
</p></td></tr>
<tr><td><p> <samp>`.zst'</samp> </p></td><td><p> <code>zstd</code>
</p></td></tr>
<tr><td><p> <samp>`.tzst'</samp> </p></td><td><p> <code>zstd</code>
</p></td></tr>
</tbody></table>

<p><a name="use_002dcompress_002dprogram"></a>
<a name="IDX523"></a>
</p></dd>
<dt> <samp>`--use-compress-program=<var>command</var>'</samp></dt>
<dt> <samp>`-I=<var>command</var>'</samp></dt>
<dd><p>使用外部压缩程序<var>command</var> 。如果您要为压缩程序指定选项，或者对编译时与后缀关联的压缩程序不满意，或者您拥有<acronym>GNU</acronym>压缩程序，请使用此选项。 <code>tar</code>不支持。的<var>command</var>参数是有效的命令调用，就像您在命令行提示符下键入时一样，并根据需要提供其他选项。如果它包含空格，请用引号引起来（请参阅“ <a href="#SEC55">运行外部命令”</a>一节）。
</p>
<p>的<var>command</var>应该遵循两个约定：</p>
<p>首先，在没有其他选项的情况下调用它时，它应该从标准输入中读取数据，对其进行压缩，然后将其输出到标准输出中。
</p>
<p>其次，如果与其他<samp>`-d'</samp>选项，它应该做的恰好相反，即从标准输入读取压缩数据，并在标准输出上生成未压缩的数据。
</p>
<p>后一个要求意味着您不得使用<samp>`-d'</samp>作为选项的一部分<var>command</var>本身。
</p></dd>
</dl>

<a name="IDX524"></a>
<a name="IDX525"></a>
<a name="IDX526"></a>
<p>的<samp>`--use-compress-program'</samp>选项特别是使您可以实现自己的过滤器，而不必处理压缩/解压缩。例如，假设您希望使用以下方法在压缩基础上实现PGP加密： <code>gpg</code> （请参见<a href="gpg.html#Top">gpg：（gpg）</a> <cite>GNU Privacy Guard手册中的</cite> “ gpg ---加密和签名工具” <a href="gpg.html#Top">顶部</a> ）。下面的脚本可以做到这一点：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">#! /bin/sh
case $1 in
-d) gpg --decrypt - | gzip -d -c;;
'') gzip -c | gpg -s;;
*)  echo &quot;Unknown option $1&quot;&gt;&amp;2; exit 1;;
esac
</pre></td></tr></tbody></table>
<p>假设您将其命名为<tt>“ gpgz”</tt>并将其保存在您的计算机中的某个位置<code>PATH</code> 。然后，以下命令将创建一个使用您的私钥签名的压缩存档：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cf foo.tar.gpgz -Igpgz .</kbd>
</pre></td></tr></tbody></table>

<p>同样，以下命令将列出其内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -tf foo.tar.gpgz -Igpgz .</kbd>
</pre></td></tr></tbody></table>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC136">8.1.1.1将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="lbzip2"></a>
<a name="SEC136"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC135" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC137" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC135" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">8.1.1.1将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</h4>
<p>  <code>Lbzip2</code>是用于处理的多线程实用程序<samp>`bzip2'</samp>压缩，由Laszlo Ersek撰写。它使用多个处理器来加快其运行速度，并且通常比<code>bzip2</code> 。有关的详细说明<code>lbzip2</code>请参阅<a href="http://freshmeat.net/projects/lbzip2">http://freshmeat.net/projects/lbzip2</a>和<a href="http://www.linuxinsight.com/lbzip2-parallel-bzip2-utility.html">lbzip2：并行bzip2实用程序</a> 。
</p>
<p>的最新版本<code>lbzip2</code>与大多数命令行兼容<code>bzip2</code> ，这使得可以通过<samp>`--bzip2'</samp> <acronym>GNU</acronym> <code>tar</code>命令行选项。为此， <acronym>GNU</acronym> <code>tar</code>必须配置<samp>`--with-bzip2'</samp>命令行选项，如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>./configure --with-bzip2=lbzip2 [<var>other-options</var>]</kbd>
</pre></td></tr></tbody></table>
<p>以这种方式配置和编译后， <code>tar --help</code>将显示以下内容：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --help | grep -- --bzip2</kbd>
  -j, --bzip2                filter the archive through lbzip2
</pre></td></tr></tbody></table>

<p>这意味着运行<code>tar --bzip2</code>将调用<code>lbzip2</code> 。
</p>
<hr size="6">
<a name="sparse"></a>
<a name="SEC137"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC136" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC138" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC134" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.1.2存档稀疏文件</h3>

<p>文件系统中的文件有时会出现<em>孔</em> 。文件中的<em>孔</em>是文件内容中从未写入的部分。孔的内容读取为全零。在许多操作系统上，实际的磁盘存储空间没有分配给孔，但它们是在文件长度中计算的。如果您存档这样的文件， <code>tar</code>可以创建比原始档案更长的档案。具有<code>tar</code>尝试识别文件中的孔，使用<samp>`--sparse'</samp> （ <samp>`-S'</samp> ）。然后，当您使用此选项时，对于磁盘空间少于其长度预期的任何文件， <code>tar</code>在文件中搜索孔。然后，它在文件的存档中记录孔（连续的零）的位置，并且仅存档文件的“实际内容”。提取时（使用<samp>`--sparse'</samp>提取时不需要），无论在哪里找到这些文件，这些文件都会创建孔。因此，如果您使用<samp>`--sparse'</samp> ， <code>tar</code>归档文件不会比原始文件占用更多的空间。
</p>
<p><acronym>GNU</acronym> <code>tar</code>使用两种方法来检测稀疏文件中的孔。这些方法将在本小节中稍后介绍。
</p>
<dl compact>
<dd><a name="IDX527"></a>
</dd>
<dt> <samp>`-S'</samp></dt>
<dt> <samp>`--sparse'</samp></dt>
<dd><p>该选项指示<code>tar</code>在尝试归档每个文件之前，测试每个文件的稀疏性。如果发现文件稀疏，则将对其进行特殊处理，从而减少归档文件中映像所使用的空间量。
</p>
<p>仅当创建或更新档案时，此选项才有意义。它对提取没有影响。
</p></dd>
</dl>

<p>考虑使用<samp>`--sparse'</samp>在执行文件系统备份时，请避免存档稀疏存储在系统中的文件的扩展形式。
</p>
<p>即使您的系统当前没有稀疏文件，将来也可能会创建一些稀疏文件。如果您使用<samp>`--sparse'</samp>当然，在进行文件系统备份时，可以确保归档文件在介质上的占用空间永远不会比磁盘上的文件占用的空间大（否则，对装有稀疏文件的磁盘进行归档可能会占用数百个磁带）。请参阅<a href="#SEC96">使用</a>部分<a href="#SEC96"><code>tar</code>执行增量转储</a> 。
</p>
<p>但是请注意<samp>`--sparse'</samp>选项可能会带来严重的缺陷。即，为了确定文件中孔的位置<code>tar</code>在尝试将其存档之前，可能必须先读取它，因此，该文件可能总共被读取了<strong>两次</strong> 。当您的操作系统或FS在<em>lseek</em>中不支持<em>SEEK_HOLE / SEEK_DATA</em>功能时，可能会发生这种情况（请参阅<samp>`--hole-detection'</samp> ，如下）。
</p>
<a name="IDX528"></a>
<p>使用时<samp>`POSIX'</samp>存档格式， <acronym>GNU</acronym> <code>tar</code>能够以三种不同的方式（称为<em>稀疏格式）</em>存储稀疏文件。稀疏格式由其<em>数字</em>标识，该<em>数字</em>通常由两个小数点组成，并由一个点分隔。默认情况下，格式<samp>`1.0'</samp>用来。如果出于某种原因希望使用较早的格式，则可以使用<samp>`--sparse-version'</samp>选项。
</p>
<dl compact>
<dd><a name="IDX529"></a>
</dd>
<dt> <samp>`--sparse-version=<var>version</var>'</samp></dt>
<dd><p>选择存储稀疏文件的格式。有效<var>version</var>值是： <samp>`0.0'</samp> ， <samp>`0.1'</samp>和<samp>`1.0'</samp> 。有关每种格式的详细说明，请参见<a href="#SEC190">存储稀疏文件</a> 。
</p></dd>
</dl>

<p>使用<samp>`--sparse-format'</samp>选项暗示<samp>`--sparse'</samp> 。
</p>
<dl compact>
<dd><a name="IDX530"></a>
<a name="IDX531"></a>
</dd>
<dt> <samp>`--hole-detection=<var>method</var>'</samp></dt>
<dd><p>强制执行混凝土孔检测方法。在存储稀疏文件的真实内容之前， <code>tar</code>需要收集有关文件稀疏性的知识。这是因为在开始归档文件内容之前，需要将文件的孔映射存储到tar标头中。当前，实现了两种孔检测方法：</p>
<ul>
<li> <samp>`--hole-detection=seek'</samp>在文件中寻找数据和漏洞。它使用了增强<code>lseek</code>系统调用（ <code>SEEK_HOLE</code>和<code>SEEK_DATA</code> ），它可以重用有关稀疏文件内容的文件系统知识-因此检测通常非常快。要使用此功能，您的文件系统和操作系统必须支持它。在撰写本文时（2015年），尽管该功能尚未被POSIX接受，但仍受不同操作系统的广泛支持。

</li><li> <samp>`--hole-detection=raw'</samp>归档前逐字节读取整个稀疏文件。此方法检测像连续拉伸零的孔。与以前的方法相比，它通常更慢，但更便于携带。
</li></ul>
</dd>
</dl>

<p>当没有<samp>`--hole-detection'</samp>给出了选项<code>tar</code>使用<samp>`seek'</samp> ，如果操作系统支持。
</p>
<p>使用<samp>`--hole-detection'</samp>选项暗示<samp>`--sparse'</samp> 。
</p>
<hr size="6">
<a name="Attributes"></a>
<a name="SEC138"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC137" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">8.2处理文件属性</h2>

<p>什么时候<code>tar</code>读取文件，更新文件的访问时间。为避免这种情况，请使用<samp>`--atime-preserve[=METHOD]'</samp>选项，它可以追溯地重置访问时间，也可以避免一开始就更改访问时间。
</p>
<dl compact>
<dd><a name="IDX532"></a>
</dd>
<dt> <samp>`--atime-preserve'</samp></dt>
<dt> <samp>`--atime-preserve=replace'</samp></dt>
<dt> <samp>`--atime-preserve=system'</samp></dt>
<dd><p>保留读取文件的访问时间。这仅适用于您拥有的文件，除非您具有超级用户权限。
</p>
<p><samp>`--atime-preserve=replace'</samp>在大多数系统上都可以使用，但是它还可以恢复数据修改时间并更新状态更改时间。因此，它不能与增量转储很好地交互（请参阅<a href="#SEC96">使用<code>tar</code>执行增量转储</a> ），如果其他程序在访问文件时访问文件或文件修改时间不正确，则会设置错误的访问时间或数据修改时间<code>tar</code>在跑。
</p>
<p><samp>`--atime-preserve=system'</samp>如果操作系统支持，则避免一开始就更改访问时间。不幸的是，这可能会或可能不会在任何给定的操作系统或文件系统上运行。如果<code>tar</code>知道它肯定行不通，立即抱怨。
</p>
<p>目前<samp>`--atime-preserve'</samp>没有操作数的默认值为<samp>`--atime-preserve=replace'</samp> ，但这旨在更改为<samp>`--atime-preserve=system'</samp>当后者得到更好的支持时。
</p>
<a name="IDX533"></a>
</dd>
<dt> <samp>`-m'</samp></dt>
<dt> <samp>`--touch'</samp></dt>
<dd><p>不要提取数据修改时间。
</p>
<p>使用此选项时， <code>tar</code>将提取的文件的数据修改时间保留为提取文件的时间，而不是将其设置为存档中记录的时间。
</p>
<p>此选项对<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p>
<a name="IDX534"></a>
</dd>
<dt> <samp>`--same-owner'</samp></dt>
<dd><p>以与存档中相同的所有权创建提取的文件。
</p>
<p>这是超级用户的默认行为，因此，当以下情况下，此选项仅对非root用户有意义： <code>tar</code>在能够释放文件的系统上执行。这被许多人视为安全缺陷，至少是因为很难正确地为用户提供他们所占用的磁盘空间的信息。另外， <code>suid</code>要么<code>sgid</code>分发文件时，文件的属性容易而无声地丢失。
</p>
<p>撰写档案时， <code>tar</code>分别写入用户<acronym>ID</acronym>和用户名。如果找不到用户名（因为用户<acronym>ID</acronym>不在<tt>`/ etc / passwd'中</tt> ），则它不会写一个。还原时，它会尝试在<tt>`/ etc / passwd'中</tt>查找名称（如果已写入）。如果失败，则使用存储在归档文件中的用户<acronym>ID</acronym> 。
</p>
<a name="IDX535"></a>
</dd>
<dt> <samp>`--no-same-owner'</samp></dt>
<dt> <samp>`-o'</samp></dt>
<dd><p>提取时请勿尝试恢复所有权。这是普通用户的默认行为，因此此选项仅对超级用户有效。
</p>
<a name="IDX536"></a>
</dd>
<dt> <samp>`--numeric-owner'</samp></dt>
<dd><p>的<samp>`--numeric-owner'</samp>该选项允许（ANSI）存档写入时不包含用户/组名称信息，或者在提取时忽略此类信息。它有效地禁用了用户/组名称信息的生成和/或使用。该选项强制使用存档中的数字ID提取数据，而忽略名称。
</p>
<p>例如，在某些情况下，使用不同的passwd / group文件从紧急软盘恢复备份时，这很有用。如果在提取过程中使用的密码文件与属于要提取的文件系统的口令文件不匹配，则不可能提取具有正确所有权的文件。例如，如果您是在严重崩溃后还原文件并且从没有密码文件的紧急软盘启动的，或者将磁盘放入另一台计算机进行还原，则发生这种情况。
</p>
<p>数字ID <em>始终</em>保存到<code>tar</code>档案。标识名称是在系统提供时在创建时添加的，除非<samp>`--format=oldgnu'</samp>用来。使用集中管理将数字ID归因于用户和组时，在一组计算机之间移动归档时可以使用数字ID。这通常是通过使用NIS功能实现的。
</p>
<p>制作一个<code>tar</code>文件分发到其他站点，有时更干净的做法是对分发中的所有文件使用单个所有者，而更好地指定文件中存储的文件的写许可权，而不考虑文件在文件系统上的实际值。准备干净分发的方法通常是使用一些Makefile规则创建目录，复制该目录中所有需要的文件，然后根据需要设置所有权和权限（有很多可能的方案），然后再进行<code>tar</code>在清除所有内容之前，请从此目录中存档。当然，我们可以向<acronym>GNU</acronym>添加很多选项<code>tar</code>用于微调权限和所有权。我认为这不是好方法。<acronym>GNU</acronym> <code>tar</code>已经有很多选择，而且，上述方法已经为您提供了很多控制权。
</p>
<a name="IDX537"></a>
<a name="IDX538"></a>
</dd>
<dt> <samp>`-p'</samp></dt>
<dt> <samp>`--same-permissions'</samp></dt>
<dt> <samp>`--preserve-permissions'</samp></dt>
<dd><p>提取所有保护信息。
</p>
<p>此选项导致<code>tar</code>完全按照存档中的记录设置提取文件的模式（访问权限）。如果不使用此选项，则当前<code>umask</code>设置限制了对提取文件的权限。默认情况下，启用此选项<code>tar</code>由超级用户执行。
</p>

<p>此选项对<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p></dd>
</dl>

<hr size="6">
<a name="Portability"></a>
<a name="SEC139"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC138" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC140" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">8.3制作<code>tar</code>档案更便携</h2>

<p>创建一个<code>tar</code>存档在特定的系统上，以便以后在许多其他计算机上以及其他版本的计算机上有用<code>tar</code>比您想象的更具挑战性。 <code>tar</code>自Unix的第一个版本以来，归档格式一直在发展。许多这样的格式存在，并且并不总是彼此兼容。本节讨论一些问题，并提供一些有关制作的建议。 <code>tar</code>档案更加便携。
</p>
<p>一个黄金法则是简单。例如，限制您的<code>tar</code>归档文件仅包含常规文件和目录，避免使用其他类型的特殊文件。不要尝试这样保存稀疏文件或连续文件。让我们依次讨论其他一些问题。
</p>
<p>请参阅<cite>以GNU和PAX格式讨论GNU扩展（增量备份，多卷归档和归档标签）。</cite>
</p>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC140">8.3.1可移植名称</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC141">8.3.2符号链接</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC142">8.3.3硬链接</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC143">8.3.4旧的V7档案</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC144">8.3.5 Ustar存档格式</a></td><td>  </td><td align="left" valign="top">Ustar档案</td></tr>
<tr><td align="left" valign="top"><a href="#SEC145">8.3.6 <acronym>GNU</acronym>和旧的<acronym>GNU</acronym> <code>tar</code>格式</a></td><td>  </td><td align="left" valign="top">GNU和旧的GNU格式档案。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC146">8.3.7 <acronym>GNU</acronym> <code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a></td><td>  </td><td align="left" valign="top">                       <acronym>POSIX</acronym>档案</td></tr>
<tr><td align="left" valign="top"><a href="#SEC148">8.3.8校验和问题</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC149">8.3.9大或负值</a></td><td>  </td><td align="left" valign="top">大文件，负时间戳等</td></tr>
<tr><td align="left" valign="top"><a href="#SEC150">8.3.10如何使用其他方法提取GNU特定数据<code>tar</code>实作</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Portable-Names"></a>
<a name="SEC140"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC139" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC141" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.1可移植名称</h3>

<p>使用可移植文件名和成员名。如果名称仅包含<acronym>ASCII</acronym>字母和数字，则该名称是可移植的， <samp>`/'</samp> ， <samp>`.'</samp> ， <samp>`_'</samp>和<samp>`-'</samp> ;它不能为空，开始于<samp>`-'</samp>要么<samp>`//'</samp>或包含<samp>`/-'</samp> 。避免深层目录嵌套。为了可移植到旧的Unix主机，请将文件名组件限制为14个字符或更少。
</p>
<p>如果您打算拥有<code>tar</code>要在MSDOS下读取的压缩文件，您不应该依赖于区分大小写的文件名，并且可以使用<acronym>GNU</acronym> <code>doschk</code>该程序可帮助您进一步诊断非法的MSDOS名称，该名称甚至比System V的名称更为有限。
</p>
<hr size="6">
<a name="dereference"></a>
<a name="SEC141"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC140" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC142" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.2符号链接</h3>

<p>通常，什么时候<code>tar</code>归档一个符号链接，它将一个块写入到归档中，命名链接的目标。这样， <code>tar</code>存档是文件系统内容的忠实记录。什么时候<samp>`--dereference'</samp> （ <samp>`-h'</samp> ）与<samp>`--create'</samp> （ <samp>`-c'</samp> ）， <code>tar</code>存档符号链接指向的文件，而不是链接本身。
</p>
<p>创建便携式档案时，请使用<samp>`--dereference'</samp> （ <samp>`-h'</samp> ）：某些系统不支持符号链接，此外，如果您的发行版包含未解析的符号链接，则可能无法使用。
</p>
<p>从档案中读取时， <samp>`--dereference'</samp> （ <samp>`-h'</samp> ）选项原因<code>tar</code>在以下情况下遵循已经存在的符号链接<code>tar</code>写入或读取档案中命名的文件。通常<code>tar</code>不会跟随这样的链接，尽管它可能会在写入新文件之前删除该链接。请参阅<a href="#SEC77">选项控制现有文件的覆盖</a> 。
</p>
<p>的<samp>`--dereference'</samp>如果不受信任的用户可以在以下情况下修改目录，则该选项不安全<code>tar</code>在跑。请参阅“ <a href="#SEC176">安全性”</a>部分。
</p>
<hr size="6">
<a name="hard-links"></a>
<a name="SEC142"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC141" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC143" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.3硬链接</h3>

<p>通常，什么时候<code>tar</code>归档一个硬链接，它将一个块写入到归档中，命名链接的目标（一个<samp>`1'</samp>类型块）。这样，实际文件内容仅在文件中存储一次。例如，考虑以下两个文件：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ ls -l
-rw-r--r-- 2 gray staff 4 2007-10-30 15:11 one
-rw-r--r-- 2 gray staff 4 2007-10-30 15:11 jeden
</pre></td></tr></tbody></table>
<p>在这里， <tt>“ jeden”</tt>是到<tt>“ one”</tt>的链接。使用详细级别2归档此目录时，将获得类似于以下内容的输出：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ tar cvvf ../archive.tar .
drwxr-xr-x gray/staff        0 2007-10-30 15:13 ./
-rw-r--r-- gray/staff        4 2007-10-30 15:11 ./jeden
hrw-r--r-- gray/staff        0 2007-10-30 15:11 ./one link to ./jeden
</pre></td></tr></tbody></table>
<p>最后一行显示，不是存储文件的两个副本， <code>tar</code>只能以<tt>“ jeden”</tt>的名称存储一次，并以<tt>“</tt>硬”链接存储文件<tt>“ one”</tt> 。
</p>
<p>重要的是要知道，到给定文件的所有硬链接都存储在存档中。例如，这对于精确复制文件系统可能是必需的。以下选项可以做到这一点：</p>
<dl compact>
<dd><a name="IDX539"></a>
</dd>
<dt> <samp>`--check-links'</samp></dt>
<dt> <samp>`-l'</samp></dt>
<dd><p>检查为每个已处理文件转储的链接数。如果此数字与文件的硬链接总数不匹配，请打印警告消息。
</p></dd>
</dl>

<p>例如，尝试仅使用此选项归档文件<tt>“ jeden”</tt>会产生以下诊断：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ tar -c -f ../archive.tar -l jeden
tar: Missing links to 'jeden'.
</pre></td></tr></tbody></table>
<p>尽管为硬链接创建特殊记录有助于保持文件系统内容的真实记录并使档案更加紧凑，但是从档案中提取单个成员时可能会遇到一些困难。例如，尝试从前面的示例中创建的档案中提取文件<tt>“ one”</tt>会在没有文件<tt>“ jeden”</tt>的情况下产生：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ tar xf archive.tar ./one
tar: ./one: Cannot hard link to './jeden': No such file or directory
tar: Error exit delayed from previous errors
</pre></td></tr></tbody></table>
<p>这种现象的原因是<code>tar</code>无法在档案中找回前一个成员（在本例中为<tt>“ one”</tt> ）以将其提取<a name="DOCF22" href="#FOOT22">（22）</a> 。如果希望以更大的存档为代价避免此类问题，请使用以下选项：</p>
<dl compact>
<dd><a name="IDX540"></a>
</dd>
<dt> <samp>`--hard-dereference'</samp></dt>
<dd><p>取消引用硬链接并存储它们引用的文件。
</p></dd>
</dl>

<p>例如，在我们的两个样本文件上尝试使用此选项，我们在存档中获得了两个副本，然后可以分别提取每个副本：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ tar -c -vv -f ../archive.tar --hard-dereference .
drwxr-xr-x gray/staff        0 2007-10-30 15:13 ./
-rw-r--r-- gray/staff        4 2007-10-30 15:11 ./jeden
-rw-r--r-- gray/staff        4 2007-10-30 15:11 ./one
</pre></td></tr></tbody></table>
<hr size="6">
<a name="old"></a>
<a name="SEC143"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC142" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC144" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.4旧的V7档案</h3>

<p>的某些旧版本<code>tar</code>无法处理较新的记录的其他信息<code>tar</code>程式。要创建V7格式（非ANSI）的档案，这些旧版本可以读取，请指定<samp>`--format=v7'</samp>选项与<samp>`--create'</samp> （ <samp>`-c'</samp> ）（ <code>tar</code>也接受<samp>`--portability'</samp>要么<samp>`--old-archive'</samp>对于此选项）。当您指定它时， <code>tar</code>保留有关目录，管道，fifos，连续文件和设备文件的信息，并通过组和用户ID而不是组和用户名指定文件所有权。
</p>
<p>更新档案时，请勿使用<samp>`--format=v7'</samp>除非归档文件是使用此选项创建的。
</p>
<p>在大多数情况下， <em>旧的</em>文件可以读取<em>新</em>格式的档案<code>tar</code>程序没有严重的麻烦，因此很少需要此选项。另一方面，最现代的<code>tar</code>能够读取旧格式的档案，因此始终使用它可能更安全<samp>`--format=v7'</samp>为您的发行。但是请注意， <samp>`ustar'</samp>格式是更好的选择，因为它没有很多<samp>`v7'</samp>的弊端。
</p>
<hr size="6">
<a name="ustar"></a>
<a name="SEC144"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC143" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC145" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.5 Ustar存档格式</h3>

<p><acronym>POSIX</acronym> .1-1988规范定义的存档格式称为<code>ustar</code> 。尽管它比V7格式更灵活，但是它仍然有很多限制（请参阅<a href="#SEC133">ustar</a>部分，以获取有关V7格式的详细说明<code>ustar</code>格式）。随着V7格式， <code>ustar</code>格式对于打算与其他实现方式一起读取的档案是一个不错的选择<code>tar</code> 。
</p>
<p>在以下位置创建档案<code>ustar</code>格式，请使用<samp>`--format=ustar'</samp>结合选择<samp>`--create'</samp> （ <samp>`-c'</samp> ）。
</p>
<hr size="6">
<a name="gnu"></a>
<a name="SEC145"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC144" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC146" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.6 <acronym>GNU</acronym>和旧的<acronym>GNU</acronym> <code>tar</code>格式</h3>

<p><acronym>GNU</acronym> <code>tar</code>基于<acronym>POSIX</acronym> 1003.1的早期草案<code>ustar</code>标准。<acronym>GNU</acronym>扩展<code>tar</code> ，例如对文件名超过100个字符的支持，请使用<code>tar</code>在该<acronym>POSIX</acronym>草案中指定为未使用的标头记录。<acronym>POSIX中的</acronym>后续更改为其他目的分配了标头记录的相同部分。结果， <acronym>GNU</acronym> <code>tar</code>格式与当前的<acronym>POSIX</acronym>规范以及<code>tar</code>之后的程序。
</p>
<p>在大多数情况下， <code>tar</code>将默认配置为创建此格式。由于我们计划<samp>`POSIX'</samp>格式化默认值。
</p>
<p>强制创建<acronym>GNU</acronym> <code>tar</code>存档，使用选项<samp>`--format=gnu'</samp> 。
</p>
<hr size="6">
<a name="posix"></a>
<a name="SEC146"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC145" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC147" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.7 <acronym>GNU</acronym> <code>tar</code>和<acronym>POSIX</acronym> <code>tar</code> </h3>

<p>从<acronym>GNU</acronym> 1.14版本开始<code>tar</code>完全支持<acronym>POSIX.1-2001</acronym>存档。
</p>
<p>如果符合以下条件，则将创建<acronym>POSIX</acronym>兼容档案<code>tar</code>被给予<samp>`--format=posix'</samp> （ <samp>`--format=pax'</samp> ） 选项。从<acronym>POSIX</acronym>归档中读取和提取不需要特殊选项。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC147">8.3.7.1控制扩展头关键字</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="PAX-keywords"></a>
<a name="SEC147"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC146" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC148" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC146" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">8.3.7.1控制扩展头关键字</h4>

<dl compact>
<dd><a name="IDX541"></a>
</dd>
<dt> <samp>`--pax-option=<var>keyword-list</var>'</samp></dt>
<dd><p>处理<acronym>PAX</acronym>扩展标题中的关键字。此选项等效于<samp>`-o'</samp>的选项<code>pax</code>效用。
</p></dd>
</dl>

<p><var>Keyword-list</var>是关键字选项的逗号分隔列表，每个关键字选项采用以下形式之一：</p>
<dl compact>
<dt> <code>delete=<var>pattern</var></code></dt>
<dd><p>与存档创建命令之一一起使用时，此选项指示<code>tar</code>从扩展头记录中忽略它会产生与字符串匹配的任何关键字<var>pattern</var> 。
</p>
<p>在提取或列表模式下使用时，此选项指示tar忽略与给定关键字匹配的所有关键字<var>pattern</var>在扩展头记录中。在这两种情况下，都使用<acronym>POSIX 1003.2、3.13中</acronym>描述的模式匹配符号执行匹配（请参见<a href="#SEC112">通配符模式和匹配部分</a> ）。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--pax-option delete=security.*
</pre></td></tr></tbody></table>
<p>会抑制与安全性有关的信息。
</p>
</dd>
<dt> <code>exthdr.name=<var>string</var></code></dt>
<dd>
<p>该关键字允许用户控制写入扩展头的ustar头块中的名称。名称来自<var>string</var>在进行以下替换之后：</p>
<table>
<thead><tr><th><p>元字符</p></th><th><p>取而代之</p></th></tr></thead>
<tbody><tr><td><p>％d</p></td><td><p>文件的目录名称，等效于<code>dirname</code>实用程序上已翻译的文件名。
</p></td></tr>
<tr><td><p>％F</p></td><td><p>删除目录信息的文件名，等同于<code>basename</code>实用程序上已翻译的文件名。
</p></td></tr>
<tr><td><p>％p</p></td><td><p>的进程<acronym>ID</acronym> <code>tar</code>处理。
</p></td></tr>
<tr><td><p>%%</p></td><td><p>一种<samp>`%'</samp>字符。
</p></td></tr>
</tbody></table>

<p>任何其他<samp>`%'</samp>中的字符<var>string</var>产生不确定的结果。
</p>
<p>如果没有选择<samp>`exthdr.name=string'</samp>被指定<code>tar</code>将使用以下默认值：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">%d/PaxHeaders.%p/%f
</pre></td></tr></tbody></table>
</dd>
<dt> <code>exthdr.mtime=<var>value</var></code></dt>
<dd>
<p>此关键字定义了<samp>`mtime'</samp>扩展头的ustar头块中写入的字段。默认情况下， <samp>`mtime'</samp>字段设置为该扩展标头描述的存档成员的修改时间（或设置为<samp>`--mtime'</samp>选项（如果提供）。
</p>
</dd>
<dt> <code>globexthdr.name=<var>string</var></code></dt>
<dd><p>此关键字允许用户控制写入全局扩展头记录的ustar头块中的名称。名称是从以下内容获得的<var>string</var> ，进行以下替换后：</p>
<table>
<thead><tr><th><p>元字符</p></th><th><p>取而代之</p></th></tr></thead>
<tbody><tr><td><p>％n</p></td><td><p>一个整数，表示存档中全局扩展头记录的序列号，从1开始。
</p></td></tr>
<tr><td><p>％p</p></td><td><p>的进程<acronym>ID</acronym> <code>tar</code>处理。
</p></td></tr>
<tr><td><p>%%</p></td><td><p>一种<samp>`%'</samp>字符。
</p></td></tr>
</tbody></table>

<p>任何其他<samp>`%'</samp>中的字符<var>string</var>产生不确定的结果。
</p>
<p>如果没有选择<samp>`globexthdr.name=string'</samp>被指定<code>tar</code>将使用以下默认值：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$TMPDIR/GlobalHead.%p.%n
</pre></td></tr></tbody></table>

<p>哪里<samp>`$TMPDIR'</samp>代表<var>TMPDIR</var>环境变量。如果<var>TMPDIR</var>没有设置<code>tar</code>用途<samp>`/tmp'</samp> 。
</p>
</dd>
<dt> <code>globexthdr.mtime=<var>value</var></code></dt>
<dd>
<p>此关键字定义了<samp>`mtime'</samp>写入全局扩展标头的ustar标头块中的字段。默认情况下， <samp>`mtime'</samp>字段设置为时间<code>tar</code>被调用。
</p>
</dd>
<dt> <code><var>keyword</var>=<var>value</var></code></dt>
<dd><p>与存档创建命令之一一起使用时，这些关键字/值对将包含在存档的开头的全局扩展头记录中。与档案读取命令之一一起使用时， <code>tar</code>的行为就像在全局扩展头记录中的存档开头遇到了这些关键字/值对。
</p>
</dd>
<dt> <code><var>keyword</var>:=<var>value</var></code></dt>
<dd><p>与存档创建命令之一一起使用时，这些关键字/值对将作为记录包含在每个文件扩展头的开头。这实际上等效于<var>keyword</var> = <var>value</var>表单，但不创建全局扩展头记录。
</p>
<p>与档案读取命令之一一起使用时， <code>tar</code>这些关键字/值对将作为记录包含在每个扩展标题的末尾；因此，它们将覆盖具有相同名称的所有全局或特定于文件的扩展头记录关键字。例如，在命令中：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">tar --format=posix --create \
    --file archive --pax-option gname:=user .
</pre></td></tr></tbody></table>
<p>对于存档中存储的所有文件，组名将被强制为新值。
</p></dd>
</dl>

<p>以上述任何形式， <var>value</var>可以是用大括号括起来的字符串。在这种情况下，括号之间的字符串可以理解为<a href="#SEC121">日期输入格式中</a>描述的文本时间表示形式，也可以理解为以以下内容开头的现有文件名<samp>`/'</samp>要么<samp>`.'</samp> 。在后一种情况下，将使用该文件的修改时间。
</p>
<p>例如，要将所有修改时间设置为当前日期，请使用以下选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--pax-option='mtime:={now}'
</pre></td></tr></tbody></table>
<p>请注意引用该选项的参数。
</p>
<a name="IDX542"></a>
<a name="IDX543"></a>
<p>再举一个例子，以下选项可确保使用它创建的任何两个档案如果具有相同的内容将是二进制等效的：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--pax-option=exthdr.name=%d/PaxHeaders/%f,atime:=0
</pre></td></tr></tbody></table>

<p>如果从此类存档中提取文件并从中重新创建存档，则还需要消除由于ctime引起的更改，如下例所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--pax-option=exthdr.name=%d/PaxHeaders/%f,atime:=0,ctime:=0
</pre></td></tr></tbody></table>

<p>要么</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">--pax-option=exthdr.name=%d/PaxHeaders/%f,atime:=0,delete=ctime
</pre></td></tr></tbody></table>
<hr size="6">
<a name="Checksumming"></a>
<a name="SEC148"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC147" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC149" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.8校验和问题</h3>

<p>SunOS和HP-UX <code>tar</code>无法接受使用<acronym>GNU</acronym>创建的档案<code>tar</code>并包含非<acronym>ASCII</acronym>文件名，即文件名的字符设置为第八位，因为它们使用带符号的校验和，而<acronym>GNU</acronym> <code>tar</code>根据<acronym>POSIX</acronym>标准，在创建归档文件时使用未签名的校验和。阅读时， <acronym>GNU</acronym> <code>tar</code>计算两个校验和并接受其中一个。令人担忧的是，很多人可能会使用错误的（或至少是非标准的）软件来备份文件，直到不知道该如何使用不兼容的文件提取器恢复丢失的文件时才了解，反之亦然。
</p>
<p><acronym>GNU</acronym> <code>tar</code>两种方式都计算校验和，并在读取时接受它们中的任何一个，因此即使<acronym>GNU</acronym> tar的校验和错误，也可以读取Sun磁带。<acronym>GNU</acronym> <code>tar</code>产生标准校验和，但是，与Sun产生了不兼容性。也就是说， <acronym>GNU</acronym> <code>tar</code>尚未修改，以<em>产生</em>不正确的档案以供越野车读取<code>tar</code>的。有人告诉我最近的太阳<code>tar</code>现在阅读标准档案，那么也许毕竟Sun做了类似的补丁？
</p>
<p>故事似乎是当Sun首次导入时<code>tar</code>源在他们的系统上，他们重新编译了系统，却没有意识到校验和的计算方式有所不同，因为<code>char</code>在他们的编译器中。因此他们开始错误地计算校验和。当他们后来意识到自己的错误时，他们只是决定与错误保持兼容，并在之后与自己保持兼容。大概是，但我真的不知道，HP-UX选择了它们<code>tar</code>与Sun兼容的档案。当前的标准不利于Sun <code>tar</code>格式。无论如何，现在要获得SunOS和HP-UX用户的支持， <code>tar</code>能够阅读他们收到的优质档案。
</p>
<hr size="6">
<a name="Large-or-Negative-Values"></a>
<a name="SEC149"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC148" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC150" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.9大或负值</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>以上各节建议使用<samp>`oldest possible'</samp>如有疑问，请使用存档格式。但是，有时是不可能的。如果您尝试归档其元数据无法使用所需格式表示的文件，则<acronym>GNU</acronym> <code>tar</code>将显示错误消息，并忽略此类文件。然后，您将不得不切换到能够处理此类值的格式。格式摘要表（请参阅<a href="#SEC133">控制存档格式部分</a> ）将帮助您完成此操作。
</p>
<p>特别是，当尝试归档大于8GB或时间戳不在1970-01-01 00:00:00到2242-03-16 12:56:31 <small>UTC</small>范围内的文件<small>时</small> ，您将不得不在<acronym>GNU</acronym>和<acronym>POSIX</acronym>之间进行选择存档格式。在考虑选择哪种格式时，请记住， <acronym>GNU</acronym>格式使用二进制补码base-256表示法来存储不符合标准<acronym>ustar</acronym>范围的值。这样的档案通常只能由<acronym>GNU</acronym>读取<code>tar</code>实施。而且，有时即使是<acronym>GNU</acronym>也无法在其他主机上正确还原它们<code>tar</code> 。例如，对负时间戳使用二进制补码表示，并假设带符号的32位<code>time_t</code>生成无法移植到具有不同主机的存档<code>time_t</code>表示形式。
</p>
<p>另一方面，一般而言，可以通过理解较旧<acronym>ustar</acronym>格式的任何tar实现来提取<acronym>POSIX</acronym>档案。唯一的例外是大于8GB的文件。</p>
<p>请参阅<cite>描述不支持POSIX的tar如何提取<acronym>POSIX</acronym>存档。</cite>
</p>

<hr size="6">
<a name="Other-Tars"></a>
<a name="SEC150"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC149" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC151" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC139" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">8.3.10如何使用其他方法提取GNU特定数据<code>tar</code>实作</h3>

<p>在前面的部分中，您熟悉了使档案文件可移植的各种怪癖。有时您可能需要使用某些第三方提取包含特定于GNU成员的档案文件<code>tar</code>实现或旧版本的<acronym>GNU</acronym> <code>tar</code> 。当然，最好的选择是拥有<acronym>GNU</acronym> <code>tar</code>已安装，但是如果由于某种原因而无法安装，本节将说明如何不安装它。
</p>
<p>当我们谈论<em>特定</em>于<em>GNU的</em>成员时，我们指的是它们的两类：成员在多卷归档的卷之间分配，而稀疏成员在两个卷之间分配。如果存档为PAX格式，则您将始终可以恢复此类成员。另外，可以从旧的GNU格式的存档中恢复拆分成员。以下小节详细介绍了所需的过程。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC151">8.3.10.1提取在卷之间划分的成员</a></td><td>  </td><td align="left" valign="top">成员在卷之间分配</td></tr>
<tr><td align="left" valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td><td>  </td><td align="left" valign="top">稀疏成员</td></tr>
</tbody></table>

<hr size="6">
<a name="Split-Recovery"></a>
<a name="SEC151"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC150" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC152" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC150" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">8.3.10.1提取在卷之间划分的成员</h4>

<p>如果将成员拆分为多个旧GNU格式档案的卷，则大多数第三方<code>tar</code>实现将无法提取它。要提取它，请使用<code>tarcat</code>程序（请参见将<a href="#SEC167">卷串联到单个存档中</a> ）。该程序可从<a href="http://www.gnu.org/software/tar/utils/tarcat.html"><acronym>GNU获得</acronym> <code>tar</code>主页</a> 。它将多个归档卷合并为一个有效的归档。例如，如果您有三个从<tt>“ vol-1.tar”</tt>到<tt>“ vol-3.tar”的卷</tt> ，则可以执行以下操作以使用第三方提取它们<code>tar</code> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tarcat vol-1.tar vol-2.tar vol-3.tar | tar xf -</kbd>
</pre></td></tr></tbody></table>
<a name="IDX544"></a>
<p>您也可以对大多数（尽管不是全部）PAX格式存档使用此方法。但是，从PAX存档中提取拆分成员是一件容易的事，因为PAX卷的构建方式是，拆分成员的每个部分都可以通过以下方式提取到不同的文件中： <code>tar</code>不了解GNU扩展的实现。更具体地说，第一部分保留其原始名称，所有后续部分均使用以下模式命名：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">%d/GNUFileParts.%p/%f.%n
</pre></td></tr></tbody></table>

<p>符号前面<samp>`%'</samp>是具有以下含义的<em>宏字符</em> ：</p>
<table>
<thead><tr><th><p>元字符</p></th><th><p>取而代之</p></th></tr></thead>
<tbody><tr><td><p>％d</p></td><td><p>文件的目录名称，等效于<code>dirname</code>实用程序的全名。
</p></td></tr>
<tr><td><p>％F</p></td><td><p>文件的文件名，等同于结果<code>basename</code>实用程序的全名。
</p></td></tr>
<tr><td><p>％p</p></td><td><p>的进程<acronym>ID</acronym> <code>tar</code>创建档案的过程。
</p></td></tr>
<tr><td><p>％n</p></td><td><p>此特定部分的序号。
</p></td></tr>
</tbody></table>

<p>例如，如果在归档创建期间将文件<tt>“ var / longfile”</tt>拆分为三个卷，则创建者<code>tar</code>进程具有进程<acronym>ID</acronym> <samp>`27962'</samp> ，则成员名称将为：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">var/longfile
var/GNUFileParts.27962/longfile.1
var/GNUFileParts.27962/longfile.2
</pre></td></tr></tbody></table>
<p>当您使用第三方提取存档时<code>tar</code> ，这些文件将在您的磁盘上创建，将文件恢复为原始格式所需执行的唯一操作是以正确的顺序将它们连接起来，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>cd var</kbd>
$ <kbd>cat GNUFileParts.27962/longfile.1 \
  GNUFileParts.27962/longfile.2 &gt;&gt; longfile</kbd>
$ rm -f GNUFileParts.27962
</pre></td></tr></tbody></table>
<p>注意，如果<code>tar</code>您使用的实现支持PAX格式档案，因此在提取过程中可能会发出有关未知关键字的警告。它们将如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">Tar file too small
Unknown extended header keyword 'GNU.volume.filename' ignored.
Unknown extended header keyword 'GNU.volume.size' ignored.
Unknown extended header keyword 'GNU.volume.offset' ignored.
</pre></td></tr></tbody></table>

<p>您可以放心地忽略这些警告。
</p>
<p>如果你的<code>tar</code>实施不支持PAX，您将在磁盘上收到更多警告和更多文件，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar xf vol-1.tar</kbd>
var/PaxHeaders.27962/longfile: Unknown file type 'x', extracted as
normal file
Unexpected EOF in archive
$ <kbd>tar xf vol-2.tar</kbd>
tmp/GlobalHead.27962.1: Unknown file type 'g', extracted as normal file
GNUFileParts.27962/PaxHeaders.27962/sparsefile.1: Unknown file type
'x', extracted as normal file
</pre></td></tr></tbody></table>
<p>忽略这些警告。创建的<tt>“ PaxHeaders。*”</tt>目录将包含带有<em>扩展标题关键字的</em>文件，这些<em>关键字</em>描述了提取的文件。您可以删除它们，除非它们描述了稀疏成员。进一步阅读以了解有关它们的更多信息。
</p>
<hr size="6">
<a name="Sparse-Recovery"></a>
<a name="SEC152"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC151" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC153" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC150" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h4 class="subsubsection">8.3.10.2提取稀疏成员</h4>

<p>任何<code>tar</code>实现将能够从PAX存档中提取稀疏成员。但是，提取的文件将被<em>压缩</em> ，即，将从其中删除任何零块。当我们加入零块（或<em>空穴</em> ）回到原来的位置恢复这样一个浓缩的文件，以它原始的形式，我们称这个过程为<em>扩大</em>压缩稀疏文件。
</p>
<a name="IDX545"></a>
<p>要扩展文件，您将需要一个简单的辅助程序，名为<code>xsparse</code> 。它可以从<a href="http://www.gnu.org/software/tar/utils/xsparse.html"><acronym>GNU</acronym></a>以源代码形式获得<a href="http://www.gnu.org/software/tar/utils/xsparse.html"><code>tar</code>主页</a> 。
</p>
<a name="IDX546"></a>
<p>让我们从<em>稀疏格式版本1.0</em> <a name="DOCF23" href="#FOOT23">（23）开始</a> ，它最容易扩展。压缩文件将同时包含文件映射和文件数据，因此无需其他数据即可还原它。如果原始文件名是<tt>` <var>dir</var> / <var>name</var> '</tt> ，那么压缩文件将被命名为<tt>` <var>dir</var> / GNUSparseFile。 <var>n</var> / <var>name</var> '</tt> ，在哪里<var>n</var>是十进制数<a name="DOCF24" href="#FOOT24">（24）</a> 。
</p>
<p>要展开1.0版文件，请运行<code>xsparse</code>如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse <tt>`cond-file'</tt></kbd>
</pre></td></tr></tbody></table>

<p>其中<tt>`cond-file'</tt>是压缩文件的名称。该实用程序将使用以下算法推导生成的扩展文件的名称：</p>
<ol>
<li>如果<tt>`cond-file'</tt>不包含任何目录，将使用<tt>`../cond-file'</tt> ;</li><li>如果<tt>`cond-file'</tt>的格式为<tt>` <var>dir</var> / <var>t</var> / <var>name</var> '</tt> ，两者都<var>t</var>和<var>name</var>是简单的名字，没有<samp>`/'</samp>其中的字符，输出文件名将为<tt>` <var>dir</var> / <var>name</var> '</tt> 。

</li><li>否则，如果<tt>`cond-file'</tt>的格式为<tt>` <var>dir</var> / <var>name</var> '</tt> ，输出文件名将为<tt>` <var>name</var> '</tt> 。
</li></ol>

<p>在不太可能的情况下，此算法不符合您的需要时，您可以显式指定输出文件名作为命令的第二个参数：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse <tt>`cond-file'</tt> <tt>`out-file'</tt></kbd>
</pre></td></tr></tbody></table>
<p>跑步通常是个好主意<code>xsparse</code>首先在<em>空运行</em>模式下。在这种模式下，该命令实际上并不扩展文件，而是详细列出了将要执行的所有操作。空运行模式通过以下方式启用<samp>`-n'</samp>命令行参数：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse -n /home/gray/GNUSparseFile.6058/sparsefile</kbd>
Reading v.1.0 sparse map
Expanding file '/home/gray/GNUSparseFile.6058/sparsefile' to
'/home/gray/sparsefile'
Finished dry run
</pre></td></tr></tbody></table>
<p>要实际扩展文件，可以运行：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse /home/gray/GNUSparseFile.6058/sparsefile</kbd>
</pre></td></tr></tbody></table>

<p>该程序的行为与所有UNIX实用程序相同：除非有重要的提示（例如错误情况或其他内容），否则它将保持安静。如果您希望它产生详细输出，类似于空运行模式下的输出，请使用<samp>`-v'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse -v /home/gray/GNUSparseFile.6058/sparsefile</kbd>
Reading v.1.0 sparse map
Expanding file '/home/gray/GNUSparseFile.6058/sparsefile' to
'/home/gray/sparsefile'
Done
</pre></td></tr></tbody></table>
<p>此外，如果您的<code>tar</code>实现提取了此文件的<em>扩展头</em> ，您可以指示<code>xstar</code>使用它们以验证扩展文件的完整性。选项<samp>`-x'</samp>设置要使用的扩展头文件的名称。继续我们的示例：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse -v -x /home/gray/PaxHeaders.6058/sparsefile \
  /home/gray/GNUSparseFile.6058/sparsefile</kbd>
Reading extended header file
Found variable GNU.sparse.major = 1
Found variable GNU.sparse.minor = 0
Found variable GNU.sparse.name = sparsefile
Found variable GNU.sparse.realsize = 217481216
Reading v.1.0 sparse map
Expanding file '/home/gray/GNUSparseFile.6058/sparsefile' to
'/home/gray/sparsefile'
Done
</pre></td></tr></tbody></table>
<p><a name="extracting-sparse-v0x"></a><a name="IDX547"></a><a name="IDX548"></a> <em>扩展头</em>是特殊的<code>tar</code>存档头位于存档成员之前，并且包含一组<em>变量</em> ，描述了不能存储在标准中的成员属性<code>ustar</code>标头。虽然对于扩展稀疏版本1.0成员是可选的，但是在以较旧的稀疏格式v.0.0和v.0.1扩展稀疏成员时，必须使用扩展标头（稀疏格式在<a href="#SEC190">Storing Sparse Files</a>中详细介绍）。因此，对于这些格式，问题是：如何从存档中获取扩展头？
</p>
<p>如果您使用<code>tar</code>由于不支持PAX格式的实现，每个成员的扩展头都将提取为单独的文件。如果我们将成员名称表示为<tt>` <var>dir</var> / <var>name</var> '</tt> ，那么扩展头文件将被命名为<tt>` <var>dir</var> / PaxHeaders。 <var>n</var> / <var>name</var> '</tt> ，在哪里<var>n</var>是一个整数。
</p>
<p>如果您的事情变得更加困难<code>tar</code>实现确实支持PAX标头，因为在这种情况下，您将必须手动提取标头。我们建议以下算法：</p>
<ol>
<li>请查阅您的文档<code>tar</code>一个选项的实现，该选项可打印<em>块编号</em>以及存档列表（类似于<acronym>GNU</acronym> <code>tar</code>的<samp>`-R'</samp>选项）。例如， <code>star</code>拥有<samp>`-block-number'</samp> 。

</li><li>使用获取详细列表<samp>`block number'</samp>选项，并找到所讨论的稀疏成员和紧随其后的成员的块号。例如，跑步<code>star</code>在我们的档案中，我们获得：<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>star -t -v -block-number -f arc.tar</kbd>
&hellip;
star: Unknown extended header keyword 'GNU.sparse.size' ignored.
star: Unknown extended header keyword 'GNU.sparse.numblocks' ignored.
star: Unknown extended header keyword 'GNU.sparse.name' ignored.
star: Unknown extended header keyword 'GNU.sparse.map' ignored.
block        56:  425984 -rw-r--r--  gray/users Jun 25 14:46 2006 GNUSparseFile.28124/sparsefile
block       897:   65391 -rw-r--r--  gray/users Jun 24 20:06 2006 README
&hellip;
</pre></td></tr></tbody></table>

<p>（通常，请忽略有关未知关键字的警告。）
</p>
</li><li>让<var>size</var>是稀疏成员的大小， <var>Bs</var>是它的块号， <var>Bn</var>是下一个成员的块号。计算：<table><tbody><tr><td> </td><td><pre class="smallexample"><var>N</var> = <var>Bs</var> - <var>Bn</var> - <var>size</var>/512 - 2
</pre></td></tr></tbody></table>

<p>该数字给出了tar <em>块中</em>扩展头部分的大小。在我们的示例中，此公式给出： <code>897 - 56 - 425984 / 512 - 2 = 7</code> 。
</p>
</li><li>使用<code>dd</code>提取标题：<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>dd if=<var>archive</var> of=<var>hname</var> bs=512 skip=<var>Bs</var> count=<var>N</var></kbd>
</pre></td></tr></tbody></table>

<p>哪里<var>archive</var>是档案名称， <var>hname</var>是用于存储扩展头的文件的名称， <var>Bs</var>和<var>N</var>在前面的步骤中计算。
</p>
<p>在我们的示例中，此命令将是</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>dd if=arc.tar of=xhdr bs=512 skip=56 count=7</kbd>
</pre></td></tr></tbody></table></li></ol>

<p>最后，您可以使用获得的标头扩展压缩文件：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>xsparse -v -x xhdr GNUSparseFile.6058/sparsefile</kbd>
Reading extended header file
Found variable GNU.sparse.size = 217481216
Found variable GNU.sparse.numblocks = 208
Found variable GNU.sparse.name = sparsefile
Found variable GNU.sparse.map = 0,2048,1050624,2048,&hellip;
Expanding file 'GNUSparseFile.28124/sparsefile' to 'sparsefile'
Done
</pre></td></tr></tbody></table>
<hr size="6">
<a name="cpio"></a>
<a name="SEC153"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC152" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC133" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">8.4比较<code>tar</code>和<code>cpio</code> </h2>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>请参阅<cite>重新整理以下材料</cite>
</p>

<p>的<code>cpio</code>存档格式，例如<code>tar</code> ，确实具有最大文件名长度。二进制和旧<acronym>ASCII</acronym>格式的最大文件长度为256，新<acronym>ASCII</acronym>和<acronym>CRC ASCII</acronym>格式的最大文件长度为1024。<acronym>GNU</acronym> <code>cpio</code>可以读写具有任意文件名长度的档案，但是其他<code>cpio</code>尝试阅读它们时，实现可能无法解释地崩溃。
</p>
<p><code>tar</code>以<acronym>BSD</acronym>附带的形式处理符号链接; <code>cpio</code>不会以SVR4之前的System V中的形式处理符号链接，并且某些供应商可能已在其系统中添加符号链接而未增强<code>cpio</code>了解他们。其他人可能会以我在Sun所做的方式以外的其他方式对其进行了增强，并且该方式已被AT＆T采纳（而且我认为它也存在于<code>cpio</code>是Berkeley从AT＆T接来的，并放入后来的<acronym>BSD</acronym>版本中-我想我给了他们我的更改）。
</p>
<p>（SVR4与<code>tar</code> ;基本上，它的<code>cpio</code>可以处理<code>tar</code>格式化输入，然后将其写入输出，它可能处理符号链接。他们可能没有为增强自己而做任何事情<code>tar</code>结果是。）
</p>
<p><code>cpio</code>处理特殊文件；传统的<code>tar</code>没有。
</p>
<p><code>tar</code>随附V7，System III，System V和<acronym>BSD</acronym>源； <code>cpio</code>仅随System III，System V和更高版本的<acronym>BSD</acronym> （4.3-tahoe和更高版本）一起提供。
</p>
<p><code>tar</code>处理文件的多个硬链接的方法可以处理支持32位i编号的文件系统（例如<acronym>BSD</acronym>文件系统）； <code>cpio</code> s方式要求您玩一些游戏（在其“二进制”格式中，i-numbers仅16位，而在其“便携式<acronym>ASCII</acronym> ”格式中，它们是18位-它必须使用“文件”标头的“系统<acronym>ID</acronym> ”字段，以确保不同文件的文件系统<acronym>ID</acronym> / i-number对始终不同），而我不知道哪个<code>cpio</code>如果有的话，玩那些游戏。那些不会混淆的人可能会认为两个文件不在同一文件中，并在它们之间建立硬链接。
</p>
<p><code>tar</code>处理文件的多个硬链接的一种方法是，仅在磁带上放置链接的一个副本，但是该副本所附的名称是您可以用来检索文件的<em>唯一</em>名称； <code>cpio</code> s方法为每个链接放置一个副本，但是您可以使用任何名称检索它。
</p>
<blockquote><p>使用什么类型的校验和（如果有），以及如何计算。
</p></blockquote>

<p>请参阅随附的手册页<code>tar</code>和<code>cpio</code>格式。
<code>tar</code>使用校验和，即校验和中的所有字节的总和<code>tar</code>文件头； <code>cpio</code>不使用校验和。
</p>
<blockquote><p>如果有人知道为什么<code>cpio</code>是何时<code>tar</code>出现在Unix现场，</p></blockquote>

<p>不是。 <code>cpio</code>首先出现在PWB / UNIX 1.0中；没有通用的UNIX版本<code>tar</code>当时。我不知道<em>AT＆T内部</em>是否普遍提供任何版本<code>tar</code> ，或者，如果有的话，AT＆T内部的人员是否<code>cpio</code>知道这一点。
</p>
<p>还原时，如果磁带损坏<code>tar</code>将会在那一点停止<code>cpio</code>将跳过它，并尝试还原其余文件。
</p>
<p>主要区别仅在于命令语法和标头格式。
</p>
<p><code>tar</code>它有点面向磁带，因为所有内容都被阻止在记录边界上开始。
</p>
<blockquote><p>两者之间恢复崩溃的存档的能力之间是否有任何区别。（是否有可能完全恢复崩溃的档案。）
</p></blockquote>

<p>从理论上讲，在<code>tar</code>因为阻止功能使您可以找到带有以下内容的标头<samp>`dd skip=<var>nn</var>'</samp> 。但是，现代<code>cpio</code>的和变体都有一个选项，可以在发生错误后重新搜索下一个文件头，并具有合理的重新同步机会。但是，许多磁带驱动器软件都不允许您继续执行介质错误，这是导致不同步的唯一原因，除非在写入存档时文件更改了大小。
</p>
<blockquote><p>如果有人知道为什么<code>cpio</code>是何时<code>tar</code>是在Unix现场出现的，请也告诉我一下。
</p></blockquote>

<p>可能是因为这样可以提高媒体效率（不阻塞所有内容，仅使用标头所需的空间， <code>tar</code>总是每个文件头使用512字节），并且知道如何归档特殊文件。
</p>
<p>您可能想看看免费提供的替代品。主要的是<code>afio</code> ， <acronym>GNU</acronym> <code>tar</code>和<code>pax</code> ，每个都有自己的扩展，并具有向后兼容性。
</p>
<p>稀疏文件是<code>tar</code>红色为稀疏文件（您可以轻松对其进行测试，因为生成的档案越来越小，并且<acronym>GNU</acronym> <code>cpio</code>无法再阅读）。
</p>
<hr size="6">
<a name="Media"></a>
<a name="SEC154"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC153" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC155" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC133" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">9。磁带和其他存档媒体</h1>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>有关磁带处理的一些特殊情况需要更详细的描述。这些特殊情况将在下面讨论。
</p>
<p>许多复杂性围绕着使用<code>tar</code>在磁带机上。由于创建和处理位于磁带上的档案是本来的原始目的， <code>tar</code> ，它包含许多功能，使这种操作更加容易。
</p>
<p>归档文件通常写在可卸式介质（磁带，盒式磁带或软盘）上。
</p>
<p>磁带或磁盘上保存的数据量不仅取决于其大小，还取决于其格式化方式。当以每英寸1600位进行格式化时，一个2400英尺长的磁带盒可容纳40兆字节的数据。物理上较小的EXABYTE盒式磁带可容纳2.3 GB。
</p>
<p>磁性媒体是可重复使用的-一旦不再需要磁带上的存档，就可以擦除存档并用完磁带或磁盘。但是，媒体质量会随着使用而恶化。大多数磁带或磁盘开始产生数据错误时应将其丢弃。当EXABYTE盒式磁带产生的<em>错误计数</em> （无法使用的位数）超过10k时，应将其丢弃。
</p>
<p>磁性介质是使用磁场写入和擦除的，应避免受到磁场的影响，以免损坏存储的数据。使用磁铁将软盘粘贴到文件柜中可能不是一个好主意。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC155">9.1设备选择和切换</a></td><td>  </td><td align="left" valign="top">设备选择和切换</td></tr>
<tr><td align="left" valign="top"><a href="#SEC156">9.2远程磁带服务器</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC157">9.3一些常见问题及其解决方案</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC158">9.4封锁</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC161">9.5一卷磁带上有许多档案</a></td><td>  </td><td align="left" valign="top">一盘磁带上有许多档案</td></tr>
<tr><td align="left" valign="top"><a href="#SEC164">9.6使用多个磁带</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC169">9.8验证存储的数据</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC170">9.9写保护</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Device"></a>
<a name="SEC155"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC154" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC156" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.1设备选择和切换</h2>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<dl compact>
<dt> <samp>`-f [<var>hostname</var>:]<var>file</var>'</samp></dt>
<dt> <samp>`--file=[<var>hostname</var>:]<var>file</var>'</samp></dt>
<dd><p>使用存档文件或设备<var>file</var>上<var>hostname</var> 。
</p></dd>
</dl>

<p>此选项用于指定档案的文件名<code>tar</code>工作。
</p>
<p>如果文件名是<samp>`-'</samp> ， <code>tar</code>从标准输入中读取档案（列出或提取时），或将其写入标准输出中（创建时）。如果<samp>`-'</samp>更新档案时会给出文件名， <code>tar</code>将从其标准输入读取原始存档，并将整个新存档写入其标准输出。
</p>
<p>如果文件名包含一个<samp>`:'</samp> ，它被解释为<samp>`hostname:file name'</samp> 。如果<var>hostname</var>包含一个<em>at</em>符号（ <samp>`@'</samp> ），它被视为<samp>`user@hostname:file name'</samp> 。在任一情况下， <code>tar</code>将调用命令<code>rsh</code> （要么<code>remsh</code> ）启动<code>/usr/libexec/rmt</code>在远程计算机上。如果您提供备用登录名，则会将其提供给<code>rsh</code> 。自然，远程机器必须具有可执行文件<code>/usr/libexec/rmt</code> 。该程序是加利福尼亚大学的免费软件，可以在以下源代码中找到源代码的副本： <code>tar</code> ;它是默认编译和安装的。配置程序包时，将确定此实用程序的确切路径。是<tt>` <var>prefix</var> / libexec / rmt'</tt> ，其中<var>prefix</var>代表您的安装前缀。也可以在运行时通过使用<samp>`--rmt-command=<var>command</var>'</samp>选项（有关此选项的详细说明，请参阅<a href="#SEC42">--rmt-command</a>部分。有关以下内容的说明，请参见“ <a href="#SEC156">远程磁带服务器”</a>部分。 <code>rmt</code>命令）。
</p>
<p>如果未提供此选项，但环境变量<code>TAPE</code>设置，使用其值；否则，旧版本的<code>tar</code>使用默认的存档名称（该名称是在<code>tar</code>被编译）。通常将默认设置为系统上的<em>第一个</em>磁带驱动器或其他可移动I / O介质。
</p>
<p>从1.11.5版开始， <acronym>GNU</acronym> <code>tar</code>使用标准输入和标准输出作为默认设备，我将不再尝试在安装时支持自动设备检测。在很多情况下，这确实失败了，这是没有希望的。现在，这完全留给了安装程序，以覆盖默认设备的标准输入和标准输出（如果可以的话）。此外，我认为<em>最</em>实际的用途<code>tar</code>是用管道或磁盘完成的，实际上不是磁带，盒式磁带或软盘。
</p>
<p>一些用户认为使用标准输入和输出遇到麻烦。如果您忘记指定输出文件名，这可能会导致屏幕上令人讨厌的意外，特别是如果您正在经过能够缓冲大量输出的网络或终端服务器时。在自动配置默认磁带的领域中，我们有很多错误报告，还有如此多矛盾的请求，以至于我们最终认为该问题非常棘手。我们当然可以使用类似<samp>`/dev/tape'</samp>缺省情况下，但这<em>也会</em>遇到各种麻烦，从挂起的进程到意外破坏真实磁带。在看到所有这些混乱之后，使用标准输入和输出作为默认设置确实听起来像是剩下的唯一干净的选择，也是一个非常有用的选择。
</p>
<p><acronym>GNU</acronym> <code>tar</code>读写记录中的存档，我怀疑这是为什么块设备比字符设备更受青睐的主要原因。很有可能，块设备也更加有效。安装程序还可以检查<samp>`DEFTAPE'</samp>在<tt>' <sys mtio.h="">'中</sys></tt> 。
</p>
<dl compact>
<dd><a name="IDX549"></a>
</dd>
<dt> <samp>`--force-local'</samp></dt>
<dd><p>存档文件是本地的，即使它包含冒号。
</p>
<a name="IDX550"></a>
</dd>
<dt> <samp>`--rsh-command=<var>command</var>'</samp></dt>
<dd><p>使用遥控器<var>command</var>代替<code>rsh</code> 。存在此选项是为了使使用标准以外的东西的人<code>rsh</code> （例如， <code>rsh</code> ）可以访问远程设备。
</p>
<p>当不使用此命令时，shell命令在<code>tar</code>改用已安装的程序。这是首次发现<tt>`/ usr / ucb / rsh'</tt> ， <tt>`/ usr / bin / remsh'</tt> ， <tt>`/ usr / bin / rsh'</tt> ， <tt>`/ usr / bsd / rsh'</tt>或<tt>`/ usr / bin / nsh'</tt> 。安装程序可能已通过定义环境变量来覆盖此设置<code>RSH</code> <em>在安装时</em> 。
</p>
</dd>
<dt> <samp>`-[0-7][lmh]'</samp></dt>
<dd><p>指定驱动器和密度。
</p>
<a name="IDX551"></a>
</dd>
<dt> <samp>`-M'</samp></dt>
<dt> <samp>`--multi-volume'</samp></dt>
<dd><p>创建/列出/提取多卷存档。
</p>
<p>此选项导致<code>tar</code>编写<em>多卷</em>存档-可能大于用于保存该存档的介质的容量。请参阅“ <a href="#SEC165">归档时间长于一个磁带或磁盘”部分</a> 。
</p>
<a name="IDX552"></a>
</dd>
<dt> <samp>`-L <var>num</var>'</samp></dt>
<dt> <samp>`--tape-length=<var>size</var>[<var>suf</var>]'</samp></dt>
<dd><p>写入后更换磁带<var>size</var>数据单位。除非<var>suf</var>给出， <var>size</var>被视为千字节，即<samp>`<var>size</var> x 1024'</samp>个字节。以下后缀可以更改此行为：</p>
<div class="float"><a name="size_002dsuffixes"></a>

<table>
<thead><tr><th><p>后缀</p></th><th><p>单位</p></th><th><p>等效字节</p></th></tr></thead>
<tbody><tr><td><p>b</p></td><td><p>积木</p></td><td><p> <var>size</var> x 512</p></td></tr>
<tr><td><p>乙</p></td><td><p>千字节</p></td><td><p> <var>size</var> x 1024</p></td></tr>
<tr><td><p>C</p></td><td><p>字节数</p></td><td><p> <var>size</var>
</p></td></tr>
<tr><td><p>G</p></td><td><p>千兆字节</p></td><td><p> <var>size</var> x 1024 ^ 3</p></td></tr>
<tr><td><p>ķ</p></td><td><p>千字节</p></td><td><p> <var>size</var> x 1024</p></td></tr>
<tr><td><p>ķ</p></td><td><p>千字节</p></td><td><p> <var>size</var> x 1024</p></td></tr>
<tr><td><p>中号</p></td><td><p>兆字节</p></td><td><p> <var>size</var> x 1024 ^ 2</p></td></tr>
<tr><td><p>P</p></td><td><p>PB</p></td><td><p> <var>size</var> x 1024 ^ 5</p></td></tr>
<tr><td><p>Ť</p></td><td><p>兆兆字节</p></td><td><p> <var>size</var> x 1024 ^ 4</p></td></tr>
<tr><td><p>w</p></td><td><p>话</p></td><td><p> <var>size</var> 2倍</p></td></tr>
</tbody></table>
</div><p><strong>表9.1：大小后缀</strong>
</p>
<p>当您的磁带驱动程序不能正确检测物理磁带的结尾时，此选项可能很有用。通过对最大磁带长度稍加保守，可以完全避免该问题。
</p>
<a name="IDX553"></a>
<a name="IDX554"></a>
</dd>
<dt> <samp>`-F <var>command</var>'</samp></dt>
<dt> <samp>`--info-script=<var>command</var>'</samp></dt>
<dt> <samp>`--new-volume-script=<var>command</var>'</samp></dt>
<dd><p>执行<var>command</var>在每个磁带的末尾。这意味着<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ）。有关此选项的详细说明，请参见<a href="#info_002dscript">info-script</a> 。
</p></dd>
</dl>

<hr size="6">
<a name="Remote-Tape-Server"></a>
<a name="SEC156"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC155" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC157" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.2远程磁带服务器</h2>

<p>为了访问远程计算机上的磁带机， <code>tar</code>使用由加州大学伯克利分校编写的远程磁带服务器。远程磁带服务器必须安装为<tt>` <var>prefix</var> / libexec / rmt'</tt>在要使用其磁带驱动器的任何计算机上。 <code>tar</code>来电<code>rmt</code>通过运行<code>rsh</code>要么<code>remsh</code>远程计算机，如果提供的话，可以选择使用其他登录名。
</p>
<p>提供了远程磁带服务器的源副本。它的源代码可以自由分发。它是默认编译和安装的。
</p>
<a name="IDX555"></a>
<p>除非您使用<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ）选项， <acronym>GNU</acronym> <code>tar</code>将不允许您创建包含绝对文件名的档案（文件名以<samp>`/'</samp> ）。如果你试试， <code>tar</code>将自动删除前导<samp>`/'</samp>从它存储在存档中的文件名开始。它还会键入警告消息，告诉您它在做什么。
</p>
<p>读取使用其他方式创建的档案时<code>tar</code>程序， <acronym>GNU</acronym> <code>tar</code>自动提取存档中具有绝对文件名的条目，就好像文件名不是绝对的一样。这是一个重要功能。这里的一位访客曾经给<code>tar</code>磁带交给操作员还原；操作员使用Sun <code>tar</code>代替<acronym>GNU</acronym> <code>tar</code> ，结果是它用磁带上的版本替换了我们的大部分<tt>“ / bin”</tt>和朋友。不用说，我们对于必须从备份磁带恢复文件系统感到不满。
</p>
<p>例如，如果归档文件包含文件<tt>`/ usr / bin / computoy'</tt> ，则<acronym>GNU</acronym> <code>tar</code>会将文件解压缩到相对于当前目录的<tt>“ usr / bin / computoy”</tt> 。如果要使用与创建存档时相同的绝对名称解压缩存档中的文件，则应执行<samp>`cd /'</samp>从档案中提取文件之前，或者您应该使用<samp>`--absolute-names'</samp>选项，或使用命令<samp>`tar -C / …'</samp> 。
</p>
<a name="IDX556"></a>
<p>某些版本的Unix（已知Ultrix 3.1会出现此问题），可以声称实际上在磁带末尾附近进行的简短写入已成功。这将导致-M选项无法正常工作。目前最好的解决方法是使用比默认值20大得多的阻塞因子。
</p>
<p>为了更新档案， <code>tar</code>必须能够退格存档，以便重新读取或重写刚刚读取（或写入）的记录。目前，仅在两种文件上才可能这样做：普通磁盘文件（或任何其他可以使用空格退格的文件） <samp>`lseek'</samp> ），以及行业标准的9轨磁带（或其他可以与<code>MTIOCTOP</code><code>ioctl</code> ）。
</p>
<p>这意味着<samp>`--append'</samp> ， <samp>`--concatenate'</samp>和<samp>`--delete'</samp>命令将不适用于任何其他类型的文件。某些介质根本无法退格，这意味着这些命令和选项将永远无法对其进行处理。这些非退格介质包括管道和盒式磁带驱动器。
</p>
<p>某些其他媒体可以退格，并且<code>tar</code>将对他们工作一次<code>tar</code>被修改为这样做。
</p>
<p>使用创建的档案<samp>`--multi-volume'</samp> ， <samp>`--label'</samp>和<samp>`--incremental'</samp> （ <samp>`-G'</samp> ）的其他版本可能无法读取该选项<code>tar</code> 。特别是，还原在卷边界上分割的文件将需要一些谨慎的工作， <code>dd</code> ，如果可以的话。其他版本<code>tar</code>可能还会创建一个名称为卷标头的空文件。的某些版本<code>tar</code>可能会创建普通文件，而不是使用<samp>`--incremental'</samp> （ <samp>`-G'</samp> ） 选项。
</p>
<hr size="6">
<a name="Common-Problems-and-Solutions"></a>
<a name="SEC157"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC156" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC158" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.3一些常见问题及其解决方案</h2>


<table><tbody><tr><td> </td><td><pre class="format">errors from system:
permission denied
no such file or directory
not owner

errors from <code>tar</code>:
directory checksum error
header format error

errors from media/system:
i/o error
device busy
</pre></td></tr></tbody></table>

<hr size="6">
<a name="Blocking"></a>
<a name="SEC158"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC157" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC159" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.4封锁</h2>

<p><em>阻止</em>和<em>记录</em>术语相当混乱，这也使专业读者感到困惑。另一方面，刚接触该领域的读者会有新的想法，他们可以安全地跳过接下来的两段，因为本手册的其余部分以相当一致的方式使用了这两个术语。
</p>
<p>约翰·吉尔摩（John Gilmore），公共领域的作家<code>tar</code>从哪个<acronym>GNU</acronym> <code>tar</code> （1995年6月）最初衍生而来：</p>
<blockquote><p>磁带机的名称来自IBM，我相信它们是为IBM 650左右而发明的。在IBM大型机上，磁带上记录的是磁带块。数据的逻辑组织已记录。有多种将记录放入块中的方法，包括<code>F</code> （固定大小的记录）， <code>V</code> （大小可变的记录）， <code>FB</code> （固定阻止：固定大小的记录， <var>n</var>到一个街区）， <code>VB</code> （可变大小的记录， <var>n</var>到一个街区）， <code>VSB</code> （可变跨区阻止：可变大小的记录可以占用多个块），等等。的<code>JCL</code><samp>`DD RECFORM='</samp>参数指定给操作系统。
</p>
<p>的Unix手册页<code>tar</code>对此完全感到困惑。当我写<code>PD TAR</code> ，我使用了历史上正确的术语（ <code>tar</code>写入数据记录，这些记录被分组为块。似乎伪造的术语使它成为了<acronym>POSIX</acronym> （在这里不足为奇），现在François也将该术语迁移回了源代码。
</p></blockquote>

<p>术语“ <em>物理块”</em>是指从设备到设备的基本传输块，在此之后，读取或写入可以停止而不会丢失任何内容。在本手册中，术语“ <em>块”</em>通常是指磁盘物理块， <em>假定</em>每个磁盘块的长度为512字节。确实有些磁盘设备具有不同的物理块，但是<code>tar</code>忽略这些差异以其自身的格式（即可移植的格式），因此<code>tar</code>块的长度始终为512个字节，并且<em>块</em>始终表示a <code>tar</code>块。<em>逻辑块</em>一词通常将许多磁盘块的基本分配块表示为单个实体，操作系统将其原子地对待。这个概念仅在<acronym>GNU中</acronym>很少使用<code>tar</code> 。
</p>
<p>术语“ <em>物理记录”</em>是表示物理块的另一种方式，这两个术语在某种程度上可以互换。在本手册中，术语“ <em>记录”</em>通常是指磁带物理块， <em>假定</em> <code>tar</code>存档保存在磁带上。确实可以将归档文件放在磁盘上或与管道一起使用，但是， <code>tar</code>无论使用哪种介质，尝试一次读取和写入存档一次<em>记录</em> 。一个记录是由整数个块，并把许多磁盘块到一个单一的磁带块的这种操作是所谓的<em>再粘连</em> ，或更简单地， <em>阻断</em> 。术语<em>逻辑记录</em>是指将许多字符组成对应用有意义的东西的逻辑组织。术语“ <em>单位记录”</em>描述了一小部分字符，这些字符整体传输到应用程序或由应用程序传输，通常指一行文本。最后两个术语与我们在<acronym>GNU中</acronym>所谓的<em>记录</em>无关<code>tar</code> 。
</p>
<p>写入磁带时<code>tar</code>以称为<em>记录的</em>块形式写档案的内容。要更改默认阻止因子，请使用<samp>`--blocking-factor=<var>512-size</var>'</samp> （ <samp>`-b <var>512-size</var>'</samp> ） 选项。每条记录将由<var>512-size</var>块。（每<code>tar</code>块是512个字节。请参阅<a href="#SEC188">基本Tar格式</a>一节。）写入存档的每个文件至少使用一个完整记录。结果，使用较大的记录大小可能会导致更多的小文件浪费空间。另一方面，通常可以更有效地读取和写入较大的记录。
</p>
<p>使问题进一步复杂化的是，某些磁带机完全忽略了阻塞。对于这些，更大的记录大小仍然可以提高性能（因为磁带机上方的软件层仍然可以实现阻塞），但是却不如可以实现阻塞的磁带驱动器那么出色。
</p>
<p>阅读档案时， <code>tar</code>通常可以自行确定记录大小。在这种情况下，并且在创建归档文件时使用了非标准的记录大小， <code>tar</code>将打印有关非标准阻塞因素的消息，然后正常运行<a name="DOCF25" href="#FOOT25">（25）</a> 。但是，在某些磁带设备上， <code>tar</code>无法确定记录大小本身。在大多数情况下，您可以指定一个阻止因素（ <samp>`--blocking-factor'</samp> ）大于实际的阻塞系数，然后使用<samp>`--read-full-records'</samp> （ <samp>`-B'</samp> ） 选项。（如果您使用<samp>`--blocking-factor'</samp>并且不要使用<samp>`--read-full-records'</samp>选项，然后<code>tar</code>不会尝试找出记录大小本身。）在某些设备上，必须始终准确指定记录大小<samp>`--blocking-factor'</samp>阅读时，因为<code>tar</code>无法弄清楚。无论如何，使用<samp>`--list'</samp> （ <samp>`-t'</samp> ）进行任何提取之前，先查看是否<code>tar</code>正在正确读取存档。
</p>
<p><code>tar</code>块都是固定大小（512字节），将其放入记录的方案是将整数（一个或多个）放入每个记录中。 <code>tar</code>记录大小都相同；在文件末尾，有一个包含全零的块，这就是您如何告诉最后一条记录的其余部分是垃圾。
</p>
<p>在标准中<code>tar</code>文件（无选项），块大小为512，记录大小为10240，阻塞因子为20。什么<samp>`--blocking-factor'</samp>选项的确是设置阻塞因子，更改记录大小，同时将块大小保留为512字节。对于古老的800或1600 bpi卷到卷磁带驱动器来说，20很好。如今，大多数磁带驱动器都喜欢更大的记录，以便流传输而不浪费磁带。例如，当我为自己编写磁带时，有些人倾向于使用2048的系数，从而使记录大小约为1兆字节。
</p>
<p>如果使用的阻塞因子大于20，则<code>tar</code>程序可能无法读取存档，因此我们建议将此限制为在实践中使用的限制。<acronym>GNU</acronym> <code>tar</code>但是，它将支持任意大的记录大小，仅受虚拟内存量或磁带设备的物理特性限制。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC159">9.4.1格式差异</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Format-Variations"></a>
<a name="SEC159"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC158" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC160" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC158" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.4.1格式差异</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>格式参数指定如何将归档文件写入归档介质。格式参数的最佳选择将取决于要归档的文件的类型和数量以及用于存储归档的介质。
</p>
<p>要在访问或创建档案时指定格式参数，可以使用以下各节中描述的选项。如果您未指定任何格式参数， <code>tar</code>使用默认参数。您不能修改压缩存档。如果您使用<samp>`--blocking-factor'</samp>选项（请参见<a href="#SEC160">“存档的阻止因素”一</a>节），在对存档进行操作时必须指定该阻止因素。有关格式参数注意事项的其他示例，请参见<a href="#SEC133">控制存档格式</a>部分。
</p>
<hr size="6">
<a name="Blocking-Factor"></a>
<a name="SEC160"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC159" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC161" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC158" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.4.2存档的阻塞因素</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<a name="IDX557"></a>
<p>归档中的数据分为512个字节的块。块以称为<em>记录的</em>整数倍读取和写入。记录中的块数（即，以512字节为单位的记录大小）称为<em>阻塞因子</em> 。的<samp>`--blocking-factor=<var>512-size</var>'</samp> （ <samp>`-b <var>512-size</var>'</samp> ）选项指定档案的阻止因素。默认的阻塞因子通常为20（即10240字节），但可以在安装时指定。要找出现有档案的阻塞因素，请使用<samp>`tar --list --file=<var>archive-name</var>'</samp> 。在某些设备上可能无法使用。
</p>
<p>记录由间隙分隔，这浪费了存档介质上的空间。如果要在磁带上进行归档，则使用较大的阻塞因子（因此可以使用更大的记录）可提供更快的吞吐量，并允许您在磁带上放入更多数据（因为间隙更少）。如果要在盒式磁带上归档，很大的阻塞系数（例如126或更大）会大大提高性能。另一方面，较小的阻塞因子在归档小文件时可能很有用，以避免将大量null归档为<code>tar</code>将档案填写到记录的末尾。通常，理想的记录大小取决于您正在使用的磁带上的记录间间隙的大小以及要归档的文件的平均大小。有关编写档案的信息，请参见<a href="#SEC17">如何创建档案</a>一节。
</p>
<p>请参阅<cite>使用阻塞系数= 126或更大的墨盒的示例。</cite>
</p>

<p>阻塞因子大于20的档案无法通过非常旧的版本读取<code>tar</code> ，或使用某些较新的版本<code>tar</code>在具有较小地址空间的旧计算机上运行。使用<acronym>GNU</acronym> <code>tar</code> ，则存档的阻塞因素仅受包含该存档的设备的最大记录大小或可用虚拟内存量的限制。
</p>
<p>此外，在某些系统上，有时由于设备驱动程序而没有使用足够的阻塞因子，可能会导致意外的诊断。例如，据报道：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">Cannot write to /dev/dlt: Invalid argument
</pre></td></tr></tbody></table>

<p>在这种情况下，有时会发生<code>tar</code>系统捆绑的包知道块大小特质，而<acronym>GNU</acronym> <code>tar</code>要求对块大小有明确的说明，无法猜测。这使一些人考虑使用<acronym>GNU</acronym> <code>tar</code>行为不正常，因为相比之下， <cite>捆绑销售商品<code>tar</code>工作正常</cite> 。新增中<kbd>-b 256</kbd> ，例如，可以解决问题。
</p>
<p>如果在创建存档时使用非默认阻止因子，则在修改该存档时必须指定相同的阻止因子。某些存档设备还要求您在读取该存档时指定阻止因素，但是通常情况并非如此。通常，您可以使用<samp>`--list'</samp> （ <samp>`-t'</samp> ）而没有指明阻碍因素- <code>tar</code>报告非默认记录大小，然后照常列出存档成员。要从具有非标准阻止因素的存档中提取文件（尤其是如果您不确定阻止因素是什么），通常可以使用<samp>`--read-full-records'</samp> （ <samp>`-B'</samp> ）选项，同时指定一个大于档案的阻塞因子的阻塞因子（即， <samp>`tar --extract --read-full-records --blocking-factor=300'</samp> ）。请参阅<a href="#SEC23">如何列出档案</a> ，以获取更多信息。 <samp>`--list'</samp> （ <samp>`-t'</samp> ）操作。有关该选项的详细说明，请参见“ <a href="#SEC73">帮助阅读档案</a>的选项”部分。
</p>
<dl compact>
<dt> <samp>`--blocking-factor=<var>number</var>'</samp></dt>
<dt> <samp>`-b <var>number</var>'</samp></dt>
<dd><p>指定归档的阻止因素。可以用于任何操作，但通常不需要<samp>`--list'</samp> （ <samp>`-t'</samp> ）。
</p></dd>
</dl>

<p>装置封锁</p>
<dl compact>
<dt> <samp>`-b <var>blocks</var>'</samp></dt>
<dt> <samp>`--blocking-factor=<var>blocks</var>'</samp></dt>
<dd><p>将记录大小设置为<em><var>blocks</var> * 512</em>字节
</p>
<p>此选项用于指定存档的<em>阻止因素</em> 。在读取或写入存档时， <code>tar</code> ，将在的记录中读取和写入档案<em><var>block</var> * 512</em>字节即使压缩了归档也是如此。某些设备要求所有写操作都必须是特定大小的倍数，因此， <code>tar</code>将档案填充到下一个记录边界。
</p>
<p>在以下情况下设置默认阻止因子<code>tar</code>已编译，通常为20。大于20的阻塞因子无法通过非常旧的版本读取<code>tar</code> ，或使用某些较新的版本<code>tar</code>在具有较小地址空间的旧计算机上运行。
</p>
<p>使用磁带，较大的记录可提供更快的吞吐量，并在磁带上容纳更多数据（因为记录间的间隙较小）。如果归档文件位于磁盘文件或管道中，则可能需要指定较小的阻塞因子，因为较大的阻塞因子将导致归档文件末尾有大量空字节。
</p>
<p>写入盒式磁带或其他流式磁带时，更大的阻塞系数（例如126或更大）将大大提高性能。但是，在读取或更新归档文件时必须指定相同的阻止因素。
</p>
<p>显然，Exabyte驱动器的物理块大小为8K字节。如果我们将块大小选择为8k字节的倍数，则问题似乎消失了。同上，我们现在使用的块大小为112，自从切换后就没有问题了……</p>
<p>使用<acronym>GNU</acronym> <code>tar</code>阻塞因素仅受包含归档文件的设备的最大记录大小或可用虚拟内存量的限制。
</p>
<p>但是，实际上在特殊情况下实际上避免了解块或重新块化，但是在特殊情况下，这需要同时满足以下所有条件：</p><ul>
<li>存档受压缩选项限制，</li><li>归档文件无法通过标准输入或输出进行处理，也无法重定向或通过管道传递，</li><li>归档文件将直接处理到本地磁盘，而不是任何特殊设备，</li><li>
<samp>`--blocking-factor'</samp>没有在上明确指定<code>tar</code>调用。
</li></ul>

<p>如果输出直接进入本地磁盘，而不是通过stdout，则最后一次写入不会扩展为完整的记录大小。否则，将发生重新阻塞。这是关于此主题的其他一些评论：</p>
<ul>
<li>
<code>gzip</code>如果要求解压缩磁带上的压缩存档，将抱怨尾随垃圾，可以选择关闭消息，但这打破了仅需使用的常规性<samp>`<var>prog</var> -d'</samp>减压。如果gzip默默忽略任何数量的尾随零，那将是很好的。我将通过向他发送此消息的副本来询问Jean-loup Gailly。

</li><li>
<code>compress</code>并没有显示出这个问题，但是正如让-卢普（Jean-loup）向迈克尔指出的那样， <samp>`compress -d'</samp>解压缩结果后静默添加垃圾，tar忽略了该垃圾，因为tar已经识别出其文件结束指示符。因此，可以安全地忽略此错误。

</li><li>
<samp>`gzip -d -q'</samp>确实不会对尾随零表示沉默，但仍会返回退出状态2（tar依次报告）。
<code>tar</code>可能会忽略返回的退出状态，但我讨厌这样做，因为它会削弱保护<code>tar</code>在减压时为用户提供其他可能的问题。如果<code>gzip</code>在这种无害的情况下默默地跳过了结尾的零<em>，</em>并且避免了设置退出状态，这将解决这种情况。

</li><li>
<code>tar</code>在遇到第一个空块时不停止读取管道时，它应该变得更加可靠。这严重破坏了管道。
<code>tar</code>在退出管道之前，应先排干管道。
</li></ul>

<a name="IDX558"></a>
</dd>
<dt> <samp>`-i'</samp></dt>
<dt> <samp>`--ignore-zeros'</samp></dt>
<dd><p>忽略存档中的零块（意味着EOF）。
</p>
<p>的<samp>`--ignore-zeros'</samp> （ <samp>`-i'</samp> ）选项原因<code>tar</code>忽略存档中的零块。通常，零块表示存档的结尾，但是当读取损坏的存档或通过将多个存档串联在一起创建的存档时，此选项允许<code>tar</code>阅读整个档案。默认情况下，此选项未启用，因为许多版本的<code>tar</code>在清零的块之后写垃圾。
</p>
<p>请注意，此选项会导致<code>tar</code>读取到存档文件的末尾，当将多个文件存储在单个物理磁带上时，有时可以避免出现问题。
</p>
<a name="IDX559"></a>
</dd>
<dt> <samp>`-B'</samp></dt>
<dt> <samp>`--read-full-records'</samp></dt>
<dd><p>阅读时重新阻塞（以读取4.2 <acronym>BSD</acronym>管道）。
</p>
<p>如果<samp>`--read-full-records'</samp>用来， <code>tar</code>如果从存档中读取记录的尝试未返回完整记录，则不会感到惊慌。代替， <code>tar</code>将继续阅读，直到获得完整的记录。
</p>
<p>默认情况下，此选项处于打开状态<code>tar</code>正在从标准输入或从远程计算机读取存档。这是因为在<acronym>BSD</acronym> Unix系统上，无论管道中有多少管道，读取的管道都将返回，尽管发生的次数很多。 <code>tar</code>要求。如果未使用此选项， <code>tar</code>一旦从管道中读取了不完整的记录，就会失败。
</p>
<p>此选项对于更新档案的命令也很有用。
</p>
</dd>
</dl>

<p>胶带阻塞</p>
<p>请参阅<cite>适当的选项应从其他位置移到此处。</cite>
</p>

<a name="IDX560"></a>
<a name="IDX561"></a>

<p>处理各种磁带或盒式磁带时，必须注意选择合适的块，即，作为磁带上的单个磁带块放在一起的磁盘块数，而不会插入磁带间隙。<em>磁带间隙</em>是<em>磁带</em>上的一个很小的着陆区域，上面没有信息，用于使磁带减速至完全停止，并在以后恢复读取或写入速度。磁带驱动器开始读取记录时，必须完整读取记录而不停止，因为需要有一个磁带间隙来停止磁带运动而又不会丢失信息。
</p>
<a name="IDX562"></a>
<a name="IDX563"></a>
<p>使用更高的阻塞（每个磁带块放入更多磁盘块）将更有效地使用磁带，因为磁带间隙会更少。但是，对于系统而言，读取此类磁带可能会更加困难，因为将需要更多的内存来一次接收整个记录。此外，如果在巨大的记录上存在读取错误，则系统成功恢复信息的可能性较小。因此，阻塞不应太低，也不应太高。 <code>tar</code>出于历史原因，默认情况下使用20的阻塞，并且在读取或写入磁盘时并不重要。当前的磁带技术将很容易容纳更高的阻塞。Sun建议将EB的阻止大小为126，DAT的阻止大小为96。有人告诉我们，对于某些DLT驱动器，阻塞应该是4Kb的倍数，最好是64Kb（ <kbd>-b 128</kbd> ）或256个（以获得不错的效果）。其他制造商可能对相同的磁带使用不同的建议。这也可能取决于现代磁带控制器内部使用的缓冲技术。有些强加了最小阻塞或最大阻塞。其他人要求阻塞是两个的指数。
</p>
<p>因此，没有固定的阻止规则。但是理想情况下，读取时的阻塞应该与写入时的阻塞相同。在一个我知道的地方，使用各种各样的设备，他们发现最好使用32块以确保其磁带可以完全互换。
</p>
<p>还告诉我，对于再生磁带，事先擦除（使用将用于创建存档的相同驱动器）有时会降低在重写时观察到的错误率。
</p>
<p>我可能还会用<samp>`--number-blocks'</samp>代替<samp>`--block-number'</samp> ，所以<samp>`--block'</samp>然后将扩展到<samp>`--blocking-factor'</samp>清楚地。
</p>
<hr size="6">
<a name="Many"></a>
<a name="SEC161"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC160" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC162" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.5一卷磁带上有许多档案</h2>

<p>请参阅<cite>适当的选项应从其他位置移到此处。</cite>
</p>

<a name="IDX564"></a>
<p>大多数磁带设备在<tt>“ / dev”</tt>目录中有两个条目，或成对出现的条目，它们的区别仅在于该设备的次要编号。让我们以<tt>`/ dev / tape'</tt>为例，它通常指向给定系统的唯一或常用磁带设备。可能有一个对应的<tt>`/ dev / nrtape'</tt>或<tt>`/ dev / ntape'</tt> 。较简单的名称是设备的<em>倒带</em>版本，而名称具有<samp>`nr'</samp>它是同一设备的<em>无倒带</em>版本。
</p>
<p>当打开或关闭此设备时，倒带设备将自动将磁带带回到其起点。以来<code>tar</code>在使用存档文件之前先打开它，然后再关闭它，这意味着一个简单的操作：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar cf /dev/tape <var>directory</var></kbd>
</pre></td></tr></tbody></table>

<p>将在保存之前和之后将磁带重新定位到开头<var>directory</var>内容，从而擦除先前的磁带内容并使之成为可能，以便任何后续的写操作都将破坏刚刚保存的内容。
</p>
<a name="IDX565"></a>
<p>因此，倒带设备通常意味着只能容纳一个文件。如果要放多个<code>tar</code>存档到给定的磁带上，则需要避免使用磁带设备的倒带版本。您还必须特别注意磁带的位置。定位错误可能会覆盖磁带上已经有价值的数据。许多人由于过去的经验而疲于奔命，他们只会使用倒带设备并将自己限制在每盘磁带一个文件内，这恰恰是为了避免发生此类错误的风险。要完全意识到，在磁带上错误的位置写会丢失所有信息，直到此刻为止，最有可能直到磁带结束为止，而且这些损坏的信息<em>也无法</em>恢复。
</p>
<p>保存<var>directory-1</var>作为磁带开头的第一个存档，并将该磁带准备用于第二个存档，则应使用：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>mt -f /dev/nrtape rewind</kbd>
$ <kbd>tar cf /dev/nrtape <var>directory-1</var></kbd>
</pre></td></tr></tbody></table>
<a name="IDX566"></a>
<p><em>磁带标记</em>是写在磁带介质上的特殊磁性图案，以后可由读取硬件识别。如果单个磁带上有多个标记，则在每个文件之后使用这些标记。空文件（即，连续两个磁带标记）表示磁带的逻辑末尾，此后不存在文件。通常，非倒带的磁带设备驱动程序将响应由发出的关闭请求<code>tar</code>首先在存档后写两个磁带标记，然后对其中一个进行退格。因此，如果此时从磁带驱动器中取出磁带，则磁带将正确终止。但是，如果您在当前位置写入另一个文件，则新信息将删除第二个磁带标记，在文件之间仅保留一个磁带标记。
</p>
<p>因此，您现在可以保存<var>directory-2</var>通过发出以下命令，在同一磁带上将第一个存档作为第二个存档：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar cf /dev/nrtape <var>directory-2</var></kbd>
</pre></td></tr></tbody></table>

<p>对于要放在同一磁带上的所有存档，依此类推。
</p>
<p>另一个常见的情况是，您并非在同一天写入所有档案，而是需要在两个档案会话之间删除并存储磁带。通常，您必须记住磁带上已经保存了多少文件。假设您的磁带上已经有16个文件，并且您准备写第17个文件。保存之前，您必须先跳过前16个磁带标记<var>directory-17</var>例如，通过使用以下命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>mt -f /dev/nrtape rewind</kbd>
$ <kbd>mt -f /dev/nrtape fsf 16</kbd>
$ <kbd>tar cf /dev/nrtape <var>directory-17</var></kbd>
</pre></td></tr></tbody></table>
<p>在前面的所有示例中，我们都将阻塞考虑放在了一边，但是您也应该为此做适当的事情。请参阅“ <a href="#SEC158">阻止”</a>部分。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC162">9.5.1胶带位置和胶带标记</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC163">9.5.2 <code>mt</code>效用</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Tape-Positioning"></a>
<a name="SEC162"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC161" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC163" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC161" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.5.1胶带位置和胶带标记</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>就像存档可以存储文件系统中的多个文件一样，磁带可以存储多个存档文件。为了跟踪存档文件（或磁带上存储的任何其他类型的文件）的开始和结束位置，磁带存档设备在存档介质上写入<em>磁带标记</em> 。磁带驱动器在文件之间写一个磁带标记，在所有文件条目的末尾写两个。
</p>
<p>如果您认为数据是一系列记录“ rrrr”的记录，而磁带标记是“ *”的记录，则磁带可能如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">rrrr*rrrrrr*rrrrr*rr*rrrrr**-------------------------
</pre></td></tr></tbody></table>
<p>磁带设备使用读/写<em>磁带头</em>读写<em>磁带，磁带头</em>是设备的物理部分，一次只能访问磁带上的一个点。使用时<code>tar</code>要从磁带设备读取或写入存档数据，无论磁带头位于哪个存档或存档的哪个部分，该设备都将从磁带头恰好在磁带上的任何位置开始读取或写入。在写入存档之前，您应确保磁带上的任何数据都不会被覆盖（除非不再需要）。在读取存档之前，应确保磁带头位于要读取的存档的开头。您可以通过手动进行操作<code>mt</code>公用事业（见第<a href="#SEC163">的<code>mt</code>实用程序</a> ）。的<code>restore</code>脚本会自动执行此操作（请参阅<a href="#SEC104">使用还原脚本部分</a> ）。
</p>
<p>如果要将新的存档文件条目添加到磁带，则应将磁带前进到现有文件条目的末尾，在最后一个磁带标记上退格，然后写入新的存档文件。如果要在上面的示例中添加两个档案，则磁带可能如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">rrrr*rrrrrr*rrrrr*rr*rrrrr*rrr*rrrr**----------------
</pre></td></tr></tbody></table>
<hr size="6">
<a name="mt"></a>
<a name="SEC163"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC162" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC164" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC161" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.5.2 <code>mt</code>效用</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>请参阅<cite>这仅在非块设备上有效吗？应该说明差异（固定或可变）。</cite>
</p>
<p>请参阅<a href="#SEC160">存档的阻塞因素</a>部分。
</p>
<p>您可以使用<code>mt</code>实用程序，用于使磁带快进或快退经过磁带上指定数量的存档文件。这样，您就可以在提取或读取档案之前将其移至档案的开头，或者在编写新档案之前将其移至所有档案的末尾。请参阅<cite>为什么没有“前进”，直到您一起找到两个胶带标记”？</cite>
</p>

<p>的语法<code>mt</code>命令是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>mt [-f <var>tapename</var>] <var>operation</var> [<var>number</var>]</kbd>
</pre></td></tr></tbody></table>
<p>哪里<var>tapename</var>是磁带设备的名称， <var>number</var>是执行操作的次数（默认为1），并且<var>operation</var>是以下之一：</p>
<p>看到<cite>记录操作有什么用吗？</cite>
</p>

<dl compact>
<dt> <samp>`eof'</samp></dt>
<dt> <samp>`weof'</samp></dt>
<dd><p>写<var>number</var>磁带标记在磁带上的当前位置。
</p>
</dd>
<dt> <samp>`fsf'</samp></dt>
<dd><p>向前移动磁带位置<var>number</var>文件。
</p>
</dd>
<dt> <samp>`bsf'</samp></dt>
<dd><p>将磁带位置移回<var>number</var>文件。
</p>
</dd>
<dt> <samp>`rewind'</samp></dt>
<dd><p>倒带。（忽略<var>number</var> ）
</p>
</dd>
<dt> <samp>`offline'</samp></dt>
<dt> <samp>`rewoff1'</samp></dt>
<dd><p>倒带，使磁带设备脱机。（忽略<var>number</var> ）
</p>
</dd>
<dt> <samp>`status'</samp></dt>
<dd><p>打印有关磁带机的状态信息。
</p>
</dd>
</dl>

<p>如果您未指定<var>tapename</var> ， <code>mt</code>使用环境变量<code>TAPE</code> ;如果<code>TAPE</code>没有设置<code>mt</code>将使用<tt>sys / mtio.h</tt>文件中指定的默认设备（ <code>DEFTAPE</code>变量）。如果未定义，程序将显示描述性错误消息并退出并显示代码1。
</p>
<p><code>mt</code>如果操作成功，则返回0退出状态；如果无法识别该命令，则返回1；如果操作失败，则返回2。
</p>
<hr size="6">
<a name="Using-Multiple-Tapes"></a>
<a name="SEC164"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC163" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC165" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.6使用多个磁带</h2>

<p>通常，您可能想编写一个较大的存档，其大小要比实际使用的磁带大。在这种情况下，您可以运行多个<code>tar</code>命令，但这可能会带来不便，尤其是当您使用诸如<samp>`--exclude=<var>pattern</var>'</samp>或转储整个文件系统。因此， <code>tar</code>提供了一种用于创建多卷存档的特殊模式。
</p>
<p><em>多卷</em>存档是单个<code>tar</code>存档，存储在固定大小的多个媒体卷上。尽管在本节中我们通常会称<samp>`volume'</samp> <em>磁带</em> ，绝对不需要将多卷档案存储在磁带上。相反，他们可以使用用户认为方便的任何媒体类型，甚至可以将它们放在文件中。
</p>
<p>创建多卷存档时， <acronym>GNU</acronym> <code>tar</code>继续填充当前卷直到空间用完，然后切换到下一个卷（通常会要求操作员在这一点上更换磁带），然后继续处理新卷。继续此操作，直到所有请求的文件都转储为止。如果是<acronym>GNU</acronym> <code>tar</code>在转储文件时检测到介质的末尾，该文件以拆分形式存档。一些非常大的文件甚至可以拆分为多个卷。
</p>
<p>每个卷本身就是一个有效的<acronym>GNU</acronym> <code>tar</code>存档，因此无需任何特殊选项即可阅读。因此，完全驻留在一个卷上的任何文件成员都可以被提取或以其他方式操作，而无需另一卷。果然，要提取拆分成员，您将需要其部分所在的所有卷。
</p>
<p>多卷档案有几个限制。特别是，它们不能被压缩。
</p>
<p><acronym>GNU</acronym> <code>tar</code>能够创建两种格式的多卷档案（请参阅<a href="#SEC133">控制档案格式部分</a> ）： <samp>`GNU'</samp>和<samp>`POSIX'</samp> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC166">9.6.2磁带文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC167">9.6.3将卷串联到单个存档中</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></tbody></table>

<hr size="6">
<a name="Multi_002dVolume-Archives"></a>
<a name="SEC165"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC164" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC166" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC164" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.6.1存档长于一个磁带或磁盘</h3>

<p>要创建大于单个媒体单位容量的存档，请使用<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ）选项与<samp>`--create'</samp>选项（请参见<a href="#SEC17">如何创建档案部分</a> ）。<em>多卷</em>档案可以像其他任何档案一样进行操作（前提是<samp>`--multi-volume'</samp>选项），但存储在多个磁带或文件中。
</p>
<p>当您指定<samp>`--multi-volume'</samp> ， <code>tar</code>当涉及到存档卷的末尾（读取时）或媒体的末尾（写入时）时，不会报告错误。而是提示您加载新的存储卷。如果存档位于磁带上，则在看到提示时应更换磁带；如果归档文件位于软盘上，则应更换磁盘；等等</p>
<dl compact>
<dt> <samp>`--multi-volume'</samp></dt>
<dt> <samp>`-M'</samp></dt>
<dd><p>与结合使用时，创建多卷归档<samp>`--create'</samp> （ <samp>`-c'</samp> ）。要对多卷归档执行其他任何操作，请指定<samp>`--multi-volume'</samp>结合该操作。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --multi-volume --file=/dev/tape <var>files</var></kbd>
</pre></td></tr></tbody></table></dd>
</dl>

<p>方法<code>tar</code>用于检测磁带末端的方法并不完美，并且在某些操作系统或某些设备上失败。如果<code>tar</code>无法检测磁带本身的末端，可以使用<samp>`--tape-length'</samp>通知它有关磁带容量的选项：</p>
<p><a name="tape_002dlength"></a>
</p><dl compact>
<dd><a name="IDX567"></a>
</dd>
<dt> <samp>`--tape-length=<var>size</var>[<var>suf</var>]'</samp></dt>
<dt> <samp>`-L <var>size</var>[<var>suf</var>]'</samp></dt>
<dd><p>设置卷的最大长度。的<var>suf</var> ，如果指定，则指定其中的单位<var>size</var>表达，例如<samp>`2M'</samp>平均2兆字节（有关允许的大小后缀的列表，请参阅<a href="#size_002dsuffixes">size-</a> suffixes）。不带<var>suf</var> ，假设单位为1024字节（千字节）。
</p>
<p>该选项选择<samp>`--multi-volume'</samp>自动。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --tape-length=41943040 --file=/dev/tape <var>files</var></kbd>
</pre></td></tr></tbody></table>

<p>或，等效：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --tape-length=4G --file=/dev/tape <var>files</var></kbd>
</pre></td></tr></tbody></table></dd>
</dl>

<p><a name="change-volume-prompt"></a>当<acronym>GNU</acronym> <code>tar</code>出现在存储介质的末尾，它要求您更改音量。POSIX语言环境的内置提示是<a name="DOCF26" href="#FOOT26">（26）</a> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">Prepare volume #<var>n</var> for '<var>archive</var>' and hit return:
</pre></td></tr></tbody></table>

<p>哪里<var>n</var>是要创建的卷的序号，并且<var>archive</var>是存档文件或设备名称。
</p>
<p>提示购买新磁带时， <code>tar</code>接受以下任何响应：</p>
<dl compact>
<dt> <kbd>?</kbd></dt>
<dd><p>请求<code>tar</code>解释可能的回应。
</p></dd>
<dt> <kbd>q</kbd></dt>
<dd><p>请求<code>tar</code>立即退出。
</p></dd>
<dt> <kbd>n <var>file-name</var></kbd></dt>
<dd><p>请求<code>tar</code>在文件上写入下一个卷<var>file-name</var> 。
</p></dd>
<dt> <kbd>!</kbd></dt>
<dd><p>请求<code>tar</code>运行一个子shell。可以通过以下方式禁用此选项： <samp>`--restrict'</samp>命令行选项<code>tar</code> <a name="DOCF27" href="#FOOT27">（27）</a> 。
</p></dd>
<dt> <kbd>y</kbd></dt>
<dd><p>请求<code>tar</code>开始写下一册。
</p></dd>
</dl>

<p>（您只能输入<samp>`y'</samp>更换磁带后；除此以外<code>tar</code>将覆盖刚刚完成的卷。）
</p>
<a name="IDX568"></a>
<a name="IDX569"></a>
<p><a name="volno_002dfile"></a><a name="IDX570"></a>所使用的卷号<code>tar</code>在其更换磁带提示中可以更改；如果你给<samp>`--volno-file=<var>file-of-number</var>'</samp>选项，然后<var>file-of-number</var>应该是要创建的不存在的文件，否则应该是已经包含十进制数字的文件。该数字将用作所写入的第一个卷的卷号。什么时候<code>tar</code>完成后，它将使用当前的卷号重写文件。（这不会更改写在磁带标签上的卷号，按照“ <a href="#SEC168">在存档中包括标签”</a> ，它<em>只会</em>影响提示中使用的卷号。）
</p>
<a name="IDX571"></a>
<a name="IDX572"></a>
<p><a name="info_002dscript"></a><a name="IDX573"></a><a name="IDX574"></a>如果您想要更复杂的行为，可以编写一个特殊的<em>新音量脚本</em> ，该<em>脚本</em>将负责更改音量并指示<code>tar</code>使用它而不是正常的提示过程：</p>
<dl compact>
<dt> <samp>`--info-script=<var>command</var>'</samp></dt>
<dt> <samp>`--new-volume-script=<var>command</var>'</samp></dt>
<dt> <samp>`-F <var>command</var>'</samp></dt>
<dd><p>指定切换卷时要调用的命令。的<var>command</var>可用于弹出录像带，或播放诸如<samp>`Someone please come change my tape'</samp>执行无人值守的备份时。
</p></dd>
</dl>

<p>的<var>command</var>如果需要，可以包含其他选项。有关<acronym>GNU</acronym>方式的详细讨论，请参见“ <a href="#SEC55">运行外部命令”</a>部分。 <code>tar</code>运行外部命令。它继承<code>tar</code>的外壳环境。通过以下环境变量将其他数据传递给它：</p>
<dl compact>
<dt> <code>TAR_VERSION</code></dt>
<dd><p><acronym>GNU</acronym> <code>tar</code>版本号。
</p>
</dd>
<dt> <code>TAR_ARCHIVE</code></dt>
<dd><p>档案名称<code>tar</code>正在处理。
</p>
</dd>
<dt> <code>TAR_BLOCKING_FACTOR</code></dt>
<dd><p>电流阻塞系数（请参阅“ <a href="#SEC158">阻塞”</a>一节）。
</p>
</dd>
<dt> <code>TAR_VOLUME</code></dt>
<dd><p>卷序号<code>tar</code>即将开始。
</p>
</dd>
<dt> <code>TAR_SUBCOMMAND</code></dt>
<dd><p>描述操作的简短选项<code>tar</code>正在执行。参见<a href="#SEC59">“五种高级课程” <code>tar</code>操作</a> ，以获取子命令选项的完整列表。
</p>
</dd>
<dt> <code>TAR_FORMAT</code></dt>
<dd><p>正在处理的档案格式。有关存档格式名称的完整列表，请参见<a href="#SEC133">控制存档格式</a>一节。
</p>
</dd>
<dt> <code>TAR_FD</code></dt>
<dd><p>文件描述符，可用于将新卷名传达给<code>tar</code> 。
</p></dd>
</dl>

<p>这些变量可以在<var>command</var>本身，但要正确引用它们，以防止它们被调用的shell扩展<code>tar</code> 。
</p>
<p>音量脚本可以指示<code>tar</code>通过写入文件描述符使用新的档案名称<code>$TAR_FD</code> （请参见下面的示例）。
</p>
<p>如果信息脚本失败， <code>tar</code>出口否则，它将开始写入下一个卷。
</p>
<p>如果你想<code>tar</code>要循环浏览一系列文件或磁带驱动器，可以选择三种方法。首先，你可以给<code>tar</code>多<samp>`--file'</samp>选项。在这种情况下，指定的文件将按顺序用作存档的连续卷。只有当序列中的第一个需要再次使用时，才会<code>tar</code>提示更改磁带（或运行信息脚本）。例如，假设某人在名为<tt>`/ dev / tape0'</tt>和<tt>`/ dev / tape1'</tt>的系统上有两个磁带机。对于拥有<acronym>GNU</acronym> <code>tar</code>在需要写入第二个磁带时切换到第二个驱动器，然后再回到第一个磁带等，只需执行以下任一操作：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --create --multi-volume --file=/dev/tape0 --file=/dev/tape1 <var>files</var></kbd>
$ <kbd>tar -cM -f /dev/tape0 -f /dev/tape1 <var>files</var></kbd>
</pre></td></tr></tbody></table>
<p>第二种方法是使用<samp>`n'</samp>响应磁带更换提示。
</p>
<p>最后，最灵活的方法是使用卷脚本，该脚本将新的存档名称写入文件描述符<code>$TAR_FD</code> 。例如，以下卷脚本将创建一系列名为<tt>`</tt>的存档文件。 <tt><var>archive</var> -- <var>vol</var> '</tt> ，在哪里<var>archive</var>是正在创建的档案的名称（由给出<samp>`--file'</samp>选项）和<var>vol</var>是要创建的档案的序号：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">#! /bin/bash
# For this script it's advisable to use a shell, such as Bash,
# that supports a TAR_FD value greater than 9.

echo Preparing volume $TAR_VOLUME of $TAR_ARCHIVE.

name=`expr $TAR_ARCHIVE : '\(.*\)-.*'`
case $TAR_SUBCOMMAND in
-c)       ;;
-d|-x|-t) test -r ${name:-$TAR_ARCHIVE}-$TAR_VOLUME || exit 1
          ;;
*)        exit 1
esac

echo ${name:-$TAR_ARCHIVE}-$TAR_VOLUME &gt;&amp;$TAR_FD
</pre></td></tr></tbody></table>
<p>列出，比较或从创建的存档中提取内容时，可以使用相同的脚本。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># Create a multi-volume archive:
$ <kbd>tar -c -L1024 -f archive.tar -F new-volume .</kbd>
# Extract from the created archive:
$ <kbd>tar -x -f archive.tar -F new-volume .</kbd>
</pre></td></tr></tbody></table>

<p>注意，第一个命令必须使用<samp>`-L'</samp>选项，因为否则<acronym>GNU</acronym> <code>tar</code>最后将所有内容都写入文件<tt>archive.tar中</tt> 。
</p>
<p>您可以读取多卷归档文件的每个单独的卷，就好像它本身就是一个归档文件一样。例如，要列出一个卷的内容，请使用<samp>`--list'</samp> ，没有<samp>`--multi-volume'</samp>指定。要从一个卷中提取存档成员（假设已描述该卷），请使用<samp>`--extract'</samp> ，再次没有<samp>`--multi-volume'</samp> 。
</p>
<p>如果将存档成员拆分为多个卷（即，其条目开始于介质的一个卷，而结束于另一卷），则需要指定<samp>`--multi-volume'</samp>提取成功。在这种情况下，您应该加载存档成员开始的卷，并使用<samp>`tar --extract --multi-volume'</samp> - <code>tar</code>将根据需要提示以后的卷。有关<a href="#SEC26">提取档案</a>的更多信息，请参见<a href="#SEC26">提取整个档案</a>一节。
</p>
<p>多卷档案可以像其他任何档案一样进行修改。要将文件添加到多卷存档中，只需要挂载存档介质的最后一个卷（如果需要，还可以挂载新卷）。对于所有其他操作，您需要使用整个存档。
</p>
<p>如果多卷归档文件被标记为<samp>`--label=<var>archive-label</var>'</samp> （请参见创建<a href="#SEC168">标签时，</a>请参见<a href="#SEC168">在存档中包括标签</a>部分）， <code>tar</code>不会自动标记以后添加的卷。要标记后续卷，请指定<samp>`--label=<var>archive-label</var>'</samp>再次与<samp>`--append'</samp> ， <samp>`--update'</samp>要么<samp>`--concatenate'</samp>操作。
</p>
<p>请注意，多卷支持是GNU扩展，在此模式下创建的档案应仅使用<acronym>GNU</acronym>读取。 <code>tar</code> 。如果您绝对必须使用第三方处理此类存档<code>tar</code>实现，请参阅<a href="#SEC151">提取成员在卷之间拆分</a> 。
</p>
<hr size="6">
<a name="Tape-Files"></a>
<a name="SEC166"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC165" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC167" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC164" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.6.2磁带文件</h3>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>要给归档文件命名，请使用<samp>`--label=<var>volume-label</var>'</samp> （ <samp>`-V <var>volume-label</var>'</samp> ） 选项。这将写一个特殊的块来标识<var>volume-label</var>作为档案名称，位于档案的最前面，当档案列出时显示<samp>`--list'</samp> 。如果要使用以下命令创建多卷存档<samp>`--multi-volume'</samp> （请参阅<a href="#SEC164">使用多个磁带</a>部分），然后卷标将具有<samp>`Volume <var>nnn</var>'</samp>附加到您提供的名称之后<var>nnn</var>是归档卷的数量。如果您使用<samp>`--label=<var>volume-label</var>'</samp>选项在读取存档时会检查以确保磁带上的标签与您给的标签相匹配。请参阅<a href="#SEC168">在存档中包括标签</a>一节。
</p>
<p>什么时候<code>tar</code>将存档写入磁带，它创建一个磁带文件。如果将多个归档一个接一个地写入同一磁带，则每个归档都将作为单独的磁带文件写入。提取时，有必要在运行前将胶带放置在正确的位置<code>tar</code> 。为此，请使用<code>mt</code>命令。有关的更多信息<code>mt</code>命令和对组织的磁带到磁带文件的顺序，看到<a href="#SEC163">的<code>mt</code>实用程序</a> 。
</p>
<p>人们似乎经常这样做：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>--label=&quot;<var>some-prefix</var> `date +<var>some-format</var>`&quot;</kbd>
</pre></td></tr></tbody></table>
<p>等等，以便在所有卷或归档集中推送一个公共日期。
</p>
<hr size="6">
<a name="Tarcat"></a>
<a name="SEC167"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC166" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC168" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC164" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">9.6.3将卷串联到单个存档中</h3>

<p>有时有必要转换现有的<acronym>GNU</acronym> <code>tar</code>多卷存档到单个<code>tar</code>存档。简单地将所有卷串联在一起是行不通的，因为每个卷开头都带有附加信息。<acronym>GNU</acronym> <code>tar</code>随脚本一起提供<code>tarcat</code>为此目的而设计。
</p>
<p>该脚本获取包含多卷存档的文件列表，并在标准输出处创建结果存档。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><kbd>tarcat vol.1 vol.2 vol.3 | tar tf -</kbd>
</pre></td></tr></tbody></table>
<p>该脚本实现了一种简单的试探法，以确定第一个卷文件的格式并决定如何处理其余文件。但是，它不会尝试验证文件是按顺序给出的还是有效的。 <code>tar</code>档案。它用<code>dd</code>并且不会过滤其标准错误，因此您通常会看到很多虚假消息。
</p>
<p>请参阅<cite>未安装脚本。我们应该安装它吗？</cite>
</p>

<hr size="6">
<a name="label"></a>
<a name="SEC168"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC167" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC169" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.7在档案中包含标签</h2>

<p>为避免由于存档介质上纸质标签放置错误而引起的问题，您可以在存档本身中包含一个<em>标签</em>条目（包含存档名称的存档成员）。使用<samp>`--label=<var>archive-label</var>'</samp> （ <samp>`-V <var>archive-label</var>'</samp> ）选项<a name="DOCF28" href="#FOOT28">（28）</a>与<samp>`--create'</samp>该操作可在创建归档文件时将其包含在归档文件中。
</p>
<dl compact>
<dt> <samp>`--label=<var>archive-label</var>'</samp></dt>
<dt> <samp>`-V <var>archive-label</var>'</samp></dt>
<dd><p>与归档文件一起使用时，创建归档文件时在归档文件的开头包含<em>归档文件标签</em> 。 <samp>`--create'</samp>操作。检查以确保存档标签与指定的标签匹配（与其他任何操作结合使用时）。
</p></dd>
</dl>

<p>如果您同时使用<samp>`--label=<var>archive-label</var>'</samp> （ <samp>`-V <var>archive-label</var>'</samp> ）和<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ），则归档的每个卷都将具有以下格式的归档标签： <samp>`<var>archive-label</var> Volume <var>n</var>'</samp> ，在哪里<var>n</var>第一个卷为1，下一个卷为2，依此类推。有关创建多个卷归档的信息，请参阅<a href="#SEC164">使用多个磁带</a>部分。
</p>
<a name="IDX575"></a>
<a name="IDX576"></a>
<p>音量标签将显示为<samp>`--list'</samp>以及文件内容。如果要求详细显示，也将在下面的示例中将其显式标记：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --verbose --list --file=iamanarchive</kbd>
V--------- 0/0               0 1992-03-07 12:01 iamalabel--Volume Header--
-rw-r--r-- ringo/user       40 1990-05-21 13:30 iamafilename
</pre></td></tr></tbody></table>
<a name="IDX577"></a>
<p><a name="g_t_002d_002dtest_002dlabel-option"></a>然而， <samp>`--list'</samp>选项将导致列出存档的全部内容，这可能是不希望的（例如，如果存档存储在磁带上）。您可以通过指定仅请求检查卷标<samp>`--test-label'</samp>选项。此选项仅读取归档文件的第一个块，因此可以与速度较慢的存储设备一起使用。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --test-label --file=iamanarchive</kbd>
iamalabel
</pre></td></tr></tbody></table>
<p>如果<samp>`--test-label'</samp>与一个或多个命令行参数一起使用， <code>tar</code>将卷标与每个参数进行比较。如果找到匹配项，则以代码0退出，否则以代码1退出<a name="DOCF29" href="#FOOT29">（29）</a> 。除非您也使用了<samp>`--verbose'</samp>选项。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --test-label --file=iamanarchive 'iamalabel'</kbd>
&rArr; 0
$ <kbd>tar --test-label --file=iamanarchive 'alabel'</kbd>
&rArr; 1
</pre></td></tr></tbody></table>
<p>当与<samp>`--verbose'</samp>选项， <code>tar</code>打印实际的卷标（如果有），并在不匹配时显示详细的诊断信息：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --test-label --verbose --file=iamanarchive 'iamalabel'</kbd>
iamalabel
&rArr; 0
$ <kbd>tar --test-label --verbose --file=iamanarchive 'alabel'</kbd>
iamalabel
tar: Archive label mismatch
&rArr; 1
</pre></td></tr></tbody></table>
<p>如果您要求任何操作，除了<samp>`--create'</samp> ，以及使用<samp>`--label'</samp>选项， <code>tar</code>将首先检查存档标签是否与指定的标签匹配，否则将拒绝继续。将此用作安全预防措施，以避免意外覆盖现有档案。例如，如果您希望将文件添加到<tt>“ archive”中</tt> ，大概用字符串标记<samp>`My volume'</samp> ， 你会得到：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -rf archive --label 'My volume' .</kbd>
tar: Archive not labeled to match 'My volume'
</pre></td></tr></tbody></table>

<p>如果标签不匹配。即使根本没有标记<tt>“存档”，</tt>这也将起作用。
</p>
<p>同样， <code>tar</code>如果标签不匹配，将拒绝列出或提取存档<var>archive-label</var>指定。在那种情况下<var>archive-label</var>参数被解释为必须与实际磁体积标签相匹配的球形样式。有关如何尝试匹配的精确描述，请参见<a href="#SEC110">排除某些文件</a> <a name="DOCF30" href="#FOOT30">（30）</a> 。如果开关<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ）正在使用，卷标匹配器也将后缀<var>archive-label</var>通过<samp>` Volume [1-9]*'</samp>如果初始匹配失败，则放弃。由于卷编号是在创建时自动添加到标签中的，因此在读取存档时，逻辑上可以同等地帮助用户处理卷编号是合理的。
</p>
<p>您也可以使用<samp>`--label'</samp>在系列的所有磁带上获得通用信息。为了使每个系列中的这些信息都不同，这些信息是通过定期使用单个脚本创建的，因此只需设法获取一些日期字符串作为标签的一部分即可。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -cM -f /dev/tape -V &quot;Daily backup for `date +%Y-%m-%d`&quot;</kbd>
$ <kbd>tar --create --file=/dev/tape --multi-volume \
     --label=&quot;Daily backup for `date +%Y-%m-%d`&quot;</kbd>
</pre></td></tr></tbody></table>
<p>有关卷标的更多注意事项：</p>
<ul>
<li>每个标签都有自己的日期和时间，对应于<acronym>GNU</acronym>的时间<code>tar</code>最初尝试编写它，通常是在操作员启动后不久<code>tar</code>或键入回车，告知下一盘磁带已准备好。

</li><li>比较日期标签以了解磁带吞吐量是不可靠的。只有在倒带和操作人员切换磁带的延迟可以忽略不计时，它才能给出正确的结果，而通常情况并非如此。
</li></ul>

<hr size="6">
<a name="verify"></a>
<a name="SEC169"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC168" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC170" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.8验证存储的数据</h2>

<dl compact>
<dt> <samp>`-W'</samp></dt>
<dt> <samp>`--verify'</samp></dt>
<dd><a name="IDX578"></a>
<p>写入后尝试验证存档。
</p></dd>
</dl>

<p>此选项导致<code>tar</code>在写入后验证存档。写入后检查每个卷，并将任何差异记录在标准错误输出上。
</p>
<p>验证要求归档文件位于可退格的介质上。这意味着无法验证管道，某些盒式磁带驱动器和某些其他设备。
</p>
<p>通过将系统中的文件与存档成员进行比较，可以确保存档的准确性。 <code>tar</code>可以在写入归档文件时将归档文件与文件系统进行比较，以验证写入操作，或者可以比较先前写入的归档文件以确保它是最新的。
</p>
<a name="IDX579"></a>
<a name="IDX580"></a>
<p>要在写入档案后立即检查档案中的差异，请使用<samp>`--verify'</samp> （ <samp>`-W'</samp> ）选项与<samp>`--create'</samp>操作。指定此选项后， <code>tar</code>根据文件系统中的对应成员检查存档成员，并报告标准错误的差异。
</p>
<p>要验证档案，您必须能够从上一个书面条目的末尾开始读取它。此选项对于检测某些磁带上的数据错误很有用。无法验证写入管道，某些盒式磁带驱动器和某些其他设备的档案。
</p>
<p>可以使用以下命令将已制作的归档文件与文件系统进行显式比较。 <samp>`--compare'</samp> （ <samp>`--diff'</samp> ， <samp>`-d'</samp> ）选项，而不是使用更自动的<samp>`--verify'</samp>选项。请参阅<a href="#SEC67">将存档成员与文件系统比较</a> 。
</p>
<p>请注意，这两个选项的意图略有不同。的<samp>`--compare'</samp>选项检查某些归档文件的逻辑内容与磁盘上的内容是否相同，而<samp>`--verify'</samp>该选项实际上是用于检查物理内容是否一致以及记录媒体本身是否具有可靠的质量。所以，对于<samp>`--verify'</samp>操作<code>tar</code>尝试取消与该存档有关的所有内存中缓存，同时让速度优化不受干扰<samp>`--compare'</samp>选项。如果您仍然使用<samp>`--compare'</samp>为了进行媒体验证，您可能必须自己打败内存中的缓存，也许是通过打开和重新关闭记录单元的门闩，从而迫使操作系统中有人怀疑这确实与刚刚写的那个相同，这一事实或阅读。
</p>
<p>的<samp>`--verify'</samp>如果驱动程序确实能够可靠地检测到所有写入故障，则无需选择此选项。有时这需要许多磁头，有些磁头在写操作发生后就可以读取。人们不会说，就编程而言，无法检测所有情况的驱动程序必然存在缺陷。
</p>
<p>的<samp>`--verify'</samp> （ <samp>`-W'</samp> ）选项不能与<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ）选项或<samp>`--append'</samp> （ <samp>`-r'</samp> ）， <samp>`--update'</samp> （ <samp>`-u'</samp> ）和<samp>`--delete'</samp>操作。参见<a href="#SEC59">“五种高级课程” <code>tar</code>操作</a> ，以获取有关这些操作的更多信息。
</p>
<p>另外，由于<code>tar</code>通常剥离领先<samp>`/'</samp>从文件名（请参阅“ <a href="#SEC120">绝对文件名”</a>部分）中的命令<samp>`tar --verify -cf /tmp/foo.tar /etc'</samp>仅当工作目录为<tt>`/'时</tt> ，它才能按需工作<code>tar</code>验证档案时，使用档案的相对成员名称（例如<tt>`etc / motd'</tt> ）。
</p>
<hr size="6">
<a name="Write-Protection"></a>
<a name="SEC170"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC169" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC154" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">9.9写保护</h2>

<p>几乎所有磁带和软盘，在极少数情况下，甚至磁盘都可以被<em>写保护</em> ，以保护其上的数据不被更改。写入存档后，您应该对媒体进行写保护，以防止意外覆盖或删除存档。（这将防止归档文件被磁带或软盘驱动器更改，也不会保护归档文件免受磁场或其他物理危险的影响。）
</p>
<p>写保护设备本身通常是物理介质的组成部分，并且可以是两个位置（允许写/禁止写）的开关，可以弹出或覆盖的槽口，可以从中间位置取下的环磁带盘或其他一些可更改的功能。
</p>
<hr size="6">
<a name="Reliability-and-security"></a>
<a name="SEC171"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC170" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC172" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC154" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="chapter">10。可靠性与安全性</h1>

<p>的<code>tar</code>该命令会像其他任何应用程序一样读写文件，并且要遵守有关可靠性和安全性的一般注意事项。本节包含有关该主题的一些常识性建议。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC172">10.1可靠性</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC176">10.2安全</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Reliability"></a>
<a name="SEC172"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC171" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC173" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">10.1可靠性</h2>

<p>理想情况下<code>tar</code>正在创建档案，它从未修改的文件系统读取，并且在读取和写入时没有遇到错误或不一致。在这种情况下，存档应忠实反映所读内容。同样，从存档中提取时，理想情况下<code>tar</code>理想情况下不会遇到任何错误，并且提取的文件会忠实地反映档案中的内容。
</p>
<p>但是，在读取或写入实际文件系统时，可能会出错。其中包括权限问题，数据损坏和竞争条件。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC173">10.1.1权限问题</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC174">10.1.2数据损坏和修复</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC175">10.1.3比赛条件</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Permissions-problems"></a>
<a name="SEC173"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC172" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC174" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC172" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.1.1权限问题</h3>

<p>如果<code>tar</code>在读取或写入文件时遇到错误，它通常会报告错误并以非零状态退出。因此，它所做的工作可能不完整。例如，在创建档案时，如果<code>tar</code>无法读取文件，则无法将文件复制到存档中。
</p>
<hr size="6">
<a name="Data-corruption-and-repair"></a>
<a name="SEC174"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC173" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC175" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC172" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.1.2数据损坏和修复</h3>

<p>如果归档文件因I / O错误而损坏，则可能会损坏提取文件中的数据。更糟糕的是，它可能会损坏文件的元数据，这可能导致档案的后续部分被误解。tar格式的归档文件包含一个校验和，很可能会检测到元数据中的错误，但不会检测到数据中的错误。
</p>
<p>如果您担心数据损坏，则可以使用其他程序来计算和检查存档的校验和。 <code>cksum</code> 。
</p>
<p>尝试从读取错误或档案中的数据损坏中恢复时，您可能需要跳过可疑数据并读取档案的其余部分。这需要归档格式和其他软件工具方面的一些专业知识。
</p>
<hr size="6">
<a name="Race-conditions"></a>
<a name="SEC175"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC174" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC176" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC172" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.1.3比赛条件</h3>

<p>如果某些其他进程正在修改文件系统，而<code>tar</code>正在读取或写入文件时，由于比赛条件，结果可能会不一致。例如，如果另一个进程在目录中创建了一些文件，而<code>tar</code>正在创建包含目录文件的档案， <code>tar</code>可能会看到一些文件，但看不到其他文件，或者可能看到正在创建的文件。在任何时候，生成的存档可能都不是文件系统的快照。如果应用程序（例如数据库系统）依赖于准确的快照，请从<code>tar</code>因此，实时文件系统的存档可能会破坏该一致性，并可能破坏应用程序。避免一致性问题的最简单方法是避免在tar读取或写入文件系统时对文件系统进行其他更改。
</p>
<p>创建档案时，有几个选项可避免出现竞争情况。某些主机可以通过（例如）挂起唯一可以修改文件系统的虚拟机，来快照文件系统或临时挂起对文件系统的所有更改。如果您使用这些设施并拥有<code>tar -c</code>在创建归档文件时从快照读取，可以避免出现不一致问题。更彻底地，在开始之前<code>tar</code>您可以暂停或关闭除<code>tar</code>可以访问文件系统的文件，也可以卸载文件系统，然后以只读方式安装它。
</p>
<p>从档案中提取时，避免竞争情况的一种方法是创建一个目录，其他进程无法将其写入并提取到该目录中。
</p>
<hr size="6">
<a name="Security"></a>
<a name="SEC176"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC175" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC177" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC171" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="section">10.2安全</h2>

<p>在某些情况下<code>tar</code>可能会在对抗性情况下使用，在这种情况下，不受信任的用户试图获取有关文件或修改否则无法访问的文件的信息。处理不可信数据（即，不可信用户生成的数据）通常需要格外小心，因为即使使用<code>tar</code>更有可能被对手利用而不是种族条件。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC177">10.2.1隐私</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC178">10.2.2完整性</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC179">10.2.3处理实时不可信数据</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC180">10.2.4经验法则</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Privacy"></a>
<a name="SEC177"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC176" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC178" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC176" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.2.1隐私</h3>

<p>使用时会涉及标准的隐私问题<code>tar</code> 。例如，假设您要将主目录归档到文件<tt>`/archive/myhome.tar'中</tt> 。主目录中的所有秘密信息（例如SSH秘密密钥）都将忠实地复制到存档中。因此，如果主目录包含不应由其他用户读取的任何文件，则该用户不应读取存档本身。即使不信任用户无法访问存档的数据，其元数据（例如大小或上次修改日期）也可能会泄露一些有关您的主目录的信息；如果元数据是专用的，则不受信任的用户也不能访问存档的父目录。
</p>
<p>一种预防措施是创建<tt>“ / archive”，</tt>以便任何用户都无法访问它，除非该用户也有权访问您的主目录中的所有文件。
</p>
<p>同样，从存档中提取文件时，请注意提取文件的权限不要比您想要的文件宽裕。即使存档本身仅对您可读，从存档中提取的文件也拥有各自的权限，这些权限可能有所不同。
</p>
<hr size="6">
<a name="Integrity"></a>
<a name="SEC178"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC177" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC179" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC176" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.2.2完整性</h3>

<p>创建档案时，请注意不可被非信任用户写入。否则，该用户可以修改存档，并且当您以后从存档中提取时，您将获得不正确的数据。
</p>
<p>什么时候<code>tar</code>从存档中提取，默认情况下，它会写入相对于工作目录的文件。如果归档文件是由不受信任的用户生成的，则该用户可以写入工作目录下的任何文件。如果工作目录包含指向另一个目录的符号链接，则不受信任的用户也可以写入引用目录下的任何文件。因此，从不受信任的档案中提取时，最好创建一个空目录并运行<code>tar</code>在该目录中。
</p>
<p>从两个或更多不受信任的档案中提取时，每个档案应独立提取到不同的空目录中。否则，第一个档案可以创建到工作目录外部区域的符号链接，而第二个档案可以跟随该链接并覆盖不在工作目录下的数据。例如，当从一系列增量转储中还原时，归档应该已经由受信任的进程创建，否则增量还原可能会更改工作目录之外的数据。
</p>
<p>如果您使用<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ）选项时， <code>tar</code>尊重档案中的任何文件名，甚至以<tt>“ /”</tt>开头或包含<tt>“。 <tt>”的</tt>文件名<tt>。'</tt> 。由于此操作可使归档文件覆盖系统中您可以写入的任何文件，因此<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ）选项应仅用于受信任的档案。
</tt></p><tt>
<p>相反， <samp>`--keep-old-files'</samp> （ <samp>`-k'</samp> ）和<samp>`--skip-old-files'</samp>选项， <code>tar</code>提取时拒绝替换现有文件。两种选择之间的区别在于，前者将现有文件视为错误，而后者只是默默地忽略它们。
</p>
<p>最后， <samp>`--no-overwrite-dir'</samp>选项， <code>tar</code>拒绝替换现有目录的权限或所有权。从不受信任的档案中提取这些选项可能会有所帮助。
</p>
<hr size="6">
<a name="Live-untrusted-data"></a>
<a name="SEC179"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC178" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC180" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC176" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.2.3处理实时不可信数据</h3>

<p>从不受信任用户访问的文件系统创建或提取到文件系统时，需要格外小心。例如，调用<code>tar</code>必须警惕正在同时读取或写入文件系统的对手劫持其行为的行为， <code>tar</code>正在运行。
</p>
<p>从实时文件系统创建档案时， <code>tar</code>容易受到拒绝服务攻击。例如，对抗性用户可以通过在目录层次结构之前创建目录来创建无限深度的目录层次结构<tt>“ d / e / f / g / ...”</tt>的错觉<code>tar</code> ，或者通过创建稀疏文件但安排在之前分配块来无限期地幻想文件<code>tar</code>阅读它们。没有简单的方法<code>tar</code>区分这些情况与合法用途，因此您可能需要监控<code>tar</code> ，就像您需要监视其他任何系统服务一样，可以检测到此类攻击。
</p>
<p>当超级用户从归档文件提取到实时文件系统中时，不受信任的用户可能会用符号链接替换目录，以期<code>tar</code>将遵循符号链接并将数据提取到不受信任用户无法访问的文件中。即使档案是由超级用户生成的，它也可能包含一个文件，例如<tt>“ d / etc / passwd”</tt> 。如果不受信任的用户将目录<tt>d / etc</tt>替换为指向<tt>/ etc</tt>的符号链接，而<code>tar</code>在跑， <code>tar</code>将覆盖<tt>`/ etc / passwd'</tt> 。可以通过提取不受信任用户无法访问的目录来防止此攻击。
</p>
<p>如果不受信任的用户可以修改以下内容的顶级参数的祖先，则在创建归档文件时，也可能通过符号链接进行类似的攻击： <code>tar</code> 。例如，可以修改<tt>`/ home / eve'</tt>的不受信任的用户可以劫持正在运行的实例。 <samp>`tar -cf - /home/eve/Documents/yesterday'</samp>通过将<tt>“ / home / eve / Documents”</tt>替换为指向其他位置的符号链接。通过确保不受信任的用户不能修改任何作为顶级参数的文件，可以防止此类攻击。 <code>tar</code> ，或这些文件的任何祖先目录。
</p>
<hr size="6">
<a name="Security-rules-of-thumb"></a>
<a name="SEC180"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC179" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC176" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC181" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="subsection">10.2.4经验法则</h3>

<p>本节简要总结了避免安全隐患的经验法则。
</p>
<ul>
<li>保护存档至少与保护正在存档的任何文件一样多。

</li><li>从不受信任的存档中仅提取到否则为空的目录中。该目录及其上级仅应由受信任的用户访问。例如：<table><tbody><tr><td> </td><td><pre class="example">$ <kbd>chmod go-rwx .</kbd>
$ <kbd>mkdir -m go-rwx dir</kbd>
$ <kbd>cd dir</kbd>
$ <kbd>tar -xvf /archives/got-it-off-the-net.tar.gz</kbd>
</pre></td></tr></tbody></table>
<p>因此，请勿从不受信任的存档中进行增量还原。
</p>
</li><li>不要在不首先检查诸如setuid程序之类的问题的情况下，让不受信任的用户访问从不受信任的存档中提取的文件。

</li><li>不要让不受信任的用户修改目录的顶级参数的祖先<code>tar</code> 。例如，当您执行<samp>`tar -cf /archive/u-home.tar /u/home'</samp> ，请勿让不受信任的用户修改<tt>`/'</tt> ， <tt>`/ archive'</tt>或<tt>`/ u'</tt> 。

</li><li>注意诊断和退出状态<code>tar</code> 。

</li><li>归档活动文件系统时，监视正在运行的实例<code>tar</code>检测拒绝服务攻击。

</li><li>避免诸如以下异常选择<samp>`--absolute-names'</samp> （ <samp>`-P'</samp> ）， <samp>`--dereference'</samp> （ <samp>`-h'</samp> ）， <samp>`--overwrite'</samp> ， <samp>`--recursive-unlink'</samp>和<samp>`--remove-files'</samp>除非您了解其安全含义。

</li></ul>

<hr size="6">
<a name="Changes"></a>
<a name="SEC181"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC180" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC182" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC171" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC182" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">A.变化</h1>

<p>本附录列出了各种版本的<acronym>GNU</acronym>之间用户可见的重要更改<code>tar</code> 。<a href="http://www.gnu.org/software/tar/manual/changes.html"><acronym>GNU</acronym></a>提供了该文档的最新版本。 <a href="http://www.gnu.org/software/tar/manual/changes.html"><code>tar</code>文档页面</a> 。
</p>
<dl compact>
<dt>列出和提取时使用globbing模式。</dt>
<dd>
<p>从归档文件中提取或列出归档文件时，GNU tar的早期版本假定使用外壳样式的globbing。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar xf foo.tar '*.c'</kbd>
</pre></td></tr></tbody></table>
<p>将提取名称以结尾的所有文件<samp>`.c'</samp> 。此行为没有记录，并且与传统的tar实现不兼容。因此，从1.15.91版本开始，GNU tar默认不再使用globbing。例如，上述调用现在被解释为从档案中提取名为<tt>* .c</tt>的文件的请求。
</p>
<p>为了帮助那些习惯于以前的不正确行为的用户过渡到新行为， <code>tar</code>如果发现在归档文件中未找到所请求的成员，并且其名称看起来像是遍历模式，则将打印警告。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar xf foo.tar  '*.c'</kbd>
tar: Pattern matching characters used in file names. Please,
tar: use --wildcards to enable pattern matching, or --no-wildcards to
tar: suppress this warning.
tar: *.c: Not found in archive
tar: Error exit delayed from previous errors
</pre></td></tr></tbody></table>
<p>要将成员名称视为通配模式，请使用<samp>`--wildcards'</samp>选项。如果要tar模拟1.15.91之前的版本的行为，请将此选项添加到您的<code>TAR_OPTIONS</code>变量。
</p>
<p>有关<acronym>GNU</acronym>使用<a href="#SEC112">通配符模式</a>的详细讨论，请参见“ <a href="#SEC112">通配符模式和匹配”</a>部分。 <code>tar</code> 。
</p>
</dd>
<dt>使用短期权<samp>`-o'</samp> 。</dt>
<dd>
<p><acronym>GNU的</acronym>早期版本<code>tar</code>明白的<samp>`-o'</samp>命令行选项作为以下内容的同义词<samp>`--old-archive'</samp> 。
</p>
<p><acronym>GNU</acronym> <code>tar</code>从版本1.13.90开始，此选项可理解为是<samp>`--no-same-owner'</samp> 。这与UNIX98兼容<code>tar</code>实现。
</p>
<p>但是，为了促进过渡， <samp>`-o'</samp>当与存档创建命令之一一起使用时，option保留其旧语义。鼓励用户使用<samp>`--format=oldgnu'</samp>代替。
</p>
<p>这一点特别重要，因为<acronym>GNU</acronym> Automake的版本（包括1.8.4及以下）会使用此选项调用tar来生成分发tarball。有关此问题及其含义的详细讨论，请参见第<a href="#SEC133">v7</a>节。
</p>
<p>请参阅<a href="${GS}/automake/manual/automake.html#Options">tar格式：（automake）</a> “ <cite>GNU Automake</cite> ”中“更改Automake的行为”的“ <a href="${GS}/automake/manual/automake.html#Options">选项”</a>部分，以获取有关如何将各种归档格式与<code>automake</code> 。
</p>
<p><acronym>GNU的</acronym>未来版本<code>tar</code>会明白<samp>`-o'</samp>仅作为<samp>`--no-same-owner'</samp> 。
</p>
</dd>
<dt>使用短期权<samp>`-l'</samp></dt>
<dd>
<p><acronym>GNU的</acronym>早期版本<code>tar</code>明白的<samp>`-l'</samp>选项作为的同义词<samp>`--one-file-system'</samp> 。由于这种用法与UNIX98规范矛盾并且损害了与其他实现的兼容性，因此在1.14版中声明它已弃用。但是，为了促进向其新语义的过渡，版本1.15和1.15.90支持了它。目前的用途<samp>`-l'</samp>作为...的简短变体<samp>`--check-links'</samp>在1.15.91版中引入。
</p>
</dd>
<dt>选项的使用<samp>`--portability'</samp>和<samp>`--old-archive'</samp></dt>
<dd>
<p>这些选项已弃用。请用<samp>`--format=v7'</samp>代替。
</p>
</dd>
<dt>期权的使用<samp>`--posix'</samp></dt>
<dd>
<p>不建议使用此选项。请用<samp>`--format=posix'</samp>代替。
</p></dd>
</dl>

<hr size="6">
<a name="Recipes"></a>
<a name="SEC182"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC181" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC183" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC181" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC185" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">食谱</h1>


<p>本附录提供了一些使用<acronym>GNU</acronym>执行常见任务的方法<code>tar</code> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC183">B.1复制目录层次结构</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC184">B.2恢复中间目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="copy-directory-hierarchy"></a>
<a name="SEC183"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC182" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC184" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC182" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC182" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC185" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="appendixsec">B.1复制目录层次结构</h2>

<p>这是复制目录层次结构的传统方法，该目录层次结构保留了其中所有文件的日期，模式，所有者和链接结构。当<code>cp</code>命令缺少<samp>`-a'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>(cd sourcedir; tar -cf - .) | (cd targetdir; tar -xf -)</kbd>
</pre></td></tr></tbody></table>

<p>您可以通过使用避免子壳<samp>`-C'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar -C sourcedir -cf - . | tar -C targetdir -xf -</kbd>
</pre></td></tr></tbody></table>

<p>使用长选项形式的相同命令：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>(cd sourcedir; tar --create --file=- . ) \
       | (cd targetdir; tar --extract --file=-)</kbd>
</pre></td></tr></tbody></table>

<p>要么</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --directory sourcedir --create --file=- . \
       | tar --directory targetdir --extract --file=-</kbd>
</pre></td></tr></tbody></table>
<hr size="6">
<a name="intermediate-directories"></a>
<a name="SEC184"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC183" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC185" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC182" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC182" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC185" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="appendixsec">B.2恢复中间目录</h2>

<p>一个普遍关注的问题是，当仅从存档中提取选定成员时，如何提取中间目录的权限和所有权。为了说明这一点，请考虑以下归档文件：</p>
<table><tbody><tr><td> </td><td><pre class="example"># tar tvf A.tar
drwxr-xr-x root/root         0 2017-11-16 14:39 foo/
dr-xr-x--- gray/user         0 2017-11-16 14:39 foo/bar/
-rw-r--r-- gray/user        10 2017-11-16 14:40 foo/bar/file
</pre></td></tr></tbody></table>
<p>假设您仅提取文件<tt>foo / bar / file</tt> ，而<samp>`root'</samp> ：</p>
<table><tbody><tr><td> </td><td><pre class="example"># <kbd>tar xvf A.tar foo/bar/file</kbd>
foo/bar/file
</pre></td></tr></tbody></table>
<p>现在，让我们检查创建的目录的内容：</p>
<table><tbody><tr><td> </td><td><pre class="example"># find foo -ls
427257    0 drwxr-xr-x   3 root     root    16 Nov 17 16:10 foo
427258    0 drwxr-xr-x   2 root     root    17 Nov 17 16:10 foo/bar
427259    0 -rw-r--r--   1 gray     user    10 Nov  6 14:40 foo/bar/file
</pre></td></tr></tbody></table>
<p>所请求的文件已还原，包括其所有权和权限。但是，中间目录是使用默认权限，当前时间戳创建的，并由当前用户拥有。这是因为到时候<code>tar</code>已到达请求的文件，它已经跳过了其父目录的条目，因此没有有关其所有权和模式的信息。
</p>
<p>要还原有关中间目录的元信息，您需要在命令行中明确指定它们，并使用<samp>`--no-recursive'</samp>选项（请参阅“ <a href="#SEC117">下降到目录”</a>部分）以避免提取其内容。
</p>
<p>为了使此过程自动化， <cite>Neal P. Murphy</cite>提出了以下shell脚本<a name="DOCF31" href="#FOOT31">（31）</a> ：</p>
<table><tbody><tr><td> </td><td><pre class="example">#! /bin/sh
(while read path
 do
   path=`dirname $path`
   while [ -n &quot;$path&quot; -a &quot;$path&quot; != &quot;.&quot; ]
   do
     echo $path
     path=`dirname $path`
   done
 done &lt; $2 | sort | uniq) |
 tar -x --no-recursion -v -f $1 -T - -T $2
</pre></td></tr></tbody></table>
<p>该脚本采用两个参数：存档文件的名称和文件列表文件的名称。
</p>
<p>为了完成我们的示例，文件列表将包含单行：</p>
<table><tbody><tr><td> </td><td><pre class="example">foo/bar/file
</pre></td></tr></tbody></table>
<p>假设其名称为<tt>`file.list'</tt>并且脚本名为<tt>`restore.sh'</tt> ，则可以按以下方式调用它：</p>
<table><tbody><tr><td> </td><td><pre class="example"># <kbd>sh restore.sh A.tar file.list</kbd>
</pre></td></tr></tbody></table>
<hr size="6">
<a name="Configuring-Help-Summary"></a>
<a name="SEC185"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC184" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC186" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC182" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC186" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">C.配置帮助摘要</h1>

<p>跑步<kbd>tar --help</kbd>显示短片<code>tar</code>选项摘要（请参见<a href="#SEC45"><acronym>GNU</acronym></a>部分<a href="#SEC45"><code>tar</code>文档</a> ）。本摘要是通过语义关闭选项<em>团体</em>组织。每个组中的选项按以下顺序打印：简短选项，最后是相应的长选项名称列表，然后是该选项的简短描述。例如，以下是实际摘录<kbd>tar --help</kbd>输出：</p>
<pre class="verbatim"> Main operation mode:

  -A, --catenate, --concatenate   append tar files to an archive
  -c, --create               create a new archive
  -d, --diff, --compare      find differences between archive and
                             file system
      --delete               delete from the archive
</pre>
<p>可以通过以下方式配置帮助输出的确切视觉表示： <code>ARGP_HELP_FMT</code>环境变量。此变量的值是<em>格式变量</em>分配的逗号分隔列表。有两种格式变量。一个<em>offset变量</em>使帮助输出文本的某些部分与屏幕上最左列的偏移。<em>布尔</em>变量是一个标志，用于打开或关闭某些输出功能。根据相应变量的类型，有两种分配：</p>
<dl compact>
<dt>偏移量分配</dt>
<dd>
<p>偏移变量的分配具有以下语法：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><var>variable</var>=<var>value</var>
</pre></td></tr></tbody></table>

<p>哪里<var>variable</var>是变量名，并且<var>value</var>是要分配给变量的数值。
</p>
</dd>
<dt>布尔分配</dt>
<dd>
<p>分派<code>true</code>值添加到变量中，只需输入此变量名称即可。分派<code>false</code>值，在变量名前添加前缀<samp>`no-'</samp> 。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># Assign <code>true</code> value:
dup-args
# Assign <code>false</code> value:
no-dup-args
</pre></td></tr></tbody></table></dd>
</dl>

<p>声明以下变量：</p>
<dl>
<dt><u>帮助输出：</u>布尔<b>dup-args</b> <a name="IDX581"></a>
</dt>
<dd><p>如果为true，则即使给定选项具有两种形式，选项的参数也会显示短选项和长选项。</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  -f ARCHIVE, --file=ARCHIVE use archive file or device ARCHIVE
</pre></td></tr></tbody></table>
<p>如果为false，则如果一个选项同时具有短格式和长格式，则仅将参数与长格式一起显示，例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  -f, --file=ARCHIVE         use archive file or device ARCHIVE
</pre></td></tr></tbody></table>

<p>在选项下方将显示一条消息，指出该参数适用于两种形式。可以使用以下方式禁用此消息<code>dup-args-note</code> （见下文）。
</p>
<p>默认为false。
</p></dd></dl>

<dl>
<dt><u>帮助输出：</u>布尔<b>dup-args-note</b> <a name="IDX582"></a>
</dt>
<dd><p>如果此变量为true（默认值），则在帮助输出的末尾显示以下通知：</p>
<blockquote><p>长选项的强制或可选参数对于任何相应的短选项也是必选或可选的。
</p></blockquote>

<p>设置<code>no-dup-args-note</code>禁止此消息。通常，只有一个变量<code>dup-args</code>要么<code>dup-args-note</code>应该设置。
</p></dd></dl>

<dl>
<dt><u>帮助输出：</u>偏移量<b>short-opt-col</b> <a name="IDX583"></a>
</dt>
<dd><p>简短选项开始的列。默认值为2。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --help|grep ARCHIVE</kbd>
  -f, --file=ARCHIVE   use archive file or device ARCHIVE
$ <kbd>ARGP_HELP_FMT=short-opt-col=6 tar --help|grep ARCHIVE</kbd>
      -f, --file=ARCHIVE   use archive file or device ARCHIVE
</pre></td></tr></tbody></table></dd></dl>

<dl>
<dt><u>帮助输出：</u>偏移<b>long-opt-col</b> <a name="IDX584"></a>
</dt>
<dd><p>长选项开始的列。默认值为6。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --help|grep ARCHIVE</kbd>
  -f, --file=ARCHIVE   use archive file or device ARCHIVE
$ <kbd>ARGP_HELP_FMT=long-opt-col=16 tar --help|grep ARCHIVE</kbd>
  -f,           --file=ARCHIVE   use archive file or device ARCHIVE
</pre></td></tr></tbody></table></dd></dl>

<dl>
<dt><u>帮助输出：</u> offset <b>doc-opt-col</b> <a name="IDX585"></a>
</dt>
<dd><p><em>doc选项</em>开始的列。doc选项实际上不是选项，而是任意文档，其显示方式与选项大致相同。例如，在<samp>`--format'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  -H, --format=FORMAT        create archive of the given format.

 FORMAT is one of the following:

    gnu                      GNU tar 1.13.x format
    oldgnu                   GNU format as per tar &lt;= 1.12
    pax                      POSIX 1003.1-2001 (pax) format
    posix                    same as pax
    ustar                    POSIX 1003.1-1988 (ustar) format
    v7                       old V7 tar format
</pre></td></tr></tbody></table>

<p>格式名称是doc选项。因此，如果您设置<kbd>ARGP_HELP_FMT=doc-opt-col=6</kbd>帮助输出的以上部分如下所示：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  -H, --format=FORMAT        create archive of the given format.

 FORMAT is one of the following:

        gnu                      GNU tar 1.13.x format
        oldgnu                   GNU format as per tar &lt;= 1.12
        pax                      POSIX 1003.1-2001 (pax) format
        posix                    same as pax
        ustar                    POSIX 1003.1-1988 (ustar) format
        v7                       old V7 tar format
</pre></td></tr></tbody></table></dd></dl>

<dl>
<dt><u>帮助输出：</u> offset <b>opt-doc-col</b> <a name="IDX586"></a>
</dt>
<dd><p>选项描述开始的列。默认值为29。
</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --help|grep ARCHIVE</kbd>
  -f, --file=ARCHIVE         use archive file or device ARCHIVE
$ <kbd>ARGP_HELP_FMT=opt-doc-col=19 tar --help|grep ARCHIVE</kbd>
  -f, --file=ARCHIVE   use archive file or device ARCHIVE
$ <kbd>ARGP_HELP_FMT=opt-doc-col=9 tar --help|grep ARCHIVE</kbd>
  -f, --file=ARCHIVE
           use archive file or device ARCHIVE
</pre></td></tr></tbody></table>

<p>请注意，如果<code>opt-doc-col</code>价值太小。
</p></dd></dl>

<dl>
<dt><u>帮助输出：</u> offset <b>header-col</b> <a name="IDX587"></a>
</dt>
<dd><p>打印<em>组标题的</em>列。组标题是选项组之前的描述性文本。例如，在以下文本中：</p>
<pre class="verbatim"> Main operation mode:

  -A, --catenate, --concatenate   append tar files to
                             an archive
  -c, --create               create a new archive
</pre>
<p><samp>`Main operation mode:'</samp>是组头。
</p>
<p>预设值为1。
</p></dd></dl>

<dl>
<dt><u>帮助输出：</u>抵消<b>用法-缩进</b> <a name="IDX588"></a>
</dt>
<dd><p>包装的用法行的缩进。影响<samp>`--usage'</samp>输出。默认值为12。
</p></dd></dl>

<dl>
<dt><u>帮助输出：</u>偏移量<b>rmargin</b> <a name="IDX589"></a>
</dt>
<dd><p>文本输出的右边距。用于包装。
</p></dd></dl>

<hr size="6">
<a name="Fixing-Snapshot-Files"></a>
<a name="SEC186"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC185" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC185" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">D.修复快照文件</h1>


<p>各种情况都可能导致设备编号发生变化：升级内核版本，重新配置硬件，以不同顺序加载内核模块，使用动态组装的虚拟卷（例如，使用<acronym>LVM</acronym>或<acronym>RAID</acronym> ），热插拔驱动器（例如，外部USB）或Firewire驱动器）等在大多数情况下，用户不会注意到此更改。但是，它会影响<code>tar</code>增量备份：设备号存储在tar快照文件中（请参阅<a href="#SEC194">“增量快照文件的格式”</a>部分），用于确定自上次备份以来文件是否已更改。如果设备编号由于某种原因而更改，则默认情况下，您运行的下一个备份将是完整备份。
</p>

<a name="IDX590"></a>
<p>为了最大程度地减少这些情况下的影响，GNU <code>tar</code>附带<code>tar-snapshot-edit</code>实用程序，用于检查和更新快照文件中的设备编号。（该实用程序由Dustin J. Mitchell编写，也可以从<a href="http://www.gnu.org/software/tar/utils/tar-snapshot-edit.html"><acronym>GNU获得。</acronym> <code>tar</code>主页</a> 。）
</p>
<p>要获取快照文件中找到的设备编号的摘要，请运行</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar-snapshot-edit <var>snapfile</var></kbd>
</pre></td></tr></tbody></table>

<p>哪里<var>snapfile</var>是快照文件的名称（您可以在单个命令行中提供任意数量的文件）。然后，您可以比较快照文件之间的数量，或与实时文件系统上当前正在使用的数量进行比较（使用<code>ls -l</code>要么<code>stat</code> ）。
</p>
<p>假设设备编号确实发生了变化，通常可以简单地告诉<acronym>GNU</acronym> <code>tar</code>使用以下命令处理这些备份的增量快照文件时忽略设备号<samp>`--no-check-device'</samp>选项（请参阅<a href="#device-numbers">设备编号</a> ）。
</p>
<p>或者，您可以使用<code>tar-edit-snapshot</code>脚本的<samp>`-r'</samp>选项以更新快照文件中所有出现的给定设备编号。它采用以下形式的单个参数<samp>`<var>olddev</var>-<var>newdev</var>'</samp> ，在哪里<var>olddev</var>是快照文件中使用的设备号，并且<var>newdev</var>是相应的新设备号。两个数字都可以用十六进制指定（例如， <samp>`0xfe01'</samp> ），十进制（例如， <samp>`65025'</samp> ），或作为主：次数字对（例如， <samp>`254:1'</samp> ）。要一次更改多个设备编号，请在一个逗号分隔的列表中指定它们，如下所示： <samp>`-r 0x3060-0x4500,0x307-0x4600'</samp> 。
</p>
<p>在更新快照文件之前，最好创建它的备份副本。这是通过完成<samp>`-b'</samp>选项。备份文件的名称通过添加获得<samp>`~'</samp>原始文件名。
</p>
<p>会话示例：</p><table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar-snapshot-edit root_snap.0 boot_snap.0</kbd>
File: root_snap.0
  Detected snapshot file version: 2

  Device 0x0000 occurs 1 times.
  Device 0x0003 occurs 1 times.
  Device 0x0005 occurs 1 times.
  Device 0x0013 occurs 1 times.
  Device 0x6801 occurs 1 times.
  Device 0x6803 occurs 6626 times.
  Device 0xfb00 occurs 1 times.

File: boot_snap.0
  Detected snapshot file version: 2

  Device 0x6801 occurs 3 times.
$ <kbd>tar-snapshot-edit -b -r 0x6801-0x6901,0x6803-0x6903 root_snap.0 boot_snap.0</kbd>
File: root_snap.0
  Detected snapshot file version: 2

  Updated 6627 records.

File: boot_snap.0
  Detected snapshot file version: 2

  Updated 3 records.
</pre></td></tr></tbody></table>
<hr size="6">
<a name="Tar-Internals"></a>
<a name="SEC187"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC186" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC188" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC186" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">E. Tar内部</h1>


<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC188">基本的Tar格式</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC189"><acronym>GNU</acronym>对存档格式的扩展</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC190">存储稀疏文件</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC194">增量快照文件的格式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC195">转储目录</a></td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr size="6">
<a name="Standard"></a>
<a name="SEC188"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC187" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC189" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="unnumberedsec">基本的Tar格式</h2>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p>尽管存档可能包含许多文件，但存档本身是单个普通文件。像任何其他文件一样，可以将存档文件写入存储设备（例如磁带或磁盘），通过管道或网络发送，保存在活动文件系统上，甚至存储在另一个存档中。如果不使用存档文件，则不容易读取或操作存档文件。 <code>tar</code>实用程序或<acronym>GNU</acronym> Emacs中的Tar模式。
</p>
<p>从物理上讲，档案文件由一系列文件条目组成，这些文件条目以归档结尾条目结尾，该条目由两个512个零字节块组成。文件条目通常描述档案中的一个文件（ <em>档案成员</em> ），并且由文件头和文件内容组成。文件头包含文件名和统计信息，其中包括校验和信息<code>tar</code>用于检测文件损坏以及有关文件类型的信息。
</p>
<p>允许档案馆拥有一个以上具有相同成员名称的成员。发生这种情况的一种方式是，如果档案中存储了一个以上的文件版本。有关将文件的新版本添加到存档的信息，请参阅<a href="#SEC63">更新存档</a> 。
</p>
<p>除描述存档成员的条目外，存档中还可包含以下条目： <code>tar</code>本身用于存储信息。有关此类存档条目的示例，请参阅<a href="#SEC168">在存档中包括标签</a>一节。
</p>
<p>一种<code>tar</code>存档文件包含一系列块。每个块包含<code>BLOCKSIZE</code>个字节。尽管可以认为这种格式是在磁带上，但是经常使用其他介质。
</p>
<p>每个归档的文件都由描述文件的标题块表示，后跟零个或多个给出文件内容的块。在存档文件的末尾，有两个512字节的块，填充有二进制零，作为文件结束标记。合理的系统应在归档文件的末尾写入此类文件结束标记，但在读取归档文件时，不得假定存在这样的块。特别是<acronym>GNU</acronym> <code>tar</code>如果未遇到警告，则始终发出警告。
</p>
<p>可以为物理I / O操作<em>阻止</em>这些块。每条记录<var>n</var>块（其中<var>n</var>由<samp>`--blocking-factor=<var>512-size</var>'</samp> （ <samp>`-b <var>512-size</var>'</samp> ）选项<code>tar</code> ）是用一个<samp>`write ()'</samp>操作。在磁带上，这种写入的结果是单个记录。编写归档文件时，应以完整大小写入块的最后一条记录，零块之后的块应包含全零。读取档案时，合理的系统应正确处理最后一条记录短于其余记录或在零块后包含垃圾记录的档案。
</p>
<p>标头块在C中的定义如下。在<acronym>GNU中</acronym> <code>tar</code>发行版，这是文件<tt>src / tar.h的一部分</tt> ：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">

/* tar Header Block, from POSIX 1003.1-1990.  */

/* POSIX header.  */

struct posix_header
{                              /* byte offset */
  char name[100];               /*   0 */
  char mode[8];                 /* 100 */
  char uid[8];                  /* 108 */
  char gid[8];                  /* 116 */
  char size[12];                /* 124 */
  char mtime[12];               /* 136 */
  char chksum[8];               /* 148 */
  char typeflag;                /* 156 */
  char linkname[100];           /* 157 */
  char magic[6];                /* 257 */
  char version[2];              /* 263 */
  char uname[32];               /* 265 */
  char gname[32];               /* 297 */
  char devmajor[8];             /* 329 */
  char devminor[8];             /* 337 */
  char prefix[155];             /* 345 */
                                /* 500 */
};

#define TMAGIC   &quot;ustar&quot;        /* ustar and a null */
#define TMAGLEN  6
#define TVERSION &quot;00&quot;           /* 00 and no null */
#define TVERSLEN 2

/* Values used in typeflag field.  */
#define REGTYPE  '0'            /* regular file */
#define AREGTYPE '\0'           /* regular file */
#define LNKTYPE  '1'            /* link */
#define SYMTYPE  '2'            /* reserved */
#define CHRTYPE  '3'            /* character special */
#define BLKTYPE  '4'            /* block special */
#define DIRTYPE  '5'            /* directory */
#define FIFOTYPE '6'            /* FIFO special */
#define CONTTYPE '7'            /* reserved */

#define XHDTYPE  'x'            /* Extended header referring to the
                                   next file in the archive */
#define XGLTYPE  'g'            /* Global extended header */

/* Bits used in the mode field, values in octal.  */
#define TSUID    04000          /* set UID on execution */
#define TSGID    02000          /* set GID on execution */
#define TSVTX    01000          /* reserved */
                                /* file permissions */
#define TUREAD   00400          /* read by owner */
#define TUWRITE  00200          /* write by owner */
#define TUEXEC   00100          /* execute/search by owner */
#define TGREAD   00040          /* read by group */
#define TGWRITE  00020          /* write by group */
#define TGEXEC   00010          /* execute/search by group */
#define TOREAD   00004          /* read by other */
#define TOWRITE  00002          /* write by other */
#define TOEXEC   00001          /* execute/search by other */

/* tar Header Block, GNU extensions.  */

/* In GNU tar, SYMTYPE is for to symbolic links, and CONTTYPE is for
   contiguous files, so maybe disobeying the &quot;reserved&quot; comment in POSIX
   header description.  I suspect these were meant to be used this way, and
   should not have really been &quot;reserved&quot; in the published standards.  */

/* *BEWARE* *BEWARE* *BEWARE* that the following information is still
   boiling, and may change.  Even if the OLDGNU format description should be
   accurate, the so-called GNU format is not yet fully decided.  It is
   surely meant to use only extensions allowed by POSIX, but the sketch
   below repeats some ugliness from the OLDGNU format, which should rather
   go away.  Sparse files should be saved in such a way that they do *not*
   require two passes at archive creation time.  Huge files get some POSIX
   fields to overflow, alternate solutions have to be sought for this.  */

/* Descriptor for a single file hole.  */

struct sparse
{                              /* byte offset */
  char offset[12];              /*   0 */
  char numbytes[12];            /*  12 */
                                /*  24 */
};

/* Sparse files are not supported in POSIX ustar format.  For sparse files
   with a POSIX header, a GNU extra header is provided which holds overall
   sparse information and a few sparse descriptors.  When an old GNU header
   replaces both the POSIX header and the GNU extra header, it holds some
   sparse descriptors too.  Whether POSIX or not, if more sparse descriptors
   are still needed, they are put into as many successive sparse headers as
   necessary.  The following constants tell how many sparse descriptors fit
   in each kind of header able to hold them.  */

#define SPARSES_IN_EXTRA_HEADER  16
#define SPARSES_IN_OLDGNU_HEADER 4
#define SPARSES_IN_SPARSE_HEADER 21

/* Extension header for sparse files, used immediately after the GNU extra
   header, and used only if all sparse information cannot fit into that
   extra header.  There might even be many such extension headers, one after
   the other, until all sparse information has been recorded.  */

struct sparse_header
{                              /* byte offset */
  struct sparse sp[SPARSES_IN_SPARSE_HEADER];
                                /*   0 */
  char isextended;              /* 504 */
                                /* 505 */
};

/* The old GNU format header conflicts with POSIX format in such a way that
   POSIX archives may fool old GNU tar's, and POSIX tar's might well be
   fooled by old GNU tar archives.  An old GNU format header uses the space
   used by the prefix field in a POSIX header, and cumulates information
   normally found in a GNU extra header.  With an old GNU tar header, we
   never see any POSIX header nor GNU extra header.  Supplementary sparse
   headers are allowed, however.  */

struct oldgnu_header
{                              /* byte offset */
  char unused_pad1[345];        /*   0 */
  char atime[12];               /* 345 Incr. archive: atime of the file */
  char ctime[12];               /* 357 Incr. archive: ctime of the file */
  char offset[12];              /* 369 Multivolume archive: the offset of
                                   the start of this volume */
  char longnames[4];            /* 381 Not used */
  char unused_pad2;             /* 385 */
  struct sparse sp[SPARSES_IN_OLDGNU_HEADER];
                                /* 386 */
  char isextended;              /* 482 Sparse file: Extension sparse header
                                   follows */
  char realsize[12];            /* 483 Sparse file: Real size*/
                                /* 495 */
};

/* OLDGNU_MAGIC uses both magic and version fields, which are contiguous.
   Found in an archive, it indicates an old GNU header format, which will be
   hopefully become obsolescent.  With OLDGNU_MAGIC, uname and gname are
   valid, though the header is not truly POSIX conforming.  */
#define OLDGNU_MAGIC &quot;ustar  &quot;  /* 7 chars and a null */

/* The standards committee allows only capital A through capital Z for
   user-defined expansion.  Other letters in use include:

   'A' Solaris Access Control List
   'E' Solaris Extended Attribute File
   'I' Inode only, as in 'star'
   'N' Obsolete GNU tar, for file names that do not fit into the main header.
   'X' POSIX 1003.1-2001 eXtended (VU version)  */

/* This is a dir entry that contains the names of files that were in the
   dir at the time the dump was made.  */
#define GNUTYPE_DUMPDIR 'D'

/* Identifies the *next* file on the tape as having a long linkname.  */
#define GNUTYPE_LONGLINK 'K'

/* Identifies the *next* file on the tape as having a long name.  */
#define GNUTYPE_LONGNAME 'L'

/* This is the continuation of a file that began on another volume.  */
#define GNUTYPE_MULTIVOL 'M'

/* This is for sparse files.  */
#define GNUTYPE_SPARSE 'S'

/* This file is a tape/volume header.  Ignore it on extraction.  */
#define GNUTYPE_VOLHDR 'V'

/* Solaris extended header */
#define SOLARIS_XHDTYPE 'X'

/* J&ouml;rg Schilling star header */

struct star_header
{                              /* byte offset */
  char name[100];               /*   0 */
  char mode[8];                 /* 100 */
  char uid[8];                  /* 108 */
  char gid[8];                  /* 116 */
  char size[12];                /* 124 */
  char mtime[12];               /* 136 */
  char chksum[8];               /* 148 */
  char typeflag;                /* 156 */
  char linkname[100];           /* 157 */
  char magic[6];                /* 257 */
  char version[2];              /* 263 */
  char uname[32];               /* 265 */
  char gname[32];               /* 297 */
  char devmajor[8];             /* 329 */
  char devminor[8];             /* 337 */
  char prefix[131];             /* 345 */
  char atime[12];               /* 476 */
  char ctime[12];               /* 488 */
                                /* 500 */
};

#define SPARSES_IN_STAR_HEADER      4
#define SPARSES_IN_STAR_EXT_HEADER  21

struct star_in_header
{
  char fill[345];       /*   0  Everything that is before t_prefix */
  char prefix[1];       /* 345  t_name prefix */
  char fill2;           /* 346  */
  char fill3[8];        /* 347  */
  char isextended;      /* 355  */
  struct sparse sp[SPARSES_IN_STAR_HEADER]; /* 356  */
  char realsize[12];    /* 452  Actual size of the file */
  char offset[12];      /* 464  Offset of multivolume contents */
  char atime[12];       /* 476  */
  char ctime[12];       /* 488  */
  char mfill[8];        /* 500  */
  char xmagic[4];       /* 508  &quot;tar&quot; */
};

struct star_ext_header
{
  struct sparse sp[SPARSES_IN_STAR_EXT_HEADER];
  char isextended;
};

</pre></td></tr></tbody></table>
<p>标头块中的所有字符均使用ASCII本地变体中的8位字符表示。结构中的每个字段都是连续的。也就是说，结构内没有使用填充。存档介质上的每个字符都连续存储。
</p>
<p>表示文件内容的字节（在每个文件的标题块之后）不会以任何方式转换，也不会被约束为表示任何字符集中的字符。的<code>tar</code>格式不能将文本文件与二进制文件区分开，并且不执行文件内容的翻译。
</p>
<p>的<code>name</code> ， <code>linkname</code> ， <code>magic</code> ， <code>uname</code>和<code>gname</code>是以空字符结尾的字符串。所有其他字段均为ASCII格式的零填充八进制数。每个数字字段的宽度<var>w</var>包含<var>w</var>减去1位数字，然后为null。（在扩展的<acronym>GNU</acronym>格式中，数字字段可以采用其他形式。）
</p>
<p>的<code>name</code> field是文件的文件名，目录名（如果有）位于文件名之前，并用斜杠分隔。
</p>
<p><cite>在字段溢出之前，</cite>看看<cite>名字有多大？</cite>
</p>

<p>的<code>mode</code>字段提供9位用于指定文件权限，提供3位用于指定Set <acronym>UID</acronym> ，Set <acronym>GID</acronym>和Save Text（ <em>sticky</em> ）模式。这些位的值在上面定义。当需要特殊权限才能创建具有给定模式的文件，并且从存档中恢复文件的用户不拥有此类权限时，指定那些特殊权限的模式位将被忽略。从归档文件还原文件的操作系统不支持的模式将被忽略。创建或更新档案时，应假冒不受支持的模式；例如，可以从<em>其他</em>权限复制组权限。
</p>
<p>的<code>uid</code>和<code>gid</code>字段分别是文件所有者的数字用户名和组<acronym>ID</acronym> 。如果操作系统不支持数字用户或组<acronym>ID</acronym> ，则应忽略这些字段。
</p>
<p>的<code>size</code> field是文件的大小（以字节为单位）；链接文件被存档，该字段指定为零。
</p>
<p>的<code>mtime</code>字段表示文件在归档时的数据修改时间。它表示自1970年1月1日00:00协调世界时以来的秒数的整数。
</p>
<p>的<code>chksum</code>字段表示标题块中所有字节的简单总和。报头中的每个8位字节被添加到一个无符号整数，该整数被初始化为零，其精度应不小于17位。在计算校验和时， <code>chksum</code>将该字段视为全部空白。
</p>
<p>的<code>typeflag</code>字段指定存档文件的类型。如果特定实现无法识别或不允许指定类型，则将文件提取为常规文件。发生此操作时， <code>tar</code>对标准错误发出警告。
</p>
<p>的<code>atime</code>和<code>ctime</code>字段用于进行增量备份；它们分别存储特定文件的访问和状态更改时间。
</p>
<p>的<code>offset</code>由<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ）选项，则可以进行多卷归档。偏移量是文件中需要重新开始的字节数，以便在下一个磁带上继续该文件，即，我们在其中存储连续文件继续的位置。
</p>
<p>添加了以下字段来处理稀疏文件。如果文件包含未分配的块（最终以零表示，即没有有用的数据），则该文件<em>稀疏</em> 。检验文件是否稀疏的一种测试是查看为其分配的块数与文件中的字符数；如果为该文件分配的块少于通常为该大小的文件分配的块，则该文件稀疏。这是方法<code>tar</code>用来检测稀疏文件，一旦检测到此类文件，便会与非稀疏文件区别对待。
</p>
<p>稀疏文件通常<code>dbm</code>文件或其他数据库类型的文件，这些文件有时在某些点上具有数据，并且在文件的大部分中具有空值。此类文件在<samp>`ls -l'</samp>实际上，文件中可能包含非常少量的重要数据。因此，不希望有<code>tar</code>认为它必须备份整个文件，因为大量空间浪费在空块上，这可能导致磁带上的空间用完了比需要的时间更早。因此，将处理稀疏文件，以使这些空块不会写入磁带。相反，写入磁带的是对稀疏文件的各种描述：孔的位置，孔的大小以及在孔的末尾发现了多少数据。这样，文件占用的磁带空间可能要少得多，并且以后提取文件时，其外观将与之前的样子完全相同。以下是用于处理稀疏文件的字段的描述：</p>
<p>的<code>sp</code>是一个数组<code>struct sparse</code> 。每<code>struct sparse</code>包含两个12个字符的字符串，代表文件的偏移量，以及在该偏移量处要写入的字节数。偏移量是绝对的，并且不相对于先前数组元素中的偏移量。
</p>
<p>标头可以容纳其中四个<code>struct sparse</code>在这一刻;如果需要更多，则它们不存储在标题中。
</p>
<p>的<code>isextended</code>当一个<code>extended_header</code>需要处理文件。请注意，这意味着只能在处理稀疏文件时设置此标志，并且仅在文件的描述不适合头文件中的稀疏结构分配的空间时才设置此标志。换句话说，需要一个extended_header。
</p>
<p>的<code>extended_header</code>结构用于稀疏文件，这些稀疏文件需要的稀疏结构超出了头文件的大小。割台可容纳4个此类结构；如果需要更多，则标记<code>isextended</code>被设置，下一个块是<code>extended_header</code> 。
</p>
<p>每<code>extended_header</code>结构包含21个稀疏结构的数组，以及类似的<code>isextended</code>标头的标志。这样的数目可能不确定<code>extended_header</code>描述一个稀疏文件。
</p>
<dl compact>
<dt> <code>REGTYPE</code></dt>
<dt> <code>AREGTYPE</code></dt>
<dd><p>这些标志代表常规文件。为了与旧版本兼容<code>tar</code> ， 一种<code>typeflag</code>的价值<code>AREGTYPE</code>应该被静默地识别为常规文件。新档案应使用<code>REGTYPE</code> 。另外，为了向后兼容， <code>tar</code>将名称以斜杠结尾的常规文件视为目录。
</p>
</dd>
<dt> <code>LNKTYPE</code></dt>
<dd><p>该标志表示一个链接到另一个先前已归档的任何类型文件的文件。在Unix中，此类文件由具有相同设备和inode编号的每个文件标识。链接名称是在<code>linkname</code>尾随为null的字段。
</p>
</dd>
<dt> <code>SYMTYPE</code></dt>
<dd><p>这表示到另一个文件的符号链接。链接名称是在<code>linkname</code>尾随为null的字段。
</p>
</dd>
<dt> <code>CHRTYPE</code></dt>
<dt> <code>BLKTYPE</code></dt>
<dd><p>它们分别代表字符特殊文件和块特殊文件。在这种情况下<code>devmajor</code>和<code>devminor</code>字段将分别包含主设备号和次设备号。操作系统可能会将设备规格映射到他们自己的本地规格，或者可能会忽略该条目。
</p>
</dd>
<dt> <code>DIRTYPE</code></dt>
<dd><p>该标志指定目录或子目录。目录名称<code>name</code>字段应以斜杠结尾。在基于目录执行磁盘分配的系统上， <code>size</code>字段将包含目录可以容纳的最大字节数（可以四舍五入到最接近的磁盘块分配单元）。一种<code>size</code>零字段表示没有这种限制。不支持这种限制方式的系统应忽略<code>size</code>领域。
</p>
</dd>
<dt> <code>FIFOTYPE</code></dt>
<dd><p>这指定FIFO特殊文件。请注意，对FIFO文件的归档将存档此文件的存在，而非其内容。
</p>
</dd>
<dt> <code>CONTTYPE</code></dt>
<dd><p>这指定了一个连续文件，该文件与普通文件相同，不同之处在于，在支持该文件的操作系统中，其所有空间都在磁盘上连续分配。不允许连续分配的操作系统应静默将此类型视为普通文件。
</p>
</dd>
<dt> <code>A</code> …<code>Z</code></dt>
<dd><p>这些保留用于自定义实现。其中一些以<acronym>GNU</acronym>修改格式使用，如下所述。
</p>
</dd>
</dl>

<p>其他值保留用于P1003标准的将来修订版中的规范，并且不应被其他任何人使用。 <code>tar</code>程序。
</p>
<p>的<code>magic</code>字段表示此归档文件是以P1003归档文件格式输出的。如果此字段包含<code>TMAGIC</code> ， <code>uname</code>和<code>gname</code>字段将分别包含文件所有者和组的ASCII表示形式。如果找到，则使用user和group <acronym>ID，</acronym>而不是<code>uid</code>和<code>gid</code>领域。
</p>
<p>有关参考，请参见ISO / IEC 9945-1：1990或IEEE Std 1003.1-1990，第169-173页（第10.1节）中的“ <cite>存档/交换文件格式”</cite> ；和IEEE Std 1003.2-1992，第380-388页（第4.48节）和第936-940页（第E.4.48节），用于pax- <cite>便携式归档交换</cite> 。
</p>
<hr size="6">
<a name="Extensions"></a>
<a name="SEC189"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC188" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC190" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="unnumberedsec"> <acronym>GNU</acronym>对存档格式的扩展</h2>
<blockquote><p><em>（一旦修改此节点，此消息将消失。）</em>
</p></blockquote>


<p><acronym>GNU</acronym>格式使用其他文件类型来描述档案中文件的新类型。这些在下面列出。
</p>
<dl compact>
<dt> <code>GNUTYPE_DUMPDIR</code></dt>
<dt> <code>'D'</code></dt>
<dd><p>这表示目录和由文件创建的文件列表<samp>`--incremental'</samp> （ <samp>`-G'</samp> ） 选项。的<code>size</code>字段给出了相关文件列表的总大小。每个文件名前面都有一个<samp>`Y'</samp> （文件应在此存档中）或<samp>`N'</samp> 。（该文件是目录，或未存储在存档中。）每个文件名都以null终止。最后一个文件名后还有一个空值。
</p>
</dd>
<dt> <code>GNUTYPE_MULTIVOL</code></dt>
<dt> <code>'M'</code></dt>
<dd><p>这表示一个文件，该文件是使用<samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ） 选项。这里没有给出文件的原始类型。的<code>size</code>字段给出了该文件的最大大小（假设在写出文件之前卷没有结束）。的<code>offset</code>字段给出了从文件开头开始的偏移量，该位置从文件的这一部分开始。从而<code>size</code>加<code>offset</code>应该等于文件的原始大小。
</p>
</dd>
<dt> <code>GNUTYPE_SPARSE</code></dt>
<dt> <code>'S'</code></dt>
<dd><p>该标志表明我们正在处理一个稀疏文件。请注意，归档稀疏文件需要特殊的操作才能在文件中找到孔，这些孔会标记这些孔的位置以及在孔之后找到的数据字节数。
</p>
</dd>
<dt> <code>GNUTYPE_VOLHDR</code></dt>
<dt> <code>'V'</code></dt>
<dd><p>此文件类型用于标记通过<samp>`--label=<var>archive-label</var>'</samp> （ <samp>`-V <var>archive-label</var>'</samp> ）选项（创建归档文件时）。的<code>name</code>字段包含<code>name</code>在之后给出<samp>`--label=<var>archive-label</var>'</samp> （ <samp>`-V <var>archive-label</var>'</samp> ） 选项。的<code>size</code>字段为零。存档的每个卷中只有第一个文件应具有此类型。
</p>
</dd>
</dl>

<p>对于包含超出基本格式范围的数字或时间戳的字段， <acronym>GNU</acronym>格式使用base-256表示形式而不是ASCII八进制数字。如果前导字节为0xff（255），则该字段的所有字节（包括前导字节）都按big-endian顺序连接，结果是以二进制补码形式表示的负数。如果前导字节为0x80（128），则该字段的非前导字节以big-endian顺序连接，结果是以二进制形式表示的正数。除0xff，0x80和ASCII八进制数字以外的前导字节保留给以后使用，基本格式的范围内的值的base-256表示形式也保留给以后使用。
</p>
<p>如果使用以下选项，则可能无法读取非<acronym>GNU</acronym>系统上的<acronym>GNU</acronym>格式档案。 <samp>`--incremental'</samp> （ <samp>`-G'</samp> ）， <samp>`--multi-volume'</samp> （ <samp>`-M'</samp> ）， <samp>`--sparse'</samp> （ <samp>`-S'</samp> ）， 要么<samp>`--label=<var>archive-label</var>'</samp> （ <samp>`-V <var>archive-label</var>'</samp> ）在写档案时使用。一般来说，如果<code>tar</code>不使用标头的<acronym>GNU</acronym>添加字段，其他版本的<code>tar</code>应该能够读取存档。否则， <code>tar</code>程序将给出错误，最有可能是校验和错误。
</p>
<hr size="6">
<a name="Sparse-Formats"></a>
<a name="SEC190"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC189" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC191" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="unnumberedsec">存储稀疏文件</h2>


<p>稀疏文件的概念以及从<acronym>GNU</acronym>角度来看的处理方式<code>tar</code> <a href="#SEC137">存档稀疏文件中</a>已详细介绍了该用户。本章介绍了<acronym>GNU</acronym>的内部格式<code>tar</code>用于存储此类文件。
</p>
<p><acronym>GNU中</acronym>对稀疏文件的支持<code>tar</code>历史悠久。我能够找到的最早提供这种支持的版本是1990年11月发布的1.09。当时引入的格式称为<em>旧GNU</em>稀疏格式，尽管它的设计包含许多缺陷，但这是<acronym>GNU</acronym>唯一的格式<code>tar</code>在版本1.14（2004年5月）之前一直受支持，该版本引入了对<acronym>PAX</acronym>存档中的稀疏存档的初始支持（请参阅<a href="#SEC146"><acronym>GNU</acronym></a>部分） <a href="#SEC146"><code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a> ）。这种格式也并非没有设计缺陷，后来在1.15.2版（2005年11月）和1.15.92版（2006年6月）中得到了改进。
</p>
<p>除了GNU稀疏格式外， <acronym>GNU</acronym> <code>tar</code>能够读取和提取由存档的稀疏文件<code>star</code> 。
</p>
<p>以下小节详细介绍了每种格式。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC191">E.0.1旧的GNU格式</a></td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC192">E.0.2 PAX格式，版本0.0和0.1</a></td><td>  </td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC193">E.0.3 PAX格式，版本1.0</a></td><td>  </td><td align="left" valign="top"></td></tr>
</tbody></table>

<hr size="6">
<a name="Old-GNU-Format"></a>
<a name="SEC191"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC190" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC192" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC190" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="appendixsubsec">E.0.1旧的GNU格式</h3>

<p>1990年11月（v。1.09）引入的格式是在标准之上设计的<code>ustar</code>标头以一种不幸的方式使用，它的某些字段覆盖了POSIX所需的字段。</p>
<p>旧的GNU稀疏标头按类型指定<samp>`S'</samp> （ <code>GNUTYPE_SPARSE</code> ），并具有以下布局：</p>
<table>
<thead><tr><th><p>偏移量</p></th><th><p>尺寸</p></th><th><p>名称</p></th><th><p>数据类型</p></th><th><p>内容</p></th></tr></thead>
<tbody><tr><td><p>0</p></td><td><p>345</p></td><td>        </td><td><p>不适用</p></td><td><p>未使用。
</p></td></tr>
<tr><td><p>345</p></td><td><p>12</p></td><td><p>一次</p></td><td><p>数</p></td><td><p> <code>atime</code>文件。
</p></td></tr>
<tr><td><p>357</p></td><td><p>12</p></td><td><p>时间</p></td><td><p>数</p></td><td><p> <code>ctime</code>文件的。
</p></td></tr>
<tr><td><p>369</p></td><td><p>12</p></td><td><p>抵销</p></td><td><p>数</p></td><td><p>对于多卷归档：此卷开始的偏移量。
</p></td></tr>
<tr><td><p>381</p></td><td><p>4</p></td><td>        </td><td><p>不适用</p></td><td><p>未使用。
</p></td></tr>
<tr><td><p>385</p></td><td><p>1个</p></td><td>        </td><td><p>不适用</p></td><td><p>未使用。
</p></td></tr>
<tr><td><p>386</p></td><td><p>96</p></td><td><p>SP</p></td><td><p> <code>sparse_header</code> </p></td><td><p>（4个条目）文件映射。
</p></td></tr>
<tr><td><p>482</p></td><td><p>1个</p></td><td><p>被扩展</p></td><td><p>布尔</p></td><td><p> <code>1</code>如果出现扩展名稀疏标头， <code>0</code>除此以外。
</p></td></tr>
<tr><td><p>483</p></td><td><p>12</p></td><td><p>真实大小</p></td><td><p>数</p></td><td><p>文件的实际大小。
</p></td></tr>
</tbody></table>

<p>每个<code>sparse_header</code>偏移量为386的对象描述单个数据块。它具有以下结构：</p>
<table>
<thead><tr><th><p>偏移量</p></th><th><p>尺寸</p></th><th><p>数据类型</p></th><th><p>内容</p></th></tr></thead>
<tbody><tr><td><p>0</p></td><td><p>12</p></td><td><p>数</p></td><td><p>块开头的偏移量。
</p></td></tr>
<tr><td><p>12</p></td><td><p>12</p></td><td><p>数</p></td><td><p>块的大小。
</p></td></tr>
</tbody></table>

<p>如果成员包含四个以上的块，则<code>isextended</code>标头的字段具有值<code>1</code>在主标头之后是一个或多个<em>扩展标头</em> 。每个此类标头具有以下结构：</p>
<table>
<thead><tr><th><p>偏移量</p></th><th><p>尺寸</p></th><th><p>名称</p></th><th><p>数据类型</p></th><th><p>内容</p></th></tr></thead>
<tbody><tr><td><p>0</p></td><td><p>21</p></td><td><p>SP</p></td><td><p> <code>sparse_header</code> </p></td><td>
<p>（21个条目）文件映射。
</p></td></tr>
<tr><td><p>504</p></td><td><p>1个</p></td><td><p>被扩展</p></td><td><p>布尔</p></td><td><p> <code>1</code>如果跟随扩展名稀疏标头，或者<code>0</code>除此以外。
</p></td></tr>
</tbody></table>

<p>标头包含<code>isextended=0</code>结束地图。
</p>
<hr size="6">
<a name="PAX-0"></a>
<a name="SEC192"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC191" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC193" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC190" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="appendixsubsec">E.0.2 PAX格式，版本0.0和0.1</h3>

<p>该分支有两种可用格式。版本号<code>0.0</code>是供稀疏格式使用的初始版本<code>tar</code>版本1.14-11.15.1。稀疏文件映射以扩展名（ <code>x</code> ）PAX标头变量：</p>
<dl compact>
<dt> <code>GNU.sparse.size</code></dt>
<dd><p>存储文件的实际大小；</p>
</dd>
<dt> <code>GNU.sparse.numblocks</code></dt>
<dd><p>稀疏图中的块数；</p>
</dd>
<dt> <code>GNU.sparse.offset</code></dt>
<dd><p>数据块的偏移量；</p>
</dd>
<dt> <code>GNU.sparse.numbytes</code></dt>
<dd><p>数据块的大小。
</p></dd>
</dl>

<p>后两个变量针对每个数据块重复，因此总体结构如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">GNU.sparse.size=<var>size</var>
GNU.sparse.numblocks=<var>numblocks</var>
repeat <var>numblocks</var> times
  GNU.sparse.offset=<var>offset</var>
  GNU.sparse.numbytes=<var>numbytes</var>
end repeat
</pre></td></tr></tbody></table>
<p>这种格式存在以下两个问题：</p>
<ol>
<li>尽管POSIX规范允许变量在标头中多次出现，但它仅要求最后一次出现才有意义。因此，多次出现<code>GNU.sparse.offset</code>和<code>GNU.sparse.numbytes</code>与POSIX规范冲突。

</li><li>尝试使用第三方的档案提取此类档案<code>tar</code>导致以压缩<em>形式</em>提取稀疏文件。如果<code>tar</code>有问题的实现不支持POSIX格式，它还将提取包含扩展头属性的文件。该文件可用于将文件扩展到其原始状态。但是，可识别posix <code>tar</code> s通常会忽略未知变量，这使恢复文件更加困难。有关如何使用非GNU还原此类成员的详细说明，请参见<a href="#extracting-sparse-v0x">v.0.0格式的稀疏成员的提取。</a> <code>tar</code> s。
</li></ol>

<a name="IDX591"></a>
<p><acronym>GNU</acronym> <code>tar</code> 1.15.2引入了稀疏格式版本<code>0.1</code> ，试图解决这些问题。作为其前身，此格式将稀疏映射存储在扩展的POSIX标头中。它保留<code>GNU.sparse.size</code>和<code>GNU.sparse.numblocks</code>变量，但不是<code>GNU.sparse.offset</code> / <code>GNU.sparse.numbytes</code>对使用单个变量：</p>
<dl compact>
<dt> <code>GNU.sparse.map</code></dt>
<dd><p>非空数据块的映射。它是由逗号分隔的值组成的字符串“ <var>offset</var> ， <var>size</var> [， <var>offset-1</var> ， <var>size-1</var> ...]“</p></dd>
</dl>

<p>为了解决第二个问题， <code>name</code>在<code>ustar</code>被替换为使用以下模式构造的特殊名称：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">%d/GNUSparseFile.%p/%f
</pre></td></tr></tbody></table>
<p>稀疏文件的真实名称存储在变量中<code>GNU.sparse.name</code> 。因此， <code>tar</code>不了解GNU扩展的实现将至少将文件提取到单独的目录中，从而使用户可以在以后对其进行扩展。有关如何使用非GNU还原此类成员的详细说明，请参见<a href="#extracting-sparse-v0x">v.0.1格式的稀疏成员的提取。</a> <code>tar</code> s。
</p>
<p>所结果的<code>GNU.sparse.map</code>字符串可能<em>很</em>长。尽管POSIX并未对a的长度施加任何限制<code>x</code>标头变量，这可能会混淆一些<code>tar</code> s。
</p>
<hr size="6">
<a name="PAX-1"></a>
<a name="SEC193"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC192" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC194" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC190" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h3 class="appendixsubsec">E.0.3 PAX格式，版本1.0</h3>

<p>版本号<code>1.0</code> <acronym>GNU</acronym>引入了稀疏格式<code>tar</code> 1.15.92。其主要目的是即使不具备posix意识的人也可以轻松提取结果文件<code>tar</code>实现。从此版本开始，稀疏成员之前的扩展头始终包含以下标识所使用格式的变量：</p>
<dl compact>
<dt> <code>GNU.sparse.major</code></dt>
<dd><p>主要版本</p>
</dd>
<dt> <code>GNU.sparse.minor</code></dt>
<dd><p>次要版本</p></dd>
</dl>

<p>的<code>name</code>在<code>ustar</code>标头包含使用以下模式构造的特殊名称：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">%d/GNUSparseFile.%p/%f
</pre></td></tr></tbody></table>
<p>稀疏文件的真实名称存储在变量中<code>GNU.sparse.name</code> 。文件的实际大小存储在变量中<code>GNU.sparse.realsize</code> 。
</p>
<p>稀疏映射本身存储在文件数据块中，位于实际文件数据之前。它由一系列用换行符分隔的十进制数字组成。用零填充到最近的块边界。
</p>
<p>第一个数字给出了地图中的条目数。以下是映射条目，每个条目都由两个数字组成，这些数字给出了它描述的数据块的偏移量和大小。
</p>
<p>该格式的设计方式使非posix意识<code>tar</code>和<code>tar</code>不支持<code>GNU.sparse.*</code>关键字将以压缩形式提取每个稀疏文件，并以文件映射为前缀，并将其放置在单独的目录中。然后，即使没有<acronym>GNU</acronym> ，也可以使用简单的程序将文件扩展为原始格式<code>tar</code> 。有关如何在不使用<acronym>GNU的</acronym>情况下提取稀疏成员的详细信息，请参阅<a href="#SEC152">提取稀疏成员</a>部分。 <code>tar</code> 。
</p>
<hr size="6">
<a name="Snapshot-Files"></a>
<a name="SEC194"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC193" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC195" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="unnumberedsec">增量快照文件的格式</h2>


<p>在增量备份期间创建<em>快照文件</em> （或<em>目录文件</em> ）（请参阅<a href="#SEC96">使用<code>tar</code>执行增量转储</a> ）。它包含转储时文件系统的状态，并用于确定自上次备份以来已修改的文件。
</p>
<p>  <acronym>GNU</acronym> <code>tar</code> 1.32版支持三种快照文件格式。第一种格式称为<em>格式0</em> ，是<acronym>GNU</acronym>使用的<em>格式。</em> <code>tar</code>包含1.15.1的版本。第二种格式称为<em>格式1，</em>是此格式的扩展版本，它包含更多元数据并允许进一步扩展。Alpha版本1.15.90使用了它。对于Alpha版本1.15.91和稳定发行版1.16至1.32，使用<em>格式2</em> 。
</p>
<p>  <acronym>GNU</acronym> <code>tar</code>能够读取所有三种格式，但仅以格式2创建快照。
</p>
<p>本附录详细描述了所有三种格式。
</p>
<ol>
<li><a name="IDX592"></a>
<a name="IDX593"></a>
</li><li>
  <samp>`Format 0'</samp>快照文件以包含十进制数字的行开头，该数字代表上次归档开始时的<acronym>UNIX</acronym>时间戳。此行后跟目录元数据描述，每行一个。每个描述具有以下格式：<table><tbody><tr><td> </td><td><pre class="smallexample">[<var>nfs</var>]<var>dev</var> <var>inode</var> <var>name</var>
</pre></td></tr></tbody></table>

<p>哪里：</p>
<dl compact>
<dt> <var>nfs</var></dt>
<dd><p>单个加号（ <samp>`+'</samp> ）（如果此目录位于<acronym>NFS</acronym>挂载的分区上），否则为空。
</p>
<p>（即，对于非NFS目录，描述行上的第一个字符包含<var>dev</var>领域。）
</p>
</dd>
<dt> <var>dev</var></dt>
<dd><p>目录的设备号；</p>
</dd>
<dt> <var>inode</var></dt>
<dd><p>目录的I节点号；</p>
</dd>
<dt> <var>name</var></dt>
<dd><p>目录名称。引用任何特殊字符（空格，反斜杠等）。
</p></dd>
</dl>

<a name="IDX594"></a>
<a name="IDX595"></a>
</li><li>
  <samp>`Format 1'</samp>快照文件以指定文件格式的行开头。该行具有以下结构：<table><tbody><tr><td> </td><td><pre class="smallexample"><samp>`GNU tar-'</samp><var>tar-version</var><samp>`-'</samp><var>incr-format-version</var>
</pre></td></tr></tbody></table>

<p>哪里<var>tar-version</var>是<acronym>GNU</acronym>的版本号<code>tar</code>创建此快照的实现，以及<var>incr-format-version</var>是快照格式的版本号（在这种情况下， <samp>`1'</samp> ）。
</p>
<p>下一行包含两个十进制数字，代表最后一次备份的时间。第一个数字是秒数，第二个数字是自历元开始以来的纳秒数。
</p>
<p>接下来的行包含目录元数据，每个目录一行。每行的格式如下：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">[<var>nfs</var>]<var>mtime-sec</var> <var>mtime-nsec</var> <var>dev</var> <var>inode</var> <var>name</var>
</pre></td></tr></tbody></table>

<p>哪里<var>mtime-sec</var>和<var>mtime-nsec</var>以纳秒精度表示此目录的最后修改时间； <var>nfs</var> ， <var>dev</var> ， <var>inode</var>和<var>name</var>与的含义相同<samp>`format 0'</samp> 。
</p>
<a name="IDX596"></a>
<a name="IDX597"></a>
</li><li>
  <samp>`Format 2'</samp>快照文件以格式标识符开头，如版本1所述，例如：<table><tbody><tr><td> </td><td><pre class="smallexample">GNU tar-1.32-2
</pre></td></tr></tbody></table>
<p>该行后跟换行符。文件的其余部分由记录组成，用空字符（ <acronym>ASCII</acronym> 0）分隔。因此，与以前的格式相比，格式2快照是二进制文件。
</p>
<p>前两个记录是十进制整数，代表最后一次备份的时间。第一个数字是秒数，第二个数字是自历元开始以来的纳秒数。这些之后是任意数量的目录记录。
</p>
<p>每个<em>目录记录</em>包含一组描述特定目录的元数据。目录记录的各个部分以<acronym>ASCII</acronym> 0字符分隔。下表描述了每个部分。此表中的<em>数字</em>类型代表<acronym>ASCII</acronym>表示形式的十进制整数。（负值前面带有“-”字符，而正值没有前导标点。）
</p>
<table>
<thead><tr><th><p>领域</p></th><th><p>类型</p></th><th><p>描述</p></th></tr></thead>
<tbody><tr><td><p>nfs</p></td><td><p>字符</p></td><td><p> <samp>`1'</samp>如果目录位于<acronym>NFS</acronym>挂载的分区上，或者<samp>`0'</samp>除此以外;</p></td></tr>
<tr><td><p>timestamp_sec</p></td><td><p>数</p></td><td><p>修改时间，秒；</p></td></tr>
<tr><td><p>timestamp_nsec</p></td><td><p>数</p></td><td><p>修改时间，纳秒；</p></td></tr>
<tr><td><p>开发者</p></td><td><p>数</p></td><td><p>设备编号;</p></td></tr>
<tr><td><p>井野</p></td><td><p>数</p></td><td><p>节点编号；</p></td></tr>
<tr><td><p>名称</p></td><td><p>串</p></td><td><p>目录名称；与以前的版本相反，未引用；</p></td></tr>
<tr><td><p>内容</p></td><td><p>转储目录</p></td><td><p>目录的内容；有关其格式的说明，请参见<a href="#SEC195">Dumpdir</a>部分。
</p></td></tr>
<tr><td>
</td></tr>
</tbody></table>

<p>存储在快照文件中的转储目录仅包含类型的记录<samp>`Y'</samp> ， <samp>`N'</samp>和<samp>`D'</samp> 。
</p>
<a name="IDX598"></a>
<a name="IDX599"></a>
<p>每个<em>Number</em>字段中允许的值的特定范围取决于在以下情况下确定的基础C数据类型<code>tar</code>被编译。查看特定范围允许的特定范围<code>tar</code>二进制文件，您可以使用<samp>`--show-snapshot-field-ranges'</samp>选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">$ <kbd>tar --show-snapshot-field-ranges</kbd>
This tar's snapshot file field ranges are
   (field name      =&gt; [ min, max ]):

    nfs             =&gt; [ 0, 1 ],
    timestamp_sec   =&gt; [ -9223372036854775808, 9223372036854775807 ],
    timestamp_nsec  =&gt; [ 0, 999999999 ],
    dev             =&gt; [ 0, 18446744073709551615 ],
    ino             =&gt; [ 0, 18446744073709551615 ],
</pre></td></tr></tbody></table>
<p>（此示例来自GNU / Linux x86_64系统。）
</p>
</li></ol>


<hr size="6">
<a name="Dumpdir"></a>
<a name="SEC195"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC194" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC187" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="unnumberedsec">转储目录</h2>


<p>增量归档将有关每个转储目录的内容的信息保存在称为<em>dumpdirs的</em>特殊数据块中。
</p>
<p>Dumpdir是以下形式的条目序列：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"><var>C</var> <var>filename</var> \0
</pre></td></tr></tbody></table>

<p>哪里<var>C</var>是下面描述的<em>控制代码</em>之一， <var>filename</var>是文件名<var>C</var>操作，并且<samp>`\0'</samp>代表一个空字符（ASCII 0）。添加空格字符是为了提高可读性，真正的dumpdirs不包含它们。
</p>
<p>每个dumpdir以单个nul字符结尾。
</p>
<p>下表描述了控制代码及其含义：</p>
<dl compact>
<dt> <samp>`Y'</samp></dt>
<dd><p><var>filename</var>包含在档案中。
</p>
</dd>
<dt> <samp>`N'</samp></dt>
<dd><p><var>filename</var>在创建归档文件时目录中存在该文件，但是由于自上次备份以来该文件没有更改，因此该文件没有转储到该文件中。
</p>
</dd>
<dt> <samp>`D'</samp></dt>
<dd><p><var>filename</var>是一个目录。
</p>
</dd>
<dt> <samp>`R'</samp></dt>
<dd><p>此代码要求重命名<var>filename</var>到使用<samp>`T'</samp>命令，紧随其后。
</p>
</dd>
<dt> <samp>`T'</samp></dt>
<dd><p>指定目标文件名<samp>`R'</samp>命令（请参见下文）。
</p>
</dd>
<dt> <samp>`X'</samp></dt>
<dd><p>为重命名操作指定<em>临时目录</em>名称（请参见下文）。
</p></dd>
</dl>

<p>代号<samp>`Y'</samp> ， <samp>`N'</samp>和<samp>`D'</samp>要求<var>filename</var>参数是该dumpdir描述的目录的相对文件名，而代码<samp>`R'</samp> ， <samp>`T'</samp>和<samp>`X'</samp>要求其参数为绝对文件名。
</p>
<p>三个代码<samp>`R'</samp> ， <samp>`T'</samp>和<samp>`X'</samp>指定<em>重命名操作</em> 。最简单的情况是：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">R<tt>`source'</tt>\0T<tt>`dest'</tt>\0
</pre></td></tr></tbody></table>

<p>这意味着“将文件<tt>“源</tt> ”重命名为文件<tt>“目标”</tt> ”。
</p>
<p>但是，在某些情况下，需要使用<em>临时目录</em> 。例如，请考虑以下情形：</p>
<ol>
<li>先前的运行转储了一个目录<tt>“ foo”</tt> ，其中包含以下三个目录：<table><tbody><tr><td> </td><td><pre class="smallexample">a
b
c
</pre></td></tr></tbody></table>
</li><li>它们被<em>周期性地</em>重命名，这样：<table><tbody><tr><td> </td><td><pre class="example"><tt>`a'</tt> became <tt>`b'</tt>
<tt>`b'</tt> became <tt>`c'</tt>
<tt>`c'</tt> became <tt>`a'</tt>
</pre></td></tr></tbody></table>
</li><li>进行了新的增量转储。
</li></ol>

<p>这种情况不能通过三个连续的重命名来处理，因为将<tt>“ a”</tt>重命名为<tt>“ b”</tt>将破坏现有目录。为了正确处理它， <acronym>GNU</acronym> <code>tar</code>需要一个临时目录，因此它将创建以下dumpdir（为便于阅读已添加了换行符）：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">Xfoo\0
Rfoo/a\0T\0
Rfoo/b\0Tfoo/c\0
Rfoo/c\0Tfoo/a\0
R\0Tfoo/a\0
</pre></td></tr></tbody></table>
<p>第一条命令， <samp>`Xfoo\0'</samp> ，指示提取程序在目录<tt>foo中</tt>创建一个临时目录。第二条命令<samp>`Rfoo/aT\0'</samp> ，说“将文件<tt>foo / a</tt>重命名为刚刚创建的临时目录”（命令后的空文件名表示使用临时目录）。第三和第四命令照常工作，最后是最后一个命令， <samp>`R\0Tfoo/a\0'</samp>告诉tar将临时目录重命名为<tt>`foo / a'</tt> 。
</p>
<p>dumpdir在存档中的确切位置取决于存档格式（请参阅<a href="#SEC133">控制存档格式</a>一节）：</p>
<ul class="toc">
<li>PAX档案<p>在PAX归档文件中，dumpdir存储在相应目录的扩展头中的变量中<code>GNU.dumpdir</code> 。
</p>
</li><li>GNU和旧的GNU档案<p>这些格式实现特殊的标头类型<samp>`D'</samp> ，类似于ustar标头<samp>`5'</samp> （目录），除了它在包含dumpdir的数据块之前。
</p></li></ul>


<hr size="6">
<a name="Genfile"></a>
<a name="SEC196"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC195" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC197" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC187" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC200" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">F.Genfile</h1>


<p>本附录描述<code>genfile</code> ，是GNU tar测试包中使用的辅助程序。如果您对开发GNU tar不感兴趣，请跳过此附录。
</p>
<p>原来， <code>genfile</code>用来为测试对象生成数据文件，因此得名。然而，随着测试套件变得越来越复杂，正在实施新的操作模式。 <code>genfile</code>是一种多功能仪器。
</p>
<p>共有三种基本操作模式：</p>
<dl compact>
<dt>文件生成</dt>
<dd><p>这是默认模式。在这种模式下， <code>genfile</code>生成数据文件。
</p>
</dd>
<dt>文件状态</dt>
<dd><p>在这种模式下<code>genfile</code>显示指定文件的状态。
</p>
</dd>
<dt>同步执行。</dt>
<dd><p>在这种模式下<code>genfile</code>执行给定的程序<samp>`--checkpoint'</samp>选项，并在达到指定的检查点时执行一组操作。
</p></dd>
</dl>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top"><a href="#SEC197">F.1生成模式</a></td><td>  </td><td align="left" valign="top">文件生成模式。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC198">F.2状态模式</a></td><td>  </td><td align="left" valign="top">文件状态模式。
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC199">F.3执行模式</a></td><td>  </td><td align="left" valign="top">同步执行模式。
</td></tr>
</tbody></table>

<hr size="6">
<a name="Generate-Mode"></a>
<a name="SEC197"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC196" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC198" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC196" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC200" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="appendixsec">F.1生成模式</h2>

<p>在这种模式下<code>genfile</code>为测试套件创建一个数据文件。文件的大小由<samp>`--length'</samp> （ <samp>`-l'</samp> ） 选项。默认情况下，文件内容写入标准输出，可以使用以下命令更改<samp>`--file'</samp> （ <samp>`-f'</samp> ）命令行选项。因此，以下两个命令是等效的：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">genfile --length 100 &gt; outfile
genfile --length 100 --file outfile
</pre></td></tr></tbody></table>
<p>如果<samp>`--length'</samp>没有给出<code>genfile</code>将生成一个空（零长度）文件。
</p>
<a name="IDX600"></a>
<p>命令行选项<samp>`--seek=<var>N</var>'</samp>构造<code>genfile</code>跳过给定的字节数（ <var>N</var> ），然后再写入输出文件。它类似于<samp>`seek=<var>N</var>'</samp>的<code>dd</code>效用。
</p>
<a name="IDX601"></a>
<p>你可以指导<code>genfile</code>通过一次创建几个文件<samp>`--files-from'</samp> （ <samp>`-T'</samp> ）选项，后跟包含文件名列表的文件名。使用破折号（ <samp>`-'</samp> ）而不是文件名原因<code>genfile</code>从标准输入中读取文件列表。例如：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample"># Read file names from file <tt>`file.list'</tt>
genfile --files-from file.list
# Read file names from standard input
genfile --files-from -
</pre></td></tr></tbody></table>
<a name="IDX602"></a>
<p>列表文件应该每行包含一个文件名。要使用以ASCII NUL字符分隔的文件列表，请使用<samp>`--null'</samp> （ <samp>`-0'</samp> ）命令行选项：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">genfile --null --files-from file.list
</pre></td></tr></tbody></table>
<a name="IDX603"></a>
<p>填充生成文件的默认数据模式由ASCII码的前256个字母组成，重复了足够的次数以填充整个文件。可以通过以下方式更改此行为<samp>`--pattern'</samp>选项。此选项采用强制性参数，指定要使用的模式名称。当前实现了两种模式：</p>
<dl compact>
<dt> <samp>`--pattern=default'</samp></dt>
<dd><p>如上所述的默认模式。
</p>
</dd>
<dt> <samp>`--pattern=zero'</samp></dt>
<dd><p>用零填充文件。
</p></dd>
</dl>

<p>如果未提供文件名，则程序退出并显示代码<code>0</code> 。否则，它将退出<code>0</code>仅当它能够创建指定长度的文件时。
</p>
<a name="IDX604"></a>
<a name="IDX605"></a>
<p>特别选择<samp>`--sparse'</samp> （ <samp>`-s'</samp> ）指示<code>genfile</code>创建一个稀疏文件。稀疏文件由<em>数据片段</em>组成，这些<em>数据片段</em>由<em>空洞</em>或零块分隔。在许多操作系统上，实际的磁盘存储空间没有分配给孔，但它们是在文件长度中计算的。要创建稀疏文件， <code>genfile</code>应该知道将数据片段放在哪里，以及要使用哪些数据来填充它们。所以，当<samp>`--sparse'</samp>给出的其余命令行指定了一个所谓的<em>文件映射</em> 。
</p>
<p>文件映射由任意数量的<em>片段描述符组成</em> 。每个描述符都由两个值组成：一个数字（指定相对于上一个片段的末尾的片段偏移量，或者对于第一个片段，相对于文件的开头），以及<em>内容字符串</em> （ <em>内容字符串）</em> ，用于指定填充片段的模式。文件偏移量可以带有以下量词后缀：</p>
<dl compact>
<dt> <samp>`k'</samp></dt>
<dt> <samp>`K'</samp></dt>
<dd><p>该数字以千字节表示。
</p></dd>
<dt> <samp>`m'</samp></dt>
<dt> <samp>`M'</samp></dt>
<dd><p>该数字以兆字节表示。
</p></dd>
<dt> <samp>`g'</samp></dt>
<dt> <samp>`G'</samp></dt>
<dd><p>该数字以千兆字节表示。
</p></dd>
</dl>

<p>内容字符串可以是片段大小或模式。片段大小是一个十进制数字，以等号开头。如上所述，可以在其后缀一个量词。如果给出了片段大小，那么该大小的片段将被当前选定的模式填充（请参阅<a href="#SEC197">-pattern</a>部分）并将其写入文件。
</p>
<p>模式是一串任意的ASCII字符。对于他们每个人， <code>genfile</code>将生成一个数据<em>块</em> ，并填充该字符并将其写入片段。块的大小由下式给出<samp>`--block-size'</samp>选项。默认为512。因此，如果模式包含<var>n</var>字符，生成的文件片段将包含<code><var>n</var>*<var>block-size</var></code>数据字节。
</p>
<p>最后一个片段描述符只能包含文件偏移量部分。在这种情况下<code>genfile</code>将在文件末尾创建一个孔，直到指定的偏移量为止。
</p>
<p>作为片段描述符指示出现的破折号<code>genfile</code>从标准输入读取文件映射。输入的每一行应包含片段偏移量和内容字符串，并用任意数量的空格分隔。
</p>
<p>例如，考虑以下调用：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">genfile --sparse --file sparsefile 0 ABCD 1M EFGHI 2000K
</pre></td></tr></tbody></table>

<p>它将创建具有以下结构的3101184字节长的文件：</p>
<table>
<tbody><tr><td><p>偏移量</p></td><td><p>长度</p></td><td><p>内容</p></td></tr>
<tr><td><p>0</p></td><td><p>4 * 512 = 2048</p></td><td><p>四个512字节的块，用字母填充<samp>`A'</samp> ， <samp>`B'</samp> ， <samp>`C'</samp>和<samp>`D'</samp> 。
</p></td></tr>
<tr><td><p>2048</p></td><td><p>1046528</p></td><td><p>零字节</p></td></tr>
<tr><td><p>1050624</p></td><td><p>5 * 512 = 2560</p></td><td><p>五块装满字母<samp>`E'</samp> ， <samp>`F'</samp> ， <samp>`G'</samp> ， <samp>`H'</samp> ， <samp>`I'</samp> 。
</p></td></tr>
<tr><td><p>1053184</p></td><td><p>2048000</p></td><td><p>零字节</p></td></tr>
</tbody></table>

<a name="IDX606"></a>
<p>的退出代码<code>genfile --sparse</code>命令是<code>0</code>仅当创建的文件实际上是稀疏的时。如果不是，则会显示相应的错误消息，并且该命令包含代码<code>1</code> 。的<samp>`--quite'</samp> （ <samp>`-q'</samp> ）选项可禁止这种行为。如果<samp>`--quite'</samp>给出， <code>genfile --sparse</code>用代码退出<code>0</code>是否能够创建文件，则结果文件是否稀疏。
</p>
<hr size="6">
<a name="Status-Mode"></a>
<a name="SEC198"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC197" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC199" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC196" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC200" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="appendixsec">F.2状态模式</h2>

<p>在状态模式下， <code>genfile</code>打印命令行中指定的每个文件的文件系统状态。此模式通过以下方式切换<samp>`--stat'</samp> （ <samp>`-S'</samp> ）命令行选项。此选项的可选参数指定输出<em>格式</em> ：以逗号分隔的列表<code>struct stat</code>要显示的字段。该列表可以包含以下标识符：</p>
<dl compact>
<dt>名称</dt>
<dd><p>文件名。
</p>
</dd>
<dt>开发者</dt>
<dt>st_dev</dt>
<dd><p>设备编号（十进制）。
</p>
</dd>
<dt>井野</dt>
<dt>st_ino</dt>
<dd><p>索引节点号。
</p>
</dd>
<dt>模式[。 <var>number</var> ]</dt>
<dt>st_mode [。 <var>number</var> ]</dt>
<dd>
<p>请参阅<cite>我们是否也应支持<samp>`%'</samp>像stat（1）一样的符号？</cite>
</p>

<p>八进制的文件模式。可选的<var>number</var>指定在输出之前应用于该模式的八进制掩码。例如， <code>--stat mode.777</code>将保留它的低九位。请注意，您可以使用任何标点符号代替<samp>`.'</samp> 。
</p>
</dd>
<dt>链接</dt>
<dt>st_nlink</dt>
<dd><p>硬链接数。
</p>
</dd>
<dt>uid</dt>
<dt>st_uid</dt>
<dd><p>所有者的用户标识。
</p>
</dd>
<dt>id</dt>
<dt>st_gid</dt>
<dd><p>所有者的组标识。
</p>
</dd>
<dt>尺寸</dt>
<dt>st_size</dt>
<dd><p>文件大小（以十进制表示）。
</p>
</dd>
<dt>大小</dt>
<dt>st_blksize</dt>
<dd><p>每个文件块的大小（以字节为单位）。
</p>
</dd>
<dt>块</dt>
<dt>st_blocks</dt>
<dd><p>分配的块数。
</p>
</dd>
<dt>一次</dt>
<dt>st_atime</dt>
<dd><p>上次访问时间。
</p>
</dd>
<dt>时光</dt>
<dt>st_mtime</dt>
<dd><p>最后修改时间</p>
</dd>
<dt>时间</dt>
<dt>st_ctime</dt>
<dd><p>上次状态更改时间</p>
</dd>
<dt>疏</dt>
<dd><p>一个布尔值，指示文件是否为<samp>`sparse'</samp> 。
</p></dd>
</dl>

<p>修改时间在<acronym>UTC</acronym>中显示为<acronym>UNIX</acronym>时间戳，除非后缀为<samp>`H'</samp> （对于“可读”），如<samp>`ctimeH'</samp> ，在通常情况下<code>tar tv</code>使用输出格式。
</p>
<p>默认输出格式为： <samp>`name,dev,ino,mode, nlink,uid,gid,size,blksize,blocks,atime,mtime,ctime'</samp> 。
</p>
<p>例如，以下命令将显示文件名称和当前工作目录中每个文件的上次访问时间：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">genfile --stat=name,atime *
</pre></td></tr></tbody></table>
<hr size="6">
<a name="Exec-Mode"></a>
<a name="SEC199"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC198" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC200" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC196" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC196" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC200" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h2 class="appendixsec">F.3执行模式</h2>

<p>此模式旨在测试以下设备的行为： <code>paxutils</code>在归档过程中某些文件发生更改时发出命令。它假定正在执行的命令支持<samp>`--checkpoint'</samp>和<samp>`--checkpoint-action'</samp>选项（请参见<cite>GNU tar中的</cite> <a href="${GS}/tar/manual/tar.html#checkpoints">Checkpoints：（tar）checkpoints</a>部分）。
</p>
<p>的<samp>`Exec Mode'</samp>由启用<samp>`--run'</samp>命令行选项（或其别名） <samp>`-r'</samp> ）。非可选参数提供要执行的命令行。 <code>Genfile</code>通过在命令名称和第一个参数之间插入以下选项来修改此命令行：</p>
<table><tbody><tr><td> </td><td><pre class="example">--checkpoint=<var>n</var>
--checkpoint-action &quot;echo=genfile checkpoint %u&quot;
--checkpoint-action &quot;wait=SIGUSR1&quot;
</pre></td></tr></tbody></table>
<p>这里， <var>n</var>代表检查点粒度（对于GNU <code>tar</code> ，它是在每对检查点之间读取或写入的归档记录的数量。预设值为1。可以使用可选的参数更改此值<samp>`--run'</samp>选项。例如，要在每个第十个检查点上运行操作：</p>
<table><tbody><tr><td> </td><td><pre class="example">genfile --run=10 ...
</pre></td></tr></tbody></table>
<p>如果命令行包含选项，则必须在其前面加上双破折号（ <samp>`--'</samp> ），这将阻止这些选项被解释<code>genfile</code>本身。例如：</p>
<table><tbody><tr><td> </td><td><pre class="example">genfile --run --checkpoint=2 --truncate foo -- tar -c -f a.tar .
</pre></td></tr></tbody></table>
<p>另请注意，在运行时<code>tar</code> ，其命令行中可能不包含传统选项（字母组合，但不带破折号）。
</p>
<p>提供了一组选项，用于定义检查点值和到达它们时要执行的操作。检查点值随<samp>`--checkpoint'</samp>命令行选项。此选项的参数是十进制的检查点数。
</p>
<p>在检查点之后可以指定任意数量的<em>操作</em> 。可用的动作是</p>
<dl compact>
<dt> <samp>`--cut <var>file</var>'</samp></dt>
<dt> <samp>`--truncate <var>file</var>'</samp></dt>
<dd><p>截短<var>file</var>到先前指定的大小<samp>`--length'</samp>选项（如果未指定，则为0）。
</p>
</dd>
<dt> <samp>`--append <var>file</var>'</samp></dt>
<dd><p>将数据附加到<var>file</var> 。数据的大小及其模式由上一章给出<samp>`--length'</samp>和<samp>`pattern'</samp>选项。
</p>
</dd>
<dt> <samp>`--touch <var>file</var>'</samp></dt>
<dd><p>更新的访问和修改时间<var>file</var> 。这些时间戳将更改为当前时间，除非<samp>`--date'</samp>选项已指定，在这种情况下，它们将更改为指定时间。争论<samp>`--date'</samp> option是一种几乎任意格式的日期说明（请参阅<a href="#SEC121">日期输入格式</a>部分）。
</p>
</dd>
<dt> <samp>`--exec <var>command</var>'</samp></dt>
<dd><p>执行给定的shell命令。
</p>
</dd>
<dt> <samp>`--delete <var>file</var>'</samp></dt>
<dt> <samp>`--unlink <var>file</var>'</samp></dt>
<dd><p>删除命名的文件或目录。如果删除目录，则该目录必须为空。
</p></dd>
</dl>

<p>选项<samp>`--verbose'</samp>指示<code>genfile</code>打印关于正在执行的检查点的标准输出通知，并详细描述命令的退出状态。
</p>
<p>执行命令时，其标准输出仍连接到描述符1。它打印到文件描述符2的所有消息（检查点通知除外）都转发到标准错误。
</p>
<p>在执行模式下， <code>genfile</code>以已执行命令的退出状态退出。
</p>

<hr size="6">
<a name="Free-Software-Needs-Free-Documentation"></a>
<a name="SEC200"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC199" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC201" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC196" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC201" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">G.自由软件需要自由文档</h1>


<p>如今，自由软件社区中最大的缺陷不在软件中，而是缺乏可以包含在自由软件中的良好自由文档。我们许多最重要的程序都没有免费的参考手册和免费的介绍性文本。文档是任何软件包的重要组成部分；当重要的免费软件包没有免费的手册和免费的教程时，这是一个很大的差距。今天，我们有许多这样的差距。
</p>
<p>以Perl为例。人们通常使用的教程手册并非免费。这是怎么发生的？因为这些手册的作者发布了限制性条款-禁止复制，修改，不提供源文件-从而将其排除在自由软件世界之外。
</p>
<p>这不是第一次发生这种事情，而且距离最后一次还很遥远。很多时候，我们听到GNU用户热切地描述了他正在编写的手册，以及他对社区的意向性贡献，却得知他已经通过签署出版合同使其变得免费而毁了一切。
</p>
<p>像自由软件一样，自由文档是自由而不是价格的问题。非免费手册的问题不在于出版商对印刷版收取费用-本身就可以。（自由软件基金会也出售手册的印刷版。）问题在于手册的使用限制。免费手册以源代码形式提供，并授予您复制和修改的权限。非免费手册不允许这样做。
</p>
<p>自由手册的自由标准与自由软件大致相同。必须允许进行再分发（包括正常的商业再分发），以便手册可以随程序的每份副本一起使用，无论是联机还是书面形式。
</p>
<p>允许修改技术内容也至关重要。当人们修改软件，添加或更改功能时，如果他们愿意的话，他们也会更改手册，因此他们可以为修改后的程序提供准确而清晰的文档。一份让您别无选择，只能编写新手册来记录该程序的更改版本的手册对我们的社区而言实际上不是可用的。
</p>
<p>处理修改方式的某些限制是可以接受的。例如，保留原始作者的版权声明，分发条款或作者列表的要求是可以的。要求修改后的版本包含已被修改的通知也没问题。甚至可以删除或更改的整个部分也可以接受，只要它们涉及非技术性主题（如本主题）。这些限制是可以接受的，因为它们不会妨碍社区正常使用本手册。
</p>
<p>但是，必须可以修改手册的所有<em>技术</em>内容，然后通过所有常用渠道将结果分发到所有常用媒体中。否则，限制会阻碍该手册的使用，它不是免费的，我们需要另一本手册来替换它。
</p>
<p>请传播有关此问题的消息。我们的社区继续失去专有出版的手册。如果我们散布自由软件需要免费参考手册和免费教程的说法，那么下一个想通过编写文档做出贡献的人可能会意识到，在为时已晚之前，只有自由手册才能为自由软件社区做出贡献。
</p>
<p>如果要编写文档，请坚持按照GNU免费文档许可或其他免费文档许可进行发布。请记住，此决定需要您的批准-您不必让发布者决定。如果您坚持要求，一些商业出版商将使用免费许可证，但他们不会提出选择。由您来提出问题并坚定地说这就是您想要的。如果您正在处理的发布者拒绝，请尝试其他发布者。如果您不确定建议的许可证是否免费，请写信给<a href="mailto:licensing@gnu.org">license@gnu.org</a> 。
</p>
<p>您可以鼓励商业发行商通过购买来出售更多免费的，无版权的手册和教程，特别是从发行商那里购买副本，这些副本是为他们的写作或重大改进付费的。同时，尽量避免购买非免费文档。在购买手册之前，请检查其分发条款，并坚持要求寻求业务的人必须尊重您的自由。检查该书的历史记录，并尝试奖励已付款的出版商或支付作者的费用。
</p>
<p>自由软件基金会维护着由其他出版商发行的免费文档列表， <a href="http://www.fsf.org/doc/other-free-books.html">网址</a>为<a href="http://www.fsf.org/doc/other-free-books.html">http://www.fsf.org/doc/other-free-books.html</a> 。</p>
<hr size="6">
<a name="GNU-Free-Documentation-License"></a>
<a name="SEC201"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC200" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC200" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">H. GNU免费文档许可证</h1>


<p align="center">1.3版，2008年11月3日</p>

<table><tbody><tr><td> </td><td><pre class="display">Copyright &copy; 2000-2019 Free Software Foundation, Inc.
<a href="http://fsf.org/">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></tbody></table>
<ol>
<li>前言<p>本许可的目的是免费提供手册，教科书或其他实用且有用的文档： <em>自由</em> ，以确保每个人都有有效的自由，无论是否进行商业或非商业修改，都可以对其进行复制和重新分发。其次，本许可证为作者和出版商保留了一种因其作品而获得好评的方式，同时不被视为对他人所做的修改负责。
</p>
<p>该许可是一种“ copyleft”，这意味着文档的衍生作品本身必须在相同意义上是免费的。它是GNU通用公共许可证的补充，GNU通用公共许可证是专为自由软件设计的Copyleft许可证。
</p>
<p>我们设计此许可证是为了将其用于免费软件的手册，因为免费软件需要免费的文档：免费程序应随附手册，以提供与软件相同的自由。但是本许可不限于软件手册；它可以用于任何文本作品，而无论其主题是什么，或者它是否作为印刷书籍出版。我们建议您将此许可证主要用于目的是作为指导或参考的作品。
</p>
</li><li>适用性和定义<p>本许可适用于任何形式的任何手册或其他作品，其中包含版权所有者发布的声明，声明其可以根据本许可的条款进行分发。此类通知授予了全球范围内的免版税使用许可，期限不限，可以在此处所述的条件下使用该作品。下面的“文档”是指任何此类手册或作品。任何公众人士都是被许可人，称呼为“您”。如果您按照版权法要求许可的方式复制，修改或分发作品，则您接受许可。
</p>
<p>文档的“修改版本”是指包含文档或文档一部分的任何作品，可以逐字复制，也可以进行修改和/或翻译成另一种语言。
</p>
<p>“次要部分”是文档的命名附录或最重要的部分，专门处理文档的出版者或作者与文档的整体主题（或相关事宜）之间的关系，不包含任何可能直接涉及的内容在整个主题范围内。（因此，如果该文档部分是一本数学教科书，那么第二部分可能不会解释任何数学。）这种关系可以是与主题或相关问题的历史联系，也可以是关于它们的法律，商业，哲学，伦理或政治立场。
</p>
<p>“不变部分”是某些二级部分，其标题在声明中指出，文档是根据本许可发布的，其标题与不变部分相同。如果某个部分不符合上面对“辅助”的定义，则不允许将其指定为“不变式”。该文档可能包含零个不变部分。如果文档未标识任何不变节，则没有任何不变节。
</p>
<p>“封面文字”是某些简短的文本段落，在声明中指出该文档是根据本许可发布的，这些文字作为“封面文字”或“封面文字”列出。“封面文本”最多可以包含5个字，“封面文本”最多可以包含25个字。
</p>
<p>文档的“透明”副本是指一种机器可读的副本，以其规格可供大众使用的格式表示，适用于使用常规文本编辑器或（对于由像素组成的图像）常规颜料进行直接修改的文档程序或（用于绘图的）一些广泛使用的绘图编辑器，它适合于输入文本格式化程序或自动转换为适合输入到文本格式化程序的多种格式。以其他方式透明的文件格式制作的副本，其标记或没有标记的安排，可以阻止或阻止读者的后续修改，则该副本不是透明的。如果用于大量文本，则图像格式不是“透明”的。不是“透明”的副本称为“不透明”。
</p>
<p>适用于透明副本的格式的示例包括不带标记的纯ASCII，Texinfo输入格式，LaTeX输入格式，使用公开可用的DTD的SGML或XML，以及设计用于人工修改的符合标准的简单HTML，PostScript或PDF。透明图像格式的示例包括PNG，XCF和JPG。不透明格式包括只能由专有文字处理器，SGML或XML读取和编辑的专有格式，而SGML或XML通常不提供DTD和/或处理工具，以及某些文字处理器为某些文字处理器生成的机器生成的HTML，PostScript或PDF仅用于输出目的。
</p>
<p>对于印刷书籍，“标题页”指的是标题页本身，以及随后的以下几页，这些页可以清晰地容纳本许可证要求在标题页中显示的材料。对于没有这样的标题页的格式的作品，“标题页”是指在文本正文开头之前靠近作品标题最突出外观的文本。
</p>
<p>“发布者”是指向公众分发文档副本的任何个人或实体。
</p>
<p>“带标题的XYZ”部分是指文档的命名子单元，其标题要么恰好是XYZ，要么在括号中包含XYZ，之后是将XYZ转换为其他语言的文本。（此处XYZ代表以下提到的特定部分名称，例如“致谢”，“奉献精神”，“认可”或“历史记录”。）在修改文档时，要“保留此部分的标题”，则意味着根据此定义，该部分仍为“已命名的XYZ”部分。
</p>
<p>该文件的声明旁边可能包含“免责声明”，该声明指出本许可适用于该文件。这些保修免责声明被视为已包含在本许可中，但仅用于免责声明：这些保修免责声明可能具有的任何其他暗示都是无效的，并且对本许可的含义没有任何影响。
</p>
</li><li>VERBATIM复制<p>您可以在任何媒介中以商业或非商业方式复制和分发本文档，但前提是本许可，版权声明和声明本许可适用于本文档的许可声明均以所有副本形式复制，并且您不添加任何其他条件符合本许可的规定。您不得使用技术措施来阻碍或控制您复制或分发的副本的阅读或进一步复制。但是，您可以接受赔偿以换取副本。如果分发足够多的副本，则还必须遵循第3节中的条件。
</p>
<p>您还可以在上述相同条件下出借副本，并可以公开展示副本。
</p>
</li><li>大量复制<p>如果您发布文档的印刷副本（或通常具有印刷封面的介质副本），且编号超过100，并且文档的许可通知书要求包含封面文字，则必须将这些副本随附在清晰可见的所有文档中封面文字：封面上的封面文字和封底上的封面文字。两种封面都必须清楚，清楚地标识您是这些副本的发行者。封面必须显示完整的标题，标题中的所有单词均应同样醒目且可见。您还可以在封面上添加其他材料。只要封面保留了文档标题并满足这些条件，则仅对封面进行更改即可在其他方面被视为逐字复印。
</p>
<p>如果任何一个封面所需的文本量太大，无法清晰地容纳，则应将列出的第一个（合理合理的数量）放在实际的封面上，然后将其余部分继续放在相邻的页面上。
</p>
<p>如果您发布或分发的Opaque文档副本数量超过100，则必须在每份Opaque副本中包含机器可读的透明副本，或者在每份Opaque副本中或其中声明一个计算机网络位置，通用网络将从该位置开始使用public可以使用公共标准网络协议下载完整的文档透明副本，而无需添加任何材料。如果使用后一种选项，则在开始批量分发不透明副本时，必须采取合理的审慎步骤，以确保该透明副本将在指定位置保持可访问的状态，直到您上一次分发不透明副本至少一年之后。该版本的不透明副本（直接或通过您的代理商或零售商）向公众发布。
</p>
<p>要求（但不是必须）在重新分发大量副本之前，与文档作者保持良好联系，以便他们有机会为您提供文档的更新版本。
</p>
</li><li>修改方式<p>您可以在上述第2节和第3节的条件下复制和分发本文档的修改版本，前提是您严格按照本许可协议发布修改版本，而修改版本则充当文档的角色，从而许可对本文档的分发和修改拥有副本的修改版本。此外，您必须在修改后的版本中执行以下操作：</p>
<ol>
<li>在标题页（和封面，如果有的话）中使用与本文档以及先前版本（如果有的话，应在文档的“历史记录”部分中列出）不同的标题。如果该版本的原始发行者给予许可，则可以使用与先前版本相同的标题。

</li><li>在标题页上列出作者，一个或多个负责修改版本著作权的作者或实体，以及至少五名文档的主要作者（所有主要作者，如果少于五），除非他们使您脱离此要求。

</li><li>在“标题”页面上声明修改版本的发布者的名称，作为发布者。

</li><li>保留文档的所有版权声明。

</li><li>在其他版权声明旁边添加用于修改的适当版权声明。

</li><li>在版权声明之后，立即包含一个许可声明，以下面的附录中所示的形式，向公众授予根据本许可条款使用修改版的许可。

</li><li>在该许可证声明中保留不可变部分的完整列表以及文档的许可证声明中提供的必需封面文字。

</li><li>随附本许可证的未更改副本。

</li><li>保留标题为“历史记录”的部分，保留其标题，并在其上添加至少说明标题页上给出的修改版本的标题，年份，新作者和发行者的项目。如果文档中没有标题为“历史记录”的部分，请在其标题页上创建一个说明文档的标题，年份，作者和出版者的内容，然后添加一项描述上一句中所述的修改版本。

</li><li>保留文档中给出的网络位置（如果有），以供公众访问文档的透明副本，同样，保留文档中给出的基于其以前版本的网络位置。这些可以放在“历史记录”部分中。对于在文档本身之前至少四年出版的作品，或者如果其所指版本的原始发行者给予许可，您可以省略其网络位置。

</li><li>对于任何标题为“致谢”或“奉献”的部分，请保留本部分的标题，并在本部分中保留其中给出的每个贡献者致谢和/或奉献的所有内容和基调。

</li><li>保留文档的所有不变部分，其文本和标题保持不变。章节编号或同等编号不视为章节标题的一部分。

</li><li>删除任何标题为“背书”的部分。这样的部分可能不包含在修改版本中。

</li><li>不要将任何现有的节重新命名为“背书”，也不要与任何不变节的标题冲突。

</li><li>保留所有保修免责声明。
</li></ol>

<p>如果修改后的版本包括新的前节或附录，这些节或附录符合第二节的规定，并且不包含从文档中复制的材料，则可以选择将其中的部分或全部指定为不变的。为此，请将其标题添加到“修改版本”许可声明中的“不变部分”列表中。这些标题必须与任何其他节标题不同。
</p>
<p>您可以添加标题为“背书”的部分，但其中仅包含各方对您的修改版本的背书，例如，同行评审声明或文本已被组织批准为标准的权威定义。
</p>
<p>您可以在修改版本的封面文本列表的末尾添加最多5个单词的段落作为“封面文本”，以及最多25个单词的段落作为“封面文本”。任何一个实体（或通过它们的安排）都只能添加“封面文字”和“封面文字”中的一个段落。如果文档已经包含同一封面的封面文字，该文字是您先前添加的或由您代表的同一实体做出的安排而添加的，则不得添加其他文字；但是您可以在添加了旧版本的以前的发布者的明确许可下替换旧版本。
</p>
<p>本文档的作者和发行者未获得本许可证的许可，不得使用其名称进行宣传或主张或暗示认可任何修改版本。
</p>
</li><li>合并文件<p>您可以根据上文第4节中针对修改版本定义的条款，将文档与根据本许可发布的其他文档进行组合，但前提是您必须将所有未经修改的原始文档的所有不变部分都包含在其中，并列出所有这些文档作为您许可协议中合并工作的不变部分，并保留其所有保修免责声明。
</p>
<p>合并后的作品仅包含此许可的一个副本，并且多个相同的不变部分可用一个副本代替。如果存在多个具有相同名称但内容不同的不变部分，请在该部分的末尾加上括号，在该部分的末尾添加原始作者或发布者的名称（如果已知），以使每个此类的标题唯一。唯一编号。对合并作品的许可声明中不变部分列表中的部分标题进行相同的调整。
</p>
<p>在组合中，您必须将各种原始文档中标题为“ History”的任何部分组合在一起，组成一个标题为“ History”的部分；同样，将标题为“致谢”的所有部分与标题为“奉献”的任何部分组合在一起。您必须删除所有标题为“认可”的部分。</p>
</li><li>文件收集<p>您可以收集由本许可协议下发布的文档和其他文档组成的集合，并在该文档中将其替换为各个文档中包含的单个副本，前提是您遵守本许可协议的规定。在所有其他方面逐字逐字复印。
</p>
<p>您可以从此类集合中提取单个文档，并根据本许可证单独分发它，前提是您将本许可证的副本插入提取的文档中，并且在与该文档的逐字复制有关的所有其他方面遵守本许可证。
</p>
</li><li>独立工作的集合<p>如果存储内容或分发介质中或存储介质上或该介质上的文档或其衍生物与其他单独且独立的文档或作品的汇编，如果该汇编所产生的版权不用于限制合法权利，则称为“汇总”汇编用户的数量超出了个人作品的许可范围。当文档包含在汇总中时，本许可不适用于汇总中的其他作品，而这些作品本身不是文档的衍生作品。
</p>
<p>如果第3节的封面文字要求适用于本文档的这些副本，则如果该文档少于全部汇总的一半，则可以将文档的封面文字放在汇总中将文档括起来的封面上，或者如果文档为电子形式，则具有等同的封面电子形式。否则，它们必须出现在将整个集合括起来的印刷封面上。
</p>
</li><li>翻译<p>翻译被视为一种修改，因此您可以根据第4节的条款分发文档的翻译。用翻译替换不变部分需要其版权所有者的特殊许可，但是除了这些不变部分的原始版本之外，您还可以包括部分或全部不变部分的翻译。您可以在本文档以及所有保修免责声明中包括本许可，所有许可声明的翻译，但前提是您还包括本许可的原始英文版本以及这些声明和免责声明的原始版本。如果本许可的翻译版本与原始版本或声明或免责声明之间存在分歧，则以原始版本为准。
</p>
<p>如果文档中某节的标题为“致谢”，“奉献”或“历史记录”，则保留其标题（第1节）的要求（第4节）通常需要更改实际标题。
</p>
</li><li>终止<p>除非本许可明确规定，否则您不得复制，修改，再许可或分发文档。否则，任何尝试复制，修改，再许可或分发的尝试均无效，并且将自动终止您在本许可下的权利。
</p>
<p>但是，如果您停止所有对本许可的违反，则（a）临时恢复特定版权持有者的许可，除非且直到版权持有者明确终止并最终终止您的许可为止；以及（b）如果版权持有者失败，则永久地在停止交易发生后的60天之内通过某种合理的方式通知您违规行为。
</p>
<p>此外，如果版权所有者以某种合理的方式通知您有关侵权的信息，那么该版权所有者的许可将被永久恢复，这是您第一次从该版权所有者那里收到针对任何作品的违反本许可的通知，并且您会在收到通知后的30天内纠正违规行为。
</p>
<p>根据本节终止您的权利并不会终止根据本许可从您那里收到副本或权利的各方的许可。如果您的权利已被终止且未永久恢复，则收到部分或全部相同材料的副本将不会赋予您使用该材料的任何权利。
</p>
</li><li>本许可证的未来修订<p>自由软件基金会可能会不时发布GNU自由文档许可证的新修订版。这样的新版本将在本质上与当前版本相似，但是可能在细节上有所不同以解决新问题或疑虑。参见<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a> 。</p>
<p>许可证的每个版本都有一个不同的版本号。如果文档指定适用于此许可证的特定编号版本“或任何更高版本”，则您可以选择遵循该指定版本或已发布的任何更高版本的条款和条件（不作为草稿）由自由软件基金会提供。如果文档未指定此许可的版本号，则可以选择自由软件基金会曾经发布的任何版本（而不是草稿）。如果文档指定代理可以决定可以使用此许可证的将来版本，则该代理对版本的公开接受声明将永久授权您为文档选择该版本。
</p>
</li><li>许可<p>“大型多作者协作网站”（或“ MMC网站”）是指发布版权作品并为任何人提供编辑这些作品的重要工具的任何万维网服务器。任何人都可以编辑的公共Wiki是此类服务器的示例。网站中包含的“大型多作者合作”（或“ MMC”）是指在MMC网站上发布的任何受版权保护的作品集。
</p>
<p>“ CC-BY-SA”是指Creative Commons Corporation（一家非营利性公司，主要营业地点位于加利福尼亚州旧金山）发行的Creative Commons Attribution-Share Alike 3.0许可证，以及该版本的未来copyleft版本该组织发布的许可。
</p>
<p>“合并”是指作为另一文档的一部分全部或部分发布或重新发布文档。
</p>
<p>如果MMC已根据本许可获得许可，并且所有根据本许可在MMC之外的其他地方首次发行且随后全部或部分合并到MMC中的作品，则该MMC是“有资格获得许可的”，（1）没有封面文字或不变部分，因此（2）在2008年11月1日之前合并。
</p>
<p>MMC站点的运营商可以在2009年8月1日之前的任何时间在CC-BY-SA之下的同一站点上重新发布该站点中包含的MMC，前提是该MMC有资格获得许可。
</p>
</li></ol>


<a name="SEC202"></a>
<h2 class="heading">附录：如何对您的文档使用此许可证</h2>

<p>要在您编写的文档中使用此许可，请在该文档中包括一个许可副本，并在标题页后放置以下版权和许可声明：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></td></tr></tbody></table>
<p>如果您有不变部分，前封面文本和后封面文本，则将“替换为...文本”。符合此：</p>
<table><tbody><tr><td> </td><td><pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></td></tr></tbody></table>
<p>如果您有不带封面文本的不变部分，或这三个部分的其他组合，请合并这两种选择以适应情况。
</p>
<p>如果您的文档包含不平凡的程序代码示例，我们建议您根据自由软件许可（例如GNU通用公共许可）的选择，并行发布这些示例，以允许它们在自由软件中使用。
</p>


<hr size="6">
<a name="Index-of-Command-Line-Options"></a>
<a name="SEC203"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC201" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC204" title="下一节阅读顺序">></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC201" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC204" title="下一章">>></a> ]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">一，命令行选项索引</h1>

<p>本附录包含所有<acronym>GNU</acronym>的索引<code>tar</code>长命令行选项。列出的选项前面没有双破折号。有关简短命令行<a href="#SEC43">选项的交叉引用</a> ，请参见《 <a href="#SEC43">简短选项交叉引用》</a> 。
</p>
<table><tbody><tr><th valign="top">跳到：</th><td><a href="#SEC203_0" class="summary-letter"><b>A</b></a> <a href="#SEC203_1" class="summary-letter"><b>B</b></a> <a href="#SEC203_2" class="summary-letter"><b>C</b></a> <a href="#SEC203_3" class="summary-letter"><b>D</b></a> <a href="#SEC203_4" class="summary-letter"><b>E</b></a> <a href="#SEC203_5" class="summary-letter"><b>F</b></a> <a href="#SEC203_6" class="summary-letter"><b>G</b></a> <a href="#SEC203_7" class="summary-letter"><b>H</b></a> <a href="#SEC203_8" class="summary-letter"><b>I</b></a> <a href="#SEC203_9" class="summary-letter"><b>K</b></a> <a href="#SEC203_10" class="summary-letter"><b>L</b></a> <a href="#SEC203_11" class="summary-letter"><b>M</b></a> <a href="#SEC203_12" class="summary-letter"><b>N</b></a> <a href="#SEC203_13" class="summary-letter"><b>O</b></a> <a href="#SEC203_14" class="summary-letter"><b>P</b></a> <a href="#SEC203_15" class="summary-letter"><b>Q</b></a> <a href="#SEC203_16" class="summary-letter"><b>R</b></a> <a href="#SEC203_17" class="summary-letter"><b>S</b></a> <a href="#SEC203_18" class="summary-letter"><b>T</b></a> <a href="#SEC203_19" class="summary-letter"><b>U</b></a> <a href="#SEC203_20" class="summary-letter"><b>V</b></a> <a href="#SEC203_21" class="summary-letter"><b>W</b></a> <a href="#SEC203_22" class="summary-letter"><b>X</b></a> <a href="#SEC203_23" class="summary-letter"><b>Z</b></a>
   
</td></tr></tbody></table>
<table border="0" class="index-op">
<tbody><tr><td></td><th align="left">索引输入</th><th align="left">部分</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_0">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX459"><code>absolute-names</code></a></td><td valign="top"><a href="#SEC120">6.10.2绝对文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX44"><code>absolute-names, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX45"><code>acls, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX390"><code>add-file</code></a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX448"><code>after-date</code></a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX46"><code>after-date, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX435"><code>anchored</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX47"><code>anchored, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC60"><code>append</code></a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC61"><code>append</code></a></td><td valign="top"><a href="#SEC61">4.2.2.1将文件追加到存档</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX33"><code>append, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX532"><code>atime-preserve</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX48"><code>atime-preserve, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX522"><code>auto-compress</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX49"><code>auto-compress, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_1">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX327"><code>backup</code></a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX50"><code>backup, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX213"><code>block-number</code></a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX51"><code>block-number, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX557"><code>blocking-factor</code></a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX52"><code>blocking-factor, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX53"><code>bzip2, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_2">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC65"><code>catenate</code></a></td><td valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX34"><code>catenate, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX344"><code>check-device, described</code></a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX54"><code>check-device, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX539"><code>check-links, described</code></a></td><td valign="top"><a href="#SEC142">8.3.3硬链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX57"><code>check-links, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC48"><code>checkpoint</code></a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX216"><code>checkpoint, defined</code></a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX55"><code>checkpoint, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC48"><code>checkpoint-action</code></a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX217"><code>checkpoint-action, defined</code></a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX56"><code>checkpoint-action, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX60"><code>clamp-mtime, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC67"><code>compare</code></a></td><td valign="top"><a href="#SEC67">4.2.6将存档成员与文件系统进行比较</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX35"><code>compare, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX519"><code>compress</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX58"><code>compress, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC65"><code>concatenate</code></a></td><td valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX36"><code>concatenate, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX61"><code>confirmation, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC68"><code>create, additional options</code></a></td><td valign="top"><a href="#SEC68">4.3所使用的选项<samp>`--create'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX281"><code>create, complementary notes</code></a></td><td valign="top"><a href="#SEC57">4.1基本的<acronym>GNU</acronym> <code>tar</code>运作方式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC19"><code>create, introduced</code></a></td><td valign="top"><a href="#SEC19">2.6.2创建档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX37"><code>create, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC20"><code>create, using with <samp>`--verbose'</samp></code></a></td><td valign="top"><a href="#SEC20">2.6.3运行<samp>`--create'</samp>与<samp>`--verbose'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX580"><code>create, using with <samp>`--verify'</samp></code></a></td><td valign="top"><a href="#SEC169">9.8验证存储的数据</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_3">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX313"><code>delay-directory-restore</code></a></td><td valign="top"><a href="#SEC85">目录修改时间和权限</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX62"><code>delay-directory-restore, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC66"><code>delete</code></a></td><td valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX38"><code>delete, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX287"><code>delete, using before --append</code></a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC141"><code>dereference</code></a></td><td valign="top"><a href="#SEC141">8.3.2符号链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX63"><code>dereference, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX39"><code>diff, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX458"><code>directory</code></a></td><td valign="top"><a href="#SEC119">6.10.1更改工作目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX64"><code>directory, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_4">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC110"><code>exclude</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX393"><code>exclude</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC111"><code>exclude, potential problems with</code></a></td><td valign="top"><a href="#SEC111">使用问题<code>exclude</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX65"><code>exclude, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX422"><code>exclude-backups</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX66"><code>exclude-backups, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX424"><code>exclude-caches</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX68"><code>exclude-caches, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX426"><code>exclude-caches-all</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX70"><code>exclude-caches-all, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX425"><code>exclude-caches-under</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX69"><code>exclude-caches-under, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC110"><code>exclude-from</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX395"><code>exclude-from</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX67"><code>exclude-from, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX408"><code>exclude-ignore</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX71"><code>exclude-ignore, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX409"><code>exclude-ignore-recursive</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX72"><code>exclude-ignore-recursive, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX428"><code>exclude-tag</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX73"><code>exclude-tag, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX430"><code>exclude-tag-all</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX75"><code>exclude-tag-all, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX429"><code>exclude-tag-under</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX74"><code>exclude-tag-under, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX421"><code>exclude-vcs</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX76"><code>exclude-vcs, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX403"><code>exclude-vcs-ignores</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX77"><code>exclude-vcs-ignores, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC25"><code>extract</code></a></td><td valign="top"><a href="#SEC25">2.8如何从存档中提取成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC72"><code>extract, additional options</code></a></td><td valign="top"><a href="#SEC72">4.4使用的选项<samp>`--extract'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX282"><code>extract, complementary notes</code></a></td><td valign="top"><a href="#SEC57">4.1基本的<acronym>GNU</acronym> <code>tar</code>运作方式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX40"><code>extract, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX346"><code>extract, using with <samp>`--listed-incremental'</samp></code></a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_5">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC106"><code>file</code></a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX377"><code>file, short description</code></a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX78"><code>file, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX12"><code>file, tutorial</code></a></td><td valign="top"><a href="#SEC14">的<samp>`--file'</samp>选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX387"><code>files-from</code></a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX79"><code>files-from, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX549"><code>force-local, short description</code></a></td><td valign="top"><a href="#SEC155">9.1设备选择和切换</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX80"><code>force-local, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX81"><code>format, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX82"><code>full-time, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_6">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX41"><code>get, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX295"><code>group</code></a></td><td valign="top"><a href="#SEC69">4.3.1覆盖文件元数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX83"><code>group, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX84"><code>group-map, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX86"><code>gunzip, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX512"><code>gzip</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX85"><code>gzip, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_7">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX540"><code>hard-dereference, described</code></a></td><td valign="top"><a href="#SEC142">8.3.3硬链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX88"><code>hard-dereference, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX14"><code>help</code></a></td><td valign="top"><a href="#SEC16">获取帮助：使用<samp>`--help'</samp>选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX205"><code>help, introduction</code></a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX89"><code>help, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX530"><code>hole-detection</code></a></td><td valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX90"><code>hole-detection, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_8">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX437"><code>ignore-case</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX91"><code>ignore-case, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX317"><code>ignore-command-error</code></a></td><td valign="top"><a href="#SEC87">写入外部程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX92"><code>ignore-command-error, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX296"><code>ignore-failed-read</code></a></td><td valign="top"><a href="#SEC71">4.3.3忽略读取失败</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX93"><code>ignore-failed-read, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC75"><code>ignore-zeros</code></a></td><td valign="top"><a href="#SEC75">忽略零块</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX558"><code>ignore-zeros, short description</code></a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX94"><code>ignore-zeros, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX95"><code>incremental, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX347"><code>incremental, using with <samp>`--list'</samp></code></a></td><td valign="top"><a href="#SEC_Foot"></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX96"><code>index-file, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX573"><code>info-script</code></a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX553"><code>info-script, short description</code></a></td><td valign="top"><a href="#SEC155">9.1设备选择和切换</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX97"><code>info-script, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX280"><code>interactive</code></a></td><td valign="top"><a href="#SEC54">3.10作业期间要求确认</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX99"><code>interactive, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_9">ķ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX100"><code>keep-directory-symlink, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX307"><code>keep-newer-files</code></a></td><td valign="top"><a href="#SEC80">保留较新的文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX101"><code>keep-newer-files, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX306"><code>keep-old-files</code></a></td><td valign="top"><a href="#SEC79">保留旧文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX299"><code>keep-old-files, introduced</code></a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX102"><code>keep-old-files, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_10">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC166"><code>label</code></a></td><td valign="top"><a href="#SEC166">9.6.2磁带文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC168"><code>label</code></a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX103"><code>label, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX341"><code>level, described</code></a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX104"><code>level, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC23"><code>list</code></a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX42"><code>list, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX349"><code>list, using with <samp>`--incremental'</samp></code></a></td><td valign="top"><a href="#SEC_Foot"></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX350"><code>list, using with <samp>`--listed-incremental'</samp></code></a></td><td valign="top"><a href="#SEC_Foot"></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX17"><code>list, using with <samp>`--verbose'</samp></code></a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX16"><code>list, using with file name arguments</code></a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX340"><code>listed-incremental, described</code></a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX105"><code>listed-incremental, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX345"><code>listed-incremental, using with <samp>`--extract'</samp></code></a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX348"><code>listed-incremental, using with <samp>`--list'</samp></code></a></td><td valign="top"><a href="#SEC_Foot"></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX515"><code>lzip</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX106"><code>lzip, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX516"><code>lzma</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX107"><code>lzma, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX517"><code>lzop</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_11">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX292"><code>mode</code></a></td><td valign="top"><a href="#SEC69">4.3.1覆盖文件元数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX108"><code>mode, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX293"><code>mtime</code></a></td><td valign="top"><a href="#SEC69">4.3.1覆盖文件元数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX109"><code>mtime, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC165"><code>multi-volume</code></a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX551"><code>multi-volume, short description</code></a></td><td valign="top"><a href="#SEC155">9.1设备选择和切换</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX110"><code>multi-volume, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_12">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX574"><code>new-volume-script</code></a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX554"><code>new-volume-script, short description</code></a></td><td valign="top"><a href="#SEC155">9.1设备选择和切换</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX98"><code>new-volume-script, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX111"><code>new-volume-script, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX449"><code>newer</code></a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX112"><code>newer, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX450"><code>newer-mtime</code></a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX113"><code>newer-mtime, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX114"><code>no-acls, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX436"><code>no-anchored</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX115"><code>no-anchored, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX116"><code>no-auto-compress, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX343"><code>no-check-device, described</code></a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX117"><code>no-check-device, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX314"><code>no-delay-directory-restore</code></a></td><td valign="top"><a href="#SEC85">目录修改时间和权限</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX118"><code>no-delay-directory-restore, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX438"><code>no-ignore-case</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX119"><code>no-ignore-case, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX318"><code>no-ignore-command-error</code></a></td><td valign="top"><a href="#SEC87">写入外部程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX120"><code>no-ignore-command-error, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX392"><code>no-null, described</code></a></td><td valign="top"><a href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX121"><code>no-null, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX122"><code>no-overwrite-dir, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX123"><code>no-quote-chars, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX451"><code>no-recursion</code></a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX124"><code>no-recursion, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX535"><code>no-same-owner</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX125"><code>no-same-owner, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX126"><code>no-same-permissions, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX127"><code>no-seek, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX128"><code>no-selinux, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX386"><code>no-unquote</code></a></td><td valign="top"><a href="#SEC107">6.2选择存档成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX129"><code>no-unquote, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX389"><code>no-verbatim-files-from</code></a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX130"><code>no-verbatim-files-from, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX434"><code>no-wildcards</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX131"><code>no-wildcards, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX440"><code>no-wildcards-match-slash</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX132"><code>no-wildcards-match-slash, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX133"><code>no-xattrs, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX391"><code>null, described</code></a></td><td valign="top"><a href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX134"><code>null, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX536"><code>numeric-owner</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX135"><code>numeric-owner, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_13">Ø</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX284"><code>occurrence, described</code></a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX136"><code>occurrence, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX137"><code>old-archive, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX454"><code>one-file-system</code></a></td><td valign="top"><a href="#SEC118">6.10跨越文件系统边界</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX138"><code>one-file-system, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX139"><code>one-top-level, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX304"><code>overwrite</code></a></td><td valign="top"><a href="#SEC78">覆盖旧文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX301"><code>overwrite, introduced</code></a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX140"><code>overwrite, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX305"><code>overwrite-dir</code></a></td><td valign="top"><a href="#SEC78">覆盖旧文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC77"><code>overwrite-dir, introduced</code></a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX141"><code>overwrite-dir, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX294"><code>owner</code></a></td><td valign="top"><a href="#SEC69">4.3.1覆盖文件元数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX142"><code>owner, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX143"><code>owner-map, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_14">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX541"><code>pax-option</code></a></td><td valign="top"><a href="#SEC147">8.3.7.1控制扩展头关键字</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX144"><code>pax-option, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX145"><code>portability, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX146"><code>posix, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX326"><code>preserve-order</code></a></td><td valign="top"><a href="#SEC91">相同顺序</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX147"><code>preserve-order, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX311"><code>preserve-permissions</code></a></td><td valign="top"><a href="#SEC84">设置访问权限</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX538"><code>preserve-permissions, short description</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX148"><code>preserve-permissions, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_15">问</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX150"><code>quote-chars, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX441"><code>quoting-style</code></a></td><td valign="top"><a href="#SEC114">6.6引用会员名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX151"><code>quoting-style, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_16">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC73"><code>read-full-records</code></a></td><td valign="top"><a href="#SEC73">4.4.1帮助阅读档案的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX297"><code>read-full-records</code></a></td><td valign="top"><a href="#SEC74">阅读完整记录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX559"><code>read-full-records, short description</code></a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX152"><code>read-full-records, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX153"><code>record-size, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX453"><code>recursion</code></a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX154"><code>recursion, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX309"><code>recursive-unlink</code></a></td><td valign="top"><a href="#SEC82">递归取消链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX155"><code>recursive-unlink, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX319"><code>remove-files</code></a></td><td valign="top"><a href="#SEC88">删除文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX156"><code>remove-files, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX157"><code>restrict, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX158"><code>rmt-command, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX550"><code>rsh-command</code></a></td><td valign="top"><a href="#SEC155">9.1设备选择和切换</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX159"><code>rsh-command, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_17">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX325"><code>same-order</code></a></td><td valign="top"><a href="#SEC91">相同顺序</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX160"><code>same-order, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX534"><code>same-owner</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX161"><code>same-owner, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX312"><code>same-permissions</code></a></td><td valign="top"><a href="#SEC84">设置访问权限</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX537"><code>same-permissions, short description</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX149"><code>same-permissions, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX162"><code>same-permissions, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX163"><code>seek, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX164"><code>selinux, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC46"><code>show-defaults</code></a></td><td valign="top"><a href="#SEC46">3.6获取<acronym>GNU</acronym> <code>tar</code>默认值</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX165"><code>show-defaults, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX212"><code>show-omitted-dirs</code></a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX166"><code>show-omitted-dirs, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX599"><code>show-snapshot-field-ranges</code></a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX167"><code>show-snapshot-field-ranges, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX20"><code>show-stored-names</code></a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX169"><code>show-stored-names, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX443"><code>show-transformed-names</code></a></td><td valign="top"><a href="#SEC115">6.7修改文件和成员名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX168"><code>show-transformed-names, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX300"><code>skip-old-files, introduced</code></a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX170"><code>skip-old-files, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX171"><code>sort, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX527"><code>sparse</code></a></td><td valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX172"><code>sparse, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX529"><code>sparse-version</code></a></td><td valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX173"><code>sparse-version, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX322"><code>starting-file</code></a></td><td valign="top"><a href="#SEC90">起始文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX174"><code>starting-file, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX442"><code>strip-components</code></a></td><td valign="top"><a href="#SEC115">6.7修改文件和成员名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX175"><code>strip-components, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX334"><code>suffix</code></a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX176"><code>suffix, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_18">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX567"><code>tape-length</code></a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX552"><code>tape-length, short description</code></a></td><td valign="top"><a href="#SEC155">9.1设备选择和切换</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX177"><code>tape-length, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX577"><code>test-label</code></a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX178"><code>test-label, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX316"><code>to-command</code></a></td><td valign="top"><a href="#SEC87">写入外部程序</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX179"><code>to-command, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX315"><code>to-stdout</code></a></td><td valign="top"><a href="#SEC86">写入标准输出</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX180"><code>to-stdout, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX210"><code>totals</code></a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX181"><code>totals, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX310"><code>touch</code></a></td><td valign="top"><a href="#SEC83">设置数据修改时间</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX533"><code>touch</code></a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX182"><code>touch, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX444"><code>transform</code></a></td><td valign="top"><a href="#SEC115">6.7修改文件和成员名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX183"><code>transform, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_19">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX520"><code>uncompress</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX59"><code>uncompress, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX185"><code>uncompress, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX513"><code>ungzip</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX87"><code>ungzip, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX186"><code>ungzip, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX308"><code>unlink-first</code></a></td><td valign="top"><a href="#SEC81">首先取消链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX303"><code>unlink-first, introduced</code></a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX187"><code>unlink-first, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX385"><code>unquote</code></a></td><td valign="top"><a href="#SEC107">6.2选择存档成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX188"><code>unquote, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC63"><code>update</code></a></td><td valign="top"><a href="#SEC63">4.2.3更新档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC64"><code>update</code></a></td><td valign="top"><a href="#SEC64">4.2.3.1如何使用更新档案<samp>`--update'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX43"><code>update, summary</code></a></td><td valign="top"><a href="#SEC41">3.4.1操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX206"><code>usage</code></a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX523"><code>use-compress-program</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX189"><code>use-compress-program, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX190"><code>utc, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_20">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX388"><code>verbatim-files-from</code></a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX191"><code>verbatim-files-from, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX208"><code>verbose</code></a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX13"><code>verbose, introduced</code></a></td><td valign="top"><a href="#SEC15">的<samp>`--verbose'</samp>选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX192"><code>verbose, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC20"><code>verbose, using with <samp>`--create'</samp></code></a></td><td valign="top"><a href="#SEC20">2.6.3运行<samp>`--create'</samp>与<samp>`--verbose'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX18"><code>verbose, using with <samp>`--list'</samp></code></a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX578"><code>verify, short description</code></a></td><td valign="top"><a href="#SEC169">9.8验证存储的数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX193"><code>verify, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX579"><code>verify, using with <samp>`--create'</samp></code></a></td><td valign="top"><a href="#SEC169">9.8验证存储的数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC45"><code>version</code></a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX194"><code>version, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX570"><code>volno-file</code></a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX195"><code>volno-file, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_21">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX226"><code>warning, explained</code></a></td><td valign="top"><a href="#SEC49">3.9控制警告消息</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX196"><code>warning, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX433"><code>wildcards</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX197"><code>wildcards, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX439"><code>wildcards-match-slash</code></a></td><td valign="top"><a href="#SEC113">控制模式匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX198"><code>wildcards-match-slash, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_22">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX199"><code>xattrs, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX200"><code>xattrs-exclude, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX201"><code>xattrs-include, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX445"><code>xform</code></a></td><td valign="top"><a href="#SEC115">6.7修改文件和成员名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX184"><code>xform, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX514"><code>xz</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX202"><code>xz, summary</code></a></td><td valign="top"><a href="#SEC42">3.4.2 <code>tar</code>选件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC203_23">ž</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX518"><code>zstd</code></a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a href="#SEC203_0" class="summary-letter"><b>A</b></a> <a href="#SEC203_1" class="summary-letter"><b>B</b></a> <a href="#SEC203_2" class="summary-letter"><b>C</b></a> <a href="#SEC203_3" class="summary-letter"><b>D</b></a> <a href="#SEC203_4" class="summary-letter"><b>E</b></a> <a href="#SEC203_5" class="summary-letter"><b>F</b></a> <a href="#SEC203_6" class="summary-letter"><b>G</b></a> <a href="#SEC203_7" class="summary-letter"><b>H</b></a> <a href="#SEC203_8" class="summary-letter"><b>I</b></a> <a href="#SEC203_9" class="summary-letter"><b>K</b></a> <a href="#SEC203_10" class="summary-letter"><b>L</b></a> <a href="#SEC203_11" class="summary-letter"><b>M</b></a> <a href="#SEC203_12" class="summary-letter"><b>N</b></a> <a href="#SEC203_13" class="summary-letter"><b>O</b></a> <a href="#SEC203_14" class="summary-letter"><b>P</b></a> <a href="#SEC203_15" class="summary-letter"><b>Q</b></a> <a href="#SEC203_16" class="summary-letter"><b>R</b></a> <a href="#SEC203_17" class="summary-letter"><b>S</b></a> <a href="#SEC203_18" class="summary-letter"><b>T</b></a> <a href="#SEC203_19" class="summary-letter"><b>U</b></a> <a href="#SEC203_20" class="summary-letter"><b>V</b></a> <a href="#SEC203_21" class="summary-letter"><b>W</b></a> <a href="#SEC203_22" class="summary-letter"><b>X</b></a> <a href="#SEC203_23" class="summary-letter"><b>Z</b></a>
   
</td></tr></tbody></table>

<hr size="6">
<a name="Index"></a>
<a name="SEC204"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC203" title="上一节阅读顺序"><</a> ]</td>
<td valign="middle" align="left">[>]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC203" title="本章或上一章的开始"><<</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="上节">向上</a> ]</td>
<td valign="middle" align="left">[>>]</td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">   </td>
<td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1 class="appendix">J.索引</h1>

<table><tbody><tr><th valign="top">跳到：</th><td><a href="#SEC204_0" class="summary-letter"><b>％</b></a> <a href="#SEC204_1" class="summary-letter"><b>-</b></a> <a href="#SEC204_2" class="summary-letter"><b>。</b></a>
   
<br>
<a href="#SEC204_3" class="summary-letter"><b>A</b></a> <a href="#SEC204_4" class="summary-letter"><b>B</b></a> <a href="#SEC204_5" class="summary-letter"><b>C</b></a> <a href="#SEC204_6" class="summary-letter"><b>D</b></a> <a href="#SEC204_7" class="summary-letter"><b>E</b></a> <a href="#SEC204_8" class="summary-letter"><b>F</b></a> <a href="#SEC204_9" class="summary-letter"><b>G</b></a> <a href="#SEC204_10" class="summary-letter"><b>H</b></a> <a href="#SEC204_11" class="summary-letter"><b>I</b></a> <a href="#SEC204_12" class="summary-letter"><b>L</b></a> <a href="#SEC204_13" class="summary-letter"><b>M</b></a> <a href="#SEC204_14" class="summary-letter"><b>N</b></a> <a href="#SEC204_15" class="summary-letter"><b>O</b></a> <a href="#SEC204_16" class="summary-letter"><b>P</b></a> <a href="#SEC204_17" class="summary-letter"><b>R</b></a> <a href="#SEC204_18" class="summary-letter"><b>S</b></a> <a href="#SEC204_19" class="summary-letter"><b>T</b></a> <a href="#SEC204_20" class="summary-letter"><b>U</b></a> <a href="#SEC204_21" class="summary-letter"><b>V</b></a> <a href="#SEC204_22" class="summary-letter"><b>W</b></a> <a href="#SEC204_23" class="summary-letter"><b>X</b></a> <a href="#SEC204_24" class="summary-letter"><b>Y</b></a> <a href="#SEC204_25" class="summary-letter"><b>Z</b></a>
   
</td></tr></tbody></table>
<table border="0" class="index-cp">
<tbody><tr><td></td><th align="left">索引输入</th><th align="left">部分</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_0">％</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX272"><samp>`%s: Directory has been renamed from %s'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX273"><samp>`%s: Directory has been renamed'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX275"><samp>`%s: Directory is new'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX277"><samp>`%s: directory is on a different device: not purging'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX254"><samp>`%s: skipping existing file'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_1">--</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX446">-更新后和更新</a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX447">-newer-mtime和-update比较</a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX606">-相当，选项</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_2">。</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX406"><code>.bzrignore</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX404"><code>.cvsignore</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX405"><code>.gitignore</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX407"><code>.hgignore</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_3">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX232"><samp>`A lone zero block at'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC50">关键字控制<code>tar</code>操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX475">几个月的缩写</a></td><td valign="top"><a href="#SEC123">7.2日历日期项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC120">绝对文件名</a></td><td valign="top"><a href="#SEC120">6.10.2绝对文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX555">绝对文件名</a></td><td valign="top"><a href="#SEC156">9.2远程磁带服务器</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC65">将档案添加到档案</a></td><td valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC61">将文件添加到存档</a></td><td valign="top"><a href="#SEC61">4.2.2.1将文件追加到存档</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX351"><code>ADMINISTRATOR</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC116">年龄，不包括按</a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX492"><code>ago in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX227"><code>all</code></a></td><td valign="top"><a href="#SEC50">关键字控制<code>tar</code>操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX231"><code>alone-zero-block</code></a></td><td valign="top"><a href="#SEC50">关键字控制<code>tar</code>操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX511">替代减压程序</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX477"><code>am in date strings</code></a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC61">将文件追加到存档</a></td><td valign="top"><a href="#SEC61">4.2.2.1将文件追加到存档</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC60">将文件附加到现有存档</a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX418">拱门，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC3">封存</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX379">建立档案</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX4">存档成员</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC106">档案名称</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC17">存档，创建</a></td><td valign="top"><a href="#SEC17">2.6如何创建档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC61">存档，将文件追加到</a></td><td valign="top"><a href="#SEC61">4.2.2.1将文件追加到存档</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX542">档案，等效二进制文件</a></td><td valign="top"><a href="#SEC147">8.3.7.1控制扩展头关键字</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC22">归档目录</a></td><td valign="top"><a href="#SEC22">2.6.5归档目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX2">存档文件</a></td><td valign="top"><a href="#SEC_Top"><acronym>GNU</acronym> tar：存档工具</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX23">长选项的参数</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX31">旧选项的论点</a></td><td valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX27">短期权的论点</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX261"><samp>`Attempting extraction of symbolic links as hard links'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC138">属性，文件</a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX502">作者<code>parse_datetime</code></a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC117">避免目录中的递归</a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_4">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC92">备份选项</a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX335">备份后缀</a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX355"><code>BACKUP_DIRS</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX357"><code>BACKUP_FILES</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX352"><code>BACKUP_HOUR</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX329">备份</a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC94">备份</a></td><td valign="top"><a href="#SEC94">5，执行备份和还原文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX278"><code>bad-dumpdir</code></a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC59">基本操作</a></td><td valign="top"><a href="#SEC59">4.2.1五大进阶<code>tar</code>运作方式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX417">集市，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX401">集市，忽略文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX499">时间开始，用于POSIX</a></td><td valign="top"><a href="#SEC130">自大纪元7.9秒</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX219"><code>bell</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX503">贝洛芬，史蒂芬·M。</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX505">贝雷帽，吉姆</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX510">贝里，K。</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX543">等效的二进制档案，创建</a></td><td valign="top"><a href="#SEC147">8.3.7.1控制扩展头关键字</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC158">块</a></td><td valign="top"><a href="#SEC158">9.4封锁</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX214">发生错误的程序段号</a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX354"><code>BLOCKING</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX560">阻碍因素</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC160">阻滞因子</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC160">每条记录块</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC7">错误报告</a></td><td valign="top"><a href="#SEC7">1.6报告错误或建议</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC160">每条记录字节</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">bzip2</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_5">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX233"><code>cachedir</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC123">日历日期项目</a></td><td valign="top"><a href="#SEC123">7.2日历日期项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX469">大小写，在日期中被忽略</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX289"><code>cat</code>与<code>concatenate</code></a></td><td valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX455">更改目录中途</a></td><td valign="top"><a href="#SEC119">6.10.1更改工作目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX432">字符类，不包括来自</a></td><td valign="top"><a href="#SEC112">6.5通配符模式和匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC48">检查点，已定义</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC106">选择档案文件</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC126">当天日期和时间的组合项</a></td><td valign="top"><a href="#SEC126">7.5合并的日期和时间项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX470">评论，按日期</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">压缩</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">压缩档案</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX288"><code>concatenate</code>与<code>cat</code></a></td><td valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC65">串联档案</a></td><td valign="top"><a href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX234"><samp>`contains a cache directory tag'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX258"><code>contiguous-cast</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX339">损坏的档案</a></td><td valign="top"><a href="#SEC95">5.1使用<code>tar</code>执行完整转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX521">损坏的档案</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC17">创建档案</a></td><td valign="top"><a href="#SEC17">2.6如何创建档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX265"><samp>`Current %s is newer or same age'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX414">CVS，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX399">CVS，忽略文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_6">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX420">Darcs，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX563">DAT封锁</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC116">数据修改时间，不包括文件</a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC83">提取文件的数据修改时间</a></td><td valign="top"><a href="#SEC83">设置数据修改时间</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC126">日期和时间格式，ISO 8601</a></td><td valign="top"><a href="#SEC126">7.5合并的日期和时间项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX473">日期格式，ISO 8601</a></td><td valign="top"><a href="#SEC123">7.2日历日期项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC121">日期输入格式</a></td><td valign="top"><a href="#SEC121">7。日期输入格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX489"><code>day in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX493"><code>day in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC127">星期几项目</a></td><td valign="top"><a href="#SEC127">7.6星期几项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX268"><code>decompress-program</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC66">从档案中删除文件</a></td><td valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX291">从磁带档案中删除</a></td><td valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC142">取消引用硬链接</a></td><td valign="top"><a href="#SEC142">8.3.3硬链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC117">降序目录，避免</a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC186">设备编号，不断变化</a></td><td valign="top"><a href="#SEC186">D.修复快照文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX342">设备编号，用于增量备份</a></td><td valign="top"><a href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC22">目录，存档</a></td><td valign="top"><a href="#SEC22">2.6.5归档目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC117">目录，避免递归</a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX456">目录，正在更改中游</a></td><td valign="top"><a href="#SEC119">6.10.1更改工作目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX356"><code>DIRLIST</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC128">日期的置换</a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX585"><code>doc-opt-col</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX242"><samp>`door ignored'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX221"><code>dot</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC169">仔细检查写操作</a></td><td valign="top"><a href="#SEC169">9.8验证存储的数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX373"><code>DUMP_BEGIN</code></a></td><td valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX374"><code>DUMP_END</code></a></td><td valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX365"><code>DUMP_REMIND_SCRIPT</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX338">完整的转储</a></td><td valign="top"><a href="#SEC95">5.1使用<code>tar</code>执行完整转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX581"><code>dup-args</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX582"><code>dup-args-note</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_7">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX218"><code>echo</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX508">保罗·埃格特</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC75">归档结束块，忽略</a></td><td valign="top"><a href="#SEC75">忽略零块</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX571">归档结束信息脚本</a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX10">条目</a></td><td valign="top"><a href="#SEC5">1.4如何<code>tar</code>档案命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX500">时代，用于POSIX</a></td><td valign="top"><a href="#SEC130">自大纪元7.9秒</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX215">错误信息，块号</a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX562">艾字节级阻止</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX394"><code>exclude</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX423"><code>exclude-caches</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX396"><code>exclude-from</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX427"><code>exclude-tag</code></a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX431">从角色类中排除角色</a></td><td valign="top"><a href="#SEC112">6.5通配符模式和匹配</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC116">按年龄排除文件</a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC110">按文件系统排除文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC110">按名称和模式排除文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC199">执行模式<code>genfile</code></a></td><td valign="top"><a href="#SEC199">F.3执行模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX225"><code>exec</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX332">现有备份方法</a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX253"><code>existing-file</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX21">退出状态</a></td><td valign="top"><a href="#SEC33">3.1概述<code>tar</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX259"><samp>`Extracting contiguous files as regular files'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX283">提取<var>n</var>文件的副本</a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX7">萃取</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC25">萃取</a></td><td valign="top"><a href="#SEC25">2.8如何从存档中提取成员</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_8">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX1">文件存档</a></td><td valign="top"><a href="#SEC_Top"><acronym>GNU</acronym> tar：存档工具</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC138">文件属性</a></td><td valign="top"><a href="#SEC138">8.2处理文件属性</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX252"><samp>`file changed as we read it'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX238"><samp>`file is on a different filesystem'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX246"><samp>`file is the archive; not dumped'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX248"><samp>`file is the archive; not dumped'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX244"><samp>`file is unchanged; not dumped'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX602">由NUL字符分隔的文件列表</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX5">文档名称</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC108">文件名参数，替代方式</a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX15">文件名参数，使用<samp>`--list'</samp>与</a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX230"><samp>`file name read contains nul character'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC50">关键字控制<code>tar</code>操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC120">文件名，绝对</a></td><td valign="top"><a href="#SEC120">6.10.2绝对文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC110">文件名，不包括按</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC109">文件名，以终止<code>NUL</code></a></td><td valign="top"><a href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC142">使用硬链接的文件名</a></td><td valign="top"><a href="#SEC142">8.3.3硬链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC141">文件名，使用符号链接</a></td><td valign="top"><a href="#SEC141">8.3.2符号链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX250"><samp>`File removed before we read it'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX236"><samp>`File shrank by %s bytes'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC118">文件系统边界，不可跨越</a></td><td valign="top"><a href="#SEC118">6.10跨越文件系统边界</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX251"><code>file-changed</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX239"><code>file-ignored</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX249"><code>file-removed</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX235"><code>file-shrank</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX243"><code>file-unchanged</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX358"><code>FILELIST</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX229"><code>filename-with-nuls</code></a></td><td valign="top"><a href="#SEC50">关键字控制<code>tar</code>操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC108"><code>find</code> ，与<code>tar</code></a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX452"><code>find</code> ，与<code>tar</code></a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX462"><code>first in date strings</code></a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX592">格式0，快照文件</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX594">格式1，快照文件</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX596">格式2，快照文件</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC159">格式选项</a></td><td valign="top"><a href="#SEC159">9.4.1格式差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC159">格式参数</a></td><td valign="top"><a href="#SEC159">9.4.1格式差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC143">格式，旧样式</a></td><td valign="top"><a href="#SEC143">8.3.4旧的V7档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX487"><code>fortnight in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC200">免费文件</a></td><td valign="top"><a href="#SEC200">G.自由软件需要自由文档</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX337">全转储</a></td><td valign="top"><a href="#SEC95">5.1使用<code>tar</code>执行完整转储</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC149">未来的时间戳</a></td><td valign="top"><a href="#SEC149">8.3.9大或负值</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_9">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC122">通用日期语法</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC197">生成模式<code>genfile</code></a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC196">源文件</a></td><td valign="top"><a href="#SEC196">F.Genfile</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC197"><code>genfile</code> ，创建文件</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX605"><code>genfile</code> ，创建稀疏文件</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC197"><code>genfile</code> ，生成模式</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX601"><code>genfile</code> ，读取文件名列表</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX600"><code>genfile</code> ，寻求给定的偏移量</a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC45">获取程序版本号</a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX416">git，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX400">Git，忽略文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC145">GNU档案格式</a></td><td valign="top"><a href="#SEC145">8.3.6 <acronym>GNU</acronym>和旧的<acronym>GNU</acronym> <code>tar</code>格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX525">gnupg，与tar一起使用</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX524">gpg，与tar一起使用</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">gzip</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_10">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC142">硬链接，取消引用</a></td><td valign="top"><a href="#SEC142">8.3.3硬链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX587"><code>header-col</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX531">孔检测</a></td><td valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX372"><code>hook</code></a></td><td valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX490"><code>hour in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_11">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX245"><code>ignore-archive</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX247"><code>ignore-archive</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX264"><code>ignore-newer</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC75">忽略归档结束块</a></td><td valign="top"><a href="#SEC75">忽略零块</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX267"><samp>`Ignoring unknown extended header keyword '%s''</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX256"><samp>`implausibly old time stamp %s'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX572">信息脚本</a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC54">互动操作</a></td><td valign="top"><a href="#SEC54">3.10作业期间要求确认</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC126">ISO 8601日期和时间格式</a></td><td valign="top"><a href="#SEC126">7.5合并的日期和时间项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX472">ISO 8601日期格式</a></td><td valign="top"><a href="#SEC123">7.2日历日期项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC122">日期字符串中的项目</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_12">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC168">标记档案</a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC166">标记档案</a></td><td valign="top"><a href="#SEC166">9.6.2磁带文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC168">标记多卷档案</a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC168">存档媒体上的标签</a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX466">语言，以日期为单位</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX467">语言，以日期为单位</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX324">小型计算机上的大型文件名列表</a></td><td valign="top"><a href="#SEC91">相同顺序</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC149">大价值</a></td><td valign="top"><a href="#SEC149">8.3.9大或负值</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX484"><code>last <var>day</var></code></a></td><td valign="top"><a href="#SEC127">7.6星期几项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX464"><code>last in date strings</code></a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC136">拉斯洛·埃塞克（Laszlo Ersek）</a></td><td valign="top"><a href="#SEC136">8.1.1.1将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC136">lbzip2</a></td><td valign="top"><a href="#SEC136">8.1.1.1将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX471">seconds秒</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX476">seconds秒</a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX501">seconds秒</a></td><td valign="top"><a href="#SEC130">自大纪元7.9秒</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX204">全部列出<code>tar</code>选项</a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX19">列出成员和文件名</a></td><td valign="top"><a href="#SEC23">2.7如何列出档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX576">上市卷标</a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC108">文件名列表</a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX384">本地和远程档案</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC36">长选项</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX24">带强制参数的长选项</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX26">带可选参数的长选项</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX584"><code>long-opt-col</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">邮编</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">伊兹玛</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">左旋</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_13">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX506">麦肯齐（David MacKenzie）</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX279"><samp>`Malformed dumpdir: 'X' never used'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX3">会员</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX6">成员名字</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC62">成员，多个</a></td><td valign="top"><a href="#SEC62">4.2.2.2具有相同名称的多个成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX285">成员，以其他成员代替</a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX419">Mercurial，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX402">Mercurial，忽略文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX507">迈耶林，吉姆</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX323">存档的中间，从</a></td><td valign="top"><a href="#SEC90">起始文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX479"><code>midnight in date strings</code></a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX491"><code>minute in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX482">分钟，时区校正</a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC84">提取文件的模式</a></td><td valign="top"><a href="#SEC84">设置访问权限</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC116">修改时间，不包括按</a></td><td valign="top"><a href="#SEC116">6.8仅在新文件上操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC83">提取文件的修改时间</a></td><td valign="top"><a href="#SEC83">设置数据修改时间</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX486"><code>month in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX474">日期字符串中的月份名称</a></td><td valign="top"><a href="#SEC123">7.2日历日期项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX465">几个月，写出</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX359"><code>MT</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX368"><code>MT_BEGIN</code></a></td><td valign="top"><a href="#SEC100">5.4.2磁带控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX370"><code>MT_OFFLINE</code></a></td><td valign="top"><a href="#SEC100">5.4.2磁带控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX369"><code>MT_REWIND</code></a></td><td valign="top"><a href="#SEC100">5.4.2磁带控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX371"><code>MT_STATUS</code></a></td><td valign="top"><a href="#SEC100">5.4.2磁带控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC165">多卷档案</a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX544">PAX格式的多卷档案，使用非GNU tar提取</a></td><td valign="top"><a href="#SEC151">8.3.10.1提取在卷之间划分的成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC151">多卷档案，使用非GNU tar提取</a></td><td valign="top"><a href="#SEC151">8.3.10.1提取在卷之间划分的成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC62">多个成员</a></td><td valign="top"><a href="#SEC62">4.2.2.2具有相同名称的多个成员</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_14">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC106">命名档案</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC149">负时间戳</a></td><td valign="top"><a href="#SEC149">8.3.9大或负值</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX274"><code>new-directory</code></a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX483"><code>next <var>day</var></code></a></td><td valign="top"><a href="#SEC127">7.6星期几项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX463"><code>next in date strings</code></a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX228"><code>none</code></a></td><td valign="top"><a href="#SEC50">关键字控制<code>tar</code>操作</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX480"><code>noon in date strings</code></a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX496"><code>now in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX564"><code>ntape device</code></a></td><td valign="top"><a href="#SEC161">9.5一卷磁带上有许多档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC109"><code>NUL</code>终止的文件名</a></td><td valign="top"><a href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC160">每条记录的块数</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC160">每条记录的字节数</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX331">编号备份方法</a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX460">数字，写出</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_15">Ø</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX203">获得帮助</a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX209">获取总状态信息</a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC145">旧的GNU存档格式</a></td><td valign="top"><a href="#SEC145">8.3.6 <acronym>GNU</acronym>和旧的<acronym>GNU</acronym> <code>tar</code>格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC191">旧的GNU稀疏格式</a></td><td valign="top"><a href="#SEC191">E.0.1旧的GNU格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC38">旧选项样式</a></td><td valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX32">带有强制参数的旧选项</a></td><td valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC143">旧样式档案</a></td><td valign="top"><a href="#SEC143">8.3.4旧的V7档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC143">旧样式格式</a></td><td valign="top"><a href="#SEC143">8.3.4旧的V7档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX586"><code>opt-doc-col</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC38">选项语法，传统</a></td><td valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX25">长选项的可选参数</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX29">短选项的可选参数</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC72">用于的选项<samp>`--extract'</samp></a></td><td valign="top"><a href="#SEC72">4.4使用的选项<samp>`--extract'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC73">阅读档案时的选项</a></td><td valign="top"><a href="#SEC73">4.4.1帮助阅读档案的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC159">选项，指定归档格式</a></td><td valign="top"><a href="#SEC159">9.4.1格式差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC159">选项，格式指定</a></td><td valign="top"><a href="#SEC159">9.4.1格式差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC36">选项，GNU风格</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC36">选项，长款</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC39">选项，混合不同样式</a></td><td valign="top"><a href="#SEC39">3.3.4混合选项样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC36">选项，助记符名称</a></td><td valign="top"><a href="#SEC36">3.3.1长期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC38">选项，旧样式</a></td><td valign="top"><a href="#SEC38">3.3.3旧选项样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC37">选项，短样式</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC37">选项，传统</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX461">序数</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX298">覆盖旧文件，预防</a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_16">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC121"><code>parse_datetime</code></a></td><td valign="top"><a href="#SEC121">7。日期输入格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX603">图案，<code>genfile</code></a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC146">PAX存档格式</a></td><td valign="top"><a href="#SEC146">8.3.7 <acronym>GNU</acronym> <code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC84">提取文件的权限</a></td><td valign="top"><a href="#SEC84">设置访问权限</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX509">皮纳德·F。</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX478"><code>pm in date strings</code></a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC146">POSIX存档格式</a></td><td valign="top"><a href="#SEC146">8.3.7 <acronym>GNU</acronym> <code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX211">进度信息</a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX302">保护旧文件</a></td><td valign="top"><a href="#SEC77">控制覆盖现有文件的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC129">日期字符串中的纯数字</a></td><td valign="top"><a href="#SEC129">7.8日期字符串中的纯数字</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_17">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX413">RCS，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC108">从文件读取文件名</a></td><td valign="top"><a href="#SEC108">6.3从文件读取名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC73">读取不完整的记录</a></td><td valign="top"><a href="#SEC73">4.4.1帮助阅读档案的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC158">记录</a></td><td valign="top"><a href="#SEC158">9.4封锁</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC160">记录大小</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX270"><samp>`Record size = %lu blocks'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX269"><code>record-size</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC73">记录不完整</a></td><td valign="top"><a href="#SEC73">4.4.1帮助阅读档案的选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC117">递归目录，避免</a></td><td valign="top"><a href="#SEC117">6.9下降到目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC128">日期字符串中的相对项目</a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX382">远端装置</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC156">远程磁带机</a></td><td valign="top"><a href="#SEC156">9.2远程磁带服务器</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC66">从档案中删除文件</a></td><td valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX271"><code>rename-directory</code></a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX286">用其他成员替换成员</a></td><td valign="top"><a href="#SEC60">4.2.2如何将文件添加到现有档案中：<samp>`--append'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC7">报告错误</a></td><td valign="top"><a href="#SEC7">1.6报告错误或建议</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX375"><code>RESTORE_BEGIN</code></a></td><td valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX376"><code>RESTORE_END</code></a></td><td valign="top"><a href="#SEC101">5.4.3用户挂钩</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC25">从档案恢复文件</a></td><td valign="top"><a href="#SEC25">2.8如何从存档中提取成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC25">从档案中检索文件</a></td><td valign="top"><a href="#SEC25">2.8如何从存档中提取成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX22">退货状态</a></td><td valign="top"><a href="#SEC33">3.1概述<code>tar</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX589"><code>rmargin</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC156"><code>rmt</code></a></td><td valign="top"><a href="#SEC156">9.2远程磁带服务器</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX360"><code>RSH</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX361"><code>RSH_COMMAND</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX321">空间用完了</a></td><td valign="top"><a href="#SEC89">4.4.3应对稀缺资源</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_18">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX504">萨尔茨·里奇</a></td><td valign="top"><a href="#SEC132">7.11的作者<code>parse_datetime</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX412">SCCS，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC37">短选项</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX28">带有强制参数的简短选项</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX30">带有可选参数的简短选项</a></td><td valign="top"><a href="#SEC37">3.3.2短期权样式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX583"><code>short-opt-col</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX333">简单的备份方法</a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX336"><code>SIMPLE_BACKUP_SUFFIX</code></a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX223"><code>sleep</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX366"><code>SLEEP_MESSAGE</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX364"><code>SLEEP_TIME</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX320">小内存</a></td><td valign="top"><a href="#SEC89">4.4.3应对稀缺资源</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX598">快照文件字段范围</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX593">快照文件，格式为0</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX595">快照文件，格式1</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX597">快照文件，格式2</a></td><td valign="top"><a href="#SEC194">增量快照文件的格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC186">快照文件，编辑</a></td><td valign="top"><a href="#SEC186">D.修复快照文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC186">快照文件，固定设备编号</a></td><td valign="top"><a href="#SEC186">D.修复快照文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX241"><samp>`socket ignored'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC137">稀疏文件</a></td><td valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX548">稀疏文件v.0.0，使用非GNU tar提取</a></td><td valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX547">稀疏文件v.0.1，使用非GNU tar提取</a></td><td valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX546">稀疏文件v.1.0，使用非GNU tar提取</a></td><td valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX604">稀疏文件，使用创建<code>genfile</code></a></td><td valign="top"><a href="#SEC197">F.1生成模式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC152">稀疏文件，使用非GNU tar提取</a></td><td valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC190">稀疏格式</a></td><td valign="top"><a href="#SEC190">存储稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX528">稀疏格式，已定义</a></td><td valign="top"><a href="#SEC137">8.1.2存档稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC191">稀疏格式，旧版GNU</a></td><td valign="top"><a href="#SEC191">E.0.1旧的GNU格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC192">稀疏格式，v.0.0</a></td><td valign="top"><a href="#SEC192">E.0.2 PAX格式，版本0.0和0.1</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX591">稀疏格式，v.0.1</a></td><td valign="top"><a href="#SEC192">E.0.2 PAX格式，版本0.0和0.1</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC193">稀疏格式，v.1.0</a></td><td valign="top"><a href="#SEC193">E.0.3 PAX格式，版本1.0</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC190">稀疏版本</a></td><td valign="top"><a href="#SEC190">存储稀疏文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC107">指定存档成员</a></td><td valign="top"><a href="#SEC107">6.2选择存档成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC107">指定要执行的文件</a></td><td valign="top"><a href="#SEC107">6.2选择存档成员</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX380">标准输入输出</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC86">标准输出，将提取的文件写入</a></td><td valign="top"><a href="#SEC86">写入标准输出</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">以压缩格式存储档案</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX415">SVN，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC141">符号链接作为文件名</a></td><td valign="top"><a href="#SEC141">8.3.2符号链接</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX260"><code>symlink-cast</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_19">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX561">胶带阻塞</a></td><td valign="top"><a href="#SEC160">9.4.2存档的阻塞因素</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX566">胶带标记</a></td><td valign="top"><a href="#SEC161">9.5一卷磁带上有许多档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX565">胶带定位</a></td><td valign="top"><a href="#SEC161">9.5一卷磁带上有许多档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX353"><code>TAPE_FILE</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX290">胶带，使用<samp>`--delete'</samp>和</a></td><td valign="top"><a href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX367"><code>TAR</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC4">柏油</a></td><td valign="top"><a href="#SEC4">1.3什么<code>tar</code>是否</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC3">焦油档案</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC133">Tar存档格式</a></td><td valign="top"><a href="#SEC133">8。控制存档格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX11">焦油入口</a></td><td valign="top"><a href="#SEC5">1.4如何<code>tar</code>档案命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX9">tar文件</a></td><td valign="top"><a href="#SEC5">1.4如何<code>tar</code>档案命名</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX383">tar到远程设备</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX381">tar到标准输入和输出</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX590"><code>tar-snapshot-edit</code></a></td><td valign="top"><a href="#SEC186">D.修复快照文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC167"><code>tarcat</code></a></td><td valign="top"><a href="#SEC167">9.6.3将卷串联到单个存档中</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX498"><code>this in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC124">时间项目</a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX257"><samp>`time stamp %s is %s s in the future'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX481">时区校正</a></td><td valign="top"><a href="#SEC124">7.3时间项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX468">时区项目</a></td><td valign="top"><a href="#SEC122">7.1通用日期语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC125">时区项目</a></td><td valign="top"><a href="#SEC125">7.4时区项目</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX255"><code>timestamp</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX497"><code>today in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX494"><code>tomorrow in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX222"><code>totals</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX220"><code>ttyout</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC131"><code>TZ</code></a></td><td valign="top"><a href="#SEC131">7.10指定时区规则</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_20">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX556">Ultrix 3.1和写入失败</a></td><td valign="top"><a href="#SEC156">9.2远程磁带服务器</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX263"><samp>`Unknown file type '%c', extracted as normal file'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX240"><samp>`Unknown file type; file ignored'</samp> ， 警告信息</a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX262"><code>unknown-cast</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX266"><code>unknown-keyword</code></a></td><td valign="top"><a href="#SEC52">适用于的关键字<code>tar --extract</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX8">开箱</a></td><td valign="top"><a href="#SEC3">1.2一些定义</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC63">更新档案</a></td><td valign="top"><a href="#SEC63">4.2.3更新档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX588"><code>usage-indent</code></a></td><td valign="top"><a href="#SEC185">C.配置帮助摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX526">使用加密档案</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC144">ustar存档格式</a></td><td valign="top"><a href="#SEC144">8.3.5 Ustar存档格式</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_21">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC143">v7存档格式</a></td><td valign="top"><a href="#SEC143">8.3.4旧的V7档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX411">VCS，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX397">VCS，从忽略文件中排除模式</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX398">VCS，忽略文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX207">详细操作</a></td><td valign="top"><a href="#SEC47">3.7检查<code>tar</code>进展</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC169">验证写操作</a></td><td valign="top"><a href="#SEC169">9.8验证存储的数据</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC67">验证档案的货币</a></td><td valign="top"><a href="#SEC67">4.2.6将存档成员与文件系统进行比较</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX410">版本控制系统，不包括文件</a></td><td valign="top"><a href="#SEC110">6.4排除某些文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC45">版本<code>tar</code>程序</a></td><td valign="top"><a href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX330"><code>version-control Emacs variable</code></a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX328"><code>VERSION_CONTROL</code></a></td><td valign="top"><a href="#SEC92">4.5备份选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX569">伏尔诺文件</a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX362"><code>VOLNO_FILE</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX575">卷标，清单</a></td><td valign="top"><a href="#SEC168">9.7在档案中包含标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX568">卷号文件</a></td><td valign="top"><a href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_22">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX224"><code>wait</code> ，检查点操作</a></td><td valign="top"><a href="#SEC48">3.8检查点</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX488"><code>week in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC106">档案在哪里？</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX457">工作目录，指定</a></td><td valign="top"><a href="#SEC119">6.10.1更改工作目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#SEC86">将提取的文件写入标准输出</a></td><td valign="top"><a href="#SEC86">写入标准输出</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX378">撰写新档案</a></td><td valign="top"><a href="#SEC106">6.1选择和命名存档文件</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_23">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX237"><code>xdev</code></a></td><td valign="top"><a href="#SEC51">适用于的关键字<code>tar --create</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX276"><code>xdev</code></a></td><td valign="top"><a href="#SEC53">控制增量提取的关键字：</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX363"><code>XLIST</code></a></td><td valign="top"><a href="#SEC99">5.4.1通用变量</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX545"><code>xsparse</code></a></td><td valign="top"><a href="#SEC152">8.3.10.2提取稀疏成员</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_24">ÿ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#IDX485"><code>year in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td></td><td valign="top"><a href="#IDX495"><code>yesterday in date strings</code></a></td><td valign="top"><a href="#SEC128">7.7日期字符串中的相对项</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="SEC204_25">ž</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#SEC135">标准</a></td><td valign="top"><a href="#SEC135">8.1.1创建和读取压缩档案</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a href="#SEC204_0" class="summary-letter"><b>％</b></a> <a href="#SEC204_1" class="summary-letter"><b>-</b></a> <a href="#SEC204_2" class="summary-letter"><b>。</b></a>
   
<br>
<a href="#SEC204_3" class="summary-letter"><b>A</b></a> <a href="#SEC204_4" class="summary-letter"><b>B</b></a> <a href="#SEC204_5" class="summary-letter"><b>C</b></a> <a href="#SEC204_6" class="summary-letter"><b>D</b></a> <a href="#SEC204_7" class="summary-letter"><b>E</b></a> <a href="#SEC204_8" class="summary-letter"><b>F</b></a> <a href="#SEC204_9" class="summary-letter"><b>G</b></a> <a href="#SEC204_10" class="summary-letter"><b>H</b></a> <a href="#SEC204_11" class="summary-letter"><b>I</b></a> <a href="#SEC204_12" class="summary-letter"><b>L</b></a> <a href="#SEC204_13" class="summary-letter"><b>M</b></a> <a href="#SEC204_14" class="summary-letter"><b>N</b></a> <a href="#SEC204_15" class="summary-letter"><b>O</b></a> <a href="#SEC204_16" class="summary-letter"><b>P</b></a> <a href="#SEC204_17" class="summary-letter"><b>R</b></a> <a href="#SEC204_18" class="summary-letter"><b>S</b></a> <a href="#SEC204_19" class="summary-letter"><b>T</b></a> <a href="#SEC204_20" class="summary-letter"><b>U</b></a> <a href="#SEC204_21" class="summary-letter"><b>V</b></a> <a href="#SEC204_22" class="summary-letter"><b>W</b></a> <a href="#SEC204_23" class="summary-letter"><b>X</b></a> <a href="#SEC204_24" class="summary-letter"><b>Y</b></a> <a href="#SEC204_25" class="summary-letter"><b>Z</b></a>
   
</td></tr></tbody></table>


<hr size="6">
<a name="SEC_Foot"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1>脚注</h1>
<h3><a name="FOOT1" href="#DOCF1">（1）</a></h3>
<p>这只是偶然的事实，但总的来说不是。尽管修改时间总是可以恢复的，但在大多数情况下，必须是root用户才能恢复所有者，并使用特殊选项来恢复权限。在这里，恰好发生了还原用户也是存档成员的所有者，而当前用户<code>umask</code>与原始权限兼容。
</p><h3><a name="FOOT2" href="#DOCF2">（2）</a></h3>
<p>例如， <samp>`--file'</samp> （ <samp>`-f'</samp> ）将存档文件的名称作为参数。如果您未提供存档文件名， <code>tar</code>将使用默认值，但这会造成混淆；因此，我们建议您始终提供一个特定的存档文件名。
</p><h3><a name="FOOT3" href="#DOCF3">（3）</a></h3>
<p>聚类很多选项（最后一个带有参数）是一种写选项的相当不透明的方法。有些人怀疑<acronym>GNU</acronym> <code>getopt</code>甚至不应被认为足以使此类用法无效。
</p><h3><a name="FOOT4" href="#DOCF4">（4）</a></h3>
<p>在<acronym>GNU</acronym>之前<code>tar</code>在1.11.6版中，有一个错误阻止在某些情况下将旧样式选项与长选项混合在一起。
</p><h3><a name="FOOT5" href="#DOCF5">（5）</a></h3>
<p><acronym>GNU的</acronym>早期版本<code>tar</code>明白的<samp>`-l'</samp>作为...的同义词<samp>`--one-file-system'</samp> 。在版本1.15.91中引入了符合UNIX98的当前语义。有关更多信息，请参见“ <a href="#SEC181">更改”</a>部分。
</p><h3><a name="FOOT6" href="#DOCF6">（6）</a></h3>
<p>的<samp>`--recursion'</samp>选项是默认选项，此处为了清楚起见使用。相同的示例可以写成：</p>
<table><tbody><tr><td> </td><td><pre class="example">tar -cf a.tar /usr --no-recursion /var/*
</pre></td></tr></tbody></table><h3><a name="FOOT7" href="#DOCF7">（7）</a></h3>
<p>有计划合并<code>cpio</code>和<code>tar</code>包装成一个单一的将被称为<code>paxutils</code> 。因此，谁知道在这一天中， <samp>`--version'</samp>不会输出<samp>`tar (<acronym>GNU</acronym> paxutils) 3.2'</samp> 。
</p><h3><a name="FOOT8" href="#DOCF8">（8）</a></h3>
<p>这实际上是<samp>`--checkpoint=<var>n</var> --checkpoint-action=dot'</samp> 。见<a href="#SEC48">点</a> 。
</p><h3><a name="FOOT9" href="#DOCF9">（9）</a></h3>
<p>这在Simson Garfinkel，Daniel Weise和Steven Strassmann的IDG图书，ISBN 1-56884-203-1的<cite>Unix-haters手册中</cite>有很好的描述。
</p><h3><a name="FOOT10" href="#DOCF10">（10）</a></h3>
<p>除非你给<samp>`--keep-old-files'</samp> （要么<samp>`--skip-old-files'</samp> ）选项，或者磁盘副本比存档中的磁盘副本新，您可以调用<code>tar</code>与<samp>`--keep-newer-files'</samp>选项。
</p><h3><a name="FOOT11" href="#DOCF11">（11）</a></h3>
<p>这可能导致多个成员具有相同的名称。有关这如何影响阅读存档的信息，请参阅<a href="#SEC62">具有相同名称的多个成员</a> 。
</p><h3><a name="FOOT12" href="#DOCF12">（12）</a></h3>
<p>注意，由于两个存档都是在没有<samp>`-P'</samp>选项（请参阅“ <a href="#SEC120">绝对文件名”</a>部分），这些命令应从根文件系统运行。
</p><h3><a name="FOOT13" href="#DOCF13">（13）</a></h3>
<p>二<samp>`--verbose'</samp>选择了选项以避免破坏通常的详细列表输出（ <samp>`--list --verbose'</samp> ）在脚本中使用时。
</p>
<a name="IDX347"></a>
<a name="IDX348"></a>
<a name="IDX349"></a>
<a name="IDX350"></a>
<p><acronym>GNU</acronym>版本<code>tar</code>高达1.15.1时用于转储DUMPDIR标头的逐字二进制内容（带有终止null） <samp>`--incremental'</samp>要么<samp>`--listed-incremental'</samp>无论详细程度如何，都给出了选项。这种行为，尤其是它产生的二进制输出被认为是不方便的，并在1.16版中进行了更改。
</p><h3><a name="FOOT14" href="#DOCF14">（14）</a></h3>
<p>为了向后兼容， <code>backup</code>还将尝试从脚本本身的名称推断出所需的转储级别。如果名称由字符串组成<samp>`level-'</samp>后面跟一个十进制数字，该数字用作转储级别号。因此，您可以从创建链接<code>backup</code>至<code>level-1</code>然后运行<code>level-1</code>每当您需要创建一级转储时。
</p><h3><a name="FOOT15" href="#DOCF15">（15）</a></h3>
<p><acronym>GNU</acronym>版本<code>tar</code>最多仅认可1.15.1 <samp>`-C'</samp>文件列表中的option选项，并且仅当option及其参数占据连续两行时。
</p><h3><a name="FOOT16" href="#DOCF16">（16）</a></h3>
<p>根据Bazaar的文档，globbing-patterns是Korn-shell样式，正则表达式是perl样式。截至<acronym>GNU</acronym> <code>tar</code>在1.32版中，这些被视为shell样式的glob和posix扩展的正则表达式。这将在将来的版本中修复。
</p><h3><a name="FOOT17" href="#DOCF17">（17）</a></h3>
<p>对perl样式的正则表达式的支持将在以后的版本中出现。
</p><h3><a name="FOOT18" href="#DOCF18">（18）</a></h3>
<p>注意，早期的<acronym>GNU</acronym> <code>tar</code>这些版本使用通配符作为包含成员，这与UNIX98规范相抵触，没有记录在案。有关此更改和其他更改的更多信息，请参见“ <a href="#SEC181">更改”</a>部分。
</p><h3><a name="FOOT19" href="#DOCF19">（19）</a></h3>
<p>这样做的副作用是<samp>`--create'</samp>用于<samp>`--verbose'</samp>通常，结果输出与您将要运行的输出不同<kbd>tar --list</kbd>命令。如果您使用一些脚本来比较两个输出，则这可能很重要。请参阅<a href="#listing-member-and-file-names">列出成员和文件名</a> ，以获取有关如何处理这种情况的信息。
</p><h3><a name="FOOT20" href="#DOCF20">（20）</a></h3>
<p>过去也有专利问题。
</p><h3><a name="FOOT21" href="#DOCF21">（21）</a></h3>
<p>要详细跟踪解压缩器的选择，请使用<samp>`--warning=decompress-program'</samp>选项（请参见<a href="#SEC49">decompress-program</a>部分）。
</p><h3><a name="FOOT22" href="#DOCF22">（22）</a></h3>
<p>有计划在将来的版本中修复此问题。
</p><h3><a name="FOOT23" href="#DOCF23">（23）</a></h3>
<p>请参阅“ <a href="#SEC193">PAX格式，版本1.0”部分</a> 。
</p><h3><a name="FOOT24" href="#DOCF24">（24）</a></h3>
<p>从技术上讲， <var>n</var>是的<em>进程<acronym>ID</acronym></em> <code>tar</code>创建归档文件的过程（请参阅<a href="#SEC147">控制扩展头关键字部分</a> ）。
</p><h3><a name="FOOT25" href="#DOCF25">（25）</a></h3>
<p>如果不需要此消息，则可以使用<samp>`--warning=no-record-size'</samp>选项。
</p><h3><a name="FOOT26" href="#DOCF26">（26）</a></h3>
<p>如果您运行<acronym>GNU</acronym> <code>tar</code>在不同的语言环境下，将使用对语言环境的翻译。
</p><h3><a name="FOOT27" href="#DOCF27">（27）</a></h3>
<p>有关此选项的更多信息，请参见<a href="#g_t_002d_002drestrict">-restrict</a> 。
</p><h3><a name="FOOT28" href="#DOCF28">（28）</a></h3>
<p>在版本1.10之前，该选项被称为<samp>`--volume'</samp> ，但该名称不再可用。
</p><h3><a name="FOOT29" href="#DOCF29">（29）</a></h3>
<p>注意， <acronym>GNU</acronym> <code>tar</code>高达1.23的版本指示与退出代码2不匹配，并在stderr上打印了伪造的诊断信息。
</p><h3><a name="FOOT30" href="#DOCF30">（30）</a></h3>
<p>的先前版本<code>tar</code>使用完全正则表达式匹配，或者在此之前仅使用完全匹配的字符串，而不使用通配符匹配器。为了简单起见，我们决定通过以下方式使用统一的匹配设备： <code>tar</code> 。
</p><h3><a name="FOOT31" href="#DOCF31">（31）</a></h3>
<p>该脚本的原始版本可以在<a href="http://lists.gnu.org/archive/html/bug-tar/2016-11/msg00024.html">http://lists.gnu.org/archive/html/bug-tar/2016-11/msg00024.html中找到</a>
</p><hr size="1">
<a name="SEC_Contents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1>目录</h1>
<div class="contents">

<ul class="toc">
  <li><a name="TOC1" href="#SEC1">1。介绍</a>
  <ul class="toc">
    <li><a name="TOC2" href="#SEC2">1.1本书包含的内容</a></li>
    <li><a name="TOC3" href="#SEC3">1.2一些定义</a></li>
    <li><a name="TOC4" href="#SEC4">1.3什么<code>tar</code>是否</a></li>
    <li><a name="TOC5" href="#SEC5">1.4如何<code>tar</code>档案命名</a></li>
    <li><a name="TOC6" href="#SEC6">1.5 <acronym>GNU</acronym> <code>tar</code> s</a></li>
    <li><a name="TOC7" href="#SEC7">1.6报告错误或建议</a></li>
  </ul></li>
  <li><a name="TOC8" href="#SEC8">2。教程简介<code>tar</code></a>
  <ul class="toc">
    <li><a name="TOC9" href="#SEC9">2.1本教程所做的假设</a></li>
    <li><a name="TOC10" href="#SEC10">2.2文体惯例</a></li>
    <li><a name="TOC11" href="#SEC11">2.3基础<code>tar</code>操作和选项</a></li>
    <li><a name="TOC12" href="#SEC12">2.4三种最常用的操作</a></li>
    <li><a name="TOC13" href="#SEC13">2.5两个常用选项</a>
    <ul class="toc">
      <li><a name="TOC14" href="#SEC14">的<samp>`--file'</samp>选项</a></li>
      <li><a name="TOC15" href="#SEC15">的<samp>`--verbose'</samp>选项</a></li>
      <li><a name="TOC16" href="#SEC16">获取帮助：使用<samp>`--help'</samp>选项</a></li>
    </ul></li>
    <li><a name="TOC17" href="#SEC17">2.6如何创建档案</a>
    <ul class="toc">
      <li><a name="TOC18" href="#SEC18">2.6.1为示例准备练习目录</a></li>
      <li><a name="TOC19" href="#SEC19">2.6.2创建档案</a></li>
      <li><a name="TOC20" href="#SEC20">2.6.3运行<samp>`--create'</samp>与<samp>`--verbose'</samp></a></li>
      <li><a name="TOC21" href="#SEC21">2.6.4简短格式<samp>`create'</samp></a></li>
      <li><a name="TOC22" href="#SEC22">2.6.5归档目录</a></li>
    </ul></li>
    <li><a name="TOC23" href="#SEC23">2.7如何列出档案</a>
    <ul class="toc">
      <li><a name="TOC24" href="#SEC24">列出存储目录的内容</a></li>
    </ul></li>
    <li><a name="TOC25" href="#SEC25">2.8如何从存档中提取成员</a>
    <ul class="toc">
      <li><a name="TOC26" href="#SEC26">2.8.1提取整个档案</a></li>
      <li><a name="TOC27" href="#SEC27">2.8.2提取特定文件</a></li>
      <li><a name="TOC28" href="#SEC28">2.8.3提取目录文件</a></li>
      <li><a name="TOC29" href="#SEC29">2.8.4从不受信任的来源中提取档案</a></li>
      <li><a name="TOC30" href="#SEC30">2.8.5将失败的命令</a></li>
    </ul></li>
    <li><a name="TOC31" href="#SEC31">2.9在本手册中走得更远</a></li>
  </ul></li>
  <li><a name="TOC32" href="#SEC32">3。调用<acronym>GNU</acronym> <code>tar</code></a>
  <ul class="toc">
    <li><a name="TOC33" href="#SEC33">3.1概述<code>tar</code></a></li>
    <li><a name="TOC34" href="#SEC34">3.2使用<code>tar</code>选件</a></li>
    <li><a name="TOC35" href="#SEC35">3.3三种选择样式</a>
    <ul class="toc">
      <li><a name="TOC36" href="#SEC36">3.3.1长期权样式</a></li>
      <li><a name="TOC37" href="#SEC37">3.3.2短期权样式</a></li>
      <li><a name="TOC38" href="#SEC38">3.3.3旧选项样式</a></li>
      <li><a name="TOC39" href="#SEC39">3.3.4混合选项样式</a></li>
    </ul></li>
    <li><a name="TOC40" href="#SEC40">3.4全部<code>tar</code>选件</a>
    <ul class="toc">
      <li><a name="TOC41" href="#SEC41">3.4.1操作</a></li>
      <li><a name="TOC42" href="#SEC42">3.4.2 <code>tar</code>选件</a></li>
      <li><a name="TOC43" href="#SEC43">3.4.3短期期权交叉参考</a></li>
      <li><a name="TOC44" href="#SEC44">3.4.4位置敏感选项</a></li>
    </ul></li>
    <li><a name="TOC45" href="#SEC45">3.5 <acronym>GNU</acronym> <code>tar</code>文件资料</a></li>
    <li><a name="TOC46" href="#SEC46">3.6获取<acronym>GNU</acronym> <code>tar</code>默认值</a></li>
    <li><a name="TOC47" href="#SEC47">3.7检查<code>tar</code>进展</a></li>
    <li><a name="TOC48" href="#SEC48">3.8检查点</a></li>
    <li><a name="TOC49" href="#SEC49">3.9控制警告消息</a></li>
    <li><a name="TOC50" href="#SEC54">3.10作业期间要求确认</a></li>
    <li><a name="TOC51" href="#SEC55">3.11运行外部命令</a></li>
  </ul></li>
  <li><a name="TOC52" href="#SEC56">4。<acronym>GNU</acronym> <code>tar</code>运作方式</a>
  <ul class="toc">
    <li><a name="TOC53" href="#SEC57">4.1基本的<acronym>GNU</acronym> <code>tar</code>运作方式</a></li>
    <li><a name="TOC54" href="#SEC58">4.2高级<acronym>GNU</acronym> <code>tar</code>运作方式</a>
    <ul class="toc">
      <li><a name="TOC55" href="#SEC59">4.2.1五大进阶<code>tar</code>运作方式</a></li>
      <li><a name="TOC56" href="#SEC60">4.2.2如何将文件添加到现有档案中： <samp>`--append'</samp></a>
      <ul class="toc">
        <li><a name="TOC57" href="#SEC61">4.2.2.1将文件追加到存档</a></li>
        <li><a name="TOC58" href="#SEC62">4.2.2.2具有相同名称的多个成员</a></li>
      </ul></li>
      <li><a name="TOC59" href="#SEC63">4.2.3更新档案</a>
      <ul class="toc">
        <li><a name="TOC60" href="#SEC64">4.2.3.1如何使用更新档案<samp>`--update'</samp></a></li>
      </ul></li>
      <li><a name="TOC61" href="#SEC65">4.2.4将档案与<samp>`--concatenate'</samp></a></li>
      <li><a name="TOC62" href="#SEC66">4.2.5使用以下方式删除存档成员<samp>`--delete'</samp></a></li>
      <li><a name="TOC63" href="#SEC67">4.2.6将存档成员与文件系统进行比较</a></li>
    </ul></li>
    <li><a name="TOC64" href="#SEC68">4.3所使用的选项<samp>`--create'</samp></a>
    <ul class="toc">
      <li><a name="TOC65" href="#SEC69">4.3.1覆盖文件元数据</a></li>
      <li><a name="TOC66" href="#SEC70">4.3.2扩展文件属性</a></li>
      <li><a name="TOC67" href="#SEC71">4.3.3忽略读取失败</a></li>
    </ul></li>
    <li><a name="TOC68" href="#SEC72">4.4使用的选项<samp>`--extract'</samp></a>
    <ul class="toc">
      <li><a name="TOC69" href="#SEC73">4.4.1帮助阅读档案的选项</a>
      <ul class="toc">
        <li><a name="TOC70" href="#SEC74">阅读完整记录</a></li>
        <li><a name="TOC71" href="#SEC75">忽略零块</a></li>
      </ul></li>
      <li><a name="TOC72" href="#SEC76">4.4.2更改方式<code>tar</code>写文件</a>
      <ul class="toc">
        <li><a name="TOC73" href="#SEC77">控制覆盖现有文件的选项</a></li>
        <li><a name="TOC74" href="#SEC78">覆盖旧文件</a></li>
        <li><a name="TOC75" href="#SEC79">保留旧文件</a></li>
        <li><a name="TOC76" href="#SEC80">保留较新的文件</a></li>
        <li><a name="TOC77" href="#SEC81">首先取消链接</a></li>
        <li><a name="TOC78" href="#SEC82">递归取消链接</a></li>
        <li><a name="TOC79" href="#SEC83">设置数据修改时间</a></li>
        <li><a name="TOC80" href="#SEC84">设置访问权限</a></li>
        <li><a name="TOC81" href="#SEC85">目录修改时间和权限</a></li>
        <li><a name="TOC82" href="#SEC86">写入标准输出</a></li>
        <li><a name="TOC83" href="#SEC87">写入外部程序</a></li>
        <li><a name="TOC84" href="#SEC88">删除文件</a></li>
      </ul></li>
      <li><a name="TOC85" href="#SEC89">4.4.3应对稀缺资源</a>
      <ul class="toc">
        <li><a name="TOC86" href="#SEC90">起始文件</a></li>
        <li><a name="TOC87" href="#SEC91">相同顺序</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="TOC88" href="#SEC92">4.5备份选项</a></li>
    <li><a name="TOC89" href="#SEC93">4.6展望未来：本手册的其余部分</a></li>
  </ul></li>
  <li><a name="TOC90" href="#SEC94">5，执行备份和还原文件</a>
  <ul class="toc">
    <li><a name="TOC91" href="#SEC95">5.1使用<code>tar</code>执行完整转储</a></li>
    <li><a name="TOC92" href="#SEC96">5.2使用<code>tar</code>执行增量转储</a></li>
    <li><a name="TOC93" href="#SEC97">5.3备份级别</a></li>
    <li><a name="TOC94" href="#SEC98">5.4设置备份和还原参数</a>
    <ul class="toc">
      <li><a name="TOC95" href="#SEC99">5.4.1通用变量</a></li>
      <li><a name="TOC96" href="#SEC100">5.4.2磁带控制</a></li>
      <li><a name="TOC97" href="#SEC101">5.4.3用户挂钩</a></li>
      <li><a name="TOC98" href="#SEC102">5.4.4 <tt>“备份规范”</tt>的示例文本</a></li>
    </ul></li>
    <li><a name="TOC99" href="#SEC103">5.5使用备份脚本</a></li>
    <li><a name="TOC100" href="#SEC104">5.6使用还原脚本</a></li>
  </ul></li>
  <li><a name="TOC101" href="#SEC105">6。选择文件和名称<code>tar</code></a>
  <ul class="toc">
    <li><a name="TOC102" href="#SEC106">6.1选择和命名存档文件</a></li>
    <li><a name="TOC103" href="#SEC107">6.2选择存档成员</a></li>
    <li><a name="TOC104" href="#SEC108">6.3从文件读取名称</a>
    <ul class="toc">
      <li><a name="TOC105" href="#SEC109">6.3.1 <code>NUL</code>终止的文件名</a></li>
    </ul></li>
    <li><a name="TOC106" href="#SEC110">6.4排除某些文件</a>
    <ul class="toc">
      <li><a name="TOC107" href="#SEC111">使用问题<code>exclude</code>选件</a></li>
    </ul></li>
    <li><a name="TOC108" href="#SEC112">6.5通配符模式和匹配</a>
    <ul class="toc">
      <li><a name="TOC109" href="#SEC113">控制模式匹配</a></li>
    </ul></li>
    <li><a name="TOC110" href="#SEC114">6.6引用会员名称</a></li>
    <li><a name="TOC111" href="#SEC115">6.7修改文件和成员名称</a></li>
    <li><a name="TOC112" href="#SEC116">6.8仅在新文件上操作</a></li>
    <li><a name="TOC113" href="#SEC117">6.9下降到目录</a></li>
    <li><a name="TOC114" href="#SEC118">6.10跨越文件系统边界</a>
    <ul class="toc">
      <li><a name="TOC115" href="#SEC119">6.10.1更改工作目录</a></li>
      <li><a name="TOC116" href="#SEC120">6.10.2绝对文件名</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="TOC117" href="#SEC121">7。日期输入格式</a>
  <ul class="toc">
    <li><a name="TOC118" href="#SEC122">7.1通用日期语法</a></li>
    <li><a name="TOC119" href="#SEC123">7.2日历日期项目</a></li>
    <li><a name="TOC120" href="#SEC124">7.3时间项目</a></li>
    <li><a name="TOC121" href="#SEC125">7.4时区项目</a></li>
    <li><a name="TOC122" href="#SEC126">7.5合并的日期和时间项</a></li>
    <li><a name="TOC123" href="#SEC127">7.6星期几项目</a></li>
    <li><a name="TOC124" href="#SEC128">7.7日期字符串中的相对项</a></li>
    <li><a name="TOC125" href="#SEC129">7.8日期字符串中的纯数字</a></li>
    <li><a name="TOC126" href="#SEC130">自大纪元7.9秒</a></li>
    <li><a name="TOC127" href="#SEC131">7.10指定时区规则</a></li>
    <li><a name="TOC128" href="#SEC132">7.11的作者<code>parse_datetime</code></a></li>
  </ul></li>
  <li><a name="TOC129" href="#SEC133">8。控制存档格式</a>
  <ul class="toc">
    <li><a name="TOC130" href="#SEC134">8.1通过压缩使用更少的空间</a>
    <ul class="toc">
      <li><a name="TOC131" href="#SEC135">8.1.1创建和读取压缩档案</a>
      <ul class="toc">
        <li><a name="TOC132" href="#SEC136">8.1.1.1将lbzip2与<acronym>GNU</acronym>一起使用<code>tar</code> 。</a></li>
      </ul></li>
      <li><a name="TOC133" href="#SEC137">8.1.2存档稀疏文件</a></li>
    </ul></li>
    <li><a name="TOC134" href="#SEC138">8.2处理文件属性</a></li>
    <li><a name="TOC135" href="#SEC139">8.3制作<code>tar</code>档案更便携</a>
    <ul class="toc">
      <li><a name="TOC136" href="#SEC140">8.3.1可移植名称</a></li>
      <li><a name="TOC137" href="#SEC141">8.3.2符号链接</a></li>
      <li><a name="TOC138" href="#SEC142">8.3.3硬链接</a></li>
      <li><a name="TOC139" href="#SEC143">8.3.4旧的V7档案</a></li>
      <li><a name="TOC140" href="#SEC144">8.3.5 Ustar存档格式</a></li>
      <li><a name="TOC141" href="#SEC145">8.3.6 <acronym>GNU</acronym>和旧的<acronym>GNU</acronym> <code>tar</code>格式</a></li>
      <li><a name="TOC142" href="#SEC146">8.3.7 <acronym>GNU</acronym> <code>tar</code>和<acronym>POSIX</acronym> <code>tar</code></a>
      <ul class="toc">
        <li><a name="TOC143" href="#SEC147">8.3.7.1控制扩展头关键字</a></li>
      </ul></li>
      <li><a name="TOC144" href="#SEC148">8.3.8校验和问题</a></li>
      <li><a name="TOC145" href="#SEC149">8.3.9大或负值</a></li>
      <li><a name="TOC146" href="#SEC150">8.3.10如何使用其他方法提取GNU特定数据<code>tar</code>实作</a>
      <ul class="toc">
        <li><a name="TOC147" href="#SEC151">8.3.10.1提取在卷之间划分的成员</a></li>
        <li><a name="TOC148" href="#SEC152">8.3.10.2提取稀疏成员</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="TOC149" href="#SEC153">8.4比较<code>tar</code>和<code>cpio</code></a></li>
  </ul></li>
  <li><a name="TOC150" href="#SEC154">9。磁带和其他存档媒体</a>
  <ul class="toc">
    <li><a name="TOC151" href="#SEC155">9.1设备选择和切换</a></li>
    <li><a name="TOC152" href="#SEC156">9.2远程磁带服务器</a></li>
    <li><a name="TOC153" href="#SEC157">9.3一些常见问题及其解决方案</a></li>
    <li><a name="TOC154" href="#SEC158">9.4封锁</a>
    <ul class="toc">
      <li><a name="TOC155" href="#SEC159">9.4.1格式差异</a></li>
      <li><a name="TOC156" href="#SEC160">9.4.2存档的阻塞因素</a></li>
    </ul></li>
    <li><a name="TOC157" href="#SEC161">9.5一卷磁带上有许多档案</a>
    <ul class="toc">
      <li><a name="TOC158" href="#SEC162">9.5.1胶带位置和胶带标记</a></li>
      <li><a name="TOC159" href="#SEC163">9.5.2 <code>mt</code>效用</a></li>
    </ul></li>
    <li><a name="TOC160" href="#SEC164">9.6使用多个磁带</a>
    <ul class="toc">
      <li><a name="TOC161" href="#SEC165">9.6.1存档长于一个磁带或磁盘</a></li>
      <li><a name="TOC162" href="#SEC166">9.6.2磁带文件</a></li>
      <li><a name="TOC163" href="#SEC167">9.6.3将卷串联到单个存档中</a></li>
    </ul></li>
    <li><a name="TOC164" href="#SEC168">9.7在档案中包含标签</a></li>
    <li><a name="TOC165" href="#SEC169">9.8验证存储的数据</a></li>
    <li><a name="TOC166" href="#SEC170">9.9写保护</a></li>
  </ul></li>
  <li><a name="TOC167" href="#SEC171">10。可靠性与安全性</a>
  <ul class="toc">
    <li><a name="TOC168" href="#SEC172">10.1可靠性</a>
    <ul class="toc">
      <li><a name="TOC169" href="#SEC173">10.1.1权限问题</a></li>
      <li><a name="TOC170" href="#SEC174">10.1.2数据损坏和修复</a></li>
      <li><a name="TOC171" href="#SEC175">10.1.3比赛条件</a></li>
    </ul></li>
    <li><a name="TOC172" href="#SEC176">10.2安全</a>
    <ul class="toc">
      <li><a name="TOC173" href="#SEC177">10.2.1隐私</a></li>
      <li><a name="TOC174" href="#SEC178">10.2.2完整性</a></li>
      <li><a name="TOC175" href="#SEC179">10.2.3处理实时不可信数据</a></li>
      <li><a name="TOC176" href="#SEC180">10.2.4经验法则</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="TOC177" href="#SEC181">A.变化</a></li>
  <li><a name="TOC178" href="#SEC182">食谱</a>
  <ul class="toc">
    <li><a name="TOC179" href="#SEC183">B.1复制目录层次结构</a></li>
    <li><a name="TOC180" href="#SEC184">B.2恢复中间目录</a></li>
  </ul></li>
  <li><a name="TOC181" href="#SEC185">C.配置帮助摘要</a></li>
  <li><a name="TOC182" href="#SEC186">D.修复快照文件</a></li>
  <li><a name="TOC183" href="#SEC187">E. Tar内部</a>
  <ul class="toc">
    <li><a name="TOC184" href="#SEC188">基本的Tar格式</a></li>
    <li><a name="TOC185" href="#SEC189"><acronym>GNU</acronym>对存档格式的扩展</a></li>
    <li><a name="TOC186" href="#SEC190">存储稀疏文件</a>
    <ul class="toc">
      <li><a name="TOC187" href="#SEC191">E.0.1旧的GNU格式</a></li>
      <li><a name="TOC188" href="#SEC192">E.0.2 PAX格式，版本0.0和0.1</a></li>
      <li><a name="TOC189" href="#SEC193">E.0.3 PAX格式，版本1.0</a></li>
    </ul></li>
    <li><a name="TOC190" href="#SEC194">增量快照文件的格式</a></li>
    <li><a name="TOC191" href="#SEC195">转储目录</a></li>
  </ul></li>
  <li><a name="TOC192" href="#SEC196">F.Genfile</a>
  <ul class="toc">
    <li><a name="TOC193" href="#SEC197">F.1生成模式</a></li>
    <li><a name="TOC194" href="#SEC198">F.2状态模式</a></li>
    <li><a name="TOC195" href="#SEC199">F.3执行模式</a></li>
  </ul></li>
  <li><a name="TOC196" href="#SEC200">G.自由软件需要自由文档</a></li>
  <li><a name="TOC197" href="#SEC201">H. GNU免费文档许可证</a></li>
  <li><a name="TOC198" href="#SEC203">一，命令行选项索引</a></li>
  <li><a name="TOC199" href="#SEC204">J.索引</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1>简短目录</h1>
<div class="shortcontents">
<ul class="toc">
<li><a name="TOC1" href="#SEC1">1。介绍</a></li>
<li><a name="TOC8" href="#SEC8">2。教程简介<code>tar</code></a></li>
<li><a name="TOC32" href="#SEC32">3。调用<acronym>GNU</acronym> <code>tar</code></a></li>
<li><a name="TOC52" href="#SEC56">4。<acronym>GNU</acronym> <code>tar</code>运作方式</a></li>
<li><a name="TOC90" href="#SEC94">5，执行备份和还原文件</a></li>
<li><a name="TOC101" href="#SEC105">6。选择文件和名称<code>tar</code></a></li>
<li><a name="TOC117" href="#SEC121">7。日期输入格式</a></li>
<li><a name="TOC129" href="#SEC133">8。控制存档格式</a></li>
<li><a name="TOC150" href="#SEC154">9。磁带和其他存档媒体</a></li>
<li><a name="TOC167" href="#SEC171">10。可靠性与安全性</a></li>
<li><a name="TOC177" href="#SEC181">A.变化</a></li>
<li><a name="TOC178" href="#SEC182">食谱</a></li>
<li><a name="TOC181" href="#SEC185">C.配置帮助摘要</a></li>
<li><a name="TOC182" href="#SEC186">D.修复快照文件</a></li>
<li><a name="TOC183" href="#SEC187">E. Tar内部</a></li>
<li><a name="TOC192" href="#SEC196">F.Genfile</a></li>
<li><a name="TOC196" href="#SEC200">G.自由软件需要自由文档</a></li>
<li><a name="TOC197" href="#SEC201">H. GNU免费文档许可证</a></li>
<li><a name="TOC198" href="#SEC203">一，命令行选项索引</a></li>
<li><a name="TOC199" href="#SEC204">J.索引</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tbody><tr><td valign="middle" align="left">[ <a href="#SEC_Top" title="文件封面（顶部）">顶部</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_Contents" title="目录">目录</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC203" title="指数">索引</a> ]</td>
<td valign="middle" align="left">[ <a href="#SEC_About" title="关于（帮助）">？</a>]</td>
</tr></tbody></table>
<h1>关于本文件</h1>
<p>本文档于<i>2019</i>年<i>2月23日</i>使用<a href="http://texi2html.cvshome.org/"><i>texi2html 1.76生成</i></a> 。
</p>
<p>导航面板中的按钮具有以下含义：</p>
<table border="1">
  <tbody><tr>
    <th>纽扣</th>
    <th>名称</th>
    <th>去</th>
    <th>从1.2.3转到</th>
  </tr>
  <tr>
    <td align="center">[<]</td>
    <td align="center">背部</td>
    <td>上一节阅读顺序</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center">[>]</td>
    <td align="center">向前</td>
    <td>阅读顺序的下一部分</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center">[<<]</td>
    <td align="center">快退</td>
    <td>本章或上一章的开头</td>
    <td>1个</td>
  </tr>
  <tr>
    <td align="center">[向上]</td>
    <td align="center">上</td>
    <td>上节</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center">[>>]</td>
    <td align="center">快进</td>
    <td>下一章</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center">[最佳]</td>
    <td align="center">最佳</td>
    <td>文件封面（顶部）</td>
    <td>   </td>
  </tr>
  <tr>
    <td align="center">[内容]</td>
    <td align="center">内容</td>
    <td>目录</td>
    <td>   </td>
  </tr>
  <tr>
    <td align="center">[指数]</td>
    <td align="center">指数</td>
    <td>指数</td>
    <td>   </td>
  </tr>
  <tr>
    <td align="center">[？]</td>
    <td align="center">关于</td>
    <td>关于（帮助）</td>
    <td>   </td>
  </tr>
</tbody></table>

<p>其中<strong>示例</strong>假定当前位置在以下结构的文档的第<strong>1-2-3小节中</strong> ：</p>

<ul>
  <li>1。第一节<ul>
      <li>1.1一对一<ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2第一至第二小节<ul>
          <li>1.2.1小节一二一一</li>
          <li>1.2.2小节一二二</li>
          <li>1.2.3子项1-3 <strong><==当前位置</strong></li>
          <li>1.2.4小节一二四</li>
        </ul>
      </li>
      <li>1.3小节三<ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4小节四</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1">本文档于<i>2019</i>年<i>2月23日</i>使用<a href="http://texi2html.cvshome.org/"><i>texi2html 1.76生成</i></a> 。
 </font>
 <br>

</p>


</tt></tt></body></html>