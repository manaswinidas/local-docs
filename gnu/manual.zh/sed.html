<html ><head></head><body lang="zh-Hans" >﻿<!-- This file documents version 4.7 of
GNU sed, a stream editor.

Copyright (C) 1998-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no
Back-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License". --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>sed，流编辑器</title>

<meta name="description" content="sed, a stream editor">
<meta name="keywords" content="sed, a stream editor">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#Top" rel="start" title="Top">
<link href="#Concept-Index" rel="index" title="Concept Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="/manual" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">





<h1 class="settitle" align="center">sed，流编辑器</h1>

















<a name="SEC_Contents"></a>
<h2 class="contents-heading">目录</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1引言</a></li>
  <li><a name="toc-Running-sed" href="#Invoking-sed">2运行sed</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-1" href="#Overview">2.1概述</a></li>
    <li><a name="toc-Command_002dLine-Options-1" href="#Command_002dLine-Options">2.2命令行选项</a></li>
    <li><a name="toc-Exit-status-1" href="#Exit-status">2.3退出状态</a></li>
  </ul></li>
  <li><a name="toc-sed-scripts-1" href="#sed-scripts">3 <code>sed</code>剧本</a>
  <ul class="no-bullet">
    <li><a name="toc-sed-script-overview-1" href="#sed-script-overview">3.1 <code>sed</code>脚本概述</a></li>
    <li><a name="toc-sed-commands-summary" href="#sed-commands-list">3.2 <code>sed</code>命令摘要</a></li>
    <li><a name="toc-The-s-Command" href="#The-_0022s_0022-Command">3.3的<code>s</code>命令</a></li>
    <li><a name="toc-Often_002dUsed-Commands" href="#Common-Commands">3.4常用命令</a></li>
    <li><a name="toc-Less-Frequently_002dUsed-Commands" href="#Other-Commands">3.5较少使用的命令</a></li>
    <li><a name="toc-Commands-for-sed-gurus" href="#Programming-Commands">3.6命令<code>sed</code>大师</a></li>
    <li><a name="toc-Commands-Specific-to-GNU-sed" href="#Extended-Commands">3.7特定于GNU的命令<code>sed</code></a></li>
    <li><a name="toc-Multiple-commands-syntax-1" href="#Multiple-commands-syntax">3.8多命令语法</a>
    <ul class="no-bullet">
      <li><a name="toc-Commands-Requiring-a-newline" href="#Commands-Requiring-a-newline">3.8.1需要换行符的命令</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Addresses_003a-selecting-lines" href="#sed-addresses">4个地址：选择行</a>
  <ul class="no-bullet">
    <li><a name="toc-Addresses-overview-1" href="#Addresses-overview">4.1地址概述</a></li>
    <li><a name="toc-Selecting-lines-by-numbers" href="#Numeric-Addresses">4.2通过数字选择线</a></li>
    <li><a name="toc-selecting-lines-by-text-matching" href="#Regexp-Addresses">4.3通过文本匹配选择行</a></li>
    <li><a name="toc-Range-Addresses-1" href="#Range-Addresses">4.4范围地址</a></li>
  </ul></li>
  <li><a name="toc-Regular-Expressions_003a-selecting-text" href="#sed-regular-expressions">5个正则表达式：选择文本</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-of-regular-expression-in-sed" href="#Regular-Expressions-Overview">5.1中的正则表达式概述<code>sed</code></a></li>
    <li><a name="toc-Basic-_0028BRE_0029-and-extended-_0028ERE_0029-regular-expression" href="#BRE-vs-ERE">5.2基本（BRE）和扩展（ERE）正则表达式</a></li>
    <li><a name="toc-Overview-of-basic-regular-expression-syntax" href="#BRE-syntax">5.3基本正则表达式语法概述</a></li>
    <li><a name="toc-Overview-of-extended-regular-expression-syntax" href="#ERE-syntax">5.4扩展正则表达式语法概述</a></li>
    <li><a name="toc-Character-Classes-and-Bracket-Expressions-1" href="#Character-Classes-and-Bracket-Expressions">5.5字符类和括号表达式</a></li>
    <li><a name="toc-regular-expression-extensions" href="#regexp-extensions">5.6正则表达式扩展</a></li>
    <li><a name="toc-Back_002dreferences-and-Subexpressions-1" href="#Back_002dreferences-and-Subexpressions">5.7反向引用和子表达式</a></li>
    <li><a name="toc-Escape-Sequences-_002d-specifying-special-characters" href="#Escapes">5.8转义序列-指定特殊字符</a>
    <ul class="no-bullet">
      <li><a name="toc-Escaping-Precedence" href="#Escaping-Precedence">5.8.1逃避优先</a></li>
    </ul></li>
    <li><a name="toc-Multibyte-characters-and-Locale-Considerations" href="#Locale-Considerations">5.9多字节字符和语言环境注意事项</a>
    <ul class="no-bullet">
      <li><a name="toc-Invalid-multibyte-characters" href="#Invalid-multibyte-characters">5.9.1无效的多字节字符</a></li>
      <li><a name="toc-Upper_002fLower-case-conversion" href="#Upper_002fLower-case-conversion">5.9.2大写/小写转换</a></li>
      <li><a name="toc-Multibyte-regexp-character-classes" href="#Multibyte-regexp-character-classes">5.9.3多字节正则表达式字符类</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Advanced-sed_003a-cycles-and-buffers" href="#advanced-sed">6高级<code>sed</code> ：循环和缓冲区</a>
  <ul class="no-bullet">
    <li><a name="toc-How-sed-Works" href="#Execution-Cycle">6.1如何<code>sed</code>作品</a></li>
    <li><a name="toc-Hold-and-Pattern-Buffers-1" href="#Hold-and-Pattern-Buffers">6.2保持和模式缓冲区</a></li>
    <li><a name="toc-Multiline-techniques-_002d-using-D_002cG_002cH_002cN_002cP-to-process-multiple-lines" href="#Multiline-techniques">6.3多线技术-使用D，G，H，N，P处理多条线</a></li>
    <li><a name="toc-Branching-and-Flow-Control" href="#Branching-and-flow-control">6.4分支和流量控制</a>
    <ul class="no-bullet">
      <li><a name="toc-Branching-and-Cycles" href="#Branching-and-Cycles">6.4.1分支和周期</a></li>
      <li><a name="toc-Branching-example_003a-joining-lines" href="#Branching-example_003a-joining-lines">6.4.2分支示例：连接线</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Some-Sample-Scripts" href="#Examples">7一些示例脚本</a>
  <ul class="no-bullet">
    <li><a name="toc-Joining-lines-1" href="#Joining-lines">7.1连接线</a></li>
    <li><a name="toc-Centering-Lines" href="#Centering-lines">7.2对中线</a></li>
    <li><a name="toc-Increment-a-Number" href="#Increment-a-number">7.3递增数字</a></li>
    <li><a name="toc-Rename-Files-to-Lower-Case" href="#Rename-files-to-lower-case">7.4重命名文件为小写</a></li>
    <li><a name="toc-Print-bash-Environment" href="#Print-bash-environment">7.5打印<code>bash</code>环境</a></li>
    <li><a name="toc-Reverse-Characters-of-Lines" href="#Reverse-chars-of-lines">7.6线的反向字符</a></li>
    <li><a name="toc-Text-search-across-multiple-lines-1" href="#Text-search-across-multiple-lines">7.7多行文字搜索</a></li>
    <li><a name="toc-Line-length-adjustment-1" href="#Line-length-adjustment">7.8线长调整</a></li>
    <li><a name="toc-Reverse-Lines-of-Files" href="#tac">7.9文件反向行</a></li>
    <li><a name="toc-Numbering-Lines" href="#cat-_002dn">7.10编号行</a></li>
    <li><a name="toc-Numbering-Non_002dblank-Lines" href="#cat-_002db">7.11为非空白行编号</a></li>
    <li><a name="toc-Counting-Characters" href="#wc-_002dc">7.12计数字符</a></li>
    <li><a name="toc-Counting-Words" href="#wc-_002dw">7.13数词</a></li>
    <li><a name="toc-Counting-Lines" href="#wc-_002dl">7.14计数线</a></li>
    <li><a name="toc-Printing-the-First-Lines" href="#head">7.15打印第一行</a></li>
    <li><a name="toc-Printing-the-Last-Lines" href="#tail">7.16打印最后几行</a></li>
    <li><a name="toc-Make-Duplicate-Lines-Unique" href="#uniq">7.17使重复的行唯一</a></li>
    <li><a name="toc-Print-Duplicated-Lines-of-Input" href="#uniq-_002dd">7.18打印输入的重复行</a></li>
    <li><a name="toc-Remove-All-Duplicated-Lines" href="#uniq-_002du">7.19删除所有重复的行</a></li>
    <li><a name="toc-Squeezing-Blank-Lines" href="#cat-_002ds">7.20挤压空白行</a></li>
  </ul></li>
  <li><a name="toc-GNU-sed_0027s-Limitations-and-Non_002dlimitations" href="#Limitations">8个GNU <code>sed</code>的局限性和非局限性</a></li>
  <li><a name="toc-Other-Resources-for-Learning-About-sed" href="#Other-Resources">9其他学习资源<code>sed</code></a></li>
  <li><a name="toc-Reporting-Bugs-1" href="#Reporting-Bugs">10个报告错误</a></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">附录A GNU自由文档许可证</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">概念索引</a></li>
  <li><a name="toc-Command-and-Option-Index-1" href="#Command-and-Option-Index">命令和选项索引</a></li>
</ul>
</div>


<a name="Top"></a>
<div class="header">
<p>下一篇： <a href="#Introduction" rel="next" accesskey="n">简介</a> ，上一篇：（ <a href="/manual" rel="up" accesskey="u">目录）</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="GNU-sed"></a>
<h1 class="top">GNU<code>sed</code></h1>

<p>该文件记录了GNU 4.7版本<code>sed</code> ，一个流编辑器。
</p>
<p>版权所有©1998-2018自由软件基金会，Inc.</p>
<blockquote>
<p>根据GNU自由文档许可版本1.3或自由软件基金会发布的任何更高版本，授予复制，分发和/或修改本文档的权限；没有不变的部分，没有前封面文字，也没有后封面文字。许可证的副本包含在标题为“ GNU自由文档许可证”的部分中。
</p></blockquote>


<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Introduction" accesskey="1">简介</a> ：</td><td>  </td><td align="left" valign="top">介绍</td></tr>
<tr><td align="left" valign="top">• <a href="#Invoking-sed" accesskey="2">调用sed</a> ：</td><td>  </td><td align="left" valign="top">调用方式</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-scripts" accesskey="3">sed脚本</a> ：</td><td>  </td><td align="left" valign="top"><code>sed</code>剧本</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-addresses" accesskey="4">sed地址</a> ：</td><td>  </td><td align="left" valign="top">地址：选择行</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-regular-expressions" accesskey="5">sed正则表达式</a> ：</td><td>  </td><td align="left" valign="top">正则表达式：选择文本</td></tr>
<tr><td align="left" valign="top">• <a href="#advanced-sed" accesskey="6">高级sed</a> ：</td><td>  </td><td align="left" valign="top">高级<code>sed</code> ：循环和缓冲区</td></tr>
<tr><td align="left" valign="top">• <a href="#Examples" accesskey="7">示例</a> ：</td><td>  </td><td align="left" valign="top">一些示例脚本</td></tr>
<tr><td align="left" valign="top">• <a href="#Limitations" accesskey="8">局限性</a> ：</td><td>  </td><td align="left" valign="top">GNU的局限性（非局限性） <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Other-Resources" accesskey="9">其他资源</a> ：</td><td>  </td><td align="left" valign="top">其他学习资源<code>sed</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Reporting-Bugs">报告错误</a> ：</td><td>  </td><td align="left" valign="top">报告错误</td></tr>
<tr><td align="left" valign="top">• <a href="#GNU-Free-Documentation-License">GNU自由文档许可证</a> ：</td><td>  </td><td align="left" valign="top">复制和共享本手册</td></tr>
<tr><td align="left" valign="top">• <a href="#Concept-Index">概念索引</a> ：</td><td>  </td><td align="left" valign="top">包含本手册所有主题的菜单。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Command-and-Option-Index">命令和选项索引</a> ：</td><td>  </td><td align="left" valign="top">所有菜单<code>sed</code>命令和命令行选项。
</td></tr>
</tbody></table>


<hr>
<a name="Introduction"></a>
<div class="header">
<p>下一篇： <a href="#Invoking-sed" rel="next" accesskey="n">调用sed</a> ，上一篇： <a href="#Top" rel="prev" accesskey="p">顶部</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Introduction-1"></a>
<h2 class="chapter">1引言</h2>

<a name="index-Stream-editor"></a>
<p><code>sed</code>是流编辑器。流编辑器用于对输入流（文件或来自管道的输入）执行基本的文本转换。虽然在某种程度上类似于允许脚本编辑的编辑器（例如<code>ed</code> ）， <code>sed</code>通过仅对输入进行一次传递即可工作，因此效率更高。但它是<code>sed</code>能够在管道中过滤文本，这使其与其他类型的编辑器特别有区别。
</p>

<hr>
<a name="Invoking-sed"></a>
<div class="header">
<p>下一篇： <a href="#sed-scripts" rel="next" accesskey="n">sed脚本</a> ，上一篇： <a href="#Introduction" rel="prev" accesskey="p">简介</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Running-sed"></a>
<h2 class="chapter">2运行sed</h2>

<p>本章介绍如何运行<code>sed</code> 。的详细内容<code>sed</code>脚本和个人<code>sed</code>命令将在下一章中讨论。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Overview" accesskey="1">概述</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Command_002dLine-Options" accesskey="2">命令行选项</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Exit-status" accesskey="3">退出状态</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>


<hr>
<a name="Overview"></a>
<div class="header">
<p>下一页： <a href="#Command_002dLine-Options" rel="next" accesskey="n">命令行选项</a> ，上<a href="#Invoking-sed" rel="up" accesskey="u">一步</a> ： <a href="#Invoking-sed" rel="up" accesskey="u">调用sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overview-1"></a>
<h3 class="section">2.1概述</h3>
<p>一般<code>sed</code>像这样被调用：</p>
<div class="example">
<pre class="example">sed SCRIPT INPUTFILE...
</pre></div>

<p>例如，替换所有出现的“ <samp>hello</samp> ' 至 ' <samp>world</samp>在文件中<samp>input.txt</samp> ：</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt
</pre></div>

<a name="index-stdin"></a>
<a name="index-standard-input"></a>
<p>如果不指定<var>INPUTFILE</var> ， 或者如果<var>INPUTFILE</var>是<samp>-</samp> ， <code>sed</code>过滤标准输入的内容。以下命令是等效的：</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt
sed 's/hello/world/' &lt; input.txt &gt; output.txt
cat input.txt | sed 's/hello/world/' - &gt; output.txt
</pre></div>

<a name="index-stdout"></a>
<a name="index-output"></a>
<a name="index-standard-output"></a>
<a name="index-_002di_002c-example"></a>
<p><code>sed</code>将输出写入标准输出。使用<samp>-i</samp>可以就地编辑文件，而不是打印到标准输出。另请参阅<code>W</code>和<code>s///w</code>用于将输出写入其他文件的命令。以下命令修改<samp>file.txt</samp>并且不产生任何输出：</p>
<div class="example">
<pre class="example">sed -i 's/hello/world/' file.txt
</pre></div>

<a name="index-_002dn_002c-example"></a>
<a name="index-p_002c-example"></a>
<a name="index-suppressing-output"></a>
<a name="index-output_002c-suppressing"></a>
<p>默认<code>sed</code>打印所有已处理的输入（除了已被命令（例如， <code>d</code> ）。使用<samp>-n</samp>抑制输出，并且<code>p</code>命令以打印特定行。以下命令仅打印输入文件的第45行：</p>
<div class="example">
<pre class="example">sed -n '45p' file.txt
</pre></div>



<a name="index-multiple-files"></a>
<a name="index-_002ds_002c-example"></a>
<p><code>sed</code>将多个输入文件视为一个长流。以下示例显示第一个文件的第一行（ <samp>one.txt</samp> ）和最后一个文件的最后一行（ <samp>three.txt</samp> ）。使用<samp>-s</samp>扭转这种行为。
</p>
<div class="example">
<pre class="example">sed -n  '1p ; $p' one.txt two.txt three.txt
</pre></div>


<a name="index-_002de_002c-example"></a>
<a name="index-_002d_002dexpression_002c-example"></a>
<a name="index-_002df_002c-example"></a>
<a name="index-_002d_002dfile_002c-example"></a>
<a name="index-script-parameter"></a>
<a name="index-parameters_002c-script"></a>
<p>不带<samp>-e</samp>要么<samp>-f</samp>选项， <code>sed</code>使用第一个非选项参数作为<var>script</var> ，以及以下非选项参数作为输入文件。如果<samp>-e</samp>要么<samp>-f</samp>选项用于指定<var>script</var> ，所有非选项参数均作为输入文件。选件<samp>-e</samp>和<samp>-f</samp>可以合并，并且可以多次出现（在这种情况下，最终有效<var>script</var>将是所有个人的串联<var>script</var> s）。
</p>
<p>以下示例是等效的：</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt

sed -e 's/hello/world/' input.txt &gt; output.txt
sed --expression='s/hello/world/' input.txt &gt; output.txt

echo 's/hello/world/' &gt; myscript.sed
sed -f myscript.sed input.txt &gt; output.txt
sed --file=myscript.sed input.txt &gt; output.txt
</pre></div>


<hr>
<a name="Command_002dLine-Options"></a>
<div class="header">
<p>下一篇： <a href="#Exit-status" rel="next" accesskey="n">退出状态</a> ，上一篇： <a href="#Overview" rel="prev" accesskey="p">概述</a> ，上一篇： <a href="#Invoking-sed" rel="up" accesskey="u">调用sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Command_002dLine-Options-1"></a>
<h3 class="section">2.2命令行选项</h3>

<p>完整的调用格式<code>sed</code>是：</p>
<div class="example">
<pre class="example">sed OPTIONS... [SCRIPT] [INPUTFILE...]
</pre></div>

<p><code>sed</code>可以使用以下命令行选项来调用：</p>
<dl compact>
<dt><code>--version</code></dt>
<dd><a name="index-_002d_002dversion"></a>
<a name="index-Version_002c-printing"></a>
<p>打印出的版本<code>sed</code>正在运行并显示版权声明，然后退出。
</p>
</dd>
<dt><code>--help</code></dt>
<dd><a name="index-_002d_002dhelp"></a>
<a name="index-Usage-summary_002c-printing"></a>
<p>打印使用情况消息，简要概述这些命令行选项和错误报告地址，然后退出。
</p>
</dd>
<dt><code>-n</code></dt>
<dt><code>--quiet</code></dt>
<dt><code>--silent</code></dt>
<dd><a name="index-_002dn"></a>
<a name="index-_002d_002dquiet"></a>
<a name="index-_002d_002dsilent"></a>
<a name="index-Disabling-autoprint_002c-from-command-line"></a>
<p>默认， <code>sed</code>在每个循环的最后，通过脚本打印出模式空间（请参阅<a href="#Execution-Cycle">如何<code>sed</code>作品</a> ）。这些选项禁用此自动打印，并且<code>sed</code>仅在通过明确告知时才产生输出<code>p</code>命令。
</p>
</dd>
<dt><code>--debug</code></dt>
<dd><a name="index-_002d_002ddebug"></a>
<a name="index-GNU-extensions_002c-debug"></a>
<p>以规范形式打印输入的sed程序，并注释程序执行。
</p><div class="example">
<pre class="example">$ echo 1 | sed '\%1%s21232'
3

$ echo 1 | sed --debug '\%1%s21232'
SED PROGRAM:
  /1/ s/1/3/
INPUT:   'STDIN' line 1
PATTERN: 1
COMMAND: /1/ s/1/3/
PATTERN: 3
END-OF-CYCLE:
3
</pre></div>


</dd>
<dt><code>-e <var>script</var></code></dt>
<dt><code>--expression=<var>script</var></code></dt>
<dd><a name="index-_002de"></a>
<a name="index-_002d_002dexpression"></a>
<a name="index-Script_002c-from-command-line"></a>
<p>在中添加命令<var>script</var>处理输入时要运行的命令集。
</p>
</dd>
<dt><code>-f <var>script-file</var></code></dt>
<dt><code>--file=<var>script-file</var></code></dt>
<dd><a name="index-_002df"></a>
<a name="index-_002d_002dfile"></a>
<a name="index-Script_002c-from-a-file"></a>
<p>添加文件中包含的命令<var>script-file</var>处理输入时要运行的命令集。
</p>
</dd>
<dt><code>-i[<var>SUFFIX</var>]</code></dt>
<dt><code>--in-place[=<var>SUFFIX</var>]</code></dt>
<dd><a name="index-_002di"></a>
<a name="index-_002d_002din_002dplace"></a>
<a name="index-In_002dplace-editing_002c-activating"></a>
<a name="index-GNU-extensions_002c-in_002dplace-editing"></a>
<p>此选项指定文件就地编辑。GNU <code>sed</code>通过创建一个临时文件并将输出发送到该文件而不是发送到标准输出来实现。 <a name="DOCF1" href="#FOOT1"><sup>1</sup></a> 。
</p>
<p>此选项暗示<samp>-s</samp> 。
</p>
<p>到达文件末尾时，临时文件将重命名为输出文件的原始名称。扩展名（如果提供）用于在重命名临时文件之前修改旧文件的名称，从而制作备份副本<a name="DOCF2" href="#FOOT2"><sup>2</sup></a> ）。
</p>
<a name="index-In_002dplace-editing_002c-Perl_002dstyle-backup-file-names"></a>
<p>遵循以下规则：如果扩展名不包含<code>*</code> ，然后将其作为后缀附加到当前文件名的末尾；如果扩展名确实包含一个或多个<code>*</code>字符，然后将<em>每个</em>星号替换为当前文件名。这使您可以为备份文件添加前缀，而不是后缀（或除了后缀之外），甚至可以将原始文件的备份副本放置到另一个目录中（前提是该目录已存在）。
</p>
<p>如果没有提供扩展名，则原始文件将被覆盖而不进行备份。
</p>
<p>因为<samp>-i</samp>带有一个可选参数，后面不应有其他简短选项：</p><dl compact>
<dt><code>sed -Ei '...' FILE</code></dt>
<dd><p>和...一样<samp>-E -i</samp>没有备份后缀- <samp>FILE</samp>将在不编辑备份的情况下进行就地编辑。
</p>
</dd>
<dt><code>sed -iE '...' FILE</code></dt>
<dd><p>这相当于<samp>--in-place=E</samp> ，创建<samp>FILEE</samp>作为备份<samp>FILE</samp>
</p></dd>
</dl>

<p>使用时要小心<samp>-n</samp>与<samp>-i</samp> ：前者禁用行的自动打印，而后者无需备份就地更改文件。粗心使用（没有明确的<code>p</code>命令），输出文件将为空：</p><div class="example">
<pre class="example"># WRONG USAGE: 'FILE' will be truncated.
sed -ni 's/foo/bar/' FILE
</pre></div>

</dd>
<dt><code>-l <var>N</var></code></dt>
<dt><code>--line-length=<var>N</var></code></dt>
<dd><a name="index-_002dl"></a>
<a name="index-_002d_002dline_002dlength"></a>
<a name="index-Line-length_002c-setting"></a>
<p>指定默认的换行长度<code>l</code>命令。长度为0（零）表示永不换行。如果未指定，则为70。
</p>
</dd>
<dt><code>--posix</code></dt>
<dd><a name="index-_002d_002dposix"></a>
<a name="index-GNU-extensions_002c-disabling"></a>
<p>GNU <code>sed</code>包括POSIX sed的几个扩展。为了简化编写可移植脚本的过程，此选项禁用了本手册记录的所有扩展，包括其他命令。
<a name="index-POSIXLY_005fCORRECT-behavior_002c-enabling"></a>大多数扩展接受<code>sed</code>不在POSIX规定的语法范围内的程序，但其中一些（例如<code>N</code> “ <a href="#Reporting-Bugs">报告错误”中</a>描述的命令实际上违反了该标准。如果您只想禁用后一种扩展名，则可以设置<code>POSIXLY_CORRECT</code>变量为非空值。
</p>
</dd>
<dt><code>-b</code></dt>
<dt><code>--binary</code></dt>
<dd><a name="index-_002db"></a>
<a name="index-_002d_002dbinary"></a>
<p>该选项在每个平台上都可用，但是仅在操作系统区分文本文件和二进制文件的情况下才有效。当做出这种区分时（如MS-DOS，Windows和Cygwin一样），文本文件由由回车符<em>和</em>换行符分隔的行组成，并且<code>sed</code>没有看到结尾的CR。指定此选项后， <code>sed</code>将以二进制模式打开输入文件，因此不要求进行特殊处理，并考虑以换行结束的行。
</p>
</dd>
<dt><code>--follow-symlinks</code></dt>
<dd><a name="index-_002d_002dfollow_002dsymlinks"></a>
<p>该选项仅在支持符号链接的平台上可用，并且仅在该选项有效时有效<samp>-i</samp>已指定。在这种情况下，如果在命令行上指定的文件是符号链接， <code>sed</code>将跟随该链接并编辑该链接的最终目的地。默认行为是断开符号链接，以便链接目标不会被修改。
</p>
</dd>
<dt><code>-E</code></dt>
<dt><code>-r</code></dt>
<dt><code>--regexp-extended</code></dt>
<dd><a name="index-_002dE"></a>
<a name="index-_002dr"></a>
<a name="index-_002d_002dregexp_002dextended"></a>
<a name="index-Extended-regular-expressions_002c-choosing"></a>
<a name="index-GNU-extensions_002c-extended-regular-expressions"></a>
<p>使用扩展的正则表达式，而不是基本的正则表达式。扩展正则表达式是那些<code>egrep</code>接受它们可以更清晰，因为它们的反斜杠通常较少。从历史上看，这是GNU扩展，但是<samp>-E</samp>此扩展自此已添加到POSIX标准（http://austingroupbugs.net/view.php?id=528），因此请使用<samp>-E</samp>便于携带。GNU sed已接受<samp>-E</samp>多年来一直是无记录的选择，并且* BSD sed已被接受<samp>-E</samp>以及多年，但脚本使用<samp>-E</samp>可能无法移植到其他旧系统。请参阅<a href="#ERE-syntax">扩展正则表达式</a> 。
</p>

</dd>
<dt><code>-s</code></dt>
<dt><code>--separate</code></dt>
<dd><a name="index-_002ds"></a>
<a name="index-_002d_002dseparate"></a>
<a name="index-Working-on-separate-files"></a>
<p>默认， <code>sed</code>会将命令行上指定的文件视为单个连续的长流。这个GNU <code>sed</code>扩展名使用户可以将它们视为单独的文件：范围地址（例如“ <samp>/abc/,/def/</samp> '）不允许跨越多个文件，行号相对于每个文件的开头， <code>$</code>指每个文件的最后一行，并且从<code>R</code>在每个文件的开头重绕命令。
</p>
</dd>
<dt><code>--sandbox</code></dt>
<dd><a name="index-_002d_002dsandbox"></a>
<a name="index-Sandbox-mode"></a>
<p>在沙盒模式下， <code>e/w/r</code>命令被拒绝-包含它们的程序将被中止而不运行。沙盒模式可确保<code>sed</code>仅在命令行上指定的输入文件上运行，而不能运行外部程序。
</p>

</dd>
<dt><code>-u</code></dt>
<dt><code>--unbuffered</code></dt>
<dd><a name="index-_002du"></a>
<a name="index-_002d_002dunbuffered"></a>
<a name="index-Unbuffered-I_002fO_002c-choosing"></a>
<p>尽可能地缓冲输入和输出。（如果输入来自“ <samp>tail -f</samp> '，您希望尽快看到转换后的输出。）
</p>
</dd>
<dt><code>-z</code></dt>
<dt><code>--null-data</code></dt>
<dt><code>--zero-terminated</code></dt>
<dd><a name="index-_002dz"></a>
<a name="index-_002d_002dnull_002ddata"></a>
<a name="index-_002d_002dzero_002dterminated"></a>
<p>将输入视为一组行，每行以一个零字节结尾（ASCII' <samp>NUL</samp> '字符）代替换行符。此选项可与“ <samp>sort -z</samp> '和' <samp>find -print0</samp> '处理任意文件名。
</p></dd>
</dl>

<p>如果不<samp>-e</samp> ， <samp>-f</samp> ， <samp>--expression</samp> ， 要么<samp>--file</samp>选项是在命令行上给出的，那么命令行上的第一个非选项参数就是<var>script</var>被执行。
</p>
<a name="index-Files-to-be-processed-as-input"></a>
<p>如果在执行上述操作后仍保留任何命令行参数，则这些参数将被解释为要处理的输入文件的名称。
<a name="index-Standard-input_002c-processing-as-input"></a>文件名“ <samp>-</samp> '表示标准输入流。如果未指定文件名，则将处理标准输入。
</p>
<hr>
<a name="Exit-status"></a>
<div class="header">
<p>上一篇： <a href="#Command_002dLine-Options" rel="prev" accesskey="p">命令行选项</a> ，上<a href="#Invoking-sed" rel="up" accesskey="u">一篇</a> ： <a href="#Invoking-sed" rel="up" accesskey="u">调用sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Exit-status-1"></a>
<h3 class="section">2.3退出状态</h3>
<a name="index-exit-status"></a>
<p>退出状态为零表示成功，非零值表示失败。GNU <code>sed</code>返回以下退出状态错误值：</p>
<dl compact>
<dt>0</dt>
<dd><p>成功完成。
</p>
</dd>
<dt>1个</dt>
<dd><p>无效的命令，无效的语法，无效的正则表达式或GNU <code>sed</code>扩展命令与<samp>--posix</samp> 。
</p>
</dd>
<dt>2</dt>
<dd><p>无法打开在命令行上指定的一个或多个输入文件（例如，如果找不到文件或拒绝了读取权限）。其他文件继续处理。
</p>
</dd>
<dt>4</dt>
<dd><p>I / O错误，或运行时严重的处理错误，GNU <code>sed</code>立即中止。
</p></dd>
</dl>

<a name="index-Q_002c-example"></a>
<a name="index-exit-status_002c-example"></a>
<p>此外，命令<code>q</code>和<code>Q</code>可用于终止<code>sed</code>具有自定义退出代码值（这是GNU <code>sed</code>延期）：</p>
<div class="example">
<pre class="example">$ echo | sed 'Q42' ; echo $?
42
</pre></div>


<hr>
<a name="sed-scripts"></a>
<div class="header">
<p>下一篇： <a href="#sed-addresses" rel="next" accesskey="n">sed地址</a> ，上一篇： <a href="#Invoking-sed" rel="prev" accesskey="p">调用sed</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="sed-scripts-1"></a>
<h2 class="chapter">3 <code>sed</code>剧本</h2>


<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#sed-script-overview" accesskey="1">sed脚本概述</a> ：</td><td>  </td><td align="left" valign="top"><code>sed</code>脚本概述</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-commands-list" accesskey="2">sed命令列表</a> ：</td><td>  </td><td align="left" valign="top"><code>sed</code>命令摘要</td></tr>
<tr><td align="left" valign="top">• <a href="#The-_0022s_0022-Command" accesskey="3">“ s”命令</a> ：</td><td>  </td><td align="left" valign="top"><code>sed</code>的瑞士军刀</td></tr>
<tr><td align="left" valign="top">• <a href="#Common-Commands" accesskey="4">常用命令</a> ：</td><td>  </td><td align="left" valign="top">常用命令</td></tr>
<tr><td align="left" valign="top">• <a href="#Other-Commands" accesskey="5">其他命令</a> ：</td><td>  </td><td align="left" valign="top">不太常用的命令</td></tr>
<tr><td align="left" valign="top">• <a href="#Programming-Commands" accesskey="6">编程命令</a> ：</td><td>  </td><td align="left" valign="top">命令<code>sed</code>大师</td></tr>
<tr><td align="left" valign="top">• <a href="#Extended-Commands" accesskey="7">扩展命令</a> ：</td><td>  </td><td align="left" valign="top">特定于GNU的命令<code>sed</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiple-commands-syntax" accesskey="8">多个命令语法</a> ：</td><td>  </td><td align="left" valign="top">扩展以简化脚本</td></tr>
</tbody></table>

<hr>
<a name="sed-script-overview"></a>
<div class="header">
<p>下一篇： <a href="#sed-commands-list" rel="next" accesskey="n">sed命令列表</a> ，上一篇： <a href="#sed-commands-list" rel="next" accesskey="n">sed</a> <a href="#sed-scripts" rel="up" accesskey="u">脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="sed-script-overview-1"></a>
<h3 class="section">3.1 <code>sed</code>脚本概述</h3>

<a name="index-sed-script-structure"></a>
<a name="index-Script-structure"></a>

<p>一种<code>sed</code>程序包含一个或多个<code>sed</code>命令，由一个或多个<samp>-e</samp> ， <samp>-f</samp> ， <samp>--expression</samp>和<samp>--file</samp>选项，如果使用零个选项，则返回第一个非选项参数。本文档将引用“ <code>sed</code>脚本;这被理解为是指所有<var>script</var>和<var>script-file</var>传递了。请参阅<a href="#Overview">概述</a> 。
</p>

<a name="index-sed-commands-syntax"></a>
<a name="index-syntax_002c-sed-commands"></a>
<a name="index-addresses_002c-syntax"></a>
<a name="index-syntax_002c-addresses"></a>
<p><code>sed</code>命令遵循以下语法：</p>
<div class="example">
<pre class="example">[addr]<var>X</var>[options]
</pre></div>

<p><var>X</var>是一个字母<code>sed</code>命令。
<code>[addr]</code>是可选的行地址。如果<code>[addr]</code>指定后，命令<var>X</var>将仅在匹配的行上执行。
<code>[addr]</code>可以是单个行号，正则表达式或行范围（请参见<a href="#sed-addresses">sed address</a> ）。额外<code>[options]</code>用于一些<code>sed</code>命令。
</p>
<a name="index-d_002c-example"></a>
<a name="index-address-range_002c-example"></a>
<a name="index-example_002c-address-range"></a>
<p>下面的示例删除输入中的第30至35行。
<code>30,35</code>是一个地址范围。 <code>d</code>是删除命令：</p>
<div class="example">
<pre class="example">sed '30,35d' input.txt &gt; output.txt
</pre></div>

<a name="index-q_002c-example"></a>
<a name="index-regular-expression_002c-example"></a>
<a name="index-example_002c-regular-expression"></a>
<p>以下示例打印所有输入，直到以单词'开头的行<samp>foo</samp>找到了。如果找到这样的行， <code>sed</code>将以退出状态42终止。如果找不到这样的行（并且没有发生其他错误）， <code>sed</code>将以状态0退出。
<code>/^foo/</code>是一个正则表达式地址。
<code>q</code>是quit命令。 <code>42</code>是命令选项。
</p>
<div class="example">
<pre class="example">sed '/^foo/q42' input.txt &gt; output.txt
</pre></div>


<a name="index-multiple-sed-commands"></a>
<a name="index-sed-commands_002c-multiple"></a>
<a name="index-newline_002c-command-separator"></a>
<a name="index-semicolons_002c-command-separator"></a>
<a name="index-_003b_002c-command-separator"></a>
<a name="index-_002de_002c-example-1"></a>
<a name="index-_002df_002c-example-1"></a>
<p>一个内的命令<var>script</var>要么<var>script-file</var>可以用分号（ <code>;</code> ）或换行符（ASCII 10）。可以使用以下命令指定多个脚本<samp>-e</samp>要么<samp>-f</samp>选项。
</p>
<p>以下示例都是等效的。他们表演两个<code>sed</code>操作：删除任何与正则表达式匹配的行<code>/^foo/</code> ，并替换所有出现的字符串' <samp>hello</samp>与“ <samp>world</samp> '：</p>
<div class="example">
<pre class="example">sed '/^foo/d ; s/hello/world/' input.txt &gt; output.txt

sed -e '/^foo/d' -e 's/hello/world/' input.txt &gt; output.txt

echo '/^foo/d' &gt; script.sed
echo 's/hello/world/' &gt;&gt; script.sed
sed -f script.sed input.txt &gt; output.txt

echo 's/hello/world/' &gt; script2.sed
sed -e '/^foo/d' -f script2.sed input.txt &gt; output.txt
</pre></div>


<a name="index-a_002c-and-semicolons"></a>
<a name="index-c_002c-and-semicolons"></a>
<a name="index-i_002c-and-semicolons"></a>
<p>指令<code>a</code> ， <code>c</code> ， <code>i</code> ，由于其语法原因，不能使用分号作为命令分隔符，因此应使用换行符终止或将其放在<var>script</var>要么<var>script-file</var> 。命令之前也可以带有可选的非有效空白字符。请参阅<a href="#Multiple-commands-syntax">多命令语法</a> 。
</p>


<hr>
<a name="sed-commands-list"></a>
<div class="header">
<p>下一篇： <a href="#The-_0022s_0022-Command" rel="next" accesskey="n">“ s”命令</a> ，上一篇： <a href="#sed-script-overview" rel="prev" accesskey="p">sed脚本概述</a> ，上一篇： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="sed-commands-summary"></a>
<h3 class="section">3.2 <code>sed</code>命令摘要</h3>

<p>GNU支持以下命令<code>sed</code> 。一些是标准的POSIX命令，而另一些是GNU扩展。以下各节提供了每个命令的详细信息和示例。（助记符）显示在括号中。
</p>
<dl compact>
<dt><code>a\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><p>附加<var>text</var>在一行之后。
</p>
</dd>
<dt><code>a <var>text</var></code></dt>
<dd><p>附加<var>text</var>在一行之后（替代语法）。
</p>
</dd>
<dt><code>b <var>label</var></code></dt>
<dd><p>无条件分支到<var>label</var> 。的<var>label</var>可以省略，在这种情况下，下一个周期开始。
</p>
</dd>
<dt><code>c\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><p>用（替换）行<var>text</var> 。
</p>
</dd>
<dt><code>c <var>text</var></code></dt>
<dd><p>用（替换）行<var>text</var> （替代语法）。
</p>
</dd>
<dt><code>d</code></dt>
<dd><p>删除模式空间；立即开始下一个周期。
</p>
</dd>
<dt><code>D</code></dt>
<dd><p>如果模式空间包含换行符，请删除模式空间中直到第一个换行符的文本，然后使用结果模式空间重新开始循环，而无需读取新的输入行。
</p>
<p>如果模式空间不包含换行符，则开始正常的新循环，就像<code>d</code>命令已发出。
</p>
</dd>
<dt><code>e</code></dt>
<dd><p>执行在模式空间中找到的命令，并用输出替换模式空间；尾随换行符被取消。
</p>
</dd>
<dt><code>e <var>command</var></code></dt>
<dd><p>执行<var>command</var>并将其输出发送到输出流。该命令可以跨多行运行，除了最后一行以外都以反斜杠结尾。
</p>
</dd>
<dt><code>F</code></dt>
<dd><p>（文件名）打印当前输入文件的文件名（以换行符结尾）。
</p>
</dd>
<dt><code>g</code></dt>
<dd><p>用保留空间的内容替换模式空间的内容。
</p>
</dd>
<dt><code>G</code></dt>
<dd><p>在模式空间的内容上添加换行符，然后在模式空间的内容上添加保留空间的内容。
</p>
</dd>
<dt><code>h</code></dt>
<dd><p>（保持）将保持空间的内容替换为模式空间的内容。
</p>
</dd>
<dt><code>H</code></dt>
<dd><p>在换行符的内容后面加上换行符，然后在换行符的内容后面加上模式空间的内容。
</p>
</dd>
<dt><code>i\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><p>插入<var>text</var>在一行之前。
</p>
</dd>
<dt><code>i <var>text</var></code></dt>
<dd><p>插入<var>text</var>在一行之前（替代语法）。
</p>
</dd>
<dt><code>l</code></dt>
<dd><p>以明确的形式打印图案空间。
</p>
</dd>
<dt><code>n</code></dt>
<dd><p>（下一个）如果未禁用自动打印，请打印图案空间，然后无论如何用下一行输入替换图案空间。如果没有更多输入，则<code>sed</code>退出而不处理任何其他命令。
</p>
</dd>
<dt><code>N</code></dt>
<dd><p>在模式空间中添加换行符，然后将输入的下一行追加到模式空间中。如果没有更多输入，则<code>sed</code>退出而不处理任何其他命令。
</p>
</dd>
<dt><code>p</code></dt>
<dd><p>打印图案空间。
</p>
</dd>
<dt><code>P</code></dt>
<dd><p>打印图案空间，直到第一个<newline>。
</newline></p>
</dd>
<dt><code>q<var>[exit-code]</var></code></dt>
<dd><p>（退出）退出<code>sed</code>无需处理更多命令或输入。
</p>
</dd>
<dt><code>Q<var>[exit-code]</var></code></dt>
<dd><p>（退出）此命令与<code>q</code> ，但不会打印图案空间的内容。喜欢<code>q</code> ，它提供了将退出代码返回给调用者的功能。
</p>
</dd>
<dt><code>r filename</code></dt>
<dd><p>读取文件<var>filename</var> 。
</p>
</dd>
<dt><code>R filename</code></dt>
<dd><p>排队一行<var>filename</var>在当前周期结束时或在读取下一个输入行时将其读取并插入到输出流中。
</p>
</dd>
<dt><code>s<var>/regexp/replacement/[flags]</var></code></dt>
<dd><p>（替代）将正则表达式与模式空间的内容匹配。如果找到，则将匹配的字符串替换为<var>replacement</var> 。
</p>
</dd>
<dt><code>t <var>label</var></code></dt>
<dd><p>（测试）分支到<var>label</var>只有成功了<code>s</code>从读取最后一条输入行或采用条件分支以来的结果是不可读的。的<var>label</var>可以省略，在这种情况下，下一个周期开始。
</p>
</dd>
<dt><code>T <var>label</var></code></dt>
<dd><p>（测试）分支到<var>label</var>只有没有成功<code>s</code>自读取最后一条输入行或采用条件分支以来的所有错误。的<var>label</var>可以省略，在这种情况下，下一个周期开始。
</p>
</dd>
<dt><code>v <var>[version]</var></code></dt>
<dd><p>（版本）此命令不执行任何操作，但使<code>sed</code>如果GNU失败<code>sed</code>不支持扩展，或者请求的版本不可用。
</p>
</dd>
<dt><code>w filename</code></dt>
<dd><p>将模式空间写入<var>filename</var> 。
</p>
</dd>
<dt><code>W filename</code></dt>
<dd><p>将模式空间的一部分写入给定文件名，直到第一行</p>
</dd>
<dt><code>x</code></dt>
<dd><p>交换保留空间和模式空间的内容。
</p>

</dd>
<dt><code>y/src/dst/</code></dt>
<dd><p>音译模式空间中与任何<var>source-chars</var>带有相应的字符<var>dest-chars</var> 。
</p>

</dd>
<dt><code>z</code></dt>
<dd><p>（zap）此命令清空模式空间的内容。
</p>
</dd>
<dt><code>#</code></dt>
<dd><p>评论，直到下一个换行符。
</p>

</dd>
<dt><code>{ <var>cmd ; cmd ...</var> }</code></dt>
<dd><p>将几个命令组合在一起。
</p>
</dd>
<dt><code>=</code></dt>
<dd><p>打印当前输入行号（带有换行符）。
</p>
</dd>
<dt><code>: <var>label</var></code></dt>
<dd><p>指定位置<var>label</var>对于分支命令（ <code>b</code> ， <code>t</code> ， <code>T</code> ）。
</p>
</dd>
</dl>


<hr>
<a name="The-_0022s_0022-Command"></a>
<div class="header">
<p>下一篇： <a href="#Common-Commands" rel="next" accesskey="n">通用命令</a> ，上一篇： <a href="#sed-commands-list" rel="prev" accesskey="p">sed命令列表</a> ，上一篇： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="The-s-Command"></a>
<h3 class="section">3.3的<code>s</code>命令</h3>

<p>的<code>s</code>命令（如替代命令）可能是最重要的<code>sed</code>并且有很多不同的选择。的语法<code>s</code>命令是<samp>s/<var>regexp</var>/<var>replacement</var>/<var>flags</var></samp> '。
</p>
<p>它的基本概念很简单： <code>s</code>命令尝试将模式空间与提供的正则表达式进行匹配<var>regexp</var> ;如果匹配成功，则将匹配的模式空间部分替换为<var>replacement</var> 。
</p>
<p>有关详细信息<var>regexp</var>语法请参见<a href="#Regexp-Addresses">正则表达式地址</a> 。
</p>
<a name="index-Backreferences_002c-in-regular-expressions"></a>
<a name="index-Parenthesized-substrings"></a>
<p>的<var>replacement</var>可以包含<code>\<var>n</var></code> （ <var>n</var>是从1到9（含1和9）之间的数字）引用，指的是<var>n</var>日<code>\(</code>及其匹配<code>\)</code> 。另外， <var>replacement</var>可以包含未转义的<code>&</code>引用模式空间的整个匹配部分的字符。
</p>

<p>的<code>/</code>任意给定范围内的任何其他单个字符可以统一替换这些字符<code>s</code>命令。的<code>/</code>字符（或代其使用的其他任何字符）可以出现在<var>regexp</var>要么<var>replacement</var>仅在其前面有一个<code>\</code>字符。
</p>


<a name="index-GNU-extensions_002c-case-modifiers-in-s-commands"></a>
<p>最后，作为一个GNU <code>sed</code>扩展名，您可以包含由反斜杠和字母之一组成的特殊序列<code>L</code> ， <code>l</code> ， <code>U</code> ， <code>u</code> ， 要么<code>E</code> 。含义如下：</p>
<dl compact>
<dt><code>\L</code></dt>
<dd><p>将替换项转换为小写，直到<code>\U</code>要么<code>\E</code>被发现</p>
</dd>
<dt><code>\l</code></dt>
<dd><p>将下一个字符转为小写，</p>
</dd>
<dt><code>\U</code></dt>
<dd><p>将替换项变成大写，直到<code>\L</code>要么<code>\E</code>被发现</p>
</dd>
<dt><code>\u</code></dt>
<dd><p>将下一个字符变为大写，</p>
</dd>
<dt><code>\E</code></dt>
<dd><p>停止案例转换开始于<code>\L</code>要么<code>\U</code> 。
</p></dd>
</dl>

<p>当。。。的时候<code>g</code>如果使用标记，则大小写转换不会从一个正则表达式传播到另一个。例如，当以下命令与' <samp>a-b-</samp> '在模式空间中：</p><div class="example">
<pre class="example">s/\(b\?\)-/x\u\1/g
</pre></div>

<p>输出为<samp>axxB</samp> '。更换第一个' <samp>-</samp> '，' <samp>\u</samp> '序列只会影响'的空替换<samp>\1</samp> '。它不会影响<code>x</code>替换时添加到模式空间的字符<code>b-</code>与<code>xB</code> 。
</p>
<p>另一方面， <code>\l</code>和<code>\u</code>如果后面有一个空的替换，确实会影响替换文本的其余部分。与“ <samp>a-b-</samp> '在模式空间中，以下命令：</p><div class="example">
<pre class="example">s/\(b\?\)-/\u\1x/g
</pre></div>

<p>将取代' <samp>-</samp>与“ <samp>X</samp> '（大写）和' <samp>b-</samp>与“ <samp>Bx</samp> '。如果此行为不受欢迎，则可以通过添加“ <samp>\E</samp> “序列-在”之后<samp>\1</samp> ' 在这种情况下。
</p>
<p>包含文字<code>\</code> ， <code>&</code> ，或最终替换中的换行符，请确保在所需的之前<code>\</code> ， <code>&</code> ，或<var>replacement</var>与一个<code>\</code> 。
</p>
<a name="index-s-command_002c-option-flags"></a>
<a name="index-Substitution-of-text_002c-options"></a>
<p>的<code>s</code>命令后可以跟零个或多个<var>flags</var> ：</p>
<dl compact>
<dt><code>g</code></dt>
<dd><a name="index-Global-substitution"></a>
<a name="index-Replacing-all-text-matching-regexp-in-a-line"></a>
<p>将替换项应用于<em>所有</em>匹配项<var>regexp</var> ，而不仅仅是第一个。
</p>
</dd>
<dt><code><var>number</var></code></dt>
<dd><a name="index-Replacing-only-nth-match-of-regexp-in-a-line"></a>
<p>仅更换<var>number</var>第的比赛<var>regexp</var> 。
</p>
<a name="index-GNU-extensions_002c-g-and-number-modifier"></a>
<p>互动<code>s</code>命令<a name="index-Mixing-g-and-number-modifiers-in-the-s-command"></a>注意：当您混合使用<small>POSIX</small>标准时，没有指定<small>POSIX</small>标准<code>g</code>和<var>number</var>修饰符，目前尚无广泛共识<code>sed</code>实现。对于GNU <code>sed</code> ，则互动定义为：忽略<var>number</var> th，然后匹配并替换所有来自<var>number</var>继续。
</p>
</dd>
<dt><code>p</code></dt>
<dd><a name="index-Text_002c-printing-after-substitution"></a>
<p>如果进行了替换，则打印新的图案空间。
</p>
<p>注意：当<code>p</code>和<code>e</code>如果指定了选项，则两者的相对顺序会产生非常不同的结果。一般来说， <code>ep</code> （先评估然后再打印）是您想要的，但是反过来进行操作对于调试很有用。因此，当前版本的GNU <code>sed</code>特别解释了<code>p</code>之前和之后的选项<code>e</code> ，在评估前后打印图案空间，而通常情况下， <code>s</code>命令只显示一次效果。尽管已记录此行为，但在将来的版本中可能会更改。
</p>
</dd>
<dt><code>w <var>filename</var></code></dt>
<dd><a name="index-Text_002c-writing-to-a-file-after-substitution"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file-1"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstderr-file"></a>
<p>如果进行了替换，则将结果写到命名文件中。作为一个GNU <code>sed</code>扩展名，两个特殊值<var>filename</var>支持： <samp>/dev/stderr</samp> ，将结果写入标准错误，以及<samp>/dev/stdout</samp> ，它会写入标准输出。 <a name="DOCF3" href="#FOOT3"><sup>3</sup></a>
</p>
</dd>
<dt><code>e</code></dt>
<dd><a name="index-Evaluate-Bourne_002dshell-commands_002c-after-substitution"></a>
<a name="index-Subprocesses"></a>
<a name="index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands"></a>
<a name="index-GNU-extensions_002c-subprocesses"></a>
<p>此命令允许将来自Shell命令的输入通过管道传递到模式空间。如果进行了替换，则将执行在模式空间中找到的命令，并将模式空间替换为其输出。尾随换行符被禁止；如果要执行的命令包含<small>NUL</small>字符，则结果不确定。这是一个GNU <code>sed</code>延期。
</p>
</dd>
<dt><code>I</code></dt>
<dt><code>i</code></dt>
<dd><a name="index-GNU-extensions_002c-I-modifier"></a>
<a name="index-Case_002dinsensitive-matching"></a>
<p>的<code>I</code>正则表达式匹配的修饰符是GNU扩展，它使<code>sed</code>比赛<var>regexp</var>以不区分大小写的方式。
</p>
</dd>
<dt><code>M</code></dt>
<dt><code>m</code></dt>
<dd><a name="index-GNU-extensions_002c-M-modifier"></a>
<p>的<code>M</code>正则表达式匹配的修饰符是GNU <code>sed</code>扩展，指导GNU <code>sed</code>在<cite>多行</cite>模式下匹配正则表达式。修饰符导致<code>^</code>和<code>$</code> （除了正常行为外）分别匹配换行符之后的空字符串和换行符之前的空字符串。有特殊的字符序列（ <code>\`</code>和<code>\'</code> ），始终匹配缓冲区的开头或结尾。此外，在多行模式下，句点字符与换行符不匹配。
</p>

</dd>
</dl>

<hr>
<a name="Common-Commands"></a>
<div class="header">
<p>下一个： <a href="#Other-Commands" rel="next" accesskey="n">其他命令</a> ，上一个： <a href="#The-_0022s_0022-Command" rel="prev" accesskey="p">“ s”命令</a> ，上一个： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Often_002dUsed-Commands"></a>
<h3 class="section">3.4常用命令</h3>

<p>如果您使用<code>sed</code>完全，您很可能想知道这些命令。
</p>
<dl compact>
<dt><code>#</code></dt>
<dd><p>[不允许使用地址。]
</p>
<a name="index-_0023-_0028comments_0029"></a>
<a name="index-Comments_002c-in-scripts"></a>
<p>的<code>#</code>角色开始评论；注释一直持续到下一个换行符为止。
</p>
<a name="index-Portability_002c-comments"></a>
<p>如果您担心可移植性，请注意<code>sed</code> （不符合<small>POSIX</small> ）可能仅支持一个单行注释，然后仅在脚本的第一个字符为<code>#</code> 。
</p>
<a name="index-_002dn_002c-forcing-from-within-a-script"></a>
<a name="index-Caveat-_002d_002d_002d-_0023n-on-first-line"></a>
<p>警告：如果前两个字符<code>sed</code>脚本是<code>#n</code> ，然后<samp>-n</samp> （无自动打印）选项是强制的。如果您想在脚本的第一行中添加注释，并且该注释以字母' <samp>n</samp> '并且您不希望出现这种情况，那么请确保使用大写字母' <samp>N</samp> '，或在'之前至少留一个空格<samp>n</samp> '。
</p>
</dd>
<dt><code>q [<var>exit-code</var>]</code></dt>
<dd><a name="index-q-_0028quit_0029-command"></a>
<a name="index-GNU-extensions_002c-returning-an-exit-code"></a>
<a name="index-Quitting"></a>
<p>出口<code>sed</code>无需处理更多命令或输入。
</p>
<p>示例：打印第二行后停止：</p><div class="example">
<pre class="example">$ seq 3 | sed 2q
1
2
</pre></div>

<p>此命令仅接受一个地址。请注意，如果未使用自动打印功能禁用自动打印，则会打印当前图案空间。 <samp>-n</samp>选项。可以从中返回退出代码的功能<code>sed</code>脚本是一个GNU <code>sed</code>延期。
</p>
<p>另请参见GNU <code>sed</code>延期<code>Q</code>不打印当前模式空间而静默退出的命令。
</p>
</dd>
<dt><code>d</code></dt>
<dd><a name="index-d-_0028delete_0029-command"></a>
<a name="index-Text_002c-deleting"></a>
<p>删除模式空间；立即开始下一个周期。
</p>
<p>示例：删除第二个输入行：</p><div class="example">
<pre class="example">$ seq 3 | sed 2d
1
3
</pre></div>

</dd>
<dt><code>p</code></dt>
<dd><a name="index-p-_0028print_0029-command"></a>
<a name="index-Text_002c-printing"></a>
<p>打印出图案空间（至标准输出）。此命令通常仅与<samp>-n</samp>命令行选项。
</p>
<p>示例：仅打印第二行输入：</p><div class="example">
<pre class="example">$ seq 3 | sed -n 2p
2
</pre></div>

</dd>
<dt><code>n</code></dt>
<dd><a name="index-n-_0028next_002dline_0029-command"></a>
<a name="index-Next-input-line_002c-replace-pattern-space-with"></a>
<a name="index-Read-next-input-line"></a>
<p>如果未禁用自动打印，请打印图案空间，然后无论如何用下一行输入替换图案空间。如果没有更多输入，则<code>sed</code>退出而不处理任何其他命令。
</p>
<p>该命令对于跳过行很有用（例如，每N行处理一次）。
</p>
<p>示例：在每第3行上执行替换（即两个<code>n</code>命令跳过两行）：</p><div class="example">
<pre class="example">$ seq 6 | sed 'n;n;s/./x/'
1
2
x
4
5
x
</pre></div>

<p>GNU <code>sed</code>提供的扩展地址语法为<var>first</var> 〜 <var>step</var>达到相同的结果：</p>
<div class="example">
<pre class="example">$ seq 6 | sed '0~3s/./x/'
1
2
x
4
5
x
</pre></div>



</dd>
<dt><code>{ <var>commands</var> }</code></dt>
<dd><a name="index-_007b_007d-command-grouping"></a>
<a name="index-Grouping-commands"></a>
<a name="index-Command-groups"></a>
<p>一组命令之间可以包含<code>{</code>和<code>}</code>字符。当您希望一组命令由单个地址（或地址范围）匹配触发时，此功能特别有用。
</p>
<p>示例：执行替换，然后打印第二个输入行：</p><div class="example">
<pre class="example">$ seq 3 | sed -n '2{s/2/X/ ; p}'
X
</pre></div>

</dd>
</dl>


<hr>
<a name="Other-Commands"></a>
<div class="header">
<p>下一篇： <a href="#Programming-Commands" rel="next" accesskey="n">编程命令</a> ，上一篇： <a href="#Common-Commands" rel="prev" accesskey="p">常用命令</a> ，上一篇： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Less-Frequently_002dUsed-Commands"></a>
<h3 class="section">3.5较少使用的命令</h3>

<p>尽管使用频率可能比上一节中的少，但其中一些很小但有用<code>sed</code>可以使用这些命令来构建脚本。
</p>
<dl compact>
<dt><code>y/<var>source-chars</var>/<var>dest-chars</var>/</code></dt>
<dd><a name="index-y-_0028transliterate_0029-command"></a>
<a name="index-Transliteration"></a>
<p>音译模式空间中与任何<var>source-chars</var>带有相应的字符<var>dest-chars</var> 。
</p>
<p>示例：音译“ <samp>a-j</samp> '成' <samp>0-9</samp> '：</p><div class="example">
<pre class="example">$ echo hello world | sed 'y/abcdefghij/0123456789/'
74llo worl3
</pre></div>

<p>（ <code>/</code>任意给定范围内的任何其他单个字符可以统一替换这些字符<code>y</code>命令。）
</p>
<p>的实例<code>/</code> （或使用其他任何字符代替）， <code>\</code> ，否则换行符可能会出现在<var>source-chars</var>要么<var>dest-chars</var>列表，并提供每个实例的转义<code>\</code> 。的<var>source-chars</var>和<var>dest-chars</var>列表<em>必须</em>包含相同数量的字符（转义后）。
</p>
<p>见<code>tr</code>来自GNU coreutils的命令以实现类似功能。
</p>
</dd>
<dt><code>a <var>text</var></code></dt>
<dd><p>追加中<var>text</var>在一行之后。这是对标准的GNU扩展<code>a</code>命令-有关详细信息，请参见下文。
</p>
<p>示例：添加单词“ <samp>hello</samp> '在第二行之后：</p><div class="example">
<pre class="example">$ seq 3 | sed '2a hello'
1
2
hello
3
</pre></div>

<p>后面的空白<code>a</code>命令被忽略。读取要添加的文本，直到该行的末尾。
</p>

</dd>
<dt><code>a\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-a-_0028append-text-lines_0029-command"></a>
<a name="index-Appending-text-after-a-line"></a>
<a name="index-Text_002c-appending"></a>
<p>追加中<var>text</var>在一行之后。
</p>
<p>示例：添加“ <samp>hello</samp> '在第二行之后（-|表示打印输出行）：</p><div class="example">
<pre class="example">$ seq 3 | sed '2a\
hello'
-|1
-|2
-|hello
-|3
</pre></div>

<p>的<code>a</code>命令使该命令后的文本行排队（但每行最后一个以<code>\</code> ，将其从输出中移除）以在当前周期结束时或在读取下一条输入行时输出。
</p>
<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands"></a>
<p>作为GNU扩展，此命令接受两个地址。
</p>
<p>中的转义序列<var>text</var>已处理，因此您应该使用<code>\\</code>在<var>text</var>打印单个反斜杠。
</p>
<p>命令在最后一行之后恢复，没有反斜杠（ <code>\</code> ）-' <samp>world</samp>在以下示例中：</p><div class="example">
<pre class="example">$ seq 3 | sed '2a\
hello\
world
3s/./X/'
-|1
-|2
-|hello
-|world
-|X
</pre></div>

<p>作为GNU扩展， <code>a</code>命令和<var>text</var>可以分为两个<code>-e</code>参数，可简化脚本编写：</p><div class="example">
<pre class="example">$ seq 3 | sed -e '2a\' -e hello
1
2
hello
3

$ sed -e '2a\' -e &quot;$VAR&quot;
</pre></div>

</dd>
<dt><code>i <var>text</var></code></dt>
<dd><p>插入<var>text</var>在一行之前。这是对标准的GNU扩展<code>i</code>命令-有关详细信息，请参见下文。
</p>
<p>示例：插入单词“ <samp>hello</samp> '在第二行之前：</p><div class="example">
<pre class="example">$ seq 3 | sed '2i hello'
1
hello
2
3
</pre></div>

<p>后面的空白<code>i</code>命令被忽略。读取要添加的文本，直到该行的末尾。
</p>
<a name="insert-command"></a></dd>
<dt><code>i\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-i-_0028insert-text-lines_0029-command"></a>
<a name="index-Inserting-text-before-a-line"></a>
<a name="index-Text_002c-insertion"></a>
<p>立即输出跟随此命令的文本行。
</p>
<p>示例：插入“ <samp>hello</samp> '在第二行之前（-|表示打印输出行）：</p><div class="example">
<pre class="example">$ seq 3 | sed '2i\
hello'
-|1
-|hello
-|2
-|3
</pre></div>

<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-1"></a>
<p>作为GNU扩展，此命令接受两个地址。
</p>
<p>中的转义序列<var>text</var>已处理，因此您应该使用<code>\\</code>在<var>text</var>打印单个反斜杠。
</p>
<p>命令在最后一行之后恢复，没有反斜杠（ <code>\</code> ）-' <samp>world</samp>在以下示例中：</p><div class="example">
<pre class="example">$ seq 3 | sed '2i\
hello\
world
s/./X/'
-|X
-|hello
-|world
-|X
-|X
</pre></div>

<p>作为GNU扩展， <code>i</code>命令和<var>text</var>可以分为两个<code>-e</code>参数，可简化脚本编写：</p><div class="example">
<pre class="example">$ seq 3 | sed -e '2i\' -e hello
1
hello
2
3

$ sed -e '2i\' -e &quot;$VAR&quot;
</pre></div>

</dd>
<dt><code>c <var>text</var></code></dt>
<dd><p>将行替换为<var>text</var> 。这是对标准的GNU扩展<code>c</code>命令-有关详细信息，请参见下文。
</p>
<p>示例：将第二行到第9行替换为“ <samp>hello</samp> '：</p><div class="example">
<pre class="example">$ seq 10 | sed '2,9c hello'
1
hello
10
</pre></div>

<p>后面的空白<code>c</code>命令被忽略。读取要添加的文本，直到该行的末尾。
</p>
</dd>
<dt><code>c\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-c-_0028change-to-text-lines_0029-command"></a>
<a name="index-Replacing-selected-lines-with-other-text"></a>
<p>删除与地址或地址范围匹配的行，并输出跟随此命令的文本行。
</p>
<p>示例：将第二行到第四行替换为“ <samp>hello</samp> '和' <samp>world</samp> '（-|表示打印的输出行）：</p><div class="example">
<pre class="example">$ seq 5 | sed '2,4c\
hello\
world'
-|1
-|hello
-|world
-|5
</pre></div>

<p>如果没有给出地址，则替换每一行。
</p>
<p>执行完此命令后，将开始一个新的循环，因为将删除模式空间。在以下示例中， <code>c</code>开始一个新的循环，并且不对替换的文本执行替换命令：</p>
<div class="example">
<pre class="example">$ seq 3 | sed '2c\
hello
s/./X/'
-|X
-|hello
-|X
</pre></div>

<p>作为GNU扩展， <code>c</code>命令和<var>text</var>可以分为两个<code>-e</code>参数，可简化脚本编写：</p><div class="example">
<pre class="example">$ seq 3 | sed -e '2c\' -e hello
1
hello
3

$ sed -e '2c\' -e &quot;$VAR&quot;
</pre></div>


</dd>
<dt><code>=</code></dt>
<dd><a name="index-_003d-_0028print-line-number_0029-command"></a>
<a name="index-Printing-line-number"></a>
<a name="index-Line-number_002c-printing"></a>
<p>打印出当前输入行号（带有换行符）。
</p>
<div class="example">
<pre class="example">$ printf '%s\n' aaa bbb ccc | sed =
1
aaa
2
bbb
3
ccc
</pre></div>

<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-2"></a>
<p>作为GNU扩展，此命令接受两个地址。
</p>



</dd>
<dt><code>l <var>n</var></code></dt>
<dd><a name="index-l-_0028list-unambiguously_0029-command"></a>
<a name="index-List-pattern-space"></a>
<a name="index-Printing-text-unambiguously"></a>
<a name="index-Line-length_002c-setting-1"></a>
<a name="index-GNU-extensions_002c-setting-line-length"></a>
<p>以明确的形式打印图案空间：不可打印的字符（以及<code>\</code>字符）以C样式转义形式打印；长行被分割，尾随<code>\</code>表示拆分的字符；每行的末尾标有<code>$</code> 。
</p>
<p><var>n</var>指定所需的换行长度；长度为0（零）表示永不换行。如果省略，则使用命令行上指定的默认值。的<var>n</var>参数是一个GNU <code>sed</code>延期。
</p>
</dd>
<dt><code>r <var>filename</var></code></dt>
<dd>
<a name="index-r-_0028read-file_0029-command"></a>
<a name="index-Read-text-from-a-file"></a>
<p>读取文件<var>filename</var> 。例：</p>
<div class="example">
<pre class="example">$ seq 3 | sed '2r/etc/hostname'
1
2
fencepost.gnu.org
3
</pre></div>

<a name="index-GNU-extensions_002c-_002fdev_002fstdin-file"></a>
<p>排队的内容<var>filename</var>在当前周期结束时或在读取下一个输入行时将其读取并插入到输出流中。请注意，如果<var>filename</var>无法读取，则将其视为空文件，没有任何错误指示。
</p>
<p>作为一个GNU <code>sed</code>扩展，特殊价值<samp>/dev/stdin</samp>支持文件名，该文件名读取标准输入的内容。
</p>
<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-3"></a>
<p>作为GNU扩展，此命令接受两个地址。然后，将重新读取文件并将其插入每个寻址行。
</p>
</dd>
<dt><code>w <var>filename</var></code></dt>
<dd><a name="index-w-_0028write-file_0029-command"></a>
<a name="index-Write-to-a-file"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file-2"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstderr-file-1"></a>
<p>将模式空间写入<var>filename</var> 。作为一个GNU <code>sed</code>扩展名，两个特殊值<var>filename</var>支持： <samp>/dev/stderr</samp> ，将结果写入标准错误，以及<samp>/dev/stdout</samp> ，它会写入标准输出。 <a name="DOCF4" href="#FOOT4"><sup>4</sup></a>
</p>
<p>在读取第一行输入之前，将创建（或截断）该文件。所有<code>w</code>命令（包括<code>w</code>标记成功<code>s</code>命令）指的是相同的<var>filename</var>输出而不关闭并重新打开文件。
</p>
</dd>
<dt><code>D</code></dt>
<dd><a name="index-D-_0028delete-first-line_0029-command"></a>
<a name="index-Delete-first-line-from-pattern-space"></a>
<p>如果模式空间不包含换行符，则开始正常的新循环，就像<code>d</code>命令已发出。否则，删除模式空间中的文本，直到第一行换行，然后使用结果模式空间重新开始循环，而无需读取新的输入行。
</p>
</dd>
<dt><code>N</code></dt>
<dd><a name="index-N-_0028append-Next-line_0029-command"></a>
<a name="index-Next-input-line_002c-append-to-pattern-space"></a>
<a name="index-Append-next-input-line-to-pattern-space"></a>
<p>在模式空间中添加换行符，然后将输入的下一行追加到模式空间中。如果没有更多输入，则<code>sed</code>退出而不处理任何其他命令。
</p>
<p>什么时候<samp>-z</samp>使用的是零字节（ascii' <samp>NUL</samp> '字符）添加在两行之间（而不是新行）。
</p>
<p>默认<code>sed</code>如果没有“下一个”输入行，则不会终止。这是一个GNU扩展，可以通过以下方式禁用<samp>--posix</samp> 。请参阅<a href="#N_005fcommand_005flast_005fline">最后一行上的N命令</a> 。
</p>

</dd>
<dt><code>P</code></dt>
<dd><a name="index-P-_0028print-first-line_0029-command"></a>
<a name="index-Print-first-line-from-pattern-space"></a>
<p>打印出图案空间的一部分，直到第一行。
</p>
</dd>
<dt><code>h</code></dt>
<dd><a name="index-h-_0028hold_0029-command"></a>
<a name="index-Copy-pattern-space-into-hold-space"></a>
<a name="index-Replace-hold-space-with-copy-of-pattern-space"></a>
<a name="index-Hold-space_002c-copying-pattern-space-into"></a>
<p>将保留空间的内容替换为模式空间的内容。
</p>
</dd>
<dt><code>H</code></dt>
<dd><a name="index-H-_0028append-Hold_0029-command"></a>
<a name="index-Append-pattern-space-to-hold-space"></a>
<a name="index-Hold-space_002c-appending-from-pattern-space"></a>
<p>在换行符的内容后面加上换行符，然后在换行符的内容后面加上模式空间的内容。
</p>
</dd>
<dt><code>g</code></dt>
<dd><a name="index-g-_0028get_0029-command"></a>
<a name="index-Copy-hold-space-into-pattern-space"></a>
<a name="index-Replace-pattern-space-with-copy-of-hold-space"></a>
<a name="index-Hold-space_002c-copy-into-pattern-space"></a>
<p>用保留空间的内容替换模式空间的内容。
</p>
</dd>
<dt><code>G</code></dt>
<dd><a name="index-G-_0028appending-Get_0029-command"></a>
<a name="index-Append-hold-space-to-pattern-space"></a>
<a name="index-Hold-space_002c-appending-to-pattern-space"></a>
<p>在模式空间的内容上添加换行符，然后在模式空间的内容上添加保留空间的内容。
</p>
</dd>
<dt><code>x</code></dt>
<dd><a name="index-x-_0028eXchange_0029-command"></a>
<a name="index-Exchange-hold-space-with-pattern-space"></a>
<a name="index-Hold-space_002c-exchange-with-pattern-space"></a>
<p>交换保留空间和模式空间的内容。
</p>
</dd>
</dl>


<hr>
<a name="Programming-Commands"></a>
<div class="header">
<p>下一页： <a href="#Extended-Commands" rel="next" accesskey="n">扩展命令</a> ，前一页： <a href="#Other-Commands" rel="prev" accesskey="p">其他命令</a> ，最多： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Commands-for-sed-gurus"></a>
<h3 class="section">3.6命令<code>sed</code>大师</h3>

<p>在大多数情况下，使用这些命令表明，您可能最好在以下方面进行编程： <code>awk</code>或Perl。但是偶尔有人会坚持<code>sed</code> ，这些命令可以使人编写复杂的脚本。
</p>
<a name="index-Flow-of-control-in-scripts"></a>
<dl compact>
<dt><code>: <var>label</var></code></dt>
<dd><p>[不允许使用地址。]
</p>
<a name="index-_003a-_0028label_0029-command"></a>
<a name="index-Labels_002c-in-scripts"></a>
<p>指定位置<var>label</var>用于分支命令。在所有其他方面，禁止操作。
</p>
</dd>
<dt><code>b <var>label</var></code></dt>
<dd><a name="index-b-_0028branch_0029-command"></a>
<a name="index-Branch-to-a-label_002c-unconditionally"></a>
<a name="index-Goto_002c-in-scripts"></a>
<p>无条件分支到<var>label</var> 。的<var>label</var>可以省略，在这种情况下，下一个周期开始。
</p>
</dd>
<dt><code>t <var>label</var></code></dt>
<dd><a name="index-t-_0028test-and-branch-if-successful_0029-command"></a>
<a name="index-Branch-to-a-label_002c-if-s_002f_002f_002f-succeeded"></a>
<a name="index-Conditional-branch"></a>
<p>分支到<var>label</var>只有成功了<code>s</code>从读取最后一条输入行或采用条件分支以来的结果是不可读的。的<var>label</var>可以省略，在这种情况下，下一个周期开始。
</p>
</dd>
</dl>

<hr>
<a name="Extended-Commands"></a>
<div class="header">
<p>下一篇： <a href="#Multiple-commands-syntax" rel="next" accesskey="n">多种命令语法</a> ，上一篇： <a href="#Programming-Commands" rel="prev" accesskey="p">编程命令</a> ，上一篇： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Commands-Specific-to-GNU-sed"></a>
<h3 class="section">3.7特定于GNU的命令<code>sed</code></h3>

<p>这些命令特定于GNU <code>sed</code> ，因此必须谨慎使用它们，并且仅在确定阻碍可移植性不是邪恶的时候使用。他们允许您检查GNU <code>sed</code>扩展或执行经常需要但标准不支持的任务<code>sed</code> s。
</p>
<dl compact>
<dt><code>e [<var>command</var>]</code></dt>
<dd><a name="index-e-_0028evaluate_0029-command"></a>
<a name="index-Evaluate-Bourne_002dshell-commands"></a>
<a name="index-Subprocesses-1"></a>
<a name="index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands-1"></a>
<a name="index-GNU-extensions_002c-subprocesses-1"></a>
<p>此命令允许将来自Shell命令的输入通过管道传递到模式空间。没有参数， <code>e</code>命令执行在模式空间中找到的命令，并用输出替换模式空间；尾随换行符被取消。
</p>
<p>如果指定了参数，则改为<code>e</code> command将其解释为命令，并将其输出发送到输出流。该命令可以跨多行运行，除了最后一行以外都以反斜杠结尾。
</p>
<p>在这两种情况下，如果要执行的命令包含<small>NUL</small>字符，结果都是不确定的。
</p>
<p>请注意，与<code>r</code>命令，命令的输出将立即打印；的<code>r</code>该命令将输出延迟到当前周期的末尾。
</p>
</dd>
<dt><code>F</code></dt>
<dd><a name="index-F-_0028File-name_0029-command"></a>
<a name="index-Printing-file-name"></a>
<a name="index-File-name_002c-printing"></a>
<p>打印出当前输入文件的文件名（以换行符结尾）。
</p>
</dd>
<dt><code>Q [<var>exit-code</var>]</code></dt>
<dd><p>此命令仅接受一个地址。
</p>
<a name="index-Q-_0028silent-Quit_0029-command"></a>
<a name="index-GNU-extensions_002c-quitting-silently"></a>
<a name="index-GNU-extensions_002c-returning-an-exit-code-1"></a>
<a name="index-Quitting-1"></a>
<p>该命令与<code>q</code> ，但不会打印图案空间的内容。喜欢<code>q</code> ，它提供了将退出代码返回给调用者的功能。
</p>
<p>此命令很有用，因为完成此看似微不足道的功能的唯一替代方法是使用<samp>-n</samp>选项（可能会不必要地使脚本复杂化）或使用以下代码段，这会浪费时间，因为读取整个文件没有任何可见的效果：</p>
<div class="example">
<pre class="example">:eat
$d       <i><span class="roman">Quit silently on the last line</span></i>
N        <i><span class="roman">Read another line, silently</span></i>
g        <i><span class="roman">Overwrite pattern space each time to save memory</span></i>
b eat
</pre></div>

</dd>
<dt><code>R <var>filename</var></code></dt>
<dd><a name="index-R-_0028read-line_0029-command"></a>
<a name="index-Read-text-from-a-file-1"></a>
<a name="index-GNU-extensions_002c-reading-a-file-a-line-at-a-time"></a>
<a name="index-GNU-extensions_002c-R-command"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdin-file-1"></a>
<p>排队一行<var>filename</var>在当前周期结束时或在读取下一个输入行时将其读取并插入到输出流中。请注意，如果<var>filename</var>无法读取，或者如果到达末尾，则不添加任何行，没有任何错误指示。
</p>
<p>与<code>r</code>命令，特殊值<samp>/dev/stdin</samp>支持文件名，该文件名从标准输入中读取一行。
</p>
</dd>
<dt><code>T <var>label</var></code></dt>
<dd><a name="index-T-_0028test-and-branch-if-failed_0029-command"></a>
<a name="index-GNU-extensions_002c-branch-if-s_002f_002f_002f-failed"></a>
<a name="index-Branch-to-a-label_002c-if-s_002f_002f_002f-failed"></a>
<a name="index-Conditional-branch-1"></a>
<p>分支到<var>label</var>只有没有成功<code>s</code>自读取最后一条输入行或采用条件分支以来的所有错误。的<var>label</var>可以省略，在这种情况下，下一个周期开始。
</p>
</dd>
<dt><code>v <var>version</var></code></dt>
<dd><a name="index-v-_0028version_0029-command"></a>
<a name="index-GNU-extensions_002c-checking-for-their-presence"></a>
<a name="index-Requiring-GNU-sed"></a>
<p>该命令不执行任何操作，但是使<code>sed</code>如果GNU失败<code>sed</code>不支持扩展，仅仅是因为其他版本的<code>sed</code>不要实现它。另外，您可以指定<code>sed</code>您的脚本要求的，例如<code>4.0.5</code> 。默认是<code>4.0</code>因为这是实现此命令的第一个版本。
</p>
<p>该命令启用所有GNU扩展，即使<code>POSIXLY_CORRECT</code>设置在环境中。
</p>
</dd>
<dt><code>W <var>filename</var></code></dt>
<dd><a name="index-W-_0028write-first-line_0029-command"></a>
<a name="index-Write-first-line-to-a-file"></a>
<a name="index-GNU-extensions_002c-writing-first-line-to-a-file"></a>
<p>将模式空间的一部分写入给定文件名，直到第一行。一切都说下了<code>w</code>关于文件处理的命令也保存在这里。
</p>
</dd>
<dt><code>z</code></dt>
<dd><a name="index-z-_0028Zap_0029-command"></a>
<a name="index-GNU-extensions_002c-emptying-pattern-space"></a>
<a name="index-Emptying-pattern-space"></a>
<p>该命令清空模式空间的内容。通常与“ <samp>s/.*//</samp> ”，但效率更高，并且可以在输入流中存在无效的多字节序列的情况下工作。<small>POSIX</small>要求此类序列<em>不得</em>与' <samp>.</samp> '，因此没有便携式清除方式<code>sed</code>在大多数多字节语言环境（包括UTF-8语言环境）中，脚本中间的缓冲区。
</p></dd>
</dl>


<hr>
<a name="Multiple-commands-syntax"></a>
<div class="header">
<p>上一页： <a href="#Extended-Commands" rel="prev" accesskey="p">扩展命令</a> ，向上： <a href="#sed-scripts" rel="up" accesskey="u">sed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Multiple-commands-syntax-1"></a>
<h3 class="section">3.8多命令语法</h3>


<p>有几种方法可以在一个命令中指定多个命令<code>sed</code>程序。
</p>
<p>从文件运行sed脚本时（使用<samp>-f</samp>选项）。
</p>
<p>在命令行上，所有<code>sed</code>命令可以用换行符分隔。或者，您可以将每个命令指定为<samp>-e</samp>选项：</p>
<div class="example">
<pre class="example">$ seq 6 | sed '1d
3d
5d'
2
4
6

$ seq 6 | sed -e 1d -e 3d -e 5d
2
4
6
</pre></div>

<p>分号（' <samp>;</samp> '）可用于分隔最简单的命令：</p>
<div class="example">
<pre class="example">$ seq 6 | sed '1d;3d;5d'
2
4
6
</pre></div>

<p>的<code>{</code> ， <code>}</code> ， <code>b</code> ， <code>t</code> ， <code>T</code> ， <code>:</code>命令可以用分号分隔（这是不可移植的GNU <code>sed</code>延期）。
</p>
<div class="example">
<pre class="example">$ seq 4 | sed '{1d;3d}'
2
4

$ seq 6 | sed '{1d;3d};5d'
2
4
6
</pre></div>

<p>用于的标签<code>b</code> ， <code>t</code> ， <code>T</code> ， <code>:</code>读取命令直到分号。开头和结尾的空格将被忽略。在下面的示例中，标签为“ <samp>x</samp> '。第一个示例适用于GNU <code>sed</code> 。第二个是便携式的等效项。有关分支和标签的更多信息，请参见<a href="#Branching-and-flow-control">分支和流控制</a> 。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed '/1/b x ; s/^/=/ ; :x ; 3d'
1
=2

$ seq 3 | sed -e '/1/bx' -e 's/^/=/' -e ':x' -e '3d'
1
=2
</pre></div>



<a name="Commands-Requiring-a-newline"></a>
<h4 class="subsection">3.8.1需要换行符的命令</h4>

<p>以下命令不能用分号分隔，并且需要换行符：</p>
<dl compact>
<dt><code>a</code> ， <code>c</code> ， <code>i</code> （追加/更改/插入）</dt>
<dd>
<p>以下所有字符<code>a</code> ， <code>c</code> ， <code>i</code>命令被当作要追加/更改/插入的文本。使用分号会导致不良结果：</p>
<div class="example">
<pre class="example">$ seq 2 | sed '1aHello ; 2d'
1
Hello ; 2d
2
</pre></div>

<p>使用以下命令分隔命令<samp>-e</samp>或换行符：</p>
<div class="example">
<pre class="example">$ seq 2 | sed -e 1aHello -e 2d
1
Hello

$ seq 2 | sed '1aHello
2d'
1
Hello
</pre></div>

<p>请注意，指定要添加的文本（' <samp>Hello</samp> '） 之后立马<code>a</code> ， <code>c</code> ， <code>i</code>本身就是一个GNU <code>sed</code>延期。便携式，符合POSIX的替代方案是：</p>
<div class="example">
<pre class="example">$ seq 2 | sed '1a\
Hello
2d'
1
Hello
</pre></div>

</dd>
<dt><code>#</code> （评论）</dt>
<dd>
<p>'之后的所有字符<samp>#</samp> '，直到下一个换行符被忽略。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed '# this is a comment ; 2d'
1
2
3


$ seq 3 | sed '# this is a comment
2d'
1
3
</pre></div>

</dd>
<dt><code>r</code> ， <code>R</code> ， <code>w</code> ， <code>W</code> （读写文件）</dt>
<dd>
<p>的<code>r</code> ， <code>R</code> ， <code>w</code> ， <code>W</code>命令解析文件名直到行尾。如果找到空格，注释或分号，它们将包含在文件名中，从而导致意外结果：</p>
<div class="example">
<pre class="example">$ seq 2 | sed '1w hello.txt ; 2d'
1
2

$ ls -log
total 4
-rw-rw-r-- 1 2 Jan 23 23:03 hello.txt ; 2d

$ cat 'hello.txt ; 2d'
1
</pre></div>

<p>注意<code>sed</code>静默忽略其中的读/写错误<code>r</code> ， <code>R</code> ， <code>w</code> ， <code>W</code>命令（例如丢失的文件）。在以下示例中， <code>sed</code>尝试读取名为“ <samp><samp>hello.txt ; N</samp></samp> '。该文件丢失，错误被忽略：</p>
<div class="example">
<pre class="example">$ echo x | sed '1rhello.txt ; N'
x
</pre></div>

</dd>
<dt><code>e</code> （命令执行）</dt>
<dd>
<p>后面的任何字符<code>e</code>命令，直到行尾将被发送到外壳。如果找到空格，注释或分号，它们将包含在shell命令中，从而导致意外结果：</p>
<div class="example">
<pre class="example">$ echo a | sed '1e touch foo#bar'
a

$ ls -1
foo#bar

$ echo a | sed '1e touch foo ; s/a/b/'
sh: 1: s/a/b/: not found
a
</pre></div>


</dd>
<dt><code>s///[we]</code> （用<code>e</code>要么<code>w</code>标志）</dt>
<dd>
<p>在替代命令中， <code>w</code>标志将替换结果写入文件，然后<code>e</code>标志将替换结果作为shell命令执行。与<code>r/R/w/W/e</code>命令，这些命令必须以换行符终止。如果找到空格，注释或分号，它们将包含在shell命令或文件名中，从而导致意外结果：</p>
<div class="example">
<pre class="example">$ echo a | sed 's/a/b/w1.txt#foo'
b

$ ls -1
1.txt#foo
</pre></div>

</dd>
</dl>


<hr>
<a name="sed-addresses"></a>
<div class="header">
<p>下一篇： <a href="#sed-regular-expressions" rel="next" accesskey="n">sed正则表达式</a> ，上一篇： <a href="#sed-regular-expressions" rel="next" accesskey="n">sed</a> <a href="#sed-scripts" rel="prev" accesskey="p">脚本</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Addresses_003a-selecting-lines"></a>
<h2 class="chapter">4个地址：选择行</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Addresses-overview" accesskey="1">地址概述</a> ：</td><td>  </td><td align="left" valign="top">地址概述</td></tr>
<tr><td align="left" valign="top">• <a href="#Numeric-Addresses" accesskey="2">数字地址</a> ：</td><td>  </td><td align="left" valign="top">通过数字选择线</td></tr>
<tr><td align="left" valign="top">•正则<a href="#Regexp-Addresses" accesskey="3">表达式地址</a> ：</td><td>  </td><td align="left" valign="top">通过文本匹配选择行</td></tr>
<tr><td align="left" valign="top">• <a href="#Range-Addresses" accesskey="4">范围地址</a> ：</td><td>  </td><td align="left" valign="top">选择一系列线</td></tr>
</tbody></table>

<hr>
<a name="Addresses-overview"></a>
<div class="header">
<p>下一页： <a href="#Numeric-Addresses" rel="next" accesskey="n">数字地址</a> ，上： <a href="#sed-addresses" rel="up" accesskey="u">sed地址</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Addresses-overview-1"></a>
<h3 class="section">4.1地址概述</h3>

<a name="index-addresses_002c-numeric"></a>
<a name="index-numeric-addresses"></a>
<p>地址确定了哪条线路<code>sed</code>命令将被执行。以下命令替换单词“ <samp>hello</samp>与“ <samp>world</samp> '仅在第144行上：</p>
<div class="example">
<pre class="example">sed '144s/hello/world/' input.txt &gt; output.txt
</pre></div>



<p>如果没有给出地址，则在所有行上执行该命令。以下命令替换单词“ <samp>hello</samp>与“ <samp>world</samp>在输入文件的所有行上：</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt
</pre></div>



<a name="index-addresses_002c-regular-expression"></a>
<a name="index-regular-expression-addresses"></a>
<p>地址可以包含正则表达式以根据内容而不是行号来匹配行。以下命令替换单词“ <samp>hello</samp>与“ <samp>world</samp> '仅在包含单词'的行中<samp>apple</samp> '：</p>
<div class="example">
<pre class="example">sed '/apple/s/hello/world/' input.txt &gt; output.txt
</pre></div>



<a name="index-addresses_002c-range"></a>
<a name="index-range-addresses"></a>
<p>指定地址范围时，两个地址之间用逗号（ <code>,</code> ）。地址可以是数字，正则表达式或两者的混合。以下命令替换单词“ <samp>hello</samp>与“ <samp>world</samp> '仅在第4至17行（包括第4行）中：</p>
<div class="example">
<pre class="example">sed '4,17s/hello/world/' input.txt &gt; output.txt
</pre></div>



<a name="index-Excluding-lines"></a>
<a name="index-Selecting-non_002dmatching-lines"></a>
<a name="index-addresses_002c-negating"></a>
<a name="index-addresses_002c-excluding"></a>
<p>附加<code>!</code>地址说明末尾的字符（在命令字母之前）会否定匹配的含义。也就是说，如果<code>!</code>字符跟随一个地址或地址范围，则只会选择与地址<em>不</em>匹配的行。以下命令替换单词“ <samp>hello</samp>与“ <samp>world</samp> '仅在<em>不</em>包含单词'的行中<samp>apple</samp> '：</p>
<div class="example">
<pre class="example">sed '/apple/!s/hello/world/' input.txt &gt; output.txt
</pre></div>

<p>以下命令替换单词“ <samp>hello</samp>与“ <samp>world</samp> '仅在第1至3和18行直到输入文件的最后一行（即，不包括第4至17行）：</p>
<div class="example">
<pre class="example">sed '4,17!s/hello/world/' input.txt &gt; output.txt
</pre></div>





<hr>
<a name="Numeric-Addresses"></a>
<div class="header">
<p>下一页：正则<a href="#Regexp-Addresses" rel="next" accesskey="n">表达式地址</a> ，上一页： <a href="#Addresses-overview" rel="prev" accesskey="p">地址概述</a> ，向上： <a href="#sed-addresses" rel="up" accesskey="u">sed地址</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Selecting-lines-by-numbers"></a>
<h3 class="section">4.2通过数字选择线</h3>
<a name="index-Addresses_002c-in-sed-scripts"></a>
<a name="index-Line-selection"></a>
<a name="index-Selecting-lines-to-process"></a>

<p>地址中的<code>sed</code>脚本可以采用以下任何形式：</p><dl compact>
<dt><code><var>number</var></code></dt>
<dd><a name="index-Address_002c-numeric"></a>
<a name="index-Line_002c-selecting-by-number"></a>
<p>指定行号将仅与输入中的该行匹配。（注意<code>sed</code>除非所有输入文件连续计数行，除非<samp>-i</samp>要么<samp>-s</samp>选项。）
</p>
</dd>
<dt><code>$</code></dt>
<dd><a name="index-Address_002c-last-line"></a>
<a name="index-Last-line_002c-selecting"></a>
<a name="index-Line_002c-selecting-last"></a>
<p>该地址与输入的最后一个文件的最后一行匹配，或者在输入时匹配每个文件的最后一行。 <samp>-i</samp>要么<samp>-s</samp>选项已指定。
</p>

</dd>
<dt><code><var>first</var>~<var>step</var></code></dt>
<dd><a name="index-GNU-extensions_002c-n_007em-addresses"></a>
<p>这个GNU扩展匹配每个<var>step</var>第行以行开头<var>first</var> 。特别是，当存在非负数时，将选择行<var>n</var>这样当前行号等于<var>first</var> +（ <var>n</var> * <var>step</var> ）。因此，一个人会使用<code>1~2</code>选择奇数行并<code>0~2</code>用于偶数行；从第二行开始选择第三行， <samp>2~3</samp> '将被使用；从第十行开始选择第五行，请使用' <samp>10~5</samp> ';和' <samp>50~0</samp> '只是一种晦涩的说法<code>50</code> 。
</p>
<p>以下命令演示了步骤地址的用法：</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '0~4p'
4
8

$ seq 10 | sed -n '1~3p'
1
4
7
10
</pre></div>


</dd>
</dl>



<hr>
<a name="Regexp-Addresses"></a>
<div class="header">
<p>下一个： <a href="#Range-Addresses" rel="next" accesskey="n">范围地址</a> ，上一个： <a href="#Numeric-Addresses" rel="prev" accesskey="p">数字地址</a> ，上： <a href="#sed-addresses" rel="up" accesskey="u">sed地址</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="selecting-lines-by-text-matching"></a>
<h3 class="section">4.3通过文本匹配选择行</h3>

<p>GNU <code>sed</code>支持以下正则表达式地址。默认的正则表达式是<a href="#BRE-syntax">Basic Regular Expression（BRE）</a> 。如果<samp>-E</samp>要么<samp>-r</samp>使用选项时，正则表达式应采用<a href="#ERE-syntax">扩展正则表达式（ERE）</a>语法。请参阅<a href="#BRE-vs-ERE">BRE与ERE</a> 。</p>
<dl compact>
<dt><code>/<var>regexp</var>/</code></dt>
<dd><a name="index-Address_002c-as-a-regular-expression"></a>
<a name="index-Line_002c-selecting-by-regular-expression-match"></a>
<p>这将选择与正则表达式匹配的任何行<var>regexp</var> 。如果<var>regexp</var>本身包括任何<code>/</code>字符，每个字符必须用反斜杠（ <code>\</code> ）。
</p>
<p>以下命令在<samp>/etc/passwd</samp>以“ <samp>bash</samp> ' <a name="DOCF5" href="#FOOT5"><sup>5</sup></a> ：</p>
<div class="example">
<pre class="example">sed -n '/bash$/p' /etc/passwd
</pre></div>

<a name="index-empty-regular-expression"></a>
<a name="index-GNU-extensions_002c-modifiers-and-the-empty-regular-expression"></a>
<p>空的正则表达式' <samp>//</samp> '重复最后一个正则表达式匹配（如果将空的正则表达式传递给<code>s</code>命令）。请注意，在编译正则表达式时会评估正则表达式的修饰符，因此将其与空正则表达式一起指定是无效的。
</p>
</dd>
<dt><code>\%<var>regexp</var>%</code></dt>
<dd><p>（ <code>%</code>可以用任何其他单个字符代替。）
</p>
<a name="index-Slash-character_002c-in-regular-expressions"></a>
<p>这也匹配正则表达式<var>regexp</var> ，但允许使用与<code>/</code> 。如果<var>regexp</var>本身包含很多斜线，因为它避免了每个字母的繁琐转义<code>/</code> 。如果<var>regexp</var>本身包含任何定界符，每个定界符必须以反斜杠（ <code>\</code> ）。
</p>
<p>以下命令是等效的。他们打印以' <samp>/home/alice/documents/</samp> '：</p>
<div class="example">
<pre class="example">sed -n '/^\/home\/alice\/documents\//p'
sed -n '\%^/home/alice/documents/%p'
sed -n '\;^/home/alice/documents/;p'
</pre></div>


</dd>
<dt><code>/<var>regexp</var>/I</code></dt>
<dt><code>\%<var>regexp</var>%I</code></dt>
<dd><a name="index-GNU-extensions_002c-I-modifier-1"></a>
<a name="index-case-insensitive_002c-regular-expression"></a>
<p>的<code>I</code>正则表达式匹配的修饰符是GNU扩展，它会导致<var>regexp</var>以不区分大小写的方式进行匹配。
</p>
<p>在许多其他编程语言中，小写<code>i</code>用于不区分大小写的正则表达式匹配。但是，在<code>sed</code>的<code>i</code>用于插入命令（请参阅<a href="#insert-command">插入命令</a> ）。
</p>
<p>观察以下示例之间的差异。
</p>
<p>在这个例子中<code>/b/I</code>地址：正则表达式<code>I</code>修饰符。 <code>d</code>是删除命令：</p>
<div class="example">
<pre class="example">$ printf &quot;%s\n&quot; a b c | sed '/b/Id'
a
c
</pre></div>

<p>这里， <code>/b/</code>地址：正则表达式。
<code>i</code>是插入命令。
<code>d</code>是要插入的值。带有' <samp>d</samp>然后在匹配的行上方插入“：</p>
<div class="example">
<pre class="example">$ printf &quot;%s\n&quot; a b c | sed '/b/id'
a
d
b
c
</pre></div>

</dd>
<dt><code>/<var>regexp</var>/M</code></dt>
<dt><code>\%<var>regexp</var>%M</code></dt>
<dd><a name="index-GNU-extensions_002c-M-modifier-1"></a>
<p>的<code>M</code>正则表达式匹配的修饰符是GNU <code>sed</code>扩展，指导GNU <code>sed</code>在<cite>多行</cite>模式下匹配正则表达式。修饰符导致<code>^</code>和<code>$</code> （除了正常行为外）分别匹配换行符之后的空字符串和换行符之前的空字符串。有特殊的字符序列（ <code>\`</code>和<code>\'</code> ），始终匹配缓冲区的开头或结尾。此外，在多行模式下，句点字符与换行符不匹配。
</p></dd>
</dl>


<a name="index-regex-addresses-and-pattern-space"></a>
<a name="index-regex-addresses-and-input-lines"></a>
<p>正则表达式地址用于当前模式空间的内容。如果模式空间已更改（例如，使用<code>s///</code>命令）正则表达式匹配将对更改后的文本进行操作。
</p>
<p>在以下示例中，自动打印被禁用<samp>-n</samp> 。的<code>s/2/X/</code>命令更改包含“ <samp>2</samp> ' 至 ' <samp>X</samp> '。命令<code>/[0-9]/p</code>用数字匹配行并打印它们。因为第二行在<code>/[0-9]/</code>正则表达式，它将不匹配并且不会被打印：</p>
<div class="example">
<pre class="example">$ seq 3 | sed -n 's/2/X/ ; /[0-9]/p'
1
3
</pre></div>


<hr>
<a name="Range-Addresses"></a>
<div class="header">
<p>上一页： <a href="#Regexp-Addresses" rel="prev" accesskey="p">Regexp地址</a> ，向上： <a href="#sed-addresses" rel="up" accesskey="u">sed地址</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Range-Addresses-1"></a>
<h3 class="section">4.4范围地址</h3>

<a name="index-Range-of-lines"></a>
<a name="index-Several-lines_002c-selecting"></a>
<p>可以通过指定两个地址（用逗号（ <code>,</code> ）。地址范围匹配从第一个地址匹配的行开始，一直持续到第二个地址匹配（包括第二个地址）：</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '4,6p'
4
5
6
</pre></div>

<p>如果第二个地址是<var>regexp</var> ，然后检查结束匹配将从与第一个地址匹配的行<em>之后</em>的行开始：一个范围将始终跨越至少两行（当然，如果输入流结束，则除外）。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '4,/[0-9]/p'
4
5
</pre></div>

<p>如果第二个地址是<var>number</var>小于（或等于）与第一个地址匹配的行，则仅匹配一行：</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '4,1p'
4
</pre></div>

<a name="index-Special-addressing-forms"></a>
<a name="index-Range-with-start-address-of-zero"></a>
<a name="index-Zero_002c-as-range-start-address"></a>
<a name="index-addr1_002c_002bN"></a>
<a name="index-addr1_002c_007eN"></a>
<a name="index-GNU-extensions_002c-special-two_002daddress-forms"></a>
<a name="index-GNU-extensions_002c-0-address"></a>
<a name="index-GNU-extensions_002c-0_002caddr2-addressing"></a>
<a name="index-GNU-extensions_002c-addr1_002c_002bN-addressing"></a>
<a name="index-GNU-extensions_002c-addr1_002c_007eN-addressing"></a>
<p>GNU <code>sed</code>还支持某些特殊的两地址形式；所有这些都是GNU扩展：</p><dl compact>
<dt><code>0,/<var>regexp</var>/</code></dt>
<dd><p>行号<code>0</code>可以在地址规范中使用，例如<code>0,/<var>regexp</var>/</code>以便<code>sed</code>会尝试匹配<var>regexp</var>在第一个输入行中。换一种说法， <code>0,/<var>regexp</var>/</code>类似于<code>1,/<var>regexp</var>/</code> ，除非<var>addr2</var>匹配输入的第一行<code>0,/<var>regexp</var>/</code>表格会认为它结束了范围，而<code>1,/<var>regexp</var>/</code>形式将匹配其范围的开始，因此使范围跨越到正则表达式的<em>第二次</em>出现。
</p>
<p>请注意，这是唯一<code>0</code>地址是有道理的；没有第0行和命令<code>0</code>任何其他方式的地址都会产生错误。
</p>
<p>以下示例说明了从地址1和0开始的区别：</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '1,/[0-9]/p'
1
2

$ seq 10 | sed -n '0,/[0-9]/p'
1
</pre></div>


</dd>
<dt><code><var>addr1</var>,+<var>N</var></code></dt>
<dd><p>火柴<var>addr1</var>和<var>N</var>以下行<var>addr1</var> 。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '6,+2p'
6
7
8
</pre></div>

<p><var>addr1</var>可以是行号或正则表达式。
</p>
</dd>
<dt><code><var>addr1</var>,~<var>N</var></code></dt>
<dd><p>火柴<var>addr1</var>和下面的行<var>addr1</var>直到输入行号是的倍数的下一行<var>N</var> 。以下命令从第6行开始打印，直到下一行是4的倍数（即第8行）为止：</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '6,~4p'
6
7
8
</pre></div>

<p><var>addr1</var>可以是行号或正则表达式。
</p>
</dd>
</dl>




<hr>
<a name="sed-regular-expressions"></a>
<div class="header">
<p>下一篇： <a href="#advanced-sed" rel="next" accesskey="n">高级sed</a> ，上一篇： <a href="#sed-addresses" rel="prev" accesskey="p">sed地址</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Regular-Expressions_003a-selecting-text"></a>
<h2 class="chapter">5个正则表达式：选择文本</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Regular-Expressions-Overview" accesskey="1">正则表达式概述</a> ：</td><td>  </td><td align="left" valign="top">中的正则表达式概述<code>sed</code>
</td></tr>
<tr><td align="left" valign="top">• <a href="#BRE-vs-ERE" accesskey="2">BRE与ERE</a> ：</td><td>  </td><td align="left" valign="top">基本（BRE）和扩展（ERE）正则表达式语法</td></tr>
<tr><td align="left" valign="top">• <a href="#BRE-syntax" accesskey="3">BRE语法</a> ：</td><td>  </td><td align="left" valign="top">基本正则表达式语法概述</td></tr>
<tr><td align="left" valign="top">• <a href="#ERE-syntax" accesskey="4">ERE语法</a> ：</td><td>  </td><td align="left" valign="top">扩展正则表达式语法概述</td></tr>
<tr><td align="left" valign="top">• <a href="#Character-Classes-and-Bracket-Expressions" accesskey="5">字符类和括号表达式</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#regexp-extensions" accesskey="6">regexp扩展名</a> ：</td><td>  </td><td align="left" valign="top">其他正则表达式命令</td></tr>
<tr><td align="left" valign="top">• <a href="#Back_002dreferences-and-Subexpressions" accesskey="7">反向引用和子表达式</a> ：</td><td>  </td><td align="left" valign="top">反向引用和子表达式</td></tr>
<tr><td align="left" valign="top">• <a href="#Escapes" accesskey="8">转义</a> ：</td><td>  </td><td align="left" valign="top">指定特殊字符</td></tr>
<tr><td align="left" valign="top">• <a href="#Locale-Considerations" accesskey="9">语言环境注意事项</a> ：</td><td>  </td><td align="left" valign="top">多字节字符和语言环境注意事项</td></tr>
</tbody></table>

<hr>
<a name="Regular-Expressions-Overview"></a>
<div class="header">
<p>下一页： <a href="#BRE-vs-ERE" rel="next" accesskey="n">BRE与ERE</a> ，上： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overview-of-regular-expression-in-sed"></a>
<h3 class="section">5.1中的正则表达式概述<code>sed</code></h3>



<p>要知道如何使用<code>sed</code> ，人们应该理解正则表达式（简称<em>regexp</em> ）。正则表达式是一种从左到右与主题字符串匹配的模式。大多数字符是<em>普通</em>字符：它们以一种模式代表自己，并与相应字符匹配。中的正则表达式<code>sed</code>在两个斜杠之间指定。
</p>
<p>以下命令将打印包含单词“ <samp>hello</samp> '：</p>
<div class="example">
<pre class="example">sed -n '/hello/p'
</pre></div>

<p>上面的例子与此等效<code>grep</code>命令：</p>
<div class="example">
<pre class="example">grep 'hello'
</pre></div>

<p>正则表达式的功能来自在模式中包含替代和重复项的能力。这些通过使用<em>特殊字符</em>在模式中进行编码，这些<em>特殊字符</em>本身并不代表而是以某种特殊方式进行解释。
</p>
<p>性格<code>^</code>正则表达式中的（插入符号）匹配行的开头。性格<code>.</code> （点）匹配任何单个字符。下列<code>sed</code>命令匹配并打印以字母'开头的行<samp>b</samp> '，后跟任何单个字符，后跟字母' <samp>d</samp> '：</p>
<div class="example">
<pre class="example">$ printf &quot;%s\n&quot; abode bad bed bit bid byte body | sed -n '/^b.d/p'
bad
bed
bid
body
</pre></div>

<p>以下各节说明正则表达式中特殊字符的含义和用法。
</p>
<hr>
<a name="BRE-vs-ERE"></a>
<div class="header">
<p>下一篇： <a href="#BRE-syntax" rel="next" accesskey="n">BRE语法</a> ，上一篇： <a href="#Regular-Expressions-Overview" rel="prev" accesskey="p">正则表达式概述</a> ，上一篇： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Basic-_0028BRE_0029-and-extended-_0028ERE_0029-regular-expression"></a>
<h3 class="section">5.2基本（BRE）和扩展（ERE）正则表达式</h3>

<p>基本和扩展正则表达式是指定模式语法的两个变体。基本正则表达式（BRE）语法是<code>sed</code> （和类似的<code>grep</code> ）。使用POSIX指定<samp>-E</samp>选项 （ <samp>-r</samp> ， <samp>--regexp-extended</samp> ）以启用扩展正则表达式（ERE）语法。
</p>
<p>在GNU中<code>sed</code> ，基本和扩展正则表达式之间的唯一区别在于一些特殊字符的行为： <samp>?</samp> '，' <samp>+</samp> '，括号，大括号（' <samp>{}</samp> '）和' <samp>|</samp> '。
</p>
<p>使用基本（BRE）语法时，这些字符没有特殊含义，除非以反斜杠（' <samp>\</samp> '）;在使用扩展（ERE）语法时，它是相反的：这些字符是特殊字符，除非它们以反斜杠（' <samp>\</samp> '）。
</p>
<table>
<thead><tr><th width="28%">所需图案</th><th width="36%">基本（BRE）语法</th><th width="35%">扩展（ERE）语法</th></tr></thead>
<tbody><tr><td width="28%">文字' <samp>+</samp> ' （加号）</td><td width="36%"><div class="example">
<pre class="example">$ echo 'a+b=c' &gt; foo
$ sed -n '/a+b/p' foo
a+b=c
</pre></div></td><td width="35%"><div class="example">
<pre class="example">$ echo 'a+b=c' &gt; foo
$ sed -E -n '/a\+b/p' foo
a+b=c
</pre></div></td></tr>
<tr><td width="28%">一个或多个 ' <samp>a</samp> '字符后跟' <samp>b</samp> '（加号作为特殊的元字符）</td><td width="36%"><div class="example">
<pre class="example">$ echo aab &gt; foo
$ sed -n '/a\+b/p' foo
aab
</pre></div></td><td width="35%"><div class="example">
<pre class="example">$ echo aab &gt; foo
$ sed -E -n '/a+b/p' foo
aab
</pre></div></td></tr>
</tbody></table>




<hr>
<a name="BRE-syntax"></a>
<div class="header">
<p>下一篇： <a href="#ERE-syntax" rel="next" accesskey="n">ERE语法</a> ，上一篇： <a href="#BRE-vs-ERE" rel="prev" accesskey="p">BRE vs ERE</a> ，上一篇： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overview-of-basic-regular-expression-syntax"></a>
<h3 class="section">5.3基本正则表达式语法概述</h3>

<p>这是在中使用的正则表达式语法的简要说明<code>sed</code> 。
</p>
<dl compact>
<dt><code><var>char</var></code></dt>
<dd><p>单个普通字符匹配自己。
</p>
</dd>
<dt><code>*</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions"></a>
<p>匹配零个或多个匹配实例的序列，用于前面的正则表达式，该序列必须是普通字符，特殊字符后跟<code>\</code> ， 一种<code>.</code> ，分组的正则表达式（请参见下文）或方括号表达式。作为GNU扩展，后缀正则表达式也可以跟在后面<code>*</code> ;例如， <code>a**</code>相当于<code>a*</code> 。POSIX 1003.1-2001表示<code>*</code>当它出现在正则表达式或子表达式的开头时，它本身代表它，但是许多nonGNU实现不支持它，而可移植脚本应该使用<code>\*</code>在这些情况下。
</p></dd>
<dt><code>.</code></dt>
<dd><p>匹配任何字符，包括换行符。
</p>
</dd>
<dt><code>^</code></dt>
<dd><p>在模式空间的开头匹配空字符串，即在抑扬符之后出现的内容必须出现在模式空间的开头。
</p>
<p>在大多数脚本中，模式空间被初始化为每一行的内容（请参见<a href="#Execution-Cycle">如何<code>sed</code>作品</a> ）。因此，想到它是一个有用的简化<code>^#include</code>作为仅匹配“ <samp>#include</samp> '是上线的第一件事-例如，如果之前有空格，则匹配失败。只要未修改模式空间的原始内容（例如，使用<code>s</code>命令。
</p>
<p><code>^</code>仅在正则表达式或子表达式的开头（即，之后<code>\(</code>要么<code>\|</code> ）。可移植脚本应避免<code>^</code>但是，在子表达式的开头，因为POSIX允许将<code>^</code>在这种情况下作为普通角色。
</p>
</dd>
<dt><code>$</code></dt>
<dd><p>与...相同<code>^</code> ，但指模式空间的结尾。
<code>$</code>也仅在正则表达式或子表达式的末尾（即<code>\)</code>要么<code>\|</code> ），并且在子表达式末尾的使用不可移植。
</p>

</dd>
<dt><code>[<var>list</var>]</code></dt>
<dt><code>[^<var>list</var>]</code></dt>
<dd><p>匹配中的任何单个字符<var>list</var> ： 例如， <code>[aeiou]</code>匹配所有元音。列表可能包含类似的序列<code><var>char1</var>-<var>char2</var></code> ，它与之间（包括）之间的任何字符匹配<var>char1</var>和<var>char2</var> 。请参见<a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a> 。
</p>
</dd>
<dt><code>\+</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-1"></a>
<p>如<code>*</code> ，但匹配一个或多个。它是GNU扩展。
</p>
</dd>
<dt><code>\?</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-2"></a>
<p>如<code>*</code> ，但只匹配零或一。它是GNU扩展。
</p>
</dd>
<dt><code>\{<var>i</var>\}</code></dt>
<dd><p>如<code>*</code> ，但完全匹配<var>i</var>序列（ <var>i</var>是一个十进制整数；为了可移植性，请将其保持在0到255之间（包括两者之间）。
</p>
</dd>
<dt><code>\{<var>i</var>,<var>j</var>\}</code></dt>
<dd><p>之间的匹配<var>i</var>和<var>j</var> ，包括序列。
</p>
</dd>
<dt><code>\{<var>i</var>,\}</code></dt>
<dd><p>匹配大于或等于<var>i</var>序列。
</p>
</dd>
<dt><code>\(<var>regexp</var>\)</code></dt>
<dd><p>将内部分组<var>regexp</var>总体而言，这用于：</p>
<ul>
<li> <a name="index-GNU-extensions_002c-to-basic-regular-expressions-3"></a>应用后缀运算符，例如<code>\(abcd\)*</code> ：这将搜索零个或多个“ <samp>abcd</samp> '，而<code>abcd*</code>会搜索“ <samp>abc</samp> '随后出现零次或多次' <samp>d</samp> '。请注意，对<code>\(abcd\)*</code> POSIX 1003.1-2001要求它是必需的，但是许多非GNU实现不支持它，因此它不是通用的。

</li><li>使用反向引用（请参见下文）。
</li></ul>


</dd>
<dt><code><var>regexp1</var>\|<var>regexp2</var></code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-4"></a>
<p>匹配<var>regexp1</var>要么<var>regexp2</var> 。使用括号可以使用复杂的替代正则表达式。匹配过程从左到右依次尝试每个备选方案，并使用第一个成功的方案。它是GNU扩展。
</p>
</dd>
<dt><code><var>regexp1</var><var>regexp2</var></code></dt>
<dd><p>匹配的串联<var>regexp1</var>和<var>regexp2</var> 。串联比绑定更紧密<code>\|</code> ， <code>^</code>和<code>$</code> ，但不如其他正则表达式运算符那么严格。
</p>
</dd>
<dt><code>\<var>digit</var></code></dt>
<dd><p>符合<var>digit</var> -th <code>\(…\)</code>正则表达式中带括号的子表达式。这称为<em>反向引用</em> 。子表达式通过计算出现次数来隐式编号<code>\(</code>左到右。
</p>
</dd>
<dt><code>\n</code></dt>
<dd><p>匹配换行符。
</p>
</dd>
<dt><code>\<var>char</var></code></dt>
<dd><p>火柴<var>char</var> ，在哪里<var>char</var>是其中之一<code>$</code> ， <code>*</code> ， <code>.</code> ， <code>[</code> ， <code>\</code> ， 要么<code>^</code> 。请注意，您可以随便假定要解释的唯一的类似C的反斜杠序列是<code>\n</code>和<code>\\</code> ;特别是<code>\t</code>不可移植，并且匹配“ <samp>t</samp>在大多数实现下<code>sed</code> ，而不是制表符。
</p>
</dd>
</dl>

<a name="index-Greedy-regular-expression-matching"></a>
<p>请注意，正则表达式匹配器是贪婪的，即，尝试从左到右进行匹配，如果可能从同一字符开始两个或多个匹配，则它将选择最长的匹配器。</p>
<p>例子：</p><dl compact>
<dt>' <samp>abcdef</samp> '</dt>
<dd><p>火柴 ' <samp>abcdef</samp> '。
</p>
</dd>
<dt>' <samp>a*b</samp> '</dt>
<dd><p>匹配零个或多个' <samp>a</samp>后面跟一个' <samp>b</samp> '。例如， ' <samp>b</samp> ' 要么 ' <samp>aaaaab</samp> '。
</p>
</dd>
<dt>' <samp>a\?b</samp> '</dt>
<dd><p>火柴 ' <samp>b</samp> ' 要么 ' <samp>ab</samp> '。
</p>
</dd>
<dt>' <samp>a\+b\+</samp> '</dt>
<dd><p>匹配一个或多个“ <samp>a</samp>后跟一个或多个” <samp>b</samp>的： <samp>ab</samp> '是可能的最短匹配，但其他示例是' <samp>aaaab</samp> ' 要么 ' <samp>abbbbb</samp> ' 要么 ' <samp>aaaaaabbbbbbb</samp> '。
</p>
</dd>
<dt>' <samp>.*</samp> '</dt>
<dt>' <samp>.\+</samp> '</dt>
<dd><p>这两个都匹配字符串中的所有字符。但是，第一个匹配每个字符串（包括空字符串），而第二个仅匹配包含至少一个字符的字符串。
</p>
</dd>
<dt>' <samp>^main.*(.*)</samp> '</dt>
<dd><p>这匹配以'开头的字符串<samp>main</samp> '，然后在左括号和右括号之间加一个括号。' <samp>n</samp> '，' <samp>(</samp> '和' <samp>)</samp>不必相邻。
</p>
</dd>
<dt>' <samp>^#</samp> '</dt>
<dd><p>这匹配以'开头的字符串<samp>#</samp> '。
</p>
</dd>
<dt>' <samp>\\$</samp> '</dt>
<dd><p>这匹配以单个反斜杠结尾的字符串。regexp包含两个反斜杠，用于转义。
</p>
</dd>
<dt>' <samp>\$</samp> '</dt>
<dd><p>而是，它与由单个美元符号组成的字符串匹配，因为它已被转义。
</p>
</dd>
<dt>' <samp>[a-zA-Z0-9]</samp> '</dt>
<dd><p>在C语言环境中，它匹配任何ASCII字母或数字。
</p>
</dd>
<dt>' <samp>[^ <kbd><span class="key">TAB</span></kbd>]\+</samp> '</dt>
<dd><p>（这里<kbd><span class="key">TAB</span></kbd>代表单个制表符。）这匹配一个或多个字符的字符串，这些字符都不是空格或制表符。通常这是一个单词。
</p>
</dd>
<dt>' <samp>^\(.*\)\n\1$</samp> '</dt>
<dd><p>这将匹配一个由两个相等的子字符串组成的字符串，这些子字符串之间用换行符分隔。
</p>
</dd>
<dt>' <samp>.\{9\}A$</samp> '</dt>
<dd><p>这会匹配9个字符，后跟一个' <samp>A</samp>在行尾。
</p>
</dd>
<dt>' <samp>^.\{15\}A</samp> '</dt>
<dd><p>这与包含16个字符的字符串的开头匹配，最后一个字符为' <samp>A</samp> '。
</p>
</dd>
</dl>


<hr>
<a name="ERE-syntax"></a>
<div class="header">
<p>下一篇： <a href="#Character-Classes-and-Bracket-Expressions" rel="next" accesskey="n">字符类和括号表达式</a> ，上一篇： <a href="#BRE-syntax" rel="prev" accesskey="p">BRE语法</a> ，上一篇： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overview-of-extended-regular-expression-syntax"></a>
<h3 class="section">5.4扩展正则表达式语法概述</h3>
<a name="index-Extended-regular-expressions_002c-syntax"></a>

<p>基本和扩展正则表达式之间的唯一区别在于一些字符的行为： <samp>?</samp> '，' <samp>+</samp> '，括号，大括号（' <samp>{}</samp> '）和' <samp>|</samp> '。基本的正则表达式要求您将它们转义为特殊字符，而使用扩展的正则表达式时，如果希望它们<em>与文字字符匹配，</em>则必须转义它们。' <samp>|</samp> “在这里很特别，因为” <samp>\|</samp> '是GNU扩展-标准的基本正则表达式不提供其功能。
</p>
<p>例子：</p><dl compact>
<dt><code>abc?</code></dt>
<dd><p>成为“ <samp>abc\?</samp> '，当使用扩展的正则表达式时。它与文字字符串' <samp>abc?</samp> '。
</p>
</dd>
<dt><code>c\+</code></dt>
<dd><p>成为“ <samp>c+</samp> '，当使用扩展的正则表达式时。它匹配一个或多个“ <samp>c</samp>的。
</p>
</dd>
<dt><code>a\{3,\}</code></dt>
<dd><p>成为“ <samp>a{3,}</samp> '，当使用扩展的正则表达式时。它匹配三个或更多“ <samp>a</samp>的。
</p>
</dd>
<dt><code>\(abc\)\{2,3\}</code></dt>
<dd><p>成为“ <samp>(abc){2,3}</samp> '，当使用扩展的正则表达式时。它与“ <samp>abcabc</samp> ' 要么 ' <samp>abcabcabc</samp> '。
</p>
</dd>
<dt><code>\(abc*\)\1</code></dt>
<dd><p>成为“ <samp>(abc*)\1</samp> '，当使用扩展的正则表达式时。使用扩展的正则表达式时，仍然必须转义反向引用。
</p>
</dd>
<dt><code>a\|b</code></dt>
<dd><p>成为“ <samp>a|b</samp> '，当使用扩展的正则表达式时。它匹配 ' <samp>a</samp> ' 要么 ' <samp>b</samp> '。
</p></dd>
</dl>

<hr>
<a name="Character-Classes-and-Bracket-Expressions"></a>
<div class="header">
<p>下一篇： <a href="#regexp-extensions" rel="next" accesskey="n">regexp扩展</a> ，上一篇： <a href="#ERE-syntax" rel="prev" accesskey="p">ERE语法</a> ，上一篇： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Character-Classes-and-Bracket-Expressions-1"></a>
<h3 class="section">5.5字符类和括号表达式</h3>


<a name="index-bracket-expression"></a>
<a name="index-character-class"></a>
<p>方<em>括号表达式</em>是由'括起来的字符列表<samp>[</samp> '和' <samp>]</samp> '。它匹配该列表中的任何单个字符；如果列表的第一个字符是插入号' <samp>^</samp> '，则它匹配列表中<strong>未包含的</strong>任何字符。例如，以下命令将单词“ <samp>gray</samp> ' 要么 ' <samp>grey</samp>与“ <samp>blue</samp> '：</p>
<div class="example">
<pre class="example">sed  's/gr[ae]y/blue/'
</pre></div>

<p>括号表达式可在<a href="#BRE-syntax">基本</a>正则表达式和<a href="#ERE-syntax">扩展</a>正则表达式中使用（也就是说，无论是否使用<samp>-E</samp> / <samp>-r</samp>选项）。
</p>
<a name="index-range-expression"></a>
<p>在方括号表达式中， <em>范围表达式</em>由用连字符分隔的两个字符组成。它与在两个字符（包括两个字符）之间排序的任何单个字符匹配。在默认的C语言环境中，排序顺序是本机字符顺序。例如， ' <samp>[a-d]</samp> '等价于' <samp>[abcd]</samp> '。
</p>

<p>最后，在括号表达式中预定义了某些命名的字符类，如下所示。
</p>
<p>这些命名的类必须<em>在</em>方括号内使用。正确用法：</p><div class="example">
<pre class="example">$ echo 1 | sed 's/[[:digit:]]/X/'
X
</pre></div>

<p>不正确的用法会被较新的拒绝<code>sed</code>版本。较旧的版本接受它，但将其视为一个单括号表达式（等同于' <samp>[dgit:]</samp> '，即只有字符<var>d/g/i/t/:</var> ）：</p><div class="example">
<pre class="example"># current GNU sed versions - incorrect usage rejected
$ echo 1 | sed 's/[:digit:]/X/'
sed: character class syntax is [[:space:]], not [:space:]

# older GNU sed versions
$ echo 1 | sed 's/[:digit:]/X/'
1
</pre></div>


<a name="index-classes-of-characters"></a>
<a name="index-character-classes"></a>
<a name="index-named-character-classes"></a>
<dl compact>
<dt>' <samp>[:alnum:]</samp> '</dt>
<dd><a name="index-alnum-character-class"></a>
<a name="index-alphanumeric-characters"></a>
<p>字母数字字符： ' <samp>[:alpha:]</samp> '和' <samp>[:digit:]</samp> ';在里面 ' <samp>C</samp> '语言环境和ASCII字符编码，与' <samp>[0-9A-Za-z]</samp> '。
</p>
</dd>
<dt>' <samp>[:alpha:]</samp> '</dt>
<dd><a name="index-alpha-character-class"></a>
<a name="index-alphabetic-characters"></a>
<p>字母字符：“ <samp>[:lower:]</samp> '和' <samp>[:upper:]</samp> ';在里面 ' <samp>C</samp> '语言环境和ASCII字符编码，与' <samp>[A-Za-z]</samp> '。
</p>
</dd>
<dt>' <samp>[:blank:]</samp> '</dt>
<dd><a name="index-blank-character-class"></a>
<a name="index-blank-characters"></a>
<p>空白字符：空格和制表符。
</p>
</dd>
<dt>' <samp>[:cntrl:]</samp> '</dt>
<dd><a name="index-cntrl-character-class"></a>
<a name="index-control-characters"></a>
<p>控制字符。在ASCII中，这些字符的八进制代码为000至037，以及177（DEL）。在其他字符集中，这些字符是等效的字符（如果有）。
</p>
</dd>
<dt>' <samp>[:digit:]</samp> '</dt>
<dd><a name="index-digit-character-class"></a>
<a name="index-digit-characters"></a>
<a name="index-numeric-characters"></a>
<p>位数： <code>0 1 2 3 4 5 6 7 8 9</code> 。
</p>
</dd>
<dt>' <samp>[:graph:]</samp> '</dt>
<dd><a name="index-graph-character-class"></a>
<a name="index-graphic-characters"></a>
<p>图形字符：“ <samp>[:alnum:]</samp> '和' <samp>[:punct:]</samp> '。
</p>
</dd>
<dt>' <samp>[:lower:]</samp> '</dt>
<dd><a name="index-lower-character-class"></a>
<a name="index-lower_002dcase-letters"></a>
<p>小写字母;在里面 ' <samp>C</samp> '语言环境和ASCII字符编码，这是<code>a b c d e f g h i j k l m n o p q r s t u v w x y z</code> 。
</p>
</dd>
<dt>' <samp>[:print:]</samp> '</dt>
<dd><a name="index-print-character-class"></a>
<a name="index-printable-characters"></a>
<p>可打印字符： <samp>[:alnum:]</samp> '，' <samp>[:punct:]</samp>和空间。
</p>
</dd>
<dt>' <samp>[:punct:]</samp> '</dt>
<dd><a name="index-punct-character-class"></a>
<a name="index-punctuation-characters"></a>
<p>标点符号；在里面 ' <samp>C</samp> '语言环境和ASCII字符编码，这是<code>! " # $ % & ' ( ) * + , - . / : ; < = > ? @ [ \ ] ^ _ ` { | } ~</code> 。
</p>
</dd>
<dt>' <samp>[:space:]</samp> '</dt>
<dd><a name="index-space-character-class"></a>
<a name="index-space-characters"></a>
<a name="index-whitespace-characters"></a>
<p>空格字符： <samp>C</samp> '语言环境，这是制表符，换行符，垂直制表符，换页，回车和空格。
</p>

</dd>
<dt>' <samp>[:upper:]</samp> '</dt>
<dd><a name="index-upper-character-class"></a>
<a name="index-upper_002dcase-letters"></a>
<p>大写字母：在“ <samp>C</samp> '语言环境和ASCII字符编码，这是<code>A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</code> 。
</p>
</dd>
<dt>' <samp>[:xdigit:]</samp> '</dt>
<dd><a name="index-xdigit-character-class"></a>
<a name="index-xdigit-class"></a>
<a name="index-hexadecimal-digits"></a>
<p>十六进制数字： <code>0 1 2 3 4 5 6 7 8 9 A B C D E F a b c d e f</code> 。
</p>
</dd>
</dl>
<p>请注意，这些类名称中的方括号是符号名的一部分，并且除了界定方括号表达式的方括号外，还必须包含方括号。
</p>
<p>大多数元字符在方括号表达式内失去其特殊含义：</p>
<dl compact>
<dt>' <samp>]</samp> '</dt>
<dd><p>如果不是第一个列表项，则结束方括号表达式。因此，如果您要制作“ <samp>]</samp> '是列表项的字符，必须放在第一位。
</p>
</dd>
<dt>' <samp>-</samp> '</dt>
<dd><p>代表范围，如果它不在列表中的第一个或最后一个或范围的终点。
</p>
</dd>
<dt>' <samp>^</samp> '</dt>
<dd><p>代表不在列表中的字符。如果您想制作“ <samp>^</samp> '将列表项设置为字符，将其放置在除了第一个之外的任何位置。
</p></dd>
</dl>

<p>待办事项：合并本段（BRE部分的逐字记录）。
</p>
<a name="index-POSIXLY_005fCORRECT-behavior_002c-bracket-expressions"></a>
<p>那些角色<code>$</code> ， <code>*</code> ， <code>.</code> ， <code>[</code>和<code>\</code>通常在<var>list</var> 。例如， <code>[\*]</code>匹配“ <samp>\</samp> ' 要么 ' <samp>*</samp> '，因为<code>\</code>在这里并不特殊。但是，像<code>[.ch.]</code> ， <code>[=a=]</code>和<code>[:space:]</code>在里面很特别<var>list</var>和分别代表整理符号，等效类和字符类，并且<code>[</code>因此在内部很特别<var>list</var>当其后<code>.</code> ， <code>=</code> ， 要么<code>:</code> 。另外，不在的时候<code>POSIXLY_CORRECT</code>模式，像<code>\n</code>和<code>\t</code>被认可<var>list</var> 。请参阅<a href="#Escapes">转义</a> 。
</p>


<dl compact>
<dt>' <samp>[.</samp> '</dt>
<dd><p>表示开放式整理符号。
</p>
</dd>
<dt>' <samp>.]</samp> '</dt>
<dd><p>表示紧密整理符号。
</p>
</dd>
<dt>' <samp>[=</samp> '</dt>
<dd><p>表示开放等效类。
</p>
</dd>
<dt>' <samp>=]</samp> '</dt>
<dd><p>表示近似等价类。
</p>
</dd>
<dt>' <samp>[:</samp> '</dt>
<dd><p>代表打开的字符类符号，并且后跟有效的字符类名称。
</p>
</dd>
<dt>' <samp>:]</samp> '</dt>
<dd><p>表示封闭字符类符号。
</p></dd>
</dl>


<hr>
<a name="regexp-extensions"></a>
<div class="header">
<p>下一篇： <a href="#Back_002dreferences-and-Subexpressions" rel="next" accesskey="n">反向引用和子表达式</a> ，上<a href="#Back_002dreferences-and-Subexpressions" rel="next" accesskey="n">一篇</a> ： <a href="#Character-Classes-and-Bracket-Expressions" rel="prev" accesskey="p">字符类和括号表达式</a> ，上<a href="#Back_002dreferences-and-Subexpressions" rel="next" accesskey="n">一篇</a> ： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="regular-expression-extensions"></a>
<h3 class="section">5.6正则表达式扩展</h3>

<p>以下序列在正则表达式内具有特殊含义（用于<a href="#Regexp-Addresses">地址</a>和<code>s</code>命令）。
</p>
<p>这些可以在<a href="#BRE-syntax">基本</a>正则表达式和<a href="#ERE-syntax">扩展</a>正则表达式中使用（也就是说，无论是否使用<samp>-E</samp> / <samp>-r</samp>选项）。
</p>
<dl compact>
<dt><code>\w</code></dt>
<dd><p>匹配任何“单词”字符。“单词”字符是任何字母或数字或下划线字符。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\w/X/g'
XXX %-= XXX.
</pre></div>


</dd>
<dt><code>\W</code></dt>
<dd><p>匹配任何“非单词”字符。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\W/X/g'
abcXXXXXdefX
</pre></div>


</dd>
<dt><code>\b</code></dt>
<dd><p>匹配单词边界；也就是说，如果左侧的字符是“单词”字符，而右侧的字符是“非单词”字符，则匹配，反之亦然。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\b/X/g'
XabcX %-= XdefX.
</pre></div>


</dd>
<dt><code>\B</code></dt>
<dd><p>在单词边界处随处匹配；也就是说，如果左侧字符和右侧字符都是“单词”字符或都是“非单词”字符，则匹配。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\B/X/g'
aXbXc X%X-X=X dXeXf.X
</pre></div>


</dd>
<dt><code>\s</code></dt>
<dd><p>匹配空白字符（空格和制表符）。嵌入在模式/保持空间中的换行符也将匹配：</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\s/X/g'
abcX%-=Xdef.
</pre></div>


</dd>
<dt><code>\S</code></dt>
<dd><p>匹配非空格字符。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\S/X/g'
XXX XXX XXXX
</pre></div>


</dd>
<dt><code>\<</code></dt>
<dd><p>匹配单词的开头。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\&lt;/X/g'
Xabc %-= Xdef.
</pre></div>


</dd>
<dt><code>\></code></dt>
<dd><p>匹配单词的结尾。
</p>
<div class="example">
<pre class="example">$ echo &quot;abc %-= def.&quot; | sed 's/\&gt;/X/g'
abcX %-= defX.
</pre></div>


</dd>
<dt><code>\`</code></dt>
<dd><p>仅在模式空间的开头匹配。这不同于<code>^</code>在多行模式下。
</p>
<p>比较以下两个示例：</p>
<div class="example">
<pre class="example">$ printf &quot;a\nb\nc\n&quot; | sed 'N;N;s/^/X/gm'
Xa
Xb
Xc

$ printf &quot;a\nb\nc\n&quot; | sed 'N;N;s/\`/X/gm'
Xa
b
c
</pre></div>

</dd>
<dt><code>\'</code></dt>
<dd><p>仅在模式空间的末尾匹配。这不同于<code>$</code>在多行模式下。
</p>


</dd>
</dl>


<hr>
<a name="Back_002dreferences-and-Subexpressions"></a>
<div class="header">
<p>下一个： <a href="#Escapes" rel="next" accesskey="n">Escapes</a> ，上一个： <a href="#regexp-extensions" rel="prev" accesskey="p">regexp扩展</a> ，上一个： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Back_002dreferences-and-Subexpressions-1"></a>
<h3 class="section">5.7反向引用和子表达式</h3>
<a name="index-subexpression"></a>
<a name="index-back_002dreference"></a>

<p><em>向后引用</em>是正则表达式命令，它引用匹配的正则表达式的前一部分。反向引用以反斜杠和一位数字指定（例如，“<samp>\1</samp> '）。他们引用的正则表达式部分称为<em>subexpression</em> ，并用括号指定。
</p>
<p>在两种情况下使用反向引用和子表达式：在正则表达式搜索模式中以及在<var>replacement</var>的一部分<code>s</code>命令（请参见<a href="#Regexp-Addresses">正则表达式地址</a>和<a href="#The-_0022s_0022-Command">“ s”命令</a> ）。
</p>
<p>在正则表达式模式中，反向引用用于匹配与先前匹配的子表达式相同的内容。在以下示例中，子表达式为' <samp>.</samp> '-任何单个字符（用括号括起来都使其成为子表达式）。反向引用' <samp>\1</samp> '要求匹配与子表达式相同的内容（相同的字符）。
</p>
<p>以下命令匹配以任何字符开头的单词，后跟字母“ <samp>o</samp> '，后跟与第一个相同的字符。
</p>
<div class="example">
<pre class="example">$ sed -E -n '/^(.)o\1$/p' /usr/share/dict/words
bob
mom
non
pop
sos
tot
wow
</pre></div>

<p>多个子表达式会自动从左到右编号。此命令搜索6个字母的回文（前三个字母是3个子表达式，然后以相反的顺序跟随3个反向引用）：</p>
<div class="example">
<pre class="example">$ sed -E -n '/^(.)(.)(.)\3\2\1$/p' /usr/share/dict/words
redder
</pre></div>

<p>在里面<code>s</code>命令，可以在<var>replacement</var>引用回子表达式中的子表达式<var>regexp</var>部分。
</p>
<p>下面的示例在正则表达式中使用两个子表达式来匹配两个以空格分隔的单词。中的反向引用<var>replacement</var>部分以不同顺序打印单词：</p>
<div class="example">
<pre class="example">$ echo &quot;James Bond&quot; | sed -E 's/(.*) (.*)/The name is \2, \1 \2./'
The name is Bond, James Bond.
</pre></div>


<p>当交替使用时，如果组不参与匹配，则反向引用会使整个匹配失败。例如， ' <samp>a(.)|b\1</samp> “将不匹配” <samp>ba</samp> '。当给定多个正则表达式时<samp>-e</samp>或来自文件（“ <samp>-f <var>file</var></samp> '），反向引用是每个表达式的局部引用。
</p>

<hr>
<a name="Escapes"></a>
<div class="header">
<p>下一页： <a href="#Locale-Considerations" rel="next" accesskey="n">语言环境注意事项</a> ，上一篇： <a href="#Back_002dreferences-and-Subexpressions" rel="prev" accesskey="p">反向引用和子表达式</a> ，上<a href="#Back_002dreferences-and-Subexpressions" rel="prev" accesskey="p">一篇</a> ： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Escape-Sequences-_002d-specifying-special-characters"></a>
<h3 class="section">5.8转义序列-指定特殊字符</h3>

<a name="index-GNU-extensions_002c-special-escapes"></a>
<p>在本章之前，我们仅遇到了以下形式的转义符： <samp>\^</samp> '，告诉<code>sed</code>不是将抑扬音解释为特殊字符，而是从字面上理解它。例如， ' <samp>\*</samp> '与单个星号匹配，而不是零个或多个反斜杠。
</p>
<a name="index-POSIXLY_005fCORRECT-behavior_002c-escapes"></a>
<p>本章介绍了另一种转义符<a name="DOCF6" href="#FOOT6"><sup>6-</sup></a>即，转义符通常应用于字面意义上的字符或字符序列，并且<code>sed</code>替换为特殊字符。这提供了一种以可见方式编码图案中不可打印字符的方法。对于非印刷字符的外观没有限制<code>sed</code>脚本，但是在外壳中或通过文本编辑来准备脚本时，使用以下转义序列之一通常比使用其表示的二进制字符更容易：</p>
<p>这些转义的列表是：</p>
<dl compact>
<dt><code>\a</code></dt>
<dd><p>产生或匹配<small>BEL</small>字符，即“警报”（ <small>ASCII</small> 7）。
</p>
</dd>
<dt><code>\f</code></dt>
<dd><p>产生或匹配换页（ <small>ASCII</small> 12）。
</p>
</dd>
<dt><code>\n</code></dt>
<dd><p>产生或匹配换行符（ <small>ASCII</small> 10）。
</p>
</dd>
<dt><code>\r</code></dt>
<dd><p>产生或匹配回车符（ <small>ASCII</small> 13）。
</p>
</dd>
<dt><code>\t</code></dt>
<dd><p>产生或匹配水平制表符（ <small>ASCII</small> 9）。
</p>
</dd>
<dt><code>\v</code></dt>
<dd><p>产生或匹配所谓的“垂直制表符”（ <small>ASCII</small> 11）。
</p>
</dd>
<dt><code>\c<var>x</var></code></dt>
<dd><p>产生或匹配<kbd><small>CONTROL</small>-<var>x</var></kbd> ，在哪里<var>x</var>是任何字符。'的精确效果<samp>\c<var>x</var></samp>如下： <var>x</var>是小写字母，将转换为大写字母。然后将字符的第6位（十六进制40）反转。因此， <samp>\cz</samp> '变成十六进制1A，但' <samp>\c{</samp> '变成十六进制3B，而' <samp>\c;</samp>变成十六进制7B。</p>
</dd>
<dt><code>\d<var>xxx</var></code></dt>
<dd><p>产生或匹配一个字符，该字符的十进制<small>ASCII</small>值为<var>xxx</var> 。
</p>
</dd>
<dt><code>\o<var>xxx</var></code></dt>
<dd><p>产生或匹配八进制<small>ASCII</small>值为<var>xxx</var> 。
</p>
</dd>
<dt><code>\x<var>xx</var></code></dt>
<dd><p>产生或匹配十六进制<small>ASCII</small>值为<var>xx</var> 。
</p></dd>
</dl>

<p>' <samp>\b</samp>省略了'（退格），因为它与现有的“单词边界”含义冲突。
</p>
<a name="Escaping-Precedence"></a>
<h4 class="subsection">5.8.1逃避优先</h4>

<p>GNU <code>sed</code> <em>在</em>将文本传递到的正则表达式匹配<em>之前，先</em>处理转义序列<code>s///</code>命令和地址匹配。因此，以下两个命令是等效的（' <samp>0x5e</samp> '是字符'的十六进制<small>ASCII</small>值<samp>^</samp> '）：</p>
<div class="example">
<pre class="example">$ echo 'a^c' | sed 's/^/b/'
ba^c

$ echo 'a^c' | sed 's/\x5e/b/'
ba^c
</pre></div>

<p>如下所示（' <samp>0x5b</samp> '，' <samp>0x5d</samp> '是'的十六进制<small>ASCII</small>值<samp>[</samp> '，' <samp>]</samp> '， 分别）：</p>
<div class="example">
<pre class="example">$ echo abc | sed 's/[a]/x/'
Xbc
$ echo abc | sed 's/\x5ba\x5d/x/'
Xbc
</pre></div>

<p>但是，建议避免使用此类特殊字符，因为它们会出现意外的边缘情况。例如，以下内容不是等效的：</p>
<div class="example">
<pre class="example">$ echo 'a^c' | sed 's/\^/b/'
abc

$ echo 'a^c' | sed 's/\\\x5e/b/'
a^c
</pre></div>



<hr>
<a name="Locale-Considerations"></a>
<div class="header">
<p>上一页： <a href="#Escapes" rel="prev" accesskey="p">转义</a> ，向上： <a href="#sed-regular-expressions" rel="up" accesskey="u">sed正则表达式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Multibyte-characters-and-Locale-Considerations"></a>
<h3 class="section">5.9多字节字符和语言环境注意事项</h3>

<p>GNU <code>sed</code>在多字节语言环境中处理有效的多字节字符（例如， <code>UTF-8</code> ）。<a name="DOCF7" href="#FOOT7"><sup>7</sup></a>
</p>
<p>以下示例使用希腊字母大写西格玛（Σ，Unicode代码点<code>0x03A3</code> ）。在一个<code>UTF-8</code>语言环境<code>sed</code>尽管它是2个八位字节（字节），但仍将Sigma正确地处理为一个字符：</p>
<div class="example">
<pre class="example">$ locale | grep LANG
LANG=en_US.UTF-8

$ printf 'a\u03A3b'
a&#x03A3;b

$ printf 'a\u03A3b' | sed 's/./X/g'
XXX

$ printf 'a\u03A3b' | od -tx1 -An
 61 ce a3 62
</pre></div>

<p>强迫<code>sed</code>要分别处理八位位组，请使用<code>C</code>语言环境（也称为<code>POSIX</code>语言环境）：</p>
<div class="example">
<pre class="example">$ printf 'a\u03A3b' | LC_ALL=C sed 's/./X/g'
XXXX
</pre></div>

<a name="Invalid-multibyte-characters"></a>
<h4 class="subsection">5.9.1无效的多字节字符</h4>

<p><code>sed</code>的正则表达式与多字节语言环境中的无效多字节序列<em>不</em>匹配。
</p>
<p>在以下示例中，ascii值<code>0xCE</code>是一个不完整的多字节字符（此处显示为�）。正则表达式' <samp>.</samp> '与之不匹配：</p>
<div class="example">
<pre class="example">$ printf 'a\xCEb\n'
a&#xFFFD;e

$ printf 'a\xCEb\n' | sed 's/./X/g'
X&#xFFFD;X

$ printf 'a\xCEc\n' | sed 's/./X/g' | od -tx1c -An
  58  ce  58  0a
   X      X   \n
</pre></div>

<p>同样，“全部捕获”正则表达式“ <samp>.*</samp> '与整行不匹配：</p>
<div class="example">
<pre class="example">$ printf 'a\xCEc\n' | sed 's/.*//' | od -tx1c -An
  ce  63  0a
       c  \n
</pre></div>

<p>GNU <code>sed</code>提供特别<code>z</code>命令清除当前模式空间，而不考虑无效的多字节字符（即，它的工作方式类似于<code>s/.*//</code>但还会删除无效的多字节字符）：</p>
<div class="example">
<pre class="example">$ printf 'a\xCEc\n' | sed 'z' | od -tx1c -An
   0a
   \n
</pre></div>

<p>或者，强制<code>C</code>区域设置以分别处理每个八位位组（每个八位位组在<code>C</code>语言环境）：</p>
<div class="example">
<pre class="example">$ printf 'a\xCEc\n' | LC_ALL=C sed 's/.*//' | od -tx1c -An
  0a
  \n
</pre></div>


<p><code>sed</code>不能处理无效的多字节字符可用于检测文件中的此类无效序列。在以下示例中， <code>\xCE\xCE</code>是无效的多字节序列，而<code>\xCE\A3</code>是有效的多字节序列（希腊Sigma字符）。
</p>
<p>下列<code>sed</code>程序使用以下命令删除所有有效字符<code>s/.//g</code> 。模式空间中剩余的所有内容（无效字符）都可以使用<code>H</code>命令。在最后一行（ <code>$</code> ），则获取保留空间（ <code>x</code> ），删除了换行符（ <code>s/\n//g</code> ），并清楚地打印所有剩余的八位位组（ <code>l</code> ）。因此，任何无效的多字节序列都将打印为八进制值：</p>
<div class="example">
<pre class="example">$ printf 'ab\nc\n\xCE\xCEde\n\xCE\xA3f\n' &gt; invalid.txt

$ cat invalid.txt
ab
c
&#xFFFD;&#xFFFD;de
&#x03A3;f

$ sed -n 's/.//g ; H ; ${x;s/\n//g;l}' invalid.txt
\316\316$
</pre></div>

<p>还有一些命令， <code>sed</code>可以打印与每个无效字符相对应的确切行号（第3行）。然后可以通过强制删除这些字符<code>C</code>语言环境并使用八进制转义序列：</p>
<div class="example">
<pre class="example">$ sed -n 's/.//g;=;l' invalid.txt | paste - -  | awk '$2!=&quot;$&quot;'
3       \316\316$

$ LC_ALL=C sed '3s/\o316\o316//' invalid.txt &gt; fixed.txt
</pre></div>

<a name="Upper_002fLower-case-conversion"></a>
<h4 class="subsection">5.9.2大写/小写转换</h4>


<p>GNU <code>sed</code>的替代命令（ <code>s</code> ）支持使用的大小写转换<code>\U</code> ， <code>\L</code>代码。这些转换支持多字节字符：</p>
<div class="example">
<pre class="example">$ printf 'ABC\u03a3\n'
ABC&#x03A3;

$ printf 'ABC\u03a3\n' | sed 's/.*/\L&amp;/'
abc&#x03C3;
</pre></div>

<p>请参见<a href="#The-_0022s_0022-Command">“ s”命令</a> 。
</p>

<a name="Multibyte-regexp-character-classes"></a>
<h4 class="subsection">5.9.3多字节正则表达式字符类</h4>


<p>在其他语言环境中，未指定排序顺序，并且' <samp>[a-d]</samp> '可能等同于' <samp>[abcd]</samp> ' 或者 ' <samp>[aBbCcDd]</samp> '，否则可能无法匹配任何字符，或者匹配的字符集甚至可能不稳定。要获取括号表达式的传统解释，您可以使用“ <samp>C</samp>通过设置<code>LC_ALL</code>环境变量为值' <samp>C</samp> '。
</p>
<div class="example">
<pre class="example"># TODO: is there any real-world system/locale where 'A'
#       is replaced by '-' ?
$ echo A | sed 's/[a-z]/-/'
A
</pre></div>

<p>他们的解释取决于<code>LC_CTYPE</code>语言环境例如， ' <samp>[[:alnum:]]</samp> '表示当前语言环境中数字和字母的字符类。
</p>
<p>TODO：显示整理示例</p>
<div class="example">
<pre class="example"># TODO: this works on glibc systems, not on musl-libc/freebsd/macosx.
$ printf 'clichÃ©\n' | LC_ALL=fr_FR.utf8 sed 's/[[=e=]]/X/g'
clichX
</pre></div>


<hr>
<a name="advanced-sed"></a>
<div class="header">
<p>下一个： <a href="#Examples" rel="next" accesskey="n">示例</a> ，上一个： <a href="#sed-regular-expressions" rel="prev" accesskey="p">sed正则表达式</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">Contents</a> ] [ <a href="#Concept-Index" title="指数" rel="index">Index</a> ]</p>
</div>
<a name="Advanced-sed_003a-cycles-and-buffers"></a>
<h2 class="chapter">6高级<code>sed</code> ：循环和缓冲区</h2>

<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Execution-Cycle" accesskey="1">执行周期</a> ：</td><td>  </td><td align="left" valign="top">怎么样<code>sed</code>作品</td></tr>
<tr><td align="left" valign="top">• <a href="#Hold-and-Pattern-Buffers" accesskey="2">Hold和Pattern缓冲区</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiline-techniques" accesskey="3">多线技术</a> ：</td><td>  </td><td align="left" valign="top">使用D，G，H，N，P处理多行</td></tr>
<tr><td align="left" valign="top">• <a href="#Branching-and-flow-control" accesskey="4">分支和流量控制</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
</tbody></table>

<hr>
<a name="Execution-Cycle"></a>
<div class="header">
<p>下一篇： <a href="#Hold-and-Pattern-Buffers" rel="next" accesskey="n">Hold和Pattern缓冲区</a> ，上一篇： <a href="#advanced-sed" rel="up" accesskey="u">高级sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="How-sed-Works"></a>
<h3 class="section">6.1如何<code>sed</code>作品</h3>

<a name="index-Buffer-spaces_002c-pattern-and-hold"></a>
<a name="index-Spaces_002c-pattern-and-hold"></a>
<a name="index-Pattern-space_002c-definition"></a>
<a name="index-Hold-space_002c-definition"></a>
<p><code>sed</code>维护两个数据缓冲区：活动<em>模式</em>空间和辅助<em>保持</em>空间。两者最初都是空的。
</p>
<p><code>sed</code>通过对输入的每一行执行以下循环来进行操作：首先， <code>sed</code>从输入流中读取一行，删除所有尾随的换行符，并将其放在模式空间中。然后执行命令；每个命令都可以有一个与之关联的地址：地址是一种条件代码，仅在条件要在执行命令之前得到验证的情况下，命令才会执行。
</p>
<p>到达脚本末尾时，除非<samp>-n</samp>选项在使用中，模式空间的内容会打印到输出流中，如果删除了尾随的换行符，则会添加回去。 <a name="DOCF8" href="#FOOT8"><sup>8</sup></a>然后，下一个循环开始下一条输入线。
</p>
<p>除非有特殊命令（例如“ <samp>D</samp>使用'），则在两个循环之间删除模式空间。另一方面，保持空间可在周期之间保持其数据（请参见命令' <samp>h</samp> '，' <samp>H</samp> '，' <samp>x</samp> '，' <samp>g</samp> '，' <samp>G</samp> '在两个缓冲区之间移动数据）。
</p>
<hr>
<a name="Hold-and-Pattern-Buffers"></a>
<div class="header">
<p>下一篇： <a href="#Multiline-techniques" rel="next" accesskey="n">多行技术</a> ，上一篇： <a href="#Execution-Cycle" rel="prev" accesskey="p">执行周期</a> ，上一篇： <a href="#advanced-sed" rel="up" accesskey="u">高级sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Hold-and-Pattern-Buffers-1"></a>
<h3 class="section">6.2保持和模式缓冲区</h3>

<p>去做</p>
<hr>
<a name="Multiline-techniques"></a>
<div class="header">
<p>下一篇： <a href="#Branching-and-flow-control" rel="next" accesskey="n">分支和流控制</a> ，上一篇： <a href="#Hold-and-Pattern-Buffers" rel="prev" accesskey="p">Hold和Pattern Buffer</a> ，上一篇： <a href="#advanced-sed" rel="up" accesskey="u">高级sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Multiline-techniques-_002d-using-D_002cG_002cH_002cN_002cP-to-process-multiple-lines"></a>
<h3 class="section">6.3多线技术-使用D，G，H，N，P处理多条线</h3>

<p>多行可以使用<code>D</code> ， <code>G</code> ， <code>H</code> ， <code>N</code> ， <code>P</code> 。它们类似于小写字母（ <code>d</code> ， <code>g</code> ， <code>h</code> ， <code>n</code> ， <code>p</code> ），但这些命令会在遵守嵌入换行符的情况下追加或减少数据-允许从模式中添加和删除行并保留空格。
</p>
<p>它们的操作如下：</p><dl compact>
<dt><code>D</code></dt>
<dd><p>从模式空间<em>删除</em>行，直到第一个换行符，然后重新开始循环。
</p>
</dd>
<dt><code>G</code></dt>
<dd><p>从保持空间向模式空间<em>追加</em>一行，并在其前面加上换行符。
</p>
</dd>
<dt><code>H</code></dt>
<dd><p><em>将</em>模式空间中的行<em>追加</em>到保留空间，并在其前添加换行符。
</p>
</dd>
<dt><code>N</code></dt>
<dd><p><em>将</em>输入文件中的行<em>追加</em>到模式空间。
</p>
</dd>
<dt><code>P</code></dt>
<dd><p>从模式空间<em>打印</em>行，直到第一个换行符。
</p>
</dd>
</dl>


<p>以下示例说明了<code>N</code>和<code>D</code>命令：</p>
<div class="example">
<pre class="example">$ seq 6 | sed -n 'N;l;D'
1\n2$
2\n3$
3\n4$
4\n5$
5\n6$
</pre></div>

<ol>
<li> <code>sed</code>首先将第一行读入模式空间（即'<samp>1</samp> '）。
</li><li>在每个周期的开始， <code>N</code>命令将换行符和下一行追加到模式空间（即' <samp>1</samp> '，' <samp>\n</samp> '，' <samp>2</samp> '）。
</li><li>的<code>l</code>命令清楚地打印出模式空间的内容。
</li><li>的<code>D</code>然后，命令删除模式空间的内容，直到第一个换行符为止（保留' <samp>2</samp> '在第一个周期结束时）。
</li><li>在下一个周期<code>N</code>命令将换行符和下一个输入行追加到模式空间（例如'<samp>2</samp> '，' <samp>\n</samp> '，' <samp>3</samp> '）。
</li></ol>


<a name="index-processing-paragraphs"></a>
<a name="index-paragraphs_002c-processing"></a>
<p>处理诸如段落之类的文本块（而不是逐行）的一种常用技术是使用以下构造：</p>
<div class="example">
<pre class="example">sed '/./{H;$!d} ; x ; s/REGEXP/REPLACEMENT/'
</pre></div>

<ol>
<li>第一个表达式， <code>/./{H;$!d}</code>对所有非空行进行运算，并将当前行（在模式空间中）添加到保留空间。在除最后一行之外的所有行上，删除模式空间并重新启动循环。

</li><li>其他表达<code>x</code>和<code>s</code>仅在空行（即段落分隔符）上执行。的<code>x</code>命令从保持空间中将累积的行取回模式空间。的<code>s///</code>然后，该命令将对段落中的所有文本（包括嵌入的换行符）进行操作。
</li></ol>

<p>下面的示例演示了此技术：</p><div class="example">
<pre class="example">$ cat input.txt
a a a aa aaa
aaaa aaaa aa
aaaa aaa aaa

bbbb bbb bbb
bb bb bbb bb
bbbbbbbb bbb

ccc ccc cccc
cccc ccccc c
cc cc cc cc

$ sed '/./{H;$!d} ; x ; s/^/\nSTART--&gt;/ ; s/$/\n&lt;--END/' input.txt

START--&gt;
a a a aa aaa
aaaa aaaa aa
aaaa aaa aaa
&lt;--END

START--&gt;
bbbb bbb bbb
bb bb bbb bb
bbbbbbbb bbb
&lt;--END

START--&gt;
ccc ccc cccc
cccc ccccc c
cc cc cc cc
&lt;--END
</pre></div>

<p>有关更多带注释的示例，请参见<a href="#Text-search-across-multiple-lines">跨多行的文本搜索</a>和<a href="#Line-length-adjustment">行长调整</a> 。
</p>
<hr>
<a name="Branching-and-flow-control"></a>
<div class="header">
<p>上一篇： <a href="#Multiline-techniques" rel="prev" accesskey="p">多行技术</a> ，上一篇： <a href="#advanced-sed" rel="up" accesskey="u">高级sed</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Branching-and-Flow-Control"></a>
<h3 class="section">6.4分支和流量控制</h3>

<p>分支命令<code>b</code> ， <code>t</code>和<code>T</code>启用更改流程<code>sed</code>程式。
</p>
<p>默认， <code>sed</code>将输入行读入模式缓冲区，然后继续按顺序处理所有命令。没有地址的命令会影响所有行。具有地址的命令仅影响匹配的行。请参见<a href="#Execution-Cycle">执行周期</a>和<a href="#Addresses-overview">地址概述</a> 。
</p>
<p><code>sed</code>不支持典型<code>if/then</code>构造。相反，可以将某些命令用作条件或更改默认流控制：</p>
<dl compact>
<dt><code>d</code></dt>
<dd><p>删除（清除）当前模式空间，然后在不处理其余命令且不打印模式空间的情况下重新启动程序循环。
</p>
</dd>
<dt><code>D</code></dt>
<dd><p>删除模式空间的内容， <em>直到第一个换行符</em> ，然后重新启动程序循环，而无需处理其余命令，也无需打印模式空间。
</p>
</dd>
<dt><code>[addr]X</code></dt>
<dt><code>[addr]{ X ; X ; X }</code></dt>
<dt><code>/regexp/X</code></dt>
<dt><code>/regexp/{ X ; X ; X }</code></dt>
<dd><p>地址和正则表达式可以用作<code>if/then</code>有条件的：如果<var>[addr]</var>匹配当前模式空间，执行命令。例如：命令<code>/^#/d</code>表示： <em>如果</em>当前模式与正则表达式匹配<code>^#</code> （以哈希开头的行）， <em>然后</em>执行<code>d</code>命令：删除该行而不打印它，并立即重新启动程序循环。
</p>
</dd>
<dt><code>b</code></dt>
<dd><p>无条件分支（即：始终跳至标签，跳过或重复其他命令，而无需重新启动新循环）。结合地址，可以在匹配的行上有条件地执行分支。
</p>
</dd>
<dt><code>t</code></dt>
<dd><p><em>仅在</em>以下情况有条件地分支（即：跳转到标签） <code>s///</code>自从读取最后一条输入行或采用另一个条件分支以来，命令已成功执行。
</p>
</dd>
<dt><code>T</code></dt>
<dd><p>相似但相反<code>t</code>命令：仅当自读取最后一条输入行以来<em>没有</em>成功的替换时，才分支。
</p></dd>
</dl>


<p>以下两个<code>sed</code>程序是等效的。第一个（人为）示例使用<code>b</code>命令跳过<code>s///</code>在包含“ <samp>1</samp> '。第二个示例使用带负号（' <samp>!</samp> '）仅在所需的行上执行替换。的<code>y///</code>命令仍然在所有行上执行：</p>
<div class="example">
<pre class="example">$ printf '%s\n' a1 a2 a3 | sed -E '/1/bx ; s/a/z/ ; :x ; y/123/456/'
a4
z5
z6

$ printf '%s\n' a1 a2 a3 | sed -E '/1/!s/a/z/ ; y/123/456/'
a4
z5
z6
</pre></div>



<a name="Branching-and-Cycles"></a>
<h4 class="subsection">6.4.1分支和周期</h4>
<a name="index-labels"></a>
<a name="index-omitting-labels"></a>
<a name="index-cycle_002c-restarting"></a>
<a name="index-restarting-a-cycle"></a>
<p>的<code>b</code> ， <code>t</code>和<code>T</code>命令后可以跟标签（通常是单个字母）。标签以冒号定义，后跟一个或多个字母（例如'<samp>:x</samp> '）。如果省略标签，则分支命令重新启动循环。注意分支到标签和重新启动循环之间的区别：重新启动循环时， <code>sed</code>首先打印模式空间的当前内容，然后将下一个输入行读入模式空间；跳转到标签（即使它位于程序的开头）也不会打印图案空间，也不会读取下一个输入行。
</p>
<p>以下程序是禁止操作的。的<code>b</code>命令（程序中唯一的命令）没有标签，因此只需重新启动循环即可。在每个循环中，将打印图案空间并读取下一个输入行：</p>
<div class="example">
<pre class="example">$ seq 3 | sed b
1
2
3
</pre></div>

<a name="index-infinite-loop_002c-branching"></a>
<a name="index-branching_002c-infinite-loop"></a>
<p>下面的示例是一个无限循环-它不会终止并且不会显示任何内容。的<code>b</code>命令跳到“ <samp>x</samp>标签，并且新的循环永远不会开始：</p>
<div class="example">
<pre class="example">$ seq 3 | sed ':x ; bx'

# The above command requires gnu sed (which supports additional
# commands following a label, without a newline). A portable equivalent:
#     sed -e ':x' -e bx
</pre></div>

<a name="index-branching-and-n_002c-N"></a>
<a name="index-n_002c-and-branching"></a>
<a name="index-N_002c-and-branching"></a>
<p>分支通常与<code>n</code>要么<code>N</code>命令：这两个命令都将下一个输入行读入模式空间，而无需等待循环重新启动。在阅读下一条输入线之前， <code>n</code>打印当前模式空间，然后清空它，而<code>N</code>将换行符和下一个输入行追加到模式空间。
</p>
<p>请考虑以下两个示例：</p>
<div class="example">
<pre class="example">$ seq 3 | sed ':x ; n ; bx'
1
2
3

$ seq 3 | sed ':x ; N ; bx'
1
2
3
</pre></div>

<ul>
<li>尽管从未开始新的循环，但这两个示例都不会循环。

</li><li>在第一个示例中， <code>n</code>命令首先打印模式空间的内容，清空模式空间，然后读取下一个输入行。

</li><li>在第二个示例中， <code>N</code>命令将下一个输入行追加到模式空间（带有换行符）。在模式空间中累积行，直到没有更多的输入行要读取为止，然后<code>N</code>命令终止<code>sed</code>程序。程序终止时，将执行循环结束操作，并打印整个图案空间。

</li><li>第二个示例需要GNU <code>sed</code> ，因为它使用的是非POSIX标准行为<code>N</code> 。参见“ <code>N</code> “ <a href="#Reporting-Bugs">报告错误</a> ”中最后一行的“命令”。

</li><li>要进一步检查两个示例之间的区别，请尝试以下命令：<div class="example">
<pre class="example">printf '%s\n' aa bb cc dd | sed ':x ; n ; = ; bx'
printf '%s\n' aa bb cc dd | sed ':x ; N ; = ; bx'
printf '%s\n' aa bb cc dd | sed ':x ; n ; s/\n/***/ ; bx'
printf '%s\n' aa bb cc dd | sed ':x ; N ; s/\n/***/ ; bx'
</pre></div>

</li></ul>



<a name="Branching-example_003a-joining-lines"></a>
<h4 class="subsection">6.4.2分支示例：连接线</h4>

<a name="index-joining-lines-with-branching"></a>
<a name="index-branching_002c-joining-lines"></a>
<a name="index-quoted_002dprintable-lines_002c-joining"></a>
<a name="index-joining-quoted_002dprintable-lines"></a>
<a name="index-t_002c-joining-lines-with"></a>
<a name="index-b_002c-joining-lines-with"></a>
<a name="index-b_002c-versus-t"></a>
<a name="index-t_002c-versus-b"></a>
<p>作为使用分支的真实示例，请考虑带<a href="https://en.wikipedia.org/wiki/Quoted-printable">引号的可打印</a>文件的情况，该文件通常用于编码电子邮件。在这些文件中长线是分割并用<em>软线断线</em>由单一的标有' <samp>=</samp> '在行尾的字符：</p>
<div class="example">
<pre class="example">$ cat jaques.txt
All the wor=
ld's a stag=
e,
And all the=
 men and wo=
men merely =
players:
They have t=
heir exits =
and their e=
ntrances;
And one man=
 in his tim=
e plays man=
y parts.
</pre></div>


<p>以下程序使用地址匹配' <samp>/=$/</samp> '作为条件：如果当前模式空间以'结尾<samp>=</samp> '，它使用读取下一条输入行<code>N</code> ，替换所有' <samp>=</samp> '个字符，后跟换行符，并且无条件分支（ <code>b</code> ）到程序的开头，而无需重新启动新的循环。如果模式空间不以'结尾<samp>=</samp> '，将执行默认操作：打印图案空间并开始新的循环：</p>
<div class="example">
<pre class="example">$ sed ':x ; /=$/ { N ; s/=\n//g ; bx }' jaques.txt
All the world's a stage,
And all the men and women merely players:
They have their exits and their entrances;
And one man in his time plays many parts.
</pre></div>

<p>这是一个替代程序，其方法略有不同：除了最后一行， <code>N</code>将线追加到模式空间。然后，替换命令将删除软换行符（' <samp>=</samp> '（在一行的末尾，即后跟换行符），方法是将它们替换为空字符串。
<em>如果</em>替换成功（意味着模式空间包含应连接的行），则条件分支命令<code>t</code>跳转到程序的开始而不完成或重新启动循环。如果替换失败（表示没有换行），则<code>t</code>命令将<em>不会</em>分支。然后， <code>P</code>将打印模式空间的内容，直到第一行，然后<code>D</code>将删除模式空间内容，直到第一行。（要了解更多有关<code>N</code> ， <code>P</code>和<code>D</code>命令请参见<a href="#Multiline-techniques">多行技术</a> ）。
</p>

<div class="example">
<pre class="example">$ sed ':x ; $!N ; s/=\n// ; tx ; P ; D' jaques.txt
All the world's a stage,
And all the men and women merely players:
They have their exits and their entrances;
And one man in his time plays many parts.
</pre></div>


<p>有关更多线连接示例，请参见<a href="#Joining-lines">连接线</a> 。
</p>

<hr>
<a name="Examples"></a>
<div class="header">
<p>下一篇： <a href="#Limitations" rel="next" accesskey="n">限制</a> ，上一篇： <a href="#advanced-sed" rel="prev" accesskey="p">高级sed</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Some-Sample-Scripts"></a>
<h2 class="chapter">7一些示例脚本</h2>

<p>这里有一些<code>sed</code>脚本指导您掌握技巧<code>sed</code> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Useful one-liners:
</pre></th></tr><tr><td align="left" valign="top">• <a href="#Joining-lines" accesskey="1">连接线</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Some exotic examples:
</pre></th></tr><tr><td align="left" valign="top">• <a href="#Centering-lines" accesskey="2">中心线</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Increment-a-number" accesskey="3">增加数字</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Rename-files-to-lower-case" accesskey="4">重命名文件为小写</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Print-bash-environment" accesskey="5">打印bash环境</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Reverse-chars-of-lines" accesskey="6">反转行字符</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Text-search-across-multiple-lines" accesskey="7">跨多行的文本搜索</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Line-length-adjustment" accesskey="8">线长调整</a> ：</td><td>  </td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Emulating standard utilities:
</pre></th></tr><tr><td align="left" valign="top">• <a href="#tac" accesskey="9">tac</a> ：</td><td>  </td><td align="left" valign="top">反向文件行</td></tr>
<tr><td align="left" valign="top">• <a href="#cat-_002dn">cat -n</a> ：</td><td>  </td><td align="left" valign="top">编号行</td></tr>
<tr><td align="left" valign="top">• <a href="#cat-_002db">cat -b</a> ：</td><td>  </td><td align="left" valign="top">编号非空白行</td></tr>
<tr><td align="left" valign="top">• <a href="#wc-_002dc">wc -c</a> ：</td><td>  </td><td align="left" valign="top">计数字符</td></tr>
<tr><td align="left" valign="top">• <a href="#wc-_002dw">wc -w</a> ：</td><td>  </td><td align="left" valign="top">数词</td></tr>
<tr><td align="left" valign="top">• <a href="#wc-_002dl">wc -l</a> ：</td><td>  </td><td align="left" valign="top">计数线</td></tr>
<tr><td align="left" valign="top">• <a href="#head">头</a> ：</td><td>  </td><td align="left" valign="top">打印第一行</td></tr>
<tr><td align="left" valign="top">• <a href="#tail">尾巴</a> ：</td><td>  </td><td align="left" valign="top">打印最后几行</td></tr>
<tr><td align="left" valign="top">• <a href="#uniq">uniq</a> ：</td><td>  </td><td align="left" valign="top">使重复的行唯一</td></tr>
<tr><td align="left" valign="top">• <a href="#uniq-_002dd">uniq -d</a> ：</td><td>  </td><td align="left" valign="top">打印输入的重复行</td></tr>
<tr><td align="left" valign="top">• <a href="#uniq-_002du">uniq -u</a> ：</td><td>  </td><td align="left" valign="top">删除所有重复的行</td></tr>
<tr><td align="left" valign="top">• <a href="#cat-_002ds">cat -s</a> ：</td><td>  </td><td align="left" valign="top">挤压空白行</td></tr>
</tbody></table>

<hr>
<a name="Joining-lines"></a>
<div class="header">
<p>下一页： <a href="#Centering-lines" rel="next" accesskey="n">中心线</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Joining-lines-1"></a>
<h3 class="section">7.1连接线</h3>

<p>本节使用<code>N</code> ， <code>D</code>和<code>P</code>命令来处理多行，并且<code>b</code>和<code>t</code>分支命令。请参阅<a href="#Multiline-techniques">多线技术</a>以及<a href="#Branching-and-flow-control">分支和流控制</a> 。
</p>
<p>连接特定的行（例如，如果需要连接第2行和第3行）：</p>
<div class="example">
<pre class="example">$ cat lines.txt
hello
hel
lo
hello

$ sed '2{N;s/\n//;}' lines.txt
hello
hello
hello
</pre></div>

<p>连接反斜杠续行：</p>
<div class="example">
<pre class="example">$ cat 1.txt
this \
is \
a \
long \
line
and another \
line

$ sed -e ':x /\\$/ { N; s/\\\n//g ; bx }'  1.txt
this is a long line
and another line


#TODO: The above requires gnu sed.
#      non-gnu seds need newlines after ':' and 'b'
</pre></div>

<p>连接以空格开头的行（例如SMTP标头）：</p>
<div class="example">
<pre class="example">$ cat 2.txt
Subject: Hello
    World
Content-Type: multipart/alternative;
    boundary=94eb2c190cc6370f06054535da6a
Date: Tue, 3 Jan 2017 19:41:16 +0000 (GMT)
Authentication-Results: mx.gnu.org;
       dkim=pass header.i=@gnu.org;
       spf=pass
Message-ID: &lt;abcdef@gnu.org&gt;
From: John Doe &lt;jdoe@gnu.org&gt;
To: Jane Smith &lt;jsmith@gnu.org&gt;

$ sed -E ':a ; $!N ; s/\n\s+/ / ; ta ; P ; D' 2.txt
Subject: Hello World
Content-Type: multipart/alternative; boundary=94eb2c190cc6370f06054535da6a
Date: Tue, 3 Jan 2017 19:41:16 +0000 (GMT)
Authentication-Results: mx.gnu.org; dkim=pass header.i=@gnu.org; spf=pass
Message-ID: &lt;abcdef@gnu.org&gt;
From: John Doe &lt;jdoe@gnu.org&gt;
To: Jane Smith &lt;jsmith@gnu.org&gt;

# A portable (non-gnu) variation:
#   sed -e :a -e '$!N;s/\n  */ /;ta' -e 'P;D'
</pre></div>


<hr>
<a name="Centering-lines"></a>
<div class="header">
<p>下一个： <a href="#Increment-a-number" rel="next" accesskey="n">增加数字</a> ，上一个： <a href="#Joining-lines" rel="prev" accesskey="p">连接线</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Centering-Lines"></a>
<h3 class="section">7.2对中线</h3>

<p>该脚本以80列的宽度居中文件的所有行。要更改该宽度，请输入<code>\{…\}</code>必须替换，添加的空格数也必须更改。
</p>
<p>请注意，缓冲区命令如何用于分隔要匹配的正则表达式中的各个部分，这是一种常见的技术。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># Put 80 spaces in the buffer
1 {
  x
  s/^$/          /
  s/^.*$/&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/
  x
}
</pre><pre class="example">

</pre><pre class="example"># delete leading and trailing spaces
y/<kbd><span class="key">TAB</span></kbd>/ /
s/^ *//
s/ *$//
</pre><pre class="example">

</pre><pre class="example"># add a newline and 80 spaces to end of line
G
</pre><pre class="example">

</pre><pre class="example"># keep first 81 chars (80 + a newline)
s/^\(.\{81\}\).*$/\1/
</pre><pre class="example">

</pre><pre class="example"># \2 matches half of the spaces, which are moved to the beginning
s/^\(.*\)\n\(.*\)\2/\2\1/
</pre></div>

<hr>
<a name="Increment-a-number"></a>
<div class="header">
<p>下一篇： <a href="#Rename-files-to-lower-case" rel="next" accesskey="n">重命名文件为小写字母</a>上一篇： <a href="#Centering-lines" rel="prev" accesskey="p">居中线上</a>一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Increment-a-Number"></a>
<h3 class="section">7.3递增数字</h3>

<p>该脚本是一些演示如何在其中进行算术运算的脚本之一<code>sed</code> 。这确实是可能的， <a name="DOCF9" href="#FOOT9"><sup>9</sup></a>但必须手动完成。
</p>
<p>要增加一个数字，您只需在最后一位加1，然后用下一位代替。有一个例外：当数字为9时，前面的数字也必须递增，直到没有9。
</p>
<p>Bruno Haible的这种解决方案非常聪明和聪明，因为它使用单个缓冲区。如果没有此限制，则<a href="#cat-_002dn">编号行中</a>使用的算法会更快。它的工作原理是用下划线替换结尾的9，然后使用多个<code>s</code>命令增加最后一位数字，然后再次用零代替下划线。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

/[^0-9]/ d

</pre><pre class="example"># replace all trailing 9s by _ (any other character except digits, could
# be used)
:d
s/9\(_*\)$/_\1/
td
</pre><pre class="example">

</pre><pre class="example"># incr last digit only.  The first line adds a most-significant
# digit of 1 if we have to add a digit.
</pre><pre class="example">

</pre><pre class="example">s/^\(_*\)$/1\1/; tn
s/8\(_*\)$/9\1/; tn
s/7\(_*\)$/8\1/; tn
s/6\(_*\)$/7\1/; tn
s/5\(_*\)$/6\1/; tn
s/4\(_*\)$/5\1/; tn
s/3\(_*\)$/4\1/; tn
s/2\(_*\)$/3\1/; tn
s/1\(_*\)$/2\1/; tn
s/0\(_*\)$/1\1/; tn
</pre><pre class="example">

</pre><pre class="example">:n
y/_/0/
</pre></div>

<hr>
<a name="Rename-files-to-lower-case"></a>
<div class="header">
<p>下一个： <a href="#Print-bash-environment" rel="next" accesskey="n">打印bash环境</a> ，上一个： <a href="#Increment-a-number" rel="prev" accesskey="p">递增数字</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Rename-Files-to-Lower-Case"></a>
<h3 class="section">7.4重命名文件为小写</h3>

<p>这是一个很奇怪的用法<code>sed</code> 。我们转换文本，并将其转换为shell命令，然后将其输入到shell中。不用担心，使用时会发生更糟糕的骇客<code>sed</code> ;我看过一个脚本转换了<code>date</code>变成一个<code>bc</code>程序！
</p>
<p>这个的主体是<code>sed</code>脚本，该脚本将名称从低到高重新映射（反之亦然），甚至检查重新映射的名称是否与原始名称相同。请注意如何使用shell变量和正确的引号对脚本进行参数化。
</p>
<div class="example">
<pre class="example">#! /bin/sh
# rename files to lower/upper case...
#
# usage:
#    move-to-lower *
#    move-to-upper *
# or
#    move-to-lower -R .
#    move-to-upper -R .
#
</pre><pre class="example">

</pre><pre class="example">help()
{
        cat &lt;&lt; eof
Usage: $0 [-n] [-r] [-h] files...
</pre><pre class="example">

</pre><pre class="example">-n      do nothing, only see what would be done
-R      recursive (use find)
-h      this message
files   files to remap to lower case
</pre><pre class="example">

</pre><pre class="example">Examples:
       $0 -n *        (see if everything is ok, then...)
       $0 *
</pre><pre class="example">

       $0 -R .

</pre><pre class="example">eof
}
</pre><pre class="example">

</pre><pre class="example">apply_cmd='sh'
finder='echo &quot;$@&quot; | tr &quot; &quot; &quot;\n&quot;'
files_only=
</pre><pre class="example">

</pre><pre class="example">while :
do
    case &quot;$1&quot; in
        -n) apply_cmd='cat' ;;
        -R) finder='find &quot;$@&quot; -type f';;
        -h) help ; exit 1 ;;
        *) break ;;
    esac
    shift
done
</pre><pre class="example">

</pre><pre class="example">if [ -z &quot;$1&quot; ]; then
        echo Usage: $0 [-h] [-n] [-r] files...
        exit 1
fi
</pre><pre class="example">

</pre><pre class="example">LOWER='abcdefghijklmnopqrstuvwxyz'
UPPER='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
</pre><pre class="example">

</pre><pre class="example">case `basename $0` in
        *upper*) TO=$UPPER; FROM=$LOWER ;;
        *)       FROM=$UPPER; TO=$LOWER ;;
esac
</pre><pre class="example">

eval $finder | sed -n '

</pre><pre class="example"># remove all trailing slashes
s/\/*$//
</pre><pre class="example">

</pre><pre class="example"># add ./ if there is no path, only a filename
/\//! s/^/.\//
</pre><pre class="example">

</pre><pre class="example"># save path+filename
h
</pre><pre class="example">

</pre><pre class="example"># remove path
s/.*\///
</pre><pre class="example">

</pre><pre class="example"># do conversion only on filename
y/'$FROM'/'$TO'/
</pre><pre class="example">

</pre><pre class="example"># now line contains original path+file, while
# hold space contains the new filename
x
</pre><pre class="example">

</pre><pre class="example"># add converted file name to line, which now contains
# path/file-name\nconverted-file-name
G
</pre><pre class="example">

</pre><pre class="example"># check if converted file name is equal to original file name,
# if it is, do not print anything
/^.*\/\(.*\)\n\1/b
</pre><pre class="example">

</pre><pre class="example"># escape special characters for the shell
s/[&quot;$`\\]/\\&amp;/g
</pre><pre class="example">

</pre><pre class="example"># now, transform path/fromfile\n, into
# mv path/fromfile path/tofile and print it
s/^\(.*\/\)\(.*\)\n\(.*\)$/mv &quot;\1\2&quot; &quot;\1\3&quot;/p
</pre><pre class="example">

' | $apply_cmd
</pre></div>

<hr>
<a name="Print-bash-environment"></a>
<div class="header">
<p>下一个： <a href="#Reverse-chars-of-lines" rel="next" accesskey="n">反转行字符</a> ，上一个： <a href="#Rename-files-to-lower-case" rel="prev" accesskey="p">将文件重命名为小写</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Print-bash-Environment"></a>
<h3 class="section">7.5打印<code>bash</code>环境</h3>

<p>该脚本从shell的输出中剥离shell函数的定义。 <code>set</code> Bourne-shell命令。
</p>
<div class="example">
<pre class="example">#!/bin/sh

</pre><pre class="example">set | sed -n '
:x
</pre><pre class="example">

</pre><pre class="example"># if no occurrence of &lsquo;<samp>=()</samp>&rsquo; print and load next line
/=()/! { p; b; }
/ () $/! { p; b; }
</pre><pre class="example">

</pre><pre class="example"># possible start of functions section
# save the line in case this is a var like FOO=&quot;() &quot;
h
</pre><pre class="example">

</pre><pre class="example"># if the next line has a brace, we quit because
# nothing comes after functions
n
/^{/ q
</pre><pre class="example">

</pre><pre class="example"># print the old line
x; p
</pre><pre class="example">

</pre><pre class="example"># work on the new line now
x; bx
'
</pre></div>

<hr>
<a name="Reverse-chars-of-lines"></a>
<div class="header">
<p>下一页： <a href="#Text-search-across-multiple-lines" rel="next" accesskey="n">跨行搜索文本</a> ，上一页： <a href="#Print-bash-environment" rel="prev" accesskey="p">打印bash环境</a> ，向上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Reverse-Characters-of-Lines"></a>
<h3 class="section">7.6线的反向字符</h3>

<p>该脚本可用于反转行中字符的位置。该技术一次移动两个字符，因此比更直观的实现更快。
</p>
<p>注意<code>tx</code>标签定义之前的命令。通常需要重设由<code>t</code>命令。
</p>
<p>富有想象力的读者会发现此脚本的用途。一个例子是反转输出<code>banner</code> 。 <a name="DOCF10" href="#FOOT10"><sup>10</sup></a>
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

/../! b

</pre><pre class="example"># Reverse a line.  Begin embedding the line between two newlines
s/^.*$/\
&amp;\
/
</pre><pre class="example">

</pre><pre class="example"># Move first character at the end.  The regexp matches until
# there are zero or one characters between the markers
tx
:x
s/\(\n.\)\(.*\)\(.\n\)/\3\2\1/
tx
</pre><pre class="example">

</pre><pre class="example"># Remove the newline markers
s/\n//g
</pre></div>


<hr>
<a name="Text-search-across-multiple-lines"></a>
<div class="header">
<p>下一篇： <a href="#Line-length-adjustment" rel="next" accesskey="n">调整</a> <a href="#Reverse-chars-of-lines" rel="prev" accesskey="p">行长</a> ，上一篇： <a href="#Reverse-chars-of-lines" rel="prev" accesskey="p">反转字符</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Text-search-across-multiple-lines-1"></a>
<h3 class="section">7.7多行文字搜索</h3>

<p>本节使用<code>N</code>和<code>D</code>命令来搜索跨越多行的连续单词。请参阅<a href="#Multiline-techniques">多行技术</a> 。
</p>
<p>这些示例涉及查找文档中单词出现次数加倍的情况。
</p>
<p>使用GNU可以很容易地在单行中查找双词<code>grep</code>和类似的GNU <code>sed</code> ：</p>
<div class="example">
<pre class="example">$ cat two-cities-dup1.txt
It was the best of times,
it was the worst of times,
it was the&nbsp;the age of wisdom,
it was the age of foolishness,

$ grep -E '\b(\w+)\s+\1\b' two-cities-dup1.txt
it was the&nbsp;the age of wisdom,

$ grep -n -E '\b(\w+)\s+\1\b' two-cities-dup1.txt
3:it was the&nbsp;the age of wisdom,

$ sed -En '/\b(\w+)\s+\1\b/p' two-cities-dup1.txt
it was the&nbsp;the age of wisdom,

$ sed -En '/\b(\w+)\s+\1\b/{=;p}' two-cities-dup1.txt
3
it was the&nbsp;the age of wisdom,
</pre></div>

<ul>
<li>正则表达式' <samp>\b\w+\s+</samp> '搜索单词边界（' <samp>\b</samp> '），然后是一个或多个单词字符（' <samp>\w+</samp> '），后跟空格（' <samp>\s+</samp> '）。请参阅<a href="#regexp-extensions">regexp扩展</a> 。

</li><li>在“ <samp>(\w+)</samp> '表达式创建一个子表达式。正则表达式模式' <samp>(PATTERN)\s+\1</samp> '定义了一个子表达式（在括号中），后跟一个反向引用，由空格分隔。比赛成功意味着<var>PATTERN</var>连续两次重复。请参阅<a href="#Back_002dreferences-and-Subexpressions">反向引用和子表达式</a> 。

</li><li>词边界表达式（' <samp>\b</samp> '）两端确保不匹配部分单词（例如' <samp>the then</samp> '不是理想的匹配）。

</li><li>的<samp>-E</samp> option启用扩展的正则表达式语法，从而减少了在括号前添加反斜杠的需要。请参阅<a href="#ERE-syntax">ERE语法</a> 。

</li></ul>

<p>当双字跨越两行时，上述正则表达式将不会找到它们<code>grep</code>和<code>sed</code>逐行操作。
</p>
<p>通过使用<code>N</code>和<code>D</code>命令， <code>sed</code>可以在多行上应用正则表达式（即，模式空间中存储了多行，并且正则表达式可以在其上使用）：</p>
<div class="example">
<pre class="example">$ cat two-cities-dup2.txt
It was the best of times, it was the
worst of times, it was the
the age of wisdom,
it was the age of foolishness,

$ sed -En '{N; /\b(\w+)\s+\1\b/{=;p} ; D}'  two-cities-dup2.txt
3
worst of times, it was the
the age of wisdom,
</pre></div>

<ul>
<li>的<code>N</code>命令将下一行追加到模式空间（因此确保在每个循环中包含连续的两行）。

</li><li>正则表达式使用' <samp>\s+</samp> '表示匹配空格和换行符的单词分隔符。

</li><li>正则表达式匹配，整个模式空间都用<code>p</code> 。默认情况下，由于没有打印行<samp>-n</samp>选项。

</li><li>的<code>D</code>从模式空间中删除第一行（直到第一行新行），为下一个循环做好准备。
</li></ul>

<p>见GNU <code>coreutils</code>使用其他解决方案的手册<code>tr -s</code>和<code>uniq</code>在<a href="https://gnu.org/s/coreutils/manual/html_node/Squeezing-and-deleting.html">https://gnu.org/s/coreutils/manual/html_node/Squeezing-and-deleting.html</a> 。</p>
<hr>
<a name="Line-length-adjustment"></a>
<div class="header">
<p>下一篇： <a href="#tac" rel="next" accesskey="n">tac</a> ，上一篇： <a href="#tac" rel="next" accesskey="n">跨行</a> <a href="#Text-search-across-multiple-lines" rel="prev" accesskey="p">搜索文本</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Line-length-adjustment-1"></a>
<h3 class="section">7.8线长调整</h3>

<p>本节使用<code>N</code>和<code>D</code>命令搜索跨越多行的连续单词，然后<code>b</code>分支命令。请参阅<a href="#Multiline-techniques">多线技术</a>以及<a href="#Branching-and-flow-control">分支和流控制</a> 。
</p>
<p>这个（有些人为的）示例处理以下输入文件的格式和换行：</p>
<div class="example">
<pre class="example">$ cat two-cities-mix.txt
It was the best of times, it was
the worst of times, it
was the age of
wisdom,
it
was
the age
of foolishness,
</pre></div>

<p>以下sed程序以40个字符换行：</p><div class="example">
<pre class="example">$ cat wrap40.sed
# outer loop
:x

# Appead a newline followed by the next input line to the pattern buffer
N

# Remove all newlines from the pattern buffer
s/\n/ /g


# Inner loop
:y

# Add a newline after the first 40 characters
s/(.{40,40})/\1\n/

# If there is a newline in the pattern buffer
# (i.e. the previous substitution added a newline)
/\n/ {
    # There are newlines in the pattern buffer -
    # print the content until the first newline.
    P

   # Remove the printed characters and the first newline
   s/.*\n//

   # branch to label 'y' - repeat inner loop
   by
 }

# No newlines in the pattern buffer - Branch to label 'x' (outer loop)
# and read the next input line
bx
</pre></div>



<p>包装的输出：</p><div class="example">
<pre class="example">$ sed -E -f wrap40.sed two-cities-mix.txt
It was the best of times, it was the wor
st of times, it was the age of wisdom, i
t was the age of foolishness,
</pre></div>




<hr>
<a name="tac"></a>
<div class="header">
<p>下一篇： <a href="#cat-_002dn" rel="next" accesskey="n">cat -n</a> ，上一篇： <a href="#cat-_002dn" rel="next" accesskey="n">行长</a> <a href="#Line-length-adjustment" rel="prev" accesskey="p">调整</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Reverse-Lines-of-Files"></a>
<h3 class="section">7.9文件反向行</h3>

<p>这开始了一系列完全无用（至今很有趣）的脚本，它们模拟了各种Unix命令。尤其是<code>tac</code>相似。
</p>
<p>请注意，除了GNU以外的其他实现<code>sed</code>该脚本可能会轻易溢出内部缓冲区。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

# reverse all lines of input, i.e. first line became last, ...

</pre><pre class="example"># from the second line, the buffer (which contains all previous lines)
# is *appended* to current line, so, the order will be reversed
1! G
</pre><pre class="example">

</pre><pre class="example"># on the last line we're done -- print everything
$ p
</pre><pre class="example">

</pre><pre class="example"># store everything on the buffer again
h
</pre></div>

<hr>
<a name="cat-_002dn"></a>
<div class="header">
<p>下一篇： <a href="#cat-_002db" rel="next" accesskey="n">cat -b</a> ，上一篇： <a href="#tac" rel="prev" accesskey="p">tac</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Numbering-Lines"></a>
<h3 class="section">7.10编号行</h3>

<p>该脚本替换了“ <samp>cat -n</samp> ';实际上，它的输出格式完全类似于GNU <code>cat</code>做。
</p>
<p>当然，这是完全没有用的，原因有两个：第一，因为其他人在C中完成了此任务，第二，因为以下Bourne-shell脚本可以用于相同的目的，并且速度更快：</p>
<div class="example">
<pre class="example">#! /bin/sh
sed -e &quot;=&quot; $@ | sed -e '
  s/^/      /
  N
  s/^ *\(......\)\n/\1  /
'
</pre></div>

<p>它用<code>sed</code>打印行号，然后使用<code>N</code> 。当然，此脚本的教学内容不如以下所示。
</p>
<p>用于递增的算法使用两个缓冲区，因此将尽快打印该行，然后将其丢弃。数字是分开的，以便使更改的数字进入缓冲区，而未更改的数字进入另一缓冲区；更改的数字可以一步修改（使用<code>y</code>命令）。然后，组成下一行的行号并将其存储在保留空间中，以在下一次迭代中使用。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Prime the pump on the first line
x
/^$/ s/^.*$/1/
</pre><pre class="example">

</pre><pre class="example"># Add the correct line number before the pattern
G
h
</pre><pre class="example">

</pre><pre class="example"># Format it and print it
s/^/      /
s/^ *\(......\)\n/\1  /p
</pre><pre class="example">

</pre><pre class="example"># Get the line number from hold space; add a zero
# if we're going to add a digit on the next line
g
s/\n.*$//
/^9*$/ s/^/0/
</pre><pre class="example">

</pre><pre class="example"># separate changing/unchanged digits with an x
s/.9*$/x&amp;/
</pre><pre class="example">

</pre><pre class="example"># keep changing digits in hold space
h
s/^.*x//
y/0123456789/1234567890/
x
</pre><pre class="example">

</pre><pre class="example"># keep unchanged digits in pattern space
s/x.*$//
</pre><pre class="example">

</pre><pre class="example"># compose the new number, remove the newline implicitly added by G
G
s/\n//
h
</pre></div>

<hr>
<a name="cat-_002db"></a>
<div class="header">
<p>下一篇： <a href="#wc-_002dc" rel="next" accesskey="n">wc -c</a> ，上一篇： <a href="#cat-_002dn" rel="prev" accesskey="p">cat -n</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Numbering-Non_002dblank-Lines"></a>
<h3 class="section">7.11为非空白行编号</h3>

<p>模拟' <samp>cat -b</samp> '与'几乎相同<samp>cat -n</samp> '-我们只需要选择要编号的行和不编号的行。
</p>
<p>此脚本和上一个脚本共有的部分未进行注释，以表明注释的重要性<code>sed</code>脚本正确...
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">/^$/ {
  p
  b
}
</pre><pre class="example">

</pre><pre class="example"># Same as cat -n from now
x
/^$/ s/^.*$/1/
G
h
s/^/      /
s/^ *\(......\)\n/\1  /p
x
s/\n.*$//
/^9*$/ s/^/0/
s/.9*$/x&amp;/
h
s/^.*x//
y/0123456789/1234567890/
x
s/x.*$//
G
s/\n//
h
</pre></div>

<hr>
<a name="wc-_002dc"></a>
<div class="header">
<p>下一篇： <a href="#wc-_002dw" rel="next" accesskey="n">wc -w</a> ，上一篇： <a href="#cat-_002db" rel="prev" accesskey="p">cat -b</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Counting-Characters"></a>
<h3 class="section">7.12计数字符</h3>

<p>该脚本显示了另一种进行算术运算的方法<code>sed</code> 。在这种情况下，我们必须添加可能较大的数字，因此以连续的增量实现此目标将不可行（并且可能比此脚本还要复杂得多）。
</p>
<p>该方法是将数字映射到字母，这是一种使用算盘实现的算盘。 <code>sed</code> 。 ' <samp>a</samp>是单位， <samp>b</samp>的单位是十，以此类推：我们只需将当前行中的字符数添加为单位，然后将进位传播到数十，数百等。
</p>
<p>像往常一样，运行总计保留在等待空间中。
</p>
<p>在最后一行，我们将算盘形式转换回十进制。出于多样性考虑，这是通过循环而不是大约80 <code>s</code>命令<a name="DOCF11" href="#FOOT11"><sup>11</sup></a> ：首先，我们转换单位，删除“ <samp>a</samp>的数字；然后我们旋转字母，使十变为<samp>a</samp> ，以此类推，直到没有更多字母为止。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Add n+1 a's to hold space (+1 is for the newline)
s/./a/g
H
x
s/\n/a/
</pre><pre class="example">

</pre><pre class="example"># Do the carry.  The t's and b's are not necessary,
# but they do speed up the thing
t a
: a;  s/aaaaaaaaaa/b/g; t b; b done
: b;  s/bbbbbbbbbb/c/g; t c; b done
: c;  s/cccccccccc/d/g; t d; b done
: d;  s/dddddddddd/e/g; t e; b done
: e;  s/eeeeeeeeee/f/g; t f; b done
: f;  s/ffffffffff/g/g; t g; b done
: g;  s/gggggggggg/h/g; t h; b done
: h;  s/hhhhhhhhhh//g
</pre><pre class="example">

</pre><pre class="example">: done
$! {
  h
  b
}
</pre><pre class="example">

# On the last line, convert back to decimal

</pre><pre class="example">: loop
/a/! s/[b-h]*/&amp;0/
s/aaaaaaaaa/9/
s/aaaaaaaa/8/
s/aaaaaaa/7/
s/aaaaaa/6/
s/aaaaa/5/
s/aaaa/4/
s/aaa/3/
s/aa/2/
s/a/1/
</pre><pre class="example">

</pre><pre class="example">: next
y/bcdefgh/abcdefg/
/[a-h]/ b loop
p
</pre></div>

<hr>
<a name="wc-_002dw"></a>
<div class="header">
<p>下一篇： <a href="#wc-_002dl" rel="next" accesskey="n">wc -l</a> ，上一篇： <a href="#wc-_002dl" rel="next" accesskey="n">wc</a> <a href="#wc-_002dc" rel="prev" accesskey="p">-c</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Counting-Words"></a>
<h3 class="section">7.13数词</h3>

<p>一旦将行中的每个单词都转换为一个' <samp>a</samp> '（在上一个脚本中，每个字母都变成了' <samp>a</samp> '）。
</p>
<p>有趣的是<code>wc</code>程序针对“ <samp>wc -c</samp> '，因此它们在计算单词而不是字符时要慢得多。相反，此脚本的瓶颈是算术，因此单词计数一个更快（它必须管理较小的数字）。
</p>
<p>同样，不对公共部分进行评论以显示评论的重要性<code>sed</code>脚本。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Convert words to a's
s/[ <kbd><span class="key">TAB</span></kbd>][ <kbd><span class="key">TAB</span></kbd>]*/ /g
s/^/ /
s/ [^ ][^ ]*/a /g
s/ //g
</pre><pre class="example">

</pre><pre class="example"># Append them to hold space
H
x
s/\n//
</pre><pre class="example">

</pre><pre class="example"># From here on it is the same as in wc -c.
/aaaaaaaaaa/! bx;   s/aaaaaaaaaa/b/g
/bbbbbbbbbb/! bx;   s/bbbbbbbbbb/c/g
/cccccccccc/! bx;   s/cccccccccc/d/g
/dddddddddd/! bx;   s/dddddddddd/e/g
/eeeeeeeeee/! bx;   s/eeeeeeeeee/f/g
/ffffffffff/! bx;   s/ffffffffff/g/g
/gggggggggg/! bx;   s/gggggggggg/h/g
s/hhhhhhhhhh//g
:x
$! { h; b; }
:y
/a/! s/[b-h]*/&amp;0/
s/aaaaaaaaa/9/
s/aaaaaaaa/8/
s/aaaaaaa/7/
s/aaaaaa/6/
s/aaaaa/5/
s/aaaa/4/
s/aaa/3/
s/aa/2/
s/a/1/
y/bcdefgh/abcdefg/
/[a-h]/ by
p
</pre></div>

<hr>
<a name="wc-_002dl"></a>
<div class="header">
<p>下一个： <a href="#head" rel="next" accesskey="n">head</a> ，上一个： <a href="#wc-_002dw" rel="prev" accesskey="p">wc -w</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Counting-Lines"></a>
<h3 class="section">7.14计数线</h3>

<p>现在没有奇怪的事情发生，因为<code>sed</code>给我们 ' <samp>wc -l</samp> '功能免费！！！看：</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf
$=
</pre></div>

<hr>
<a name="head"></a>
<div class="header">
<p>下一页： <a href="#tail" rel="next" accesskey="n">tail</a> ，上一篇： <a href="#wc-_002dl" rel="prev" accesskey="p">wc -l</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Printing-the-First-Lines"></a>
<h3 class="section">7.15打印第一行</h3>

<p>该脚本可能是最简单的有用<code>sed</code>脚本。它显示前十行输入；显示的行数正好在<code>q</code>命令。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f
10q
</pre></div>

<hr>
<a name="tail"></a>
<div class="header">
<p>下一篇： <a href="#uniq" rel="next" accesskey="n">uniq</a> ，上一篇： <a href="#head" rel="prev" accesskey="p">head</a> ，上一页： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Printing-the-Last-Lines"></a>
<h3 class="section">7.16打印最后几行</h3>

<p>打印最后一个<var>n</var>行而不是第一行更复杂，但确实可行。 <var>n</var>被编码在第二行，爆炸字符之前。
</p>
<p>该脚本类似于<code>tac</code>脚本，它将最终输出保留在保持空间中，并在最后打印：</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">1! {; H; g; }
1,10 !s/[^\n]*\n//
$p
h
</pre></div>

<p>主要是，脚本保留一个10行的窗口，并通过添加一行并删除最旧的窗口来滑动它（第二行上的替换命令的工作方式类似于<code>D</code>命令，但不会重新启动循环）。
</p>
<p>“滑动窗口”技术是一种高效而复杂的书写方式<code>sed</code>脚本，因为命令像<code>P</code>如果手动实施，将需要大量工作。
</p>
<p>为了介绍该技术，本技术将在本章的其余部分中进行充分说明，该技术基于<code>N</code> ， <code>P</code>和<code>D</code>命令，这是一个实现<code>tail</code>使用简单的“滑动窗口”。
</p>
<p>这看起来很复杂，但实际上其工作与上一个脚本相同：但是，在我们插入适当数量的行之后，我们停止使用保持空间来保持行间状态，而是使用<code>N</code>和<code>D</code>将图案空间滑动一行：</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example">1h
2,10 {; H; g; }
$q
1,9d
N
D
</pre></div>

<p>请注意在输入的前十行之后第一行，第二行和第四行是不活动的。之后，所有脚本要做的是：在输入的最后一行退出，将下一个输入行追加到模式空间，并删除第一行。
</p>
<hr>
<a name="uniq"></a>
<div class="header">
<p>下一篇： <a href="#uniq-_002dd" rel="next" accesskey="n">uniq -d</a> ，上一篇： <a href="#tail" rel="prev" accesskey="p">tail</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Make-Duplicate-Lines-Unique"></a>
<h3 class="section">7.17使重复的行唯一</h3>

<p>这是使用<code>N</code> ， <code>P</code>和<code>D</code>命令，可能是最难掌握的。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f
h
</pre><pre class="example">

</pre><pre class="example">:b
# On the last line, print and exit
$b
N
/^\(.*\)\n\1$/ {
    # The two lines are identical.  Undo the effect of
    # the n command.
    g
    bb
}
</pre><pre class="example">

</pre><pre class="example"># If the <code>N</code> command had added the last line, print and exit
$b
</pre><pre class="example">

</pre><pre class="example"># The lines are different; print the first and go
# back working on the second.
P
D
</pre></div>

<p>如您所见，我们使用<code>P</code>和<code>D</code> 。此技术常用于高级<code>sed</code>脚本。
</p>
<hr>
<a name="uniq-_002dd"></a>
<div class="header">
<p>下一页： <a href="#uniq-_002du" rel="next" accesskey="n">uniq的-u</a> ，上一篇： <a href="#uniq" rel="prev" accesskey="p">uniq的</a> ，向上： <a href="#Examples" rel="up" accesskey="u">实例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">内容</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Print-Duplicated-Lines-of-Input"></a>
<h3 class="section">7.18打印输入的重复行</h3>

<p>该脚本仅打印重复的行，例如“ <samp>uniq -d</samp> '。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">$b
N
/^\(.*\)\n\1$/ {
    # Print the first of the duplicated lines
    s/.*\n//
    p
</pre><pre class="example">

</pre><pre class="example">    # Loop until we get a different line
    :b
    $b
    N
    /^\(.*\)\n\1$/ {
        s/.*\n//
        bb
    }
}
</pre><pre class="example">

</pre><pre class="example"># The last line cannot be followed by duplicates
$b
</pre><pre class="example">

</pre><pre class="example"># Found a different one.  Leave it alone in the pattern space
# and go back to the top, hunting its duplicates
D
</pre></div>

<hr>
<a name="uniq-_002du"></a>
<div class="header">
<p>下一篇： <a href="#cat-_002ds" rel="next" accesskey="n">cat -s</a> ，上一篇： <a href="#uniq-_002dd" rel="prev" accesskey="p">uniq -d</a> ，上一篇： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Remove-All-Duplicated-Lines"></a>
<h3 class="section">7.19删除所有重复的行</h3>

<p>该脚本仅打印唯一的行，例如“ <samp>uniq -u</samp> '。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># Search for a duplicate line --- until that, print what you find.
$b
N
/^\(.*\)\n\1$/ ! {
    P
    D
}
</pre><pre class="example">

</pre><pre class="example">:c
# Got two equal lines in pattern space.  At the
# end of the file we simply exit
$d
</pre><pre class="example">

</pre><pre class="example"># Else, we keep reading lines with <code>N</code> until we
# find a different one
s/.*\n//
N
/^\(.*\)\n\1$/ {
    bc
}
</pre><pre class="example">

</pre><pre class="example"># Remove the last instance of the duplicate line
# and go back to the top
D
</pre></div>

<hr>
<a name="cat-_002ds"></a>
<div class="header">
<p>上一页： <a href="#uniq-_002du" rel="prev" accesskey="p">uniq -u</a> ，上： <a href="#Examples" rel="up" accesskey="u">示例</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Squeezing-Blank-Lines"></a>
<h3 class="section">7.20挤压空白行</h3>

<p>最后一个例子是以下三个脚本，它们的复杂度和速度都在不断提高，它们实现的功能与“ <samp>cat -s</samp> '，那就是压缩空白行。
</p>
<p>第一个在开头和结尾处留空行（如果已有的话）。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># on empty lines, join with next
# Note there is a star in the regexp
:x
/^\n*$/ {
N
bx
}
</pre><pre class="example">

</pre><pre class="example"># now, squeeze all '\n', this can be also done by:
# s/^\(\n\)*/\1/
s/\n*/\
/
</pre></div>

<p>这一点比较复杂，并且一开始就删除了所有空行。如果有的话，它的确会在末尾留下一个空白行。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># delete all leading empty lines
1,/^./{
/./!d
}
</pre><pre class="example">

</pre><pre class="example"># on an empty line we remove it and all the following
# empty lines, but one
:x
/./!{
N
s/^\n$//
tx
}
</pre></div>

<p>这将删除前导和尾随的空白行。它也是最快的。注意循环是完全用<code>n</code>和<code>b</code> ，不依赖<code>sed</code>在行尾自动重启脚本。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># delete all (leading) blanks
/./!d
</pre><pre class="example">

</pre><pre class="example"># get here: so there is a non empty
:x
# print it
p
# get next
n
# got chars? print it again, etc...
/./bx
</pre><pre class="example">

</pre><pre class="example"># no, don't have chars: got an empty line
:z
# get next, if last line we finish here so no trailing
# empty lines are written
n
# also empty? then ignore it, and get next... this will
# remove ALL empty lines
/./!bz
</pre><pre class="example">

</pre><pre class="example"># all empty lines were deleted/ignored, but we have a non empty.  As
# what we want to do is to squeeze, insert a blank line artificially
i\
</pre><pre class="example">

bx
</pre></div>

<hr>
<a name="Limitations"></a>
<div class="header">
<p>下一页： <a href="#Other-Resources" rel="next" accesskey="n">其他资源</a> ，上一页： <a href="#Examples" rel="prev" accesskey="p">示例</a> ，上一页： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="GNU-sed_0027s-Limitations-and-Non_002dlimitations"></a>
<h2 class="chapter">8个GNU <code>sed</code>的局限性和非局限性</h2>

<a name="index-GNU-extensions_002c-unlimited-line-length"></a>
<a name="index-Portability_002c-line-length-limitations"></a>
<p>对于那些想写便携式的人<code>sed</code>脚本，请注意，已知某些实现将行长（用于模式和保留空间）限制为不超过4000字节。<small>POSIX</small>标准规定<code>sed</code>实现应至少支持8192字节的行长。GNU <code>sed</code>线长没有内置限制；只要可以<code>malloc()</code>更多（虚拟）内存，您可以根据需要提供或构造行。
</p>
<p>但是，递归用于处理子模式和不确定的重复。这意味着可用的堆栈空间可能会限制某些模式可以处理的缓冲区的大小。
</p>

<hr>
<a name="Other-Resources"></a>
<div class="header">
<p>下一篇： <a href="#Reporting-Bugs" rel="next" accesskey="n">报告错误</a> ，上一篇： <a href="#Limitations" rel="prev" accesskey="p">限制</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Other-Resources-for-Learning-About-sed"></a>
<h2 class="chapter">9其他学习资源<code>sed</code></h2>

<p>有关GNU的最新信息<code>sed</code>请访问<a href="https://www.gnu.org/software/sed/">https://www.gnu.org/software/sed/</a> 。</p>
<p>将一般问题和建议发送到<a href="mailto:sed-devel@gnu.org">sed-devel@gnu.org</a> 。访问<a href="https://lists.gnu.org/archive/html/sed-devel/">https://lists.gnu.org/archive/html/sed-devel/上</a>的邮件列表归档以进行以前的讨论。</p>
<a name="index-Additional-reading-about-sed"></a>
<p>以下资源提供有关的信息<code>sed</code> （都是GNU <code>sed</code>和其他变体）。请注意，这些不是由GNU维护的<code>sed</code>开发人员。
</p>
<ul>
<li>sed <code>$HOME</code> ： <a href="http://sed.sf.net">http</a> ： <a href="http://sed.sf.net">//sed.sf.net</a>

</li><li>sed常见问题解答： <a href="http://sed.sf.net/sedfaq.html">http</a> ： <a href="http://sed.sf.net/sedfaq.html">//sed.sf.net/sedfaq.html</a>

</li><li>塞德的手提包： <a href="http://sed.sf.net/grabbag">http</a> ://sed.sf.net/grabbag

</li><li>的<code>sed-users</code> Sven Guckes维护的邮件列表： <a href="http://groups.yahoo.com/group/sed-users/">http</a> ://groups.yahoo.com/group/sed-users/（请注意，这<em>不是</em> GNU <code>sed</code>邮件列表）。

</li></ul>

<hr>
<a name="Reporting-Bugs"></a>
<div class="header">
<p>下一篇： <a href="#GNU-Free-Documentation-License" rel="next" accesskey="n">GNU自由文档许可证</a> ，上一篇： <a href="#Other-Resources" rel="prev" accesskey="p">其他资源</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Reporting-Bugs-1"></a>
<h2 class="chapter">10个报告错误</h2>

<a name="index-Bugs_002c-reporting"></a>
<p>将错误报告通过电子邮件发送至<a href="mailto:bug-sed@gnu.org">bug-sed@gnu.org</a> 。另外，请包括“ <samp>sed --version</samp> ”（如果可能）。
</p>
<p>请不要发送这样的错误报告：</p>
<div class="example">
<pre class="example"><i><i><span class="roman">while building frobme-1.3.4</span></i></i>
$ configure
error&rarr; sed: file sedscr line 1: Unknown option to 's'
</pre></div>

<p>如果是GNU <code>sed</code>不会配置您喜欢的软件包，需要花几分钟的时间来确定具体问题并制作独立的测试用例。与其他程序（例如C编译器）不同，为<code>sed</code>很简单
</p>
<p>一个独立的测试用例包括执行测试所需的所有数据，以及特定的调用<code>sed</code>导致问题。独立测试用例越小越好。测试用例不应涉及距离<code>sed</code>如“尝试配置frobme-1.3.4”。是的，从原理上讲，这是足够的信息来查找错误，但这不是一个非常实际的前景。
</p>
<p>以下是一些通常报告的错误，而不是错误。
</p>
<dl compact>
<dd><a name="N_005fcommand_005flast_005fline"></a></dd>
<dt><code>N</code>最后一行的命令</dt>
<dd><a name="index-Portability_002c-N-command-on-the-last-line"></a>
<a name="index-Non_002dbugs_002c-N-command-on-the-last-line"></a>

<p>大多数版本<code>sed</code>退出时不打印任何内容<code>N</code>命令在文件的最后一行发出。GNU <code>sed</code>退出前打印模式空间，除非<code>-n</code>已指定命令开关。此选择是设计使然。
</p>
<p>默认行为（gnu扩展，不符合POSIX）：</p><div class="example">
<pre class="example">$ seq 3 | sed N
1
2
3
</pre></div>
<p>要强制符合POSIX的行为：</p><div class="example">
<pre class="example">$ seq 3 | sed --posix N
1
2
</pre></div>

<p>例如，行为</p><div class="example">
<pre class="example">sed N foo bar
</pre></div>
<p>取决于foo是否具有偶数或奇数行<a name="DOCF12" href="#FOOT12"><sup>12</sup></a> 。或者，在编写脚本以读取模式匹配后的下几行时，传统的实现<code>sed</code>会迫使你写一些像</p><div class="example">
<pre class="example">/foo/{ $!N; $!N; $!N; $!N; $!N; $!N; $!N; $!N; $!N }
</pre></div>
<p>而不只是</p><div class="example">
<pre class="example">/foo/{ N;N;N;N;N;N;N;N;N; }
</pre></div>

<a name="index-POSIXLY_005fCORRECT-behavior_002c-N-command"></a>
<p>无论如何，最简单的解决方法是使用<code>$d;N</code>在依靠传统行为的脚本中，或设置<code>POSIXLY_CORRECT</code>变量为非空值。
</p>
</dd>
<dt>正则表达式语法冲突（反斜杠问题）</dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-5"></a>
<a name="index-Non_002dbugs_002c-regex-syntax-clashes"></a>
<p><code>sed</code>使用<small>POSIX</small>基本正则表达式语法。根据标准，某些转义序列的含义在此语法中未定义；在以下情况下值得注意<code>sed</code>是<code>\|</code> ， <code>\+</code> ， <code>\?</code> ， <code>\`</code> ， <code>\'</code> ， <code>\<</code> ， <code>\></code> ， <code>\b</code> ， <code>\B</code> ， <code>\w</code>和<code>\W</code> 。
</p>
<p>与所有使用<small>POSIX</small>基本正则表达式的GNU程序一样， <code>sed</code>将这些转义序列解释为特殊字符。所以， <code>x\+</code>匹配一个或多个“ <samp>x</samp> '。
<code>abc\|def</code>匹配“ <samp>abc</samp> ' 要么 ' <samp>def</samp> '。
</p>
<p>运行为其他脚本编写的脚本时，此语法可能会导致问题<code>sed</code> s。一些<code>sed</code>程序是在假设<code>\|</code>和<code>\+</code>匹配文字字符<code>|</code>和<code>+</code> 。如果要将这些脚本与现代的实现一起使用，则必须通过删除虚假的反斜杠来对其进行修改。 <code>sed</code>像GNU <code>sed</code> 。
</p>
<p>另一方面，某些脚本使用s | abc \ | def || g删除<em>其中任何一个的</em>出现<code>abc</code>要么<code>def</code> 。虽然这个工作直到<code>sed</code> 4.0.x，较新的版本将其解释为删除字符串<code>abc|def</code> 。根据POSIX，这仍然是未定义的行为，并且这种解释可以说更健壮：较旧<code>sed</code>例如，要求regex匹配器解析<code>\/</code>如<code>/</code>在逃脱斜杠的常见情况下，这也是未定义的行为；新的行为避免了这种情况，这很好，因为正则表达式匹配器仅部分处于我们的控制之下。
</p>
<a name="index-GNU-extensions_002c-special-escapes-1"></a>
<p>另外，这个版本的<code>sed</code>支持多个转义字符（其中一些是多字符），以便在脚本中插入不可打印的字符（ <code>\a</code> ， <code>\c</code> ， <code>\d</code> ， <code>\o</code> ， <code>\r</code> ， <code>\t</code> ， <code>\v</code> ， <code>\x</code> ）。这些可能会为其他脚本编写的脚本引起类似的问题<code>sed</code> s。
</p>
</dd>
<dt><samp>-i</samp> Clobbers只读文件</dt>
<dd><a name="index-In_002dplace-editing"></a>
<a name="index-GNU-extensions_002c-in_002dplace-editing-1"></a>
<a name="index-Non_002dbugs_002c-in_002dplace-editing"></a>

<p>简而言之， ' <samp>sed -i</samp> '将让您删除只读文件的内容，通常<samp>-i</samp>选项（请参阅<a href="#Invoking-sed">Invocation</a> ）可让您破坏受保护的文件。这不是错误，而是Unix文件系统工作方式的结果。
</p>
<p>文件权限说明该文件中的数据可能发生的情况，而目录权限说明该目录中的文件列表可能发生的情况。' <samp>sed -i</samp> '将永远不会打开以写入磁盘上已经存在的文件。相反，它将在最终重命名为原始名称的临时文件上起作用：如果重命名或删除文件，则实际上是在修改目录的内容，因此操作取决于目录的权限，而不是目录的权限。文件。出于同样的原因， <code>sed</code>不让你使用<samp>-i</samp>在只读目录中的可写文件上，并且在出现以下情况时会断开硬链接或符号链接<samp>-i</samp>用于此类文件。
</p>
</dd>
<dt><code>0a</code>不起作用（给出错误）</dt>
<dd><a name="index-0-address"></a>
<a name="index-GNU-extensions_002c-0-address-1"></a>
<a name="index-Non_002dbugs_002c-0-address"></a>

<p>没有第0行。0是一个特殊地址，仅用于处理类似<code>0,/<var>RE</var>/</code>脚本启动时处于活动状态：如果您编写<code>1,/abc/d</code>第一行包含单词“ <samp>abc</samp> '，那么该匹配将被忽略，因为地址范围必须至少跨越两行（除非文件末尾）；但是您可能想要删除的每一行直到第一行，包括“ <samp>abc</samp> '，这是通过<code>0,/abc/d</code> 。
</p>
</dd>
<dt><code>[a-z]</code>不区分大小写</dt>
<dd><a name="index-Non_002dbugs_002c-localization_002drelated"></a>

<p>您遇到语言环境问题。POSIX要求<code>[a-z]</code>使用当前语言环境的整理顺序-用C的话来说，这意味着使用<code>strcoll(3)</code>代替<code>strcmp(3)</code> 。一些语言环境的排序规则不区分大小写，而其他语言环境则没有。
</p>
<p>另一个问题是<code>[a-z]</code>尝试使用归类符号。仅当您在GNU系统上时，才使用GNU libc的正则表达式匹配器，而不是编译GNU sed附带的那个。例如，在丹麦语言环境中，正则表达式<code>^[a-z]$</code>匹配字符串“ <samp>aa</samp> '，因为这是'之后的单个整理符号<samp>a</samp> '和之前' <samp>b</samp> '; ' <samp>ll</samp> '在西班牙语语言环境中的行为类似，或者' <samp>ij</samp> '在荷兰语言环境中。
</p>
<p>要解决这些可能导致shell脚本错误的问题，请设置<code>LC_COLLATE</code>和<code>LC_CTYPE</code>环境变量<samp>C</samp> '。
</p>
</dd>
<dt><code>s/.*//</code>不清除图案空间</dt>
<dd><a name="index-Non_002dbugs_002c-localization_002drelated-1"></a>
<a name="index-GNU-extensions_002c-emptying-pattern-space-1"></a>
<a name="index-Emptying-pattern-space-1"></a>

<p>如果您的输入流包含无效的多字节序列，则会发生这种情况。<small>POSIX</small>要求此类序列<em>不得</em>与' <samp>.</samp> '， 以便 ' <samp>s/.*//</samp> '不会像您期望的那样清除模式空间。实际上，在大多数多字节语言环境（包括UTF-8语言环境）中，无法清除脚本中间的sed缓冲区。因此，GNU <code>sed</code>提供“ z”命令（用于“ zap”）作为扩展名。
</p>
<p>要解决这些可能导致shell脚本错误的问题，请设置<code>LC_COLLATE</code>和<code>LC_CTYPE</code>环境变量<samp>C</samp> '。
</p></dd>
</dl>




<hr>
<a name="GNU-Free-Documentation-License"></a>
<div class="header">
<p>下一篇： <a href="#Concept-Index" rel="next" accesskey="n">概念索引</a> ，上一篇： <a href="#Reporting-Bugs" rel="prev" accesskey="p">报告错误</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="GNU-Free-Documentation-License-1"></a>
<h2 class="appendix">附录A GNU自由文档许可证</h2>

<div align="center">1.3版，2008年11月3日</div>

<div class="display">
<pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="https://fsf.org/">https://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol start="0">
<li>前言<p>本许可的目的是免费提供手册，教科书或其他实用且有用的文档： <em>自由</em> ，以确保每个人都有有效的自由，无论是否进行商业或非商业修改，都可以对其进行复制和重新分发。其次，本许可证为作者和出版商保留了一种因其作品而获得好评的方式，同时不被视为对他人所做的修改负责。
</p>
<p>该许可是一种“版权所有”，这意味着该文档的衍生作品本身必须在相同意义上是免费的。它是GNU通用公共许可证的补充，GNU通用公共许可证是专为自由软件设计的Copyleft许可证。
</p>
<p>我们设计此许可证是为了将其用于免费软件的手册，因为免费软件需要免费的文档：免费程序应随附手册，以提供与软件相同的自由。但是本许可不限于软件手册；它可以用于任何文本作品，而无论其主题是什么，或者它是否作为印刷书籍出版。我们建议您将此许可证主要用于目的是作为指导或参考的作品。
</p>
</li><li>适用性和定义<p>本许可适用于任何形式的任何手册或其他作品，其中包含版权所有者发布的声明，声明其可以根据本许可的条款进行分发。此类通知授予了全球范围内的免版税使用许可，期限不限，可以在此处所述的条件下使用该作品。下面的“文档”是指任何此类手册或作品。任何公众人士都是被许可人，称呼为“您”。如果您按照版权法要求许可的方式复制，修改或分发作品，则您接受许可。
</p>
<p>文档的“修改版本”是指包含文档或文档一部分的任何作品，无论是逐字复制还是经过修改和/或翻译成另一种语言。
</p>
<p>“第二部分”是本文档的命名附录或最重要的部分，专门处理本文档的出版者或作者与本文档的整体主题（或相关事宜）之间的关系，不包含任何可能直接涉及的内容。在整个主题范围内。（因此，如果该文档部分是一本数学教科书，那么第二部分可能不会解释任何数学。）这种关系可以是与主题或相关问题的历史联系，也可以是关于它们的法律，商业，哲学，伦理或政治立场。
</p>
<p>“不变部分”是某些二级部分，在其声明中指出，该文件的标题与不变部分的标题相同，即该文件是根据本许可发布的。如果某个部分不符合上面对“辅助”的定义，则不允许将其指定为“不变式”。该文档可能包含零个不变部分。如果文档未标识任何不变节，则没有任何不变节。
</p>
<p>“封面文字”是某些简短的文本段落，在声明中指出该文档是根据本许可发布的，这些文字作为“封面文字”或“封面文字”列出。“封面文本”最多可以包含5个字，“封面文本”最多可以包含25个字。
</p>
<p>文档的“透明”副本是指一种机器可读的副本，以其规格可供大众使用的格式表示，适用于使用通用文本编辑器或（对于由像素组成的图像）通用颜料进行直接修改的文档程序或（用于绘图的）一些广泛使用的绘图编辑器，并且适合于输入文本格式化程序或自动转换为适合输入到文本格式化程序的多种格式。以其他方式透明的文件格式制作的副本，其标记或没有标记的安排，可以阻止或阻止读者的后续修改，则该副本不是透明的。如果用于大量文本，则图像格式不是“透明”的。非“透明”的副本称为“不透明”。
</p>
<p>适用于透明副本的格式的示例包括不带标记的纯ASCII，Texinfo输入格式，LaTeX输入格式，使用公开可用的DTD的SGML或XML，以及设计用于人工修改的符合标准的简单HTML，PostScript或PDF。透明图像格式的示例包括PNG，XCF和JPG。不透明格式包括只能由专有文字处理器，SGML或XML读取和编辑的专有格式，而SGML或XML通常不提供DTD和/或处理工具，以及某些文字处理器为某些文字处理器生成的机器生成的HTML，PostScript或PDF仅用于输出目的。
</p>
<p>“标题页”对于印刷书籍而言，是指标题页本身，以及以下用于保持本许可证要求在标题页中显示的材料的以下页面。对于没有此类标题页的格式的作品，“标题页”是指在文本正文开头之前，靠近作品标题最突出外观的文本。
</p>
<p>“发布者”是指向公众分发文档副本的任何个人或实体。
</p>
<p>“标题为XYZ”一节是指文档的命名子单元，其标题恰好是XYZ或在括号中包含XYZ的文字，后面是将XYZ转换为另一种语言的文字。（此处XYZ代表以下提到的特定部分名称，例如“致谢”，“奉献”，“认可”或“历史记录”。）在修改文档时，要“保留此部分的标题”，则意味着根据此定义，该部分仍为“已命名的XYZ”部分。
</p>
<p>该文件的声明旁边可能包含“免责声明”，该声明指出本许可适用于该文件。这些保修免责声明被视为已包含在本许可中，但仅用于免责声明：这些保修免责声明可能具有的任何其他暗示都是无效的，并且对本许可的含义没有任何影响。
</p>
</li><li>VERBATIM复制<p>您可以在任何媒介中以商业或非商业方式复制和分发本文档，但前提是本许可，版权声明和声明本许可适用于本文档的许可声明均以所有副本形式复制，并且您不添加任何其他条件符合本许可的规定。您不得使用技术措施来阻碍或控制您复制或分发的副本的阅读或进一步复制。但是，您可以接受赔偿以换取副本。如果分发足够多的副本，则还必须遵循第3节中的条件。
</p>
<p>您还可以在上述相同条件下出借副本，并可以公开展示副本。
</p>
</li><li>大量复制<p>如果您发布文档的印刷副本（或通常具有印刷封面的介质副本），且编号超过100，并且文档的许可通知书要求包含封面文字，则必须将这些副本随附在清晰可见的所有文档中封面文字：封面上的封面文字和封底上的封面文字。两种封面都必须清楚，清楚地标识您是这些副本的发行者。封面必须显示完整的标题，标题中的所有单词均应同样醒目且可见。您还可以在封面上添加其他材料。只要封面保留了文档标题并满足这些条件，则仅对封面进行更改即可在其他方面被视为逐字复印。
</p>
<p>如果任何一个封面所需的文本量太大，无法清晰地容纳，则应将列出的第一个（合理合理的数量）放在实际的封面上，然后将其余部分继续放在相邻的页面上。
</p>
<p>如果您发布或分发的Opaque文档副本数量超过100，则必须在每份Opaque副本中包含机器可读的透明副本，或者在每份Opaque副本中或其中声明一个计算机网络位置，通用网络将从该位置开始使用public可以使用公共标准网络协议下载完整的文档透明副本，而无需添加任何材料。如果使用后一种选项，则在开始批量分发不透明副本时，必须采取合理的审慎步骤，以确保该透明副本将在指定位置保持可访问的状态，直到您上一次分发不透明副本至少一年之后。该版本的不透明副本（直接或通过您的代理商或零售商）向公众发布。
</p>
<p>要求（但不是必须）在重新分发大量副本之前，与文档作者保持良好联系，以便他们有机会为您提供文档的更新版本。
</p>
</li><li>修改方式<p>您可以在上述第2节和第3节的条件下复制和分发本文档的修改版本，前提是您严格按照本许可协议发布修改版本，而修改版本则充当文档的角色，从而许可对本文档的分发和修改拥有副本的修改版本。此外，您必须在修改后的版本中执行以下操作：</p>
<ol type="A" start="1">
<li>在标题页（和封面，如果有的话）中使用与本文档以及先前版本（如果有的话，应在文档的“历史记录”部分中列出）不同的标题。如果该版本的原始发行者给予许可，则可以使用与先前版本相同的标题。

</li><li>在标题页上列出作者，一个或多个负责修改版本著作权的作者或实体，以及至少五名文档的主要作者（所有主要作者，如果少于五），除非他们使您脱离此要求。

</li><li>在“标题”页面上声明修改版本的发布者的名称，作为发布者。

</li><li>保留文档的所有版权声明。

</li><li>在其他版权声明旁边添加用于修改的适当版权声明。

</li><li>在版权声明之后，立即包含一个许可声明，以下面的附录中所示的形式，向公众授予根据本许可条款使用修改版的许可。

</li><li>在该许可证声明中保留不可变部分的完整列表以及文档的许可证声明中提供的必需封面文字。

</li><li>随附本许可证的未更改副本。

</li><li>保留标题为“历史”的部分，保留其标题，并在其上添加至少说明标题页上给出的修改版本的标题，年份，新作者和发行者的项目。如果文档中没有标题为“历史记录”的部分，请在其标题页上创建一个说明文档的标题，年份，作者和出版者的内容，然后添加一项描述上一句中所述的修改版本。

</li><li>保留文档中给出的网络位置（如果有），以供公众访问文档的透明副本，同样，保留文档中给出的基于其以前版本的网络位置。这些可以放在“历史记录”部分中。对于在文档本身之前至少四年出版的作品，或者如果其所指版本的原始发行者给予许可，您可以省略其网络位置。

</li><li>对于标题为“致谢”或“奉献”的任何部分，请保留本部分的标题，并在本部分中保留其中给出的每个贡献者致谢和/或奉献的所有内容和基调。

</li><li>保留文档的所有不变部分，其文本和标题保持不变。章节编号或同等编号不视为章节标题的一部分。

</li><li>删除任何标题为“背书”的部分。这样的部分可能不包含在修改版本中。

</li><li>请勿将任何现有部分的标题重命名为“背书”，或与任何不变部分的标题冲突。

</li><li>保留所有保修免责声明。
</li></ol>

<p>如果修改后的版本包括新的前节或附录，这些节或附录符合第二节的规定，并且不包含从文档中复制的材料，则可以选择将其中的部分或全部指定为不变的。为此，请将其标题添加到“修改版本”许可声明中的“不变部分”列表中。这些标题必须与任何其他节标题不同。
</p>
<p>您可以添加标题为“背书”的部分，但其中仅包含各方对您的修改版本的背书，例如，同行评审声明或该文本已被组织批准为标准的权威定义。
</p>
<p>您可以在修改版本的封面文本列表的末尾添加最多5个单词的段落作为“封面文本”，以及最多25个单词的段落作为“封面文本”。任何一个实体（或通过它们的安排）都只能添加“封面文字”和“封面文字”中的一个段落。如果文档已经包含同一封面的封面文字，该文字是您先前添加的或由您代表的同一实体做出的安排而添加的，则不得添加其他文字；但是您可以在添加了旧版本的以前的发布者的明确许可下替换旧版本。
</p>
<p>本文档的作者和发行者未获得本许可证的许可，不得使用其名称进行宣传或主张或暗示认可任何修改版本。
</p>
</li><li>合并文件<p>您可以根据上文第4节中针对修改版本定义的条款，将文档与根据本许可发布的其他文档进行组合，但前提是您必须将所有未经修改的原始文档的所有不变部分都包含在其中，并列出所有这些文档作为您许可协议中合并工作的不变部分，并保留其所有保修免责声明。
</p>
<p>合并后的作品仅包含此许可的一个副本，并且多个相同的不变部分可用一个副本代替。如果存在多个具有相同名称但内容不同的不变部分，请在该部分的末尾加上括号，在该部分的末尾添加原始作者或发布者的名称（如果已知），以使每个此类的标题唯一。唯一编号。对合并作品的许可声明中不变部分列表中的部分标题进行相同的调整。
</p>
<p>在组合中，必须将各种原始文档中标题为“ History”的任何部分组合在一起，组成一个标题为“ History”的部分；同样，将标题为“致谢”的所有部分以及标题为“奉献”的任何部分组合在一起。您必须删除所有标题为“背书”的部分。
</p>
</li><li>文件收集<p>您可以收集由本许可协议下发布的文档和其他文档组成的集合，并在该文档中将其替换为各个文档中包含的单个副本，前提是您遵守本许可协议的规定。在所有其他方面逐字逐字复印。
</p>
<p>您可以从此类集合中提取单个文档，并根据本许可证单独分发它，前提是您将本许可证的副本插入提取的文档中，并且在与该文档的逐字复制有关的所有其他方面遵守本许可证。
</p>
</li><li>独立工作的集合<p>如果文件或衍生产品的版权不用于限制合法权利，则该文件或其衍生物与其他单独或独立的文件或作品在存储或分发介质中或在其上的汇编将被称为“汇总”。汇编用户的数量超出了个人作品的许可范围。当文档包含在汇总中时，本许可不适用于汇总中的其他作品，而这些作品本身不是文档的衍生作品。
</p>
<p>如果第3节的封面文字要求适用于本文档的这些副本，则如果该文档少于全部汇总的一半，则可以将文档的封面文字放在汇总中将文档括起来的封面上，或者如果文档为电子形式，则具有等同的封面电子形式。否则，它们必须出现在将整个集合括起来的印刷封面上。
</p>
</li><li>翻译<p>翻译被视为一种修改，因此您可以根据第4节的条款分发文档的翻译。用翻译替换不变部分需要其版权所有者的特殊许可，但是除了这些不变部分的原始版本之外，您还可以包括部分或全部不变部分的翻译。您可以在本文档以及所有保修免责声明中包括本许可，所有许可声明的翻译，但前提是您还包括本许可的原始英文版本以及这些声明和免责声明的原始版本。如果本许可的翻译版本与原始版本或声明或免责声明之间存在分歧，则以原始版本为准。
</p>
<p>如果文档中某节的标题为“致谢”，“奉献”或“历史记录”，则保留其标题（第1节）的要求（第4节）通常需要更改实际标题。
</p>
</li><li>终止<p>除非本许可明确规定，否则您不得复制，修改，再许可或分发文档。否则，任何尝试复制，修改，再许可或分发的尝试均无效，并且将自动终止您在本许可下的权利。
</p>
<p>但是，如果您停止所有对本许可的违反，则（a）临时恢复特定版权持有者的许可，除非且直到版权持有者明确终止并最终终止您的许可为止；以及（b）如果版权持有者失败，则永久地在停止交易发生后的60天之内通过某种合理的方式通知您违规行为。
</p>
<p>此外，如果版权所有者以某种合理的方式通知您有关侵权的信息，那么该版权所有者的许可将被永久恢复，这是您第一次从该版权所有者那里收到针对任何作品的违反本许可的通知，并且您会在收到通知后的30天内纠正违规行为。
</p>
<p>根据本节终止您的权利并不会终止根据本许可从您那里收到副本或权利的各方的许可。如果您的权利已被终止且未永久恢复，则收到部分或全部相同材料的副本将不会赋予您使用该材料的任何权利。
</p>
</li><li>本许可证的未来修订<p>自由软件基金会可能会不时发布GNU自由文档许可证的新修订版。这样的新版本将在本质上与当前版本相似，但是可能在细节上有所不同以解决新问题或疑虑。参见<a href="https://www.gnu.org/copyleft/">https://www.gnu.org/copyleft/</a> 。</p>
<p>许可证的每个版本都有一个不同的版本号。如果文档指定适用于此许可的特定编号版本“或任何更高版本”，则您可以选择遵循该指定版本或已发布的任何更高版本的条款和条件（不作为草稿）由自由软件基金会提供。如果文档未指定此许可的版本号，则可以选择自由软件基金会曾经发布的任何版本（而不是草稿）。如果文档指定代理可以决定可以使用此许可证的将来版本，则该代理对版本的公开接受声明将永久授权您为文档选择该版本。
</p>
</li><li>许可<p>“大型多作者协作网站”（或“ MMC网站”）是指发布版权作品并为任何人提供编辑这些作品的重要便利的任何万维网服务器。任何人都可以编辑的公共Wiki是此类服务器的示例。网站中包含的“大型多作者合作”（或“ MMC”）是指在MMC网站上发布的任何受版权保护的作品集。
</p>
<p>“ CC-BY-SA”指由知识共享公司发行的知识共享署名-相同方式共享3.0许可，该公司是一家非营利性公司，主要营业地点位于加利福尼亚州旧金山，并且该版本的未来copyleft版本该组织发布的许可。
</p>
<p>“合并”是指作为另一文档的一部分全部或部分发布或重新发布文档。
</p>
<p>如果MMC已根据本许可获得许可，并且所有根据该许可在MMC以外的其他地方首次发行并随后全部或部分合并到MMC中的作品，则该MMC是“有资格获得许可的”，（1）没有封面文字或不变部分，因此（2）在2008年11月1日之前合并。
</p>
<p>MMC站点的运营商可以在2009年8月1日之前的任何时间在CC-BY-SA之下的同一站点上重新发布该站点中包含的MMC，前提是该MMC有资格获得许可。
</p>
</li></ol>

<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h3 class="heading">附录：如何对您的文档使用此许可证</h3>

<p>要在您编写的文档中使用此许可，请在该文档中包括一个许可副本，并在标题页后放置以下版权和许可声明：</p>
<div class="smallexample">
<pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>如果您有不变的部分，封面文本和封面文本，则将“ with…Texts。”行替换为：</p>
<div class="smallexample">
<pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>如果您有不带封面文本的不变部分，或这三个部分的其他组合，请合并这两种选择以适应情况。
</p>
<p>如果您的文档包含不平凡的程序代码示例，我们建议您根据自由软件许可（例如GNU通用公共许可）的选择，并行发布这些示例，以允许它们在自由软件中使用。
</p>


<hr>
<a name="Concept-Index"></a>
<div class="header">
<p>下一篇： <a href="#Command-and-Option-Index" rel="next" accesskey="n">命令和选项索引</a> ，上一篇： <a href="#GNU-Free-Documentation-License" rel="prev" accesskey="p">GNU自由文档许可证</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Concept-Index-1"></a>
<h2 class="unnumbered">概念索引</h2>

<p>这是本手册中讨论的所有问题的一般索引，但<code>sed</code>命令和命令行选项。
</p>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>-</b></a> <a class="summary-letter" href="#Concept-Index_cp_symbol-2"><b>0</b></a> <a class="summary-letter" href="#Concept-Index_cp_symbol-3"><b>;</b></a>
   
<br>
<a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-J"><b>J</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-X"><b>X</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>
<table class="index-cp" border="0">
<tbody><tr><td></td><th align="left">索引输入</th><td> </td><th align="left">部分</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-1">--</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de_002c-example">-e，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de_002c-example-1">-e，例如</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dexpression_002c-example">–expression，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df_002c-example">-f，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df_002c-example-1">-f，例如</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfile_002c-example">–file，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002di_002c-example">-i，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn_002c-example">-n，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ds_002c-example">-s，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-2">0</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-0-address"><code>0</code>地址</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-3">;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003b_002c-command-separator">;，命令分隔符</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-A">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-a_002c-and-semicolons"><code>a</code>和分号</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Additional-reading-about-sed">有关的其他阅读<code>sed</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Resources">其他资源</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addr1_002c_002bN"><var>addr1</var> ，+ N</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addr1_002c_007eN"><var>addr1</var> ，〜N</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-address-range_002c-example">地址范围，例如</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-as-a-regular-expression">地址，作为正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-last-line">地址，最后一行</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-numeric">地址，数字</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-excluding">地址，不包括</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Addresses_002c-in-sed-scripts">地址，在<code>sed</code>脚本</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-negating">地址，否定</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-numeric">地址，数字</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-range">地址，范围</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-regular-expression">地址，正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-syntax">地址，语法</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alphabetic-characters">字母字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alphanumeric-characters">字母数字字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-hold-space-to-pattern-space">将保留空间添加到模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-next-input-line-to-pattern-space">将下一个输入行追加到模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-pattern-space-to-hold-space">追加模式空间以容纳空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Appending-text-after-a-line">在行后附加文字</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-B">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-b_002c-joining-lines-with">b，加入以下行</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-b_002c-versus-t">b，相对于t</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-back_002dreference">反向引用</a> ：</td><td> </td><td valign="top"><a href="#Back_002dreferences-and-Subexpressions">反向引用和子表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Backreferences_002c-in-regular-expressions">反向引用，在正则表达式中</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-characters">空白字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bracket-expression">括号表达式</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-if-s_002f_002f_002f-failed">分支到标签，如果<code>s///</code>失败</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-if-s_002f_002f_002f-succeeded">分支到标签，如果<code>s///</code>成功</a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-unconditionally">无条件分支到标签</a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-branching-and-n_002c-N">分支和n，N</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-branching_002c-infinite-loop">分支，无限循环</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-branching_002c-joining-lines">分支，连接线</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Buffer-spaces_002c-pattern-and-hold">缓冲区空间，模式和保持</a> ：</td><td> </td><td valign="top"><a href="#Execution-Cycle">执行周期</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bugs_002c-reporting">错误报告</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-c_002c-and-semicolons"><code>c</code>和分号</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-case-insensitive_002c-regular-expression">不区分大小写的正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Case_002dinsensitive-matching">不区分大小写的匹配</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Caveat-_002d_002d_002d-_0023n-on-first-line">注意事项-第一行的#n</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-character-class">人物类</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-character-classes">角色类别</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-classes-of-characters">字符类别</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Command-groups">命令组</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Comments_002c-in-scripts">注释，在脚本中</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-branch">条件分支</a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-branch-1">条件分支</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-control-characters">控制字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Copy-hold-space-into-pattern-space">将保留空间复制到模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Copy-pattern-space-into-hold-space">将模式空间复制到容纳空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cycle_002c-restarting">循环，重新启动</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-D">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-d_002c-example"><code>d</code> ，例如</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Delete-first-line-from-pattern-space">从模式空间删除第一行</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-digit-characters">数字字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Disabling-autoprint_002c-from-command-line">从命令行禁用自动打印</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-E">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-regular-expression">空正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Emptying-pattern-space">清空图案空间</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Emptying-pattern-space-1">清空图案空间</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Evaluate-Bourne_002dshell-commands">评估Bourne-shell命令</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Evaluate-Bourne_002dshell-commands_002c-after-substitution">替换后评估Bourne-shell命令</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example_002c-address-range">例如，地址范围</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example_002c-regular-expression">例如，正则表达式</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Exchange-hold-space-with-pattern-space">用模式空间交换保留空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Excluding-lines">排除行</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exit-status">退出状态</a> ：</td><td> </td><td valign="top"><a href="#Exit-status">退出状态</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exit-status_002c-example">退出状态，例如</a> ：</td><td> </td><td valign="top"><a href="#Exit-status">退出状态</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extended-regular-expressions_002c-choosing">扩展正则表达式，选择</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extended-regular-expressions_002c-syntax">扩展正则表达式，语法</a> ：</td><td> </td><td valign="top"><a href="#ERE-syntax">ERE语法</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-File-name_002c-printing">文件名，打印</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Files-to-be-processed-as-input">要作为输入处理的文件</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Flow-of-control-in-scripts">脚本中的控制流</a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Global-substitution">全球替代</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstderr-file">GNU扩展， <samp>/dev/stderr</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstderr-file-1">GNU扩展， <samp>/dev/stderr</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdin-file">GNU扩展， <samp>/dev/stdin</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdin-file-1">GNU扩展， <samp>/dev/stdin</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file">GNU扩展， <samp>/dev/stdout</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file-1">GNU扩展， <samp>/dev/stdout</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file-2">GNU扩展， <samp>/dev/stdout</samp>文件</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0-address">GNU扩展， <code>0</code>地址</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0-address-1">GNU扩展， <code>0</code>地址</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0_002caddr2-addressing">GNU扩展0 <var>addr2</var>寻址</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-addr1_002c_002bN-addressing">GNU扩展， <var>addr1</var> ，+ <var>N</var>寻址</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-addr1_002c_007eN-addressing">GNU扩展， <var>addr1</var> ，〜 <var>N</var>寻址</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-branch-if-s_002f_002f_002f-failed">GNU扩展，如果分支，则分支<code>s///</code>失败</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-case-modifiers-in-s-commands">GNU扩展，中的大小写修饰符<code>s</code>命令</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-checking-for-their-presence">GNU扩展，检查它们是否存在</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-debug">GNU扩展，调试</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-disabling">GNU扩展，禁用</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-emptying-pattern-space">GNU扩展，清空模式空间</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-emptying-pattern-space-1">GNU扩展，清空模式空间</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands">GNU扩展，评估Bourne-shell命令</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands-1">GNU扩展，评估Bourne-shell命令</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-extended-regular-expressions">GNU扩展，扩展的正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-g-and-number-modifier">GNU扩展， <code>g</code>和<var>number</var>修饰符</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-I-modifier">GNU扩展， <code>I</code>修饰符</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-I-modifier-1">GNU扩展， <code>I</code>修饰符</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-in_002dplace-editing">GNU扩展，就地编辑</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-in_002dplace-editing-1">GNU扩展，就地编辑</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-M-modifier">GNU扩展， <code>M</code>修饰符</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-M-modifier-1">GNU扩展， <code>M</code>修饰符</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-modifiers-and-the-empty-regular-expression">GNU扩展，修饰符和空正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-n_007em-addresses">GNU扩展名， <samp><var>n</var>~<var>m</var></samp> '地址</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-quitting-silently">GNU扩展，无提示退出</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-R-command">GNU扩展， <code>R</code>命令</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-reading-a-file-a-line-at-a-time">GNU扩展，一次读取一个文件</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-returning-an-exit-code">GNU扩展，返回退出代码</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-returning-an-exit-code-1">GNU扩展，返回退出代码</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-setting-line-length">GNU扩展，设置行长</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-escapes">GNU扩展，特殊转义</a> ：</td><td> </td><td valign="top"><a href="#Escapes">逃生</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-escapes-1">GNU扩展，特殊转义</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-two_002daddress-forms">GNU扩展，特殊的两个地址形式</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-subprocesses">GNU扩展，子过程</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-subprocesses-1">GNU扩展，子过程</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions">GNU扩展，基本正则表达式</a> ：</td><td> </td><td valign="top"><a href="#BRE-syntax">BRE语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-1">GNU扩展，基本正则表达式</a> ：</td><td> </td><td valign="top"><a href="#BRE-syntax">BRE语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-2">GNU扩展，基本正则表达式</a> ：</td><td> </td><td valign="top"><a href="#BRE-syntax">BRE语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-3">GNU扩展，基本正则表达式</a> ：</td><td> </td><td valign="top"><a href="#BRE-syntax">BRE语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-4">GNU扩展，基本正则表达式</a> ：</td><td> </td><td valign="top"><a href="#BRE-syntax">BRE语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-5">GNU扩展，基本正则表达式</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands">GNU扩展，大多数命令支持两个地址</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-1">GNU扩展，大多数命令支持两个地址</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-2">GNU扩展，大多数命令支持两个地址</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-3">GNU扩展，大多数命令支持两个地址</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-unlimited-line-length">GNU扩展，行长不受限制</a> ：</td><td> </td><td valign="top"><a href="#Limitations">局限性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-writing-first-line-to-a-file">GNU扩展，将第一行写入文件</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Goto_002c-in-scripts">在脚本中转到</a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-graphic-characters">图形字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Greedy-regular-expression-matching">贪婪的正则表达式匹配</a> ：</td><td> </td><td valign="top"><a href="#BRE-syntax">BRE语法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Grouping-commands">分组命令</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hexadecimal-digits">十六进制数字</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-appending-from-pattern-space">保留空间，从模式空间追加</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-appending-to-pattern-space">保留空间，追加到模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-copy-into-pattern-space">保留空间，复制到模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-copying-pattern-space-into">保留空间，将模式空间复制到</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-definition">容纳空间，定义</a> ：</td><td> </td><td valign="top"><a href="#Execution-Cycle">执行周期</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-exchange-with-pattern-space">容纳空间，与模式空间交换</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-I">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-i_002c-and-semicolons"><code>i</code>和分号</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing">就地编辑</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing_002c-activating">就地编辑，激活</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing_002c-Perl_002dstyle-backup-file-names">就地编辑，Perl样式的备份文件名</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-infinite-loop_002c-branching">无限循环，分支</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Inserting-text-before-a-line">在一行之前插入文本</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-J">Ĵ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-joining-lines-with-branching">用分支连接线</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-joining-quoted_002dprintable-lines">连接带引号的可打印行</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-L">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-labels">标签</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Labels_002c-in-scripts">标签，在脚本中</a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Last-line_002c-selecting">最后一行，选择</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-length_002c-setting">线长，设置</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-length_002c-setting-1">线长，设置</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-number_002c-printing">行号，印刷</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-selection">线路选择</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-by-number">行，按编号选择</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-by-regular-expression-match">行，按正则表达式匹配选择</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-last">行，选择last</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-List-pattern-space">列表模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lower_002dcase-letters">小写字母</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-M">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing-g-and-number-modifiers-in-the-s-command">混合<code>g</code>和<var>number</var>中的修饰符<code>s</code>命令</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-files">多个文件</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-sed-commands">多<code>sed</code>命令</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-N">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-n_002c-and-branching">n和分支</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-N_002c-and-branching">N，并分支</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-named-character-classes">命名角色类</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-newline_002c-command-separator">换行符，命令分隔符</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Next-input-line_002c-append-to-pattern-space">下一行输入，追加到模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Next-input-line_002c-replace-pattern-space-with">下一行输入，用替换模式空间</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-0-address">非虫， <code>0</code>地址</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-in_002dplace-editing">非错误的就地编辑</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-localization_002drelated">与本地化无关的错误</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-localization_002drelated-1">与本地化无关的错误</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-N-command-on-the-last-line">非虫， <code>N</code>最后一行的命令</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-regex-syntax-clashes">非bug，regex语法冲突</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numeric-addresses">数字地址</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numeric-characters">数字字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-O">Ø</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-omitting-labels">省略标签</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output">输出</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-suppressing">输出，抑制</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-p_002c-example">p，例如</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-paragraphs_002c-processing">段落，处理</a> ：</td><td> </td><td valign="top"><a href="#Multiline-techniques">多线技术</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parameters_002c-script">参数，脚本</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Parenthesized-substrings">带括号的子字符串</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Pattern-space_002c-definition">模式空间，定义</a> ：</td><td> </td><td valign="top"><a href="#Execution-Cycle">执行周期</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-comments">可移植性，评论</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-line-length-limitations">便携性，线长限制</a> ：</td><td> </td><td valign="top"><a href="#Limitations">局限性</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-N-command-on-the-last-line">可移植性， <code>N</code>最后一行的命令</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-bracket-expressions"><code>POSIXLY_CORRECT</code>行为，括号表达式</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-enabling"><code>POSIXLY_CORRECT</code>行为，启用</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-escapes"><code>POSIXLY_CORRECT</code>行为，转义</a> ：</td><td> </td><td valign="top"><a href="#Escapes">逃生</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-N-command"><code>POSIXLY_CORRECT</code>行为， <code>N</code>命令</a> ：</td><td> </td><td valign="top"><a href="#Reporting-Bugs">报告错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Print-first-line-from-pattern-space">从图案空间打印第一行</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-printable-characters">可打印字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-file-name">打印文件名</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-line-number">印刷行号</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-text-unambiguously">清楚地打印文本</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-processing-paragraphs">处理段落</a> ：</td><td> </td><td valign="top"><a href="#Multiline-techniques">多线技术</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-punctuation-characters">标点符号</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-Q">问</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q_002c-example">问，例如</a> ：</td><td> </td><td valign="top"><a href="#Exit-status">退出状态</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-q_002c-example"><code>q</code> ，例如</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Quitting">退出</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Quitting-1">退出</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quoted_002dprintable-lines_002c-joining">带引号的可打印行，加入</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-R">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-range-addresses">范围地址</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-range-expression">范围表达式</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Range-of-lines">行数范围</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Range-with-start-address-of-zero">起始地址为零的范围</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-next-input-line">阅读下一个输入行</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-text-from-a-file">从文件中读取文本</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-text-from-a-file-1">从文件中读取文本</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regex-addresses-and-input-lines">正则表达式地址和输入行</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regex-addresses-and-pattern-space">正则表达式地址和模式空间</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-expression-addresses">正则表达式地址</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-expression_002c-example">正则表达式，例如</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replace-hold-space-with-copy-of-pattern-space">将保留空间替换为模式空间的副本</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replace-pattern-space-with-copy-of-hold-space">用保留空间的副本替换模式空间</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-all-text-matching-regexp-in-a-line">替换一行中所有与文本匹配的正则表达式</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-only-nth-match-of-regexp-in-a-line">仅更换<var>n</var> regexp第一行匹配</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-selected-lines-with-other-text">用其他文本替换选定的行</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Requiring-GNU-sed">需要GNU <code>sed</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-restarting-a-cycle">重新开始一个周期</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-S">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Sandbox-mode">沙盒模式</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-script-parameter">脚本参数</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script-structure">脚本结构</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-from-a-file">脚本，来自文件</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-from-command-line">脚本，从命令行</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-commands-syntax"><code>sed</code>命令语法</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-commands_002c-multiple"><code>sed</code>命令，多个</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-script-structure"><code>sed</code>脚本结构</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-lines-to-process">选择要处理的行</a> ：</td><td> </td><td valign="top"><a href="#Numeric-Addresses">数值地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-non_002dmatching-lines">选择不匹配的行</a> ：</td><td> </td><td valign="top"><a href="#Addresses-overview">地址概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-semicolons_002c-command-separator">分号，命令分隔符</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Several-lines_002c-selecting">几行，选择</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slash-character_002c-in-regular-expressions">正则表达式中的斜杠字符</a> ：</td><td> </td><td valign="top"><a href="#Regexp-Addresses">正则表达式地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-space-characters">空格字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Spaces_002c-pattern-and-hold">空格，图案和保持</a> ：</td><td> </td><td valign="top"><a href="#Execution-Cycle">执行周期</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Special-addressing-forms">特殊地址表格</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-input">标准输入</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Standard-input_002c-processing-as-input">标准输入，处理为输入</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-output">标准输出</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stdin">标准输入</a></td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stdout">标准输出</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stream-editor">流编辑器</a> ：</td><td> </td><td valign="top"><a href="#Introduction">介绍</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-subexpression">子表达式</a> ：</td><td> </td><td valign="top"><a href="#Back_002dreferences-and-Subexpressions">反向引用和子表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subprocesses">子流程</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subprocesses-1">子流程</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Substitution-of-text_002c-options">替换文字，选项</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-suppressing-output">抑制输出</a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax_002c-addresses">语法，地址</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax_002c-sed-commands">句法， <code>sed</code>命令</a> ：</td><td> </td><td valign="top"><a href="#sed-script-overview">sed脚本概述</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-T">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-t_002c-joining-lines-with">t，加入以下行</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-t_002c-versus-b">t，与b</a> ：</td><td> </td><td valign="top"><a href="#Branching-and-flow-control">分支和流量控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-appending">文字，附加</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-deleting">文字，删除</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-insertion">文字，插入</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-printing">文字，印刷</a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-printing-after-substitution">文字，替换后打印</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-writing-to-a-file-after-substitution">文本，替换后写入文件</a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transliteration">音译</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-U">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unbuffered-I_002fO_002c-choosing">无缓冲的I / O，选择</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-upper_002dcase-letters">大写字母</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Usage-summary_002c-printing">使用摘要，打印</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Version_002c-printing">版本，印刷</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-W">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-whitespace-characters">空格字符</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Working-on-separate-files">处理单独的文件</a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Write-first-line-to-a-file">将第一行写入文件</a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Write-to-a-file">写入文件</a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-xdigit-class">xdigit类</a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-Z">ž</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Zero_002c-as-range-start-address">零，作为范围起始地址</a> ：</td><td> </td><td valign="top"><a href="#Range-Addresses">范围地址</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>-</b></a> <a class="summary-letter" href="#Concept-Index_cp_symbol-2"><b>0</b></a> <a class="summary-letter" href="#Concept-Index_cp_symbol-3"><b>;</b></a>
   
<br>
<a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-J"><b>J</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-X"><b>X</b></a> <a class="summary-letter" href="#Concept-Index_cp_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>

<hr>
<a name="Command-and-Option-Index"></a>
<div class="header">
<p>上一篇： <a href="#Concept-Index" rel="prev" accesskey="p">概念索引</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Concept-Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Command-and-Option-Index-1"></a>
<h2 class="unnumbered">命令和选项索引</h2>

<p>这是所有字母的列表<code>sed</code>命令和命令行选项。
</p>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-1"><b>＃</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-2"><b>-</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-3"><b>：</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-4"><b>=</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-5"><b>{</b></a>
   
<br>
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-A"><b>A</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-B"><b>B</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-C"><b>C</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-D"><b>D</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-E"><b>E</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-F"><b>F</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-G"><b>G</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-H"><b>H</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-I"><b>I</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-L"><b>L</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-N"><b>N</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-P"><b>P</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Q"><b>Q</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-R"><b>R</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-S"><b>S</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-T"><b>T</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-U"><b>U</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-V"><b>V</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-W"><b>W</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-X"><b>X</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Y"><b>Y</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>
<table class="index-fn" border="0">
<tbody><tr><td></td><th align="left">索引输入</th><td> </td><th align="left">部分</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-1">＃</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023-_0028comments_0029"><code># (comments)</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-2">--</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dbinary"><code>--binary</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddebug"><code>--debug</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dexpression"><code>--expression</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfile"><code>--file</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfollow_002dsymlinks"><code>--follow-symlinks</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp"><code>--help</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002din_002dplace"><code>--in-place</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dline_002dlength"><code>--line-length</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dnull_002ddata"><code>--null-data</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dposix"><code>--posix</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dquiet"><code>--quiet</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dregexp_002dextended"><code>--regexp-extended</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dsandbox"><code>--sandbox</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dseparate"><code>--separate</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dsilent"><code>--silent</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dunbuffered"><code>--unbuffered</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dversion"><code>--version</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dzero_002dterminated"><code>--zero-terminated</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002db"><code>-b</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de"><code>-e</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dE"><code>-E</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df"><code>-f</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002di"><code>-i</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dl"><code>-l</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn"><code>-n</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn_002c-forcing-from-within-a-script"><code>-n, forcing from within a script</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dr"><code>-r</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ds"><code>-s</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002du"><code>-u</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dz"><code>-z</code></a> ：</td><td> </td><td valign="top"><a href="#Command_002dLine-Options">命令行选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-3">：</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003a-_0028label_0029-command"><code>: (label) command</code></a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-4">=</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003d-_0028print-line-number_0029-command"><code>= (print line number) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-5">{</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_007b_007d-command-grouping"><code>{} command grouping</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-A">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-a-_0028append-text-lines_0029-command"><code>a (append text lines) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alnum-character-class"><code>alnum <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alpha-character-class"><code>alpha <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-B">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-b-_0028branch_0029-command"><code>b (branch) command</code></a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-character-class"><code>blank <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-c-_0028change-to-text-lines_0029-command"><code>c (change to text lines) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cntrl-character-class"><code>cntrl <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-D">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-D-_0028delete-first-line_0029-command"><code>D (delete first line) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-d-_0028delete_0029-command"><code>d (delete) command</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-digit-character-class"><code>digit <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-E">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-e-_0028evaluate_0029-command"><code>e (evaluate) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-F-_0028File-name_0029-command"><code>F (File name) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-G-_0028appending-Get_0029-command"><code>G (appending Get) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-g-_0028get_0029-command"><code>g (get) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-graph-character-class"><code>graph <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-H-_0028append-Hold_0029-command"><code>H (append Hold) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-h-_0028hold_0029-command"><code>h (hold) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-I">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-i-_0028insert-text-lines_0029-command"><code>i (insert text lines) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-L">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-l-_0028list-unambiguously_0029-command"><code>l (list unambiguously) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lower-character-class"><code>lower <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-N">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-N-_0028append-Next-line_0029-command"><code>N (append Next line) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-n-_0028next_002dline_0029-command"><code>n (next-line) command</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-P-_0028print-first-line_0029-command"><code>P (print first line) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-p-_0028print_0029-command"><code>p (print) command</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-print-character-class"><code>print <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-punct-character-class"><code>punct <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Q">问</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-q-_0028quit_0029-command"><code>q (quit) command</code></a> ：</td><td> </td><td valign="top"><a href="#Common-Commands">常用命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q-_0028silent-Quit_0029-command"><code>Q (silent Quit) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-R">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-r-_0028read-file_0029-command"><code>r (read file) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-R-_0028read-line_0029-command"><code>R (read line) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-S">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-s-command_002c-option-flags"><code>s command, option flags</code></a> ：</td><td> </td><td valign="top"><a href="#The-_0022s_0022-Command">“ s”命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-space-character-class"><code>space <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-T">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-T-_0028test-and-branch-if-failed_0029-command"><code>T (test and branch if failed) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-t-_0028test-and-branch-if-successful_0029-command"><code>t (test and branch if successful) command</code></a> ：</td><td> </td><td valign="top"><a href="#Programming-Commands">编程指令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-U">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-upper-character-class"><code>upper <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-v-_0028version_0029-command"><code>v (version) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-W">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-w-_0028write-file_0029-command"><code>w (write file) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-W-_0028write-first-line_0029-command"><code>W (write first line) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-x-_0028eXchange_0029-command"><code>x (eXchange) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-xdigit-character-class"><code>xdigit <span class="roman">character class</span></code></a> ：</td><td> </td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions">字符类和括号表达式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Y">ÿ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-y-_0028transliterate_0029-command"><code>y (transliterate) command</code></a> ：</td><td> </td><td valign="top"><a href="#Other-Commands">其他命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Z">ž</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-z-_0028Zap_0029-command"><code>z (Zap) command</code></a> ：</td><td> </td><td valign="top"><a href="#Extended-Commands">扩展命令</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-1"><b>＃</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-2"><b>-</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-3"><b>：</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-4"><b>=</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-5"><b>{</b></a>
   
<br>
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-A"><b>A</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-B"><b>B</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-C"><b>C</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-D"><b>D</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-E"><b>E</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-F"><b>F</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-G"><b>G</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-H"><b>H</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-I"><b>I</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-L"><b>L</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-N"><b>N</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-P"><b>P</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Q"><b>Q</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-R"><b>R</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-S"><b>S</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-T"><b>T</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-U"><b>U</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-V"><b>V</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-W"><b>W</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-X"><b>X</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Y"><b>Y</b></a> <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>

<a name="SEC_Contents"></a>
<h2 class="contents-heading">目录</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1引言</a></li>
  <li><a name="toc-Running-sed" href="#Invoking-sed">2运行sed</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-1" href="#Overview">2.1概述</a></li>
    <li><a name="toc-Command_002dLine-Options-1" href="#Command_002dLine-Options">2.2命令行选项</a></li>
    <li><a name="toc-Exit-status-1" href="#Exit-status">2.3退出状态</a></li>
  </ul></li>
  <li><a name="toc-sed-scripts-1" href="#sed-scripts">3 <code>sed</code>剧本</a>
  <ul class="no-bullet">
    <li><a name="toc-sed-script-overview-1" href="#sed-script-overview">3.1 <code>sed</code>脚本概述</a></li>
    <li><a name="toc-sed-commands-summary" href="#sed-commands-list">3.2 <code>sed</code>命令摘要</a></li>
    <li><a name="toc-The-s-Command" href="#The-_0022s_0022-Command">3.3的<code>s</code>命令</a></li>
    <li><a name="toc-Often_002dUsed-Commands" href="#Common-Commands">3.4常用命令</a></li>
    <li><a name="toc-Less-Frequently_002dUsed-Commands" href="#Other-Commands">3.5较少使用的命令</a></li>
    <li><a name="toc-Commands-for-sed-gurus" href="#Programming-Commands">3.6命令<code>sed</code>大师</a></li>
    <li><a name="toc-Commands-Specific-to-GNU-sed" href="#Extended-Commands">3.7特定于GNU的命令<code>sed</code></a></li>
    <li><a name="toc-Multiple-commands-syntax-1" href="#Multiple-commands-syntax">3.8多命令语法</a>
    <ul class="no-bullet">
      <li><a name="toc-Commands-Requiring-a-newline" href="#Commands-Requiring-a-newline">3.8.1需要换行符的命令</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Addresses_003a-selecting-lines" href="#sed-addresses">4个地址：选择行</a>
  <ul class="no-bullet">
    <li><a name="toc-Addresses-overview-1" href="#Addresses-overview">4.1地址概述</a></li>
    <li><a name="toc-Selecting-lines-by-numbers" href="#Numeric-Addresses">4.2通过数字选择线</a></li>
    <li><a name="toc-selecting-lines-by-text-matching" href="#Regexp-Addresses">4.3通过文本匹配选择行</a></li>
    <li><a name="toc-Range-Addresses-1" href="#Range-Addresses">4.4范围地址</a></li>
  </ul></li>
  <li><a name="toc-Regular-Expressions_003a-selecting-text" href="#sed-regular-expressions">5个正则表达式：选择文本</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-of-regular-expression-in-sed" href="#Regular-Expressions-Overview">5.1中的正则表达式概述<code>sed</code></a></li>
    <li><a name="toc-Basic-_0028BRE_0029-and-extended-_0028ERE_0029-regular-expression" href="#BRE-vs-ERE">5.2基本（BRE）和扩展（ERE）正则表达式</a></li>
    <li><a name="toc-Overview-of-basic-regular-expression-syntax" href="#BRE-syntax">5.3基本正则表达式语法概述</a></li>
    <li><a name="toc-Overview-of-extended-regular-expression-syntax" href="#ERE-syntax">5.4扩展正则表达式语法概述</a></li>
    <li><a name="toc-Character-Classes-and-Bracket-Expressions-1" href="#Character-Classes-and-Bracket-Expressions">5.5字符类和括号表达式</a></li>
    <li><a name="toc-regular-expression-extensions" href="#regexp-extensions">5.6正则表达式扩展</a></li>
    <li><a name="toc-Back_002dreferences-and-Subexpressions-1" href="#Back_002dreferences-and-Subexpressions">5.7反向引用和子表达式</a></li>
    <li><a name="toc-Escape-Sequences-_002d-specifying-special-characters" href="#Escapes">5.8转义序列-指定特殊字符</a>
    <ul class="no-bullet">
      <li><a name="toc-Escaping-Precedence" href="#Escaping-Precedence">5.8.1逃避优先</a></li>
    </ul></li>
    <li><a name="toc-Multibyte-characters-and-Locale-Considerations" href="#Locale-Considerations">5.9多字节字符和语言环境注意事项</a>
    <ul class="no-bullet">
      <li><a name="toc-Invalid-multibyte-characters" href="#Invalid-multibyte-characters">5.9.1无效的多字节字符</a></li>
      <li><a name="toc-Upper_002fLower-case-conversion" href="#Upper_002fLower-case-conversion">5.9.2大写/小写转换</a></li>
      <li><a name="toc-Multibyte-regexp-character-classes" href="#Multibyte-regexp-character-classes">5.9.3多字节正则表达式字符类</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Advanced-sed_003a-cycles-and-buffers" href="#advanced-sed">6高级<code>sed</code> ：循环和缓冲区</a>
  <ul class="no-bullet">
    <li><a name="toc-How-sed-Works" href="#Execution-Cycle">6.1如何<code>sed</code>作品</a></li>
    <li><a name="toc-Hold-and-Pattern-Buffers-1" href="#Hold-and-Pattern-Buffers">6.2保持和模式缓冲区</a></li>
    <li><a name="toc-Multiline-techniques-_002d-using-D_002cG_002cH_002cN_002cP-to-process-multiple-lines" href="#Multiline-techniques">6.3多线技术-使用D，G，H，N，P处理多条线</a></li>
    <li><a name="toc-Branching-and-Flow-Control" href="#Branching-and-flow-control">6.4分支和流量控制</a>
    <ul class="no-bullet">
      <li><a name="toc-Branching-and-Cycles" href="#Branching-and-Cycles">6.4.1分支和周期</a></li>
      <li><a name="toc-Branching-example_003a-joining-lines" href="#Branching-example_003a-joining-lines">6.4.2分支示例：连接线</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Some-Sample-Scripts" href="#Examples">7一些示例脚本</a>
  <ul class="no-bullet">
    <li><a name="toc-Joining-lines-1" href="#Joining-lines">7.1连接线</a></li>
    <li><a name="toc-Centering-Lines" href="#Centering-lines">7.2对中线</a></li>
    <li><a name="toc-Increment-a-Number" href="#Increment-a-number">7.3递增数字</a></li>
    <li><a name="toc-Rename-Files-to-Lower-Case" href="#Rename-files-to-lower-case">7.4重命名文件为小写</a></li>
    <li><a name="toc-Print-bash-Environment" href="#Print-bash-environment">7.5打印<code>bash</code>环境</a></li>
    <li><a name="toc-Reverse-Characters-of-Lines" href="#Reverse-chars-of-lines">7.6线的反向字符</a></li>
    <li><a name="toc-Text-search-across-multiple-lines-1" href="#Text-search-across-multiple-lines">7.7多行文字搜索</a></li>
    <li><a name="toc-Line-length-adjustment-1" href="#Line-length-adjustment">7.8线长调整</a></li>
    <li><a name="toc-Reverse-Lines-of-Files" href="#tac">7.9文件反向行</a></li>
    <li><a name="toc-Numbering-Lines" href="#cat-_002dn">7.10编号行</a></li>
    <li><a name="toc-Numbering-Non_002dblank-Lines" href="#cat-_002db">7.11为非空白行编号</a></li>
    <li><a name="toc-Counting-Characters" href="#wc-_002dc">7.12计数字符</a></li>
    <li><a name="toc-Counting-Words" href="#wc-_002dw">7.13数词</a></li>
    <li><a name="toc-Counting-Lines" href="#wc-_002dl">7.14计数线</a></li>
    <li><a name="toc-Printing-the-First-Lines" href="#head">7.15打印第一行</a></li>
    <li><a name="toc-Printing-the-Last-Lines" href="#tail">7.16打印最后几行</a></li>
    <li><a name="toc-Make-Duplicate-Lines-Unique" href="#uniq">7.17使重复的行唯一</a></li>
    <li><a name="toc-Print-Duplicated-Lines-of-Input" href="#uniq-_002dd">7.18打印输入的重复行</a></li>
    <li><a name="toc-Remove-All-Duplicated-Lines" href="#uniq-_002du">7.19删除所有重复的行</a></li>
    <li><a name="toc-Squeezing-Blank-Lines" href="#cat-_002ds">7.20挤压空白行</a></li>
  </ul></li>
  <li><a name="toc-GNU-sed_0027s-Limitations-and-Non_002dlimitations" href="#Limitations">8个GNU <code>sed</code>的局限性和非局限性</a></li>
  <li><a name="toc-Other-Resources-for-Learning-About-sed" href="#Other-Resources">9其他学习资源<code>sed</code></a></li>
  <li><a name="toc-Reporting-Bugs-1" href="#Reporting-Bugs">10个报告错误</a></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">附录A GNU自由文档许可证</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">概念索引</a></li>
  <li><a name="toc-Command-and-Option-Index-1" href="#Command-and-Option-Index">命令和选项索引</a></li>
</ul>
</div>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a name="FOOT1" href="#DOCF1">（1）</a></h3>
<p>这适用于诸如<code>=</code> ， <code>a</code> ， <code>c</code> ， <code>i</code> ， <code>l</code> ， <code>p</code> 。您仍然可以使用以下命令写入标准输出<code>w</code><a name="index-GNU-extensions_002c-_002fdev_002fstdout-file"></a>要么<code>W</code>命令与<samp>/dev/stdout</samp>特殊文件</p>
<h3><a name="FOOT2" href="#DOCF2">（2）</a></h3>
<p>注意，GNU <code>sed</code>无论实际上是否更改任何输出，都会创建备份文件。</p>
<h3><a name="FOOT3" href="#DOCF3">（3）</a></h3>
<p>这相当于<code>p</code>除非<samp>-i</samp>选项正在使用中。</p>
<h3><a name="FOOT4" href="#DOCF4">（4）</a></h3>
<p>这相当于<code>p</code>除非<samp>-i</samp>选项正在使用中。</p>
<h3><a name="FOOT5" href="#DOCF5">（5）</a></h3>
<p>当然，还有许多其他方法可以做到这一点，例如</p><div class="example">
<pre class="example">grep 'bash$' /etc/passwd
awk -F: '$7 == &quot;/bin/bash&quot;' /etc/passwd
</pre></div>
<h3><a name="FOOT6" href="#DOCF6">（6）</a></h3>
<p>这里介绍的所有转义都是GNU扩展，除了<code>\n</code> 。在基本正则表达式模式下，设置<code>POSIXLY_CORRECT</code>在方括号表达式中禁用它们。</p>
<h3><a name="FOOT7" href="#DOCF7">（7）</a></h3>
<p>一些正则表达式的极端情况取决于操作系统和libc实现。已知显示的示例可以在使用glibc的GNU / Linux系统上按预期工作。</p>
<h3><a name="FOOT8" href="#DOCF8">（8）</a></h3>
<p>其实，如果<code>sed</code>打印一条没有换行符终止的行，但是，一旦有更多文本发送到相同的输出流，它将立即打印丢失的换行符，即使它不执行诸如“ <samp>sed -n p</samp>完全相同<code>cat</code> 。</p>
<h3><a name="FOOT9" href="#DOCF9">（9）</a></h3>
<p><code>sed</code>大师Greg Ubben编写了<code>dc</code> <small>RPN</small>计算器！它与sed一起分发。</p>
<h3><a name="FOOT10" href="#DOCF10">（10）</a></h3>
<p>这需要另一个脚本来填充标题的输出。例如</p>
<div class="example">
<pre class="example">#! /bin/sh

banner -w $1 $2 $3 $4 |
  sed -e :a -e '/^.\{0,'$1'\}$/ { s/$/ /; ba; }' |
  ~/sedscripts/reverseline.sed
</pre></div>
<h3><a name="FOOT11" href="#DOCF11">（11）</a></h3>
<p>某些实现每个脚本限制199个命令</p>
<h3><a name="FOOT12" href="#DOCF12">（12）</a></h3>
<p>这是促使行为发生变化的实际“错误”</p>
</div>
<hr>





</body></html>