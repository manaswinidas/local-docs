<html ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>派生文件（《 GNU Awk用户指南》）</title>

<meta name="description" content="Derived Files (The GNU Awk User’s Guide)">
<meta name="keywords" content="Derived Files (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Additions.html#Additions" rel="up" title="Additions">
<link href="Future-Extensions.html#Future-Extensions" rel="next" title="Future Extensions">
<link href="New-Ports.html#New-Ports" rel="prev" title="New Ports">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="manual.css">


</head>

<body lang="zh-Hans" >
<a name="Derived-Files"></a>
<div class="header">
<p>上一页： <a href="New-Ports.html#New-Ports" rel="prev" accesskey="p">新端口</a> ，向上： <a href="Additions.html#Additions" rel="up" accesskey="u">附加</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Why-Generated-Files-Are-Kept-In-Git"></a>
<h4 class="appendixsubsec">C.2.4为什么生成的文件保留在Git中</h4>

<a name="index-Git_002c-use-of-for-gawk-source-code"></a>

<p>如果你看<code>gawk</code>在Git存储库中的源代码中，您会注意到它包含由GNU基础结构工具自动生成的文件，例如<samp>Makefile.in</samp>从Automake甚至<samp>configure</samp>来自Autoconf。
</p>
<p>这与许多不存储派生文件的自由软件项目不同，因为这可以使存储库更整洁，并且在比较版本并尝试了解提交之间的更改时，更容易看到实质性更改。
</p>
<p>但是，有几个原因导致<code>gawk</code>维护者喜欢将所有内容都存储在存储库中。
</p>
<p>首先，因为这样很容易完全复制任何给定的版本，而无需依赖其他工具（较旧，可能已过时甚至可能找不到）的可用性。
</p>
<p>举一个极端的例子，如果您甚至想尝试编译，哦，例如V7 <code>awk</code> ，您会发现不仅需要引导V7 <code>yacc</code>这样做，但是您还需要V7 <code>lex</code> 。后者几乎不可能在现代GNU / Linux系统上使用。 <a name="DOCF117" href="#FOOT117"><sup>117</sup></a>
</p>
<p>（或者，假设<code>gawk</code> 1.2要求<code>bison</code>无论是在1989年，还是没有<samp>awkgram.c</samp>存储库中的文件。是否有保证我们可以找到<code>bison</code>版？或者说， <em>它</em>会建立？）
</p>
<p>如果存储库中包含所有生成的文件，那么很容易将它们检出并进行构建。（或<em>更简单</em> ，取决于我们走多远。）
</p>
<p>这将我们带到了第二个（也是更强大的）原因，为什么所有文件实际上都需要保存在Git中。归结为您迎合了谁— <code>gawk</code>开发人员，或只想签出版本并试用的用户？
</p>
<p>的<code>gawk</code>维护者希望任何感兴趣的人都可以<code>awk</code>世界上的用户只需克隆存储库，签出感兴趣的分支并进行构建。无需使用正确版本的自动工具。 <a name="DOCF118" href="#FOOT118"><sup>118</sup></a>这就是重点<samp>bootstrap.sh</samp>文件。它以正确的顺序触摸其他各种文件，从而</p>
<div class="example">
<pre class="example"># The canonical incantation for building GNU software:
./bootstrap.sh &amp;&amp; ./configure &amp;&amp; make
</pre></div>

<p>会<em>工作的</em> 。
</p>
<p>这对于<code>master</code>和<code>gawk-<var>X</var>.<var>Y</var>-stable</code>分支机构。
</p>
<p>此外， <code>gawk</code>维护者会认为这对于<code>gawk</code>开发人员。当他试图检查<code>xgawk</code>分支<a name="DOCF119" href="#FOOT119"><sup>119</sup></a>来建造它，他做不到。（没有<samp>ltmain.sh</samp>文件，他不知道如何创建它，这不是唯一的问题。）
</p>
<p>他感到<em>非常</em>沮丧。关于该分支，维护者与想要尝试构建的Jane User没什么不同。 <code>gawk-4.1-stable</code>要么<code>master</code>从存储库中。
</p>
<p>因此，维护者认为，对于任何给定的分支，上述咒语<em>都是有效的</em> ，这不仅重要，而且至关重要。
</p>
<p>拥有所有文件的第三个原因是，如果没有它们，请使用“ <samp>git bisect</samp>要查找导致错误的提交非常困难。维护人员试图在另一个需要运行引导脚本才能创建的项目上执行此操作<code>configure</code>等等;真的很痛苦当存储库是独立的时，使用<code>git bisect</code>在里面很容易。
</p>

<p>有哪些后果和/或要采取的行动？
</p>
<ol>
<li>我们不介意由于不同版本的自动工具，不同分支中的文件不同。

<ol type="A" start="1">
<li>合并它们是维护者的工作，他将对其进行处理。

</li><li>他真的很擅长<samp>git diff x y > /tmp/diff1 ; gvim /tmp/diff1</samp> '删除不需要的差异以检查代码。
</li></ol>

</li><li>如果每个人都使用与他相同的GNU工具版本，那肯定会有所帮助，这些工具通常是Automake，Autoconf， <code>bison</code> ，GNU <code>gettext</code>和Libtool。


<p>从源代码安装非常容易。这就是维护者多年来工作（并且仍然有效）的方式。他有<samp>/usr/local/bin</samp>在他的前面<code>PATH</code>并做了：</p>
<div class="example">
<pre class="example">wget https://ftp.gnu.org/gnu/<var>package</var>/<var>package</var>-<var>x</var>.<var>y</var>.<var>z</var>.tar.gz
tar -xpzvf <var>package</var>-<var>x</var>.<var>y</var>.<var>z</var>.tar.gz
cd <var>package</var>-<var>x</var>.<var>y</var>.<var>z</var>
./configure &amp;&amp; make &amp;&amp; make check
make install    # as root
</pre></div>

<blockquote>
<p><b>注意：</b>由于“ <samp>https://</samp> 'URL，您可能需要提供<samp>--no-check-certificate</samp>选择<code>wget</code>下载文件。
</p></blockquote>



</li></ol>

<p>以上大部分内容最初是由维护者写给其他人的<code>gawk</code>开发人员。它引起了一位开发人员的反对：“……任何从Git提取资源的人都不是最终用户。”
</p>
<p>但是，事实并非如此。有“力量<code>awk</code>可以建立的用户” <code>gawk</code> （使用前面显示的魔咒），但谁不能用C编程。因此，主要分支机构应始终保持可构建状态。
</p>
<p>然后有人建议有一个<code>cron</code>创造每晚“源”的tarball的工作。在这里，问题在于存在与各个分支相对应的源树！因此，夜间压缩包并不能解决问题，尤其是因为该存储库可以持续数周而无需引入重大更改。
</p>
<p>幸运的是，Git服务器可以满足这一需求。对于任何给定的分支<var>branchname</var> ， 使用：</p>
<div class="example">
<pre class="example">wget https://git.savannah.gnu.org/cgit/gawk.git/snapshot/gawk-<var>branchname</var>.tar.gz
</pre></div>

<p>检索给定分支的快照。
</p>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a name="FOOT117" href="#DOCF117">（117）</a></h3>
<p>我们尝试了。真痛苦</p>
<h3><a name="FOOT118" href="#DOCF118">（118）</a></h3>
<p>（在我们看来）有一个GNU程序很难从Git存储库中引导。例如，在作者使用Mac OS X 10.5的旧版（但仍在运行）的PowerPC Macintosh上，有必要从Git自身启动大量软件，以便尝试使用最新代码。这并不令人愉快，尤其是在较旧的系统上，这是浪费大量的时间。
</p>
<p>从最新的tarball开始也不是野餐。维护者放弃了<samp>.gz</samp>和<samp>.bz2</samp>文件，仅分发<samp>.tar.xz</samp>文件。有必要进行引导<code>xz</code>第一！</p>
<h3><a name="FOOT119" href="#DOCF119">（119）</a></h3>
<p>由其他开发人员之一创建的分支（已删除），不包含生成的文件。</p>
</div>
<hr>
<div class="header">
<p>上一页： <a href="New-Ports.html#New-Ports" rel="prev" accesskey="p">新端口</a> ，向上： <a href="Additions.html#Additions" rel="up" accesskey="u">附加</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>