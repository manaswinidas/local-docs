<html ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>格式修饰符（《 GNU Awk用户指南》）</title>

<meta name="description" content="Format Modifiers (The GNU Awk User’s Guide)">
<meta name="keywords" content="Format Modifiers (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Printf.html#Printf" rel="up" title="Printf">
<link href="Printf-Examples.html#Printf-Examples" rel="next" title="Printf Examples">
<link href="Control-Letters.html#Control-Letters" rel="prev" title="Control Letters">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


</head>

<body lang="zh-Hans" >
<a name="Format-Modifiers"></a>
<div class="header">
<p>下一个： <a href="Printf-Examples.html#Printf-Examples" rel="next" accesskey="n">printf的实施例</a> ，上一个： <a href="Control-Letters.html#Control-Letters" rel="prev" accesskey="p">控制快报</a> ，上级： <a href="Printf.html#Printf" rel="up" accesskey="u">printf的</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Modifiers-for-printf-Formats"></a>
<h4 class="subsection">5.5.3修饰符<code>printf</code>格式</h4>

<a name="index-printf-statement_002c-modifiers"></a>
<a name="index-modifiers_002c-in-format-specifiers"></a>
<p>格式规范还可以包括<em>修饰符</em> ，这些<em>修饰符</em>可以控制打印多少项目值以及获得多少空间。修饰符介于“ <samp>%</samp> '和格式控制字母。在以下示例中，我们使用项目符号“•”表示输出中的空格。以下是可能的修饰符，按照它们出现的顺序：</p>
<dl compact>
<dd><a name="index-differences-in-awk-and-gawk_002c-print_002fprintf-statements"></a>
<a name="index-printf-statement_002c-positional-specifiers"></a>
<a name="index-positional-specifiers_002c-printf-statement"></a>
</dd>
<dt><code><var>N</var>$</code></dt>
<dd><p>一个整数常量，后跟一个' <samp>$</samp> '是<em>位置说明符</em> 。通常，格式规范按照格式字符串中给定的顺序应用于参数。使用位置说明符，格式说明将应用于特定的参数，而不是列表中的下一个参数。位置说明符从一开始计数。从而：</p>
<div class="example">
<pre class="example">printf &quot;%s %s\n&quot;, &quot;don't&quot;, &quot;panic&quot;
printf &quot;%2$s %1$s\n&quot;, &quot;panic&quot;, &quot;don't&quot;
</pre></div>

<p>两次打印著名的友好消息。
</p>
<p>乍一看，此功能似乎用处不大。实际上是<code>gawk</code>扩展名，用于在运行时翻译消息。请参阅“ <a href="Printf-Ordering.html#Printf-Ordering">重新排列”</a>部分<a href="Printf-Ordering.html#Printf-Ordering"><code>printf</code>参数</a> ，它描述如何以及为什么使用位置说明符。现在，我们忽略它们。
</p>
</dd>
<dt><code>-</code> （减去）</dt>
<dd><p>在width修饰符之前使用的负号（请参见此列表的后面）表示将参数在其指定宽度内左对齐。通常，参数以指定的宽度右对齐打印。从而：</p>
<div class="example">
<pre class="example">printf &quot;%-4s&quot;, &quot;foo&quot;
</pre></div>

<p>打印' <samp>foo•</samp> '。
</p>
</dd>
<dt><var>space</var></dt>
<dd><p>对于数字转换，请在正值前加一个空格，在负值前加一个负号。
</p>
</dd>
<dt><code>+</code></dt>
<dd><p>在宽度修饰符之前使用的加号（请参见此列表的后面）表示即使要格式化的数据为正数，也始终为数字转换提供一个符号。' <samp>+</samp> '会覆盖空格修饰符。
</p>
</dd>
<dt><code>#</code></dt>
<dd><p>对某些控制字母使用“替代形式”。对于<samp>%o</samp> '，提供前导零。对于<samp>%x</samp> '和' <samp>%X</samp> '，提供领导' <samp>0x</samp> ' 要么 ' <samp>0X</samp> '表示非零结果。对于<samp>%e</samp> '，' <samp>%E</samp> '，' <samp>%f</samp> '和' <samp>%F</samp> '，结果始终包含小数点。对于<samp>%g</samp> '和' <samp>%G</samp> '，则不会从结果中删除尾随零。
</p>
</dd>
<dt><code>0</code></dt>
<dd><p>领先的<samp>0</samp> '（零）用作标志，指示应在输出中填充零而不是空格。这仅适用于数字输出格式。仅当字段宽度大于要打印的值时，此标志才有效。
</p>
</dd>
<dt><code>'</code></dt>
<dd><p>单引号或撇号字符是ISO C的POSIX扩展。它表示浮点值的整数部分或整数十进制值的整个部分中应包含一个千位分隔符。这仅在支持此类字符的语言环境中起作用。例如：</p>
<div class="example">
<pre class="example">$ <kbd>cat thousands.awk</kbd>          <i>Show source program</i>
-| BEGIN { printf &quot;%'d\n&quot;, 1234567 }
$ <kbd>LC_ALL=C gawk -f thousands.awk</kbd>
-| 1234567                   <i>Results in</i> &quot;C&quot; <i>locale</i>
$ <kbd>LC_ALL=en_US.UTF-8 gawk -f thousands.awk</kbd>
-| 1,234,567                 <i>Results in US English UTF locale</i>
</pre></div>

<p>有关语言环境和国际化问题的更多信息，请参见<a href="Locales.html#Locales">“您在哪里有所作为”</a> 。
</p>
<blockquote>
<p><b>注意：</b> <samp>'</samp> '标志是一个不错的功能，但是它的使用使事情变得复杂：在命令行程序中很难使用它。有关适当的引用技巧的信息，请参阅<a href="Quoting.html#Quoting">Shell引用问题</a> 。
</p></blockquote>

</dd>
<dt><var>width</var></dt>
<dd><p>这是一个数字，用于指定所需的字段最小宽度。在“ <samp>%</samp> '符号和格式控制字符会强制字段扩展到该宽度。执行此操作的默认方法是在左侧填充空格。例如：</p>
<div class="example">
<pre class="example">printf &quot;%4s&quot;, &quot;foo&quot;
</pre></div>

<p>打印' <samp>•foo</samp> '。
</p>
<p>的价值<var>width</var>是最小宽度，而不是最大宽度。如果项目价值要求超过<var>width</var>字符，它可以根据需要尽可能宽。因此，以下内容：</p>
<div class="example">
<pre class="example">printf &quot;%4s&quot;, &quot;foobar&quot;
</pre></div>

<p>打印' <samp>foobar</samp> '。
</p>
<p>在之前<var>width</var>带有减号的结果将在输出的右侧而不是左侧填充空格。</p>
</dd>
<dt><code>.<var>prec</var></code></dt>
<dd><p>句点后跟一个整数常数，指定打印时要使用的精度。精度的含义因控制字母而异：</p>
<dl compact>
<dt><code>%d</code> ， <code>%i</code> ， <code>%o</code> ， <code>%u</code> ， <code>%x</code> ，<code>%X</code></dt>
<dd><p>要打印的最小位数。
</p>
</dd>
<dt><code>%e</code> ， <code>%E</code> ， <code>%f</code> ，<code>%F</code></dt>
<dd><p>小数点右边的位数。
</p>
</dd>
<dt><code>%g</code> ，<code>%G</code></dt>
<dd><p>最大有效位数。
</p>
</dd>
<dt><code>%s</code></dt>
<dd><p>字符串中应打印的最大字符数。
</p></dd>
</dl>

<p>因此，以下内容：</p>
<div class="example">
<pre class="example">printf &quot;%.4s&quot;, &quot;foobar&quot;
</pre></div>

<p>打印' <samp>foob</samp> '。
</p></dd>
</dl>

<p>C库<code>printf</code>的动态<var>width</var>和<var>prec</var>能力（例如， <code>"%*.*s"</code> ）。而不是提供明确的<var>width</var>和/或<var>prec</var>格式字符串中的值，它们将在参数列表中传递。例如：</p>
<div class="example">
<pre class="example">w = 5
p = 3
s = &quot;abcdefg&quot;
printf &quot;%*.*s\n&quot;, w, p, s
</pre></div>

<p>完全等同于：</p>
<div class="example">
<pre class="example">s = &quot;abcdefg&quot;
printf &quot;%5.3s\n&quot;, s
</pre></div>

<p>两个程序都输出' <samp>••abc
<!-- /@w --></samp> '。的较早版本<code>awk</code>不支持此功能。如果必须使用这样的版本，则可以通过使用串联来建立格式字符串来模拟此功能，如下所示：</p>
<div class="example">
<pre class="example">w = 5
p = 3
s = &quot;abcdefg&quot;
printf &quot;%&quot; w &quot;.&quot; p &quot;s\n&quot;, s
</pre></div>

<p>这不是特别容易阅读，但是确实有效。
</p>
<a name="index-troubleshooting_002c-fatal-errors_002c-printf-format-strings"></a>
<a name="index-POSIX-awk_002c-printf-format-strings-and"></a>
<p>C程序员可能习惯于提供其他修饰符（' <samp>h</samp> '，' <samp>j</samp> '，' <samp>l</samp> '，' <samp>L</samp> '，' <samp>t</samp> '和' <samp>z</samp> '）在<code>printf</code>格式化字符串。这些无效于<code>awk</code> 。最<code>awk</code>实现默默地忽略它们。如果<samp>--lint</samp>在命令行上提供（请参阅“ <a href="Options.html#Options">命令行选项”</a>一节）， <code>gawk</code>警告其使用。如果<samp>--posix</samp>提供时，其使用是致命错误。
</p>
<hr>
<div class="header">
<p>下一个： <a href="Printf-Examples.html#Printf-Examples" rel="next" accesskey="n">printf的实施例</a> ，上一个： <a href="Control-Letters.html#Control-Letters" rel="prev" accesskey="p">控制快报</a> ，上级： <a href="Printf.html#Printf" rel="up" accesskey="u">printf的</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>