<html ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>比较运算符（《 GNU Awk用户指南》）</title>

<meta name="description" content="Comparison Operators (The GNU Awk User’s Guide)">
<meta name="keywords" content="Comparison Operators (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Typing-and-Comparison.html#Typing-and-Comparison" rel="up" title="Typing and Comparison">
<link href="POSIX-String-Comparison.html#POSIX-String-Comparison" rel="next" title="POSIX String Comparison">
<link href="Variable-Typing.html#Variable-Typing" rel="prev" title="Variable Typing">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


</head>

<body lang="zh-Hans" >
<a name="Comparison-Operators"></a>
<div class="header">
<p>下一篇： <a href="POSIX-String-Comparison.html#POSIX-String-Comparison" rel="next" accesskey="n">POSIX字符串比较</a> ，上一篇： <a href="Variable-Typing.html#Variable-Typing" rel="prev" accesskey="p">变量键入</a> ，上一篇： <a href="Typing-and-Comparison.html#Typing-and-Comparison" rel="up" accesskey="u">键入和比较</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Comparison-Operators-1"></a>
<h4 class="subsubsection">6.3.2.2比较运算符</h4>

<p><em>比较表达式</em>比较字符串或数字的关系，例如相等性。它们是使用<em>关系运算符</em>编写的，它们是C语言中那些<em>运算符</em>的超集。 <a href="#table_002drelational_002dops">表6.3</a>描述了它们。
</p>
<a name="index-_003c-_0028left-angle-bracket_0029_002c-_003c-operator"></a>
<a name="index-left-angle-bracket-_0028_003c_0029_002c-_003c-operator"></a>
<a name="index-_003c-_0028left-angle-bracket_0029_002c-_003c_003d-operator"></a>
<a name="index-left-angle-bracket-_0028_003c_0029_002c-_003c_003d-operator"></a>
<a name="index-_003e-_0028right-angle-bracket_0029_002c-_003e_003d-operator"></a>
<a name="index-right-angle-bracket-_0028_003e_0029_002c-_003e_003d-operator"></a>
<a name="index-_003e-_0028right-angle-bracket_0029_002c-_003e-operator"></a>
<a name="index-right-angle-bracket-_0028_003e_0029_002c-_003e-operator"></a>
<a name="index-_003d-_0028equals-sign_0029_002c-_003d_003d-operator"></a>
<a name="index-equals-sign-_0028_003d_0029_002c-_003d_003d-operator"></a>
<a name="index-_0021-_0028exclamation-point_0029_002c-_0021_003d-operator"></a>
<a name="index-exclamation-point-_0028_0021_0029_002c-_0021_003d-operator"></a>
<a name="index-_007e-_0028tilde_0029_002c-_007e-operator-4"></a>
<a name="index-tilde-_0028_007e_0029_002c-_007e-operator-4"></a>
<a name="index-_0021-_0028exclamation-point_0029_002c-_0021_007e-operator-4"></a>
<a name="index-exclamation-point-_0028_0021_0029_002c-_0021_007e-operator-4"></a>
<a name="index-in-operator"></a>
<div class="float"><a name="table_002drelational_002dops"></a>

<table>
<thead><tr><th width="25%">表达</th><th width="75%">结果</th></tr></thead>
<tbody><tr><td width="25%"><var>x</var> <code><</code> <var>y</var></td><td width="75%">如果为真<var>x</var>小于<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code><=</code> <var>y</var></td><td width="75%">如果为真<var>x</var>小于或等于<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code>></code> <var>y</var></td><td width="75%">如果为真<var>x</var>大于<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code>>=</code> <var>y</var></td><td width="75%">如果为真<var>x</var>大于或等于<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code>==</code> <var>y</var></td><td width="75%">如果为真<var>x</var>等于<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code>!=</code> <var>y</var></td><td width="75%">如果为真<var>x</var>不等于<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code>~</code> <var>y</var></td><td width="75%">如果字符串则为真<var>x</var>匹配由表示的正则表达式<var>y</var></td></tr>
<tr><td width="25%"><var>x</var> <code>!~</code> <var>y</var></td><td width="75%">如果字符串则为真<var>x</var>与表示的正则表达式不匹配<var>y</var></td></tr>
<tr><td width="25%"><var>subscript</var> <code>in</code> <var>array</var></td><td width="75%">如果数组为真<var>array</var>下标有元素<var>subscript</var></td></tr>
</tbody></table>
<div class="float-caption"><p><strong>表6.3：</strong>关系运算符</p></div></div>
<p>比较表达式的值为true（如果为true）和零（如果为false）。比较混合类型的操作数时，数字操作数将使用的值转换为字符串<code>CONVFMT</code> （请参阅<a href="Conversion.html#Conversion">“字符串和数字的转换”</a>部分）。
</p>
<p>通过比较每个字符串的第一个字符，然后比较每个字符串的第二个字符等来比较字符串。从而， <code>"10"</code>小于<code>"9"</code> 。如果有两个字符串，其中一个是另一个的前缀，则较短的字符串小于较长的字符串。从而， <code>"abc"</code>小于<code>"abcd"</code> 。
</p>
<a name="index-troubleshooting_002c-_003d_003d-operator"></a>
<p>误输入“ <samp>==</samp> '运算符，然后忽略其中一个' <samp>=</samp> '个字符。结果仍然有效<code>awk</code>代码，但该程序没有执行预期的操作：</p>
<div class="example">
<pre class="example">if (a = b)   # oops! should be a == b
   &hellip;
else
   &hellip;
</pre></div>

<p>除非<code>b</code>碰巧是零或空字符串， <code>if</code>测试的一部分总是成功的。由于运算符是如此相似，因此在扫描源代码时很难发现这种错误。
</p>
<p>以下表达式列表说明了比较的种类<code>awk</code>以及每个比较的结果是：</p>
<dl compact>
<dt><code>1.5 <= 2.0</code></dt>
<dd><p>数值比较（真）</p>
</dd>
<dt><code>"abc" >= "xyz"</code></dt>
<dd><p>字符串比较（假）</p>
</dd>
<dt><code>1.5 != " +2"</code></dt>
<dd><p>字符串比较（真）</p>
</dd>
<dt><code>"1e2" < "3"</code></dt>
<dd><p>字符串比较（真）</p>
</dd>
<dt><code>a = 2; b = "2"</code></dt>
<dt><code>a == b</code></dt>
<dd><p>字符串比较（真）</p>
</dd>
<dt><code>a = 2; b = " +2"</code></dt>
<dt><code>a == b</code></dt>
<dd><p>字符串比较（假）</p></dd>
</dl>

<p>在此示例中：</p>
<div class="example">
<pre class="example">$ <kbd>echo 1e2 3 | awk '{ print ($1 &lt; $2) ? &quot;true&quot; : &quot;false&quot; }'</kbd>
-| false
</pre></div>

<a name="index-comparison-expressions_002c-string-vs_002e-regexp"></a>
<p>结果是<samp>false</samp> '因为两者<code>$1</code>和<code>$2</code>是用户输入。它们是数字字符串，因此都具有strnum属性，指示数字比较。比较规则和使用数字字符串的目的是试图产生“最令人惊讶”的行为，同时仍然“做正确的事”。
</p>
<p>字符串比较和正则表达式比较有很大的不同。例如：</p>
<div class="example">
<pre class="example">x == &quot;foo&quot;
</pre></div>

<p>的值为一，如果变量为true <code>x</code>恰恰是' <samp>foo</samp> '。相比之下：</p>
<div class="example">
<pre class="example">x ~ /foo/
</pre></div>

<p>值为一，如果<code>x</code>包含“ <samp>foo</samp> '， 如<code>"Oh, what a fool am I!"</code> 。
</p>
<a name="index-_007e-_0028tilde_0029_002c-_007e-operator-5"></a>
<a name="index-tilde-_0028_007e_0029_002c-_007e-operator-5"></a>
<a name="index-_0021-_0028exclamation-point_0029_002c-_0021_007e-operator-5"></a>
<a name="index-exclamation-point-_0028_0021_0029_002c-_0021_007e-operator-5"></a>
<p>'的右侧操作数<samp>~</samp> '和' <samp>!~</samp> '运算符可以是正则表达式常量（ <code>/</code> … <code>/</code> ）或普通表达式。在后一种情况下，将表达式的值作为字符串用作动态正则表达式（请参见<a href="Regexp-Usage.html#Regexp-Usage">如何使用正则表达式</a> ；另请参见<a href="Computed-Regexps.html#Computed-Regexps">使用动态</a> <a href="Regexp-Usage.html#Regexp-Usage">正则表达式</a> ）。
</p>
<a name="index-awk_002c-regexp-constants-and"></a>
<a name="index-regexp-constants-2"></a>
<p>斜杠本身的常量正则表达式本身也是一个表达式。
<code>/<var>regexp</var>/</code>是以下比较表达式的缩写：</p>
<div class="example">
<pre class="example">$0 ~ /<var>regexp</var>/
</pre></div>

<p>一个特别的地方<code>/foo/</code> <em>不是</em> '的缩写<samp>$0 ~ /foo/</samp> '是当它是'的右操作数时<samp>~</samp> ' 要么 ' <samp>!~</samp> '。请参阅<a href="Using-Constant-Regexps.html#Using-Constant-Regexps">使用正则表达式常量</a>一节，其中将对此进行详细讨论。
</p>
<hr>
<div class="header">
<p>下一篇： <a href="POSIX-String-Comparison.html#POSIX-String-Comparison" rel="next" accesskey="n">POSIX字符串比较</a> ，上一篇： <a href="Variable-Typing.html#Variable-Typing" rel="prev" accesskey="p">变量键入</a> ，上一篇： <a href="Typing-and-Comparison.html#Typing-and-Comparison" rel="up" accesskey="u">键入和比较</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>