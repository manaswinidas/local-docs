<html><head></head><body lang="zh-Hans" ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>自动设置（《 GNU Awk用户指南》）</title>

<meta name="description" content="Auto-set (The GNU Awk User’s Guide)">
<meta name="keywords" content="Auto-set (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Built_002din-Variables.html#Built_002din-Variables" rel="up" title="Built-in Variables">
<link href="ARGC-and-ARGV.html#ARGC-and-ARGV" rel="next" title="ARGC and ARGV">
<link href="User_002dmodified.html#User_002dmodified" rel="prev" title="User-modified">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="manual.css">





<a name="Auto_002dset"></a>
<div class="header">
<p>下一篇： <a href="ARGC-and-ARGV.html#ARGC-and-ARGV" rel="next" accesskey="n">ARGC和ARGV</a> ，上一篇： <a href="User_002dmodified.html#User_002dmodified" rel="prev" accesskey="p">用户修改</a> ，上一篇： <a href="Built_002din-Variables.html#Built_002din-Variables" rel="up" accesskey="u">内置变量</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Built_002din-Variables-That-Convey-Information"></a>
<h4 class="subsection">7.5.2传达信息的内置变量</h4>

<a name="index-predefined-variables_002c-conveying-information"></a>
<a name="index-variables_002c-predefined_002c-conveying-information"></a>
<p>以下是按字母顺序排列的变量列表， <code>awk</code>在某些情况下会自动设置以向您的程序提供信息。
</p>
<p>特定于的变量<code>gawk</code>都用英镑符号（' <samp>#</samp> '）。这些变量是<code>gawk</code>扩展名。其他<code>awk</code>实现或<code>gawk</code>处于兼容模式（请参阅“ <a href="Options.html#Options">命令行选项”</a>一节），它们并不特殊：</p>
<dl compact>
<dd><a name="index-ARGC_002fARGV-variables"></a>
<a name="index-arguments_002c-command_002dline-1"></a>
<a name="index-command-line_002c-arguments-1"></a>
</dd>
<dt><code>ARGC</code> ，<code>ARGV</code></dt>
<dd><p>命令行参数可用于<code>awk</code>程序存储在名为<code>ARGV</code> 。 <code>ARGC</code>是存在的命令行参数的数量。请参阅<a href="Other-Arguments.html#Other-Arguments">其他命令行参数一节</a> 。不像大多数<code>awk</code>数组<code>ARGV</code>索引从0到<code>ARGC</code> -1。在以下示例中：</p>
<div class="example">
<pre class="example">$ <kbd>awk 'BEGIN {</kbd>
&gt;         <kbd>for (i = 0; i &lt; ARGC; i++)</kbd>
&gt;             <kbd>print ARGV[i]</kbd>
&gt;      <kbd>}' inventory-shipped mail-list</kbd>
-| awk
-| inventory-shipped
-| mail-list
</pre></div>

<p><code>ARGV[0]</code>包含“ <samp>awk</samp> '， <code>ARGV[1]</code>包含“ <samp>inventory-shipped</samp> '和<code>ARGV[2]</code>包含“ <samp>mail-list</samp> '。的价值<code>ARGC</code>是三，比最后一个元素的索引多一个<code>ARGV</code> ，因为元素从零开始编号。
</p>
<a name="index-programming-conventions_002c-ARGC_002fARGV-variables"></a>
<p>名字<code>ARGC</code>和<code>ARGV</code> ，以及将数组从0索引到的约定<code>ARGC</code> -1源自C语言访问命令行参数的方法。
</p>
<a name="index-dark-corner_002c-value-of-ARGV_005b0_005d"></a>
<p>的价值<code>ARGV[0]</code>可能因系统而异。另外，您应注意程序文本<em>不</em>包含在<code>ARGV</code> ，也没有<code>awk</code>的命令行选项。请参阅<a href="ARGC-and-ARGV.html#ARGC-and-ARGV">使用</a>部分<a href="ARGC-and-ARGV.html#ARGC-and-ARGV"><code>ARGC</code>和<code>ARGV</code></a>有关如何的信息<code>awk</code>使用这些变量。（直流）
</p>
<a name="index-ARGIND-variable"></a>
<a name="index-differences-in-awk-and-gawk_002c-ARGIND-variable"></a>
</dd>
<dt><code>ARGIND #</code></dt>
<dd><p>中的索引<code>ARGV</code>当前正在处理的文件。每次<code>gawk</code>打开一个新的数据文件进行处理，它设置<code>ARGIND</code>到索引<code>ARGV</code>文件名。什么时候<code>gawk</code>正在处理输入文件， <samp>FILENAME == ARGV[ARGIND]</samp>永远是对的。
</p>
<a name="index-files_002c-processing_002c-ARGIND-variable-and"></a>
<p>此变量在文件处理中很有用。它使您可以知道数据文件列表中的行距以及在命令行上区分相同文件名的连续实例。
</p>
<a name="index-file-names_002c-distinguishing"></a>
<p>虽然您可以更改<code>ARGIND</code>在你内<code>awk</code>程序， <code>gawk</code>打开下一个文件时，它会自动将其设置为新值。
</p>
<a name="index-ENVIRON-array"></a>
<a name="index-environment-variables_002c-in-ENVIRON-array"></a>
</dd>
<dt><code>ENVIRON</code></dt>
<dd><p>包含环境值的关联数组。数组索引是环境变量名称。元素是特定环境变量的值。例如， <code>ENVIRON["HOME"]</code>可能<code>/home/arnold</code> 。
</p>
<p>对于POSIX <code>awk</code> ，更改此数组不会影响传递给以下程序的环境： <code>awk</code>可能通过重定向或<code>system()</code>功能。
</p>
<p>但是，从4.2版开始，如果不处于POSIX兼容模式， <code>gawk</code>确实会在以下情况下更新其自身的环境<code>ENVIRON</code>更改，从而更改了它创建的程序所看到的环境。因此，如果您进行修改，则应格外小心<code>ENVIRON["PATH"]</code> ，这是查找可执行程序的搜索路径。
</p>
<p>这也会影响跑步<code>gawk</code>程序，因为某些内置函数可能会注意某些环境变量。最明显的例子是<code>mktime()</code> （请参阅“ <a href="Time-Functions.html#Time-Functions">时间函数”</a>一节），其中要注意<code>TZ</code>许多系统上的环境变量。
</p>
<p>某些操作系统可能没有环境变量。在此类系统上， <code>ENVIRON</code>数组为空（除了<code>ENVIRON["AWKPATH"]</code> <!-- /@w -->和<code>ENVIRON["AWKLIBPATH"]</code> <!-- /@w --> ;见<a href="AWKPATH-Variable.html#AWKPATH-Variable">的<code>AWKPATH</code>环境变量</a> ，并请参见<a href="AWKLIBPATH-Variable.html#AWKLIBPATH-Variable">本<code>AWKLIBPATH</code>环境变量</a> ）。
</p>
<a name="index-gawk_002c-ERRNO-variable-in-3"></a>
<a name="index-ERRNO-variable"></a>
<a name="index-differences-in-awk-and-gawk_002c-ERRNO-variable"></a>
<a name="index-error-handling_002c-ERRNO-variable-and"></a>
</dd>
<dt><code>ERRNO #</code></dt>
<dd><p>如果在重定向期间发生系统错误<code>getline</code> ，在阅读期间<code>getline</code> ，或在<code>close()</code>操作，然后<code>ERRNO</code>包含描述错误的字符串。
</p>
<p>此外， <code>gawk</code>清除<code>ERRNO</code>在打开每个命令行输入文件之前。这样可以检查文件是否在文件内部可读<code>BEGINFILE</code>图案（见部分<a href="BEGINFILE_002fENDFILE.html#BEGINFILE_002fENDFILE">的<code>BEGINFILE</code>和<code>ENDFILE</code>特殊模式</a> ）。
</p>
<p>除此以外， <code>ERRNO</code>类似于C变量<code>errno</code> 。除了刚才提到的情况， <code>gawk</code> <em>从不</em>清除（将其设置为零或<code>""</code> ）。因此，您仅应期望当I / O操作返回失败值时，其值才有意义，例如<code>getline</code>返回-1。当然，在执行I / O操作之前，您可以自己清除它。
</p>
<p>如果值<code>ERRNO</code>对应于C中的系统错误<code>errno</code>变量，然后<code>PROCINFO["errno"]</code>将设置为<code>errno</code> 。对于非系统错误， <code>PROCINFO["errno"]</code>将为零。
</p>
<a name="index-FILENAME-variable-1"></a>
<a name="index-dark-corner_002c-FILENAME-variable-1"></a>
</dd>
<dt><code>FILENAME</code></dt>
<dd><p>当前输入文件的名称。如果命令行上未列出任何数据文件， <code>awk</code>从标准输入中读取并<code>FILENAME</code>被设定为<code>"-"</code> 。 <code>FILENAME</code>每次读取新文件时都会更改（请参阅“ <a href="Reading-Files.html#Reading-Files">读取输入文件”</a>一节）。里面一个<code>BEGIN</code>规则，价值<code>FILENAME</code>是<code>""</code> ，因为尚未处理任何输入文件。 <a name="DOCF38" href="#FOOT38"><sup>38</sup></a> （直流）但是请注意，使用<code>getline</code> （请参阅<a href="Getline.html#Getline">使用<code>getline</code></a> ）里面<code>BEGIN</code>规则可以给<code>FILENAME</code>一个值。
</p>
<a name="index-FNR-variable-1"></a>
</dd>
<dt><code>FNR</code></dt>
<dd><p>当前文件中的当前记录号。 <code>awk</code>增量<code>FNR</code>每次读取新记录时（请参见<a href="Records.html#Records">如何将输入拆分为记录部分</a> ）。
<code>awk</code>重设<code>FNR</code>每次启动新的输入文件时为零。
</p>
<a name="index-NF-variable-1"></a>
</dd>
<dt><code>NF</code></dt>
<dd><p>当前输入记录中的字段数。
<code>NF</code>每次读取新记录，创建新字段或何时设置<code>$0</code>更改（请参阅<a href="Fields.html#Fields">检查字段</a>部分）。
</p>
<p>与本小节中描述的大多数变量不同，将值分配给<code>NF</code>有可能影响<code>awk</code>的内部运作方式。特别是对<code>NF</code>可用于在当前记录中创建字段或从当前记录中删除字段。请参阅<a href="Changing-Fields.html#Changing-Fields">更改字段的内容</a>部分。
</p>
<a name="index-FUNCTAB-array"></a>
<a name="index-gawk_002c-FUNCTAB-array-in"></a>
<a name="index-differences-in-awk-and-gawk_002c-FUNCTAB-variable"></a>
</dd>
<dt><code>FUNCTAB #</code></dt>
<dd><p>一个数组，其索引和对应值是程序中所有内置，用户定义和扩展功能的名称。
</p>
<blockquote>
<p><b>注意：</b>尝试使用<code>delete</code>声明<code>FUNCTAB</code>数组会导致致命错误。尝试分配给的元素<code>FUNCTAB</code>也会导致致命错误。
</p></blockquote>

<a name="index-NR-variable-1"></a>
</dd>
<dt><code>NR</code></dt>
<dd><p>输入记录数<code>awk</code>自程序开始执行以来已处理（请参见<a href="Records.html#Records">如何将输入拆分为记录部分</a> ）。
<code>awk</code>增量<code>NR</code>每次读取新记录。
</p>
<a name="index-gawk_002c-PROCINFO-array-in"></a>
<a name="index-PROCINFO-array"></a>
<a name="index-differences-in-awk-and-gawk_002c-PROCINFO-array"></a>
</dd>
<dt><code>PROCINFO #</code></dt>
<dd><p>该数组的元素提供对运行信息的访问<code>awk</code>程序。保证可以使用以下元素（按字母顺序列出）：</p>
<dl compact>
<dt><code>PROCINFO["argv"]</code></dt>
<dd><a name="index-command-line_002c-arguments-2"></a>
<p>的<code>PROCINFO["argv"]</code>数组包含所有命令行参数（在必须由程序手动完成的平台上的glob扩展和重定向处理之后），下标范围为0到<code>argc</code> -1。例如， <code>PROCINFO["argv"][0]</code>将包含的名称<code>gawk</code>被调用。这是如何使用此功能的示例：</p>
<div class="example">
<pre class="example">gawk '
BEGIN {
        for (i = 0; i &lt; length(PROCINFO[&quot;argv&quot;]); i++)
                print i, PROCINFO[&quot;argv&quot;][i]
}'
</pre></div>

<p>请注意，这与标准不同<code>ARGV</code>数组，不包含已经被处理的命令行参数<code>gawk</code> （请参见<a href="ARGC-and-ARGV.html#ARGC-and-ARGV">使用</a>部分<a href="ARGC-and-ARGV.html#ARGC-and-ARGV"><code>ARGC</code>和<code>ARGV</code></a> ）。
</p>
<a name="index-effective-group-ID-of-gawk-user"></a>
</dd>
<dt><code>PROCINFO["egid"]</code></dt>
<dd><p>的价值<code>getegid()</code>系统调用。
</p>
</dd>
<dt><code>PROCINFO["errno"]</code></dt>
<dd><p>C的价值<code>errno</code>何时可变<code>ERRNO</code>设置为关联的错误消息。
</p>
</dd>
<dt><code>PROCINFO["euid"]</code></dt>
<dd><a name="index-effective-user-ID-of-gawk-user"></a>
<p>的价值<code>geteuid()</code>系统调用。
</p>
</dd>
<dt><code>PROCINFO["FS"]</code></dt>
<dd><p>这是<code>"FS"</code>如果用<code>FS</code>有效<code>"FIELDWIDTHS"</code>如果用<code>FIELDWIDTHS</code>有效<code>"FPAT"</code>如果字段与<code>FPAT</code>有效，或<code>"API"</code>如果字段拆分由API输入解析器控制。
</p>
</dd>
<dt><code>PROCINFO["gid"]</code></dt>
<dd><a name="index-group-ID-of-gawk-user"></a>
<p>的价值<code>getgid()</code>系统调用。
</p>
</dd>
<dt><code>PROCINFO["identifiers"]</code></dt>
<dd><a name="index-program-identifiers"></a>
<p>子数组，由在文本中使用的所有标识符的名称索引<code>awk</code>程序。<em>标识符</em>只是变量（标量或数组），内置函数，用户定义函数或扩展函数的名称。对于每个标识符，元素的值为以下之一：</p>
<dl compact>
<dt><code>"array"</code></dt>
<dd><p>标识符是一个数组。
</p>
</dd>
<dt><code>"builtin"</code></dt>
<dd><p>标识符是内置函数。
</p>
</dd>
<dt><code>"extension"</code></dt>
<dd><p>标识符是通过加载的扩展功能<code>@load</code>要么<samp>-l</samp> 。
</p>
</dd>
<dt><code>"scalar"</code></dt>
<dd><p>标识符是标量。
</p>
</dd>
<dt><code>"untyped"</code></dt>
<dd><p>标识符是无类型的（可以用作标量或数组； <code>gawk</code>还不知道）。
</p>
</dd>
<dt><code>"user"</code></dt>
<dd><p>标识符是用户定义的函数。
</p></dd>
</dl>

<p>这些值表示什么<code>gawk</code>完成对程序的解析后，了解标识符；它们<em>不会</em>在程序运行时更新。
</p>
</dd>
<dt><code>PROCINFO["platform"]</code></dt>
<dd><a name="index-platform-running-on"></a>
<p>该元素给出一个字符串，指示要针对的平台<code>gawk</code>被编译。该值将是以下值之一：</p>
<dl compact>
<dt><code>"djgpp"</code></dt>
<dt><code>"mingw"</code></dt>
<dd><p>Microsoft Windows，分别使用DJGPP或MinGW。
</p>
</dd>
<dt><code>"os2"</code></dt>
<dd><p>OS / 2。
</p>
</dd>
<dt><code>"os390"</code></dt>
<dd><p>OS / 390。
</p>
</dd>
<dt><code>"posix"</code></dt>
<dd><p>GNU / Linux，Cygwin，Mac OS X和旧版Unix系统。
</p>
</dd>
<dt><code>"vms"</code></dt>
<dd><p>OpenVMS或Vax / VMS。</p></dd>
</dl>

</dd>
<dt><code>PROCINFO["pgrpid"]</code></dt>
<dd><a name="index-process-group-ID-of-gawk-process"></a>
<p>当前进程的进程组ID。
</p>
</dd>
<dt><code>PROCINFO["pid"]</code></dt>
<dd><a name="index-process-ID-of-gawk-process"></a>
<p>当前进程的进程ID。
</p>
</dd>
<dt><code>PROCINFO["ppid"]</code></dt>
<dd><a name="index-parent-process-ID-of-gawk-process"></a>
<p>当前进程的父进程ID。
</p>
</dd>
<dt><code>PROCINFO["strftime"]</code></dt>
<dd><p>的默认时间格式字符串<code>strftime()</code> 。为该元素分配新值将更改默认值。请参阅<a href="Time-Functions.html#Time-Functions">时间功能</a>一节。
</p>
</dd>
<dt><code>PROCINFO["uid"]</code></dt>
<dd><p>的价值<code>getuid()</code>系统调用。
</p>
</dd>
<dt><code>PROCINFO["version"]</code></dt>
<dd><a name="index-version-of-gawk"></a>
<a name="index-gawk-version"></a>
<p>版本<code>gawk</code> 。
</p></dd>
</dl>

<p>如果您使用以下版本，则数组中的以下其他元素可用于提供有关MPFR和GMP库的信息： <code>gawk</code>支持任意精度算术（请参见“ <a href="Arbitrary-Precision-Arithmetic.html#Arbitrary-Precision-Arithmetic">算术和任意精度算术”部分<code>gawk</code></a> ）：</p>
<dl compact>
<dt><code>PROCINFO["gmp_version"]</code></dt>
<dd><a name="index-version-of-GNU-MP-library"></a>
<p>GNU MP库的版本。
</p>
<a name="index-version-of-GNU-MPFR-library"></a>
</dd>
<dt><code>PROCINFO["mpfr_version"]</code></dt>
<dd><p>GNU MPFR库的版本。
</p>
</dd>
<dt><code>PROCINFO["prec_max"]</code></dt>
<dd><a name="index-maximum-precision-supported-by-MPFR-library"></a>
<p>MPFR支持的最大精度。</p>
</dd>
<dt><code>PROCINFO["prec_min"]</code></dt>
<dd><a name="index-minimum-precision-required-by-MPFR-library"></a>
<p>MPFR要求的最低精度。</p></dd>
</dl>

<p>数组中的以下其他元素可用于提供有关扩展API版本的信息（如果您的版本为<code>gawk</code>支持动态加载扩展功能（请参阅<a href="Dynamic-Extensions.html#Dynamic-Extensions">“为<code>gawk</code></a> ）：</p>
<dl compact>
<dt><code>PROCINFO["api_major"]</code></dt>
<dd><a name="index-version-of-gawk-extension-API"></a>
<a name="index-extension-API_002c-version-number"></a>
<p>扩展API的主要版本。</p>
</dd>
<dt><code>PROCINFO["api_minor"]</code></dt>
<dd><p>扩展API的次要版本。</p></dd>
</dl>

<a name="index-supplementary-groups-of-gawk-process"></a>
<p>在某些系统上，数组中可能有元素， <code>"group1"</code>通过<code>"group<var>N</var>"</code>对于一些<var>N</var> 。 <var>N</var>是该过程具有的补充组的数量。使用<code>in</code>操作符以测试这些元素（请参阅“ <a href="Reference-to-Elements.html#Reference-to-Elements">引用数组元素”一节</a> ）。
</p>
<p>以下元素可让您进行更改<code>gawk</code>的行为：</p>
<dl compact>
<dt><code>PROCINFO["NONFATAL"]</code></dt>
<dd><p>如果存在此元素，则所有重定向的I / O错误都不会致命。请参阅“ <a href="Nonfatal.html#Nonfatal">启用非致命输出”</a>部分。
</p>
</dd>
<dt><code>PROCINFO["<var>name</var>", "NONFATAL"]</code></dt>
<dd><p>使I / O错误<var>name</var>是非致命的。请参阅“ <a href="Nonfatal.html#Nonfatal">启用非致命输出”</a>部分。
</p>
</dd>
<dt><code>PROCINFO["<var>command</var>", "pty"]</code></dt>
<dd><p>用于双向通讯<var>command</var> ，请使用伪tty而不是设置双向管道。有关更多信息，请参见<a href="Two_002dway-I_002fO.html#Two_002dway-I_002fO">与另一进程的双向通信</a>部分。
</p>
</dd>
<dt><code>PROCINFO["<var>input_name</var>", "READ_TIMEOUT"]</code></dt>
<dd><p>设置超时以读取输入重定向<var>input_name</var> 。有关更多信息，请参见<a href="Read-Timeout.html#Read-Timeout">读取超时输入</a>部分。
</p>
</dd>
<dt><code>PROCINFO["<var>input_name</var>", "RETRY"]</code></dt>
<dd><p>如果从中读取数据时发生可能重试的I / O错误<var>input_name</var> ，并且此数组条目存在，然后<code>getline</code>返回-2，而不是遵循返回-1并配置的默认行为<var>input_name</var>不返回更多数据。可能重试的I / O错误是<code>errno</code>有价值<code>EAGAIN</code> ， <code>EWOULDBLOCK</code> ， <code>EINTR</code> ， 要么<code>ETIMEDOUT</code> 。这可能与结合使用<code>PROCINFO["<var>input_name</var>", "READ_TIMEOUT"]</code>或文件描述符已配置为以非阻塞方式运行的情况。有关更多信息，请参见“ <a href="Retrying-Input.html#Retrying-Input">某些输入错误后重试读取”部分</a> 。
</p>
</dd>
<dt><code>PROCINFO["sorted_in"]</code></dt>
<dd><p>如果该元素存在于<code>PROCINFO</code> ，它的值控制' <samp>for (<var>indx</var> in <var>array</var>)</samp>循环。这是一项高级功能，因此我们将完整描述推迟到稍后；请参阅<a href="Controlling-Scanning.html#Controlling-Scanning">将预定义阵列扫描顺序与<code>gawk</code></a> 。
</p></dd>
</dl>

<a name="index-RLENGTH-variable"></a>
</dd>
<dt><code>RLENGTH</code></dt>
<dd><p>子串的长度与<code>match()</code>函数（请参阅“ <a href="String-Functions.html#String-Functions">字符串操作函数”</a>一节）。
<code>RLENGTH</code>通过调用设置<code>match()</code>功能。它的值是匹配字符串的长度，如果找不到匹配项，则为-1。
</p>
<a name="index-RSTART-variable"></a>
</dd>
<dt><code>RSTART</code></dt>
<dd><p>子字符串的起始索引（以字符为单位）与<code>match()</code>函数（请参阅“ <a href="String-Functions.html#String-Functions">字符串操作函数”</a>一节）。
<code>RSTART</code>通过调用设置<code>match()</code>功能。它的值是匹配的子字符串开始的字符串位置；如果找不到匹配项，则为零。
</p>
<a name="index-gawk_002c-RT-variable-in-3"></a>
<a name="index-RT-variable-3"></a>
<a name="index-differences-in-awk-and-gawk_002c-RS_002fRT-variables-3"></a>
</dd>
<dt><code>RT #</code></dt>
<dd><p>与由表示的文本匹配的输入文本<code>RS</code> ，记录分隔符。每次读取记录时设置。
</p>
<a name="index-gawk_002c-SYMTAB-array-in"></a>
<a name="index-SYMTAB-array"></a>
<a name="index-differences-in-awk-and-gawk_002c-SYMTAB-variable"></a>
</dd>
<dt><code>SYMTAB #</code></dt>
<dd><p>一个数组，其索引是程序中所有已定义的全局变量和数组的名称。 <code>SYMTAB</code>使<code>gawk</code>的符号表对<code>awk</code>程序员。它被构建为<code>gawk</code>解析程序，并在程序开始运行之前完成。
</p>
<p>该数组可用于间接访问以读取或写入变量的值：</p>
<div class="example">
<pre class="example">foo = 5
SYMTAB[&quot;foo&quot;] = 4
print foo    # prints 4
</pre></div>

<p>的<code>isarray()</code>函数（请参阅“ <a href="Type-Functions.html#Type-Functions">获取类型信息”</a>一节）可用于测试元素是否在<code>SYMTAB</code>是一个数组。另外，您可能无法使用<code>delete</code>声明<code>SYMTAB</code>数组。
</p>
<p>5.0之前的版本<code>gawk</code> ，您可以将索引用于<code>SYMTAB</code>那不是预定义的标识符：</p>
<div class="example">
<pre class="example">SYMTAB[&quot;xxx&quot;] = 5
print SYMTAB[&quot;xxx&quot;]
</pre></div>

<p>这不再起作用，而是产生致命错误，因为它导致猖ramp的混乱。
</p>
<a name="index-Schorr_002c-Andrew-1"></a>
<p>的<code>SYMTAB</code>数组比看起来更有趣。Andrew Schorr指出，它可以有效地<code>awk</code>数据指针。考虑他的例子：</p>
<div class="example">
<pre class="example"># Indirect multiply of any variable by amount, return result

function multiply(variable, amount)
{
    return SYMTAB[variable] *= amount
}
</pre></div>

<p>您可以这样使用它：</p>
<div class="example">
<pre class="example">BEGIN {
    answer = 10.5
    multiply(&quot;answer&quot;, 4)
    print &quot;The answer is&quot;, answer
}
</pre></div>

<p>运行时，将产生：</p>
<div class="example">
<pre class="example">$ <kbd>gawk -f answer.awk</kbd>
-| The answer is 42
</pre></div>

<blockquote>
<p><b>注意：</b>为了避免严重的时间旅行自相矛盾， <a name="DOCF39" href="#FOOT39"><sup>39</sup></a> <code>FUNCTAB</code>也不<code>SYMTAB</code>可作为元素<code>SYMTAB</code>数组。
</p></blockquote>
</dd>
</dl>

<a name="index-sidebar_002c-Changing-NR-and-FNR"></a>

<table class="cartouche" border="1"><tbody><tr><td>
<div align="center"><b>改变中<code>NR</code>和<code>FNR</code></b>
</div>

<a name="index-NR-variable_002c-changing"></a>
<a name="index-FNR-variable_002c-changing"></a>
<a name="index-dark-corner_002c-FNR_002fNR-variables"></a>
<p><code>awk</code>增量<code>NR</code>和<code>FNR</code>每次读取记录时，不要将它们设置为读取的记录数的绝对值。这意味着程序可以更改这些变量，并且对于每个记录，它们的新值都会增加。（直流）以下示例显示了这一点：</p>
<div class="example">
<pre class="example">$ <kbd>echo '1</kbd>
&gt; <kbd>2</kbd>
&gt; <kbd>3</kbd>
&gt; <kbd>4' | awk 'NR == 2 { NR = 17 }</kbd>
&gt; <kbd>{ print NR }'</kbd>
-| 1
-| 17
-| 18
-| 19
</pre></div>

<p>之前<code>FNR</code>已添加到<code>awk</code>语言（请参见<a href="V7_002fSVR3_002e1.html#V7_002fSVR3_002e1">V7和SVR3.1之间的主要更改</a>部分）， <code>awk</code>程序使用此功能通过重置来跟踪文件中的记录数<code>NR</code>零时<code>FILENAME</code>改变了。
</p></td></tr></tbody></table>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a name="FOOT38" href="#DOCF38">（38）</a></h3>
<p>Unix的一些早期实现<code>awk</code>已初始化<code>FILENAME</code>至<code>"-"</code> ，即使有要处理的数据文件。此行为是不正确的，不应在您的程序中依赖它。</p>
<h3><a name="FOOT39" href="#DOCF39">（39）</a></h3>
<p>更不用说困难的实施问题了。</p>
</div>
<hr>
<div class="header">
<p>下一篇： <a href="ARGC-and-ARGV.html#ARGC-and-ARGV" rel="next" accesskey="n">ARGC和ARGV</a> ，上一篇： <a href="User_002dmodified.html#User_002dmodified" rel="prev" accesskey="p">用户修改</a> ，上一篇： <a href="Built_002din-Variables.html#Built_002din-Variables" rel="up" accesskey="u">内置变量</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>