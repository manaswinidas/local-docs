<html ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>方括号表达式（《 GNU Awk用户指南》）</title>

<meta name="description" content="Bracket Expressions (The GNU Awk User’s Guide)">
<meta name="keywords" content="Bracket Expressions (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Regexp.html#Regexp" rel="up" title="Regexp">
<link href="Leftmost-Longest.html#Leftmost-Longest" rel="next" title="Leftmost Longest">
<link href="Interval-Expressions.html#Interval-Expressions" rel="prev" title="Interval Expressions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


</head>

<body lang="zh-Hans" >
<a name="Bracket-Expressions"></a>
<div class="header">
<p>下一个： <a href="Leftmost-Longest.html#Leftmost-Longest" rel="next" accesskey="n">最左最长</a> ，上一个： <a href="Regexp-Operators.html#Regexp-Operators" rel="prev" accesskey="p">Regexp运算符</a> ，上： <a href="Regexp.html#Regexp" rel="up" accesskey="u">Regexp</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Using-Bracket-Expressions"></a>
<h3 class="section">3.4使用括号表达式</h3>
<a name="index-bracket-expressions-1"></a>
<a name="index-bracket-expressions_002c-range-expressions"></a>
<a name="index-range-expressions-_0028regexps_0029"></a>
<a name="index-character-lists-in-regular-expressions"></a>

<p>如前所述，方括号表达式匹配在方括号和方括号之间列出的任何字符。
</p>
<p>在方括号表达式中， <em>范围表达式</em>由用连字符分隔的两个字符组成。它根据系统的本机字符集匹配在两个字符之间排序的任何单个字符。例如， ' <samp>[0-9]</samp> '等价于' <samp>[0123456789]</samp> '。（请参阅<a href="Ranges-and-Locales.html#Ranges-and-Locales">Regexp范围和语言环境：漫长的悲惨故事</a> ，以获取有关POSIX标准和<code>gawk</code>随着时间的流逝而改变。这主要具有历史意义。）
</p>
<p>随着<a href="http://www.unicode.org">Unicode字符标准</a>的日益普及，还需要考虑其他问题。方括号表达式内的八进制和十六进制转义序列仅代表单字节字符（其值在0-256范围内的字符）。要匹配范围端点大于256的字符范围，请直接输入字符的多字节编码。
</p>
<a name="index-_005c-_0028backslash_0029_002c-in-bracket-expressions"></a>
<a name="index-backslash-_0028_005c_0029_002c-in-bracket-expressions"></a>
<a name="index-_005e-_0028caret_0029_002c-in-bracket-expressions"></a>
<a name="index-caret-_0028_005e_0029_002c-in-bracket-expressions"></a>
<a name="index-_002d-_0028hyphen_0029_002c-in-bracket-expressions"></a>
<a name="index-hyphen-_0028_002d_0029_002c-in-bracket-expressions"></a>
<p>包含以下字符之一： <samp>\</samp> '，' <samp>]</samp> '，' <samp>-</samp> '， 要么 ' <samp>^</samp>在方括号表达式中， <samp>\</samp>在它前面。例如：</p>
<div class="example">
<pre class="example">[d\]]
</pre></div>

<p>匹配“ <samp>d</samp> ' 要么 ' <samp>]</samp> '。此外，如果您放置“ <samp>]</samp> “开幕后马上” <samp>[</samp> '，右方括号被视为要匹配的字符之一。
</p>
<a name="index-POSIX-awk_002c-bracket-expressions-and"></a>
<a name="index-Extended-Regular-Expressions-_0028EREs_0029"></a>
<a name="index-EREs-_0028Extended-Regular-Expressions_0029"></a>
<a name="index-egrep-utility"></a>
<p>'的治疗<samp>\</samp>括号表达式中的'与其他表达式兼容<code>awk</code> POSIX强制实施。中的正则表达式<code>awk</code>是扩展正则表达式（ERE）的POSIX规范的超集。POSIX ERE基于传统语言所接受的正则表达式<code>egrep</code>效用。
</p>
<a name="index-bracket-expressions_002c-character-classes"></a>
<a name="index-POSIX-awk_002c-bracket-expressions-and_002c-character-classes"></a>
<p><em>字符类</em>是POSIX标准中引入的功能。字符类是一种特殊的符号，用于描述具有特定属性的字符列表，但是实际的字符会因国家/地区和/或字符集而异。例如，在美国和法国之间，什么是字母字符的概念有所不同。
</p>
<p>字符类是仅在括号表达式的括号<em>内</em>的正则表达式有效。字符类包括“ <samp>[:</samp> '，表示类别的关键字，以及' <samp>:]</samp> '。
<a href="#table_002dchar_002dclasses">表3.1</a>列出了POSIX标准定义的字符类。
</p>
<div class="float"><a name="table_002dchar_002dclasses"></a>

<table>
<thead><tr><th width="15%">类</th><th width="85%">含义</th></tr></thead>
<tbody><tr><td width="15%"><code>[:alnum:]</code></td><td width="85%">字母数字字符</td></tr>
<tr><td width="15%"><code>[:alpha:]</code></td><td width="85%">字母字符</td></tr>
<tr><td width="15%"><code>[:blank:]</code></td><td width="85%">空格和TAB字符</td></tr>
<tr><td width="15%"><code>[:cntrl:]</code></td><td width="85%">控制字符</td></tr>
<tr><td width="15%"><code>[:digit:]</code></td><td width="85%">数字字符</td></tr>
<tr><td width="15%"><code>[:graph:]</code></td><td width="85%">可打印和可见的字符（空格可打印但不可见，而' <samp>a</samp> ' 既是）</td></tr>
<tr><td width="15%"><code>[:lower:]</code></td><td width="85%">小写字母字符</td></tr>
<tr><td width="15%"><code>[:print:]</code></td><td width="85%">可打印字符（不是控制字符的字符）</td></tr>
<tr><td width="15%"><code>[:punct:]</code></td><td width="85%">标点符号（不是字母，数字，控制字符或空格字符的字符）</td></tr>
<tr><td width="15%"><code>[:space:]</code></td><td width="85%">空格字符（这些是：空格，TAB，换行符，回车符，换页符和垂直制表符）</td></tr>
<tr><td width="15%"><code>[:upper:]</code></td><td width="85%">大写字母字符</td></tr>
<tr><td width="15%"><code>[:xdigit:]</code></td><td width="85%">十六进制数字字符</td></tr>
</tbody></table>
<div class="float-caption"><p><strong>表3.1：</strong> POSIX字符类</p></div></div>
<p>例如，在POSIX标准之前，您必须编写<code>/[A-Za-z0-9]/</code>匹配字母数字字符。如果您的字符集中有其他字母字符，则这将与它们不匹配。使用POSIX字符类，您可以编写<code>/[[:alnum:]]/</code>以匹配字符集中的字母和数字字符。
</p>

<p>一些与正则表达式匹配的实用程序提供了非标准的' <samp>[:ascii:]</samp> '角色类别； <code>awk</code>才不是。但是，您可以使用' <samp>[\x00-\x7F]</samp> '。这将在数字上匹配介于0和127之间的所有值，这是ASCII字符集的定义范围。使用补充字符列表（' <samp>[^\x00-\x7F]</samp> '）以匹配不在ASCII范围内的任何单字节字符。
</p>
<blockquote>
<p><b>注意：</b>某些较旧的Unix版本<code>awk</code>对待<code>[:blank:]</code>喜欢<code>[:space:]</code> ，错误地匹配了比应有的字符更多的字符。买者自负。
</p></blockquote>

<a name="index-bracket-expressions_002c-collating-elements"></a>
<a name="index-bracket-expressions_002c-non_002dASCII"></a>
<a name="index-collating-elements"></a>
<p>方括号表达式中可以出现两个附加的特殊序列。这些适用于非ASCII字符集，该字符集可以具有单个符号（称为<em>整理元素</em> ），并用多个字符表示。它们还可以具有几个等效于<em>排序</em>或排序目的的字符。（例如，在法语中，普通的“ e”和带有重音符号的“è”是等效的。）这些顺序是：</p>
<dl compact>
<dd><a name="index-bracket-expressions_002c-collating-symbols"></a>
<a name="index-collating-symbols"></a>
</dd>
<dt>校对符号</dt>
<dd><p>包含在'之间的多字符整理元素<samp>[.</samp> '和' <samp>.]</samp> '。例如，如果“ <samp>ch</samp> '是整理元素，然后' <samp>[[.ch.]]</samp> '是与该整理元素匹配的正则表达式，而' <samp>[ch]</samp> '是与以下任一匹配的正则表达式<samp>c</samp> ' 要么 ' <samp>h</samp> '。
</p>
<a name="index-bracket-expressions_002c-equivalence-classes"></a>
</dd>
<dt>等价类</dt>
<dd><p>等于字符的列表的特定于语言环境的名称。名称包含在“ <samp>[=</samp> '和' <samp>=]</samp> '。例如，名称“ <samp>e</samp> '可以用来表示所有“ e”，“ê”，“è”和“é”。在这种情况下， ' <samp>[[=e=]]</samp> '是与' <samp>e</samp> '，' <samp>ê</samp> '，' <samp>é</samp> '， 要么 ' <samp>è</samp> '。
</p></dd>
</dl>

<p>这些功能在非英语语言环境中非常有价值。
</p>
<a name="index-internationalization_002c-localization_002c-character-classes"></a>
<a name="index-gawk_002c-character-classes-and"></a>
<a name="index-POSIX-awk_002c-bracket-expressions-and_002c-character-classes-1"></a>
<blockquote>
<p><b>注意：</b>该库的功能是<code>gawk</code>用于正则表达式匹配的功能当前仅识别POSIX字符类；它们不识别归类符号或等效类。
</p></blockquote>

<p>在方括号表达式中，左方括号（' <samp>[</samp> '）不会直接启动字符类，整理元素或等效类。' <samp>.</samp> '和' <samp>*</samp> '。
</p>
<hr>
<div class="header">
<p>下一个： <a href="Leftmost-Longest.html#Leftmost-Longest" rel="next" accesskey="n">最左最长</a> ，上一个： <a href="Regexp-Operators.html#Regexp-Operators" rel="prev" accesskey="p">Regexp运算符</a> ，上： <a href="Regexp.html#Regexp" rel="up" accesskey="u">Regexp</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>