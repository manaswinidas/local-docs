<html ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>表达式模式（《 GNU Awk用户指南》）</title>

<meta name="description" content="Expression Patterns (The GNU Awk User’s Guide)">
<meta name="keywords" content="Expression Patterns (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Pattern-Overview.html#Pattern-Overview" rel="up" title="Pattern Overview">
<link href="Ranges.html#Ranges" rel="next" title="Ranges">
<link href="Regexp-Patterns.html#Regexp-Patterns" rel="prev" title="Regexp Patterns">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


</head>

<body lang="zh-Hans" >
<a name="Expression-Patterns"></a>
<div class="header">
<p>下一个： <a href="Ranges.html#Ranges" rel="next" accesskey="n">范围</a> ，上一个：正则<a href="Regexp-Patterns.html#Regexp-Patterns" rel="prev" accesskey="p">表达式模式</a> ，上一个： <a href="Pattern-Overview.html#Pattern-Overview" rel="up" accesskey="u">模式概述</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Expressions-as-Patterns"></a>
<h4 class="subsection">7.1.2表达式作为模式</h4>
<a name="index-expressions_002c-as-patterns"></a>
<a name="index-patterns_002c-expressions-as"></a>

<p>任何<code>awk</code>表达式作为有效<code>awk</code>图案。如果表达式的值是非零（如果是数字）或非空（如果是字符串），则该模式匹配。每次针对新输入记录测试规则时，都会重新评估该表达式。如果表达式使用诸如<code>$1</code> ，该值直接取决于新输入记录的文本；否则，它仅取决于到目前为止执行过程中发生了什么<code>awk</code>程序。
</p>
<a name="index-comparison-expressions_002c-as-patterns"></a>
<a name="index-patterns_002c-comparison-expressions-as"></a>
<p>使用<a href="Typing-and-Comparison.html#Typing-and-Comparison">变量键入和比较表达式中</a>描述的比较运算符的<a href="Typing-and-Comparison.html#Typing-and-Comparison">比较表达式</a>是一种非常常见的模式。正则表达式匹配和不匹配也是非常常见的表达式。'的左操作数<samp>~</samp> '和' <samp>!~</samp> '运算符是一个字符串。右操作数可以是用正斜杠（ <code>/<var>regexp</var>/</code> ），或将字符串值用作动态正则表达式的任何表达式（请参见<a href="Computed-Regexps.html#Computed-Regexps">使用动态Regexps</a>一节）。以下示例打印每个输入记录的第二个字段，它们的第一个字段正好是' <samp>li</samp> '：</p>
<a name="index-_002f-_0028forward-slash_0029_002c-patterns-and"></a>
<a name="index-forward-slash-_0028_002f_0029_002c-patterns-and"></a>
<a name="index-_007e-_0028tilde_0029_002c-_007e-operator-7"></a>
<a name="index-tilde-_0028_007e_0029_002c-_007e-operator-7"></a>
<a name="index-_0021-_0028exclamation-point_0029_002c-_0021_007e-operator-7"></a>
<a name="index-exclamation-point-_0028_0021_0029_002c-_0021_007e-operator-7"></a>
<div class="example">
<pre class="example">$ <kbd>awk '$1 == &quot;li&quot; { print $2 }' mail-list</kbd>
</pre></div>

<p>（没有输出，因为没有人的名字叫' <samp>li</samp> '。）将其与以下正则表达式匹配进行比较，该匹配将接受包含“ <samp>li</samp> '：</p>
<div class="example">
<pre class="example">$ <kbd>awk '$1 ~ /li/ { print $2 }' mail-list</kbd>
-| 555-5553
-| 555-6699
</pre></div>

<a name="index-regexp-constants_002c-as-patterns"></a>
<a name="index-patterns_002c-regexp-constants-as"></a>
<p>作为模式的正则表达式常量也是表达式模式的特例。表达方式<code>/li/</code>如果' <samp>li</samp> '出现在当前输入记录中。因此，作为一种模式<code>/li/</code>匹配包含“ <samp>li</samp> '。
</p>
<a name="index-Boolean-expressions_002c-as-patterns"></a>
<a name="index-patterns_002c-Boolean-expressions-as"></a>
<p>布尔表达式通常也用作模式。模式是否与输入记录匹配取决于其子表达式是否匹配。例如，以下命令将打印所有记录<samp>mail-list</samp>同时包含“ <samp>edu</samp> '和' <samp>li</samp> '：</p>
<div class="example">
<pre class="example">$ <kbd>awk '/edu/ &amp;&amp; /li/' mail-list</kbd>
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
</pre></div>

<p>以下命令将打印所有记录<samp>mail-list</samp> <em>所有</em>包含“ <samp>edu</samp> ' 要么 ' <samp>li</samp> '（或两者，当然）：</p>
<div class="example">
<pre class="example">$ <kbd>awk '/edu/ || /li/' mail-list</kbd>
-| Amelia       555-5553     amelia.zodiacusque@gmail.com    F
-| Broderick    555-0542     broderick.aliquotiens@yahoo.com R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
-| Julie        555-6699     julie.perscrutabor@skeeve.com   F
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<p>以下命令将打印所有记录<samp>mail-list</samp> <em>不</em>包含字符串“ <samp>li</samp> '：</p>
<div class="example">
<pre class="example">$ <kbd>awk '! /li/' mail-list</kbd>
-| Anthony      555-3412     anthony.asserturo@hotmail.com   A
-| Becky        555-7685     becky.algebrarum@gmail.com      A
-| Bill         555-1675     bill.drowning@hotmail.com       A
-| Camilla      555-2912     camilla.infusarum@skynet.be     R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
</pre><pre class="example">-| Martin       555-6480     martin.codicibus@hotmail.com    A
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<a name="index-BEGIN-pattern_002c-Boolean-patterns-and"></a>
<a name="index-END-pattern_002c-Boolean-patterns-and"></a>
<a name="index-BEGINFILE-pattern_002c-Boolean-patterns-and"></a>
<a name="index-ENDFILE-pattern_002c-Boolean-patterns-and"></a>
<p>模式中布尔运算符的子表达式可以是常数正则表达式，比较或任何其他形式<code>awk</code>表达式。范围模式不是表达式，因此它们不能出现在布尔模式内。同样，特殊模式<code>BEGIN</code> ， <code>END</code> ， <code>BEGINFILE</code>和<code>ENDFILE</code> ，从不与任何输入记录匹配，它们不是表达式，也不能出现在布尔模式内。
</p>
<p>可以在模式中出现的不同运算<a href="Precedence.html#Precedence">符的优先级</a>在<a href="Precedence.html#Precedence">运算符优先级（运算符如何嵌套）中进行了描述</a> 。
</p>
<hr>
<div class="header">
<p>下一个： <a href="Ranges.html#Ranges" rel="next" accesskey="n">范围</a> ，上一个：正则<a href="Regexp-Patterns.html#Regexp-Patterns" rel="prev" accesskey="p">表达式模式</a> ，上一个： <a href="Pattern-Overview.html#Pattern-Overview" rel="up" accesskey="u">模式概述</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>