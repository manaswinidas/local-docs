<html ><!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2019 

Free Software Foundation, Inc.



This is Edition 5.0 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.0.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>I / O和BEGIN / END（《 GNU Awk用户指南》）</title>

<meta name="description" content="I/O And BEGIN/END (The GNU Awk User’s Guide)">
<meta name="keywords" content="I/O And BEGIN/END (The GNU Awk User’s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="BEGIN_002fEND.html#BEGIN_002fEND" rel="up" title="BEGIN/END">
<link href="BEGINFILE_002fENDFILE.html#BEGINFILE_002fENDFILE" rel="next" title="BEGINFILE/ENDFILE">
<link href="Using-BEGIN_002fEND.html#Using-BEGIN_002fEND" rel="prev" title="Using BEGIN/END">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="manual.css">


</head>

<body lang="zh-Hans" >
<a name="I_002fO-And-BEGIN_002fEND"></a>
<div class="header">
<p>上<a href="Using-BEGIN_002fEND.html#Using-BEGIN_002fEND" rel="prev" accesskey="p">一篇</a> ： <a href="Using-BEGIN_002fEND.html#Using-BEGIN_002fEND" rel="prev" accesskey="p">使用BEGIN / END</a> ，上<a href="BEGIN_002fEND.html#BEGIN_002fEND" rel="up" accesskey="u">一篇</a> ： <a href="BEGIN_002fEND.html#BEGIN_002fEND" rel="up" accesskey="u">BEGIN / END</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<hr>
<a name="Input_002fOutput-from-BEGIN-and-END-Rules"></a>
<h4 class="subsubsection">7.1.4.2输入/输出<code>BEGIN</code>和<code>END</code>规则</h4>

<a name="index-input_002foutput_002c-from-BEGIN-and-END"></a>
<p>从一个I / O进行I / O时要注意几个点（有时很细微） <code>BEGIN</code>要么<code>END</code>规则。首先与价值有关<code>$0</code>在一个<code>BEGIN</code>规则。因为<code>BEGIN</code>规则在读取任何输入之前执行，根本没有输入记录，因此在执行时没有字段<code>BEGIN</code>规则。参考<code>$0</code>并且这些字段会产生一个空字符串或零，具体取决于上下文。一种给予的方式<code>$0</code>真正的价值是执行<code>getline</code>不带变量的命令（请参阅“带<a href="Getline.html#Getline">显式输入” <code>getline</code></a> ）。另一种方法是简单地为<code>$0</code> 。
</p>
<a name="index-Brian-Kernighan_0027s-awk-6"></a>
<a name="index-differences-in-awk-and-gawk_002c-BEGIN_002fEND-patterns"></a>
<a name="index-POSIX-awk_002c-BEGIN_002fEND-patterns"></a>
<a name="index-print-statement_002c-BEGIN_002fEND-patterns-and"></a>
<a name="index-BEGIN-pattern_002c-print-statement-and"></a>
<a name="index-END-pattern_002c-print-statement-and"></a>
<p>第二点与第一点相似，但从另一个方向来看。传统上，由于实施问题， <code>$0</code>和<code>NF</code>在内部<em>未定义</em> <code>END</code>规则。POSIX标准规定<code>NF</code>可用于<code>END</code>规则。它包含来自最后一个输入记录的字段数。该标准很可能是由于疏忽，并未说明<code>$0</code>也保留了，尽管从逻辑上说应该如此。实际上，所有BWK <code>awk</code> ， <code>mawk</code>和<code>gawk</code>保留价值<code>$0</code>用于<code>END</code>规则。但是请注意，其他一些实现和Unix的许多旧版本<code>awk</code>不要。
</p>
<p>第三点来自前两个。的含义 ' <samp>print</samp>在里面<code>BEGIN</code>要么<code>END</code>规则一如既往： <samp>print $0</samp> '。如果<code>$0</code>为空字符串，则打印空记录。很多久了<code>awk</code>程序员使用未经修饰的' <samp>print</samp>在<code>BEGIN</code>和<code>END</code>规则，意思是“ <samp>print ""
<!-- /@w --></samp> '， 依靠<code>$0</code>为空。尽管通常可以在<code>BEGIN</code>规则，这是一个非常糟糕的主意<code>END</code>规则，至少在<code>gawk</code> 。这也是较差的样式，因为如果输出中需要空行，则程序应显式打印一行。
</p>
<a name="index-next-statement_002c-BEGIN_002fEND-patterns-and"></a>
<a name="index-nextfile-statement_002c-BEGIN_002fEND-patterns-and"></a>
<a name="index-BEGIN-pattern_002c-next_002fnextfile-statements-and"></a>
<a name="index-END-pattern_002c-next_002fnextfile-statements-and"></a>
<p>最后， <code>next</code>和<code>nextfile</code>语句中不允许<code>BEGIN</code>规则，因为针对规则的隐式读取记录和匹配循环尚未开始。同样，这些语句在<code>END</code>规则，因为已读取所有输入。（见部分<a href="Next-Statement.html#Next-Statement">的<code>next</code>声明</a>并见<a href="Nextfile-Statement.html#Nextfile-Statement">的<code>nextfile</code>声明</a> 。）
</p>
<hr>
<div class="header">
<p>上<a href="Using-BEGIN_002fEND.html#Using-BEGIN_002fEND" rel="prev" accesskey="p">一篇</a> ： <a href="Using-BEGIN_002fEND.html#Using-BEGIN_002fEND" rel="prev" accesskey="p">使用BEGIN / END</a> ，上<a href="BEGIN_002fEND.html#BEGIN_002fEND" rel="up" accesskey="u">一篇</a> ： <a href="BEGIN_002fEND.html#BEGIN_002fEND" rel="up" accesskey="u">BEGIN / END</a> [ <a href="index.html#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="Index.html#Index" title="指数" rel="index">索引</a> ]</p>
</div>





</body></html>