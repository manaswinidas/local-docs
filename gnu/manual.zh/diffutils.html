<html ><head></head><body lang="zh-Hans" >﻿<!-- This manual is for GNU Diffutils
(version 3.6, 6 May 2017),
and documents the GNU diff, diff3,
sdiff, and cmp commands for showing the
differences between files and the GNU patch command for
using their output to update files.

Copyright (C) 1992-1994, 1998, 2001-2002, 2004, 2006, 2009-2017 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled
"GNU Free Documentation License." --><!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<title>比较和合并文件</title>

<meta name="description" content="Comparing and Merging Files">
<meta name="keywords" content="Comparing and Merging Files">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="Top">
<link href="#Index" rel="index" title="Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="/manual" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">





<h1 class="settitle" align="center">比较和合并文件</h1>




<a name="SEC_Overview"></a>
<h2 class="shortcontents-heading">简短目录</h2>

<div class="shortcontents">
<ul class="no-bullet">
<li><a name="stoc-Overview-1" href="#toc-Overview-1">总览</a></li>
<li><a name="stoc-What-Comparison-Means" href="#toc-What-Comparison-Means">1比较意味着什么</a></li>
<li><a name="stoc-diff-Output-Formats" href="#toc-diff-Output-Formats">2 <code>diff</code>输出格式</a></li>
<li><a name="stoc-Incomplete-Lines-1" href="#toc-Incomplete-Lines-1">3行不完整</a></li>
<li><a name="stoc-Comparing-Directories-1" href="#toc-Comparing-Directories-1">4个比较目录</a></li>
<li><a name="stoc-Making-diff-Output-Prettier" href="#toc-Making-diff-Output-Prettier">5制作<code>diff</code>输出更漂亮</a></li>
<li><a name="stoc-diff-Performance-Tradeoffs" href="#toc-diff-Performance-Tradeoffs">6 <code>diff</code>性能折衷</a></li>
<li><a name="stoc-Comparing-Three-Files-1" href="#toc-Comparing-Three-Files-1">7比较三个文件</a></li>
<li><a name="stoc-Merging-From-a-Common-Ancestor" href="#toc-Merging-From-a-Common-Ancestor">8从共同祖先合并</a></li>
<li><a name="stoc-Interactive-Merging-with-sdiff" href="#toc-Interactive-Merging-with-sdiff">9互动合并<code>sdiff</code></a></li>
<li><a name="stoc-Merging-with-patch-1" href="#toc-Merging-with-patch-1">10与合并<code>patch</code></a></li>
<li><a name="stoc-Tips-for-Making-and-Using-Patches" href="#toc-Tips-for-Making-and-Using-Patches">制作和使用补丁的11个技巧</a></li>
<li><a name="stoc-Invoking-cmp-1" href="#toc-Invoking-cmp-1">12调用<code>cmp</code></a></li>
<li><a name="stoc-Invoking-diff-1" href="#toc-Invoking-diff-1">13调用<code>diff</code></a></li>
<li><a name="stoc-Invoking-diff3-1" href="#toc-Invoking-diff3-1">14调用<code>diff3</code></a></li>
<li><a name="stoc-Invoking-patch-1" href="#toc-Invoking-patch-1">15调用<code>patch</code></a></li>
<li><a name="stoc-Invoking-sdiff-1" href="#toc-Invoking-sdiff-1">16调用<code>sdiff</code></a></li>
<li><a name="stoc-Standards-conformance-1" href="#toc-Standards-conformance-1">17符合标准</a></li>
<li><a name="stoc-Future-Projects" href="#toc-Future-Projects">18个未来项目</a></li>
<li><a name="stoc-Copying-This-Manual-1" href="#toc-Copying-This-Manual-1">附录A复制本手册</a></li>
<li><a name="stoc-Translations-of-This-Manual" href="#toc-Translations-of-This-Manual">附录B本手册的翻译</a></li>
<li><a name="stoc-Index-1" href="#toc-Index-1">附录C索引</a></li>
</ul>
</div>

<a name="SEC_Contents"></a>
<h2 class="contents-heading">目录</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Overview-1" href="#Overview">总览</a></li>
  <li><a name="toc-What-Comparison-Means" href="#Comparison">1比较意味着什么</a>
  <ul class="no-bullet">
    <li><a name="toc-Hunks-1" href="#Hunks">1.1大块头</a></li>
    <li><a name="toc-Suppressing-Differences-in-Blank-and-Tab-Spacing" href="#White-Space">1.2抑制空白和制表符间距的差异</a></li>
    <li><a name="toc-Suppressing-Differences-Whose-Lines-Are-All-Blank" href="#Blank-Lines">1.3压制所有行均为空白的差异</a></li>
    <li><a name="toc-Suppressing-Differences-Whose-Lines-All-Match-a-Regular-Expression" href="#Specified-Lines">1.4抑制所有行均匹配正则表达式的差异</a></li>
    <li><a name="toc-Suppressing-Case-Differences" href="#Case-Folding">1.5压抑大小写差异</a></li>
    <li><a name="toc-Summarizing-Which-Files-Differ" href="#Brief">1.6总结哪些文件不同</a></li>
    <li><a name="toc-Binary-Files-and-Forcing-Text-Comparisons" href="#Binary">1.7二进制文件和强制文本比较</a></li>
  </ul></li>
  <li><a name="toc-diff-Output-Formats" href="#Output-Formats">2 <code>diff</code>输出格式</a>
  <ul class="no-bullet">
    <li><a name="toc-Two-Sample-Input-Files" href="#Sample-diff-Input">2.1两个样本输入文件</a></li>
    <li><a name="toc-Showing-Differences-in-Their-Context" href="#Context">2.2在上下文中显示差异</a>
    <ul class="no-bullet">
      <li><a name="toc-Context-Format-1" href="#Context-Format">2.2.1上下文格式</a>
      <ul class="no-bullet">
        <li><a name="toc-An-Example-of-Context-Format" href="#Example-Context">2.2.1.1上下文格式的示例</a></li>
        <li><a name="toc-An-Example-of-Context-Format-with-Less-Context" href="#Less-Context">2.2.1.2上下文较少的上下文格式示例</a></li>
        <li><a name="toc-Detailed-Description-of-Context-Format" href="#Detailed-Context">2.2.1.3上下文格式的详细描述</a></li>
      </ul></li>
      <li><a name="toc-Unified-Format-1" href="#Unified-Format">2.2.2统一格式</a>
      <ul class="no-bullet">
        <li><a name="toc-An-Example-of-Unified-Format" href="#Example-Unified">2.2.2.1统一格式的示例</a></li>
        <li><a name="toc-Detailed-Description-of-Unified-Format" href="#Detailed-Unified">2.2.2.2统一格式的详细说明</a></li>
      </ul></li>
      <li><a name="toc-Showing-Which-Sections-Differences-Are-in" href="#Sections">2.2.3显示哪些部分存在差异</a>
      <ul class="no-bullet">
        <li><a name="toc-Showing-Lines-That-Match-Regular-Expressions" href="#Specified-Headings">2.2.3.1显示与正则表达式匹配的行</a></li>
        <li><a name="toc-Showing-C-Function-Headings" href="#C-Function-Headings">2.2.3.2显示C函数标题</a></li>
      </ul></li>
      <li><a name="toc-Showing-Alternate-File-Names" href="#Alternate-Names">2.2.4显示备用文件名</a></li>
    </ul></li>
    <li><a name="toc-Showing-Differences-Side-by-Side" href="#Side-by-Side">2.3并排显示差异</a>
    <ul class="no-bullet">
      <li><a name="toc-Controlling-Side-by-Side-Format" href="#Side-by-Side-Format">2.3.1并排控制格式</a></li>
      <li><a name="toc-An-Example-of-Side-by-Side-Format" href="#Example-Side-by-Side">2.3.2并排格式的示例</a></li>
    </ul></li>
    <li><a name="toc-Showing-Differences-Without-Context" href="#Normal">2.4在没有上下文的情况下显示差异</a>
    <ul class="no-bullet">
      <li><a name="toc-An-Example-of-Normal-Format" href="#Example-Normal">2.4.1普通格式的示例</a></li>
      <li><a name="toc-Detailed-Description-of-Normal-Format" href="#Detailed-Normal">2.4.2普通格式的详细说明</a></li>
    </ul></li>
    <li><a name="toc-Making-Edit-Scripts" href="#Scripts">2.5制作编辑脚本</a>
    <ul class="no-bullet">
      <li><a name="toc-ed-Scripts-1" href="#ed-Scripts">2.5.1 <code>ed</code>剧本</a>
      <ul class="no-bullet">
        <li><a name="toc-Example-ed-Script" href="#Example-ed">2.5.1.1示例<code>ed</code>脚本</a></li>
        <li><a name="toc-Detailed-Description-of-ed-Format" href="#Detailed-ed">2.5.1.2详细说明<code>ed</code>格式</a></li>
      </ul></li>
      <li><a name="toc-Forward-ed-Scripts" href="#Forward-ed">2.5.2转发<code>ed</code>剧本</a></li>
      <li><a name="toc-RCS-Scripts" href="#RCS">2.5.3 RCS脚本</a></li>
    </ul></li>
    <li><a name="toc-Merging-Files-with-If_002dthen_002delse" href="#If_002dthen_002delse">2.6使用If-then-else合并文件</a>
    <ul class="no-bullet">
      <li><a name="toc-Line-Group-Formats-1" href="#Line-Group-Formats">2.6.1线组格式</a></li>
      <li><a name="toc-Line-Formats-1" href="#Line-Formats">2.6.2行格式</a></li>
      <li><a name="toc-An-Example-of-If_002dthen_002delse-Format" href="#Example-If_002dthen_002delse">2.6.3 If-then-else格式的示例</a></li>
      <li><a name="toc-Detailed-Description-of-If_002dthen_002delse-Format" href="#Detailed-If_002dthen_002delse">2.6.4 If-then-else格式的详细说明</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Incomplete-Lines-1" href="#Incomplete-Lines">3行不完整</a></li>
  <li><a name="toc-Comparing-Directories-1" href="#Comparing-Directories">4个比较目录</a></li>
  <li><a name="toc-Making-diff-Output-Prettier" href="#Adjusting-Output">5制作<code>diff</code>输出更漂亮</a>
  <ul class="no-bullet">
    <li><a name="toc-Preserving-Tab-Stop-Alignment" href="#Tabs">5.1保留制表符停止对齐</a></li>
    <li><a name="toc-Omitting-trailing-blanks" href="#Trailing-Blanks">5.2省略尾随空白</a></li>
    <li><a name="toc-Paginating-diff-Output" href="#Pagination">5.3分页<code>diff</code>输出量</a></li>
  </ul></li>
  <li><a name="toc-diff-Performance-Tradeoffs" href="#diff-Performance">6 <code>diff</code>性能折衷</a></li>
  <li><a name="toc-Comparing-Three-Files-1" href="#Comparing-Three-Files">7比较三个文件</a>
  <ul class="no-bullet">
    <li><a name="toc-A-Third-Sample-Input-File" href="#Sample-diff3-Input">7.1第三个样本输入文件</a></li>
    <li><a name="toc-An-Example-of-diff3-Normal-Format" href="#Example-diff3-Normal">7.2一个例子<code>diff3</code>普通格式</a></li>
    <li><a name="toc-Detailed-Description-of-diff3-Normal-Format" href="#Detailed-diff3-Normal">7.3详细说明<code>diff3</code>普通格式</a></li>
    <li><a name="toc-diff3-Hunks-1" href="#diff3-Hunks">7.4 <code>diff3</code>大块头</a></li>
  </ul></li>
  <li><a name="toc-Merging-From-a-Common-Ancestor" href="#diff3-Merging">8从共同祖先合并</a>
  <ul class="no-bullet">
    <li><a name="toc-Selecting-Which-Changes-to-Incorporate" href="#Which-Changes">8.1选择要合并的更改</a></li>
    <li><a name="toc-Marking-Conflicts-1" href="#Marking-Conflicts">8.2标记冲突</a></li>
    <li><a name="toc-Generating-the-Merged-Output-Directly" href="#Bypassing-ed">8.3直接生成合并的输出</a></li>
    <li><a name="toc-How-diff3-Merges-Incomplete-Lines" href="#Merging-Incomplete-Lines">8.4如何<code>diff3</code>合并不完整的行</a></li>
    <li><a name="toc-Saving-the-Changed-File-1" href="#Saving-the-Changed-File">8.5保存更改的文件</a></li>
  </ul></li>
  <li><a name="toc-Interactive-Merging-with-sdiff" href="#Interactive-Merging">9互动合并<code>sdiff</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Specifying-diff-Options-to-sdiff" href="#sdiff-Option-Summary">9.1指定<code>diff</code>的选项<code>sdiff</code></a></li>
    <li><a name="toc-Merge-Commands-1" href="#Merge-Commands">9.2合并命令</a></li>
  </ul></li>
  <li><a name="toc-Merging-with-patch-1" href="#Merging-with-patch">10与合并<code>patch</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Selecting-the-patch-Input-Format" href="#patch-Input">10.1选择<code>patch</code>输入格式</a></li>
    <li><a name="toc-Revision-Control-1" href="#Revision-Control">10.2版本控制</a></li>
    <li><a name="toc-Applying-Imperfect-Patches" href="#Imperfect">10.3应用不完善的补丁</a>
    <ul class="no-bullet">
      <li><a name="toc-Applying-Patches-with-Changed-White-Space" href="#Changed-White-Space">10.3.1应用具有更改的空白的补丁</a></li>
      <li><a name="toc-Applying-Reversed-Patches" href="#Reversed-Patches">10.3.2应用反向补丁</a></li>
      <li><a name="toc-Helping-patch-Find-Inexact-Matches" href="#Inexact">10.3.3帮助<code>patch</code>查找不完全匹配</a></li>
      <li><a name="toc-Predicting-what-patch-will-do" href="#Dry-Runs">10.3.4预测什么<code>patch</code>会做</a></li>
    </ul></li>
    <li><a name="toc-Creating-and-Removing-Files" href="#Creating-and-Removing">10.4创建和删除文件</a></li>
    <li><a name="toc-Updating-Timestamps-on-Patched-Files" href="#Patching-Timestamps">10.5更新修补文件上的时间戳</a></li>
    <li><a name="toc-Multiple-Patches-in-a-File" href="#Multiple-Patches">10.6文件中有多个补丁</a></li>
    <li><a name="toc-Applying-Patches-in-Other-Directories" href="#patch-Directories">10.7在其他目录中应用修补程序</a></li>
    <li><a name="toc-Backup-Files" href="#Backups">10.8备份文件</a></li>
    <li><a name="toc-Backup-File-Names" href="#Backup-Names">10.9备份文件名</a></li>
    <li><a name="toc-Reject-File-Names" href="#Reject-Names">10.10拒绝文件名</a></li>
    <li><a name="toc-Messages-and-Questions-from-patch" href="#patch-Messages">10.11来自以下人员的消息和问题<code>patch</code></a>
    <ul class="no-bullet">
      <li><a name="toc-Controlling-the-Verbosity-of-patch" href="#More-or-Fewer-Messages">10.11.1控制...的详细程度<code>patch</code></a></li>
      <li><a name="toc-Inhibiting-Keyboard-Input" href="#patch-and-Keyboard-Input">10.11.2禁止键盘输入</a></li>
      <li><a name="toc-patch-Quoting-Style-1" href="#patch-Quoting-Style">10.11.3 <code>patch</code>报价方式</a></li>
    </ul></li>
    <li><a name="toc-patch-and-the-POSIX-Standard" href="#patch-and-POSIX">10.12 <code>patch</code>和POSIX标准</a></li>
    <li><a name="toc-GNU-patch-and-Traditional-patch" href="#patch-and-Tradition">10.13 GNU <code>patch</code>和传统<code>patch</code></a></li>
  </ul></li>
  <li><a name="toc-Tips-for-Making-and-Using-Patches" href="#Making-Patches">制作和使用补丁的11个技巧</a>
  <ul class="no-bullet">
    <li><a name="toc-Tips-for-Patch-Producers-1" href="#Tips-for-Patch-Producers">11.1贴片生产者提示</a></li>
    <li><a name="toc-Tips-for-Patch-Consumers-1" href="#Tips-for-Patch-Consumers">11.2贴片消费者提示</a></li>
    <li><a name="toc-Avoiding-Common-Mistakes-1" href="#Avoiding-Common-Mistakes">11.3避免常见错误</a></li>
    <li><a name="toc-Generating-Smaller-Patches-1" href="#Generating-Smaller-Patches">11.4生成较小的补丁</a></li>
  </ul></li>
  <li><a name="toc-Invoking-cmp-1" href="#Invoking-cmp">12调用<code>cmp</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Options-to-cmp" href="#cmp-Options">12.1的选项<code>cmp</code></a></li>
  </ul></li>
  <li><a name="toc-Invoking-diff-1" href="#Invoking-diff">13调用<code>diff</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Options-to-diff" href="#diff-Options">13.1的选项<code>diff</code></a></li>
  </ul></li>
  <li><a name="toc-Invoking-diff3-1" href="#Invoking-diff3">14调用<code>diff3</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Options-to-diff3" href="#diff3-Options">14.1的选项<code>diff3</code></a></li>
  </ul></li>
  <li><a name="toc-Invoking-patch-1" href="#Invoking-patch">15调用<code>patch</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Options-to-patch" href="#patch-Options">15.1的选项<code>patch</code></a></li>
  </ul></li>
  <li><a name="toc-Invoking-sdiff-1" href="#Invoking-sdiff">16调用<code>sdiff</code></a>
  <ul class="no-bullet">
    <li><a name="toc-Options-to-sdiff" href="#sdiff-Options">16.1的选项<code>sdiff</code></a></li>
  </ul></li>
  <li><a name="toc-Standards-conformance-1" href="#Standards-conformance">17符合标准</a></li>
  <li><a name="toc-Future-Projects" href="#Projects">18个未来项目</a>
  <ul class="no-bullet">
    <li><a name="toc-Suggested-Projects-for-Improving-GNU-diff-and-patch" href="#Shortcomings">18.1改进GNU的建议项目<code>diff</code>和<code>patch</code></a>
    <ul class="no-bullet">
      <li><a name="toc-Handling-Multibyte-and-Varying_002dWidth-Characters" href="#Internationalization">18.1.1处理多字节字符和可变宽度字符</a></li>
      <li><a name="toc-Handling-Changes-to-the-Directory-Structure" href="#Changing-Structure">18.1.2处理对目录结构的更改</a></li>
      <li><a name="toc-Files-that-are-Neither-Directories-Nor-Regular-Files" href="#Special-Files">18.1.3既不是目录也不是常规文件的文件</a></li>
      <li><a name="toc-File-Names-that-Contain-Unusual-Characters" href="#Unusual-File-Names">18.1.4包含异常字符的文件名</a></li>
      <li><a name="toc-Outputting-Diffs-in-Timestamp-Order" href="#Timestamp-Order">18.1.5按时间戳顺序输出差异</a></li>
      <li><a name="toc-Ignoring-Certain-Changes" href="#Ignoring-Changes">18.1.6忽略某些更改</a></li>
      <li><a name="toc-Improving-Performance" href="#Speedups">18.1.7提高性能</a></li>
    </ul></li>
    <li><a name="toc-Reporting-Bugs" href="#Bugs">18.2报告错误</a></li>
  </ul></li>
  <li><a name="toc-Copying-This-Manual-1" href="#Copying-This-Manual">附录A复制本手册</a></li>
  <li><a name="toc-Translations-of-This-Manual" href="#Translations">附录B本手册的翻译</a></li>
  <li><a name="toc-Index-1" href="#Index">附录C索引</a></li>
</ul>
</div>


<a name="Top"></a>
<div class="header">
<p>下一页： <a href="#Overview" rel="next" accesskey="n">概述</a> ，上一步： <a href="/manual" rel="up" accesskey="u">（dir）</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Comparing-and-Merging-Files"></a>
<h1 class="top">比较和合并文件</h1>

<p>本手册适用于GNU Diffutils（版本3.6,2017年5月6日），并记录了GNU <code>diff</code> ， <code>diff3</code> ， <code>sdiff</code>和<code>cmp</code>用于显示文件和GNU之间差异的命令<code>patch</code>使用其输出更新文件的命令。
</p>
<p>版权所有©1992-1994、1998、2001-2002、2004、2006、2009-2017自由软件基金会，Inc.</p>
<blockquote>
<p>根据GNU自由文档许可版本1.3或自由软件基金会发布的任何更高版本，授予复制，分发和/或修改本文档的权限；没有不变的部分，没有前封面文字，也没有后封面文字。许可证的副本包含在标题为“ GNU自由文档许可证”的部分中。
</p></blockquote>


<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Overview" accesskey="1">概述</a> ：</td><td>  </td><td align="left" valign="top">初步信息。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Comparison" accesskey="2">比较</a> ：</td><td>  </td><td align="left" valign="top">文件比较意味着什么。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Output-Formats" accesskey="3">输出格式</a> ：</td><td>  </td><td align="left" valign="top">双向差异报告的格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Incomplete-Lines" accesskey="4">不完整的行</a> ：</td><td>  </td><td align="left" valign="top">缺少尾随换行符的行。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Comparing-Directories" accesskey="5">比较目录</a> ：</td><td>  </td><td align="left" valign="top">比较文件和目录。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Adjusting-Output" accesskey="6">调整输出</a> ：</td><td>  </td><td align="left" valign="top">制造<code>diff</code>输出更漂亮。
</td></tr>
<tr><td align="left" valign="top">• <a href="#diff-Performance" accesskey="7">差异性能</a> ：</td><td>  </td><td align="left" valign="top">制造<code>diff</code>更快或更聪明。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Comparing-Three-Files" accesskey="8">比较三个文件</a> ：</td><td>  </td><td align="left" valign="top">三向差异报告的格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#diff3-Merging" accesskey="9">diff3合并</a> ：</td><td>  </td><td align="left" valign="top">从一个共同的祖先合并。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Interactive-Merging">交互式合并</a> ：</td><td>  </td><td align="left" valign="top">与之互动合并<code>sdiff</code> 。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Merging-with-patch">与补丁合并</a> ：</td><td>  </td><td align="left" valign="top">使用<code>patch</code>将旧文件更改为新文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Making-Patches">制作补丁</a> ：</td><td>  </td><td align="left" valign="top">制作和使用补丁分发的提示。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Invoking-cmp">调用cmp</a> ：</td><td>  </td><td align="left" valign="top">逐字节比较两个文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Invoking-diff">调用差异</a> ：</td><td>  </td><td align="left" valign="top">逐行比较两个文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Invoking-diff3">调用diff3</a> ：</td><td>  </td><td align="left" valign="top">逐行比较三个文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Invoking-patch">调用补丁</a> ：</td><td>  </td><td align="left" valign="top">将差异文件应用于原始文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Invoking-sdiff">调用差异</a> ：</td><td>  </td><td align="left" valign="top">文件差异的并排合并。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Standards-conformance">标准符合性</a> ：</td><td>  </td><td align="left" valign="top">符合POSIX标准。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Projects">项目</a> ：</td><td>  </td><td align="left" valign="top">如果您发现错误或其他缺点。
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">• <a href="#Copying-This-Manual">复制本手册</a> ：</td><td>  </td><td align="left" valign="top">如何制作本手册的副本。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Translations">翻译</a> ：</td><td>  </td><td align="left" valign="top">本手册的可用翻译。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Index">索引</a> ：</td><td>  </td><td align="left" valign="top">指数。
</td></tr>
</tbody></table>

<hr>
<a name="Overview"></a>
<div class="header">
<p>下一个： <a href="#Comparison" rel="next" accesskey="n">比较</a> ，上一个： <a href="#Top" rel="prev" accesskey="p">顶部</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Overview-1"></a>
<h2 class="unnumbered">总览</h2>
<a name="index-overview-of-diff-and-patch"></a>

<p>计算机用户经常会发现机会询问两个文件之间的差异。也许一个文件是另一个文件的较新版本。或者，也许这两个文件最初是相同的副本，但是被不同的人更改了。
</p>
<p>您可以使用<code>diff</code>命令以显示两个文件或两个目录中每个对应文件之间的差异。<code>diff</code>以多种格式中的任何一种逐行输出文件之间的差异，可通过命令行选项选择。这组差异通常称为<em>diff</em>或<em>patch</em> 。对于相同的文件， <code>diff</code>通常不产生任何输出；对于二进制（非文本）文件， <code>diff</code>通常只报告它们不同。
</p>
<p>您可以使用<code>cmp</code>命令以显示两个文件不同的字节和行号。 <code>cmp</code>也可以并排显示两个文件之间所有不同的字节。一种按字符比较两个文件的方法是Emacs命令<kbd>M-x compare-windows</kbd> 。有关该命令的更多信息，请参见<cite>《 GNU Emacs手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Other-Window">其他窗口</a> <cite>”</cite> 。
</p>
<p>您可以使用<code>diff3</code>命令以显示三个文件之间的差异。当两个人对共同的原件进行独立更改后， <code>diff3</code>可以报告原始版本和两个更改版本之间的差异，并可以生成一个合并的文件，其中包含两个人的更改以及有关冲突的警告。
</p>
<p>您可以使用<code>sdiff</code>命令以交互方式合并两个文件。
</p>
<p>您可以使用由<code>diff</code>将文本文件（例如程序源代码）的更新分发给其他人。当与完整文件相比差异较小时，此方法特别有用。给定<code>diff</code>输出，您可以使用<code>patch</code>程序来更新或<em>修补</em>文件的副本。如果你想到<code>diff</code>从另一个文件中减去一个文件以产生差异，您可以想到<code>patch</code>将差异添加到一个文件以重现另一个文件。
</p>
<p>本手册首先专注于制作差异文件，然后介绍如何使用差异文件来更新文件。
</p>
<p>GNU <code>diff</code>由Paul Eggert，Mike Haertel，David Hayes，Richard Stallman和Len Tower撰写。Wayne Davison设计并实现了统一的输出格式。基本算法由Eugene W. Myers在“ O（ND）差分算法及其变体”， <cite>Algorithica</cite> Vol。1，2中描述。 1986年1月1日，第251-266页， <a href="http://dx.doi.org/10.1007/BF01840446">http</a> ：//dx.doi.org/10.1007/BF01840446；在“文件比较程序”中，韦伯·米勒（Webb Miller）和尤金·迈尔斯（Eugene W. Myers），《 <cite>软件—实践和经验》</cite>第1卷。 1985年15月，第1025至1040页， <a href="http://dx.doi.org/10.1002/spe.4380151102">http：</a> //dx.doi.org/10.1002/spe.4380151102。该算法是根据Esko Ukkonen在“ <cite>信息和控制</cite>卷”的“近似字符串匹配算法”中的描述独立发现的。 64，1985，第100-118页， <a href="http://dx.doi.org/10.1016/S0019-9958(85)80046-2">http：</a> //dx.doi.org/10.1016/S0019-9958（85）80046-2。除非<samp>--minimal</samp>使用选项<code>diff</code>使用保罗·艾格特（Paul Eggert）的启发式方法，该方法将成本限制为<em>O（N ^ 1.5 log N）</em> ，但要为具有很多差异的大型投入物产生次优输出，就要付出代价。Alfred V. Aho在“ <cite>理论计算机科学手册</cite> ”（Jan Van Leeuwen编辑），第1卷，“在字符串中查找模式的算法”的第6.3节中调查了相关算法。 A， <cite>算法和复杂性</cite> ，Elsevier / MIT出版社，1990年，第255-300页。
</p>
<p>GNU <code>diff3</code>由兰迪·史密斯（Randy Smith）撰写。GNU <code>sdiff</code>由托马斯·洛德（Thomas Lord）撰写。GNU <code>cmp</code>由TorbjörnGranlund和David MacKenzie撰写。
</p>
<p>GNU <code>patch</code>主要由Larry Wall和Paul Eggert撰写。 Wayne Davison和David MacKenzie贡献了一些GNU增强功能。经拉里·沃尔（Larry Wall）许可，本手册的某些部分改编自手册页。
</p>
<hr>
<a name="Comparison"></a>
<div class="header">
<p>下一页： <a href="#Output-Formats" rel="next" accesskey="n">输出格式</a> ，上一篇： <a href="#Overview" rel="prev" accesskey="p">概述</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="What-Comparison-Means"></a>
<h2 class="chapter">1比较意味着什么</h2>
<a name="index-introduction"></a>

<p>有两种方法可以考虑两个文件之间的差异。考虑差异的一种方法是将一系列行从一个文件中删除，插入或更改为另一个文件。 <code>diff</code>逐行比较两个文件，查找不同的行组，并报告每组不同的行。它可以用几种格式报告不同的行，这些格式有不同的用途。
</p>
<p>GNU <code>diff</code>可以在不详细说明差异的情况下显示文件是否不同。它还提供了抑制某些对您不重要的差异的方法。最常见的是，此类差异是单词或行之间的空白量变化。 <code>diff</code>还提供了抑制字母大小写差异或与您提供的正则表达式匹配的行中差异的方法。这些选择会累积起来。例如，您可以忽略空格和字母大小写的变化。
</p>
<p>考虑两个文件之间差异的另一种方法是将字节对序列指定为相同或不同。 <code>cmp</code>逐字节报告两个文件之间的差异，而不是逐行报告。结果，它通常比<code>diff</code>用于比较二进制文件。对于文本文件， <code>cmp</code>主要在您只想知道两个文件是否相同，或者一个文件是否是另一个文件的前缀时有用。
</p>
<p>为了说明考虑逐字节更改与逐行更改相比所产生的效果，请考虑将单个换行符添加到文件开头时会发生什么。如果将该文件与其他开头没有换行符的相同文件进行比较， <code>diff</code>将报告空白行已添加到文件，而<code>cmp</code>将报告两个文件的几乎每个字节都不同。
</p>
<p><code>diff3</code>通常，逐行比较三个输入文件，查找不同的行组，并报告每组不同的行。其输出旨在简化检查同一文件的两组不同更改的过程。
</p>
<p>这些命令比较输入文件，而不必读取它们。例如，如果<code>diff</code>只需报告两个文件是否不同，然后发现文件大小不同，就无需读取它们即可完成工作。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Hunks" accesskey="1">大块头</a> ：</td><td>  </td><td align="left" valign="top">不同行的组。
</td></tr>
<tr><td align="left" valign="top">• <a href="#White-Space" accesskey="2">空白</a> ：</td><td>  </td><td align="left" valign="top">抑制空白的差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Blank-Lines" accesskey="3">空行</a> ：</td><td>  </td><td align="left" valign="top">禁止所有行均为空白的差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Specified-Lines" accesskey="4">指定行</a> ：</td><td>  </td><td align="left" valign="top">抑制所有线条都与图案匹配的差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Case-Folding" accesskey="5">折叠箱</a> ：</td><td>  </td><td align="left" valign="top">抑制字母大小写的差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Brief" accesskey="6">简介</a> ：</td><td>  </td><td align="left" valign="top">总结哪些文件不同。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Binary" accesskey="7">二进制</a> ：</td><td>  </td><td align="left" valign="top">比较二进制文件或强制进行文本比较。
</td></tr>
</tbody></table>

<hr>
<a name="Hunks"></a>
<div class="header">
<p>下一篇： <a href="#White-Space" rel="next" accesskey="n">空白</a> ，上一篇： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Hunks-1"></a>
<h3 class="section">1.1大块头</h3>
<a name="index-hunks"></a>

<p>比较两个文件时， <code>diff</code>查找两个文件共有的行序列，并散布着称为<em>hunks</em>的不同行组。比较两个相同的文件将产生一个公共行序列，并且没有大块，因为没有行不同。比较两个完全不同的文件不会产生共同的线条，而一个大块包含两个文件的所有线条。通常，有很多方法可以匹配两个给定文件之间的行。 <code>diff</code>试图通过找到大的公共行序列和散布在不同行的小块之间来最小化总块大小。
</p>
<p>例如，假设文件<samp>F</samp>包含三行<samp>a</samp> '，' <samp>b</samp> '，' <samp>c</samp>和文件<samp>G</samp>以相反的顺序包含相同的三行<samp>c</samp> '，' <samp>b</samp> '，' <samp>a</samp> '。如果<code>diff</code>找到行<samp>c</samp> '作为普通命令，然后是' <samp>diff F G</samp> '产生以下输出：</p>
<div class="example">
<pre class="example">1,2d0
&lt; a
&lt; b
3a2,3
&gt; b
&gt; a
</pre></div>

<p>但是如果<code>diff</code>注意公共行“ <samp>b</samp> '，它将产生以下输出：</p>
<div class="example">
<pre class="example">1c1
&lt; a
---
&gt; c
3c3
&lt; c
---
&gt; a
</pre></div>

<p>也可以找到“ <samp>a</samp> ”作为通用行。<code>diff</code>并不总是在文件之间找到最佳匹配；它需要快捷方式才能更快地运行。但是它的输出通常接近最短的输出。您可以使用<samp>--minimal</samp> （ <samp>-d</samp> ）选项（请参阅<a href="#diff-Performance">diff性能</a> ）。
</p>
<hr>
<a name="White-Space"></a>
<div class="header">
<p>下一个： <a href="#Blank-Lines" rel="next" accesskey="n">空白行</a> ，上一个： <a href="#Hunks" rel="prev" accesskey="p">大块</a> ，上： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Suppressing-Differences-in-Blank-and-Tab-Spacing"></a>
<h3 class="section">1.2抑制空白和制表符间距的差异</h3>
<a name="index-blank-and-tab-difference-suppression"></a>
<a name="index-tab-and-blank-difference-suppression"></a>

<p>的<samp>--ignore-tab-expansion</samp> （ <samp>-E</samp> ）选项会忽略制表符和输入空格之间的区别。一个制表符被认为等于下一个制表符停止符的空格数（请参见<a href="#Tabs">Tabs</a> ）。
</p>
<p>的<samp>--ignore-trailing-space</samp> （ <samp>-Z</samp> ）选项会忽略行尾的空白。
</p>
<p>的<samp>--ignore-space-change</samp> （ <samp>-b</samp> ）选项比<samp>-E</samp>和<samp>-Z</samp>结合。它忽略行尾的空白，并认为一行中一个或多个空白字符的所有其他序列是等效的。有了这个选项， <code>diff</code>认为以下两行是等效的，其中“ <samp>$</samp> '表示行尾：</p>
<div class="example">
<pre class="example">Here lyeth  muche rychnesse  in lytell space.   -- John Heywood$
Here lyeth muche rychnesse in lytell space. -- John Heywood   $
</pre></div>

<p>的<samp>--ignore-all-space</samp> （ <samp>-w</samp> ）选项仍然更强。即使一行中有空白而另一行中没有空白，它也会忽略差异。<em>空格</em>字符包括制表符，垂直制表符，换页符，回车符和空格；一些语言环境可能会将其他字符定义为空格。有了这个选项， <code>diff</code>认为以下两行是等效的，其中“ <samp>$</samp> '表示行尾，' <samp>^M</samp> '表示回车：</p>
<div class="example">
<pre class="example">Here lyeth  muche  rychnesse in lytell space.--  John Heywood$
  He relyeth much erychnes  seinly tells pace.  --John Heywood   ^M$
</pre></div>

<p>对于许多其他程序，换行符也是空格字符，但是<code>diff</code>是面向行的程序，换行符始终以一行结尾。因此<samp>-w</samp>要么<samp>--ignore-all-space</samp>选项不会忽略与换行相关的更改；它仅忽略其他空白更改。
</p>
<hr>
<a name="Blank-Lines"></a>
<div class="header">
<p>下一页： <a href="#Specified-Lines" rel="next" accesskey="n">指定的行</a> ，上一页： <a href="#White-Space" rel="prev" accesskey="p">空白</a> ，向上： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Suppressing-Differences-Whose-Lines-Are-All-Blank"></a>
<h3 class="section">1.3压制所有行均为空白的差异</h3>
<a name="index-blank-line-difference-suppression"></a>

<p>的<samp>--ignore-blank-lines</samp> （ <samp>-B</samp> ）选项将忽略完全由空白行组成的更改。例如，使用此选项，包含</p><div class="example">
<pre class="example">1.  A point is that which has no part.

2.  A line is breadthless length.
-- Euclid, The Elements, I
</pre></div>
<p>被认为与包含以下内容的文件相同</p><div class="example">
<pre class="example">1.  A point is that which has no part.
2.  A line is breadthless length.


-- Euclid, The Elements, I
</pre></div>

<p>通常，此选项仅影响完全为空的行，但是如果您还指定了忽略尾随空格的选项，则行看起来为空但包含空白时也会受到影响。换一种说法， <samp>-B</samp>等价于' <samp>-I '^$'</samp> '默认情况下，但等同于<samp>-I '^[[:space:]]*$'</samp>如果<samp>-b</samp> ， <samp>-w</samp>要么<samp>-Z</samp>也被指定。
</p>
<hr>
<a name="Specified-Lines"></a>
<div class="header">
<p>下一篇： <a href="#Case-Folding" rel="next" accesskey="n">折页</a> ，上一篇： <a href="#Blank-Lines" rel="prev" accesskey="p">空行</a> ，上一篇： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Suppressing-Differences-Whose-Lines-All-Match-a-Regular-Expression"></a>
<h3 class="section">1.4抑制所有行均匹配正则表达式的差异</h3>
<a name="index-regular-expression-suppression"></a>

<p>忽略与a匹配的行的插入和删除<code>grep</code>样式的正则表达式，请使用<samp>--ignore-matching-lines=<var>regexp</var></samp> （ <samp>-I <var>regexp</var></samp> ） 选项。您应该转义包含shell元字符的正则表达式，以防止shell扩展它们。例如， ' <samp>diff -I '^[[:digit:]]'</samp> '会忽略以数字开头的行的所有更改。
</p>
<p>然而， <samp>-I</samp>仅当大块中每条更改的行（每次插入和每次删除）都匹配正则表达式时，才忽略包含正则表达式的行的插入或删除。换句话说，对于每一个不可忽视的变化， <code>diff</code>在其附近打印完整的更改集，包括可忽略的更改。
</p>
<p>您可以通过使用多个正则表达式来指定要忽略的行<samp>-I</samp>选项。 <code>diff</code>尝试将每个行与每个正则表达式进行匹配。
</p>
<hr>
<a name="Case-Folding"></a>
<div class="header">
<p>下一个： <a href="#Brief" rel="next" accesskey="n">简介</a> ，上一个： <a href="#Specified-Lines" rel="prev" accesskey="p">指定行</a> ，上一个： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Suppressing-Case-Differences"></a>
<h3 class="section">1.5压抑大小写差异</h3>
<a name="index-case-difference-suppression"></a>

<p>GNU <code>diff</code>可以将小写字母等同于大写字母，因此，例如， <samp>Funky Stuff</samp> '，' <samp>funky STUFF</samp> '和' <samp>fUNKy stuFf</samp>都一样。要请求此信息，请使用<samp>-i</samp>要么<samp>--ignore-case</samp>选项。
</p>
<hr>
<a name="Brief"></a>
<div class="header">
<p>下一篇： <a href="#Binary" rel="next" accesskey="n">二进制</a> ，上一篇： <a href="#Case-Folding" rel="prev" accesskey="p">案例折叠</a> ，上一篇： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Summarizing-Which-Files-Differ"></a>
<h3 class="section">1.6总结哪些文件不同</h3>
<a name="index-summarizing-which-files-differ"></a>
<a name="index-brief-difference-reports"></a>

<p>当您只想查找文件是否不同，而又不在乎差异时，可以使用摘要输出格式。以这种格式，除了显示文件之间的差异外， <code>diff</code>仅报告文件是否不同。的<samp>--brief</samp> （ <samp>-q</samp> ）选项选择此输出格式。
</p>
<p>比较两个目录的内容时，此格式特别有用。它也比进行逐行比较正常的速度快得多，因为<code>diff</code>只要知道有任何差异，就可以停止分析文件。
</p>
<p>您还可以通过使用以下命令简要了解两个文件是否不同<code>cmp</code> 。对于相同的文件， <code>cmp</code>不产生任何输出。当文件不同时，默认情况下， <code>cmp</code>输出出现第一个差异的字节和行号，或报告一个文件是另一个文件的前缀。您可以使用<samp>-s</samp> ， <samp>--quiet</samp> ， 要么<samp>--silent</samp>选择禁止显示该信息，以便<code>cmp</code>不产生任何输出，仅使用退出状态报告文件是否有所不同（请参阅<a href="#Invoking-cmp">调用cmp</a> ）。
</p>
<p>不像<code>diff</code> ， <code>cmp</code>无法比较目录；它只能比较两个文件。
</p>
<hr>
<a name="Binary"></a>
<div class="header">
<p>上一篇： <a href="#Brief" rel="prev" accesskey="p">简介</a> ，上一篇： <a href="#Comparison" rel="up" accesskey="u">比较</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Binary-Files-and-Forcing-Text-Comparisons"></a>
<h3 class="section">1.7二进制文件和强制文本比较</h3>
<a name="index-binary-file-diff"></a>
<a name="index-text-versus-binary-diff"></a>

<p>如果<code>diff</code>认为正在比较的两个文件中的任何一个都是二进制文件（非文本文件），它通常对待这对文件就像选择了摘要输出格式一样（请参见<a href="#Brief">Brief</a> ），并且仅报告二进制文件是不同。这是因为逐行比较通常对二进制文件没有意义。即使结果输出未捕获所有差异，这也不算麻烦。
</p>
<p><code>diff</code>通过检查文件中的前几个字节来确定文件是文本文件还是二进制文件；确切的字节数取决于系统，但通常为数千。如果文件那部分中的每个字节都不为空， <code>diff</code>认为文件是文本；否则，它将文件视为二进制文件。
</p>
<p>有时你可能想强迫<code>diff</code>将文件视为文本。例如，您可能正在比较包含空字符的文本文件。 <code>diff</code>会错误地认为这些文件是非文本文件。或者，您可能正在比较使用字处理系统使用的格式的文档，该字处理系统使用空字符表示特殊格式。你可以强迫<code>diff</code>将所有文件视为文本文件，并通过使用<samp>--text</samp> （ <samp>-a</samp> ） 选项。如果使用此选项比较的文件实际上不包含文本，则它们可能将包含少量换行符，并且<code>diff</code>输出将由大块组成，这些大块显示文件包含的任何字符的长行之间的差异。
</p>
<p>你也可以强迫<code>diff</code>仅报告文件是否不同（但不报告）。使用<samp>--brief</samp> （ <samp>-q</samp> ）选项。
</p>
<p>在区分文本文件和二进制文件的操作系统中， <code>diff</code>通常以文本形式读取和写入所有数据。使用<samp>--binary</samp>强制选择<code>diff</code>而是读取和写入二进制数据。此选项对POSIX兼容系统（如GNU或传统Unix）无效。但是，许多个人计算机操作系统用回车符和换行符来表示行的结尾。在这样的系统上<code>diff</code>通常忽略输入的这些回车符，并在每条输出行的末尾生成它们，但是使用<samp>--binary</samp>选项<code>diff</code>将每个回车符视为另一个输入字符，而不在每个输出行的末尾生成一个回车符。当处理要与POSIX兼容系统互换的非文本文件时，这很有用。
</p>
<p>的<samp>--strip-trailing-cr</samp>原因<code>diff</code>将以回车符结尾并后接换行符的输入行视为以纯换行符结尾的输入行。当比较从许多个人计算机操作系统中导入的文本不完善时，这很有用。此选项影响行的读取方式，进而影响行的比较和输出方式。
</p>
<p>如果要逐字节比较两个文件，可以使用<code>cmp</code>用<samp>--verbose</samp> （ <samp>-l</samp> ）选项以显示两个文件中每个不同字节的值。使用GNU <code>cmp</code> ，您也可以使用<samp>-b</samp>要么<samp>--print-bytes</samp>选项以显示这些字节的ASCII表示形式。有关更多信息，请参见<a href="#Invoking-cmp">调用cmp</a> 。
</p>
<p>如果<code>diff3</code>认为正在比较的任何文件都是二进制文件（非文本文件），通常会报告错误，因为此类比较通常没有用。 <code>diff3</code>使用与<code>diff</code>决定文件是否为二进制。与<code>diff</code> ，如果输入文件包含一些非文本字节，但其他类似于文本文件，则可以强制<code>diff3</code>将所有文件视为文本文件，并使用<samp>-a</samp>要么<samp>--text</samp>选项。
</p>
<hr>
<a name="Output-Formats"></a>
<div class="header">
<p>下一个： <a href="#Incomplete-Lines" rel="next" accesskey="n">不完整的行</a> ，上一个： <a href="#Comparison" rel="prev" accesskey="p">比较</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="diff-Output-Formats"></a>
<h2 class="chapter">2 <code>diff</code>输出格式</h2>
<a name="index-output-formats"></a>
<a name="index-format-of-diff-output"></a>

<p><code>diff</code>有几种互斥的输出格式选项。以下各节介绍每种格式，说明如何<code>diff</code>报告两个样本输入文件之间的差异。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Sample-diff-Input" accesskey="1">样本差异输入</a> ：</td><td>  </td><td align="left" valign="top">样品<code>diff</code>输入文件的例子。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Context" accesskey="2">上下文</a> ：</td><td>  </td><td align="left" valign="top">显示与周围文本的差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Side-by-Side" accesskey="3">并排</a> ：</td><td>  </td><td align="left" valign="top">在两列中显示差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Normal" accesskey="4">正常</a> ：</td><td>  </td><td align="left" valign="top">在没有周围文字的情况下显示差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Scripts" accesskey="5">脚本</a> ：</td><td>  </td><td align="left" valign="top">生成其他程序的脚本。
</td></tr>
<tr><td align="left" valign="top">• <a href="#If_002dthen_002delse" accesskey="6">如果-则-其他</a> ：</td><td>  </td><td align="left" valign="top">使用if-then-else合并文件。
</td></tr>
</tbody></table>

<hr>
<a name="Sample-diff-Input"></a>
<div class="header">
<p>下一页： <a href="#Context" rel="next" accesskey="n">上下文</a> ，向上： <a href="#Output-Formats" rel="up" accesskey="u">输出格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Two-Sample-Input-Files"></a>
<h3 class="section">2.1两个样本输入文件</h3>
<a name="index-diff-sample-input"></a>
<a name="index-sample-input-for-diff"></a>

<p>这是两个示例文件，我们将在许多示例中使用它们来说明<code>diff</code>以及各种选项如何改变它。
</p>
<p>这是文件<samp>lao</samp> ：</p>
<div class="example">
<pre class="example">The Way that can be told of is not the eternal Way;
The name that can be named is not the eternal name.
The Nameless is the origin of Heaven and Earth;
The Named is the mother of all things.
Therefore let there always be non-being,
  so we may see their subtlety,
And let there always be being,
  so we may see their outcome.
The two are the same,
But after they are produced,
  they have different names.
</pre></div>

<p>这是文件<samp>tzu</samp> ：</p>
<div class="example">
<pre class="example">The Nameless is the origin of Heaven and Earth;
The named is the mother of all things.

Therefore let there always be non-being,
  so we may see their subtlety,
And let there always be being,
  so we may see their outcome.
The two are the same,
But after they are produced,
  they have different names.
They both may be called deep and profound.
Deeper and more profound,
The door of all subtleties!
</pre></div>

<p>在此示例中，第一个大块仅包含<samp>lao</samp> ，第二个大块包含第四行<samp>lao</samp>相对于第二和第三行<samp>tzu</samp> ，最后一个大块仅包含的最后三行<samp>tzu</samp> 。
</p>
<hr>
<a name="Context"></a>
<div class="header">
<p>下一个： <a href="#Side-by-Side" rel="next" accesskey="n">并排</a> ，上一个： <a href="#Sample-diff-Input" rel="prev" accesskey="p">样本差异输入</a> ，上： <a href="#Output-Formats" rel="up" accesskey="u">输出格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-Differences-in-Their-Context"></a>
<h3 class="section">2.2在上下文中显示差异</h3>
<a name="index-context-output-format"></a>
<a name="index-_0021-output-format"></a>

<p>通常，当您查看文件之间的差异时，您还希望在不同的行附近查看文件的各个部分，以帮助您准确了解已更改的内容。文件的这些附近部分称为<em>上下文</em> 。
</p>
<p>GNU <code>diff</code>提供两种输出格式来显示围绕不同行的<em>上下文</em> ： <em>context format</em>和<em>Unified format</em> 。它可以有选择地显示在文件的哪个功能或部分中找到不同的行。
</p>
<p>如果您要以以下形式向他人分发文件的新版本<code>diff</code>输出，您应该使用一种显示上下文的输出格式，这样即使对文件进行了很小的更改，它们也可以应用差异。 <code>patch</code>在这种情况下，可以通过在文件中搜索不同行周围的上下文行来应用差异。如果这些行实际上与差异显示的位置相距几行， <code>patch</code>可以相应地调整行号，并且仍然正确应用差异。有关使用的更多信息，请参见<a href="#Imperfect">不完美</a> <code>patch</code>应用不完美的差异。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Context-Format" accesskey="1">上下文格式</a> ：</td><td>  </td><td align="left" valign="top">显示周围线条的输出格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Unified-Format" accesskey="2">统一格式</a> ：</td><td>  </td><td align="left" valign="top">显示上下文的更紧凑的输出格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Sections" accesskey="3">部分</a> ：</td><td>  </td><td align="left" valign="top">显示文件差异所在的部分。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Alternate-Names" accesskey="4">别名</a> ：</td><td>  </td><td align="left" valign="top">在上下文标题中显示备用文件名。
</td></tr>
</tbody></table>

<hr>
<a name="Context-Format"></a>
<div class="header">
<p>下一篇： <a href="#Unified-Format" rel="next" accesskey="n">统一格式</a> ，上一篇： <a href="#Context" rel="up" accesskey="u">上下文</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Context-Format-1"></a>
<h4 class="subsection">2.2.1上下文格式</h4>

<p>上下文输出格式显示围绕不同的几行上下文。它是将更新分发到源代码的标准格式。
</p>
<p>要选择此输出格式，请使用<samp>--context<span class="roman">[</span>=<var>lines</var><span class="roman">]</span></samp> （ <samp>-C <var>lines</var></samp> ） 要么<samp>-c</samp>选项。争论<var>lines</var>这些选项中的一些是要显示的上下文行数。如果不指定<var>lines</var> ，默认为三个。为了正确操作， <code>patch</code>通常需要至少两行上下文。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Example-Context" accesskey="1">示例上下文</a> ：</td><td>  </td><td align="left" valign="top">示例输出为上下文格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Less-Context" accesskey="2">较少的上下文</a> ：</td><td>  </td><td align="left" valign="top">上下文较少的另一个示例。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Detailed-Context" accesskey="3">详细内容</a> ：</td><td>  </td><td align="left" valign="top">上下文输出格式的详细说明。
</td></tr>
</tbody></table>

<hr>
<a name="Example-Context"></a>
<div class="header">
<p>下一页： <a href="#Less-Context" rel="next" accesskey="n">较少的上下文</a> ，向上： <a href="#Context-Format" rel="up" accesskey="u">上下文格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-Context-Format"></a>
<h4 class="subsubsection">2.2.1.1上下文格式的示例</h4>

<p>这是“的输出<samp>diff -c lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）。请注意，每条不同的线周围最多显示三行相同的线。它们是上下文线。还要注意，前两个块已经一起运行，因为它们的内容重叠。
</p>
<div class="example">
<pre class="example">*** lao	2002-02-21 23:30:39.942229878 -0800
--- tzu	2002-02-21 23:30:50.442260588 -0800
***************
*** 1,7 ****
- The Way that can be told of is not the eternal Way;
- The name that can be named is not the eternal name.
  The Nameless is the origin of Heaven and Earth;
! The Named is the mother of all things.
  Therefore let there always be non-being,
    so we may see their subtlety,
  And let there always be being,
--- 1,6 ----
  The Nameless is the origin of Heaven and Earth;
! The named is the mother of all things.
! 
  Therefore let there always be non-being,
    so we may see their subtlety,
  And let there always be being,
***************
*** 9,11 ****
--- 8,13 ----
  The two are the same,
  But after they are produced,
    they have different names.
+ They both may be called deep and profound.
+ Deeper and more profound,
+ The door of all subtleties!
</pre></div>

<hr>
<a name="Less-Context"></a>
<div class="header">
<p>下一个： <a href="#Detailed-Context" rel="next" accesskey="n">详细上下文</a> ，上一个： <a href="#Example-Context" rel="prev" accesskey="p">示例上下文</a> ，上： <a href="#Context-Format" rel="up" accesskey="u">上下文格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-Context-Format-with-Less-Context"></a>
<h4 class="subsubsection">2.2.1.2上下文较少的上下文格式示例</h4>

<p>这是“的输出<samp>diff -C 1 lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）。请注意，此处最多报告了一条上下文行。
</p>
<div class="example">
<pre class="example">*** lao	2002-02-21 23:30:39.942229878 -0800
--- tzu	2002-02-21 23:30:50.442260588 -0800
***************
*** 1,5 ****
- The Way that can be told of is not the eternal Way;
- The name that can be named is not the eternal name.
  The Nameless is the origin of Heaven and Earth;
! The Named is the mother of all things.
  Therefore let there always be non-being,
--- 1,4 ----
  The Nameless is the origin of Heaven and Earth;
! The named is the mother of all things.
! 
  Therefore let there always be non-being,
***************
*** 11 ****
--- 10,13 ----
    they have different names.
+ They both may be called deep and profound.
+ Deeper and more profound,
+ The door of all subtleties!
</pre></div>

<hr>
<a name="Detailed-Context"></a>
<div class="header">
<p>上一页： <a href="#Less-Context" rel="prev" accesskey="p">较少的上下文</a> ，向上： <a href="#Context-Format" rel="up" accesskey="u">上下文格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Detailed-Description-of-Context-Format"></a>
<h4 class="subsubsection">2.2.1.3上下文格式的详细描述</h4>

<p>上下文输出格式以两行标题开头，如下所示：</p>
<div class="example">
<pre class="example">*** <var>from-file</var> <var>from-file-modification-time</var>
--- <var>to-file</var> <var>to-file-modification time</var>
</pre></div>

<p><a name="index-LC_005fTIME"></a><a name="index-timestamp-format_002c-context-diffs"></a>时间戳通常看起来像是“ <samp>2002-02-21 23:30:39.942229878 -0800</samp>以<a href="ftp://ftp.isi.edu/in-notes/rfc2822.txt">Internet RFC 2822格式</a>指示日期，小数秒的时间和时区。（在不支持小数时间戳记的主机上，小数秒被忽略。）但是，像“ <samp>Thu Feb 21 23:30:39 2002</samp>如果在<code>LC_TIME</code>区域设置类别为“ <samp>C</samp> ' 要么 ' <samp>POSIX</samp> '。
</p>
<p>您可以使用来更改标题的内容<samp>--label=<var>label</var></samp>选项;请参阅<a href="#Alternate-Names">备用名称</a> 。
</p>
<p>接下来是一个或多个差异。每个块显示一个文件不同的区域。上下文格式的块看起来像这样：</p>
<div class="example">
<pre class="example">***************
*** <var>from-file-line-numbers</var> ****
  <var>from-file-line</var>
  <var>from-file-line</var>&hellip;
--- <var>to-file-line-numbers</var> ----
  <var>to-file-line</var>
  <var>to-file-line</var>&hellip;
</pre></div>

<p>如果某块包含两行或更多行，则其行号看起来像“ <samp><var>start</var>,<var>end</var></samp> '。否则，仅显示其结束行号。空的块被认为在块之前的行结束。
</p>
<p>围绕不同线的上下文线以两个空格字符开头。两个文件之间不同的行以下列指示符之一开头，后跟空格：</p>
<dl compact>
<dt>' <samp>!</samp> '</dt>
<dd><p>作为在两个文件之间更改的一个或多个行的组的一部分的行。有相应的一组行标记为“ <samp>!</samp> '在此大块中用于其他文件。
</p>
</dd>
<dt>' <samp>+</samp> '</dt>
<dd><p>第二个文件中的“插入”行与第一个文件中的任何内容都不对应。
</p>
</dd>
<dt>' <samp>-</samp> '</dt>
<dd><p>第一个文件中的“已删除”行与第二个文件中的任何内容都不对应。
</p></dd>
</dl>

<p>如果块中的所有更改都是插入，则<var>from-file</var>被省略。如果所有更改都是删除，则以下行<var>to-file</var>被省略。
</p>
<hr>
<a name="Unified-Format"></a>
<div class="header">
<p>下一个： <a href="#Sections" rel="next" accesskey="n">节</a> ，上一个： <a href="#Context-Format" rel="prev" accesskey="p">上下文格式</a> ，上： <a href="#Context" rel="up" accesskey="u">上下文</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Unified-Format-1"></a>
<h4 class="subsection">2.2.2统一格式</h4>
<a name="index-unified-output-format"></a>
<a name="index-_002b_002d-output-format"></a>

<p>统一输出格式是上下文格式的一种变体，它更紧凑，因为它省略了多余的上下文行。要选择此输出格式，请使用<samp>--unified<span class="roman">[</span>=<var>lines</var><span class="roman">]</span></samp> （ <samp>-U <var>lines</var></samp> ）， 要么<samp>-u</samp>选项。争论<var>lines</var>是要显示的上下文行数。如果未指定，则默认为三。
</p>
<p>目前只有GNU <code>diff</code>可以产生这种格式，只有GNU <code>patch</code>可以自动以这种格式应用差异。为了正确操作， <code>patch</code>通常需要至少三行上下文。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Example-Unified" accesskey="1">统一示例</a> ：</td><td>  </td><td align="left" valign="top">样本输出采用统一格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Detailed-Unified" accesskey="2">详细的统一</a> ：</td><td>  </td><td align="left" valign="top">统一格式的详细说明。
</td></tr>
</tbody></table>

<hr>
<a name="Example-Unified"></a>
<div class="header">
<p>下一篇： <a href="#Detailed-Unified" rel="next" accesskey="n">详细的统一</a> ，上一篇： <a href="#Unified-Format" rel="up" accesskey="u">统一格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-Unified-Format"></a>
<h4 class="subsubsection">2.2.2.1统一格式的示例</h4>

<p>这是命令的输出<samp>diff -u lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）：</p>
<div class="example">
<pre class="example">--- lao	2002-02-21 23:30:39.942229878 -0800
+++ tzu	2002-02-21 23:30:50.442260588 -0800
@@ -1,7 +1,6 @@
-The Way that can be told of is not the eternal Way;
-The name that can be named is not the eternal name.
 The Nameless is the origin of Heaven and Earth;
-The Named is the mother of all things.
+The named is the mother of all things.
+
 Therefore let there always be non-being,
   so we may see their subtlety,
 And let there always be being,
@@ -9,3 +8,6 @@
 The two are the same,
 But after they are produced,
   they have different names.
+They both may be called deep and profound.
+Deeper and more profound,
+The door of all subtleties!
</pre></div>

<hr>
<a name="Detailed-Unified"></a>
<div class="header">
<p>上一页： <a href="#Example-Unified" rel="prev" accesskey="p">统一示例</a> ，上： <a href="#Unified-Format" rel="up" accesskey="u">统一格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Detailed-Description-of-Unified-Format"></a>
<h4 class="subsubsection">2.2.2.2统一格式的详细说明</h4>

<p>统一输出格式以两行标题开头，如下所示：</p>
<div class="example">
<pre class="example">--- <var>from-file</var> <var>from-file-modification-time</var>
+++ <var>to-file</var> <var>to-file-modification-time</var>
</pre></div>

<p><a name="index-timestamp-format_002c-unified-diffs"></a>时间戳看起来像是“ <samp>2002-02-21 23:30:39.942229878 -0800</samp> '表示日期，小数秒的时间和时区。在不支持小数时间戳记的主机上，小数秒被忽略。
</p>
<p>您可以使用来更改标题的内容<samp>--label=<var>label</var></samp>选项。请参阅<a href="#Alternate-Names">备用名称</a> 。
</p>
<p>接下来是一个或多个差异。每个块显示一个文件不同的区域。统一格式的块看起来像这样：</p>
<div class="example">
<pre class="example">@@ <var>from-file-line-numbers</var> <var>to-file-line-numbers</var> @@
 <var>line-from-either-file</var>
 <var>line-from-either-file</var>&hellip;
</pre></div>

<p>如果块仅包含一行，则仅显示其起始行号。否则，其行号看起来像是“ <samp><var>start</var>,<var>count</var></samp> '。空的块被认为是从块之后的行开始的。
</p>
<p>如果大块及其上下文包含两行或更多行，则其行号看起来像“ <samp><var>start</var>,<var>count</var></samp> '。否则，仅显示其结束行号。空的块被认为在块之前的行结束。
</p>
<p>这两个文件共有的行以空格字符开头。这两个文件之间实际不同的行在左侧打印列中具有以下指示符之一：</p>
<dl compact>
<dt>' <samp>+</samp> '</dt>
<dd><p>在此处向第一文件添加了一行。
</p>
</dd>
<dt>' <samp>-</samp> '</dt>
<dd><p>从第一个文件中删除了一行。
</p></dd>
</dl>

<hr>
<a name="Sections"></a>
<div class="header">
<p>下一个： <a href="#Alternate-Names" rel="next" accesskey="n">别名</a> ，上一个： <a href="#Unified-Format" rel="prev" accesskey="p">统一格式</a> ，上： <a href="#Context" rel="up" accesskey="u">上下文</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-Which-Sections-Differences-Are-in"></a>
<h4 class="subsection">2.2.3显示哪些部分存在差异</h4>
<a name="index-headings"></a>
<a name="index-section-headings"></a>

<p>有时您可能想知道每个更改属于文件的哪一部分。如果文件是源代码，则可能意味着更改了哪个功能。如果文件是文档，则可能意味着更改了哪一章或附录。GNU <code>diff</code>可以通过显示在不同行之前的最接近的标题行来显示这一点。哪些行是“节标题”由正则表达式确定。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Specified-Headings" accesskey="1">指定标题</a> ：</td><td>  </td><td align="left" valign="top">显示与正则表达式匹配的标题。
</td></tr>
<tr><td align="left" valign="top">• <a href="#C-Function-Headings" accesskey="2">C函数标题</a> ：</td><td>  </td><td align="left" valign="top">显示C函数的标题。
</td></tr>
</tbody></table>

<hr>
<a name="Specified-Headings"></a>
<div class="header">
<p>下一页： <a href="#C-Function-Headings" rel="next" accesskey="n">C函数标题</a> ，上： <a href="#Sections" rel="up" accesskey="u">部分</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-Lines-That-Match-Regular-Expressions"></a>
<h4 class="subsubsection">2.2.3.1显示与正则表达式匹配的行</h4>
<a name="index-specified-headings"></a>
<a name="index-regular-expression-matching-headings"></a>

<p>要显示不是C或类似语言的源代码的文件在哪些部分存在差异，请使用<samp>--show-function-line=<var>regexp</var></samp> （ <samp>-F <var>regexp</var></samp> ） 选项。
<code>diff</code>认为与<code>grep</code>式正则表达式<var>regexp</var>作为文件部分的开头。以下是一些常见语言的建议正则表达式：</p>
<dl compact>
<dt>' <samp>^[[:alpha:]$_]</samp> '</dt>
<dd><p>C，C ++，Prolog</p></dd>
<dt>' <samp>^(</samp> '</dt>
<dd><p>Lisp</p></dd>
<dt>' <samp>^@node</samp> '</dt>
<dd><p>Texinfo</p></dd>
</dl>

<p>此选项不会自动选择输出格式。为了使用它，您必须选择上下文格式（请参阅<a href="#Context-Format">Context Format</a> ）或统一格式（请参见<a href="#Unified-Format">Unified Format</a> ）。在其他输出格式中，它无效。
</p>
<p>的<samp>--show-function-line</samp> （ <samp>-F</samp> ）选项可找到在每个大块差异之前并与给定正则表达式匹配的最接近的不变行。然后将其以上下文格式添加到星号行的末尾，或添加到“ <samp>@@</samp> '格式统一的行。如果不存在匹配的行，则此选项将使该块的输出保持不变。如果该行的长度超过40个字符，则仅输出前40个字符。您可以为这些行指定多个正则表达式； <code>diff</code>尝试将每行与每个正则表达式匹配，从给定的最后一个开始。这意味着您可以使用<samp>-p</samp>和<samp>-F</samp>如果你愿意的话。
</p>
<hr>
<a name="C-Function-Headings"></a>
<div class="header">
<p>上一页： <a href="#Specified-Headings" rel="prev" accesskey="p">特定标题</a> ，上： <a href="#Sections" rel="up" accesskey="u">部分</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-C-Function-Headings"></a>
<h4 class="subsubsection">2.2.3.2显示C函数标题</h4>
<a name="index-C-function-headings"></a>
<a name="index-function-headings_002c-C"></a>

<p>要显示在C和类似语言中哪些功能存在差异，您可以使用<samp>--show-c-function</samp> （ <samp>-p</samp> ） 选项。此选项自动默认为上下文输出格式（请参见<a href="#Context-Format">Context Format</a> ），具有默认的上下文行数。您可以使用<samp>-C <var>lines</var></samp>命令行中的其他位置。您可以使用覆盖格式和数字<samp>-U <var>lines</var></samp>命令行中的其他位置。
</p>
<p>的<samp>--show-c-function</samp> （ <samp>-p</samp> ）选项等效于<samp>-F '^[[:alpha:]$_]'</samp>如果指定了统一格式，否则<samp>-c -F '^[[:alpha:]$_]'</samp> （请参阅“ <a href="#Specified-Headings">指定标题”</a> ）。GNU <code>diff</code>为了方便起见提供此选项。
</p>
<hr>
<a name="Alternate-Names"></a>
<div class="header">
<p>上一页： <a href="#Sections" rel="prev" accesskey="p">章节</a> ，向上： <a href="#Context" rel="up" accesskey="u">上下文</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-Alternate-File-Names"></a>
<h4 class="subsection">2.2.4显示备用文件名</h4>
<a name="index-alternate-file-names"></a>
<a name="index-file-name-alternates"></a>

<p>如果要比较两个具有无意义或无意义名称的文件，则可能需要<code>diff</code>在上下文标题和统一输出格式中显示备用名称。为此，请使用<samp>--label=<var>label</var></samp>选项。第一次使用此选项时，其参数将替换标题中第一个文件的名称和日期；第二次，其参数替换第二个文件的名称和日期。如果您多次选择此选项， <code>diff</code>报告错误。的<samp>--label</samp>选项不会影响<code>pr</code>标头时<samp>-l</samp>要么<samp>--paginate</samp>选项被使用（请参阅<a href="#Pagination">分页</a> ）。
</p>
<p>这是'的输出的前两行<samp>diff -C 2 --label=original --label=modified lao tzu</samp> '：</p>
<div class="example">
<pre class="example">*** original
--- modified
</pre></div>

<hr>
<a name="Side-by-Side"></a>
<div class="header">
<p>下一个： <a href="#Normal" rel="next" accesskey="n">普通</a> ，上一个： <a href="#Context" rel="prev" accesskey="p">上下文</a> ，上： <a href="#Output-Formats" rel="up" accesskey="u">输出格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-Differences-Side-by-Side"></a>
<h3 class="section">2.3并排显示差异</h3>
<a name="index-side-by-side"></a>
<a name="index-two_002dcolumn-output"></a>
<a name="index-columnar-output"></a>

<p><code>diff</code>可以产生两个文件的并排差异列表。文件在两列中列出，它们之间有一个装订线。装订线包含以下标记之一：</p>
<dl compact>
<dt>空白空间</dt>
<dd><p>相应的线是相同的。也就是说，要么行是相同的，要么是由于其中之一导致差异被忽略。 <samp>--ignore</samp>选项（请参见<a href="#White-Space">空白</a> ）。
</p>
</dd>
<dt>' <samp>|</samp> '</dt>
<dd><p>相应的行不同，它们要么都是完整的，要么都是不完整的。
</p>
</dd>
<dt>' <samp><</samp> '</dt>
<dd><p>文件不同，只有第一个文件包含该行。
</p>
</dd>
<dt>' <samp>></samp> '</dt>
<dd><p>文件不同，只有第二个文件包含该行。
</p>
</dd>
<dt>' <samp>(</samp> '</dt>
<dd><p>只有第一个文件包含该行，但是差异将被忽略。
</p>
</dd>
<dt>' <samp>)</samp> '</dt>
<dd><p>只有第二个文件包含该行，但是差异将被忽略。
</p>
</dd>
<dt>' <samp>\</samp> '</dt>
<dd><p>相应的行不同，只有第一行不完整。
</p>
</dd>
<dt>' <samp>/</samp> '</dt>
<dd><p>相应的行不同，只有第二行不完整。
</p></dd>
</dl>

<p>通常，只有当输出行包含的行不完整时，输出行才是不完整的。请参阅<a href="#Incomplete-Lines">不完整的行</a> 。但是，当输出线代表两条不同的线时，一条可能不完整，而另一条则不完整。在这种情况下，输出线是完整的，但其装订线标记为' <samp>\</samp>如果第一行不完整， <samp>/</samp> '如果第二行是。
</p>
<p>并排格式有时最容易阅读，但是有局限性。它产生的输出比平常要宽得多，并且会截断太长的行以使其无法容纳。另外，它比平时更依赖于对齐输出，因此，如果您使用宽度可变的字体，非标准的制表位或非打印字符，其输出看起来特别糟糕。
</p>
<p>您可以使用<code>sdiff</code>命令以交互方式并排合并差异。有关合并文件的更多信息，请参见<a href="#Interactive-Merging">交互式合并</a> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Side-by-Side-Format" accesskey="1">并排格式</a> ：</td><td>  </td><td align="left" valign="top">并排控制输出格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Example-Side-by-Side" accesskey="2">并排示例</a> ：</td><td>  </td><td align="left" valign="top">样品并排输出。
</td></tr>
</tbody></table>

<hr>
<a name="Side-by-Side-Format"></a>
<div class="header">
<p>下一页： <a href="#Example-Side-by-Side" rel="next" accesskey="n">并排示例</a> ，上<a href="#Side-by-Side" rel="up" accesskey="u">并排</a> ：[ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Controlling-Side-by-Side-Format"></a>
<h4 class="subsection">2.3.1并排控制格式</h4>
<a name="index-side-by-side-format"></a>

<p>的<samp>--side-by-side</samp> （ <samp>-y</samp> ）选项选择并排格式。由于并排输出线包含两条输入线，因此输出比平时更宽：通常可以打印130列，可以装到传统打印机线上。您可以使用以下命令设置输出的宽度<samp>--width=<var>columns</var></samp> （ <samp>-W <var>columns</var></samp> ） 选项。输出被分成相等宽度的两半，并由一个小的装订线隔开以标记差异。右半部分与制表位对齐，以便制表符对齐。太长而无法容纳输出线一半的输入线将被截断以进行输出。
</p>
<p>的<samp>--left-column</samp>选项仅打印两条公共行的左列。的<samp>--suppress-common-lines</samp> option完全抑制公共行。
</p>
<hr>
<a name="Example-Side-by-Side"></a>
<div class="header">
<p>上一页： <a href="#Side-by-Side-Format" rel="prev" accesskey="p">并排格式</a> ，上： <a href="#Side-by-Side" rel="up" accesskey="u">并排</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-Side-by-Side-Format"></a>
<h4 class="subsection">2.3.2并排格式的示例</h4>

<p>这是命令的输出<samp>diff -y -W 72 lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）。
</p>
<div class="example">
<pre class="example">The Way that can be told of is n   &lt;
The name that can be named is no   &lt;
The Nameless is the origin of He        The Nameless is the origin of He
The Named is the mother of all t   |    The named is the mother of all t
                                   &gt;
Therefore let there always be no        Therefore let there always be no
  so we may see their subtlety,           so we may see their subtlety,
And let there always be being,          And let there always be being,
  so we may see their outcome.            so we may see their outcome.
The two are the same,                   The two are the same,
But after they are produced,            But after they are produced,
  they have different names.              they have different names.
                                   &gt;    They both may be called deep and
                                   &gt;    Deeper and more profound,
                                   &gt;    The door of all subtleties!
</pre></div>

<hr>
<a name="Normal"></a>
<div class="header">
<p>下一个： <a href="#Scripts" rel="next" accesskey="n">脚本</a> ，上一个： <a href="#Side-by-Side" rel="prev" accesskey="p">并排</a> ，上： <a href="#Output-Formats" rel="up" accesskey="u">输出格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Showing-Differences-Without-Context"></a>
<h3 class="section">2.4在没有上下文的情况下显示差异</h3>
<a name="index-normal-output-format"></a>
<a name="index-_003c-output-format"></a>

<p>“正常” <code>diff</code>输出格式显示差异的每个大块而没有任何周围的上下文。有时，这样的输出是查看行如何变化的最清晰的方法，而不会造成附近不变的行的混乱（尽管您可以通过使用0行上下文获得与上下文相似的结果或统一格式）。但是，这种格式已不再广泛用于发送补丁。为此，上下文格式（请参阅<a href="#Context-Format">Context Format</a> ）和统一格式（请参见<a href="#Unified-Format">Unified Format</a> ）是更好的。正常格式是与旧版本的兼容的默认格式<code>diff</code>和POSIX标准。使用<samp>--normal</samp>选项以显式选择此输出格式。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Example-Normal" accesskey="1">正常示例</a> ：</td><td>  </td><td align="left" valign="top">以正常格式输出的样本。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Detailed-Normal" accesskey="2">详细的正常</a> ：</td><td>  </td><td align="left" valign="top">正常输出格式的详细说明。
</td></tr>
</tbody></table>

<hr>
<a name="Example-Normal"></a>
<div class="header">
<p>下一个： <a href="#Detailed-Normal" rel="next" accesskey="n">详细的正常</a> ，上一个： <a href="#Normal" rel="up" accesskey="u">正常</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-Normal-Format"></a>
<h4 class="subsection">2.4.1普通格式的示例</h4>

<p>这是命令的输出<samp>diff lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）。请注意，它仅显示两个文件之间不同的行。
</p>
<div class="example">
<pre class="example">1,2d0
&lt; The Way that can be told of is not the eternal Way;
&lt; The name that can be named is not the eternal name.
4c2,3
&lt; The Named is the mother of all things.
---
&gt; The named is the mother of all things.
&gt; 
11a11,13
&gt; They both may be called deep and profound.
&gt; Deeper and more profound,
&gt; The door of all subtleties!
</pre></div>

<hr>
<a name="Detailed-Normal"></a>
<div class="header">
<p>上一个： <a href="#Example-Normal" rel="prev" accesskey="p">正常的示例</a> ，向上： <a href="#Normal" rel="up" accesskey="u">正常的</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Detailed-Description-of-Normal-Format"></a>
<h4 class="subsection">2.4.2普通格式的详细说明</h4>

<p>普通输出格式由一个或多个大块差异组成；每个块显示一个文件不同的区域。普通格式的块看起来像这样：</p>
<div class="example">
<pre class="example"><var>change-command</var>
&lt; <var>from-file-line</var>
&lt; <var>from-file-line</var>&hellip;
---
&gt; <var>to-file-line</var>
&gt; <var>to-file-line</var>&hellip;
</pre></div>

<p>更改命令有三种类型。每个文件都由第一个文件中的行号或逗号分隔的范围，单个字符指示要进行的更改的种类以及第二个文件中的行号或逗号分隔的范围组成。所有行号都是每个文件中的原始行号。更改命令的类型为：</p>
<dl compact>
<dt>' <samp><var>l</var>a<var>r</var></samp> '</dt>
<dd><p>添加范围内的行<var>r</var>行后第二个文件的数量<var>l</var>第一个文件。例如， ' <samp>8a12,15</samp> '表示在文件1的第8行之后追加文件2的第12-15行；或者，如果将文件2更改为文件1，则删除文件2的第12-15行。
</p>
</dd>
<dt>' <samp><var>f</var>c<var>t</var></samp> '</dt>
<dd><p>替换范围内的行<var>f</var>第一个文件的行数在范围内<var>t</var>第二个文件。这就像组合的添加和删除，但更为紧凑。例如， ' <samp>5,7c8,10</samp> '表示将文件1的第5-7行更改为文件2的第8-10行；或者，如果将文件2更改为文件1，则将文件2的第8-10行更改为文件1的第5-7行。
</p>
</dd>
<dt>' <samp><var>r</var>d<var>l</var></samp> '</dt>
<dd><p>删除范围内的行<var>r</var>从第一个文件开始；线<var>l</var>如果未删除它们，它们将出现在第二个文件中。例如， ' <samp>5,7d3</samp> '表示删除文件1的第5-7行；或者，如果将文件2更改为文件1，则在文件2的第3行之后追加文件1的第5-7行。
</p></dd>
</dl>

<hr>
<a name="Scripts"></a>
<div class="header">
<p>下一篇： <a href="#If_002dthen_002delse" rel="next" accesskey="n">If-then-else</a> ，上一篇： <a href="#Normal" rel="prev" accesskey="p">普通</a> ，上一篇： <a href="#Output-Formats" rel="up" accesskey="u">输出格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Making-Edit-Scripts"></a>
<h3 class="section">2.5制作编辑脚本</h3>
<a name="index-script-output-formats"></a>

<p>几种输出模式可生成用于编辑的命令脚本<var>from-file</var>生产<var>to-file</var> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#ed-Scripts" accesskey="1">ed脚本</a> ：</td><td>  </td><td align="left" valign="top">使用<code>diff</code>产生命令<code>ed</code> 。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Forward-ed" accesskey="2">转发版</a> ：</td><td>  </td><td align="left" valign="top">前进<code>ed</code>脚本。
</td></tr>
<tr><td align="left" valign="top">• <a href="#RCS" accesskey="3">RCS</a> ：</td><td>  </td><td align="left" valign="top">一个特别的<code>diff</code> RCS使用的输出格式。</td></tr>
</tbody></table>

<hr>
<a name="ed-Scripts"></a>
<div class="header">
<p>下一页： <a href="#Forward-ed" rel="next" accesskey="n">转发</a> ，上一页： <a href="#Scripts" rel="up" accesskey="u">脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="ed-Scripts-1"></a>
<h4 class="subsection">2.5.1 <code>ed</code>剧本</h4>
<a name="index-ed-script-output-format"></a>

<p><code>diff</code>可以产生命令<code>ed</code>文本编辑器将第一个文件更改为第二个文件。很久以前，这是唯一适合自动将一个文件编辑为另一个文件的输出模式。今天，与<code>patch</code> ，这几乎已经过时了。使用<samp>--ed</samp> （ <samp>-e</samp> ）选项以选择此输出格式。
</p>
<p>像普通格式一样（请参见<a href="#Normal">Normal</a> ），此输出格式不显示任何上下文。与普通格式不同，它不包含反向应用diff所必需的信息（如果您只有第二个文件和diff，则生成第一个文件）。
</p>
<p>如果文件<samp>d</samp>包含“的输出<samp>diff -e old new</samp> '，然后是命令' <samp>(cat d && echo w) | ed - old</samp> '编辑<samp>old</samp>使其复制<samp>new</samp> 。更普遍地，如果<samp>d1</samp> ， <samp>d2</samp> ，…， <samp>dN</samp>包含“ <samp>diff -e old new1</samp> '，' <samp>diff -e new1 new2</samp> '，...，' <samp>diff -e newN-1 newN</samp> '，然后是命令' <samp>(cat d1 d2 … dN && echo w) | ed - old</samp> '编辑<samp>old</samp>使其复制<samp>newN</samp> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Example-ed" accesskey="1">示例ed</a> ：</td><td>  </td><td align="left" valign="top">一个样品<code>ed</code>脚本。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Detailed-ed" accesskey="2">详细版</a> ：</td><td>  </td><td align="left" valign="top">详细说明<code>ed</code>格式。
</td></tr>
</tbody></table>

<hr>
<a name="Example-ed"></a>
<div class="header">
<p>下一页： <a href="#Detailed-ed" rel="next" accesskey="n">详细的ed</a> ，向上： <a href="#ed-Scripts" rel="up" accesskey="u">ed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Example-ed-Script"></a>
<h4 class="subsubsection">2.5.1.1示例<code>ed</code>脚本</h4>

<p>这是“的输出<samp>diff -e lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）：</p>
<div class="example">
<pre class="example">11a
They both may be called deep and profound.
Deeper and more profound,
The door of all subtleties!
.
4c
The named is the mother of all things.

.
1,2d
</pre></div>

<hr>
<a name="Detailed-ed"></a>
<div class="header">
<p>上一页： <a href="#Example-ed" rel="prev" accesskey="p">示例ed</a> ，上： <a href="#ed-Scripts" rel="up" accesskey="u">ed脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Detailed-Description-of-ed-Format"></a>
<h4 class="subsubsection">2.5.1.2详细说明<code>ed</code>格式</h4>

<p>的<code>ed</code>输出格式由一个或多个大块差异组成。最接近文件末尾的更改是最先出现的，因此更改行数的命令不会影响<code>ed</code>在后续命令中解释行号。<code>ed</code>格式块看起来像这样：</p>
<div class="example">
<pre class="example"><var>change-command</var>
<var>to-file-line</var>
<var>to-file-line</var>&hellip;
.
</pre></div>

<p>因为<code>ed</code>在一行上使用一个句点来表示输入的结束，GNU <code>diff</code>通过写两个句点，然后写一个后续句来保护一行中包含一个句点的更改行<code>ed</code>命令将两个周期更改为一个。的<code>ed</code>格式不能代表不完整的行，因此，如果第二个文件以更改后的不完整行结尾， <code>diff</code>报告错误，然后假装添加了换行符。
</p>
<p>更改命令有三种类型。每个文件都由第一个文件中的行号或以逗号分隔的行范围以及表示更改种类的单个字符组成。所有行号都是文件中的原始行号。更改命令的类型为：</p>
<dl compact>
<dt>' <samp><var>l</var>a</samp> '</dt>
<dd><p>在第二行之后添加第二个文件中的文本<var>l</var>在第一个文件中。例如， ' <samp>8a</samp> '表示在文件1的第8行之后添加以下行。
</p>
</dd>
<dt>' <samp><var>r</var>c</samp> '</dt>
<dd><p>替换范围内的行<var>r</var>在第一个文件中并包含以下几行。类似于组合的添加和删除，但更紧凑。例如， ' <samp>5,7c</samp> '表示将文件1的第5-7行更改为文本文件2。
</p>
</dd>
<dt>' <samp><var>r</var>d</samp> '</dt>
<dd><p>删除范围内的行<var>r</var>从第一个文件开始。例如， ' <samp>5,7d</samp> '表示删除文件1的第5-7行。
</p></dd>
</dl>

<hr>
<a name="Forward-ed"></a>
<div class="header">
<p>下一篇： <a href="#RCS" rel="next" accesskey="n">RCS</a> ，上一篇： <a href="#ed-Scripts" rel="prev" accesskey="p">ed脚本</a> ，上一篇： <a href="#Scripts" rel="up" accesskey="u">脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Forward-ed-Scripts"></a>
<h4 class="subsection">2.5.2转发<code>ed</code>剧本</h4>
<a name="index-forward-ed-script-output-format"></a>

<p><code>diff</code>可以产生像<code>ed</code>脚本，但前向（前到后）顺序为大块。命令的格式也略有变化：命令字符在它们修改的行之前，在范围内用空格分隔行号，并且未尝试消除由单个句点组成的粗线的歧义。喜欢<code>ed</code>格式，向前<code>ed</code>格式不能代表不完整的行。
</p>
<p>向前<code>ed</code>格式不是很有用，因为<code>ed</code>也不<code>patch</code>可以应用这种格式的差异。它的存在主要是为了与旧版本兼容<code>diff</code> 。使用<samp>-f</samp>要么<samp>--forward-ed</samp>选项将其选中。
</p>
<hr>
<a name="RCS"></a>
<div class="header">
<p>上一篇： <a href="#Forward-ed" rel="prev" accesskey="p">转发</a> ，上一篇： <a href="#Scripts" rel="up" accesskey="u">脚本</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="RCS-Scripts"></a>
<h4 class="subsection">2.5.3 RCS脚本</h4>
<a name="index-RCS-script-output-format"></a>

<p>RCS输出格式是专门为修订控制系统设计的，修订控制系统是一组免费程序，用于组织文件的不同版本和系统。使用<samp>--rcs</samp> （ <samp>-n</samp> ）选项以选择此输出格式。就像前进<code>ed</code>格式（请参见<a href="#Forward-ed">Forward ed</a> ），但是它可以表示对文件内容的任意更改，因为它避免了前向<code>ed</code>包含单个句点的行和不完整的行的格式问题。每个命令都指定要影响的行数，而不是用由单个句点组成的行结束文本部分。 “ <samp>a</samp> '和' <samp>d</samp>使用命令代替<samp>c</samp> '。同样，如果第二个文件以更改后的不完整行结尾，则输出也以不完整行结尾。
</p>
<p>这是“的输出<samp>diff -n lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）：</p>
<div class="example">
<pre class="example">d1 2
d4 1
a4 2
The named is the mother of all things.

a11 3
They both may be called deep and profound.
Deeper and more profound,
The door of all subtleties!
</pre></div>

<hr>
<a name="If_002dthen_002delse"></a>
<div class="header">
<p>上一页： <a href="#Scripts" rel="prev" accesskey="p">脚本</a> ，向上： <a href="#Output-Formats" rel="up" accesskey="u">输出格式</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Merging-Files-with-If_002dthen_002delse"></a>
<h3 class="section">2.6使用If-then-else合并文件</h3>
<a name="index-merged-output-format"></a>
<a name="index-if_002dthen_002delse-output-format"></a>
<a name="index-C-if_002dthen_002delse-output-format"></a>
<a name="index-ifdef-output-format"></a>

<p>您可以使用<code>diff</code>合并两个C源代码文件。输出<code>diff</code>此格式包含两个文件的所有行。这两个文件共有的行仅输出一次；不同的部分由C预处理程序指令分隔<code>#ifdef <var>name</var></code>要么<code>#ifndef <var>name</var></code> ， <code>#else</code>和<code>#endif</code> 。编译输出时，通过定义或保留未定义宏来选择要使用的版本<var>name</var> 。
</p>
<p>要合并两个文件，请使用<code>diff</code>与<samp>-D <var>name</var></samp>要么<samp>--ifdef=<var>name</var></samp>选项。争论<var>name</var>是在C中使用的C预处理程序标识符<code>#ifdef</code>和<code>#ifndef</code>指令。
</p>
<p>例如，如果您更改了<code>wait (&s)</code>至<code>waitpid (-1, &s, 0)</code>然后将旧文件和新文件与<samp>--ifdef=HAVE_WAITPID</samp>选项，那么代码的受影响部分可能如下所示：</p>
<div class="example">
<pre class="example">    do {
#ifndef HAVE_WAITPID
        if ((w = wait (&amp;s)) &lt; 0  &amp;&amp;  errno != EINTR)
#else /* HAVE_WAITPID */
        if ((w = waitpid (-1, &amp;s, 0)) &lt; 0  &amp;&amp;  errno != EINTR)
#endif /* HAVE_WAITPID */
            return w;
    } while (w != child);
</pre></div>

<p>您可以使用行组格式和行格式为C以外的语言指定格式，如以下各节所述。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Line-Group-Formats" accesskey="1">线组格式</a> ：</td><td>  </td><td align="left" valign="top">常规if-then-else线组的格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Line-Formats" accesskey="2">行格式</a> ：</td><td>  </td><td align="left" valign="top">线组中每条线的格式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Example-If_002dthen_002delse" accesskey="3">If-then-else示例</a> ：</td><td>  </td><td align="left" valign="top">样本if-then-else格式输出。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Detailed-If_002dthen_002delse" accesskey="4">详细的if-then-else</a> ：</td><td>  </td><td align="left" valign="top">if-then-else格式的详细说明。
</td></tr>
</tbody></table>

<hr>
<a name="Line-Group-Formats"></a>
<div class="header">
<p>下一页： <a href="#Line-Formats" rel="next" accesskey="n">行格式</a> ，上： <a href="#If_002dthen_002delse" rel="up" accesskey="u">If-then-else</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Line-Group-Formats-1"></a>
<h4 class="subsection">2.6.1线组格式</h4>
<a name="index-line-group-formats"></a>
<a name="index-formats-for-if_002dthen_002delse-line-groups"></a>

<p>行组格式使您可以指定适用于允许if-then-else输入的许多应用程序的格式，包括编程语言和文本格式设置语言。线组格式指定相似线的连续组的输出格式。
</p>
<p>例如，以下命令比较TeX文件<samp>old</samp>和<samp>new</samp> ，并输出一个合并文件，其中旧区域被' <samp>\begin{em}</samp> '-' <samp>\end{em}</samp>线，而新区域则被' <samp>\begin{bf}</samp> '-' <samp>\end{bf}</samp> '行。
</p>
<div class="example">
<pre class="example">diff \
   --old-group-format='\begin{em}
%&lt;\end{em}
' \
   --new-group-format='\begin{bf}
%&gt;\end{bf}
' \
   old new
</pre></div>

<p>以下命令与上面的示例等效，但是它有些冗长，因为它可拼写出默认的线组格式。
</p>
<div class="example">
<pre class="example">diff \
   --old-group-format='\begin{em}
%&lt;\end{em}
' \
   --new-group-format='\begin{bf}
%&gt;\end{bf}
' \
   --unchanged-group-format='%=' \
   --changed-group-format='\begin{em}
%&lt;\end{em}
\begin{bf}
%&gt;\end{bf}
' \
   old new
</pre></div>

<p>这是一个更高级的示例，该示例输出带有列表的差异列表，该列表的标题包含“普通英语”样式的行号。
</p>
<div class="example">
<pre class="example">diff \
   --unchanged-group-format='' \
   --old-group-format='-------- %dn line%(n=1?:s) deleted at %df:
%&lt;' \
   --new-group-format='-------- %dN line%(N=1?:s) added after %de:
%&gt;' \
   --changed-group-format='-------- %dn line%(n=1?:s) changed at %df:
%&lt;-------- to:
%&gt;' \
   old new
</pre></div>

<p>要指定线组格式，请使用<code>diff</code>与下面列出的选项之一。您最多可以指定四种线组格式，每种线组都可以指定一种。你应该引用<var>format</var> ，因为它通常包含shell元字符。
</p>
<dl compact>
<dt><samp>--old-group-format=<var>format</var></samp></dt>
<dd><p>这些行组是仅包含第一个文件中的行的块。默认的旧组格式与更改后的组格式相同（如果已指定）；否则，它是一种按原样输出线组的格式。
</p>
</dd>
<dt><samp>--new-group-format=<var>format</var></samp></dt>
<dd><p>这些行组是仅包含第二个文件中的行的块。默认的新组格式与更改后的组格式相同（如果已指定）；否则，它是一种按原样输出线组的格式。
</p>
</dd>
<dt><samp>--changed-group-format=<var>format</var></samp></dt>
<dd><p>这些行组是包含两个文件中的行的块。默认更改的组格式是新旧组格式的串联。
</p>
</dd>
<dt><samp>--unchanged-group-format=<var>format</var></samp></dt>
<dd><p>这些行组包含两个文件共有的行。默认的不变组格式是按原样输出线组的格式。
</p></dd>
</dl>

<p>在行组格式中，普通字符代表他们自己；转换规范以“ <samp>%</samp>并具有以下格式之一。
</p>
<dl compact>
<dt>' <samp>%<</samp> '</dt>
<dd><p>代表第一个文件中的行，包括结尾的换行符。每行都按照旧的行格式设置格式（请参见<a href="#Line-Formats">Line Formats</a> ）。
</p>
</dd>
<dt>' <samp>%></samp> '</dt>
<dd><p>代表第二个文件中的行，包括结尾的换行符。每行都根据新的行格式进行格式化。
</p>
</dd>
<dt>' <samp>%=</samp> '</dt>
<dd><p>代表两个文件共有的行，包括结尾的换行符。每行根据未更改的行格式进行格式化。
</p>
</dd>
<dt>' <samp>%%</samp> '</dt>
<dd><p>代表 ' <samp>%</samp> '。
</p>
</dd>
<dt>' <samp>%c'<var>C</var>'</samp> '</dt>
<dd><p>哪里<var>C</var>是一个字符，代表<var>C</var> 。
<var>C</var>可能不是反斜杠或撇号。例如， ' <samp>%c':'</samp> '表示冒号，即使在if-then-else格式的then部分内，冒号通常也会终止。
</p>
</dd>
<dt>' <samp>%c'\<var>O</var>'</samp> '</dt>
<dd><p>哪里<var>O</var>是1、2或3个八进制数字的字符串，代表具有八进制代码的字符<var>O</var> 。例如， ' <samp>%c'\0'</samp> '代表一个空字符。
</p>
</dd>
<dt>' <samp><var>F</var><var>n</var></samp> '</dt>
<dd><p>哪里<var>F</var>是一个<code>printf</code>转换规范和<var>n</var>是以下字母之一，代表<var>n</var>的值格式为<var>F</var> 。
</p>
<dl compact>
<dt>' <samp>e</samp> '</dt>
<dd><p>旧文件中该组之前的行的行号。
</p>
</dd>
<dt>' <samp>f</samp> '</dt>
<dd><p>旧文件组中第一行的行号；等于<var>e</var> + 1。
</p>
</dd>
<dt>' <samp>l</samp> '</dt>
<dd><p>旧文件组中最后一行的行号。
</p>
</dd>
<dt>' <samp>m</samp> '</dt>
<dd><p>旧文件中该组之后的行的行号；等于<var>l</var> + 1。
</p>
</dd>
<dt>' <samp>n</samp> '</dt>
<dd><p>旧文件组中的行数；等于<var>l</var> -- <var>f</var> + 1。
</p>
</dd>
<dt>' <samp>E, F, L, M, N</samp> '</dt>
<dd><p>同样，对于新文件中的行。
</p>
</dd>
</dl>

<a name="index-LC_005fNUMERIC"></a>
<p>的<code>printf</code>转换规范可以是“ <samp>%d</samp> '，' <samp>%o</samp> '，' <samp>%x</samp> '， 要么 ' <samp>%X</samp> '，分别指定十进制，八进制，小写十六进制或大写十六进制输出。之后 ' <samp>%</samp>以下选项可以依次出现：一系列零个或多个标志；一个整数，指定最小字段宽度；一个句点，后跟一个可选的整数，用于指定最小位数。标志是“ <samp>-</samp> “用于左对齐” <samp>'</samp> '，用于将数字分为<code>LC_NUMERIC</code>语言环境类别和“ <samp>0</samp> '用于填充零而不是空格。例如， ' <samp>%5dN</samp> '使用，在宽度为5个字符的字段中打印组中的新行数。 <code>printf</code>格式<code>"%5d"</code> 。
</p>
</dd>
<dt>' <samp>(<var>A</var>=<var>B</var>?<var>T</var>:<var>E</var>)</samp> '</dt>
<dd><p>如果<var>A</var>等于<var>B</var>然后<var>T</var>其他<var>E</var> 。
<var>A</var>和<var>B</var>分别是一个十进制常数或一个如上所述的单个字母。此格式规范等同于<var>T</var>如果<var>A</var>的值等于<var>B</var>的;否则等于<var>E</var> 。
</p>
<p>例如， ' <samp>%(N=0?no:%dN) line%(N=1?:s)</samp> '等价于' <samp>no lines</samp> '如果<var>N</var> （新文件中该组中的行数）为0，到' <samp>1 line</samp> '如果<var>N</var>为1，并为' <samp>%dN lines</samp> ' 除此以外。
</p></dd>
</dl>

<hr>
<a name="Line-Formats"></a>
<div class="header">
<p>下一篇： <a href="#Example-If_002dthen_002delse" rel="next" accesskey="n">If-then-else示例</a> ，上一篇： <a href="#Line-Group-Formats" rel="prev" accesskey="p">行组格式</a> ，上一篇： <a href="#If_002dthen_002delse" rel="up" accesskey="u">If-then-else</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Line-Formats-1"></a>
<h4 class="subsection">2.6.2行格式</h4>
<a name="index-line-formats"></a>

<p>线格式控制以if-then-else格式输出从输入文件中提取的每一行作为线组的一部分的方式。
</p>
<p>例如，以下命令在文本左侧输出带有一个字符更改指示符的文本。输出的第一个字符是' <samp>-</samp> “对于已删除的行，” <samp>|</samp> '用于添加行，空格用于未更改的行。格式包含换行符，在输出时需要换行。
</p>
<div class="example">
<pre class="example">diff \
   --old-line-format='-%l
' \
   --new-line-format='|%l
' \
   --unchanged-line-format=' %l
' \
   old new
</pre></div>

<p>要指定行格式，请使用以下选项之一。你应该引用<var>format</var> ，因为它通常包含外壳元字符。
</p>
<dl compact>
<dt><samp>--old-line-format=<var>format</var></samp></dt>
<dd><p>仅从第一个文件格式化行。
</p>
</dd>
<dt><samp>--new-line-format=<var>format</var></samp></dt>
<dd><p>仅从第二个文件格式化行。
</p>
</dd>
<dt><samp>--unchanged-line-format=<var>format</var></samp></dt>
<dd><p>格式化两个文件共有的行。
</p>
</dd>
<dt><samp>--line-format=<var>format</var></samp></dt>
<dd><p>格式化所有行；实际上，它同时设置了以上所有三个选项。
</p></dd>
</dl>

<p>在行格式中，普通字符代表他们自己；转换规范以“ <samp>%</samp>并具有以下格式之一。
</p>
<dl compact>
<dt>' <samp>%l</samp> '</dt>
<dd><p>代表该行的内容，不计算其尾随的换行符（如果有）。这种格式忽略行是否不完整；请参阅<a href="#Incomplete-Lines">不完整的行</a> 。
</p>
</dd>
<dt>' <samp>%L</samp> '</dt>
<dd><p>代表该行的内容，包括其尾随的换行符（如果有）。如果一行不完整，则此格式将保留其不完整。
</p>
</dd>
<dt>' <samp>%%</samp> '</dt>
<dd><p>代表 ' <samp>%</samp> '。
</p>
</dd>
<dt>' <samp>%c'<var>C</var>'</samp> '</dt>
<dd><p>哪里<var>C</var>是一个字符，代表<var>C</var> 。
<var>C</var>可能不是反斜杠或撇号。例如， ' <samp>%c':'</samp> '代表冒号。
</p>
</dd>
<dt>' <samp>%c'\<var>O</var>'</samp> '</dt>
<dd><p>哪里<var>O</var>是1、2或3个八进制数字的字符串，代表具有八进制代码的字符<var>O</var> 。例如， ' <samp>%c'\0'</samp> '代表一个空字符。
</p>
</dd>
<dt>' <samp><var>F</var>n</samp> '</dt>
<dd><p>哪里<var>F</var>是一个<code>printf</code>转换规范，代表用格式化的行号<var>F</var> 。例如， ' <samp>%.5dn</samp> '使用<code>printf</code>格式<code>"%.5d"</code> 。有关printf转换规范的更多信息，请参见<a href="#Line-Group-Formats">行组格式</a> 。
</p>
</dd>
</dl>

<p>默认行格式为“ <samp>%l</samp> '后跟换行符。
</p>
<p>如果输入包含制表符，并且它们在输出中对齐很重要，则应确保“ <samp>%l</samp> ' 要么 ' <samp>%L</samp> '以行格式位于制表符停止符之后（例如，在' <samp>%l</samp> ' 要么 ' <samp>%L</samp> '（带有制表符），否则您应该使用<samp>-t</samp>要么<samp>--expand-tabs</samp>选项。
</p>
<p>总而言之，行和行组格式使您可以指定许多不同的格式。例如，以下命令使用与普通格式相似的格式<code>diff</code>格式。您可以定制此命令以更好地控制<code>diff</code>输出。
</p>
<div class="example">
<pre class="example">diff \
   --old-line-format='&lt; %l
' \
   --new-line-format='&gt; %l
' \
   --old-group-format='%df%(f=l?:,%dl)d%dE
%&lt;' \
   --new-group-format='%dea%dF%(F=L?:,%dL)
%&gt;' \
   --changed-group-format='%df%(f=l?:,%dl)c%dF%(F=L?:,%dL)
%&lt;---
%&gt;' \
   --unchanged-group-format='' \
   old new
</pre></div>

<hr>
<a name="Example-If_002dthen_002delse"></a>
<div class="header">
<p>下一篇： <a href="#Detailed-If_002dthen_002delse" rel="next" accesskey="n">详细的If-then-else</a> ，上一篇： <a href="#Line-Formats" rel="prev" accesskey="p">行格式</a> ，上一篇： <a href="#If_002dthen_002delse" rel="up" accesskey="u">If-then-else</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-If_002dthen_002delse-Format"></a>
<h4 class="subsection">2.6.3 If-then-else格式的示例</h4>

<p>这是“的输出<samp>diff -DTWO lao tzu</samp> '（有关这两个文件的完整内容，请参见<a href="#Sample-diff-Input">Sample diff Input</a> ）：</p>
<div class="example">
<pre class="example">#ifndef TWO
The Way that can be told of is not the eternal Way;
The name that can be named is not the eternal name.
#endif /* ! TWO */
The Nameless is the origin of Heaven and Earth;
#ifndef TWO
The Named is the mother of all things.
#else /* TWO */
The named is the mother of all things.

#endif /* TWO */
Therefore let there always be non-being,
  so we may see their subtlety,
And let there always be being,
  so we may see their outcome.
The two are the same,
But after they are produced,
  they have different names.
#ifdef TWO
They both may be called deep and profound.
Deeper and more profound,
The door of all subtleties!
#endif /* TWO */
</pre></div>

<hr>
<a name="Detailed-If_002dthen_002delse"></a>
<div class="header">
<p>上一篇： <a href="#Example-If_002dthen_002delse" rel="prev" accesskey="p">If-then-else示例</a> ，上一篇： <a href="#If_002dthen_002delse" rel="up" accesskey="u">If-then-else</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Detailed-Description-of-If_002dthen_002delse-Format"></a>
<h4 class="subsection">2.6.4 If-then-else格式的详细说明</h4>

<p>对于两个文件共有的行， <code>diff</code>使用未更改的行组格式。对于合并输出格式中的每个大块差异，如果大块仅包含第一个文件中的行， <code>diff</code>使用旧的行组格式；如果大块仅包含第二个文件中的行， <code>diff</code>使用新的组格式；除此以外， <code>diff</code>使用更改后的组格式。
</p>
<p>旧的，新的和未更改的行格式分别指定第一个文件中的行，第二个文件中的行以及两个文件所共有的行的输出格式。
</p>
<p>选项<samp>--ifdef=<var>name</var></samp>等效于使用Shell语法的以下选项序列：</p>
<div class="example">
<pre class="example">--old-group-format='#ifndef <var>name</var>
%&lt;#endif /* ! <var>name</var> */
' \
--new-group-format='#ifdef <var>name</var>
%&gt;#endif /* <var>name</var> */
' \
--unchanged-group-format='%=' \
--changed-group-format='#ifndef <var>name</var>
%&lt;#else /* <var>name</var> */
%&gt;#endif /* <var>name</var> */
'
</pre></div>

<p>您应该仔细检查<code>diff</code>输出以正确嵌套。例如，当使用<samp>-D <var>name</var></samp>要么<samp>--ifdef=<var>name</var></samp>选项，您应该检查不同的行是否包含任何C预处理程序指令' <samp>#ifdef</samp> '，' <samp>#ifndef</samp> '，' <samp>#else</samp> '，' <samp>#elif</samp> '， 要么 ' <samp>#endif</samp> '，它们正确嵌套并匹配。如果没有，则必须手动进行更正。还是要仔细检查生成的代码，以确保它确实能够实现您想要的功能，这是一个好主意。根据输入文件的生成方式，输出可能包含重复的代码或不正确的代码。
</p>
<p>的<code>patch</code><samp>-D <var>name</var></samp>选项的行为类似于<code>diff</code><samp>-D <var>name</var></samp>选项，除了它对文件和diff进行操作以生成合并文件外。请参阅<a href="#patch-Options">补丁选项</a> 。
</p>
<hr>
<a name="Incomplete-Lines"></a>
<div class="header">
<p>下一篇： <a href="#Comparing-Directories" rel="next" accesskey="n">目录比较</a> ，上一篇： <a href="#Output-Formats" rel="prev" accesskey="p">输出格式</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Incomplete-Lines-1"></a>
<h2 class="chapter">3行不完整</h2>
<a name="index-incomplete-lines"></a>
<a name="index-full-lines"></a>
<a name="index-newline-treatment-by-diff"></a>

<p>当输入文件以非换行符结尾时，其最后一行称为<em>不完整行，</em>因为其最后一个字符不是换行符。所有其他行都称为实<em>线，</em>并以换行符结尾。除非忽略空白之间的差异，否则不完整的行将不匹配完整的行（请参见<a href="#White-Space">空白</a> ）。
</p>
<p>通常，输出中的不完整行与完整行之间的区别是以下一行以“ <samp>\</samp> '。但是，RCS格式（请参阅<a href="#RCS">RCS</a> ）按原样输出不完整的行，而没有任何尾随换行符或后续行。并排格式通常按原样表示不完整的行，但在某些情况下使用' <samp>\</samp> ' 要么 ' <samp>/</samp>排水沟标记。<a href="#Side-by-Side">并排</a>查看。if-then-else行格式使用'保留行的不完整性<samp>%L</samp> '，并用'删除换行符<samp>%l</samp> '。请参见<a href="#Line-Formats">行格式</a> 。最后， <code>ed</code>向前<code>ed</code>输出格式（请参阅<a href="#Output-Formats">输出格式</a> ） <code>diff</code>无法代表不完整的行，因此它假装有换行符并报告错误。
</p>
<p>例如，假设<samp>F</samp>和<samp>G</samp>是仅包含“ <samp>f</samp> '和' <samp>g</samp> '， 分别。然后 ' <samp>diff F G</samp>的输出</p>
<div class="example">
<pre class="example">1c1
&lt; f
\ No newline at end of file
---
&gt; g
\ No newline at end of file
</pre></div>

<p>（确切的消息在非英语语言环境中可能会有所不同。）' <samp>diff -n F G</samp> '输出以下内容，但不包含换行符：</p>
<div class="example">
<pre class="example">d1 1
a1 1
g
</pre></div>

<p>' <samp>diff -e F G</samp> '报告两个错误并输出以下内容：</p>
<div class="example">
<pre class="example">1c
g
.
</pre></div>

<hr>
<a name="Comparing-Directories"></a>
<div class="header">
<p>下一页： <a href="#Adjusting-Output" rel="next" accesskey="n">调整输出</a> ，上一页： <a href="#Incomplete-Lines" rel="prev" accesskey="p">不完整的行</a> ， <a href="#Top" rel="up" accesskey="u">上方</a> ： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Comparing-Directories-1"></a>
<h2 class="chapter">4个比较目录</h2>

<a name="index-LC_005fCOLLATE"></a>
<p>您可以使用<code>diff</code>比较两个目录树中的部分或全部文件。当两个文件名参数都设为<code>diff</code>是目录，它会比较两个目录中包含的每个文件，并按字母顺序检查文件名， <code>LC_COLLATE</code>区域设置类别。一般<code>diff</code>对没有差异的文件对保持沉默，但是如果您使用<samp>--report-identical-files</samp> （ <samp>-s</samp> ）选项，它会报告成对的相同文件。一般<code>diff</code>报告两个目录共有的子目录，而不比较子目录的文件，但是如果您使用<samp>-r</samp>要么<samp>--recursive</samp>选项，它将比较目录树中每个对应的文件对，直到它们到达的深度为止。
</p>
<p>如果只有一个文件， <code>diff</code>通常不显示其内容；它仅报告一个文件存在，而另一个文件不存在。你（们）能做到<code>diff</code>好像丢失的文件为空，因此它输出实际存在的文件的全部内容。（根据缺少的文件位于第一个位置还是第二个位置，它以插入或删除的形式输出。）为此，请使用<samp>--new-file</samp> （ <samp>-N</samp> ） 选项。该选项影响命令行参数以及通过目录遍历找到的文件。例如， ' <samp>diff -N a b</samp>对待<samp>a</samp>如空<samp>a</samp>不存在，但<samp>b</samp>确实如此，并且类似地， <samp>diff -N - b</samp> '如果标准输入已关闭，则将其视为空，但<samp>b</samp>存在。
</p>
<p>如果旧目录包含不在新目录中的大文件，则可以通过使用<samp>--unidirectional-new-file</samp>选项代替<samp>-N</samp> 。这个选项就像<samp>-N</samp>除了它只插入出现在第二个目录中的文件的内容，而不插入第一个目录（即已添加的文件）的内容。在补丁程序的顶部，为用户应用补丁程序编写说明，以删除在应用补丁程序之前删除的文件。有关<a href="#Making-Patches">制作</a>用于分发的补丁程序的更多讨论，请参见<a href="#Making-Patches">制作补丁程序</a> 。
</p>
<p>要在比较目录时忽略某些文件，请使用<samp>--exclude=<var>pattern</var></samp> （ <samp>-x <var>pattern</var></samp> ） 选项。此选项将忽略基本名称与外壳模式匹配的任何文件或子目录<var>pattern</var> 。与外壳程序不同，文件名基名开头的句点与模式开头的通配符匹配。你应该附上<var>pattern</var>用引号引起来，以使外壳程序不展开它。例如，该选项<samp>-x '*.[ao]'</samp>忽略任何以“。”结尾的文件<samp>.a</samp> ' 要么 ' <samp>.o</samp> '。
</p>
<p>如果您多次指定此选项，则会累积该选项。例如，使用选项<samp>-x 'RCS' -x '*,v'</samp>忽略任何基名称为'的文件或子目录<samp>RCS</samp> '或以'结尾<samp>,v</samp> '。
</p>
<p>如果您需要多次提供此选项，则可以将模式放在文件中，每行一个模式，然后使用<samp>--exclude-from=<var>file</var></samp> （ <samp>-X <var>file</var></samp> ） 选项。模式文件中忽略尾随空白和空行。
</p>
<p>如果您一直在比较两个目录并中途停止，则稍后可能要从上次停止的地方继续。您可以使用<samp>--starting-file=<var>file</var></samp> （ <samp>-S <var>file</var></samp> ） 选项。这仅比较文件<var>file</var>以及所有按字母顺序排列的文件（位于最高目录级别）。
</p>
<p>如果两个目录的区别仅在于文件名在一个目录中是小写而在大写中是大写， <code>diff</code>通常会报告许多差异，因为它以区分大小写的方式比较文件名。随着<samp>--ignore-file-name-case</samp>选项， <code>diff</code>忽略文件名中的大小写差异，例如文件内容<samp>Tao</samp>将一个目录中的文件与文件内容进行比较<samp>TAO</samp>在另一个。的<samp>--no-ignore-file-name-case</samp>选项取消<samp>--ignore-file-name-case</samp>选项，恢复为默认行为。
</p>
<p>如果<samp>--exclude=<var>pattern</var></samp> （ <samp>-x <var>pattern</var></samp> ）选项，或者<samp>--exclude-from=<var>file</var></samp> （ <samp>-X <var>file</var></samp> ）选项，是在<samp>--ignore-file-name-case</samp>选项有效，排除与指定模式匹配的文件名时忽略大小写。
</p>
<p>告诉<code>diff</code>不要遵循符号链接，请使用<samp>--no-dereference</samp>选项。
</p>
<hr>
<a name="Adjusting-Output"></a>
<div class="header">
<p>下一篇： <a href="#diff-Performance" rel="next" accesskey="n">diff Performance</a> ，上一篇： <a href="#Comparing-Directories" rel="prev" accesskey="p">比较目录</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Making-diff-Output-Prettier"></a>
<h2 class="chapter">5制作<code>diff</code>输出更漂亮</h2>

<p><code>diff</code>提供了几种调整其输出外观的方法。这些调整可以应用于任何输出格式。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Tabs" accesskey="1">标签</a> ：</td><td>  </td><td align="left" valign="top">保留制表位的对齐方式。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Trailing-Blanks" accesskey="2">尾随空格</a> ：</td><td>  </td><td align="left" valign="top">在空的输出行之前禁止空格。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Pagination" accesskey="3">分页</a> ：</td><td>  </td><td align="left" valign="top">页面编号和时间戳<code>diff</code>输出。
</td></tr>
</tbody></table>

<hr>
<a name="Tabs"></a>
<div class="header">
<p>下一页： <a href="#Trailing-Blanks" rel="next" accesskey="n">尾随空白</a> ，上一篇： <a href="#Adjusting-Output" rel="up" accesskey="u">调整输出</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Preserving-Tab-Stop-Alignment"></a>
<h3 class="section">5.1保留制表符停止对齐</h3>
<a name="index-tab-stop-alignment"></a>
<a name="index-aligning-tab-stops"></a>

<p>某些文字行<code>diff</code>输出格式前面带有一个或两个字符，用于指示是否插入，删除或更改了文本。这些字符的添加会导致制表符移动到下一个制表符停止位置，从而导致行中各列的对齐方式中断。GNU <code>diff</code>提供了两种使制表符对齐的列正确对齐的方法。
</p>
<p>第一种方法是<code>diff</code>将所有制表符转换为正确数量的空格，然后再输出它们；选择此方法与<samp>--expand-tabs</samp> （ <samp>-t</samp> ） 选项。要将这种形式的输出与<code>patch</code> ，你必须给<code>patch</code>的<samp>-l</samp>要么<samp>--ignore-white-space</samp>选项（有关更多信息，请参见“ <a href="#Changed-White-Space">更改的空白”</a> ）。 <code>diff</code>通常假定每8个打印列设置一次制表位，但这可以通过以下方式更改： <samp>--tabsize=<var>columns</var></samp>选项。
</p>
<p>使制表符正确排列的另一种方法是在行的开头的指示符后面添加制表符而不是空格。这样可以确保所有后面的制表符相对于制表位都与原始文件中的制表符位置相同，以便输出正确对齐。它的缺点是它可能会使长行太长而无法容纳在屏幕或纸张的一行上。它也不适用于统一输出格式，该统一输出格式在更改类型指示符后面没有空格。用<samp>-T</samp>要么<samp>--initial-tab</samp>选项。
</p>
<hr>
<a name="Trailing-Blanks"></a>
<div class="header">
<p>下一个： <a href="#Pagination" rel="next" accesskey="n">分页</a> ，上一个： <a href="#Tabs" rel="prev" accesskey="p">选项卡</a> ，向上： <a href="#Adjusting-Output" rel="up" accesskey="u">调整输出</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Omitting-trailing-blanks"></a>
<h3 class="section">5.2省略尾随空白</h3>
<a name="index-trailing-blanks"></a>
<p>以标准格式或上下文格式输出行，或以统一格式输出未更改的行时， <code>diff</code>通常在每行之前输出空白。如果该行为空，则输出<code>diff</code>因此，即使输入中不包含尾随空白，也要保留它们。例如，当以上下文格式输出未更改的空行时， <code>diff</code>通常输出一条带有两个前导空格的行。
</p>
<p>一些文本编辑器和电子邮件代理通常会删除尾随空格，因此处理包含它们的diff输出文件可能是个问题。您可以使用<samp>--suppress-blank-empty</samp>选项。它导致<code>diff</code>以正常，上下文和统一格式在输出行的末尾省略尾随空白，除非输入中已经存在尾随空白。这会稍微改变输出格式，从而确保输出行永远不会以空格结尾，除非输入线以空格结尾。这种格式不太可能被文本编辑器或通过电子邮件传输的方式干扰。它被GNU接受<code>patch</code>也一样
</p>
<hr>
<a name="Pagination"></a>
<div class="header">
<p>上一页： <a href="#Trailing-Blanks" rel="prev" accesskey="p">尾随空白</a> ，向上： <a href="#Adjusting-Output" rel="up" accesskey="u">调整输出</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Paginating-diff-Output"></a>
<h3 class="section">5.3分页<code>diff</code>输出量</h3>
<a name="index-paginating-diff-output"></a>

<p>具有较长的输出页码和时间戳记会很方便。的<samp>--paginate</samp> （ <samp>-l</samp> ）选项通过发送<code>diff</code>通过输出<code>pr</code>程序。这是“ <samp>diff -lc lao tzu</samp> '：</p>
<div class="example">
<pre class="example">2002-02-22 14:20                 diff -lc lao tzu                 Page 1
</pre></div>

<hr>
<a name="diff-Performance"></a>
<div class="header">
<p>下一篇： <a href="#Comparing-Three-Files" rel="next" accesskey="n">比较三个文件</a> ，上一篇： <a href="#Adjusting-Output" rel="prev" accesskey="p">调整输出</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="diff-Performance-Tradeoffs"></a>
<h2 class="chapter">6 <code>diff</code>性能折衷</h2>
<a name="index-performance-of-diff"></a>

<p>GNU <code>diff</code>运行效率很高；但是，在某些情况下，您可以使其运行得更快或进行更紧凑的更改。
</p>
<p>一种改善方式<code>diff</code>性能是使用硬链接或符号链接到文件而不是副本。这可以提高性能，因为<code>diff</code>通常不需要读取指向同一文件的两个硬链接或符号链接，因为它们的内容必须相同。例如，假设您复制了一个大型目录层次结构，对该副本进行了一些更改，然后经常使用“ <samp>diff -r</samp>以比较原件和副本。如果原始文件是只读文件，则可以通过使用硬链接或符号链接（例如，使用GNU' <samp>cp -lR</samp> ' 要么 ' <samp>cp -sR</samp> '）。首次编辑副本中的文件之前，应断开链接并将其替换为常规副本。
</p>
<p>您还可以影响GNU的性能<code>diff</code>通过为其提供选项来更改其比较文件的方式。性能具有多个方面。这些选择以牺牲一个方面的代价来提高性能的一个方面，或者在某些情况下提高了性能，而在另一些情况下却损害了性能。
</p>
<p>GNU的方式<code>diff</code>确定哪些行已更改总是会带来几乎最小的差异。通常，它足以满足实际用途。如果<code>diff</code>输出很大，您可能想要<code>diff</code>使用有时会产生较小差异集的改进算法。的<samp>--minimal</samp> （ <samp>-d</samp> ）选项执行此操作；但是，它也可能导致<code>diff</code>运行速度比平常慢，因此这不是默认行为。
</p>
<p>如果您要比较的文件很大，并且散布在其中的更改很小，则可以使用<samp>--speed-large-files</samp>对算法进行不同修改的选项， <code>diff</code>用途。如果输入文件的更改密度恒定不变，则此选项可在不更改输出的情况下加快比较速度。如果不， <code>diff</code>可能会产生更大的差异；但是，输出仍然正确。
</p>
<p>一般<code>diff</code>尝试查找最小差异集之前，请丢弃两个文件共有的前缀和后缀。这使得<code>diff</code>运行速度更快，但有时可能会产生非最小输出。的<samp>--horizon-lines=<var>lines</var></samp>选项防止<code>diff</code>从丢弃最后一个<var>lines</var>前缀和第一行的行<var>lines</var>后缀的行。这给<code>diff</code>寻找最小产出的更多机会。
</p>
<p>假设一组变化的线在一端包括一系列线，而在另一端外部有相同的线序列。的<code>diff</code>命令可以自由选择在大块中包含哪个相同的序列。在这种情况下， <code>diff</code>通常，当合并相邻的块时，块会移动边界，或者将块的行移向文件末尾。在某些情况下，合并块可以使输出看起来更好。
</p>
<hr>
<a name="Comparing-Three-Files"></a>
<div class="header">
<p>下一篇： <a href="#diff3-Merging" rel="next" accesskey="n">diff3合并</a> ，上一篇： <a href="#diff-Performance" rel="prev" accesskey="p">diff性能</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Comparing-Three-Files-1"></a>
<h2 class="chapter">7比较三个文件</h2>
<a name="index-comparing-three-files"></a>
<a name="index-format-of-diff3-output"></a>

<p>使用程序<code>diff3</code>比较三个文件并显示它们之间的任何差异。 （ <code>diff3</code>也可以合并文件；参见<a href="#diff3-Merging">diff3合并</a> ）。
</p>
<p>“正常” <code>diff3</code>输出格式显示了没有周围上下文的每个差异。大块根据它们是双向还是三向进行标记，并且在输入文件中用行的位置注释行。
</p>
<p>有关如何运行的更多信息，请参见<a href="#Invoking-diff3">调用diff3</a> 。 <code>diff3</code> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Sample-diff3-Input" accesskey="1">样本diff3输入</a> ：</td><td>  </td><td align="left" valign="top">样品<code>diff3</code>输入示例。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Example-diff3-Normal" accesskey="2">示例diff3 Normal</a> ：</td><td>  </td><td align="left" valign="top">以正常格式输出的样本。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Detailed-diff3-Normal" accesskey="3">详细的diff3正常</a> ：</td><td>  </td><td align="left" valign="top">正常输出格式的详细说明。
</td></tr>
<tr><td align="left" valign="top">• <a href="#diff3-Hunks" accesskey="4">diff3大块头</a> ：</td><td>  </td><td align="left" valign="top">正常输出格式的格式。
</td></tr>
</tbody></table>

<hr>
<a name="Sample-diff3-Input"></a>
<div class="header">
<p>下一页： <a href="#Example-diff3-Normal" rel="next" accesskey="n">diff3普通示例</a> ，上一篇： <a href="#Comparing-Three-Files" rel="up" accesskey="u">比较三个文件</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="A-Third-Sample-Input-File"></a>
<h3 class="section">7.1第三个样本输入文件</h3>
<a name="index-diff3-sample-input"></a>
<a name="index-sample-input-for-diff3"></a>

<p>这是第三个示例文件，将在示例中用于说明输出。 <code>diff3</code>以及各种选项如何改变它。前两个文件与我们使用的相同<code>diff</code> （请参阅<a href="#Sample-diff-Input">样本差异输入</a> ）。这是第三个示例文件，称为<samp>tao</samp> ：</p>
<div class="example">
<pre class="example">The Way that can be told of is not the eternal Way;
The name that can be named is not the eternal name.
The Nameless is the origin of Heaven and Earth;
The named is the mother of all things.

Therefore let there always be non-being,
  so we may see their subtlety,
And let there always be being,
  so we may see their result.
The two are the same,
But after they are produced,
  they have different names.

  -- The Way of Lao-Tzu, tr. Wing-tsit Chan
</pre></div>

<hr>
<a name="Example-diff3-Normal"></a>
<div class="header">
<p>下一个： <a href="#Detailed-diff3-Normal" rel="next" accesskey="n">详细的diff3普通</a> ，上一个： <a href="#Sample-diff3-Input" rel="prev" accesskey="p">样本diff3输入</a> ，上： <a href="#Comparing-Three-Files" rel="up" accesskey="u">比较三个文件</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="An-Example-of-diff3-Normal-Format"></a>
<h3 class="section">7.2一个例子<code>diff3</code>普通格式</h3>

<p>这是命令的输出<samp>diff3 lao tzu tao</samp> '（有关文件的完整内容，请参见<a href="#Sample-diff3-Input">diff3 Input示例</a> ）。请注意，它仅显示三个文件中不同的行。
</p>
<div class="example">
<pre class="example">====2
1:1,2c
3:1,2c
  The Way that can be told of is not the eternal Way;
  The name that can be named is not the eternal name.
2:0a
====1
1:4c
  The Named is the mother of all things.
2:2,3c
3:4,5c
  The named is the mother of all things.
  
====3
1:8c
2:7c
    so we may see their outcome.
3:9c
    so we may see their result.
====
1:11a
2:11,13c
  They both may be called deep and profound.
  Deeper and more profound,
  The door of all subtleties!
3:13,14c
  
    -- The Way of Lao-Tzu, tr. Wing-tsit Chan
</pre></div>

<hr>
<a name="Detailed-diff3-Normal"></a>
<div class="header">
<p>下一个： <a href="#diff3-Hunks" rel="next" accesskey="n">diff3 Hunks</a> ，上一个： <a href="#Example-diff3-Normal" rel="prev" accesskey="p">示例diff3 Normal</a> ，上： <a href="#Comparing-Three-Files" rel="up" accesskey="u">比较三个文件</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Detailed-Description-of-diff3-Normal-Format"></a>
<h3 class="section">7.3详细说明<code>diff3</code>普通格式</h3>

<p>每个大块都以标有' <samp>====</samp> '。三向大块头有普通的“ <samp>====</samp> '线，并且两个大块头都有' <samp>1</samp> '，' <samp>2</samp> '， 要么 ' <samp>3</samp>附加以指定这三个输入文件中的哪个不同。块包含两个或三组输入行的副本，每组输入行之前都有一个或两个命令来标识行的来源。
</p>
<p>通常，输入行的每个副本之前都有两个空格，以将其与命令区分开。但是随着<samp>--initial-tab</samp> （ <samp>-T</samp> ） 选项， <code>diff3</code>使用制表符而不是两个空格；这样可以正确排列标签。有关更多信息，请参见<a href="#Tabs">选项卡</a> 。
</p>
<p>命令采用以下形式：</p>
<dl compact>
<dt>' <samp><var>file</var>:<var>l</var>a</samp> '</dt>
<dd><p>行后出现此块<var>l</var>文件<var>file</var> ，并且该文件中没有任何行。要编辑此文件以产生其他文件，必须附加从其他文件中提取的粗线。例如， ' <samp>1:11a</samp> '表示该块在第一个文件的第11行之后，并且不包含该文件中的任何行。
</p>
</dd>
<dt>' <samp><var>file</var>:<var>r</var>c</samp> '</dt>
<dd><p>此块包含范围内的行<var>r</var>文件<var>file</var> 。范围<var>r</var>是一对逗号分隔的行号，如果只有一行，则仅是一个数字。要编辑此文件以产生其他文件，必须将指定的行更改为从其他文件中提取的行。例如， ' <samp>2:11,13c</samp> '表示该大块包含第二个文件中的第11至13行。
</p></dd>
</dl>

<p>如果一组输入行中的最后一行是不完整的（请参阅<a href="#Incomplete-Lines">Incomplete Lines</a> ），则在输出时将其与完整行区分开来，并以“ <samp>\</samp> '。
</p>
<hr>
<a name="diff3-Hunks"></a>
<div class="header">
<p>上一页： <a href="#Detailed-diff3-Normal" rel="prev" accesskey="p">详细的diff3 Normal</a> ，上<a href="#Detailed-diff3-Normal" rel="prev" accesskey="p">一篇</a> ： <a href="#Comparing-Three-Files" rel="up" accesskey="u">比较三个文件</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="diff3-Hunks-1"></a>
<h3 class="section">7.4 <code>diff3</code>大块头</h3>
<a name="index-hunks-for-diff3"></a>
<a name="index-diff3-hunks"></a>

<p>在两个或三个输入文件中不同的行组被称为<em>diff3块</em> ，类似于<code>diff</code>大块头（请参阅<a href="#Hunks">大块头</a> ）。如果所有三个输入文件在一个<code>diff3</code>大块头，这个大块头叫做<em>三向大块头</em> ；如果只有两个输入文件不同，则它是一个<em>双向块</em> 。
</p>
<p>与<code>diff</code> ，有几种解决方案是可能的。比较文件时<samp>A</samp> '，' <samp>B</samp> '和' <samp>C</samp> '， <code>diff3</code>通常发现<code>diff3</code>通过合并两个命令输出的双向块<samp>diff A B</samp> '和' <samp>diff A C</samp> '。这并不一定会使输出的大小最小化，但是异常应该很少见。
</p>
<p>例如，假设<samp>F</samp>包含三行<samp>a</samp> '，' <samp>b</samp> '，' <samp>f</samp> '， <samp>G</samp>包含行“ <samp>g</samp> '，' <samp>b</samp> '，' <samp>g</samp> '和<samp>H</samp>包含行“ <samp>a</samp> '，' <samp>b</samp> '，' <samp>h</samp> '。 ' <samp>diff3 F G H</samp> '可能输出以下内容：</p>
<div class="example">
<pre class="example">====2
1:1c
3:1c
  a
2:1c
  g
====
1:3c
  f
2:3c
  g
3:3c
  h
</pre></div>

<p>因为它发现了一个包含“ <samp>a</samp>在第一个和第三个文件中，以及<samp>g</samp> '在第二个文件中，然后是单行' <samp>b</samp> '对所有三个文件都是通用的，然后是包含每个文件最后一行的三向块。
</p>
<hr>
<a name="diff3-Merging"></a>
<div class="header">
<p>下一篇： <a href="#Interactive-Merging" rel="next" accesskey="n">交互式合并</a> ，上一篇： <a href="#Comparing-Three-Files" rel="prev" accesskey="p">比较三个文件</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Merging-From-a-Common-Ancestor"></a>
<h2 class="chapter">8从共同祖先合并</h2>
<a name="index-merging-from-a-common-ancestor"></a>

<p>当两个人更改了同一文件的副本时， <code>diff3</code>可以产生合并的输出，其中包含两组更改以及有关冲突的警告。
</p>
<p>人们可能会想到名称如下的程序<code>diff4</code>和<code>diff5</code>同时比较三个以上的文件，但实际上很少有需要。您可以使用<code>diff3</code>通过一次合并两个变更集将三个或更多变更集合并到一个文件中。
</p>
<p><code>diff3</code>可以将两个修改版本的更改合并到一个通用的先前版本中。这使您可以合并由两个较新文件表示的更改集。将公共祖先版本指定为第二个参数，并将两个较新版本指定为第一个和第三个参数，如下所示：</p>
<div class="example">
<pre class="example">diff3 <var>mine</var> <var>older</var> <var>yours</var>
</pre></div>

<p>您可以通过记住参数的字母顺序来记住它们的顺序。
</p>
<a name="index-conflict"></a>
<a name="index-overlap"></a>
<p>您可以认为这是减法<var>older</var>从<var>yours</var>并将结果添加到<var>mine</var> ，或合并为<var>mine</var>将会发生的变化<var>older</var>进入<var>yours</var> 。只要是<var>mine</var>和<var>older</var>在每个此类更改附近进行匹配。当所有三个输入文件都不同或仅<var>older</var>不同我们称这为<em>冲突</em> 。当所有三个输入文件都不同时，我们称冲突为<em>overlap</em> 。
</p>
<p><code>diff3</code>提供了几种处理重叠和冲突的方法。您可以忽略重叠或冲突，或仅选择重叠，或使用特殊的' <samp><<<<<<<</samp> '和' <samp>>>>>>>></samp> '行。
</p>
<p><code>diff3</code>可以将合并结果输出为<code>ed</code>可以应用于第一个文件以产生合并输出的脚本。但是，通常最好<code>diff3</code>直接生成合并的输出；这绕过了一些问题<code>ed</code> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Which-Changes" accesskey="1">哪些变化</a> ：</td><td>  </td><td align="left" valign="top">选择要合并的更改。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Marking-Conflicts" accesskey="2">标记冲突</a> ：</td><td>  </td><td align="left" valign="top">标记冲突。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Bypassing-ed" accesskey="3">绕过ed</a> ：</td><td>  </td><td align="left" valign="top">直接生成合并的输出。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Merging-Incomplete-Lines" accesskey="4">合并不完整的行</a> ：</td><td>  </td><td align="left" valign="top">怎么样<code>diff3</code>合并不完整的行。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Saving-the-Changed-File" accesskey="5">保存更改的文件</a> ：</td><td>  </td><td align="left" valign="top">模拟系统V的行为。
</td></tr>
</tbody></table>

<hr>
<a name="Which-Changes"></a>
<div class="header">
<p>下一页： <a href="#Marking-Conflicts" rel="next" accesskey="n">标记冲突</a> ，向上： <a href="#diff3-Merging" rel="up" accesskey="u">diff3合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Selecting-Which-Changes-to-Incorporate"></a>
<h3 class="section">8.1选择要合并的更改</h3>
<a name="index-overlapping-change_002c-selection-of"></a>
<a name="index-unmerged-change"></a>

<p>您可以从中选择所有未合并的更改<var>older</var>至<var>yours</var>用于合并<var>mine</var>与<samp>--ed</samp> （ <samp>-e</samp> ） 选项。您只能使用选择不重叠的未合并更改<samp>--easy-only</samp> （ <samp>-3</samp> ），则您只能选择带有的重叠更改<samp>--overlap-only</samp> （ <samp>-x</samp> ）。
</p>
<p>的<samp>-e</samp> ， <samp>-3</samp>和<samp>-x</samp>选项仅选择未<em>合并的更改</em> ，即在以下位置更改<var>mine</var>和<var>yours</var>不同;他们忽略了来自<var>older</var>至<var>yours</var>哪里<var>mine</var>和<var>yours</var>之所以相同，是因为它们假定这样的更改已被合并。如果此假设不安全，则可以使用<samp>--show-all</samp> （ <samp>-A</samp> ）选项（请参阅<a href="#Marking-Conflicts">标记冲突</a> ）。
</p>
<p>这是命令的输出<code>diff3</code>以及这三个选项中的每一个（有关文件的完整内容，请参见<a href="#Sample-diff3-Input">Sample diff3 Input</a> ）。注意<samp>-e</samp>输出由输出输出的不相交的变更集的并集<samp>-3</samp>和<samp>-x</samp> 。
</p>
<p>输出“ <samp>diff3 -e lao tzu tao</samp> '：</p><div class="example">
<pre class="example">11a

  -- The Way of Lao-Tzu, tr. Wing-tsit Chan
.
8c
  so we may see their result.
.
</pre></div>

<p>输出“ <samp>diff3 -3 lao tzu tao</samp> '：</p><div class="example">
<pre class="example">8c
  so we may see their result.
.
</pre></div>

<p>输出“ <samp>diff3 -x lao tzu tao</samp> '：</p><div class="example">
<pre class="example">11a

  -- The Way of Lao-Tzu, tr. Wing-tsit Chan
.
</pre></div>

<hr>
<a name="Marking-Conflicts"></a>
<div class="header">
<p>下一篇： <a href="#Bypassing-ed" rel="next" accesskey="n">绕过ed</a> ，上一篇： <a href="#Which-Changes" rel="prev" accesskey="p">更改</a> ，上一篇： <a href="#diff3-Merging" rel="up" accesskey="u">diff3合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Marking-Conflicts-1"></a>
<h3 class="section">8.2标记冲突</h3>
<a name="index-conflict-marking"></a>
<a name="index-_003c_003c_003c_003c_003c_003c_003c-for-marking-conflicts"></a>

<p><code>diff3</code>可以通过在合并的输出中用特殊的标记线将其括起来来标记冲突。来自两个文件的冲突<var>A</var>和<var>B</var>标记如下：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <var>A</var>
<span class="roman">lines from <var>A</var></span>
=======
<span class="roman">lines from <var>B</var></span>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; <var>B</var>
</pre></div>

<p>来自三个文件的冲突<var>A</var> ， <var>B</var>和<var>C</var>标记如下：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <var>A</var>
<span class="roman">lines from <var>A</var></span>
||||||| <var>B</var>
<span class="roman">lines from <var>B</var></span>
=======
<span class="roman">lines from <var>C</var></span>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; <var>C</var>
</pre></div>

<p>的<samp>--show-all</samp> （ <samp>-A</samp> ）选项就像<samp>-e</samp>选项，除了将冲突括起来，并从<var>older</var>至<var>yours</var> ，而不仅仅是未合并的更改。因此，给定样本输入文件（请参见<a href="#Sample-diff3-Input">Sample diff3 Input</a> ），“ <samp>diff3 -A lao tzu tao</samp> '将冲突放在方括号内， <samp>tzu</samp>不同之处：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; tzu
=======
The Way that can be told of is not the eternal Way;
The name that can be named is not the eternal name.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tao
</pre></div>

<p>并输出以下三种方式的冲突：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; lao
||||||| tzu
They both may be called deep and profound.
Deeper and more profound,
The door of all subtleties!
=======

  -- The Way of Lao-Tzu, tr. Wing-tsit Chan
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tao
</pre></div>

<p>的<samp>--show-overlap</samp> （ <samp>-E</samp> ）选项输出的信息少于<samp>--show-all</samp> （ <samp>-A</samp> ）选项，因为它仅输出未合并的更改，并且从不输出第二个文件的内容。就这样<samp>-E</samp>选项就像<samp>-e</samp>选项，但它将三项重叠更改的第一个和第三个文件括在括号中。同样， <samp>-X</samp>像<samp>-x</samp> ，但将所有（必要时重叠的）更改括起来。例如，对于上述三向重叠更改， <samp>-E</samp>和<samp>-X</samp>选项输出以下内容：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; lao
=======

  -- The Way of Lao-Tzu, tr. Wing-tsit Chan
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tao
</pre></div>

<p>如果您比较的文件名无意义或无意义，则可以使用<samp>--label=<var>label</var></samp>选项以在“ <samp><<<<<<<</samp> '，' <samp>|||||||</samp> '和' <samp>>>>>>>></samp>括号。该选项最多可以给出3次，每个输入文件一次。因此， <samp>diff3 -A --label X --label Y --label Z A B C</samp> '像' <samp>diff3 -A A B C</samp> '，除了输出看起来像来自名为'的文件<samp>X</samp> '，' <samp>Y</samp> '和' <samp>Z</samp> '，而不是来自名为' <samp>A</samp> '，' <samp>B</samp> '和' <samp>C</samp> '。
</p>
<hr>
<a name="Bypassing-ed"></a>
<div class="header">
<p>下一个： <a href="#Merging-Incomplete-Lines" rel="next" accesskey="n">合并不完整的行</a> ，上一个： <a href="#Marking-Conflicts" rel="prev" accesskey="p">标记冲突</a> ，上一个： <a href="#diff3-Merging" rel="up" accesskey="u">diff3合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Generating-the-Merged-Output-Directly"></a>
<h3 class="section">8.3直接生成合并的输出</h3>
<a name="index-merged-diff3-format"></a>

<p>随着<samp>--merge</samp> （ <samp>-m</samp> ） 选项， <code>diff3</code>直接输出合并的文件。这比使用<code>ed</code>生成它，甚至可以处理非文本文件<code>ed</code>会拒绝。如果指定<samp>-m</samp>没有<code>ed</code>脚本选项<samp>-A</samp>假设。
</p>
<p>例如，命令“ <samp>diff3 -m lao tzu tao</samp> '（请参阅<a href="#Sample-diff3-Input">示例diff3输入</a>以获取输入文件的副本）将输出以下内容：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; tzu
=======
The Way that can be told of is not the eternal Way;
The name that can be named is not the eternal name.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tao
The Nameless is the origin of Heaven and Earth;
The Named is the mother of all things.
Therefore let there always be non-being,
  so we may see their subtlety,
And let there always be being,
  so we may see their result.
The two are the same,
But after they are produced,
  they have different names.
&lt;&lt;&lt;&lt;&lt;&lt;&lt; lao
||||||| tzu
They both may be called deep and profound.
Deeper and more profound,
The door of all subtleties!
=======

  -- The Way of Lao-Tzu, tr. Wing-tsit Chan
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tao
</pre></div>

<hr>
<a name="Merging-Incomplete-Lines"></a>
<div class="header">
<p>下一篇： <a href="#Saving-the-Changed-File" rel="next" accesskey="n">保存更改的文件</a> ，上一篇： <a href="#Bypassing-ed" rel="prev" accesskey="p">绕过ed</a> ，上一篇： <a href="#diff3-Merging" rel="up" accesskey="u">diff3合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="How-diff3-Merges-Incomplete-Lines"></a>
<h3 class="section">8.4如何<code>diff3</code>合并不完整的行</h3>
<a name="index-incomplete-line-merging"></a>

<p>用<samp>-m</samp> ，发现不完整的行（请参见<a href="#Incomplete-Lines">不完整的行</a> ）只是简单地复制到输出中；如果合并的输出以冲突结尾并且输入文件之一以不完整的行结尾，则后接' <samp>|||||||</samp> '，' <samp>=======</samp> ' 要么 ' <samp>>>>>>>></samp>括号会出现在行首以外的其他地方，因为它们会附加到不完整的行上。
</p>
<p>不带<samp>-m</samp> ， 如果<code>ed</code>指定了脚本选项，但发现行不完整， <code>diff3</code>生成警告，并表现为已存在换行符。
</p>
<hr>
<a name="Saving-the-Changed-File"></a>
<div class="header">
<p>上一页： <a href="#Merging-Incomplete-Lines" rel="prev" accesskey="p">合并不完整的行</a> ，向上： <a href="#diff3-Merging" rel="up" accesskey="u">diff3合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Saving-the-Changed-File-1"></a>
<h3 class="section">8.5保存更改的文件</h3>
<a name="index-System-V-diff3-compatibility"></a>

<p>传统Unix <code>diff3</code>产生一个<code>ed</code>没有尾随的脚本<samp>w</samp> '和' <samp>q</samp> '保存更改的命令。系统V <code>diff3</code>生成这些额外的命令。GNU <code>diff3</code>通常表现得像传统的Unix <code>diff3</code> ，但<samp>-i</samp>选项的行为类似于System V <code>diff3</code>并附加“ <samp>w</samp> '和' <samp>q</samp> '命令。
</p>
<p>的<samp>-i</samp>选项需要以下之一<code>ed</code>脚本选项<samp>-AeExX3</samp> ，并且与合并的输出选项不兼容<samp>-m</samp> 。
</p>
<hr>
<a name="Interactive-Merging"></a>
<div class="header">
<p>下一篇： <a href="#Merging-with-patch" rel="next" accesskey="n">与补丁</a> <a href="#diff3-Merging" rel="prev" accesskey="p">合并</a> ，上一篇： <a href="#diff3-Merging" rel="prev" accesskey="p">diff3合并</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Interactive-Merging-with-sdiff"></a>
<h2 class="chapter">9互动合并<code>sdiff</code></h2>
<a name="index-diff-merging"></a>
<a name="index-interactive-merging"></a>

<p>用<code>sdiff</code> ，您可以基于并排交互地合并两个文件<samp>-y</samp>格式比较（请参见<a href="#Side-by-Side">并排</a> ）。使用<samp>--output=<var>file</var></samp> （ <samp>-o <var>file</var></samp> ）以指定将合并文本放在何处。有关选项的更多详细信息，请参见<a href="#Invoking-sdiff">调用sdiff</a> 。 <code>sdiff</code> 。
</p>
<p>交互式合并文件的另一种方法是使用Emacs Lisp软件包<code>emerge</code> 。有关更多信息，请参见<cite>GNU Emacs手册</cite>中<cite>的</cite> <a href="http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Emerge">Emerge</a> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#sdiff-Option-Summary" accesskey="1">sdiff选项摘要</a> ：</td><td>  </td><td align="left" valign="top">的总结<code>sdiff</code>选项。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Merge-Commands" accesskey="2">合并命令</a> ：</td><td>  </td><td align="left" valign="top">交互式合并两个文件。
</td></tr>
</tbody></table>

<hr>
<a name="sdiff-Option-Summary"></a>
<div class="header">
<p>下一篇： <a href="#Merge-Commands" rel="next" accesskey="n">合并命令</a> ，上一篇： <a href="#Interactive-Merging" rel="up" accesskey="u">交互式合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Specifying-diff-Options-to-sdiff"></a>
<h3 class="section">9.1指定<code>diff</code>的选项<code>sdiff</code></h3>
<a name="index-sdiff-output-format"></a>

<p>下列<code>sdiff</code>选项与的含义相同<code>diff</code> 。有关这些选项的使用，请参见<a href="#diff-Options">diff选项</a> 。
</p>
<div class="example">
<pre class="example">-a -b -d -i -t -v
-B -E -I <var>regexp</var> -Z

--expand-tabs
--ignore-blank-lines  --ignore-case
--ignore-matching-lines=<var>regexp</var>  --ignore-space-change
--ignore-tab-expansion  --ignore-trailing-space
--left-column  --minimal  --speed-large-files
--strip-trailing-cr  --suppress-common-lines
--tabsize=<var>columns</var>  --text  --version  --width=<var>columns</var>
</pre></div>

<p>由于历史原因， <code>sdiff</code>有一些选项的备用名称。的<samp>-l</samp>选项等效于<samp>--left-column</samp>选项，类似地<samp>-s</samp>相当于<samp>--suppress-common-lines</samp> 。的意思<code>sdiff</code><samp>-w</samp>和<samp>-W</samp>选项与<code>diff</code> ：与<code>sdiff</code> ， <samp>-w <var>columns</var></samp>相当于<samp>--width=<var>columns</var></samp>和<samp>-W</samp>相当于<samp>--ignore-all-space</samp> 。 <code>sdiff</code>没有<samp>-o</samp>选项等效于<code>diff</code>与<samp>--side-by-side</samp> （ <samp>-y</samp> ）选项（请参见<a href="#Side-by-Side">并排</a> ）。
</p>
<hr>
<a name="Merge-Commands"></a>
<div class="header">
<p>上<a href="#sdiff-Option-Summary" rel="prev" accesskey="p">一篇</a> ： <a href="#sdiff-Option-Summary" rel="prev" accesskey="p">sdiff选项摘要</a> ，上<a href="#sdiff-Option-Summary" rel="prev" accesskey="p">一篇</a> ： <a href="#Interactive-Merging" rel="up" accesskey="u">交互式合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Merge-Commands-1"></a>
<h3 class="section">9.2合并命令</h3>
<a name="index-merge-commands"></a>
<a name="index-merging-interactively"></a>

<p>具有空白装订线的公用行组从第一个文件复制到输出。在每组不同的行之后， <code>sdiff</code>提示“ <samp>%</samp>并暂停，等待以下命令之一。按照每个命令执行<tt class="key">RET</tt> 。</p>
<dl compact>
<dt>' <samp>e</samp> '</dt>
<dd><p>丢弃两个版本。在空的临时文件上调用文本编辑器，然后将结果文件复制到输出中。
</p>
</dd>
<dt>' <samp>eb</samp> '</dt>
<dd><p>连接这两个版本，在一个临时文件中编辑结果，然后将编辑后的结果复制到输出中。
</p>
</dd>
<dt>' <samp>ed</samp> '</dt>
<dd><p>喜欢 ' <samp>eb</samp> '，但每个版本之前均带有标头，该标头显示该版本来自哪个文件和行。
</p>
</dd>
<dt>' <samp>el</samp> '</dt>
<dt>' <samp>e1</samp> '</dt>
<dd><p>编辑左侧版本的副本，然后将结果复制到输出。
</p>
</dd>
<dt>' <samp>er</samp> '</dt>
<dt>' <samp>e2</samp> '</dt>
<dd><p>编辑正确版本的副本，然后将结果复制到输出。
</p>
</dd>
<dt>' <samp>l</samp> '</dt>
<dt>' <samp>1</samp> '</dt>
<dd><p>将左侧版本复制到输出。
</p>
</dd>
<dt>' <samp>q</samp> '</dt>
<dd><p>退出。
</p>
</dd>
<dt>' <samp>r</samp> '</dt>
<dt>' <samp>2</samp> '</dt>
<dd><p>将正确的版本复制到输出。
</p>
</dd>
<dt>' <samp>s</samp> '</dt>
<dd><p>静默复制常用行。
</p>
</dd>
<dt>' <samp>v</samp> '</dt>
<dd><p>详细复制常用行。这是默认值。
</p></dd>
</dl>

<a name="index-EDITOR"></a>
<p>调用的文本编辑器由<code>EDITOR</code>环境变量（如果已设置）。默认值取决于系统。
</p>
<hr>
<a name="Merging-with-patch"></a>
<div class="header">
<p>下一篇： <a href="#Making-Patches" rel="next" accesskey="n">制作补丁</a> ，上一篇： <a href="#Interactive-Merging" rel="prev" accesskey="p">交互式合并</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Merging-with-patch-1"></a>
<h2 class="chapter">10与合并<code>patch</code></h2>

<p><code>patch</code>接受由产生的比较输出<code>diff</code>并将差异应用于原始文件的副本，从而生成修补版本。用<code>patch</code> ，您可以只将更改分发到一组文件，而不必分发整个文件集；您的记者可以申请<code>patch</code>使用您的更改更新其文件副本。 <code>patch</code>自动确定差异格式，跳过任何前导或尾随标头，并使用标头确定要修补的文件。这样，您的记者就可以将包含差异列表的电子邮件直接发送到<code>patch</code> 。
</p>
<p><code>patch</code>检测并警告常见问题，例如正向修补程序。它会保存所有无法应用的补丁。它也可以保持<code>patchlevel.h</code>文件，以确保您的记者以正确的顺序应用差异。
</p>
<p><code>patch</code>在其标准输入中接受一系列差异，通常由标头分隔，标头指定要修补的文件。适用<code>diff</code>大块头（请参阅<a href="#Hunks">大块头</a> ）一一对应。如果大块与原始文件不完全匹配， <code>patch</code>使用试探法尝试尽可能修补文件。如果找不到近似匹配， <code>patch</code>拒绝该大块，然后跳到下一个大块。<code>patch</code>通常替换每个文件<var>f</var>使用新版本，将拒绝请求（如果有的话）放入“ <samp><var>f</var>.rej</samp> '。
</p>
<p>有关选项的详细信息，请参见<a href="#Invoking-patch">调用补丁</a> 。 <code>patch</code> 。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#patch-Input" accesskey="1">补丁输入</a> ：</td><td>  </td><td align="left" valign="top">选择类型<code>patch</code>输入。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Revision-Control" accesskey="2">版本控制</a> ：</td><td>  </td><td align="left" valign="top">从RCS，SCCS等获取文件</td></tr>
<tr><td align="left" valign="top">• <a href="#Imperfect" accesskey="3">不完善</a> ：</td><td>  </td><td align="left" valign="top">处理不完善的补丁。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Creating-and-Removing" accesskey="4">创建和删除</a> ：</td><td>  </td><td align="left" valign="top">使用补丁创建和删除文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Patching-Timestamps" accesskey="5">修补时间戳</a> ：</td><td>  </td><td align="left" valign="top">更新修补文件上的时间戳。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiple-Patches" accesskey="6">多个补丁</a> ：</td><td>  </td><td align="left" valign="top">处理一个文件中的多个补丁。
</td></tr>
<tr><td align="left" valign="top">• <a href="#patch-Directories" accesskey="7">补丁目录</a> ：</td><td>  </td><td align="left" valign="top">更改目录并剥离目录。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Backups" accesskey="8">备份</a> ：</td><td>  </td><td align="left" valign="top">是否制作备份文件。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Backup-Names" accesskey="9">备份名称</a> ：</td><td>  </td><td align="left" valign="top">备份文件名。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Reject-Names">拒绝姓名</a> ：</td><td>  </td><td align="left" valign="top">拒绝文件名。
</td></tr>
<tr><td align="left" valign="top">• <a href="#patch-Messages">补丁消息</a> ：</td><td>  </td><td align="left" valign="top">讯息和问题<code>patch</code>可以生产。
</td></tr>
<tr><td align="left" valign="top">• <a href="#patch-and-POSIX">patch和POSIX</a> ：</td><td>  </td><td align="left" valign="top">符合POSIX标准。
</td></tr>
<tr><td align="left" valign="top">• <a href="#patch-and-Tradition">补丁与传统</a> ：</td><td>  </td><td align="left" valign="top">GNU与传统<code>patch</code> 。
</td></tr>
</tbody></table>

<hr>
<a name="patch-Input"></a>
<div class="header">
<p>下一页： <a href="#Revision-Control" rel="next" accesskey="n">版本控制</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Selecting-the-patch-Input-Format"></a>
<h3 class="section">10.1选择<code>patch</code>输入格式</h3>
<a name="index-patch-input-format"></a>

<p><code>patch</code>通常确定<code>diff</code>通过检查其内容来格式化补丁文件使用的格式。对于包含特别令人困惑的前导文本的补丁文件，您可能需要使用以下选项之一来强制执行<code>patch</code>将补丁文件解释为diff的某种格式。此处列出的输出格式是唯一<code>patch</code>可以理解。
</p>
<dl compact>
<dt><samp>-c</samp></dt>
<dt><samp>--context</samp></dt>
<dd><p>上下文差异
</p>
</dd>
<dt><samp>-e</samp></dt>
<dt><samp>--ed</samp></dt>
<dd><p><code>ed</code>脚本。
</p>
</dd>
<dt><samp>-n</samp></dt>
<dt><samp>--normal</samp></dt>
<dd><p>正常差异
</p>
</dd>
<dt><samp>-u</samp></dt>
<dt><samp>--unified</samp></dt>
<dd><p>统一差异
</p></dd>
</dl>

<hr>
<a name="Revision-Control"></a>
<div class="header">
<p>下一个： <a href="#Imperfect" rel="next" accesskey="n">不完美</a> ，上一个： <a href="#patch-Input" rel="prev" accesskey="p">补丁输入</a> ，向上： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Revision-Control-1"></a>
<h3 class="section">10.2版本控制</h3>
<a name="index-revision-control"></a>
<a name="index-version-control"></a>
<a name="index-RCS"></a>
<a name="index-ClearCase"></a>
<a name="index-SCCS"></a>

<p>如果不存在的输入文件在以下版本支持的版本控制系统下<code>patch</code> ， <code>patch</code>通常询问用户是否从版本控制系统中获取（或检出）文件。补丁程序当前支持RCS，ClearCase和SCCS。在RCS和SCCS下， <code>patch</code>还会询问输入文件何时为只读文件，并与版本控制系统中的默认版本匹配。
</p>
<a name="index-PATCH_005fGET"></a>
<p>的<samp>--get=<var>num</var></samp> （ <samp>-g <var>num</var></samp> ）选项会影响对受支持的版本控制系统下文件的访问。如果<var>num</var>是肯定的<code>patch</code>在不询问用户的情况下获取文件；如果为零， <code>patch</code>既不询问用户也不获取文件；如果是负面的<code>patch</code>在获取文件之前询问用户。的默认值<var>num</var>由<code>PATCH_GET</code>环境变量（如果已设置）；如果不是，则默认值为零<code>patch</code>符合POSIX，否则为否定。请参阅<a href="#patch-and-POSIX">patch和POSIX</a> 。</p>
<a name="index-VERSION_005fCONTROL"></a>
<p>版本控制系统的选择不受以下因素的影响： <code>VERSION_CONTROL</code>环境变量（请参阅<a href="#Backup-Names">备份名称</a> ）。
</p>
<hr>
<a name="Imperfect"></a>
<div class="header">
<p>下一篇： <a href="#Creating-and-Removing" rel="next" accesskey="n">创建和删除</a> ，上一篇： <a href="#Revision-Control" rel="prev" accesskey="p">版本控制</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Applying-Imperfect-Patches"></a>
<h3 class="section">10.3应用不完善的补丁</h3>
<a name="index-imperfect-patch-application"></a>

<p><code>patch</code>尝试跳过补丁文件中的任何前导文本，应用差异，然后跳过任何尾随文本。因此，您可以直接向<code>patch</code> ，它应该可以正常工作。如果整个差异均以恒定的空白量缩进， <code>patch</code>自动忽略缩进。如果上下文差异在每行中都包含尾随回车符， <code>patch</code>自动忽略回车。如果上下文差异已通过在前面加' <samp><span class="nolinebreak">-</span> </samp> ' <!-- /@w -->到以'开头的行<samp>-</samp>根据<a href="ftp://ftp.isi.edu/in-notes/rfc934.txt">互联网RFC 934</a> ， <code>patch</code>自动解封装输入。
</p>
<p>但是，某些其他类型的不完美输入需要用户干预或测试。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Changed-White-Space" accesskey="1">更改的空白</a> ：</td><td>  </td><td align="left" valign="top">制表符和空格不完全匹配时。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Reversed-Patches" accesskey="2">反面补丁</a> ：</td><td>  </td><td align="left" valign="top">正确应用反向补丁。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Inexact" accesskey="3">不精确</a> ：</td><td>  </td><td align="left" valign="top">帮助<code>patch</code>查找接近的比赛。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Dry-Runs" accesskey="4">空运行</a> ：</td><td>  </td><td align="left" valign="top">预测什么<code>patch</code>会做。
</td></tr>
</tbody></table>

<hr>
<a name="Changed-White-Space"></a>
<div class="header">
<p>下一页： <a href="#Reversed-Patches" rel="next" accesskey="n">逆序修补</a> ，上： <a href="#Imperfect" rel="up" accesskey="u">不完善</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Applying-Patches-with-Changed-White-Space"></a>
<h4 class="subsection">10.3.1应用具有更改的空白的补丁</h4>
<a name="index-white-space-in-patches"></a>

<p>有时，邮件程序，编辑器或其他程序将空格更改为选项卡，反之亦然。如果修补程序文件或输入文件发生这种情况，则这些文件可能看起来相同，但是<code>patch</code>将无法正确匹配它们。如果发生此问题，请使用<samp>-l</samp>要么<samp>--ignore-white-space</samp>选项，这使得<code>patch</code>比较空白字符（即空格和制表符），以使补丁文件中的任何非空序列都与输入文件中的任何非空序列相匹配。非空白字符仍必须完全匹配。上下文的每一行仍必须与输入文件中的一行匹配。
</p>
<hr>
<a name="Reversed-Patches"></a>
<div class="header">
<p>下一个： <a href="#Inexact" rel="next" accesskey="n">不精确</a> ，上一个： <a href="#Changed-White-Space" rel="prev" accesskey="p">空格更改</a> ，上一个： <a href="#Imperfect" rel="up" accesskey="u">不完美</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Applying-Reversed-Patches"></a>
<h4 class="subsection">10.3.2应用反向补丁</h4>
<a name="index-reversed-patches"></a>

<p>有时人们跑<code>diff</code>首先是新文件，而不是第二。这将创建一个“反向”的差异。要应用此类补丁，请给出<code>patch</code>的<samp>--reverse</samp> （ <samp>-R</samp> ） 选项。
<code>patch</code>然后在应用之前尝试交换每个大块。拒绝以交换格式出现。
</p>
<p>经常<code>patch</code>可以猜测补丁是反向的。如果补丁的第一块失败， <code>patch</code>反转大块，看它是否可以这种方式应用。如果可以的话<code>patch</code>询问您是否要<samp>-R</samp>选项集；如果不能， <code>patch</code>继续正常应用补丁。如果此方法是正常的差异，并且第一个命令是附加项（应该是删除项），则此方法无法检测到反向修补程序，因为附加项始终会成功执行，因为空上下文会在任何地方匹配。但是大多数补丁程序是添加或更改行而不是删除它们，因此大多数反向普通差异都以删除开头，但失败，并且<code>patch</code>通知。
</p>
<p>如果您应用了已经应用的补丁， <code>patch</code>认为这是一个反向修补程序，可以取消应用该修补程序。这可以被解释为特征。如果您无意间执行了此操作，并且不想取消应用补丁，只需回答“ <samp>n</samp> ”和随后的“无论如何都要申请”问题，或者输入<kbd>C-c</kbd>杀死<code>patch</code>处理。
</p>
<hr>
<a name="Inexact"></a>
<div class="header">
<p>下一个： <a href="#Dry-Runs" rel="next" accesskey="n">空转</a> ，上一个： <a href="#Reversed-Patches" rel="prev" accesskey="p">反转补丁</a> ，上一个： <a href="#Imperfect" rel="up" accesskey="u">不完美</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Helping-patch-Find-Inexact-Matches"></a>
<h4 class="subsection">10.3.3帮助<code>patch</code>查找不完全匹配</h4>
<a name="index-inexact-patches"></a>
<a name="index-fuzz-factor-when-patching"></a>

<p>对于上下文差异，在较小程度上是普通差异， <code>patch</code>可以检测修补程序中提到的行号何时不正确，并尝试找到正确的位置来应用修补程序的每个块。初次猜测时，它采用了块中提到的行号，加上或减去应用上一个块时使用的任何偏移量。如果那不是正确的地方<code>patch</code>向前和向后扫描以匹配与块中给定的上下文相匹配的一组线。
</p>
<p>第一<code>patch</code>寻找上下文所有行都匹配的地方。如果找不到此类位置，并且正在读取上下文或统一差异，并且最大模糊因子设置为1或更大，则<code>patch</code>再进行一次扫描，忽略上下文的第一行和最后一行。如果失败，并且最大模糊因子设置为2或更大，它将进行另一次扫描，忽略上下文的前两行和后两行。如果最大模糊因子较大，则类似地继续。
</p>
<p>的<samp>--fuzz=<var>lines</var></samp> （ <samp>-F <var>lines</var></samp> ）选项将最大模糊因子设置为<var>lines</var> 。此选项仅适用于上下文和统一差异。它最多忽略<var>lines</var>线，同时寻找安装大块的地方。请注意，较大的模糊因子会增加制作错误补丁的几率。默认的模糊因子为2；默认值为1。没有必要将其设置为超过差异中的上下文行数，通常为3。
</p>
<p>如果<code>patch</code>找不到安装修补程序块的位置，它将修补程序写到拒绝文件中（有关如何命名拒绝文件的信息，请参阅“ <a href="#Reject-Names">拒绝名称”</a> ）。无论输入修补程序采用哪种形式，它都会以上下文格式写出被拒绝的块。如果输入是正常或<code>ed</code> diff，许多上下文只是空的。拒绝文件中的块中的行号可能与补丁文件中的行号不同：它们显示了以下位置的大概位置<code>patch</code>认为失败的大块属于新文件，而不是旧文件。
</p>
<p>如果<samp>--verbose</samp>给定选项，然后在完成每个大块时<code>patch</code>告诉您大块是成功还是失败，如果失败，则在新文件的哪一行<code>patch</code>认为大块头应该走了。如果这与diff中指定的行号不同，它将告诉您偏移量。一个大的偏移量<em>可能</em>表明<code>patch</code>在错误的地方安装了一个大块头。 <code>patch</code>还会告诉您是否使用模糊因素进行匹配，在这种情况下，您也应该稍有怀疑。
</p>
<p><code>patch</code>无法判断行号是否在<code>ed</code>脚本，并且只有在找到更改或删除命令时才能检测到正常差异中的错误行号。使用模糊因子等于或大于差异显示的上下文行数（通常为3）的上下文差异，可能会遇到相同的问题。在这些情况下，您可能应该查看原始输入文件和修补输入文件之间的上下文差异，以查看更改是否有意义。毫无错误地进行编译可以很好地表明该修补程序有效，但不能保证。
</p>
<p>针对空文件的补丁适用于不存在的文件，反之亦然。请参阅<a href="#Creating-and-Removing">创建和删除</a> 。
</p>
<p><code>patch</code>通常会产生正确的结果，即使必须做出很多猜测。但是，仅当将修补程序应用于生成修补程序的文件的精确副本时，才能保证结果。
</p>
<hr>
<a name="Dry-Runs"></a>
<div class="header">
<p>上<a href="#Inexact" rel="prev" accesskey="p">一篇</a> ： <a href="#Inexact" rel="prev" accesskey="p">不精确</a>上： <a href="#Imperfect" rel="up" accesskey="u">不完美</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Predicting-what-patch-will-do"></a>
<h4 class="subsection">10.3.4预测什么<code>patch</code>会做</h4>
<a name="index-testing-patch"></a>
<a name="index-dry-runs-for-patch"></a>

<p>事先可能不清楚<code>patch</code>将处理复杂或格式不正确的补丁。如果您担心输入可能会导致<code>patch</code>修改错误的文件，您可以使用<samp>--dry-run</samp>选项，这会导致<code>patch</code>在不实际更改任何文件的情况下打印应用补丁的结果。然后，您可以检查空运行生成的诊断，以查看是否<code>patch</code>将修改您期望的文件。如果补丁无法满足您的要求，则可以修改补丁（或其他选项<code>patch</code> ），然后尝试其他空转。对建议的补丁满意后，可以通过调用来应用它<code>patch</code>和以前一样，但是这次没有<samp>--dry-run</samp>选项。
</p>
<hr>
<a name="Creating-and-Removing"></a>
<div class="header">
<p>下一篇： <a href="#Patching-Timestamps" rel="next" accesskey="n">修补时间戳</a> ，上一篇： <a href="#Imperfect" rel="prev" accesskey="p">不完美</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Creating-and-Removing-Files"></a>
<h3 class="section">10.4创建和删除文件</h3>
<a name="index-creating-files"></a>
<a name="index-empty-files_002c-removing"></a>
<a name="index-removing-empty-files"></a>

<p>有时在比较两个目录时，一个文件可能存在于一个目录中，而另一个目录中则不存在。如果你给<code>diff</code>的<samp>--new-file</samp> （ <samp>-N</samp> ）选项，或者提供的旧文件或新文件名为<samp>/dev/null</samp>或为空，且日期为大纪元（1970-01-01 00:00:00 UTC）， <code>diff</code>输出一个补丁，该补丁添加或删除此文件的内容。得到这样的补丁后， <code>patch</code>通常会创建一个新文件或删除旧文件。但是，当遵循POSIX时（请参阅<a href="#patch-and-POSIX">patch和POSIX</a> ）， <code>patch</code>不会删除旧文件，而是将其留空。的<samp>--remove-empty-files</samp> （ <samp>-E</samp> ）选项原因<code>patch</code>即使应用补丁似乎不是删除文件的补丁，也可以删除应用补丁后为空的输出文件。
</p>
<p>如果该补丁似乎创建了一个已经存在的文件， <code>patch</code>在申请补丁之前要求确认。
</p>
<hr>
<a name="Patching-Timestamps"></a>
<div class="header">
<p>下一篇： <a href="#Multiple-Patches" rel="next" accesskey="n">多个修补程序</a> ，上一篇： <a href="#Creating-and-Removing" rel="prev" accesskey="p">创建和删除</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与修补程序合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Updating-Timestamps-on-Patched-Files"></a>
<h3 class="section">10.5更新修补文件上的时间戳</h3>
<a name="index-timestamps-on-patched-files"></a>

<p>什么时候<code>patch</code>更新文件，通常会将文件的上次修改时间戳记设置为当前时间。如果您正在使用<code>patch</code>跟踪软件分发，这可能会导致<code>make</code>错误地认为已修补的文件已过期。例如，如果<samp>syntax.c</samp>依赖于取决于<samp>syntax.y</samp>和<code>patch</code>更新<samp>syntax.c</samp>然后<samp>syntax.y</samp> ， 然后<samp>syntax.c</samp>通常相对于<samp>syntax.y</samp>即使其内容实际上是最新的。
</p>
<p>的<samp>--set-utc</samp> （ <samp>-Z</samp> ）选项原因<code>patch</code>设置补丁文件的修改和对上下文diff头中给出的时间戳的访问时间。如果上下文差异标头未指定时区，则假定它们使用协调世界时（UTC，通常称为GMT）。
</p>
<p>的<samp>--set-time</samp> （ <samp>-T</samp> ）选项的行为就像<samp>-Z</samp>要么<samp>--set-utc</samp> ，只是假设上下文差异标头的时间戳使用本地时间而不是UTC。不建议使用此选项，因为使用本地时间的补丁程序不容易被其他时区的人使用，并且由于在夏时制调整过程中本地时钟向后移动时本地时间戳记不明确。如果上下文差异标头指定了时区，则此选项等效于<samp>--set-utc</samp> （ <samp>-Z</samp> ）。
</p>
<p><code>patch</code>如果文件的原始上次修改的时间戳与diff头中给出的时间不匹配，或者文件的内容与补丁不完全匹配，则通常不设置文件的时间戳。但是，如果<samp>--force</samp> （ <samp>-f</samp> ）选项，无论如何设置文件的时间戳。
</p>
<p>由于目前的局限性<code>diff</code>格式， <code>patch</code>无法更新内容未更改的文件的时间。另外，如果您将文件时间戳记设置为当前时间以外的其他值，则还应删除（例如，使用“ <samp>make clean</samp> '）所有依赖修补文件的文件，以便以后调用<code>make</code>不要被修补文件的时间弄糊涂。
</p>
<hr>
<a name="Multiple-Patches"></a>
<div class="header">
<p>下一篇： <a href="#patch-Directories" rel="next" accesskey="n">补丁目录</a> ，上一篇： <a href="#Patching-Timestamps" rel="prev" accesskey="p">修补时间戳</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Multiple-Patches-in-a-File"></a>
<h3 class="section">10.6文件中有多个补丁</h3>
<a name="index-multiple-patches"></a>
<a name="index-intuiting-file-names-from-patches"></a>

<p>如果修补程序文件包含多个修补程序，并且未在命令行上指定输入文件， <code>patch</code>尝试应用每个修补程序，就像它们来自单独的修补程序文件一样。这意味着它确定每个补丁程序要修补的文件的名称，并检查每个补丁程序之前的前导文本以获取文件名和必备修订级别（有关该主题的更多信息，请参见<a href="#Making-Patches">制作补丁程序</a> ）。
</p>
<p><code>patch</code>使用以下规则从补丁之前的前导文本中获取文件名。第一， <code>patch</code>采用候选文件名的有序列表，如下所示：</p>
<ul>
<li>如果标题是上下文差异的标题， <code>patch</code>在标头中使用新旧文件名。如果名称没有足够的斜杠来满足<samp>-p<var>num</var></samp>要么<samp>--strip=<var>num</var></samp>选项。名字<samp>/dev/null</samp>也被忽略。

</li><li>如果有一个“ <samp>Index:</samp> '放在前导垃圾中，如果旧名称和新名称都不存在或<code>patch</code>符合POSIX， <code>patch</code>以“ <samp>Index:</samp> '行。

</li><li>出于以下规则的目的，候选文件名被视为具有顺序（旧，新，索引），无论它们在标题中出现的顺序如何。
</li></ul>

<p>然后<code>patch</code>从候选列表中选择一个文件名，如下所示：</p>
<ul>
<li>如果存在一些命名文件， <code>patch</code>如果符合POSIX，则选择名字，否则选择最佳名字。

</li><li>如果<code>patch</code>没有忽略RCS，ClearCase和SCCS（请参见<a href="#Revision-Control">修订版本控制</a> ），并且不存在命名文件，但是找到了RCS，ClearCase或SCCS主文件， <code>patch</code>选择带有RCS，ClearCase或SCCS主文件的第一个命名文件。

</li><li>如果不存在命名文件，则找不到RCS，ClearCase或SCCS主文件，则给出一些名称， <code>patch</code>不符合POSIX，并且该补丁似乎正在创建文件， <code>patch</code>选择需要创建最少目录的最佳名称。

</li><li>如果上述启发式方法没有文件名，则要求您输入要修补的文件名，然后<code>patch</code>选择该名称。
</li></ul>

<p>为了确定<em>最好</em>的非空文件名列表， <code>patch</code>首先采用路径名称组成最少的所有名称；其中，然后取所有具有最短基本名称的名称；其中，所有名字都用最短的名字表示；最后，它使用剩下的第一个名字。
</p>
<p>请参阅<a href="#patch-and-POSIX">patch和POSIX</a> ，以查看是否<code>patch</code>符合POSIX。</p>
<hr>
<a name="patch-Directories"></a>
<div class="header">
<p>下一篇： <a href="#Backups" rel="next" accesskey="n">备份</a> ，上一篇： <a href="#Multiple-Patches" rel="prev" accesskey="p">多个补丁</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Applying-Patches-in-Other-Directories"></a>
<h3 class="section">10.7在其他目录中应用修补程序</h3>
<a name="index-directories-and-patch"></a>
<a name="index-patching-directories"></a>

<p>的<samp>--directory=<var>directory</var></samp> （ <samp>-d <var>directory</var></samp> ）选项<code>patch</code>制作目录<var>directory</var>当前目录，用于解释补丁文件中的文件名以及作为其他选项（例如， <samp>-B</samp>和<samp>-o</samp> ）。例如，在邮件阅读程序中，您可以在<samp>/usr/src/emacs</samp>直接从包含如下补丁的消息中找到目录：</p>
<div class="example">
<pre class="example">| patch -d /usr/src/emacs
</pre></div>

<p>有时，修补程序中给定的文件名包含前导目录，但是您将文件保留在与修补程序中给定的目录不同的目录中。在这种情况下，您可以使用<samp>--strip=<var>number</var></samp> （ <samp>-p<var>number</var></samp> ）选项将文件名条数设置为<var>number</var> 。条数告诉<code>patch</code>从文件名的开头去除多少个斜杠以及它们之间的目录名。一个或多个相邻斜杠的序列计为单个斜杠。默认， <code>patch</code>剥离所有前导目录，仅保留基本文件名。
</p>
<p>例如，假设补丁文件中的文件名为<samp>/gnu/src/emacs/etc/NEWS</samp> 。使用<samp>-p0</samp>给出完整的文件名， <samp>-p1</samp>给<samp>gnu/src/emacs/etc/NEWS</samp> （不加斜线）， <samp>-p4</samp>给<samp>etc/NEWS</samp> ，但未指定<samp>-p</samp>完全给<samp>NEWS</samp> 。
</p>
<p><code>patch</code>在当前目录中查找每个文件（在除去任何斜杠之后），或者是否使用了<samp>-d <var>directory</var></samp>选项，在该目录中。
</p>
<hr>
<a name="Backups"></a>
<div class="header">
<p>下一个： <a href="#Backup-Names" rel="next" accesskey="n">备份名称</a> ，上一个： <a href="#patch-Directories" rel="prev" accesskey="p">修补程序目录</a> ，上一个： <a href="#Merging-with-patch" rel="up" accesskey="u">与修补程序合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Backup-Files"></a>
<h3 class="section">10.8备份文件</h3>
<a name="index-backup-file-strategy"></a>

<p>一般， <code>patch</code>如果修补程序与原始输入文件不完全匹配，则会创建一个备份文件，因为在这种情况下，如果您使用'撤消修补程序，则可能无法恢复原始数据<samp>patch -R</samp> '（请参阅<a href="#Reversed-Patches">反向补丁</a> ）。但是，当遵循POSIX时， <code>patch</code>默认情况下不创建备份文件。请参阅<a href="#patch-and-POSIX">patch和POSIX</a> 。</p>
<p>的<samp>--backup</samp> （ <samp>-b</samp> ）选项原因<code>patch</code>制作一个备份文件，而不管补丁是否与原始输入匹配。的<samp>--backup-if-mismatch</samp>选择原因<code>patch</code>为不匹配的文件创建备份文件；这是不符合POSIX时的默认设置。的<samp>--no-backup-if-mismatch</samp>选择原因<code>patch</code>即使补丁不匹配也不创建备份文件；这是符合POSIX时的默认设置。</p>
<p>备份不存在的文件时，将创建一个空的，不可读的备份文件作为占位符，以表示不存在的文件。
</p>
<hr>
<a name="Backup-Names"></a>
<div class="header">
<p>下一个： <a href="#Reject-Names" rel="next" accesskey="n">拒绝名称</a> ，上一个： <a href="#Backups" rel="prev" accesskey="p">备份</a> ，上一个： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Backup-File-Names"></a>
<h3 class="section">10.9备份文件名</h3>
<a name="index-backup-file-names"></a>

<p>一般， <code>patch</code>通过将扩展名'扩展到原始输入文件，将其重命名为备份文件。 <samp>.orig</samp> '， 要么 ' <samp>~</samp> '如果使用' <samp>.orig</samp> '会使备份文件名太长。 <a name="DOCF1" href="#FOOT1"><sup>1个</sup></a> <samp>-z <var>backup-suffix</var></samp>要么<samp>--suffix=<var>backup-suffix</var></samp>选择原因<code>patch</code>使用<var>backup-suffix</var>作为备用扩展名。
</p>
<a name="index-SIMPLE_005fBACKUP_005fSUFFIX"></a>
<p>或者，您可以使用<code>SIMPLE_BACKUP_SUFFIX</code>环境变量，选项将覆盖。
</p>
<p><code>patch</code>还可以像GNU Emacs一样创建编号的备份文件。使用这种方法，而不是每个文件都有一个备份， <code>patch</code>每次修补文件时都会创建一个新的备份文件名。例如，名为的文件的备份<samp>sink</samp>会被依次称为<samp>sink.~1~</samp> ， <samp>sink.~2~</samp> ， <samp>sink.~3~</samp>等</p>
<a name="index-PATCH_005fVERSION_005fCONTROL"></a>
<a name="index-VERSION_005fCONTROL-1"></a>
<p>的<samp>-V <var>backup-style</var></samp>要么<samp>--version-control=<var>backup-style</var></samp>选项将创建备份文件名的方法作为参数。您可以交替控制备份类型<code>patch</code>与<code>PATCH_VERSION_CONTROL</code>环境变量<samp>-V</samp>选项覆盖。如果<code>PATCH_VERSION_CONTROL</code>没有设置， <code>VERSION_CONTROL</code>而是使用环境变量。请注意，这些选项和变量控制备份文件的名称。它们不会影响版本控制系统的选择（请参阅“ <a href="#Revision-Control">版本控制”</a> ）。
</p>
<p>这些环境变量的值以及<samp>-V</samp>选项就像GNU Emacs <code>version-control</code>变量（有关<cite>Emacs中</cite>备份版本的更多信息，请参见<cite>《 GNU Emacs手册》</cite>中的<cite>“</cite> <a href="http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Backup-Names">备份名称</a> <cite>”</cite> ）。他们还识别出更具描述性的同义词。有效值如下所示；唯一的缩写是可以接受的。
</p>
<dl compact>
<dt><samp>t</samp></dt>
<dt><samp>numbered</samp></dt>
<dd><p>始终进行编号备份。
</p>
</dd>
<dt><samp>nil</samp></dt>
<dt><samp>existing</samp></dt>
<dd><p>对已有文件进行编号备份，对其他文件进行简单备份。这是默认值。
</p>
</dd>
<dt><samp>never</samp></dt>
<dt><samp>simple</samp></dt>
<dd><p>始终进行简单的备份。
</p></dd>
</dl>

<p>你也可以告诉<code>patch</code>前缀前缀（例如目录名）以生成备份文件名。的<samp>--prefix=<var>prefix</var></samp> （ <samp>-B <var>prefix</var></samp> ）选项通过添加前缀来制作备份文件<var>prefix</var>给他们。的<samp>--basename-prefix=<var>prefix</var></samp> （ <samp>-Y <var>prefix</var></samp> ）前置<var>prefix</var>改为备份文件名的最后一个文件名部分；例如， <samp>-Y ~</samp>导致备份名称为<samp>dir/file.c</samp>成为<samp>dir/~file.c</samp> 。如果使用这些前缀选项中的任何一个，则将忽略基于后缀的选项。
</p>
<p>如果您使用<samp>-o</samp>选项，该文件是要备份的文件，而不是输入文件。
</p>
<p>影响备份文件名称的选项不会影响是否进行备份。例如，如果您指定<samp>--no-backup-if-mismatch</samp>选项，本节中介绍的所有选项均不起作用，因为未进行任何备份。
</p>
<hr>
<a name="Reject-Names"></a>
<div class="header">
<p>下一个： <a href="#patch-Messages" rel="next" accesskey="n">修补程序消息</a> ，上一个： <a href="#Backup-Names" rel="prev" accesskey="p">备份名称</a> ，上一个： <a href="#Merging-with-patch" rel="up" accesskey="u">与修补程序合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Reject-File-Names"></a>
<h3 class="section">10.10拒绝文件名</h3>
<a name="index-reject-file-names"></a>

<p>拒绝文件的名称（包含修补程序的文件<code>patch</code>找不到申请的地方）通常是带有“ <samp>.rej</samp> '附加（或' <samp>#</samp> '如果使用' <samp>.rej</samp> '会使备份文件名过长）。
</p>
<p>或者，你可以告诉<code>patch</code>将所有被拒绝的补丁放在一个文件中。的<samp>-r <var>reject-file</var></samp>要么<samp>--reject-file=<var>reject-file</var></samp>选项使用<var>reject-file</var>作为拒绝文件名。
</p>
<hr>
<a name="patch-Messages"></a>
<div class="header">
<p>下一篇： <a href="#patch-and-POSIX" rel="next" accesskey="n">补丁和POSIX</a> ，上一篇： <a href="#Reject-Names" rel="prev" accesskey="p">拒绝名称</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Messages-and-Questions-from-patch"></a>
<h3 class="section">10.11来自以下人员的消息和问题<code>patch</code></h3>
<a name="index-patch-messages-and-questions"></a>
<a name="index-diagnostics-from-patch"></a>
<a name="index-messages-from-patch"></a>

<p><code>patch</code>可以产生各种消息，尤其是在解码输入内容时遇到问题时。在一些不确定如何进行的情况下， <code>patch</code>通常会提示您从键盘输入更多信息。有一些选项可产生或多或少的消息，不要求键盘输入以及影响消息中引用文件名的方式。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#More-or-Fewer-Messages" accesskey="1">更多或更少的消息</a> ：</td><td>  </td><td align="left" valign="top">控制...的详细程度<code>patch</code> 。
</td></tr>
<tr><td align="left" valign="top">• <a href="#patch-and-Keyboard-Input" accesskey="2">音色和键盘输入</a> ：</td><td>  </td><td align="left" valign="top">禁止键盘输入。
</td></tr>
<tr><td align="left" valign="top">• <a href="#patch-Quoting-Style" accesskey="3">补丁报价方式</a> ：</td><td>  </td><td align="left" valign="top">在诊断中引用文件名。
</td></tr>
</tbody></table>

<p><code>patch</code>如果成功应用了所有块，则退出，状态为0，如果不能应用某些块，则退出，状态为2，如果遇到更严重的麻烦，则退出状态2。在循环中应用一组修补程序时，应检查退出状态，因此不要将以后的修补程序应用于部分修补的文件。
</p>
<hr>
<a name="More-or-Fewer-Messages"></a>
<div class="header">
<p>下一页： <a href="#patch-and-Keyboard-Input" rel="next" accesskey="n">修补程序和键盘输入</a> ，向上： <a href="#patch-Messages" rel="up" accesskey="u">修补程序消息</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Controlling-the-Verbosity-of-patch"></a>
<h4 class="subsection">10.11.1控制...的详细程度<code>patch</code></h4>
<a name="index-verbose-messages-from-patch"></a>
<a name="index-inhibit-messages-from-patch"></a>

<p>你可以导致<code>patch</code>通过使用<samp>--verbose</samp>选项。例如，当您提供此选项时，消息“ <samp>Hmm...</samp> '表示<code>patch</code>正在读取补丁文件中的文本，试图确定该文本中是否有补丁，如果是，则确定它是哪种补丁。
</p>
<p>您可以禁止所有终端输出<code>patch</code> ，除非发生错误，否则请使用<samp>-s</samp> ， <samp>--quiet</samp> ， 要么<samp>--silent</samp>选项。
</p>
<hr>
<a name="patch-and-Keyboard-Input"></a>
<div class="header">
<p>下一个： <a href="#patch-Quoting-Style" rel="next" accesskey="n">修补程序引用样式</a> ，上一个： <a href="#More-or-Fewer-Messages" rel="prev" accesskey="p">消息更多或更少</a> ，上一个： <a href="#patch-Messages" rel="up" accesskey="u">修补程序消息</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Inhibiting-Keyboard-Input"></a>
<h4 class="subsection">10.11.2禁止键盘输入</h4>
<a name="index-keyboard-input-to-patch"></a>

<p>有两种方法可以防止<code>patch</code>从问你任何问题。的<samp>--force</samp> （ <samp>-f</samp> ）选项假设您知道自己在做什么。它导致<code>patch</code>执行以下操作：</p>
<ul>
<li>跳过标题中不包含文件名的补丁。

</li><li>即使文件的版本错误，也要对其进行补丁处理<samp>Prereq:</samp>补丁中的行；</li><li>假设补丁看起来像一样，也不会反转。
</li></ul>

<p>的<samp>--batch</samp> （ <samp>-t</samp> ）选项类似于<samp>-f</samp> ，它抑制了问题，但做出了一些不同的假设：</p>
<ul>
<li>跳过标头中不包含文件名的修补程序（与<samp>-f</samp> ）。

</li><li>跳过文件的版本与“ <samp>Prereq:</samp>补丁中的行；</li><li>假设补丁看起来像相反，则被颠倒了。
</li></ul>

<hr>
<a name="patch-Quoting-Style"></a>
<div class="header">
<p>上一页： <a href="#patch-and-Keyboard-Input" rel="prev" accesskey="p">修补程序和键盘输入</a> ，向上： <a href="#patch-Messages" rel="up" accesskey="u">修补程序消息</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="patch-Quoting-Style-1"></a>
<h4 class="subsection">10.11.3 <code>patch</code>报价方式</h4>
<a name="index-quoting-style"></a>

<p>什么时候<code>patch</code>在诊断消息中输出文件名，它可以通过几种方式中的任何一种来格式化文件名。这对于明确输出文件名很有用，即使它们包含标点符号或特殊字符（如换行符）。的<samp>--quoting-style=<var>word</var></samp>选项控制名称的输出方式。的<var>word</var>应该是以下之一：</p>
<dl compact>
<dt>' <samp>literal</samp> '</dt>
<dd><p>按原样输出名称。
</p></dd>
<dt>' <samp>shell</samp> '</dt>
<dd><p>如果外壳程序包含外壳程序元字符或会导致输出不明确，请引用外壳程序的名称。
</p></dd>
<dt>' <samp>shell-always</samp> '</dt>
<dd><p>引用外壳程序的名称，即使它们通常不需要引用也是如此。
</p></dd>
<dt>' <samp>c</samp> '</dt>
<dd><p>引用名称作为C语言字符串。
</p></dd>
<dt>' <samp>escape</samp> '</dt>
<dd><p>用'引用<samp>c</samp> '，但省略了双引号字符。
</p></dd>
</dl>

<a name="index-QUOTING_005fSTYLE"></a>
<p>您可以指定默认值<samp>--quoting-style</samp>环境变量的选项<code>QUOTING_STYLE</code> 。如果未设置该环境变量，则默认值为' <samp>shell</samp> '，但此默认值可能会在将来的版本中更改<code>patch</code> 。
</p>
<hr>
<a name="patch-and-POSIX"></a>
<div class="header">
<p>下一篇： <a href="#patch-and-Tradition" rel="next" accesskey="n">补丁和传统</a> ，上一篇： <a href="#patch-and-Tradition" rel="next" accesskey="n">补丁</a> <a href="#patch-Messages" rel="prev" accesskey="p">消息</a> ，上一篇： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="patch-and-the-POSIX-Standard"></a>
<h3 class="section">10.12 <code>patch</code>和POSIX标准</h3>
<a name="index-POSIX"></a>

<a name="index-POSIXLY_005fCORRECT"></a>
<p>如果您指定<samp>--posix</samp>选项，或设置<code>POSIXLY_CORRECT</code>环境变量<code>patch</code>更加严格地符合POSIX标准，如下所示：</p>
<ul>
<li>从diff标头读取文件名时，从列表中获取第一个现有文件（旧，新，索引）。请参阅<a href="#Multiple-Patches">多个修补程序</a> 。

</li><li>不要删除由差异删除的文件。请参阅<a href="#Creating-and-Removing">创建和删除</a> 。

</li><li>不要问是否从RCS，ClearCase或SCCS获取文件。请参阅<a href="#Revision-Control">版本控制</a> 。

</li><li>要求所有选项都在命令行中的文件之前。

</li><li>即使不匹配，也不要备份文件。请参阅<a href="#Backups">备份</a> 。

</li></ul>

<hr>
<a name="patch-and-Tradition"></a>
<div class="header">
<p>上一篇： <a href="#patch-and-POSIX" rel="prev" accesskey="p">补丁和POSIX</a> ，上<a href="#Merging-with-patch" rel="up" accesskey="u">一篇</a> ： <a href="#Merging-with-patch" rel="up" accesskey="u">与补丁合并</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="GNU-patch-and-Traditional-patch"></a>
<h3 class="section">10.13 GNU <code>patch</code>和传统<code>patch</code></h3>
<a name="index-traditional-patch"></a>

<p>当前版本的GNU <code>patch</code>通常遵循POSIX标准。有关此一般规则的一些例外，请参阅<a href="#patch-and-POSIX">patch和POSIX</a> 。
</p>
<p>不幸的是，POSIX重新定义了<code>patch</code>以几种重要方式。如果必须与传统版本进行互操作，则应注意以下区别<code>patch</code> ，或使用GNU <code>patch</code> 2.1版及更早版本。
</p>
<ul>
<li>在传统<code>patch</code> ， <samp>-p</samp>选项的操作数是可选的，并且没有<samp>-p</samp>相当于<samp>-p0</samp> 。的<samp>-p</samp>选项现在需要一个操作数，并且<samp>-p 0</samp>现在等于<samp>-p0</samp> 。为了获得最大的兼容性，请使用诸如<samp>-p0</samp>和<samp>-p1</samp> 。

<p>还有，传统<code>patch</code>剥离路径前缀时，仅计算斜杠； <code>patch</code>现在计算路径名组成部分。也就是说，一个或多个相邻斜杠的序列现在算作一个斜杠。为了获得最大的可移植性，请避免发送包含以下内容的补丁<samp>//</samp>在文件名中。
</p>
</li><li>在传统<code>patch</code> ，默认情况下启用了备份。现在可以使用<samp>--backup</samp> （ <samp>-b</samp> ） 选项。

<p>相反，在POSIX中<code>patch</code> ，即使存在不匹配，也永远不会进行备份。在GNU中<code>patch</code> ，此行为可通过<samp>--no-backup-if-mismatch</samp>选项，或遵循POSIX。</p>
<p>的<samp>-b <var>suffix</var></samp>传统选项<code>patch</code>等同于“ <samp>-b -z <var>suffix</var></samp> GNU的选项<code>patch</code> 。
</p>
</li><li>传统的<code>patch</code>使用了一种复杂的（且记录不完整）的方法来从修补程序标头中了解要修补的文件的名称。此方法不符合POSIX，并且有一些陷阱。现在<code>patch</code>使用不同的，同样复杂的（但有据可查的）方法，该方法可选地符合POSIX；我们希望它的陷阱更少。如果上下文差异标头中的文件名和' <samp>Index:</samp>前缀剥离后的所有行都相同。如果每个标头的文件名都包含相同数量的斜杠，则您的补丁通常是兼容的。

</li><li>传统时<code>patch</code>向用户询问了一个问题，它将问题发送到标准错误，并从以下列表的第一个文件中寻找了答案，该文件是终端：标准错误，标准输出， <samp>/dev/tty</samp>和标准输入。现在<code>patch</code>将问题发送到标准输出并从中获取答案<samp>/dev/tty</samp> 。某些答案的默认值已更改，因此<code>patch</code>使用默认答案时，永远不会陷入无限循环。

</li><li>传统的<code>patch</code>退出时会返回状态值，该值会计算坏作的数量；如果存在实际问题，则返回状态1。现在<code>patch</code>如果某些大块失败，则以状态1退出；如果存在真正的麻烦，则以状态2退出。

</li><li>发送要由运行GNU的任何人执行的指令时，请限制于以下选项<code>patch</code> ，传统<code>patch</code>或<code>patch</code>符合POSIX。在下面的列表中空格很重要，并且操作数是必需的。

<div class="example">
<pre class="example"><samp>-c</samp>
<samp>-d <var>dir</var></samp>
<samp>-D <var>define</var></samp>
<samp>-e</samp>
<samp>-l</samp>
<samp>-n</samp>
<samp>-N</samp>
<samp>-o <var>outfile</var></samp>
<samp>-p<var>num</var></samp>
<samp>-R</samp>
<samp>-r <var>rejectfile</var></samp>
</pre></div>

</li></ul>

<hr>
<a name="Making-Patches"></a>
<div class="header">
<p>下一篇： <a href="#Invoking-cmp" rel="next" accesskey="n">调用cmp</a> ，上一篇： <a href="#Merging-with-patch" rel="prev" accesskey="p">与补丁合并</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Tips-for-Making-and-Using-Patches"></a>
<h2 class="chapter">制作和使用补丁的11个技巧</h2>

<p>在制作和使用补丁时，请使用一些常识。例如，在向程序的维护者发送错误修复程序时，发送几个小补丁，每个独立主题一个，而不是一个覆盖所有主题的，难于理解的大补丁。
</p>
<p>如果要分发补丁程序以更新软件包，还应牢记其他一些事项。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Tips-for-Patch-Producers" accesskey="1">贴片生产者提示</a> ：</td><td>  </td><td align="left" valign="top">制作补丁的建议。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Tips-for-Patch-Consumers" accesskey="2">贴片消费者提示</a> ：</td><td>  </td><td align="left" valign="top">使用补丁的建议。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Avoiding-Common-Mistakes" accesskey="3">避免常见错误</a> ：</td><td>  </td><td align="left" valign="top">使用时避免常见错误<code>patch</code> 。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Generating-Smaller-Patches" accesskey="4">生成较小的补丁</a> ：</td><td>  </td><td align="left" valign="top">如何生成较小的补丁。
</td></tr>
</tbody></table>

<hr>
<a name="Tips-for-Patch-Producers"></a>
<div class="header">
<p>下一页： <a href="#Tips-for-Patch-Consumers" rel="next" accesskey="n">补丁消费者的窍门</a> ，上： <a href="#Making-Patches" rel="up" accesskey="u">制作补丁</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Tips-for-Patch-Producers-1"></a>
<h3 class="section">11.1贴片生产者提示</h3>
<a name="index-patch-producer-tips"></a>

<p>要创建将包的较旧版本更改为较新版本的修补程序，请首先在相邻子目录中制作较旧和较新版本的副本。通常通过拆包来做到这一点<code>tar</code>这两个版本的档案。
</p>
<p>要生成补丁，请使用命令' <samp>diff -Naur <var>old</var> <var>new</var></samp> '在哪里<var>old</var>和<var>new</var>识别新旧目录。名字<var>old</var>和<var>new</var>不应包含任何斜杠。的<samp>-N</samp>选项允许补丁创建和删除文件； <samp>-a</samp>让补丁更新非文本文件； <samp>-u</samp>生成有用的时间戳和足够的上下文；和<samp>-r</samp>让补丁更新子目录。这是使用Bourne shell语法的示例命令：</p>
<div class="example">
<pre class="example">diff -Naur gcc-3.0.3 gcc-3.0.4
</pre></div>

<p>告诉您的收件人如何应用补丁。这应该包括要使用的工作目录以及<code>patch</code>使用选项选项 ' <samp>-p1</samp> ' 被推荐。假装自己是收件人并将补丁程序应用于原始文件的副本，从而测试您的过程。
</p>
<p>有关如何避免生成补丁程序时的<a href="#Avoiding-Common-Mistakes">常见错误</a> ，请参见<a href="#Avoiding-Common-Mistakes">避免常见错误</a> 。
</p>
<hr>
<a name="Tips-for-Patch-Consumers"></a>
<div class="header">
<p>下一篇： <a href="#Avoiding-Common-Mistakes" rel="next" accesskey="n">避免常见的错误</a>上一篇： <a href="#Tips-for-Patch-Producers" rel="prev" accesskey="p">补丁生产者的技巧</a>上一篇： <a href="#Making-Patches" rel="up" accesskey="u">制作补丁</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Tips-for-Patch-Consumers-1"></a>
<h3 class="section">11.2贴片消费者提示</h3>
<a name="index-patch-consumer-tips"></a>

<p>补丁程序的生产者应告诉接收者如何应用补丁程序，因此，补丁程序使用者的第一个经验法则是遵循补丁程序随附的说明。
</p>
<p>GNU <code>diff</code>可以分析任意长行的文件和以不完整行结尾的文件。但是，旧版本的<code>patch</code>无法修补此类文件。如果您在应用此类修补程序时遇到问题，请尝试升级到最新版本的GNU <code>patch</code> 。
</p>
<hr>
<a name="Avoiding-Common-Mistakes"></a>
<div class="header">
<p>下一篇： <a href="#Generating-Smaller-Patches" rel="next" accesskey="n">生成较小的补丁</a> ，上一篇： <a href="#Tips-for-Patch-Consumers" rel="prev" accesskey="p">给补丁用户的提示</a>上一篇： <a href="#Making-Patches" rel="up" accesskey="u">制作补丁</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Avoiding-Common-Mistakes-1"></a>
<h3 class="section">11.3避免常见错误</h3>
<a name="index-common-mistakes-with-patches"></a>
<a name="index-patch_002c-common-mistakes"></a>

<p>为多个文件制作补丁时，请套用<code>diff</code>到名称没有斜杠的目录。当补丁使用者指定<samp>-p<var>number</var></samp>选项，因为当旧文件名和新文件名的斜杠数不同时，此选项会产生令人惊讶的结果。例如，不要发送带有以下标题的补丁：</p>
<div class="example">
<pre class="example">diff -Naur v2.0.29/prog/README prog/README
--- v2.0.29/prog/README	2002-03-10 23:30:39.942229878 -0800
+++ prog/README	2002-03-17 20:49:32.442260588 -0800
</pre></div>

<p>因为这两个文件名具有不同的斜杠数量和不同的版本<code>patch</code>不同地解释文件名。为避免混淆，请发送如下所示的输出：</p>
<div class="example">
<pre class="example">diff -Naur v2.0.29/prog/README v2.0.30/prog/README
--- v2.0.29/prog/README	2002-03-10 23:30:39.942229878 -0800
+++ v2.0.30/prog/README	2002-03-17 20:49:32.442260588 -0800
</pre></div>

<p>确保在上下文差异标题中或使用' <samp>Index:</samp> '行。注意不要发出反向补丁，因为这会使人们怀疑他们是否已经应用了补丁。
</p>
<p>避免发送比较备份文件名的补丁，例如<samp>README.orig</samp>要么<samp>README~</samp> ，因为这可能会造成混淆<code>patch</code>修补备份文件而不是实际文件。而是发送在不同目录中比较相同基本文件名的补丁，例如<samp>old/README</samp>和<samp>new/README</samp> 。
</p>
<p>为了使人们免于在其他补丁之前应该部分应用补丁，可以使补丁文件中的第一个补丁更新文件的名称如下<samp>patchlevel.h</samp>要么<samp>version.c</samp> ，其中包含补丁程序级别或版本号。如果输入文件包含错误的版本号， <code>patch</code>会立即抱怨。
</p>
<p>防止此问题的更清晰方法是将“ <samp>Prereq:</samp> '补丁之前的行。如果补丁文件中的前导文本包含以“ <samp>Prereq:</samp> '， <code>patch</code>从该行中获取下一个单词（通常是版本号），并检查下一个输入文件是否包含该单词，该单词的前面和后面是空格还是换行符。如果不， <code>patch</code>在继续之前提示您进行确认。这使得很难以错误的顺序意外地应用补丁。
</p>
<hr>
<a name="Generating-Smaller-Patches"></a>
<div class="header">
<p>上一页： <a href="#Avoiding-Common-Mistakes" rel="prev" accesskey="p">避免常见错误</a> ，向上： <a href="#Making-Patches" rel="up" accesskey="u">制作补丁</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Generating-Smaller-Patches-1"></a>
<h3 class="section">11.4生成较小的补丁</h3>
<a name="index-patches_002c-shrinking"></a>

<p>生成补丁的最简单方法是使用“ <samp>diff -Naur</samp> '（请参阅<a href="#Tips-for-Patch-Producers">补丁制作者提示</a> ），但是您可以在制作补丁之前通过重命名或删除一些文件来减小补丁的大小。如果软件包的旧版本包含新版本不包含的任何文件，或者在两个版本之间重命名了任何文件，请列出以下内容： <code>rm</code>和<code>mv</code>用户在应用补丁之前可以在旧版本目录中执行的命令。然后自己在草稿目录中运行这些命令。
</p>
<p>如果您不需要将任何文件包含在补丁中，因为可以轻松地从其他文件中重建它们（例如， <samp>TAGS</samp>和输出<code>yacc</code>和<code>makeinfo</code> ），通过给出<code>diff</code>的<samp>-x <var>pattern</var></samp>选项（请参阅<a href="#Comparing-Directories">比较目录</a> ）。如果由于收件人缺乏工具来构建补丁来修改派生文件，请确保派生文件的补丁遵循它依赖的文件的任何补丁，以使收件人的时间戳不会引起混淆<code>make</code> 。
</p>
<p>现在，您可以使用“ <samp>diff -Naur</samp> '。确保首先指定暂存目录，然后再指定较新的目录。
</p>
<p>在补丁顶部添加一条注释，告知用户任何<code>rm</code>和<code>mv</code>在应用补丁之前要运行的命令。然后，您可以删除临时目录。
</p>
<p>您也可以使用较少的上下文行来缩小补丁的大小，但请记住， <code>patch</code>当补丁与输入文件不完全匹配时，通常至少需要两行代码才能正常运行。
</p>
<hr>
<a name="Invoking-cmp"></a>
<div class="header">
<p>下一篇： <a href="#Invoking-diff" rel="next" accesskey="n">调用diff</a> ，上一篇： <a href="#Making-Patches" rel="prev" accesskey="p">制作补丁</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Invoking-cmp-1"></a>
<h2 class="chapter">12调用<code>cmp</code></h2>
<a name="index-invoking-cmp"></a>
<a name="index-cmp-invocation"></a>

<p>的<code>cmp</code>命令比较两个文件，如果它们不同，则告诉它们第一个字节和行号不同之处，或者报告一个文件是另一个文件的前缀。字节和行从1开始编号。的论点<code>cmp</code>如下面所述：</p>
<div class="example">
<pre class="example">cmp <var>options</var>&hellip; <var>from-file</var> <span class="roman">[</span><var>to-file</var> <span class="roman">[</span><var>from-skip</var> <span class="roman">[</span><var>to-skip</var><span class="roman">]</span><span class="roman">]</span><span class="roman">]</span>
</pre></div>

<p>档案名称<samp>-</samp>始终是标准输入。<code>cmp</code>如果省略了一个文件名，则也使用标准输入。的<var>from-skip</var>和<var>to-skip</var>操作数指定每个文件开头要忽略的字节数；它们相当于<samp>--ignore-initial=<var>from-skip</var>:<var>to-skip</var></samp>选项。
</p>
<p>默认， <code>cmp</code>如果两个文件的内容相同，则不输出任何内容。如果两个文件的字节不同， <code>cmp</code>将第一个差异的位置报告给标准输出：</p>
<div class="example">
<pre class="example"><var>from-file</var> <var>to-file</var> differ: char <var>byte-number</var>, line <var>line-number</var>
</pre></div>

<p>如果一个文件是另一个的前缀， <code>cmp</code>将较短文件的名称报告为标准错误，后跟空白和有关较短文件的其他信息：</p>
<div class="example">
<pre class="example">cmp: EOF on <var>shorter-file</var> <var>extra-info</var>
</pre></div>

<p>消息格式在POSIX语言环境之外可能有所不同。POSIX允许但不要求EOF诊断的文件名后跟空白和其他信息。
</p>
<p>退出状态0表示没有发现差异，1表示发现了一些差异，2表示有问题。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#cmp-Options" accesskey="1">cmp选项</a> ：</td><td>  </td><td align="left" valign="top">选项摘要<code>cmp</code> 。
</td></tr>
</tbody></table>

<hr>
<a name="cmp-Options"></a>
<div class="header">
<p>上： <a href="#Invoking-cmp" rel="up" accesskey="u">调用cmp</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Options-to-cmp"></a>
<h3 class="section">12.1的选项<code>cmp</code></h3>
<a name="index-cmp-options"></a>
<a name="index-options-for-cmp"></a>

<p>以下是GNU所有选项的摘要<code>cmp</code>接受。大多数选项都有两个等效的名称，其中一个是一个字母，后跟“ <samp>-</samp> '，另一个是以'为开头的长名<samp>--</samp> '。多个单字母选项（除非它们带有参数）可以组合成一个命令行词： <samp>-bl</samp>相当于<samp>-b -l</samp> 。
</p>
<dl compact>
<dt><samp>-b</samp></dt>
<dt><samp>--print-bytes</samp></dt>
<dd><p>打印不同的字节。将控制字节显示为“ <samp>^</samp> '，后跟一个字母，并在高位之前用' <samp>M-</samp> '（代表“元”）。
</p>
</dd>
<dt><samp>--help</samp></dt>
<dd><p>输出用法摘要，然后退出。
</p>
</dd>
<dt><samp>-i <var>skip</var></samp></dt>
<dt><samp>--ignore-initial=<var>skip</var></samp></dt>
<dd><p>首先忽略任何差异<var>skip</var>输入文件的字节数。处理少于<var>skip</var>个字节，好像它们为空。如果<var>skip</var>的形式<samp><var>from-skip</var>:<var>to-skip</var></samp> ，先跳过<var>from-skip</var>第一个输入文件和第一个输入文件的字节<var>to-skip</var>秒的字节。
</p>
</dd>
<dt><samp>-l</samp></dt>
<dt><samp>--verbose</samp></dt>
<dd><p>输出所有不同字节的（十进制）字节数和（八进制）值，而不是默认的标准输出。相对于输入的开始，每条输出行包含一个不同的字节号，后跟不同的字节值。字节数从1开始。另外，如果一个文件比另一个短，则输出EOF消息。
</p>
</dd>
<dt><samp>-n <var>count</var></samp></dt>
<dt><samp>--bytes=<var>count</var></samp></dt>
<dd><p>最多比较<var>count</var>输入字节。
</p>
</dd>
<dt><samp>-s</samp></dt>
<dt><samp>--quiet</samp></dt>
<dt><samp>--silent</samp></dt>
<dd><p>不要打印任何东西；仅返回表明文件是否不同的退出状态。
</p>
</dd>
<dt><samp>-v</samp></dt>
<dt><samp>--version</samp></dt>
<dd><p>输出版本信息，然后退出。
</p></dd>
</dl>

<p>在上表中，字节计数的操作数通常为十进制，但可以在前面加上' <samp>0</samp> '代表八进制，' <samp>0x</samp> '代表十六进制。
</p>
<p>字节计数后可以带有后缀以指定该计数的倍数；在这种情况下，省略的整数应理解为1。裸字，或者后跟一个' <samp>iB</samp> '，指定1024的使用倍数。大小写字母，后跟“ <samp>B</samp> '改为指定1000的幂。例如， <samp>-n 4M</samp>和<samp>-n 4MiB</samp>相当于<samp>-n 4194304</samp> ，而<samp>-n 4MB</samp>相当于<samp>-n 4000000</samp> 。该符号与十进制倍数的<a href="http://www.bipm.fr/enus/3_SI/si-prefixes.html">SI前缀</a>和<a href="http://physics.nist.gov/cuu/Units/binary.html">二进制倍数</a>的<a href="http://physics.nist.gov/cuu/Units/binary.html">IEC 60027-2前缀</a>向上兼容。
</p>
<p>定义了以下后缀。大尺寸像<code>1Y</code>由于其算术限制，可能会被您的计算机拒绝。
</p>
<dl compact>
<dt>' <samp>kB</samp> '</dt>
<dd><a name="index-kilobyte_002c-definition-of"></a>
<p>KB： <em>10 ^ 3 = 1000</em> 。
</p></dd>
<dt>' <samp>k</samp> '</dt>
<dt>' <samp>K</samp> '</dt>
<dt>' <samp>KiB</samp> '</dt>
<dd><a name="index-kibibyte_002c-definition-of"></a>
<p>千字节： <em>2 ^ 10 = 1024</em> 。 ' <samp>K</samp> '很特殊：SI前缀是' <samp>k</samp> '且IEC 60027-2前缀为' <samp>Ki</samp> '，但传统和POSIX使用' <samp>k</samp>意思是<samp>KiB</samp> '。
</p></dd>
<dt>' <samp>MB</samp> '</dt>
<dd><a name="index-megabyte_002c-definition-of"></a>
<p>兆字节： <em>10 ^ 6 = 1,000,000</em> 。
</p></dd>
<dt>' <samp>M</samp> '</dt>
<dt>' <samp>MiB</samp> '</dt>
<dd><a name="index-mebibyte_002c-definition-of"></a>
<p>兆字节： <em>2 ^ 20 = 1,048,576</em> 。
</p></dd>
<dt>' <samp>GB</samp> '</dt>
<dd><a name="index-gigabyte_002c-definition-of"></a>
<p>千兆字节： <em>10 ^ 9 = 1,000,000,000</em> 。
</p></dd>
<dt>' <samp>G</samp> '</dt>
<dt>' <samp>GiB</samp> '</dt>
<dd><a name="index-gibibyte_002c-definition-of"></a>
<p>吉字节： <em>2 ^ 30 = 1,073,741,824</em> 。
</p></dd>
<dt>' <samp>TB</samp> '</dt>
<dd><a name="index-terabyte_002c-definition-of"></a>
<p>兆字节： <em>10 ^ 12 = 1,000,000,000,000</em> 。
</p></dd>
<dt>' <samp>T</samp> '</dt>
<dt>' <samp>TiB</samp> '</dt>
<dd><a name="index-tebibyte_002c-definition-of"></a>
<p>tebibyte： <em>2 ^ 40 = 1,099,511,627,776</em> 。
</p></dd>
<dt>' <samp>PB</samp> '</dt>
<dd><a name="index-petabyte_002c-definition-of"></a>
<p>PB： <em>10 ^ 15 = 1,000,000,000,000,000</em> 。
</p></dd>
<dt>' <samp>P</samp> '</dt>
<dt>' <samp>PiB</samp> '</dt>
<dd><a name="index-pebibyte_002c-definition-of"></a>
<p>pebibyte： <em>2 ^ 50 = 1,125,899,906,842,624</em> 。
</p></dd>
<dt>' <samp>EB</samp> '</dt>
<dd><a name="index-exabyte_002c-definition-of"></a>
<p>艾字节： <em>10 ^ 18 = 1,000,000,000,000,000,000</em> 。
</p></dd>
<dt>' <samp>E</samp> '</dt>
<dt>' <samp>EiB</samp> '</dt>
<dd><a name="index-exbibyte_002c-definition-of"></a>
<p>exbibyte： <em>2 ^ 60 = 1,152,921,504,606,846,976</em> 。
</p></dd>
<dt>' <samp>ZB</samp> '</dt>
<dd><a name="index-zettabyte_002c-definition-of"></a>
<p>零字节： <em>10 ^ 21 = 1,000,000,000,000,000,000,000</em>
</p></dd>
<dt>' <samp>Z</samp> '</dt>
<dt>' <samp>ZiB</samp> '</dt>
<dd><p><em>2 ^ 70 = 1,180,591,620,717,411,303,424</em> 。（' <samp>Zi</samp>是对IEC 60027-2的GNU扩展。）
</p></dd>
<dt>' <samp>YB</samp> '</dt>
<dd><a name="index-yottabyte_002c-definition-of"></a>
<p>约字节： <em>10 ^ 24 = 1,000,000,000,000,000,000,000,000</em> 。
</p></dd>
<dt>' <samp>Y</samp> '</dt>
<dt>' <samp>YiB</samp> '</dt>
<dd><p><em>2 ^ 80 = 1,208,925,819,614,629,174,706,176</em> 。（' <samp>Yi</samp>是对IEC 60027-2的GNU扩展。）
</p></dd>
</dl>

<hr>
<a name="Invoking-diff"></a>
<div class="header">
<p>下一篇： <a href="#Invoking-diff3" rel="next" accesskey="n">调用diff3</a> ，上一篇： <a href="#Invoking-diff3" rel="next" accesskey="n">调用</a> <a href="#Invoking-cmp" rel="prev" accesskey="p">cmp</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Invoking-diff-1"></a>
<h2 class="chapter">13调用<code>diff</code></h2>
<a name="index-invoking-diff"></a>
<a name="index-diff-invocation"></a>

<p>用于运行的格式<code>diff</code>命令是：</p>
<div class="example">
<pre class="example">diff <var>options</var>&hellip; <var>files</var>&hellip;
</pre></div>

<p>在最简单的情况下，两个文件名<var>from-file</var>和<var>to-file</var>被给予，并且<code>diff</code>比较内容<var>from-file</var>和<var>to-file</var> 。文件名<samp>-</samp>代表标准输入。
</p>
<p>如果一个文件是目录，另一个文件不是目录， <code>diff</code>比较目录中名称与非目录名称相同的文件。非目录文件不得为<samp>-</samp> 。
</p>
<p>如果给出两个文件名，并且两个都是目录， <code>diff</code>按字母顺序比较两个目录中的相应文件；这种比较不是递归的，除非<samp>--recursive</samp> （ <samp>-r</samp> ）选项。 <code>diff</code>切勿将目录的实际内容像文件一样进行比较。完全指定的文件可能不是标准输入，因为标准输入是无名的，“同名文件”的概念不适用。
</p>
<p>如果<samp>--from-file=<var>file</var></samp>给定选项，文件名的数目是任意的，并且<var>file</var>与每个命名文件进行比较。同样，如果<samp>--to-file=<var>file</var></samp>给定选项，将每个命名文件与<var>file</var> 。
</p>
<p><code>diff</code>选项以“ <samp>-</samp> '，因此通常文件名不能以' <samp>-</samp> '。然而， <samp>--</samp>作为参数本身，会将其余参数视为文件名，即使它们以'开头<samp>-</samp> '。
</p>
<p>退出状态0表示没有发现差异，1表示发现了一些差异，2表示有问题。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#diff-Options" accesskey="1">diff选项</a> ：</td><td>  </td><td align="left" valign="top">选项摘要<code>diff</code> 。
</td></tr>
</tbody></table>

<hr>
<a name="diff-Options"></a>
<div class="header">
<p>上： <a href="#Invoking-diff" rel="up" accesskey="u">调用diff</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Options-to-diff"></a>
<h3 class="section">13.1的选项<code>diff</code></h3>
<a name="index-diff-options"></a>
<a name="index-options-for-diff"></a>

<p>以下是GNU所有选项的摘要<code>diff</code>接受。大多数选项都有两个等效的名称，其中一个是一个字母，后跟“ <samp>-</samp> '，另一个是以'为开头的长名<samp>--</samp> '。多个单字母选项（除非它们带有参数）可以组合成一个命令行词： <samp>-ac</samp>相当于<samp>-a -c</samp> 。长命名选项可以缩写为其名称的任何唯一前缀。方括号（[和]）表示选项带有可选参数。
</p>
<dl compact>
<dt><samp>-a</samp></dt>
<dt><samp>--text</samp></dt>
<dd><p>将所有文件视为文本，并逐行比较它们，即使它们似乎不是文本也是如此。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-b</samp></dt>
<dt><samp>--ignore-space-change</samp></dt>
<dd><p>忽略空白量的变化。参见<a href="#White-Space">空白</a> 。
</p>
</dd>
<dt><samp>-B</samp></dt>
<dt><samp>--ignore-blank-lines</samp></dt>
<dd><p>忽略仅插入或删除空白行的更改。请参阅<a href="#Blank-Lines">空行</a> 。
</p>
</dd>
<dt><samp>--binary</samp></dt>
<dd><p>以二进制模式读取和写入数据。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-c</samp></dt>
<dd><p>使用上下文输出格式，显示三行上下文。请参阅<a href="#Context-Format">上下文格式</a> 。
</p>
</dd>
<dt><samp>--color [=<var>when</var>]</samp></dt>
<dd><a name="index-color_002c-distinguishing-different-context"></a>
<p>指定是否使用颜色来区分不同的上下文，例如标题，添加或删除的行。 <var>when</var>可以省略，或以下之一：</p><ul>
<li>没有<a name="index-none-color-option"></a>完全不使用颜色。当未指定–color选项时，这是默认设置。
</li><li>汽车<a name="index-auto-color-option"></a><a name="index-terminal_002c-using-color-iff"></a>仅当标准输出为端子时才使用颜色。
</li><li>总是<a name="index-always-color-option"></a>始终使用颜色。
</li></ul>
<p>指定<samp>--color</samp>和不<var>when</var>相当于<samp>--color=auto</samp> 。
</p>
</dd>
<dt><samp>-C <var>lines</var></samp></dt>
<dt><samp>--context<span class="roman">[</span>=<var>lines</var><span class="roman">]</span></samp></dt>
<dd><p>使用上下文输出格式，显示<var>lines</var> （整数）行上下文，或者三行<var>lines</var>没有给出。请参阅<a href="#Context-Format">上下文格式</a> 。为了正确操作， <code>patch</code>通常需要至少两行上下文。
</p>
<p>为了兼容性<code>diff</code>还支持过时的选项语法<samp>-<var>lines</var></samp>当与<samp>-c</samp> ， <samp>-p</samp> ， 要么<samp>-u</samp> 。新脚本应使用<samp>-U <var>lines</var></samp> （ <samp>-C <var>lines</var></samp> ）。
</p>
</dd>
<dt><samp>--changed-group-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出包含两个文件中不同行的行组。请参见<a href="#Line-Group-Formats">线组格式</a> 。
</p>
</dd>
<dt><samp>-d</samp></dt>
<dt><samp>--minimal</samp></dt>
<dd><p>更改算法可能会找到较小的一组更改。这使得<code>diff</code>慢一些（有时慢很多）。请参阅<a href="#diff-Performance">差异性能</a> 。
</p>
</dd>
<dt><samp>-D <var>name</var></samp></dt>
<dt><samp>--ifdef=<var>name</var></samp></dt>
<dd><p>合并' <samp>#ifdef</samp> '格式输出，取决于预处理器宏<var>name</var> 。参见<a href="#If_002dthen_002delse">If-then-else</a> 。
</p>
</dd>
<dt><samp>-e</samp></dt>
<dt><samp>--ed</samp></dt>
<dd><p>使输出有效<code>ed</code>脚本。参见<a href="#ed-Scripts">ed脚本</a> 。
</p>
</dd>
<dt><samp>-E</samp></dt>
<dt><samp>--ignore-tab-expansion</samp></dt>
<dd><p>忽略由于制表符扩展引起的更改。参见<a href="#White-Space">空白</a> 。
</p>
</dd>
<dt><samp>-f</samp></dt>
<dt><samp>--forward-ed</samp></dt>
<dd><p>使输出看起来像模糊的<code>ed</code>脚本，但在文件中显示的顺序有所更改。请参阅<a href="#Forward-ed">转发版</a> 。
</p>
</dd>
<dt><samp>-F <var>regexp</var></samp></dt>
<dt><samp>--show-function-line=<var>regexp</var></samp></dt>
<dd><p>在上下文和统一格式下，对于每个大的差异，请显示与之匹配的最后一行<var>regexp</var> 。请参阅<a href="#Specified-Headings">指定标题</a> 。
</p>
</dd>
<dt><samp>--from-file=<var>file</var></samp></dt>
<dd><p>比较<var>file</var>每个操作数； <var>file</var>可能是目录。
</p>
</dd>
<dt><samp>--help</samp></dt>
<dd><p>输出用法摘要，然后退出。
</p>
</dd>
<dt><samp>--horizon-lines=<var>lines</var></samp></dt>
<dd><p>不要丢弃最后一个<var>lines</var>公共前缀和第一行的行<var>lines</var>常见后缀的行。请参阅<a href="#diff-Performance">差异性能</a> 。
</p>
</dd>
<dt><samp>-i</samp></dt>
<dt><samp>--ignore-case</samp></dt>
<dd><p>忽略更改情况；考虑大写和小写字母等效。请参阅<a href="#Case-Folding">案例折叠</a> 。
</p>
</dd>
<dt><samp>-I <var>regexp</var></samp></dt>
<dt><samp>--ignore-matching-lines=<var>regexp</var></samp></dt>
<dd><p>忽略仅插入或删除匹配行的更改<var>regexp</var> 。请参阅<a href="#Specified-Lines">指定的行</a> 。
</p>
</dd>
<dt><samp>--ignore-file-name-case</samp></dt>
<dd><p>比较文件名时忽略大小写。例如，递归比较<samp>d</samp>至<samp>e</samp>可能会比较以下内容<samp>d/Init</samp>和<samp>e/inIt</samp> 。在顶层， <samp>diff d inIt</samp> '可能会比较<samp>d/Init</samp>和<samp>inIt</samp> 。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>-l</samp></dt>
<dt><samp>--paginate</samp></dt>
<dd><p>通过输出<code>pr</code>分页。请参阅<a href="#Pagination">分页</a> 。
</p>
</dd>
<dt><samp>-L <var>label</var></samp></dt>
<dt><samp>--label=<var>label</var></samp></dt>
<dd><p>使用<var>label</var>而不是上下文格式（请参阅<a href="#Context-Format">Context Format</a> ）和统一格式（请参阅<a href="#Unified-Format">Unified Format</a> ）标头中的文件名。参见<a href="#RCS">RCS</a> 。</p>
</dd>
<dt><samp>--left-column</samp></dt>
<dd><p>以并排格式仅打印两条公共行的左列。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。
</p>
</dd>
<dt><samp>--line-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出所有输入行。请参见<a href="#Line-Formats">行格式</a> 。
</p>
</dd>
<dt><samp>-n</samp></dt>
<dt><samp>--rcs</samp></dt>
<dd><p>输出RCS格式的差异；喜欢<samp>-f</samp>除了每个命令指定受影响的行数以外。参见<a href="#RCS">RCS</a> 。</p>
</dd>
<dt><samp>-N</samp></dt>
<dt><samp>--new-file</samp></dt>
<dd><p>如果缺少一个文件，请将其视为存在但为空。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>--new-group-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出仅取自第二个文件的一组行。请参见<a href="#Line-Group-Formats">线组格式</a> 。
</p>
</dd>
<dt><samp>--new-line-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出仅取自第二个文件的一行。请参见<a href="#Line-Formats">行格式</a> 。
</p>
</dd>
<dt><samp>--no-dereference</samp></dt>
<dd><p>根据符号链接本身而不是它们所指向的内容进行操作。仅当每个符号链接都指向完全相同的名称时，才认为两个符号链接相等。
</p>
</dd>
<dt><samp>--old-group-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出仅取自第一个文件的一组行。请参见<a href="#Line-Group-Formats">线组格式</a> 。
</p>
</dd>
<dt><samp>--old-line-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出仅取自第一个文件的一行。请参见<a href="#Line-Formats">行格式</a> 。
</p>
</dd>
<dt><samp>-p</samp></dt>
<dt><samp>--show-c-function</samp></dt>
<dd><p>显示每个更改所在的C函数。请参见<a href="#C-Function-Headings">C函数标题</a> 。
</p>
</dd>
<dt><samp>--palette=<var>palette</var></samp></dt>
<dd><p>指定启用彩色输出时要使用的调色板。默认为“ <samp>rs=0:hd=1:ad=32:de=31:ln=36</samp> '表示红色删除的行，绿色添加的行，青色的行号，粗体标题。
</p>
<p>支持的功能如下。
</p>
<dl compact>
<dt><code>ad=32</code></dt>
<dd><a name="index-ad-capability"></a>

<p>添加行的SGR子字符串。默认值为绿色前景。
</p>
</dd>
<dt><code>de=31</code></dt>
<dd><a name="index-de-capability"></a>

<p>删除行的SGR子字符串。默认值为红色前景。
</p>
</dd>
<dt><code>hd=1</code></dt>
<dd><a name="index-hd-capability"></a>

<p>块标题的SGR子字符串。默认为粗体前景。
</p>
</dd>
<dt><code>ln=36</code></dt>
<dd><a name="index-ln-capability"></a>

<p>行号的SGR子字符串。默认值为青色前景。
</p></dd>
</dl>


</dd>
<dt><samp>-q</samp></dt>
<dt><samp>--brief</samp></dt>
<dd><p>仅报告文件是否不同，而不报告差异的详细信息。参见<a href="#Brief">摘要</a> 。
</p>
</dd>
<dt><samp>-r</samp></dt>
<dt><samp>--recursive</samp></dt>
<dd><p>比较目录时，以递归方式比较找到的所有子目录。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>-s</samp></dt>
<dt><samp>--report-identical-files</samp></dt>
<dd><p>当两个文件相同时报告。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>-S <var>file</var></samp></dt>
<dt><samp>--starting-file=<var>file</var></samp></dt>
<dd><p>比较目录时，以文件开头<var>file</var> 。这用于恢复中止的比较。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>--speed-large-files</samp></dt>
<dd><p>使用启发式方法可以加快处理具有大量分散的小更改的大文件。请参阅<a href="#diff-Performance">差异性能</a> 。
</p>
</dd>
<dt><samp>--strip-trailing-cr</samp></dt>
<dd><p>在输入行的末尾剥离所有回车。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>--suppress-common-lines</samp></dt>
<dd><p>不要以并排格式打印公共行。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。
</p>
</dd>
<dt><samp>-t</samp></dt>
<dt><samp>--expand-tabs</samp></dt>
<dd><p>将选项卡扩展到输出中的空格，以保留输入文件中选项卡的对齐方式。请参阅<a href="#Tabs">标签</a> 。
</p>
</dd>
<dt><samp>-T</samp></dt>
<dt><samp>--initial-tab</samp></dt>
<dd><p>以普通格式或上下文格式在行文本之前输出制表符而不是空格。这会使该行中的选项卡对齐看起来很正常。请参阅<a href="#Tabs">标签</a> 。
</p>
</dd>
<dt><samp>--tabsize=<var>columns</var></samp></dt>
<dd><p>假设在每个位置都设置了制表位<var>columns</var> （默认为8）打印列。请参阅<a href="#Tabs">标签</a> 。
</p>
</dd>
<dt><samp>--suppress-blank-empty</samp></dt>
<dd><p>当输出空行的表示形式，输出标准格式，上下文格式或统一格式时，请在换行符之前抑制所有空格。请参阅<a href="#Trailing-Blanks">尾随空白</a> 。
</p>
</dd>
<dt><samp>--to-file=<var>file</var></samp></dt>
<dd><p>比较每个操作数<var>file</var> ; <var>file</var>可能是目录。
</p>
</dd>
<dt><samp>-u</samp></dt>
<dd><p>使用统一的输出格式，显示三行上下文。请参阅<a href="#Unified-Format">统一格式</a> 。
</p>
</dd>
<dt><samp>--unchanged-group-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出从两个文件中提取的一组公共行。请参见<a href="#Line-Group-Formats">线组格式</a> 。
</p>
</dd>
<dt><samp>--unchanged-line-format=<var>format</var></samp></dt>
<dd><p>使用<var>format</var>以if-then-else格式输出两个文件共有的行。请参见<a href="#Line-Formats">行格式</a> 。
</p>
</dd>
<dt><samp>--unidirectional-new-file</samp></dt>
<dd><p>如果缺少第一个文件，请将其视为存在但为空。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>-U <var>lines</var></samp></dt>
<dt><samp>--unified<span class="roman">[</span>=<var>lines</var><span class="roman">]</span></samp></dt>
<dd><p>使用统一的输出格式，显示<var>lines</var> （整数）行上下文，或者三行<var>lines</var>没有给出。请参阅<a href="#Unified-Format">统一格式</a> 。为了正确操作， <code>patch</code>通常需要至少两行上下文。
</p>
<p>在较旧的系统上， <code>diff</code>支持过时的选项<samp>-<var>lines</var></samp>当与<samp>-u</samp> 。POSIX 1003.1-2001（请参阅<a href="#Standards-conformance">标准一致性</a> ）不允许这样做；使用<samp>-U <var>lines</var></samp>代替。
</p>
</dd>
<dt><samp>-v</samp></dt>
<dt><samp>--version</samp></dt>
<dd><p>输出版本信息，然后退出。
</p>
</dd>
<dt><samp>-w</samp></dt>
<dt><samp>--ignore-all-space</samp></dt>
<dd><p>比较线条时忽略空白。参见<a href="#White-Space">空白</a> 。
</p>
</dd>
<dt><samp>-W <var>columns</var></samp></dt>
<dt><samp>--width=<var>columns</var></samp></dt>
<dd><p>最多输出<var>columns</var> （默认为130）以每行并排格式打印每列。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。
</p>
</dd>
<dt><samp>-x <var>pattern</var></samp></dt>
<dt><samp>--exclude=<var>pattern</var></samp></dt>
<dd><p>比较目录时，请忽略基名匹配的文件和子目录<var>pattern</var> 。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>-X <var>file</var></samp></dt>
<dt><samp>--exclude-from=<var>file</var></samp></dt>
<dd><p>比较目录时，请忽略其基名与包含在其中的任何模式匹配的文件和子目录<var>file</var> 。请参阅<a href="#Comparing-Directories">比较目录</a> 。
</p>
</dd>
<dt><samp>-y</samp></dt>
<dt><samp>--side-by-side</samp></dt>
<dd><p>使用并排输出格式。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。
</p>
</dd>
<dt><samp>-Z</samp></dt>
<dt><samp>--ignore-trailing-space</samp></dt>
<dd><p>忽略行尾的空白。参见<a href="#White-Space">空白</a> 。
</p></dd>
</dl>

<hr>
<a name="Invoking-diff3"></a>
<div class="header">
<p>下一个： <a href="#Invoking-patch" rel="next" accesskey="n">调用补丁</a> ，上一个： <a href="#Invoking-diff" rel="prev" accesskey="p">调用diff</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Invoking-diff3-1"></a>
<h2 class="chapter">14调用<code>diff3</code></h2>
<a name="index-invoking-diff3"></a>
<a name="index-diff3-invocation"></a>

<p>的<code>diff3</code>该命令比较三个文件并输出它们差异的描述。其参数如下：</p>
<div class="example">
<pre class="example">diff3 <var>options</var>&hellip; <var>mine</var> <var>older</var> <var>yours</var>
</pre></div>

<p>要比较的文件是<var>mine</var> ， <var>older</var>和<var>yours</var> 。这三个文件名最多只能是<samp>-</samp> ，这说明<code>diff3</code>读取该文件的标准输入。
</p>
<p>退出状态为0表示<code>diff3</code>成功，1表示发现了一些冲突，2表示麻烦。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#diff3-Options" accesskey="1">diff3选项</a> ：</td><td>  </td><td align="left" valign="top">选项摘要<code>diff3</code> 。
</td></tr>
</tbody></table>

<hr>
<a name="diff3-Options"></a>
<div class="header">
<p>上： <a href="#Invoking-diff3" rel="up" accesskey="u">调用diff3</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Options-to-diff3"></a>
<h3 class="section">14.1的选项<code>diff3</code></h3>
<a name="index-diff3-options"></a>
<a name="index-options-for-diff3"></a>

<p>以下是GNU所有选项的摘要<code>diff3</code>接受。多个单字母选项（除非它们带有参数）可以组合成一个命令行参数。
</p>
<dl compact>
<dt><samp>-a</samp></dt>
<dt><samp>--text</samp></dt>
<dd><p>将所有文件视为文本，并逐行比较它们，即使它们看起来不是文本也是如此。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-A</samp></dt>
<dt><samp>--show-all</samp></dt>
<dd><p>合并所有来自<var>older</var>至<var>yours</var>进入<var>mine</var> ，围绕与方括号的冲突。请参阅<a href="#Marking-Conflicts">标记冲突</a> 。
</p>
</dd>
<dt><samp>--diff-program=<var>program</var></samp></dt>
<dd><p>使用兼容的比较程序<var>program</var>比较文件而不是<code>diff</code> 。
</p>
</dd>
<dt><samp>-e</samp></dt>
<dt><samp>--ed</samp></dt>
<dd><p>产生一个<code>ed</code>包含来自以下所有更改的脚本<var>older</var>至<var>yours</var>进入<var>mine</var> 。查看<a href="#Which-Changes">哪些更改</a> 。
</p>
</dd>
<dt><samp>-E</samp></dt>
<dt><samp>--show-overlap</samp></dt>
<dd><p>喜欢<samp>-e</samp> ，但重叠更改的第一个和第三个文件中的括号除外。请参阅<a href="#Marking-Conflicts">标记冲突</a> 。用<samp>-E</samp> ，重叠的更改如下所示：</p>
<div class="example">
<pre class="example">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <var>mine</var>
<span class="roman">lines from <var>mine</var></span>
=======
<span class="roman">lines from <var>yours</var></span>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; <var>yours</var>
</pre></div>

</dd>
<dt><samp>--help</samp></dt>
<dd><p>输出用法摘要，然后退出。
</p>
</dd>
<dt><samp>-i</samp></dt>
<dd><p>产生' <samp>w</samp> '和' <samp>q</samp> '命令的末尾<code>ed</code> System V兼容性的脚本。此选项必须与以下选项之一结合使用<samp>-AeExX3</samp>选项，并且可能无法与<samp>-m</samp> 。请参阅<a href="#Saving-the-Changed-File">保存更改的文件</a> 。
</p>
</dd>
<dt><samp>--label=<var>label</var></samp></dt>
<dd><p>使用标签<var>label</var>用于由<samp>-A</samp> ， <samp>-E</samp>和<samp>-X</samp>选项。该选项最多可以给出3次，每个输入文件一次。默认标签是输入文件的名称。因此， <samp>diff3 --label X --label Y --label Z -m A B C</samp> '像' <samp>diff3 -m A B C</samp> '，除了输出看起来像来自名为'的文件<samp>X</samp> '，' <samp>Y</samp> '和' <samp>Z</samp> '，而不是来自名为' <samp>A</samp> '，' <samp>B</samp> '和' <samp>C</samp> '。请参阅<a href="#Marking-Conflicts">标记冲突</a> 。
</p>
</dd>
<dt><samp>-m</samp></dt>
<dt><samp>--merge</samp></dt>
<dd><p>将编辑脚本应用于第一个文件，然后将结果发送到标准输出。与管道输出不同<code>diff3</code>至<code>ed</code> ，即使是二进制文件和不完整的行也可以使用。 <samp>-A</samp>如果未指定编辑脚本选项，则假定为。请参阅<a href="#Bypassing-ed">绕过ed</a> 。
</p>
</dd>
<dt><samp>--strip-trailing-cr</samp></dt>
<dd><p>在输入行的末尾剥离所有回车。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-T</samp></dt>
<dt><samp>--initial-tab</samp></dt>
<dd><p>在普通格式的行文本之前输出一个制表符，而不是两个空格。这会使该行中的选项卡对齐看起来很正常。请参阅<a href="#Tabs">标签</a> 。
</p>
</dd>
<dt><samp>-v</samp></dt>
<dt><samp>--version</samp></dt>
<dd><p>输出版本信息，然后退出。
</p>
</dd>
<dt><samp>-x</samp></dt>
<dt><samp>--overlap-only</samp></dt>
<dd><p>喜欢<samp>-e</samp> ，只输出重叠的更改。查看<a href="#Which-Changes">哪些更改</a> 。
</p>
</dd>
<dt><samp>-X</samp></dt>
<dd><p>喜欢<samp>-E</samp> ，只输出重叠的更改。换句话说，就像<samp>-x</samp> ，但括号更改如<samp>-E</samp> 。请参阅<a href="#Marking-Conflicts">标记冲突</a> 。
</p>
</dd>
<dt><samp>-3</samp></dt>
<dt><samp>--easy-only</samp></dt>
<dd><p>喜欢<samp>-e</samp> ，只输出不重叠的更改。查看<a href="#Which-Changes">哪些更改</a> 。
</p></dd>
</dl>

<hr>
<a name="Invoking-patch"></a>
<div class="header">
<p>下一篇： <a href="#Invoking-sdiff" rel="next" accesskey="n">调用sdiff</a> ，上一篇： <a href="#Invoking-sdiff" rel="next" accesskey="n">调用</a> <a href="#Invoking-diff3" rel="prev" accesskey="p">diff3</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Invoking-patch-1"></a>
<h2 class="chapter">15调用<code>patch</code></h2>
<a name="index-invoking-patch"></a>
<a name="index-patch-invocation"></a>

<p>一般<code>patch</code>像这样被调用：</p>
<div class="example">
<pre class="example">patch &lt;<var>patchfile</var>
</pre></div>

<p>完整的调用格式<code>patch</code>是：</p>
<div class="example">
<pre class="example">patch <var>options</var>&hellip; <span class="roman">[</span><var>origfile</var> <span class="roman">[</span><var>patchfile</var><span class="roman">]</span><span class="roman">]</span>
</pre></div>

<p>您还可以指定从何处读取补丁<samp>-i <var>patchfile</var></samp>要么<samp>--input=<var>patchfile</var></samp>选项。如果不指定<var>patchfile</var> ， 或者如果<var>patchfile</var>是<samp>-</samp> ， <code>patch</code>读取补丁（即<code>diff</code>输出）。
</p>
<p>如果您未在命令行上指定输入文件， <code>patch</code>尝试从<em>前导文本</em> （补丁中位于<code>diff</code>输出）要编辑的文件。请参阅<a href="#Multiple-Patches">多个修补程序</a> 。
</p>
<p>默认， <code>patch</code>将原始输入文件替换为修补版本，可能是在将原始文件重命名为备份文件之后（请参阅<a href="#Backup-Names">备份名称</a> ，以了解有关如何<code>patch</code>命名备份文件）。您还可以指定将输出放在哪里<samp>-o <var>file</var></samp>要么<samp>--output=<var>file</var></samp>选项;但是，如果以下情况不使用此选项<var>file</var>是输入文件之一。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#patch-Options" accesskey="1">补丁选项</a> ：</td><td>  </td><td align="left" valign="top">选项摘要表<code>patch</code> 。
</td></tr>
</tbody></table>

<hr>
<a name="patch-Options"></a>
<div class="header">
<p>上： <a href="#Invoking-patch" rel="up" accesskey="u">调用补丁</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Options-to-patch"></a>
<h3 class="section">15.1的选项<code>patch</code></h3>
<a name="index-patch-options"></a>
<a name="index-options-for-patch"></a>

<p>这是GNU所有选项的摘要<code>patch</code>接受。请参阅<a href="#patch-and-Tradition">patch和Tradition</a> ，有关这些选项中的哪个选项可以在较旧的版本中安全使用<code>patch</code> 。
</p>
<p>可以将不带参数的多个单字母选项组合成一个命令行参数（仅带有一个破折号）。
</p>
<dl compact>
<dt><samp>-b</samp></dt>
<dt><samp>--backup</samp></dt>
<dd><p>备份每个文件的原始内容，即使通常不进行备份也是如此。请参阅<a href="#Backups">备份</a> 。
</p>
</dd>
<dt><samp>-B <var>prefix</var></samp></dt>
<dt><samp>--prefix=<var>prefix</var></samp></dt>
<dd><p>前置<var>prefix</var>备份文件名。请参阅<a href="#Backup-Names">备份名称</a> 。
</p>
</dd>
<dt><samp>--backup-if-mismatch</samp></dt>
<dd><p>如果补丁与文件不完全匹配，请备份每个文件的原始内容。不符合POSIX时，这是默认行为。请参阅<a href="#Backups">备份</a> 。
</p>
</dd>
<dt><samp>--binary</samp></dt>
<dd><p>以二进制模式读取和写入所有文件，标准输出和<samp>/dev/tty</samp> 。此选项对符合POSIX的系统（如GNU / Linux）无效。在此选项有所不同的系统上，应使用“ <samp>diff -a --binary</samp> '。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-c</samp></dt>
<dt><samp>--context</samp></dt>
<dd><p>将补丁文件解释为上下文差异。请参阅<a href="#patch-Input">补丁输入</a> 。
</p>
</dd>
<dt><samp>-d <var>directory</var></samp></dt>
<dt><samp>--directory=<var>directory</var></samp></dt>
<dd><p>制作目录<var>directory</var>当前目录，用于解释补丁文件中的文件名以及作为其他选项的参数给出的文件名。请参阅<a href="#patch-Directories">补丁目录</a> 。
</p>
</dd>
<dt><samp>-D <var>name</var></samp></dt>
<dt><samp>--ifdef=<var>name</var></samp></dt>
<dd><p>使用合并后的if-then-else输出<var>name</var> 。参见<a href="#If_002dthen_002delse">If-then-else</a> 。
</p>
</dd>
<dt><samp>--dry-run</samp></dt>
<dd><p>打印应用补丁的结果，而无需实际更改任何文件。请参阅<a href="#Dry-Runs">空运行</a> 。
</p>
</dd>
<dt><samp>-e</samp></dt>
<dt><samp>--ed</samp></dt>
<dd><p>将补丁文件解释为<code>ed</code>脚本。请参阅<a href="#patch-Input">补丁输入</a> 。
</p>
</dd>
<dt><samp>-E</samp></dt>
<dt><samp>--remove-empty-files</samp></dt>
<dd><p>应用补丁后，请删除空白的输出文件。请参阅<a href="#Creating-and-Removing">创建和删除</a> 。
</p>
</dd>
<dt><samp>-f</samp></dt>
<dt><samp>--force</samp></dt>
<dd><p>假定用户确切知道他或她在做什么，并且不问任何问题。请参阅<a href="#patch-Messages">补丁消息</a> 。
</p>
</dd>
<dt><samp>-F <var>lines</var></samp></dt>
<dt><samp>--fuzz=<var>lines</var></samp></dt>
<dd><p>将最大模糊因子设置为<var>lines</var> 。参见<a href="#Inexact">不精确</a> 。
</p>
</dd>
<dt><samp>-g <var>num</var></samp></dt>
<dt><samp>--get=<var>num</var></samp></dt>
<dd><p>如果<var>num</var>是肯定的，必要时从版本控制系统获取输入文件；如果为零，则不获取文件；如果否，请询问用户是否获取文件。请参阅<a href="#Revision-Control">版本控制</a> 。
</p>
</dd>
<dt><samp>--help</samp></dt>
<dd><p>输出用法摘要，然后退出。
</p>
</dd>
<dt><samp>-i <var>patchfile</var></samp></dt>
<dt><samp>--input=<var>patchfile</var></samp></dt>
<dd><p>从阅读补丁<var>patchfile</var>而不是来自标准输入。请参阅<a href="#patch-Options">补丁选项</a> 。
</p>
</dd>
<dt><samp>-l</samp></dt>
<dt><samp>--ignore-white-space</samp></dt>
<dd><p>让补丁文件中的任何空白序列（空格或制表符）与输入文件中的任何空白序列匹配。请参阅<a href="#Changed-White-Space">更改的空白</a> 。
</p>
</dd>
<dt><samp>-n</samp></dt>
<dt><samp>--normal</samp></dt>
<dd><p>将补丁文件解释为普通差异。请参阅<a href="#patch-Input">补丁输入</a> 。
</p>
</dd>
<dt><samp>-N</samp></dt>
<dt><samp>--forward</samp></dt>
<dd><p>忽略那些补丁<code>patch</code>认为已被推翻或已经应用。也可以看看<samp>-R</samp> 。请参阅<a href="#Reversed-Patches">反向修补程序</a> 。
</p>
</dd>
<dt><samp>--no-backup-if-mismatch</samp></dt>
<dd><p>不要备份文件的原始内容。遵循POSIX时，这是默认行为。请参阅<a href="#Backups">备份</a> 。
</p>
</dd>
<dt><samp>-o <var>file</var></samp></dt>
<dt><samp>--output=<var>file</var></samp></dt>
<dd><p>使用<var>file</var>作为输出文件名。请参阅<a href="#patch-Options">补丁选项</a> 。
</p>
</dd>
<dt><samp>-p<var>number</var></samp></dt>
<dt><samp>--strip=<var>number</var></samp></dt>
<dd><p>将文件名条数设置为<var>number</var> 。请参阅<a href="#patch-Directories">补丁目录</a> 。
</p>
</dd>
<dt><samp>--posix</samp></dt>
<dd><p>符合POSIX，就像<code>POSIXLY_CORRECT</code>环境变量已设置。请参阅<a href="#patch-and-POSIX">patch和POSIX</a> 。</p>
</dd>
<dt><samp>--quoting-style=<var>word</var></samp></dt>
<dd><p>使用方式<var>word</var>在诊断程序中引用名称，就像<code>QUOTING_STYLE</code>环境变量已设置为<var>word</var> 。请参阅<a href="#patch-Quoting-Style">修补程序引用样式</a> 。
</p>
</dd>
<dt><samp>-r <var>reject-file</var></samp></dt>
<dt><samp>--reject-file=<var>reject-file</var></samp></dt>
<dd><p>使用<var>reject-file</var>作为拒绝文件名。请参阅<a href="#Reject-Names">拒绝名称</a> 。
</p>
</dd>
<dt><samp>-R</samp></dt>
<dt><samp>--reverse</samp></dt>
<dd><p>假定此修补程序是在交换旧文件和新文件的情况下创建的。请参阅<a href="#Reversed-Patches">反向修补程序</a> 。
</p>
</dd>
<dt><samp>-s</samp></dt>
<dt><samp>--quiet</samp></dt>
<dt><samp>--silent</samp></dt>
<dd><p>除非出现错误，否则请静默工作。请参阅<a href="#patch-Messages">补丁消息</a> 。
</p>
</dd>
<dt><samp>-t</samp></dt>
<dt><samp>--batch</samp></dt>
<dd><p>不要问任何问题。请参阅<a href="#patch-Messages">补丁消息</a> 。
</p>
</dd>
<dt><samp>-T</samp></dt>
<dt><samp>--set-time</samp></dt>
<dd><p>假设上下文差异头使用本地时间，请根据上下文差异头中给出的时间戳设置修补文件的修改和访问时间。请参阅<a href="#Patching-Timestamps">修补时间戳</a> 。
</p>
</dd>
<dt><samp>-u</samp></dt>
<dt><samp>--unified</samp></dt>
<dd><p>将补丁文件解释为统一的差异。请参阅<a href="#patch-Input">补丁输入</a> 。
</p>
</dd>
<dt><samp>-v</samp></dt>
<dt><samp>--version</samp></dt>
<dd><p>输出版本信息，然后退出。
</p>
</dd>
<dt><samp>-V <var>backup-style</var></samp></dt>
<dt><samp>--version=control=<var>backup-style</var></samp></dt>
<dd><p>选择备份文件名的命名约定。请参阅<a href="#Backup-Names">备份名称</a> 。
</p>
</dd>
<dt><samp>--verbose</samp></dt>
<dd><p>打印比平常更多的诊断。请参阅<a href="#patch-Messages">补丁消息</a> 。
</p>
</dd>
<dt><samp>-x <var>number</var></samp></dt>
<dt><samp>--debug=<var>number</var></samp></dt>
<dd><p>设置内部调试标志。仅对<code>patch</code>修补程序。
</p>
</dd>
<dt><samp>-Y <var>prefix</var></samp></dt>
<dt><samp>--basename-prefix=<var>prefix</var></samp></dt>
<dd><p>前置<var>prefix</var>以备份文件的名称为基础。请参阅<a href="#Backup-Names">备份名称</a> 。
</p>
</dd>
<dt><samp>-z <var>suffix</var></samp></dt>
<dt><samp>--suffix=<var>suffix</var></samp></dt>
<dd><p>使用<var>suffix</var>作为备用扩展名，而不是“ <samp>.orig</samp> ' 要么 ' <samp>~</samp> '。请参阅<a href="#Backup-Names">备份名称</a> 。
</p>
</dd>
<dt><samp>-Z</samp></dt>
<dt><samp>--set-utc</samp></dt>
<dd><p>假设上下文差异头使用UTC，请根据上下文差异头中给定的时间戳设置修补文件的修改和访问时间。请参阅<a href="#Patching-Timestamps">修补时间戳</a> 。
</p>
</dd>
</dl>

<hr>
<a name="Invoking-sdiff"></a>
<div class="header">
<p>下一篇： <a href="#Standards-conformance" rel="next" accesskey="n">标准符合性</a> ，上一篇： <a href="#Invoking-patch" rel="prev" accesskey="p">调用补丁</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Invoking-sdiff-1"></a>
<h2 class="chapter">16调用<code>sdiff</code></h2>
<a name="index-invoking-sdiff"></a>
<a name="index-sdiff-invocation"></a>

<p>的<code>sdiff</code>命令合并两个文件并以交互方式输出结果。其参数如下：</p>
<div class="example">
<pre class="example">sdiff -o <var>outfile</var> <var>options</var>&hellip; <var>from-file</var> <var>to-file</var>
</pre></div>

<p>这合并<var>from-file</var>与<var>to-file</var> ，输出到<var>outfile</var> 。如果<var>from-file</var>是一个目录，并且<var>to-file</var>不是， <code>sdiff</code>比较文件<var>from-file</var>其文件名是<var>to-file</var> ，反之亦然。 <var>from-file</var>和<var>to-file</var>可能不都是目录。
</p>
<p><code>sdiff</code>选项以“ <samp>-</samp> '，所以通常<var>from-file</var>和<var>to-file</var>可能不是以“ <samp>-</samp> '。然而， <samp>--</samp>作为参数本身，会将其余参数视为文件名，即使它们以'开头<samp>-</samp> '。您可能无法使用<samp>-</samp>作为输入文件。
</p>
<p><code>sdiff</code>没有<samp>--output</samp> （ <samp>-o</samp> ）产生并排的差异。这种用法已经过时了。使用<samp>--side-by-side</samp> （ <samp>-y</samp> ）选项<code>diff</code>代替。
</p>
<p>退出状态0表示没有发现差异，1表示发现了一些差异，2表示有问题。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#sdiff-Options" accesskey="1">sdiff选项</a> ：</td><td>  </td><td align="left" valign="top">选项摘要<code>diff</code> 。
</td></tr>
</tbody></table>

<hr>
<a name="sdiff-Options"></a>
<div class="header">
<p>上<a href="#Invoking-sdiff" rel="up" accesskey="u">一篇</a> ： <a href="#Invoking-sdiff" rel="up" accesskey="u">调用sdiff</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Options-to-sdiff"></a>
<h3 class="section">16.1的选项<code>sdiff</code></h3>
<a name="index-sdiff-options"></a>
<a name="index-options-for-sdiff"></a>

<p>以下是GNU所有选项的摘要<code>sdiff</code>接受。每个选项都有两个等效的名称，其中一个是一个字母，后跟“ <samp>-</samp> '，另一个是以'为开头的长名<samp>--</samp> '。多个单字母选项（除非它们带有参数）可以组合成一个命令行参数。长命名选项可以缩写为其名称的任何唯一前缀。
</p>
<dl compact>
<dt><samp>-a</samp></dt>
<dt><samp>--text</samp></dt>
<dd><p>将所有文件视为文本，并逐行比较它们，即使它们看起来不是文本也是如此。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-b</samp></dt>
<dt><samp>--ignore-space-change</samp></dt>
<dd><p>忽略空白量的变化。参见<a href="#White-Space">空白</a> 。
</p>
</dd>
<dt><samp>-B</samp></dt>
<dt><samp>--ignore-blank-lines</samp></dt>
<dd><p>忽略仅插入或删除空白行的更改。请参阅<a href="#Blank-Lines">空行</a> 。
</p>
</dd>
<dt><samp>-d</samp></dt>
<dt><samp>--minimal</samp></dt>
<dd><p>更改算法以查找较小的更改集。这使得<code>sdiff</code>慢一些（有时慢很多）。请参阅<a href="#diff-Performance">差异性能</a> 。
</p>
</dd>
<dt><samp>--diff-program=<var>program</var></samp></dt>
<dd><p>使用兼容的比较程序<var>program</var>比较文件而不是<code>diff</code> 。
</p>
</dd>
<dt><samp>-E</samp></dt>
<dt><samp>--ignore-tab-expansion</samp></dt>
<dd><p>忽略由于制表符扩展引起的更改。参见<a href="#White-Space">空白</a> 。
</p>
</dd>
<dt><samp>--help</samp></dt>
<dd><p>输出用法摘要，然后退出。
</p>
</dd>
<dt><samp>-i</samp></dt>
<dt><samp>--ignore-case</samp></dt>
<dd><p>忽略更改情况；考虑大写和小写相同。请参阅<a href="#Case-Folding">案例折叠</a> 。
</p>
</dd>
<dt><samp>-I <var>regexp</var></samp></dt>
<dt><samp>--ignore-matching-lines=<var>regexp</var></samp></dt>
<dd><p>忽略仅插入或删除匹配行的更改<var>regexp</var> 。请参阅<a href="#Specified-Lines">指定的行</a> 。
</p>
</dd>
<dt><samp>-l</samp></dt>
<dt><samp>--left-column</samp></dt>
<dd><p>仅打印两条常见行的左列。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。
</p>
</dd>
<dt><samp>-o <var>file</var></samp></dt>
<dt><samp>--output=<var>file</var></samp></dt>
<dd><p>将合并的输出放入<var>file</var> 。合并需要此选项。
</p>
</dd>
<dt><samp>-s</samp></dt>
<dt><samp>--suppress-common-lines</samp></dt>
<dd><p>不要打印公共行。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。
</p>
</dd>
<dt><samp>--speed-large-files</samp></dt>
<dd><p>使用启发式方法可以加快处理具有大量分散的小更改的大文件。请参阅<a href="#diff-Performance">差异性能</a> 。
</p>
</dd>
<dt><samp>--strip-trailing-cr</samp></dt>
<dd><p>在输入行的末尾剥离所有回车。参见<a href="#Binary">二进制</a> 。
</p>
</dd>
<dt><samp>-t</samp></dt>
<dt><samp>--expand-tabs</samp></dt>
<dd><p>将选项卡扩展到输出中的空格，以保留输入文件中选项卡的对齐方式。请参阅<a href="#Tabs">标签</a> 。
</p>
</dd>
<dt><samp>--tabsize=<var>columns</var></samp></dt>
<dd><p>假设在每个位置都设置了制表位<var>columns</var> （默认为8）打印列。请参阅<a href="#Tabs">标签</a> 。
</p>
</dd>
<dt><samp>-v</samp></dt>
<dt><samp>--version</samp></dt>
<dd><p>输出版本信息，然后退出。
</p>
</dd>
<dt><samp>-w <var>columns</var></samp></dt>
<dt><samp>--width=<var>columns</var></samp></dt>
<dd><p>最多输出<var>columns</var> （默认值为130）每行打印列。请参阅<a href="#Side-by-Side-Format">并排格式</a> 。请注意，由于历史原因，此选项是<samp>-W</samp>在<code>diff</code> ， <samp>-w</samp>在<code>sdiff</code> 。
</p>
</dd>
<dt><samp>-W</samp></dt>
<dt><samp>--ignore-all-space</samp></dt>
<dd><p>比较线条时忽略空白。参见<a href="#White-Space">空白</a> 。请注意，由于历史原因，此选项是<samp>-w</samp>在<code>diff</code> ， <samp>-W</samp>在<code>sdiff</code> 。
</p>
</dd>
<dt><samp>-Z</samp></dt>
<dt><samp>--ignore-trailing-space</samp></dt>
<dd><p>忽略行尾的空白。参见<a href="#White-Space">空白</a> 。
</p></dd>
</dl>

<hr>
<a name="Standards-conformance"></a>
<div class="header">
<p>下一个： <a href="#Projects" rel="next" accesskey="n">项目</a> ，上一个： <a href="#Invoking-sdiff" rel="prev" accesskey="p">调用sdiff</a> ，上一个： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Standards-conformance-1"></a>
<h2 class="chapter">17符合标准</h2>
<a name="index-POSIX-1"></a>

<a name="index-POSIXLY_005fCORRECT-1"></a>
<p>在某些情况下，GNU实用程序的默认行为与POSIX标准不兼容。为了抑制这些不兼容，请定义<code>POSIXLY_CORRECT</code>环境变量。除非您要检查POSIX一致性，否则可能不需要定义<code>POSIXLY_CORRECT</code> 。
</p>
<p>通常，选项和操作数可以以任何顺序出现，并且程序的作用就像所有选项都出现在任何操作数之前一样。例如， ' <samp>diff lao tzu -C 2</samp> '像' <samp>diff -C 2 lao tzu</samp> '，因为' <samp>2</samp> '是一个选项参数<samp>-C</samp> 。但是，如果<code>POSIXLY_CORRECT</code>设置了环境变量后，除非为特定命令另外指定，否则选项必须出现在操作数之前。
</p>
<p>较新版本的POSIX有时与较旧版本不兼容。例如，旧版本的POSIX允许使用命令“ <samp>diff -c -10</samp>与...具有相同的含义<samp>diff -C 10</samp> '，但POSIX 1003.1-2001' <samp>diff</samp> '不再允许使用数字字符串选项，例如<samp>-10</samp> 。
</p>
<a name="index-_005fPOSIX2_005fVERSION"></a>
<p>GNU实用程序通常符合系统标准的POSIX版本。为使它们符合其他版本的POSIX，请定义<code>_POSIX2_VERSION</code>环境变量为以下形式的值<var>yyyymm</var>指定采用该标准的年份和月份。当前支持两个值<code>_POSIX2_VERSION</code> ：' <samp>199209</samp> “代表POSIX 1003.2-1992，而' <samp>200112</samp>代表POSIX 1003.1-2001。例如，如果您运行的是假定POSIX较旧版本并使用“ <samp>diff -c -10</samp> '，您可以通过设置'解决兼容性问题<samp>_POSIX2_VERSION=199209</samp>在您的环境中。
</p>
<hr>
<a name="Projects"></a>
<div class="header">
<p>下一篇： <a href="#Copying-This-Manual" rel="next" accesskey="n">复制本手册</a> ，上一篇： <a href="#Standards-conformance" rel="prev" accesskey="p">符合标准</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Future-Projects"></a>
<h2 class="chapter">18个未来项目</h2>

<p>这是一些改进GNU的想法<code>diff</code>和<code>patch</code> 。GNU项目已经确定了一些改进，可以作为志愿者的潜在编程项目。您也可以通过报告发现的所有错误来提供帮助。
</p>
<p>如果您是一名程序员，并且想为GNU项目做点贡献，请考虑自愿参加这些项目之一。如果您正在认真考虑工作，请写信给<a href="mailto:gvc@gnu.org">gvc@gnu.org</a>与其他志愿者进行协调。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Shortcomings" accesskey="1">缺点</a> ：</td><td>  </td><td align="left" valign="top">建议的改进项目。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Bugs" accesskey="2">错误</a> ：</td><td>  </td><td align="left" valign="top">报告错误。
</td></tr>
</tbody></table>

<hr>
<a name="Shortcomings"></a>
<div class="header">
<p>下一页： <a href="#Bugs" rel="next" accesskey="n">错误</a> ，向上： <a href="#Projects" rel="up" accesskey="u">项目</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Suggested-Projects-for-Improving-GNU-diff-and-patch"></a>
<h3 class="section">18.1改进GNU的建议项目<code>diff</code>和<code>patch</code></h3>
<a name="index-projects-for-directories"></a>

<p>一个应该能够使用GNU <code>diff</code>从任何一对目录树生成补丁，并给出补丁和一个这样的树的副本，请使用<code>patch</code>产生另一个的忠实副本。不幸的是，无法使用当前的补丁格式来表达对目录树的某些更改。也， <code>patch</code>无法处理某些现有格式。这些缺点激发了以下建议的项目。
</p>
<table class="menu" border="0" cellspacing="0">
<tbody><tr><td align="left" valign="top">• <a href="#Internationalization" accesskey="1">国际化</a> ：</td><td>  </td><td align="left" valign="top">处理多字节和宽度可变的字符。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Changing-Structure" accesskey="2">不断变化的结构</a> ：</td><td>  </td><td align="left" valign="top">处理对目录结构的更改。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Special-Files" accesskey="3">特殊文件</a> ：</td><td>  </td><td align="left" valign="top">处理符号链接，设备专用文件等</td></tr>
<tr><td align="left" valign="top">• <a href="#Unusual-File-Names" accesskey="4">异常的文件名</a> ：</td><td>  </td><td align="left" valign="top">处理包含不寻常字符的文件名。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Timestamp-Order" accesskey="5">时间戳顺序</a> ：</td><td>  </td><td align="left" valign="top">按时间戳顺序输出差异。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Ignoring-Changes" accesskey="6">忽略更改</a> ：</td><td>  </td><td align="left" valign="top">在显示其他更改时忽略某些更改。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Speedups" accesskey="7">加速</a> ：</td><td>  </td><td align="left" valign="top">提高性能。
</td></tr>
</tbody></table>

<hr>
<a name="Internationalization"></a>
<div class="header">
<p>下一篇： <a href="#Changing-Structure" rel="next" accesskey="n">更改结构</a> ，上： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Handling-Multibyte-and-Varying_002dWidth-Characters"></a>
<h4 class="subsection">18.1.1处理多字节字符和可变宽度字符</h4>
<a name="index-multibyte-characters"></a>
<a name="index-varying_002dwidth-characters"></a>

<p><code>diff</code> ， <code>diff3</code>和<code>sdiff</code>将输入的每一行视为一串单字节字符。在某些情况下，这可能会错误处理多字节字符。例如，当要求忽略空格时， <code>diff</code>不能正确忽略多字节空格字符。
</p>
<p>也， <code>diff</code>当前假设每个字节都是一列宽，并且这种假设在某些语言环境中是不正确的，例如，使用UTF-8编码的语言环境。这会导致问题<samp>-y</samp>要么<samp>--side-by-side</samp>的选择<code>diff</code> 。
</p>
<p>需要解决这些问题，而又不会过度影响单字节环境中实用程序的性能。
</p>
<p>IBM GNU / Linux技术中心国际化团队提出了<a href="http://oss.software.ibm.com/developer/opensource/linux/patches/i18n/diffutils-2.7.2-i18n-0.1.patch.gz">补丁程序来支持国际化<code>diff</code></a> 。不幸的是，这些补丁不完整，并且是针对较旧版本的<code>diff</code> ，因此在此领域需要做更多的工作。
</p>
<hr>
<a name="Changing-Structure"></a>
<div class="header">
<p>下一篇： <a href="#Special-Files" rel="next" accesskey="n">特殊文件</a> ，上一篇： <a href="#Internationalization" rel="prev" accesskey="p">国际化</a> ，上一篇： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Handling-Changes-to-the-Directory-Structure"></a>
<h4 class="subsection">18.1.2处理对目录结构的更改</h4>
<a name="index-directory-structure-changes"></a>

<p><code>diff</code>和<code>patch</code>不处理目录结构的某些更改。例如，假设一个目录树包含一个名为“ <samp>D</samp> '包含一些辅助文件，另一个包含相同名称的文件' <samp>D</samp> '。 ' <samp>diff -r</samp> '没有为<code>patch</code>将目录子树转换为文件。
</p>
<p>应该有一种方法可以指定文件已被删除，而不必将其全部内容包括在补丁文件中。还应该有一种方法可以告诉<code>patch</code>即使没有办法将文件重命名<code>diff</code>生成此类信息。应该有一种方法可以告诉<code>patch</code>即使文件内容未更改，文件的时间戳也已更改。
</p>
<p>这些问题可以通过扩展<code>diff</code>输出格式表示目录结构的更改，并扩展<code>patch</code>了解这些扩展。
</p>
<hr>
<a name="Special-Files"></a>
<div class="header">
<p>下一个： <a href="#Unusual-File-Names" rel="next" accesskey="n">异常的文件名</a> ，上一个： <a href="#Changing-Structure" rel="prev" accesskey="p">更改结构</a> ，上： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Files-that-are-Neither-Directories-Nor-Regular-Files"></a>
<h4 class="subsection">18.1.3既不是目录也不是常规文件的文件</h4>
<a name="index-special-files"></a>

<p>有些文件既不是目录也不是常规文件：它们是不寻常的文件，例如符号链接，设备专用文件，命名管道和套接字。目前， <code>diff</code>将符号链接视为指向文件的文件，除了递归<code>diff</code>如果检测到符号链接的无限循环（例如，指向的符号链接），则会报告错误<samp>..</samp> ）。 <code>diff</code>如果在顶层指定了其他特殊文件，则将它们视为常规文件，但是在比较目录时仅报告它们的存在。这意味着<code>patch</code>无法代表对此类文件的更改。例如，如果您更改符号链接指向的文件， <code>diff</code>输出两个文件之间的差异，而不是更改符号链接。
</p>
<p><code>diff</code>应该有选择地专门报告对特殊文件的更改，并且<code>patch</code>应该扩展以了解这些扩展。
</p>
<hr>
<a name="Unusual-File-Names"></a>
<div class="header">
<p>下一个： <a href="#Timestamp-Order" rel="next" accesskey="n">时间戳顺序</a> ，上一个： <a href="#Special-Files" rel="prev" accesskey="p">特殊文件</a> ，上： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="File-Names-that-Contain-Unusual-Characters"></a>
<h4 class="subsection">18.1.4包含异常字符的文件名</h4>
<a name="index-file-names-with-unusual-characters"></a>

<p>当文件名包含不寻常的字符（例如换行符或空格）时，“ <samp>diff -r</samp> '产生了一个补丁<code>patch</code>无法解析。问题是格式<code>diff</code>输出，而不仅仅是<code>patch</code> ，因为文件名奇数可能导致<code>diff</code>生成语法正确的补丁程序，但修补错误的文件。格式<code>diff</code>应该扩展输出以处理所有可能的文件名。
</p>
<hr>
<a name="Timestamp-Order"></a>
<div class="header">
<p>下一个： <a href="#Ignoring-Changes" rel="next" accesskey="n">忽略更改</a> ，上一个： <a href="#Unusual-File-Names" rel="prev" accesskey="p">异常的文件名</a> ，上： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Outputting-Diffs-in-Timestamp-Order"></a>
<h4 class="subsection">18.1.5按时间戳顺序输出差异</h4>

<p>正在申请<code>patch</code>多文件差异可能会导致其时间戳不正确的文件。GNU <code>patch</code>具有恢复已更新文件的时间戳的选项（请参阅<a href="#Patching-Timestamps">Patching Timestamps</a> ），但是有时生成一个即使在收件人没有GNU补丁或不使用这些选项的情况下也可以工作的补丁很有用。一种实现方法是实施<code>diff</code>选项以时间戳顺序输出差异。
</p>
<hr>
<a name="Ignoring-Changes"></a>
<div class="header">
<p>下一个： <a href="#Speedups" rel="next" accesskey="n">加速</a> ，上一个： <a href="#Timestamp-Order" rel="prev" accesskey="p">时间戳顺序</a> ，上： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Ignoring-Certain-Changes"></a>
<h4 class="subsection">18.1.6忽略某些更改</h4>

<p>有一个功能可以指定两个字符串，一个在<var>from-file</var>还有一个<var>to-file</var> ，应视为相符。因此，如果两个字符串是“ <samp>foo</samp> '和' <samp>bar</samp> '，那么如果只有两行不同之处在于' <samp>foo</samp>文件1中的'对应于' <samp>bar</samp>在文件2中，这些行被视为相同。
</p>
<p>目前尚不清楚此功能的通用性或应该使用的语法。
</p>
<p>部分替代方法是在比较之前过滤一个或两个文件，例如：</p>
<div class="example">
<pre class="example">sed 's/foo/bar/g' file1 | diff - file2
</pre></div>

<p>但是，这将输出过滤后的文本，而不是原始文本。
</p>
<hr>
<a name="Speedups"></a>
<div class="header">
<p>上一页： <a href="#Ignoring-Changes" rel="prev" accesskey="p">忽略更改</a> ，向上： <a href="#Shortcomings" rel="up" accesskey="u">缺点</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Improving-Performance"></a>
<h4 class="subsection">18.1.7提高性能</h4>

<p>比较两个大型目录结构时，其中一个最初是从另一个复制的，保留了时间戳（例如，带有' <samp>cp -pR</samp> '），如果有一个选项告诉您，它将大大提高性能<code>diff</code>假定具有相同大小和时间戳的两个文件具有相同的内容。请参阅<a href="#diff-Performance">差异性能</a> 。
</p>
<hr>
<a name="Bugs"></a>
<div class="header">
<p>上<a href="#Shortcomings" rel="prev" accesskey="p">一篇</a> ： <a href="#Shortcomings" rel="prev" accesskey="p">缺点</a> ，上<a href="#Shortcomings" rel="prev" accesskey="p">一篇</a> ： <a href="#Projects" rel="up" accesskey="u">项目</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Reporting-Bugs"></a>
<h3 class="section">18.2报告错误</h3>
<a name="index-bug-reports"></a>
<a name="index-reporting-bugs"></a>

<p>如果您认为自己在GNU中发现了一个错误<code>cmp</code> ， <code>diff</code> ， <code>diff3</code> ， 要么<code>sdiff</code> ，请通过电子邮件将其<a href="http://mail.gnu.org/mailman/listinfo/bug-diffutils">报告</a>给<a href="http://mail.gnu.org/mailman/listinfo/bug-diffutils">GNU实用程序错误报告邮件列表</a> <a href="mailto:bug-diffutils@gnu.org">bug-diffutils@gnu.org</a> 。请发送有关GNU的错误报告<code>patch</code>到<a href="mailto:bug-patch@gnu.org">bug-patch@gnu.org</a> 。尽可能精确地发送问题描述，包括输出<samp>--version</samp>选项和产生错误的示例输入文件（如果适用）。如果您对该错误有重要的修正，请同时发送。如果您有补丁，也请发送。如果该修补程序与最近的测试版本有关，则可以简化维护人员的工作，您可以在目录<a href="ftp://alpha.gnu.org/gnu/diffutils/">ftp://alpha.gnu.org/gnu/diffutils/中</a>找到该补丁程序。</p>
<hr>
<a name="Copying-This-Manual"></a>
<div class="header">
<p>下一篇： <a href="#Translations" rel="next" accesskey="n">翻译</a> ，上一篇： <a href="#Projects" rel="prev" accesskey="p">项目</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Copying-This-Manual-1"></a>
<h2 class="appendix">附录A复制本手册</h2>
<div align="center">1.3版，2008年11月3日</div>

<div class="display">
<pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="http://fsf.org/">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol>
<li>前言<p>本许可的目的是免费提供手册，教科书或其他实用且有用的文档： <em>自由</em> ，以确保每个人都有有效的自由，无论是否进行商业或非商业修改，都可以对其进行复制和重新分发。其次，本许可证为作者和出版商保留了一种因其作品而获得好评的方式，同时不被视为对他人所做的修改负责。
</p>
<p>该许可是一种“版权所有”，这意味着该文档的衍生作品本身必须在相同意义上是免费的。它是GNU通用公共许可证的补充，GNU通用公共许可证是专为自由软件设计的Copyleft许可证。
</p>
<p>我们设计此许可证是为了将其用于免费软件的手册，因为免费软件需要免费的文档：免费程序应随附手册，以提供与软件相同的自由。但是本许可不限于软件手册；它可以用于任何文本作品，而无论其主题是什么，或者它是否作为印刷书籍出版。我们建议您将此许可证主要用于目的是作为指导或参考的作品。
</p>
</li><li>适用性和定义<p>本许可适用于任何形式的任何手册或其他作品，其中包含版权所有者发布的声明，声明其可以根据本许可的条款进行分发。此类通知授予了全球范围内的免版税使用许可，期限不限，可以在此处所述的条件下使用该作品。下面的“文档”是指任何此类手册或作品。任何公众人士都是被许可人，称呼为“您”。如果您按照版权法要求许可的方式复制，修改或分发作品，则您接受许可。
</p>
<p>文档的“修改版本”是指包含文档或文档一部分的任何作品，无论是逐字复制还是经过修改和/或翻译成另一种语言。
</p>
<p>“第二部分”是本文档的命名附录或最重要的部分，专门处理本文档的出版者或作者与本文档的整体主题（或相关事宜）之间的关系，不包含任何可能直接涉及的内容。在整个主题范围内。（因此，如果该文档部分是一本数学教科书，那么第二部分可能不会解释任何数学。）这种关系可以是与主题或相关问题的历史联系，也可以是关于它们的法律，商业，哲学，伦理或政治立场。
</p>
<p>“不变部分”是某些二级部分，在其声明中指出，该文件的标题与不变部分的标题相同，即该文件是根据本许可发布的。如果某个部分不符合上面对“辅助”的定义，则不允许将其指定为“不变式”。该文档可能包含零个不变部分。如果文档未标识任何不变节，则没有任何不变节。
</p>
<p>“封面文字”是某些简短的文本段落，在声明中指出该文档是根据本许可发布的，这些文字作为“封面文字”或“封面文字”列出。“封面文本”最多可以包含5个字，“封面文本”最多可以包含25个字。
</p>
<p>文档的“透明”副本是指一种机器可读的副本，以其规格可供大众使用的格式表示，适用于使用通用文本编辑器或（对于由像素组成的图像）通用颜料进行直接修改的文档程序或（用于绘图的）一些广泛使用的绘图编辑器，并且适合于输入文本格式化程序或自动转换为适合输入到文本格式化程序的多种格式。以其他方式透明的文件格式制作的副本，其标记或没有标记的安排，可以阻止或阻止读者的后续修改，则该副本不是透明的。如果用于大量文本，则图像格式不是“透明”的。非“透明”的副本称为“不透明”。
</p>
<p>适用于透明副本的格式的示例包括不带标记的纯ASCII，Texinfo输入格式，LaTeX输入格式，使用公开可用的DTD的SGML或XML，以及设计用于人工修改的符合标准的简单HTML，PostScript或PDF。透明图像格式的示例包括PNG，XCF和JPG。不透明格式包括只能由专有文字处理器，SGML或XML读取和编辑的专有格式，而SGML或XML通常不提供DTD和/或处理工具，以及某些文字处理器为某些文字处理器生成的机器生成的HTML，PostScript或PDF仅用于输出目的。
</p>
<p>“标题页”对于印刷书籍而言，是指标题页本身，以及以下用于保持本许可证要求在标题页中显示的材料的以下页面。对于没有此类标题页的格式的作品，“标题页”是指在文本正文开头之前，靠近作品标题最突出外观的文本。
</p>
<p>“发布者”是指向公众分发文档副本的任何个人或实体。
</p>
<p>“标题为XYZ”一节是指文档的命名子单元，其标题恰好是XYZ或在括号中包含XYZ的文字，后面是将XYZ转换为另一种语言的文字。（此处XYZ代表以下提到的特定部分名称，例如“致谢”，“奉献”，“认可”或“历史记录”。）在修改文档时，要“保留此部分的标题”，则意味着根据此定义，该部分仍为“已命名的XYZ”部分。
</p>
<p>该文件的声明旁边可能包含“免责声明”，该声明指出本许可适用于该文件。这些保修免责声明被视为已包含在本许可中，但仅用于免责声明：这些保修免责声明可能具有的任何其他暗示都是无效的，并且对本许可的含义没有任何影响。
</p>
</li><li>VERBATIM复制<p>您可以在任何媒介中以商业或非商业方式复制和分发本文档，但前提是本许可，版权声明和声明本许可适用于本文档的许可声明均以所有副本形式复制，并且您不添加任何其他条件符合本许可的规定。您不得使用技术措施来阻碍或控制您复制或分发的副本的阅读或进一步复制。但是，您可以接受赔偿以换取副本。如果分发足够多的副本，则还必须遵循第3节中的条件。
</p>
<p>您还可以在上述相同条件下出借副本，并可以公开展示副本。
</p>
</li><li>大量复制<p>如果您发布文档的印刷副本（或通常具有印刷封面的介质副本），且编号超过100，并且文档的许可通知书要求包含封面文字，则必须将这些副本随附在清晰可见的所有文档中封面文字：封面上的封面文字和封底上的封面文字。两种封面都必须清楚，清楚地标识您是这些副本的发行者。封面必须显示完整的标题，标题中的所有单词均应同样醒目且可见。您还可以在封面上添加其他材料。只要封面保留了文档标题并满足这些条件，则仅对封面进行更改即可在其他方面被视为逐字复印。
</p>
<p>如果任何一个封面所需的文本量太大，无法清晰地容纳，则应将列出的第一个（合理合理的数量）放在实际的封面上，然后将其余部分继续放在相邻的页面上。
</p>
<p>如果您发布或分发的Opaque文档副本数量超过100，则必须在每份Opaque副本中包含机器可读的透明副本，或者在每份Opaque副本中或其中声明一个计算机网络位置，通用网络将从该位置开始使用public可以使用公共标准网络协议下载完整的文档透明副本，而无需添加任何材料。如果使用后一种选项，则在开始批量分发不透明副本时，必须采取合理的审慎步骤，以确保该透明副本将在指定位置保持可访问的状态，直到您上一次分发不透明副本至少一年之后。该版本的不透明副本（直接或通过您的代理商或零售商）向公众发布。
</p>
<p>要求（但不是必须）在重新分发大量副本之前，与文档作者保持良好联系，以便他们有机会为您提供文档的更新版本。
</p>
</li><li>修改方式<p>您可以在上述第2节和第3节的条件下复制和分发本文档的修改版本，前提是您严格按照本许可协议发布修改版本，而修改版本则充当文档的角色，从而许可对本文档的分发和修改拥有副本的修改版本。此外，您必须在修改后的版本中执行以下操作：</p>
<ol>
<li>在标题页（和封面，如果有的话）中使用与本文档以及先前版本（如果有的话，应在文档的“历史记录”部分中列出）不同的标题。如果该版本的原始发行者给予许可，则可以使用与先前版本相同的标题。

</li><li>在标题页上列出作者，一个或多个负责修改版本著作权的作者或实体，以及至少五名文档的主要作者（所有主要作者，如果少于五），除非他们使您脱离此要求。

</li><li>在“标题”页面上声明修改版本的发布者的名称，作为发布者。

</li><li>保留文档的所有版权声明。

</li><li>在其他版权声明旁边添加用于修改的适当版权声明。

</li><li>在版权声明之后，立即包含一个许可声明，以下面的附录中所示的形式，向公众授予根据本许可条款使用修改版的许可。

</li><li>在该许可证声明中保留不可变部分的完整列表以及文档的许可证声明中提供的必需封面文字。

</li><li>随附本许可证的未更改副本。

</li><li>保留标题为“历史”的部分，保留其标题，并在其上添加至少说明标题页上给出的修改版本的标题，年份，新作者和发行者的项目。如果文档中没有标题为“历史记录”的部分，请在其标题页上创建一个说明文档的标题，年份，作者和出版者的内容，然后添加一项描述上一句中所述的修改版本。

</li><li>保留文档中给出的网络位置（如果有），以供公众访问文档的透明副本，同样，保留文档中给出的基于其以前版本的网络位置。这些可以放在“历史记录”部分中。对于在文档本身之前至少四年出版的作品，或者如果其所指版本的原始发行者给予许可，您可以省略其网络位置。

</li><li>对于标题为“致谢”或“奉献”的任何部分，请保留本部分的标题，并在本部分中保留其中给出的每个贡献者致谢和/或奉献的所有内容和基调。

</li><li>保留文档的所有不变部分，其文本和标题保持不变。章节编号或同等编号不视为章节标题的一部分。

</li><li>删除任何标题为“背书”的部分。这样的部分可能不包含在修改版本中。

</li><li>请勿将任何现有部分的标题重命名为“背书”，或与任何不变部分的标题冲突。

</li><li>保留所有保修免责声明。
</li></ol>

<p>如果修改后的版本包括新的前节或附录，这些节或附录符合第二节的规定，并且不包含从文档中复制的材料，则可以选择将其中的部分或全部指定为不变的。为此，请将其标题添加到“修改版本”许可声明中的“不变部分”列表中。这些标题必须与任何其他节标题不同。
</p>
<p>您可以添加标题为“背书”的部分，但其中仅包含各方对您的修改版本的背书，例如，同行评审声明或该文本已被组织批准为标准的权威定义。
</p>
<p>您可以在修改版本的封面文本列表的末尾添加最多5个单词的段落作为“封面文本”，以及最多25个单词的段落作为“封面文本”。任何一个实体（或通过它们的安排）都只能添加“封面文字”和“封面文字”中的一个段落。如果文档已经包含同一封面的封面文字，该文字是您先前添加的或由您代表的同一实体做出的安排而添加的，则不得添加其他文字；但是您可以在添加了旧版本的以前的发布者的明确许可下替换旧版本。
</p>
<p>本文档的作者和发行者未获得本许可证的许可，不得使用其名称进行宣传或主张或暗示认可任何修改版本。
</p>
</li><li>合并文件<p>您可以根据上文第4节中针对修改版本定义的条款，将文档与根据本许可发布的其他文档进行组合，但前提是您必须将所有未经修改的原始文档的所有不变部分都包含在其中，并列出所有这些文档作为您许可协议中合并工作的不变部分，并保留其所有保修免责声明。
</p>
<p>合并后的作品仅包含此许可的一个副本，并且多个相同的不变部分可用一个副本代替。如果存在多个具有相同名称但内容不同的不变部分，请在该部分的末尾加上括号，在该部分的末尾添加原始作者或发布者的名称（如果已知），以使每个此类的标题唯一。唯一编号。对合并作品的许可声明中不变部分列表中的部分标题进行相同的调整。
</p>
<p>在组合中，必须将各种原始文档中标题为“ History”的任何部分组合在一起，组成一个标题为“ History”的部分；同样，将标题为“致谢”的所有部分以及标题为“奉献”的任何部分组合在一起。您必须删除所有标题为“背书”的部分。
</p>
</li><li>文件收集<p>您可以收集由本许可协议下发布的文档和其他文档组成的集合，并在该文档中将其替换为各个文档中包含的单个副本，前提是您遵守本许可协议的规定。在所有其他方面逐字逐字复印。
</p>
<p>您可以从此类集合中提取单个文档，并根据本许可证单独分发它，前提是您将本许可证的副本插入提取的文档中，并且在与该文档的逐字复制有关的所有其他方面遵守本许可证。
</p>
</li><li>独立工作的集合<p>如果文件或衍生产品的版权不用于限制合法权利，则该文件或其衍生物与其他单独或独立的文件或作品在存储或分发介质中或在其上的汇编将被称为“汇总”。汇编用户的数量超出了个人作品的许可范围。当文档包含在汇总中时，本许可不适用于汇总中的其他作品，而这些作品本身不是文档的衍生作品。
</p>
<p>如果第3节的封面文字要求适用于本文档的这些副本，则如果该文档少于全部汇总的一半，则可以将文档的封面文字放在汇总中将文档括起来的封面上，或者如果文档为电子形式，则具有等同的封面电子形式。否则，它们必须出现在将整个集合括起来的印刷封面上。
</p>
</li><li>翻译<p>翻译被视为一种修改，因此您可以根据第4节的条款分发文档的翻译。用翻译替换不变部分需要其版权所有者的特殊许可，但是除了这些不变部分的原始版本之外，您还可以包括部分或全部不变部分的翻译。您可以在本文档以及所有保修免责声明中包括本许可，所有许可声明的翻译，但前提是您还包括本许可的原始英文版本以及这些声明和免责声明的原始版本。如果本许可的翻译版本与原始版本或声明或免责声明之间存在分歧，则以原始版本为准。
</p>
<p>如果文档中某节的标题为“致谢”，“奉献”或“历史记录”，则保留其标题（第1节）的要求（第4节）通常需要更改实际标题。
</p>
</li><li>终止<p>除非本许可明确规定，否则您不得复制，修改，再许可或分发文档。否则，任何尝试复制，修改，再许可或分发的尝试均无效，并且将自动终止您在本许可下的权利。
</p>
<p>但是，如果您停止所有对本许可的违反，则（a）临时恢复特定版权持有者的许可，除非且直到版权持有者明确终止并最终终止您的许可为止；以及（b）如果版权持有者失败，则永久地在停止交易发生后的60天之内通过某种合理的方式通知您违规行为。
</p>
<p>此外，如果版权所有者以某种合理的方式通知您有关侵权的信息，那么该版权所有者的许可将被永久恢复，这是您第一次从该版权所有者那里收到针对任何作品的违反本许可的通知，并且您会在收到通知后的30天内纠正违规行为。
</p>
<p>根据本节终止您的权利并不会终止根据本许可从您那里收到副本或权利的各方的许可。如果您的权利已被终止且未永久恢复，则收到部分或全部相同材料的副本将不会赋予您使用该材料的任何权利。
</p>
</li><li>本许可证的未来修订<p>自由软件基金会可能会不时发布GNU自由文档许可证的新修订版。这样的新版本将在本质上与当前版本相似，但是可能在细节上有所不同以解决新问题或疑虑。参见<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a> 。</p>
<p>许可证的每个版本都有一个不同的版本号。如果文档指定适用于此许可的特定编号版本“或任何更高版本”，则您可以选择遵循该指定版本或已发布的任何更高版本的条款和条件（不作为草稿）由自由软件基金会提供。如果文档未指定此许可的版本号，则可以选择自由软件基金会曾经发布的任何版本（而不是草稿）。如果文档指定代理可以决定可以使用此许可证的将来版本，则该代理对版本的公开接受声明将永久授权您为文档选择该版本。
</p>
</li><li>许可<p>“大型多作者协作网站”（或“ MMC网站”）是指发布版权作品并为任何人提供编辑这些作品的重要便利的任何万维网服务器。任何人都可以编辑的公共Wiki是此类服务器的示例。网站中包含的“大型多作者合作”（或“ MMC”）是指在MMC网站上发布的任何受版权保护的作品集。
</p>
<p>“ CC-BY-SA”指由知识共享公司发行的知识共享署名-相同方式共享3.0许可，该公司是一家非营利性公司，主要营业地点位于加利福尼亚州旧金山，并且该版本的未来copyleft版本该组织发布的许可。
</p>
<p>“合并”是指作为另一文档的一部分全部或部分发布或重新发布文档。
</p>
<p>如果MMC已根据本许可获得许可，并且所有根据该许可在MMC以外的其他地方首次发行并随后全部或部分合并到MMC中的作品，则该MMC是“有资格获得许可的”，（1）没有封面文字或不变部分，因此（2）在2008年11月1日之前合并。
</p>
<p>MMC站点的运营商可以在2009年8月1日之前的任何时间在CC-BY-SA之下的同一站点上重新发布该站点中包含的MMC，前提是该MMC有资格获得许可。
</p>
</li></ol>

<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h3 class="heading">附录：如何对您的文档使用此许可证</h3>

<p>要在您编写的文档中使用此许可，请在该文档中包括一个许可副本，并在标题页后放置以下版权和许可声明：</p>
<div class="smallexample">
<pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>如果您有不变的部分，封面文本和封面文本，则将“ with…Texts。”行替换为：</p>
<div class="smallexample">
<pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>如果您有不带封面文本的不变部分，或这三个部分的其他组合，请合并这两种选择以适应情况。
</p>
<p>如果您的文档包含不平凡的程序代码示例，我们建议您根据自由软件许可（例如GNU通用公共许可）的选择，并行发布这些示例，以允许它们在自由软件中使用。
</p>

<hr>
<a name="Translations"></a>
<div class="header">
<p>下一页： <a href="#Index" rel="next" accesskey="n">索引</a> ，上一篇： <a href="#Copying-This-Manual" rel="prev" accesskey="p">复制本手册</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Translations-of-This-Manual"></a>
<h2 class="appendix">附录B本手册的翻译</h2>

<p>GNUjdoc项目的Nishio Futoshi准备了此手册的日语翻译。其最新版本可以在<a href="http://openlab.ring.gr.jp/gnujdoc/cvsweb/cvsweb.cgi/gnujdoc/">http://openlab.ring.gr.jp/gnujdoc/cvsweb/cvsweb.cgi/gnujdoc/中</a>找到。</p>
<hr>
<a name="Index"></a>
<div class="header">
<p>上一篇： <a href="#Translations" rel="prev" accesskey="p">翻译</a> ，上一篇： <a href="#Top" rel="up" accesskey="u">顶部</a> [ <a href="#SEC_Contents" title="目录" rel="contents">目录</a> ] [ <a href="#Index" title="指数" rel="index">索引</a> ]</p>
</div>
<a name="Index-1"></a>
<h2 class="appendix">附录C索引</h2>

<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Index_cp_symbol-1"><b>！</b></a>
   
<a class="summary-letter" href="#Index_cp_symbol-2"><b>+</b></a> <a class="summary-letter" href="#Index_cp_symbol-3"><b><</b></a> <a class="summary-letter" href="#Index_cp_symbol-4"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#Index_cp_letter-A"><b>A</b></a> <a class="summary-letter" href="#Index_cp_letter-B"><b>B</b></a> <a class="summary-letter" href="#Index_cp_letter-C"><b>C</b></a> <a class="summary-letter" href="#Index_cp_letter-D"><b>D</b></a> <a class="summary-letter" href="#Index_cp_letter-E"><b>E</b></a> <a class="summary-letter" href="#Index_cp_letter-F"><b>F</b></a> <a class="summary-letter" href="#Index_cp_letter-G"><b>G</b></a> <a class="summary-letter" href="#Index_cp_letter-H"><b>H</b></a> <a class="summary-letter" href="#Index_cp_letter-I"><b>I</b></a> <a class="summary-letter" href="#Index_cp_letter-K"><b>K</b></a> <a class="summary-letter" href="#Index_cp_letter-L"><b>L</b></a> <a class="summary-letter" href="#Index_cp_letter-M"><b>M</b></a> <a class="summary-letter" href="#Index_cp_letter-N"><b>N</b></a> <a class="summary-letter" href="#Index_cp_letter-O"><b>O</b></a> <a class="summary-letter" href="#Index_cp_letter-P"><b>P</b></a> <a class="summary-letter" href="#Index_cp_letter-Q"><b>Q</b></a> <a class="summary-letter" href="#Index_cp_letter-R"><b>R</b></a> <a class="summary-letter" href="#Index_cp_letter-S"><b>S</b></a> <a class="summary-letter" href="#Index_cp_letter-T"><b>T</b></a> <a class="summary-letter" href="#Index_cp_letter-U"><b>U</b></a> <a class="summary-letter" href="#Index_cp_letter-V"><b>V</b></a> <a class="summary-letter" href="#Index_cp_letter-W"><b>W</b></a> <a class="summary-letter" href="#Index_cp_letter-Y"><b>Y</b></a> <a class="summary-letter" href="#Index_cp_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>
<table class="index-cp" border="0">
<tbody><tr><td></td><th align="left">索引输入</th><td> </td><th align="left">部分</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_symbol-1">！</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0021-output-format">' <samp>!</samp> '输出格式</a> ：</td><td> </td><td valign="top"><a href="#Context">语境</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_symbol-2">+</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002b_002d-output-format">' <samp>+-</samp> '输出格式</a> ：</td><td> </td><td valign="top"><a href="#Unified-Format">统一格式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_symbol-3"><</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c-output-format">' <samp><</samp> '输出格式</a> ：</td><td> </td><td valign="top"><a href="#Normal">正常</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003c_003c_003c_003c_003c_003c-for-marking-conflicts">' <samp><<<<<<<</samp> '用于标记冲突</a> ：</td><td> </td><td valign="top"><a href="#Marking-Conflicts">标记冲突</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_symbol-4">_</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005fPOSIX2_005fVERSION"><code>_POSIX2_VERSION</code></a> ：</td><td> </td><td valign="top"><a href="#Standards-conformance">符合标准</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-A">一种</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ad-capability"><code>ad <span class="roman">capability</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aligning-tab-stops">对齐制表位</a> ：</td><td> </td><td valign="top"><a href="#Tabs">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alternate-file-names">备用文件名</a> ：</td><td> </td><td valign="top"><a href="#Alternate-Names">备用名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-always-color-option"><code>always <span class="roman">color option</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-auto-color-option"><code>auto <span class="roman">color option</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-B">乙</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-backup-file-names">备份文件名</a> ：</td><td> </td><td valign="top"><a href="#Backup-Names">备份名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-backup-file-strategy">备份文件策略</a> ：</td><td> </td><td valign="top"><a href="#Backups">后备</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binary-file-diff">二进制文件diff</a> ：</td><td> </td><td valign="top"><a href="#Binary">二元</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-and-tab-difference-suppression">空白和制表符差异抑制</a> ：</td><td> </td><td valign="top"><a href="#White-Space">空白空间</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-line-difference-suppression">空白行差异抑制</a> ：</td><td> </td><td valign="top"><a href="#Blank-Lines">空行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-brief-difference-reports">简要差异报告</a> ：</td><td> </td><td valign="top"><a href="#Brief">简要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bug-reports">错误报告</a> ：</td><td> </td><td valign="top"><a href="#Bugs">虫子</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-function-headings">C函数标题</a> ：</td><td> </td><td valign="top"><a href="#C-Function-Headings">C函数标题</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-if_002dthen_002delse-output-format">C if-then-else输出格式</a> ：</td><td> </td><td valign="top"><a href="#If_002dthen_002delse">如果-然后-其他</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-case-difference-suppression">区分大小写</a> ：</td><td> </td><td valign="top"><a href="#Case-Folding">折叠箱</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ClearCase">ClearCase</a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cmp-invocation"><code>cmp</code>调用</a> ：</td><td> </td><td valign="top"><a href="#Invoking-cmp">调用cmp</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cmp-options"><code>cmp</code>选项</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color_002c-distinguishing-different-context">颜色，区分不同的上下文</a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-columnar-output">柱状输出</a> ：</td><td> </td><td valign="top"><a href="#Side-by-Side">并排</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-common-mistakes-with-patches">补丁的常见错误</a> ：</td><td> </td><td valign="top"><a href="#Avoiding-Common-Mistakes">避免常见的错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comparing-three-files">比较三个文件</a> ：</td><td> </td><td valign="top"><a href="#Comparing-Three-Files">比较三个文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conflict">冲突</a> ：</td><td> </td><td valign="top"><a href="#diff3-Merging">diff3合并</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conflict-marking">冲突标记</a> ：</td><td> </td><td valign="top"><a href="#Marking-Conflicts">标记冲突</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context-output-format">上下文输出格式</a> ：</td><td> </td><td valign="top"><a href="#Context">语境</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-creating-files">创建文件</a> ：</td><td> </td><td valign="top"><a href="#Creating-and-Removing">创建和删除</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-D">d</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-de-capability"><code>de <span class="roman">capability</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diagnostics-from-patch">来自的诊断<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#patch-Messages">补丁消息</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff-invocation"><code>diff</code>调用</a> ：</td><td> </td><td valign="top"><a href="#Invoking-diff">调用差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff-merging">差异合并</a> ：</td><td> </td><td valign="top"><a href="#Interactive-Merging">互动合并</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff-options"><code>diff</code>选项</a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff-sample-input"><code>diff</code>样本输入</a> ：</td><td> </td><td valign="top"><a href="#Sample-diff-Input">样本差异输入</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff3-hunks"><code>diff3</code>帅哥</a> ：</td><td> </td><td valign="top"><a href="#diff3-Hunks">diff3大块头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff3-invocation"><code>diff3</code>调用</a> ：</td><td> </td><td valign="top"><a href="#Invoking-diff3">调用diff3</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff3-options"><code>diff3</code>选项</a> ：</td><td> </td><td valign="top"><a href="#diff3-Options">diff3选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diff3-sample-input"><code>diff3</code>样本输入</a> ：</td><td> </td><td valign="top"><a href="#Sample-diff3-Input">样本diff3输入</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-directories-and-patch">目录和补丁</a> ：</td><td> </td><td valign="top"><a href="#patch-Directories">补丁目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-directory-structure-changes">目录结构更改</a> ：</td><td> </td><td valign="top"><a href="#Changing-Structure">改变结构</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dry-runs-for-patch">干跑<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#Dry-Runs">空跑</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-E">Ë</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ed-script-output-format"><code>ed</code>脚本输出格式</a> ：</td><td> </td><td valign="top"><a href="#ed-Scripts">编辑脚本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EDITOR"><code>EDITOR</code></a> ：</td><td> </td><td valign="top"><a href="#Merge-Commands">合并命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-files_002c-removing">空文件，删除</a> ：</td><td> </td><td valign="top"><a href="#Creating-and-Removing">创建和删除</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exabyte_002c-definition-of">Exabyte，的定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exbibyte_002c-definition-of">exbibyte，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-name-alternates">文件名替代</a> ：</td><td> </td><td valign="top"><a href="#Alternate-Names">备用名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-names-with-unusual-characters">带有不寻常字符的文件名</a> ：</td><td> </td><td valign="top"><a href="#Unusual-File-Names">异常的文件名</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-format-of-diff-output">格式<code>diff</code>输出</a> ：</td><td> </td><td valign="top"><a href="#Output-Formats">输出格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-format-of-diff3-output">格式<code>diff3</code>输出</a> ：</td><td> </td><td valign="top"><a href="#Comparing-Three-Files">比较三个文件</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-formats-for-if_002dthen_002delse-line-groups">if-then-else线组的格式</a> ：</td><td> </td><td valign="top"><a href="#Line-Group-Formats">线组格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-forward-ed-script-output-format">向前<code>ed</code>脚本输出格式</a> ：</td><td> </td><td valign="top"><a href="#Forward-ed">转发版</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-full-lines">全线</a> ：</td><td> </td><td valign="top"><a href="#Incomplete-Lines">行不完整</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-function-headings_002c-C">函数标题，C</a> ：</td><td> </td><td valign="top"><a href="#C-Function-Headings">C函数标题</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fuzz-factor-when-patching">修补时的模糊因素</a> ：</td><td> </td><td valign="top"><a href="#Inexact">不精确</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-gibibyte_002c-definition-of">gibibyte，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gigabyte_002c-definition-of">GB，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hd-capability"><code>hd <span class="roman">capability</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-headings">标题</a> ：</td><td> </td><td valign="top"><a href="#Sections">栏目</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hunks">帅哥</a> ：</td><td> </td><td valign="top"><a href="#Hunks">大块头</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hunks-for-diff3">为大块头<code>diff3</code></a> ：</td><td> </td><td valign="top"><a href="#diff3-Hunks">diff3大块头</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-I">一世</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-if_002dthen_002delse-output-format">if-then-else输出格式</a> ：</td><td> </td><td valign="top"><a href="#If_002dthen_002delse">如果-然后-其他</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ifdef-output-format"><code>ifdef</code>输出格式</a> ：</td><td> </td><td valign="top"><a href="#If_002dthen_002delse">如果-然后-其他</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-imperfect-patch-application">补丁程序不完善</a> ：</td><td> </td><td valign="top"><a href="#Imperfect">不完善</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-incomplete-line-merging">不完全合并</a> ：</td><td> </td><td valign="top"><a href="#Merging-Incomplete-Lines">合并不完整的行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-incomplete-lines">不完整的行</a> ：</td><td> </td><td valign="top"><a href="#Incomplete-Lines">行不完整</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inexact-patches">不精确的补丁</a> ：</td><td> </td><td valign="top"><a href="#Inexact">不精确</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inhibit-messages-from-patch">禁止来自<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#More-or-Fewer-Messages">更多或更少的消息</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interactive-merging">互动合并</a> ：</td><td> </td><td valign="top"><a href="#Interactive-Merging">互动合并</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-introduction">简介</a> ：</td><td> </td><td valign="top"><a href="#Comparison">比较方式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-intuiting-file-names-from-patches">通过补丁了解文件名</a> ：</td><td> </td><td valign="top"><a href="#Multiple-Patches">多个补丁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invoking-cmp">调用<code>cmp</code></a> ：</td><td> </td><td valign="top"><a href="#Invoking-cmp">调用cmp</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invoking-diff">调用<code>diff</code></a> ：</td><td> </td><td valign="top"><a href="#Invoking-diff">调用差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invoking-diff3">调用<code>diff3</code></a> ：</td><td> </td><td valign="top"><a href="#Invoking-diff3">调用diff3</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invoking-patch">调用<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#Invoking-patch">调用补丁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invoking-sdiff">调用<code>sdiff</code></a> ：</td><td> </td><td valign="top"><a href="#Invoking-sdiff">调用差异</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-K">ķ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-keyboard-input-to-patch">键盘输入到<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#patch-and-Keyboard-Input">音色和键盘输入</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-kibibyte_002c-definition-of">千字节，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-kilobyte_002c-definition-of">千字节，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-L">大号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LC_005fCOLLATE"><code>LC_COLLATE</code></a> ：</td><td> </td><td valign="top"><a href="#Comparing-Directories">比较目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LC_005fNUMERIC"><code>LC_NUMERIC</code></a> ：</td><td> </td><td valign="top"><a href="#Line-Group-Formats">线组格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LC_005fTIME"><code>LC_TIME</code></a> ：</td><td> </td><td valign="top"><a href="#Detailed-Context">详细内容</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-line-formats">行格式</a> ：</td><td> </td><td valign="top"><a href="#Line-Formats">行格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-line-group-formats">线组格式</a> ：</td><td> </td><td valign="top"><a href="#Line-Group-Formats">线组格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ln-capability"><code>ln <span class="roman">capability</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-M">中号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-mebibyte_002c-definition-of">兆字节，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-megabyte_002c-definition-of">兆字节，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-merge-commands">合并命令</a> ：</td><td> </td><td valign="top"><a href="#Merge-Commands">合并命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-merged-diff3-format">合并<code>diff3</code>格式</a> ：</td><td> </td><td valign="top"><a href="#Bypassing-ed">绕过ed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-merged-output-format">合并输出格式</a> ：</td><td> </td><td valign="top"><a href="#If_002dthen_002delse">如果-然后-其他</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-merging-from-a-common-ancestor">从一个共同的祖先合并</a> ：</td><td> </td><td valign="top"><a href="#diff3-Merging">diff3合并</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-merging-interactively">交互式合并</a> ：</td><td> </td><td valign="top"><a href="#Merge-Commands">合并命令</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-messages-from-patch">来自的讯息<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#patch-Messages">补丁消息</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multibyte-characters">多字节字符</a> ：</td><td> </td><td valign="top"><a href="#Internationalization">国际化</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-patches">多个补丁</a> ：</td><td> </td><td valign="top"><a href="#Multiple-Patches">多个补丁</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-N">ñ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-newline-treatment-by-diff">换行符<code>diff</code></a> ：</td><td> </td><td valign="top"><a href="#Incomplete-Lines">行不完整</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-none-color-option"><code>none <span class="roman">color option</span></code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-normal-output-format">正常输出格式</a> ：</td><td> </td><td valign="top"><a href="#Normal">正常</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-O">Ø</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-options-for-cmp">的选项<code>cmp</code></a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-options-for-diff">的选项<code>diff</code></a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-options-for-diff3">的选项<code>diff3</code></a> ：</td><td> </td><td valign="top"><a href="#diff3-Options">diff3选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-options-for-patch">的选项<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#patch-Options">补丁选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-options-for-sdiff">的选项<code>sdiff</code></a> ：</td><td> </td><td valign="top"><a href="#sdiff-Options">sdiff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output-formats">输出格式</a> ：</td><td> </td><td valign="top"><a href="#Output-Formats">输出格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overlap">重叠</a> ：</td><td> </td><td valign="top"><a href="#diff3-Merging">diff3合并</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overlapping-change_002c-selection-of">重叠变化，选择</a> ：</td><td> </td><td valign="top"><a href="#Which-Changes">哪些变化</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overview-of-diff-and-patch">大致的了解<code>diff</code>和<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#Overview">总览</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-paginating-diff-output">分页<code>diff</code>输出</a> ：</td><td> </td><td valign="top"><a href="#Pagination">分页</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch-consumer-tips">贴片消费者提示</a> ：</td><td> </td><td valign="top"><a href="#Tips-for-Patch-Consumers">贴片消费者提示</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch-input-format"><code>patch</code>输入格式</a> ：</td><td> </td><td valign="top"><a href="#patch-Input">补丁输入</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch-invocation"><code>patch</code>调用</a> ：</td><td> </td><td valign="top"><a href="#Invoking-patch">调用补丁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch-messages-and-questions"><code>patch</code>消息和问题</a> ：</td><td> </td><td valign="top"><a href="#patch-Messages">补丁消息</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch-options"><code>patch</code>选项</a> ：</td><td> </td><td valign="top"><a href="#patch-Options">补丁选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch-producer-tips">补丁制作提示</a> ：</td><td> </td><td valign="top"><a href="#Tips-for-Patch-Producers">给贴片生产者的提示</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patch_002c-common-mistakes">补丁，常见错误</a> ：</td><td> </td><td valign="top"><a href="#Avoiding-Common-Mistakes">避免常见的错误</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patches_002c-shrinking">补丁，收缩</a> ：</td><td> </td><td valign="top"><a href="#Generating-Smaller-Patches">生成较小的补丁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-patching-directories">修补目录</a> ：</td><td> </td><td valign="top"><a href="#patch-Directories">补丁目录</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PATCH_005fGET"><code>PATCH_GET</code></a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PATCH_005fVERSION_005fCONTROL"><code>PATCH_VERSION_CONTROL</code></a> ：</td><td> </td><td valign="top"><a href="#Backup-Names">备份名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pebibyte_002c-definition-of">pebibyte，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-performance-of-diff">的表演<code>diff</code></a> ：</td><td> </td><td valign="top"><a href="#diff-Performance">差异表现</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-petabyte_002c-definition-of">PB，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIX">POSIX</a> ：</td><td> </td><td valign="top"><a href="#patch-and-POSIX">补丁和POSIX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIX-1">POSIX</a> ：</td><td> </td><td valign="top"><a href="#Standards-conformance">符合标准</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT"><code>POSIXLY_CORRECT</code></a> ：</td><td> </td><td valign="top"><a href="#patch-and-POSIX">补丁和POSIX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-1"><code>POSIXLY_CORRECT</code></a> ：</td><td> </td><td valign="top"><a href="#Standards-conformance">符合标准</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-projects-for-directories">目录项目</a> ：</td><td> </td><td valign="top"><a href="#Shortcomings">缺点</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-Q">问</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-quoting-style">报价方式</a> ：</td><td> </td><td valign="top"><a href="#patch-Quoting-Style">补丁报价方式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-QUOTING_005fSTYLE"><code>QUOTING_STYLE</code></a> ：</td><td> </td><td valign="top"><a href="#patch-Quoting-Style">补丁报价方式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-R">[R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-RCS">RCS</a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RCS-script-output-format">RCS脚本输出格式</a> ：</td><td> </td><td valign="top"><a href="#RCS">RCS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-expression-matching-headings">正则表达式匹配的标题</a> ：</td><td> </td><td valign="top"><a href="#Specified-Headings">指定标题</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-expression-suppression">正则表达式抑制</a> ：</td><td> </td><td valign="top"><a href="#Specified-Lines">指定行</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reject-file-names">拒绝文件名</a> ：</td><td> </td><td valign="top"><a href="#Reject-Names">拒绝名字</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-removing-empty-files">删除空文件</a> ：</td><td> </td><td valign="top"><a href="#Creating-and-Removing">创建和删除</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reporting-bugs">报告错误</a> ：</td><td> </td><td valign="top"><a href="#Bugs">虫子</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reversed-patches">反向补丁</a> ：</td><td> </td><td valign="top"><a href="#Reversed-Patches">反转补丁</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-revision-control">版本控制</a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-S">小号</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-sample-input-for-diff">的样本输入<code>diff</code></a> ：</td><td> </td><td valign="top"><a href="#Sample-diff-Input">样本差异输入</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sample-input-for-diff3">的样本输入<code>diff3</code></a> ：</td><td> </td><td valign="top"><a href="#Sample-diff3-Input">样本diff3输入</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCCS">SCCS</a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-script-output-formats">脚本输出格式</a> ：</td><td> </td><td valign="top"><a href="#Scripts">剧本</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sdiff-invocation"><code>sdiff</code>调用</a> ：</td><td> </td><td valign="top"><a href="#Invoking-sdiff">调用差异</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sdiff-options"><code>sdiff</code>选项</a> ：</td><td> </td><td valign="top"><a href="#sdiff-Options">sdiff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sdiff-output-format"><code>sdiff</code>输出格式</a> ：</td><td> </td><td valign="top"><a href="#sdiff-Option-Summary">sdiff选项摘要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-section-headings">本节标题</a> ：</td><td> </td><td valign="top"><a href="#Sections">栏目</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-side-by-side">并排</a> ：</td><td> </td><td valign="top"><a href="#Side-by-Side">并排</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-side-by-side-format">并排格式</a> ：</td><td> </td><td valign="top"><a href="#Side-by-Side-Format">并排格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SIMPLE_005fBACKUP_005fSUFFIX"><code>SIMPLE_BACKUP_SUFFIX</code></a> ：</td><td> </td><td valign="top"><a href="#Backup-Names">备份名称</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-special-files">特殊文件</a> ：</td><td> </td><td valign="top"><a href="#Special-Files">特殊档案</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-specified-headings">指定的标题</a> ：</td><td> </td><td valign="top"><a href="#Specified-Headings">指定标题</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-summarizing-which-files-differ">总结哪些文件不同</a> ：</td><td> </td><td valign="top"><a href="#Brief">简要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-System-V-diff3-compatibility">系统V <code>diff3</code>相容性</a> ：</td><td> </td><td valign="top"><a href="#Saving-the-Changed-File">保存更改的文件</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-T">Ť</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tab-and-blank-difference-suppression">制表符和空白差异抑制</a> ：</td><td> </td><td valign="top"><a href="#White-Space">空白空间</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tab-stop-alignment">制表位对齐</a> ：</td><td> </td><td valign="top"><a href="#Tabs">标签</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tebibyte_002c-definition-of">tebibyte，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-terabyte_002c-definition-of">TB，的定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-terminal_002c-using-color-iff">终端，使用iff颜色</a> ：</td><td> </td><td valign="top"><a href="#diff-Options">diff选项</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-testing-patch">测试<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#Dry-Runs">空跑</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-text-versus-binary-diff">文本与二进制差异</a> ：</td><td> </td><td valign="top"><a href="#Binary">二元</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-timestamp-format_002c-context-diffs">时间戳格式，上下文差异</a> ：</td><td> </td><td valign="top"><a href="#Detailed-Context">详细内容</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-timestamp-format_002c-unified-diffs">时间戳格式，统一差异</a> ：</td><td> </td><td valign="top"><a href="#Detailed-Unified">详细统一</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-timestamps-on-patched-files">修补文件上的时间戳</a> ：</td><td> </td><td valign="top"><a href="#Patching-Timestamps">修补时间戳</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-traditional-patch">传统的<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#patch-and-Tradition">补丁与传统</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-trailing-blanks">尾随空白</a> ：</td><td> </td><td valign="top"><a href="#Trailing-Blanks">尾随空白</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-two_002dcolumn-output">两栏输出</a> ：</td><td> </td><td valign="top"><a href="#Side-by-Side">并排</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-U">ü</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-unified-output-format">统一输出格式</a> ：</td><td> </td><td valign="top"><a href="#Unified-Format">统一格式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unmerged-change">未合并的更改</a> ：</td><td> </td><td valign="top"><a href="#Which-Changes">哪些变化</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-varying_002dwidth-characters">可变宽度字符</a> ：</td><td> </td><td valign="top"><a href="#Internationalization">国际化</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-verbose-messages-from-patch">来自的详细消息<code>patch</code></a> ：</td><td> </td><td valign="top"><a href="#More-or-Fewer-Messages">更多或更少的消息</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version-control">版本控制</a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VERSION_005fCONTROL"><code>VERSION_CONTROL</code></a> ：</td><td> </td><td valign="top"><a href="#Revision-Control">版本控制</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VERSION_005fCONTROL-1"><code>VERSION_CONTROL</code></a> ：</td><td> </td><td valign="top"><a href="#Backup-Names">备份名称</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-W">w ^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-white-space-in-patches">补丁中的空白</a> ：</td><td> </td><td valign="top"><a href="#Changed-White-Space">更改空白</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-Y">ÿ</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-yottabyte_002c-definition-of">yottabyte，的定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index_cp_letter-Z">ž</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-zettabyte_002c-definition-of">Zettabyte，定义</a> ：</td><td> </td><td valign="top"><a href="#cmp-Options">cmp选项</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</tbody></table>
<table><tbody><tr><th valign="top">跳到：</th><td><a class="summary-letter" href="#Index_cp_symbol-1"><b>！</b></a>
   
<a class="summary-letter" href="#Index_cp_symbol-2"><b>+</b></a> <a class="summary-letter" href="#Index_cp_symbol-3"><b><</b></a> <a class="summary-letter" href="#Index_cp_symbol-4"><b>_</b></a>
   
<br>
<a class="summary-letter" href="#Index_cp_letter-A"><b>A</b></a> <a class="summary-letter" href="#Index_cp_letter-B"><b>B</b></a> <a class="summary-letter" href="#Index_cp_letter-C"><b>C</b></a> <a class="summary-letter" href="#Index_cp_letter-D"><b>D</b></a> <a class="summary-letter" href="#Index_cp_letter-E"><b>E</b></a> <a class="summary-letter" href="#Index_cp_letter-F"><b>F</b></a> <a class="summary-letter" href="#Index_cp_letter-G"><b>G</b></a> <a class="summary-letter" href="#Index_cp_letter-H"><b>H</b></a> <a class="summary-letter" href="#Index_cp_letter-I"><b>I</b></a> <a class="summary-letter" href="#Index_cp_letter-K"><b>K</b></a> <a class="summary-letter" href="#Index_cp_letter-L"><b>L</b></a> <a class="summary-letter" href="#Index_cp_letter-M"><b>M</b></a> <a class="summary-letter" href="#Index_cp_letter-N"><b>N</b></a> <a class="summary-letter" href="#Index_cp_letter-O"><b>O</b></a> <a class="summary-letter" href="#Index_cp_letter-P"><b>P</b></a> <a class="summary-letter" href="#Index_cp_letter-Q"><b>Q</b></a> <a class="summary-letter" href="#Index_cp_letter-R"><b>R</b></a> <a class="summary-letter" href="#Index_cp_letter-S"><b>S</b></a> <a class="summary-letter" href="#Index_cp_letter-T"><b>T</b></a> <a class="summary-letter" href="#Index_cp_letter-U"><b>U</b></a> <a class="summary-letter" href="#Index_cp_letter-V"><b>V</b></a> <a class="summary-letter" href="#Index_cp_letter-W"><b>W</b></a> <a class="summary-letter" href="#Index_cp_letter-Y"><b>Y</b></a> <a class="summary-letter" href="#Index_cp_letter-Z"><b>Z</b></a>
   
</td></tr></tbody></table>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a name="FOOT1" href="#DOCF1">（1）</a></h3>
<p>GNU中的编码错误<code>patch</code> 2.5.4版导致其始终使用' <samp>~</samp> ”，但此问题应在下一版本中修复。</p>
</div>
<hr>





</body></html>