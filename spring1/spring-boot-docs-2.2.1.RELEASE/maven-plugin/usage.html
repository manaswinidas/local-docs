<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 at 2019-11-06 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Stephane Nicoll" />
    <meta name="Date-Creation-yyyymmdd" content="20140506" />
    <meta name="Date-Revision-yyyymmdd" content="20191106" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Spring Boot Maven Plugin &#x2013; Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Spring Boot Maven Plugin</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2019-11-06<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.2.1.RELEASE</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a>  </li>
    <li><a href="plugin-info.html" title="Goals"><span class="none"></span>Goals</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Usage</a>
  </li>
          <li class="nav-header">Examples</li>
    <li><a href="examples/repackage-classifier.html" title="Custom repackage classifier"><span class="none"></span>Custom repackage classifier</a>  </li>
    <li><a href="examples/repackage-name.html" title="Custom repackage name"><span class="none"></span>Custom repackage name</a>  </li>
    <li><a href="examples/repackage-disable-attach.html" title="Local repackaged artifact"><span class="none"></span>Local repackaged artifact</a>  </li>
    <li><a href="examples/exclude-dependency.html" title="Exclude a dependency"><span class="none"></span>Exclude a dependency</a>  </li>
    <li><a href="examples/run-debug.html" title="Debug the application"><span class="none"></span>Debug the application</a>  </li>
    <li><a href="examples/run-system-properties.html" title="Using system properties"><span class="none"></span>Using system properties</a>  </li>
    <li><a href="examples/run-env-variables.html" title="Using environment variable"><span class="none"></span>Using environment variable</a>  </li>
    <li><a href="examples/it-random-port.html" title="Random port for integration tests"><span class="none"></span>Random port for integration tests</a>  </li>
    <li><a href="examples/it-skip.html" title="Skip integration tests"><span class="none"></span>Skip integration tests</a>  </li>
    <li><a href="examples/run-profiles.html" title="Specify active profiles"><span class="none"></span>Specify active profiles</a>  </li>
    <li><a href="examples/build-info.html" title="Generate build information"><span class="none"></span>Generate build information</a>  </li>
    <li><a href="examples/custom-layout.html" title="Custom layout"><span class="none"></span>Custom layout</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<section>
<h2><a name="Usage"></a>Usage</h2>
<p>The plugin provides several goals to work with a Spring Boot application:</p>
<ul>
<li><code>repackage</code>: create a jar or war file that is auto-executable. It can replace the regular artifact or can be attached to the build lifecycle with a separate <b>classifier</b>.</li>
<li><code>run</code>: run your Spring Boot application with several options to pass parameters to it.</li>
<li><code>start</code> and <code>stop</code>: integrate your Spring Boot application to the <code>integration-test</code> phase so that the application starts before it.</li>
<li><code>build-info</code>: generate a build information that can be used by the Actuator.</li></ul>
<p>Each goal is further described below.</p><section>
<h3><a name="Repackaging_an_application"></a>Repackaging an application</h3>
<p>In order to repackage your application, you simply need to add a reference to the plugin in your <code>pom.xml</code>:</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;repackage&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>The example above repackages a jar or war that is built during the package phase of the Maven lifecycle, including any <code>provided</code> dependencies that are defined in the project. If some of these dependencies need to be excluded, you can use one of the exclude options, see <a href="./examples/exclude-dependency.html">Exclude a dependency</a> for more details. Please note that the <code>outputFileNameMapping</code> feature of the <code>maven-war-plugin</code> is currently not supported.</p>
<p>Devtools is automatically excluded by default (you can control that using the <code>excludeDevtools</code> property). In order to make that work with <code>war</code> packaging, the <code>spring-boot-devtools</code> dependency must be set as <code>optional</code> or with the <code>provided</code> scope.</p>
<p>The original (i.e. non executable) artifact is renamed to <code>.original</code> by default but it is also possible to keep the original artifact using a custom classifier.</p>
<p>The plugin rewrites your manifest, and in particular it manages the <b>Main-Class</b> and <b>Start-Class</b> entries, so if the defaults don't work you have to configure those there (not in the jar plugin). The <b>Main-Class</b> in the manifest is actually controlled by the <b>layout</b> property of the boot plugin, e.g.</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;configuration&gt;
        &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;
        &lt;layout&gt;ZIP&lt;/layout&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;repackage&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>The <code>layout</code> property defaults to a guess based on the archive type (<code>jar</code> or <code>war</code>). The following layouts are available:</p>
<ul>
<li><code>JAR</code>: regular executable JAR layout.</li>
<li><code>WAR</code>: executable WAR layout. <code>provided</code> dependencies are placed in <code>WEB-INF/lib-provided</code> to avoid any clash when the <code>war</code> is deployed in a servlet container.</li>
<li><code>ZIP</code> (alias to <code>DIR</code>): similar to the <code>JAR</code> layout using <code>PropertiesLauncher</code>.</li>
<li><code>NONE</code>: Bundle all dependencies and project resources. Does not bundle a bootstrap loader.</li></ul>
<p>For more detailed examples of how to configure this goal see:</p>
<ul>
<li><a href="./examples/repackage-classifier.html">Custom repackage classifier</a></li>
<li><a href="./examples/exclude-dependency.html">Exclude a dependency</a></li></ul></section><section>
<h3><a name="Running_the_application"></a>Running the application</h3>
<p>The plugin includes a run goal which can be used to launch your application from the command line:</p>
<div>
<pre>mvn spring-boot:run</pre></div>
<p>By default the application is executed in a forked process and setting properties on the command-line will not affect the application. If you need to specify some JVM arguments (i.e. for debugging purposes), you can use the <code>jvmArguments</code> parameter, see <a href="./examples/run-debug.html">Debug the application</a> for more details. There is also explicit support for <a href="./examples/run-system-properties.html">system properties</a> and <a href="./examples/run-env-variables.html">environment variables</a>.</p>
<p>As enabling a profile is quite common, there is dedicated <code>profiles</code> property that offers a shortcut for <code>-Dspring-boot.run.jvmArguments=&quot;-Dspring.profiles.active=dev&quot;</code>, see <a href="./examples/run-profiles.html">Specify active profiles</a>.</p>
<p>Although this is not recommended, it is possible to execute the application directly from the Maven JVM by disabling the <code>fork</code> property. Doing so means that the <code>jvmArguments</code>, <code>systemPropertyVariables</code>, <code>environmentVariables</code> and <code>agents</code> options are ignored.</p>
<p>Spring Boot 1.3 has introduced <code>devtools</code>, a module to improve the development-time experience when working on Spring Boot applications. To enable it, just add the following dependency to your project:</p>
<div>
<pre>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
    &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div>
<p>When <code>devtools</code> is running, it detects change when you recompile your application and automatically refreshes it. This works for not only resources but code as well. It also provides a LiveReload server so that it can automatically trigger a browser refresh whenever things change.</p>
<p>Devtools can also be configured to only refresh the browser whenever a static resource has changed (and ignore any change in the code). Just include the following property in your project:</p>
<div>
<pre>spring.devtools.remote.restart.enabled=false</pre></div>
<p>Prior to <code>devtools</code>, the plugin supported hot refreshing of resources by default which has now be disabled in favour of the solution described above. You can restore it at any time by configuring your project:</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;configuration&gt;
        &lt;addResources&gt;true&lt;/addResources&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>When <code>addResources</code> is enabled, any <b>src/main/resources</b> folder will be added to the application classpath when you run the application and any duplicate found in <b>target/classes</b> will be removed. This allows hot refreshing of resources which can be very useful when developing web applications. For example, you can work on HTML, CSS or JavaScript files and see your changes immediately without recompiling your application. It is also a helpful way of allowing your front end developers to work without needing to download and install a Java IDE.</p>
<p>Note that a side effect of using this feature is that filtering of resources at build time will not work.</p>
<p>In order to be consistent with the <code>repackage</code> goal, the <code>run</code> goal builds the classpath in such a way that any dependency that is excluded in the plugin's configuration gets excluded from the classpath as well. See <a href="./examples/exclude-dependency.html">Exclude a dependency</a> for more details.</p>
<p>Sometimes it is useful to include test dependencies when running the application. For example, if you want to run your application in a test mode that uses stub classes. If you wish to do this, you can set the <code>useTestClasspath</code> parameter to true. Note that this is only applied when you run an application: the <code>repackage</code> goal will not add test dependencies to the resulting JAR/WAR.</p></section><section>
<h3><a name="Working_with_integration_tests"></a>Working with integration tests</h3>
<p>While you may start your Spring Boot application very easily from your test (or test suite) itself, it may be desirable to handle that in the build itself. To make sure that the lifecycle of your Spring Boot application is properly managed <i>around</i> your integration tests, you can use the <code>start</code> and <code>stop</code> goals as described below:</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;pre-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;start&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
          &lt;id&gt;post-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;stop&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>Such setup can now use the <a class="externalLink" href="https://maven.apache.org/surefire/maven-failsafe-plugin/">failsafe-plugin</a> to run your integration tests as you would expect.</p>
<p>You could also configure a more advanced setup to skip the integration tests when a specific property has been set:</p>
<div>
<pre>&lt;properties&gt;
  &lt;it.skip&gt;false&lt;/it.skip&gt;
&lt;/properties&gt;
&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;skip&gt;${it.skip}&lt;/skip&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;pre-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;start&lt;/goal&gt;
          &lt;/goals&gt;
          &lt;configuration&gt;
            &lt;skip&gt;${it.skip}&lt;/skip&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
          &lt;id&gt;post-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;stop&lt;/goal&gt;
          &lt;/goals&gt;
          &lt;configuration&gt;
            &lt;skip&gt;${it.skip}&lt;/skip&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre></div>
<p>If you run <code>mvn verify -Dit.skip=true</code> your integration tests will be skipped altogether.</p>
<p>For more detailed examples of how to configure this goal see:</p>
<ul>
<li><a href="./examples/it-random-port.html">Random port for integration tests</a></li></ul></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2019
<a href="https://spring.io">Pivotal Software, Inc.</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
