<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 10. IO Subsystem Tuning</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="io_tuning"/>Chapter 10. IO Subsystem Tuning</h1></div></div></div><p>
			The <code class="literal">io</code> subsystem defines XNIO workers and buffer pools that are used by other JBoss EAP subsystems, such as Undertow and Remoting.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="io_workers"/>Configuring Workers</h1></div></div></div><p>
				You can create multiple separate workers that each have their own performance configuration and which handle different I/O tasks. For example, you could create one worker to handle HTTP I/O, and another worker to handle EJB I/O, and then separately configure the attributes of each worker for specific load requirements.
			</p><p>
				See the <a class="link" href="reference_material.html#io_attributes" title="IO Subsystem Attributes">IO Subsystem Attributes appendix</a> for the list of configurable worker attributes.
			</p><p>
				Worker attributes that significantly affect performance include <code class="literal">io-threads</code> which sets the total number of I/O threads that a worker can use, and <code class="literal">task-max-threads</code> which sets the maximum number of threads that can be used for a particular task. The defaults for these two attributes are calculated based on the server’s CPU count.
			</p><p>
				See the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for instructions on how to <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#io_configure_worker">create and configure workers</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="monitoring_worker_statistics"/>Monitoring Worker Statistics</h2></div></div></div><p>
					You can view a worker’s runtime statistics using the management CLI. This exposes worker statistics such as connection count, thread count, and queue size.
				</p><p>
					The following command displays runtime statistics for the <code class="literal">default</code> worker:
				</p><pre class="screen">/subsystem=io/worker=<span class="emphasis"><em>default</em></span>:read-resource(include-runtime=true,recursive=true)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The number of core threads, which is tracked by the <code class="literal">core-pool-size</code> statistic, is currently always set to the same value as the maximum number of threads, which is tracked by the <code class="literal">max-pool-size</code> statistic.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="io_buffer_pools"/>Configuring Buffer Pools</h1></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					IO buffer pools are deprecated in JBoss EAP 7.2. While they are still set as the default in the current release, they will be replaced by <a class="link" href="undertow_tuning.html#undertow_byte_buffer_pools" title="Configuring Byte Buffer Pools">Undertow byte buffer pools</a> in a future release.
				</p></div><p>
				A buffer pool in the <code class="literal">io</code> subsystem is a pooled NIO buffer instance that is used specifically for I/O operations. Like <a class="link" href="io_tuning.html#io_workers" title="Configuring Workers">workers</a>, you can create separate buffer pools which can be dedicated to handle specific I/O tasks.
			</p><p>
				See the <a class="link" href="reference_material.html#io_attributes" title="IO Subsystem Attributes">IO Subsystem Attributes appendix</a> for the list of configurable buffer pool attributes.
			</p><p>
				The main buffer pool attribute that significantly affects performance is <code class="literal">buffer-size</code>. The default is calculated based on the RAM resources of your system, and is sufficient in most cases. If you are configuring this attribute manually, an ideal size for most servers is 16KB.
			</p><p>
				See the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for instructions on how to <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#io_configure_buffer_pool">create and configure buffer pools</a>.
			</p></div></div></body></html>