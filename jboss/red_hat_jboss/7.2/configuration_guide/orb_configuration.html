<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 15. ORB Configuration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="orb_configuration"/>Chapter 15. ORB Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="about_common_object_request_broker_architecture_corba"/>About Common Object Request Broker Architecture (CORBA)</h1></div></div></div><p>
				Common Object Request Broker Architecture (CORBA) is a standard that enables applications and services to work together even when they are written in multiple, otherwise-incompatible, languages or hosted on separate platforms. CORBA requests are brokered by a server-side component called an Object Request Broker (ORB). JBoss EAP provides an ORB instance, by means of the Open JDK ORB component.
			</p><p>
				The ORB is used internally for Java Transaction Service (JTS) transactions, and is also available for use by your own applications.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_the_orb_for_jts_transactions"/>Configuring the ORB for JTS Transactions</h1></div></div></div><p>
				In a default installation of JBoss EAP, the Object Request Broker (ORB) support for transactions is disabled. You can configure ORB settings in the <code class="literal">iiop-openjdk</code> subsystem using the management CLI or the management console.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The <code class="literal">iiop-openjdk</code> subsystem is available when using the <span class="emphasis"><em>full</em></span> or <span class="emphasis"><em>full-ha</em></span> profile in a managed domain, or the <code class="literal">standalone-full.xml</code> or <code class="literal">standalone-full-ha.xml</code> configuration file for a standalone server.
				</p></div><p>
				For a listing of the available configuration options for the <code class="literal">iiop-openjdk</code> subsystem, see <a class="link" href="reference_material.html#iiop_subsystem_attributes" title="IIOP Subsystem Attributes">IIOP Subsystem Attributes</a>.
			</p><h3><a id="configure_the_orb_using_the_management_cli"/>Configure the ORB Using the Management CLI</h3><p>
				You can configure each aspect of the ORB using the management CLI. This is the minimum configuration for the ORB to be used with JTS.
			</p><p>
				You can configure the following management CLI commands for a managed domain using the <code class="literal">full</code> profile. If necessary, change the profile to suit the one you need to configure. If you are using a standalone server, omit the <code class="literal">/profile=full</code> portion of the commands.
			</p><h4><a id="enable_the_security_interceptors"/>Enable the Security Interceptors</h4><p>
				Enable the <code class="literal">security</code> attribute by setting the value to <code class="literal">identity</code>.
			</p><pre class="screen">/profile=full/subsystem=iiop-openjdk:write-attribute(name=security,value=identity)</pre><h4><a id="enable_transactions_in_the_iiop_subsystem"/>Enable Transactions in the IIOP Subsystem</h4><p>
				To enable the ORB for JTS, set the value of <code class="literal">transactions</code> attribute to <code class="literal">full</code>, rather than the default <code class="literal">spec</code>.
			</p><pre class="screen">/profile=full/subsystem=iiop-openjdk:write-attribute(name=transactions, value=full)</pre><h4><a id="enable_jts_in_the_transactions_subsystem"/>Enable JTS in the Transactions Subsystem</h4><pre class="screen">/profile=full/subsystem=transactions:write-attribute(name=jts,value=true)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					For JTS activation, the server must be restarted as reload is not enough.
				</p></div><h3><a id="configure_the_orb_using_the_management_console"/>Configure the ORB Using the Management Console</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Select the <span class="strong"><strong>Configuration</strong></span> tab from the top of the management console. In a managed domain, you must select the appropriate profile to modify.
					</li><li class="listitem">
						Select <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>IIOP (OpenJDK)</strong></span> and click <span class="strong"><strong>View</strong></span>.
					</li><li class="listitem">
						Click <span class="strong"><strong>Edit</strong></span> and modify the attributes as needed.
					</li><li class="listitem">
						Click <span class="strong"><strong>Save</strong></span> to save the changes.
					</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_iiop_ssl"/>Configure IIOP to Use SSL/TLS with the Elytron Subsystem</h1></div></div></div><p>
				You can configure the <code class="literal">iiop-openjdk</code> subsystem to use SSL/TLS to secure communication between clients and servers. The <code class="literal">elytron</code> subsystem, as well as the legacy <code class="literal">security</code> subsystem, provide the necessary components for configuring SSL/TLS for the <code class="literal">iiop-openjdk</code> subsystem as well as other subsystems within JBoss EAP. Use the following steps to configure the <code class="literal">iiop-openjdk</code> subsystem to use the <code class="literal">elytron</code> subsystem for SSL/TLS.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Use the following management CLI command to display the current legacy SSL/TLS configuration in the <code class="literal">iiop-openjdk</code> subsystem.
					</p><pre class="screen">/subsystem=iiop-openjdk:read-attribute(name=security-domain)
{
    "outcome" =&gt; "success",
    "result" =&gt; "iiopSSLSecurityDomain"
}</pre><p class="simpara">
						The <code class="literal">iiop-openjdk</code> subsystem must use either the legacy <code class="literal">security</code> subsystem or the <code class="literal">elytron</code> subsystem for SSL/TLS. You cannot use both at the same time. The above command shows the <code class="literal">iiop-openjdk</code> subsystem is using a legacy security domain for handling SSL/TLS. Before you can configure the <code class="literal">iiop-openjdk</code> subsystem to use the <code class="literal">elytron</code> subsystem for SSL/TLS, you need to remove this reference:
					</p><pre class="screen">/subsystem=iiop-openjdk:undefine-attribute(name=security-realm)</pre><p class="simpara">
						If the <code class="literal">security-domain</code> attribute in the <code class="literal">iiop-openjdk</code> is not defined, you can proceed to the next step.
					</p></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">server-ssl-context</code>.
					</p><p class="simpara">
						To use SSL/TLS with the <code class="literal">iiop-openjdk</code> subsystem, you need to define a <code class="literal">server-ssl-context</code>. JBoss EAP uses the configuration provided by the <code class="literal">server-ssl-context</code> when making an SSL/TLS connection as a server. You can find more details on creating a <code class="literal">server-ssl-context</code> in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#elytron_one_way_ssl_apps">Enable One-way SSL/TLS for Applications using the Elytron Subsystem</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> guide.
					</p></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">client-ssl-context</code>.
					</p><p class="simpara">
						To use SSL/TLS with the <code class="literal">iiop-openjdk</code> subsystem, you need to define a <code class="literal">client-ssl-context</code>. JBoss EAP uses the configuration provided by the <code class="literal">client-ssl-context</code> when making an SSL/TLS connection as a client. You can find more details on creating a <code class="literal">client-ssl-context</code> in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#using_client_ssl_context">Using a client-ssl-context</a> in the <span class="emphasis"><em>How to Configure Server Security</em></span> guide.
					</p></li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">iiop-openjdk</code> subsystem to use the <code class="literal">client-ssl-context</code> and <code class="literal">server-ssl-context</code>.
					</p><div class="title"><strong>Example: Setting <code class="literal">client-ssl-context</code> and <code class="literal">server-ssl-context</code></strong></div><p>
							
</p><pre class="screen">batch

/subsystem=iiop-openjdk:write-attribute(name=client-ssl-context,value=iiopClientSSC)

/subsystem=iiop-openjdk:write-attribute(name=server-ssl-context,value=iiopServerSSC)

run-batch

reload</pre><p>

						</p></li><li class="listitem"><p class="simpara">
						Configure the connection to and from the <code class="literal">iiop-openjdk</code> subsystem.
					</p><p class="simpara">
						You can indicate whether or not SSL/TLS connections are required when connecting to and from the <code class="literal">iiop-openjdk</code> subsystem by adjusting the following attributes:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								To enable support for SSL in the <code class="literal">iiop-openjdk</code> subsystem, set <code class="literal">support-ssl</code> to <code class="literal">true</code>. Defaults to <code class="literal">false</code>.
							</li><li class="listitem">
								To require SSL/TLS connections from the <code class="literal">iiop-openjdk</code> subsystem, set <code class="literal">client-requires-ssl</code> to <code class="literal">true</code>. Defaults to <code class="literal">false</code>.
							</li><li class="listitem">
								To require SSL/TLS connections to the <code class="literal">iiop-openjdk</code> subsystem, set <code class="literal">server-requires-ssl</code> to <code class="literal">true</code>. Defaults to <code class="literal">false</code>. Note that setting this to <code class="literal">true</code> will block attempts to connect to the non-SSL IIOP socket.
							</li><li class="listitem">
								To adjust the <code class="literal">socket-binding</code>, set <code class="literal">ssl-socket-binding</code> to the desired binding. Defaults to <code class="literal">iiop-ssl</code>.
							</li></ul></div><div class="title"><strong>Example: Setting SSL/TLS Connections to and from IIOP as Required</strong></div><p>
							
</p><pre class="screen">/subsystem=iiop-openjdk:write-attribute(name=support-ssl,value=true)

/subsystem=iiop-openjdk:write-attribute(name=client-requires-ssl,value=true)

/subsystem=iiop-openjdk:write-attribute(name=server-requires-ssl,value=true)

/subsystem=iiop-openjdk:write-attribute(name=ssl-socket-binding,value=iiop-ssl)

reload</pre><p>

						</p></li></ol></div></div></div></body></html>