<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 12. Datasource Management</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="datasource_management"/>Chapter 12. Datasource Management</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="about_jboss_eap_datasources"/>About JBoss EAP Datasources</h1></div></div></div><h3><a id="about_jdbc"/>About JDBC</h3><p>
				The JDBC API is the standard that defines how databases are accessed by Java applications. An application configures a datasource that references a JDBC driver. Application code can then be written against the driver, rather than the database. The driver converts the code to the database language. This means that if the correct driver is installed, an application can be used with any supported database.
			</p><p>
				For more information, see the <a class="link" href="http://jcp.org/en/jsr/detail?id=221">JDBC 4.0 specification</a>.
			</p><h3><a id="supported_databases"/>Supported Databases</h3><p>
				See <a class="link" href="https://access.redhat.com/articles/2026253">JBoss EAP supported configurations</a> for the list of JDBC-compliant databases supported by JBoss EAP 7.
			</p><h3><a id="datasource_types"/>Datasource Types</h3><p>
				The two general types of resources are referred to as <span class="emphasis"><em>datasources</em></span> and <span class="emphasis"><em>XA datasources</em></span>.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Non-XA datasources</span></dt><dd>
							Used for applications that do not use transactions, or applications that use transactions with a single database.
						</dd><dt><span class="term">XA datasources</span></dt><dd>
							Used by applications that use multiple databases or other XA resources as part of one XA transaction. XA datasources introduce additional overhead.
						</dd></dl></div><p>
				You specify which type of datasource to use when creating the datasource using the JBoss EAP management interfaces.
			</p><h3><a id="the_exampleds_datasource"/>The ExampleDS datasource</h3><p>
				JBoss EAP ships with an example datasource configuration, <span class="emphasis"><em>ExampleDS</em></span>, which is provided to demonstrate how datasources are defined. This datasource uses an H2 database, which is a lightweight, relational database management system that provides developers with the ability to quickly build applications.
			</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
					The <span class="emphasis"><em>ExampleDS</em></span> datasource and the H2 database should <span class="emphasis"><em>not</em></span> be used in a production environment. This is a very small, self-contained datasource that supports all of the standards needed for testing and building applications, but is not robust or scalable enough for production use.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jdbc_drivers"/>JDBC Drivers</h1></div></div></div><p>
				Before defining datasources in JBoss EAP for your applications to use, you must first install the appropriate JDBC driver.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="install_a_jdbc_driver_as_a_core_module"/>Installing a JDBC Driver as a Core Module</h2></div></div></div><p>
					To install a JDBC driver as a core module, you must first <a class="link" href="datasource_management.html#add_jdbc_driver_core_module_datasources" title="Add the JDBC Driver as a Core Module">add the JDBC driver as a core module</a> and then <a class="link" href="datasource_management.html#register_jdbc_driver" title="Register the JDBC Driver">register the JDBC driver</a> in the <code class="literal">datasources</code> subsystem.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="add_jdbc_driver_core_module_datasources"/>Add the JDBC Driver as a Core Module</h3></div></div></div><p>
						JDBC drivers can be installed as a core module using the management CLI using the following steps.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Download the JDBC driver.
							</p><p class="simpara">
								Download the appropriate JDBC driver from your database vendor. See <a class="link" href="datasource_management.html#jdbc_driver_download_locations" title="JDBC Driver Download Locations">JDBC Driver Download Locations</a> for standard download locations for JDBC drivers of common databases.
							</p><p class="simpara">
								Make sure to extract the archive if the JDBC driver JAR file is contained within a ZIP or TAR archive.
							</p></li><li class="listitem">
								Start the JBoss EAP server.
							</li><li class="listitem"><p class="simpara">
								Launch the management CLI.
							</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh</pre></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">module add</code> management CLI command to add the new core module.
							</p><pre class="screen">module add --name=<span class="emphasis"><em>MODULE_NAME</em></span> --resources=<span class="emphasis"><em>PATH_TO_JDBC_JAR</em></span> --dependencies=<span class="emphasis"><em>DEPENDENCIES</em></span></pre><p class="simpara">
								For example, the following command adds a MySQL JDBC driver module.
							</p><pre class="screen">module add --name=com.mysql --resources=<span class="emphasis"><em>/path/to</em></span>/mysql-connector-java-8.0.12.jar --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
									Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
								</p><p>
									Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
								</p><p>
									See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
								</p></div><p class="simpara">
								Execute <code class="literal">module --help</code> for more details on using this command to add and remove modules.
							</p></li></ol></div><p>
						You must next register it as a JDBC driver for it to be referenced by application datasources.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="register_jdbc_driver"/>Register the JDBC Driver</h3></div></div></div><p>
						After the driver has been <a class="link" href="datasource_management.html#add_jdbc_driver_core_module_datasources" title="Add the JDBC Driver as a Core Module">installed as a core module</a>, you must register it as a JDBC driver using the following management CLI command. When running in a managed domain, be sure to precede this command with <code class="literal">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code>.
					</p><pre class="screen">/subsystem=datasources/jdbc-driver=<span class="emphasis"><em>DRIVER_NAME</em></span>:add(driver-name=<span class="emphasis"><em>DRIVER_NAME</em></span>,driver-module-name=<span class="emphasis"><em>MODULE_NAME</em></span>,driver-xa-datasource-class-name=<span class="emphasis"><em>XA_DATASOURCE_CLASS_NAME</em></span>, driver-class-name=<span class="emphasis"><em>DRIVER_CLASS_NAME</em></span>)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The <code class="literal">driver-class-name</code> parameter is only required if the JDBC driver jar defines more than one class in its <code class="literal">/META-INF/services/java.sql.Driver</code> file.
						</p><p>
							For example, the <code class="literal">/META-INF/services/java.sql.Driver</code> file in the MySQL 5.1.36 JDBC driver JAR defines two classes:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									com.mysql.jdbc.Driver
								</li><li class="listitem">
									com.mysql.fabric.jdbc.FabricMySQLDriver
								</li></ul></div><p>
							For this case, you would pass in <code class="literal">driver-class-name=com.mysql.jdbc.Driver</code>.
						</p></div><p>
						For example, the following command registers a MySQL JDBC driver.
					</p><pre class="screen">/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.cj.jdbc.MysqlXADataSource, driver-class-name=com.mysql.jdbc.Driver)</pre><p>
						The JDBC driver is now available to be referenced by application datasources.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="install_a_jdbc_driver_as_a_jar_deployment"/>Installing a JDBC Driver as a JAR Deployment</h2></div></div></div><p>
					JDBC drivers can be installed as a JAR deployment using either the management CLI or the management console. As long as the driver is JDBC 4-compliant, it will automatically be recognized and installed as a JDBC driver upon deployment.
				</p><p>
					The following steps describe how to install a JDBC driver using the management CLI.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The recommended installation method for JDBC drivers is to install them as a <a class="link" href="datasource_management.html#install_a_jdbc_driver_as_a_core_module" title="Installing a JDBC Driver as a Core Module">core module</a>.
					</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Download the JDBC driver.
						</p><p class="simpara">
							Download the appropriate JDBC driver from your database vendor. See <a class="link" href="datasource_management.html#jdbc_driver_download_locations" title="JDBC Driver Download Locations">JDBC Driver Download Locations</a> for standard download locations for JDBC drivers of common databases.
						</p><p class="simpara">
							Make sure to extract the archive if the JDBC driver JAR file is contained within a ZIP or TAR archive.
						</p></li><li class="listitem">
							If the JDBC driver is not JDBC 4-compliant, see the steps to <a class="link" href="datasource_management.html#update_jdbc_driver_jar_jdbc_4_compliant" title="Update a JDBC Driver JAR to be JDBC 4-Compliant">Update a JDBC Driver JAR to be JDBC 4-Compliant</a>.
						</li><li class="listitem"><p class="simpara">
							Deploy the JAR to JBoss EAP.
						</p><pre class="screen">deploy <span class="emphasis"><em>PATH_TO_JDBC_JAR</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								In a managed domain, specify the appropriate server groups.
							</p></div><p class="simpara">
							For example, the following command deploys a MySQL JDBC driver.
						</p><pre class="screen">deploy <span class="emphasis"><em>/path/to</em></span>/mysql-connector-java-8.0.12.jar</pre><p class="simpara">
							A message will be displayed in the JBoss EAP server log that displays the deployed driver name, which will be used when defining datasources.
						</p><pre class="screen">WFLYJCA0018: Started Driver service with driver-name = mysql-connector-java-8.0.12.jar</pre></li></ol></div><p>
					The JDBC driver is now available to be referenced by application datasources.
				</p><h4><a id="update_jdbc_driver_jar_jdbc_4_compliant"/>Update a JDBC Driver JAR to be JDBC 4-Compliant</h4><p>
					If the JDBC driver JAR is not JDBC 4-compliant, it can be made deployable using the following steps.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Create an empty temporary directory.
						</li><li class="listitem">
							Create a <code class="literal">META-INF</code> subdirectory.
						</li><li class="listitem">
							Create a <code class="literal">META-INF/services</code> subdirectory.
						</li><li class="listitem"><p class="simpara">
							Create a <code class="literal">META-INF/services/java.sql.Driver</code> file and add one line to indicate the fully-qualified class name of the JDBC driver.
						</p><p class="simpara">
							For example, the below line would be added for a MySQL JDBC driver.
						</p><pre class="screen">com.mysql.jdbc.Driver</pre></li><li class="listitem"><p class="simpara">
							Use the JAR command-line tool to add this new file to the JAR.
						</p><pre class="screen">jar \-uf jdbc-driver.jar META-INF/services/java.sql.Driver</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="jdbc_driver_download_locations"/>JDBC Driver Download Locations</h2></div></div></div><p>
					The following table gives the standard download locations for JDBC drivers of common databases used with JBoss EAP.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						These links point to third-party websites which are not controlled or actively monitored by Red Hat. For the most up-to-date drivers for your database, check your database vendor’s documentation and website.
					</p></div><div class="table"><a id="idm140150821400960"/><p class="title"><strong>Table 12.1. JDBC Driver Download Locations</strong></p><div class="table-contents"><table summary="JDBC Driver Download Locations" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Vendor</th><th style="text-align: left" valign="top">Download Location</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									MySQL
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<a class="link" href="http://www.mysql.com/products/connector/">http://www.mysql.com/products/connector/</a>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									PostgreSQL
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<a class="link" href="http://jdbc.postgresql.org/">http://jdbc.postgresql.org/</a>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Oracle
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<a class="link" href="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html</a>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									IBM
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<a class="link" href="http://www-01.ibm.com/support/docview.wss?uid=swg21363866">http://www-01.ibm.com/support/docview.wss?uid=swg21363866</a>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Sybase
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The jConnect JDBC driver is part of the SDK for <a class="link" href="http://go.sap.com/product/data-mgmt/sybase-ase.html">SAP ASE</a> installation. Currently there is not a separate download site for this driver by itself.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Microsoft
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<a class="link" href="http://msdn.microsoft.com/data/jdbc/">http://msdn.microsoft.com/data/jdbc/</a>
								</p>
								 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="access_vendor_specific_classes"/>Access Vendor-Specific Classes</h2></div></div></div><p>
					In some cases, it is necessary for an application to use vendor-specific functionality that is not part of the JDBC API. In these cases, you can access vendor-specific APIs by declaring a dependency in that application.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						This is advanced usage. Only applications that need functionality not found in the JDBC API should implement this procedure.
					</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						This process is required when using the reauthentication mechanism, and accessing vendor-specific classes.
					</p></div><p>
					You can define a dependency for an application using either the <code class="literal">MANIFEST.MF</code> file or a <code class="literal">jboss-deployment-structure.xml</code> file.
				</p><p>
					If you have not yet done so, <a class="link" href="datasource_management.html#install_a_jdbc_driver_as_a_core_module" title="Installing a JDBC Driver as a Core Module">install a JDBC driver as a core module</a>.
				</p><h4><a id="using_the_literal_manifest_mf_literal_file"/>Using the <code class="literal">MANIFEST.MF</code> File</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Edit the application’s <code class="literal">META-INF/MANIFEST.MF</code> file.
						</li><li class="listitem"><p class="simpara">
							Add the <code class="literal">Dependencies</code> line and specify the module name.
						</p><p class="simpara">
							For example, the below line declares the <code class="literal">com.mysql</code> module as a dependency.
						</p><pre class="screen">Dependencies: com.mysql</pre></li></ol></div><h4><a id="using_a_literal_jboss_deployment_structure_xml_literal_file"/>Using a <code class="literal">jboss-deployment-structure.xml</code> File</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Create a file called <code class="literal">jboss-deployment-structure.xml</code> in the <code class="literal">META-INF/</code> or <code class="literal">WEB-INF/</code> folder of the application.
						</li><li class="listitem"><p class="simpara">
							Specify the module using the <code class="literal">dependencies</code> element.
						</p><p class="simpara">
							For example, the following example <code class="literal">jboss-deployment-structure.xml</code> file declares the <code class="literal">com.mysql</code> module as a dependency.
						</p><pre class="programlisting">&lt;jboss-deployment-structure&gt;
  &lt;deployment&gt;
    &lt;dependencies&gt;
      &lt;module name="com.mysql"/&gt;
    &lt;/dependencies&gt;
  &lt;/deployment&gt;
&lt;/jboss-deployment-structure&gt;</pre></li></ol></div><p>
					The example code below accesses the MySQL API.
				</p><pre class="programlisting">import java.sql.Connection;
import org.jboss.jca.adapters.jdbc.WrappedConnection;

...

Connection c = ds.getConnection();
WrappedConnection wc = (WrappedConnection)c;
com.mysql.jdbc.Connection mc = wc.getUnderlyingConnection();</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Follow the vendor-specific API guidelines closely, as the connection is being controlled by the IronJacamar container.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="adding_datasources"/>Creating Datasources</h1></div></div></div><p>
				Datasources can be created using the management console or the management CLI.
			</p><p>
				JBoss EAP 7 allows you to use expressions in datasource attribute values, such as the <code class="literal">enabled</code> attribute. See the <a class="link" href="jboss_eap_management.html#property_replacement" title="Property Replacement">Property Replacement</a> section for details on using expressions in the configuration.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="create_a_non_xa_datasource"/>Create a Non-XA Datasource</h2></div></div></div><p>
					You can create non-XA datasources using either the management CLI or the management console.
				</p><h4><a id="non-xa-datasource-using-management-console"/>Defining a Non-XA Datasource Using the Management Console</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Navigate to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
						</li><li class="listitem">
							Click the Add (<span class="strong"><strong>+</strong></span>) button and choose <span class="strong"><strong>Add Datasource</strong></span>.
						</li><li class="listitem">
							It opens the <span class="strong"><strong>Add Datasource</strong></span> wizard where you can choose the datasource type and click <span class="strong"><strong>Next</strong></span>. This creates a template for your database. The following pages of the wizard are prefilled with values specific for the selected datasource. This makes the datasource creation process easy.
						</li><li class="listitem">
							You can test your connection on the <span class="strong"><strong>Test Connection</strong></span> page before finishing the datasource creation process.
						</li><li class="listitem">
							Review the details and click <span class="strong"><strong>Finish</strong></span> to create the datasource.
						</li></ol></div><h4><a id="non-xa-datasource-using-management-cli"/>Defining a Non-XA Datasource Using the Management CLI</h4><p>
					Non-XA datasources can be defined using the <code class="literal">data-source add</code> management CLI command.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							If you have not yet done so, install and register the appropriate <a class="link" href="datasource_management.html#install_a_jdbc_driver_as_a_core_module" title="Installing a JDBC Driver as a Core Module">JDBC Driver as a Core Module</a>.
						</li><li class="listitem"><p class="simpara">
							Define the datasource using the <code class="literal">data-source add</code> command, specifying the appropriate argument values.
						</p><pre class="screen">data-source add --name=<span class="emphasis"><em>DATASOURCE_NAME</em></span> --jndi-name=<span class="emphasis"><em>JNDI_NAME</em></span> --driver-name=<span class="emphasis"><em>DRIVER_NAME</em></span>  --connection-url=<span class="emphasis"><em>CONNECTION_URL</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								In a managed domain, you must specify the <code class="literal">--profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> argument.
							</p></div><p class="simpara">
							See the <a class="link" href="datasource_management.html#non_xa_datasource_parameters_help" title="Datasource Parameters">Datasource Parameters</a> section below for tips on these parameter values.
						</p></li></ol></div><p>
					For detailed examples, see the <a class="link" href="datasource_management.html#example_datasource_configurations" title="Example Datasource Configurations">Example Datasource Configurations</a> for the supported databases.
				</p><h4><a id="non_xa_datasource_parameters_help"/>Datasource Parameters</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">jndi-name</span></dt><dd>
								The JNDI name for the datasource must start with <code class="literal">java:/</code> or <code class="literal">java:jboss/</code>. For example, <code class="literal">java:jboss/datasources/ExampleDS</code>.
							</dd><dt><span class="term">driver-name</span></dt><dd><p class="simpara">
								The driver name value depends on whether the JDBC driver was installed as a core module or a JAR deployment.
							</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
										For a core module, the driver name value will be the name given to the JDBC driver when it was registered.
									</li><li class="listitem"><p class="simpara">
										For a JAR deployment, the driver name is the name of the JAR if there is only one class listed in its <code class="literal">/META-INF/services/java.sql.Driver</code> file. If there are multiple classes listed, then the value is <code class="literal"><span class="emphasis"><em>JAR_NAME</em></span></code> + "_" + <code class="literal"><span class="emphasis"><em>DRIVER_CLASS_NAME</em></span></code> + "_" + <code class="literal"><span class="emphasis"><em>MAJOR_VERSION</em></span></code> + "_" + <code class="literal"><span class="emphasis"><em>MINOR_VERSION</em></span></code> (for example <code class="literal">mysql-connector-java-5.1.36-bin.jar_com.mysql.jdbc.Driver_5_1</code>).
									</p><p class="simpara">
										You can also see the driver name listed in the JBoss EAP server log when the JDBC JAR is deployed.
									</p><pre class="screen">WFLYJCA0018: Started Driver service with driver-name = mysql-connector-java-5.1.36-bin.jar_com.mysql.jdbc.Driver_5_1</pre></li></ol></div></dd><dt><span class="term">connection-url</span></dt><dd>
								For details on the connection URL formats for the supported databases, see the list of <a class="link" href="reference_material.html#datasource_connection_urls" title="Datasource Connection URLs">Datasource Connection URLs</a>.
							</dd></dl></div><p>
					For a complete listing of all available datasource attributes, see the <a class="link" href="reference_material.html#datasource_parameters" title="Datasource Attributes">Datasource Attributes</a> section.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="create_an_xa_datasource"/>Create an XA Datasource</h2></div></div></div><p>
					You can create XA datasources using either the management CLI or the management console.
				</p><h4><a id="create_an_xa_datasource_using_the_management_console"/>Defining an XA Datasource Using the Management Console</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Navigate to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
						</li><li class="listitem">
							Click the Add (<span class="strong"><strong>+</strong></span>) button and choose <span class="strong"><strong>Add XA Datasource</strong></span>.
						</li><li class="listitem">
							It opens the <span class="strong"><strong>Add XA Datasource</strong></span> wizard where you can choose the datasource type and click <span class="strong"><strong>Next</strong></span>. This creates a template for your database. The following pages of the wizard are prefilled with values specific for the selected datasource. This makes the datasource creation process easy.
						</li><li class="listitem">
							You can test your connection on the <span class="strong"><strong>Test Connection</strong></span> page before finishing the datasource creation process.
						</li><li class="listitem">
							Review the details and click <span class="strong"><strong>Finish</strong></span> to create the datasource.
						</li></ol></div><h4><a id="create_an_xa_datasource_using_the_management_cli"/>Defining an XA Datasource Using the Management CLI</h4><p>
					XA datasources can be defined using the <code class="literal">xa-data-source add</code> management CLI command.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In a managed domain, you will need to specify the profile to use. Depending on the format of the management CLI command, you will either precede the command with <code class="literal">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> or pass in the <code class="literal">--profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> argument.
					</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							If you have not yet done so, install and register the appropriate <a class="link" href="datasource_management.html#install_a_jdbc_driver_as_a_core_module" title="Installing a JDBC Driver as a Core Module">JDBC Driver as a Core Module</a>.
						</li><li class="listitem"><p class="simpara">
							Define the datasource using the <code class="literal">xa-data-source add</code> command, specifying the appropriate argument values.
						</p><pre class="screen">xa-data-source add --name=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span> --jndi-name=<span class="emphasis"><em>JNDI_NAME</em></span> --driver-name=<span class="emphasis"><em>DRIVER_NAME</em></span> --xa-datasource-class=<span class="emphasis"><em>XA_DATASOURCE_CLASS</em></span> --xa-datasource-properties={"ServerName"=&gt;"<span class="emphasis"><em>HOST_NAME</em></span>","DatabaseName"=&gt;"<span class="emphasis"><em>DATABASE_NAME</em></span>"}</pre><p class="simpara">
							See the <a class="link" href="datasource_management.html#xa_datasource_parameters_help" title="Datasource Parameters">Datasource Parameters</a> section below for tips on these parameter values.
						</p></li><li class="listitem"><p class="simpara">
							Set <span class="emphasis"><em>XA datasource properties</em></span>.
						</p><p class="simpara">
							At least one <span class="emphasis"><em>XA datasource property</em></span> is required when defining an XA datasource or you will receive an error when adding the datasource in the previous step. Any properties that were not set when defining the XA datasource can be set individually afterward.
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									Set the server name.
								</p><pre class="screen">/subsystem=datasources/xa-data-source=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span>/xa-datasource-properties=ServerName:add(value=<span class="emphasis"><em>HOST_NAME</em></span>)</pre></li><li class="listitem"><p class="simpara">
									Set the database name.
								</p><pre class="screen">/subsystem=datasources/xa-data-source=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span>/xa-datasource-properties=DatabaseName:add(value=<span class="emphasis"><em>DATABASE_NAME</em></span>)</pre></li></ol></div></li></ol></div><p>
					For detailed examples, see the <a class="link" href="datasource_management.html#example_datasource_configurations" title="Example Datasource Configurations">Example Datasource Configurations</a> for the supported databases.
				</p><h4><a id="xa_datasource_parameters_help"/>Datasource Parameters</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">jndi-name</span></dt><dd>
								The JNDI name for the datasource must start with <code class="literal">java:/</code> or <code class="literal">java:jboss/</code>. For example, <code class="literal">java:jboss/datasources/ExampleDS</code>.
							</dd><dt><span class="term">driver-name</span></dt><dd><p class="simpara">
								The driver name value depends on whether the JDBC driver was installed as a core module or a JAR deployment.
							</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
										For a core module, the driver name value will be the name given to the JDBC driver when it was registered.
									</li><li class="listitem"><p class="simpara">
										For a JAR deployment, the driver name is the name of the JAR if there is only one class listed in its <code class="literal">/META-INF/services/java.sql.Driver</code> file. If there are multiple classes listed, then the value is <code class="literal"><span class="emphasis"><em>JAR_NAME</em></span></code> + "_" + <code class="literal"><span class="emphasis"><em>DRIVER_CLASS_NAME</em></span></code> + "_" + <code class="literal"><span class="emphasis"><em>MAJOR_VERSION</em></span></code> + "_" + <code class="literal"><span class="emphasis"><em>MINOR_VERSION</em></span></code>, for example, <code class="literal">mysql-connector-java-5.1.36-bin.jar_com.mysql.jdbc.Driver_5_1</code>.
									</p><p class="simpara">
										You can also see the driver name listed in the JBoss EAP server log when the JDBC JAR is deployed.
									</p><pre class="screen">WFLYJCA0018: Started Driver service with driver-name = mysql-connector-java-5.1.36-bin.jar_com.mysql.jdbc.Driver_5_1</pre></li></ol></div></dd><dt><span class="term">xa-datasource-class</span></dt><dd>
								Specify the XA datasource class for the JDBC driver’s implementation of the <code class="literal">javax.sql.XADataSource</code> class.
							</dd><dt><span class="term">xa-datasource-properties</span></dt><dd>
								At least one <span class="emphasis"><em>XA datasource property</em></span> is required when defining an XA datasource or you will receive an error when attempting to add it. Additional properties can also be added to the XA datasource after it has been defined.
							</dd></dl></div><p>
					For a complete listing of all available datasource attributes, see the <a class="link" href="reference_material.html#datasource_parameters" title="Datasource Attributes">Datasource Attributes</a> section.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="modifying_datasources"/>Modifying Datasources</h1></div></div></div><p>
				Datasources settings can be configured using the management console or the management CLI.
			</p><p>
				JBoss EAP 7 allows you to use expressions in datasource attribute values, such as the <code class="literal">enabled</code> attribute. See the <a class="link" href="jboss_eap_management.html#property_replacement" title="Property Replacement">Property Replacement</a> section for details on using expressions in the configuration.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modify_a_non_xa_datasource"/>Modify a Non-XA Datasource</h2></div></div></div><p>
					Non-XA datasource settings can be updated using the <code class="literal">data-source</code> management CLI command. You can also update datasource attributes from the management console by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						Non-XA datasources can be integrated with JTA transactions. To integrate the datasource with JTA, ensure that the <code class="literal">jta</code> parameter is set to <code class="literal">true</code>.
					</p></div><p>
					Settings for a datasource can be updated by using the following management CLI command.
				</p><pre class="screen">data-source --name=<span class="emphasis"><em>DATASOURCE_NAME</em></span> --<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>=<span class="emphasis"><em>ATTRIBUTE_VALUE</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In a managed domain, you must specify the <code class="literal">--profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> argument.
					</p></div><p>
					A server reload may be required for the changes to take effect.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modify_an_xa_datasource"/>Modify an XA Datasource</h2></div></div></div><p>
					XA datasource settings can be updated using the <code class="literal">xa-data-source</code> management CLI command. You can also update datasource attributes from the management console by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							Settings for an XA datasource can be updated by using the following management CLI command.
						</p><pre class="screen">xa-data-source --name=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span> --<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>=<span class="emphasis"><em>ATTRIBUTE_VALUE</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								In a managed domain, you must specify the <code class="literal">--profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> argument.
							</p></div></li><li class="listitem"><p class="simpara">
							An <span class="emphasis"><em>XA datasource property</em></span> can be added using the following management CLI command.
						</p><pre class="screen">/subsystem=datasources/xa-data-source=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span>/xa-datasource-properties=<span class="emphasis"><em>PROPERTY</em></span>:add(value=<span class="emphasis"><em>VALUE</em></span>)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								In a managed domain, you must precede this command with <code class="literal">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code>.
							</p></div></li></ul></div><p>
					A server reload may be required for the changes to take effect.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="removing_datasources"/>Removing Datasources</h1></div></div></div><p>
				Datasources can be removed using the management console or the management CLI.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="remove_a_non_xa_datasource"/>Remove a Non-XA Datasource</h2></div></div></div><p>
					Non-XA datasources can be removed using the <code class="literal">data-source remove</code> management CLI command. You can also use the management console to remove datasources by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
				</p><pre class="screen">data-source remove --name=<span class="emphasis"><em>DATASOURCE_NAME</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In a managed domain, you must specify the <code class="literal">--profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> argument.
					</p></div><p>
					The server will require a reload after the datasource is removed.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="remove_an_xa_datasource"/>Remove an XA Datasource</h2></div></div></div><p>
					XA datasources can be removed using the <code class="literal">xa-data-source remove</code> management CLI command. You can also use the management console to remove datasources by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
				</p><pre class="screen">xa-data-source remove --name=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In a managed domain, you must specify the <code class="literal">--profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code> argument.
					</p></div><p>
					The server will require a reload after the XA datasource is removed.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="testing_datasource_connections"/>Testing Datasource Connections</h1></div></div></div><p>
				You can use the management CLI or management console to test a datasource connection to verify that its settings are correct.
			</p><h3><a id="test_a_datasource_connection_using_the_management_cli"/>Test a Datasource Connection Using the Management CLI</h3><p>
				The following management CLI command can be used to test a datasource’s connection.
			</p><pre class="screen">/subsystem=datasources/data-source=<span class="emphasis"><em>DATASOURCE_NAME</em></span>:test-connection-in-pool</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					In a managed domain, you must precede this command with <code class="literal">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server=<span class="emphasis"><em>SERVER_NAME</em></span></code>. If you are testing an XA datasource, replace <code class="literal">data-source=<span class="emphasis"><em>DATASOURCE_NAME</em></span></code> with <code class="literal">xa-data-source=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span></code>.
				</p></div><h3><a id="test_a_datasource_connection_using_the_management_console"/>Test a Datasource Connection Using the Management Console</h3><p>
				When using the <span class="strong"><strong>Add Datasource</strong></span> wizard in the management console, you have the opportunity to test the connection before creating the datasource. On the <span class="strong"><strong>Test Connection</strong></span> screen of the wizard, click the <span class="strong"><strong>Test Connection</strong></span> button.
			</p><p>
				Once a datasource has been added, you can test the connection by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>, selecting the datasource, and choosing <span class="strong"><strong>Test Connection</strong></span> from the drop down.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="flushing_datasource_connections"/>Flushing Datasource Connections</h1></div></div></div><p>
				You can flush datasource connections using the following management CLI commands.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					In a managed domain, you must precede these commands with <code class="literal">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server=<span class="emphasis"><em>SERVER_NAME</em></span></code>.
				</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						Flush all connections in the pool.
					</p><pre class="screen">/subsystem=datasources/data-source=<span class="emphasis"><em>DATASOURCE_NAME</em></span>:flush-all-connection-in-pool</pre></li><li class="listitem"><p class="simpara">
						Gracefully flush all connections in the pool.
					</p><pre class="screen">/subsystem=datasources/data-source=<span class="emphasis"><em>DATASOURCE_NAME</em></span>:flush-gracefully-connection-in-pool</pre><p class="simpara">
						The server will wait until connections become idle before flushing them.
					</p></li><li class="listitem"><p class="simpara">
						Flush all idle connections in the pool.
					</p><pre class="screen">/subsystem=datasources/data-source=<span class="emphasis"><em>DATASOURCE_NAME</em></span>:flush-idle-connection-in-pool</pre></li><li class="listitem"><p class="simpara">
						Flush all invalid connections in the pool.
					</p><pre class="screen">/subsystem=datasources/data-source=<span class="emphasis"><em>DATASOURCE_NAME</em></span>:flush-invalid-connection-in-pool</pre><p class="simpara">
						The server will flush all connections that it determines to be invalid, for example, by the <code class="literal">valid-connection-checker-class-name</code> or <code class="literal">check-valid-connection-sql</code> validation mechanism discussed in <a class="link" href="datasource_management.html#configure_database_connection_validation_settings" title="Database Connection Validation">Database Connection Validation</a>.
					</p></li></ul></div><p>
				You can also flush connections using the management console. From the <span class="strong"><strong>Runtime</strong></span> tab, select the server, select <span class="strong"><strong>Datasources</strong></span>, choose a datasource, and use the drop down to select the appropriate action.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="xa_datasource_recovery"/>XA Datasource Recovery</h1></div></div></div><p>
				An XA datasource is a datasource that can participate in an XA global transaction, which is coordinated by the transaction manager and can span multiple resources in a single transaction. If one of the participants fails to commit its changes, the other participants abort the transaction and restore their state as it was before the transaction occurred. This is to maintain consistency and avoid potential data loss or corruption.
			</p><p>
				XA recovery is the process of ensuring that all resources affected by a transaction are updated or rolled back, even if any of the resources or transaction participants crash or become unavailable. XA recovery happens without user intervention.
			</p><p>
				Each XA resource needs to have a recovery module associated with its configuration. The recovery module is the code that is executed when recovery is being performed. JBoss EAP automatically registers recovery modules for JDBC XA resources. You can register a custom module with your XA datasource if you wish to implement custom recovery code. The recovery module must extend class <code class="literal">com.arjuna.ats.jta.recovery.XAResourceRecovery</code>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_xa_recovery"/>Configuring XA Recovery</h2></div></div></div><p>
					For most JDBC resources, the recovery module is automatically associated with the resource. In these cases, you only need to configure the options that allow the recovery module to connect to your resource to perform recovery.
				</p><p>
					The following table describes the XA datasource parameters specific to XA recovery. Each of these configuration attributes can be set during datasource creation or afterward. You can set them using either the management console or the management CLI. See <a class="link" href="datasource_management.html#modify_an_xa_datasource" title="Modify an XA Datasource">Modify an XA Datasource</a> for information on configuring XA datasources.
				</p><div class="table"><a id="idm140150821124512"/><p class="title"><strong>Table 12.2. Datasource Parameters for XA Recovery</strong></p><div class="table-contents"><table summary="Datasource Parameters for XA Recovery" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Attribute</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									recovery-username
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The user name to use to connect to the resource for recovery. Note that if this is not specified, the datasource security settings will be used.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									recovery-password
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The password to use to connect to the resource for recovery. Note that if this is not specified, the datasource security settings will be used.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									recovery-security-domain
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The security domain to use to connect to the resource for recovery.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									recovery-plugin-class-name
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If you need to use a custom recovery module, set this attribute to the fully-qualified class name of the module. The module should extend class <code class="literal">com.arjuna.ats.jta.recovery.XAResourceRecovery</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									recovery-plugin-properties
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If you use a custom recovery module which requires properties to be set, set this attribute to the list of comma-separated <code class="literal"><span class="emphasis"><em>KEY</em></span>=<span class="emphasis"><em>VALUE</em></span></code> pairs for the properties.
								</p>
								 </td></tr></tbody></table></div></div><div class="title"><strong>Disable XA Recovery</strong></div><p>
						If multiple XA datasources connect to the same physical database, then XA recovery typically needs to be configured for only one of them.
					</p><p>
					Use the following management CLI command to disable recovery for an XA datasource:
				</p><pre class="screen">/subsystem=datasources/xa-data-source=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span>:write-attribute(name=no-recovery,value=true)</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="vendor_specific_xa_recovery"/>Vendor-Specific XA Recovery</h2></div></div></div><h4><a id="vendor_specific_configuration"/>Vendor-Specific Configuration</h4><p>
					Some databases require specific configurations in order to cooperate in XA transactions managed by the JBoss EAP transaction manager. For detailed and up-to-date information, see your database vendor’s documentation.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MySQL</span></dt><dd>
								No special configuration is required. For more information, see the MySQL documentation.
							</dd><dt><span class="term">PostgreSQL and Postgres Plus Advanced Server</span></dt><dd>
								For PostgreSQL to be able to handle XA transactions, change the configuration parameter <code class="literal">max_prepared_transactions</code> to a value greater than <code class="literal">0</code> and equal to or greater than <code class="literal">max_connections</code>.
							</dd><dt><span class="term">Oracle</span></dt><dd><p class="simpara">
								Ensure that the Oracle user, <code class="literal">USER</code>, has access to the tables needed for recovery.
							</p><pre class="programlisting">GRANT SELECT ON sys.dba_pending_transactions TO USER;
GRANT SELECT ON sys.pending_trans$ TO USER;
GRANT SELECT ON sys.dba_2pc_pending TO USER;
GRANT EXECUTE ON sys.dbms_xa TO USER;</pre><p class="simpara">
								If the Oracle user does not have the proper permissions, you may see an error such as the following:
							</p><pre class="screen">WARN  [com.arjuna.ats.jta.logging.loggerI18N] [com.arjuna.ats.internal.jta.recovery.xarecovery1] Local XARecoveryModule.xaRecovery  got XA exception javax.transaction.xa.XAException, XAException.XAER_RMERR</pre></dd><dt><span class="term">Microsoft SQL Server</span></dt><dd>
								For more information, see the Microsoft SQL Server documentation, including <a class="link" href="http://msdn.microsoft.com/en-us/library/aa342335.aspx">http://msdn.microsoft.com/en-us/library/aa342335.aspx</a>.
							</dd><dt><span class="term">IBM DB2</span></dt><dd>
								No special configuration is required. For more information, see the IBM DB2 documentation.
							</dd><dt><span class="term">Sybase</span></dt><dd><p class="simpara">
								Sybase expects XA transactions to be enabled on the database. Without correct database configuration, XA transactions will not work. The <code class="literal">enable xact coordination</code> parameter enables or disables Adaptive Server transaction coordination services. When this parameter is enabled, Adaptive Server ensures that updates to remote Adaptive Server data commit or roll back with the original transaction.
							</p><p class="simpara">
								To enable transaction coordination, use:
							</p><pre class="screen">sp_configure 'enable xact coordination', 1</pre></dd><dt><span class="term">MariaDB</span></dt><dd>
								No special configuration is required. For more information, see the MariaDB documentation.
							</dd></dl></div><h4><a id="known_issues"/>Known Issues</h4><p>
					These known issues with handling XA transactions are for the specific database and JDBC driver versions supported with JBoss EAP 7. For up-to-date information on the supported databases, see <a class="link" href="https://access.redhat.com/articles/2026253">JBoss EAP supported configurations</a>.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MySQL</span></dt><dd>
								MySQL is not fully capable of handling XA transactions. If a client is disconnected from MySQL, then all the information about such transactions is lost. See this <a class="link" href="http://bugs.mysql.com/bug.php?id=12161">MySQL bug</a> for more information. Note that this issue was fixed in MySQL 5.7.
							</dd><dt><span class="term">PostgreSQL and Postgres Plus Advanced Server</span></dt><dd><p class="simpara">
								The JDBC driver returns the <code class="literal">XAER_RMERR</code> XAException error code when a network failure occurs during the commit phase of two-phase commit (2PC). This error signals an unrecoverable catastrophic event to the transaction manager, but the transaction is left in the <code class="literal">in-doubt</code> state on the database side and could be easily corrected after network connection is established again. The correct return code should be <code class="literal">XAER_RMFAIL</code> or <code class="literal">XAER_RETRY</code>. The incorrect error code causes the transaction to be left in the <code class="literal">Heuristic</code> state on the JBoss EAP side and holding locks in the database which requires manual intervention. See this <a class="link" href="https://github.com/pgjdbc/pgjdbc/issues/236">PostgreSQL bug</a> for more information.
							</p><p class="simpara">
								If a connection failure happens when the one-phase commit optimization is used, the JDBC driver returns <code class="literal">XAER_RMERR</code>, but the <code class="literal">XAER_RMFAIL</code> error code should be returned. This could lead to data inconsistency if the database commits data during one-phase commit and the connection goes down at that moment, then the client is informed that transaction was rolled back.
							</p><p class="simpara">
								The Postgres Plus JDBC driver returns XIDs for all prepared transactions that exist in the Postgres Plus Server, so there is no way to determine the database to which the XID belongs. If you define more than one data source for the same database in JBoss EAP, an in-doubt transaction recovery attempt could be run under wrong account, which causes the recovery to fail.
							</p></dd><dt><span class="term">Oracle</span></dt><dd><p class="simpara">
								The JDBC driver returns XIDs belonging to all users on the database instance, when the Recovery Manager calls recovery using datasource configured with some user credentials. The JDBC driver throws the exception <code class="literal">ORA-24774: cannot switch to specified transaction</code> because it tries to recover XIDs belonging to other users.
							</p><p class="simpara">
								The workaround for this issue is to grant <code class="literal">FORCE ANY TRANSACTION</code> privilege to the user whose credentials are used in recovery datasource configuration. More information about configuring the privilege can be found here: <a class="link" href="http://docs.oracle.com/database/121/ADMIN/ds_txnman.htm#ADMIN12259">http://docs.oracle.com/database/121/ADMIN/ds_txnman.htm#ADMIN12259</a>.
							</p></dd><dt><span class="term">Microsoft SQL Server</span></dt><dd><p class="simpara">
								The JDBC driver returns the <code class="literal">XAER_RMERR</code> XAException error code when a network failure occurs during the commit phase of two-phase commit (2PC). This error signals an unrecoverable catastrophic event to the transaction manager, but the transaction is left in the <code class="literal">in-doubt</code> state on the database side and could be easily corrected after network connection is established again. The correct return code should be <code class="literal">XAER_RMFAIL</code> or <code class="literal">XAER_RETRY</code>. The incorrect error code causes the transaction to be left in the <code class="literal">Heuristic</code> state on the JBoss EAP side and holding locks in the database which requires manual intervention. See this <a class="link" href="https://connect.microsoft.com/SQLServer/feedback/details/1207381/jdbc-driver-is-not-xa-compliant-in-case-of-connection-failure-error-code-xaer-rmerr-is-returned-instead-of-xaer-rmretry">Microsoft SQL Server issue report</a> for more information.
							</p><p class="simpara">
								If a connection failure happens when the one-phase commit optimization is used, the JDBC driver returns <code class="literal">XAER_RMERR</code>, but the <code class="literal">XAER_RMFAIL</code> error code should be returned. This could lead to data inconsistency if the database commits data during one-phase commit and the connection goes down at that moment, then the client is informed that transaction was rolled back.
							</p></dd><dt><span class="term">IBM DB2</span></dt><dd>
								If a connection failure happens during a one-phase commit, the JDBC driver returns <code class="literal">XAER_RETRY</code>, but the <code class="literal">XAER_RMFAIL</code> error code should be returned. This could lead to data inconsistency if the database commits data during one-phase commit and the connection goes down at that moment, then the client is informed that transaction was rolled back.
							</dd><dt><span class="term">Sybase</span></dt><dd><p class="simpara">
								The JDBC driver returns the <code class="literal">XAER_RMERR</code> XAException error code when a network failure occurs during the commit phase of two-phase commit (2PC). This error signals an unrecoverable catastrophic event to the transaction manager, but the transaction is left in the <code class="literal">in-doubt</code> state on the database side and could be easily corrected after network connection is established again. The correct return code should be <code class="literal">XAER_RMFAIL</code> or <code class="literal">XAER_RETRY</code>. The incorrect error code causes the transaction to be left in the <code class="literal">Heuristic</code> state on the JBoss EAP side and holding locks in the database which requires manual intervention.
							</p><p class="simpara">
								If a connection failure happens when the one-phase commit optimization is used, the JDBC driver returns <code class="literal">XAER_RMERR</code>, but the <code class="literal">XAER_RMFAIL</code> error code should be returned. This could lead to data inconsistency if the database commits data during one-phase commit and the connection goes down at that moment, then the client is informed that transaction was rolled back.
							</p><p class="simpara">
								If an XA transaction that includes an insert to a Sybase 15.7 or 16 database fails before the Sybase transaction branch is in a prepared state, then repeating the XA transaction and inserting the same record with the same primary key will fail with an error of <code class="literal">com.sybase.jdbc4.jdbc.SybSQLException: Attempt to insert duplicate key row</code>. This exception will be thrown until the original unfinished Sybase transaction branch is rolled back.
							</p></dd><dt><span class="term">MariaDB</span></dt><dd>
								MariaDB is not fully capable of handling XA transactions. If a client is disconnected from MariaDB, then all the information about such transactions is lost.
							</dd><dt><span class="term">MariaDB Galera Cluster</span></dt><dd>
								XA transactions are not supported in MariaDB Galera Cluster.
							</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_database_connection_validation_settings"/>Database Connection Validation</h1></div></div></div><p>
				Database maintenance, network problems, or other outage events may cause JBoss EAP to lose the connection to the database. In order to recover from these situations, you can enable database connection validation for your datasources.
			</p><p>
				To configure database connection validation, you specify the validation timing method to define when the validation occurs, the validation mechanism to determine how the validation is performed, and the exception sorter to define how exceptions are handled.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Choose <span class="emphasis"><em>one</em></span> of the validation timing methods.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">validate-on-match</span></dt><dd><p class="simpara">
									When the <code class="literal">validate-on-match</code> option is set to <code class="literal">true</code>, the database connection is validated every time it is checked out from the connection pool using the validation mechanism specified in the next step.
								</p><p class="simpara">
									If a connection is not valid, a warning is written to the log and the next connection in the pool is retrieved. This process continues until a valid connection is found. If you prefer not to cycle through every connection in the pool, you can use the <code class="literal">use-fast-fail</code> option. If a valid connection is not found in the pool, a new connection is created. If the connection creation fails, an exception is returned to the requesting application.
								</p><p class="simpara">
									This setting results in the quickest recovery but creates the highest load on the database. However, this is the safest selection if the minimal performance hit is not a concern.
								</p></dd><dt><span class="term">background-validation</span></dt><dd><p class="simpara">
									When the <code class="literal">background-validation</code> option is set to <code class="literal">true</code>, connections are validated periodically in a background thread prior to use. The frequency of the validation is specified by the <code class="literal">background-validation-millis</code> property. The default value of <code class="literal">background-validation-millis</code> is <code class="literal">0</code>, meaning that it is disabled.
								</p><p class="simpara">
									When determining the value of the <code class="literal">background-validation-millis</code> property, consider the following:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											This value should not be set to the same value as your <code class="literal">idle-timeout-minutes</code> setting.
										</li><li class="listitem">
											The lower the value, the more frequently the pool is validated and the sooner invalid connections are removed from the pool.
										</li><li class="listitem">
											Lower values take more database resources. Higher values result in less frequent connection validation checks and use less database resources, but dead connections are undetected for longer periods of time.
										</li></ul></div></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							These options are mutually exclusive. If <code class="literal">validate-on-match</code> is set to <code class="literal">true</code>, then <code class="literal">background-validation</code> must be set to <code class="literal">false</code>. If <code class="literal">background-validation</code> is set to true, then <code class="literal">validate-on-match</code> must be set to <code class="literal">false</code>.
						</p></div></li><li class="listitem"><p class="simpara">
						Choose <span class="emphasis"><em>one</em></span> of the validation mechanisms.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">valid-connection-checker-class-name</span></dt><dd><p class="simpara">
									Using <code class="literal">valid-connection-checker-class-name</code> is the preferred validation mechanism. This specifies a connection checker class that is used to validate connections for the particular database in use. JBoss EAP provides the following connection checkers:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLReplicationValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.novendor.JDBC4ValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.novendor.NullValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker</code>
										</li><li class="listitem">
											<code class="literal">org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker</code>
										</li></ul></div></dd><dt><span class="term">check-valid-connection-sql</span></dt><dd><p class="simpara">
									Using <code class="literal">check-valid-connection-sql</code>, you provide the SQL statement that will be used to validate the connection.
								</p><p class="simpara">
									The following is an example SQL statement that you might use to validate Oracle connections.
								</p><pre class="programlisting">select 1 from dual</pre><p class="simpara">
									The following is an example SQL statement that you might use to validate MySQL or PostgreSQL connections.
								</p><pre class="programlisting">select 1</pre></dd></dl></div></li><li class="listitem"><p class="simpara">
						Set the exception sorter class name.
					</p><p class="simpara">
						When an exception is marked as fatal, the connection is closed immediately, even if the connection is participating in a transaction. Use the exception sorter class option to properly detect and clean up after fatal connection exceptions. Choose the appropriate JBoss EAP exception sorter for your datasource type.
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.informix.InformixExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.novendor.NullExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter</code>
							</li><li class="listitem">
								<code class="literal">org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter</code>
							</li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="datasource_security"/>Datasource Security</h1></div></div></div><p>
				Datasource security refers to encrypting or obscuring passwords for datasource connections. These passwords can be stored in plain text in configuration files, but this represents a security risk.
			</p><p>
				There are several methods you can use for datasource security. Examples of each are included below.
			</p><h3><a id="secure_a_datasource_using_a_security_domain"/>Secure a Datasource Using a Security Domain</h3><p>
				A security domain for the datasource is defined.
			</p><pre class="programlisting"> &lt;security-domain name="DsRealm" cache-type="default"&gt;
  &lt;authentication&gt;
    &lt;login-module code="ConfiguredIdentity" flag="required"&gt;
      &lt;module-option name="userName" value="sa"/&gt;
      &lt;module-option name="principal" value="sa"/&gt;
      &lt;module-option name="password" value="sa"/&gt;
    &lt;/login-module&gt;
  &lt;/authentication&gt;
&lt;/security-domain&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					If a security domain will be used with multiple datasources, then caching should be disabled on the security domain. This can be accomplished by setting the value of the <code class="literal">cache-type</code> attribute to <code class="literal">none</code> or by removing the attribute altogether; however, if caching is desired, then a separate security domain should be used for each datasource.
				</p></div><p>
				The <code class="literal">DsRealm</code> security domain is then referenced by the datasource configuration.
			</p><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/datasources/securityDs"
    pool-name="securityDs"&gt;
    &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
      &lt;driver&gt;h2&lt;/driver&gt;
      &lt;new-connection-sql&gt;select current_user()&lt;/new-connection-sql&gt;
      &lt;security&gt;
        &lt;security-domain&gt;DsRealm&lt;/security-domain&gt;
      &lt;/security&gt;
    &lt;/datasource&gt;
&lt;/datasources&gt;</pre><p>
				For more information on using Security Domains, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/"><span class="emphasis"><em>How to Configure Identity Management</em></span></a>.
			</p><h3><a id="secure_a_datasource_using_a_password_vault"/>Secure a Datasource Using a Password Vault</h3><pre class="programlisting">&lt;security&gt;
  &lt;user-name&gt;admin&lt;/user-name&gt;
  &lt;password&gt;${VAULT::ds_ExampleDS::password::N2NhZDYzOTMtNWE0OS00ZGQ0LWE4MmEtMWNlMDMyNDdmNmI2TElORV9CUkVBS3ZhdWx0}&lt;/password&gt;
&lt;/security&gt;</pre><p>
				For more information on using the Password Vault, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#password_vault">Password Vault</a> section in the JBoss EAP <span class="emphasis"><em>How to Configure Server Security</em></span> guide.
			</p><h3><a id="secure_a_datasource_using_a_credential_store"/>Secure a Datasource Using a Credential Store</h3><p>
				You can also use a credential store to provide passwords. The <code class="literal">elytron</code> subsystem provides the ability to create credential stores to securely house and use your passwords throughout JBoss EAP. You can find more details on creating and using credential stores in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#credential_store">Credential Store</a> section in the JBoss EAP <span class="emphasis"><em>How to Configure Server Security</em></span> guide.
			</p><div class="title"><strong>Adding a Credential Store Reference to ExampleDS</strong></div><p>
					
</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=credential-reference,value={store=exampleCS, alias=example-ds-pw})</pre><p>

				</p><h3><a id="secure_a_datasource_using_an_authentication_context"/>Secure a Datasource Using an Authentication Context</h3><p>
				You can also use an Elytron authentication context to provide usernames and passwords.
			</p><p>
				Use the following steps to configure and use an authentication context for datasource security.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Remove <code class="literal">password</code> and <code class="literal">user-name</code>.
					</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:undefine-attribute(name=password)
/subsystem=datasources/data-source=ExampleDS:undefine-attribute(name=user-name)</pre></li><li class="listitem"><p class="simpara">
						Enable Elytron security for the datasource.
					</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=elytron-enabled,value=true)

reload</pre></li><li class="listitem"><p class="simpara">
						Create an <code class="literal">authentication-configuration</code> for your credentials.
					</p><p class="simpara">
						The authentication configuration contains the credentials you want your datasource to use when making a connection. The below example uses a reference to a credential store, but you could also use an Elytron security domain.
					</p><pre class="screen">/subsystem=elytron/authentication-configuration=exampleAuthConfig:add(authentication-name=sa,credential-reference={clear-text=sa})</pre></li><li class="listitem"><p class="simpara">
						Create an <code class="literal">authentication-context</code>.
					</p><pre class="screen">/subsystem=elytron/authentication-context=exampleAuthContext:add(match-rules=[{authentication-configuration=exampleAuthConfig}])</pre></li><li class="listitem"><p class="simpara">
						Update the datasource to use the authentication context.
					</p><p class="simpara">
						The below example updates <code class="literal">ExampleDS</code> to use an authentication context.
					</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=authentication-context,value=exampleAuthContext)

reload</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							If <code class="literal">authentication-context</code> is not set and <code class="literal">elytron-enabled</code> is set to <code class="literal">true</code>, JBoss EAP will use the current context for authentication.
						</p></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="datasource_statistics"/>Datasource Statistics</h1></div></div></div><p>
				When statistics collection is <a class="link" href="datasource_management.html#enable_datasource_statistics" title="Enabling Datasource Statistics">enabled</a> for a datasource, you can <a class="link" href="datasource_management.html#viewing_datasource_stats" title="Viewing Datasource Statistics">view runtime statistics</a> for the datasource.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="enable_datasource_statistics"/>Enabling Datasource Statistics</h2></div></div></div><p>
					By default, datasource statistics are <span class="emphasis"><em>not</em></span> enabled. You can enable datasource statistics collection using the <a class="link" href="datasource_management.html#enable_datasource_statistics_cli" title="Enable Datasource Statistics Using the Management CLI">management CLI</a> or the <a class="link" href="datasource_management.html#enable_datasource_statistics_console" title="Enable Datasource Statistics Using the Management Console">management console</a>.
				</p><h4><a id="enable_datasource_statistics_cli"/>Enable Datasource Statistics Using the Management CLI</h4><p>
					The following management CLI command enables the collection of statistics for the <code class="literal">ExampleDS</code> datasource.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In a managed domain, precede this command with <code class="literal">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code>.
					</p></div><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=statistics-enabled,value=true)</pre><p>
					Reload the server for the changes to take effect.
				</p><h4><a id="enable_datasource_statistics_console"/>Enable Datasource Statistics Using the Management Console</h4><p>
					Use the following steps to enable statistics collection for a datasource using the management console.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Navigate to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Datasources &amp; Drivers</strong></span> → <span class="strong"><strong>Datasources</strong></span>.
						</li><li class="listitem">
							Select the datasource and click <span class="strong"><strong>View</strong></span>.
						</li><li class="listitem">
							Click <span class="strong"><strong>Edit</strong></span> under the <span class="strong"><strong>Attributes</strong></span> tab.
						</li><li class="listitem">
							Set the <span class="strong"><strong>Statistics Enabled</strong></span> field to <span class="strong"><strong>ON</strong></span> and click <span class="strong"><strong>Save</strong></span>. A popup appears indicating that the changes require a reload in order to take effect.
						</li><li class="listitem"><p class="simpara">
							Reload the server.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									For a standalone server, click the <span class="strong"><strong>Reload</strong></span> link from the popup to reload the server.
								</li><li class="listitem">
									For a managed domain, click the <span class="strong"><strong>Topology</strong></span> link from the popup. From the <span class="strong"><strong>Topology</strong></span> tab, select the appropriate server and select the <span class="strong"><strong>Reload</strong></span> drop down option to reload the server.
								</li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="viewing_datasource_stats"/>Viewing Datasource Statistics</h2></div></div></div><p>
					You can view runtime statistics for a datasource using the <a class="link" href="datasource_management.html#view_datasource_stats_cli" title="View Datasource Statistics Using the Management CLI">management CLI</a> or <a class="link" href="datasource_management.html#view_datasource_stats_console" title="View Datasource Statistics Using the Management Console">management console</a>.
				</p><h4><a id="view_datasource_stats_cli"/>View Datasource Statistics Using the Management CLI</h4><p>
					The following management CLI command retrieves the core <span class="emphasis"><em>pool</em></span> statistics for the <code class="literal">ExampleDS</code> datasource.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In a managed domain, precede these commands with <code class="literal">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server=<span class="emphasis"><em>SERVER_NAME</em></span></code>.
					</p></div><pre class="screen">/subsystem=datasources/data-source=ExampleDS/statistics=pool:read-resource(include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "ActiveCount" =&gt; 1,
        "AvailableCount" =&gt; 20,
        "AverageBlockingTime" =&gt; 0L,
        "AverageCreationTime" =&gt; 122L,
        "AverageGetTime" =&gt; 128L,
        "AveragePoolTime" =&gt; 0L,
        "AverageUsageTime" =&gt; 0L,
        "BlockingFailureCount" =&gt; 0,
        "CreatedCount" =&gt; 1,
        "DestroyedCount" =&gt; 0,
        "IdleCount" =&gt; 1,
        ...
}</pre><p>
					The following management CLI command retrieves the <span class="emphasis"><em>JDBC</em></span> statistics for the <code class="literal">ExampleDS</code> datasource.
				</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS/statistics=jdbc:read-resource(include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "PreparedStatementCacheAccessCount" =&gt; 0L,
        "PreparedStatementCacheAddCount" =&gt; 0L,
        "PreparedStatementCacheCurrentSize" =&gt; 0,
        "PreparedStatementCacheDeleteCount" =&gt; 0L,
        "PreparedStatementCacheHitCount" =&gt; 0L,
        "PreparedStatementCacheMissCount" =&gt; 0L,
        "statistics-enabled" =&gt; true
    }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						Since statistics are runtime information, be sure to specify the <code class="literal">include-runtime=true</code> argument.
					</p></div><p>
					See <a class="link" href="reference_material.html#reference_of_datasource_statistics" title="Datasource Statistics">Datasource Statistics</a> for a detailed list of all available statistics.
				</p><h4><a id="view_datasource_stats_console"/>View Datasource Statistics Using the Management Console</h4><p>
					To view datasource statistics from the management console, navigate to the <span class="strong"><strong>Datasources</strong></span> subsystem from the <span class="strong"><strong>Runtime</strong></span> tab, select a datasource, and click <span class="strong"><strong>View</strong></span>.
				</p><p>
					See <a class="link" href="reference_material.html#reference_of_datasource_statistics" title="Datasource Statistics">Datasource Statistics</a> for a detailed list of all available statistics.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="tuning_datasources_subsystem"/>Datasource Tuning</h1></div></div></div><p>
				For tips on monitoring and optimizing performance for the <code class="literal">datasources</code> subsystem, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/#datasource_and_resource_adapter_tuning">Datasource and Resource Adapter Tuning</a> section of the <span class="emphasis"><em>Performance Tuning Guide</em></span>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jca-capacity-policies"/>Capacity Policies</h1></div></div></div><p>
				JBoss EAP supports defining capacity polices for JCA deployments, including datasources. Capacity policies define how physical connections for a pool are created, referred to as capacity incrementing, and destroyed, referred to as capacity decrementing. The default policies are set to create one connection per request for capacity incrementing, and destroy all connections when they time out when the idle timeout is scheduled for capacity decrementing.
			</p><p>
				To configure capacity polices, you need to specify a capacity incrementer class, a capacity decrementer class, or both.
			</p><div class="title"><strong>Example: Defining Capacity Policies</strong></div><p>
					
</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=capacity-incrementer-class, value="org.jboss.jca.core.connectionmanager.pool.capacity.SizeIncrementer")

/subsystem=datasources/data-source=ExampleDS:write-attribute(name=capacity-decrementer-class, value="org.jboss.jca.core.connectionmanager.pool.capacity.SizeDecrementer")</pre><p>

				</p><p>
				You can also configure properties on the specified capacity incrementer or decrementer class.
			</p><div class="title"><strong>Example: Configuring Properties for Capacity Policies</strong></div><p>
					
</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=capacity-incrementer-properties.size, value=2)

/subsystem=datasources/data-source=ExampleDS:write-attribute(name=capacity-decrementer-properties.size, value=2)</pre><p>

				</p><h3><a id="maxpoolsize_incrementer_policy"/>MaxPoolSize Incrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.MaxPoolSizeIncrementer</code>
			</p><p>
				The <span class="emphasis"><em>MaxPoolSize</em></span> incrementer policy will fill the pool to its max size for each request. This policy is useful when you want to keep the maximum number of connections available all the time.
			</p><h3><a id="size_incrementer_policy"/>Size Incrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.SizeIncrementer</code>
			</p><p>
				The <span class="emphasis"><em>Size</em></span> incrementer policy will fill the pool by the specified number of connections for each request. This policy is useful when you want to increment with an additional number of connections per request in anticipation that the next request will also need a connection.
			</p><div class="table"><a id="idm140150820842800"/><p class="title"><strong>Table 12.3. Size policy properties</strong></p><div class="table-contents"><table summary="Size policy properties" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Name</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Size
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The number of connections that should be created
							</p>
							 </td></tr></tbody></table></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					This is the default increment policy, and has a <span class="emphasis"><em>size</em></span> value of 1.
				</p></div><h3><a id="watermark_incrementer_policy"/>Watermark Incrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.WatermarkIncrementer</code>
			</p><p>
				The <span class="emphasis"><em>Watermark</em></span> incrementer policy will fill the pool to the specified number of connections for each request. This policy is useful when you want to keep a specified number of connections in the pool at all time.
			</p><div class="table"><a id="idm140150820825296"/><p class="title"><strong>Table 12.4. Watermark policy properties</strong></p><div class="table-contents"><table summary="Watermark policy properties" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Name</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Watermark
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The watermark level for the number of connections
							</p>
							 </td></tr></tbody></table></div></div><h3><a id="minpoolsize_decrementer_policy"/>MinPoolSize Decrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.MinPoolSizeDecrementer</code>
			</p><p>
				The <span class="emphasis"><em>MinPoolSize</em></span> decrementer policy will decrement the pool to its min size for each request. This policy is useful when you want to limit the number of connections after each idle timeout request. The pool will operate in a First In First Out (FIFO) manner.
			</p><h3><a id="size_decrementer_policy"/>Size Decrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.SizeDecrementer</code>
			</p><p>
				The <span class="emphasis"><em>Size</em></span> decrementer policy will decrement the pool by the specified number of connections for each idle timeout request.
			</p><div class="table"><a id="idm140150820804976"/><p class="title"><strong>Table 12.5. Size policy properties</strong></p><div class="table-contents"><table summary="Size policy properties" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Name</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Size
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The number of connections that should be destroyed
							</p>
							 </td></tr></tbody></table></div></div><p>
				This policy is useful when you want to decrement an additional number of connections per idle timeout request in anticipation that the pool usage will lower over time.
			</p><p>
				The pool will operate in a First In First Out (FIFO) manner.
			</p><h3><a id="timedout_decrementer_policy"/>TimedOut Decrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.TimedOutDecrementer</code>
			</p><p>
				The <span class="emphasis"><em>TimedOut</em></span> decrementer policy will removed all connections that have timed out from the pool for each idle timeout request. The pool will operate in a First In Last Out (FILO) manner.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					This policy is the default decrement policy.
				</p></div><h3><a id="timedout_fifo_decrementer_policy"/>TimedOut/FIFO Decrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.TimedOutFIFODecrementer</code>
			</p><p>
				The <span class="emphasis"><em>TimedOutFIFO</em></span> decrementer policy will removed all connections that have timed out from the pool for each idle timeout request. The pool will operate in a First In First Out (FIFO) manner.
			</p><h3><a id="watermark_decrementer_policy"/>Watermark Decrementer Policy</h3><p>
				<span class="emphasis"><em>Class name</em></span>: <code class="literal">org.jboss.jca.core.connectionmanager.pool.capacity.WatermarkDecrementer</code>
			</p><p>
				The <span class="emphasis"><em>Watermark</em></span> decrementer policy will decrement the pool to the specified number of connections for each idle timeout request. This policy is useful when you want to keep a specified number of connections in the pool at all time. The pool will operate in a First In First Out (FIFO) manner.
			</p><div class="table"><a id="idm140150820778144"/><p class="title"><strong>Table 12.6. Watermark policy properties</strong></p><div class="table-contents"><table summary="Watermark policy properties" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Name</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Watermark
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The watermark level for the number of connections
							</p>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="datasource_enlistment_tracing"/>Enlistment Tracing</h1></div></div></div><p>
				Enlistment traces can be recorded in order to help locate error situations that happen during enlistment of <code class="literal">XAResource</code> instances. When enlistment tracing is enabled, the <code class="literal">jca</code> subsystem creates an exception object for every pool operation, so that an accurate stack trace can be produced if necessary; however, this does come with performance overhead.
			</p><p>
				As of JBoss EAP 7.1, enlistment tracing is disabled by default. You can enable the recording of enlistment traces for a datasource using the management CLI by setting the <code class="literal">enlistment-trace</code> attribute to <code class="literal">true</code>.
			</p><p>
				Enable enlistment tracing for a non-XA datasource.
			</p><pre class="screen">data-source --name=<span class="emphasis"><em>DATASOURCE_NAME</em></span> --enlistment-trace=true</pre><p>
				Enable enlistment tracing for an XA datasource.
			</p><pre class="screen">xa-data-source --name=<span class="emphasis"><em>XA_DATASOURCE_NAME</em></span> --enlistment-trace=true</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
					Enabling enlistment tracing can cause a performance impact.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="example_datasource_configurations"/>Example Datasource Configurations</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_mysql_datasource"/>Example MySQL Datasource</h2></div></div></div><p>
					This is an example of a MySQL datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_mysql_datasource_configuration"/>Example: MySQL Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/MySqlDS" pool-name="MySqlDS"&gt;
    &lt;connection-url&gt;jdbc:mysql://localhost:3306/jbossdb&lt;/connection-url&gt;
    &lt;driver&gt;mysql&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mysql" module="com.mysql"&gt;
      &lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
      &lt;xa-datasource-class&gt;com.mysql.cj.jdbc.MysqlXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_mysql_jdbc_driver_literal_module_xml_literal_file"/>Example: MySQL JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.mysql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mysql-connector-java-8.0.12.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the MySQL JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.mysql --resources=<span class="emphasis"><em>/path/to/mysql-connector-java-8.0.12.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the MySQL JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.cj.jdbc.MysqlXADataSource, driver-class-name=com.mysql.jdbc.Driver)</pre></li><li class="listitem"><p class="simpara">
							Add the MySQL datasource.
						</p><pre class="screen">data-source add --name=MySqlDS --jndi-name=java:jboss/MySqlDS --driver-name=mysql --connection-url=jdbc:mysql://localhost:3306/jbossdb --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_mysql_xa_datasource"/>Example MySQL XA Datasource</h2></div></div></div><p>
					This is an example of a MySQL XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_mysql_xa_datasource_configuration"/>Example: MySQL XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/MySqlXADS" pool-name="MySqlXADS"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
      localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;
      mysqldb
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;mysql&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mysql" module="com.mysql"&gt;
      &lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
      &lt;xa-datasource-class&gt;com.mysql.cj.jdbc.MysqlXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_mysql_jdbc_driver_literal_module_xml_literal_file_2"/>Example: MySQL JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.mysql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mysql-connector-java-8.0.12.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_2"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the MySQL JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.mysql --resources=<span class="emphasis"><em>/path/to/mysql-connector-java-8.0.12.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the MySQL JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.cj.jdbc.MysqlXADataSource, driver-class-name=com.mysql.jdbc.Driver)</pre></li><li class="listitem"><p class="simpara">
							Add the MySQL XA datasource.
						</p><pre class="screen">xa-data-source add --name=MySqlXADS --jndi-name=java:jboss/MySqlXADS --driver-name=mysql --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter --xa-datasource-properties={"ServerName"=&gt;"localhost","DatabaseName"=&gt;"mysqldb"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_postgresql_datasource"/>Example PostgreSQL Datasource</h2></div></div></div><p>
					This is an example of a PostgreSQL datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_postgresql_datasource_configuration"/>Example: PostgreSQL Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/PostgresDS" pool-name="PostgresDS"&gt;
    &lt;connection-url&gt;jdbc:postgresql://localhost:5432/postgresdb&lt;/connection-url&gt;
    &lt;driver&gt;postgresql&lt;/driver&gt;
    &lt;security&gt;
        &lt;user-name&gt;admin&lt;/user-name&gt;
        &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
        &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker"/&gt;
        &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
        &lt;background-validation&gt;false&lt;/background-validation&gt;
        &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="postgresql" module="com.postgresql"&gt;
        &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_postgresql_jdbc_driver_literal_module_xml_literal_file"/>Example: PostgreSQL JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.postgresql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="postgresql-9.3-1102.jdbc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_3"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the PostgreSQL JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.postgresql --resources=<span class="emphasis"><em>/path/to/postgresql-9.3-1102.jdbc4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the PostgreSQL JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=postgresql:add(driver-name=postgresql,driver-module-name=com.postgresql,driver-xa-datasource-class-name=org.postgresql.xa.PGXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the PostgreSQL datasource.
						</p><pre class="screen">data-source add --name=PostgresDS --jndi-name=java:jboss/PostgresDS --driver-name=postgresql --connection-url=jdbc:postgresql://localhost:5432/postgresdb --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_postgresql_xa_datasource"/>Example PostgreSQL XA Datasource</h2></div></div></div><p>
					This is an example of a PostgreSQL XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_postgresql_xa_datasource_configuration"/>Example: PostgreSQL XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/PostgresXADS" pool-name="PostgresXADS"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
      localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;
      5432
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;
      postgresdb
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;postgresql&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="postgresql" module="com.postgresql"&gt;
      &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_postgresql_jdbc_driver_literal_module_xml_literal_file_2"/>Example: PostgreSQL JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.postgresql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="postgresql-9.3-1102.jdbc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_4"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the PostgreSQL JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.postgresql --resources=<span class="emphasis"><em>/path/to/postgresql-9.3-1102.jdbc4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the PostgreSQL JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=postgresql:add(driver-name=postgresql,driver-module-name=com.postgresql,driver-xa-datasource-class-name=org.postgresql.xa.PGXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the PostgreSQL XA datasource.
						</p><pre class="screen">xa-data-source add --name=PostgresXADS --jndi-name=java:jboss/PostgresXADS --driver-name=postgresql --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter --xa-datasource-properties={"ServerName"=&gt;"localhost","PortNumber"=&gt;"5432","DatabaseName"=&gt;"postgresdb"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_oracle_datasource"/>Example Oracle Datasource</h2></div></div></div><p>
					This is an example of an Oracle datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_oracle_datasource_configuration"/>Example: Oracle Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/OracleDS" pool-name="OracleDS"&gt;
    &lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:XE&lt;/connection-url&gt;
    &lt;driver&gt;oracle&lt;/driver&gt;
    &lt;security&gt;
        &lt;user-name&gt;admin&lt;/user-name&gt;
        &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
        &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker"/&gt;
        &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
        &lt;background-validation&gt;false&lt;/background-validation&gt;
        &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="oracle" module="com.oracle"&gt;
        &lt;xa-datasource-class&gt;oracle.jdbc.xa.client.OracleXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_oracle_jdbc_driver_literal_module_xml_literal_file"/>Example: Oracle JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.oracle"&gt;
    &lt;resources&gt;
        &lt;resource-root path="ojdbc7.jar"/&gt;
    &lt;/resources&gt;
    &lt;dependencies&gt;
        &lt;module name="javax.api"/&gt;
        &lt;module name="javax.transaction.api"/&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_5"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the Oracle JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.oracle --resources=<span class="emphasis"><em>/path/to/ojdbc7.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the Oracle JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=oracle:add(driver-name=oracle,driver-module-name=com.oracle,driver-xa-datasource-class-name=oracle.jdbc.xa.client.OracleXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the Oracle datasource.
						</p><pre class="screen">data-source add --name=OracleDS --jndi-name=java:jboss/OracleDS --driver-name=oracle --connection-url=jdbc:oracle:thin:@localhost:1521:XE --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_oracle_xa_datasource"/>Example Oracle XA Datasource</h2></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						The following settings must be applied for the user accessing an Oracle XA datasource in order for XA recovery to operate correctly. The value <code class="literal">user</code> is the user defined to connect from JBoss EAP to Oracle:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">GRANT SELECT ON sys.dba_pending_transactions TO user;</code>
							</li><li class="listitem">
								<code class="literal">GRANT SELECT ON sys.pending_trans$ TO user;</code>
							</li><li class="listitem">
								<code class="literal">GRANT SELECT ON sys.dba_2pc_pending TO user;</code>
							</li><li class="listitem">
								<code class="literal">GRANT EXECUTE ON sys.dbms_xa TO user;</code>
							</li></ul></div></div><p>
					This is an example of an Oracle XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_oracle_xa_datasource_configuration"/>Example: Oracle XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/OracleXADS" pool-name="OracleXADS"&gt;
    &lt;xa-datasource-property name="URL"&gt;
      jdbc:oracle:thin:@oracleHostName:1521:orcl
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;oracle&lt;/driver&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="oracle" module="com.oracle"&gt;
      &lt;xa-datasource-class&gt;oracle.jdbc.xa.client.OracleXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_oracle_jdbc_driver_literal_module_xml_literal_file_2"/>Example: Oracle JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.oracle"&gt;
    &lt;resources&gt;
        &lt;resource-root path="ojdbc7.jar"/&gt;
    &lt;/resources&gt;
    &lt;dependencies&gt;
        &lt;module name="javax.api"/&gt;
        &lt;module name="javax.transaction.api"/&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_6"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the Oracle JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.oracle --resources=<span class="emphasis"><em>/path/to/ojdbc7.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the Oracle JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=oracle:add(driver-name=oracle,driver-module-name=com.oracle,driver-xa-datasource-class-name=oracle.jdbc.xa.client.OracleXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the Oracle XA datasource.
						</p><pre class="screen">xa-data-source add --name=OracleXADS --jndi-name=java:jboss/OracleXADS --driver-name=oracle --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter --same-rm-override=false --xa-datasource-properties={"URL"=&gt;"jdbc:oracle:thin:@oracleHostName:1521:orcl"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_microsoft_sqlserver_datasource"/>Example Microsoft SQL Server Datasource</h2></div></div></div><p>
					This is an example of a Microsoft SQL Server datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_microsoft_sql_server_datasource_configuration"/>Example: Microsoft SQL Server Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/MSSQLDS" pool-name="MSSQLDS"&gt;
    &lt;connection-url&gt;jdbc:sqlserver://localhost:1433;DatabaseName=MyDatabase&lt;/connection-url&gt;
    &lt;driver&gt;sqlserver&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sqlserver" module="com.microsoft"&gt;
      &lt;xa-datasource-class&gt;com.microsoft.sqlserver.jdbc.SQLServerXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_microsoft_sql_server_jdbc_driver_literal_module_xml_literal_file"/>Example: Microsoft SQL Server JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.microsoft"&gt;
  &lt;resources&gt;
    &lt;resource-root path="sqljdbc42.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
    &lt;module name="javax.xml.bind.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_7"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the Microsoft SQL Server JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.microsoft --resources=<span class="emphasis"><em>/path/to/sqljdbc42.jar</em></span> --dependencies=javax.api,javax.transaction.api,javax.xml.bind.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the Microsoft SQL Server JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=sqlserver:add(driver-name=sqlserver,driver-module-name=com.microsoft,driver-xa-datasource-class-name=com.microsoft.sqlserver.jdbc.SQLServerXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the Microsoft SQL Server datasource.
						</p><pre class="screen">data-source add --name=MSSQLDS --jndi-name=java:jboss/MSSQLDS --driver-name=sqlserver --connection-url=jdbc:sqlserver://localhost:1433;DatabaseName=MyDatabase --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_microsoft_sqlserver_xa_datasource"/>Example Microsoft SQL Server XA Datasource</h2></div></div></div><p>
					This is an example of a Microsoft SQL Server XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_microsoft_sql_server_xa_datasource_configuration"/>Example: Microsoft SQL Server XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/MSSQLXADS" pool-name="MSSQLXADS"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
      localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;
      mssqldb
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="SelectMethod"&gt;
      cursor
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;sqlserver&lt;/driver&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sqlserver" module="com.microsoft"&gt;
      &lt;xa-datasource-class&gt;com.microsoft.sqlserver.jdbc.SQLServerXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_microsoft_sql_server_jdbc_driver_literal_module_xml_literal_file_2"/>Example: Microsoft SQL Server JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.microsoft"&gt;
  &lt;resources&gt;
    &lt;resource-root path="sqljdbc42.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
    &lt;module name="javax.xml.bind.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_8"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the Microsoft SQL Server JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.microsoft --resources=<span class="emphasis"><em>/path/to/sqljdbc42.jar</em></span> --dependencies=javax.api,javax.transaction.api,javax.xml.bind.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the Microsoft SQL Server JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=sqlserver:add(driver-name=sqlserver,driver-module-name=com.microsoft,driver-xa-datasource-class-name=com.microsoft.sqlserver.jdbc.SQLServerXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the Microsoft SQL Server XA datasource.
						</p><pre class="screen">xa-data-source add --name=MSSQLXADS --jndi-name=java:jboss/MSSQLXADS --driver-name=sqlserver --user-name=admin --password=admin --validate-on-match=true --background-validation=false --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter --same-rm-override=false --xa-datasource-properties={"ServerName"=&gt;"localhost","DatabaseName"=&gt;"mssqldb","SelectMethod"=&gt;"cursor"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_ibm_db2_datasource"/>Example IBM DB2 Datasource</h2></div></div></div><p>
					This is an example of an IBM DB2 datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_ibm_db2_datasource_configuration"/>Example: IBM DB2 Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/DB2DS" pool-name="DB2DS"&gt;
    &lt;connection-url&gt;jdbc:db2://localhost:50000/ibmdb2db&lt;/connection-url&gt;
    &lt;driver&gt;ibmdb2&lt;/driver&gt;
    &lt;pool&gt;
      &lt;min-pool-size&gt;0&lt;/min-pool-size&gt;
      &lt;max-pool-size&gt;50&lt;/max-pool-size&gt;
    &lt;/pool&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="ibmdb2" module="com.ibm"&gt;
        &lt;xa-datasource-class&gt;com.ibm.db2.jcc.DB2XADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_ibm_db2_jdbc_driver_literal_module_xml_literal_file"/>Example: IBM DB2 JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.ibm"&gt;
  &lt;resources&gt;
    &lt;resource-root path="db2jcc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_9"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the IBM DB2 JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.ibm --resources=<span class="emphasis"><em>/path/to/db2jcc4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the IBM DB2 JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=ibmdb2:add(driver-name=ibmdb2,driver-module-name=com.ibm,driver-xa-datasource-class-name=com.ibm.db2.jcc.DB2XADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the IBM DB2 datasource.
						</p><pre class="screen">data-source add --name=DB2DS --jndi-name=java:jboss/DB2DS --driver-name=ibmdb2 --connection-url=jdbc:db2://localhost:50000/ibmdb2db --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter --min-pool-size=0 --max-pool-size=50</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_ibm_db2_xa_datasource"/>Example IBM DB2 XA Datasource</h2></div></div></div><p>
					This is an example of an IBM DB2 XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_ibm_db2_xa_datasource_configuration"/>Example: IBM DB2 XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/DB2XADS" pool-name="DB2XADS"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
      localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;
      ibmdb2db
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;
      50000
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DriverType"&gt;
      4
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;ibmdb2&lt;/driver&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;recovery&gt;
      &lt;recover-plugin class-name="org.jboss.jca.core.recovery.ConfigurableRecoveryPlugin"&gt;
        &lt;config-property name="EnableIsValid"&gt;
          false
        &lt;/config-property&gt;
        &lt;config-property name="IsValidOverride"&gt;
          false
        &lt;/config-property&gt;
        &lt;config-property name="EnableClose"&gt;
          false
        &lt;/config-property&gt;
      &lt;/recover-plugin&gt;
    &lt;/recovery&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="ibmdb2" module="com.ibm"&gt;
        &lt;xa-datasource-class&gt;com.ibm.db2.jcc.DB2XADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_ibm_db2_jdbc_driver_literal_module_xml_literal_file_2"/>Example: IBM DB2 JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.ibm"&gt;
  &lt;resources&gt;
    &lt;resource-root path="db2jcc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_10"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the IBM DB2 JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.ibm --resources=<span class="emphasis"><em>/path/to/db2jcc4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the IBM DB2 JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=ibmdb2:add(driver-name=ibmdb2,driver-module-name=com.ibm,driver-xa-datasource-class-name=com.ibm.db2.jcc.DB2XADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the IBM DB2 XA datasource.
						</p><pre class="screen">xa-data-source add --name=DB2XADS --jndi-name=java:jboss/DB2XADS --driver-name=ibmdb2 --user-name=admin --password=admin --validate-on-match=true --background-validation=false --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter --same-rm-override=false --recovery-plugin-class-name=org.jboss.jca.core.recovery.ConfigurableRecoveryPlugin --recovery-plugin-properties={"EnableIsValid"=&gt;"false","IsValidOverride"=&gt;"false","EnableClose"=&gt;"false"} --xa-datasource-properties={"ServerName"=&gt;"localhost","DatabaseName"=&gt;"ibmdb2db","PortNumber"=&gt;"50000","DriverType"=&gt;"4"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_sybase_datasource"/>Example Sybase Datasource</h2></div></div></div><p>
					This is an example of a Sybase datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_sybase_datasource_configuration"/>Example: Sybase Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/SybaseDB" pool-name="SybaseDB"&gt;
    &lt;connection-url&gt;jdbc:sybase:Tds:localhost:5000/DATABASE?JCONNECT_VERSION=6&lt;/connection-url&gt;
    &lt;driver&gt;sybase&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sybase" module="com.sybase"&gt;
      &lt;xa-datasource-class&gt;com.sybase.jdbc4.jdbc.SybXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_sybase_jdbc_driver_literal_module_xml_literal_file"/>Example: Sybase JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.sybase"&gt;
    &lt;resources&gt;
      &lt;resource-root path="jconn4.jar"/&gt;
    &lt;/resources&gt;
    &lt;dependencies&gt;
      &lt;module name="javax.api"/&gt;
      &lt;module name="javax.transaction.api"/&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_11"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the Sybase JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.sybase --resources=<span class="emphasis"><em>/path/to/jconn4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the Sybase JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=sybase:add(driver-name=sybase,driver-module-name=com.sybase,driver-xa-datasource-class-name=com.sybase.jdbc4.jdbc.SybXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the Sybase datasource.
						</p><pre class="screen">data-source add --name=SybaseDB --jndi-name=java:jboss/SybaseDB --driver-name=sybase --connection-url=jdbc:sybase:Tds:localhost:5000/DATABASE?JCONNECT_VERSION=6 --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_sybase_xa_datasource"/>Example Sybase XA Datasource</h2></div></div></div><p>
					This is an example of a Sybase XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_sybase_xa_datasource_configuration"/>Example: Sybase XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/SybaseXADS" pool-name="SybaseXADS"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
      localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;
      mydatabase
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;
      4100
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="NetworkProtocol"&gt;
      Tds
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;sybase&lt;/driver&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sybase" module="com.sybase"&gt;
      &lt;xa-datasource-class&gt;com.sybase.jdbc4.jdbc.SybXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_sybase_jdbc_driver_literal_module_xml_literal_file_2"/>Example: Sybase JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="com.sybase"&gt;
    &lt;resources&gt;
      &lt;resource-root path="jconn4.jar"/&gt;
    &lt;/resources&gt;
    &lt;dependencies&gt;
      &lt;module name="javax.api"/&gt;
      &lt;module name="javax.transaction.api"/&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_12"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the Sybase JDBC driver as a core module.
						</p><pre class="screen">module add --name=com.sybase --resources=<span class="emphasis"><em>/path/to/jconn4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the Sybase JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=sybase:add(driver-name=sybase,driver-module-name=com.sybase,driver-xa-datasource-class-name=com.sybase.jdbc4.jdbc.SybXADataSource)</pre></li><li class="listitem"><p class="simpara">
							Add the Sybase XA datasource.
						</p><pre class="screen">xa-data-source add --name=SybaseXADS --jndi-name=java:jboss/SybaseXADS --driver-name=sybase --user-name=admin --password=admin --validate-on-match=true --background-validation=false --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter --same-rm-override=false --xa-datasource-properties={"ServerName"=&gt;"localhost","DatabaseName"=&gt;"mydatabase","PortNumber"=&gt;"4100","NetworkProtocol"=&gt;"Tds"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_mariadb_datasource"/>Example MariaDB Datasource</h2></div></div></div><p>
					This is an example of a MariaDB datasource configuration with connection information, basic security, and validation options.
				</p><h4><a id="example_mariadb_datasource_configuration"/>Example: MariaDB Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/MariaDBDS" pool-name="MariaDBDS"&gt;
    &lt;connection-url&gt;jdbc:mariadb://localhost:3306/jbossdb&lt;/connection-url&gt;
    &lt;driver&gt;mariadb&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mariadb" module="org.mariadb"&gt;
      &lt;driver-class&gt;org.mariadb.jdbc.Driver&lt;/driver-class&gt;
      &lt;xa-datasource-class&gt;org.mariadb.jdbc.MySQLDataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_mariadb_jdbc_driver_literal_module_xml_literal_file"/>Example: MariaDB JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="org.mariadb"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mariadb-java-client-1.2.3.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_13"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the MariaDB JDBC driver as a core module.
						</p><pre class="screen">module add --name=org.mariadb --resources=<span class="emphasis"><em>/path/to/mariadb-java-client-1.2.3.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the MariaDB JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=mariadb:add(driver-name=mariadb,driver-module-name=org.mariadb,driver-xa-datasource-class-name=org.mariadb.jdbc.MySQLDataSource, driver-class-name=org.mariadb.jdbc.Driver)</pre></li><li class="listitem"><p class="simpara">
							Add the MariaDB datasource.
						</p><pre class="screen">data-source add --name=MariaDBDS --jndi-name=java:jboss/MariaDBDS --driver-name=mariadb --connection-url=jdbc:mariadb://localhost:3306/jbossdb --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_mariadb_xa_datasource"/>Example MariaDB XA Datasource</h2></div></div></div><p>
					This is an example of a MariaDB XA datasource configuration with XA datasource properties, basic security, and validation options.
				</p><h4><a id="example_mariadb_xa_datasource_configuration"/>Example: MariaDB XA Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/MariaDBXADS" pool-name="MariaDBXADS"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
      localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;
      mariadbdb
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;mariadb&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mariadb" module="org.mariadb"&gt;
      &lt;driver-class&gt;org.mariadb.jdbc.Driver&lt;/driver-class&gt;
      &lt;xa-datasource-class&gt;org.mariadb.jdbc.MySQLDataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_mariadb_jdbc_driver_literal_module_xml_literal_file_2"/>Example: MariaDB JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="org.mariadb"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mariadb-java-client-1.2.3.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_14"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the MariaDB JDBC driver as a core module.
						</p><pre class="screen">module add --name=org.mariadb --resources=<span class="emphasis"><em>/path/to/mariadb-java-client-1.2.3.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the MariaDB JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=mariadb:add(driver-name=mariadb,driver-module-name=org.mariadb,driver-xa-datasource-class-name=org.mariadb.jdbc.MySQLDataSource, driver-class-name=org.mariadb.jdbc.Driver)</pre></li><li class="listitem"><p class="simpara">
							Add the MariaDB XA datasource.
						</p><pre class="screen">xa-data-source add --name=MariaDBXADS --jndi-name=java:jboss/MariaDBXADS --driver-name=mariadb --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter --xa-datasource-properties={"ServerName"=&gt;"localhost","DatabaseName"=&gt;"mariadbdb"}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example_mariadb_galera_cluster_datasource"/>Example MariaDB Galera Cluster Datasource</h2></div></div></div><p>
					This is an example of a MariaDB Galera Cluster datasource configuration with connection information, basic security, and validation options.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						MariaDB Galera Cluster does not support XA transactions.
					</p></div><h4><a id="example_mariadb_galera_cluster_datasource_configuration"/>Example: MariaDB Galera Cluster Datasource Configuration</h4><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/MariaDBGaleraClusterDS" pool-name="MariaDBGaleraClusterDS"&gt;
    &lt;connection-url&gt;jdbc:mariadb://192.168.1.1:3306,192.168.1.2:3306/jbossdb&lt;/connection-url&gt;
    &lt;driver&gt;mariadb&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"/&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"/&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mariadb" module="org.mariadb"&gt;
      &lt;driver-class&gt;org.mariadb.jdbc.Driver&lt;/driver-class&gt;
      &lt;xa-datasource-class&gt;org.mariadb.jdbc.MySQLDataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre><h4><a id="example_mariadb_jdbc_driver_literal_module_xml_literal_file_3"/>Example: MariaDB JDBC Driver <code class="literal">module.xml</code> File</h4><pre class="programlisting">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;module xmlns="urn:jboss:module:1.1" name="org.mariadb"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mariadb-java-client-1.5.4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre><h4><a id="example_management_cli_commands_15"/>Example Management CLI Commands</h4><p>
					This example configuration can be achieved by using the following management CLI commands.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Add the MariaDB JDBC driver as a core module.
						</p><pre class="screen">module add --name=org.mariadb --resources=<span class="emphasis"><em>/path/to/mariadb-java-client-1.5.4.jar</em></span> --dependencies=javax.api,javax.transaction.api</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be <a class="link" href="overview_of_class_loading_and_modules.html#create_module_manually" title="Create a Custom Module Manually">added</a> and <a class="link" href="overview_of_class_loading_and_modules.html#remove_module_manually" title="Remove a Custom Module Manually">removed</a> manually in a production environment.
							</p><p>
								Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
							</p></div></li><li class="listitem"><p class="simpara">
							Register the MariaDB JDBC driver.
						</p><pre class="screen">/subsystem=datasources/jdbc-driver=mariadb:add(driver-name=mariadb,driver-module-name=org.mariadb,driver-xa-datasource-class-name=org.mariadb.jdbc.MySQLDataSource, driver-class-name=org.mariadb.jdbc.Driver)</pre></li><li class="listitem"><p class="simpara">
							Add the MariaDB Galera Cluster datasource.
						</p><pre class="screen">data-source add --name=MariaDBGaleraClusterDS --jndi-name=java:jboss/MariaDBGaleraClusterDS --driver-name=mariadb --connection-url=jdbc:mariadb://192.168.1.1:3306,192.168.1.2:3306/jbossdb --user-name=admin --password=admin --validate-on-match=true --background-validation=false --valid-connection-checker-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker --exception-sorter-class-name=org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter</pre></li></ol></div></div></div></div></body></html>