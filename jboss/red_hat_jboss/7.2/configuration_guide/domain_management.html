<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 8. Domain Management</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="domain_management"/>Chapter 8. Domain Management</h1></div></div></div><p>
			This section discusses concepts and configuration specific to the managed domain operating mode.
		</p><p>
			For information on securing a managed domain, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#securing_managed_domain">Securing a Managed Domain</a> section of JBoss EAP <span class="emphasis"><em>How to Configure Server Security</em></span>.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="about_managed_domains"/>About Managed Domains</h1></div></div></div><p>
				The managed domain operating mode allows for the management of multiple JBoss EAP instances from a single control point.
			</p><p>
				Centrally-managed JBoss EAP server collections are known as members of a domain. All JBoss EAP instances in a domain share a common management policy.
			</p><p>
				A domain consists of one domain controller, one or more host controllers, and zero or more server groups per host.
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/topics/images/62.png" alt="A managed domain."/></div></div><p>
				A <a class="link" href="domain_management.html#about_domain_controller" title="About the Domain Controller">domain controller</a> is the central point from which the domain is controlled. It ensures that each server is configured according to the management policy of the domain. The domain controller is also a host controller.
			</p><p>
				A <a class="link" href="domain_management.html#about_host_controllers" title="About Host Controllers">host controller</a> is a physical or virtual host that interacts with the domain controller to control the lifecycle of the application server instances running on its host and to assist the domain controller to manage them. Each host can contain multiple server groups.
			</p><p>
				A <a class="link" href="domain_management.html#about_server_groups" title="About Server Groups">server group</a> is a set of <a class="link" href="domain_management.html#about_servers" title="About Servers">server</a> instances which have JBoss EAP installed on them and are managed and configured as one. The domain controller manages the configuration of and applications deployed onto server groups. Consequently, each server in a server group shares the same configuration and deployments.
			</p><p>
				Host controllers are tied to specific physical, or virtual, hosts. You can run multiple host controllers on the same hardware if you use different configurations, ensuring their ports and other resources do not conflict. It is possible for a domain controller, a single host controller, and multiple servers to run within the same JBoss EAP instance, on the same physical system.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="about_domain_controller"/>About the Domain Controller</h2></div></div></div><p>
					A domain controller is the JBoss EAP server instance that acts as a central management point for a domain. One host controller instance is configured to act as a domain controller.
				</p><p>
					The primary responsibilities of the domain controller are:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Maintain the domain’s central management policy.
						</li><li class="listitem">
							Ensure all host controllers are aware of its current contents.
						</li><li class="listitem">
							Assist the host controllers in ensuring that all running JBoss EAP server instances are configured in accordance with this policy.
						</li></ul></div><p>
					By default, the central management policy is stored in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/domain.xml</code> file. This file is required in this directory of the host controller that is set to run as the domain controller.
				</p><p>
					The <code class="literal">domain.xml</code> file contains profile configurations available for use by the servers in the domain. A <a class="link" href="domain_management.html#about_profiles" title="About Profiles">profile</a> contains the detailed settings of the various subsystems available in that profile. The domain configuration also includes the definition of socket groups and the server group definitions.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						It is possible for a JBoss EAP 7 domain controller to administer JBoss EAP 6 hosts and servers, as long as the hosts and servers are running JBoss EAP 6.2 or later. For more information, see <a class="link" href="domain_management.html#configure_eap7_administer_eap6" title="Configure a JBoss EAP 7.x Domain Controller to Administer JBoss EAP 6 Instances">Configure a JBoss EAP 7.x Domain Controller to Administer JBoss EAP 6 Instances</a>.
					</p></div><p>
					For more information, see the <a class="link" href="domain_management.html#start_managed_domain" title="Start a Managed Domain">Start a Managed Domain</a> and <a class="link" href="domain_management.html#configure_domain_controller" title="Configure the Domain Controller">Configure the Domain Controller</a> sections.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="about_host_controllers"/>About Host Controllers</h2></div></div></div><p>
					The primary responsibility of a host controller is server management. It delegates domain management tasks and is responsible for starting and stopping the individual application server processes that run on its host.
				</p><p>
					It interacts with the domain controller to help manage the communication between the servers and the domain controller. Multiple host controllers of a domain can interact with only a single domain controller. Hence, all the host controllers and server instances running on a single domain mode have a single domain controller and must belong to the same domain.
				</p><p>
					By default, each host controller reads its configuration from the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/host.xml</code> file located in the unzipped JBoss EAP installation file on its host’s file system. The <code class="literal">host.xml</code> file contains the following configuration information that is specific to the particular host:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The names of the server instances meant to run from this installation.
						</li><li class="listitem">
							Configurations specific to the local physical installation. For example, named interface definitions declared in <code class="literal">domain.xml</code> can be mapped to an actual machine-specific IP address in <code class="literal">host.xml</code>. And abstract path names in domain.xml can be mapped to actual file system paths in <code class="literal">host.xml</code>.
						</li><li class="listitem"><p class="simpara">
							Any of the following configurations:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									How the host controller contacts the domain controller to register itself and access the domain configuration.
								</li><li class="listitem">
									How to find and contact a remote domain controller.
								</li><li class="listitem">
									Whether the host controller is to act as the domain controller
								</li></ul></div></li></ul></div><p>
					For more information, see the <a class="link" href="domain_management.html#start_managed_domain" title="Start a Managed Domain">Start a Managed Domain</a> and <a class="link" href="domain_management.html#configure_host_controllers" title="Configure Host Controllers">Configure Host Controllers</a> sections.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="process_controllers"/>About Process Controllers</h2></div></div></div><p>
					A process controller is a small, lightweight process that is responsible for spawning the host controller process and monitoring its lifecycle. If the host controller crashes, the process controller will restart it. It also starts server processes as directed by the host controller; however, it will not automatically restart server processes that crash.
				</p><p>
					The process controller logs to the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/log/process-controller.log</code> file. You can set JVM options for the process controller in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.conf</code> file using the <code class="literal">PROCESS_CONTROLLER_JAVA_OPTS</code> variable.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="about_server_groups"/>About Server Groups</h2></div></div></div><p>
					A server group is a collection of server instances that are managed and configured as one. In a managed domain, every application server instance belongs to a server group, even if it is the only member. The server instances in a group share the same profile configuration and deployed content.
				</p><p>
					A domain controller and a host controller enforce the standard configuration on all server instances of every server group in its domain.
				</p><p>
					A domain can consist of multiple server groups. Different server groups can be configured with different profiles and deployments. For example, a domain can be configured with different server tiers providing different services.
				</p><p>
					Different server groups can also have the same profile and deployments. This can, for example, allow for rolling application upgrades where the application is upgraded on one server group and then updated on a second server group, avoiding a complete service outage.
				</p><p>
					For more information, see the <a class="link" href="domain_management.html#configuring_server_groups" title="Configure Server Groups">Configuring Server Groups</a> section.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="about_servers"/>About Servers</h2></div></div></div><p>
					A server represents an application server instance. In a managed domain, all server instances are members of a server group. The host controller launches each server instance in its own JVM process.
				</p><p>
					For more information, see the <a class="link" href="domain_management.html#configuring_servers" title="Configure Servers">Configuring Servers</a> section.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="navigating_domain_configs"/>Navigating Domain Configurations</h1></div></div></div><p>
				JBoss EAP provides scalable management interfaces to support both small and large-scale managed domains.
			</p><h3><a id="management_console"/>Management Console</h3><p>
				The JBoss EAP management console provides a graphical view of your domain and allows you to easily manage hosts, servers, deployments, and profiles for your domain.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Configuration</span></dt><dd><p class="simpara">
							From the <span class="strong"><strong>Configuration</strong></span> tab, you can configure the subsystems for each profile used in your domain. Different server groups in your domain may use different profiles depending the capabilities needed.
						</p><p class="simpara">
							Once you select the desired profile, all available subsystems for that profile are listed. For more information on configuring profiles, see <a class="link" href="domain_management.html#managing_jboss_eap_profiles" title="Managing JBoss EAP Profiles">Managing JBoss EAP Profiles</a>.
						</p></dd><dt><span class="term">Runtime</span></dt><dd><p class="simpara">
							From the <span class="strong"><strong>Runtime</strong></span> tab, you can manage servers and server groups as well as host configuration. You can browse the domain by host or by server group.
						</p><p class="simpara">
							From <span class="strong"><strong>Hosts</strong></span>, you can configure host properties and JVM settings as well as add and configure servers for that host.
						</p><p class="simpara">
							From <span class="strong"><strong>Server Groups</strong></span>, you can add new server groups and configure properties and JVM settings as well as add and configure servers for that server group. You can perform operations such as starting, stopping, suspending, and reloading all servers in the selected server group.
						</p><p class="simpara">
							From either <span class="strong"><strong>Hosts</strong></span> or <span class="strong"><strong>Server Groups</strong></span>, you can add new servers and configure server properties and JVM settings. You can perform operations such as starting, stopping, suspending, and reloading the selected server. You can also view runtime information, such as JVM usage, server logs, and subsystem-specific information.
						</p><p class="simpara">
							From <span class="strong"><strong>Topology</strong></span>, you can see an overview and view detailed information for the hosts, server groups, and servers in your domain. You can perform operations on each of them, such as reloading or suspending.
						</p></dd><dt><span class="term">Deployments</span></dt><dd><p class="simpara">
							From the <span class="strong"><strong>Deployments</strong></span> tab, you can add and deploy deployments to server groups. You can view all deployments in the content repository or view deployments deployed to a particular server group.
						</p><p class="simpara">
							For more information on deploying applications using the management console, see <a class="link" href="deploying_applications.html#deploy_app_domain_console" title="Deploy an Application in a Managed Domain Using the Management Console">Deploy an Application in a Managed Domain</a>
						</p></dd></dl></div><h3><a id="management_cli"/>Management CLI</h3><p>
				The JBoss EAP management CLI provides a command-line interface to manage hosts, servers, deployments and profiles for your domain.
			</p><p>
				Subsystem configuration can be accessed once the appropriate profile is selected.
			</p><pre class="screen">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span>/subsystem=<span class="emphasis"><em>SUBSYSTEM_NAME</em></span>:read-resource(recursive=true)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Instructions and examples throughout this guide may contain management CLI commands for subsystem configuration that apply when running as a standalone server, for example:
				</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:read-resource</pre><p>
					To adjust these management CLI commands to be run in a managed domain, you must specify the appropriate profile to configure, for example:
				</p><pre class="screen">/profile=default/subsystem=datasources/data-source=ExampleDS:read-resource</pre></div><p>
				After specifying the appropriate host, you can configure host settings and perform operations on servers on that host.
			</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server=<span class="emphasis"><em>SERVER_NAME</em></span>:read-resource</pre><p>
				After specifying the appropriate host, you can configure servers for that host.
			</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:write-attribute(name=<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>,value=<span class="emphasis"><em>VALUE</em></span>)</pre><p>
				After specifying the appropriate server group, you can configure server group settings and perform operations on all servers in the selected server group.
			</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:read-resource</pre><p>
				You can deploy applications in a managed domain by using the <code class="literal">deploy</code> management CLI command and specifying the appropriate server groups. For instructions, see <a class="link" href="deploying_applications.html#deploy_app_managed_domain_cli" title="Deploy an Application in a Managed Domain Using the Management CLI">Deploy an Application in a Managed Domain</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="launching_a_managed_domain"/>Launching a Managed Domain</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="start_managed_domain"/>Start a Managed Domain</h2></div></div></div><p>
					Domain and host controllers can be started using the <code class="literal">domain.sh</code> or <code class="literal">domain.bat</code> script provided with JBoss EAP. For a complete listing of all available startup script arguments and their purposes, use the <code class="literal">--help</code> argument or see the <a class="link" href="reference_material.html#reference_of_switches_and_arguments_to_pass_at_server_runtime" title="Server Runtime Arguments">Server Runtime Arguments</a> section.
				</p><p>
					The domain controller must be started before any slave servers in any server groups in the domain. Start the domain controller first, then start any other associated host controllers in the domain.
				</p><h4><a id="start_the_domain_controller"/>Start the Domain Controller</h4><p>
					Start the domain controller with the <code class="literal">host-master.xml</code> configuration file, which is preconfigured for a dedicated domain controller.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-master.xml</pre><p>
					Depending on your domain setup, you will need to make additional configurations to allow host controllers to connect. Also see the following example domain setups:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="domain_management.html#set_up_domain_single_machine" title="Set Up a Managed Domain on a Single Machine">Set Up a Managed Domain on a Single Machine</a>
						</li><li class="listitem">
							<a class="link" href="domain_management.html#set_up_domain_two_machines" title="Set Up a Managed Domain on Two Machines">Set Up a Managed Domain on Two Machines</a>
						</li></ul></div><h4><a id="start_a_host_controller"/>Start a Host Controller</h4><p>
					Start the host controller with the <code class="literal">host-slave.xml</code> configuration file, which is preconfigured for a slave host controller.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh  --host-config=host-slave.xml</pre><p>
					Depending on your domain setup, you will need to make additional configurations connect to, and not conflict with, the domain controller. Also see the following example domain setups:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="domain_management.html#set_up_domain_single_machine" title="Set Up a Managed Domain on a Single Machine">Set Up a Managed Domain on a Single Machine</a>
						</li><li class="listitem">
							<a class="link" href="domain_management.html#set_up_domain_two_machines" title="Set Up a Managed Domain on Two Machines">Set Up a Managed Domain on Two Machines</a>
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_domain_controller"/>Configure the Domain Controller</h2></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						It is not supported to configure multiple domain or host controllers on the same machine when using the RPM installation method to install JBoss EAP.
					</p></div><h4><a id="configure_a_host_to_act_as_the_domain_controller"/>Configure a Host to Act as the Domain Controller</h4><p>
					A host is designated to be the domain controller if it includes the <code class="literal">&lt;local/&gt;</code> element in the <code class="literal">&lt;domain-controller&gt;</code> declaration.
				</p><pre class="programlisting">&lt;domain-controller&gt;
  &lt;local/&gt;
&lt;/domain-controller&gt;</pre><p>
					The host acting as the domain controller must expose a management interface that is accessible to other hosts in the domain. It is not required to expose an HTTP(S) management interface, but is recommended as it allows access to the management console.
				</p><pre class="programlisting">&lt;management-interfaces&gt;
  &lt;native-interface security-realm="ManagementRealm"&gt;
    &lt;socket interface="management" port="${jboss.management.native.port:9999}"/&gt;
  &lt;/native-interface&gt;
  &lt;http-interface security-realm="ManagementRealm" http-upgrade-enabled="true"&gt;
    &lt;socket interface="management" port="${jboss.management.http.port:9990}"/&gt;
  &lt;/http-interface&gt;
&lt;/management-interfaces&gt;</pre><p>
					The <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/host-master.xml</code> file is already preconfigured with these settings to act as the domain controller.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_host_controllers"/>Configure Host Controllers</h2></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						It is not supported to configure multiple domain or host controllers on the same machine when using the RPM installation method to install JBoss EAP.
					</p></div><h4><a id="connect_to_the_domain_controller"/>Connect to the Domain Controller</h4><p>
					A host controller must be provided with the means to connect to the domain controller so that it can register itself with the domain. This is configured in the <code class="literal">&lt;domain-controller&gt;</code> element of the configuration.
				</p><pre class="programlisting">&lt;domain-controller&gt;
  &lt;remote security-realm="ManagementRealm"&gt;
    &lt;discovery-options&gt;
      &lt;static-discovery name="primary" protocol="${jboss.domain.master.protocol:remote}" host="${jboss.domain.master.address}" port="${jboss.domain.master.port:9999}"/&gt;
    &lt;/discovery-options&gt;
  &lt;/remote&gt;
&lt;/domain-controller&gt;</pre><p>
					The <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/host-slave.xml</code> file is already preconfigured with these settings to connect to the domain controller. You will need to provide the <code class="literal">jboss.domain.master.address</code> property when starting the host controller.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml -Djboss.domain.master.address=<span class="emphasis"><em>IP_ADDRESS</em></span></pre><p>
					For more information on domain controller discovery, see the <a class="link" href="domain_management.html#domain_controller_discovery_failover" title="Domain Controller Discovery and Failover">Domain Controller Discovery and Failover</a> section.
				</p><p>
					Depending on your domain setup, you may also need to provide authentication for the host controller to be authenticated by the domain controller. See <a class="link" href="domain_management.html#set_up_domain_two_machines" title="Set Up a Managed Domain on Two Machines">Set Up a Managed Domain on Two Machines</a> for details on generating a management user with a secret value and updating the host controller configuration with that value.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configure_name_of_host"/>Configure the Name of a Host</h3></div></div></div><p>
						Every host running in a managed domain must have a unique host name. To ease administration and allow for the use of the same host configuration files on multiple hosts, the server uses the following precedence for determining the host name.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								If set, the host element name attribute in the <code class="literal">host.xml</code> configuration file.
							</li><li class="listitem">
								The value of the <code class="literal">jboss.host.name</code> system property.
							</li><li class="listitem">
								The value that follows the final period (<code class="literal">.</code>) character in the <code class="literal">jboss.qualified.host.name</code> system property, or the entire value if there is no final period (<code class="literal">.</code>) character.
							</li><li class="listitem">
								The value that follows the period (<code class="literal">.</code>) character in the <code class="literal">HOSTNAME</code> environment variable for POSIX-based operating systems, the <code class="literal">COMPUTERNAME</code> environment variable for Microsoft Windows, or the entire value if there is no final period (<code class="literal">.</code>) character.
							</li></ol></div><p>
						A host controller’s name is configured in the <code class="literal">host</code> element at the top of the relevant <code class="literal">host.xml</code> configuration file, for example:
					</p><pre class="programlisting">&lt;host xmlns="urn:jboss:domain:8.0" name="host1"&gt;</pre><p>
						Use the following procedure to update the host name using the management CLI.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Start the JBoss EAP host controller.
							</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml</pre></li><li class="listitem"><p class="simpara">
								Launch the management CLI, connecting to the domain controller.
							</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh --connect --controller=<span class="emphasis"><em>DOMAIN_CONTROLLER_IP_ADDRESS</em></span></pre></li><li class="listitem"><p class="simpara">
								Use the following command to set a new host name.
							</p><pre class="screen">/host=<span class="emphasis"><em>EXISTING_HOST_NAME</em></span>:write-attribute(name=name,value=<span class="emphasis"><em>NEW_HOST_NAME</em></span>)</pre><p class="simpara">
								This modifies the host name attribute in the <code class="literal">host-slave.xml</code> file as follows:
							</p><pre class="programlisting">&lt;host name="<span class="emphasis"><em>NEW_HOST_NAME</em></span>" xmlns="urn:jboss:domain:8.0"&gt;</pre></li><li class="listitem"><p class="simpara">
								Reload the host controller in order for the changes to take effect.
							</p><pre class="screen">reload --host=<span class="emphasis"><em>EXISTING_HOST_NAME</em></span></pre></li></ol></div><p>
						If a host controller does not have a name set in the configuration file, you can also pass in the host name at runtime.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml  -Djboss.host.name=<span class="emphasis"><em>HOST_NAME</em></span></pre></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managing_servers"/>Managing Servers</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_server_groups"/>Configure Server Groups</h2></div></div></div><p>
					The following is an example of a server group definition:
				</p><pre class="programlisting">&lt;server-group name="main-server-group" profile="full"&gt;
  &lt;jvm name="default"&gt;
    &lt;heap size="64m" max-size="512m"/&gt;
  &lt;/jvm&gt;
  &lt;socket-binding-group ref="full-sockets"/&gt;
  &lt;deployments&gt;
    &lt;deployment name="test-application.war" runtime-name="test-application.war"/&gt;
    &lt;deployment name="helloworld.war" runtime-name="helloworld.war" enabled="false"/&gt;
  &lt;/deployments&gt;
&lt;/server-group&gt;</pre><p>
					Server groups can be configured using the management CLI or from the management console <span class="strong"><strong>Runtime</strong></span> tab.
				</p><h4><a id="add_a_server_group"/>Add a Server Group</h4><p>
					The following management CLI command can be used to add a server group.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:add(profile=<span class="emphasis"><em>PROFILE_NAME</em></span>,socket-binding-group=<span class="emphasis"><em>SOCKET_BINDING_GROUP_NAME</em></span>)</pre><h4><a id="update_a_server_group"/>Update a Server Group</h4><p>
					The following management CLI command can be used to update server group attributes.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:write-attribute(name=<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>,value=<span class="emphasis"><em>VALUE</em></span>)</pre><h4><a id="remove_a_server_group"/>Remove a Server Group</h4><p>
					The following management CLI command can be used to remove a server group.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:remove</pre><h4><a id="server_group_attributes"/>Server Group Attributes</h4><p>
					A server group requires the following attributes:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">name</code>: The server group name.
						</li><li class="listitem">
							<code class="literal">profile</code>: The server group profile name.
						</li><li class="listitem">
							<code class="literal">socket-binding-group</code>: The default socket binding group used for servers in the group. This can be overridden on a per-server basis.
						</li></ul></div><p>
					A server group includes the following optional attributes:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">management-subsystem-endpoint</code>: Set to <code class="literal">true</code> to have servers belonging to the server group connect back to the host controller using the endpoint from their <code class="literal">remoting</code> subsystem. The <code class="literal">remoting</code> subsystem must be present for this to work.
						</li><li class="listitem">
							<code class="literal">socket-binding-default-interface</code>: The socket binding group default interface for this server.
						</li><li class="listitem">
							<code class="literal">socket-binding-port-offset</code>: The default offset to be added to the port values given by the socket binding group.
						</li><li class="listitem">
							<code class="literal">deployments</code>: The deployment content to be deployed on the servers in the group.
						</li><li class="listitem">
							<code class="literal">jvm</code>: The default JVM settings for all servers in the group. The host controller merges these settings with any other configuration provided in <code class="literal">host.xml</code> to derive the settings used to launch the server’s JVM.
						</li><li class="listitem">
							<code class="literal">deployment-overlays</code>: Links between a defined deployment overlay and deployments in this server group.
						</li><li class="listitem">
							<code class="literal">system-properties</code>: The system properties to be set on servers in the group.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_servers"/>Configure Servers</h2></div></div></div><p>
					The default <code class="literal">host.xml</code> configuration file defines three servers:
				</p><pre class="programlisting">&lt;servers&gt;
  &lt;server name="server-one" group="main-server-group"&gt;
  &lt;/server&gt;
  &lt;server name="server-two" group="main-server-group" auto-start="true"&gt;
    &lt;socket-bindings port-offset="150"/&gt;
  &lt;/server&gt;
  &lt;server name="server-three" group="other-server-group" auto-start="false"&gt;
    &lt;socket-bindings port-offset="250"/&gt;
  &lt;/server&gt;
&lt;/servers&gt;</pre><p>
					A server instance named <code class="literal">server-one</code> is associated with <code class="literal">main-server-group</code> and inherits the subsystem configuration and socket bindings specified by that server group. A server instance named <code class="literal">server-two</code> is also associated with <code class="literal">main-server-group</code>, but also defines a socket binding <code class="literal">port-offset</code> value, so as not to conflict with the port values used by <code class="literal">server-one</code>. A server instance named <code class="literal">server-three</code> is associated with <code class="literal">other-server-group</code> and uses that group’s configurations. It also defines a <code class="literal">port-offset</code> value and sets <code class="literal">auto-start</code> to <code class="literal">false</code> so that this server does not start when the host controller starts.
				</p><p>
					Servers can be configured using the management CLI or from the management console <span class="strong"><strong>Runtime</strong></span> tab.
				</p><h4><a id="add_a_server"/>Add a Server</h4><p>
					The following management CLI command can be used to add a server.
				</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:add(group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>)</pre><h4><a id="update_a_server"/>Update a Server</h4><p>
					The following management CLI command can be used to update server attributes.
				</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:write-attribute(name=<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>,value=<span class="emphasis"><em>VALUE</em></span>)</pre><h4><a id="remove_a_server"/>Remove a Server</h4><p>
					The following management CLI command can be used to remove a server.
				</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:remove</pre><h4><a id="server_attributes-1"/>Server Attributes</h4><p>
					A server requires the following attributes:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">name</code>: The name of the server.
						</li><li class="listitem">
							<code class="literal">group</code>: The name of a server group from the domain model.
						</li></ul></div><p>
					A server includes the following optional attributes:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">auto-start</code>: Whether or not this server should be started when the host controller starts.
						</li><li class="listitem">
							<code class="literal">socket-binding-group</code>: The socket binding group to which this server belongs.
						</li><li class="listitem">
							<code class="literal">socket-binding-port-offset</code>: An offset to be added to the port values given by the socket binding group for this server.
						</li><li class="listitem">
							<code class="literal">update-auto-start-with-server-status</code>: Update the <code class="literal">auto-start</code> attribute with the status of the server.
						</li><li class="listitem">
							<code class="literal">interface</code>: A list of fully-specified named network interfaces available for use on the server.
						</li><li class="listitem">
							<code class="literal">jvm</code>: The JVM settings for this server. If not declared, the settings are inherited from the parent server group or host.
						</li><li class="listitem">
							<code class="literal">path</code>: A list of named file system paths.
						</li><li class="listitem">
							<code class="literal">system-property</code>: A list of system properties to set on this server.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="start_stop_servers"/>Start and Stop Servers</h2></div></div></div><p>
					You can perform operations on servers, such as starting, stopping, and reloading, from the management console by navigating to the <span class="strong"><strong>Runtime</strong></span> tab and selecting the appropriate host or server group.
				</p><p>
					See the below commands for performing these operations using the management CLI.
				</p><h4><a id="start_servers_2"/>Start Servers</h4><p>
					You can start a single server on a particular host.
				</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:start</pre><p>
					You can start all servers in a specified server group.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:start-servers</pre><h4><a id="stop_servers"/>Stop Servers</h4><p>
					You can stop a single server on a particular host.
				</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:stop</pre><p>
					You can stop all servers in a specified server group.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:stop-servers</pre><h4><a id="reload_servers"/>Reload Servers</h4><p>
					You can reload a single server on a particular host.
				</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>:reload</pre><p>
					You can reload all servers in a specified server group.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:reload-servers</pre><h4><a id="kill_servers"/>Kill Servers</h4><p>
					You can kill all server processes in a specified server group.
				</p><pre class="screen">/server-group=<span class="emphasis"><em>SERVER_GROUP_NAME</em></span>:kill-servers</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="domain_controller_discovery_failover"/>Domain Controller Discovery and Failover</h1></div></div></div><p>
				When setting up a managed domain, each host controller must be configured with information needed to contact the domain controller. In JBoss EAP, each host controller can be configured with <a class="link" href="domain_management.html#configure_domain_discovery_options" title="Configure Domain Discovery Options">multiple options</a> for finding the domain controller. Host controllers iterate through the list of options until one succeeds.
			</p><p>
				A backup host controller can be <a class="link" href="domain_management.html#promote_hc_to_dc" title="Promote a Host Controller to Act as Domain Controller">promoted to domain contoller</a> if there is a problem with the primary domain controller. This allows host controllers to automatically fail over to the new domain controller once it has been promoted.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_domain_discovery_options"/>Configure Domain Discovery Options</h2></div></div></div><p>
					The following is an example of how to configure a host controller with multiple options for finding the domain controller.
				</p><div class="title"><strong>Example: A Host Controller with Multiple Domain Controller Options</strong></div><p>
						
</p><pre class="programlisting">&lt;domain-controller&gt;
  &lt;remote security-realm="ManagementRealm"&gt;
    &lt;discovery-options&gt;
      &lt;static-discovery name="primary" protocol="${jboss.domain.master.protocol:remote}" host="172.16.81.100" port="${jboss.domain.master.port:9999}"/&gt;
      &lt;static-discovery name="backup" protocol="${jboss.domain.master.protocol:remote}" host="172.16.81.101" port="${jboss.domain.master.port:9999}"/&gt;
    &lt;/discovery-options&gt;
  &lt;/remote&gt;
&lt;/domain-controller&gt;</pre><p>

					</p><p>
					A static discovery option includes the following required attributes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">name</span></dt><dd>
								The name for this domain controller discovery option.
							</dd><dt><span class="term">host</span></dt><dd>
								The remote domain controller’s host name.
							</dd><dt><span class="term">port</span></dt><dd>
								The remote domain controller’s port.
							</dd></dl></div><p>
					In the example above, the first discovery option is the one expected to succeed. The second can be used in failover situations.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="boot_hc_cached_config"/>Start a Host Controller with a Cached Domain Configuration</h2></div></div></div><p>
					A host controller can be started without a connection to the domain controller by using the <code class="literal">--cached-dc</code> option; however, the host controller must have previously cached its domain configuration locally from the domain controller. Starting a host controller with this <code class="literal">--cached-dc</code> option will cache the host controller’s domain configuration from the domain controller.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml --cached-dc</pre><p>
					This creates a <code class="literal">domain.cached-remote.xml</code> file in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code> directory that contains the information necessary for this host controller to temporarily manage its current servers without a domain controller connection.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						By default, using the <code class="literal">--cached-dc</code> option only caches configuration used by this host controller, which means that it cannot be promoted to domain controller for the entire domain. See <a class="link" href="domain_management.html#cache_domain_config" title="Cache the Domain Configuration">Cache the Domain Configuration</a> for information on caching the entire domain configuration to allow a host controller to act as the domain controller.
					</p></div><p>
					If the domain controller is unavailable when starting this host controller with <code class="literal">--cached-dc</code>, the host controller will start using the cached configuration saved in the <code class="literal">domain.cached-remote.xml</code> file. Note that this file must exist or the host controller will fail to start.
				</p><p>
					While in this state, the host controller cannot modify the domain configuration, but can launch servers and manage deployments.
				</p><p>
					Once started with the cached configuration, the host controller will continue to attempt to reconnect to the domain controller. Once the domain controller becomes available, the host controller will automatically reconnect to it and synchronize the domain configuration. Note that some configuration changes may require you to reload the host controller to take effect. A warning will be logged on the host controller if this occurs.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="promote_hc_to_dc"/>Promote a Host Controller to Act as Domain Controller</h2></div></div></div><p>
					You can promote a host controller to act as the domain controller if a problem arises with the primary domain controller. The host controller must first <a class="link" href="domain_management.html#cache_domain_config" title="Cache the Domain Configuration">cache the domain configuration locally</a> from the domain controller before it can be <a class="link" href="domain_management.html#promote_hc" title="Promote a Host Controller to Be the Domain Controller">promoted</a>.
				</p><h4><a id="cache_domain_config"/>Cache the Domain Configuration</h4><p>
					Use the <code class="literal">--backup</code> option for any host controller that you might want to become the domain controller.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml --backup</pre><p>
					This creates a <code class="literal">domain.cached-remote.xml</code> file in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code> directory that contains a copy of the entire domain configuration. This configuration will be used if the host controller is reconfigured to act as the domain controller.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The <code class="literal">ignore-unused-configuration</code> attribute is used to determine how much configuration to cache for a particular host. A value of <code class="literal">true</code> means that only the configuration relevant to this host controller is cached, which would not allow it to take over as domain controller. A value of <code class="literal">false</code> means that the entire domain configuration is cached.
					</p><p>
						The <code class="literal">--backup</code> argument defaults this attribute to <code class="literal">false</code> to cache the entire domain. However, if you set this attribute in the <code class="literal">host.xml</code> file, that value is used.
					</p><p>
						You can also use the <code class="literal">--cached-dc</code> option alone to create a copy of the domain configuration, but must set <code class="literal">ignore-unused-configuration</code> to <code class="literal">false</code> in the <code class="literal">host.xml</code> to cache the entire domain. For example:
					</p><pre class="programlisting">&lt;domain-controller&gt;
  &lt;remote username="$local" security-realm="ManagementRealm" ignore-unused-configuration="false"&gt;
    &lt;discovery-options&gt;
      ...
    &lt;/discovery-options&gt;
  &lt;/remote&gt;
&lt;/domain-controller&gt;</pre></div><h4><a id="promote_hc"/>Promote a Host Controller to Be the Domain Controller</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Ensure the original domain controller is stopped.
						</li><li class="listitem">
							Use the management CLI to connect to the host controller that is to become the new domain controller.
						</li><li class="listitem"><p class="simpara">
							Execute the following command to configure the host controller to act as the new domain controller.
						</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>:write-local-domain-controller</pre></li><li class="listitem"><p class="simpara">
							Execute the following command to reload the host controller.
						</p><pre class="screen">reload --host=<span class="emphasis"><em>HOST_NAME</em></span></pre></li></ol></div><p>
					This host controller will now act as the domain controller.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managed_domain_setups"/>Managed Domain Setups</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="set_up_domain_single_machine"/>Set Up a Managed Domain on a Single Machine</h2></div></div></div><p>
					You can run multiple host controllers on a single machine by using the <code class="literal">jboss.domain.base.dir</code> property.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						It is not supported to configure more than one JBoss EAP host controller as a system service on a single machine.
					</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Copy the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain</code> directory for the domain controller.
						</p><pre class="screen">$ cp -r <span class="emphasis"><em>EAP_HOME</em></span>/domain <span class="emphasis"><em>/path/to</em></span>/domain1</pre></li><li class="listitem"><p class="simpara">
							Copy the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain</code> directory for a host controller.
						</p><pre class="screen">$ cp -r <span class="emphasis"><em>EAP_HOME</em></span>/domain <span class="emphasis"><em>/path/to</em></span>/host1</pre></li><li class="listitem"><p class="simpara">
							Start the domain controller using <code class="literal"><span class="emphasis"><em>/path/to</em></span>/domain1</code>.
						</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-master.xml -Djboss.domain.base.dir=<span class="emphasis"><em>/path/to</em></span>/domain1</pre></li><li class="listitem"><p class="simpara">
							Start the host controller using <code class="literal"><span class="emphasis"><em>/path/to</em></span>/host1</code>.
						</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml -Djboss.domain.base.dir=<span class="emphasis"><em>/path/to</em></span>/host1 -Djboss.domain.master.address=<span class="emphasis"><em>IP_ADDRESS</em></span> -Djboss.management.native.port=<span class="emphasis"><em>PORT</em></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								When starting a host controller, you must specify the address of the domain controller using the <code class="literal">jboss.domain.master.address</code> property.
							</p><p>
								Additionally, since this host controller is running on the same machine as the domain controller, you must change the management interface so that it does not conflict with the domain controller’s management interface. This command sets the <code class="literal">jboss.management.native.port</code> property.
							</p></div></li></ol></div><p>
					Each instance started in this manner will share the rest of the resources in the base installation directory, for example, <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/modules/</code>, but use the domain configuration from the directory specified by <code class="literal">jboss.domain.base.dir</code>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="set_up_domain_two_machines"/>Set Up a Managed Domain on Two Machines</h2></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						You may need to configure your firewall to run this example.
					</p></div><p>
					You can create managed domain on two machines, where one machine is a domain controller and the other machine is a host. For more information, see <a class="link" href="domain_management.html#about_domain_controller" title="About the Domain Controller">About the Domain Controller</a>.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal"><span class="emphasis"><em>IP1</em></span></code> = IP address of the domain controller (Machine 1)
						</li><li class="listitem">
							<code class="literal"><span class="emphasis"><em>IP2</em></span></code> = IP address of the host (Machine 2)
						</li></ul></div><h4><a id="create_a_managed_domain_on_two_machines"/>Create a Managed Domain on Two Machines</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							On Machine 1
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									Add a management user so that the host can be authenticated by the domain controller.
								</p><p class="simpara">
									Use the <code class="literal">add-user.sh</code> script to add the management user for the host controller, <code class="literal"><span class="emphasis"><em>HOST_NAME</em></span></code>. Make sure to answer <code class="literal">yes</code> to the last prompt and note the secret value provided. This secret value will be used in the host controller configuration, and will appear similar to the line below:
								</p><pre class="programlisting">&lt;secret value="<span class="emphasis"><em>SECRET_VALUE</em></span>" /&gt;</pre></li><li class="listitem"><p class="simpara">
									Start the domain controller.
								</p><p class="simpara">
									Specify the <code class="literal">host-master.xml</code> configuration file, which is preconfigured for a dedicated domain controller. Also, set the <code class="literal">jboss.bind.address.management</code> property to make the domain controller visible to other machines.
								</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-master.xml -Djboss.bind.address.management=<span class="emphasis"><em>IP1</em></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
							On Machine 2
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									Update the host configuration with the user credentials.
								</p><p class="simpara">
									Edit <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/host-slave.xml</code> and set the host name, <code class="literal"><span class="emphasis"><em>HOST_NAME</em></span></code>, and secret value, <code class="literal"><span class="emphasis"><em>SECRET_VALUE</em></span></code>.
								</p><pre class="programlisting">&lt;host xmlns="urn:jboss:domain:8.0" name="<span class="emphasis"><em>HOST_NAME</em></span>"&gt;
  &lt;management&gt;
    &lt;security-realms&gt;
      &lt;security-realm name="ManagementRealm"&gt;
        &lt;server-identities&gt;
          &lt;secret value="<span class="emphasis"><em>SECRET_VALUE</em></span>" /&gt;
        &lt;/server-identities&gt;
        ...</pre></li><li class="listitem"><p class="simpara">
									Start the host controller.
								</p><p class="simpara">
									Specify the <code class="literal">host-slave.xml</code> configuration file, which is preconfigured for a slave host controller. Also, set the <code class="literal">jboss.domain.master.address</code> property to connect to the domain controller and the <code class="literal">jboss.bind.address</code> property to set the host controller bind address.
								</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-slave.xml  -Djboss.domain.master.address=<span class="emphasis"><em>IP1</em></span>  -Djboss.bind.address=<span class="emphasis"><em>IP2</em></span></pre></li></ol></div></li></ol></div><p>
					You can now manage the domain from the management CLI by specifying the domain controller address with the <code class="literal">--controller</code> parameter when launching.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh --connect --controller=<span class="emphasis"><em>IP1</em></span></pre><p>
					Or you can manage the domain from the management console at <code class="literal">http://<span class="emphasis"><em>IP1</em></span>:9990</code>.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managing_multiple_jboss_eap_versions"/>Managing Multiple JBoss EAP Versions</h1></div></div></div><p>
				The latest version of JBoss EAP can manage JBoss EAP servers and host that are running an earlier version. See the appropriate section depending on which versions of JBoss EAP you need to manage.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="domain_management.html#configure_eap7_administer_eap6" title="Configure a JBoss EAP 7.x Domain Controller to Administer JBoss EAP 6 Instances">Configure a JBoss EAP 7.x Domain Controller to Administer JBoss EAP 6 Instances</a>
					</li><li class="listitem">
						<a class="link" href="domain_management.html#configure_eap71_administer_eap70" title="Configure a JBoss EAP 7.1 Domain Controller to Administer JBoss EAP 7.0 Instances">Configure a JBoss EAP 7.1 Domain Controller to Administer JBoss EAP 7.0 Instances</a>
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_eap7_administer_eap6"/>Configure a JBoss EAP 7.x Domain Controller to Administer JBoss EAP 6 Instances</h2></div></div></div><p>
					A JBoss EAP 7.1 domain controller can manage hosts and servers running JBoss EAP 6 as long as they are JBoss EAP 6.2 or later.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						For a JBoss EAP 7.0 domain controller managing JBoss EAP 7.0 hosts that are on a different patch release, there are no configuration changes needed. However, the JBoss EAP 7.0 domain controller must be running a patch release that is equal to or higher than the versions on the host controllers that it manages.
					</p></div><p>
					Complete the following tasks to successfully manage JBoss EAP 6 instances in a JBoss EAP 7 managed domain.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							<a class="link" href="domain_management.html#add_eap6_config_to_eap7" title="Add the JBoss EAP 6 Configuration to the JBoss EAP 7 Domain Controller">Add the JBoss EAP 6 configuration to the JBoss EAP 7 domain controller</a>.
						</li><li class="listitem">
							<a class="link" href="domain_management.html#adjust_eap6_profiles" title="Update the Behavior for the JBoss EAP 6 Profiles">Update the behavior for the JBoss EAP 6 profiles</a>.
						</li><li class="listitem">
							<a class="link" href="domain_management.html#update_eap6_servers_eap7_server_group" title="Set the Server Group for the JBoss EAP 6 Servers">Set the server group for the JBoss EAP 6 servers</a>.
						</li><li class="listitem">
							<a class="link" href="domain_management.html#prevent_eap6_servers_from_eap7_updates" title="Prevent the JBoss EAP 6 Instances from Receiving JBoss EAP 7 Updates">Prevent the JBoss EAP 6 instances from receiving JBoss EAP 7 updates</a>.
						</li></ol></div><p>
					Once these tasks are complete, you can manage your JBoss EAP 6 servers and configurations from the JBoss EAP 7 domain controller using the management CLI. Note that JBoss EAP 6 hosts will not be able to take advantage of new JBoss EAP 7 features, such as batch processing.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						Because the management console is optimized for the latest version of JBoss EAP, you should not use it to update your JBoss EAP 6 hosts, servers, and profiles. Use the management CLI instead when managing your JBoss EAP 6 configurations from a JBoss EAP 7 managed domain.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="add_eap6_config_to_eap7"/>Add the JBoss EAP 6 Configuration to the JBoss EAP 7 Domain Controller</h3></div></div></div><p>
						To allow the domain controller to manage your JBoss EAP 6 servers, you must provide the JBoss EAP 6 configuration details in the JBoss EAP 7 domain configuration. You can do this by copying the JBoss EAP 6 profiles, socket binding groups, and server groups to the JBoss EAP 7 <code class="literal">domain.xml</code> configuration file.
					</p><p>
						You will need to rename resources if any conflict with the existing names in the JBoss EAP 7 configuration. There are also some additional <a class="link" href="domain_management.html#adjust_eap6_profiles" title="Update the Behavior for the JBoss EAP 6 Profiles">adjustments</a> to make to ensure the proper behavior.
					</p><p>
						The following procedure uses the JBoss EAP 6 <code class="literal">default</code> profile, <code class="literal">standard-sockets</code> socket binding group, and <code class="literal">main-server-group</code> server group.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Edit the JBoss EAP 7 <code class="literal">domain.xml</code> configuration file. It is recommended to back up this file before editing.
							</li><li class="listitem"><p class="simpara">
								Copy the applicable JBoss EAP 6 profiles to the JBoss EAP 7 <code class="literal">domain.xml</code> file.
							</p><p class="simpara">
								This procedure assumes that the JBoss EAP 6 <code class="literal">default</code> profile was copied and renamed to <code class="literal">eap6-default</code>.
							</p><div class="title"><strong>JBoss EAP 7 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;profiles&gt;
  ...
  &lt;profile name="eap6-default"&gt;
    ...
  &lt;/profile&gt;
&lt;/profiles&gt;</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Add the necessary extensions used by this profile.
							</p><p class="simpara">
								If your JBoss EAP 6 profile uses subsystems that are no longer present in JBoss EAP 7, you must add the appropriate extensions to the JBoss EAP domain configuration.
							</p><div class="title"><strong>JBoss EAP 7 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;extensions&gt;
  ...
  &lt;extension module="org.jboss.as.configadmin"/&gt;
  &lt;extension module="org.jboss.as.threads"/&gt;
  &lt;extension module="org.jboss.as.web"/&gt;
&lt;extensions&gt;</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Copy the applicable JBoss EAP 6 socket binding groups to the JBoss EAP 7 <code class="literal">domain.xml</code> file.
							</p><p class="simpara">
								This procedure assumes that the JBoss EAP 6 <code class="literal">standard-sockets</code> socket binding group was copied and renamed to <code class="literal">eap6-standard-sockets</code>.
							</p><div class="title"><strong>JBoss EAP 7 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;socket-binding-groups&gt;
  ...
  &lt;socket-binding-group name="eap6-standard-sockets" default-interface="public"&gt;
    ...
  &lt;/socket-binding-group&gt;
&lt;/socket-binding-groups&gt;</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Copy the applicable JBoss EAP 6 server groups to the JBoss EAP 7 <code class="literal">domain.xml</code> file.
							</p><p class="simpara">
								This procedure assumes that the JBoss EAP 6 <code class="literal">main-server-group</code> server group was copied and renamed to <code class="literal">eap6-main-server-group</code>. You must also update this server group to use the JBoss EAP 6 profile, <code class="literal">eap6-default</code>, and the JBoss EAP 6 socket binding group, <code class="literal">eap6-standard-sockets</code>.
							</p><div class="title"><strong>JBoss EAP 7 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;server-groups&gt;
  ...
  &lt;server-group name="eap6-main-server-group" profile="eap6-default"&gt;
    ...
    &lt;socket-binding-group ref="eap6-standard-sockets"/&gt;
  &lt;/server-group&gt;
&lt;/server-groups&gt;</pre><p>

								</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="adjust_eap6_profiles"/>Update the Behavior for the JBoss EAP 6 Profiles</h3></div></div></div><p>
						Additional updates to the profiles used by your JBoss EAP 6 instances are necessary depending on the JBoss EAP version and desired behavior. You may require additional changes depending on the subsystems and configuration that your existing JBoss EAP 6 instances use.
					</p><p>
						Start the JBoss EAP 7 domain controller and launch its management CLI to perform the following updates. These examples assume that the JBoss EAP 6 profile is <code class="literal">eap6-default</code>.
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
								Remove the <code class="literal">bean-validation</code> subsystem.
							</p><p class="simpara">
								JBoss EAP 7 moved bean validation functionality from the <code class="literal">ee</code> subsystem into its own subsystem, <code class="literal">bean-validation</code>. If a JBoss EAP 7 domain controller sees a legacy <code class="literal">ee</code> subsystem, it adds the new <code class="literal">bean-validation</code> subsystem. However, the JBoss EAP 6 hosts will not recognize this subsystem, so it must be removed.
							</p><div class="title"><strong>JBoss EAP 7 Domain Controller CLI</strong></div><p>
									
</p><pre class="screen">/profile=eap6-default/subsystem=bean-validation:remove</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Set CDI 1.0 behavior.
							</p><p class="simpara">
								This is only necessary if you want CDI 1.0 behavior for your JBoss EAP 6 servers, as opposed to behavior of later CDI versions used in JBoss EAP 7. If you want CDI 1.0 behavior, make the following updates to the <code class="literal">weld</code> subsystem.
							</p><div class="title"><strong>JBoss EAP 7 Domain Controller CLI</strong></div><p>
									
</p><pre class="screen">/profile=eap6-default/subsystem=weld:write-attribute(name=require-bean-descriptor,value=true)

/profile=eap6-default/subsystem=weld:write-attribute(name=non-portable-mode,value=true)</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Enable datasource statistics for JBoss EAP 6.2.
							</p><p class="simpara">
								This is only necessary if your profile is being used by JBoss EAP 6.2 servers. JBoss EAP 6.3 introduced the <code class="literal">statistics-enabled</code> attribute, which defaults to <code class="literal">false</code> to not collect statistics; however, the JBoss EAP 6.2 behavior was to collect statistics. If this profile is used by a JBoss EAP 6.2 host and a host running a newer JBoss EAP version, the behavior would be inconsistent between hosts, which is not allowed. Therefore, profiles intended for use by a JBoss EAP 6.2 host should make the following change for their datasources.
							</p><div class="title"><strong>JBoss EAP 7 Domain Controller CLI</strong></div><p>
									
</p><pre class="screen">/profile=eap6-default/subsystem=datasources/data-source=ExampleDS:write-attribute(name=statistics-enabled,value=true)</pre><p>

								</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="update_eap6_servers_eap7_server_group"/>Set the Server Group for the JBoss EAP 6 Servers</h3></div></div></div><p>
						If you renamed the server groups, you need to update the JBoss EAP 6 host configuration to use the new server groups specified in the JBoss EAP 7 configuration. This example uses the <code class="literal">eap6-main-server-group</code> server group specified in the JBoss EAP 7 <code class="literal">domain.xml</code>.
					</p><div class="title"><strong>JBoss EAP 6 host-slave.xml</strong></div><p>
							
</p><pre class="programlisting">&lt;servers&gt;
    &lt;server name="server-one" group="eap6-main-server-group"/&gt;
    &lt;server name="server-two" group="eap6-main-server-group"&gt;
        &lt;socket-bindings port-offset="150"/&gt;
    &lt;/server&gt;
&lt;/servers&gt;</pre><p>

						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							A host cannot use features or configuration settings that were introduced in a newer version of JBoss EAP than the one the host is running.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="prevent_eap6_servers_from_eap7_updates"/>Prevent the JBoss EAP 6 Instances from Receiving JBoss EAP 7 Updates</h3></div></div></div><p>
						The domain controller in a managed domain forwards configuration updates to its host controllers. You must use the <code class="literal">host-exclude</code> configuration to specify the resources that should be hidden from particular versions. Choose the appropriate preconfigured <code class="literal">host-exclude</code> option for your JBoss EAP 6 version: <code class="literal">EAP62</code>, <code class="literal">EAP63</code>, <code class="literal">EAP64</code>, or <code class="literal">EAP64z</code>.
					</p><p>
						The <code class="literal">active-server-groups</code> attribute of the <code class="literal">host-exclude</code> configuration specifies the list of server groups that are used by a particular version. These server groups and their associated profiles, socket binding groups, and deployment resources will be available to hosts of this version, but all others will be hidden from these hosts.
					</p><p>
						This example assumes that the version is JBoss EAP 6.4.z and adds the JBoss EAP 6 server group <code class="literal">eap6-main-server-group</code> as an active server group.
					</p><div class="title"><strong>JBoss EAP 7 Domain Controller CLI</strong></div><p>
							
</p><pre class="programlisting">/host-exclude=EAP64z:write-attribute(name=active-server-groups,value=[eap6-main-server-group])</pre><p>

						</p><p>
						If necessary, you can specify additional socket binding groups used by your servers using the <code class="literal">active-socket-binding-groups</code> attribute. This is only required for socket binding groups that are not associated with the server groups specified in <code class="literal">active-server-groups</code>.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_eap71_administer_eap70"/>Configure a JBoss EAP 7.1 Domain Controller to Administer JBoss EAP 7.0 Instances</h2></div></div></div><p>
					A JBoss EAP 7.1 domain controller can manage hosts and servers running JBoss EAP 7.0.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						For a JBoss EAP 7.1 domain controller managing JBoss EAP 7.1 hosts that are on a different patch release, there are no configuration changes needed. However, the JBoss EAP 7.1 domain controller must be running a patch release that is equal to or higher than the versions on the host controllers that it manages.
					</p></div><p>
					Complete the following tasks to successfully manage JBoss EAP 7.0 instances in a JBoss EAP 7.1 managed domain.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							<a class="link" href="domain_management.html#add_eap70_config_to_eap71" title="Add the JBoss EAP 7.0 Configuration to the JBoss EAP 7.1 Domain Controller">Add the JBoss EAP 7.0 configuration to the JBoss EAP 7.1 domain controller</a>.
						</li><li class="listitem">
							<a class="link" href="domain_management.html#update_eap70_servers_eap71_server_group" title="Set the Server Group for the JBoss EAP 7.0 Servers">Set the server group for the JBoss EAP 7.0 servers</a>.
						</li><li class="listitem">
							<a class="link" href="domain_management.html#prevent_eap70_servers_from_eap71_updates" title="Prevent the JBoss EAP 7.0 Instances from Receiving JBoss EAP 7.1 Updates">Prevent the JBoss EAP 7.0 instances from receiving JBoss EAP 7.1 updates</a>.
						</li></ol></div><p>
					Once these tasks are complete, you can manage your JBoss EAP 7.0 servers and configurations from the JBoss EAP 7.1 domain controller using the management CLI. Note that JBoss EAP 7.0 hosts will not be able to take advantage of new JBoss EAP 7.1 features, such as the <code class="literal">elytron</code> subsystem.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						Because the management console is optimized for the latest version of JBoss EAP, you should not use it to update your JBoss EAP 7.0 hosts, servers, and profiles. Use the management CLI instead when managing your JBoss EAP 7.0 configurations from a JBoss EAP 7.1 managed domain.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="add_eap70_config_to_eap71"/>Add the JBoss EAP 7.0 Configuration to the JBoss EAP 7.1 Domain Controller</h3></div></div></div><p>
						To allow the domain controller to manage your JBoss EAP 7.0 servers, you must provide the JBoss EAP 7.0 configuration details in the JBoss EAP 7.1 domain configuration. You can do this by copying the JBoss EAP 7.0 profiles, socket binding groups, and server groups to the JBoss EAP 7.1 <code class="literal">domain.xml</code> configuration file.
					</p><p>
						You will need to rename resources if any conflict with the existing names in the JBoss EAP 7.1 configuration.
					</p><p>
						The following procedure uses the JBoss EAP 7.0 <code class="literal">default</code> profile, <code class="literal">standard-sockets</code> socket binding group, and <code class="literal">main-server-group</code> server group.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Edit the JBoss EAP 7.1 <code class="literal">domain.xml</code> configuration file. It is recommended to back up this file before editing.
							</li><li class="listitem"><p class="simpara">
								Copy the applicable JBoss EAP 7.0 profiles to the JBoss EAP 7.1 <code class="literal">domain.xml</code> file.
							</p><p class="simpara">
								This procedure assumes that the JBoss EAP 7.0 <code class="literal">default</code> profile was copied and renamed to <code class="literal">eap70-default</code>.
							</p><div class="title"><strong>JBoss EAP 7.1 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;profiles&gt;
  ...
  &lt;profile name="eap70-default"&gt;
    ...
  &lt;/profile&gt;
&lt;/profiles&gt;</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Copy the applicable JBoss EAP 7.0 socket binding groups to the JBoss EAP 7.1 <code class="literal">domain.xml</code> file.
							</p><p class="simpara">
								This procedure assumes that the JBoss EAP 7.0 <code class="literal">standard-sockets</code> socket binding group was copied and renamed to <code class="literal">eap70-standard-sockets</code>.
							</p><div class="title"><strong>JBoss EAP 7.1 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;socket-binding-groups&gt;
  ...
  &lt;socket-binding-group name="eap70-standard-sockets" default-interface="public"&gt;
    ...
  &lt;/socket-binding-group&gt;
&lt;/socket-binding-groups&gt;</pre><p>

								</p></li><li class="listitem"><p class="simpara">
								Copy the applicable JBoss EAP 7.0 server groups to the JBoss EAP 7.1 <code class="literal">domain.xml</code> file.
							</p><p class="simpara">
								This procedure assumes that the JBoss EAP 7.0 <code class="literal">main-server-group</code> server group was copied and renamed to <code class="literal">eap70-main-server-group</code>. You must also update this server group to use the JBoss EAP 7.0 profile, <code class="literal">eap70-default</code>, and the JBoss EAP 7.0 socket binding group, <code class="literal">eap70-standard-sockets</code>.
							</p><div class="title"><strong>JBoss EAP 7.1 <code class="literal">domain.xml</code></strong></div><p>
									
</p><pre class="programlisting">&lt;server-groups&gt;
  ...
  &lt;server-group name="eap70-main-server-group" profile="eap70-default"&gt;
    ...
    &lt;socket-binding-group ref="eap70-standard-sockets"/&gt;
  &lt;/server-group&gt;
&lt;/server-groups&gt;</pre><p>

								</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="update_eap70_servers_eap71_server_group"/>Set the Server Group for the JBoss EAP 7.0 Servers</h3></div></div></div><p>
						If you renamed the server groups, you need to update the JBoss EAP 7.0 host configuration to use the new server groups specified in the JBoss EAP 7.1 configuration. This example uses the <code class="literal">eap70-main-server-group</code> server group specified in the JBoss EAP 7.1 <code class="literal">domain.xml</code>.
					</p><div class="title"><strong>JBoss EAP 7.0 host-slave.xml</strong></div><p>
							
</p><pre class="programlisting">&lt;servers&gt;
    &lt;server name="server-one" group="eap70-main-server-group"/&gt;
    &lt;server name="server-two" group="eap70-main-server-group"&gt;
        &lt;socket-bindings port-offset="150"/&gt;
    &lt;/server&gt;
&lt;/servers&gt;</pre><p>

						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							A host cannot use features or configuration settings that were introduced in a newer version of JBoss EAP than the one the host is running.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="prevent_eap70_servers_from_eap71_updates"/>Prevent the JBoss EAP 7.0 Instances from Receiving JBoss EAP 7.1 Updates</h3></div></div></div><p>
						The domain controller in a managed domain forwards configuration updates to its host controllers. So that a JBoss EAP 7.0 host does not get configuration and resources that are specific to JBoss EAP 7.1, you must configure the JBoss EAP 7.0 host to ignore those resources. You can do this by setting the <code class="literal">ignore-unused-configuration</code> attribute on the JBoss EAP 7.0 host.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							You can also use the <code class="literal">host-exclude</code> configuration to instruct the domain controller to hide certain resources from hosts running certain JBoss EAP versions. To see an example of how to use the <code class="literal">host-exclude</code> configuration, see <a class="link" href="domain_management.html#prevent_eap6_servers_from_eap7_updates" title="Prevent the JBoss EAP 6 Instances from Receiving JBoss EAP 7 Updates">Prevent the JBoss EAP 6 Instances from Receiving JBoss EAP 7 Updates</a>. For JBoss EAP 7.0 hosts, you use the <code class="literal">EAP70</code> <code class="literal">host-exclude</code> option.
						</p></div><p>
						Set the <code class="literal">ignore-unused-configuration</code> attribute to <code class="literal">true</code> in the JBoss EAP 7.0 host controller’s connection configuration to the remote domain controller.
					</p><div class="title"><strong>JBoss EAP 7.0 host-slave.xml</strong></div><p>
							
</p><pre class="programlisting">&lt;domain-controller&gt;
    &lt;remote security-realm="ManagementRealm" ignore-unused-configuration="true"&gt;
        &lt;discovery-options&gt;
            &lt;static-discovery name="primary" protocol="${jboss.domain.master.protocol:remote}" host="${jboss.domain.master.address}" port="${jboss.domain.master.port:9999}"/&gt;
        &lt;/discovery-options&gt;
    &lt;/remote&gt;
&lt;/domain-controller&gt;</pre><p>

						</p><p>
						With this setting, only the server groups used by this host, and their associated profiles, socket binding groups, and deployment resources will be made available to the host. All others will be ignored.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managing_jboss_eap_profiles"/>Managing JBoss EAP Profiles</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="about_profiles"/>About Profiles</h2></div></div></div><p>
					JBoss EAP uses <span class="emphasis"><em>profiles</em></span> as a way to organize which subsystems are available to a server. A profile consists of a collection of available subsystems along with each subsystem’s specific configuration. A profile with a large number of subsystems results in a server with a large set of capabilities. A profile with a small, focused set of subsystems will have fewer capabilities but a smaller footprint.
				</p><p>
					JBoss EAP comes with five predefined profiles that should satisfy most use cases:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">default</span></dt><dd>
								Includes commonly used subsystems, such as <code class="literal">logging</code>, <code class="literal">security</code>, <code class="literal">datasources</code>, <code class="literal">infinispan</code>, <code class="literal">webservices</code>, <code class="literal">ee</code>, <code class="literal">ejb3</code>, <code class="literal">transactions</code>, and so on.
							</dd><dt><span class="term">ha</span></dt><dd>
								Includes the subsystems provided in the <span class="emphasis"><em>default</em></span> profile with the addition of the <code class="literal">jgroups</code> and <code class="literal">modcluster</code> subsystems for high availability
							</dd><dt><span class="term">full</span></dt><dd>
								Includes the subsystems provided in the <span class="emphasis"><em>default</em></span> profile with the addition of the <code class="literal">messaging-activemq</code> and <code class="literal">iiop-openjdk</code> subsystems
							</dd><dt><span class="term">full-ha</span></dt><dd>
								Includes the subsystems provided in the <span class="emphasis"><em>full</em></span> profile with the addition of the <code class="literal">jgroups</code> and <code class="literal">modcluster</code> subsystems for high availability
							</dd><dt><span class="term">load-balancer</span></dt><dd>
								Includes the minimum subsystems necessary to use the built-in mod_cluster front-end load balancer to load balance other JBoss EAP instances.
							</dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						JBoss EAP offers the ability to disable extensions or unload drivers and other services manually by removing the subsystems from the configuration of existing profiles. However, for most cases this is unnecessary. Since JBoss EAP dynamically loads subsystems as they are needed, if the server or an application never use a subsystem, it will not be loaded.
					</p></div><p>
					In cases where the existing profiles do not provide the necessary capabilities, JBoss EAP also provides the ability to define custom profiles as well.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="cloning_a_profile"/>Cloning a Profile</h2></div></div></div><p>
					JBoss EAP allows you to create a new profile in a managed domain by cloning an existing profile. This will create a copy of the original profile’s configuration and subsystems.
				</p><p>
					A profile can be cloned using the management CLI by using the <code class="literal">clone</code> operation on the desired profile to clone.
				</p><pre class="screen">/profile=full-ha:clone(to-profile=cloned-profile)</pre><p>
					You can also clone a profile from the management console by selecting the desired profile to clone and clicking <span class="strong"><strong>Clone</strong></span>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="creating_hierarchical_profiles"/>Creating Hierarchical Profiles</h2></div></div></div><p>
					In a managed domain, you can create a hierarchy of profiles. This allows you to create a base profile with common extensions that other profiles can inherit.
				</p><p>
					The managed domain defines several profiles in <code class="literal">domain.xml</code>. If multiple profiles use the same configuration for a particular subsystem, you can configure it in just one place instead of different profiles. The values in parent profiles cannot be overridden.
				</p><p>
					In addition, each profile must be self-sufficient. If an element or subsystem is referenced, then it must be defined in the profile where it is referenced.
				</p><p>
					A profile can include other profiles in a hierarchy using the management CLI by using the <code class="literal">list-add</code> operation and providing the profile to include.
				</p><pre class="screen">/profile=new-profile:list-add(name=includes, value=<span class="emphasis"><em>PROFILE_NAME</em></span>)</pre></div></div></div></body></html>