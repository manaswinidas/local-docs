<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 18. Configuring Remoting</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_remoting"/>Chapter 18. Configuring Remoting</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="about_the_remoting_subsystem"/>About the Remoting Subsystem</h1></div></div></div><p>
				The <code class="literal">remoting</code> subsystem allows you to configure inbound and outbound connections for local and remote services as well as the settings for those connections.
			</p><p>
				JBoss Remoting includes the following configurable elements: the endpoint, connectors, and a series of local and remote connection URIs. Most people will not need to configure the <code class="literal">remoting</code> subsystem at all, unless they use custom connectors for their own applications. Applications that act as remoting clients, such as EJBs, need separate configuration to connect to a specific connector.
			</p><h3><a id="default_remoting_subsystem_configuration"/>Default Remoting Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:remoting:4.0"&gt;
    &lt;endpoint/&gt;
    &lt;http-connector name="http-remoting-connector" connector-ref="default" security-realm="ApplicationRealm"/&gt;
&lt;/subsystem&gt;</pre><p>
				See <a class="link" href="reference_material.html#remoting_attributes" title="Remoting Subsystem Attributes">Remoting Subsystem Attributes</a> for a full list of the attributes available for the <code class="literal">remoting</code> subsystem.
			</p><h3><a id="the_remoting_endpoint"/>The Remoting Endpoint</h3><p>
				The remoting endpoint uses the XNIO worker declared and configured by the <code class="literal">io</code> subsystem.
			</p><p>
				See <a class="link" href="configuring_remoting.html#remoting_configure_endpoint" title="Configuring the Endpoint">Configuring the Endpoint</a> for details on how to configure the remoting endpoint.
			</p><h3><a id="connector"/>Connector</h3><p>
				The connector is the main remoting configuration element. Multiple connectors are allowed. Each connector consists of a <code class="literal">&lt;connector&gt;</code> element with several sub-elements, and few other attributes. The default connector is used by several JBoss EAP subsystems. Specific settings for the elements and attributes of your custom connectors depend on your applications. Contact Red Hat Global Support Services for more information.
			</p><p>
				See <a class="link" href="configuring_remoting.html#remoting_configure_connector" title="Configuring a Connector">Configuring a Connector</a> for details on how to configure connectors.
			</p><h3><a id="outbound_connections"/>Outbound Connections</h3><p>
				You can specify three different types of outbound connections:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						An <a class="link" href="configuring_remoting.html#remoting_outbound_connection" title="Configuring an Outbound Connection">outbound connection</a>, specified by a URI
					</li><li class="listitem">
						A <a class="link" href="configuring_remoting.html#remoting_local_outbound_connection" title="Configuring a Local Outbound Connection">local outbound connection</a>, which connects to a local resource such as a socket
					</li><li class="listitem">
						A <a class="link" href="configuring_remoting.html#remoting_remote_outbound_connection" title="Configuring a Remote Outbound Connection">remote outbound connection</a>, which connects to a remote resource and authenticates using a security realm
					</li></ul></div><h3><a id="additional_configuration"/>Additional Configuration</h3><p>
				Remoting depends on several elements that are configured outside of the <code class="literal">remoting</code> subsystem, such as the network interface and IO worker.
			</p><p>
				For more information, see <a class="link" href="configuring_remoting.html#config_outside_remoting_subsystem" title="Additional Remoting Configuration">Additional Remoting Configuration</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remoting_configure_endpoint"/>Configuring the Endpoint</h1></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					In JBoss EAP 6, the worker thread pool was configured directly in the <code class="literal">remoting</code> subsystem. In JBoss EAP 7, the remoting <code class="literal">endpoint</code> configuration references a worker from the <code class="literal">io</code> subsystem.
				</p></div><p>
				JBoss EAP provides the following <code class="literal">endpoint</code> configuration by default.
			</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:remoting:4.0"&gt;
  &lt;endpoint/&gt;
  ...
&lt;/subsystem&gt;</pre><h3><a id="updating_the_existing_endpoint_configuration"/>Updating the Existing Endpoint Configuration</h3><pre class="screen">/subsystem=remoting/configuration=endpoint:write-attribute(name=authentication-retries,value=2)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_endpoint_configuration"/>Creating a New Endpoint Configuration</h3><pre class="screen">/subsystem=remoting/configuration=endpoint:add</pre><h3><a id="deleting_an_endpoint_configuration"/>Deleting an Endpoint Configuration</h3><pre class="screen">/subsystem=remoting/configuration=endpoint:remove</pre><pre class="screen">reload</pre><p>
				See <a class="link" href="reference_material.html#endpoint-attributes" title="Table A.100. endpoint Attributes">Endpoint Attributes</a> for a full list of the attributes available for the endpoint configuration.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remoting_configure_connector"/>Configuring a Connector</h1></div></div></div><p>
				The connector is the main configuration element relating to remoting and contains several sub-elements for additional configuration.
			</p><h3><a id="updating_the_existing_connector_configuration"/>Updating the Existing Connector Configuration</h3><pre class="screen">/subsystem=remoting/connector=new-connector:write-attribute(name=socket-binding,value=my-socket-binding)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_connector"/>Creating a New Connector</h3><pre class="screen">/subsystem=remoting/connector=new-connector:add(socket-binding=my-socket-binding)</pre><h3><a id="deleting_a_connector"/>Deleting a Connector</h3><pre class="screen">/subsystem=remoting/connector=new-connector:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring a connector, please see the <a class="link" href="reference_material.html#remoting_attributes" title="Remoting Subsystem Attributes">Remoting Subsystem Attributes</a> section.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remoting_configure_http_connector"/>Configuring an HTTP Connector</h1></div></div></div><p>
				The HTTP connector provides the configuration for the HTTP upgrade-based remoting connector. JBoss EAP provides the following <code class="literal">http-connector</code> configuration by default.
			</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:remoting:4.0"&gt;
    ...
    &lt;http-connector name="http-remoting-connector" connector-ref="default" security-realm="ApplicationRealm"/&gt;
&lt;/subsystem&gt;</pre><p>
				By default, this HTTP connector connects to an HTTP listener named <code class="literal">default</code> that is configured in the <code class="literal">undertow</code> subsystem. For more information, see <a class="link" href="configuring_the_web_server_undertow.html" title="Chapter 17. Configuring the Web Server (Undertow)">Configuring the Web Server (Undertow)</a>.
			</p><h3><a id="updating_the_existing_http_connector_configuration"/>Updating the Existing HTTP Connector Configuration</h3><pre class="screen">/subsystem=remoting/http-connector=new-connector:write-attribute(name=connector-ref,value=new-connector-ref)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_http_connector"/>Creating a New HTTP Connector</h3><pre class="screen">/subsystem=remoting/http-connector=new-connector:add(connector-ref=default)</pre><h3><a id="deleting_an_http_connector"/>Deleting an HTTP Connector</h3><pre class="screen">/subsystem=remoting/http-connector=new-connector:remove</pre><p>
				See <a class="link" href="reference_material.html#connector-attributes" title="Table A.101. connector Attributes">Connector Attributes</a> for a full list of the attributes available for configuring an HTTP connector.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remoting_outbound_connection"/>Configuring an Outbound Connection</h1></div></div></div><p>
				An outbound connection is a generic remoting outbound connection that is fully specified by a URI.
			</p><h3><a id="updating_an_existing_outbound_connection"/>Updating an Existing Outbound Connection</h3><pre class="screen">/subsystem=remoting/outbound-connection=new-outbound-connection:write-attribute(name=uri,value=http://example.com)</pre><h3><a id="creating_a_new_outbound_connection"/>Creating a New Outbound Connection</h3><pre class="screen">/subsystem=remoting/outbound-connection=new-outbound-connection:add(uri=http://example.com)</pre><h3><a id="deleting_an_outbound_connection"/>Deleting an Outbound Connection</h3><pre class="screen">/subsystem=remoting/outbound-connection=new-outbound-connection:remove</pre><p>
				See <a class="link" href="reference_material.html#outbound-connection-attributes" title="Table A.106. outbound-connection Attributes">Outbound Connection Attributes</a> for a full list of the attributes available for configuring an outbound connection.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remoting_remote_outbound_connection"/>Configuring a Remote Outbound Connection</h1></div></div></div><p>
				A remote outbound connection is specified by a protocol, an outbound socket binding, a username and a security realm. The protocol can be either <code class="literal">remote</code>, <code class="literal">http-remoting</code> or <code class="literal">https-remoting</code>.
			</p><div class="title"><strong>Updating an Existing Remote Outbound Connection</strong></div><p>
					
</p><pre class="screen">/subsystem=remoting/remote-outbound-connection=new-remote-outbound-connection:write-attribute(name=outbound-socket-binding-ref,value=outbound-socket-binding)</pre><p>

				</p><div class="title"><strong>Creating a New Remote Outbound Connection</strong></div><p>
					
</p><pre class="screen">/subsystem=remoting/remote-outbound-connection=new-remote-outbound-connection:add(outbound-socket-binding-ref=outbound-socket-binding)</pre><p>

				</p><div class="title"><strong>Deleting a Remote Outbound Connection</strong></div><p>
					
</p><pre class="screen">/subsystem=remoting/remote-outbound-connection=new-remote-outbound-connection:remove</pre><p>

				</p><p>
				See <a class="link" href="reference_material.html#remote-outbound-connection-attributes" title="Table A.108. remote-outbound-connection Attributes">Remote Outbound Connection Attributes</a> for a full list of the attributes available for configuring a remote outbound connection.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remoting_local_outbound_connection"/>Configuring a Local Outbound Connection</h1></div></div></div><p>
				A local outbound connection is a remoting outbound connection with a protocol of <code class="literal">local</code>, specified only by an outbound socket binding.
			</p><h3><a id="updating_an_existing_local_outbound_connection"/>Updating an Existing Local Outbound Connection</h3><pre class="screen">/subsystem=remoting/local-outbound-connection=new-local-outbound-connection:write-attribute(name=outbound-socket-binding-ref,value=outbound-socket-binding)</pre><h3><a id="creating_a_new_local_outbound_connection"/>Creating a New Local Outbound Connection</h3><pre class="screen">/subsystem=remoting/local-outbound-connection=new-local-outbound-connection:add(outbound-socket-binding-ref=outbound-socket-binding)</pre><h3><a id="deleting_a_local_outbound_connection"/>Deleting a Local Outbound Connection</h3><pre class="screen">/subsystem=remoting/local-outbound-connection=new-local-outbound-connection:remove</pre><p>
				See <a class="link" href="reference_material.html#local-outbound-connection-attributes" title="Table A.109. local-outbound-connection Attributes">Local Outbound Connection Attributes</a> for a full list of the attributes available for configuring a local outbound connection.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="config_outside_remoting_subsystem"/>Additional Remoting Configuration</h1></div></div></div><p>
				There are several remoting elements that are configured outside of the <code class="literal">remoting</code> subsystem.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">IO worker</span></dt><dd><p class="simpara">
							Use the following command to set the IO worker for remoting:
						</p><pre class="screen">/subsystem=remoting/configuration=endpoint:write-attribute(name=worker, value=<span class="emphasis"><em>WORKER_NAME</em></span>)</pre><p class="simpara">
							See <a class="link" href="configuring_the_io_subsystem.html#io_configure_worker" title="Configuring a Worker">Configuring a Worker</a> for details on how to configure an IO worker.
						</p></dd><dt><span class="term">Network interface</span></dt><dd><p class="simpara">
							The network interface used by the <code class="literal">remoting</code> subsystem is the <code class="literal">public</code> interface. This interface is also used by several other subsystems, so exercise caution when modifying it.
						</p><pre class="programlisting">&lt;interfaces&gt;
   &lt;interface name="management"&gt;
      &lt;inet-address value="${jboss.bind.address.management:127.0.0.1}"/&gt;
   &lt;/interface&gt;
   &lt;interface name="public"&gt;
      &lt;inet-address value="${jboss.bind.address:127.0.0.1}"/&gt;
   &lt;/interface&gt;
   &lt;interface name="unsecure"&gt;
      &lt;inet-address value="${jboss.bind.address.unsecure:127.0.0.1}"/&gt;
   &lt;/interface&gt;
&lt;/interfaces&gt;</pre><p class="simpara">
							In a managed domain, the <code class="literal">public</code> interface is defined per host in its <code class="literal">host.xml</code> file.
						</p></dd><dt><span class="term">Socket binding</span></dt><dd><p class="simpara">
							The default socket binding used by the <code class="literal">remoting</code> subsystem binds to port <code class="literal">8080</code>.
						</p><p class="simpara">
							For more information about socket binding and socket binding groups, see <a class="link" href="network_and_port_configuration.html#socket_bindings" title="Socket Bindings">Socket Bindings</a>.
						</p></dd><dt><span class="term">Remoting connector reference for EJB</span></dt><dd><p class="simpara">
							The <code class="literal">ejb3</code> subsystem contains a reference to the remoting connector for remote method invocations. The following is the default configuration:
						</p><pre class="programlisting">&lt;remote connector-ref="remoting-connector" thread-pool-name="default"/&gt;</pre></dd><dt><span class="term">Secure transport configuration</span></dt><dd><p class="simpara">
							Remoting transports use STARTTLS to use a secure connection, such as HTTPS, Secure Servlet, if the client requests it. The same socket binding, or network port, is used for secured and unsecured connections, so no additional server-side configuration is necessary. The client requests the secure or unsecured transport, as its needs dictate. JBoss EAP components that use remoting, such as EJBs, ORB, and the JMS provider, request secured interfaces by default.
						</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
								STARTTLS works by activating a secure connection if the client requests it, and otherwise defaults to an unsecured connection. It is inherently susceptible to a man-in-the-middle exploit, where an attacker intercepts the request of the client and modifies it to request an unsecured connection. Clients must be written to fail appropriately if they do not receive a secure connection, unless an unsecured connection is an appropriate fall-back.
							</p></div></dd></dl></div></div></div></body></html>