<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 17. Configuring the Web Server (Undertow)</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_the_web_server_undertow"/>Chapter 17. Configuring the Web Server (Undertow)</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow_subsystem_overview"/>Undertow Subsystem Overview</h1></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					In JBoss EAP 7, the <code class="literal">undertow</code> subsystem takes the place of the <code class="literal">web</code> subsystem from JBoss EAP 6.
				</p></div><p>
				The <code class="literal">undertow</code> subsystem allows you to configure the web server and servlet container settings. It implements the <a class="link" href="https://jcp.org/en/jsr/detail?id=369">Java Servlet 4.0 Specification</a> as well as websockets. It also supports HTTP upgrade and using high performance non-blocking handlers in servlet deployments. The <code class="literal">undertow</code> subsystem also has the ability to act as a high performance reverse proxy which supports mod_cluster.
			</p><p>
				Within the <code class="literal">undertow</code> subsystem, there are five main components to configure:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#undertow-configure-buffer-caches" title="Configuring Buffer Caches">buffer caches</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#undertow-configure-server" title="Configuring a Server">server</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#undertow-configure-servlet-container" title="Configuring a Servlet Container">servlet container</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#undertow-configure-handlers" title="Configuring Handlers">handlers</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#undertow-configure-filters" title="Configuring Filters">filters</a>
					</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					While JBoss EAP does offer the ability to update the configuration for each of these components, the default configuration is suitable for most use cases and provides reasonable performance settings.
				</p></div><h3><a id="default_undertow_subsystem_configuration"/>Default Undertow Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" default-server="default-server" default-virtual-host="default-host" default-servlet-container="default" default-security-domain="other"&gt;
    &lt;buffer-cache name="default"/&gt;
    &lt;server name="default-server"&gt;
        &lt;http-listener name="default" socket-binding="http" redirect-socket="https" enable-http2="true"/&gt;
        &lt;https-listener name="https" socket-binding="https" security-realm="ApplicationRealm" enable-http2="true"/&gt;
        &lt;host name="default-host" alias="localhost"&gt;
            &lt;location name="/" handler="welcome-content"/&gt;
            &lt;http-invoker security-realm="ApplicationRealm"/&gt;
        &lt;/host&gt;
    &lt;/server&gt;
    &lt;servlet-container name="default"&gt;
        &lt;jsp-config/&gt;
        &lt;websockets/&gt;
    &lt;/servlet-container&gt;
    &lt;handlers&gt;
        &lt;file name="welcome-content" path="${jboss.home.dir}/welcome-content"/&gt;
    &lt;/handlers&gt;
&lt;/subsystem&gt;</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					The <code class="literal">undertow</code> subsystem also relies on the <code class="literal">io</code> subsystem to provide XNIO workers and buffer pools. The <code class="literal">io</code> subsystem is configured separately and provides a default configuration which should give optimal performance in most cases.
				</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Compared to the <code class="literal">web</code> subsystem in JBoss EAP 6, the <code class="literal">undertow</code> subsystem in JBoss EAP 7 has different <a class="link" href="reference_material.html#default_behavior_http_methods" title="Default Behavior of HTTP Methods">default behaviors of HTTP methods</a>.
				</p></div><h2><a id="using_elytron_with_undertow"/>Using Elytron with Undertow Subsystem</h2><p>
				As a web application is deployed, the name of the security domain required by that application will be identified. This will either be from within the deployment or if the deployment does not have a security domain, the <code class="literal">default-security-domain</code> as defined on the <code class="literal">undertow</code> subsystem will be assumed. By default it is assumed that the security domain maps to a <code class="literal">PicketBox</code> defined in the legacy security subsystem. However, an <code class="literal">application-security-domain</code> resource can be added to the <code class="literal">undertow</code> subsystem which maps from the name of the security domain required by the application to the appropriate Elytron configuration.
			</p><div class="title"><strong>Example: Adding a Mapping.</strong></div><p>
					
</p><pre class="screen">/subsystem=undertow/application-security-domain=MyAppSecurity:add(security-domain=ApplicationDomain)</pre><p>

				</p><div class="title"><strong>The addition of mapping is successful if the result is:</strong></div><p>
					
</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" ... default-security-domain="other"&gt;
...
    &lt;application-security-domains&gt;
        &lt;application-security-domain name="MyAppSecurity" security-domain="ApplicationDomain"/&gt;
    &lt;/application-security-domains&gt;
...
&lt;/subsystem&gt;</pre><p>

				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					If the deployment was already deployed at this point, the application server should be reloaded for the application security domain mapping to take effect.
				</p></div><p>
				This simple form is suitable where a deployment is using the standard HTTP mechanism as defined within the Servlet specification like <code class="literal">BASIC</code>, <code class="literal">CLIENT_CERT</code>, <code class="literal">DIGEST</code>, <code class="literal">FORM</code>. Here, the authentication will be performed against the <code class="literal">ApplicationDomain</code> security domain. This form is also suitable where an application is not using any authentication mechanism and instead is using programmatic authentication or is trying to obtain the <code class="literal">SecurityDomain</code> associated with the deployment and use it directly.
			</p><div class="title"><strong>Example: Advanced Form of the Mapping:</strong></div><p>
					
</p><pre class="screen">/subsystem=undertow/application-security-domain=MyAppSecurity:add(http-authentication-factory=application-http-authentication)</pre><p>

				</p><div class="title"><strong>The advanced mapping is successful if the result is:</strong></div><p>
					
</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" ... default-security-domain="other"&gt;
...
    &lt;application-security-domains&gt;
        &lt;application-security-domain name="MyAppSecurity" http-authentication-factory="application-http-authentication"/&gt;
    &lt;/application-security-domains&gt;
...
&lt;/subsystem&gt;</pre><p>

				</p><p>
				In this form of the configuration, instead of referencing a security domain, an <code class="literal">http-authentication-factory</code> is referenced. This is the factory that will be used to obtain the instances of the authentication mechanisms and is in turn associated with the security domain.
			</p><p>
				You should reference an <code class="literal">http-authentication-factory</code> attribute when using custom HTTP authentication mechanisms or where additional configuration must be defined for mechanisms such as principal transformers, credential factories, and mechanism realms. It is also better to reference an <code class="literal">http-authentication-factory</code> attribute when using mechanisms other than the four described in the <code class="literal">Servlet</code> specification.
			</p><p>
				When the advanced form of mapping is used, another configuration option is available, <code class="literal">override-deployment-config</code>. The referenced <code class="literal">http-authentication-factory</code> can return a complete set of authentication mechanisms. By default, these are filtered to just match the mechanisms requested by the application. If this option is set to <code class="literal">true</code>, then the mechanisms offered by the factory will override the mechanisms requested by the application.
			</p><p>
				The <code class="literal">application-security-domain</code> resource also has one additional option <code class="literal">enable-jacc</code>. If this is set to <code class="literal">true</code>, JACC will be enabled for any deployments matching this mapping.
			</p><h3><a id="runtime_information"/>Runtime Information</h3><p>
				Where an <code class="literal">application-security-domain</code> mapping is in use, it can be useful to double check that deployments did match against it as expected. If the resource is read with <code class="literal">include-runtime=true</code>, the deployments that are associated with the mapping will also be shown as:
			</p><pre class="screen">/subsystem=undertow/application-security-domain=MyAppSecurity:read-resource(include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "enable-jacc" =&gt; false,
        "http-authentication-factory" =&gt; undefined,
        "override-deployment-config" =&gt; false,
        "referencing-deployments" =&gt; ["simple-webapp.war"],
        "security-domain" =&gt; "ApplicationDomain",
        "setting" =&gt; undefined
    }
}</pre><p>
				In this output, the <code class="literal">referencing-deployments</code> attribute shows that the deployment <code class="literal">simple-webapp.war</code> has been deployed using the mapping.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-configure-buffer-caches"/>Configuring Buffer Caches</h1></div></div></div><p>
				The buffer cache is used to cache static resources. JBoss EAP enables multiple caches to be configured and referenced by deployments, allowing different deployments to use different cache sizes. Buffers are allocated in regions and are a fixed size. The total amount of space used can be calculated by multiplying the buffer size by the number of buffers per region by the maximum number of regions. The default size of a buffer cache is 10MB.
			</p><p>
				JBoss EAP provides a single cache by default:
			</p><h3><a id="default_undertow_subsystem_configuration_2"/>Default Undertow Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" default-server="default-server" default-virtual-host="default-host" default-servlet-container="default" default-security-domain="other"&gt;
    &lt;buffer-cache name="default"/&gt;
    ...
&lt;/subsystem&gt;</pre><h3><a id="updating_an_existing_buffer_cache"/>Updating an Existing Buffer Cache</h3><p>
				To update an existing buffer cache:
			</p><pre class="screen">/subsystem=undertow/buffer-cache=default/:write-attribute(name=buffer-size,value=2048)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_buffer_cache"/>Creating a New Buffer Cache</h3><p>
				To create a new buffer cache:
			</p><pre class="screen">/subsystem=undertow/buffer-cache=new-buffer:add</pre><h3><a id="deleting_a_buffer_cache"/>Deleting a Buffer Cache</h3><p>
				To delete a buffer cache:
			</p><pre class="screen">/subsystem=undertow/buffer-cache=new-buffer:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring buffer caches, please see the <a class="link" href="reference_material.html#undertow-attribute-refs" title="Undertow Subsystem Attributes">Undertow Subsystem Attributes</a> section.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_undertow_buffer_pools"/>Configuring Byte Buffer Pools</h1></div></div></div><p>
				Undertow byte buffer pools are used to allocate pooled NIO <code class="literal">ByteBuffer</code> instances. All listeners have a byte buffer pool and you can use different buffer pools and workers for each listener. Byte buffer pools can be shared between different server instances.
			</p><p>
				These buffers are used for IO operations, and the buffer size has a big impact on application performance. For most servers, the ideal size is usually 16k.
			</p><h3><a id="updating_an_existing_byte_buffer_pool"/>Updating an Existing Byte Buffer Pool</h3><p>
				To update an existing byte buffer pool:
			</p><pre class="screen">/subsystem=undertow/byte-buffer-pool=myByteBufferPool:write-attribute(name=buffer-size,value=1024)</pre><pre class="screen">reload</pre><h3><a id="creating_an_byte_buffer_pool"/>Creating an Byte Buffer Pool</h3><p>
				To create a new byte buffer pool:
			</p><pre class="screen">/subsystem=undertow/byte-buffer-pool=newByteBufferPool:add</pre><h3><a id="deleting_a_byte_buffer_pool"/>Deleting a Byte Buffer Pool</h3><p>
				To delete a byte buffer pool:
			</p><pre class="screen">/subsystem=undertow/byte-buffer-pool=newByteBufferPool:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring byte buffer pools, see the <a class="link" href="reference_material.html#byte_buffer_pool_attributes" title="Byte Buffer Pool Attributes">Byte Buffer Pool Attributes</a> reference.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-configure-server"/>Configuring a Server</h1></div></div></div><p>
				A server represents an instance of Undertow and consists of several elements:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						host
					</li><li class="listitem">
						http-listener
					</li><li class="listitem">
						https-listener
					</li><li class="listitem">
						ajp-listener
					</li></ul></div><p>
				The host element provides a virtual host configuration, while the three listeners provide connections of that type to the Undertow instance.
			</p><p>
				The default behavior of the server is to queue requests while the server is starting. You can change the default behavior using the <code class="literal">queue-requests-on-start</code> attribute on the host. If this attribute is set to <code class="literal">true</code>, which is the default, then requests that arrive when the server is starting will be held until the server is ready. If this attribute is set to <code class="literal">false</code>, then requests that arrive before the server has completely started will be rejected with the default response code.
			</p><p>
				Regardless of the attribute value, request processing does not start until the server is completely started.
			</p><p>
				You can configure the <code class="literal">queue-requests-on-start</code> attribute using the management console by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Web (Undertow)</strong></span> → <span class="strong"><strong>Server</strong></span>, selecting the server and clicking <span class="strong"><strong>View</strong></span>, and selecting the <span class="strong"><strong>Hosts</strong></span> tab. For a managed domain, you must specify which profile to configure.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Multiple servers can be configured, allowing deployments and servers to be completely isolated. This can be useful in certain scenarios such as multi-tenant environments.
				</p></div><p>
				JBoss EAP provides a server by default:
			</p><h3><a id="default_undertow_subsystem_configuration_3"/>Default Undertow Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" default-server="default-server" default-virtual-host="default-host" default-servlet-container="default" default-security-domain="other"&gt;
    &lt;buffer-cache name="default"/&gt;
    &lt;server name="default-server"&gt;
        &lt;http-listener name="default" socket-binding="http" redirect-socket="https" enable-http2="true"/&gt;
        &lt;https-listener name="https" socket-binding="https" security-realm="ApplicationRealm" enable-http2="true"/&gt;
        &lt;host name="default-host" alias="localhost"&gt;
            &lt;location name="/" handler="welcome-content"/&gt;
            &lt;http-invoker security-realm="ApplicationRealm"/&gt;
        &lt;/host&gt;
    &lt;/server&gt;
    ...
&lt;/subsystem&gt;</pre><p>
				The following examples show how to configure a server using the management CLI. You can also configure a server using the management console by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Web (Undertow)</strong></span> → <span class="strong"><strong>Server</strong></span>.
			</p><h3><a id="updating_an_existing_server"/>Updating an Existing Server</h3><p>
				To update an existing server:
			</p><pre class="screen">/subsystem=undertow/server=default-server:write-attribute(name=default-host,value=default-host)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_server"/>Creating a New Server</h3><p>
				To create a new server:
			</p><pre class="screen">/subsystem=undertow/server=new-server:add</pre><pre class="screen">reload</pre><h3><a id="deleting_a_server"/>Deleting a Server</h3><p>
				To delete a server:
			</p><pre class="screen">/subsystem=undertow/server=new-server:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring servers, see the <a class="link" href="reference_material.html#undertow-attribute-refs" title="Undertow Subsystem Attributes">Undertow Subsystem Attributes</a> section.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-configure-servlet-container"/>Configuring a Servlet Container</h1></div></div></div><p>
				A servlet container provides all servlet, JSP and websocket-related configuration, including session-related configuration. While most servers will only need a single servlet container, it is possible to configure multiple servlet containers by adding an additional <code class="literal">servlet-container</code> element. Having multiple servlet containers enables behavior such as allowing multiple deployments to be deployed to the same context path on different virtual hosts.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Much of the configuration provided in by servlet container can be individually overridden by deployed applications using their <code class="literal">web.xml</code> file.
				</p></div><p>
				JBoss EAP provides a servlet container by default:
			</p><h3><a id="default_undertow_subsystem_configuration_4"/>Default Undertow Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0"&gt;
  &lt;buffer-cache name="default"/&gt;
  &lt;server name="default-server"&gt;
    ...
  &lt;/server&gt;
  &lt;servlet-container name="default"&gt;
      &lt;jsp-config/&gt;
      &lt;websockets/&gt;
  &lt;/servlet-container&gt;
...
&lt;/subsystem&gt;</pre><p>
				The following examples show how to configure a servlet container using the management CLI. You can also configure a servlet container using the management console by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Web (Undertow)</strong></span> → <span class="strong"><strong>Servlet Container</strong></span>.
			</p><h3><a id="updating_an_existing_servlet_container"/>Updating an Existing Servlet Container</h3><p>
				To update an existing servlet container:
			</p><pre class="screen">/subsystem=undertow/servlet-container=default:write-attribute(name=ignore-flush,value=true)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_servlet_container"/>Creating a New Servlet Container</h3><p>
				To create a new servlet container:
			</p><pre class="screen">/subsystem=undertow/servlet-container=new-servlet-container:add</pre><pre class="screen">reload</pre><h3><a id="deleting_a_servlet_container"/>Deleting a Servlet Container</h3><p>
				To delete a servlet container:
			</p><pre class="screen">/subsystem=undertow/servlet-container=new-servlet-container:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring servlet containers, see the <a class="link" href="reference_material.html#undertow-attribute-refs" title="Undertow Subsystem Attributes">Undertow Subsystem Attributes</a> section.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="servlet_extensions"/>Configuring a Servlet Extension</h1></div></div></div><p>
				Servlet extensions allow you to hook into the servlet deployment process and modify aspects of a servlet deployment. This can be useful in cases where you need to add additional authentication mechanisms to a deployment or use native Undertow handlers as part of a servlet deployment.
			</p><p>
				To create a custom servlet extension, it is necessary to implement the <code class="literal">io.undertow.servlet.ServletExtension</code> interface and then add the name of your implementation class to the <code class="literal">META-INF/services/io.undertow.servlet.ServletExtension</code> file in the deployment. You also need to include the compiled class file of the <code class="literal">ServletExtension</code> implementation. When Undertow deploys the servlet, it loads all the services from the <code class="literal">deployments</code> class loader and then invokes their <code class="literal">handleDeployment</code> methods.
			</p><p>
				An Undertow <code class="literal">DeploymentInfo</code> structure, which contains a complete and mutable description of the deployment, is passed to this method. You can modify this structure to change any aspect of the deployment.
			</p><p>
				The <code class="literal">DeploymentInfo</code> structure is the same structure that is used by the embedded API, so in effect a <code class="literal">ServletExtension</code> has the same amount of flexibility that you have when using Undertow in embedded mode.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-configure-handlers"/>Configuring Handlers</h1></div></div></div><p>
				JBoss EAP allows for two types of handlers to be configured:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						file handlers
					</li><li class="listitem">
						reverse-proxy handlers
					</li></ul></div><p>
				File handlers serve static files. Each file handler must be attached to a location in a virtual host. Reverse-proxy handlers allow JBoss EAP to serve as a high performance reverse-proxy.
			</p><p>
				JBoss EAP provides a file handler by default:
			</p><h3><a id="default_undertow_subsystem_configuration_5"/>Default Undertow Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" default-server="default-server" default-virtual-host="default-host" default-servlet-container="default" default-security-domain="other"&gt;
    &lt;buffer-cache name="default"/&gt;
    &lt;server name="default-server"&gt;
        ...
    &lt;/server&gt;
    &lt;servlet-container name="default"&gt;
        ...
    &lt;/servlet-container&gt;
    &lt;handlers&gt;
        &lt;file name="welcome-content" path="${jboss.home.dir}/welcome-content"/&gt;
    &lt;/handlers&gt;
&lt;/subsystem&gt;</pre><h3><a id="using_webdav_for_static_resources"/>Using WebDAV for Static Resources</h3><p>
				Previous versions of JBoss EAP allowed for using WebDAV with the <code class="literal">web</code> subsystem, by way of the <code class="literal">WebdavServlet</code>, to host static resources and enable additional HTTP methods for accessing and manipulating those files. In JBoss EAP 7, the <code class="literal">undertow</code> subsystem does provide a mechanism for serving static files using a file handler, but the <code class="literal">undertow</code> subsystem does not support WebDAV. If you want to use WebDAV with JBoss EAP 7, you can write a custom WebDAV servlet.
			</p><h3><a id="updating_an_existing_file_handler"/>Updating an Existing File Handler</h3><p>
				To update an existing file handler:
			</p><pre class="screen">/subsystem=undertow/configuration=handler/file=welcome-content:write-attribute(name=case-sensitive,value=true)</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_file_handler"/>Creating a New File Handler</h3><p>
				To create a new file handler:
			</p><pre class="screen">/subsystem=undertow/configuration=handler/file=new-file-handler:add(path="${jboss.home.dir}/welcome-content")</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
					If you set a file handler’s <code class="literal">path</code> directly to a file instead of a directory, any <code class="literal">location</code> elements that reference that file handler must not end with a forward slash (<code class="literal">/</code>). Otherwise, the server will return a <code class="literal">404 - Not Found</code> response.
				</p></div><h3><a id="deleting_a_file_handler"/>Deleting a File Handler</h3><p>
				To delete a file handler
			</p><pre class="screen">/subsystem=undertow/configuration=handler/file=new-file-handler:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring handlers, see the <a class="link" href="reference_material.html#undertow-attribute-refs" title="Undertow Subsystem Attributes">Undertow Subsystem Attributes</a> section.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-configure-filters"/>Configuring Filters</h1></div></div></div><p>
				A filter enables some aspect of a request to be modified and can use predicates to control when a filter executes. Some common use cases for filters include setting headers or doing GZIP compression.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					A filter is functionally equivalent to a global valve used in JBoss EAP 6.
				</p></div><p>
				The following types of filters can be defined:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						custom-filter
					</li><li class="listitem">
						error-page
					</li><li class="listitem">
						expression-filter
					</li><li class="listitem">
						gzip
					</li><li class="listitem">
						mod-cluster
					</li><li class="listitem">
						request-limit
					</li><li class="listitem">
						response-header
					</li><li class="listitem">
						rewrite
					</li></ul></div><p>
				The following examples show how to configure a filter using the management CLI. You can also configure a filter using the management console by navigating to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>Subsystems</strong></span> → <span class="strong"><strong>Web (Undertow)</strong></span> → <span class="strong"><strong>Filters</strong></span>.
			</p><h3><a id="updating_an_existing_filter"/>Updating an Existing Filter</h3><p>
				To update an existing filter:
			</p><pre class="screen">/subsystem=undertow/configuration=filter/response-header=myHeader:write-attribute(name=header-value,value="JBoss-EAP")</pre><pre class="screen">reload</pre><h3><a id="creating_a_new_filter"/>Creating a New Filter</h3><p>
				To create a new filter:
			</p><pre class="screen">/subsystem=undertow/configuration=filter/response-header=new-response-header:add(header-name=new-response-header,header-value="My Value")</pre><h3><a id="deleting_a_filter"/>Deleting a Filter</h3><p>
				To delete a filter:
			</p><pre class="screen">/subsystem=undertow/configuration=filter/response-header=new-response-header:remove</pre><pre class="screen">reload</pre><p>
				For a full list of the attributes available for configuring filters, see the <a class="link" href="reference_material.html#undertow-attribute-refs" title="Undertow Subsystem Attributes">Undertow Subsystem Attributes</a> section.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="undertow_buffer_request_handler"/>Configuring the buffer-request Handler</h2></div></div></div><p>
					A request from the client or the browser consists of two parts: the header and the body. In a typical situation, the header and the body are sent to JBoss EAP without any delays in between. However, if the header is sent first and then after few seconds, the body is sent, there is a delay sending the complete request. This scenario creates a thread in JBoss EAP to show as <code class="literal">waiting</code> to execute the complete request.
				</p><p>
					The delay caused in sending the header and the body of the request can be corrected using the <code class="literal">buffer-request</code> handler. The <code class="literal">buffer-request</code> handler attempts to consume the request from a non-blocking IO thread before allocating it to a worker thread. When no <code class="literal">buffer-request</code> handler is added, the thread allocation to the worker thread happens directly. However, when the <code class="literal">buffer-request</code> handler is added, the handler attempts to read the amount of data that it can buffer in a non-blocking manner using the IO thread before allocating it to the worker thread.
				</p><p>
					You can use the following management CLI commands to configure the <code class="literal">buffer-request</code> handler:
				</p><pre class="screen">/subsystem=undertow/configuration=filter/expression-filter=buf:add(expression="buffer-request(buffers=1)")

/subsystem=undertow/server=default-server/host=default-host/filter-ref=buf:add</pre><p>
					There is a limit to the size of the buffer requests that can be processed. This limit is determined by a combination of the buffer size and the total number of buffers, as shown in the equation below.
				</p><p>
					<code class="literal">Total_size = num_buffers × buffer_size</code>
				</p><p>
					In the equation above:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">Total_size</code> is the size of data that will be buffered before the request is dispatched to a worker thread.
						</li><li class="listitem">
							<code class="literal">num_buffers</code> is the number of buffers. The number of buffers is set by the <code class="literal">buffers</code> parameter on the handler.
						</li><li class="listitem">
							<code class="literal">buffer_size</code> is the size of each buffer. The buffer size is set in the <code class="literal">io</code> subsystem, and is 16KB by default per request.
						</li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						Avoid configuring very large buffer requests, or else you might run out of memory.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_the_default_welcome_Web_application"/>Configure the Default Welcome Web Application</h1></div></div></div><p>
				JBoss EAP includes a default <code class="literal">Welcome</code> application, which displays at the root context on port <code class="literal">8080</code> by default.
			</p><p>
				There is a default server preconfigured in Undertow that serves up the welcome content.
			</p><h3><a id="default_undertow_subsystem_configuration_6"/>Default Undertow Subsystem Configuration</h3><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" default-server="default-server" default-virtual-host="default-host" default-servlet-container="default" default-security-domain="other"&gt;
    ...
    &lt;server name="default-server"&gt;
        &lt;http-listener name="default" socket-binding="http" redirect-socket="https" enable-http2="true"/&gt;
        &lt;https-listener name="https" socket-binding="https" security-realm="ApplicationRealm" enable-http2="true"/&gt;
        &lt;host name="default-host" alias="localhost"&gt;
            &lt;location name="/" handler="welcome-content"/&gt;
            &lt;http-invoker security-realm="ApplicationRealm"/&gt;
        &lt;/host&gt;
    &lt;/server&gt;
    ...
    &lt;handlers&gt;
        &lt;file name="welcome-content" path="${jboss.home.dir}/welcome-content"/&gt;
    &lt;/handlers&gt;
&lt;/subsystem&gt;</pre><p>
				The default server, <code class="literal">default-server</code>, has a default host, <code class="literal">default-host</code>, configured. The default host is configured to handle requests to the server’s root, using the <code class="literal">&lt;location&gt;</code> element, with the <code class="literal">welcome-content</code> file handler. The <code class="literal">welcome-content</code> handler serves up the content in the location specified in the <code class="literal">path</code> property.
			</p><p>
				This default <code class="literal">Welcome</code> application can be replaced with your own web application. This can be configured in one of two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#changing_the_welcome_content_file_handler" title="Change the welcome-content File Handler">Change the <code class="literal">welcome-content</code> file handler</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_web_server_undertow.html#changing_the_default_web_module" title="Change the default-web-module">Change the <code class="literal">default-web-module</code></a>
					</li></ul></div><p>
				You can also <a class="link" href="configuring_the_web_server_undertow.html#disable_welcome_app" title="Disable the Default Welcome Web Application">disable the welcome content</a>.
			</p><h3><a id="changing_the_welcome_content_file_handler"/>Change the welcome-content File Handler</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Modify the existing <code class="literal">welcome-content</code> file handler’s path to point to the new deployment.
					</p><pre class="screen">/subsystem=undertow/configuration=handler/file=welcome-content:write-attribute(name=path,value="<span class="emphasis"><em>/path/to/content</em></span>")</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							Alternatively, you could create a different file handler to be used by the server’s root.
						</p><pre class="screen">/subsystem=undertow/configuration=handler/file=<span class="emphasis"><em>NEW_FILE_HANDLER</em></span>:add(path="<span class="emphasis"><em>/path/to/content</em></span>")
/subsystem=undertow/server=default-server/host=default-host/location=\/:write-attribute(name=handler,value=<span class="emphasis"><em>NEW_FILE_HANDLER</em></span>)</pre></div></li><li class="listitem"><p class="simpara">
						Reload the server for the changes to take effect.
					</p><pre class="screen">reload</pre></li></ol></div><h3><a id="changing_the_default_web_module"/>Change the default-web-module</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Map a deployed web application to the server’s root.
					</p><pre class="screen">/subsystem=undertow/server=default-server/host=default-host:write-attribute(name=default-web-module,value=hello.war)</pre></li><li class="listitem"><p class="simpara">
						Reload the server for the changes to take effect.
					</p><pre class="screen">reload</pre></li></ol></div><h3><a id="disable_welcome_app"/>Disable the Default Welcome Web Application</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Disable the welcome application by removing the <code class="literal">location</code> entry <code class="literal">/</code> for the <code class="literal">default-host</code>.
					</p><pre class="screen">/subsystem=undertow/server=default-server/host=default-host/location=\/:remove</pre></li><li class="listitem"><p class="simpara">
						Reload the server for the changes to take effect.
					</p><pre class="screen">reload</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-configure-https"/>Configuring HTTPS</h1></div></div></div><p>
				For information on configuring HTTPS for web applications, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#configure_one_way_and_two_way_ssl_tls_for_application">Configure One-way and Two-way SSL/TLS for Applications</a> in <span class="emphasis"><em>How to Configure Server Security</em></span>.
			</p><p>
				For information on configuring HTTPS for use with the JBoss EAP management interfaces, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#secure_the_management_interfaces">How to Secure the Management Interfaces</a> in <span class="emphasis"><em>How to Configure Server Security</em></span>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-config-http-session-timeout"/>Configuring HTTP Session Timeout</h1></div></div></div><p>
				The HTTP session timeout defines the period of inactive time needed to declare an HTTP session invalid. For example, a user accesses an application deployed to JBoss EAP which creates an HTTP session. If that user then attempts to access that application again after the HTTP session timeout, the original HTTP session will be invalidated and the user will be forced to create a new HTTP session. This may result in the loss of unpersisted data or the user having to reauthenticate.
			</p><p>
				The HTTP session timeout is configured in an application’s <code class="literal">web.xml</code> file, but a default HTTP session timeout can be specified within JBoss EAP. The server’s timeout value will apply to all deployed applications, but an application’s <code class="literal">web.xml</code> will override the server’s value.
			</p><p>
				The server value is specified in the <code class="literal">default-session-timeout</code> property which is found in the <code class="literal">servlet-container</code> section of the <code class="literal">undertow</code> subsystem. The value of <code class="literal">default-session-timeout</code> is specified in minutes and the default is <code class="literal">30</code>.
			</p><h3><a id="configuring_the_default_session_timeout"/>Configuring the Default Session Timeout</h3><p>
				To configure the <code class="literal">default-session-timeout</code>:
			</p><pre class="screen">/subsystem=undertow/servlet-container=default:write-attribute(name=default-session-timeout, value=60)</pre><pre class="screen">reload</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-config-http-only-cookies"/>Configuring HTTP-Only Session Management Cookies</h1></div></div></div><p>
				Session management cookies can be accessed by both HTTP APIs and non-HTTP APIs such as JavaScript. JBoss EAP offers the ability to send the <code class="literal">HttpOnly</code> header as part of the <code class="literal">Set-Cookie</code> response header to the client, usually a browser. In supported browsers, enabling this header tells the browser that it should prevent accessing session management cookies through non-HTTP APIs. Restricting session management cookies to only HTTP APIs can help to mitigate the threat of session cookie theft via cross-site scripting attacks. To enable this behavior, the <code class="literal">http-only</code> attribute should be set to <code class="literal">true</code>.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Using the <code class="literal">HttpOnly</code> header does not actually prevent cross-site scripting attacks by itself, it merely notifies the browser. The browser must also support <code class="literal">HttpOnly</code> for this behavior to take affect.
				</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Using the <code class="literal">http-only</code> attribute only applies the restriction to session management cookies and not other browser cookies.
				</p></div><p>
				The <code class="literal">http-only</code> attribute is set in two places in the <code class="literal">undertow</code> subsystem:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						In the servlet container as a session cookie setting
					</li><li class="listitem">
						In the host section of the server as a single sign-on property
					</li></ul></div><h3><a id="configuring_literal_host_only_literal_for_the_servlet_container_session_cookie"/>Configuring <code class="literal">host-only</code> for the Servlet Container Session Cookie</h3><p>
				To configure the <code class="literal">host-only</code> property for the servlet container session cookie:
			</p><pre class="screen">/subsystem=undertow/servlet-container=default/setting=session-cookie:add</pre><pre class="screen">/subsystem=undertow/servlet-container=default/setting=session-cookie:write-attribute(name=http-only,value=true)</pre><pre class="screen">reload</pre><h3><a id="configuring_literal_host_only_literal_for_the_host_single_sign_on"/>Configuring <code class="literal">host-only</code> for the Host Single Sign-On</h3><p>
				To configure the <code class="literal">host-only</code> property for the host single sign-on:
			</p><pre class="screen">/subsystem=undertow/server=default-server/host=default-host/setting=single-sign-on:add</pre><pre class="screen">/subsystem=undertow/server=default-server/host=default-host/setting=single-sign-on:write-attribute(name=http-only,value=true)</pre><pre class="screen">reload</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_http_2"/>Configuring HTTP/2</h1></div></div></div><p>
				Undertow allows for the use of the <a class="link" href="https://datatracker.ietf.org/doc/rfc7540/">HTTP/2</a> standard, which reduces latency by compressing headers and multiplexing many streams over the same TCP connection. It also provides the ability for a server to push resources to the client before it has requested them, leading to faster page loads.
			</p><p>
				Be aware that HTTP/2 only works with clients and browsers that also support the HTTP/2 standard.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Most modern browsers enforce HTTP/2 over a secured TLS connection, known as <code class="literal">h2</code> and may not support HTTP/2 over plain HTTP, known as <code class="literal">h2c</code>. It is still possible to configure JBoss EAP to use HTTP/2 with <code class="literal">h2c</code>, in other words, without using HTTPS and only using plain HTTP with HTTP upgrade. In that case, you can simply enable HTTP/2 in the HTTP listener Undertow:
				</p><pre class="screen">/subsystem=undertow/server=default-server/http-listener=default:write-attribute(name=enable-http2,value=true)</pre></div><p>
				To configure Undertow to use HTTP/2, enable the HTTPS listener in Undertow to use HTTP/2 by setting the <code class="literal">enable-http2</code> attribute to <code class="literal">true</code>:
			</p><pre class="screen">/subsystem=undertow/server=default-server/https-listener=https:write-attribute(name=enable-http2,value=true)</pre><p>
				For more information on the HTTPS listener and configuring Undertow to use HTTPS for web applications, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#configure_one_way_and_two_way_ssl_tls_for_application">Configure One-way and Two-way SSL/TLS for Applications</a> in <span class="emphasis"><em>How to Configure Server Security</em></span>.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					In order to utilize HTTP/2 with the <code class="literal">elytron</code> subsystem, you will need to ensure that the configured <code class="literal">ssl-context</code> in the <code class="literal">https-listener</code> of the Undertow is configured as modifiable. This can be achieved by setting the <code class="literal">wrap</code> attribute of the appropriate <code class="literal">server-ssl-context</code> to <code class="literal">false</code>. By default, the <code class="literal">wrap</code> attribute is set to <code class="literal">false</code>. This is required by Undertow to make modifications in the <code class="literal">ssl-context</code> about the ALPN. If the provided <code class="literal">ssl-context</code> is not writable, ALPN cannot be used and the connection falls back to HTTP/1.1.
				</p></div><h3><a id="alpn_support_when_using_http_2"/>ALPN support when using HTTP/2</h3><p>
				When using HTTP/2 over a secured TLS connection, a TLS stack that supports ALPN TLS protocol extension is required. Obtaining this stack varies based on the installed JDK.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						When using Java 8, the ALPN implementation is introduced directly into JBoss EAP with dependencies on Java internals. Therefore, this ALPN implementation only works with Oracle and OpenJDK. It does not work with IBM Java. Red Hat strongly recommends that you utilize ALPN TLS protocol extension support from the OpenSSL provider in JBoss EAP, with OpenSSL libraries that implement ALPN capability. Using the ALPN TLS protocol extension support from the OpenSSL provider should result in better performance. The supported OpenSSL libraries are the ones that are available from JBoss Core Services.
					</li><li class="listitem">
						As of Java 9, the JDK supports ALPN natively; however, using the ALPN TLS protocol extension support from the OpenSSL provider should also result in better performance when using Java 9 or later.
					</li></ul></div><p>
				Instructions for installing OpenSSL, to obtain the ALPN TLS protocol extension support, are available in <a class="link" href="reference_material.html#install_openssl_jbcs" title="Install OpenSSL from JBoss Core Services">Install OpenSSL from JBoss Core Services</a>.
			</p><p>
				Once OpenSSL has been installed, follow the instructions in <a class="link" href="reference_material.html#configure_eap_openssl" title="Configure JBoss EAP to Use OpenSSL">Configure JBoss EAP to Use OpenSSL</a>.
			</p><h3><a id="verify_http_2_is_being_used"/>Verify HTTP/2 is Being Used</h3><p>
				To verify that Undertow is using HTTP/2, you will need to inspect the headers coming from Undertow. Navigate to your JBoss EAP instance using https, for example <a class="link" href="https://localhost:8443">https://localhost:8443</a>, and use your browser’s developer tools to inspect the headers. Some browsers, for example Google Chrome, will show HTTP/2 pseudo headers, such as <code class="literal">:path</code>, <code class="literal">:authority</code>, <code class="literal">:method</code> and <code class="literal">:scheme</code>, when using HTTP/2. Other browsers, for example Firefox and Safari, will report the status or version of the header as <code class="literal">HTTP/2.0</code>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undertow-config-requestDumping-handler"/>Configuring a RequestDumping Handler</h1></div></div></div><p>
				The <code class="literal">RequestDumping</code> handler, <code class="literal">io.undertow.server.handlers.RequestDumpingHandler</code>, logs the details of a request and corresponding response objects handled by Undertow within JBoss EAP.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					While this handler can be useful for debugging, it may also log sensitive information. Please keep this in mind when enabling this handler.
				</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The <code class="literal">RequestDumping</code> handler replaces the <code class="literal">RequestDumperValve</code> from JBoss EAP 6.
				</p></div><p>
				You can configure a <code class="literal">RequestDumping</code> handler at either at the server level directly in JBoss EAP or within an individual application.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_a_requestdumping_handler_on_the_server"/>Configuring a RequestDumping Handler on the Server</h2></div></div></div><p>
					A <code class="literal">RequestDumping</code> handler should be configured as an expression filter. To configure a <code class="literal">RequestDumping</code> handler as an expression filter, you need to do the following:
				</p><h4><a id="create_a_new_expression_filter_with_the_literal_requestdumping_literal_handler"/>Create a new Expression Filter with the <code class="literal">RequestDumping</code> Handler</h4><pre class="screen">/subsystem=undertow/configuration=filter/expression-filter=requestDumperExpression:add(expression="dump-request")</pre><h4><a id="enable_the_expression_filter_in_the_undertow_web_server"/>Enable the Expression Filter in the Undertow Web Server</h4><pre class="screen">/subsystem=undertow/server=default-server/host=default-host/filter-ref=requestDumperExpression:add</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						All requests and corresponding responses handled by the Undertow web server will be logged when enabling the <code class="literal">RequestDumping</code> handler as a expression filter in this manner.
					</p></div><h4><a id="configuring_a_requestdumping_handler_for_specific_urls"/>Configuring a RequestDumping Handler for Specific URLs</h4><p>
					In addition to logging all requests, you can also use an expression filter to only log requests and corresponding responses for specific URLs. This can be accomplished using a predicate in your expression such as <code class="literal">path</code>, <code class="literal">path-prefix</code>, or <code class="literal">path-suffix</code>. For example, if you want to log all requests and corresponding responses to <code class="literal">/myApplication/test</code>, you can use the expression <code class="literal">"path(/myApplication/test) -&gt; dump-request"</code> instead of the expression <code class="literal">"dump-request"</code> when creating your expression filter. This will only direct requests with a path exactly matching <code class="literal">/myApplication/test</code> to the <code class="literal">RequestDumping</code> handler.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_a_requestdumping_handler_within_an_application"/>Configuring a RequestDumping Handler within an Application</h2></div></div></div><p>
					In addition to configuring a <code class="literal">RequestDumping</code> handler at the server, you can also configure it within individual applications. This will limit the scope of the handler to only that specific application. A <code class="literal">RequestDumping</code> handler should be configured in <code class="literal">WEB-INF/undertow-handlers.conf</code>.
				</p><p>
					To configure the <code class="literal">RequestDumping</code> handler in <code class="literal">WEB-INF/undertow-handlers.conf</code> to log all requests and corresponding responses for this application, add the following expression to <code class="literal">WEB-INF/undertow-handlers.conf</code>:
				</p><div class="title"><strong>Example: <code class="literal">WEB-INF/undertow-handlers.conf</code></strong></div><p>
						
</p><pre class="screen">dump-request</pre><p>

					</p><p>
					To configure the <code class="literal">RequestDumping</code> handler in <code class="literal">WEB-INF/undertow-handlers.conf</code> to only log requests and corresponding responses to specific URLs within this application, you can use a predicate in your expression such as <code class="literal">path</code>, <code class="literal">path-prefix</code>, or <code class="literal">path-suffix</code>. For example, to log all requests and corresponding responses to <code class="literal">test</code> in your application, the following expression with the <code class="literal">path</code> predicate could be used:
				</p><div class="title"><strong>Example: <code class="literal">WEB-INF/undertow-handlers.conf</code></strong></div><p>
						
</p><pre class="screen">path(/test) -&gt; dump-request</pre><p>

					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						When using the predicates such as <code class="literal">path</code>, <code class="literal">path-prefix</code>, or <code class="literal">path-suffix</code> in expressions defined in the application’s <code class="literal">WEB-INF/undertow-handlers.conf</code>, the value used will be relative to the context root of the application. For example, if the application’s context root is <code class="literal">myApplication</code> with an expression <code class="literal">path(/test) -&gt; dump-request</code> configured in <code class="literal">WEB-INF/undertow-handlers.conf</code>, it will only log requests and corresponding responses to <code class="literal">/myApplication/test</code>.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_cookie_security"/>Configuring Cookie Security</h1></div></div></div><p>
				You can use the <code class="literal">secure-cookie</code> handler to enhance the security of cookies that are created over a connection between a server and a client. In this case, if the connection over which the cookie is set is marked as secure, the cookie will have its <code class="literal">secure</code> attribute set to <code class="literal">true</code>.
			</p><p>
				You can secure the connection by configuring a listener or by using HTTPS. You configure the <code class="literal">secure-cookie</code> handler by defining an <code class="literal">expression-filter</code> in the <code class="literal">undertow</code> subsystem. For more information, see <a class="link" href="configuring_the_web_server_undertow.html#undertow-configure-filters" title="Configuring Filters">Configuring Filters</a>.
			</p><p>
				When the <code class="literal">secure-cookie</code> handler is in use, cookies that are set over a secure connection will be implicitly set as secure and will never be sent over an unsecure connection.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="tuning_undertow_subsystem"/>Tuning the Undertow Subsystem</h1></div></div></div><p>
				For tips on optimizing performance for the <code class="literal">undertow</code> subsystem, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/#undertow_tuning">Undertow Subsystem Tuning</a> section of the <span class="emphasis"><em>Performance Tuning Guide</em></span>.
			</p></div></div></body></html>