<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 23. Configuring the Naming Subsystem</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_the_naming_subsystem"/>Chapter 23. Configuring the Naming Subsystem</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="about_the_naming_subsystem"/>About the Naming Subsystem</h1></div></div></div><p>
				The <code class="literal">naming</code> subsystem provides the JNDI implementation for JBoss EAP. You can configure this subsystem to <a class="link" href="configuring_the_naming_subsystem.html#configuring_global_bindings" title="Configuring Global Bindings">bind entries in global JNDI namespaces</a>. You can also configure it to <a class="link" href="configuring_the_naming_subsystem.html#remote_jndi_interface_configuration" title="Configuring the Remote JNDI Interface">activate or deactivate the remote JNDI interface</a>.
			</p><p>
				The following is an example of the <code class="literal">naming</code> subsystem XML configuration example with all of the elements and attributes specified.
			</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:naming:2.0"&gt;
    &lt;bindings&gt;
        &lt;simple name="java:global/simple-integer-binding" value="100" type="int" /&gt;
        &lt;simple name="java:global/jboss.org/docs/url" value="https://docs.jboss.org" type="java.net.URL" /&gt;
        &lt;object-factory name="java:global/foo/bar/factory" module="org.foo.bar" class="org.foo.bar.ObjectFactory" /&gt;
        &lt;external-context name="java:global/federation/ldap/example" class="javax.naming.directory.InitialDirContext" cache="true"&gt;
            &lt;environment&gt;
                &lt;property name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory" /&gt;
                &lt;property name="java.naming.provider.url" value="ldap://ldap.example.com:389" /&gt;
                &lt;property name="java.naming.security.authentication" value="simple" /&gt;
                &lt;property name="java.naming.security.principal" value="uid=admin,ou=system" /&gt;
                &lt;property name="java.naming.security.credentials" value="secret" /&gt;
            &lt;/environment&gt;
        &lt;/external-context&gt;
        &lt;lookup name="java:global/new-alias-name" lookup="java:global/original-name" /&gt;
    &lt;/bindings&gt;
    &lt;remote-naming/&gt;
&lt;/subsystem&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_global_bindings"/>Configuring Global Bindings</h1></div></div></div><p>
				The <code class="literal">naming</code> subsystem allows you to bind entries into the <code class="literal">java:global</code>, <code class="literal">java:jboss</code>, or <code class="literal">java</code> global JNDI namespaces; however, it is recommended that you use the standard portable <code class="literal">java:global</code> namespace.
			</p><p>
				Global bindings are configured in the <code class="literal">&lt;bindings&gt;</code> element of the <code class="literal">naming</code> subsystem. Four types of bindings are supported:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="configuring_the_naming_subsystem.html#configuring_simple_global_bindings" title="Configuring Simple Bindings">simple bindings</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_naming_subsystem.html#binding_object_factories" title="Binding Object Factories">object factory bindings</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_naming_subsystem.html#binding_external_contexts" title="Binding External Contexts">external context bindings</a>
					</li><li class="listitem">
						<a class="link" href="configuring_the_naming_subsystem.html#binding_lookup_aliases" title="Binding Lookup Aliases">binding lookup aliases</a>
					</li></ul></div><h3><a id="configuring_simple_global_bindings"/>Configuring Simple Bindings</h3><p>
				The <code class="literal">simple</code> XML configuration element binds primitive or <code class="literal">java.net.URL</code> entries.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal">name</code> attribute is mandatory and specifies the target JNDI name for the entry.
					</li><li class="listitem">
						The <code class="literal">value</code> attribute is mandatory and defines the entry’s value.
					</li><li class="listitem">
						The optional <code class="literal">type</code> attribute, which defaults to <code class="literal">java.lang.String</code>, specifies the type of the entry’s value. In addition to <code class="literal">java.lang.String</code>, you can specify primitive types and their corresponding object wrapper classes, such as <code class="literal">int</code> or <code class="literal">java.lang.Integer</code>, and <code class="literal">java.net.URL</code>.
					</li></ul></div><p>
				The following is an example of a management CLI command that creates a simple binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/simple-integer-binding:add(binding-type=simple, type=int, value=100)</pre><div class="title"><strong>Resulting XML Configuration</strong></div><p>
					
</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:naming:2.0"&gt;
    &lt;bindings&gt;
        &lt;simple name="java:global/simple-integer-binding" value="100" type="int"/&gt;
    &lt;/bindings&gt;
    &lt;remote-naming/&gt;
&lt;/subsystem&gt;</pre><p>

				</p><p>
				Use the following command to remove the binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/simple-integer-binding:remove</pre><h3><a id="binding_object_factories"/>Binding Object Factories</h3><p>
				The <code class="literal">object-factory</code> XML configuration element binds <code class="literal">javax.naming.spi.ObjectFactory</code> entries.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal">name</code> attribute is mandatory and specifies the target JNDI name for the entry.
					</li><li class="listitem">
						The <code class="literal">class</code> attribute is mandatory and defines the object factory’s Java type.
					</li><li class="listitem">
						The <code class="literal">module</code> attribute is mandatory and specifies the JBoss Module ID where the object factory Java class can be loaded from.
					</li><li class="listitem">
						The optional <code class="literal">environment</code> child element can be used to provide a custom environment to the object factory.
					</li></ul></div><p>
				The following is an example of a management CLI command that creates an object factory binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/foo\/bar\/factory:add(binding-type=object-factory, module=org.foo.bar, class=org.foo.bar.ObjectFactory, environment=[p1=v1, p2=v2])</pre><div class="title"><strong>Resulting XML Configuration</strong></div><p>
					
</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:naming:2.0"&gt;
    &lt;bindings&gt;
        &lt;object-factory name="java:global/foo/bar/factory" module="org.foo.bar" class="org.foo.bar.ObjectFactory"&gt;
            &lt;environment&gt;
                &lt;property name="p1" value="v1" /&gt;
                &lt;property name="p2" value="v2" /&gt;
            &lt;/environment&gt;
        &lt;/object-factory&gt;
    &lt;/bindings&gt;
  &lt;/subsystem&gt;</pre><p>

				</p><p>
				Use the following command to remove the binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/foo\/bar\/factory:remove</pre><h3><a id="binding_external_contexts"/>Binding External Contexts</h3><p>
				Federation of external JNDI contexts, such as LDAP context, are achieved using the <code class="literal">external-context</code> XML configuration element.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal">name</code> attribute is mandatory and specifies the target JNDI name for the entry.
					</li><li class="listitem">
						The <code class="literal">class</code> attribute is mandatory and indicates the Java initial naming context type used to create the federated context. Note that such type must have a constructor with a single environment map argument.
					</li><li class="listitem">
						The optional <code class="literal">module</code> attribute specifies the JBoss Module ID where any classes required by the external JNDI context can be loaded from.
					</li><li class="listitem">
						The optional <code class="literal">cache</code> attribute, which defaults to <code class="literal">false</code>, indicates whether the external context instance should be cached.
					</li><li class="listitem">
						The optional <code class="literal">environment</code> child element can be used to provide the custom environment needed to look up the external context.
					</li></ul></div><p>
				The following is an example of a management CLI command that creates an external context binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/federation\/ldap\/example:add(binding-type=external-context, cache=true, class=javax.naming.directory.InitialDirContext, module=org.jboss.as.naming, environment=[java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory, java.naming.provider.url="ldap://ldap.example.com:389", java.naming.security.authentication=simple, java.naming.security.principal="uid=admin,ou=system", java.naming.security.credentials=secret])</pre><div class="title"><strong>Resulting XML Configuration</strong></div><p>
					
</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:naming:2.0"&gt;
  &lt;bindings&gt;
    &lt;external-context name="java:global/federation/ldap/example" module="org.jboss.as.naming" class="javax.naming.directory.InitialDirContext" cache="true"&gt;
      &lt;environment&gt;
        &lt;property name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/&gt;
        &lt;property name="java.naming.provider.url" value="ldap://ldap.example.com:389"/&gt;
        &lt;property name="java.naming.security.authentication" value="simple"/&gt;
        &lt;property name="java.naming.security.principal" value="uid=admin,ou=system"/&gt;
        &lt;property name="java.naming.security.credentials" value="secret"/&gt;
      &lt;/environment&gt;
    &lt;/external-context&gt;
  &lt;/bindings&gt;
&lt;/subsystem&gt;</pre><p>

				</p><p>
				Use the following command to remove the binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/federation\/ldap\/example:remove</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Resource look up for JNDI providers that do not properly implement the <code class="literal">lookup(Name)</code> method can result in a "javax.naming.InvalidNameException: Only support CompoundName names" error.
				</p><p>
					You might be able to work around this issue by specifying that the external context environment use the <code class="literal">lookup(String)</code> method instead by adding the following property; however, this can result in a performance degradation.
				</p><pre class="programlisting">&lt;property name="org.jboss.as.naming.lookup.by.string" value="true"/&gt;</pre></div><h3><a id="binding_lookup_aliases"/>Binding Lookup Aliases</h3><p>
				The <code class="literal">lookup</code> element allows you to bind existing entries into additional names or aliases.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal">name</code> attribute is mandatory and specifies the target JNDI name for the entry.
					</li><li class="listitem">
						The <code class="literal">lookup</code> attribute is mandatory and indicates the source JNDI name.
					</li></ul></div><p>
				The following is an example of a management CLI command that binds an existing entry to an alias.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/new-alias-name:add(binding-type=lookup, lookup=java\:global\/original-name)</pre><div class="title"><strong>Resulting XML Configuration</strong></div><p>
					
</p><pre class="programlisting">&lt;lookup name="java:global/new-alias-name" lookup="java:global/original-name" /&gt;</pre><p>

				</p><p>
				Use the following command to remove the binding.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/c:remove</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="dynamically_change_jndi_bindings"/>Dynamically Change JNDI Bindings</h1></div></div></div><p>
				JBoss EAP 7.1 introduced the ability to dynamically change JNDI bindings without forcing a server reload or restart. This feature can be useful if the network service endpoints are dynamically reconfigured due to version updates, testing requirements, or application feature updates.
			</p><p>
				To update a JNDI binding, use the <code class="literal">rebind</code> operation. The <code class="literal">rebind</code> operation takes the same arguments as the <code class="literal">add</code> operation. This command works for all binding types except for <code class="literal">external-context</code> binding types. External context bindings require additional dependencies, which affect the Modular Service Container (MSC) state, so they cannot be restarted without restarting services.
			</p><p>
				The following command dynamically changes the JNDI binding that was defined in the <a class="link" href="configuring_the_naming_subsystem.html#configuring_simple_global_bindings" title="Configuring Simple Bindings">Configuring Simple Bindings</a> example.
			</p><pre class="screen">/subsystem=naming/binding=java\:global\/simple-integer-binding:rebind(binding-type=simple, type=int, value=200)</pre><p>
				For more information about how to configure global bindings in the <code class="literal">naming</code> subsystem, see <a class="link" href="configuring_the_naming_subsystem.html#configuring_global_bindings" title="Configuring Global Bindings">Configuring Global Bindings</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="remote_jndi_interface_configuration"/>Configuring the Remote JNDI Interface</h1></div></div></div><p>
				The remote JNDI interface allows clients to look up entries in remote JBoss EAP instances. The <code class="literal">naming</code> subsystem can be configured to deactivate or activate this interface, which is activated by default. The remote JNDI interface is configured using the <code class="literal">&lt;remote-naming&gt;</code> element.
			</p><p>
				Use the following management CLI command to activate or reactivate the remote JNDI interface.
			</p><pre class="screen">/subsystem=naming/service=remote-naming:add</pre><p>
				Use the following management CLI command to deactivate the remote JNDI interface.
			</p><pre class="screen">/subsystem=naming/service=remote-naming:remove</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Only entries within the <code class="literal">java:jboss/exported</code> context are accessible over remote JNDI.
				</p></div></div></div></body></html>