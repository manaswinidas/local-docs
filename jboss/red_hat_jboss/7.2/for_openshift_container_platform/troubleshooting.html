<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 4. Troubleshooting</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="troubleshooting"/>Chapter 4. Troubleshooting</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="troubleshooting_pod_restarts"/>Troubleshooting Pod Restarts</h1></div></div></div><p>
				Pods can restart for a number of reasons, but a common cause of JBoss EAP pod restarts might include OpenShift resource constraints, especially out-of-memory issues. See the OpenShift documentation for more information on <a class="link" href="https://docs.openshift.com/container-platform/latest/admin_guide/out_of_resource_handling.html#out-of-resource-eviction-of-pods">OpenShift pod eviction</a>.
			</p><p>
				By default, JBoss EAP for OpenShift templates are configured to automatically restart affected containers when they encounter situations like out-of-memory issues. The following steps can help you diagnose and troubleshoot out-of-memory and other pod restart issues.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Get the name of the pod that has been having trouble.
					</p><p class="simpara">
						You can see pod names, as well as the number times each pod has restarted with the following command.
					</p><pre class="screen">$ oc get pods</pre></li><li class="listitem"><p class="simpara">
						To diagnose why a pod has restarted, you can examine the JBoss EAP logs of the previous pod, or the OpenShift events.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								To see the JBoss EAP logs of the previous pod, use the following command.
							</p><pre class="screen">oc logs --previous <span class="emphasis"><em>POD_NAME</em></span></pre></li><li class="listitem"><p class="simpara">
								To see the OpenShift events, use the following command.
							</p><pre class="screen">$ oc get events</pre></li></ol></div></li><li class="listitem">
						If a pod has restarted because of a resource issue, you can attempt to modify your OpenShift pod configuration to increase its <a class="link" href="https://docs.openshift.com/container-platform/latest/dev_guide/compute_resources.html#dev-requests-vs-limits">resource requests and limits</a>. See the OpenShift documentation for more information on <a class="link" href="https://docs.openshift.com/container-platform/latest/dev_guide/compute_resources.html#dev-compute-resources">configuring pod compute resources</a>.
					</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="troubleshooting_management_cli"/>Troubleshooting Using the JBoss EAP Management CLI</h1></div></div></div><p>
				The JBoss EAP management CLI, <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh</code>, is accessible from within a container for troubleshooting purposes.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					It is not recommended to make configuration changes in a running pod using the JBoss EAP management CLI. Any configuration changes made using the management CLI in a running container will be lost when the container restarts.
				</p><p>
					To make configuration changes to JBoss EAP for OpenShift, see <a class="link" href="configuring_eap_openshift_image.html" title="Chapter 3. Configuring the JBoss EAP for OpenShift Image for Your Java Application">Configuring the JBoss EAP for OpenShift Image for Your Java Application</a>.
				</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						First open a remote shell session to the running pod.
					</p><pre class="screen">$ oc rsh <span class="emphasis"><em>POD_NAME</em></span></pre></li><li class="listitem"><p class="simpara">
						Run the following command from the remote shell session to launch the JBoss EAP management CLI:
					</p><pre class="screen">$ /opt/eap/bin/jboss-cli.sh</pre></li></ol></div></div></div></body></html>