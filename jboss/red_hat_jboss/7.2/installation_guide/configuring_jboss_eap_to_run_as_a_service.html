<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 4. Configuring JBoss EAP to Run as a Service</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_jboss_eap_to_run_as_a_service"/>Chapter 4. Configuring JBoss EAP to Run as a Service</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_eap_service_rhel_zip"/>Configuring JBoss EAP as a Service in Red Hat Enterprise Linux (ZIP and Installer Installations)</h1></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist"><li class="listitem">
						Install JBoss EAP as a <a class="link" href="product_installation.html#zip_installation" title="ZIP Installation">ZIP</a> or <a class="link" href="product_installation.html#installer_installation" title="Installer Installation">Installer</a> installation.
					</li><li class="listitem">
						Administrator privileges on the server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Configuring JBoss EAP as a Service in Red Hat Enterprise Linux</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Customize the start-up options in the <code class="literal">jboss-eap.conf</code> file.
					</p><p class="simpara">
						The startup script and an associated configuration file are located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/init.d/</code> directory. Open <code class="literal">jboss-eap.conf</code> in a text editor and set the options for your JBoss EAP installation.
					</p><p class="simpara">
						There are several options in <code class="literal">jboss-eap.conf</code> file, but at the minimum you must provide the correct values for <code class="literal">JBOSS_HOME</code> and the <code class="literal">JBOSS_USER</code>.
					</p><p class="simpara">
						You can customize the other options provided in the configuration file by uncommenting and editing the respective lines. If you do not, the service will default to starting a standalone JBoss EAP server using the default configuration file, <code class="literal">standalone.xml</code>.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							If you want the service to start JBoss EAP as a managed domain, add <code class="literal">JBOSS_MODE=domain</code> to <code class="literal">jboss-eap.conf</code>.
						</p><p>
							To specify custom <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#managed_domain_configuration_files">domain configuration files</a>, add <code class="literal">JBOSS_DOMAIN_CONFIG=<span class="emphasis"><em>DOMAIN_CONFIG_FILE</em></span>.xml</code> and <code class="literal">JBOSS_HOST_CONFIG=<span class="emphasis"><em>HOST_CONFIG_FILE</em></span>.xml</code>. By default, JBoss EAP uses <code class="literal">domain.xml</code> and <code class="literal">host.xml</code> as the domain configuration files.
						</p></div></li><li class="listitem"><p class="simpara">
						Copy the service files into the system directories.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Copy the modified service configuration file to the <code class="literal">/etc/default</code> directory.
							</p><pre class="screen">$ sudo cp <span class="emphasis"><em>EAP_HOME</em></span>/bin/init.d/jboss-eap.conf /etc/default</pre></li><li class="listitem"><p class="simpara">
								Copy the service startup script to the <code class="literal">/etc/init.d</code> directory, and give it execute permissions:
							</p><pre class="screen">$ sudo cp <span class="emphasis"><em>EAP_HOME</em></span>/bin/init.d/jboss-eap-rhel.sh /etc/init.d
$ sudo chmod +x /etc/init.d/jboss-eap-rhel.sh</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Add the new <code class="literal">jboss-eap-rhel.sh</code> service to list of automatically started services using the <code class="literal">chkconfig</code> service management command:
					</p><pre class="screen">$ sudo chkconfig --add jboss-eap-rhel.sh</pre></li><li class="listitem"><p class="simpara">
						Test that the service has been installed correctly by using one of the following commands.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								For Red Hat Enterprise Linux 6:
							</p><pre class="screen">$ sudo service jboss-eap-rhel.sh start</pre></li><li class="listitem"><p class="simpara">
								For Red Hat Enterprise Linux 7:
							</p><pre class="screen">$ sudo service jboss-eap-rhel start</pre></li></ol></div><p class="simpara">
						The service will start. If you get an error, check the error logs and make sure that the options in the configuration file are set correctly.
					</p></li><li class="listitem"><p class="simpara">
						To make the service start automatically when the Red Hat Enterprise Linux server starts, run the following command:
					</p><pre class="screen">$ sudo chkconfig jboss-eap-rhel.sh on</pre></li></ol></div><p>
				If you want to remove the JBoss EAP service, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Removing the JBoss EAP Service in Red Hat Enterprise Linux</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
						If the service is running, open a terminal and stop the service with one of the following commands.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								For Red Hat Enterprise Linux 6:
							</p><pre class="screen">$ sudo service jboss-eap-rhel.sh stop</pre></li><li class="listitem"><p class="simpara">
								For Red Hat Enterprise Linux 7:
							</p><pre class="screen">$ sudo service jboss-eap-rhel stop</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Remove JBoss EAP from the list of services:
					</p><pre class="screen">$ sudo chkconfig --del jboss-eap-rhel.sh</pre></li><li class="listitem"><p class="simpara">
						Delete the service configuration file and startup script:
					</p><pre class="screen">$ sudo rm /etc/init.d/jboss-eap-rhel.sh
$ sudo rm /etc/default/jboss-eap.conf</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_jboss_eap_as_a_service_in_red_hat_enterprise_linux_rpm_installation"/>Configuring JBoss EAP as a Service in Red Hat Enterprise Linux (RPM Installation)</h1></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist"><li class="listitem">
						Install JBoss EAP as an <a class="link" href="product_installation.html#rpm_installation" title="RPM Installation">RPM installation</a>.
					</li><li class="listitem">
						Administrator privileges on the server.
					</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					It is not supported to configure more than one JBoss EAP instance as a system service on a single machine.
				</p></div><p>
				An RPM installation of JBoss EAP installs everything that is required to run JBoss EAP as a service. Use one of the following commands to activate the JBoss EAP service to start automatically at system boot.
			</p><p>
				For the commands below, replace <code class="literal"><span class="emphasis"><em>EAP_SERVICE_NAME</em></span></code> with either <code class="literal">eap7-standalone</code> for a standalone JBoss EAP server, or <code class="literal">eap7-domain</code> for a managed domain.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						For Red Hat Enterprise Linux 6:
					</p><pre class="screen">chkconfig <span class="emphasis"><em>EAP_SERVICE_NAME</em></span> on</pre></li><li class="listitem"><p class="simpara">
						For Red Hat Enterprise Linux 7:
					</p><pre class="screen">systemctl enable <span class="emphasis"><em>EAP_SERVICE_NAME</em></span>.service</pre></li></ul></div><p>
				To start or stop an RPM installation of JBoss EAP on demand, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#starting_stopping_rpm">RPM instructions</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#rpm_installation_configuration_files">RPM service configuration files appendix</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for further details and options.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_jboss_eap_as_a_service_in_microsoft_windows_server"/>Configuring JBoss EAP as a Service in Microsoft Windows Server</h1></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist"><li class="listitem">
						Install JBoss EAP as a <a class="link" href="product_installation.html#zip_installation" title="ZIP Installation">ZIP</a> or <a class="link" href="product_installation.html#installer_installation" title="Installer Installation">Installer</a> installation.
					</li><li class="listitem">
						Administrator privileges on the server.
					</li><li class="listitem">
						The <code class="literal">JAVA_HOME</code> system environment variable must be set.
					</li><li class="listitem">
						The JBoss EAP server instance must not be running.
					</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Using the <code class="literal">set</code> command to set system environment variables in a Windows Server command prompt will not permanently set the environment variable. You must use either the <code class="literal">setx</code> command, or the <span class="strong"><strong>System</strong></span> interface in the <span class="strong"><strong>Control Panel</strong></span>.
				</p></div><div class="orderedlist"><p class="title"><strong>Configuring JBoss EAP as a Service in Microsoft Windows Server</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Create two system environment variables:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">JBOSS_HOME</code> pointing to the JBoss EAP installation directory.
							</li><li class="listitem">
								<code class="literal">NOPAUSE=1</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Install the JBoss Core Services Jsvc Package
					</p><p class="simpara">
						If not already configured, download and extract the JBoss Core Services Jsvc package.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Open a browser and log in to the Red Hat Customer Portal <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">JBoss Software Downloads page</a>.
							</li><li class="listitem">
								Select <span class="strong"><strong>Apache Jsvc</strong></span> in the <span class="strong"><strong>Product</strong></span> drop-down menu.
							</li><li class="listitem">
								Select the latest version from the <span class="strong"><strong>Version</strong></span> drop-down menu.
							</li><li class="listitem">
								Find <span class="strong"><strong>Red Hat JBoss Core Services Apache Jsvc</strong></span> in the list, ensuring that you select the correct platform and architecture for your system, and click the <span class="strong"><strong>Download</strong></span> link.
							</li><li class="listitem"><p class="simpara">
								Extract the downloaded ZIP file into the directory containing your JBoss EAP installation directory.
							</p><p class="simpara">
								This will result in a <code class="literal">jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> directory at the same depth as your JBoss EAP installation directory. For example:
							</p><pre class="screen">C:\Program Files
├── jboss-eap-7.2
│   ├── bin
│   └── ...
└── jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Install the Service
					</p><p class="simpara">
						Open a terminal, and change directories to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>\bin</code>.
					</p><p class="simpara">
						Below are examples of a basic <code class="literal">service.bat install</code> command to create a new service for either a standalone server, or a server in a managed domain. For a list of all possible options, run <code class="literal">service.bat</code> without any arguments.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							If you specify the <code class="literal">/jbossuser</code> and <code class="literal">/jbosspass</code> parameters, you must ensure that your JBoss EAP user’s password does not contain a hash (<code class="literal">#</code>) or a semicolon (<code class="literal">;</code>).
						</p></div><p class="simpara">
						Execute the following command, adjusting the log level for the service as required:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								For a standalone server:
							</p><pre class="screen">service.bat install /loglevel INFO</pre></li><li class="listitem"><p class="simpara">
								For a server in a managed domain:
							</p><p class="simpara">
								Use the <code class="literal">/host</code> parameter to specify the name of the JBoss EAP host controller being controlled by the service. You can see valid values for the name by executing <code class="literal">ls /host</code> in the management CLI.
							</p><p class="simpara">
								Replace <code class="literal"><span class="emphasis"><em>EAP_HOST_NAME</em></span></code> in the command below with your JBoss EAP host controller name. If you specify the <code class="literal">/host</code> parameter without providing a JBoss EAP host controller name, the name defaults to <code class="literal">master</code>.
							</p><pre class="screen">service.bat install /host <span class="emphasis"><em>EAP_HOST_NAME</em></span> /loglevel INFO</pre></li></ol></div><p class="simpara">
						A new Windows service will be created with name <code class="literal">JBossEAP7</code>.
					</p></li><li class="listitem"><p class="simpara">
						Verify the New Service in the <code class="literal">Services</code> console
					</p><p class="simpara">
						Open the Windows Services console (<code class="literal">services.msc</code>) and verify that the service was created.
					</p><p class="simpara">
						If the default service name was used, in the list of Windows services the new service will have the display name: <code class="literal">JBossEAP7</code>. From the Services console you can start and stop the service, as well change its settings of how and when it starts.
					</p></li><li class="listitem"><p class="simpara">
						Starting and Stopping the JBoss EAP Service from a Terminal
					</p><p class="simpara">
						To start the service from a terminal, use the following command, changing the service name if necessary:
					</p><pre class="screen">net start JBossEAP7</pre><p class="simpara">
						To stop the service from a terminal, use the following command, changing the service name if necessary:
					</p><pre class="screen">net stop JBossEAP7</pre></li></ol></div><p>
				If you want to remove the JBoss EAP service, use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Removing the JBoss EAP Service in Microsoft Windows Server</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
						If the service is running, first open a terminal and stop the service by executing the <code class="literal">net stop</code> command with the name of the service:
					</p><pre class="screen">net stop JBossEAP7</pre></li><li class="listitem"><p class="simpara">
						In a terminal, change directories to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>\bin</code> and execute the following command:
					</p><pre class="screen">service.bat uninstall</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_jboss_eap_as_a_service_using_jsvc"/>Configuring JBoss EAP as a Service Using Jsvc</h1></div></div></div><p>
				The Apache Jsvc component of the JBoss Core Services collection can be used to run JBoss EAP as a background service on Red Hat Enterprise Linux and Solaris.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Jsvc support for JBoss EAP is primarily intended for running JBoss EAP as a service on Microsoft Windows and Solaris. Although Jsvc works on Red Hat Enterprise Linux, we strongly recommend that you use the <a class="link" href="configuring_jboss_eap_to_run_as_a_service.html#configuring_eap_service_rhel_zip" title="Configuring JBoss EAP as a Service in Red Hat Enterprise Linux (ZIP and Installer Installations)">native methods</a> for running JBoss EAP as a service on Red Hat Enterprise Linux.
				</p></div><p>
				Jsvc is a set of libraries and applications which allow Java applications to run on UNIX-like platforms as a background service. It allows an application to perform operations as a privileged user, and then switch identity to a non-privileged user.
			</p><p>
				Jsvc uses three processes: a launcher process, a controller process, and a controlled process. The controlled process is also the main Java thread. If the JVM crashes, the controller process will restart it within 60 seconds. Jsvc is a daemon process, and for JBoss EAP it must be started by a privileged user.
			</p><div class="itemizedlist"><p class="title"><strong>Install the JBoss Core Services Jsvc Package</strong></p><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						For ZIP or installer installations:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Open a browser and log in to the Red Hat Customer Portal <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">JBoss Software Downloads page</a>.
							</li><li class="listitem">
								Select <span class="strong"><strong>Apache Jsvc</strong></span> in the <span class="strong"><strong>Product</strong></span> drop-down menu.
							</li><li class="listitem">
								Select the latest version from the <span class="strong"><strong>Version</strong></span> drop-down menu.
							</li><li class="listitem">
								Find <span class="strong"><strong>Red Hat JBoss Core Services Apache Jsvc</strong></span> in the list, ensuring that you select the correct platform and architecture for your system, and click the <span class="strong"><strong>Download</strong></span> link.
							</li><li class="listitem"><p class="simpara">
								Extract the downloaded ZIP file into the directory containing your JBoss EAP installation directory.
							</p><p class="simpara">
								This will result in a <code class="literal">jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> directory at the same depth as your JBoss EAP installation directory. For example:
							</p><pre class="screen">/var/opt/
├── jboss-eap-7.2
│   ├── bin
│   └── ...
└── jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span></pre></li><li class="listitem"><p class="simpara">
								The command examples for using Jsvc to start JBoss EAP assume that a <code class="literal">jboss</code> user has been created. If you have not already created a user for JBoss EAP, run the following commands to create the <code class="literal">jboss</code> user and group:
							</p><pre class="screen"># groupadd -f -g 185 -r jboss
# useradd -r -u 185 -g jboss -d <span class="emphasis"><em>EAP_HOME</em></span> -s /sbin/nologin -c "JBoss" jboss</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						For RPM installations on Red Hat Enterprise Linux:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Log in to <a class="link" href="https://access.redhat.com/management/subscription-management">Red Hat Subscription Manager</a>.
							</li><li class="listitem">
								Click on <span class="strong"><strong>Systems</strong></span> in the <span class="strong"><strong>Subscriber Inventory</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Subscribe to the JBoss Core Services CDN repositories for your operating system version and architecture:
							</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
										For Red Hat Enterprise Linux 6:
									</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
												jb-coreservices-1-for-rhel-6-server-rpms
											</li></ul></div></li><li class="listitem"><p class="simpara">
										For Red Hat Enterprise Linux 7:
									</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
												jb-coreservices-1-for-rhel-7-server-rpms
											</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
								Run the following command as the root user to install Jsvc:
							</p><pre class="screen"># yum groupinstall jbcs-jsvc</pre></li></ol></div></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Be sure to set the <code class="literal">JAVA_HOME</code> system environment variable.
				</p></div><div class="title"><strong>Using Jsvc to Start JBoss EAP as a Standalone Server</strong></div><p>
					The following commands are used are to start and stop JBoss EAP in standalone mode using Jsvc. The tables below show the paths that are needed for the commands for a ZIP/installer JBoss EAP installation, or an RPM installation.
				</p><div class="table"><a id="idm139754837222272"/><p class="title"><strong>Table 4.1. Jsvc File Locations for ZIP/Installer Installations - Standalone Server</strong></p><div class="table-contents"><table summary="Jsvc File Locations for ZIP/Installer Installations - Standalone Server" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">File Reference in Instructions</th><th style="text-align: left" valign="top">File Location</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_BIN</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/../jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/sbin/jsvc</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_JAR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/../jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/lib/commons-daemon.jar</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>CONF_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>LOG_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/log</code>
							</p>
							 </td></tr></tbody></table></div></div><div class="table"><a id="idm139754940903088"/><p class="title"><strong>Table 4.2. Jsvc File Locations for RPM Installations - Standalone Server</strong></p><div class="table-contents"><table summary="Jsvc File Locations for RPM Installations - Standalone Server" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">File Reference in Instructions</th><th style="text-align: left" valign="top">File Location</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_BIN</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/usr/bin/jbcs-jsvc/jsvc</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_JAR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/usr/bin/jbcs-jsvc/commons-daemon.jar</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>CONF_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/opt/rh/eap7/root/usr/share/wildfly/standalone/configuration</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>LOG_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/opt/rh/eap7/root/usr/share/wildfly/standalone/log</code>
							</p>
							 </td></tr></tbody></table></div></div><p>
				Start a standalone JBoss EAP server using Jsvc:
			</p><pre class="screen">$ <span class="emphasis"><em>JSVC_BIN</em></span> \
 -outfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.out.log   \
 -errfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.err.log   \
 -pidfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.pid  \
 -user jboss \
 -D[Standalone] -XX:+UseCompressedOops -Xms1303m \
 -Xmx1303m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true \
 -Dorg.jboss.boot.log.file=<span class="emphasis"><em>LOG_DIR</em></span>/server.log \
 -Dlogging.configuration=file:<span class="emphasis"><em>CONF_DIR</em></span>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp <span class="emphasis"><em>EAP_HOME</em></span>/jboss-modules.jar:<span class="emphasis"><em>JSVC_JAR</em></span> \
 -Djboss.home.dir=<span class="emphasis"><em>EAP_HOME</em></span> \
 -Djboss.server.base.dir=<span class="emphasis"><em>EAP_HOME</em></span>/standalone   \
 @org.jboss.modules.Main -start-method main \
 -mp <span class="emphasis"><em>EAP_HOME</em></span>/modules \
 -jaxpmodule javax.xml.jaxp-provider \
 org.jboss.as.standalone</pre><p>
				Stop a standalone JBoss EAP server using Jsvc:
			</p><pre class="screen">$ <span class="emphasis"><em>JSVC_BIN</em></span> \
 -stop \
 -outfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.out.log   \
 -errfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.err.log   \
 -pidfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.pid  \
 -user jboss \
 -D[Standalone] -XX:+UseCompressedOops -Xms1303m \
 -Xmx1303m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true \
 -Dorg.jboss.boot.log.file=<span class="emphasis"><em>LOG_DIR</em></span>/server.log \
 -Dlogging.configuration=file:<span class="emphasis"><em>CONF_DIR</em></span>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp <span class="emphasis"><em>EAP_HOME</em></span>/jboss-modules.jar:<span class="emphasis"><em>JSVC_JAR</em></span> \
 -Djboss.home.dir=<span class="emphasis"><em>EAP_HOME</em></span> \
 -Djboss.server.base.dir=<span class="emphasis"><em>EAP_HOME</em></span>/standalone   \
 @org.jboss.modules.Main -start-method main \
 -mp <span class="emphasis"><em>EAP_HOME</em></span>/modules \
 -jaxpmodule javax.xml.jaxp-provider \
 org.jboss.as.standalone</pre><div class="title"><strong>Using Jsvc to Start a JBoss EAP Managed Domain</strong></div><p>
					The following commands are used are to start and stop a JBoss EAP managed domain using Jsvc. The tables below show the paths that are needed for the commands for a ZIP/installer JBoss EAP installation, or an RPM installation.
				</p><div class="table"><a id="idm139754940062032"/><p class="title"><strong>Table 4.3. Jsvc File Locations for ZIP/Installer Installations - Managed Domain</strong></p><div class="table-contents"><table summary="Jsvc File Locations for ZIP/Installer Installations - Managed Domain" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">File Reference in Instructions</th><th style="text-align: left" valign="top">File Location</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_BIN</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/../jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/sbin/jsvc</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_JAR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/../jbcs-jsvc-<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/lib/commons-daemon.jar</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>CONF_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>LOG_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/log</code>
							</p>
							 </td></tr></tbody></table></div></div><div class="table"><a id="idm139754924387712"/><p class="title"><strong>Table 4.4. Jsvc File Locations for RPM Installations - Managed Domain</strong></p><div class="table-contents"><table summary="Jsvc File Locations for RPM Installations - Managed Domain" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">File Reference in Instructions</th><th style="text-align: left" valign="top">File Location</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_BIN</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/usr/bin/jbcs-jsvc/jsvc</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>JSVC_JAR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/usr/bin/jbcs-jsvc/commons-daemon.jar</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>CONF_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/opt/rh/eap7/root/usr/share/wildfly/domain/configuration</code>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal"><span class="emphasis"><em>LOG_DIR</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">/opt/rh/eap7/root/usr/share/wildfly/domain/log</code>
							</p>
							 </td></tr></tbody></table></div></div><p>
				Before you issue the following command, be sure to set the <code class="literal">JAVA_HOME</code> system environment variable.
			</p><p>
				Start a JBoss EAP managed domain using Jsvc:
			</p><pre class="screen">$ <span class="emphasis"><em>JSVC_BIN</em></span> \
 -outfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.out.log   \
 -errfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.err.log   \
 -pidfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.pid  \
 -user jboss \
 -nodetach -D"[Process Controller]" -server -Xms64m \
 -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true  \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true  \
 -Dorg.jboss.boot.log.file=<span class="emphasis"><em>LOG_DIR</em></span>/process-controller.log \
 -Dlogging.configuration=file:<span class="emphasis"><em>CONF_DIR</em></span>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp "<span class="emphasis"><em>EAP_HOME</em></span>/jboss-modules.jar:<span class="emphasis"><em>JSVC_JAR</em></span>" \
 org.apache.commons.daemon.support.DaemonWrapper \
 -start org.jboss.modules.Main -start-method main \
 -mp <span class="emphasis"><em>EAP_HOME</em></span>/modules org.jboss.as.process-controller \
 -jboss-home <span class="emphasis"><em>EAP_HOME</em></span> -jvm "${JAVA_HOME}"/bin/java \
 -mp <span class="emphasis"><em>EAP_HOME</em></span>/modules -- \
 -Dorg.jboss.boot.log.file=<span class="emphasis"><em>LOG_DIR</em></span>/host-controller.log \
 -Dlogging.configuration=file:<span class="emphasis"><em>CONF_DIR</em></span>/logging.properties \
 -Djboss.modules.policy-permissions \
 -server -Xms64m -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true -- -default-jvm "${JAVA_HOME}"/bin/java \
&amp;</pre><p>
				Stop a JBoss EAP managed domain using Jsvc:
			</p><pre class="screen">$ <span class="emphasis"><em>JSVC_BIN</em></span> \
 -stop \
 -outfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.out.log   \
 -errfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.err.log   \
 -pidfile <span class="emphasis"><em>LOG_DIR</em></span>/jsvc.pid  \
 -user jboss \
 -nodetach -D"[Process Controller]" -server -Xms64m \
 -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true  \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true  \
 -Dorg.jboss.boot.log.file=<span class="emphasis"><em>LOG_DIR</em></span>/process-controller.log \
 -Dlogging.configuration=file:<span class="emphasis"><em>CONF_DIR</em></span>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp "<span class="emphasis"><em>EAP_HOME</em></span>/jboss-modules.jar:<span class="emphasis"><em>JSVC_JAR</em></span>" \
 org.apache.commons.daemon.support.DaemonWrapper \
 -start org.jboss.modules.Main -start-method main \
 -mp <span class="emphasis"><em>EAP_HOME</em></span>/modules org.jboss.as.process-controller \
 -jboss-home <span class="emphasis"><em>EAP_HOME</em></span> -jvm $JAVA_HOME/bin/java \
 -mp <span class="emphasis"><em>EAP_HOME</em></span>/modules -- \
 -Dorg.jboss.boot.log.file=<span class="emphasis"><em>LOG_DIR</em></span>/host-controller.log \
 -Dlogging.configuration=file:<span class="emphasis"><em>CONF_DIR</em></span>/logging.properties \
 -Djboss.modules.policy-permissions \
 -server -Xms64m -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true -- -default-jvm $JAVA_HOME/bin/java</pre></div></div></body></html>