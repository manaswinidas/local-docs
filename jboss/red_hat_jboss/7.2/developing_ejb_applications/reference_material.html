<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Appendix A. Reference Material</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="reference_material"/>Appendix A. Reference Material</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ejb_jndi_naming_reference"/>EJB JNDI Naming Reference</h1></div></div></div><p>
				The JNDI lookup name for a session bean uses the following syntax:
			</p><pre class="screen">ejb:&lt;appName&gt;/&lt;moduleName&gt;/&lt;distinctName&gt;/&lt;beanName&gt;!&lt;viewClassName&gt;?stateful</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">&lt;appName&gt;</code>: If the session bean’s JAR file has been deployed within an enterprise archive (EAR) then the <code class="literal">appName</code> is the name of the respective EAR. By default, the name of an EAR is its file name without the <code class="literal">.ear</code> suffix. The application name can be overridden in its <code class="literal">application.xml</code> file. If the session bean is not deployed in an EAR, then leave the <code class="literal">appName</code> blank.
					</li><li class="listitem">
						<code class="literal">&lt;moduleName&gt;</code>: The <code class="literal">moduleName</code> is the name of the JAR file in which the session bean is deployed. The default name of the JAR file is its file name without the <code class="literal">.jar</code> suffix. The module name can be overridden in the JAR’s <code class="literal">ejb-jar.xml</code> file.
					</li><li class="listitem">
						<code class="literal">&lt;distinctName&gt;</code>: JBoss EAP allows each deployment to specify an optional distinct name. If the deployment does not have a distinct name, then leave the <code class="literal">distinctName</code> blank.
					</li><li class="listitem">
						<code class="literal">&lt;beanName&gt;</code>: The <code class="literal">beanName</code> is the simple class name of the session bean to be invoked.
					</li><li class="listitem">
						<code class="literal">&lt;viewClassName&gt;</code>: The <code class="literal">viewClassName</code> is the fully qualified class name of the remote interface. This includes the package name of the interface.
					</li><li class="listitem">
						<code class="literal">?stateful</code>: The <code class="literal">?stateful</code> suffix is required when the JNDI name refers to a stateful session bean. It is not included for other bean types.
					</li></ul></div><p>
				For example, if we deployed <code class="literal">hello.jar</code> having a stateful bean <code class="literal">org.jboss.example.HelloBean</code> that exposed a remote interface <code class="literal">org.jboss.example.Hello</code>, then the JNDI lookup name would be:
			</p><pre class="screen">ejb:/hello/HelloBean!org.jboss.example.Hello?stateful"</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ejb_reference_resolution"/>EJB Reference Resolution</h1></div></div></div><p>
				This section covers how JBoss EAP implements <code class="literal">@EJB</code> and <code class="literal">@Resource</code>. Please note that XML always overrides annotations but the same rules apply.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Rules for the @EJB annotation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									The <code class="literal">@EJB</code> annotation also has a <code class="literal">mappedName()</code> attribute. The specification leaves this as vendor specific metadata, but JBoss EAP recognizes <code class="literal">mappedName()</code> as the global JNDI name of the EJB you are referencing. If you have specified a <code class="literal">mappedName()</code>, then all other attributes are ignored and this global JNDI name is used for binding.
								</li><li class="listitem"><p class="simpara">
									If you specify <code class="literal">@EJB</code> with no attributes defined:
								</p><pre class="programlisting">@EJB
ProcessPayment myEjbref;</pre><p class="simpara">
									Then the following rules apply:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											The EJB JAR of the referencing bean is searched for an EJB with the interface used in the <code class="literal">@EJB</code> injection. If there are more than one EJB that publishes same business interface, then an exception is thrown. If there is only one bean with that interface then that one is used.
										</li><li class="listitem">
											Search the EAR for EJBs that publish that interface. If there are duplicates, then an exception is thrown. Otherwise the matching bean is returned.
										</li><li class="listitem">
											Search globally in JBoss EAP runtime for an EJB of that interface. Again, if duplicates are found, an exception is thrown.
										</li></ul></div></li><li class="listitem">
									<code class="literal">@EJB.beanName()</code> corresponds to <code class="literal">&lt;ejb-link&gt;</code>. If the <code class="literal">beanName()</code> is defined, then use the same algorithm as <code class="literal">@EJB</code> with no attributes defined except use the <code class="literal">beanName()</code> as a key in the search. An exception to this rule is if you use the ejb-link <span class="strong"><strong>#</strong></span> syntax: it allows you to put a relative path to a JAR in the EAR where the EJB you are referencing is located. Refer to the EJB 3.2 specification for more details.
								</li></ul></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="project_dependencies_for_remote_ejb_clients"/>Project Dependencies for Remote EJB Clients</h1></div></div></div><p>
				Maven projects that include the invocation of session beans from remote clients require the following dependencies from the JBoss EAP Maven repository. There are two ways to declare EJB client dependencies, as described in the sub-sections below.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The <code class="literal">artifactId</code> versions are subject to change. See the <a class="link" href="https://maven.repository.redhat.com/ga/">JBoss EAP Maven Repository</a> for the latest versions.
				</p></div><h3><a id="maven_dependencies_for_remote_ejb_clients"/>Maven Dependencies for Remote EJB Clients</h3><p>
				The <code class="literal">jboss-eap-javaee8</code> Bill of Materials (BOM) packages the correct version of many of the artifacts commonly required by a JBoss EAP application. The BOM dependency is specified in the <code class="literal">&lt;dependencyManagement&gt;</code> section of the <code class="literal">pom.xml</code> with the scope of <code class="literal">import</code>.
			</p><div class="title"><strong>Example: POM File <code class="literal">&lt;dependencyManagement&gt;</code> Section</strong></div><p>
					
</p><pre class="programlisting">&lt;dependencyManagement&gt;
   &lt;dependencies&gt;
      &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.bom&lt;/groupId&gt;
        &lt;artifactId&gt;jboss-eap-javaee8&lt;/artifactId&gt;
        &lt;version&gt;7.2.0.GA&lt;/version&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;scope&gt;import&lt;/scope&gt;
      &lt;/dependency&gt;
   &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</pre><p>

				</p><p>
				The remaining dependencies are specified in the <code class="literal">&lt;dependencies&gt;</code> section of the <code class="literal">pom.xml</code> file.
			</p><div class="title"><strong>Example: POM File <code class="literal">&lt;dependencies&gt;</code> Section</strong></div><p>
					
</p><pre class="programlisting">&lt;dependencies&gt;
    &lt;!-- Include the EJB client JARs --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.eap&lt;/groupId&gt;
        &lt;artifactId&gt;wildfly-ejb-client-bom&lt;/artifactId&gt;
        &lt;type&gt;pom&lt;/type&gt;
    &lt;/dependency&gt;

    &lt;!-- Include any additional dependencies required by the application
        ...
    --&gt;

&lt;/dependencies&gt;</pre><p>

				</p><p>
				The <code class="literal">ejb-remote</code> quickstart that ships with JBoss EAP provides a complete working example of remote EJB client application. See the <code class="literal">client/pom.xml</code> file located in root directory of that quickstart for a complete example of dependency configuration for remote session bean invocation.
			</p><h3><a id="single_artifactid_for_jboss_ejb_client_dependencies"/>Single artifactID for jboss-ejb-client Dependencies</h3><p>
				You can use the <code class="literal">wildfly-ejb-client-bom</code> <code class="literal">artifactID</code> and add the <code class="literal">jboss-ejb-client</code> library to include all the required dependencies for EJB clients:
			</p><pre class="programlisting">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.eap&lt;/groupId&gt;
            &lt;artifactId&gt;wildfly-ejb-client-bom&lt;/artifactId&gt;
            &lt;version&gt;<span class="emphasis"><em>EJB_CLIENT_BOM_VERSION</em></span>&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss&lt;/groupId&gt;
        &lt;artifactId&gt;jboss-ejb-client&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</pre><p>
				You must use the <span class="emphasis"><em>EJB_CLIENT_BOM_VERSION</em></span> that is available in the JBoss EAP Maven repository.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jboss_ejb3_xml_deployment_descriptor_reference"/>jboss-ejb3.xml Deployment Descriptor Reference</h1></div></div></div><p>
				<code class="literal">jboss-ejb3.xml</code> is a custom deployment descriptor that can be used in either EJB JAR or WAR archives. In an EJB JAR archive it must be located in the <code class="literal">META-INF/</code> directory. In a WAR archive it must be located in the <code class="literal">WEB-INF/</code> directory.
			</p><p>
				The format is similar to <code class="literal">ejb-jar.xml</code>, using some of the same namespaces and providing some other additional namespaces. The contents of <code class="literal">jboss-ejb3.xml</code> are merged with the contents of <code class="literal">ejb-jar.xml</code>, with the <code class="literal">jboss-ejb3.xml</code> items taking precedence.
			</p><p>
				This document only covers the additional non-standard namespaces used by <code class="literal">jboss-ejb3.xml</code>. See <a class="link" href="http://java.sun.com/xml/ns/javaee/">http://java.sun.com/xml/ns/javaee/</a> for documentation on the standard namespaces.
			</p><p>
				The root namespace is <a class="link" href="http://www.jboss.com/xml/ns/javaee">http://www.jboss.com/xml/ns/javaee</a>.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Assembly descriptor namespaces</span></dt><dd>
							The following namespaces can all be used in the <code class="literal">&lt;assembly-descriptor&gt;</code> element. They can be used to apply their configuration to a single bean, or to all beans in the deployment by using a wildcard (<code class="literal">*</code>) as the <code class="literal">ejb-name</code>.
						</dd><dt><span class="term">The security namespace (<code class="literal">urn:security</code>)</span></dt><dd><pre class="programlisting">xmlns:s="urn:security"</pre><p class="simpara">
							This allows you to set the <code class="literal">security-domain</code> and the <code class="literal">run-as-principal</code> for an EJB.
						</p><pre class="programlisting">&lt;s:security&gt;
  &lt;ejb-name&gt;*&lt;/ejb-name&gt;
  &lt;s:security-domain&gt;myDomain&lt;/s:security-domain&gt;
  &lt;s:run-as-principal&gt;myPrincipal&lt;/s:run-as-principal&gt;
&lt;/s:security&gt;</pre></dd><dt><span class="term">The resource adapter namespace: <code class="literal">urn:resource-adapter-binding</code></span></dt><dd><pre class="programlisting">xmlns:r="urn:resource-adapter-binding"</pre><p class="simpara">
							This allows you to set the resource adapter for a Message-Driven Bean.
						</p><pre class="programlisting">&lt;r:resource-adapter-binding&gt;
  &lt;ejb-name&gt;*&lt;/ejb-name&gt;
  &lt;r:resource-adapter-name&gt;myResourceAdapter&lt;/r:resource-adapter-name&gt;
&lt;/r:resource-adapter-binding&gt;</pre></dd><dt><span class="term">The IIOP namespace: <code class="literal">urn:iiop</code></span></dt><dd><pre class="programlisting">xmlns:u="urn:iiop"</pre><p class="simpara">
							The IIOP namespace is where IIOP settings are configured.
						</p></dd><dt><span class="term">The pool namespace: <code class="literal">urn:ejb-pool:1.0</code></span></dt><dd><pre class="programlisting">xmlns:p="urn:ejb-pool:1.0"</pre><p class="simpara">
							This allows you to select the pool that is used by the included stateless session beans or Message-Driven Beans. Pools are defined in the server configuration.
						</p><pre class="programlisting">&lt;p:pool&gt;
   &lt;ejb-name&gt;*&lt;/ejb-name&gt;
   &lt;p:bean-instance-pool-ref&gt;my-pool&lt;/p:bean-instance-pool-ref&gt;
&lt;/p:pool&gt;</pre></dd><dt><span class="term">The cache namespace: <code class="literal">urn:ejb-cache:1.0</code></span></dt><dd><pre class="programlisting">xmlns:c="urn:ejb-cache:1.0"</pre><p class="simpara">
							This allows you to select the cache that is used by the included stateful session beans. Caches are defined in the server configuration.
						</p><pre class="programlisting">&lt;c:cache&gt;
   &lt;ejb-name&gt;*&lt;/ejb-name&gt;
   &lt;c:cache-ref&gt;my-cache&lt;/c:cache-ref&gt;
&lt;/c:cache&gt;</pre><pre class="programlisting">&lt;?xml version="1.1" encoding="UTF-8"?&gt;
&lt;jboss:ejb-jar xmlns:jboss="http://www.jboss.com/xml/ns/javaee"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-ejb3-2_0.xsd"
    version="3.1"
    impl-version="2.0"&gt;
  &lt;enterprise-beans&gt;
     &lt;message-driven&gt;
        &lt;ejb-name&gt;ReplyingMDB&lt;/ejb-name&gt;
        &lt;ejb-class&gt;org.jboss.as.test.integration.ejb.mdb.messagedestination.ReplyingMDB&lt;/ejb-class&gt;
        &lt;activation-config&gt;
           &lt;activation-config-property&gt;
              &lt;activation-config-property-name&gt;destination&lt;/activation-config-property-name&gt;
              &lt;activation-config-property-value&gt;java:jboss/mdbtest/messageDestinationQueue
              &lt;/activation-config-property-value&gt;
           &lt;/activation-config-property&gt;
        &lt;/activation-config&gt;
     &lt;/message-driven&gt;
  &lt;/enterprise-beans&gt;
 &lt;/jboss:ejb-jar&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								There are known issues with the <code class="literal">jboss-ejb3-spec-2_0.xsd</code> file that may result in schema validation errors. You can ignore these errors. For more information, see <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1192591">https://bugzilla.redhat.com/show_bug.cgi?id=1192591</a>.
							</p></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_ejb_thread_pool"/>Configure an EJB Thread Pool</h1></div></div></div><p>
				You can create an EJB thread pool using the management console or the management CLI.
			</p><h3><a id="configure_an_ejb_thread_pool_using_the_management_console"/>Configure an EJB Thread Pool Using the Management Console</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Log in to the management console.
					</li><li class="listitem">
						Navigate to <span class="strong"><strong>Configuration</strong></span> → <span class="strong"><strong>EJB</strong></span> and click <span class="strong"><strong>View</strong></span>.
					</li><li class="listitem">
						Select <span class="strong"><strong>Container</strong></span> → <span class="strong"><strong>Thread Pool</strong></span>.
					</li><li class="listitem">
						Click <span class="strong"><strong>Add</strong></span> and specify the <span class="strong"><strong>Name</strong></span> and <span class="strong"><strong>Max Threads</strong></span> values.
					</li><li class="listitem">
						Click <span class="strong"><strong>Save</strong></span>.
					</li></ol></div><h3><a id="configure_an_ejb_thread_pool_using_the_management_cli"/>Configure an EJB Thread Pool Using the Management CLI</h3><p>
				Use the <code class="literal">add</code> operation with the following syntax:
			</p><pre class="screen">/subsystem=ejb3/thread-pool=<span class="emphasis"><em>THREAD_POOL_NAME</em></span>:add(max-threads=<span class="emphasis"><em>MAX_SIZE</em></span>)</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Replace <code class="literal"><span class="emphasis"><em>THREAD_POOL_NAME</em></span></code> with the required name for the thread pool.
					</li><li class="listitem">
						Replace <code class="literal"><span class="emphasis"><em>MAX_SIZE</em></span></code> with the maximum size of the thread pool.
					</li></ul></div><p>
				Use the <code class="literal">read-resource</code> operation to confirm the creation of the bean pool:
			</p><pre class="screen">/subsystem=ejb3/thread-pool=<span class="emphasis"><em>THREAD_POOL_NAME</em></span>:read-resource</pre><p>
				To reconfigure all the services in the <code class="literal">ejb3</code> subsystem to use a new thread pool, use the following commands:
			</p><pre class="screen">/subsystem=ejb3/thread-pool=bigger:add(max-threads=100)
/subsystem=ejb3/service=async:write-attribute(name=thread-pool-name, value="bigger")
/subsystem=ejb3/service=remote:write-attribute(name=thread-pool-name, value="bigger")
/subsystem=ejb3/service=timer-service:write-attribute(name=thread-pool-name, value="bigger")
reload</pre><p>
				XML Configuration Sample:
			</p><pre class="programlisting">&lt;subsystem xmlns="urn:jboss:domain:ejb3:5.0"&gt;
    ...
    &lt;async thread-pool-name="bigger"/&gt;
    ...
    &lt;timer-service thread-pool-name="bigger" default-data-store="default-file-store"&gt;
    ...
    &lt;remote connector-ref="http-remoting-connector" thread-pool-name="bigger"/&gt;
    ...
    &lt;thread-pools&gt;
        &lt;thread-pool name="default"&gt;
            &lt;max-threads count="10"/&gt;
            &lt;keepalive-time time="100" unit="milliseconds"/&gt;
        &lt;/thread-pool&gt;
        &lt;thread-pool name="bigger"&gt;
            &lt;max-threads count="100"/&gt;
        &lt;/thread-pool&gt;
    &lt;/thread-pools&gt;
    ...</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					<code class="literal">keepalive-time</code> should not be used as it is not effective.
				</p></div><p>
				<br/><br/><br/><br/>
			</p><p>
				<span class="emphasis"><em><span class="right">Revised on 2019-05-02 08:51:42 UTC</span></em></span>
			</p></div></div></body></html>