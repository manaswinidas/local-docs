<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 7. Migrating JBoss EAP 7.0 Configurations to JBoss EAP 7.2</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2"/>Chapter 7. Migrating JBoss EAP 7.0 Configurations to JBoss EAP 7.2</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrating_a_jboss_eap_7_0_standalone_server_to_jboss_eap_7_2"/>Migrating a JBoss EAP 7.0 Standalone Server to JBoss EAP 7.2</h1></div></div></div><p>
				<a id="migrating_a_standalone_server_1_7.0"/>
			</p><p>
				By default, the JBoss Server Migration Tool performs the following tasks when migrating a standalone server configuration from JBoss EAP 7.0 to JBoss EAP 7.2.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Migration to JBoss EAP 7.2 from JBoss EAP 7.0 is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#remove_unsupported_subsystems_task_1_7.0">Remove any unsupported subsystems</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_referenced_modules_task_1_7.0">Migrate any referenced modules</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_referenced_paths_1_7.0">Migrate any referenced paths</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#update_infinispan_subsystem_task_1_7.0">Update the <code class="literal">infinispan</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#update_jgroups_subsystem_task_1_7.0">Update the <code class="literal">jgroups</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#update_undertow_subsystem_task_1_7.0">Update the <code class="literal">undertow</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_core_management_subsystem_task_1_7.0">Add the <code class="literal">core-management</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_discovery_subsystem_task_1_7.0">Add the <code class="literal">discovery</code> Subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_ee_security_subsystem_task_1_7.0">Add the <code class="literal">ee-security</code> Subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_elytron_subsystem_task_1_7.0">Add the <code class="literal">elytron</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_socket_binding_multicast_address_expressions_1_7.0">Add socket binding multicast address expressions</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_compatible_security_realms_task_1_7.0">Migrate compatible security realms</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_default_ssl_server_identity_1_7.0">Add the default SSL server identity to the <code class="literal">ApplicationRealm</code></a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployments_task_1_7.0">Migrate deployments</a>.
					</li></ul></div><p>
				<a id="remove_unsupported_subsystems_task_1_7.0"/>
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="remove_unsupported_subsystems_3"/>Remove Unsupported Subsystems</h2></div></div></div><p>
					The JBoss Server Migration Tool removes all unsupported subsystem configurations and extensions from migrated server configurations. The tool logs each subsystem and extension to its log file and to the console as it is removed.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">NOTE</span></dt><dd>
								Any subsystem that was not supported in JBoss EAP 7.0, but was added by an administrator to that server, is also not supported in JBoss EAP 7.2 and will be removed.
							</dd></dl></div><p>
					To skip removal of the unsupported subsystems, set the <code class="literal">subsystems.remove-unsupported-subsystems.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					You can override the default behavior of the JBoss Server Migration Tool and specify which subsystems and extensions should be included or excluded during the migration using the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">extensions.excludes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of module names of extensions that should never be migrated, for example, <code class="literal">com.example.extension1,com.example.extension3</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">extensions.includes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of module names of extensions that should always be migrated, for example, <code class="literal">com.example.extension2,com.example.extension4</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">subsystems.excludes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of subsystem namespaces, stripped of the version, that should never be migrated, for example, <code class="literal">urn:jboss:domain:logging, urn:jboss:domain:ejb3</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">subsystems.includes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of subsystem namespaces, stripped of the version, that should always be migrated, for example, <code class="literal">urn:jboss:domain:security, urn:jboss:domain:ee</code>.
								</p>
								 </td></tr></tbody></table></div><p>
					<a id="migrate_referenced_modules_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_referenced_modules_4"/>Migrate Referenced Modules</h2></div></div></div><p>
					A configuration that is migrated from a source server to a target server might reference or depend on a module that is not installed on the target server. The JBoss Server Migration Tool detects this and automatically migrates the referenced modules, plus their dependent modules, from the source server to the target server.
				</p><p>
					A module referenced by a standalone server configuration is migrated using the following process.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							A module referenced by a security realm configuration is migrated as a plug-in module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">datasource</code> subsystem configuration is migrated as a datasource driver module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">ee</code> subsystem configuration is migrated as a global module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">naming</code> subsystem configuration is migrated as an object factory module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">messaging</code> subsystem configuration is migrated as a JMS bridge module.
						</li><li class="listitem">
							A module referenced by a vault configuration is migrated to the new configuration.
						</li><li class="listitem">
							Any extension that is not installed on the target configuration is migrated to the target server configuration.
						</li></ul></div><p>
					The console logs a message noting the module ID for any module that is migrated. It is possible to exclude the migration of specific modules by specifying the module ID in the <code class="literal">modules.excludes</code> environment property. See <a class="link" href="configuring_the_migration_tool.html#configuring_modules_migration" title="Configuring Modules Migration">Configuring the Migration of Modules</a> for more information.
				</p><p>
					<a id="migrate_referenced_paths_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_referenced_paths_4"/>Migrate Referenced Paths</h2></div></div></div><p>
					A configuration that is migrated from a source server to a target server might reference or depend on file paths and directories that must also be migrated to the target server. The JBoss Server Migration Tool does not migrate absolute path references. It only migrates files or directories that are configured as relative to the source configuration. The console logs a message noting each path that is migrated.
				</p><p>
					The JBoss Server Migration Tool automatically migrates the following path references:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Vault keystore and encrypted file’s directory.
						</li></ul></div><p>
					To skip the migration of referenced paths, set the <code class="literal">paths.migrate-paths-requested-by-configuration.vault.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="update_infinispan_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="update_the_infinispan_subsystem_3"/>Update the Infinispan Subsystem</h2></div></div></div><p>
					The JBoss Server Migration Tool updates the <code class="literal">infinispan</code> subsystem configuration to better align with the default JBoss EAP 7.2 configurations.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							It updates the module name in the Hibernate cache container configuration.
						</li><li class="listitem">
							It adds the concurrent cache to the web cache container, which is present in the JBoss EAP 7.2 default configuration.
						</li></ul></div><p>
					The JBoss Server Migration Tool automatically updates the <code class="literal">infinispan</code> subsystem configuration and logs the results to its log file and to the console.
				</p><p>
					You can customize the update of the <code class="literal">infinispan</code> system by setting the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									subsystem.infinispan.update.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, skip the update of the <code class="literal">infinispan</code> subsystem.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.infinispan.update.fix-hibernate-cache-module-name.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not update the module name in the Hibernate cache container configuration.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.infinispan.update-infinispan-web-cache
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not add the concurrent cache to the web cache container configuration.
								</p>
								 </td></tr></tbody></table></div><p>
					<a id="update_jgroups_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="update_the_jgroups_subsystem_3"/>Update the JGroups Subsystem</h2></div></div></div><p>
					The JBoss Server Migration Tool updates the <code class="literal">jgroups</code> subsystem to align with the JBoss EAP 7.2 configurations.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							It replaces the <code class="literal">FRAG2</code> protocol with the <code class="literal">FRAG3</code> protocol.
						</li></ul></div><p>
					Upon successful migration of the <code class="literal">jgroups</code> subsystem configuration, the JBoss Server Migration Tool logs the results to its log file and to the console.
				</p><pre class="screen"> INFO  Subsystem jgroups updated.</pre><p>
					To skip the automatic migration of the <code class="literal">jgroups</code> subsystem, set the <code class="literal">subsystem.jgroups.update.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="update_undertow_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="update_the_undertow_subsystem_3"/>Update the Undertow Subsystem</h2></div></div></div><p>
					In addition to migrating the <code class="literal">web</code> subsystem for JBoss EAP 7.2, the JBoss Server Migration Tool updates its replacement <code class="literal">undertow</code> subsystem to add the features it supports.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							It sets the default HTTPS listener.
						</li><li class="listitem">
							It adds support for HTTP2.
						</li><li class="listitem">
							It removes the <code class="literal">Server</code> response header.
						</li><li class="listitem">
							It removes the <code class="literal">X-Powered-By</code> response header.
						</li><li class="listitem">
							It sets the default HTTP <code class="literal">Invoker</code>.
						</li></ul></div><p>
					The JBoss Server Migration Tool automatically updates the <code class="literal">undertow</code> subsystem configuration and logs the results to its log file and to the console.
				</p><p>
					Upon successful migration of the <code class="literal">undertow</code> subsystem configuration, the JBoss Server Migration Tool logs the results to its log file and to the console.
				</p><pre class="screen"> INFO  Subsystem undertow updated.</pre><p>
					You can customize the update of the <code class="literal">undertow</code> system by setting the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, skip the update of the <code class="literal">undertow</code> subsystem.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-undertow-https-listener.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default HTTPS listener.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.enable-http2.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not add support for HTTP2.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-response-header.server-header.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default <code class="literal">Server</code> response header.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-response-header.x-powered-by-header.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default <code class="literal">X-Powered-By</code> response header.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-http-invoker.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default HTTP <code class="literal">Invoker</code>.
								</p>
								 </td></tr></tbody></table></div><p>
					<a id="add_core_management_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_core_management_subsystem_4"/>Add the Core Management Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">core-management</code> subsystem provides management-related resources, which were previously configured in the management core service. Examples of these resources include the ability to view a history of configuration changes made to the server and the ability to monitor for server lifecycle events. The JBoss Server Migration Tool automatically adds the default <code class="literal">core-management</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">core-management</code> subsystem configuration, set the <code class="literal">subsystem.core-management.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_discovery_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_discovery_subsystem_3"/>Add the Discovery Subsystem</h2></div></div></div><p>
					The JBoss Server Migration Tool automatically adds the default <code class="literal">discovery</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">discovery</code> subsystem configuration, set the <code class="literal">subsystem.discovery.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_ee_security_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_ee_security_subsystem_3"/>Add the EE Security Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">ee-security</code> subsystem provides support for <a class="link" href="https://jcp.org/en/jsr/detail?id=375">JSR 375</a> and compliance for Java EE 8 security. The JBoss Server Migration Tool automatically adds the default <code class="literal">ee-security</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">ee-security</code> subsystem configuration, set the <code class="literal">subsystem.ee-security.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_elytron_subsystem_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_elytron_subsystem_4"/>Add the Elytron Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">elytron</code> subsystem provides a single unified security framework that can manage and configure access for both standalone servers and managed domains. It can also be used to configure security access for applications deployed to JBoss EAP servers. The JBoss Server Migration Tool automatically adds the default <code class="literal">elytron</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">elytron</code> subsystem configuration, set the <code class="literal">subsystem.elytron.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_socket_binding_multicast_address_expressions_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_socket_binding_multicast_address_expressions_3"/>Add Socket Binding Multicast Address Expressions</h2></div></div></div><p>
					The JBoss EAP 7.2 default configuration uses value expressions in the <code class="literal">multicast-address</code> attribute of mod_cluster socket bindings. The JBoss Server Migration Tool automatically adds these value expressions to the migrated configuration files.
				</p><p>
					To skip the addition of these expressions, set the <code class="literal">socket-bindings.multicast-address.add-expressions.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="migrate_compatible_security_realms_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_compatible_security_realms_3"/>Migrate Compatible Security Realms</h2></div></div></div><p>
					Because the JBoss EAP 7.2 security realm configurations are fully compatible with the JBoss EAP 7.0 security realm configurations, they require no update by the JBoss Server Migration Tool. However, if the <code class="literal">application-users.properties</code>, <code class="literal">application-roles.properties</code>, <code class="literal">mgmt-users.properties</code>, and <code class="literal">mgmt-groups.properties</code> files are not referenced using an absolute path, the tool copies them to the path expected by the migrated configuration file.
				</p><p>
					To skip the security realms migration, set the <code class="literal">security-realms.migrate-properties.skip environment</code> property to <code class="literal">true</code>.
				</p><p>
					<a id="add_default_ssl_server_identity_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_default_ssl_server_identity_to_the_applicationrealm_3"/>Add the Default SSL Server Identity to the ApplicationRealm</h2></div></div></div><p>
					The JBoss EAP 7.2 default configuration includes an SSL server identity for the default <code class="literal">ApplicationRealm</code> security realm. The JBoss Server Migration Tool automatically adds this identity to the migrated configuration files.
				</p><p>
					To skip the addition of this identity, set the <code class="literal">security-realm.ApplicationRealm.add-ssl-server-identity.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="migrate_deployments_task_1_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_deployments_3"/>Migrate Deployments</h2></div></div></div><p>
					The JBoss Server Migration Tool can migrate the following types of standalone server deployment configurations.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Deployments it references, also known as <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_persistent_deployments_task_1_7.0">persistent deployments</a>.
						</li><li class="listitem">
							Deployments found in directories monitored by its <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployment_scanner_task_1_7.0">deployment scanners</a>.
						</li><li class="listitem">
							<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployment_overlays_task_1_7.0">Deployment overlays</a> it references.
						</li></ul></div><p>
					The migration of a deployment consists of installing related file resources on the target server, and possibly updating the migrated configuration.
				</p><p>
					The JBoss Server Migration Tool is preconfigured to skip deployments by default when running in non-interactive mode. To enable migration of deployments, set the <code class="literal">deployments.migrate-deployments.skip</code> environment property to <code class="literal">false</code>.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Be aware that when you run the JBoss Server Migration Tool in interactive mode and enter invalid input, the resulting behavior depends on the value of the <code class="literal">deployments.migrate-deployments</code> environment property.
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								If <code class="literal">deployments.migrate-deployments.skip</code> is set to <code class="literal">false</code> and you enter invalid input, the tool will try to migrate the deployments.
							</li><li class="listitem">
								If <code class="literal">deployments.migrate-deployments.skip</code> is set to <code class="literal">true</code> and you enter invalid input, the tool will skip the deployments migration.
							</li></ul></div></div><p>
					To enable the migration of specific types of deployments, see the following sections.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						The JBoss Server Migration Tool does not determine whether deployed resources are compatible with the target server. This means that applications or resources might not deploy, might not work as expected, or might not work at all. Also be aware that artifacts such as JBoss EAP 6.4 <code class="literal">*-jms.xml</code> configuration files are copied without modification and can cause the JBoss EAP server to boot with errors.
					</p><p>
						Red Hat recommends that you use the Red Hat Application Migration Toolkit to analyze deployments to determine compatibility among different JBoss EAP servers. For more information, see the Red Hat Application Migration Toolkit <a class="link" href="https://access.redhat.com/documentation/en/red-hat-application-migration-toolkit/">product documentation</a>.
					</p></div><p>
					<a id="migrate_persistent_deployments_task_1_7.0"/>
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="migrate_persistent_deployments_3"/>Migrate Persistent Deployments</h3></div></div></div><p>
						To enable migration of persistent deployments when running in non-interactive mode, set the <code class="literal">deployments.migrate-persistent-deployments.skip</code> environment property to <code class="literal">false</code>.
					</p><p>
						The JBoss Server Migration Tool searches for any persistent deployment references and lists them to the console.
					</p><pre class="screen">INFO  [ServerMigrationTask#67] Persistent deployments found: [cmtool-helloworld3.war, cmtool-helloworld4.war, cmtool-helloworld2.war, cmtool-helloworld1.war]</pre><p>
						The processing workflow then depends on whether you are running the tool in <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_persistent_deployments_interactive_task_1_7.0">interactive mode</a> or in <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_persistent_deployments_non_interactive_task_1_7.0">non-interactive mode</a>, as described below.
					</p><p>
						<a id="migrate_persistent_deployments_non_interactive_task_1_7.0"/>
					</p><div class="title"><strong>Migrating Persistent Deployments in Non-interactive Mode</strong></div><p>
							If you run the tool in non-interactive mode, the tool uses the preconfigured properties to determine whether to migrate the persistent deployments. Persistent deployments are migrated only if both the <code class="literal">deployments.migrate-deployments.skip</code> and <code class="literal">deployments.migrate-persistent-deployments.skip</code> properties are set to <code class="literal">false</code>.
						</p><p>
						<a id="migrate_persistent_deployments_interactive_task_1_7.0"/>
					</p><div class="title"><strong>Migrating Persistent Deployments in Interactive Mode</strong></div><p>
							If you run the tool in interactive mode, the JBoss Server Migration Tool prompts you for each deployment using the following workflow.
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								After printing the persistent deployments it finds to the console, you see the following prompt.
							</p><pre class="screen">This tool is not able to assert if persistent deployments found are compatible with the target server, skip persistent deployments migration?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to skip migration of persistent deployments. All deployment references are removed from the migrated configuration and you end this part of the migration process.
									</li><li class="listitem">
										Respond with <code class="literal">no</code> to continue with the migration.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you choose to continue, you see the following prompt.
							</p><pre class="screen">Migrate all persistent deployments found?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to automatically migrate all deployments and end this part of the migration process.
									</li><li class="listitem">
										Respond with <code class="literal">no</code> to continue with the migration.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you choose to continue, you receive a prompt asking to confirm the migration for each referenced deployment.
							</p><pre class="screen">Migrate persistent deployment 'helloworld01.war'?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to migrate the deployment.
									</li><li class="listitem"><p class="simpara">
										Respond with <code class="literal">no</code> to remove the deployment from the migrated configuration.
									</p><pre class="screen">INFO  [ServerMigrationTask#68] Removed persistent deployment from configuration /deployment=helloworld01.war</pre></li></ul></div></li></ol></div><p>
						<a id="migrate_deployment_scanner_task_1_7.0"/>
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="migrate_deployment_scanner_deployments_2"/>Migrate Deployment Scanner Deployments</h3></div></div></div><p>
						Deployment scanners, which are only used in standalone server configurations, monitor a directory for new files and manage their deployment automatically or through special deployment marker files.
					</p><p>
						To enable migration of deployments that are located in directories watched by a deployment scanner when running in non-interactive mode, set the <code class="literal">deployments.migrate-deployment-scanner-deployments.skip</code> environment property to <code class="literal">false</code>.
					</p><p>
						When migrating a standalone server configuration, the JBoss Server Migration Tool first searches for any configured deployment scanners. For each scanner found, it searches its monitored directories for deployments marked as deployed and prints the results to the console.
					</p><p>
						The processing workflow then depends on whether you are running the tool in <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployment_scanner_deployments_interactive_task_1_7.0">interactive mode</a> or in <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployment_scanner_deployments_non_interactive_task_1_7.0">non-interactive mode</a>, as described below.
					</p><p>
						<a id="migrate_deployment_scanner_deployments_non_interactive_task_1_7.0"/>
					</p><div class="title"><strong>Migrating Deployment Scanner Deployments in Non-interactive Mode</strong></div><p>
							If you run the tool in non-interactive mode, the tool uses the preconfigured properties to determine whether to migrate the deployment scanner deployments. Deployment scanner deployments are migrated only if both the <code class="literal">deployments.migrate-deployments.skip</code> and <code class="literal">deployments.migrate-deployment-scanner-deployments.skip</code> properties are set to <code class="literal">false</code>.
						</p><p>
						<a id="migrate_deployment_scanner_deployments_interactive_task_1_7.0"/>
					</p><div class="title"><strong>Migrating Deployment Scanner Deployments in Interactive Mode</strong></div><p>
							If you run the tool in interactive mode, the JBoss Server Migration Tool prompts you for each deployment using the following workflow.
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								After printing the deployment scanner deployments it finds to the console, you see the following prompt.
							</p><pre class="screen">This tool is not able to assert if the scanner's deployments found are compatible with the target server, skip scanner's deployments migration?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to skip migration of deployment scanner deployments. All deployment references are removed from the migrated configuration and you end this part of the migration process.
									</li><li class="listitem">
										Respond with <code class="literal">no</code> to continue with the migration.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you choose to continue, you see the following prompt.
							</p><pre class="screen">Migrate all scanner's deployments found?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to automatically migrate all deployments and end this part of the migration process.
									</li><li class="listitem">
										Respond with <code class="literal">no</code> to continue with the migration.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you choose to continue, you receive a prompt asking to confirm the migration for each referenced deployment.
							</p><pre class="screen">Migrate scanner's deployment 'helloworld02.war'?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to migrate the deployment.
									</li><li class="listitem"><p class="simpara">
										Respond with <code class="literal">no</code> to remove the deployment from the migrated configuration.
									</p><pre class="screen">INFO  [ServerMigrationTask#69] Resource with path <span class="emphasis"><em>EAP_HOME</em></span>/standalone/deployments/helloworld02.war migrated.</pre></li></ul></div></li></ol></div><p>
						<a id="migrate_deployment_overlays_task_1_7.0"/>
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="migrate_deployment_overlays_3"/>Migrate Deployment Overlays</h3></div></div></div><p>
						The migration of deployment overlays is a fully automated process. If you have enabled migration of deployments by setting the <code class="literal">deployments.migrate-deployments.skip</code> environment property to <code class="literal">false</code>, the JBoss Server Migration Tool searches for deployment overlays referenced in the standalone server configuration that are linked to migrated deployments. It automatically migrates those that are found, removes those that are not referenced, and logs the results to its log file and to the console.
					</p><p>
						<a id="migrating_managed_domain2_7.0"/>
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrating_a_jboss_eap_7_0_managed_domain_to_jboss_eap_7_2"/>Migrating a JBoss EAP 7.0 Managed Domain to JBoss EAP 7.2</h1></div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
					When you use the JBoss Server Migration Tool to migrate a domain controller to a new release of JBoss EAP, it can cause the hosts that connect to it, but still run on a previous release of the server, to fail to boot. For this reason, you should migrate your hosts before you migrate your domain controller. If you do not want to migrate your hosts, be sure to read the following information before you begin.
				</p><p>
					Review <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/domain_management#configure_eap71_administer_eap70">Configure a JBoss EAP 7.1 Domain Controller to Administer JBoss EAP 7.0 Instances</a> in the <span class="emphasis"><em>Configuration Guide</em></span> for JBoss EAP. Pay particular attention to the section entitled <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#prevent_eap70_servers_from_eap71_updates">Prevent the JBoss EAP 7.0 Instances from Receiving JBoss EAP 7.1 Updates</a>.
				</p><p>
					For additional information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#managing_multiple_jboss_eap_versions">Managing Multiple JBoss EAP Versions</a> in the <span class="emphasis"><em>Configuration Guide</em></span> for JBoss EAP.
				</p></div><p>
				By default, the JBoss Server Migration Tool performs the following tasks when migrating a managed domain configuration from JBoss EAP 7.0 to JBoss EAP 7.2.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Migration to JBoss EAP 7.2 from JBoss EAP 7.0 is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#remove_unsupported_subsystems_task_2_7.0">Remove any unsupported subsystems</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_referenced_modules_task_2_7.0">Migrate any referenced modules</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_referenced_paths_2_7.0">Migrate any referenced paths</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#update_infinispan_subsystem_task_2_7.0">Update the <code class="literal">infinispan</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#update_jgroups_subsystem_task_2_7.0">Update the <code class="literal">jgroups</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#update_undertow_subsystem_task_2_7.0">Update the <code class="literal">undertow</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_core_management_subsystem_task_2_7.0">Add the <code class="literal">core-management</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_discovery_subsystem_task_2_7.0">Add the <code class="literal">discovery</code> Subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_ee_security_subsystem_task_2_7.0">Add the <code class="literal">ee-security</code> Subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_elytron_subsystem_task_2_7.0">Add the <code class="literal">elytron</code> Subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_socket_binding_multicast_address_expressions_2_7.0">Add socket binding multicast address expressions</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_load_balancer_profile_2_7.0">Add the load balancer profile</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_host_excludes_2_7.0">Add the host excludes configuration</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployments_task_2_7.0">Migrate deployments</a>.
					</li></ul></div><p>
				<a id="remove_unsupported_subsystems_task_2_7.0"/>
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="remove_unsupported_subsystems_4"/>Remove Unsupported Subsystems</h2></div></div></div><p>
					The JBoss Server Migration Tool removes all unsupported subsystem configurations and extensions from migrated server configurations. The tool logs each subsystem and extension to its log file and to the console as it is removed.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">NOTE</span></dt><dd>
								Any subsystem that was not supported in JBoss EAP 7.0, but was added by an administrator to that server, is also not supported in JBoss EAP 7.2 and will be removed.
							</dd></dl></div><p>
					To skip removal of the unsupported subsystems, set the <code class="literal">subsystems.remove-unsupported-subsystems.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					You can override the default behavior of the JBoss Server Migration Tool and specify which subsystems and extensions should be included or excluded during the migration using the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">extensions.excludes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of module names of extensions that should never be migrated, for example, <code class="literal">com.example.extension1,com.example.extension3</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">extensions.includes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of module names of extensions that should always be migrated, for example, <code class="literal">com.example.extension2,com.example.extension4</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">subsystems.excludes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of subsystem namespaces, stripped of the version, that should never be migrated, for example, <code class="literal">urn:jboss:domain:logging, urn:jboss:domain:ejb3</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">subsystems.includes</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of subsystem namespaces, stripped of the version, that should always be migrated, for example, <code class="literal">urn:jboss:domain:security, urn:jboss:domain:ee</code>.
								</p>
								 </td></tr></tbody></table></div><p>
					<a id="migrate_referenced_modules_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_referenced_modules_5"/>Migrate Referenced Modules</h2></div></div></div><p>
					A configuration that is migrated from a source server to a target server might reference or depend on a module that is not installed on the target server. The JBoss Server Migration Tool detects this and automatically migrates the referenced modules, plus their dependent modules, from the source server to the target server.
				</p><p>
					A module referenced by a managed domain configuration is migrated using the following process.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							A module referenced by a security realm configuration is migrated as a plug-in module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">datasource</code> subsystem configuration is migrated as a datasource driver module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">ee</code> subsystem configuration is migrated as a global module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">naming</code> subsystem configuration is migrated as an object factory module.
						</li><li class="listitem">
							A module referenced by the <code class="literal">messaging</code> subsystem configuration is migrated as a JMS bridge module.
						</li><li class="listitem">
							A module referenced by a vault configuration is migrated to the new configuration.
						</li><li class="listitem">
							Any extension that is not installed on the target configuration is migrated to the target server configuration.
						</li></ul></div><p>
					The console logs a message noting the module ID for any module that is migrated. It is possible to exclude the migration of specific modules by specifying the module ID in the <code class="literal">modules.excludes</code> environment property. See <a class="link" href="configuring_the_migration_tool.html#configuring_modules_migration" title="Configuring Modules Migration">Configuring the Migration of Modules</a> for more information.
				</p><p>
					<a id="migrate_referenced_paths_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_referenced_paths_5"/>Migrate Referenced Paths</h2></div></div></div><p>
					A configuration that is migrated from a source server to a target server might reference or depend on file paths and directories that must also be migrated to the target server. The JBoss Server Migration Tool does not migrate absolute path references. It only migrates files or directories that are configured as relative to the source configuration. The console logs a message noting each path that is migrated.
				</p><p>
					The JBoss Server Migration Tool automatically migrates the following path references:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Vault keystore and encrypted file’s directory.
						</li></ul></div><p>
					To skip the migration of referenced paths, set the <code class="literal">paths.migrate-paths-requested-by-configuration.vault.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="update_infinispan_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="update_the_infinispan_subsystem_4"/>Update the Infinispan Subsystem</h2></div></div></div><p>
					The JBoss Server Migration Tool updates the <code class="literal">infinispan</code> subsystem configuration to better align with the default JBoss EAP 7.2 configurations.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							It updates the module name in the Hibernate cache container configuration.
						</li><li class="listitem">
							It adds the concurrent cache to the web cache container, which is present in the JBoss EAP 7.2 default configuration.
						</li></ul></div><p>
					The JBoss Server Migration Tool automatically updates the <code class="literal">infinispan</code> subsystem configuration and logs the results to its log file and to the console.
				</p><p>
					You can customize the update of the <code class="literal">infinispan</code> system by setting the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									subsystem.infinispan.update.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, skip the update of the <code class="literal">infinispan</code> subsystem.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.infinispan.update.fix-hibernate-cache-module-name.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not update the module name in the Hibernate cache container configuration.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.infinispan.update-infinispan-web-cache
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not add the concurrent cache to the web cache container configuration.
								</p>
								 </td></tr></tbody></table></div><p>
					<a id="update_jgroups_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="update_the_jgroups_subsystem_4"/>Update the JGroups Subsystem</h2></div></div></div><p>
					The JBoss Server Migration Tool updates the <code class="literal">jgroups</code> subsystem to align with the JBoss EAP 7.2 configurations.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							It replaces the <code class="literal">FRAG2</code> protocol with the <code class="literal">FRAG3</code> protocol.
						</li></ul></div><p>
					Upon successful migration of the <code class="literal">jgroups</code> subsystem configuration, the JBoss Server Migration Tool logs the results to its log file and to the console.
				</p><pre class="screen"> INFO  Subsystem jgroups updated.</pre><p>
					To skip the automatic migration of the <code class="literal">jgroups</code> subsystem, set the <code class="literal">subsystem.jgroups.update.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="update_undertow_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="update_the_undertow_subsystem_4"/>Update the Undertow Subsystem</h2></div></div></div><p>
					In addition to migrating the <code class="literal">web</code> subsystem for JBoss EAP 7.2, the JBoss Server Migration Tool updates its replacement <code class="literal">undertow</code> subsystem to add the features it supports.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							It sets the default HTTPS listener.
						</li><li class="listitem">
							It adds support for HTTP2.
						</li><li class="listitem">
							It removes the <code class="literal">Server</code> response header.
						</li><li class="listitem">
							It removes the <code class="literal">X-Powered-By</code> response header.
						</li><li class="listitem">
							It sets the default HTTP <code class="literal">Invoker</code>.
						</li></ul></div><p>
					The JBoss Server Migration Tool automatically updates the <code class="literal">undertow</code> subsystem configuration and logs the results to its log file and to the console.
				</p><p>
					Upon successful migration of the <code class="literal">undertow</code> subsystem configuration, the JBoss Server Migration Tool logs the results to its log file and to the console.
				</p><pre class="screen"> INFO  Subsystem undertow updated.</pre><p>
					You can customize the update of the <code class="literal">undertow</code> system by setting the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, skip the update of the <code class="literal">undertow</code> subsystem.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-undertow-https-listener.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default HTTPS listener.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.enable-http2.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not add support for HTTP2.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-response-header.server-header.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default <code class="literal">Server</code> response header.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-response-header.x-powered-by-header.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default <code class="literal">X-Powered-By</code> response header.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subsystem.undertow.update.add-http-invoker.skip
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to <code class="literal">true</code>, do not set the default HTTP <code class="literal">Invoker</code>.
								</p>
								 </td></tr></tbody></table></div><p>
					<a id="add_core_management_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_core_management_subsystem_5"/>Add the Core Management Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">core-management</code> subsystem provides management-related resources, which were previously configured in the management core service. Examples of these resources include the ability to view a history of configuration changes made to the server and the ability to monitor for server lifecycle events. The JBoss Server Migration Tool automatically adds the default <code class="literal">core-management</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">core-management</code> subsystem configuration, set the <code class="literal">subsystem.core-management.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_discovery_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_discovery_subsystem_4"/>Add the Discovery Subsystem</h2></div></div></div><p>
					The JBoss Server Migration Tool automatically adds the default <code class="literal">discovery</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">discovery</code> subsystem configuration, set the <code class="literal">subsystem.discovery.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_ee_security_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_ee_security_subsystem_4"/>Add the EE Security Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">ee-security</code> subsystem provides support for <a class="link" href="https://jcp.org/en/jsr/detail?id=375">JSR 375</a> and compliance for Java EE 8 security. The JBoss Server Migration Tool automatically adds the default <code class="literal">ee-security</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">ee-security</code> subsystem configuration, set the <code class="literal">subsystem.ee-security.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_elytron_subsystem_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_elytron_subsystem_5"/>Add the Elytron Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">elytron</code> subsystem provides a single unified security framework that can manage and configure access for both standalone servers and managed domains. It can also be used to configure security access for applications deployed to JBoss EAP servers. The JBoss Server Migration Tool automatically adds the default <code class="literal">elytron</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">elytron</code> subsystem configuration, set the <code class="literal">subsystem.elytron.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_socket_binding_multicast_address_expressions_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_socket_binding_multicast_address_expressions_4"/>Add Socket Binding Multicast Address Expressions</h2></div></div></div><p>
					The JBoss EAP 7.2 default configuration uses value expressions in the <code class="literal">multicast-address</code> attribute of mod_cluster socket bindings. The JBoss Server Migration Tool automatically adds these value expressions to the migrated configuration files.
				</p><p>
					To skip the addition of these expressions, set the <code class="literal">socket-bindings.multicast-address.add-expressions.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_load_balancer_profile_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_load_balancer_profile_2"/>Add the Load Balancer Profile</h2></div></div></div><p>
					JBoss EAP 7.2 includes a default profile specifically tailored for hosts that serve as load balancers. The JBoss Server Migration Tool automatically adds and configures this profile to all migrated managed domain configurations.
				</p><p>
					To skip the addition of this profile, set the <code class="literal">profile.load-balancer.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_host_excludes_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_host_excludes_2"/>Add Host Excludes</h2></div></div></div><p>
					The JBoss EAP 7.2 domain controller can potentially include functionality that is not supported by hosts running on older versions of the server. The <code class="literal">host-exclude</code> configuration specifies the resources that should be hidden from those older versions.
				</p><p>
					When migrating a domain controller configuration, the JBoss Server Migration Tool adds to or replaces the source server’s <code class="literal">host-exclude</code> configuration with the configuration of the target JBoss EAP 7.2 server.
				</p><p>
					The JBoss Server Migration Tool automatically updates the <code class="literal">host-exclude</code> configuration and logs the results to its log file and to the console.
				</p><pre class="screen">  INFO  Host-excludes configuration added.</pre><p>
					<a id="migrate_deployments_task_2_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_deployments_4"/>Migrate Deployments</h2></div></div></div><p>
					The JBoss Server Migration Tool can migrate the following types of managed domain deployment configurations.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Deployments it references, also known as <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_persistent_deployments_task_2_7.0">persistent deployments</a>.
						</li><li class="listitem">
							<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_deployment_overlays_task_2_7.0">Deployment overlays</a> it references.
						</li></ul></div><p>
					The migration of a deployment consists of installing related file resources on the target server, and possibly updating the migrated configuration.
				</p><p>
					The JBoss Server Migration Tool is preconfigured to skip deployments by default when running in non-interactive mode. To enable migration of deployments, set the <code class="literal">deployments.migrate-deployments.skip</code> environment property to <code class="literal">false</code>.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Be aware that when you run the JBoss Server Migration Tool in interactive mode and enter invalid input, the resulting behavior depends on the value of the <code class="literal">deployments.migrate-deployments</code> environment property.
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								If <code class="literal">deployments.migrate-deployments.skip</code> is set to <code class="literal">false</code> and you enter invalid input, the tool will try to migrate the deployments.
							</li><li class="listitem">
								If <code class="literal">deployments.migrate-deployments.skip</code> is set to <code class="literal">true</code> and you enter invalid input, the tool will skip the deployments migration.
							</li></ul></div></div><p>
					To enable the migration of specific types of deployments, see the following sections.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						The JBoss Server Migration Tool does not determine whether deployed resources are compatible with the target server. This means that applications or resources might not deploy, might not work as expected, or might not work at all. Also be aware that artifacts such as JBoss EAP 6.4 <code class="literal">*-jms.xml</code> configuration files are copied without modification and can cause the JBoss EAP server to boot with errors.
					</p><p>
						Red Hat recommends that you use the Red Hat Application Migration Toolkit to analyze deployments to determine compatibility among different JBoss EAP servers. For more information, see the Red Hat Application Migration Toolkit <a class="link" href="https://access.redhat.com/documentation/en/red-hat-application-migration-toolkit/">product documentation</a>.
					</p></div><p>
					<a id="migrate_persistent_deployments_task_2_7.0"/>
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="migrate_persistent_deployments_4"/>Migrate Persistent Deployments</h3></div></div></div><p>
						To enable migration of persistent deployments when running in non-interactive mode, set the <code class="literal">deployments.migrate-persistent-deployments.skip</code> environment property to <code class="literal">false</code>.
					</p><p>
						The JBoss Server Migration Tool searches for any persistent deployment references and lists them to the console.
					</p><pre class="screen">INFO  [ServerMigrationTask#67] Persistent deployments found: [cmtool-helloworld3.war, cmtool-helloworld4.war, cmtool-helloworld2.war, cmtool-helloworld1.war]</pre><p>
						The processing workflow then depends on whether you are running the tool in <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_persistent_deployments_interactive_task_2_7.0">interactive mode</a> or in <a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_persistent_deployments_non_interactive_task_2_7.0">non-interactive mode</a>, as described below.
					</p><p>
						<a id="migrate_persistent_deployments_non_interactive_task_2_7.0"/>
					</p><div class="title"><strong>Migrating Persistent Deployments in Non-interactive Mode</strong></div><p>
							If you run the tool in non-interactive mode, the tool uses the preconfigured properties to determine whether to migrate the persistent deployments. Persistent deployments are migrated only if both the <code class="literal">deployments.migrate-deployments.skip</code> and <code class="literal">deployments.migrate-persistent-deployments.skip</code> properties are set to <code class="literal">false</code>.
						</p><p>
						<a id="migrate_persistent_deployments_interactive_task_2_7.0"/>
					</p><div class="title"><strong>Migrating Persistent Deployments in Interactive Mode</strong></div><p>
							If you run the tool in interactive mode, the JBoss Server Migration Tool prompts you for each deployment using the following workflow.
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								After printing the persistent deployments it finds to the console, you see the following prompt.
							</p><pre class="screen">This tool is not able to assert if persistent deployments found are compatible with the target server, skip persistent deployments migration?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to skip migration of persistent deployments. All deployment references are removed from the migrated configuration and you end this part of the migration process.
									</li><li class="listitem">
										Respond with <code class="literal">no</code> to continue with the migration.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you choose to continue, you see the following prompt.
							</p><pre class="screen">Migrate all persistent deployments found?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to automatically migrate all deployments and end this part of the migration process.
									</li><li class="listitem">
										Respond with <code class="literal">no</code> to continue with the migration.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you choose to continue, you receive a prompt asking to confirm the migration for each referenced deployment.
							</p><pre class="screen">Migrate persistent deployment 'helloworld01.war'?
yes/no?</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Respond with <code class="literal">yes</code> to migrate the deployment.
									</li><li class="listitem"><p class="simpara">
										Respond with <code class="literal">no</code> to remove the deployment from the migrated configuration.
									</p><pre class="screen">INFO  [ServerMigrationTask#68] Removed persistent deployment from configuration /deployment=helloworld01.war</pre></li></ul></div></li></ol></div><p>
						<a id="migrate_deployment_overlays_task_2_7.0"/>
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="migrate_deployment_overlays_4"/>Migrate Deployment Overlays</h3></div></div></div><p>
						The migration of deployment overlays is a fully automated process. If you have enabled migration of deployments by setting the <code class="literal">deployments.migrate-deployments.skip</code> environment property to <code class="literal">false</code>, the JBoss Server Migration Tool searches for deployment overlays referenced in the standalone server configuration that are linked to migrated deployments. It automatically migrates those that are found, removes those that are not referenced, and logs the results to its log file and to the console.
					</p><p>
						<a id="migrating_host_3_7.0"/>
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrating_a_jboss_eap_7_0_host_configuration_to_jboss_eap_7_2"/>Migrating a JBoss EAP 7.0 Host Configuration to JBoss EAP 7.2</h1></div></div></div><p>
				By default, the JBoss Server Migration Tool performs the following tasks when migrating a host server configuration from JBoss EAP 7.0 to JBoss EAP 7.2.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Migration to JBoss EAP 7.2 from JBoss EAP 7.0 is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_referenced_modules_task_3_7.0">Migrate any referenced modules</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_referenced_paths_3_7.0">Migrate any referenced paths</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_core_management_subsystem_task_3_7.0">Add the <code class="literal">core-management</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_elytron_subsystem_task_3_7.0">Add the <code class="literal">elytron</code> subsystem</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#migrate_compatible_security_realms_task_3_7.0">Migrate compatible security realms</a>.
					</li><li class="listitem">
						<a class="link" href="migrating_jboss_eap_7_0_configurations_to_jboss_eap_7_2.html#add_default_ssl_server_identity_3_7.0">Add the default SSL server identity to the <code class="literal">ApplicationRealm</code></a>.
					</li></ul></div><p>
				<a id="migrate_referenced_modules_task_3_7.0"/>
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_referenced_modules_6"/>Migrate Referenced Modules</h2></div></div></div><p>
					A configuration that is migrated from a source server to a target server might reference or depend on a module that is not installed on the target server. The JBoss Server Migration Tool detects this and automatically migrates the referenced modules, plus their dependent modules, from the source server to the target server.
				</p><p>
					A module referenced by a host server configuration is migrated using the following process.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							A module referenced by a security realm configuration is migrated as a plug-in module.
						</li></ul></div><p>
					The console logs a message noting the module ID for any module that is migrated. It is possible to exclude the migration of specific modules by specifying the module ID in the <code class="literal">modules.excludes</code> environment property. See <a class="link" href="configuring_the_migration_tool.html#configuring_modules_migration" title="Configuring Modules Migration">Configuring the Migration of Modules</a> for more information.
				</p><p>
					<a id="migrate_referenced_paths_3_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_referenced_paths_6"/>Migrate Referenced Paths</h2></div></div></div><p>
					A configuration that is migrated from a source server to a target server might reference or depend on file paths and directories that must also be migrated to the target server. The JBoss Server Migration Tool does not migrate absolute path references. It only migrates files or directories that are configured as relative to the source configuration. The console logs a message noting each path that is migrated.
				</p><p>
					The JBoss Server Migration Tool automatically migrates the following path references:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Vault keystore and encrypted file’s directory.
						</li></ul></div><p>
					To skip the migration of referenced paths, set the <code class="literal">paths.migrate-paths-requested-by-configuration.vault.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_core_management_subsystem_task_3_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_core_management_subsystem_6"/>Add the Core Management Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">core-management</code> subsystem provides management-related resources, which were previously configured in the management core service. Examples of these resources include the ability to view a history of configuration changes made to the server and the ability to monitor for server lifecycle events. The JBoss Server Migration Tool automatically adds the default <code class="literal">core-management</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">core-management</code> subsystem configuration, set the <code class="literal">subsystem.core-management.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="add_elytron_subsystem_task_3_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_elytron_subsystem_6"/>Add the Elytron Subsystem</h2></div></div></div><p>
					The JBoss EAP 7.2 <code class="literal">elytron</code> subsystem provides a single unified security framework that can manage and configure access for both standalone servers and managed domains. It can also be used to configure security access for applications deployed to JBoss EAP servers. The JBoss Server Migration Tool automatically adds the default <code class="literal">elytron</code> subsystem configuration to the migrated configuration file.
				</p><p>
					To skip the addition of the <code class="literal">elytron</code> subsystem configuration, set the <code class="literal">subsystem.elytron.add.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="migrate_compatible_security_realms_task_3_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate_compatible_security_realms_4"/>Migrate Compatible Security Realms</h2></div></div></div><p>
					Because the JBoss EAP 7.2 security realm configurations are fully compatible with the JBoss EAP 7.0 security realm configurations, they require no update by the JBoss Server Migration Tool. However, if the <code class="literal">application-users.properties</code>, <code class="literal">application-roles.properties</code>, <code class="literal">mgmt-users.properties</code>, and <code class="literal">mgmt-groups.properties</code> files are not referenced using an absolute path, the tool copies them to the path expected by the migrated configuration file.
				</p><p>
					To skip the security realms migration, set the <code class="literal">security-realms.migrate-properties.skip environment</code> property to <code class="literal">true</code>.
				</p><p>
					<a id="add_default_ssl_server_identity_3_7.0"/>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add_the_default_ssl_server_identity_to_the_applicationrealm_4"/>Add the Default SSL Server Identity to the ApplicationRealm</h2></div></div></div><p>
					The JBoss EAP 7.2 default configuration includes an SSL server identity for the default <code class="literal">ApplicationRealm</code> security realm. The JBoss Server Migration Tool automatically adds this identity to the migrated configuration files.
				</p><p>
					To skip the addition of this identity, set the <code class="literal">security-realm.ApplicationRealm.add-ssl-server-identity.skip</code> environment property to <code class="literal">true</code>.
				</p><p>
					<a id="migrating_a_7.1_server_configuration_to_7.2"/>
				</p></div></div></div></body></html>