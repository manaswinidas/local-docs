<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 3. Running the JBoss Server Migration Tool</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="running_the_server_migration_tool"/>Chapter 3. Running the JBoss Server Migration Tool</h1></div></div></div><p>
			You can run the JBoss Server Migration Tool in either of the following ways.
		</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
					<a class="link" href="running_the_server_migration_tool.html#migration_tool_server_run_interactive_mode" title="Run the JBoss Server Migration Tool in Interactive Mode">Interactive mode</a>: This mode, which is the default, allows you to choose exactly which configurations you want to migrate.
				</li><li class="listitem">
					<a class="link" href="running_the_server_migration_tool.html#migration_tool_server_run_noninteractive_mode" title="Run the JBoss Server Migration Tool in Non-interactive Mode">Non-interactive mode</a>: This mode allows you to run the tool without prompts.
				</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
				You must stop both the source and the target JBoss EAP servers before you run the JBoss Server Migration Tool.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migration_tool_server_run_interactive_mode"/>Run the JBoss Server Migration Tool in Interactive Mode</h1></div></div></div><p>
				By default, the JBoss Server Migration Tool runs interactively. This mode allows you to choose exactly which server configurations you want to migrate.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Interactive mode does not allow you to choose which subsystems to migrate. For information on how to configure the tool at the subsystem or task level, see <a class="link" href="configuring_the_migration_tool.html#configure_tasks_performed_by_the_tool" title="Configure the Migration Tasks Performed by the JBoss Server Migration Tool">Configure the Migration Tasks Performed by the JBoss Server Migration Tool</a>.
				</p></div><p>
				The following are the basic steps that are performed for a minimal migration. If the server from which you are migrating includes custom configurations, for example deployments, or if it is missing default resources, the tool provides additional prompts.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To run the tool in interactive mode, navigate to the target server installation directory and run the following command, providing the <code class="literal">source</code> argument as the path to the source server installation.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span></pre></li><li class="listitem"><p class="simpara">
						You are prompted to determine if you want to migrate the source server’s standalone configurations, which are located in the <code class="literal"><span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span>/standalone/configuration/</code> directory, to the target server’s standalone configurations, which are located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/</code> directory.
					</p><pre class="screen">Migrate the source's standalone server?
yes/no? yes</pre><p class="simpara">
						If you respond with <code class="literal">no</code>, standalone server migration is skipped and no standalone server configuration files are migrated.
					</p><p class="simpara">
						If you respond with <code class="literal">yes</code>, you see the following prompt.
					</p><pre class="screen">Migrate all configurations?
yes/no? yes</pre><p class="simpara">
						Respond with <code class="literal">yes</code> to migrate all of the source server’s standalone server configuration files.
					</p><p class="simpara">
						Respond with <code class="literal">no</code> to receive a prompt for each individual <code class="literal">standalone*.xml</code> configuration file.
					</p></li><li class="listitem"><p class="simpara">
						Next, you are prompted to determine if you want to migrate the source server’s managed domain configurations, which are located in the <code class="literal"><span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span>/domain/configuration/</code> directory, to the target server’s managed domain configurations, which are located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code> directory.
					</p><pre class="screen">Migrate the source's managed domain?
yes/no? yes</pre><p class="simpara">
						If you respond with <code class="literal">no</code>, managed domain migration is skipped and no managed domain configuration files are migrated.
					</p><p class="simpara">
						If you respond with <code class="literal">yes</code>, the tool begins migrating the managed domain content of the source server. A ciphered repository is used to store data, such as deployments and deployment overlays, that are referenced by the source server’s managed domain and host configurations. Because the source and target servers use a similar content repository, the tool simply copies the data from the source server to the target server and prints the results to the console and the server log.
					</p><pre class="screen">INFO  [ServerMigrationTask#397] Migrating domain content found:  [22/caa450a9ba3b84eaf5a15b6da418b92ce6c98e/content, 23/b62a37ba8a4830622bfcdb960280577cc6796e/content]
INFO  [ServerMigrationTask#398] Resource with path /<span class="emphasis"><em>EAP_HOME</em></span>/domain/data/content/22/caa450a9ba3b84eaf5a15b6da418b92ce6c98e/content migrated.
INFO  [ServerMigrationTask#399] Resource with path /<span class="emphasis"><em>EAP_HOME</em></span>/domain/data/content/23/b62a37ba8a4830622bfcdb960280577cc6796e/content migrated.</pre></li><li class="listitem"><p class="simpara">
						Next, the migration tool scans the source server for managed domain configuration files, prints the results to the console, and provides the following prompt.
					</p><pre class="screen">Migrate all configurations?
yes/no? yes</pre><p class="simpara">
						Respond with <code class="literal">yes</code> to migrate all of the source server’s managed domain configuration files.
					</p><p class="simpara">
						Respond with <code class="literal">no</code> to receive a prompt for each individual managed domain configuration file.
					</p></li><li class="listitem"><p class="simpara">
						Next, the migration tool scans the source server for host configurations files, prints the results to the console, and provides the following prompt.
					</p><pre class="screen">INFO  [ServerMigrationTask#457] Retrieving source's host configurations...
INFO  [ServerMigrationTask#457] /jboss-eap-6.4/domain/configuration/host-master.xml
INFO  [ServerMigrationTask#457] /jboss-eap-6.4/domain/configuration/host-slave.xml
INFO  [ServerMigrationTask#457] /jboss-eap-6.4/domain/configuration/host.xml

Migrate all configurations?
yes/no? yes</pre><p class="simpara">
						Respond with <code class="literal">yes</code> to migrate all of the source server’s host configuration files.
					</p><p class="simpara">
						Respond with <code class="literal">no</code> to receive a prompt for each individual host configuration file.
					</p></li><li class="listitem"><p class="simpara">
						Upon completion, you should see the following message in the server console.
					</p><pre class="screen"> Migration Result: SUCCESS</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migration_tool_server_run_noninteractive_mode"/>Run the JBoss Server Migration Tool in Non-interactive Mode</h1></div></div></div><p>
				You can run the JBoss Server Migration Tool in non-interactive mode. This mode allows it to run without prompts.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The JBoss Server Migration Tool automatically migrates all subsystem configurations for all server configuration files. For information on how to configure the tool at the subsystem or task level, see <a class="link" href="configuring_the_migration_tool.html#configure_tasks_performed_by_the_tool" title="Configure the Migration Tasks Performed by the JBoss Server Migration Tool">Configure the Migration Tasks Performed by the JBoss Server Migration Tool</a>.
				</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To run the tool in non-interactive mode, navigate to the target server installation directory and run the following command, providing the <code class="literal">source</code> argument as the path to the source server installation and setting the <code class="literal">--interactive</code> or <code class="literal">-i</code> argument to <code class="literal">false</code>.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span> --interactive false</pre></li><li class="listitem"><p class="simpara">
						By default, the tool automatically migrates all of the source server’s standalone and managed domain configuration files. However, you can configure the tool’s properties to skip migration of specific configurations. Upon completion, you should see the following message in the server console.
					</p><pre class="screen"> Migration Result: SUCCESS</pre></li></ol></div></div></div></body></html>