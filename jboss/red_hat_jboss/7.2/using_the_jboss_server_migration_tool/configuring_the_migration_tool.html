<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 5. Configuring the JBoss Server Migration Tool</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_the_migration_tool"/>Chapter 5. Configuring the JBoss Server Migration Tool</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migration_tool_server_configure"/>Configuring the JBoss Server Migration Tool Properties</h1></div></div></div><p>
				You use properties to configure the JBoss Server Migration Tool logging and reporting output and to determine which components and configurations you want to migrate. You can configure these properties using a combination of the following methods.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						You can configure the <a class="link" href="configuring_the_migration_tool.html#configure_the_server_migration_tool_tool_properties" title="Configure the JBoss Server Migration Tool Using the Tool Properties">properties file defined within the tool</a>.
					</li><li class="listitem">
						You can pass <a class="link" href="configuring_the_migration_tool.html#configure_the_server_migration_tool_user_properties" title="Configure the JBoss Server Migration Tool Using User Properties">user properties on the command line</a>.
					</li><li class="listitem">
						You can configure <a class="link" href="configuring_the_migration_tool.html#configure_the_server_migration_tool_system_properties" title="Configure the JBoss Server Migration Tool Using System Properties">system environment variables</a>.
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_the_server_migration_tool_tool_properties"/>Configure the JBoss Server Migration Tool Using the Tool Properties</h2></div></div></div><p>
					You can configure the JBoss Server Migration Tool using the <code class="literal">environment.properties</code> file located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/configuration/</code> directory. This standard Java properties file provides the default values for all of the valid properties that can be configured when migrating to the target server. To change a default value, remove the <code class="literal">#</code> comment character that precedes the property and set it to the value you need.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_the_server_migration_tool_user_properties"/>Configure the JBoss Server Migration Tool Using User Properties</h2></div></div></div><p>
					If you prefer, you can create a standard Java properties file that defines JBoss Server Migration Tool configuration properties and pass its path on the command line using the <code class="literal">--environment</code> or <code class="literal">-e</code> argument. This path can be an absolute path or a path relative to the current directory.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span> --environment <span class="emphasis"><em>path/to</em></span>/my-server-migration.properties</pre><p>
					Properties defined in files passed on the command line using the <code class="literal">--environment</code> or <code class="literal">-e</code> argument override the ones defined in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/configuration/environment.properties</code> file.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_the_server_migration_tool_system_properties"/>Configure the JBoss Server Migration Tool Using System Properties</h2></div></div></div><p>
					You can configure the JBoss Server Migration Tool by passing system properties on the command line using the following syntax.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span> -Djboss.server.migration.<span class="emphasis"><em>PROPERTY_NAME</em></span>=<span class="emphasis"><em>PROPERTY_VALUE</em></span></pre><p>
					The system property name should be specified as <code class="literal">jboss.server.migration.</code> concatenated with the environment property name. The following example demonstrates how to specify the name of the XML report as <code class="literal">migration-report.xml</code> when starting the JBoss Server Migration Tool.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span>  -Djboss.server.migration.report.xml.fileName=migration-report.xml</pre><p>
					Environment properties specified on the command line override both user configuration properties and tool configuration properties.
				</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						Configuring the JBoss Server Migration Tool by passing system properties on the command line does not currently work for the following properties.
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">report.html.fileName</code>
							</li><li class="listitem">
								<code class="literal">report.html.maxTaskPathSizeToDisplaySubtasks</code>
							</li><li class="listitem">
								<code class="literal">report.html.templateFileName</code>
							</li><li class="listitem">
								<code class="literal">report.summary.maxTaskPathSizeToDisplaySubtasks</code>
							</li><li class="listitem">
								<code class="literal">report.xml.fileName</code>
							</li></ul></div><p>
						This is a known issue that should be addressed in the next version of JBoss EAP. For more information about this issue, see <a class="link" href="https://issues.jboss.org/browse/JBEAP-12901">JBEAP-12901</a>.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_the_server_migration_tool_logging"/>Configuring Logging for JBoss Server Migration Tool</h1></div></div></div><p>
				The JBoss Server Migration Tool uses the JBoss Logging framework to log the progress of the migration. Results are written to the console and also to a file named <code class="literal">migration.log</code>, which is located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/logs/</code> directory. This log file is created if it does not already exist, and its content is overwritten on each subsequent execution of the tool.
			</p><p>
				The logging configuration is provided by the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/logging.properties</code> file. You can modify this configuration file or you can specify an alternative logging configuration file by using the <code class="literal">logging.configuration</code> system property on the command line.
			</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span> -Dlogging.configuration=file:<span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span>/migration/configuration/my-alternate-logging.properties</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_modules_migration"/>Configuring Modules Migration</h1></div></div></div><p>
				The JBoss Server Migration Tool can migrate any module installed in the source server as long as that module is not already installed on the target server. Module migration can be done explicitly by request, or implicitly because another module or migrated server configuration depends on it.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modules_environment_properties"/>Modules Environment Properties</h2></div></div></div><p>
					You can control whether a module should be migrated or not by using the <code class="literal">modules.includes</code> and <code class="literal">modules.excludes</code> environment properties. The syntax for a module ID is <code class="literal">name:slot</code>. The <code class="literal">:slot</code> is optional and if it is not specified defaults to <code class="literal">main</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							A module whose ID is referenced by the <code class="literal">modules.excludes</code> environment property is never migrated.
						</li><li class="listitem">
							A module whose ID is referenced by the <code class="literal">modules.includes</code> environment property is always migrated, unless it is referenced by the <code class="literal">modules.excludes</code> environment property.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_modules_properties"/>Configuring Modules Properties</h2></div></div></div><p>
					The environment properties used to migrate modules can be configured in any of the following ways:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							You can configure the properties in the tool’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/configuration/environment.properties</code> file.
						</p><pre class="screen">modules.includes=com.example.moduleA,com.example.moduleB
modules.excludes=com.example.moduleC</pre></li><li class="listitem"><p class="simpara">
							You can include the above properties in your own custom properties file, and then pass the properties file name on the command line using the <code class="literal">--environment</code> argument.
						</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span> --environment <span class="emphasis"><em>PATH_TO_MY_PROPERTIES_FILE</em></span></pre></li><li class="listitem"><p class="simpara">
							You can pass the information on the command line using a system property. The environment property names must be prefixed with <code class="literal">jboss.server.migration.</code>, for example:
						</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-server-migration.sh --source <span class="emphasis"><em>EAP_PREVIOUS_HOME</em></span> -Djboss.server.migration.modules.includes="com.example.moduleA" -Djboss.server.migration.modules.excludes="com.example.moduleC,com.example.moduleD"</pre></li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						The JBoss Server Migration Tool does not verify that the source module is compatible with the target server. An incompatible migrated module can cause the target server to malfunction or not work at all. A module can be incompatible due to a dependency on a module that is installed on both the source and target servers, but includes or exposes different resources on each one.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_the_server_migration_tool_reporting"/>Configuring Reporting for JBoss Server Migration Tool</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_reporting_task_summary"/>Configuring the Task Summary Log</h2></div></div></div><p>
					You can customize the generation of the Task Summary using the following environment property.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Type</th><th style="text-align: left" valign="top">Property Description and Default Value</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									report.summary.maxTaskPathSizeToDisplaySubtasks
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Integer
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Include migrated subtasks in the summary where the level is less than or equal to the specified integer.
								</p>
								 <p>
									Defaults to <code class="literal">5</code>.
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_reporting_html_report"/>Configuring the HTML Report</h2></div></div></div><p>
					You can customize the HTML report using the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Type</th><th style="text-align: left" valign="top">Property Description and Default Value</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									report.html.fileName
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									String
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The name of the HTML report file. If not set, the report is not generated.
								</p>
								 <p>
									Defaults to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/reports/migration-report.html</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									report.html.maxTaskPathSizeToDisplaySubtasks
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Integer
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Include migrated subtasks in the summary where the level is less than or equal to the specified integer.
								</p>
								 <p>
									Defaults to <code class="literal">4</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									report.html.templateFileName
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									String
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The HTML report template file name.
								</p>
								 <p>
									Defaults to <code class="literal">migration-report-template.html</code>.
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_reporting_xml_report"/>Configuring the XML Report</h2></div></div></div><p>
					You can customize the XML report using the following environment properties.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Type</th><th style="text-align: left" valign="top">Property Description and Default Value</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									report.xml.fileName
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									String
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The name of the XML report file. If not set, the report is not generated.
								</p>
								 <p>
									Defaults to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/migration/reports/migration-report.xml</code>.
								</p>
								 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_migration_of_standalone_server_configuration"/>Configuring the Migration of the Standalone Server Configuration</h1></div></div></div><p>
				You can configure the JBoss Server Migration Tool to skip the migration of a standalone server entirely, to provide the configuration file names that you want to migrate, or to provide alternate paths for the source or target server’s base and configuration directories.
			</p><p>
				You can customize the migration of the standalone server configuration using the following environment properties.
			</p><div class="table"><a id="idm140351266896496"/><p class="title"><strong>Table 5.1. Standalone Server Migration Environment Properties</strong></p><div class="table-contents"><table summary="Standalone Server Migration Environment Properties" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								standalone.skip
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								If set to <code class="literal">true</code>, the tool skips the entire standalone server migration.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.standalone.serverDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the source server’s standalone directory, which defaults to the source server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/</code> directory.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.standalone.configDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the source server’s standalone configuration directory, which defaults to the source server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/</code> directory.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.standalone.configFiles
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A comma-delimited list of the source server’s standalone configurations to be migrated.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.target.standalone.serverDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the target server’s standalone directory, which defaults to the target server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/</code> directory.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.target.standalone.configDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the target server’s standalone configuration directory, which defaults to the target server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/</code> directory.
							</p>
							 </td></tr></tbody></table></div></div><p>
				For information about how to configure the JBoss Server Migration Tool using these properties, see <a class="link" href="configuring_the_migration_tool.html#migration_tool_server_configure" title="Configuring the JBoss Server Migration Tool Properties">Configuring the JBoss Server Migration Tool</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_migration_of_managed_domain_configuration"/>Configuring the Migration of a Managed Domain Configuration</h1></div></div></div><p>
				You can configure the JBoss Server Migration Tool to skip the migration of a managed domain entirely, to provide the configuration file names that you want to migrate, or to provide alternate paths for the source or target server’s base and configuration directories.
			</p><p>
				You can customize the migration of the managed domain configuration using the following environment properties.
			</p><div class="table"><a id="idm140351207355888"/><p class="title"><strong>Table 5.2. Managed Domain Migration Environment Properties</strong></p><div class="table-contents"><table summary="Managed Domain Migration Environment Properties" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Property Name</th><th style="text-align: left" valign="top">Property Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								domain.skip
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								If set to <code class="literal">true</code>, the tool skips the entire managed domain migration.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.domain.domainDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the source server’s managed domain directory, which defaults to the source server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/</code> directory.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.domain.configDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the source server’s managed domain configuration directory, which defaults to the source server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code> directory.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.domain.domainConfigFiles
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A comma-delimited list of the source server’s managed domain configuration files that are to be migrated.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.source.domain.hostConfigFiles
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A comma-delimited list of the source server’s host configuration files that are to be migrated.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.target.domain.domainDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the target server’s managed domain directory, which defaults to the target server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/</code> directory.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								server.target.domain.configDir
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Defines an alternative path for the target server’s managed domain configuration directory, which defaults to the target server’s <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code> directory.
							</p>
							 </td></tr></tbody></table></div></div><p>
				For information about how to configure the JBoss Server Migration Tool using these properties, see <a class="link" href="configuring_the_migration_tool.html#migration_tool_server_configure" title="Configuring the JBoss Server Migration Tool Properties">Configuring the JBoss Server Migration Tool</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configure_tasks_performed_by_the_tool"/>Configure the Migration Tasks Performed by the JBoss Server Migration Tool</h1></div></div></div><p>
				By default, the JBoss Server Migration Tool automatically migrates all components and subsystems for each standalone server, managed domain, and host configuration you choose to migrate. You can customize the execution of specific tasks and subtasks performed by the tool using environment properties. For example, you can configure the tool to skip the removal of unsupported subsystems or to skip the migration of deployments. The tasks performed by the tool are dependent upon the type of server configuration and the version of the source server from which you are migrating.
			</p><p>
				Information about how to configure environment properties to customize the tasks performed by the JBoss Server Migration Tool can be found in the following sections.
			</p><p>
				<a id="migrating_a_6.4_server_configuration_to_7.2"/>
			</p></div></div></body></html>