<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 1. Administering JBoss EAP</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="administering_jboss_eap"/>Chapter 1. Administering JBoss EAP</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jboss_eap_installation_overview"/>Downloading and Installing JBoss EAP</h1></div></div></div><p>
				This guide provides basic instructions for downloading and installing JBoss EAP using the ZIP installation, which is platform independent.
			</p><p>
				See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/installation_guide/"><span class="emphasis"><em>Installation Guide</em></span></a> for additional details, including instructions for installing JBoss EAP using the graphical installer or RPM package installation methods.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="jboss_eap_installation_prerequisites"/>Installation Prerequisites</h2></div></div></div><p>
					Verify that the following prerequisites have been met before installing JBoss EAP.
				</p><div class="itemizedlist"><p class="title"><strong>Common Prerequisites</strong></p><ul class="itemizedlist"><li class="listitem">
							Your system is supported according to the <a class="link" href="https://access.redhat.com/articles/2026253">JBoss EAP 7 supported configurations</a>.
						</li><li class="listitem">
							Your system is up-to-date with Red Hat issued updates and errata.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>ZIP Installation Prerequisites</strong></p><ul class="itemizedlist"><li class="listitem">
							The user who will run JBoss EAP has read and write access for the installation directory.
						</li><li class="listitem">
							The desired Java development kit has been installed.
						</li><li class="listitem">
							For Windows Server, the <code class="literal">JAVA_HOME</code> and <code class="literal">PATH</code> environment variables have been set.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="download_jboss_eap_zip_installation"/>Download JBoss EAP</h2></div></div></div><p>
					The JBoss EAP ZIP file is available from the Red Hat Customer Portal. The ZIP file installation is platform-independent.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Log in to the <a class="link" href="https://access.redhat.com">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Click <span class="strong"><strong>Downloads</strong></span>.
						</li><li class="listitem">
							Click <span class="strong"><strong>Red Hat JBoss Enterprise Application Platform</strong></span> in the <span class="strong"><strong>Product Downloads</strong></span> list.
						</li><li class="listitem">
							In the <span class="strong"><strong>Version</strong></span> drop-down menu, select <span class="strong"><strong>7.2</strong></span>.
						</li><li class="listitem">
							Find <span class="strong"><strong>Red Hat JBoss Enterprise Application Platform 7.2.0</strong></span> in the list and click the <span class="strong"><strong>Download</strong></span> link.
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="install_jboss_eap_zip_installation"/>Install JBoss EAP</h2></div></div></div><p>
					Once the JBoss EAP ZIP installation file has been downloaded, it can be installed by extracting the package contents.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							If necessary, move the ZIP file to the server and location where JBoss EAP should be installed.
						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								The user who will be running JBoss EAP must have read and write access to this directory.
							</p></div></li><li class="listitem"><p class="simpara">
							Extract the ZIP archive.
						</p><pre class="screen">$ unzip jboss-eap-7.2.0.zip</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								For Windows Server, right-click the ZIP file and select <span class="strong"><strong>Extract All</strong></span>.
							</p></div></li></ol></div><p>
					The directory created by extracting the ZIP archive is the top-level directory for the JBoss EAP installation. This is referred to as <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span></code>.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="starting_and_stopping_jboss_eap"/>Starting and Stopping JBoss EAP</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="starting_jboss_eap"/>Starting JBoss EAP</h2></div></div></div><p>
					JBoss EAP is supported on Red Hat Enterprise Linux, Windows Server, and Oracle Solaris, and runs in either a standalone server or managed domain operating mode. The specific command to start JBoss EAP depends on the underlying platform and the desired operating mode.
				</p><p>
					Servers are initially started in a suspended state and will not accept any requests until all required services have started, at which time the servers are placed into a normal running state and can start accepting requests.
				</p><h4><a id="start_jboss_eap_as_a_standalone_server"/>Start JBoss EAP as a Standalone Server</h4><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.sh</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						For Windows Server, use the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>\bin\standalone.bat</code> script.
					</p></div><p>
					This startup script uses the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.conf</code> file, or <code class="literal">standalone.conf.bat</code> for Windows Server, to set some default preferences, such as JVM options. You can customize the settings in this file.
				</p><p>
					JBoss EAP uses the <code class="literal">standalone.xml</code> configuration file by default, but can be started using a different one. For details on the available standalone configuration files and how to use them, see the <a class="link" href="administering_jboss_eap.html#standalone_server_configuration_files" title="Standalone Server Configuration Files">Standalone Server Configuration Files</a> section.
				</p><p>
					For a complete listing of all available startup script arguments and their purposes, use the <code class="literal">--help</code> argument or see the <a class="link" href="reference_material.html#reference_of_switches_and_arguments_to_pass_at_server_runtime" title="Server Runtime Arguments">Server Runtime Arguments</a> section.
				</p><h4><a id="start_jboss_eap_in_a_managed_domain"/>Start JBoss EAP in a Managed Domain</h4><p>
					The domain controller must be started before the servers in any of the server groups in the domain. Use this script to first start the domain controller, and then for each associated host controller.
				</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						For Windows Server, use the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>\bin\domain.bat</code> script.
					</p></div><p>
					This startup script uses the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.conf</code> file, or <code class="literal">domain.conf.bat</code> for Windows Server, to set some default preferences, such as JVM options. You can customize the settings in this file.
				</p><p>
					JBoss EAP uses the <code class="literal">host.xml</code> host configuration file by default, but can be started using a different one. For details on the available managed domain configuration files and how to use them, see the <a class="link" href="administering_jboss_eap.html#managed_domain_configuration_files" title="Managed Domain Configuration Files">Managed Domain Configuration Files</a> section.
				</p><p>
					When setting up a managed domain, additional arguments will need to be passed into the startup script. For a complete listing of all available startup script arguments and their purposes, use the <code class="literal">--help</code> argument or see the <a class="link" href="reference_material.html#reference_of_switches_and_arguments_to_pass_at_server_runtime" title="Server Runtime Arguments">Server Runtime Arguments</a> section.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopping_jboss_eap"/>Stopping JBoss EAP</h2></div></div></div><p>
					The way that you stop JBoss EAP depends on how it was started.
				</p><h4><a id="stop_an_interactive_instance_of_jboss_eap"/>Stop an Interactive Instance of JBoss EAP</h4><p>
					Press <code class="literal">Ctrl+C</code> in the terminal where JBoss EAP was started.
				</p><h4><a id="stop_a_background_instance_of_jboss_eap"/>Stop a Background Instance of JBoss EAP</h4><p>
					Use the management CLI to connect to the running instance and shut down the server.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Launch the management CLI.
						</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh --connect</pre></li><li class="listitem"><p class="simpara">
							Issue the <code class="literal">shutdown</code> command.
						</p><pre class="screen">shutdown</pre></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						When running in a managed domain, you must specify the host name to shut down by using the <code class="literal">--host</code> argument with the <code class="literal">shutdown</code> command.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jboss_eap_management"/>JBoss EAP Management</h1></div></div></div><p>
				JBoss EAP uses a simplified configuration, with one configuration file per standalone server or managed domain. Default configuration for a standalone server is stored in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/standalone.xml</code> file and default configuration for a managed domain is stored in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/domain.xml</code> file. Additionally, the default configuration for a host controller is stored in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/host.xml</code> file.
			</p><p>
				JBoss EAP can be configured using the command-line management CLI, web-based management console, Java API, or HTTP API. Changes made using these management interfaces persist automatically, and the XML configuration files are overwritten by the Management API. The management CLI and management console are the preferred methods, and it is not recommended to edit the XML configuration files manually.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="management_users"/>Management Users</h2></div></div></div><p>
					The default JBoss EAP configuration provides local authentication so that a user can access the management CLI on the local host without requiring authentication.
				</p><p>
					However, you must add a management user if you want to access the management CLI remotely or use the management console, which is considered remote access even if the traffic originates on the local host. If you attempt to access the management console before adding a management user, you will receive an error message.
				</p><p>
					If JBoss EAP is installed using the graphical installer, then a management user is created during the installation process.
				</p><p>
					This guide covers simple user management for JBoss EAP using the <code class="literal">add-user</code> script, which is a utility for adding new users to the properties files for out-of-the-box authentication.
				</p><p>
					For more advanced authentication and authorization options, such as LDAP or Role-Based Access Control (RBAC), see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/security_architecture/#core_management_auth">Core Management Authentication</a> section of the JBoss EAP <span class="emphasis"><em>Security Architecture</em></span>.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="adding_a_management_user"/>Adding a Management User</h3></div></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Run the <code class="literal">add-user</code> utility script and follow the prompts.
							</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/add-user.sh</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
									For Windows Server, use the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>\bin\add-user.bat</code> script.
								</p></div></li><li class="listitem"><p class="simpara">
								Press <code class="literal">ENTER</code> to select the default option <code class="literal">a</code> to add a management user.
							</p><p class="simpara">
								This user will be added to the <span class="emphasis"><em>ManagementRealm</em></span> and will be authorized to perform management operations using the management console or management CLI. The other choice, <code class="literal">b</code>, adds a user to the <span class="emphasis"><em>ApplicationRealm</em></span>, which is used for applications and provides no particular permissions.
							</p></li><li class="listitem"><p class="simpara">
								Enter the desired username and password. You will be prompted to confirm the password.
							</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
									User names can only contain the following characters, in any number and in any order:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											Alphanumeric characters (a-z, A-Z, 0-9)
										</li><li class="listitem">
											Dashes (-), periods (.), commas (,), at sign (@)
										</li><li class="listitem">
											Backslash (\)
										</li><li class="listitem">
											Equals (=)
										</li></ul></div></div><p class="simpara">
								By default, JBoss EAP allows weak passwords but will issue a warning.
							</p><p class="simpara">
								See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#setting_add_user_password_restrictions">Setting Add-User Utility Password Restrictions</a> section of the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for details on changing this default behavior.
							</p></li><li class="listitem">
								Enter a comma-separated list of groups to which the user belongs. If you do not want the user to belong to any groups, press <code class="literal">ENTER</code> to leave it blank.
							</li><li class="listitem">
								Review the information and enter <code class="literal">yes</code> to confirm.
							</li><li class="listitem"><p class="simpara">
								Determine whether this user represents a remote JBoss EAP server instance. For a basic management user, enter <code class="literal">no</code>.
							</p><p class="simpara">
								One type of user that may need to be added to the <span class="emphasis"><em>ManagementRealm</em></span> is a user representing another instance of JBoss EAP, which must be able to authenticate to join as a member of a cluster. If this is the case, then answer <code class="literal">yes</code> to this prompt and you will be given a hashed secret value representing the user’s password, which will need to be added to a different configuration file.
							</p></li></ol></div><p>
						Users can also be created non-interactively by passing parameters to the <code class="literal">add-user</code> script. This approach is not recommended on shared systems, because the passwords will be visible in log and history files. For more information, see <a class="link" href="administering_jboss_eap.html#running_the_add_user_utility_non_interactively" title="Running the Add-User Utility Non-Interactively">Running the Add-User Utility Non-Interactively</a>.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="running_the_add_user_utility_non_interactively"/>Running the Add-User Utility Non-Interactively</h3></div></div></div><p>
						You can run the <code class="literal">add-user</code> script non-interactively by passing in arguments on the command line. At a minimum, the username and password must be provided.
					</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							This approach is not recommended on shared systems, because the passwords will be visible in log and history files.
						</p></div><h5><a id="create_a_user_belonging_to_multiple_groups"/>Create a User Belonging to Multiple Groups</h5><p>
						The following command adds a management user, <code class="literal">mgmtuser1</code>, with the <code class="literal">guest</code> and <code class="literal">mgmtgroup</code> groups.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/add-user.sh -u 'mgmtuser1' -p 'password1!' -g 'guest,mgmtgroup'</pre><h5><a id="specify_an_alternative_properties_file"/>Specify an Alternative Properties File</h5><p>
						By default, user and group information created using the <code class="literal">add-user</code> script are stored in properties files located in the server configuration directory.
					</p><p>
						User information is stored in the following properties files:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/mgmt-users.properties</code>
							</li><li class="listitem">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/mgmt-users.properties</code>
							</li></ul></div><p>
						Group information is stored in the following properties files:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/mgmt-groups.properties</code>
							</li><li class="listitem">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/mgmt-groups.properties</code>
							</li></ul></div><p>
						These default directories and properties file names can be overridden. The following command adds a new user, specifying a different name and location for the user properties files.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/add-user.sh -u 'mgmtuser2' -p 'password1!' -sc '<span class="emphasis"><em>/path/to</em></span>/standaloneconfig/' -dc '<span class="emphasis"><em>/path/to</em></span>/domainconfig/' -up 'newname.properties'</pre><p>
						The new user was added to the user properties files located at <code class="literal"><span class="emphasis"><em>/path/to</em></span>/standaloneconfig/newname.properties</code> and <code class="literal"><span class="emphasis"><em>/path/to</em></span>/domainconfig/newname.properties</code>. Note that these files must already exist or you will see an error.
					</p><p>
						For a complete listing of all available <code class="literal">add-user</code> arguments and their purposes, use the <code class="literal">--help</code> argument or see the <a class="link" href="reference_material.html#reference_of_add_user_utility_arguments" title="Add-User Utility Arguments">Add-User Utility Arguments</a> section.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="management_interfaces"/>Management Interfaces</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="management_cli_overview"/>Management CLI</h3></div></div></div><p>
						The management command-line interface (CLI) is a command-line administration tool for JBoss EAP.
					</p><p>
						Use the management CLI to start and stop servers, deploy and undeploy applications, configure system settings, and perform other administrative tasks. Operations can be performed in batch mode, allowing multiple tasks to be run as a group.
					</p><p>
						Many common terminal commands are available, such as <code class="literal">ls</code>, <code class="literal">cd</code>, and <code class="literal">pwd</code>. The management CLI also supports tab completion.
					</p><p>
						For detailed information on using the management CLI, including commands and operations, syntax, and running in batch mode, see the JBoss EAP <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/management_cli_guide/"><span class="emphasis"><em>Management CLI Guide</em></span></a>.
					</p><h5><a id="launch_the_management_cli"/>Launch the Management CLI</h5><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							For Windows Server, use the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>\bin\jboss-cli.bat</code> script.
						</p></div><h5><a id="connect_to_a_running_server"/>Connect to a Running Server</h5><pre class="screen">connect</pre><p>
						Or you can launch the management CLI and connect in one step by using the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh --connect</code> command.
					</p><h5><a id="display_help"/>Display Help</h5><p>
						Use the following command for general help.
					</p><pre class="screen">help</pre><p>
						Use the <code class="literal">--help</code> flag on a command to receive instructions on using that specific command. For instance, to receive information on using <code class="literal">deploy</code>, the following command is executed.
					</p><pre class="screen">deploy --help</pre><h5><a id="quit_the_management_cli"/>Quit the Management CLI</h5><pre class="screen">quit</pre><h5><a id="view_system_settings"/>View System Settings</h5><p>
						The following command uses the <code class="literal">read-attribute</code> operation to display whether the example datasource is enabled.
					</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:read-attribute(name=enabled)
{
    "outcome" =&gt; "success",
    "result" =&gt; true
}</pre><p>
						When running in a managed domain, you must specify which profile to update by preceding the command with <code class="literal">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span></code>.
					</p><pre class="screen">/profile=default/subsystem=datasources/data-source=ExampleDS:read-attribute(name=enabled)</pre><h5><a id="update_system_settings"/>Update System Settings</h5><p>
						The following command uses the <code class="literal">write-attribute</code> operation to disable the example datasource.
					</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=enabled,value=false)</pre><h5><a id="start_servers"/>Start Servers</h5><p>
						The management CLI can also be used to start and stop servers when running in a managed domain.
					</p><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=server-one:start</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="management_console_overview"/>Management Console</h3></div></div></div><p>
						The management console is a web-based administration tool for JBoss EAP.
					</p><p>
						Use the management console to start and stop servers, deploy and undeploy applications, tune system settings, and make persistent modifications to the server configuration. The management console also has the ability to perform administrative tasks, with live notifications when any changes performed by the current user require the server instance to be restarted or reloaded.
					</p><p>
						In a managed domain, server instances and server groups in the same domain can be centrally managed from the management console of the domain controller.
					</p><p>
						For a JBoss EAP instance running on the local host using the default management port, the management console can be accessed through a web browser at <a class="link" href="http://localhost:9990/console/index.html">http://localhost:9990/console/index.html</a>. You will need to authenticate with a user that has permissions to access the management console.
					</p><p>
						The management console provides the following tabs for navigating and managing your JBoss EAP standalone server or managed domain.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Home</span></dt><dd>
									Learn how to accomplish several common configuration and management tasks. Take a tour to become familiar with the JBoss EAP management console.
								</dd><dt><span class="term">Deployments</span></dt><dd>
									Add, remove, and enable deployments. In a managed domain, assign deployments to server groups.
								</dd><dt><span class="term">Configuration</span></dt><dd>
									Configure available subsystems, which provide capabilities such as web services, messaging, or high availability. In a managed domain, manage the profiles that contain different subsystem configurations.
								</dd><dt><span class="term">Runtime</span></dt><dd>
									View runtime information, such as server status, JVM usage, and server logs. In a managed domain, manage your hosts, server groups, and servers.
								</dd><dt><span class="term">Patching</span></dt><dd>
									Apply patches to your JBoss EAP instances.
								</dd><dt><span class="term">Access Control</span></dt><dd>
									Assign roles to users and groups when using Role-Based Access Control.
								</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration_files"/>Configuration Files</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="standalone_server_configuration_files"/>Standalone Server Configuration Files</h3></div></div></div><p>
						The standalone configuration files are located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/</code> directory. A separate file exists for each of the five predefined profiles (<span class="emphasis"><em>default</em></span>, <span class="emphasis"><em>ha</em></span>, <span class="emphasis"><em>full</em></span>, <span class="emphasis"><em>full-ha</em></span>, <span class="emphasis"><em>load-balancer</em></span>).
					</p><div class="table"><a id="idm140147833080624"/><p class="title"><strong>Table 1.1. Standalone Configuration Files</strong></p><div class="table-contents"><table summary="Standalone Configuration Files" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Configuration File</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">standalone.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This standalone configuration file is the default configuration that is used when you start your standalone server. It contains all information about the server, including subsystems, networking, deployments, socket bindings, and other configurable details. It does not provide the subsystems necessary for messaging or high availability.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">standalone-ha.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This standalone configuration file includes all of the default subsystems and adds the <code class="literal">modcluster</code> and <code class="literal">jgroups</code> subsystems for high availability. It does not provide the subsystems necessary for messaging.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">standalone-full.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This standalone configuration file includes all of the default subsystems and adds the <code class="literal">messaging-activemq</code> and <code class="literal">iiop-openjdk</code> subsystems. It does not provide the subsystems necessary for high availability.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">standalone-full-ha.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This standalone configuration file includes support for every possible subsystem, including those for messaging and high availability.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">standalone-load-balancer.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This standalone configuration file includes the minimum subsystems necessary to use the built-in mod_cluster front-end load balancer to load balance other JBoss EAP instances.
									</p>
									 </td></tr></tbody></table></div></div><p>
						By default, starting JBoss EAP as a standalone server uses the <code class="literal">standalone.xml</code> file. To start JBoss EAP with a different configuration, use the <code class="literal">--server-config</code> argument. For example,
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.sh --server-config=standalone-full.xml</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="managed_domain_configuration_files"/>Managed Domain Configuration Files</h3></div></div></div><p>
						The managed domain configuration files are located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code> directory.
					</p><div class="table"><a id="idm140147853544592"/><p class="title"><strong>Table 1.2. Managed Domain Configuration Files</strong></p><div class="table-contents"><table summary="Managed Domain Configuration Files" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Configuration File</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">domain.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This is the main configuration file for a managed domain. Only the domain master reads this file. This file contains the configurations for all of the profiles (<span class="emphasis"><em>default</em></span>, <span class="emphasis"><em>ha</em></span>, <span class="emphasis"><em>full</em></span>, <span class="emphasis"><em>full-ha</em></span>, <span class="emphasis"><em>load-balancer</em></span>).
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">host.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This file includes configuration details specific to a physical host in a managed domain, such as network interfaces, socket bindings, the name of the host, and other host-specific details. The <code class="literal">host.xml</code> file includes all of the features of both <code class="literal">host-master.xml</code> and <code class="literal">host-slave.xml</code>, which are described below.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">host-master.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This file includes only the configuration details necessary to run a server as the master domain controller.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										<code class="literal">host-slave.xml</code>
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										This file includes only the configuration details necessary to run a server as a managed domain host controller.
									</p>
									 </td></tr></tbody></table></div></div><p>
						By default, starting JBoss EAP in a managed domain uses the <code class="literal">host.xml</code> file. To start JBoss EAP with a different configuration, use the <code class="literal">--host-config</code> argument. For example,
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.sh --host-config=host-master.xml</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="backing_up_configuration_data"/>Backing Up Configuration Data</h3></div></div></div><p>
						In order to later restore the JBoss EAP server configuration, items in the following locations should be backed up:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/</code>
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Back up the entire directory to save user data, server configuration, and logging settings for standalone servers.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/</code>
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Back up the entire directory to save user and profile data, domain and host configuration, and logging settings for managed domains.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/modules/</code>
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Back up any custom modules.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/welcome-content/</code>
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Back up any custom welcome content.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/</code>
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Back up any custom scripts or startup configuration files.
									</li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration_file_snapshots"/>Configuration File Snapshots</h3></div></div></div><p>
						To assist in the maintenance and management of the server, JBoss EAP creates a timestamped version of the original configuration file at the time of startup. Any additional configuration changes made by management operations will result in the original file being automatically backed up, and a working copy of the instance being preserved for reference and rollback. Additionally, configuration snapshots can be taken, which are point-in-time copies of the current server configuration. These snapshots can be saved and loaded by an administrator.
					</p><p>
						The following examples use the <code class="literal">standalone.xml</code> file, but the same process applies to the <code class="literal">domain.xml</code> and <code class="literal">host.xml</code> files.
					</p><h5><a id="take_a_snapshot"/>Take a Snapshot</h5><p>
						Use the management CLI to take a snapshot of the current configurations.
					</p><pre class="screen">:take-snapshot
{
    "outcome" =&gt; "success",
    "result" =&gt; "<span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/standalone_xml_history/snapshot/20151022-133109702standalone.xml"
}</pre><h5><a id="list_snapshots"/>List Snapshots</h5><p>
						Use the management CLI to list all snapshots that have been taken.
					</p><pre class="screen">:list-snapshots
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "directory" =&gt; "<span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/standalone_xml_history/snapshot",
        "names" =&gt; [
            "20151022-133109702standalone.xml",
            "20151022-132715958standalone.xml"
        ]
    }
}</pre><h5><a id="delete_a_snapshot"/>Delete a Snapshot</h5><p>
						Use the management CLI to delete a snapshot.
					</p><pre class="screen">:delete-snapshot(name=20151022-133109702standalone.xml)</pre><h5><a id="start_the_server_with_a_snapshot"/>Start the Server with a Snapshot</h5><p>
						The server can be started using a snapshot or an automatically-saved version of the configuration.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Navigate to the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/standalone_xml_history</code> directory and identify the snapshot or saved configuration file to be loaded.
							</li><li class="listitem"><p class="simpara">
								Start the server and point to the selected configuration file. Pass in the file path relative to the configuration directory, <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/</code>.
							</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.sh --server-config=standalone_xml_history/snapshot/20151022-133109702standalone.xml</pre></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							When running in a managed domain, use the <code class="literal">--host-config</code> argument instead to specify the configuration file.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="property_replacement"/>Property Replacement</h3></div></div></div><p>
						JBoss EAP allows you to use expressions to define replaceable properties in place of literal values in the configuration. Expressions use the format <code class="literal">${<span class="emphasis"><em>PARAMETER</em></span>:<span class="emphasis"><em>DEFAULT_VALUE</em></span>}</code>. If the specified parameter is set, then the parameter’s value will be used. Otherwise, the default value provided will be used.
					</p><p>
						The supported sources for resolving expressions are system properties, environment variables, and the vault. For deployments only, the source can be properties listed in a <code class="literal">META-INF/jboss.properties</code> file in the deployment archive. For deployment types that support subdeployments, the resolution is scoped to all subdeployments if the properties file is in the outer deployment, for example the EAR. If the properties file is in the subdeployment, then the resolution is scoped just to that subdeployment.
					</p><p>
						The example below from the <code class="literal">standalone.xml</code> configuration file sets the <code class="literal">inet-address</code> for the <code class="literal">public</code> interface to <code class="literal">127.0.0.1</code> unless the <code class="literal">jboss.bind.address</code> parameter is set.
					</p><pre class="programlisting">&lt;interface name="public"&gt;
    &lt;inet-address value="${jboss.bind.address:127.0.0.1}"/&gt;
&lt;/interface&gt;</pre><p>
						The <code class="literal">jboss.bind.address</code> parameter can be set when starting EAP as a standalone server with the following command:
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.sh -Djboss.bind.address=<span class="emphasis"><em>IP_ADDRESS</em></span></pre><h5><a id="nested_expressions"/>Nested Expressions</h5><p>
						Expressions can be nested, which allows for more advanced use of expressions in place of fixed values. The format of a nested expression is like that of a normal expression, but one expression is embedded in the other, for example:
					</p><pre class="screen">${<span class="emphasis"><em>SYSTEM_VALUE_1</em></span>${<span class="emphasis"><em>SYSTEM_VALUE_2</em></span>}}</pre><p>
						Nested expressions are evaluated recursively, so the <span class="emphasis"><em>inner</em></span> expression is first evaluated, then the <span class="emphasis"><em>outer</em></span> expression is evaluated. Expressions may also be recursive, where an expression resolves to another expression, which is then resolved. Nested expressions are permitted anywhere that expressions are permitted, with the exception of management CLI commands.
					</p><p>
						An example of where a nested expression might be used is if the password used in a datasource definition is masked. The configuration for the datasource might have the following line:
					</p><pre class="programlisting">&lt;password&gt;${VAULT::ds_ExampleDS::password::1}&lt;/password&gt;</pre><p>
						The value of <code class="literal">ds_ExampleDS</code> could be replaced with a system property (<code class="literal">datasource_name</code>) using a nested expression. The configuration for the datasource could instead have the following line:
					</p><pre class="programlisting">&lt;password&gt;${VAULT::${datasource_name}::password::1}&lt;/password&gt;</pre><p>
						JBoss EAP would first evaluate the expression <code class="literal">${datasource_name}</code>, then input this to the larger expression and evaluate the resulting expression. The advantage of this configuration is that the name of the datasource is abstracted from the fixed configuration.
					</p><h5><a id="descriptor_property_replacement"/>Descriptor-Based Property Replacement</h5><p>
						Application configuration, such as datasource connection parameters, typically varies between development, testing, and production environments. This variance is sometimes accommodated by build system scripts, as the Java EE specification does not contain a method to externalize these configurations. With JBoss EAP, you can use descriptor-based property replacement to manage configuration externally.
					</p><p>
						Descriptor-based property replacement substitutes properties based on descriptors, allowing you to remove assumptions about the environment from the application and the build chain. Environment-specific configurations can be specified in deployment descriptors rather than annotations or build system scripts. You can provide configuration in files or as parameters at the command line.
					</p><p>
						There are several flags in the <code class="literal">ee</code> subsystem that control whether property replacement is applied.
					</p><p>
						JBoss-specific descriptor replacement is controlled by the <code class="literal">jboss-descriptor-property-replacement</code> flag and is <span class="emphasis"><em>enabled</em></span> by default. When enabled, properties can be replaced in the following deployment descriptors:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">jboss-ejb3.xml</code>
							</li><li class="listitem">
								<code class="literal">jboss-app.xml</code>
							</li><li class="listitem">
								<code class="literal">jboss-web.xml</code>
							</li><li class="listitem">
								<code class="literal">*-jms.xml</code>
							</li><li class="listitem">
								<code class="literal">*-ds.xml</code>
							</li></ul></div><p>
						The following management CLI command can be used to enable or disable property replacement in JBoss-specific descriptors:
					</p><pre class="screen">/subsystem=ee:write-attribute(name="jboss-descriptor-property-replacement",value=<span class="emphasis"><em>VALUE</em></span>)</pre><p>
						Java EE descriptor replacement controlled by the <code class="literal">spec-descriptor-property-replacement</code> flag and is <span class="emphasis"><em>disabled</em></span> by default. When enabled, properties can be replaced in the following deployment descriptors:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">ejb-jar.xml</code>
							</li><li class="listitem">
								<code class="literal">persistence.xml</code>
							</li><li class="listitem">
								<code class="literal">application.xml</code>
							</li><li class="listitem">
								<code class="literal">web.xml</code>
							</li></ul></div><p>
						The following management CLI command can be used to enable or disable property replacement in Java EE descriptors:
					</p><pre class="screen">/subsystem=ee:write-attribute(name="spec-descriptor-property-replacement",value=<span class="emphasis"><em>VALUE</em></span>)</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="network_and_port_configuration"/>Network and Port Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="interfaces"/>Interfaces</h2></div></div></div><p>
					JBoss EAP references named interfaces throughout the configuration. This allows the configuration to reference individual interface declarations with logical names, rather than requiring the full details of the interface at each use.
				</p><p>
					This also allows for easier configuration in a managed domain, where network interface details can vary across multiple machines. Each server instance can correspond to a logical name group.
				</p><p>
					The <code class="literal">standalone.xml</code>, <code class="literal">domain.xml</code>, and <code class="literal">host.xml</code> files all include interface declarations. There are several preconfigured interface names, depending on which default configuration is used. The <code class="literal">management</code> interface can be used for all components and services that require the management layer, including the HTTP management endpoint. The <code class="literal">public</code> interface can be used for all application-related network communications. The <code class="literal">unsecure</code> interface is used for IIOP sockets in the standard configuration. The <code class="literal">private</code> interface is used for JGroups sockets in the standard configuration.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="default_interface_configurations"/>Default Interface Configurations</h3></div></div></div><pre class="programlisting">&lt;interfaces&gt;
  &lt;interface name="management"&gt;
    &lt;inet-address value="${jboss.bind.address.management:127.0.0.1}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="public"&gt;
    &lt;inet-address value="${jboss.bind.address:127.0.0.1}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="private"&gt;
    &lt;inet-address value="${jboss.bind.address.private:127.0.0.1}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="unsecure"&gt;
    &lt;inet-address value="${jboss.bind.address.unsecure:127.0.0.1}"/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</pre><p>
						By default, JBoss EAP binds these interfaces to <code class="literal">127.0.0.1</code>, but these values can be overridden at runtime by setting the appropriate property. For example, the <code class="literal">inet-address</code> of the <code class="literal">public</code> interface can be set when starting JBoss EAP as a standalone server with the following command.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.sh -Djboss.bind.address=<span class="emphasis"><em>IP_ADDRESS</em></span></pre><p>
						Alternatively, you can use the <code class="literal">-b</code> switch on the server start command line. For more information about server start options, see <a class="link" href="reference_material.html#reference_of_switches_and_arguments_to_pass_at_server_runtime" title="Server Runtime Arguments">Server Runtime Arguments</a>.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							If you modify the default network interfaces or ports that JBoss EAP uses, you must also remember to change any scripts that use the modified interfaces or ports. These include JBoss EAP service scripts, as well as remembering to specify the correct interface and port when accessing the management console or management CLI.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring_interfaces"/>Configuring Interfaces</h3></div></div></div><p>
						Network interfaces are declared by specifying a logical name and selection criteria for the physical interface. The selection criteria can reference a wildcard address or specify a set of one or more characteristics that an interface or address must have in order to be a valid match. For a listing of all available interface selection criteria, see the <a class="link" href="reference_material.html#reference_of_interface_attributes" title="Interface Attributes">Interface Attributes</a> section.
					</p><p>
						Interfaces can be configured using the management console or the management CLI. Below are several examples of adding and updating interfaces. The management CLI command is shown first, followed by the corresponding configuration XML.
					</p><h5><a id="add_an_interface_with_a_nic_value"/>Add an Interface with a NIC Value</h5><p>
						Add a new interface with a NIC value of <code class="literal">eth0</code>.
					</p><pre class="screen">/interface=external:add(nic=eth0)</pre><pre class="programlisting">&lt;interface name="external"&gt;
   &lt;nic name="eth0"/&gt;
&lt;/interface&gt;</pre><h5><a id="add_an_interface_with_several_conditional_values"/>Add an Interface with Several Conditional Values</h5><p>
						Add a new interface that matches any interface/address on the correct subnet if it is up, supports multicast, and is not point-to-point.
					</p><pre class="screen">/interface=default:add(subnet-match=192.168.0.0/16,up=true,multicast=true,not={point-to-point=true})</pre><pre class="programlisting">&lt;interface name="default"&gt;
   &lt;subnet-match value="192.168.0.0/16"/&gt;
   &lt;up/&gt;
   &lt;multicast/&gt;
   &lt;not&gt;
      &lt;point-to-point/&gt;
   &lt;/not&gt;
&lt;/interface&gt;</pre><h5><a id="update_an_interface_attribute"/>Update an Interface Attribute</h5><p>
						Update the <code class="literal">public</code> interface’s default <code class="literal">inet-address</code> value, keeping the <code class="literal">jboss.bind.address</code> property to allow for this value to be set at runtime.
					</p><pre class="screen">/interface=public:write-attribute(name=inet-address,value="${jboss.bind.address:192.168.0.0}")</pre><pre class="programlisting">&lt;interface name="public"&gt;
    &lt;inet-address value="${jboss.bind.address:192.168.0.0}"/&gt;
&lt;/interface&gt;</pre><h5><a id="add_an_interface_to_a_server_in_a_managed_domain"/>Add an Interface to a Server in a Managed Domain</h5><pre class="screen">/host=<span class="emphasis"><em>HOST_NAME</em></span>/server-config=<span class="emphasis"><em>SERVER_NAME</em></span>/interface=<span class="emphasis"><em>INTERFACE_NAME</em></span>:add(inet-address=127.0.0.1)</pre><pre class="programlisting">&lt;servers&gt;
   &lt;server name="<span class="emphasis"><em>SERVER_NAME</em></span>" group="main-server-group"&gt;
      &lt;interfaces&gt;
         &lt;interface name="<span class="emphasis"><em>INTERFACE_NAME</em></span>"&gt;
            &lt;inet-address value="127.0.0.1"/&gt;
         &lt;/interface&gt;
      &lt;/interfaces&gt;
   &lt;/server&gt;
&lt;/servers&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="socket_bindings"/>Socket Bindings</h2></div></div></div><p>
					Socket bindings and socket binding groups allow you to define network ports and their relationship to the networking interfaces required for your JBoss EAP configuration. A socket binding is a named configuration for a socket. A socket binding group is a collection of socket binding declarations that are grouped under a logical name.
				</p><p>
					This allows other sections of the configuration to reference socket bindings by their logical name, rather than requiring the full details of the socket configuration at each use.
				</p><p>
					The declarations for these named configurations can be found in the <code class="literal">standalone.xml</code> and <code class="literal">domain.xml</code> configuration files. A standalone server contains only one socket binding group, while a managed domain can contain multiple groups. You can create a socket binding group for each server group in the managed domain, or share a socket binding group between multiple server groups.
				</p><p>
					The ports JBoss EAP uses by default depend on which socket binding groups are used and the requirements of your individual deployments.
				</p><p>
					There are three types of socket bindings that can be defined in a socket binding group in the JBoss EAP configuration:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Inbound Socket Bindings</span></dt><dd><p class="simpara">
								The <code class="literal">socket-binding</code> element is used to configure inbound socket bindings for the JBoss EAP server. The default JBoss EAP configurations provide several preconfigured <code class="literal">socket-binding</code> elements, for example, for HTTP and HTTPS traffic. Another example can be found in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuring_messaging/#broadcast_groups">Broadcast Groups</a> section of <span class="emphasis"><em>Configuring Messaging</em></span> for JBoss EAP.
							</p><p class="simpara">
								Attributes for this element can be found in the <a class="link" href="reference_material.html#socket_binding_local" title="Table A.4. Inbound Socket Binding (socket-binding) Attributes">Inbound Socket Binding Attributes</a> table.
							</p></dd><dt><span class="term">Remote Outbound Socket Bindings</span></dt><dd><p class="simpara">
								The <code class="literal">remote-destination-outbound-socket-binding</code> element is used to configure outbound socket bindings for destinations that are remote to the JBoss EAP server. The default JBoss EAP configurations provide an example remote destination socket binding that can be used for a mail server. Another example can be found in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuring_messaging/#use_provided_amq_adapter">Using the Integrated Artemis Resource Adapter for Remote Connections</a> section of <span class="emphasis"><em>Configuring Messaging</em></span> for JBoss EAP.
							</p><p class="simpara">
								Attributes for this element can be found in the <a class="link" href="reference_material.html#socket_binding_outbound_remote" title="Table A.5. Remote Outbound Socket Binding (remote-destination-outbound-socket-binding) Attributes">Remote Outbound Socket Binding Attributes</a> table.
							</p></dd><dt><span class="term">Local Outbound Socket Bindings</span></dt><dd><p class="simpara">
								The <code class="literal">local-destination-outbound-socket-binding</code> element is used to configure outbound socket bindings for destinations that are local to the JBoss EAP server. This type of socket binding is not expected to be commonly used.
							</p><p class="simpara">
								Attributes for this element can be found in the <a class="link" href="reference_material.html#socket_binding_outbound_local" title="Table A.6. Local Outbound Socket Binding (local-destination-outbound-socket-binding) Attributes">Local Outbound Socket Binding Attributes</a> table.
							</p></dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="management_ports"/>Management Ports</h3></div></div></div><p>
						Management ports were consolidated in JBoss EAP 7. By default, JBoss EAP 7 uses port <code class="literal">9990</code> for both native management, used by the management CLI, and HTTP management, used by the web-based management console. Port <code class="literal">9999</code>, which was used as the native management port in JBoss EAP 6, is no longer used but can still be enabled if desired.
					</p><p>
						If HTTPS is enabled for the management console, then port <code class="literal">9993</code> is used by default.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="default_socket_bindings"/>Default Socket Bindings</h3></div></div></div><p>
						JBoss EAP ships with a socket binding group for each of the five predefined profiles (<span class="emphasis"><em>default</em></span>, <span class="emphasis"><em>ha</em></span>, <span class="emphasis"><em>full</em></span>, <span class="emphasis"><em>full-ha</em></span>, <span class="emphasis"><em>load-balancer</em></span>).
					</p><p>
						For detailed information about the default socket bindings, such as default ports and descriptions, see the <a class="link" href="reference_material.html#reference_of_default_socket_bindings" title="Default Socket Bindings">Default Socket Bindings</a> section.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							If you modify the default network interfaces or ports that JBoss EAP uses, you must also remember to change any scripts that use the modified interfaces or ports. These include JBoss EAP service scripts, as well as remembering to specify the correct interface and port when accessing the management console or management CLI.
						</p></div><h5><a id="standalone_server"/>Standalone Server</h5><p>
						When running as a standalone server, only one socket binding group is defined per configuration file. Each standalone configuration file (<code class="literal">standalone.xml</code>, <code class="literal">standalone-ha.xml</code>, <code class="literal">standalone-full.xml</code>, <code class="literal">standalone-full-ha.xml</code>, <code class="literal">standalone-load-balancer.xml</code>) defines socket bindings for the technologies used by its corresponding profile.
					</p><p>
						For example, the default standalone configuration file (<code class="literal">standalone.xml</code>) specifies the below socket bindings.
					</p><pre class="programlisting">&lt;socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}"&gt;
    &lt;socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/&gt;
    &lt;socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9993}"/&gt;
    &lt;socket-binding name="ajp" port="${jboss.ajp.port:8009}"/&gt;
    &lt;socket-binding name="http" port="${jboss.http.port:8080}"/&gt;
    &lt;socket-binding name="https" port="${jboss.https.port:8443}"/&gt;
    &lt;socket-binding name="txn-recovery-environment" port="4712"/&gt;
    &lt;socket-binding name="txn-status-manager" port="4713"/&gt;
    &lt;outbound-socket-binding name="mail-smtp"&gt;
        &lt;remote-destination host="localhost" port="25"/&gt;
    &lt;/outbound-socket-binding&gt;
&lt;/socket-binding-group&gt;</pre><h5><a id="managed_domain"/>Managed Domain</h5><p>
						When running in a managed domain, all socket binding groups are defined in the <code class="literal">domain.xml</code> file. There are five predefined socket binding groups:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">standard-sockets</code>
							</li><li class="listitem">
								<code class="literal">ha-sockets</code>
							</li><li class="listitem">
								<code class="literal">full-sockets</code>
							</li><li class="listitem">
								<code class="literal">full-ha-sockets</code>
							</li><li class="listitem">
								<code class="literal">load-balancer-sockets</code>
							</li></ul></div><p>
						Each socket binding group specifies socket bindings for the technologies used by its corresponding profile. For example, the <code class="literal">full-ha-sockets</code> socket binding group defines several <code class="literal">jgroups</code> socket bindings, which are used by the <span class="emphasis"><em>full-ha</em></span> profile for high availability.
					</p><pre class="programlisting">&lt;socket-binding-groups&gt;
  &lt;socket-binding-group name="standard-sockets" default-interface="public"&gt;
    &lt;!-- Needed for server groups using the 'default' profile  --&gt;
    &lt;socket-binding name="ajp" port="${jboss.ajp.port:8009}"/&gt;
    &lt;socket-binding name="http" port="${jboss.http.port:8080}"/&gt;
    &lt;socket-binding name="https" port="${jboss.https.port:8443}"/&gt;
    &lt;socket-binding name="txn-recovery-environment" port="4712"/&gt;
    &lt;socket-binding name="txn-status-manager" port="4713"/&gt;
    &lt;outbound-socket-binding name="mail-smtp"&gt;
      &lt;remote-destination host="localhost" port="25"/&gt;
    &lt;/outbound-socket-binding&gt;
  &lt;/socket-binding-group&gt;
  &lt;socket-binding-group name="ha-sockets" default-interface="public"&gt;
    &lt;!-- Needed for server groups using the 'ha' profile  --&gt;
    ...
  &lt;/socket-binding-group&gt;
  &lt;socket-binding-group name="full-sockets" default-interface="public"&gt;
    &lt;!-- Needed for server groups using the 'full' profile  --&gt;
    ...
  &lt;/socket-binding-group&gt;
  &lt;socket-binding-group name="full-ha-sockets" default-interface="public"&gt;
    &lt;!-- Needed for server groups using the 'full-ha' profile  --&gt;
    &lt;socket-binding name="ajp" port="${jboss.ajp.port:8009}"/&gt;
    &lt;socket-binding name="http" port="${jboss.http.port:8080}"/&gt;
    &lt;socket-binding name="https" port="${jboss.https.port:8443}"/&gt;
    &lt;socket-binding name="iiop" interface="unsecure" port="3528"/&gt;
    &lt;socket-binding name="iiop-ssl" interface="unsecure" port="3529"/&gt;
    &lt;socket-binding name="jgroups-mping" interface="private" port="0" multicast-address="${jboss.default.multicast.address:230.0.0.4}" multicast-port="45700"/&gt;
    &lt;socket-binding name="jgroups-tcp" interface="private" port="7600"/&gt;
    &lt;socket-binding name="jgroups-udp" interface="private" port="55200" multicast-address="${jboss.default.multicast.address:230.0.0.4}" multicast-port="45688"/&gt;
    &lt;socket-binding name="modcluster" port="0" multicast-address="224.0.1.105" multicast-port="23364"/&gt;
    &lt;socket-binding name="txn-recovery-environment" port="4712"/&gt;
    &lt;socket-binding name="txn-status-manager" port="4713"/&gt;
    &lt;outbound-socket-binding name="mail-smtp"&gt;
      &lt;remote-destination host="localhost" port="25"/&gt;
    &lt;/outbound-socket-binding&gt;
  &lt;/socket-binding-group&gt;
  &lt;socket-binding-group name="load-balancer-sockets" default-interface="public"&gt;
    &lt;!-- Needed for server groups using the 'load-balancer' profile  --&gt;
    ...
  &lt;/socket-binding-group&gt;
&lt;/socket-binding-groups&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The socket configuration for the management interfaces is defined in the domain controller’s <code class="literal">host.xml</code> file.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring_socket_bindings"/>Configuring Socket Bindings</h3></div></div></div><p>
						When defining a socket binding, you can configure the <code class="literal">port</code> and <code class="literal">interface</code> attributes, as well as multicast settings such as <code class="literal">multicast-address</code> and <code class="literal">multicast-port</code>. For details on all available socket bindings attributes, see the <a class="link" href="reference_material.html#reference_of_socket_binding_attributes" title="Socket Binding Attributes">Socket Binding Attributes</a> section.
					</p><p>
						Socket bindings can be configured using the management console or the management CLI. The following steps go through adding a socket binding group, adding a socket binding, and configuring socket binding settings using the management CLI.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Add a new socket binding group. Note that this step cannot be performed when running as a standalone server.
							</p><pre class="screen">/socket-binding-group=new-sockets:add(default-interface=public)</pre></li><li class="listitem"><p class="simpara">
								Add a socket binding.
							</p><pre class="screen">/socket-binding-group=new-sockets/socket-binding=new-socket-binding:add(port=1234)</pre></li><li class="listitem"><p class="simpara">
								Change the socket binding to use an interface other than the default, which is set by the socket binding group.
							</p><pre class="screen">/socket-binding-group=new-sockets/socket-binding=new-socket-binding:write-attribute(name=interface,value=unsecure)</pre></li></ol></div><p>
						The following example shows how the XML configuration may look after the above steps have been completed.
					</p><pre class="programlisting">&lt;socket-binding-groups&gt;
    ...
    &lt;socket-binding-group name="new-sockets" default-interface="public"&gt;
        &lt;socket-binding name="new-socket-binding" interface="unsecure" port="1234"/&gt;
    &lt;/socket-binding-group&gt;
&lt;/socket-binding-groups&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="port_offsets"/>Port Offsets</h3></div></div></div><p>
						A port offset is a numeric offset value added to all port values specified in the socket binding group for that server. This allows the server to inherit the port values defined in its socket binding group, with an offset to ensure that it does not conflict with any other servers on the same host. For instance, if the HTTP port of the socket binding group is <code class="literal">8080</code>, and a server uses a port offset of <code class="literal">100</code>, then its HTTP port is <code class="literal">8180</code>.
					</p><p>
						Below is an example of setting a port offset of <code class="literal">250</code> for a server in a managed domain using the management CLI.
					</p><pre class="screen">/host=master/server-config=server-two/:write-attribute(name=socket-binding-port-offset,value=250)</pre><p>
						Port offsets can be used for servers in a managed domain and for running multiple standalone servers on the same host.
					</p><p>
						You can pass in a port offset when starting a standalone server using the <code class="literal">jboss.socket.binding.port-offset</code> property.
					</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.sh -Djboss.socket.binding.port-offset=100</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ipv6_addresses"/>IPv6 Addresses</h2></div></div></div><p>
					By default, JBoss EAP is configured to run using IPv4 addresses. The steps below show how to configure JBoss EAP to run using IPv6 addresses.
				</p><h4><a id="configure_the_jvm_stack_for_ipv6_addresses"/>Configure the JVM Stack for IPv6 Addresses</h4><p>
					Update the startup configuration to prefer IPv6 addresses.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Open the startup configuration file.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									When running as a standalone server, edit the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/standalone.conf</code> file (or <code class="literal">standalone.conf.bat</code> for Windows Server).
								</li><li class="listitem">
									When running in a managed domain, edit the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/domain.conf</code> file (or <code class="literal">domain.conf.bat</code> for Windows Server).
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Set the <code class="literal">java.net.preferIPv4Stack</code> property to <code class="literal">false</code>.
						</p><pre class="screen">-Djava.net.preferIPv4Stack=false</pre></li><li class="listitem"><p class="simpara">
							Append the <code class="literal">java.net.preferIPv6Addresses</code> property and set it to <code class="literal">true</code>.
						</p><pre class="screen">-Djava.net.preferIPv6Addresses=true</pre></li></ol></div><p>
					The following example shows how the JVM options in the startup configuration file may look after making the above changes.
				</p><pre class="programlisting"># Specify options to pass to the Java VM.
#
if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS="-Xms1303m -Xmx1303m -Djava.net.preferIPv4Stack=false"
   JAVA_OPTS="$JAVA_OPTS -Djboss.modules.system.pkgs=$JBOSS_MODULES_SYSTEM_PKGS -Djava.awt.headless=true"
   JAVA_OPTS="$JAVA_OPTS -Djava.net.preferIPv6Addresses=true"
else</pre><h4><a id="update_interface_declarations_for_ipv6_addresses"/>Update Interface Declarations for IPv6 Addresses</h4><p>
					The default interface values in the configuration can be changed to IPv6 addresses. For example, the below management CLI command sets the <code class="literal">management</code> interface to the IPv6 loopback address (<code class="literal">::1</code>).
				</p><pre class="screen">/interface=management:write-attribute(name=inet-address,value="${jboss.bind.address.management:[::1]}")</pre><p>
					The following example shows how the XML configuration may look after running the above command.
				</p><pre class="programlisting">&lt;interfaces&gt;
    &lt;interface name="management"&gt;
        &lt;inet-address value="${jboss.bind.address.management:[::1]}"/&gt;
    &lt;/interface&gt;
    ....
&lt;/interfaces&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="optimizing_the_jboss_eap_server_configuration"/>Optimizing the JBoss EAP Server Configuration</h1></div></div></div><p>
				Once you have <a class="link" href="administering_jboss_eap.html#jboss_eap_installation_overview" title="Downloading and Installing JBoss EAP">installed the JBoss EAP server</a>, and you have <a class="link" href="administering_jboss_eap.html#adding_a_management_user" title="Adding a Management User">created a management user</a>, Red Hat recommends that you optimize your server configuration.
			</p><p>
				Make sure you review information in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/"><span class="emphasis"><em>Performance Tuning Guide</em></span></a> for information about how to optimize the server configuration to avoid common problems when deploying applications in a production environment. Common optimizations include <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/#setting_ulimits">setting ulimits</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/#enabling_garbage_collection">enabling garbage collection</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/#heap_dumps">creating Java heap dumps</a>, and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/performance_tuning_guide/#bean_thread_pools">adjusting the thread pool size</a>.
			</p><p>
				It is also a good idea to apply any existing patches for your release of the product. Each patch for EAP contains numerous bug fixes. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/patching_and_upgrading_guide/#patching-jboss-eap">Patching JBoss EAP</a> in the <span class="emphasis"><em>Patching and Upgrading Guide</em></span> for JBoss EAP.
			</p></div></div></body></html>