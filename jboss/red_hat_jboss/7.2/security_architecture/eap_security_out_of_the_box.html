<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. How Red Hat JBoss Enterprise Application Platform Handles Security out of the Box</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="eap_security_out_of_the_box"/>Chapter 2. How Red Hat JBoss Enterprise Application Platform Handles Security out of the Box</h1></div></div></div><p>
			There are three components that ship with JBoss EAP that relate to security:
		</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
					The <a class="link" href="eap_security_out_of_the_box.html#elytron_subsystem" title="Elytron Subsystem">Elytron Subsystem</a>, introduced in JBoss EAP 7.1
				</li><li class="listitem">
					<a class="link" href="eap_security_out_of_the_box.html#core_management_auth" title="Core Management Authentication">Core Management Authentication</a>
				</li><li class="listitem">
					The <a class="link" href="eap_security_out_of_the_box.html#security_subsystem" title="Security Subsystem">Security Subsystem</a>
				</li></ul></div><p>
			These components are based on the general security concepts discussed in the <a class="link" href="overview_of_general_security_concepts.html" title="Chapter 1. Overview of General Security Concepts">Overview of General Security Concepts</a>, but they also incorporate some JBoss EAP-specific concepts in their implementation.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="core_services_subsystems_and_profiles"/>Core Services, Subsystems, and Profiles</h1></div></div></div><p>
				JBoss EAP is built on the concept of modular class loading. Each API or service provided by JBoss EAP is implemented as a module, which is loaded and unloaded on demand. The core services are services that are always loaded on server startup and are required to be running prior to starting an additional subsystem.
			</p><p>
				A subsystem is a set of capabilities added to the core server by an extension. For example, different subsystems handle servlet processing, manage the EJB container, and provide JTA support.
			</p><p>
				A profile is a named list of subsystems, along with the details of each subsystem’s configuration. A profile with a large number of subsystems results in a server with a large set of capabilities. A profile with a small, focused set of subsystems will have fewer capabilities but a smaller footprint. By default, JBoss EAP comes with several predefined profiles, for example <code class="literal">default</code>, <code class="literal">full</code>, <code class="literal">ha</code>, <code class="literal">full-ha</code>. In these profiles, the management interfaces and the associated security realms are loaded as core services.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="management_interfaces"/>Management Interfaces</h1></div></div></div><p>
				JBoss EAP offers two main management interfaces for interacting with and editing its configuration: the management console and the management CLI. Both interfaces expose the functionality of the core management of JBoss EAP. These interfaces offer two ways to access the same core management system.
			</p><p>
				The management console is a web-based administration tool for JBoss EAP. It may be used to start and stop servers, deploy and undeploy applications, tune system settings, and make persistent modifications to the server configuration. The management console also has the ability to perform administrative tasks, with live notifications when any changes require the server instance to be restarted or reloaded. In a managed domain, server instances and server groups in the same domain can be centrally managed from the management console of the domain controller.
			</p><p>
				The management CLI is a command-line administration tool for JBoss EAP. The management CLI may be used to start and stop servers, deploy and undeploy applications, configure system settings, and perform other administrative tasks. Operations can be performed in batch mode, allowing multiple tasks to be run as a group. The management CLI may also connect to the domain controller in a managed domain to execute management operations on the domain. The management CLI can perform all tasks that the web-based administration tool can perform as well as many other lower-level operations that are unavailable to the web-based administration tool.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					In addition to the clients that ship with JBoss EAP, other clients can be written to invoke the management interfaces over either the HTTP or native interfaces using the APIs included with JBoss EAP.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jmx"/>JMX</h1></div></div></div><p>
				Java Management Extensions (JMX) provides a way to remotely trigger JDK and application management operations. The management API of JBoss EAP is exposed as JMX managed beans. These managed beans are referred to as core MBeans, and access to them is controlled and filtered exactly the same as the underlying management API itself.
			</p><p>
				In addition to the management CLI and management console, JMX-exposed beans are an alternative mechanism to access and perform management operations.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="rbac"/>Role-Based Access Control</h1></div></div></div><p>
				Role-Based Access Control (RBAC) is a mechanism for specifying a set of permissions for management users. It allows multiple users to share responsibility for managing JBoss EAP servers without each of them requiring unrestricted access. By providing a separation of duties for management users, JBoss EAP makes it easy for an organization to spread responsibility between individuals or groups without granting unnecessary privileges. This ensures the maximum possible security of your servers and data while still providing flexibility for configuration, deployment, and management.
			</p><p>
				RBAC in JBoss EAP works through a combination of role permissions and constraints. Seven predefined roles are provided, with every role having different fixed permissions. Each management user is assigned one or more roles that specify what the user is permitted to do when managing the server.
			</p><p>
				RBAC is disabled by default for JBoss EAP.
			</p><div class="title"><strong>Standard Roles</strong></div><p>
					JBoss EAP provides seven predefined user roles: <code class="literal">Monitor</code>, <code class="literal">Operator</code>, <code class="literal">Maintainer</code>, <code class="literal">Deployer</code>, <code class="literal">Auditor</code>, <code class="literal">Administrator</code>, and <code class="literal">SuperUser</code>. Each role has a different set of permissions and is designed for specific use cases. The <code class="literal">Monitor</code>, <code class="literal">Operator</code>, <code class="literal">Maintainer</code>, <code class="literal">Administrator</code>, and <code class="literal">SuperUser</code> roles build successively upon each other, with each having more permissions than the previous. The <code class="literal">Auditor</code> and <code class="literal">Deployer</code> roles are similar to the <code class="literal">Monitor</code> and <code class="literal">Maintainer</code> roles, respectively, but they have some special permissions and restrictions.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Monitor</span></dt><dd>
							Users of the <code class="literal">Monitor</code> role have the fewest permissions and can only read the current configuration and state of the server. This role is intended for users who need to track and report on the performance of the server. <code class="literal">Monitor</code> cannot modify server configuration, nor can they access sensitive data or operations.
						</dd><dt><span class="term">Operator</span></dt><dd>
							The <code class="literal">Operator</code> role extends the <code class="literal">Monitor</code> role by adding the ability to modify the runtime state of the server. This means that <code class="literal">Operator</code> can reload and shutdown the server as well as pause and resume JMS destinations. The <code class="literal">Operator</code> role is ideal for users who are responsible for the physical or virtual hosts of the application server so they can ensure that servers can be shutdown and restarted correctly when need be. <code class="literal">Operator</code> cannot modify server configuration or access sensitive data or operations.
						</dd><dt><span class="term">Maintainer</span></dt><dd>
							The <code class="literal">Maintainer</code> role has access to view and modify the runtime state and all configurations except sensitive data and operations. The <code class="literal">Maintainer</code> role is the general purpose role that does not have access to sensitive data and operation. The <code class="literal">Maintainer</code> role allows users to be granted almost complete access to administer the server without giving those users access to passwords and other sensitive information. <code class="literal">Maintainer</code> cannot access sensitive data or operations.
						</dd><dt><span class="term">Administrator</span></dt><dd>
							The <code class="literal">Administrator</code> role has unrestricted access to all resources and operations on the server except the audit logging system. The <code class="literal">Administrator</code> role has access to sensitive data and operations. This role can also configure the access control system. The <code class="literal">Administrator</code> role is only required when handling sensitive data or configuring users and roles. <code class="literal">Administrator</code> cannot access the audit logging system and cannot change themselves to the <code class="literal">Auditor</code> or <code class="literal">SuperUser</code> role.
						</dd><dt><span class="term">SuperUser</span></dt><dd>
							The <code class="literal">SuperUser</code> role does not have any restrictions, and it has complete access to all resources and operations of the server, including the audit logging system. If RBAC is disabled, all management users have permissions equivalent to the <code class="literal">SuperUser</code> role.
						</dd><dt><span class="term">Deployer</span></dt><dd>
							The <code class="literal">Deployer</code> role has the same permissions as the <code class="literal">Monitor</code>, but it can modify the configuration and state for deployments and any other resource type enabled as an application resource.
						</dd><dt><span class="term">Auditor</span></dt><dd>
							The <code class="literal">Auditor</code> role has all the permissions of the <code class="literal">Monitor</code> role and can also view, but not modify, sensitive data. It has full access to the audit logging system. The <code class="literal">Auditor</code> role is the only role besides <code class="literal">SuperUser</code> that can access the audit logging system. <code class="literal">Auditor</code> cannot modify sensitive data or resources. Only read access is permitted.
						</dd></dl></div><div class="title"><strong>Permissions</strong></div><p>
					<code class="literal">Permissions</code> determine what each role can do; not every role has every permission. Notably, <code class="literal">SuperUser</code> has every permission and <code class="literal">Monitor</code> has the least. Each permission can grant read and/or write access for a single category of resources. The categories are runtime state, server configuration, sensitive data, the audit log, and the access control system.
				</p><div class="table"><a id="idm140063397463536"/><p class="title"><strong>Table 2.1. Permissions of Each Role for Monitor, Operator, Maintainer and Deployer</strong></p><div class="table-contents"><table summary="Permissions of Each Role for Monitor, Operator, Maintainer and Deployer" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/><col class="col_4"/><col class="col_5"/></colgroup><thead><tr><th style="text-align: left" valign="top"> </th><th style="text-align: left" valign="top">Monitor</th><th style="text-align: left" valign="top">Operator</th><th style="text-align: left" valign="top">Maintainer</th><th style="text-align: left" valign="top">Deployer</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Read Config and State
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Read Sensitive Data <sup>2</sup>
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Modify Sensitive Data <sup>2</sup>
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Read/Modify Audit Log
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Modify Runtime State
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘<sup>1</sup>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Modify Persistent Config
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘<sup>1</sup>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Read/Modify Access Control
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td></tr></tbody></table></div></div><p>
				<sup>1</sup> Permissions are restricted to application resources.
			</p><div class="table"><a id="idm140063413474032"/><p class="title"><strong>Table 2.2. Permissions of Each Role for Auditor, Administration and SuperUser</strong></p><div class="table-contents"><table summary="Permissions of Each Role for Auditor, Administration and SuperUser" border="1" width="100%"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/><col class="col_4"/></colgroup><thead><tr><th style="text-align: left" valign="top"> </th><th style="text-align: left" valign="top">Auditor</th><th style="text-align: left" valign="top">Administrator</th><th style="text-align: left" valign="top">SuperUser</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Read Config and State
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Read Sensitive Data <sup>2</sup>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Modify Sensitive Data <sup>2</sup>
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Read/Modify Audit Log
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Modify Runtime State
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Modify Persistent Config
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Read/Modify Access Control
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								✘
							</p>
							 </td></tr></tbody></table></div></div><p>
				<sup>2</sup> Which resources are considered to be sensitive data are configured using sensitivity.
			</p><div class="title"><strong>Constraints</strong></div><p>
					Constraints are named sets of access-control configuration for a specified list of resources. The RBAC system uses the combination of constraints and role permissions to determine if any specific user can perform a management action.
				</p><p>
				Constraints are divided into three classifications.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Application Constraints</span></dt><dd>
							Application constraints define sets of resources and attributes that can be accessed by Deployer users. By default, the only enabled application constraint is core, which includes deployments and deployment overlays. Application constraints are also included, but not enabled by default, for data sources, logging, mail, messaging, naming, resource adapters, and security. These constraints allow Deployer users to not only deploy applications, but also configure and maintain the resources that are required by those applications.
						</dd><dt><span class="term">Sensitivity Constraints</span></dt><dd>
							Sensitivity constraints define sets of resources that are considered sensitive. A sensitive resource is generally one that is either secret, like a password, or one that will have serious impact on the operation of the server, like networking, JVM configuration, or system properties. The access control system itself is also considered sensitive. The only roles permitted to write to sensitive resources are Administrator and SuperUser. The Auditor role is only able to read sensitive resources. No other roles have access.
						</dd><dt><span class="term">Vault Expression Constraint</span></dt><dd>
							The vault expression constraint defines if reading and writing vault expressions are considered sensitive operations. By default, reading and writing vault expressions are sensitive operations.
						</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="declarative_security_and_jaas"/>Declarative Security and JAAS</h1></div></div></div><p>
				Declarative security is a method to separate security concerns from application code by using the container to manage security. The container provides an authorization system based on either file permissions or users, groups, and roles. This approach is usually superior to programmatic security, which gives the application itself all of the responsibility for security. JBoss EAP provides declarative security by using security domains in the <code class="literal">security</code> subsystem.
			</p><p>
				Java Authentication and Authorization Service (JAAS), is a declarative security API comprising a set of Java packages designed for user authentication and authorization. The API is a Java implementation of the standard Pluggable Authentication Modules (PAM) framework. It extends the Java EE access control architecture to support user-based authorization. The JBoss EAP <code class="literal">security</code> subsystem is actually based on the JAAS API.
			</p><p>
				Because JAAS is the foundation for the <code class="literal">security</code> subsystem, authentication is performed in a pluggable fashion. This permits Java applications to remain independent from underlying authentication technologies, such as Kerberos or LDAP, and allows the security manager to work in different security infrastructures. Integration with a security infrastructure is achievable without changing the security manager implementation. Only the configuration of the authentication stack that JAAS uses needs to be changed.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="elytron_subsystem"/>Elytron Subsystem</h1></div></div></div><p>
				The <code class="literal">elytron</code> subsystem was introduced in JBoss EAP 7.1. It is based on the WildFly Elytron project, which is a security framework used to unify security across the entire application server. The <code class="literal">elytron</code> subsystem enables a single point of configuration for securing both applications and the management interfaces. WildFly Elytron also provides a set of APIs and SPIs for providing custom implementations of functionality and integrating with the <code class="literal">elytron</code> subsystem.
			</p><p>
				In addition, there are several other important features of WildFly Elytron:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Stronger authentication mechanisms for HTTP and SASL authentication.
					</li><li class="listitem">
						Improved architecture that allows for <code class="literal">SecurityIdentities</code> to be propagated across security domains. This ensures transparent transformation that is ready to be used for authorization. This transformation takes place using configurable role decoders, role mappers, and permission mappers.
					</li><li class="listitem">
						Centralized point for SSL/TLS configuration including cipher suites and protocols.
					</li><li class="listitem">
						SSL/TLS optimizations such as eager <code class="literal">SecureIdentity</code> construction and closely tying authorization to establishing an SSL/TLS connection. Eager <code class="literal">SecureIdentity</code> construction eliminates the need for a <code class="literal">SecureIdentity</code> to be constructed on a per-request basis. Closely tying authentication to establishing an SSL/TLS connection enables permission checks to happen <span class="emphasis"><em>BEFORE</em></span> the first request is received.
					</li><li class="listitem">
						A secure credential store that replaces the previous vault implementation to store plain text strings.
					</li></ul></div><p>
				The new <code class="literal">elytron</code> subsystem exists in parallel to the legacy <code class="literal">security</code> subsystem and legacy core management authentication. Both the legacy and Elytron methods can be used for securing the management interfaces as well as providing security for applications.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					The architectures of Elytron and the legacy security subsystem that is based on PicketBox are very different. With Elytron, an attempt was made to create a solution that allows you to operate in the same security environments in which you currently operate; however, this does <span class="emphasis"><em>not</em></span> mean that every PicketBox configuration option has an equivalent configuration option in Elytron.
				</p><p>
					If you are not able to find information in the documentation to help you achieve similar functionality using Elytron that you had when using the legacy security implementation, you can find help in one of the following ways.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							If you have a <a class="link" href="https://access.redhat.com/support/offerings/developer/">Red Hat Development subscription</a>, you have access to <a class="link" href="https://access.redhat.com/support/cases/#/case/list">Support Cases</a>, <a class="link" href="https://access.redhat.com/solutions">Solutions</a>, and <a class="link" href="https://access.redhat.com/articles">Knowledge Articles</a> on the Red Hat Customer Portal. You can also open a case with <a class="link" href="https://access.redhat.com/support">Technical Support</a> and <a class="link" href="http://wildfly.org/gethelp/">get help</a> from the WildFly community as described below.
						</li><li class="listitem">
							If you do not have a Red Hat Development subscription, you can still access <a class="link" href="https://access.redhat.com/articles">Knowledge Articles</a> on the Red Hat Customer Portal. You can also join the <a class="link" href="http://wildfly.org/gethelp/">user forums and live chat</a> to ask questions of the WildFly community. The WildFly community offerings are actively monitored by the Elytron engineering team.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="elytron_core_concepts_components"/>Core Concepts and Components</h2></div></div></div><p>
					The concept behind the architecture and design of the <code class="literal">elytron</code> subsystem is using smaller components to assemble a full security policy. By default, JBoss EAP provides implementations for many components, but the <code class="literal">elytron</code> subsystem also allows you to provide specialized, custom implementations.
				</p><p>
					Each implementation of a component in the 'elytron' subsystem is handled as an individual capability. This means that different implementations can be mixed, matched and modeled using distinct resources.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="capabilities_and_requirements"/>Capabilities and Requirements</h3></div></div></div><p>
						A capability is a piece of functionality used in JBoss EAP and is exposed using the management layer. One capability can depend on other capabilities and this dependency is mediated by the management layer. Some capabilities are provided automatically by JBoss EAP, but the full set of available capabilities available at runtime are determined using the JBoss EAP configuration. The management layer validates that all capabilities required by other capabilities are present during server startup as well as when any configuration changes are made. Capabilities integrate with JBoss Modules and extensions, but they are all distinct concepts.
					</p><p>
						In addition to registering other capabilities it depends on, a capability must also register a set of requirements related to those capabilities. A capability can specify the following types of requirements:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Hard requirements</span></dt><dd>
									A capability is depended on another capability to function, therefore it must always be present.
								</dd><dt><span class="term">Optional requirements</span></dt><dd>
									An optional aspect of a capability depends on another capability, which can or can not be enabled. Therefore the requirement cannot be determined or known until the configuration is analyzed.
								</dd><dt><span class="term">Runtime-only requirements</span></dt><dd>
									A capability will check if the required capability exists at runtime. If the required capability is present it will be used. If the required capability is not present, it will not be used.
								</dd></dl></div><p>
						You can find more information on capabilities and requirements in the <a class="link" href="https://docs.jboss.org/author/display/WFLY/Extending+WildFly#ExtendingWildFly-Capabilities">WildFly documentation</a>.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="apis_spis_and_custom_implementations"/>APIs, SPIs and Custom Implementations</h3></div></div></div><p>
						Elytron provides a set of security APIs and SPIs so that other subsystems and consumers can use them directly, which reduces integration overhead. While the majority of users will use the provided functionality of JBoss EAP, the Elytron APIs and SPIs can also be used by custom implementations to replace or extend Elytron functionality.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security_domains-1"/>Security Domains</h3></div></div></div><p>
						A security domain is the representation of a security policy which is backed by one or more security realms and a set of resources that perform transformations. A security domain produces a <code class="literal">SecurityIdentity</code>. The <code class="literal">SecurityIdentity</code> is used by other resources that perform authorizations, such as an application. A <code class="literal">SecurityIdentity</code> is the representation of the current user, which is based on the raw <code class="literal">AuthorizationIdentity</code> and its associated roles and permissions.
					</p><p>
						You can also configure a security domain to allow <span class="emphasis"><em>inflow</em></span> of a <code class="literal">SecurityIdentity</code> from another security domain. When an identity is <span class="emphasis"><em>inflowed</em></span>, it retains its original raw <code class="literal">AuthorizationIdentity</code>, and a new set of roles and permissions are assigned to it, creating a new <code class="literal">SecurityIdentity</code>.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Deployments are limited to using one Elytron security domain per deployment. Scenarios that may have required multiple legacy security domains can now be accomplished using a single Elytron security domain.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security_realms"/>Security Realms</h3></div></div></div><p>
						Security realms provide access to an identity store and are used to obtain credentials. These credentials allow authentication mechanisms to obtain the raw <code class="literal">AuthorizationIdentity</code> for performing authentication. They also allow authentication mechanisms to perform verification when doing validation of evidence.
					</p><p>
						You can associate one or more security realms with a security domain. Some security realm implementations also expose an API for modifications, meaning the security realm can make updates to the underlying identity store.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="role_decoders-1"/>Role Decoders</h3></div></div></div><p>
						A role decoder is associated with a security domain and is used to decode the current user’s roles. The role decoder takes the raw <code class="literal">AuthorizationIdentity</code> returned from the security realm and converts its attributes into roles.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="role_mappers-1"/>Role Mappers</h3></div></div></div><p>
						A role mapper applies a role modification to an identity. This can range from normalizing the format of the roles to adding or removing specific roles. A role mapper can be associated with both security realms as well as security domains. In cases where a role mapper is associated with a security realm, the role mapping will be applied at the security realm level before any transformations, such as role decoding or additional role mapping, occur at the security domain level. If a role mapper and another transformation, such as a role decoder, are both configured in a security domain, all other transformations are performed before the role mapper is applied.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="permission_mappers-1"/>Permission Mappers</h3></div></div></div><p>
						A permission mapper is associated with a security domain and assigns a set of permissions to a <code class="literal">SecurityIdentity</code>.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="principal_transformers-1"/>Principal Transformers</h3></div></div></div><p>
						A principal transformer can be used in multiple locations within the <code class="literal">elytron</code> subsystem. A principal transformer can transform or map a name to another name.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="principal_decoders-1"/>Principal Decoders</h3></div></div></div><p>
						A principal decoder can be used in multiple locations within the <code class="literal">elytron</code> subsystem. A principal decoder converts an identity from a <code class="literal">Principal</code> to a string representation of the name. For example, the <code class="literal">X500PrincipalDecoder</code> allows you to convert an <code class="literal">X500Principal</code> from a certificate’s distinguished name to a string representation.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="realm_mappers-1"/>Realm Mappers</h3></div></div></div><p>
						A realm mapper is associated with a security domain and is used in cases where a security domain has multiple security realms configured. The realm mappers can be also associated with <code class="literal">mechanism</code> or <code class="literal">mechanism-realm</code> of <code class="literal">http-authentication-factory</code> and <code class="literal">sasl-authentication-factory</code>. The realm mapper uses the name provided during authentication to choose a security realm for authentication and obtaining the raw <code class="literal">AuthorizationIdentity</code>.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="authentication_factories"/>Authentication Factories</h3></div></div></div><p>
						An authentication factory is a representation of an authentication policy. An authentication is associated with security domain, mechanism factory, and a mechanism selector. The security domain provides the <code class="literal">SecurityIdentity</code> to be authenticated, the mechanism factory provides the server-side authentication mechanisms, and the mechanism selector is used to obtain configuration specific to the mechanism selected. The mechanism selector can include information about realm names a mechanism should present to a remote client plus additional principal transformers and realm mappers to use during the authentication process.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="keystores"/>KeyStores</h3></div></div></div><p>
						A <code class="literal">key-store</code> is the definition of a keystore or truststore including the type of keystore, its location, and credential for accessing it.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="key_managers"/>Key Managers</h3></div></div></div><p>
						A <code class="literal">key-manager</code> references a <code class="literal">key-store</code> and is used in conjunction with an SSL context.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="trust_managers"/>Trust Managers</h3></div></div></div><p>
						A <code class="literal">trust-manager</code> references as truststore, which is defined in a <code class="literal">key-store</code>, and is used in conjunction with an SSL context, usually for two-way SSL/TLS.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ssl_context"/>SSL Context</h3></div></div></div><p>
						The SSL context defined within the <code class="literal">elytron</code> subsystem is a <code class="literal">javax.net.ssl.SSLContext</code> meaning it can be used by anything that uses an SSL context directly. In addition to the usual configuration for an SSL context it is possible to configure additional items such as cipher suites and protocols. The SSL context will wrap any additional items that are configured.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="secure_credential_store"/>Secure Credential Store</h3></div></div></div><p>
						The previous vault implementation used for plain text string encryption has been replaced with a newly designed credential store. In addition to the protection for the credentials it stores, the credential store is used to store plain text strings.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="elytron_authentication_process"/>Elytron Authentication Process</h2></div></div></div><p>
					Multiple principal transformers, realm mappers, and a principal decoder can be defined within the <code class="literal">elytron</code> subsystem. The following sections discuss how these components function during the authentication process, and how principals are mapped to the appropriate security realm.
				</p><p>
					When a principal is authenticated it performs the following steps, in order:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							The appropriate mechanism configuration is determined and configured.
						</li><li class="listitem">
							The incoming principal is mapped into a <code class="literal">SecurityIdentity</code>.
						</li><li class="listitem">
							This <code class="literal">SecurityIdentity</code> is used to determine the appropriate security realm.
						</li><li class="listitem">
							After the security realm has been identified the principal is transformed again.
						</li><li class="listitem">
							One final transformation occurs to allow for mechanism-specific transformations.
						</li></ol></div><p>
					The following image demonstrates these steps, highlighted in the left column, along with showing the components used in each phase.
				</p><div class="figure"><a id="idm140063397523824"/><p class="title"><strong>Figure 2.1. Elytron Authentication Process</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/topics/images/elytron-authentication-process.png" alt="Elytron Authentication Process"/></div></div></div><h4><a id="pre_realm_mapping"/>Pre-realm Mapping</h4><p>
					During pre-realm mapping the authenticated principal is mapped to a <code class="literal">SecurityIdentity</code>, a form that can identify which security realm should be used, and will contain a single <code class="literal">Principal</code> that represents the authenticated information. Principal transformers and principal decoders are called in the following order:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Mechanism Realm - <code class="literal">pre-realm-principal-transformer</code>
						</li><li class="listitem">
							Mechanism Configuration - <code class="literal">pre-realm-principal-transformer</code>
						</li><li class="listitem">
							Security Domain - <code class="literal">principal-decoder</code> and <code class="literal">pre-realm-principal-transformer</code>
						</li></ol></div><p>
					If this procedure results in a null principal, then an error will be thrown and authentication will terminate.
				</p><div class="figure"><a id="idm140063380857152"/><p class="title"><strong>Figure 2.2. Pre-realm Mapping</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/topics/images/elytron-pre-realm-mapping.png" alt="Pre-realm Mapping"/></div></div></div><h4><a id="realm_name_mapping"/>Realm Name Mapping</h4><p>
					Once a mapped principal has been obtained, a security realm is identified which will be used to load the identity. At this point the realm name is the name defined by the security realm as referenced by the security domain, and is not yet the mechanism realm name. The configuration will look for a security realm name in the following order:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Mechanism Realm - <code class="literal">realm-mapper</code>
						</li><li class="listitem">
							Mechanism Configuration - <code class="literal">realm-mapper</code>
						</li><li class="listitem">
							Security Domain - <code class="literal">realm-mapper</code>
						</li></ol></div><p>
					If the <code class="literal">RealmMapper</code> returns null, or if no mapper is available, then the <code class="literal">default-realm</code> on the security domain will be used.
				</p><div class="figure"><a id="idm140063352000928"/><p class="title"><strong>Figure 2.3. Realm Name Mapping</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/topics/images/elytron-realm-mapping.png" alt="Realm Name Mapping"/></div></div></div><h4><a id="post_realm_mapping"/>Post-realm Mapping</h4><p>
					After a realm has been identified, the principal goes through another round of transformation. Transformers are called in the following order:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Mechanism Realm - <code class="literal">post-realm-principal-transformer</code>
						</li><li class="listitem">
							Mechanism Configuration - <code class="literal">post-realm-principal-transformer</code>
						</li><li class="listitem">
							Security Domain - <code class="literal">post-realm-principal-transformer</code>
						</li></ol></div><p>
					If this procedure results in a null principal, then an error will be thrown and authentication will terminate.
				</p><div class="figure"><a id="idm140063350815680"/><p class="title"><strong>Figure 2.4. Post-realm Mapping</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/topics/images/elytron-post-realm-mapping.png" alt="Post-realm Mapping"/></div></div></div><h4><a id="final_principal_transformation"/>Final Principal Transformation</h4><p>
					Finally, one last round of principal transformation occurs to allow for mechanism-specific transformations to be applied both before and after domain-specific transformations. If this stage is not required, then the same results can be obtained during the <a class="link" href="eap_security_out_of_the_box.html#post_realm_mapping" title="Post-realm Mapping">post-realm mapping</a> stage. Transformers are called in the following order:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Mechanism Realm - <code class="literal">final-principal-transformer</code>
						</li><li class="listitem">
							Mechanism Configuration - <code class="literal">final-principal-transformer</code>
						</li><li class="listitem">
							Realm Mapping - <code class="literal">principal-transformer</code>
						</li></ol></div><p>
					If this procedure results in a null principal, then an error will be thrown and authentication will terminate.
				</p><div class="figure"><a id="idm140063394661504"/><p class="title"><strong>Figure 2.5. Final Principal Transformation</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/topics/images/elytron-final-principal-transformation.png" alt="Final Principal Transformation"/></div></div></div><h4><a id="obtain_the_realm_identity"/>Obtain the Realm Identity</h4><p>
					After the final round of principal transformation, the security realm identified in <a class="link" href="eap_security_out_of_the_box.html#realm_name_mapping" title="Realm Name Mapping">realm name mapping</a> is called to obtain a realm identity used to continue authentication.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="http_authentication"/>HTTP Authentication</h2></div></div></div><p>
					Elytron provides a complete set of HTTP authentication mechanisms including <code class="literal">BASIC</code>, <code class="literal">FORM</code>, <code class="literal">DIGEST</code>, <code class="literal">SPNEGO</code>, and <code class="literal">CLIENT_CERT</code>. HTTP authentication is handled using the <code class="literal">HttpAuthenticationFactory</code>, which is both an authentication policy for using HTTP authentication mechanisms as well as factory for configured authentication mechanisms.
				</p><p>
					The <code class="literal">HttpAuthenticationFactory</code> references the following:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SecurityDomain</span></dt><dd>
								The security domain that any mechanism authentication will be performed against.
							</dd><dt><span class="term">HttpServerAuthenticationMechanismFactory</span></dt><dd>
								The general factory for server-side HTTP authentication mechanisms.
							</dd><dt><span class="term">MechanismConfigurationSelector</span></dt><dd>
								You can use this to supply additional configuration for the authentication mechanisms. The purpose of the <code class="literal">MechanismConfigurationSelector</code> is to obtain configuration specific for the mechanism selected. This can include information about realm names a mechanism should present to a remote client, additional principal transformers, and realm mappers to use during the authentication process.
							</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sasl_authentication"/>SASL Authentication</h2></div></div></div><p>
					SASL is a framework for authentication that separate the authentication mechanism itself from the protocol it uses. It also allows for additional authentication mechanisms such as <code class="literal">DIGEST-MD5</code>, <code class="literal">GSSAPI</code>, <code class="literal">OTP</code>, and <code class="literal">SCRAM</code>. SASL authentication is not part of the Java EE specification. SASL authentication is handled using the <code class="literal">SaslAuthenticationFactory</code>, which is both an authentication policy for using SASL authentication mechanisms as well as a factory for configured authentication mechanisms.
				</p><p>
					The <code class="literal">SaslAuthenticationFactory</code> references the following:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SecurityDomain</span></dt><dd>
								The security domain that any mechanism authentication will be performed against.
							</dd><dt><span class="term">SaslServerFactory</span></dt><dd>
								The general factory for server-side SASL authentication mechanisms.
							</dd><dt><span class="term">MechanismConfigurationSelector</span></dt><dd>
								You can use this to supply additional configuration for the authentication mechanisms. The purpose of the <code class="literal">MechanismConfigurationSelector</code> is to obtain configuration specific for the mechanism selected. This can include information about realm names a mechanism should present to a remote client, additional principal transformers, and realm mappers to use during the authentication process.
							</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="interaction_between_the_elytron_subsystem_and_legacy_systems"/>Interaction between the Elytron Subsystem and Legacy Systems</h2></div></div></div><p>
					You can map some of the major components of both the legacy <code class="literal">security</code> subsystem components as well as the legacy core management authentication to Elytron capabilities. This allows those legacy components to be used in an Elytron based configuration and allow for an incremental migration from legacy components.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="resources_in_the_elytron_subsystem"/>Resources in the Elytron Subsystem</h2></div></div></div><p>
					JBoss EAP provides a set of resources in the <code class="literal">elytron</code> subsystem:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#factories" title="Factories">Factories</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#principal_transformers" title="Principal Transformers">Principal Transformers</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#principal_decoders" title="Principal Decoders">Principal Decoders</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#realm_mappers" title="Realm Mappers">Realm Mappers</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#realms" title="Realms">Realms</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#permission_mappers" title="Permission Mappers">Permission Mappers</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#role_decoders" title="Role Decoders">Role Decoders</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#role_mappers" title="Role Mappers">Role Mappers</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#ssl_components" title="SSL Components">SSL Components</a>
						</li><li class="listitem">
							<a class="link" href="eap_security_out_of_the_box.html#other" title="Other">Other</a>
						</li></ul></div><h4><a id="factories"/>Factories</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">aggregate-http-server-mechanism-factory</span></dt><dd>
								An HTTP server factory definition where the HTTP server factory is an aggregation of other HTTP server factories.
							</dd><dt><span class="term">aggregate-sasl-server-factory</span></dt><dd>
								A SASL server factory definition where the SASL server factory is an aggregation of other SASL server factories.
							</dd><dt><span class="term">configurable-http-server-mechanism-factory</span></dt><dd>
								An HTTP server factory definition that wraps another HTTP server factory and applies the specified configuration and filtering.
							</dd><dt><span class="term">configurable-sasl-server-factory</span></dt><dd>
								A SASL server factory definition that wraps another SASL server factory and applies the specified configuration and filtering.
							</dd><dt><span class="term">custom-credential-security-factory</span></dt><dd>
								A custom credential <code class="literal">SecurityFactory</code> definition.
							</dd><dt><span class="term">http-authentication-factory</span></dt><dd><p class="simpara">
								Resource containing the association of a security domain with a <code class="literal">HttpServerAuthenticationMechanismFactory</code>.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#configure_authentication_with_certificates">Configure Authentication with Certificates</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">kerberos-security-factory</span></dt><dd><p class="simpara">
								A security factory for obtaining a <code class="literal">GSSCredential</code> for use during authentication.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_set_up_sso_with_kerberos/#elytron_http_auth_app">Configure the Elytron Subsystem</a> in <span class="emphasis"><em>How to Set Up SSO with Kerberos</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">mechanism-provider-filtering-sasl-server-factory</span></dt><dd>
								A SASL server factory definition that enables filtering by provider where the factory was loaded using a provider.
							</dd><dt><span class="term">provider-http-server-mechanism-factory</span></dt><dd>
								An HTTP server factory definition where the HTTP server factory is an aggregation of factories from the provider list.
							</dd><dt><span class="term">provider-sasl-server-factory</span></dt><dd>
								A SASL server factory definition where the SASL server factory is an aggregation of factories from the provider list.
							</dd><dt><span class="term">sasl-authentication-factory</span></dt><dd><p class="simpara">
								Resource containing the association of a security domain with a SASL server factory.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#elytron_secure_mgmt_new_identity_store">Secure the Management Interfaces with a New Identity Store</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">service-loader-http-server-mechanism-factory</span></dt><dd>
								An HTTP server factory definition where the HTTP server factory is an aggregation of factories identified using a <code class="literal">ServiceLoader</code>.
							</dd><dt><span class="term">service-loader-sasl-server-factory</span></dt><dd>
								A SASL server factory definition where the SASL server factory is an aggregation of factories identified using a <code class="literal">ServiceLoader</code>.
							</dd></dl></div><h4><a id="principal_transformers"/>Principal Transformers</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">aggregate-principal-transformer</span></dt><dd>
								Individual transformers attempt to transform the original principal until one returns a non-null principal.
							</dd><dt><span class="term">chained-principal-transformer</span></dt><dd>
								A principal transformer definition where the principal transformer is a chaining of other principal transformers.
							</dd><dt><span class="term">constant-principal-transformer</span></dt><dd>
								A principal transformer definition where the principal transformer always returns the same constant.
							</dd><dt><span class="term">custom-principal-transformer</span></dt><dd>
								A custom principal transformer definition.
							</dd><dt><span class="term">regex-principal-transformer</span></dt><dd>
								A regular expression based principal transformer.
							</dd><dt><span class="term">regex-validating-principal-transformer</span></dt><dd>
								A regular expression based principal transformer which uses the regular expression to validate the name.
							</dd></dl></div><h4><a id="principal_decoders"/>Principal Decoders</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">aggregate-principal-decoder</span></dt><dd>
								A principal decoder definition where the principal decoder is an aggregation of other principal decoders.
							</dd><dt><span class="term">concatenating-principal-decoder</span></dt><dd>
								A principal decoder definition where the principal decoder is a concatenation of other principal decoders.
							</dd><dt><span class="term">constant-principal-decoder</span></dt><dd>
								Definition of a principal decoder that always returns the same constant.
							</dd><dt><span class="term">custom-principal-decoder</span></dt><dd>
								Definition of a custom principal decoder.
							</dd><dt><span class="term">x500-attribute-principal-decoder</span></dt><dd><p class="simpara">
								Definition of a X500 attribute based principal decoder.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#configure_authentication_with_certificates">Configure Authentication with Certificates</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd></dl></div><h4><a id="realm_mappers"/>Realm Mappers</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">constant-realm-mapper</span></dt><dd>
								Definition of a constant realm mapper that always returns the same value.
							</dd><dt><span class="term">custom-realm-mapper</span></dt><dd>
								Definition of a custom realm mapper.
							</dd><dt><span class="term">mapped-regex-realm-mapper</span></dt><dd>
								Definition of a realm mapper implementation that first uses a regular expression to extract the realm name, this is then converted using the configured mapping of realm names.
							</dd><dt><span class="term">simple-regex-realm-mapper</span></dt><dd>
								Definition of a simple realm mapper that attempts to extract the realm name using the capture group from the regular expression, if that does not provide a match then the delegate realm mapper is used instead.
							</dd></dl></div><h4><a id="realms"/>Realms</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">aggregate-realm</span></dt><dd><p class="simpara">
								A realm definition that is an aggregation of two realms, one for the authentication steps and one for loading the identity for the authorization steps.
							</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
									The exported legacy security domain cannot be used as Elytron security realm for the authorization step of the <code class="literal">aggregate-realm</code>.
								</p></div></dd><dt><span class="term">caching-realm</span></dt><dd><p class="simpara">
								A realm definition that enables caching to another security realm. The caching strategy is <span class="emphasis"><em>Least Recently Used</em></span>, where the least accessed entries are discarded when the maximum number of entries is reached.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#elytron_apps_caching_realm">Set Up Caching for Security Realms</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">custom-modifiable-realm</span></dt><dd>
								Custom realm configured as being modifiable will be expected to implement the <code class="literal">ModifiableSecurityRealm</code> interface. By configuring a realm as being modifiable management operations will be made available to manipulate the realm.
							</dd><dt><span class="term">custom-realm</span></dt><dd>
								A custom realm definitions can implement either the s <code class="literal">SecurityRealm</code> interface or the <code class="literal">ModifiableSecurityRealm</code> interface. Regardless of which interface is implemented management operations will not be exposed to manage the realm. However other services that depend on the realm will still be able to perform a type check and cast to gain access to the modification API.
							</dd><dt><span class="term">filesystem-realm</span></dt><dd><p class="simpara">
								A simple security realm definition backed by the file system.
							</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
									<code class="literal">filesystem-realm</code> is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
								</p><p>
									See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
								</p></div><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#elytron_apps_filesystemAuth">Configure Authentication with a Filesystem-Based Identity Store</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">identity-realm</span></dt><dd>
								A security realm definition where identities are represented in the management model.
							</dd><dt><span class="term">jdbc-realm</span></dt><dd><p class="simpara">
								A security realm definition backed by database using JDBC.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#elytron_apps_DBAuth">Configure Authentication with a Database-Based Identity Store</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">key-store-realm</span></dt><dd><p class="simpara">
								A security realm definition backed by a keystore.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#configure_authentication_with_certificates">Configure Authentication with Certificates</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">ldap-realm</span></dt><dd><p class="simpara">
								A security realm definition backed by LDAP.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#elytron_ldap_auth_app">Configure Authentication with a LDAP-Based Identity Store</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">properties-realm</span></dt><dd><p class="simpara">
								A security realm definition backed by properties files.
							</p><p class="simpara">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#configure_authentication_with_a_properties_file_based_identity_store">Configure Authentication with a Properties File-Based Identity Store</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">token-realm</span></dt><dd>
								A security realm definition capable of validating and extracting identities from security tokens.
							</dd></dl></div><h4><a id="permission_mappers"/>Permission Mappers</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">custom-permission-mapper</span></dt><dd>
								Definition of a custom permission mapper.
							</dd><dt><span class="term">logical-permission-mapper</span></dt><dd>
								Definition of a logical permission mapper.
							</dd><dt><span class="term">simple-permission-mapper</span></dt><dd>
								Definition of a simple configured permission mapper.
							</dd><dt><span class="term">constant-permission-mapper</span></dt><dd>
								Definition of a permission mapper that always returns the same constant.
							</dd></dl></div><h4><a id="role_decoders"/>Role Decoders</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">custom-role-decoder</span></dt><dd>
								Definition of a custom RoleDecoder.
							</dd><dt><span class="term">simple-role-decoder</span></dt><dd><p class="simpara">
								Definition of a simple RoleDecoder that takes a single attribute and maps it directly to roles.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#elytron_apps_filesystemAuth">Configure Authentication with a Filesystem-Based Identity Store</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd></dl></div><h4><a id="role_mappers"/>Role Mappers</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">add-prefix-role-mapper</span></dt><dd>
								A role mapper definition for a role mapper that adds a prefix to each provided.
							</dd><dt><span class="term">add-suffix-role-mapper</span></dt><dd>
								A role mapper definition for a role mapper that adds a suffix to each provided.
							</dd><dt><span class="term">aggregate-role-mapper</span></dt><dd>
								A role mapper definition where the role mapper is an aggregation of other role mappers.
							</dd><dt><span class="term">constant-role-mapper</span></dt><dd><p class="simpara">
								A role mapper definition where a constant set of roles is always returned.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#configure_authentication_with_certificates">Configure Authentication with Certificates</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">custom-role-mapper</span></dt><dd>
								Definition of a custom role mapper.
							</dd><dt><span class="term">logical-role-mapper</span></dt><dd>
								A role mapper definition for a role mapper that performs a logical operation using two referenced role mappers.
							</dd><dt><span class="term">mapped-role-mapper</span></dt><dd>
								A role mapper definition for a role mapper that uses preconfigured mapping of role names.
							</dd></dl></div><h4><a id="ssl_components"/>SSL Components</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">client-ssl-context</span></dt><dd><p class="simpara">
								An SSLContext for use on the client side of a connection.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#using_client_ssl_context">Using a client-ssl-context</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">filtering-key-store</span></dt><dd><p class="simpara">
								A filtering keystore definition, which provides a keystore by filtering a <code class="literal">key-store</code>.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#using_filtering_key_store">Using a filtering-key-store</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">key-manager</span></dt><dd><p class="simpara">
								A key manager definition for creating the key manager list as used to create an SSL context.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#elytron_one_way_ssl_mgmt">Enable One-way SSL/TLS for the Management Interfaces Using the Elytron Subsystem</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">key-store</span></dt><dd><p class="simpara">
								A keystore definition.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#elytron_one_way_ssl_mgmt">Enable One-way SSL/TLS for the Management Interfaces Using the Elytron Subsystem</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">ldap-key-store</span></dt><dd><p class="simpara">
								An LDAP keystore definition, which loads a keystore from an LDAP server.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#using_ldap_key_store">Using an ldap-key-store</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">server-ssl-context</span></dt><dd><p class="simpara">
								An SSL context for use on the server side of a connection.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#elytron_one_way_ssl_mgmt">Enable One-way SSL/TLS for the Management Interfaces Using the Elytron Subsystem</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">trust-manager</span></dt><dd><p class="simpara">
								A trust manager definition for creating the <code class="literal">TrustManager</code> list as used to create an SSL context.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#elytron_two-way_ssl_mgmt">Enable Two-way SSL/TLS for the Management Interfaces using the Elytron Subsystem</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd></dl></div><h4><a id="other"/>Other</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">aggregate-providers</span></dt><dd>
								An aggregation of two or more <code class="literal">provider-loader</code> resources.
							</dd><dt><span class="term">authentication-configuration</span></dt><dd>
								An individual authentication configuration definition, which is used by clients deployed to JBoss EAP and other resources for authenticating when making a remote connection.
							</dd><dt><span class="term">authentication-context</span></dt><dd>
								An individual authentication context definition, which is used to supply an <code class="literal">ssl-context</code> and <code class="literal">authentication-configuration</code> when clients deployed to JBoss EAP and other resources make a remoting connection.
							</dd><dt><span class="term">credential-store</span></dt><dd><p class="simpara">
								Credential store to keep alias for sensitive information such as passwords for external services.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#cred_store_create">Create a Credential Store</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">dir-context</span></dt><dd><p class="simpara">
								The configuration to connect to a directory (LDAP) server.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_server_security/#using_ldap_key_store">Using an ldap-key-store</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">provider-loader</span></dt><dd>
								A definition for a provider loader.
							</dd><dt><span class="term">security-domain</span></dt><dd><p class="simpara">
								A security domain definition.
							</p><p class="simpara">
								For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/how_to_configure_identity_management/#configure_authentication_with_certificates">Configure Authentication with Certificates</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p></dd><dt><span class="term">security-property</span></dt><dd>
								A definition of a security property to be set.
							</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="core_management_auth"/>Core Management Authentication</h1></div></div></div><p>
				Core management authentication is responsible for securing the management interfaces, HTTP and native, for the core management functionality using the <code class="literal">ManagementRealm</code>. It is built into the core management and is enabled and configured as a core service by default. It is only responsible for securing the management interfaces.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security_realms_2"/>Security Realms</h2></div></div></div><p>
					A security realm is an identity store of usernames, passwords, and group membership information that can be used when authenticating users in EJBs, web applications, and the management interface. Initially, JBoss EAP comes preconfigured with two security realms by default: <code class="literal">ManagementRealm</code> and <code class="literal">ApplicationRealm</code>. Both security realms use the file system to store mappings between users and passwords and users and group membership information. They both use a digest mechanism by default when authenticating.
				</p><p>
					A digest mechanism is an authentication mechanism that authenticates the user by making use of one-time, one-way hashes comprising various pieces of information, including information stored in the usernames and passwords mapping property file. This allows JBoss EAP to authenticate users without sending any passwords in plain text over the network.
				</p><p>
					The JBoss EAP installation contains a script that enables administrators to add users to both realms. When users are added in this way, the username and hashed password are stored in the corresponding usernames and passwords properties file. When a user attempts to authenticate, JBoss EAP sends back a one-time use number, nonce, to the client. The client then generates a one-way hash using its username, password, nonce, and a few other fields, and sends the username, nonce, and one-way hash to JBoss EAP. JBoss EAP looks up the user’s prehashed password and uses it, along with the provided username, nonce, and a few other fields, to generate another one-way hash in the same manner. If all the same information is used on both sides, including the correct password, hashes will match and the user is authenticated.
				</p><p>
					Although security realms use the digest mechanism by default, they may be reconfigured to use other authentication mechanisms. On startup, the management interfaces determine which authentication mechanisms will be enabled based on what authentication mechanisms are configured in <code class="literal">ManagementRealm</code>.
				</p><p>
					Security realms are not involved in any authorization decisions; however, they can be configured to load a user’s group membership information, which can subsequently be used to make authorization decisions. After a user has been authenticated, a second step occurs to load the group membership information based on the username.
				</p><p>
					By default, the <code class="literal">ManagementRealm</code> is used during authentication and authorization for the management interfaces. The <code class="literal">ApplicationRealm</code> is a default realm made available for web applications and EJBs to use when authenticating and authorizing users.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="default_security"/>Default Security</h2></div></div></div><p>
					By default, the core management authentication secures each of the management interfaces, HTTP and native, in two different forms: local clients and remote clients, both of which are configured using the <code class="literal">ManagementRealm</code> security realm by default. These defaults may be configured differently or replaced entirely.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						Out of the box, the management interfaces are configured to use simple access controls, which does not use roles. As a result, all users by default, when using simple access controls, have the same privileges as the SuperUser role, which essentially has access to everything.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="local_and_remote_client_authentication_with_the_native_interface"/>Local and Remote Client Authentication with the Native Interface</h3></div></div></div><p>
						The native interface, or management CLI, can be invoked locally on the same host as the running JBoss EAP instance or remotely from another machine. When attempting to connect using the native interface, JBoss EAP presents the client with a list of available SASL authentication mechanisms, for example, <code class="literal">local jboss user</code>, BASIC, etc. The client chooses its desired authentication mechanism and attempts to authenticate with the JBoss EAP instance. If it fails, it retries with any remaining mechanisms or stops attempting to connect. Local clients have the option to use the <code class="literal">local jboss user</code> authentication mechanism. This security mechanism is based on the client’s ability to access the local file system. It validates that the user attempting to log in actually has access to the local file system on the same host as the JBoss EAP instance.
					</p><p>
						This authentication mechanism happens in four steps:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								The client sends a message to the server that includes a request to authenticate using <code class="literal">local jboss user</code>.
							</li><li class="listitem">
								The server generates a one-time token, writes it to a unique file, and sends a message to the client with the full path of the file.
							</li><li class="listitem">
								The client reads the token from the file and sends it to the server, verifying that it has local access to the file system.
							</li><li class="listitem">
								The server verifies the token and then deletes the file.
							</li></ol></div><p>
						This form of authentication is based on the principle that if physical access to the file system is achieved, other security mechanisms are superfluous. The reasoning is that if a user has local file system access, that user has enough access to create a new user or otherwise thwart other security mechanisms put in place. This is sometimes referred to as silent authentication because it allows the local user to access the management CLI without username or password authentication.
					</p><p>
						This functionality is enabled as a convenience and to assist local users running management CLI scripts without requiring additional authentication. It is considered a useful feature given that access to the local configuration typically also gives the user the ability to add their own user details or otherwise disable security checks.
					</p><p>
						The native interface can also be accessed from other servers, or even the same server, as a remote client. When accessing the native interface as a remote client, clients will not be able to authenticate using <code class="literal">local jboss user</code> and will be forced to use another authentication mechanism, for example, DIGEST. If a local client fails to authenticate by using <code class="literal">local jboss user</code>, it will automatically fall back and attempt to use the other mechanisms as a remote client.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The management CLI may be invoked from other servers, or even the same server, using the HTTP interface as opposed to the native interface. All HTTP connections, CLI or otherwise, are considered to be remote and <span class="strong"><strong>NOT</strong></span> covered by local interface authentication.
						</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							By default, the native interface is not configured, and all management CLI traffic is handled by the HTTP interface. JBoss EAP 7 supports HTTP upgrade, which allows a client to make an initial connection over HTTP but then send a request to upgrade that connection to another protocol. In the case of the management CLI, an initial request over HTTP to the HTTP interface is made, but then the connection is upgraded to the native protocol. This connection is still handled over the HTTP interface, but it is using the native protocol for communication rather than HTTP. Alternatively, the native interface may still be enabled and used if desired.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="local_and_remote_client_authentication_with_http_interfaces"/>Local and Remote Client Authentication with the HTTP Interface</h3></div></div></div><p>
						The HTTP interface can be invoked locally by clients on the same host as the running JBoss EAP instance or remotely by clients from another machine. Despite allowing local and remote clients to access the HTTP interface, all clients accessing the HTTP interface are treated as remote connections.
					</p><p>
						When a client attempts to connect to the HTTP management interfaces, JBoss EAP sends back an HTTP response with a status code of <code class="literal">401 Unauthorized</code>, and a set of headers that list the supported authentication mechanisms, for example, Digest, GSSAPI, and so on. The header for Digest also includes the nonce generated by JBoss EAP. The client looks at the headers and chooses which authentication method to use and sends an appropriate response. In the case where the client chooses Digest, it prompts the user for their username and password. The client uses the supplied fields such as username and password, the nonce, and a few other pieces of information to generate a one-way hash. The client then sends the one-way hash, username, and nonce back to JBoss EAP as a response. JBoss EAP takes that information, generates another one-way hash, compares the two, and authenticates the user based on the result.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="advanced_security"/>Advanced Security</h2></div></div></div><p>
					There are a number of ways to change the default configuration of management interfaces as well as the authentication and authorization mechanisms to affect how it is secured.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating_the_management_interfaces"/>Updating the Management Interfaces</h3></div></div></div><p>
						In addition to modifying the Authentication and Authorization mechanisms, JBoss EAP allows administrators to update the configuration of the management interface itself. There are a number of options.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Configuring the Management Interfaces to Use One-way SSL/TLS</span></dt><dd>
									Configuring the JBoss EAP management console for communication only using one-way SSL/TLS provides increased security. All network traffic between the client and management console is encrypted, which reduces the risk of security attacks, such as a man-in-the-middle attack. Anyone administering a JBoss EAP instance has greater permissions on that instance than non-privileged users, and using one-way SSL/TLS helps protect the integrity and availability of that instance. When configuring one-way SSL/TLS with JBoss EAP, authority-signed certificates are preferred over self-signed certificates because they provide a chain of trust. Self-signed certificates are permitted but are not recommended.
								</dd><dt><span class="term">Using Two-way SSL/TLS</span></dt><dd>
									Two-way SSL/TLS authentication, also known as client authentication, authenticates the client and the server using SSL/TLS certificates. This provides assurance that not only is the server what it says it is, but the client is also what it says it is.
								</dd><dt><span class="term">Updating or Creating a New Security Realm</span></dt><dd>
									The default security realm can be updated or replaced with a new security realm.
								</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="adding_outbound_connections"/>Adding Outbound Connections</h3></div></div></div><p>
						Some security realms connect to external interfaces, such as an LDAP server. An outbound connection defines how to make this connection. A predefined connection type, <code class="literal">ldap-connection</code>, sets all of the required and optional attributes to connect to the LDAP server and verify the credential.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="adding_rbac_to_the_management_interfaces"/>Adding RBAC to the Management Interfaces</h3></div></div></div><p>
						By default the RBAC system is disabled. It is enabled by changing the <code class="literal">provider</code> attribute from <code class="literal">simple</code> to <code class="literal">rbac</code>. This can be done using the management CLI. When RBAC is disabled or enabled on a running server, the server configuration must be reloaded before it takes effect.
					</p><p>
						When RBAC is enabled for the management interfaces, the role assigned to a user determines the resources to which they have access and what operations they can conduct with a resource’s attributes. Only users of the <code class="literal">Administrator</code> or <code class="literal">SuperUser</code> role can view and make changes to the access control system.
					</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							Enabling RBAC without having users and roles properly configured could result in administrators being unable to log in to the management interfaces.
						</p></div><div class="title"><strong>RBAC’s Effect on the Management Console</strong></div><p>
							In the management console, some controls and views are disabled, which show up as grayed out, or not visible at all, depending on the permissions of the role the user has been assigned.
						</p><p>
						If the user does not have read permissions to a resource attribute, that attribute will appear blank in the console. For example, most roles cannot read the username and password fields for data sources.
					</p><p>
						If the user has read permissions but does not have write permissions to a resource attribute, that attribute will be disabled in the edit form for the resource. If the user does not have write permissions to the resource, the edit button for the resource will not appear.
					</p><p>
						If a user does not have permissions to access a resource or attribute, meaning it is unaddressable for that role, it will not appear in the console for that user. An example of that is the access control system itself, which is only visible to a few roles by default.
					</p><p>
						The management console also provides an interface for the following common RBAC tasks:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								View and configure what roles are assigned to, or excluded from, each user.
							</li><li class="listitem">
								View and configure what roles are assigned to, or excluded from, each group.
							</li><li class="listitem">
								View group and user membership per role.
							</li><li class="listitem">
								Configure default membership per role.
							</li><li class="listitem">
								Create a scoped role.
							</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							Constraints cannot be configured in the management console at this time.
						</p></div><div class="title"><strong>RBAC’s Effect on the Management CLI or Management API</strong></div><p>
							Users of the management CLI or management API will encounter slightly different behavior when RBAC is enabled.
						</p><p>
						Resources and attributes that cannot be read are filtered from results. If the filtered items are addressable by the role, their names are listed as <code class="literal">filtered-attributes</code> in the <code class="literal">response-headers</code> section of the result. If a resource or attribute is not addressable by the role, it is not listed.
					</p><p>
						Attempting to access a resource that is not addressable will result in a <code class="literal">Resource Not Found</code> error.
					</p><p>
						If a user attempts to write or read a resource that they can address but lacks the appropriate write or read permissions, a <code class="literal">Permission Denied</code> error is returned.
					</p><p>
						The management CLI can perform all of same RBAC tasks as the management console as well as a few additional tasks:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								Enable and disable RBAC
							</li><li class="listitem">
								Change permission combination policy
							</li><li class="listitem">
								Configuring application resource and resource sensitivity constraints
							</li></ul></div><div class="title"><strong>RBAC’s Effect on JMX Managed Beans</strong></div><p>
							Role-Based Access Control applies to JMX in three ways:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								The management API of JBoss EAP is exposed as JMX managed beans. These managed beans are referred to as <code class="literal">core mbeans</code>, and access to them is controlled and filtered exactly the same as the underlying management API itself.
							</li><li class="listitem">
								The <code class="literal">jmx</code> subsystem is configured with write permissions being sensitive. This means only users of the <code class="literal">Administrator</code> and <code class="literal">SuperUser</code> roles can make changes to that subsystem. Users of the <code class="literal">Auditor</code> role can also read this subsystem configuration.
							</li><li class="listitem">
								By default, managed beans registered by deployed applications and services, or non-core MBeans, can be accessed by all management users, but only users of the <code class="literal">Maintainer</code>, <code class="literal">Operator</code>, <code class="literal">Administrator</code>, and <code class="literal">SuperUser</code> roles can write to them.
							</li></ol></div><div class="title"><strong>RBAC Authentication</strong></div><p>
							RBAC works with the standard authentication providers that are included with JBoss EAP:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Username/Password</span></dt><dd>
									Users are authenticated using a username and password combination that is verified according to the settings of the <code class="literal">ManagementRealm</code>, which has the ability to use a local properties file or LDAP.
								</dd><dt><span class="term">Client Certificate</span></dt><dd>
									The truststore provides authentication information for client certificates.
								</dd><dt><span class="term">local jboss user</span></dt><dd>
									The <code class="literal">jboss-cli</code> script authenticates automatically as <code class="literal">local jboss user</code> if the server is running on the same machine. By default <code class="literal">local jboss user</code> is a member of the <code class="literal">SuperUser</code> group.
								</dd></dl></div><p>
						Regardless of which provider is used, JBoss EAP is responsible for assigning roles to users. When authenticating with the <code class="literal">ManagementRealm</code> or an LDAP server, those systems can supply user group information. This information can also be used by JBoss EAP to assign roles to users.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="using_ldap_with_the_management_interfaces"/>Using LDAP with the Management Interfaces</h3></div></div></div><p>
						JBoss EAP includes several authentication and authorization modules that allow an LDAP server to be used as the authentication and authorization authority for web and EJB applications.
					</p><p>
						To use an LDAP directory server as the authentication source for the management console, management CLI, or management API, the following tasks must be performed:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Create an outbound connection to the LDAP server.
							</li><li class="listitem">
								Create an LDAP-enabled security realm or update an existing security realm to use LDAP.
							</li><li class="listitem">
								Reference the new security realm in the management interface.
							</li></ol></div><p>
						The LDAP authenticator operates by first establishing a connection to the remote directory server. It then performs a search using the username, which the user passed to the authentication system, to find the fully qualified distinguished name (DN) of the LDAP record. A new connection to the LDAP server is established, using the DN of the user as the credential and password supplied by the user. If this authentication to the LDAP server is successful, the DN is verified as valid.
					</p><p>
						Once an LDAP-enabled security realm is created, it can be referenced by the management interface. The management interface will use the security realm for authentication. JBoss EAP can also be configured to use an outbound connection to an LDAP server using two-way SSL/TLS for authentication in the management interface and management CLI.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="jaas_and_the_management_interfaces"/>JAAS and the Management Interfaces</h3></div></div></div><p>
						JAAS can be used to secure the management interfaces. When using JAAS for the management interfaces, the security realm must be configured to use a security domain. This introduces a dependency between core services and the subsystems. While SSL/TLS is not required to use JAAS to secure the management interfaces, it is recommended that administrators enable SSL/TLS to avoid accidentally transmitting sensitive information in an unsecured manner.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							When JBoss EAP instances are running in <code class="literal">admin-only</code> mode, using JAAS to secure the management interfaces is not supported. For more information on <code class="literal">admin-only</code> mode, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#running_eap_in_admin_only_mode">Running JBoss EAP in Admin-only Mode</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
						</p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="security_subsystem"/>Security Subsystem</h1></div></div></div><p>
				The <code class="literal">security</code> subsystem provides security infrastructure for applications and is based on the JAAS API. The subsystem uses a security context associated with the current request to expose the capabilities of the authentication manager, authorization manager, audit manager, and mapping manager to the relevant container.
			</p><p>
				The authentication and authorization managers handle authentication and authorization. The mapping manager handles adding, modifying, or deleting information from a principal, role, or attribute before passing the information to the application. The auditing manager allows users to configure provider modules to control the way that security events are reported.
			</p><p>
				In most cases, administrators should need to focus only on setting up and configuring security domains in regards to updating the configuration of the <code class="literal">security</code> subsystem. Outside of security domains, the only security element that may need to be changed is <code class="literal">deep-copy-subject-mode</code>. See the <a class="link" href="eap_security_out_of_the_box.html#security-management" title="Security Management">Security Management</a> section for more information on deep copy subject mode.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security_domains"/>Security Domains</h2></div></div></div><p>
					A security domain is a set of Java Authentication and Authorization Service (JAAS) declarative security configurations that one or more applications use to control authentication, authorization, auditing, and mapping. Four security domains are included by default: <code class="literal">jboss-ejb-policy</code>, <code class="literal">jboss-web-policy</code>, <code class="literal">other</code>, and <code class="literal">jaspitest</code>. The <code class="literal">jboss-ejb-policy</code> and <code class="literal">jboss-web-policy</code> security domains are the default authorization mechanisms for the JBoss EAP instance. They are used if an application’s configured security domain does not define any authentication mechanisms. Those security domains, along with <code class="literal">other</code>, are also used internally within JBoss EAP for authorization and are required for correct operation. The <code class="literal">jaspitest</code> security domain is a simple JASPI security domain included for development purposes.
				</p><p>
					A security domain comprises configurations for authentication, authorization, security mapping, and auditing. Security domains are part of the JBoss EAP <code class="literal">security</code> subsystem and are managed centrally by the domain controller or standalone server. Users can create as many security domains as needed to accommodate application requirements.
				</p><p>
					You can also configure the type of authentication cache to be used by a security domain, using the <code class="literal">cache-type</code> attribute. If this attribute is removed, no cache will be used. The allowed values for this property are <code class="literal">default</code> or <code class="literal">infinispan</code>.
				</p><h4><a id="comparison_between_elytron_and_picketbox_security_domains"/>Comparison Between Elytron and PicketBox Security Domains</h4><p>
					A deployment should be associated with either a single Elytron security domain or one or more legacy PicketBox security domain. A deployment should not be associated with both. That is an invalid configuration.
				</p><p>
					An exception occurs if a deployment is associated with more than one Elytron security domain, whereas a deployment can be associated with multiple legacy security domains.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						When working with PicketBox, the security domain encapsulates both access to the underlying identity store and the mapping for authorization decisions. Thus, users of PicketBox with different stores are required to use different security domains for different sources.
					</p><p>
						In Elytron, these two functions are separated. Access to the stores is handled by security realms and mapping for authorization is handled by security domains.
					</p><p>
						So, a deployment requiring independent PicketBox security domains does not necessarily require independent Elytron security domains.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_security_realms_and_security_domains"/>Using Security Realms and Security Domains</h2></div></div></div><p>
					Security realms and security domains can be used to secure web applications deployed to JBoss EAP. When deciding if either should be used, it is important to understand the difference between the two.
				</p><p>
					Web applications and EJB deployments can only use security domains directly. They perform the actual authentication and authorization using login modules using the identity information passed from an identity store. Security domains can be configured to use security realms for identity information; for example, <code class="literal">other</code> allows applications to specify a security realm to use for authentication and getting authorization information. They can also be configured to use external identity stores. Web applications and EJB deployments cannot be configured to directly use security realms for authentication. The security domains are also part of the <code class="literal">security</code> subsystem and are loaded after core services.
				</p><p>
					Only the core management, for example the management interfaces and the EJB remoting endpoints, can use the security realms directly. They are identity stores that provide authentication as well as authorization information. They are also a core service and are loaded before any subsystems are started. The out-of-the-box security realms, <code class="literal">ManagementRealm</code> and <code class="literal">ApplicationRealm</code>, use a simple file-based authentication mechanism, but they can be configured to use other mechanisms.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security_auditing"/>Security Auditing</h2></div></div></div><p>
					Security auditing refers to triggering events, such as writing to a log, in response to an event that happens within the <code class="literal">security</code> subsystem. Auditing mechanisms are configured as part of a security domain, along with authentication, authorization, and security mapping details. Auditing uses provider modules to control the way that security events are reported. JBoss EAP ships with several security auditing providers, but custom ones may be used. The core management of JBoss EAP also has its own security auditing and logging functionality, which is configured separately and is not part of the <code class="literal">security</code> subsystem.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security_mapping"/>Security Mapping</h2></div></div></div><p>
					Security mapping adds the ability to combine authentication and authorization information after the authentication or authorization happens but before the information is passed to your application. Roles for authorization, principals for authentication, or credentials which are attributes that are not principals or roles, may all be mapped. Role mapping is used to add, replace, or remove roles to the subject after authentication. Principal mapping is used to modify a principal after authentication. You can use credential mapping to convert attributes from an external system to be used by your application. You can also use credential mapping conversely, to convert attributes from your application for use by an external system.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="password_vault_system"/>Password Vault System</h2></div></div></div><p>
					JBoss EAP has a password vault to encrypt sensitive strings, store them in an encrypted keystore, and decrypt them for applications and verification systems. In plain text configuration files, such as XML deployment descriptors, it is sometimes necessary to specify passwords and other sensitive information. The JBoss EAP password vault can be used to securely store sensitive strings for use in plain text files.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security_domain_configuration"/>Security Domain Configuration</h2></div></div></div><p>
					Security domains are configured centrally either at the domain controller or on the standalone server. When security domains are used, an application may be configured to use a security domain in lieu of individually configuring security. This allows users and administrators to leverage <a class="link" href="eap_security_out_of_the_box.html#declarative_security_and_jaas" title="Declarative Security and JAAS">Declarative Security</a>.
				</p><div class="title"><strong>Example</strong></div><p>
						One common scenario that benefits from this type of configuration structure is the process of moving applications between testing and production environments. If an application has its security individually configured, it may need to be updated every time it is promoted to a new environment, for example, from a testing environment to a production environment. If that application used a security domain instead, the JBoss EAP instances in the individual environments would have their security domains properly configured for the current environment, allowing the application to rely on the container to provide the proper security configuration, using the security domain.
					</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="login_modules"/>Login Modules</h3></div></div></div><p>
						JBoss EAP includes several bundled login modules suitable for most user management roles that are configured within a security domain. The <code class="literal">security</code> subsystem offers some core login modules that can read user information from a relational database, an LDAP server, or flat files. In addition to these core login modules, JBoss EAP provides other login modules that provide user information and functionality for customized needs.
					</p><div class="variablelist"><p class="title"><strong>Summary of Commonly Used Login Modules</strong></p><dl class="variablelist"><dt><span class="term">Ldap Login Module</span></dt><dd>
									The Ldap login module is a login module implementation that authenticates against an LDAP server. The <code class="literal">security</code> subsystem connects to the LDAP server using connection information, that is, a <code class="literal">bindDN</code> that has permissions to search the <code class="literal">baseCtxDN</code> and <code class="literal">rolesCtxDN</code> trees for the user and roles, provided using a JNDI initial context. When a user attempts to authenticate, the LDAP login module connects to the LDAP server and passes the user’s credentials to the LDAP server. Upon successful authentication, an <code class="literal">InitialLDAPContext</code> is created for that user within JBoss EAP, populated with the user’s roles.
								</dd><dt><span class="term">LdapExtended Login Module</span></dt><dd>
									The LdapExtended login module searches for the user as well as the associated roles to bind for authentication. The roles query recursively and follow DNs to navigate a hierarchical role structure. The login module options include whatever options are supported by the chosen LDAP JNDI provider supports.
								</dd><dt><span class="term">UsersRoles Login Module</span></dt><dd>
									The UsersRoles login module is a simple login module that supports multiple users and user roles loaded from Java properties files. The primary purpose of this login module is to easily test the security settings of multiple users and roles using properties files deployed with the application.
								</dd><dt><span class="term">Database Login Module</span></dt><dd>
									The Database login module is a Java Database Connectivity-based (JDBC) login module that supports authentication and role mapping. This login module is used if username, password, and role information are stored in a relational database. This works by providing a reference to logical tables containing principals and roles in the expected format.
								</dd><dt><span class="term">Certificate Login Module</span></dt><dd>
									The Certificate login module authenticates users based on X509 certificates. A typical use case for this login module is CLIENT-CERT authentication in the web tier. This login module only performs authentication and must be combined with another login module capable of acquiring authorization roles to completely define access to secured web or EJB components. Two subclasses of this login module, <code class="literal">CertRolesLoginModule</code> and <code class="literal">DatabaseCertLoginModule</code>, extend the behavior to obtain the authorization roles from either a properties file or database.
								</dd><dt><span class="term">Identity Login Module</span></dt><dd>
									The Identity login module is a simple login module that associates a hard-coded username to any subject authenticated against the module. It creates a <code class="literal">SimplePrincipal</code> instance using the name specified by the principal option. This login module is useful when a fixed identity is required to be provided to a service. This can also be used in development environments for testing the security associated with a given principal and associated roles.
								</dd><dt><span class="term">RunAs Login Module</span></dt><dd>
									The RunAs login module is a helper module that pushes a run-as role onto the stack for the duration of the login phase of authentication; it then pops the run-as role from the stack in either the commit or abort phase. The purpose of this login module is to provide a role for other login modules that must access secured resources to perform their authentication, for example, a login module that accesses a secured EJB. The RunAs login module must be configured ahead of the login modules that require a run as role established.
								</dd><dt><span class="term">Client Login Module</span></dt><dd>
									The Client login module is an implementation of a login module for use by JBoss clients when establishing caller identity and credentials. This creates a new <code class="literal">SecurityContext</code>, assigns it a principal and a credential, and sets the <code class="literal">SecurityContext</code> to the <code class="literal">ThreadLocal</code> security context. The Client login module is the only supported mechanism for a client to establish the current thread’s caller. Both standalone client applications and server environments, acting as JBoss EJB clients where the security environment has not been configured to use the JBoss EAP <code class="literal">security</code> subsystem transparently, must use the Client login module.
								</dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							This login module does not perform any authentication. It merely copies the login information provided to it into the server EJB invocation layer for subsequent authentication on the server. Within JBoss EAP, this is only supported for switching a user’s identity for in-JVM calls. This is <span class="emphasis"><em>not</em></span> supported for remote clients to establish an identity.
						</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">SPNEGO Login Module</span></dt><dd>
									The SPNEGO login module is an implementation of a login module that establishes caller identity and credentials with a KDC. The module implements SPNEGO and is a part of the JBoss Negotiation project. This authentication can be used in the chained configuration with the AdvancedLdap login module to allow cooperation with an LDAP server. Web applications must also enable the <code class="literal">NegotiationAuthenticator</code> within the application to use this login module.
								</dd><dt><span class="term">RoleMapping Login Module</span></dt><dd>
									The RoleMapping login module supports mapping roles that are the end result of the authentication process to one or more declarative roles. For example, if the authentication process has determined that the user John has the roles <code class="literal">ldapAdmin</code> and <code class="literal">testAdmin</code>, and the declarative role defined in the <code class="literal">web.xml</code> or <code class="literal">ejb-jar.xml</code> file for access is <code class="literal">admin</code>, then this login module maps the <code class="literal">ldapAdmin</code> and <code class="literal">testAdmin</code> roles to John. The RoleMapping login module must be defined as an optional module to a login module configuration as it alters mapping of the previously mapped roles.
								</dd><dt><span class="term">Remoting Login Module</span></dt><dd>
									The Remoting login module checks if the request that is currently being authenticated was received over the remoting connection. In cases where the request was received using the remoting interface, that request is associated with the identity created during the authentication process.
								</dd><dt><span class="term">RealmDirect Login Module</span></dt><dd>
									The RealmDirect login module allows an existing security realm to be used in making authentication and authorization decisions. When configured, this module will look up identity information using the referenced realm for making authentication decisions and mapping user roles. For example, the preconfigured <code class="literal">other</code> security domain that ships with JBoss EAP has a RealmDirect login module. If no realm is referenced in this module, the <code class="literal">ApplicationRealm</code> security realm is used by default.
								</dd><dt><span class="term">Custom Modules</span></dt><dd>
									In cases where the login modules bundled with the JBoss EAP security framework do not meet the needs of the security environment, a custom login module implementation may be written. The AuthenticationManager requires a particular usage pattern of the Subject principals set. A full understanding of the JAAS Subject class’s information storage features and the expected usage of these features are required to write a login module that works with the AuthenticationManager.
								</dd></dl></div><p>
						The UnauthenticatedIdentity login module option is also commonly used. There are certain cases when requests are not received in an authenticated format. The Unauthenticated Identity is a login module configuration option that assigns a specific identity, for example, <code class="literal">guest</code>, to requests that are made with no associated authentication information. This can be used to allow unprotected servlets to invoke methods on EJBs that do not require a specific role. Such a principal has no associated roles and can only access either unsecured EJBs or EJB methods that are associated with the unchecked permission constraint.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="password_stacking"/>Password Stacking</h3></div></div></div><p>
						Multiple login modules can be chained together in a stack, with each login module providing the credentials verification and role assignment during authentication. This works for many use cases, but sometimes credentials verification and role assignment are split across multiple user management stores.
					</p><p>
						Consider the case where users are managed in a central LDAP server and application-specific roles are stored in the application’s relational database. The <code class="literal">password-stacking</code> module option captures this relationship.
					</p><p>
						To use password stacking, each login module should set the <code class="literal">password-stacking</code> attribute to <code class="literal">useFirstPass</code>, which is located in the <code class="literal">&lt;module-option&gt;</code> section. If a previous module configured for password stacking has authenticated the user, all the other stacking modules will consider the user authenticated and only attempt to provide a set of roles for the authorization step.
					</p><p>
						When the <code class="literal">password-stacking</code> option is set to <code class="literal">useFirstPass</code>, this module first looks for a shared username and password under the property names <code class="literal">javax.security.auth.login.name</code> and <code class="literal">javax.security.auth.login.password</code>, respectively, in the login module shared state map.
					</p><p>
						If found, these properties are used as the principal name and password. If not found, the principal name and password are set by this login module and stored under the property names <code class="literal">javax.security.auth.login.name</code> and <code class="literal">javax.security.auth.login.password</code>, respectively.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="password_hashing"/>Password Hashing</h3></div></div></div><p>
						Most login modules must compare a client-supplied password to a password stored in a user management system. These modules generally work with plain text passwords, but they can be configured to support hashed passwords to prevent plain text passwords from being stored on the server side. JBoss EAP supports the ability to configure the hashing algorithm, encoding, and character set. It also defines when the user password and store password are hashed.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Red Hat JBoss Enterprise Application Platform Common Criteria certified configuration does not support hash algorithms weaker than SHA-256.
						</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security-management"/>Security Management</h2></div></div></div><p>
					The security management portion of the <code class="literal">security</code> subsystem is used to override the high-level behaviors of the <code class="literal">security</code> subsystem. Each setting is optional. It is unusual to change any of these settings except for the deep copy subject mode.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="deep_copy_mode"/>Deep Copy Mode</h3></div></div></div><p>
						If the deep copy subject mode is disabled, which it is by default, copying a security data structure makes a reference to the original rather than copying the entire data structure. This behavior is more efficient, but it is prone to data corruption if multiple threads with the same identity clear the subject by means of a flush or logout operation.
					</p><p>
						If the deep copy subject mode is enabled, a complete copy of the data structure, along with all its associated data as long as they are marked cloneable, is made. This is more thread-safe but less efficient.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="additional_components"/>Additional Components</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="jaspi"/>JASPI</h3></div></div></div><p>
						Java Authentication SPI for Containers (JASPI or JASPIC) is a pluggable interface for Java applications and is defined in <a class="link" href="http://www.jcp.org/en/jsr/detail?id=196">JSR-196</a>. In addition to JAAS authentication, JBoss EAP allows for JASPI authentication to be used. JASPI authentication is configured using login modules in a security domain, and those modules may be stacked. The <code class="literal">jaspitest</code> security domain is a simple JASPI security domain that is included by default for development purposes. The web-based management console does not expose the configuration of JASPI authentication modules. Applications deployed to JBoss EAP require a special authenticator to be configured in their deployment descriptors to use JASPI security domains.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="jacc"/>JACC</h3></div></div></div><p>
						Java Authorization Contract for Containers (JACC) is a standard that defines a contract between containers and authorization service providers, which results in the implementation of providers for use by containers. It was defined in <a class="link" href="http://jcp.org/en/jsr/detail?id=115">JSR-115</a> and has been part of the core Java EE specification since version 1.3.
					</p><p>
						JBoss EAP implements support for JACC within the security functionality of the <code class="literal">security</code> subsystem.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="about_fine_grained_authorization_and_xacml"/>About Fine-Grained Authorization and XACML</h3></div></div></div><p>
						Fine-grained authorization allows administrators to adapt to the changing requirements and multiple variables involved in the decision making process for granting access to a module. As a result, fine-grained authorization can become complex.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The XACML bindings, for web or EJB, are not supported in JBoss EAP.
						</p></div><p>
						JBoss EAP uses XACML as a medium to achieve fine-grained authorization. XACML provides standards-based solution to the complex nature of achieving fine-grained authorization. XACML defines a policy language and an architecture for decision making. The XACML architecture includes a Policy Enforcement Point (PEP) which intercepts any requests in a normal program flow and asks a Policy Decision Point (PDP) to make an access decision based on the policies associated with the PDP. The PDP evaluates the XACML request created by the PEP and runs through the policies to make one of the following access decisions.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">PERMIT</span></dt><dd>
									The access is approved.
								</dd><dt><span class="term">DENY</span></dt><dd>
									The access is denied.
								</dd><dt><span class="term">INDETERMINATE</span></dt><dd>
									There is an error at the PDP.
								</dd><dt><span class="term">NOTAPPLICABLE</span></dt><dd>
									There is some attribute missing in the request or there is no policy match.
								</dd></dl></div><p>
						XACML also has the following features:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								Oasis XACML v2.0 library
							</li><li class="listitem">
								JAXB v2.0 based object model
							</li><li class="listitem">
								ExistDB integration for storing and retrieving XACML policies and attributes
							</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="legacy_sso"/>SSO</h3></div></div></div><p>
						JBoss EAP provides out-of-the-box support for clustered and non-clustered SSO using the <code class="literal">undertow</code> and <code class="literal">infinispan</code> subsystems. This requires:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								A configured security domain that handles authentication and authorization.
							</li><li class="listitem">
								The <code class="literal">SSO</code> infinispan replication cache. It is present in the <code class="literal">ha</code> and <code class="literal">full-ha</code> profiles for a managed domain, or by using the <code class="literal">standalone-ha.xml</code> or <code class="literal">standalone-full-ha.xml</code> configuration files for a standalone server.
							</li><li class="listitem">
								The <code class="literal">web</code> cache-container and <code class="literal">SSO</code> replication cache within it must be present.
							</li><li class="listitem">
								The <code class="literal">undertow</code> subsystem needs to be configured to use SSO.
							</li><li class="listitem">
								Each application that will share the SSO information must be configured to use the same security domain.
							</li></ul></div></div></div></div></div></body></html>