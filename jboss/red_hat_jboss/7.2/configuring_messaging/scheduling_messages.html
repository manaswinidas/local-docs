<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 13. Scheduling Messages</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="scheduling_messages"/>Chapter 13. Scheduling Messages</h1></div></div></div><p>
				You can specify a time in the future, at the earliest, for a message to be delivered. This can be done by setting the <code class="literal">_AMQ_SCHED_DELIVERY</code> scheduled delivery property before the message is sent.
			</p><p>
				The specified value must be a positive <code class="literal">long</code> that corresponds to the time in milliseconds for the message to be delivered. Below is an example of sending a scheduled message using the JMS API.
			</p><pre class="programlisting">// Create a message to be delivered in 5 seconds
TextMessage message = session.createTextMessage("This is a scheduled message message that will be delivered in 5 sec.");
message.setLongProperty("_AMQ_SCHED_DELIVERY", System.currentTimeMillis() + 5000);
producer.send(message);

...

// The message will not be received immediately, but 5 seconds later
TextMessage messageReceived = (TextMessage) consumer.receive();</pre><p>
				Scheduled messages can also be sent using the core API by setting the <code class="literal">_AMQ_SCHED_DELIVERY</code> property before sending the message.
			</p></div></body></html>