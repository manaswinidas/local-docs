<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 4. Configuring Messaging Destinations</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configure_destinations_artemis"/>Chapter 4. Configuring Messaging Destinations</h1></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					Remember, configuring messaging destinations requires JBoss EAP to have messaging enabled. This functionality is enabled by default when running with the <code class="literal">standalone-full.xml</code> or <code class="literal">standalone-full-ha.xml</code> configuration files. The <code class="literal">domain.xml</code> configuration file also has messaging enabled.
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="adding_a_queue"/>Adding a Queue</h1></div></div></div><p>
					To add a JMS queue, use the <code class="literal">jms-queue</code> command from the management CLI:
				</p><pre class="screen">jms-queue add --queue-address=myQueue --entries=[queue/myQueue jms/queue/myQueue java:jboss/exported/jms/queue/myQueue]</pre><p>
					Note how the <code class="literal">entries</code> attribute is a list containing multiple JNDI names separated by a single space. Also note the use of square brackets, <code class="literal">[]</code>, to enclose the list of JNDI names. The <code class="literal">queue-address</code> provides routing configuration, and <code class="literal">entries</code> provides a list of JNDI names that clients can use to look up the queue.
				</p><h2><a id="reading_a_queue_s_attributes"/>Reading a Queue’s Attributes</h2><p>
					You can read a queue’s configuration using the <code class="literal">jms-queue</code> command in the management CLI.
				</p><pre class="screen">jms-queue read-resource --queue-address=myQueue</pre><p>
					Alternatively, you can read a queue’s configuration by accessing the <code class="literal">messaging-activemq</code> subsystem using the management CLI:
				</p><pre class="screen">/subsystem=messaging-activemq/server=default/jms-queue=myQueue:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "durable" =&gt; true,
        "entries" =&gt; ["queue/myQueue jms/queue/myQueue java:jboss/exported/jms/queue/myQueue"],
        "legacy-entries" =&gt; undefined,
        "selector" =&gt; undefined
    }
}</pre><h2><a id="attributes_of_a_literal_jms_queue_literal"/>Attributes of a <code class="literal">jms-queue</code></h2><p>
					The management CLI displays all the attributes of the <code class="literal">jms-queue</code> configuration element when given the following command:
				</p><pre class="screen">/subsystem=messaging-activemq/server=default/jms-queue=*:read-resource-description()</pre><p>
					The table below provides all the attributes of a <code class="literal">jms-queue</code>:
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Attribute</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									consumer-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of consumers consuming messages from this queue. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									dead-letter-address
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The address to send dead messages to. See <a class="link" href="configure_dead_letter_addresses">Configuring Dead Letter Addresses</a> for more information.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									delivering-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages that this queue is currently delivering to its consumers. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									durable
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Whether the queue is durable or not. See <a class="link" href="messaging_styles">Messaging Styles</a> for more information on durable subscriptions.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									entries
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The list of JNDI names the queue will be bound to. Required.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									expiry-address
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The address that will receive expired messages. See <a class="link" href="set_message_expiry">Configuring Message Expiry</a> for details.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									legacy-entries
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The JNDI names the queue will be bound to.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									message-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages currently in this queue. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									messages-added
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages added to this queue since it was created. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									paused
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Whether the queue is paused. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									queue-address
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The queue address defines what address is used for routing messages. See <a class="link" href="configure_address_settings">Configuring Address Settings</a> for details on address settings. Required.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									scheduled-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of scheduled messages in this queue. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									selector
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The queue selector. For more information on selectors see <a class="link" href="filter_expressions_message_selectors">Filter Expressions and Message Selectors</a>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									temporary
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Whether the queue is temporary. See <a class="link" href="temporary_queues_and_runtime_queues">Temporary Queues and Runtime Queues</a> for more information.
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="adding_a_topic"/>Adding a Topic</h1></div></div></div><p>
					Adding or reading a topic is much like adding a queue:
				</p><pre class="screen">jms-topic add --topic-address=myTopic --entries=[topic/myTopic jms/topic/myTopic java:jboss/exported/jms/topic/myTopic]</pre><h2><a id="reading_a_topic_s_attributes"/>Reading a Topic’s Attributes</h2><p>
					Reading topic attributes also has syntax similar to that used for a queue:
				</p><pre class="screen">jms-topic read-resource --topic-address=myTopic

entries
  topic/myTopic jms/topic/myTopic java:jboss/exported/jms/topic/myTopic
legacy-entries=n/a</pre><pre class="screen">/subsystem=messaging-activemq/server=default/jms-topic=myTopic:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "entries" =&gt; ["topic/myTopic jms/topic/myTopic java:jboss/exported/jms/topic/myTopic"],
        "legacy-entries" =&gt; undefined
    }
}</pre><h2><a id="attributes_of_a_literal_jms_topic_literal"/>Attributes of a <code class="literal">jms-topic</code></h2><p>
					The management CLI displays all the attributes of the <code class="literal">jms-topic</code> configuration element when given the following command:
				</p><pre class="screen">/subsystem=messaging-activemq/server=default/jms-topic=*:read-resource-description()</pre><p>
					The table below lists the attributes of a <code class="literal">jms-topic</code>:
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Attribute</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									delivering-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages that this queue is currently delivering to its consumers. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									durable-message-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages for all durable subscribers for this topic. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									durable-subscription-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of durable subscribers for this topic. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									entries
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The JNDI names the topic will be bound to. Required.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									legacy-entries
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The legacy JNDI names the topic will be bound to.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									message-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages currently in this queue. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									messages-added
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages added to this queue since it was created. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									non-durable-message-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of messages for all non-durable subscribers for this topic. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									non-durable-subscription-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of non-durable subscribers for this topic. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									subscription-count
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The number of (durable and non-durable) subscribers for this topic. Available at runtime.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									temporary
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Whether the topic is temporary.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									topic-address
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The address the topic points to. Required.
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="jndi_entries_and_clients"/>JNDI Entries and Clients</h1></div></div></div><p>
					A queue or topic must be bound to the <code class="literal">java:jboss/exported</code> namespace for a remote client to be able to look it up. The client must use the text after <code class="literal">java:jboss/exported/</code> when doing the lookup. For example, a queue named <code class="literal">testQueue</code> has for its <code class="literal">entries</code> the list <code class="literal">jms/queue/test java:jboss/exported/jms/queue/test</code>. A remote client wanting to send messages to <code class="literal">testQueue</code> would look up the queue using the string <code class="literal">jms/queue/test</code>. A local client on the other hand could look it up using <code class="literal">java:jboss/exported/jms/queue/test</code>, <code class="literal">java:jms/queue/test</code>, or more simply <code class="literal">jms/queue/test</code>.
				</p><h2><a id="management_cli_help"/>Management CLI Help</h2><p>
					You can find more information about the <code class="literal">jms-queue</code> and <code class="literal">jms-topic</code> commands by using the <code class="literal">--help --commands</code> flags:
				</p><pre class="screen">jms-queue --help --commands</pre><pre class="screen">jms-topic --help --commands</pre></div></div></body></html>