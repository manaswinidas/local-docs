<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 35. Tuning Persistence</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="tuning_persistence"/>Chapter 35. Tuning Persistence</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						Put the message journal on its own physical volume.
					</p><p class="simpara">
						One of the advantages of an append-only journal is that disk head movement is minimized. This advantage is lost if the disk is shared. When multiple processes, such as a transaction coordinator, databases, and other journals, read and write from the same disk, performance is impacted because the disk head must skip around between different files. If you are using paging or large messages, make sure they are also put on separate volumes.
					</p></li><li class="listitem"><p class="simpara">
						Tune the <code class="literal">journal-min-files</code> value.
					</p><p class="simpara">
						Set the <code class="literal">journal-min-files</code> parameter to the number of files that fits your average sustainable rate. If you frequently see new files being created on the journal data directory, meaning a lot data is being persisted, you need to increase the minimal number of files. This allows the journal to reuse, rather than create, new data files.
					</p></li><li class="listitem"><p class="simpara">
						Optimize the journal file size.
					</p><p class="simpara">
						The journal file size must be aligned to the capacity of a cylinder on the disk. The default value of <code class="literal">10MB</code> should be enough on most systems.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">AIO</code> journal type.
					</p><p class="simpara">
						For Linux operating systems, keep your journal type as <code class="literal">AIO</code>. <code class="literal">AIO</code> scales better than Java <code class="literal">NIO</code>.
					</p></li><li class="listitem"><p class="simpara">
						Tune the <code class="literal">journal-buffer-timeout</code> value.
					</p><p class="simpara">
						Increasing the <code class="literal">journal-buffer-timeout</code> value results in increased throughput at the expense of latency.
					</p></li><li class="listitem"><p class="simpara">
						Tune the <code class="literal">journal-max-io</code> value.
					</p><p class="simpara">
						If you are using <code class="literal">AIO</code>, you might be able improve performance by increasing the <code class="literal">journal-max-io</code> parameter value. Do not change this value if you are using <code class="literal">NIO</code>.
					</p></li></ul></div></div></body></html>