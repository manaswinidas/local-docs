<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 5. Configuring Logging</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_logging_messaging"/>Chapter 5. Configuring Logging</h1></div></div></div><p>
				You can configure logging for the <code class="literal">messaging-activemq</code> subsystem by adding a log category in the JBoss EAP <code class="literal">logging</code> subsystem for <code class="literal">org.apache.activemq</code> and setting the desired log level. You can also configure a log handler for the category to configure how the log messages are recorded.
			</p><p>
				To see more information in the logs regarding XA transactions, change the log level of the <code class="literal">com.arjuna</code> category to a more verbose setting such as <code class="literal">TRACE</code> or <code class="literal">DEBUG</code>.
			</p><p>
				For more information on logging, including configuration for categories and other options, see the section on <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#logging_with_jboss_eap">logging</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
			</p><div class="table"><a id="idm139716558400368"/><p class="title"><strong>Table 5.1. Logging Categories</strong></p><div class="table-contents"><table summary="Logging Categories" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">If you want logs for…​</th><th style="text-align: left" valign="top">Use this category…​</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								XA transactions
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								com.arjuna
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								All messaging activity
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								org.apache.activemq
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Messaging Journal calls only
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								org.apache.activemq.artemis.journal
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								JMS calls only
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								org.apache.activemq.artemis.jms
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Messaging utils calls only
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								org.apache.activemq.artemis.utils
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Messaging core server only
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								org.apache.activemq.artemis.core.server
							</p>
							 </td></tr></tbody></table></div></div><h2><a id="configuring_a_client_for_logging"/>Configuring a Client for Logging</h2><p>
				Configure messaging clients by following these steps.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Download dependencies to the JBoss JMS client and log manager.
					</p><p class="simpara">
						If you are using Maven, add the following dependencies to your <code class="literal">pom.xml</code> file:
					</p><pre class="programlisting">&lt;dependencies&gt;
  ...
  &lt;dependency&gt;
     &lt;groupId&gt;org.jboss.logmanager&lt;/groupId&gt;
     &lt;artifactId&gt;jboss-logmanager&lt;/artifactId&gt;
     &lt;version&gt;1.5.3.Final&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.eap&lt;/groupId&gt;
      &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;
      &lt;type&gt;pom&lt;/type&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;</pre><p class="simpara">
						For more information, see the section on <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/development_guide/#using_maven_with_eap">using Maven with JBoss EAP</a> in the JBoss EAP <span class="emphasis"><em>Development Guide</em></span>.
					</p></li><li class="listitem"><p class="simpara">
						Create a properties file for the logger. Name it <code class="literal">logging.properties</code> and save it to a known location. Below is an example properties file. See the section on <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/development_guide/#logging_for_developers">logging</a> in the JBoss EAP <span class="emphasis"><em>Development Guide</em></span> for more information on configuring logging options on the client side.
					</p><pre class="screen"># Root logger option
loggers=org.jboss.logging,org.apache.activemq.artemis.core.server,org.apache.activemq.artemis.utils,org.apache.activemq.artemis.journal,org.apache.activemq.artemis.jms,org.apache.activemq.artemis.ra

# Root logger level
logger.level=INFO
# Apache ActiveMQ Artemis logger levels
logger.org.apache.activemq.artemis.jms.level=INFO
logger.org.apache.activemq.artemis.journal.level=INFO
logger.org.apache.activemq.artemis.utils.level=INFO
logger.org.apache.activemq.artemis.core.server.level=INFO

# Root logger handlers
logger.handlers=FILE

# File handler configuration
handler.FILE=org.jboss.logmanager.handlers.FileHandler
handler.FILE.level=FINE
handler.FILE.properties=autoFlush,fileName
handler.FILE.autoFlush=true
handler.FILE.fileName=activemq.log
handler.FILE.formatter=PATTERN

# Formatter pattern configuration
formatter.PATTERN=org.jboss.logmanager.formatters.PatternFormatter
formatter.PATTERN.properties=pattern
formatter.PATTERN.pattern=%d{HH:mm:ss,SSS} %-5p [%c] %s%E%n</pre></li><li class="listitem"><p class="simpara">
						Start the client with the expected parameters. When starting your client code using the <code class="literal">java</code> command, add the following parameters:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Add the JBoss client and logger JARs to the class path:
							</p><pre class="screen">-cp <span class="emphasis"><em>/PATH/TO</em></span>/jboss-client.jar:<span class="emphasis"><em>/PATH/TO</em></span>/jboss-logmanager.jar</pre></li><li class="listitem"><p class="simpara">
								Enable the JBoss logging manager:
							</p><pre class="screen">-Djava.util.logging.manager=org.jboss.logmanager.LogManager</pre></li><li class="listitem"><p class="simpara">
								Set the location of the logging properties file:
							</p><pre class="screen">-Dlogging.configuration=<span class="emphasis"><em>/PATH/TO</em></span>/logging.properties</pre></li></ol></div><p class="simpara">
						The full command to start the client will look something like the following example:
					</p></li></ol></div><pre class="screen">$ java -Djava.util.logging.manager=org.jboss.logmanager.LogManager -Dlogging.configuration=<span class="emphasis"><em>/PATH/TO</em></span>/logging.properties -cp <span class="emphasis"><em>/PATH/TO</em></span>/jboss-client.jar:<span class="emphasis"><em>/PATH/TO</em></span>/jboss-logmanager.jar org.example.MyClient</pre></div></body></html>