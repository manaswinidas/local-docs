<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 22. Message Grouping</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="about_message_grouping"/>Chapter 22. Message Grouping</h1></div></div></div><p>
				A message group is a group of messages that share certain characteristics:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						All messages in a message group are grouped under a common group ID. This means that they can be identified with a common group property.
					</li><li class="listitem">
						All messages in a message group are serially processed and consumed by the same consumer, irrespective of the number of customers on the queue. This means that a specific message group with a unique group id is always processed by one consumer when the consumer opens it. If the consumer closes the message group, then the entire message group is directed to another consumer in the queue.
					</li></ul></div><p>
				Message groups are especially useful when there is a need for messages with a certain value of the property, such as group ID, to be processed serially by a single consumer.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Message grouping will not work as expected if the queue has paging enabled. Be sure to <a class="link" href="configuring_paging.html#paging_mode" title="Configuring Paging Mode">disable paging</a> before configuring a queue for message grouping.
				</p></div><p>
				For information about configuring message grouping within a cluster of messaging servers, see <a class="link" href="clusters_overview.html#clustered_grouping" title="Clustered Message Grouping">Clustered Message Grouping</a> in Part III, <a class="link" href="advanced_configuration.html" title="Part III. Configuring Multi-Node Messaging Systems">Configuring Multiple Messaging Systems</a>.
			</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_message_groups_core_api"/>Configuring Message Groups Using the Core API</h1></div></div></div><p>
					The property <code class="literal">_AMQ_GROUP_ID</code> is used to identify a message group using the Core API on the client side. To pick a random unique message group identifier, you can also set the <code class="literal">auto-group</code> property to <code class="literal">true</code> on the <code class="literal">SessionFactory</code>.
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_message_groups_jms"/>Configuring Message Groups Using JMS</h1></div></div></div><p>
					The property <code class="literal">JMSXGroupID</code> is used to identify a message group for Java Messaging Service (JMS) clients. If you wish to send a message group with different messages to one consumer, you can set the same <code class="literal">JMSXGroupID</code> for different messages.
				</p><pre class="programlisting">Message message = ...
message.setStringProperty("JMSXGroupID", "Group-0");
producer.send(message);

message = ...
message.setStringProperty("JMSXGroupID", "Group-0");
producer.send(message);</pre><p>
					An alternative approach is to use the one of the following attributes of the <code class="literal">connection-factory</code> to be used by the client: <code class="literal">auto-group</code> or <code class="literal">group-id</code>.
				</p><p>
					When <code class="literal">auto-group</code> is set to <code class="literal">true</code>, the <code class="literal">connection-factory</code> will begin to use a random unique message group identifier for all messages sent through it. You can use the management CLI to set the <code class="literal">auto-group</code> attribute.
				</p><pre class="screen">/subsystem=messaging-activemq/server=default/connection-factory=RemoteConnectionFactory:write-attribute(name=auto-group,value=true)</pre><p>
					The <code class="literal">group-id</code> attribute will set the property <code class="literal">JMSXGroupID</code> to the specified value for all messages sent through the connection factory. To set a specific <code class="literal">group-id</code> on the connection factory, use the management CLI.
				</p><pre class="screen">/subsystem=messaging-activemq/server=default/connection-factory=RemoteConnectionFactory:write-attribute(name=group-id,value="Group-0")</pre></div></div></body></html>