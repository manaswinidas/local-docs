<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 34. Tuning JMS</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="tuning_jms"/>Chapter 34. Tuning JMS</h1></div></div></div><p>
				If you use the JMS API, review the following information for tips on how to improve performance.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						Disable the message ID.
					</p><p class="simpara">
						If you do not need message IDs, disable them by using the <code class="literal">setDisableMessageID()</code> method on the <code class="literal">MessageProducer</code> class. Setting the value to <code class="literal">true</code> eliminates the overhead of creating a unique ID and decreases the size of the message.
					</p></li><li class="listitem"><p class="simpara">
						Disable the message timestamp.
					</p><p class="simpara">
						If you do not need message timestamps, disable them by using the <code class="literal">setDisableMessageTimeStamp()</code> method on the <code class="literal">MessageProducer</code> class. Setting the value to <code class="literal">true</code> eliminates the overhead of creating the timestamp and decreases the size of the message.
					</p></li><li class="listitem"><p class="simpara">
						Avoid using <code class="literal">ObjectMessage</code>.
					</p><p class="simpara">
						<code class="literal">ObjectMessage</code> is used to send a message that contains a serialized object, meaning the body of the message, or payload, is sent over the wire as a stream of bytes. The Java serialized form of even small objects is quite large and takes up a lot of space on the wire. It is also slow when compared to custom marshalling techniques. Use <code class="literal">ObjectMessage</code> only if you cannot use one of the other message types, for example, if you do not know the type of the payload until runtime.
					</p></li><li class="listitem"><p class="simpara">
						Avoid <code class="literal">AUTO_ACKNOWLEDGE</code>.
					</p><p class="simpara">
						The choice of acknowledgement mode in a consumer impacts performance because of the additional overhead and traffic incurred by sending the acknowledgment message sent over the network. <code class="literal">AUTO_ACKNOWLEDGE</code> incurs this overhead because it requires an acknowledgement to be sent from the server for each message received on the client. If you can, use <code class="literal">DUPS_OK_ACKNOWLEDGE</code>, which acknowledges messages in a lazy manner, <code class="literal">CLIENT_ACKNOWLEDGE</code>, meaning the client code will call a method to acknowledge the message, or batch up many acknowledgements with one acknowledge or commit in a transacted session.
					</p></li><li class="listitem"><p class="simpara">
						Avoid durable messages.
					</p><p class="simpara">
						By default, JMS messages are durable. If you do not need durable messages, set them to be <code class="literal">non-durable</code>. Durable messages incur a lot of overhead because they are persisted to storage.
					</p></li><li class="listitem"><p class="simpara">
						Use <code class="literal">TRANSACTED_SESSION</code> mode to send and receive messages in a single transaction.
					</p><p class="simpara">
						By batching messages in a single transaction, the ActiveMQ Artemis server integrated in JBoss EAP requires only one network round trip on the commit, not on every send or receive.
					</p></li></ul></div></div></body></html>