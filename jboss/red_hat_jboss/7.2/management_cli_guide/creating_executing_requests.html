<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 4. Creating and Executing Requests</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="creating_executing_requests"/>Chapter 4. Creating and Executing Requests</h1></div></div></div><p>
			JBoss EAP configuration is presented as a hierarchical tree of addressable resources, each offering their own set of operations. Management CLI operation requests allow for low-level interaction with the management model and provide a controlled way to edit server configurations.
		</p><p>
			Operation requests use the following format:
		</p><pre class="screen">/<span class="emphasis"><em>NODE_TYPE</em></span>=<span class="emphasis"><em>NODE_NAME</em></span>:<span class="emphasis"><em>OPERATION_NAME</em></span>(<span class="emphasis"><em>PARAMETER_NAME</em></span>=<span class="emphasis"><em>PARAMETER_VALUE</em></span>)</pre><p>
			An operation request consists of three parts:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">address</span></dt><dd>
						The address specifies the resource node on which to perform the operation. <span class="emphasis"><em>NODE_TYPE</em></span> maps to an element name and <span class="emphasis"><em>NODE_NAME</em></span> maps to that element’s <code class="literal">name</code> attribute in the configuration XML. Each level of the resource tree is separated by a slash (<code class="literal">/</code>).
					</dd><dt><span class="term">operation name</span></dt><dd>
						The operation to perform on the resource node. It is prefixed with a colon (<code class="literal">:</code>).
					</dd><dt><span class="term">parameters</span></dt><dd>
						The set of required or optional parameters that vary depending on the operation. They are contained within parentheses (<code class="literal">()</code>).
					</dd></dl></div><h2><a id="construct_an_operation_request"/>Construct an Operation Request</h2><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
					Determine the address
				</p><p class="simpara">
					You can reference the XML configuration files (<code class="literal">standalone.xml</code>, <code class="literal">domain.xml</code>, or <code class="literal">host.xml</code>) to assist in determining the required address. You can also use tab completion to view the available resources.
				</p><p class="simpara">
					Below are several common addresses for resources at the root (<code class="literal">/</code>) level.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">/deployment=<span class="emphasis"><em>DEPLOYMENT_NAME</em></span></code> - Deployment configurations.
						</li><li class="listitem">
							<code class="literal">/socket-binding-group=<span class="emphasis"><em>SOCKET_BINDING_GROUP_NAME</em></span></code> - Socket binding configurations.
						</li><li class="listitem">
							<code class="literal">/interface=<span class="emphasis"><em>INTERFACE_NAME</em></span></code> - Interface configurations.
						</li><li class="listitem">
							<code class="literal">/subsystem=<span class="emphasis"><em>SUBSYSTEM_NAME</em></span></code> - Subsystem configuration when running as a standalone server.
						</li><li class="listitem">
							<code class="literal">/profile=<span class="emphasis"><em>PROFILE_NAME</em></span>/subsystem=<span class="emphasis"><em>SUBSYSTEM_NAME</em></span></code> - Subsystem configuration for the selected profile when running in a managed domain.
						</li><li class="listitem">
							<code class="literal">/host=<span class="emphasis"><em>HOST_NAME</em></span></code> - Server configuration for the selected host when running in a managed domain.
						</li></ul></div><p class="simpara">
					The below address is for the <code class="literal">ExampleDS</code> datasource.
				</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS</pre></li><li class="listitem"><p class="simpara">
					Determine the operation
				</p><p class="simpara">
					The available operations differ for each type of resource node. You can use the <code class="literal">:read-operation-names</code> operation on a resource address to view the available operations. You can also use tab completion.
				</p><p class="simpara">
					Use the <code class="literal">:read-operation-description</code> operation to get information on a particular operation for a resource.
				</p><p class="simpara">
					The below operation (once the appropriate parameters are included) will set the value of an attribute for the <code class="literal">ExampleDS</code> datasource.
				</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute</pre></li><li class="listitem"><p class="simpara">
					Determine the parameters
				</p><p class="simpara">
					Each operation has its own set of available parameters. If you attempt to perform an operation without a required parameter, you will receive an error message that the parameter cannot be <code class="literal">null</code>.
				</p><p class="simpara">
					Multiple parameters are separated by commas (<code class="literal">,</code>). If an operation does not have any parameters, then the parentheses are optional.
				</p><p class="simpara">
					Use the <code class="literal">:read-operation-description</code> operation on a resource, passing in the operation name, to determine the required parameters for that operation. You can also use tab completion to list the available parameters.
				</p><p class="simpara">
					The below operation disables the <code class="literal">ExampleDS</code> datasource by setting its <code class="literal">enabled</code> attribute to <code class="literal">false</code>.
				</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:write-attribute(name=enabled,value=false)</pre></li></ol></div><p>
			Once entered, the management interface will perform the operation request on the server configuration. Depending on the operation request, you will receive output to the terminal that contains the outcome and the result or response of the operation.
		</p><p>
			The following response from disabling the <code class="literal">ExampleDS</code> datasource shows that the operation was successful and requires a reload of the server in order to take effect.
		</p><pre class="screen">{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}</pre><p>
			You can use the <code class="literal">read-attribute</code> operation to read the value of the <code class="literal">ExampleDS</code> datasource’s <code class="literal">enabled</code> attribute.
		</p><pre class="screen">/subsystem=datasources/data-source=ExampleDS:read-attribute(name=enabled)</pre><p>
			The following response shows that the operation was successful and that the value of <code class="literal">enabled</code> is <code class="literal">false</code>.
		</p><pre class="screen">{
    "outcome" =&gt; "success",
    "result" =&gt; false,
}</pre><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="display_resource_values"/>Display Resource Values</h1></div></div></div><p>
				You can use the <code class="literal">read-resource</code> operation to view a resource’s attribute values.
			</p><pre class="screen">:read-resource</pre><p>
				You can specify parameters to provide complete information about child resources, recursively. You can also specify parameters to include runtime attributes, resolve expressions, and include aliases. Use <code class="literal">read-operation-description(name=read-resource)</code> to see the description of all available parameters for <code class="literal">read-resource</code>.
			</p><p>
				The following example reads the attributes for a deployment. It includes details such as the deployment name, whether it is enabled, and the last time it was enabled.
			</p><pre class="screen">/deployment=<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        ...
        "enabled" =&gt; true,
        "enabled-time" =&gt; 1453929902598L,
        "enabled-timestamp" =&gt; "2016-01-27 16:25:02,598 EST",
        "name" =&gt; "<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>",
        "owner" =&gt; undefined,
        "persistent" =&gt; true,
        "runtime-name" =&gt; "<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>",
        "subdeployment" =&gt; undefined,
        "subsystem" =&gt; {
            "undertow" =&gt; undefined,
            "logging" =&gt; undefined
        }
    }
}</pre><h3><a id="include_runtime_attributes"/>Include Runtime Attributes</h3><p>
				The <code class="literal">include-runtime</code> parameter can be used to retrieve runtime attributes.
			</p><p>
				The following example reads the attributes for a deployment. In addition to persistent attributes, it also includes runtime attributes, such as the deployment status and the last time it was disabled.
			</p><pre class="screen">/deployment=<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>:read-resource(include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        ...
        "disabled-time" =&gt; undefined,
        "disabled-timestamp" =&gt; undefined,
        "enabled" =&gt; true,
        "enabled-time" =&gt; 1453929902598L,
        "enabled-timestamp" =&gt; "2016-01-27 16:25:02,598 EST",
        "name" =&gt; "<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>",
        "owner" =&gt; undefined,
        "persistent" =&gt; true,
        "runtime-name" =&gt; "<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>",
        "status" =&gt; "OK",
        "subdeployment" =&gt; undefined,
        "subsystem" =&gt; {
            "undertow" =&gt; undefined,
            "logging" =&gt; undefined
        }
    }
}</pre><p>
				You can also use the <span class="emphasis"><em>not</em></span> operator (<code class="literal">!</code>) when passing in boolean parameters. For example:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">:read-resource(include-runtime=false)</code> can be entered as <code class="literal">:read-resource(!include-runtime)</code>
					</li><li class="listitem">
						<code class="literal">:read-resource(include-runtime=true)</code> can be entered as <code class="literal">:read-resource(include-runtime)</code>
					</li></ul></div><h3><a id="read_child_resources_recursively"/>Read Child Resources Recursively</h3><p>
				The <code class="literal">recursive</code> parameter can be used to retrieve attributes recursively from child resources.
			</p><p>
				The following example reads the attributes for a deployment. In addition to the resource’s own attributes, it recursively returns the attributes for its child resources, such as the <code class="literal">undertow</code> subsystem configuration.
			</p><pre class="screen">/deployment=<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>:read-resource(recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        ...
        "enabled" =&gt; true,
        "enabled-time" =&gt; 1453929902598L,
        "enabled-timestamp" =&gt; "2016-01-27 16:25:02,598 EST",
        "name" =&gt; "<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>",
        "owner" =&gt; undefined,
        "persistent" =&gt; true,
        "runtime-name" =&gt; "<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>",
        "subdeployment" =&gt; undefined,
        "subsystem" =&gt; {
            "undertow" =&gt; {
                "context-root" =&gt; "/test",
                "server" =&gt; "default-server",
                "virtual-host" =&gt; "default-host",
                "servlet" =&gt; undefined,
                "websocket" =&gt; undefined
            },
            "logging" =&gt; {"configuration" =&gt; undefined}
        }
    }
}</pre><h3><a id="exclude_default_values"/>Exclude Default Values</h3><p>
				The <code class="literal">include-defaults</code> parameter can be used to show or hide default values when reading attributes for a resource. This is <code class="literal">true</code> by default, meaning that default values will be shown when using the <code class="literal">read-resource</code> operation.
			</p><p>
				The following example uses the <code class="literal">read-resource</code> operation on the <code class="literal">undertow</code> subsystem.
			</p><pre class="screen">/subsystem=undertow:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "default-security-domain" =&gt; "other",
        "default-server" =&gt; "default-server",
        "default-servlet-container" =&gt; "default",
        "default-virtual-host" =&gt; "default-host",
        "instance-id" =&gt; expression "${jboss.node.name}",
        "statistics-enabled" =&gt; false,
        "buffer-cache" =&gt; {"default" =&gt; undefined},
        "configuration" =&gt; {
            "filter" =&gt; undefined,
            "handler" =&gt; undefined
        },
        "server" =&gt; {"default-server" =&gt; undefined},
        "servlet-container" =&gt; {"default" =&gt; undefined}
    }
}</pre><p>
				The following example also uses the <code class="literal">read-resource</code> operation on the <code class="literal">undertow</code> subsystem, but sets the <code class="literal">include-defaults</code> parameter to <code class="literal">false</code>. Several attributes, such as <code class="literal">statistics-enabled</code> and <code class="literal">default-server</code>, now display <code class="literal">undefined</code> as their value instead of the default value.
			</p><pre class="screen">/subsystem=undertow:read-resource(include-defaults=false)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "default-security-domain" =&gt; undefined,
        "default-server" =&gt; undefined,
        "default-servlet-container" =&gt; undefined,
        "default-virtual-host" =&gt; undefined,
        "instance-id" =&gt; undefined,
        "statistics-enabled" =&gt; undefined,
        "buffer-cache" =&gt; {"default" =&gt; undefined},
        "configuration" =&gt; {
            "filter" =&gt; undefined,
            "handler" =&gt; undefined
        },
        "server" =&gt; {"default-server" =&gt; undefined},
        "servlet-container" =&gt; {"default" =&gt; undefined}
    }
}</pre><h3><a id="resolve_expressions"/>Resolve Expressions</h3><p>
				The <code class="literal">resolve-expressions</code> parameter can be used to resolve the expressions of the returned attributes to their value on the server.
			</p><p>
				Attributes with expressions as their values use the format <code class="literal">${<span class="emphasis"><em>PARAMETER</em></span>:<span class="emphasis"><em>DEFAULT_VALUE</em></span>}</code>. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#property_replacement">Property Replacement</a> in the <span class="emphasis"><em>Configuration Guide</em></span> for more information.
			</p><p>
				The following example reads the attributes for a deployment. The <code class="literal">instance-id</code> attribute shows its resolved value (<code class="literal">test-name</code>) instead of the expression (<code class="literal">${jboss.node.name}</code>).
			</p><pre class="screen">/subsystem=undertow:read-resource(resolve-expressions=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "default-security-domain" =&gt; "other",
        "default-server" =&gt; "default-server",
        "default-servlet-container" =&gt; "default",
        "default-virtual-host" =&gt; "default-host",
        "instance-id" =&gt; "test-name",
        "statistics-enabled" =&gt; false,
        "buffer-cache" =&gt; {"default" =&gt; undefined},
        "configuration" =&gt; {
            "filter" =&gt; undefined,
            "handler" =&gt; undefined
        },
        "server" =&gt; {"default-server" =&gt; undefined},
        "servlet-container" =&gt; {"default" =&gt; undefined}
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="display_resource_descriptions"/>Display Resource Descriptions</h1></div></div></div><p>
				You can use the <code class="literal">read-resource-description</code> operation to a description about a resource and its attributes.
			</p><pre class="screen">:read-resource-description</pre><p>
				You can specify parameters to provide complete descriptions about child resources, recursively. You can also specify parameters to include details of the resource’s operations and notifications. Use <code class="literal">read-operation-description(name=read-resource-description)</code> to see the description of all available parameters for <code class="literal">read-resource-description</code>.
			</p><p>
				The following example displays the attribute details for a buffer cache.
			</p><pre class="screen">/subsystem=undertow/buffer-cache=default:read-resource-description
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "description" =&gt; "The buffer cache used to cache static content",
        "attributes" =&gt; {
            "buffer-size" =&gt; {
                "type" =&gt; INT,
                "description" =&gt; "The size of an individual buffer",
                "expressions-allowed" =&gt; true,
                "nillable" =&gt; true,
                "default" =&gt; 1024,
                "min" =&gt; 0L,
                "max" =&gt; 2147483647L,
                "access-type" =&gt; "read-write",
                "storage" =&gt; "configuration",
                "restart-required" =&gt; "resource-services"
            },
            "buffers-per-region" =&gt; {
                "type" =&gt; INT,
                "description" =&gt; "The numbers of buffers in a region",
                "expressions-allowed" =&gt; true,
                "nillable" =&gt; true,
                "default" =&gt; 1024,
                "min" =&gt; 0L,
                "max" =&gt; 2147483647L,
                "access-type" =&gt; "read-write",
                "storage" =&gt; "configuration",
                "restart-required" =&gt; "resource-services"
            },
            "max-regions" =&gt; {
                "type" =&gt; INT,
                "description" =&gt; "The maximum number of regions",
                "expressions-allowed" =&gt; true,
                "nillable" =&gt; true,
                "default" =&gt; 10,
                "min" =&gt; 0L,
                "max" =&gt; 2147483647L,
                "access-type" =&gt; "read-write",
                "storage" =&gt; "configuration",
                "restart-required" =&gt; "resource-services"
            }
        },
        "operations" =&gt; undefined,
        "notifications" =&gt; undefined,
        "children" =&gt; {}
    }
}</pre><p>
				See <a class="link" href="reference_material.html#resource_attribute_details" title="Resource Attribute Details">Resource Attribute Details</a> to learn more about the fields returned for attributes.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="display_attribute_value"/>Display an Attribute Value</h1></div></div></div><p>
				You can use the <code class="literal">read-attribute</code> operation to view the current value of a single attribute.
			</p><pre class="screen">:read-attribute(name=<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>)</pre><p>
				The following example displays the log level for the root logger by reading the <code class="literal">level</code> attribute.
			</p><pre class="screen">/subsystem=logging/root-logger=ROOT:read-attribute(name=level)
{
    "outcome" =&gt; "success",
    "result" =&gt; "INFO"
}</pre><p>
				One advantage of using the <code class="literal">read-attribute</code> operation is the ability to expose the current runtime value of an attribute.
			</p><pre class="screen">/interface=public:read-attribute(name=resolved-address)
{
    "outcome" =&gt; "success",
    "result" =&gt; "127.0.0.1"
}</pre><p>
				The <code class="literal">resolved-address</code> attribute is a runtime attribute. This attribute is not displayed when using the <code class="literal">read-resource</code> operation on the public interface unless you pass in the <code class="literal">include-runtime</code> parameter. And even then, it is displayed with the rest of the resource’s other attributes.
			</p><p>
				You can also use the <code class="literal">include-defaults</code> and <code class="literal">resolve-expressions</code> parameters. See <a class="link" href="creating_executing_requests.html#display_resource_values" title="Display Resource Values">Display Resource Values</a> for details on these parameters.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="update_attribute"/>Update an Attribute</h1></div></div></div><p>
				You can use the <code class="literal">write-attribute</code> operation to update the value of an attribute for a resource.
			</p><pre class="screen">:write-attribute(name=<span class="emphasis"><em>ATTRIBUTE_NAME</em></span>, value=<span class="emphasis"><em>ATTRIBUTE_VALUE</em></span>)</pre><p>
				The following example disables the deployment scanner by setting the <code class="literal">scan-enabled</code> attribute to <code class="literal">false</code>.
			</p><pre class="screen">/subsystem=deployment-scanner/scanner=default:write-attribute(name=scan-enabled,value=false)
{"outcome" =&gt; "success"}</pre><p>
				The response from the operation request shows that it was successful. You can also confirm the result by using the <code class="literal">read-attribute</code> operation to read the <code class="literal">scan-enabled</code> attribute, which now shows as <code class="literal">false</code>.
			</p><pre class="screen">/subsystem=deployment-scanner/scanner=default:read-attribute(name=scan-enabled)
{
    "outcome" =&gt; "success",
    "result" =&gt; false
}</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="undefine_attribute"/>Undefine an Attribute</h1></div></div></div><p>
				You can set the value of an attribute to <code class="literal">undefined</code>. If this attribute has a default value, that will be used.
			</p><p>
				The following example undefines the <code class="literal">level</code> attribute for the root logger.
			</p><pre class="screen">/subsystem=logging/root-logger=ROOT:undefine-attribute(name=level)</pre><p>
				The default value for the <code class="literal">level</code> attribute is <code class="literal">ALL</code>. You can see that this default is used when performing the <code class="literal">read-resource</code> operation.
			</p><pre class="screen">/subsystem=logging/root-logger=ROOT:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "filter" =&gt; undefined,
        "filter-spec" =&gt; undefined,
        "handlers" =&gt; [
            "CONSOLE",
            "FILE"
        ],
        "level" =&gt; "ALL"
    }
}</pre><p>
				To view the resource without the default values being read, you must use set the <code class="literal">include-defaults</code> parameter to <code class="literal">false</code>. You can now see that the value of <code class="literal">level</code> is <code class="literal">undefined</code>.
			</p><pre class="screen">/subsystem=logging/root-logger=ROOT:read-resource(include-defaults=false)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "filter" =&gt; undefined,
        "filter-spec" =&gt; undefined,
        "handlers" =&gt; [
            "CONSOLE",
            "FILE"
        ],
        "level" =&gt; undefined
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="display_operation_names"/>Display Operation Names</h1></div></div></div><p>
				You can use the <code class="literal">read-operation-names</code> list the available operations for a given resource.
			</p><pre class="screen">:read-operation-names</pre><p>
				The following example lists the available operations to perform on a deployment.
			</p><pre class="screen">/deployment=<span class="emphasis"><em>DEPLOYMENT_NAME</em></span>:read-operation-names
{
    "outcome" =&gt; "success",
    "result" =&gt; [
        "add",
        "deploy",
        "list-add",
        "list-clear",
        "list-get",
        "list-remove",
        "map-clear",
        "map-get",
        "map-put",
        "map-remove",
        "query",
        "read-attribute",
        "read-attribute-group",
        "read-attribute-group-names",
        "read-children-names",
        "read-children-resources",
        "read-children-types",
        "read-operation-description",
        "read-operation-names",
        "read-resource",
        "read-resource-description",
        "redeploy",
        "remove",
        "undefine-attribute",
        "undeploy",
        "whoami",
        "write-attribute"
    ]
}</pre><p>
				Use the <code class="literal">read-operation-description</code> operation to <a class="link" href="creating_executing_requests.html#display_operation_description" title="Display an Operation Description">display an operation description</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="display_operation_description"/>Display an Operation Description</h1></div></div></div><p>
				You can use the <code class="literal">read-operation-description</code> operation to display a description of a certain operation for a resource. This also includes parameter descriptions and which parameters are required.
			</p><pre class="screen">:read-operation-description(name=<span class="emphasis"><em>OPERATION_NAME</em></span>)</pre><p>
				The following example provides the description and parameter information for the <code class="literal">add</code> operation on a system property.
			</p><pre class="screen">/system-property=<span class="emphasis"><em>SYSTEM_PROPERTY</em></span>:read-operation-description(name=add)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "operation-name" =&gt; "add",
        "description" =&gt; "Adds a system property or updates an existing one.",
        "request-properties" =&gt; {"value" =&gt; {
            "type" =&gt; STRING,
            "description" =&gt; "The value of the system property.",
            "expressions-allowed" =&gt; true,
            "required" =&gt; false,
            "nillable" =&gt; true,
            "min-length" =&gt; 0L,
            "max-length" =&gt; 2147483647L
        }},
        "reply-properties" =&gt; {},
        "read-only" =&gt; false,
        "runtime-only" =&gt; false
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="cli_special_characters"/>Add a Value with Special Characters</h1></div></div></div><p>
				Occasionally when creating management CLI requests, you may need to add a value that contains special characters. Certain special characters, such as those used in the syntax of a management CLI request, must be entered in a particular manner.
			</p><p>
				In many cases, but not all, enclosing the value in double quotes (<code class="literal">""</code>) is sufficient. If you are unsure whether your special character was accepted properly, be sure to read the attribute or resource after adding the value to verify that it was saved correctly.
			</p><p>
				See the sections below for information on how to process the following special characters.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="creating_executing_requests.html#whitespace" title="Whitespace">Whitespace</a>
					</li><li class="listitem">
						<a class="link" href="creating_executing_requests.html#quotation_marks" title="Quotation Marks">Quotation Marks</a>
					</li><li class="listitem">
						<a class="link" href="creating_executing_requests.html#commas" title="Commas">Commas</a>
					</li><li class="listitem">
						<a class="link" href="creating_executing_requests.html#parentheses" title="Parentheses">Parentheses</a>
					</li><li class="listitem">
						<a class="link" href="creating_executing_requests.html#braces" title="Braces">Braces</a>
					</li><li class="listitem">
						<a class="link" href="creating_executing_requests.html#brackets" title="Brackets">Brackets</a>
					</li><li class="listitem">
						<a class="link" href="creating_executing_requests.html#diacritic_marks" title="Diacritic Marks">Diacritic Marks</a>
					</li></ul></div><h3><a id="whitespace"/>Whitespace</h3><p>
				By default, whitespace is trimmed from values added through the management CLI. You can include a space in a value by enclosing the value in double quotes (<code class="literal">""</code>) or braces (<code class="literal">{}</code>), or by escaping it using a backslash (<code class="literal">\</code>).
			</p><pre class="screen">/system-property=test1:add(value="Hello World")
/system-property=test2:add(value={Hello World})
/system-property=test3:add(value=Hello\ World)</pre><p>
				This will set the value to <code class="literal">Hello World</code>.
			</p><h3><a id="quotation_marks"/>Quotation Marks</h3><p>
				You can use a single quotation mark (<code class="literal">'</code>) in a value by enclosing the value in double quotes (<code class="literal">""</code>) or by escaping it using a backslash (<code class="literal">\</code>). The following examples set the value of system properties to <code class="literal">server's</code>.
			</p><pre class="screen">/system-property=test1:add(value="server's")
/system-property=test2:add(value=server\'s)</pre><p>
				You can use a double quotation mark (<code class="literal">"</code>) in a value by escaping it using a backslash (<code class="literal">\</code>). Depending on the location of the quotation mark in the value, you might also need to enclose the value in double quotes (<code class="literal">""</code>). The following example sets the value of a system property to <code class="literal">"quote"</code>.
			</p><pre class="screen">/system-property=test1:add(value="\"quote\"")</pre><h3><a id="commas"/>Commas</h3><p>
				You can use a comma (<code class="literal">,</code>) in a value by enclosing the value in double quotes (<code class="literal">""</code>).
			</p><pre class="screen">/system-property=test:add(value="Last,First")</pre><p>
				This will set the value to <code class="literal">Last,First</code>.
			</p><h3><a id="parentheses"/>Parentheses</h3><p>
				You can include parentheses (<code class="literal">()</code>) in a value by enclosing the value in double quotes (<code class="literal">""</code>) or braces (<code class="literal">{}</code>), or by escaping the parenthesis using a backslash (<code class="literal">\</code>).
			</p><pre class="screen">/system-property=test1:add(value="one(1)")
/system-property=test2:add(value={one(1)})
/system-property=test3:add(value=one\(1\))</pre><p>
				This will set the value to <code class="literal">one(1)</code>.
			</p><h3><a id="braces"/>Braces</h3><p>
				You can include braces (<code class="literal">{}</code>) in a value by enclosing the value in double quotes (<code class="literal">""</code>).
			</p><pre class="screen">/system-property=test:add(value="{braces}")</pre><p>
				This will set the value to <code class="literal">{braces}</code>.
			</p><h3><a id="brackets"/>Brackets</h3><p>
				You can include brackets (<code class="literal">[]</code>) in a value by enclosing the value in double quotes (<code class="literal">""</code>).
			</p><pre class="screen">/system-property=test:add(value="[brackets]")</pre><p>
				This will set the value to <code class="literal">[brackets]</code>.
			</p><h3><a id="diacritic_marks"/>Diacritic Marks</h3><p>
				Diacritic marks, such as <code class="literal">ñ</code>, <code class="literal">ř</code>, or <code class="literal">ý</code>, can be used when adding a value using the management CLI.
			</p><pre class="screen">/system-property=test1:add(value=Año)</pre><p>
				However, do not enclose the value in double quotes (<code class="literal">""</code>). This can cause the diacritic mark to be replaced with a question mark (<code class="literal">?</code>). If the value has whitespace that needs to be maintained, instead enclose the value in braces (<code class="literal">{}</code>) or escape the space with a backslash (<code class="literal">\</code>).
			</p><pre class="screen">/system-property=test2:add(value={Dos años})
/system-property=test3:add(value=Dos\ años)</pre><p>
				This will set the value to <code class="literal">Dos años</code>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="specify_operation_headers"/>Specify Operation Headers</h1></div></div></div><p>
				You can specify operation headers to control certain aspects of how an operation executes. The following operation headers are available:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">allow-resource-service-restart</code></span></dt><dd><p class="simpara">
							Whether to restart runtime services that require a restart in order for the operation’s changes take effect. This defaults to <code class="literal">false</code>.
						</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
								Using the <code class="literal">allow-resource-service-restart=true</code> header can disrupt end-user request handling until the required services have been restarted.
							</p></div></dd><dt><span class="term"><code class="literal">blocking-timeout</code></span></dt><dd>
							The maximum time in seconds that the operation should block at any one point in its completion process before the operation is rolled back. This defaults to <code class="literal">300</code> seconds.
						</dd><dt><span class="term"><code class="literal">roles</code></span></dt><dd>
							The list of RBAC roles that should be used when making access control decisions instead of those from the roles normally associated with the user invoking the operation. Note that this can only be used to reduce permissions for a caller, not to increase permissions.
						</dd><dt><span class="term"><code class="literal">rollback-on-runtime-failure</code></span></dt><dd>
							Whether persistent configuration changes should be reverted if applying the changes to runtime services fails. This defaults to <code class="literal">true</code>.
						</dd><dt><span class="term"><code class="literal">rollout</code></span></dt><dd>
							The rollout plan for a managed domain deployment. For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/#rollout_plans">Using Rollout Plans</a> section of the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
						</dd></dl></div><div class="title"><strong>Example: Deploy an Application Using an Operation Header</strong></div><p>
					
</p><pre class="screen">deployment deploy-file <span class="emphasis"><em>/path/to/DEPLOYMENT.war</em></span> --headers={allow-resource-service-restart=true}</pre><p>

				</p><div class="title"><strong>Example: Remove a Resource Using an Operation Header</strong></div><p>
					
</p><pre class="screen">/subsystem=infinispan/cache-container=test:remove() {allow-resource-service-restart=true}</pre><p>

				</p><p>
				Use a semicolon (<code class="literal">;</code>) to separate multiple operation headers.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="use_if_else_control_flow"/>Use if-else Control Flow</h1></div></div></div><p>
				The management CLI supports <code class="literal">if</code>-<code class="literal">else</code> control flow, which allows you to choose which set of commands and operations to execute based on a condition. The <code class="literal">if</code> condition is a boolean expression which evaluates the response of the management command or operation specified after the <code class="literal">of</code> keyword.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The use of nested <code class="literal">if</code>-<code class="literal">else</code> statements is not supported.
				</p></div><p>
				Expressions can contain any of the following items:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Parentheses to group and prioritize expressions
					</li><li class="listitem"><p class="simpara">
						Conditional operators
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								and (<code class="literal">&amp;&amp;</code>)
							</li><li class="listitem">
								or (<code class="literal">||</code>)
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Comparison operators
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								equal to (<code class="literal">==</code>)
							</li><li class="listitem">
								not equal to (<code class="literal">!=</code>)
							</li><li class="listitem">
								greater than (<code class="literal">&gt;</code>)
							</li><li class="listitem">
								greater than or equal to (<code class="literal">&gt;=</code>)
							</li><li class="listitem">
								less than (<code class="literal">&lt;</code>)
							</li><li class="listitem">
								less than or equal to (<code class="literal">&lt;=</code>)
							</li><li class="listitem">
								match regular expression (<code class="literal">~=</code>)
							</li></ul></div></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					The match regular expression (<code class="literal">~=</code>) operator is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div><p>
				The below example uses the match regular expression (<code class="literal">~=</code>) operator to check whether the value of the <code class="literal">features</code> system property contains <code class="literal">jgroups</code>.
			</p><pre class="screen">if (result ~= ".*jgroups.*") of /:resolve-expression(expression=${features})
  echo Configuring JGroups
end-if</pre><p>
				The below example attempts to read the system property <code class="literal">test</code>. If <code class="literal">outcome</code> is not <code class="literal">success</code> (meaning that the property does not exist), then the system property will be added and set to <code class="literal">true</code>.
			</p><pre class="screen">if (outcome != success) of /system-property=test:read-resource
    /system-property=test:add(value=true)
end-if</pre><p>
				The condition above uses <code class="literal">outcome</code>, which is returned when the CLI command after the <code class="literal">of</code> keyword is executed, as shown below:
			</p><pre class="screen">/system-property=test:read-resource
{
    "outcome" =&gt; "failed",
    "failure-description" =&gt; "JBAS014807: Management resource '[(\"system-property\" =&gt; \"test\")]' not found",
    "rolled-back" =&gt; true
}</pre><p>
				The below example issues the appropriate management CLI command to enable the <code class="literal">ExampleDS</code> datasource by checking the launch type of the server process (<code class="literal">STANDALONE</code> or <code class="literal">DOMAIN</code>).
			</p><pre class="screen">if (result == STANDALONE) of /:read-attribute(name=launch-type)
    /subsystem=datasources/data-source=ExampleDS:write-attribute(name=enabled, value=true)
else
    /profile=full/subsystem=datasources/data-source=ExampleDS:write-attribute(name=enabled, value=true)
end-if</pre><p>
				Management CLI commands with <code class="literal">if</code>-<code class="literal">else</code> control flow can be specified in a file, with each command on a separate line in the file. You can then pass the file to the <code class="literal">jboss-cli</code> script to be executed non-interactively using the <code class="literal">--file</code> parameter.
			</p><pre class="screen">$ <span class="emphasis"><em>EAP_HOME</em></span>/bin/jboss-cli.sh --connect --file=<span class="emphasis"><em>CLI_FILE</em></span></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="try_catch_finally_control_flow"/>Use try-catch-finally Control Flow</h1></div></div></div><p>
				The management CLI provides a simplified <code class="literal">try-catch-finally</code> control flow. It consists of three sets of operations and commands corresponding to the <code class="literal">try</code>, <code class="literal">catch</code>, and <code class="literal">finally</code> blocks. The <code class="literal">catch</code> and <code class="literal">finally</code> blocks are optional, but at least one of them should be present and only one catch block can be specified.
			</p><p>
				The control flow begins with execution of the <code class="literal">try</code> batch. If the <code class="literal">try</code> batch completes successfully, then the <code class="literal">catch</code> batch is skipped and the <code class="literal">finally</code> batch is executed. If the <code class="literal">try</code> batch fails, for example, <code class="literal">java.io.IOException</code>, the <code class="literal">try-catch-finally</code> control flow will terminate immediately, and the <code class="literal">catch</code> batch if it is available will be executed. The <code class="literal">finally</code> batch will always execute at the end of the control flow whether the <code class="literal">try</code> and <code class="literal">catch</code> batches succeeds or fails to execute.
			</p><p>
				There are four commands that define the try-catch-finally control flow:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">try</code> command starts the <code class="literal">try</code> batch. The <code class="literal">try</code> batch continues until one of <code class="literal">catch</code> or <code class="literal">finally</code> command is encountered.
					</li><li class="listitem">
						<code class="literal">catch</code> command marks the end of the <code class="literal">try</code> batch. The <code class="literal">try</code> batch is then held back and the <code class="literal">catch</code> batch is started.
					</li><li class="listitem">
						<code class="literal">finally</code> command marks the end of the <code class="literal">catch</code> batch or the <code class="literal">try</code> batch and starts the <code class="literal">finally</code> batch.
					</li><li class="listitem">
						<code class="literal">end-try</code> is the command that ends either the <code class="literal">catch</code> or <code class="literal">finally</code> batch and runs the try-catch-finally control flow.
					</li></ul></div><p>
				The following example either creates or re-creates a datasource and enables it:
			</p><pre class="screen">try
/subsystem=datasources/data-source=myds:add(connection-url=<span class="emphasis"><em>CONNECTION_URL</em></span>,jndi-name=java:/myds,driver-name=h2)

catch
/subsystem=datasources/data-source=myds:remove
/subsystem=datasources/data-source=myds:add(connection-url=<span class="emphasis"><em>CONNECTION_URL</em></span>,jndi-name=java:/myds,driver-name=h2)

finally
/subsystem=datasources/data-source=myds:enable
end-try</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="for_done_control_flow"/>Use for-done Control Flow</h1></div></div></div><p>
				The management CLI supports <code class="literal">for-done</code> control flow, which allows you to iterate over a collection returned from an operation and execute commands on each item in the collection. You can use <code class="literal">for-done</code> statements with the management CLI in interactive or non-interactive mode. <code class="literal">for-done</code> statements use the following syntax:
			</p><pre class="screen">for <span class="emphasis"><em>VARIABLE_NAME</em></span> in <span class="emphasis"><em>OPERATION</em></span>
  <span class="emphasis"><em>COMMANDS_TO_EXECUTE</em></span>
done</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal"><span class="emphasis"><em>VARIABLE_NAME</em></span></code> can be used in the <code class="literal"><span class="emphasis"><em>COMMANDS_TO_EXECUTE</em></span></code> using the syntax <code class="literal">$<span class="emphasis"><em>VARIABLE_NAME</em></span></code>.
					</li><li class="listitem">
						The <code class="literal"><span class="emphasis"><em>OPERATION</em></span></code> must return a collection.
					</li><li class="listitem">
						The <code class="literal"><span class="emphasis"><em>COMMANDS_TO_EXECUTE</em></span></code> is a list of commands to execute, with each command on a separate line.
					</li></ul></div><p>
				The following example iterates over all deployments and displays whether each is enabled or disabled.
			</p><pre class="screen">for deploymentName in :read-children-names(child-type=deployment)
  if (result == true) of /deployment=$deploymentName:read-attribute(name=enabled)
    echo $deploymentName is enabled.
  else
    echo $deploymentName is disabled.
  end-if
done</pre><p>
				Enter <code class="literal">done --discard</code> if you want to discard the current <code class="literal">for</code> block without executing the commands.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The use of <code class="literal">for-done</code> statements while in batch mode, or nesting them inside other <code class="literal">for-done</code> statements, is not supported.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="query_a_resource"/>Query a Resource</h1></div></div></div><p>
				The JBoss EAP management CLI provides the <code class="literal">query</code> operation to query a resource. You can use the <code class="literal">:read-resource</code> operation to read all attributes for a resource. If you want to list only selected attributes, you can use the <code class="literal">:query</code> operation.
			</p><p>
				For example, to see the list of <code class="literal">name</code> and <code class="literal">enabled</code> attributes, use the following command:
			</p><pre class="screen">/deployment=jboss-modules.jar:query(select=["name","enabled"])</pre><p>
				The following response shows that the operation was successful. The <code class="literal">name</code> and <code class="literal">enabled</code> attributes are listed for the <code class="literal">jboss-modules.jar</code> deployment.
			</p><pre class="screen">{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "name" =&gt; "jboss-modules.jar",
        "enabled" =&gt; true
    }
}</pre><p>
				You can also query across multiple resources, for example, list the <code class="literal">name</code> and <code class="literal">enabled</code> attributes of all deployments, using a wildcard:
			</p><pre class="screen">/deployment=*:query(select=["name","enabled"])</pre><p>
				The following response shows that the operation was successful. The <code class="literal">name</code> and <code class="literal">enabled</code> attributes of all deployments are listed.
			</p><pre class="screen">{
     "outcome" =&gt; "success",
     "result" =&gt; [
         {
             "address" =&gt; [("deployment" =&gt; "helloworld.war")],
             "outcome" =&gt; "success",
             "result" =&gt; {
                 "name" =&gt; "helloworld.war",
                 "enabled" =&gt; true
             }
         },
         {
             "address" =&gt; [("deployment" =&gt; "kitchensink.war")],
             "outcome" =&gt; "success",
             "result" =&gt; {
                 "name" =&gt; "kitchensink.war",
                 "enabled" =&gt; true
             }
         },
         {
             "address" =&gt; [("deployment" =&gt; "xyz.jar")],
             "outcome" =&gt; "success",
             "result" =&gt; {
                 "name" =&gt; "xyz.jar",
                 "enabled" =&gt; false
             }
         }
     ]
 }</pre><p>
				The <code class="literal">:query</code> operation also filters relevant objects. For example, to view the <code class="literal">name</code> and <code class="literal">enabled</code> attribute values for deployments with <code class="literal">enabled</code> as <code class="literal">true</code>.
			</p><pre class="screen">/deployment=*:query(select=["name","enabled"],where=["enabled","true"])</pre><p>
				The following response shows that the operation was successful. The <code class="literal">name</code> and <code class="literal">enabled</code> attribute values for deployments with <code class="literal">enabled</code> as <code class="literal">true</code> are listed.
			</p><pre class="screen">{
     "outcome" =&gt; "success",
     "result" =&gt; [
         {
             "address" =&gt; [("deployment" =&gt; "helloworld.war")],
             "outcome" =&gt; "success",
             "result" =&gt; {
                 "name" =&gt; "helloworld.war",
                 "enabled" =&gt; true
             }
         },
         {
             "address" =&gt; [("deployment" =&gt; "kitchensink.war")],
             "outcome" =&gt; "success",
             "result" =&gt; {
                 "name" =&gt; "kitchensink.war",
                 "enabled" =&gt; true
             }
         }
     ]
 }</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="redirect_output"/>Redirect Output</h1></div></div></div><p>
				Instead of printing output from a management CLI operation to the terminal, you can redirect the output to <a class="link" href="creating_executing_requests.html#redirect_file" title="Redirect Output to a File">a file</a> or to <a class="link" href="creating_executing_requests.html#redirect_command" title="Redirect Output to a Command">another command</a>.
			</p><h3><a id="redirect_file"/>Redirect Output to a File</h3><p>
				Use the <code class="literal">&gt;</code> operator to redirect output from a management CLI operation to a file on the file system.
			</p><div class="title"><strong>Example: Write <code class="literal">read-resource</code> Output to a File</strong></div><p>
					
</p><pre class="screen">:read-resource &gt; myfile.txt</pre><p>

				</p><p>
				Use the <code class="literal">&gt;&gt;</code> operator to redirect output from a management CLI operation and append it to a file on the file system.
			</p><div class="title"><strong>Example: Append <code class="literal">read-resource</code> Output to a File</strong></div><p>
					
</p><pre class="screen">:read-resource &gt;&gt; myfile.txt</pre><p>

				</p><h3><a id="redirect_command"/>Redirect Output to a Command</h3><p>
				Use the <code class="literal">|</code> operator to redirect output from a management CLI operation to the <code class="literal">grep</code> command to search output for a regular expression match. Currently, <code class="literal">grep</code> is the only supported command for the <code class="literal">|</code> operator.
			</p><div class="title"><strong>Example: Search Output from the <code class="literal">server.log</code> File</strong></div><p>
					
</p><pre class="screen">/subsystem=logging/log-file=server.log:read-log-file | grep Deployed
        "2018-03-06 09:48:02,389 INFO  [org.jboss.as.server] (management-handler-thread - 5) WFLYSRV0010: Deployed \"jboss-helloworld.war\" (runtime-name : \"jboss-helloworld.war\")",</pre><p>

				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					It is not supported to use the <code class="literal">grep</code> command more than once in the same command.
				</p></div></div></div></body></html>