<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. Prepare for Migration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="prepare_for_migration"/>Chapter 2. Prepare for Migration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migration_preparation_overview"/>Preparation Overview</h1></div></div></div><p>
				In JBoss EAP 7, an effort was made to provide backward compatibility for JBoss EAP 6 applications. However, if your application uses features that were deprecated or functionality that was removed from JBoss EAP 7, you might need to make changes to your application code.
			</p><p>
				In addition, a number of things have changed in this release that might impact deployment of JBoss EAP 7 applications. It is recommended that you do some research and planning before you attempt to migrate your application.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Become familiar with the <a class="link" href="prepare_for_migration.html#java_ee_8_features" title="Review the Java EE 8 Features">features of Java EE 8</a>.
					</li><li class="listitem">
						If you are migrating from JBoss EAP 6.4, also become familiar the <a class="link" href="prepare_for_migration.html#java_ee_7_features" title="Review the Java EE 7 Features">features of Java EE 7</a>.
					</li><li class="listitem">
						Review <a class="link" href="prepare_for_migration.html#whats_new_in_eap" title="Review What’s New in JBoss EAP 7">what’s new in JBoss EAP 7</a>.
					</li><li class="listitem">
						Review the list of <a class="link" href="prepare_for_migration.html#migration-review-deprecated_and_unsupported_features" title="Review The List of Deprecated and Unsupported Features">deprecated and unsupported features</a>.
					</li><li class="listitem">
						Review the material in the JBoss EAP 7 <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/getting_started_guide/"><span class="emphasis"><em>Getting Started Guide</em></span></a>.
					</li><li class="listitem">
						Take a look at the <a class="link" href="tools_to_assist_in_migration.html" title="Chapter 3. Tools to Assist in Migration">tools that can help with migration tasks</a>.
					</li></ul></div><p>
				Once you are comfortable with the feature changes, the development materials, and the tools that can assist your migration efforts, you can begin to evaluate your applications and your server configuration to determine the changes that are needed to run in JBoss EAP 7.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="java_ee_8_features"/>Review the Java EE 8 Features</h1></div></div></div><p>
				Java EE 8 builds on Java EE 7, which included many improvements to make it easier to develop and run feature rich applications on private and public clouds. It incorporated new features and the latest standards such as HTML5, WebSocket, JSON, Batch, and Concurrency Utilities. Updates included JPA 2.1, JAX-RS 2.0, Servlet 3.1, Expression Language 3.0, JMS 2.0. JSF 2.2, EJB 3.2, CDI 1.2, and Bean Validation 1.1.
			</p><p>
				Java EE 8 enhancements include a new portable security API, support for Java Servlet 4.0 with HTTP/2 support, JPA 2.2, JAX-RS 2.1, JSF 2.3, CDI 2.0, enhanced JSON support and a new JSON binding API, support for asynchronous CDI events, and much more.
			</p><p>
				You can find more information about Java EE 8, including tutorials, on Oracle’s website: <a class="link" href="http://www.oracle.com/technetwork/java/javaee/overview/index.html">Java EE at a Glance</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="java_ee_7_features"/>Review the Java EE 7 Features</h1></div></div></div><p>
				If you are migrating from JBoss EAP 6.4, Java EE 7 includes many improvements to make it easier to develop and run feature rich applications on private and public clouds. It incorporates new features and the latest standards such as HTML5, WebSocket, JSON, Batch, and Concurrency Utilities. Updates include JPA 2.1, JAX-RS 2.0, Servlet 3.1, Expression Language 3.0, JMS 2.0. JSF 2.2, EJB 3.2, CDI 1.2, and Bean Validation 1.1.
			</p><p>
				You can find more information about Java EE 7, including tutorials, on Oracle’s web site: <a class="link" href="http://www.oracle.com/technetwork/java/javaee/documentation/index.html">Java™ EE Documentation</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="whats_new_in_eap"/>Review What’s New in JBoss EAP 7</h1></div></div></div><p>
				JBoss EAP 7 includes some notable upgrades and improvements over previous releases. This section highlights some of the new features and enhancements that have been introduced in the JBoss EAP 7 point releases.
			</p><h3><a id="new_features_and_enhancements_in_jboss_eap_70"/>New Features and Enhancements Introduced JBoss EAP 7.0</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Java EE 7</span></dt><dd>
							JBoss EAP 7 is a certified implementation of Java EE 7, meeting both the Web Profile and the full platform specifications. It also includes support for the latest iterations of CDI 1.2 and Web Sockets 1.1.
						</dd><dt><span class="term">Undertow</span></dt><dd>
							Undertow is the new lightweight, flexible, and performant web server included in JBoss EAP 7, replacing JBoss Web. Written in Java, it is designed for maximum throughput and scalability. It supports the latest web technologies, such as the new HTTP/2 standard.
						</dd><dt><span class="term">Apache ActiveMQ Artemis</span></dt><dd>
							Apache ActiveMQ Artemis is the new JBoss EAP 7 built-in messaging provider. Based on a code donation from HornetQ, this Apache subproject provides outstanding performance based on a proven non-blocking architecture.
						</dd><dt><span class="term">IronJacamar 1.2</span></dt><dd>
							The latest IronJacamar provides a stable and feature rich support for JCA and DataSources.
						</dd><dt><span class="term">JBossWS 5</span></dt><dd>
							The fifth generation of JBossWS is a major leap forward, bringing new features and performance improvements to JBoss EAP 7 web services.
						</dd><dt><span class="term">RESTEasy 3</span></dt><dd>
							JBoss EAP 7 includes the latest generation of RESTEasy. It goes beyond the standard Java EE REST APIs (JAX-RS 2.0) by providing a number of useful extensions such as JSON Web Encryption, Jackson, JSON-P, and Jettison.
						</dd><dt><span class="term">OpenJDK ORB</span></dt><dd>
							JBoss EAP 7 replaced the JacORB IIOP implementation with a downstream branch of the OpenJDK ORB, leading to better interoperability with the JVM ORB and the Java EE RI.
						</dd><dt><span class="term">Feature Rich Clustering</span></dt><dd>
							Clustering support was heavily refactored in JBoss EAP 7 and includes several public APIs for access by applications.
						</dd><dt><span class="term">Port Reduction</span></dt><dd>
							By utilizing HTTP upgrade, JBoss EAP 7 has moved nearly all of its protocols to be multiplexed over just two HTTP ports: a management port (9990), and an application port (8080).
						</dd><dt><span class="term">Enhanced Logging</span></dt><dd>
							The management API now supports the ability to list and view the available log files on a server, or even define custom formatters other than the default pattern formatter. Deployment’s logging setup is also greatly enhanced.
						</dd></dl></div><p>
				For a complete list of new features introduced in JBoss EAP 7.0, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/7.0.0_release_notes/#release_notes_new_features">New Features and Enhancements</a> in the JBoss EAP <span class="emphasis"><em>7.0.0 Release Notes</em></span>.
			</p><h3><a id="new_features_and_enhancements_in_jboss_eap_71"/>New Features and Enhancements Introduced in JBoss EAP 7.1</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Elytron</span></dt><dd>
							Elytron, based on the WildFly Elytron project, is the new security framework in JBoss EAP 7.1. It is designed to unify security across the entire application server.
						</dd><dt><span class="term">Management Console</span></dt><dd>
							The management console has been improved to provide the ability to configure more subsystems, provide enhanced <code class="literal">transaction</code> subsystem and transaction resource metrics, and manage many additional configurations.
						</dd><dt><span class="term">Management CLI</span></dt><dd>
							The management CLI provides enhanced support for response and file attachments, module configuration, and debugging support through the <code class="literal">echo-command</code> argument.
						</dd></dl></div><p>
				For the complete list of new features introduced in JBoss EAP 7.1, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html-single/7.1.0_release_notes/#new_features_and_enhancements">New Features and Enhancements</a> in the <span class="emphasis"><em>7.1.0 Release Notes</em></span> on the Red Hat Customer Portal.
			</p><h3><a id="new_features_and_enhancements_in_jboss_eap_72"/>New Features and Enhancements Introduced in JBoss EAP 7.2</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Java EE 8</span></dt><dd>
							JBoss EAP 7.2 is a certified implementation of Java EE 8. It includes support for Java Servlet 4.0, Java Persistence 2.2, CDI 2.0, JSF 2.3, JSON-B 1.0, JSON-P 1.1, and JAX-RS 2.1, and more. See <a class="link" href="https://www.oracle.com/technetwork/java/javaee/tech/index.html">Java™ EE 8 Technologies</a> for more information about the technologies supported in the Java Enterprise Edition (Java EE) 8 platform.
						</dd><dt><span class="term">BOMs Available for Application Development</span></dt><dd>
							A new set of BOMs are available that provide the JBoss EAP runtime dependencies for Java EE 8. Where the Java EE 7 BOM names contained <code class="literal">javaee7</code>, the BOMs in this release now contain <code class="literal">javaee8</code> in their names. For more information about the new BOMs, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/development_guide/#manage_project_dependencies">Manage Project Dependencies</a> in the <span class="emphasis"><em>Development Guide</em></span> for JBoss EAP.
						</dd></dl></div><p>
				For the complete list of new features introduced in JBoss EAP 7.2, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/7.2.0_release_notes/#new_features_and_enhancements">New Features and Enhancements</a> in the <span class="emphasis"><em>7.2.0 Release Notes</em></span> on the Red Hat Customer Portal.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migration-review-deprecated_and_unsupported_features"/>Review The List of Deprecated and Unsupported Features</h1></div></div></div><p>
				Before you migrate your application to JBoss EAP 7.2, be aware that some features that were available in previous releases of JBoss EAP might be deprecated or no longer supported. Support for some technologies was removed due to the high maintenance cost, low community interest, and much better alternative solutions.
			</p><p>
				The following is a short summary of some of the deprecated and unsupported features.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">EJB Entity Beans</span></dt><dd>
							EJB entity beans are no longer supported. If your application uses EJB entity beans, you should migrate the code to use JPA, which offers a much more performant and flexible API.
						</dd><dt><span class="term">JAX-RPC</span></dt><dd>
							Because JAX-WS offers a much more accurate and complete solution, code written for JAX-RPC should be migrated to use JAX-WS.
						</dd><dt><span class="term">JSR-88</span></dt><dd>
							Java EE Application Deployment API specification (JSR-88), which defined a contract to enable tools from multiple providers to configure and deploy applications on any Java EE platform product, was not widely adopted. You must use another JBoss EAP supported option for application deployment, such as the management console, the management CLI, deployment scanner, or Maven.
						</dd><dt><span class="term">Generic JMS Resource Adapter</span></dt><dd>
							The ability to configure a generic JMS resource adapter to connect to a JMS provider is no longer supported.
						</dd><dt><span class="term">IO Subsystem</span></dt><dd>
							IO buffer pools are deprecated. They are replaced by Undertow byte buffer pools.
						</dd><dt><span class="term">Cache Stores</span></dt><dd>
							The <code class="literal">remote</code> cache store has been deprecated in favor of using the <code class="literal">hotrod</code> cache store.
						</dd><dt><span class="term">Platforms and Features</span></dt><dd>
							A number of platforms and databases that were available in previous releases are deprecated in JBoss EAP 7.2.
						</dd></dl></div><p>
				For a complete list of deprecated and unsupported features in JBoss EAP 7.0, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/7.0.0_release_notes/#release_notes_unsupported_and_deprecated_functionality">Unsupported and Deprecated Functionality</a> in the JBoss EAP <span class="emphasis"><em>7.0.0 Release Notes</em></span> on the Red Hat Customer Portal.
			</p><p>
				For the complete list of deprecated and unsupported features in JBoss EAP 7.1, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html-single/7.1.0_release_notes/#unsupported_and_deprecated_functionality">Unsupported and Deprecated Functionality</a> in the JBoss EAP <span class="emphasis"><em>7.1.0 Release Notes</em></span> on the Red Hat Customer Portal.
			</p><p>
				For the complete list of deprecated and unsupported features in JBoss EAP 7.2, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/7.2.0_release_notes/#unsupported_and_deprecated_functionality">Unsupported and Deprecated Functionality</a> in the JBoss EAP <span class="emphasis"><em>7.2.0 Release Notes</em></span> on the Red Hat Customer Portal.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="review_getting_started_material"/>Review the JBoss EAP Getting Started Material</h1></div></div></div><p>
				Be sure to review the JBoss EAP <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/getting_started_guide/"><span class="emphasis"><em>Getting Started Guide</em></span></a>. It contains the following important information:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						How to download and install JBoss EAP 7
					</li><li class="listitem">
						How to download and install Red Hat Developer Studio
					</li><li class="listitem">
						How to configure Maven for your development environment, manage project dependencies, and configure your projects to use the JBoss EAP Bill of Material (BOM) artifacts
					</li><li class="listitem">
						How to download and run the quickstart example applications that ship with the product
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migration_analysis_and_planning"/>Migration Analysis and Planning</h1></div></div></div><p>
				Each application and server configuration is unique, and you must thoroughly understand the components and architecture of the existing application and server platform before you attempt the migration. Your migration plan should include a detailed road map for testing and rollout to production that takes into account the following information.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Identify the People Responsible for the Migration</span></dt><dd>
							Identify the stakeholders, project managers, developers, administrators, and others who are responsible for the migration.
						</dd><dt><span class="term">Review the Application Server Platform Configuration and Hardware</span></dt><dd><p class="simpara">
							Examine the existing application server and platform configuration to determine how they are impacted by feature changes in JBoss EAP 7. The review should include the following items.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									Operating systems and versions
								</li><li class="listitem">
									Database used by the applications
								</li><li class="listitem">
									Web servers
								</li><li class="listitem">
									Security architecture
								</li><li class="listitem">
									Number and type of processors
								</li><li class="listitem">
									Amount of memory
								</li><li class="listitem">
									Amount of physical disk storage
								</li><li class="listitem">
									Migration of database or messaging data
								</li><li class="listitem">
									Other components that might be impacted by the migration
								</li></ul></div></dd><dt><span class="term">Review the Current Production Environment</span></dt><dd><p class="simpara">
							You should plan to recreate the production environment as closely as possible for testing and staging the migration process.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									Take into account any clustering configurations. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/patching_and_upgrading_guide/#patching_and_upgrading_a_cluster">Upgrading a Cluster</a> in the JBoss EAP <span class="emphasis"><em>Patching and Upgrading Guide</em></span> for more information about how to migrate clusters.
								</li><li class="listitem">
									If you are currently running a large managed domain, consider a gradual migration approach.
								</li><li class="listitem">
									Determine whether you need to migrate any database or messaging data.
								</li></ul></div></dd><dt><span class="term">Examine and Understand the Existing Application</span></dt><dd><p class="simpara">
							Thoroughly examine the existing JBoss EAP 6 application. Be totally familiar with its architecture, functions, features and components, including:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									The JVM version
								</li><li class="listitem">
									Integration with other Red Hat application server middleware components
								</li><li class="listitem">
									Integration with proprietary third-party software
								</li><li class="listitem">
									Use of deprecated features that will require replacement
								</li><li class="listitem">
									Application configuration including deployment descriptors, JNDI, persistence, JDBC configuration and pooling, JMS topics and queues, and logging
								</li></ul></div><p class="simpara">
							Identify any code or configuration incompatibilities that will require modification during the migration to JBoss EAP 7.
						</p></dd><dt><span class="term">Create a Detailed Test Plan</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									The plan should include regression testing and acceptance criteria requirements.
								</li><li class="listitem">
									It should also include performance testing.
								</li><li class="listitem">
									Set up a staging environment as close to the production environment as possible to test the migration before the rollout to production.
								</li><li class="listitem">
									Be sure to create a backup and backout plan!
								</li></ul></div></dd><dt><span class="term">Review the Resources Available for the Migration Process</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									Assess the skills of the development team and plan for training or additional consulting help.
								</li><li class="listitem">
									Be aware that additional hardware and other resources will be required for staging and testing during the migration process until the effort is completed.
								</li><li class="listitem">
									Determine whether any formal training is needed. If so, add it to the schedule.
								</li></ul></div></dd><dt><span class="term">Execute the Plan</span></dt><dd>
							Gather the necessary resources and implement the migration plan.
						</dd></dl></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					Before making any modifications to your application, be sure to create a backup copy.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrate_back_up_important_data_and_review_server_state"/>Back Up Important Data and Review Server State</h1></div></div></div><p>
				Before you migrate your application, you need to be aware of the following potential issues.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The migration might remove temporary folders. Any deployments stored in the <code class="literal">data/content/</code> directory must be backed up prior to the migration and restored after it completes. Otherwise, the server will fail to start due to the missing content.
					</li><li class="listitem">
						Prior to the migration, handle any open transactions and delete the <code class="literal">data/tx-object-store/</code> transaction directory.
					</li><li class="listitem">
						The persistent timer data in <code class="literal">data/timer-service-data</code> must be checked to determine whether it will still be applicable after the upgrade. Before the upgrade, review the <code class="literal">deployment-*</code> files in that directory to determine which timers are still in use.
					</li></ul></div><p>
				Be sure to also back up the current server configuration and applications before you begin.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrating_an_rpm_installation"/>Migrating an RPM Installation</h1></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					It is not supported to have more than one RPM-installed instance of JBoss EAP on a single Red Hat Enterprise Linux Server. As a result, we recommend that you migrate your JBoss EAP installation to a new machine when migrating to JBoss EAP 7.
				</p><p>
					When migrating a JBoss EAP RPM installation from JBoss EAP 6 to JBoss EAP 7, ensure that JBoss EAP 7 is installed on a machine that does not have an existing JBoss EAP RPM installation.
				</p></div><p>
				To install JBoss EAP 7 using RPMs, see the JBoss EAP <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/installation_guide/#rpm_installation"><span class="emphasis"><em>Installation Guide</em></span></a>.
			</p><p>
				The migration advice in this guide also applies to migrating RPM installations of JBoss EAP, but you might need to alter some steps (such as how to start JBoss EAP) to suit an RPM installation compared to a ZIP or installer installation.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrate_jboss_running_as_a_service"/>Migrate JBoss EAP Running as a Service</h1></div></div></div><p>
				If you run JBoss EAP 6 as a service, be sure to review <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/installation_guide/#configuring_jboss_eap_to_run_as_a_service">Configuring JBoss EAP to Run as a Service</a> in the JBoss EAP <span class="emphasis"><em>Installation Guide</em></span> for updated configuration instructions for JBoss EAP 7.
			</p></div></div></body></html>