<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Appendix B. Worker Node Reference</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="worker_node_reference"/>Appendix B. Worker Node Reference</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="worker_configuration"/>Worker Configuration</h1></div></div></div><p>
				Configuration values are sent to proxies under the following conditions:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						During server startup.
					</li><li class="listitem">
						When a proxy is detected through the advertise mechanism.
					</li><li class="listitem">
						During error recovery, when a proxy’s configuration is reset.
					</li></ul></div><div class="table"><a id="Proxy_Configuration_Values_for_Tomcat"/><p class="title"><strong>Table B.1. Proxy Configuration Values for Tomcat</strong></p><div class="table-contents"><table summary="Proxy Configuration Values for Tomcat" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Value</th><th style="text-align: left" valign="top">Default</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								stickySession
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								true
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies whether subsequent requests for a given session should be routed to the same node, if possible.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								stickySessionRemove
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								false
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies whether the Apache HTTP Server proxy should remove session stickiness if the balancer is unable to route a request to the node to which it is stuck. This property is ignored if <code class="literal">stickySession</code> is <code class="literal">false</code>.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								stickySessionForce
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								true
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies whether the Apache HTTP Server proxy should return an error if the balancer is unable to route a request to the node to which it is stuck. This property is ignored if <code class="literal">stickySession</code> is <code class="literal">false</code>.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								workerTimeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies the number of seconds to wait for a worker to become available to handle a request. When all the workers of a balancer are unusable, mod_cluster will retry after a while (<code class="literal">workerTimeout</code>/<code class="literal">100</code>) to find an usable worker. A value of <code class="literal">-1</code> indicates that the Apache HTTP Server will not wait for a worker to be available and will return an error if no workers are available.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								maxAttempts
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								1
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies the number of times the Apache HTTP Server proxy will attempt to send a given request to a worker before aborting. The minimum value is <code class="literal">1</code>: try once before aborting.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								flushPackets
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								false
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies whether packet flushing is enabled or disabled.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								flushWait
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies the time to wait before flushing packets. A value of <code class="literal">-1</code> means wait forever.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								ping
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								10
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Time to wait (in seconds) for a pong answer to a ping.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								smax
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								Specifies the soft maximum idle connection count. The maximum value is determined by the Apache HTTP Server thread configuration (<code class="literal">ThreadsPerChild</code> or <code class="literal">1</code>).
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								ttl
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								60
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies the time (in seconds) idle connections persist, above the <code class="literal">smax</code> threshold.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								nodeTimeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies the time (in seconds) mod_cluster waits for the back-end server response before returning an error. mod_cluster always uses a <code class="literal">cping</code>/<code class="literal">cpong</code> before forwarding a request. The <code class="literal">connectiontimeout</code> value used by mod_cluster is the ping value.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								balancer
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								mycluster
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Specifies the name of the load-balancer.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								loadBalancingGroup
							</p>
							 </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								Specifies the load balancing among <code class="literal">jvmRoutes</code> within the same load balancing group. A <code class="literal">loadBalancingGroup</code> is conceptually equivalent to a mod_jk domain directive.
							</p>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mod_cluster_Proxy_and_Proxy_Discovery_Configuration_Attributes"/>mod_cluster Proxy and Proxy Discovery Configuration Attributes</h1></div></div></div><p>
				The following tables contain attributes and information about mod_cluster proxy, and proxy discovery configuration attributes.
			</p><div class="table"><a id="idm140328003652416"/><p class="title"><strong>Table B.2. mod_cluster Proxy Discovery Configuration Attributes</strong></p><div class="table-contents"><table summary="mod_cluster Proxy Discovery Configuration Attributes" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Attribute</th><th style="text-align: left" valign="top">Property</th><th style="text-align: left" valign="top">Default Value</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								proxy-list
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								proxyList
							</p>
							 </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								proxy-url
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								proxyURL
							</p>
							 </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								advertise
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								advertise
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								true
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								advertise-security-key
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								advertiseSecurityKey
							</p>
							 </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								excluded-contexts
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								excludedContexts
							</p>
							 </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								auto-enable-contexts
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								autoEnableContexts
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								true
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								stop-context-timeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								stopContextTimeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								10 seconds (in seconds)
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								socket-timeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nodeTimeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								20 seconds (in milliseconds)
							</p>
							 </td></tr></tbody></table></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					When <code class="literal">nodeTimeout</code> is not defined, the <code class="literal">ProxyTimeout</code> directive, <code class="literal">Proxy</code>, is used. If <code class="literal">ProxyTimeout</code> is not defined, the server timeout (<code class="literal">Timeout</code>) is used (120 seconds by default in the JBCS httpd.conf). <code class="literal">nodeTimeout</code>, <code class="literal">ProxyTimeout</code>, and <code class="literal">Timeout</code> are set at the socket level.
				</p></div><div class="table"><a id="idm140327991803328"/><p class="title"><strong>Table B.3. mod_cluster Proxy Configuration Attributes</strong></p><div class="table-contents"><table summary="mod_cluster Proxy Configuration Attributes" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Attribute</th><th style="text-align: left" valign="top">Property</th><th style="text-align: left" valign="top">Default Value</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								sticky-session
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								stickySession
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								true
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								sticky-session-remove
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								stickySessionRemove
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								false
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								sticky-session-force
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								stickySessionForce
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								true
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								node-timeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								workerTimeout
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								max-attempts
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								maxAttempts
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								1
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								flush-packets
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								flushPackets
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								false
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								flush-wait
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								flushWait
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								ping
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ping
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								10 (seconds)
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								smax
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								smax
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1 (uses the default value)
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								ttl
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ttl
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								-1 (uses the default value)
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								domain
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								loadBalancingGroup
							</p>
							 </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
								load-balancing-group
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								loadBalancingGroup
							</p>
							 </td><td style="text-align: left" valign="top"> </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="load_configuration"/>Load Configuration</h1></div></div></div><p>
				The following table contains additional configuration properties that are used when mod_cluster is configured with Tomcat.
			</p><div class="table"><a id="idm140328000200064"/><p class="title"><strong>Table B.4. Load Configuration for Tomcat</strong></p><div class="table-contents"><table summary="Load Configuration for Tomcat" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Attribute</th><th style="text-align: left" valign="top">Default Value</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								loadMetricClass
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								org.jboss.modcluster.load.metric.impl.BusyConnectorsLoadMetric
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The class name of an object that is implementing <code class="literal">org.jboss.load.metric.LoadMetric</code>.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								loadMetricCapacity
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								1
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The capacity of the load metric defined via the <code class="literal">loadMetricClass</code> property.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								loadHistory
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								9
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The number of historic load values that must be considered in the load balance factor computation.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								loadDecayFactor
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								2
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								The factor by which the historic load values decrease in significance.
							</p>
							 </td></tr></tbody></table></div></div></div></div></body></html>