<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. Tools and Tips</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Tools_and_Tips">
      ⁠</a>Chapter 4. Tools and Tips</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Resources_to_Assist_With_Migration">
      ⁠</a>4.1. Resources to Assist With Migration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Resources_to_Assist_in_Your_Migration">
      ⁠</a>4.1.1. Resources to Assist in Your Migration</h2></div></div></div><div class="para">
		The following is a list of resources that may be of help when migrating an application to JBoss EAP 6.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Tools</span></dt><dd><div class="para">
					There are several tools that help automate some of the configuration changes. For more information, refer:  <a class="xref" href="chap-Tools_and_Tips.html#Become_Familiar_with_Tools_That_Can_Assist_with_the_Migration1">Section 4.1.2, “Become Familiar with Tools That Can Assist with the Migration”</a>.
				</div></dd><dt><span class="term">Debugging Tips</span></dt><dd><div class="para">
					For a list of the most common causes and resolutions of issues and errors you may see when you migrate your application, refer:  <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_Migration_Issues">Section 4.2.1, “Debug and Resolve Migration Issues”</a>.
				</div></dd><dt><span class="term">Example migrations</span></dt><dd><div class="para">
					For examples of applications that have been migrated to JBoss EAP 6, refer:  <a class="xref" href="chap-Tools_and_Tips.html#Review_Migration_of_Example_Applications1">Section 4.3.1, “Review Migration of Example Applications”</a>.
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+7673-760080+%5BLatest%5D&amp;comment=Title%3A+Resources+to+Assist+in+Your+Migration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=7673-760080+01+Jun+2015+04%3A31+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Become_Familiar_with_Tools_That_Can_Assist_with_the_Migration1">
      ⁠</a>4.1.2. Become Familiar with Tools That Can Assist with the Migration</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			There are some tools that can assist you in your migration efforts. The following is a list of these tools along with a description of what they do.
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Tattletale</span></dt><dd><div class="para">
					With the change to modular class loading, you need to find and rectify application dependencies. Tattletale can help you identify dependent module names and generate the configuration XML for your application.
				</div><div class="para">
					 <a class="xref" href="chap-Tools_and_Tips.html#Use_Tattletale_to_Find_Application_Dependencies">Section 4.1.3, “Use Tattletale to Find Application Dependencies”</a>
				</div></dd><dt><span class="term">IronJacamar Migration Tool</span></dt><dd><div class="para">
					In JBoss EAP 6, datasources and resource adapters are no longer configured in a separate file. They are now defined in the server configuration file and use new schemas. The IronJacamar Migration Tool can help convert the old configuration into the format expected by JBoss EAP 6.
				</div><div class="para">
					 <a class="xref" href="chap-Tools_and_Tips.html#Use_the_IronJacamar_Tool_to_Migrate_Datasource_and_Resource_Adapter_Configurations">Section 4.1.6, “Use the IronJacamar Tool to Migrate Datasource and Resource Adapter Configurations”</a>
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5412-591697+%5BLatest%5D&amp;comment=Title%3A+Become+Familiar+with+Tools+That+Can+Assist+with+the+Migration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5412-591697+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Use_Tattletale_to_Find_Application_Dependencies">
      ⁠</a>4.1.3. Use Tattletale to Find Application Dependencies</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Due to the modular class loading changes in JBoss EAP 6, you might see <code class="classname">ClassNotFoundException</code> or <code class="classname">ClassCastException</code> traces in the JBoss log when you migrate your application. To resolve these errors, you need to find the JARs that contain the classes specified by the exceptions.
		</div><div class="para">
		Tattletale is an excellent third party tool that recursively scans your application and provides detailed reports about its contents. Tattletale 1.2.0.Beta2 or later contains additional support to help with the new JBoss Modules class loading used in JBoss EAP 6. Tattletale's "JBoss AS 7" report can be used to automatically identify and generate dependent module names to include your application's <code class="filename">jboss-deployment-structure.xml</code> file.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819261435440">
      ⁠</a><p class="title"><strong>Procedure 4.1. Install and run Tattletale to find application dependencies</strong></p><ol class="1"><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Download_and_Install_Tattletale1">Section 4.1.4, “Download and Install Tattletale”</a>
			</div></li><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Create_and_Review_the_Tattletale_Report1">Section 4.1.5, “Create and Review the Tattletale Report”</a>
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Tattletale is a third party tool and not supported as part of JBoss EAP 6. For the most current documentation on how to install and use Tattletale, go to the Tattletale web site at <a href="http://tattletale.jboss.org/">http://tattletale.jboss.org/</a>.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4618-760073+%5BLatest%5D&amp;comment=Title%3A+Use+Tattletale+to+Find+Application+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4618-760073+01+Jun+2015+02%3A46+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Download_and_Install_Tattletale1">
      ⁠</a>4.1.4. Download and Install Tattletale</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819296132256">
      ⁠</a><p class="title"><strong>Procedure 4.2. Download and Install Tattletale</strong></p><ol class="1"><li class="step"><div class="para">
				Download Tattletale version 1.2.0.Beta2 or newer from <a href="http://sourceforge.net/projects/jboss/files/JBoss%20Tattletale">http://sourceforge.net/projects/jboss/files/JBoss%20Tattletale</a>.
			</div></li><li class="step"><div class="para">
				Unzip the file into the directory of your choice.
			</div></li><li class="step"><div class="para">
				Modify the <code class="filename">TATTLETALE_HOME/jboss-tattletale.properties</code> file by doing the following:
			</div><ol class="substeps a"><li class="step"><div class="para">
						Add <code class="code">ee6</code> and <code class="code">as7</code> to the <code class="code">profiles</code> property.
					</div><div class="para">
						
<pre class="programlisting">profiles=java5, java6, ee6, as7</pre>

					</div></li><li class="step"><div class="para">
						Uncomment the <code class="code">scan</code> and <code class="code">reports</code> properties.
					</div></li></ol></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4914-603840+%5BLatest%5D&amp;comment=Title%3A+Download+and+Install+Tattletale%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4914-603840+25+Feb+2014+17%3A35+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_and_Review_the_Tattletale_Report1">
      ⁠</a>4.1.5. Create and Review the Tattletale Report</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Create the Tattletale report by issuing the command: <code class="command"> java -jar <code class="filename"><em class="replaceable">TATTLETALE_HOME</em>/tattletale.jar</code> <code class="filename"><em class="replaceable">APPLICATION_ARCHIVE</em></code><code class="filename"> <em class="replaceable">OUTPUT_DIRECTORY</em></code></code>
			</div><div class="para">
				For example: <code class="command"> java -jar tattletale-1.2.0.Beta2/tattletale.jar ~/applications/jboss-seam-booking.ear ~/output-results/</code>
			</div></li><li class="step"><div class="para">
				In a browser, open the <code class="filename"><em class="replaceable">OUTPUT_DIRECTORY</em>/index.html</code> file and click on "JBoss AS 7" under the "Reports" section.
			</div><ol class="substeps a"><li class="step"><div class="para">
						The column on the left lists the archives used by the application. Click on the <em class="replaceable">ARCHIVE_NAME</em> link to view details about the archive, such as its location, manifest information, and classes it contains.
					</div></li><li class="step"><div class="para">
						The <code class="filename">jboss-deployment-structure.xml</code> link in the column on the right shows how to specify the module dependency for the archive named in the left column. Click on this link to see how to define the deployment dependency module information for this archive.
					</div></li></ol></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4953-621267+%5BLatest%5D&amp;comment=Title%3A+Create+and+Review+the+Tattletale+Report%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4953-621267+13+Mar+2014+07%3A35+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Use_the_IronJacamar_Tool_to_Migrate_Datasource_and_Resource_Adapter_Configurations">
      ⁠</a>4.1.6. Use the IronJacamar Tool to Migrate Datasource and Resource Adapter Configurations</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			In previous versions of the application server, datasources and resource adapters were configured and deployed using a file with a suffix of <code class="filename">*-ds.xml</code>. The IronJacamar 1.1 distribution contains a migration tool that can be used to convert these configuration files into the format expected by JBoss EAP 6. The tool parses the source configuration file from the previous release, then creates and writes the XML configuration to an output file in the new format. This XML can then be copied and pasted under the correct subsystem in the JBoss EAP 6 server configuration file. This tool makes a best effort to convert old attributes and elements into the new format, however, it may be necessary to make additional modifications to the generated file.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819253982352">
      ⁠</a><p class="title"><strong>Procedure 4.3. Install and run the IronJacamar Migration tool</strong></p><ol class="1"><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Download_and_Install_the_IronJacamar_Migration_Tool">Section 4.1.7, “Download and Install the IronJacamar Migration Tool”</a>
			</div></li><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Use_the_IronJacamar_Migration_Tool_to_Convert_a_Datasource_Configuration_File1">Section 4.1.8, “Use the IronJacamar Migration Tool to Convert a Datasource Configuration File”</a>
			</div></li><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Use_the_IronJacamar_Migration_Tool_to_Convert_a_Resource_Adapter_Configuration_File">Section 4.1.9, “Use the IronJacamar Migration Tool to Convert a Resource Adapter Configuration File”</a>
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The IronJacamar Migration tool is a third party tool and not supported as part of JBoss EAP 6. For more information about IronJacamar, go to <a href="http://www.ironjacamar.org/">http://www.ironjacamar.org/</a>. For the most current documentation on how to install and use this tool, go to <a href="http://www.ironjacamar.org/documentation.html">http://www.ironjacamar.org/documentation.html</a>.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5408-760074+%5BLatest%5D&amp;comment=Title%3A+Use+the+IronJacamar+Tool+to+Migrate+Datasource+and+Resource+Adapter+Configurations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5408-760074+01+Jun+2015+02%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Download_and_Install_the_IronJacamar_Migration_Tool">
      ⁠</a>4.1.7. Download and Install the IronJacamar Migration Tool</h2></div></div></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				The migration tool is only available in IronJacamar 1.1 version or higher and requires Java 7 or higher.
			</div></div></div>

	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Download the latest distribution of IronJacamar from here: <a href="http://www.ironjacamar.org/download.html">http://www.ironjacamar.org/download.html</a>
			</div></li><li class="step"><div class="para">
				Unzip the downloaded file into a directory of your choice.
			</div></li><li class="step"><div class="para">
				Find the converter script in the IronJacamar distribution. 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							The Linux script is located here: <code class="filename"><em class="replaceable">IRONJACAMAR_HOME</em>/doc/as/converter.sh</code>
						</div></li><li class="listitem"><div class="para">
							The Windows batch file is located here: <code class="filename"><em class="replaceable">IRONJACAMAR_HOME</em>/doc/as/converter.bat</code>
						</div></li></ul></div>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5411-649874+%5BLatest%5D&amp;comment=Title%3A+Download+and+Install+the+IronJacamar+Migration+Tool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5411-649874+02+Jun+2014+10%3A43+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Use_the_IronJacamar_Migration_Tool_to_Convert_a_Datasource_Configuration_File1">
      ⁠</a>4.1.8. Use the IronJacamar Migration Tool to Convert a Datasource Configuration File</h2></div></div></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				The IronJacamar converter script requires Java 7 or higher.
			</div></div></div>

	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819293868752">
      ⁠</a><p class="title"><strong>Procedure 4.4. Convert a Datasource Configuration File</strong></p><ol class="1"><li class="step"><div class="para">
				Open a command line and navigate to the <code class="filename"><em class="replaceable">IRONJACAMAR_HOME</em>/doc/as/</code> directory.
			</div></li><li class="step"><div class="para">
				Run the converter script by typing the following command: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							For Linux: <code class="command">./converter.sh -ds <code class="filename"><em class="replaceable">SOURCE_FILE</em></code> <code class="filename"><em class="replaceable">TARGET_FILE</em></code></code>
						</div></li><li class="listitem"><div class="para">
							For Microsoft Windows: <code class="command">./converter.bat -ds <code class="filename"><em class="replaceable">SOURCE_FILE</em></code> <code class="filename"><em class="replaceable">TARGET_FILE</em></code></code>
						</div></li></ul></div>

			</div><div class="para">
				The <code class="filename"><em class="replaceable">SOURCE_FILE</em></code> is the datasource -ds.xml file from the previous release. The <code class="filename"><em class="replaceable">TARGET_FILE</em></code> contains the new configuration.
			</div><div class="para">
				For example, to convert the <code class="filename">jboss-seam-booking-ds.xml</code> datasource configuration file located in the current directory, you would type: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							For Linux: <code class="command">./converter.sh -ds <code class="filename">jboss-seam-booking-ds.xml</code> <code class="filename">new-datasource-config.xml</code></code>
						</div></li><li class="listitem"><div class="para">
							For Microsoft Windows: <code class="command">./converter.bat -ds <code class="filename">jboss-seam-booking-ds.xml</code> <code class="filename">new-datasource-config.xml</code></code>
						</div></li></ul></div>

			</div><div class="para">
				Note that the parameter for datasource conversion is <code class="code">-ds</code>.
			</div></li><li class="step"><div class="para">
				Copy the <code class="code">&lt;datasource&gt;</code> element from the target file and paste it into the server configuration file under the <code class="code">&lt;subsystem xmlns="urn:jboss:domain:datasources:1.1"&gt;</code><code class="code">&lt;datasources&gt;</code> element. 
				<div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
						You must stop the server before editing the server configuration file for your change to be persisted on server restart.
					</div></div></div>
				 <div class="itemizedlist"><ul><li class="listitem"><div class="para">
							If you are running in a managed domain, copy the XML into the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> file.
						</div></li><li class="listitem"><div class="para">
							If you are running as a standalone server, copy the XML into the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code> file.
						</div></li></ul></div>

			</div></li><li class="step"><div class="para">
				Modify the generated XML in the new configuration file.
			</div><div class="para">
				Here is an example of the <code class="filename">jboss-seam-booking-ds.xml</code> datasource configuration file for the Seam 2.2 Booking example that shipped with JBoss EAP 5.x: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>bookingDatasource<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:hsqldb:.<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>org.hsqldb.jdbcDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre>
				 The following is the configuration file that was generated by running the converter script. The generated file contains a <code class="code">&lt;driver-class&gt;</code> element. The preferred way to define the driver class in JBoss EAP 6 is to use a <code class="code">&lt;driver&gt;</code> element. Here is the resulting XML in the JBoss EAP 6 configuration file with modifications to comment out the <code class="code">&lt;driver-class&gt;</code> element and add the corresponding <code class="code">&lt;driver&gt;</code> element: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:datasources:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource</span><span xmlns="" class="perl_Others"> enabled=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/datasources/bookingDatasource"</span><span xmlns="" class="perl_Others"> jta=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            pool-name=</span><span xmlns="" class="perl_String">"bookingDatasource"</span><span xmlns="" class="perl_Others"> use-ccm=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> use-java-context=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:hsqldb:.<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">&lt;!-- Comment out the following driver-class element </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">           since it is not the preferred way to define this.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">           &lt;driver-class&gt;org.hsqldb.jdbcDriver&lt;/driver-class&gt;     --&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">&lt;!-- Specify the driver, which is defined later in the datasource  --&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;driver&gt;</span>h2<span xmlns="" class="perl_Keyword">&lt;driver&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;transaction-isolation&gt;</span>TRANSACTION_NONE<span xmlns="" class="perl_Keyword">&lt;/transaction-isolation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;pool&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;prefill&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/prefill&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;use-strict-min&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-strict-min&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;flush-strategy&gt;</span>FailingConnectionOnly<span xmlns="" class="perl_Keyword">&lt;/flush-strategy&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/pool&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;password/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;validation&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;validate-on-match&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/validate-on-match&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;background-validation&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/background-validation&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;use-fast-fail&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-fast-fail&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;timeout/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;statement&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;track-statements&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/track-statements&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/statement&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;drivers&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">&lt;!-- The following driver element was not in the </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     XML target file. It was created manually. --&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;driver</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"h2"</span><span xmlns="" class="perl_Others"> module=</span><span xmlns="" class="perl_String">"com.h2database.h2"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>org.h2.jdbcx.JdbcDataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/driver&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/drivers&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span>
</pre>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5409-689247+%5BLatest%5D&amp;comment=Title%3A+Use+the+IronJacamar+Migration+Tool+to+Convert+a+Datasource+Configuration+File%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5409-689247+30+Jul+2014+09%3A11+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Use_the_IronJacamar_Migration_Tool_to_Convert_a_Resource_Adapter_Configuration_File">
      ⁠</a>4.1.9. Use the IronJacamar Migration Tool to Convert a Resource Adapter Configuration File</h2></div></div></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				The IronJacamar converter script requires Java 7 or higher.
			</div></div></div>

	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Open a command line and navigate to the <code class="filename"><em class="replaceable">IRONJACAMAR_HOME</em>/docs/as/</code> directory.
			</div></li><li class="step"><div class="para">
				Run the converter script by typing the following command: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							For Linux: <code class="command">./converter.sh -ra <code class="filename"><em class="replaceable">SOURCE_FILE</em></code> <code class="filename"><em class="replaceable">TARGET_FILE</em></code></code>
						</div></li><li class="listitem"><div class="para">
							For Microsoft Windows: <code class="command">./converter.bat -ra <code class="filename"><em class="replaceable">SOURCE_FILE</em></code> <code class="filename"><em class="replaceable">TARGET_FILE</em></code></code>
						</div></li></ul></div>

			</div><div class="para">
				The <code class="filename"><em class="replaceable">SOURCE_FILE</em></code> is the resource adapter -ds.xml file from the previous release. The <code class="filename"><em class="replaceable">TARGET_FILE</em></code> contains the new configuration.
			</div><div class="para">
				For example, to convert the <code class="filename">mttestadapter-ds.xml</code> resource adapter configuration file located in the current directory, you would type: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							For Linux: <code class="command">./converter.sh -ra <code class="filename">mttestadapter-ds.xml</code> <code class="filename">new-adapter-config.xml</code></code>
						</div></li><li class="listitem"><div class="para">
							For Microsoft Windows: <code class="command">./converter.bat -ra <code class="filename">mttestadapter-ds.xml</code> <code class="filename">new-adapter-config.xml</code></code>
						</div></li></ul></div>

			</div><div class="para">
				Note that the parameter for resource adapter conversion is <code class="code">-ra</code>.
			</div></li><li class="step"><div class="para">
				Copy the entire <code class="code">&lt;resource-adapters&gt;</code> element from the target file and paste it into the server configuration file under the <code class="code">&lt;subsystem xmlns="urn:jboss:domain:resource-adapters:1.1"&gt;</code> element. 
				<div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
						You must stop the server before editing the server configuration file for your change to be persisted on server restart.
					</div></div></div>
				 <div class="itemizedlist"><ul><li class="listitem"><div class="para">
							If you are running in a managed domain, copy the XML into the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> file.
						</div></li><li class="listitem"><div class="para">
							If you are running as a standalone server,copy the XML into the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code> file.
						</div></li></ul></div>

			</div></li><li class="step"><div class="para">
				Modify the generated XML in the new configuration file.
			</div><div class="para">
				Here is an example of the <code class="filename">mttestadapter-ds.xml</code> resource adapter configuration file from the JBoss EAP 5.x TestSuite: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- ==================================================================== --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- ConnectionManager setup for jboss test adapter                       --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- Build jmx-api (build/build.sh all) and view for config documentation --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- ==================================================================== --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;connection-factories&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;tx-connection-factory&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>JBossTestCF<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-transaction/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;rar-name&gt;</span>jbosstestadapter.rar<span xmlns="" class="perl_Keyword">&lt;/rar-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definition&gt;</span>javax.resource.cci.ConnectionFactory<span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IntegerProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Integer"</span><span xmlns="" class="perl_Keyword">&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"BooleanProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Boolean"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DoubleProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Double"</span><span xmlns="" class="perl_Keyword">&gt;</span>5.5<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"UrlProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.net.URL"</span><span xmlns="" class="perl_Keyword">&gt;</span>http://www.jboss.org<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStart"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStop"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/tx-connection-factory&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;tx-connection-factory&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>JBossTestCF2<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-transaction/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;rar-name&gt;</span>jbosstestadapter.rar<span xmlns="" class="perl_Keyword">&lt;/rar-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definition&gt;</span>javax.resource.cci.ConnectionFactory<span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IntegerProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Integer"</span><span xmlns="" class="perl_Keyword">&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"BooleanProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Boolean"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DoubleProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Double"</span><span xmlns="" class="perl_Keyword">&gt;</span>5.5<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"UrlProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.net.URL"</span><span xmlns="" class="perl_Keyword">&gt;</span>http://www.jboss.org<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStart"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStop"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/tx-connection-factory&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;tx-connection-factory&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>JBossTestCFByTx<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-transaction/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;rar-name&gt;</span>jbosstestadapter.rar<span xmlns="" class="perl_Keyword">&lt;/rar-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definition&gt;</span>javax.resource.cci.ConnectionFactory<span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IntegerProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Integer"</span><span xmlns="" class="perl_Keyword">&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"BooleanProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Boolean"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DoubleProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.lang.Double"</span><span xmlns="" class="perl_Keyword">&gt;</span>5.5<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"UrlProperty"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"java.net.URL"</span><span xmlns="" class="perl_Keyword">&gt;</span>http://www.jboss.org<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStart"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStop"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/tx-connection-factory&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/connection-factories&gt;</span></pre>
				 The following is the configuration file that was generated by running the converter script. Replace the class-name attribute value "FIXME_MCF_CLASS_NAME" in the generated XML with the correct class name of the managed connection factory, in this case, "org.jboss.test.jca.adapter.TestManagedConnectionFactory". Here is the resulting XML in the JBoss EAP 6 configuration file with modifications to the <code class="code">&lt;class-name&gt;</code> element value: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:resource-adapters:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;resource-adapters&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>jbosstestadapter.rar<span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>XATransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- Replace the "FIXME_MCF_CLASS_NAME" class-name value with the correct class name</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">  &lt;connection-definition class-name="FIXME_MCF_CLASS_NAME" enabled="true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    jndi-name="java:jboss/JBossTestCF" pool-name="JBossTestCF" </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    use-ccm="true" use-java-context="true"&gt; --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;connection-definition</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    class-name=</span><span xmlns="" class="perl_String">"org.jboss.test.jca.adapter.TestManagedConnectionFactory"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    enabled=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/JBossTestCF"</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"JBossTestCF"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    use-ccm=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> use-java-context=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IntegerProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStart"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStop"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"BooleanProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"UrlProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>http://www.jboss.org<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DoubleProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>5.5<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;pool&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;prefill&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/prefill&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;use-strict-min&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-strict-min&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;flush-strategy&gt;</span>FailingConnectionOnly<span xmlns="" class="perl_Keyword">&lt;/flush-strategy&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/pool&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;application/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;timeout/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;background-validation&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/background-validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;use-fast-fail&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-fast-fail&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/validation&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>jbosstestadapter.rar<span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>XATransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- Replace the "FIXME_MCF_CLASS_NAME" class-name value with the correct class name</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">   &lt;connection-definition class-name="FIXME_MCF_CLASS_NAME" enabled="true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    jndi-name="java:jboss/JBossTestCF2" pool-name="JBossTestCF2" </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    use-ccm="true" use-java-context="true"&gt; --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;connection-definition</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    class-name=</span><span xmlns="" class="perl_String">"org.jboss.test.jca.adapter.TestManagedConnectionFactory"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    enabled=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/JBossTestCF2"</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"JBossTestCF2"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    use-ccm=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> use-java-context=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IntegerProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStart"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStop"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"BooleanProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"UrlProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>http://www.jboss.org<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DoubleProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>5.5<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;pool&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;prefill&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/prefill&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;use-strict-min&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-strict-min&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;flush-strategy&gt;</span>FailingConnectionOnly<span xmlns="" class="perl_Keyword">&lt;/flush-strategy&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/pool&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;application/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;timeout/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;background-validation&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/background-validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;use-fast-fail&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-fast-fail&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/validation&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>jbosstestadapter.rar<span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>XATransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- Replace the "FIXME_MCF_CLASS_NAME" class-name value with the correct class name</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">  &lt;connection-definition class-name="FIXME_MCF_CLASS_NAME" enabled="true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     jndi-name="java:jboss/JBossTestCFByTx" pool-name="JBossTestCFByTx" </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     use-ccm="true" use-java-context="true"&gt; --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;connection-definition</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    class-name=</span><span xmlns="" class="perl_String">"org.jboss.test.jca.adapter.TestManagedConnectionFactory"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    enabled=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/JBossTestCFByTx"</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"JBossTestCFByTx"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    use-ccm=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> use-java-context=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IntegerProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStart"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sleepInStop"</span><span xmlns="" class="perl_Keyword">&gt;</span>200<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"BooleanProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"UrlProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>http://www.jboss.org<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DoubleProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>5.5<span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;pool&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;prefill&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/prefill&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;use-strict-min&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-strict-min&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;flush-strategy&gt;</span>FailingConnectionOnly<span xmlns="" class="perl_Keyword">&lt;/flush-strategy&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/pool&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;application/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;timeout/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;background-validation&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/background-validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;use-fast-fail&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-fast-fail&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/validation&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/resource-adapters&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span>
</pre>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5410-649873+%5BLatest%5D&amp;comment=Title%3A+Use+the+IronJacamar+Migration+Tool+to+Convert+a+Resource+Adapter+Configuration+File%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5410-649873+02+Jun+2014+10%3A40+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Debug_Migration_Issues">
      ⁠</a>4.2. Debug Migration Issues</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_Migration_Issues">
      ⁠</a>4.2.1. Debug and Resolve Migration Issues</h2></div></div></div><div class="para">
		Due to class loading, JNDI naming rules, and other changes in the application server, you may encounter exceptions or other errors if you try to deploy your application "as-is". The following describes how to resolve some of the more common exceptions and errors you might encounter.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_ClassNotFoundExceptions_and_NoClassDefFoundErrors">Section 4.2.2, “Debug and Resolve ClassNotFoundExceptions and NoClassDefFoundErrors”</a>
			</div></li><li class="listitem"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_ClassCastExceptions1">Section 4.2.5, “Debug and Resolve ClassCastExceptions”</a>
			</div></li><li class="listitem"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_DuplicateServiceExceptions1">Section 4.2.6, “Debug and Resolve DuplicateServiceExceptions”</a>
			</div></li><li class="listitem"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_JBoss_Seam_Debug_Page_Errors1">Section 4.2.7, “Debug and Resolve JBoss Seam Debug Page Errors”</a>
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4602-603757+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+Migration+Issues%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4602-603757+25+Feb+2014+17%3A25+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_ClassNotFoundExceptions_and_NoClassDefFoundErrors">
      ⁠</a>4.2.2. Debug and Resolve ClassNotFoundExceptions and NoClassDefFoundErrors</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			ClassNotFoundExceptions usually occur due to an unresolved dependency. This means you must explicitly define the dependencies on other modules or copy JARs from external sources.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				 First, try to find the missing dependency. This is described in more detail here: <a class="xref" href="chap-Tools_and_Tips.html#Find_the_JBoss_Module_Dependency1">Section 4.2.3, “Find the JBoss Module Dependency”</a>
			</div></li><li class="step"><div class="para">
				 If there is not a module for the missing class, find the JAR in the previous install. For more information, see <a class="xref" href="chap-Tools_and_Tips.html#Find_the_JAR_in_the_Previous_Install1">Section 4.2.4, “Find the JAR in the Previous Install”</a>
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5247-606477+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+ClassNotFoundExceptions+and+NoClassDefFoundErrors%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5247-606477+26+Feb+2014+14%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Find_the_JBoss_Module_Dependency1">
      ⁠</a>4.2.3. Find the JBoss Module Dependency</h2></div></div></div><div class="para">
		To resolve the dependency, first, try to find the module that contains the class specified by the <code class="classname">ClassNotFoundException</code> by looking in the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/</code> directory. If you find a module for the class, you must add a dependency to the manifest entry.
	</div><div class="para">
		For example, if you see this ClassNotFoundException trace in the log: 
<pre class="screen">Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.Log 
    from [Module "deployment.TopicIndex.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:188)
</pre>
		 Find the JBoss module containing this class by doing the following:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819306944688">
      ⁠</a><p class="title"><strong>Procedure 4.5. Find the Dependency</strong></p><ol class="1"><li class="step"><div class="para">
				First determine if there is an obvious module for the class.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Navigate to the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/</code> directory and look for the module path matching class named in the <code class="classname">ClassNotFoundException</code>.
					</div><div class="para">
						You find the module path <code class="filename">org/apache/commons/logging/</code>.
					</div></li><li class="step"><div class="para">
						Open the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/org/apache/commons/logging/main/module.xml</code> file and find the module name. In this case, it is "org.apache.commons.logging".
					</div></li><li class="step"><div class="para">
						Add the module name to the Dependencies in the <code class="filename">MANIFEST.MF</code> file:
					</div><div class="para">
						
<pre class="programlisting">
Manifest-Version: 1.0
Dependencies: org.apache.commons.logging
</pre>

					</div></li></ol></li><li class="step"><div class="para">
				If there is no obvious module path for the class, you may need to find the dependency in another location.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Find the class named by the <code class="classname">ClassNotFoundException</code> in the Tattletale report.
					</div></li><li class="step"><div class="para">
						Find the module containing the JAR in the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules</code> directory and find the module name as in the previous step.
					</div></li></ol></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5251-603893+%5BLatest%5D&amp;comment=Title%3A+Find+the+JBoss+Module+Dependency%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5251-603893+25+Feb+2014+17%3A40+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Find_the_JAR_in_the_Previous_Install1">
      ⁠</a>4.2.4. Find the JAR in the Previous Install</h2></div></div></div><div class="para">
		If the class is not found in a JAR packaged in a module defined by the server, find the JAR in your <em class="replaceable">EAP5_HOME</em> install or your prior server's <code class="filename">lib/</code> directory.
	</div><div class="para">
		For example, if you see this <code class="classname">ClassNotFoundException</code> trace in the log: 
<pre class="screen">Caused by: java.lang.NoClassDefFoundError: org/hibernate/validator/ClassValidator at java.lang.Class.getDeclaredMethods0(Native Method)</pre>
		 Find the JAR containing this class by doing the following:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Open a terminal and navigate to the <code class="filename"><em class="replaceable">EAP5_HOME</em>/</code> directory.
			</div></li><li class="step"><div class="para">
				Issue the command:
			</div><div class="para">
				<code class="command">grep 'org.hibernate.validator.ClassValidator' `find . \-name '*.jar'`</code>
			</div></li><li class="step"><div class="para">
				You might see more than one result. In this case, the following result is the JAR we need:
			</div><div class="para">
				
<pre class="screen">Binary file ./jboss-eap-5.1/seam/lib/hibernate-validator.jar matches</pre>

			</div></li><li class="step"><div class="para">
				Copy this JAR to the application's <code class="filename">lib/</code> directory.
			</div><div class="para">
				If you find that you need a large number of JARs, it may be easier to define a module for the classes. For more information, see <em class="citetitle">Modules</em> in the chapter entitled <em class="citetitle">Get Started Developing Applications</em> in the <em class="citetitle">Development Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
			</div></li><li class="step"><div class="para">
				Rebuild and redeploy the application.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5248-781558+%5BLatest%5D&amp;comment=Title%3A+Find+the+JAR+in+the+Previous+Install%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5248-781558+13+Nov+2017+13%3A36+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_ClassCastExceptions1">
      ⁠</a>4.2.5. Debug and Resolve ClassCastExceptions</h2></div></div></div><div class="para">
		ClassCastExceptions often happen because a class is being loaded by a different class loader than the class it extends. They can also be a result of the same class existing in multiple JARs.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Search the application to find all JAR(s) that contain the class named by the <code class="classname">ClassCastException</code>. If there is a module defined for the class, find and remove the duplicate JAR(s) from the application's WAR or EAR.
			</div></li><li class="step"><div class="para">
				Find the JBoss module containing the class and explicitly define the dependency in the <code class="filename">MANIFEST.MF</code> file or in the <code class="filename">jboss-deployment-structure.xml</code> file. For more information, see <em class="citetitle">Class Loading and Subdeployments</em> in the chapter entitled <em class="citetitle">Class Loading and Modules</em> in the <em class="citetitle">Development Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
			</div></li><li class="step"><div class="para">
				If you are not able to resolve it using the steps above, you can often determine the cause of the problem by printing the class loader information to the log. For example, you see the following <code class="classname">ClassCastException</code> in the log:
			</div><div class="para">
				
<pre class="screen">java.lang.ClassCastException: com.example1.CustomClass1 cannot be cast to com.example2.CustomClass2</pre>

			</div><ol class="substeps a"><li class="step"><div class="para">
						In your code, print the class loader information for the classes named by the <code class="classname">ClassCastException</code> to the log, for example:
					</div><div class="para">
						
<pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>logger.<span xmlns="" class="perl_Function">info</span>(<span xmlns="" class="perl_String">"Class loader for CustomClass1: "</span> + 
<span xmlns="" class="line">​</span>      com.<span xmlns="" class="perl_Function">example1</span>.<span xmlns="" class="perl_Function">CustomClass1</span>.<span xmlns="" class="perl_Function">getClass</span>().<span xmlns="" class="perl_Function">getClassLoader</span>().<span xmlns="" class="perl_Function">toString</span>());
<span xmlns="" class="line">​</span>logger.<span xmlns="" class="perl_Function">info</span>(<span xmlns="" class="perl_String">"Class loader for CustomClass2: "</span> + 
<span xmlns="" class="line">​</span>      com.<span xmlns="" class="perl_Function">example2</span>.<span xmlns="" class="perl_Function">CustomClass2</span>.<span xmlns="" class="perl_Function">getClass</span>().<span xmlns="" class="perl_Function">getClassLoader</span>().<span xmlns="" class="perl_Function">toString</span>());
</pre>

					</div></li><li class="step"><div class="para">
						The information in the log shows which modules are loading the classes and, based on your application, you need to remove or move the conflicting JAR(s).
					</div></li></ol></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5249-781557+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+ClassCastExceptions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5249-781557+13+Nov+2017+13%3A34+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_DuplicateServiceExceptions1">
      ⁠</a>4.2.6. Debug and Resolve DuplicateServiceExceptions</h2></div></div></div><div class="para">
		If you get a DuplicateServiceException for a subdeployment of a JAR or a message that the WAR application has already been installed when you deploy your EAR in JBoss EAP 6, it may be due to changes in the way JBossWS handles the deployment.
	</div><div class="para">
		The JBossWS 3.3.0 release introduced a new Context Root Mapping Algorithm for servlet based endpoints to allow it to become seamlessly compatible with TCK6. If the application EAR archive contains a WAR and a JAR with the same name, JBossWS may create a WAR context and web context with the same name. The web context conflicts with the WAR context and this results in deployment errors. Resolve the deployment issues in one of the following ways:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Rename the JAR file to a name that is different than the WAR so the generated web and WAR contexts is unique.
			</div></li><li class="listitem"><div class="para">
				Provide a <code class="code">&lt;context-root&gt;</code> element in the <code class="filename">jboss-web.xml</code> file.
			</div></li><li class="listitem"><div class="para">
				Provide a <code class="code">&lt;context-root&gt;</code> element in the <code class="filename">jboss-webservices.xml</code> file.
			</div></li><li class="listitem"><div class="para">
				Customize the <code class="code">&lt;context-root&gt;</code> element for the WAR in the <code class="filename">application.xml</code> file.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4910-591677+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+DuplicateServiceExceptions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4910-591677+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_JBoss_Seam_Debug_Page_Errors1">
      ⁠</a>4.2.7. Debug and Resolve JBoss Seam Debug Page Errors</h2></div></div></div><div class="para">
		After you migrate and successfully deploy your application, you may encounter a runtime error that redirects you to the "JBoss Seam Debug" page. The URL for this page is "http://localhost:8080/<em class="replaceable">APPLICATION_CONTEXT</em>/debug.seam". This page allows you to view and inspect the Seam components in any of the Seam contexts associated with your current login session.
	</div><div class="figure"><a id="idm139819258710912">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/39.png" alt="JBoss Seam Debug Page"/></div></div><p class="title"><strong>Figure 4.1. JBoss Seam Debug Page</strong></p></div><div class="para">
		The most likely reason you are redirected to this page is because Seam has caught an Exception that was not handled in the application code. The root cause of the exception can often be found in one of the links on the "JBoss Seam Debug Page".
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Expand the <code class="code">Component</code> section on the page and look for the <code class="classname">org.jboss.seam.caughtException</code> component.
			</div></li><li class="step"><div class="para">
				The cause and stack trace should point you to the missing dependencies.
			</div><div class="figure"><a id="idm139819321690688">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/41.png" alt="Component org.jboss.seam.caughtException information"/></div></div><p class="title"><strong>Figure 4.2. Component <code class="classname">org.jboss.seam.caughtException</code> information</strong></p></div></li><li class="step"><div class="para">
				Use the technique described in  <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_ClassNotFoundExceptions_and_NoClassDefFoundErrors">Section 4.2.2, “Debug and Resolve ClassNotFoundExceptions and NoClassDefFoundErrors”</a> to resolve module dependencies.
			</div><div class="para">
				In the example above, the simplest solution is to add <code class="classname">org.slf4j</code> to the <code class="filename">MANIFEST.MF</code>
			</div><div class="para">
				
<pre class="programlisting">
Manifest-Version: 1.0
Dependencies: org.slf4j
</pre>

			</div><div class="para">
				Another option is to add a dependency for the module to the <code class="filename">jboss-deployment-structure.xml</code> file: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.slf4j"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5250-606486+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+JBoss+Seam+Debug+Page+Errors%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5250-606486+26+Feb+2014+15%3A07+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Review_Migration_of_Example_Applications">
      ⁠</a>4.3. Review Migration of Example Applications</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Review_Migration_of_Example_Applications1">
      ⁠</a>4.3.1. Review Migration of Example Applications</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			The following is a list of JBoss EAP 5.x example applications that have been migrated to JBoss EAP 6. To view the details of what was changed in a particular application, click on the link below. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						 <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_22_JPA_Example_to_JBoss_Enterprise_Application_Platform_6">Section 4.3.2, “Migrate the Seam 2.2 JPA Example to JBoss EAP 6”</a>
					</div></li><li class="listitem"><div class="para">
						 <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_2.2_Booking_Example_to_JBoss_EAP_6">Section 4.3.3, “Migrate the Seam 2.2 Booking Example to JBoss EAP 6”</a>
					</div></li><li class="listitem"><div class="para">
						  <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_2.2_Booking_Archive_to_JBoss_Enterprise_Application_6_Step-By-Step_Instructions">Section 4.3.4, “Migrate the Seam 2.2 Booking Archive to JBoss EAP 6: Step-By-Step Instructions”</a>
					</div></li></ul></div>

		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4957-606457+%5BLatest%5D&amp;comment=Title%3A+Review+Migration+of+Example+Applications%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4957-606457+26+Feb+2014+14%3A29+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migrate_the_Seam_22_JPA_Example_to_JBoss_Enterprise_Application_Platform_6">
      ⁠</a>4.3.2. Migrate the Seam 2.2 JPA Example to JBoss EAP 6</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The following task list summarizes the changes needed to successfully migrate the Seam 2.2 JPA example application to JBoss EAP 6. This example application can be found in the latest JBoss EAP 5 distribution under <code class="filename"><em class="replaceable">EAP5.x_HOME</em>/jboss-eap-5.x/seam/examples/jpa/</code>
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Applications that use Hibernate directly with Seam 2.2 may use a version of Hibernate 3 packaged inside the application. Hibernate 4, which is provided through the org.hibernate module of JBoss EAP 6, is not supported by Seam 2.2. This example is intended to help you get your application running on JBoss EAP 6 as a first step. Please be aware that packaging Hibernate 3 with a Seam 2.2 application is not a supported configuration.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819317016976">
      ⁠</a><p class="title"><strong>Procedure 4.6. Migrate the Seam 2.2 JPA Example</strong></p><ol class="1"><li class="step"><div class="para">
				Remove the <code class="filename">jboss-web.xml</code> file.
			</div><div class="para">
				Remove the <code class="filename">jboss-web.xml</code> file from the <code class="filename">jboss-seam-jpa.war/WEB-INF/</code> directory. The class loading defined in the <code class="filename">jboss-web.xml</code> is now the default behavior.
			</div></li><li class="step"><div class="para">
				Modify the <code class="filename">jboss-seam-jpa.jar/META-INF/persistence.xml</code> file as follows.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Remove or comment out the <code class="code">hibernate.cache.provider_class</code> property in the <code class="filename">jboss-seam-jpa.war/WEB-INF/classes/META-INF/persistence.xml</code> file. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- &lt;property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider"/&gt; --&gt;</span></pre>

					</div></li><li class="step"><div class="para">
						Add the provider module property to the <code class="filename">jboss-seam-booking.jar/META-INF/persistence.xml</code> file. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss.as.jpa.providerModule"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"hibernate3-bundled"</span> <span xmlns="" class="perl_Keyword">/&gt;</span></pre>

					</div></li><li class="step"><div class="para">
						Change the <code class="code">jta-data-source</code> property to use the default JDBC datasource JNDI name: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jta-data-source&gt;</span>java:jboss/datasources/ExampleDS<span xmlns="" class="perl_Keyword">&lt;/jta-data-source&gt;</span></pre>

					</div></li></ol></li><li class="step"><div class="para">
				Add Seam 2.2 dependencies.
			</div><div class="para">
				Copy the following JARs from the Seam 2.2 distribution library, <code class="filename">SEAM_HOME/lib/</code>, into the <code class="filename">jboss-seam-jpa.war/WEB-INF/lib/</code> directory. 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							antlr.jar
						</div></li><li class="listitem"><div class="para">
							slf4j-api.jar
						</div></li><li class="listitem"><div class="para">
							slf4j-log4j12.jar
						</div></li><li class="listitem"><div class="para">
							hibernate-entitymanager.jar
						</div></li><li class="listitem"><div class="para">
							hibernate-core.jar
						</div></li><li class="listitem"><div class="para">
							hibernate-annotations.jar
						</div></li><li class="listitem"><div class="para">
							hibernate-commons-annotations.jar
						</div></li><li class="listitem"><div class="para">
							hibernate-validator.jar
						</div></li></ul></div>

			</div></li><li class="step"><div class="para">
				Create a jboss-deployment-structure file to add remaining dependencies.
			</div><div class="para">
				Create a <code class="filename">jboss-deployment-structure.xml</code> file in the <code class="filename">jboss-seam-jpa.war/WEB-INF/</code> folder containing the following data. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hibernate"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.log4j"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.collections"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre>

			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The Seam 2.2 JPA example application deploys and runs successfully on JBoss EAP 6.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4952-766878+%5BLatest%5D&amp;comment=Title%3A+Migrate+the+Seam+2.2+JPA+Example+to+JBoss+EAP+6%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4952-766878+05+Aug+2015+12%3A44+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migrate_the_Seam_2.2_Booking_Example_to_JBoss_EAP_6">
      ⁠</a>4.3.3. Migrate the Seam 2.2 Booking Example to JBoss EAP 6</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The Seam 2.2 Booking EAR migration is more complicated than the Seam 2.2 JPA WAR example. Documentation for the Seam 2.2 JPA WAR example migration can be found here: <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_22_JPA_Example_to_JBoss_Enterprise_Application_Platform_6">Section 4.3.2, “Migrate the Seam 2.2 JPA Example to JBoss EAP 6”</a>. To migrate the application, you must do the following: 
			<div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
						Initialize JSF 1.2 instead of the default JSF 2.
					</div></li><li class="listitem"><div class="para">
						Bundle older versions of the Hibernate JARs rather than use those that ship with JBoss EAP 6.
					</div></li><li class="listitem"><div class="para">
						Change the JNDI bindings to use the new Java EE 6 JNDI portable syntax.
					</div></li></ol></div>
			 The first 2 steps above were done in the Seam 2.2 JPA WAR example migration. The third step is new and is necessary because the EAR contains EJBs.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Applications that use Hibernate directly with Seam 2.2 may use a version of Hibernate 3 packaged inside the application. Hibernate 4, which is provided through the org.hibernate module of JBoss EAP 6, is not supported by Seam 2.2. This example is intended to help you get your application running on JBoss EAP 6 as a first step. Please be aware that packaging Hibernate 3 with a Seam 2.2 application is not a supported configuration.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819316301280">
      ⁠</a><p class="title"><strong>Procedure 4.7. Migrate the Seam 2.2 Booking example</strong></p><ol class="1"><li class="step"><div class="para">
				Create the <code class="filename">jboss-deployment-structure.xml</code> file.
			</div><div class="para">
				Create a new file named <code class="filename">jboss-deployment-structure.xml</code> in the <code class="filename">jboss-seam-booking.ear/META-INF/</code> and add the following content: 
<pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.log4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.collections"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hibernate"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span> 
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				Modify the <code class="filename">jboss-seam-booking.jar/META-INF/persistence.xml</code> file as follows.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Remove or comment out the hibernate property for the cache provider class. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- &lt;property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider"/&gt; --&gt;</span></pre>

					</div></li><li class="step"><div class="para">
						Add the provider module property to the <code class="filename">jboss-seam-booking.jar/META-INF/persistence.xml</code> file. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss.as.jpa.providerModule"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"hibernate3-bundled"</span> <span xmlns="" class="perl_Keyword">/&gt;</span></pre>

					</div></li><li class="step"><div class="para">
						Change the <code class="code">jta-data-source</code> property to use the default JDBC datasource JNDI name. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jta-data-source&gt;</span>java:jboss/datasources/ExampleDS<span xmlns="" class="perl_Keyword">&lt;/jta-data-source&gt;</span></pre>

					</div></li></ol></li><li class="step"><div class="para">
				Copy JARs from the Seam 2.2 distribution.
			</div><div class="para">
				Copy the following JARs from the Seam 2.2 distribution <code class="filename"><em class="replaceable">EAP5.x_HOME</em>/jboss-eap5.x/seam/lib/</code> into the <code class="filename">jboss-seam-booking.ear/lib</code> directory. 
<pre class="screen">
antlr.jar
slf4j-api.jar 
slf4j-log4j12.jar 
hibernate-core.jar 
hibernate-entitymanager.jar 
hibernate-validator.jar 
hibernate-annotations.jar 
hibernate-commons-annotations.jar
</pre>

			</div></li><li class="step"><div class="para">
				Change the JNDI lookup names.
			</div><div class="para">
				Change JNDI lookup strings in the <code class="filename">jboss-seam-booking.war/WEB-INF/components.xml</code> file. Because of new JNDI portable rules, JBoss EAP 6 now binds EJBs using JNDI portable syntax rules and you cannot use the single jndiPattern that was used in JBoss EAP 5. This is what the application EJB JNDI lookup strings must be changed to JBoss EAP 6. 
<pre class="screen">
java:global/jboss-seam-booking/jboss-seam-booking/HotelSearchingAction!org.jboss.seam.example.booking.HotelSearching
java:app/jboss-seam-booking/HotelSearchingAction!org.jboss.seam.example.booking.HotelSearching
java:module/HotelSearchingAction!org.jboss.seam.example.booking.HotelSearching
java:global/jboss-seam-booking/jboss-seam-booking/HotelSearchingAction
java:app/jboss-seam-booking/HotelSearchingAction
java:module/HotelSearchingAction
</pre>
				 The JNDI lookup strings for the Seam 2.2 framework EJBs must be changed as follows. 
<pre class="screen">
java:global/jboss-seam-booking/jboss-seam/EjbSynchronizations!org.jboss.seam.transaction.LocalEjbSynchronizations
java:app/jboss-seam/EjbSynchronizations!org.jboss.seam.transaction.LocalEjbSynchronizations
java:module/EjbSynchronizations!org.jboss.seam.transaction.LocalEjbSynchronizations
java:global/jboss-seam-booking/jboss-seam/EjbSynchronizations
java:app/jboss-seam/EjbSynchronizations
java:module/EjbSynchronizations
</pre>
				 You can take either of the following approaches.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Add component elements.
					</div><div class="para">
						You can add a <code class="code">jndi-name</code> for every EJB to the <code class="filename">WEB-INF/components.xml</code>. 
<pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.transaction.EjbSynchronizations"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/EjbSynchronizations"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.async.TimerServiceDispatcher"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/TimerServiceDispatcher"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.example.booking.AuthenticatorAction"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking/AuthenticatorAction"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.example.booking.BookingListAction"</span><span xmlns="" class="perl_Others">  jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking/BookingListAction"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.example.booking.RegisterAction"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking/RegisterAction"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.example.booking.HotelSearchingAction"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking/HotelSearchingAction"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.example.booking.HotelBookingAction"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking/HotelBookingAction"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.example.booking.ChangePasswordAction"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking/ChangePasswordAction"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>

					</div></li><li class="step"><div class="para">
						You can modify the code by adding the <code class="code">@JNDIName(value="")</code> annotation specifying the JNDI path. An example of the changed stateless session bean code is below. A detailed description of this process can be found in the Seam 2.2 reference documentation. 
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Stateless
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Name</span>(<span xmlns="" class="perl_String">"authenticator"</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">JndiName</span>(value=<span xmlns="" class="perl_String">"java:app/jboss-seam-booking/AuthenticatorAction"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AuthenticatorAction 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">implements</span> Authenticator
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span>}
</pre>

					</div></li></ol></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The Seam 2.2 Booking application deploys and runs successfully on JBoss EAP 6.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+4958-766886+%5BLatest%5D&amp;comment=Title%3A+Migrate+the+Seam+2.2+Booking+Example+to+JBoss+EAP+6%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4958-766886+05+Aug+2015+13%3A13+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migrate_the_Seam_2.2_Booking_Archive_to_JBoss_Enterprise_Application_6_Step-By-Step_Instructions">
      ⁠</a>4.3.4. Migrate the Seam 2.2 Booking Archive to JBoss EAP 6: Step-By-Step Instructions</h2></div></div></div><div class="para">
		This is a step-by-step guide on how to port the Seam 2.2 Booking application archive from JBoss EAP 5.X to JBoss EAP 6. Although there are better approaches for migrating applications, many developers might be tempted to deploy the application archive as-is to the JBoss EAP 6 server to see what happens. The purpose of this document is to show the types of issues you might encounter when you do that and how you can debug and resolve those issues.
	</div><div class="para">
		For this example, the application EAR is deployed to the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments</code> directory with no changes other than extracting the archives. This allows you to easily modify the XML files contained within the archives as you encounter and resolve issues.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Applications that use Hibernate directly with Seam 2.2 may use a version of Hibernate 3 packaged inside the application. Hibernate 4, which is provided through the org.hibernate module of JBoss EAP 6, is not supported by Seam 2.2. This example is intended to help you get your application running on JBoss EAP 6 as a first step. Please be aware that packaging Hibernate 3 with a Seam 2.2 application is not a supported configuration.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819318393184">
      ⁠</a><p class="title"><strong>Procedure 4.8. Migrate the application</strong></p><ol class="1"><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Build_and_Deploy_the_JBoss_Enterprise_Application_Platform_5.1_Version_of_the_Seam_2.2_Booking_Application">Section 4.3.5, “Build and Deploy the JBoss EAP 5.X Version of the Seam 2.2 Booking Application”</a>
			</div></li><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_Seam_22_Booking_Archive_Deployment_Errors_and_Exceptions">Section 4.3.6, “Debug and Resolve Seam 2.2 Booking Archive Deployment Errors and Exceptions”</a>
			</div></li><li class="step"><div class="para">
				 <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_Seam_22_Booking_Archive_Runtime_Errors_and_Exceptions">Section 4.3.7, “Debug and Resolve Seam 2.2 Booking Archive Runtime Errors and Exceptions”</a>
			</div></li></ol></div><div class="para">
		At this point you are able to successfully access the application in a browser using the URL <a href="http://localhost:8080/seam-booking/">http://localhost:8080/seam-booking/</a>. Login with demo/demo and you see the Booking welcome page.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Review the summary of changes</div>
			 <a class="xref" href="chap-Tools_and_Tips.html#Review_a_Summary_of_the_Changes_Made_When_Migrating_the_Seam_22_Booking_Application">Section 4.3.8, “Review a Summary of the Changes Made When Migrating the Seam 2.2 Booking Application”</a>
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5578-635791+%5BLatest%5D&amp;comment=Title%3A+Migrate+the+Seam+2.2+Booking+Archive+to+JBoss+EAP+6%3A+Step-By-Step+Instructions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5578-635791+30+Apr+2014+22%3A38+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Build_and_Deploy_the_JBoss_Enterprise_Application_Platform_5.1_Version_of_the_Seam_2.2_Booking_Application">
      ⁠</a>4.3.5. Build and Deploy the JBoss EAP 5.X Version of the Seam 2.2 Booking Application</h2></div></div></div><div class="para">
		Before migrating this application, you need to build the JBoss EAP 5.X Seam 2.2 Booking application, extract the archive, and copy it into the JBoss EAP 6 deployment folder.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819314060048">
      ⁠</a><p class="title"><strong>Procedure 4.9. Build and deploy the EAR</strong></p><ol class="1"><li class="step"><div class="para">
				Build the EAR:
			</div><pre class="screen">
$ cd /<em class="replaceable">EAP5_HOME</em>/jboss-eap5.x/seam/examples/booking
$ <em class="replaceable">ANT_HOME</em>/ant explode
</pre><div class="para">
				Replace <em class="replaceable">jboss-eap5.x</em> with the version of JBoss EAP that you are migrating from
			</div></li><li class="step"><div class="para">
				Copy the EAR to the <em class="replaceable">EAP6_HOME</em> deployments directory:
			</div><pre class="screen">
$ cp -r <em class="replaceable">EAP5_HOME</em>/seam/examples/booking/exploded-archives/jboss-seam-booking.ear <em class="replaceable">EAP6_HOME</em>/standalone/deployments/
$ cp -r <em class="replaceable">EAP5_HOME</em>/seam/examples/booking/exploded-archives/jboss-seam-booking.war <em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam.ear
$ cp -r <em class="replaceable">EAP5_HOME</em>/seam/examples/booking/exploded-archives/jboss-seam-booking.jar <em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam.ear
</pre></li><li class="step"><div class="para">
				Start the JBoss EAP 6 server and check the log. You see:
			</div><pre class="screen">
INFO [org.jboss.as.deployment] (DeploymentScanner-threads - 1) Found jboss-seam-booking.ear in deployment directory. 
    To trigger deployment create a file called jboss-seam-booking.ear.dodeploy
</pre></li><li class="step"><div class="para">
				Create an empty file with the name <code class="filename">jboss-seam-booking.ear.dodeploy</code> and copy it into the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments</code> directory. You need to copy this file into the deployments directory many times while migrating this application, so keep it in a location where you can easily find it. In the log, you should now see the following messages, indicating that it is deploying:
			</div><pre class="screen">
INFO [org.jboss.as.server.deployment] (MSC service thread 1-1) Starting deployment of "jboss-seam-booking.ear"
INFO [org.jboss.as.server.deployment] (MSC service thread 1-3) Starting deployment of "jboss-seam-booking.jar"
INFO [org.jboss.as.server.deployment] (MSC service thread 1-6) Starting deployment of "jboss-seam.jar"
INFO [org.jboss.as.server.deployment] (MSC service thread 1-2) Starting deployment of "jboss-seam-booking.war"
</pre><div class="para">
				At this point, you encounter your first deployment error. In the next step, you walk through each issue and learn how to debug and resolve it.
			</div><div class="para">
				To learn how to debug and resolve deployment issues, click here: <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_Seam_22_Booking_Archive_Deployment_Errors_and_Exceptions">Section 4.3.6, “Debug and Resolve Seam 2.2 Booking Archive Deployment Errors and Exceptions”</a>
			</div><div class="para">
				To return to the previous topic, click here: <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_2.2_Booking_Archive_to_JBoss_Enterprise_Application_6_Step-By-Step_Instructions">Section 4.3.4, “Migrate the Seam 2.2 Booking Archive to JBoss EAP 6: Step-By-Step Instructions”</a>
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5615-635789+%5BLatest%5D&amp;comment=Title%3A+Build+and+Deploy+the+JBoss+EAP+5.X+Version+of+the+Seam+2.2+Booking+Application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5615-635789+30+Apr+2014+22%3A32+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_Seam_22_Booking_Archive_Deployment_Errors_and_Exceptions">
      ⁠</a>4.3.6. Debug and Resolve Seam 2.2 Booking Archive Deployment Errors and Exceptions</h2></div></div></div><div class="para">
		In the previous step, <a class="xref" href="chap-Tools_and_Tips.html#Build_and_Deploy_the_JBoss_Enterprise_Application_Platform_5.1_Version_of_the_Seam_2.2_Booking_Application">Section 4.3.5, “Build and Deploy the JBoss EAP 5.X Version of the Seam 2.2 Booking Application”</a>, you built the JBoss EAP 5.X Seam 2.2 Booking application and deployed it to the JBoss EAP 6 deployment folder. In this step, you debug and resolve each deployment error you encounter.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Applications that use Hibernate directly with Seam 2.2 may use a version of Hibernate 3 packaged inside the application. Hibernate 4, which is provided through the org.hibernate module of JBoss EAP 6, is not supported by Seam 2.2. This example is intended to help you get your application running on JBoss EAP 6 as a first step. Please be aware that packaging Hibernate 3 with a Seam 2.2 application is not a supported configuration.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819314349712">
      ⁠</a><p class="title"><strong>Procedure 4.10. Debug and resolve deployment errors and exceptions</strong></p><ol class="1"><li class="step"><div class="para">
				Issue - java.lang.ClassNotFoundException: javax.faces.FacesException
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
ERROR \[org.jboss.msc.service.fail\] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.subunit."jboss-seam-booking.ear"."jboss-seam-booking.war".POST_MODULE:
org.jboss.msc.service.StartException in service jboss.deployment.subunit."jboss-seam-booking.ear"."jboss-seam-booking.war".POST_MODULE:
Failed to process phase POST_MODULE of subdeployment "jboss-seam-booking.war" of deployment "jboss-seam-booking.ear"
    (.. additional logs removed ...)
Caused by: java.lang.ClassNotFoundException: javax.faces.FacesException from \[Module "deployment.jboss-seam-booking.ear:main" from Service Module Loader\]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The ClassNotFoundException indicates a missing dependency. In this case, it cannot find the class <code class="code">javax.faces.FacesException</code> and you need to explicitly add the dependency.
				</div><div class="para"><div class="title">How to resolve it:</div>
					Find the module name for that class in the <code class="filename"><em class="replaceable">EAP6_HOME</em>/modules/system/layers/base/</code> directory by looking for a path that matches the missing class. In this case, you find 2 modules that match: 
<pre class="screen">
javax/faces/api/main
javax/faces/api/1.2
</pre>
					 Both modules have the same module name: <code class="code">javax.faces.api</code> but one in the main directory is for JSF 2.0 and the one located in the 1.2 directory is for JSF 1.2. If there was only one module available, you could simply create a <code class="filename">MANIFEST.MF</code> file and added the module dependency. But in this case, you want to use the JSF 1.2 version and not the 2.0 version in main, so you need to specify one and exclude the other. To do this, you create a <code class="filename">jboss-deployment-structure.xml</code> file in the EAR's <code class="filename">META-INF/</code> directory that contains the following data: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span>
</pre>
					 In the <code class="code">deployment</code> section, you add the dependency for the <code class="code">javax.faces.api</code> for the JSF 1.2 module. You also add the dependency for the JSF 1.2 module in the subdeployment section for the WAR and exclude the module for JSF 2.0.
				</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - java.lang.ClassNotFoundException: org.apache.commons.logging.Log
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.deployment.unit."jboss-seam-booking.ear".INSTALL:
org.jboss.msc.service.StartException in service jboss.deployment.unit."jboss-seam-booking.ear".INSTALL:
Failed to process phase INSTALL of deployment "jboss-seam-booking.ear"
    (.. additional logs removed ...)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.Log from [Module "deployment.jboss-seam-booking.ear.jboss-seam-booking.war:main" from Service Module Loader]
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The <code class="code">ClassNotFoundException</code> indicates a missing dependency. In this case, it cannot find the class <code class="code">org.apache.commons.logging.Log</code> and you need to explicitly add the dependency.
				</div><div class="para"><div class="title">How to resolve it:</div>
					Find the module name for that class in the <code class="filename"><em class="replaceable">EAP6_HOME</em>/modules/system/layers/base/</code> directory by looking for a path that matches the missing class. In this case, you find one module that matches the path <code class="filename">org/apache/commons/logging/</code>. The module name is “org.apache.commons.logging”.
				</div><div class="para">
				Modify the <code class="filename">jboss-deployment-structure.xml</code> file to add the module dependency to the deployment section of the file. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>
				 The <code class="filename">jboss-deployment-structure.xml</code> should now look like this: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span>
</pre>

			</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - java.lang.ClassNotFoundException: org.dom4j.DocumentException
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/seam-booking]] (MSC service thread 1-3) Exception sending context initialized event to listener instance of class org.jboss.seam.servlet.SeamListener: java.lang.NoClassDefFoundError: org/dom4j/DocumentException
    (... additional logs removed ...)
Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException from [Module "deployment.jboss-seam-booking.ear.jboss-seam.jar:main" from Service Module Loader]
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The <code class="code">ClassNotFoundException</code> indicates a missing dependency. In this case, it cannot find the class <code class="code">org.dom4j.DocumentException</code>.
				</div><div class="para"><div class="title">How to resolve it:</div>
					Find the module name in the <code class="filename"><em class="replaceable">EAP6_HOME</em>/modules/system/layers/base/</code>directory by looking for the <code class="code">org/dom4j/DocumentException</code>. The module name is “org.dom4j”. Modify the <code class="filename">jboss-deployment-structure.xml</code> file to add the module dependency to the deployment section of the file. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>
					 The <code class="filename">jboss-deployment-structure.xml</code> file should now look like this: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span>
</pre>

				</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - java.lang.ClassNotFoundException: org.hibernate.validator.InvalidValue
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/seam-booking]] (MSC service thread 1-6) Exception sending context initialized event to listener instance of class org.jboss.seam.servlet.SeamListener: java.lang.RuntimeException: Could not create Component: org.jboss.seam.international.statusMessages
    (... additional logs removed ...)
Caused by: java.lang.ClassNotFoundException: org.hibernate.validator.InvalidValue from [Module "deployment.jboss-seam-booking.ear.jboss-seam.jar:main" from Service Module Loader]
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The <code class="code">ClassNotFoundException</code> indicates a missing dependency. In this case, it cannot find the class <code class="code">org.hibernate.validator.InvalidValue</code>.
				</div><div class="para"><div class="title">How to resolve it:</div>
					There is a module “org.hibernate.validator”, but the JAR does not contain the <code class="code">org.hibernate.validator.InvalidValue</code> class, so adding the module dependency does not resolve this issue. In this case, the JAR containing the class was part of the JBoss EAP 5.X deployment. Look for the JAR that contains the missing class in the <code class="filename"><em class="replaceable">EAP5_HOME/seam/lib/</em></code> directory. To do this, open a console and type the following: 
<pre class="screen">
$ cd <em class="replaceable">EAP5_HOME</em>/seam/lib
$ grep 'org.hibernate.validator.InvalidValue' `find . -name '*.jar'`
</pre>
					 The result shows: 
<pre class="screen">
$ Binary file ./hibernate-validator.jar matches
$ Binary file ./test/hibernate-all.jar matches
</pre>
					 In this case, copy the <code class="filename">hibernate-validator.jar</code> to the <code class="filename">jboss-seam-booking.ear/lib/</code> directory: 
<pre class="screen">
$ cp <em class="replaceable">EAP5_HOME</em>/seam/lib/hibernate-validator.jar jboss-seam-booking.ear/lib
</pre>

				</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - java.lang.InstantiationException: org.jboss.seam.jsf.SeamApplicationFactory
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-7) Unsanitized stacktrace from failed start...: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.application.ApplicationFactory' was not configured properly.
  at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:296) [jsf-impl-2.0.4-b09-jbossorg-4.jar:2.0.4-b09-jbossorg-4]
  (... additional logs removed ...)
Caused by: javax.faces.FacesException: org.jboss.seam.jsf.SeamApplicationFactory
  at javax.faces.FactoryFinder.getImplGivenPreviousImpl(FactoryFinder.java:606) [jsf-api-1.2_13.jar:1.2_13-b01-FCS]
  (... additional logs removed ...)
  at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:294) [jsf-impl-2.0.4-b09-jbossorg-4.jar:2.0.4-b09-jbossorg-4]
  ... 11 more
Caused by: java.lang.InstantiationException: org.jboss.seam.jsf.SeamApplicationFactory
  at java.lang.Class.newInstance0(Class.java:340) [:1.6.0_25]
  at java.lang.Class.newInstance(Class.java:308) [:1.6.0_25]
  at javax.faces.FactoryFinder.getImplGivenPreviousImpl(FactoryFinder.java:604) [jsf-api-1.2_13.jar:1.2_13-b01-FCS]
  ... 16 more
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The <code class="code">com.sun.faces.config.ConfigurationException</code> and <code class="code">java.lang.InstantiationException</code> indicate a dependency issue. In this case, the cause is not as obvious.
				</div><div class="para"><div class="title">How to resolve it:</div>
					You need to find the module that contains the <code class="code">com.sun.faces</code> classes. While there is no <code class="code">com.sun.faces</code> module, there are two <code class="code">com.sun.jsf-impl</code> modules. A quick check of the <code class="filename">jsf-impl-1.2_13.jar</code> in the 1.2 directory shows it contains the <code class="code">com.sun.faces</code> classes. As you did with the <code class="code">javax.faces.FacesException</code> <code class="code">ClassNotFoundException</code>, you want to use the JSF 1.2 version and not the JSF 2.0 version in main, so you need to specify one and exclude the other. You need to modify the <code class="filename">jboss-deployment-structure.xml</code> to add the module dependency to the deployment section of the file. You also need to add it to the WAR subdeployment and exclude the JSF 2.0 module. The file should now look like this: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>              <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>              <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre>

				</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - java.lang.ClassNotFoundException: org.apache.commons.collections.ArrayStack
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/seam-booking]] (MSC service thread 1-1) Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! org.apache.commons.collections.ArrayStack from [Module "deployment.jboss-seam-booking.ear:main" from Service Module Loader]
    (... additional logs removed ...)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.collections.ArrayStack from [Module "deployment.jboss-seam-booking.ear:main" from Service Module Loader]
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The <code class="code">ClassNotFoundException</code> indicates a missing dependency. In this case, it cannot find the class <code class="code">org.apache.commons.collections.ArrayStack</code>.
				</div><div class="para"><div class="title">How to resolve it:</div>
					Find the module name in the <code class="filename"><em class="replaceable">EAP6_HOME</em>/modules/system/layers/base/</code> directory by looking for the <code class="filename">org/apache/commons/collections</code> path. The module name is “org.apache.commons.collections”. Modify the <code class="filename">jboss-deployment-structure.xml</code> to add the module dependency to the deployment section of the file. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.collections"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre>
					 The <code class="filename">jboss-deployment-structure.xml</code> file should now look like this: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>              <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.collections"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>              <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre>

				</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - Services with missing/unavailable dependencies
			</div><div class="para">
				When you deploy the application, the log contains the following error: 
<pre class="screen">
ERROR [org.jboss.as.deployment] (DeploymentScanner-threads - 2) {"Composite operation failed and was rolled back. Steps that failed:" =&gt; {"Operation step-2" =&gt; {"Services with missing/unavailable dependencies" =&gt; ["jboss.deployment.subunit.\"jboss-seam-booking.ear\".\"jboss-seam-booking.jar\".component.AuthenticatorAction.START missing [ jboss.naming.context.java.comp.jboss-seam-booking.\"jboss-seam-booking.jar\".AuthenticatorAction.\"env/org.jboss.seam.example.booking.AuthenticatorAction/em\" ]","jboss.deployment.subunit.\"jboss-seam-booking.ear\".\"jboss-seam-booking.jar\".component.HotelSearchingAction.START missing [ jboss.naming.context.java.comp.jboss-seam-booking.\"jboss-seam-booking.jar\".HotelSearchingAction.\"env/org.jboss.seam.example.booking.HotelSearchingAction/em\" ]","
  (... additional logs removed ...)
"jboss.deployment.subunit.\"jboss-seam-booking.ear\".\"jboss-seam-booking.jar\".component.BookingListAction.START missing [ jboss.naming.context.java.comp.jboss-seam-booking.\"jboss-seam-booking.jar\".BookingListAction.\"env/org.jboss.seam.example.booking.BookingListAction/em\" ]","jboss.persistenceunit.\"jboss-seam-booking.ear/jboss-seam-booking.jar#bookingDatabase\" missing [ jboss.naming.context.java.bookingDatasource ]"]}}}
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					When you get a “Services with missing/unavailable dependencies” error, look at the text within the brackets after “missing”. In this case you see: 
<pre class="screen">
missing [ jboss.naming.context.java.comp.jboss-seam-booking.\"jboss-seam-booking.jar\".AuthenticatorAction.\"env/org.jboss.seam.example.booking.AuthenticatorAction/em\" ]
</pre>
					 The “/em” indicates an Entity Manager and datasource issue.
				</div><div class="para"><div class="title">How to resolve it:</div>
					In JBoss EAP 6, datasource configuration has changed and needs to be defined in the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/configuration/standalone.xml</code> file. Because JBoss EAP 6 ships with an example database that is already defined in the <code class="filename">standalone.xml</code> file, modify the <code class="filename">persistence.xml</code> file to use that example database in this application. Looking in the <code class="filename">standalone.xml</code> file, you can see that the <code class="code">jndi-name</code> for the example database is <code class="code">java:jboss/datasources/ExampleDS</code>. Modify the <code class="filename">jboss-seam-booking.jar/META-INF/persistence.xml</code> file to comment the existing <code class="code">jta-data-source</code> element and replace it as follows: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- &lt;jta-data-source&gt;java:/bookingDatasource&lt;/jta-data-source&gt; --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jta-data-source&gt;</span>java:jboss/datasources/ExampleDS<span xmlns="" class="perl_Keyword">&lt;/jta-data-source&gt;</span></pre>

				</div><div class="para">
				Redeploy the application by deleting the <code class="filename"><em class="replaceable">EAP6_HOME</em>/standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				At this point, the application deploys without errors, but when you access the URL <a href="http://localhost:8080/seam-booking/">http://localhost:8080/seam-booking/</a> in a browser and attempt "Account Login", you get a runtime error “The page isn't redirecting properly”. In the next step, you learn how to debug and resolve runtime errors.
			</div><div class="para">
				To learn how to debug and resolve runtime issues, click here: <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_Seam_22_Booking_Archive_Runtime_Errors_and_Exceptions">Section 4.3.7, “Debug and Resolve Seam 2.2 Booking Archive Runtime Errors and Exceptions”</a>
			</div><div class="para">
				To return to the previous topic, click here: <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_2.2_Booking_Archive_to_JBoss_Enterprise_Application_6_Step-By-Step_Instructions">Section 4.3.4, “Migrate the Seam 2.2 Booking Archive to JBoss EAP 6: Step-By-Step Instructions”</a>
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5576-635862+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+Seam+2.2+Booking+Archive+Deployment+Errors+and+Exceptions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5576-635862+01+May+2014+01%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_and_Resolve_Seam_22_Booking_Archive_Runtime_Errors_and_Exceptions">
      ⁠</a>4.3.7. Debug and Resolve Seam 2.2 Booking Archive Runtime Errors and Exceptions</h2></div></div></div><div class="para">
		In the previous step, <a class="xref" href="chap-Tools_and_Tips.html#Debug_and_Resolve_Seam_22_Booking_Archive_Deployment_Errors_and_Exceptions">Section 4.3.6, “Debug and Resolve Seam 2.2 Booking Archive Deployment Errors and Exceptions”</a>, you learned how to debug deployment errors. In this step, you debug and resolve each runtime error you encounter.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Applications that use Hibernate directly with Seam 2.2 may use a version of Hibernate 3 packaged inside the application. Hibernate 4, which is provided through the org.hibernate module of JBoss EAP 6, is not supported by Seam 2.2. This example is intended to help you get your application running on JBoss EAP 6 as a first step. Please be aware that packaging Hibernate 3 with a Seam 2.2 application is not a supported configuration.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139819311113728">
      ⁠</a><p class="title"><strong>Procedure 4.11. Debug and resolve runtime errors and exceptions</strong></p><div class="para">
			At this point, when you deploy the application you do not see any errors in the log. However, when you access the application URL, errors appear in the log.
		</div><ol class="1"><li class="step"><div class="para">
				Issue - javax.naming.NameNotFoundException: Name 'jboss-seam-booking' not found in context ''
			</div><div class="para">
				When you access the URL <a href="http://localhost:8080/seam-booking/">http://localhost:8080/seam-booking/</a> in a browser, you get "The page isn't redirecting properly" and the log contains the following error: 
<pre class="screen">
SEVERE [org.jboss.seam.jsf.SeamPhaseListener] (http--127.0.0.1-8080-1) swallowing exception: java.lang.IllegalStateException: Could not start transaction
  at org.jboss.seam.jsf.SeamPhaseListener.begin(SeamPhaseListener.java:598) [jboss-seam.jar:]
  (... log messages removed ...)
Caused by: org.jboss.seam.InstantiationException: Could not instantiate Seam component: org.jboss.seam.transaction.synchronizations
  at org.jboss.seam.Component.newInstance(Component.java:2170) [jboss-seam.jar:]
  (... log messages removed ...)
Caused by: javax.naming.NameNotFoundException: Name 'jboss-seam-booking' not found in context ''
  at org.jboss.as.naming.util.NamingUtils.nameNotFoundException(NamingUtils.java:109)
  (... log messages removed ...)
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					A <code class="code">NameNotFoundException</code> indicates a JNDI naming issue. JNDI naming rules have changed in JBoss EAP 6, so you need to modify the lookup names to follow the new rules.
				</div><div class="para"><div class="title">How to resolve it:</div>
					To debug this, look earlier in the server log trace to what JNDI binding were used. Looking at the server log you see this: 
<pre class="screen">
15:01:16,138 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-1) JNDI bindings for session bean named RegisterAction in deployment unit subdeployment "jboss-seam-booking.jar" of deployment "jboss-seam-booking.ear" are as follows:
  java:global/jboss-seam-booking/jboss-seam-booking.jar/RegisterAction!org.jboss.seam.example.booking.Register
  java:app/jboss-seam-booking.jar/RegisterAction!org.jboss.seam.example.booking.Register
  java:module/RegisterAction!org.jboss.seam.example.booking.Register
  java:global/jboss-seam-booking/jboss-seam-booking.jar/RegisterAction
  java:app/jboss-seam-booking.jar/RegisterAction
  java:module/RegisterAction
  [JNDI bindings continue ...]
</pre>
					 There are a total of eight INFO JNDI bindings listed in the log, one for each session bean: RegisterAction, BookingListAction, HotelBookingAction, AuthenticatorAction, ChangePasswordAction, HotelSearchingAction, EjbSynchronizations, and TimerServiceDispatcher. You need to modify the WAR's <code class="filename">lib/components.xml</code> file to use the new JNDI bindings. In the log, note the EJB JNDI bindings all start with "java:app/jboss-seam-booking.jar" Replace the <code class="code">core:init</code> element as follows: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--     &lt;core:init jndi-pattern="jboss-seam-booking/#{ejbName}/local" debug="true" distributable="false"/&gt; --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;core:init</span><span xmlns="" class="perl_Others"> jndi-pattern=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking.jar/#{ejbName}"</span><span xmlns="" class="perl_Others"> debug=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> distributable=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>
					 Next, you need to add the EjbSynchronizations and TimerServiceDispatcher JNDI bindings. Add the following component elements to the file: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.transaction.EjbSynchronizations"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/EjbSynchronizations"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.async.TimerServiceDispatcher"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/TimerServiceDispatcher"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>
					 The components.xml file should now look like this: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;components</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://jboss.com/products/seam/components"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xmlns:core=</span><span xmlns="" class="perl_String">"http://jboss.com/products/seam/core"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xmlns:security=</span><span xmlns="" class="perl_String">"http://jboss.com/products/seam/security"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xmlns:transaction=</span><span xmlns="" class="perl_String">"http://jboss.com/products/seam/transaction"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xsi:schemaLocation=</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_String">"http://jboss.com/products/seam/core http://jboss.com/products/seam/core-2.2.xsd</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">     http://jboss.com/products/seam/transaction http://jboss.com/products/seam/transaction-2.2.xsd</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">     http://jboss.com/products/seam/security http://jboss.com/products/seam/security-2.2.xsd</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">     http://jboss.com/products/seam/components http://jboss.com/products/seam/components-2.2.xsd"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- &lt;core:init jndi-pattern="jboss-seam-booking/#{ejbName}/local" debug="true" distributable="false"/&gt; --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;core:init</span><span xmlns="" class="perl_Others"> jndi-pattern=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking.jar/#{ejbName}"</span><span xmlns="" class="perl_Others"> debug=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> distributable=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;core:manager</span><span xmlns="" class="perl_Others"> conversation-timeout=</span><span xmlns="" class="perl_String">"120000"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                  concurrent-request-timeout=</span><span xmlns="" class="perl_String">"500"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                  conversation-id-parameter=</span><span xmlns="" class="perl_String">"cid"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction:ejb-transaction/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security:identity</span><span xmlns="" class="perl_Others"> authenticate-method=</span><span xmlns="" class="perl_String">"#{authenticator.authenticate}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.transaction.EjbSynchronizations"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/EjbSynchronizations"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.async.TimerServiceDispatcher"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/TimerServiceDispatcher"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/components&gt;</span>
</pre>

				</div><div class="para">
				Redeploy the application by deleting the <code class="filename">standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - The application deploys and runs without error. When you access the URL <a href="http://localhost:8080/seam-booking/">http://localhost:8080/seam-booking/</a> in a browser and attempt to login, it fails with the message "Login failed. Transaction failed." You should see an exception trace in the server log: 
<pre class="screen">
13:36:04,631 WARN  [org.jboss.modules] (http-/127.0.0.1:8080-1) Failed to define class org.jboss.seam.persistence.HibernateSessionProxy in Module "deployment.jboss-seam-booking.ear.jboss-seam.jar:main" from Service Module Loader: java.lang.LinkageError: Failed to link org/jboss/seam/persistence/HibernateSessionProxy (Module "deployment.jboss-seam-booking.ear.jboss-seam.jar:main" from Service Module Loader)
....
Caused by: java.lang.LinkageError: Failed to link org/jboss/seam/persistence/HibernateSessionProxy (Module "deployment.jboss-seam-booking.ear.jboss-seam.jar:main" from Service Module Loader)
...
Caused by: java.lang.NoClassDefFoundError: org/hibernate/engine/SessionImplementor
	at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0_45]
...
Caused by: java.lang.ClassNotFoundException: org.hibernate.engine.SessionImplementor from [Module "deployment.jboss-seam-booking.ear.jboss-seam.jar:main" from Service Module Loader]
...
</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The ClassNotFoundException indicates a missing Hibernate library. In this case it's the <code class="filename">hibernate-core.jar</code>.
				</div><div class="para"><div class="title">How to resolve it:</div>
					Copy the <code class="filename">hibernate-core.jar</code> JAR from the <code class="filename">EAP5_HOME/seam/lib/</code> directory to the <code class="filename">jboss-seam-booking.ear/lib</code> directory.
				</div><div class="para">
				Redeploy the application by deleting the <code class="filename">standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Issue - The application deploys and runs without error. When you access the URL <a href="http://localhost:8080/seam-booking/">http://localhost:8080/seam-booking/</a> in a browser, you are able to login successfully. However, when you attempt to book a hotel, you will see an exception trace.
			</div><div class="para">
				To debug this, you must first remove the <code class="filename">jboss-seam-booking.ear/jboss-seam-booking.war/WEB-INF/lib/jboss-seam-debug.jar</code> as it masks the true error. At this point, you should see the following error: 
<pre class="screen">java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/ReflectionManager</pre>

			</div><div class="para"><div class="title">What it means:</div>
					The NoClassDefFoundError indicates a missing Hibernate library.
				</div><div class="para"><div class="title">How to resolve it:</div>
					Copy the <code class="filename">hibernate-annotations.jar</code> and <code class="filename">hibernate-commons-annotations.jar</code> JARs from the <code class="filename">EAP5_HOME/seam/lib/</code> directory to the <code class="filename">jboss-seam-booking.ear/lib</code> directory.
				</div><div class="para">
				Redeploy the application by deleting the <code class="filename">standalone/deployments/jboss-seam-booking.ear.failed</code> file and creating a blank <code class="filename">jboss-seam-booking.ear.dodeploy</code> file in the same directory.
			</div></li><li class="step"><div class="para">
				Runtime and application errors should be resolved
			</div><div class="para">
				At this point, the application deploys and runs without error.
			</div><div class="para">
				To return to the previous topic, click here: <a class="xref" href="chap-Tools_and_Tips.html#Migrate_the_Seam_2.2_Booking_Archive_to_JBoss_Enterprise_Application_6_Step-By-Step_Instructions">Section 4.3.4, “Migrate the Seam 2.2 Booking Archive to JBoss EAP 6: Step-By-Step Instructions”</a>
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5577-591702+%5BLatest%5D&amp;comment=Title%3A+Debug+and+Resolve+Seam+2.2+Booking+Archive+Runtime+Errors+and+Exceptions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5577-591702+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Review_a_Summary_of_the_Changes_Made_When_Migrating_the_Seam_22_Booking_Application">
      ⁠</a>4.3.8. Review a Summary of the Changes Made When Migrating the Seam 2.2 Booking Application</h2></div></div></div><div class="para">
		Although it would be much more efficient to determine dependencies in advance and add the implicit dependencies in one step, this exercise shows how problems appear in the log and provides some information on how to debug and resolve them. The following is a summary of changes made to the application when migrating it to JBoss EAP 6.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Applications that use Hibernate directly with Seam 2.2 may use a version of Hibernate 3 packaged inside the application. Hibernate 4, which is provided through the org.hibernate module of JBoss EAP 6, is not supported by Seam 2.2. This example is intended to help you get your application running on JBoss EAP 6 as a first step. Please be aware that packaging Hibernate 3 with a Seam 2.2 application is not a supported configuration.
		</div></div></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
					You created a <code class="filename">jboss-deployment-structure.xml</code> file in the EAR's <code class="filename">META-INF/</code> directory. You added <code class="code">&lt;dependencies&gt;</code> and <code class="code">&lt;exclusions&gt;</code> to resolve <code class="code">ClassNotFoundExceptions</code>. This file contains the following data: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:deployment-structure:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>  	  <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.logging"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.commons.collections"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;sub-deployment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-seam-booking.war"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.faces.api"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	      <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.sun.jsf-impl"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"1.2"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/sub-deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span>
</pre>

				</div></li><li class="listitem"><div class="para">
					You copied the following JARs from the <code class="filename"><em class="replaceable">EAP5_HOME</em>/jboss-eap-5.X/seam/lib/</code> directory (replace 5.X with the version of EAP 5 that you are migrating from) to the <code class="filename">jboss-seam-booking.ear/lib/</code> directory to resolve <code class="code">ClassNotFoundExceptions</code>: 
					<div class="itemizedlist"><ul><li class="listitem"><div class="para">
								hibernate-core.jar
							</div></li><li class="listitem"><div class="para">
								hibernate-validator.jar
							</div></li></ul></div>

				</div></li><li class="listitem"><div class="para">
					You modified the <code class="filename">jboss-seam-booking.jar/META-INF/persistence.xml</code> file as follows. 
					<div class="orderedlist"><ol><li class="listitem"><div class="para">
								You changed the <code class="code">jta-data-source</code> element to use the Example database that ships with JBoss EAP 6: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- &lt;jta-data-source&gt;java:/bookingDatasource&lt;/jta-data-source&gt; --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jta-data-source&gt;</span>java:jboss/datasources/ExampleDS<span xmlns="" class="perl_Keyword">&lt;/jta-data-source&gt;</span>
</pre>

							</div></li><li class="listitem"><div class="para">
								You commented out the hibernate.cache.provider_class property: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- &lt;property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider"/&gt; --&gt;</span>
</pre>

							</div></li></ol></div>

				</div></li><li class="listitem"><div class="para">
					You modified the WAR's <code class="filename">lib/components.xml</code> file to use the new JNDI bindings 
					<div class="orderedlist"><ol><li class="listitem"><div class="para">
								You replaced the <code class="code">core:init</code> existing element as follows: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- &lt;core:init jndi-pattern="jboss-seam-booking/#{ejbName}/local" debug="true" distributable="false"/&gt; --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;core:init</span><span xmlns="" class="perl_Others"> jndi-pattern=</span><span xmlns="" class="perl_String">"java:app/jboss-seam-booking.jar/#{ejbName}"</span><span xmlns="" class="perl_Others"> debug=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> distributable=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>

							</div></li><li class="listitem"><div class="para">
								You added component elements for the "EjbSynchronizations" and "TimerServiceDispatcher" JNDI bindings 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.transaction.EjbSynchronizations"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/EjbSynchronizations"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.seam.async.TimerServiceDispatcher"</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:app/jboss-seam/TimerServiceDispatcher"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre>

							</div></li></ol></div>

				</div></li></ol></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5616-635860+%5BLatest%5D&amp;comment=Title%3A+Review+a+Summary+of+the+Changes+Made+When+Migrating+the+Seam+2.2+Booking+Application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5616-635860+01+May+2014+01%3A46+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div></div></body></html>