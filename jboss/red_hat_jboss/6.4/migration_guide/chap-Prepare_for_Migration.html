<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 2. Prepare for Migration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Prepare_for_Migration">
      ⁠</a>Chapter 2. Prepare for Migration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Prepare_for_Migration1">
      ⁠</a>2.1. Prepare for Migration</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><div class="para">
			Because the application server is structured differently than in previous versions, it is recommended that you do some research and planning before you attempt to migrate your application.
		</div><ol class="1"><li class="step"><p class="title"><strong>Review What's New and Different in JBoss EAP 6</strong></p><div class="para">
				A number of things have changed in this release that may impact deployment of JBoss EAP 5 applications. These include changes to the file directory structure, scripts, deployment configuration, class loading and JNDI lookups. See  <a class="xref" href="chap-Prepare_for_Migration.html#Review_Whats_New_and_Different_in_JBoss_Enterprise_Application_Platform_61">Section 2.2, “Review What's New and Different in JBoss EAP 6”</a> for details.
			</div></li><li class="step"><p class="title"><strong>Review the Get Started documentation</strong></p><div class="para">
				Be sure to review the chapter entitled <em class="citetitle">Get Started Developing Applications</em> in the <em class="citetitle">Development Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>. It contains important information about the following: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							Java EE 6
						</div></li><li class="listitem"><div class="para">
							The new modular class loading system
						</div></li><li class="listitem"><div class="para">
							File structure changes
						</div></li><li class="listitem"><div class="para">
							How to download and install JBoss EAP 6
						</div></li><li class="listitem"><div class="para">
							How to download and install JBoss Developer Studio
						</div></li><li class="listitem"><div class="para">
							How to configure Maven for your development environment
						</div></li><li class="listitem"><div class="para">
							How to download and run the quickstart example applications that ship with the product.
						</div></li></ul></div>

			</div></li><li class="step"><p class="title"><strong>Learn How to Use JBoss EAP 6 Dependencies in your Maven Project</strong></p><div class="para">
				Be sure to review the chapter entitled <em class="citetitle">Maven Guide</em> in the <em class="citetitle">Development Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>. The <em class="citetitle">Manage Project Dependencies</em> section contains important information on how to configure your project to use JBoss EAP Bill of Material (BOM) artifacts.
			</div></li><li class="step"><p class="title"><strong>Analyze and Understand your Application</strong></p><div class="para">
				Each application is unique and you must thoroughly understand the components and architecture of the existing application before you attempt the migration.
			</div></li></ol></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
				Before making any modifications to your application, be sure to create a backup copy.
			</div></div></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+7668-781562+%5BLatest%5D&amp;comment=Title%3A+Prepare+for+Migration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=7668-781562+13+Nov+2017+13%3A47+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Review_Whats_New_and_Different_in_JBoss_Enterprise_Application_Platform_61">
      ⁠</a>2.2. Review What's New and Different in JBoss EAP 6</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Introduction</div>
			The following is a list of notable differences in JBoss EAP 6 from the previous release.
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Module based class loading</span></dt><dd><div class="para">
					In JBoss EAP 5, the class loading architecture was hierarchical. In JBoss EAP 6, class loading is based on JBoss Modules. This offers true application isolation, hides server implementation classes, and only loads the classes your application needs. Class loading is concurrent for better performance. Applications written for JBoss EAP 5 must be modified to specify module dependencies and in some cases, repackage archives. For more information, see <em class="citetitle">Class Loading and Modules</em> in the <em class="citetitle">Development Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
				</div></dd><dt><span class="term">Domain Management</span></dt><dd><div class="para">
					In JBoss EAP 6, the server can be run as a standalone server or in a managed domain. In a managed domain, you can configure entire groups of servers at once, keeping configurations synchronized across your entire network of servers. While this should not impact applications built for previous releases, this can simplify management of deployments to multiple servers. For more information, see <em class="citetitle">About Managed Domains</em> in the <em class="citetitle">Administration and Configuration Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
				</div></dd><dt><span class="term">Deployment Configuration</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Standalone Servers and Managed Domains</span></dt><dd><div class="para">
								JBoss EAP 5 used profile based deployment configuration. These profiles were located in the <code class="filename"><em class="replaceable">EAP_HOME</em>/server/</code> directory. Applications often contained multiple configuration files for security, database, resource adapter, and other configurations. In JBoss EAP 6, deployment configuration is done using one file. This file is used to configure all the services and subsystems used for the deployment. A standalone server is configured using the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code> file. For servers running in a managed domain, the server is configured using the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> file. The information contained in the multiple JBoss EAP 5 configuration files must be migrated to the new single configuration file.
							</div></dd><dt><span class="term">Ordering of deployments</span></dt><dd><div class="para">
								JBoss EAP 6 uses fast, concurrent initialization for deployment resulting in improved performance and efficiency. In most cases, the application server is able to automatically determine dependencies in advance and choose the most efficient deployment strategy. However, JBoss EAP 5 applications that consist of multiple modules deployed as EARs or that use legacy JNDI lookups instead of CDI injection or resource-ref entries may require configuration changes.
							</div></dd></dl></div></dd><dt><span class="term">Directory Structure and Scripts</span></dt><dd><div class="para">
					As previously mentioned, JBoss EAP 6 no longer uses profile based deployment configuration, so there is no <code class="filename"><em class="replaceable">EAP_HOME</em>/server/</code> directory. Configuration files for standalone servers are now located in the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/</code> directory and deployments are located in the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/deployments/</code> directory. For servers running in a managed domain, configuration files can be found in the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/</code> directory.
				</div><div class="para">
					In JBoss EAP 5, the Linux script <code class="command"><em class="replaceable">EAP_HOME</em>/bin/run.sh</code> or Windows script <code class="command"><em class="replaceable">EAP_HOME</em>/bin/run.bat</code> was used to start the server. In JBoss EAP 6, the server start script is dependent on how you run your server. The Linux script <code class="command"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh</code> or Windows script <code class="command"><em class="replaceable">EAP_HOME</em>/bin/standalone.bat</code> is used to start a standalone server. The Linux script <code class="command"><em class="replaceable">EAP_HOME</em>/bin/domain.sh</code> or Windows script <code class="command"><em class="replaceable">EAP_HOME</em>/bin/domain.bat</code> is used to start a managed domain.
				</div></dd><dt><span class="term">JNDI Lookups</span></dt><dd><div class="para">
					JBoss EAP 6 now uses standardized portable JNDI namespaces. Applications written for JBoss EAP 5 that use JNDI lookups must be changed to follow the new standardized JNDI namespace convention. For more information about JNDI naming syntax, see <a class="xref" href="chap-Migrate_Your_Application.html#Portable_JNDI_Naming_Syntax">Section 3.1.8.2, “Portable EJB JNDI Names”</a>.
				</div></dd><dt><span class="term">Virtual File System</span></dt><dd><div class="para">
					JBoss EAP 6 replaces VFS2 with VFS3. Some configuration options that were available in JBoss EAP 5, which used VFS2, are no longer needed in JBoss EAP 6. The System properties configurations that were available in VFS2 are no longer used or available in VFS3. The caching system was replaced in VFS3, which resolves the caching issues that existed in VFS2. VFS is used internally by JBoss EAP and should not be accessed directly within application code.
				</div></dd></dl></div><div class="para">
		For additional information, see <em class="citetitle">New and Changed Features in JBoss EAP 6</em> in the <em class="citetitle">Development Guide</em> for JBoss EAP 6 on <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+5946-781560+%5BLatest%5D&amp;comment=Title%3A+Review+What%27s+New+and+Different+in+JBoss+EAP+6%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5946-781560+13+Nov+2017+13%3A39+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Review_The_List_of_Deprecated_and_Unsupported_Features">
      ⁠</a>2.3. Review The List of Deprecated and Unsupported Features</h1></div></div></div><div class="para">
		Before you migrate your application, be aware that some features that were available in previous releases of JBoss EAP may be deprecated or no longer supported. For a comprehensive list, see the <em class="citetitle">Unsupported Features</em> section of the <em class="citetitle">Release Notes</em> for JBoss EAP 6 located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
	</div><div class="para">
		The following is a short summary of some of the unsupported features.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Server Startup -b Command Line Argument</span></dt><dd><div class="para">
					In previous versions, JBoss EAP automatically used the address specified by the <code class="literal">-b</code> startup parameter, regardless of the IP address. In JBoss EAP 6, the server <code class="code">&lt;inet-address&gt;</code> configuration looks for a network interface configured with a matching IP address. While this works for <code class="literal">127.0.0.1</code>, it no longer works for <code class="literal">127.*.*.*</code> IP adresses. If you start the JBoss EAP 6 server with the <code class="literal">-b</code> command line argument to bind to <code class="literal">127.*.*.*</code> IP addresses, you must now first change the interface from <code class="code">&lt;inet-address&gt;</code> to <code class="code">&lt;loopback-address&gt;</code> in the server configuration file.
				</div><div class="para">
					For information about how to configure the server using the Management CLI, see the section entitled <em class="citetitle">Management CLI Operations</em> in the <em class="citetitle">Administration and Configuration Guide</em> for JBoss Enterprise Application Platform located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
				</div></dd><dt><span class="term">EJB Dependencies</span></dt><dd><div class="para">
					In previous versions of JBoss EAP, EJB dependencies on a service or services, including other EJBs, could be specified using a <code class="code">&lt;depends&gt;</code> tag in the <code class="filename">jboss.xml</code> deployment descriptor. For example: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;depends&gt;</span>jboss.j2ee:jndiName=com/myorg/app/Foo,service=EJB<span xmlns="" class="perl_Keyword">&lt;/depends&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;depends&gt;</span>jboss.mq.destination:service=Queue,name=queue/HelloworldQueue<span xmlns="" class="perl_Keyword">&lt;/depends&gt;</span></pre>
					 In JBoss EAP 6, you must use the <code class="code">@EJB</code> annotation to inject EJB references and the <code class="code">@Resource</code> annotation to access datasources or other resources. For example: 
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">EJB</span>(lookup=<span xmlns="" class="perl_String">"java:global/MyApp/FooImpl!com.myorg.app.Foo"</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Resource</span>(mappedName = <span xmlns="" class="perl_String">"java:/queue/HelloworldQueue"</span>)</pre>

				</div><div class="para">
					JNDI lookups have also changed. See the section entitled <em class="citetitle">JNDI Changes</em> in this guide for details.
				</div><div class="para">
					For more information about EJB references, see the section entitled <em class="citetitle">EJB Reference Resolution</em> in the <em class="citetitle">Development Guide</em> for JBoss Enterprise Application Platform located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
				</div></dd><dt><span class="term">HTTPInvoker</span></dt><dd><div class="para">
					In previous versions of JBoss EAP, it was possible to use the HTTPInvoker to configure an EJB, JNDI, or JMS to use the HTTP protocol. This is no longer possible in JBoss EAP 6.
				</div></dd><dt><span class="term">HA Singleton Deployments and BarrierController Service</span></dt><dd><div class="para">
					The HA SingletonService guarantees there is only one instance of a service running within the cluster.
				</div><div class="para">
					JBoss EAP 5 provided support for multiple strategies for HA Singleton deployments, including the HASingletonDeployer service, POJO deployments using HASingletonController, and HASingleton deployments using the BarrierController Service. These strategies all relied on the HAPartition to provide notifications when different nodes in the cluster started and stopped and are no longer available.
				</div><div class="para">
					In JBoss EAP 6, HA Singleton deployments have completely changed. The singleton deployer now operates on Modular Service Container (MSC) services only. Using a SingletonService, the target service is installed on every node in the cluster but is only started on one node at any given time. This approach simplifies the deployment requirements and minimizes the time required to relocate the singleton master service between nodes. However, it does require you write custom code to achieve the same functionality. An example of an HA Singleton deployment is included with the JBoss EAP quickstart example applications that ship with the product. For more information about HA Singletons, see <a class="xref" href="chap-Migrate_Your_Application.html#Implement_an_HA_Singleton">Section 3.2.10.2, “Implement an HA Singleton”</a> .
				</div></dd><dt><span class="term">JAAS Security Manager Service</span></dt><dd><div class="para">

				</div><div class="para">
					JBoss EAP 5 shipped with JAAS Security Manager, which provided data source password encryption services and configured identities with Password Based Encryption (PBE). This service is not included in JBoss EAP 6. JBoss EAP 6 recommends the use of a password vault for encrypting data source passwords. The password encryption algorithm used JBoss EAP 5 with the JAAS Security Manager Service is not compatible with the algorithm used when encrypting passwords using a password vault in JBoss EAP 6. Administrators will have to regenerate any passwords that were encrypted using Password Based Encryption in previous releases.
				</div><div class="para">
					If you used the DynamicLoginConfig service to dynamically deploy credentials in previous versions of JBoss EAP, there is no similar method for dynamically deploying credentials in JBoss EAP 6. The ability to secure the vault password with something other than the globally known masked value is only available in JBoss EAP 6.4 or later.
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+20099-781561+%5BLatest%5D&amp;comment=Title%3A+Review+The+List+of+Deprecated+and+Unsupported+Features%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=20099-781561+13+Nov+2017+13%3A45+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_Migrations_and_Upgrades">
      ⁠</a>2.4. About Migrations and Upgrades</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Major Upgrades</div>
			A major upgrade or migration is required when an application is moved from one major release to another, for example, from JBoss EAP 5 to JBoss EAP 6. This is the type of migration addressed in this guide. If an application follows the Java EE specifications, does not access deprecated APIs, and does not contain proprietary code, it may be possible to run the application in JBoss EAP 6 without any changes. Otherwise, it could require application code changes. Server configuration has changed in JBoss EAP 6 and any server configuration settings require migration.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Minor Updates</div>
			JBoss EAP periodically provides point releases, which are minor updates that include bug fixes, security fixes, and new features. If you plan to migrate from one JBoss EAP point release to another, for example, from JBoss EAP 6.3 to JBoss EAP 6.4, see the chapter entitled <em class="citetitle">Patching JBoss EAP 6</em> in the <em class="citetitle">Installation Guide</em> for JBoss EAP 6 located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a> for instructions and potential issues.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Cumulative Patches</div>
			JBoss EAP also periodically provides cumulative patches that contain bug and security fixes. Cumulative patches increment the release by the last digit, for example from 6.4.1 to 6.4.2. Patch installation is covered in detail in the chapter entitled <em class="citetitle">Patching JBoss EAP 6</em> in the <em class="citetitle">Installation Guide</em> for JBoss EAP 6 located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23091%2C+Red+Hat+Migration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A34%0ATopic+ID%3A+44602-781559+%5BLatest%5D&amp;comment=Title%3A+About+Migrations+and+Upgrades%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44602-781559+13+Nov+2017+13%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div></body></html>