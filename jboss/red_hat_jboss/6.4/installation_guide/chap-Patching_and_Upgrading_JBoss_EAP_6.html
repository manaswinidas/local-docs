<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Patching and Upgrading JBoss EAP 6</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Patching_and_Upgrading_JBoss_EAP_6">
      ⁠</a>Chapter 3. Patching and Upgrading JBoss EAP 6</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_Patches_and_Upgrades">
      ⁠</a>3.1. About Patches and Upgrades</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Major Upgrades</div>
			A major upgrade or migration is required when an application is moved from one major release to another, for example, from JBoss EAP 5 to JBoss EAP 6. This type of migration is not addressed in this guide. For instructions on how to migrate from previous releases of JBoss EAP, see the <em class="citetitle">Migration Guide</em> for JBoss EAP 6 located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Minor Updates</div>
			JBoss EAP periodically provides point releases, which are minor updates that include bug fixes, security fixes, and new features. Minor updates are not applied via patching. If you plan to migrate from one JBoss EAP point release to another, for example, from JBoss EAP 6.3 to JBoss EAP 6.4, code changes should not be required for applications that follow the Java EE specification and do not use any private, unsupported, or tech preview modules. Before you upgrade your JBoss EAP installation, be sure to review  <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#Prepare_for_the_Upgrade">Section 3.3.1, “Prepare for the Upgrade”</a> to avoid potential upgrade issues.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Cumulative Patches</div>
			JBoss EAP also periodically provides individual or cumulative patches that contain bug and security fixes. Cumulative patches increment the minor release version by the last digit, for example from 6.4.1 to 6.4.2. These patches do not require migration and should not impact the server configuration files. The CLI patch feature can also rollback the patch and the configuration if desired. The patching process is covered in detail in the following sections of this chapter.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist see-also-list"><p class="title"><strong>See Also:</strong></p><ul class="see-also-list see-also-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#sect-Patching_JBoss_EAP_6">Section 3.2, “Patching JBoss EAP 6”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#sect-Upgrading_JBoss_EAP_6">Section 3.3, “Upgrading JBoss EAP 6”</a>
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+24385-781531+%5BLatest%5D&amp;comment=Title%3A+About+Patches+and+Upgrades%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=24385-781531+13+Nov+2017+11%3A25+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Patching_JBoss_EAP_6">
      ⁠</a>3.2. Patching JBoss EAP 6</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Patching_Mechanisms">
      ⁠</a>3.2.1. About Patching Mechanisms</h2></div></div></div><div class="para">
		JBoss patches are distributed in two forms: zip (for all products) and RPM (for a subset of products).
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			A JBoss product installation must always only be updated using one patch method: either zip or RPM patches. Only security and cumulative patches will be available via RPM, and customers using an RPM installation will not be able to update using zip patches.
		</div></div></div><div class="para">
		JBoss patches can be either an asynchronous update, or a planned update:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Asynchronous updates: Individual patches which are released outside the normal update cycle of the existing product. These may include security patches, as well as other individual patches provided by Red Hat Global Support Services (GSS) to fix specific issues.
			</div></li><li class="listitem"><div class="para">
				Planned updates: The cumulative patches of an existing product, which includes all previously developed updates for that version of the product.
			</div></li></ul></div><div class="para">
		Deciding whether a patch is released as part of a planned update or an asynchronous update depends on the severity of the issue being fixed. An issue of low impact is typically deferred, and is resolved in the next cumulative patch or minor release of the affected product. Issues of moderate or higher impact are typically addressed in order of importance as an asynchronous update to the affected product, and contain a fix for only a specific issue.
	</div><div class="para">
		Security updates for JBoss products are provided by an erratum (for both zip and RPM methods). The erratum encapsulates a list of the resolved flaws, their severity ratings, the affected products, textual description of the flaws, and a reference to the patches. Bug fix updates are not announced via an erratum.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			It is important to note that after a patch has been applied, the jars picked up at runtime are picked up from the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/.overlays/$PATCH_ID/$MODULE</code> directory. The original files are left in <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/$MODULE</code>. The patching mechanism cripples the original jar files for security reasons. This means that if you apply a patch which updates a module, the original module's jar files are altered to be unusable. If the patch is rolled back, the original files will be reverted back to a usable state. This also means that the proper rollback procedure must be used to rollback any applied patch. See <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#Rollback_the_Application_of_a_Patch_in_Zip_Form_Using_the_patch_Command">Section 3.2.2.3, “Rollback the Application of a Patch in Zip Form Using the Patch Management System”</a> for the proper rollback procedure.
		</div></div></div><div class="para">
		For more information on how Red Hat rates JBoss security flaws, refer to: <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#Severity_and_Impact_Rating_of_JBoss_Security_Patches">Section 3.2.5, “Severity and Impact Rating of JBoss Security Patches”</a>
	</div><div class="para">
		Red Hat maintains a mailing list for notifying subscribers about security related flaws. See <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#Subscribe_to_Patch_Mailing_Lists">Section 3.2.4, “Subscribe to Patch Mailing Lists”</a>
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+13441-740941+%5BLatest%5D&amp;comment=Title%3A+About+Patching+Mechanisms%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13441-740941+04+Feb+2015+03%3A18+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Patching_a_ZipInstaller_Installation">
      ⁠</a>3.2.2. Patching a Zip/Installer Installation</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="The_patch_Command">
      ⁠</a>3.2.2.1. The Patch Management System</h3></div></div></div><div class="para">
		The JBoss EAP 6 patch management system is used to apply downloaded ZIP patches to a single JBoss EAP 6 standalone server or domain host. It can be accessed either through the Management CLI by using the <code class="command">patch</code> command, or through the Management Console.
	</div><div class="para">
		The patch management system cannot be used to automatically patch JBoss EAP 6 hosts across a Managed Domain, but hosts in a Managed Domain can be patched individually. When you patch a managed domain host, all JBoss EAP servers on that host will be updated with the patch. When patching a JBoss EAP managed domain, the domain controller must be patched first.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			JBoss EAP 6 server instances which have been installed using the RPM method cannot be updated using the patch management system. See <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#Install_Patches_in_RPM_form">Section 3.2.3, “Patching an RPM Installation”</a> to update RPM-installed JBoss EAP 6 servers.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The patch management system can only be used with patches produced for versions of JBoss EAP 6.2 and later. For patches for versions of JBoss EAP prior to 6.2, you should instead refer to the relevant version's documentation available at <a href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/">https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/</a>.
		</div></div></div><div class="para">
		In addition to applying patches, the patch management system can provide basic information on the state of installed patches, and also provides a way to immediately rollback the application of a patch.
	</div><div class="para">
		When applying or rolling back a patch, the patch management system will check the modules and other miscellaneous files that it is changing for any user modifications. If a user modification is detected, and a conflict-handling switch has not been specified, the patch management system will abort the operation and warn that there is a conflict. The warning will include a list of the modules and other files that are in conflict. To complete the operation, it must be retried with a switch specifying how to resolve the conflict: either to preserve the user modifications, or to override them.
	</div><div class="para">
		The table below lists the arguments and switches for the Management CLI <code class="command">patch</code> command.
	</div><div class="table"><a id="idm140626065956976">
      ⁠</a><p class="title"><strong>Table 3.1. <code class="command">patch</code> Command Arguments and Switches</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="patch Command Arguments and Switches"><colgroup><col style="text-align: left" class="c1"/><col style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Argument or Switch </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">apply</code> </td><td style="text-align: left"> Applies a patch. </td></tr><tr><td style="text-align: left"> <code class="code">--override-all</code> </td><td style="text-align: left"> If there is a conflict, the patch operation overrides any user modifications. </td></tr><tr><td style="text-align: left"> <code class="code">--override-modules</code> </td><td style="text-align: left"> If there is a conflict as a result of any modified modules, this switch overrides those modifications with the contents of the patch operation. </td></tr><tr><td style="text-align: left"> <code class="code">--override=<em class="replaceable">path</em>(,<em class="replaceable">path</em>)</code> </td><td style="text-align: left"> For specified miscellaneous files only, this will override the conflicting modified files with the files in the patch operation. </td></tr><tr><td style="text-align: left"> <code class="code">--preserve=<em class="replaceable">path</em>(,<em class="replaceable">path</em>)</code> </td><td style="text-align: left"> For specified miscellaneous files only, this will preserve the conflicting modified files. </td></tr><tr><td style="text-align: left"> <code class="code">--host=<em class="replaceable">HOST_NAME</em></code> </td><td style="text-align: left"> Available for Managed Domain servers, this specifies the host that the patch operation will be performed on. </td></tr><tr><td style="text-align: left"> <code class="code">info</code> </td><td style="text-align: left"> <div class="para">
						Returns information on currently installed patches.
					</div>
					 <div class="para">
						You can optionally provide <code class="code">--patch-id=<em class="replaceable">PATCH_ID</em> -v</code> for detailed information for a specific patch, including layer/add-on patches.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">inspect</code> </td><td style="text-align: left"> Inspects a downloaded patch file and returns important information about the patch. </td></tr><tr><td style="text-align: left"> <code class="code">history</code> </td><td style="text-align: left"> Returns information on the patching history. </td></tr><tr><td style="text-align: left"> <code class="code">rollback</code> </td><td style="text-align: left"> Rollsback the application of a patch. </td></tr><tr><td style="text-align: left"> <code class="code">--patch-id=<em class="replaceable">PATCH_ID</em></code> </td><td style="text-align: left"> Required for rollback, the ID of the patch to rollback. </td></tr><tr><td style="text-align: left"> <code class="code">--reset-configuration=<em class="replaceable">TRUE</em>|<em class="replaceable">FALSE</em></code> </td><td style="text-align: left"> Required for rollback, this specifies whether to restore the server configuration files as part of the rollback operation. </td></tr><tr><td style="text-align: left"> <code class="code">--rollback-to</code> </td><td style="text-align: left"> If the patch to rollback is an individual (one-off) patch, using this argument specifies that the rollback operation will also rollback all other one-off patches that have been applied on top of the specified patch. </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+21440-779912+%5BLatest%5D&amp;comment=Title%3A+The+Patch+Management+System%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=21440-779912+21+Sep+2016+10%3A49+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Installing_Patches_in_Zip_Form_Using_the_patch_Command">
      ⁠</a>3.2.2.2. Installing Patches in Zip Form Using the Patch Management System</h3></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist prereqs-list"><p class="title"><strong>Prerequisites:</strong></p><ul class="prereqs-list prereqs-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Installation_Instructions.html#Installation_Prerequisites_for_JBoss_Enterprise_Application_Platform_6">Section 2.2, “JBoss EAP 6 Installation Prerequisites”</a>
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Patches that are in the zip format can be installed using the JBoss EAP 6 patch management system via either the Management CLI or the Management Console.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			The patch management system is a feature that was added in JBoss EAP 6.2. For versions of JBoss EAP prior to 6.2, the process to install patches in zip form is different, and you should instead refer to the relevant version's documentation available at <a href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/">https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/</a>.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Valid access and subscription to the Red Hat Customer Portal.
			</div></li><li class="listitem"><div class="para">
				A current subscription to a JBoss product installed in zip format.
			</div></li><li class="listitem"><div class="para">
				Access to either the Management CLI or the Management Console for the JBoss EAP 6 server to be updated. Refer to either the <a href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#Log_in_to_the_Management_Console">Log in to the Management Console</a> or <a href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#Launch_the_Management_CLI1">Launch the Management CLI</a> chapters of the <em class="citetitle">Administration and Configuration Guide</em> for instructions on accessing these interfaces.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Before installing a patch, you should backup your JBoss product along with all customized configuration files.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626063020976">
      ⁠</a><p class="title"><strong>Procedure 3.1. Apply a zip patch to a JBoss EAP 6 server instance using the Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Download the patch zip file from the Customer Portal at <a href="https://access.redhat.com/downloads/">https://access.redhat.com/downloads/</a>
			</div></li><li class="step"><div class="para">
				From the Management CLI, apply the patch with the following command including the appropriate path to the patch file:
			</div><pre class="screen"><code class="command">patch apply <em class="replaceable">/path/to/downloaded-patch.zip</em></code></pre><div class="para">
				The <code class="command">patch</code> tool will warn if there are any conflicts in attempting the apply the patch. Refer to <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#The_patch_Command">Section 3.2.2.1, “The Patch Management System”</a> for available <code class="command">patch</code> command switches to re-run the command to resolve any conflicts.
			</div></li><li class="step"><div class="para">
				Restart the JBoss EAP 6 server for the patch to take effect:
			</div><pre class="screen"><code class="command">shutdown --restart=true</code></pre></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626088373968">
      ⁠</a><p class="title"><strong>Procedure 3.2. Apply a zip patch to a JBoss EAP 6 server instance using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Download the patch zip file from the Customer Portal at <a href="https://access.redhat.com/downloads/">https://access.redhat.com/downloads/</a>
			</div></li><li class="step"><div class="para">
				Navigate to the Patch Management View:
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For a standalone server, in the Management Console, click on the <span class="guilabel"><strong>Administration</strong></span> tab at the top of the screen, then click <span class="guilabel"><strong>Patch Management</strong></span>.
					</div><div class="figure"><a id="idm140626069122928">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/7236.png" alt="Description"/></div></div><p class="title"><strong>Figure 3.1. The Patch Management view for a standalone server</strong></p></div></li>
				 <li class="step"><div class="para">
						For a managed domain, in the Management Console, click on the <span class="guilabel"><strong>Administration</strong></span> tab at the top of the screen, then click <span class="guilabel"><strong>Patch Management</strong></span>. Select the host you want to patch from the <span class="guilabel"><strong>Host</strong></span> table, then click <span class="guilabel"><strong>View</strong></span>.
					</div><div class="figure"><a id="idm140626068506672">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/7238.png" alt="Description"/></div></div><p class="title"><strong>Figure 3.2. The Patch Management view for a managed domain</strong></p></div></li>

			</ul></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Apply a New Patch</strong></span>.
			</div><ol class="substeps a"><li class="step"><div class="para">
						If you are patching a managed domain host, on the next screen select whether to shutdown the servers on the host, and click <span class="guibutton"><strong>Next</strong></span>.
					</div></li></ol></li><li class="step"><div class="para">
				Click the <span class="guibutton"><strong>Browse</strong></span> button, select the downloaded patch you want to apply, and then click <span class="guibutton"><strong>Next</strong></span>. 
				<div class="figure"><a id="idm140626026196464">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/7237.png" alt="Description"/></div></div><p class="title"><strong>Figure 3.3. Apply Patch dialog</strong></p></div>

			</div><ol class="substeps a"><li class="step"><div class="para">
						If there are any conflicts in attempting to apply the patch, a warning will be displayed. Click <span class="guilabel"><strong>View error details</strong></span> to see the detail of the conflicts. If there is a conflict, you can either cancel the operation, or select the <span class="guilabel"><strong>Override all conflicts</strong></span> check box and click <span class="guibutton"><strong>Next</strong></span>. Overriding conflicts will result in the content of the patch overriding any user modifications.
					</div></li></ol></li><li class="step"><div class="para">
				After the patch has been successfully applied, select whether to restart the JBoss EAP 6 server now for the patch to take effect, and click <span class="guibutton"><strong>Finish</strong></span>.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JBoss EAP 6 server instance is patched with the latest update.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+21405-767014+%5BLatest%5D&amp;comment=Title%3A+Installing+Patches+in+Zip+Form+Using+the+Patch+Management+System%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=21405-767014+07+Aug+2015+02%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Rollback_the_Application_of_a_Patch_in_Zip_Form_Using_the_patch_Command">
      ⁠</a>3.2.2.3. Rollback the Application of a Patch in Zip Form Using the Patch Management System</h3></div></div></div><div class="para">

	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The JBoss EAP 6 patch management system can be used to rollback the application of a previously applied zip patch, via either the Management CLI or the Management Console.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Rolling back the application of a patch using the patch management system is not intended as a general uninstall functionality. It is only intended to be used immediately after the application of a patch which had undesirable consequences.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			The patch management system is a feature that was added in <span class="application"><strong>JBoss EAP 6.2</strong></span>. For versions of JBoss EAP prior to 6.2, the process to rollback patches in zip form is different, and you should instead refer to the relevant version's documentation available at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				A patch that was previously applied using the JBoss EAP 6 patch management system.
			</div></li><li class="listitem"><div class="para">
				Access to the Management CLI or the Management Console for the JBoss EAP 6 server. See <em class="citetitle">Launch the Management CLI</em> or <em class="citetitle">Log in to the Management Console</em> in the <em class="citetitle">Administration and Configuration Guide</em> located on the Customer Portal at <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/?version=6.4</a>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			When following either procedure, use caution when specifying the value of the <code class="literal">Reset Configuration</code> option:
		</div><div class="para">
			If set to <code class="literal">TRUE</code>, the patch rollback process will also rollback the JBoss EAP 6 server configuration files to their pre-patch state. Any changes that were made to the JBoss EAP 6 server configuration files after the patch was applied will be lost.
		</div><div class="para">
			If set to <code class="literal">FALSE</code>, the server configuration files will not be rolled back. In this situation, it is possible that the server will not start after the rollback, as the patch may have altered configurations, such as namespaces, which may no longer be valid and have to be fixed manually.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626090605680">
      ⁠</a><p class="title"><strong>Procedure 3.3. Rollback a patch from a JBoss EAP 6 server instance using the Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				From the Management CLI, use the <code class="command">patch info</code> command to find the ID of the patch that is to be rolled back.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For cumulative patches, the patch ID is the value of the first <code class="varname">cumulative-patch-id</code> shown in the <code class="command">patch info</code> output.
					</div></li>
				 <li class="step"><div class="para">
						Individual security or bug fix patch IDs are listed as the value of the first <code class="varname">patches</code> shown in the <code class="command">patch info</code> output, with the most recently applied individual patch listed first.
					</div></li>

			</ul></li><li class="step"><div class="para">
				From the Management CLI, rollback the patch with the appropriate patch ID from the previous step.
			</div><pre class="screen"><code class="command">patch rollback --patch-id=<em class="replaceable">PATCH_ID</em> --reset-configuration=<em class="replaceable">TRUE</em></code></pre><div class="para">
				The <code class="command">patch</code> tool will warn if there are any conflicts in attempting the rollback the patch. Refer to <a class="xref" href="chap-Patching_and_Upgrading_JBoss_EAP_6.html#The_patch_Command">Section 3.2.2.1, “The Patch Management System”</a> for available <code class="command">patch</code> command switches to re-run the command to resolve any conflicts.
			</div></li><li class="step"><div class="para">
				Restart the JBoss EAP 6 server for the patch rollback to take effect:
			</div><pre class="screen"><code class="command">shutdown --restart=true</code></pre></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626088300016">
      ⁠</a><p class="title"><strong>Procedure 3.4. Rollback a patch from a JBoss EAP 6 server instance using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				In the Management Console:
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For a standalone server: click on the <span class="guilabel"><strong>Administration</strong></span> tab at the top of the screen, then click <span class="guilabel"><strong>Patch Management</strong></span>.
					</div></li>
				 <li class="step"><div class="para">
						For a managed domain: click on the <span class="guilabel"><strong>Administration</strong></span> tab at the top of the screen, then click <span class="guilabel"><strong>Patch Management</strong></span>. From the <code class="literal">Patch Management</code> table, select the relevant host, then click <span class="guilabel"><strong>View</strong></span>.
					</div></li>

			</ul></li><li class="step"><div class="para">
				In the <span class="guilabel"><strong>Recent Patch History</strong></span> table, select the patch that you want to rollback, then click <span class="guibutton"><strong>Rollback</strong></span>. 
				<div class="figure"><a id="idm140626090402320">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/7252.png" alt="Description"/></div></div><p class="title"><strong>Figure 3.4. Recent Patch History table for Patch Management</strong></p></div>

			</div><ol class="substeps a"><li class="step"><div class="para">
						For a managed domain host, on the next screen select whether to shutdown the servers on the host, and click <span class="guibutton"><strong>Next</strong></span>.
					</div></li></ol></li><li class="step"><div class="para">
				Choose your options for the rollback process, then click <span class="guibutton"><strong>Next</strong></span>.
			</div><div class="figure"><a id="idm140626086865216">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/7251.png" alt="Choose Options dialogue"/></div></div><p class="title"><strong>Figure 3.5. Choose Options dialogue</strong></p></div></li><li class="step"><div class="para">
				Confirm the options and the patch to be rolled back, then click <span class="guibutton"><strong>Next</strong></span>.
			</div><ol class="substeps a"><li class="step"><div class="para">
						If the <span class="guilabel"><strong>Override all</strong></span> option was not selected and there are any conflicts in attempting to rollback the patch, a warning will be displayed. Click <span class="guilabel"><strong>View error details</strong></span> to see the detail of the conflicts. If there is a conflict, you can either cancel the operation, or click <span class="guibutton"><strong>Choose Options</strong></span> and try the operation again with the <span class="guilabel"><strong>Override all</strong></span> check box selected. Overriding conflicts will result in the rollback operation overriding any user modifications.
					</div></li></ol></li><li class="step"><div class="para">
				After the patch has been successfully rolled back, select whether to restart the JBoss EAP 6 server now for the changes to take effect, and click <span class="guibutton"><strong>Finish</strong></span>.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The patch, and optionally also the server configuration files, are rolled back on the JBoss EAP 6 server instance.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+21470-781533+%5BLatest%5D&amp;comment=Title%3A+Rollback+the+Application+of+a+Patch+in+Zip+Form+Using+the+Patch+Management+System%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=21470-781533+13+Nov+2017+11%3A51+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Clearing_Patch_History">
      ⁠</a>3.2.2.4. Clearing Patch History</h3></div></div></div><div class="para">
		When patches are applied to a JBoss EAP 6 server, the content and history of the patches are preserved for use in rollback operations. If multiple cumulative patches are applied, the patch history may use a significant amount of disk space.
	</div><div class="para">
		You can use the Management CLI command below to remove all older patches that are not currently in use. When using this command, only the latest cumulative patch is preserved along with the GA release. This is only useful for freeing space if multiple cumulative patches have previously been applied.
	</div><pre class="screen"><code class="command">/core-service=patching:ageout-history</code></pre><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			If you clear the patch history, you will not be able to rollback a previously applied patch.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+42088-723634+%5BLatest%5D&amp;comment=Title%3A+Clearing+Patch+History%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42088-723634+03+Nov+2014+22%3A25+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Install_Patches_in_RPM_form">
      ⁠</a>3.2.3. Patching an RPM Installation</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist prereqs-list"><p class="title"><strong>Prerequisites:</strong></p><ul class="prereqs-list prereqs-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Installation_Instructions.html#Installation_Prerequisites_for_JBoss_Enterprise_Application_Platform_6">Section 2.2, “JBoss EAP 6 Installation Prerequisites”</a>
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			JBoss patches are distributed in two forms: ZIP (for all products) and RPM (for a subset of products). This task describes the steps you need to take to install the patches via the RPM format.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				A valid subscription to the Red Hat Network.
			</div></li><li class="listitem"><div class="para">
				A current subscription to a JBoss product installed via an RPM package.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626072833568">
      ⁠</a><p class="title"><strong>Procedure 3.5. Apply a patch to a JBoss product via the RPM method</strong></p><div class="para">
			Security updates for JBoss products are provided by errata (for both zip and RPM methods). The errata encapsulates a list of the resolved flaws, their severity ratings, the affected products, textual description of the flaws, and a reference to the patches.
		</div><div class="para">
			For RPM distributions of JBoss products, the errata include references to the updated RPM packages. The patch can be installed by using <code class="code">yum</code>.
		</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Only zip installations allow for patching using the Management Console or Management CLI <code class="code">patch</code> command.
			</div></div></div><div class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
				Before installing a patch, you must backup your JBoss product along with all customized configuration files.
			</div></div></div><ol class="1"><li class="step"><div class="para">
				Get notified about the security patch either via being a subscriber to the JBoss watch mailing list or by browsing the JBoss watch mailing list archives.
			</div></li><li class="step"><div class="para">
				Read the errata for the security patch and confirm that it applies to a JBoss product in your environment.
			</div></li><li class="step"><div class="para">
				If the security patch applies to a JBoss product in your environment, then follow the link to download the updated RPM package which is included in the errata.
			</div></li><li class="step"><div class="para">
				Use 
<pre class="screen"><code class="command">yum update</code></pre>
				 to install the patch.
			</div><div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
					When updating an RPM installation, your JBoss product is updated cumulatively with all RPM-released fixes.
				</div></div></div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JBoss product is patched with the latest update using the RPM format.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+13444-764008+%5BLatest%5D&amp;comment=Title%3A+Patching+an+RPM+Installation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13444-764008+06+Jul+2015+14%3A40+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Subscribe_to_Patch_Mailing_Lists">
      ⁠</a>3.2.4. Subscribe to Patch Mailing Lists</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The JBoss team at Red Hat maintains a mailing list for security announcements for Red Hat JBoss Middleware products. This section covers what you need to do to subscribe to this list.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				None
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626077377776">
      ⁠</a><p class="title"><strong>Procedure 3.6. Subscribe to the JBoss Watch List</strong></p><ol class="1"><li class="step"><div class="para">
				Click the following link to go to the JBoss Watch mailing list page: <a href="http://www.redhat.com/mailman/listinfo/jboss-watch-list">JBoss Watch Mailing List</a>.
			</div></li><li class="step"><div class="para">
				Enter your email address in the <span class="guilabel"><strong>Subscribing to Jboss-watch-list</strong></span> section.
			</div></li><li class="step"><div class="para">
				[<span class="optional">You can enter your name and select a password for yourself. Doing so is optional but recommended.</span>]
			</div></li><li class="step"><div class="para">
				Press the <span class="guibutton"><strong>Subscribe</strong></span> button to start the subscription process.
			</div></li><li class="step"><div class="para">
				You can browse the archives of the mailing list by going to: <a href="https://www.redhat.com/archives/jboss-watch-list/">JBoss Watch Mailing List Archives</a>.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			After confirmation of your email address, you will be subscribed to receive security related announcements from the JBoss patch mailing list.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+13442-759339+%5BLatest%5D&amp;comment=Title%3A+Subscribe+to+Patch+Mailing+Lists%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13442-759339+26+May+2015+02%3A57+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Severity_and_Impact_Rating_of_JBoss_Security_Patches">
      ⁠</a>3.2.5. Severity and Impact Rating of JBoss Security Patches</h2></div></div></div><div class="para">
		To communicate the risk of each JBoss security flaw, Red Hat uses a four-point severity scale of low, moderate, important and critical, in addition to Common Vulnerability Scoring System (CVSS) version 2 base scores which can be used to identify the impact of the flaw.
	</div><div class="table"><a id="idm140626080694592">
      ⁠</a><p class="title"><strong>Table 3.2. Severity Ratings of JBoss Security Patches</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Severity Ratings of JBoss Security Patches"><colgroup><col/><col/></colgroup><thead><tr><th> Severity </th><th> Description </th></tr></thead><tbody><tr><td> Critical </td><td> <div class="para">
						This rating is given to flaws that could be easily exploited by a remote unauthenticated attacker and lead to system compromise (arbitrary code execution) without requiring user interaction. These are the types of vulnerabilities that can be exploited by worms. Flaws that require an authenticated remote user, a local user, or an unlikely configuration are not classed as critical impact.
					</div>
					 </td></tr><tr><td> Important </td><td> <div class="para">
						This rating is given to flaws that can easily compromise the confidentiality, integrity, or availability of resources. These are the types of vulnerabilities that allow local users to gain privileges, allow unauthenticated remote users to view resources that should otherwise be protected by authentication, allow authenticated remote users to execute arbitrary code, or allow local or remote users to cause a denial of service.
					</div>
					 </td></tr><tr><td> Moderate </td><td> <div class="para">
						This rating is given to flaws that may be more difficult to exploit but could still lead to some compromise of the confidentiality, integrity, or availability of resources, under certain circumstances. These are the types of vulnerabilities that could have had a critical impact or important impact but are less easily exploited based on a technical evaluation of the flaw, or affect unlikely configurations.
					</div>
					 </td></tr><tr><td> Low </td><td> <div class="para">
						This rating is given to all other issues that have a security impact. These are the types of vulnerabilities that are believed to require unlikely circumstances to be able to be exploited, or where a successful exploit would give minimal consequences.
					</div>
					 </td></tr></tbody></table></div></div><div class="para">
		The impact component of a CVSS v2 score is based on a combined assessment of three potential impacts: Confidentiality (C), Integrity (I) and Availability (A). Each of these can be rated as None (N), Partial (P) or Complete (C).
	</div><div class="para">
		Because the JBoss server process runs as an unprivileged user and is isolated from the host operating system, JBoss security flaws are only rated as having impacts of either None (N) or Partial (P).
	</div><div class="example"><a id="idm140626065371680">
      ⁠</a><p class="title"><strong>Example 3.1. CVSS v2 Impact Score</strong></p><div class="example-contents"><div class="para">
			The example below shows a CVSS v2 impact score, where exploiting the flaw would have no impact on system confidentiality, partial impact on system integrity and complete impact on system availability (that is, the system would become completely unavailable for any use, for example, via a kernel crash).
		</div><pre class="screen"><code class="command">C:N/I:P/A:C</code></pre></div></div><div class="para">
		Combined with the severity rating and the CVSS score, organizations can make informed decisions on the risk each issue places on their unique environment and schedule upgrades accordingly.
	</div><div class="para">
		For more information about CVSS2, please see: <a href="https://access.redhat.com/security/updates/classification/">CVSS2 Guide</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+13447-592075+%5BLatest%5D&amp;comment=Title%3A+Severity+and+Impact+Rating+of+JBoss+Security+Patches%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13447-592075+23+Feb+2014+16%3A57+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Manage_Security_Updates_for_Dependencies_Bundled_Inside_the_Applications_Deployed_on_JBoss_EAP">
      ⁠</a>3.2.6. Manage Security Updates for Dependencies Bundled Inside the Applications Deployed on JBoss EAP</h2></div></div></div><div class="para">
		Red Hat provides security patches for all components that are part of the JBoss EAP distribution. However, many users of JBoss EAP deploy applications which bundle their own dependencies, rather than exclusively using components provided as part of the JBoss EAP distribution. For example, a deployed WAR file may include dependency JARs in the WEB-INF/lib/ directory. These JARs are out of scope for security patches provided by Red Hat. Managing security updates for dependencies bundled inside the applications deployed on JBoss EAP is the responsibility of the applications' maintainers. The following tools and data sources may assist in this effort, and are provided without any support or warranty.
	</div><div class="variablelist"><p class="title"><strong>Tools and Data Sources</strong></p><dl class="variablelist"><dt><span class="term">JBoss patch mailing lists</span></dt><dd><div class="para">
					Subscribing to the JBoss patch mailing lists will keep you informed regarding security flaws that have been fixed in JBoss products, allowing you to check whether your deployed applications are bundling vulnerable versions of the affected components.
				</div></dd><dt><span class="term">Security advisory page for bundled components.</span></dt><dd><div class="para">
					Many open source components have their own security advisory page. For example, Struts 2 is a commonly-used component with many known security issues that is not provided as part of the JBoss EAP distribution. The Struts 2 project maintains an upstream security advisory page, which should be monitored if your deployed applications bundle Struts 2. Many commercially-provided components also maintain security advisory pages.
				</div></dd><dt><span class="term">Regularly scan your deployed applications for known vulnerabilities</span></dt><dd><div class="para">
					There are several commercial tools available to do this. There is also an open source tool called Victims, which is developed by Red Hat employees, but comes with no support or warranty. Victims provides plugins for several build and integration tools, which automatically scan applications for bundling known-vulnerable dependencies. Plugins are available for Maven, Ant and Jenkins. For more information about the Victims tool, see <a href="https://victi.ms/about.html">https://victi.ms/about.html</a>.
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+24114-685974+%5BLatest%5D&amp;comment=Title%3A+Manage+Security+Updates+for+Dependencies+Bundled+Inside+the+Applications+Deployed+on+JBoss+EAP%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=24114-685974+18+Jul+2014+05%3A26+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Upgrading_JBoss_EAP_6">
      ⁠</a>3.3. Upgrading JBoss EAP 6</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Prepare_for_the_Upgrade">
      ⁠</a>3.3.1. Prepare for the Upgrade</h2></div></div></div><div class="para">
		Before you upgrade JBoss EAP using the ZIP or RPM installation, you need to be aware of the following potential issues. 
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					This update may remove temporary folders. Any standalone or domain managed deployments stored in the <code class="filename">data/content/</code> directory must be backed up prior to the update and restored after it completes, otherwise the server will fail to start due to the missing content.
				</div></li><li class="listitem"><div class="para">
					Prior to applying the update, handle any open transactions. Then delete the <code class="filename">data/tx-object-store/</code> transaction directory.
				</div></li><li class="listitem"><div class="para">
					If you backup and restore your configuration files when updating to newer point releases, you could overwrite new configurations and prevent new features from being enabled automatically. The suggested approach is to compare the old configuration to the new configuration and only reapply specific configurations you need to keep. This can be done manually or by creating a CLI script that can apply the changes consistently to multiple server configuration files.
				</div></li><li class="listitem"><div class="para">
					You can copy an existing configuration for an update, but the server restart updates the file and it may no longer be compatible with the previous version of the server.
				</div></li><li class="listitem"><div class="para">
					The persistent timer <code class="filename">data/timer-service-data</code> data must be checked to determine whether it is compatible. Before the update, review the <code class="filename">deployment-<em class="replaceable">BEAN_NAME</em></code> files in that folder to determine which timers are still in use.
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+44699-767243+%5BLatest%5D&amp;comment=Title%3A+Prepare+for+the+Upgrade%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44699-767243+11+Aug+2015+10%3A08+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Upgrade_the_JBoss_Enterprise_Application_Platform_6_ZIP_Installation">
      ⁠</a>3.3.2. Upgrade the JBoss EAP 6 ZIP Installation</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Ensure that the base operating system is up to date.
			</div></li><li class="listitem"><div class="para">
				Determine which files have been modified since JBoss EAP 6 was installed.
			</div></li><li class="listitem"><div class="para">
				Back up any modified configuration files, deployments, and all user data.
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Installation_Instructions.html#Download_JBoss_Enterprise_Application_Platform_6_Zip_Installation">Section 2.3.1, “Download JBoss EAP 6 (Zip Installation)”</a>.
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This procedure covers upgrading a JBoss EAP 6 ZIP installation between minor versions (for example, from JBoss EAP 6.1 to 6.2). For installing patches for a specific minor version, refer to the <em class="citetitle">Patch Installation</em> section. Upgrading to the latest release of JBoss EAP 6 requires some initial work to back up the existing installation.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			For managed domains, the master Host Controller (or Domain Controller) instance should be upgraded first, before each Host Controller is upgraded.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626024243968">
      ⁠</a><p class="title"><strong>Procedure 3.7. Upgrade to the latest JBoss EAP 6 version</strong></p><ol class="1"><li class="step"><div class="para">
				Move the downloaded ZIP archive to the desired location. It is recommended that this is a different location to the existing JBoss EAP 6 installation.
			</div><div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
					If you wish to install the latest version of JBoss EAP 6 to the same directory location as the existing installation, you will need to move the existing installation to a different location before proceeding. This is to prevent modified configuration files, deployments, and upgrades from being lost.
				</div></div></div></li><li class="step"><div class="para">
				Unzip the archive. This step installs a clean instance of the latest JBoss EAP 6 release.
			</div></li><li class="step"><div class="para">
				Copy the <em class="replaceable">EAP_HOME</em>/domain/ and <em class="replaceable">EAP_HOME</em>/standalone/ directories from the previous installation over the new installation directories.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					New features in the new release, such as new subsystems, may not be activated if configuration files are copied from an older JBoss EAP 6 installation. To use these new features, it is necessary to compare and update the old configuration files with the ones from the new version.
				</div></div></div></li><li class="step"><div class="para">
				Review the changes made to the <code class="filename">bin</code> directory of the previous installation, and make the equivalent modifications to the new directory.
			</div><div class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
					Files in the <code class="filename">bin</code> directory should not be overwritten by the files from previous versions. Changes should be made manually.
				</div></div></div></li><li class="step optional"><div class="para">
				Review the remaining modified files from the previous installation, and move these changes into the new installation. These files may include:
			</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						The <code class="filename">welcome-content</code> directory.
					</div></li><li class="listitem"><div class="para">
						Custom modules in the <code class="filename">modules</code> directory.
					</div></li><li class="listitem"><div class="para">
						Custom bundles in the <code class="filename">bundles</code> directory.
					</div></li></ul></div></li><li class="step"><div class="para">
				<span class="bold bold"><strong>Optional:</strong></span> If JBoss EAP 6 was previously configured to run as a service, remove the existing service and configure a new service for the upgraded installation.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JBoss EAP 6 ZIP installation has been successfully upgraded to the latest release.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+12710-620179+%5BLatest%5D&amp;comment=Title%3A+Upgrade+the+JBoss+EAP+6+ZIP+Installation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=12710-620179+11+Mar+2014+21%3A33+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Upgrade_the_JBoss_Enterprise_Application_Platform_6_RPM_Installation">
      ⁠</a>3.3.3. Upgrade the JBoss EAP 6 RPM Installation</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Ensure that the base operating system is up to date and that the system is subscribed and enabled to get updates for the Base OS channel.
			</div></li><li class="listitem"><div class="para">
				Ensure that the correct JBoss EAP 6 RHN channel is enabled. For example, on a x86, 64 bit architecture, this will be the JBoss Application Platform (v 6) for 6Server x86_64 channel (<code class="literal">jbappplatform-6-x86_64-server-6-rpm</code>).
			</div></li><li class="listitem"><div class="para">
				Back up any modified configuration files, deployments, and all user data.
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Upgrading to the latest release of JBoss EAP 6 requires some initial work to back up the existing installation. This topic covers upgrading the RPM installation via the Red Hat Network (RHN).
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			For managed domains, the master Host Controller (or Domain Controller) instance should be upgraded first, before each Host Controller is upgraded.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626087208416">
      ⁠</a><p class="title"><strong>Procedure 3.8. Upgrade to the latest JBoss EAP 6 release</strong></p><ol class="1"><li class="step"><div class="para">
				Run the following command in a terminal to upgrade the installation:
			</div><pre class="screen"><code class="command">yum update</code></pre></li><li class="step"><div class="para">
				Manually merge each created <code class="filename">*.rpmnew</code> file that contains changes into the production configuration files.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			JBoss EAP 6 has been successfully upgraded.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+12709-764193+%5BLatest%5D&amp;comment=Title%3A+Upgrade+the+JBoss+EAP+6+RPM+Installation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=12709-764193+07+Jul+2015+19%3A16+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Upgrade_JBoss_Enterprise_Application_Server_Cluster_from_6.0_to_6.1">
      ⁠</a>3.3.4. Upgrade JBoss EAP Cluster</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				None
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			JBoss EAP 6 does not support the creation of clusters where the different nodes are made up of different versions of JBoss EAP servers. Thus, a mixed cluster based on different versions is not supported and all nodes within a cluster must be the same version.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			The upgrade process for migrating traffic from a 6.3 cluster to a 6.4 cluster is therefore based on transferring all traffic to the 6.4 cluster and then shutting down the servers or nodes in the 6.3 cluster.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140626091631024">
      ⁠</a><p class="title"><strong>Procedure 3.9. Setup a JBoss EAP Cluster</strong></p><ol class="1"><li class="step"><div class="para">
				Refer to the <em class="citetitle">HTTP Clustering and Load Balancing</em> chapter of the <em class="citetitle">JBoss EAP 6.4 Administration and Configuration Guide</em> for instructions on how to setup a JBoss EAP cluster in 6.4.
			</div></li><li class="step"><div class="para">
				Migrate all traffic to this new cluster using the steps outlined in the <em class="citetitle">Migrate Traffic between Clusters</em> chapter of the <em class="citetitle">JBoss EAP 6.4 Administration and Configuration Guide</em>
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Your JBoss EAP 6.3 cluster has been migrated to a cluster based on JBoss EAP 6.4.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23090%2C+Red+Hat+Installation+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A24%0ATopic+ID%3A+13892-737220+%5BLatest%5D&amp;comment=Title%3A+Upgrade+JBoss+EAP+Cluster%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13892-737220+20+Jan+2015+05%3A14+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0&amp;keywords=Documentation">Report a bug</a>
	</div></div></div></div></body></html>