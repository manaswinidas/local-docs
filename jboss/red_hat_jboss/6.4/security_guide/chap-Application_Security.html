<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 9. Application Security</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Application_Security">
      ⁠</a>Chapter 9. Application Security</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Datasource_Security">
      ⁠</a>9.1. Datasource Security</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Datasource_Security">
      ⁠</a>9.1.1. About Datasource Security</h2></div></div></div><div class="para">
		Datasource security refers to encrypting or obscuring passwords for datasource connections. These passwords can be stored in plain text in configuration files, however this represents a security risk.
	</div><div class="para">
		The preferred solution for datasource security is the use of either security domains or password vaults. Examples of each are included below. For more information, refer to the <em class="citetitle">Security Architecture</em> and other JBoss EAP security documentation.
	</div><div class="example"><a id="idm139772528020992">
      ⁠</a><p class="title"><strong>Example 9.1. Security Domain Example</strong></p><div class="example-contents"><pre class="programlisting"> &lt;security-domain name="DsRealm" cache-type="default"&gt;  
  &lt;authentication&gt;  
    &lt;login-module code="ConfiguredIdentity" flag="required"&gt;  
      &lt;module-option name="userName" value="sa"/&gt;  
      &lt;module-option name="principal" value="sa"/&gt;  
      &lt;module-option name="password" value="sa"/&gt;  
    &lt;/login-module&gt;  
  &lt;/authentication&gt;  
&lt;/security-domain&gt;
</pre><div class="para">
			The DsRealm domain is referenced by a datasource like so:
		</div><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/datasources/securityDs"
    pool-name="securityDs"&gt;
    &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
      &lt;driver&gt;h2&lt;/driver&gt;
      &lt;new-connection-sql&gt;select current_user()&lt;/new-connection-sql&gt;
      &lt;security&gt;
        &lt;security-domain&gt;DsRealm&lt;/security-domain&gt;
      &lt;/security&gt;
    &lt;/datasource&gt;
&lt;/datasources&gt;
</pre></div></div><div class="example"><a id="idm139772555186336">
      ⁠</a><p class="title"><strong>Example 9.2. Password Vault Example</strong></p><div class="example-contents"><pre class="programlisting">
&lt;security&gt;
  &lt;user-name&gt;admin&lt;/user-name&gt;
  &lt;password&gt;${VAULT::ds_ExampleDS::password::N2NhZDYzOTMtNWE0OS00ZGQ0LWE4MmEtMWNlMDMyNDdmNmI2TElORV9CUkVBS3ZhdWx0}&lt;/password&gt;
&lt;/security&gt;

</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+9096-749074+%5BLatest%5D&amp;comment=Title%3A+About+Datasource+Security%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9096-749074+29+Mar+2015+23%3A20+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-EJB_Application_Security">
      ⁠</a>9.2. EJB Application Security</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Security_Identity">
      ⁠</a>9.2.1. Security Identity</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_EJB_Security_Identity">
      ⁠</a>9.2.1.1. About EJB Security Identity</h3></div></div></div><div class="para">
		An EJB can specify an identity to use when invoking methods on other components. This is the EJB's <em class="firstterm">security identity</em> (also known as <em class="firstterm">invocation identity</em>).
	</div><div class="para">
		By default, the EJB uses its own caller identity. The identity can alternatively be set to a specific security role. Using specific security roles is useful when you want to construct a segmented security model - for example, restricting access to a set of components to internal EJBs only.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4713-685873+%5BLatest%5D&amp;comment=Title%3A+About+EJB+Security+Identity%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4713-685873+17+Jul+2014+20%3A05+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Set_the_Security_Identity_of_an_EJB">
      ⁠</a>9.2.1.2. Set the Security Identity of an EJB</h3></div></div></div><div class="para">
		The security identity of the EJB is specified through the <code class="sgmltag-element">&lt;security-identity&gt;</code> tag in the security configuration.
	</div><div class="para">
		By default - if no <code class="sgmltag-element">&lt;security-identity&gt;</code> tag is present - the EJB's own caller identity is used.
	</div><div class="example"><a id="idm139772489613264">
      ⁠</a><p class="title"><strong>Example 9.3. Set the security identity of an EJB to be the same as its caller</strong></p><div class="example-contents"><div class="para">
			This example sets the security identity for method invocations made by an EJB to be the same as the current caller's identity. This behavior is the default if you do not specify a <code class="sgmltag-element">&lt;security-identity&gt;</code> element declaration.
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ejb-jar&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span>	 <span xmlns="" class="perl_Keyword">&lt;session&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>ASessionBean<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Comment">&lt;!-- ... --&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;security-identity&gt;</span>
<span xmlns="" class="line">​</span>		  <span xmlns="" class="perl_Keyword">&lt;use-caller-identity/&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;/security-identity&gt;</span>
<span xmlns="" class="line">​</span>	 <span xmlns="" class="perl_Keyword">&lt;/session&gt;</span>
<span xmlns="" class="line">​</span>	 <span xmlns="" class="perl_Comment">&lt;!-- ... --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/ejb-jar&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="idm139772526545120">
      ⁠</a><p class="title"><strong>Example 9.4. Set the security identity of an EJB to a specific role</strong></p><div class="example-contents"><div class="para">
			To set the security identity to a specific role, use the <code class="sgmltag-element">&lt;run-as&gt;</code> and <code class="sgmltag-element">&lt;role-name&gt;</code> tags inside the <code class="sgmltag-element">&lt;security-identity&gt;</code> tag.
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ejb-jar&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span>	 <span xmlns="" class="perl_Keyword">&lt;session&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>RunAsBean<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Comment">&lt;!-- ... --&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;security-identity&gt;</span>
<span xmlns="" class="line">​</span>		  <span xmlns="" class="perl_Keyword">&lt;run-as&gt;</span>
<span xmlns="" class="line">​</span>			 <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>A private internal role<span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>			 <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>InternalRole<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>		  <span xmlns="" class="perl_Keyword">&lt;/run-as&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;/security-identity&gt;</span>
<span xmlns="" class="line">​</span>	 <span xmlns="" class="perl_Keyword">&lt;/session&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- ... --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/ejb-jar&gt;</span>
<span xmlns="" class="line">​</span>
</pre><div class="para">
			By default, when you use <code class="sgmltag-element">&lt;run-as&gt;</code>, a principal named <code class="literal">anonymous</code> is assigned to outgoing calls. To assign a different principal, uses the <code class="sgmltag-element">&lt;run-as-principal&gt;</code>.
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;session&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>RunAsBean<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security-identity&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;run-as-principal&gt;</span>internal<span xmlns="" class="perl_Keyword">&lt;/run-as-principal&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/security-identity&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/session&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Specifying security identity in servlets</strong></p></div><div class="admonition"><div class="para">
			You can also use the <code class="sgmltag-element">&lt;run-as&gt;</code> and <code class="sgmltag-element">&lt;run-as-principal&gt;</code> elements inside a servlet element.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>See also:</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Security.html#About_EJB_Security_Identity">Section 9.2.1.1, “About EJB Security Identity”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="appe-Reference.html#EJB_Security_Parameter_Reference">Section A.6, “EJB Security Parameter Reference”</a>
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+5052-685874+%5BLatest%5D&amp;comment=Title%3A+Set+the+Security+Identity+of+an+EJB%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5052-685874+17+Jul+2014+20%3A05+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-EJB_Method_Permissions">
      ⁠</a>9.2.2. EJB Method Permissions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_EJB_Method_Permissions">
      ⁠</a>9.2.2.1. About EJB Method Permissions</h3></div></div></div><div class="para">
		EJBs can restrict access to their methods to specific security roles.
	</div><div class="para">
		The EJB <code class="sgmltag-element">&lt;method-permission&gt;</code> element declaration specifies the roles that can invoke the EJB's interface methods. You can specify permissions for the following combinations:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				All home and component interface methods of the named EJB
			</div></li><li class="listitem"><div class="para">
				A specified method of the home or component interface of the named EJB
			</div></li><li class="listitem"><div class="para">
				A specified method within a set of methods with an overloaded name
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4767-685876+%5BLatest%5D&amp;comment=Title%3A+About+EJB+Method+Permissions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4767-685876+17+Jul+2014+20%3A06+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_EJB_Method_Permissions">
      ⁠</a>9.2.2.2. Use EJB Method Permissions</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			The <code class="sgmltag-element">&lt;method-permission&gt;</code> element defines the logical roles that are allowed to access the EJB methods defined by <code class="sgmltag-element">&lt;method&gt;</code> elements. Several examples demonstrate the syntax of the XML. Multiple method permission statements may be present, and they have a cumulative effect. The <code class="sgmltag-element">&lt;method-permission&gt;</code> element is a child of the <code class="sgmltag-element">&lt;assembly-descriptor&gt;</code> element of the <code class="sgmltag-element">&lt;ejb-jar&gt;</code> descriptor.
		</div><div class="para">
		The XML syntax is an alternative to using annotations for EJB method permissions.
	</div><div class="example"><a id="idm139772539622976">
      ⁠</a><p class="title"><strong>Example 9.5. Allow roles to access all methods of an EJB</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>The employee and temp-employee roles may access any method
<span xmlns="" class="line">​</span>  of the EmployeeService bean <span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>employee<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>temp-employee<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeService<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>	
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="idm139772561901136">
      ⁠</a><p class="title"><strong>Example 9.6. Allow roles to access only specific methods of an EJB, and limiting which method parameters can be passed.</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>The employee role may access the findByPrimaryKey,
<span xmlns="" class="line">​</span>  getEmployeeInfo, and the updateEmployeeInfo(String) method of
<span xmlns="" class="line">​</span>  the AcmePayroll bean <span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>employee<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>AcmePayroll<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>findByPrimaryKey<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>AcmePayroll<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>getEmployeeInfo<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>AcmePayroll<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>updateEmployeeInfo<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;method-params&gt;</span>
<span xmlns="" class="line">​</span>	  <span xmlns="" class="perl_Keyword">&lt;method-param&gt;</span>java.lang.String<span xmlns="" class="perl_Keyword">&lt;/method-param&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/method-params&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="idm139772529934752">
      ⁠</a><p class="title"><strong>Example 9.7. Allow any authenticated user to access methods of EJBs</strong></p><div class="example-contents"><div class="para">
			Using the <code class="sgmltag-element">&lt;unchecked/&gt;</code> element allows any authenticated user to use the specified methods.
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>Any authenticated user may access any method of the
<span xmlns="" class="line">​</span>  EmployeeServiceHelp bean<span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;unchecked/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeServiceHelp<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="idm139772531647648">
      ⁠</a><p class="title"><strong>Example 9.8. Completely exclude specific EJB methods from being used</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;exclude-list&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>No fireTheCTO methods of the EmployeeFiring bean may be
<span xmlns="" class="line">​</span>  used in this deployment<span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeFiring<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>fireTheCTO<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/exclude-list&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="idm139772550190048">
      ⁠</a><p class="title"><strong>Example 9.9. A complete <code class="sgmltag-element">&lt;assembly-descriptor&gt;</code> containing several <code class="sgmltag-element">&lt;method-permission&gt;</code> blocks</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ejb-jar&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>The employee and temp-employee roles may access any
<span xmlns="" class="line">​</span>                method of the EmployeeService bean <span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>employee<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>temp-employee<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeService<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>The employee role may access the findByPrimaryKey,
<span xmlns="" class="line">​</span>                getEmployeeInfo, and the updateEmployeeInfo(String) method of
<span xmlns="" class="line">​</span>                the AcmePayroll bean <span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>employee<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>AcmePayroll<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>findByPrimaryKey<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>AcmePayroll<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>getEmployeeInfo<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>AcmePayroll<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>updateEmployeeInfo<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-params&gt;</span>
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">&lt;method-param&gt;</span>java.lang.String<span xmlns="" class="perl_Keyword">&lt;/method-param&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/method-params&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>The admin role may access any method of the
<span xmlns="" class="line">​</span>                EmployeeServiceAdmin bean <span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>admin<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeServiceAdmin<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;method-permission&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>Any authenticated user may access any method of the
<span xmlns="" class="line">​</span>                EmployeeServiceHelp bean<span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;unchecked/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeServiceHelp<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/method-permission&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;exclude-list&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;description&gt;</span>No fireTheCTO methods of the EmployeeFiring bean may be
<span xmlns="" class="line">​</span>                used in this deployment<span xmlns="" class="perl_Keyword">&lt;/description&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;method&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>EmployeeFiring<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;method-name&gt;</span>fireTheCTO<span xmlns="" class="perl_Keyword">&lt;/method-name&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/method&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/exclude-list&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/ejb-jar&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4794-591676+%5BLatest%5D&amp;comment=Title%3A+Use+EJB+Method+Permissions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4794-591676+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-EJB_Security_Annotations">
      ⁠</a>9.2.3. EJB Security Annotations</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_EJB_Security_Annotations">
      ⁠</a>9.2.3.1. About EJB Security Annotations</h3></div></div></div><div class="para">
		EJB <code class="literal">javax.annotation.security</code> annotations are defined in JSR250.
	</div><div class="para">
		EJBs use security annotations to pass information about security to the deployer. These include:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">@DeclareRoles</span></dt><dd><div class="para">
					Declares which roles are available.
				</div></dd><dt><span class="term">@RunAs</span></dt><dd><div class="para">
					Configures the propagated security identity of a component.
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4768-685879+%5BLatest%5D&amp;comment=Title%3A+About+EJB+Security+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4768-685879+17+Jul+2014+20%3A19+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_EJB_Security_Annotations">
      ⁠</a>9.2.3.2. Use EJB Security Annotations</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			You can use either XML descriptors or annotations to control which security roles are able to call methods in your Enterprise JavaBeans (EJBs). For information on using XML descriptors, refer to <a class="xref" href="chap-Application_Security.html#Use_EJB_Method_Permissions">Section 9.2.2.2, “Use EJB Method Permissions”</a>.
		</div><div class="para">
		Any method values explicitly specified in the deployment descriptor override annotation values. If a method value is not specified in the deployment descriptor, those values set using annotations are used. The overriding granularity is on a per-method basis.
	</div><div class="variablelist"><p class="title"><strong>Annotations for Controlling Security Permissions of EJBs</strong></p><dl class="variablelist"><dt><span class="term">@DeclareRoles</span></dt><dd><div class="para">
					Use @DeclareRoles to define which security roles to check permissions against. If no @DeclareRoles is present, the list is built automatically from the @RolesAllowed annotation. For information about configuring roles, refer to the <em class="citetitle">Java EE 6 Tutorial</em> <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnbyl.html#gjgcq">Specifying Authorized Users by Declaring Security Roles</a>.
				</div></dd><dt><span class="term">@RolesAllowed, @PermitAll, @DenyAll</span></dt><dd><div class="para">
					Use <code class="code">@RolesAllowed</code> to list which roles are allowed to access a method or methods. Use <code class="code">@PermitAll</code> or <code class="code">@DenyAll</code> to either permit or deny all roles from using a method or methods. For information about configuring annotation method permissions, refer to the <em class="citetitle">Java EE 6 Tutorial</em> <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnbyl.html#gjgcq">Specifying Authorized Users by Declaring Security Roles</a>.
				</div></dd><dt><span class="term">@RunAs</span></dt><dd><div class="para">
					Use <code class="code">@RunAs</code> to specify a role a method uses when making calls from the annotated method. For information about configuring propagated security identities using annotations, refer to the <em class="citetitle">Java EE 6 Tutorial</em> <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnbyl.html#bnbyr">Propagating a Security Identity (Run-As)</a>.
				</div></dd></dl></div><div class="example"><a id="idm139772558365888">
      ⁠</a><p class="title"><strong>Example 9.10. Security Annotations Example</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Stateless
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">RolesAllowed</span>({<span xmlns="" class="perl_String">"admin"</span>})
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">SecurityDomain</span>(<span xmlns="" class="perl_String">"other"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> WelcomeEJB <span xmlns="" class="perl_Keyword">implements</span> Welcome {
<span xmlns="" class="line">​</span>	@PermitAll
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">WelcomeEveryone</span>(String msg) {
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Welcome to "</span> + msg;
<span xmlns="" class="line">​</span>	}
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">RunAs</span>(<span xmlns="" class="perl_String">"tempemployee"</span>)
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">GoodBye</span>(String msg) {
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Goodbye, "</span> + msg;
<span xmlns="" class="line">​</span>	}
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">GoodbyeAdmin</span>(String msg) {
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"See you later, "</span> + msg;
<span xmlns="" class="line">​</span>	}
<span xmlns="" class="line">​</span>}
</pre><div class="para">
			In this code, all roles can access method <code class="code">WelcomeEveryone</code>. The <code class="code">GoodBye</code> method uses the <code class="code">tempemployee</code> role when making calls. Only the <code class="code">admin</code> role can access method <code class="code">GoodbyeAdmin</code>, and any other methods with no security annotation.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4795-687321+%5BLatest%5D&amp;comment=Title%3A+Use+EJB+Security+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4795-687321+22+Jul+2014+18%3A35+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Remote_Access_to_EJBs">
      ⁠</a>9.2.4. Remote Access to EJBs</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Remoting">
      ⁠</a>9.2.4.1. About Remote Method Access</h3></div></div></div><div class="para">
		JBoss Remoting is the framework which provides remote access to EJBs, JMX MBeans, and other similar services. It works within the following transport types, with or without SSL:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Supported Transport Types</strong></p><ul><li class="listitem"><div class="para">
				Socket / Secure Socket
			</div></li><li class="listitem"><div class="para">
				RMI / RMI over SSL
			</div></li><li class="listitem"><div class="para">
				HTTP / HTTPS
			</div></li><li class="listitem"><div class="para">
				Servlet / Secure Servlet
			</div></li><li class="listitem"><div class="para">
				Bisocket / Secure Bisocket
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Red Hat recommends that you explicitly disable SSL in favor of TLSv1.1 or TLSv1.2 in all affected packages.
		</div></div></div><div class="para">
		JBoss Remoting also provides automatic discovery via Multicast or JNDI.
	</div><div class="para">
		It is used by many of the subsystems within JBoss EAP 6, and also enables you to design, implement, and deploy services that can be remotely invoked by clients over several different transport mechanisms. It also allows you to access existing services in JBoss EAP 6.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Data Marshalling</div>
			The Remoting system also provides data marshalling and unmarshalling services. Data marshalling refers to the ability to safely move data across network and platform boundaries, so that a separate system can perform work on it. The work is then sent back to the original system and behaves as though it were handled locally.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Architecture Overview</div>
			When you design a client application which uses Remoting, you direct your application to communicate with the server by configuring it to use a special type of resource locator called an <code class="literal">InvokerLocator</code>, which is a simple String with a URL-type format. The server listens for requests for remote resources on a <code class="literal">connector</code>, which is configured as part of the <code class="literal">remoting</code> subsystem. The <code class="literal">connector</code> hands the request off to a configured <code class="literal">ServerInvocationHandler</code>. Each <code class="literal">ServerInvocationHandler</code> implements a method <code class="code">invoke(InvocationRequest)</code>, which knows how to handle the request.
		</div><div class="para">
		The JBoss Remoting framework contains three layers that mirror each other on the client and server side.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>JBoss Remoting Framework Layers</strong></p><ul><li class="listitem"><div class="para">
				The user interacts with the outer layer. On the client side, the outer layer is the <code class="code">Client</code> class, which sends invocation requests. On the server side, it is the InvocationHandler, which is implemented by the user and receives invocation requests.
			</div></li><li class="listitem"><div class="para">
				The transport is controlled by the invoker layer.
			</div></li><li class="listitem"><div class="para">
				The lowest layer contains the marshaller and unmarshaller, which convert data formats to wire formats.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+7882-724703+%5BLatest%5D&amp;comment=Title%3A+About+Remote+Method+Access%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=7882-724703+09+Nov+2014+23%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Remoting_Callbacks">
      ⁠</a>9.2.4.2. About Remoting Callbacks</h3></div></div></div><div class="para">
		When a Remoting client requests information from the server, it can block and wait for the server to reply, but this is often not the ideal behavior. To allow the client to listen for asynchronous events on the server, and continue doing other work while waiting for the server to finish the request, your application can ask the server to send a notification when it has finished. This is referred to as a callback. One client can add itself as a listener for asynchronous events generated on behalf of another client, as well. There are two different choices for how to receive callbacks: pull callbacks or push callbacks. Clients check for pull callbacks synchronously, but passively listen for push callbacks.
	</div><div class="para">
		In essence, a callback works by the server sending an <code class="code">InvocationRequest</code> to the client. Your server-side code works the same regardless of whether the callback is synchronous or asynchronous. Only the client needs to know the difference. The server's InvocationRequest sends a <code class="code">responseObject</code> to the client. This is the payload that the client has requested. This may be a direct response to a request or an event notification.
	</div><div class="para">
		Your server also tracks listeners using an <code class="code">m_listeners</code> object. It contains a list of all listeners that have been added to your server handler. The <code class="code">ServerInvocationHandler</code> interface includes methods that allow you to manage this list.
	</div><div class="para">
		The client handles pull and push callback in different ways. In either case, it must implement a callback handler. A callback handler is an implementation of interface <code class="code">org.jboss.remoting.InvokerCallbackHandler</code>, which processes the callback data. After implementing the callback handler, you either add yourself as a listener for a pull callback, or implement a callback server for a push callback.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Pull Callbacks</div>
			For a pull callback, your client adds itself to the server's list of listeners using the <code class="code">Client.addListener()</code> method. It then polls the server periodically for synchronous delivery of callback data. This poll is performed using the <code class="code">Client.getCallbacks()</code>.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Push Callback</div>
			A push callback requires your client application to run its own InvocationHandler. To do this, you need to run a Remoting service on the client itself. This is referred to as a <em class="firstterm">callback server</em>. The callback server accepts incoming requests asynchronously and processes them for the requester (in this case, the server). To register your client's callback server with the main server, pass the callback server's <code class="code">InvokerLocator</code> as the second argument to the <code class="code">addListener</code> method.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+7883-591811+%5BLatest%5D&amp;comment=Title%3A+About+Remoting+Callbacks%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=7883-591811+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Remoting_Server_Detection">
      ⁠</a>9.2.4.3. About Remoting Server Detection</h3></div></div></div><div class="para">
		Remoting servers and clients can automatically detect each other using JNDI or Multicast. A Remoting Detector is added to both the client and server, and a NetworkRegistry is added to the client.
	</div><div class="para">
		The Detector on the server side periodically scans the InvokerRegistry and pulls all server invokers it has created. It uses this information to publish a detection message which contains the locator and subsystems supported by each server invoker. It publishes this message via a multicast broadcast or a binding into a JNDI server.
	</div><div class="para">
		On the client side, the Detector receives the multicast message or periodically polls the JNDI server to retrieve detection messages. If the Detector notices that a detection message is for a newly-detected remoting server, it registers it into the NetworkRegistry. The Detector also updates the NetworkRegistry if it detects that a server is no longer available.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+7890-591811+%5BLatest%5D&amp;comment=Title%3A+About+Remoting+Server+Detection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=7890-591811+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Configure_the_Remoting_Subsystem">
      ⁠</a>9.2.4.4. Configure the Remoting Subsystem</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			JBoss Remoting has three top-level configurable elements: the worker thread pool, one or more connectors, and a series of local and remote connection URIs. This topic presents an explanation of each configurable item, example CLI commands for how to configure each item, and an XML example of a fully-configured subsystem. This configuration only applies to the server. Most people will not need to configure the Remoting subsystem at all, unless they use custom connectors for their own applications. Applications which act as Remoting clients, such as EJBs, need separate configuration to connect to a specific connector.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The Remoting subsystem configuration is not exposed to the web-based Management Console, but it is fully configurable from the command-line based Management CLI. Editing the XML by hand is not recommended.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Adapting the CLI Commands</div>
			The CLI commands are formulated for a managed domain, when configuring the <code class="literal">default</code> profile. To configure a different profile, substitute its name. For a standalone server, omit the <code class="literal">/profile=default</code> part of the command.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Configuration Outside the Remoting Subsystem</div>
			There are a few configuration aspects which are outside of the <code class="literal">remoting</code> subsystem:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Network Interface</span></dt><dd><div class="para">
					The network interface used by the <code class="literal">remoting</code> subsystem is the <code class="literal">public</code> interface defined in the <code class="filename">domain/configuration/domain.xml</code> or <code class="filename">standalone/configuration/standalone.xml</code>.
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;interfaces&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;interface</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"management"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;interface</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"public"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;interface</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"unsecure"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/interfaces&gt;</span>        
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>
</pre><div class="para">
					The per-host definition of the <code class="literal">public</code> interface is defined in the <code class="filename">host.xml</code> in the same directory as the <code class="filename">domain.xml</code> or <code class="filename">standalone.xml</code>. This interface is also used by several other subsystems. Exercise caution when modifying it.
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;interfaces&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;interface</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"management"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;inet-address</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${jboss.bind.address.management:127.0.0.1}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/interface&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;interface</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"public"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;inet-address</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${jboss.bind.address:127.0.0.1}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/interface&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;interface</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"unsecure"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">&lt;!-- Used for IIOP sockets in the standard configuration.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">         To secure JacORB you need to setup SSL --&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;inet-address</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${jboss.bind.address.unsecure:127.0.0.1}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/interface&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/interfaces&gt;</span>             
<span xmlns="" class="line">​</span>                 
<span xmlns="" class="line">​</span>
</pre></dd><dt><span class="term">socket-binding</span></dt><dd><div class="para">
					The default socket-binding used by the <code class="literal">remoting</code> subsystem binds to TCP port 4447. Refer to the documentation about socket bindings and socket binding groups for more information if you need to change this.
				</div></dd><dt><span class="term">Remoting Connector Reference for EJB</span></dt><dd><div class="para">
					The EJB subsystem contains a reference to the remoting connector for remote method invocations. The following is the default configuration:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;remote</span><span xmlns="" class="perl_Others"> connector-ref=</span><span xmlns="" class="perl_String">"remoting-connector"</span><span xmlns="" class="perl_Others"> thread-pool-name=</span><span xmlns="" class="perl_String">"default"</span><span xmlns="" class="perl_Keyword">/&gt;</span>            
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>
</pre></dd><dt><span class="term">Secure Transport Configuration</span></dt><dd><div class="para">
					Remoting transports use StartTLS to use a secure (HTTPS, Secure Servlet, etc) connection if the client requests it. The same socket binding (network port) is used for secured and unsecured connections, so no additional server-side configuration is necessary. The client requests the secure or unsecured transport, as its needs dictate. JBoss EAP 6 components which use Remoting, such as EJBs, the ORB, and the JMS provider, request secured interfaces by default.
				</div></dd></dl></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning: StartTLS Security Considerations</strong></p></div><div class="admonition"><div class="para">
			StartTLS works by activating a secure connection if the client requests it, and otherwise defaulting to an unsecured connection. It is inherently susceptible to a <em class="firstterm">Man in the Middle</em> style exploit, wherein an attacker intercepts the client's request and modifies it to request an unsecured connection. Clients must be written to fail appropriately if they do not receive a secure connection, unless an unsecured connection actually is an appropriate fall-back.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Worker Thread Pool</div>
			The worker thread pool is the group of threads which are available to process work which comes in through the Remoting connectors. It is a single element <code class="sgmltag-element">&lt;worker-thread-pool&gt;</code>, and takes several attributes. Tune these attributes if you get network timeouts, run out of threads, or need to limit memory usage. Specific recommendations depend on your specific situation. Contact Red Hat Global Support Services for more information.
		</div><div class="table"><a id="idm139772538777376">
      ⁠</a><p class="title"><strong>Table 9.1. Worker Thread Pool Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Worker Thread Pool Attributes"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> read-threads </td><td> <div class="para">
						The number of read threads to create for the remoting worker. Defaults to <code class="literal">1</code>.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/:write-attribute(name=worker-read-threads,value=1)</code>
					</div>
					 </td></tr><tr><td> write-threads </td><td> <div class="para">
						The number of write threads to create for the remoting worker. Defaults to <code class="literal">1</code>.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/:write-attribute(name=worker-write-threads,value=1)</code>
					</div>
					 </td></tr><tr><td> task-keepalive </td><td> <div class="para">
						The number of milliseconds to keep non-core remoting worker task threads alive. Defaults to <code class="literal">60</code>.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/:write-attribute(name=worker-task-keepalive,value=60)</code>
					</div>
					 </td></tr><tr><td> task-max-threads </td><td> <div class="para">
						The maximum number of threads for the remoting worker task thread pool. Defaults to <code class="literal">16</code>.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/:write-attribute(name=worker-task-max-threads,value=16)</code>
					</div>
					 </td></tr><tr><td> task-core-threads </td><td> <div class="para">
						The number of core threads for the remoting worker task thread pool. Defaults to <code class="literal">4</code>.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/:write-attribute(name=worker-task-core-threads,value=4)</code>
					</div>
					 </td></tr><tr><td> task-limit </td><td> <div class="para">
						The maximum number of remoting worker tasks to allow before rejecting. Defaults to <code class="literal">16384</code>.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/:write-attribute(name=worker-task-limit,value=16384)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Connector</div>
			The connector is the main Remoting configuration element. Multiple connectors are allowed. Each consists of a element <code class="sgmltag-element">&lt;connector&gt;</code> element with several sub-elements, as well as a few possible attributes. The default connector is used by several subsystems of JBoss EAP 6. Specific settings for the elements and attributes of your custom connectors depend on your applications, so contact Red Hat Global Support Services for more information.
		</div><div class="table"><a id="idm139772538179520">
      ⁠</a><p class="title"><strong>Table 9.2. Connector Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Connector Attributes"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> socket-binding </td><td> The name of the socket binding to use for this connector. </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/connector=remoting-connector/:write-attribute(name=socket-binding,value=remoting)</code>
					</div>
					 </td></tr><tr><td> authentication-provider </td><td> <div class="para">
						The Java Authentication Service Provider Interface for Containers (JASPIC) module to use with this connector. The module must be in the classpath.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/connector=remoting-connector/:write-attribute(name=authentication-provider,value=myProvider)</code>
					</div>
					 </td></tr><tr><td> security-realm </td><td> <div class="para">
						Optional. The security realm which contains your application's users, passwords, and roles. An EJB or Web Application can authenticate against a security realm. <code class="literal">ApplicationRealm</code> is available in a default JBoss EAP 6 installation.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/connector=remoting-connector/:write-attribute(name=security-realm,value=ApplicationRealm)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="idm139772545032192">
      ⁠</a><p class="title"><strong>Table 9.3. Connector Elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Connector Elements"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> sasl </td><td> <div class="para">
						Enclosing element for Simple Authentication and Security Layer (SASL) authentication mechanisms
					</div>
					 </td><td> <div class="para">
						<code class="literal">N/A</code>
					</div>
					 </td></tr><tr><td> properties </td><td> <div class="para">
						Contains one or more <code class="sgmltag-element">&lt;property&gt;</code> elements, each with a <code class="literal">name</code> attribute and an optional <code class="literal">value</code> attribute.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/connector=remoting-connector/property=myProp/:add(value=myPropValue)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Outbound Connections</div>
			You can specify three different types of outbound connection:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Outbound connection to a URI.
			</div></li><li class="listitem"><div class="para">
				Local outbound connection – connects to a local resource such as a socket.
			</div></li><li class="listitem"><div class="para">
				Remote outbound connection – connects to a remote resource and authenticates using a security realm.
			</div></li></ul></div><div class="para">
		All of the outbound connections are enclosed in an <code class="sgmltag-element">&lt;outbound-connections&gt;</code> element. Each of these connection types takes an <code class="literal">outbound-socket-binding-ref</code> attribute. The outbound-connection takes a <code class="literal">uri</code> attribute. The remote outbound connection takes optional <code class="literal">username</code> and <code class="literal">security-realm</code> attributes to use for authorization.
	</div><div class="table"><a id="idm139772534825872">
      ⁠</a><p class="title"><strong>Table 9.4. Outbound Connection Elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Outbound Connection Elements"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> outbound-connection </td><td> Generic outbound connection. </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/outbound-connection=my-connection/:add(uri=http://my-connection)</code>
					</div>
					 </td></tr><tr><td> local-outbound-connection </td><td> Outbound connection with a implicit local:// URI scheme. </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/local-outbound-connection=my-connection/:add(outbound-socket-binding-ref=remoting2)</code>
					</div>
					 </td></tr><tr><td> remote-outbound-connection </td><td> <div class="para">
						Outbound connections for remote:// URI scheme, using basic/digest authentication with a security realm.
					</div>
					 </td><td> <div class="para">
						<code class="literal">/profile=default/subsystem=remoting/remote-outbound-connection=my-connection/:add(outbound-socket-binding-ref=remoting,username=myUser,security-realm=ApplicationRealm)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">SASL Elements</div>
			Before defining the SASL child elements, you need to create the initial SASL element. Use the following command:
		</div><pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl:add</pre><div class="para">
		The child elements of the SASL element are described in the table below.
	</div><div class="table"><a id="idm139772489304416">
      ⁠</a><p class="title"><strong>Table 9.5. SASL child elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="SASL child elements"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> include-mechanisms </td><td> <div class="para">
						Contains a <code class="literal">value</code> attribute, which is a list of SASL mechanisms.
					</div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl:write-attribute(name=include-mechanisms,value=["DIGEST","PLAIN","GSSAPI"])</pre>
					 </td></tr><tr><td> qop </td><td> <div class="para">
						Contains a <code class="literal">value</code> attribute, which is a list of SASL Quality of protection values, in decreasing order of preference.
					</div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl:write-attribute(name=qop,value=["auth"])</pre>
					 </td></tr><tr><td> strength </td><td> <div class="para">
						Contains a <code class="literal">value</code> attribute, which is a list of SASL cipher strength values, in decreasing order of preference.
					</div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl:write-attribute(name=strength,value=["medium"])</pre>
					 </td></tr><tr><td> reuse-session </td><td> <div class="para">
						Contains a <code class="literal">value</code> attribute which is a boolean value. If true, attempt to reuse sessions.
					</div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl:write-attribute(name=reuse-session,value=false)</pre>
					 </td></tr><tr><td> server-auth </td><td> <div class="para">
						Contains a <code class="literal">value</code> attribute which is a boolean value. If true, the server authenticates to the client.
					</div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl:write-attribute(name=server-auth,value=false)</pre>
					 </td></tr><tr><td> policy </td><td> <div class="para">
						An enclosing element which contains zero or more of the following elements, which each take a single <code class="literal">value</code>.
					</div>
					 <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								forward-secrecy – whether mechanisms are required to implement forward secrecy (breaking into one session will not automatically provide information for breaking into future sessions)
							</div></li><li class="listitem"><div class="para">
								no-active – whether mechanisms susceptible to non-dictionary attacks are permitted. A value of <code class="literal">false</code> permits, and <code class="literal">true</code> denies.
							</div></li><li class="listitem"><div class="para">
								no-anonymous – whether mechanisms that accept anonymous login are permitted. A value of <code class="literal">false</code> permits, and <code class="literal">true</code> denies.
							</div></li><li class="listitem"><div class="para">
								no-dictionary – whether mechanisms susceptible to passive dictionary attacks are allowed. A value of <code class="literal">false</code> permits, and <code class="literal">true</code> denies.
							</div></li><li class="listitem"><div class="para">
								no-plain-text – whether mechanisms which are susceptible to simple plain passive attacks are allowed. A value of <code class="literal">false</code> permits, and <code class="literal">true</code> denies.
							</div></li><li class="listitem"><div class="para">
								pass-credentials – whether mechanisms which pass client credentials are allowed.
							</div></li></ul></div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:add</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:write-attribute(name=forward-secrecy,value=true)</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:write-attribute(name=no-active,value=false)</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:write-attribute(name=no-anonymous,value=false)</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:write-attribute(name=no-dictionary,value=true)</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:write-attribute(name=no-plain-text,value=false)</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/sasl-policy=policy:write-attribute(name=pass-credentials,value=true)</pre>
					 </td></tr><tr><td> properties </td><td> <div class="para">
						Contains one or more <code class="sgmltag-element">&lt;property&gt;</code> elements, each with a <code class="literal">name</code> attribute and an optional <code class="literal">value</code> attribute.
					</div>
					 </td><td>
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/property=myprop:add(value=1)</pre>
					 
<pre class="screen">/profile=default/subsystem=remoting/connector=remoting-connector/security=sasl/property=myprop2:add(value=2)</pre>
					 </td></tr></tbody></table></div></div><div class="example"><a id="idm139772539592736">
      ⁠</a><p class="title"><strong>Example 9.11. Example Configurations</strong></p><div class="example-contents"><div class="para">
			This example shows the default remoting subsystem that ships with JBoss EAP 6.
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:remoting:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connector</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"remoting-connector"</span><span xmlns="" class="perl_Others"> socket-binding=</span><span xmlns="" class="perl_String">"remoting"</span><span xmlns="" class="perl_Others"> security-realm=</span><span xmlns="" class="perl_String">"ApplicationRealm"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span>    
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>
</pre><div class="para">
			This example contains many hypothetical values, and is presented to put the elements and attributes discussed previously into context.
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:remoting:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;worker-thread-pool</span><span xmlns="" class="perl_Others"> read-threads=</span><span xmlns="" class="perl_String">"1"</span><span xmlns="" class="perl_Others"> task-keepalive=</span><span xmlns="" class="perl_String">"60"</span><span xmlns="" class="perl_Others"> task-max-threads=</span><span xmlns="" class="perl_String">"16"</span><span xmlns="" class="perl_Others"> task-core-thread=</span><span xmlns="" class="perl_String">"4"</span><span xmlns="" class="perl_Others"> task-limit=</span><span xmlns="" class="perl_String">"16384"</span><span xmlns="" class="perl_Others"> write-threads=</span><span xmlns="" class="perl_String">"1"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connector</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"remoting-connector"</span><span xmlns="" class="perl_Others"> socket-binding=</span><span xmlns="" class="perl_String">"remoting"</span><span xmlns="" class="perl_Others"> security-realm=</span><span xmlns="" class="perl_String">"ApplicationRealm"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;sasl&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;include-mechanisms</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"GSSAPI PLAIN DIGEST-MD5"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;qop</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"auth"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;strength</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"medium"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;reuse-session</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"false"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;server-auth</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"false"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;policy&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;forward-secrecy</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"true"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;no-active</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"false"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;no-anonymous</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"false"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;no-dictionary</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"true"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;no-plain-text</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"false"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;pass-credentials</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"true"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/policy&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;properties&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"myprop1"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"1"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"myprop2"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"2"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/properties&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/sasl&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;authentication-provider</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"myprovider"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;properties&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"myprop3"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"propValue"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/properties&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/connector&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;outbound-connections&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;outbound-connection</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-outbound-connection"</span><span xmlns="" class="perl_Others"> uri=</span><span xmlns="" class="perl_String">"http://myhost:7777/"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;remote-outbound-connection</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-remote-connection"</span><span xmlns="" class="perl_Others"> outbound-socket-binding-ref=</span><span xmlns="" class="perl_String">"my-remote-socket"</span><span xmlns="" class="perl_Others"> username=</span><span xmlns="" class="perl_String">"myUser"</span><span xmlns="" class="perl_Others"> security-realm=</span><span xmlns="" class="perl_String">"ApplicationRealm"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;local-outbound-connection</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"myLocalConnection"</span><span xmlns="" class="perl_Others"> outbound-socket-binding-ref=</span><span xmlns="" class="perl_String">"my-outbound-socket"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/outbound-connections&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span>    
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Configuration Aspects Not Yet Documented</strong></p><ul><li class="listitem"><div class="para">
				JNDI and Multicast Automatic Detection
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+7884-747460+%5BLatest%5D&amp;comment=Title%3A+Configure+the+Remoting+Subsystem%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=7884-747460+16+Mar+2015+22%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_Security_Realms_with_Remote_EJB_Clients">
      ⁠</a>9.2.4.5. Use Security Realms with Remote EJB Clients</h3></div></div></div><div class="para">
		One way to add security to clients which invoke EJBs remotely is to use security realms. A security realm is a simple database of username/password pairs and username/role pairs. The terminology is also used in the context of web containers, with a slightly different meaning.
	</div><div class="para">
		To authenticate a specific username/password pair that exists in a security realm against an EJB, follow these steps:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Add a new security realm to the domain controller or standalone server.
			</div></li><li class="listitem"><div class="para">
				Add the following parameters to the <code class="filename">jboss-ejb-client.properties</code> file, which is in the classpath of the application. This example assumes the connection is referred to as <code class="literal">default</code> by the other parameters in the file.
			</div><pre class="programlisting">
remote.connection.default.username=appuser
remote.connection.default.password=apppassword
</pre></li><li class="listitem"><div class="para">
				Create a custom Remoting connector on the domain or standalone server, which uses your new security realm.
			</div></li><li class="listitem"><div class="para">
				Deploy your EJB to the server group which is configured to use the profile with the custom Remoting connector, or to your standalone server if you are not using a managed domain.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+8270-680304+%5BLatest%5D&amp;comment=Title%3A+Use+Security+Realms+with+Remote+EJB+Clients%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8270-680304+30+Jun+2014+08%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Add_a_New_Security_Realm">
      ⁠</a>9.2.4.6. Add a New Security Realm</h3></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Run the Management CLI.</strong></p><div class="para">
				Start the <code class="filename">jboss-cli.sh</code> or <code class="filename">jboss-cli.bat</code> command and connect to the server.
			</div></li><li class="step"><p class="title"><strong>Create the new security realm itself.</strong></p><div class="para">
				Run the following command to create a new security realm named <code class="literal">MyDomainRealm</code> on a domain controller or a standalone server.
			</div><div class="para">
				For a domain instance, use this command:
			</div><pre class="screen">/host=master/core-service=management/security-realm=MyDomainRealm:add()</pre><div class="para">
				For a standalone instance, use this command:
			</div><pre class="screen">/core-service=management/security-realm=MyDomainRealm:add()</pre></li><li class="step"><p class="title"><strong>Create the references to the properties file which will store information about the new role.</strong></p><div class="para">
				Run the following command to create a pointer a file named <code class="filename">myfile.properties</code>, which will contain the properties pertaining to the new role.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The newly created properties file is not managed by the included <code class="filename">add-user.sh</code> and <code class="filename">add-user.bat</code> scripts. It must be managed externally.
				</div></div></div><div class="para">
				For a domain instance, use this command:
			</div><pre class="screen">/host=master/core-service=management/security-realm=MyDomainRealm/authentication=properties:add(path=myfile.properties)</pre><div class="para">
				For a standalone instance, use this command:
			</div><pre class="screen">/core-service=management/security-realm=MyDomainRealm/authentication=properties:add(path=myfile.properties)</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Your new security realm is created. When you add users and roles to this new realm, the information will be stored in a separate file from the default security realms. You can manage this new file using your own applications or procedures.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+8272-719583+%5BLatest%5D&amp;comment=Title%3A+Add+a+New+Security+Realm%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8272-719583+27+Oct+2014+21%3A56+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Add_a_User_to_a_Security_Realm">
      ⁠</a>9.2.4.7. Add a User to a Security Realm</h3></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Run the <code class="filename">add-user.sh</code> or <code class="filename">add-user.bat</code> command.</strong></p><div class="para">
				Open a terminal and change directories to the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/</code> directory. If you run Red Hat Enterprise Linux or another UNIX-like operating system, run <code class="filename">add-user.sh</code>. If you run Microsoft Windows Server, run <code class="filename">add-user.bat</code>.
			</div></li><li class="step"><p class="title"><strong>Choose whether to add a Management User or Application User.</strong></p><div class="para">
				For this procedure, type <code class="literal">b</code> to add an Application User.
			</div></li><li class="step"><p class="title"><strong>Choose the realm the user will be added to.</strong></p><div class="para">
				By default, the only available realm is <code class="literal">ApplicationRealm</code>. If you have added a custom realm, you can type its name instead.
			</div></li><li class="step"><p class="title"><strong>Type the username, password, and roles, when prompted.</strong></p><div class="para">
				Type the desired username, password, and optional roles when prompted. Verify your choice by typing <code class="literal">yes</code>, or type <code class="literal">no</code> to cancel the changes. The changes are written to each of the properties files for the security realm.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+8271-591829+%5BLatest%5D&amp;comment=Title%3A+Add+a+User+to+a+Security+Realm%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8271-591829+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Remote_EJB_Access_Using_SSL_Encryption">
      ⁠</a>9.2.4.8. About Remote EJB Access Using SSL Encryption</h3></div></div></div><div class="para">
		By default, the network traffic for Remote Method Invocation (RMI) of EJB2 and EJB3 Beans is not encrypted. In instances where encryption is required, Secure Sockets Layer (SSL) can be utilized so that the connection between the client and server is encrypted. Using SSL also has the added benefit of allowing the network traffic to traverse some firewalls, depending on the firewall configuration.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Red Hat recommends that you explicitly disable SSL in favor of TLSv1.1 or TLSv1.2 in all affected packages.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4786-724704+%5BLatest%5D&amp;comment=Title%3A+About+Remote+EJB+Access+Using+SSL+Encryption%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4786-724704+09+Nov+2014+23%3A56+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JAX-RS_Application_Security">
      ⁠</a>9.3. JAX-RS Application Security</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enable_Role-Based_Security_for_a_RESTEasy_JAX-RS_Web_Service">
      ⁠</a>9.3.1. Enable Role-Based Security for a RESTEasy JAX-RS Web Service</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			RESTEasy supports the @RolesAllowed, @PermitAll, and @DenyAll annotations on JAX-RS methods. However, it does not recognize these annotations by default. Follow these steps to configure the <code class="filename">web.xml</code> file and enable role-based security.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Do not activate role-based security if the application uses EJBs. The EJB container will provide the functionality, instead of RESTEasy.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772539659936">
      ⁠</a><p class="title"><strong>Procedure 9.1. Enable Role-Based Security for a RESTEasy JAX-RS Web Service</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename">web.xml</code> file for the application in a text editor.
			</div></li><li class="step"><div class="para">
				Add the following &lt;context-param&gt; to the file, within the <code class="code">web-app</code> tags:
			</div><pre class="screen">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;

</pre></li><li class="step"><div class="para">
				Declare all roles used within the RESTEasy JAX-RS WAR file, using the &lt;security-role&gt; tags:
			</div><pre class="screen">&lt;security-role&gt;
    &lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
&lt;/security-role&gt;
&lt;security-role&gt;
    &lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
&lt;/security-role&gt;</pre></li><li class="step"><div class="para">
				Authorize access to all URLs handled by the JAX-RS runtime for all roles:
			</div><pre class="screen">&lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
	&lt;web-resource-name&gt;Resteasy&lt;/web-resource-name&gt;
	&lt;url-pattern&gt;/<em class="replaceable">PATH</em>&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
	&lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
	&lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Role-based security has been enabled within the application, with a set of defined roles.
		</div><div class="example"><a id="idm139772527018320">
      ⁠</a><p class="title"><strong>Example 9.12. Example Role-Based Security Configuration</strong></p><div class="example-contents"><pre class="programlisting">
&lt;web-app&gt;

    &lt;context-param&gt;
	&lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;
	&lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;servlet-mapping&gt;
	&lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;security-constraint&gt;
	&lt;web-resource-collection&gt;
	    &lt;web-resource-name&gt;Resteasy&lt;/web-resource-name&gt;
	    &lt;url-pattern&gt;/security&lt;/url-pattern&gt;
	&lt;/web-resource-collection&gt;
	&lt;auth-constraint&gt;
	    &lt;role-name&gt;admin&lt;/role-name&gt;
	    &lt;role-name&gt;user&lt;/role-name&gt;
	&lt;/auth-constraint&gt;
    &lt;/security-constraint&gt;

    &lt;security-role&gt;
	&lt;role-name&gt;admin&lt;/role-name&gt;
    &lt;/security-role&gt;
    &lt;security-role&gt;
	&lt;role-name&gt;user&lt;/role-name&gt;
    &lt;/security-role&gt;
    
&lt;/web-app&gt;

</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+5945-591719+%5BLatest%5D&amp;comment=Title%3A+Enable+Role-Based+Security+for+a+RESTEasy+JAX-RS+Web+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5945-591719+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Secure_a_JAX-RS_Web_Service_using_Annotations">
      ⁠</a>9.3.2. Secure a JAX-RS Web Service using Annotations</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps to secure a JAX-RS web service using the supported security annotations
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772568117136">
      ⁠</a><p class="title"><strong>Procedure 9.2. Secure a JAX-RS Web Service using Supported Security Annotations</strong></p><ol class="1"><li class="step"><div class="para">
				Enable role-based security. For more information, refer to: <a class="xref" href="chap-Application_Security.html#Enable_Role-Based_Security_for_a_RESTEasy_JAX-RS_Web_Service">Section 9.3.1, “Enable Role-Based Security for a RESTEasy JAX-RS Web Service”</a>
			</div></li><li class="step"><div class="para">
				Add security annotations to the JAX-RS web service. RESTEasy supports the following annotations:
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">@RolesAllowed</span></dt><dd><div class="para">
							Defines which roles can access the method. All roles should be defined in the <code class="filename">web.xml</code> file.
						</div></dd><dt><span class="term">@PermitAll</span></dt><dd><div class="para">
							Allows all roles defined in the <code class="filename">web.xml</code> file to access the method.
						</div></dd><dt><span class="term">@DenyAll</span></dt><dd><div class="para">
							Denies all access to the method.
						</div></dd></dl></div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+6095-591722+%5BLatest%5D&amp;comment=Title%3A+Secure+a+JAX-RS+Web+Service+using+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6095-591722+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>