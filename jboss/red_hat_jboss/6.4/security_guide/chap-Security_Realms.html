<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Security Realms</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Security_Realms">
      ⁠</a>Chapter 3. Security Realms</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_Security_Realms">
      ⁠</a>3.1. About Security Realms</h1></div></div></div><div class="para">
		A <em class="firstterm">security realm</em> is a series of mappings between users and passwords, and users and roles. Security realms are a mechanism for adding authentication and authorization to your EJB and Web applications. JBoss EAP 6 provides two security realms by default:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				<code class="literal">ManagementRealm</code> stores authentication information for the Management API, which provides the functionality for the Management CLI and web-based Management Console. It provides an authentication system for managing JBoss EAP 6 itself. You could also use the <code class="literal">ManagementRealm</code> if your application needed to authenticate with the same business rules you use for the Management API.
			</div></li><li class="listitem"><div class="para">
				<code class="literal">ApplicationRealm</code> stores user, password, and role information for Web Applications and EJBs.
			</div></li></ul></div><div class="para">
		Each realm is stored in a number of files on the filesystem:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				<code class="filename"><em class="replaceable">REALM</em>-users.properties</code> stores usernames and hashed passwords.
			</div></li><li class="listitem"><div class="para">
				<code class="filename"><em class="replaceable">REALM</em>-roles.properties</code> stores user-to-role mappings.
			</div></li><li class="listitem"><div class="para">
				<code class="filename">mgmt-groups.properties</code> stores user-to-group mapping file for <code class="literal">ManagementRealm</code>. Only used when Role-based Access Control (RBAC) is enabled.
			</div></li></ul></div><div class="para">
		The properties files are stored in the <code class="filename">domain/configuration/</code> and <code class="filename">standalone/configuration/</code> directories. The files are written simultaneously by the <code class="filename">add-user.sh</code> or <code class="filename">add-user.bat</code> command. When you run the command, the first decision you make is which realm to add your new user to.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+8269-685992+%5BLatest%5D&amp;comment=Title%3A+About+Security+Realms%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8269-685992+18+Jul+2014+06%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Add_a_New_Security_Realm1">
      ⁠</a>3.2. Add a New Security Realm</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Run the Management CLI.</strong></p><div class="para">
				Start the <code class="filename">jboss-cli.sh</code> or <code class="filename">jboss-cli.bat</code> command and connect to the server.
			</div></li><li class="step"><p class="title"><strong>Create the new security realm itself.</strong></p><div class="para">
				Run the following command to create a new security realm named <code class="literal">MyDomainRealm</code> on a domain controller or a standalone server.
			</div><div class="para">
				For a domain instance, use this command:
			</div><pre class="screen">/host=master/core-service=management/security-realm=MyDomainRealm:add()</pre><div class="para">
				For a standalone instance, use this command:
			</div><pre class="screen">/core-service=management/security-realm=MyDomainRealm:add()</pre></li><li class="step"><p class="title"><strong>Create the references to the properties file which will store information about the new role.</strong></p><div class="para">
				Run the following command to create a pointer a file named <code class="filename">myfile.properties</code>, which will contain the properties pertaining to the new role.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The newly created properties file is not managed by the included <code class="filename">add-user.sh</code> and <code class="filename">add-user.bat</code> scripts. It must be managed externally.
				</div></div></div><div class="para">
				For a domain instance, use this command:
			</div><pre class="screen">/host=master/core-service=management/security-realm=MyDomainRealm/authentication=properties:add(path=myfile.properties)</pre><div class="para">
				For a standalone instance, use this command:
			</div><pre class="screen">/core-service=management/security-realm=MyDomainRealm/authentication=properties:add(path=myfile.properties)</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Your new security realm is created. When you add users and roles to this new realm, the information will be stored in a separate file from the default security realms. You can manage this new file using your own applications or procedures.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+8272-719583+%5BLatest%5D&amp;comment=Title%3A+Add+a+New+Security+Realm%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8272-719583+27+Oct+2014+21%3A56+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Add_a_User_to_a_Security_Realm1">
      ⁠</a>3.3. Add a User to a Security Realm</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Run the <code class="filename">add-user.sh</code> or <code class="filename">add-user.bat</code> command.</strong></p><div class="para">
				Open a terminal and change directories to the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/</code> directory. If you run Red Hat Enterprise Linux or another UNIX-like operating system, run <code class="filename">add-user.sh</code>. If you run Microsoft Windows Server, run <code class="filename">add-user.bat</code>.
			</div></li><li class="step"><p class="title"><strong>Choose whether to add a Management User or Application User.</strong></p><div class="para">
				For this procedure, type <code class="literal">b</code> to add an Application User.
			</div></li><li class="step"><p class="title"><strong>Choose the realm the user will be added to.</strong></p><div class="para">
				By default, the only available realm is <code class="literal">ApplicationRealm</code>. If you have added a custom realm, you can type its name instead.
			</div></li><li class="step"><p class="title"><strong>Type the username, password, and roles, when prompted.</strong></p><div class="para">
				Type the desired username, password, and optional roles when prompted. Verify your choice by typing <code class="literal">yes</code>, or type <code class="literal">no</code> to cancel the changes. The changes are written to each of the properties files for the security realm.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+8271-591829+%5BLatest%5D&amp;comment=Title%3A+Add+a+User+to+a+Security+Realm%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8271-591829+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></body></html>