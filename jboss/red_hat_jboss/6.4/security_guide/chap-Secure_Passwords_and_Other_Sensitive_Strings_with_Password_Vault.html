<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 7. Secure Passwords and Other Sensitive Strings with Password Vault</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault">
      ⁠</a>Chapter 7. Secure Passwords and Other Sensitive Strings with Password Vault</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_Securing_Sensitive_Strings_in_Clear-Text_Files1">
      ⁠</a>7.1. Password Vault System</h1></div></div></div><div class="para">
		Configuration of JBoss EAP and associated applications requires potentially sensitive information, such as usernames and passwords. Instead of storing this sensitive information as plain text in configuration files, use the Password Vault feature to mask this information and store it in an encrypted keystore.
	</div><div class="para">
		Instead of storing the password as plain text in configuration files, you can use the Password Vault feature to mask the password information and store it in an encrypted keystore. Once the password is stored, you can include references in Management CLI commands or your own applications. The Password Vault uses the Java Keystore as its storage mechanism. Password Vault consists of two parts: storage and key storage. Java Keystore is used to store the key, which is used to encrypt or decrypt sensitive strings in Vault storage.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+9001-734540+%5BLatest%5D&amp;comment=Title%3A+Password+Vault+System%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9001-734540+06+Jan+2015+00%3A47+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_and_Use_Password_Vault">
      ⁠</a>7.2. Configure and Use Password Vault</h1></div></div></div><div class="para">
		The masked keystore password feature provided in Password Vault provides the option to obtain the masked keystore password from Password Vault, which is stored on the JBoss EAP server. The Password Vault uses the Java Keystore as its storage mechanism.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772534190512">
      ⁠</a><p class="title"><strong>Procedure 7.1. Basic steps to configure and use Password Vault</strong></p><ol class="1"><li class="step"><div class="para">
				Setup a Java Keystore to store key for password encryption.
			</div><div class="para">
				For information on creating a keystore, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Create_a_Java_Keystore_to_Store_Sensitive_Strings">Section 7.3, “Create a Java Keystore to Store Sensitive Strings”</a>.
			</div></li><li class="step"><div class="para">
				Initialize the Password Vault.
			</div><div class="para">
				For information on masking the password and initialize the password value, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>.
			</div></li><li class="step"><div class="para">
				Configure JBoss EAP 6 to use the Password Vault.
			</div><div class="para">
				For information on configuring EAP 6 to use Password Vault, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Configure_the_Enterprise_Application_Platform_to_Use_the_Password_Vault1">Section 7.6, “Configure JBoss EAP 6 to Use the Password Vault”</a>.
			</div></li><li class="step"><div class="para">
				Store a Sensitive String in the Password Vault.
			</div><div class="para">
				For information on storing sensitive string in Password Vault, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Store_and_Retrieve_Encrypted_Sensitive_Strings_in_the_Java_Keystore">Section 7.8, “Store a Sensitive String in the Password Vault”</a>.
			</div></li><li class="step"><div class="para">
				Configure JBoss EAP 6 to use the Password Vault.
			</div><div class="para">
				For information on configuring JBoss EAP 6 to use the Password Vault, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Configure_the_Enterprise_Application_Platform_to_Use_the_Password_Vault1">Section 7.6, “Configure JBoss EAP 6 to Use the Password Vault”</a>. For custom implementation, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Configure_JBoss_EAP_6_to_Use_a_Custom_Implementation_of_the_Password_Vault">Section 7.7, “Configure JBoss EAP 6 to Use a Custom Implementation of the Password Vault”</a>.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					To use an encrypted sensitive string in configuration, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Use_an_Encrypted_Sensitive_String_in_Configuration">Section 7.9, “Use an Encrypted Sensitive String in Configuration”</a>.
				</div><div class="para">
					To use an encrypted sensitive string in an application, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Store_and_Resolve_Sensitive_Strings_In_Your_Applications1">Section 7.10, “Use an Encrypted Sensitive String in an Application”</a>.
				</div><div class="para">
					To verify a sensitive string in Password Vault, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Check_if_a_Sensitive_String_is_in_the_Password_Vault">Section 7.11, “Check if a Sensitive String is in the Password Vault”</a>.
				</div><div class="para">
					To remove a sensitive string from Password Vault, refer <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Remove_a_Sensitive_String_from_the_Password_Vault">Section 7.12, “Remove a Sensitive String from the Password Vault”</a>.
				</div></div></div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+42241-732956+%5BLatest%5D&amp;comment=Title%3A+Configure+and+Use+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42241-732956+16+Dec+2014+03%3A52+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Create_a_Java_Keystore_to_Store_Sensitive_Strings">
      ⁠</a>7.3. Create a Java Keystore to Store Sensitive Strings</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				The <code class="command">keytool</code> utility, provided by the Java Runtime Environment (JRE). Locate the path for the file, which on Red Hat Enterprise Linux is <code class="filename">/usr/bin/keytool</code>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			JCEKS keystore implementations differ between Java vendors so you must generate the keystore using the <code class="command">keytool</code> utility from the same vendor as the JDK you use.
		</div><div class="para">
			Using a keystore generated by the <code class="command">keytool</code> from one vendor's JDK in a JBoss EAP instance running on a JDK from a different vendor results in the following exception:
		</div><pre class="screen">java.io.IOException: com.sun.crypto.provider.SealedObjectForKeyProtector</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772549716560">
      ⁠</a><p class="title"><strong>Procedure 7.2. Set up a Java Keystore</strong></p><ol class="1"><li class="step"><p class="title"><strong>Create a directory to store your keystore and other encrypted information.</strong></p><div class="para">
				Create a directory to store your keystore and other important information. The rest of this procedure assumes that the directory is <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/</code>. Since this directory will contain sensitive information it should be accessible to only limited users. At a minimum the user account under which JBoss EAP is running requires read-write access.
			</div></li><li class="step"><p class="title"><strong>Determine the parameters to use with <code class="command">keytool</code> utility.</strong></p><div class="para">
				Decide on values for the following parameters:
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">alias</span></dt><dd><div class="para">
							The alias is a unique identifier for the vault or other data stored in the keystore. Aliases are case-insensitive.
						</div></dd><dt><span class="term"> storetype </span></dt><dd><div class="para">
							The storetype specifies the keystore type. The value <code class="literal">jceks</code> is recommended.
						</div></dd><dt><span class="term">keyalg</span></dt><dd><div class="para">
							The algorithm to use for encryption. Use the documentation for your JRE and operating system to see which other choices may be available to you.
						</div></dd><dt><span class="term">keysize</span></dt><dd><div class="para">
							The size of an encryption key impacts how difficult it is to decrypt through brute force. For information on appropriate values, see the documentation distributed with the <code class="command">keytool</code> utility.
						</div></dd><dt><span class="term"> storepass </span></dt><dd><div class="para">
							The value of <code class="literal">storepass</code> is the password is used to authenticate to the keystore so that the key can be read. The password must be at least 6 characters long and must be provided when the keystore is accessed. If you omit this parameter, you will be prompted to enter it when you execute the command.
						</div></dd><dt><span class="term"> keypass </span></dt><dd><div class="para">
							The value of <code class="literal">keypass</code> is the password used to access the specific key and must match the value of the <code class="literal">storepass</code> parameter.
						</div></dd><dt><span class="term"> validity </span></dt><dd><div class="para">
							The value of <code class="literal">validity</code> is the period (in days) for which the key will be valid.
						</div></dd><dt><span class="term">keystore</span></dt><dd><div class="para">
							The value of <code class="literal">keystore</code> is the filepath and filename in which the keystore's values are to be stored. The keystore file is created when data is first added to it.
						</div><div class="para">
							Ensure you use the correct file path separator: <code class="literal">/</code> (forward slash) for Red Hat Enterprise Linux and similar operating systems, <code class="literal">\</code> (backslash) for Microsoft Windows Server.
						</div></dd></dl></div><div class="para">
				The <code class="command">keytool</code> utility has many other options. See the documentation for your JRE or your operating system for more details.
			</div></li><li class="step"><p class="title"><strong>Run the <code class="command">keytool</code> command</strong></p><div class="para">
				Launch your operating system's command line interface and run the <code class="command">keytool</code> utility, supplying the information that you gathered.
			</div></li></ol></div><div class="example"><a id="idm139772549108288">
      ⁠</a><p class="title"><strong>Example 7.1. Create a Java Keystore</strong></p><div class="example-contents"><pre class="screen">$ keytool -genseckey -alias <em class="replaceable">vault</em> -storetype jceks -keyalg AES -keysize 128 -storepass <em class="replaceable">vault22</em> -keypass <em class="replaceable">vault22</em> -validity 730 -keystore <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/vault.keystore</code></pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			In this a keystore has been created in the file <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/vault.keystore</code>. It stores a single key, with the alias <code class="literal">vault</code>, which will be used to store encrypted strings, such as passwords, for JBoss EAP.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+5353-717117+%5BLatest%5D&amp;comment=Title%3A+Create+a+Java+Keystore+to+Store+Sensitive+Strings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5353-717117+16+Oct+2014+22%3A51+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">
      ⁠</a>7.4. Initialize the Password Vault</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Create_a_Java_Keystore_to_Store_Sensitive_Strings">Section 7.3, “Create a Java Keystore to Store Sensitive Strings”</a>
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			The Password Vault can be initialized either interactively, where you are prompted for each parameter's value, or non-interactively, where you provide all parameters' values on the commmand line. Each method gives the same result, so choose whichever method you prefer.
		</div><div class="para">
		Refer to the following list when using either method.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Keystore URL (KEYSTORE_URL) </span></dt><dd><div class="para">
					The file system path or URI of the keystore file. The examples use <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/<code class="literal">vault.keystore</code></code>.
				</div></dd><dt><span class="term"> Keystore password (KEYSTORE_PASSWORD) </span></dt><dd><div class="para">
					The password used to access the keystore.
				</div></dd><dt><span class="term"> Salt (SALT) </span></dt><dd><div class="para">
					The <code class="literal">salt</code> value is a random string of eight characters used, together with the iteration count, to encrypt the content of the keystore.
				</div></dd><dt><span class="term"> Keystore Alias (KEYSTORE_ALIAS) </span></dt><dd><div class="para">
					The alias by which the keystore is known.
				</div></dd><dt><span class="term"> Iteration Count (ITERATION_COUNT) </span></dt><dd><div class="para">
					The number of times the encryption algorithm is run.
				</div></dd><dt><span class="term"> Directory to store encrypted files (ENC_FILE_DIR) </span></dt><dd><div class="para">
					The path in which the encrypted files are to be stored. This is typically the directory containing the password vault.
				</div><div class="para">
					It is convenient but not mandatory to store all of your encrypted information in the same place as the key store. This directory should be only accessible to limited users. At a minimum the user account under which JBoss EAP is running requires read-write access. If you followed <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Create_a_Java_Keystore_to_Store_Sensitive_Strings">Section 7.3, “Create a Java Keystore to Store Sensitive Strings”</a>, your keystore is in a directory called <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/</code>.
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
						The trailing backslash or forward slash on the directory name is required. Ensure you use the correct file path separator: / (forward slash) for Red Hat Enterprise Linux and similar operating systems, \ (backslash) for Microsoft Windows Server.
					</div></div></div></dd><dt><span class="term"> Vault Block (VAULT_BLOCK) </span></dt><dd><div class="para">
					The name to be given to this block in the password vault. Choose a value which is significant to you.
				</div></dd><dt><span class="term"> Attribute (ATTRIBUTE) </span></dt><dd><div class="para">
					The name to be given to the attribute being stored. Choose a value which is significant to you. For example, you could choose a name which you associate with a datasource.
				</div></dd><dt><span class="term"> Security Attribute (SEC-ATTR) </span></dt><dd><div class="para">
					The password which is being stored in the password vault.
				</div></dd></dl></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772561257776">
      ⁠</a><p class="title"><strong>Procedure 7.3. Run the Password Vault Command Interactively</strong></p><div class="para">
			Use this method if you would prefer to be prompted for the value of each parameter.
		</div><ol class="1"><li class="step"><p class="title"><strong> Launch the Password Vault command interactively. </strong></p><div class="para">
				Launch your operating system's command line interface and run <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <code class="literal">0</code> (zero).
			</div></li><li class="step"><p class="title"><strong>Complete the prompted parameters.</strong></p><div class="para">
				Follow the prompts to input the required parameters.
			</div></li><li class="step"><p class="title"><strong>Make a note of the masked password information.</strong></p><div class="para">
				The masked password, salt, and iteration count are printed to standard output. Make a note of them in a secure location. They are required to add entries to the Password Vault. Access to the keystore file and these values could allow an attacker access to obtain access to sensitive information in the Password Vault.
			</div></li><li class="step"><p class="title"><strong>Exit the interactive console.</strong></p><div class="para">
				Type <code class="literal">3</code> (three) to exit the interactive console.
			</div></li></ol></div><div class="example"><a id="idm139772566932944">
      ⁠</a><p class="title"><strong>Example 7.2.  Run the Password Vault command interactively </strong></p><div class="example-contents"><pre class="screen">Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault/                        
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password: vault22
Enter Keystore password again: vault22
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Oct 17, 2014 12:58:11 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************
Vault is initialized and ready for use
Handshake with Vault complete
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772560282672">
      ⁠</a><p class="title"><strong>Procedure 7.4. Run the Password Vault Command Non-interactively</strong></p><div class="para">
			Use this method if you would prefer to provide all parameters' values at once.
		</div><ul><li class="step"><div class="para">
				Launch your operating system's command line interface and run the Password Vault command. Refer to the list in the Overview, substituting the placeholder values with your preferred values.
			</div><div class="para">
				Use <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server).
			</div><pre class="screen">
vault.sh --keystore <em class="replaceable">KEYSTORE_URL</em> --keystore-password <em class="replaceable">KEYSTORE_PASSWORD</em> --alias <em class="replaceable">KEYSTORE_ALIAS</em> --vault-block <em class="replaceable">VAULT_BLOCK</em> --attribute <em class="replaceable">ATTRIBUTE</em> --sec-attr <em class="replaceable">SEC-ATTR</em> --enc-dir <em class="replaceable">ENC_FILE_DIR</em> --iteration <em class="replaceable">ITERATION_COUNT</em> --salt <em class="replaceable">SALT</em></pre><div class="example"><a id="idm139772538851472">
      ⁠</a><p class="title"><strong>Example 7.3. Run the Password Vault command non-interactively</strong></p><div class="example-contents"><pre class="screen">vault.sh --keystore <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/vault.keystore</code> --keystore-password <em class="parameter"><code>vault22</code></em> --alias <em class="parameter"><code>vault</code></em> --vault-block <em class="parameter"><code>vb</code></em> --attribute <em class="parameter"><code>password</code></em> --sec-attr <em class="parameter"><code>0penS3sam3</code></em> --enc-dir <em class="parameter"><code><em class="replaceable">EAP_HOME</em>/vault/</code></em> --iteration <em class="parameter"><code>120</code></em> --salt <em class="parameter"><code>1234abcd</code></em></pre><div class="para">
					Command output
				</div><pre class="screen">=========================================================================

  JBoss Vault

  JBOSS_HOME: EAP_HOME

  JAVA: java

=========================================================================

Oct 17, 2014 2:23:43 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Secured attribute value has been stored in vault. 
Please make note of the following:
********************************************
Vault Block:vb
Attribute Name:password
Configuration should be done as follows:
VAULT::vb::password::1
********************************************
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************

</pre></div></div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Your keystore password has been masked for use in configuration files and deployments. In addition, your vault is initialized and ready to use.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+5357-741819+%5BLatest%5D&amp;comment=Title%3A+Initialize+the+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5357-741819+06+Feb+2015+01%3A12+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Obtain_Keystore_Password_From_External_Source">
      ⁠</a>7.5. Obtain Keystore Password From External Source</h1></div></div></div><div class="para">
		You can also the use the EXT, EXTC, CMD, CMDC or CLASS methods in Vault configuration for obtaining the Java keystore password. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;vault-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"KEYSTORE_PASSWORD"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"[here]"</span>
</pre>

	</div><div class="para">
		The description for the methods are listed as:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				<code class="code">{EXT}...</code>: Refers to the exact command, where ‘…’ is the exact command. For example: <code class="code">{EXT}/usr/bin/getmypassword --section 1 --query company</code>, run the <code class="code">/usr/bin/getmypassword</code> command, which displays the password on standard output and use it as password for Security Vault's keystore. In this example, the command is using two options: --section 1 and --query company.
			</div></li><li class="listitem"><div class="para">
				<code class="code">{EXTC[:expiration_in_millis]}...</code>: Refers to the exact command, where the '...' is the exact command line that is passed to the Runtime.exec(String) method to execute a platform command. The first line of the command output is used as the password. EXTC variant caches the passwords for expiration_in_millis milliseconds. Default cache expiration is 0 (zero), meaning items in the cache never expire. For example: <code class="code">{EXTC:120000}/usr/bin/getmypassword --section 1 --query company</code> Verify if cache contains <code class="code">/usr/bin/getmypassword</code> output, if it contains the output then use it. If it does not contain the output, run the command to output it to cache and use it. In this example, the cache expires in 2 minute (120000 milliseconds).
			</div></li><li class="listitem"><div class="para">
				<code class="code">{CMD}...</code> or <code class="code">{CMDC[:expiration_in_millis]}...</code>: The general command is a string delimited by ',' where the first part is the actual command and further parts represents the parameters. The comma can be backslashed to keep it as a part of the parameter. For example, <code class="code">{CMD}/usr/bin/getmypassword,--section,1,--query,company</code>
			</div></li><li class="listitem"><div class="para">
				<code class="code">{CLASS[@jboss_module_spec]}classname[:ctorargs]</code>: Where the '[:ctorargs]' is an optional string delimited by the ':' from the classname is passed to the classname ctor. The ctorargs is a comma delimited list of strings. For example, <code class="code">{CLASS@org.test.passwd}org.test.passwd.ExternamPassworProvider</code>. In this example, we load <code class="code">org.test.passwd.ExternamPassworProvider</code> class from <code class="code">org.test.passwd</code> module and use the <code class="code"> toCharArray()</code> method to get the password. If <code class="code">toCharArray()</code> is not available use <code class="code">toString()</code> method. The <code class="code">org.test.passwd.ExternamPassworProvider</code> class must have the default constructor.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+42239-738014+%5BLatest%5D&amp;comment=Title%3A+Obtain+Keystore+Password+From+External+Source%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42239-738014+23+Jan+2015+00%3A29+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_the_Enterprise_Application_Platform_to_Use_the_Password_Vault1">
      ⁠</a>7.6. Configure JBoss EAP 6 to Use the Password Vault</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			Before you can mask passwords and other sensitive attributes in configuration files, you need to make JBoss EAP 6 aware of the password vault which stores and decrypts them.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772557772528">
      ⁠</a><p class="title"><strong>Procedure 7.5. Enable the Password Vault</strong></p><ul><li class="step"><p class="title"><strong/></p><div class="para">
				Run the following Management CLI command, substituting the placeholder values with those from the output of the Password Vault command in <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					If you use Microsoft Windows Server, use two backslashes (<code class="literal">\\</code>) in the file path where you would normally use one. For example, <code class="literal">C:\\data\\vault\\vault.keystore</code>. This is because a single backslash character (<code class="literal">\</code>) is used for character escaping.
				</div></div></div><pre class="screen">/core-service=vault:add(vault-options=[("KEYSTORE_URL" =&gt; "<em class="replaceable">PATH_TO_KEYSTORE</em>"), ("KEYSTORE_PASSWORD" =&gt; "<em class="replaceable">MASKED_PASSWORD</em>"), ("KEYSTORE_ALIAS" =&gt; "<em class="replaceable">ALIAS</em>"), ("SALT" =&gt; "<em class="replaceable">SALT</em>"),("ITERATION_COUNT" =&gt; "<em class="replaceable">ITERATION_COUNT</em>"), ("ENC_FILE_DIR" =&gt; "<em class="replaceable">ENC_FILE_DIR</em>")])</pre></li></ul></div><div class="example"><a id="idm139772544781776">
      ⁠</a><p class="title"><strong>Example 7.4. Enable the Password Vault</strong></p><div class="example-contents"><div class="para">
			
<pre class="screen">/core-service=vault:add(vault-options=[("KEYSTORE_URL" =&gt; "<em class="replaceable">EAP_HOME</em>/vault/vault.keystore"), ("KEYSTORE_PASSWORD" =&gt; "MASK-5dOaAVafCSd"), ("KEYSTORE_ALIAS" =&gt; "vault"), ("SALT" =&gt; "1234abcd"),("ITERATION_COUNT" =&gt; "120"), ("ENC_FILE_DIR" =&gt; "<em class="replaceable">EAP_HOME</em>/vault/")])</pre>

		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			JBoss EAP 6 is configured to decrypt masked strings stored in the Password Vault. To add strings to the Password Vault and use them in your configuration, see <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Store_and_Retrieve_Encrypted_Sensitive_Strings_in_the_Java_Keystore">Section 7.8, “Store a Sensitive String in the Password Vault”</a>.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+5358-717634+%5BLatest%5D&amp;comment=Title%3A+Configure+JBoss+EAP+6+to+Use+the+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5358-717634+20+Oct+2014+20%3A43+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_JBoss_EAP_6_to_Use_a_Custom_Implementation_of_the_Password_Vault">
      ⁠</a>7.7. Configure JBoss EAP 6 to Use a Custom Implementation of the Password Vault</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			You can use your own implementation of <code class="code">SecurityVault</code> to mask passwords and other sensitive attributes in configuration files.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772535087712">
      ⁠</a><p class="title"><strong>Procedure 7.6. Use a Custom Implementation of the Password Vault</strong></p><ol class="1"><li class="step"><div class="para">
				Create a class that implements the interface <code class="code">SecurityVault</code>.
			</div></li><li class="step"><div class="para">
				Create a module containing the class from the previous step, and specify a dependency on <code class="code">org.picketbox</code> where the interface is <code class="code">SecurityVault</code>.
			</div></li><li class="step"><div class="para">
				Enable the custom Password Vault in the JBoss EAP server configuration by adding the vault element with the following attributes:
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"> code </span></dt><dd><div class="para">
							The fully qualified name of class that implements <code class="code">SecurityVault</code>.
						</div></dd><dt><span class="term"> module </span></dt><dd><div class="para">
							The name of the module that contains the custom class.
						</div></dd></dl></div><div class="para">
				Optionally, you can use <code class="code">vault-options</code> parameters to initialize the custom class for a Password Vault.
			</div><div class="example"><a id="idm139772562098352">
      ⁠</a><p class="title"><strong>Example 7.5.  Use <code class="code">vault-options</code> Parameters to Initialize the Custom Class </strong></p><div class="example-contents"><pre class="screen">/core-service=vault:add(code="<em class="replaceable">custom.vault.implementation.CustomSecurityVault</em>", module="<em class="replaceable">custom.vault.module</em>", vault-options=[("KEYSTORE_URL" =&gt; "<em class="replaceable">PATH_TO_KEYSTORE</em>"), ("KEYSTORE_PASSWORD" =&gt; "<em class="replaceable">MASKED_PASSWORD</em>"), ("KEYSTORE_ALIAS" =&gt; "<em class="replaceable">ALIAS</em>"), ("SALT" =&gt; "<em class="replaceable">SALT</em>"),("ITERATION_COUNT" =&gt; "<em class="replaceable">ITERATION_COUNT</em>"), ("ENC_FILE_DIR" =&gt; "<em class="replaceable">ENC_FILE_DIR</em>")])</pre></div></div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			JBoss EAP 6 is configured to decrypt masked strings using a custom implementation of the password vault.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+30621-716527+%5BLatest%5D&amp;comment=Title%3A+Configure+JBoss+EAP+6+to+Use+a+Custom+Implementation+of+the+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=30621-716527+14+Oct+2014+23%3A45+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Store_and_Retrieve_Encrypted_Sensitive_Strings_in_the_Java_Keystore">
      ⁠</a>7.8. Store a Sensitive String in the Password Vault</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			Including passwords and other sensitive strings in plaintext configuration files is a security risk. Store these strings instead in the Password Vault for improved security, where they can then be referenced in configuration files, Management CLI commands and applications in their masked form.
		</div><div class="para">
		Sensitive strings can be store in the Password Vault either interactively, where you are prompted for each parameter's value, or non-interactively, where you provide all parameters' values on the commmand line. Each method gives the same result, so choose whichever method you prefer. For a description of all parameters, see <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Configure_the_Enterprise_Application_Platform_to_Use_the_Password_Vault1">Section 7.6, “Configure JBoss EAP 6 to Use the Password Vault”</a>
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772486373472">
      ⁠</a><p class="title"><strong>Procedure 7.7. Store a Sensitive String Interactively</strong></p><div class="para">
			Use this method if you would prefer to be prompted for the value of each parameter.
		</div><ol class="1"><li class="step"><p class="title"><strong>Run the Password Vault command</strong></p><div class="para">
				Launch your operating system's command line interface and run the Password Vault command. Use <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <code class="literal">0</code> (zero).
			</div></li><li class="step"><p class="title"><strong>Complete the prompted parameters about the Password Vault</strong></p><div class="para">
				Follow the prompts to input the required authentication parameters. These values must match those provided when the Password Vault was created.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The keystore password must be given in plaintext form, not masked form.
				</div></div></div></li><li class="step"><p class="title"><strong>Complete the prompted parameters about the sensitive string</strong></p><div class="para">
				Enter <code class="literal">0</code> (zero) to start storing the sensitive string. Follow the prompts to input the required parameters.
			</div></li><li class="step"><p class="title"><strong>Make note of the information about the masked string</strong></p><div class="para">
				A message prints to standard output, showing the vault block, attribute name, masked string, and advice about using the string in your configuration. Make note of this information in a secure location. An extract of sample output is as follows:
			</div><pre class="screen">Vault Block:ds_Example1
Attribute Name:password
Configuration should be done as follows:
VAULT::ds_Example1::password::1
</pre></li><li class="step"><p class="title"><strong>Exit the interactive console</strong></p><div class="para">
				Enter <code class="literal">3</code> (three) to exit the interactive console.
			</div></li></ol></div><div class="example"><a id="idm139772558331616">
      ⁠</a><p class="title"><strong>Example 7.6.  Store a Sensitive String Interactively </strong></p><div class="example-contents"><pre class="screen">=========================================================================

  JBoss Vault

  JBOSS_HOME: EAP_HOME/jboss-eap-6.4

  JAVA: java

=========================================================================

**********************************
****  JBoss Vault  ***************
**********************************
Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:11:18:46,086 INFO  [org.jboss.security] (management-handler-thread - 4) PBOX0                                                                  
Enter directory to store encrypted files:EAP_HOME/vault/ 
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password: 
Enter Keystore password again: 
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Oct 21, 2014 11:20:49 AM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************
Vault is initialized and ready for use
Handshake with Vault complete
Please enter a Digit::   0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
0
Task: Store a secured attribute
Please enter secured attribute value (such as password):
Please enter secured attribute value (such as password) again: 
Values match
Enter Vault Block:ds_Example1
Enter Attribute Name:password
Secured attribute value has been stored in vault. 
Please make note of the following:
********************************************
Vault Block:ds_Example1
Attribute Name:password
Configuration should be done as follows:
VAULT::ds_Example1::password::1
********************************************
Please enter a Digit::   0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit

</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772485758032">
      ⁠</a><p class="title"><strong>Procedure 7.8. Store a Sensitive String Non-interactively</strong></p><div class="para">
			Use this method if you would prefer to provide all parameters' values at once.
		</div><ol class="1"><li class="step"><div class="para">
				Launch your operating system's command line interface and run the Password Vault command. Use <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server).
			</div><div class="para">
				Substitute the placeholder values with your own values. The values for parameters <em class="parameter"><code>KEYSTORE_URL</code></em>, <em class="parameter"><code>KEYSTORE_PASSWORD</code></em> and <em class="parameter"><code>KEYSTORE_ALIAS</code></em> must match those provided when the Password Vault was created.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The keystore password must be given in plaintext form, not masked form.
				</div></div></div><pre class="screen"><code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> --keystore <em class="replaceable">KEYSTORE_URL</em> --keystore-password <em class="replaceable">KEYSTORE_PASSWORD</em> --alias <em class="replaceable">KEYSTORE_ALIAS</em> --vault-block <em class="replaceable">VAULT_BLOCK</em> --attribute <em class="replaceable">ATTRIBUTE</em> --sec-attr <em class="replaceable">SEC-ATTR</em> --enc-dir <em class="replaceable">ENC_FILE_DIR</em> --iteration <em class="replaceable">ITERATION_COUNT</em> --salt <em class="replaceable">SALT</em></pre></li><li class="step"><p class="title"><strong>Make note of the information about the masked string</strong></p><div class="para">
				A message prints to standard output, showing the vault block, attribute name, masked string, and advice about using the string in your configuration. Make note of this information in a secure location. An extract of sample output is as follows:
			</div><pre class="screen">Vault Block:vb
Attribute Name:password
Configuration should be done as follows:
VAULT::vb::password::1
</pre></li></ol></div><div class="example"><a id="idm139772497013728">
      ⁠</a><p class="title"><strong>Example 7.7. Run the Password Vault command non-interactively</strong></p><div class="example-contents"><pre class="screen"><code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> --keystore <code class="filename"><em class="replaceable">EAP_HOME</em>/vault/vault.keystore</code> --keystore-password <em class="parameter"><code>vault22</code></em> --alias <em class="parameter"><code>vault</code></em> --vault-block <em class="parameter"><code>vb</code></em> --attribute <em class="parameter"><code>password</code></em> --sec-attr <em class="parameter"><code>0penS3sam3</code></em> --enc-dir <em class="parameter"><code><em class="replaceable">EAP_HOME</em>/vault/</code></em> --iteration <em class="parameter"><code>120</code></em> --salt <em class="parameter"><code>1234abcd</code></em></pre><div class="para">
			Command output
		</div><pre class="screen">=========================================================================

  JBoss Vault

  JBOSS_HOME: EAP_HOME

  JAVA: java

=========================================================================

Oct 22, 2014 9:24:43 AM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Secured attribute value has been stored in vault. 
Please make note of the following:
********************************************
Vault Block:vb
Attribute Name:password
Configuration should be done as follows:
VAULT::vb::password::1
********************************************
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="vault22"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The sensitive string has now been stored in the Password Vault and can be used in configuration files, Management CLI commands and applications in its masked form.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+5359-748093+%5BLatest%5D&amp;comment=Title%3A+Store+a+Sensitive+String+in+the+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5359-748093+20+Mar+2015+12%3A30+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Use_an_Encrypted_Sensitive_String_in_Configuration">
      ⁠</a>7.9. Use an Encrypted Sensitive String in Configuration</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Store_and_Retrieve_Encrypted_Sensitive_Strings_in_the_Java_Keystore">Section 7.8, “Store a Sensitive String in the Password Vault”</a>
			</div></li></ul></div><div class="para">
		Any sensitive string which has been encrypted can be used in a configuration file or Management CLI command in its masked form, providing expressions are allowed.
	</div><div class="para">
		To confirm if expressions are allowed within a particular subsystem, run the following Management CLI command against that subsystem.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Add the prefix <code class="literal">/host=<em class="replaceable">HOST_NAME</em></code> to the command for a managed domain.
		</div></div></div><pre class="programlisting">/core-service=<em class="replaceable">SUBSYSTEM</em>:read-resource-description(recursive=true)</pre><div class="example"><a id="idm139772567814272">
      ⁠</a><p class="title"><strong>Example 7.8.  List the Description of all Resources in the Management Subsystem </strong></p><div class="example-contents"><div class="para">
			
<pre class="screen">/core-service=management:read-resource-description(recursive=true)</pre>

		</div></div></div><div class="para">
		From the output of running this command, look for the value of the <code class="literal">expressions-allowed</code> parameter. If this is <code class="literal">true</code>, then you can use expressions within the configuration of this subsystem.
	</div><div class="para">
		Use the following syntax to replace any plaintext string with the masked form.
	</div><pre class="screen">${VAULT::<em class="replaceable">VAULT_BLOCK</em>::<em class="replaceable">ATTRIBUTE_NAME</em>::<em class="replaceable">MASKED_STRING</em>}</pre><div class="example"><a id="idm139772529513520">
      ⁠</a><p class="title"><strong>Example 7.9.  Datasource Definition Using a Password in Masked Form </strong></p><div class="example-contents"><div class="para">
			In this example the vault block is <code class="literal">ds_ExampleDS</code> and the attribute is <code class="literal">password</code>.
		</div><div class="para">
			
<pre class="screen">
...
  &lt;subsystem xmlns="urn:jboss:domain:datasources:1.0"&gt;
    &lt;datasources&gt;
      &lt;datasource jndi-name="java:jboss/datasources/ExampleDS" enabled="true" use-java-context="true" pool-name="H2DS"&gt;
        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
        &lt;driver&gt;h2&lt;/driver&gt;
        &lt;pool&gt;&lt;/pool&gt;
        &lt;security&gt;
          &lt;user-name&gt;sa&lt;/user-name&gt;
          &lt;password&gt;${VAULT::ds_ExampleDS::password::1}&lt;/password&gt;
        &lt;/security&gt;
      &lt;/datasource&gt;
      &lt;drivers&gt;
         &lt;driver name="h2" module="com.h2database.h2"&gt;
            &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;
         &lt;/driver&gt;
      &lt;/drivers&gt;
    &lt;/datasources&gt;
  &lt;/subsystem&gt;
...

</pre>

		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+41946-718312+%5BLatest%5D&amp;comment=Title%3A+Use+an+Encrypted+Sensitive+String+in+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=41946-718312+22+Oct+2014+19%3A43+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Store_and_Resolve_Sensitive_Strings_In_Your_Applications1">
      ⁠</a>7.10. Use an Encrypted Sensitive String in an Application</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Store_and_Retrieve_Encrypted_Sensitive_Strings_in_the_Java_Keystore">Section 7.8, “Store a Sensitive String in the Password Vault”</a>
			</div></li></ul></div><div class="para">
		Encrypted strings stored in the Password Vault can be used in your application's source code.
	</div><div class="example"><a id="idm139772564887808">
      ⁠</a><p class="title"><strong>Example 7.10. Servlet Using a Vaulted Password</strong></p><div class="example-contents"><div class="para">
			This example is an extract of a servlet's source code, illustrating the use of a masked password in a datasource definition, instead of the plaintext password. The plaintext version is commented out so that you can see the difference.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">/*@DataSourceDefinition(</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        name = "java:jboss/datasources/LoginDS",</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        user = "sa",</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        password = "sa",</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        className = "org.h2.jdbcx.JdbcDataSource",</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        url = "jdbc:h2:tcp://localhost/mem:test"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">)*/</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">DataSourceDefinition</span>(
<span xmlns="" class="line">​</span>        name = <span xmlns="" class="perl_String">"java:jboss/datasources/LoginDS"</span>,
<span xmlns="" class="line">​</span>        user = <span xmlns="" class="perl_String">"sa"</span>,
<span xmlns="" class="line">​</span>        password = <span xmlns="" class="perl_String">"VAULT::DS::thePass::1"</span>,
<span xmlns="" class="line">​</span>        className = <span xmlns="" class="perl_String">"org.h2.jdbcx.JdbcDataSource"</span>,
<span xmlns="" class="line">​</span>        url = <span xmlns="" class="perl_String">"jdbc:h2:tcp://localhost/mem:test"</span>
<span xmlns="" class="line">​</span>)
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4930-716839+%5BLatest%5D&amp;comment=Title%3A+Use+an+Encrypted+Sensitive+String+in+an+Application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4930-716839+15+Oct+2014+22%3A59+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Check_if_a_Sensitive_String_is_in_the_Password_Vault">
      ⁠</a>7.11. Check if a Sensitive String is in the Password Vault</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Overview </div>
			Before attempting to store or use a sensitive string in the Password Vault it can be useful to first confirm if it is already stored.
		</div><div class="para">
		This check can be done either interactively, where you are prompted for each parameter's value, or non-interactively, where you provide all parameters' values on the commmand line. Each method gives the same result, so choose whichever method you prefer.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772498642992">
      ⁠</a><p class="title"><strong>Procedure 7.9.  Check For a Sensitive String Interactively </strong></p><div class="para">
			Use this method if you would prefer to be prompted for the value of each parameter.
		</div><ol class="1"><li class="step"><p class="title"><strong>Run the Password Vault command</strong></p><div class="para">
				Launch your operating system's command line interface and run the Password Vault command. Use <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <code class="literal">0</code> (zero).
			</div></li><li class="step"><p class="title"><strong>Complete the prompted parameters about the Password Vault</strong></p><div class="para">
				Follow the prompts to input the required authentication parameters. These values must match those provided when the Password Vault was created.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The keystore password must be given in plaintext form, not masked form.
				</div></div></div></li><li class="step"><div class="para">
				Enter <strong class="userinput"><code>1</code></strong> (one) to select “Check whether a secured attribute exists”.
			</div></li><li class="step"><div class="para">
				Enter the name of the vault block in which the sensitive string is stored.
			</div></li><li class="step"><div class="para">
				Enter the name of the sensitive string to be checked.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Result </div>
			If the sensitive string is stored in the vault block specified, a confirmation message like the following will be output.
		</div><pre class="screen">A value exists for (VAULT_BLOCK, ATTRIBUTE)</pre><div class="para">
		If the sensitive string is <span class="emphasis"><em>not</em></span> stored in the specified block, a message like the following will be output.
	</div><pre class="screen">No value has been store for (VAULT_BLOCK, ATTRIBUTE)</pre><div class="example"><a id="idm139772494162656">
      ⁠</a><p class="title"><strong>Example 7.11. Check For a Sensitive String Interactively</strong></p><div class="example-contents"><pre class="screen">=========================================================================

  JBoss Vault

  JBOSS_HOME: EAP_HOME

  JAVA: java

=========================================================================

**********************************
****  JBoss Vault  ***************
**********************************
Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password:
Enter Keystore password again:
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Oct 22, 2014 12:53:56 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************
Vault is initialized and ready for use
Handshake with Vault complete
Please enter a Digit::   0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
1
Task: Verify whether a secured attribute exists
Enter Vault Block:vb
Enter Attribute Name:password
A value exists for (vb, password)
Please enter a Digit::   0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772494161280">
      ⁠</a><p class="title"><strong>Procedure 7.10.  Check For a Sensitive String Non-Interactively </strong></p><div class="para">
			Use this method if you would prefer to provide all parameters' values at once. For a description of all parameters, see <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>.
		</div><ul><li class="step"><div class="para">
				Launch your operating system's command line interface and run the Password Vault command. Use <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server).
			</div><div class="para">
				Substitute the placeholder values with your own values. The values for parameters <em class="parameter"><code>KEYSTORE_URL</code></em>, <em class="parameter"><code>KEYSTORE_PASSWORD-password</code></em> and <em class="parameter"><code>KEYSTORE_ALIAS</code></em> must match those provided when the Password Vault was created.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The keystore password must be given in plaintext form, not masked form.
				</div></div></div><pre class="screen"><code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> --keystore <em class="replaceable">KEYSTORE_URL</em> --keystore-password <em class="replaceable">KEYSTORE_PASSWORD</em> --alias <em class="replaceable">KEYSTORE_ALIAS</em> --check-sec-attr --vault-block <em class="replaceable">VAULT_BLOCK</em> --attribute <em class="replaceable">ATTRIBUTE</em> --enc-dir <em class="replaceable">ENC_FILE_DIR</em> --iteration <em class="replaceable">ITERATION_COUNT</em> --salt <em class="replaceable">SALT</em></pre></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Result </div>
			If the sensitive string is stored in the vault block specified, the following message will be output.
		</div><pre class="screen">Password already exists.</pre><div class="para">
		If the value is <span class="emphasis"><em>not</em></span> stored in the specified block, the following message will be output.
	</div><pre class="screen">Password doesn't exist.</pre><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+42030-748092+%5BLatest%5D&amp;comment=Title%3A+Check+if+a+Sensitive+String+is+in+the+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42030-748092+20+Mar+2015+12%3A28+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Remove_a_Sensitive_String_from_the_Password_Vault">
      ⁠</a>7.12. Remove a Sensitive String from the Password Vault</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			For security reasons it is best to remove sensitive strings from the Password Vault when they are no longer required. For example, if you are decommissioning an application, any sensitive strings used in datasource definitions should be removed at the same time.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Prerequisite </div>
			Before removing a sensitive string from the Password Vault, confirm if it is used in the configuration of JBoss EAP. One method of doing this is to use the ‘grep’ utility to search configuration files for instances of the masked string. On Red Hat Enterprise Linux (and similar operating systems), <code class="command">grep</code> is installed by default but for Microsoft Windows Server it must be installed manually.
		</div><div class="para">
		The Password Vault utility provides two modes: interactive and non-interactive. Interactive mode prompts you for each parameter’s value, where non-interactive mode requires you to provide all parameters’ values in a single command.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772543604672">
      ⁠</a><p class="title"><strong>Procedure 7.11. Remove a Sensitive String Interactively</strong></p><div class="para">
			Use this method if you would prefer to be prompted for the value of each parameter.
		</div><ol class="1"><li class="step"><p class="title"><strong>Run the Password Vault command</strong></p><div class="para">
				Launch your operating system's command line interface and run <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <strong class="userinput"><code>0</code></strong> (zero).
			</div></li><li class="step"><p class="title"><strong> Provide Authentication Details </strong></p><div class="para">
				Follow the prompts to input the required authentication parameters. These values must match those provided when the Password Vault was created.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The keystore password must be given in plaintext form, not masked form.
				</div></div></div></li><li class="step"><div class="para">
				Enter <strong class="userinput"><code>2</code></strong> (two) to choose option <code class="literal">Remove secured attribute</code>.
			</div></li><li class="step"><div class="para">
				Enter the name of the vault block in which the sensitive string is stored.
			</div></li><li class="step"><div class="para">
				Enter the name of the sensitive string to be removed.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			If the sensitive string is successfully removed, a confirmation message like the following will be output.
		</div><pre class="screen">Secured attribute [VAULT_BLOCK::ATTRIBUTE] has been successfully removed from vault</pre><div class="para">
		If the sensitive string is <span class="emphasis"><em>not removed, a message like the following will be output.</em></span>
	</div><pre class="screen">Secured attribute [VAULT_BLOCK::ATTRIBUTE] was not removed from vault, check whether it exist</pre><div class="example"><a id="idm139772550710688">
      ⁠</a><p class="title"><strong>Example 7.12.  Remove a Sensitive String Interactively </strong></p><div class="example-contents"><div class="para">
			
<pre class="screen">**********************************
****  JBoss Vault  ***************
**********************************
Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault/
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password: 
Enter Keystore password again: 
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Dec 23, 2014 1:40:56 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in configuration file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************
Vault is initialized and ready for use
Handshake with Vault complete
Please enter a Digit::  0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
2
Task: Remove secured attribute
Enter Vault Block:craft
Enter Attribute Name:password
Secured attribute [craft::password] has been successfully removed from vault
</pre>

		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139772497604176">
      ⁠</a><p class="title"><strong>Procedure 7.12.  Remove a Sensitive String Non-interactively </strong></p><div class="para">
			Use this method if you would prefer to provide all parameters' values at once. For a description of all parameters, see <a class="xref" href="chap-Secure_Passwords_and_Other_Sensitive_Strings_with_Password_Vault.html#Mask_the_Keystore_Password_and_Initialize_the_Password_Vault.">Section 7.4, “Initialize the Password Vault”</a>.
		</div><ul><li class="step"><div class="para">
				Launch your operating system's command line interface and run the Password Vault command. Use <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\vault.bat</code> (on Microsoft Windows Server).
			</div><div class="para">
				Substitute the placeholder values with your own values. The values for parameters <em class="parameter"><code>KEYSTORE_URL</code></em>, <em class="parameter"><code>KEYSTORE_PASSWORD</code></em> and <em class="parameter"><code>KEYSTORE_ALIAS</code></em> must match those provided when the Password Vault was created.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The keystore password must be given in plaintext form, not masked form.
				</div></div></div><pre class="screen"><code class="filename"><em class="replaceable">EAP_HOME</em>/bin/vault.sh</code> --keystore <em class="replaceable">KEYSTORE_URL</em> --keystore-password <em class="replaceable">KEYSTORE_PASSWORD</em> --alias <em class="replaceable">KEYSTORE_ALIAS</em> --remove-sec-attr --vault-block <em class="replaceable">VAULT_BLOCK</em> --attribute <em class="replaceable">ATTRIBUTE</em> --enc-dir <em class="replaceable">ENC_FILE_DIR</em> --iteration <em class="replaceable">ITERATION_COUNT</em> --salt <em class="replaceable">SALT</em></pre></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			If the sensitive string is successfully removed, a confirmation message like the following will be output.
		</div><pre class="screen">Secured attribute [VAULT_BLOCK::ATTRIBUTE] has been successfully removed from vault</pre><div class="para">
		If the sensitive string is <span class="emphasis"><em>not removed, a message like the following will be output.</em></span>
	</div><pre class="screen">Secured attribute [VAULT_BLOCK::ATTRIBUTE] was not removed from vault, check whether it exist</pre><div class="example"><a id="idm139772548657312">
      ⁠</a><p class="title"><strong>Example 7.13.  Remove a Sensitive String Non-interactively </strong></p><div class="example-contents"><div class="para">
			
<pre class="screen">./vault.sh --keystore EAP_HOME/vault/vault.keystore --keystore-password vault22 --alias vault --remove-sec-attr --vault-block craft --attribute password --enc-dir ../vault/ --iteration 120 --salt 1234abcd
=========================================================================

  JBoss Vault

  JBOSS_HOME: EAP_HOME

  JAVA: java

=========================================================================

Dec 23, 2014 1:54:24 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Secured attribute [craft::password] has been successfully removed from vault
</pre>

		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+42029-734038+%5BLatest%5D&amp;comment=Title%3A+Remove+a+Sensitive+String+from+the+Password+Vault%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42029-734038+22+Dec+2014+23%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></body></html>