<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 16. Migration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Migration">
      ⁠</a>Chapter 16. Migration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_Application_Security_Changes">
      ⁠</a>16.1. Configure Application Security Changes</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Configure security for basic authentication</div>
			In previous versions of JBoss EAP, properties files placed in the <code class="filename"><em class="replaceable">EAP_HOME</em>/server/<em class="replaceable">SERVER_NAME</em>/conf/</code> directory were on classpath and could be easily found by the <code class="code">UsersRolesLoginModule</code>. In JBoss EAP 6, the directory structure has changed. Properties files must be packaged within the application to make them available in the classpath.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			You must stop the server before editing the server configuration file for your change to be persisted on server restart.
		</div></div></div><div class="para">
		To configure security for basic authentication, add a new security domain under <code class="code">security-domains</code> to the <code class="filename">standalone/configuration/standalone.xml</code> or the <code class="filename">domain/configuration/domain.xml</code> server configuration file: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;security-domain</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"example"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;authentication&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;login-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"UsersRoles"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"usersProperties"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    value=</span><span xmlns="" class="perl_String">"${jboss.server.config.dir}/example-users.properties"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"rolesProperties"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    value=</span><span xmlns="" class="perl_String">"${jboss.server.config.dir}/example-roles.properties"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/login-module&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/authentication&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
</pre>

	</div><div class="para">
		If the JBoss EAP 6 instance is running as a standalone server, <code class="varname"> ${jboss.server.config.dir}</code> refers to the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/</code> directory. If the instance is running in a managed domain, <code class="varname"> ${jboss.server.config.dir}</code> refers to the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/</code> directory.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Modify security domain names</div>
			In JBoss EAP 6, security domains no longer use the prefix <code class="code">java:/jaas/</code> in their names. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						For Web applications, you must remove this prefix from the security domain configurations in the <code class="filename">jboss-web.xml</code>.
					</div></li><li class="listitem"><div class="para">
						For Enterprise applications, you must remove this prefix from the security domain configurations in the <code class="filename">jboss-ejb3.xml</code> file. This file has replaced the <code class="filename">jboss.xml</code> in JBoss EAP 6.
					</div></li></ul></div>

		</div><div class="para">

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22930%2C+Security+Guide-6.4-1%0ABuild+Date%3A+15-04-2015+13%3A57%3A35%0ATopic+ID%3A+4945-591678+%5BLatest%5D&amp;comment=Title%3A+Configure+Application+Security+Changes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4945-591678+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></body></html>