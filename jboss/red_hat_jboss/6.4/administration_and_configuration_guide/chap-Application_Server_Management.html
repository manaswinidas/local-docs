<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 2. Application Server Management</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Application_Server_Management">
      ⁠</a>Chapter 2. Application Server Management</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="JBoss_EAP-specific_conventions">
      ⁠</a>2.1. JBoss EAP Documentation Conventions</h1></div></div></div><div class="para">
		All instances of <em class="replaceable">EAP_HOME</em> in this guide refer to the JBoss EAP root installation directory, which depends on the installation method you used.
	</div><div class="variablelist"><p class="title"><strong/></p><dl class="variablelist"><dt><span class="term"> Zip Installation Method </span></dt><dd><div class="para">
					<em class="replaceable">EAP_HOME</em> refers to the directory in which the JBoss EAP ZIP file was extracted.
				</div></dd><dt><span class="term"> Installer Method </span></dt><dd><div class="para">
					<em class="replaceable">EAP_HOME</em> refers to the directory in which you chose to install JBoss EAP.
				</div></dd><dt><span class="term"> RPM Installation Method </span></dt><dd><div class="para">
					<em class="replaceable">EAP_HOME</em> refers to the directory <code class="filename">/usr/share/jbossas</code>.
				</div></dd></dl></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The notation <em class="replaceable">EWS_HOME</em> is used to refer to JBoss EWS installation locations following the same conventions outlined above for JBoss EAP.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+26682-771485+%5BLatest%5D&amp;comment=Title%3A+JBoss+EAP+Documentation+Conventions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=26682-771485+08+Oct+2015+05%3A14+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Start_and_Stop_JBoss_EAP_6">
      ⁠</a>2.2. Start and Stop JBoss EAP 6</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_JBoss_EAP_6">
      ⁠</a>2.2.1. Start JBoss EAP 6</h2></div></div></div><div class="para">
		JBoss EAP runs in one of two modes, Standalone Server or Managed Domain, and is supported on two platforms, Red Hat Enterprise Linux and Microsoft Windows Server. The specific command to start JBoss EAP depends on the underlying platform and the desired mode.
	</div><div class="table"><a id="idm139978472590160">
      ⁠</a><p class="title"><strong>Table 2.1. Commands to start JBoss EAP</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Commands to start JBoss EAP"><colgroup><col style="text-align: left" class="c1"/><col style="text-align: left" class="c2"/><col/></colgroup><thead><tr><th style="text-align: left"> Operating System </th><th style="text-align: left"> Standalone Server </th><th style="text-align: left"> Managed Domain </th></tr></thead><tbody><tr><td style="text-align: left"> Red Hat Enterprise Linux </td><td style="text-align: left"> <code class="command"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh </code> </td><td style="text-align: left"> <code class="command"><em class="replaceable">EAP_HOME</em>/bin/domain.sh </code> </td></tr><tr><td style="text-align: left"> Microsoft Windows Server </td><td style="text-align: left"> <code class="command"><em class="replaceable">EAP_HOME</em>\bin\standalone.bat</code> </td><td style="text-align: left"> <code class="command"><em class="replaceable">EAP_HOME</em>\bin\domain.bat </code> </td></tr></tbody></table></div></div><div class="para">
		For more information on how to start JBoss EAP 6, refer <a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Standalone_Server2">Section 2.2.2, “Start JBoss EAP 6 as a Standalone Server”</a> and <a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Managed_Domain1">Section 2.2.4, “Start JBoss EAP 6 as a Managed Domain”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4598-768543+%5BLatest%5D&amp;comment=Title%3A+Start+JBoss+EAP+6%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4598-768543+26+Aug+2015+05%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_JBoss_Enterprise_Application_Platform_6_as_a_Standalone_Server2">
      ⁠</a>2.2.2. Start JBoss EAP 6 as a Standalone Server</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps to start JBoss EAP 6 as a Standalone Server.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978502960208">
      ⁠</a><p class="title"><strong>Procedure 2.1. Start the Platform Service as a Standalone Server</strong></p><ol class="1"><li class="step"><p class="title"><strong>For Red Hat Enterprise Linux.</strong></p><div class="para">
				Run the command: <code class="command"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh</code>
			</div></li><li class="step"><p class="title"><strong>For Microsoft Windows Server.</strong></p><div class="para">
				Run the command: <code class="command"><em class="replaceable">EAP_HOME</em>\bin\standalone.bat</code>
			</div></li><li class="step"><p class="title"><strong>Optional: Specify additional parameters.</strong></p><div class="para">
				To list all available parameters for the start-up scripts, use the <em class="parameter"><code>-h</code></em> parameter.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JBoss EAP 6 Standalone Server instance starts.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+42-767005+%5BLatest%5D&amp;comment=Title%3A+Start+JBoss+EAP+6+as+a+Standalone+Server%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42-767005+06+Aug+2015+21%3A05+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Running_Multiple_JBoss_EAP_Standalone_Servers_on_a_Single_Machine">
      ⁠</a>2.2.3. Running Multiple JBoss EAP Standalone Servers on a Single Machine</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic describes the steps for running multiple JBoss EAP Standalone servers on a single machine.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978532734144">
      ⁠</a><p class="title"><strong>Procedure 2.2. Run multiple instances of JBoss EAP standalone servers on a single machine</strong></p><ol class="1"><li class="step"><div class="para">
				Create a copy of the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/</code> directory directly under <em class="replaceable">EAP_HOME/</em> for each standalone server. For example, to create a directory for standalone servers <code class="literal">node1</code> and <code class="literal">node2</code>, type the following commands. 
<pre class="screen">$ cd <em class="replaceable">EAP_HOME</em>
$ cp -a ./standalone ./node1 
$ cp -a ./standalone ./node2</pre>

			</div></li><li class="step"><div class="para">
				Start each JBoss EAP standalone instance by specifying the node name, IP address, server directory, optional server configuration file, and optional port offset. The command uses the following syntax: 
<pre class="screen">$ ./bin/standalone.sh -Djboss.node.name=<em class="replaceable">UNIQUE_NODENAME</em> -Djboss.server.base.dir=<em class="replaceable">EAP_HOME/NODE_DIRECTORY</em> -b <em class="replaceable">IP_ADDRESS</em> -bmanagement <em class="replaceable">MGMT_IP_ADDRESS</em> --server-config=<em class="replaceable">SERVER_CONFIGURATION_FILE</em> -Djboss.socket.binding.port-offset=<em class="replaceable">PORT_OFFSET</em></pre>

			</div><ol class="substeps a"><li class="step"><div class="para">
						This example starts <code class="literal">node1</code>
					</div><pre class="screen">$ cd <em class="replaceable">EAP_HOME</em>
$ ./bin/standalone.sh -Djboss.node.name=node1 -Djboss.server.base.dir=<em class="replaceable">EAP_HOME</em>/node1 -b 10.10.10.10 -bmanagement 127.0.0.1
</pre></li><li class="step"><div class="para">
						This example to start <code class="literal">node2</code> depends on whether the machine supports multiple IP addresses.
					</div><ul class="stepalternatives">
						<li class="step"><div class="para">
								If the machine supports multiple IP addresses, the following command is to be used.
							</div><pre class="screen">$ cd <em class="replaceable">EAP_HOME</em>
$ ./bin/standalone.sh -Djboss.node.name=node2 -Djboss.server.base.dir=<em class="replaceable">EAP_HOME</em>/node2 -b 10.10.10.40 -bmanagement 127.0.0.40
</pre></li>
						 <li class="step"><div class="para">
								If the machine does not support multiple IP addresses, you must specify a <code class="literal">jboss.socket.binding.port-offset</code> property to avoid a port conflict.
							</div><pre class="screen">$ cd <em class="replaceable">EAP_HOME</em>
$ ./bin/standalone.sh -Djboss.node.name=node2 -Djboss.server.base.dir=<em class="replaceable">EAP_HOME</em>/node2 -b 10.10.10.10 -bmanagement 127.0.0.1 -Djboss.socket.binding.port-offset=100
</pre></li>

					</ul></li></ol></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			If you would like to manage two nodes at once or two nodes that have the same configuration, you are recommended to run them in a managed domain instead of running a standalone server.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44654-770219+%5BLatest%5D&amp;comment=Title%3A+Running+Multiple+JBoss+EAP+Standalone+Servers+on+a+Single+Machine%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44654-770219+14+Sep+2015+03%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_JBoss_Enterprise_Application_Platform_6_as_a_Managed_Domain1">
      ⁠</a>2.2.4. Start JBoss EAP 6 as a Managed Domain</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Order of Operations</div>
			The domain controller must be started before any slave servers in any server groups in the domain. Use this procedure first on the domain controller, and then on each associated host controller and each other host associated with the domain.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978519607968">
      ⁠</a><p class="title"><strong>Procedure 2.3. Start the Platform Service as a Managed Domain</strong></p><ol class="1"><li class="step"><p class="title"><strong>For Red Hat Enterprise Linux.</strong></p><div class="para">
				Run the command: <code class="command"><em class="replaceable">EAP_HOME</em>/bin/domain.sh</code>
			</div></li><li class="step"><p class="title"><strong>For Microsoft Windows Server.</strong></p><div class="para">
				Run the command: <code class="command"><em class="replaceable">EAP_HOME</em>\bin\domain.bat</code>
			</div></li><li class="step"><p class="title"><strong>Optional: Pass additional parameters to the start-up script.</strong></p><div class="para">
				To list all available parameters for the start-up scripts, use the <em class="parameter"><code>-h</code></em> parameter.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JBoss EAP 6 Managed Domain instance starts.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+43-767006+%5BLatest%5D&amp;comment=Title%3A+Start+JBoss+EAP+6+as+a+Managed+Domain%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=43-767006+06+Aug+2015+21%3A06+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_the_Name_of_a_Host_in_a_Managed_Domain">
      ⁠</a>2.2.5. Configure the Name of a Host in a Managed Domain</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Every host running in a managed domain must have a unique host name. To ease administration and allow for the use of the same host configuration files on multiple hosts, the server uses the following precedence for determining the host name. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
						If set, the <code class="literal">host</code> element <code class="literal">name</code> attribute in the <code class="filename">host.xml</code> configuration file.
					</div></li><li class="listitem"><div class="para">
						The value of the <code class="literal">jboss.host.name</code> system property.
					</div></li><li class="listitem"><div class="para">
						The value that follows the final period (".") character in the <code class="literal">jboss.qualified.host.name</code> system property, or the entire value if there is no final period (".") character.
					</div></li><li class="listitem"><div class="para">
						The value that follows the period (".") character in the <code class="envar">HOSTNAME</code> environment variable for POSIX-based operating systems, the <code class="envar">COMPUTERNAME</code> environment variable for Microsoft Windows, or the entire value if there is no final period (".") character.
					</div></li></ol></div>

		</div><div class="para">
		For information about how to set environment variables, see the documentation for your operating system. For information about how to set system properties, see <a class="xref" href="chap-Management_Interfaces.html#Configure_System_Properties_Using_the_Management_CLI">Section 3.5.11, “Configure System Properties Using the Management CLI”</a>.
	</div><div class="para">
		This topic describes how set the name of the host in the configuration file, using either a system property or a hard-coded name.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978516837760">
      ⁠</a><p class="title"><strong>Procedure 2.4. Configure the Host Name Using a System Property</strong></p><div class="para">

		</div><ol class="1"><li class="step"><div class="para">
				Open the host configuration file for editing, for example, <code class="filename">host.xml</code>.
			</div></li><li class="step"><div class="para">
				Find the <code class="literal">host</code> element in the file, for example: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;host</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"master"</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:1.6"</span><span xmlns="" class="perl_Keyword">&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				If it is present, remove the <code class="code"><code class="literal">name</code>="<em class="replaceable">HOST_NAME</em>"</code> attribute declaration. The <code class="literal">host</code> element should now look like the following example. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;host</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:1.6"</span><span xmlns="" class="perl_Keyword">&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				Start the server passing the <code class="command">-Djboss.host.name</code> argument, for example: 
<pre class="screen"><code class="command">-Djboss.host.name=<em class="replaceable">HOST_NAME</em></code></pre>

			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978443781360">
      ⁠</a><p class="title"><strong>Procedure 2.5. Configure the Host Name Using a Specific Name</strong></p><div class="para">

		</div><ol class="1"><li class="step"><div class="para">
				Start the JBoss EAP slave host using the following syntax: 
<pre class="screen"><code class="command">bin/domain.sh --host-config=<em class="replaceable">HOST_FILE_NAME</em></code></pre>
				 For example: 
<pre class="screen"><code class="command">bin/domain.sh --host-config=host-slave01.xml</code></pre>

			</div></li><li class="step"><div class="para">
				Launch the Management CLI.
			</div></li><li class="step"><div class="para">
				Use the following syntax to replace the host name: 
<pre class="screen"><code class="command">/host=<em class="replaceable">EXISTING_HOST_NAME</em>:write-attribute(name="name",value=<em class="replaceable">UNIQUE_HOST_NAME</em>)</code></pre>
				 For example: 
<pre class="screen"><code class="command">/host=master:write-attribute(name="name",value="host-slave01")</code></pre>
				 You should see the following result. 
<pre class="screen"> "outcome" =&gt; "success"</pre>

			</div><div class="para">
				This modifies the host <code class="literal">name</code> attribute in the <code class="filename">host-slave01.xml</code> file as follows: 
<pre class="screen">&lt;host name="host-slave01" xmlns="urn:jboss:domain:1.6"&gt;</pre>

			</div></li><li class="step"><div class="para">
				You must reload the server configuration using the old host name to complete the process 
<pre class="screen"><code class="command">reload --host=<em class="replaceable">EXISTING_HOST_NAME</em></code></pre>
				 For example: 
<pre class="screen"><code class="command">reload --host=master</code></pre>

			</div></li></ol></div><div class="para">

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+31393-686116+%5BLatest%5D&amp;comment=Title%3A+Configure+the+Name+of+a+Host+in+a+Managed+Domain%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=31393-686116+20+Jul+2014+18%3A14+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_Managed_Domain_on_Two_Machines">
      ⁠</a>2.2.6. Create Managed Domain on Two Machines</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			You may need to configure your firewall to run this example.
		</div></div></div><div class="para">
		You can create managed domain on two machines, wherein one machine is a domain controller and the other machine is a host. For more information, see <a class="xref" href="chap-Introduction.html#Domain_Controller">Section 1.6, “About the Domain Controller”</a>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				IP1 = IP address of the domain controller (Machine 1)
			</div></li><li class="listitem"><div class="para">
				IP2 = IP address of the host (Machine 2)
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978509600304">
      ⁠</a><p class="title"><strong>Procedure 2.6. Create managed domain on two machines</strong></p><ol class="1"><li class="step"><p class="title"><strong>On Machine 1</strong></p><ol class="substeps a"><li class="step"><div class="para">
						Use the add-user.sh script to add management user. For example, <code class="literal">slave01</code>, so the host can authenticate the domain controller. Note the <code class="literal">SECRET_VALUE</code> from the <code class="literal">add-user</code> output.
					</div></li><li class="step"><div class="para">
						Start domain with <code class="filename">host-master.xml</code> config file, which is preconfigured for dedicated domain controller.
					</div></li><li class="step"><div class="para">
						Use <code class="code">-bmanagement=$IP1</code> to make domain controller visible to other machines.
					</div><pre class="screen"><em class="replaceable">EAP_HOME</em>/bin/domain.sh --host-config=host-master.xml -bmanagement=$IP1</pre></li></ol></li><li class="step"><p class="title"><strong>On Machine 2</strong></p><div class="para">

			</div><ol class="substeps a"><li class="step"><div class="para">
						Update <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/host-slave.xml</code> file with user credentials.
					</div><pre class="screen">	&lt;?xml version='1.0' encoding='UTF-8'?&gt;
        &lt;host xmlns="urn:jboss:domain:1.6" name="slave01"&gt;   
        &lt;!-- add user name here --&gt;
         &lt;management&gt;
            &lt;security-realms&gt;
               &lt;security-realm name="ManagementRealm"&gt;
                  &lt;server-identities&gt;
                    &lt;secret value="$SECRET_VALUE" /&gt;   
                    &lt;!-- use secret value from add-user.sh output--&gt;
                  &lt;/server-identities&gt; 
                  ...</pre></li><li class="step"><div class="para">
						Start host.
					</div><pre class="screen"><em class="replaceable">EAP_HOME</em>/bin/domain.sh --host-config=host-slave.xml  -Djboss.domain.master.address=$IP1 -b=$IP2</pre></li></ol></li><li class="step"><p class="title"><strong> Now we can manage the domain. </strong></p><div class="para">
				via CLI:
			</div><pre class="screen">
<em class="replaceable">EAP_HOME</em>/bin/jboss-cli.sh -c --controller=$IP1
</pre><div class="para">
				via Web Console:
			</div><pre class="screen">
http://$IP1:9990
</pre><div class="para">
				Access the server index page:
			</div><pre class="screen">
http://$IP2:8080/
http://$IP2:8230/
</pre></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+40888-767953+%5BLatest%5D&amp;comment=Title%3A+Create+Managed+Domain+on+Two+Machines%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=40888-767953+20+Aug+2015+16%3A44+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_Managed_Domain_on_a_Single_Machine">
      ⁠</a>2.2.7. Create Managed Domain on a Single Machine</h2></div></div></div><div class="para">
		Multiple host controllers can be run on a single machine by using the <code class="literal">jboss.domain.base.dir</code> property.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			It is not supported to configure more than one JBoss EAP host controller as a system service on a single machine.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978464153856">
      ⁠</a><p class="title"><strong>Procedure 2.7. Run Multiple Host Controllers on a Single Machine</strong></p><ol class="1"><li class="step"><div class="para">
				Copy the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain</code> directory for the domain controller. 
<pre class="screen">cp -r <em class="replaceable">EAP_HOME</em>/domain /path/to/domain1</pre>

			</div></li><li class="step"><div class="para">
				Copy the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain</code> directory for a host controller. 
<pre class="screen">cp -r <em class="replaceable">EAP_HOME</em>/domain /path/to/host1</pre>

			</div></li><li class="step"><div class="para">
				Start the domain controller using <code class="filename">/path/to/domain1</code>. 
<pre class="screen"><em class="replaceable">EAP_HOME</em>/bin/domain.sh --host-config=host-master.xml -Djboss.domain.base.dir=/path/to/domain1</pre>

			</div></li><li class="step"><div class="para">
				Start the host controller using <code class="filename">/path/to/host1</code>. 
<pre class="screen"><em class="replaceable">EAP_HOME</em>/bin/domain.sh --host-config=host-slave.xml -Djboss.domain.base.dir=/path/to/host1 -Djboss.domain.master.address=<em class="replaceable">IP_ADDRESS</em> -Djboss.management.native.port=<em class="replaceable">PORT</em></pre>

			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Each instance started in this manner will share the rest of the resources in the base installation directory (i.e. <code class="filename"><em class="replaceable">EAP_HOME/</em>modules/</code>), but use the domain configuration from the directory specified by <code class="literal">jboss.domain.base.dir</code>.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44764-781547+%5BLatest%5D&amp;comment=Title%3A+Create+Managed+Domain+on+a+Single+Machine%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44764-781547+13+Nov+2017+13%3A06+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_the_Enterprise_Application_Platform_with_an_Alternative_Configuration">
      ⁠</a>2.2.8. Start JBoss EAP 6 with an Alternative Configuration</h2></div></div></div><div class="para">
		If you do not specify a configuration file, the server starts with the default file.
	</div><div class="para">
		You can also specify a configuration manually. This process varies depending on whether you are using a Managed Domain or Standalone Server, and operating system.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Before using an alternative configuration file, prepare it using the default configuration as a template.
			</div></li><li class="listitem"><div class="para">
				For Managed Domains, alternative configuration files are stored in the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/</code> directory.
			</div></li><li class="listitem"><div class="para">
				For Standalone Servers, alternative configuration files are stored in the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/</code> directory.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Example configurations</strong></p></div><div class="admonition"><div class="para">
			Example configurations are included in the <code class="filename"><em class="replaceable">EAP_HOME</em>/docs/examples/configs/</code> directory. Use these examples to enable features such as clustering or the Transactions XTS API.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Start the Instance with an Alternative Configuration</div>

		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Standalone server</div>
			For a Standalone Server, provide the configuration filename using the <em class="parameter"><code>--server-config</code></em> switch. The configuration file must be in the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/</code> directory, and you must specify the file path relative to this directory.
		</div><div class="example"><a id="idm139978532490064">
      ⁠</a><p class="title"><strong>Example 2.1. Using an Alternate Configuration file for a Standalone Server in Red Hat Enterprise Linux</strong></p><div class="example-contents"><pre class="screen">
[user@host bin]$ <code class="command">./standalone.sh --server-config=<code class="filename"><em class="replaceable">standalone-alternate.xml</em></code></code></pre><div class="para">
			This example uses the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-alternate.xml</code> configuration file.
		</div></div></div><div class="example"><a id="idm139978450962416">
      ⁠</a><p class="title"><strong>Example 2.2. Using an Alternate Configuration file for a Standalone Server in Microsoft Windows Server</strong></p><div class="example-contents"><pre class="screen">
C:\<em class="replaceable">EAP_HOME</em>\bin&gt; <code class="command">standalone.bat --server-config=<code class="filename"><em class="replaceable">standalone-alternate.xml</em></code></code></pre><div class="para">
			This example uses the <code class="filename"><em class="replaceable">EAP_HOME</em>\standalone\configuration\standalone-alternative.xml</code> configuration file.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Managed Domain</div>
			For a Managed Domain, provide the configuration filename using the <em class="parameter"><code>--domain-config</code></em> switch. The configuration file must be in the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/</code> directory, and you need to specify the path relative to that directory.
		</div><div class="example"><a id="idm139978515765200">
      ⁠</a><p class="title"><strong>Example 2.3. Using an Alternate Configuration file for a Managed Domain in Red Hat Enterprise Linux</strong></p><div class="example-contents"><pre class="screen">
[user@host bin]$ <code class="command">./domain.sh --domain-config=<code class="filename"><em class="replaceable">domain-alternate.xml</em></code></code></pre><div class="para">
			This example uses the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain-alternate.xml</code> configuration file.
		</div></div></div><div class="example"><a id="idm139978445334288">
      ⁠</a><p class="title"><strong>Example 2.4. Using an Alternate Configuration file for a Managed Domain in Microsoft Windows Server</strong></p><div class="example-contents"><pre class="screen">
C:\<em class="replaceable">EAP_HOME</em>\bin&gt; <code class="command">domain.bat --domain-config=<code class="filename"><em class="replaceable">domain-alternate.xml</em></code></code>

</pre><div class="para">
			This example uses the <code class="filename"><em class="replaceable">EAP_HOME</em>\domain\configuration\domain-alternate.xml</code> configuration file.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+309-766789+%5BLatest%5D&amp;comment=Title%3A+Start+JBoss+EAP+6+with+an+Alternative+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=309-766789+05+Aug+2015+07%3A18+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Stop_JBoss_Enterprise_Application_Platform_6">
      ⁠</a>2.2.9. Stop JBoss EAP 6</h2></div></div></div><div class="para">
		The way that you stop JBoss EAP 6 depends on how it was started. This task covers stopping an instance that was started interactively, stopping an instance that was started by a service, and stopping an instance that was forked into the background by a script.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			For information on how to stop a server or server group in a Managed Domain see <a class="xref" href="chap-Application_Server_Management.html#Stop_a_Server_Using_the_Management_Console1">Section 2.3.3, “Stop a Server Using the Management Console”</a>. For information on how to stop a server using the Management CLI, see <a class="xref" href="chap-Application_Server_Management.html#Start_and_Stop_Servers1">Section 2.3.1, “Start and Stop Servers Using the Management CLI”</a>.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978539236880">
      ⁠</a><p class="title"><strong>Procedure 2.8. Stop an instance of JBoss EAP 6</strong></p><ul><li class="step"><p class="title"><strong>Stop an instance which was started interactively from a command prompt.</strong></p><div class="para">
				Press <span class="keycap"><strong>Ctrl-C</strong></span> in the terminal where JBoss EAP 6 is running.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978539875520">
      ⁠</a><p class="title"><strong>Procedure 2.9. Stop an instance which was started as an operating system service.</strong></p><div class="para">
			Depending on the operating system, use one of the following procedures.
		</div><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Red Hat Enterprise Linux</strong></p><div class="para">
						For Red Hat Enterprise Linux, if you have written a service script, use its <code class="literal">stop</code> facility. This needs to be written into the script. Then you can use <code class="command">service <em class="replaceable">scriptname</em> stop</code>, where <em class="replaceable">scriptname</em> is the name of the script.
					</div></li>
				 <li class="step"><p class="title"><strong>Microsoft Windows Server</strong></p><div class="para">
						In Microsoft Windows, use the <code class="command">net service</code> command, or stop the service from the <span class="guilabel"><strong>Services</strong></span> applet in the Control Panel.
					</div></li>

			</ul></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978535282272">
      ⁠</a><p class="title"><strong>Procedure 2.10. Stop an instance which is running in the background (Red Hat Enterprise Linux)</strong></p><ol class="1"><li class="step"><div class="para">
				Obtain the process ID (<abbr class="abbrev">PID</abbr>) of the process:
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>If only a single instance is running (standalone mode)</strong></p><div class="para">
						Either of the following commands will return the <abbr class="abbrev">PID</abbr> of a single instance of JBoss EAP 6:
					</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
								<code class="command">pidof java</code>
							</div></li><li class="listitem"><div class="para">
								<code class="command">jps</code>
							</div><div class="para">
								(The <code class="command">jps</code> command will return an ID for two processes; one for <code class="literal">jboss-modules.jar</code> and one for <span class="application"><strong>jps</strong></span> itself. Use the ID for <code class="literal">jboss-modules.jar</code> to stop the EAP instance)
							</div></li></ul></div></li>
				 <li class="step"><p class="title"><strong>If multiple EAP instances are running (domain mode)</strong></p><div class="para">
						Identifying the correct process to end if more than one instance of EAP is running requires more comprehensive commands be used.
					</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
								The <code class="command">jps</code> command can be used in verbose mode to provide more information about the java processes it finds.
							</div><div class="para">
								Below is an abridged output from a verbose <code class="command">jps</code> command identifying the different EAP processes running by <abbr class="abbrev">PID</abbr> and role:
							</div><pre class="screen">$ jps -v
<span class="bold bold"><strong>12155</strong></span> jboss-modules.jar <span class="bold bold"><strong>-D[Server:server-one]</strong></span> -XX:PermSize=256m -XX:MaxPermSize=256m -Xms1303m 
...

<span class="bold bold"><strong>12196</strong></span> jboss-modules.jar <span class="bold bold"><strong>-D[Server:server-two]</strong></span> -XX:PermSize=256m -XX:MaxPermSize=256m -Xms1303m 
...

<span class="bold bold"><strong>12096</strong></span> jboss-modules.jar <span class="bold bold"><strong>-D[Host Controller]</strong></span> -Xms64m -Xmx512m -XX:MaxPermSize=256m 
...

<span class="bold bold"><strong>11872</strong></span> <span class="bold bold"><strong>Main</strong></span> -Xms128m -Xmx750m -XX:MaxPermSize=350m -XX:ReservedCodeCacheSize=96m -XX:+UseCodeCacheFlushing 
...

<span class="bold bold"><strong>11248</strong></span> jboss-modules.jar <span class="bold bold"><strong>-D[Standalone]</strong></span> -XX:+UseCompressedOops -verbose:gc 
...

<span class="bold bold"><strong>12892</strong></span> <span class="bold bold"><strong>Jps</strong></span> 
...

<span class="bold bold"><strong>12080</strong></span> jboss-modules.jar <span class="bold bold"><strong>-D[Process Controller]</strong></span> -Xms64m -Xmx512m -XX:MaxPermSize=256m 
...
</pre></li><li class="listitem"><div class="para">
								The <code class="command">ps aux</code> command can also be used to return information about multiple EAP instances.
							</div><div class="para">
								Below is an abridged output from a verbose <code class="command">ps aux</code> command identifying the different EAP processes running by <abbr class="abbrev">PID</abbr> and role:
							</div><pre class="screen">$ ps aux | grep java
username <span class="bold bold"><strong>12080</strong></span>  0.1  0.9 3606588 36772 pts/0   Sl+  10:09   0:01 /path/to/java <span class="bold bold"><strong>-D[Process Controller]</strong></span> -server -Xms128m -Xmx128m -XX:MaxPermSize=256m 
...

username <span class="bold bold"><strong>12096</strong></span>  1.0  4.1 3741304 158452 pts/0  Sl+  10:09   0:13 /path/to/java <span class="bold bold"><strong>-D[Host Controller]</strong></span> -Xms128m -Xmx128m -XX:MaxPermSize=256m 
...

username <span class="bold bold"><strong>12155</strong></span>  1.7  8.9 4741800 344224 pts/0  Sl+  10:09   0:22 /path/to/java <span class="bold bold"><strong>-D[Server:server-one]</strong></span> -XX:PermSize=256m -XX:MaxPermSize=256m -Xms1000m -Xmx1000m -server -
...

username <span class="bold bold"><strong>12196</strong></span>  1.8  9.4 4739612 364436 pts/0  Sl+  10:09   0:22 /path/to/java <span class="bold bold"><strong>-D[Server:server-two]</strong></span> -XX:PermSize=256m -XX:MaxPermSize=256m -Xms1000m -Xmx1000m -server 
...
</pre></li></ul></div><div class="para">
						In the above examples, the <span class="bold bold"><strong>Process Controller</strong></span> processes are the processes to stop in order to stop the entire domain.
					</div><div class="para">
						The <code class="command">grep</code> utility can be used with either of these commands to identify the <span class="bold bold"><strong>Process Controller</strong></span>:
					</div><pre class="programlisting"><code class="command">jps -v | grep "Process Controller"</code></pre><pre class="programlisting"><code class="command">ps aux | grep "Process Controller"</code></pre></li>

			</ul></li><li class="step"><div class="para">
				Send the process the <code class="literal">TERM</code> signal, by running <code class="command">kill <em class="replaceable">PID</em></code>, where <em class="replaceable">PID</em> is the process ID identified by one of the commands above.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Each of these alternatives shuts JBoss EAP 6 down cleanly so that data is not lost.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44-766793+%5BLatest%5D&amp;comment=Title%3A+Stop+JBoss+EAP+6%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44-766793+05+Aug+2015+07%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Reference_of_Switches_and_Arguments_to_pass_at_Server_Runtime1">
      ⁠</a>2.2.10. Reference of Switches and Arguments to pass at Server Runtime</h2></div></div></div><div class="para">
		The application server startup script accepts arguments and switches at runtime. This allows the server to start under alternative configurations to those defined in the <code class="filename">standalone.xml</code>, <code class="filename">domain.xml</code>, and <code class="filename">host.xml</code> configuration files.
	</div><div class="para">
		Alternative configurations might include starting the server with an alternative socket bindings set or a secondary configuration.
	</div><div class="para">
		The available parameters list can be accessed by passing the help switch <em class="parameter"><code>-h</code></em> or <em class="parameter"><code>--help</code></em> at startup.
	</div><div class="table"><a id="idm139978515067152">
      ⁠</a><p class="title"><strong>Table 2.2. Runtime Switches and Arguments</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="Runtime Switches and Arguments"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="17%" style="text-align: left" class="c2"/><col width="50%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Argument or Switch </th><th style="text-align: left"> Mode </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="command">--admin-only</code> </td><td style="text-align: left"> Standalone </td><td style="text-align: left"> Set the server's running type to <code class="literal">ADMIN_ONLY</code>. This will cause it to open administrative interfaces and accept management requests, but not start other runtime services or accept end user requests. </td></tr><tr><td style="text-align: left"> <code class="command">--admin-only</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Set the host controller's running type to <code class="literal">ADMIN_ONLY</code> causing it to open administrative interfaces and accept management requests but not start servers or, if this host controller is the master for the domain, accept incoming connections from slave host controllers. </td></tr><tr><td style="text-align: left"> <code class="command">-b=&lt;value&gt;</code>, <code class="command">-b &lt;value&gt;</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Set system property <code class="literal">jboss.bind.address</code>, which is used in configuring the bind address for the public interface. This defaults to 127.0.0.1 if no value is specified. See the <code class="literal">-b&lt;interface&gt;=&lt;value&gt;</code> entry for setting the bind address for other interfaces. </td></tr><tr><td style="text-align: left"> <code class="command">-b&lt;interface&gt;=&lt;value&gt;</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Set system property <code class="literal">jboss.bind.address.&lt;interface&gt;</code> to the given value. For example, <code class="literal">-bmanagement=<em class="replaceable">IP_ADDRESS</em></code> </td></tr><tr><td style="text-align: left"> <code class="command">--backup</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Keep a copy of the persistent domain configuration even if this host is not the Domain Controller. </td></tr><tr><td style="text-align: left"> <code class="command">-c=&lt;config&gt;</code>, <code class="command">-c &lt;config&gt;</code> </td><td style="text-align: left"> Standalone </td><td style="text-align: left"> Name of the server configuration file to use. The default is <code class="filename">standalone.xml</code>. </td></tr><tr><td style="text-align: left"> <code class="command">-c=&lt;config&gt;</code>, <code class="command">-c &lt;config&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Name of the server configuration file to use. The default is <code class="filename">domain.xml</code>. </td></tr><tr><td style="text-align: left"> <code class="command">--cached-dc</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> If the host is not the Domain Controller and cannot contact the Domain Controller at boot, boot using a locally cached copy of the domain configuration. </td></tr><tr><td style="text-align: left"> <code class="command">--debug [&lt;port&gt;] </code> </td><td style="text-align: left"> Standalone </td><td style="text-align: left"> Activate debug mode with an optional argument to specify the port. Only works if the launch script supports it. </td></tr><tr><td style="text-align: left"> <code class="command">-D&lt;name&gt;[=&lt;value&gt;]</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Set a system property. </td></tr><tr><td style="text-align: left"> <code class="command">--domain-config=&lt;config&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Name of the server configuration file to use. The default is <code class="filename">domain.xml</code>. </td></tr><tr><td style="text-align: left"> <code class="command">-h</code>, <code class="command">--help</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Display the help message and exit. </td></tr><tr><td style="text-align: left"> <code class="command">--host-config=&lt;config&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Name of the host configuration file to use. The default is <code class="filename">host.xml</code>. </td></tr><tr><td style="text-align: left"> <code class="command">--interprocess-hc-address=&lt;address&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Address on which the host controller should listen for communication from the process controller. </td></tr><tr><td style="text-align: left"> <code class="command">--interprocess-hc-port=&lt;port&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Port on which the host controller should listen for communication from the process controller. </td></tr><tr><td style="text-align: left"> <code class="command">--master-address=&lt;address&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Set system property <code class="literal">jboss.domain.master.address</code> to the given value. In a default slave Host Controller config, this is used to configure the address of the master Host Controller. </td></tr><tr><td style="text-align: left"> <code class="command">--master-port=&lt;port&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Set system property <code class="literal">jboss.domain.master.port</code> to the given value. In a default slave Host Controller config, this is used to configure the port used for native management communication by the master Host Controller. </td></tr><tr><td style="text-align: left"> <code class="command">--read-only-server-config=&lt;config&gt;</code> </td><td style="text-align: left"> Standalone </td><td style="text-align: left"> Name of the server configuration file to use. This differs from <em class="parameter"><code>--server-config</code></em> and <em class="parameter"><code>-c</code></em> in that the original file is never overwritten. </td></tr><tr><td style="text-align: left"> <code class="command">--read-only-domain-config=&lt;config&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Name of the domain configuration file to use. This differs from <em class="parameter"><code>--domain-config</code></em> and <em class="parameter"><code>-c</code></em> in that the initial file is never overwritten. </td></tr><tr><td style="text-align: left"> <code class="command">--read-only-host-config=&lt;config&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Name of the host configuration file to use. This differs from <em class="parameter"><code>--host-config</code></em> in that the initial file is never overwritten. </td></tr><tr><td style="text-align: left"> <code class="command">-P=&lt;url&gt;</code>, <code class="command">-P &lt;url&gt;</code>, <code class="command">--properties=&lt;url&gt;</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Load system properties from the given URL. </td></tr><tr><td style="text-align: left"> <code class="command">--pc-address=&lt;address&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Address on which the process controller listens for communication from processes it controls. </td></tr><tr><td style="text-align: left"> <code class="command">--pc-port=&lt;port&gt;</code> </td><td style="text-align: left"> Domain </td><td style="text-align: left"> Port on which the process controller listens for communication from processes it controls. </td></tr><tr><td style="text-align: left"> <code class="command">-S&lt;name&gt;[=&lt;value&gt;]</code> </td><td style="text-align: left"> Standalone </td><td style="text-align: left"> Set a security property. </td></tr><tr><td style="text-align: left"> <code class="command">--server-config=&lt;config&gt;</code> </td><td style="text-align: left"> Standalone </td><td style="text-align: left"> Name of the server configuration file to use. The default is <code class="filename">standalone.xml</code>. </td></tr><tr><td style="text-align: left"> <code class="command">-u=&lt;value&gt;</code>, <code class="command">-u &lt;value&gt;</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Set system property <code class="literal">jboss.default.multicast.address</code>, which is used in configuring the multicast address in the socket-binding elements in the configuration files. This defaults to 230.0.0.4 if no value is specified. </td></tr><tr><td style="text-align: left"> <code class="command">-v</code>, <code class="command">-V</code>, <code class="command">--version</code> </td><td style="text-align: left"> Standalone, Domain </td><td style="text-align: left"> Display the application server version and exit. </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			The configuration files that ship with JBoss EAP 6 are set up to handle the behavior of the switches (i.e. <code class="literal">-b</code>, <code class="literal">-u</code>). If you change your configuration files to no longer use the system property controlled by the switch, then adding it to the launch command will have no effect.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5455-770141+%5BLatest%5D&amp;comment=Title%3A+Reference+of+Switches+and+Arguments+to+pass+at+Server+Runtime%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5455-770141+10+Sep+2015+15%3A31+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Start_and_Stop_Servers">
      ⁠</a>2.3. Start and Stop Servers</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_and_Stop_Servers1">
      ⁠</a>2.3.1. Start and Stop Servers Using the Management CLI</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>
			</div></li></ul></div><div class="para">
		Servers can be started and stopped using the Management CLI or Management Console. Both tools can control a single Standalone Server instance or manage multiple servers across a Managed Domain deployment.
	</div><div class="para">
		To use the Management Console, refer to <a class="xref" href="chap-Application_Server_Management.html#Start_a_Server_Using_the_Management_Console">Section 2.3.2, “Start a Server Using the Management Console”</a>. When using the Management CLI, the process varies for Standalone Server and Managed Domain instances.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Stop a Standalone Server with the Management CLI</div>
			Standalone Servers, started either by a script or manually at a shell prompt, can be shut down from the Management CLI using the <code class="command">shutdown</code> command.
		</div><div class="example"><a id="idm139978445062912">
      ⁠</a><p class="title"><strong>Example 2.5. Stop a Standalone Server instance via the Management CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] shutdown</pre></div></div><div class="para">
		To restart the JBoss EAP 6 Standalone Server instance, run the instance’s startup script or start it manually as described in <a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Standalone_Server2">Section 2.2.2, “Start JBoss EAP 6 as a Standalone Server”</a>.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Start and Stop a Managed Domain with the Management CLI</div>
			The Management Console can selectively start or stop specific servers in a domain. This includes server groups across the whole of a domain as well as specific server instances on a host.
		</div><div class="example"><a id="idm139978532608496">
      ⁠</a><p class="title"><strong>Example 2.6. Stop a Server Host in a Managed Domain via the Management CLI</strong></p><div class="example-contents"><div class="para">
			Similar to Standalone Server instance, the <code class="command">shutdown</code> command is used to shut down a declared Managed Domain host. This example stops a server host named master by declaring the instance name before calling the shutdown operation.
		</div><pre class="screen">[domain@localhost:9999 /] shutdown --host=<em class="replaceable">master</em></pre></div></div><div class="example"><a id="idm139978453377968">
      ⁠</a><p class="title"><strong>Example 2.7. Start and Stop a Server Group in a Managed Domain via the Management CLI</strong></p><div class="example-contents"><div class="para">
			This example starts a default server group named <em class="parameter"><code>main-server-group</code></em> by declaring the group before calling the <code class="command">start</code> and <code class="command">stop</code> operations.
		</div><pre class="screen">[domain@localhost:9999 /] /server-group=<em class="replaceable">main-server-group</em>:start-servers</pre><pre class="screen">[domain@localhost:9999 /] /server-group=<em class="replaceable">main-server-group</em>:stop-servers</pre></div></div><div class="example"><a id="idm139978467438624">
      ⁠</a><p class="title"><strong>Example 2.8. Start and Stop a Server Instance in a Managed Domain via the Management CLI</strong></p><div class="example-contents"><div class="para">
			This example starts and then stops a server instance named <em class="parameter"><code>server-one</code></em> on the <em class="parameter"><code>master</code></em> host by declaring the host and server configuration before calling the <code class="command">start</code> and <code class="command">stop</code> operations.
		</div><pre class="screen">[domain@localhost:9999 /] /host=<em class="replaceable">master</em>/server-config=<em class="replaceable">server-one</em>:start</pre><pre class="screen">[domain@localhost:9999 /] /host=<em class="replaceable">master</em>/server-config=<em class="replaceable">server-one</em>:stop</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Use the <span class="keycap"><strong>tab</strong></span> key to assist with string completion and to expose visible variables such as available host and server configuration values.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4748-766796+%5BLatest%5D&amp;comment=Title%3A+Start+and+Stop+Servers+Using+the+Management+CLI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4748-766796+05+Aug+2015+08%3A11+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_a_Server_Using_the_Management_Console">
      ⁠</a>2.3.2. Start a Server Using the Management Console</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Managed_Domain1">Section 2.2.4, “Start JBoss EAP 6 as a Managed Domain”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978465439584">
      ⁠</a><p class="title"><strong>Procedure 2.11. Start the Server for a Managed Domain</strong></p><ol class="1"><li class="step"><div class="para">
				Select the <span class="guilabel"><strong>Domain</strong></span> tab at the top of the console and then, select the <span class="guimenu"><strong>TOPOLOGY</strong></span> tab. In the left navigation bar, under <span class="guimenu"><strong>Domain</strong></span>, select <span class="guimenu"><strong>Overview</strong></span>.
			</div></li><li class="step"><div class="para">
				From the list of <span class="guilabel"><strong>Server Instances</strong></span>, select the server you want to start. Servers that are running are indicated by a check mark.
			</div><div class="para">
				Hover the cursor over an instance in this list to show options in blue text below the server's details.
			</div></li><li class="step"><div class="para">
				To start the instance, click on the <span class="guimenu"><strong>Start Server</strong></span> text when it appears. A confirmation dialogue box will open. Click <span class="guibutton"><strong>Confirm</strong></span> to start the server.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The selected server is started and running.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4456-763914+%5BLatest%5D&amp;comment=Title%3A+Start+a+Server+Using+the+Management+Console%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4456-763914+06+Jul+2015+04%3A50+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Stop_a_Server_Using_the_Management_Console1">
      ⁠</a>2.3.3. Stop a Server Using the Management Console</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Managed_Domain1">Section 2.2.4, “Start JBoss EAP 6 as a Managed Domain”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978508962736">
      ⁠</a><p class="title"><strong>Procedure 2.12. Stop a Server in a Managed Domain Using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Select the <span class="guilabel"><strong>Domain</strong></span> tab at the top of the console and then, select the <span class="guimenu"><strong>TOPOLOGY</strong></span> tab. In the left navigation bar, under <span class="guimenu"><strong>Domain</strong></span>, select <span class="guimenu"><strong>Overview</strong></span>.
			</div></li><li class="step"><div class="para">
				A list of available <span class="guilabel"><strong>Server Instances</strong></span> is displayed on the <span class="guilabel"><strong>Hosts, groups and server instances</strong></span> table. Servers that are running are indicated by a check mark.
			</div></li><li class="step"><div class="para">
				Hover the cursor over the chosen server. Click on the <span class="guibutton"><strong>Stop Server</strong></span> text that appears. A confirmation dialogue window will appear.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Confirm</strong></span> to stop the server.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The selected server is stopped.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4468-763916+%5BLatest%5D&amp;comment=Title%3A+Stop+a+Server+Using+the+Management+Console%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4468-763916+06+Jul+2015+04%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuration_Files">
      ⁠</a>2.4. Configuration Files</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_JBoss_Enterprise_Application_Platform_6_Configuration_Files1">
      ⁠</a>2.4.1. About JBoss EAP 6 Configuration Files</h2></div></div></div><div class="para">
		The configuration for JBoss EAP 6 has changed considerably from previous versions. One of the most obvious differences is the use of a simplified configuration file structure, which includes one or more of the files listed below.
	</div><div class="table"><a id="idm139978505549712">
      ⁠</a><p class="title"><strong>Table 2.3. Configuration File Locations</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Configuration File Locations"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Server mode </th><th> Location </th><th> Purpose </th></tr></thead><tbody><tr><td> domain.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> </td><td> This is the main configuration file for a managed domain. Only the domain master reads this file. On other domain members, it can be removed. </td></tr><tr><td> host.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/host.xml</code> </td><td> This file includes configuration details specific to a physical host in a managed domain, such as network interfaces, socket bindings, the name of the host, and other host-specific details. The <code class="filename">host.xml</code> file includes all of the features of both <code class="filename">host-master.xml</code> and <code class="filename">host-slave.xml</code>, which are described below. This file is not present for standalone servers. </td></tr><tr><td> host-master.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/host-master.xml</code> </td><td> This file includes only the configuration details necessary to run a server as a managed domain master server. This file is not present for standalone servers. </td></tr><tr><td> host-slave.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/host-slave.xml</code> </td><td> This file includes only the configuration details necessary to run a server as a managed domain slave server. This file is not present for standalone servers. </td></tr><tr><td> standalone.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code> </td><td> This is the default configuration file for a standalone server. It contains all information about the standalone server, including subsystems, networking, deployments, socket bindings, and other configurable details. This configuration is used automatically when you start your standalone server. </td></tr><tr><td> standalone-full.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full.xml</code> </td><td> This is an example configuration for a standalone server. It includes support for every possible subsystem except for those required for high availability. To use it, stop your server and restart using the following command: <code class="code"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh -c standalone-full.xml</code> </td></tr><tr><td> standalone-ha.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-ha.xml</code> </td><td> This example configuration file enables all of the default subsystems and adds the <code class="code">mod_cluster</code> and JGroups subsystems for a standalone server, so that it can participate in a high-availability or load-balancing cluster. This file is not applicable for a managed domain. To use this configuration, stop your server and restart using the following command: <code class="code"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh -c standalone-ha.xml</code> </td></tr><tr><td> standalone-full-ha.xml </td><td> <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full-ha.xml</code> </td><td> This is an example configuration for a standalone server. It includes support for every possible subsystem, including those required for high availability. To use it, stop your server and restart using the following command: <code class="code"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh -c standalone-full-ha.xml</code> </td></tr></tbody></table></div></div><div class="para">
		These are only the default locations. You can specify a different configuration file at runtime.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			For information about how to backup JBoss EAP 6 configuration data, refer <a class="xref" href="chap-Application_Server_Management.html#Back_up_JBoss_EAP_Configuration_Data">Section 2.4.2, “Back up JBoss EAP Configuration Data”</a> .
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4507-767411+%5BLatest%5D&amp;comment=Title%3A+About+JBoss+EAP+6+Configuration+Files%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4507-767411+14+Aug+2015+02%3A15+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Back_up_JBoss_EAP_Configuration_Data">
      ⁠</a>2.4.2. Back up JBoss EAP Configuration Data</h2></div></div></div><div class="para">

	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic describes the files that must be backed up in order to later restore the JBoss EAP server configuration.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978453712784">
      ⁠</a><p class="title"><strong>Procedure 2.13. Back Up the Configuration Data</strong></p><ol class="1"><li class="step"><div class="para">
				To keep user and profile data, domain, host, slave, and logging configuration, back up the entire contents of the following directories. 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							<em class="replaceable">EAP_HOME</em>/standalone/configuration/
						</div></li><li class="listitem"><div class="para">
							<em class="replaceable">EAP_HOME</em>/domain/configuration
						</div></li></ul></div>

			</div></li><li class="step"><div class="para">
				Back up any custom modules created in the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/</code> directory.
			</div></li><li class="step"><div class="para">
				Back up any welcome content in the <code class="filename"><em class="replaceable">EAP_HOME</em>/welcome-content/</code> directory.
			</div></li><li class="step"><div class="para">
				Back up any custom scripts created in the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/</code> directory.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44706-767418+%5BLatest%5D&amp;comment=Title%3A+Back+up+JBoss+EAP+Configuration+Data%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44706-767418+14+Aug+2015+06%3A57+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Descriptor-based_Property_Replacement">
      ⁠</a>2.4.3. Descriptor-based Property Replacement</h2></div></div></div><div class="para">
		Application configuration - for example, datasource connection parameters - typically varies between development, testing, and production deployments. This variance is sometimes accommodated by build system scripts, as the Java EE specification does not contain a method to externalize these configurations. With JBoss EAP 6 you can use <em class="firstterm">descriptor-based property replacement</em> to manage configuration externally.
	</div><div class="para">
		Descriptor-based property replacement substitutes properties based on descriptors, allowing you to remove assumptions about the environment from the application and the build chain. Environment-specific configurations can be specified in deployment descriptors rather than annotations or build system scripts. You can provide configuration in files or as parameters at the command line.
	</div><div class="para">
		Descriptor-based property replacement is enabled globally through <code class="filename">standalone.xml</code> or <code class="filename">domain.xml</code>:
	</div><div class="example"><a id="idm139978536866048">
      ⁠</a><p class="title"><strong>Example 2.9. Descriptor-based property replacement</strong></p><div class="example-contents"><pre class="screen">&lt;subsystem xmlns="urn:jboss:domain:ee:1.2"&gt;
  &lt;spec-descriptor-property-replacement&gt;
    true
  &lt;/spec-descriptor-property-replacement&gt;
  &lt;jboss-descriptor-property-replacement&gt;
    true
  &lt;/jboss-descriptor-property-replacement&gt;
&lt;/subsystem&gt;</pre></div></div><div class="para">
		Java EE descriptor replacement is <span class="emphasis"><em>disabled</em></span> by default. When enabled, descriptors can be replaced in the following configuration files: <code class="filename">ejb-jar.xml</code> and <code class="filename">persistence.xml</code>.
	</div><div class="para">
		JBoss-specific descriptor replacement is <span class="emphasis"><em>enabled</em></span> by default. When enabled, descriptors can be replaced in the following configuration files:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				<code class="filename">jboss-ejb3.xml</code>
			</div></li><li class="listitem"><div class="para">
				<code class="filename">jboss-app.xml</code>
			</div></li><li class="listitem"><div class="para">
				<code class="filename">jboss-web.xml</code>
			</div></li><li class="listitem"><div class="para">
				<code class="filename">*-jms.xml</code>
			</div></li><li class="listitem"><div class="para">
				<code class="filename">*-ds.xml</code>
			</div></li></ul></div><div class="para">
		For example, given a Bean with the following annotation:
	</div><div class="example"><a id="idm139978463952208">
      ⁠</a><p class="title"><strong>Example 2.10. Example annotation</strong></p><div class="example-contents"><pre class="screen">@ActivationConfigProperty(propertyName = "connectionParameters", propertyValue = "host=192.168.1.1;port=5445")</pre></div></div><div class="para">
		With descriptor-based property replacement enabled, the <code class="literal">connectionParameters</code> can be specified via the command-line as:
	</div><pre class="screen">./standalone.sh -DconnectionParameters='host=10.10.64.1;port=5445'
</pre><div class="para">
		To accomplish the same via system properties you use an <em class="firstterm">expression</em> in place of the literal value. Expressions take the format <code class="literal">${<em class="replaceable">parameter</em>:default}</code>. Where an expression is used in configuration, the value of that parameter takes its place. If the parameter does not exist then the specified default value is used instead.
	</div><div class="example"><a id="idm139978522092608">
      ⁠</a><p class="title"><strong>Example 2.11.  Using an Expression in a Descriptor </strong></p><div class="example-contents"><pre class="screen">&lt;activation-config&gt;
  &lt;activation-config-property&gt;
    &lt;activation-config-property-name&gt;
      connectionParameters
      &lt;/activation-config-property-name&gt;
    &lt;activation-config-property-value&gt;
      ${jms.connection.parameters:'host=10.10.64.1;port=5445'}
    &lt;/activation-config-property-value&gt;
  &lt;/activation-config-property&gt;
&lt;/activation-config&gt;</pre><div class="para">
			The expression <code class="literal">${jms.connection.parameters:'host=10.10.64.1;port=5445'}</code> allows the connection parameters to be overridden by a command-line supplied parameter, while providing a default value.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+41088-766787+%5BLatest%5D&amp;comment=Title%3A+Descriptor-based+Property+Replacement%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=41088-766787+05+Aug+2015+05%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="EnablingDisabling_Descriptor_Based_Property_Replacement1">
      ⁠</a>2.4.4. Enabling or Disabling Descriptor Based Property Replacement</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Finite control over descriptor property replacement was introduced in <code class="filename">jboss-as-ee_1_1.xsd</code>. This task covers the steps required to configure descriptor based property replacement.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_EAP_6">Section 2.2.1, “Start JBoss EAP 6”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>
			</div></li></ul></div><div class="para">
		Descriptor based property replacement flags have boolean values:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				When set to <code class="code">true</code>, property replacements are enabled.
			</div></li><li class="listitem"><div class="para">
				When set to <code class="code">false</code>, property replacements are disabled.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978521753872">
      ⁠</a><p class="title"><strong>Procedure 2.14. <code class="code">jboss-descriptor-property-replacement</code></strong></p><div class="para">
			<code class="code">jboss-descriptor-property-replacement</code> is used to enable or disable property replacement in the following descriptors:
		</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
					<code class="filename">jboss-ejb3.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">jboss-app.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">jboss-web.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">*-jms.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">*-ds.xml</code>
				</div></li></ul></div><div class="para">
			The default value for <code class="code">jboss-descriptor-property-replacement</code> is <code class="code">true</code>.
		</div><ol class="1"><li class="step"><div class="para">
				In the Management CLI, run the following command to determine the value of <code class="code">jboss-descriptor-property-replacement</code>:
			</div><pre class="screen">/subsystem=ee:read-attribute(name="jboss-descriptor-property-replacement")</pre></li><li class="step"><div class="para">
				Run the following command to configure the behavior:
			</div><pre class="screen">/subsystem=ee:write-attribute(name="jboss-descriptor-property-replacement",value=<em class="replaceable">VALUE</em>)</pre></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978473290608">
      ⁠</a><p class="title"><strong>Procedure 2.15. <code class="code">spec-descriptor-property-replacement</code></strong></p><div class="para">
			<code class="code">spec-descriptor-property-replacement</code> is used to enable or disable property replacement in the following descriptors:
		</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
					<code class="filename">ejb-jar.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">persistence.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">application.xml</code>
				</div></li><li class="listitem"><div class="para">
					<code class="filename">web.xml</code>
				</div></li></ul></div><div class="para">
			The default value for <code class="code">spec-descriptor-property-replacement</code> is <code class="code">false</code>.
		</div><ol class="1"><li class="step"><div class="para">
				In the Management CLI, run the following command to confirm the value of <code class="code">spec-descriptor-property-replacement</code>:
			</div><pre class="screen">/subsystem=ee:read-attribute(name="spec-descriptor-property-replacement")</pre></li><li class="step"><div class="para">
				Run the following command to configure the behavior:
			</div><pre class="screen">/subsystem=ee:write-attribute(name="spec-descriptor-property-replacement",value=<em class="replaceable">VALUE</em>)</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The descriptor based property replacement tags have been successfully configured.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+9089-764030+%5BLatest%5D&amp;comment=Title%3A+Enabling+or+Disabling+Descriptor+Based+Property+Replacement%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9089-764030+07+Jul+2015+02%3A32+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Nested_Expressions">
      ⁠</a>2.4.5. Nested Expressions</h2></div></div></div><div class="para">
		Expressions may be nested, which allows for more advanced use of expressions in place of fixed values. The format of a nested expression is like that of a normal expression, but one expression is embedded in the other, for example: 
		<div class="example"><a id="idm139978510918400">
      ⁠</a><p class="title"><strong>Example 2.12. Nested expression</strong></p><div class="example-contents"><pre class="screen">${system_value_1${system_value_2}}</pre></div></div>
		 Nested expressions are evaluated recursively, so the <span class="emphasis"><em>inner</em></span> expression is first evaluated, then the <span class="emphasis"><em>outer</em></span> expression is evaluated. Nested expressions are permitted anywhere that expressions are permitted, with the exception of Management CLI commands.
	</div><div class="para">
		As for normal expressions, the supported sources for resolving nested expressions are: system properties, environment variables and the Vault. For deployments only, the source can be properties listed in a <code class="filename">META-INF/jboss.properties</code> file in the deployment archive. In an EAR or other deployment type that supports subdeployments, the resolution is scoped to all subdeployments if the <code class="filename">META-INF/jboss.properties</code> is in the outer deployment (e.g. the EAR) and is scoped to a subdeployment if <code class="filename">META-INF/jboss.properties</code> is in the subdeployment archive (e.g. a WAR inside an EAR.)
	</div><div class="example"><a id="idm139978452137744">
      ⁠</a><p class="title"><strong>Example 2.13.  Use a Nested Expression in a Configuration File </strong></p><div class="example-contents"><div class="para">
			A real-life application of a nested expression is in a datasource definition. If the password used in a datasource definition is masked, the resulting line in the datasource definition might be as follows: 
<pre class="screen">&lt;password&gt;${VAULT::ds_ExampleDS::password::1}&lt;/password&gt;</pre>
			 Using a nested expression, the value of <code class="literal">ds_ExampleDS</code> could be replaced with a system property. If a system property <code class="literal">datasource_name</code> is assigned the value <code class="literal">ds_ExampleDS</code>, the line in the datasource definition could instead be as follows: 
<pre class="screen">&lt;password&gt;${VAULT::${datasource_name}::password::1}&lt;/password&gt;</pre>

		</div><div class="para">
			JBoss EAP would first evaluate the expression <code class="code">${datasource_name}</code>, then input this to the larger expression and evaluate the resulting expression. The advantage of this configuration is that the name of the datasource is abstracted from the fixed configuration.
		</div></div></div><div class="para">
		Expressions may also be recursive, where an expressions resolves to an expression which is then resolved. Nested expressions and recursive expressions are a form of indirection. Note that recursive expressions are not permitted in Management CLI commands.
	</div><div class="example"><a id="idm139978510951680">
      ⁠</a><p class="title"><strong>Example 2.14.  Recursive Expression </strong></p><div class="example-contents"><div class="para">
			Continuing the previous example, you might use the expression <code class="literal">${foo}</code> which resolves to the expression <code class="literal">${VAULT::ds_ExampleDS::password::1}</code>, which then resolves to a value contained in the Vault: <code class="literal">secret</code>.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+42296-743905+%5BLatest%5D&amp;comment=Title%3A+Nested+Expressions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42296-743905+18+Feb+2015+21%3A19+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configuration_File_History">
      ⁠</a>2.4.6. Configuration File History</h2></div></div></div><div class="para">
		The application server configuration files include <code class="filename">standalone.xml</code>, as well as the <code class="filename">domain.xml</code> and <code class="filename">host.xml</code> files. While these files may be modified by direct editing, the recommended method is to configure the application server model with the available management operations, including the Management CLI and the Management Console.
	</div><div class="para">
		To assist in the maintenance and management of the server instance, the application server creates a timestamped version of the original configuration file at the time of startup. Any additional configuration changes made by management operations result in the original file being automatically backed up, and a working copy of the instance being preserved for reference and rollback. This archival functionality extends to saving, loading and deleting snapshots of the server configuration to allow for recall and rollback scenarios.
	</div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="chap-Application_Server_Management.html#Start_the_Server_with_a_Previous_Configuration">Section 2.4.7, “Start the Server with a Previous Configuration”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Application_Server_Management.html#Save_a_Configuration_Snapshot_Using_the_Management_CLI">Section 2.4.8, “Save a Configuration Snapshot Using the Management CLI”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Application_Server_Management.html#Load_a_Configuration_Snapshot">Section 2.4.9, “Load a Configuration Snapshot Using the Management CLI”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Application_Server_Management.html#Delete_a_Configuration_Snapshot_Using_Management_CLI1">Section 2.4.10, “Delete a Configuration Snapshot Using Management CLI”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Application_Server_Management.html#List_All_Configuration_Snapshots_Using_Management_CLI">Section 2.4.11, “List All Configuration Snapshots Using Management CLI”</a>
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5031-591680+%5BLatest%5D&amp;comment=Title%3A+Configuration+File+History%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5031-591680+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_the_Server_with_a_Previous_Configuration">
      ⁠</a>2.4.7. Start the Server with a Previous Configuration</h2></div></div></div><div class="para">
		The following example shows how to start the application server with a previous configuration in a standalone server with <code class="filename">standalone.xml</code>. The same concept applies to a managed domain with <code class="filename">domain.xml</code> and <code class="filename">host.xml</code> respectively.
	</div><div class="para">
		This example recalls a previous configuration saved automatically by the application server as management operations modify the server model.
	</div><div class="example"><a id="idm139978532207360">
      ⁠</a><p class="title"><strong>Example 2.15. Start the server with a saved configuration</strong></p><div class="example-contents"><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
					Identify the backed up version that you want to start. This example will recall the instance of the server model prior to the first modification after successfully booting up.
				</div><div class="para">
					
<pre class="screen"><code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone_xml_history/current/standalone.v1.xml</code></pre>

				</div></li><li class="step"><div class="para">
					Start the server with this configuration of the backed up model by passing in the relative filename under <code class="literal">jboss.server.config.dir</code>.
				</div><div class="para">
					
<pre class="screen"><code class="filename"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh --server-config=standalone_xml_history/current/standalone.v1.xml</code></pre>

				</div></li></ol></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The application server starts with the selected configuration.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The domain configuration history is located in <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain_xml_history/current/domain.v1.xml</code>
		</div><div class="para">
			Start the server with this configuration of the backed up model by passing the relative filename under <em class="parameter"><code>jboss.domain.config.dir</code></em>.
		</div><div class="para">
			To start the domain with this configuration:
		</div><pre class="screen">EAP_HOME/bin/domain.sh --domain-config=domain_xml_history/current/domain.v1.xml</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5032-743906+%5BLatest%5D&amp;comment=Title%3A+Start+the+Server+with+a+Previous+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5032-743906+18+Feb+2015+21%3A21+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Save_a_Configuration_Snapshot_Using_the_Management_CLI">
      ⁠</a>2.4.8. Save a Configuration Snapshot Using the Management CLI</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Configuration snapshots are a point-in-time copy of the current server configuration. These copies can be saved and loaded by the administrator.
		</div><div class="para">
		The following example uses the <code class="filename">standalone.xml</code> configuration file, but the same process applies to the <code class="filename">domain.xml</code> and <code class="filename">host.xml</code> configuration files.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978507842048">
      ⁠</a><p class="title"><strong>Procedure 2.16. Take a Configuration Snapshot and Save It</strong></p><ul><li class="step"><p class="title"><strong>Save a snapshot</strong></p><div class="para">
				Run the <code class="command">take-snapshot</code> operation to capture a copy of the current server configuration.
			</div><pre class="programlisting">[standalone@localhost:9999 /] :take-snapshot
{
    "outcome" =&gt; "success",
    "result" =&gt; "/home/User/<em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone_xml_history/snapshot/20110630-172258657standalone.xml"
</pre></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			A snapshot of the current server configuration has been saved.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5033-591680+%5BLatest%5D&amp;comment=Title%3A+Save+a+Configuration+Snapshot+Using+the+Management+CLI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5033-591680+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Load_a_Configuration_Snapshot">
      ⁠</a>2.4.9. Load a Configuration Snapshot Using the Management CLI</h2></div></div></div><div class="para">
		Configuration snapshots are a point-in-time copy of the current server configuration. These copies can be saved and loaded by the administrator. The process of loading snapshots is similar to the method used to <a class="xref" href="chap-Application_Server_Management.html#Start_the_Server_with_a_Previous_Configuration">Section 2.4.7, “Start the Server with a Previous Configuration”</a>, running from the command line rather than the Management CLI interface used to create, list and delete snapshots.
	</div><div class="para">
		The following example uses the <code class="filename">standalone.xml</code> file, but the same process applies to the <code class="filename">domain.xml</code> and <code class="filename">host.xml</code> files.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978449320720">
      ⁠</a><p class="title"><strong>Procedure 2.17. Load a Configuration Snapshot</strong></p><ol class="1"><li class="step"><div class="para">
				Identify the snapshot to be loaded. This example will recall the following file from the snapshot directory. The default path for the snapshot files is as follows.
			</div><div class="para">
				
<pre class="screen"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone_xml_history/snapshot/<em class="replaceable">20110812-191301472standalone.xml</em></pre>

			</div><div class="para">
				The snapshots are expressed by their relative paths, by which the above example can be written as follows.
			</div><div class="para">
				
<pre class="screen"><em class="replaceable">jboss.server.config.dir</em>/standalone_xml_history/snapshot/<em class="replaceable">20110812-191301472standalone.xml</em></pre>

			</div></li><li class="step"><div class="para">
				Start the server with the selected configuration snapshot by passing in the filename.
			</div><div class="para">
				
<pre class="screen"><em class="replaceable">EAP_HOME</em>/bin/standalone.sh --server-config=standalone_xml_history/snapshot/<em class="replaceable">20110913-164449522standalone.xml</em></pre>

			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The server restarts with the configuration selected in the loaded snapshot.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5034-591680+%5BLatest%5D&amp;comment=Title%3A+Load+a+Configuration+Snapshot+Using+the+Management+CLI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5034-591680+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Delete_a_Configuration_Snapshot_Using_Management_CLI1">
      ⁠</a>2.4.10. Delete a Configuration Snapshot Using Management CLI</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>
			</div></li></ul></div><div class="para">
		Configuration snapshots are a point-in-time copy of the current server configuration. These copies can be saved and loaded by the administrator.
	</div><div class="para">
		The following examples use the <code class="filename">standalone.xml</code> file, but the same process applies to the <code class="filename">domain.xml</code> and <code class="filename">host.xml</code> files.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978542759680">
      ⁠</a><p class="title"><strong>Procedure 2.18. Delete a Specific Snapshot</strong></p><ol class="1"><li class="step"><div class="para">
				Identify the snapshot to be deleted. This example will delete the following file from the snapshot directory.
			</div><pre class="screen"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone_xml_history/snapshot/20110630-165714239standalone.xml</pre></li><li class="step"><div class="para">
				Run the <code class="command">:delete-snapshot</code> command to delete a specific snapshot, specifying the name of the snapshot as in the example below.
			</div><pre class="screen">[standalone@localhost:9999 /] <code class="command">:delete-snapshot(name="<em class="replaceable">20110630-165714239standalone.xml</em>")</code>
{"outcome" =&gt; "success"}
</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The snapshot has been deleted.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978452209136">
      ⁠</a><p class="title"><strong>Procedure 2.19. Delete All Snapshots</strong></p><ul><li class="step"><div class="para">
				Run the <code class="command">:delete-snapshot(name="all")</code> command to delete all snapshots as in the example below.
			</div><pre class="screen">[standalone@localhost:9999 /] <code class="command">:delete-snapshot(name="all")</code>
{"outcome" =&gt; "success"}
</pre></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			All snapshots have been deleted.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5035-591680+%5BLatest%5D&amp;comment=Title%3A+Delete+a+Configuration+Snapshot+Using+Management+CLI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5035-591680+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="List_All_Configuration_Snapshots_Using_Management_CLI">
      ⁠</a>2.4.11. List All Configuration Snapshots Using Management CLI</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>
			</div></li></ul></div><div class="para">
		Configuration snapshots are a point-in-time copy of the current server configuration. These copies can be saved and loaded by the administrator.
	</div><div class="para">
		The following example uses the <code class="filename">standalone.xml</code> file, but the same process applies to the <code class="filename">domain.xml</code> and <code class="filename">host.xml</code> files.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978525772672">
      ⁠</a><p class="title"><strong>Procedure 2.20. List All Configuration Snapshots</strong></p><ul><li class="step"><p class="title"><strong>List all snapshots</strong></p><div class="para">
				List all of the saved snapshots by running the <code class="command">:list-snapshots</code> command.
			</div><pre class="screen">[standalone@localhost:9999 /] <code class="command">:list-snapshots</code>
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "directory" =&gt; "/home/hostname/<em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone_xml_history/snapshot",
        "names" =&gt; [
            "20110818-133719699standalone.xml",
            "20110809-141225039standalone.xml",
            "20110802-152010683standalone.xml",
            "20110808-161118457standalone.xml",
            "20110912-151949212standalone.xml",
            "20110804-162951670standalone.xml"
        ]
    }
}
</pre></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The snapshots are listed.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5139-591684+%5BLatest%5D&amp;comment=Title%3A+List+All+Configuration+Snapshots+Using+Management+CLI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5139-591684+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Filesystem_Paths">
      ⁠</a>2.5. Filesystem Paths</h1></div></div></div><div class="para">
			JBoss EAP 6 uses logical names for filesystem paths. The <code class="filename">domain.xml</code>, <code class="filename">host.xml</code>, and <code class="filename">standalone.xml</code> configuration files each include a section for declaring paths.
		</div><div class="para">
			Other sections of each file can then reference the paths using their logical name, avoiding the need to use absolute paths for each instance and allowing specific host configurations to resolve to universal logical names.
		</div><div class="para">
			The default logging subsystem configuration, for example, declares <em class="parameter"><code>jboss.server.log.dir</code></em> as the logical name for the server’s <code class="filename">log</code> directory.
		</div><div class="example"><a id="idm139978542189488">
      ⁠</a><p class="title"><strong>Example 2.16. Relative path example for the logging directory</strong></p><div class="example-contents"><div class="para">
				
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;file</span><span xmlns="" class="perl_Others"> relative-to=</span><span xmlns="" class="perl_String">"jboss.server.log.dir"</span><span xmlns="" class="perl_Others"> path=</span><span xmlns="" class="perl_String">"server.log"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre>

			</div></div></div><div class="para">
			JBoss EAP 6 automatically provides a number of standard paths without any need for the user to configure them in a configuration file.
		</div><div class="table"><a id="idm139978532086944">
      ⁠</a><p class="title"><strong>Table 2.4. Standard Paths</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="Standard Paths"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Value </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="literal">java.ext.dirs</code> </td><td style="text-align: left"> The Java development kit extension directory paths. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.home.dir</code> </td><td style="text-align: left"> The root directory of the JBoss EAP 6 distribution. </td></tr><tr><td style="text-align: left"> <code class="literal">user.home</code> </td><td style="text-align: left"> The user home directory. </td></tr><tr><td style="text-align: left"> <code class="literal">user.dir</code> </td><td style="text-align: left"> The user's current working directory. </td></tr><tr><td style="text-align: left"> <code class="literal">java.home</code> </td><td style="text-align: left"> The Java installation directory </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.server.base.dir</code> </td><td style="text-align: left"> The root directory for an individual server instance. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.server.data.dir</code> </td><td style="text-align: left"> The directory the server will use for persistent data file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.server.config.dir</code> </td><td style="text-align: left"> The directory that contains the server configuration. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.server.log.dir</code> </td><td style="text-align: left"> The directory the server will use for log file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.server.temp.dir</code> </td><td style="text-align: left"> The directory the server will use for temporary file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.server.deploy.dir</code> </td><td style="text-align: left"> The directory that the server will use for storing deployed content. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.controller.temp.dir</code> </td><td style="text-align: left"> The directory the host controller will use for temporary file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.base.dir</code> </td><td style="text-align: left"> The base directory for domain content. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.config.dir</code> </td><td style="text-align: left"> The directory that contains the domain configuration. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.data.dir</code> </td><td style="text-align: left"> The directory that the domain will use for persistent data file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.log.dir</code> </td><td style="text-align: left"> The directory that the domain will use for persistent log file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.temp.dir</code> </td><td style="text-align: left"> The directory that the domain will use for temporary file storage. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.deployment.dir</code> </td><td style="text-align: left"> The directory that the domain will use for storing deployed content. </td></tr><tr><td style="text-align: left"> <code class="literal">jboss.domain.servers.dir</code> </td><td style="text-align: left"> The directory that the domain will use for storing outputs of the managed domain instances. </td></tr></tbody></table></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Override a Path</div>
				If you are running a standalone server, you can override all the <code class="literal">jboss.server.*</code> paths in one of the two ways.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					You can pass command line arguments when you start the server. For example: 
<pre class="screen"><code class="command">bin/standalone.sh -Djboss.server.log.dir=/var/log</code></pre>

				</div></li><li class="listitem"><div class="para">
					You can modify the <code class="literal">JAVA_OPTS</code> variable in the server configuration file. Open the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/standalone.conf</code> file and add the following line at the end of the file: 
<pre class="screen">JAVA_OPTS="$JAVA_OPTS -Djboss.server.log.dir=/var/log"</pre>

				</div></li></ul></div><div class="para">
			Path overrides is supported for servers running in a managed domain. For example, the <code class="literal">jboss.domain.servers.dir</code> can be used to change the base directories of servers in a managed domain.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Add a Custom Path</div>
				You can also create your own custom path. For example, you may want to define a relative path to use for logging. You can then change the log handler to use <code class="literal">my.relative.path</code>,
			</div><div class="example"><a id="idm139978457098112">
      ⁠</a><p class="title"><strong>Example 2.17. A custom logging path</strong></p><div class="example-contents"><pre class="programlisting"><code class="command">my.relative.path=/var/log</code></pre></div></div><div class="para RoleCreateBugPara">
			<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+IDs%3A%0A5044-769070+%5BLatest%5D&amp;comment=Title%3A+Filesystem+Paths%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Directory_Grouping">
      ⁠</a>2.5.1. Directory Grouping</h2></div></div></div><div class="para">
		In domain mode, each server's files are stored in the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/</code> directory. Subdirectories are named according to the <code class="literal">directory-grouping</code> attribute, either by server or file type.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Directory Grouping by Server </div>
			The default directory grouping is <code class="literal">by server</code>. If your administration is <span class="emphasis"><em>server-centric</em></span>, this configuration is recommended. For example, it allows backups and log file handling to be configured per server instance.
		</div><div class="example"><a id="idm139978521139856">
      ⁠</a><p class="title"><strong>Example 2.18.  Directory Grouping by Server </strong></p><div class="example-contents"><div class="para">
			If JBoss EAP is installed using the Zip method and all default options apply, the directory structure in domain mode will be as follows.
		</div><pre class="screen"><em class="replaceable">EAP_HOME</em>/domain
             └─ servers
                  ├── server-one
                  │   ├── data
                  │   ├── tmp
                  │   └── log
                  └── server-two
                      ├── data
                      ├── tmp
                      └── log</pre></div></div><div class="para">
		If the <code class="literal">directory-grouping</code> attribute has been changed from the default, and you want to reset it, enter the following management CLI command.
	</div><pre class="screen">/host=master:write-attribute(name="directory-grouping",value="by-server")</pre><div class="para">
		This will update the controller's <code class="filename">host.xml</code> configuration file:
	</div><pre class="programlisting">&lt;servers directory-grouping="by-server"&gt;
  &lt;server name="server-one" group="main-server-group" &gt;
  &lt;/server&gt;
  &lt;server name="server-two" group="main-server-group" auto-start="true"&gt;
  &lt;/server&gt;
&lt;/servers&gt;</pre><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Directory Grouping by Type </div>
			Instead of grouping each servers' directories by server, you can instead group them by file type. If your administration is <span class="emphasis"><em>file type-centric</em></span>, this configuration is recommended. For example, backup configuration is simpler if you want to include only data files.
		</div><div class="para">
		To group domain data directories by <span class="emphasis"><em>type</em></span>, enter the following management CLI command:
	</div><pre class="screen">/host=master:write-attribute(name="directory-grouping",value="by-type")</pre><div class="para">
		This will update the controller's <code class="filename">host.xml</code> configuration file:
	</div><pre class="programlisting">&lt;servers directory-grouping="by-type"&gt;
  &lt;server name="server-one" group="main-server-group" &gt;
  &lt;/server&gt;
  &lt;server name="server-two" group="main-server-group" auto-start="true"&gt;
  &lt;/server&gt;
&lt;/servers&gt;</pre><div class="example"><a id="idm139978455807600">
      ⁠</a><p class="title"><strong>Example 2.19.  Directory Grouping by Type </strong></p><div class="example-contents"><div class="para">
			If JBoss EAP is installed using the Zip method and the domain's files are grouped by type, the directory structure in domain mode will be as follows.
		</div><pre class="screen"><em class="replaceable">EAP_HOME</em>/domain
            ├── data
            │   └── servers
            │       ├── server-one
            │       └── server-two
            ├── log
            │   └── servers
            │       ├── server-one
            │       └── server-two
            └── tmp
                └── servers
                    ├── server-one
                    └── server-two
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44679-767366+%5BLatest%5D&amp;comment=Title%3A+Directory+Grouping%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44679-767366+13+Aug+2015+19%3A29+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Use_Case_Overriding_Directories">
      ⁠</a>2.5.2. Use Case: Overriding Directories</h2></div></div></div><div class="para">
		In this example, the objective is to store domain files in the <code class="filename">/opt/jboss_eap/data/domain_data</code> directory, and give each top-level directory a custom name. The directory grouping used is the default: <code class="literal">by-server</code>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Log files stored in the subdirectory <code class="filename">all_logs</code>
			</div></li><li class="listitem"><div class="para">
				Data files stored in the subdirectory <code class="filename">all_data</code>
			</div></li><li class="listitem"><div class="para">
				Temporary files stored in the subdirectory <code class="filename">all_temp</code>
			</div></li><li class="listitem"><div class="para">
				Servers' files stored in the subdirectory <code class="filename">all_servers</code>
			</div></li></ul></div><div class="para">
		To achieve this configuration, you would override several system properties when starting JBoss EAP.
	</div><pre class="screen">./domain.sh \
      -Djboss.domain.temp.dir=/opt/jboss_eap/data/domain_data/all_temp \
      -Djboss.domain.log.dir=/opt/jboss_eap/data/domain_data/all_logs \
      -Djboss.domain.data.dir=/opt/jboss_eap/data/domain_data/all_data\
      -Djboss.domain.servers.dir=/opt/jboss_eap/data/domain_data/all_servers</pre><div class="para">
		The resulting path structure will be as follows:
	</div><pre class="screen">/opt/jboss_eap/data/domain_data/
├── all_data
│   └── content
├── all_logs
│   ├── host-controller.log
│   └── process-controller.log
├── all_servers
│   ├── server-one
│   │   ├── data
│   │   │   ├── content
│   │   │   ├── logging.properties
│   │   ├── log
│   │   │   └── server.log
│   │   └── tmp
│   │       ├── vfs
│   │       │   └── temp
│   │       └── work
│   │           └── jboss.web
│   │               └── default-host
│   └── server-two
│       ├── data
│       │   ├── content
│       │   ├── logging.properties
│       ├── log
│       │   └── server.log
│       └── tmp
│           ├── vfs
│           │   └── temp
│           └── work
│               └── jboss.web
│                   └── default-host
└── all_temp
    └── auth
          ...</pre><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44689-767607+%5BLatest%5D&amp;comment=Title%3A+Use+Case%3A+Overriding+Directories%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44689-767607+18+Aug+2015+00%3A42+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>