<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 19. Transaction Subsystem</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Transaction_Subsystem">
      ⁠</a>Chapter 19. Transaction Subsystem</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Transaction_Subsystem_Configuration">
      ⁠</a>19.1. Transaction Subsystem Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Transactions_Configuration_Overview1">
      ⁠</a>19.1.1. Transactions Configuration Overview</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Introduction</div>
			The following procedures show you how to configure the transactions subsystem of JBoss EAP 6.
		</div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="chap-Transaction_Subsystem.html#Configure_Your_Datasource_to_Use_JTA_Transactions1">Section 19.1.3, “Configure Your Datasource to Use JTA Transaction API”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Transaction_Subsystem.html#Configure_an_XA_Datasource">Section 19.1.4, “Configure an XA Datasource”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Transaction_Subsystem.html#Configure_the_Transaction_Manager1">Section 19.1.2, “Configure the Transaction Manager”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-Transaction_Subsystem.html#Configure_Logging_for_the_Transaction_Subsystem1">Section 19.1.6, “Configure Logging for the Transaction Subsystem”</a>
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4374-591665+%5BLatest%5D&amp;comment=Title%3A+Transactions+Configuration+Overview%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4374-591665+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_the_Transaction_Manager1">
      ⁠</a>19.1.2. Configure the Transaction Manager</h2></div></div></div><div class="para">
		You can configure the Transaction Manager (TM) using the web-based Management Console or the command-line Management CLI. For each command or option given, the assumption is made that you are running JBoss EAP 6 as a Managed Domain. If you use a Standalone Server or you want to modify a different profile than <code class="code">default</code>, you may need to modify the steps and commands in the following ways.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Notes about the Example Commands</strong></p><ul><li class="listitem"><div class="para">
				For the Management Console, the <code class="code">default</code> profile is the one which is selected when you first log into the console. If you need to modify the Transaction Manager's configuration in a different profile, select your profile instead of <code class="code">default</code>, in each instruction.
			</div><div class="para">
				Similarly, substitute your profile for the <code class="code">default</code> profile in the example CLI commands.
			</div></li><li class="listitem"><div class="para">
				If you use a Standalone Server, only one profile exists. Ignore any instructions to choose a specific profile. In CLI commands, remove the <code class="code">/profile=default</code> portion of the sample commands.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			In order for the TM options to be visible in the Management Console or Management CLI, the <code class="code">transactions</code> subsystem must be enabled. It is enabled by default, and required for many other subsystems to function properly, so it is very unlikely that it would be disabled.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Configure the TM Using the Management Console</div>
			To configure the TM using the web-based Management Console, select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the screen. If you use a managed domain, choose the correct profile from the <span class="guilabel"><strong>Profile</strong></span> selection box at the top left. Expand the <span class="guilabel"><strong>Container</strong></span> menu and select <span class="guilabel"><strong>Transactions</strong></span>.
		</div><div class="para">
		Most options are shown in the Transaction Manager configuration page. The <span class="guilabel"><strong>Recovery</strong></span> options are hidden by default. Click the <span class="guilabel"><strong>Recovery</strong></span> tab to see the recovery options. Click <span class="guilabel"><strong>Edit</strong></span> to edit any of the options. Changes take effect immediately.
	</div><div class="para">
		Click the <span class="guilabel"><strong>Need Help?</strong></span> label to display in-line help text.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Configure the TM using the Management CLI</div>
			In the Management CLI, you can configure the TM using a series of commands. The commands all begin with <code class="code">/profile=default/subsystem=transactions/</code> for a managed domain with profile <code class="code">default</code>, or <code class="code">/subsystem=transactions</code> for a Standalone Server.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			If transaction subsystem is configured to use hornetq journal as storage type for transaction logs, then two instances of JBoss EAP is not permitted to use the same directory for storing the journal. Application server instances can't share the same location and each has to configure unique location for it.
		</div></div></div><div class="table"><a id="idm139978528616672">
      ⁠</a><p class="title"><strong>Table 19.1. TM Configuration Options</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="TM Configuration Options"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Option </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> <div class="para">
						Enable Statistics
					</div>
					 </td><td> <div class="para">
						Whether to enable transaction statistics. These statistics can be viewed in the Management Console in the <span class="guilabel"><strong>Subsystem Metrics</strong></span> section of the <span class="guilabel"><strong>Runtime</strong></span> tab.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=enable-statistics,value=true)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						Enable TSM Status
					</div>
					 </td><td> <div class="para">
						Whether to enable the transaction status manager (TSM) service, which is used for out-of-process recovery. Running an out of process recovery manager to contact the ActionStatusService from different process is not supported (it is normally contacted in memory).
					</div>
					 </td><td> <div class="para">
						This configuration option is unsupported.
					</div>
					 </td></tr><tr><td> <div class="para">
						Default Timeout
					</div>
					 </td><td> <div class="para">
						The default transaction timeout. This defaults to <code class="literal">300</code> seconds. You can override this programmatically, on a per-transaction basis.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=default-timeout,value=300)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						Object Store Path
					</div>
					 </td><td> <div class="para">
						A relative or absolute filesystem path where the TM object store stores data. By default relative to the <code class="code">object-store-relative-to</code> parameter's value.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=object-store-path,value=tx-object-store)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						Object Store Path Relative To
					</div>
					 </td><td> <div class="para">
						References a global path configuration in the domain model. The default value is the data directory for JBoss EAP 6, which is the value of the property <code class="code">jboss.server.data.dir</code>, and defaults to <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/data/</code> for a Managed Domain, or <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/data/</code> for a Standalone Server instance. The value of the object store <code class="code">object-store-path</code> TM attribute is relative to this path.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=object-store-relative-to,value=jboss.server.data.dir)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						Socket Binding
					</div>
					 </td><td> <div class="para">
						Specifies the name of the socket binding used by the Transaction Manager for recovery and generating transaction identifiers, when the socket-based mechanism is used. Refer to <code class="code">process-id-socket-max-ports</code> for more information on unique identifier generation. Socket bindings are specified per server group in the <span class="guilabel"><strong>Server</strong></span> tab of the Management Console.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=socket-binding,value=txn-recovery-environment)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						Status Socket Binding
					</div>
					 </td><td> <div class="para">
						Specifies the socket binding to use for the Transaction Status manager.
					</div>
					 </td><td> <div class="para">
						This configuration option is unsupported.
					</div>
					 </td></tr><tr><td> <div class="para">
						Recovery Listener
					</div>
					 </td><td> <div class="para">
						Whether or not the Transaction Recovery process should listen on a network socket. Defaults to <code class="literal">false</code>.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=recovery-listener,value=false)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="para">
		The following options are for advanced use and can only be modified using the Management CLI. Be cautious when changing them from the default configuration. Contact <a href="https://access.redhat.com/support/contact/technicalSupport/">Red Hat Global Support Services</a> for more information.
	</div><div class="table"><a id="idm139978534862416">
      ⁠</a><p class="title"><strong>Table 19.2. Advanced TM Configuration Options</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Advanced TM Configuration Options"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Option </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> <div class="para">
						jts
					</div>
					 </td><td> <div class="para">
						Whether to use Java Transaction Service (JTS) transactions. Defaults to <code class="literal">false</code>, which uses JTA transactions only.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=jts,value=false)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						node-identifier
					</div>
					 </td><td> <div class="para">
						The node identifier for the Transaction Manager. This option is required in the following situations: 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									For JTS to JTS communications
								</div></li><li class="listitem"><div class="para">
									When two Transaction Managers access shared resource managers
								</div></li><li class="listitem"><div class="para">
									When two Transaction Managers access shared object stores
								</div></li></ul></div>
						 The <code class="literal">node-identifier</code> must be unique for each Transaction Manager as it is required to enforce data integrity during recovery. The <code class="literal">node-identifier</code> must also be unique for JTA because multiple nodes may interact with the same resource manager or share a transaction object store.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=node-identifier,value=1)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						process-id-socket-max-ports
					</div>
					 </td><td> <div class="para">
						The Transaction Manager creates a unique identifier for each transaction log. Two different mechanisms are provided for generating unique identifiers: a socket-based mechanism and a mechanism based on the process identifier of the process.
					</div>
					 <div class="para">
						In the case of the socket-based identifier, a socket is opened and its port number is used for the identifier. If the port is already in use, the next port is probed, until a free one is found. The <code class="code">process-id-socket-max-ports</code> represents the maximum number of sockets the TM will try before failing. The default value is <code class="literal">10</code>.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=process-id-socket-max-ports,value=10)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						process-id-uuid
					</div>
					 </td><td> <div class="para">
						Set to <code class="code">true</code> to use the process identifier to create a unique identifier for each transaction. Otherwise, the socket-based mechanism is used. Defaults to <code class="code">true</code>. Refer to <code class="code">process-id-socket-max-ports</code> for more information. To enable <code class="code">process-id-socket-binding</code>, set <code class="code">process-id-uuid</code> to <code class="code">false</code>.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=process-id-uuid,value=true)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						process-id-socket-binding
					</div>
					 </td><td> <div class="para">
						The name of the socket binding configuration to use if the transaction manager should use a socket-based process id. Will be <code class="code">undefined</code> if <code class="code">process-id-uuid</code> is <code class="code">true</code>; otherwise must be set.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=process-id-socket-binding,value=true)</code>
					</div>
					 </td></tr><tr><td> <div class="para">
						use-hornetq-store
					</div>
					 </td><td> <div class="para">
						Use HornetQ's journaled storage mechanisms instead of file-based storage, for the transaction logs. This is disabled by default, but can improve I/O performance. It is not recommended for JTS transactions on separate Transaction Managers. When changing this option, the server has to be restarted using the <code class="command">shutdown</code> command for the change to take effect.
					</div>
					 </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=transactions/:write-attribute(name=use-hornetq-store,value=false)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4310-770221+%5BLatest%5D&amp;comment=Title%3A+Configure+the+Transaction+Manager%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4310-770221+14+Sep+2015+07%3A06+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_Your_Datasource_to_Use_JTA_Transactions1">
      ⁠</a>19.1.3. Configure Your Datasource to Use JTA Transaction API</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This task shows you how to enable Java Transaction API (JTA) on your datasource.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Prerequisites</div>
			You must meet the following conditions before continuing with this task:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Your database or other resource must support Java Transaction API. If in doubt, consult the documentation for your database or other resource.
			</div></li><li class="listitem"><div class="para">
				Create a datasource. Refer to <a class="xref" href="chap-Datasource_Management.html#Create_a_Non-XA_Datasource_with_the_Management_Interfaces">Section 6.3.1, “Create a Non-XA Datasource with the Management Interfaces”</a>.
			</div></li><li class="listitem"><div class="para">
				Stop JBoss EAP 6.
			</div></li><li class="listitem"><div class="para">
				Have access to edit the configuration files directly, in a text editor.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978540046624">
      ⁠</a><p class="title"><strong>Procedure 19.1. Configure the Datasource to use Java Transaction API</strong></p><ol class="1"><li class="step"><p class="title"><strong>Open the configuration file in a text editor.</strong></p><div class="para">
				Depending on whether you run JBoss EAP 6 in a managed domain or standalone server, your configuration file will be in a different location.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Managed domain</strong></p><div class="para">
						The default configuration file for a managed domain is in <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> for Red Hat Enterprise Linux, and <code class="filename"><em class="replaceable">EAP_HOME\domain\configuration\domain.xml</em></code> for Microsoft Windows Server.
					</div></li>
				 <li class="step"><p class="title"><strong>Standalone server</strong></p><div class="para">
						The default configuration file for a standalone server is in <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code> for Red Hat Enterprise Linux, and <code class="filename"><em class="replaceable">EAP_HOME\standalone\configuration\standalone.xml</em></code> for Microsoft Windows Server.
					</div></li>

			</ul></li><li class="step"><p class="title"><strong>Locate the <code class="literal">&lt;datasource&gt;</code> tag that corresponds to your datasource.</strong></p><div class="para">
				The datasource will have the <code class="literal">jndi-name</code> attribute set to the one you specified when you created it. For example, the ExampleDS datasource looks like this:
			</div><pre class="screen">&lt;datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="H2DS" enabled="true" jta="true" use-java-context="true" use-ccm="true"&gt;</pre></li><li class="step"><p class="title"><strong>Set the <code class="literal">jta</code> attribute to <code class="literal">true</code>.</strong></p><div class="para">
				Add the following to the contents of your <code class="literal">&lt;datasource&gt;</code> tag, as they appear in the previous step: <code class="literal">jta="true"</code>
			</div><div class="para">
				Unless you have a specific use case (such as defining a read only datasource) Red Hat discourages overriding the default value of <code class="literal">jta=true</code>. This setting indicates that the datasource will honor the Java Transaction API and allows better tracking of connections by the JCA implementation.
			</div></li><li class="step"><p class="title"><strong>Save the configuration file.</strong></p><div class="para">
				Save the configuration file and exit the text editor.
			</div></li><li class="step"><p class="title"><strong>Start JBoss EAP 6.</strong></p><div class="para">
				Relaunch the JBoss EAP 6 server.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			JBoss EAP 6 starts, and your datasource is configured to use Java Transaction API.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4295-741398+%5BLatest%5D&amp;comment=Title%3A+Configure+Your+Datasource+to+Use+JTA+Transaction+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4295-741398+04+Feb+2015+22%3A40+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_an_XA_Datasource">
      ⁠</a>19.1.4. Configure an XA Datasource</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Prerequisites</div>
			Log into the Management Console.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Add a new datasource.</strong></p><div class="para">
				Add a new datasource to JBoss EAP 6. Click the <span class="guilabel"><strong>XA Datasource</strong></span> tab at the top.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Refer to <em class="citetitle">Create an XA Datasource with the Management Interfaces</em> section of the <em class="citetitle">Administration and Configuration Guide</em> on the Red Hat Customer Portal for information on how to add a new datasource to JBoss EAP 6.
				</div></div></div></li><li class="step"><p class="title"><strong>Configure additional properties as appropriate.</strong></p><div class="para">
				All datasource parameters are listed in <a class="xref" href="chap-Datasource_Management.html#Datasource_Parameters1">Section 6.7.1, “Datasource Parameters”</a>.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Your XA Datasource is configured and ready to use.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4303-765631+%5BLatest%5D&amp;comment=Title%3A+Configure+an+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4303-765631+22+Jul+2015+01%3A18+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Transaction_Log_Messages">
      ⁠</a>19.1.5. About Transaction Log Messages</h2></div></div></div><div class="para">
		To track transaction status while keeping the log files readable, use the <code class="code">DEBUG</code> log level for the transaction logger. For detailed debugging, use the <code class="code">TRACE</code> log level. Refer to <a class="xref" href="chap-Transaction_Subsystem.html#Configure_Logging_for_the_Transaction_Subsystem1">Section 19.1.6, “Configure Logging for the Transaction Subsystem”</a> for information on configuring the transaction logger.
	</div><div class="para">
		The transaction manager can generate a lot of logging information when configured to log in the <code class="code">TRACE</code> log level. Following are some of the most commonly-seen messages. This list is not comprehensive, so you may see other messages than these.
	</div><div class="table"><a id="idm139978453734112">
      ⁠</a><p class="title"><strong>Table 19.3. Transaction State Change</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Transaction State Change"><colgroup><col/><col/></colgroup><tbody><tr><td> Transaction Begin </td><td> <div class="para">
						When a transaction begins, the following code is executed:
					</div>
					 
<pre class="screen">com.arjuna.ats.arjuna.coordinator.BasicAction::Begin:1342</pre>
					 
<pre class="screen">tsLogger.logger.trace("BasicAction::Begin() for action-id "+ get_uid());</pre>
					 </td></tr><tr><td> Transaction Commit </td><td> <div class="para">
						When a transaction commits, the following code is executed:
					</div>
					 
<pre class="screen">com.arjuna.ats.arjuna.coordinator.BasicAction::End:1342</pre>
					 
<pre class="screen">tsLogger.logger.trace("BasicAction::End() for action-id "+ get_uid());</pre>
					 </td></tr><tr><td> Transaction Rollback </td><td> <div class="para">
						When a transaction rolls back, the following code is executed:
					</div>
					 
<pre class="screen">com.arjuna.ats.arjuna.coordinator.BasicAction::Abort:1575</pre>
					 
<pre class="screen">tsLogger.logger.trace("BasicAction::Abort() for action-id "+ get_uid());</pre>
					 </td></tr><tr><td> Transaction Timeout </td><td> <div class="para">
						When a transaction times out, the following code is executed:
					</div>
					 
<pre class="screen">com.arjuna.ats.arjuna.coordinator.TransactionReaper::doCancellations:349</pre>
					 
<pre class="screen">tsLogger.logger.trace("Reaper Worker " + Thread.currentThread() + " attempting to cancel " + e._control.get_uid());</pre>
					 <div class="para">
						You will then see the same thread rolling back the transaction as shown above.
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+9018-591860+%5BLatest%5D&amp;comment=Title%3A+About+Transaction+Log+Messages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9018-591860+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_Logging_for_the_Transaction_Subsystem1">
      ⁠</a>19.1.6. Configure Logging for the Transaction Subsystem</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Use this procedure to control the amount of information logged about transactions, independent of other logging settings in JBoss EAP 6. The main procedure shows how to do this in the web-based Management Console. The Management CLI command is given afterward.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978451620944">
      ⁠</a><p class="title"><strong>Procedure 19.2. Configure the Transaction Logger Using the Management Console</strong></p><ol class="1"><li class="step"><p class="title"><strong>Navigate to the Logging configuration area.</strong></p><div class="para">
				In the Management Console, click the <span class="guilabel"><strong>Configuration</strong></span> tab. If you use a managed domain, choose the server profile you wish to configure, from the <span class="guilabel"><strong>Profile</strong></span> selection box at the top left.
			</div><div class="para">
				Expand the <span class="guilabel"><strong>Core</strong></span> menu, and select <span class="guilabel"><strong>Logging</strong></span>.
			</div></li><li class="step"><p class="title"><strong>Edit the <code class="code">com.arjuna</code> attributes.</strong></p><div class="para">
				Select the <span class="guilabel"><strong>Log Categories</strong></span> tab. Select <code class="code">com.arjuna</code> and lick <span class="guilabel"><strong>Edit</strong></span> in the <span class="guilabel"><strong>Details</strong></span> section. This is where you can add class-specific logging information. The <code class="code">com.arjuna</code> class is already present. You can change the log level and whether to use parent handlers.
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Log Level</span></dt><dd><div class="para">
							The log level is <code class="literal">WARN</code> by default. Because transactions can produce a large quantity of logging output, the meaning of the standard logging levels is slightly different for the transaction logger. In general, messages tagged with levels at a lower severity than the chosen level are discarded.
						</div><div class="itemizedlist"><p class="title"><strong>Transaction Logging Levels, from Most to Least Verbose</strong></p><ul><li class="listitem"><div class="para">
									TRACE
								</div></li><li class="listitem"><div class="para">
									DEBUG
								</div></li><li class="listitem"><div class="para">
									INFO
								</div></li><li class="listitem"><div class="para">
									WARN
								</div></li><li class="listitem"><div class="para">
									ERROR
								</div></li><li class="listitem"><div class="para">
									FAILURE
								</div></li></ul></div></dd><dt><span class="term">Use Parent Handlers</span></dt><dd><div class="para">
							Whether the logger should send its output to its parent logger. The default behavior is <code class="literal">true</code>.
						</div></dd></dl></div></li><li class="step"><div class="para">
				Changes take effect immediately.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4311-632600+%5BLatest%5D&amp;comment=Title%3A+Configure+Logging+for+the+Transaction+Subsystem%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4311-632600+21+Apr+2014+21%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Transaction_Administration">
      ⁠</a>19.2. Transaction Administration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Browse_and_Manage_Transactions">
      ⁠</a>19.2.1. Browse and Manage Transactions</h2></div></div></div><div class="para">
		The Management CLI supports the ability to browse and manipulate transaction records. This functionality is provided by the interaction between the Transaction Manager and the management API of JBoss EAP 6.
	</div><div class="para">
		The Transaction Manager stores information about each pending transaction and the participants involved the transaction, in a persistent storage called the <em class="firstterm">object store</em>. The management API exposes the object store as a resource called the <code class="code">log-store</code>. An API operation called <code class="code">probe</code> reads the transaction logs and creates a node for each log. You can call the <code class="code">probe</code> command manually, whenever you need to refresh the <code class="code">log-store</code>. It is normal for transaction logs to appear and disappear quickly.
	</div><div class="example"><a id="refresh_log_store">
      ⁠</a><p class="title"><strong>Example 19.1. Refresh the Log Store</strong></p><div class="example-contents"><div class="para">
			This command refreshes the log store for server groups which use the profile <code class="literal">default</code> in a managed domain. For a standalone server, remove the <code class="literal">profile=default</code> from the command.
		</div><pre class="screen">/profile=default/subsystem=transactions/log-store=log-store/:probe</pre></div></div><div class="example"><a id="idm139978539740464">
      ⁠</a><p class="title"><strong>Example 19.2. View All Prepared Transactions</strong></p><div class="example-contents"><div class="para">
			To view all prepared transactions, first refresh the log store (see <a class="xref" href="chap-Transaction_Subsystem.html#refresh_log_store">Example 19.1, “Refresh the Log Store”</a>), then run the following command, which functions similarly to a filesystem <code class="command">ls</code> command.
		</div><pre class="screen">ls /profile=default/subsystem=transactions/log-store=log-store/transactions</pre><div class="para">
			Each transaction is shown, along with its unique identifier. Individual operations can be run against an individual transaction (see <a class="xref" href="chap-Transaction_Subsystem.html#manage_transaction">Manage a Transaction</a>).
		</div></div></div><div class="variablelist"><a id="manage_transaction">
      ⁠</a><p class="title"><strong>Manage a Transaction</strong></p><dl class="variablelist"><dt><span class="term">View a transaction's attributes.</span></dt><dd><div class="para">
					To view information about a transaction, such as its JNDI name, EIS product name and version, or its status, use the <code class="code">:read-resource</code> CLI command.
				</div><div class="informalexample"><pre class="screen">/profile=default/subsystem=transactions/log-store=log-store/transactions=<em class="replaceable">0\:ffff7f000001\:-b66efc2\:4f9e6f8f\:9</em>:read-resource</pre></div></dd><dt><span class="term">View the participants of a transaction.</span></dt><dd><div class="para">
					Each transaction log contains a child element called <code class="code">participants</code>. Use the <code class="code">read-resource</code> CLI command on this element to see the participants of the transaction. Participants are identified by their JNDI names.
				</div><div class="informalexample"><pre class="screen">/profile=default/subsystem=transactions/log-store=log-store/transactions=<em class="replaceable">0\:ffff7f000001\:-b66efc2\:4f9e6f8f\:9</em>/participants=<em class="replaceable">java\:\/JmsXA</em>:read-resource</pre></div><div class="para">
					The result may look similar to this:
				</div><div class="informalexample"><pre class="screen">
{
   "outcome" =&gt; "success",
   "result" =&gt; {
       "eis-product-name" =&gt; "HornetQ",
       "eis-product-version" =&gt; "2.0",
       "jndi-name" =&gt; "java:/JmsXA",
       "status" =&gt; "HEURISTIC",
       "type" =&gt; "/StateManager/AbstractRecord/XAResourceRecord"
   }
}
</pre></div><div class="para">
					The outcome status shown here is in a <code class="code">HEURISTIC</code> state and is eligible for recovery. See <a class="xref" href="chap-Transaction_Subsystem.html#recover_transaction">Recover a transaction.</a> for more details.
				</div><div class="para">
					In special cases it is possible to create orphan records in the object store, that is XAResourceRecords, which do not have any corresponding transaction record in the log. For example, XA resource prepared but crashed before the TM recorded and is inaccessible for the domain management API. To access such records you need to set management option <code class="literal">expose-all-logs</code> to <code class="literal">true</code>. This option is not saved in management model and is restored to <code class="literal">false</code> when the server is restarted. 
<pre class="screen">/profile=default/subsystem=transactions/log-store=log-store:write-attribute(name=expose-all-logs, value=true)</pre>

				</div></dd><dt><span class="term">Delete a transaction.</span></dt><dd><div class="para">
					Each transaction log supports a <code class="code">:delete</code> operation, to delete the transaction log representing the transaction.
				</div><div class="informalexample"><pre class="screen">/profile=default/subsystem=transactions/log-store=log-store/transactions=<em class="replaceable">0\:ffff7f000001\:-b66efc2\:4f9e6f8f\:9</em>:delete</pre></div></dd><dt><a id="recover_transaction">
      ⁠</a><span class="term">Recover a transaction.</span></dt><dd><div class="para">
					Each transaction participant supports recovery via the <code class="code">:recover</code> CLI command.
				</div><div class="informalexample"><pre class="screen">/profile=default/subsystem=transactions/log-store=log-store/transactions=<em class="replaceable">0\:ffff7f000001\:-b66efc2\:4f9e6f8f\:9/participants=2</em>:recover</pre></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Recovery of heuristic transactions and participants</strong></p><ul><li class="listitem"><div class="para">
							If the transaction's status is <code class="literal">HEURISTIC</code>, the recovery operation changes the state to <code class="literal">PREPARE</code> and triggers a recovery.
						</div></li><li class="listitem"><div class="para">
							If one of the transaction's participants is heuristic, the recovery operation tries to replay the <code class="code">commit</code> operation. If successful, the participant is removed from the transaction log. You can verify this by re-running the <code class="code">:probe</code> operation on the <code class="code">log-store</code> and checking that the participant is no longer listed. If this is the last participant, the transaction is also deleted.
						</div></li></ul></div></dd><dt><span class="term">Refresh the status of a transaction which needs recovery.</span></dt><dd><div class="para">
					If a transaction needs recovery, you can use the <code class="code">:refresh</code> CLI command to be sure it still requires recovery, before attempting the recovery.
				</div><div class="informalexample"><pre class="screen">/profile=default/subsystem=transactions/log-store=log-store/transactions=<em class="replaceable">0\:ffff7f000001\:-b66efc2\:4f9e6f8f\:9/participants=2</em>:refresh</pre></div></dd></dl></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">View Transaction Statistics</div>
			If Transaction Manager statistics are enabled, you can view statistics about the Transaction Manager and transaction subsystem. See <a class="xref" href="chap-Transaction_Subsystem.html#Configure_the_Transaction_Manager1">Section 19.1.2, “Configure the Transaction Manager”</a>  for information about how to enable Transaction Manager statistics.
		</div><div class="para">
		You can view statistics either via the management console or the Management CLI. In the management console, transaction statistics are available via <span class="guimenu"><strong>Runtime</strong></span> → <span class="guimenuitem"><strong>Status</strong></span> → <span class="guimenuitem"><strong>Subsystems</strong></span> → <span class="guimenuitem"><strong>Transactions</strong></span>. Transaction statistics are available for each server in a managed domain. To view the status of a different server, select <span class="guilabel"><strong>Change Server</strong></span> in the left-hand menu and select the server from the list.
	</div><div class="para">
		The following table shows each available statistic, its description, and the Management CLI command to view the statistic.
	</div><div class="table"><a id="idm139978508120176">
      ⁠</a><p class="title"><strong>Table 19.4. Transaction Subsystem Statistics</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Transaction Subsystem Statistics"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Statistic </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> Total </td><td> <div class="para">
						The total number of transactions processed by the Transaction Manager on this server.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-transactions,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Committed </td><td> <div class="para">
						The number of committed transactions processed by the Transaction Manager on this server.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-committed-transactions,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Aborted </td><td> <div class="para">
						The number of aborted transactions processed by the Transaction Manager on this server.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-aborted-transactions,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Timed Out </td><td> <div class="para">
						The number of timed out transactions processed by the Transaction Manager on this server.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-timed-out-transactions,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Heuristics </td><td> <div class="para">
						Not available in the Management Console. Number of transactions in a heuristic state.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-heuristics,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> In-Flight Transactions </td><td> <div class="para">
						Not available in the Management Console. Number of transactions which have begun but not yet terminated.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-inflight-transactions,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Failure Origin - Applications </td><td> <div class="para">
						The number of failed transactions whose failure origin was an application.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-application-rollbacks,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Failure Origin - Resources </td><td> <div class="para">
						The number of failed transactions whose failure origin was a resource.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/:read-attribute(name=number-of-resource-rollbacks,include-defaults=true)</pre></div>
					</div>
					 </td></tr><tr><td> Participant ID </td><td> <div class="para">
						The ID of the participant.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/log-store=log-store/transactions=0\:ffff7f000001\:-b66efc2\:4f9e6f8f\:9:read-children-names(child-type=participants)</pre></div>
					</div>
					 </td></tr><tr><td> List of all transactions </td><td> <div class="para">
						The complete list of transactions.
					</div>
					 </td><td> <div class="para">
						<div class="informalexample"><pre class="screen">/host=<em class="replaceable">master</em>/server=<em class="replaceable">server-one</em>/subsystem=transactions/log-store=log-store:read-children-names(child-type=transactions)</pre></div>
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4312-760806+%5BLatest%5D&amp;comment=Title%3A+Browse+and+Manage+Transactions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4312-760806+09+Jun+2015+04%3A29+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Transaction_References">
      ⁠</a>19.3. Transaction References</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JBoss_Transactions_Errors_and_Exceptions1">
      ⁠</a>19.3.1. JBoss Transactions Errors and Exceptions</h2></div></div></div><div class="para">
		For details about exceptions thrown by methods of the <code class="classname">UserTransaction</code> class, see the <em class="citetitle">UserTransaction API</em> specification at <a href="http://docs.oracle.com/javaee/6/api/javax/transaction/UserTransaction.html">http://docs.oracle.com/javaee/6/api/javax/transaction/UserTransaction.html</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4299-689191+%5BLatest%5D&amp;comment=Title%3A+JBoss+Transactions+Errors+and+Exceptions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4299-689191+30+Jul+2014+02%3A47+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JTA_Clustering_Limitations1">
      ⁠</a>19.3.2. Limitations on JTA Transactions</h2></div></div></div><div class="para">
		JTA transactions are not fully transaction distribution aware across multiple instances of JBoss EAP 6. In the current implementation, transaction context is passed along the remote EJB calls. However, this works only for simple scenarios where one server calls another server. If there are multiple servers connecting to the transaction distribution, the context propagation is not completely safe.
	</div><div class="para">
		For full transaction distribution support behavior, you must use JTS transactions. You must configure the ORB in order to use JTS transactions, which includes: 
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					enabling transactions in the JacORB subsystem;
				</div></li><li class="listitem"><div class="para">
					configuring the Transaction subsystem to use JTS transactions;
				</div></li><li class="listitem"><div class="para">
					calling EJB by using IIOP protocol.
				</div></li></ul></div>

	</div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="chap-Transaction_Subsystem.html#Configure_the_ORB_for_JTS_Transactions">Section 19.4.3, “Configure the ORB for JTS Transactions”</a>
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4316-770756+%5BLatest%5D&amp;comment=Title%3A+Limitations+on+JTA+Transactions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4316-770756+28+Sep+2015+04%3A49+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-ORB_Configuration">
      ⁠</a>19.4. ORB Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="CORBA">
      ⁠</a>19.4.1. About Common Object Request Broker Architecture (CORBA)</h2></div></div></div><div class="para">
		<em class="firstterm">Common Object Request Broker Architecture (CORBA)</em> is a standard that enables applications and services to work together even when they are written in multiple, otherwise-incompatible, languages or hosted on separate platforms. CORBA requests are brokered by a server-side component called an <em class="firstterm">Object Request Broker (ORB)</em>. JBoss EAP 6 provides an ORB instance, by means of the JacORB component.
	</div><div class="para">
		The ORB is used internally for <em class="firstterm">Java Transaction Service (JTS)</em> transactions, and is also available for use by your own applications.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4979-591675+%5BLatest%5D&amp;comment=Title%3A+About+Common+Object+Request+Broker+Architecture+%28CORBA%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4979-591675+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JacORB_Configuration">
      ⁠</a>19.4.2. JacORB Configuration</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			In a managed domain, the JacORB subsystem is available in <code class="literal">full</code> and <code class="literal">full-ha</code> profiles only. In a standalone server, it is available when you use the <code class="filename">standalone-full.xml</code> or <code class="filename">standalone-full-ha.xml</code> configurations.
		</div></div></div><div class="para">
		JacORB properties are most easily configured using the Management CLI. Some attributes are set in the subsystem directly, and others must be set at the system level.
	</div><div class="para">
		To view the settings that can be configured directly in the subsystem, use the following Management CLI command:
	</div><pre class="screen">/subsystem=jacorb:read-resource(include-runtime=true, recursive=true)</pre><div class="para">
		The current settings will be listed:
	</div><pre class="screen">"add-component-via-interceptor" =&gt; "on",
"cache-poa-names" =&gt; "off",
"cache-typecodes" =&gt; "off",
"chunk-custom-rmi-valuetypes" =&gt; "on",
"client-requires" =&gt; "None",
"client-supports" =&gt; "MutualAuth",
"client-timeout" =&gt; 0,
"comet" =&gt; "off",
"export-corbaloc" =&gt; "on",
"giop-minor-version" =&gt; 2,
"indirection-encoding-disable" =&gt; "off",
"iona" =&gt; "off",
"lax-boolean-encoding" =&gt; "off",
"max-managed-buf-size" =&gt; 24,
"max-server-connections" =&gt; 2147483647,
"max-threads" =&gt; 32,
"monitoring" =&gt; "off",
"name" =&gt; "JBoss",
"outbuf-cache-timeout" =&gt; -1,
"outbuf-size" =&gt; 2048,
"pool-size" =&gt; 5,
"print-version" =&gt; "off",
"properties" =&gt; undefined,
"queue-max" =&gt; 100,
"queue-min" =&gt; 10,
"queue-wait" =&gt; "off",
"retries" =&gt; 5,
"retry-interval" =&gt; 500,
"root-context" =&gt; "JBoss/Naming/root",
"security" =&gt; "identity",
"security-domain" =&gt; undefined,
"server-requires" =&gt; "None",
"server-supports" =&gt; "MutualAuth",
"server-timeout" =&gt; 0,
"socket-binding" =&gt; "jacorb",
"ssl-socket-binding" =&gt; "jacorb-ssl",
"strict-check-on-tc-creation" =&gt; "off",
"sun" =&gt; "on",
"support-ssl" =&gt; "off",
"transactions" =&gt; "spec",
"use-bom" =&gt; "off",
"use-imr" =&gt; "off",
"ior-settings" =&gt; undefined</pre><div class="para">
		Other settings must be configured at the system level. Be aware that system-level settings are not transparent in the JBoss EAP model and, as such, are not visible when interrogating the JacORB subsystem specifically. They will not appear, for example, when using the <code class="command">jacorb:read-resource</code> command shown above.
	</div><div class="para">
		Use the following command examples to set JacORB attributes using system-level properties:
	</div><pre class="screen">/system-property=jacorb.connection.client.pending_reply_timeout:add(value=600000)</pre><pre class="screen">/system-property=jacorb.connection.client.idle_timeout:add(value=120000)</pre><pre class="screen">/system-property=jacorb.connection.server.timeout:add(value=300000)</pre><pre class="screen">/system-property=jacorb.native_char_codeset:add(value=UTF8)</pre><pre class="screen">/system-property=jacorb.native_wchar_codeset:add(value=UTF16)</pre><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44628-767581+%5BLatest%5D&amp;comment=Title%3A+JacORB+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44628-767581+17+Aug+2015+17%3A56+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_the_ORB_for_JTS_Transactions">
      ⁠</a>19.4.3. Configure the ORB for JTS Transactions</h2></div></div></div><div class="para">
		In a default installation of JBoss EAP 6, the ORB is disabled. You can enable the ORB using the command-line Management CLI.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978532638880">
      ⁠</a><p class="title"><strong>Procedure 19.3. Configure the ORB using the Management Console</strong></p><ol class="1"><li class="step"><p class="title"><strong>View the profile settings.</strong></p><div class="para">
				Select <span class="guilabel"><strong>Configuration</strong></span> from the top of the management console. If you use a managed domain, select either the <span class="guilabel"><strong>full</strong></span> or <span class="guilabel"><strong>full-ha</strong></span> profile from the selection box at the top left.
			</div></li><li class="step"><p class="title"><strong>Modify the <span class="guilabel"><strong>Initializers</strong></span> Settings</strong></p><div class="para">
				Expand the <span class="guilabel"><strong>Subsystems</strong></span> menu. Expand the <span class="guilabel"><strong>Container</strong></span> menu and select <span class="guilabel"><strong>JacORB</strong></span>.
			</div><div class="para">
				In the form that appears in the main screen, select the <span class="guilabel"><strong>Initializers</strong></span> tab and click the <span class="guilabel"><strong>Edit</strong></span> button.
			</div><div class="para">
				Enable the security interceptors by setting the value of <span class="guilabel"><strong>Security</strong></span> to <code class="literal">on</code>.
			</div><div class="para">
				To enable the ORB for JTS, set the <span class="guilabel"><strong>Transaction Interceptors</strong></span> value to <code class="literal">on</code>, rather than the default <code class="literal">spec</code>.
			</div><div class="para">
				Refer to the <span class="guilabel"><strong>Need Help?</strong></span> link in the form for detailed explanations about these values. Click <span class="guilabel"><strong>Save</strong></span> when you have finished editing the values.
			</div></li><li class="step"><p class="title"><strong>Advanced ORB Configuration</strong></p><div class="para">
				Refer to the other sections of the form for advanced configuration options. Each section includes a <span class="guilabel"><strong>Need Help?</strong></span> link with detailed information about the parameters.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Configure the ORB using the Management CLI</div>
			You can configure each aspect of the ORB using the Management CLI. The following commands configure the initializers to the same values as the procedure above, for the Management Console. This is the minimum configuration for the ORB to be used with JTS.
		</div><div class="para">
		These commands are configured for a managed domain using the <span class="guilabel"><strong>full</strong></span> profile. If necessary, change the profile to suit the one you need to configure. If you use a standalone server, omit the <code class="literal">/profile=full</code> portion of the commands.
	</div><div class="example"><a id="idm139978517101952">
      ⁠</a><p class="title"><strong>Example 19.3. Enable the Security Interceptors</strong></p><div class="example-contents"><pre class="screen">/profile=<em class="replaceable">full</em>/subsystem=jacorb/:write-attribute(name=security,value=on)</pre></div></div><div class="example"><a id="idm139978513194624">
      ⁠</a><p class="title"><strong>Example 19.4. Enable Transactions in the JacORB Subsystem</strong></p><div class="example-contents"><pre class="screen">/profile=<em class="replaceable">full</em>/subsystem=jacorb/:write-attribute(name=transactions,value=on)</pre></div></div><div class="example"><a id="idm139978532704304">
      ⁠</a><p class="title"><strong>Example 19.5. Enable JTS in the Transaction Subsystem</strong></p><div class="example-contents"><pre class="screen">/profile=<em class="replaceable">full</em>/subsystem=transactions:write-attribute(name=jts,value=true)</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			For JTS activation, the server must be restarted as reload is not enough.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4981-766792+%5BLatest%5D&amp;comment=Title%3A+Configure+the+ORB+for+JTS+Transactions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4981-766792+05+Aug+2015+07%3A33+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JDBC_Object_Store_Support">
      ⁠</a>19.5. JDBC Object Store Support</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JDBC_Store_for_Transactions">
      ⁠</a>19.5.1. JDBC Store for Transactions</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist prereqs-list"><p class="title"><strong>Prerequisites:</strong></p><ul class="prereqs-list prereqs-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>
			</div></li></ul></div><div class="para">
		Transactions can use a JDBC datasource as its object store. If the database to be used is configured for failover and recovery, this may be a better option than using disk space on an application server. The advantages must be weighed up against the fact that a raw JDBC object store is a special object store and may not perform as well as a file system or HornetQ journal object store.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			A JDBC datasource used as a Transactions object store <span class="emphasis"><em>must</em></span> specify <code class="code">jta="false"</code> in the <code class="literal">datasource</code> section of the server's configuration file.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978455045248">
      ⁠</a><p class="title"><strong>Procedure 19.4.  Enable Use of a JDBC Datasource as a Transactions Object Store </strong></p><ol class="1"><li class="step"><div class="para">
				Set <code class="code">use-jdbc-store</code> to <code class="literal">true</code>.
			</div><pre class="screen"><code class="command">/subsystem=transactions:write-attribute(name=use-jdbc-store, value=true)</code></pre></li><li class="step"><div class="para">
				Set <code class="code">jdbc-store-datasource</code> to the JNDI name for the data source to use.
			</div><pre class="screen"><code class="command">/subsystem=transactions:write-attribute(name=jdbc-store-datasource, value=java:jboss/datasources/TransDS)</code></pre></li><li class="step"><div class="para">
				Restart the JBoss EAP server for the changes to take effect.
			</div><pre class="screen"><code class="command">shutdown --restart=true</code></pre></li></ol></div><div class="para">
		The complete set of attributes is provided below.
	</div><div class="table"><a id="idm139978514278816">
      ⁠</a><p class="title"><strong>Table 19.5. Transactions JDBC Store Properties</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Transactions JDBC Store Properties"><colgroup><col width="43%" class="col_1"/><col width="57%" class="col_2"/></colgroup><thead><tr><th> Property </th><th> Description </th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">use-jdbc-store</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						Set this to "true" to enable the JDBC store for transactions.
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-store-datasource</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						The JNDI name of the JDBC datasource used for storage.
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-action-store-drop-table</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						Drop and recreate the action store tables at launch. Optional, defaults to "false".
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-action-store-table-prefix</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						The prefix for the action store table names. Optional.
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-communication-store-drop-table</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						Drop and recreate the communication store tables at launch. Optional, defaults to "false".
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-communication-store-table-prefix</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						The prefix for the communication store table names. Optional.
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-state-store-drop-table</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						Drop and recreate the state store tables at launch. Optional, defaults to "false".
					</div>
					 </td></tr><tr><td style="text-align: left" valign="top"> <div class="para"><p/>
						<code class="literal">jdbc-state-store-table-prefix</code>
					</div>
					 </td><td style="text-align: left" valign="top"> <div class="para"><p/>
						The prefix for the state store table names. Optional.
					</div>
					 </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist see-also-list"><p class="title"><strong>See Also:</strong></p><ul class="see-also-list see-also-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Transaction_Subsystem.html#Configure_Your_Datasource_to_Use_JTA_Transactions1">Section 19.1.3, “Configure Your Datasource to Use JTA Transaction API”</a>
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+22501-665457+%5BLatest%5D&amp;comment=Title%3A+JDBC+Store+for+Transactions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=22501-665457+09+Jun+2014+15%3A46+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>