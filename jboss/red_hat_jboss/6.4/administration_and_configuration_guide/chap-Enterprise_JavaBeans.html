<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 21. Enterprise JavaBeans</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Enterprise_JavaBeans">
      ⁠</a>Chapter 21. Enterprise JavaBeans</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Introduction3">
      ⁠</a>21.1. Introduction</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Overview_of_Enterprise_JavaBeans">
      ⁠</a>21.1.1. Overview of Enterprise JavaBeans</h2></div></div></div><div class="para">
		Enterprise JavaBeans (EJB) 3.1 is an API for developing distributed, transactional, secure and portable Java EE applications through the use of server-side components called Enterprise Beans. Enterprise Beans implement the business logic of an application in a decoupled manner that encourages reuse. Enterprise JavaBeans 3.1 is documented as the Java EE specification JSR-318.
	</div><div class="para">
		JBoss EAP 6 has full support for applications built using the Enterprise JavaBeans 3.1 specification.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4525-591667+%5BLatest%5D&amp;comment=Title%3A+Overview+of+Enterprise+JavaBeans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4525-591667+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Overview_of_Enterprise_JavaBeans_for_Administrators1">
      ⁠</a>21.1.2. Overview of Enterprise JavaBeans for Administrators</h2></div></div></div><div class="para">
		JBoss administrators have many configuration options available to them to control the performance of Enterprise Beans in JBoss EAP 6. These options can be accessed using the Management Console or the command line configuration tool. Editing the XML server configuration file to apply changes is also possible but not recommended.
	</div><div class="para">
		The EJB configuration options are located in slightly different places in the Management Console depending on how the server is being run.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Click on the <span class="guilabel"><strong>Configuration</strong></span> tab at the top of the Management Console.
			</div></li><li class="step"><div class="para">
				If you are running in Domain mode, select a profile from the <span class="guilabel"><strong>Profiles</strong></span> drop down menu on the top left.
			</div></li><li class="step"><div class="para">
				Expand the <span class="guilabel"><strong>Subsystems</strong></span> menu.
			</div></li><li class="step"><div class="para">
				Expand the <span class="guilabel"><strong>Container</strong></span> menu, then select <span class="guilabel"><strong>EJB 3</strong></span>.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4544-632640+%5BLatest%5D&amp;comment=Title%3A+Overview+of+Enterprise+JavaBeans+for+Administrators%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4544-632640+22+Apr+2014+00%3A23+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enterprise_Beans">
      ⁠</a>21.1.3. Enterprise Beans</h2></div></div></div><div class="para">
		Enterprise beans are server-side application components as defined in the Enterprise JavaBeans (EJB) 3.1 specification, JSR-318. Enterprise beans are designed for the implementation of application business logic in a decoupled manner to encourage reuse.
	</div><div class="para">
		Enterprise beans are written as Java classes and annotated with the appropriate EJB annotations. They can be deployed to the application server in their own archive (a JAR file) or be deployed as part of a Java EE application. The application server manages the lifecycle of each enterprise bean and provides services to them such as security, transactions, and concurrency management.
	</div><div class="para">
		An enterprise bean can also define any number of business interfaces. Business interfaces provide greater control over which of the bean's methods are available to clients and can also allow access to clients running in remote JVMs.
	</div><div class="para">
		There are three types of Enterprise Bean: Session beans, Message-driven beans and Entity beans.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Entity beans are now deprecated in EJB 3.1 and Red Hat recommends the use of JPA entities instead. Red Hat only recommends the use of Entity beans for backwards compatibility with legacy systems.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5089-591681+%5BLatest%5D&amp;comment=Title%3A+Enterprise+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5089-591681+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Session_Beans">
      ⁠</a>21.1.4. Session Beans</h2></div></div></div><div class="para">
		Session Beans are Enterprise Beans that encapsulate a set of related business processes or tasks and are injected into the classes that request them. There are three types of session bean: stateless, stateful, and singleton.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4527-591667+%5BLatest%5D&amp;comment=Title%3A+Session+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4527-591667+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Message-Driven_Beans1">
      ⁠</a>21.1.5. Message-Driven Beans</h2></div></div></div><div class="para">
		Message-driven Beans (MDBs) provide an event driven model for application development. The methods of MDBs are not injected into or invoked from client code but are triggered by the receipt of messages from a messaging service such as a Java Messaging Service (JMS) server. The Java EE 6 specification requires that JMS is supported but other messaging systems can be supported as well.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4528-591667+%5BLatest%5D&amp;comment=Title%3A+Message-Driven+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4528-591667+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_Bean_Pools">
      ⁠</a>21.2. Configuring Bean Pools</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Bean_Pools">
      ⁠</a>21.2.1. Bean Pools</h2></div></div></div><div class="para">
		JBoss EAP 6 maintains a number of instances of deployed stateless enterprise beans in memory to provide faster performance. This technique is called bean pooling. When a bean is required the application server can take one from the appropriate pool of already available beans instead of instantiating a new one. When the bean is no longer required it is returned to the pool for reuse.
	</div><div class="para">
		Bean pools are configured and maintained separately for stateless session beans and for message-driven beans.
	</div><div class="para">
		<code class="literal">@org.jboss.ejb3.annotation.Pool</code> annotation can be used on EJBs to identify the pool, which has to be used for that EJB. This annotation points to the name of that pool.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5734-744991+%5BLatest%5D&amp;comment=Title%3A+Bean+Pools%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5734-744991+26+Feb+2015+05%3A50+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_a_Bean_Pool1">
      ⁠</a>21.2.2. Create a Bean Pool</h2></div></div></div><div class="para">
		Bean pools can be created using the Management Console and the CLI tool.
	</div><div class="para">
		Bean pools can also be created by adding the required bean pool configuration to the server configuration file using a text editor. <a class="xref" href="chap-Enterprise_JavaBeans.html#example-bean-pool-config-sample">Example 21.2, “XML Configuration Sample”</a> is an example of what this configuration looks like.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978447904288">
      ⁠</a><p class="title"><strong>Procedure 21.1. Create a bean pool using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. Refer to <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Bean Pools</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Add</strong></span>. The <span class="guilabel"><strong>Add EJB3 Bean Pools</strong></span> dialog appears.
			</div></li><li class="step"><div class="para">
				Specify the required details, <span class="guilabel"><strong>Name</strong></span>, <span class="guilabel"><strong>Max Pool Size</strong></span>, <span class="guilabel"><strong>Timeout</strong></span> value, and <span class="guilabel"><strong>Timeout</strong></span> unit.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> button to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978500793008">
      ⁠</a><p class="title"><strong>Procedure 21.2. Create a bean pool using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">add</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3/strict-max-bean-instance-pool=<em class="replaceable">BEANPOOLNAME</em>:add(max-pool-size=<em class="replaceable">MAXSIZE</em>, timeout=<em class="replaceable">TIMEOUT</em>, timeout-unit="<em class="replaceable">UNIT</em>")</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">BEANPOOLNAME</em> with the required name for the bean pool.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">MAXSIZE</em> with the maximum size of the bean pool.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">TIMEOUT</em>
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">UNIT</em> with the required time unit. Allowed values are: <code class="literal">NANOSECONDS</code>, <code class="literal">MICROSECONDS</code>, <code class="literal">MILLISECONDS</code>, <code class="literal">SECONDS</code>, <code class="literal">MINUTES</code>, <code class="literal">HOURS</code>, and <code class="literal">DAYS</code>.
					</div></li></ul></div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the creation of the bean pool.
			</div><pre class="synopsis">/subsystem=ejb3/strict-max-bean-instance-pool=<em class="replaceable">BEANPOOLNAME</em>:read-resource</pre></li></ol></div><div class="example"><a id="idm139978464277728">
      ⁠</a><p class="title"><strong>Example 21.1. Create a Bean Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/strict-max-bean-instance-pool=ACCTS_BEAN_POOL:add(max-pool-size=500, timeout=5000, timeout-unit="SECONDS")  
{"outcome" =&gt; "success"}
</pre></div></div><div class="example"><a id="example-bean-pool-config-sample">
      ⁠</a><p class="title"><strong>Example 21.2. XML Configuration Sample</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:ejb3:1.2"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;pools&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;bean-instance-pools&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;strict-max-pool</span><span xmlns="" class="perl_Others">  name=</span><span xmlns="" class="perl_String">"slsb-strict-max-pool"</span><span xmlns="" class="perl_Others"> max-pool-size=</span><span xmlns="" class="perl_String">"20"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            instance-acquisition-timeout=</span><span xmlns="" class="perl_String">"5"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            instance-acquisition-timeout-unit=</span><span xmlns="" class="perl_String">"MINUTES"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;strict-max-pool</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"mdb-strict-max-pool"</span><span xmlns="" class="perl_Others"> max-pool-size=</span><span xmlns="" class="perl_String">"20"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            instance-acquisition-timeout=</span><span xmlns="" class="perl_String">"5"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            instance-acquisition-timeout-unit=</span><span xmlns="" class="perl_String">"MINUTES"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/bean-instance-pools&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/pools&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5741-763765+%5BLatest%5D&amp;comment=Title%3A+Create+a+Bean+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5741-763765+02+Jul+2015+23%3A50+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Remove_a_Bean_Pool1">
      ⁠</a>21.2.3. Remove a Bean Pool</h2></div></div></div><div class="para">
		Unused bean pools can be removed using the Management Console.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites:</strong></p><ul><li class="listitem"><div class="para">
				The bean pool that you want to remove cannot be in use. Refer to <a class="xref" href="chap-Enterprise_JavaBeans.html#Assign_Bean_Pools_for_Session_and_Message-Driven_Beans">Section 21.2.5, “Assign Bean Pools for Session and Message-Driven Beans”</a> to ensure that it is not being used.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978473739488">
      ⁠</a><p class="title"><strong>Procedure 21.3. Remove a bean pool using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. Refer to <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Bean Pools</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Select the bean pool to remove in the list.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Remove</strong></span>. The <span class="guilabel"><strong>Remove Item</strong></span> dialog appears.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Confirm</strong></span> to confirm.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978450274736">
      ⁠</a><p class="title"><strong>Procedure 21.4. Remove a bean pool using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">remove</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3/strict-max-bean-instance-pool=<em class="replaceable">BEANPOOLNAME</em>:remove</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">BEANPOOLNAME</em> with the required name for the bean pool.
					</div></li></ul></div></li></ol></div><div class="example"><a id="idm139978526125984">
      ⁠</a><p class="title"><strong>Example 21.3. Removing a Bean Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/strict-max-bean-instance-pool=ACCTS_BEAN_POOL:remove  
{"outcome" =&gt; "success"}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5754-763766+%5BLatest%5D&amp;comment=Title%3A+Remove+a+Bean+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5754-763766+02+Jul+2015+23%3A50+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Edit_a_Bean_Pool1">
      ⁠</a>21.2.4. Edit a Bean Pool</h2></div></div></div><div class="para">
		Bean pools can be edited using the Management Console.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978537638144">
      ⁠</a><p class="title"><strong>Procedure 21.5. Edit a bean pool using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Bean Pools</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Select the bean pool you want to edit.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				Edit the details you want to change. Only <span class="guilabel"><strong>Max Pool Size</strong></span>, <span class="guilabel"><strong>Timeout</strong></span> value, and <span class="guilabel"><strong>Timeout Unit</strong></span> can be changed.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978542887312">
      ⁠</a><p class="title"><strong>Procedure 21.6. Edit a bean pool using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">write-attribute</code> operation with the following syntax for each attribute of the bean pool to be changed.
			</div><pre class="synopsis">/subsystem=ejb3/strict-max-bean-instance-pool=<em class="replaceable">BEANPOOLNAME</em>:write-attribute(name="<em class="replaceable">ATTRIBUTE</em>", value="<em class="replaceable">VALUE</em>")</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">BEANPOOLNAME</em> with the required name for the bean pool.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">ATTRIBUTE</em> with the name of the attribute to be edited. The attributes that can be edited in this way are <code class="code">max-pool-size</code>, <code class="code">timeout</code>, and <code class="code">timeout-unit</code>.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">VALUE</em> with the required value of the attribute.
					</div></li></ul></div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the changes to the bean pool.
			</div><pre class="synopsis">/subsystem=ejb3/strict-max-bean-instance-pool=<em class="replaceable">BEANPOOLNAME</em>:read-resource</pre></li></ol></div><div class="example"><a id="idm139978468164336">
      ⁠</a><p class="title"><strong>Example 21.4. Set the Timeout Value of a Bean Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/strict-max-bean-instance-pool=HSBeanPool:write-attribute(name="timeout", value="1500")
{"outcome" =&gt; "success"}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5755-763767+%5BLatest%5D&amp;comment=Title%3A+Edit+a+Bean+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5755-763767+02+Jul+2015+23%3A51+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Assign_Bean_Pools_for_Session_and_Message-Driven_Beans">
      ⁠</a>21.2.5. Assign Bean Pools for Session and Message-Driven Beans</h2></div></div></div><div class="para">
		JBoss Administrators can assign individual bean pools for use by session beans and message-driven beans. Bean pools can be assigned by using the Management Console or the Management CLI.
	</div><div class="para">
		By default, two bean pools are provided, <code class="literal">slsb-strict-max-pool</code> and <code class="literal">mdb-strict-max-pool</code> for stateless session beans and message-driven beans respectively.
	</div><div class="para">
		To create or edit bean pools, refer to <a class="xref" href="chap-Enterprise_JavaBeans.html#Create_a_Bean_Pool1">Section 21.2.2, “Create a Bean Pool”</a> and <a class="xref" href="chap-Enterprise_JavaBeans.html#Edit_a_Bean_Pool1">Section 21.2.4, “Edit a Bean Pool”</a>.
	</div><div class="para">
		Additionally, the <code class="literal">@Pool</code> annotation can be used on EJBs to identify the pool to be used for that EJB. 
		<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Using the <code class="literal">@Pool</code> annotation on a particular EJB will override any default settings specified using the management interfaces.
			</div></div></div>

	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978449854496">
      ⁠</a><p class="title"><strong>Procedure 21.7. Assign Bean Pools for Session and Message-Driven Beans using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Container</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				Select the bean pool to use for each type of bean from the appropriate combo-box.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978441741792">
      ⁠</a><p class="title"><strong>Procedure 21.8. Assign Bean Pools for Session and Message-Driven Beans using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">write-attribute</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3:write-attribute(name="BEANTYPE", value="BEANPOOL")</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">BEANTYPE</em> with <code class="literal">default-mdb-instance-pool</code> for Message-Driven Beans or <code class="literal">default-slsb-instance-pool</code> for stateless session beans.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">BEANPOOL</em> with the name of the bean pool to assign.
					</div></li></ul></div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the changes.
			</div><pre class="synopsis">/subsystem=ejb3:read-resource</pre></li></ol></div><div class="example"><a id="idm139978518403488">
      ⁠</a><p class="title"><strong>Example 21.5. Assign a Bean Pool for Session Beans using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3:write-attribute(name="default-slsb-instance-pool", value="LV_SLSB_POOL")  
{"outcome" =&gt; "success"}
</pre></div></div><div class="example"><a id="example-beanpool-xml-sample">
      ⁠</a><p class="title"><strong>Example 21.6. XML Configuration Sample</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:ejb3:1.2"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;session-bean&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;stateless&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"slsb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/stateless&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;stateful</span><span xmlns="" class="perl_Others"> default-access-timeout=</span><span xmlns="" class="perl_String">"5000"</span><span xmlns="" class="perl_Others"> cache-ref=</span><span xmlns="" class="perl_String">"simple"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;singleton</span><span xmlns="" class="perl_Others"> default-access-timeout=</span><span xmlns="" class="perl_String">"5000"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/session-bean&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;mdb&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;resource-adapter-ref</span><span xmlns="" class="perl_Others"> resource-adapter-name=</span><span xmlns="" class="perl_String">"hornetq-ra"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"mdb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/mdb&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978534051568">
      ⁠</a><p class="title"><strong>Procedure 21.9. Assign a Bean Pool for a Session or Message-Driven Bean using the <code class="literal">@Pool</code> annotation</strong></p><ol class="1"><li class="step"><div class="para">
				Add the <code class="literal">@Pool</code> annotation to the bean and specify the name of the bean pool to be used. 
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>@Stateless
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Pool</span>(<span xmlns="" class="perl_String">"slsb-strict-max-pool"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> HelloBean <span xmlns="" class="perl_Keyword">implements</span> HelloBeanRemote {</pre>
				 This will override any default settings created in the management interfaces.
			</div></li><li class="step"><div class="para">
				The <code class="literal">@org.jboss.ejb3.annotation.Pool</code> annotation is part of the JBoss EJB3 External API and must be added as a dependency. If you are using Maven, the following dependency should be added to your <code class="filename">pom.xml</code> file: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;dependency&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;groupId&gt;</span>org.jboss.ejb3<span xmlns="" class="perl_Keyword">&lt;/groupId&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;artifactId&gt;</span>jboss-ejb3-ext-api<span xmlns="" class="perl_Keyword">&lt;/artifactId&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;version&gt;</span>2.1.0<span xmlns="" class="perl_Keyword">&lt;/version&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/dependency&gt;</span></pre>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5118-765594+%5BLatest%5D&amp;comment=Title%3A+Assign+Bean+Pools+for+Session+and+Message-Driven+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5118-765594+21+Jul+2015+15%3A05+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_EJB_Thread_Pools">
      ⁠</a>21.3. Configuring EJB Thread Pools</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enterprise_Bean_Thread_Pools1">
      ⁠</a>21.3.1. Enterprise Bean Thread Pools</h2></div></div></div><div class="para">
		JBoss EAP 6 maintains number of instances of Java thread objects in memory for use by enterprise bean services, including remote invocation, the timer service, and asynchronous invocation.
	</div><div class="para">
		This technique is called thread pooling. It provides improved performance by eliminating the overhead of thread creation and gives the system administrator a mechanism for controlling resource usage.
	</div><div class="para">
		Multiple thread pools can be created with different parameters and each service can be allocated a different thread pool.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5744-591712+%5BLatest%5D&amp;comment=Title%3A+Enterprise+Bean+Thread+Pools%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5744-591712+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_a_Thread_Pool">
      ⁠</a>21.3.2. Create a Thread Pool</h2></div></div></div><div class="para">
		EJB Thread pools can be created using the Management Console or the CLI.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978525841696">
      ⁠</a><p class="title"><strong>Procedure 21.10. Create an EJB Thread Pool using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen.
			</div></li><li class="step"><div class="para">
				Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>.
			</div></li><li class="step"><div class="para">
				Select the <span class="guimenu"><strong>Thread Pools</strong></span> tab and click <span class="guibutton"><strong>Add</strong></span>.
			</div></li><li class="step"><div class="para">
				Specify the <span class="guilabel"><strong>Name</strong></span> and <span class="guilabel"><strong>Max Threads</strong></span> values.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978530070496">
      ⁠</a><p class="title"><strong>Procedure 21.11. Create a Thread Pool using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">add</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3/thread-pool=<em class="replaceable">THREAD_POOL_NAME</em>:add(max-threads=<em class="replaceable">MAX_SIZE</em>)</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">THREAD_POOL_NAME</em> with the name of the thread pool.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">MAX_SIZE</em> with the maximum size of the thread pool.
					</div></li></ul></div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the creation of the bean pool.
			</div><pre class="synopsis">/subsystem=ejb3/thread-pool=<em class="replaceable">THREAD_POOL_NAME</em>:read-resource</pre></li></ol></div><div class="example"><a id="idm139978457378144">
      ⁠</a><p class="title"><strong>Example 21.7. Create a Thread Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/thread-pool=my-test-pool:add(max-threads=20)
{"outcome" =&gt; "success"}
</pre></div></div><div class="example"><a id="example-thread-pool-config-sample">
      ⁠</a><p class="title"><strong>Example 21.8. XML Configuration Sample</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:ejb3:1.5"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;thread-pools&gt;</span>
<span xmlns="" class="line">​</span>      ...
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;thread-pool</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-test-pool"</span><span xmlns="" class="perl_Others"> max-threads=</span><span xmlns="" class="perl_String">"20"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/thread-pools&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5743-779855+%5BLatest%5D&amp;comment=Title%3A+Create+a+Thread+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5743-779855+15+Sep+2016+11%3A20+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Remove_a_Thread_Pool">
      ⁠</a>21.3.3. Remove a Thread Pool</h2></div></div></div><div class="para">
		Unused EJB thread pools can be removed using the Management Console.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				The thread pool that you want to remove cannot be in use. Refer to the following tasks to ensure that the thread pool is not in use:
			</div><div class="para">
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							<a class="xref" href="chap-Enterprise_JavaBeans.html#Configure_the_EJB3_timer_Service">Section 21.6.2, “Configure the EJB3 Timer Service”</a>
						</div></li><li class="listitem"><div class="para">
							<a class="xref" href="chap-Enterprise_JavaBeans.html#Configure_the_EJB3_Asynchronous_Invocation_Service_Thread_Pool">Section 21.7.2, “Configure the EJB3 Asynchronous Invocation Service Thread Pool”</a>
						</div></li><li class="listitem"><div class="para">
							<a class="xref" href="chap-Enterprise_JavaBeans.html#Configure_the_EJB3_Remote_Service1">Section 21.8.2, “Configure the EJB3 Remote Service”</a>
						</div></li></ul></div>

			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978538422976">
      ⁠</a><p class="title"><strong>Procedure 21.12. Remove an EJB thread pool using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Thread Pools</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Select the thread pool to you want to remove.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Remove</strong></span>. The <span class="guilabel"><strong>Remove Item</strong></span> dialog appears.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Confirm</strong></span>.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978457245840">
      ⁠</a><p class="title"><strong>Procedure 21.13. Remove a thread pool using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">remove</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3/thread-pool=<em class="replaceable">THREADPOOLNAME</em>:remove</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">THREADPOOLNAME</em> with the name of the thread pool.
					</div></li></ul></div></li></ol></div><div class="example"><a id="idm139978472853296">
      ⁠</a><p class="title"><strong>Example 21.9. Removing a Thread Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/thread-pool=ACCTS_THREADS:remove
{"outcome" =&gt; "success"}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5757-763770+%5BLatest%5D&amp;comment=Title%3A+Remove+a+Thread+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5757-763770+02+Jul+2015+23%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Edit_a_Thread_Pool">
      ⁠</a>21.3.4. Edit a Thread Pool</h2></div></div></div><div class="para">
		JBoss Administrators can edit Thread Pools using the Management Console and the CLI.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978544376976">
      ⁠</a><p class="title"><strong>Procedure 21.14. Edit a Thread Pool using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Thread Pools</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Select the thread pool you want to edit.
			</div></li><li class="step"><p class="title"><strong/></p><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				Edit the details you want to change. Only the <code class="code">Thread Factory</code>, <code class="code">Max Threads</code>, <code class="code">Keepalive Timeout</code>, and <code class="code">Keepalive Timeout Unit</code> values can be edited.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978464234720">
      ⁠</a><p class="title"><strong>Procedure 21.15. Edit a thread pool using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">write_attribute</code> operation with the following syntax for each attribute of the thread pool to be changed.
			</div><pre class="synopsis">/subsystem=ejb3/thread-pool=<em class="replaceable">THREADPOOLNAME</em>:write-attribute(name="<em class="replaceable">ATTRIBUTE</em>", value="<em class="replaceable">VALUE</em>")</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">THREADPOOLNAME</em> with the name of the thread pool.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">ATTRIBUTE</em> with the name of the attribute to be edited. The attributes that can be edited in this way are <code class="code">keepalive-time</code>, <code class="code">max-threads</code>, and <code class="code">thread-factory</code>.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">VALUE</em> with the required value of the attribute.
					</div></li></ul></div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the changes to the thread pool.
			</div><pre class="synopsis">/subsystem=ejb3/thread-pool=<em class="replaceable">THREADPOOLNAME</em>:read-resource</pre></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			When changing the value of the <code class="code">keepalive-time</code> attribute with the CLI the required value is an object representation. It has the following syntax.
		</div><pre class="synopsis">/subsystem=ejb3/thread-pool=<em class="replaceable">THREADPOOLNAME</em>:write-attribute(name="keepalive-time", value={"time" =&gt; "<em class="replaceable">VALUE</em>","unit" =&gt; "<em class="replaceable">UNIT</em>"}</pre></div></div><div class="example"><a id="idm139978445382352">
      ⁠</a><p class="title"><strong>Example 21.10. Set the Maxsize Value of a Thread Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/thread-pool=HSThreads:write-attribute(name="max-threads", value="50")
{"outcome" =&gt; "success"}
</pre></div></div><div class="example"><a id="idm139978532931760">
      ⁠</a><p class="title"><strong>Example 21.11. Set the <code class="code">keepalive-time</code> Time Value of a Thread Pool using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3/thread-pool=HSThreads:write-attribute(name="keepalive-time", value={"time"=&gt;"150"})
{"outcome" =&gt; "success"}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5758-763771+%5BLatest%5D&amp;comment=Title%3A+Edit+a+Thread+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5758-763771+02+Jul+2015+23%3A58+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_Session_Beans">
      ⁠</a>21.4. Configuring Session Beans</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Session_Bean_Access_Timeout">
      ⁠</a>21.4.1. Session Bean Access Timeout</h2></div></div></div><div class="para">
		Stateful and Singleton Session Beans have an access timeout value specified for managing concurrent access. This value is the period of time that a request to a session bean method can be blocked before it will timeout.
	</div><div class="para">
		The timeout value and the time unit used can be specified using the <code class="code">@javax.ejb.AccessTimeout</code> annotation on the method. It can be specified on the session bean (which applies to all the bean's methods) and on specific methods to override the configuration for the bean.
	</div><div class="para">
		If they are not specified JBoss EAP 6 supplies a default timeout value of 5000 milliseconds.
	</div><div class="para">
		Refer to the Javadocs for AccessTimeout at <a href="http://docs.oracle.com/javaee/6/api/javax/ejb/AccessTimeout.html">http://docs.oracle.com/javaee/6/api/javax/ejb/AccessTimeout.html</a>
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5735-591711+%5BLatest%5D&amp;comment=Title%3A+Session+Bean+Access+Timeout%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5735-591711+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Set_Default_Session_Bean_Access_Timeout_Values1">
      ⁠</a>21.4.2. Set Default Session Bean Access Timeout Values</h2></div></div></div><div class="para">
		JBoss Administrators can specify the default timeout values for Singleton and Stateful session beans. The default timeout values can be changed using the Management Console or the CLI. The default value is 5000 milliseconds.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978499124672">
      ⁠</a><p class="title"><strong>Procedure 21.16. Set Default Session Bean Access Timeout Values using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. See <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Container</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>. The fields in the <span class="guilabel"><strong>Details</strong></span> area can now be edited.
			</div></li><li class="step"><div class="para">
				Enter the required values in the <span class="guilabel"><strong>Stateful Access Timeout</strong></span> and/or <span class="guilabel"><strong>Singleton Access Timeout</strong></span> text boxes.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978457182656">
      ⁠</a><p class="title"><strong>Procedure 21.17. Set Session Bean Access Timeout Values Using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">write-attribute</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3:write-attribute(name="<em class="replaceable">BEANTYPE</em>", value=<em class="replaceable">TIME</em>)</pre><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <em class="replaceable">BEANTYPE</em> with <code class="literal">default-stateful-bean-access-timeout</code> for Stateful Session Beans, or <code class="literal">default-singleton-bean-access-timeout</code> for Singleton Session Beans.
					</div></li><li class="listitem"><div class="para">
						Replace <em class="replaceable">TIME</em> with the required timeout value.
					</div></li></ul></div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the changes.
			</div><pre class="synopsis">/subsystem=ejb3:read-resource</pre></li></ol></div><div class="example"><a id="idm139978532144672">
      ⁠</a><p class="title"><strong>Example 21.12. Setting the Default Stateful Bean Access Timeout value to 9000 with the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 /] /subsystem=ejb3:write-attribute(name="default-stateful-bean-access-timeout", value=9000)  
{"outcome" =&gt; "success"}
</pre></div></div><div class="example"><a id="example-timeout-sample">
      ⁠</a><p class="title"><strong>Example 21.13. XML Configuration Sample</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:ejb3:1.2"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;session-bean&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;stateless&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"slsb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/stateless&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;stateful</span><span xmlns="" class="perl_Others"> default-access-timeout=</span><span xmlns="" class="perl_String">"5000"</span><span xmlns="" class="perl_Others"> cache-ref=</span><span xmlns="" class="perl_String">"simple"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;singleton</span><span xmlns="" class="perl_Others"> default-access-timeout=</span><span xmlns="" class="perl_String">"5000"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/session-bean&gt;</span>
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5388-763772+%5BLatest%5D&amp;comment=Title%3A+Set+Default+Session+Bean+Access+Timeout+Values%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5388-763772+02+Jul+2015+23%3A59+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Session_Bean_Transaction_Timeout">
      ⁠</a>21.4.3. Session Bean Transaction Timeout</h2></div></div></div><div class="para">
		The <code class="filename">TransactionTimeout</code> annotation is used to specify the transaction timeout for a given method. The value of the annotation is the timeout used in the given unit element. It must be a positive integer or 0. Whenever 0 is specified, the default domain configured timeout is used.
	</div><div class="para">
		The unit element specifies the measure of the value. 
		<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Specifying a measure lesser than seconds is considered an error, even when the computed value will result in an integral number of seconds. For example: <code class="code">@TransactionTimeout(value = 1000, unit=TimeUnit.MILISECONDS)</code>
			</div></div></div>

	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Specifying Transaction Timeout in the Deployment Descriptor</div>
			The <code class="filename">trans-timeout</code> element is used to define the transaction timeout for business, home, component, and message listener interface methods; no interface view methods; web service endpoint methods; and timeout callback methods. The <code class="filename">trans-timeout</code> element resides in the <code class="filename">urn:trans-timeout</code> namespace and is part of the standard <code class="filename">container-transaction</code> element as defined in the <code class="filename">jboss</code> namespace.
		</div><div class="example"><a id="example-trans-timeout">
      ⁠</a><p class="title"><strong>Example 21.14. trans-timeout XML Configuration Sample</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;tx:trans-timeout&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;tx:timeout&gt;</span>2<span xmlns="" class="perl_Keyword">&lt;/tx:timeout&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;tx:unit&gt;</span>Seconds<span xmlns="" class="perl_Keyword">&lt;/tx:unit&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/tx:trans-timeout&gt;</span></pre></div></div><div class="para">
		<code class="filename">ejb-name</code> can be specified to a particular EJB name, or a wildcard (*). Specifying a wildcard (*) for the <code class="filename">ejb-name</code> means that this particular transaction timeout will be the default for all EJBs in the application.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+42266-733605+%5BLatest%5D&amp;comment=Title%3A+Session+Bean+Transaction+Timeout%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42266-733605+18+Dec+2014+10%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_Stateful_Session_Bean_Cache">
      ⁠</a>21.4.4. Configure Stateful Session Bean Cache</h2></div></div></div><div class="para">

	</div><div class="para">
		In JBoss EAP 6, stateful EJB cache is configured in the <code class="literal">ejb3</code> subsystem of the server configuration file. The following procedure describes how to configure stateful EJB cache and stateful timeout.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978533061920">
      ⁠</a><p class="title"><strong>Procedure 21.18. Configure Stateful EJB Cache</strong></p><ol class="1"><li class="step"><div class="para">
				Find the <code class="code">&lt;caches&gt;</code> element in the <code class="literal">ejb3</code> subsystem of the server configuration file. Add a <code class="code">&lt;cache&gt;</code> element. The following example creates a cache named "my=cache". 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;cache</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-cache"</span><span xmlns="" class="perl_Others"> passivation-store-ref=</span><span xmlns="" class="perl_String">"my-cache-file"</span><span xmlns="" class="perl_Others"> aliases=</span><span xmlns="" class="perl_String">"my-custom-cache"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				Find the <code class="code">&lt;passivation-stores&gt;</code> element in the <code class="literal">ejb3</code> subsystem of the server configuration file. Create a <code class="code">&lt;file-passivation-store&gt;</code> for the cache defined in the previous step. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;file-passivation-store</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-cache-file"</span><span xmlns="" class="perl_Others"> idle-timeout=</span><span xmlns="" class="perl_String">"1260"</span><span xmlns="" class="perl_Others"> idle-timeout-unit=</span><span xmlns="" class="perl_String">"SECONDS"</span><span xmlns="" class="perl_Others"> max-size=</span><span xmlns="" class="perl_String">"200"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				The <code class="literal">ejb3</code> subsystem configuration should now look like the following example. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:ejb3:1.4"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  ...
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;caches&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;cache</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"simple"</span><span xmlns="" class="perl_Others"> aliases=</span><span xmlns="" class="perl_String">"NoPassivationCache"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;cache</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"passivating"</span><span xmlns="" class="perl_Others"> passivation-store-ref=</span><span xmlns="" class="perl_String">"file"</span><span xmlns="" class="perl_Others"> aliases=</span><span xmlns="" class="perl_String">"SimpleStatefulCache"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;cache</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"clustered"</span><span xmlns="" class="perl_Others"> passivation-store-ref=</span><span xmlns="" class="perl_String">"infinispan"</span><span xmlns="" class="perl_Others"> aliases=</span><span xmlns="" class="perl_String">"StatefulTreeCache"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;cache</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-cache"</span><span xmlns="" class="perl_Others"> passivation-store-ref=</span><span xmlns="" class="perl_String">"my-cache-file"</span><span xmlns="" class="perl_Others"> aliases=</span><span xmlns="" class="perl_String">"my-custom-cache"</span><span xmlns="" class="perl_Keyword">/&gt;</span>               
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/caches&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;passivation-stores&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;file-passivation-store</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"file"</span><span xmlns="" class="perl_Others"> idle-timeout=</span><span xmlns="" class="perl_String">"120"</span><span xmlns="" class="perl_Others"> idle-timeout-unit=</span><span xmlns="" class="perl_String">"SECONDS"</span><span xmlns="" class="perl_Others"> max-size=</span><span xmlns="" class="perl_String">"500"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;cluster-passivation-store</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"infinispan"</span><span xmlns="" class="perl_Others"> cache-container=</span><span xmlns="" class="perl_String">"ejb"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;file-passivation-store</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"my-cache-file"</span><span xmlns="" class="perl_Others"> idle-timeout=</span><span xmlns="" class="perl_String">"1260"</span><span xmlns="" class="perl_Others"> idle-timeout-unit=</span><span xmlns="" class="perl_String">"SECONDS"</span><span xmlns="" class="perl_Others"> max-size=</span><span xmlns="" class="perl_String">"200"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/passivation-stores&gt;</span>
<span xmlns="" class="line">​</span>  ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre>
				 The passivating cache, "my-cache", passivates stateful session beans to the file system as configured in the "my-cache-file" passivation store, which has the <code class="code">idle-timeout</code>, <code class="code">idle-timeout-unit</code> and <code class="code">max-size</code> options.
			</div></li><li class="step"><div class="para">
				Create a <code class="filename">jboss-ejb3.xml</code> file in the EJB JAR <code class="filename">META-INF/</code> directory. The following example configures the EJBs to use the cache defined in the previous steps. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss:ejb-jar</span><span xmlns="" class="perl_Others"> xmlns:jboss=</span><span xmlns="" class="perl_String">"http://www.jboss.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xmlns:c=</span><span xmlns="" class="perl_String">"urn:ejb-cache:1.0"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xsi:schemaLocation=</span><span xmlns="" class="perl_String">"http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-ejb3-2_0.xsd http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      version=</span><span xmlns="" class="perl_String">"3.1"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      impl-version=</span><span xmlns="" class="perl_String">"2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;c:cache&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;c:cache-ref&gt;</span>my-cache<span xmlns="" class="perl_Keyword">&lt;/c:cache-ref&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/c:cache&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss:ejb-jar&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				To method to configure a timeout value depends on whether you are implementing EJB 2 or EJB 3.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						EJB 3 introduced annotations, so you can specify the <code class="code">javax.ejb.StatefulTimeout</code> annotation in the EJB code as follows. 
<pre class="programlisting"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">StatefulTimeout</span>(value = <span xmlns="" class="perl_Float">1320</span>, unit=java.<span xmlns="" class="perl_Function">util</span>.<span xmlns="" class="perl_Function">concurrent</span>.<span xmlns="" class="perl_Function">TimeUnit</span>.<span xmlns="" class="perl_Function">SECONDS</span>) 
<span xmlns="" class="line">​</span>@Stateful
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Remote</span>(MyStatefulEJBRemote.<span xmlns="" class="perl_Function">class</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> MyStatefulEJB <span xmlns="" class="perl_Keyword">implements</span> MyStatefulEJBRemote {
<span xmlns="" class="line">​</span>  ...
<span xmlns="" class="line">​</span>}</pre>

					</div><div class="para">
						The <code class="code">@StatefulTimeout</code> value can be set to one of the following. 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									A value of <code class="literal">0</code> means the bean is immediately eligible for removal.
								</div></li><li class="listitem"><div class="para">
									A value greater than <code class="literal">0</code> indicates a timeout value in the units specified by the <code class="code">unit</code> parameter. The default timeout unit is <code class="literal">MINUTES</code>. If you are using a passivating cache configuration and the <code class="code">idle-timeout</code> value is less than the <code class="code">StatefulTimeout</code> value, JBoss EAP will passivate the bean when it is idle for the <code class="code">idle-timeout</code> period specified. The bean is then eligible for removal after the <code class="code">StatefulTimeout</code> period specified.
								</div></li><li class="listitem"><div class="para">
									A value of <code class="literal">-1</code> means the bean will never be removed due to timeout. If you are using a passivating cache configuration and the bean is idle for <code class="code">idle-timeout</code>, JBoss EAP will passivate the bean instance to the <code class="code">passivation-store</code>.
								</div></li><li class="listitem"><div class="para">
									Values less than <code class="literal">-1</code> are not valid.
								</div></li></ul></div>

					</div></li>
				 <li class="step"><div class="para">
						For both EJB 2 and EJB 3, you can configure the stateful timeout in the <code class="filename">ejb-jar.xml</code> file. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ejb-jar</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">         xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">         xsi:schemaLocation=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">         version=</span><span xmlns="" class="perl_String">"3.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;session&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>HelloBean<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;session-type&gt;</span>Stateful<span xmlns="" class="perl_Keyword">&lt;/session-type&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;stateful-timeout&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;timeout&gt;</span>1320<span xmlns="" class="perl_Keyword">&lt;/timeout&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;unit&gt;</span>Seconds<span xmlns="" class="perl_Keyword">&lt;/unit&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/stateful-timeout&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/session&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/ejb-jar&gt;</span></pre>

					</div></li>
				 <li class="step"><div class="para">
						For both EJB 2 and EJB 3, you can configure the stateful timeout in the <code class="filename">jboss-ejb3.xml</code> file. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss:ejb-jar</span><span xmlns="" class="perl_Others"> xmlns:jboss=</span><span xmlns="" class="perl_String">"http://www.jboss.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xmlns:c=</span><span xmlns="" class="perl_String">"urn:ejb-cache:1.0"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      xsi:schemaLocation=</span><span xmlns="" class="perl_String">"http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-ejb3-2_0.xsd http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      version=</span><span xmlns="" class="perl_String">"3.1"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      impl-version=</span><span xmlns="" class="perl_String">"2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;session&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>HelloBean<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;session-type&gt;</span>Stateful<span xmlns="" class="perl_Keyword">&lt;/session-type&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;stateful-timeout&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;timeout&gt;</span>1320<span xmlns="" class="perl_Keyword">&lt;/timeout&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;unit&gt;</span>Seconds<span xmlns="" class="perl_Keyword">&lt;/unit&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/stateful-timeout&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/session&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/enterprise-beans&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;c:cache&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;ejb-name&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/ejb-name&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;c:cache-ref&gt;</span>my-cache<span xmlns="" class="perl_Keyword">&lt;/c:cache-ref&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/c:cache&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss:ejb-jar&gt;</span></pre>

					</div></li>

			</ul></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Additional Information</div>
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						To disable passivation of stateful session beans, do one of the following: 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									If you implement stateful session beans using EJB 3 annotations, you can disable the passivation of the stateful session bean the annotation <code class="code">@org.jboss.ejb3.annotation.Cache("NoPassivationCache")</code>
								</div></li><li class="listitem"><div class="para">
									If the stateful session bean is configured in the <code class="filename">jboss-ejb3.xml</code> file, set the <code class="code">&lt;c:cache-ref&gt;</code> element value to "simple", which is the equivalent of <code class="code">NoPassivationCache</code>. 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;c:cache-ref&gt;</span>simple<span xmlns="" class="perl_Keyword">&lt;/c:cache-ref&gt;</span></pre>

								</div></li></ul></div>

					</div></li><li class="listitem"><div class="para">
						EJB cache policy "LRUStatefulContextCachePolicy" has been changed in JBoss EAP 6 so it is impossible to have 1-to-1 configuration mapping in JBoss EAP 6.
					</div></li><li class="listitem"><div class="para">
						In JBoss EAP 6, you can set up the following cache properties: 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									Bean life time is configured using the @StatefulTimeout in EJB 3.1.
								</div></li><li class="listitem"><div class="para">
									Configure passivation of a bean to disk in the <code class="literal">ejb3</code> subsystem of the server configuration file using the <code class="literal">idle-timeout</code> attribute of the <code class="code">&lt;file-passivation-store&gt;</code> element.
								</div></li><li class="listitem"><div class="para">
									Configure the maximum size of the passivation store in the <code class="literal">ejb3</code> subsystem of the server configuration file using the <code class="literal">max-size</code> attribute of the <code class="code">&lt;file-passivation-store&gt;</code> element.
								</div></li></ul></div>

					</div></li><li class="listitem"><div class="para">
						In JBoss EAP 6, you can not configure the following cache properties: 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									The minimum and maximum numbers in memory cache.
								</div></li><li class="listitem"><div class="para">
									The minimum numbers in passivation store.
								</div></li><li class="listitem"><div class="para">
									The <code class="code">*-period</code> configurations that control the frequency of cache operations.
								</div></li></ul></div>

					</div></li></ul></div>

		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44640-766956+%5BLatest%5D&amp;comment=Title%3A+Configure+Stateful+Session+Bean+Cache%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44640-766956+06+Aug+2015+07%3A42+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_Message-Driven_Beans">
      ⁠</a>21.5. Configuring Message-Driven Beans</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Set_Default_Resource_Adapter_for_Message-Driven_Beans1">
      ⁠</a>21.5.1. Set Default Resource Adapter for Message-Driven Beans</h2></div></div></div><div class="para">
		JBoss Administrators can specify the default resource adapter used by message-driven beans. The default resource adapter can be specified using the Management Console and the CLI. The default resource adapter supplied with JBoss EAP 6 is <code class="literal">hornetq-ra</code>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978536579792">
      ⁠</a><p class="title"><strong>Procedure 21.19. Set the Default Resource Adapter for Message-Driven Beans using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Container</strong></span> tab.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>. The fields in the <span class="guilabel"><strong>Details</strong></span> area can now be edited.
			</div></li><li class="step"><div class="para">
				Enter the name of the resource adapter to be used in the <span class="guilabel"><strong>Default Resource Adapter</strong></span> text box.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978539684864">
      ⁠</a><p class="title"><strong>Procedure 21.20. Set the Default Resource Adapter for Message-Driven Beans using the CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server. Refer to <a class="xref" href="chap-Management_Interfaces.html#Connect_to_a_Managed_Server_Instance_Using_the_Management_CLI1">Section 3.4.4, “Connect to a Managed Server Instance Using the Management CLI”</a>.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">write-attribute</code> operation with the following syntax.
			</div><pre class="synopsis">/subsystem=ejb3:write-attribute(name="default-resource-adapter-name", value="<em class="replaceable">RESOURCE-ADAPTER</em>")</pre><div class="para">
				Replace <em class="replaceable">RESOURCE-ADAPTER</em> with name of the resource adapter to be used.
			</div></li><li class="step"><div class="para">
				Use the <code class="command">read-resource</code> operation to confirm the changes.
			</div><pre class="synopsis">/subsystem=ejb3:read-resource</pre></li></ol></div><div class="example"><a id="idm139978506459968">
      ⁠</a><p class="title"><strong>Example 21.15. Set the Default Resource Adapter for Message-Driven Beans using the CLI</strong></p><div class="example-contents"><pre class="screen">[standalone@localhost:9999 subsystem=ejb3] /subsystem=ejb3:write-attribute(name="default-resource-adapter-name", value="EDIS-RA")
{"outcome" =&gt; "success"}
[standalone@localhost:9999 subsystem=ejb3]</pre></div></div><div class="example"><a id="default-ra-sample">
      ⁠</a><p class="title"><strong>Example 21.16. XML Configuration Sample</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:ejb3:1.2"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;mdb&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapter-ref</span><span xmlns="" class="perl_Others"> resource-adapter-name=</span><span xmlns="" class="perl_String">"hornetq-ra"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"mdb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/mdb&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5736-717442+%5BLatest%5D&amp;comment=Title%3A+Set+Default+Resource+Adapter+for+Message-Driven+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5736-717442+20+Oct+2014+00%3A08+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_the_EJB3_Timer_Service">
      ⁠</a>21.6. Configuring the EJB3 Timer Service</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="EJB3_Timer_Service1">
      ⁠</a>21.6.1. EJB3 Timer Service</h2></div></div></div><div class="para">
		The EJB3 Timer Service is a standard Java EE 6 service for scheduling the invocation of the methods from enterprise beans. Stateless session beans, singleton session beans, and message-driven beans can all schedule any of their methods for callback at specified times. Method callback can occur at a specific time, after a duration, at a recurring interval, or on a calendar-based schedule.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5738-591711+%5BLatest%5D&amp;comment=Title%3A+EJB3+Timer+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5738-591711+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_the_EJB3_timer_Service">
      ⁠</a>21.6.2. Configure the EJB3 Timer Service</h2></div></div></div><div class="para">
		The EJB3 Timer Service can be configured via either the Management Console or Management CLI. You can configure the thread pool used for scheduled bean invocation, and either the directory or datasource used to store the Timer Service data. You might change the default Timer Service directory if faster storage is available than the default directory.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978451122800">
      ⁠</a><p class="title"><strong>Procedure 21.21. Configure the EJB3 Timer Service Thread Pool via the Management Console</strong></p><div class="para"><div class="title"> Prerequisite </div>
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							The thread pool to be used by the EJB3 Timer Service must already have been created.
						</div></li></ul></div>

			</div><ol class="1"><li class="step"><div class="para">
				Login to the Management Console.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Services</strong></span> tab, click on <span class="guimenu"><strong>Timer Service</strong></span>. Click <span class="guimenuitem"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guilabel"><strong>EJB3 Thread Pool</strong></span> drop-down list and click on the preferred thread pool's name.
			</div></li><li class="step"><div class="para">
				Restart the JBoss EAP instance.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978502246624">
      ⁠</a><p class="title"><strong>Procedure 21.22. Configure the EJB3 Timer Service Thread Pool via the Management CLI</strong></p><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Add the prefix <code class="literal">/profile=<em class="replaceable">PROFILE_NAME</em></code> to the command for a managed domain.
			</div></div></div><ol class="1"><li class="step"><div class="para">
				Run the following Management CLI command.
			</div><pre class="screen">/subsystem=ejb3/service=timer-service:write-attribute(name=thread-pool-name,value="<em class="replaceable">thread-pool-name</em>")</pre></li><li class="step"><div class="para">
				Restart the JBoss EAP instance.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978527048272">
      ⁠</a><p class="title"><strong>Procedure 21.23. Configure the EJB3 Timer Service Directory via the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Services</strong></span> tab, click on <span class="guimenu"><strong>Timer Service</strong></span>. Click <span class="guimenuitem"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				Enter your desired values into the <code class="literal">Path</code> and <code class="literal">Relative To</code> fields.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span>.
			</div></li><li class="step"><div class="para">
				Restart the JBoss EAP instance.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978527021168">
      ⁠</a><p class="title"><strong>Procedure 21.24. Configure the EJB3 Timer Service Directory via the Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Depending on which paths you want to change, run one or both of the following Management CLI commands. For either path you can use a system value - for example, <code class="literal">${jboss.server.data.dir}</code>.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Add the prefix <code class="literal">/profile=<em class="replaceable">PROFILE_NAME</em></code> to the command for a managed domain.
				</div></div></div><pre class="screen">/subsystem=ejb3/service=timer-service/file-data-store=default-file-store:write-attribute(name=path,value="<em class="replaceable">path</em>")</pre><pre class="screen">/subsystem=ejb3/service=timer-service/file-data-store=default-file-store:write-attribute(name=relative-to,value="<em class="replaceable">relative-path</em>")</pre></li><li class="step"><div class="para">
				Restart the JBoss EAP instance.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978520831952">
      ⁠</a><p class="title"><strong>Procedure 21.25. Configure the EJB3 Timer Service to use a Datasource via the Management CLI</strong></p><div class="para">
			From JBoss EAP 6.4 you can configure the EJB3 Timer Service to use a datasource instead of a local directory. There is a minor performance cost to this option but it has the advantage of decreasing risk to timer data in the event of a local storage issue.
		</div><div class="para">
			Once the EJB3 Timer Service is configured to use a datasource, you then must either configure an EJB deployment to use the datastore or configure it as the default for all deployments. For instructions on how to do so, see the procedure <em class="citetitle">Configure one or all EJB3 Deployments to use the Datasource</em>.
		</div><div class="para"><div class="title"> Prerequisite </div>
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							The datasource to be used by the EJB3 Timer Service must already exist and the underlying database must support and be configured for READ_COMMITTED or SERIALIZABLE isolation mode.
						</div></li></ul></div>

			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Add the prefix <code class="literal">/profile=<em class="replaceable">PROFILE_NAME</em></code> to the command for a managed domain.
			</div></div></div><ul><li class="step"><div class="para">
				Run the following Management CLI command.
			</div><div class="para">
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							datastore_name - A name of your choice.
						</div></li><li class="listitem"><div class="para">
							datasource_name - The name of the datasource to be used for storage.
						</div></li><li class="listitem"><div class="para">
							database - either <code class="literal">postgresql</code>, <code class="literal">mssql</code>, <code class="literal">sybase</code>, <code class="literal">mysql</code>, <code class="literal">oracle</code>, <code class="literal">db2</code>, or <code class="literal">hsql</code>.
						</div></li><li class="listitem"><div class="para">
							partition_name - A name of your choice. This attribute is used to distinguish timers pertaining to a particular server instance if multiple JBoss EAP instances share the same database for storing EJB timers. In this case, every server instance should have its own partition name. If the database is used by only one server instance, you can leave this attribute blank.
						</div></li></ul></div>

			</div><pre class="screen">/subsystem=ejb3/service=timer-service/database-data-store=<em class="replaceable">datastore_name</em>:add(datasource-jndi-name='java:/<em class="replaceable">datasource_name</em>', database='<em class="replaceable">database</em>', partition='<em class="replaceable">partition_name</em>')</pre></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978443917856">
      ⁠</a><p class="title"><strong>Procedure 21.26.  Configure one or all EJB3 Deployments to use the Datasource </strong></p><div class="para">
			Either configure an EJB3 deployment to use the Timer Service's datasource or configure it as the default for <span class="emphasis"><em>all</em></span> deployments.
		</div><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><div class="para">
						To configure an EJB3 deployment to use the datasource, edit the <code class="filename">jboss-ejb3.xml</code> of the deployment so the <code class="literal">timer</code> section looks as follows. Replace <em class="parameter"><code>datastore_name</code></em> with the name of the datastore.
					</div><pre class="screen">[&lt;assembly-descriptor&gt;
  &lt;timer:timer&gt;
    &lt;ejb-name&gt;*&lt;/ejb-name&gt;
    &lt;timer:persistence-store-name&gt;datastore_name&lt;/timer:persistence-store-name&gt;
  &lt;/timer:timer&gt;
&lt;/assembly-descriptor&gt;</pre></li>
				 <li class="step"><div class="para">
						To configure the datasource as the default for <span class="emphasis"><em>all</em></span> deployments, run the following Management CLI command, then restart the JBoss EAP instance. Replace <em class="parameter"><code>datastore_name</code></em> with the name of the datastore.
					</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							Add the prefix <code class="literal">/profile=<em class="replaceable">PROFILE_NAME</em></code> to the command for a managed domain.
						</div></div></div><pre class="screen">[/subsystem=ejb3/service=timer-service:write-attribute(name=default-data-store,value=datastore_name)</pre></li>

			</ul></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5737-737891+%5BLatest%5D&amp;comment=Title%3A+Configure+the+EJB3+Timer+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5737-737891+22+Jan+2015+03%3A10+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_the_EJB_Asynchronous_Invocation_Service">
      ⁠</a>21.7. Configuring the EJB Asynchronous Invocation Service</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="EJB3_Asynchronous_Invocation_Service1">
      ⁠</a>21.7.1. EJB3 Asynchronous Invocation Service</h2></div></div></div><div class="para">
		The Asynchronous Invocation Service is an Enterprise JavaBeans container service that manages asynchronous invocation of session bean methods. This service maintains a configurable number of threads (a thread pool) that are allocated for asynchronous method execution.
	</div><div class="para">
		Enterprise JavaBeans 3.1 allows for any method of a session bean (stateful, stateless or singleton) to be annotated to permit asynchronous execution.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5740-591711+%5BLatest%5D&amp;comment=Title%3A+EJB3+Asynchronous+Invocation+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5740-591711+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_the_EJB3_Asynchronous_Invocation_Service_Thread_Pool">
      ⁠</a>21.7.2. Configure the EJB3 Asynchronous Invocation Service Thread Pool</h2></div></div></div><div class="para">
		JBoss Administrators can configure the EJB3 Asynchronous Invocation Service in the JBoss EAP 6 Management Console to use a specific thread pool.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978537414048">
      ⁠</a><p class="title"><strong>Procedure 21.27. Configure the EJB3 Asynchronous Invocation Service thread pool</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. See <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Services</strong></span> tab, click on <span class="guimenu"><strong>Async Service</strong></span>.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				Select the EJB3 thread pool to use from the list. The thread pool must have been already created.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5739-632800+%5BLatest%5D&amp;comment=Title%3A+Configure+the+EJB3+Asynchronous+Invocation+Service+Thread+Pool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5739-632800+22+Apr+2014+01%3A57+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_the_EJB3_Remote_Invocation_Service">
      ⁠</a>21.8. Configuring the EJB3 Remote Invocation Service</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="EJB3_Remote_Service">
      ⁠</a>21.8.1. EJB3 Remote Service</h2></div></div></div><div class="para">
		The EJB3 Remote Service manages the remote execution of Enterprise Beans with remote business interfaces.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5749-591712+%5BLatest%5D&amp;comment=Title%3A+EJB3+Remote+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5749-591712+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_the_EJB3_Remote_Service1">
      ⁠</a>21.8.2. Configure the EJB3 Remote Service</h2></div></div></div><div class="para">
		JBoss Administrators can configure the EJB3 Remote Service in the JBoss EAP 6 Management Console. The features that can be configured are the thread pool that is used for remote bean invocation and the connector on which the EJB3 remoting channel is registered.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978478743552">
      ⁠</a><p class="title"><strong>Procedure 21.28. Configure the EJB3 Remote Service</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. See <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Container</strong></span> menu and select <span class="guimenu"><strong>EJB 3</strong></span>. Select the <span class="guimenu"><strong>Services</strong></span> tab, click on <span class="guimenu"><strong>Remote Service</strong></span>.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Edit</strong></span>.
			</div></li><li class="step"><div class="para">
				You can select a different EJB3 thread pool used for the Remote Service if additional thread pools have been configured. You can change the connector used to register the EJB remoting channel.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5748-632803+%5BLatest%5D&amp;comment=Title%3A+Configure+the+EJB3+Remote+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5748-632803+22+Apr+2014+02%3A01+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configuring_EJB_2.x_Entity_Beans">
      ⁠</a>21.9. Configuring EJB 2.x Entity Beans</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="EJB_Entity_Beans1">
      ⁠</a>21.9.1. EJB Entity Beans</h2></div></div></div><div class="para">
		EJB Entity Beans are a type of enterprise bean from version 2.x of the EJB specification that represented persistent data that was maintained in a database. Entity beans have been superseded by JPA entities and officially listed for removal (pruning) from future versions of the specification. Red Hat does not recommend the use of Entity Beans except for backwards compatibility.
	</div><div class="para">
		Support for Entity Beans is disabled by default in JBoss EAP 6.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			JBoss EAP 6.x supports EJB 2.0 and above, with the exception that EJB 2.0 deployment descriptors only work in JBoss EAP 6.4 and above.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5239-769296+%5BLatest%5D&amp;comment=Title%3A+EJB+Entity+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5239-769296+31+Aug+2015+04%3A50+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Container-Managed_Persistence">
      ⁠</a>21.9.2. Container-Managed Persistence</h2></div></div></div><div class="para">
		Container-Managed Persistence (CMP) is an application server provided service that provides data persistence for Entity beans.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8794-591849+%5BLatest%5D&amp;comment=Title%3A+Container-Managed+Persistence%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8794-591849+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enable_EJB_2.x_Container-Managed_Persistence">
      ⁠</a>21.9.3. Enable EJB 2.x Container-Managed Persistence</h2></div></div></div><div class="para">
		Container-Managed Persistence (CMP) is handled by the <code class="systemitem">org.jboss.as.cmp</code> extension. CMP is enabled by default in the managed domain and standalone server full configurations, e.g. <code class="filename">standalone-full.xml</code>.
	</div><div class="para">
		To enable CMP in a different configuration, add the <code class="systemitem">org.jboss.as.cmp</code> module to the list of enabled extensions in the server configuration file.
	</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;extensions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;extension</span><span xmlns="" class="perl_Others"> module=</span><span xmlns="" class="perl_String">"org.jboss.as.cmp"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/extensions&gt;</span></pre><div class="para">
		Once the extension has been added, you must also add the following element in the profile's XML configuration file under the &lt;profile&gt; element.
	</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:cmp:1.1"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre><div class="para">
		To disable CMP in a server configuration, remove the extension entry for the <code class="systemitem">org.jboss.as.cmp</code> module.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5745-591712+%5BLatest%5D&amp;comment=Title%3A+Enable+EJB+2.x+Container-Managed+Persistence%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5745-591712+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_EJB_2.x_Container-Managed_Persistence">
      ⁠</a>21.9.4. Configure EJB 2.x Container-Managed Persistence</h2></div></div></div><div class="para">
		The EJB 2.x Container Managed Persistence (CMP) subsystem can be configured to specify any number of key generators. Key generators are used to generate unique keys to identify each entity persisted by the CMP service.
	</div><div class="para">
		Two types of key generator can be defined: UUID-based and HiLo key generators.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">UUID-based key generators</span></dt><dd><div class="para">
					A UUID-based key generator creates keys using Universally Unique Identifiers. UUID key generators only need to have a unique name, they have no other configuration.
				</div><div class="para">
					UUID-based key generators can be added using the CLI using the following command syntax.
				</div><pre class="synopsis">/subsystem=cmp/uuid-keygenerator=<em class="replaceable">UNIQUE_NAME</em>:add</pre><div class="example"><a id="idm139978479200736">
      ⁠</a><p class="title"><strong>Example 21.17. Add UUID Key Generator</strong></p><div class="example-contents"><div class="para">
						To add a UUID-based key generator with the name of <code class="literal">uuid_identities</code>, use this CLI command:
					</div><pre class="screen">/subsystem=cmp/uuid-keygenerator=uuid_identities:add</pre><div class="para">
						The XML configuration created by this command is:
					</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:cmp:1.0"</span><span xmlns="" class="perl_Keyword">&gt;</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;key-generators&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;uuid</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"uuid_identities"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/key-generators&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre></div></div></dd><dt><span class="term">HiLo Key Generators</span></dt><dd><div class="para">
					HiLo key generators use a database to create and store entity identity keys. HiLo Key generators must have unique names and are configured with properties that specify the datasource used to store the data as well as the names of the table and columns that store the keys.
				</div><div class="para">
					HiLo key generators can be added using the CLI using the following command syntax:
				</div><pre class="synopsis">/subsystem=cmp/hilo-keygenerator=<em class="replaceable">UNIQUE_NAME</em>/:add(<em class="replaceable">property=value</em>, <em class="replaceable">property=value</em>, ...)</pre><div class="example"><a id="idm139978443378784">
      ⁠</a><p class="title"><strong>Example 21.18. Add a HiLo Key Generator</strong></p><div class="example-contents"><pre class="screen">/subsystem=cmp/hilo-keygenerator=HiLoKeyGeneratorFactory:add(create-table=true,create-table-ddl="create table HILOSEQUENCES (SEQUENCENAME varchar(50) not null, HIGHVALUES integer not null, constraint hilo_pk primary key (SEQUENCENAME))",data-source=java:jboss/datasources/ExampleDS, id-column=HIGHVALUES,sequence-column=SEQUENCENAME,table-name=HILOSEQUENCES,sequence-name=general,block-size=10)</pre><div class="para">
						The XML configuration created by this command is:
					</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:cmp:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;key-generators&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;hilo</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"HiLoKeyGeneratorFactory"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;block-size&gt;</span>10<span xmlns="" class="perl_Keyword">&lt;/block-size&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;create-table&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/create-table&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;create-table-ddl&gt;</span>create table HILOSEQUENCES (SEQUENCENAME varchar(50) not null, HIGHVALUES integer not null, constraint hilo_pk primary key (SEQUENCENAME))<span xmlns="" class="perl_Keyword">&lt;/create-table-ddl&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;data-source&gt;</span>java:jboss/datasources/ExampleDS<span xmlns="" class="perl_Keyword">&lt;/data-source&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;id-column&gt;</span>HIGHVALUES<span xmlns="" class="perl_Keyword">&lt;/id-column&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;sequence-column&gt;</span>SEQUENCENAME<span xmlns="" class="perl_Keyword">&lt;/sequence-column&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;sequence-name&gt;</span>general<span xmlns="" class="perl_Keyword">&lt;/sequence-name&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;table-name&gt;</span>HILOSEQUENCES<span xmlns="" class="perl_Keyword">&lt;/table-name&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/hilo&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;/key-generators&gt;</span>
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre><div class="para">
						<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
								The block-size must be set to a value !=0, otherwise the generated PKey will not incremented and therefore the creation of entities fail with a DuplicateKeyException.
							</div></div></div>
						 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
								The select-hi-ddl must be set as 'FOR UPDATE' in case of cluster to ensure the consistency. All databases do not support the locking feature.
							</div></div></div>

					</div></div></div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5746-644337+%5BLatest%5D&amp;comment=Title%3A+Configure+EJB+2.x+Container-Managed+Persistence%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5746-644337+27+May+2014+02%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="CMP_Subsystem_Properties_for_HiLo_Key_Generators">
      ⁠</a>21.9.5. CMP Subsystem Properties for HiLo Key Generators</h2></div></div></div><div class="table"><a id="table-CMP-subsystem-properties">
      ⁠</a><p class="title"><strong>Table 21.1. CMP Subsystem Properties for HiLo Key Generators</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="CMP Subsystem Properties for HiLo Key Generators"><colgroup><col width="22%" style="text-align: left" class="c1"/><col width="11%" style="text-align: left" class="c2"/><col width="67%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Property </th><th style="text-align: left"> Data type </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">block-size</code> </td><td style="text-align: left"> long </td><td style="text-align: left"> <div class="para">
						The block size.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">create-table</code> </td><td style="text-align: left"> boolean </td><td style="text-align: left"> <div class="para">
						If set to <code class="literal">TRUE</code>, a table called <code class="code">table-name</code> will be created using the contents of <code class="code">create-table-ddl</code> if that table is not found.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">create-table-ddl</code> </td><td style="text-align: left"> string </td><td style="text-align: left"> <div class="para">
						The DDL commands used to create the table specified in <code class="code">table-name</code> if the table is not found and <code class="code">create-table</code> is set to <code class="literal">TRUE</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">data-source</code> </td><td style="text-align: left"> token </td><td style="text-align: left"> <div class="para">
						The data source used to connect to the database.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">drop-table</code> </td><td style="text-align: left"> boolean </td><td style="text-align: left"> <div class="para">
						To determine whether to drop the tables.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">id-column</code> </td><td style="text-align: left"> token </td><td style="text-align: left"> <div class="para">
						The ID column name.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">select-hi-ddl</code> </td><td style="text-align: left"> string </td><td style="text-align: left"> The SQL command which will return the largest key currently stored. </td></tr><tr><td style="text-align: left"> <code class="code">sequence-column</code> </td><td style="text-align: left"> token </td><td style="text-align: left"> <div class="para">
						The sequence column name.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">sequence-name</code> </td><td style="text-align: left"> token </td><td style="text-align: left"> <div class="para">
						The name of the sequence.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">table-name</code> </td><td style="text-align: left"> token </td><td style="text-align: left"> <div class="para">
						The name of the table used to store the key information.
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8795-644846+%5BLatest%5D&amp;comment=Title%3A+CMP+Subsystem+Properties+for+HiLo+Key+Generators%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8795-644846+28+May+2014+03%3A32+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>