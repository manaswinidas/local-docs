<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 8. Jsvc</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Jsvc">
      ⁠</a>Chapter 8. Jsvc</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Introduction8">
      ⁠</a>8.1. Introduction</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Jsvc1">
      ⁠</a>8.1.1. About Jsvc</h2></div></div></div><div class="para">
		Jsvc is a set of libraries and applications which allow Java applications run on UNIX and UNIX-like platforms as a background service. It allows an application to perform operations as a privileged user, and then switch identity to a non-privileged user.
	</div><div class="para">
		Jsvc uses three processes: a launcher process, a controller process and a controlled process. The controlled process is also the main Java thread. If the JVM crashes the controller process will restart it within 60 seconds. Jsvc is a daemon process and for JBoss EAP 6 it must be started by a privileged user.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Jsvc is for use on Red Hat Enterprise Linux, Solaris and HP-UX only. For similar functionality on Microsoft Windows, see <code class="filename">prunsrv.exe</code> in the <code class="code">Native Utilities for Windows Server</code> download available from the Red Hat Customer Portal.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+40868-685718+%5BLatest%5D&amp;comment=Title%3A+About+Jsvc%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=40868-685718+16+Jul+2014+20%3A52+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Start_Jsvc">
      ⁠</a>8.1.2. Start and Stop JBoss EAP using Jsvc</h2></div></div></div><div class="para">
		The instructions for starting and stopping JBoss EAP using Jsvc vary, depending on which mode it is operating: standalone or domain. Be aware that if JBoss EAP is run in domain mode, Jsvc handles the process of the domain controller only. Whichever command you use to start JBoss EAP using Jsvc, it must be run by a privileged user.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				If JBoss EAP was installed using the Zip method:
			</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Install the <em class="citetitle">Native Utilities</em> package for your operating system, available for download from the Red Hat Customer Portal. See <em class="citetitle">Install Native Components and Native Utilities (Zip, Installer)</em> in the <em class="citetitle">Installation Guide</em>.
					</div></li><li class="listitem"><div class="para">
						Create the user account under which the JBoss EAP 6 instance will run. The account used to start and stop the server must have read and write access to the directory in which JBoss EAP was installed.
					</div></li></ul></div></li><li class="listitem"><div class="para">
				If JBoss EAP was installed using the RPM method, install the <em class="citetitle">apache-commons-daemon-jsvc-eap6</em> package. See <em class="citetitle">Install Native Components and Native Utilities (RPM Installation)</em> in the <em class="citetitle">Installation Guide</em>.
			</div></li></ul></div><div class="para">
		The following commands are to start and stop JBoss EAP in either standalone or domain modes. Note that file locations are different depending on the method used to install Jsvc in JBoss EAP 6. Use the tables below to determine which files to use to resolve the variables in the commands.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Standalone Mode</div>
			The following instructions are to start or stop JBoss EAP in standalone mode.
		</div><div class="table"><a id="idm139978472788144">
      ⁠</a><p class="title"><strong>Table 8.1. Jsvc File locations For Zip installations - Standalone Mode</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Jsvc File locations For Zip installations - Standalone Mode"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="67%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> File Reference in Instructions </th><th style="text-align: left"> File Location </th></tr></thead><tbody><tr><td style="text-align: left"> EAP-HOME </td><td style="text-align: left"> <div class="para">
						${eap-installation-location}/jboss-eap-${version}
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-BIN </td><td style="text-align: left"> <div class="para">
						EAP_HOME/modules/system/layers/base/native/sbin/jsvc
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-JAR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/modules/system/layers/base/native/sbin/commons-daemon.jar
					</div>
					 </td></tr><tr><td style="text-align: left"> CONF-DIR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/standalone/configuration
					</div>
					 </td></tr><tr><td style="text-align: left"> LOG-DIR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/standalone/log
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="idm139978540254544">
      ⁠</a><p class="title"><strong>Table 8.2. Jsvc File Locations for RPM Installations - Standalone Mode</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Jsvc File Locations for RPM Installations - Standalone Mode"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="67%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> File Reference in Instructions </th><th style="text-align: left"> File Location </th></tr></thead><tbody><tr><td style="text-align: left"> EAP-HOME </td><td style="text-align: left"> <div class="para">
						/usr/share/jbossas
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-BIN </td><td style="text-align: left"> <div class="para">
						/usr/bin/jsvc-eap6/jsvc
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-JAR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/modules/system/layers/base/native/sbin/commons-daemon.jar
					</div>
					 </td></tr><tr><td style="text-align: left"> CONF-DIR </td><td style="text-align: left"> <div class="para">
						/etc/jbossas/standalone
					</div>
					 </td></tr><tr><td style="text-align: left"> LOG-DIR </td><td style="text-align: left"> <div class="para">
						/var/log/jbossas/standalone
					</div>
					 </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Start JBoss EAP in Standalone Mode</strong></p><ul><li class="listitem"><div class="para">
				
<pre class="screen"><em class="replaceable">JSVC_BIN</em> \
 -outfile <em class="replaceable">LOG_DIR</em>/jsvc.out.log   \
 -errfile <em class="replaceable">LOG_DIR</em>/jsvc.err.log   \
 -pidfile <em class="replaceable">LOG_DIR</em>/jsvc.pid  \
 -user jboss \
 -D[Standalone] -XX:+UseCompressedOops -Xms1303m \
 -Xmx1303m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true 
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true \
 -Dorg.jboss.boot.log.file=<em class="replaceable">LOG_DIR</em>/server.log \
 -Dlogging.configuration=file:<em class="replaceable">CONF_DIR</em>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp <em class="replaceable">EAP_HOME</em>/jboss-modules.jar:<em class="replaceable">JSVC_JAR</em> \
 -Djboss.home.dir=<em class="replaceable">EAP_HOME</em> \
 -Djboss.server.base.dir=<em class="replaceable">EAP_HOME</em>/standalone   \
 @org.jboss.modules.Main -start-method main \
 -mp <em class="replaceable">EAP_HOME</em>/modules \
 -jaxpmodule javax.xml.jaxp-provider \
 org.jboss.as.standalone</pre>

			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Stop JBoss EAP in Standalone Mode</strong></p><ul><li class="listitem"><div class="para">
				
<pre class="screen"><em class="replaceable">JSVC_BIN</em> \
 -stop \
 -outfile <em class="replaceable">LOG_DIR</em>/jsvc.out.log   \
 -errfile <em class="replaceable">LOG_DIR</em>/jsvc.err.log   \
 -pidfile <em class="replaceable">LOG_DIR</em>/jsvc.pid  \
 -user jboss \
 -D[Standalone] -XX:+UseCompressedOops -Xms1303m \
 -Xmx1303m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true \
 -Dorg.jboss.boot.log.file=<em class="replaceable">LOG_DIR</em>/server.log \
 -Dlogging.configuration=file:<em class="replaceable">CONF_DIR</em>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp <em class="replaceable">EAP_HOME</em>/jboss-modules.jar:<em class="replaceable">JSVC_JAR</em> \
 -Djboss.home.dir=<em class="replaceable">EAP_HOME</em> \
 -Djboss.server.base.dir=<em class="replaceable">EAP_HOME</em>/standalone   \
 @org.jboss.modules.Main -start-method main \
 -mp <em class="replaceable">EAP_HOME</em>/modules \
 -jaxpmodule javax.xml.jaxp-provider \
 org.jboss.as.standalone</pre>

			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Domain Mode</div>
			The following instructions are to start or stop JBoss EAP in domain mode. Note that for domain mode, you must replace the <em class="replaceable">JAVA_HOME</em> variable with the Java home directory.
		</div><div class="table"><a id="idm139978537875056">
      ⁠</a><p class="title"><strong>Table 8.3. Jsvc File Locations for Zip Installations - Domain Mode</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Jsvc File Locations for Zip Installations - Domain Mode"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="67%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> File Reference in Instructions </th><th style="text-align: left"> File Location </th></tr></thead><tbody><tr><td style="text-align: left"> EAP-HOME </td><td style="text-align: left"> <div class="para">
						${eap-installation-location}/jboss-eap-${version}
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-BIN </td><td style="text-align: left"> <div class="para">
						EAP_HOME/modules/system/layers/base/native/sbin/jsvc
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-JAR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/modules/system/layers/base/native/sbin/commons-daemon.jar
					</div>
					 </td></tr><tr><td style="text-align: left"> CONF-DIR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/domain/configuration
					</div>
					 </td></tr><tr><td style="text-align: left"> LOG-DIR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/domain/log
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="idm139978539912176">
      ⁠</a><p class="title"><strong>Table 8.4. Jsvc File Locations for RPM Installations - Domain Mode</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Jsvc File Locations for RPM Installations - Domain Mode"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="67%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> File Reference in Instructions </th><th style="text-align: left"> File Location </th></tr></thead><tbody><tr><td style="text-align: left"> EAP-HOME </td><td style="text-align: left"> <div class="para">
						/usr/share/jbossas
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-BIN </td><td style="text-align: left"> <div class="para">
						/usr/bin/jsvc-eap6/jsvc
					</div>
					 </td></tr><tr><td style="text-align: left"> JSVC-JAR </td><td style="text-align: left"> <div class="para">
						EAP_HOME/modules/system/layers/base/native/sbin/commons-daemon.jar
					</div>
					 </td></tr><tr><td style="text-align: left"> CONF-DIR </td><td style="text-align: left"> <div class="para">
						/etc/jbossas/domain
					</div>
					 </td></tr><tr><td style="text-align: left"> LOG-DIR </td><td style="text-align: left"> <div class="para">
						/var/log/jbossas/domain
					</div>
					 </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Start JBoss EAP in Domain Mode</strong></p><ul><li class="listitem"><div class="para">
				
<pre class="screen"><em class="replaceable">JSVC_BIN</em> \
 -outfile <em class="replaceable">LOG_DIR</em>/jsvc.out.log   \
 -errfile <em class="replaceable">LOG_DIR</em>/jsvc.err.log   \
 -pidfile <em class="replaceable">LOG_DIR</em>/jsvc.pid  \
 -user jboss \
 -nodetach -D"[Process Controller]" -server -Xms64m \
 -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true  \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true  \
 -Dorg.jboss.boot.log.file=<em class="replaceable">LOG_DIR</em>/process-controller.log \
 -Dlogging.configuration=file:<em class="replaceable">CONF_DIR</em>/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp "<em class="replaceable">EAP_HOME</em>/jboss-modules.jar:<em class="replaceable">JSVC_JAR</em>" \
 org.apache.commons.daemon.support.DaemonWrapper \
 -start org.jboss.modules.Main -start-method main \
 -mp EAP_HOME/modules org.jboss.as.process-controller \
 -jboss-home <em class="replaceable">EAP_HOME</em> -jvm $<em class="replaceable">JAVA_HOME</em>/bin/java \
 -mp <em class="replaceable">EAP_HOME</em>/modules -- \
 -Dorg.jboss.boot.log.file=<em class="replaceable">LOG_DIR</em>/host-controller.log \
 -Dlogging.configuration=file:<em class="replaceable">CONF_DIR</em>/logging.properties \
 -Djboss.modules.policy-permissions \
 -server -Xms64m -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true -- -default-jvm $<em class="replaceable">JAVA_HOME</em>/bin/java</pre>

			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Stop JBoss EAP in Domain Mode</strong></p><ul><li class="listitem"><div class="para">
				
<pre class="screen"><em class="replaceable">JSVC_BIN</em> \
 -stop \
 -outfile <em class="replaceable">LOG_DIR</em>/jsvc.out.log   \
 -errfile <em class="replaceable">LOG_DIR</em>/jsvc.err.log   \
 -pidfile <em class="replaceable">LOG_DIR</em>/jsvc.pid  \
 -user jboss \
 -nodetach -D"[Process Controller]" -server -Xms64m \
 -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true  \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true  \
 -Dorg.jboss.boot.log.file=<em class="replaceable">LOG_DIR</em>/process-controller.log \
 -Dlogging.configuration=file:CONF_DIR/logging.properties \
 -Djboss.modules.policy-permissions \
 -cp "<em class="replaceable">EAP_HOME</em>/jboss-modules.jar:<em class="replaceable">JSVC_JAR</em>" \
 org.apache.commons.daemon.support.DaemonWrapper \
 -start org.jboss.modules.Main -start-method main \
 -mp <em class="replaceable">EAP_HOME</em>/modules org.jboss.as.process-controller \
 -jboss-home <em class="replaceable">EAP_HOME</em> -jvm $<em class="replaceable">JAVA_HOME</em>/bin/java \
 -mp <em class="replaceable">EAP_HOME</em>/modules -- \
 -Dorg.jboss.boot.log.file=<em class="replaceable">LOG_DIR</em>/host-controller.log \
 -Dlogging.configuration=file:<em class="replaceable">CONF_DIR</em>/logging.properties \
 -Djboss.modules.policy-permissions \
 -server -Xms64m -Xmx512m -XX:MaxPermSize=256m \
 -Djava.net.preferIPv4Stack=true \
 -Djboss.modules.system.pkgs=org.jboss.byteman \
 -Djava.awt.headless=true -- -default-jvm $<em class="replaceable">JAVA_HOME</em>/bin/java</pre>

			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			If JBoss EAP 6 is terminated abnormally, such as a JVM crash, Jsvc will automatically restart it. If JBoss EAP 6 is terminated correctly, Jsvc will also stop.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+40869-685716+%5BLatest%5D&amp;comment=Title%3A+Start+and+Stop+JBoss+EAP+using+Jsvc%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=40869-685716+16+Jul+2014+20%3A43+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>