<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 6. Datasource Management</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Datasource_Management">
      ⁠</a>Chapter 6. Datasource Management</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Introduction5">
      ⁠</a>6.1. Introduction</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_JDBC1">
      ⁠</a>6.1.1. About JDBC</h2></div></div></div><div class="para">
		The JDBC API is the standard that defines how databases are accessed by Java applications. An application configures a datasource that references a JDBC driver. Application code can then be written against the driver, rather than the database. The driver converts the code to the database language. This means that if the correct driver is installed, an application can be used with any supported database.
	</div><div class="para">
		The JDBC 4.0 specification is defined here: <a href="http://jcp.org/en/jsr/detail?id=221">http://jcp.org/en/jsr/detail?id=221</a>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978477983008">
      ⁠</a><p class="title"><strong>Procedure 6.1. Test datasource pools connection using Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Select the <span class="guimenu"><strong>Runtime</strong></span> tab from the top of the Management Console.
			</div></li><li class="step"><div class="para">
				Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left, and select <span class="guimenu"><strong>Datasources</strong></span>.
			</div></li><li class="step"><div class="para">
				Click the <span class="guibutton"><strong>Test Connection</strong></span> button to test the connection to the datasource and verify the settings are correct.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978457025520">
      ⁠</a><p class="title"><strong>Procedure 6.2. Test datasource connection using Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Launch the CLI tool and connect to your server.
			</div></li><li class="step"><div class="para">
				Run the following Management CLI command to test the connection:
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						In Standalone mode, enter the following command:
					</div><pre class="screen">
/subsystem=datasources/data-source=ExampleDS:test-connection-in-pool
</pre></li>
				 <li class="step"><div class="para">
						In Domain mode, enter the following command:
					</div><pre class="screen"><code class="command">host=master/server=server-one/subsystem=datasources/data-source=ExampleDS:test-connection-in-pool</code></pre></li>

			</ul></li></ol></div><div class="para">
		To get started with JDBC and datasources, refer to the JDBC Driver section of the Administration and Configuration Guide for JBoss EAP 6.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8814-767321+%5BLatest%5D&amp;comment=Title%3A+About+JDBC%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8814-767321+13+Aug+2015+07%3A00+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JBoss_Enterprise_Application_Platform_6_Supported_Databases">
      ⁠</a>6.1.2. JBoss EAP 6 Supported Databases</h2></div></div></div><div class="para">
		The list of JDBC compliant databases supported by JBoss EAP 6 is available here: <a href="https://access.redhat.com/articles/111663">https://access.redhat.com/articles/111663</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8815-767769+%5BLatest%5D&amp;comment=Title%3A+JBoss+EAP+6+Supported+Databases%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8815-767769+19+Aug+2015+08%3A03+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Types_of_Datasources1">
      ⁠</a>6.1.3. Types of Datasources</h2></div></div></div><div class="para">
		The two general types of resources are referred to as <code class="literal">datasources</code> and <code class="literal">XA datasources</code>.
	</div><div class="para">
		Non-XA datasources are used for applications which do not use transactions, or applications which use transactions with a single database.
	</div><div class="para">
		XA datasources are used by applications whose transactions are distributed across multiple databases. XA datasources introduce additional overhead.
	</div><div class="para">
		You specify the type of your datasource when you create it in the Management Console or Management CLI.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+2769-591649+%5BLatest%5D&amp;comment=Title%3A+Types+of+Datasources%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2769-591649+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="The_Example_Datasource">
      ⁠</a>6.1.4. The Example Datasource</h2></div></div></div><div class="para">
		JBoss EAP 6 includes a H2 database. It is a lightweight, relational database management system that provides developers with the ability to quickly build applications, and is the example datasource for the platform.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			However, it should not be used in a production environment. It is a very small, self-contained datasource that supports all of the standards needed for testing and building applications, but is not robust or scalable enough for production use.
		</div></div></div><div class="para">
		For a list of supported and certified datasources, refer here: <a class="xref" href="chap-Datasource_Management.html#JBoss_Enterprise_Application_Platform_6_Supported_Databases">Section 6.1.2, “JBoss EAP 6 Supported Databases”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5181-591687+%5BLatest%5D&amp;comment=Title%3A+The+Example+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5181-591687+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Deployment_of_-ds.xml_files">
      ⁠</a>6.1.5. Deployment of -ds.xml files</h2></div></div></div><div class="para">
		In JBoss EAP 6, datasources are defined as a resource of the server subsystem. In previous versions, a <code class="filename">*-ds.xml</code> datasource configuration file was required in the deployment directory of the server configuration. <code class="filename">*-ds.xml</code> files can still be deployed in JBoss EAP 6, following the 1.1 data sources schema available under <em class="citetitle">Schemas</em> here: <a href="http://www.ironjacamar.org/documentation.html">http://www.ironjacamar.org/documentation.html</a>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			This feature should only be used for development. It is not recommended for production environments because it is not supported by the JBoss administrative and management tools. This feature is deprecated in JBoss EAP 6.4 and will not be supported in the next major release of the product.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			It is mandatory to use a reference to an already deployed / defined &lt;driver&gt; entry when deploying <code class="filename">*-ds.xml</code> files.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+6889-744343+%5BLatest%5D&amp;comment=Title%3A+Deployment+of+-ds.xml+files%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6889-744343+23+Feb+2015+07%3A51+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JDBC_Drivers">
      ⁠</a>6.2. JDBC Drivers</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Install_a_JDBC_Driver_with_the_Management_Console">
      ⁠</a>6.2.1. Install a JDBC Driver with the Management Console</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Before your application can connect to a JDBC datasource, your datasource vendor's JDBC drivers need to be installed in a location where JBoss EAP 6 can use them. JBoss EAP 6 allows you to deploy these drivers like any other deployment. This means that you can deploy them across multiple servers in a server group, if you use a managed domain.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Prerequisites</div>
			Before performing this task, you need to meet the following prerequisites:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Download the JDBC driver from your database vendor.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Any JDBC 4-compliant driver is automatically recognized and installed in the system by name and version. A JDBC JAR is identified using the Java service provider mechanism. Such JARs contain the META-INF/services/java.sql.Driver text, which contains the name of the Driver classes in that JAR.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978540123120">
      ⁠</a><p class="title"><strong>Procedure 6.3. Modify the JDBC Driver JAR</strong></p><div class="para">
			If the JDBC driver JAR is not JDBC 4-compliant, it can be made deployable using the following method.
		</div><ol class="1"><li class="step"><div class="para">
				Change to, or create, an empty temporary directory.
			</div></li><li class="step"><div class="para">
				Create a META-INF subdirectory.
			</div></li><li class="step"><div class="para">
				Create a META-INF/services subdirectory.
			</div></li><li class="step"><div class="para">
				Create a META-INF/services/java.sql.Driver file, which contains one line indicating the fully-qualified class name of the JDBC driver.
			</div></li><li class="step"><div class="para">
				Use the JAR command-line tool to update the JAR like this: 
<pre class="screen">jar \-uf jdbc-driver.jar META-INF/services/java.sql.Driver</pre>

			</div></li><li class="step"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li><li class="step"><div class="para">
				If you use a managed domain, deploy the JAR file to a server group. Otherwise, deploy it to your server. See <a class="xref" href="chap-Application_Deployment.html#Deploy_an_Application_Using_the_Management_Console1">Section 10.2.2, “Enable a Deployed Application Using the Management Console”</a>.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			The JDBC driver is deployed, and is available for your applications to use.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+2701-690763+%5BLatest%5D&amp;comment=Title%3A+Install+a+JDBC+Driver+with+the+Management+Console%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2701-690763+05+Aug+2014+20%3A22+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Install_a_JDBC_Driver_as_a_Core_Module1">
      ⁠</a>6.2.2. Install a JDBC Driver as a Core Module</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Prerequisites</div>
			Before performing this task, you need to meet the following prerequisites:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Download the JDBC driver from your database vendor. JDBC driver download locations are listed here: <a class="xref" href="chap-Datasource_Management.html#JDBC_Driver_Download_Locations1">Section 6.2.3, “JDBC Driver Download Locations”</a>.
			</div></li><li class="listitem"><div class="para">
				Extract the archive.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978526411296">
      ⁠</a><p class="title"><strong>Procedure 6.4. Install a JDBC Driver as a Core Module Using the Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Start the Server.
			</div></li><li class="step"><div class="para">
				Start the Management CLI, but do not use the <code class="code">--connect</code> or <code class="code">-c</code> argument to connect to the running instance.
			</div></li><li class="step"><div class="para">
				Use the <code class="code">module add</code> CLI command to add the new module.
			</div><div class="example"><a id="idm139978495434816">
      ⁠</a><p class="title"><strong>Example 6.1. Example CLI command to add a MySQL JDBC driver module</strong></p><div class="example-contents"><pre class="screen">module add --name=com.mysql --resources=/path/to/mysql.jar --dependencies=javax.api,javax.transaction.api</pre></div></div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Using the <code class="code">module</code> management CLI command to add and remove modules is provided as <a href="https://access.redhat.com/support/offerings/techpreview">technology preview</a> only, and should not be used to add modules to a remote JBoss EAP instance. Modules should be added and removed manually in a production environment.
				</div><div class="para">
					Perform the following steps to add a module manually. 
					<div class="orderedlist"><ol><li class="listitem"><div class="para">
								A file path structure will be created under the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/</code> directory. For example, for a MySQL JDBC driver, the following will be created: <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/com/mysql/main/</code>.
							</div></li><li class="listitem"><div class="para">
								The JAR files specified as resources will be copied to the <code class="filename">main/</code> subdirectory.
							</div></li><li class="listitem"><div class="para">
								A module.xml file with the specified dependencies will be created in the <code class="filename">main/</code> subdirectory. See <a class="xref" href="chap-Configuring_Modules.html#Modules">Section 7.1.1, “Modules”</a> for an example of a module.xml file.
							</div></li></ol></div>
					 Execute <code class="code">module --help</code> for more details on using this command to add and remove modules.
				</div></div></div></li><li class="step"><div class="para">
				Use the <code class="code">connect</code> CLI command to connect to the running instance.
			</div></li><li class="step"><div class="para">
				Run the CLI command to add the JDBC driver module to the server configuration.
			</div><div class="para">
				The command you choose depends on the number of classes listed in the <code class="filename">/META-INF/services/java.sql.Driver</code> file located in the JDBC driver JAR. For example, the <code class="filename">/META-INF/services/java.sql.Driver</code> file in the MySQL 5.1.20 JDBC JAR lists two classes: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							<code class="filename">com.mysql.jdbc.Driver</code>
						</div></li><li class="listitem"><div class="para">
							<code class="filename">com.mysql.fabric.jdbc.FabricMySQLDriver</code>
						</div></li></ul></div>
				 When there is more than one entry, you must also specify the name of the driver class. Failure to do so results in an error similar to the following: 
				<div class="example"><a id="idm139978526736560">
      ⁠</a><p class="title"><strong>Example 6.2. Driver class error</strong></p><div class="example-contents"><pre class="screen">JBAS014749: Operation handler failed: Service jboss.jdbc-driver.mysql is already registered</pre></div></div>

			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						Run the CLI command for JDBC JARs containing one class entry. 
<pre class="screen">/subsystem=datasources/jdbc-driver=<em class="replaceable">DRIVER_NAME</em>:add(driver-name=<em class="replaceable">DRIVER_NAME</em>,driver-module-name=<em class="replaceable">MODULE_NAME</em>,driver-xa-datasource-class-name=<em class="replaceable">XA_DATASOURCE_CLASS_NAME</em>)</pre>
						 <div class="example"><a id="idm139978464361472">
      ⁠</a><p class="title"><strong>Example 6.3. CLI Command for Standalone Mode for JDBC JARs with one driver class</strong></p><div class="example-contents"><pre class="screen">/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.jdbc.jdbc2.optional.MysqlXADataSource)</pre></div></div>
						 <div class="example"><a id="idm139978465286368">
      ⁠</a><p class="title"><strong>Example 6.4. CLI Command for Domain Mode for JDBC JARs with one driver class</strong></p><div class="example-contents"><pre class="screen">/profile=ha/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.jdbc.jdbc2.optional.MysqlXADataSource)</pre></div></div>

					</div></li>
				 <li class="step"><div class="para">
						Run the CLI command for JDBC JARs containing multiple class entries. 
<pre class="screen">/subsystem=datasources/jdbc-driver=<em class="replaceable">DRIVER_NAME</em>:add(driver-name=<em class="replaceable">DRIVER_NAME</em>,driver-module-name=<em class="replaceable">MODULE_NAME</em>,driver-xa-datasource-class-name=<em class="replaceable">XA_DATASOURCE_CLASS_NAME</em>, driver-class-name=<em class="replaceable">DRIVER_CLASS_NAME</em>)</pre>
						 <div class="example"><a id="idm139978544338976">
      ⁠</a><p class="title"><strong>Example 6.5. CLI Command for Standalone Mode for JDBC JARs with multiple driver class entries</strong></p><div class="example-contents"><pre class="screen">/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.jdbc.jdbc2.optional.MysqlXADataSource, driver-class-name=com.mysql.jdbc.Driver)</pre></div></div>
						 <div class="example"><a id="idm139978513319936">
      ⁠</a><p class="title"><strong>Example 6.6. CLI Command for Domain Mode for JDBC JARs with multiple driver class entries</strong></p><div class="example-contents"><pre class="screen">/profile=ha/subsystem=datasources/jdbc-driver=mysql:add(driver-name=mysql,driver-module-name=com.mysql,driver-xa-datasource-class-name=com.mysql.jdbc.jdbc2.optional.MysqlXADataSource, driver-class-name=com.mysql.jdbc.Driver)</pre></div></div>
						 <div class="example"><a id="idm139978512655664">
      ⁠</a><p class="title"><strong>Example 6.7. CLI Command for Domain Mode for JDBC JARs with multiple non-XA driver class entries</strong></p><div class="example-contents"><pre class="screen">/profile=ha/subsystem=datasources/jdbc-driver=oracle/:add(driver-module-name=com.oracle,driver-name=oracle,jdbc-compliant=true,driver-datasource-class-name=oracle.jdbc.OracleDriver)</pre></div></div>

					</div></li>

			</ul></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JDBC driver is now installed and set up as a core module, and is available to be referenced by application datasources.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8849-781121+%5BLatest%5D&amp;comment=Title%3A+Install+a+JDBC+Driver+as+a+Core+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8849-781121+26+Jan+2017+14%3A36+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JDBC_Driver_Download_Locations1">
      ⁠</a>6.2.3. JDBC Driver Download Locations</h2></div></div></div><div class="para">
		The following table gives the standard download locations for JDBC drivers of common databases used with JBoss EAP 6.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			These links point to third-party websites which are not controlled or actively monitored by Red Hat. For the most up-to-date drivers for your database, check your database vendor's documentation and website.
		</div></div></div><div class="table"><a id="idm139978495156048">
      ⁠</a><p class="title"><strong>Table 6.1. JDBC driver download locations</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="JDBC driver download locations"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Vendor </th><th style="text-align: left"> Download Location </th></tr></thead><tbody><tr><td style="text-align: left"> MySQL </td><td style="text-align: left"> <div class="para">
						<a href="http://www.mysql.com/products/connector/">http://www.mysql.com/products/connector/</a>
					</div>
					 </td></tr><tr><td style="text-align: left"> PostgreSQL </td><td style="text-align: left"> <div class="para">
						<a href="http://jdbc.postgresql.org/">http://jdbc.postgresql.org/</a>
					</div>
					 </td></tr><tr><td style="text-align: left"> Oracle </td><td style="text-align: left"> <div class="para">
						<a href="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html</a>
					</div>
					 </td></tr><tr><td style="text-align: left"> IBM </td><td style="text-align: left"> <div class="para">
						<a href="http://www-306.ibm.com/software/data/db2/java/">http://www-306.ibm.com/software/data/db2/java/</a>
					</div>
					 </td></tr><tr><td style="text-align: left"> Sybase </td><td style="text-align: left"> <div class="para">
						<a href="http://www.sybase.com/products/allproductsa-z/softwaredeveloperkit/jconnect">http://www.sybase.com/products/allproductsa-z/softwaredeveloperkit/jconnect</a>
					</div>
					 </td></tr><tr><td style="text-align: left"> Microsoft </td><td style="text-align: left"> <div class="para">
						<a href="http://msdn.microsoft.com/data/jdbc/">http://msdn.microsoft.com/data/jdbc/</a>
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4557-759345+%5BLatest%5D&amp;comment=Title%3A+JDBC+Driver+Download+Locations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4557-759345+26+May+2015+06%3A30+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Access_Vendor_Specific_Classes">
      ⁠</a>6.2.4. Access Vendor Specific Classes</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to use the JDBC specific classes. This is necessary when an application needs to use vendor specific functionality that is not part of the JDBC API.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			This is advanced usage. Only applications that need functionality not found in the JDBC API should implement this procedure.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			This process is required when using the reauthentication mechanism, and accessing vendor specific classes.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Follow the vendor specific API guidelines closely, as the connection is being controlled by the IronJacamar container.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Datasource_Management.html#Install_a_JDBC_Driver_as_a_Core_Module1">Section 6.2.2, “Install a JDBC Driver as a Core Module”</a>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978534076464">
      ⁠</a><p class="title"><strong>Procedure 6.5. Add a Dependency to the Application</strong></p><div class="para">
			You can add a dependency to an application using either of the following methods. Choose whichever method you prefer.
		</div><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Configure the <code class="filename">MANIFEST.MF</code> file</strong></p><ol class="substeps a"><li class="step"><div class="para">
								Open the application's <code class="filename">META-INF/MANIFEST.MF</code> file in a text editor.
							</div></li><li class="step"><div class="para">
								Add a dependency for the JDBC module and save the file.
							</div><pre class="screen">Dependencies: <em class="replaceable">MODULE_NAME</em></pre><div class="example"><a id="idm139978536606848">
      ⁠</a><p class="title"><strong>Example 6.8. MANIFEST.MF file with com.mysql declared as a dependency</strong></p><div class="example-contents"><pre class="screen">Dependencies: com.mysql</pre></div></div></li></ol></li>
				 <li class="step"><ol class="substeps a"><li class="step"><p class="title"><strong>Create a <code class="filename">jboss-deployment-structure.xml</code> file</strong></p><div class="para">
								Create a file called <code class="filename">jboss-deployment-structure.xml</code> in the <code class="filename">META-INF/</code> or <code class="filename">WEB-INF</code> folder of the application.
							</div><div class="example"><a id="idm139978502959552">
      ⁠</a><p class="title"><strong>Example 6.9. <code class="filename">jboss-deployment-structure.xml</code> file with com.mysql declared as a dependency</strong></p><div class="example-contents"><pre class="programlisting">&lt;jboss-deployment-structure&gt;
  &lt;deployment&gt;
    &lt;dependencies&gt;
      &lt;module name="com.mysql" /&gt;
    &lt;/dependencies&gt;
  &lt;/deployment&gt;
&lt;/jboss-deployment-structure&gt;</pre></div></div></li></ol></li>

			</ul></li></ul></div><div class="example"><a id="idm139978507867808">
      ⁠</a><p class="title"><strong>Example 6.10. Access the Vendor Specific API</strong></p><div class="example-contents"><div class="para">
			The example below accesses the MySQL API.
		</div><pre class="programlisting">
import java.sql.Connection;
import org.jboss.jca.adapters.jdbc.WrappedConnection;

  Connection c = ds.getConnection();
  WrappedConnection wc = (WrappedConnection)c;
  com.mysql.jdbc.Connection mc = wc.getUnderlyingConnection();
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+10904-741711+%5BLatest%5D&amp;comment=Title%3A+Access+Vendor+Specific+Classes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=10904-741711+05+Feb+2015+22%3A33+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Non-XA_Datasources">
      ⁠</a>6.3. Non-XA Datasources</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_a_Non-XA_Datasource_with_the_Management_Interfaces">
      ⁠</a>6.3.1. Create a Non-XA Datasource with the Management Interfaces</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to create a non-XA datasource, using either the Management Console or the Management CLI.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				The JBoss EAP 6 server must be running.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Oracle Datasources</strong></p></div><div class="admonition"><div class="para">
			Prior to version 10.2 of the Oracle datasource, the &lt;no-tx-separate-pools/&gt; parameter was required, as mixing non-transactional and transactional connections would result in an error. This parameter may no longer be required for certain applications.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Domain Mode</strong></p></div><div class="admonition"><div class="para">
			To prevent issues such as duplication of driver listing, selected driver not available in a profile, or driver not displayed if a server for the profile is not running, in JBoss EAP 6.4 onwards, only JDBC drivers that are installed as modules and correctly referenced from profiles are detectable while creating a datasource using the Management Console in domain mode.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978449113120">
      ⁠</a><p class="title"><strong>Procedure 6.6. Create a Datasource using either the Management CLI or the Management Console</strong></p><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Management CLI</strong></p><ol class="substeps a"><li class="step"><div class="para">
								Launch the CLI tool and connect to your server.
							</div></li><li class="step"><div class="para">
								Run the following Management CLI command to create a non-XA datasource, configuring the variables as appropriate:
							</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
									The value for <em class="replaceable">DRIVER_NAME</em> depends on the number of classes listed in the <code class="filename">/META-INF/services/java.sql.Driver</code> file located in the JDBC driver JAR. If there is only one class, the value is the name of the JAR. If there are multiple classes, the value is the name of the JAR + driverClassName + "_" + majorVersion +"_" + minorVersion. Failure to do so will result in the following error being logged:
								</div><pre class="screen">JBAS014775:    New missing/unsatisfied dependencies</pre><div class="para">
									For example, the <em class="replaceable">DRIVER_NAME</em> value required for the MySQL 5.1.31 driver, is <code class="literal">mysql-connector-java-5.1.31-bin.jarcom.mysql.jdbc.Driver_5_1</code>.
								</div></div></div><pre class="screen">data-source add --name=<em class="replaceable">DATASOURCE_NAME</em> --jndi-name=<em class="replaceable">JNDI_NAME</em> --driver-name=<em class="replaceable">DRIVER_NAME</em>  --connection-url=<em class="replaceable">CONNECTION_URL</em></pre></li><li class="step"><div class="para">
								Enable the datasource:
							</div><pre class="screen">data-source enable --name=<em class="replaceable">DATASOURCE_NAME</em></pre></li></ol></li>
				 <li class="step"><p class="title"><strong>Management Console</strong></p><ol class="substeps a"><li class="step"><div class="para">
								Login to the Management Console.
							</div></li><li class="step"><p class="title"><strong>Navigate to the <span class="guilabel"><strong>Datasources</strong></span> panel in the Management Console</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the console.
									</div></li><li class="step"><div class="para">
										For Domain mode only, select a profile from the drop-down box in the top left.
									</div></li><li class="step"><div class="para">
										Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left of the console, then expand the <span class="guimenu"><strong>Connector</strong></span> menu.
									</div></li><li class="step"><div class="para">
										Select <span class="guimenuitem"><strong>Datasources</strong></span> from the menu on the left of the console.
									</div></li></ol></li><li class="step"><p class="title"><strong>Create a new datasource</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Click <span class="guibutton"><strong>Add</strong></span> at the top of the <span class="guilabel"><strong>Datasources</strong></span> panel.
									</div></li><li class="step"><div class="para">
										Enter the new datasource attributes in the <span class="guilabel"><strong>Create Datasource</strong></span> wizard and proceed with the <span class="guibutton"><strong>Next</strong></span> button.
									</div></li><li class="step"><div class="para">
										Enter the JDBC driver details in the <span class="guilabel"><strong>Create Datasource</strong></span> wizard and click <span class="guibutton"><strong>Next</strong></span> to continue.
									</div></li><li class="step"><div class="para">
										Enter the connection settings in the <span class="guilabel"><strong>Create Datasource</strong></span> wizard.
									</div></li><li class="step"><div class="para">
										Click the <span class="guibutton"><strong>Test Connection</strong></span> button to test the connection to the datasource and verify the settings are correct.
									</div></li><li class="step"><div class="para">
										Click <span class="guibutton"><strong>Done</strong></span> to finish
									</div></li></ol></li></ol></li>

			</ul></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The non-XA datasource has been added to the server. It is now visible in either the <code class="filename">standalone.xml</code> or <code class="filename">domain.xml</code> file, as well as the management interfaces.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4805-762760+%5BLatest%5D&amp;comment=Title%3A+Create+a+Non-XA+Datasource+with+the+Management+Interfaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4805-762760+24+Jun+2015+00%3A45+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Modify_a_Non-XA_Datasource_with_the_Management_Interfaces">
      ⁠</a>6.3.2. Modify a Non-XA Datasource with the Management Interfaces</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to modify a non-XA datasource, using either the Management Console or the Management CLI.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_EAP_6">Section 2.2.1, “Start JBoss EAP 6”</a>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>JTA Integration</strong></p></div><div class="admonition"><div class="para">
			Non-XA datasources can be integrated with JTA transactions. To integrate the datasource with JTA, ensure that the <code class="code">jta</code> parameter is set to <code class="literal">true</code>.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978539959664">
      ⁠</a><p class="title"><strong>Procedure 6.7. Modify a Non-XA Datasource</strong></p><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Management CLI</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>.
							</div></li><li class="step"><div class="para">
								Use the <code class="literal">write-attribute</code> command to configure a datasource attribute:
							</div><pre class="screen">/subsystem=datasources/data-source=<em class="replaceable">DATASOURCE_NAME</em>:write-attribute(name=<em class="replaceable">ATTRIBUTE_NAME</em>,value=<em class="replaceable">ATTRIBUTE_VALUE</em>)</pre></li><li class="step optional"><div class="para">
								Reload the server to confirm the changes:
							</div><pre class="screen">reload</pre></li></ol></li>
				 <li class="step"><p class="title"><strong>Management Console</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
							</div></li><li class="step"><p class="title"><strong>Navigate to the <span class="guilabel"><strong>Datasources</strong></span> panel in the Management Console</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the console.
									</div></li><li class="step"><div class="para">
										For Domain mode only, select a profile from the drop-down box in the top left.
									</div></li><li class="step"><div class="para">
										Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left of the console, then expand the <span class="guimenu"><strong>Connector</strong></span> menu.
									</div></li><li class="step"><div class="para">
										Select <span class="guimenuitem"><strong>Datasources</strong></span> from expanded menu.
									</div></li></ol></li><li class="step"><p class="title"><strong>Edit the datasource</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select a datasource from the <span class="guilabel"><strong>Available Datasources</strong></span> list. The datasource attributes are displayed below.
									</div></li><li class="step"><div class="para">
										Click <span class="guibutton"><strong>Edit</strong></span> to edit the datasource attributes.
									</div></li><li class="step"><div class="para">
										Click <span class="guibutton"><strong>Save</strong></span> to finish.
									</div></li></ol></li></ol></li>

			</ul></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The non-XA datasource has been configured. The changes are now visible in either the <code class="filename">standalone.xml</code> or <code class="filename">domain.xml</code> file, as well as the management interfaces.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				To create a new datasource, refer here: <a class="xref" href="chap-Datasource_Management.html#Create_a_Non-XA_Datasource_with_the_Management_Interfaces">Section 6.3.1, “Create a Non-XA Datasource with the Management Interfaces”</a>.
			</div></li><li class="listitem"><div class="para">
				To remove the datasource, refer here: <a class="xref" href="chap-Datasource_Management.html#Remove_a_Non-XA_Datasource_with_the_Management_Interfaces1">Section 6.3.3, “Remove a Non-XA Datasource with the Management Interfaces”</a>.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4806-764350+%5BLatest%5D&amp;comment=Title%3A+Modify+a+Non-XA+Datasource+with+the+Management+Interfaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4806-764350+09+Jul+2015+04%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Remove_a_Non-XA_Datasource_with_the_Management_Interfaces1">
      ⁠</a>6.3.3. Remove a Non-XA Datasource with the Management Interfaces</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to remove a non-XA datasource from JBoss EAP 6, using either the Management Console or the Management CLI.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_EAP_6">Section 2.2.1, “Start JBoss EAP 6”</a>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978442203120">
      ⁠</a><p class="title"><strong>Procedure 6.8. Remove a Non-XA Datasource</strong></p><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Management CLI</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>.
							</div></li><li class="step"><div class="para">
								Run the following command to remove a non-XA datasource:
							</div><pre class="screen">data-source remove --name=<em class="replaceable">DATASOURCE_NAME</em></pre></li></ol></li>
				 <li class="step"><p class="title"><strong>Management Console</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
							</div></li><li class="step"><p class="title"><strong>Navigate to the <span class="guilabel"><strong>Datasources</strong></span> panel in the Management Console</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the console.
									</div></li><li class="step"><div class="para">
										For Domain mode only, select a profile from the drop-down box in the top left.
									</div></li><li class="step"><div class="para">
										Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left of the console, then expand the <span class="guimenu"><strong>Connector</strong></span> menu.
									</div></li><li class="step"><div class="para">
										Select <span class="guimenuitem"><strong>Datasources</strong></span>.
									</div></li></ol></li><li class="step"><div class="para">
								Select the datasource to be deleted, then click <span class="guibutton"><strong>Remove</strong></span>.
							</div></li></ol></li>

			</ul></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The non-XA datasource has been removed from the server.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				To add a new datasource, refer here: <a class="xref" href="chap-Datasource_Management.html#Create_a_Non-XA_Datasource_with_the_Management_Interfaces">Section 6.3.1, “Create a Non-XA Datasource with the Management Interfaces”</a>.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4807-631907+%5BLatest%5D&amp;comment=Title%3A+Remove+a+Non-XA+Datasource+with+the+Management+Interfaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4807-631907+16+Apr+2014+00%3A56+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-XA_Datasources">
      ⁠</a>6.4. XA Datasources</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_an_XA_Datasource_with_the_Management_Interfaces">
      ⁠</a>6.4.1. Create an XA Datasource with the Management Interfaces</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist prereqs-list"><p class="title"><strong>Prerequisites:</strong></p><ul class="prereqs-list prereqs-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_EAP_6">Section 2.2.1, “Start JBoss EAP 6”</a>
			</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to create an XA datasource, using either the Management Console or the Management CLI.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Oracle Datasources</strong></p></div><div class="admonition"><div class="para">
			Prior to version 10.2 of the Oracle datasource, the &lt;no-tx-separate-pools/&gt; parameter was required, as mixing non-transactional and transactional connections would result in an error. This parameter may no longer be required for certain applications.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978488119536">
      ⁠</a><p class="title"><strong>Procedure 6.9. Create an XA Datasource, Using Either the Management CLI or the Management Console</strong></p><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Management CLI</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>.
							</div></li><li class="step"><div class="para">
								Run the following Management CLI command to create an XA datasource, configuring the variables as appropriate:
							</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
									The value for <em class="replaceable">DRIVER_NAME</em> depends on the number of classes listed in the <code class="filename">/META-INF/services/java.sql.Driver</code> file located in the JDBC driver JAR. If there is only one class, the value is the name of the JAR. If there are multiple classes, the value is the name of the JAR + driverClassName + "_" + majorVersion +"_" + minorVersion. Failure to do so will result in the following error being logged:
								</div><pre class="screen">JBAS014775:    New missing/unsatisfied dependencies</pre><div class="para">
									For example, the <em class="replaceable">DRIVER_NAME</em> value required for the MySQL 5.1.31 driver, is <code class="literal">mysql-connector-java-5.1.31-bin.jarcom.mysql.jdbc.Driver_5_1</code>.
								</div></div></div><pre class="screen">xa-data-source add --name=<em class="replaceable">XA_DATASOURCE_NAME</em> --jndi-name=<em class="replaceable">JNDI_NAME</em> --driver-name=<em class="replaceable">DRIVER_NAME</em> --xa-datasource-class=<em class="replaceable">XA_DATASOURCE_CLASS</em></pre></li><li class="step"><p class="title"><strong>Configure the XA datasource properties</strong></p><ol class="substeps i"><li class="step"><p class="title"><strong>Set the server name</strong></p><div class="para">
										Run the following command to configure the server name for the host:
									</div><pre class="screen">/subsystem=datasources/xa-data-source=<em class="replaceable">XA_DATASOURCE_NAME</em>/xa-datasource-properties=ServerName:add(value=<em class="replaceable">HOSTNAME</em>)</pre></li><li class="step"><p class="title"><strong>Set the database name</strong></p><div class="para">
										Run the following command to configure the database name:
									</div><pre class="screen">/subsystem=datasources/xa-data-source=<em class="replaceable">XA_DATASOURCE_NAME</em>/xa-datasource-properties=DatabaseName:add(value=<em class="replaceable">DATABASE_NAME</em>)</pre></li></ol></li><li class="step"><div class="para">
								Enable the datasource:
							</div><pre class="screen">xa-data-source enable --name=<em class="replaceable">XA_DATASOURCE_NAME</em></pre></li></ol></li>
				 <li class="step"><p class="title"><strong>Management Console</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
							</div></li><li class="step"><p class="title"><strong>Navigate to the <span class="guilabel"><strong>Datasources</strong></span> panel in the Management Console</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the console.
									</div></li><li class="step"><div class="para">
										For Domain mode only, select a profile from the drop-down box at the top left.
									</div></li><li class="step"><div class="para">
										Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left of the console, then expand the <span class="guimenu"><strong>Connector</strong></span> menu.
									</div></li><li class="step"><div class="para">
										Select <span class="guimenuitem"><strong>Datasources</strong></span>.
									</div></li></ol></li><li class="step"><div class="para">
								Select the <span class="guilabel"><strong>XA Datasource</strong></span> tab.
							</div></li><li class="step"><p class="title"><strong>Create a new XA datasource</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Click <span class="guibutton"><strong>Add</strong></span>.
									</div></li><li class="step"><div class="para">
										Enter the new XA datasource attributes in the <span class="guilabel"><strong>Create XA Datasource</strong></span> wizard and click <span class="guibutton"><strong>Next</strong></span>.
									</div></li><li class="step"><div class="para">
										Enter the JDBC driver details in the <span class="guilabel"><strong>Create XA Datasource</strong></span> wizard and click <span class="guibutton"><strong>Next</strong></span>.
									</div></li><li class="step"><div class="para">
										Enter the XA properties and click <span class="guibutton"><strong>Next</strong></span>.
									</div></li><li class="step"><div class="para">
										Enter the connection settings in the <span class="guilabel"><strong>Create XA Datasource</strong></span> wizard.
									</div></li><li class="step"><div class="para">
										Click the <span class="guibutton"><strong>Test Connection</strong></span> button to test the connection to the XA datasource and verify the settings are correct.
									</div></li><li class="step"><div class="para">
										Click <span class="guibutton"><strong>Done</strong></span> to finish
									</div></li></ol></li></ol></li>

			</ul></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The XA datasource has been added to the server. It is now visible in either the <code class="filename">standalone.xml</code> or <code class="filename">domain.xml</code> file, as well as the management interfaces.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist see-also-list"><p class="title"><strong>See Also:</strong></p><ul class="see-also-list see-also-list"><li class="listitem"><div class="para">
				<a class="xref" href="chap-Datasource_Management.html#Modify_an_XA_Datasource_with_the_Management_Interfaces">Section 6.4.2, “Modify an XA Datasource with the Management Interfaces”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Datasource_Management.html#Remove_an_XA_Datasource_with_the_Management_Interfaces1">Section 6.4.3, “Remove an XA Datasource with the Management Interfaces”</a>
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5604-746396+%5BLatest%5D&amp;comment=Title%3A+Create+an+XA+Datasource+with+the+Management+Interfaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5604-746396+09+Mar+2015+18%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Modify_an_XA_Datasource_with_the_Management_Interfaces">
      ⁠</a>6.4.2. Modify an XA Datasource with the Management Interfaces</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to modify an XA datasource, using either the Management Console or the Management CLI.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_EAP_6">Section 2.2.1, “Start JBoss EAP 6”</a>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978450988384">
      ⁠</a><p class="title"><strong>Procedure 6.10. Modify an XA Datasource, Using Either the Management CLI or the Management Console</strong></p><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Management CLI</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>.
							</div></li><li class="step"><p class="title"><strong>Configure XA datasource attributes</strong></p><div class="para">
								Use the <code class="literal">write-attribute</code> command to configure a datasource attribute:
							</div><pre class="screen">/subsystem=datasources/xa-data-source=<em class="replaceable">XA_DATASOURCE_NAME</em>:write-attribute(name=<em class="replaceable">ATTRIBUTE_NAME</em>,value=<em class="replaceable">ATTRIBUTE_VALUE</em>)</pre></li><li class="step"><p class="title"><strong>Configure XA datasource properties</strong></p><div class="para">
								Run the following command to configure an XA datasource subresource:
							</div><pre class="screen">/subsystem=datasources/xa-data-source=<em class="replaceable">DATASOURCE_NAME</em>/xa-datasource-properties=<em class="replaceable">PROPERTY_NAME</em>:add(value=<em class="replaceable">PROPERTY_VALUE</em>)</pre></li><li class="step optional"><div class="para">
								Reload the server to confirm the changes:
							</div><pre class="screen">reload</pre></li></ol></li>
				 <li class="step"><p class="title"><strong>Management Console</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
							</div></li><li class="step"><p class="title"><strong>Navigate to the <span class="guilabel"><strong>Datasources</strong></span> panel in the Management Console</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the console.
									</div></li><li class="step"><div class="para">
										For Domain Mode only, select a profile from the drop-down box at top left.
									</div></li><li class="step"><div class="para">
										Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left of the console, then expand the <span class="guimenu"><strong>Connector </strong></span> menu.
									</div></li><li class="step"><div class="para">
										Select <span class="guimenuitem"><strong>Datasources</strong></span>.
									</div></li></ol></li><li class="step"><div class="para">
								Select the <span class="guilabel"><strong>XA Datasource</strong></span> tab.
							</div></li><li class="step"><p class="title"><strong>Edit the datasource</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the relevant XA datasource from the <span class="guilabel"><strong>Available XA Datasources</strong></span> list. The XA datasource attributes are displayed in the <span class="guilabel"><strong>Attributes</strong></span> panel below it.
									</div></li><li class="step"><div class="para">
										Select the <span class="guibutton"><strong>Edit</strong></span> button to edit the datasource attributes.
									</div></li><li class="step"><div class="para">
										Edit the XA datasource attributes and select the <span class="guibutton"><strong>Save</strong></span> button when done.
									</div></li></ol></li></ol></li>

			</ul></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The XA datasource has been configured. The changes are now visible in either the <code class="filename">standalone.xml</code> or <code class="filename">domain.xml</code> file, as well as the management interfaces.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				To create a new datasource, refer here: <a class="xref" href="chap-Datasource_Management.html#Create_an_XA_Datasource_with_the_Management_Interfaces">Section 6.4.1, “Create an XA Datasource with the Management Interfaces”</a>.
			</div></li><li class="listitem"><div class="para">
				To remove the datasource, refer here: <a class="xref" href="chap-Datasource_Management.html#Remove_an_XA_Datasource_with_the_Management_Interfaces1">Section 6.4.3, “Remove an XA Datasource with the Management Interfaces”</a>.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5605-764351+%5BLatest%5D&amp;comment=Title%3A+Modify+an+XA+Datasource+with+the+Management+Interfaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5605-764351+09+Jul+2015+04%3A58+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Remove_an_XA_Datasource_with_the_Management_Interfaces1">
      ⁠</a>6.4.3. Remove an XA Datasource with the Management Interfaces</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to remove an XA datasource from JBoss EAP 6, using either the Management Console or the Management CLI.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_EAP_6">Section 2.2.1, “Start JBoss EAP 6”</a>.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978503520048">
      ⁠</a><p class="title"><strong>Procedure 6.11. Remove an XA Datasource Using Either the Management CLI or the Management Console</strong></p><ul><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Management CLI</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Launch_the_Management_CLI1">Section 3.4.2, “Launch the Management CLI”</a>.
							</div></li><li class="step"><div class="para">
								Run the following command to remove an XA datasource:
							</div><pre class="screen">xa-data-source remove --name=<em class="replaceable">XA_DATASOURCE_NAME</em></pre></li></ol></li>
				 <li class="step"><p class="title"><strong>Management Console</strong></p><ol class="substeps a"><li class="step"><div class="para">
								<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
							</div></li><li class="step"><p class="title"><strong>Navigate to the <span class="guilabel"><strong>Datasources</strong></span> panel in the Management Console</strong></p><ol class="substeps i"><li class="step"><div class="para">
										Select the <span class="guilabel"><strong>Configuration</strong></span> tab from the top of the console.
									</div></li><li class="step"><div class="para">
										For Domain mode only, select a profile from the drop-down box in the top left.
									</div></li><li class="step"><div class="para">
										Expand the <span class="guimenu"><strong>Subsystems</strong></span> menu on the left of the console, then expand the <span class="guimenu"><strong>Connector</strong></span> menu.
									</div></li><li class="step"><div class="para">
										Select <span class="guimenuitem"><strong>Datasources</strong></span>.
									</div></li></ol></li><li class="step"><div class="para">
								Select the <span class="guilabel"><strong>XA Datasource</strong></span> tab.
							</div></li><li class="step"><div class="para">
								Select the registered XA datasource to be deleted, and click <span class="guibutton"><strong>Remove</strong></span> to permanently delete the XA datasource.
							</div></li></ol></li>

			</ul></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The XA datasource has been removed from the server.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				To add a new XA datasource, refer here: <a class="xref" href="chap-Datasource_Management.html#Create_an_XA_Datasource_with_the_Management_Interfaces">Section 6.4.1, “Create an XA Datasource with the Management Interfaces”</a>.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5606-632093+%5BLatest%5D&amp;comment=Title%3A+Remove+an+XA+Datasource+with+the+Management+Interfaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5606-632093+16+Apr+2014+19%3A34+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-XA_Recovery">
      ⁠</a>6.4.4. XA Recovery</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_XA_Recovery_Modules">
      ⁠</a>6.4.4.1. About XA Recovery Modules</h3></div></div></div><div class="para">
		Each XA resource needs a recovery module associated with its configuration. The recovery module must extend class <code class="code">com.arjuna.ats.jta.recovery.XAResourceRecovery</code>.
	</div><div class="para">
		JBoss EAP 6 provides recovery modules for JDBC and JMS XA resources. For these types of resources, recovery modules are automatically registered. If you need to use a custom module, you can register it in your datasource.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+9105-591864+%5BLatest%5D&amp;comment=Title%3A+About+XA+Recovery+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9105-591864+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Configure_XA_Recovery_Modules1">
      ⁠</a>6.4.4.2. Configure XA Recovery Modules</h3></div></div></div><div class="para">
		For most JDBC and JMS resources, the recovery module is automatically associated with the resource. In these cases, you only need to configure the options that allow the recovery module to connect to your resource to perform recovery.
	</div><div class="para">
		For custom resources which are not JDBC or JMS, contact Red Hat Global Support Services for information on supported configurations.
	</div><div class="para">
		Each of these configuration attributes can be set either during datasource creation, or afterward. You can set them using either the web-based Management Console or the command-line Management CLI. Refer to <a class="xref" href="chap-Datasource_Management.html#Create_an_XA_Datasource_with_the_Management_Interfaces">Section 6.4.1, “Create an XA Datasource with the Management Interfaces”</a> and <a class="xref" href="chap-Datasource_Management.html#Modify_an_XA_Datasource_with_the_Management_Interfaces">Section 6.4.2, “Modify an XA Datasource with the Management Interfaces”</a> for general information on configuring XA datasources.
	</div><div class="para">
		Refer to the following tables for general datasource configuration attributes, and for information about configuration details relating to specific database vendors.
	</div><div class="table"><a id="GeneralConfigAttributes">
      ⁠</a><p class="title"><strong>Table 6.2. General Configuration Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="General Configuration Attributes"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="67%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> recovery-username </td><td style="text-align: left"> <div class="para">
						The username the recovery module should use to connect to the resource for recovery.
					</div>
					 </td></tr><tr><td style="text-align: left"> recovery-password </td><td style="text-align: left"> <div class="para">
						The password the recovery module should use to connect to the resource for recovery.
					</div>
					 </td></tr><tr><td style="text-align: left"> recovery-security-domain </td><td style="text-align: left"> <div class="para">
						The security domain the recovery module should use to connect to the resource for recovery.
					</div>
					 </td></tr><tr><td style="text-align: left"> recovery-plugin-class-name </td><td style="text-align: left"> <div class="para">
						If you need to use a custom recovery module, set this attribute to the fully-qualified class name of the module. The module should extend class <code class="code">com.arjuna.ats.jta.recovery.XAResourceRecovery</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> recovery-plugin-properties </td><td style="text-align: left"> <div class="para">
						If you use a custom recovery module which requires properties to be set, set this attribute to the list of comma-separated <em class="replaceable">key=value</em> pairs for the properties.
					</div>
					 </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The names used in the <a class="xref" href="chap-Datasource_Management.html#GeneralConfigAttributes">Table 6.2, “General Configuration Attributes”</a> are parameters which are used when the datasource is configured via CLI. They may differ from names used in XML configuration file.
		</div></div></div><div class="variablelist"><p class="title"><strong>Vendor-Specific Configuration Information</strong></p><div class="para">
			This section describes specific configurations which are required to be done for particular database to cooperate in XA transactions managed by the JBoss EAP transaction manager. For more detailed information, refer to documentation for a particular database.
		</div><dl class="variablelist"><dt><span class="term">Oracle</span></dt><dd><div class="para">
					If the Oracle datasource is configured incorrectly, you may see errors like the following in your log output:
				</div><div class="example"><a id="idm139978441228496">
      ⁠</a><p class="title"><strong>Example 6.11. Incorrect configuration error</strong></p><div class="example-contents"><pre class="screen">
WARN  [com.arjuna.ats.jta.logging.loggerI18N] [com.arjuna.ats.internal.jta.recovery.xarecovery1] Local XARecoveryModule.xaRecovery  got XA exception javax.transaction.xa.XAException, XAException.XAER_RMERR
</pre></div></div><div class="para">
					To resolve this error, ensure that the Oracle user configured in <code class="code"><em class="replaceable">recovery-username</em></code> has access to the tables needed for recovery. The following SQL statement shows the correct grants for Oracle 11g or Oracle 10g R2 instances patched for Oracle bug 5945463.
				</div><div class="example"><a id="idm139978439950272">
      ⁠</a><p class="title"><strong>Example 6.12. Grant configuration</strong></p><div class="example-contents"><pre class="programlisting SQL"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">GRANT</span> <span xmlns="" class="perl_Keyword">SELECT</span> <span xmlns="" class="perl_Keyword">ON</span> sys.dba_pending_transactions <span xmlns="" class="perl_Keyword">TO</span> recovery-username;
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">GRANT</span> <span xmlns="" class="perl_Keyword">SELECT</span> <span xmlns="" class="perl_Keyword">ON</span> sys.pending_trans$ <span xmlns="" class="perl_Keyword">TO</span> recovery-username;
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">GRANT</span> <span xmlns="" class="perl_Keyword">SELECT</span> <span xmlns="" class="perl_Keyword">ON</span> sys.dba_2pc_pending <span xmlns="" class="perl_Keyword">TO</span> recovery-username;
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">GRANT</span> <span xmlns="" class="perl_Keyword">EXECUTE</span> <span xmlns="" class="perl_Keyword">ON</span> sys.dbms_xa <span xmlns="" class="perl_Keyword">TO</span> recovery-username;
</pre></div></div><div class="para">
					If you use an Oracle 11 version prior to 11g, change the final <code class="code">EXECUTE</code> statement to the following:
				</div><pre class="programlisting SQL"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">GRANT</span> <span xmlns="" class="perl_Keyword">EXECUTE</span> <span xmlns="" class="perl_Keyword">ON</span> sys.dbms_system <span xmlns="" class="perl_Keyword">TO</span> recovery-username;
</pre></dd><dt><span class="term">PostgreSQL and Postgres Plus Advanced Server</span></dt><dd><div class="para">
					For PostgreSQL to be able to handle XA transaction, change the configuration parameter <em class="parameter"><code>max_prepared_transactions</code></em> to an value higher than 0.
				</div></dd><dt><span class="term">MySQL</span></dt><dd><div class="para">
					No special configuration is required. For more information, refer to MySQL documentation.
				</div></dd><dt><span class="term">IBM DB2</span></dt><dd><div class="para">
					No special configuration is required. For more information, refer to IBM DB2 documentation.
				</div></dd><dt><span class="term">Sybase</span></dt><dd><div class="para">
					Sybase expects XA transactions to be enabled on the database. Without correct database configuration, XA transactions will not work. <code class="literal">enable xact coordination</code> enables or disables Adaptive Server transaction coordination services. When this parameter is enabled, Adaptive Server ensures that updates to remote Adaptive Server data commit or roll back with the original transaction. To enable transaction coordination, use: 
<pre class="programlisting">sp_configure 'enable xact coordination', 1</pre>
					 .
				</div></dd><dt><span class="term">MSSQL</span></dt><dd><div class="para">
					For more information, refer to Microsoft documentation. You can also refer <a href="http://msdn.microsoft.com/en-us/library/aa342335.aspx">http://msdn.microsoft.com/en-us/library/aa342335.aspx</a> as a starting point.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Vendor-specific issues and their consequences</strong></p><div class="para">
			This section describes the currently known database specific issues connected with handling XA transactions. These issues refers to database versions and jdbc drivers which are currently supported by particular EAP version.
		</div><dl class="variablelist"><dt><span class="term">Oracle</span></dt><dd><div class="para">
					There are no known issues related to database.
				</div></dd><dt><span class="term">PostgreSQL</span></dt><dd><div class="para">
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								Jdbc driver returns <span class="errorcode">XAER_RMERR</span> when an error occurs during the call of commit method protocol. Database returns this error code and leaves the transaction in <code class="literal">in-doubt</code> state on the database side. The correct return code should be <span class="errorcode">XAER_RMFAIL</span> or <span class="errorcode">XAER_RETRY</span>. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/236">https://github.com/pgjdbc/pgjdbc/issues/236</a>. This causes the transaction to be left in the <code class="literal">Heuristic</code> state on the EAP side and holding locks in database which requires user intervention.
							</div></li><li class="listitem"><div class="para">
								The incorrect error code returned by the jdbc driver can cause data inconsistency in some cases. For more information, refer to <a href="https://developer.jboss.org/thread/251537">https://developer.jboss.org/thread/251537</a>, <a href="https://github.com/pgjdbc/pgjdbc/issues/236">https://github.com/pgjdbc/pgjdbc/issues/236</a>
							</div></li></ul></div>

				</div></dd><dt><span class="term">Postgres Plus Advanced Server</span></dt><dd><div class="para">
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								Jdbc driver returns <span class="errorcode">XAER_RMERR</span> when an error occurs during the call of commit method protocol. Database returns this error code and leaves the transaction in <code class="literal">in-doubt</code> state on the database side. The correct return code should be <span class="errorcode">XAER_RMFAIL</span> or <span class="errorcode">XAER_RETRY</span>. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/236">https://github.com/pgjdbc/pgjdbc/issues/236</a>. This causes the transaction to be left in the <code class="literal">Heuristic</code> state on the EAP side and holding locks in database which requires user intervention.
							</div></li><li class="listitem"><div class="para">
								The incorrect error code returned by the jdbc driver can cause data inconsistency in some cases. For more information, refer to <a href="https://developer.jboss.org/thread/251537">https://developer.jboss.org/thread/251537</a>
							</div></li><li class="listitem"><div class="para">
								If <code class="code">XAResource.rollback</code> is called for the same XID more than once then <code class="exceptionname">XAException</code> is thrown. Calling rollback against the same XID several times is compliant with JTS spec and no <code class="exceptionname">XAException</code> should be thrown. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/78">https://github.com/pgjdbc/pgjdbc/issues/78</a>.
							</div></li></ul></div>

				</div></dd><dt><span class="term">MySQL</span></dt><dd><div class="para">
					MySQL is not capable of handling XA transactions. If a client is disconnected the MySQL then all the information about such transactions is lost. For more information, see <a href="http://bugs.mysql.com/bug.php?id=12161">http://bugs.mysql.com/bug.php?id=12161</a>.
				</div></dd><dt><span class="term">IBM DB2</span></dt><dd><div class="para">
					There are no known issues related to database.
				</div></dd><dt><span class="term">Sybase</span></dt><dd><div class="para">
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								Jdbc driver returns <span class="errorcode">XAER_RMERR</span> when an error occurs during the call of commit method protocol. Database returns this error code and leaves the transaction in <code class="literal">in-doubt</code> state on the database side. The correct return code should be <span class="errorcode">XAER_RMFAIL</span> or <span class="errorcode">XAER_RETRY</span>. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/236">https://github.com/pgjdbc/pgjdbc/issues/236</a>. This causes the transaction to be left in the <code class="literal">Heuristic</code> state on the EAP side and holding locks in database which requires user intervention.
							</div></li><li class="listitem"><div class="para">
								If <code class="code">XAResource.rollback</code> is called for the same XID more than once then <code class="exceptionname">XAException</code> is thrown. Calling rollback against the same XID several times is compliant with JTS spec and no <code class="exceptionname">XAException</code> should be thrown. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/78">https://github.com/pgjdbc/pgjdbc/issues/78</a>.
							</div></li></ul></div>

				</div></dd><dt><span class="term">MSSQL</span></dt><dd><div class="para">
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								Jdbc driver returns <span class="errorcode">XAER_RMERR</span> when an error occurs during the call of commit method protocol. Database returns this error code and leaves the transaction in <code class="literal">in-doubt</code> state on the database side. The correct return code should be <span class="errorcode">XAER_RMFAIL</span> or <span class="errorcode">XAER_RETRY</span>. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/236">https://github.com/pgjdbc/pgjdbc/issues/236</a>. This causes the transaction to be left in the <code class="literal">Heuristic</code> state on the EAP side and holding locks in database which requires user intervention.
							</div><div class="para">
								This issue was reported on the Microsoft Connect site at <a href="https://connect.microsoft.com/SQLServer/feedback/details/1207381/jdbc-driver-is-not-xa-compliant-in-case-of-connection-failure-error-code-xaer-rmerr-is-returned-instead-of-xaer-rmretry">https://connect.microsoft.com/SQLServer/feedback/details/1207381/jdbc-driver-is-not-xa-compliant-in-case-of-connection-failure-error-code-xaer-rmerr-is-returned-instead-of-xaer-rmretry</a>.
							</div></li><li class="listitem"><div class="para">
								If <code class="code">XAResource.rollback</code> is called for the same XID more than once then <code class="exceptionname">XAException</code> is thrown. Calling rollback against the same XID several times is compliant with JTS spec and no <code class="exceptionname">XAException</code> should be thrown. For more information, see <a href="https://github.com/pgjdbc/pgjdbc/issues/78">https://github.com/pgjdbc/pgjdbc/issues/78</a>.
							</div></li><li class="listitem"><div class="para">
								The call of <code class="code">XAResource.rollback</code> for the same XID causes the following message being logged in server log file. 
<pre class="screen">WARN [com.arjuna.ats.jtax] ...: XAResourceRecord.rollback caused an error from resource ... in transaction ...: java.lang.NullPointerException</pre>

							</div></li></ul></div>

				</div></dd><dt><span class="term">Messaging</span></dt><dd><div class="para">
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>IBM Websphere</strong></p><ul><li class="listitem"><div class="para">
								When JTS is used then second call of rollback against the same XID during the periodic recovery can cause an error to be logged in the log file. Second rollback against the same XID is JTS complaint and can be ignored.
							</div><div class="para">
								When RAR does not know such XID, then <span class="errorcode">XAER_NOTA</span> return code is expected. But IBM Websphere may return an incorrect return code <span class="errorcode">XAER_RMFAIL</span>.
							</div><pre class="screen">The method 'xa_rollback' has failed with errorCode '-7' due to the resource being closed.'</pre></li></ul></div>
					 <div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>ActiveMQ</strong></p><ul><li class="listitem"><div class="para">
								Resource adapter returns <span class="errorcode">XAER_RMERR</span> when an error occurs during the call of commit method protocol, for example network disconnection. Resource adapter returns this error code back to transaction manager and it causes the transaction being left in <code class="literal">in-doubt</code> state on message broker side. This behaviour is against XA specification and the correct return code should be <span class="errorcode">XAER_RMFAIL</span> or <span class="errorcode">XAER_RETRY</span>. The wrong error code can cause data inconsistency in some cases. For more information, refer to <a href="https://developer.jboss.org/thread/251537 ">https://developer.jboss.org/thread/251537 </a>.
							</div><pre class="screen">WARN [com.arjuna.ats.jtax] ...: XAResourceRecord.rollback caused an XA error: ARJUNA016099: Unknown error code:0 from resource ...  in transaction ...: javax.transaction.xa.XAException: Transaction ...  has not been started.</pre></li></ul></div>
					 <div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>TIBCO</strong></p><ul><li class="listitem"><div class="para">
								When JTS is used then second call of rollback against the same XID during the periodic recovery can cause an error to be logged in the log file. Second rollback against the same XID is JTS complaint and can be ignored.
							</div><pre class="screen">WARN [com.arjuna.ats.jtax] ...: XAResourceRecord.rollback caused an XA error: XAException.XAER_RMFAIL from resource ... in transaction ...: javax.transaction.xa.XAException</pre></li></ul></div>

				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+9106-769449+%5BLatest%5D&amp;comment=Title%3A+Configure+XA+Recovery+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9106-769449+01+Sep+2015+06%3A10+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Datasource_Security">
      ⁠</a>6.5. Datasource Security</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Datasource_Security">
      ⁠</a>6.5.1. About Datasource Security</h2></div></div></div><div class="para">
		Datasource security refers to encrypting or obscuring passwords for datasource connections. These passwords can be stored in plain text in configuration files, however this represents a security risk.
	</div><div class="para">
		The preferred solution for datasource security is the use of either security domains or password vaults. Examples of each are included below. For more information, refer to the <em class="citetitle">Security Architecture</em> and other JBoss EAP security documentation.
	</div><div class="example"><a id="idm139978528096960">
      ⁠</a><p class="title"><strong>Example 6.13. Security Domain Example</strong></p><div class="example-contents"><pre class="programlisting"> &lt;security-domain name="DsRealm" cache-type="default"&gt;  
  &lt;authentication&gt;  
    &lt;login-module code="ConfiguredIdentity" flag="required"&gt;  
      &lt;module-option name="userName" value="sa"/&gt;  
      &lt;module-option name="principal" value="sa"/&gt;  
      &lt;module-option name="password" value="sa"/&gt;  
    &lt;/login-module&gt;  
  &lt;/authentication&gt;  
&lt;/security-domain&gt;</pre><div class="para">
			The DsRealm domain is referenced by a datasource like so:
		</div><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/datasources/securityDs"
    pool-name="securityDs"&gt;
    &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
      &lt;driver&gt;h2&lt;/driver&gt;
      &lt;new-connection-sql&gt;select current_user()&lt;/new-connection-sql&gt;
      &lt;security&gt;
        &lt;security-domain&gt;DsRealm&lt;/security-domain&gt;
      &lt;/security&gt;
    &lt;/datasource&gt;
&lt;/datasources&gt;</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			If a security domain will be used with multiple datasources, then caching should be disabled on the security domain. This can be accomplished by setting the value of the <code class="literal">cache-type</code> attribute to <code class="literal">none</code> or by removing the attribute altogether. However, if caching is desired, then a separate security domain should be used for each datasource.
		</div></div></div><div class="example"><a id="idm139978536319840">
      ⁠</a><p class="title"><strong>Example 6.14. Password Vault Example</strong></p><div class="example-contents"><pre class="programlisting">
&lt;security&gt;
  &lt;user-name&gt;admin&lt;/user-name&gt;
  &lt;password&gt;${VAULT::ds_ExampleDS::password::N2NhZDYzOTMtNWE0OS00ZGQ0LWE4MmEtMWNlMDMyNDdmNmI2TElORV9CUkVBS3ZhdWx0}&lt;/password&gt;
&lt;/security&gt;
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+9096-765985+%5BLatest%5D&amp;comment=Title%3A+About+Datasource+Security%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=9096-765985+24+Jul+2015+16%3A58+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Database_Connection_Validation">
      ⁠</a>6.6. Database Connection Validation</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_Database_Connection_Validation_Settings">
      ⁠</a>6.6.1. Configure Database Connection Validation Settings</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			Database maintenance, network problems, or other outage events may cause JBoss EAP 6 to lose the connection to the database. You enable database connection validation using the <code class="literal">&lt;validation&gt;</code> element within the <code class="literal">&lt;datasource&gt;</code> section of the server configuration file. Follow the steps below to configure the datasource settings to enable database connection validation in JBoss EAP 6.
		</div><div class="para">

	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978440821824">
      ⁠</a><p class="title"><strong>Procedure 6.12. Configure Database Connection Validation Settings</strong></p><ol class="1"><li class="step"><p class="title"><strong>Choose a Validation Method</strong></p><div class="para">
				Select one of the following validation methods.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>&lt;validate-on-match&gt;true&lt;/validate-on-match&gt;</strong></p><div class="para">
						When the <code class="literal">&lt;validate-on-match&gt;</code> option is set to <code class="literal">true</code>, the database connection is validated every time it is checked out from the connection pool using the validation mechanism specified in the next step.
					</div><div class="para">
						If a connection is not valid, a warning is written to the log and it retrieves the next connection in the pool. This process continues until a valid connection is found. If you prefer not to cycle through every connection in the pool, you can use the <code class="literal">&lt;use-fast-fail&gt;</code> option. If a valid connection is not found in the pool, a new connection is created. If the connection creation fails, an exception is returned to the requesting application.
					</div><div class="para">
						This setting results in the quickest recovery but creates the highest load on the database. However, this is the safest selection if the minimal performance hit is not a concern.
					</div></li>
				 <li class="step"><p class="title"><strong>&lt;background-validation&gt;true&lt;/background-validation&gt;</strong></p><div class="para">
						When the <code class="literal">&lt;background-validation&gt;</code> option is set to <code class="literal">true</code>, it is used in combination with the <code class="literal">&lt;background-validation-millis&gt;</code> value to determine how often background validation runs. The default value for the <code class="literal">&lt;background-validation-millis&gt;</code> parameter is 0 milliseconds, meaning it is disabled by default. This value should not be set to the same value as your <code class="literal">&lt;idle-timeout-minutes&gt;</code> setting.
					</div><div class="para">
						It is a balancing act to determine the optimum <code class="literal">&lt;background-validation-millis&gt;</code> value for a particular system. The lower the value, the more frequently the pool is validated and the sooner invalid connections are removed from the pool. However, lower values take more database resources. Higher values result in less frequent connection validation checks and use less database resources, but dead connections are undetected for longer periods of time.
					</div></li>

			</ul><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					If the <code class="literal">&lt;validate-on-match&gt;</code> option is set to <code class="literal">true</code>, the <code class="literal">&lt;background-validation&gt;</code> option should be set to <code class="literal">false</code>. The reverse is also true. If the <code class="literal">&lt;background-validation&gt;</code> option is set to <code class="literal">true</code>, the <code class="literal">&lt;validate-on-match&gt;</code> option should be set to <code class="literal">false</code>.
				</div></div></div></li><li class="step"><p class="title"><strong>Choose a Validation Mechanism</strong></p><div class="para">
				Select one of the following validation mechanisms.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Specify a &lt;valid-connection-checker&gt; Class Name</strong></p><div class="para">
						This is the preferred mechanism as it optimized for the particular RDBMS in use. JBoss EAP 6 provides the following connection checkers: 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLReplicationValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.novendor.JDBC4ValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.novendor.NullValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker
								</div></li><li class="listitem"><div class="para">
									org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker
								</div></li></ul></div>

					</div></li>
				 <li class="step"><p class="title"><strong>Specify SQL for &lt;check-valid-connection-sql&gt;</strong></p><div class="para">
						You provide the SQL statement used to validate the connection.
					</div><div class="para">
						The following is an example of how you might specify a SQL statement to validate a connection for Oracle: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;check-valid-connection-sql&gt;</span>select 1 from dual<span xmlns="" class="perl_Keyword">&lt;/check-valid-connection-sql&gt;</span></pre>
						 For MySQL or PostgreSQL, you might specify the following SQL statement: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;check-valid-connection-sql&gt;</span>select 1<span xmlns="" class="perl_Keyword">&lt;/check-valid-connection-sql&gt;</span></pre>

					</div></li>

			</ul></li><li class="step"><p class="title"><strong>Set the &lt;exception-sorter&gt; Class Name</strong></p><div class="para">
				When an exception is marked as fatal, the connection is closed immediately, even if the connection is participating in a transaction. Use the exception sorter class option to properly detect and clean up after fatal connection exceptions. JBoss EAP 6 provides the following exception sorters: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.informix.InformixExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.novendor.NullExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter
						</div></li></ul></div>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+41672-769442+%5BLatest%5D&amp;comment=Title%3A+Configure+Database+Connection+Validation+Settings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=41672-769442+01+Sep+2015+05%3A46+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Datasource_Configuration">
      ⁠</a>6.7. Datasource Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Datasource_Parameters1">
      ⁠</a>6.7.1. Datasource Parameters</h2></div></div></div><div class="table"><a id="idm139978447223712">
      ⁠</a><p class="title"><strong>Table 6.3. Datasource parameters common to non-XA and XA datasources</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Datasource parameters common to non-XA and XA datasources"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> jndi-name </td><td style="text-align: left"> The unique JNDI name for the datasource. </td></tr><tr><td style="text-align: left"> pool-name </td><td style="text-align: left"> The name of the management pool for the datasource. </td></tr><tr><td style="text-align: left"> enabled </td><td style="text-align: left"> Whether or not the datasource is enabled. </td></tr><tr><td style="text-align: left"> use-java-context </td><td style="text-align: left"> <div class="para">
						Whether to bind the datasource to global JNDI.
					</div>
					 </td></tr><tr><td style="text-align: left"> spy </td><td style="text-align: left"> <div class="para">
						Enable <code class="literal">spy</code> functionality on the JDBC layer. This logs all JDBC traffic to the datasource. Note that the logging category <code class="literal">jboss.jdbc.spy</code> must also be set to the log level <code class="literal">DEBUG</code> in the logging subsystem.
					</div>
					 </td></tr><tr><td style="text-align: left"> use-ccm </td><td style="text-align: left"> Enable the cached connection manager. </td></tr><tr><td style="text-align: left"> new-connection-sql </td><td style="text-align: left"> A SQL statement which executes when the connection is added to the connection pool. </td></tr><tr><td style="text-align: left"> transaction-isolation </td><td style="text-align: left"> <div class="para">
						One of the following:
					</div>
					 <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								TRANSACTION_READ_UNCOMMITTED
							</div></li><li class="listitem"><div class="para">
								TRANSACTION_READ_COMMITTED
							</div></li><li class="listitem"><div class="para">
								TRANSACTION_REPEATABLE_READ
							</div></li><li class="listitem"><div class="para">
								TRANSACTION_SERIALIZABLE
							</div></li><li class="listitem"><div class="para">
								TRANSACTION_NONE
							</div></li></ul></div>
					 </td></tr><tr><td style="text-align: left"> url-selector-strategy-class-name </td><td style="text-align: left"> A class that implements interface <code class="code">org.jboss.jca.adapters.jdbc.URLSelectorStrategy</code>. </td></tr><tr><td style="text-align: left"> security </td><td style="text-align: left"> <div class="para">
						Contains child elements which are security settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-security">Table 6.8, “Security parameters”</a>.
					</div>
					 </td></tr><tr><td style="text-align: left"> validation </td><td style="text-align: left"> <div class="para">
						Contains child elements which are validation settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-validation">Table 6.9, “Validation parameters”</a>.
					</div>
					 </td></tr><tr><td style="text-align: left"> timeout </td><td style="text-align: left"> <div class="para">
						Contains child elements which are timeout settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-timeout">Table 6.10, “Timeout parameters”</a>.
					</div>
					 </td></tr><tr><td style="text-align: left"> statement </td><td style="text-align: left"> <div class="para">
						Contains child elements which are statement settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-statement">Table 6.11, “Statement parameters”</a>.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="idm139978450912448">
      ⁠</a><p class="title"><strong>Table 6.4. Non-XA datasource parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Non-XA datasource parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> jta </td><td style="text-align: left"> Enable JTA integration for non-XA datasources. Does not apply to XA datasources. </td></tr><tr><td style="text-align: left"> connection-url </td><td style="text-align: left"> The JDBC driver connection URL. </td></tr><tr><td style="text-align: left"> driver-class </td><td style="text-align: left"> The fully-qualified name of the JDBC driver class. </td></tr><tr><td style="text-align: left"> connection-property </td><td style="text-align: left"> <div class="para">
						Arbitrary connection properties passed to the method <code class="code">Driver.connect(url,props)</code>. Each connection-property specifies a string name/value pair. The property name comes from the name, and the value comes from the element content.
					</div>
					 </td></tr><tr><td style="text-align: left"> pool </td><td style="text-align: left"> <div class="para">
						Contains child elements which are pooling settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-pooling">Table 6.6, “Pool parameters common to non-XA and XA datasources”</a>.
					</div>
					 </td></tr><tr><td style="text-align: left"> url-delimiter </td><td style="text-align: left"> <div class="para">
						The delimiter for URLs in a connection-url for High Availability (HA) clustered databases.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="idm139978534833776">
      ⁠</a><p class="title"><strong>Table 6.5. XA datasource parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="XA datasource parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> xa-datasource-property </td><td style="text-align: left"> <div class="para">
						A property to assign to implementation class <code class="classname">XADataSource</code>. Specified by <em class="replaceable">name</em>=<em class="replaceable">value</em>. If a setter method exists, in the format <code class="code">set<em class="replaceable">Name</em></code>, the property is set by calling a setter method in the format of <code class="code">set<em class="replaceable">Name</em>(<em class="replaceable">value</em>)</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> xa-datasource-class </td><td style="text-align: left"> <div class="para">
						The fully-qualified name of the implementation class <code class="code">javax.sql.XADataSource</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> driver </td><td style="text-align: left"> <div class="para">
						A unique reference to the class loader module which contains the JDBC driver. The accepted format is <em class="replaceable">driverName</em>#<em class="replaceable">majorVersion</em>.<em class="replaceable">minorVersion</em>.
					</div>
					 </td></tr><tr><td style="text-align: left"> xa-pool </td><td style="text-align: left"> <div class="para">
						Contains child elements which are pooling settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-pooling">Table 6.6, “Pool parameters common to non-XA and XA datasources”</a> and <a class="xref" href="chap-Datasource_Management.html#Topic2772-xa-pooling">Table 6.7, “XA pool parameters”</a>.
					</div>
					 </td></tr><tr><td style="text-align: left"> recovery </td><td style="text-align: left"> <div class="para">
						Contains child elements which are recovery settings. See <a class="xref" href="chap-Datasource_Management.html#Topic2772-recovery">Table 6.12, “Recovery parameters”</a>.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-pooling">
      ⁠</a><p class="title"><strong>Table 6.6. Pool parameters common to non-XA and XA datasources</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Pool parameters common to non-XA and XA datasources"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> min-pool-size </td><td style="text-align: left"> The minimum number of connections a pool holds. </td></tr><tr><td style="text-align: left"> max-pool-size </td><td style="text-align: left"> The maximum number of connections a pool can hold. </td></tr><tr><td style="text-align: left"> prefill </td><td style="text-align: left"> Whether to try to prefill the connection pool. The default is <code class="literal">false</code>. </td></tr><tr><td style="text-align: left"> use-strict-min </td><td style="text-align: left"> Whether the idle connection scan should strictly stop marking for closure of any further connections, once the <code class="literal">min-pool-size</code> has been reached. The default value is <code class="literal">false</code>. </td></tr><tr><td style="text-align: left"> flush-strategy </td><td style="text-align: left"> <div class="para">
						Whether the pool is flushed in the case of an error. Valid values are:
					</div>
					 <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								FailingConnectionOnly
							</div></li><li class="listitem"><div class="para">
								IdleConnections
							</div></li><li class="listitem"><div class="para">
								EntirePool
							</div></li></ul></div>
					 <div class="para">
						The default is <code class="literal">FailingConnectionOnly</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> allow-multiple-users </td><td style="text-align: left"> Specifies if multiple users will access the datasource through the getConnection(user, password) method, and whether the internal pool type accounts for this behavior. </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-xa-pooling">
      ⁠</a><p class="title"><strong>Table 6.7. XA pool parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="XA pool parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> is-same-rm-override </td><td style="text-align: left"> Whether the <code class="classname">javax.transaction.xa.XAResource.isSameRM(XAResource)</code> class returns <code class="literal">true</code> or <code class="literal">false</code>. </td></tr><tr><td style="text-align: left"> interleaving </td><td style="text-align: left"> Whether to enable interleaving for XA connection factories. </td></tr><tr><td style="text-align: left"> no-tx-separate-pools </td><td style="text-align: left"> <div class="para">
						Whether to create separate sub-pools for each context. This is required for Oracle datasources, which do not allow XA connections to be used both inside and outside of a JTA transaction.
					</div>
					 <div class="para">
						Using this option will cause your total pool size to be twice <code class="literal">max-pool-size</code>, because two actual pools will be created.
					</div>
					 </td></tr><tr><td style="text-align: left"> pad-xid </td><td style="text-align: left"> Whether to pad the Xid. </td></tr><tr><td style="text-align: left"> wrap-xa-resource </td><td style="text-align: left"> <div class="para">
						Whether to wrap the XAResource in an <code class="code">org.jboss.tm.XAResourceWrapper</code> instance.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-security">
      ⁠</a><p class="title"><strong>Table 6.8. Security parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Security parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> user-name </td><td style="text-align: left"> The username to use to create a new connection. </td></tr><tr><td style="text-align: left"> password </td><td style="text-align: left"> The password to use to create a new connection. </td></tr><tr><td style="text-align: left"> security-domain </td><td style="text-align: left"> Contains the name of a JAAS security-manager which handles authentication. This name correlates to the application-policy/name attribute of the JAAS login configuration. </td></tr><tr><td style="text-align: left"> reauth-plugin </td><td style="text-align: left"> Defines a reauthentication plug-in to use to reauthenticate physical connections. </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-validation">
      ⁠</a><p class="title"><strong>Table 6.9. Validation parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Validation parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> valid-connection-checker </td><td style="text-align: left"> <div class="para">
						An implementation of interface <code class="code">org.jboss.jca.adaptors.jdbc.ValidConnectionChecker</code> which provides a <code class="code">SQLException.isValidConnection(Connection e)</code> method to validate a connection. An exception means the connection is destroyed. This overrides the parameter <code class="literal">check-valid-connection-sql</code> if it is present.
					</div>
					 </td></tr><tr><td style="text-align: left"> check-valid-connection-sql </td><td style="text-align: left"> An SQL statement to check validity of a pool connection. This may be called when a managed connection is taken from a pool for use. </td></tr><tr><td style="text-align: left"> validate-on-match </td><td style="text-align: left"> <div class="para">
						Indicates whether connection level validation is performed when a connection factory attempts to match a managed connection for a given set.
					</div>
					 <div class="para">
						Specifying "true" for <code class="literal">validate-on-match</code> is typically not done in conjunction with specifying "true" for <code class="literal">background-validation</code>. <code class="literal">Validate-on-match</code> is needed when a client must have a connection validated prior to use. This parameter is false by default.
					</div>
					 </td></tr><tr><td style="text-align: left"> background-validation </td><td style="text-align: left"> <div class="para">
						Specifies that connections are validated on a background thread. Background validation is a performance optimization when not used with <code class="literal">validate-on-match</code>. If <code class="literal">validate-on-match</code> is true, using <code class="literal">background-validation</code> could result in redundant checks. Background validation does leave open the opportunity for a bad connection to be given to the client for use (a connection goes bad between the time of the validation scan and prior to being handed to the client), so the client application must account for this possibility.
					</div>
					 </td></tr><tr><td style="text-align: left"> background-validation-millis </td><td style="text-align: left"> The amount of time, in milliseconds, that background validation runs. </td></tr><tr><td style="text-align: left"> use-fast-fail </td><td style="text-align: left"> <div class="para">
						If true, fail a connection allocation on the first attempt, if the connection is invalid. Defaults to <code class="literal">false</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> stale-connection-checker </td><td style="text-align: left"> <div class="para">
						An instance of <code class="code">org.jboss.jca.adapters.jdbc.StaleConnectionChecker</code> which provides a Boolean <code class="code">isStaleConnection(SQLException e)</code> method. If this method returns <code class="literal">true</code>, the exception is wrapped in an <code class="code">org.jboss.jca.adapters.jdbc.StaleConnectionException</code>, which is a subclass of <code class="code">SQLException</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> exception-sorter </td><td style="text-align: left"> <div class="para">
						An instance of <code class="code">org.jboss.jca.adapters.jdbc.ExceptionSorter</code> which provides a Boolean <code class="code">isExceptionFatal(SQLException e)</code> method. This method validates whether an exception is broadcast to all instances of <code class="code">javax.resource.spi.ConnectionEventListener</code> as a <code class="literal">connectionErrorOccurred</code> message.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-timeout">
      ⁠</a><p class="title"><strong>Table 6.10. Timeout parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Timeout parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> use-try-lock </td><td style="text-align: left"> Uses <code class="code">tryLock()</code> instead of <code class="code">lock()</code>. This attempts to obtain the lock for the configured number of seconds, before timing out, rather than failing immediately if the lock is unavailable. Defaults to <code class="literal">60</code> seconds. As an example, to set a timeout of 5 minutes, set <code class="code">&lt;use-try-lock&gt;</code>300<code class="code">&lt;/use-try-lock&gt;</code>. </td></tr><tr><td style="text-align: left"> blocking-timeout-millis </td><td style="text-align: left"> The maximum time, in milliseconds, to block while waiting for a connection. After this time is exceeded, an exception is thrown. This blocks only while waiting for a permit for a connection, and does not throw an exception if creating a new connection takes a long time. Defaults to 30000, which is 30 seconds. </td></tr><tr><td style="text-align: left"> idle-timeout-minutes </td><td style="text-align: left"> <div class="para">
						The maximum time, in minutes, before an idle connection is closed. If not specified, the default is <code class="literal">30</code> minutes. The actual maximum time depends upon the idleRemover scan time, which is half of the smallest <code class="literal">idle-timeout-minutes</code> of any pool.
					</div>
					 </td></tr><tr><td style="text-align: left"> set-tx-query-timeout </td><td style="text-align: left"> <div class="para">
						Whether to set the query timeout based on the time remaining until transaction timeout. Any configured query timeout is used if no transaction exists. Defaults to <code class="literal">false</code>.
					</div>
					 </td></tr><tr><td style="text-align: left"> query-timeout </td><td style="text-align: left"> Timeout for queries, in seconds. The default is no timeout. </td></tr><tr><td style="text-align: left"> allocation-retry </td><td style="text-align: left"> The number of times to retry allocating a connection before throwing an exception. The default is <code class="literal">0</code>, so an exception is thrown upon the first failure. </td></tr><tr><td style="text-align: left"> allocation-retry-wait-millis </td><td style="text-align: left"> <div class="para">
						How long, in milliseconds, to wait before retrying to allocate a connection. The default is 5000, which is 5 seconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> xa-resource-timeout </td><td style="text-align: left"> <div class="para">
						If non-zero, this value is passed to method <code class="code">XAResource.setTransactionTimeout</code>.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-statement">
      ⁠</a><p class="title"><strong>Table 6.11. Statement parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Statement parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> track-statements </td><td style="text-align: left"> <div class="para">
						Whether to check for unclosed statements when a connection is returned to a pool and a statement is returned to the prepared statement cache. If false, statements are not tracked.
					</div>
					 <div class="itemizedlist"><p class="title"><strong>Valid values</strong></p><ul><li class="listitem"><div class="para">
								<code class="literal">true</code>: statements and result sets are tracked, and a warning is issued if they are not closed.
							</div></li><li class="listitem"><div class="para">
								<code class="literal">false</code>: neither statements or result sets are tracked.
							</div></li><li class="listitem"><div class="para">
								<code class="literal">nowarn</code>: statements are tracked but no warning is issued. This is the default.
							</div></li></ul></div>
					 </td></tr><tr><td style="text-align: left"> prepared-statement-cache-size </td><td style="text-align: left"> The number of prepared statements per connection, in a Least Recently Used (LRU) cache. </td></tr><tr><td style="text-align: left"> share-prepared-statements </td><td style="text-align: left"> <div class="para">
						Whether JBoss EAP should cache, instead of close or terminate, the underlying physical statement when the wrapper supplied to the application is closed by application code. The default is <code class="literal">false</code>.
					</div>
					 </td></tr></tbody></table></div></div><div class="table"><a id="Topic2772-recovery">
      ⁠</a><p class="title"><strong>Table 6.12. Recovery parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Recovery parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> recover-credential </td><td style="text-align: left"> A username/password pair or security domain to use for recovery. </td></tr><tr><td style="text-align: left"> recover-plugin </td><td style="text-align: left"> <div class="para">
						An implementation of the <code class="code">org.jboss.jca.core.spi.recoveryRecoveryPlugin</code> class, to be used for recovery.
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+2772-781124+%5BLatest%5D&amp;comment=Title%3A+Datasource+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2772-781124+27+Jan+2017+11%3A35+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Datasource_Connection_URLs1">
      ⁠</a>6.7.2. Datasource Connection URLs</h2></div></div></div><div class="table"><a id="idm139978472670688">
      ⁠</a><p class="title"><strong>Table 6.13. Datasource Connection URLs</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Datasource Connection URLs"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Datasource </th><th style="text-align: left"> Connection URL </th></tr></thead><tbody><tr><td style="text-align: left"> PostgreSQL </td><td style="text-align: left"> jdbc:postgresql://<em class="replaceable">SERVER_NAME</em>:<em class="replaceable">PORT</em>/<em class="replaceable">DATABASE_NAME</em> </td></tr><tr><td style="text-align: left"> MySQL </td><td style="text-align: left"> jdbc:mysql://<em class="replaceable">SERVER_NAME</em>:<em class="replaceable">PORT</em>/<em class="replaceable">DATABASE_NAME</em> </td></tr><tr><td style="text-align: left"> Oracle </td><td style="text-align: left"> jdbc:oracle:thin:<em class="replaceable">@ORACLE_HOST</em>:<em class="replaceable">PORT</em>:<em class="replaceable">ORACLE_SID</em> </td></tr><tr><td style="text-align: left"> IBM DB2 </td><td style="text-align: left"> jdbc:db2://<em class="replaceable">SERVER_NAME</em>:<em class="replaceable">PORT</em>/<em class="replaceable">DATABASE_NAME</em> </td></tr><tr><td style="text-align: left"> Microsoft SQLServer </td><td style="text-align: left"> jdbc:sqlserver://<em class="replaceable">SERVER_NAME</em>:<em class="replaceable">PORT</em>;DatabaseName=<em class="replaceable">DATABASE_NAME</em> <div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							The jdbc:microsoft:sqlserver://<em class="replaceable">SERVER_NAME</em>:<em class="replaceable">PORT</em>;DatabaseName=<em class="replaceable">DATABASE_NAME</em> template does not work with new database.
						</div></div></div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+6184-741824+%5BLatest%5D&amp;comment=Title%3A+Datasource+Connection+URLs%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6184-741824+06+Feb+2015+01%3A33+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Datasource_Extensions1">
      ⁠</a>6.7.3. Datasource Extensions</h2></div></div></div><div class="para">
		Datasource deployments can use several extensions in the JDBC resource adapter to improve the connection validation, and check whether an exception should reestablish the connection. Those extensions are:
	</div><div class="table"><a id="idm139978451838080">
      ⁠</a><p class="title"><strong>Table 6.14. Datasource Extensions</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Datasource Extensions"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="33%" style="text-align: left" class="c2"/><col width="33%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Datasource Extension </th><th style="text-align: left"> Configuration Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> org.jboss.jca.adapters.jdbc.spi.ExceptionSorter </td><td style="text-align: left"> &lt;exception-sorter&gt; </td><td style="text-align: left"> Checks whether an SQLException is fatal for the connection on which it was thrown </td></tr><tr><td style="text-align: left"> org.jboss.jca.adapters.jdbc.spi.StaleConnectionChecker </td><td style="text-align: left"> &lt;stale-connection-checker&gt; </td><td style="text-align: left"> Wraps stale SQLExceptions in a <code class="methodname"> org.jboss.jca.adapters.jdbc.StaleConnectionException</code> </td></tr><tr><td style="text-align: left"> org.jboss.jca.adapters.jdbc.spi.ValidConnection </td><td style="text-align: left"> &lt;valid-connection-checker&gt; </td><td style="text-align: left"> Checks whether a connection is valid for use by the application </td></tr></tbody></table></div></div><div class="para">
		JBoss EAP 6 also features implementations of these extensions for several supported databases.
	</div><div class="variablelist"><p class="title"><strong>Extension Implementations</strong></p><dl class="variablelist"><dt><span class="term">Generic</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.novendor.NullExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.novendor.NullStaleConnectionChecker
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.novendor.NullValidConnectionChecker
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.novendor.JDBC4ValidConnectionChecker
						</div></li></ul></div></dd><dt><span class="term">PostgreSQL</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker
						</div></li></ul></div></dd><dt><span class="term">MySQL</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLReplicationValidConnectionChecker
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker
						</div></li></ul></div></dd><dt><span class="term">IBM DB2</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.db2.DB2StaleConnectionChecker
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker
						</div></li></ul></div></dd><dt><span class="term">Sybase</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker
						</div></li></ul></div></dd><dt><span class="term">Microsoft SQLServer</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker
						</div></li></ul></div></dd><dt><span class="term">Oracle</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.oracle.OracleStaleConnectionChecker
						</div></li><li class="listitem"><div class="para">
							org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker
						</div></li></ul></div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4643-781536+%5BLatest%5D&amp;comment=Title%3A+Datasource+Extensions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4643-781536+13+Nov+2017+12%3A25+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="View_Datasource_Statistics">
      ⁠</a>6.7.4. View Datasource Statistics</h2></div></div></div><div class="para">
		You can view statistics from defined datasources for both the <code class="literal">jdbc</code> and <code class="literal">pool</code> using appropriately modified versions of the commands below:
	</div><div class="example"><a id="idm139978509437168">
      ⁠</a><p class="title"><strong>Example 6.15. CLI for domain mode:</strong></p><div class="example-contents"><div class="para">
			Change <code class="literal">/host=master/server=server-one</code> and <code class="literal">data-source=ExampleDS</code> according to the environment.
		</div><pre class="programlisting">[domain@localhost:9999 /]  /host=master/server=server-one/subsystem=datasources/data-source=ExampleDS/statistics=pool:read-resource(include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "ActiveCount" =&gt; "0",
        "AvailableCount" =&gt; "20",
        "AverageBlockingTime" =&gt; "0",
        "AverageCreationTime" =&gt; "0",
        "CreatedCount" =&gt; "0",
        "DestroyedCount" =&gt; "0",
        "MaxCreationTime" =&gt; "0",
        "MaxUsedCount" =&gt; "0",
        "MaxWaitTime" =&gt; "0",
        "TimedOut" =&gt; "0",
        "TotalBlockingTime" =&gt; "0",
        "TotalCreationTime" =&gt; "0"
    }
}


</pre></div></div><div class="example"><a id="idm139978509099776">
      ⁠</a><p class="title"><strong>Example 6.16. CLI for standalone mode:</strong></p><div class="example-contents"><div class="para">
			Change <code class="literal">data-source=ExampleDS</code> according to the environment.
		</div><pre class="programlisting">[standalone@localhost:9999 /]  /subsystem=datasources/data-source=ExampleDS/statistics=pool:read-resource(include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "ActiveCount" =&gt; "0",
        "AvailableCount" =&gt; "20",
        "AverageBlockingTime" =&gt; "0",
        "AverageCreationTime" =&gt; "0",
        "CreatedCount" =&gt; "0",
        "DestroyedCount" =&gt; "0",
        "MaxCreationTime" =&gt; "0",
        "MaxUsedCount" =&gt; "0",
        "MaxWaitTime" =&gt; "0",
        "TimedOut" =&gt; "0",
        "TotalBlockingTime" =&gt; "0",
        "TotalCreationTime" =&gt; "0"
    }
}
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Ensure you specify the <em class="parameter"><code>include-runtime=true</code></em> argument, as all statistics are runtime only information and the default is <code class="literal">false</code>.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+13918-760763+%5BLatest%5D&amp;comment=Title%3A+View+Datasource+Statistics%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13918-760763+08+Jun+2015+04%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Datasource_Statistics">
      ⁠</a>6.7.5. Datasource Statistics</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Core Statistics</div>
			The following table contains a list of the supported datasource core statistics:
		</div><div class="table"><a id="table-datasource-core-statistics">
      ⁠</a><p class="title"><strong>Table 6.15. Core Statistics</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Core Statistics"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Name </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">ActiveCount</code> </td><td style="text-align: left"> <div class="para">
						The number of active connections. Each of the connections is either in use by an application or available in the pool
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">AvailableCount</code> </td><td style="text-align: left"> <div class="para">
						The number of available connections in the pool.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">AverageBlockingTime</code> </td><td style="text-align: left"> <div class="para">
						The average time spent blocking on obtaining an exclusive lock on the pool. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">AverageCreationTime</code> </td><td style="text-align: left"> <div class="para">
						The average time spent creating a connection. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">CreatedCount</code> </td><td style="text-align: left"> <div class="para">
						The number of connections created.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">DestroyedCount</code> </td><td style="text-align: left"> <div class="para">
						The number of connections destroyed.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">InUseCount</code> </td><td style="text-align: left"> <div class="para">
						The number of connections currently in use.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxCreationTime</code> </td><td style="text-align: left"> <div class="para">
						The maximum time it took to create a connection. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxUsedCount</code> </td><td style="text-align: left"> <div class="para">
						The maximum number of connections used.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxWaitCount</code> </td><td style="text-align: left"> <div class="para">
						The maximum number of requests waiting for a connection at the same time.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxWaitTime</code> </td><td style="text-align: left"> <div class="para">
						The maximum time spent waiting for an exclusive lock on the pool.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">TimedOut</code> </td><td style="text-align: left"> <div class="para">
						The number of timed out connections.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">TotalBlockingTime</code> </td><td style="text-align: left"> <div class="para">
						The total time spent waiting for an exclusive lock on the pool. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">TotalCreationTime</code> </td><td style="text-align: left"> <div class="para">
						The total time spent creating connections. The value is in milliseconds.
					</div>
					 </td></tr></tbody></table></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">JDBC Statistics</div>
			The following table contains a list of the supported datasource JDBC statistics:
		</div><div class="table"><a id="table-datasource-jdbc-statistics">
      ⁠</a><p class="title"><strong>Table 6.16. JDBC Statistics</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="JDBC Statistics"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Name </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">PreparedStatementCacheAccessCount</code> </td><td style="text-align: left"> <div class="para">
						The number of times that the statement cache was accessed.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">PreparedStatementCacheAddCount</code> </td><td style="text-align: left"> <div class="para">
						The number of statements added to the statement cache.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">PreparedStatementCacheCurrentSize</code> </td><td style="text-align: left"> <div class="para">
						The number of prepared and callable statements currently cached in the statement cache.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">PreparedStatementCacheDeleteCount</code> </td><td style="text-align: left"> <div class="para">
						The number of statements discarded from the cache.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">PreparedStatementCacheHitCount</code> </td><td style="text-align: left"> <div class="para">
						The number of times that statements from the cache were used.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">PreparedStatementCacheMissCount</code> </td><td style="text-align: left"> <div class="para">
						The number of times that a statement request could not be satisfied with a statement from the cache.
					</div>
					 </td></tr></tbody></table></div></div><div class="para">
		You can enable <code class="literal">Core</code> and <code class="literal">JDBC</code> statistics using appropriately modified versions of the following commands:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ul><li class="step"><pre class="programlisting">/subsystem=datasources/data-source=ExampleDS/statistics=pool:write-attribute(name=statistics-enabled,value=true)
</pre><pre class="programlisting">/subsystem=datasources/data-source=ExampleDS/statistics=jdbc:write-attribute(name=statistics-enabled,value=true)
</pre></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+13779-759342+%5BLatest%5D&amp;comment=Title%3A+Datasource+Statistics%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13779-759342+26+May+2015+04%3A42+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Example_Datasources">
      ⁠</a>6.8. Example Datasources</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_PostgreSQL_Datasource1">
      ⁠</a>6.8.1. Example PostgreSQL Datasource</h2></div></div></div><div class="para">
		The example below is a PostgreSQL datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978499207088">
      ⁠</a><p class="title"><strong>Example 6.17. PostSQL datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/PostgresDS" pool-name="PostgresDS"&gt;
    &lt;connection-url&gt;jdbc:postgresql://localhost:5432/postgresdb&lt;/connection-url&gt;
    &lt;driver&gt;postgresql&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
    	&lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="postgresql" module="org.postgresql"&gt;
      &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the PostgreSQL datasource above.
	</div><div class="example"><a id="idm139978542945008">
      ⁠</a><p class="title"><strong>Example 6.18. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="org.postgresql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="postgresql-9.1-902.jdbc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5688-766940+%5BLatest%5D&amp;comment=Title%3A+Example+PostgreSQL+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5688-766940+06+Aug+2015+05%3A01+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_PostgreSQL_XA_Datasource">
      ⁠</a>6.8.2. Example PostgreSQL XA Datasource</h2></div></div></div><div class="para">
		The example below is a PostgreSQL XA datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978458491248">
      ⁠</a><p class="title"><strong>Example 6.19. PostSQL XA datasource</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/PostgresXADS" pool-name="PostgresXADS"&gt;
    &lt;driver&gt;postgresql&lt;/driver&gt;
    &lt;xa-datasource-property name="ServerName"&gt;localhost&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;5432&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;postgresdb&lt;/xa-datasource-property&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker"&gt;
      &lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter"&gt;
      &lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="postgresql" module="org.postgresql"&gt;
      &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the PostgreSQL XA datasource above.
	</div><div class="example"><a id="idm139978454269856">
      ⁠</a><p class="title"><strong>Example 6.20. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="org.postgresql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="postgresql-9.1-902.jdbc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5689-766941+%5BLatest%5D&amp;comment=Title%3A+Example+PostgreSQL+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5689-766941+06+Aug+2015+05%3A03+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_MySQL_Datasource1">
      ⁠</a>6.8.3. Example MySQL Datasource</h2></div></div></div><div class="para">
		The example below is a MySQL datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978468271216">
      ⁠</a><p class="title"><strong>Example 6.21. MySQL datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/MySqlDS" pool-name="MySqlDS"&gt;
    &lt;connection-url&gt;jdbc:mysql://mysql-localhost:3306/jbossdb&lt;/connection-url&gt;
    &lt;driver&gt;mysql&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt; 
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mysql" module="com.mysql"&gt;
      &lt;xa-datasource-class&gt;com.mysql.jdbc.jdbc2.optional.MysqlXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the MySQL datasource above.
	</div><div class="example"><a id="idm139978541446528">
      ⁠</a><p class="title"><strong>Example 6.22. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.mysql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mysql-connector-java-5.0.8-bin.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5690-766942+%5BLatest%5D&amp;comment=Title%3A+Example+MySQL+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5690-766942+06+Aug+2015+05%3A04+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_MySQL_XA_Datasource1">
      ⁠</a>6.8.4. Example MySQL XA Datasource</h2></div></div></div><div class="para">
		The example below is a MySQL XA datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978472711328">
      ⁠</a><p class="title"><strong>Example 6.23. MySQL XA datasource</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/MysqlXADS" pool-name="MysqlXADS"&gt;
  &lt;driver&gt;mysql&lt;/driver&gt;
    &lt;xa-datasource-property name="ServerName"&gt;localhost&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;mysqldb&lt;/xa-datasource-property&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="mysql" module="com.mysql"&gt;
      &lt;xa-datasource-class&gt;com.mysql.jdbc.jdbc2.optional.MysqlXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the MySQL XA datasource above.
	</div><div class="example"><a id="idm139978532218896">
      ⁠</a><p class="title"><strong>Example 6.24. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.mysql"&gt;
  &lt;resources&gt;
    &lt;resource-root path="mysql-connector-java-5.0.8-bin.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5691-766943+%5BLatest%5D&amp;comment=Title%3A+Example+MySQL+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5691-766943+06+Aug+2015+05%3A05+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_Oracle_Datasource">
      ⁠</a>6.8.5. Example Oracle Datasource</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Oracle Datasources</strong></p></div><div class="admonition"><div class="para">
			Prior to version 10.2 of the Oracle datasource, the &lt;no-tx-separate-pools/&gt; parameter was required, as mixing non-transactional and transactional connections would result in an error. This parameter may no longer be required for certain applications.
		</div></div></div><div class="para">
		The example below is an Oracle datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978464984880">
      ⁠</a><p class="title"><strong>Example 6.25. Oracle datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:/OracleDS" pool-name="OracleDS"&gt;
    &lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:XE&lt;/connection-url&gt;
    &lt;driver&gt;oracle&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt; 
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleStaleConnectionChecker"&gt;&lt;/stale-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="oracle" module="com.oracle"&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the Oracle datasource above.
	</div><div class="example"><a id="idm139978441063104">
      ⁠</a><p class="title"><strong>Example 6.26. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.oracle"&gt;
  &lt;resources&gt;
    &lt;resource-root path="ojdbc6.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5696-767076+%5BLatest%5D&amp;comment=Title%3A+Example+Oracle+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5696-767076+10+Aug+2015+05%3A38+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_Oracle_XA_Datsource1">
      ⁠</a>6.8.6. Example Oracle XA Datasource</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Oracle Datasources</strong></p></div><div class="admonition"><div class="para">
			Prior to version 10.2 of the Oracle datasource, the &lt;no-tx-separate-pools/&gt; parameter was required, as mixing non-transactional and transactional connections would result in an error. This parameter may no longer be required for certain applications.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			The following settings must be applied for the user accessing an Oracle XA datasource in order for XA recovery to operate correctly. The value <code class="literal">user</code> is the user defined to connect from JBoss to Oracle:
		</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
					GRANT SELECT ON sys.dba_pending_transactions TO user;
				</div></li><li class="listitem"><div class="para">
					GRANT SELECT ON sys.pending_trans$ TO user;
				</div></li><li class="listitem"><div class="para">
					GRANT SELECT ON sys.dba_2pc_pending TO user;
				</div></li><li class="listitem"><div class="para">
					GRANT EXECUTE ON sys.dbms_xa TO user; (If using Oracle 10g R2 (patched) or Oracle 11g)
				</div><div class="para">
					OR
				</div><div class="para">
					GRANT EXECUTE ON sys.dbms_system TO user; (If using an unpatched Oracle version prior to 11g)
				</div></li></ul></div></div></div><div class="para">
		The example below is an Oracle XA datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978457939696">
      ⁠</a><p class="title"><strong>Example 6.27. Oracle XA datasource</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:/XAOracleDS" pool-name="XAOracleDS"&gt;
    &lt;driver&gt;oracle&lt;/driver&gt;
    &lt;xa-datasource-property name="URL"&gt;jdbc:oracle:oci8:@tc&lt;/xa-datasource-property&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
      &lt;no-tx-separate-pools /&gt;
    &lt;/xa-pool&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleStaleConnectionChecker"&gt;&lt;/stale-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="oracle" module="com.oracle"&gt;
      &lt;xa-datasource-class&gt;oracle.jdbc.xa.client.OracleXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the Oracle XA datasource above.
	</div><div class="example"><a id="idm139978450693344">
      ⁠</a><p class="title"><strong>Example 6.28. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.oracle"&gt;
  &lt;resources&gt;
    &lt;resource-root path="ojdbc6.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5697-766944+%5BLatest%5D&amp;comment=Title%3A+Example+Oracle+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5697-766944+06+Aug+2015+05%3A06+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_Microsoft_SQLServer_Datasource1">
      ⁠</a>6.8.7. Example Microsoft SQLServer Datasource</h2></div></div></div><div class="para">
		The example below is a Microsoft SQLServer datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978536581776">
      ⁠</a><p class="title"><strong>Example 6.29. SQLserver datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;datasource jndi-name="java:/MSSQLDS" pool-name="MSSQLDS"&gt;
    &lt;connection-url&gt;jdbc:sqlserver://localhost:1433;DatabaseName=MyDatabase&lt;/connection-url&gt;
    &lt;driver&gt;sqlserver&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sqlserver" module="com.microsoft"&gt;
  &lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the Microsoft SQLServer datasource above.
	</div><div class="example"><a id="idm139978523408352">
      ⁠</a><p class="title"><strong>Example 6.30. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.microsoft"&gt;
  &lt;resources&gt;
    &lt;resource-root path="sqljdbc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5698-770751+%5BLatest%5D&amp;comment=Title%3A+Example+Microsoft+SQLServer+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5698-770751+28+Sep+2015+02%3A02+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_Microsoft_SQLServer_XA_Datasource">
      ⁠</a>6.8.8. Example Microsoft SQLServer XA Datasource</h2></div></div></div><div class="para">
		The example below is a Microsoft SQLServer XA datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978449343632">
      ⁠</a><p class="title"><strong>Example 6.31. SQLserver XA datasource</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:/MSSQLXADS" pool-name="MSSQLXADS"&gt;
    &lt;driver&gt;sqlserver&lt;/driver&gt;
    &lt;xa-datasource-property name="ServerName"&gt;localhost&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;mssqldb&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="SelectMethod"&gt;cursor&lt;/xa-datasource-property&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
    	&lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sqlserver" module="com.microsoft"&gt;
      &lt;xa-datasource-class&gt;com.microsoft.sqlserver.jdbc.SQLServerXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the Microsoft SQLServer XA datasource above.
	</div><div class="example"><a id="idm139978441600848">
      ⁠</a><p class="title"><strong>Example 6.32. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.microsoft"&gt;
  &lt;resources&gt;
    &lt;resource-root path="sqljdbc4.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5699-766947+%5BLatest%5D&amp;comment=Title%3A+Example+Microsoft+SQLServer+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5699-766947+06+Aug+2015+05%3A09+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_IBM_DB2_Datasource">
      ⁠</a>6.8.9. Example IBM DB2 Datasource</h2></div></div></div><div class="para">
		The example below is an IBM DB2 datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978443530848">
      ⁠</a><p class="title"><strong>Example 6.33. IBM DB2 datasource configuration</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;datasource</span><span xmlns="" class="perl_Others"> jndi-name=</span><span xmlns="" class="perl_String">"java:/DB2DS"</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"DB2DS"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:db2:ibmdb2db<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver&gt;</span>ibmdb2<span xmlns="" class="perl_Keyword">&lt;/driver&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;pool&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>0<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;max-pool-size&gt;</span>50<span xmlns="" class="perl_Keyword">&lt;/max-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/pool&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>admin<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>admin<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;validate-on-match&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/validate-on-match&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;background-validation&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/background-validation&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;valid-connection-checker</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"</span><span xmlns="" class="perl_Keyword">&gt;&lt;/valid-connection-checker&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;stale-connection-checker</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"org.jboss.jca.adapters.jdbc.extensions.db2.DB2StaleConnectionChecker"</span><span xmlns="" class="perl_Keyword">&gt;&lt;/stale-connection-checker&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;exception-sorter</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"</span><span xmlns="" class="perl_Keyword">&gt;&lt;/exception-sorter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/validation&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/datasource&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;drivers&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ibmdb2"</span><span xmlns="" class="perl_Others"> module=</span><span xmlns="" class="perl_String">"com.ibm"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/driver&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/drivers&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the IBM DB2 datasource above.
	</div><div class="example"><a id="idm139978456673456">
      ⁠</a><p class="title"><strong>Example 6.34. module.xml</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:module:1.1"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.ibm"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;resources&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-root</span><span xmlns="" class="perl_Others"> path=</span><span xmlns="" class="perl_String">"db2jcc4.jar"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/resources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.transaction.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/module&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5700-766946+%5BLatest%5D&amp;comment=Title%3A+Example+IBM+DB2+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5700-766946+06+Aug+2015+05%3A09+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_IBM_DB2_XA_Datasource1">
      ⁠</a>6.8.10. Example IBM DB2 XA Datasource</h2></div></div></div><div class="para">
		The example below is an IBM DB2 XA datasource configuration. The datasource has been enabled, a user has been added and validation options have been set.
	</div><div class="example"><a id="idm139978539960208">
      ⁠</a><p class="title"><strong>Example 6.35. IBM DB2 XA datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:/DB2XADS" pool-name="DB2XADS"&gt;
    &lt;driver&gt;ibmdb2&lt;/driver&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;ibmdb2db&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="ServerName"&gt;hostname&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;port&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DriverType"&gt;4&lt;/xa-datasource-property&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2StaleConnectionChecker"&gt;&lt;/stale-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
    &lt;recovery&gt;
      &lt;recover-plugin class-name="org.jboss.jca.core.recovery.ConfigurableRecoveryPlugin"&gt;
        &lt;config-property name="EnableIsValid"&gt;false&lt;/config-property&gt;
        &lt;config-property name="IsValidOverride"&gt;false&lt;/config-property&gt;
        &lt;config-property name="EnableClose"&gt;false&lt;/config-property&gt;
      &lt;/recover-plugin&gt;
    &lt;/recovery&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="ibmdb2" module="com.ibm"&gt;
      &lt;xa-datasource-class&gt;com.ibm.db2.jcc.DB2XADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the IBM DB2 XA datasource above.
	</div><div class="example"><a id="idm139978443445856">
      ⁠</a><p class="title"><strong>Example 6.36. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.ibm"&gt;
  &lt;resources&gt;
    &lt;resource-root path="db2jcc4.jar"/&gt;
    &lt;resource-root path="db2jcc_license_cisuz.jar"/&gt;
    &lt;resource-root path="db2jcc_license_cu.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+5701-775742+%5BLatest%5D&amp;comment=Title%3A+Example+IBM+DB2+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5701-775742+25+Jan+2016+00%3A46+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_Sybase_Datasource">
      ⁠</a>6.8.11. Example Sybase Datasource</h2></div></div></div><div class="para">
		The example below is a Sybase datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978501332272">
      ⁠</a><p class="title"><strong>Example 6.37. Sybase datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">
&lt;datasources&gt;
  &lt;datasource jndi-name="java:jboss/SybaseDB" pool-name="SybaseDB" enabled="true"&gt;
    &lt;connection-url&gt;jdbc:sybase:Tds:localhost:5000/DATABASE?JCONNECT_VERSION=6&lt;/connection-url&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sybase" module="com.sybase"&gt;
      &lt;datasource-class&gt;com.sybase.jdbc4.jdbc.SybDataSource&lt;/datasource-class&gt;
      &lt;xa-datasource-class&gt;com.sybase.jdbc4.jdbc.SybXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the Sybase datasource above.
	</div><div class="example"><a id="idm139978457951632">
      ⁠</a><p class="title"><strong>Example 6.38. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.sybase"&gt;
  &lt;resources&gt;
    &lt;resource-root path="jconn2.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8847-766949+%5BLatest%5D&amp;comment=Title%3A+Example+Sybase+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8847-766949+06+Aug+2015+05%3A11+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Example_Sybase_XA_Datasource">
      ⁠</a>6.8.12. Example Sybase XA Datasource</h2></div></div></div><div class="para">
		The example below is a Sybase XA datasource configuration. The datasource has been enabled, a user has been added, and validation options have been set.
	</div><div class="example"><a id="idm139978441732432">
      ⁠</a><p class="title"><strong>Example 6.39. Sybase XA datasource configuration</strong></p><div class="example-contents"><pre class="programlisting">&lt;datasources&gt;
  &lt;xa-datasource jndi-name="java:jboss/SybaseXADS" pool-name="SybaseXADS" enabled="true"&gt;
    &lt;xa-datasource-property name="NetworkProtocol"&gt;Tds&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="ServerName"&gt;myserver&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;4100&lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="DatabaseName"&gt;mydatabase&lt;/xa-datasource-property&gt;
    &lt;security&gt;
      &lt;user-name&gt;admin&lt;/user-name&gt;
      &lt;password&gt;admin&lt;/password&gt;
    &lt;/security&gt;
    &lt;xa-pool&gt;
      &lt;is-same-rm-override&gt;false&lt;/is-same-rm-override&gt;
    &lt;/xa-pool&gt;
    &lt;validation&gt;
      &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;
      &lt;background-validation&gt;false&lt;/background-validation&gt;
      &lt;valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseValidConnectionChecker"&gt;&lt;/valid-connection-checker&gt;
      &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.sybase.SybaseExceptionSorter"&gt;&lt;/exception-sorter&gt;
    &lt;/validation&gt;
  &lt;/xa-datasource&gt;
  &lt;drivers&gt;
    &lt;driver name="sybase" module="com.sybase"&gt;
      &lt;datasource-class&gt;com.sybase.jdbc4.jdbc.SybDataSource&lt;/datasource-class&gt;
      &lt;xa-datasource-class&gt;com.sybase.jdbc4.jdbc.SybXADataSource&lt;/xa-datasource-class&gt;
    &lt;/driver&gt;
  &lt;/drivers&gt;
&lt;/datasources&gt;</pre></div></div><div class="para">
		The example below is a <code class="filename">module.xml</code> file for the Sybase XA datasource above.
	</div><div class="example"><a id="idm139978509520832">
      ⁠</a><p class="title"><strong>Example 6.40. module.xml</strong></p><div class="example-contents"><pre class="programlisting">&lt;module xmlns="urn:jboss:module:1.1" name="com.sybase"&gt;
  &lt;resources&gt;
    &lt;resource-root path="jconn2.jar"/&gt;
  &lt;/resources&gt;
  &lt;dependencies&gt;
    &lt;module name="javax.api"/&gt;
    &lt;module name="javax.transaction.api"/&gt;
  &lt;/dependencies&gt;
&lt;/module&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8848-766950+%5BLatest%5D&amp;comment=Title%3A+Example+Sybase+XA+Datasource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8848-766950+06+Aug+2015+05%3A12+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>