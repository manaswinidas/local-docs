<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 14. JVM</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-JVM">
      ⁠</a>Chapter 14. JVM</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-About_JVM">
      ⁠</a>14.1. About JVM</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_JVM_Settings1">
      ⁠</a>14.1.1. About JVM Settings</h2></div></div></div><div class="para">
		Configuration of Java Virtual Machine (JVM) settings varies between the managed domain and standalone server instances. In a managed domain, the JVM settings are declared in <code class="filename">host.xml</code> and <code class="filename">domain.xml</code> configuration files, and determined by the domain controller components responsible for starting and stopping server processes. In a standalone server instance, the server startup processes can pass command line settings at startup. These can be declared from the command line or via the <span class="guilabel"><strong>System Properties</strong></span> screen in the Management Console.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			System properties not configured in JAVA_OPTS cannot be used for properties used by JBoss Modules at boot time, nor can it be used for other JVM properties such as <code class="code">java.util.logging.manager</code>.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Managed Domain</div>
			An important feature of the managed domain is the ability to define JVM settings at multiple levels. You can configure custom JVM settings at the host level, by server group, or by server instance. The more specialized child elements will override the parent configuration, allowing for the declaration of specific server configurations without requiring exclusions at the group or host level. This also allows the parent configuration to be inherited by the other levels until settings are either declared in the configuration files or passed at runtime.
		</div><div class="example"><a id="idm139978513909424">
      ⁠</a><p class="title"><strong>Example 14.1. JVM settings in the domain configuration file</strong></p><div class="example-contents"><div class="para">
			The following example shows a JVM declaration for a server group in the <code class="filename">domain.xml</code> configuration file.
		</div><pre class="programlisting">&lt;server-groups&gt;
       &lt;server-group name="main-server-group" profile="default"&gt;
           &lt;jvm name="default"&gt;
               &lt;heap size="64m" max-size="512m"/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref="standard-sockets"/&gt;
       &lt;/server-group&gt;
       &lt;server-group name="other-server-group" profile="default"&gt;
           &lt;jvm name="default"&gt;
               &lt;heap size="64m" max-size="512m"/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref="standard-sockets"/&gt;
       &lt;/server-group&gt;
&lt;/server-groups&gt;
</pre><div class="para">
			In this instance a server group called <code class="literal">main-server-group</code> is declaring a heap size of 64 megabytes, and a maximum heap size of 512 megabytes. Any server that belongs to this group will inherit these settings. You can change these settings for the group as a whole, by the host, or the individual server.
		</div></div></div><div class="example"><a id="idm139978540952800">
      ⁠</a><p class="title"><strong>Example 14.2. Domain settings in the host configuration file</strong></p><div class="example-contents"><div class="para">
			The following example shows a JVM declaration for a server group in the <code class="filename">host.xml</code> configuration file.
		</div><pre class="programlisting">
&lt;servers&gt;
  &lt;server name="server-one" group="main-server-group" auto-start="true"&gt;
    &lt;jvm name="default"/&gt;
  &lt;/server&gt;
  &lt;server name="server-two" group="main-server-group" auto-start="true"&gt;
    &lt;jvm name="default"&gt;
      &lt;heap size="64m" max-size="256m"/&gt;
    &lt;/jvm&gt;
    &lt;socket-bindings port-offset="150"/&gt;
  &lt;/server&gt;
  &lt;server name="server-three" group="other-server-group" auto-start="false"&gt;
    &lt;socket-bindings port-offset="250"/&gt;
  &lt;/server&gt;
&lt;/servers&gt;
</pre><div class="para">
			In this instance, a server named <code class="literal">server-two</code> belongs to the server group named <code class="literal">main-server-group</code>, inheriting the JVM settings from the <code class="literal">default</code> JVM group. In the previous example, the main heap size for <code class="literal">main-server-group</code> was set at 512 megabytes. By declaring the lower maximum heap size of 256 megabytes, <code class="literal">server-two</code> can override the <code class="filename">domain.xml</code> settings to fine-tune performance as desired.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Standalone server settings at runtime</div>
			The JVM settings for standalone server instances can be declared at runtime by setting the <code class="code">JAVA_OPTS</code> environment variable before starting the server. An example of setting the <code class="code">JAVA_OPTS</code> environment variable at the Linux command-line is:
		</div><pre class="screen">[user@host bin]$ export JAVA_OPTS="-Xmx1024M"</pre><div class="para">
		The same setting can be used in a Microsoft Windows environment, as follows:
	</div><pre class="screen">C:\&gt; set JAVA_OPTS="Xmx1024M"</pre><div class="para">
		Alternatively, JVM settings can be added to the <code class="filename">standalone.conf</code> file found in the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin</code> folder, which contains examples of options to pass to the JVM.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Setting the JAVA_OPTS environment variable will re-define the default values for the JAVA_OPTS environment variable. This can break or terminate the start of JBoss EAP.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4755-767413+%5BLatest%5D&amp;comment=Title%3A+About+JVM+Settings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4755-767413+14+Aug+2015+02%3A48+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Display_the_JVM_Status_in_the_Management_Console">
      ⁠</a>14.1.2. Display the JVM Status in the Management Console</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Standalone_Server2">Section 2.2.2, “Start JBoss EAP 6 as a Standalone Server”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Application_Server_Management.html#Start_JBoss_Enterprise_Application_Platform_6_as_a_Managed_Domain1">Section 2.2.4, “Start JBoss EAP 6 as a Managed Domain”</a>
			</div></li><li class="listitem"><div class="para">
				<a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>
			</div></li></ul></div><div class="para">
		Java Virtual Machine (JVM) status can be displayed in the Management Console for either the standalone server or a managed domain. The console shows the heap usage, non heap usage, and thread usage of the server. While the statistics are not displayed in real-time, you can refresh the console display to provide an up-to-date overview of JVM resources.
	</div><div class="para">
		The JVM status shows the following values.
	</div><div class="table"><a id="idm139978518199184">
      ⁠</a><p class="title"><strong>Table 14.1. JVM Status Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="JVM Status Attributes"><colgroup><col width="25%" class="c1"/><col width="75%" class="c2"/></colgroup><thead><tr><th> Type </th><th> Description </th></tr></thead><tbody><tr><td> Max </td><td> The maximum amount of memory that can be used for memory management. The maximum availabe memory is shown by the light grey bar. </td></tr><tr><td> Used </td><td> The amount of used memory. The amount of used memory is shown by the dark grey bar. </td></tr><tr><td> Committed </td><td> The amount of memory that is committed for the Java virtual machine to use. The committed memory is shown by the dark grey bar. </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978445842736">
      ⁠</a><p class="title"><strong>Procedure 14.1. Display the JVM Status in the Management Console</strong></p><ol class="1"><li class="step"><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Display the JVM status for a standalone server instance</strong></p><div class="para">
						Select the <span class="guimenuitem"><strong>Runtime</strong></span> tab from the top of the screen. Expand the <span class="guimenu"><strong>Status</strong></span> menu, then expand the <span class="guimenu"><strong>Platform</strong></span> menu. Select <span class="guimenuitem"><strong>JVM</strong></span>.
					</div></li>
				 <li class="step"><p class="title"><strong>Display the JVM status for a managed domain</strong></p><div class="para">
						Select the <span class="guimenuitem"><strong>Runtime</strong></span> tab from the top of the screen. Expand the <span class="guimenu"><strong>Server Status</strong></span> menu, then expand the <span class="guimenu"><strong>Platform</strong></span> menu. Select <span class="guimenuitem"><strong>JVM</strong></span>.
					</div></li>

			</ul></li><li class="step"><div class="para">
				The managed domain can provide visibility of all server instances in the server group, but will only allow you to view one server at a time by selecting from the server menu. To view the status of other servers in your server group, click <span class="guibutton"><strong>Change Server</strong></span> left of the screen to select from the host and servers displayed in your group. Select the required server or host and the JVM details will change. Click <span class="guibutton"><strong>Close</strong></span> to finish.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The status of the JVM settings for the server instance are displayed.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+6839-747832+%5BLatest%5D&amp;comment=Title%3A+Display+the+JVM+Status+in+the+Management+Console%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6839-747832+19+Mar+2015+04%3A57+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configuring_JVM">
      ⁠</a>14.1.3. Configuring JVM</h2></div></div></div><div class="para">
		The &lt;jvm&gt;&lt;/jvm&gt; tags support the usage of &lt;jvm-options&gt;&lt;/jvm-options&gt;, which can be used to add parameters to the JVM configuration using the &lt;option value="<em class="replaceable">VALUE</em>"/&gt; tag.
	</div><div class="example"><a id="idm139978464303216">
      ⁠</a><p class="title"><strong>Example 14.3. Use of &lt;jvm-options&gt;</strong></p><div class="example-contents"><pre class="programlisting">&lt;jvm name="default"&gt;
  &lt;heap size="1303m" max-size="1303m"/&gt;
  &lt;permgen max-size="256m"/&gt;
  &lt;jvm-options&gt;
    &lt;option value="-XX:+UseCompressedOops"/&gt;
  &lt;/jvm-options&gt;
&lt;/jvm&gt;</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Configuring JVM Using CLI</div>
			To configure JVM using CLI, use the following syntax: 
<pre class="screen"># cd /server-group=main-server-group/jvm=default

# :add-jvm-option(jvm-option="-XX:+UseCompressedOops")
{
    "outcome" =&gt; "success",
    "result" =&gt; undefined,
    "server-groups" =&gt; {"main-server-group" =&gt; {"host" =&gt; {"master" =&gt; {
        "server-one" =&gt; {"response" =&gt; {
            "outcome" =&gt; "success",
            "response-headers" =&gt; {
                "operation-requires-restart" =&gt; true,
                "process-state" =&gt; "restart-required"
            }
        }},
        "server-two" =&gt; {"response" =&gt; {
            "outcome" =&gt; "success",
            "response-headers" =&gt; {
                "operation-requires-restart" =&gt; true,
                "process-state" =&gt; "restart-required"
            }
        }}
    }}}}
}

# :read-resource

# Expected Result:

[domain@localhost:9999 jvm=default] :read-resource                                      
  {
    "outcome" =&gt; "success",
    "result" =&gt; {
    "agent-lib" =&gt; undefined,
    "agent-path" =&gt; undefined,
    "env-classpath-ignored" =&gt; undefined,
    "environment-variables" =&gt; undefined,
    "heap-size" =&gt; "1303m",
    "java-agent" =&gt; undefined,
    "java-home" =&gt; undefined,
    "jvm-options" =&gt; ["-XX:+UseCompressedOops"],
    "max-heap-size" =&gt; "1303m",
    "max-permgen-size" =&gt; "256m",
    "permgen-size" =&gt; undefined,
    "stack-size" =&gt; undefined,
    "type" =&gt; undefined
  }
}</pre>

		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Removing jvm-options Entry</div>
			To remove jvm-options entry, use the following syntax: 
<pre class="screen">
# cd /server-group=main-server-group/jvm=default

# :remove-jvm-option(jvm-option="-XX:+UseCompressedOops")

# Expected Result:

[domain@localhost:9999 jvm=default] :remove-jvm-option(jvm-option="-XX:+UseCompressedOops")
{
    "outcome" =&gt; "success",
    "result" =&gt; undefined,
    "server-groups" =&gt; {"main-server-group" =&gt; {"host" =&gt; {"master" =&gt; {
        "server-one" =&gt; {"response" =&gt; {
            "outcome" =&gt; "success",
            "response-headers" =&gt; {
                "operation-requires-restart" =&gt; true,
                "process-state" =&gt; "restart-required"
            }
        }},
        "server-two" =&gt; {"response" =&gt; {
            "outcome" =&gt; "success",
            "response-headers" =&gt; {
                "operation-requires-restart" =&gt; true,
                "process-state" =&gt; "restart-required"
            }
        }}
    }}}}
}
</pre>

		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Specifying 32-Bit or 64-Bit Architecture</div>
			In some environments, such as Hewlett-Packard HP-UX and Solaris, the <code class="literal">-d32</code> or <code class="literal">-d64</code> switch is used to specify whether to run in a 32-bit or 64-bit JVM respectively. The default is 32-bit if neither option is indicated.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978442875104">
      ⁠</a><p class="title"><strong>Procedure 14.2. Specifying 64-Bit Architecture for a Standalone Server</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/standalone.conf</code> file.
			</div></li><li class="step"><div class="para">
				Add the following line to append the <code class="literal">-d64</code> option to <code class="literal">JAVA_OPTS</code>. 
<pre class="screen">JAVA_OPTS="$JAVA_OPTS -d64"</pre>

			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978456185840">
      ⁠</a><p class="title"><strong>Procedure 14.3. Specifying 64-Bit Architecture for a Managed Domain</strong></p><div class="para">
			When running in a managed domain, you can specify the 64-bit environment for host and process controllers in addition to server instances.
		</div><ol class="1"><li class="step"><div class="para">
				Set the host and process controllers to run in the 64-bit JVM.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Open the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/domain.conf</code> file.
					</div></li><li class="step"><div class="para">
						Add the following line to append the <code class="literal">-d64</code> option to <code class="literal">JAVA_OPTS</code>. Ensure that this is inserted before <code class="literal">PROCESS_CONTROLLER_JAVA_OPTS</code> and <code class="literal">HOST_CONTROLLER_JAVA_OPTS</code> are set. 
<pre class="screen">JAVA_OPTS="$JAVA_OPTS -d64"</pre>

					</div><div class="example"><a id="idm139978514558848">
      ⁠</a><p class="title"><strong>Example 14.4. JVM options in <code class="filename">domain.conf</code></strong></p><div class="example-contents"><pre class="programlisting">#  
# Specify options to pass to the Java VM.  
#  
if [ "x$JAVA_OPTS" = "x" ]; then  
  JAVA_OPTS="-Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true"  
  JAVA_OPTS="$JAVA_OPTS -Djboss.modules.system.pkgs=$JBOSS_MODULES_SYSTEM_PKGS -Djava.awt.headless=true"  
  JAVA_OPTS="$JAVA_OPTS -Djboss.modules.policy-permissions=true"  
  JAVA_OPTS="$JAVA_OPTS -d64"  
else  
  echo "JAVA_OPTS already set in environment; overriding default settings with values: $JAVA_OPTS"  
fi</pre></div></div></li></ol></li><li class="step"><div class="para">
				Set the server instances to run in the 64-bit JVM.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Add <code class="literal">-d64</code> as a JVM option in the appropriate host.xml configuration files. 
						<div class="example"><a id="idm139978447125824">
      ⁠</a><p class="title"><strong>Example 14.5. JVM options in <code class="filename">host.xml</code></strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jvms&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;jvm</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"default"</span><span xmlns="" class="perl_Keyword">&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;heap</span><span xmlns="" class="perl_Others"> size=</span><span xmlns="" class="perl_String">"64m"</span><span xmlns="" class="perl_Others"> max-size=</span><span xmlns="" class="perl_String">"256m"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;permgen</span><span xmlns="" class="perl_Others"> size=</span><span xmlns="" class="perl_String">"256m"</span><span xmlns="" class="perl_Others"> max-size=</span><span xmlns="" class="perl_String">"256m"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jvm-options&gt;</span>  
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;option</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"-server"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;option</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"-d64"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/jvm-options&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/jvm&gt;</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jvms&gt;</span></pre></div></div>
						 <div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
								The <code class="literal">-d64</code> option can be added for the appropriate hosts using the Management CLI with the following command: 
<pre class="screen">/host=<em class="replaceable">HOST_NAME</em>/jvm=default:add-jvm-option(jvm-option="-d64")</pre>

							</div></div></div>

					</div></li></ol></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+31266-766403+%5BLatest%5D&amp;comment=Title%3A+Configuring+JVM%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=31266-766403+30+Jul+2015+10%3A23+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_the_Java_Security_Manager">
      ⁠</a>14.1.4. About the Java Security Manager</h2></div></div></div><div class="para">
		The Java Security Manager is a class that manages the external boundary of the Java Virtual Machine (JVM) sandbox, controlling how code executing within the JVM can interact with resources outside the JVM. When the Java Security Manager is activated, the Java API checks with the security manager for approval before executing a wide range of potentially unsafe operations. The Java Security Manager uses a security policy to determine whether a given action will be allowed or denied.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4778-714990+%5BLatest%5D&amp;comment=Title%3A+About+the+Java+Security+Manager%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4778-714990+03+Oct+2014+00%3A32+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Java_Security_Manager_Policies">
      ⁠</a>14.1.5. About Java Security Policies</h2></div></div></div><div class="para">
		A Java Security policy is a set of defined permissions for different classes of code. The Java Security Manager compares actions requested by applications against the security policy. If an action is allowed by the policy, the Security Manager will permit that action to take place. If the action is not allowed by the policy, the Security Manager will deny that action. The security policy can define permissions based on the location of code, on the code's signature, or based on the subject's principals.
	</div><div class="para">
		Security policy grant entries consist of the following configuration elements:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">CodeBase</span></dt><dd><div class="para">
					The URL location (excluding the host and domain information) where the code originates from. This parameter is optional.
				</div></dd><dt><span class="term">SignedBy</span></dt><dd><div class="para">
					The alias used in the keystore to reference the signer whose private key was used to sign the code. This can be a single value or a comma-separated list of values. This parameter is optional. If omitted, presence or lack of a signature has no impact on the Java Security Manager.
				</div></dd><dt><span class="term">Principals</span></dt><dd><div class="para">
					A list of <em class="parameter"><code>principal_type</code></em>/<em class="parameter"><code>principal_name</code></em> pairs, which must be present within the executing thread's principal set. The Principals entry is optional. If it is omitted, it signifies that the principals of the executing thread will have no impact on the Java Security Manager.
				</div></dd><dt><span class="term">Permissions</span></dt><dd><div class="para">
					A permission is the access which is granted to the code. Many permissions are provided as part of the Java Enterprise Edition 6 (Java EE 6) specification. 
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4781-769430+%5BLatest%5D&amp;comment=Title%3A+About+Java+Security+Policies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4781-769430+01+Sep+2015+04%3A36+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Write_a_Java_Security_Manager_Policy1">
      ⁠</a>14.1.6. Write a Java Security Policy</h2></div></div></div><div class="para">
		An application called <code class="command">policytool</code> is included with most JDK and JRE distributions, for the purpose of creating and editing Java security policies. Detailed information about <code class="command">policytool</code> is linked from <a href="http://docs.oracle.com/javase/6/docs/technotes/tools/">http://docs.oracle.com/javase/6/docs/technotes/tools/</a>. Alternatively, you can also write a security policy using a text editor.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978445563520">
      ⁠</a><p class="title"><strong>Procedure 14.4. Setup a new Java Security Manager Policy</strong></p><ol class="1"><li class="step"><p class="title"><strong>Start <code class="command">policytool</code>.</strong></p><div class="para">
				Start the <code class="command">policytool</code> tool in one of the following ways.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Red Hat Enterprise Linux</strong></p><div class="para">
						From your GUI or a command prompt, run <code class="command">/usr/bin/policytool</code>.
					</div></li>
				 <li class="step"><p class="title"><strong>Microsoft Windows Server</strong></p><div class="para">
						Run <code class="command">policytool.exe</code> from your Start menu or from the <code class="filename">bin\</code> of your Java installation. The location can vary.
					</div></li>

			</ul></li><li class="step"><p class="title"><strong>Create a policy.</strong></p><div class="para">
				To create a policy, select <span class="guibutton"><strong>Add Policy Entry</strong></span>. Add the parameters you need, then click <span class="guibutton"><strong>Done</strong></span>.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Use VFS to specify paths for applications deployed on JBoss EAP. On Linux the path is: <code class="filename">vfs:/content/<em class="replaceable">application.war</em></code>. On Microsoft Windows it is: <code class="filename">vfs:/${user.dir}/content/<em class="replaceable">application.war</em></code> <code class="filename"/>.
				</div><div class="para">
					For example:
				</div><pre class="screen">grant codeBase "vfs:/content/application.war/-" {
permission java.util.PropertyPermission "*", "read";
};
</pre></div></div></li><li class="step"><p class="title"><strong>Edit an existing policy</strong></p><div class="para">
				Select the policy from the list of existing policies, and select the <span class="guibutton"><strong>Edit Policy Entry</strong></span> button. Edit the parameters as needed.
			</div></li><li class="step"><p class="title"><strong>Delete an existing policy.</strong></p><div class="para">
				Select the policy from the list of existing policies, and select the <span class="guibutton"><strong>Remove Policy Entry</strong></span> button.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4782-748002+%5BLatest%5D&amp;comment=Title%3A+Write+a+Java+Security+Policy%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4782-748002+20+Mar+2015+00%3A52+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Run_JBoss_Enterprise_Application_Platform_Within_the_Java_Security_Manager">
      ⁠</a>14.1.7. Run JBoss EAP 6 Within the Java Security Manager</h2></div></div></div><div class="para">
		From JBoss EAP 6.4 and onwards, running JBoss EAP 6 within the Java Security Manager (JSM) is done using the <code class="code">secmgr</code> option.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Direct usage of the <code class="code">-Djava.security.manager</code> Java system property is no longer possible. This previous method used in older versions of JBoss EAP 6 to enable the Java Security Manager is now only supported as a fallback mechanism in the JBoss EAP startup scripts.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			From JBoss EAP 6.4 and onwards, custom security managers cannot be used.
		</div></div></div><div class="para">
		The following procedure guides you through the steps of configuring your JBoss EAP 6 instance to run within the Java Security Manager using a specified security policy.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Before you follow this procedure, you need to write a security policy using the <code class="command">policytool</code> application which is included in the Java Development Kit (JDK) or the Java SE Runtime Environment (JRE). Alternatively, you can write a security policy using a text editor.
			</div><div class="para">
				Security policies will be needed for any user deployments that require permissions. This procedure assumes that your policy is located at <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/server.policy</code>.
			</div></li><li class="listitem"><div class="para">
				The domain or standalone server must be completely stopped before you edit any configuration files.
			</div></li></ul></div><div class="para">
		If you are using JBoss EAP 6 in a Managed Domain, you must perform the following procedure on each physical host or instance in your domain.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978444727984">
      ⁠</a><p class="title"><strong>Procedure 14.5. Configure the Java Security Manager for JBoss EAP 6</strong></p><ol class="1"><li class="step"><p class="title"><strong>Open the Configuration File</strong></p><div class="para">
				Open the configuration file for editing. The configuration file you need to edit depends on whether you use a Managed Domain or standalone server, as well as your operating system.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Managed Domain</strong></p><div class="itemizedlist"><ul><li class="listitem"><div class="para">
								For Linux: <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/domain.conf</code>
							</div></li><li class="listitem"><div class="para">
								For Windows: <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\domain.conf.bat</code>
							</div></li></ul></div></li>
				 <li class="step"><p class="title"><strong>Standalone Server</strong></p><div class="itemizedlist"><ul><li class="listitem"><div class="para">
								For Linux: <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/standalone.conf</code>
							</div></li><li class="listitem"><div class="para">
								For Windows: <code class="filename"><em class="replaceable">EAP_HOME</em>\bin\standalone.conf.bat</code>
							</div></li></ul></div></li>

			</ul></li><li class="step"><p class="title"><strong>Enable the Java Security Manager</strong></p><div class="para">
				Use one of the methods below to enable the Java Security Manager:
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						Use the <code class="code">-secmgr</code> option with your JBoss EAP 6 server startup script.
					</div></li>
				 <li class="step"><div class="para">
						Uncomment the <code class="literal">SECMGR="true"</code> line in the configuration file:
					</div><ul class="stepalternatives">
						<li class="step"><p class="title"><strong>On Linux:</strong></p><pre class="programlisting"># Uncomment this to run with a security manager enabled
SECMGR="true"</pre></li>
						 <li class="step"><p class="title"><strong>On Windows:</strong></p><pre class="programlisting">rem # Uncomment this to run with a security manager enabled
set "SECMGR=true"</pre></li>

					</ul></li>

			</ul></li><li class="step"><p class="title"><strong>Specify the Java Security Policy</strong></p><div class="para">
				You can use <code class="literal">-Djava.security.policy</code> to specify the exact location of your security policy. It should go onto one line only, with no line break. Using <code class="code">==</code> when setting <code class="literal">-Djava.security.policy</code> specifies that the security manager will use <span class="emphasis"><em>only</em></span> the specified policy file. Using <code class="code">=</code> specifies that the security manager will use the specified policy <span class="emphasis"><em>combined with</em></span> the policy set in the <code class="literal">policy.url</code> section of <code class="filename"><em class="replaceable">JAVA_HOME</em>/jre/lib/security/java.security</code>.
			</div><div class="para">
				In your relevant JBoss EAP 6 configuration file, add your security policy Java options. If you are using a Managed Domain, ensure that this is inserted before where <code class="code">PROCESS_CONTROLLER_JAVA_OPTS</code> and <code class="code">HOST_CONTROLLER_JAVA_OPTS</code> are set.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>On Linux:</strong></p><pre class="programlisting">JAVA_OPTS="$JAVA_OPTS -Djava.security.policy==<em class="replaceable">EAP_HOME</em>/bin/server.policy -Djboss.home.dir=<em class="replaceable">EAP_HOME</em>"</pre></li>
				 <li class="step"><p class="title"><strong>On Windows:</strong></p><pre class="programlisting">set "JAVA_OPTS=%JAVA_OPTS% -Djava.security.policy==<em class="replaceable">EAP_HOME</em>\bin\server.policy -Djboss.home.dir=<em class="replaceable">EAP_HOME</em>"</pre></li>

			</ul></li><li class="step"><p class="title"><strong>Start the Domain or Server</strong></p><div class="para">
				Start the domain or server as normal.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4779-766901+%5BLatest%5D&amp;comment=Title%3A+Run+JBoss+EAP+6+Within+the+Java+Security+Manager%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4779-766901+05+Aug+2015+14%3A38+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="IBM_JRE_and_the_Java_Security_Manager">
      ⁠</a>14.1.8. IBM JDK and the Java Security Manager</h2></div></div></div><div class="para">
		Some versions of the IBM JDK use a default policy provider which does not work correctly with a JBoss EAP security policy. If you are having problems using an IBM JDK to host JBoss EAP with the Java Security Manager enabled, you must change the JRE configuration to use the standard policy provider.
	</div><div class="para">
		To modify the JRE configuration for the IBM JDK, edit the <code class="filename">JAVA_HOME/jre/lib/security/java.security</code> file, and set the <code class="code">policy.provider</code> value to <code class="code">sun.security.provider.PolicyFile</code>.
	</div><pre class="screen">policy.provider=sun.security.provider.PolicyFile</pre><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+30502-732585+%5BLatest%5D&amp;comment=Title%3A+IBM+JDK+and+the+Java+Security+Manager%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=30502-732585+14+Dec+2014+20%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Debug_Security_Manager_Policies">
      ⁠</a>14.1.9. Debug Security Manager Policies</h2></div></div></div><div class="para">
		You can enable debugging information to help you troubleshoot security policy-related issues. The <code class="command">java.security.debug</code> option configures the level of security-related information reported. The command <code class="command">java -Djava.security.debug=help</code> will produce help output with the full range of debugging options. Setting the debug level to <code class="command">all</code> is useful when troubleshooting a security-related failure whose cause is completely unknown, but for general use it will produce too much information. A sensible general default is <code class="command">access:failure</code>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978519492320">
      ⁠</a><p class="title"><strong>Procedure 14.6. Enable general debugging</strong></p><ul><li class="step"><p class="title"><strong>This procedure will enable a sensible general level of security-related debug information.</strong></p><div class="para">
				Add the following line to the server configuration file. 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							If the JBoss EAP 6 instance is running in a managed domain, the line is added to the <code class="filename">bin/domain.conf</code> file for Linux or the <code class="filename">bin\domain.conf.bat</code> file for Windows.
						</div></li><li class="listitem"><div class="para">
							If the JBoss EAP 6 instance is running as a standalone server, the line is added to the <code class="filename">bin/standalone.conf</code> file for Linux, or the <code class="filename">bin\standalone.conf.bat</code> file for Windows.
						</div></li></ul></div>

			</div></li></ul></div><div class="para">
		<code class="command">Linux</code>
	</div><div class="para">
		
<pre class="programlisting">JAVA_OPTS="$JAVA_OPTS -Djava.security.debug=access:failure"</pre>

	</div><div class="para">
		<code class="command">Windows</code>
	</div><div class="para">
		
<pre class="programlisting">set "JAVA_OPTS=%JAVA_OPTS% -Djava.security.debug=access:failure"</pre>

	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			A general level of security-related debug information has been enabled.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4780-591672+%5BLatest%5D&amp;comment=Title%3A+Debug+Security+Manager+Policies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4780-591672+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>