<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 22. Java Connector Architecture (JCA)</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Java_Connector_Architecture_JCA">
      ⁠</a>Chapter 22. Java Connector Architecture (JCA)</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Introduction6">
      ⁠</a>22.1. Introduction</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_the_Java_EE_Connector_API_JCA1">
      ⁠</a>22.1.1. About the Java EE Connector API (JCA)</h2></div></div></div><div class="para">
		JBoss EAP 6 provides full support for the Java EE Connector API (JCA) 1.6 specification. See <a href="http://jcp.org/en/jsr/detail?id=322">JSR 322: Java EE Connector Architecture 1.6</a> for more information about the JCA specification.
	</div><div class="para">
		A resource adapter is a component that implements the Java EE Connector API architecture. It is similar to a datasource object, however, it provides connectivity from an Enterprise Information System (EIS) to a broader range of heterogenuous systems, such as databases, messaging systems, transaction processing, and Enterprise Resource Planning (ERP) systems.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Java Platform Enterprise Edition 6 comes with the <code class="code">javax.resource.cci</code> package. The <code class="code">javax.resource.cci</code> package comprises the APIs that should be implemented by a resource adapter that supports the <code class="literal">Common Client Interface </code>(CCI). <code class="code">javax.resource.cci.ResultSet</code> is a member of this package and extends <code class="code">java.sql.ResultSet</code>. The interface of <code class="code">java.sql.ResultSet</code> depends on the Java version used, and hence when using <code class="literal">Common Client Interface</code> (CCI), all applications should assume that only <code class="code">java.sql.ResultSet</code> methods from Java 6 can be used for data interaction.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4514-766794+%5BLatest%5D&amp;comment=Title%3A+About+the+Java+EE+Connector+API+%28JCA%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4514-766794+05+Aug+2015+08%3A08+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Java_Connector_Architecture_JCA">
      ⁠</a>22.1.2. Java Connector Architecture (JCA)</h2></div></div></div><div class="para">
		The Java EE Connector Architecture (JCA) defines a standard architecture for Java EE systems to external heterogeneous Enterprise Information Systems (EIS). Examples of EISs include Enterprise Resource Planning (ERP) systems, mainframe transaction processing (TP), databases and messaging systems.
	</div><div class="para">
		JCA 1.6 provides features for managing:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				connections
			</div></li><li class="listitem"><div class="para">
				transactions
			</div></li><li class="listitem"><div class="para">
				security
			</div></li><li class="listitem"><div class="para">
				life-cycle
			</div></li><li class="listitem"><div class="para">
				work instances
			</div></li><li class="listitem"><div class="para">
				transaction inflow
			</div></li><li class="listitem"><div class="para">
				message inflow
			</div></li></ul></div><div class="para">
		JCA 1.6 was developed under the Java Community Process as JSR-322, <a href="http://jcp.org/en/jsr/detail?id=313">http://jcp.org/en/jsr/detail?id=313</a>.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Alternative managed connection pools</div>
			JBoss EAP 6.4 features the following alternative pool implementations:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				<span class="emphasis"><em>org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreArrayListManagedConnectionPool:</em></span> This is the default connection pool.
			</div></li><li class="listitem"><div class="para">
				<span class="emphasis"><em>org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreConcurrentLinkedQueueManagedConnectionPool:</em></span> This connection pool sometimes provides better performance profile and is enabled by using the system property <code class="filename">-Dironjacamar.mcp=org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreConcurrentLinkedQueueManagedConnectionPool</code>
			</div></li><li class="listitem"><div class="para">
				<span class="emphasis"><em>org.jboss.jca.core.connectionmanager.pool.mcp.LeakDumperManagedConnectionPool:</em></span> This connection pool is used only for debugging purposes. For more information about the LeakDetectorPool, refer to <a href="http://www.ironjacamar.org/doc/userguide/1.2/en-US/html/ch04.html#configuration_ironjacamar_leakpool">http://www.ironjacamar.org/doc/userguide/1.2/en-US/html/ch04.html#configuration_ironjacamar_leakpool</a>
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4515-775741+%5BLatest%5D&amp;comment=Title%3A+Java+Connector+Architecture+%28JCA%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4515-775741+25+Jan+2016+00%3A38+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Resource_Adapters">
      ⁠</a>22.1.3. Resource Adapters</h2></div></div></div><div class="para">
		A resource adapter is a deployable Java EE component that provides communication between a Java EE application and an Enterprise Information System (EIS) using the Java Connector Architecture (JCA) specification. A resource adapter is often provided by EIS vendors to allow easy integration of their products with Java EE applications.
	</div><div class="para">
		An Enterprise Information System can be any other software system within an organization. Examples include Enterprise Resource Planning (ERP) systems, database systems, e-mail servers and proprietary messaging systems.
	</div><div class="para">
		A resource adapter is packaged in a Resource Adapter Archive (RAR) file which can be deployed to JBoss EAP 6. A RAR file may also be included in an Enterprise Archive (EAR) deployment.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4516-591663+%5BLatest%5D&amp;comment=Title%3A+Resource+Adapters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4516-591663+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_the_Java_Connector_Architecture_JCA_Subsystem">
      ⁠</a>22.2. Configure the Java Connector Architecture (JCA) Subsystem</h1></div></div></div><div class="para">
		The JCA subsystem in the JBoss EAP 6 configuration file controls the general settings for the JCA container and resource adapter deployments.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Key elements of the JCA subsystem</div>
			<div class="variablelist"><dl class="variablelist"><dt><span class="term">Archive validation</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
									This setting whether archive validation will be performed on the deployment units.
								</div></li><li class="listitem"><div class="para">
									The following table describes the attributes you can set for archive validation.
								</div><div class="table"><a id="archive-validation-types-attributes">
      ⁠</a><p class="title"><strong>Table 22.1. Archive validation attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows" summary="Archive validation attributes"><colgroup><col width="20%" style="text-align: left" class="c1"/><col width="20%" style="text-align: left" class="c2"/><col width="60%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Default Value </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">enabled</code> </td><td style="text-align: left"> true </td><td style="text-align: left"> <div class="para">
													Specifies whether archive validation is enabled.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">fail-on-error</code> </td><td style="text-align: left"> true </td><td style="text-align: left"> <div class="para">
													Specifies whether an archive validation error report fails the deployment.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">fail-on-warn</code> </td><td style="text-align: left"> false </td><td style="text-align: left"> <div class="para">
													Specifies whether an archive validation warning report fails the deployment.
												</div>
												 </td></tr></tbody></table></div></div></li><li class="listitem"><div class="para">
									If an archive does not implement the Java EE Connector Architecture specification correctly and archive validation is enabled, an error message will display during deployment describing the problem. For example: 
<pre class="screen">
Severity: ERROR
Section: 19.4.2 
Description: A ResourceAdapter must implement a "public int hashCode()" method. 
Code: com.mycompany.myproject.ResourceAdapterImpl

Severity: ERROR
Section: 19.4.2
Description: A ResourceAdapter must implement a "public boolean equals(Object)" method.
Code: com.mycompany.myproject.ResourceAdapterImpl
</pre>

								</div></li><li class="listitem"><div class="para">
									If archive validation is not specified, it is considered present and the <code class="code">enabled</code> attribute defaults to true.
								</div></li></ul></div></dd><dt><span class="term">Bean validation</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
									This setting determines whether bean validation (JSR-303) will be performed on the deployment units.
								</div></li><li class="listitem"><div class="para">
									The following table describes the attributes you can set for bean validation.
								</div><div class="table"><a id="bean-validation-types-attributes">
      ⁠</a><p class="title"><strong>Table 22.2. Bean validation attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows" summary="Bean validation attributes"><colgroup><col width="20%" style="text-align: left" class="c1"/><col width="20%" style="text-align: left" class="c2"/><col width="60%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Default Value </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">enabled</code> </td><td style="text-align: left"> true </td><td style="text-align: left"> <div class="para">
													Specifies whether bean validation is enabled.
												</div>
												 </td></tr></tbody></table></div></div></li><li class="listitem"><div class="para">
									If bean validation is not specified, it is considered present and the <code class="code">enabled</code> attribute defaults to true.
								</div></li></ul></div></dd><dt><span class="term">Work managers</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
									There are two types of work managers: 
									<div class="variablelist"><dl class="variablelist"><dt><span class="term">Default work manager</span></dt><dd><div class="para">
													The default work manager and its thread pools.
												</div></dd><dt><span class="term">Custom work manager</span></dt><dd><div class="para">
													A custom work manager definition and its thread pools.
												</div></dd></dl></div>

								</div></li><li class="listitem"><div class="para">
									The following table describes the attributes you can set for work managers.
								</div><div class="table"><a id="work-managers-attributes">
      ⁠</a><p class="title"><strong>Table 22.3. Work manager attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows" summary="Work manager attributes"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">name</code> </td><td style="text-align: left"> <div class="para">
													Specifies the name of the work manager. This is required for custom work managers.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">short-running-threads</code> </td><td style="text-align: left"> <div class="para">
													Thread pool for standard Work instances. Each work manager has one short-running thread pool.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">long-running-threads</code> </td><td style="text-align: left"> <div class="para">
													Thread pool for JCA 1.6 Work instances that set the <code class="literal">LONG_RUNNING</code> hint. Each work manager can have one optional long-running thread pool.
												</div>
												 </td></tr></tbody></table></div></div></li><li class="listitem"><div class="para">
									The following table describes the attributes you can set for work manager thread pools.
								</div><div class="table"><a id="thread-pool-attributes">
      ⁠</a><p class="title"><strong>Table 22.4. Thread pool attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows" summary="Thread pool attributes"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">allow-core-timeout</code> </td><td style="text-align: left"> <div class="para">
													Boolean setting that determines whether core threads may time out. The default value is false.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">core-threads</code> </td><td style="text-align: left"> <div class="para">
													The core thread pool size. This must be equal to or smaller than the maximum thread pool size.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">queue-length</code> </td><td style="text-align: left"> <div class="para">
													The maximum queue length.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">max-thread</code> </td><td style="text-align: left"> <div class="para">
													The maximum thread pool size.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">keepalive-time</code> </td><td style="text-align: left"> <div class="para">
													Specifies the amount of time that pool threads should be kept after doing work.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">thread-factory</code> </td><td style="text-align: left"> <div class="para">
													Reference to the thread factory .
												</div>
												 </td></tr></tbody></table></div></div></li></ul></div></dd><dt><span class="term">Bootstrap contexts</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
									Used to define custom bootstrap contexts.
								</div></li><li class="listitem"><div class="para">
									The following table describes the attributes you can set for bootstrap contexts.
								</div><div class="table"><a id="bootstrap-context-attributes">
      ⁠</a><p class="title"><strong>Table 22.5. Bootstrap context attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows" summary="Bootstrap context attributes"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">name</code> </td><td style="text-align: left"> <div class="para">
													Specifies the name of the bootstrap context.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">workmanager</code> </td><td style="text-align: left"> <div class="para">
													Specifies the name of the work manager to use for this context.
												</div>
												 </td></tr></tbody></table></div></div></li></ul></div></dd><dt><span class="term">Cached connection manager</span></dt><dd><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
									Used for debugging connections and supporting lazy enlistment of a connection in a transaction, tracking whether they are used and released properly by the application.
								</div></li><li class="listitem"><div class="para">
									The following table describes the attributes you can set for the cached connection manager.
								</div><div class="table"><a id="cached-connection-manager-attributes">
      ⁠</a><p class="title"><strong>Table 22.6. Cached connection manager attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows" summary="Cached connection manager attributes"><colgroup><col width="20%" style="text-align: left" class="c1"/><col width="20%" style="text-align: left" class="c2"/><col width="60%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Default Value </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">debug</code> </td><td style="text-align: left"> false </td><td style="text-align: left"> <div class="para">
													Outputs warning on failure to explicitly close connections.
												</div>
												 </td></tr><tr><td style="text-align: left"> <code class="code">error</code> </td><td style="text-align: left"> false </td><td style="text-align: left"> <div class="para">
													Throws exception on failure to explicitly close connections.
												</div>
												 </td></tr></tbody></table></div></div></li></ul></div></dd></dl></div>

		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978479751520">
      ⁠</a><p class="title"><strong>Procedure 22.1. Configure the JCA subsystem using the Management Console</strong></p><div class="para">
			The JCA subsystem of JBoss EAP 6 can be configured in the Management Console. The JCA configuration options are located in slightly different places in the Management Console depending on how the server is being run.
		</div><ol class="1"><li class="step"><div class="para">
				Click on the <span class="guimenu"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Connector</strong></span> menu and select <span class="guimenu"><strong>JCA</strong></span>.
			</div></li><li class="step"><div class="para">
				If the server is running in Domain mode, select a profile from the <span class="guilabel"><strong>Profile</strong></span> drop-down menu at top left.
			</div></li><li class="step"><div class="para">
				Configure the settings for the JCA subsystem using the three tabs.
			</div><ol class="substeps a"><li class="step"><p class="title"><strong>Common Config</strong></p><div class="para">
						The <span class="guilabel"><strong>Common Config</strong></span> tab contains settings for the cached connection manager, archive validation and bean validation (JSR-303). Each of these is contained in their own tab as well. These settings can be changed by opening the appropriate tab, clicking the edit button, making the required changes, and then clicking on the save button.
					</div><div class="figure"><a id="idm139978475654368">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/5136.png" width="600" alt="JCA Common Configuration"/></div></div><p class="title"><strong>Figure 22.1. JCA Common Configuration</strong></p></div></li><li class="step"><p class="title"><strong>Work Managers</strong></p><div class="para">
						The <span class="guilabel"><strong>Work Manager</strong></span> tab contains the list of configured Work Managers. New Work Managers can be added, removed, and their thread pools configured here. Each Work Manager can have one short-running thread pool and an optional long-running thread pool.
					</div><div class="figure"><a id="idm139978520499648">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/5138.png" width="600" alt="Work Managers"/></div></div><p class="title"><strong>Figure 22.2. Work Managers</strong></p></div><div class="para">
						The thread pool attributes can be configured by clicking <span class="guibutton"><strong>View</strong></span> on the selected resource adapter.
					</div><div class="figure"><a id="idm139978450279872">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/5139.png" width="600" alt="Work Manager Thread Pools"/></div></div><p class="title"><strong>Figure 22.3. Work Manager Thread Pools</strong></p></div></li><li class="step"><p class="title"><strong>Bootstrap Contexts</strong></p><div class="para">
						The <span class="guilabel"><strong>Bootstrap Contexts</strong></span> tab contains the list of configured Bootstrap Contexts. New Bootstrap Context objects can be added, removed, and configured. Each Bootstrap Context must be assigned a Work Manager.
					</div><div class="figure"><a id="idm139978539802512">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/5137.png" width="600" alt="Bootstrap Contexts"/></div></div><p class="title"><strong>Figure 22.4. Bootstrap Contexts</strong></p></div></li></ol></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4518-748656+%5BLatest%5D&amp;comment=Title%3A+Configure+the+Java+Connector+Architecture+%28JCA%29+Subsystem%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4518-748656+25+Mar+2015+07%3A19+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Deploy_a_Resource_Adapter">
      ⁠</a>22.3. Deploy a Resource Adapter</h1></div></div></div><div class="para">
		Resource adapters can be deployed to JBoss EAP 6 using the Management CLI tool, the Web-based Management Console, or by manually copying the files. The process is the same as other deployable artifacts.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978456616192">
      ⁠</a><p class="title"><strong>Procedure 22.2. Deploy a resource adapter using the Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Open a command prompt for your operating system.
			</div></li><li class="step"><div class="para">
				Connect to the Management CLI.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For Linux, enter the following at the command line:
					</div><pre class="screen">
$ <em class="replaceable">EAP_HOME</em>/bin/jboss-cli.sh --connect
$ Connected to standalone controller at localhost:9999
</pre></li>
				 <li class="step"><div class="para">
						For Windows, enter the following at a command line:
					</div><pre class="screen">
C:\&gt;<em class="replaceable">EAP_HOME</em>\bin\jboss-cli.bat --connect
C:\&gt; Connected to standalone controller at localhost:9999
</pre></li>

			</ul></li><li class="step"><div class="para">
				Deploy the resource adapter.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						To deploy the resource adapter to a standalone server, enter the following at a command line:
					</div><pre class="screen">
$ deploy <em class="replaceable">path/to/resource-adapter-name.rar</em></pre></li>
				 <li class="step"><div class="para">
						To deploy the resource adapter to all server groups in a managed domain, enter the following at a command line:
					</div><pre class="screen">
$ deploy <em class="replaceable">path/to/resource-adapter-name.rar</em> --all-server-groups
</pre></li>

			</ul></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978448838368">
      ⁠</a><p class="title"><strong>Procedure 22.3. Deploy a resource adapter using the Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. See <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guilabel"><strong>Runtime</strong></span> tab at the top of the screen. Select <span class="guilabel"><strong>Manage Deployments</strong></span>.Click <span class="guibutton"><strong>Add</strong></span>.
			</div></li><li class="step"><div class="para">
				Browse to the resource adapter archive and select it. Then click <span class="guibutton"><strong>Next</strong></span>.
			</div></li><li class="step"><div class="para">
				Verify the deployment names, then click <span class="guibutton"><strong>Save</strong></span>.
			</div></li><li class="step"><div class="para">
				The resource adapter archive should now appear in the list in a disabled state.
			</div></li><li class="step"><div class="para">
				Enable the resource adapter.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						In Domain mode, click <span class="guibutton"><strong>Assign</strong></span>. Select which Server Groups to assign the resource adapter to. Click <span class="guibutton"><strong>Save</strong></span> to finish.
					</div></li>
				 <li class="step"><div class="para">
						In Standalone mode, select the Application Component from the list. Click <span class="guibutton"><strong>En/Disable</strong></span>. Click <span class="guibutton"><strong>Confirm</strong></span> on the <span class="guilabel"><strong>Are You Sure?</strong></span> dialog to enable the component.
					</div></li>

			</ul></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978523765040">
      ⁠</a><p class="title"><strong>Procedure 22.4. Deploy a resource adapter manually</strong></p><ul><li class="step"><div class="para">
				Copy the resource adapter archive to the server deployments directory,
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For a standalone server, copy the resource adapter archive to the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/deployments/</code> directory.
					</div></li>
				 <li class="step"><div class="para">
						For a managed domain, you must use the Management Console or Management CLI to deploy the resource adapter archive to the server groups.
					</div></li>

			</ul></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4522-715946+%5BLatest%5D&amp;comment=Title%3A+Deploy+a+Resource+Adapter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4522-715946+09+Oct+2014+23%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_a_Deployed_Resource_Adapter1">
      ⁠</a>22.4. Configure a Deployed Resource Adapter</h1></div></div></div><div class="para">
		JBoss administrators can configure resource adapters for JBoss EAP 6 using the Management CLI tool, the Web-based Management Console, or by manually editing the configuration the files.
	</div><div class="para">
		Refer to the vendor document for your resource adapter for information about supported properties and other details.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			In the following procedure, the command line you must type follows the <code class="literal">[standalone@localhost:9999 /]</code> prompt. Do not type the text within the curly braces. That is the output you should see as a result of the command, for example, <code class="literal">{"outcome" =&gt; "success"}</code>.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978533922608">
      ⁠</a><p class="title"><strong>Procedure 22.5. Configure a resource adapter using the Management CLI</strong></p><ol class="1"><li class="step"><div class="para">
				Open a command prompt for your operating system.
			</div></li><li class="step"><div class="para">
				Connect to the Management CLI.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For Linux, enter the following at the command line:
					</div><pre class="screen">$ <em class="replaceable">EAP_HOME</em>/bin/jboss-cli.sh --connect</pre><div class="para">
						You should see the following result output:
					</div><pre class="screen">$ Connected to standalone controller at localhost:9999</pre></li>
				 <li class="step"><div class="para">
						For Windows, enter the following at a command line:
					</div><pre class="screen">C:\&gt;<em class="replaceable">EAP_HOME</em>\bin\jboss-cli.bat --connect</pre><div class="para">
						You should see the following result output:
					</div><pre class="screen">C:\&gt; Connected to standalone controller at localhost:9999</pre></li>

			</ul></li><li class="step"><div class="para">
				Add the resource adapter configuration.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar:add(archive=eis.rar, transaction-support=XATransaction) 
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Configure the <code class="literal">server</code> resource adapter level &lt;config-property&gt;.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar/config-properties=server/:add(value=localhost)          
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Configure the <code class="literal">port</code> resource adapter level &lt;config-property&gt;.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar/config-properties=port/:add(value=9000)
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Add a connection definition for a managed connection factory.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar/connection-definitions=cfName:add(class-name=com.acme.eis.ra.EISManagedConnectionFactory, jndi-name=java:/eis/AcmeConnectionFactory)
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Configure the <code class="literal">name</code> managed connection factory level &lt;config-property&gt;.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar/connection-definitions=cfName/config-properties=name/:add(value=Acme Inc)
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Add an admin object.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar/admin-objects=aoName:add(class-name=com.acme.eis.ra.EISAdminObjectImpl, jndi-name=java:/eis/AcmeAdminObject)
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Configure the <code class="literal">threshold</code> admin object property.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar/admin-objects=aoName/config-properties=threshold/:add(value=10)
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				Activate the resource adapter.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar:activate
{"outcome" =&gt; "success"}
</pre></li><li class="step"><div class="para">
				View the newly configured and activated resource adapter.
			</div><pre class="screen">
[standalone@localhost:9999 /] /subsystem=resource-adapters/resource-adapter=eis.rar:read-resource(recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "archive" =&gt; "eis.rar",
        "beanvalidationgroups" =&gt; undefined,
        "bootstrap-context" =&gt; undefined,
        "transaction-support" =&gt; "XATransaction",
        "admin-objects" =&gt; {"aoName" =&gt; {
            "class-name" =&gt; "com.acme.eis.ra.EISAdminObjectImpl",
            "enabled" =&gt; true,
            "jndi-name" =&gt; "java:/eis/AcmeAdminObject",
            "use-java-context" =&gt; true,
            "config-properties" =&gt; {"threshold" =&gt; {"value" =&gt; 10}}
        }},
        "config-properties" =&gt; {
            "server" =&gt; {"value" =&gt; "localhost"},
            "port" =&gt; {"value" =&gt; 9000}
        },
        "connection-definitions" =&gt; {"cfName" =&gt; {
            "allocation-retry" =&gt; undefined,
            "allocation-retry-wait-millis" =&gt; undefined,
            "background-validation" =&gt; false,
            "background-validation-millis" =&gt; undefined,
            "blocking-timeout-wait-millis" =&gt; undefined,
            "class-name" =&gt; "com.acme.eis.ra.EISManagedConnectionFactory",
            "enabled" =&gt; true,
            "flush-strategy" =&gt; "FailingConnectionOnly",
            "idle-timeout-minutes" =&gt; undefined,
            "interleaving" =&gt; false,
            "jndi-name" =&gt; "java:/eis/AcmeConnectionFactory",
            "max-pool-size" =&gt; 20,
            "min-pool-size" =&gt; 0,
            "no-recovery" =&gt; undefined,
            "no-tx-separate-pool" =&gt; false,
            "pad-xid" =&gt; false,
            "pool-prefill" =&gt; false,
            "pool-use-strict-min" =&gt; false,
            "recovery-password" =&gt; undefined,
            "recovery-plugin-class-name" =&gt; undefined,
            "recovery-plugin-properties" =&gt; undefined,
            "recovery-security-domain" =&gt; undefined,
            "recovery-username" =&gt; undefined,
            "same-rm-override" =&gt; undefined,
            "security-application" =&gt; undefined,
            "security-domain" =&gt; undefined,
            "security-domain-and-application" =&gt; undefined,
            "use-ccm" =&gt; true,
            "use-fast-fail" =&gt; false,
            "use-java-context" =&gt; true,
            "use-try-lock" =&gt; undefined,
            "wrap-xa-resource" =&gt; true,
            "xa-resource-timeout" =&gt; undefined,
            "config-properties" =&gt; {"name" =&gt; {"value" =&gt; "Acme Inc"}}
        }}
    }
}
</pre></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978501836416">
      ⁠</a><p class="title"><strong>Procedure 22.6. Configure a resource adapter using the Web-based Management Console</strong></p><ol class="1"><li class="step"><div class="para">
				Login to the Management Console. See <a class="xref" href="chap-Management_Interfaces.html#Log_in_to_the_Management_Console">Section 3.3.2, “Log in to the Management Console”</a>.
			</div></li><li class="step"><div class="para">
				Click on the <span class="guilabel"><strong>Configuration</strong></span> tab at the top of the screen. Expand the <span class="guimenu"><strong>Connectors</strong></span> menu and select <span class="guilabel"><strong>Resource Adapters</strong></span>.
			</div><ol class="substeps a"><li class="step"><div class="para">
						In Domain mode, select a <span class="guilabel"><strong>Profile</strong></span> from the drop-down at top left.
					</div></li></ol><div class="para">
				Click <span class="guibutton"><strong>Add</strong></span>.
			</div></li><li class="step"><div class="para">
				Enter the archive name and choose transaction type <code class="literal">XATransaction</code> from the <span class="guilabel"><strong>TX:</strong></span> drop-down box. Then click <span class="guibutton"><strong>Save</strong></span>.
			</div></li><li class="step"><div class="para">
				Select the <span class="guilabel"><strong>Properties</strong></span> tab. Click <span class="guibutton"><strong>Add</strong></span>.
			</div></li><li class="step"><div class="para">
				Enter <code class="literal">server</code> for the <span class="guilabel"><strong>Name</strong></span> and the host name, for example <code class="literal">localhost</code>, for the <span class="guilabel"><strong>Value</strong></span>. Then click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li><li class="step"><div class="para">
				Click <span class="guibutton"><strong>Add</strong></span> again. Enter <code class="literal">port</code> for the <span class="guilabel"><strong>Name</strong></span> and the port number, for example <code class="literal">9000</code>, for the <span class="guilabel"><strong>Value</strong></span>. Then click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li><li class="step"><div class="para">
				The <code class="literal">server</code> and <code class="literal">port</code> properties now appear in the <span class="guilabel"><strong>Properties</strong></span> panel. Click the <span class="guilabel"><strong>View</strong></span> link under the <span class="guilabel"><strong>Option</strong></span> column for the listed resource adapter to view the <span class="guilabel"><strong>Connection Definitions</strong></span>.
			</div></li><li class="step"><div class="para">
				Click <span class="guilabel"><strong>Add</strong></span> above the <span class="guilabel"><strong>Available Connection Definitions</strong></span> table to add a connection definition.
			</div></li><li class="step"><div class="para">
				Enter the <span class="guilabel"><strong>JNDI Name</strong></span> and the fully qualified class name of the <span class="guilabel"><strong>Connection Class</strong></span>. Then click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li><li class="step"><div class="para">
				Select the new Connection Definition, the select the <span class="guilabel"><strong>Properties</strong></span> tab. Click <span class="guibutton"><strong>Add</strong></span> to enter the <span class="guilabel"><strong>Key</strong></span> and <span class="guilabel"><strong>Value</strong></span> data for this connection definition. Click <span class="guibutton"><strong>Save</strong></span> to finish.
			</div></li><li class="step"><div class="para">
				The connection definition is complete, but disabled. Select the connection definition and click <span class="guibutton"><strong>Enable</strong></span> to enable the connection definition.
			</div></li><li class="step"><div class="para">
				A dialog asks <code class="literal">Really modify Connection Definition?</code>" for the JNDI name. Click <span class="guibutton"><strong>Confirm</strong></span>. The connection definition should now appear as <code class="literal">Enabled</code>.
			</div></li><li class="step"><div class="para">
				Click the <span class="guilabel"><strong>Admin Objects</strong></span> tab at the top of the page to create and configure admin objects. Then click <span class="guibutton"><strong>Add</strong></span>.
			</div></li><li class="step"><div class="para">
				Enter the <span class="guilabel"><strong>JNDI Name</strong></span> and the fully qualified <span class="guilabel"><strong>Class Name</strong></span> for the admin object. Then click <span class="guibutton"><strong>Save</strong></span>.
			</div></li><li class="step"><div class="para">
				Select the <span class="guilabel"><strong>Properties</strong></span> tab, then click <span class="guibutton"><strong>Add</strong></span> to add admin object properties.
			</div></li><li class="step"><div class="para">
				Enter an admin object configuration property, for example <code class="literal">threshold</code>, in the <span class="guilabel"><strong>Name</strong></span> field. Enter the configuration property value, for example <code class="literal">10</code>, in the <span class="guilabel"><strong>Value</strong></span> field. Then click <span class="guibutton"><strong>Save</strong></span> to save the property.
			</div></li><li class="step"><div class="para">
				The admin object is complete, but disabled. Click <span class="guibutton"><strong>Enable</strong></span> to enable the admin object.
			</div></li><li class="step"><div class="para">
				A dialog asks <code class="literal">Really modify Admin Ojbect?</code> for the JNDI name. Click <span class="guibutton"><strong>Confirm</strong></span>. The admin object should now appear as <code class="literal">Enabled</code>.
			</div></li><li class="step"><div class="para">
				You must reload the server configuration to complete the process. Click on the <span class="guilabel"><strong>Runtime</strong></span> tab. Expand the <span class="guimenu"><strong>Server</strong></span> menu. Select <span class="guilabel"><strong>Overview</strong></span> in the left navigation panel.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Reload the servers
					</div><ul class="stepalternatives">
						<li class="step"><div class="para">
								In Domain mode, hover the mouse over a server group. Select <span class="guilabel"><strong>Restart Group</strong></span>.
							</div></li>
						 <li class="step"><div class="para">
								In Standalone mode, a <span class="guibutton"><strong>Reload</strong></span> button will be available. Click <span class="guibutton"><strong>Reload</strong></span>.
							</div></li>

					</ul></li></ol></li><li class="step"><div class="para">
				A dialog asks <code class="literal">Do you want to reload the server configuration?</code> for the specified server. Click <span class="guibutton"><strong>Confirm</strong></span>. The server configuration is up to date.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978453296528">
      ⁠</a><p class="title"><strong>Procedure 22.7. Configure a resource adapter manually</strong></p><ol class="1"><li class="step"><div class="para">
				Stop the JBoss EAP 6 server.
			</div><div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
					You must stop the server before editing the server configuration file for your change to be persisted on server restart.
				</div></div></div></li><li class="step"><div class="para">
				Open the server configuration file for editing.
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						For a standalone server, this is the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code> file.
					</div></li>
				 <li class="step"><div class="para">
						For a managed domain, this is the <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> file.
					</div></li>

			</ul></li><li class="step"><div class="para">
				Find the <code class="code">urn:jboss:domain:resource-adapters</code> subsystem in the configuration file.
			</div></li><li class="step"><div class="para">
				If there are no resource adapters defined for this subsystem, first replace: 
<pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:resource-adapters:1.1"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
</pre>
				 with this: 
<pre class="programlisting"><span xmlns="" class="line">​</span>                  
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:resource-adapters:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapters&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">&lt;!-- &lt;resource-adapter&gt; configuration listed below --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/resource-adapters&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span>
<span xmlns="" class="line">​</span>
</pre>

			</div></li><li class="step"><div class="para">
				Replace the <code class="code">&lt;!-- &lt;resource-adapter&gt; configuration listed below --&gt;</code> with the XML definition for your resource adapter. The following is the XML representation of the resource adapter configuration created using the Management CLI and Web-based Management Console described above. 
<pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;resource-adapter</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>
<span xmlns="" class="line">​</span>        eis.rar
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>XATransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"server"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        localhost
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"port"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        9000
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;connection-definition</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"com.acme.eis.ra.EISManagedConnectionFactory"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:/eis/AcmeConnectionFactory"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                pool-name=</span><span xmlns="" class="perl_String">"java:/eis/AcmeConnectionFactory"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"name"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                Acme Inc
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;admin-objects&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;admin-object</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"com.acme.eis.ra.EISAdminObjectImpl"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:/eis/AcmeAdminObject"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                pool-name=</span><span xmlns="" class="perl_String">"java:/eis/AcmeAdminObject"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"threshold"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                10
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/admin-object&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/admin-objects&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>
</pre>

			</div></li><li class="step"><p class="title"><strong>Start the server</strong></p><div class="para">
				Relaunch the JBoss EAP 6 server to start it running with the new configuration.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+4521-764017+%5BLatest%5D&amp;comment=Title%3A+Configure+a+Deployed+Resource+Adapter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4521-764017+06+Jul+2015+19%3A59+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Resource_Adapter_Descriptor_Reference1">
      ⁠</a>22.5. Resource Adapter Descriptor Reference</h1></div></div></div><div class="para">
		The following tables describe the resource adapter descriptor elements.
	</div><div class="table"><a id="idm139978516748320">
      ⁠</a><p class="title"><strong>Table 22.7. Main elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Main elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">bean-validation-groups</code> </td><td style="text-align: left"> Specifies bean validation group that should be used </td></tr><tr><td style="text-align: left"> <code class="code">bootstrap-context</code> </td><td style="text-align: left"> Specifies the unique name of the bootstrap context that should be used </td></tr><tr><td style="text-align: left"> <code class="code">config-property</code> </td><td style="text-align: left"> The config-property specifies resource adapter configuration properties. </td></tr><tr><td style="text-align: left"> <code class="code">transaction-support</code> </td><td style="text-align: left"> Define the type of transaction supported by this resource adapter. Valid values are: <code class="literal">NoTransaction</code>, <code class="literal">LocalTransaction</code>, <code class="literal">XATransaction</code> </td></tr><tr><td style="text-align: left"> <code class="code">connection-definitions</code> </td><td style="text-align: left"> Specifies the connection definitions </td></tr><tr><td style="text-align: left"> <code class="code">admin-objects</code> </td><td style="text-align: left"> Specifies the administration objects </td></tr></tbody></table></div></div><div class="table"><a id="idm139978441627760">
      ⁠</a><p class="title"><strong>Table 22.8. Bean validation groups elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Bean validation groups elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">bean-validation-group</code> </td><td style="text-align: left"> Specifies the fully qualified class name for a bean validation group that should be used for validation </td></tr></tbody></table></div></div><div class="table"><a id="idm139978473789376">
      ⁠</a><p class="title"><strong>Table 22.9. Connection definition / admin object attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Connection definition / admin object attributes"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">class-name</code> </td><td style="text-align: left"> Specifies the fully qualified class name of a managed connection factory or admin object </td></tr><tr><td style="text-align: left"> <code class="code">jndi-name</code> </td><td style="text-align: left"> Specifies the JNDI name </td></tr><tr><td style="text-align: left"> <code class="code">enabled</code> </td><td style="text-align: left"> Should the object be activated </td></tr><tr><td style="text-align: left"> <code class="code">use-java-context</code> </td><td style="text-align: left"> Specifies if a <code class="literal">java:/</code> JNDI context should be used </td></tr><tr><td style="text-align: left"> <code class="code">pool-name</code> </td><td style="text-align: left"> Specifies the pool name for the object </td></tr><tr><td style="text-align: left"> <code class="code">use-ccm</code> </td><td style="text-align: left"> Enable the cached connection manager </td></tr></tbody></table></div></div><div class="table"><a id="idm139978455971120">
      ⁠</a><p class="title"><strong>Table 22.10. Connection definition elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Connection definition elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">config-property</code> </td><td style="text-align: left"> The config-property specifies managed connection factory configuration properties. </td></tr><tr><td style="text-align: left"> <code class="code">pool</code> </td><td style="text-align: left"> Specifies pooling settings </td></tr><tr><td style="text-align: left"> <code class="code">xa-pool</code> </td><td style="text-align: left"> Specifies XA pooling settings </td></tr><tr><td style="text-align: left"> <code class="code">security</code> </td><td style="text-align: left"> Specifies security settings </td></tr><tr><td style="text-align: left"> <code class="code">timeout</code> </td><td style="text-align: left"> Specifies time out settings </td></tr><tr><td style="text-align: left"> <code class="code">validation</code> </td><td style="text-align: left"> Specifies validation settings </td></tr><tr><td style="text-align: left"> <code class="code">recovery</code> </td><td style="text-align: left"> Specifies the XA recovery settings </td></tr></tbody></table></div></div><div class="table"><a id="idm139978506352192">
      ⁠</a><p class="title"><strong>Table 22.11. Pool elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Pool elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">min-pool-size</code> </td><td style="text-align: left"> The min-pool-size element indicates the minimum number of connections a pool should hold. These are not created until a Subject is known from a request for a connection. This default to 0 </td></tr><tr><td style="text-align: left"> <code class="code">max-pool-size</code> </td><td style="text-align: left"> The max-pool-size element indicates the maximum number of connections for a pool. No more than max-pool-size connections will be created in each sub-pool. This defaults to <code class="literal">20</code>. </td></tr><tr><td style="text-align: left"> <code class="code">prefill</code> </td><td style="text-align: left"> Whether to attempt to prefill the connection pool. Default is <code class="literal">false</code> </td></tr><tr><td style="text-align: left"> <code class="code">use-strict-min</code> </td><td style="text-align: left"> Specifies if the min-pool-size should be considered strictly. Default <code class="literal">false</code> </td></tr><tr><td style="text-align: left"> <code class="code">flush-strategy</code> </td><td style="text-align: left"> Specifies how the pool should be flush in case of an error. Valid values are: <code class="literal">FailingConnectionOnly</code> (default), <code class="literal">IdleConnections</code>, <code class="literal">EntirePool</code> </td></tr></tbody></table></div></div><div class="table"><a id="idm139978468790496">
      ⁠</a><p class="title"><strong>Table 22.12. XA pool elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="XA pool elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">min-pool-size</code> </td><td style="text-align: left"> The min-pool-size element indicates the minimum number of connections a pool should hold. These are not created until a Subject is known from a request for a connection. This default to <code class="literal">0</code> </td></tr><tr><td style="text-align: left"> <code class="code">max-pool-size</code> </td><td style="text-align: left"> The max-pool-size element indicates the maximum number of connections for a pool. No more than max-pool-size connections will be created in each sub-pool. This defaults to <code class="literal">20</code>. </td></tr><tr><td style="text-align: left"> <code class="code">prefill</code> </td><td style="text-align: left"> Whether to attempt to prefill the connection pool. Default is <code class="literal">false</code> </td></tr><tr><td style="text-align: left"> <code class="code">use-strict-min</code> </td><td style="text-align: left"> Specifies if the min-pool-size should be considered strictly. Default <code class="literal">false</code> </td></tr><tr><td style="text-align: left"> <code class="code">flush-strategy</code> </td><td style="text-align: left"> Specifies how the pool should be flush in case of an error. Valid values are: <code class="literal">FailingConnectionOnly</code> (default), <code class="literal">IdleConnections</code>, <code class="literal">EntirePool</code> </td></tr><tr><td style="text-align: left"> <code class="code">is-same-rm-override</code> </td><td style="text-align: left"> The is-same-rm-override element allows one to unconditionally set whether the javax.transaction.xa.XAResource.isSameRM(XAResource) returns <code class="literal">true</code> or <code class="literal">false</code> </td></tr><tr><td style="text-align: left"> <code class="code">interleaving</code> </td><td style="text-align: left"> An element to enable interleaving for XA connection factories </td></tr><tr><td style="text-align: left"> <code class="code">no-tx-separate-pools</code> </td><td style="text-align: left"> Oracle does not like XA connections getting used both inside and outside a JTA transaction. To workaround the problem you can create separate sub-pools for the different contexts </td></tr><tr><td style="text-align: left"> <code class="code">pad-xid</code> </td><td style="text-align: left"> Should the Xid be padded </td></tr><tr><td style="text-align: left"> <code class="code">wrap-xa-resource</code> </td><td style="text-align: left"> Should the XAResource instances be wrapped in a org.jboss.tm.XAResourceWrapper instance </td></tr></tbody></table></div></div><div class="table"><a id="idm139978543036560">
      ⁠</a><p class="title"><strong>Table 22.13. Security elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Security elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">application</code> </td><td style="text-align: left"> Indicates that application supplied parameters (such as from <code class="literal">getConnection(user, pw)</code>) are used to distinguish connections in the pool. </td></tr><tr><td style="text-align: left"> <code class="code">security-domain</code> </td><td style="text-align: left"> Indicates Subject (from security domain) are used to distinguish connections in the pool. The content of the security-domain is the name of the JAAS security manager that will handle authentication. This name correlates to the JAAS <code class="filename">login-config.xml</code> descriptor application-policy/name attribute. </td></tr><tr><td style="text-align: left"> <code class="code">security-domain-and-application</code> </td><td style="text-align: left"> Indicates that either application supplied parameters (such as from <code class="literal">getConnection(user, pw)</code>) or Subject (from security domain) are used to distinguish connections in the pool. The content of the security-domain is the name of the JAAS security manager that will handle authentication. This name correlates to the JAAS <code class="filename">login-config.xml</code> descriptor application-policy/name attribute. </td></tr></tbody></table></div></div><div class="table"><a id="idm139978534115744">
      ⁠</a><p class="title"><strong>Table 22.14. Time out elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Time out elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">blocking-timeout-millis</code> </td><td style="text-align: left"> The blocking-timeout-millis element indicates the maximum time in milliseconds to block while waiting for a connection before throwing an exception. Note that this blocks only while waiting for a permit for a connection, and will never throw an exception if creating a new connection takes an inordinately long time. The default is <code class="literal">30000</code> (30 seconds). </td></tr><tr><td style="text-align: left"> <code class="code">idle-timeout-minutes</code> </td><td style="text-align: left"> The idle-timeout-minutes elements indicates the maximum time in minutes a connection may be idle before being closed. The actual maximum time depends also on the IdleRemover scan time, which is 1/2 the smallest idle-timeout-minutes of any pool. </td></tr><tr><td style="text-align: left"> <code class="code">allocation-retry</code> </td><td style="text-align: left"> The allocation retry element indicates the number of times that allocating a connection should be tried before throwing an exception. The default is <code class="literal">0</code>. </td></tr><tr><td style="text-align: left"> <code class="code">allocation-retry-wait-millis</code> </td><td style="text-align: left"> The allocation retry wait millis element indicates the time in milliseconds to wait between retrying to allocate a connection. The default is <code class="literal">5000</code> (5 seconds). </td></tr><tr><td style="text-align: left"> <code class="code">xa-resource-timeout</code> </td><td style="text-align: left"> Passed to <code class="methodname">XAResource.setTransactionTimeout()</code>. Default is zero which does not invoke the setter. Specified in seconds </td></tr></tbody></table></div></div><div class="table"><a id="idm139978448066720">
      ⁠</a><p class="title"><strong>Table 22.15. Validation elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Validation elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">background-validation</code> </td><td style="text-align: left"> An element to specify that connections should be validated on a background thread versus being validated prior to use </td></tr><tr><td style="text-align: left"> <code class="code">background-validation-minutes</code> </td><td style="text-align: left"> The background-validation-minutes element specifies the amount of time, in minutes, that background validation will run. </td></tr><tr><td style="text-align: left"> <code class="code">use-fast-fail</code> </td><td style="text-align: left"> Whether fail a connection allocation on the first connection if it is invalid (true) or keep trying until the pool is exhausted of all potential connections (false). Default is <code class="literal">false</code> </td></tr></tbody></table></div></div><div class="table"><a id="idm139978513886096">
      ⁠</a><p class="title"><strong>Table 22.16. Admin object elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Admin object elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">config-property</code> </td><td style="text-align: left"> Specifies an administration object configuration property. </td></tr></tbody></table></div></div><div class="table"><a id="idm139978527033664">
      ⁠</a><p class="title"><strong>Table 22.17. Recovery elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Recovery elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="60%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Element </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">recover-credential</code> </td><td style="text-align: left"> Specifies the user name / password pair or security domain that should be used for recovery. </td></tr><tr><td style="text-align: left"> <code class="code">recover-plugin</code> </td><td style="text-align: left"> Specifies an implementation of the org.jboss.jca.core.spi.recovery.RecoveryPlugin class. </td></tr></tbody></table></div></div><div class="para">
		The deployment schemas are defined in <code class="filename">jboss-as-resource-adapters_1_0.xsd</code> and <a href="http://www.ironjacamar.org/doc/schema/ironjacamar_1_0.xsd">http://www.ironjacamar.org/doc/schema/ironjacamar_1_0.xsd</a> for automatic activation.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8984-591858+%5BLatest%5D&amp;comment=Title%3A+Resource+Adapter+Descriptor+Reference%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8984-591858+23+Feb+2014+16%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="View_Defined_Connection_Statistics">
      ⁠</a>22.6. View Defined Connection Statistics</h1></div></div></div><div class="para">
		You can read statistics for a defined connection from the <code class="literal">deployment=name.rar</code> subtree.
	</div><div class="para">
		Statistics are defined at this level and not at the <code class="literal">/subsystem</code> level as this ensures they are accessible for any <code class="literal">rar</code> that is not defined in any configuration in the <code class="filename">standalone.xml</code> or <code class="filename">domain.xml</code> files.
	</div><div class="para">
		For example:
	</div><div class="example"><a id="idm139978456057424">
      ⁠</a><p class="title"><strong>Example 22.1. View Defined Connection Statistics</strong></p><div class="example-contents"><pre class="programlisting">/deployment=<em class="replaceable">example.rar</em>/subsystem=resource-adapters/statistics=statistics/connection-definitions=java\:\/testMe:read-resource(include-runtime=true)
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Ensure you specify the <em class="parameter"><code>include-runtime=true</code></em> argument, as all statistics are runtime only information and the default is <code class="literal">false</code>.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+13920-763408+%5BLatest%5D&amp;comment=Title%3A+View+Defined+Connection+Statistics%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13920-763408+29+Jun+2015+23%3A45+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Resource_Adapter_Statistics">
      ⁠</a>22.7. Resource Adapter Statistics</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Core Statistics</div>
			The following table contains a list of the supported resource adapter core statistics:
		</div><div class="table"><a id="table-resource-adapter-core-statistics">
      ⁠</a><p class="title"><strong>Table 22.18. Core Statistics</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="Core Statistics"><colgroup><col width="25%" style="text-align: left" class="c1"/><col width="75%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Name </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">ActiveCount</code> </td><td style="text-align: left"> <div class="para">
						The number of active connections. Each of the connections is either in use by an application or available in the pool
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">AvailableCount</code> </td><td style="text-align: left"> <div class="para">
						The number of available connections in the pool.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">AverageBlockingTime</code> </td><td style="text-align: left"> <div class="para">
						The average time spent blocking on obtaining an exclusive lock on the pool. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">AverageCreationTime</code> </td><td style="text-align: left"> <div class="para">
						The average time spent creating a connection. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">CreatedCount</code> </td><td style="text-align: left"> <div class="para">
						The number of connections created.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">DestroyedCount</code> </td><td style="text-align: left"> <div class="para">
						The number of connections destroyed.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">InUseCount</code> </td><td style="text-align: left"> <div class="para">
						The number of connections currently in use.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxCreationTime</code> </td><td style="text-align: left"> <div class="para">
						The maximum time it took to create a connection. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxUsedCount</code> </td><td style="text-align: left"> <div class="para">
						The maximum number of connections used.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxWaitCount</code> </td><td style="text-align: left"> <div class="para">
						The maximum number of requests waiting for a connection at the same time.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">MaxWaitTime</code> </td><td style="text-align: left"> <div class="para">
						The maximum time spent waiting for an exclusive lock on the pool.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">TimedOut</code> </td><td style="text-align: left"> <div class="para">
						The number of timed out connections.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">TotalBlockingTime</code> </td><td style="text-align: left"> <div class="para">
						The total time spent waiting for an exclusive lock on the pool. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">TotalCreationTime</code> </td><td style="text-align: left"> <div class="para">
						The total time spent creating connections. The value is in milliseconds.
					</div>
					 </td></tr><tr><td style="text-align: left"> <code class="code">WaitCount</code> </td><td style="text-align: left"> <div class="para">
						The number of requests that had to wait for a connection.
					</div>
					 </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+13780-592086+%5BLatest%5D&amp;comment=Title%3A+Resource+Adapter+Statistics%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=13780-592086+23+Feb+2014+16%3A57+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Deploy_the_WebSphere_MQ_Resource_Adapter">
      ⁠</a>22.8. Deploy the WebSphere MQ Resource Adapter</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">About WebSphere MQ</div>
			WebSphere MQ is IBM's Messaging Oriented Middleware (MOM) software that allows applications on distributed systems to communicate with each other. This is accomplished through the use of messages and message queues. WebSphere MQ is responsible for delivering messages to the message queues and for transferring data to other queue managers using message channels. For more information about WebSphere MQ, see <a href="http://www-01.ibm.com/software/integration/wmq/">WebSphere MQ</a>.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps to deploy and configure the WebSphere MQ Resource Adapter in Red Hat JBoss Enterprise Application Platform 6. This can be accomplished by manually editing configuration files, using the Management CLI tool, or using the web-based Management Console.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			There is a known issue in WebSphere MQ Resource Adapter version 7.5.0.3 and earlier that causes periodic recovery to fail with an XA exception with messages similar to the following in the JBoss EAP server log: 
<pre class="screen">WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016027: Local XARecoveryModule.xaRecovery got XA exception XAException.XAER_INVAL: javax.transaction.xa.XAException: The method 'xa_recover' has failed with errorCode '-5'.</pre>
			 A fix is available in version 7.5.0.4. A detailed description of this issue can be found here: <a href="http://www-01.ibm.com/support/docview.wss?uid=swg1IC97579">http://www-01.ibm.com/support/docview.wss?uid=swg1IC97579</a>.
		</div><div class="para">
			Be aware that WebSphere MQ 8.0 and above is not supported in EAP 6.x.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Prerequisites</div>
			Before you get started, you must verify the version of the WebSphere MQ resource adapter and understand some of the WebSphere MQ configuration properties.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				The WebSphere MQ resource adapter is supplied as a Resource Archive (RAR) file called <code class="filename">wmq.jmsra-<em class="replaceable">VERSION</em>.rar</code>. You must use version 7.5.0.<em class="replaceable">x</em>. See the note above for information about the required version.
			</div></li><li class="listitem"><div class="para">
				You must know the values of the following WebSphere MQ configuration properties. Refer to the WebSphere MQ product documentation for details about these properties. 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							MQ.QUEUE.MANAGER: The name of the WebSphere MQ queue manager
						</div></li><li class="listitem"><div class="para">
							MQ.HOST.NAME: The host name used to connect to the WebSphere MQ queue manager
						</div></li><li class="listitem"><div class="para">
							MQ.CHANNEL.NAME: The server channel used to connect to the WebSphere MQ queue manager
						</div></li><li class="listitem"><div class="para">
							MQ.QUEUE.NAME: The name of the destination queue
						</div></li><li class="listitem"><div class="para">
							MQ.TOPIC.NAME: The name of the destination topic
						</div></li><li class="listitem"><div class="para">
							MQ.PORT: The port used to connect to the WebSphere MQ queue manager
						</div></li><li class="listitem"><div class="para">
							MQ.CLIENT: The transport type
						</div></li></ul></div>

			</div></li><li class="listitem"><div class="para">
				For outbound connections, you must also be familiar with the following configuration property: 
				<div class="itemizedlist"><ul><li class="listitem"><div class="para">
							MQ.CONNECTIONFACTORY.NAME: The name of the connection factory instance that will provide the connection to the remote system
						</div></li></ul></div>

			</div></li></ul></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				The following are default configurations provided by IBM and are subject to change. Please refer to WebSphere MQ documentation for more information.
			</div></div></div>

	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978544792608">
      ⁠</a><p class="title"><strong>Procedure 22.8. Deploy the Resource Adapter Manually</strong></p><ol class="1"><li class="step"><div class="para">
				Copy the <code class="filename">wmq.jmsra-<em class="replaceable">VERSION</em>.rar</code> file to the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/deployments/</code> directory.
			</div></li><li class="step"><div class="para">
				Add the resource adapter to the server configuration file.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Open the <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full.xml</code> file in an editor.
					</div></li><li class="step"><div class="para">
						Find the <code class="code">urn:jboss:domain:resource-adapters</code> subsystem in the configuration file.
					</div></li><li class="step"><div class="para">
						If there are no resource adapters defined for this subsystem, first replace: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:resource-adapters:1.1"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre>
						 with this: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subsystem</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:domain:resource-adapters:1.1"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapters&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">&lt;!-- &lt;resource-adapter&gt; configuration listed below --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/resource-adapters&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subsystem&gt;</span></pre>

					</div></li><li class="step"><div class="para">
						The resource adapter configuration depends on whether you need transaction support and recovery. If you do not need transaction support, choose the first configuration step below. If you do need transaction support, choose the second configuration step. In both examples, the <code class="literal">config-property</code> <code class="literal">name</code> elements are case sensitive, and must be entered as seen in the example.
					</div><ul class="stepalternatives">
						<li class="step"><div class="para">
								For non-transactional deployments, replace the <code class="code">&lt;!-- &lt;resource-adapter&gt; configuration listed below --&gt;</code> with the following: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>
<span xmlns="" class="line">​</span>        wmq.jmsra-VERSION.rar
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>NoTransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;connection-definition</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                class-name=</span><span xmlns="" class="perl_String">"com.ibm.mq.connector.outbound.ManagedConnectionFactoryImpl"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/MQ.CONNECTIONFACTORY.NAME"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                pool-name=</span><span xmlns="" class="perl_String">"MQ.CONNECTIONFACTORY.NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"hostName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.HOST.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"port"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.PORT
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"channel"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.CHANNEL.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"transportType"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.CLIENT
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"queueManager"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.MANAGER
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;security-domain&gt;</span>MySecurityDomain<span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;admin-objects&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;admin-object</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                class-name=</span><span xmlns="" class="perl_String">"com.ibm.mq.connector.outbound.MQQueueProxy"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/MQ.QUEUE.NAME"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                pool-name=</span><span xmlns="" class="perl_String">"MQ.QUEUE.NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"baseQueueName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"baseQueueManagerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.MANAGER
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/admin-object&gt;</span>  
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;admin-object</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"com.ibm.mq.connector.outbound.MQTopicProxy"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/MQ.TOPIC.NAME"</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"MQ.TOPIC.NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"baseTopicName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.TOPIC.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"brokerPubQueueManager"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.MANAGER
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/admin-object&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/admin-objects&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span></pre>
								 Be sure to replace the <em class="replaceable">VERSION</em> with the actual version in the name of the RAR.
							</div></li>
						 <li class="step"><div class="para">
								For transactional deployments, replace the <code class="code">&lt;!-- &lt;resource-adapter&gt; configuration listed below --&gt;</code> with the following: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;resource-adapter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>
<span xmlns="" class="line">​</span>        wmq.jmsra-VERSION.rar
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>XATransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;connection-definition</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                class-name=</span><span xmlns="" class="perl_String">"com.ibm.mq.connector.outbound.ManagedConnectionFactoryImpl"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/MQ.CONNECTIONFACTORY.NAME"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                pool-name=</span><span xmlns="" class="perl_String">"MQ.CONNECTIONFACTORY.NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"hostName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.HOST.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"port"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.PORT
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"channel"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.CHANNEL.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"transportType"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.CLIENT
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"queueManager"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.MANAGER
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;security-domain&gt;</span>MySecurityDomain<span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;recovery&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;recover-credential&gt;</span>
<span xmlns="" class="line">​</span>             	<span xmlns="" class="perl_Keyword">&lt;security-domain&gt;</span>RECOVERY_SECURITY_DOMAIN<span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;/recover-credential&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/recovery&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;admin-objects&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;admin-object</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                class-name=</span><span xmlns="" class="perl_String">"com.ibm.mq.connector.outbound.MQQueueProxy"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/MQ.QUEUE.NAME"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                pool-name=</span><span xmlns="" class="perl_String">"MQ.QUEUE.NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"baseQueueName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"baseQueueManagerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.MANAGER
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/admin-object&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;admin-object</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"com.ibm.mq.connector.outbound.MQTopicProxy"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                jndi-name=</span><span xmlns="" class="perl_String">"java:jboss/MQ.TOPIC.NAME"</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"MQ.TOPIC.NAME"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"baseTopicName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.TOPIC.NAME
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"brokerPubQueueManager"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                MQ.QUEUE.MANAGER
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/admin-object&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/admin-objects&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span></pre>
								 Be sure to replace the <em class="replaceable">VERSION</em> with the actual version in the name of the RAR. You must also replace the <em class="replaceable">USER_NAME</em> and <em class="replaceable">PASSWORD</em> with the valid user name and password. 
								<div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
										To support transactions, the &lt;transaction-support&gt; element was set to <code class="literal">XATransaction</code>. To support XA recovery, the &lt;recovery&gt; element was added to the connection definition.
									</div></div></div>

							</div></li>

					</ul></li><li class="step"><div class="para">
						If you want to change the default provider for the EJB3 messaging system in JBoss EAP 6 from HornetQ to WebSphere MQ, modify the <code class="code">urn:jboss:domain:ejb3:1.2</code> subsystem as follows:
					</div><div class="para">
						Replace: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;mdb&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapter-ref</span><span xmlns="" class="perl_Others"> resource-adapter-name=</span><span xmlns="" class="perl_String">"hornetq-ra"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"mdb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/mdb&gt;</span></pre>
						 with: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;mdb&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-adapter-ref</span><span xmlns="" class="perl_Others"> resource-adapter-name=</span><span xmlns="" class="perl_String">"wmq.jmsra-VERSION.rar"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"mdb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/mdb&gt;</span></pre>
						 Be sure to replace the <em class="replaceable">VERSION</em> with the actual version in the name of the RAR.
					</div></li></ol></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978443666368">
      ⁠</a><p class="title"><strong>Procedure 22.9. Modify the MDB code to use the resource adapter</strong></p><ul><li class="step"><div class="para">
				Configure the ActivationConfigProperty and ResourceAdapter in the MDB code as shown below. All of the <code class="literal">propertyName</code> elements are case sensitive, and must be entered as seen below. 
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">MessageDriven</span>(name=<span xmlns="" class="perl_String">"WebSphereMQMDB"</span>, activationConfig = {
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destinationType"</span>,propertyValue = <span xmlns="" class="perl_String">"javax.jms.Queue"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"useJNDI"</span>, propertyValue = <span xmlns="" class="perl_String">"false"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"hostName"</span>, propertyValue = <span xmlns="" class="perl_String">"MQ.HOST.NAME"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"port"</span>, propertyValue = <span xmlns="" class="perl_String">"MQ.PORT"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"channel"</span>, propertyValue = <span xmlns="" class="perl_String">"MQ.CHANNEL.NAME"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"queueManager"</span>, propertyValue = <span xmlns="" class="perl_String">"MQ.QUEUE.MANAGER"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destination"</span>, propertyValue = <span xmlns="" class="perl_String">"MQ.QUEUE.NAME"</span>),
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"transportType"</span>, propertyValue = <span xmlns="" class="perl_String">"MQ.CLIENT"</span>)
<span xmlns="" class="line">​</span>})
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ResourceAdapter</span>(value = <span xmlns="" class="perl_String">"wmq.jmsra-VERSION.rar"</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">TransactionAttribute</span>(TransactionAttributeType.<span xmlns="" class="perl_Function">NOT_SUPPORTED</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> WebSphereMQMDB <span xmlns="" class="perl_Keyword">implements</span> MessageListener {
<span xmlns="" class="line">​</span>}</pre>
				 Be sure to replace the <em class="replaceable">VERSION</em> with the actual version in the name of the RAR.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+8808-781570+%5BLatest%5D&amp;comment=Title%3A+Deploy+the+WebSphere+MQ+Resource+Adapter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8808-781570+13+Nov+2017+16%3A43+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Install_JBoss_Active_MQ_Resource_Adapter">
      ⁠</a>22.9. Install JBoss Active MQ Resource Adapter</h1></div></div></div><div class="para">
		To install JBoss Active MQ (A-MQ) resource adapter to JBoss EAP 6 in order to make it work with JBoss Fuse A-MQ 6.1.0, follow the steps provided at: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_A-MQ/6.1/html/Integrating_with_JBoss_Enterprise_Application_Platform/DeployRar-InstallRar.html">https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_A-MQ/6.1/html/Integrating_with_JBoss_Enterprise_Application_Platform/DeployRar-InstallRar.html</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+24383-740942+%5BLatest%5D&amp;comment=Title%3A+Install+JBoss+Active+MQ+Resource+Adapter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=24383-740942+04+Feb+2015+04%3A04+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_a_Generic_JMS_Resource_Adapter_for_Use_with_a_Third-party_JMS_Provider">
      ⁠</a>22.10. Configure a Generic JMS Resource Adapter for Use with a Third-party JMS Provider</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			JBoss EAP 6 can be configured to work with third-party JMS providers, however not all JMS providers produce a JMS JCA resource adapter for integration with Java application platforms. This procedure covers the steps required to configure the generic JMS resource adapter included in JBoss EAP 6 to connect to a JMS provider. In this procedure, Tibco EMS 6.3 is used as an example JMS provider, however other JMS providers may need a different configuration.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Before using the generic JMS resource adapter, check with the JMS provider to see if they have their own resource adapter that can be used with JBoss EAP 6. The generic JMS JCA resource adapter should only be used when a JMS provider does not provide its own resource adapter.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong> Prerequisites </strong></p><ul><li class="listitem"><div class="para">
				JMS provider server is already configured and ready for use. Any binaries required for the provider's JMS implementation will be needed.
			</div></li><li class="listitem"><div class="para">
				You will also need to know the values of the following JMS provider properties to be able to lookup its JMS resources (connection factories, queues and topics).
			</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						java.naming.factory.initial
					</div></li><li class="listitem"><div class="para">
						java.naming.provider.url
					</div></li><li class="listitem"><div class="para">
						java.naming.factory.url.pkgs
					</div></li></ul></div><div class="para">
				In the example XML used in this procedure, these parameters are written as <code class="literal">PROVIDER_FACTORY_INITIAL</code>, <code class="literal">PROVIDER_URL</code>, and <code class="literal">PROVIDER_CONNECTION_FACTORY</code> respectively. Replace these placeholders with the JMS provider values for your environment.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978516731936">
      ⁠</a><p class="title"><strong>Procedure 22.10.  Configure a Generic JMS Resource Adapter for Use with a Third-party JMS Provider </strong></p><ol class="1"><li class="step"><p class="title"><strong> Create a JBoss Module for the JMS provider </strong></p><div class="para">
				Create a JBoss module that contains all the libraries required to connect and communicate with the JMS provider. This module will be named <code class="literal">org.jboss.genericjms.provider</code>.
			</div><ol class="substeps a"><li class="step"><div class="para">
						Create the following directory structure: <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/org/jboss/genericjms/provider/main</code>
					</div></li><li class="step"><div class="para">
						Copy the binaries required for the provider's JMS implementation to <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/org/jboss/genericjms/provider/main</code>.
					</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							For Tibco EMS, the binaries required are <code class="filename">tibjms.jar</code> and <code class="filename">tibcrypt.jar</code> from the Tibco installation's <code class="literal">lib</code> directory.
						</div></div></div></li><li class="step"><div class="para">
						Create a <code class="filename">module.xml</code> file in <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/system/layers/base/org/jboss/genericjms/provider/main</code> as below, listing the JAR files from the previous steps as resources:
					</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:module:1.1"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.genericjms.provider"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;resources&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- all jars required by the JMS provider, in this case Tibco --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-root</span><span xmlns="" class="perl_Others"> path=</span><span xmlns="" class="perl_String">"tibjms.jar"</span><span xmlns="" class="perl_Keyword">/&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-root</span><span xmlns="" class="perl_Others"> path=</span><span xmlns="" class="perl_String">"tibcrypt.jar"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/resources&gt;</span> 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.jms.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span> 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/module&gt;</span></pre></li></ol></li><li class="step"><p class="title"><strong> Configure a JNDI external context to the JMS provider </strong></p><div class="para">
				The JMS resources (connection factories and destinations) are looked up in the JMS provider. We will add an external context in the JBoss EAP 6 instance so that any <span class="emphasis"><em>local</em></span> lookup for this resource will automatically look up the resource on the remote JMS provider.
			</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					In this procedure, <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full.xml</code> is used as the JBoss EAP 6 configuration file.
				</div></div></div><div class="para">
				In <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full.xml</code>, under <code class="literal">&lt;subsystem xmlns="urn:jboss:domain:naming:1.4"&gt;</code>, add:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;bindings&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;external-context</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java:global/remoteJMS/"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    module=</span><span xmlns="" class="perl_String">"org.jboss.genericjms.provider"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    class=</span><span xmlns="" class="perl_String">"javax.naming.InitialContext"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;environment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.factory.initial"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${PROVIDER_FACTORY_INITIAL}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.provider.url"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${PROVIDER_URL}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.factory.url.pkgs"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${PROVIDER_URL_PKGS}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/environment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/external-context&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/bindings&gt;</span></pre><div class="para">
				These three properties' values must be replaced by the correct value to connect to the remote JMS provider. Take care when replacing the placeholder text to keep the <code class="literal">${}</code> intact.
			</div></li><li class="step optional"><p class="title"><strong>Enable Lookup by String</strong></p><div class="para">
				There are some JMS provider (such as Tibco EMS) that do not support the JNDI <code class="literal">lookup(Name)</code> method. In these cases, add the <code class="literal">org.jboss.as.naming.lookup.by.string</code> property with a value <code class="literal">true</code> to workaround this issue.
			</div><div class="example"><a id="idm139978513962320">
      ⁠</a><p class="title"><strong>Example 22.2.  Enable Lookup by String with Tibco EMS </strong></p><div class="example-contents"><div class="para">
					A complete definition for an <code class="literal">external-context</code> to Tibco EMS would be as follows.
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;bindings&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;external-context</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java:global/remoteJMS/"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      module=</span><span xmlns="" class="perl_String">"org.jboss.genericjms.provider"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      class=</span><span xmlns="" class="perl_String">"javax.naming.InitialContext"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;environment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.factory.initial"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"com.tibco.tibjms.naming.TibjmsInitialContextFactory"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.provider.url"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"TIBCO_EMS_SERVER_HOST_NAME:PORT"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.factory.url.pkgs"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"com.tibco.tibjms.naming"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.as.naming.lookup.by.string"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/environment&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/external-context&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/bindings&gt;</span></pre></div></div><div class="para">
				With this external context, any JNDI lookup to a resource starting with <code class="literal">java:global/remoteJMS/</code> will be done on the remote JMS provider (after removing this prefix). As an example, if a Message-Driven Bean perform a JNDI lookup for <code class="literal">java:global/remoteJMS/Queue1</code>, the external context will connect to the remote JMS provider and perform a lookup for the <code class="literal">Queue1</code> resource.
			</div></li><li class="step"><p class="title"><strong> Configure the Generic JMS Resource Adapter </strong></p><div class="para">
				In <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full.xml</code>, add the generic resource adapter configuration to <code class="literal">&lt;subsystem xmlns="urn:jboss:domain:resource-adapters:1.1"&gt;</code>.
			</div><div class="example"><a id="idm139978457161376">
      ⁠</a><p class="title"><strong>Example 22.3.  Tibco EMS Resource Adapter Configuration </strong></p><div class="example-contents"><div class="para">
					A complete resource adapter definition for Tibco EMS would be as follows.
				</div><div class="para">
					
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;resource-adapter</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"org.jboss.genericjms"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"org.jboss.genericjms"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;transaction-support&gt;</span>NoTransaction<span xmlns="" class="perl_Keyword">&lt;/transaction-support&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;connection-definitions&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-definition</span><span xmlns="" class="perl_Others"> class-name=</span><span xmlns="" class="perl_String">"org.jboss.resource.adapter.jms.JmsManagedConnectionFactory"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      jndi-name=</span><span xmlns="" class="perl_String">"java:/jms/XAQCF"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      pool-name=</span><span xmlns="" class="perl_String">"XAQCF"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ConnectionFactory"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        XAQCF
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;config-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"JndiParameters"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory;java.naming.provider.url=TIBCO_EMS_SERVER_HOST_NAME:PORT
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/config-property&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;security&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;application/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/security&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/connection-definition&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/connection-definitions&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/resource-adapter&gt;</span></pre>

				</div></div></div></li><li class="step"><p class="title"><strong> Configure the default message-driven bean pool with the generic resource adapter. </strong></p><div class="para">
				In <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone-full.xml</code>, in <code class="literal">&lt;subsystem xmlns="urn:jboss:domain:ejb3:1.5"&gt;</code>, update the <code class="literal">&lt;mdb&gt;</code> configuration with:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;mdb&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;resource-adapter-ref</span><span xmlns="" class="perl_Others"> resource-adapter-name=</span><span xmlns="" class="perl_String">"org.jboss.genericjms"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean-instance-pool-ref</span><span xmlns="" class="perl_Others"> pool-name=</span><span xmlns="" class="perl_String">"mdb-strict-max-pool"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/mdb&gt;</span></pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Result </div>
			The generic JMS resource adapter is now configured and ready for use. When creating a new Message-driven Bean, use code similar below to use the resource adapter.
		</div><div class="example"><a id="idm139978452937008">
      ⁠</a><p class="title"><strong>Example 22.4. Use the Generic Resource Adapter</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">MessageDriven</span>(name = <span xmlns="" class="perl_String">"HelloWorldQueueMDB"</span>, activationConfig = {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">// The generic JMS resource adapter requires the JNDI bindings</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">// for the actual remote connection factory and destination</span>
<span xmlns="" class="line">​</span>  @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"connectionFactory"</span>, propertyValue = <span xmlns="" class="perl_String">"java:global/remoteJMS/XAQCF"</span>),
<span xmlns="" class="line">​</span>  @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destination"</span>, propertyValue = <span xmlns="" class="perl_String">"java:global/remoteJMS/Queue1"</span>),
<span xmlns="" class="line">​</span>  @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destinationType"</span>, propertyValue = <span xmlns="" class="perl_String">"javax.jms.Queue"</span>),
<span xmlns="" class="line">​</span>  @<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"acknowledgeMode"</span>, propertyValue = <span xmlns="" class="perl_String">"Auto-acknowledge"</span>) })
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> HelloWorldQueueMDB <span xmlns="" class="perl_Keyword">implements</span> MessageListener {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">onMessage</span>(Message message) {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">// called every time a message is received from the `Queue1` queue on the JMS provider.</span>
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			When using the generic JMS resource adapter, ensure you set the session to be transacted, to avoid a potential <code class="computeroutput">NullPointerException</code> (NPE) error. The NPE error occurs because the generic JMS resource adapter attempts processing of parameters, when the Java EE specification states that they are <span class="emphasis"><em>not</em></span> to be processed.
		</div><pre class="screen">connection.createSession(true, Session.SESSION_TRANSACTED);</pre></div></div><div class="example"><a id="idm139978458468480">
      ⁠</a><p class="title"><strong>Example 22.5. Use the Pooled Connection</strong></p><div class="example-contents"><div class="para">
			You can also use the pooled connection factory from the resource adapter.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Resource</span>(lookup = <span xmlns="" class="perl_String">"java:/jms/XAQCF"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">private</span> ConnectionFactory cf;</pre></div></div><div class="example"><a id="idm139978479761632">
      ⁠</a><p class="title"><strong>Example 22.6. Perform a Lookup</strong></p><div class="example-contents"><div class="para">
			It is not possible to inject a resource from an external context directly but it is possible to inject an external context and then perform a lookup. For example, a lookup for a queue deployed in a Tibco EMS broker would be as follows.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Resource</span>(lookup = <span xmlns="" class="perl_String">"java:global/remoteJMS"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">private</span> Context context;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>Queue queue = (Queue) context.<span xmlns="" class="perl_Function">lookup</span>(<span xmlns="" class="perl_String">"Queue1"</span>)</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+23310-765785+%5BLatest%5D&amp;comment=Title%3A+Configure+a+Generic+JMS+Resource+Adapter+for+Use+with+a+Third-party+JMS+Provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=23310-765785+23+Jul+2015+04%3A42+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configuring_the_HornetQ_JCA_Adapter_for_Remote_Connections">
      ⁠</a>22.11. Configuring the HornetQ JCA Adapter for Remote Connections</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139978473785824">
      ⁠</a><p class="title"><strong>Procedure 22.11. Configure an RA adapter to connect to two remote JBoss EAP instances</strong></p><div class="para">
			Before configuring the HornetQ RA to connect to remote EAP instance, we must create two connectors that point to remote JBoss EAP instances:
		</div><ol class="1"><li class="step"><div class="para">
				Create outbound socket bindings: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;outbound-socket-binding</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"remote-jms-server-a"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;remote-destination</span><span xmlns="" class="perl_Others"> host=</span><span xmlns="" class="perl_String">"${remote.jms.server.one.bind.address:127.0.0.1}"</span><span xmlns="" class="perl_Others"> port=</span><span xmlns="" class="perl_String">"${remote.jms.server.one.bind.port:5445}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/outbound-socket-binding&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;outbound-socket-binding</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"remote-jms-server-b"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;remote-destination</span><span xmlns="" class="perl_Others"> host=</span><span xmlns="" class="perl_String">"${remote.jms.server.two.bind.address:127.0.0.1}"</span><span xmlns="" class="perl_Others"> port=</span><span xmlns="" class="perl_String">"${remote.jms.server.two.bind.port:5545}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/outbound-socket-binding&gt;</span>
</pre>

			</div></li><li class="step"><div class="para">
				Create two netty connectors: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;netty-connector</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"netty-remote-node-a"</span><span xmlns="" class="perl_Others"> socket-binding=</span><span xmlns="" class="perl_String">"remote-jms-server-a"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;netty-connector</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"netty-remote-node-b"</span><span xmlns="" class="perl_Others"> socket-binding=</span><span xmlns="" class="perl_String">"remote-jms-server-a"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				Create the RA configuration using the two netty connectors: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;pooled-connection-factory</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"hornetq-remote-ra"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;inbound-config&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;use-jndi&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/use-jndi&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndiparams&gt;</span>java.naming.factory.initial=org.jboss.naming.remote.client.InitialContextFactory;java.naming.provider.url=remote://${remote.jms.server.one.bind.address}:4447,${remote.jms.server.two.bind.address}:4547;java.naming.security.principal=${user.name};java.naming.security.credentials=${user.password}<span xmlns="" class="perl_Keyword">&lt;/jndi-params&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/inbound-config&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;transaction</span><span xmlns="" class="perl_Others"> mode=</span><span xmlns="" class="perl_String">"xa"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;user&gt;</span>${user.name}<span xmlns="" class="perl_Keyword">&lt;/user&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>${user.password}<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;connectors&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connector-ref</span><span xmlns="" class="perl_Others"> connector-name=</span><span xmlns="" class="perl_String">"netty-remote-node-a"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connector-ref</span><span xmlns="" class="perl_Others"> connector-name=</span><span xmlns="" class="perl_String">"netty-remote-node-b"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/connectors&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;entries&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;entry</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java:/RemoteJmsXA"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/entries&gt;</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/pooled-connection-factory&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				Annotate the MDB to use the resource adapter using the @ResourceAdapter annotation: 
<pre class="programlisting"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">MessageDriven</span>(name = <span xmlns="" class="perl_String">"InQueueMDB"</span>, activationConfig = {
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destinationType"</span>, propertyValue = <span xmlns="" class="perl_String">"javax.jms.Queue"</span>),  
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destination"</span>, propertyValue = <span xmlns="" class="perl_String">"${hornetq.in.queue.short}"</span>),  
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"acknowledgeMode"</span>, propertyValue = <span xmlns="" class="perl_String">"Auto-acknowledge"</span>),  
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"useJNDI"</span>,propertyValue = <span xmlns="" class="perl_String">"true"</span>)  
<span xmlns="" class="line">​</span>},mappedName = <span xmlns="" class="perl_String">"${hornetq.inf.queue.long}"</span>)  
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ResourceAdapter</span>(<span xmlns="" class="perl_String">"hornetq-remote-ra"</span>)</pre>

			</div></li><li class="step"><div class="para">
				Run the following CLI commands to enable property substitution in order to use properties in deployment descriptors: 
<pre class="programlisting"><span xmlns="" class="line">​</span>/subsystem=ee:write-attribute(name=jboss-descriptor-property-replacement,value=<span xmlns="" class="perl_Keyword">true</span>)
<span xmlns="" class="line">​</span>/subsystem=ee:write-attribute(name=spec-descriptor-property-replacement,value=<span xmlns="" class="perl_Keyword">true</span>)
<span xmlns="" class="line">​</span>/subsystem=ee:write-attribute(name=annotation-property-replacement,value=<span xmlns="" class="perl_Keyword">true</span>)</pre>

			</div></li><li class="step"><div class="para">
				Create an external context to find the remote destinations in order to send message from the MDB: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;bindings&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;external-context</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java:global/remote"</span><span xmlns="" class="perl_Others"> module=</span><span xmlns="" class="perl_String">"org.jboss.remote-naming"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"javax.naming.InitialContext"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;environment&gt;</span>  
<span xmlns="" class="line">​</span>			<span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.factory.initial"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"org.jboss.naming.remote.client.InitialContextFactory"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>			<span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.provider.url"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"remote://${remote.jms.server.one.bind.address:ragga}:4447,${remote.jms.server.two.bind.address:ragga}:4547"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>			<span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.security.principal"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${user.name}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>			<span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"java.naming.security.credentials"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${user.password}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;/environment&gt;</span>  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/external-context&gt;</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/bindings&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				The MDB code would look like: 
<pre class="programlisting"><span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">MessageDriven</span>(name = <span xmlns="" class="perl_String">"InQueueMDB"</span>, activationConfig = {
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destinationType"</span>, propertyValue = <span xmlns="" class="perl_String">"javax.jms.Queue"</span>),
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"destination"</span>, propertyValue = <span xmlns="" class="perl_String">"${hornetq.in.queue.short}"</span>),  
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"acknowledgeMode"</span>, propertyValue = <span xmlns="" class="perl_String">"Auto-acknowledge"</span>),
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"useJNDI"</span>,propertyValue = <span xmlns="" class="perl_String">"true"</span>),  
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">ActivationConfigProperty</span>(propertyName = <span xmlns="" class="perl_String">"hA"</span>, propertyValue = <span xmlns="" class="perl_String">"true"</span>)  
<span xmlns="" class="line">​</span>},mappedName = <span xmlns="" class="perl_String">"${hornetq.inf.queue.full}"</span>)  
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">ResourceAdapter</span>(<span xmlns="" class="perl_String">"hornetq-remote-ra"</span>)  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> InQueueMDB <span xmlns="" class="perl_Keyword">implements</span> MessageListener {  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">final</span> Logger log = Logger.<span xmlns="" class="perl_Function">getLogger</span>(InQueueMDB.<span xmlns="" class="perl_Function">class</span>);  
<span xmlns="" class="line">​</span>		@<span xmlns="" class="perl_Function">Resource</span>(lookup = <span xmlns="" class="perl_String">"java:global/remote"</span>)  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">private</span> InitialContext context;  
<span xmlns="" class="line">​</span>		@<span xmlns="" class="perl_Function">Resource</span>( name = <span xmlns="" class="perl_String">"${hornetq.jms.connection}"</span>)  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">private</span> ConnectionFactory  qcf;
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">onMessage</span>(Message message){  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">try</span> {  
<span xmlns="" class="line">​</span>			<span xmlns="" class="perl_Keyword">if</span> ( message <span xmlns="" class="perl_Keyword">instanceof</span> TextMessage){
<span xmlns="" class="line">​</span>				Object obj =  (Queue) context.<span xmlns="" class="perl_Function">lookup</span>(<span xmlns="" class="perl_String">"/jms/queue/outQueue"</span>);  
<span xmlns="" class="line">​</span>				qConnection = (QueueConnection) qcf.<span xmlns="" class="perl_Function">createConnection</span>(<span xmlns="" class="perl_String">"quickuser"</span>,<span xmlns="" class="perl_String">"quick123+"</span>);  
<span xmlns="" class="line">​</span>				qSession = qConnection.<span xmlns="" class="perl_Function">createQueueSession</span>(<span xmlns="" class="perl_Keyword">true</span>, Session.<span xmlns="" class="perl_Function">SESSION_TRANSACTED</span>);  
<span xmlns="" class="line">​</span>				qSender = qSession.<span xmlns="" class="perl_Function">createSender</span>(outQueue);
<span xmlns="" class="line">​</span>				qSender.<span xmlns="" class="perl_Function">send</span>(message);</pre>

			</div></li><li class="step"><div class="para">
				You must remember that the hornetq RA module contains remoting-naming dependency for the MDB code given above to work: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:module:1.1"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hornetq.ra"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;properties&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss.api"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"private"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/properties&gt;</span>  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;resources&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;resource-root</span><span xmlns="" class="perl_Others"> path=</span><span xmlns="" class="perl_String">"hornetq-ra-2.3.25.Final-redhat-1.jar"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Comment">&lt;!-- Insert resources here --&gt;</span>  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/resources&gt;</span>  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hornetq"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.as.transactions"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.as.messaging"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.jboss-transaction-spi"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.logging"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.remote-naming"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.jms.api"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.jts"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.netty"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jgroups"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.resource.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span>  
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/module&gt;</span></pre>

			</div></li><li class="step"><div class="para">
				You must also add org.hornetq to global modules so the JMS API is visible to the application: 
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;global-modules&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.jboss.common-core"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hornetq"</span><span xmlns="" class="perl_Others"> slot=</span><span xmlns="" class="perl_String">"main"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/global-modules&gt;</span></pre>

			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23087%2C+Red+Hat+Administration+and+Configuration+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A12%3A46%0ATopic+ID%3A+44713-770337+%5BLatest%5D&amp;comment=Title%3A+Configuring+the+HornetQ+JCA+Adapter+for+Remote+Connections%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44713-770337+15+Sep+2015+05%3A17+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></body></html>