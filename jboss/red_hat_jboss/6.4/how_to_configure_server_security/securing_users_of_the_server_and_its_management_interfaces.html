<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 3. Securing Users of the Server and Its Management Interfaces</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="securing_users_of_the_server_and_its_management_interfaces"/>Chapter 3. Securing Users of the Server and Its Management Interfaces</h1></div></div></div><p>
			In addition to understanding how to secure the various interfaces of JBoss EAP 6, its also important to understand how to secure the users that access those interfaces.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="user_authentication"/>User Authentication</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="default_user_configuration"/>Default User Configuration</h2></div></div></div><p>
					All management interfaces in JBoss EAP 6 are secured by default and users can access them in two different ways: local interfaces and remote interfaces. The basics of both of these authentication mechanisms are covered in the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#default_security">Default Security</a> and <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#how_red_hat_jboss_enterprise_application_platform_6_handles_security_out_of_the_box">Red Hat JBoss Enterprise Application Platform Out of the Box</a> sections of the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture">Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>. By default, access to these interfaces is configured in the <span class="emphasis"><em>Management Realm</em></span> security realm. Initially, the local interface is enabled and requires access to the host machine running the JBoss EAP 6 instance. Remote access is also enabled and is configured to use a file-based identity store. By default it uses <code class="literal">mgmt-users.properties</code> file to store usernames and passwords, and <code class="literal">mgmt-groups.properties</code> to store user group information.
				</p><p>
					User information is added to these files by using the included <code class="literal">adduser</code> script located in the <code class="literal">EAP_HOME/bin/</code> directory.
				</p><div class="orderedlist"><p class="title"><strong>To add a user via the <code class="literal">adduser</code> script:</strong></p><ol class="orderedlist"><li class="listitem">
							Run the <code class="literal">add-user.sh</code> or <code class="literal">add-user.bat</code> command.
						</li><li class="listitem">
							Choose whether to add a Management User or Application User.
						</li><li class="listitem">
							Choose the realm the user will be added to. By default, the only available realms are ManagementRealm and ApplicationRealm. If a custom realm has been added, its name can be manually entered instead.
						</li><li class="listitem">
							Type the desired username, password, and optional roles when prompted. The changes are written to each of the properties files for the security realm.
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding_authentication_via_ldap"/>Adding Authentication via LDAP</h2></div></div></div><p>
					JBoss EAP 6 also supports using LDAP authentication for securing the management interfaces. The basics of LDAP and how it works with JBoss EAP are covered in the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#ldap">LDAP</a>, <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#advanced_security">Using LDAP with the Management Interfaces</a>, and <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#using_ldap_with_the_emphasis_managemenrealm_emphasis">Using LDAP with the ManagementRealm</a> sections of the the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture">Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>. For more specifics on how to secure the management interfaces using LDAP authentication, see the <span class="emphasis"><em>Securing the Management Interfaces with LDAP</em></span> section of the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/how-to-configure-identity-management#securing_the_management_interfaces_with_ldap">How to Configure Identity Management guide</a>.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="secure_passwords"/>Secure Passwords</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="password_vault"/>Password Vault</h2></div></div></div><p>
					Configuration of JBoss EAP 6 and associated applications requires potentially sensitive information, such as usernames and passwords. Instead of storing the password as plain text in configuration files, the Password Vault feature can be used to mask the password information and store it in an encrypted keystore. Once the password is stored, references can be included in Management CLI commands or applications deployed to JBoss EAP 6.
				</p><p>
					The Password Vault uses the Java Keystore as its storage mechanism. Password Vault consists of two parts: storage and key storage. Java Keystore is used to store the key, which is used to encrypt or decrypt sensitive strings in Vault storage.
				</p><p>
					To setup and use a Password Vault requires the following steps:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							<a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#one_setup_a_java_keystore_to_store_key_for_password_encryption" title="1. Setup a Java Keystore to Store Key for Password Encryption">Setup a Java Keystore to Store Key for Password Encryption</a>
						</li><li class="listitem">
							<a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#two_initialize_the_password_vault" title="2. Initialize the Password Vault">Initialize the Password Vault</a>
						</li><li class="listitem">
							<a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#three_configure_red_hat_jboss_enterprise_application_platform_6_to_use_the_password_vault" title="3. Configure Red Hat JBoss Enterprise Application Platform 6 to use the Password Vault">Configure Red Hat JBoss Enterprise Application Platform 6 to use the Password Vault</a>
						</li><li class="listitem">
							<a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#four_store_a_sensitive_string_in_the_password_vault" title="4. Store a Sensitive String in the Password Vault">Store a Sensitive String in the Password Vault</a>
						</li><li class="listitem">
							<a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#five_use_an_encrypted_sensitive_string_in_configuration" title="5. Use an Encrypted Sensitive String in Configuration">Use an Encrypted Sensitive String in Configuration</a>
						</li></ol></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="one_setup_a_java_keystore_to_store_key_for_password_encryption"/>1. Setup a Java Keystore to Store Key for Password Encryption</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The keytool utility, provided by the Java Runtime Environment (JRE), is utilized for this steps. Locate the path for the file, which on Red Hat Enterprise Linux is <code class="literal">/usr/bin/keytool</code>.
						</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							JCEKS keystore implementations differ between Java vendors so the keystore must be generated using the keytool utility from the same vendor as the JDK used. Using a keystore generated by the keytool from one vendor’s JDK in a JBoss EAP 6 instance running on a JDK from a different vendor results in the following exception: <span class="strong"><strong>java.io.IOException: com.sun.crypto.provider.SealedObjectForKeyProtector</strong></span>
						</p></div><p>
						To setup the keystore, perform the following steps:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Create a directory to store the keystore and other encrypted information.
							</li><li class="listitem">
								Determine the parameters to use with keytool utility.
							</li><li class="listitem">
								Run the keytool command
							</li></ol></div><div class="title"><strong>1. Create a directory to store the keystore and other encrypted information</strong></div><p>
							Create a directory to store the keystore and other important information. The rest of this procedure assumes that the directory is <code class="literal">EAP_HOME/vault/</code>. Since this directory will contain sensitive information it should be accessible to only limited users. At a minimum the user account under which JBoss EAP 6 is running requires read-write access.
						</p><div class="title"><strong>2. Determine the parameters to use with keytool utility.</strong></div><p>
							Decide on values for the following parameters:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">alias</span></dt><dd>
									The alias is a unique identifier for the vault or other data stored in the keystore. Aliases are case-insensitive.
								</dd><dt><span class="term">storetype</span></dt><dd>
									The storetype specifies the keystore type. The value <span class="emphasis"><em>jceks</em></span> is recommended.
								</dd><dt><span class="term">keyalg</span></dt><dd>
									The algorithm to use for encryption. Use the documentation for the JRE and operating system to see which other choices are available.
								</dd><dt><span class="term">keysize</span></dt><dd>
									The size of an encryption key impacts how difficult it is to decrypt through brute force. For information on appropriate values, see the documentation distributed with the keytool utility.
								</dd><dt><span class="term">storepass</span></dt><dd>
									The value of storepass is the password that is used to authenticate to the keystore so that the key can be read. The password must be at least 6 characters long and must be provided when the keystore is accessed. If this parameter is omitted, the keytool utility will prompt for it to be entered after the command has been executed
								</dd><dt><span class="term">keypass</span></dt><dd>
									The value of keypass is the password used to access the specific key and must match the value of the storepass parameter.
								</dd><dt><span class="term">validity</span></dt><dd>
									The value of validity is the period (in days) for which the key will be valid.
								</dd><dt><span class="term">keystore</span></dt><dd>
									The value of keystore is the filepath and filename in which the keystore’s values are to be stored. The keystore file is created when data is first added to it. Ensure the correct file path separator is used: / (forward slash) for Red Hat Enterprise Linux and similar operating systems, \ (backslash) for Microsoft Windows Server.
								</dd></dl></div><p>
						The keytool utility has many other options. See the documentation for the JRE or the operating system for more details.
					</p><div class="title"><strong>3. Run the keytool command</strong></div><p>
							
</p><pre class="programlisting">$ keytool -genseckey -alias vault -storetype jceks -keyalg AES -keysize 128 -storepass vault22 -keypass vault22 -validity 730 -keystore EAP_HOME/vault/vault.keystore</pre><p>

						</p><p>
						This results in a keystore that has been created in the file <code class="literal">EAP_HOME/vault/vault.keystore</code>. It stores a single key, with the alias vault, which will be used to store encrypted strings, such as passwords, for JBoss EAP 6.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="two_initialize_the_password_vault"/>2. Initialize the Password Vault</h3></div></div></div><p>
						The Password Vault can be initialized either interactively, where you are prompted for each parameter’s value, or non-interactively, where all parameters' values are provided on the commmand line. Each method gives the same result, so either may be used.
					</p><p>
						The following parameters will be needed:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Keystore URL (KEYSTORE_URL)</span></dt><dd>
									The file system path or URI of the keystore file. The examples use <code class="literal">EAP_HOME/vault/vault.keystore</code>.
								</dd><dt><span class="term">Keystore password (KEYSTORE_PASSWORD)</span></dt><dd>
									The password used to access the keystore.
								</dd><dt><span class="term">Salt (SALT)</span></dt><dd>
									The salt value is a random string of eight characters used, together with the iteration count, to encrypt the content of the keystore.
								</dd><dt><span class="term">Keystore Alias (KEYSTORE_ALIAS)</span></dt><dd>
									The alias by which the keystore is known.
								</dd><dt><span class="term">Iteration Count (ITERATION_COUNT)</span></dt><dd>
									The number of times the encryption algorithm is run.
								</dd><dt><span class="term">Directory to store encrypted files (ENC_FILE_DIR)</span></dt><dd>
									The path in which the encrypted files are to be stored. This is typically the directory containing the password vault. It is convenient but not mandatory to store all of your encrypted information in the same place as the key store. This directory should be only accessible to limited users. At a minimum the user account under which JBoss EAP 6 is running requires read-write access. The keystore should be located in the directory used for <a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#one_setup_a_java_keystore_to_store_key_for_password_encryption" title="1. Setup a Java Keystore to Store Key for Password Encryption">Step 1</a>. Note that the trailing backslash or forward slash on the directory name is required. Ensure the correct file path separator is used: / (forward slash) for Red Hat Enterprise Linux and similar operating systems, \ (backslash) for Microsoft Windows Server.
								</dd><dt><span class="term">Vault Block (VAULT_BLOCK)</span></dt><dd>
									The name to be given to this block in the password vault.
								</dd><dt><span class="term">Attribute (ATTRIBUTE)</span></dt><dd>
									The name to be given to the attribute being stored.
								</dd><dt><span class="term">Security Attribute (SEC-ATTR)</span></dt><dd>
									The password which is being stored in the password vault.
								</dd></dl></div><div class="title"><strong>Running the vault command non-interactively</strong></div><p>
							To run the password vault command non-interactively, the <span class="emphasis"><em>vault</em></span> script (located in <code class="literal">EAP_HOME/bin/</code>) can be invoked with parameters for the relavant information:
						</p><pre class="programlisting">vault.sh --keystore KEYSTORE_URL --keystore-password KEYSTORE_PASSWORD --alias KEYSTORE_ALIAS --vault-block VAULT_BLOCK --attribute ATTRIBUTE --sec-attr SEC-ATTR --enc-dir ENC_FILE_DIR --iteration ITERATION_COUNT --salt SALT</pre><div class="title"><strong>Example</strong></div><p>
							
</p><pre class="programlisting">vault.sh --keystore EAP_HOME/vault/vault.keystore --keystore-password vault22 --alias vault --vault-block vb --attribute password --sec-attr 0penS3sam3 --enc-dir EAP_HOME/vault/ --iteration 120 --salt 1234abcd</pre><p>

						</p><div class="title"><strong>Output</strong></div><p>
							
</p><pre class="programlisting"> =========================================================================
  JBoss Vault
  JBOSS_HOME: EAP_HOME
  JAVA: java
 =========================================================================
Oct 17, 2014 2:23:43 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Secured attribute value has been stored in vault.
Please make note of the following:
********************************************
Vault Block:vb
Attribute Name:password
Configuration should be done as follows:
VAULT::vb::password::1
********************************************
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************</pre><p>

						</p><div class="title"><strong>Running the vault command interactively</strong></div><p>
							To run the password vault command interactively, the following steps are required:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Launch the Password Vault command interactively
							</li><li class="listitem">
								Complete the prompted parameters
							</li><li class="listitem">
								Make a note of the masked password information
							</li><li class="listitem">
								Exit the interactive console
							</li></ol></div><div class="title"><strong>1. Launch the Password Vault command interactively</strong></div><p>
							Run <code class="literal">EAP_HOME/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="literal">EAP_HOME\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <span class="emphasis"><em>0</em></span> (zero).
						</p><div class="title"><strong>2. Complete the prompted parameters</strong></div><p>
							Follow the prompts to input the required parameters.
						</p><div class="title"><strong>3. Make a note of the masked password information</strong></div><p>
							The masked password, salt, and iteration count are printed to standard output. Make a note of them in a secure location. They are required to add entries to the Password Vault. Access to the keystore file and these values could allow an attacker access to obtain access to sensitive information in the Password Vault.
						</p><div class="title"><strong>4. Exit the interactive console</strong></div><p>
							Type <span class="emphasis"><em>2</em></span> (two) to exit the interactive console.
						</p><div class="title"><strong>Example Input and Output</strong></div><p>
							
</p><pre class="programlisting">Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault/
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password: vault22
Enter Keystore password again: vault22
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Oct 17, 2014 12:58:11 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************
Vault is initialized and ready for use
Handshake with Vault complete</pre><p>

						</p><p>
						The keystore password has been masked for use in configuration files and deployments. In addition, the vault is initialized and ready to use.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="three_configure_red_hat_jboss_enterprise_application_platform_6_to_use_the_password_vault"/>3. Configure Red Hat JBoss Enterprise Application Platform 6 to use the Password Vault</h3></div></div></div><p>
						Before passwords and other sensitive attributes can be masked and used in configuration files, JBoss EAP 6 must be made aware of the password vault which stores and decrypts them.
					</p><p>
						The following command can be used to configure JBoss EAP 6 to use the password vault:
					</p><pre class="programlisting">/core-service=vault:add( \
vault-options=[ \
("KEYSTORE_URL" =&gt; "PATH_TO_KEYSTORE"), \
("KEYSTORE_PASSWORD" =&gt; "MASKED_PASSWORD"), \
("KEYSTORE_ALIAS" =&gt; "ALIAS"), \
("SALT" =&gt; "SALT"), \
("ITERATION_COUNT" =&gt; "ITERATION_COUNT"), \
("ENC_FILE_DIR" =&gt; "ENC_FILE_DIR")])</pre><div class="title"><strong>Example CLI Command</strong></div><p>
							
</p><pre class="programlisting">/core-service=vault:add( \
vault-options=[ \
("KEYSTORE_URL" =&gt; "EAP_HOME/vault/vault.keystore"), \
("KEYSTORE_PASSWORD" =&gt; "MASK-5dOaAVafCSd"), \
("KEYSTORE_ALIAS" =&gt; "vault"), \
("SALT" =&gt; "1234abcd"), \
("ITERATION_COUNT" =&gt; "120"), \
("ENC_FILE_DIR" =&gt; "EAP_HOME/vault/")])</pre><p>

						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							If Microsoft Windows Server is being used, use two backslashes (\\) in the file path instead using one. For example, <code class="literal">C:\\data\\vault\\vault.keystore</code>. This is because a single backslash character (\) is used for character escaping.
						</p></div><p>
						JBoss EAP 6 is now configured to decrypt masked strings stored in the Password Vault.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="four_store_a_sensitive_string_in_the_password_vault"/>4. Store a Sensitive String in the Password Vault</h3></div></div></div><p>
						Including passwords and other sensitive strings in plaintext configuration files is a security risk. Store these strings instead in the Password Vault for improved security, where they can then be referenced in configuration files, management CLI commands and applications in their masked form.
					</p><p>
						Sensitive strings can be stored in the Password Vault either interactively, where the tool prompts for each parameter’s value, or non-interactively, where all the parameters' values are provided on the commmand line. Each method gives the same result, so either may be used. Both of these methods are invoked using the <span class="emphasis"><em>vault</em></span> script.
					</p><div class="title"><strong>Store a Sensitive String Non-interactively</strong></div><p>
							To run the password vault command non-interactively, the <span class="emphasis"><em>vault</em></span> script (located in <code class="literal">EAP_HOME/bin/</code>) can be invoked with parameters for the relavant information:
						</p><pre class="programlisting">EAP_HOME/bin/vault.sh --keystore KEYSTORE_URL --keystore-password KEYSTORE_PASSWORD --alias KEYSTORE_ALIAS --vault-block VAULT_BLOCK --attribute ATTRIBUTE --sec-attr SEC-ATTR --enc-dir ENC_FILE_DIR --iteration ITERATION_COUNT --salt SALT</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The keystore password must be given in plaintext form, not masked form.
						</p></div><div class="title"><strong>Example</strong></div><p>
							
</p><pre class="programlisting">EAP_HOME/bin/vault.sh --keystore EAP_HOME/vault/vault.keystore --keystore-password vault22 --alias vault --vault-block vb --attribute password --sec-attr 0penS3sam3 --enc-dir EAP_HOME/vault/ --iteration 120 --salt 1234abcd</pre><p>

						</p><div class="title"><strong>Output</strong></div><p>
							
</p><pre class="programlisting"> =========================================================================
  JBoss Vault
  JBOSS_HOME: EAP_HOME
  JAVA: java
 =========================================================================
Oct 22, 2014 9:24:43 AM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Secured attribute value has been stored in vault.
Please make note of the following:
********************************************
Vault Block:vb
Attribute Name:password
Configuration should be done as follows:
VAULT::vb::password::1
********************************************
Vault Configuration in AS7 config file:
********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="vault22"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
********************************************</pre><p>

						</p><p>
						After invoking the <span class="emphasis"><em>vault</em></span> script, a message prints to standard output, showing the vault block, attribute name, masked string, and advice about using the string in your configuration. Make note of this information in a secure location. An extract of sample output is as follows:
					</p><pre class="programlisting">Vault Block:vb
Attribute Name:password
Configuration should be done as follows:
VAULT::vb::password::1</pre><div class="title"><strong>Store a Sensitive String Interactively</strong></div><p>
							To run the password vault command interactively, the following steps are required:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Launch the Password Vault command interactively.
							</li><li class="listitem">
								Complete the prompted parameters.
							</li><li class="listitem">
								Complete the prompted parameters about the sensitive string
							</li><li class="listitem">
								Make note of the information about the masked string
							</li><li class="listitem">
								Exit the interactive console.
							</li></ol></div><div class="title"><strong>1. Launch the Password Vault command interactively.</strong></div><p>
							Launch the operating system’s command line interface and run <code class="literal">EAP_HOME/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="literal">EAP_HOME\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <span class="emphasis"><em>0</em></span> (zero).
						</p><div class="title"><strong>2. Complete the prompted parameters.</strong></div><p>
							Follow the prompts to input the required parameters. These values must match those provided when the Password Vault was created.
						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The keystore password must be given in plaintext form, not masked form.
						</p></div><div class="title"><strong>3. Complete the prompted parameters about the sensitive string</strong></div><p>
							Enter <span class="emphasis"><em>0</em></span> (zero) to start storing the sensitive string. Follow the prompts to input the required parameters.
						</p><div class="title"><strong>4. Make note of the information about the masked string</strong></div><p>
							A message prints to standard output, showing the vault block, attribute name, masked string, and advice about using the string in the configuration. Make note of this information in a secure location. An extract of sample output is as follows:
						</p><pre class="programlisting">Vault Block:ds_Example1
Attribute Name:password
Configuration should be done as follows:
VAULT::ds_Example1::password::1</pre><div class="title"><strong>5. Exit the interactive console.</strong></div><p>
							Type <span class="emphasis"><em>2</em></span> (two) to exit the interactive console.
						</p><div class="title"><strong>Example Input and Output</strong></div><p>
							
</p><pre class="programlisting"> =========================================================================
  JBoss Vault
  JBOSS_HOME: EAP_HOME/jboss-eap-6.4
  JAVA: java
 =========================================================================
 **********************************
 ****  JBoss Vault  ***************
 **********************************
Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault/
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password:
Enter Keystore password again:
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Oct 21, 2014 11:20:49 AM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in AS7 config file:
 ********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
 ********************************************
Vault is initialized and ready for use
Handshake with Vault complete
Please enter a Digit::  0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
0
Task: Store a secured attribute
Please enter secured attribute value (such as password):
Please enter secured attribute value (such as password) again:
Values match
Enter Vault Block:ds_Example1
Enter Attribute Name:password
Secured attribute value has been stored in vault.
Please make note of the following:
 ********************************************
Vault Block:ds_Example1
Attribute Name:password
Configuration should be done as follows:
VAULT::ds_Example1::password::1
 ********************************************
Please enter a Digit::  0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="five_use_an_encrypted_sensitive_string_in_configuration"/>5. Use an Encrypted Sensitive String in Configuration</h3></div></div></div><p>
						Any sensitive string which have been encrypted can be used in a configuration file or Management CLI command in its masked form, providing expressions are allowed.
					</p><p>
						To confirm if expressions are allowed within a particular subsystem, run the following Management CLI command against that subsystem:
					</p><pre class="programlisting">/subsystem=SUBSYSTEM:read-resource-description(recursive=true)</pre><p>
						From the output of running this command, look for the value of the <span class="emphasis"><em>expressions-allowed</em></span> parameter. If this is true, then expressions can be used within the configuration of this subsystem.
					</p><p>
						Use the following syntax to replace any plaintext string with the masked form.
					</p><pre class="programlisting">${VAULT::VAULT_BLOCK::ATTRIBUTE_NAME::MASKED_STRING}</pre><div class="title"><strong>Example - Datasource Definition Using a Password in Masked Form</strong></div><p>
							
</p><pre class="programlisting">...
  &lt;subsystem xmlns="urn:jboss:domain:datasources:1.0"&gt;
    &lt;datasources&gt;
      &lt;datasource jndi-name="java:jboss/datasources/ExampleDS" enabled="true" use-java-context="true" pool-name="H2DS"&gt;
        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
        &lt;driver&gt;h2&lt;/driver&gt;
        &lt;pool&gt;&lt;/pool&gt;
        &lt;security&gt;
          &lt;user-name&gt;sa&lt;/user-name&gt;
          &lt;password&gt;${VAULT::ds_ExampleDS::password::1}&lt;/password&gt;
        &lt;/security&gt;
      &lt;/datasource&gt;
      &lt;drivers&gt;
         &lt;driver name="h2" module="com.h2database.h2"&gt;
            &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;
         &lt;/driver&gt;
      &lt;/drivers&gt;
    &lt;/datasources&gt;
  &lt;/subsystem&gt;
...</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="use_an_encrypted_sensitive_string_in_an_application"/>Use an Encrypted Sensitive String in an Application</h3></div></div></div><p>
						Encrypted strings stored in the Password Vault can be used in an application’s source code. The below example is an extract of a servlet’s source code, illustrating the use of a masked password in a datasource definition, instead of the plaintext password. The plaintext version is commented out so that you can see the difference.
					</p><div class="title"><strong>Servlet Using a Vaulted Password</strong></div><p>
							
</p><pre class="programlisting">@DataSourceDefinition(
        name = "java:jboss/datasources/LoginDS",
        user = "sa",
        password = "VAULT::DS::thePass::1",
        className = "org.h2.jdbcx.JdbcDataSource",
        url = "jdbc:h2:tcp://localhost/mem:test"
)​
/*old (plaintext) definition
@DataSourceDefinition(
        name = "java:jboss/datasources/LoginDS",
        user = "sa",
        password = "sa",
        className = "org.h2.jdbcx.JdbcDataSource",
        url = "jdbc:h2:tcp://localhost/mem:test"
)*/</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="check_if_a_sensitive_string_is_in_the_password_vault"/>Check if a Sensitive String is in the Password Vault</h3></div></div></div><p>
						Before attempting to store or use a sensitive string in the Password Vault it can be useful to first confirm if it is already stored.
					</p><p>
						This check can be done either interactively, where the user is prompted for each parameter’s value, or non-interactively, where all parameters' values are provided on the commmand line. Each method gives the same result, so either may be used. Both of these methods are invoked using the <span class="emphasis"><em>vault</em></span> script.
					</p><div class="title"><strong>Check For a Sensitive String Non-Interactively</strong></div><p>
							Use this method to provide all parameters' values at once. For a description of all parameters, see <a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#two_initialize_the_password_vault" title="2. Initialize the Password Vault">Initialize the Password Vault</a>.
						</p><p>
						To run the password vault command non-interactively, the <span class="emphasis"><em>vault</em></span> script (located in <code class="literal">EAP_HOME/bin/</code>) can be invoked with parameters for the relavant information:
					</p><pre class="programlisting">EAP_HOME/bin/vault.sh --keystore KEYSTORE_URL --keystore-password KEYSTORE_PASSWORD --alias KEYSTORE_ALIAS --check-sec-attr --vault-block VAULT_BLOCK --attribute ATTRIBUTE --enc-dir ENC_FILE_DIR --iteration ITERATION_COUNT --salt SALT</pre><p>
						Substitute the placeholder values with the actual values. The values for parameters KEYSTORE_URL, KEYSTORE_PASSWORD and KEYSTORE_ALIAS must match those provided when the Password Vault was created.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The keystore password must be given in plaintext form, not masked form.
						</p></div><p>
						If the sensitive string is stored in the vault block specified, the following message will be displayed:
					</p><pre class="programlisting">Password already exists.</pre><p>
						If the value is not stored in the specified block, the following message will be displayed:
					</p><pre class="programlisting">Password doesn't exist.</pre><div class="title"><strong>Check For a Sensitive String Interactively</strong></div><p>
							To run the password vault command interactively, the following steps are required:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Launch the Password Vault command interactively
							</li><li class="listitem">
								Complete the prompted parameters
							</li></ol></div><div class="title"><strong>1. Launch the Password Vault command interactively</strong></div><p>
							Run <code class="literal">EAP_HOME/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="literal">EAP_HOME\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <span class="emphasis"><em>0</em></span> (zero).
						</p><div class="title"><strong>2. Complete the Prompted Parameters</strong></div><p>
							Follow the prompts to input the required authentication parameters. These values must match those provided when the Password Vault was created.
						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							When prompted for authentication, the keystore password must be given in plaintext form, not masked form.
						</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								Enter <span class="emphasis"><em>1</em></span> (one) to select “Check whether a secured attribute exists”.
							</li><li class="listitem">
								Enter the name of the vault block in which the sensitive string is stored.
							</li><li class="listitem">
								Enter the name of the sensitive string to be checked.
							</li></ul></div><p>
						If the sensitive string is stored in the vault block specified, a confirmation message like the following will be output:
					</p><pre class="programlisting">A value exists for (VAULT_BLOCK, ATTRIBUTE)</pre><p>
						If the sensitive string is not stored in the specified block, a message like the following will be output:
					</p><pre class="programlisting">No value has been store for (VAULT_BLOCK, ATTRIBUTE)</pre><div class="title"><strong>Example- Check For a Sensitive String Interactively</strong></div><p>
							
</p><pre class="programlisting"> =========================================================================
  JBoss Vault
  JBOSS_HOME: EAP_HOME
  JAVA: java
 =========================================================================
 **********************************
 ****  JBoss Vault  ***************
 **********************************
Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password:
Enter Keystore password again:
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Oct 22, 2014 12:53:56 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in AS7 config file:
 ********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
 ********************************************
Vault is initialized and ready for use
Handshake with Vault complete
Please enter a Digit::  0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
1
Task: Verify whether a secured attribute exists
Enter Vault Block:vb
Enter Attribute Name:password
A value exists for (vb, password)
Please enter a Digit::  0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="remove_a_sensitive_string_from_the_password_vault"/>Remove a Sensitive String from the Password Vault</h3></div></div></div><p>
						For security reasons it is best to remove sensitive strings from the Password Vault when they are no longer required. For example, if an application is being decommissioned, any sensitive strings used in datasource definitions should be removed at the same time.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							As a prerequisite, before removing a sensitive string from the Password Vault, confirm if it is used in the configuration of JBoss EAP 6.
						</p></div><p>
						This operation can be done either interactively, where the user is prompted for each parameter’s value, or non-interactively, where all parameters' values are provided on the commmand line. Each method gives the same result, so either may be used. Both of these methods are invoked using the <span class="emphasis"><em>vault</em></span> script.
					</p><div class="title"><strong>Remove a Sensitive String Non-interactively</strong></div><p>
							Use this method to provide all parameters' values at once. For a description of all parameters, see <a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#two_initialize_the_password_vault" title="2. Initialize the Password Vault">Initialize the Password Vault</a>.
						</p><p>
						To run the password vault command non-interactively, the <span class="emphasis"><em>vault</em></span> script (located in <code class="literal">EAP_HOME/bin/</code>) can be invoked with parameters for the relavant information:
					</p><pre class="programlisting">EAP_HOME/bin/vault.sh --keystore KEYSTORE_URL --keystore-password KEYSTORE_PASSWORD --alias KEYSTORE_ALIAS --remove-sec-attr --vault-block VAULT_BLOCK --attribute ATTRIBUTE --enc-dir ENC_FILE_DIR --iteration ITERATION_COUNT --salt SALT</pre><p>
						Substitute the placeholder values with the actual values. The values for parameters KEYSTORE_URL, KEYSTORE_PASSWORD and KEYSTORE_ALIAS must match those provided when the Password Vault was created.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The keystore password must be given in plaintext form, not masked form.
						</p></div><p>
						If the sensitive string is successfully removed, a confirmation message like the following will be displayed:
					</p><pre class="programlisting">Secured attribute [VAULT_BLOCK::ATTRIBUTE] has been successfully removed from vault</pre><p>
						If the sensitive string is not removed, a message like the following will be displayed:
					</p><pre class="programlisting">Secured attribute [VAULT_BLOCK::ATTRIBUTE] was not removed from vault, check whether it exist</pre><div class="title"><strong>Example Output</strong></div><p>
							
</p><pre class="programlisting"> ./vault.sh --keystore EAP_HOME/vault/vault.keystore --keystore-password vault22 --alias vault --remove-sec-attr --vault-block vb --attribute password --enc-dir EAP_HOME/vault/ --iteration 120 --salt 1234abcd
 =========================================================================
  JBoss Vault
  JBOSS_HOME: EAP_HOME
  JAVA: java
 =========================================================================
Dec 23, 2014 1:54:24 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Secured attribute [vb::password] has been successfully removed from vault</pre><p>

						</p><div class="title"><strong>Remove a Sensitive String Interactively</strong></div><p>
							To run the password vault command interactively, the following steps are required:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Launch the Password Vault command interactively
							</li><li class="listitem">
								Complete the prompted parameters
							</li></ol></div><div class="title"><strong>1. Launch the Password Vault command interactively</strong></div><p>
							Run <code class="literal">EAP_HOME/bin/vault.sh</code> (on Red Hat Enterprise Linux and similar operating systems) or <code class="literal">EAP_HOME\bin\vault.bat</code> (on Microsoft Windows Server). Start a new interactive session by typing <span class="emphasis"><em>0</em></span> (zero).
						</p><div class="title"><strong>2. Complete the Prompted Parameters</strong></div><p>
							Follow the prompts to input the required authentication parameters. These values must match those provided when the Password Vault was created.
						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							When prompted for authentication, the keystore password must be given in plaintext form, not masked form.
						</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								Enter <span class="emphasis"><em>2</em></span> (two) to choose option Remove secured attribute.
							</li><li class="listitem">
								Enter the name of the vault block in which the sensitive string is stored.
							</li><li class="listitem">
								Enter the name of the sensitive string to be removed.
							</li></ul></div><p>
						If the sensitive string is successfully removed, a confirmation message like the following will be displayed:
					</p><pre class="programlisting">Secured attribute [VAULT_BLOCK::ATTRIBUTE] has been successfully removed from vault</pre><p>
						If the sensitive string is not removed, a message like the following will be displayed:
					</p><pre class="programlisting">Secured attribute [VAULT_BLOCK::ATTRIBUTE] was not removed from vault, check whether it exist</pre><div class="title"><strong>Example Output</strong></div><p>
							
</p><pre class="programlisting"> **********************************
 ****  JBoss Vault  ***************
 **********************************
Please enter a Digit::   0: Start Interactive Session  1: Remove Interactive Session  2: Exit
0
Starting an interactive session
Enter directory to store encrypted files:EAP_HOME/vault/
Enter Keystore URL:EAP_HOME/vault/vault.keystore
Enter Keystore password:
Enter Keystore password again:
Values match
Enter 8 character salt:1234abcd
Enter iteration count as a number (Eg: 44):120
Enter Keystore Alias:vault
Initializing Vault
Dec 23, 2014 1:40:56 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init
INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready
Vault Configuration in configuration file:
 ********************************************
...
&lt;/extensions&gt;
&lt;vault&gt;
  &lt;vault-option name="KEYSTORE_URL" value="EAP_HOME/vault/vault.keystore"/&gt;
  &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5dOaAVafCSd"/&gt;
  &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
  &lt;vault-option name="SALT" value="1234abcd"/&gt;
  &lt;vault-option name="ITERATION_COUNT" value="120"/&gt;
  &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
&lt;/vault&gt;&lt;management&gt; ...
 ********************************************
Vault is initialized and ready for use
Handshake with Vault complete
Please enter a Digit::  0: Store a secured attribute  1: Check whether a secured attribute exists  2: Remove secured attribute  3: Exit
2
Task: Remove secured attribute
Enter Vault Block:vb
Enter Attribute Name:password
Secured attribute [vb::password] has been successfully removed from vault</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configure_red_hat_jboss_enterprise_application_platform_6_to_use_a_custom_implementation_of_the_password_vault"/>Configure Red Hat JBoss Enterprise Application Platform 6 to Use a Custom Implementation of the Password Vault</h3></div></div></div><p>
						In addition to using the provided Password Vault implementation, a custom implementation of SecurityVault may also be used.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							As a prerequisite, please ensure that the Password Vault has been initialized. For more information, please see <a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#two_initialize_the_password_vault" title="2. Initialize the Password Vault">Initialize the Password Vault</a>.
						</p></div><p>
						To use a custom implementation for the Password vault:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Create a class that implements the interface <span class="emphasis"><em>SecurityVault</em></span>.
							</li><li class="listitem">
								Create a module containing the class from the previous step, and specify a dependency on <span class="emphasis"><em>org.picketbox</em></span> where the interface is <span class="emphasis"><em>SecurityVault</em></span>.
							</li><li class="listitem"><p class="simpara">
								Enable the custom Password Vault in the JBoss EAP 6 configuration by adding the vault element with the following attributes:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<span class="strong"><strong>code</strong></span> - The fully qualified name of class that implements SecurityVault.
									</li><li class="listitem">
										<span class="strong"><strong>module</strong></span> - The name of the module that contains the custom class.
									</li></ul></div></li></ol></div><p>
						Optionally, the <span class="emphasis"><em>vault-options</em></span> parameters can be used to initialize the custom class for a Password Vault.
					</p><div class="title"><strong>Example - Use vault-options Parameters to Initialize the Custom Class</strong></div><p>
							
</p><pre class="programlisting">/core-service=vault:add( \
code="custom.vault.implementation.CustomSecurityVault", \
module="custom.vault.module", vault-options=[ \
("KEYSTORE_URL" =&gt; "PATH_TO_KEYSTORE"), \
("KEYSTORE_PASSWORD" =&gt; "MASKED_PASSWORD"), ("KEYSTORE_ALIAS" =&gt; "ALIAS"), \
("SALT" =&gt; "SALT"),("ITERATION_COUNT" =&gt; "ITERATION_COUNT"), \
("ENC_FILE_DIR" =&gt; "ENC_FILE_DIR")])</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="obtain_keystore_password_from_external_source"/>Obtain Keystore Password From External Source</h3></div></div></div><p>
						The EXT, EXTC, CMD, CMDC or CLASS methods can be used in Vault configuration for obtaining the Java keystore password.
					</p><pre class="programlisting">​&lt;vault-option name="KEYSTORE_PASSWORD" value="[here]"</pre><p>
						The description for the methods are listed as:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">{EXT}…​</span></dt><dd>
									Refers to the exact command, where ‘…’ is the exact command. For example: <span class="emphasis"><em>{EXT}/usr/bin/getmypassword --section 1 --query company</em></span>, run the <code class="literal">/usr/bin/getmypassword</code> command, which displays the password on standard output and use it as password for Security Vault’s keystore. In this example, the command is using two options: <span class="emphasis"><em>--section 1</em></span> and <span class="emphasis"><em>--query company</em></span>.
								</dd><dt><span class="term">{EXTC[:expiration_in_millis]}…​</span></dt><dd>
									Refers to the exact command, where the <span class="emphasis"><em>…​</em></span> is the exact command line that is passed to the <span class="emphasis"><em>Runtime.exec(String)</em></span> method to execute a platform command. The first line of the command output is used as the password. EXTC variant caches the passwords for <span class="emphasis"><em>expiration_in_millis</em></span> milliseconds. Default cache expiration is <span class="emphasis"><em>0 = infinity</em></span>. For example: <span class="emphasis"><em>{EXTC:120000}/usr/bin/getmypassword --section 1 --query company</em></span> verifies if the cache contains <code class="literal">/usr/bin/getmypassword</code> output, if it contains the output then use it. If it does not contain the output, run the command to output it to cache and use it. In this example, the cache expires in 2 minutes (120000 milliseconds).
								</dd><dt><span class="term">{CMD}…​ or {CMDC[:expiration_in_millis]}…​</span></dt><dd>
									The general command is a string delimited by <span class="emphasis"><em>,</em></span> (comma) where the first part is the actual command and further parts represents the parameters. The comma can be backslashed to keep it as a part of the parameter. For example, <span class="emphasis"><em>{CMD}/usr/bin/getmypassword,--section,1,--query,company</em></span>.
								</dd><dt><span class="term">{CLASS[@jboss_module_spec]}classname[:ctorargs]</span></dt><dd>
									Where the <span class="emphasis"><em>[:ctorargs]</em></span> is an optional string delimited by the <span class="emphasis"><em>:</em></span> (colon) from the classname is passed to the classname <span class="emphasis"><em>ctor</em></span>. The <span class="emphasis"><em>ctorargs</em></span> is a comma delimited list of strings. For example, <span class="emphasis"><em>{CLASS@org.test.passwd}org.test.passwd.ExternamPassworProvider</em></span>. In this example, the <span class="emphasis"><em>org.test.passwd.ExternamPassworProvider</em></span> class is loaded from <span class="emphasis"><em>org.test.passwd</em></span> module and uses the <span class="emphasis"><em>toCharArray()</em></span> method to get the password. If <span class="emphasis"><em>toCharArray()</em></span> is not available the <span class="emphasis"><em>toString()</em></span> method is used. The <span class="emphasis"><em>org.test.passwd.ExternamPassworProvider</em></span> class must have the default constructor.
								</dd></dl></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="role_based_access_control"/>Role-Based Access Control</h1></div></div></div><p>
				The basics of or Role-Based Access Control are covered in the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#role_based_access_control">Role-Based Access Control</a> and <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#advanced_security">Adding RBAC to the Management Interfaces</a> sections of the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture">Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="enabling_role_based_access_control"/>Enabling Role-Based Access Control</h2></div></div></div><p>
					By default the Role-Based Access Control (RBAC) system is disabled. It is enabled by changing the <span class="emphasis"><em>provider</em></span> attribute from <span class="emphasis"><em>simple</em></span> to <span class="emphasis"><em>rbac</em></span>. <span class="emphasis"><em>provider</em></span> is attribute of the <span class="emphasis"><em>access-control</em></span> element of the <span class="emphasis"><em>management</em></span> element. This can be done using the Management CLI or by editing the server configuration XML file if the server is offline. When RBAC is disabled or enabled on a running server, the server configuration must be reloaded before it takes effect.
				</p><p>
					Once enabled it can only be disabled by a user of the <span class="emphasis"><em>Administrator</em></span> or <span class="emphasis"><em>SuperUser</em></span> roles. By default the Management CLI runs as the <span class="emphasis"><em>SuperUser</em></span> role if it is run on the same machine as the server.
				</p><p>
					To enable RBAC with the Management CLI, use the <span class="emphasis"><em>write-attribute</em></span> operation of the access authorization resource to set the <span class="emphasis"><em>provider</em></span> attribute to <span class="emphasis"><em>rbac</em></span>.
				</p><div class="title"><strong>CLI to Enable RBAC</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/access=authorization:write-attribute( \
name=provider, value=rbac)</pre><p>

					</p><p>
					To disable RBAC with the Management CLI, use the <span class="emphasis"><em>write-attribute</em></span> operation of the access authorization resource to set the <span class="emphasis"><em>provider</em></span> attribute to <span class="emphasis"><em>simple</em></span>.
				</p><div class="title"><strong>CLI to Disable RBAC</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/access=authorization:write-attribute( \
name=provider, value=simple)</pre><p>

					</p><p>
					If the server is offline the XML configuration can be edited to enable or disable RBAC. To do this, edit the provider attribute of the access-control element of the management element. Set the value to <span class="emphasis"><em>rbac</em></span> to enable, and <span class="emphasis"><em>simple</em></span> to disable.
				</p><div class="title"><strong>Example XML</strong></div><p>
						
</p><pre class="programlisting">&lt;management&gt;
  &lt;access-control provider="rbac"&gt;
    &lt;role-mapping&gt;
      &lt;role name="SuperUser"&gt;
        &lt;include&gt;
          &lt;user name="$local"/&gt;
        &lt;/include&gt;
      &lt;/role&gt;
    &lt;/role-mapping&gt;
  &lt;/access-control&gt;
&lt;/management&gt;</pre><p>

					</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="changing_the_permission_combination_policy"/>Changing the Permission Combination Policy</h2></div></div></div><p>
					The Permission Combination Policy determines how permissions are determined if a user is assigned more than one role. This can be set to permissive or rejecting. The default is <span class="emphasis"><em>permissive</em></span>.
				</p><p>
					When set to <span class="emphasis"><em>permissive</em></span>, if any role is assigned to the user that permits an action, then the action is allowed.
				</p><p>
					When set to <span class="emphasis"><em>rejecting</em></span>, if multiple roles are assigned to a user, then no action is allowed. This means that when the policy is set to rejecting each user should only be assigned one role. Users with multiple roles will not be able to use the Management Console or the Management CLI when the policy is set to rejecting.
				</p><p>
					The Permission Combination Policy is configured by setting the <span class="emphasis"><em>permission-combination-policy</em></span> attribute to either <span class="emphasis"><em>permissive</em></span> or <span class="emphasis"><em>rejecting</em></span>. This can be done using the Management CLI or by editing the server configuration XML file if the server is offline. The <span class="emphasis"><em>permission-combination-policy</em></span> attribute is part of the <span class="emphasis"><em>access-control</em></span> element and the <span class="emphasis"><em>access-control</em></span> element can be found in the <span class="emphasis"><em>management</em></span> element.
				</p><div class="title"><strong>Setting the Permission Combination Policy</strong></div><p>
						Use the write-attribute operation of the access authorization resource to set the permission-combination-policy attribute to the required policy name.
					</p><pre class="programlisting">/core-service=management/access=authorization:write-attribute( \
name=permission-combination-policy, value=POLICYNAME)</pre><p>
					The valid policy names are <span class="emphasis"><em>rejecting</em></span> and <span class="emphasis"><em>permissive</em></span>.
				</p><div class="title"><strong>Example CLI</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/access=authorization:write-attribute( \
name=permission-combination-policy, value=rejecting)</pre><p>

					</p><p>
					If the server is offline the XML configuration can be edited to change the permission combination policy value. To do this, edit the permission-combination-policy attribute of the access-control element.
				</p><div class="title"><strong>Example XML</strong></div><p>
						
</p><pre class="programlisting">&lt;access-control provider="rbac" permission-combination-policy="rejecting"&gt;
  &lt;role-mapping&gt;
    &lt;role name="SuperUser"&gt;
      &lt;include&gt;
        &lt;user name="$local"/&gt;
      &lt;/include&gt;
    &lt;/role&gt;
  &lt;/role-mapping&gt;
&lt;/access-control&gt;</pre><p>

					</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="managing_roles"/>Managing Roles</h2></div></div></div><p>
					When Role-Based Access Control (RBAC) is enabled, what a management user is permitted to do is determined by the roles to which the user is assigned. JBoss EAP 6 uses a system of includes and excludes based on both the user and group membership to determine to which role a user belongs.
				</p><p>
					A user is considered to be assigned to a role if the user is:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							listed as a user to be included in the role, or
						</li><li class="listitem">
							a member of a group that is listed to be included in the role.
						</li></ul></div><p>
					A user is also considered to be assigned to a role if the user is not:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							listed as a user to exclude from the role, or
						</li><li class="listitem">
							a member of a group that is listed to be excluded from the role.
						</li></ul></div><p>
					Exclusions take priority over inclusions.
				</p><p>
					Role include and exclude settings for users and groups can be configured using both the Management Console and the Management CLI.
				</p><p>
					Only users of the <span class="emphasis"><em>SuperUser</em></span> or <span class="emphasis"><em>Administrator</em></span> roles can perform this configuration.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configure_user_role_assignment_using_the_management_cli"/>Configure User Role Assignment using the Management CLI</h3></div></div></div><p>
						The configuration of mapping users and groups to roles is located at: <span class="emphasis"><em>/core-service=management/access=authorization</em></span> as <span class="emphasis"><em>role-mapping</em></span> elements.
					</p><p>
						Only users of the <span class="emphasis"><em>SuperUser</em></span> or <span class="emphasis"><em>Administrator</em></span> roles can perform this configuration.
					</p><div class="title"><strong>Viewing Role Assignment Configuration</strong></div><p>
							Use the <span class="emphasis"><em>:read-children-names</em></span> operation to get a complete list of the configured roles:
						</p><pre class="programlisting">/core-service=management/access=authorization:read-children-names(child-type=role-mapping)
{
    "outcome" =&gt; "success",
    "result" =&gt; [
        "Administrator",
        "Deployer",
        "Maintainer",
        "Monitor",
        "Operator",
        "SuperUser"
    ]
}</pre><p>
						Use the <span class="emphasis"><em>read-resource</em></span> operation of a specified role-mapping to get the full details of a specific role:
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME:read-resource(recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "include-all" =&gt; false,
        "exclude" =&gt; undefined,
        "include" =&gt; {
            "user-theboss" =&gt; {
                "name" =&gt; "theboss",
                "realm" =&gt; undefined,
                "type" =&gt; "USER"
            },
            "user-harold" =&gt; {
                "name" =&gt; "harold",
                "realm" =&gt; undefined,
                "type" =&gt; "USER"
            },
            "group-SysOps" =&gt; {
                "name" =&gt; "SysOps",
                "realm" =&gt; undefined,
                "type" =&gt; "GROUP"
            }
        }
    }
}</pre><div class="title"><strong>Add a new role</strong></div><p>
							This procedure shows how to add a role-mapping entry for a role. This must be done before the role can be configured.
						</p><p>
						Use the <span class="emphasis"><em>add</em></span> operation to add a new role configuration.
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME:add</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								ROLENAME is the name of the role that the new mapping is for (e.g. Auditor).
							</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor:add</pre><p>

						</p><div class="title"><strong>Add a user as included in a role</strong></div><p>
							This procedure shows how to add a user to the included list of a role.
						</p><p>
						If no configuration for a role has been done, then a role-mapping entry for it must be done first.
					</p><p>
						Use the <span class="emphasis"><em>add</em></span> operation to add a user entry to the includes list of the role.
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/include= \
ALIAS:add(name=USERNAME, type=USER)</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								ROLENAME is the name of the role being configured. (e.g. Auditor)
							</li><li class="listitem">
								ALIAS is a unique name for this mapping. Red Hat recommends that the use of a naming convention for aliases such as user-USERNAME. (e.g. user-max)
							</li><li class="listitem">
								USERNAME is the name of the user being added to the include list. (e.g. max)
							</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/include= \
user-max:add(name=max, type=USER)</pre><p>

						</p><div class="title"><strong>Add a user as excluded in a role</strong></div><p>
							This procedure shows how to add a user to the excluded list of a role.
						</p><p>
						If no configuration for a role has been done, then a role-mapping entry for it must be done first.
					</p><p>
						Use the <span class="emphasis"><em>add</em></span> operation to add a user entry to the excludes list of the role.
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/exclude= \
ALIAS:add(name=USERNAME, type=USER)</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								ROLENAME is the name of the role being configured. (e.g. Auditor)
							</li><li class="listitem">
								USERNAME is the name of the user being added to the exclude list. (e.g. max)
							</li><li class="listitem">
								ALIAS is a unique name for this mapping. Red Hat recommends that the use of a naming convention for aliases such as user-USERNAME. (e.g. user-max)
							</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/exclude= \
user-max:add(name=max, type=USER)</pre><p>

						</p><div class="title"><strong>Remove user role include configuration</strong></div><p>
							This procedure shows how to remove a user include entry from a role mapping.
						</p><p>
						Use the <span class="emphasis"><em>remove</em></span> operation to remove the entry.
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/include= \
ALIAS:remove</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								ROLENAME is the name of the role being configured (e.g. Auditor)
							</li><li class="listitem">
								ALIAS is a unique name for this mapping. Red Hat recommends that the use of a naming convention for aliases such as user-USERNAME. (e.g. user-max)
							</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/include= \
user-max:remove</pre><p>

						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							Removing the user from the list of includes does not remove the user from the system, nor does it guarantee that the role won’t be assigned to the user. The role might still be assigned based on group membership.
						</p></div><div class="title"><strong>Remove user role exclude configuration</strong></div><p>
							This procedure shows how to remove an user exclude entry from a role mapping.
						</p><p>
						Use the remove operation to remove the entry.
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/exclude= \
ALIAS:remove</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								ROLENAME is the name of the role being configured. (e.g. Auditor)
							</li><li class="listitem">
								ALIAS is a unique name for this mapping. Red Hat recommends that the use of a naming convention for aliases such as user-USERNAME. (e.g. user-max)
							</li></ul></div><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/exclude= \
user-max:remove</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							Removing the user from the list of excludes does not remove the user from the system, nor does it guarantee the role will be assigned to the user. Roles might still be excluded based on group membership.
						</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="roles_and_user_groups"/>Roles and User Groups</h2></div></div></div><p>
					Users authenticated using either the <code class="literal">mgmt-users.properties</code> file or an LDAP server, can be members of user groups. A user group is an arbitrary label that can be assigned to one or more users.
				</p><p>
					The RBAC system can be configured to automatically assign roles to users depending on what user groups they are members of. It can also exclude users from roles based on group membership.
				</p><p>
					When using the <code class="literal">mgmt-users.properties</code> file, group information is stored in the <code class="literal">mgmt-groups.properties</code> file. When using LDAP the group information is stored in the LDAP sever and maintained by those responsible for the LDAP server.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_group_role_assignment_using_the_management_cli"/>Configure Group Role Assignment using the Management CLI</h2></div></div></div><p>
					Groups to be included or excluded from a role can be configured in the Management Console and the Management CLI. This topic only shows using the Management CLI.
				</p><p>
					The configuration of mapping users and groups to roles is located in the management API at: <span class="emphasis"><em>/core-service=management/access=authorization</em></span> as <span class="emphasis"><em>role-mapping</em></span> elements.
				</p><p>
					Only users in the <span class="emphasis"><em>SuperUser</em></span> or <span class="emphasis"><em>Administrator</em></span> roles can perform this configuration.
				</p><div class="title"><strong>Viewing Group Role Assignment Configuration</strong></div><p>
						Use the <span class="emphasis"><em>read-children-names</em></span> operation to get a complete list of the configured roles:
					</p><pre class="programlisting">/core-service=management/access=authorization:read-children-names(child-type=role-mapping)
{
    "outcome" =&gt; "success",
    "result" =&gt; [
        "Administrator",
        "Deployer",
        "Maintainer",
        "Monitor",
        "Operator",
        "SuperUser"
    ]
}</pre><p>
					Use the <span class="emphasis"><em>read-resource</em></span> operation of a specified role-mapping to get the full details of a specific role:
				</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping= \
ROLENAME:read-resource(recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "include-all" =&gt; false,
        "exclude" =&gt; undefined,
        "include" =&gt; {
            "user-theboss" =&gt; {
                "name" =&gt; "theboss",
                "realm" =&gt; undefined,
                "type" =&gt; "USER"
            },
            "user-harold" =&gt; {
                "name" =&gt; "harold",
                "realm" =&gt; undefined,
                "type" =&gt; "USER"
            },
            "group-SysOps" =&gt; {
                "name" =&gt; "SysOps",
                "realm" =&gt; undefined,
                "type" =&gt; "GROUP"
            }
        }
    }
}</pre><div class="title"><strong>Add a new role</strong></div><p>
						This procedure shows how to add a role-mapping entry for a role. This must be done before the role can be configured.
					</p><p>
					Use the <span class="emphasis"><em>add</em></span> operation to add a new role configuration.
				</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME:add</pre><div class="title"><strong>Add a Group as included in a role</strong></div><p>
						This procedure shows how to add a Group to the included list of a role.
					</p><p>
					If no configuration for a role has been done, then a role-mapping entry for it must be done first.
				</p><p>
					Use the add operation to add a Group entry to the includes list of the role.
				</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping= \
ROLENAME/include=ALIAS:add(name=GROUPNAME, type=GROUP)</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							ROLENAME is the name of the role being configured. (e.g. Auditor)
						</li><li class="listitem">
							GROUPNAME is the name of the group being added to the include list. (e.g. investigators)
						</li><li class="listitem">
							ALIAS is a unique name for this mapping. Red Hat recommends that you use a naming convention for your aliases such as group-GROUPNAME. (e.g. group-investigators)
						</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/include= \
group-investigators:add(name=investigators, type=GROUP)</pre><p>

					</p><div class="title"><strong>Add a group as excluded in a role</strong></div><p>
						This procedure shows how to add a group to the excluded list of a role.
					</p><p>
					If no configuration for a role has been done, then a role-mapping entry for it must be created first.
				</p><p>
					Use the add operation to add a group entry to the excludes list of the role.
				</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/exclude= \
ALIAS:add(name=GROUPNAME, type=GROUP)</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							ROLENAME is the name of the role being configured (e.g. Auditor)
						</li><li class="listitem">
							GROUPNAME is the name of the group being added to the include list (e.g. supervisors)
						</li><li class="listitem">
							ALIAS is a unique name for this mapping. Red Hat recommends that you use a naming convention for your aliases such as group-GROUPNAME. (e.g. group-supervisors)
						</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/exclude= \
group-supervisors:add(name=supervisors, type=GROUP)</pre><p>

					</p><div class="title"><strong>Remove group role include configuration</strong></div><p>
						This procedure shows how to remove a group include entry from a role mapping.
					</p><p>
					Use the remove operation to remove the entry.
				</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/include= \
ALIAS:remove</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							ROLENAME is the name of the role being configured (e.g. Auditor)
						</li><li class="listitem">
							ALIAS is a unique name for this mapping. Red Hat recommends that you use a naming convention for your aliases such as group-GROUPNAME. (e.g. group-investigators)
						</li></ul></div><div class="title"><strong>Example CLI</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/include= \
group-investigators:remove</pre><p>

					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						Removing the group from the list of includes does not remove the group from the system, nor does it guarantee that the role won’t be assigned to users in this group. The role might still be assigned to users in the group individually.
					</p></div><div class="title"><strong>Remove a user group exclude entry</strong></div><p>
						This procedure shows how to remove a group exclude entry from a role mapping.
					</p><p>
					Use the remove operation to remove the entry.
				</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping=ROLENAME/exclude= \
ALIAS:remove</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							ROLENAME is the name of the role being configured. (e.g. Auditor)
						</li><li class="listitem">
							ALIAS is a unique name for this mapping. Red Hat recommends that you use a naming convention for your aliases such as group-GROUPNAME. (e.g. group-supervisors)
						</li></ul></div><pre class="programlisting">/core-service=management/access=authorization/role-mapping=Auditor/exclude= \
group-supervisors:remove</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						Removing the group from the list of excludes does not remove the group from the system. It also does not guarantee the role will be assigned to members of the group. Roles might still be excluded based on group membership.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_rbac_with_ldap"/>Using RBAC with LDAP</h2></div></div></div><p>
					The basics of using RBAC with LDAP as well as how to configure JBoss EAP 6 to use RBAC with LDAP are covered in the <span class="emphasis"><em>LDAP and RBAC</em></span> section in the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/how-to-configure-identity-management#ldap_and_rbac">How to Configure Identity Management guide</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="scoped_roles"/>Scoped Roles</h2></div></div></div><p>
					Scoped Roles are user-defined roles that grant the permissions of one of the standard roles but only for one or more specified server groups or hosts in an JBoss EAP 6 domain. Scoped roles allow for management users to be granted permissions that are limited to only those server groups or hosts that are required.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Scoped roles can be created by users assigned the <span class="emphasis"><em>Administrator</em></span> or <span class="emphasis"><em>SuperUser</em></span> roles.
					</p></div><p>
					They are defined by five characteristics:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							A unique name.
						</li><li class="listitem">
							Which of the standard roles it is based on.
						</li><li class="listitem">
							If it applies to Server Groups or Hosts
						</li><li class="listitem">
							The list of server groups or hosts that it is restricted to.
						</li><li class="listitem">
							If all users are automatically included. This defaults to false.
						</li></ul></div><p>
					Once created a scoped role can be assigned to users and groups the same way that the standard roles are.
				</p><p>
					Creating a scoped role does not allow for defining new permissions. Scoped roles can only be used to apply the permissions of an existing role in a limited scope. For example, a scoped role could be created based on the <span class="emphasis"><em>Deployer</em></span> role which is restricted to a single server group.
				</p><p>
					There are only two scopes that roles can be limited to:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Host-scoped roles</span></dt><dd>
								A role that is host-scoped restricts the permissions of that role to one or more hosts. This means access is provided to the relevant <span class="emphasis"><em>/host=*/</em></span> resource trees but resources that are specific to other hosts are hidden.
							</dd><dt><span class="term">Server-Group-scoped roles</span></dt><dd>
								A role that is server-group-scoped restricts the permissions of that role to one or more server groups. Additionally the role permissions will also apply to the profile, socket binding group, server config and server resources that are associated with the specified <span class="emphasis"><em>server-groups</em></span>. Any sub-resources within any of those that are not logically related to the server-group will not be visible to the user.
							</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring_scoped_roles_from_the_management_cli"/>Configuring Scoped Roles from the Management CLI</h3></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Only users in the <span class="emphasis"><em>SuperUser</em></span> or <span class="emphasis"><em>Administrator</em></span> roles can perform this configuration.
						</p></div><div class="title"><strong>Add a New Scoped Role</strong></div><p>
							To add a new Scoped Role, the following operations must be done:
						</p><pre class="programlisting">/core-service=management/access=authorization/server-group-scoped-role= \
NEW-SCOPED-ROLE:add(base-role=BASE-ROLE, server-groups=[SERVER-GROUP-NAME])</pre><pre class="programlisting">/core-service=management/access=authorization/role-mapping=NEW-SCOPED-ROLE:add</pre><p>
						Replace NEW-SCOPED-ROLE, BASE-ROLE, and SERVER-GROUP-NAME with the proper information.
					</p><div class="title"><strong>Viewing and Editing a Scoped Role Mapping</strong></div><p>
							A Scoped Role’s details (including members) can be view by issuing the following command:
						</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping= \
NEW-SCOPED-ROLE:read-resource(recursive=true)</pre><p>
						Replace NEW-SCOPED-ROLE with the proper information.
					</p><p>
						To edit a Scoped Role’s details, the <span class="emphasis"><em>write-attribute</em></span> command may be used. For example:
					</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping= \
NEW-SCOPED-ROLE:write-attribute(name=include-all, value=true)</pre><p>
						Replace NEW-SCOPED-ROLE with the proper information.
					</p><div class="title"><strong>Delete a Scoped Role</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/role-mapping= \
NEW-SCOPED-ROLE:remove</pre><p>

						</p><pre class="programlisting">/core-service=management/access=authorization/server-group-scoped-role= \
NEW-SCOPED-ROLE:remove</pre><p>
						Replace NEW-SCOPED-ROLE with the proper information.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							A Scoped Role cannot be deleted if users or groups are assigned to it. Remove the role assignments first, and then delete it.
						</p></div><div class="title"><strong>Adding and Removing Users</strong></div><p>
							Adding and removing users to and from Scoped Roles follows the same process as <a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#managing_roles" title="Managing Roles">adding and removing standard roles</a>.
						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring_scoped_roles_from_the_management_console"/>Configuring Scoped Roles from the Management Console</h3></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Only users in the <span class="emphasis"><em>SuperUser</em></span> or <span class="emphasis"><em>Administrator</em></span> roles can perform this configuration.
						</p></div><p>
						Scoped Role configuration in the management console can be found by following these steps:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Login to the Management Console
							</li><li class="listitem">
								Click on the <span class="emphasis"><em>Administration</em></span> tab
							</li><li class="listitem">
								Under the <span class="emphasis"><em>Access Control</em></span> menu on the left and select <span class="emphasis"><em>Role Assignment</em></span>.
							</li><li class="listitem">
								Select <span class="emphasis"><em>ROLES</em></span> tab, and then the <span class="emphasis"><em>Scoped Roles</em></span> tab within it.
							</li></ol></div><p>
						The Scoped Roles section of the Management Console consists of two main areas, a table containing a list of the currently configured scoped roles, and the <span class="emphasis"><em>Selection</em></span> panel which displays the details of the role currently selected in the table.
					</p><p>
						The following procedures show how to perform configuration tasks for Scoped Roles.
					</p><div class="orderedlist"><p class="title"><strong>Add a New Scoped Role</strong></p><ol class="orderedlist"><li class="listitem">
								Login to the Management Console
							</li><li class="listitem">
								Navigate to the <span class="emphasis"><em>Scoped Roles</em></span> area of the <span class="emphasis"><em>Roles</em></span> tab.
							</li><li class="listitem">
								Click <span class="emphasis"><em>Add</em></span>. The <span class="emphasis"><em>Add Scoped Role</em></span> dialog appears.
							</li><li class="listitem"><p class="simpara">
								Specify the following details:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<span class="strong"><strong>Name</strong></span>, the unique name for the new scoped role.
									</li><li class="listitem">
										<span class="strong"><strong>Base Role</strong></span>, the role which this role will base its permissions on.
									</li><li class="listitem">
										<span class="strong"><strong>Type</strong></span>, whether this role will be restricted to hosts or server groups.
									</li><li class="listitem">
										<span class="strong"><strong>Scope</strong></span>, the list of hosts or server groups that the role is restricted to. Multiple entries can be selected.
									</li><li class="listitem">
										<span class="strong"><strong>Include All</strong></span>, should this role automatically include all users. Defaults to no.
									</li></ul></div></li><li class="listitem">
								Click <span class="emphasis"><em>Save</em></span> and the dialog will close and the newly created role will appear in the table.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Edit a Scoped Role</strong></p><ol class="orderedlist"><li class="listitem">
								Login to the Management Console
							</li><li class="listitem">
								Navigate to the <span class="emphasis"><em>Scoped Roles</em></span> area of the <span class="emphasis"><em>Roles</em></span> tab.
							</li><li class="listitem">
								Click on the desired scoped role to edit in the table. The details of that role appears in the <span class="emphasis"><em>Selection</em></span> panel below the table.
							</li><li class="listitem">
								Click <span class="emphasis"><em>Edit</em></span> in the <span class="emphasis"><em>Selection</em></span> panel. The <span class="emphasis"><em>Selection</em></span> panel enters edit mode.
							</li><li class="listitem">
								Update the desired details to change and click the <span class="emphasis"><em>Save</em></span> button. The <span class="emphasis"><em>Selection</em></span> panel returns to its previous state. Both the <span class="emphasis"><em>Selection</em></span> panel and table show the newly updated details.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>View Scoped Role Members</strong></p><ol class="orderedlist"><li class="listitem">
								Login to the Management Console
							</li><li class="listitem">
								Navigate to the <span class="emphasis"><em>Scoped Roles</em></span> area of the <span class="emphasis"><em>Roles</em></span> tab.
							</li><li class="listitem">
								Click on the desired scoped role in the table to view the <span class="emphasis"><em>Members</em></span> of, then click <span class="emphasis"><em>Members</em></span>. The <span class="emphasis"><em>Members</em></span> of role dialog appears. It shows users and groups that are included or excluded from the role.
							</li><li class="listitem">
								Click <span class="emphasis"><em>Done</em></span> when finished reviewing this information.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Delete a Scoped Role</strong></p><ol class="orderedlist"><li class="listitem">
								Login to the Management Console
							</li><li class="listitem">
								Navigate to the <span class="emphasis"><em>Scoped Roles</em></span> area of the <span class="emphasis"><em>Roles</em></span> tab.
							</li><li class="listitem">
								Select the scoped role to be removed in the table.
							</li><li class="listitem">
								Click the <span class="emphasis"><em>Remove</em></span> button. The <span class="emphasis"><em>Remove Scoped Role</em></span> dialog appears.
							</li><li class="listitem">
								Click <span class="emphasis"><em>Confirm</em></span>.The dialog closes and the role is removed.
							</li></ol></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							A Scoped Role cannot be deleted if users or groups are assigned to it. Remove the role assignments first, and then delete it.
						</p></div><div class="title"><strong>Adding and Removing Users</strong></div><p>
							Adding and removing users to and from Scoped Roles follows the same process as adding and removing standard roles. To update a user’s Scoped Roles:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Login to the Management Console
							</li><li class="listitem">
								Click on the <span class="emphasis"><em>Administration</em></span> tab
							</li><li class="listitem">
								Under the <span class="emphasis"><em>Access Control</em></span> menu on the left and select <span class="emphasis"><em>Role Assignment</em></span>.
							</li><li class="listitem">
								Click on the <span class="emphasis"><em>Users</em></span> tab.
							</li><li class="listitem">
								Select the desired user from the table.
							</li><li class="listitem">
								Click <span class="emphasis"><em>Edit</em></span> in the <span class="emphasis"><em>Selection</em></span> section
							</li><li class="listitem">
								Once the desired roles have been added/removed, click <span class="emphasis"><em>Save</em></span>.
							</li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_constraints"/>Configuring Constraints</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring_sensitivity_constraints"/>Configuring Sensitivity Constraints</h3></div></div></div><p>
						Each Sensitivity Constraint defines a set of resources that are considered <span class="emphasis"><em>sensitive</em></span>. A <span class="emphasis"><em>sensitive</em></span> resource is generally one that either should be secret, like passwords, or one that will have serious impact on the server, like networking, JVM configuration, or system properties. The access control system itself is also considered sensitive. Resource sensitivity limits which roles are able to read, write or address a specific resource.
					</p><p>
						Sensitivity constraint configuration is in the at <span class="emphasis"><em>/core-service=management/access=authorization/constraint=sensitivity-classification</em></span>.
					</p><p>
						Within the management model each Sensitivity Constraint is identified as a classification. The classifications are then grouped into types. There are 39 included classifications that are arranged into 13 types.
					</p><p>
						To configure a sensitivity constraint, use the <span class="emphasis"><em>write-attribute</em></span> operation to set the <span class="emphasis"><em>configured-requires-read</em></span>, <span class="emphasis"><em>configured-requires-write</em></span>, or <span class="emphasis"><em>configured-requires-addressable</em></span> attribute. To make that type of operation sensitive set the value of the attribute to <span class="emphasis"><em>true</em></span>, otherwise to make it nonsensitive set it to <span class="emphasis"><em>false</em></span>. By default these attributes are not set and the values of <span class="emphasis"><em>default-requires-read</em></span>, <span class="emphasis"><em>default-requires-write</em></span>, and <span class="emphasis"><em>default-requires-addressable</em></span> are used. Once the configured attribute is set it is that value that is used instead of the default. The default values cannot be changed.
					</p><div class="title"><strong>Example - Make reading system properties a sensitive operation</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/constraint= \
sensitivity-classification/type=core/classification= \
system-property:write-attribute(name=configured-requires-read, \
value=true)</pre><p>

						</p><div class="title"><strong>Result</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/constraint= \
sensitivity-classification/type=core/classification= \
system-property:read-resource</pre><p>

						</p><pre class="programlisting">{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "configured-requires-addressable" =&gt; undefined,
        "configured-requires-read" =&gt; true,
        "configured-requires-write" =&gt; undefined,
        "default-requires-addressable" =&gt; false,
        "default-requires-read" =&gt; false,
        "default-requires-write" =&gt; true,
        "applies-to" =&gt; {
            "/core-service=platform-mbean/type=runtime" =&gt; undefined,
            "/system-property=*" =&gt; undefined,
            "/" =&gt; undefined
        }
    }
}</pre><p>
						What roles will be able to perform what operations depending on the configuration of these attributes is summarized in the following table:
					</p><div class="table"><a id="idm139684403428576"/><p class="title"><strong>Table 3.1. Sensitivity Constraint Configuration Outcomes</strong></p><div class="table-contents"><table summary="Sensitivity Constraint Configuration Outcomes" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/><col class="col_4"/></colgroup><thead><tr><th style="text-align: left" valign="top">Value</th><th style="text-align: left" valign="top">requires-read</th><th style="text-align: left" valign="top">requires-write</th><th style="text-align: left" valign="top">requires-addressable</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										true
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Read is sensitive. Only Auditor, Administrator, SuperUser can read.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Write is sensitive. Only Administrator and SuperUser can write
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Addressing is sensitive. Only Auditor, Administrator, SuperUser can address.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										false
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Read is not sensitive. Any management user can read.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Write is not sensitive. Only Maintainer, Administrator and SuperUser can write. Deployers can also write the resource is an application resource.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Addressing is not sensitive. Any management user can address.
									</p>
									 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configure_application_resource_constraints"/>Configure Application Resource Constraints</h3></div></div></div><p>
						Each Application Resource Constraint defines a set of resources, attributes and operations that are usually associated with the deployment of applications and services. When an application resource constraint is enabled management users of the <span class="emphasis"><em>Deployer</em></span> role are granted access to the resources that it applies to.
					</p><p>
						Application constraint configuration is at <span class="emphasis"><em>/core-service=management/access=authorization/constraint=application-classification/</em></span>.
					</p><p>
						Each Application Resource Constraint is identified as a classification. The classifications are then grouped into types. There are 14 included classifications that are arranged into 8 types. Each classification has an <span class="emphasis"><em>applies-to</em></span> element which is a list of resource path patterns to which the classifications configuration applies.
					</p><p>
						By default the only Application Resource classification that is enabled is core. Core includes deployments, deployment overlays, and the deployment operations.
					</p><p>
						To enable an Application Resource, use the <span class="emphasis"><em>write-attribute</em></span> operation to set the <span class="emphasis"><em>configured-application</em></span> attribute of the classification to <span class="emphasis"><em>true</em></span>. To disable an Application Resource, set this attribute to <span class="emphasis"><em>false</em></span>. By default these attributes are not set and the value of <span class="emphasis"><em>default-application</em></span> attribute is used. The default value cannot be changed.
					</p><div class="title"><strong>Enabling the logger-profile application resource classification</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/constraint= \
application-classification/type=logging/classification= \
logging-profile:write-attribute(name=configured-application, \
value=true)</pre><p>

						</p><div class="title"><strong>Result</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/constraint= \
application-classification/type=logging/classification= \
logging-profile:read-resource</pre><p>

						</p><pre class="programlisting">{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "configured-application" =&gt; true,
        "default-application" =&gt; false,
        "applies-to" =&gt; {"/subsystem=logging/logging-profile=*" =&gt; undefined}
    }
}</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Application Resource Constraints apply to all resources that match its configuration. For example, it is not possible to grant a <span class="emphasis"><em>Deployer</em></span> user access to one datasource resource but not another. If this level of separation is required then it is recommended to configure the resources in different server groups and create different scoped <span class="emphasis"><em>Deployer</em></span> roles for each group.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configure_the_vault_expression_constraint"/>Configure the Vault Expression Constraint</h3></div></div></div><p>
						By default, reading and writing vault expressions are sensitive operations. Configuring the Vault Expression Constraint allows either or both of those operations to be set to nonsensitive. Changing this constraint allows a greater number of roles to read and write vault expressions.
					</p><p>
						The vault expression constraint is found in the at <span class="emphasis"><em>/core-service=management/access=authorization/constraint=vault-expression</em></span>.
					</p><p>
						To configure the vault expression constraint, use the <span class="emphasis"><em>write-attribute</em></span> operation to set the attributes of <span class="emphasis"><em>configured-requires-write</em></span> and <span class="emphasis"><em>configured-requires-read</em></span> to <span class="emphasis"><em>true</em></span> or <span class="emphasis"><em>false</em></span>. By default these are not set and the values of <span class="emphasis"><em>default-requires-read</em></span> and <span class="emphasis"><em>default-requires-write</em></span> are used. The default values cannot be changed.
					</p><div class="title"><strong>Making writing to vault expressions a nonsensitive operation</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/constraint= \
vault-expression:write-attribute(name=configured-requires-write, \
value=false)</pre><p>

						</p><div class="title"><strong>Result</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/access=authorization/constraint= \
vault-expression:read-resource</pre><p>

						</p><pre class="programlisting">{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "configured-requires-read" =&gt; undefined,
        "configured-requires-write" =&gt; false,
        "default-requires-read" =&gt; true,
        "default-requires-write" =&gt; true
    }
}</pre><p>
						What roles will be able to read and write to vault expressions depending on this configuration is summarized in the following table:
					</p><div class="table"><a id="idm139684399825984"/><p class="title"><strong>Table 3.2. Vault Expression Constraint Configuration outcomes</strong></p><div class="table-contents"><table summary="Vault Expression Constraint Configuration outcomes" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Value</th><th style="text-align: left" valign="top">requires-read</th><th style="text-align: left" valign="top">requires-write</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										true
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Read operation is sensitive. Only Auditor, Administrator, and SuperUser can read.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Write operation is sensitive. Only Administrator, and SuperUser can write.
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										false
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Read operation is not sensitive. All management users can read.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Write operation is not sensitive. Monitor, Administrator, and SuperUser can write. Deployers can also write if the vault expression is in an Application Resource.
									</p>
									 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="application_resource_constraints_reference"/>Application Resource Constraints Reference</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: deployment-overlay</strong></p><ul class="itemizedlist"><li class="listitem">
								default: true
							</li><li class="listitem">
								PATH: /deployment-overlay=*
							</li><li class="listitem">
								PATH: /deployment=*
							</li><li class="listitem">
								PATH: /
							</li><li class="listitem">
								Operation: upload-deployment-stream, full-replace-deployment, upload-deployment-url, upload-deployment-bytes
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: datasources - Classification: datasource</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /deployment=*/subdeployment=*/subsystem=datasources/data-source=*
							</li><li class="listitem">
								PATH: /subsystem=datasources/data-source=*
							</li><li class="listitem">
								PATH: /subsystem=datasources/data-source=ExampleDS
							</li><li class="listitem">
								PATH: /deployment=*/subsystem=datasources/data-source=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: datasources - Classification: jdbc-driver</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=datasources/jdbc-driver=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: datasources - Classification: xa-data-source</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=datasources/xa-data-source=*
							</li><li class="listitem">
								PATH: /deployment=*/subsystem=datasources/xa-data-source=*
							</li><li class="listitem">
								PATH: /deployment=*/subdeployment=*/subsystem=datasources/xa-data-source=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: logging - Classification: logger</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=logging/logger=*
							</li><li class="listitem">
								PATH: /subsystem=logging/logging-profile=*/logger=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: datasources - Classification: logging-profile</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=logging/logging-profile=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: mail - Classification: mail-session</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: naming - Classification: binding</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=naming/binding=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: resource-adapters - Classification: resource-adapters</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=resource-adapters/resource-adapter=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: security - Classification: security-domain</strong></p><ul class="itemizedlist"><li class="listitem">
								default: false
							</li><li class="listitem">
								PATH: /subsystem=security/security-domain=*
							</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sensitivity_constraints_reference"/>Sensitivity Constraints Reference</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: access-control</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: true
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=management/access=authorization
							</li><li class="listitem">
								PATH: /subsystem=jmx ATTRIBUTE: non-core-mbean-sensitivity
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: credential</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=pop3 ATTRIBUTE: username , password
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=imap ATTRIBUTE: username , password
							</li><li class="listitem">
								PATH: /subsystem=datasources/xa-data-source=* ATTRIBUTE: user-name, recovery-username, password, recovery-password
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/custom=* ATTRIBUTE: username, password
							</li><li class="listitem">
								PATH: /subsystem=datasources/data-source=*" ATTRIBUTE: user-name, password
							</li><li class="listitem">
								PATH: /subsystem=remoting/remote-outbound-connection=*" ATTRIBUTE: username
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=smtp ATTRIBUTE: username, password
							</li><li class="listitem">
								PATH: /subsystem=web/connector=*/configuration=ssl ATTRIBUTE: key-alias, password
							</li><li class="listitem">
								PATH: /subsystem=resource-adapters/resource-adapter=*/connection-definitions=*" ATTRIBUTE: recovery-username, recovery-password
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: domain-controller</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: domain-names</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: extensions</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /extension=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: jvm</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=platform-mbean/type=runtime ATTRIBUTE: input-arguments, boot-class-path, class-path, boot-class-path-supported, library-path
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: management-interfaces</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								/core-service=management/management-interface=native-interface
							</li><li class="listitem">
								/core-service=management/management-interface=http-interface
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: module-loading</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=module-loading
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: patching</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=patching/addon=*
							</li><li class="listitem">
								PATH: /core-service=patching/layer=*"
							</li><li class="listitem">
								PATH: /core-service=patching
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: read-whole-config</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: / OPERATION: read-config-as-xml
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: security-domain</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: true
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=security/security-domain=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: security-domain-ref</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: true
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=datasources/xa-data-source=* ATTRIBUTE: security-domain
							</li><li class="listitem">
								PATH: /subsystem=datasources/data-source=* ATTRIBUTE: security-domain
							</li><li class="listitem">
								PATH: /subsystem=ejb3 ATTRIBUTE: default-security-domain
							</li><li class="listitem">
								PATH: /subsystem=resource-adapters/resource-adapter=*/connection-definitions=* ATTRIBUTE: security-domain, recovery- security-domain, security-application, security-domain-and-application
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: security-realm</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: true
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=management/security-realm=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: security-realm-ref</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: true
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=remoting/connector=* ATTRIBUTE: security-realm
							</li><li class="listitem">
								PATH: /core-service=management/management-interface=native-interface ATTRIBUTE: security-realm
							</li><li class="listitem">
								PATH: /core-service=management/management-interface=http-interface ATTRIBUTE: security-realm
							</li><li class="listitem">
								PATH: /subsystem=remoting/remote-outbound-connection=* ATTRIBUTE: security-realm
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: security-vault</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=vault
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: service-container</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=service-container
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: snapshots</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: false
							</li><li class="listitem">
								PATH: / ATTRIBUTE: take-snapshot, list-snapshots, delete-snapshot
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: socket-binding-ref</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: false
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=pop3 ATTRIBUTE: outbound-socket-binding-ref
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=imap ATTRIBUTE: outbound-socket-binding-ref
							</li><li class="listitem">
								PATH: /subsystem=remoting/connector=* ATTRIBUTE: socket-binding
							</li><li class="listitem">
								PATH: /subsystem=web/connector=* ATTRIBUTE: socket-binding
							</li><li class="listitem">
								PATH: /subsystem=remoting/local-outbound-connection=* ATTRIBUTE: outbound-socket-binding-ref
							</li><li class="listitem">
								PATH: /socket-binding-group=*/local-destination-outbound-socket-binding=* ATTRIBUTE: socket-binding-ref
							</li><li class="listitem">
								PATH: /subsystem=remoting/remote-outbound-connection=* ATTRIBUTE: outbound-socket-binding-ref
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=smtp ATTRIBUTE: outbound-socket-binding-ref
							</li><li class="listitem">
								PATH: /subsystem=transactions ATTRIBUTE: process-id-socket-binding, status-socket-binding, socket-binding
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: socket-config</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /interface=* OPERATION: resolve-internet-address
							</li><li class="listitem">
								PATH: /core-service=management/management-interface=native-interface ATTRIBUTE: port, interface, socket-binding
							</li><li class="listitem">
								PATH: /socket-binding-group=*
							</li><li class="listitem">
								PATH: /core-service=management/management-interface=http-interface ATTRIBUTE: port, secure-port, interface, secure-socket-binding, socket-binding
							</li><li class="listitem">
								PATH: / OPERATION: resolve-internet-address
							</li><li class="listitem">
								PATH: /subsystem=transactions ATTRIBUTE: process-id-socket-max-ports
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: core - Classification: system-property</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /core-service=platform-mbean/type=runtime ATTRIBUTE: system-properties
							</li><li class="listitem">
								PATH: /system-property=*
							</li><li class="listitem">
								PATH: / OPERATION: resolve-expression
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: datasources - Classification: data-source-security</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=datasources/xa-data-source=* ATTRIBUTE: user-name, security-domain, password
							</li><li class="listitem">
								PATH: /subsystem=datasources/data-source=* ATTRIBUTE: user-name, security-domain, password
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: jdr - Classification: jdr</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=jdr OPERATION: generate-jdr-report
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: jmx - Classification: jmx</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=jmx
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: mail - Classification: mail-server-security</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=pop3 ATTRIBUTE: username, tls, ssl, password
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=imap ATTRIBUTE: username, tls, ssl, password
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=<span class="strong"><strong>/custom=</strong></span> ATTRIBUTE: username, tls, ssl, password
							</li><li class="listitem">
								PATH: /subsystem=mail/mail-session=*/server=smtp ATTRIBUTE: username, tls, ssl, password
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: naming - Classification: jndi-view</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=naming OPERATION: jndi-view
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: naming - Classification: naming-binding</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: false
							</li><li class="listitem">
								PATH: /subsystem=naming/binding=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: remoting - Classification: remoting-security</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=remoting/connector=* ATTRIBUTE: authentication-provider, security-realm
							</li><li class="listitem">
								PATH: /subsystem=remoting/remote-outbound-connection=* ATTRIBUTE: username, security-realm
							</li><li class="listitem">
								PATH: /subsystem=remoting/connector=*/security=sasl
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: resource-adapters - Classification: resource-adapter-security</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=resource-adapters/resource-adapter=*/connection-definitions=* ATTRIBUTE: security-domain, recovery-username, recovery-security-domain, security-application, security-domain-and-application, recovery-password
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: security - Classification: misc-security</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=security ATTRIBUTE: deep-copy-subject-mode
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: web - Classification: web-access-log</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: false
							</li><li class="listitem">
								PATH: /subsystem=web/virtual-server=*/configuration=access-log
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: web - Classification: web-connector</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: false
							</li><li class="listitem">
								PATH: /subsystem=web/connector=*
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: web - Classification: web-ssl</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=web/connector=*/configuration=ssl
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: web - Classification: web-sso</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: true
							</li><li class="listitem">
								requires-write: true
							</li><li class="listitem">
								PATH: /subsystem=web/virtual-server=*/configuration=sso
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Type: web - Classification: web-valve</strong></p><ul class="itemizedlist"><li class="listitem">
								requires-addressable: false
							</li><li class="listitem">
								requires-read: false
							</li><li class="listitem">
								requires-write: false
							</li><li class="listitem">
								PATH: /subsystem=web/valve=*
							</li></ul></div></div></div></div></div></body></html>