<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. Securing the Server and Its Interfaces</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="securing_the_server_and_its_interfaces"/>Chapter 2. Securing the Server and Its Interfaces</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="building_blocks"/>Building Blocks</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="interfaces_and_socket_bindings"/>Interfaces and Socket Bindings</h2></div></div></div><p>
					JBoss EAP 6 utilizes its host’s interfaces (e.g. inet-address, nic, etc) and ports for communication for both its web applications as well as its management interfaces. These interfaces and ports are defined and configured through the <span class="emphasis"><em>interfaces</em></span> and <span class="emphasis"><em>socket-binding-groups</em></span> settings in the JBoss EAP 6 configuration files (e.g. <code class="literal">standalone.xml</code>, <code class="literal">domain.xml</code>, <code class="literal">host.xml</code>, etc). For more information on how to define and configure <span class="emphasis"><em>interfaces</em></span> and <span class="emphasis"><em>socket-binding-groups</em></span>, consult the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#sect-Interfaces">Interfaces</a> and <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#sect-Socket_Binding_Groups">Socket Binding Groups</a> sections of the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html">Red Hat JBoss Enterprise Application Platform 6 Administration and Configuration Guide</a>.
				</p><div class="title"><strong>Example Interfaces</strong></div><p>
						
</p><pre class="programlisting">&lt;interfaces&gt;
  &lt;interface name="management"&gt;
    &lt;inet-address value="${jboss.bind.address.management:127.0.0.1}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="public"&gt;
    &lt;inet-address value="${jboss.bind.address:127.0.0.1}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="unsecure"&gt;
    &lt;inet-address value="${jboss.bind.address.unsecure:127.0.0.1}"/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</pre><p>

					</p><div class="title"><strong>Example Socket Binding Group</strong></div><p>
						
</p><pre class="programlisting">&lt;socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}"&gt;
  &lt;socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/&gt;
  &lt;socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/&gt;
  &lt;socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/&gt;
  &lt;socket-binding name="ajp" port="8009"/&gt;
  &lt;socket-binding name="http" port="8080"/&gt;
  &lt;socket-binding name="https" port="8443"/&gt;
  &lt;socket-binding name="remoting" port="4447"/&gt;
  &lt;socket-binding name="txn-recovery-environment" port="4712"/&gt;
  &lt;socket-binding name="txn-status-manager" port="4713"/&gt;
  &lt;outbound-socket-binding name="mail-smtp"&gt;
    &lt;remote-destination host="localhost" port="25"/&gt;
  &lt;/outbound-socket-binding&gt;
&lt;/socket-binding-group&gt;</pre><p>

					</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="security_realms"/>Security Realms</h2></div></div></div><p>
					JBoss EAP 6 uses security realms to define authentication and authorization mechanisms (e.g. local, LDAP, properties, etc) which can then be used by the management interfaces. For more background information on security realms, consult the <span class="emphasis"><em>Security Realms</em></span> section of the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#security_realms">Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>.
				</p><div class="title"><strong>Example Security Realms</strong></div><p>
						
</p><pre class="programlisting">&lt;security-realms&gt;
  &lt;security-realm name="ManagementRealm"&gt;
    &lt;authentication&gt;
      &lt;local default-user="$local" skip-group-loading="true"/&gt;
      &lt;properties path="mgmt-users.properties" relative-to="jboss.server.config.dir"/&gt;
    &lt;/authentication&gt;
    &lt;authorization map-groups-to-roles="false"&gt;
      &lt;properties path="mgmt-groups.properties" relative-to="jboss.server.config.dir"/&gt;
    &lt;/authorization&gt;
  &lt;/security-realm&gt;
  &lt;security-realm name="ApplicationRealm"&gt;
    &lt;authentication&gt;
      &lt;local default-user="$local" allowed-users="*" skip-group-loading="true"/&gt;
      &lt;properties path="application-users.properties" relative-to="jboss.server.config.dir"/&gt;
    &lt;/authentication&gt;
    &lt;authorization&gt;
      &lt;properties path="application-roles.properties" relative-to="jboss.server.config.dir"/&gt;
    &lt;/authorization&gt;
  &lt;/security-realm&gt;
&lt;/security-realms&gt;</pre><p>

					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						In addition to updating the existing security realms, JBoss EAP 6 also allows for new security realms to be created and used. New security realms may be created via the Management Console as well as invoking the following command from the Management CLI: <span class="emphasis"><em>/core-service=management/security-realm=NEW-REALM-NAME:add()</em></span>
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_security_realms_and_socket_bindings_for_securing_the_management_interfaces"/>Using Security Realms and Socket Bindings for Securing the Management Interfaces</h2></div></div></div><p>
					JBoss EAP 6 defines two distinct management interfaces:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							http-interface
						</li><li class="listitem">
							native-interface
						</li></ul></div><p>
					These interfaces are defined in the <span class="emphasis"><em>&lt;management-interfaces&gt;</em></span> section of the JBoss EAP 6 configuration:
				</p><pre class="programlisting">&lt;management-interfaces&gt;
  &lt;native-interface security-realm="ManagementRealm"&gt;
    &lt;socket-binding native="management-native"/&gt;
  &lt;/native-interface&gt;
  &lt;http-interface security-realm="ManagementRealm"&gt;
    &lt;socket-binding http="management-http"/&gt;
  &lt;/http-interface&gt;
&lt;/management-interfaces&gt;</pre><p>
					Notice that each interface specifies a <span class="emphasis"><em>security-realm</em></span> and <span class="emphasis"><em>socket-binding</em></span>. Updating the configuration for the specified security realm and socket binding allows for the management interfaces to be secured in different ways. In addition to being able to secure each of these interfaces via security realms and socket bindings, both of these interfaces also may be completely disabled, and users of these interfaces may be configured to have various roles and access rights. There are also a few topics in this guide, such as security auditing, secure passwords and JMX that overlap with other subsystems within JBoss EAP 6, but still relate to securing JBoss EAP 6.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_secure_the_management_interfaces"/>How to Secure the Management Interfaces</h1></div></div></div><p>
				The following sections show how to perform various operations related to securing the JBoss EAP 6 management interfaces and related subsystems.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The below CLI commands were done assuming a standalone instance of JBoss EAP 6. For more details on using the CLI with JBoss EAP 6 domains, please consult <span class="emphasis"><em>The Management CLI</em></span> section of the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#sect-The_Management_CLI">Red Hat JBoss Enterprise Application Platform 6 Administration and Guide</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_the_networking_and_ports_used_by_red_hat_jboss_enterprise_application_platform_6"/>Configuring the Networking and Ports Used by Red Hat JBoss Enterprise Application Platform 6</h2></div></div></div><p>
					Depending on the configuration of the host, JBoss EAP 6 may be configured to use various network interfaces and ports. This allows JBoss EAP 6 to work with different host, networking, and firewall requirements. For more information on the Networking and Ports used by JBoss EAP 6 as well as how to configure those settings, please see the <span class="emphasis"><em>Network and Port Configuration</em></span> section of the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#chap-Network_and_Port_Configuration">Red Hat JBoss Enterprise Application Platform 6 Administration and Configuration guide</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_the_management_console_for_https"/>Configure the Management Console for HTTPS</h2></div></div></div><p>
					Configuring the JBoss EAP 6 management console for communication only via HTTPS provides increased security. All network traffic between the client (web browser) and management console is encrypted, which reduces the risk of security attacks such as a man-in-the-middle attack.
				</p><p>
					In this procedure unencrypted communication with the JBoss EAP 6 standalone instance or domain is disabled. This procedure applies to both standalone and domain mode configurations. For domain mode, prefix the Management CLI commands with the name of the host, for example: <code class="literal">/host=master</code>.
				</p><p>
					To configure the Management Console for HTTPS, the following steps are required:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#one_create_a_keystore_to_secure_the_management_console" title="1. Create a Keystore to Secure the Management Console">Create a Keystore to Secure the Management Console</a>
						</li><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#two_ensure_the_management_console_binds_to_https" title="2. Ensure the Management Console Binds to HTTPS">Ensure the Management Console Binds to HTTPS</a>
						</li><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#three_optional_custom_socket_binding_group" title="3. Optional: Custom socket-binding Group">Optional: Custom socket-binding Group</a>
						</li><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#four_create_a_new_security_realm" title="4. Create a New Security Realm">Create a New Security Realm</a>
						</li><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#five_configure_management_interface_to_use_the_new_security_realm" title="5. Configure Management Interface to Use the New Security Realm">Configure Management Interface to Use the New Security Realm</a>
						</li><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#six_configure_the_management_console_to_use_the_keystore" title="6. Configure the Management Console to Use the Keystore">Configure the Management Console to Use the Keystore</a>
						</li><li class="listitem">
							<a class="link" href="securing_the_server_and_its_interfaces.html#seven_restart_the_red_hat_jboss_enterprise_application_platform_6_instance" title="7. Restart the Red Hat JBoss Enterprise Application Platform 6 Instance">Restart the Red Hat JBoss Enterprise Application Platform 6 Instance</a>
						</li></ol></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="one_create_a_keystore_to_secure_the_management_console"/>1. Create a Keystore to Secure the Management Console</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							This keystore must be in JKS format as the management console is not compatible with keystores in JCEKS format.
						</p></div><p>
						Use the following to generate a keystore, replacing the example values for the parameters (e.g. alias, keypass, keystore, storepass and dname) with the correct values for the environment.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							The parameter <span class="emphasis"><em>validity</em></span> specifies for how many days the key is valid. A value of 730 equals two years.
						</p></div><div class="title"><strong>Using the <code class="literal">keytool</code> command to generate a keystore from the terminal</strong></div><p>
							
</p><pre class="programlisting">keytool -genkeypair -alias appserver -storetype jks -keyalg RSA -keysize 2048 -keypass password1 -keystore EAP_HOME/standalone/configuration/identity.jks -storepass password1 -dname "CN=appserver,OU=Sales,O=Systems Inc,L=Raleigh,ST=NC,C=US" -validity 730 -v</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="two_ensure_the_management_console_binds_to_https"/>2. Ensure the Management Console Binds to HTTPS</h3></div></div></div><div class="title"><strong>Standalone Mode</strong></div><p>
							Ensure the management console binds to HTTPS for its interface by adding the <span class="emphasis"><em>management-https</em></span> configuration and removing the <span class="emphasis"><em>management-http</em></span> configuration.
						</p><p>
						Use the following CLI commands to bind the Management Console to HTTPS:
					</p><pre class="programlisting">/core-service=management/management-interface=http-interface:write-attribute( \
name=secure-socket-binding, value=management-https)</pre><pre class="programlisting">/core-service=management/management-interface= \
http-interface:undefine-attribute(name=socket-binding)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							At this point the JBoss EAP 6 log may display the following error message: <span class="emphasis"><em>JBAS015103: A secure port has been specified for the HTTP interface but no SSL configuration in the realm.</em></span> This is to be expected because the SSL configuration is not yet completed.
						</p></div><div class="title"><strong>Domain Mode</strong></div><p>
							Change the socket element within the <span class="emphasis"><em>management-interface</em></span> section by adding <span class="emphasis"><em>secure-port</em></span> and removing port configuration.
						</p><p>
						Use the following commands to bind the Management Console to HTTPS:
					</p><pre class="programlisting">/host=master/core-service=management/management-interface= \
http-interface:write-attribute(name=secure-port,value=9443)</pre><pre class="programlisting">/host=master/core-service=management/management-interface= \
http-interface:undefine-attribute(name=port)</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							At this point the JBoss EAP 6 log may display the following error message: <span class="emphasis"><em>JBAS015103: A secure port has been specified for the HTTP interface but no SSL configuration in the realm.</em></span> This is to be expected because the SSL configuration is not yet completed.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="three_optional_custom_socket_binding_group"/>3. Optional: Custom socket-binding Group</h3></div></div></div><p>
						If a custom socket-binding group is being used, ensure the management-https binding is defined (it is present by default, bound to port 9443). Edit the master configuration file (e.g. <code class="literal">standalone.xml</code>) to match the following:
					</p><div class="title"><strong>Example XML</strong></div><p>
							
</p><pre class="programlisting">&lt;socket-binding-group name="standard-sockets" default-interface="public"
    port-offset="${jboss.socket.binding.port-offset:0}"&gt;
  &lt;socket-binding name="management-native" interface="management"
    port="${jboss.management.native.port:9999}"/&gt;
  &lt;socket-binding name="management-http" interface="management"
    port="${jboss.management.http.port:9990}"/&gt;
  &lt;socket-binding name="management-https" interface="management"
    port="${jboss.management.https.port:9443}"/&gt;
...</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="four_create_a_new_security_realm"/>4. Create a New Security Realm</h3></div></div></div><p>
						In this example, the new security realm using HTTPS (ManagementRealmHTTPS) will use a properties file named <code class="literal">https-mgmt-users.properties</code> located in the <code class="literal">EAP_HOME/standalone/configuration/</code> directory for storing usernames and passwords. Usernames and passwords will be added to the file later, but for now, simply create an empty file named <span class="emphasis"><em>https-mgmt-users.properties</em></span> and save it to that location. The below example shows using the <code class="literal">touch</code> command from the terminal, but other mechanisms (such as using a text editor) could be used as well:
					</p><div class="title"><strong>Example using the <code class="literal">touch</code> command from the terminal to create an empty file</strong></div><p>
							
</p><pre class="programlisting">touch EAP_HOME/standalone/configuration/https-mgmt-users.properties</pre><p>

						</p><p>
						Next, enter the following CLI commands to create a new security realm named ManagementRealmHTTPS:
					</p><pre class="programlisting">/core-service=management/security-realm=ManagementRealmHTTPS/:add</pre><pre class="programlisting">/core-service=management/security-realm=ManagementRealmHTTPS/authentication= \
properties/:add(path=https-mgmt-users.properties, \
relative-to=jboss.server.config.dir)</pre><p>
						Now that the new properties file and realm have been created, users have to be added to that property file for use by the realm. This is accomplished via the <code class="literal">add-user</code> script available in the <code class="literal">EAP_HOME/bin/</code> directory. When running the <code class="literal">add-user</code>, both the properties file and realm need to be specified using the <code class="literal">-up</code> and <code class="literal">-r</code> options respectively. From there, the <code class="literal">add-user</code> script will interactively prompt for the username and password information to store in the <code class="literal">https-mgmt-users.properties</code> file.
					</p><pre class="programlisting">EAP_HOME/bin/add-user.sh -up EAP_HOME/standalone/configuration/https-mgmt-users.properties -r ManagementRealmHTTPS
...
Enter the details of the new user to add.
Using realm 'ManagementRealmHTTPS' as specified on the command line.
...
Username : httpUser
Password requirements are listed below. To modify these restrictions edit the add-user.properties configuration file.
 - The password must not be one of the following restricted values {root, admin, administrator}
 - The password must contain at least 8 characters, 1 alphabetic character(s), 1 digit(s), 1 non-alphanumeric symbol(s)
 - The password must be different from the username
...
Password :
Re-enter Password :
About to add user 'httpUser' for realm 'ManagementRealmHTTPS'
...
Is this correct yes/no? yes
..
Added user 'httpUser' to file 'EAP_HOME/configuration/https-mgmt-users.properties'
...
Is this new user going to be used for one AS process to connect to another AS process?
e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server EJB calls.
yes/no? no</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							When configuring security realms that use property files to store usernames and passwords, it is recommended that each realm use a distinct properties file that is not shared with another realm.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="five_configure_management_interface_to_use_the_new_security_realm"/>5. Configure Management Interface to Use the New Security Realm</h3></div></div></div><div class="title"><strong>CLI Command for Using a New Security Realm</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/management-interface=http-interface/:write-attribute( \
name=security-realm,value=ManagementRealmHTTPS)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="six_configure_the_management_console_to_use_the_keystore"/>6. Configure the Management Console to Use the Keystore</h3></div></div></div><p>
						Use the below CLI command to configure the management console to use the keystore. For the parameters file, password and alias their values must be copied from the <a class="link" href="securing_the_server_and_its_interfaces.html#one_create_a_keystore_to_secure_the_management_console" title="1. Create a Keystore to Secure the Management Console">first step</a>.
					</p><div class="title"><strong>CLI Command for Adding a Keystore to a Security Realm</strong></div><p>
							
</p><pre class="programlisting">/core-service=management/security-realm=ManagementRealmHTTPS/server-identity= \
ssl:add(keystore-path=identity.jks, \
keystore-relative-to=jboss.server.config.dir, \
keystore-password=password1, alias=appserver)</pre><p>

						</p><pre class="programlisting">reload</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							To update the keystore password, use the following CLI command:
						</p><pre class="screen">/core-service=management/security-realm=ManagementRealmHTTPS/server-identity=ssl:write-attribute(name=keystore-password,value=newpassword)</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="seven_restart_the_red_hat_jboss_enterprise_application_platform_6_instance"/>7. Restart the Red Hat JBoss Enterprise Application Platform 6 Instance</h3></div></div></div><p>
						On restarting the server the log should contain the following, just before the text which states the number of services that are started. The management console is now listening on port 9443, which confirms that the procedure was successful.
					</p><pre class="programlisting">14:53:14,720 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015962: Http management interface listening on https://127.0.0.1:9443/management
14:53:14,721 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015952: Admin console listening on https://127.0.0.1:9443</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="setting_up_distinct_http_and_https_management_interfaces"/>Setting up Distinct HTTP and HTTPS Management Interfaces</h2></div></div></div><p>
					The Management Interface can listen on distinct interfaces for HTTP and HTTPS connections. One scenario for this is to listen for encrypted traffic on an external network, and use unencrypted traffic on an internal network.
				</p><p>
					The <span class="emphasis"><em>secure-interface</em></span> attribute specifies the network interface on which the host’s socket for HTTPS management communication should be opened, if a different interface should be used from that specified by the <span class="emphasis"><em>interface</em></span> attribute. If it is not specified then the <span class="emphasis"><em>interface</em></span> specified by the interface attribute is used.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						The <span class="emphasis"><em>secure-interface</em></span> attribute has no effect if the <span class="emphasis"><em>secure-port</em></span> attribute is not set.
					</p></div><p>
					Note that when the server listens for HTTP and HTTPS traffic on the same interface, HTTPS requests received by the HTTP listener are automatically redirected to the HTTPS port. When distinct interfaces are used for HTTP and HTTPS traffic, no redirection is performed when an HTTPS request is received by the HTTP listener.
				</p><p>
					Here is an example <code class="literal">EAP_HOME/domain/configuration/host.xml</code> configuration that sets the <span class="emphasis"><em>secure-interface</em></span> attribute to listen for HTTPS traffic on a distinct interface from HTTP traffic:
				</p><div class="title"><strong>Example XML</strong></div><p>
						
</p><pre class="programlisting">&lt;host name="master" xmlns="urn:jboss:domain:3.0"&gt;
    &lt;management&gt;
        &lt;security-realms&gt;
            &lt;security-realm name="ManagementRealm"&gt;
                &lt;authentication&gt;
                    &lt;local default-user="$local" /&gt;
                    &lt;properties path="mgmt-users.properties"
                      relative-to="jboss.domain.config.dir"/&gt;
                &lt;/authentication&gt;
            &lt;/security-realm&gt;
        &lt;/security-realms&gt;
        &lt;management-interfaces&gt;
            &lt;native-interface security-realm="ManagementRealm"&gt;
                &lt;socket interface="management"
                  port="${jboss.management.native.port:9999}"/&gt;
            &lt;/native-interface&gt;
            &lt;http-interface security-realm="ManagementRealm"&gt;
                &lt;socket interface="management"
                  port="${jboss.management.http.port:9990}"
                  secure-port="${jboss.management.https.port:9943}"
                  secure-interface="secure-management"/&gt;
            &lt;/http-interface&gt;
        &lt;/management-interfaces&gt;
    &lt;/management&gt;
    &lt;domain-controller&gt;
        &lt;local/&gt;
        &lt;!-- Alternative remote domain controller configuration with a host and port --&gt;
        &lt;!-- &lt;remote host="${jboss.domain.master.address}" port="${jboss.domain.master.port:9999}" security-realm="ManagementRealm"/&gt; --&gt;
    &lt;/domain-controller&gt;
    &lt;interfaces&gt;
        &lt;interface name="management"&gt;
            &lt;inet-address value="${jboss.bind.address.management:127.0.0.1}"/&gt;
        &lt;/interface&gt;
        &lt;interface name="secure-management"&gt;
            &lt;inet-address value="${jboss.bind.address:10.10.64.1}"/&gt;
        &lt;/interface&gt;
    &lt;/interfaces&gt;
&lt;/host&gt;</pre><p>

					</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="disabling_the_http_interfaces"/>Disabling the HTTP Interfaces</h2></div></div></div><p>
					In certain scenarios, such as managed domain or certain production deployments, administrators may wish to disable access to the management interfaces via HTTP or remove the HTTP management interface entirely.
				</p><p>
					The following may be used to read the current configuration of the HTTP interface:
				</p><div class="title"><strong>CLI Command for Reading the Current HTTP Interface Configuration</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/management-interface=http-interface/:read-resource( \
recursive=true, proxies=false, include-runtime=false, include-defaults=true)</pre><p>

					</p><div class="title"><strong>Result</strong></div><p>
						
</p><pre class="programlisting">{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "console-enabled" =&gt; true,
        "interface" =&gt; "management",
        "port" =&gt; expression "${jboss.management.http.port:9990}",
        "secure-port" =&gt; undefined,
        "security-realm" =&gt; "ManagementRealm"
    }
}</pre><p>

					</p><p>
					To remove the HTTP interface entirely:
				</p><div class="title"><strong>CLI Command for Removing the HTTP Interface Entirely</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/management-interface=http-interface/:remove</pre><p>

					</p><p>
					Once the HTTP interface has been removed, it can be enabled again by re-creating it:
				</p><div class="title"><strong>CLI Command for Re-Creating the HTTP Interface:</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/management-interface=http-interface:add( \
console-enabled=true, interface=management, \
port="${jboss.management.http.port:9990}", \
security-realm=ManagementRealm)</pre><p>

					</p><div class="title"><strong>Disabling Just the Management Console</strong></div><p>
						Other clients, such as JBoss Operations Network, also operate using the HTTP interface for managing JBoss EAP 6. In order to continue using these services, just the web-based Management Console itself may be disabled. This is accomplished by setting the <span class="emphasis"><em>console-enabled</em></span> attribute to <span class="emphasis"><em>false</em></span>:
					</p><div class="title"><strong>CLI Command for Disabling the Web-Based Management Console</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/management-interface=http-interface/:write-attribute( \
name=console-enabled,value=false)</pre><p>

					</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="setting_up_2_way_ssl_tls_for_the_management_interfaces"/>Setting up 2-Way SSL/TLS for the Management Interfaces</h2></div></div></div><p>
					2-way SSL/TLS authentication, also known as <span class="emphasis"><em>client authentication</em></span>, authenticates both the client and the server using SSL/TLS certificates. This differs from the <a class="link" href="securing_the_server_and_its_interfaces.html#configure_the_management_console_for_https" title="Configure the Management Console for HTTPS">Configure the Management Console for HTTPS</a> section in that both the client and server each have a certificate. This provides assurance that not only is the server who it says it is, but the client is also who it says it is.
				</p><p>
					In this section the following conventions are used:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">HOST1</span></dt><dd>
								The JBoss server hostname. For example; jboss.redhat.com
							</dd><dt><span class="term">HOST2</span></dt><dd>
								A suitable name for the client. For example: myclient. Note this is not necessarily an actual hostname.
							</dd><dt><span class="term">CA_HOST1</span></dt><dd>
								The DN (distinguished name) to use for the HOST1 certificate. For example cn=jboss,dc=redhat,dc=com.
							</dd><dt><span class="term">CA_HOST2</span></dt><dd>
								The DN (distinguished name) to use for the HOST2 certificate. For example cn=myclient,dc=redhat,dc=com.
							</dd></dl></div><p>
					To setup the 2-way SSL/TLS for the Management Interfaces, the following steps are required:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Generate the stores
						</li><li class="listitem">
							Export the certificates
						</li><li class="listitem">
							Import the certificates into the opposing trust stores
						</li><li class="listitem">
							Define a CertificateRealm
						</li><li class="listitem">
							Change the security-realm of the native-interface to the new Certificate Realm
						</li><li class="listitem">
							Add the SSL configuration for the CLI
						</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Prerequisites</h3><p>
						If a password vault is used to store the keystore and truststore passwords (recommended), the password vault should already be created. For more information on the password vault, please see the <a class="link" href="securing_users_of_the_server_and_its_management_interfaces.html#password_vault" title="Password Vault">Password Vault</a> section as well as the <span class="emphasis"><em>Password Vault System</em></span> section of the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#password_vault_system">Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>.
					</p></div><div class="title"><strong>1. Generate the stores:</strong></div><p>
						
</p><pre class="programlisting">keytool -genkeypair -alias HOST1_alias -keyalg RSA -keysize 1024 -validity 365 -keystore HOST1.keystore.jks -dname "CA_HOST1" -keypass secret -storepass secret</pre><p>

					</p><pre class="programlisting">keytool -genkeypair -alias HOST2_alias -keyalg RSA -keysize 1024 -validity 365 -keystore HOST2.keystore.jks -dname "CA_HOST2" -keypass secret -storepass secret</pre><div class="title"><strong>2. Export the certificates:</strong></div><p>
						
</p><pre class="programlisting">keytool -exportcert  -keystore HOST1.keystore.jks -alias HOST1_alias -keypass secret -storepass secret -file HOST1.cer</pre><p>

					</p><pre class="programlisting">keytool -exportcert  -keystore HOST2.keystore.jks -alias HOST2_alias -keypass secret -storepass secret -file HOST2.cer</pre><div class="title"><strong>3. Import the certificates into the opposing trust stores:</strong></div><p>
						
</p><pre class="programlisting">keytool -importcert -keystore HOST1.truststore.jks -storepass secret -alias HOST2_alias -trustcacerts -file HOST2.cer</pre><p>

					</p><pre class="programlisting">keytool -importcert -keystore HOST2.truststore.jks -storepass secret -alias HOST1_alias -trustcacerts -file HOST1.cer</pre><div class="title"><strong>4. Define a CertificateRealm</strong></div><p>
						Define a CertificateRealm in the configuration for the installation (<code class="literal">host.xml</code> or <code class="literal">standalone.xml</code>) and point the interface to it. This can be done using the following commands:
					</p><pre class="programlisting">/core-service=management/security-realm=CertificateRealm:add()</pre><pre class="programlisting">/core-service=management/security-realm=CertificateRealm/server-identity= \
ssl:add(keystore-path=/path/to/HOST1.keystore.jks, keystore-password=secret, \
alias=HOST1_alias)</pre><pre class="programlisting">/core-service=management/security-realm=CertificateRealm/authentication= \
truststore:add(keystore-path=/path/to/HOST1.truststore.jks, \
keystore-password=secret)</pre><div class="title"><strong>5. Change the security-realm of the native-interface to the new Certificate Realm.</strong></div><p>
						
</p><pre class="programlisting">/core-service=management/management-interface= \
native-interface:write-attribute(name=security-realm,value=CertificateRealm)</pre><p>

					</p><div class="title"><strong>6. Add the SSL configuration for the CLI,</strong></div><p>
						Add the SSL configuration for the CLI, which uses <code class="literal">EAP_HOME/bin/jboss-cli.xml</code> as a settings file. The passwords for the truststore and keystore can be stored in one of two ways:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Password Vault (Recommended)
						</li><li class="listitem">
							Plain Text
						</li></ul></div><div class="title"><strong>6A. To store the keystore and truststore passwords in a password vault:</strong></div><p>
						Edit <code class="literal">EAP_HOME/bin/jboss-cli.xml</code> and add the SSL/TLS configuration (using the appropriate values for the variables). Also add the vault configuration, replacing each value with those of the vault being used.
					</p><div class="title"><strong>Example jboss-cli.xml XML</strong></div><p>
						
</p><pre class="programlisting">&lt;ssl&gt;
  &lt;vault&gt;
    &lt;vault-option name="KEYSTORE_URL" value="path-to/vault/vault.keystore"/&gt;
    &lt;vault-option name="KEYSTORE_PASSWORD" value="MASK-5WNXs8oEbrs"/&gt;
    &lt;vault-option name="KEYSTORE_ALIAS" value="vault"/&gt;
    &lt;vault-option name="SALT" value="12345678"/&gt;
    &lt;vault-option name="ITERATION_COUNT" value="50"/&gt;
    &lt;vault-option name="ENC_FILE_DIR" value="EAP_HOME/vault/"/&gt;
  &lt;/vault&gt;
  &lt;alias&gt;HOST2_alias&lt;/alias&gt;
  &lt;key-store&gt;/path/to/HOST2.keystore.jks&lt;/key-store&gt;
  &lt;key-store-password&gt;VAULT::VB::cli_pass::1&lt;/key-store-password&gt;
  &lt;key-password&gt;VAULT::VB::cli_pass::1&lt;/key-password&gt;
  &lt;trust-store&gt;/path/to/HOST2.truststore.jks&lt;/trust-store&gt;
  &lt;trust-store-password&gt;VAULT::VB::cli_pass::1&lt;/trust-store-password&gt;
  &lt;modify-trust-store&gt;true&lt;/modify-trust-store&gt;
&lt;/ssl&gt;</pre><p>

					</p><div class="title"><strong>6B. To store the keystore and truststore passwords in plain text:</strong></div><p>
						Edit <code class="literal">EAP_HOME/bin/jboss-cli.xml</code> and add the SSL/TLS configuration (using the appropriate values for the variables):
					</p><div class="title"><strong>Example jboss-cli.xml XML</strong></div><p>
						
</p><pre class="programlisting">&lt;ssl&gt;
  &lt;alias&gt;HOST2_alias&lt;/alias&gt;
  &lt;key-store&gt;/path/to/HOST2.keystore.jks&lt;/key-store&gt;
  &lt;key-store-password&gt;secret&lt;/key-store-password&gt;
  &lt;trust-store&gt;/path/to/HOST2.truststore.jks&lt;/trust-store&gt;
  &lt;trust-store-password&gt;secret&lt;/trust-store-password&gt;
  &lt;modify-trust-store&gt;true&lt;/modify-trust-store&gt;
&lt;/ssl&gt;</pre><p>

					</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="setting_up_an_ssl_tls_connector"/>Setting up an SSL/TLS Connector</h2></div></div></div><p>
					In addition to supporting HTTPS and 2-way SSL/TLS for the management interfaces, JBoss EAP 6 also enables SSL/TLS connectors to be setup for use by security domains.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						As a prerequisite, an SSL/TLS Encryption Key and Certificate should be created and place in an accessible directory. Additionally, relavant information (e.g. keystore aliases and passwords, desired cypher suites, etc) should also be accessable. For examples on generating SSL/TLS Keys and Certificates, please see the first two steps in the <a class="link" href="securing_the_server_and_its_interfaces.html#setting_up_2_way_ssl_tls_for_the_management_interfaces" title="Setting up 2-Way SSL/TLS for the Management Interfaces">Setting up 2-Way SSL/TLS for the Management Interfaces section</a>. For more information about the the SSL/TLS connector (including cypher suites) please see the <a class="link" href="securing_the_server_and_its_interfaces.html#ssl_connector_reference" title="SSL Connector Reference">SSL Connector Reference section</a>.
					</p></div><div class="title"><strong>Add a HTTPS connector in the web subsystem</strong></div><p>
						Create a secure connector, named <span class="emphasis"><em>HTTPS</em></span>, which uses the https scheme, the https socket binding (which defaults to 8443), and is set to be secure.
					</p><pre class="programlisting">/subsystem=web/connector=HTTPS/:add(socket-binding=https,scheme=https, \
protocol=HTTP/1.1,secure=true)</pre><p>
					Configure the SSL certificate, substituting the correct values for the example ones. This example assumes that the keystore is copied to the server configuration directory, which is <code class="literal">EAP_HOME/standalone/configuration/</code> for a standalone JBoss EAP 6 instance.
				</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration:add( \
name=https,certificate-key-file="${jboss.server.config.dir}/keystore.jks", \
password=SECRET, key-alias=KEY_ALIAS, cipher-suite=CIPHERS)</pre><p>
					Set the protocol to <span class="emphasis"><em>TLSv1</em></span>.
				</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=protocol,value=TLSv1)</pre><p>
					Deploy an application.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						The JBoss EAP 6 instance must be restarted for these changes to take effect.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ssl_connector_reference"/>SSL Connector Reference</h2></div></div></div><p>
					JBoss Web connectors may include the following SSL configuration attributes.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="name"/>name</h3></div></div></div><p>
						The display name of the SSL connector. Attribute name is read-only.
					</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="verify_client"/>verify-client</h3></div></div></div><p>
						The possible values of verify-client differ, based upon whether the HTTP/HTTPS connector is used, or the native APR connector is used.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">HTTP/HTTPS Connector</span></dt><dd>
									Possible values are <span class="emphasis"><em>true</em></span>, <span class="emphasis"><em>false</em></span>, or <span class="emphasis"><em>want</em></span>. Set to <span class="emphasis"><em>true</em></span> to require a valid certificate chain from the client before accepting a connection. Set to <span class="emphasis"><em>want</em></span> if to want the SSL stack to request a client Certificate, but not fail if one is not presented. Set to <span class="emphasis"><em>false</em></span> (the default) to not require a certificate chain unless the client requests a resource protected by a security constraint that uses CLIENT-CERT authentication.
								</dd></dl></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute(name=verify-client,value=want)</pre><p>

						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Native APR Connector</span></dt><dd>
									Possible values are <span class="emphasis"><em>optional</em></span>, <span class="emphasis"><em>require</em></span>, <span class="emphasis"><em>optionalNoCA</em></span>, and <span class="emphasis"><em>none</em></span> (or any other string, which will have the same effect as <span class="emphasis"><em>none</em></span>). These values determine whether a certification is optional, required, optional without a Certificate Authority, or not required at all. The default is none, meaning the client will not have the opportunity to submit a certificate.
								</dd></dl></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=APR/ssl=configuration/:write-attribute( \
name=verify-client,value=require)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="verify_depth"/>verify-depth</h3></div></div></div><p>
						The maximum number of intermediate certificate issuers checked before deciding that the clients do not have a valid certificate. The default value is 10.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=verify-depth,value=10)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="certificate_key_file"/>certificate-key-file</h3></div></div></div><p>
						The full file path and file name of the keystore file where the signed server certificate is stored. With JSSE encryption, this certificate file will be the only one, while OpenSSL uses several files. The default value is the .keystore file in the home directory of the user running JBoss EAP 6. If the keystoreType does not use a file, set the parameter to an empty string.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=certificate-key-file, \
value=../domain/configuration/server.keystore)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="certificate_file"/>certificate-file</h3></div></div></div><p>
						If OpenSSL encryption is used, set the value of this parameter to the path to the file containing the server certificate.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=certificate-file,value=server.crt)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="password"/>password</h3></div></div></div><p>
						The password for both the truststore and keystore. In the following example, replace PASSWORD with the actual password.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=password,value=PASSWORD)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="protocol"/>protocol</h3></div></div></div><p>
						The version of the SSL protocol to use. Supported values depend on the underlying SSL implementation (whether JSSE or OpenSSL). Refer to the <a class="link" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider">Java SSE Documentation</a>.
					</p><p>
						A comma separated combination of protocols can also be specified. For example, TLSv1, TLSv1.1,TLSv1.2.
					</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							Red Hat recommends that SSL is explicitly disabled in favor of TLSv1.1 or TLSv1.2 in all affected packages.
						</p></div><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=protocol,value=ALL)</pre><p>

						</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=protocol,value="TLSv1, TLSv1.1,TLSv1.2")</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cipher_suite"/>cipher-suite</h3></div></div></div><p>
						A list of the encryption ciphers which are allowed. For JSSE syntax, it must be a comma-separated list. For OpenSSL syntax, it must be a colon-separated list. Ensure that only one syntax is used.
					</p><p>
						The default is <span class="emphasis"><em>HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5</em></span>.
					</p><p>
						The example only lists two possible ciphers, but real-world examples will likely use more.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Using weak ciphers is a significant security risk. See <a class="link" href="http://www.nist.gov/manuscript-publication-search.cfm?pub_id=915295">http://www.nist.gov/manuscript-publication-search.cfm?pub_id=915295</a> for NIST recommendations on cipher suites.
						</p></div><p>
						For a list of available OpenSSL ciphers, see <a class="link" href="https://www.openssl.org/docs/manmaster/apps/ciphers.html#CIPHER-STRINGS">https://www.openssl.org/docs/manmaster/apps/ciphers.html#CIPHER-STRINGS</a>. Note that the following are not supported:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<span class="emphasis"><em>@SECLEVEL</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>SUITEB128</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>SUITEB128ONLY</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>SUITEB192</em></span>
							</li></ul></div><p>
						For a list of the standard JSSE ciphers, see <a class="link" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#Cipher">http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#Cipher</a>.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=cipher-suite, \
value="TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA")</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="key_alias"/>key-alias</h3></div></div></div><p>
						The alias used to for the server certificate in the keystore. In the following example, replace KEY_ALIAS with the certificate’s alias.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=key-alias,value=KEY_ALIAS)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="truststore_type"/>truststore-type</h3></div></div></div><p>
						The type of the truststore. Various types of truststores are available, including PKCS12 and Java’s standard JKS.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=truststore-type,value=jks)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="keystore_type"/>keystore-type</h3></div></div></div><p>
						The type of the keystore, Various types of keystores are available, including PKCS12 and Java’s standard JKS.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=keystore-type,value=jks)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ca_certificate_file"/>ca-certificate-file</h3></div></div></div><p>
						The file containing the CA certificates. This is the truststoreFile, in the case of JSSE, and uses the same password as the keystore. The ca-certificate-file file is used to validate client certificates.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=ca-certificate-file,value=ca.crt)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ca_certificate_password"/>ca-certificate-password</h3></div></div></div><p>
						The Certificate password for the ca-certificate-file. In the following example, replace the MASKED_PASSWORD with the masked password.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=ca-certificate-password, value=MASKED_PASSWORD)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ca_revocation_url"/>ca-revocation-url</h3></div></div></div><p>
						A file or URL which contains the revocation list. It refers to the crlFile for JSSE or the SSLCARevocationFile for SSL.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=ca-revocation-url,value=ca.crl)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="session_cache_size"/>session-cache-size</h3></div></div></div><p>
						The size of the SSLSession cache. This attribute applies only to JSSE connectors. The default is 0, which specifies an unlimited cache size.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=session-cache-size,value=100)</pre><p>

						</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="session_timeout"/>session-timeout</h3></div></div></div><p>
						The number of seconds before a cached SSLSession expires. This attribute applies only to JSSE connectors. The default is 86400 seconds, which is 24 hours.
					</p><div class="title"><strong>Example CLI</strong></div><p>
							
</p><pre class="programlisting">/subsystem=web/connector=HTTPS/ssl=configuration/:write-attribute( \
name=session-timeout,value=43200)</pre><p>

						</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="disabling_remote_access_to_jmx"/>Disabling Remote Access to JMX</h2></div></div></div><p>
					Remote access to the JMX subsystem allows for JDK and application management operations to be triggered remotely. To disable remote access to JMX in JBoss EAP 6, one of the following two things must be done:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Remove the remoting connector in the JMX subsystem
						</li><li class="listitem">
							Remove the entire JMX subsystem
						</li></ol></div><div class="title"><strong>Removing the remoting connector</strong></div><p>
						
</p><pre class="programlisting">/subsystem=jmx/remoting-connector=jmx/:remove</pre><p>

					</p><div class="title"><strong>Removing the entire JMX subsytem</strong></div><p>
						
</p><pre class="programlisting">/subsystem=jmx/:remove</pre><p>

					</p><p>
					For more information on JMX, please see the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#jmx">JMX section of the Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_jaas_for_securing_the_management_interfaces"/>Using JAAS for Securing the Management Interfaces</h2></div></div></div><p>
					JAAS is a declarative security API used by JBoss EAP 6 to manage security. For more details and background regarding JAAS and declarative security, see the <a class="link" href="/documentation/en/red-hat-jboss-enterprise-application-platform/version-6.4/security-architecture#declarative_security_and_jaas">Declarative Security and JAAS section of the Red Hat JBoss Enterprise Application Platform 6 Security Architecture guide</a>.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						When JBoss EAP 6 instances are configured to run in <span class="strong"><strong>ADMIN_ONLY</strong></span> mode, using JAAS to secure the management interfaces is not supported. For more information on <span class="strong"><strong>ADMIN_ONLY</strong></span> mode, please see section <span class="emphasis"><em>Reference of Switches and Arguments to pass at Server Runtime</em></span> of the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#Reference_of_Switches_and_Arguments_to_pass_at_Server_Runtime1">Administration and Configuration Guide</a>.
					</p></div><p>
					To use JAAS to authenticate to the management interfaces, the following steps must be performed:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Create a security domain
						</li><li class="listitem">
							Create a security realm with JAAS authentication
						</li><li class="listitem">
							Update the Management Interfaces to use new security realm
						</li><li class="listitem">
							<span class="emphasis"><em>Optional</em></span> - Assign group membership
						</li></ol></div><div class="title"><strong>1. Creating a security domain</strong></div><p>
						In this example, a security domain is created with the UserRoles login module, but other login modules may be used as well:
					</p><pre class="programlisting">/subsystem=security/security-domain=UsersLMDomain:add( \
cache-type=default)</pre><pre class="programlisting">/subsystem=security/security-domain=UsersLMDomain/authentication=classic:add</pre><pre class="programlisting">/subsystem=security/security-domain=UsersLMDomain/authentication= \
classic/login-module=UsersRoles:add(code=UsersRoles, flag=required, \
module-options=[("usersProperties"=&gt;"users.properties"), \
("rolesProperties"=&gt;"roles.properties")])</pre><div class="title"><strong>2. Create a security realm with JAAS authentication</strong></div><p>
						To create a security realm with JAAS Authentication:
					</p><pre class="programlisting">/core-service=management/security-realm=SecurityDomainAuthnRealm:add</pre><pre class="programlisting">/core-service=management/security-realm= \
SecurityDomainAuthnRealm/authentication=jaas:add(name=UsersLMDomain)</pre><div class="title"><strong>3. Update the Management Interfaces to use new security realm</strong></div><p>
						To update the <span class="emphasis"><em>http-interface</em></span> to use the new realm:
					</p><pre class="programlisting">/core-service=management/management-interface=http-interface/:write-attribute( \
name=security-realm,value=SecurityDomainAuthnRealm)</pre><p>
					To update the <span class="emphasis"><em>native-interface</em></span> to use the new realm:
				</p><pre class="programlisting">/core-service=management/management-interface=native-interface/:write-attribute( \
name=security-realm,value=SecurityDomainAuthnRealm)</pre><div class="title"><strong>4. <span class="emphasis"><em>Optional</em></span> - Assign group membership</strong></div><p>
						The attribute assign-groups determines whether loaded user membership information from the security domain is used for group assignment in the security realm. When set to true this group assignment is used for Role-Based Access Control (RBAC).
					</p><p>
					To configure the assign-groups attribute:
				</p><pre class="programlisting">/core-service=management/security-realm=SecurityDomainAuthnRealm/authentication= \
jaas:write-attribute(name=assign-groups,value=true)</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="silent_authentication"/>Silent Authentication</h2></div></div></div><p>
					The default installation of JBoss EAP 6 contains a method of silent authentication for a local Management CLI user. This allows the local user the ability to access the Management CLI without username or password authentication. This functionality is enabled as a convenience, and to assist local users running Management CLI scripts without requiring authentication. It is considered a useful feature given that access to the local configuration typically also gives the user the ability to add their own user details or otherwise disable security checks.
				</p><p>
					The convenience of silent authentication for local users can be disabled where greater security control is required. This can be achieved by removing the local element within the security-realm section of the configuration file. This applies to both the standalone instances as well as domains.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						The removal of the local element should only be done if the impact on the JBoss EAP 6 instance and its configuration is fully understood.
					</p></div><p>
					To remove silent authentication from a realm:
				</p><pre class="programlisting">/core-service=management/security-realm=REALM_NAME/authentication=local:remove</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="security_auditing"/>Security Auditing</h1></div></div></div><p>
				Security auditing refers to triggering events, such as writing to a log, in response to an event that happens within the security subsystem or the management interfaces. Auditing mechanisms are configured as part of a security domain or management interface.
			</p><p>
				Auditing uses provider modules. Both included provider modules as well as custom implementations may be used.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_security_auditing_for_the_management_interfaces"/>Configure Security Auditing for the Management Interfaces</h2></div></div></div><p>
					For more information on configuring auditing for the management interfaces, refer to the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html#sect-Management_Interface_Audit_Logging">Management Interface Audit Logging section</a> of the <a class="link" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Administration_and_Configuration_Guide/index.html">Red Hat JBoss Enterprise Application Platform 6 Administration and Configuration Guide</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configure_security_auditing_for_security_domains"/>Configure Security Auditing for Security Domains</h2></div></div></div><p>
					To configure security auditing settings for a security domain, the following steps must be performed from the management console:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Open the security domain’s detailed view.
						</li><li class="listitem">
							Navigate to the Auditing subsystem configuration.
						</li><li class="listitem">
							Add a provider module.
						</li><li class="listitem">
							Verify the module is working
						</li><li class="listitem">
							Optional: Add, edit, or remove module options.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>1. Open the security domain’s detailed view.</strong></p><ul class="itemizedlist"><li class="listitem">
							Click <span class="emphasis"><em>Configuration</em></span> at the top of the screen.
						</li><li class="listitem">
							In a managed domain, select a profile to modify from the <span class="emphasis"><em>Profile</em></span> selection box at the top left.
						</li><li class="listitem">
							Expand the <span class="emphasis"><em>Security</em></span> menu and select <span class="emphasis"><em>Security Domains</em></span>.
						</li><li class="listitem">
							Click <span class="emphasis"><em>View</em></span> for the security domain to edit.
						</li></ul></div><div class="title"><strong>2. Navigate to the Auditing subsystem configuration.</strong></div><p>
						Select the Audit tab at the top of the screen.
					</p><p>
					The configuration area is divided into two areas: Provider Modules and Details. The provider module is the basic unit of configuration. A security domain can include several provider modules each of which can include attributes and options.
				</p><div class="title"><strong>3. Add a provider module.</strong></div><p>
						Click <span class="emphasis"><em>Add</em></span> and fill in the <span class="emphasis"><em>Code</em></span> section with the classname of the provider module.
					</p><div class="title"><strong>4. Verify the module is working</strong></div><p>
						The goal of an audit module is to provide a way to monitor the events in the security subsystem. This monitoring can be done by means of writing to a log file, email notifications or any other measurable auditing mechanism.
					</p><p>
					For example, JBoss EAP 6 includes the <span class="emphasis"><em>org.jboss.security.audit.providers.LogAuditProvider</em></span> module by default. If enabled following the steps above , this audit module writes security notifications to a <code class="literal">audit.log</code> file in the log subfolder within the <code class="literal">EAP_HOME</code> directory.
				</p><p>
					To verify if the steps above have worked in the context of the <span class="emphasis"><em>org.jboss.security.audit.providers.LogAuditProvider</em></span>, perform an action that is likely to trigger a notification and then check the audit log file.
				</p><div class="title"><strong>5.Optional: Add, edit, or remove module options.</strong></div><p>
						To add options to your module, click its entry in the <span class="emphasis"><em>Modules</em></span> list, and select the <span class="emphasis"><em>Module Options</em></span> tab in the <span class="emphasis"><em>Details</em></span> section of the page. Click <span class="emphasis"><em>Add</em></span>, and provide the key and value for the option.
					</p><p>
					To edit an option that already exists, click <span class="emphasis"><em>Remove</em></span> to remove it, and click <span class="emphasis"><em>Add</em></span> to add it again with the correct options.
				</p></div></div></div></body></html>