<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 16. JAX-WS Web Services</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-JAX-WS_Web_Services">
      ⁠</a>Chapter 16. JAX-WS Web Services</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_JAX-WS_Web_Services">
      ⁠</a>16.1. About JAX-WS Web Services</h1></div></div></div><div class="para">
		Java API for XML Web Services (JAX-WS) is an API included in the Java Enterprise Edition (EE) platform, and is used to create Web Services. Web Services are applications designed to communicate with each other over a network, typically exchanging information in XML or other structured text formats. Web Services are platform-independent. A typical JAX-WS application uses a client/server model. The server component is called a <em class="firstterm">Web Service Endpoint</em>.
	</div><div class="para">
		JAX-WS has a counterpart for smaller and simpler Web Services, which use a protocol called JAX-RS. JAX-RS is a protocol for <em class="firstterm">Representational State Transfer</em>, or <acronym class="acronym">REST</acronym>. JAX-RS applications are typically light-weight, and rely only on the HTTP protocol itself for communication. JAX-WS makes it easier to support various Web Service oriented protocols, such as <code class="code">WS-Notification</code>, <code class="code">WS-Addressing</code>, <code class="code">WS-Policy</code>, <code class="code">WS-Security</code>, and <code class="code">WS-Trust</code>. They communicate using a specialized XML language called <em class="firstterm">Simple Object Access Protocol (SOAP)</em>, which defines a message architecture and message formats.
	</div><div class="para">
		A JAX-WS Web Service also includes a machine-readable description of the operations it provides, written in <em class="firstterm">Web Services Description Language (WSDL)</em>, which is a specialized XML document type.
	</div><div class="para">
		A Web Service Endpoint consists of a class which implements <code class="code">WebService</code> and <code class="code">WebMethod</code> interfaces.
	</div><div class="para">
		A Web Service Client consists of a client which depends upon several classes called <em class="firstterm">stubs</em>, which are generated from the WSDL definition. JBoss EAP 6 includes the tools to generate the classes from WSDL.
	</div><div class="para">
		In a JAX-WS Web service, a formal contract is established to describe the interface that the Web Service offers. The contract is typically written in WSDL, but may be written in SOAP messages. The architecture of the Web Service typically addresses business requirements, such as transactions, security, messaging, and coordination. JBoss EAP 6 provides mechanisms for handling these business concerns.
	</div><div class="para">
		<em class="firstterm">Web Services Description Language (WSDL)</em> is an XML-based language used to describe Web Services and how to access them. The Web Service itself is written in Java or another programming language. The WSDL definition consists of references to the interface, port definitions, and instructions for how other Web Services should interact with it over a network. Web Services communicate with each other using <em class="firstterm">Simple Object Access Protocol (SOAP)</em>. This type of Web Service contrasts with <em class="firstterm">RESTful Web Services</em>, built using <em class="firstterm">Representative State Transfer (REST)</em> design principles. These RESTful Web Services do not require the use of WSDL or SOAP, but rely on the structure of the HTTP protocol itself to define how other services interact with them.
	</div><div class="para">
		JBoss EAP 6 includes support for deploying JAX-WS Web Service endpoints. This support is provided by JBossWS. Configuration of the Web Services subsystem, such as endpoint configuration, handler chains, and handlers, is provided through the <code class="literal">webservices</code> subsystem.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Working Examples</div>
			The JBoss EAP Quickstarts include several fully-functioning JAX-WS Web Service applications. These examples include:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				wsat-simple
			</div></li><li class="listitem"><div class="para">
				wsba-coordinator-completion-simple
			</div></li><li class="listitem"><div class="para">
				wsba-participant-completion-simple
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8420-679140+%5BLatest%5D&amp;comment=Title%3A+About+JAX-WS+Web+Services%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8420-679140+25+Jun+2014+07%3A22+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_the_literalwebservicesliteral_Subsystem">
      ⁠</a>16.2. Configure the webservices Subsystem</h1></div></div></div><div class="para">
		Many configuration options are available for the <code class="literal">webservices</code> subsystem, which controls the behavior of Web Services deployed into JBoss EAP 6. The command to modify each element in the Management CLI script (<code class="filename"><em class="replaceable">EAP_HOME</em>/bin/jboss-cli.sh</code> or <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/jboss-cli.bat</code>) is provided. Remove the <code class="literal">/profile=default</code> portion of the command for a standalone server, or replace <code class="literal">default</code> with the name of profile to configure.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Published Endpoint Address</div>
			You can rewrite the <code class="sgmltag-element">&lt;soap:address&gt;</code> element in endpoint-published WSDL contracts. This ability can be used to control the server address that is advertised to clients for each endpoint. Each of the following optional elements can be modified to suit your requirements. If there is any active WS deployment then modification of any of these elements requires a server reload.
		</div><div class="table"><a id="idm140550784601104">
      ⁠</a><p class="title"><strong>Table 16.1. Configuration Elements for Published Endpoint Addresses</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Configuration Elements for Published Endpoint Addresses"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Element </th><th> Description </th><th> CLI Command </th></tr></thead><tbody><tr><td> modify-wsdl-address </td><td> <div class="para">
						Whether to always modify the WSDL address. If true, the content of <code class="sgmltag-element">&lt;soap:address&gt;</code> will always be overwritten. If false, the content of <code class="sgmltag-element">&lt;soap:address&gt;</code> will only be overwritten if it is not a valid URL. The values used will be the <code class="literal">wsdl-host</code>, <code class="literal">wsdl-port</code>, and <code class="literal">wsdl-secure-port</code> described below.
					</div>
					 </td><td> <div class="para">
						<code class="command">/profile=default/subsystem=webservices/:write-attribute(name=modify-wsdl-address,value=true)</code>
					</div>
					 </td></tr><tr><td> wsdl-host </td><td> <div class="para">
						The hostname / IP address to be used for rewriting <code class="sgmltag-element">&lt;soap:address&gt;</code>. If <code class="literal">wsdl-host</code> is set to the string <code class="literal">jbossws.undefined.host</code>, the requester's host is used when rewriting the <code class="sgmltag-element">&lt;soap:address&gt;</code>.
					</div>
					 </td><td> <code class="command">/profile=default/subsystem=webservices/:write-attribute(name=wsdl-host,value=10.1.1.1)</code> </td></tr><tr><td> wsdl-port </td><td> An integer which explicitly defines the HTTP port that will be used for rewriting the SOAP address. If undefined, the HTTP port is identified by querying the list of installed HTTP connectors. </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=webservices/:write-attribute(name=wsdl-port,value=8080)</code>
					</div>
					 </td></tr><tr><td> wsdl-secure-port </td><td> An integer which explicitly defines the HTTPS port that will be used for rewriting the SOAP address. If undefined, the HTTPS port is identified by querying the list of installed HTTPS connectors. </td><td> <div class="para">
						<code class="code">/profile=default/subsystem=webservices/:write-attribute(name=wsdl-secure-port,value=8443)</code>
					</div>
					 </td></tr></tbody></table></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Predefined Endpoint Configurations</div>
			You can define endpoint configurations which can be referenced by endpoint implementations. One way this might be used is to add a given handler to any WS endpoint that is marked with a given endpoint configuration with the annotation <code class="code">@org.jboss.ws.api.annotation.EndpointConfig</code>.
		</div><div class="para">
		JBoss EAP 6 includes a default <code class="code">Standard-Endpoint-Config</code>. An example of a custom configuration, <code class="code">Recording-Endpoint-Config</code>, is also included. This provides an example of a recording handler. The <code class="code">Standard-Endpoint-Config</code> is automatically used for any endpoint which is not associated with any other configuration.
	</div><div class="para">
		To read the <code class="code">Standard-Endpoint-Config</code> using the Management CLI, use the following command:
	</div><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=Standard-Endpoint-Config/:read-resource(recursive=true,proxies=false,include-runtime=false,include-defaults=true)</pre><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Endpoint Configurations</div>
			An endpoint configuration, referred to as an <code class="literal">endpoint-config</code> in the Management API, includes a <code class="literal">pre-handler-chain</code>, <code class="literal">post-handler-chain</code> and some properties, which are applied to a particular endpoint. The following commands read and add and endpoint config.
		</div><div class="example"><a id="idm140550777210704">
      ⁠</a><p class="title"><strong>Example 16.1. Read an Endpoint Config</strong></p><div class="example-contents"><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=Recording-Endpoint-Config:read-resource</pre></div></div><div class="example"><a id="idm140550741357104">
      ⁠</a><p class="title"><strong>Example 16.2. Add an Endpoint Config</strong></p><div class="example-contents"><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=My-Endpoint-Config:add</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Handler Chains</div>
			Each endpoint config may be associated with <code class="literal">PRE</code> and <code class="literal">POST</code> handler chains. Each handler chain may include JAXWS-compliant handlers. For outbound messages, PRE handler chain handlers are executed before any handler attached to the endpoints using standard JAXWS means, such as the <code class="code">@HandlerChain</code> annotation. POST handler chain handlers are executed after usual endpoint handlers. For inbound messages, the opposite applies. JAX-WS is a standard API for XML-based web services, and is documented at <a href="http://jcp.org/en/jsr/detail?id=224">http://jcp.org/en/jsr/detail?id=224</a>.
		</div><div class="para">
		A handler chain may also include a <code class="literal">protocol-bindings</code> attribute, which sets the protocols which trigger the chain to start.
	</div><div class="example"><a id="idm140550739415792">
      ⁠</a><p class="title"><strong>Example 16.3. Read a Handler Chain</strong></p><div class="example-contents"><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=Recording-Endpoint-Config/pre-handler-chain=recording-handlers:read-resource</pre></div></div><div class="example"><a id="idm140550724742320">
      ⁠</a><p class="title"><strong>Example 16.4. Add a Handler Chain</strong></p><div class="example-contents"><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers:add(protocol-bindings="##SOAP11_HTTP")</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Handlers</div>
			A JAXWS handler is a child element <code class="literal">handler</code> within a handler chain. The handler takes a <code class="literal">class</code> attribute, which is the fully-qualified classname of the handler class. When the endpoint is deployed, an instance of that class is created for each referencing deployment. Either the deployment class loader or the class loader for module <code class="code">org.jboss.as.webservices.server.integration</code> must be able to load the handler class.
		</div><div class="example"><a id="idm140550799826576">
      ⁠</a><p class="title"><strong>Example 16.5. Read a Handler</strong></p><div class="example-contents"><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=Recording-Endpoint-Config/pre-handler-chain=recording-handlers/handler=RecordingHandler:read-resource</pre></div></div><div class="example"><a id="idm140550724058064">
      ⁠</a><p class="title"><strong>Example 16.6. Add a Handler</strong></p><div class="example-contents"><pre class="screen">/profile=default/subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers/handler=foo-handler:add(class="org.jboss.ws.common.invocation.RecordingServerHandler")</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Web Services Runtime Information</div>
			You can view runtime information about Web Services, such as the web context and the WSDL URL, by querying the endpoints themselves. You can use the <code class="literal">*</code> character to query all endpoints at once. The following examples show the command for a both a server in a managed domain and for a standalone server.
		</div><div class="example"><a id="idm140550796165872">
      ⁠</a><p class="title"><strong>Example 16.7. View Runtime Information about All Web Service Endpoints on A Server in a Managed Domain</strong></p><div class="example-contents"><div class="para">
			This command displays information about all endpoints on a server named <code class="literal">server-one</code>, which is hosted on physical host <code class="literal">master</code> and running in a managed domain.
		</div><pre class="screen">/host=master/server=server-one/deployment="*"/subsystem=webservices/endpoint="*":read-resource</pre></div></div><div class="example"><a id="idm140550812232112">
      ⁠</a><p class="title"><strong>Example 16.8. View Runtime Information about All Web Service Endpoints on a Standalone Server</strong></p><div class="example-contents"><div class="para">
			This command displays information about all Web Service endpoints on a standalone server.
		</div><pre class="screen">/deployment="*"/subsystem=webservices/endpoint="*":read-resource</pre></div></div><div class="example"><a id="idm140550778795936">
      ⁠</a><p class="title"><strong>Example 16.9. Example Endpoint Information</strong></p><div class="example-contents"><div class="para">
			The following is an example displaying hypothetical output.
		</div><pre class="screen">{
   "outcome" =&gt; "success",
   "result" =&gt; [{
       "address" =&gt; [
           ("deployment" =&gt; "jaxws-samples-handlerchain.war"),
           ("subsystem" =&gt; "webservices"),
           ("endpoint" =&gt; "jaxws-samples-handlerchain:TestService")
       ],
       "outcome" =&gt; "success",
       "result" =&gt; {
           "class" =&gt; "org.jboss.test.ws.jaxws.samples.handlerchain.EndpointImpl",
           "context" =&gt; "jaxws-samples-handlerchain",
           "name" =&gt; "TestService",
           "type" =&gt; "JAXWS_JSE",
           "wsdl-url" =&gt; "http://localhost:8080/jaxws-samples-handlerchain?wsdl"
       }
   }]
}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8421-765001+%5BLatest%5D&amp;comment=Title%3A+Configure+the+webservices+Subsystem%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8421-765001+14+Jul+2015+11%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configure_the_HTTP_Timeout_per_Application">
      ⁠</a>16.3. Configure the HTTP Timeout per Application</h1></div></div></div><div class="para">
		The HTTP session timeout defines the period after which a HTTP session is considered to have become invalid because there was no activity within the specified period.
	</div><div class="para">
		The HTTP session timeout can be configured in several places. In order of precedence these are:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Application - defined in the application's <code class="filename">web.xml</code> configuration file.
			</div></li><li class="listitem"><div class="para">
				Server - specified via the <code class="literal">default-session-timeout</code> attribute.
			</div></li><li class="listitem"><div class="para">
				Default - 30 minutes.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550806031664">
      ⁠</a><p class="title"><strong>Procedure 16.1.  Configure the HTTP Timeout per Application </strong></p><ol class="1"><li class="step"><div class="para">
				Edit the application's <code class="filename">WEB-INF/web.xml</code> file.
			</div></li><li class="step"><div class="para">
				Add the following configuration XML to the file, changing <code class="literal">30</code> to the desired timeout (in minutes).
			</div><div class="para">
				
<pre class="screen">&lt;session-config&gt;
  &lt;session-timeout&gt;30&lt;/session-timeout&gt;
&lt;/session-config&gt;</pre>

			</div></li><li class="step"><div class="para">
				If you modified the WAR file, redeploy the application. If you exploded the WAR file, no further action is required because JBoss EAP will automatically undeploy and redeploy the application.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+42090-723825+%5BLatest%5D&amp;comment=Title%3A+Configure+the+HTTP+Timeout+per+Application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42090-723825+04+Nov+2014+20%3A05+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JAX-WS_Web_Service_Endpoints">
      ⁠</a>16.4. JAX-WS Web Service Endpoints</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_JAX-WS_Web_Service_Endpoints">
      ⁠</a>16.4.1. About JAX-WS Web Service Endpoints</h2></div></div></div><div class="para">
		This topic is an overview of JAX-WS web service endpoints and accompanying concepts. A JAX-WS Web Service endpoint is the server component of a Web Service. Clients and other Web Services communicate it over the HTTP protocol using an XML language called <em class="firstterm">Simple Object Access Protocol (SOAP)</em>. The endpoint itself is deployed into the JBoss EAP 6 container.
	</div><div class="para">
		WSDL descriptors can be created in one of two ways:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
				You can write WSDL descriptors manually.
			</div></li><li class="listitem"><div class="para">
				You can use JAX-WS annotations that create the WSDL descriptors automatically for you. This is the most common method for creating WSDL descriptors.
			</div></li></ol></div><div class="para">
		An endpoint implementation bean is annotated with JAX-WS annotations and deployed to the server. The server automatically generates and publishes the abstract contract in WSDL format for client consumption. All marshalling and unmarshalling is delegated to the <em class="firstterm">Java Architecture for XML Binding (JAXB)</em> service.
	</div><div class="para">
		The endpoint itself may be a POJO (Plain Old Java Object) or a Java EE Web Application. You can also expose endpoints using an EJB3 stateless session bean. It is packaged into a Web Archive (WAR) file. The specification for packaging the endpoint, called a <em class="firstterm">Java Service Endpoint (JSE)</em> is defined in JSR-181, which can be found at <a href="http://jcp.org/aboutJava/communityprocess/mrel/jsr181/index2.html">http://jcp.org/aboutJava/communityprocess/mrel/jsr181/index2.html</a>.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Development Requirements</div>
			A Web Service must fulfill the requirements of the JAX-WS API and the Web Services metadata specification at <a href="http://www.jcp.org/en/jsr/summary?id=181">http://www.jcp.org/en/jsr/summary?id=181</a>. A valid implementation meets the following requirements:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				It contains a <code class="code">javax.jws.WebService</code> annotation.
			</div></li><li class="listitem"><div class="para">
				All method parameters and return types are compatible with the JAXB 2.0 specification, JSR-222. Refer to <a href="http://www.jcp.org/en/jsr/summary?id=222">http://www.jcp.org/en/jsr/summary?id=222</a> for more information.
			</div></li></ul></div><div class="example"><a id="idm140550721308960">
      ⁠</a><p class="title"><strong>Example 16.10. Example POJO Endpoint</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@WebService
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">SOAPBinding</span>(style = SOAPBinding.<span xmlns="" class="perl_Function">Style</span>.<span xmlns="" class="perl_Function">RPC</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> JSEBean01
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @WebMethod
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">echo</span>(String input)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      ...
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="example"><a id="idm140550742239392">
      ⁠</a><p class="title"><strong>Example 16.11. Example Web Services Endpoint</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;web-app</span> <span xmlns="" class="perl_Error">...</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;servlet&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>TestService<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;servlet-class&gt;</span>org.jboss.test.ws.jaxws.samples.jsr181pojo.JSEBean01<span xmlns="" class="perl_Keyword">&lt;/servlet-class&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/servlet&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>TestService<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;url-pattern&gt;</span>/*<span xmlns="" class="perl_Keyword">&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/web-app&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="idm140550797517616">
      ⁠</a><p class="title"><strong>Example 16.12. Exposing an Endpoint in an EJB</strong></p><div class="example-contents"><div class="para">
			This EJB3 stateless session bean exposes the same method on the remote interface and as an endpoint operation.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Stateless
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Remote</span>(EJB3RemoteInterface.<span xmlns="" class="perl_Function">class</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">RemoteBinding</span>(jndiBinding = <span xmlns="" class="perl_String">"/ejb3/EJB3EndpointInterface"</span>)
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@WebService
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">SOAPBinding</span>(style = SOAPBinding.<span xmlns="" class="perl_Function">Style</span>.<span xmlns="" class="perl_Function">RPC</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> EJB3Bean01 <span xmlns="" class="perl_Keyword">implements</span> EJB3RemoteInterface
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @WebMethod
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">echo</span>(String input)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      ...
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Endpoint Providers</div>
			JAX-WS services typically implement a Java service endpoint interface (SEI), which may be mapped from a WSDL port type, either directly or using annotations. This SEI provides a high-level abstraction which hides the details between Java objects and their XML representations. However, in some cases, services need the ability to operate at the XML message level. The endpoint <code class="code">Provider</code> interface provides this functionality to Web Services which implement it.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Consuming and Accessing the Endpoint</div>
			After you deploy your Web Service, you can consume the WSDL to create the component stubs which will be the basis for your application. Your application can then access the endpoint to do its work.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Working Examples</div>
			The JBoss EAP Quickstarts include several fully-functioning JAX-WS Web Service applications. These examples include:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				wsat-simple
			</div></li><li class="listitem"><div class="para">
				wsba-coordinator-completion-simple
			</div></li><li class="listitem"><div class="para">
				wsba-participant-completion-simple
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8793-679964+%5BLatest%5D&amp;comment=Title%3A+About+JAX-WS+Web+Service+Endpoints%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8793-679964+27+Jun+2014+09%3A43+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Write_and_Deploy_a_JAX-WS_Web_Service_Endpoint">
      ⁠</a>16.4.2. Write and Deploy a JAX-WS Web Service Endpoint</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Introduction</div>
			This topic discusses the development of a simple JAX-WS service endpoint, which is the server-side component, which responds to requests from JAX-WS clients and publishes the WSDL definition for itself. For more in-depth information about JAX-WS service endpoints, refer to <a class="xref" href="chap-JAX-WS_Web_Services.html#JAX-WS_Common_API_Reference">Section 16.6.2, “JAX-WS Common API Reference”</a> and the API documentation bundle in Javadoc format, distributed with JBoss EAP 6.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Development Requirements</div>
			A Web Service must fulfill the requirements of the JAXWS API and the Web Services meta data specification at <a href="http://www.jcp.org/en/jsr/summary?id=181">http://www.jcp.org/en/jsr/summary?id=181</a>. A valid implementation meets the following requirements:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				It contains a <code class="code">javax.jws.WebService</code> annotation.
			</div></li><li class="listitem"><div class="para">
				All method parameters and return types are compatible with the JAXB 2.0 specification, JSR-222. Refer to <a href="http://www.jcp.org/en/jsr/summary?id=222">http://www.jcp.org/en/jsr/summary?id=222</a> for more information.
			</div></li></ul></div><div class="example"><a id="idm140550804714384">
      ⁠</a><p class="title"><strong>Example 16.13. Example Service Implementation</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">retail</span>.<span xmlns="" class="perl_Function">profile</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.ejb.Stateless;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.WebService;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.WebMethod;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.soap.SOAPBinding;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@Stateless                                                             
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">WebService</span>(                                                           
<span xmlns="" class="line">​</span>   name=<span xmlns="" class="perl_String">"ProfileMgmt"</span>,
<span xmlns="" class="line">​</span>   targetNamespace = <span xmlns="" class="perl_String">"http://org.jboss.ws/samples/retail/profile"</span>,
<span xmlns="" class="line">​</span>   serviceName = <span xmlns="" class="perl_String">"ProfileMgmtService"</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">SOAPBinding</span>(parameterStyle = SOAPBinding.<span xmlns="" class="perl_Function">ParameterStyle</span>.<span xmlns="" class="perl_Function">BARE</span>)         
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ProfileMgmtBean {
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   @WebMethod                                                          
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> DiscountResponse <span xmlns="" class="perl_Function">getCustomerDiscount</span>(DiscountRequest request) {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">DiscountResponse</span>(request.<span xmlns="" class="perl_Function">getCustomer</span>(), <span xmlns="" class="perl_Float">10.00</span>);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="example"><a id="idm140550810876880">
      ⁠</a><p class="title"><strong>Example 16.14. Example XML Payload</strong></p><div class="example-contents"><div class="para">
			The following is an example of the <code class="code">DiscountRequest</code> class which is used by the <code class="code">ProfileMgmtBean</code> bean in the previous example. The annotations are included for verbosity. Typically, the JAXB defaults are reasonable and do not need to be specified.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">retail</span>.<span xmlns="" class="perl_Function">profile</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.bind.annotation.XmlAccessType;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.bind.annotation.XmlAccessorType;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.bind.annotation.XmlType;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import org.jboss.test.ws.jaxws.samples.retail.Customer;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">XmlAccessorType</span>(XmlAccessType.<span xmlns="" class="perl_Function">FIELD</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">XmlType</span>(
<span xmlns="" class="line">​</span>  name = <span xmlns="" class="perl_String">"discountRequest"</span>,
<span xmlns="" class="line">​</span>  namespace=<span xmlns="" class="perl_String">"http://org.jboss.ws/samples/retail/profile"</span>,
<span xmlns="" class="line">​</span>  propOrder = { <span xmlns="" class="perl_String">"customer"</span> }
<span xmlns="" class="line">​</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> DiscountRequest {
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">protected</span> Customer customer;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">DiscountRequest</span>() {
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">DiscountRequest</span>(Customer customer) {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">customer</span> = customer;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> Customer <span xmlns="" class="perl_Function">getCustomer</span>() {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> customer;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setCustomer</span>(Customer value) {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">customer</span> = value;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>}
</pre><div class="para">
			More complex mappings are possible. Refer to the JAXB API specification at <a href="https://jaxb.java.net/">https://jaxb.java.net/</a> for more information.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Package Your Deployment</div>
			The implementation class is wrapped in a <code class="filename">JAR</code> deployment. Any metadata required for deployment is taken from the annotations on the implementation class and the service endpoint interface. Deploy the JAR using the Management CLI or the Management Interface, and the HTTP endpoint is created automatically.
		</div><div class="para">
		The following listing shows an example of the correct structure for JAR deployment of an EJB Web Service.
	</div><div class="example"><a id="idm140550781610064">
      ⁠</a><p class="title"><strong>Example 16.15. Example JAR Structure for a Web Service Deployment</strong></p><div class="example-contents"><pre class="screen">[user@host ~]$ <code class="command">jar -tf jaxws-samples-retail.jar</code>
org/jboss/test/ws/jaxws/samples/retail/profile/DiscountRequest.class
org/jboss/test/ws/jaxws/samples/retail/profile/DiscountResponse.class
org/jboss/test/ws/jaxws/samples/retail/profile/ObjectFactory.class
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmt.class
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtBean.class
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtService.class
org/jboss/test/ws/jaxws/samples/retail/profile/package-info.class
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8422-734936+%5BLatest%5D&amp;comment=Title%3A+Write+and+Deploy+a+JAX-WS+Web+Service+Endpoint%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8422-734936+08+Jan+2015+09%3A49+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JAX-WS_Web_Service_Clients">
      ⁠</a>16.5. JAX-WS Web Service Clients</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Consume_and_Access_a_JAX-WS_Web_Service">
      ⁠</a>16.5.1. Consume and Access a JAX-WS Web Service</h2></div></div></div><div class="para">
		After creating a Web Service endpoint, either manually or using JAX-WS annotations, you can access its WSDL, which can be used to create the basic client application which will communicate with the Web Service. The process of generating Java code from the published WSDL is called consuming the Web service. This happens in the following phases:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
				Create the client artifacts.
			</div></li><li class="listitem"><div class="para">
				Construct a service stub.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Create the Client Artifacts</div>
			Before you can create client artifacts, you need to create your WSDL contract. The following WSDL contract is used for the examples presented in the rest of this topic.
		</div><div class="para">
		The examples below rely on having this WSDL contract in the <code class="filename">ProfileMgmtService.wsdl</code> file.
	</div><div class="example"><a id="idm140550801822816">
      ⁠</a><p class="title"><strong>Example 16.16. Example WSDL Contract</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;definitions</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    name=</span><span xmlns="" class="perl_String">'ProfileMgmtService'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    targetNamespace=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail/profile'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    xmlns=</span><span xmlns="" class="perl_String">'http://schemas.xmlsoap.org/wsdl/'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    xmlns:ns1=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    xmlns:soap=</span><span xmlns="" class="perl_String">'http://schemas.xmlsoap.org/wsdl/soap/'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    xmlns:tns=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail/profile'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    xmlns:xsd=</span><span xmlns="" class="perl_String">'http://www.w3.org/2001/XMLSchema'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;types&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;xs:schema</span><span xmlns="" class="perl_Others"> targetNamespace=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                 version=</span><span xmlns="" class="perl_String">'1.0'</span><span xmlns="" class="perl_Others"> xmlns:xs=</span><span xmlns="" class="perl_String">'http://www.w3.org/2001/XMLSchema'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;xs:complexType</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'customer'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;xs:sequence&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> minOccurs=</span><span xmlns="" class="perl_String">'0'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'creditCardDetails'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'xs:string'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> minOccurs=</span><span xmlns="" class="perl_String">'0'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'firstName'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'xs:string'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> minOccurs=</span><span xmlns="" class="perl_String">'0'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'lastName'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'xs:string'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/xs:sequence&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/xs:complexType&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/xs:schema&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;xs:schema</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">          targetNamespace=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail/profile'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">          version=</span><span xmlns="" class="perl_String">'1.0'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">          xmlns:ns1=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">          xmlns:tns=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail/profile'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">          xmlns:xs=</span><span xmlns="" class="perl_String">'http://www.w3.org/2001/XMLSchema'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;xs:import</span><span xmlns="" class="perl_Others"> namespace=</span><span xmlns="" class="perl_String">'http://org.jboss.ws/samples/retail'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'getCustomerDiscount'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                     nillable=</span><span xmlns="" class="perl_String">'true'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'tns:discountRequest'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'getCustomerDiscountResponse'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                     nillable=</span><span xmlns="" class="perl_String">'true'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'tns:discountResponse'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;xs:complexType</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'discountRequest'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;xs:sequence&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> minOccurs=</span><span xmlns="" class="perl_String">'0'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'customer'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'ns1:customer'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/xs:sequence&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/xs:complexType&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;xs:complexType</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'discountResponse'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;xs:sequence&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> minOccurs=</span><span xmlns="" class="perl_String">'0'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'customer'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'ns1:customer'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;xs:element</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'discount'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'xs:double'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/xs:sequence&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/xs:complexType&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/xs:schema&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/types&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;message</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'ProfileMgmt_getCustomerDiscount'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;part</span><span xmlns="" class="perl_Others"> element=</span><span xmlns="" class="perl_String">'tns:getCustomerDiscount'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'getCustomerDiscount'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/message&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;message</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'ProfileMgmt_getCustomerDiscountResponse'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;part</span><span xmlns="" class="perl_Others"> element=</span><span xmlns="" class="perl_String">'tns:getCustomerDiscountResponse'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            name=</span><span xmlns="" class="perl_String">'getCustomerDiscountResponse'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/message&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;portType</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'ProfileMgmt'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;operation</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'getCustomerDiscount'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                 parameterOrder=</span><span xmlns="" class="perl_String">'getCustomerDiscount'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;input</span><span xmlns="" class="perl_Others"> message=</span><span xmlns="" class="perl_String">'tns:ProfileMgmt_getCustomerDiscount'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;output</span><span xmlns="" class="perl_Others"> message=</span><span xmlns="" class="perl_String">'tns:ProfileMgmt_getCustomerDiscountResponse'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/operation&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/portType&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;binding</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'ProfileMgmtBinding'</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">'tns:ProfileMgmt'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;soap:binding</span><span xmlns="" class="perl_Others"> style=</span><span xmlns="" class="perl_String">'document'</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    transport=</span><span xmlns="" class="perl_String">'http://schemas.xmlsoap.org/soap/http'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;operation</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'getCustomerDiscount'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;soap:operation</span><span xmlns="" class="perl_Others"> soapAction=</span><span xmlns="" class="perl_String">''</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;input&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;soap:body</span><span xmlns="" class="perl_Others"> use=</span><span xmlns="" class="perl_String">'literal'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/input&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;output&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;soap:body</span><span xmlns="" class="perl_Others"> use=</span><span xmlns="" class="perl_String">'literal'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/output&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/operation&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/binding&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;service</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'ProfileMgmtService'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;port</span><span xmlns="" class="perl_Others"> binding=</span><span xmlns="" class="perl_String">'tns:ProfileMgmtBinding'</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">'ProfileMgmtPort'</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;soap:address</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">             location=</span><span xmlns="" class="perl_String">'SERVER:PORT/jaxws-samples-retail/ProfileMgmtBean'</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/port&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/service&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/definitions&gt;</span>	
<span xmlns="" class="line">​</span>
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			If you use JAX-WS annotations to create your Web Service endpoint, the WSDL contract is generated automatically, and you only need its URL. You can get this URL from the <span class="guilabel"><strong>Webservices</strong></span> section of the <span class="guilabel"><strong>Runtime</strong></span> section of the web-based Management Console, after the endpoint is deployed.
		</div></div></div><div class="para">
		The <code class="command">wsconsume.sh</code> or <code class="command">wsconsume.bat</code> tool is used to consume the abstract contract (WSDL) and produce annotated Java classes and optional sources that define it. The command is located in the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/</code> directory of the JBoss EAP 6 installation.
	</div><div class="example"><a id="idm140550794383888">
      ⁠</a><p class="title"><strong>Example 16.17. Syntax of the <code class="command">wsconsume.sh</code> Command</strong></p><div class="example-contents"><pre class="screen">
[user@host bin]$ ./wsconsume.sh --help
WSConsumeTask is a cmd line tool that generates portable JAX-WS artifacts from a WSDL file.

usage: org.jboss.ws.tools.cmd.WSConsume [options] &lt;wsdl-url&gt;

options: 
    -h, --help                  Show this help message
    -b, --binding=&lt;file&gt;        One or more JAX-WS or JAXB binding files 
    -k, --keep                  Keep/Generate Java source
    -c  --catalog=&lt;file&gt;        Oasis XML Catalog file for entity resolution
    -p  --package=&lt;name&gt;        The target package for generated source
    -w  --wsdlLocation=&lt;loc&gt;    Value to use for @WebService.wsdlLocation
    -o, --output=&lt;directory&gt;    The directory to put generated artifacts
    -s, --source=&lt;directory&gt;    The directory to put Java source
    -t, --target=&lt;2.0|2.1|2.2&gt;  The JAX-WS specification target
    -q, --quiet                 Be somewhat more quiet
    -v, --verbose               Show full exception stack traces
    -l, --load-consumer         Load the consumer and exit (debug utility)
    -e, --extension             Enable SOAP 1.2 binding extension
    -a, --additionalHeaders     Enable processing of implicit SOAP headers
    -n, --nocompile             Do not compile generated sources

</pre></div></div><div class="para">
		The following command generates the source <code class="filename">.java</code> files listed in the output, from the <code class="filename">ProfileMgmtService.wsdl</code> file. The sources use the directory structure of the package, which is specified with the <code class="literal">-p</code> switch.
	</div><pre class="screen">[user@host bin]$ <code class="prompt"> wsconsume.sh -k -p org.jboss.test.ws.jaxws.samples.retail.profile ProfileMgmtService.wsdl</code>
output/org/jboss/test/ws/jaxws/samples/retail/profile/Customer.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/DiscountRequest.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/DiscountResponse.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/ObjectFactory.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmt.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtService.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/package-info.java
output/org/jboss/test/ws/jaxws/samples/retail/profile/Customer.class
output/org/jboss/test/ws/jaxws/samples/retail/profile/DiscountRequest.class
output/org/jboss/test/ws/jaxws/samples/retail/profile/DiscountResponse.class
output/org/jboss/test/ws/jaxws/samples/retail/profile/ObjectFactory.class
output/org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmt.class
output/org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtService.class
output/org/jboss/test/ws/jaxws/samples/retail/profile/package-info.class
</pre><div class="para">
		Both <code class="filename">.java</code> source files and compiled <code class="filename">.class</code> files are generated into the <code class="filename">output/</code> directory within the directory where you run the command.
	</div><div class="table"><a id="idm140550785915488">
      ⁠</a><p class="title"><strong>Table 16.2. Descriptions of Artifacts Created by <code class="command">wsconsume.sh</code></strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Descriptions of Artifacts Created by wsconsume.sh"><colgroup><col/><col/></colgroup><thead><tr><th> File </th><th> Description </th></tr></thead><tbody><tr><td> <div class="para">
						<code class="filename">ProfileMgmt.java</code>
					</div>
					 </td><td> <div class="para">
						Service endpoint interface.
					</div>
					 </td></tr><tr><td> <div class="para">
						<code class="filename">Customer.java</code>
					</div>
					 </td><td> <div class="para">
						Custom data type.
					</div>
					 </td></tr><tr><td> <div class="para">
						<code class="filename">Discount<em class="replaceable">*</em>.java</code>
					</div>
					 </td><td> <div class="para">
						Custom data types.
					</div>
					 </td></tr><tr><td> <div class="para">
						<code class="filename">ObjectFactory.java</code>
					</div>
					 </td><td> <div class="para">
						JAXB XML registry.
					</div>
					 </td></tr><tr><td> <div class="para">
						<code class="filename">package-info.java</code>
					</div>
					 </td><td> <div class="para">
						JAXB package annotations.
					</div>
					 </td></tr><tr><td> <div class="para">
						<code class="filename">ProfileMgmtService.java</code>
					</div>
					 </td><td> <div class="para">
						Service factory.
					</div>
					 </td></tr></tbody></table></div></div><div class="para">
		The <code class="filename">wsconsume.sh</code> command generates all custom data types (JAXB annotated classes), the service endpoint interface and a service factory class. These artifacts are used to build web service client implementations.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Construct a Service Stub</div>
			Web service clients use service stubs to abstract the details of a remote web service invocation. To a client application, a WS invocation looks like an invocation of any other business component. In this case the service endpoint interface acts as the business interface, and a service factory class is not used to construct it as a service stub.
		</div><div class="example"><a id="idm140550788761776">
      ⁠</a><p class="title"><strong>Example 16.18. Constructing a Service Stub and Accessing the Endpoint</strong></p><div class="example-contents"><div class="para">
			The following example first creates a service factory using the WSDL location and the service name. Next, it uses the service endpoint interface created by the <code class="command">wsconsume.sh</code> command to build the service stub. Finally, the stub can be used just as any other business interface would be.
		</div><div class="para">
			You can find the WSDL URL for your endpoint in the web-based Management Console. Choose the <span class="guilabel"><strong>Runtime</strong></span> menu item in the top bar then the <span class="guilabel"><strong>Webservices</strong></span> entry under <span class="guilabel"><strong>Subsystems</strong></span> in the left pane. View the <span class="guilabel"><strong>Attributes</strong></span> tab to review your deployments details.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.Service;</span>
<span xmlns="" class="line">​</span>[...]
<span xmlns="" class="line">​</span>Service service = Service.<span xmlns="" class="perl_Function">create</span>(                                 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">new</span> URL(<span xmlns="" class="perl_String">"http://example.org/service?wsdl"</span>),
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"MyService"</span>)
<span xmlns="" class="line">​</span>);
<span xmlns="" class="line">​</span>ProfileMgmt profileMgmt = service.<span xmlns="" class="perl_Function">getPort</span>(ProfileMgmt.<span xmlns="" class="perl_Function">class</span>);     
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">// Use the service stub in your application</span>
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8423-764434+%5BLatest%5D&amp;comment=Title%3A+Consume+and+Access+a+JAX-WS+Web+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8423-764434+09+Jul+2015+17%3A01+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Develop_a_JAX-WS_Client_Application">
      ⁠</a>16.5.2. Develop a JAX-WS Client Application</h2></div></div></div><div class="para">
		This topic discusses JAX-WS Web Service clients in general. The client communicates with, and requests work from, the JAX-WS endpoint, which is deployed in the Java Enterprise Edition 6 container. For detailed information about the classes, methods, and other implementation details mentioned below, refer to <a class="xref" href="chap-JAX-WS_Web_Services.html#JAX-WS_Common_API_Reference">Section 16.6.2, “JAX-WS Common API Reference”</a> and the relevant sections of the Javadocs bundle included with JBoss EAP 6.
	</div><div class="variablelist"><p class="title"><strong>Service</strong></p><dl class="variablelist"><dt><span class="term">Overview</span></dt><dd><div class="para">
					A <code class="code">Service</code> is an abstraction which represents a WSDL service. A WSDL service is a collection of related ports, each of which includes a port type bound to a particular protocol and a particular endpoint address.
				</div><div class="para">
					Usually, the Service is generated when the rest of the component stubs are generated from an existing WSDL contract. The WSDL contract is available via the WSDL URL of the deployed endpoint, or can be created from the endpoint source using the <code class="filename">wsprovide.sh</code> command in the <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/</code> directory.
				</div><div class="para">
					This type of usage is referred to as the <em class="firstterm">static</em> use case. In this case, you create instances of the <code class="code">Service</code> class which is created as one of the component stubs.
				</div><div class="para">
					You can also create the service manually, using the <code class="code">Service.create</code> method. This is referred to as the <em class="firstterm">dynamic</em> use case.
				</div></dd><dt><span class="term">Usage</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Static Use Case</span></dt><dd><div class="para">
								The <em class="firstterm">static</em> use case for a JAX-WS client assumes that you already have a WSDL contract. This may be generated by an external tool or generated by using the correct JAX-WS annotations when you create your JAX-WS endpoint.
							</div><div class="para">
								To generate your component stubs, you use the <code class="code">wsconsume.sh</code> or <code class="code">wsconsume.bat</code> script which is included in <code class="filename"><em class="replaceable">EAP_HOME</em>/bin/</code>. The script takes the WSDL URL or file as a parameter, and generates multiple of files, structured in a directory tree. The source and class files representing your <code class="code">Service</code> are named <code class="code"><em class="replaceable">CLASSNAME</em>_Service.java</code> and <code class="code"><em class="replaceable">CLASSNAME</em>_Service.class</code>, respectively.
							</div><div class="para">
								The generated implementation class has two public constructors, one with no arguments and one with two arguments. The two arguments represent the WSDL location (a <code class="code">java.net.URL</code>) and the service name (a <code class="code">javax.xml.namespace.QName</code>) respectively.
							</div><div class="para">
								The no-argument constructor is the one used most often. In this case the WSDL location and service name are those found in the WSDL. These are set implicitly from the <code class="code">@WebServiceClient</code> annotation that decorates the generated class.
							</div><div class="example"><a id="idm140550812231376">
      ⁠</a><p class="title"><strong>Example 16.19. Example Generated Service Class</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">WebServiceClient</span>(name=<span xmlns="" class="perl_String">"StockQuoteService"</span>, targetNamespace=<span xmlns="" class="perl_String">"http://example.com/stocks"</span>, wsdlLocation=<span xmlns="" class="perl_String">"http://example.com/stocks.wsdl"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> StockQuoteService <span xmlns="" class="perl_Keyword">extends</span> javax.<span xmlns="" class="perl_Function">xml</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">Service</span>
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">StockQuoteService</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">super</span>(<span xmlns="" class="perl_Keyword">new</span> URL(<span xmlns="" class="perl_String">"http://example.com/stocks.wsdl"</span>), <span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"http://example.com/stocks"</span>, <span xmlns="" class="perl_String">"StockQuoteService"</span>));
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">StockQuoteService</span>(String wsdlLocation, QName serviceName)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">super</span>(wsdlLocation, serviceName);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>}
</pre></div></div></dd><dt><span class="term">Dynamic Use Case</span></dt><dd><div class="para">
								In the dynamic case, no stubs are generated automatically. Instead, a web service client uses the <code class="code">Service.create</code> method to create <code class="code">Service</code> instances. The following code fragment illustrates this process.
							</div><div class="example"><a id="idm140550788400208">
      ⁠</a><p class="title"><strong>Example 16.20. Creating Services Manually</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>URL wsdlLocation = <span xmlns="" class="perl_Keyword">new</span> URL(<span xmlns="" class="perl_String">"http://example.org/my.wsdl"</span>);
<span xmlns="" class="line">​</span>QName serviceName = <span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"http://example.org/sample"</span>, <span xmlns="" class="perl_String">"MyService"</span>);
<span xmlns="" class="line">​</span>Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlLocation, serviceName);
<span xmlns="" class="line">​</span>
</pre></div></div></dd></dl></div></dd><dt><span class="term">Handler Resolver</span></dt><dd><div class="para">
					JAX-WS provides a flexible plug-in framework for message processing modules, known as <em class="firstterm">handlers</em>. These handlers extend the capabilities of a JAX-WS runtime system. A <code class="code">Service</code> instance provides access to a <code class="code">HandlerResolver</code> via a pair of <code class="code">getHandlerResolver</code> and <code class="code">setHandlerResolver</code> methods that can configure a set of handlers on a per-service, per-port or per-protocol binding basis.
				</div><div class="para">
					When a <code class="code">Service</code> instance creates a proxy or a <code class="code">Dispatch</code> instance, the handler resolver currently registered with the service creates the required handler chain. Subsequent changes to the handler resolver configured for a <code class="code">Service</code> instance do not affect the handlers on previously created proxies or <code class="code">Dispatch</code> instances.
				</div></dd><dt><span class="term">Executor</span></dt><dd><div class="para">
					<code class="code">Service</code> instances can be configured with a <code class="code">java.util.concurrent.Executor</code>. The <code class="code">Executor</code> invokes any asynchronous callbacks requested by the application. The <code class="code">setExecutor</code> and <code class="code">getExecutor</code> methods of <code class="code">Service</code> can modify and retrieve the <code class="code">Executor</code> configured for a service.
				</div></dd></dl></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Dynamic Proxy</div>
			A <em class="firstterm">dynamic proxy</em> is an instance of a client proxy using one of the <code class="code">getPort</code> methods provided in the <code class="code">Service</code>. The <code class="code">portName</code> specifies the name of the WSDL port the service uses. The <code class="code">serviceEndpointInterface</code> specifies the service endpoint interface supported by the created dynamic proxy instance.
		</div><div class="example"><a id="idm140550739655136">
      ⁠</a><p class="title"><strong>Example 16.21. <code class="code">getPort</code> Methods</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> &lt;T&gt; T <span xmlns="" class="perl_Function">getPort</span>(QName portName, <span xmlns="" class="perl_Keyword">Class</span>&lt;T&gt; serviceEndpointInterface)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> &lt;T&gt; T <span xmlns="" class="perl_Function">getPort</span>(<span xmlns="" class="perl_Keyword">Class</span>&lt;T&gt; serviceEndpointInterface)
</pre></div></div><div class="para">
		The <em class="firstterm">Service Endpoint Interface</em> is usually generated using the <code class="code">wsconsume.sh</code> command, which parses the WSDL and creates Java classes from it.
	</div><div class="para">
		A typed method which returns a port is also provided. These methods also return dynamic proxies that implement the SEI. See the following example.
	</div><div class="example"><a id="idm140550730413824">
      ⁠</a><p class="title"><strong>Example 16.22. Returning the Port of a Service</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">WebServiceClient</span>(name = <span xmlns="" class="perl_String">"TestEndpointService"</span>, targetNamespace = <span xmlns="" class="perl_String">"http://org.jboss.ws/wsref"</span>,
<span xmlns="" class="line">​</span>   wsdlLocation = <span xmlns="" class="perl_String">"http://localhost.localdomain:8080/jaxws-samples-webserviceref?wsdl"</span>)
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> TestEndpointService <span xmlns="" class="perl_Keyword">extends</span> Service
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">TestEndpointService</span>(URL wsdlLocation, QName serviceName) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">super</span>(wsdlLocation, serviceName);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">WebEndpoint</span>(name = <span xmlns="" class="perl_String">"TestEndpointPort"</span>)
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> TestEndpoint <span xmlns="" class="perl_Function">getTestEndpointPort</span>()
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> (TestEndpoint)<span xmlns="" class="perl_Keyword">super</span>.<span xmlns="" class="perl_Function">getPort</span>(TESTENDPOINTPORT, TestEndpoint.<span xmlns="" class="perl_Function">class</span>);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"><code class="code">@WebServiceRef</code></div>
			The <code class="code">@WebServiceRef</code> annotation declares a reference to a Web Service. It follows the resource pattern shown by the <code class="code">javax.annotation.Resource</code> annotation defined in <a href="http://www.jcp.org/en/jsr/summary?id=250">http://www.jcp.org/en/jsr/summary?id=250</a>.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Use Cases for <code class="code">@WebServiceRef</code></strong></p><ul><li class="listitem"><div class="para">
				You can use it to define a reference whose type is a generated <code class="code">Service</code> class. In this case, the type and value element each refer to the generated <code class="code">Service</code> class type. Moreover, if the reference type can be inferred by the field or method declaration the annotation is applied to, the type and value elements may (but are not required to) have the default value of <code class="literal">Object.class</code>. If the type cannot be inferred, then at least the type element must be present with a non-default value.
			</div></li><li class="listitem"><div class="para">
				You can use it to define a reference whose type is an SEI. In this case, the type element may (but is not required to) be present with its default value if the type of the reference can be inferred from the annotated field or method declaration. However, the value element must always be present and refer to a generated service class type, which is a subtype of <code class="code">javax.xml.ws.Service</code>. The <code class="code">wsdlLocation</code> element, if present, overrides the WSDL location information specified in the <code class="code">@WebService</code> annotation of the referenced generated service class.
			</div><div class="example"><a id="idm140550789072576">
      ⁠</a><p class="title"><strong>Example 16.23. <code class="code">@WebServiceRef</code> Examples</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> EJB3Client <span xmlns="" class="perl_Keyword">implements</span> EJB3Remote
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @WebServiceRef
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> TestEndpointService service4;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   @WebServiceRef
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> TestEndpoint port3;
</pre></div></div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Dispatch</div>
			XML Web Services use XML messages for communication between the endpoint, which is deployed in the Java EE container, and any clients. The XML messages use an XML language called <em class="firstterm">Simple Object Access Protocol (SOAP)</em>. The JAX-WS API provides the mechanisms for the endpoint and clients to each be able to send and receive SOAP messages. Marshalling is the process of converting a Java Object into a SOAP XML message. Unmarshalling is the process of converting the SOAP XML message back into a Java Object.
		</div><div class="para">
		In some cases, you need access to the raw SOAP messages themselves, rather than the result of the conversion. The <code class="code">Dispatch</code> class provides this functionality. <code class="code">Dispatch</code> operates in one of two usage modes, which are identified by one of the following constants.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				<code class="code">javax.xml.ws.Service.Mode.MESSAGE</code> - This mode directs client applications to work directly with protocol-specific message structures. When used with a SOAP protocol binding, a client application works directly with a SOAP message.
			</div></li><li class="listitem"><div class="para">
				<code class="code">javax.xml.ws.Service.Mode.PAYLOAD</code> - This mode causes the client to work with the payload itself. For instance, if it is used with a SOAP protocol binding, a client application would work with the contents of the SOAP body rather than the entire SOAP message.
			</div></li></ul></div><div class="para">
		<code class="code">Dispatch</code> is a low-level API which requires clients to structure messages or payloads as XML, with strict adherence to the standards of the individual protocol and a detailed knowledge of message or payload structure. <code class="code">Dispatch</code> is a generic class which supports input and output of messages or message payloads of any type.
	</div><div class="example"><a id="idm140550798684960">
      ⁠</a><p class="title"><strong>Example 16.24. <code class="code">Dispatch</code> Usage</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlURL, serviceName);
<span xmlns="" class="line">​</span>Dispatch dispatch = service.<span xmlns="" class="perl_Function">createDispatch</span>(portName, StreamSource.<span xmlns="" class="perl_Function">class</span>, Mode.<span xmlns="" class="perl_Function">PAYLOAD</span>);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>String payload = <span xmlns="" class="perl_String">"&lt;ns1:ping xmlns:ns1='http://oneway.samples.jaxws.ws.test.jboss.org/'/&gt;"</span>;
<span xmlns="" class="line">​</span>dispatch.<span xmlns="" class="perl_Function">invokeOneWay</span>(<span xmlns="" class="perl_Keyword">new</span> StreamSource(<span xmlns="" class="perl_Keyword">new</span> StringReader(payload)));
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>payload = <span xmlns="" class="perl_String">"&lt;ns1:feedback xmlns:ns1='http://oneway.samples.jaxws.ws.test.jboss.org/'/&gt;"</span>;
<span xmlns="" class="line">​</span>Source retObj = (Source)dispatch.<span xmlns="" class="perl_Function">invoke</span>(<span xmlns="" class="perl_Keyword">new</span> StreamSource(<span xmlns="" class="perl_Keyword">new</span> StringReader(payload)));
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Asynchronous Invocations</div>
			The <code class="code">BindingProvider</code> interface represents a component that provides a protocol binding which clients can use. It is implemented by proxies and is extended by the <code class="code">Dispatch</code> interface.
		</div><div class="para">
		<code class="code">BindingProvider</code> instances may provide asynchronous operation capabilities.Asynchronous operation invocations are decoupled from the <code class="code">BindingProvider</code> instance at invocation time. The response context is not updated when the operation completes. Instead, a separate response context is made available using the <code class="code">Response</code> interface.
	</div><div class="example"><a id="idm140550797795360">
      ⁠</a><p class="title"><strong>Example 16.25. Example Asynchronous Invocation</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">testInvokeAsync</span>() <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   URL wsdlURL = <span xmlns="" class="perl_Keyword">new</span> URL(<span xmlns="" class="perl_String">"http://"</span> + <span xmlns="" class="perl_Function">getServerHost</span>() + <span xmlns="" class="perl_String">":8080/jaxws-samples-asynchronous?wsdl"</span>);
<span xmlns="" class="line">​</span>   QName serviceName = <span xmlns="" class="perl_Keyword">new</span> QName(targetNS, <span xmlns="" class="perl_String">"TestEndpointService"</span>);
<span xmlns="" class="line">​</span>   Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlURL, serviceName);
<span xmlns="" class="line">​</span>   TestEndpoint port = service.<span xmlns="" class="perl_Function">getPort</span>(TestEndpoint.<span xmlns="" class="perl_Function">class</span>);
<span xmlns="" class="line">​</span>   Response response = port.<span xmlns="" class="perl_Function">echoAsync</span>(<span xmlns="" class="perl_String">"Async"</span>);
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Comment">// access future</span>
<span xmlns="" class="line">​</span>   String retStr = (String) response.<span xmlns="" class="perl_Function">get</span>();
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Function">assertEquals</span>(<span xmlns="" class="perl_String">"Async"</span>, retStr);
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"><code class="code">@Oneway</code> Invocations</div>
			The <code class="code">@Oneway</code> annotation indicates that the given web method takes an input message but returns no output message. Usually, a <code class="code">@Oneway</code> method returns the thread of control to the calling application before the business method is executed.
		</div><div class="example"><a id="idm140550783483264">
      ⁠</a><p class="title"><strong>Example 16.26. Example <code class="code">@Oneway</code> Invocation</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">WebService</span> (name=<span xmlns="" class="perl_String">"PingEndpoint"</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">SOAPBinding</span>(style = SOAPBinding.<span xmlns="" class="perl_Function">Style</span>.<span xmlns="" class="perl_Function">RPC</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> PingEndpointImpl
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">static</span> String feedback;
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>   @WebMethod
<span xmlns="" class="line">​</span>   @Oneway
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">ping</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      log.<span xmlns="" class="perl_Function">info</span>(<span xmlns="" class="perl_String">"ping"</span>);
<span xmlns="" class="line">​</span>      feedback = <span xmlns="" class="perl_String">"ok"</span>;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>   @WebMethod
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">feedback</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      log.<span xmlns="" class="perl_Function">info</span>(<span xmlns="" class="perl_String">"feedback"</span>);
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> feedback;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Timeout Configuration</div>
			Two different properties control the timeout behavior of the HTTP connection and the timeout of a client which is waiting to receive a message. The first is <code class="code">javax.xml.ws.client.connectionTimeout</code> and the second is <code class="code">javax.xml.ws.client.receiveTimeout</code>. Each is expressed in milliseconds, and the correct syntax is shown below.
		</div><div class="example"><a id="idm140550810809328">
      ⁠</a><p class="title"><strong>Example 16.27. JAX-WS Timeout Configuration</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">testConfigureTimeout</span>() <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Comment">//Set timeout until a connection is established</span>
<span xmlns="" class="line">​</span>   ((BindingProvider)port).<span xmlns="" class="perl_Function">getRequestContext</span>().<span xmlns="" class="perl_Function">put</span>(<span xmlns="" class="perl_String">"javax.xml.ws.client.connectionTimeout"</span>, <span xmlns="" class="perl_String">"6000"</span>);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Comment">//Set timeout until the response is received</span>
<span xmlns="" class="line">​</span>   ((BindingProvider) port).<span xmlns="" class="perl_Function">getRequestContext</span>().<span xmlns="" class="perl_Function">put</span>(<span xmlns="" class="perl_String">"javax.xml.ws.client.receiveTimeout"</span>, <span xmlns="" class="perl_String">"1000"</span>);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   port.<span xmlns="" class="perl_Function">echo</span>(<span xmlns="" class="perl_String">"testTimeout"</span>);
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8843-698206+%5BLatest%5D&amp;comment=Title%3A+Develop+a+JAX-WS+Client+Application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8843-698206+14+Aug+2014+10%3A16+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JAX-WS_Development_Reference">
      ⁠</a>16.6. JAX-WS Development Reference</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enable_Web_Services_Addressing_WS-Addressing">
      ⁠</a>16.6.1. Enable Web Services Addressing (WS-Addressing)</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Your application must have an existing JAX-WS service and client configuration.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550794567088">
      ⁠</a><p class="title"><strong>Procedure 16.2. Annotate and Update client code</strong></p><ol class="1"><li class="step"><p class="title"><strong>Annotate the service endpoint</strong></p><div class="para">
				Add the <code class="code">@Addressing</code> annotation to the application's endpoint code.
			</div><div class="example"><a id="idm140550775820704">
      ⁠</a><p class="title"><strong>Example 16.28. <code class="code">@Addressing</code> annotation</strong></p><div class="example-contents"><div class="para">
					This example demonstrates a regular JAX-WS endpoint with the <code class="code">@Addressing</code> annotation added.
				</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.WebService;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.soap.Addressing;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@WebService
<span xmlns="" class="line">​</span>(
<span xmlns="" class="line">​</span>   portName = <span xmlns="" class="perl_String">"AddressingServicePort"</span>,
<span xmlns="" class="line">​</span>   serviceName = <span xmlns="" class="perl_String">"AddressingService"</span>,
<span xmlns="" class="line">​</span>   wsdlLocation = <span xmlns="" class="perl_String">"WEB-INF/wsdl/AddressingService.wsdl"</span>,
<span xmlns="" class="line">​</span>   targetNamespace = <span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>,
<span xmlns="" class="line">​</span>   endpointInterface = <span xmlns="" class="perl_String">"org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"</span>
<span xmlns="" class="line">​</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Addressing</span>(enabled=<span xmlns="" class="perl_Keyword">true</span>, required=<span xmlns="" class="perl_Keyword">true</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ServiceImpl <span xmlns="" class="perl_Keyword">implements</span> ServiceIface
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">sayHello</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Hello World!"</span>;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre></div></div></li><li class="step"><p class="title"><strong>Update client code</strong></p><div class="para">
				Update the client code in the application so that it configures WS-Addressing.
			</div><div class="example"><a id="idm140550803999024">
      ⁠</a><p class="title"><strong>Example 16.29. Client configuration for WS-Addressing</strong></p><div class="example-contents"><div class="para">
					This example demonstrates a regular JAX-WS client updated to configure WS-Addressing.
				</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.net.URL;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.namespace.QName;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.Service;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.soap.AddressingFeature;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">final</span> <span xmlns="" class="perl_Keyword">class</span> AddressingTestCase
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">final</span> String serviceURL = 
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_String">"http://localhost:8080/jaxws-samples-wsa/AddressingService"</span>;
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">main</span>(String[] args) <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">// construct proxy</span>
<span xmlns="" class="line">​</span>      QName serviceName = 
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>,
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_String">"AddressingService"</span>);
<span xmlns="" class="line">​</span>      URL wsdlURL = <span xmlns="" class="perl_Keyword">new</span> URL(serviceURL + <span xmlns="" class="perl_String">"?wsdl"</span>);
<span xmlns="" class="line">​</span>      Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlURL, serviceName);
<span xmlns="" class="line">​</span>      ServiceIface proxy = 
<span xmlns="" class="line">​</span>          (ServiceIface)service.<span xmlns="" class="perl_Function">getPort</span>(ServiceIface.<span xmlns="" class="perl_Function">class</span>,  
<span xmlns="" class="line">​</span>                                        <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">AddressingFeature</span>());
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">// invoke method</span>
<span xmlns="" class="line">​</span>      proxy.<span xmlns="" class="perl_Function">sayHello</span>();
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre></div></div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The client and endpoint are now communicating using WS-Addressing.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+3581-591655+%5BLatest%5D&amp;comment=Title%3A+Enable+Web+Services+Addressing+%28WS-Addressing%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=3581-591655+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JAX-WS_Common_API_Reference">
      ⁠</a>16.6.2. JAX-WS Common API Reference</h2></div></div></div><div class="para">
		Several JAX-WS development concepts are shared between Web Service endpoints and clients. These include the handler framework, message context, and fault handling.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Handler Framework</div>
			The handler framework is implemented by a JAX-WS protocol binding in the runtime of the client and the endpoint, which is the server component. Proxies and <code class="code">Dispatch</code> instances, known collectively as <em class="firstterm">binding providers</em>, each use protocol bindings to bind their abstract functionality to specific protocols.
		</div><div class="para">
		Client and server-side handlers are organized into an ordered list known as a <em class="firstterm">handler chain</em>. The handlers within a handler chain are invoked each time a message is sent or received. Inbound messages are processed by handlers before the binding provider processes them. Outbound messages are processed by handlers after the binding provider processes them.
	</div><div class="para">
		Handlers are invoked with a message context which provides methods to access and modify inbound and outbound messages and to manage a set of properties. Message context properties facilitate communication between individual handlers, as well as between handlers and client and service implementations. Different types of handlers are invoked with different types of message contexts.
	</div><div class="variablelist"><p class="title"><strong>Types of Message Handlers</strong></p><dl class="variablelist"><dt><span class="term">Logical Handler</span></dt><dd><div class="para">
					<em class="firstterm">Logical handlers</em> only operate on message context properties and message payloads. Logical handlers are protocol-independent and cannot affect protocol-specific parts of a message. Logical handlers implement interface <code class="code">javax.xml.ws.handler.LogicalHandler</code>.
				</div></dd><dt><span class="term">Protocol Handler</span></dt><dd><div class="para">
					<em class="firstterm">Protocol handlers</em> operate on message context properties and protocol-specific messages. Protocol handlers are specific to a particular protocol and may access and change protocol-specific aspects of a message. Protocol handlers implement any interface derived from <code class="code">javax.xml.ws.handler.Handler except javax.xml.ws.handler.LogicalHandler</code>.
				</div></dd><dt><span class="term">Service Endpoint Handler</span></dt><dd><div class="para">
					On a service endpoint, handlers are defined using the <code class="code">@HandlerChain</code> annotation. The location of the handler chain file can be either an absolute <code class="code">java.net.URL</code> in <code class="code">externalForm</code> or a relative path from the source file or class file.
				</div><div class="example"><a id="idm140550794560384">
      ⁠</a><p class="title"><strong>Example 16.30. Example Service Endpoint Handler</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@WebService
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">HandlerChain</span>(file = <span xmlns="" class="perl_String">"jaxws-server-source-handlers.xml"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> SOAPEndpointSourceImpl
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
</pre></div></div></dd><dt><span class="term">Service Client Handler</span></dt><dd><div class="para">
					On a JAX-WS client, handlers are defined either by using the <code class="code">@HandlerChain</code> annotation, as in service endpoints, or dynamically, using the JAX-WS API.
				</div><div class="example"><a id="idm140550786135872">
      ⁠</a><p class="title"><strong>Example 16.31. Defining a Service Client Handler Using the API</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlURL, serviceName);
<span xmlns="" class="line">​</span>Endpoint port = (Endpoint)service.<span xmlns="" class="perl_Function">getPort</span>(Endpoint.<span xmlns="" class="perl_Function">class</span>);
<span xmlns="" class="line">​</span>     
<span xmlns="" class="line">​</span>BindingProvider bindingProvider = (BindingProvider)port;
<span xmlns="" class="line">​</span>List&lt;Handler&gt; handlerChain = <span xmlns="" class="perl_Keyword">new</span> ArrayList&lt;Handler&gt;();
<span xmlns="" class="line">​</span>handlerChain.<span xmlns="" class="perl_Function">add</span>(<span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">LogHandler</span>());
<span xmlns="" class="line">​</span>handlerChain.<span xmlns="" class="perl_Function">add</span>(<span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">AuthorizationHandler</span>());
<span xmlns="" class="line">​</span>handlerChain.<span xmlns="" class="perl_Function">add</span>(<span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">RoutingHandler</span>());
<span xmlns="" class="line">​</span>bindingProvider.<span xmlns="" class="perl_Function">getBinding</span>().<span xmlns="" class="perl_Function">setHandlerChain</span>(handlerChain);
</pre><div class="para">
						The call to the <code class="code">setHandlerChain</code> method is required.
					</div></div></div></dd></dl></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Message Context</div>
			The <code class="code">MessageContext</code> interface is the super interface for all JAX-WS message contexts. It extends <code class="code">Map&lt;String,Object&gt;</code> with additional methods and constants to manage a set of properties that enable handlers in a handler chain to share processing related state. For example, a handler may use the <code class="code">put</code> method to insert a property into the message context. One or more other handlers in the handler chain may subsequently obtain the message via the <code class="code">get</code> method.
		</div><div class="para">
		Properties are scoped as either <code class="literal">APPLICATION</code> or <code class="literal">HANDLER</code>. All properties are available to all handlers for an instance of a <em class="firstterm">message exchange pattern (MEP)</em> of a particular endpoint. For instance, if a logical handler puts a property into the message context, that property is also available to any protocol handlers in the chain during the execution of an MEP instance.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			An asynchronous Message Exchange Pattern (MEP) allows for sending and receiving messages asynchronously at the HTTP connection level. You can enable it by setting additional properties in the request context.
		</div></div></div><div class="para">
		Properties scoped at the <code class="literal">APPLICATION</code> level are also made available to client applications and service endpoint implementations. The <code class="code">defaultscope</code> for a property is <code class="literal">HANDLER</code>.
	</div><div class="para">
		Logical amd SOAP messages use different contexts.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Logical Message Context</span></dt><dd><div class="para">
					When logical handlers are invoked, they receive a message context of type <code class="code">LogicalMessageContext</code>. <code class="code">LogicalMessageContext</code> extends <code class="code">MessageContext</code> with methods which obtain and modify the message payload. It does not provide access to the protocol-specific aspects of a message. A protocol binding defines which components of a message are available via a logical message context. A logical handler deployed in a SOAP binding can access the contents of the SOAP body but not the SOAP headers. On the other hand, the XML/HTTP binding defines that a logical handler can access the entire XML payload of a message.
				</div></dd><dt><span class="term">SOAP Message Context</span></dt><dd><div class="para">
					When SOAP handlers are invoked, they receive a <code class="code">SOAPMessageContext</code>. <code class="code">SOAPMessageContext</code> extends <code class="code">MessageContext</code> with methods which obtain and modify the SOAP message payload.
				</div></dd></dl></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Fault Handling</div>
			An application may throw a <code class="literal">SOAPFaultException</code> or an application-specific user exception. In the case of the latter, the required fault wrapper beans are generated at run-time if they are not already part of the deployment.
		</div><div class="example"><a id="idm140550811119632">
      ⁠</a><p class="title"><strong>Example 16.32. Fault Handling Examples</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">throwSoapFaultException</span>()
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   SOAPFactory factory = SOAPFactory.<span xmlns="" class="perl_Function">newInstance</span>();
<span xmlns="" class="line">​</span>   SOAPFault fault = factory.<span xmlns="" class="perl_Function">createFault</span>(<span xmlns="" class="perl_String">"this is a fault string!"</span>, <span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"http://foo"</span>, <span xmlns="" class="perl_String">"FooCode"</span>));
<span xmlns="" class="line">​</span>   fault.<span xmlns="" class="perl_Function">setFaultActor</span>(<span xmlns="" class="perl_String">"mr.actor"</span>);
<span xmlns="" class="line">​</span>   fault.<span xmlns="" class="perl_Function">addDetail</span>().<span xmlns="" class="perl_Function">addChildElement</span>(<span xmlns="" class="perl_String">"test"</span>);
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">throw</span> <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">SOAPFaultException</span>(fault);
<span xmlns="" class="line">​</span>}
</pre><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">throwApplicationException</span>() <span xmlns="" class="perl_Keyword">throws</span> UserException
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">throw</span> <span xmlns="" class="perl_Keyword">new</span> UserException(<span xmlns="" class="perl_String">"validation"</span>, <span xmlns="" class="perl_Float">123</span>, <span xmlns="" class="perl_String">"Some validation error"</span>);
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">JAX-WS Annotations</div>
			The annotations available via the JAX-WS API are defined in JSR-224, which can be found at <a href="http://www.jcp.org/en/jsr/detail?id=224">http://www.jcp.org/en/jsr/detail?id=224</a>. These annotations are in package <code class="code">javax.xml.ws</code>.
		</div><div class="para">
		The annotations available via the JWS API are defined in JSR-181, which can be found at <a href="http://www.jcp.org/en/jsr/detail?id=181">http://www.jcp.org/en/jsr/detail?id=181</a>. These annotations are in package <code class="code">javax.jws</code>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+8841-646560+%5BLatest%5D&amp;comment=Title%3A+JAX-WS+Common+API+Reference%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=8841-646560+28+May+2014+14%3A42+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>