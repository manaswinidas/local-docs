<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 11. CDI</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-CDI">
      ⁠</a>Chapter 11. CDI</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Overview_of_CDI">
      ⁠</a>11.1. Overview of CDI</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Overview_of_CDI">
      ⁠</a>11.1.1. Overview of CDI</h2></div></div></div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#About_Contexts_and_Dependency_Injection_CDI">Section 11.1.2, “About Contexts and Dependency Injection (CDI)”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Relationship_Between_Weld_Seam_2_and_JavaServer_Faces">Section 11.1.5, “Relationship Between Weld, Seam 2, and JavaServer Faces”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Benefits_of_CDI">Section 11.1.3, “Benefits of CDI”</a>
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4436-591662+%5BLatest%5D&amp;comment=Title%3A+Overview+of+CDI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4436-591662+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Contexts_and_Dependency_Injection_CDI">
      ⁠</a>11.1.2. About Contexts and Dependency Injection (CDI)</h2></div></div></div><div class="para">
		Contexts and Dependency Injection (CDI) is a specification designed to enable EJB 3.0 components "to be used as Java Server Faces (JSF) managed beans, unifying the two component models and enabling a considerable simplification to the programming model for web-based applications in Java." The preceding quote is taken from the JSR-299 specification, which can be found at <a href="http://www.jcp.org/en/jsr/detail?id=299">http://www.jcp.org/en/jsr/detail?id=299</a>.
	</div><div class="para">
		JBoss EAP 6 includes Weld, which is the reference implementation of JSR-299. For more information, about type-safe dependency injection, see <a class="xref" href="chap-CDI.html#About_Type-safe_Dependency_Injection">Section 11.1.4, “About Type-safe Dependency Injection”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4437-591662+%5BLatest%5D&amp;comment=Title%3A+About+Contexts+and+Dependency+Injection+%28CDI%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4437-591662+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Benefits_of_CDI">
      ⁠</a>11.1.3. Benefits of CDI</h2></div></div></div><div class="para">
		Following are the benefits of CDI:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				It simplifies and shrinks your code base by replacing big chunks of code with annotations.
			</div></li><li class="listitem"><div class="para">
				It is flexible, allowing you to disable and enable injections and events, use alternative beans, and inject non-CDI objects easily.
			</div></li><li class="listitem"><div class="para">
				It is easy to use your old code with CDI. You only need to include a <code class="filename">beans.xml</code> in your <code class="filename">META-INF/</code> or <code class="filename">WEB-INF/</code> directory. The file can be empty.
			</div></li><li class="listitem"><div class="para">
				It simplifies packaging and deployments and reduces the amount of XML you need to add to your deployments.
			</div></li><li class="listitem"><div class="para">
				It provides lifecycle management via contexts. You can tie injections to requests, sessions, conversations, or custom contexts.
			</div></li><li class="listitem"><div class="para">
				It also provides type-safe dependency injection, which is safer and easier to debug than string-based injection.
			</div></li><li class="listitem"><div class="para">
				It decouples interceptors from beans.
			</div></li><li class="listitem"><div class="para">
				It provides complex event notification.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4447-759597+%5BLatest%5D&amp;comment=Title%3A+Benefits+of+CDI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4447-759597+28+May+2015+04%3A41+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Type-safe_Dependency_Injection">
      ⁠</a>11.1.4. About Type-safe Dependency Injection</h2></div></div></div><div class="para">
		Before JSR-299 and CDI, the only way to inject dependencies in Java was to use strings. This was prone to errors. CDI introduces the ability to inject dependencies in a type-safe way.
	</div><div class="para">
		For more information about CDI, refer to <a class="xref" href="chap-CDI.html#About_Contexts_and_Dependency_Injection_CDI">Section 11.1.2, “About Contexts and Dependency Injection (CDI)”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4438-591662+%5BLatest%5D&amp;comment=Title%3A+About+Type-safe+Dependency+Injection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4438-591662+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Relationship_Between_Weld_Seam_2_and_JavaServer_Faces">
      ⁠</a>11.1.5. Relationship Between Weld, Seam 2, and JavaServer Faces</h2></div></div></div><div class="para">
		The goal of <em class="firstterm">Seam 2</em> was to unify Enterprise Java Beans (EJBs) and JavaServer Faces (JSF) managed beans.
	</div><div class="para">
		<em class="firstterm">JavaServer Faces (JSF)</em> implements JSR-314. It is an API for building server-side user interfaces. <em class="firstterm">JBoss Web Framework Kit</em> includes <em class="firstterm">RichFaces</em>, which is an implementation of JavaServer Faces and AJAX.
	</div><div class="para">
		<em class="firstterm">Weld</em> is the reference implementation of <em class="firstterm">Contexts and Dependency Injection (CDI)</em>, which is defined in JSR-299. Weld was inspired by Seam 2 and other dependency injection frameworks. Weld is included in JBoss EAP 6.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4445-591664+%5BLatest%5D&amp;comment=Title%3A+Relationship+Between+Weld%2C+Seam+2%2C+and+JavaServer+Faces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4445-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Use_CDI">
      ⁠</a>11.2. Use CDI</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-First_Steps">
      ⁠</a>11.2.1. First Steps</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Enable_CDI">
      ⁠</a>11.2.1.1. Enable CDI</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Contexts and Dependency Injection (CDI) is one of the core technologies in JBoss EAP 6, and is enabled by default. If for some reason it is disabled and you need to enable it, follow this procedure.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550803683856">
      ⁠</a><p class="title"><strong>Procedure 11.1. Enable CDI in JBoss EAP 6</strong></p><ol class="1"><li class="step"><p class="title"><strong>Check to see if the CDI subsystem details are commented out of the configuration file.</strong></p><div class="para">
				A subsystem can be disabled by commenting out the relevant section of the <code class="filename">domain.xml</code> or <code class="filename">standalone.xml</code> configuration files, or by removing the relevant section altogether.
			</div><div class="para">
				To find the CDI subsystem in <code class="filename"><em class="replaceable">EAP_HOME</em>/domain/configuration/domain.xml</code> or <code class="filename"><em class="replaceable">EAP_HOME</em>/standalone/configuration/standalone.xml</code>, search them for the following string. If it exists, it is located inside the &lt;extensions&gt; section.
			</div><pre class="screen">&lt;extension module="org.jboss.as.weld"/&gt;</pre><div class="para">
				The following line must also be present in the profile you are using. Profiles are in individual &lt;profile&gt; elements within the &lt;profiles&gt; section.
			</div><pre class="screen">&lt;subsystem xmlns="urn:jboss:domain:weld:1.0"/&gt;</pre></li><li class="step"><p class="title"><strong>Before editing any files, stop JBoss EAP 6.</strong></p><div class="para">
				JBoss EAP 6 modifies the configuration files during the time it is running, so you must stop the server before you edit the configuration files directly.
			</div></li><li class="step"><p class="title"><strong>Edit the configuration file to restore the CDI subsystem.</strong></p><div class="para">
				If the CDI subsystem was commented out, remove the comments.
			</div><div class="para">
				If it was removed entirely, restore it by adding this line to the file in a new line directly above the &lt;/extensions&gt; tag:
			</div><pre class="screen">&lt;extension module="org.jboss.as.weld"/&gt;</pre></li><li class="step"><div class="para">
				You also need to add the following line to the relevant profile in the &lt;profiles&gt; section.
			</div><pre class="screen">&lt;subsystem xmlns="urn:jboss:domain:weld:1.0"/&gt;</pre></li><li class="step"><p class="title"><strong>Restart JBoss EAP 6.</strong></p><div class="para">
				Start JBoss EAP 6 with your updated configuration.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			JBoss EAP 6 starts with the CDI subsystem enabled.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4451-591664+%5BLatest%5D&amp;comment=Title%3A+Enable+CDI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4451-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Use_CDI_to_Develop_an_Application">
      ⁠</a>11.2.2. Use CDI to Develop an Application</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_CDI_to_Develop_an_Application">
      ⁠</a>11.2.2.1. Use CDI to Develop an Application</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Introduction</div>
			Contexts and Dependency Injection (CDI) gives you tremendous flexibility in developing applications, reusing code, adapting your code at deployment or run-time, and unit testing. JBoss EAP 6 includes Weld, the reference implementation of CDI. These tasks show you how to use CDI in your enterprise applications.
		</div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Enable_CDI">Section 11.2.1.1, “Enable CDI”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_CDI_with_Existing_Code">Section 11.2.2.2, “Use CDI with Existing Code”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Exclude_Beans_From_the_Scanning_Process">Section 11.2.2.3, “Exclude Beans From the Scanning Process”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_an_Injection_to_Extend_an_Implementation">Section 11.2.2.4, “Use an Injection to Extend an Implementation”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_a_Qualifier_to_Resolve_an_Ambiguous_Injection">Section 11.2.3.3, “Use a Qualifier to Resolve an Ambiguous Injection”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Override_an_Injection_with_an_Alternative">Section 11.2.7.4, “Override an Injection with an Alternative”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_Named_Beans">Section 11.2.7.2, “Use Named Beans”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Manage_the_Lifecycle_of_a_Bean">Section 11.2.6.1, “Manage the Lifecycle of a Bean”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_a_Producer_Method">Section 11.2.6.2, “Use a Producer Method”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_Interceptors_with_CDI">Section 11.2.10.2, “Use Interceptors with CDI”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_Stereotypes">Section 11.2.8.2, “Use Stereotypes”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Fire_and_Observe_Events">Section 11.2.9.3, “Fire and Observe Events”</a>
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4454-591664+%5BLatest%5D&amp;comment=Title%3A+Use+CDI+to+Develop+an+Application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4454-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_CDI_with_Existing_Code">
      ⁠</a>11.2.2.2. Use CDI with Existing Code</h3></div></div></div><div class="para">
		Almost every concrete Java class that has a constructor with no parameters, or a constructor designated with the annotation @Inject, is a bean. The only thing you need to do before you can start injecting beans is create a file called <code class="filename">beans.xml</code> in the <code class="filename">META-INF/</code> or <code class="filename">WEB-INF/</code> directory of your archive. The file can be empty.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550790025696">
      ⁠</a><p class="title"><strong>Procedure 11.2. Use legacy beans in CDI applications</strong></p><ol class="1"><li class="step"><p class="title"><strong>Package your beans into an archive.</strong></p><div class="para">
				Package your beans into a JAR or WAR archive.
			</div></li><li class="step"><p class="title"><strong>Include a <code class="filename">beans.xml</code> file in your archive.</strong></p><div class="para">
				Place a <code class="filename">beans.xml</code> file into your JAR archive's <code class="filename">META-INF/</code> or your WAR archive's <code class="filename">WEB-INF/</code> directory. The file can be empty.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			You can use these beans with CDI. The container can create and destroy instances of your beans and associate them with a designated context, inject them into other beans, use them in EL expressions, specialize them with qualifier annotations, and add interceptors and decorators to them, without any modifications to your existing code. In some circumstances, you may need to add some annotations.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4452-591664+%5BLatest%5D&amp;comment=Title%3A+Use+CDI+with+Existing+Code%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4452-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Exclude_Beans_From_the_Scanning_Process">
      ⁠</a>11.2.2.3. Exclude Beans From the Scanning Process</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			One of the features of Weld, the JBoss EAP 6 implementation of CDI, is the ability to exclude classes in your archive from scanning, having container lifecycle events fired, and being deployed as beans. This is not part of the JSR-299 specification.
		</div><div class="example"><a id="idm140550743705488">
      ⁠</a><p class="title"><strong>Example 11.1. Exclude packages from your bean</strong></p><div class="example-contents"><div class="para">
			The following example has several &lt;weld:exclude&gt; tags.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
					The first one excludes all Swing classes.
				</div></li><li class="listitem"><div class="para">
					The second excludes Google Web Toolkit classes if Google Web Toolkit is not installed.
				</div></li><li class="listitem"><div class="para">
					The third excludes classes which end in the string <code class="literal">Blether</code> (using a regular expression), if the system property <span class="property"> verbosity</span> is set to <code class="literal">low</code>.
				</div></li><li class="listitem"><div class="para">
					The fourth excludes Java Server Faces (JSF) classes if Wicket classes are present and the <span class="property"> viewlayer</span> system property is not set.
				</div></li></ol></div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;beans</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xmlns:weld=</span><span xmlns="" class="perl_String">"http://jboss.org/schema/weld/beans"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xsi:schemaLocation=</span><span xmlns="" class="perl_String">"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">          http://java.sun.com/xml/ns/javaee http://docs.jboss.org/cdi/beans_1_0.xsd</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">          http://jboss.org/schema/weld/beans http://jboss.org/schema/weld/beans_1_1.xsd"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;weld:scan&gt;</span>
<span xmlns="" class="line">​</span>      
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">&lt;!-- Don't deploy the classes for the swing app! --&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;weld:exclude</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.acme.swing.**"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">&lt;!-- Don't include GWT support if GWT is not installed --&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;weld:exclude</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.acme.gwt.**"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;weld:if-class-available</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"!com.google.GWT"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/weld:exclude&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">&lt;!--</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">            Exclude classes which end in Blether if the system property verbosity is set to low</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">            i.e.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">              java ... -Dverbosity=low            </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        --&gt;</span>        
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;weld:exclude</span><span xmlns="" class="perl_Others"> pattern=</span><span xmlns="" class="perl_String">"^(.*)Blether$"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;weld:if-system-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"verbosity"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"low"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/weld:exclude&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Comment">&lt;!--</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">             Don't include JSF support if Wicket classes are present, and the viewlayer system</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">             property is not set</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        --&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;weld:exclude</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.acme.jsf.**"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;weld:if-class-available</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.wicket.Wicket"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;weld:if-system-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"!viewlayer"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/weld:exclude&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/weld:scan&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/beans&gt;</span>
</pre></div></div><div class="para">
		The formal specification of Weld-specific configuration options can be found at <a href="http://jboss.org/schema/weld/beans_1_1.xsd">http://jboss.org/schema/weld/beans_1_1.xsd</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4453-591664+%5BLatest%5D&amp;comment=Title%3A+Exclude+Beans+From+the+Scanning+Process%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4453-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_an_Injection_to_Extend_an_Implementation">
      ⁠</a>11.2.2.4. Use an Injection to Extend an Implementation</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			You can use an injection to add or change a feature of your existing code. This example shows you how to add a translation ability to an existing class. The translation is a hypothetical feature and the way it is implemented in the example is pseudo-code, and only provided for illustration.
		</div><div class="para">
		The example assumes you already have a Welcome class, which has a method <code class="code">buildPhrase</code>. The <code class="code">buildPhrase</code> method takes as an argument the name of a city, and outputs a phrase like "Welcome to Boston." Your goal is to create a version of the <code class="code">Welcome</code> class which can translate the greeting into a different language.
	</div><div class="example"><a id="idm140550802544032">
      ⁠</a><p class="title"><strong>Example 11.2. Inject a <code class="code">Translator</code> Bean Into the <code class="code">Welcome</code> Class</strong></p><div class="example-contents"><div class="para">
			The following pseudo-code injects a hypothetical <code class="code">Translator</code> object into the <code class="code">Welcome</code> class. The <code class="code">Translator</code> object may be an EJB stateless bean or another type of bean, which can translate sentences from one language to another. In this instance, the <code class="code">Translator</code> is used to translate the entire greeting, without actually modifying the original <code class="code">Welcome</code> class at all. The <code class="code">Translator</code> is injected before the <code class="code">buildPhrase</code> method is implemented.
		</div><div class="para">
			The code sample below is an example Translating Welcome class.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> TranslatingWelcome <span xmlns="" class="perl_Keyword">extends</span> Welcome {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @Inject Translator translator;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">buildPhrase</span>(String city) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> translator.<span xmlns="" class="perl_Function">translate</span>(<span xmlns="" class="perl_String">"Welcome to "</span> + city + <span xmlns="" class="perl_String">"!"</span>);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4457-591664+%5BLatest%5D&amp;comment=Title%3A+Use+an+Injection+to+Extend+an+Implementation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4457-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Ambiguous_or_Unsatisfied_Dependencies">
      ⁠</a>11.2.3. Ambiguous or Unsatisfied Dependencies</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Ambiguous_or_Unsatisfied_Dependencies">
      ⁠</a>11.2.3.1. About Ambiguous or Unsatisfied Dependencies</h3></div></div></div><div class="para">
		Ambiguous dependencies exist when the container is unable to resolve an injection to exactly one bean.
	</div><div class="para">
		Unsatisfied dependencies exist when the container is unable to resolve an injection to any bean at all.
	</div><div class="para">
		The container takes the following steps to try to resolve dependencies:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
				It resolves the qualifier annotations on all beans that implement the bean type of an injection point.
			</div></li><li class="listitem"><div class="para">
				It filters out disabled beans. Disabled beans are @Alternative beans which are not explicitly enabled.
			</div></li></ol></div><div class="para">
		In the event of an ambiguous or unsatisfied dependency, the container aborts deployment and throws an exception.
	</div><div class="para">
		To fix an ambiguous dependency, see <a class="xref" href="chap-CDI.html#Use_a_Qualifier_to_Resolve_an_Ambiguous_Injection">Section 11.2.3.3, “Use a Qualifier to Resolve an Ambiguous Injection”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4477-591661+%5BLatest%5D&amp;comment=Title%3A+About+Ambiguous+or+Unsatisfied+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4477-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Qualifiers">
      ⁠</a>11.2.3.2. About Qualifiers</h3></div></div></div><div class="para">
		A qualifier is an annotation which ties a bean to a bean type. It allows you to specify exactly which bean you mean to inject. Qualifiers have a retention and a target, which are defined as in the example below.
	</div><div class="example"><a id="idm140550814549632">
      ⁠</a><p class="title"><strong>Example 11.3. Define the <code class="code">@Synchronous</code> and <code class="code">@Asynchronous</code> Qualifiers</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Qualifier
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Retention</span>(RUNTIME)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Target</span>({TYPE, METHOD, FIELD, PARAMETER})
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">@interface</span> Synchronous {}
</pre><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Qualifier
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Retention</span>(RUNTIME)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Target</span>({TYPE, METHOD, FIELD, PARAMETER})
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">@interface</span> Asynchronous {}
</pre></div></div><div class="example"><a id="idm140550771793680">
      ⁠</a><p class="title"><strong>Example 11.4. Use the <code class="code">@Synchronous</code> and <code class="code">@Asynchronous</code> Qualifiers</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Synchronous
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> SynchronousPaymentProcessor <span xmlns="" class="perl_Keyword">implements</span> PaymentProcessor {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> process(Payment payment) { <span xmlns="" class="perl_Keyword">... </span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>}
</pre><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Asynchronous
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AsynchronousPaymentProcessor <span xmlns="" class="perl_Keyword">implements</span> PaymentProcessor {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> process(Payment payment) { <span xmlns="" class="perl_Keyword">... </span>}
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4478-591661+%5BLatest%5D&amp;comment=Title%3A+About+Qualifiers%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4478-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_a_Qualifier_to_Resolve_an_Ambiguous_Injection">
      ⁠</a>11.2.3.3. Use a Qualifier to Resolve an Ambiguous Injection</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This task shows an ambiguous injection and removes the ambiguity with a qualifier. Read more about ambiguous injections at <a class="xref" href="chap-CDI.html#About_Ambiguous_or_Unsatisfied_Dependencies">Section 11.2.3.1, “About Ambiguous or Unsatisfied Dependencies”</a>.
		</div><div class="example"><a id="idm140550807884224">
      ⁠</a><p class="title"><strong>Example 11.5. Ambiguous injection</strong></p><div class="example-contents"><div class="para">
			You have two implementations of <code class="classname">Welcome</code>, one which translates and one which does not. In that situation, the injection below is ambiguous and needs to be specified to use the translating <code class="classname">Welcome</code>.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Greeter {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">private</span> Welcome welcome;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  @Inject
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">init</span>(Welcome welcome) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">welcome</span> = welcome;
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>  ...
<span xmlns="" class="line">​</span>}
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550793358112">
      ⁠</a><p class="title"><strong>Procedure 11.3. Resolve an Ambiguous Injection with a Qualifier</strong></p><ol class="1"><li class="step"><p class="title"><strong>Create a qualifier annotation called <code class="literal">@Translating</code>.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Qualifier
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Retention</span>(RUNTIME)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Target</span>({TYPE,METHOD,FIELD,PARAMETERS})
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">@interface</span> Translating{}
</pre></li><li class="step"><p class="title"><strong>Annotate your translating <code class="classname">Welcome</code> with the <code class="literal">@Translating</code> annotation.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Translating
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> TranslatingWelcome <span xmlns="" class="perl_Keyword">extends</span> Welcome {
<span xmlns="" class="line">​</span>    @Inject Translator translator;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">buildPhrase</span>(String city) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> translator.<span xmlns="" class="perl_Function">translate</span>(<span xmlns="" class="perl_String">"Welcome to "</span> + city + <span xmlns="" class="perl_String">"!"</span>);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><p class="title"><strong>Request the translating <code class="classname">Welcome</code> in your injection.</strong></p><div class="para">
				You must request a qualified implementation explicitly, similar to the factory method pattern. The ambiguity is resolved at the injection point.
			</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Greeter {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">private</span> Welcome welcome;
<span xmlns="" class="line">​</span>  @Inject
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">init</span>(@Translating Welcome welcome) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">welcome</span> = welcome;
<span xmlns="" class="line">​</span>  } 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">welcomeVisitors</span>() {
<span xmlns="" class="line">​</span>    System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(welcome.<span xmlns="" class="perl_Function">buildPhrase</span>(<span xmlns="" class="perl_String">"San Francisco"</span>));
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The <code class="literal">Translating</code><code class="classname">Welcome</code> is used, and there is no ambiguity.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4458-591664+%5BLatest%5D&amp;comment=Title%3A+Use+a+Qualifier+to+Resolve+an+Ambiguous+Injection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4458-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managed_Beans">
      ⁠</a>11.2.4. Managed Beans</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Managed_Beans">
      ⁠</a>11.2.4.1. About Managed Beans</h3></div></div></div><div class="para">
		Prior to Java EE 6, there was no clear definition of the term <em class="firstterm">bean</em> in the Java EE platform. There were several concepts referred to as beans in the Java EE specifications, including EJB beans and JSF managed beans. Third-party frameworks such as Spring and Seam introduced their own ideas of what defined a <code class="literal">bean</code>.
	</div><div class="para">
		Java EE 6 established a common definition in the Managed Beans specification. Managed Beans are defined as container-managed objects with minimal programming restrictions, otherwise known by the acronym POJO (Plain Old Java Object). They support a small set of basic services, such as resource injection, lifecycle callbacks and interceptors. Companion specifications, such as EJB and CDI, build on this basic model.
	</div><div class="para">
		With very few exceptions, almost every concrete Java class that has a constructor with no parameters (or a constructor designated with the annotation <code class="code">@Inject</code>) is a bean. This includes every JavaBean and every EJB session bean. The only requirement to enable the mentioned services in beans is that they reside in an archive (a JAR, or a Java EE module such as a WAR or EJB JAR) that contains a special marker file: <code class="filename">META-INF/beans.xml</code>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4439-686949+%5BLatest%5D&amp;comment=Title%3A+About+Managed+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4439-686949+22+Jul+2014+00%3A52+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Types_of_Classes_That_are_Beans">
      ⁠</a>11.2.4.2. Types of Classes That are Beans</h3></div></div></div><div class="para">
		A managed bean is a Java class. The basic lifecycle and semantics of a managed bean are defined by the Managed Beans specification. You can explicitly declare a managed bean by annotating the bean class <code class="literal">@ManagedBean</code>, but in CDI you do not need to. According to the specification, the CDI container treats any class that satisfies the following conditions as a managed bean:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				It is not a non-static inner class.
			</div></li><li class="listitem"><div class="para">
				It is a concrete class, or is annotated <code class="literal">@Decorator</code>.
			</div></li><li class="listitem"><div class="para">
				It is not annotated with an EJB component-defining annotation or declared as an EJB bean class in <code class="filename">ejb-jar.xml</code>.
			</div></li><li class="listitem"><div class="para">
				It does not implement interface <code class="interfacename">javax.enterprise.inject.spi.Extension</code>.
			</div></li><li class="listitem"><div class="para">
				It has either a constructor with no parameters, or a constructor annotated with <code class="literal">@Inject</code>.
			</div></li></ul></div><div class="para">
		The unrestricted set of bean types for a managed bean contains the bean class, every superclass and all interfaces it implements directly or indirectly.
	</div><div class="para">
		If a managed bean has a public field, it must have the default scope @Dependent.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4482-591661+%5BLatest%5D&amp;comment=Title%3A+Types+of+Classes+That+are+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4482-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_CDI_to_Inject_an_Object_Into_a_Bean">
      ⁠</a>11.2.4.3. Use CDI to Inject an Object Into a Bean</h3></div></div></div><div class="para">
		When your deployment archive includes a <code class="filename">META-INF/beans.xml</code> or <code class="filename">WEB-INF/beans.xml</code> file, each object in your deployment can be injected using CDI.
	</div><div class="para">
		This procedure introduces the main ways to inject objects into other objects.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Inject an object into any part of a bean with the <code class="literal">@Inject</code> annotation.</strong></p><div class="para">
				To obtain an instance of a class, within your bean, annotate the field with <code class="literal">@Inject</code>.
			</div><div class="example"><a id="idm140550769499104">
      ⁠</a><p class="title"><strong>Example 11.6. Injecting a <code class="classname">TextTranslator</code> instance into a <code class="classname">TranslateController</code></strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> TranslateController {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   @Inject TextTranslator textTranslator;
<span xmlns="" class="line">​</span>   ...
</pre></div></div></li><li class="step"><p class="title"><strong>Use your injected object's methods</strong></p><div class="para">
				You can use your injected object's methods directly. Assume that <code class="classname">TextTranslator</code> has a method <code class="methodname">translate</code>.
			</div><div class="example"><a id="idm140550725042464">
      ⁠</a><p class="title"><strong>Example 11.7. Use your injected object's methods</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">// in TranslateController class</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">translate</span>() {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   translation = textTranslator.<span xmlns="" class="perl_Function">translate</span>(inputText); 
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>}
</pre></div></div></li><li class="step"><p class="title"><strong>Use injection in the constructor of a bean</strong></p><div class="para">
				You can inject objects into the constructor of a bean, as an alternative to using a factory or service locator to create them.
			</div><div class="example"><a id="idm140550769994272">
      ⁠</a><p class="title"><strong>Example 11.8. Using injection in the constructor of a bean</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> TextTranslator {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> SentenceParser sentenceParser;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> Translator sentenceTranslator;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   @Inject
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Function">TextTranslator</span>(SentenceParser sentenceParser, Translator sentenceTranslator) {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">sentenceParser</span> = sentenceParser;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">sentenceTranslator</span> = sentenceTranslator;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Comment">// Methods of the TextTranslator class</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>}
</pre></div></div></li><li class="step"><p class="title"><strong>Use the <code class="classname">Instance(&lt;T&gt;)</code> interface to get instances programmatically.</strong></p><div class="para">
				The <code class="classname">Instance</code> interface can return an instance of TextTranslator when parameterized with the bean type.
			</div><div class="example"><a id="idm140550741638560">
      ⁠</a><p class="title"><strong>Example 11.9. Obtaining an instance programmatically</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Inject Instance&lt;TextTranslator&gt; textTranslatorInstance;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">translate</span>() {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   textTranslatorInstance.<span xmlns="" class="perl_Function">get</span>().<span xmlns="" class="perl_Function">translate</span>(inputText);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>}
</pre></div></div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			When you inject an object into a bean all of the object's methods and properties are available to your bean. If you inject into your bean's constructor, instances of the injected objects are created when your bean's constructor is called, unless the injection refers to an instance which already exists. For instance, a new instance would not be created if you inject a session-scoped bean during the lifetime of the session.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4563-591666+%5BLatest%5D&amp;comment=Title%3A+Use+CDI+to+Inject+an+Object+Into+a+Bean%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4563-591666+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Contexts_Scopes_and_Dependencies">
      ⁠</a>11.2.5. Contexts, Scopes, and Dependencies</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Contexts_and_Scopes">
      ⁠</a>11.2.5.1. Contexts and Scopes</h3></div></div></div><div class="para">
		A context, in terms of CDI, is a storage area which holds instances of beans associated with a specific scope.
	</div><div class="para">
		A scope is the link between a bean and a context. A scope/context combination may have a specific lifecycle. Several pre-defined scopes exist, and you can create your own scopes. Examples of pre-defined scopes are <code class="literal">@RequestScoped</code>, <code class="literal">@SessionScoped</code>, and <code class="literal">@ConversationScope</code>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4440-591662+%5BLatest%5D&amp;comment=Title%3A+Contexts+and+Scopes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4440-591662+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Available_Contexts">
      ⁠</a>11.2.5.2. Available Contexts</h3></div></div></div><div class="table"><a id="idm140550732220784">
      ⁠</a><p class="title"><strong>Table 11.1. Available contexts</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Available contexts"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Context </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> @Dependent </td><td style="text-align: left"> The bean is bound to the lifecycle of the bean holding the reference. </td></tr><tr><td style="text-align: left"> @ApplicationScoped </td><td style="text-align: left"> Bound to the lifecycle of the application. </td></tr><tr><td style="text-align: left"> @RequestScoped </td><td style="text-align: left"> Bound to the lifecycle of the request. </td></tr><tr><td style="text-align: left"> @SessionScoped </td><td style="text-align: left"> Bound to the lifecycle of the session. </td></tr><tr><td style="text-align: left"> @ConversationScoped </td><td style="text-align: left"> Bound to the lifecycle of the conversation. The conversation scope is between the lengths of the request and the session, and is controlled by the application. </td></tr><tr><td style="text-align: left"> Custom scopes </td><td style="text-align: left"> If the above contexts do not meet your needs, you can define custom scopes. </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4484-591661+%5BLatest%5D&amp;comment=Title%3A+Available+Contexts%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4484-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Bean_Lifecycle">
      ⁠</a>11.2.6. Bean Lifecycle</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Manage_the_Lifecycle_of_a_Bean">
      ⁠</a>11.2.6.1. Manage the Lifecycle of a Bean</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This task shows you how to save a bean for the life of a request. Several other scopes exist, and you can define your own scopes.
		</div><div class="para">
		The default scope for an injected bean is <code class="literal">@Dependent</code>. This means that the bean's lifecycle is dependent upon the lifecycle of the bean which holds the reference. For more information, see <a class="xref" href="chap-CDI.html#Contexts_and_Scopes">Section 11.2.5.1, “Contexts and Scopes”</a>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550782203584">
      ⁠</a><p class="title"><strong>Procedure 11.4. Manage Bean Lifecycles</strong></p><ol class="1"><li class="step"><p class="title"><strong>Annotate the bean with the scope corresponding to your desired scope.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@RequestScoped
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Named</span>(<span xmlns="" class="perl_String">"greeter"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> GreeterBean {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">private</span> Welcome welcome;
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">private</span> String city; <span xmlns="" class="perl_Comment">// getter &amp; setter not shown</span>
<span xmlns="" class="line">​</span>  @Inject   <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">init</span>(Welcome welcome) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">welcome</span> = welcome;
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">welcomeVisitors</span>() {
<span xmlns="" class="line">​</span>    System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(welcome.<span xmlns="" class="perl_Function">buildPhrase</span>(city));
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><p class="title"><strong>When your bean is used in the JSF view, it holds state.</strong></p><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{greeter.city}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:commandButton</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"Welcome visitors"</span><span xmlns="" class="perl_Others"> action=</span><span xmlns="" class="perl_String">"#{greeter.welcomeVisitors}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			Your bean is saved in the context relating to the scope that you specify, and lasts as long as the scope applies.
		</div><div class="para">
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#About_Bean_Proxies">Section 11.2.13.1, “About Bean Proxies”</a>
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="chap-CDI.html#Use_a_Proxy_in_an_Injection">Section 11.2.13.2, “Use a Proxy in an Injection”</a>
				</div></li></ul></div>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4462-591664+%5BLatest%5D&amp;comment=Title%3A+Manage+the+Lifecycle+of+a+Bean%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4462-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_a_Producer_Method">
      ⁠</a>11.2.6.2. Use a Producer Method</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This task shows how to use producer methods to produce a variety of different objects which are not beans for injection.
		</div><div class="example"><a id="idm140550782419536">
      ⁠</a><p class="title"><strong>Example 11.10. Use a producer method instead of an alternative, to allow polymorphism after deployment</strong></p><div class="example-contents"><div class="para">
			The <code class="code">@Preferred</code> annotation in the example is a qualifier annotation. For more information about qualifiers, refer to: <a class="xref" href="chap-CDI.html#About_Qualifiers">Section 11.2.3.2, “About Qualifiers”</a>.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@SessionScoped
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Preferences <span xmlns="" class="perl_Keyword">implements</span> Serializable {
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> PaymentStrategyType paymentStrategy;
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>   @Produces @Preferred 
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> PaymentStrategy <span xmlns="" class="perl_Function">getPaymentStrategy</span>() {
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">switch</span> (paymentStrategy) {
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">case</span> CREDIT_CARD: <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">CreditCardPaymentStrategy</span>();
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">case</span> CHECK: <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">CheckPaymentStrategy</span>();
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">default</span>: <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">null</span>;
<span xmlns="" class="line">​</span>       } 
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
			The following injection point has the same type and qualifier annotations as the producer method, so it resolves to the producer method using the usual CDI injection rules. The producer method is called by the container to obtain an instance to service this injection point.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Inject @Preferred PaymentStrategy paymentStrategy;
</pre></div></div><div class="example"><a id="idm140550800233824">
      ⁠</a><p class="title"><strong>Example 11.11. Assign a scope to a producer method</strong></p><div class="example-contents"><div class="para">
			The default scope of a producer method is <code class="code">@Dependent</code>. If you assign a scope to a bean, it is bound to the appropriate context. The producer method in this example is only called once per session.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Produces @Preferred @SessionScoped
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> PaymentStrategy <span xmlns="" class="perl_Function">getPaymentStrategy</span>() {
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="example"><a id="idm140550812212672">
      ⁠</a><p class="title"><strong>Example 11.12. Use an injection inside a producer method</strong></p><div class="example-contents"><div class="para">
			Objects instantiated directly by an application cannot take advantage of dependency injection and do not have interceptors. However, you can use dependency injection into the producer method to obtain bean instances.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Produces @Preferred @SessionScoped
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> PaymentStrategy <span xmlns="" class="perl_Function">getPaymentStrategy</span>(CreditCardPaymentStrategy ccps,
<span xmlns="" class="line">​</span>                                          CheckPaymentStrategy cps ) {
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">switch</span> (paymentStrategy) {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">case</span> CREDIT_CARD: <span xmlns="" class="perl_Keyword">return</span> ccps;
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">case</span> CHEQUE: <span xmlns="" class="perl_Keyword">return</span> cps;
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">default</span>: <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">null</span>;
<span xmlns="" class="line">​</span>   } 
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
</pre><div class="para">
			If you inject a request-scoped bean into a session-scoped producer, the producer method promotes the current request-scoped instance into session scope. This is almost certainly not the desired behavior, so use caution when you use a producer method in this way.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			The scope of the producer method is not inherited from the bean that declares the producer method.
		</div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Producer methods allow you to inject non-bean objects and change your code dynamically.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4463-591664+%5BLatest%5D&amp;comment=Title%3A+Use+a+Producer+Method%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4463-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Named_Beans_and_Alternative_Beans">
      ⁠</a>11.2.7. Named Beans and Alternative Beans</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Named_Beans">
      ⁠</a>11.2.7.1. About Named Beans</h3></div></div></div><div class="para">
		A bean is named by using the <code class="literal">@Named</code> annotation. Naming a bean allows you to use it directly in Java Server Faces (JSF).
	</div><div class="para">
		The <code class="literal">@Named</code> annotation takes an optional parameter, which is the bean name. If this parameter is omitted, the lower-cased bean name is used as the name.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4480-591661+%5BLatest%5D&amp;comment=Title%3A+About+Named+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4480-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_Named_Beans">
      ⁠</a>11.2.7.2. Use Named Beans</h3></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Use the <code class="literal">@Named</code> annotation to assign a name to a bean.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Named</span>(<span xmlns="" class="perl_String">"greeter"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> GreeterBean {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">private</span> Welcome welcome;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  @Inject
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">init</span> (Welcome welcome) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">welcome</span> = welcome;
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">welcomeVisitors</span>() {
<span xmlns="" class="line">​</span>    System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(welcome.<span xmlns="" class="perl_Function">buildPhrase</span>(<span xmlns="" class="perl_String">"San Francisco"</span>));
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
				The bean name itself is optional. If it is omitted, the bean is named after the class name, with the first letter decapitalized. In the example above, the default name would be <code class="literal">greeterBean</code>.
			</div></li><li class="step"><p class="title"><strong>Use the named bean in a JSF view.</strong></p><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:commandButton</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"Welcome visitors"</span><span xmlns="" class="perl_Others"> action=</span><span xmlns="" class="perl_String">"#{greeter.welcomeVisitors}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			Your named bean is assigned as an action to the control in your JSF view, with a minimum of coding.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4461-591664+%5BLatest%5D&amp;comment=Title%3A+Use+Named+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4461-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Alternative_Beans">
      ⁠</a>11.2.7.3. About Alternative Beans</h3></div></div></div><div class="para">
		Alternatives are beans whose implementation is specific to a particular client module or deployment scenario.
	</div><div class="example"><a id="idm140550778090288">
      ⁠</a><p class="title"><strong>Example 11.13. Defining Alternatives</strong></p><div class="example-contents"><div class="para">
			This alternative defines a mock implementation of both @Synchronous PaymentProcessor and @Asynchronous PaymentProcessor, all in one:
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>@Alternative @Synchronous @Asynchronous
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> MockPaymentProcessor <span xmlns="" class="perl_Keyword">implements</span> PaymentProcessor {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> process(Payment payment) { <span xmlns="" class="perl_Keyword">... </span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para">
		By default, @Alternative beans are disabled. They are enabled for a specific bean archive by editing its <code class="filename">beans.xml</code> file.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4479-591661+%5BLatest%5D&amp;comment=Title%3A+About+Alternative+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4479-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Override_an_Injection_with_an_Alternative">
      ⁠</a>11.2.7.4. Override an Injection with an Alternative</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Alternative beans let you override existing beans. They can be thought of as a way to plug in a class which fills the same role, but functions differently. They are disabled by default. This task shows you how to specify and enable an alternative.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550777306032">
      ⁠</a><p class="title"><strong>Procedure 11.5. Override an Injection</strong></p><div class="para">
			This task assumes that you already have a <code class="classname">TranslatingWelcome</code> class in your project, but you want to override it with a "mock" TranslatingWelcome class. This would be the case for a test deployment, where the true Translator bean cannot be used.
		</div><ol class="1"><li class="step"><p class="title"><strong>Define the alternative.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Alternative
<span xmlns="" class="line">​</span>@Translating 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> MockTranslatingWelcome <span xmlns="" class="perl_Keyword">extends</span> Welcome {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">buildPhrase</span>(string city) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Bienvenue Ã  "</span> + city + <span xmlns="" class="perl_String">"!"</span>);
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><p class="title"><strong>Substitute the alternative.</strong></p><div class="para">
				To activate the substitute implementation, add the fully-qualified class name to your <code class="filename">META-INF/beans.xml</code> or <code class="filename">WEB-INF/beans.xml</code> file.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;beans&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;alternatives&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;class&gt;</span>com.acme.MockTranslatingWelcome<span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/alternatives&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/beans&gt;</span></pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The alternative implementation is now used instead of the original one.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4460-591664+%5BLatest%5D&amp;comment=Title%3A+Override+an+Injection+with+an+Alternative%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4460-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Stereotypes">
      ⁠</a>11.2.8. Stereotypes</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Stereotypes">
      ⁠</a>11.2.8.1. About Stereotypes</h3></div></div></div><div class="para">
		In many systems, use of architectural patterns produces a set of recurring bean roles. A stereotype allows you to identify such a role and declare some common metadata for beans with that role in a central place.
	</div><div class="para">
		A stereotype encapsulates any combination of:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				default scope
			</div></li><li class="listitem"><div class="para">
				a set of interceptor bindings
			</div></li></ul></div><div class="para">
		A stereotype may also specify either of these two scenarios:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				all beans with the stereotype have defaulted bean EL names
			</div></li><li class="listitem"><div class="para">
				all beans with the stereotype are alternatives
			</div></li></ul></div><div class="para">
		A bean may declare zero, one or multiple stereotypes. Stereotype annotations may be applied to a bean class or producer method or field.
	</div><div class="para">
		A stereotype is an annotation, annotated @Stereotype, that packages several other annotations.
	</div><div class="para">
		A class that inherits a scope from a stereotype may override that stereotype and specify a scope directly on the bean.
	</div><div class="para">
		In addition, if a stereotype has a <code class="literal">@Named</code> annotation, any bean it is placed on has a default bean name. The bean may override this name if the @Named annotation is specified directly on the bean. For more information about named beans, see <a class="xref" href="chap-CDI.html#About_Named_Beans">Section 11.2.7.1, “About Named Beans”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4481-591661+%5BLatest%5D&amp;comment=Title%3A+About+Stereotypes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4481-591661+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_Stereotypes">
      ⁠</a>11.2.8.2. Use Stereotypes</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Without stereotypes, annotations can become cluttered. This task shows you how to use stereotypes to reduce the clutter and streamline your code. For more information about what stereotypes are, see <a class="xref" href="chap-CDI.html#About_Stereotypes">Section 11.2.8.1, “About Stereotypes”</a>.
		</div><div class="example"><a id="idm140550807883712">
      ⁠</a><p class="title"><strong>Example 11.14. Annotation clutter</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Secure
<span xmlns="" class="line">​</span>@Transactional
<span xmlns="" class="line">​</span>@RequestScoped
<span xmlns="" class="line">​</span>@Named
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountManager {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">transfer</span>(Account a, Account b) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550802575152">
      ⁠</a><p class="title"><strong>Procedure 11.6. Define and Use Stereotypes</strong></p><ol class="1"><li class="step"><p class="title"><strong>Define the stereotype,</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Secure
<span xmlns="" class="line">​</span>@Transactional
<span xmlns="" class="line">​</span>@RequestScoped
<span xmlns="" class="line">​</span>@Named
<span xmlns="" class="line">​</span>@Stereotype
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Retention</span>(RUNTIME)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Target</span>(TYPE)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">@interface</span> BusinessComponent {
<span xmlns="" class="line">​</span> ...
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><p class="title"><strong>Use the stereotype.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@BusinessComponent
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountManager {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">transfer</span>(Account a, Account b) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			Stereotypes streamline and simplify your code.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4465-591664+%5BLatest%5D&amp;comment=Title%3A+Use+Stereotypes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4465-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Observer_Methods">
      ⁠</a>11.2.9. Observer Methods</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Observer_Methods">
      ⁠</a>11.2.9.1. About Observer Methods</h3></div></div></div><div class="para">
		<em class="firstterm">Observer methods</em> receive notifications when events occur.
	</div><div class="para">
		CDI also provides <em class="firstterm">transactional observer methods</em>, which receive event notifications during the <em class="firstterm">before completion</em> or <em class="firstterm">after completion</em> phase of the transaction in which the event was fired.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4441-732457+%5BLatest%5D&amp;comment=Title%3A+About+Observer+Methods%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4441-732457+12+Dec+2014+01%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Transactional_Observers">
      ⁠</a>11.2.9.2. Transactional Observers</h3></div></div></div><div class="para">
		Transactional observers receive the event notifications before or after the completion phase of the transaction in which the event was raised. For example, the following observer method refreshes a query result set cached in the application context, but only when transactions that update the Category tree are successful:
	</div><div class="para">
		
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">refreshCategoryTree</span>(@<span xmlns="" class="perl_Function">Observes</span>(during = AFTER_SUCCESS) CategoryUpdateEvent event) { <span xmlns="" class="perl_Keyword">... </span>}
</pre>

	</div><div class="para">
		There are five kinds of transactional observers: 
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					IN_PROGRESS: By default, observers are invoked immediately.
				</div></li><li class="listitem"><div class="para">
					AFTER_SUCCESS: Observers are invoked after the completion phase of the transaction, but only if the transaction completes successfully.
				</div></li><li class="listitem"><div class="para">
					AFTER_FAILURE: Observers are invoked after the completion phase of the transaction only if the transaction fails to complete successfully.
				</div></li><li class="listitem"><div class="para">
					AFTER_COMPLETION: Observers are invoked after the completion phase of the transaction.
				</div></li><li class="listitem"><div class="para">
					BEFORE_COMPLETION: Observers are invoked before the completion phase of the transaction.
				</div></li></ul></div>

	</div><div class="para">
		Transactional observers are important in a stateful object model because state is often held for longer than a single atomic transaction.
	</div><div class="para">
		Assume we have cached a JPA query result set in the application scope:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.ejb.Singleton;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.enterprise.inject.Produces;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@ApplicationScoped @Singleton
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Catalog {
<span xmlns="" class="line">​</span>   @PersistenceContext EntityManager em;
<span xmlns="" class="line">​</span>   List&lt;Product&gt; products;
<span xmlns="" class="line">​</span>   @Produces @Catalog
<span xmlns="" class="line">​</span>   List&lt;Product&gt; <span xmlns="" class="perl_Function">getCatalog</span>() {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">if</span> (products==<span xmlns="" class="perl_Keyword">null</span>) {
<span xmlns="" class="line">​</span>         products = em.<span xmlns="" class="perl_Function">createQuery</span>(<span xmlns="" class="perl_String">"select p from Product p where p.deleted = false"</span>)
<span xmlns="" class="line">​</span>            .<span xmlns="" class="perl_Function">getResultList</span>();
<span xmlns="" class="line">​</span>      }
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> products;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		Occasionally a Product is created or deleted. When this occurs, we need to refresh the Product catalog. But we have to wait for the transaction to complete successfully before performing this refresh.
	</div><div class="para">
		The bean that creates and deletes Products triggers events, for example:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.enterprise.event.Event;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Stateless
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ProductManager {
<span xmlns="" class="line">​</span>   @PersistenceContext EntityManager em;
<span xmlns="" class="line">​</span>   @Inject @Any Event&lt;Product&gt; productEvent;
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">delete</span>(Product product) {
<span xmlns="" class="line">​</span>      em.<span xmlns="" class="perl_Function">delete</span>(product);
<span xmlns="" class="line">​</span>      productEvent.<span xmlns="" class="perl_Function">select</span>(<span xmlns="" class="perl_Keyword">new</span> AnnotationLiteral&lt;Deleted&gt;(){}).<span xmlns="" class="perl_Function">fire</span>(product);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">persist</span>(Product product) {
<span xmlns="" class="line">​</span>      em.<span xmlns="" class="perl_Function">persist</span>(product);
<span xmlns="" class="line">​</span>      productEvent.<span xmlns="" class="perl_Function">select</span>(<span xmlns="" class="perl_Keyword">new</span> AnnotationLiteral&lt;Created&gt;(){}).<span xmlns="" class="perl_Function">fire</span>(product);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		The Catalog can now observe the events after successful completion of the transaction:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.ejb.Singleton;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@ApplicationScoped @Singleton
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Catalog {
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">addProduct</span>(@<span xmlns="" class="perl_Function">Observes</span>(during = AFTER_SUCCESS) @Created Product product) {
<span xmlns="" class="line">​</span>      products.<span xmlns="" class="perl_Function">add</span>(product);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">removeProduct</span>(@<span xmlns="" class="perl_Function">Observes</span>(during = AFTER_SUCCESS) @Deleted Product product) {
<span xmlns="" class="line">​</span>      products.<span xmlns="" class="perl_Function">remove</span>(product);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>}
</pre><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+42340-735532+%5BLatest%5D&amp;comment=Title%3A+Transactional+Observers%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=42340-735532+13+Jan+2015+05%3A14+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Fire_and_Observe_Events">
      ⁠</a>11.2.9.3. Fire and Observe Events</h3></div></div></div><div class="example"><a id="idm140550791183440">
      ⁠</a><p class="title"><strong>Example 11.15. Fire an event</strong></p><div class="example-contents"><div class="para">
			This code shows an event being injected and used in a method.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountManager {
<span xmlns="" class="line">​</span>  @Inject Event&lt;Withdrawal&gt; event;
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">transfer</span>(Account a, Account b) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    event.<span xmlns="" class="perl_Function">fire</span>(<span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">Withdrawal</span>(a));
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="example"><a id="idm140550793141360">
      ⁠</a><p class="title"><strong>Example 11.16. Fire an event with a qualifier</strong></p><div class="example-contents"><div class="para">
			You can annotate your event injection with a qualifier, to make it more specific. For more information about qualifiers, see <a class="xref" href="chap-CDI.html#About_Qualifiers">Section 11.2.3.2, “About Qualifiers”</a>.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountManager {
<span xmlns="" class="line">​</span>  @Inject @Suspicious Event &lt;Withdrawal&gt; event;
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">transfer</span>(Account a, Account b) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    event.<span xmlns="" class="perl_Function">fire</span>(<span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">Withdrawal</span>(a));
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="example"><a id="idm140550730369936">
      ⁠</a><p class="title"><strong>Example 11.17. Observe an event</strong></p><div class="example-contents"><div class="para">
			To observe an event, use the <code class="literal">@Observes</code> annotation.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountObserver {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">checkTran</span>(@Observes Withdrawal w) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="example"><a id="idm140550718309296">
      ⁠</a><p class="title"><strong>Example 11.18. Observe a qualified event</strong></p><div class="example-contents"><div class="para">
			You can use qualifiers to observe only specific types of events. For more information about qualifiers, see <a class="xref" href="chap-CDI.html#About_Qualifiers">Section 11.2.3.2, “About Qualifiers”</a>.
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountObserver {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">checkTran</span>(@Observes @Suspicious Withdrawal w) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4466-591664+%5BLatest%5D&amp;comment=Title%3A+Fire+and+Observe+Events%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4466-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Interceptors">
      ⁠</a>11.2.10. Interceptors</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Interceptors">
      ⁠</a>11.2.10.1. About Interceptors</h3></div></div></div><div class="para">
		Interceptors are defined as part of the Enterprise JavaBeans specification, which can be found at <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/">http://jcp.org/aboutJava/communityprocess/final/jsr318/</a>. Interceptors allow you to add functionality to the business methods of a bean without modifying the bean's method directly. The interceptor is executed before any of the business methods of the bean.
	</div><div class="para">
		CDI enhances this functionality by allowing you to use annotations to bind interceptors to beans.
	</div><div class="variablelist"><p class="title"><strong>Interception points</strong></p><dl class="variablelist"><dt><span class="term">business method interception</span></dt><dd><div class="para">
					A business method interceptor applies to invocations of methods of the bean by clients of the bean.
				</div></dd><dt><span class="term">lifecycle callback interception</span></dt><dd><div class="para">
					A lifecycle callback interceptor applies to invocations of lifecycle callbacks by the container.
				</div></dd><dt><span class="term">timeout method interception</span></dt><dd><div class="para">
					A timeout method interceptor applies to invocations of the EJB timeout methods by the container.
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4442-591662+%5BLatest%5D&amp;comment=Title%3A+About+Interceptors%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4442-591662+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_Interceptors_with_CDI">
      ⁠</a>11.2.10.2. Use Interceptors with CDI</h3></div></div></div><div class="example"><a id="idm140550729100032">
      ⁠</a><p class="title"><strong>Example 11.19. Interceptors without CDI</strong></p><div class="example-contents"><div class="para">
			Without CDI, interceptors have two problems.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					The bean must specify the interceptor implementation directly.
				</div></li><li class="listitem"><div class="para">
					Every bean in the application must specify the full set of interceptors in the correct order. This makes adding or removing interceptors on an application-wide basis time-consuming and error-prone.
				</div></li></ul></div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Interceptors</span>({
<span xmlns="" class="line">​</span>  SecurityInterceptor.<span xmlns="" class="perl_Function">class</span>,
<span xmlns="" class="line">​</span>  TransactionInterceptor.<span xmlns="" class="perl_Function">class</span>,
<span xmlns="" class="line">​</span>  LoggingInterceptor.<span xmlns="" class="perl_Function">class</span>
<span xmlns="" class="line">​</span>})
<span xmlns="" class="line">​</span>@Stateful <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> BusinessComponent {
<span xmlns="" class="line">​</span>  ...
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550719464416">
      ⁠</a><p class="title"><strong>Procedure 11.7. Use interceptors with CDI</strong></p><ol class="1"><li class="step"><p class="title"><strong>Define the interceptor binding type.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@InterceptorBinding
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Retention</span>(RUNTIME)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Target</span>({TYPE, METHOD})
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">@interface</span> Secure {}
</pre></li><li class="step"><p class="title"><strong>Mark the interceptor implementation.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Secure
<span xmlns="" class="line">​</span>@Interceptor
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> SecurityInterceptor {
<span xmlns="" class="line">​</span>  @AroundInvoke
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> Object <span xmlns="" class="perl_Function">aroundInvoke</span>(InvocationContext ctx) <span xmlns="" class="perl_Keyword">throws</span> Exception {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// enforce security ...</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">return</span> ctx.<span xmlns="" class="perl_Function">proceed</span>();
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><p class="title"><strong>Use the interceptor in your business code.</strong></p><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Secure
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AccountManager {
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">transfer</span>(Account a, Account b) {
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><p class="title"><strong>Enable the interceptor in your deployment, by adding it to <code class="filename">META-INF/beans.xml</code> or <code class="filename">WEB-INF/beans.xml</code>.</strong></p><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;beans&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;interceptors&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;class&gt;</span>com.acme.SecurityInterceptor<span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;class&gt;</span>com.acme.TransactionInterceptor<span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/interceptors&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/beans&gt;</span></pre><div class="para">
				The interceptors are applied in the order listed.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			CDI simplifies your interceptor code and makes it easier to apply to your business code.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4464-591664+%5BLatest%5D&amp;comment=Title%3A+Use+Interceptors+with+CDI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4464-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Decorators">
      ⁠</a>11.2.11. About Decorators</h2></div></div></div><div class="para">
		A decorator intercepts invocations from a specific Java interface, and is aware of all the semantics attached to that interface. Decorators are useful for modeling some kinds of business concerns, but do not have the generality of interceptors. They are a bean, or even an abstract class, that implements the type it decorates, and are annotated with <code class="code">@Decorator</code>. To invoke a decorator in a CDI application, it must be specified in the <code class="filename">beans.xml</code> file.
	</div><div class="example"><a id="idm140550723491824">
      ⁠</a><p class="title"><strong>Example 11.20. Example Decorator</strong></p><div class="example-contents"><pre class="programlisting">
@Decorator

public abstract class LargeTransactionDecorator

      implements Account {

   @Inject @Delegate @Any Account account;

   @PersistenceContext EntityManager em;

   public void withdraw(BigDecimal amount) {

      ...

   }
    
   public void deposit(BigDecimal amount);

      ...

   }

}
</pre></div></div><div class="para">
		A decorator must have exactly one <code class="code">@Delegate</code> injection point to obtain a reference to the decorated object.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4443-741456+%5BLatest%5D&amp;comment=Title%3A+About+Decorators%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4443-741456+05+Feb+2015+05%3A26+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_Portable_Extensions">
      ⁠</a>11.2.12. About Portable Extensions</h2></div></div></div><div class="para">
		CDI is intended to be a foundation for frameworks, extensions and integration with other technologies. Therefore, CDI exposes a set of SPIs for the use of developers of portable extensions to CDI. Extensions can provide the following types of functionality:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				integration with Business Process Management engines
			</div></li><li class="listitem"><div class="para">
				integration with third-party frameworks such as Spring, Seam, GWT or Wicket
			</div></li><li class="listitem"><div class="para">
				new technology based upon the CDI programming model
			</div></li></ul></div><div class="para">
		According to the JSR-299 specification, a portable extension may integrate with the container in the following ways:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Providing its own beans, interceptors and decorators to the container
			</div></li><li class="listitem"><div class="para">
				Injecting dependencies into its own objects using the dependency injection service
			</div></li><li class="listitem"><div class="para">
				Providing a context implementation for a custom scope
			</div></li><li class="listitem"><div class="para">
				Augmenting or overriding the annotation-based metadata with metadata from some other source
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4444-591664+%5BLatest%5D&amp;comment=Title%3A+About+Portable+Extensions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4444-591664+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Bean_Proxies">
      ⁠</a>11.2.13. Bean Proxies</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Bean_Proxies">
      ⁠</a>11.2.13.1. About Bean Proxies</h3></div></div></div><div class="para">
		Clients of an injected bean do not usually hold a direct reference to a bean instance. Unless the bean is a dependent object (scope @Dependent), the container must redirect all injected references to the bean using a proxy object.
	</div><div class="para">
		This bean proxy referred to as client proxy is responsible for ensuring the bean instance that receives a method invocation is the instance associated with the current context. The client proxy also allows beans bound to contexts such as the session context to be serialized to disk without recursively serializing other injected beans.
	</div><div class="para">
		Due to Java limitations, some Java types cannot be proxied by the container. If an injection point declared with one of these types resolves to a bean with any scope other than @Dependent, the container aborts the deployment.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Java types that cannot be proxied by the container</strong></p><ul><li class="listitem"><div class="para">
				Classes which do not have a non-private constructor with no parameters
			</div></li><li class="listitem"><div class="para">
				Classes which are declared <code class="code">final</code> or have a <code class="code">final</code> method
			</div></li><li class="listitem"><div class="para">
				Arrays and primitive types
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4584-769928+%5BLatest%5D&amp;comment=Title%3A+About+Bean+Proxies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4584-769928+07+Sep+2015+01%3A37+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Use_a_Proxy_in_an_Injection">
      ⁠</a>11.2.13.2. Use a Proxy in an Injection</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Overview</div>
			A proxy is used for injection when the lifecycles of the beans are different from each other. The proxy is a subclass of the bean that is created at run-time, and overrides all the non-private methods of the bean class. The proxy forwards the invocation onto the actual bean instance.
		</div><div class="para">
		In this example, the <code class="code">PaymentProcessor</code> instance is not injected directly into <code class="code">Shop</code>. Instead, a proxy is injected, and when the <code class="code">processPayment()</code> method is called, the proxy looks up the current <code class="code">PaymentProcessor</code> bean instance and calls the <code class="code">processPayment()</code> method on it.
	</div><div class="example"><a id="idm140550771381696">
      ⁠</a><p class="title"><strong>Example 11.21. Proxy Injection</strong></p><div class="example-contents"><pre class="programlisting Java"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@ConversationScoped
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">class</span> PaymentProcessor
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">processPayment</span>(<span xmlns="" class="perl_DataType">int</span> amount)
<span xmlns="" class="line">​</span>  {
<span xmlns="" class="line">​</span>    System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"I'm taking $"</span> + amount);
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@ApplicationScoped
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Shop
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>  @Inject
<span xmlns="" class="line">​</span>  PaymentProcessor paymentProcessor; 
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">buyStuff</span>()
<span xmlns="" class="line">​</span>  {
<span xmlns="" class="line">​</span>    paymentProcessor.<span xmlns="" class="perl_Function">processPayment</span>(<span xmlns="" class="perl_Float">100</span>);
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para">
		Fore more information about proxies, including which types of classes can be proxied, refer to <a class="xref" href="chap-CDI.html#About_Bean_Proxies">Section 11.2.13.1, “About Bean Proxies”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4585-591669+%5BLatest%5D&amp;comment=Title%3A+Use+a+Proxy+in+an+Injection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4585-591669+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></div></body></html>