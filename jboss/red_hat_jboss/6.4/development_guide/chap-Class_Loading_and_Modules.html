<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Class Loading and Modules</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Class_Loading_and_Modules">
      ⁠</a>Chapter 3. Class Loading and Modules</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Introduction2">
      ⁠</a>3.1. Introduction</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Overview_of_Class_Loading_and_Modules">
      ⁠</a>3.1.1. Overview of Class Loading and Modules</h2></div></div></div><div class="para">
		JBoss EAP 6 uses a new modular class loading system for controlling the class paths of deployed applications. This system provides more flexibility and control than the traditional system of hierarchical class loaders. Developers have fine-grained control of the classes available to their applications, and can configure a deployment to ignore classes provided by the application server in favor of their own.
	</div><div class="para">
		The modular class loader separates all Java classes into logical groups called modules. Each module can define dependencies on other modules in order to have the classes from that module added to its own class path. Because each deployed JAR and WAR file is treated as a module, developers can control the contents of their application's class path by adding module configuration to their application.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4352-593309+%5BLatest%5D&amp;comment=Title%3A+Overview+of+Class+Loading+and+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4352-593309+24+Feb+2014+07%3A38+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Class_Loading">
      ⁠</a>3.1.2. Class Loading</h2></div></div></div><div class="para">
		Class Loading is the mechanism by which Java classes and resources are loaded into the Java Runtime Environment.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4549-591667+%5BLatest%5D&amp;comment=Title%3A+Class+Loading%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4549-591667+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Modules1">
      ⁠</a>3.1.3. Modules</h2></div></div></div><div class="para">
		A Module is a logical grouping of classes used for class loading and dependency management. JBoss EAP 6 identifies two different types of modules, sometimes called static and dynamic modules. However the only difference between the two is how they are packaged.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Static Modules</span></dt><dd><div class="para">
					Static Modules are predefined in the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules/</code> directory of the application server. Each sub-directory represents one module and defines a <code class="filename">main/</code> subdirectory that contains a configuration file (<code class="filename">module.xml</code>) and any required JAR files. The name of the module is defined in the <code class="filename">module.xml</code> file. All the application server provided APIs are provided as static modules, including the Java EE APIs as well as other APIs such as JBoss Logging.
				</div><div class="example"><a id="idm140550726958128">
      ⁠</a><p class="title"><strong>Example 3.1. Example module.xml file</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:module:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.mysql"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;resources&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;resource-root</span><span xmlns="" class="perl_Others"> path=</span><span xmlns="" class="perl_String">"mysql-connector-java-5.1.15.jar"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/resources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"javax.transaction.api"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/module&gt;</span>
</pre><div class="para">
						The module name, <code class="code">com.mysql</code>, should match the directory structure for the module, excluding the <code class="filename">main/</code> subdirectory name.
					</div></div></div><div class="para">
					The modules provided in JBoss EAP distributions are located in a <code class="filename">system</code> directory within the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules</code> directory. This keeps them separate from any modules provided by third parties.
				</div><div class="para">
					Any Red Hat provided layered products that layer on top of JBoss EAP 6.1 or later will also install their modules within the <code class="filename">system</code> directory.
				</div><div class="para">
					Creating custom static modules can be useful if many applications are deployed on the same server that use the same third-party libraries. Instead of bundling those libraries with each application, a module containing these libraries can be created and installed by the JBoss administrator. The applications can then declare an explicit dependency on the custom static modules.
				</div><div class="para">
					Users must ensure that custom modules are installed into the <code class="filename"><em class="replaceable">EAP_HOME</em>/modules</code> directory, using a one directory per module layout. This ensures that custom versions of modules that already exist in the <code class="filename">system</code> directory are loaded instead of the shipped versions. In this way, user provided modules will take precedence over system modules.
				</div><div class="para">
					If you use the <code class="varname">JBOSS_MODULEPATH</code> environment variable to change the locations in which JBoss EAP searches for modules, then the product will look for a <code class="filename">system</code> subdirectory structure within one of the locations specified. A <code class="filename">system</code> structure must exist somewhere in the locations specified with <code class="varname">JBOSS_MODULEPATH</code>.
				</div></dd><dt><span class="term">Dynamic Modules</span></dt><dd><div class="para">
					Dynamic Modules are created and loaded by the application server for each JAR or WAR deployment (or subdeployment in an EAR). The name of a dynamic module is derived from the name of the deployed archive. Because deployments are loaded as modules, they can configure dependencies and be used as dependencies by other deployments.
				</div></dd></dl></div><div class="para">
		Modules are only loaded when required. This usually only occurs when an application is deployed that has explicit or implicit dependencies.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4360-766898+%5BLatest%5D&amp;comment=Title%3A+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4360-766898+05+Aug+2015+14%3A20+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Module_Dependencies">
      ⁠</a>3.1.4. Module Dependencies</h2></div></div></div><div class="para">
		A module dependency is a declaration that one module requires the classes of another module in order to function. Modules can declare dependencies on any number of other modules. When the application server loads a module, the modular class loader parses the dependencies of that module and adds the classes from each dependency to its class path. If a specified dependency cannot be found, the module will fail to load.
	</div><div class="para">
		Deployed applications (JAR and WAR) are loaded as dynamic modules and make use of dependencies to access the APIs provided by JBoss EAP 6.
	</div><div class="para">
		There are two types of dependencies: explicit and implicit.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Explicit Dependencies</div>
			Explicit dependencies are declared by the developer in the configuration file. Static modules can declare dependencies in the <code class="filename">module.xml</code> file. Dynamic modules can have dependencies declared in the <code class="filename">MANIFEST.MF</code> or <code class="filename">jboss-deployment-structure.xml</code> deployment descriptors of the deployment.
		</div><div class="para">
		Explicit dependencies can be specified as optional. Failure to load an optional dependency will not cause a module to fail to load. However if the dependency becomes available later it will NOT be added to the module's class path. Dependencies must be available when the module is loaded.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Implicit Dependencies</div>
			Implicit dependencies are added automatically by the application server when certain conditions or meta-data are found in a deployment. The Java EE 6 APIs supplied with JBoss EAP 6 are examples of modules that are added by detection of implicit dependencies in deployments.
		</div><div class="para">
		Deployments can also be configured to exclude specific implicit dependencies. This is done with the <code class="filename">jboss-deployment-structure.xml</code> deployment descriptor file. This is commonly done when an application bundles a specific version of a library that the application server will attempt to add as an implicit dependency.
	</div><div class="para">
		A module's class path contains only its own classes and that of its immediate dependencies. A module is not able to access the classes of the dependencies of one of its dependencies. However a module can specify that an explicit dependency is exported. An exported dependency is provided to any module that depends on the module that exports it.
	</div><div class="example"><a id="idm140550719651152">
      ⁠</a><p class="title"><strong>Example 3.2. Module dependencies</strong></p><div class="example-contents"><div class="para">
			Module A depends on Module B and Module B depends on Module C. Module A can access the classes of Module B, and Module B can access the classes of Module C. Module A cannot access the classes of Module C unless:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					Module A declares an explicit dependency on Module C, or
				</div></li><li class="listitem"><div class="para">
					Module B exports its dependency on Module C.
				</div></li></ul></div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5825-767307+%5BLatest%5D&amp;comment=Title%3A+Module+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5825-767307+12+Aug+2015+21%3A31+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Class_Loading_in_Deployments">
      ⁠</a>3.1.5. Class Loading in Deployments</h2></div></div></div><div class="para">
		For the purposes of class loading, all deployments are treated as modules by JBoss EAP 6. These are called dynamic modules. Class loading behavior varies according to the deployment type.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">WAR Deployment</span></dt><dd><div class="para">
					A WAR deployment is considered to be a single module. Classes in the <code class="filename">WEB-INF/lib</code> directory are treated the same as classes in <code class="filename">WEB-INF/classes</code> directory. All classes packaged in the WAR will be loaded with the same class loader.
				</div></dd><dt><span class="term">EAR Deployment</span></dt><dd><div class="para">
					EAR deployments are made up of more than one module. The definition of these modules follows these rules:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
							The <code class="filename">lib/</code> directory of the EAR is a single module called the parent module.
						</div></li><li class="listitem"><div class="para">
							Each WAR deployment within the EAR is a single module.
						</div></li><li class="listitem"><div class="para">
							Each EJB JAR deployment within the EAR is a single module.
						</div></li></ol></div><div class="para">
					Subdeployment modules (the WAR and JAR deployments within the EAR) have an automatic dependency on the parent module. However they do not have automatic dependencies on each other. This is called subdeployment isolation and can be disabled on a per deployment basis or for the entire application server.
				</div><div class="para">
					Explicit dependencies between subdeployment modules can be added by the same means as any other module.
				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4550-764998+%5BLatest%5D&amp;comment=Title%3A+Class+Loading+in+Deployments%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4550-764998+14+Jul+2015+11%3A35+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Class_Loading_Precedence">
      ⁠</a>3.1.6. Class Loading Precedence</h2></div></div></div><div class="para">
		The JBoss EAP 6 modular class loader uses a precedence system to prevent class loading conflicts.
	</div><div class="para">
		During deployment a complete list of packages and classes is created for each deployment and each of its dependencies. The list is ordered according to the class loading precedence rules. When loading classes at runtime, the class loader searches this list, and loads the first match. This prevents multiple copies of the same classes and packages within the deployments class path from conflicting with each other.
	</div><div class="para">
		The class loader loads classes in the following order, from highest to lowest:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
				Implicit dependencies.
			</div><div class="para">
				These are the dependencies that are added automatically by JBoss EAP 6, such as the JAVA EE APIs. These dependencies have the highest class loader precedence because they contain common functionality and APIs that are supplied by JBoss EAP 6.
			</div><div class="para">
				Refer to <a class="xref" href="chap-Class_Loading_and_Modules.html#Implicit_Module_Dependencies">Section 3.9.1, “Implicit Module Dependencies”</a> for complete details about each implicit dependency.
			</div></li><li class="listitem"><div class="para">
				Explicit dependencies.
			</div><div class="para">
				These are dependencies that are manually added in the application configuration. This can be done using the application's <code class="filename">MANIFEST.MF</code> file or the new optional JBoss deployment descriptor <code class="filename">jboss-deployment-structure.xml</code> file.
			</div><div class="para">
				Refer to <a class="xref" href="chap-Class_Loading_and_Modules.html#Add_an_Explicit_Module_Dependency_to_a_Deployment1">Section 3.2, “Add an Explicit Module Dependency to a Deployment”</a> to learn how to add explicit dependencies.
			</div></li><li class="listitem"><div class="para">
				Local resources.
			</div><div class="para">
				Class files packaged up inside the deployment itself, e.g. from the <code class="filename">WEB-INF/classes</code> or <code class="filename">WEB-INF/lib</code> directories of a WAR file.
			</div></li><li class="listitem"><div class="para">
				Inter-deployment dependencies.
			</div><div class="para">
				These are dependencies on other deployments in a EAR deployment. This can include classes in the <code class="filename">lib</code> directory of the EAR or classes defined in other EJB jars.
			</div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4561-591666+%5BLatest%5D&amp;comment=Title%3A+Class+Loading+Precedence%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4561-591666+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Dynamic_Module_Naming1">
      ⁠</a>3.1.7. Dynamic Module Naming</h2></div></div></div><div class="para">
		All deployments are loaded as modules by JBoss EAP 6 and named according to the following conventions.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Deployments of WAR and JAR files are named with the following format:
			</div><pre class="synopsis"> deployment.<em class="replaceable">DEPLOYMENT_NAME</em> </pre><div class="para">
				For example, <code class="filename">inventory.war</code> and <code class="filename">store.jar</code> will have the module names of <code class="code">deployment.inventory.war</code> and <code class="code">deployment.store.jar</code> respectively.
			</div></li><li class="listitem"><div class="para">
				Subdeployments within an Enterprise Archive are named with the following format:
			</div><pre class="synopsis"> deployment.<em class="replaceable">EAR_NAME</em>.<em class="replaceable">SUBDEPLOYMENT_NAME</em> </pre><div class="para">
				For example, the subdeployment of <code class="filename">reports.war</code> within the enterprise archive <code class="filename">accounts.ear</code> will have the module name of <code class="code">deployment.accounts.ear.reports.war</code>.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4562-759221+%5BLatest%5D&amp;comment=Title%3A+Dynamic+Module+Naming%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4562-759221+25+May+2015+04%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="jboss-deployment-structurexml">
      ⁠</a>3.1.8. jboss-deployment-structure.xml</h2></div></div></div><div class="para">
		<code class="filename">jboss-deployment-structure.xml</code> is a new optional deployment descriptor for JBoss EAP 6. This deployment descriptor provides control over class loading in the deployment.
	</div><div class="para">
		The XML schema for this deployment descriptor is in <code class="filename"><em class="replaceable">EAP_HOME</em>/docs/schema/jboss-deployment-structure-1_2.xsd</code>
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4611-591668+%5BLatest%5D&amp;comment=Title%3A+jboss-deployment-structure.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4611-591668+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Add_an_Explicit_Module_Dependency_to_a_Deployment1">
      ⁠</a>3.2. Add an Explicit Module Dependency to a Deployment</h1></div></div></div><div class="para">
		This task shows how to add an explicit dependency to an application. Explicit module dependencies can be added to applications to add the classes of those modules to the class path of the application at deployment.
	</div><div class="para">
		Some dependencies are automatically added to deployments by JBoss EAP 6. See <a class="xref" href="chap-Class_Loading_and_Modules.html#Implicit_Module_Dependencies">Section 3.9.1, “Implicit Module Dependencies”</a> for details.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol><li class="listitem"><div class="para">
				You must already have a working software project that you want to add a module dependency to.
			</div></li><li class="listitem"><div class="para">
				You must know the name of the module being added as a dependency. See <a class="xref" href="chap-Class_Loading_and_Modules.html#Included_Modules1">Section 3.9.2, “Included Modules”</a> for the list of static modules included with JBoss EAP 6. If the module is another deployment then see <a class="xref" href="chap-Class_Loading_and_Modules.html#Dynamic_Module_Naming1">Section 3.1.7, “Dynamic Module Naming”</a> to determine the module name.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><div class="para">
			Dependencies can be configured using two different methods:
		</div><ol><li class="listitem"><div class="para">
				Adding entries to the <code class="filename">MANIFEST.MF</code> file of the deployment.
			</div></li><li class="listitem"><div class="para">
				Adding entries to the <code class="filename">jboss-deployment-structure.xml</code> deployment descriptor.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550789268304">
      ⁠</a><p class="title"><strong>Procedure 3.1. Add dependency configuration to MANIFEST.MF</strong></p><div class="para">
			Maven projects can be configured to create the required dependency entries in the <code class="filename">MANIFEST.MF</code> file. See <a class="xref" href="chap-Class_Loading_and_Modules.html#Generate_MANIFESTMF_entries_using_Maven">Section 3.3, “Generate MANIFEST.MF entries using Maven”</a>.
		</div><ol class="1"><li class="step"><p class="title"><strong>Add <code class="filename">MANIFEST.MF</code> file</strong></p><div class="para">
				If the project has no <code class="filename">MANIFEST.MF</code> file, create a file called <code class="filename">MANIFEST.MF</code>. For a web application (WAR) add this file to the <code class="filename">META-INF</code> directory. For an EJB archive (JAR) add it to the <code class="filename">META-INF</code> directory.
			</div></li><li class="step"><p class="title"><strong>Add dependencies entry</strong></p><div class="para">
				Add a dependencies entry to the <code class="filename">MANIFEST.MF</code> file with a comma-separated list of dependency module names.
			</div><pre class="programlisting">Dependencies: org.javassist, org.apache.velocity</pre></li><li class="step"><p class="title"><strong>Optional: Make a dependency optional</strong></p><div class="para">
				A dependency can be made optional by appending <code class="code">optional</code> to the module name in the dependency entry.
			</div><pre class="programlisting">Dependencies: org.javassist optional, org.apache.velocity</pre></li><li class="step"><p class="title"><strong>Optional: Export a dependency</strong></p><div class="para">
				A dependency can be exported by appending <code class="code">export</code> to the module name in the dependency entry.
			</div><pre class="programlisting">Dependencies: org.javassist, org.apache.velocity export</pre></li><li class="step"><p class="title"><strong>Optional: Dependencies using annotations</strong></p><div class="para">
				This flag is needed when the module dependency contains annotations which need to be processed during annotation scanning, such as when declaring EJB Interceptors. If this is not done, an EJB interceptor declared in a module cannot be used in a deployment. There are other situations involving annotation scanning when this is needed too.
			</div><div class="para">
				Using this flag requires that the module contain a Jandex index. Instructions for creating and using a Jandex index are included at the end of this topic.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550720443808">
      ⁠</a><p class="title"><strong>Procedure 3.2. Add dependency configuration to jboss-deployment-structure.xml</strong></p><ol class="1"><li class="step"><p class="title"><strong>Add <code class="filename">jboss-deployment-structure.xml</code></strong></p><div class="para">
				If the application has no <code class="filename">jboss-deployment-structure.xml</code> file then create a new file called <code class="filename">jboss-deployment-structure.xml</code> and add it to the project. This file is an XML file with the root element of <code class="code">&lt;jboss-deployment-structure&gt;</code>.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span> 
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre><div class="para">
				For a web application (WAR) add this file to the <code class="filename">WEB-INF</code> directory. For an EJB archive (JAR) add it to the <code class="filename">META-INF</code> directory.
			</div></li><li class="step"><p class="title"><strong>Add dependencies section</strong></p><div class="para">
				Create a <code class="code">&lt;deployment&gt;</code> element within the document root and a <code class="code">&lt;dependencies&gt;</code> element within that.
			</div></li><li class="step"><p class="title"><strong>Add module elements</strong></p><div class="para">
				Within the dependencies node, add a module element for each module dependency. Set the <code class="code">name</code> attribute to the name of the module.
			</div><pre class="programlisting">&lt;module name="org.javassist" /&gt;</pre></li><li class="step"><p class="title"><strong>Optional: Make a dependency optional</strong></p><div class="para">
				A dependency can be made optional by adding the <code class="code">optional</code> attribute to the module entry with the value of <code class="literal">true</code>. The default value for this attribute is <code class="literal">false</code>.
			</div><pre class="programlisting">&lt;module name="org.javassist" optional="true" /&gt;</pre></li><li class="step"><p class="title"><strong>Optional: Export a dependency</strong></p><div class="para">
				A dependency can be exported by adding the <code class="code">export</code> attribute to the module entry with the value of <code class="literal">true</code>. The default value for this attribute is <code class="literal">false</code>.
			</div><pre class="programlisting">&lt;module name="org.javassist" export="true" /&gt;</pre></li></ol></div><div class="example"><a id="idm140550723571616">
      ⁠</a><p class="title"><strong>Example 3.3. jboss-deployment-structure.xml with two dependencies</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;dependencies&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.javassist"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.apache.velocity"</span><span xmlns="" class="perl_Others"> export=</span><span xmlns="" class="perl_String">"true"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/dependencies&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre></div></div><div class="para">
		JBoss EAP 6 will add the classes from the specified modules to the class path of the application when it is deployed.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Creating a Jandex index</div>
			The <code class="literal">annotations</code> flag requires that the module contain a Jandex index. You can create a new "index JAR" to add to the module. Use the Jandex JAR to build the index, and then insert it into a new JAR file:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550719751472">
      ⁠</a><p class="title"><strong>Procedure 3.3. </strong></p><ol class="1"><li class="step"><p class="title"><strong>Create the index</strong></p><div class="para">
				
<pre class="programlisting">java -jar <em class="replaceable">EAP_HOME</em>/modules/org/jboss/jandex/main/jandex-1.0.3.Final-redhat-1.jar $JAR_FILE</pre>

			</div></li><li class="step"><p class="title"><strong>Create a temporary working space</strong></p><div class="para">
				
<pre class="programlisting">mkdir /tmp/META-INF</pre>

			</div></li><li class="step"><p class="title"><strong>Move the index file to the working directory</strong></p><div class="para">
				
<pre class="programlisting">mv $JAR_FILE.ifx /tmp/META-INF/jandex.idx</pre>

			</div></li><li class="step"><ul class="stepalternatives">
				<li class="step"><div class="para">
						<span class="bold bold"><strong>Option 1: Include the index in a new JAR file</strong></span>
					</div><div class="para">
						
<pre class="programlisting">jar cf index.jar -C /tmp META-INF/jandex.idx</pre>

					</div><div class="para">
						Then place the JAR in the module directory and edit <code class="filename">module.xml</code> to add it to the resource roots.
					</div></li>
				 <li class="step"><div class="para">
						<span class="bold bold"><strong>Option 2: Add the index to an existing JAR</strong></span>
					</div><div class="para">
						
<pre class="programlisting">java -jar <em class="replaceable">EAP_HOME</em>/modules/org/jboss/jandex/main/jandex-1.0.3.Final-redhat-1.jar -m $JAR_FILE</pre>

					</div></li>

			</ul></li><li class="step"><p class="title"><strong>Tell the module import to utilize the annotation index</strong></p><div class="para">
				Tell the module import to utilize the annotation index, so that annotation scanning can find the annotations.
			</div><div class="para">
				Choose one of the methods below based on your situation:
			</div><ul class="stepalternatives">
				<li class="step"><div class="para">
						If you are adding a module dependency using MANIFEST.MF, add <code class="literal">annotations</code> after the module name.
					</div><div class="para">
						For example change:
					</div><pre class="programlisting">Dependencies: test.module, other.module</pre><div class="para">
						to
					</div><pre class="programlisting">Dependencies: test.module annotations, other.module</pre></li>
				 <li class="step"><div class="para">
						If you are adding a module dependency using <code class="filename">jboss-deployment-structure.xml</code> add <code class="literal">annotations="true"</code> on the module dependency.
					</div></li>

			</ul></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4551-766904+%5BLatest%5D&amp;comment=Title%3A+Add+an+Explicit+Module+Dependency+to+a+Deployment%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4551-766904+05+Aug+2015+15%3A49+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Generate_MANIFESTMF_entries_using_Maven">
      ⁠</a>3.3. Generate MANIFEST.MF entries using Maven</h1></div></div></div><div class="para">
		Maven projects that use the Maven JAR, EJB or WAR packaging plug-ins can generate a <code class="filename">MANIFEST.MF</code> file with a <code class="code">Dependencies</code> entry. This does not automatically generate the list of dependencies, this process only creates the <code class="filename">MANIFEST.MF</code> file with the details specified in the <code class="filename">pom.xml</code>.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol><li class="listitem"><div class="para">
				You must already have a working Maven project.
			</div></li><li class="listitem"><div class="para">
				The Maven project must be using one of the JAR, EJB, or WAR plug-ins ( <code class="code">maven-jar-plugin</code>, <code class="code">maven-ejb-plugin</code>, <code class="code">maven-war-plugin</code>).
			</div></li><li class="listitem"><div class="para">
				You must know the name of the project's module dependencies. Refer to <a class="xref" href="chap-Class_Loading_and_Modules.html#Included_Modules1">Section 3.9.2, “Included Modules”</a> for the list of static modules included with JBoss EAP 6. If the module is another deployment , then refer to <a class="xref" href="chap-Class_Loading_and_Modules.html#Dynamic_Module_Naming1">Section 3.1.7, “Dynamic Module Naming”</a> to determine the module name.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550779240944">
      ⁠</a><p class="title"><strong>Procedure 3.4. Generate a MANIFEST.MF file containing module dependencies</strong></p><ol class="1"><li class="step"><p class="title"><strong>Add Configuration</strong></p><div class="para">
				Add the following configuration to the packaging plug-in configuration in the project's <code class="filename">pom.xml</code> file.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;configuration&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;manifestEntries&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;Dependencies&gt;&lt;/Dependencies&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/manifestEntries&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/configuration&gt;</span></pre></li><li class="step"><p class="title"><strong>List Dependencies</strong></p><div class="para">
				Add the list of the module dependencies in the <code class="code">&lt;Dependencies&gt;</code> element. Use the same format that is used when adding the dependencies to the <code class="filename">MANIFEST.MF</code>. Refer to <a class="xref" href="chap-Class_Loading_and_Modules.html#Add_an_Explicit_Module_Dependency_to_a_Deployment1">Section 3.2, “Add an Explicit Module Dependency to a Deployment”</a> for details about that format.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;Dependencies&gt;</span>org.javassist, org.apache.velocity<span xmlns="" class="perl_Keyword">&lt;/Dependencies&gt;</span></pre><div class="para">
				The <code class="literal">optional</code> and <code class="literal">export</code> attributes can also be used here.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;Dependencies&gt;</span>org.javassist optional, org.apache.velocity export<span xmlns="" class="perl_Keyword">&lt;/Dependencies&gt;</span></pre></li><li class="step"><p class="title"><strong>Build the Project</strong></p><div class="para">
				Build the project using the Maven assembly goal.
			</div><pre class="screen">[Localhost ]$ mvn assembly:assembly</pre></li></ol></div><div class="para">
		When the project is built using the assembly goal, the final archive contains a <code class="filename">MANIFEST.MF</code> file with the specified module dependencies.
	</div><div class="example"><a id="idm140550812972688">
      ⁠</a><p class="title"><strong>Example 3.4. Configured Module Dependencies in pom.xml</strong></p><div class="example-contents"><div class="para">
			The example here shows the WAR plug-in but it also works with the JAR and EJB plug-ins (maven-jar-plugin and maven-ejb-plugin).
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;plugins&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;plugin&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;groupId&gt;</span>org.apache.maven.plugins<span xmlns="" class="perl_Keyword">&lt;/groupId&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;artifactId&gt;</span>maven-war-plugin<span xmlns="" class="perl_Keyword">&lt;/artifactId&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;configuration&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;archive&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;manifestEntries&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;Dependencies&gt;</span>org.javassist, org.apache.velocity<span xmlns="" class="perl_Keyword">&lt;/Dependencies&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/manifestEntries&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/archive&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/configuration&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/plugin&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/plugins&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5828-766171+%5BLatest%5D&amp;comment=Title%3A+Generate+MANIFEST.MF+entries+using+Maven%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5828-766171+28+Jul+2015+11%3A27+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Prevent_a_Module_Being_Implicitly_Loaded">
      ⁠</a>3.4. Prevent a Module Being Implicitly Loaded</h1></div></div></div><div class="para">
		This task describes how to configure your application to exclude a list of module dependencies.
	</div><div class="para">
		You can configure a deployable application to prevent implicit dependencies from being loaded. This is commonly done when the application includes a different version of a library or framework than the one that will be provided by the application server as an implicit dependency.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol><li class="listitem"><div class="para">
				You must already have a working software project that you want to exclude an implicit dependency from.
			</div></li><li class="listitem"><div class="para">
				You must know the name of the module to exclude. Refer to <a class="xref" href="chap-Class_Loading_and_Modules.html#Implicit_Module_Dependencies">Section 3.9.1, “Implicit Module Dependencies”</a> for a list of implicit dependencies and their conditions.
			</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550802665520">
      ⁠</a><p class="title"><strong>Procedure 3.5. Add dependency exclusion configuration to jboss-deployment-structure.xml</strong></p><ol class="1"><li class="step"><div class="para">
				If the application has no <code class="filename">jboss-deployment-structure.xml</code> file, create a new file called <code class="filename">jboss-deployment-structure.xml</code> and add it to the project. This file is an XML file with the root element of <code class="code">&lt;jboss-deployment-structure&gt;</code>.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre><div class="para">
				For a web application (WAR) add this file to the <code class="filename">WEB-INF</code> directory. For an EJB archive (JAR) add it to the <code class="filename">META-INF</code> directory.
			</div></li><li class="step"><div class="para">
				Create a <code class="code">&lt;deployment&gt;</code> element within the document root and an <code class="code">&lt;exclusions&gt;</code> element within that.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span></pre></li><li class="step"><div class="para">
				Within the exclusions element, add a <code class="code">&lt;module&gt;</code> element for each module to be excluded. Set the <code class="code">name</code> attribute to the name of the module.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.javassist"</span> <span xmlns="" class="perl_Keyword">/&gt;</span></pre></li></ol></div><div class="example"><a id="idm140550723671408">
      ⁠</a><p class="title"><strong>Example 3.5. Excluding two modules</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;deployment&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;exclusions&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.javassist"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.dom4j"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/exclusions&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4552-591667+%5BLatest%5D&amp;comment=Title%3A+Prevent+a+Module+Being+Implicitly+Loaded%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4552-591667+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Exclude_a_Subsystem_from_a_Deployment">
      ⁠</a>3.5. Exclude a Subsystem from a Deployment</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps required to exclude a subsystem from a deployment. This is done by editing the <code class="filename">jboss-deployment-structure.xml</code> configuration file. Excluding a subsystem provides the same effect as removing the subsystem, but it applies only to a single deployment.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550718107328">
      ⁠</a><p class="title"><strong>Procedure 3.6. Exclude a Subsystem</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename">jboss-deployment-structure.xml</code> file in a text editor.
			</div></li><li class="step"><div class="para">
				Add the following XML inside the &lt;deployment&gt; tags:
			</div><pre class="screen">&lt;exclude-subsystems&gt;
  &lt;subsystem name="SUBSYSTEM_NAME" /&gt;
&lt;/exclude-subsystems&gt;</pre></li><li class="step"><div class="para">
				Save the <code class="filename">jboss-deployment-structure.xml</code> file.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The subsystem has been successfully excluded. The subsystem's deployment unit processors will no longer run on the deployment.
		</div><div class="example"><a id="idm140550793169856">
      ⁠</a><p class="title"><strong>Example 3.6. Example <code class="filename">jboss-deployment-structure.xml</code> file.</strong></p><div class="example-contents"><pre class="programlisting">&lt;jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2"&gt;
  &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;
  &lt;deployment&gt;
    &lt;exclude-subsystems&gt;
      &lt;subsystem name="jaxrs" /&gt;
    &lt;/exclude-subsystems&gt;
    &lt;exclusions&gt;
      &lt;module name="org.javassist" /&gt;
    &lt;/exclusions&gt;
    &lt;dependencies&gt;
      &lt;module name="deployment.javassist.proxy" /&gt;
      &lt;module name="deployment.myjavassist" /&gt;
      &lt;module name="myservicemodule" services="import"/&gt;
    &lt;/dependencies&gt;
    &lt;resources&gt;
      &lt;resource-root path="my-library.jar" /&gt;
    &lt;/resources&gt;
  &lt;/deployment&gt;
  &lt;sub-deployment name="myapp.war"&gt;
    &lt;dependencies&gt;
      &lt;module name="deployment.myear.ear.myejbjar.jar" /&gt;
    &lt;/dependencies&gt;
    &lt;local-last value="true" /&gt;
  &lt;/sub-deployment&gt;
  &lt;module name="deployment.myjavassist" &gt;
    &lt;resources&gt;
     &lt;resource-root path="javassist.jar" &gt;
       &lt;filter&gt;
         &lt;exclude path="javassist/util/proxy" /&gt;
       &lt;/filter&gt;
     &lt;/resource-root&gt;
    &lt;/resources&gt;
  &lt;/module&gt;
  &lt;module name="deployment.javassist.proxy" &gt;
    &lt;dependencies&gt;
      &lt;module name="org.javassist" &gt;
        &lt;imports&gt;
          &lt;include path="javassist/util/proxy" /&gt;
          &lt;exclude path="/**" /&gt;
        &lt;/imports&gt;
      &lt;/module&gt;
    &lt;/dependencies&gt;
  &lt;/module&gt;
&lt;/jboss-deployment-structure&gt;</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+11440-733509+%5BLatest%5D&amp;comment=Title%3A+Exclude+a+Subsystem+from+a+Deployment%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=11440-733509+18+Dec+2014+05%3A09+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Use_the_Class_Loader_Programmatically_in_a_Deployment">
      ⁠</a>3.6. Use the Class Loader Programmatically in a Deployment</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Programmatically_Load_Classes_and_Resources_in_a_Deployment">
      ⁠</a>3.6.1. Programmatically Load Classes and Resources in a Deployment</h2></div></div></div><div class="para">
		You can programmatically find or load classes and resources in your application code. The method you choose will depend on a number of factors. This topic describes the methods available and provides guidelines for when to use them.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Load a Class Using the Class.forName() Method</span></dt><dd><div class="para">
					You can use the <code class="code">Class.forName()</code> method to programmatically load and initialize classes. This method has two signatures. 
					<div class="variablelist"><dl class="variablelist"><dt><span class="term">Class.forName(String className)</span></dt><dd><div class="para">
									This signature takes only one parameter, the name of the class you need to load. With this method signature, the class is loaded by the class loader of the current class and initializes the newly loaded class by default.
								</div></dd><dt><span class="term">Class.forName(String className, boolean initialize, ClassLoader loader)</span></dt><dd><div class="para">
									This signature expects three parameters: the class name, a boolean value that specifies whether to initialize the class, and the ClassLoader that should load the class.
								</div></dd></dl></div>
					 The three argument signature is the recommended way to programmatically load a class. This signature allows you to control whether you want the target class to be initialized upon load. It is also more efficient to obtain and provide the class loader because the JVM does not need to examine the call stack to determine which class loader to use. Assuming the class containing the code is named <code class="code">CurrentClass</code>, you can obtain the class's class loader using <code class="code">CurrentClass.class.getClassLoader()</code> method.
				</div><div class="para">
					The following example provides the class loader to load and initialize the <code class="code">TargetClass</code> class: 
					<div class="example"><a id="idm140550807032288">
      ⁠</a><p class="title"><strong>Example 3.7. Provide a class loader to load and initialize the TargetClass.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">Class</span>&lt;?&gt; targetClass = <span xmlns="" class="perl_Keyword">Class</span>.<span xmlns="" class="perl_Function">forName</span>(<span xmlns="" class="perl_String">"com.myorg.util.TargetClass"</span>, <span xmlns="" class="perl_Keyword">true</span>, CurrentClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>());
</pre>

						</div></div></div>

				</div></dd><dt><span class="term">Find All Resources with a Given Name</span></dt><dd><div class="para">
					If you know the name and path of a resource, the best way to load it directly is to use the standard Java development kit Class or ClassLoader API. 
					<div class="variablelist"><dl class="variablelist"><dt><span class="term">Load a Single Resource</span></dt><dd><div class="para">
									To load a single resource located in the same directory as your class or another class in your deployment, you can use the <code class="code">Class.getResourceAsStream()</code> method. 
									<div class="example"><a id="idm140550799472224">
      ⁠</a><p class="title"><strong>Example 3.8. Load a single resource in your deployment.</strong></p><div class="example-contents"><div class="para">
											
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>InputStream inputStream = CurrentClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getResourceAsStream</span>(<span xmlns="" class="perl_String">"targetResourceName"</span>);
</pre>

										</div></div></div>

								</div></dd><dt><span class="term">Load All Instances of a Single Resource</span></dt><dd><div class="para">
									To load all instances of a single resource that are visible to your deployment's class loader, use the <code class="code">Class.getClassLoader().getResources(String resourceName)</code> method, where <code class="code">resourceName</code> is the fully qualified path of the resource. This method returns an Enumeration of all <code class="code">URL</code> objects for resources accessible by the class loader with the given name. You can then iterate through the array of URLs to open each stream using the <code class="code">openStream()</code> method. 
									<div class="example"><a id="idm140550802646704">
      ⁠</a><p class="title"><strong>Example 3.9. Load all instances of a resource and iterate through the result.</strong></p><div class="example-contents"><div class="para">
											
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>Enumeration&lt;URL&gt; urls = CurrentClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>().<span xmlns="" class="perl_Function">getResources</span>(<span xmlns="" class="perl_String">"full/path/to/resource"</span>);
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">while</span> (urls.<span xmlns="" class="perl_Function">hasMoreElements</span>()) {
<span xmlns="" class="line">​</span>    URL url = urls.<span xmlns="" class="perl_Function">nextElement</span>();
<span xmlns="" class="line">​</span>    InputStream inputStream = <span xmlns="" class="perl_Keyword">null</span>;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">try</span> {
<span xmlns="" class="line">​</span>        inputStream = url.<span xmlns="" class="perl_Function">openStream</span>();
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">// Process the inputStream</span>
<span xmlns="" class="line">​</span>        ...
<span xmlns="" class="line">​</span>    } <span xmlns="" class="perl_Keyword">catch</span>(IOException ioException) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">// Handle the error</span>
<span xmlns="" class="line">​</span>    } <span xmlns="" class="perl_Keyword">finally</span> {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">if</span> (inputStream != <span xmlns="" class="perl_Keyword">null</span>) {
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">try</span> {
<span xmlns="" class="line">​</span>                inputStream.<span xmlns="" class="perl_Function">close</span>();
<span xmlns="" class="line">​</span>            } <span xmlns="" class="perl_Keyword">catch</span> (Exception e) {
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Comment">// ignore</span>
<span xmlns="" class="line">​</span>            }
<span xmlns="" class="line">​</span>        }
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
</pre>

										</div></div></div>
									 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
											Because the URL instances are loaded from local storage, it is not necessary to use the <code class="code">openConnection()</code> or other related methods. Streams are much simpler to use and minimize the complexity of the code.
										</div></div></div>

								</div></dd></dl></div>

				</div></dd><dt><span class="term">Load a Class File From the Class Loader</span></dt><dd><div class="para">
					If a class has already been loaded, you can load the class file that corresponds to that class using the following syntax: 
					<div class="example"><a id="idm140550791898608">
      ⁠</a><p class="title"><strong>Example 3.10. Load a class file for a class that has been loaded.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>InputStream inputStream = CurrentClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getResourceAsStream</span>(TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getSimpleName</span>() + <span xmlns="" class="perl_String">".class"</span>);
</pre>

						</div></div></div>
					 If the class is not yet loaded, you must use the class loader and translate the path: 
					<div class="example"><a id="idm140550791449888">
      ⁠</a><p class="title"><strong>Example 3.11. Load a class file for a class that has not been loaded.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>String className = <span xmlns="" class="perl_String">"com.myorg.util.TargetClass"</span>
<span xmlns="" class="line">​</span>InputStream inputStream = CurrentClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>().<span xmlns="" class="perl_Function">getResourceAsStream</span>(className.<span xmlns="" class="perl_Function">replace</span>(<span xmlns="" class="perl_Char">'.'</span>, <span xmlns="" class="perl_Char">'/'</span>) + <span xmlns="" class="perl_String">".class"</span>);
</pre>

						</div></div></div>

				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+24376-764600+%5BLatest%5D&amp;comment=Title%3A+Programmatically+Load+Classes+and+Resources+in+a+Deployment%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=24376-764600+12+Jul+2015+20%3A31+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Programmatically_Iterate_Resources_in_a_Deployment">
      ⁠</a>3.6.2. Programmatically Iterate Resources in a Deployment</h2></div></div></div><div class="para">
		The JBoss Modules library provides several APIs for iterating all deployment resources. The JavaDoc for the JBoss Modules API is located here: <a href="http://docs.jboss.org/jbossmodules/1.3.0.Final/api/">http://docs.jboss.org/jbossmodules/1.3.0.Final/api/</a>. To use these APIs, you must add the following dependency to the <code class="filename">MANIFEST.MF</code>: 
<pre class="programlisting">Dependencies: org.jboss.modules</pre>
		 It is important to note that while these APIs provide increased flexibility, they will also run much more slowly than a direct path lookup.
	</div><div class="para">
		This topic describes some of the ways you can programmatically iterate through resources in your application code.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">List Resources Within a Deployment and Within All Imports</span></dt><dd><div class="para">
					There are times when it is not possible to look up resources by the exact path. For example, the exact path may not be known or you may need to examine more than one file in a given path. In this case, the JBoss Modules library provides several APIs for iterating all deployment resources. You can iterate through resources in a deployment by utilizing one of two methods. 
					<div class="variablelist"><dl class="variablelist"><dt><span class="term">Iterate All Resources Found in a Single Module</span></dt><dd><div class="para">
									The <code class="code">ModuleClassLoader.iterateResources()</code> method iterates all the resources within this module class loader. This method takes two arguments: the starting directory name to search and a boolean that specifies whether it should recurse into subdirectories.
								</div><div class="para">
									The following example demonstrates how to obtain the ModuleClassLoader and obtain the iterator for resources in the <code class="filename">bin/</code> directory, recursing into subdirectories. 
									<div class="example"><a id="idm140550784350080">
      ⁠</a><p class="title"><strong>Example 3.12. Find resources in the "bin" directory, recursing into subdirectories.</strong></p><div class="example-contents"><div class="para">
											
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; mclResources = moduleClassLoader.<span xmlns="" class="perl_Function">iterateResources</span>(<span xmlns="" class="perl_String">"bin"</span>,<span xmlns="" class="perl_Keyword">true</span>);
</pre>

										</div></div></div>
									 The resultant iterator may be used to examine each matching resource and query its name and size (if available), open a readable stream, or acquire a URL for the resource.
								</div></dd><dt><span class="term">Iterate All Resources Found in a Single Module and Imported Resources</span></dt><dd><div class="para">
									The <code class="code">Module.iterateResources()</code> method iterates all the resources within this module class loader, including the resources that are imported into the module. This method returns a much larger set than the previous method. This method requires an argument, which is a filter that narrows the result to a specific pattern. Alternatively, PathFilters.acceptAll() can be supplied to return the entire set. 
									<div class="example"><a id="idm140550732102064">
      ⁠</a><p class="title"><strong>Example 3.13. Find the entire set of resources in this module, including imports.</strong></p><div class="example-contents"><div class="para">
											
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Module module = moduleClassLoader.<span xmlns="" class="perl_Function">getModule</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; moduleResources = module.<span xmlns="" class="perl_Function">iterateResources</span>(PathFilters.<span xmlns="" class="perl_Function">acceptAll</span>());
</pre>

										</div></div></div>

								</div></dd></dl></div>

				</div></dd><dt><span class="term">Find All Resources That Match a Pattern</span></dt><dd><div class="para">
					If you need to find only specific resources within your deployment or within your deployment's full import set, you need to filter the resource iteration. The JBoss Modules filtering APIs give you several tools to accomplish this. 
					<div class="variablelist"><dl class="variablelist"><dt><span class="term">Examine the Full Set of Dependencies</span></dt><dd><div class="para">
									If you need to examine the full set of dependencies, you can use the <code class="code">Module.iterateResources()</code> method's <code class="code">PathFilter</code> parameter to check the name of each resource for a match.
								</div></dd><dt><span class="term">Examine Deployment Dependencies</span></dt><dd><div class="para">
									If you need to look only within the deployment, use the <code class="code">ModuleClassLoader.iterateResources()</code> method. However, you must use additional methods to filter the resultant iterator. The <code class="code">PathFilters.filtered()</code> method can provide a filtered view of a resource iterator this case. The <code class="code">PathFilters</code> class includes many static methods to create and compose filters that perform various functions, including finding child paths or exact matches, or matching an Ant-style "glob" pattern.
								</div></dd></dl></div>

				</div></dd><dt><span class="term">Additional Code Examples For Filtering Resouces</span></dt><dd><div class="para">
					The following examples demonstrate how to filter resources based on different criteria. 
					<div class="example"><a id="idm140550786028368">
      ⁠</a><p class="title"><strong>Example 3.14. Find all files named "messages.properties" in your deployment.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; mclResources = PathFilters.<span xmlns="" class="perl_Function">filtered</span>(PathFilters.<span xmlns="" class="perl_Function">match</span>(<span xmlns="" class="perl_String">"**/messages.properties"</span>), moduleClassLoader.<span xmlns="" class="perl_Function">iterateResources</span>(<span xmlns="" class="perl_String">""</span>, <span xmlns="" class="perl_Keyword">true</span>));
</pre>

						</div></div></div>
					 <div class="example"><a id="idm140550806203936">
      ⁠</a><p class="title"><strong>Example 3.15. Find all files named "messages.properties" in your deployment and imports.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Module module = moduleClassLoader.<span xmlns="" class="perl_Function">getModule</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; moduleResources = module.<span xmlns="" class="perl_Function">iterateResources</span>(PathFilters.<span xmlns="" class="perl_Function">match</span>(<span xmlns="" class="perl_String">"**/message.properties));</span>
</pre>

						</div></div></div>
					 <div class="example"><a id="idm140550799495056">
      ⁠</a><p class="title"><strong>Example 3.16. Find all files inside any directory named "my-resources" in your deployment.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; mclResources = PathFilters.<span xmlns="" class="perl_Function">filtered</span>(PathFilters.<span xmlns="" class="perl_Function">match</span>(<span xmlns="" class="perl_String">"**/my-resources/**"</span>), moduleClassLoader.<span xmlns="" class="perl_Function">iterateResources</span>(<span xmlns="" class="perl_String">""</span>, <span xmlns="" class="perl_Keyword">true</span>));
</pre>

						</div></div></div>
					 <div class="example"><a id="idm140550809753488">
      ⁠</a><p class="title"><strong>Example 3.17. Find all files named "messages" or "errors" in your deployment and imports.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Module module = moduleClassLoader.<span xmlns="" class="perl_Function">getModule</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; moduleResources = module.<span xmlns="" class="perl_Function">iterateResources</span>(PathFilters.<span xmlns="" class="perl_Function">any</span>(PathFilters.<span xmlns="" class="perl_Function">match</span>(<span xmlns="" class="perl_String">"**/messages"</span>), PathFilters.<span xmlns="" class="perl_Function">match</span>(<span xmlns="" class="perl_String">"**/errors"</span>));
</pre>

						</div></div></div>
					 <div class="example"><a id="idm140550724747808">
      ⁠</a><p class="title"><strong>Example 3.18. Find all files in a specific package in your deployment.</strong></p><div class="example-contents"><div class="para">
							
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.<span xmlns="" class="perl_Function">class</span>.<span xmlns="" class="perl_Function">getClassLoader</span>();
<span xmlns="" class="line">​</span>Iterator&lt;Resource&gt; mclResources = moduleClassLoader.<span xmlns="" class="perl_Function">iterateResources</span>(<span xmlns="" class="perl_String">"path/form/of/packagename"</span>, <span xmlns="" class="perl_Keyword">false</span>);
</pre>

						</div></div></div>

				</div></dd></dl></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+24377-592557+%5BLatest%5D&amp;comment=Title%3A+Programmatically+Iterate+Resources+in+a+Deployment%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=24377-592557+23+Feb+2014+16%3A59+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Class_Loading_and_Subdeployments">
      ⁠</a>3.7. Class Loading and Subdeployments</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Modules_and_Class_Loading_in_Enterprise_Archives">
      ⁠</a>3.7.1. Modules and Class Loading in Enterprise Archives</h2></div></div></div><div class="para">
		Enterprise Archives (EAR) are not loaded as a single module like JAR or WAR deployments. They are loaded as multiple unique modules.
	</div><div class="para">
		The following rules determine what modules exist in an EAR.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				The contents of the <code class="filename">lib/</code> directory in the root of the EAR archive is a module. This is called the parent module.
			</div></li><li class="listitem"><div class="para">
				Each WAR and EJB JAR subdeployment is a module. These modules have the same behavior as any other module as well as implicit dependencies on the parent module.
			</div></li><li class="listitem"><div class="para">
				Subdeployments have implicit dependencies on the parent module and any other non-WAR subdeployments.
			</div></li></ul></div><div class="para">
		The implicit dependencies on non-WAR subdeployments occur because JBoss EAP 6 has subdeployment class loader isolation disabled by default. Dependencies on the parent module persist, regardless of subdeployment class loader isolation.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			No subdeployment ever gains an implicit dependency on a WAR subdeployment. Any subdeployment can be configured with explicit dependencies on another subdeployment as would be done for any other module.
		</div></div></div><div class="para">
		Subdeployment class loader isolation can be enabled if strict compatibility is required. This can be enabled for a single EAR deployment or for all EAR deployments. The Java EE 6 specification recommends that portable applications should not rely on subdeployments being able to access each other unless dependencies are explicitly declared as <code class="code">Class-Path</code> entries in the <code class="filename">MANIFEST.MF</code> file of each subdeployment.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4354-766002+%5BLatest%5D&amp;comment=Title%3A+Modules+and+Class+Loading+in+Enterprise+Archives%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4354-766002+27+Jul+2015+00%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Subdeployment_Class_Loader_Isolation">
      ⁠</a>3.7.2. Subdeployment Class Loader Isolation</h2></div></div></div><div class="para">
		Each subdeployment in an Enterprise Archive (EAR) is a dynamic module with its own class loader. By default a subdeployment can access the resources of other subdeployments.
	</div><div class="para">
		If a subdeployment is not to be allowed to access the resources of other subdeployments, strict subdeployment isolation can be enabled.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4565-765768+%5BLatest%5D&amp;comment=Title%3A+Subdeployment+Class+Loader+Isolation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4565-765768+22+Jul+2015+22%3A53+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Disable_Subdeployment_Class_Loader_Isolation_Within_a_EAR">
      ⁠</a>3.7.3. Enable Subdeployment Class Loader Isolation Within a EAR</h2></div></div></div><div class="para">
		This task shows you how to enable subdeployment class loader isolation in an EAR deployment by using a special deployment descriptor in the EAR. This does not require any changes to be made to the application server and does not affect any other deployments.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			Even when subdeployment class loader isolation is disabled it is not possible to add a WAR deployment as a dependency.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><p class="title"><strong>Add the deployment descriptor file</strong></p><div class="para">
				Add the <code class="filename">jboss-deployment-structure.xml</code> deployment descriptor file to the <code class="filename">META-INF</code> directory of the EAR if it doesn't already exist and add the following content:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss-deployment-structure&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss-deployment-structure&gt;</span></pre></li><li class="step"><p class="title"><strong>Add the <code class="code">&lt;ear-subdeployments-isolated&gt;</code> element</strong></p><div class="para">
				Add the <code class="code">&lt;ear-subdeployments-isolated&gt;</code> element to the <code class="filename">jboss-deployment-structure.xml</code> file if it doesn't already exist with the content of <code class="literal">true</code>.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ear-subdeployments-isolated&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/ear-subdeployments-isolated&gt;</span></pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result:</div>
			Subdeployment class loader isolation will now be enabled for this EAR deployment. This means that the subdeployments of the EAR will not have automatic dependencies on each of the non-WAR subdeployments.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4566-765773+%5BLatest%5D&amp;comment=Title%3A+Enable+Subdeployment+Class+Loader+Isolation+Within+a+EAR%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4566-765773+22+Jul+2015+23%3A14+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Deploy_Tag_Library_Descriptors_TLDs_in_a_Custom_Module">
      ⁠</a>3.8. Deploy Tag Library Descriptors (TLDs) in a Custom Module</h1></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			If you have multiple applications that use common Tag Library Descriptors (TLDs), it may be useful to separate the TLDs from the applications so that they are located in one central and unique location. This enables easier additions and updates to TLDs without necessarily having to update each individual application that uses them.
		</div><div class="para">
		This can be done by creating a custom JBoss EAP 6 module that contains the TLD JARs, and declaring a dependency on that module in the applications.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Prerequisites</div>
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						At least one JAR containing TLDs. Ensure that the TLDs are packed in <code class="code">META-INF</code>.
					</div></li></ul></div>

		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550768736928">
      ⁠</a><p class="title"><strong>Procedure 3.7. Deploy TLDs in a Custom Module</strong></p><ol class="1"><li class="step"><div class="para">
				Using the Management CLI, connect to your JBoss EAP 6 instance and execute the following command to create the custom module containing the TLD JAR:
			</div><pre class="screen">module add --name=<em class="replaceable">MyTagLibs</em> --resources=<em class="replaceable">/path/to/TLDarchive.jar</em></pre><div class="para">
				If the TLDs are packaged with classes that require dependencies, use the <code class="code">--dependencies=<em class="replaceable">DEPENDENCY</em></code> option to ensure that you specify those dependencies when creating the custom module.
			</div><div class="para">
				When creating the module, you can specify multiple JAR resources by separating each one with <code class="literal">:</code>. For example, <code class="code">--resources=<em class="replaceable">/path/to/one.jar</em>:<em class="replaceable">/path/to/two.jar</em></code>
			</div></li><li class="step"><div class="para">
				In your applications, declare a dependency on the new <em class="replaceable">MyTagLibs</em> custom module using one of the methods described in <a class="xref" href="chap-Class_Loading_and_Modules.html#Add_an_Explicit_Module_Dependency_to_a_Deployment1">Section 3.2, “Add an Explicit Module Dependency to a Deployment”</a>.
			</div><div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
					Ensure that you also import <code class="code">META-INF</code> when declaring the dependency. For example, for <code class="filename">MANIFEST.MF</code>: 
<pre class="programlisting XML"><span xmlns="" class="line">​</span>Dependencies: com.MyTagLibs meta-inf</pre>
					 Or, for <code class="filename">jboss-deployment-structure.xml</code>, use the <code class="code">meta-inf</code> attribute.
				</div></div></div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			In your applications you can use TLDs that are contained in the new custom module.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+41813-724992+%5BLatest%5D&amp;comment=Title%3A+Deploy+Tag+Library+Descriptors+%28TLDs%29+in+a+Custom+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=41813-724992+10+Nov+2014+20%3A17+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Reference">
      ⁠</a>3.9. Reference</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Implicit_Module_Dependencies">
      ⁠</a>3.9.1. Implicit Module Dependencies</h2></div></div></div><div class="para">
		The following table lists the modules that are automatically added to deployments as dependencies and the conditions that trigger the dependency.
	</div><div class="table"><a id="table-implicit_module_dependencies">
      ⁠</a><p class="title"><strong>Table 3.1. Implicit Module Dependencies</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="gt-4-cols gt-7-rows" summary="Implicit Module Dependencies"><colgroup><col width="14%" style="text-align: left" class="c1"/><col width="29%" style="text-align: left" class="c2"/><col width="29%" style="text-align: left" class="c3"/><col width="29%" style="text-align: left" class="c4"/></colgroup><thead><tr><th style="text-align: left"> Subsystem Responsible for Adding the Dependency </th><th style="text-align: left"> Dependencies That Are Always Added </th><th style="text-align: left"> Dependencies That Are Conditionally Added </th><th style="text-align: left"> Conditions That Trigger the Addition of the Dependency </th></tr></thead><tbody><tr><td style="text-align: left"> Core Server </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.api
							</div></li><li class="listitem"><div class="para">
								ibm.jdk
							</div></li><li class="listitem"><div class="para">
								sun.jdk
							</div></li><li class="listitem"><div class="para">
								org.jboss.vfs
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td></tr><tr><td style="text-align: left"> EE subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javaee.api
							</div></li><li class="listitem"><div class="para">
								org.hibernate.validator
							</div></li><li class="listitem"><div class="para">
								org.jboss.invocation
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.ee
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td></tr><tr><td style="text-align: left"> EJB 3 subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.ejb.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.ejb-client
							</div></li><li class="listitem"><div class="para">
								org.jboss.iiop-client
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.ejb3
							</div></li></ul></div>
					 <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.jboss.as.jacorb
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">
						The presence of an <code class="filename">ejb-jar.xml</code> file within a valid location in the deployment, as described in the Java EE 6 specification.
					</div>
					 <div class="para">
						The presence of annotation-based EJBs, for example: <code class="code">@Stateless</code>, <code class="code">@Stateful</code>, <code class="code">@MessageDriven</code>
					</div>
					 </td></tr><tr><td style="text-align: left"> JAX-RS (RESTEasy) subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.xml.bind.api
							</div></li><li class="listitem"><div class="para">
								javax.ws.rs.api
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-atom-provider
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-hibernatevalidator-provider
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-jaxrs
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-jaxb-provider
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-jackson-provider
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-jettison-provider
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-jsapi
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-multipart-provider
							</div></li><li class="listitem"><div class="para">
								org.jboss.resteasy.resteasy-yaml-provider
							</div></li><li class="listitem"><div class="para">
								org.codehaus.jackson.jackson-core-asl
							</div></li></ul></div>
					 </td><td style="text-align: left"> The presence of JAX-RS annotations in the deployment. </td></tr><tr><td style="text-align: left"> JCA subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.resource.api
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.jms.api
							</div></li><li class="listitem"><div class="para">
								javax.validation.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.ironjacamar.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.ironjacamar.impl
							</div></li><li class="listitem"><div class="para">
								org.hibernate.validator
							</div></li></ul></div>
					 </td><td style="text-align: left"> The deployment of a resource adapter (RAR) archive. </td></tr><tr><td style="text-align: left"> JPA (Hibernate) subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.persistence.api
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javaee.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.jpa
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.jpa.spi
							</div></li><li class="listitem"><div class="para">
								org.javassist
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.jpa.hibernate:3 / org.jboss.as.jpa.hibernate3.HibernatePersistenceProviderAdaptor
							</div></li><li class="listitem"><div class="para">
								org.hibernate.envers
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.naming
							</div></li><li class="listitem"><div class="para">
								org.jboss.jandex
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">
						The presence of an <code class="code">@PersistenceUnit</code> or <code class="code">@PersistenceContext</code> annotation, or a <code class="code">&lt;persistence-unit-ref&gt;</code> or <code class="code">&lt;persistence-context-ref&gt;</code> element in a deployment descriptor.
					</div>
					 <div class="para">

					</div>
					 <div class="para">
						JBoss EAP 6 maps persistence provider names to module names. If you name a specific provider in the <code class="filename">persistence.xml</code> file, a dependency is added for the appropriate module. If this not the desired behavior, you can exclude it using a <code class="filename">jboss-deployment-structure.xml</code> file.
					</div>
					 </td></tr><tr><td style="text-align: left"> Logging subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.jboss.logging
							</div></li><li class="listitem"><div class="para">
								org.apache.log4j
							</div></li><li class="listitem"><div class="para">
								org.apache.commons.logging
							</div></li><li class="listitem"><div class="para">
								org.slf4j
							</div></li><li class="listitem"><div class="para">
								org.jboss.logging.jul-to-slf4j-stub
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="para">
						These dependencies are always added unless the <code class="code">add-logging-api-dependencies</code> attribute is set to false.
					</div>
					 </td></tr><tr><td style="text-align: left"> SAR subsystem </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.jboss.modules
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.system-jmx
							</div></li><li class="listitem"><div class="para">
								org.jboss.common-beans
							</div></li></ul></div>
					 </td><td style="text-align: left"> The deployment of a SAR archive. </td></tr><tr><td style="text-align: left"> Security subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.picketbox
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.security
							</div></li><li class="listitem"><div class="para">
								javax.security.jacc.api
							</div></li><li class="listitem"><div class="para">
								javax.security.auth.message.api
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="para">

					</div>
					 </td></tr><tr><td style="text-align: left"> Web subsystem </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.servlet.api
							</div></li><li class="listitem"><div class="para">
								javax.servlet.jsp.api
							</div></li><li class="listitem"><div class="para">
								javax.websocket.api
							</div></li><li class="listitem"><div class="para">
								javax.servlet.jstl.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.web
							</div></li></ul></div>
					 </td><td style="text-align: left"> The deployment of a WAR archive. JavaServer Faces (JSF) is added only if it is used.  </td></tr><tr><td style="text-align: left"> Web Services subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.jws.api
							</div></li><li class="listitem"><div class="para">
								javax.xml.soap.api
							</div></li><li class="listitem"><div class="para">
								javax.xml.ws.api
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.jboss.ws.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.ws.spi
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="para">
						If it is not application client type, then it will add the conditional dependencies
					</div>
					 </td></tr><tr><td style="text-align: left"> Weld (CDI) Subsystem </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.enterprise.api
							</div></li><li class="listitem"><div class="para">
								javax.inject.api
							</div></li></ul></div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								javax.persistence.api
							</div></li><li class="listitem"><div class="para">
								javaee.api
							</div></li><li class="listitem"><div class="para">
								org.javassist
							</div></li><li class="listitem"><div class="para">
								org.jboss.as.weld
							</div></li><li class="listitem"><div class="para">
								org.jboss.weld.core
							</div></li><li class="listitem"><div class="para">
								org.jboss.weld.api
							</div></li><li class="listitem"><div class="para">
								org.jboss.weld.spi
							</div></li></ul></div>
					 </td><td style="text-align: left"> The presence of a <code class="filename">beans.xml</code> file in the deployment. </td></tr><tr><td style="text-align: left"> Container Managed Persistence (CMP) Subsystem </td><td style="text-align: left"> <div class="para">

					</div>
					 </td><td style="text-align: left"> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
								org.jboss.as.cmp
							</div></li></ul></div>
					 </td><td style="text-align: left"> </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4353-775643+%5BLatest%5D&amp;comment=Title%3A+Implicit+Module+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4353-775643+20+Jan+2016+02%3A30+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Included_Modules1">
      ⁠</a>3.9.2. Included Modules</h2></div></div></div><div class="para">
		A table listing the JBoss EAP 6 included modules and whether they are supported can be found on the Customer Portal at <a href="https://access.redhat.com/articles/1122333">https://access.redhat.com/articles/1122333</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+3891-682454+%5BLatest%5D&amp;comment=Title%3A+Included+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=3891-682454+08+Jul+2014+09%3A49+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JBoss_Deployment_Structure_Deployment_Descriptor_Reference">
      ⁠</a>3.9.3. JBoss Deployment Structure Deployment Descriptor Reference</h2></div></div></div><div class="para">
		The key tasks that can be performed using this deployment descriptor are:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Defining explicit module dependencies.
			</div></li><li class="listitem"><div class="para">
				Preventing specific implicit dependencies from loading.
			</div></li><li class="listitem"><div class="para">
				Defining additional modules from the resources of that deployment.
			</div></li><li class="listitem"><div class="para">
				Changing the subdeployment isolation behavior in that EAR deployment.
			</div></li><li class="listitem"><div class="para">
				Adding additional resource roots to a module in an EAR.
			</div></li></ul></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4614-591668+%5BLatest%5D&amp;comment=Title%3A+JBoss+Deployment+Structure+Deployment+Descriptor+Reference%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4614-591668+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>