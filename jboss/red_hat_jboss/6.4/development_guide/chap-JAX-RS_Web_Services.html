<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 15. JAX-RS Web Services</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-JAX-RS_Web_Services">
      ⁠</a>Chapter 15. JAX-RS Web Services</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_JAX-RS">
      ⁠</a>15.1. About JAX-RS</h1></div></div></div><div class="para">
		JAX-RS is the Java API for RESTful web services. It provides support for building web services using REST, through the use of annotations. These annotations simplify the process of mapping Java objects to web resources. The specification is defined here: <a href="http://www.jcp.org/en/jsr/detail?id=311">http://www.jcp.org/en/jsr/detail?id=311</a>.
	</div><div class="para">
		RESTEasy is the JBoss EAP 6 implementation of JAX-RS. It also provides additional features to the specification.
	</div><div class="para">
		JBoss EAP 6 is compliant with JSR 311 - JAX-RS.
	</div><div class="para">
		To get started with JAX-RS and JBoss EAP 6, refer to the <code class="code">helloworld-rs</code>, <code class="code">jax-rs-client</code>, and <code class="code">kitchensink</code> quickstart: <a class="xref" href="chap-Get_Started_Developing_Applications.html#Access_the_Java_EE_Quickstart_Examples">Section 1.4.1.1, “Access the Quickstarts”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+1759-591647+%5BLatest%5D&amp;comment=Title%3A+About+JAX-RS%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=1759-591647+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_RESTEasy">
      ⁠</a>15.2. About RESTEasy</h1></div></div></div><div class="para">
		RESTEasy is a portable implementation of the JAX-RS Java API. It also provides additional features, including a client side framework (the RESTEasy JAX-RS Client Framework) for mapping outgoing requests to remote servers, allowing JAX-RS to operate as a client or server-side specification.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+1760-591647+%5BLatest%5D&amp;comment=Title%3A+About+RESTEasy%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=1760-591647+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="About_RESTful_Web_Services">
      ⁠</a>15.3. About RESTful Web Services</h1></div></div></div><div class="para">
		RESTful web services are designed to expose APIs on the web. They aim to provide better performance, scalability, and flexibility than traditional web services by allowing clients to access data and resources using predictable URLs.
	</div><div class="para">
		The Java Enterprise Edition 6 specification for RESTful services is JAX-RS. For more information about JAX-RS, refer to <a class="xref" href="chap-JAX-RS_Web_Services.html#About_JAX-RS">Section 15.1, “About JAX-RS”</a> and <a class="xref" href="chap-JAX-RS_Web_Services.html#About_RESTEasy">Section 15.2, “About RESTEasy”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+1758-591647+%5BLatest%5D&amp;comment=Title%3A+About+RESTful+Web+Services%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=1758-591647+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="RESTEasy_Defined_Annotations">
      ⁠</a>15.4. RESTEasy Defined Annotations</h1></div></div></div><div class="table"><a id="idm140550730074592">
      ⁠</a><p class="title"><strong>Table 15.1. JAX-RS/RESTEasy Annotations</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="JAX-RS/RESTEasy Annotations"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Annotation </th><th style="text-align: left"> Usage </th></tr></thead><tbody><tr><td style="text-align: left"> <code class="code">ClientResponseType</code> </td><td style="text-align: left"> This is an annotation that you can add to a RESTEasy client interface that has a return type of Response. </td></tr><tr><td style="text-align: left"> <code class="code">ContentEncoding</code> </td><td style="text-align: left"> Meta annotation that specifies a Content-Encoding to be applied via the annotated annotation. </td></tr><tr><td style="text-align: left"> <code class="code">DecorateTypes</code> </td><td style="text-align: left"> Must be placed on a DecoratorProcessor class to specify the supported types. </td></tr><tr><td style="text-align: left"> <code class="code">Decorator</code> </td><td style="text-align: left"> Meta-annotation to be placed on another annotation that triggers decoration. </td></tr><tr><td style="text-align: left"> <code class="code">Form</code> </td><td style="text-align: left"> This can be used as a value object for incoming/outgoing request/responses. </td></tr><tr><td style="text-align: left"> <code class="code">StringParameterUnmarshallerBinder</code> </td><td style="text-align: left"> Meta-annotation to be placed on another annotation that triggers a StringParameterUnmarshaller to be applied to a string based annotation injector. </td></tr><tr><td style="text-align: left"> <code class="code">Cache</code> </td><td style="text-align: left"> Set response Cache-Control header automatically. </td></tr><tr><td style="text-align: left"> <code class="code">NoCache</code> </td><td style="text-align: left"> Set Cache-Control response header of "nocache". </td></tr><tr><td style="text-align: left"> <code class="code">ServerCached</code> </td><td style="text-align: left"> Specifies that the response to this jax-rs method should be cached on the server. </td></tr><tr><td style="text-align: left"> <code class="code">ClientInterceptor</code> </td><td style="text-align: left"> Identifies an interceptor as a client-side interceptor. </td></tr><tr><td style="text-align: left"> <code class="code">DecoderPrecedence</code> </td><td style="text-align: left"> This interceptor is an Content-Encoding decoder. </td></tr><tr><td style="text-align: left"> <code class="code">EncoderPrecedence</code> </td><td style="text-align: left"> This interceptor is an Content-Encoding encoder. </td></tr><tr><td style="text-align: left"> <code class="code">HeaderDecoratorPrecedence</code> </td><td style="text-align: left"> HeaderDecoratorPrecedence interceptors should always come first as they decorate a response (on the server), or an outgoing request (on the client) with special, user-defined, headers. </td></tr><tr><td style="text-align: left"> <code class="code">RedirectPrecedence</code> </td><td style="text-align: left"> Should be placed on a PreProcessInterceptor. </td></tr><tr><td style="text-align: left"> <code class="code">SecurityPrecedence</code> </td><td style="text-align: left"> Should be placed on a PreProcessInterceptor. </td></tr><tr><td style="text-align: left"> <code class="code">ServerInterceptor</code> </td><td style="text-align: left"> Identifies an interceptor as a server-side interceptor. </td></tr><tr><td style="text-align: left"> <code class="code">NoJackson</code> </td><td style="text-align: left"> Placed on class, parameter, field or method when you don't want the Jackson provider to be triggered. </td></tr><tr><td style="text-align: left"> <code class="code">ImageWriterParams</code> </td><td style="text-align: left"> An annotation that a resource class can use to pass parameters to the IIOImageProvider. </td></tr><tr><td style="text-align: left"> <code class="code">DoNotUseJAXBProvider</code> </td><td style="text-align: left"> Put this on a class or parameter when you do not want the JAXB MessageBodyReader/Writer used but instead have a more specific provider you want to use to marshall the type. </td></tr><tr><td style="text-align: left"> <code class="code">Formatted</code> </td><td style="text-align: left"> Format XML output with indentations and newlines. This is a JAXB Decorator. </td></tr><tr><td style="text-align: left"> <code class="code">IgnoreMediaTypes</code> </td><td style="text-align: left"> Placed on a type, method, parameter, or field to tell JAXRS not to use JAXB provider for a certain media type </td></tr><tr><td style="text-align: left"> <code class="code">Stylesheet</code> </td><td style="text-align: left"> Specifies an XML stylesheet header. </td></tr><tr><td style="text-align: left"> <code class="code">Wrapped</code> </td><td style="text-align: left"> Put this on a method or parameter when you want to marshal or unmarshal a collection or array of JAXB objects. </td></tr><tr><td style="text-align: left"> <code class="code">WrappedMap</code> </td><td style="text-align: left"> Put this on a method or parameter when you want to marshal or unmarshal a map of JAXB objects. </td></tr><tr><td style="text-align: left"> <code class="code">XmlHeader</code> </td><td style="text-align: left"> Sets an XML header for the returned document. </td></tr><tr><td style="text-align: left"> <code class="code">BadgerFish</code> </td><td style="text-align: left"> A JSONConfig. </td></tr><tr><td style="text-align: left"> <code class="code">Mapped</code> </td><td style="text-align: left"> A JSONConfig. </td></tr><tr><td style="text-align: left"> <code class="code">XmlNsMap</code> </td><td style="text-align: left"> A JSONToXml. </td></tr><tr><td style="text-align: left"> <code class="code">MultipartForm</code> </td><td style="text-align: left"> This can be used as a value object for incoming/outgoing request/responses of the multipart/form-data mime type. </td></tr><tr><td style="text-align: left"> <code class="code">PartType</code> </td><td style="text-align: left"> Must be used in conjunction with Multipart providers when writing out a List or Map as a multipart/* type. </td></tr><tr><td style="text-align: left"> <code class="code">XopWithMultipartRelated</code> </td><td style="text-align: left"> This annotation can be used to process/produce incoming/outgoing XOP messages (packaged as multipart/related) to/from JAXB annotated objects. </td></tr><tr><td style="text-align: left"> <code class="code">After</code> </td><td style="text-align: left"> Used to add an expiration attribute when signing or as a stale check for verification. </td></tr><tr><td style="text-align: left"> <code class="code">Signed</code> </td><td style="text-align: left"> Convenience annotation that triggers the signing of a request or response using the DOSETA specification. </td></tr><tr><td style="text-align: left"> <code class="code">Verify</code> </td><td style="text-align: left"> Verification of input signature specified in a signature header. </td></tr><tr><td style="text-align: left"> <code class="code">Path</code> </td><td style="text-align: left"> This must exist either in the class or resource method. If it exists in both, the relative path to the resource method is a concatenation of the class and method. </td></tr><tr><td style="text-align: left"> <code class="code">PathParam</code> </td><td style="text-align: left"> Allows you to map variable URI path fragments into a method call. </td></tr><tr><td style="text-align: left"> <code class="code">QueryParam</code> </td><td style="text-align: left"> Allows you to map URI query string parameter or URL form encoded parameter to the method invocation. </td></tr><tr><td style="text-align: left"> <code class="code">CookieParam</code> </td><td style="text-align: left"> Allows you to specify the value of a cookie or object representation of an HTTP request cookie into the method invocation. </td></tr><tr><td style="text-align: left"> <code class="code">DefaultValue</code> </td><td style="text-align: left"> Can be combined with the other @*Param annotations to define a default value when the HTTP request item does not exist. </td></tr><tr><td style="text-align: left"> <code class="code">Context</code> </td><td style="text-align: left"> Allows you to specify instances of javax.ws.rs.core.HttpHeaders, javax.ws.rs.core.UriInfo, javax.ws.rs.core.Request, javax.servlet.HttpServletRequest, javax.servlet.HttpServletResponse, and javax.ws.rs.core.SecurityContext objects. </td></tr><tr><td style="text-align: left"> <code class="code">Encoded</code> </td><td style="text-align: left"> Can be used on a class, method, or param. By default, inject @PathParam and @QueryParams are decoded. By adding the @Encoded annotation, the value of these params are provided in encoded form. </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5368-762762+%5BLatest%5D&amp;comment=Title%3A+RESTEasy+Defined+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5368-762762+24+Jun+2015+03%3A56+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasy_Configuration">
      ⁠</a>15.5. RESTEasy Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="RESTEasy_Configuration_Parameters">
      ⁠</a>15.5.1. RESTEasy Configuration Parameters</h2></div></div></div><div class="table"><a id="idm140550810921872">
      ⁠</a><p class="title"><strong>Table 15.2. Elements</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Elements"><colgroup><col width="40%" style="text-align: left" class="c1"/><col width="20%" style="text-align: left" class="c2"/><col width="40%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Option Name </th><th style="text-align: left"> Default Value </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> resteasy.servlet.mapping.prefix </td><td style="text-align: left"> No default </td><td style="text-align: left"> If the url-pattern for the Resteasy servlet-mapping is not /*. </td></tr><tr><td style="text-align: left"> resteasy.scan </td><td style="text-align: left"> false </td><td style="text-align: left"> Automatically scan WEB-INF/lib jars and WEB-INF/classes directory for both @Provider and JAX-RS resource classes (@Path, @GET, @POST etc..) and register them. </td></tr><tr><td style="text-align: left"> resteasy.scan.providers </td><td style="text-align: left"> false </td><td style="text-align: left"> Scan for @Provider classes and register them. </td></tr><tr><td style="text-align: left"> resteasy.scan.resources </td><td style="text-align: left"> false </td><td style="text-align: left"> Scan for JAX-RS resource classes. </td></tr><tr><td style="text-align: left"> resteasy.providers </td><td style="text-align: left"> no default </td><td style="text-align: left"> A comma delimited list of fully qualified @Provider class names you want to register. </td></tr><tr><td style="text-align: left"> resteasy.use.builtin.providers </td><td style="text-align: left"> true </td><td style="text-align: left"> Whether or not to register default, built-in @Provider classes. </td></tr><tr><td style="text-align: left"> resteasy.resources </td><td style="text-align: left"> No default </td><td style="text-align: left"> A comma delimited list of fully qualified JAX-RS resource class names you want to register. </td></tr><tr><td style="text-align: left"> resteasy.jndi.resources </td><td style="text-align: left"> No default </td><td style="text-align: left"> A comma delimited list of JNDI names which reference objects you want to register as JAX-RS resources. </td></tr><tr><td style="text-align: left"> javax.ws.rs.Application </td><td style="text-align: left"> No default </td><td style="text-align: left"> Fully qualified name of Application class to bootstrap in a spec portable way. </td></tr><tr><td style="text-align: left"> resteasy.media.type.mappings </td><td style="text-align: left"> No default </td><td style="text-align: left"> Replaces the need for an Accept header by mapping file name extensions (like .xml or .txt) to a media type. Used when the client is unable to use a Accept header to choose a representation (i.e. a browser). </td></tr><tr><td style="text-align: left"> resteasy.language.mappings </td><td style="text-align: left"> No default </td><td style="text-align: left"> Replaces the need for an Accept-Language header by mapping file name extensions (like .en or .fr) to a language. Used when the client is unable to use a Accept-Language header to choose a language (i.e. a browser). </td></tr><tr><td style="text-align: left"> resteasy.document.expand.entity.references </td><td style="text-align: left"> false </td><td style="text-align: left"> Whether to expand external entities or replace them with an empty string. In JBoss EAP 6, this parameter defaults to <code class="literal">false</code>, so it replaces them with an empty string. </td></tr><tr><td style="text-align: left"> resteasy.document.secure.processing.feature </td><td style="text-align: left"> true </td><td style="text-align: left"> Impose security constraints in processing org.w3c.dom.Document documents and JAXB object representations. </td></tr><tr><td style="text-align: left"> resteasy.document.secure.disableDTDs </td><td style="text-align: left"> true </td><td style="text-align: left"> Prohibit DTDs in org.w3c.dom.Document documents and JAXB object representations. </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			In a Servlet 3.0 container, the <code class="code">resteasy.scan.*</code> configurations in the <code class="filename">web.xml</code> file are ignored, and all JAX-RS annotated components will be automatically scanned.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5555-741843+%5BLatest%5D&amp;comment=Title%3A+RESTEasy+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5555-741843+06+Feb+2015+04%3A04+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JAX-RS_Web_Service_Security">
      ⁠</a>15.6. JAX-RS Web Service Security</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enable_Role-Based_Security_for_a_RESTEasy_JAX-RS_Web_Service">
      ⁠</a>15.6.1. Enable Role-Based Security for a RESTEasy JAX-RS Web Service</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			RESTEasy supports the @RolesAllowed, @PermitAll, and @DenyAll annotations on JAX-RS methods. However, it does not recognize these annotations by default. Follow these steps to configure the <code class="filename">web.xml</code> file and enable role-based security.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Changing the default values of the following RESTEasy parameters may cause RESTEasy applications to be potentially vulnerable against XXE attacks.
		</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
					resteasy.document.expand.entity.references
				</div></li><li class="listitem"><div class="para">
					resteasy.document.secure.processing.feature
				</div></li><li class="listitem"><div class="para">
					resteasy.document.secure.disableDTDs
				</div></li></ul></div><div class="para">
			For more information about these parameters, see <a class="xref" href="chap-JAX-RS_Web_Services.html#RESTEasy_Configuration_Parameters">Section 15.5.1, “RESTEasy Configuration Parameters”</a>.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Do not activate role-based security if the application uses EJBs. The EJB container will provide the functionality, instead of RESTEasy.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550781713616">
      ⁠</a><p class="title"><strong>Procedure 15.1. Enable Role-Based Security for a RESTEasy JAX-RS Web Service</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename">web.xml</code> file for the application in a text editor.
			</div></li><li class="step"><div class="para">
				Add the following &lt;context-param&gt; to the file, within the <code class="code">web-app</code> tags:
			</div><pre class="screen">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;
</pre></li><li class="step"><div class="para">
				Declare all roles used within the RESTEasy JAX-RS WAR file, using the &lt;security-role&gt; tags:
			</div><pre class="screen">&lt;security-role&gt;
    &lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
&lt;/security-role&gt;
&lt;security-role&gt;
    &lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
&lt;/security-role&gt;</pre></li><li class="step"><div class="para">
				Authorize access to all URLs handled by the JAX-RS runtime for all roles:
			</div><pre class="screen">&lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
	&lt;web-resource-name&gt;Resteasy&lt;/web-resource-name&gt;
	&lt;url-pattern&gt;/<em class="replaceable">PATH</em>&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
	&lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
	&lt;role-name&gt;<em class="replaceable">ROLE_NAME</em>&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</pre></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			Role-based security has been enabled within the application, with a set of defined roles.
		</div><div class="example"><a id="idm140550732093600">
      ⁠</a><p class="title"><strong>Example 15.1. Example Role-Based Security Configuration</strong></p><div class="example-contents"><pre class="programlisting">
&lt;web-app&gt;

    &lt;context-param&gt;
	&lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;
	&lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;servlet-mapping&gt;
	&lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;security-constraint&gt;
	&lt;web-resource-collection&gt;
	    &lt;web-resource-name&gt;Resteasy&lt;/web-resource-name&gt;
	    &lt;url-pattern&gt;/security&lt;/url-pattern&gt;
	&lt;/web-resource-collection&gt;
	&lt;auth-constraint&gt;
	    &lt;role-name&gt;admin&lt;/role-name&gt;
	    &lt;role-name&gt;user&lt;/role-name&gt;
	&lt;/auth-constraint&gt;
    &lt;/security-constraint&gt;

    &lt;security-role&gt;
	&lt;role-name&gt;admin&lt;/role-name&gt;
    &lt;/security-role&gt;
    &lt;security-role&gt;
	&lt;role-name&gt;user&lt;/role-name&gt;
    &lt;/security-role&gt;
    
&lt;/web-app&gt;
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5945-781125+%5BLatest%5D&amp;comment=Title%3A+Enable+Role-Based+Security+for+a+RESTEasy+JAX-RS+Web+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5945-781125+27+Jan+2017+11%3A51+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Secure_a_JAX-RS_Web_Service_using_Annotations">
      ⁠</a>15.6.2. Secure a JAX-RS Web Service using Annotations</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers the steps to secure a JAX-RS web service using the supported security annotations
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550776010960">
      ⁠</a><p class="title"><strong>Procedure 15.2. Secure a JAX-RS Web Service using Supported Security Annotations</strong></p><ol class="1"><li class="step"><div class="para">
				Enable role-based security. For more information, refer to: <a class="xref" href="chap-JAX-RS_Web_Services.html#Enable_Role-Based_Security_for_a_RESTEasy_JAX-RS_Web_Service">Section 15.6.1, “Enable Role-Based Security for a RESTEasy JAX-RS Web Service”</a>
			</div></li><li class="step"><div class="para">
				Add security annotations to the JAX-RS web service. RESTEasy supports the following annotations:
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">@RolesAllowed</span></dt><dd><div class="para">
							Defines which roles can access the method. All roles should be defined in the <code class="filename">web.xml</code> file.
						</div></dd><dt><span class="term">@PermitAll</span></dt><dd><div class="para">
							Allows all roles defined in the <code class="filename">web.xml</code> file to access the method.
						</div></dd><dt><span class="term">@DenyAll</span></dt><dd><div class="para">
							Denies all access to the method.
						</div></dd></dl></div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6095-591722+%5BLatest%5D&amp;comment=Title%3A+Secure+a+JAX-RS+Web+Service+using+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6095-591722+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Exception_Handling">
      ⁠</a>15.7. Exception Handling</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_an_Exception_Mapper">
      ⁠</a>15.7.1. Create an Exception Mapper</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Exception mappers are custom, application provided components that catch thrown exceptions and write specific HTTP responses.
		</div><div class="example"><a id="idm140550813437920">
      ⁠</a><p class="title"><strong>Example 15.2. Exception Mapper</strong></p><div class="example-contents"><div class="para">
			An exception mapper is a class that is annotated with the @Provider annotation, and implements the <code class="methodname">ExceptionMapper</code> interface.
		</div><div class="para">
			An example exception mapper is shown below.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Provider
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> EJBExceptionMapper <span xmlns="" class="perl_Keyword">implements</span> ExceptionMapper&lt;javax.<span xmlns="" class="perl_Function">ejb</span>.<span xmlns="" class="perl_Function">EJBException</span>&gt;
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>    Response <span xmlns="" class="perl_Function">toResponse</span>(EJBException exception) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">return</span> Response.<span xmlns="" class="perl_Function">status</span>(<span xmlns="" class="perl_Float">500</span>).<span xmlns="" class="perl_Function">build</span>();
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
</pre></div></div><div class="para">
		To register an exception mapper, list it in the <code class="filename">web.xml</code> file under the <code class="code">resteasy.providers</code> context-param, or register it programmatically through the <code class="code">ResteasyProviderFactory</code> class.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6097-591722+%5BLatest%5D&amp;comment=Title%3A+Create+an+Exception+Mapper%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6097-591722+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="RESTEasy_Internally_Thrown_Exceptions">
      ⁠</a>15.7.2. RESTEasy Internally Thrown Exceptions</h2></div></div></div><div class="table"><a id="idm140550772206112">
      ⁠</a><p class="title"><strong>Table 15.3. Exception List</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Exception List"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="33%" style="text-align: left" class="c2"/><col width="33%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Exception </th><th style="text-align: left"> HTTP Code </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> BadRequestException </td><td style="text-align: left"> 400 </td><td style="text-align: left"> Bad Request. The request was not formatted correctly, or there was a problem processing the request input. </td></tr><tr><td style="text-align: left"> UnauthorizedException </td><td style="text-align: left"> 401 </td><td style="text-align: left"> Unauthorized. Security exception thrown if you are using RESTEasy's annotation-based role-based security. </td></tr><tr><td style="text-align: left"> InternalServerErrorException </td><td style="text-align: left"> 500 </td><td style="text-align: left"> Internal Server Error. </td></tr><tr><td style="text-align: left"> MethodNotAllowedException </td><td style="text-align: left"> 405 </td><td style="text-align: left"> There is no JAX-RS method for the resource that can handle the invoked HTTP operation. </td></tr><tr><td style="text-align: left"> NotAcceptableException </td><td style="text-align: left"> 406 </td><td style="text-align: left"> There is no JAX-RS method that can produce the media types listed in the Accept header. </td></tr><tr><td style="text-align: left"> NotFoundException </td><td style="text-align: left"> 404 </td><td style="text-align: left"> There is no JAX-RS method that serves the request path/resource. </td></tr><tr><td style="text-align: left"> ReaderException </td><td style="text-align: left"> 400 </td><td style="text-align: left"> All exceptions thrown from <code class="methodname">MessageBodyReaders</code> are wrapped within this exception. If there is no <code class="methodname">ExceptionMapper</code> for the wrapped exception, or if the exception is not a <code class="methodname">WebApplicationException</code>, then RESTEasy will return a 400 code by default. </td></tr><tr><td style="text-align: left"> WriterException </td><td style="text-align: left"> 500 </td><td style="text-align: left"> All exceptions thrown from <code class="methodname">MessageBodyWriters</code> are wrapped within this exception. If there is no <code class="methodname">ExceptionMapper</code> for the wrapped exception, or if the exception is not a <code class="methodname">WebApplicationException</code>, then RESTEasy will return a 400 code by default. </td></tr><tr><td style="text-align: left"> JAXBUnmarshalException </td><td style="text-align: left"> 400 </td><td style="text-align: left"> The JAXB providers (XML and Jettison) throw this exception on reads. They may be wrapping JAXBExceptions. This class extends <code class="methodname">ReaderException</code>. </td></tr><tr><td style="text-align: left"> JAXBMarshalException </td><td style="text-align: left"> 500 </td><td style="text-align: left"> The JAXB providers (XML and Jettison) throw this exception on writes. They may be wrapping JAXBExceptions. This class extends <code class="methodname">WriterException</code>. </td></tr><tr><td style="text-align: left"> ApplicationException </td><td style="text-align: left"> N/A </td><td style="text-align: left"> Wraps all exceptions thrown from application code. It functions in the same way as <code class="methodname">InvocationTargetException</code>. If there is an ExceptionMapper for wrapped exception, then that is used to handle the request. </td></tr><tr><td style="text-align: left"> Failure </td><td style="text-align: left"> N/A </td><td style="text-align: left"> Internal RESTEasy error. Not logged. </td></tr><tr><td style="text-align: left"> LoggableFailure </td><td style="text-align: left"> N/A </td><td style="text-align: left"> Internal RESTEasy error. Logged. </td></tr><tr><td style="text-align: left"> DefaultOptionsMethodException </td><td style="text-align: left"> N/A </td><td style="text-align: left"> If the user invokes <code class="literal">HTTP OPTIONS</code> and no JAX-RS method for it, RESTEasy provides a default behavior by throwing this exception. </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2811-591651+%5BLatest%5D&amp;comment=Title%3A+RESTEasy+Internally+Thrown+Exceptions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2811-591651+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasy_Interceptors">
      ⁠</a>15.8. RESTEasy Interceptors</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Intercept_JAX-RS_Invocations">
      ⁠</a>15.8.1. Intercept JAX-RS Invocations</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			RESTEasy can intercept JAX-RS invocations and route them through listener-like objects called interceptors. This topic covers descriptions of the four types of interceptors.
		</div><div class="example"><a id="idm140550738047680">
      ⁠</a><p class="title"><strong>Example 15.3. MessageBodyReader/Writer Interceptors</strong></p><div class="example-contents"><div class="para">
			MessageBodyReaderInterceptors and MessageBodyWriterInterceptors can be used on the either the server or client side. They are annotated with <code class="code">@Provider</code>, as well as either <code class="code">@ServerInterceptor</code> or <code class="code">@ClientInterceptor</code> so that RESTEasy knows whether or not to add them to the interceptor list.
		</div><div class="para">
			These interceptors wrap around the invocation of <code class="code">MessageBodyReader.readFrom()</code> or <code class="code">MessageBodyWriter.writeTo()</code>. They can be used to wrap the Output or Input streams.
		</div><div class="para">
			RESTEasy GZIP support has interceptors that create and override the default Output and Input streams with a GzipOutputStream or GzipInputStream so that gzip encoding can work. They can also be used to append headers to the response, or the outgoing request on the client side.
		</div><pre class="programlisting">
public interface MessageBodyReaderInterceptor
  {
     Object read(MessageBodyReaderContext context) throws IOException, WebApplicationException;

  }

public interface MessageBodyWriterInterceptor
  {
     void write(MessageBodyWriterContext context) throws IOException, WebApplicationException;

  }
</pre><div class="para">
			The interceptors and the MessageBodyReader or Writer is invoked in one big Java call stack. <code class="code">MessageBodyReaderContext.proceed()</code> or <code class="code">MessageBodyWriterContext.proceed()</code> is called in order to go to the next interceptor or, if there are no more interceptors to invoke, the <code class="code">readFrom()</code> or <code class="code">writeTo()</code> method of the MessageBodyReader or MessageBodyWriter. This wrapping allows objects to be modified before they get to the Reader or Writer, and then cleaned up after <code class="code">proceed()</code> returns.
		</div><div class="para">
			The example below is a server side interceptor, that adds a header value to the response.
		</div><pre class="programlisting">
@Provider
@ServerInterceptor
public class MyHeaderDecorator implements MessageBodyWriterInterceptor {

    public void write(MessageBodyWriterContext context) throws IOException, WebApplicationException
    {
       context.getHeaders().add("My-Header", "custom");
       context.proceed();
    }
}
</pre></div></div><div class="example"><a id="idm140550785807136">
      ⁠</a><p class="title"><strong>Example 15.4. PreProcessInterceptor</strong></p><div class="example-contents"><div class="para">
			PreProcessInterceptors run after a JAX-RS resource method is found to invoke on, but before the actual invocation happens. They are annotated with @ServerInterceptor, and run in sequence.
		</div><div class="para">
			These interfaces are only usable on the server. They can be used to implement security features, or to handle the Java request. The RESTEasy security implementation uses this type of interceptor to abort requests before they occur if the user does not pass authorization. The RESTEasy caching framework also uses this to return cached responses to avoid invoking methods again.
		</div><pre class="programlisting">public interface PreProcessInterceptor
    {
       ServerResponse preProcess(HttpRequest request, ResourceMethod method) throws Failure, WebApplicationException;
    }
</pre><div class="para">
			If the <code class="code">preProcess()</code> method returns a ServerResponse then the underlying JAX-RS method will not get invoked, and the runtime will process the response and return to the client. If the <code class="code">preProcess()</code> method does not return a ServerResponse, the underlying JAX-RS method will be invoked.
		</div></div></div><div class="example"><a id="idm140550766131728">
      ⁠</a><p class="title"><strong>Example 15.5. PostProcessInterceptors</strong></p><div class="example-contents"><div class="para">
			PostProcessInterceptors run after the JAX-RS method was invoked, but before MessageBodyWriters are invoked. They are used if a response header needs to be set when a MessageBodyWriter may not be invoked.
		</div><div class="para">
			They can only be used on the server side. They do not wrap anything, and are invoked in sequence.
		</div><pre class="programlisting">
public interface PostProcessInterceptor
  {
    void postProcess(ServerResponse response);
  }
</pre></div></div><div class="example"><a id="idm140550723567056">
      ⁠</a><p class="title"><strong>Example 15.6. ClientExecutionInterceptors</strong></p><div class="example-contents"><div class="para">
			ClientExecutionInterceptors are only usable on the client side. They wrap around the HTTP invocation that goes to the server. They must be annotated with <code class="code">@ClientInterceptor</code> and <code class="code">@Provider</code>. These interceptors run after the MessageBodyWriter, and after the ClientRequest has been built on the client side.
		</div><div class="para">
			RESTEasy GZIP support uses ClientExecutionInterceptors to set the Accept header to contain "gzip, deflate" before the request goes out. The RESTEasy client cache uses it to check to see if its cache contains the resource before going over the wire.
		</div><pre class="programlisting">
public interface ClientExecutionInterceptor
{
  ClientResponse execute(ClientExecutionContext ctx) throws Exception;
}

public interface ClientExecutionContext
{
  ClientRequest getRequest();

  ClientResponse proceed() throws Exception;
}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2924-591651+%5BLatest%5D&amp;comment=Title%3A+Intercept+JAX-RS+Invocations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2924-591651+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Bind_an_Interceptor_to_a_JAX-RS_Method">
      ⁠</a>15.8.2. Bind an Interceptor to a JAX-RS Method</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			All registered interceptors are invoked for every request by default. The <code class="methodname"> AcceptedByMethod</code> interface can be implemented to fine tune this behavior.
		</div><div class="example"><a id="idm140550782005984">
      ⁠</a><p class="title"><strong>Example 15.7. Binding Interceptors Example</strong></p><div class="example-contents"><div class="para">
			RESTEasy will call the <code class="methodname"> accept()</code> method for interceptors that implement the <code class="methodname"> AcceptedByMethod</code> interface. If the method returns true, the interceptor will be added to the JAX-RS method's call chain; otherwise it will be ignored for that method.
		</div><div class="para">
			In the example below, <code class="methodname"> accept()</code> determines if the @GET annotation is present on the JAX-RS method. If it is, the interceptor will be applied to the method's call chain.
		</div><pre class="programlisting">
@Provider
@ServerInterceptor
public class MyHeaderDecorator implements MessageBodyWriterInterceptor, AcceptedByMethod {

    public boolean accept(Class declaring, Method method) {
       return method.isAnnotationPresent(GET.class);
    }

   public void write(MessageBodyWriterContext context) throws IOException, WebApplicationException
   {
      context.getHeaders().add("My-Header", "custom");
      context.proceed();
   }
}
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2927-591651+%5BLatest%5D&amp;comment=Title%3A+Bind+an+Interceptor+to+a+JAX-RS+Method%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2927-591651+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Register_an_Interceptor">
      ⁠</a>15.8.3. Register an Interceptor</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers how to register a RESTEasy JAX-RS interceptor in an application.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550718813440">
      ⁠</a><p class="title"><strong>Procedure 15.3. Register an Interceptor</strong></p><ul><li class="step"><div class="para">
				To register an interceptor, list it in the <code class="filename">web.xml</code> file under the <code class="code">resteasy.providers</code> context-param, or return it as a class or as an object in the <code class="code">Application.getClasses()</code> or <code class="code">Application.getSingletons()</code> method.
			</div></li></ul></div><div class="example"><a id="idm140550774145456">
      ⁠</a><p class="title"><strong>Example 15.8. Registering an interceptor by listing it in the <code class="filename">web.xml file</code>:</strong></p><div class="example-contents"><div class="para">
			
<pre class="programlisting">&lt;context-param&gt;
	&lt;param-name&gt;resteasy.providers&lt;/param-name&gt;
	&lt;param-value&gt;my.app.CustomInterceptor&lt;/paramvalue&gt;
&lt;/context-param&gt;</pre>

		</div></div></div><div class="example"><a id="idm140550781555584">
      ⁠</a><p class="title"><strong>Example 15.9. Registering an interceptor using the Application.getClasses() method:</strong></p><div class="example-contents"><div class="para">
			
<pre class="programlisting">package org.jboss.resteasy.example;

import javax.ws.rs.core.Application;
import java.util.HashSet;
import java.util.Set;

public class MyApp extends Application {

  public java.util.Set&lt;java.lang.Class&lt;?&gt;&gt; getClasses() {
    Set&lt;Class&lt;?&gt;&gt; resources = new HashSet&lt;Class&lt;?&gt;&gt;();
    resources.add(MyResource.class);
    resources.add(MyProvider.class);
    return resources;
  }
}</pre>

		</div></div></div><div class="example"><a id="idm140550718324768">
      ⁠</a><p class="title"><strong>Example 15.10. Registering an interceptor using the Application.getSingletons() method:</strong></p><div class="example-contents"><div class="para">
			
<pre class="programlisting">package org.jboss.resteasy.example;

import javax.ws.rs.core.Application;
import java.util.HashSet;
import java.util.Set;

public class MyApp extends Application {

   protected Set&lt;Object&gt; singletons = new HashSet&lt;Object&gt;();

   public PubSubApplication() {
     singletons.add(new MyResource());
     singletons.add(new MyProvider());
   }
   
   @Override
   public Set&lt;Object&gt; getSingletons() {
     return singletons;
   }
}</pre>

		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2935-769863+%5BLatest%5D&amp;comment=Title%3A+Register+an+Interceptor%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2935-769863+04+Sep+2015+05%3A17+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Interceptor_Precedence_Families">
      ⁠</a>15.8.4. Interceptor Precedence Families</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="About_Interceptor_Precedence_Families">
      ⁠</a>15.8.4.1. About Interceptor Precedence Families</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Interceptors can be sensitive to the order they are invoked. RESTEasy groups interceptors in families to make ordering them simpler. This reference topic covers the built-in interceptor precedence families and the interceptors associated with each.
		</div><div class="para">
		There are five predefined families. They are invoked in the following order:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">SECURITY</span></dt><dd><div class="para">
					SECURITY interceptors are usually PreProcessInterceptors. They are invoked first because as little as possible should be done before the invocation is authorized.
				</div></dd><dt><span class="term">HEADER_DECORATOR</span></dt><dd><div class="para">
					HEADER_DECORATOR interceptors add headers to a response or an outgoing request. They follow the security interceptors as the added headers may affect the behavior of other interceptor families.
				</div></dd><dt><span class="term">ENCODER</span></dt><dd><div class="para">
					ENCODER interceptors change the OutputStream. For example, the GZIP interceptor creates a GZIPOutputStream to wrap the real OutputStream for compression.
				</div></dd><dt><span class="term">REDIRECT</span></dt><dd><div class="para">
					REDIRECT interceptors are usually used in PreProcessInterceptors, as they may reroute the request and totally bypass the JAX-RS method.
				</div></dd><dt><span class="term">DECODER</span></dt><dd><div class="para">
					DECODER interceptors wrap the InputStream. For example, the GZIP interceptor decoder wraps the InputStream in a GzipInputStream instance.
				</div></dd></dl></div><div class="para">
		For complete type safety, there are convenience annotations in the <code class="code">org.jboss.resteasy.annotations.interception</code> package: <code class="code">@DecoredPrecedence</code>, <code class="code">@EncoderPrecedence</code>, <code class="code">@HeaderDecoratorPrecedence</code>, <code class="code">@RedirectPrecedence</code>, <code class="code">@SecurityPrecedence</code>. Use these instead of the <code class="code">@Precedence</code> annotation. For more information, refer <a class="xref" href="chap-JAX-RS_Web_Services.html#RESTEasy_Defined_Annotations">Section 15.4, “RESTEasy Defined Annotations”</a>. 
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6092-743183+%5BLatest%5D&amp;comment=Title%3A+About+Interceptor+Precedence+Families%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6092-743183+16+Feb+2015+00%3A38+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Define_a_Custom_Interceptor_Precedence_Family">
      ⁠</a>15.8.4.2. Define a Custom Interceptor Precedence Family</h3></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Custom precedence families can be created and registered in the <code class="filename">web.xml</code> file. This topic covers examples of the context params available for defining interceptor precedence families.
		</div><div class="para">
		There are three context params that can be used to define a new precedence family.
	</div><div class="example"><a id="idm140550774557136">
      ⁠</a><p class="title"><strong>Example 15.11. resteasy.append.interceptor.precedence</strong></p><div class="example-contents"><div class="para">
			The <code class="code">resteasy.append.interceptor.precedence</code> context param appends the new precedence family to the default precedence family list.
		</div><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.append.interceptor.precedence&lt;/param-name&gt;
    &lt;param-value&gt;CUSTOM_PRECEDENCE_FAMILY&lt;/param-value&gt;
&lt;/context-param&gt;
</pre></div></div><div class="example"><a id="idm140550779028080">
      ⁠</a><p class="title"><strong>Example 15.12. resteasy.interceptor.before.precedence</strong></p><div class="example-contents"><div class="para">
			The <code class="code">resteasy.interceptor.before.precedence</code> context param defines the default precedence family that the custom family is executed before. The parameter value takes the form <em class="replaceable">DEFAULT_PRECEDENCE_FAMILY</em>/<em class="replaceable">CUSTOM_PRECEDENCE_FAMILY</em>, delimited by a ':'.
		</div><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.interceptor.before.precedence&lt;/param-name&gt;
    &lt;param-value&gt;DEFAULT_PRECEDENCE_FAMILY : CUSTOM_PRECEDENCE_FAMILY&lt;/param-value&gt;
&lt;/context-param&gt;
</pre></div></div><div class="example"><a id="idm140550731631920">
      ⁠</a><p class="title"><strong>Example 15.13. resteasy.interceptor.after.precedence</strong></p><div class="example-contents"><div class="para">
			The <code class="code">resteasy.interceptor.after.precedence</code> context param defines the default precedence family that the custom family is executed after. The parameter value takes the form <em class="replaceable">DEFAULT_PRECEDENCE_FAMILY</em>/<em class="replaceable">CUSTOM_PRECEDENCE_FAMILY</em>, delimited by a <code class="literal">:</code>.
		</div><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.interceptor.after.precedence&lt;/param-name&gt;
    &lt;param-value&gt;DEFAULT_PRECEDENCE_FAMILY : CUSTOM_PRECEDENCE_FAMILY&lt;/param-value&gt;
&lt;/context-param&gt;
</pre></div></div><div class="para">
		Precedence families are applied to interceptors using the @Precedence annotation. For the default precedence family list, refer to: <a class="xref" href="chap-JAX-RS_Web_Services.html#About_Interceptor_Precedence_Families">Section 15.8.4.1, “About Interceptor Precedence Families”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2939-591651+%5BLatest%5D&amp;comment=Title%3A+Define+a+Custom+Interceptor+Precedence+Family%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2939-591651+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-String_Based_Annotations">
      ⁠</a>15.9. String Based Annotations</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Convert_String_Based_Param_Annotations_to_Objects">
      ⁠</a>15.9.1. Convert String Based @*Param Annotations to Objects</h2></div></div></div><div class="para">
		JAX-RS <code class="code">@*Param</code> annotations, including @QueryParam, @MatrixParam, @HeaderParam, @PathParam, and @FormParam, are represented as strings in a raw HTTP request. These types of injected parameters can be converted to objects if these objects have a valueOf(String) static method or a constructor that takes one String parameter.
	</div><div class="para">
		RESTEasy provides two proprietary <code class="code">@Provider</code> interfaces to handle this conversion for classes that don't have either a <code class="code">valueOf(String)</code> static method, or a string constructor.
	</div><div class="example"><a id="idm140550787641664">
      ⁠</a><p class="title"><strong>Example 15.14. StringConverter</strong></p><div class="example-contents"><div class="para">
			The StringConverter interface is implemented to provide custom string marshalling. It is registered under the resteasy.providers context-param in the web.xml file. It can also be registered manually by calling the ResteasyProviderFactory.addStringConverter() method.
		</div><div class="para">
			The example below is a simple example of using StringConverter.
		</div><pre class="programlisting">import org.jboss.resteasy.client.ProxyFactory;
import org.jboss.resteasy.spi.StringConverter;
import org.jboss.resteasy.test.BaseResourceTest;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import javax.ws.rs.HeaderParam;
import javax.ws.rs.MatrixParam;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.QueryParam;
import javax.ws.rs.ext.Provider;

public class StringConverterTest extends BaseResourceTest
{
  public static class POJO
  {
     private String name;

     public String getName()
     {
	return name;
     }

     public void setName(String name)
     {
	this.name = name;
     }
  }

  @Provider
  public static class POJOConverter implements StringConverter&lt;POJO&gt;
  {
     public POJO fromString(String str)
     {
	System.out.println("FROM STRNG: " + str);
	POJO pojo = new POJO();
	pojo.setName(str);
	return pojo;
     }

     public String toString(POJO value)
     {
	return value.getName();
     }
  }

  @Path("/")
  public static class MyResource
  {
     @Path("{pojo}")
     @PUT
     public void put(@QueryParam("pojo")POJO q, @PathParam("pojo")POJO pp,
		     @MatrixParam("pojo")POJO mp, @HeaderParam("pojo")POJO hp)
     {
	Assert.assertEquals(q.getName(), "pojo");
	Assert.assertEquals(pp.getName(), "pojo");
	Assert.assertEquals(mp.getName(), "pojo");
	Assert.assertEquals(hp.getName(), "pojo");
     }
  }

  @Before
  public void setUp() throws Exception
  {
     dispatcher.getProviderFactory().addStringConverter(POJOConverter.class);
     dispatcher.getRegistry().addPerRequestResource(MyResource.class);
  }

  @Path("/")
  public static interface MyClient
  {
     @Path("{pojo}")
     @PUT
     void put(@QueryParam("pojo")POJO q, @PathParam("pojo")POJO pp,
	      @MatrixParam("pojo")POJO mp, @HeaderParam("pojo")POJO hp);
  }

  @Test
  public void testIt() throws Exception
  {
     MyClient client = ProxyFactory.create(MyClient.class, "http://localhost:8081");
     POJO pojo = new POJO();
     pojo.setName("pojo");
     client.put(pojo, pojo, pojo, pojo);
  }
}
</pre></div></div><div class="example"><a id="idm140550778514144">
      ⁠</a><p class="title"><strong>Example 15.15. StringParameterUnmarshaller</strong></p><div class="example-contents"><div class="para">
			The <code class="code">StringParameterUnmarshaller</code> interface is sensitive to the annotations placed on the parameter or field you are injecting into. It is created per injector. The setAnnotations() method is called by resteasy to initialize the unmarshaller.
		</div><div class="para">
			This interface can be added by creating and registering a provider that implements the interface. It can also be bound using a meta-annotation called <code class="code"> org.jboss.resteasy.annotations.StringsParameterUnmarshallerBinder</code>.
		</div><div class="para">
			The example below formats a <code class="code">java.util.Date</code> based @PathParam.
		</div><pre class="programlisting">public class StringParamUnmarshallerTest extends BaseResourceTest
{
   @Retention(RetentionPolicy.RUNTIME)
   @StringParameterUnmarshallerBinder(DateFormatter.class)
   public @interface DateFormat
   {
      String value();
   }

   public static class DateFormatter implements StringParameterUnmarshaller&lt;Date&gt;
   {
      private SimpleDateFormat formatter;

      public void setAnnotations(Annotation[] annotations)
      {
         DateFormat format = FindAnnotation.findAnnotation(annotations, DateFormat.class);
         formatter = new SimpleDateFormat(format.value());
      }

      public Date fromString(String str)
      {
         try
         {
            return formatter.parse(str);
         }
         catch (ParseException e)
         {
            throw new RuntimeException(e);
         }
      }
   }

   @Path("/datetest")
   public static class Service
   {
      @GET
      @Produces("text/plain")
      @Path("/{date}")
      public String get(@PathParam("date") @DateFormat("MM-dd-yyyy") Date date)
      {
         System.out.println(date);
         Calendar c = Calendar.getInstance();
         c.setTime(date);
         Assert.assertEquals(3, c.get(Calendar.MONTH));
         Assert.assertEquals(23, c.get(Calendar.DAY_OF_MONTH));
         Assert.assertEquals(1977, c.get(Calendar.YEAR));
         return date.toString();
      }
   }

   @BeforeClass
   public static void setup() throws Exception
   {
      addPerRequestResource(Service.class);
   }

   @Test
   public void testMe() throws Exception
   {
      ClientRequest request = new ClientRequest(generateURL("/datetest/04-23-1977"));
      System.out.println(request.getTarget(String.class));
   }
}</pre><div class="para">
			It defines a new annotation called @DateFormat. The annotation is annotated with the meta-annotation StringParameterUnmarshallerBinder with a reference to the DateFormater classes.
		</div><div class="para">
			The Service.get() method has a @PathParam parameter that is also annotated with @DateFormat. The application of @DateFormat triggers the binding of the DateFormatter. The DateFormatter will now be run to unmarshal the path parameter into the date parameter of the get() method.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2792-741817+%5BLatest%5D&amp;comment=Title%3A+Convert+String+Based+%40*Param+Annotations+to+Objects%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2792-741817+06+Feb+2015+01%3A02+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-Configure_File_Extensions">
      ⁠</a>15.10. Configure File Extensions</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Map_File_Extensions_to_Media_Types_in_the_webxml_File">
      ⁠</a>15.10.1. Map File Extensions to Media Types in the web.xml File</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Some clients, like browsers, cannot use the Accept and Accept-Language headers to negotiate the representation's media type or language. RESTEasy can map file name suffixes to media types and languages to deal with this issue. Follow these steps to map media types to file extensions, in the <code class="filename">web.xml</code> file.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550768610112">
      ⁠</a><p class="title"><strong>Procedure 15.4. Map Media Types to File Extensions</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename">web.xml</code> file for the application in a text editor.
			</div></li><li class="step"><div class="para">
				Add the context-param <code class="code">resteasy.media.type.mappings</code> to the file, inside the <code class="code">web-app</code> tags:
			</div><pre class="screen">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.media.type.mappings&lt;/param-name&gt;
&lt;/context-param&gt;
</pre></li><li class="step"><div class="para">
				Configure the parameter values. The mappings form a comma delimited list. Each mapping is delimited by a <code class="code">:</code>:
			</div><div class="example"><a id="idm140550805339600">
      ⁠</a><p class="title"><strong>Example 15.16. Example Mapping</strong></p><div class="example-contents"><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.media.type.mappings&lt;/param-name&gt;
    &lt;param-value&gt;html : text/html, json : application/json, xml : application/xml&lt;/param-value&gt;
&lt;/context-param&gt;
</pre></div></div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5416-591696+%5BLatest%5D&amp;comment=Title%3A+Map+File+Extensions+to+Media+Types+in+the+web.xml+File%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5416-591696+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Map_File_Extensions_to_Languages_in_the_webxml_File">
      ⁠</a>15.10.2. Map File Extensions to Languages in the web.xml File</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			Some clients, like browsers, cannot use the Accept and Accept-Language headers to negotiate the representation's media type or language. RESTEasy can map file name suffixes to media types and languages to deal with this issue. Follow these steps to map languages to file extensions, in the <code class="filename">web.xml</code> file.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550794584176">
      ⁠</a><p class="title"><strong>Procedure 15.5. Map File Extensions to Languages in the web.xml File</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename">web.xml</code> file for the application in a text editor.
			</div></li><li class="step"><div class="para">
				Add the context-param <code class="code">resteasy.language.mappings</code> to the file, inside the <code class="code">web-app</code> tags:
			</div><pre class="screen">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.language.mappings&lt;/param-name&gt;
&lt;/context-param&gt;
</pre></li><li class="step"><div class="para">
				Configure the parameter values. The mappings form a comma delimited list. Each mapping is delimited by a <code class="code">:</code>:
			</div><div class="example"><a id="idm140550769623120">
      ⁠</a><p class="title"><strong>Example 15.17. Example Mapping</strong></p><div class="example-contents"><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.language.mappings&lt;/param-name&gt;
    &lt;param-value&gt; en : en-US, es : es, fr : fr&lt;/param-name&gt;
&lt;/context-param&gt;
</pre></div></div></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5944-591719+%5BLatest%5D&amp;comment=Title%3A+Map+File+Extensions+to+Languages+in+the+web.xml+File%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5944-591719+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="RESTEasy_Supported_Media_Types">
      ⁠</a>15.10.3. RESTEasy Supported Media Types</h2></div></div></div><div class="table"><a id="idm140550780690320">
      ⁠</a><p class="title"><strong>Table 15.4. Media Types</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Media Types"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Media Type </th><th style="text-align: left"> Java Type </th></tr></thead><tbody><tr><td style="text-align: left"> application/*+xml, text/*+xml, application/*+json, application/*+fastinfoset, application/atom+* </td><td style="text-align: left"> JaxB annotated classes </td></tr><tr><td style="text-align: left"> application/*+xml, text/*+xml </td><td style="text-align: left"> org.w3c.dom.Document </td></tr><tr><td style="text-align: left"> */* </td><td style="text-align: left"> java.lang.String </td></tr><tr><td style="text-align: left"> */* </td><td style="text-align: left"> java.io.InputStream </td></tr><tr><td style="text-align: left"> text/plain </td><td style="text-align: left"> primitives, java.lang.String, or any type that has a String constructor, or static valueOf(String) method for input, toString() for output </td></tr><tr><td style="text-align: left"> */* </td><td style="text-align: left"> javax.activation.DataSource </td></tr><tr><td style="text-align: left"> */* </td><td style="text-align: left"> byte[] </td></tr><tr><td style="text-align: left"> */* </td><td style="text-align: left"> java.io.File </td></tr><tr><td style="text-align: left"> application/x-www-form-urlencoded </td><td style="text-align: left"> javax.ws.rs.core.MultivaluedMap </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+1822-591649+%5BLatest%5D&amp;comment=Title%3A+RESTEasy+Supported+Media+Types%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=1822-591649+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasy_JavaScript_API">
      ⁠</a>15.11. RESTEasy JavaScript API</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_the_RESTEasy_JavaScript_API">
      ⁠</a>15.11.1. About the RESTEasy JavaScript API</h2></div></div></div><div class="para">
		RESTEasy can generate a JavaScript API that uses AJAX calls to invoke JAX-RS operations. Each JAX-RS resource class will generate a JavaScript object of the same name as the declaring class or interface. The JavaScript object contains each JAX-RS method as properties.
	</div><div class="example"><a id="idm140550807131408">
      ⁠</a><p class="title"><strong>Example 15.18. Simple JAX-RS JavaScript API Example</strong></p><div class="example-contents"><pre class="programlisting">
@Path("foo")
public class Foo{
 @Path("{id}")
 @GET
 public String get(@QueryParam("order") String order, @HeaderParam("X-Foo") String header,
                   @MatrixParam("colour") String colour, @CookieParam("Foo-Cookie") String cookie){
  &amp;
 }
 @POST
 public void post(String text){
 }
}
</pre><div class="para">
			We can use the previous JAX-RS API in JavaScript using the following code:
		</div><pre class="programlisting">
var text = Foo.get({order: 'desc', 'X-Foo': 'hello',
                    colour: 'blue', 'Foo-Cookie': 123987235444});
Foo.put({$entity: text});
</pre></div></div><div class="para">
		Each JavaScript API method takes an optional object as single parameter where each property is a cookie, header, path, query or form parameter as identified by their name, or the API parameter properties. The properties are available here: <a class="xref" href="chap-JAX-RS_Web_Services.html#RESTEasy_Javascript_API_Parameters">Section 15.11.3, “RESTEasy Javascript API Parameters”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6102-743185+%5BLatest%5D&amp;comment=Title%3A+About+the+RESTEasy+JavaScript+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6102-743185+16+Feb+2015+00%3A51+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enable_the_RESTEasy_JavaScript_API_Servlet">
      ⁠</a>15.11.2. Enable the RESTEasy JavaScript API Servlet</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The RESTEasy JavaScript API is not enabled by default. Follow these steps to enable it using the <code class="filename">web.xml</code> file.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550744048192">
      ⁠</a><p class="title"><strong>Procedure 15.6. Edit web.xml to enable RESTEasy JavaScript API</strong></p><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename">web.xml</code> file of the application in a text editor.
			</div></li><li class="step"><div class="para">
				Add the following configuration to the file, inside the <code class="code">web-app</code> tags:
			</div><pre class="screen">&lt;servlet&gt;
    &lt;servlet-name&gt;RESTEasy JSAPI&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.jboss.resteasy.jsapi.JSAPIServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;RESTEasy JSAPI&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/<em class="replaceable">URL</em>&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre></li></ol></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4921-591678+%5BLatest%5D&amp;comment=Title%3A+Enable+the+RESTEasy+JavaScript+API+Servlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4921-591678+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="RESTEasy_Javascript_API_Parameters">
      ⁠</a>15.11.3. RESTEasy Javascript API Parameters</h2></div></div></div><div class="table"><a id="idm140550791016720">
      ⁠</a><p class="title"><strong>Table 15.5. Parameter Properties</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Parameter Properties"><colgroup><col width="33%" style="text-align: left" class="c1"/><col width="33%" style="text-align: left" class="c2"/><col width="33%" style="text-align: left" class="c3"/></colgroup><thead><tr><th style="text-align: left"> Property </th><th style="text-align: left"> Default Value </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> $entity </td><td style="text-align: left"> </td><td style="text-align: left"> The entity to send as a PUT, POST request. </td></tr><tr><td style="text-align: left"> $contentType </td><td style="text-align: left"> </td><td style="text-align: left"> The MIME type of the body entity sent as the Content-Type header. Determined by the @Consumes annotation. </td></tr><tr><td style="text-align: left"> $accepts </td><td style="text-align: left"> */* </td><td style="text-align: left"> The accepted MIME types sent as the Accept header. Determined by the @Provides annotation. </td></tr><tr><td style="text-align: left"> $callback </td><td style="text-align: left"> </td><td style="text-align: left"> Set to a function (httpCode, xmlHttpRequest, value) for an asynchronous call. If not present, the call will be synchronous and return the value. </td></tr><tr><td style="text-align: left"> $apiURL </td><td style="text-align: left"> </td><td style="text-align: left"> Set to the base URI of the JAX-RS endpoint, not including the last slash. </td></tr><tr><td style="text-align: left"> $username </td><td style="text-align: left"> </td><td style="text-align: left"> If username and password are set, they will be used for credentials for the request. </td></tr><tr><td style="text-align: left"> $password </td><td style="text-align: left"> </td><td style="text-align: left"> If username and password are set, they will be used for credentials for the request. </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+4922-591678+%5BLatest%5D&amp;comment=Title%3A+RESTEasy+Javascript+API+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=4922-591678+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Build_AJAX_Queries_with_the_JavaScript_API">
      ⁠</a>15.11.4. Build AJAX Queries with the JavaScript API</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The RESTEasy JavaScript API can be used to manually construct requests. This topic covers examples of this behavior.
		</div><div class="example"><a id="idm140550777097296">
      ⁠</a><p class="title"><strong>Example 15.19. The REST Object</strong></p><div class="example-contents"><div class="para">
			The REST object can be used to override RESTEasy JavaScript API client behavior:
		</div><pre class="programlisting">
// Change the base URL used by the API:
REST.apiURL = "http://api.service.com";

// log everything in a div element
REST.log = function(text){
 jQuery("#log-div").append(text);
};
</pre><div class="para">
			The REST object contains the following read-write properties:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">apiURL</span></dt><dd><div class="para">
						Set by default to the JAX-RS root URL. Used by every JavaScript client API functions when constructing the requests.
					</div></dd><dt><span class="term">log</span></dt><dd><div class="para">
						Set to a function(string) in order to receive RESTEasy client API logs. This is useful if you want to debug your client API and place the logs where you can see them.
					</div></dd></dl></div></div></div><div class="example"><a id="idm140550781377120">
      ⁠</a><p class="title"><strong>Example 15.20. The REST.Request Class</strong></p><div class="example-contents"><div class="para">
			The REST.Request class can be used to build custom requests:
		</div><pre class="programlisting">
var r = new REST.Request();
r.setURI("http://api.service.com/orders/23/json");
r.setMethod("PUT");
r.setContentType("application/json");
r.setEntity({id: "23"});
r.addMatrixParameter("JSESSIONID", "12309812378123");
r.execute(function(status, request, entity){
 log("Response is "+status);
});
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5415-591697+%5BLatest%5D&amp;comment=Title%3A+Build+AJAX+Queries+with+the+JavaScript+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5415-591697+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="RESTRequest_Class_Members">
      ⁠</a>15.11.5. REST.Request Class Members</h2></div></div></div><div class="table"><a id="idm140550718672704">
      ⁠</a><p class="title"><strong>Table 15.6. REST.Request Class</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="REST.Request Class"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Member </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> execute(callback) </td><td style="text-align: left"> Executes the request with all the information set in the current object. The value is passed to the optional argument callback, not returned. </td></tr><tr><td style="text-align: left"> setAccepts(acceptHeader) </td><td style="text-align: left"> Sets the Accept request header. Defaults to */*. </td></tr><tr><td style="text-align: left"> setCredentials(username, password) </td><td style="text-align: left"> Sets the request credentials. </td></tr><tr><td style="text-align: left"> setEntity(entity) </td><td style="text-align: left"> Sets the request entity. </td></tr><tr><td style="text-align: left"> setContentType(contentTypeHeader) </td><td style="text-align: left"> Sets the Content-Type request header. </td></tr><tr><td style="text-align: left"> setURI(uri) </td><td style="text-align: left"> Sets the request URI. This should be an absolute URI. </td></tr><tr><td style="text-align: left"> setMethod(method) </td><td style="text-align: left"> Sets the request method. Defaults to GET. </td></tr><tr><td style="text-align: left"> setAsync(async) </td><td style="text-align: left"> Controls whether the request should be asynchronous. Defaults to true. </td></tr><tr><td style="text-align: left"> addCookie(name, value) </td><td style="text-align: left"> Sets the given cookie in the current document when executing the request. This will be persistent in the browser. </td></tr><tr><td style="text-align: left"> addQueryParameter(name, value) </td><td style="text-align: left"> Adds a query parameter to the URI query part. </td></tr><tr><td style="text-align: left"> addMatrixParameter(name, value) </td><td style="text-align: left"> Adds a matrix parameter (path parameter) to the last path segment of the request URI. </td></tr><tr><td style="text-align: left"> addHeader(name, value) </td><td style="text-align: left"> Adds a request header. </td></tr></tbody></table></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+5435-591696+%5BLatest%5D&amp;comment=Title%3A+REST.Request+Class+Members%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=5435-591696+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasy_Asynchronous_Job_Service">
      ⁠</a>15.12. RESTEasy Asynchronous Job Service</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_the_RESTEasy_Asynchronous_Job_Service">
      ⁠</a>15.12.1. About the RESTEasy Asynchronous Job Service</h2></div></div></div><div class="para">
		The RESTEasy Asynchronous Job Service is designed to add asynchronous behavior to the HTTP protocol. While HTTP is a synchronous protocol it does have a faint idea of asynchronous invocations. The HTTP 1.1 response code 202, "Accepted" means that the server has received and accepted the response for processing, but the processing has not yet been completed. The Asynchronous Job Service builds around this.
	</div><div class="para">
		To enable the service, refer to: <a class="xref" href="chap-JAX-RS_Web_Services.html#Enable_the_Asynchronous_Job_Service">Section 15.12.2, “Enable the Asynchronous Job Service”</a>. For examples of how the service works, refer to <a class="xref" href="chap-JAX-RS_Web_Services.html#Configure_Asynchronous_Jobs_for_RESTEasy">Section 15.12.3, “Configure Asynchronous Jobs for RESTEasy”</a>.
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6103-591723+%5BLatest%5D&amp;comment=Title%3A+About+the+RESTEasy+Asynchronous+Job+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6103-591723+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Enable_the_Asynchronous_Job_Service">
      ⁠</a>15.12.2. Enable the Asynchronous Job Service</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550742696288">
      ⁠</a><p class="title"><strong>Procedure 15.7. Modify the web.xml file</strong></p><ul><li class="step"><div class="para">
				Enable the asynchronous job service in the <code class="filename">web.xml</code> file:
			</div><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.async.job.service.enabled&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;
</pre></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The asynchronous job service has been enabled. For configuration options, refer to: <a class="xref" href="chap-JAX-RS_Web_Services.html#Asynchronous_Job_Service_Configuration_Parameters">Section 15.12.4, “Asynchronous Job Service Configuration Parameters”</a>.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2968-591651+%5BLatest%5D&amp;comment=Title%3A+Enable+the+Asynchronous+Job+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2968-591651+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Configure_Asynchronous_Jobs_for_RESTEasy">
      ⁠</a>15.12.3. Configure Asynchronous Jobs for RESTEasy</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			This topic covers examples of the query parameters for asynchronous jobs with RESTEasy.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
			Role based security does not work with the Asynchronous Job Service, as it cannot be implemented portably. If the Asynchronous Job Service is used, application security must be done through XML declarations in the <code class="filename">web.xml</code> file instead.
		</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
			While GET, DELETE, and PUT methods can be invoked asynchronously, this breaks the HTTP 1.1 contract of these methods. While these invocations may not change the state of the resource if invoked more than once, they do change the state of the server as new Job entries with each invocation. 
		</div></div></div><div class="example"><a id="idm140550791755600">
      ⁠</a><p class="title"><strong>Example 15.21. The Asynch Parameter</strong></p><div class="example-contents"><div class="para">
			The <code class="code">asynch</code> query parameter is used to run invocations in the background. A 202 Accepted response is returned, as well as a Location header with a URL pointing to where the response of the background method is located.
		</div><pre class="screen">POST http://example.com/myservice?asynch=true</pre><div class="para">
			The example above will return a 202 Accepted response. It will also return a Location header with a URL pointing to where the response of the background method is located. An example of the location header is shown below:
		</div><pre class="screen">
HTTP/1.1 202 Accepted
Location: http://example.com/asynch/jobs/3332334
</pre><div class="para">
			The URI will take the form of:
		</div><pre class="screen">/asynch/jobs/{job-id}?wait={millisconds}|nowait=true</pre><div class="para">
			GET, POST and DELETE operations can be performed on this URL.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					GET returns the JAX-RS resource method invoked as a response if the job was completed. If the job has not been completed, this GET will return a 202 Accepted response code. Invoking GET does not remove the job, so it can be called multiple times.
				</div></li><li class="listitem"><div class="para">
					POST does a read of the job response and removes the job if it has been completed.
				</div></li><li class="listitem"><div class="para">
					DELETE is called to manually clean up the job queue.
				</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
						When the Job queue is full, it will evict the earliest job from memory automatically, without needing to call DELETE.
					</div></div></div></li></ul></div></div></div><div class="example"><a id="idm140550721853824">
      ⁠</a><p class="title"><strong>Example 15.22. Wait / Nowait</strong></p><div class="example-contents"><div class="para">
			The GET and POST operations allow for the maximum wait time to be defined, using the <code class="code">wait</code> and <code class="code">nowait</code> query parameters. If the <code class="code">wait</code> parameter is not specified, the operation will default to <code class="code">nowait=true</code>, and will not wait at all if the job is not complete. The <code class="code">wait</code> parameter is defined in milliseconds.
		</div><pre class="screen">POST http://example.com/asynch/jobs/122?wait=3000</pre></div></div><div class="example"><a id="idm140550792722336">
      ⁠</a><p class="title"><strong>Example 15.23. The Oneway Parameter</strong></p><div class="example-contents"><div class="para">
			RESTEasy supports fire and forget jobs, using the <code class="code">oneway</code> query parameter.
		</div><pre class="screen">POST http://example.com/myservice?oneway=true</pre><div class="para">
			The example above will return a 202 Accepted response, but no job will be created.
		</div></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+2965-715960+%5BLatest%5D&amp;comment=Title%3A+Configure+Asynchronous+Jobs+for+RESTEasy%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=2965-715960+10+Oct+2014+00%3A55+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Asynchronous_Job_Service_Configuration_Parameters">
      ⁠</a>15.12.4. Asynchronous Job Service Configuration Parameters</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			The table below details the configurable context-params for the Asynchronous Job Service. These parameters can be configured in the <code class="filename">web.xml</code> file.
		</div><div class="table"><a id="idm140550813932848">
      ⁠</a><p class="title"><strong>Table 15.7. Configuration Parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Configuration Parameters"><colgroup><col width="50%" style="text-align: left" class="c1"/><col width="50%" style="text-align: left" class="c2"/></colgroup><thead><tr><th style="text-align: left"> Parameter </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> resteasy.async.job.service.max.job.results </td><td style="text-align: left"> Number of job results that can be held in the memory at any one time. Default value is 100. </td></tr><tr><td style="text-align: left"> resteasy.async.job.service.max.wait </td><td style="text-align: left"> Maximum wait time on a job when a client is querying for it. Default value is 300000. </td></tr><tr><td style="text-align: left"> resteasy.async.job.service.thread.pool.size </td><td style="text-align: left"> Thread pool size of the background threads that run the job. Default value is 100. </td></tr><tr><td style="text-align: left"> resteasy.async.job.service.base.path </td><td style="text-align: left"> Sets the base path for the job URIs. Default value is /asynch/jobs </td></tr></tbody></table></div></div><div class="example"><a id="idm140550798932624">
      ⁠</a><p class="title"><strong>Example 15.24. Example Asynchronous Jobs Configuration</strong></p><div class="example-contents"><pre class="programlisting">
&lt;web-app&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;resteasy.async.job.service.enabled&lt;/param-name&gt;
        &lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;context-param&gt;
        &lt;param-name&gt;resteasy.async.job.service.max.job.results&lt;/param-name&gt;
        &lt;param-value&gt;100&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;resteasy.async.job.service.max.wait&lt;/param-name&gt;
        &lt;param-value&gt;300000&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;resteasy.async.job.service.thread.pool.size&lt;/param-name&gt;
        &lt;param-value&gt;100&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;resteasy.async.job.service.base.path&lt;/param-name&gt;
        &lt;param-value&gt;/asynch/jobs&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;listener&gt;
        &lt;listener-class&gt;
            org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
        &lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
        &lt;servlet-class&gt;
            org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
        &lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</pre></div></div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6614-591747+%5BLatest%5D&amp;comment=Title%3A+Asynchronous+Job+Service+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6614-591747+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasy_JAXB">
      ⁠</a>15.13. RESTEasy JAXB</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Create_a_JAXB_Decorator">
      ⁠</a>15.13.1. Create a JAXB Decorator</h2></div></div></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Summary</div>
			RESTEasy's JAXB providers have a pluggable way to decorate Marshaller and Unmarshaller instances. An annotation is created that can trigger either a Marshaller or Unmarshaller instance. This topic covers the steps to create a JAXB decorator with RESTEasy.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550807796416">
      ⁠</a><p class="title"><strong>Procedure 15.8. Create a JAXB Decorator with RESTEasy</strong></p><ol class="1"><li class="step"><p class="title"><strong>Create the Processor Class</strong></p><ol class="substeps a"><li class="step"><div class="para">
						Create a class that implements DecoratorProcessor&lt;Target, Annotation&gt;. The target is either the JAXB Marshaller or Unmarshaller class. The annotation is created in step two.
					</div></li><li class="step"><div class="para">
						Annotate the class with @DecorateTypes, and declare the MIME Types the decorator should decorate.
					</div></li><li class="step"><div class="para">
						Set properties or values within the <code class="methodname"> decorate</code> function.
					</div></li></ol><div class="example"><a id="idm140550805668736">
      ⁠</a><p class="title"><strong>Example 15.25. Example Processor Class</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import org.jboss.resteasy.core.interception.DecoratorProcessor;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import org.jboss.resteasy.annotations.DecorateTypes;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.bind.Marshaller;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.bind.PropertyException;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.ws.rs.core.MediaType;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.ws.rs.Produces;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.lang.annotation.Annotation;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">DecorateTypes</span>({<span xmlns="" class="perl_String">"text/*+xml"</span>, <span xmlns="" class="perl_String">"application/*+xml"</span>})
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> PrettyProcessor <span xmlns="" class="perl_Keyword">implements</span> DecoratorProcessor&lt;Marshaller, Pretty&gt;
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> Marshaller <span xmlns="" class="perl_Function">decorate</span>(Marshaller target, Pretty annotation,
<span xmlns="" class="line">​</span>	  <span xmlns="" class="perl_Keyword">Class</span> type, Annotation[] annotations, MediaType mediaType)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	target.<span xmlns="" class="perl_Function">setProperty</span>(Marshaller.<span xmlns="" class="perl_Function">JAXB_FORMATTED_OUTPUT</span>, <span xmlns="" class="perl_DataType">Boolean</span>.<span xmlns="" class="perl_Function">TRUE</span>);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
</pre></div></div></li><li class="step"><p class="title"><strong>Create the Annotation</strong></p><ol class="substeps a"><li class="step"><div class="para">
						Create a custom interface that is annotated with the @Decorator annotation.
					</div></li><li class="step"><div class="para">
						Declare the processor and target for the @Decorator annotation. The processor is created in step one. The target is either the JAXB Marshaller or Unmarshaller class.
					</div></li></ol><div class="example"><a id="idm140550804662240">
      ⁠</a><p class="title"><strong>Example 15.26. Example Annotation</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import org.jboss.resteasy.annotations.Decorator;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Target</span>({ElementType.<span xmlns="" class="perl_Function">TYPE</span>, ElementType.<span xmlns="" class="perl_Function">METHOD</span>, ElementType.<span xmlns="" class="perl_Function">PARAMETER</span>, ElementType.<span xmlns="" class="perl_Function">FIELD</span>})
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Retention</span>(RetentionPolicy.<span xmlns="" class="perl_Function">RUNTIME</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Decorator</span>(processor = PrettyProcessor.<span xmlns="" class="perl_Function">class</span>, target = Marshaller.<span xmlns="" class="perl_Function">class</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">@interface</span> Pretty {}
</pre></div></div></li><li class="step"><div class="para">
				Add the annotation created in step two to a function so that either the input or output is decorated when it is marshalled.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Result</div>
			The JAXB decorator has been created and applied within the JAX-RS web service.
		</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6099-591723+%5BLatest%5D&amp;comment=Title%3A+Create+a+JAXB+Decorator%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6099-591723+23+Feb+2014+16%3A54+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JAXB_and_XML_Provider">
      ⁠</a>15.13.2. JAXB and XML Provider</h2></div></div></div><div class="para">
		RESTEasy facilitates JAXB provider support for XML.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">@XmlHeader and @Stylesheet</div>
			RESTEasy provides setting an XML header using the <code class="code">@org.jboss.resteasy.annotations.providers.jaxb.XmlHeader</code> annotation. For example: 
<pre class="programlisting"><span xmlns="" class="line">​</span>@XmlRootElement
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_Keyword">class</span> Thing
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> String name;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getName</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> name;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setName</span>(String name)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">name</span> = name;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/test"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_Keyword">class</span> TestService
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   @GET
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/header"</span>)
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">Produces</span>(<span xmlns="" class="perl_String">"application/xml"</span>)
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">XmlHeader</span>(<span xmlns="" class="perl_String">"&lt;?xml-stylesheet type='text/xsl' href='${baseuri}foo.xsl' ?&gt;"</span>)
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> Thing <span xmlns="" class="perl_Function">get</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      Thing thing = <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">Thing</span>();
<span xmlns="" class="line">​</span>      thing.<span xmlns="" class="perl_Function">setName</span>(<span xmlns="" class="perl_String">"bill"</span>);
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> thing;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre>
			 The <code class="code">@XmlHeader</code> ensures that the XML output has an XML-stylesheet header.
		</div><div class="para">
		RESTEasy has a convenience annotation for stylesheet headers. For example: 
<pre class="programlisting"><span xmlns="" class="line">​</span>@XmlRootElement
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_Keyword">class</span> Thing
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> String name;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getName</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> name;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setName</span>(String name)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">name</span> = name;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/test"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_Keyword">class</span> TestService
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   @GET
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/stylesheet"</span>)
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">Produces</span>(<span xmlns="" class="perl_String">"application/xml"</span>)
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">Stylesheet</span>(type=<span xmlns="" class="perl_String">"text/css"</span>, href=<span xmlns="" class="perl_String">"${basepath}foo.xsl"</span>)
<span xmlns="" class="line">​</span>   @Junk
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> Thing <span xmlns="" class="perl_Function">getStyle</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      Thing thing = <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">Thing</span>();
<span xmlns="" class="line">​</span>      thing.<span xmlns="" class="perl_Function">setName</span>(<span xmlns="" class="perl_String">"bill"</span>);
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> thing;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+44664-766637+%5BLatest%5D&amp;comment=Title%3A+JAXB+and+XML+Provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44664-766637+04+Aug+2015+07%3A23+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="JAXB_and_JSON_Provider">
      ⁠</a>15.13.3. JAXB and JSON Provider</h2></div></div></div><div class="para">
		RESTEasy allows you to marshal JAXB annotated POJOs to and from JSON. This provider wraps the Jettison JSON library to accomplish this task. For more information about Jettison and how it works, refer to: <a href="http://jettison.codehaus.org/">http://jettison.codehaus.org/</a>. 
<pre class="programlisting"><span xmlns="" class="line">​</span>&lt;dependency&gt;
<span xmlns="" class="line">​</span>	&lt;groupId&gt;org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>&lt;/groupId&gt;
<span xmlns="" class="line">​</span>	&lt;artifactId&gt;resteasy-jettison-provider&lt;/artifactId&gt;
<span xmlns="" class="line">​</span>	&lt;version&gt;${version.<span xmlns="" class="perl_Function">org</span>.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>}&lt;/version&gt;
<span xmlns="" class="line">​</span>	&lt;scope&gt;provided&lt;/scope&gt;
<span xmlns="" class="line">​</span>&lt;/dependency&gt;</pre>

	</div><div class="para">
		Jettison has two mapping formats. One is <code class="literal">BadgerFish</code> the other is a Jettison mapped convention format. The mapped convention is the default. For more details on the JAXB + JSON Provider integration with Jettison, refer to: <a href="http://docs.jboss.org/resteasy/docs/2.3.7.Final/userguide/html_single/index.html">http://docs.jboss.org/resteasy/docs/2.3.7.Final/userguide/html_single/index.html</a>
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+44665-770629+%5BLatest%5D&amp;comment=Title%3A+JAXB+and+JSON+Provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44665-770629+24+Sep+2015+05%3A47+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasy_Atom_Support">
      ⁠</a>15.14. RESTEasy Atom Support</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="About_the_Atom_API_and_Provider">
      ⁠</a>15.14.1. About the Atom API and Provider</h2></div></div></div><div class="para">
		The RESTEasy Atom API and Provider is a simple object model that RESTEasy defines to represent Atom. The main classes for the API are in the <code class="classname">org.jboss.resteasy.plugins.providers.atom</code> package. RESTEasy uses JAXB to marshal and unmarshal the API. The provider is JAXB based, and is not limited to sending atom objects using XML. All JAXB providers that RESTEasy has can be reused by the Atom API and provider, including JSON. Refer to the javadocs available from the <a href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Customer Service Portal</a> for more information on the API.
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>import org.jboss.resteasy.plugins.providers.atom.Content;
<span xmlns="" class="line">​</span>import org.jboss.resteasy.plugins.providers.atom.Entry;
<span xmlns="" class="line">​</span>import org.jboss.resteasy.plugins.providers.atom.Feed;
<span xmlns="" class="line">​</span>import org.jboss.resteasy.plugins.providers.atom.Link;
<span xmlns="" class="line">​</span>import org.jboss.resteasy.plugins.providers.atom.Person;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Path("atom")
<span xmlns="" class="line">​</span>public class MyAtomService
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   @GET
<span xmlns="" class="line">​</span>   @Path("feed")
<span xmlns="" class="line">​</span>   @Produces("application/atom+xml")
<span xmlns="" class="line">​</span>   public Feed getFeed() throws URISyntaxException
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      Feed feed = new Feed();
<span xmlns="" class="line">​</span>      feed.setId(new URI("http://example.com/42"));
<span xmlns="" class="line">​</span>      feed.setTitle("My Feed");
<span xmlns="" class="line">​</span>      feed.setUpdated(new Date());
<span xmlns="" class="line">​</span>      Link link = new Link();
<span xmlns="" class="line">​</span>      link.setHref(new URI("http://localhost"));
<span xmlns="" class="line">​</span>      link.setRel("edit");
<span xmlns="" class="line">​</span>      feed.getLinks().add(link);
<span xmlns="" class="line">​</span>      feed.getAuthors().add(new Person("John Brown"));
<span xmlns="" class="line">​</span>      Entry entry = new Entry();
<span xmlns="" class="line">​</span>      entry.setTitle("Hello World");
<span xmlns="" class="line">​</span>      Content content = new Content();
<span xmlns="" class="line">​</span>      content.setType(MediaType.TEXT_HTML_TYPE);
<span xmlns="" class="line">​</span>      content.setText("Nothing much");
<span xmlns="" class="line">​</span>      entry.setContent(content);
<span xmlns="" class="line">​</span>      feed.getEntries().add(entry);
<span xmlns="" class="line">​</span>      return feed;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+6849-763596+%5BLatest%5D&amp;comment=Title%3A+About+the+Atom+API+and+Provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=6849-763596+02+Jul+2015+01%3A27+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Using_JAXB_with_Atom_Provider">
      ⁠</a>15.14.2. Using JAXB with Atom Provider</h2></div></div></div><div class="para">
		The org.jboss.resteasy.plugins.providers.atom.Content class allows you to unmarshal and marshal JAXB annotated objects that are the body of the content. You can refer the example of sending an Entry with a Customer object attached as the body of the entry's content. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@XmlRootElement(namespace = "http://jboss.org/Customer")
<span xmlns="" class="line">​</span>@XmlAccessorType(XmlAccessType.FIELD)
<span xmlns="" class="line">​</span>public class Customer
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @XmlElement
<span xmlns="" class="line">​</span>   private String name;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   public Customer()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   public Customer(String name)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      this.name = name;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   public String getName()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      return name;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Path("atom")
<span xmlns="" class="line">​</span>public static class AtomServer
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @GET
<span xmlns="" class="line">​</span>   @Path("entry")
<span xmlns="" class="line">​</span>   @Produces("application/atom+xml")
<span xmlns="" class="line">​</span>   public Entry getEntry()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      Entry entry = new Entry();
<span xmlns="" class="line">​</span>      entry.setTitle("Hello World");
<span xmlns="" class="line">​</span>      Content content = new Content();
<span xmlns="" class="line">​</span>      content.setJAXBObject(new Customer("bill"));
<span xmlns="" class="line">​</span>      entry.setContent(content);
<span xmlns="" class="line">​</span>      return entry;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre>
		 The Content.setJAXBObject() method is used to specify the content object you are sending back to Java JAXB object to marshal appropriately. If you are using a different base format other than XML, i.e. "application/atom+json", the attached JAXB object is marshalled in the same format. If you have an atom document as your input, you can also extract JAXB objects from Content using the Content.getJAXBObject(Class clazz) method. Here is an example of an input atom document and extracting a Customer object from the content. 
<pre class="programlisting XML"><span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@Path("atom")
<span xmlns="" class="line">​</span>public static class AtomServer
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @PUT
<span xmlns="" class="line">​</span>   @Path("entry")
<span xmlns="" class="line">​</span>   @Produces("application/atom+xml")
<span xmlns="" class="line">​</span>   public void putCustomer(Entry entry)
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      Content content = entry.getContent();
<span xmlns="" class="line">​</span>      Customer cust = content.getJAXBObject(Customer.class);
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+44396-759590+%5BLatest%5D&amp;comment=Title%3A+Using+JAXB+with+Atom+Provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44396-759590+28+May+2015+02%3A25+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="YAML_Provider">
      ⁠</a>15.15. YAML Provider</h1></div></div></div><div class="para">
		RESTEasy comes with built in support for YAML using the <code class="filename">SnakeYAML</code> library. To enable YAML support, you must insert the following dependencies into the project pom file of your application: 
<pre class="programlisting"><span xmlns="" class="line">​</span>&lt;dependency&gt;
<span xmlns="" class="line">​</span>	&lt;groupId&gt;org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>&lt;/groupId&gt;
<span xmlns="" class="line">​</span>	&lt;artifactId&gt;resteasy-yaml-provider&lt;/artifactId&gt;
<span xmlns="" class="line">​</span>	&lt;version&gt;${version.<span xmlns="" class="perl_Function">org</span>.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>}&lt;/version&gt;
<span xmlns="" class="line">​</span>	&lt;scope&gt;provided&lt;/scope&gt;
<span xmlns="" class="line">​</span>&lt;/dependency&gt;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>&lt;dependency&gt;
<span xmlns="" class="line">​</span>	&lt;groupId&gt;org.<span xmlns="" class="perl_Function">yaml</span>&lt;/groupId&gt;
<span xmlns="" class="line">​</span>	&lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;
<span xmlns="" class="line">​</span>	&lt;version&gt;${version.<span xmlns="" class="perl_Function">org</span>.<span xmlns="" class="perl_Function">yaml</span>.<span xmlns="" class="perl_Function">snakeyaml</span>}&lt;/version&gt;
<span xmlns="" class="line">​</span>&lt;/dependency&gt;
</pre>

	</div><div class="para">
		YAML provider recognizes three mime types: 
		<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					text/x-yaml
				</div></li><li class="listitem"><div class="para">
					text/yaml
				</div></li><li class="listitem"><div class="para">
					application/x-yaml
				</div></li></ul></div>

	</div><div class="para">
		The following example demonstrates how to use YAML in a resource method: 
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.ws.rs.Consumes;</span>
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">import javax.ws.rs.GET;</span>
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">import javax.ws.rs.Path;</span>
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">import javax.ws.rs.Produces;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span> @<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/yaml"</span>)
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> YamlResource
<span xmlns="" class="line">​</span> {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@GET
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Produces</span>(<span xmlns="" class="perl_String">"text/x-yaml"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> MyObject <span xmlns="" class="perl_Function">getMyObject</span>() {
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Function">createMyObject</span>();
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span> }
</pre>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+44655-770633+%5BLatest%5D&amp;comment=Title%3A+YAML+Provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44655-770633+24+Sep+2015+06%3A42+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="EJB_Integration">
      ⁠</a>15.16. EJB Integration</h1></div></div></div><div class="para">
		In order to integrate RESTEasy with EJB, you must first modify the published interfaces of your EJB. Currently, RESTEasy only has simple portable integration with EJBs, so you must also manually configure your RESTEasy war file.
	</div><div class="para">
		To make an EJB function as a JAX-RS resource, you must annotate an SLSB's <code class="code">@Remote</code> or <code class="code">@Local</code> interface with JAX-RS annotations: 
<pre class="programlisting"><span xmlns="" class="line">​</span>@Local
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/Library"</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">interface</span> Library {
<span xmlns="" class="line">​</span>   @GET
<span xmlns="" class="line">​</span>   @<span xmlns="" class="perl_Function">Path</span>(<span xmlns="" class="perl_String">"/books/{isbn}"</span>)
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getBook</span>(@<span xmlns="" class="perl_Function">PathParam</span>(<span xmlns="" class="perl_String">"isbn"</span>) String isbn);
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>@Stateless
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> LibraryBean <span xmlns="" class="perl_Keyword">implements</span> Library {
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span>}</pre>

	</div><div class="para">
		Next, in RESTEasy's <code class="filename">web.xml</code> file, you must manually register the EJB with RESTEasy using the <code class="code">resteasy.jndi.resources &lt;context-param&gt;</code>
<pre class="programlisting"><span xmlns="" class="line">​</span>&lt;web-app&gt;
<span xmlns="" class="line">​</span>   &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;
<span xmlns="" class="line">​</span>   &lt;context-param&gt;
<span xmlns="" class="line">​</span>      &lt;param-name&gt;resteasy.<span xmlns="" class="perl_Function">jndi</span>.<span xmlns="" class="perl_Function">resources</span>&lt;/param-name&gt;
<span xmlns="" class="line">​</span>      &lt;param-value&gt;LibraryBean/local&lt;/param-value&gt;
<span xmlns="" class="line">​</span>   &lt;/context-param&gt;
<span xmlns="" class="line">​</span>   &lt;listener&gt;
<span xmlns="" class="line">​</span>      &lt;listener-<span xmlns="" class="perl_Keyword">class</span>&gt;org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>.<span xmlns="" class="perl_Function">plugins</span>.<span xmlns="" class="perl_Function">server</span>.<span xmlns="" class="perl_Function">servlet</span>.<span xmlns="" class="perl_Function">ResteasyBootstrap</span>&lt;/listener-<span xmlns="" class="perl_Keyword">class</span>&gt;
<span xmlns="" class="line">​</span>   &lt;/listener&gt;
<span xmlns="" class="line">​</span>   &lt;servlet&gt;
<span xmlns="" class="line">​</span>      &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
<span xmlns="" class="line">​</span>      &lt;servlet-<span xmlns="" class="perl_Keyword">class</span>&gt;org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>.<span xmlns="" class="perl_Function">plugins</span>.<span xmlns="" class="perl_Function">server</span>.<span xmlns="" class="perl_Function">servlet</span>.<span xmlns="" class="perl_Function">HttpServletDispatcher</span>&lt;/servlet-<span xmlns="" class="perl_Keyword">class</span>&gt;
<span xmlns="" class="line">​</span>   &lt;/servlet&gt;
<span xmlns="" class="line">​</span>   &lt;servlet-mapping&gt;
<span xmlns="" class="line">​</span>      &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
<span xmlns="" class="line">​</span>      &lt;url-pattern&gt;<span xmlns="" class="perl_Comment">/*&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">   &lt;/servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;/web-app&gt;</span>
</pre>

	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+44657-766648+%5BLatest%5D&amp;comment=Title%3A+EJB+Integration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44657-766648+04+Aug+2015+08%3A03+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="JSON_Support_via_Jackson">
      ⁠</a>15.17. JSON Support via Jackson</h1></div></div></div><div class="para">
		Besides the Jettison JAXB adapter for JSON, RESTEasy also supports integration with the Jackson project. Jackson allows you to marshal Java objects to and from JSON. It has a Java bean based model as well as JAXB like APIs.
	</div><div class="para">
		While Jackson comes with its own JAX-RS integration, RESTEasy expands it. In order to include it in your project, add the following Maven dependency to your build: 
<pre class="programlisting"><span xmlns="" class="line">​</span>&lt;repository&gt;
<span xmlns="" class="line">​</span>	&lt;id&gt;jboss&lt;/id&gt;
<span xmlns="" class="line">​</span>	&lt;url&gt;&gt;http:<span xmlns="" class="perl_Comment">//repository.jboss.org/nexus/content/groups/public/&lt;/url&gt;</span>
<span xmlns="" class="line">​</span>&lt;/repository&gt;
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span>&lt;dependency&gt;
<span xmlns="" class="line">​</span>	&lt;groupId&gt;org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>&lt;/groupId&gt;
<span xmlns="" class="line">​</span>	&lt;artifactId&gt;resteasy-jackson-provider&lt;/artifactId&gt;
<span xmlns="" class="line">​</span>	&lt;version&gt;${version.<span xmlns="" class="perl_Function">org</span>.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">resteasy</span>}&lt;/version&gt;
<span xmlns="" class="line">​</span>	&lt;scope&gt;provided&lt;/scope&gt;
<span xmlns="" class="line">​</span>&lt;/dependency&gt;
</pre>
		 For more information on JSON support via Jackson project, refer to <a href="http://docs.jboss.org/resteasy/docs/2.3.7.Final/userguide/html_single/index.html">http://docs.jboss.org/resteasy/docs/2.3.7.Final/userguide/html_single/index.html</a>
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+44661-770628+%5BLatest%5D&amp;comment=Title%3A+JSON+Support+via+Jackson%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=44661-770628+24+Sep+2015+05%3A36+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-RESTEasySpring_Integration">
      ⁠</a>15.18. RESTEasy/Spring Integration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="RESTeasySpring_integration">
      ⁠</a>15.18.1. RESTEasy/Spring integration</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul><li class="listitem"><div class="para">
				Your application must have an existing JAX-WS service and client configuration.
			</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140550722391920">
      ⁠</a><p class="title"><strong>Procedure 15.9. Enable the RESTEasy/Spring integration functionality</strong></p><ul><li class="step"><div class="para">
				RESTEasy integrates with Spring 3.0.x.
			</div><div class="para">
				Maven users must use the resteasy-spring artifact. Alternatively, the jar is available as a module in JBoss EAP 6.
			</div><div class="para">
				RESTEasy comes with its own Spring ContextLoaderListener that registers a RESTEasy specific BeanPostProcessor that processes JAX-RS annotations when a bean is created by a BeanFactory.This means that RESTEasy will automatically scan for @Provider and JAX-RS resource annotations on your bean class and register them as JAX-RS resources.
			</div><div class="example"><a id="idm140550791618144">
      ⁠</a><p class="title"><strong>Example 15.27. Edit web.xml</strong></p><div class="example-contents"><div class="para">
					Add the following to your web.xml file to enable the RESTEasy/Spring integration functionality:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;web-app&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;display-name&gt;</span>
<span xmlns="" class="line">​</span>			Archetype Created Web Application
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/display-name&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;listener&gt;</span>
<span xmlns="" class="line">​</span>   	<span xmlns="" class="perl_Keyword">&lt;listener-class&gt;</span>
<span xmlns="" class="line">​</span>   		org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;/listener-class&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/listener&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;listener&gt;</span>
<span xmlns="" class="line">​</span>	  <span xmlns="" class="perl_Keyword">&lt;listener-class&gt;</span>
<span xmlns="" class="line">​</span>  	 		org.jboss.resteasy.plugins.spring.SpringContextLoaderListener
<span xmlns="" class="line">​</span>   	<span xmlns="" class="perl_Keyword">&lt;/listener-class&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/listener&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;servlet&gt;</span>
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>Resteasy
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>  		<span xmlns="" class="perl_Keyword">&lt;servlet-class&gt;</span>
<span xmlns="" class="line">​</span>  			org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
<span xmlns="" class="line">​</span>  		<span xmlns="" class="perl_Keyword">&lt;/servlet-class&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/servlet&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>
<span xmlns="" class="line">​</span>  		Resteasy
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>  	<span xmlns="" class="perl_Keyword">&lt;url-pattern&gt;</span>/*<span xmlns="" class="perl_Keyword">&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/web-app&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para">
				The SpringContextLoaderListener must be declared after ResteasyBootstrap as it uses ServletContext attributes initialized by it.
			</div></li></ul></div><div class="para">
		For more information regarding RestEasy and Spring integration, see <a href="http://docs.jboss.org/resteasy/docs/2.3.7.Final/userguide/html_single/">http://docs.jboss.org/resteasy/docs/2.3.7.Final/userguide/html_single/</a>
	</div><div class="para RoleCreateBugPara">
		<a href="https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+23088%2C+Red+Hat+Development+Guide-6.4%0ABuild+Date%3A+16-11-2017+09%3A13%3A01%0ATopic+ID%3A+30885-642312+%5BLatest%5D&amp;comment=Title%3A+RESTEasy%2FSpring+integration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;cf_build_id=30885-642312+21+May+2014+11%3A36+en-US+%5BLatest%5D&amp;product=JBoss+Enterprise+Application+Platform+6&amp;component=Documentation&amp;version=6.4.0">Report a bug</a>
	</div></div></div></div></body></html>