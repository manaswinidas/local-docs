<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 4. Installing JBoss Web Server on Solaris</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installing_jboss_web_server_on_solaris"/>Chapter 4. Installing JBoss Web Server on Solaris</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing_a_java_development_kit_jdk_2"/>Installing a Java Development Kit (JDK)</h1></div></div></div><p>
				Before installing JBoss Web Server on Solaris, you must first install a supported Java Development Kit (JDK).
			</p><p>
				For a list of supported configurations, see the Red Hat Customer Portal article: <a class="link" href="https://access.redhat.com/articles/3497401/">JBoss Web Server 5 Supported Configurations</a>.
			</p><div class="title"><strong>Installing a Java Development Kit (JDK)</strong></div><p>
					Install the Oracle JDK on a command line as the root user:
				</p><pre class="screen"># pkg install jdk-&lt;version&gt;</pre><p>
				Where &lt;version&gt; is the version of the JDK to install, such as <code class="literal">jdk-8</code>
			</p><div class="orderedlist"><p class="title"><strong>Alternative: Download and Install a Java Development Kit on Solaris</strong></p><ol class="orderedlist"><li class="listitem">
						Download the Oracle JDK for your operating system and architecture. You can download the JDK installation file from the Oracle website: <a class="link" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>.
					</li><li class="listitem">
						Run the JDK installation file.
					</li><li class="listitem"><p class="simpara">
						Open <code class="literal">/usr</code> at a shell prompt, and run the following command to display the current Java symbolic link:
					</p><pre class="screen">ls -lad java</pre></li><li class="listitem"><p class="simpara">
						Remove the link:
					</p><pre class="screen">rm java</pre></li><li class="listitem"><p class="simpara">
						Create a new Java symbolic link to the newly installed JDK:
					</p><pre class="screen">ln -sf /usr/jdk/<span class="emphasis"><em>&lt;JDK&gt;</em></span></pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="downloading_and_extracting_jboss_web_server_3"/>Downloading and Extracting JBoss Web Server</h1></div></div></div><p>
				To install JBoss Web Server, download and extract the installation ZIP files.
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Open a browser and log in to the <a class="link" href="http://access.redhat.com">Red Hat Customer Portal</a>.
					</li><li class="listitem">
						Click <span class="strong"><strong>Downloads</strong></span>.
					</li><li class="listitem">
						Click <span class="strong"><strong>Red Hat JBoss Web Server</strong></span> in the <span class="strong"><strong>Product Downloads</strong></span> list.
					</li><li class="listitem">
						Select the correct JBoss Web Server version from the <span class="strong"><strong>Version</strong></span> drop-down menu.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong"><strong>Download</strong></span> for each of the following files, ensuring that you select the correct platform and architecture for your system:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								The Red Hat JBoss Web Server 5.0 Application Server (<code class="literal">jws-application-servers-5.0.0.zip</code>).
							</li><li class="listitem">
								The Red Hat JBoss Web Server 5.0 Native Components for Solaris (<code class="literal">jws-application-servers-5.0.0-<span class="emphasis"><em>&lt;platform&gt;</em></span>-<span class="emphasis"><em>&lt;architecture&gt;</em></span>.zip</code>).
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Unzip the downloaded ZIP files to your installation directory.
					</p><p class="simpara">
						For example:
					</p><pre class="screen"># unzip jws-application-server-5.0.0.zip -d /opt/
# unzip -o jws-application-server-5.0.0-<span class="emphasis"><em>&lt;platform&gt;</em></span>-<span class="emphasis"><em>&lt;architecture&gt;</em></span>.zip -d /opt/</pre></li></ol></div><p>
				The directory created by extracting the ZIP archives is the top-level directory for JBoss Web Server. This is referred to as <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span></code>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_the_jboss_web_server_installation_3"/>Configuring the JBoss Web Server Installation</h1></div></div></div><p>
				Some configuration is required before running JBoss Web Server. This section includes the following configuration procedures:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="installing_jboss_web_server_on_solaris.html#post_install_scripts_sol" title="Running the Post-Installation Scripts">Running the Post-Installation Scripts</a>
					</li></ul></div><div class="orderedlist"><a id="post_install_scripts_sol"/><p class="title"><strong>Running the Post-Installation Scripts</strong></p><ol class="orderedlist"><li class="listitem">
						Open a shell prompt, and change directory to <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat/</code>.
					</li><li class="listitem"><p class="simpara">
						As the root user, run the post-installation scripts:
					</p><pre class="screen"># sh .postinstall.tomcat</pre><p class="simpara">
						The post-installation script:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								Sets the <code class="literal">JAVA_HOME</code> environment variable.
							</li><li class="listitem">
								Creates the <code class="literal">tomcat</code> user.
							</li><li class="listitem">
								Creates the <code class="literal">tomcat</code> user group.
							</li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managing_jboss_web_server_on_solaris_using_a_system_daemon"/>Managing JBoss Web Server on Solaris using a system daemon</h1></div></div></div><p>
				Managing a JBoss Web Server with a system daemon allows the web server to restart automatically after a reboot or power outage without user intervention. The system daemon also ensures that the JBoss Web Server is running as the <code class="literal">tomcat</code> user and provides some basic logging.
			</p><p>
				SysV and the Service Management Facility (SMF) are the two system daemons found on Solaris.
			</p><p>
				For SysV users:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						To add JBoss Web Server 5.0 to SysV, see: <a class="link" href="installing_jboss_web_server_on_solaris.html#enabling-jws-managment-using-sysv-on-solaris_jboss_web_server_installation_guide" title="Enabling JBoss Web Server 5.0 management using SysV on Solaris">Enabling JBoss Web Server 5.0 management using SysV on Solaris</a>
					</li><li class="listitem">
						To review basic management commands for JBoss Web Server on SysV, see: <a class="link" href="installing_jboss_web_server_on_solaris.html#ref_managing-jws-using-sysv_jboss_web_server_installation_guide" title="Managing the JBoss Web Server using SysV">Managing the JBoss Web Server using SysV</a>
					</li></ul></div><p>
				For SMF users:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						To add JBoss Web Server 5.0 to the SMF, see: <a class="link" href="installing_jboss_web_server_on_solaris.html#enabling-jws-managment-using-the-solaris-service-management-facility-smf_jboss_web_server_installation_guide" title="Enabling JBoss Web Server 5.0 management using the Solaris Service Management Facility (SMF)">Enabling JBoss Web Server 5.0 management using the Solaris Service Management Facility (SMF)</a>
					</li><li class="listitem">
						To review basic management commands for JBoss Web Server on SysV, see: <a class="link" href="installing_jboss_web_server_on_solaris.html#ref_managing-jws-using-the-smf_jboss_web_server_installation_guide" title="Managing the JBoss Web Server using the Service Management Facility (SMF)">Managing the JBoss Web Server using the Service Management Facility (SMF)</a>
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="enabling-jws-managment-using-sysv-on-solaris_jboss_web_server_installation_guide"/>Enabling JBoss Web Server 5.0 management using SysV on Solaris</h2></div></div></div><p>
					Using the JBoss Web Server with SysV provides start, stop and status check functions for the tomcat service. This procedure shows how to add JBoss Web Server 5.0 to SysV.
				</p><h4><a id="prerequisites_3"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Root user access.
						</li><li class="listitem">
							The Red Hat JBoss Web Server 5.0 installed on Oracle Solaris.
						</li><li class="listitem">
							SysV is the default system daemon.
						</li><li class="listitem">
							The postinstall script (<code class="literal">.postinstall.tomcat</code>) has been executed as the root user.
						</li></ul></div><h4><a id="procedure"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							On a command line, change to the <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat/</code> directory.
						</li><li class="listitem"><p class="simpara">
							Copy the control script from the <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat/services</code> directory to <code class="literal">/etc/init.d/</code>:
						</p><pre class="screen"># cp services/jws5-tomcat.init /etc/init.d/jws5-tomcat</pre></li><li class="listitem"><p class="simpara">
							Issue the following command to set the control script as executable:
						</p><pre class="screen"># chmod +x /etc/init.d/jws5-tomcat</pre></li></ol></div><h4><a id="results"/>Results</h4><p>
					The JBoss Web Server 5.0 instance of tomcat should now be present in SysV. For example:
				</p><pre class="screen">$ <span class="strong"><strong>service jws5-tomcat status</strong></span>

jws5-tomcat is stopped</pre><h4><a id="next_steps"/>Next Steps</h4><p>
					For information on the basic commands for controlling JBoss Web Server 5.0 using SysV, see: <a class="xref" href="installing_jboss_web_server_on_solaris.html#ref_managing-jws-using-sysv_jboss_web_server_installation_guide" title="Managing the JBoss Web Server using SysV">the section called “Managing the JBoss Web Server using SysV”</a>.
				</p><h4><a id="additional_resources"/>Additional Resources</h4><p>
					For information on using SysV, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/s1-services-running">Red Hat Enterprise Linux 6 Deployment Guide: Running Services</a>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref_managing-jws-using-sysv_jboss_web_server_installation_guide"/>Managing the JBoss Web Server using SysV</h2></div></div></div><p>
					SysV commands can only be issued by the root user.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							To enable the JBoss Web Server services to start at boot using SysV:
						</p><pre class="screen"># chkconfig jws5-tomcat on</pre></li><li class="listitem"><p class="simpara">
							To start the JBoss Web Server using SysV:
						</p><pre class="screen"># service jws5-tomcat start</pre></li><li class="listitem"><p class="simpara">
							To stop the JBoss Web Server using SysV:
						</p><pre class="screen"># service jws5-tomcat stop</pre></li><li class="listitem"><p class="simpara">
							To verify the status of the JBoss Web Server using SysV (the <code class="literal">status</code> operation can be executed by any user):
						</p><pre class="screen">$ service jws5-tomcat status</pre></li></ul></div><p>
					For information on using SysV, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/s1-services-running">Red Hat Enterprise Linux 6 Deployment Guide: Running Services</a>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="enabling-jws-managment-using-the-solaris-service-management-facility-smf_jboss_web_server_installation_guide"/>Enabling JBoss Web Server 5.0 management using the Solaris Service Management Facility (SMF)</h2></div></div></div><p>
					Using the JBoss Web Server with Service Management Facility (SMF) provides start, stop and status check functions for the tomcat service. This procedure shows how to add JBoss Web Server 5.0 to the SMF.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The service runlevel of <code class="literal">3</code> in the following procedure is a recommended value. For more information on Solaris runlevels, see: <a class="link" href="https://docs.oracle.com/cd/E23824_01/html/821-1451/hbrunlevels-13026.html">Oracle Solaris Administration: Common Tasks - Run Levels</a>
					</p></div><h4><a id="prerequisites_4"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Root user access.
						</li><li class="listitem">
							The Red Hat JBoss Web Server 5.0 installed on Oracle Solaris 10 or newer.
						</li><li class="listitem">
							The Oracle Solaris Service Management Facility (SMF) is the default system daemon.
						</li><li class="listitem">
							The postinstall script (<code class="literal">.postinstall.tomcat</code>) has been executed as the root user.
						</li></ul></div><h4><a id="procedure_2"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							On a command line, change to the <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat/</code> directory.
						</li><li class="listitem"><p class="simpara">
							As the root user, import the control script into the SMF using the <code class="literal">svcbundle</code> command:
						</p><pre class="screen"># svcbundle -i -s rc-script=<span class="emphasis"><em>JWS_HOME</em></span>/tomcat/services/jws5-tomcat.init:3 -s service-name=jws5-tomcat</pre></li></ol></div><h4><a id="results_2"/>Results</h4><p>
					The JBoss Web Server 5.0 instance of tomcat should now be present in the SMF. For example:
				</p><pre class="screen"># <span class="strong"><strong>svcs -l jws5-tomcat</strong></span>

fmri         svc:/jws5-tomcat:default
enabled      true
state        online
next_state   none
state_time   July 25, 2018 01:59:29 AM AEST
logfile      /var/svc/log/jws5-tomcat:default.log
restarter    svc:/system/svc/restarter:default
manifest     /lib/svc/manifest/site/jws5-tomcat.xml
dependency   require_all/none svc:/milestone/multi-user (online)</pre><h4><a id="next_steps_2"/>Next Steps</h4><p>
					For information on the basic commands for controlling JBoss Web Server 5.0 using the SMF, see: <a class="xref" href="installing_jboss_web_server_on_solaris.html#ref_managing-jws-using-the-smf_jboss_web_server_installation_guide" title="Managing the JBoss Web Server using the Service Management Facility (SMF)">the section called “Managing the JBoss Web Server using the Service Management Facility (SMF)”</a>.
				</p><h4><a id="additional_resources_2"/>Additional Resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For information on the Oracle Solaris Service Management Facility (SMF), see: <a class="link" href="http://www.oracle.com/technetwork/articles/servers-storage-admin/intro-smf-basics-s11-1729181.html">Oracle: Introducing the Basics of Service Management Facility (SMF) on Oracle Solaris 11</a>.
						</li><li class="listitem">
							For information on the basic usage of the SMF, see: <a class="link" href="https://docs.oracle.com/cd/E23824_01/html/821-1451/eqbrs.html">Oracle Solaris Administration: Common Tasks - Managing SMF Services</a>.
						</li><li class="listitem">
							For information on using the <code class="literal">svcbundle</code> command to migrate control scripts to the SMF, see: <a class="link" href="https://docs.oracle.com/cd/E53394_01/html/E60814/convrcscript.html">Oracle: Developing System Services in Oracle® Solaris 11.3 - Converting a Run Control Script to an SMF Service</a>.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref_managing-jws-using-the-smf_jboss_web_server_installation_guide"/>Managing the JBoss Web Server using the Service Management Facility (SMF)</h2></div></div></div><p>
					The Service Management Facility (SMF) is the default system daemon for Oracle Solaris 10 or higher.
				</p><p>
					SMF commands can only be issued by the root user.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							To enable the JBoss Web Server services to start at boot using the SMF:
						</p><pre class="screen"># svcadm enable jws5-tomcat</pre></li><li class="listitem"><p class="simpara">
							To start the JBoss Web Server using the SMF:
						</p><pre class="screen"># svcadm enable -t jws5-tomcat</pre></li><li class="listitem"><p class="simpara">
							To stop the JBoss Web Server using the SMF:
						</p><pre class="screen"># svcadm disable -t jws5-tomcat</pre></li><li class="listitem"><p class="simpara">
							To verify the status of the JBoss Web Server using the SMF:
						</p><pre class="screen">$ svcs -l jws5-tomcat</pre></li></ul></div><h4><a id="additional_resources_3"/>Additional Resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For information on the Oracle Solaris Service Management Facility (SMF), see: <a class="link" href="http://www.oracle.com/technetwork/articles/servers-storage-admin/intro-smf-basics-s11-1729181.html">Oracle: Introducing the Basics of Service Management Facility (SMF) on Oracle Solaris 11</a>.
						</li><li class="listitem">
							For information on the basic usage of the SMF, see: <a class="link" href="https://docs.oracle.com/cd/E23824_01/html/821-1451/eqbrs.html">Oracle Solaris Administration: Common Tasks - Managing SMF Services</a>.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="manually_managing_jboss_web_server_on_solaris"/>Manually managing JBoss Web Server on Solaris</h1></div></div></div><p>
				To manually start or stop JBoss Web Server on Solaris using JSVC:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="installing_jboss_web_server_on_solaris.html#starting-jws-on-solaris" title="Starting JBoss Web Server">the section called “Starting JBoss Web Server”</a>
					</li><li class="listitem">
						<a class="xref" href="installing_jboss_web_server_on_solaris.html#stopping-jws-on-solaris" title="Stopping JBoss Web Server">the section called “Stopping JBoss Web Server”</a>
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="starting-jws-on-solaris"/>Starting JBoss Web Server</h2></div></div></div><p>
					To start JBoss Web Server: as the root user, run the following command:
				</p><pre class="screen"># sh <span class="emphasis"><em>JWS_HOME</em></span>/tomcat/bin/daemon.sh start</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Although there are multiple methods of starting Tomcat, it is recommended that you use the <code class="literal">daemon.sh</code> script. To start Tomcat as a service using Jsvc, see <a class="link" href="using_jsvc_to_start_tomcat.html" title="Chapter 5. Using Jsvc to Start Tomcat">the Jsvc chapter</a>.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopping-jws-on-solaris"/>Stopping JBoss Web Server</h2></div></div></div><p>
					To stop JBoss Web Server: as the root user, run the following command:
				</p><pre class="screen"># sh <span class="emphasis"><em>JWS_HOME</em></span>/tomcat/bin/daemon.sh stop</pre></div></div></div></body></html>