<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 6. Hibernate on JBoss Web Server</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="hibernate_on_jboss_web_server"/>Chapter 6. Hibernate on JBoss Web Server</h1></div></div></div><p>
			Hibernate is an object-relational mapping framework. It is provided by the JBoss Web Server Maven Repository (<code class="literal">jboss-web-server-5.0.0-maven-repository.zip</code>). This packaged version is used on all supported platforms.
		</p><p>
			Hibernate is used in the same way it is used for a regular Tomcat installation: the Hibernate JAR files are added into a deployment WAR file. Tomcat provides a default connection pooling mechanism, which is defined in <code class="literal">context.xml</code>. However, <code class="literal">persistence.xml</code> and <code class="literal">web.xml</code> are also required. The example below shows a configuration with the Tomcat connection pooling mechanism.
		</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
					<code class="literal">/META-INF/context.xml</code> defines the connection pools Tomcat should create.
				</p><div class="title"><strong>context.xml</strong></div><p>
						
</p><pre class="programlisting">&lt;Context&gt;
  &lt;Resource
    name="jdbc/DsWebAppDB"
    auth="Container"
    type="javax.sql.DataSource"
    username="sa"
    password=""
    driverClassName="org.h2.Driver"
    url="jdbc:h2:mem:target/test/db/h2/hibernate"
    maxActive="8"
    maxIdle="4"/&gt;
&lt;/Context&gt;</pre><p>

					</p></li><li class="listitem"><p class="simpara">
					<code class="literal">/WEB-INF/classes/META-INF/persistence.xml</code> is a JPA configuration file. It defines how the application configures Hibernate to consume connections from the Tomcat pool. If you are using the Hibernate API directly, use a similar configuration to that shown in <code class="literal">hibernate.cfg.xml</code>.
				</p><div class="title"><strong>persistence.xml</strong></div><p>
						
</p><pre class="programlisting">&lt;persistence version="1.0"
  xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"&gt;

  &lt;persistence-unit name="dswebapp"&gt;
    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
    &lt;properties&gt;
      &lt;property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" /&gt;
      &lt;property name="hibernate.connection.datasource" value="java:comp/env/jdbc/DsWebAppDB"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre><p>

					</p></li><li class="listitem"><p class="simpara">
					<code class="literal">/WEB-INF/web.xml</code> is a regular web application deployment file, which instructs Tomcat which datasource to consume. In the example below, the datasource is <code class="literal">jdbc/DsWebAppDB</code>.
				</p><div class="title"><strong>web.xml</strong></div><p>
						
</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;

 &lt;resource-env-ref&gt;
  &lt;resource-env-ref-name&gt;jdbc/DsWebAppDB&lt;/resource-env-ref-name&gt;
  &lt;resource-env-ref-type&gt;javax.sql.DataSource&lt;/resource-env-ref-type&gt;
 &lt;/resource-env-ref&gt;
&lt;/web-app&gt;</pre><p>

					</p></li></ul></div><p>
			For details, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_web_server/3/html-single/hibernate_core_reference_guide/">Hibernate documentation for JBoss Web Server</a>.
		</p></div></body></html>