<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Appendix A. Apache HTTP Server Reference</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="apache_http_server_reference"/>Appendix A. Apache HTTP Server Reference</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="apache_http_modules"/>Apache HTTP Server Modules</h1></div></div></div><p>
				This section contains expanded definitions of the Apache HTTP Server proxy modules discussed in <a class="link" href="mod_cluster_connector.html#mod_cluster_components" title="Components">mod_cluster components</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mod_manager_so"/>mod_manager.so</h2></div></div></div><p>
					The cluster manager module, <code class="literal">mod_manager</code>, receives and acknowledges messages from nodes, including worker node registrations, worker node load data, and worker node application life cycle events.
				</p><pre class="screen">LoadModule manager_module modules/mod_manager.so</pre><p>
					Configurable directives in the <code class="literal">&lt;VirtualHost&gt;</code> element are as follows:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">EnableMCPMReceive</span></dt><dd>
								Allows the <code class="literal">VirtualHost</code> to receive the mod_cluster Protocol Message <code class="literal">(MCPM)</code> from nodes. Add one <code class="literal">EnableMCPMReceive</code> directive to the Apache HTTP Server configuration to allow <code class="literal">mod_cluster</code> to operate correctly. <code class="literal">EnableMCPMReceive</code> must be added in the <code class="literal">VirtualHost</code> configuration at the location where <code class="literal">advertise</code> is configured.
							</dd><dt><span class="term">MaxMCMPMaxMessSize</span></dt><dd>
								Defines the maximum size of mod_cluster Management Protocol <code class="literal">(MCMP)</code> messages. The default value is calculated from other <code class="literal">Max</code> directives. The minimum value is <code class="literal">1024</code>.
							</dd><dt><span class="term">AllowDisplay</span></dt><dd>
								Toggles the additional display on the <code class="literal">mod_cluster-manager</code> main page. The default value is <code class="literal">off</code>, which causes only version information to display on the <code class="literal">mod_cluster-manager</code> main page.
							</dd><dt><span class="term">AllowCmd</span></dt><dd>
								Toggles permissions for commands using <code class="literal">mod_cluster-manager</code> URL. The default value is <code class="literal">on</code>, which allows commands.
							</dd><dt><span class="term">ReduceDisplay</span></dt><dd>
								Toggles the reduction of information displayed on the <code class="literal">mod_cluster-manager</code> page. Reducing the information allows more nodes to display on the page. The default value is <code class="literal">off</code>, which allows all the available information to display.
							</dd><dt><span class="term">MemManagerFile</span></dt><dd>
								Defines the location for the files in which mod_manager stores configuration details. mod_manager also uses this location for generated keys for shared memory and lock files. <span class="strong"><strong>This must be an absolute path name</strong></span>. It is recommended that this path be on a local drive, and not an NFS share. The default value is <code class="literal">/logs/</code> .
							</dd><dt><span class="term">Maxcontext</span></dt><dd>
								The maximum number of contexts mod_cluster will use. The default value is <code class="literal">100</code>.
							</dd><dt><span class="term">Maxnode</span></dt><dd>
								The maximum number of worker nodes mod_cluster will use. The default value is <code class="literal">20</code>.
							</dd><dt><span class="term">Maxhost</span></dt><dd>
								The maximum number of hosts (aliases) mod_cluster will use. This is also the maximum number of load balancers. The default value is <code class="literal">20</code>.
							</dd><dt><span class="term">Maxsessionid</span></dt><dd>
								The maximum number of active session identifiers stored. A session is considered inactive when no information is received from that session for five minutes. This is used for demonstration and debugging purposes only. The default value is <code class="literal">0</code>, which disables this logic.
							</dd><dt><span class="term">ManagerBalancerName</span></dt><dd>
								The name of the load balancer to use when the worker node does not provide a load balancer name. The default value is <code class="literal">mycluster</code>.
							</dd><dt><span class="term">PersistSlots</span></dt><dd>
								When set to <code class="literal">on</code>, nodes, aliases, and contexts are persisted in files. The default value is <code class="literal">off</code>.
							</dd><dt><span class="term">CheckNonce</span></dt><dd><p class="simpara">
								When set to <code class="literal">on</code>, session identifiers are checked to ensure that they are unique and have not occurred before. The default is <code class="literal">on</code>.
							</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
									Setting this directive to <code class="literal">off</code> can leave your server vulnerable to replay attacks.
								</p></div></dd><dt><span class="term">SetHandler mod_cluster-manager</span></dt><dd><p class="simpara">
								Defines a handler to display information about worker nodes in the cluster. This is defined in the <code class="literal">Location</code> element:
							</p><pre class="screen">&lt;Location $LOCATION&gt;
  SetHandler mod_cluster-manager
  Require ip 127.0.0.1
&lt;/Location&gt;</pre><p class="simpara">
								When accessing the <code class="literal">$LOCATION</code> defined in the <code class="literal">Location</code> element in your browser, you will see something like the following. (In this case, <code class="literal">$LOCATION</code> was also defined as <code class="literal">mod_cluster-handler</code>.)
							</p></dd></dl></div><p>
					<code class="literal">Transferred</code> corresponds to the POST data sent to the worker node. <code class="literal">Connected</code> corresponds to the number of requests that had been processed when this status page was requested. <code class="literal">Sessions</code> corresponds to the number of active sessions. This field is not present when <code class="literal">Maxsessionid</code> is <code class="literal">0</code>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mod_proxy_cluster_so"/>mod_proxy_cluster.so</h2></div></div></div><p>
					The Proxy Balancer Module, <code class="literal">mod_proxy_cluster</code>, handles the routing of requests to cluster nodes. The Proxy Balancer selects the appropriate node to forward the request to based on the application location in the cluster, the current state of each of the cluster nodes, and the Session ID (if a request is part of an established session).
				</p><pre class="screen">LoadModule proxy_cluster_module modules/mod_proxy_cluster.so</pre><p>
					You can also configure the following directives in the <code class="literal">&lt;VirtualHost&gt;</code> element to change the load balancing behavior.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">CreateBalancers</span></dt><dd><p class="simpara">
								Defines how load balancers are created in the Apache HTTP Server virtual hosts. The following values are valid in <code class="literal">CreateBalancers</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<code class="literal">0</code>: Create load balancers in all virtual hosts defined in Apache HTTP Server. Remember to configure the load balancers in the <code class="literal">ProxyPass</code> directive.
									</li><li class="listitem">
										<code class="literal">1</code>: Do not create balancers. When using this value, you must also define the load balancer name in <code class="literal">ProxyPass</code> or <code class="literal">ProxyPassMatch</code>.
									</li><li class="listitem">
										<code class="literal">2</code>: Create only the main server. This is the default value for <code class="literal">CreateBalancers</code>.
									</li></ul></div></dd><dt><span class="term">UseAlias</span></dt><dd><p class="simpara">
								Defines whether to check that the defined <code class="literal">Alias</code> corresponds to the <code class="literal">ServerName</code>. The following values are valid for <code class="literal">UseAlias</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<code class="literal">0</code>: Ignore alias information from worker nodes. This is the default value for <code class="literal">UseAlias</code>.
									</li><li class="listitem">
										<code class="literal">1</code>: Verify that the defined alias corresponds to a worker node’s server name.
									</li></ul></div></dd><dt><span class="term">LBstatusRecalTime</span></dt><dd>
								Defines the interval in seconds between the proxy calculating the status of a worker node. The default interval is <code class="literal">5</code> seconds.
							</dd><dt><span class="term">ProxyPassMatch; ProxyPass</span></dt><dd><p class="simpara">
								<code class="literal">ProxyPass</code> maps remote servers into the local server namespace. If the local server has an address <code class="literal"><a class="link" href="http://local.com/">http://local.com/</a></code>, then the following <code class="literal">ProxyPass</code> directive would convert a local request for <code class="literal"><a class="link" href="http://local.com/requested/file1">http://local.com/requested/file1</a></code> into a proxy request for <code class="literal"><a class="link" href="http://worker.local.com/file1">http://worker.local.com/file1</a></code>.
							</p><pre class="screen">ProxyPass /requested/ http://worker.local.com/</pre><p class="simpara">
								<code class="literal">ProxyPassMatch</code> uses regular expressions to match local paths to which the proxied URL should apply.
							</p><p class="simpara">
								For either directive, <code class="literal">!</code> indicates that a specified path is local, and a request for that path should not be routed to a remote server. For example, the following directive specifies that <code class="literal">gif</code> files should be served locally.
							</p><pre class="screen">ProxyPassMatch ^(/.*\.gif)$ !</pre></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mod_advertise_so"/>mod_advertise.so</h2></div></div></div><p>
					The Proxy Advertisement Module, <code class="literal">mod_advertise.so</code>, broadcasts the existence of the proxy server via UDP multicast messages. The server advertisement messages contain the IP address and port number where the proxy is listening for responses from nodes that wish to join the load-balancing cluster.
				</p><p>
					This module must be defined alongside <code class="literal">mod_manager</code> in the <code class="literal">VirtualHost</code> element. Its identifier in the following example is <code class="literal">advertise_module</code>.
				</p><pre class="screen">LoadModule advertise_module modules/mod_advertise.so</pre><p>
					mod_advertise is configurable using the following directives:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">ServerAdvertise</span></dt><dd><p class="simpara">
								Defines how the advertising mechanism is used.
							</p><p class="simpara">
								The default value is <code class="literal">Off</code>. When set to <code class="literal">Off</code>, the proxy does not advertise its location.
							</p><p class="simpara">
								When set to <code class="literal">On</code>, the advertising mechanism is used to tell worker nodes to send status information to this proxy. You can also specify a host name and port with the following syntax: <code class="literal">ServerAdvertise On http://<span class="emphasis"><em>HOSTNAME</em></span>:<span class="emphasis"><em>PORT</em></span>/</code>. This is only required when using a name-based virtual host, or when a virtual host is not defined.
							</p></dd><dt><span class="term">AdvertiseGroup</span></dt><dd><p class="simpara">
								Defines the multicast address to advertise on. The syntax is <code class="literal">AdvertiseGroup <span class="emphasis"><em>ADDRESS</em></span>:<span class="emphasis"><em>PORT</em></span></code>, where <code class="literal"><span class="emphasis"><em>ADDRESS</em></span></code> must correspond to <code class="literal">AdvertiseGroupAddress</code>, and <code class="literal"><span class="emphasis"><em>PORT</em></span></code> must correspond to <code class="literal">AdvertisePort</code> in your worker nodes.
							</p><p class="simpara">
								If your worker node is JBoss EAP-based, and the <code class="literal">-u</code> switch is used at startup, the default <code class="literal">AdvertiseGroupAddress</code> is the value passed via the <code class="literal">-u</code> switch.
							</p><p class="simpara">
								The default value is <code class="literal">224.0.1.105:23364</code>. If a port is not specified, the port defaults to <code class="literal">23364</code>.
							</p></dd><dt><span class="term">AdvertiseFrequency</span></dt><dd>
								The interval (in seconds) between multicast messages advertising the IP address and port. The default value is <code class="literal">10</code>.
							</dd><dt><span class="term">AdvertiseSecurityKey</span></dt><dd>
								Defines a string used to identify mod_cluster in Apache HTTP Server. By default this directive is not set and no information is sent.
							</dd><dt><span class="term">AdvertiseManagerUrl</span></dt><dd>
								Defines the URL that the worker node should use to send information to the proxy server. By default this directive is not set and no information is sent.
							</dd><dt><span class="term">AdvertiseBindAddress</span></dt><dd>
								Defines the address and port over which to send multicast messages. The syntax is <code class="literal">AdvertiseBindAddress <span class="emphasis"><em>ADDRESS</em></span>:<span class="emphasis"><em>PORT</em></span></code>. This allows an address to be specified on machines with multiple IP addresses. The default value is <code class="literal">0.0.0.0:23364</code>.
							</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mod_proxy_so"/>mod_proxy.so</h2></div></div></div><p>
					<code class="literal">mod_proxy.so</code> is a standard Apache HTTP Server module. This module lets the server act as proxy for data transferred over AJP (Apache JServe Protocol), FTP, CONNECT (for SSL), and HTTP. This module does not require additional configuration. Its identifier is <code class="literal">proxy_module</code>.
				</p><p>
					<code class="literal">Mod_proxy</code> directives such as <code class="literal">ProxyIOBufferSize</code> are used to configure <code class="literal">mod_cluster</code>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mod_proxy_ajp_so"/>mod_proxy_ajp.so</h2></div></div></div><p>
					<code class="literal">mod_proxy_ajp.so</code> is a standard Apache HTTP Server module that provides support for AJP (Apache JServe Protocol) proxying. <code class="literal">mod_proxy.so</code> is required to use this module.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mod_cluster_slotmem"/>mod_cluster_slotmem</h2></div></div></div><p>
					<code class="literal">mod_cluster_slotmem</code> does not require any configuration directives.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="workers_properties"/>workers.properties</h1></div></div></div><p>
				Apache HTTP Server worker nodes are servlet containers that are mapped to the <code class="literal">mod_jk</code> load balancer. The worker nodes are defined in <code class="literal"><span class="emphasis"><em>JBCS_HOME</em></span>/httpd/conf/workers.properties</code>. This file specifies where the different servlet containers are located, and how calls should be load-balanced across them.
			</p><p>
				The <code class="literal">workers.properties</code> file contains two sections:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Global Properties</span></dt><dd>
							This section contains directives that apply to all workers.
						</dd><dt><span class="term">Worker Properties</span></dt><dd>
							This section contains directives that apply to each individual worker.
						</dd></dl></div><p>
				Each node is defined using the worker properties naming convention. The worker name can only contain lowercase letters, uppercase letters, numbers, and specific special characters (<code class="literal">_</code>, <code class="literal">/</code>).
			</p><p>
				The structure of a worker property is <code class="literal">worker.<span class="emphasis"><em>WORKER_NAME</em></span>.<span class="emphasis"><em>DIRECTIVE</em></span></code>.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">worker</code></span></dt><dd>
							The constant prefix for all worker properties.
						</dd><dt><span class="term"><code class="literal"><span class="emphasis"><em>WORKER_NAME</em></span></code></span></dt><dd>
							The arbitrary name given to the worker. For example: <code class="literal">node1</code>, <code class="literal">node_01</code>, <code class="literal">Node_1</code>.
						</dd><dt><span class="term"><code class="literal"><span class="emphasis"><em>DIRECTIVE</em></span></code></span></dt><dd>
							The specific directive required.
						</dd></dl></div><p>
				The main directives required to configure worker nodes are described below.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					For the full list of <code class="literal">worker.properties</code> configuration directives, see the <a class="link" href="http://tomcat.apache.org/connectors-doc/reference/workers.html">Apache Tomcat Connector - Reference Guide</a>.
				</p></div><div class="variablelist"><p class="title"><strong>worker.properties Global Directives</strong></p><dl class="variablelist"><dt><span class="term">worker.list</span></dt><dd><p class="simpara">
							Specifies the list of worker names used by mod_jk. The workers in this list are available to map requests to.
						</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								A single node configuration which is not managed by a load balancer must be set to <code class="literal">worker.list=<span class="emphasis"><em>WORKER_NAME</em></span></code>.
							</p></div></dd></dl></div><div class="variablelist"><p class="title"><strong>workers.properties Mandatory Directives</strong></p><dl class="variablelist"><dt><span class="term">type</span></dt><dd><p class="simpara">
							Specifies the type of worker, which determines the directives applicable to the worker. The default value is <code class="literal">ajp13</code>, which is the preferred worker type to select for communication between the web server and Apache HTTP Server.
						</p><p class="simpara">
							Other values include <code class="literal">lb</code> and <code class="literal">status</code>.
						</p><p class="simpara">
							For detailed information about AJPv13, see the <a class="link" href="http://tomcat.apache.org/connectors-doc/ajp/ajpv13a.html">Apache Tomcat Connector - AJP Protocol Reference</a>.
						</p></dd></dl></div><div class="variablelist"><p class="title"><strong>workers.properties Connection Directives</strong></p><dl class="variablelist"><dt><span class="term">host</span></dt><dd><p class="simpara">
							The hostname or IP address of the worker. The worker node must support the ajp13 protocol stack. The default value is <code class="literal">localhost</code>.
						</p><p class="simpara">
							You can specify the <code class="literal">port</code> directive as part of the host directive by appending the port number after the host name or IP address. For example: <code class="literal">worker.node1.host=192.168.2.1:8009</code> or <code class="literal">worker.node1.host=node1.example.com:8009</code>.
						</p></dd><dt><span class="term">port</span></dt><dd>
							The port number of the remote server instance listening for the defined protocol requests. The default value is <code class="literal">8009</code>, which is the default listen port for AJPv13 workers.
						</dd><dt><span class="term">ping_mode</span></dt><dd><p class="simpara">
							Specifies the conditions under which connections are probed for their current network health.
						</p><p class="simpara">
							The probe uses an empty AJPv13 packet for the <code class="literal">CPing</code>, and expects a <code class="literal">CPong</code> in return, within a specified timeout.
						</p><p class="simpara">
							You specify the conditions by using a combination of the directive flags. The flags are not comma-separated. For example, a correct directive flag set is <code class="literal">worker.node1.ping_mode=CI</code>.
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">C (connect)</span></dt><dd>
										Specifies the connection is probed once after connecting to the server. You specify the timeout using the <code class="literal">connect_timeout</code> directive, otherwise the value for <code class="literal">ping_timeout</code> is used.
									</dd><dt><span class="term">P (prepost)</span></dt><dd>
										Specifies that the connection is probed before sending each request to the server. You specify the timeout using the <code class="literal">prepost_timeout</code> directive, otherwise the value for <code class="literal">ping_timeout</code> is used.
									</dd><dt><span class="term">I (interval)</span></dt><dd>
										Specifies that the connection is probed during regular internal maintenance cycles. You specify the idle time between each interval using the <code class="literal">connection_ping_interval</code> directive, otherwise the value for <code class="literal">ping_timeout</code> is used.
									</dd><dt><span class="term">A (all)</span></dt><dd>
										The most common setting, which specifies that all directive flags are applied. For information about the <code class="literal">\*_timeout</code> advanced directives, see the <a class="link" href="http://tomcat.apache.org/connectors-doc/reference/workers.html">Apache Tomcat Connector - Reference Guide</a>.
									</dd></dl></div></dd><dt><span class="term">ping_timeout</span></dt><dd>
							Specifies the time to wait for <code class="literal">CPong</code> answers to a <code class="literal">CPing</code> connection probe (see <code class="literal">ping_mode</code>). The default value is <code class="literal">10000</code> (milliseconds).
						</dd></dl></div><div class="variablelist"><p class="title"><strong>worker.properties Load Balancing Directives</strong></p><dl class="variablelist"><dt><span class="term">lbfactor</span></dt><dd><p class="simpara">
							Specifies the load-balancing factor for an individual worker, and is only specified for a member worker of a load balancer.
						</p><p class="simpara">
							This directive defines the relative amount of HTTP request load distributed to the worker compared to other workers in the cluster.
						</p><p class="simpara">
							A common example where this directive applies is where you want to differentiate servers with greater processing power than others in the cluster. For example, if you require a worker to take three times the load than other workers, specify <code class="literal">worker.<span class="emphasis"><em>WORKER_NAME</em></span>.lbfactor=3</code>.
						</p></dd><dt><span class="term">balance_workers</span></dt><dd>
							Specifies the worker nodes that the load balancer must manage. The directive can be used multiple times for the same load balancer, and consists of a comma-separated list of worker names as specified in the <code class="literal">workers.properties</code> file.
						</dd><dt><span class="term">sticky_session</span></dt><dd><p class="simpara">
							Specifies whether requests for workers with SESSION IDs are routed back to the same worker. The default is <code class="literal">0</code> (false). When set to <code class="literal">1</code> (true), load balancer persistence is enabled.
						</p><p class="simpara">
							For example, if you specify <code class="literal">worker.loadbalancer.sticky_session=0</code>, each request is load balanced between each node in the cluster. In other words, different requests for the same session can go to different servers based on server load.
						</p><p class="simpara">
							If you specify <code class="literal">worker.loadbalancer.sticky_session=1</code>, each session is persisted (locked) to one server until the session is terminated, providing that server is available.
						</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="multi_processing_modules"/>Multi-Processing Modules (MPMs)</h1></div></div></div><p>
				Red Hat JBoss Core Services includes a variety of multi-processing modules (MPMs), allowing for users to customize how the Apache HTTP Server answers incoming requests.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mpm_overview"/>MPM Overview</h2></div></div></div><p>
					An overview of the MPMs available per Operating System are outlined below.
				</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="unix_mpms"/>Unix MPMs</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">prefork</code> - The <code class="literal">prefork</code> MPM implements a non-threaded, pre-forking web server. A single control process is responsible for launching child processes, which listen for incoming connections and service them when they arrive. Each request is handled by a single process, ensuring that each request is isolated, and will not affect any other requests.
							</li><li class="listitem">
								<code class="literal">worker</code> - The <code class="literal">worker</code> MPM implements a hybrid multi-process, multi-threaded server. Each child process creates a fixed number of server threads, allowing the server to handle a large number of requests with fewer system resources.
							</li><li class="listitem">
								<code class="literal">event</code> - The <code class="literal">event</code> MPM is based off the <code class="literal">worker</code> MPM, but allows additional requests to be served simultaneously by passing off some processing work to the listener threads, therefore freeing up the worker threads to serve new requests.
							</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="windows_mpms"/>Windows MPMs</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<code class="literal">winnt</code> - The <code class="literal">winnt</code> MPM is the only one available for Windows systems. It uses a single control process, which launches a single process used to create threads for incoming requests.
							</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="switching_the_mpm"/>Switching the MPM</h2></div></div></div><p>
					The server selects the MPM based on the <code class="literal">LoadModule</code> directive found in <code class="literal"><span class="emphasis"><em>JBCS_HOME</em></span>/httpd/conf.modules.d/00-mpm.conf</code>. By default the <code class="literal">prefork</code> MPM is selected, as seen in the following line:
				</p><pre class="screen"># prefork MPM: Implements a non-threaded, pre-forking web server
# See: http://httpd.apache.org/docs/2.4/mod/prefork.html
LoadModule mpm_prefork_module modules/mod_mpm_prefork.so</pre><p>
					To adjust the MPM perform the following steps.
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Edit the <code class="literal"><span class="emphasis"><em>JBCS_HOME</em></span>/httpd/conf.modules.d/00-mpm.conf</code> to comment out the <code class="literal">LoadModule</code> directive for the <code class="literal">prefork</code> MPM. The following XML displays this MPM successfully commented.
						</p><pre class="screen"># prefork MPM: Implements a non-threaded, pre-forking web server
# See: http://httpd.apache.org/docs/2.4/mod/prefork.html
#LoadModule mpm_prefork_module modules/mod_mpm_prefork.so</pre></li><li class="listitem"><p class="simpara">
							In the same file, uncomment the <code class="literal">LoadModule</code> directive for the desired MPM. These lines are found immediately below the <code class="literal">prefork</code> MPM. For instance, to load the <code class="literal">worker</code> MPM the following would be used.
						</p><pre class="screen"># worker MPM: Multi-Processing Module implementing a hybrid
# multi-threaded multi-process web server
# See: http://httpd.apache.org/docs/2.4/mod/worker.html
LoadModule mpm_worker_module modules/mod_mpm_worker.so</pre></li><li class="listitem"><p class="simpara">
							Confirm the MPM has been configured correctly by running <code class="literal">apachectl -V</code>. This command displays the current MPM.
						</p><pre class="screen">$ sbin/apachectl -V
[...]
Server MPM:     worker
[...]</pre></li></ol></div></div></div></div></body></html>