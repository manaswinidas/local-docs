<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 3. Key new features and enhancements in the Red Hat JBoss Web Server 5.0</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="key_new_features_and_enhancements_in_the_red_hat_jboss_web_server_5_0"/>Chapter 3. Key new features and enhancements in the Red Hat JBoss Web Server 5.0</h1></div></div></div><p>
			The improvements introduced in the Red Hat JBoss Web Server 5.0 include:
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="based_on_apache_tomcat_9_0_7"/>Based on Apache Tomcat 9.0.7:</h1></div></div></div><p>
				The enhancements introduced by basing the JBoss Web Server 5.0 on Apache Tomcat 9.0.7 rather than Apache Tomcat 8 used by the JBoss Web Server 3.1 include:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="key_new_features_and_enhancements_in_the_red_hat_jboss_web_server_5_0.html#http2_support" title="HTTP/2 support">HTTP/2 support</a>
					</li><li class="listitem">
						<a class="link" href="key_new_features_and_enhancements_in_the_red_hat_jboss_web_server_5_0.html#tls_support_for_jsse_connectors" title="Support for using OpenSSL for TLS support with the JSSE connectors (NIO and NIO2)">Support for using OpenSSL for TLS support with the JSSE connectors (NIO and NIO2)</a>
					</li><li class="listitem">
						<a class="link" href="key_new_features_and_enhancements_in_the_red_hat_jboss_web_server_5_0.html#nio_connector_default_http11_connector" title="The NIO connector is the default for HTTP/1.1 connections when the tomcat-native is installed">The NIO connector is the default for HTTP/1.1 connections when the tomcat-native is installed</a>
					</li><li class="listitem">
						<a class="link" href="key_new_features_and_enhancements_in_the_red_hat_jboss_web_server_5_0.html#tls_virtual_hosting_sni" title="Support for TLS virtual hosting (SNI)">Support for TLS virtual hosting (SNI)</a>
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="http2_support"/>HTTP/2 support</h2></div></div></div><p>
					The Hypertext Transfer Protocols are standard methods of transmitting data between applications (such as servers and browsers) over the internet. HTTP/2 improves on HTTP/1.1 by providing enhancements such as:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							header compression - reducing the size of the header transmitted by omitting implied information, and
						</li><li class="listitem">
							multiple requests and responses over a single connection - using binary framing to break down response messages, as opposed to textual framing.
						</li></ul></div><p>
					Using HTTP/2 with the JBoss Web Server:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<span class="strong"><strong>is supported</strong></span> for encrypted connections over TLS (<code class="literal">h2</code>).
						</li><li class="listitem">
							<span class="strong"><strong>is not supported</strong></span> for unencrypted connections over TCP (<code class="literal">h2c</code>).
						</li></ul></div><p>
					For configuration instructions, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_web_server/5.0/html-single/installation_guide/#enabling_http2_for_JBoss_Web_Server_jboss_web_server_installation_guide">The Red Hat JBoss Web Server 5.0 Installation Guide - Enabling HTTP/2 for the Red Hat JBoss Web Server</a>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="tls_support_for_jsse_connectors"/>Support for using OpenSSL for TLS support with the JSSE connectors (NIO and NIO2)</h2></div></div></div><p>
					For JBoss Web Server 5.0, the Java Secure Socket Extension (JSSE) connectors (NIO and NIO2) can access OpenSSL directly though tomcat-native. This allows NIO and NIO2 connector to use OpenSSL without the APR connector.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="nio_connector_default_http11_connector"/>The NIO connector is the default for HTTP/1.1 connections when the tomcat-native is installed</h2></div></div></div><p>
					The JBoss Web Server 5.0 defaults to using the NIO connector for HTTP/1.1 connections when the tomcat-native libraries (for example APR) are installed.
				</p><p>
					To set APR as the default connector, set <code class="literal">useAprConnector="true"</code> on the <code class="literal">AprLifecycleListener</code> defined in the <code class="literal"><span class="emphasis"><em>&lt;JWS_HOME&gt;</em></span>/conf/server.xml</code> and restart the JBoss Web Server.
				</p><p>
					For example:
				</p><pre class="programlisting">&lt;Listener className="org.apache.catalina.core.AprLifecycleListener"
    useAprConnector="true" SSLEngine="on"/&gt;</pre><p>
					For more information on the APR Lifecycle Listener, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/config/listeners.html#APR_Lifecycle_Listener_-_org.apache.catalina.core.AprLifecycleListener">Apache Tomcat 9 Configuration Reference: The LifeCycle Listener Component - APR Lifecycle Listener</a>
				</p><p>
					For an additional example of using the <code class="literal">useAprConnector</code>, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/ssl-howto.html#Edit_the_Tomcat_Configuration_File">Apache Tomcat 9: SSL/TLS Configuration HOW-TO - Edit the Tomcat Configuration File</a>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="tls_virtual_hosting_sni"/>Support for TLS virtual hosting (SNI)</h2></div></div></div><p>
					Server Name Indication (SNI) using the <code class="literal">SSLHostConfig</code> element allows for more than one SSL configuration for a given connector (including multiple certificates for a given connector).
				</p><p>
					For more information on Server Name Indication, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/config/http.html#Nested_Components">Apache Tomcat 9 Configuration Reference: The HTTP Connector - Nested Components</a>
				</p><p>
					For information on configuring <code class="literal">SSLHostConfig</code>, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/config/http.html#SSL_Support">Apache Tomcat 9 Configuration Reference: The HTTP Connector - SSL Support</a>
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="system_daemon_integration_scripts_provided_for_the_red_hat_enterprise_linux_users_installing_from_zip_archives"/>System daemon integration scripts provided for the Red Hat Enterprise Linux users installing from .zip archives</h1></div></div></div><p>
				Red Hat Enterprise Linux users installing JBoss Web Server from .zip archives are provided post-install scripts to assist with setting up JBoss Web Server as a systemd or SysV service.
			</p><p>
				Using the JBoss Web Server with a system daemon provides a method of starting the JBoss Web Server services at system boot. The system daemon also provides start, stop and status check functions.
			</p><p>
				For setup instructions see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_web_server/5.0/html-single/installation_guide/#configuring_jboss_web_server_to_start_at_boot_for_zip_installations_on_red_hat_enterprise_linux">The Red Hat JBoss Web Server 5.0 Installation Guide - Configuring JBoss Web Server to start at boot for .zip installations on Red Hat Enterprise Linux</a>
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="the_tomcat_vault_installation_process_has_been_improved"/>The tomcat-vault installation process has been improved</h1></div></div></div><p>
				The Tomcat Password Vault is included in the <code class="literal">jws-application-server-5.0.0.zip</code> file used for installing JBoss Web Server and is pre-installed at <code class="literal">jws-5.0/tomcat/lib/tomcat-vault.jar</code> and can be used once configured.
			</p><p>
				For Red Hat Enterprise Linux users installing JBoss Web Server from RPMs using YUM, the Tomcat vault can now be installed using YUM:
			</p><pre class="screen"><code class="literal">yum install jws5-tomcat-vault</code></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="the_vault_properties_file_for_tomcat_vault_can_be_stored_outside_jws_home"/>The vault.properties file for tomcat-vault can be stored outside JWS_HOME</h1></div></div></div><p>
				As of the JBoss Web Server 5.0, the <code class="literal">vault.properties</code> file for the <code class="literal">tomcat-vault</code> can be stored outside of <span class="emphasis"><em>&lt;JWS_HOME&gt;</em></span> in the <span class="emphasis"><em>CATALINA_BASE</em></span> directory (if set).
			</p><p>
				To set the <span class="emphasis"><em>CATALINA_BASE</em></span> directory, follow the instructions in the section '<span class="strong"><strong>Advanced Configuration - Multiple Tomcat Instances</strong></span>' in the <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/RUNNING.txt">Running The Apache Tomcat 9.0 Servlet/JSP Container</a> document found on the Apache Tomcat Website.
			</p><p>
				Note that the default location for <span class="emphasis"><em>CATALINA_BASE</em></span> is <code class="literal"><span class="emphasis"><em>&lt;JWS_HOME&gt;</em></span>/tomcat/</code> (also known as <span class="emphasis"><em>CATALINA_HOME</em></span>).
			</p><p>
				For more information on the tomcat-vault, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_web_server/5.0/html-single/installation_guide/#using_a_password_vault_with_red_hat_jboss_web_server_5_0">Using a Password Vault with Red Hat JBoss Web Server 5.0</a>
			</p><p>
				For more information on setting <span class="emphasis"><em>CATALINA_BASE</em></span>, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/introduction.html#Directories_and_Files">Apache Tomcat 9: Introduction - Directories and Files</a>
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="change_in_manager_and_host_manager_webapp_behavior"/>Change in manager and host-manager webapp behavior</h1></div></div></div><p>
				The manager and host-manager web-applications can now only be accessed from the localhost. This is a new default restriction within the <code class="literal">context.xml</code> configuration files of the manager applications set using the Remote Address Valve (<code class="literal">RemoteAddrValve</code>).
			</p><p>
				For example:
			</p><pre class="programlisting">  &lt;Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" /&gt;</pre><p>
				To view or change this setting, see:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<span class="emphasis"><em>&lt;JWS_HOME&gt;</em></span>/webapps/manager/META-INF/context.xml
					</li><li class="listitem">
						<span class="emphasis"><em>&lt;JWS_HOME&gt;</em></span>/webapps/host-manager/META-INF/context.xml
					</li></ul></div><p>
				For more information on:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The Remote Address Valve, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Remote_Address_Valve">Apache Tomcat 9 Configuration Reference: The Valve Component - The Remote Address Valve</a>
					</li><li class="listitem">
						The Manager and Host-Manager applications included with JBoss Web Server, see: <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html">Apache Tomcat 9: Manager App HOW-TO</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="change_to_mod_cluster_1_4_a_connector_needs_to_be_specified"/>Change to mod_cluster 1.4 - a connector needs to be specified.</h1></div></div></div><p>
				Previous versions of mod_cluster automatically determined which connector to use. As a result, mod_cluster defaulted to the AJP connector and this behavior was difficult to override.
			</p><p>
				To improve usability, the mod_cluster 1.4 (provided with the JBoss Web Server 5.0) requires a connector to be explicitly set. One or more of the following new attributes require configuration for mod_cluster 1.4:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">connectorPort</code>
					</li><li class="listitem">
						<code class="literal">connectorAddress</code>
					</li></ul></div><p>
				For example:
			</p><pre class="programlisting">&lt;Listener className="org.jboss.modcluster.container.tomcat.ModClusterListener"
    advertise="true"
    advertiseInterface="172.16.27.10"
    advertiseGroupAddress="224.0.1.105"
    advertisePort="23364"
    connectorPort="8009"
/&gt;</pre><p>
				For more information on using an Apache HTTP Server as a load balancer for JBoss Web Server, see: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_core_services/2.4.29/html/apache_http_server_connectors_and_load_balancing_guide/mod_cluster_connector">Red Hat JBoss Core Services 2.4.29: Apache HTTP Server Connectors and Load Balancing Guide - mod_cluster Connector</a>
			</p><p>
				For additional information on this change, see: <a class="link" href="https://issues.jboss.org/browse/MODCLUSTER-457">JBoss Developer JIRA: mod_cluster - Expose Tomcat configuration to explicitly specify a connector to register with the proxy</a>
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="allows_the_configuration_of_multiple_properties_files"/>Allows the configuration of multiple properties files</h1></div></div></div><p>
				The JBoss Web Server 5.0 includes the listener <code class="literal">LoadExternalPropertiesListener</code>, allowing users to load multiple <code class="literal">.properties</code> files. The files are specified using the <code class="literal">file.N</code> attribute where <code class="literal">N</code> specifies the order in which the property files are loaded.
			</p><p>
				For example:
			</p><pre class="programlisting">&lt;Listener className="org.apache.catalina.core.LoadExternalPropertiesListener"
        file.0="/path/to/file1.properties"
        file.1="/path/to/file2.properties"
        file.2="/path/to/file3.properties"
        overwrite="false" loadFirst="file.1" /&gt;</pre><p>
				For more information on using multiple property files, the documentation has been included in <code class="literal">jws-application-server-5.0.0.zip</code>, see: <code class="literal"><span class="emphasis"><em>&lt;JWS_HOME&gt;</em></span>/webapps/docs/config/listeners.html#Load_external_properties_files_-_org.apache.catalina.core.LoadExternalPropertiesListener</code>
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="logging_jboss_web_server_with_log4j_deprecated"/>Logging JBoss Web Server with log4j deprecated</h1></div></div></div><p>
				Log4j is not supported for Red Hat JBoss Web Server 5.0 and is not provided by the Red Hat JBoss Web Server 5.0 packages or maven repository.
			</p><p>
				To use log4j with JBoss Web Server, log4j 2.x can be downloaded from the <a class="link" href="https://logging.apache.org/log4j/2.x/">Apache Log4j 2 web site</a>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="changes_to_jboss_web_server_plus"/>Changes to JBoss Web Server Plus</h1></div></div></div><p>
				The JBoss Web Server Hibernate Engine is provided by the Red Hat JBoss Web Server 5.0 Maven Repository.
			</p><p>
				To download the JBoss Web Server Maven Repository (<code class="literal">jboss-web-server-5.0.0.GA-maven-repository.zip</code>), visit the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=webserver&amp;version=5.0">Software Downloads page</a> on the Red Hat Website (available to all JBoss Web Server 5.0 subscribers).
			</p><p>
				The Hibernate Engine is not provided as a separate .zip package as it was for previous versions of JBoss Web Server.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="tomcat_embedded_included_in_the_red_hat_jboss_web_server_5_0_maven_repository"/>Tomcat embedded included in the Red Hat JBoss Web Server 5.0 maven repository</h1></div></div></div><p>
				Embedding tomcat in java applications can be useful for development and providing a dedicated instance of tomcat for shipping java applications to customers.
			</p><p>
				Tomcat embedded has been included in the Red Hat JBoss Web Server 5.0 Maven Repository.
			</p><p>
				To download the JBoss Web Server Maven Repository (<code class="literal">jboss-web-server-5.0.0.GA-maven-repository.zip</code>), visit the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=webserver&amp;version=5.0">Software Downloads page</a> on the Red Hat Website (available to all JBoss Web Server 5.0 subscribers).
			</p><p>
				The tomcat embedded artifacts can be found in the maven repository at: <code class="literal">jboss-web-server-5.0.0.GA-maven-repository/maven-repository/org/apache/tomcat/embed/</code>
			</p><p>
				For more information on using tomcat embedded, see the <a class="link" href="https://tomcat.apache.org/tomcat-9.0-doc/api/org/apache/catalina/startup/Tomcat.html">Apache Tomcat 9.0 API documentation: org.apache.catalina.startup - Class Tomcat</a>.
			</p></div></div></body></html>