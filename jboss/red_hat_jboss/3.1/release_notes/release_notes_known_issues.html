<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 6. Known Issues for the 3.1.0 Release</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="release_notes_known_issues"/>Chapter 6. Known Issues for the 3.1.0 Release</h1></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-365">JWS-365 - Socked bind failed on link-local (IPv6)</a></span></dt><dd><p class="simpara">
						If you bind to a link-local IPv6 address, a SEVERE exception will be logged and the connector will fail to initialize.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						Bind the address in the configuration file without using the brackets. For instance, the following configuration snippet would bind correctly:
					</p><pre class="screen">Listen ffff::ffff:ffff:ffff:ffff%3:80</pre></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-132">JWS-132 - JON Tomcat: NullPointerException when Tomcat Web Application (WAR) config change</a></span></dt><dd><p class="simpara">
						When monitoring JBoss Web Server using JBoss ON, a <code class="literal">NullPointerException</code> similar to below may be thrown when a Tomcat web application’s configuration changed.
					</p><pre class="programlisting">java.lang.NullPointerException
 at org.rhq.plugins.jmx.MBeanResourceComponent.updateResourceConfiguration(MBeanResourceComponent.java:532)
 at org.jboss.on.plugins.tomcat.TomcatWarComponent.updateResourceConfiguration(TomcatWarComponent.java:950)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
 at org.rhq.core.pc.inventory.ResourceContainer$ComponentInvocation.call(ResourceContainer.java:759)
 at java.util.concurrent.FutureTask.run(FutureTask.java:262)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
 at java.lang.Thread.run(Thread.java:745)</pre><p class="simpara">
						The cause of this issue is currently under investigation.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-86">JWS-86- Upgrading Tomcat plugin, metric names not updated</a></span></dt><dd><p class="simpara">
						When upgrading a RHQ 4.5 installation to 4.6, the Tomcat plugin may not be properly updated. In this situation the following exception is thrown:
					</p><pre class="programlisting">java.lang.IllegalArgumentException: The property [name] marked as required in the configuration definition of [Tomcat Connector] has no attribute 'default'</pre><p class="simpara">
						The cause of this issue is currently under investigation.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-63">JWS-63 - Tomcat mod_cluster integration does not allow one to choose a connector</a></span></dt><dd><p class="simpara">
						Configuring <code class="literal">mod_cluster</code> to use <code class="literal">ws://</code> with <code class="literal">EnableWsTunnel</code> (<code class="literal">mod_proxy_wstunnel</code>) requires Tomcat to use a <code class="literal">http</code> connector, and does not allow you to use an <code class="literal">ajp</code> connector. At the moment, Tomcat ignores this option. This issue is expected to be fixed in a future update.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-185">JWS-185 - (ASF BZ 53971) IPv6: address slowing down Tomcat on MS Windows</a></span></dt><dd><p class="simpara">
						When an IPv6 address is used to start Tomcat 7 on Microsoft Windows (for example, <code class="literal">&lt;Connector port="8080" protocol="HTTP/1.1" address="::" /&gt;</code>), this results in a significantly slowed down shutdown process when Tomcat is shutdown. During the shutdown process, the <code class="literal">catalina.log</code> file contains a warning similar to the following:
					</p><pre class="screen">WARNING: Acceptor thread [http-0%3A0%3A0%3A0%3A0%3A0%3A0%3A0-8080-Acceptor-0] failed to unlock. Forcing hard socket shutdown</pre><p class="simpara">
						The cause of this issue is currently under investigation.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-6">JWS-6 - hibernate c3p0 mchange-commons-java raises error on IBMJDK</a></span></dt><dd><p class="simpara">
						If using <code class="literal">mchange-commons-java</code> in Hibernate c3p0 on an IBM JDK, a <code class="literal">java.lang.ClassNotFoundException: org.slf4j.ILoggerFactory</code> error may be thrown, such as the following:
					</p><pre class="screen">java.lang.ClassNotFoundException: org.slf4j.ILoggerFactory
 at org.apache.catalina.loader.WebappClassLoader.loadClass(Unknown Source)
 at org.apache.catalina.loader.WebappClassLoader.loadClass(Unknown Source)
 at java.lang.Class.forNameImpl(Native Method)
 at java.lang.Class.forName(Class.java:199)
 at com.mchange.v2.log.MLog.findByClassnames(MLog.java:143)
 at com.mchange.v2.log.MLog.refreshConfig(MLog.java:73)
 at com.mchange.v2.log.MLog.&lt;clinit&gt;(MLog.java:51)</pre><p class="simpara">
						The cause of this issue is currently under investigation.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						You can work around this issue by setting the following property in your application:
					</p><pre class="screen">System.setProperty("com.mchange.v2.log.MLog", "com.mchange.v2.log.jdk14logging.Jdk14MLog");</pre></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-645">JWS-645 - Document tomcat-native dependency on JBCS channel for jbcs-httpd24-httpd-libs</a></span></dt><dd><p class="simpara">
						Installing the <code class="literal">tomcat-native</code> package fails due to the <code class="literal">jbcs-httpd24-httpd-libs</code> missing dependency.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						Ensure that the JBCS channel is enabled on the system when installing the <code class="literal">tomcat-native</code> package.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-653">JWS-653 - Solaris, Windows - same tomcat-juli-adapters.jar and tomcat-juli.jar for Tomcat 7 and 8</a></span></dt><dd><p class="simpara">
						The <code class="literal">tomcat-juli</code> and <code class="literal">tomcat-juli-adapters</code> JARs provided by the <code class="literal">extras</code> libraries in the <code class="literal">jws-application-servers</code> distribution for Windows and Solaris are incorrect for Tomcat 7. They are duplicates of the Tomcat 8 jars.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-521">JWS-521 - Add JSVC script to tomcat distribution</a></span></dt><dd><p class="simpara">
						A JSVC wrapper was added to Tomcat on RHEL 6, however, the <code class="literal">init</code> script is missing. Additionally, the RHEL 7 <code class="literal">systemd</code> unit uses the system’s JSVC binary rather than the JBCS provided binary.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						There is no workaround for the missing RHEL 6 init script. However, to workaround the RHEL 7 <code class="literal">systemd</code> unit issue, you have to manually update the path of the JSVC binary in the <code class="literal">/usr/libexec/tomcat*/functions</code> script to point to the correct <code class="literal">/opt/rh/jbcs-httpd24/root/usr/bin/jsvc</code> binary.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-470">JWS-470 - RHEL 6 RPM Confusing service status output for tomcat7 and tomcat8 installed both on RHEL system</a></span></dt><dd><p class="simpara">
						When running multiple instances of tomcat the <code class="literal">init</code> script status command may return incorrect information.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-401">JWS-401 - Tomcat does not properly parse spaces in JVM parameters/settings</a></span></dt><dd><p class="simpara">
						Tomcat fails to start when using <code class="literal">JAVA_OPTS</code>, which have spaces in them.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-657">JWS-657 - tomcat-native installs RHEL apr in addition to jbcs-httpd24-httpd-libs</a></span></dt><dd><p class="simpara">
						The installation of the <code class="literal">tomcat-native</code> RPM still incorrectly requires the installation of the <code class="literal">apr</code>/<code class="literal">apr-util</code> libraries distributed with RHEL. However, these libraries are not required as the <code class="literal">apr</code>/<code class="literal">apr-utils</code> versions distributed by JBCS are used. This requirement for the unused RHEL <code class="literal">apr</code>/<code class="literal">apr-util</code> libraries will be removed in a future update.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						If the RHEL <code class="literal">apr</code>/<code class="literal">apr-util</code> libraries are not installed, the system must be subscribed to the RHEL channel and the channel be enabled.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-649">JWS-649 - Tomcat security-manager starting with errors in log</a></span></dt><dd><p class="simpara">
						The manager and host-manager web applications fail to deploy when using the Security Manager.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						If you install the admin-webapps using the Security Manager, then move the <code class="literal">context.xml</code> from the manager and host-manager web applications, otherwise the admin applications will not deploy. Move from <code class="literal">CATALINA_HOME/webapps/[host-]manager/META-INF/context.xml</code> to <code class="literal">CATALINA_HOME/conf/Catalina/localhost/[host-]manager.xml</code>.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-280">JWS-280 - Running async example servlet multiple times causes Tomcat crash</a></span></dt><dd><p class="simpara">
						If the async example servlet is run multiple times, it causes Tomcat to crash.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						None
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-647">JWS-647 - Hibernate missing some JAR files in RPMs</a></span></dt><dd><p class="simpara">
						If you install Hibernate using the RPM package from JWS3 channel, some files are missing.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						These missing Hibernate files are available in the ZIP distribution.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-663">JWS-663 - service.bat for Tomcat 8 does not correctly set library path, natives not loaded</a></span></dt><dd><p class="simpara">
						The <code class="literal">service.bat</code> for Tomcat 8 does not correctly set the library path and so the natives are not loaded.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						You have to manually append <code class="literal">C:\Program Files\jws-3.1\bin</code> to the system’s PATH and start the Tomcat 8 service again.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-662">JWS-662 - Windows, Cannot unzip Hibernate zip in GUI: Error: Path too long</a></span></dt><dd><p class="simpara">
						On Windows, the Hibernate ZIP files displays an error if you unzip it using the user interface.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						Use PowerShell to unzip the Hibernate file.
					</p><pre class="screen">$src = "C:\Users\ben\Documents\3.1.0-CR7\hibernate-dist-3.1.0-CR7.zip"
$dst = "C:\Users\ben\Documents\3.1.0-CR7\"
Add-Type -assembly "system.io.compression.filesystem"
[io.compression.zipfile]::ExtractToDirectory($src, $dst)</pre></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-654">JWS-654 - RHEL 7 RPM Tomcat does not properly parse spaces in JVM parameters/settings</a></span></dt><dd><p class="simpara">
						Tomcat fails to start when using <code class="literal">JAVA_OPTS</code>, which have spaces in them.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						Do not use spaces in parameters.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-633">JWS-633 - ASF BZ 60683 - Tomcat throws NPE after startup with sec. manager on IBM JDK17</a></span></dt><dd><p class="simpara">
						When using the Security Manager and IBM JDK, Tomcat may respond with a 500 status that may be triggered by the compilation of large JSP files. This is caused by an unhanded <code class="literal">NullPointerException</code>.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						You can precompile JSPs before deploying them to Tomcat.
					</p></dd><dt><span class="term"><a class="link" href="https://issues.jboss.org/browse/JWS-666">JWS-666 - RHEL 7 RPM - TOMCAT_USER variable ignored</a></span></dt><dd><p class="simpara">
						The <code class="literal">TOMCAT_USER</code> and <code class="literal">TOMCAT_GROUP</code> environment variables defined in the <code class="literal">sysconfig</code> and <code class="literal">tomcat</code> configuration files are ignored by the RHEL 7 systemd service units. This is a known issue for JWS 3.1.0 and is a limitation of the systemd design.
					</p><p class="simpara">
						<span class="strong"><strong>Workaround</strong></span>
					</p><p class="simpara">
						In order to update the <code class="literal">user/group</code> owner of the Tomcat processes with the new systemd service unit on RHEL 7, you will need to update the <code class="literal">User</code> and <code class="literal">Group</code> properties of the service unit (<code class="literal">/usr/lib/systemd/system/tomcat7.service</code> and <code class="literal">/usr/lib/systemd/system/tomcat8.service</code>) rather than the <code class="literal">sysconfig</code> or tomcat <code class="literal">conf</code> files.
					</p></dd></dl></div></div></body></html>