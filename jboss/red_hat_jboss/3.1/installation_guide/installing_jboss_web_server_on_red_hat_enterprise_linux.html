<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. Installing JBoss Web Server on Red Hat Enterprise Linux</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installing_jboss_web_server_on_red_hat_enterprise_linux"/>Chapter 2. Installing JBoss Web Server on Red Hat Enterprise Linux</h1></div></div></div><p>
			You can install JBoss Web Server on Red Hat Enterprise Linux using one of two methods:
		</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
					<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#rhel_zip" title="ZIP Installation">ZIP files</a>
				</li><li class="listitem">
					<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#rhel_rpm" title="RPM Installation">RPM packages</a>
				</li></ul></div><p>
			Regardless of which method you choose, you must first <a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#installing_a_jdk" title="Installing a Java Development Kit (JDK)">install a supported Java Development Kit (JDK)</a>.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="prerequisites"/>Prerequisites</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installing_a_jdk"/>Installing a Java Development Kit (JDK)</h2></div></div></div><p>
					Before installing JBoss Web Server, you must first install a supported Java Development Kit (JDK).
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Subscribe your Red Hat Enterprise Linux system to the appropriate channel:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
									<span class="strong"><strong>OpenJDK:</strong></span>
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											rhel-6-server-rpms
										</li><li class="listitem">
											rhel-7-server-rpms
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong"><strong>Oracle:</strong></span>
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											rhel-6-server-thirdparty-oracle-java-rpms
										</li><li class="listitem">
											rhel-7-server-thirdparty-oracle-java-rpms
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong"><strong>IBM:</strong></span>
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											rhel-6-server-supplementary-rpms
										</li><li class="listitem">
											rhel-7-server-supplementary-rpms
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							As the root user, execute the command to install a 1.7 or 1.8 JDK:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									For JDK 1.7:
								</p><pre class="screen"># yum install java-1.7.0-<span class="emphasis"><em>&lt;VENDOR&gt;</em></span>-devel</pre><p class="simpara">
									Replace <code class="literal"><span class="emphasis"><em>&lt;VENDOR&gt;</em></span></code> with <code class="literal">oracle</code>, <code class="literal">ibm</code>, or <code class="literal">openjdk</code>.
								</p></li><li class="listitem"><p class="simpara">
									For JDK 1.8:
								</p><pre class="screen"># yum install java-1.8.0-<span class="emphasis"><em>&lt;VENDOR&gt;</em></span>-devel</pre><p class="simpara">
									Replace <code class="literal"><span class="emphasis"><em>&lt;VENDOR&gt;</em></span></code> with <code class="literal">oracle</code>, <code class="literal">ibm</code>, or <code class="literal">openjdk</code>.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Run the following commands as the root user to ensure the correct JDK is in use:
						</p><pre class="screen"># alternatives --config java</pre><pre class="screen"># alternatives --config javac</pre><p class="simpara">
							These commands return lists of available JDK versions with the selected version marked with a plus (<code class="literal">+</code>) sign. If the selected JDK is not the desired one, change to the desired JDK as instructed in the shell prompt.
						</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								All software that use the <code class="literal">java</code> and <code class="literal">javac</code> commands uses the JDK set by <code class="literal">alternatives</code>. Changing Java alternatives may impact on the running of other software.
							</p></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="rhel_prerequisites"/>Red Hat Enterprise Linux Package Prerequisites</h2></div></div></div><p>
					Before installing JBoss Web Server on Red Hat Enterprise Linux, ensure the following prerequisites are met.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							A <a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#installing_a_jdk" title="Installing a Java Development Kit (JDK)">supported JDK is installed</a>.
						</li><li class="listitem">
							You must remove the <code class="literal">tomcatjss</code> package before installing the <code class="literal">tomcat-native</code> package. The <code class="literal">tomcatjss</code> package uses an underlying NSS security model rather than the OpenSSL security model.
						</li></ul></div><div class="orderedlist"><a id="removing_tomcatjss"/><p class="title"><strong>Removing the tomcatjss Package</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							As the root user, run the following command to remove <code class="literal">tomcatjss</code>:
						</p><pre class="screen"># yum remove tomcatjss</pre></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="rhel_zip"/>ZIP Installation</h1></div></div></div><p>
				Ensure that all of <a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#rhel_prerequisites" title="Red Hat Enterprise Linux Package Prerequisites">the prerequisites</a> are met before installing JBoss Web Server.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="downloading_and_extracting_jboss_web_server"/>Downloading and Extracting JBoss Web Server</h2></div></div></div><p>
					To install JBoss Web Server, download and extract the installation ZIP files.
				</p><div class="orderedlist"><p class="title"><strong>Downloading JBoss Web Server</strong></p><ol class="orderedlist"><li class="listitem">
							Open a browser and log in to the <a class="link" href="http://access.redhat.com">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Click <span class="strong"><strong>Downloads</strong></span>.
						</li><li class="listitem">
							Click <span class="strong"><strong>Red Hat JBoss Web Server</strong></span> in the <span class="strong"><strong>Product Downloads</strong></span> list.
						</li><li class="listitem">
							Select the correct JBoss Web Server version from the <span class="strong"><strong>Version</strong></span> drop-down menu.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong"><strong>Download</strong></span> for each of the following files, ensuring that you select the correct platform and architecture for your system:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									Red Hat JBoss Web Server 3.1 Application Server (<code class="literal">jws-application-servers-3.1.0-<span class="emphasis"><em>&lt;platform&gt;</em></span>-<span class="emphasis"><em>&lt;architecture&gt;</em></span>.zip</code>)
								</li></ul></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Extracting JBoss Web Server</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Unzip the downloaded ZIP files to your installation directory.
						</p><p class="simpara">
							The directory created by extracting the ZIP archives is the top-level directory for JBoss Web Server. This is referred to as <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span></code>.
						</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_the_jboss_web_server_installation"/>Configuring the JBoss Web Server Installation</h2></div></div></div><p>
					Some configuration is required before running JBoss Web Server. This section includes the following configuration procedures:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#setting_java_home_linux_zip" title="Setting the JAVA_HOME Environment Variable">Setting the JAVA_HOME Environment Variable</a>
						</li><li class="listitem">
							Creating the tomcat user for simple and secure user management: <a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#creating_tomcat_user_linux_zip" title="Creating a Tomcat User">Creating a Tomcat User</a>.
						</li><li class="listitem">
							<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#configuring_log4j_linux_zip" title="Enabling Apache Log4j Logging for Tomcat">Enabling log4j Logging for Tomcat</a>
						</li></ul></div><p><a id="setting_java_home_linux_zip"/></p><div class="title"><strong>Setting the JAVA_HOME Environment Variable</strong></div><p>
						You must set the <code class="literal">JAVA_HOME</code> environment variable for Tomcat before running JBoss Web Server.
					</p><p>
					In the <code class="literal">bin</code> directory of Tomcat (either <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat7/bin</code> or <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat8/bin</code>), create a file named <code class="literal">setenv.sh</code>, and insert the <code class="literal">JAVA_HOME</code> path definition.
				</p><p>
					For example: <code class="literal">export JAVA_HOME=/usr/lib/jvm/jre-1.7.0-openjdk.x86_64</code>
				</p><p><a id="creating_tomcat_user_linux_zip"/></p><div class="title"><strong>Creating a Tomcat User</strong></div><p>
						Follow this procedure to create the <code class="literal">tomcat</code> user and its parent group:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							In a shell prompt as the root user, change directory to <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span></code>.
						</li><li class="listitem"><p class="simpara">
							Run the following command to create the <code class="literal">tomcat</code> user group:
						</p><pre class="screen"># groupadd -g 53 -r tomcat</pre></li><li class="listitem"><p class="simpara">
							Run the following command to create the <code class="literal">tomcat</code> user in the <code class="literal">tomcat</code> user group:
						</p><pre class="screen"># useradd -c "Tomcat" -u 53 -g tomcat -s /bin/sh -r tomcat</pre></li><li class="listitem"><p class="simpara">
							Check that the <code class="literal">tomcat</code> user group and the <code class="literal">tomcat</code> user were created correctly:
						</p><pre class="screen">$ <span class="strong"><strong>grep tomcat /etc/group</strong></span>

tomcat:x:53

$ <span class="strong"><strong>grep tomcat /etc/passwd</strong></span>

tomcat:x:53:53:Tomcat:/home/tomcat:/bin/sh</pre></li><li class="listitem"><p class="simpara">
							From <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span></code>, run the following command to assign the ownership of the Tomcat directories to the <code class="literal">tomcat</code> user to allow the user to run the Tomcat service:
						</p><pre class="screen"># chown -R tomcat:tomcat tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span></pre><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> with the respective Tomcat version number (<code class="literal">7</code> or <code class="literal">8</code>).
						</p><p class="simpara">
							You can use <code class="literal">ls -l</code> to verify that the <code class="literal">tomcat</code> user is the owner of the directory.
						</p></li><li class="listitem"><p class="simpara">
							Ensure that the <code class="literal">tomcat</code> user has execute permissions to all parent directories. For example:
						</p><pre class="screen"># chmod -R u+X tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span></pre></li></ol></div><p><a id="configuring_log4j_linux_zip"/></p><div class="title"><strong>Enabling Apache Log4j Logging for Tomcat</strong></div><p>
						To enable logging with Apache Log4j:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Change directory to <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/extras/</code>:
						</p><pre class="screen"># cd <span class="emphasis"><em>JWS_HOME</em></span>/extras/</pre></li><li class="listitem"><p class="simpara">
							Copy <code class="literal">log4j-eap6.jar</code> and <code class="literal">log4j.properties</code> from <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/extras/</code> to <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/lib</code>.
						</p><pre class="screen"># cp log4j.properties log4j-eap6.jar ../tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/lib/</pre><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> with the Tomcat version number (<code class="literal">7</code> or <code class="literal">8</code>).
						</p></li><li class="listitem"><p class="simpara">
							Change directory to <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat&lt;VERSION&gt;/extras/</code>:
						</p><pre class="screen"># cd ../tomcat&lt;VERSION&gt;/extras/</pre></li><li class="listitem"><p class="simpara">
							Copy <code class="literal">tomcat-juli-adapters.jar</code> from <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat&lt;VERSION&gt;/extras</code> to <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat&lt;VERSION&gt;/lib</code>.
						</p><pre class="screen"># cp tomcat-juli-adapters.jar ../lib/</pre></li><li class="listitem"><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat&lt;VERSION&gt;/bin/tomcat-juli.jar</code> with <code class="literal"><span class="emphasis"><em>JWS_HOME</em></span>/tomcat&lt;VERSION&gt;/extras/tomcat-juli.jar</code>:
						</p><pre class="screen"># cp tomcat-juli.jar ../bin/</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="starting_jboss_web_server"/>Starting JBoss Web Server</h2></div></div></div><p>
					To start JBoss Web Server, you must start the following:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Tomcat (7 or 8).
						</li></ul></div><p>
					Before starting Tomcat, ensure that the following prerequisites are met:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#creating_tomcat_user_linux_zip" title="Creating a Tomcat User">The Tomcat user is created</a>.
						</li><li class="listitem">
							<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#setting_java_home_linux_zip" title="Setting the JAVA_HOME Environment Variable">JAVA_HOME is set correctly</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Starting Tomcat</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Run the following command as the <code class="literal">tomcat</code> user with your respective Tomcat version (<code class="literal">7</code> or <code class="literal">8</code>):
						</p><pre class="screen">$ sh JWS_HOME/tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/bin/startup.sh</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								Although there are multiple methods of starting Tomcat, it is recommended that you use the <code class="literal">startup.sh</code> script. To start Tomcat as a service using Jsvc, see <a class="link" href="using_jsvc_to_start_tomcat.html" title="Chapter 5. Using Jsvc to Start Tomcat">the Jsvc chapter</a>.
							</p></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopping_jboss_web_server"/>Stopping JBoss Web Server</h2></div></div></div><p>
					To stop JBoss Web Server, you must stop the following:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Tomcat (7 or 8).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Stopping Tomcat</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							To stop Tomcat, run the following command as the root user with your respective Tomcat version (<code class="literal">7</code> or <code class="literal">8</code>):
						</p><pre class="screen"># sh <span class="emphasis"><em>JWS_HOME</em></span>/tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>/bin/shutdown.sh</pre></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="rhel_rpm"/>RPM Installation</h1></div></div></div><p>
				Installing JBoss Web Server from RPM packages installs Tomcat as service, and installs its resources into absolute paths. The RPM installation option is only available for Red Hat Enterprise Linux 6 and Red Hat Enterprise Linux 7.
			</p><p>
				RPM installation packages for JBoss Web Server are available from Red Hat Subscription Management.
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					For users wanting to manage JBoss Web Server installations using Red Hat Satellite: although Red Hat Satellite 6 is recommended for managing JBoss Web Server 3.1 installations, the following Red Hat Network (RHN) channels are also provided specifically for Satellite 5 users:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							For Red Hat Enterprise Linux 6:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									jws-3-x86_64-server-6-rpm
								</li><li class="listitem">
									jws-3-i386-server-6-rpm
								</li></ul></div></li><li class="listitem"><p class="simpara">
							For Red Hat Enterprise Linux 7:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									jws-3-x86_64-server-7-rpm
								</li></ul></div></li></ul></div><p>
					Red Hat Satellite 6 users can use the <a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#installing_from_rpm" title="Installing JBoss Web Server from RPM packages">Red Hat Content Delivery Network (CDN) repositories</a>.
				</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
					Installing JBoss Web Server from RPM packages shares Java library files with other applications. Library version conflicts occur when using RPM packages to install both JBoss Web Server 3 and JBoss EAP 6 on the same machine. To workaround the issue, you can install either JBoss Web Server 3 or JBoss EAP 6 using the RPM installation method, and the other using the ZIP installation method.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installing_from_rpm"/>Installing JBoss Web Server from RPM packages</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#installing_a_jdk" title="Installing a Java Development Kit (JDK)">Install a Java Development Kit (JDK)</a>.
						</li><li class="listitem">
							<a class="link" href="installing_jboss_web_server_on_red_hat_enterprise_linux.html#removing_tomcatjss" title="Removing the tomcatjss Package">Ensure that the tomcatjss package is removed</a>.
						</li></ul></div><p>
					Before downloading and installing the RPM packages, you must register your system with Red Hat Subscription Management and subscribe to the respective Content Delivery Network (CDN) repositories.
				</p><p>
					For information on registering Red Hat Enterprise Linux, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/installation_guide/sn-firstboot-updates">Configuring the Subscription Service for Red Hat Enterprise Linux 6</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/chap-initial-setup#sect-initial-setup-subsciption-manager">The Subscription Manager for Red Hat Enterprise Linux 7</a>.
				</p><div class="title"><strong>Attaching subscriptions to Red Hat Enterprise Linux (if required)</strong></div><p>
						If the system does not have a subscription attached that provides JBoss Web Server:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Log in to the <a class="link" href="https://access.redhat.com/management/subscription-management">Red Hat Subscription Manager</a>.
						</li><li class="listitem">
							Click on the <span class="strong"><strong>Systems</strong></span> tab.
						</li><li class="listitem">
							Click on the <code class="literal">Name</code> of the system to add the subscription to.
						</li><li class="listitem">
							Change from the <span class="strong"><strong>Details</strong></span> tab to the <span class="strong"><strong>Subscriptions</strong></span> tab, then click <code class="literal">Attach Subscriptions</code>.
						</li><li class="listitem">
							Select the check box beside the subscription to attach, then click <code class="literal">Attach Subscriptions</code>.
						</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						To verify that a subscription provides the required CDN repositories:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
								Log in to: <a class="link" href="https://access.redhat.com/management/subscriptions">https://access.redhat.com/management/subscriptions</a>.
							</li><li class="listitem">
								Click the <code class="literal">Subscription Name</code>.
							</li><li class="listitem"><p class="simpara">
								Under <span class="strong"><strong>Products Provided</strong></span>, you require:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										JBoss Enterprise Web Server.
									</li><li class="listitem">
										Red Hat JBoss Core Services.
									</li></ul></div></li></ol></div></div><div class="orderedlist"><p class="title"><strong>Installing JBoss Web Server from RPM packages using YUM</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							On a command line, subscribe to the JBoss Web Server CDN repositories for your operating system version using <code class="literal">subscription-manager</code>:
						</p><pre class="screen"># subscription-manager repos --enable <span class="emphasis"><em>&lt;repository&gt;</em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 6:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											jws-3-for-rhel-6-server-rpms
										</li><li class="listitem">
											jb-coreservices-1-for-rhel-6-server-rpms
										</li></ul></div></li><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 7:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											jws-3-for-rhel-7-server-rpms
										</li><li class="listitem">
											jb-coreservices-1-for-rhel-7-server-rpms
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Issue the following command as the root user to install JBoss Web Server:
						</p><pre class="screen"># yum groupinstall jws3</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Although not recommended, instead of using the group install, you can install each of the packages and their dependencies individually.
									</li><li class="listitem">
										The Red Hat JBoss Core Services repositories above are required for the installation of JBoss Web Server.
									</li></ul></div></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installing_the_jboss_web_server_plus_group"/>Installing the JBoss Web Server Plus Group</h2></div></div></div><p>
					The JBoss Web Server Plus group contains additional packages, mainly for the addition of Hibernate and its dependencies.
				</p><p>
					To install the JBoss Web Server Plus group of packages, run the following command as the root user:
				</p><pre class="screen"># yum groupinstall jws3plus</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="starting_jboss_web_server_2"/>Starting JBoss Web Server</h2></div></div></div><p>
					To start JBoss Web Server, you must start the following:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Tomcat (7 or 8)
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Starting Tomcat</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							In a shell prompt as the root user, start the Tomcat service. Replace <code class="literal"><span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> with the desired Tomcat version (<code class="literal">7</code> or <code class="literal">8</code>):
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 6:
								</p><pre class="screen"># service tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span> start</pre></li><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 7:
								</p><pre class="screen"># systemctl start tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.service</pre></li></ol></div></li></ol></div><div class="informalexample"><p>
					This is the only supported method of starting Tomcat for an RPM installation.
				</p></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							To verify that Tomcat is running, the output of the service <code class="literal">status</code> command should be reviewed. This can be executed as any user.
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 6:
								</p><pre class="screen"># service tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span> status</pre></li><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 7:
								</p><pre class="screen"># systemctl status tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.service</pre></li></ol></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopping_jboss_web_server_2"/>Stopping JBoss Web Server</h2></div></div></div><p>
					To stop JBoss Web Server, stop the Tomcat services.
				</p><div class="orderedlist"><p class="title"><strong>Stopping Tomcat</strong></p><ol class="orderedlist"><li class="listitem"><p class="simpara">
							In a shell prompt as the root user, stop the Tomcat service. Replace <code class="literal"><span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> with the desired Tomcat version (<code class="literal">7</code> or <code class="literal">8</code>):
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 6:
								</p><pre class="screen"># service tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span> stop</pre></li><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 7:
								</p><pre class="screen"># systemctl stop tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.service</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							To verify that Tomcat is no longer running, the output of the service <code class="literal">status</code> command should be reviewed. This can be executed as any user.
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 6:
								</p><pre class="screen"># service tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span> status</pre></li><li class="listitem"><p class="simpara">
									For Red Hat Enterprise Linux 7:
								</p><pre class="screen"># systemctl status tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.service</pre></li></ol></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_jboss_web_server_services_to_start_at_boot"/>Configuring JBoss Web Server Services to Start at Boot</h2></div></div></div><p>
					You can configure JBoss Web Server to start at boot.
				</p><p>
					Use the following commands to enable the JBoss Web Server services to start at boot. Replace <code class="literal"><span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> with the desired Tomcat version (<code class="literal">7</code> or <code class="literal">8</code>).
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							For Red Hat Enterprise Linux 6:
						</p><pre class="screen"># chkconfig tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span> on</pre></li><li class="listitem"><p class="simpara">
							For Red Hat Enterprise Linux 7:
						</p><pre class="screen"># systemctl enable tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.service</pre></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="selinux_policies"/>SELinux Policies</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="selinux_policy_information"/>SELinux Policy Information</h2></div></div></div><p>
					The following table contains information about the SELinux policies provided in the tomcat<span class="emphasis"><em>&lt;version&gt;</em></span>-selinux packages.
				</p><div class="table"><a id="idm140499912537680"/><p class="title"><strong>Table 2.1. RPMs and Default SELinux Policies</strong></p><div class="table-contents"><table summary="RPMs and Default SELinux Policies" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Name</th><th style="text-align: left" valign="top">Port Information</th><th style="text-align: left" valign="top">Policy Information</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									tomcat<span class="emphasis"><em>&lt;version&gt;</em></span>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Four ports in <code class="literal">http_port_t</code> (TCP ports <code class="literal">8080</code>, <code class="literal">8005</code>, <code class="literal">8009</code>, and <code class="literal">8443</code>) to allow the tomcat process to use them.
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The Tomcat<code class="literal"><span class="emphasis"><em>&lt;VERSION&gt;</em></span></code> policy is installed, which sets the appropriate SELinux domain for the process when Tomcat executes. It also sets the appropriate contexts to allow tomcat to write to <code class="literal">/var/lib/tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span></code>, <code class="literal">/var/log/tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span></code>, <code class="literal">/var/cache/tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span></code>, and <code class="literal">/var/run/tomcat<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.pid</code>.
								</p>
								 </td></tr></tbody></table></div></div><p>
					For more information about using SELinux and other Red Hat Enterprise Linux security information, see the <span class="emphasis"><em><span class="ref">Red Hat Enterprise Linux Security Guide</span></em></span>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="selinux_policies_for_an_rpm_installation"/>SELinux Policies for an RPM Installation</h2></div></div></div><p>
					SELinux policies for each Tomcat are provided via their own Tomcat sub-packages: <code class="literal">tomcat7-selinux</code> and <code class="literal">tomcat8-selinux</code>. These packages are available in the JWS channel.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							To enable SELinux policies on Tomcat 7, install the <code class="literal">tomcat7-selinux</code> package.
						</li><li class="listitem">
							To enable SELinux policies on Tomcat 8, install the <code class="literal">tomcat8-selinux</code> package.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="selinux_policies_for_a_zip_installation"/>SELinux Policies for a ZIP Installation</h2></div></div></div><p>
					In this release, SELinux policies are provided in the ZIP packages. The SELinux security model is enforced by the kernel and ensures applications have limited access to resources such as file system locations and ports. This helps ensure that the errant processes (either compromised or poorly configured) are restricted and in some cases prevented from running. The <code class="literal">.postinstall.selinux</code> file is included in each <code class="literal">tomcat</code> folder. If required, you can run the <code class="literal">.postinstall.selinux</code> script.
				</p><p>
					To install the SELinux policies using ZIP:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Install the <code class="literal">selinux-policy-devel</code> package:
						</p><pre class="screen">yum install -y selinux-policy-devel</pre></li><li class="listitem"><p class="simpara">
							Execute the <code class="literal">.postinstall.selinux</code> script:
						</p><pre class="screen">cd <span class="emphasis"><em>&lt;JWS_home&gt;</em></span>/tomcat<span class="emphasis"><em>&lt;version&gt;</em></span>
sh .postinstall.selinux</pre><p class="simpara">
							Where <code class="literal">tomcat<span class="emphasis"><em>&lt;version&gt;</em></span></code> refers to <code class="literal">tomcat7</code> or <code class="literal">tomcat8</code>.
						</p></li><li class="listitem"><p class="simpara">
							Make and install the SELinux module:
						</p><pre class="screen">cd selinux
make -f /usr/share/selinux/devel/Makefile
semodule -i tomcat<span class="emphasis"><em>&lt;version&gt;</em></span>.pp</pre></li><li class="listitem"><p class="simpara">
							Apply the SELinux contexts for JBoss Web Server:
						</p><pre class="screen">restorecon -r <span class="emphasis"><em>&lt;JWS_home&gt;</em></span>/tomcat<span class="emphasis"><em>&lt;version&gt;</em></span>/</pre></li><li class="listitem"><p class="simpara">
							Add access permissions to the required ports for JBoss Web Server:
						</p><pre class="screen">semanage port -a -t http_port_t -p tcp 8005
semanage port -a -t http_port_t -p tcp 8080
semanage port -a -t http_port_t -p tcp 8009
semanage port -a -t http_port_t -p tcp 8443</pre></li><li class="listitem"><p class="simpara">
							Start the Tomcat service:
						</p><pre class="screen"><span class="emphasis"><em>&lt;JWS_home&gt;</em></span>/bin/startup.sh</pre></li><li class="listitem"><p class="simpara">
							Check the context of the running process expecting <code class="literal">tomcat_&lt;version&gt;__t</code>:
						</p><pre class="screen">ps -eZ | grep tomcat | head -n1</pre></li><li class="listitem"><p class="simpara">
							To verify the contexts of the Tomcat directories, for example:
						</p><pre class="screen">ls -lZ <span class="emphasis"><em>&lt;JWS_home&gt;</em></span>/tomcat<span class="emphasis"><em>&lt;version&gt;</em></span>/logs/</pre></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						By default, the selinux policy provided is not active and the Tomcat processes run in the <code class="literal">unconfined_java_t</code> domain. This domain does not confine the processes, and it is recommended that you undertake the following security precautions if you chose not to enable the selinux policy provided:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								Restrict file access for the <code class="literal">tomcat</code> user to only the files and directories that are necessary to the JBoss Web Server runtime.
							</li><li class="listitem">
								Do not run Tomcat as the <code class="literal">root</code> user.
							</li></ul></div></div></div></div></div></body></html>