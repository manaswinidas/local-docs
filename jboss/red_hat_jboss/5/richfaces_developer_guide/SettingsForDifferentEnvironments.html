<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Settings for different environments</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="SettingsForDifferentEnvironments">
      ⁠</a>Chapter 3. Settings for different environments</h1></div></div></div><div class="para">
		RichFaces includes support for all tags (components) included in the JavaServer Faces (JSF) specification. To add RichFaces capabilities to an existing JSF project, place the RichFaces libraries into the <code class="filename">lib</code> directory of the project, and add filter mapping. The behavior of the existing project does not change when you add RichFaces.
	</div><div class="section updated"><div class="titlepage"><div><div><h1 class="title"><a id="WebApplicationDescriptorParameters">
      ⁠</a>3.1. Web Application Descriptor Parameters</h1></div></div></div><div class="para">
			RichFaces does not require that any parameters be defined in your <code class="filename">web.xml</code>, but the RichFaces parameters listed below will help you during the development process and increase the flexibility of your RichFaces applications.
		</div><div class="para">
			<div class="table"><a id="idm140579064118208">
      ⁠</a><p class="title"><strong>Table 3.1. Initialization Parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Initialization Parameters"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Name </th><th> Default </th><th> Description </th></tr></thead><tbody><tr><td> org.richfaces.SKIN </td><td> DEFAULT </td><td> The name of a skin that is used in an application. Can be a literal string with a skin name or the EL expression (<code class="literal">#{...}</code>) associated with a String property (skin name) of a property of a <code class="literal">org.richfaces.framework.skin</code> type. In the latter case, that instance is used as the current skin. </td></tr><tr><td> org.richfaces.LoadScriptStrategy </td><td> DEFAULT </td><td> Defines how the RichFaces script files are loaded to the application. Possible values are <code class="literal">ALL</code>, <code class="literal">DEFAULT</code> and <code class="literal">NONE</code>. </td></tr><tr><td> org.richfaces.LoadStyleStrategy </td><td> DEFAULT </td><td> Defines how the RichFaces style files are loaded into the application. Possible values are: <code class="literal">ALL</code>, <code class="literal">DEFAULT</code>, or <code class="literal">NONE</code>. </td></tr><tr><td> org.ajax4jsf.LOGFILE </td><td> none </td><td> The URL of an application or a container log file (if applicable). If this parameter is set, content from the given URL is shown on a Debug page in the <code class="literal">iframe</code> window. </td></tr><tr><td> org.ajax4jsf.VIEW_HANDLERS </td><td> none </td><td> A comma-separated list of <code class="literal">ViewHandler</code> instances for inserting in a view handler chain. These handlers are inserted before the RichFaces viewhandlers, in the order they are listed. In a Facelets application, you would declare <code class="literal">com.sun.facelets.FaceletViewHandler</code> here instead of in the <code class="filename">faces-config.xml</code> file. </td></tr><tr><td> org.ajax4jsf.CONTROL_COMPONENTS </td><td> none </td><td> A comma-separated list of special <span class="emphasis"><em>control case</em></span> components, such as the messages bundle loader or an alias bean component. These handlers are provided via a reflection from the static field <code class="literal">COMPONENT_TYPE</code>. Encoding methods for these components are always called while rendering AJAX responses, even if a component has not been updated. </td></tr><tr><td> org.ajax4jsf.ENCRYPT_RESOURCE_DATA </td><td> false </td><td> For generated resources (such as encrypt generation data), this is encoded in the resource URL. For example, the URL of an image generated by the <code class="classname">mediaOutput</code> component contains the name of a generation method. Since malicious code can exploit this to create a request for any JSF bean or attribute, this parameter should be set to <code class="literal">true</code> in critical applications. (This fix works with Java Runtime Environment 1.4.) </td></tr><tr><td> org.ajax4jsf.ENCRYPT_PASSWORD </td><td> random </td><td> A password used to encrypt resource data. If this is not set, a random password is used. </td></tr><tr><td> org.ajax4jsf.COMPRESS_SCRIPT </td><td> true </td><td> When defined, does not allow the frameword to reformat JavaScript files. This means that the debug feature cannot be used. </td></tr><tr><td> org.ajax4jsf.RESOURCE_URI_PREFIX </td><td> a4j </td><td> Defines the prefix to be added to the URLs of all generated resources. This is designed to handle RichFaces generated resource requests. </td></tr><tr><td> org.ajax4jsf.GLOBAL_RESOURCE_URI_PREFIX </td><td> a4j/g </td><td> Defines the prefix to be added to the URI of all global resources. This prefix is designed to handle RichFaces generated resource requests. </td></tr><tr><td> org.ajax4jsf.SESSION_RESOURCE_URI_PREFIX </td><td> a4j/s </td><td> Defines the prefix to be used to track the sessions of generated resources. This prefix is designed to handle RichFaces generated resource requests. </td></tr><tr><td> org.ajax4jsf.DEFAULT_EXPIRE </td><td> 86400 </td><td> Defines the period (in seconds) for which resources are cached when they are streamed back to the browser. </td></tr><tr><td> org.ajax4jsf.SERIALIZE_SERVER_STATE </td><td> false </td><td> If set to <code class="literal">true</code>, the component state (not the tree) will be serialized before it is stored in the session. This can be useful in applications with view state that is sensitive to model changes. Alternatively, use <code class="literal">com.sun.faces.serializeServerState</code> and <code class="literal"> org.apache.myfaces.SERIALIZE_STATE_IN_SESSION</code> parameters in their respective environments. </td></tr></tbody></table></div></div>

		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				<code class="literal">org.richfaces.SKIN</code> is used in the same way as <code class="literal">org.ajax4jsf.SKIN</code>.
			</div></div></div><div class="para">
			<div class="table"><a id="idm140579050382304">
      ⁠</a><p class="title"><strong>Table 3.2. org.ajax4jsf.Filter Initialization Parameters</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="org.ajax4jsf.Filter Initialization Parameters"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Name </th><th> Default </th><th> Description </th></tr></thead><tbody><tr><td> log4j-init-file </td><td> - </td><td> A path (relative to the web application's context) to the <code class="filename">log4j.xml</code> configuration file. This can be used to set up per-application custom logging. </td></tr><tr><td> enable-cache </td><td> true </td><td> Enables caching of framework-generated resources (JavaScript, CSS, images, etc.). However, your cached resources will not be used when attempting to debug custom JavaScript or Styles. </td></tr><tr><td> forcenotrf </td><td> true </td><td> Forces all JSF pages to be parsed by a HTML syntax check filter. If set to <code class="literal">false</code>, only AJAX responses will be parsed and converted to well-formed XML. Setting this to <code class="literal">false</code> can improve performance, but may also cause unexpected information to be rendered during AJAX updates. </td></tr></tbody></table></div></div>

		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="SunJSFRI">
      ⁠</a>3.2. Sun JSF RI</h1></div></div></div><div class="para">
			RichFaces works with JavaServer Faces 1.2_13 without needing to modify additional settings.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="FaceletsSupport">
      ⁠</a>3.3. Facelets Support</h1></div></div></div><div class="para">
			RichFaces has high-level support for Facelets, regardless of the version used. However, some JSF frameworks (including Faces) require that their own <code class="literal">ViewHandler</code> be listed first in the <code class="literal">ViewHandler</code> chain. RichFaces also requires that its <code class="literal">AjaxViewHandler</code> be listed first, but because it is installed first, no settings will need to be altered. Where multiple frameworks are used without RichFaces, you can use the <code class="literal">VIEW_HANDLERS</code> parameter to define the order in which the <code class="literal">ViewHandler</code>s are used. For example:
		</div><pre class="programlisting XML">
...
&lt;context-param&gt;
     &lt;param-name&gt;org.ajax4jsf.VIEW_HANDLERS&lt;/param-name&gt;
     &lt;param-value&gt;com.sun.facelets.FaceletViewHandler&lt;/param-value&gt;
&lt;/context-param&gt;
...
</pre><div class="para">
			This declares that while <code class="literal">Facelets</code> will officially be first, <code class="literal">AjaxViewHandler</code> will briefly be ahead of it to perform some small, important task.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				In this case, you need not define <code class="literal">FaceletViewHandler</code> in <code class="filename">WEB-INF/faces-config.xml</code>.
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="JBossSeamSupport">
      ⁠</a>3.4. JBoss Seam Support</h1></div></div></div><div class="para">
			RichFaces is compatible with <span class="application"><strong>JBoss Seam</strong></span> and Facelets when run within JBoss Enterprise Application Server. No additional JARs are required. All you need to do is package the RichFaces library with your application.
		</div><div class="para">
			For <span class="application"><strong>Seam 1.2</strong></span>, your <code class="filename">web.xml</code> must be as follows:
		</div><pre class="programlisting XML">
&lt;?xml version="1.0" ?&gt;
&lt;web-app xmlns="http://java.sun.com/xml/ns/j2ee"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
                   version="2.4"&gt;

     &lt;!-- richfaces --&gt;

     &lt;filter&gt;
          &lt;display-name&gt;RichFaces Filter&lt;/display-name&gt;
          &lt;filter-name&gt;richfaces&lt;/filter-name&gt;
          &lt;filter-class&gt;org.ajax4jsf.Filter&lt;/filter-class&gt;
     &lt;/filter&gt;

     &lt;filter-mapping&gt;
          &lt;filter-name&gt;richfaces&lt;/filter-name&gt;
          &lt;url-pattern&gt;*.seam&lt;/url-pattern&gt;
     &lt;/filter-mapping&gt;

     &lt;!-- Seam --&gt;

     &lt;listener&gt;
          &lt;listener-class&gt;org.jboss.seam.servlet.SeamListener&lt;/listener-class&gt;
     &lt;/listener&gt;

     &lt;servlet&gt;
          &lt;servlet-name&gt;Seam Resource Servlet&lt;/servlet-name&gt;
          &lt;servlet-class&gt;org.jboss.seam.servlet.ResourceServlet&lt;/servlet-class&gt;
     &lt;/servlet&gt;

     &lt;servlet-mapping&gt;
          &lt;servlet-name&gt;Seam Resource Servlet&lt;/servlet-name&gt;
          &lt;url-pattern&gt;/seam/resource/*&lt;/url-pattern&gt;
     &lt;/servlet-mapping&gt;

     &lt;filter&gt;
          &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
          &lt;filter-class&gt;org.jboss.seam.web.SeamFilter&lt;/filter-class&gt;
     &lt;/filter&gt;

     &lt;filter-mapping&gt;
          &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
          &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
     &lt;/filter-mapping&gt;

     &lt;!-- MyFaces --&gt;

     &lt;listener&gt;
          &lt;listener-class&gt;org.apache.myfaces.webapp.StartupServletContextListener&lt;/listener-class&gt;
     &lt;/listener&gt;

     &lt;!-- JSF --&gt;

     &lt;context-param&gt;
          &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;
          &lt;param-value&gt;client&lt;/param-value&gt;
     &lt;/context-param&gt;

     &lt;context-param&gt;
          &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;
         &lt;param-value&gt;.xhtml&lt;/param-value&gt;
     &lt;/context-param&gt;

     &lt;servlet&gt;
          &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
          &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;
          &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
     &lt;/servlet&gt;

     &lt;servlet-mapping&gt;
          &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
          &lt;url-pattern&gt;*.seam&lt;/url-pattern&gt;
     &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</pre><div class="para">
			<span class="application"><strong>Seam 2.x</strong></span> supports RichFaces Filter, so your <code class="filename">web.xml</code> must look like this:
		</div><pre class="programlisting XML">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5"
                   xmlns="http://java.sun.com/xml/ns/javaee"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;

     &lt;context-param&gt;
          &lt;param-name&gt;org.ajax4jsf.VIEW_HANDLERS&lt;/param-name&gt;
          &lt;param-value&gt;com.sun.facelets.FaceletViewHandler&lt;/param-value&gt;
     &lt;/context-param&gt;

     &lt;!-- Seam --&gt;

     &lt;listener&gt;
          &lt;listener-class&gt;org.jboss.seam.servlet.SeamListener&lt;/listener-class&gt;
     &lt;/listener&gt;

     &lt;servlet&gt;
          &lt;servlet-name&gt;Seam Resource Servlet&lt;/servlet-name&gt;
          &lt;servlet-class&gt;org.jboss.seam.servlet.SeamResourceServlet&lt;/servlet-class&gt;
     &lt;/servlet&gt;

     &lt;servlet-mapping&gt;
          &lt;servlet-name&gt;Seam Resource Servlet&lt;/servlet-name&gt;
          &lt;url-pattern&gt;/seam/resource/*&lt;/url-pattern&gt;
     &lt;/servlet-mapping&gt;

     &lt;filter&gt;
          &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
          &lt;filter-class&gt;org.jboss.seam.servlet.SeamFilter&lt;/filter-class&gt;
     &lt;/filter&gt;

     &lt;filter-mapping&gt;
          &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
          &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
     &lt;/filter-mapping&gt;

     &lt;!-- JSF --&gt;

     &lt;context-param&gt;
          &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;
          &lt;param-value&gt;.xhtml&lt;/param-value&gt;
     &lt;/context-param&gt;

     &lt;context-param&gt;
          &lt;param-name&gt;facelets.DEVELOPMENT&lt;/param-name&gt;
          &lt;param-value&gt;true&lt;/param-value&gt;
     &lt;/context-param&gt;

     &lt;servlet&gt;
          &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
          &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;
          &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
     &lt;/servlet&gt;

     &lt;servlet-mapping&gt;
          &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
          &lt;url-pattern&gt;*.seam&lt;/url-pattern&gt;
     &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</pre></div></div></body></html>