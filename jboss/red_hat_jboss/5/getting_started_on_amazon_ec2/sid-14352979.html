<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. Launching a standalone JBoss Enterprise Web Server instance</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="sid-14352979">
      ⁠</a>Chapter 4. Launching a standalone JBoss Enterprise Web Server instance</h1></div></div></div><div class="para">
		In this example a sample web application is deployed on Apache Tomcat 6 server. An Apache HTTPD server is used as a reverse proxy.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sid-14352979_LaunchingastandaloneJBossEnterpriseWebServerinstance-Prerequisites">
      ⁠</a>4.1. Prerequisites</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					Suitable Red Hat AMI identified in <a class="xref" href="sid-22872481.html">Chapter 3, <em>Identify a suitable Red Hat AMI</em></a>;
				</div></li><li class="listitem"><div class="para">
					A pre-configured Security Group which allows incoming requests on ports <code class="literal">22</code> and <code class="literal">80</code>.
				</div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sid-14352979_LaunchingastandaloneJBossEnterpriseWebServerinstance-LaunchJBossEnterpriseWebServer">
      ⁠</a>4.2. Launcher instance</h1></div></div></div><div class="para">
			Launch the Red Hat AMI identified in <a class="xref" href="sid-22872481.html">Chapter 3, <em>Identify a suitable Red Hat AMI</em></a>, adding the following lines to the "<span class="guilabel"><strong>User Data:</strong></span>" field.
		</div><pre class="programlisting">
      # deploy the hello.war sample application to the Apache Tomcat 6 server which is part of the JBoss Enterprise Web Server offering
      cp /usr/share/java/jboss-ec2-ews-samples/hello-1.0.war /usr/share/tomcat6/webapps/hello.war

      # Configure HTTPd to act as a proxy to the Apache Tomcat 6 server
      cat &gt;&gt; /etc/httpd/conf.d/proxy_ajp.conf &lt;&lt;"EOF"
      &lt;Location /hello&gt;
      ProxyPass         http://localhost:8080/hello
      ProxyPassReverse  http://localhost:8080/hello
      &lt;/Location&gt;
      ProxyPreserveHost On
      EOF

      # Start the Apache Tomcat 6 server
      service tomcat6 start

      # Instruct SELinux to allow HTTPd to serve as a proxy relay
      setsebool -P httpd_can_network_relay 1

      # Start the HTTPd server
      service httpd start
</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sid-14352979_LaunchingastandaloneJBossEnterpriseWebServerinstance-TestJBossEnterpriseWebServer">
      ⁠</a>4.3. Test JBoss Enterprise Web Server</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm140651165387920">
      ⁠</a><p class="title"><strong>Procedure 4.1. Test JBoss EWS</strong></p><ol class="1"><li class="step"><div class="para">
					In the instance's details pane, note the instance's "<span class="guilabel"><strong>Public DNS</strong></span>".
				</div></li><li class="step"><div class="para">
					In a browser, navigate to <code class="uri">http://<em class="replaceable">&lt;public-DNS&gt;</em>/hello</code>
				</div></li><li class="step"><div class="para">
					Confirm that the text "<code class="literal">Hello World!</code>" appears, otherwise refer to <a class="xref" href="sid-17793053.html">Appendix B, <em>Troubleshooting</em></a>.
				</div></li></ol></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
				In JBoss Enterprise Web Server deployed on EC2, the contents of the <span class="guilabel"><strong>User Data</strong></span> field are treated as a script.
			</div><div class="para">
				If the first line is "<code class="code">#!</code>" then it is run as any executable file, otherwise its contents are executed/sourced into the Red Hat Enterprise Linux <span class="application"><strong>init</strong></span> shell.
			</div></div></div><div class="para">
			If this is a production instance, add the following text as the first line in the <span class="guilabel"><strong>User Data</strong></span> field to ensure that security updates are applied on boot: 
<pre class="programlisting">
yum -y update
</pre>

		</div></div></div></body></html>