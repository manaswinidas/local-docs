<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 17. Datasource Configuration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="datasource-config">
      ⁠</a>Chapter 17. Datasource Configuration</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>You must change your database</strong></p></div><div class="admonition"><div class="para">
			The default persistence configuration works out of the box with Hypersonic (HSQLDB) so that the JBoss Enterprise Platforms are able to run "out of the box". However, <span class="emphasis"><em>Hypersonic is not supported in production and should not be used in a production environment.</em></span>
		</div><div class="para">
			Known issues with the Hypersonic Database include:
		</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
					no transaction isolation;
				</div></li><li class="listitem"><div class="para">
					thread and socket leaks (<code class="methodname">connection.close()</code> does not tidy up resources);
				</div></li><li class="listitem"><div class="para">
					persistence quality (logs commonly become corrupted after a failure, preventing automatic recovery);
				</div></li><li class="listitem"><div class="para">
					database corruption;
				</div></li><li class="listitem"><div class="para">
					stability under load (database processes cease when dealing with too much data);
				</div></li><li class="listitem"><div class="para">
					and not viable in clustered environments.
				</div></li></ul></div><div class="para">
			Check the "Using Other Databases" chapter of the <em class="citetitle">Getting Started Guide</em> for assistance.
		</div></div></div><div class="para">
		Datasources are defined inside a &lt;datasources&gt; element. The exact element depends on the type of datasource required.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Multiple Datasource Files</strong></p></div><div class="admonition"><div class="para">
			Attempting to deploy more than one datasource file in an application's archive file (esb, war, ear), will lead to an exception being thrown.
		</div><div class="para">
			Deploying multiple datasource files is not supported in EAP5.2.0
		</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776764135568">
      ⁠</a>17.1. Types of Datasources</h1></div></div></div><div class="variablelist"><p class="title"><strong>Datasource Definitions</strong></p><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>&lt;no-tx-datasource&gt;</code></em></span></dt><dd><div class="para">
						Does not take part in JTA transactions. The <code class="filename">java.sql.Driver</code> is used.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;local-tx-datasource&gt;</code></em></span></dt><dd><div class="para">
						Does not support two phase commit. The <code class="filename">java.sql.Driver</code> is used. Suitable for a single database or a non-XA-aware resource.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;xa-datasource&gt;</code></em></span></dt><dd><div class="para">
						Supports two phase commit. The <code class="filename">javax.sql.XADataSource</code> driver is used.
					</div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776693826816">
      ⁠</a>17.2. Datasource Parameters</h1></div></div></div><div class="variablelist"><p class="title"><strong>Common Datasource Parameters</strong></p><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>&lt;mbean&gt;</code></em></span></dt><dd><div class="para">
						A standard JBoss MBean deployment.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;depends&gt;</code></em></span></dt><dd><div class="para">
						The <code class="literal">ObjectName</code> of an MBean service this <code class="classname">ConnectionFactory</code> or <code class="classname">DataSource</code> deployment depends upon. The connection manager service will not be started until the dependent services have been started.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;jndi-name&gt;</code></em></span></dt><dd><div class="para">
						The JNDI name under which the Datasource should be bound.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;use-java-context&gt;</code></em></span></dt><dd><div class="para">
						Boolean value indicating whether the jndi-name should be prefixed with <em class="wordasword">java:</em>. This prefix causes the Datasource to only be accessible from within the JBoss Enterprise Application Platform virtual machine. Defaults to <code class="literal">TRUE</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;user-name&gt;</code></em></span></dt><dd><div class="para">
						The user name used to create the connection to the datasource.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							Not used when security is configured.
						</div></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;password&gt;</code></em></span></dt><dd><div class="para">
						The password used to create the connection to the datasource.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							Not used when security is configured.
						</div></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;transaction-isolation&gt;</code></em></span></dt><dd><div class="para">
						The default transaction isolation of the connection. If not specified, the database-provided default is used.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Possible values for &lt;transaction-isolation&gt;</strong></p><ul><li class="listitem"><div class="para">
								<em class="parameter"><code>TRANSACTION_READ_UNCOMMITTED</code></em>
							</div></li><li class="listitem"><div class="para">
								<em class="parameter"><code>TRANSACTION_READ_COMMITTED</code></em>
							</div></li><li class="listitem"><div class="para">
								<em class="parameter"><code>TRANSACTION_REPEATABLE_READ</code></em>
							</div></li><li class="listitem"><div class="para">
								<em class="parameter"><code>TRANSACTION_SERIALIZABLE</code></em>
							</div></li><li class="listitem"><div class="para">
								<em class="parameter"><code>TRANSACTION_NONE</code></em>
							</div></li></ul></div></dd><dt><span class="term"><em class="parameter"><code>&lt;new-connection-sql&gt;</code></em></span></dt><dd><div class="para">
						An SQL statement that is executed against each new connection. This can be used to set up the connection schema, for instance.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;check-valid-connection-sql&gt;</code></em></span></dt><dd><div class="para">
						An SQL statement that is executed before the connection is checked out from the pool to make sure it is still valid. If the SQL statement fails, the connection is closed and a new one is created.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;valid-connection-checker-class-name&gt;</code></em></span></dt><dd><div class="para">
						A class that checks whether a connection is valid using a vendor-specific mechanism.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;exception-sorter-class-name&gt;</code></em></span></dt><dd><div class="para">
						A class that parses vendor-specific messages to determine whether SQL errors are fatal, and destroys the connection if so. If empty, no errors are treated as fatal.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;track-statements&gt;</code></em></span></dt><dd><div class="para">
						Whether to monitor for un-closed Statements and ResultSets and issue warnings when they have not been closed. The default value is <code class="literal">NOWARN</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;prepared-statement-cache-size&gt;</code></em></span></dt><dd><div class="para">
						The number of prepared statements per connection to be kept open and reused in subsequent requests. They are stored in a <em class="firstterm">Least Recently Used (LRU)</em> cache. The default value is <code class="literal">0</code>, meaning that no cache is kept.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;share-prepared-statements&gt;</code></em></span></dt><dd><div class="para">
						When the <em class="parameter"><code>&lt;prepared-statement-cache-size&gt;</code></em> is non-zero, determines whether two requests in the same transaction should return the same statement. Defaults to <code class="literal">FALSE</code>.
					</div><div class="example"><a id="idm139776678885952">
      ⁠</a><p class="title"><strong>Example 17.1. Using <em class="parameter"><code>&lt;share-prepared-statements&gt;</code></em></strong></p><div class="example-contents"><div class="para">
							The goal is to work around questionable driver behavior, where the driver applies auto-commit semantics to local transactions.
						</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>       Connection c = dataSource.<span xmlns="" class="perl_Function">getConnection</span>(); <span xmlns="" class="perl_Comment">// auto-commit == false</span>
<span xmlns="" class="line">​</span>       PreparedStatement ps1 = c.<span xmlns="" class="perl_Function">prepareStatement</span>(...);
<span xmlns="" class="line">​</span>       ResultSet rs1 = ps1.<span xmlns="" class="perl_Function">executeQuery</span>();
<span xmlns="" class="line">​</span>       PreparedStatement ps2 = c.<span xmlns="" class="perl_Function">prepareStatement</span>(...);
<span xmlns="" class="line">​</span>       ResultSet rs2 = ps2.<span xmlns="" class="perl_Function">executeQuery</span>();
</pre><div class="para">
							This assumes that the prepared statements are the same. For some drivers, <code class="methodname">ps2.executeQuery()</code> automatically closes <code class="varname">rs1</code>, so you actually need two real prepared statements behind the scenes. This only applies to the auto-commit semantic, where re-running the query starts a new transaction automatically. For drivers that follow the specification, you can set it to <code class="literal">TRUE</code> to share the same real prepared statement.
						</div></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;set-tx-query-timeout&gt;</code></em></span></dt><dd><div class="para">
						Whether to enable query timeout based on the length of time remaining until the transaction times out. Defaults to <code class="literal">FALSE</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;query-timeout&gt;</code></em></span></dt><dd><div class="para">
						The maximum time, in seconds, before a query times out. You can override this value by setting <em class="parameter"><code>&lt;set-tx-query-timeout&gt;</code></em> to <code class="literal">TRUE</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;type-mapping&gt;</code></em></span></dt><dd><div class="para">
						A pointer to the type mapping in <code class="filename">conf/standardjbosscmp.xml</code>. This element is a child element of <em class="parameter"><code>&lt;metadata&gt;</code></em>. A legacy from JBoss4.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;validate-on-match&gt;</code></em></span></dt><dd><div class="para">
						Whether to validate the connection when the JCA layer matches a managed connection, such as when the connection is checked out of the pool. With the addition of <em class="parameter"><code>&lt;background-validation&gt;</code></em> this is not required. It is usually not necessary to specify <code class="literal">TRUE</code> for <em class="parameter"><code>&lt;validate-on-match&gt;</code></em> in conjunction with specifying <code class="literal">TRUE</code> for <em class="parameter"><code>&lt;background-validation&gt;</code></em>. Defaults to <code class="literal">TRUE</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;prefill&gt;</code></em></span></dt><dd><div class="para">
						Whether to attempt to prefill the connection pool to the minimum number of connections. Only <em class="firstterm">supporting pools</em> (OnePool) support this feature. A warning is logged if the pool does not support prefilling. Defaults to <code class="literal">TRUE</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;background-validation&gt;</code></em></span></dt><dd><div class="para">
						Background connection validation reduces the overall load on the RDBMS system when validating a connection. When using this feature, EAP checks whether the current connection in the pool a separate thread (ConnectionValidator). <em class="parameter"><code>&lt;background-validation-minutes&gt;</code></em> depends on this value also being set to <code class="literal">TRUE</code>. Defaults to <code class="literal">FALSE</code>.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>The &lt;background-validation&gt; Parameter Deprecated</strong></p></div><div class="admonition"><div class="para">
							The &lt;background-validation&gt; parameter has been deprecated and is no longer supported: set the &lt;background-validation-millis&gt; parameter to a value greater than 0 and background validation will be enabled automatically.
						</div></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;background-validation-millis&gt;</code></em></span></dt><dd><div class="para">
						Background connection validation reduces the overall load on the RDBMS system when validating a connection. Setting this parameter means that JBoss will attempt to validate the current connections in the pool as a separate thread (<code class="classname">ConnectionValidator</code>). This parameter's value defines the interval for which the <code class="classname">ConnectionValidator</code> runs. The value should differ from the &lt;idle-timeout-minutes &gt; value). The default value of the property is <code class="literal">0</code>. If <span class="property">&lt;background-validation-millis&gt;</span> is set to a value greater than 0, the background validation is enabled.
					</div><div class="para">
						This value should not be the same as your <code class="literal">&lt;idle-timeout-minutes&gt;</code> value.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							You should set this to a smaller value than <em class="parameter"><code>&lt;idle-timeout-minutes&gt;</code></em>, unless you have specified <em class="parameter"><code>&lt;min-pool-size&gt;</code></em> a minimum pool size set.
						</div></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;idle-timeout-minutes&gt;</code></em></span></dt><dd><div class="para">
						The maximum time, in minutes, before an idle connection is closed. A value of <code class="literal">0</code> disables timeout. Defaults to <code class="literal">15</code> minutes.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;track-connection-by-tx&gt;</code></em></span></dt><dd><div class="para">
						Whether the connection should be locked to the transaction, instead of returning it to the pool at the end of the transaction. In previous releases, this was <code class="literal">true</code> for local connection factories and <code class="literal">false</code> for XA connection factories. The default is now <code class="literal">true</code> for both local and XA connection factories, and the element has been deprecated.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;interleaving&gt;</code></em></span></dt><dd><div class="para">
						Enables interleaving for XA connection factories.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;background-validation-minutes&gt;</code></em></span></dt><dd><div class="para">
						How often, in minutes, the ConnectionValidator runs. Default to 0 mills.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>The &lt;background-validation-minutes&gt; Parameter Deprecated</strong></p></div><div class="admonition"><div class="para">
							The &lt;background-validation-minutes&gt; parameter has been deprecated and is no longer supported: use the &lt;background-validation-millis&gt; parameter instead.
						</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							You should set this to a smaller value than &lt;idle-timeout-minutes&gt;, unless you have specified &lt;min-pool-size&gt; a minimum pool size set.
						</div></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;url-delimiter&gt;, &lt;url-property&gt;, &lt;url-selector-strategy-class-name&gt;</code></em></span></dt><dd><div class="para">
						Parameters dealing with database failover. As of JBoss Enterprise Application Platform 5.1, these are configured as part of the main datasource configuration. In previous versions, <em class="parameter"><code>&lt;url-delimiter&gt;</code></em> appeared as <em class="parameter"><code>&lt;url-delimiter&gt;</code></em>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;stale-connection-checker-class-name&gt;</code></em></span></dt><dd><div class="para">
						An implementation of <code class="classname">org.jboss.resource.adapter.jdbc.StateConnectionChecker</code> that decides whether <code class="systemitem">SQLException</code>s that notify of bad connections throw the <code class="systemitem">org.jboss.resource.adapter.jdbc.StateConnectionException</code> exception.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;max-pool-size&gt;</code></em></span></dt><dd><div class="para">
						The maximum number of connections allowed in the pool. If undefined, the size defaults to <code class="literal">10</code>. The value in the example datasource definition (<code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hsqldb-ds.xml</code>) is set to 20.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;min-pool-size&gt;</code></em></span></dt><dd><div class="para">
						The minimum number of connections maintained in the pool. Unless <em class="parameter"><code>&lt;prefill&gt;</code></em> is <code class="literal">TRUE</code>, the pool remains empty until the first use, at which point the pool is filled to the <em class="parameter"><code>&lt;min-pool-size&gt;</code></em>. When the pool size drops below the <em class="parameter"><code>&lt;min-pool-size&gt;</code></em> due to idle timeouts, the pool is refilled to the <em class="parameter"><code>&lt;min-pool-size&gt;</code></em>. Defaults to <code class="literal">0</code>.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;blocking-timeout-millis&gt;</code></em></span></dt><dd><div class="para">
						The length of time, in milliseconds, to wait for a connection to become available when all the connections are checked out. Defaults to <code class="literal">30000</code>, which is 30 seconds.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;use-fast-fail&gt;</code></em></span></dt><dd><div class="para">
						Whether to continue trying to acquire a connection from the pool even if the previous attempt has failed, or begin failover. This is to address performance issues where validation SQL takes significant time and resources to execute. Defaults to <code class="literal">FALSE</code>.
					</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Parameters for <code class="filename">javax.sql.XADataSource</code> Usage</strong></p><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>&lt;connection-url&gt;</code></em></span></dt><dd><div class="para">
						The JDBC driver connection URL string
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;driver-class&gt;</code></em></span></dt><dd><div class="para">
						The JDBC driver class implementing the <code class="classname">java.sql.Driver</code>
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;connection-property&gt;</code></em></span></dt><dd><div class="para">
						Used to configure the connections retrieved from the <code class="classname">java.sql.Driver</code>.
					</div><div class="example"><a id="idm139776748790000">
      ⁠</a><p class="title"><strong>Example 17.2. Example <em class="parameter"><code>&lt;connection-property&gt;</code></em></strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;connection-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"char.encoding"</span><span xmlns="" class="perl_Keyword">&gt;</span>UTF-8<span xmlns="" class="perl_Keyword">&lt;/connection-property&gt;</span>
</pre></div></div></dd></dl></div><div class="variablelist"><p class="title"><strong>Parameters for <code class="filename">javax.sql.XADataSource</code> Usage</strong></p><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>&lt;xa-datasource-class&gt;</code></em></span></dt><dd><div class="para">
						The class implementing the <code class="classname">XADataSource</code>
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;xa-datasource-property&gt;</code></em></span></dt><dd><div class="para">
						Properties used to configure the <code class="classname">XADataSource</code>.
					</div><div class="example"><a id="idm139776738630544">
      ⁠</a><p class="title"><strong>Example 17.3. Example <em class="parameter"><code>&lt;xa-datasource-property&gt; Declarations</code></em></strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IfxWAITTIME"</span><span xmlns="" class="perl_Keyword">&gt;</span>10<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"IfxIFXHOST"</span><span xmlns="" class="perl_Keyword">&gt;</span>myhost.mydomain.com<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"PortNumber"</span><span xmlns="" class="perl_Keyword">&gt;</span>1557<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>mydb<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>myserver<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
</pre></div></div></dd><dt><span class="term"><em class="parameter"><code>&lt;xa-resource-timeout&gt;</code></em></span></dt><dd><div class="para">
						The number of seconds passed to <code class="methodname">XAResource.setTransactionTimeout()</code> when not zero.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;isSameRM-override-value&gt;</code></em></span></dt><dd><div class="para">
						When set to <code class="literal">FALSE</code>, fixes some problems with Oracle databases.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;no-tx-separate-pools&gt;</code></em></span></dt><dd><div class="para">
						Pool transactional and non-transactional connections separately
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition"><div class="para">
							Using this option will cause your total pool size to be twice <code class="varname">max-pool-size</code>, because two actual pools will be created.
						</div></div></div><div class="para">
						Used to fix problems with Oracle.
					</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Security Parameters</strong></p><dl class="variablelist"><dt><span class="term"> <code class="literal">&lt;application-managed-security&gt;</code> </span></dt><dd><div class="para">
						Uses the username and password passed on the <code class="methodname">getConnection</code> or <code class="methodname">createConnection</code> request by the application.
					</div></dd><dt><span class="term"> <code class="literal">&lt;security-domain&gt;</code> </span></dt><dd><div class="para">
						Uses the identified login module configured in <code class="filename">conf/login-module.xml</code>.
					</div></dd><dt><span class="term"> <code class="literal">&lt;security-domain-and-application&gt;</code> </span></dt><dd><div class="para">
						Uses the identified login module configured in <code class="filename">conf/login-module.xml</code> and other connection request information supplied by the application, for example JMS Queues and Topics.
					</div></dd></dl></div><div class="variablelist"><a id="xa-recovery-parameters">
      ⁠</a><p class="title"><strong>Parameters for XA Recovery in the JCA Layer</strong></p><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>&lt;recover-user-name&gt;</code></em></span></dt><dd><div class="para">
						The user with credentials to perform a recovery operation.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;recover-password&gt;</code></em></span></dt><dd><div class="para">
						Password of the user with credentials to perform a recovery operation.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;recover-security-domain&gt;</code></em></span></dt><dd><div class="para">
						Security domain for recovery.
					</div></dd><dt><span class="term"><em class="parameter"><code>&lt;no-recover&gt;</code></em></span></dt><dd><div class="para">
						Excludes a datasource from recovery.
					</div></dd></dl></div><div class="para">
			The fields in <a class="xref" href="datasource-config.html#xa-recovery-parameters">Parameters for XA Recovery in the JCA Layer</a>should have a fall back value of their non-recover counterparts: <em class="parameter"><code>&lt;user-name&gt;</code></em>, <em class="parameter"><code>&lt; password&gt;</code></em> and <em class="parameter"><code>&lt;security-domain&gt;</code></em>.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776747220224">
      ⁠</a>17.3. Datasource Examples</h1></div></div></div><div class="para">
			For database-specific examples, see <a class="xref" href="appendix-db-specific-datasources.html">Appendix B, <em>Vendor-Specific Datasource Definitions</em></a>.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776747218496">
      ⁠</a>17.3.1. Generic Datasource Example</h2></div></div></div><div class="example"><a id="idm139776759559584">
      ⁠</a><p class="title"><strong>Example 17.4. Generic Datasource Example</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>GenericDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>[jdbc: url for use with Driver class]<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>[fully qualified class name of java.sql.Driver implementation]<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- you can include connection properties that will get passed in </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 the DriverManager.getConnection(props) call--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- look at your Driver docs to see what these might be --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"char.encoding"</span><span xmlns="" class="perl_Keyword">&gt;</span>UTF-8<span xmlns="" class="perl_Keyword">&lt;/connection-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-isolation&gt;</span>TRANSACTION_SERIALIZABLE<span xmlns="" class="perl_Keyword">&lt;/transaction-isolation&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--pooling parameters--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>5<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;max-pool-size&gt;</span>100<span xmlns="" class="perl_Keyword">&lt;/max-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;blocking-timeout-millis&gt;</span>5000<span xmlns="" class="perl_Keyword">&lt;/blocking-timeout-millis&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;idle-timeout-minutes&gt;</span>15<span xmlns="" class="perl_Keyword">&lt;/idle-timeout-minutes&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;set-tx-query-timeout&gt;&lt;/set-tx-query-timeout&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;query-timeout&gt;</span>300<span xmlns="" class="perl_Keyword">&lt;/query-timeout&gt;</span> <span xmlns="" class="perl_Comment">&lt;!-- maximum of 5 minutes for queries --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- pooling criteria.  USE AT MOST ONE--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--  If you do not use JAAS login modules or explicit login </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 getConnection(usr,pw) but rely on user/pw specified above, </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 do not specify anything here --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- If you supply the usr/pw from a JAAS login module --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security-domain&gt;</span>MyRealm<span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- if your app supplies the usr/pw explicitly getConnection(usr, pw) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;application-managed-security&gt;&lt;/application-managed-security&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--Anonymous depends elements are copied verbatim into the ConnectionManager mbean config--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;depends&gt;</span>myapp.service:service=DoSomethingService<span xmlns="" class="perl_Keyword">&lt;/depends&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- you can include regular mbean configurations like this one --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;mbean</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.tm.XidFactory"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">	 name=</span><span xmlns="" class="perl_String">"jboss:service=XidFactory"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Pad"</span><span xmlns="" class="perl_Keyword">&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/mbean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- Here's an xa example --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>GenericXADS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>[fully qualified name of class implementing javax.sql.XADataSource goes here]<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"SomeProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>SomePropertyValue<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"SomeOtherProperty"</span><span xmlns="" class="perl_Keyword">&gt;</span>SomeOtherValue<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-isolation&gt;</span>TRANSACTION_SERIALIZABLE<span xmlns="" class="perl_Keyword">&lt;/transaction-isolation&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--pooling parameters--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>5<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;max-pool-size&gt;</span>100<span xmlns="" class="perl_Keyword">&lt;/max-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;blocking-timeout-millis&gt;</span>5000<span xmlns="" class="perl_Keyword">&lt;/blocking-timeout-millis&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;idle-timeout-minutes&gt;</span>15<span xmlns="" class="perl_Keyword">&lt;/idle-timeout-minutes&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- pooling criteria.  USE AT MOST ONE--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--  If you do not use JAAS login modules or explicit login </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 getConnection(usr,pw) but rely on user/pw specified above, </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 do not specify anything here --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- If you supply the usr/pw from a JAAS login module --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security-domain&gt;&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- if your app supplies the usr/pw explicitly getConnection(usr, pw) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;application-managed-security&gt;&lt;/application-managed-security&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
<span xmlns="" class="line">​</span>				
<span xmlns="" class="line">​</span>				
<span xmlns="" class="line">​</span>				
<span xmlns="" class="line">​</span>
</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776759556992">
      ⁠</a>17.3.2. Configuring a DataSource for Remote Usage</h2></div></div></div><div class="para">
				JBoss EAP supports accessing a DataSource from a remote client. See <a class="xref" href="datasource-config.html#remote-usage-example">Example 17.5, “Configuring a Datasource for Remote Usage”</a> for the change that gives the client the ability to look up the DataSource from JNDI, which is to specify <code class="varname">use-java-context</code>=<code class="literal">false</code>.
			</div><div class="example"><a id="remote-usage-example">
      ⁠</a><p class="title"><strong>Example 17.5. Configuring a Datasource for Remote Usage</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>GenericDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;use-java-context&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-java-context&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>...<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>       ...
</pre></div></div><div class="para">
				This causes the DataSource to be bound under the JNDI name <code class="literal">GenericDS</code> instead of the default of <code class="literal">java:/GenericDS</code>, which restricts the lookup to the same Virtual Machine as the EAP server.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Use of the <em class="parameter"><code>&lt;use-java-context&gt;</code></em> setting is not recommended in a production environment. It requires accessing a connection pool remotely and this can cause unexpected problems, since connections are not serializable. Also, transaction propagation is not supported, since it can lead to connection leaks if unreliability is present, such as in a system crash or network failure. A remote session bean facade is the preferred way to access a datasource remotely.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776749982800">
      ⁠</a>17.3.3. Configuring a Datasource to Use Login Modules</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139776749982032">
      ⁠</a><p class="title"><strong>Procedure 17.1. Configuring a Datasource to Use Login Modules</strong></p><ol class="1"><li class="step"><p class="title"><strong>Add the <em class="parameter"><code>&lt;security-domain-parameter&gt;</code></em> to the XML file for the datasource.</strong></p><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>         ...
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;security-domain&gt;</span>MyDomain<span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>         ...
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
</pre></li><li class="step"><p class="title"><strong>Add an application policy to the <code class="filename">login-config.xml</code> file.</strong></p><div class="para">
						The authentication section needs to include the configuration for your login-module. For example, to encrypt the database password, use the <code class="systemitem">SecureIdentityLoginModule</code> login module.
					</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"MyDomain"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;authentication&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;login-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.resource.security.SecureIdentityLoginModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"username"</span><span xmlns="" class="perl_Keyword">&gt;</span>scott<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"password"</span><span xmlns="" class="perl_Keyword">&gt;</span>-170dd0fbd8c13748<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"managedConnectionFactoryName"</span><span xmlns="" class="perl_Keyword">&gt;</span>jboss.jca:service=LocalTxCM,name=OracleDSJAAS<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/login-module&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/authentication&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>
</pre></li><li class="step"><div class="para">
						If you plan to fetch the data source connection from a web application, authentication must be enabled for the web application, so that the <code class="systemitem">Subject</code> is populated.
					</div></li><li class="step"><div class="para">
						If users need the ability to connect anonymously, add an additional login module to the application-policy, to populate the security credentials.
					</div></li><li class="step"><div class="para">
						Add the <code class="systemitem">UsersRolesLoginModule</code> module to the beginning of the chain. The <code class="systemitem">usersProperties</code> and <code class="systemitem">rolesProperties</code> parameters can be directed to dummy files.
					</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;login-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.auth.spi.UsersRolesLoginModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"unauthenticatedIdentity"</span><span xmlns="" class="perl_Keyword">&gt;</span>nobody<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"usersProperties"</span><span xmlns="" class="perl_Keyword">&gt;</span>props/users.properties<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"rolesProperties"</span><span xmlns="" class="perl_Keyword">&gt;</span>props/roles.properties<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/login-module&gt;</span>
</pre></li></ol></div></div></div></div></body></html>