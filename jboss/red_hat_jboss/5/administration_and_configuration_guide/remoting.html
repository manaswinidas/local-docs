<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 14. Remoting</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="remoting">
      ⁠</a>Chapter 14. Remoting</h1></div></div></div><div class="para">
		<a id="idm139776682130544" class="indexterm"/> The main objective of JBoss Remoting is to provide a single API for most network based invocations and related services that use pluggable transports and data marshallers. The JBoss Remoting API provides the ability for making synchronous and asynchronous remote calls, push and pull callbacks, and automatic discovery of remoting servers. The intention is to allow for the addition of different transports to fit different needs, yet still maintain the same API for making the remote invocations and only requiring configuration changes, not code changes, to fit these different needs.
	</div><div class="para">
		Out of the box, Remoting supplies multiple transports (bisocket, http, rmi, socket, servlet, and their ssl enabled counterparts), standard and compressing data marshallers, and a configurable facility for switching between standard jdk serialization and JBoss Serialization. It is also capable of remote classloading, has extensive facilities for connection failure notification, performs call by reference optimization for client/server invocations collocated in a single JVM, and implements multihomed servers.
	</div><div class="para">
		In the Enterprise Application Platform, Remoting supplies the transport layer for the EJB2, EJB3, and Messaging subsystems. In each case, the configuration of Remoting is largely predetermined and fixed, but there are times when it is useful to know how to alter a Remoting configuration.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776727197024">
      ⁠</a>14.1. Background</h1></div></div></div><div class="para">
			A Remoting server consists of a Connector, which wraps and configures a transport specific server invoker. A connector is represented by an InvokerLocator string, such as
		</div><pre class="programlisting">
    socket://bluemonkeydiamond.com:8888/?timeout=10000&amp;serialization=jboss
</pre><div class="para">
			which indicates that a server using the socket transport is accessible at port 8888 of host bluemonkeydiamond.com, and that the server is configured to use a socket timeout of 10000 and to use JBoss Serialization. A Remoting client can use an InvokerLocator to connect to a given server.
		</div><div class="para">
			In the Enterprise Application Platform, Remoting servers and clients are created far below the surface and are accessible only through configuration files. Moreover, when a proxy for a SLSB, for example, is downloaded from the JNDI directory, it comes with a copy of the InvokerLocator, so that it knows how to contact the appropriate Remoting server. <span class="bold bold"><strong>The important fact to note is that, since the server and its clients share the InvokerLocator, the parameters in the InvokerLocator serve to configure both clients and servers.</strong></span>
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776751309376">
      ⁠</a>14.2. JBoss Remoting Configuration</h1></div></div></div><div class="para">
			There are two kinds of XML files that can be used to create and configure a Remoting Connector. A file with a name of the form *-service.xml can be used to define a Connector as an MBean, and a file of the form *-jboss-beans.xml can be used to define a Connector as a POJO.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776764886688">
      ⁠</a>14.2.1. MBeans</h2></div></div></div><div class="para">
				In the JBoss Messaging JMS subsystem, a Remoting server is configured in the file remoting-bisocket-service.xml, which, in abbreviated form, looks like
			</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;mbean</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.remoting.transport.Connector"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            name=</span><span xmlns="" class="perl_String">"jboss.messaging:service=Connector,transport=bisocket"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            display-name=</span><span xmlns="" class="perl_String">"Bisocket Transport Connector"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Configuration"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;config&gt;</span>
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;invoker</span><span xmlns="" class="perl_Others"> transport=</span><span xmlns="" class="perl_String">"bisocket"</span><span xmlns="" class="perl_Keyword">&gt;</span>         
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"marshaller"</span><span xmlns="" class="perl_Others"> isParam=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>org.jboss.jms.wireformat.JMSWireFormat<span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"unmarshaller"</span><span xmlns="" class="perl_Others"> isParam=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>org.jboss.jms.wireformat.JMSWireFormat<span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>            
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"serverBindAddress"</span><span xmlns="" class="perl_Keyword">&gt;</span>${jboss.bind.address}<span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"serverBindPort"</span><span xmlns="" class="perl_Keyword">&gt;</span>4457<span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"callbackTimeout"</span><span xmlns="" class="perl_Keyword">&gt;</span>10000<span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>                 ...     
<span xmlns="" class="line">​</span>          <span xmlns="" class="perl_Keyword">&lt;/invoker&gt;</span>
<span xmlns="" class="line">​</span>              ...
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/config&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/mbean&gt;</span>
</pre><div class="para">
				This configuration file tells us several facts, including
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						This server uses the bisocket transport;
					</div></li><li class="listitem"><div class="para">
						it runs on port 4457 of host ${jboss.bind.address}; and
					</div></li><li class="listitem"><div class="para">
						JBoss Messaging uses its own marshaling algorithm.
					</div></li></ul></div><div class="para">
				The InvokerLocator is derived from this file. <span class="bold bold"><strong>The important fact to note is that the attribute "isParam" determines if a parameter is to be included in the InvokerLocator.</strong></span> If "isParam" is omitted or set to false, the parameter will apply only to the server. In this case, the parameter will not be transmitted to the client. The InvokerLocator for a Remoting server with a ${jboss.bind.address} of bluemonkeydiamond.com would be:
			</div><pre class="programlisting">
      bisocket://bluemonkeydiamond.com:4457/?marshaller=
      org.jboss.jms.wireformat.JMSWireFormat&amp;
      unmarshaller=org.jboss.jms.wireformat.JMSWireFormat
</pre><div class="para">
				Note that the parameter "callbackTimeout" is not included in the InvokerLocator.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776747616592">
      ⁠</a>14.2.2. POJOs</h2></div></div></div><div class="para">
				The same Connector could be configured by way of the <code class="classname">org.jboss.remoting.ServerConfiguration</code> POJO:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"JBMConnector"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.remoting.transport.Connector"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;annotation&gt;</span>@org.jboss.aop.microcontainer.aspects.jmx.JMX
<span xmlns="" class="line">​</span>        (name="jboss.messaging:service=Connector,transport=bisocket",
<span xmlns="" class="line">​</span>        exposedInterface=org.jboss.remoting.transport.ConnectorMBean.class,
<span xmlns="" class="line">​</span>        registerDirectly=true)<span xmlns="" class="perl_Keyword">&lt;/annotation&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"serverConfiguration"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"JBMConfiguration"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>     
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Comment">&lt;!-- Remoting server configuration --&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"JBMConfiguration"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.remoting.ServerConfiguration"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;constructor&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>bisocket<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/constructor&gt;</span>
<span xmlns="" class="line">​</span>     
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">&lt;!-- Parameters visible to both client and server --&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"invokerLocatorParameters"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;map</span><span xmlns="" class="perl_Others"> keyClass=</span><span xmlns="" class="perl_String">"java.lang.String"</span><span xmlns="" class="perl_Others"> valueClass=</span><span xmlns="" class="perl_String">"java.lang.String"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;entry&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;key&gt;</span>serverBindAddress<span xmlns="" class="perl_Keyword">&lt;/key&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;value-factory</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"ServiceBindingManager"</span><span xmlns="" class="perl_Others"> method=</span><span xmlns="" class="perl_String">"getStringBinding"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                 <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>JBMConnector<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>                 <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>${host}<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;/value-factory&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;/entry&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;entry&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;key&gt;</span>serverBindPort<span xmlns="" class="perl_Keyword">&lt;/key&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;value-factory</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"ServiceBindingManager"</span><span xmlns="" class="perl_Others"> method=</span><span xmlns="" class="perl_String">"getStringBinding"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                 <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>JBMConnector<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>                 <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>${port}<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;/value-factory&gt;</span>
<span xmlns="" class="line">​</span>             <span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;/entry&gt;</span>
<span xmlns="" class="line">​</span>              ...
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;entry&gt;&lt;key&gt;</span>marshaller<span xmlns="" class="perl_Keyword">&lt;/key&gt;</span> <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.jms.wireformat.JMSWireFormat<span xmlns="" class="perl_Keyword">&lt;/value&gt;&lt;/entry&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;entry&gt;&lt;key&gt;</span>unmarshaller<span xmlns="" class="perl_Keyword">&lt;/key&gt;</span> <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.jms.wireformat.JMSWireFormat<span xmlns="" class="perl_Keyword">&lt;/value&gt;&lt;/entry&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/map</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Error">&lt;/property</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>       
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Comment">&lt;!-- Parameters visible only to server --&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"serverParameters"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;map</span><span xmlns="" class="perl_Others"> keyClass=</span><span xmlns="" class="perl_String">"java.lang.String"</span><span xmlns="" class="perl_Others"> valueClass=</span><span xmlns="" class="perl_String">"java.lang.String"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>           <span xmlns="" class="perl_Keyword">&lt;entry&gt;&lt;key&gt;</span>callbackTimeout<span xmlns="" class="perl_Keyword">&lt;/key&gt;</span> <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>10000<span xmlns="" class="perl_Keyword">&lt;/value&gt;&lt;/entry&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/map&gt;</span>
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>                                  
<span xmlns="" class="line">​</span>        ...
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
</pre><div class="para">
				In this version, the configuration information is expressed in the JBMConfiguration <code class="classname">ServerConfiguration</code> POJO, which is then injected into the JBMConnector <code class="classname">org.jboss.remoting.transport.Connector</code> POJO. The syntax is that of the Microcontainer, which is beyond the scope of this chapter. See <a class="xref" href="microcontainer.html">Chapter 8, <em>Microcontainer</em></a> for details. One variation from the MBean version is the use of the ServiceBindingManager, which is also beyond the scope of this chapter. Note that the @org.jboss.aop.microcontainer.aspects.jmx.JMX annotation causes the JBMConnector to be visible as an MBean named "jboss.messaging:service=Connector,transport=bisocket".
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776735540848">
      ⁠</a>14.3. Multihomed servers</h1></div></div></div><div class="para">
			Remoting can create servers bound to multiple interfaces. One application of this facility would be binding a server to one interface that faces the internet and another that faces a LAN. For example, the preceding POJO example can be modified by (1) adding POJOs
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Comment">&lt;!-- Beans homes1 and homes2 are used to construct a multihome Remoting server. --&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"homes1"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"java.lang.StringBuffer"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;constructor&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;parameter</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"java.lang.String"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;value-factory</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"ServiceBindingManager"</span><span xmlns="" class="perl_Others"> method=</span><span xmlns="" class="perl_String">"getStringBinding"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>JBMConnector:bindingHome1<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>${host}:${port}<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/value-factory&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/constructor&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"homes2"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"java.lang.StringBuffer"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;constructor</span><span xmlns="" class="perl_Others"> factoryMethod=</span><span xmlns="" class="perl_String">"append"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;factory</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"homes1"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;value-factory</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"ServiceBindingManager"</span><span xmlns="" class="perl_Others"> method=</span><span xmlns="" class="perl_String">"getStringBinding"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>JBMConnector:bindingHome2<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>               <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>!${host}:${port}<span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;/value-factory&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/constructor&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
</pre><div class="para">
			which results in a StringBuffer with a value something like (according to the ServiceBindingManager configuration values for JBMConnector:bindingHome1 and JBMConnector:bindingHome2) "external.acme.com:5555!internal.acme.com:4444", and (2) replacing the "serverBindAddress" and "serverBindPort" parameters with
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;entry&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;key&gt;</span>homes<span xmlns="" class="perl_Keyword">&lt;/key&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;&lt;value-factory</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"homes2"</span><span xmlns="" class="perl_Others"> method=</span><span xmlns="" class="perl_String">"toString"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/entry&gt;</span>
</pre><div class="para">
			which transforms the StringBuffer into the String "external.acme.com:5555!internal.acme.com:4444" and injects it into the JBMConnector. The resulting InvokerLocator will look like
		</div><pre class="programlisting">
    bisocket://multihome/?homes=external.acme.com:5555!internal.acme.com:
    4444&amp;marshaller=org.jboss.jms.wireformat.JMSWireFormat&amp;
    unmarshaller=org.jboss.jms.wireformat.JMSWireFormat
</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776746300144">
      ⁠</a>14.4. Address translation</h1></div></div></div><div class="para">
			Sometimes a server must be accessed through an address translating firewall, and a Remoting server can be configured with both a binding address/port and an address/port to be used by a client. Two more parameters are used: "clientConnectAddress" and "clientConnectPort". The "serverBindAddress" and "serverBindPort" values are used to create the server, and the values of "clientConnectAddress" and "clientConnectPort" are used in the InvokerLocator, which tells the client where the server is. There is also an analogous "connecthomes" parameter for multihome servers. In this case, "homes" is used to configure the server, and "connecthomes" tells the client where the server is.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776746298032">
      ⁠</a>14.5. Where are they now?</h1></div></div></div><div class="para">
			The actual Remoting configuration files for the supported subsystems are as follows:
		</div><div class="para">
			EJB2: <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/remoting-jboss-beans.xml</code>
		</div><div class="para">
			EJB3: <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/ejb3-connectors-jboss-beans.xml</code>
		</div><div class="para">
			JBM: <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/messaging/remoting-bisocket-service.xml</code>
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776744349040">
      ⁠</a>14.6. Further information.</h1></div></div></div><div class="para">
			Additional details may be found in the Remoting Guide at <a href="http://www.jboss.org/jbossremoting/docs/guide/2.5/html/index.html"> http://www.jboss.org/jbossremoting/docs/guide/2.5/html/index.html</a>.
		</div></div></div></body></html>