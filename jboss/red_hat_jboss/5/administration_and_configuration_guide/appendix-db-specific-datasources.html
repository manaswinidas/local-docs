<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Appendix B. Vendor-Specific Datasource Definitions</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="appendix-db-specific-datasources">
      ⁠</a>Appendix B. Vendor-Specific Datasource Definitions</h1></div></div></div><div class="para">
		This appendix includes datasource definitions for databases supported by JBoss Enterprise Application Platform.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776757561936">
      ⁠</a>B.1. Deployer Location and Naming</h1></div></div></div><div class="para">
			All database deployers should be saved to the <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/</code> directory on the server. Each deployer file needs to end with the suffix <code class="filename">-ds.xml</code>. For instance, an Oracle datasource deployer might be named <code class="filename">oracle-ds.xml</code>. If files are not named properly, the are not found by the server.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776698642400">
      ⁠</a>B.2. DB2</h1></div></div></div><div class="example"><a id="idm139776730626224">
      ⁠</a><p class="title"><strong>Example B.1. DB2 Local-XA</strong></p><div class="example-contents"><div class="para">
				Copy the <code class="filename"><em class="replaceable">$db2_install_dir</em>/java/db2jcc.jar</code> and <code class="filename"><em class="replaceable">$db2_install_dir</em>/java/db2jcc_license_cu.jar</code> files into the <code class="filename"><em class="replaceable">$jboss_install_dir</em>/server/default/lib</code> directory. The <code class="filename">db2java.zip</code> file, which is part of the legacy CLI driver, is normally not required when using the DB2 Universal JDBC driver included in DB2 v8.1 and later.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>DB2DS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Use the syntax 'jdbc:db2:yourdatabase' for jdbc type 2 connection --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Use the syntax 'jdbc:db2://serveraddress:port/yourdatabase' for jdbc type 4 connection --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:db2://serveraddress:port/yourdatabase<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.ibm.db2.jcc.DB2Driver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>0<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>DB2<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776680496576">
      ⁠</a><p class="title"><strong>Example B.2. DB2 XA</strong></p><div class="example-contents"><div class="para">
				Copy the <code class="filename"><em class="replaceable">$db2_install_dir</em>/java/db2jcc.jar</code> and <code class="filename"><em class="replaceable">$db2_install_dir</em>/java/db2jcc_license_cu.jar</code> files into the <code class="filename"><em class="replaceable">$jboss_install_dir</em>/server/default/lib</code> directory.
			</div><div class="para">
				The <code class="filename">db2java.zip</code> file is required when using the DB2 Universal JDBC driver (type 4) for XA on DB2 v8.1 fixpak 14 (and the corresponding DB2 v8.2 fixpak 7).
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!--</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">      XADatasource for DB2 v8.x (app driver)</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">  --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>DB2XADS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>com.ibm.db2.jcc.DB2XADataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>your_server_address<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"PortNumber"</span><span xmlns="" class="perl_Keyword">&gt;</span>your_server_port<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>your_database_name<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- DriverType can be either 2 or 4, but you most likely want to use the JDBC type 4 as it does not require a DB" client --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DriverType"</span><span xmlns="" class="perl_Keyword">&gt;</span>4<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- If driverType 4 is used, the following two tags are needed --&gt;</span>     
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;isSameRM-override-value&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/isSameRM-override-value&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"User"</span><span xmlns="" class="perl_Keyword">&gt;</span>your_user<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Password"</span><span xmlns="" class="perl_Keyword">&gt;</span>your_password<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>DB2<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776679982784">
      ⁠</a><p class="title"><strong>Example B.3. DB2 on AS/400</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--  JBoss Server Configuration                                           --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- $Id: db2-400-ds.xml,v 1.1.4.2 2004/10/27 18:44:10 pilhuhn Exp $ --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- You need the jt400.jar that is delivered with IBM iSeries Access or the</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">OpenSource Project jtopen.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">[systemname] Hostame of the iSeries</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">[schema]     Default schema is needed so jboss could use metadat to test if the tables exists</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">--&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>DB2-400<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:as400://[systemname]/[schema];extended dynamic=true;package=jbpkg;package cache=true;package library=jboss;errors=full<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.ibm.as400.access.AS400JDBCDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>[username]<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>[password]<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>0<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>DB2/400<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776697086160">
      ⁠</a><p class="title"><strong>Example B.4. DB2 on AS/400 "native"</strong></p><div class="example-contents"><div class="para">
				The <em class="wordasword">Native</em> JDBC driver is shipped as part of the IBM Developer Kit for Java (57xxJV1). It is implemented by making native method calls to the SQL <em class="firstterm">CLI (Call Level Interface)</em>, and it only runs on the i5/OS JVM. The class name to register is <code class="classname">com.ibm.db2.jdbc.app.DB2Driver</code>. The URL subprotocol is <code class="literal">db2</code>. Refer to the JDBC FAQs at <a href="http://www-03.ibm.com/systems/i/software/toolbox/faqjdbc.html#faqA1">http://www-03.ibm.com/systems/i/software/toolbox/faqjdbc.html#faqA1</a> for more information.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--  JBoss Server Configuration                                           --&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- $Id: db2-400-ds.xml,v 1.1.4.2 2004/10/27 18:44:10 pilhuhn Exp $       --&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- You need the jt400.jar that is delivered with IBM iSeries Access or the      </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">OpenSource Project jtopen.      </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">[systemname] Hostame of the iSeries      </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">[schema]     Default schema is needed so jboss could use metadat to test if the tables exists  --&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>DB2-400<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:db2://[systemname]/[schema];extended dynamic=true;package=jbpkg;package cache=true;package library=jboss;errors=full<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.ibm.db2.jdbc.app.DB2Driver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>[username]<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>[password]<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>0<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>        
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;        --&gt;</span>        
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool        </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;        --&gt;</span>      
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>      
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>          
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>DB2/400<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>      
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><p class="title"><strong>Tips</strong></p><ul><li class="listitem"><div class="para">
						This driver is sensitive to the job’s CCSID, but works fine with <code class="varname">CCSID</code>=<code class="literal">37</code>.
					</div></li><li class="listitem"><div class="para">
						<code class="varname">[systemname]</code> must be defined as entry <code class="literal">WRKRDBDIRE</code> like <code class="varname">*local</code>.
					</div></li></ul></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776727248640">
      ⁠</a>B.3. Oracle</h1></div></div></div><div class="example"><a id="idm139776727247840">
      ⁠</a><p class="title"><strong>Example B.5. Oracle Local-TX Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--  JBoss Server Configuration                                           --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- $Id: oracle-ds.xml,v 1.6 2004/09/15 14:37:40 loubyansky Exp $ --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ==================================================================== --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--  Datasource config for Oracle originally from Steven Coy             --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ==================================================================== --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>OracleDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:oracle:thin:@youroraclehost:1521:yoursid<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	See on WIKI page below how to use Oracle's thin JDBC driver to connect with enterprise RAC.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	Here are a couple of the possible OCI configurations.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	For more information, see http://otn.oracle.com/docs/products/oracle9i/doc_library/release2/java.920/a96654/toc.htm</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;connection-url&gt;jdbc:oracle:oci:@youroracle-tns-name&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">or</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;connection-url&gt;jdbc:oracle:oci:@(description=(address=(host=youroraclehost)(protocol=tcp)(port=1521))(connect_data=(SERVICE_NAME=yourservicename)))&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">Clearly, its better to have TNS set up properly.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>oracle.jdbc.driver.OracleDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>5<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;max-pool-size&gt;</span>100<span xmlns="" class="perl_Keyword">&lt;/max-pool-size&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Uses the pingDatabase method to check a connection is still valid before handing it out from the pool --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--valid-connection-checker-class-name&gt;org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker&lt;/valid-connection-checker-class-name--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Checks the Oracle error codes and messages for fatal errors --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exception-sorter-class-name&gt;</span>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter<span xmlns="" class="perl_Keyword">&lt;/exception-sorter-class-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool - the OracleValidConnectionChecker is prefered</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>Oracle9i<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776697048944">
      ⁠</a><p class="title"><strong>Example B.6. Oracle XA Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--  JBoss Server Configuration                                           --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--                                                                       --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- $Id: oracle-xa-ds.xml,v 1.13 2004/09/15 14:37:40 loubyansky Exp $ --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ATTENTION:  DO NOT FORGET TO SET Pad=true IN transaction-service.xml  --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!-- ===================================================================== --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>XAOracleDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;isSameRM-override-value&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/isSameRM-override-value&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>oracle.jdbc.xa.client.OracleXADataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"URL"</span><span xmlns="" class="perl_Keyword">&gt;</span>jdbc:oracle:oci8:@tc<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"User"</span><span xmlns="" class="perl_Keyword">&gt;</span>scott<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Password"</span><span xmlns="" class="perl_Keyword">&gt;</span>tiger<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Uses the pingDatabase method to check a connection is still valid before handing it out from the pool --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--valid-connection-checker-class-name&gt;org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker&lt;/valid-connection-checker-class-name--&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Checks the Oracle error codes and messages for fatal errors --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exception-sorter-class-name&gt;</span>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter<span xmlns="" class="perl_Keyword">&lt;/exception-sorter-class-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Oracles XA datasource cannot reuse a connection outside a transaction once enlisted in a global transaction and vice-versa --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;no-tx-separate-pools&gt;&lt;/no-tx-separate-pools&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>Oracle9i<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;mbean</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.resource.adapter.jdbc.vendor.OracleXAExceptionFormatter"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">         name=</span><span xmlns="" class="perl_String">"jboss.jca:service=OracleXAExceptionFormatter"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;depends</span><span xmlns="" class="perl_Others"> optional-attribute-name=</span><span xmlns="" class="perl_String">"TransactionManagerService"</span><span xmlns="" class="perl_Keyword">&gt;</span>jboss:service=TransactionManager<span xmlns="" class="perl_Keyword">&lt;/depends&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/mbean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776743611200">
      ⁠</a><p class="title"><strong>Example B.7. Oracle's Thin JDBC Driver with Enterprise RAC</strong></p><div class="example-contents"><div class="para">
				The extra configuration to use Oracle's Thin JDBC driver to connect with Enterprise RAC involves the &lt;connection-url&gt;. The two hostnames provide load balancing and failover to the underlying physical database.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:oracle:thin:@(description=(address_list=(load_balance=on)(failover=on)(address=(protocol=tcp)(host=xxxxhost1)(port=1521))(address=(protocol=tcp)(host=xxxxhost2)(port=1521)))(connect_data=(service_name=xxxxsid)(failover_mode=(type=select)(method=basic))))<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>...
</pre><div class="para">
				<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
						This example has only been tested against Oracle 10g.
					</div></div></div>

			</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776726076144">
      ⁠</a>B.3.1. Changes in Oracle 10g JDBC Driver</h2></div></div></div><div class="para">
				It is no longer necessary to enable the <code class="varname">Pad</code> option in your <code class="filename">jboss-service.xml</code> file. Further, you no longer need the &lt;no-tx-separate-pool/&gt;.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776726073840">
      ⁠</a>B.3.2. Type Mapping for Oracle 10g</h2></div></div></div><div class="para">
				You need to specify Oracle9i type mapping for Oracle 10g datasource configurations.
			</div><div class="example"><a id="idm139776740420160">
      ⁠</a><p class="title"><strong>Example B.8. Oracle9i Type Mapping</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span>....
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>Oracle9i<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>....</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776740417856">
      ⁠</a>B.3.3. Retrieving the Underlying Oracle Connection Object</h2></div></div></div><div class="example"><a id="idm139776740417088">
      ⁠</a><p class="title"><strong>Example B.9. Oracle Connection Object</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>Connection conn = myJBossDatasource.<span xmlns="" class="perl_Function">getConnection</span>();
<span xmlns="" class="line">​</span>WrappedConnection wrappedConn = (WrappedConnection)conn;
<span xmlns="" class="line">​</span>Connection underlyingConn = wrappedConn.<span xmlns="" class="perl_Function">getUnderlyingConnection</span>();
<span xmlns="" class="line">​</span>OracleConnection oracleConn = (OracleConnection)underlyingConn;
</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776740584000">
      ⁠</a>B.3.4. Limitations of Oracle 11g</h2></div></div></div><div class="para">
				In Oracle 11g R2 (both RAC and standalone), a complex query with LockMode.UPGRADE (ie: "for update") may cause a "No more data to read from socket" error. The workaround is to not use LockMode.UPGRADE on such queries. See Oracle bug number 9219636 for more details.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776740582176">
      ⁠</a>B.4. Sybase</h1></div></div></div><div class="example"><a id="idm139776758548992">
      ⁠</a><p class="title"><strong>Example B.10. Sybase Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>jdbc/SybaseDB<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Sybase jConnect URL for the database. </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 </span><span xmlns="" class="perl_Alert">NOTE</span><span xmlns="" class="perl_Comment">: The hostname and port are made up values. The optional</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 database name is provided, as well as some additinal Driver</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 parameters.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:sybase:Tds:host.at.some.domain:5000/db_name?JCONNECT_VERSION=6<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.sybase.jdbc2.jdbc.SybDataSource<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;exception-sorter-class-name&gt;</span>org.jboss.resource.adapter.jdbc.vendor.SybaseExceptionSorter<span xmlns="" class="perl_Keyword">&lt;/exception-sorter-class-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>Sybase<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre><div class="para">
				<a id="idm139776758545520">
      ⁠</a><a xmlns:d="http://docbook.org/ns/docbook" href="#ftn.idm139776758545520" class="footnote"><sup class="footnote">[1]</sup></a>
			</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776697315808">
      ⁠</a>B.4.1. Sybase Limitations</h2></div></div></div><div class="para">
				Sybase has some configuration anomalies, which you should be aware of.
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">DDL statements in transactions</span></dt><dd><div class="para">
							Hibernate, which is an integral part of the Enterprise Platform, allows the SQL Dialect to decide whether or not the database supports DDL statements within a transaction. Sybase does not override this. the default is to query the JDBC metadata to see whether DDL is allowed within transactions. However, Sybase does not correct report whether it is set up to use this option.
						</div><div class="para">
							Sybase recommends against using DDL statements in transactions, because of locking issues. Review the Sybase documentation for how to enable or disable the <code class="varname">ddl in tran</code> option.
						</div></dd><dt><span class="term">Sybase does not throw an exception if a value overflows the constraints of the underlying column.</span></dt><dd><div class="para">
							Sybase ASE does not throw an exception when Parameterized Sql is in use. <code class="filename">jconn3.jar</code> uses Parameterized Sql for insertion by default, so no exception is thrown if a value overflows the constraints of the underlying column. Since no exception is thrown, Hibernate cannot tell that the insert failed. By using Dynamic Prepare instead of Parameterized SQL, ASE throws an exception. Hibernate can catch this exception and act accordingly.
						</div><div class="para">
							For that reason, set the <code class="varname">Dynamic prepare</code> parameter to <code class="literal">true</code> in Hibernate's configuration file.
						</div><pre class="screen">&lt;property name="connection.url"&gt;jdbc:sybase:Tds:aurum:1503/masterDb?DYNAMIC_PREPARE=true&lt;/property&gt;</pre><div class="para">
							<code class="filename">jconn4.jar</code> uses Dynamic Prepare by default.
						</div></dd><dt><span class="term">SchemaExport cannot create stored procedures in chained transaction mode</span></dt><dd><div class="para">
							On Sybase, SchemaExport cannot be used to create stored procedures while in while in chained transaction mode. The workaround for this case is to add the following code immediately after the definition of the new stored procedure:
						</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;database-object&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;create&gt;</span>
<span xmlns="" class="line">​</span>    sp_procxmode paramHandling, 'chained'
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/create&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;drop/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/database-object&gt;</span> 
</pre></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776738228288">
      ⁠</a>B.5. Microsoft SQL Server</h1></div></div></div><div class="para">
			To evaluate those drivers, you can use a simple JSP page to query the <code class="systemitem">pubs</code> database shipped with Microsoft SQL Server.
		</div><div class="para">
			Move the WAR archive located in <a href="files/mssql-test.zip">files/mssql-test.zip</a> to the <code class="filename">/deploy</code>, start the server, and navigate your web browser to <a href="http://localhost:8080/test/test.jsp">http://localhost:8080/test/test.jsp</a>.
		</div><div class="example"><a id="idm139776735821024">
      ⁠</a><p class="title"><strong>Example B.11. Local-TX Datasource Using DataDirect Driver</strong></p><div class="example-contents"><div class="para">
				This example uses the <span class="package">DataDirect Connect for JDBC</span> drivers from <a href="http://www.datadirect.com">http://www.datadirect.com</a>.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MerliaDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:datadirect:sqlserver://localhost:1433;DatabaseName=jboss<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.ddtek.jdbc.sqlserver.SQLServerDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776761787232">
      ⁠</a><p class="title"><strong>Example B.12. Local-TX Datasource Using Merlia Driver</strong></p><div class="example-contents"><div class="para">
				This example uses the <span class="package">Merlia JDBC Driver</span> drivers from <a href="http://www.inetsoftware.de">http://www.inetsoftware.de</a>.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MerliaDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:inetdae7:localhost:1433?database=pubs<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.inet.tds.TdsDataSource<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776753440880">
      ⁠</a><p class="title"><strong>Example B.13. XA Datasource Using Merlia Driver</strong></p><div class="example-contents"><div class="para">
				This example uses the <span class="package">Merlia JDBC Driver</span> drivers from <a href="http://www.inetsoftware.de">http://www.inetsoftware.de</a>.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MerliaXADS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;isSameRM-override-value&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/isSameRM-override-value&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>com.inet.tds.DTCDataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>localhost<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>pubs<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776753396512">
      ⁠</a>B.5.1. Microsoft JDBC Drivers</h2></div></div></div><div class="para">
				Microsoft SQL Server 2008 JDBC Driver can be used with SQL Server 2008 or 2008 R2 and is certified for JBoss Hibernate.
			</div><div class="para">
				Read the <code class="filename">release.txt</code> file included in the driver distribution for more information.
			</div><div class="example"><a id="idm139776749812960">
      ⁠</a><p class="title"><strong>Example B.14. Microsoft SQL Server 2008 Local-TX Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MSSQL2008DS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:sqlserver://localhost:1433;DatabaseName=pubs<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>jboss<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
</pre></div></div><div class="example"><a id="idm139776705196832">
      ⁠</a><p class="title"><strong>Example B.15. Microsoft SQL Server 2008 XA Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MSSQL2008XADS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;isSameRM-override-value&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/isSameRM-override-value&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerXADataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>localhost<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>pubs<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"SelectMethod"</span><span xmlns="" class="perl_Keyword">&gt;</span>cursor<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"User"</span><span xmlns="" class="perl_Keyword">&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Password"</span><span xmlns="" class="perl_Keyword">&gt;</span>jboss<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
<span xmlns="" class="line">​</span>
</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776749811168">
      ⁠</a>B.5.2. JSQL Drivers</h2></div></div></div><div class="example"><a id="idm139776739124384">
      ⁠</a><p class="title"><strong>Example B.16. JSQL Driver</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>JSQLDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:JSQLConnect://localhost:1433/databaseName=testdb<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.jnetdirect.jsql.JSQLDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776739121408">
      ⁠</a>B.5.3. jTDS JDBC Driver</h2></div></div></div><div class="para">
				jTDS is an open source 100% pure Java (type 4) JDBC 3.0 driver for Microsoft SQL Server (6.5, 7, 2000 and 2005) and Sybase (10, 11, 12, 15). jTDS is based on FreeTDS and is currently the fastest production-ready JDBC driver for microsoft SQL Server and Sybase. jTDS is 100% JDBC 3.0 compatible, supporting forward-only and scrollable/updatable ResultSets, concurrent (completely independent) Statements and implementing all the <code class="methodname">DatabaseMetaData</code> and <code class="methodname">ResultSetMetaData</code> methods.
			</div><div class="para">
				Download jTDS from <a href="http://jtds.sourceforge.net/">http://jtds.sourceforge.net/</a>.
			</div><div class="example"><a id="idm139776761532432">
      ⁠</a><p class="title"><strong>Example B.17. jTDS Local-TX Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>jtdsDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:jtds:sqlserver://localhost:1433;databaseName=pubs<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>net.sourceforge.jtds.jdbc.Driver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>jboss<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- optional parameters --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-isolation&gt;</span>TRANSACTION_READ_COMMITTED<span xmlns="" class="perl_Keyword">&lt;/transaction-isolation&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>10<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;max-pool-size&gt;</span>30<span xmlns="" class="perl_Keyword">&lt;/max-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;idle-timeout-minutes&gt;</span>15<span xmlns="" class="perl_Keyword">&lt;/idle-timeout-minutes&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;blocking-timeout-millis&gt;</span>5000<span xmlns="" class="perl_Keyword">&lt;/blocking-timeout-millis&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;new-connection-sql&gt;</span>select 1<span xmlns="" class="perl_Keyword">&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;check-valid-connection-sql&gt;</span>select 1<span xmlns="" class="perl_Keyword">&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;set-tx-query-timeout&gt;&lt;/set-tx-query-timeout&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div><div class="example"><a id="idm139776679180208">
      ⁠</a><p class="title"><strong>Example B.18. jTDS XA Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>jtdsXADS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>net.sourceforge.jtds.jdbcx.JtdsDataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>localhost<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>pubs<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"User"</span><span xmlns="" class="perl_Keyword">&gt;</span>sa<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Password"</span><span xmlns="" class="perl_Keyword">&gt;</span>jboss<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 When set to true, emulate XA distributed transaction support. Set to false to use experimental </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 true distributed transaction support. True distributed transaction support is only available for </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 SQL Server 2000 and requires the installation of an external stored procedure in the target server </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 (see the README.XA file in the distribution for details).</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"XaEmulation"</span><span xmlns="" class="perl_Keyword">&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- optional parameters --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;transaction-isolation&gt;</span>TRANSACTION_READ_COMMITTED<span xmlns="" class="perl_Keyword">&lt;/transaction-isolation&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;min-pool-size&gt;</span>10<span xmlns="" class="perl_Keyword">&lt;/min-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;max-pool-size&gt;</span>30<span xmlns="" class="perl_Keyword">&lt;/max-pool-size&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;idle-timeout-minutes&gt;</span>15<span xmlns="" class="perl_Keyword">&lt;/idle-timeout-minutes&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;blocking-timeout-millis&gt;</span>5000<span xmlns="" class="perl_Keyword">&lt;/blocking-timeout-millis&gt;</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;new-connection-sql&gt;</span>select 1<span xmlns="" class="perl_Keyword">&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;check-valid-connection-sql&gt;</span>select 1<span xmlns="" class="perl_Keyword">&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;set-tx-query-timeout&gt;&lt;/set-tx-query-timeout&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>MS SQLSERVER2000<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776679177904">
      ⁠</a>B.5.4. "Invalid object name 'JMS_SUBSCRIPTIONS' Exception</h2></div></div></div><div class="para">
				If you receive an exception like the one in <a class="xref" href="appendix-db-specific-datasources.html#jms_subscriptions_exception">Example B.19, “JMS_SUBSCRIPTIONS Exception”</a> during start up, specify a <code class="methodname">SelectMethod</code> in the connection URL, as shown in <a class="xref" href="appendix-db-specific-datasources.html#SelectMethod-specification">Example B.20, “Specifying a SelectMethod”</a>.
			</div><div class="example"><a id="jms_subscriptions_exception">
      ⁠</a><p class="title"><strong>Example B.19. JMS_SUBSCRIPTIONS Exception</strong></p><div class="example-contents"><pre class="screen">
          17:17:57,167 WARN  [ServiceController] Problem starting service jboss.mq.destination:name=testTopic,service=Topic
          org.jboss.mq.SpyJMSException: Error getting durable subscriptions for topic TOPIC.testTopic; - nested throwable: (java.sql.SQLException: [Microsoft][SQLServer 2000 Driver for JDBC][SQLServer]Invalid object name 'JMS_SUBSCRIPTIONS'.)
          at org.jboss.mq.sm.jdbc.JDBCStateManager.getDurableSubscriptionIdsForTopic(JDBCStateManager.java:290)
          at org.jboss.mq.server.JMSDestinationManager.addDestination(JMSDestinationManager.java:656)
</pre></div></div><div class="example"><a id="SelectMethod-specification">
      ⁠</a><p class="title"><strong>Example B.20. Specifying a SelectMethod</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:microsoft:sqlserver://localhost:1433;SelectMethod=cursor;DatabaseName=jboss<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span></pre></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776755585344">
      ⁠</a>B.6. MySQL Datasource</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776755584544">
      ⁠</a>B.6.1. Installing the Driver</h2></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139776755583744">
      ⁠</a><p class="title"><strong>Procedure B.1. Installing the Driver</strong></p><ol class="1"><li class="step"><div class="para">
						Download the driver from <a href="http://www.mysql.com/products/connector/j/">http://www.mysql.com/products/connector/j/</a>. Make sure to choose the driver based on your version of MySQL.
					</div></li><li class="step"><div class="para">
						Expand the driver ZIP or TAR file, and locate the <code class="filename">.jar</code> file.
					</div></li><li class="step"><div class="para">
						Move the <code class="filename">.jar</code> file into <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/lib</code>.
					</div></li><li class="step"><div class="para">
						Copy the <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>docs/examples/jca/mysql-ds.xml</code> example datasource deployer file to <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/</code>, for use as a template.
					</div></li></ol></div><div class="variablelist"><p class="title"><strong>MySQL limitations</strong></p><dl class="variablelist"><dt><span class="term">Millisecond and microsecond measurements</span></dt><dd><div class="para">
							MySQL does not currently support millisecond and microsecond measurements when returning database values such as <code class="literal">TIME</code> and <code class="literal">TIMESTAMP</code>. Tests which rely on these measurements will fail.
						</div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776687320304">
      ⁠</a>B.6.2. MySQL Local-TX Datasource</h2></div></div></div><div class="example"><a id="idm139776687319536">
      ⁠</a><p class="title"><strong>Example B.21. MySQL Local-TX Datasource</strong></p><div class="example-contents"><div class="para">
					This example uses a database hosted on <code class="systemitem">localhost</code>, on port 3306, with <code class="systemitem">autoReconnect</code> enabled. This is not a recommended configuration, unless you do not need any Transactions support.
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span> 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MySqlDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:mysql://localhost:3306/database<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.mysql.jdbc.Driver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>username<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>secret<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"autoReconnect"</span><span xmlns="" class="perl_Keyword">&gt;</span>true<span xmlns="" class="perl_Keyword">&lt;/connection-property&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Typemapping for JBoss 4.0 --&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>mySQL<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span> </pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776756266496">
      ⁠</a>B.6.3. MySQL Using a Named Pipe</h2></div></div></div><div class="example"><a id="idm139776756138528">
      ⁠</a><p class="title"><strong>Example B.22. MySQL Using a Named Pipe</strong></p><div class="example-contents"><div class="para">
					This example uses a database hosted locally, but uses a named pipe instead of TCP/IP.
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span> 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>MySQLDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:mysql://./database<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.mysql.jdbc.Driver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>username<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>secret<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"socketFactory"</span><span xmlns="" class="perl_Keyword">&gt;</span>com.mysql.jdbc.NamedPipeSocketFactory<span xmlns="" class="perl_Keyword">&lt;/connection-property&gt;</span> 
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>mySQL<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span> 
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span> 
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span> </pre></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776756134784">
      ⁠</a>B.7. PostgreSQL</h1></div></div></div><div class="example"><a id="idm139776733687552">
      ⁠</a><p class="title"><strong>Example B.23. PostgreSQL Local-TX Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>PostgresDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:postgresql://[servername]:[port]/[database name]<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>org.postgresql.Driver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;user-name&gt;</span>x<span xmlns="" class="perl_Keyword">&lt;/user-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;password&gt;</span>y<span xmlns="" class="perl_Keyword">&lt;/password&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call when connection is created</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- sql to call on an existing pooled connection when it is obtained from pool </span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">	 &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>PostgreSQL 8.0<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span>
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
				XA Transactions are denied if <em class="parameter"><code>max_prepared_transactions</code></em> uses the default value (0) in PostgreSQL v8.4 and v8.2.
			</div><div class="para">
				PostgreSQL user documentation recommends you set the <em class="parameter"><code>max_prepared_transactions</code></em> value to meet or exceed the value of <em class="parameter"><code>max_connections</code></em> so every session can have a prepared transaction pending.
			</div><div class="para">
				For more information, refer to the PostgreSQL v8.4 User Documentation, located at <a href="http://www.postgresql.org/docs/8.4/interactive/runtime-config-resource.html#GUC-MAX-PREPARED-TRANSACTIONS">http://www.postgresql.org/docs/8.4/interactive/runtime-config-resource.html#GUC-MAX-PREPARED-TRANSACTIONS</a>
			</div></div></div><div class="example"><a id="idm139776754427920">
      ⁠</a><p class="title"><strong>Example B.24. PostgreSQL XA Datasource</strong></p><div class="example-contents"><div class="para">
				This configuration works for PostgreSQL 8.x and later.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;xa-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>PostgresDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-class&gt;</span>org.postgresql.xa.PGXADataSource<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>[servername]<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"PortNumber"</span><span xmlns="" class="perl_Keyword">&gt;</span>5432<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>[database name]<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"User"</span><span xmlns="" class="perl_Keyword">&gt;</span>[username]<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;xa-datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Password"</span><span xmlns="" class="perl_Keyword">&gt;</span>[password]<span xmlns="" class="perl_Keyword">&lt;/xa-datasource-property&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;track-connection-by-tx&gt;&lt;/track-connection-by-tx&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/xa-datasource&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139776734910448">
      ⁠</a>B.8. Ingres</h1></div></div></div><div class="example"><a id="idm139776734909648">
      ⁠</a><p class="title"><strong>Example B.25. Ingres Datasource</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;datasources&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;jndi-name&gt;</span>IngresDS<span xmlns="" class="perl_Keyword">&lt;/jndi-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;use-java-context&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/use-java-context&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;driver-class&gt;</span>com.ingres.jdbc.IngresDriver<span xmlns="" class="perl_Keyword">&lt;/driver-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;connection-url&gt;</span>jdbc:ingres://localhost:II7/testdb<span xmlns="" class="perl_Keyword">&lt;/connection-url&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource-class&gt;</span>com.ingres.jdbc.IngresDataSource<span xmlns="" class="perl_Keyword">&lt;/datasource-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ServerName"</span><span xmlns="" class="perl_Keyword">&gt;</span>localhost<span xmlns="" class="perl_Keyword">&lt;/datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"PortName"</span><span xmlns="" class="perl_Keyword">&gt;</span>II7<span xmlns="" class="perl_Keyword">&lt;/datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DatabaseName"</span><span xmlns="" class="perl_Keyword">&gt;</span>testdb<span xmlns="" class="perl_Keyword">&lt;/datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"User"</span><span xmlns="" class="perl_Keyword">&gt;</span>testuser<span xmlns="" class="perl_Keyword">&lt;/datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;datasource-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Password"</span><span xmlns="" class="perl_Keyword">&gt;</span>testpassword<span xmlns="" class="perl_Keyword">&lt;/datasource-property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;new-connection-sql&gt;</span>select count(*) from iitables<span xmlns="" class="perl_Keyword">&lt;/new-connection-sql&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;check-valid-connection-sql&gt;</span>select count(*) from iitables<span xmlns="" class="perl_Keyword">&lt;/check-valid-connection-sql&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;metadata&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;type-mapping&gt;</span>Ingres<span xmlns="" class="perl_Keyword">&lt;/type-mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/metadata&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/local-tx-datasource&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/datasources&gt;</span></pre><div class="para">
				<a id="idm139776685220816">
      ⁠</a><a xmlns:d="http://docbook.org/ns/docbook" href="#ftn.idm139776685220816" class="footnote"><sup class="footnote">[2]</sup></a>
			</div></div></div></div><div class="footnotes"><br/><hr/><div id="ftn.idm139776758545520" class="footnote"><div class="para"><a href="#idm139776758545520" class="para"><sup class="para">[1] </sup></a>
					Source: <em class="citetitle"><a href="http://community.jboss.org/wiki/SetUpASybaseDatasource">http://community.jboss.org/wiki/SetUpASybaseDatasource</a></em>
				</div></div><div id="ftn.idm139776685220816" class="footnote"><div class="para"><a href="#idm139776685220816" class="para"><sup class="para">[2] </sup></a>
					Source: <em class="citetitle"><a href="http://community.ingres.com">http://community.ingres.com</a></em>
				</div></div></div></div></body></html>