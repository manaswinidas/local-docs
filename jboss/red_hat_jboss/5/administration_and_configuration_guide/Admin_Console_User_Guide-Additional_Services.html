<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 11. Additional Services</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Admin_Console_User_Guide-Additional_Services">
      ⁠</a>Chapter 11. Additional Services</h1></div></div></div><div class="para">
		This chapter discusses useful MBean services that are not discussed elsewhere either because they are utility services not necessary for running JBoss, or they don't fit into a current section of the book.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Admin_Console_User_Guide-Additional_Services-Exposing_MBean_Events_via_SNMP">
      ⁠</a>11.1. Exposing MBean Events via SNMP</h1></div></div></div><div class="para">
			JBoss has an SNMP adaptor service that can be used to intercept JMX notifications emitted by MBeans, convert them to traps and send them to SNMP managers. In this respect the snmp-adaptor acts as a SNMP agent. Future versions may offer support for full agent get/set functionality that maps onto MBean attributes or operations.
		</div><div class="para">
			This service can be used to integrate JBoss with higher order system or network management platforms (HP OpenView, for example), making the MBeans visible to those systems. The MBean developer can instrument the MBeans by producing notifications for any significant event (server coldstart, for example), and the adaptor can then be configured to intercept the notification and map it onto an SNMP traps. The adaptor uses the JoeSNMP package from OpenNMS as the SNMP engine.
		</div><div class="para">
			The SNMP service is configured in <code class="filename">snmp-adaptor.sar</code>. This service is only available in the <code class="literal">all</code> configuration, so you will need to copy the <code class="filename">.sar</code> file to your configuration if you want to use the service from another profile.
		</div><div class="para">
			Inside the <code class="filename">snmp-adaptor.sar</code> directory, there are two configuration files that control the SNMP service.
		</div><div class="variablelist"><p class="title"><strong/></p><dl class="variablelist"><dt><span class="term">managers.xml</span></dt><dd><div class="para">
						This file configures where to send traps. The content model for this file is shown in <a class="xref" href="Admin_Console_User_Guide-Additional_Services.html#Admin_Console_User_Guide-Exposing_MBean_Events_via_SNMP-The_schema_for_the_SNMP_managers_file">Figure 11.1, “The schema for the SNMP managers file”</a>.
					</div></dd><dt><span class="term">notifications.xml</span></dt><dd><div class="para">
						This file specifies the exact mapping of each notification type to a corresponding SNMP trap. The content model for this file is shown in <a class="xref" href="Admin_Console_User_Guide-Additional_Services.html#Admin_Console_User_Guide-Exposing_MBean_Events_via_SNMP-The_schema_for_the_notification_to_trap_mapping_file">Figure 11.2, “The schema for the notification to trap mapping file”</a>.
					</div></dd></dl></div><div class="para">
			The <code class="literal">SNMPAgentService</code> MBean is configured in <code class="filename">snmp-adaptor.sar/META-INF/jboss-service.xml</code>.
		</div><div class="para">
			The configurable parameters are:
		</div><div class="table"><a id="idm139776751626992">
      ⁠</a><p class="title"><strong>Table 11.1. </strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary=""><colgroup><col/><col/></colgroup><thead><tr><th> Parameter </th><th> Description </th></tr></thead><tbody><tr><td> HeartBeatPeriod </td><td> The period in seconds at which heartbeat notifications are generated. </td></tr><tr><td> ManagersResName </td><td> Specifies the resource name of the <code class="literal">managers.xml</code> file. </td></tr><tr><td> NotificationMapResName </td><td> Specifies the resource name of the <code class="literal">notifications.xml</code> file. </td></tr><tr><td> TrapFactoryClassName </td><td> The <code class="literal">org.jboss.jmx.adaptor.snmp.agent.TrapFactory</code> implementation class that takes care of translation of JMX Notifications into SNMP V1 and V2 traps. </td></tr><tr><td> TimerName </td><td> Specifies the JMX ObjectName of the JMX timer service to use for heartbeat notifications. </td></tr><tr><td> SubscriptionList </td><td> Specifies which MBeans and notifications to listen for. </td></tr></tbody></table></div></div><div class="figure"><a id="Admin_Console_User_Guide-Exposing_MBean_Events_via_SNMP-The_schema_for_the_SNMP_managers_file">
      ⁠</a><div class="figure-contents"><div class="mediaobject" style="text-align: center"><img src="images/snmp-manager-list.png" align="middle" alt="The schema for the SNMP managers file" style="text-align: middle"/></div></div><p class="title"><strong>Figure 11.1. The schema for the SNMP managers file</strong></p></div><div class="figure"><a id="Admin_Console_User_Guide-Exposing_MBean_Events_via_SNMP-The_schema_for_the_notification_to_trap_mapping_file">
      ⁠</a><div class="figure-contents"><div class="mediaobject" style="text-align: center"><img src="images/snmp-notification-map-list.png" align="middle" alt="The schema for the notification to trap mapping file" style="text-align: middle"/></div></div><p class="title"><strong>Figure 11.2. The schema for the notification to trap mapping file</strong></p></div><div class="para">
			<code class="literal">TrapdService</code> is a simple MBean that acts as an SNMP Manager. It listens to a configurable port for incoming traps and logs them as DEBUG messages using the system logger. You can modify the log4j configuration to redirect the log output to a file. <code class="literal">SnmpAgentService</code> and <code class="literal">TrapdService</code> are not dependent on each other.
		</div></div></div></body></html>