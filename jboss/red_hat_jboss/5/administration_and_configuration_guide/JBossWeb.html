<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. JBoss Web</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="JBossWeb">
      ⁠</a>Chapter 4. JBoss Web</h1></div></div></div><div class="para">
		The most common technologies for creating Java web applications are JSPs and servlets, the standard Java EE web component technologies. To allow deployment of JSPs and servlets, JBoss comes with the JBoss Web container. JBoss Web represents the web tier of JBoss Enterprise Application Platform, and provides the servlet container and HTTP web server based on Apache Tomcat for the deployment of JSPs and servlets.
	</div><div class="para">
		JBoss Web supports the Apache Portable Runtime (APR) library, which allows use of native connectors such as mod_jk, mod_cluster, and mod_proxy.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="JBossWeb-SystemProperties">
      ⁠</a>4.1. System Properties</h1></div></div></div><div class="para">
			The following system properties modify the JBoss Web server behavior:
		</div><div class="variablelist"><p class="title"><strong>General Properties</strong></p><dl class="variablelist"><dt><span class="term"><code class="code">catalina.useNaming</code></span></dt><dd><div class="para">
						override for the <span class="property">useNaming</span> element of the <span class="property">Context</span> element
					</div><div class="para">
						Set to <code class="code">false</code> to override the <code class="code">useNaming</code> attribute of all <span class="property">Context</span> elements.
					</div></dd><dt><span class="term"><code class="code">catalina.config</code></span></dt><dd><div class="para">
						URL of the <code class="filename">catalina.properties</code> configuration file
					</div></dd><dt><span class="term"><code class="code">jvmRoute</code></span></dt><dd><div class="para">
						used if an <code class="sgmltag-element">Engine</code> element does not define its <code class="sgmltag-element">jvmRoute</code> attribute
					</div></dd><dt><span class="term"><code class="code">org.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES</code></span></dt><dd><div class="para">
						activation or deactivation of clearing static or final fields from loaded classes (set to <code class="literal">true</code> by default)
					</div><div class="para">
						Set to <code class="literal">true</code> to null out static or final fields from the loaded classes when a web application is stopped. This setting provides a workaround for garbage collection bugs and application coding errors.
					</div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.buf.StringCache.byte.enabled</code></span></dt><dd><div class="para">
						enabling the String cache for ByteChunk (set to <code class="literal">false</code> by default)
					</div><div class="para">
						Set to <code class="literal">true</code> to enable the String cache for <code class="code">ByteChunk</code>.
					</div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.buf.StringCache.char.enabled</code></span></dt><dd><div class="para">
						enabling the String cache for <code class="code">CharChunk</code> (set to <code class="literal">false</code> by default)
					</div><div class="para">
						Set to <code class="literal">true</code> to enable the String cache for <code class="code">CharChunk</code>.
					</div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.buf.StringCache.trainThreshold</code></span></dt><dd><div class="para">
						call limit for the String cache activation (set to <code class="literal">2000</code> by default)
					</div><div class="para">
						The limit defines the number of times the <code class="code">toString()</code> method must be called before the String cache is activated.
					</div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.buf.StringCache.cacheSize</code></span></dt><dd><div class="para">
						size of the String cache (set to <code class="literal">200</code> entries by default)
					</div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.buf.StringCache.maxStringSize</code></span></dt><dd><div class="para">
						maximum length of a cached String (set to <code class="literal">128</code> characters by default)
					</div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.http.FastHttpDateFormat.CACHE_SIZE</code></span></dt><dd><div class="para">
						size of the cache used for parsing and formatting of date values (<code class="literal">2000</code> entries by default)
					</div></dd><dt><span class="term"><code class="code">org.apache.catalina.core.StandardService.DELAY_CONNECTOR_STARTUP</code></span></dt><dd><div class="para">
						disabling automatic connector start-up (To prevent the connector from starting up automatically, set to <code class="literal">true</code>.)
					</div></dd><dt><span class="term"><code class="code">org.apache.catalina.connector.Request.SESSION_ID_CHECK</code></span></dt><dd><div class="para">
						enabling session verification (If enabled, that is set to <code class="literal">true</code>, the Servlet container verifies if a session with the specified session ID exists in a context before creating a session with that ID.)
					</div></dd><dt><span class="term"><code class="code">org.apache.coyote.USE_CUSTOM_STATUS_MSG_IN_HEADER</code></span></dt><dd><div class="para">
						enabling custom HTTP status messages in HTTP headers (If enabled, that is set to <code class="code">true</code>, custom HTTP status messages are allowed in HTTP headers.)
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
							Ensure that any such message uses only the ISO-8859-1 characters to prevent a possible XSS vulnerability. The property is set to <code class="code">false</code> by default.
						</div></div></div></dd><dt><span class="term"><code class="code">org.apache.tomcat.util.http.ServerCookie.VERSION_SWITCH</code></span></dt><dd><div class="para">
						activates automatic usage of v1 cookies (set to <code class="literal">true</code> by default)
					</div><div class="para">
						The v1 cookies are used automatically if the servlet container is using v0 cookies and cookie values which have to be quoted to be valid.
					</div></dd><dt><span class="term"><code class="code">org.apache.el.parser.COERCE_TO_ZERO</code></span></dt><dd><div class="para">
						sets if "" and null numbers become 0
					</div><div class="para">
						This is the desired behavior defined in the specification and therefore the property is set to <code class="literal">true</code> by default.
					</div></dd></dl></div><div class="variablelist"><p class="title"><strong>JSP Configuration Properties</strong></p><dl class="variablelist"><dt><span class="term">org.apache.jasper.compiler.Generator.VAR_EXPRESSIONFACTORY</span></dt><dd><div class="para">
						the variable used as the expression language expression factory (if unspecified the <code class="code">_el_expressionfactory</code> is used)
					</div></dd><dt><span class="term">org.apache.jasper.compiler.Generator.VAR_INSTANCEMANAGER</span></dt><dd><div class="para">
						The name of the variable to use for the instance manager factory. If not specified, the default value of _jsp_instancemanager will be used.
					</div></dd><dt><span class="term">org.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING </span></dt><dd><div class="para">
						If false the requirements for escaping quotes in JSP attributes will be relaxed so that a missing required quote will not cause an error. If not specified, the specification compliant default of true will be used.
					</div></dd><dt><span class="term">org.apache.jasper.runtime.JspFactoryImpl.USE_POOL </span></dt><dd><div class="para">
						If true, a ThreadLocal PageContext pool will be used. If not specified, the default value of true will be used.
					</div></dd><dt><span class="term">org.apache.jasper.runtime.JspFactoryImpl.POOL_SIZE </span></dt><dd><div class="para">
						The size of the ThreadLocal PageContext. If not specified, the default value of 8 will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.JSP_SERVLET_BASE </span></dt><dd><div class="para">
						The base class of the Servlets generated from the JSPs. If not specified, the default value of org.apache.jasper.runtime.HttpJspBase will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.SERVICE_METHOD_NAME </span></dt><dd><div class="para">
						The name of the service method called by the base class. If not specified, the default value of _jspService will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.SERVLET_CLASSPATH </span></dt><dd><div class="para">
						The name of the ServletContext attribute that provides the classpath for the JSP. If not specified, the default value of org.apache.catalina.jsp_classpath will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.JSP_FILE </span></dt><dd><div class="para">
						The name of the request attribute for &lt;jsp-file&gt; element of a servlet definition. If present on a request, this overrides the value returned by request.getServletPath() to select the JSP page to be executed. If not specified, the default value of org.apache.catalina.jsp_file will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.PRECOMPILE </span></dt><dd><div class="para">
						The name of the query parameter that causes the JSP engine to just pre-generate the servlet but not invoke it. If not specified, the default value of org.apache.catalina.jsp_precompile will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.JSP_PACKAGE_NAME </span></dt><dd><div class="para">
						The default package name for compiled jsp pages. If not specified, the default value of org.apache.jsp will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.TAG_FILE_PACKAGE_NAME </span></dt><dd><div class="para">
						The default package name for tag handlers generated from tag files. If not specified, the default value of org.apache.jsp.tag will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.ALT_DD_ATTR </span></dt><dd><div class="para">
						The servlet context attribute under which the alternate deployment descriptor for this web application is stored. If not specified, the default value of org.apache.catalina.deploy.alt_dd will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.TEMP_VARIABLE_NAME_PREFIX </span></dt><dd><div class="para">
						Prefix to use for generated temporary variable names. If not specified, the default value of _jspx_temp will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.USE_INSTANCE_MANAGER_FOR_TAGS </span></dt><dd><div class="para">
						If true, the instance manager is used to obtain tag handler instances. If not specified, false will be used.
					</div></dd><dt><span class="term">org.apache.jasper.Constants.USE_INSTANCE_MANAGER_FOR_TAGS </span></dt><dd><div class="para">
						If true, annotations specified in tags will be processed and injected. This can have a performance impact when using simple tags, or if tag pooling is disabled. If not specified, true will be used.
					</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Security Configuration Properties</strong></p><dl class="variablelist"><dt><span class="term">org.apache.catalina.connector.RECYCLE_FACADES </span></dt><dd><div class="para">
						If this is true or if a security manager is in use a new facade object will be created for each request. If not specified, the default value of false will be used.
					</div></dd><dt><span class="term">org.apache.catalina.connector.CoyoteAdapter.ALLOW_BACKSLASH </span></dt><dd><div class="para">
						If this is true the '\' character will be permitted as a path delimiter. If not specified, the default value of false will be used.
					</div></dd><dt><span class="term">org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH </span></dt><dd><div class="para">
						If this is true '%2F' and '%5C' will be permitted as path delimiters. If not specified, the default value of false will be used.
					</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Properties Required by Specification</strong></p><dl class="variablelist"><dt><span class="term">org.apache.catalina.STRICT_SERVLET_COMPLIANCE </span></dt><dd><div class="para">
						If set to <code class="literal">true</code>, then the following applies: 
						<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
									any wrapped request or response object passed to an application dispatcher is checked to ensure that it has wrapped the original request or response. (SRV.8.2 / SRV.14.2.5.1)
								</div></li><li class="listitem"><div class="para">
									a call to Response.getWriter() if no character encoding has been specified will result in subsequent calls to Response.getCharacterEncoding() returning ISO-8859-1 and the Content-Type response header will include a charset=ISO-8859-1 component. (SRV.15.2.22.1)
								</div></li><li class="listitem"><div class="para">
									every request that is associated with a session will cause the session's last accessed time to be updated regardless of whether or not the request explicitly accesses the session. (SRV.7.6)
								</div></li></ul></div>

					</div></dd><dt><span class="term">org.apache.catalina.core.StandardWrapperValve.SERVLET_STATS </span></dt><dd><div class="para">
						If true or if org.apache.catalina.STRICT_SERVLET_COMPLIANCE is true, the wrapper will collect the JSR-77 statistics for individual servlets. If not specified, the default value of false will be used.
					</div></dd><dt><span class="term">org.apache.catalina.session.StandardSession.ACTIVITY_CHECK </span></dt><dd><div class="para">
						If this is true or if org.apache.catalina.STRICT_SERVLET_COMPLIANCE is true Tomcat will track the number of active requests for each session. When determining if a session is valid, any session with at least one active request will always be considered valid. If not specified, the default value of false will be used.
					</div></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139776696902384">
      ⁠</a>4.1.1. Modifying System Properties</h2></div></div></div><div class="para">
				You can modify the system properties either in the <code class="filename"><em class="replaceable">JBOSS_HOME</em>/bin/run.conf</code> or in the form of a <code class="option">-D</code> option on server start-up (refer to the Getting Started Guide).
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="JBossWeb-ConfigurationFiles">
      ⁠</a>4.2. Configuring the JBoss Web Container</h1></div></div></div><div class="para">
			The JBoss Web container configuration defines how the container handles the execution and deployment of web application. The configuration is loaded and applied on the server startup: therefore, changes made to the configuration are not applied to the running server.
		</div><div class="para">
			The JBoss Web behavior can be configured using Tag Library Descriptor (<acronym class="acronym">TLD</acronym>) configuration files:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">server.xml</code></span></dt><dd><div class="para">
						The <code class="filename">server.xml</code> is the main JBoss Web server configuration file (for further details refer to <a class="xref" href="JBossWeb.html#JBossWeb-MainConfigFile">Section 4.3, “The Main Config File”</a>)
					</div></dd><dt><span class="term"><code class="filename">web.xml</code></span></dt><dd><div class="para">
						The <code class="filename">web.xml</code> file is a deployment descriptor defining URL mappings to servlets (defines how web applications are executed)
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Global vs Local Config Files</strong></p></div><div class="admonition"><div class="para">
							There are two types of <code class="filename">web.xml</code>: the global <code class="filename">web.xml</code> valid for the entire server and the local <code class="filename">web.xml</code> valid for a web application. The local file overrides the global <code class="filename">server.xml</code> file for the given web application.
						</div><div class="para">
							The global <code class="filename">web.xml</code> file is located in <code class="filename"><code class="varname">$JBOSS_SERVER_HOME</code>/deployers/jbossweb.deployer/</code> directory, while the web-application specific file is located in the <code class="filename">WEB-INF/</code> directory of the web application. 
						</div></div></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="JBossWeb-MainConfigFile">
      ⁠</a>4.3. The Main Config File</h1></div></div></div><div class="para">
			The main JBoss Web server configuration file is the TLD <code class="filename">server.xml</code> file located in the <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/<em class="replaceable">PROFILE</em>/deploy/jbossweb.sar/</code> directory. The file defines the JBoss Web server configuration with a set of XML configuration elements and their attributes.
		</div><div class="para">
			The elements must follow the nesting depicted in <a class="xref" href="JBossWeb.html#server.xml-schema">Figure 4.1, “The server.xml file schema”</a>.
		</div><div class="figure"><a id="server.xml-schema">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/server-file-schema.png" alt="The server.xml file schema"/></div></div><p class="title"><strong>Figure 4.1. The server.xml file schema</strong></p></div><div class="para">
			The elements can be divided in the following categories:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					top-level elements: contain any other elements (<code class="code">&lt;Server&gt;</code> and <code class="code">&lt;Service&gt;</code>);
				</div></li><li class="listitem"><div class="para">
					connectors: represent interface between clients and the service that receives the clients' requests;
				</div></li><li class="listitem"><div class="para">
					containers: represent components, which process incoming requests (<code class="code">&lt;Engine&gt;</code>, <code class="code">&lt;Host&gt;</code>, and <code class="code">&lt;Context&gt;</code>);
				</div></li><li class="listitem"><div class="para">
					nested components: represent entities that provide further functionalities to their parent elements or intercept the request processing;
				</div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Top-Level_Elements">
      ⁠</a>4.4. Top-Level Elements</h1></div></div></div><div class="para">
			The TLD <code class="filename">server.xml</code> file contains the <code class="code">&lt;Server&gt;</code> top-element, which contains the <code class="code">&lt;Service&gt;</code> elements. Any other elements are nested in these two elements.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Server_Element">
      ⁠</a>4.4.1. Server</h2></div></div></div><div class="para">
				The <code class="sgmltag-element">Server</code> is a container element that represents the entire servlet container and is the only parent of any other element, that is, it is the only top-level element.
			</div><div class="para">
				It can contain multiple <code class="sgmltag-element">Service</code>, <code class="sgmltag-element">GlobalNamingResources</code> and <code class="sgmltag-element">Listener</code> elements.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Listener elements</strong></p></div><div class="admonition"><div class="para">
					The <code class="sgmltag-element">Server</code> element in the JBoss Web's <code class="filename">server.xml</code> file contains multiple <code class="sgmltag-element">Listener</code> elements. Amongst others, the <code class="classname">org.apache.catalina.core.AprLifecycleListener</code> and the <code class="classname">org.apache.catalina.core.JasperListener</code>. If the <span class="application"><strong>mod_ cluster</strong></span> load balancer is enabled for the profile, also the <code class="classname">org.jboss.web.tomcat.service.deployers.MicrocontainerIntegrationLifecycleListener</code> is required.
				</div><div class="para">
					The <code class="classname">AprLifecycleListener</code> and the <code class="classname">JasperListener</code> are used to start up and shut down APR and initialize Jasper. Removing the Listener elements is therefore discouraged just as removing the <code class="classname">MicrocontainerIntegrationLifecycleListener</code>.
				</div></div></div><div class="table"><a id="table-Server_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.1. Server Element Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Server Element Attributes"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> className </td><td style="text-align: left"> <div class="para">
								class implementing the Server
							</div>
							 <div class="para">
								The defined class must implement the <span class="interface">org.apache.catalina.Server</span> interface. If no class is specified, the standard implementation is used, that is, <code class="classname">org.apache.catalina.core.StandardServer</code>.
							</div>
							 </td></tr><tr><td style="text-align: left"> port </td><td style="text-align: left"> <div class="para">
								TCP/IP port number on which the server expects the shutdown command
							</div>
							 <div class="para">
								<span class="bold bold"><strong>The connection must be initiated from the server computer that runs the JBoss Web server instance.</strong></span>
							</div>
							 </td></tr><tr><td style="text-align: left"> shutdown </td><td style="text-align: left"> <div class="para">
								string that the server must receive on the port specified in the <span class="property">port</span> property to shutdown
							</div>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Service">
      ⁠</a>4.4.2. Service</h2></div></div></div><div class="para">
				The <code class="code">Service</code> element serves as a container for Connectors that share a single <code class="code">Engine</code> component. There can be multiple <code class="code">Service</code> components in one <code class="code">Server</code> element and the <code class="code">Service</code> component can contain multiple <code class="code">Connector</code> elements followed by exactly one <code class="code">Engine</code> element.
			</div><div class="table"><a id="table-Service_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.2. Service Element Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Service Element Attributes"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> className </td><td style="text-align: left"> <div class="para">
								class implementing the Service
							</div>
							 <div class="para">
								The class must implement the <span class="interface">org.apache.catalina.Service</span> interface. If no className is specified, the standard <code class="classname">org.apache.catalina.core.StandardService</code> implementation is used.
							</div>
							 </td></tr><tr><td style="text-align: left"> name </td><td style="text-align: left"> Service name unique within the <code class="code">Server</code> element (the name is used for log purposes) </td></tr></tbody></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="server.xml-Connector">
      ⁠</a>4.5. Connector</h1></div></div></div><div class="para">
			The <code class="code">Connector</code> element represents an interface between clients and the Service; the element defines how client requests are transported.
		</div><div class="para">
			There are multiple optional connectors available with JBoss Web: JK2 (mod_jk), mod_cluster. By default, the connector for HTTP and for AJP are defined.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Further details about configuration of individual connectors are available in the HTTP Connectors Load Balancing Guide on the <a href="http://docs.redhat.com/docs/">Red Hat Documentation website</a>.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Executor">
      ⁠</a>4.5.1. Executor</h2></div></div></div><div class="para">
				The <code class="code">Executor</code> represents a thread pool that can be shared among components (primarily among connectors).
			</div><div class="para">
				Every Executor must implement the <code class="classname">org.apache.catalina.Executor</code> interface.
			</div><div class="table"><a id="table-Executor_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.3. Element Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Element Attributes"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> className </td><td style="text-align: left"> <div class="para">
								class implementing the Executor
							</div>
							 <div class="para">
								The class must implement the <span class="interface">org.apache.catalina.Executor</span> interface. If no className is specified, the standard <code class="classname">org.apache.catalina.core.StandardThreadExecutor</code> implementation is used.
							</div>
							 </td></tr><tr><td style="text-align: left"> name </td><td style="text-align: left"> <div class="para">
								Executor name (the name must be unique within the <code class="code">Server</code> element)
							</div>
							 </td></tr></tbody></table></div></div><div class="table"><a id="table-Standard_Executor_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.4. Additional Element Attributes of the Standard Executor Implementation (org.apache.catalina.core.StandardThreadExecutor)</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Additional Element Attributes of the Standard Executor Implementation (org.apache.catalina.core.StandardThreadExecutor)"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> threadPriority </td><td style="text-align: left"> thread priority for threads in the executor (<code class="literal">Thread.NORM_PRIORITY</code> by default) </td></tr><tr><td style="text-align: left"> daemon </td><td style="text-align: left"> enabling/disabling daemon threads (<code class="literal">true</code> by default) </td></tr><tr><td style="text-align: left"> namePrefix </td><td style="text-align: left"> name prefix for each thread created by the executor (the thread name takes the form namePrefix+threadNumber) </td></tr><tr><td style="text-align: left"> maxThreads </td><td style="text-align: left"> maximum number of active threads in the thread pool (<code class="literal">200</code> by default) </td></tr><tr><td style="text-align: left"> minSpareThreads </td><td style="text-align: left"> minimum number of threads kept alive (<code class="literal">25</code> by default) </td></tr><tr><td style="text-align: left"> maxIdleTime </td><td style="text-align: left"> <div class="para">
								number of milliseconds before the idle thread is shut down (applied only if the number of active threads is higher that the minSpareThreads value; <code class="literal">60.000</code> by default)
							</div>
							 </td></tr></tbody></table></div></div><div class="task"><a id="Executor_for_Multiple_Components">
      ⁠</a><p class="title"><strong>Defining Executor for Multiple Components</strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><div class="important"><div class="admonition_header"><p><strong>Executor in server.xml Not Supported</strong></p></div><div class="admonition"><div class="para">
						Previously, it was possible to define the Executor for a single Connector in the <code class="filename">server.xml</code> file. Such Executor definitions are now ignored.
					</div></div></div><div class="para">
					To define an Executor, do the following:
				</div><ol class="1"><li class="step"><div class="para">
						Open the <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/<em class="replaceable">PROFILE</em>/deploy/jbossweb.sar/META-INF/jboss-beans.xml</code> file.
					</div></li><li class="step"><div class="para">
						Add the <code class="classname">Executor</code> bean definition to the file (see <a class="xref" href="JBossWeb.html#Executor_Bean">Example 4.1, “Executor bean definition”</a>).
					</div><div class="example"><a id="Executor_Bean">
      ⁠</a><p class="title"><strong>Example 4.1. Executor bean definition</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Executor"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">class=</span><span xmlns="" class="perl_String">"org.apache.catalina.core.StandardThreadExecutor"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"maxThreads"</span><span xmlns="" class="perl_Keyword">&gt;</span>300<span xmlns="" class="perl_Keyword">&lt;/property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"minSpareThreads"</span><span xmlns="" class="perl_Keyword">&gt;</span>25<span xmlns="" class="perl_Keyword">&lt;/property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span></pre></div></div></li><li class="step"><div class="para">
						Set the <span class="emphasis"><em><span class="property">executor</span></em></span> property for the <code class="classname">TomcatService</code> bean.
					</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"WebServer"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">class=</span><span xmlns="" class="perl_String">"org.jboss.web.tomcat.service.deployers.TomcatService"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;annotation&gt;</span>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="jboss.web:service=WebServer", exposedInterface=org.jboss.web.tomcat.service.deployers.TomcatServiceMBean.class,registerDirectly=true)<span xmlns="" class="perl_Keyword">&lt;/annotation&gt;</span>
<span xmlns="" class="line">​</span>⋮
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">&lt;!--This is the executor property you need to add.--&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"executor"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"Executor"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span></pre></li></ol></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Containers">
      ⁠</a>4.6. Containers</h1></div></div></div><div class="para">
			Containers represent components, which process incoming requests (<code class="code">&lt;Engine&gt;</code>, <code class="code">&lt;Host&gt;</code>, and <code class="code">&lt;Context&gt;</code>).
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Engine">
      ⁠</a>4.6.1. Engine</h2></div></div></div><div class="para">
				The Engine represents the entity that processes the requests received by the parent Service; that is, the engine accepts requests from all Connectors defined for the Service, processes them, and returns them to the appropriate Connector.
			</div><div class="para">
				To define the virtual host of the server that the engine can use, nest multiple <code class="code">Host</code> elements inside the Engine element; each <code class="code">Host</code> element represents one virtual host. You need to define at least one <code class="code">Host</code> element and one of the Hosts <span class="emphasis"><em>must</em></span> have a name that matches the <span class="property">defaultHost</span> value defined in the parent Engine element.
			</div><div class="para">
				The <code class="code">Engine</code> element can contain at most one <code class="code">Realm</code> element. The <code class="code">Realm</code> element represents a database of users and their roles: the user information defined in the respective resource is shared across all Hosts and Contexts nested inside the Engine. Realm setting in the Engine element can be overridden by another <code class="code">Realm</code> element defined in a lower-level element; that is, a Host or Context element.
			</div><div class="table"><a id="table-Engine_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.5. Engine Element Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Engine Element Attributes"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <span class="property">backgroundProcessorDelay</span> </td><td style="text-align: left"> <div class="para">
								delay between the invocation of the <code class="function">backgroundProcess</code> method on the engine and the invocation of the <code class="function">backgroundProcess</code> method on the child containers of the Engine (Engine's Hosts and Contexts; <code class="literal">10</code> by default, that is 10 seconds)
							</div>
							 <div class="para">
								If set to a positive value, the engine produces a thread. The thread waits for the specified amount of time and then invokes the <code class="function">backgroundProcess</code> method on the engine and all its child containers.
							</div>
							 <div class="para">
								Host and Context containers can also define the <span class="property">backgroundProcessorDelay</span> attribute. If the delay of a child container is not negative, the child container is using its own processing thread.
							</div>
							 </td></tr><tr><td style="text-align: left"> className </td><td style="text-align: left"> <div class="para">
								class implementing the Engine
							</div>
							 <div class="para">
								The class must implement the <span class="interface">org.apache.catalina.Engine</span> interface. If not specified, the standard value <code class="classname">org.apache.catalina.core.StandardEngine</code> is used.
							</div>
							 </td></tr><tr><td style="text-align: left"> defaultHost </td><td style="text-align: left"> <div class="para">
								name of the default host name
							</div>
							 <div class="para">
								The default Host processes requests directed to host names on the server that are not configured in the <code class="filename">server.xml</code> configuration file. The <span class="property">defaultHost</span> must match the <span class="property">name</span> attribute of a Host element nested immediately inside the Engine element.
							</div>
							 </td></tr><tr><td style="text-align: left"> jvmRoute </td><td style="text-align: left"> <div class="para">
								identifier used in load balancing scenarios to enable session affinity (so-called "sticky sessions")
							</div>
							 <div class="para">
								The identifier must be unique across all JBoss Web servers which participate in the cluster. It is appended to the generated session identifier so that a front-end proxy can always forward a particular session to the same JBoss Web instance.
							</div>
							 </td></tr><tr><td style="text-align: left"> name </td><td style="text-align: left"> <div class="para">
								logical name of the Engine used in log and error messages
							</div>
							 <div class="para">
								When using multiple Service elements in the same Server, each Engine <span class="emphasis"><em>must</em></span> be assigned a unique name.
							</div>
							 </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Define Engine after Connectors</strong></p></div><div class="admonition"><div class="para">
					Make sure the Engine element is located <span class="emphasis"><em>after</em></span> all its connectors as connectors defined after the <code class="sgmltag-element">Engine</code> element are ignored.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Host">
      ⁠</a>4.6.2. Host</h2></div></div></div><div class="para">
				The <code class="sgmltag-element">Host</code> element represents a virtual host on the Engine. It allows you to associate a network name with the server, that is, to change the domains or the hostname of the Server.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The network name needs to be registered in the Domain Name Service (DNS) server that manages your Internet domain (contact your Network Administrator for more information).
				</div></div></div><div class="para">
				One <code class="sgmltag-element">Engine</code> can contain multiple virtual hosts, that is the Engine element can have several <code class="sgmltag-element">Host</code> elements nested. The Host element can contain <code class="sgmltag-element">Context</code> elements for individual web applications associated with the virtual host. Exactly one of the Hosts in every Engine <span class="emphasis"><em>must</em></span> have a name matching the <span class="property">defaultHost</span> attribute of the Engine.
			</div><div class="para">
				A <code class="sgmltag-element">Host</code> element can contain multiple <code class="sgmltag-element">Alias</code> elements to allow the virtual host to use multiple hostnames (refer to <a class="xref" href="JBossWeb.html#Host_Name_Aliases">Section 4.6.2.1, “Defining Host Name Aliases”</a>).
			</div><div class="para">
				The <code class="sgmltag-element">Host</code> element can contain at most one <code class="sgmltag-element">Realm</code> element. A <code class="sgmltag-element">Realm</code> element in a Host represents a database of users and their roles used by the virtual host. If the <code class="sgmltag-element">Realm</code> element is nested in the <code class="sgmltag-element">Host</code> element, the user information is shared across all Contexts nested inside the Host unless overridden by another <code class="sgmltag-element">Realm</code> element defined for a child <code class="sgmltag-element">Context</code> element.
			</div><div class="table"><a id="table-Host_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.6. Host Element Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Host Element Attributes"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <span class="property">appBase</span> </td><td style="text-align: left"> <div class="para">
								Application Base directory for the virtual host
							</div>
							 <div class="para">
								The Application Base directory is the pathname of a directory that contains web applications to be deployed on the virtual host. The property value can be defined as an absolute path to the directory or a path relative to the $JBOSS_SERVER_HOME directory.
							</div>
							 </td></tr><tr><td style="text-align: left"> autoDeploy </td><td style="text-align: left"> <div class="para">
								automatic deployment of web applications dropped in the Application Base directory while the JBoss Web server is running (<code class="literal">true</code> by default)
							</div>
							 <div class="note"><div class="admonition_header"><p><strong>Default Deployment Directory</strong></p></div><div class="admonition"><div class="para">
									Note that the default deployment directory is <code class="filename"><code class="varname">$JBOSS_SERVER_HOME</code>/server/<code class="varname">$PROFILE</code>/deploy/</code> directory.
								</div></div></div>
							 </td></tr><tr><td style="text-align: left"> backgroundProcessorDelay </td><td style="text-align: left"> <div class="para">
								delay between the invocation of the <code class="function">backgroundProcess</code> method on the host and the invocation of the <code class="function">backgroundProcess</code> method on the child containers of the Host (such as Contexts; set to <code class="literal">-1</code> by default, that is the Host uses the background processing thread of its Engine)
							</div>
							 <div class="para">
								If set to a positive value, the Host produces a thread. The thread waits for the specified amount of time and then invokes the <code class="function">backgroundProcess</code> method on the virtual host and all its child containers.
							</div>
							 <div class="para">
								Context containers can also define the <span class="property">backgroundProcessorDelay</span> attribute. If the delay of a child Context is not negative, the Context uses its own processing thread.
							</div>
							 <div class="para">

							</div>
							 </td></tr><tr><td style="text-align: left"> className </td><td style="text-align: left"> <div class="para">
								class implementing the Host
							</div>
							 <div class="para">
								The defined class must implement the <span class="interface">org.apache.catalina.Host</span> interface. If no class is specified, the standard implementation is used, that is, <code class="classname">org.apache.catalina.core.StandardHost</code>.
							</div>
							 </td></tr><tr><td style="text-align: left"> deployOnStartup </td><td style="text-align: left"> <div class="para">
								automatic deployment of web applications from the Host (<code class="literal">true</code> by default)
							</div>
							 </td></tr><tr><td style="text-align: left"> name </td><td style="text-align: left"> <div class="para">
								network name of the virtual host as registered in your Domain Name Service server
							</div>
							 <div class="para">
								One of the Hosts nested in the Engine <span class="emphasis"><em>must</em></span> have a name that matches the <span class="property">defaultHost</span> setting for the parent Engine.
							</div>
							 </td></tr></tbody></table></div></div><div class="table"><a id="table-Host_Element_Additional_Attributes">
      ⁠</a><p class="title"><strong>Table 4.7. Additional Element Attributes of the Standard Host Element Implementation (org.apache.catalina.core.StandardHost)</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Additional Element Attributes of the Standard Host Element Implementation (org.apache.catalina.core.StandardHost)"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <span class="property">deployXML</span> </td><td style="text-align: left"> <div class="para">
								applying the <code class="filename">context.xml</code> file located inside the web application (that is, <code class="filename">/META-INF/context.xml</code>; <code class="literal">true</code> by default)
							</div>
							 <div class="para">
								If set to <code class="literal">false</code> to parsing of the context.xml file is disabled. In security conscious environments, set to <code class="literal">false</code> to prevent applications from interacting with the container's configuration and provide an external context configuration file to the <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/<em class="replaceable">enginename</em>/<em class="replaceable">hostname</em>/</code> directory.
							</div>
							 </td></tr><tr><td style="text-align: left"> errorReportValveClass </td><td style="text-align: left"> <div class="para">
								class implementing the error reporting valve used by the Host
							</div>
							 <div class="para">
								The defined class must implement the <span class="interface">org.apache.catalina.Valve</span> interface. If no class is specified, the <code class="classname">org.apache.catalina.valves.ErrorReportValve</code> implementation is used.
							</div>
							 <div class="para">
								The valve defines the output error reports. This property allows you to customize the look of the error pages generated by JBoss Web.
							</div>
							 </td></tr><tr><td style="text-align: left"> unpackWARs </td><td style="text-align: left"> <div class="para">
								automatic unpacking of deployer WAR files (<code class="literal">false</code> by default)
							</div>
							 <div class="para">
								If set to <code class="literal">true</code>, web applications that are placed in the appBase directory in the form of a web application archive (WAR) file are unpacked into a corresponding disk directory structure. If set to <code class="literal">false</code>, such a web application is run from the WAR file.
							</div>
							 <div class="para">

							</div>
							 </td></tr><tr><td style="text-align: left"> workDir </td><td style="text-align: left"> <div class="para">
								pathname to a scratch directory used by applications on the Host (if not specified, a suitable directory under <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/work/</code> is used)
							</div>
							 <div class="para">
								Each application has its own sub-directory with temporary read-write use. The directory can be made visible for servlets in the web application using the <span class="property">javax.servlet.context.tempdir</span> servlet context attribute of type <code class="classname">java.io.File</code> as described in the Servlet Specification.
							</div>
							 <div class="para">
								If a child Context defines the <span class="property">workDir</span> property, the Host's workDir is overridden.
							</div>
							 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Host_Name_Aliases">
      ⁠</a>4.6.2.1. Defining Host Name Aliases</h3></div></div></div><div class="para">
					If more than one network name in the Domain Name Service server are resolved to the IP address of the same server, use the Host's <code class="classname">Alias</code> element to define such network name resolution.
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;Host</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"www.company.com"</span> <span xmlns="" class="perl_Error">...</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>     ...
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;Alias&gt;</span>company.com<span xmlns="" class="perl_Keyword">&lt;/Alias&gt;</span>
<span xmlns="" class="line">​</span>     ...
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">&lt;/Host&gt;</span></pre><div class="para">
					Make sure the network names involved are registered in your DNS server and resolve to the same computer with the JBoss Web instance.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Context">
      ⁠</a>4.6.3. Context</h2></div></div></div><div class="para">
				The <code class="code">Context</code> element represents a web application, which runs within a particular virtual host.
			</div><div class="para">
				The web application used to process a particular HTTP request is selected based on matching the longest possible prefix of the Request URI against the context path of every Context. Once selected, the Context selects the appropriate servlet to process the incoming request as defined by servlet mappings in the web application deployment descriptor file (<code class="filename">/WEB-INF/web.xml</code> in the web application directory hierarchy).
			</div><div class="para">
				You may define an arbitrary number of Context elements; however, each Context <span class="emphasis"><em>must</em></span> have a unique context path. In addition, one Context with an empty context path (zero-length string) must be defined. This Context is used as the default web application for the virtual host and processes any requests with an unmatched context path.
			</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Defining_Context">
      ⁠</a>4.6.3.1. Defining Context</h3></div></div></div><div class="para">
					Contexts can be specified with explicitly defined Context elements or they can be created automatically.
				</div><div class="para">
					To specify the context explicitly, define the <code class="code">Context</code> element in some of the following locations depending on the desired behavior:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							<code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/context.xml</code>: the Context element is loaded by all web applications on the server.
						</div></li><li class="listitem"><div class="para">
							<code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/<em class="replaceable">enginename</em>/<em class="replaceable">hostname</em>/context.xml</code> file: the Context element is loaded by all web applications on the host.
						</div></li><li class="listitem"><div class="para">
							<code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/<em class="replaceable">enginename</em>/<em class="replaceable">hostname</em>/</code> directory as individual files with the <code class="filename">xml</code> extension: The name of the <code class="filename">xml</code> file is used as the context path. To define a multi-level context path, separate the domains with the hash sign (that is, <code class="literal">#</code>); for example, the <code class="filename">foo#bar.xml</code> file will be resolved as the context path <code class="filename">/foo/bar</code>. Define the default web application file as the <code class="filename">ROOT.xml</code> file.
						</div></li><li class="listitem"><div class="para">
							<code class="filename">/META-INF/context.xml</code> in the web application: this context definition is applied only if there is no context file for the application in the <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/<em class="replaceable">enginename</em>/<em class="replaceable">hostname</em>/</code> directory.
						</div><div class="para">
							If the web application is deployed as a WAR archive, its <code class="filename">/META-INF/context.xml</code> file is copied to <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/<em class="replaceable">enginename</em>/<em class="replaceable">hostname</em>/</code> directory and renamed to match the application's context path. Mind that the file will not be replaced if a new WAR with a newer <code class="filename">/META-INF/context.xml</code> file is placed in the host's appBase.
						</div></li><li class="listitem"><div class="para">
							In a <code class="code">Host</code> element in the main <code class="filename">server.xml</code> file.
						</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Definition of Context Element in server.xml Not Recommended</strong></p></div><div class="admonition"><div class="para">
						It is not recommended to place the <code class="code">&lt;Context&gt;</code> element in the <code class="filename">server.xml</code> file. Such context definitions require more invasive approach when modifying the Context configuration since the main <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/conf/server.xml</code> file cannot be reloaded without restarting the JBoss Web server.
					</div></div></div><div class="table"><a id="table-Context_Element_Attributes">
      ⁠</a><p class="title"><strong>Table 4.8. Context Element Attributes</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Context Element Attributes"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <span class="property">backgroundProcessorDelay</span> </td><td style="text-align: left"> <div class="para">
									Delay between the invocation of the <code class="function">backgroundProcess</code> method on the context and the invocation of the <code class="function">backgroundProcess</code> method on the child containers of the context (<code class="literal">-1</code> by default and the context relies therefore on the background processing of its parent host)
								</div>
								 <div class="para">
									If set to a positive value, the context produces a thread. The thread waits for the specified amount of time and then invokes the <code class="function">backgroundProcess</code> method on the context and all its child containers.
								</div>
								 <div class="para">
									If the delay of a child container is not negative, the child container is using its own processing thread.
								</div>
								 <div class="para">
									 A context uses background processing to perform session expiration and class monitoring for reloading.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">className</span> </td><td style="text-align: left"> <div class="para">
									Class implementing the Context
								</div>
								 <div class="para">
									This class must implement the org.apache.catalina.Context interface. If not specified, the <code class="classname">org.apache.catalina.core.StandardContext</code> standard value is used.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">cookies</span> </td><td style="text-align: left"> <div class="para">
									Use cookies for session identifier communication if supported by the client (<code class="literal">true</code> by default)
								</div>
								 <div class="para">
									Set to <code class="literal">false</code> if you want to disable the feature. The server relies then only on URL rewriting performed by the application.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">crossContext</span> </td><td style="text-align: left"> <div class="para">
									Returning of the context to other web applications (defines the response sent to the <code class="function">ServletContext.getContext()</code> call; set to <code class="literal">false</code> by default and the request dispatcher is filled with the NULL value)
								</div>
								 <div class="para">
									If set to <code class="literal">true</code>, the context returns the request dispatcher with the ServletContext value to the requesting web application. The requesting web application must run on the same virtual host.
								</div>
								 <div class="para">

								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">docBase</span> </td><td style="text-align: left"> <div class="para">
									Document Base, that is the Context Root directory, of the web application or the pathname to the web application archive file
								</div>
								 <div class="para">
									You can define the docBase value as an absolute pathname to the directory or WAR file, or as a pathname relative to the appBase directory of the parent Host.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">override</span> </td><td style="text-align: left"> <div class="para">
									Overriding of explicit settings in the Context element by the corresponding settings in the global or host default contexts (set to use the default context setting)
								</div>
								 <div class="para">
									Set to <code class="literal">true</code> to activate the overriding.
								</div>
								 <div class="para">
									If the <code class="code">docBase</code> value is defined as a symbolic link, changes to the symbolic link take effect only after the JBoss Web server is restarted or after the context is undeployed and then re-deployed: context reload is not sufficient.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">privileged</span> </td><td style="text-align: left"> <div class="para">
									Enabling/disabling the context to use container servlets, such as the manager servlet
								</div>
								 <div class="para">
									The <code class="code">privileged</code> attribute changes the context's parent class loader to the Server class loader rather than the Shared class loader (the Common class loader is used for the Server and the Shared class loaders by default).
								</div>
								 <div class="para">
									Set to <code class="literal">true</code> to allow the context to use container servlets.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">path</span> </td><td style="text-align: left"> <div class="para">
									Context path of the web application.
								</div>
								 <div class="para">
									The path is matched against the beginning of each request URI to select the appropriate web application for the request processing. Therefore all context paths within a particular host must be unique.
								</div>
								 <div class="para">
									To use the context as the default web application for the host, specify the context path as an empty string (<code class="literal">""</code>). The default web application processes any requests, which could not be assigned to any other Context.
								</div>
								 <div class="para">
									<span class="bold bold"><strong>Do not set the value of this field unless you want to define the context statically in <code class="filename">server.xml</code> as its value is inferred from the file names used for the <code class="filename">xml</code> context file or the <span class="property">docBase</span> property.</strong></span>
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">reloadable</span> </td><td style="text-align: left"> <div class="para">
									Enabling/disabling the monitoring of class changes in <code class="filename">/WEB-INF/classes/</code> and <code class="filename">/WEB-INF/lib</code> and automatic reloading of the web application if a change is detected (<code class="literal">false</code> by default).
								</div>
								 <div class="para">
									Note that this feature requires significant runtime overhead and is not recommended for production applications (to reload deployed applications, use the Manager web application).
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">WrapperClass</span> </td><td style="text-align: left"> <div class="para">
									Class implementing the <span class="interface">org.apache.catalina.Wrapper</span> interface used for servlets in this context
								</div>
								 <div class="para">
									If no value is specified, the standard default value is used.
								</div>
								 </td></tr></tbody></table></div></div><div class="table"><a id="table-Context_Element_Additional_Attributes">
      ⁠</a><p class="title"><strong>Table 4.9. Additional Element Attributes of the Standard Context Element Implementation (org.apache.catalina.core.StandardContext)</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="Additional Element Attributes of the Standard Context Element Implementation (org.apache.catalina.core.StandardContext)"><colgroup><col style="text-align: left" class="col1" width="33%"/><col width="67%" style="text-align: left" class="col2"/></colgroup><thead><tr><th style="text-align: left"> Attribute </th><th style="text-align: left"> Description </th></tr></thead><tbody><tr><td style="text-align: left"> <span class="property">allowLinking</span> </td><td style="text-align: left"> <div class="para">
									Enabling/disabling the usage of symlinks inside the web application if the symlinks point to resources outside of the web application Base directory (set to <code class="literal">false</code> by default)
								</div>
								 <div class="para">
									Set to <code class="literal">true</code> to allow such symlinks in the web application.
								</div>
								 <div class="para">
									This property <span class="bold bold"><strong>must not</strong></span> be set to <code class="literal">true</code> on Windows platforms or any other operating systems with case-insensitive file systems as this can result in various security problem, such as disabling of case sensitivity checks and possible disclosure of JSP source code.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">antiJARLocking</span> </td><td style="text-align: left"> <div class="para">
									Enabling/disabling extra measures for keeping JAR files unlocked even if being accessed through URLs (<code class="literal">false</code> by default)
								</div>
								 <div class="para">
									Enabling this feature prolongs the start time of applications.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">antiResourceLocking</span> </td><td style="text-align: left"> <div class="para">
									Enabling/disabling file locking by JBoss Web (<code class="literal">false</code> by default)
								</div>
								 <div class="para">
									Enabling this features allows full hot deploy and undeploy on platforms or configurations where file locking can occur. However, enabling this feature significantly impacts the start time of applications along with other side effects, such as disabling of JSP reloading in a running server and application deletion on JBoss Web shutdown if the application is outside of the appBase for the Host (in the <code class="filename">webapps</code> directory by default).
								</div>
								 <div class="para">

								</div>
								 <div class="para">

								</div>
								 </td></tr><tr><td style="text-align: left"> cacheMaxSize </td><td style="text-align: left"> <div class="para">
									Defines the maximum size of the static resource cache in kilobytes (set to <code class="literal">10240</code>, that is 10 megabytes by default)
								</div>
								 <div class="para">

								</div>
								 <div class="para">

								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">cacheTTL</span> </td><td style="text-align: left"> <div class="para">
									Defines the amount of time in milliseconds between cache entries revalidation (set to <code class="literal">5000</code>, that is 5 seconds, by default)
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">cachingAllowed</span> </td><td style="text-align: left"> <div class="para">
									Enabling the usage of the cache for static resources (set to <code class="literal">true</code> by default)
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">caseSensitive</span> </td><td style="text-align: left"> <div class="para">
									Enabling case sensitivity checks (set to <code class="literal">false</code> by default)
								</div>
								 <div class="para">
									Set to <code class="literal">false</code> to disable all case sensitivity checks.
								</div>
								 <div class="para">
									<span class="bold bold"><strong>Do not set the property <code class="literal">false</code> on Windows platforms or any operating systems that do not have a case sensitive file system as this might result in various security issues including JSP source code disclosure.</strong></span>
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">processTlds</span> </td><td style="text-align: left"> <div class="para">
									Enabling processing of tag library descriptors (TLD) on context start up (set to <code class="literal">true</code> by default)
								</div>
								 <div class="para">
									Set to <code class="literal">false</code> if TLDs are not part of the web application.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">swallowOutput</span> </td><td style="text-align: left"> <div class="para">
									Enabling redirection of System.out and System.err output to the web application logger (<code class="literal">false</code> by default)
								</div>
								 <div class="para">
									Set to <code class="literal">true</code> to redirect the output to the web application logger. 
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">tldNamespaceAware</span> </td><td style="text-align: left"> <div class="para">
									Enabling the TLD files XML validation to be namespace-aware (<code class="literal">false</code> by default)
								</div>
								 <div class="para">
									The feature is usually enabled along with tldValidation.
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">tldValidation</span> </td><td style="text-align: left"> <div class="para">
									Enabling the TLD files XML validation on context start up (<code class="literal">false</code> by default)
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">unloadDelay</span> </td><td style="text-align: left"> <div class="para">
									Amount of time (in ms) the container waits for servlets to unload (<code class="literal">2000</code> ms by default)
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">unpackWAR</span> </td><td style="text-align: left"> <div class="para">
									Enabling unpacking of compressed web applications before they are run (<code class="literal">true</code> by default)
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">useNaming</span> </td><td style="text-align: left"> <div class="para">
									Enabling a JNDI InitialContext that is compatible with Java Enterprise Edition (JEE) conventions (<code class="literal">true</code> by default)
								</div>
								 </td></tr><tr><td style="text-align: left"> <span class="property">workDir</span> </td><td style="text-align: left"> <div class="para">
									Path to a directory provided by this Context for temporary read-write use to the servlets in the associated web application
								</div>
								 <div class="para">
									 The directory is visible for servlets in the web application through the javax.servlet.context.tempdir servlet context attribute (of type java.io.File) named as described in the Servlet Specification. If not specified, a suitable directory under <code class="filename"><em class="replaceable">$JBOSS_SERVER_HOME</em>/work/</code> is provided.
								</div>
								 </td></tr></tbody></table></div></div><div class="qandaset"><h5 class="title"><a id="idm139776734548592">
      ⁠</a>Context FAQs</h5><div xmlns:d="http://docbook.org/ns/docbook" class="qandaset"><h5 class="title"><a id="idm139776734548592">
      ⁠</a>Context FAQs</h5><div class="qandaentry"><div class="question"><a id="idm139776734547792">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
								What is <code class="filename">context.xml</code>?
							</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
								<code class="filename">context.xml</code> is a Tomcat configuration file that is used to configure many webapp settings on a per-webapp basis.
							</div><div class="para">
								Recent versions of JBoss Enterprise Application Platform allow you to place a <code class="filename">context.xml</code> file in the <code class="filename">WEB-INF</code> directory of your WAR archive.
							</div><div class="para">
								The JBoss Enterprise Application Platform distribution comes with some in-place <code class="filename">context.xml</code> files. They can be found at <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/management/console-mgr.sar/web-console.war/WEB-INF/context.xml</code> and <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/jbossweb.sar/context.xml</code>.
							</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139776769995552">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
								Why is <code class="filename">context.xml</code> placed in <code class="filename">WEB-INF</code> in JBoss deployments but <code class="filename">META-INF</code> in Tomcat?
							</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
								The justification for this is that a WAR archive does not require a <code class="filename">META-INF</code> directory however a <code class="filename">WEB-INF</code> directory <span class="bold bold"><strong>is</strong></span> required.
							</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139776683850976">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
								What is the difference between <code class="filename">jboss-web.xml</code> and <code class="filename">context.xml</code>?
							</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
								Because there is some overlap between <code class="filename">jboss-web.xml</code> and <code class="filename">context.xml</code>, there is some confusion over how and when <code class="filename">context.xml</code> should be used.
							</div><div class="para">
								The general rule is that if you can set a parameter in <code class="filename">jboss-web.xml</code> then the <code class="filename">context.xml</code> equivalent is ignored.
							</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139776751337648">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
								Why is <code class="filename">context.xml</code> needed at all?
							</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
								The reason we need <code class="filename">context.xml</code> is that there are some things that are used to configure Tomcat as opposed to the JBoss wrapper around Tomcat. Some examples of ways you would use <code class="filename">context.xml</code> are found here:
							</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
										<a href="https://community.jboss.org/wiki/ExtendedFormAuthenticator">https://community.jboss.org/wiki/ExtendedFormAuthenticator</a>
									</div></li><li class="listitem"><div class="para">
										<a href="https://community.jboss.org/wiki/DisableSessionPersistence">https://community.jboss.org/wiki/DisableSessionPersistence</a>
									</div></li><li class="listitem"><div class="para">
										<a href="https://community.jboss.org/wiki/LimitAccessToCertainClients">https://community.jboss.org/wiki/LimitAccessToCertainClients</a>
									</div></li></ul></div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139776760473808">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
								Why is not <code class="filename">context.xml</code> usage better documented?
							</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
								Partially because <code class="filename">context.xml</code> has no DTD. There is no exhaustive list of possible elements and overlaps with <code class="filename">jboss-web.xml</code>.
							</div><div class="para">
								The <em class="parameter"><code>path</code></em> attribute is the most commonly cited overlap <code class="filename">jboss-web.xml</code>. You should set the <em class="parameter"><code>context-root</code></em> in <code class="filename">jboss-web.xml</code>.
							</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139776684090224">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
								How do I remove the jsessionid from URLs?
							</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="procedure"><div class="para">
									To have the jsessionids removed from URLs, do the following:
								</div><ol class="1"><li class="step"><div class="para">
										Create the following JsessionIdRemoveFilter.java in your code base:
									</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.io.IOException;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.Filter;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.FilterChain;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.FilterConfig;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.ServletException;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.ServletRequest;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.ServletResponse;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.http.HttpServletRequest;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.http.HttpServletResponse;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.servlet.http.HttpServletResponseWrapper;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> JsessionIdRemoveFilter <span xmlns="" class="perl_Keyword">implements</span> Filter {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">doFilter</span>(ServletRequest req, ServletResponse res, FilterChain chain)
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">throws</span> IOException, ServletException {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">if</span> (!(req <span xmlns="" class="perl_Keyword">instanceof</span> HttpServletRequest)) {
<span xmlns="" class="line">​</span>            chain.<span xmlns="" class="perl_Function">doFilter</span>(req, res);
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">return</span>;
<span xmlns="" class="line">​</span>        }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        HttpServletRequest request = (HttpServletRequest) req;
<span xmlns="" class="line">​</span>        HttpServletResponse response = (HttpServletResponse) res;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">// Redirect requests with JSESSIONID in URL to clean version (old links bookmarked/stored by bots)</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">// This is ONLY triggered if the request did not also contain a JSESSIONID cookie! Which should be fine for bots...</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">if</span> (request.<span xmlns="" class="perl_Function">isRequestedSessionIdFromURL</span>()) {
<span xmlns="" class="line">​</span>            String url = request.<span xmlns="" class="perl_Function">getRequestURL</span>()
<span xmlns="" class="line">​</span>                         .<span xmlns="" class="perl_Function">append</span>(request.<span xmlns="" class="perl_Function">getQueryString</span>() != <span xmlns="" class="perl_Keyword">null</span> ? <span xmlns="" class="perl_String">"?"</span>+request.<span xmlns="" class="perl_Function">getQueryString</span>() : <span xmlns="" class="perl_String">""</span>)
<span xmlns="" class="line">​</span>                         .<span xmlns="" class="perl_Function">toString</span>();
<span xmlns="" class="line">​</span>            response.<span xmlns="" class="perl_Function">setHeader</span>(<span xmlns="" class="perl_String">"Location"</span>, url);
<span xmlns="" class="line">​</span>            response.<span xmlns="" class="perl_Function">sendError</span>(HttpServletResponse.<span xmlns="" class="perl_Function">SC_MOVED_PERMANENTLY</span>);
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">return</span>;
<span xmlns="" class="line">​</span>        }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">// Prevent rendering of JSESSIONID in URLs for all outgoing links</span>
<span xmlns="" class="line">​</span>        HttpServletResponseWrapper wrappedResponse =
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">HttpServletResponseWrapper</span>(response) {
<span xmlns="" class="line">​</span>                @Override
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">encodeRedirectUrl</span>(String url) {
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">return</span> url;
<span xmlns="" class="line">​</span>                }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                @Override
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">encodeRedirectURL</span>(String url) {
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">return</span> url;
<span xmlns="" class="line">​</span>                }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                @Override
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">encodeUrl</span>(String url) {
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">return</span> url;
<span xmlns="" class="line">​</span>                }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                @Override
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">encodeURL</span>(String url) {
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">return</span> url;
<span xmlns="" class="line">​</span>                }
<span xmlns="" class="line">​</span>            };
<span xmlns="" class="line">​</span>        chain.<span xmlns="" class="perl_Function">doFilter</span>(req, wrappedResponse);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">destroy</span>() {
<span xmlns="" class="line">​</span>     }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">init</span>(FilterConfig arg0) <span xmlns="" class="perl_Keyword">throws</span> ServletException {
<span xmlns="" class="line">​</span>     }
<span xmlns="" class="line">​</span>}
</pre></li><li class="step"><div class="para">
										Add the following to the <code class="filename">web.xml</code> file to have the filter deployed:
									</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;filter&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;filter-name&gt;</span>JsessionIdRemoveFilter<span xmlns="" class="perl_Keyword">&lt;/filter-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;filter-class&gt;</span>com.example.JsessionIdRemoveFilter<span xmlns="" class="perl_Keyword">&lt;/filter-class&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/filter&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;filter-mapping&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;filter-name&gt;</span>JsessionIdRemoveFilter<span xmlns="" class="perl_Keyword">&lt;/filter-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;url-pattern&gt;</span>/*<span xmlns="" class="perl_Keyword">&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/filter-mapping&gt;</span></pre></li></ol></div><div class="para">
								As this disables URL rewriting, the site no longer works without cookies and an additional cookie check might be needed.
							</div></div></div></div></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="server.xml-NestedComponents">
      ⁠</a>4.7. Nested Components</h1></div></div></div><div class="para">
			Nested components are optional elements nested in other elements while not nesting any elements themselves.
		</div><div class="para">
			Nested element are <code class="classname">Realm</code>, <code class="classname">Valve</code>, <code class="classname">Resources</code>, <code class="classname">Manager</code>, <code class="classname">Loader</code>, and <code class="classname">GlobalNamingResources</code>.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Realm">
      ⁠</a>4.7.1. Realm</h2></div></div></div><div class="para">
				The <code class="code">Realm</code> element can be defined either in the <code class="code">Engine</code> element or in the <code class="code">Host</code> element. It defines the security applied to the received requests and thus integrates the JBoss Web server into JBoss SX.
			</div><div class="para">
				The <code class="code">Realm</code> element supports the following attributes: TBD
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-Valve">
      ⁠</a>4.7.2. Valve</h2></div></div></div><div class="para">
				The <code class="classname">Valve</code> element "catches" requests before they are received by the respective container and executes the code defined. The element is nested in the element, which represents the container to catch the requests from; that is <code class="classname">Engine</code>, <code class="classname">Host</code>, or <code class="classname">Context</code> container.
			</div><div class="para">
				Valves have been provided as an alternative to filters and are the recommended solution.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="server.xml-GNR">
      ⁠</a>4.7.3. GlobalNamingResources</h2></div></div></div><div class="para">
				The <code class="classname">GlobalNamingResources</code> element defines the global JNDI resources for the Server.
			</div><div class="para">
				The global JNDI resources are listed in the server's global JNDI resource context. The resources defined in this element are not visible in the per-web-application contexts unless you explicitly link them with ___ResourceLink___ elements.
			</div><div class="para">
				You can configure named values that will be visible to all web applications as environment entry resources in the <code class="code">Environment</code> element nested in the <code class="code">GlobalNamingResources</code> element.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;GlobalNamingResources</span> <span xmlns="" class="perl_Error">...</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;Environment</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"maxExemptions"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"10"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">     type=</span><span xmlns="" class="perl_String">"java.lang.Integer"</span><span xmlns="" class="perl_Others"> override=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/GlobalNamingResources&gt;</span></pre><div class="para">
				The <code class="code">Environment</code> element supports the following attributes:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<span class="property">description</span>: optional human-readable description of the element
					</div></li><li class="listitem"><div class="para">
						<span class="property">name</span>: name of the environment entry to be created relative to the <code class="code">java:comp/env</code> context
					</div></li><li class="listitem"><div class="para">
						<span class="property">override</span>: Set this to false if you do not want an ___env-entry___ for the same environment entry name, found in the web application deployment descriptor, to override the value specified here. By default, overrides are allowed.
					</div></li><li class="listitem"><div class="para">
						<span class="property">type</span>: The fully qualified Java class name expected by the web application for this environment entry. Must be one of the legal values for ___env-entry-type____ in the web application deployment descriptor: java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Double, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Short, or java.lang.String.
					</div></li><li class="listitem"><div class="para">
						<span class="property">value</span>: The parameter value that will be presented to the application when requested from the JNDI context. This value must be convertible to the Java type defined by the type attribute.
					</div></li></ul></div></div></div></div></body></html>