<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 2. Migrating to HornetQ</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="qs-migration">
      ⁠</a>Chapter 2. Migrating to HornetQ</h1></div></div></div><div class="para">
		Read this chapter to migrate existing JBoss Messaging applications to HornetQ. The <em class="citetitle">Installation Guide</em>contains instructions on installing an instance of JBoss Enterprise Application Platform with HornetQ, and should be read in conjunction with this section.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905811521872">
      ⁠</a>2.1. Before You Migrate</h1></div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Shut down client and server</strong></p></div><div class="admonition"><div class="para">
				You must shut down your client and server before attempting to migrate from JBoss Messaging to HornetQ.
			</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>HornetQ does not use a database</strong></p></div><div class="admonition"><div class="para">
				JBoss Messaging uses a database to store persistent data unless null persistence is specified. HornetQ uses its own high-performance journal system instead of a database, so your database does not need to be shut down for migration purposes.
			</div></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>HornetQ does not work with NFS as shared storage with NIO</strong></p></div><div class="admonition"><div class="para">
				Due to the way NFS's synchronous locking mechanism works it is not an appropriate method of storing JMS data for use with HornetQ.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139905871911920">
      ⁠</a>2.1.1. Back up relevant data</h2></div></div></div><div class="para">
				It is important to back up all data used in your application and your JBoss Messaging server before you migrate. This section outlines the data recommended for backup before migration.
			</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139905845304464">
      ⁠</a>2.1.1.1. JBoss Messaging database tables</h3></div></div></div><div class="para">
					JBoss Messaging uses a number of database tables to store persistent data. These tables include internal state information of JBoss Messaging, persistent messages and security settings. This section lists tables that hold important data.
				</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">JBM_MSG_REF, JBM_MSG</span></dt><dd><div class="para">
								These tables store persistent messages and their states.
							</div></dd><dt><span class="term">JBM_TX, JBM_TX_EX</span></dt><dd><div class="para">
								These tables store transaction states.
							</div></dd><dt><span class="term">JBM_USER, JBM_ROLE</span></dt><dd><div class="para">
								These tables store user and role information.
							</div></dd><dt><span class="term">JBM_POSTOFFICE</span></dt><dd><div class="para">
								This table holds bindings information.
							</div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139905801498288">
      ⁠</a>2.1.1.2. JBoss Messaging configuration files</h3></div></div></div><div class="para">
					Most configuration files are stored in <code class="filename">$JBOSS_HOME/server/$PROFILE/deploy/messaging</code>, assuming your JBoss Messaging server profile is <code class="literal">messaging</code>. Applications can choose other locations in which to deploy some configuration files.
				</div><div class="para">
					You will need to back up and migrate the following configuration files to HornetQ:
				</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Connection Factory service configuration files</span></dt><dd><div class="para">
								Contain JMS connection factories deployed with the JBoss Messaging server.
							</div></dd><dt><span class="term">Destination service configuration files</span></dt><dd><div class="para">
								Contain JMS queues and topics deployed with the JBoss Messaging server.
							</div></dd><dt><span class="term">Bridge service configuration files</span></dt><dd><div class="para">
								Contain bridge services deployed with the JBoss Messaging server.
							</div></dd></dl></div><div class="para">
					Other configuration files, such as <code class="filename">messaging-service.xml</code> and the database persistence configuration file, are JBoss Messaging MBeans configurations. The HornetQ implementation consists only of Plain Old Java Objects (POJOs), so these configuration files are not migration targets.
				</div><div class="para">
					JBoss Messaging relies on the JBoss Remoting and JGroups services in order to work. The configuration files for these services contain settings specific to applications. HornetQ's transport layer and cluster design differ from that in JBoss Messaging. You will need to map the parameters in the service configuration files to their HornetQ equivalents, if any.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905870655184">
      ⁠</a>2.2. Application Code</h1></div></div></div><div class="para">
			If you are using standard JMS in your application, you will need to make modifications to your source code regarding High Availability (HA) and clustering. Specifically you will need to adjust how your application handles failures and rollbacks. For more information, refer to <a class="xref" href="qs-migration.html#Client-side_Failure_Handling">Section 2.3, “Client-side Failure Handling”</a>.
		</div><div class="para">
			If you are using JBoss Messaging proprietary features, such as ordering groups, you will need to adapt them to HornetQ equivalent features. <a class="xref" href="qs-migration.html#table-Class_Mappings_Messaging_vs_HornetQ">Table 2.1, “Implementation class mapping between JBoss Messaging and HornetQ”</a> lists the JBoss Messaging JMS implementation classes and their corresponding HornetQ equivalents.
		</div><div class="table"><a id="idm139905870652096">
      ⁠</a><p class="title"><strong>Table 2.1. Implementation class mapping between JBoss Messaging and HornetQ</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Implementation class mapping between JBoss Messaging and HornetQ"><colgroup><col width="33%" class="c1"/><col width="67%" class="c2"/></colgroup><thead><tr><th> org.jboss.jms.client. Classname </th><th> HornetQ Equivalent Classname </th></tr></thead><tbody><tr><td> <code class="classname">JBossConnectionFactory</code> </td><td> <code class="classname">org.hornetq.jms.client.HornetQConnectionFactory</code> </td></tr><tr><td> <code class="classname">JBossConnection</code> </td><td> <code class="classname">org.hornetq.jms.client.HornetQConnection</code> </td></tr><tr><td> <code class="classname">JBossSession</code> </td><td> <code class="classname">org.hornetq.jms.client.HornetQSession</code> </td></tr><tr><td> <code class="classname">JBossMessageProducer</code> </td><td> <code class="classname">org.hornetq.jms.client.HornetQMessageProducer</code> </td></tr><tr><td> <code class="classname">JBossMessageConsumer</code> </td><td> <code class="classname">org.hornetq.jms.client.HornetQMessageConsumer</code> </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Unless you have used JBoss Messaging-specific APIs, it is not necessary to explicitly case your JMS objects to specific implementations. You can just use the standard JMS APIs wherever possible.
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Client-side_Failure_Handling">
      ⁠</a>2.3. Client-side Failure Handling</h1></div></div></div><div class="para">
			The JMS specification does not control how the server should behave on High Availability fail over, or clustering. However, the specification does recommend how an application must handle failures and rollback scenarios.
		</div><div class="para">
			JBoss Messaging does not throw an exception to the client during fail over. Applications in JBoss Messaging are automatically connected to another node in the cluster.
		</div><div class="para">
			In HornetQ, fail over or rollback triggers an exception. Your JBoss Messaging application must capture this exception and retry sending the message for it to be compatible with HornetQ.
		</div><div class="para">
			In JBoss Messaging, the following expression was sufficient to handle failures:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>producer.<span xmlns="" class="perl_Function">send</span>(<span xmlns="" class="perl_Function">createMessage</span>(session, i));
<span xmlns="" class="line">​</span>System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Message: "</span> + i);</pre><div class="para">
			In HornetQ, the following try block is required:
		</div><pre class="programlisting">try {
  producer.send(createMessage(session, i));
  System.out.println("Message: " + i);
} catch (Exception e) {
  Thread.sleep(1000); 
  producer.send(createMessage(session, i));
}</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905843379136">
      ⁠</a>2.4. Installing HornetQ</h1></div></div></div><div class="para">
			Refer to the <em class="citetitle"><span class="application"><strong>JBoss Enterprise Application Platform</strong></span> Installation Guide</em> available at <a href="https://access.redhat.com/knowledge/docs/">https://access.redhat.com/knowledge/docs/</a> for up-to-date details on installing HornetQ with this distribution of JBoss Enterprise Application Platform.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905804276032">
      ⁠</a>2.5. Server Configuration Migration</h1></div></div></div><div class="para">
			HornetQ configuration differs significantly from JBoss Messaging, so it is not possible to provide a one-to-one mapping between the two. <a class="xref" href="qs-migration.html#table-Messaging_vs_HornetQ_Server_Attributes">Table 2.2, “Server attribute mapping between JBoss Messaging and HornetQ”</a> lists JBoss Messaging server attributes and their equivalents (where possible) in HornetQ.
		</div><div class="para">
			Unless explicitly indicated, attributes in the HornetQ Server Attributes column are configured in <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-configuration.xml</code>. The full set of supported directives in this file are documented in <a class="xref" href="appe-configuration_index.html">Appendix A, <em>Configuration Reference</em></a>
		</div><div class="table"><a id="table-Messaging_vs_HornetQ_Server_Attributes">
      ⁠</a><p class="title"><strong>Table 2.2. Server attribute mapping between JBoss Messaging and HornetQ</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="Server attribute mapping between JBoss Messaging and HornetQ"><colgroup><col class="c1"/><col class="c2"/></colgroup><thead><tr><th> JBoss Messaging Server Attributes (Server Peer MBean) </th><th> Equivalent HornetQ Server Attributes </th></tr></thead><tbody><tr><td> <code class="classname">ServerPeerID</code> </td><td> N/A - HornetQ does not require a specified server ID </td></tr><tr><td> <code class="classname">DefaultQueueJNDIContext</code>, <code class="classname">DefaultTopicJNDIContext</code> </td><td> N/A </td></tr><tr><td> <code class="classname">PostOffice</code> </td><td> N/A </td></tr><tr><td> <code class="classname">DefaultDLQ</code> </td><td> N/A - HornetQ defines dead letter addresses at the core level. There is no default dead letter address for an address unless you specify one. </td></tr><tr><td> <code class="classname">DefaultMaxDeliveryAttempts</code> </td><td> N/A - In HornetQ, the default is always <code class="literal">10</code>. </td></tr><tr><td> <code class="classname">DefaultExpiryQueue</code> </td><td> N/A - HornetQ defines expiry addresses at the core level. There is no default expiry address for an address unless you specify one. </td></tr><tr><td> <code class="classname">DefaultRedeliveryDelay</code> </td><td> N/A - HornetQ's default redelivery delay is always <code class="literal">0</code> (no delay). </td></tr><tr><td> <code class="classname">MessageCounterSamplePeriod</code> </td><td> <code class="classname">message-counter-sample-period</code> </td></tr><tr><td> <code class="classname">FailoverStartTimeout</code> </td><td> N/A </td></tr><tr><td> <code class="classname">FailoverCompleteTimeout</code> </td><td> N/A </td></tr><tr><td> <code class="classname">DefaultMessageCounterHistoryDayLimit</code> </td><td> N/A </td></tr><tr><td> <code class="classname">ClusterPullConnectionFactory</code> </td><td> N/A </td></tr><tr><td> <code class="classname">DefaultPreserveOrdering</code> </td><td> N/A </td></tr><tr><td> <code class="classname">RecoverDeliveriesTimeout</code> </td><td> N/A </td></tr><tr><td> <code class="classname">EnableMessageCounters</code> </td><td> <code class="classname">message-counter-enabled</code> </td></tr><tr><td> <code class="classname">SuckerPassword</code> </td><td> <code class="classname">cluster-password</code> </td></tr><tr><td> <code class="classname">SuckerConnectionRetryTimes</code> </td><td> <code class="classname">bridges.reconnect-attempts</code> </td></tr><tr><td> <code class="classname">SuckerConnectionRetryInterval</code> </td><td> bridges.reconnect-interval </td></tr><tr><td> <code class="classname">StrictTCK</code> </td><td> N/A </td></tr><tr><td> <code class="classname">Destinations</code>, <code class="classname">MessageCounters</code>, <code class="classname">MessageStatistics</code> </td><td> N/A - These are part of HornetQ's management functions. Refer to the appropriate chapter for details. </td></tr><tr><td> <code class="classname">SupportsFailover</code> </td><td> N/A </td></tr><tr><td> <code class="classname">PersistenceManager</code> </td><td> N/A - HornetQ uses its built-in high-performance journal as its persistence utility. </td></tr><tr><td> <code class="classname">JMSUserManager</code> </td><td> N/A </td></tr><tr><td> <code class="classname">SecurityStore</code> </td><td> N/A - The security manager is configured in <code class="filename">hornetq-beans.xml</code> or <code class="filename">hornetq-jboss-beans.xml</code>. </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905864431344">
      ⁠</a>2.6. Migrating JMS-administered Objects and Bridges</h1></div></div></div><div class="para">
			HornetQ creates and deploys JMS connection factories, destinations, and bridges differently to JBoss Messaging.
		</div><div class="para">
			In JBoss Messaging, JMS objects and bridges are configured as MBean services within the application server. In HornetQ, these are implemented as POJOs.
		</div><div class="para">
			To migrate the configuration of these objects and bridges from JBoss Messaging to HornetQ, you must understand how parameters map from JBoss Messaging to HornetQ.
		</div><div class="para">
			<a class="xref" href="qs-migration.html#table-JMS_Connection_Factory_Config_Mappings">Table 2.3, “JMS Connection Factory Configuration Mappings”</a> maps these parameters. Unless otherwise described, all HornetQ Object and Bridge attributes are specified in <code class="filename"><em class="replaceable">JBOSS_DIST</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-jms.xml</code>. <a class="xref" href="appe-configuration_index.html">Appendix A, <em>Configuration Reference</em></a> contains all supported directives for <code class="filename">hornetq-jms.xml</code>.
		</div><div class="table"><a id="table-JMS_Connection_Factory_Config_Mappings">
      ⁠</a><p class="title"><strong>Table 2.3. JMS Connection Factory Configuration Mappings</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="JMS Connection Factory Configuration Mappings"><colgroup><col class="c1"/><col class="c2"/></colgroup><thead><tr><th> JBoss Messaging ConnectionFactory Attributes </th><th> HornetQ JMS ConnectionFactory Attributes </th></tr></thead><tbody><tr><td> <code class="classname">ClientID</code> </td><td> <code class="classname">connection-factory.client-id</code> </td></tr><tr><td> <code class="classname">JNDIBindings</code> </td><td> <code class="classname">connection-factory.entries</code> </td></tr><tr><td> <code class="classname">PrefetchSize</code> </td><td> <code class="classname">connection-factory.consumer-window-size</code> </td></tr><tr><td> <code class="classname">SlowConsumers</code> </td><td> N/A - equivalent to <code class="code">consumer-window-size=0</code> </td></tr><tr><td> <code class="classname">StrictTck</code> </td><td> N/A </td></tr><tr><td> <code class="classname">SendAcksAsync</code> </td><td> <code class="classname">connection-factory.block-on-acknowledge</code> </td></tr><tr><td> <code class="classname">DefaultTempQueueFullSize</code>, <code class="classname">DefaultTempQueuePageSize</code>, <code class="classname">DefaultTempQueueDownCacheSize</code> </td><td> N/A </td></tr><tr><td> <code class="classname">DupsOKBatchSize</code> </td><td> <code class="classname">connection-factory.dups-ok-batch-size</code> </td></tr><tr><td> <code class="classname">SupportsLoadBalancing</code> </td><td> N/A </td></tr><tr><td> <code class="classname">SupportsFailover</code> </td><td> N/A </td></tr><tr><td> <code class="classname">DisableRemotingChecks</code> </td><td> N/A </td></tr><tr><td> <code class="classname">LoadBalancingFactory</code> </td><td> <code class="classname">connection-factory.connection-load-balancing-policy-class-name</code> </td></tr><tr><td> <code class="classname">Connector</code> </td><td> <code class="classname">connection-factory.connectors</code> </td></tr><tr><td> <code class="classname">EnableOrderingGroup</code>, <code class="classname">DefaultOrderingGroup</code> </td><td> N/A </td></tr></tbody></table></div></div><div class="para">
			<a class="xref" href="qs-migration.html#table-JMS_Queue_Config_Mappings">Table 2.4, “JMS Queue Configuration Mappings”</a> describes how JBoss Messaging Queue attributes map to HornetQ JMS Queue attributes. Unless otherwise specified, these attributes are defined in <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-configuration.xml</code>. If not specified in <code class="filename">hornetq-configuration.xml</code>, they are specified in <code class="filename"><em class="replaceable">JBOSS_DIST</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-jms.xml</code>.
		</div><div class="table"><a id="table-JMS_Queue_Config_Mappings">
      ⁠</a><p class="title"><strong>Table 2.4. JMS Queue Configuration Mappings</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="JMS Queue Configuration Mappings"><colgroup><col width="33%" class="c1"/><col width="67%" class="c2"/></colgroup><thead><tr><th> JBoss Messaging Queue Attributes </th><th> HornetQ JMS Queue Attributes </th></tr></thead><tbody><tr><td> <code class="classname">Name</code> </td><td> <code class="classname">queue.name</code> - defined in <code class="filename">hornetq-jms.xml</code> </td></tr><tr><td> <code class="classname">JNDIName</code> </td><td> <code class="classname">queue.entry</code> - defined in <code class="filename">hornetq-jms.xml</code> </td></tr><tr><td> <code class="classname">DLQ</code> </td><td> <code class="classname">address-settings.dead-letter-address</code> </td></tr><tr><td> <code class="classname">ExpiryQueue</code> </td><td> <code class="classname">address-settings.expiry-address</code> </td></tr><tr><td> <code class="classname">RedeliveryDelay</code> </td><td> <code class="classname">address-settings.redelivery-delay</code> </td></tr><tr><td> <code class="classname">MaxDeliveryAttempts</code> </td><td> <code class="classname">address-settings.max-delivery-attempts</code> </td></tr><tr><td> <code class="classname">SecurityConfig</code> </td><td> <code class="classname">security-settings</code> </td></tr><tr><td> <code class="classname">FullSize</code> </td><td> <code class="classname">address-settings.max-size-bytes</code> - HornetQ paging attributes do not exactly match JBoss Messaging paging attributes. Refer to the appropriate chapter for details. </td></tr><tr><td> <code class="classname">PageSize</code> </td><td> <code class="classname">address-settings.page-size-bytes</code> - HornetQ paging attributes do not exactly match JBoss Messaging paging attributes. Refer to the appropriate chapter for details. </td></tr><tr><td> <code class="classname">DownCacheSize</code> </td><td> Not Supported </td></tr><tr><td> <code class="classname">CreatedProgrammatically</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.JMSQueueControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">MessageCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.JMSQueueControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">ScheduledMessageCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.JMSQueueControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">MessageCounter</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.JMSQueueControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">MessageCounterStatistics</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.JMSQueueControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">ConsumerCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.JMSQueueControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">DropOldMessageOnRedeploy</code> </td><td> Not Supported </td></tr><tr><td> <code class="classname">MaxSize</code> </td><td> Not Supported </td></tr><tr><td> <code class="classname">Clustered</code> </td><td> Not Supported </td></tr></tbody></table></div></div><div class="para">
			<a class="xref" href="qs-migration.html#table-JMS_Topic_Config_Mappings">Table 2.5, “JMS Topic Configuration Mappings”</a><code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-configuration.xml</code> describes how JBoss Messaging Topic attributes map to HornetQ JMS Topic attributes. Unless otherwise specified, these attributes are defined in <code class="filename"><em class="replaceable">JBOSS_DIST</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-jms.xml</code>.
		</div><div class="table"><a id="table-JMS_Topic_Config_Mappings">
      ⁠</a><p class="title"><strong>Table 2.5. JMS Topic Configuration Mappings</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="JMS Topic Configuration Mappings"><colgroup><col width="33%" class="c1"/><col width="67%" class="c2"/></colgroup><thead><tr><th> JBoss Messaging Topic Attributes </th><th> HornetQ JMS Topic Attributes </th></tr></thead><tbody><tr><td> <code class="classname">Name</code> </td><td> <code class="classname">topic.name</code> - defined in <code class="filename">hornetq-jms.xml</code> </td></tr><tr><td> <code class="classname">JNDIName</code> </td><td> <code class="classname">topic.entry</code> - defined in <code class="filename">hornetq-jms.xml</code> </td></tr><tr><td> <code class="classname">DLQ</code> </td><td> <code class="classname">address-settings.dead-letter-address</code> </td></tr><tr><td> <code class="classname">ExpiryQueue</code> </td><td> <code class="classname">address-settings.expiry-address</code> </td></tr><tr><td> <code class="classname">RedeliveryDelay</code> </td><td> <code class="classname">address-settings.redelivery-delay</code> </td></tr><tr><td> <code class="classname">MaxDeliveryAttempts</code> </td><td> <code class="classname">address-settings.max-delivery-attempts</code> </td></tr><tr><td> <code class="classname">SecurityConfig</code> </td><td> <code class="classname">security-settings</code> </td></tr><tr><td> <code class="classname">FullSize</code> </td><td> <code class="classname">address-settings.max-size-bytes</code> - HornetQ paging attributes do not exactly match JBoss Messaging paging attributes. Refer to the appropriate chapter for details. </td></tr><tr><td> <code class="classname">PageSize</code> </td><td> <code class="classname">address-settings.page-size-bytes</code> - HornetQ paging attributes do not exactly match JBoss Messaging paging attributes. Refer to the appropriate chapter for details. </td></tr><tr><td> <code class="classname">DownCacheSize</code> </td><td> N/A </td></tr><tr><td> <code class="classname">CreatedProgrammatically</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">MessageCounterHistoryDayLimit</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">MessageCounters</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">AllMessageCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">DurableMessageCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">NonDurableMessageCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">AllSubscriptionsCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">DurableSubscriptionsCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">NonDurableSubscriptionsCount</code> </td><td> Refer to <code class="classname">org.hornetq.api.jms.management.TopicControl</code> to retrieve this attribute. </td></tr><tr><td> <code class="classname">MaxSize</code> </td><td> N/A </td></tr><tr><td> <code class="classname">Clustered</code> </td><td> N/A </td></tr><tr><td> <code class="classname">DropOldMessageOnRedeploy</code> </td><td> N/A </td></tr></tbody></table></div></div><div class="para">
			The table below shows how JBoss Messaging Bridge attributes map to HornetQ JMS Bridge attributes. HornetQ's JMS Bridge attributes are defined in its Bean configuration files. Refer to <a class="xref" href="jms-bridge.html">Chapter 31, <em>The JMS Bridge</em></a> for further details.
		</div><div class="table"><a id="idm139905856352672">
      ⁠</a><p class="title"><strong>Table 2.6. JMS Bridge Configuration Mappings</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="JMS Bridge Configuration Mappings"><colgroup><col width="33%" class="c1"/><col width="67%" class="c2"/></colgroup><thead><tr><th> JBoss Messaging Topic Attributes </th><th> HornetQ JMS Topic Attributes </th></tr></thead><tbody><tr><td> <code class="classname">SourceProviderLoader</code> </td><td> <code class="classname">SourceCFF</code> </td></tr><tr><td> <code class="classname">TargetProviderLoader</code> </td><td> <code class="classname">TargetCFF</code> </td></tr><tr><td> <code class="classname">SourceDestinationLookup</code> </td><td> <code class="classname">SourceDestinationFactory</code> </td></tr><tr><td> <code class="classname">TargetDestinationLookup</code> </td><td> <code class="classname">TargetDestinationFactory</code> </td></tr><tr><td> <code class="classname">SourceUsername</code> </td><td> Source user name parameter </td></tr><tr><td> <code class="classname">SourcePassword</code> </td><td> Source user password parameter </td></tr><tr><td> <code class="classname">TargetUsername</code> </td><td> Target user name parameter </td></tr><tr><td> <code class="classname">TargetPassword</code> </td><td> Target password parameter </td></tr><tr><td> <code class="classname">QualityOfServiceMode</code> </td><td> Quality of Service parameter </td></tr><tr><td> <code class="classname">Selector</code> </td><td> Selector parameter </td></tr><tr><td> <code class="classname">MaxBatchSize</code> </td><td> <code class="classname">Max batch size parameter</code> </td></tr><tr><td> <code class="classname">MaxBatchTime</code> </td><td> <code class="classname">Max batch time parameter</code> </td></tr><tr><td> <code class="classname">SubName</code> </td><td> <code class="classname">Subscription name parameter</code> </td></tr><tr><td> <code class="classname">ClientID</code> </td><td> <code class="classname">Client ID parameter</code> </td></tr><tr><td> <code class="classname">FailureRetryInterval</code> </td><td> <code class="classname">Failure retry interval parameter</code> </td></tr><tr><td> <code class="classname">MaxRetries</code> </td><td> <code class="classname">Max retry times parameter</code> </td></tr><tr><td> <code class="classname">AddMessageIDInHeader</code> </td><td> <code class="classname">Add Message ID in Header parameter</code> </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905810501584">
      ⁠</a>2.7. Other Configuration in JBoss Messaging</h1></div></div></div><div class="para">
			There are two kinds of configurations for JBoss Messaging dependent services, one for JBoss Remoting and the other for JGroups. Details of this configuration is outside the scope of this document. Consult the JBoss Remoting and JGroups documentation for these details.
		</div><div class="para">
			HornetQ has its own pluggable transportation architecture and clustering implementation, and currently uses Netty as its transport.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905840547968">
      ⁠</a>2.8. Migrating Existing Messages</h1></div></div></div><div class="para">
			Once you have migrated all JMS destinations to HornetQ, you can migrate existing messages. The JMS Bridge can be used to move existing messages from JBoss Messaging to HornetQ. Any prepared transactions should be completed with JBoss Messaging.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905840546320">
      ⁠</a>2.9. Applications that use management APIs</h1></div></div></div><div class="para">
			JBoss Messaging exposes its management API through MBean interfaces. HornetQ includes a number of different management APIs (see <a class="xref" href="management.html">Chapter 28, <em>Management</em></a> for details).
		</div><div class="para">
			While JBoss Messaging management APIs are accessed via JMX, HornetQ provides access to its management APIs through:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">JMX</span></dt><dd><div class="para">
						JMX is the standard method of managing Java applications.
					</div></dd><dt><span class="term">Core API</span></dt><dd><div class="para">
						Management operations are sent to the HornetQ server using Core messages.
					</div></dd><dt><span class="term">JMS API</span></dt><dd><div class="para">
						Management operations are sent to the HornetQ server using JMS messages
					</div></dd></dl></div><div class="para">
			The same functionality can be achieved through all three management methods.
		</div><div class="para">
			The following table lists the JBoss Messaging management Objects alongside their HornetQ JMX counterparts. For the other management APIs available in HornetQ, see <a class="xref" href="management.html">Chapter 28, <em>Management</em></a>.
		</div><div class="table"><a id="idm139905852123792">
      ⁠</a><p class="title"><strong>Table 2.7. JBoss Messaging and HornetQ Management Object API Mappings</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="JBoss Messaging and HornetQ Management Object API Mappings"><colgroup><col class="c1"/><col class="c2"/></colgroup><thead><tr><th> org.jboss.jms.server. Class </th><th> org.hornetq.api.jms.management. Class </th></tr></thead><tbody><tr><td> <code class="classname">ServerPeer</code> </td><td> <code class="classname">JMSServerControl</code> </td></tr><tr><td> <code class="classname">connectionfactory.ConnectionFactory</code> </td><td> <code class="classname">ConnectionFactoryControl</code> </td></tr><tr><td> <code class="classname">destination.QueueService</code> </td><td> <code class="classname">JMSQueueControl</code> </td></tr><tr><td> <code class="classname">destination.TopicService</code> </td><td> <code class="classname">TopicControl</code> </td></tr></tbody></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Some JBoss Messaging MBeans have no equivalent in HornetQ; for example, there is no HornetQ equivalent for <code class="classname">JDBCPersistenceManagerService</code> because HornetQ does not require a datasource as JBoss Messaging does.
			</div></div></div></div></div></body></html>