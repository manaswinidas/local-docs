<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 5. Using the Server</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="using-server">
      ⁠</a>Chapter 5. Using the Server</h1></div></div></div><div class="para">
		This chapter will familiarize you with how to use the HornetQ server.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="using-server.library.path">
      ⁠</a>5.1. Library Path</h1></div></div></div><div class="para">
			If you are using the Asynchronous IO Journal on Linux, you need to specify <code class="literal">java.library.path</code> as a property on your Java options. This is done automatically in the <code class="command">run.sh</code> script.
		</div><div class="para">
			If you do not specify <code class="literal">java.library.path</code> at your Java options then the JVM will use the environment variable <code class="literal">LD_LIBRARY_PATH</code>.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905861647984">
      ⁠</a>5.2. System properties</h1></div></div></div><div class="para">
			HornetQ can take a system property on the command line for configuring logging.
		</div><div class="para">
			For more information on configuring logging, refer to <a class="xref" href="logging.html">Chapter 41, <em>Logging</em></a>.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="using-server.configuration">
      ⁠</a>5.3. Configuration files</h1></div></div></div><div class="para">
			The configuration files are stored in a number of locations in the JBoss Enterprise Application Server directory structure. In all cases, you must change the file in each server profile you want to run because they are not shared between profiles.
		</div><div class="variablelist"><p class="title"><strong>Files located in /deploy/hornetq/</strong></p><dl class="variablelist"><dt><span class="term">hornetq-configuration.xml</span></dt><dd><div class="para">
						This is the main HornetQ configuration file. All the parameters in this file are described in <a class="xref" href="appe-configuration_index.html">Appendix A, <em>Configuration Reference</em></a>. Refer to <a class="xref" href="using-server.html#usingserver.mainconfig">Section 5.4, “The Main Configuration File”</a> for more information on this file.
					</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							The property <code class="literal">file-deployment-enabled</code> in the <code class="literal">hornetq-configuration.xml</code> configuration when set to false means that the other configuration files are not loaded. By default, this is set to true.
						</div></div></div></dd><dt><span class="term">hornetq-jboss-beans.xml</span></dt><dd><div class="para">
						This is the JBoss Microcontainer beans file which defines what beans the Microcontainer should create and what dependencies to enforce between them.
					</div></dd><dt><span class="term">hornetq-jms.xml</span></dt><dd><div class="para">
						The distribution configuration by default includes a server side JMS service which mainly deploys JMS Queues, Topics and Connection Factories from this file into JNDI. If you are not using JMS, or you do not need to deploy JMS objects on the server side, then you do not need this file. For more information on using JMS, refer to <a class="xref" href="using-jms.html">Chapter 6, <em>Using JMS</em></a>.
					</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Files located in /conf/props/</strong></p><dl class="variablelist"><dt><span class="term">hornetq-users.properties</span></dt><dd><div class="para">
						HornetQ ships with a security manager implementation that obtains user credentials from the <code class="literal">hornetq-users.properties</code> file. This file contains user and password information. For more information on security, refer to <a class="xref" href="security.html">Chapter 29, <em>Security</em></a>.
					</div></dd><dt><span class="term">hornetq-roles.properties</span></dt><dd><div class="para">
						This file contains user names defined in <code class="filename">hornetq-users.properties</code> with the roles they have permission to use. For more information on security, refer to <a class="xref" href="security.html">Chapter 29, <em>Security</em></a>.
					</div></dd></dl></div><div class="para">
			It is also possible to use system property substitution in all the configuration files in a server profile by replacing a value with the name of a system property. Here is an example of this with a connector configuration:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;connector</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"netty"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;factory-class&gt;</span>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/factory-class&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> key=</span><span xmlns="" class="perl_String">"host"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"${hornetq.remoting.netty.host:localhost}"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"String"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> key=</span><span xmlns="" class="perl_String">"port"</span><span xmlns="" class="perl_Others">  value=</span><span xmlns="" class="perl_String">"${hornetq.remoting.netty.port:5445}"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"Integer"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/connector&gt;</span></pre><div class="para">
			Here you can see two values have been replaced with system properties <code class="literal">hornetq.remoting.netty.host</code> and <code class="literal">hornetq.remoting.netty.port</code>. These values will be replaced by the value found in the system property if there is one. If not, they default back to localhost or 5445 respectively. It is also possible to not supply a default. That is, <code class="literal">${hornetq.remoting.netty.host}</code>, however the system property <span class="emphasis"><em>must</em></span> be supplied in that case.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="usingserver.mainconfig">
      ⁠</a>5.4. The Main Configuration File</h1></div></div></div><div class="para">
			The configuration for the HornetQ core server is contained in <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-configuration.xml</code>. This is what the <code class="classname">FileConfiguration</code> bean uses to configure the messaging server.
		</div><div class="para">
			There are many attributes which you can configure in HornetQ, however in most cases the defaults are sufficient for basic operation.
		</div><div class="para">
			Every attribute has a default setting, therefore a file with a single empty <span class="markup">&lt;configuration&gt;</span> element is a valid configuration file. Non-default configuration is explained throughout the manual, or you can refer to <a class="xref" href="appe-configuration_index.html">Appendix A, <em>Configuration Reference</em></a> to access all elements in a reference-style format.
		</div></div></div></body></html>