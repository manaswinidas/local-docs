<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 24. Scheduled Messages</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="scheduled-messages">
      ⁠</a>Chapter 24. Scheduled Messages</h1></div></div></div><div class="para">
		Scheduled messages differ from normal messages in that they will not be delivered until a specified time in the future.
	</div><div class="para">
		To do this, a special property is set on the message before sending it.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905846864528">
      ⁠</a>24.1. Scheduled Delivery Property</h1></div></div></div><div class="para">
			The property name used to identify a scheduled message is <code class="literal">"_HQ_SCHED_DELIVERY"</code> (or the constant <code class="literal">Message.HDR_SCHEDULED_DELIVERY_TIME</code>).
		</div><div class="para">
			The specified value must be a positive <code class="literal">long</code> corresponding to the time the message must be delivered (in milliseconds). An example of sending a scheduled message using the JMS API is as follows.
		</div><pre class="programlisting">
  TextMessage message = 
   session.createTextMessage("This is a scheduled message which will be delivered
     in 5 sec.");
  message.setLongProperty("_HQ_SCHED_DELIVERY", System.currentTimeMillis() + 5000);
  producer.send(message);

  ...
         
  // message will not be received immediately but 5 seconds later
  TextMessage messageReceived = (TextMessage) consumer.receive();
</pre><div class="para">
			Scheduled messages can also be sent using the core API, by setting the same property on the core message before sending.
		</div></div></div></body></html>