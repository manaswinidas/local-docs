<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 12. Filter Expressions</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="filter-expressions">
      ⁠</a>Chapter 12. Filter Expressions</h1></div></div></div><div class="para">
		HornetQ provides a powerful filter language based on a subset of the SQL 92 expression syntax.
	</div><div class="para">
		It is the same as the syntax used for JMS selectors, but the predefined identifiers are different. 
	</div><div class="para">
		Filter expressions are used in several places in HornetQ.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				Predefined Queues. When pre-defining a queue, either in <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-configuration.xml</code> or <code class="filename"><em class="replaceable">JBOSS_DIST</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-jms.xml</code> a filter expression can be defined for a queue. Only messages that match the filter expression will enter the queue.
			</div></li><li class="listitem"><div class="para">
				Core bridges can be defined with an optional filter expression, only matching messages will be bridged (see <a class="xref" href="core-bridges.html">Chapter 34, <em>Core Bridges</em></a>).
			</div></li><li class="listitem"><div class="para">
				Diverts can be defined with an optional filter expression. Only matching messages will be diverted (see <a class="xref" href="diverts.html">Chapter 33, <em>Diverting and Splitting Message Flows</em></a>).
			</div></li><li class="listitem"><div class="para">
				Filters are also used programmatically when creating consumers, queues and in several places as described in <a class="xref" href="management.html">Chapter 28, <em>Management</em></a>.
			</div></li></ul></div><div class="para">
		There are some differences between JMS selector expressions and HornetQ core filter expressions. Whereas JMS selector expressions operate on a JMS message, HornetQ core filter expressions operate on a core message.
	</div><div class="para">
		The following identifiers can be used in a core filter expression to refer to attributes of the core message in an expression:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">HQPriority</span></dt><dd><div class="para">
					To refer to the priority of a message. Message priorities are integers with valid values from <code class="literal">0 - 9</code>. <code class="literal">0</code> is the lowest priority and <code class="literal">9</code> is the highest. For example, <code class="literal">HQPriority = 3 and department = 'payroll'</code>. This refers to a message with a priority of three and a department of 'payroll'.
				</div></dd><dt><span class="term">HQExpiration</span></dt><dd><div class="para">
					To refer to the expiration time of a message. The value is a long integer.
				</div></dd><dt><span class="term">HQDurable</span></dt><dd><div class="para">
					To refer to whether a message is durable or not. The value is a string with valid values: <code class="literal">DURABLE</code> or <code class="literal">NON_DURABLE</code>.
				</div></dd><dt><span class="term">HQTimestamp</span></dt><dd><div class="para">
					The time stamp of when the message was created. The value is a long integer.
				</div></dd><dt><span class="term">HQSize</span></dt><dd><div class="para">
					The size of a message in bytes. The value is an integer.
				</div></dd></dl></div><div class="para">
		Any other identifiers used in core filter expressions will be assumed to be properties of the message.
	</div></div></body></html>