<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 42. Intercepting Operations</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Intercepting_Operations">
      ⁠</a>Chapter 42. Intercepting Operations</h1></div></div></div><div class="para">
		HornetQ supports <span class="emphasis"><em>interceptors</em></span> to intercept packets entering the server. Any supplied interceptors are called for any packet entering the server. This allows custom code to be executed, such as for auditing packets or filtering. Interceptors can change the packets they intercept.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905849812960">
      ⁠</a>42.1. Implementing The Interceptors</h1></div></div></div><div class="para">
			An interceptor must implement the <code class="literal">Interceptor interface</code>:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">hornetq</span>.<span xmlns="" class="perl_Function">api</span>.<span xmlns="" class="perl_Function">core</span>.<span xmlns="" class="perl_Function">interceptor</span>;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">interface</span> Interceptor
<span xmlns="" class="line">​</span>{   
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">intercept</span>(Packet packet, RemotingConnection connection) 
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">throws</span> HornetQException;
<span xmlns="" class="line">​</span>}
</pre><div class="para">
			The returned boolean value is important:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					if <code class="literal">true</code> is returned, the process continues normally
				</div></li><li class="listitem"><div class="para">
					if <code class="literal">false</code> is returned, the process is aborted, no other interceptors will be called and the packet will not be handled by the server at all.
				</div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905806873600">
      ⁠</a>42.2. Configuring The Interceptors</h1></div></div></div><div class="para">
			The interceptors are configured in <code class="filename"><em class="replaceable">&lt;JBOSS_HOME&gt;</em>/jboss-as/server/<em class="replaceable">&lt;PROFILE&gt;</em>/deploy/hornetq/hornetq-configuration.xml</code>:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;remoting-interceptors&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;class-name&gt;</span>org.hornetq.jms.example.LoginInterceptor<span xmlns="" class="perl_Keyword">&lt;/class-name&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;class-name&gt;</span>org.hornetq.jms.example.AdditionalPropertyInterceptor<span xmlns="" class="perl_Keyword">&lt;/class-name&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/remoting-interceptors&gt;</span></pre><div class="para">
			The interceptors classes (and their dependencies) must be added to the server classpath to be properly instantiated and called.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139905851200032">
      ⁠</a>42.3. Interceptors on the Client Side</h1></div></div></div><div class="para">
			The interceptors can also be run on the client side to intercept packets <span class="emphasis"><em>sent by the server</em></span> by adding the interceptor to the <code class="code">ClientSessionFactory</code> with the <code class="code">addInterceptor()</code> method.
		</div><div class="para">
			The interceptors classes (and their dependencies) must be added to the client classpath to be properly instantiated and called from the client side.
		</div></div></div></body></html>