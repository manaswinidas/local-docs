<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 8. Negotiation Toolkit</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chapt-Negotiation_Toolkit">
      ⁠</a>Chapter 8. Negotiation Toolkit</h1></div></div></div><div class="para">
		The Negotiation Toolkit is a web application for testing of the SPNEGO configuration so you do not need to test your configuration with your application. The <code class="filename">jboss-negotiation-toolkit.war</code> file is available at <a href=" https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-toolkit/2.0.3.SP1/jboss-negotiation-toolkit-2.0.3.SP1.war"> https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-toolkit/2.0.3.SP1/jboss-negotiation-toolkit-2.0.3.SP1.war</a>. Copy the file to the <code class="filename"><em class="replaceable">$JBOSSHOME</em>/server/<em class="replaceable">$PROFILE</em>/deploy</code> directory to have the Negotiation Toolkit deployed.
	</div><div class="para">
		The toolkit assumes that the authenticator has the name <code class="literal">SPNEGO</code> and that the application security domain is named <code class="literal">SPNEGO</code>. If either of these have other names, deploy the web application as an exploded archive and modify <code class="filename">web.xml</code> and <code class="filename">jboss-web.xml</code>:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				In the <code class="filename">WEB-INF/web.xml</code> file, update the authenticator key in <code class="literal">auth-method</code> (<code class="code">&lt;auth-method&gt;SPNEGO&lt;/auth-method&gt;</code>.
			</div></li><li class="listitem"><div class="para">
				In the <code class="filename">WEB-INF/jboss-web.xml</code> file, update the name of the security domain in <code class="literal">security-domain</code> (<code class="code">&lt;security-domain&gt;SPNEGO&lt;/security-domain&gt;</code>.
			</div></li></ul></div><div class="para">
		Once deployed, access the Negotiation Toolkit web application at <a href="http://testserver.kerberos.jboss.org:8080/jboss-negotiation-toolkit">http://testserver.kerberos.jboss.org:8080/jboss-negotiation-toolkit</a>
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Make sure you have set the DNS entry as described in <a class="xref" href="chap-Web_Browsers.html#DNS">Prerequisite: DNS Setting</a> in <a class="xref" href="Configuration.html#applicationSecurityDomain">Section 2.3, “Defining Application Security Domain”</a>.
		</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140585704520320">
      ⁠</a>8.1. Front Page</h1></div></div></div><div class="para">
			The main page for the Negotiation Toolkit contains links to the toolkit utilities, which test the mechanisms of SPNEGO authentication. It is recommended that you follow the links from top to bottom.
		</div><div class="figure"><a id="negotiation-toolkit-front">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/negotiation-toolkit.png" alt="Negotiation Toolkit Front Page"/></div></div><p class="title"><strong>Figure 8.1. Negotiation Toolkit Front Page</strong></p></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Make sure you have completed the installation before you use the Negotiation Toolkit as the toolkit tests involve communication with the application server, web browser, and the KDC.
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-BasicNegotiation">
      ⁠</a>8.2. Basic Negotiation</h1></div></div></div><div class="para">
			The <span class="application"><strong>Basic Negotiation</strong></span> servlet tests if the web browser trusts the application server: it prompts the web browser to negotiation and checks if the application server received a negotiation token.
		</div><div class="para">
			If the web browser failed to send a negotiation token, the servlet displays a web page similar to <a class="xref" href="chapt-Negotiation_Toolkit.html#nt-basic-failed">Figure 8.2, “Basic Negotiation Failure”</a>
		</div><div class="figure"><a id="nt-basic-failed">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/nt-basic-failed.png" alt="Basic Negotiation Failure"/></div></div><p class="title"><strong>Figure 8.2. Basic Negotiation Failure</strong></p></div><div class="para">
			If the web browser successfully sends a negotiation token, the servlet displays a web page similar to <a class="xref" href="chapt-Negotiation_Toolkit.html#nt-basic-success">Figure 8.3, “Basic Negotiation Success”</a>
		</div><div class="figure"><a id="nt-basic-success">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/nt-basic-success.png" alt="Basic Negotiation Success"/></div></div><p class="title"><strong>Figure 8.3. Basic Negotiation Success</strong></p></div><div class="para">
			The web page shows some of the information contained within the negotiation token.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140585714084960">
      ⁠</a>8.3. Security Domain Test</h1></div></div></div><div class="para">
			The <span class="application"><strong>Security Domain Test</strong></span> tests if the application server can authenticate against the KDC through its security domain.
		</div><div class="para">
			First, the servlet prompts you to enter the name of the security domain (we have been using the domain <code class="literal">host</code> throughout this guide; the page is shown in <a class="xref" href="chapt-Negotiation_Toolkit.html#nt-domain-entry">Figure 8.4, “Security Domain Test”</a>).
		</div><div class="figure"><a id="nt-domain-entry">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/nt-domain-entry.png" alt="Security Domain Test"/></div></div><p class="title"><strong>Figure 8.4. Security Domain Test</strong></p></div><div class="para">
			If the servlet establishes the authentication successfully, it displays a page similar to <a class="xref" href="chapt-Negotiation_Toolkit.html#nt-domain-authenticated">Figure 8.5, “Security Domain Test - Authenticated”</a>.
		</div><div class="figure"><a id="nt-domain-authenticated">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/nt-domain-authenticated.png" alt="Security Domain Test - Authenticated"/></div></div><p class="title"><strong>Figure 8.5. Security Domain Test - Authenticated</strong></p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140585652120448">
      ⁠</a>8.4. Secured</h1></div></div></div><div class="para">
			The <span class="application"><strong>Secured</strong></span> servlet is configured to require full SPNEGO authentication. If the servlet returns a page similar to <a class="xref" href="chapt-Negotiation_Toolkit.html#nt-secured">Figure 8.6, “Secured”</a>, its run was successful and your SPNEGO authentication is configured correctly.
		</div><div class="figure"><a id="nt-secured">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><img src="images/nt-secured.png" alt="Secured"/></div></div><p class="title"><strong>Figure 8.6. Secured</strong></p></div></div></div></body></html>