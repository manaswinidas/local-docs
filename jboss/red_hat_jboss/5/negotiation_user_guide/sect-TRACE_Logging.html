<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. TRACE Logging</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="sect-TRACE_Logging">
      ⁠</a>Chapter 3. TRACE Logging</h1></div></div></div><div class="para">
		To enable logging for JBoss Security and so also for the authenticator of JBoss Negotiation, do the following:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step"><div class="para">
				Open the <code class="filename"><em class="replaceable">$JBOSS_HOME</em>/server/<em class="replaceable">$PROFILE</em>/conf/jboss-log4j.xml</code>
			</div></li><li class="step"><div class="para">
				Add the following to enable full TRACE logging for <code class="literal">org.jboss.security</code>:
			</div><pre class="programlisting">
&lt;category name="org.jboss.security"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;</pre></li><li class="step"><div class="para">
				Optionally allow additional logging for the <code class="literal">com.sun.security.auth.module.Krb5LoginModule</code> login module. To do so, set the <code class="literal">debug</code> option to <code class="literal">true</code>:
			</div><pre class="programlisting">
&lt;module-option name="debug"&gt;true&lt;/module-option&gt;</pre></li><li class="step"><div class="para">
				Set the system property <code class="code">-Dsun.security.krb5.debug=true</code> to get verbose output of the entire GSSAPI negotiation process.
			</div></li></ol></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140585705765280">
      ⁠</a>3.1. Configuring Message Tracing</h1></div></div></div><div class="para">
			You can log the exchanged messages selectively at TRACE level. Both, the Request and Response messages, can be logged and that either as Hex or as Base64 or both.
		</div><div class="para">
			The base category for message tracing is <code class="code">org.jboss.security.negotiation.MessageTrace</code>. If you enable TRACE logging for this category, all request and response messages are logged at the TRACE level in both Hex and in Base64 encoding.
		</div><div class="example"><a id="ex-default_tracing">
      ⁠</a><p class="title"><strong>Example 3.1. Configuration for tracking all messages</strong></p><div class="example-contents"><pre class="programlisting">
&lt;category name="org.jboss.security.negotiation.MessageTrace"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;</pre></div></div><div class="para">
			To reduce the logging to either just request or just response messages, append <code class="code">.Request</code> or <code class="code">.Response</code> to the category value.
		</div><div class="example"><a id="ex-tracking_request">
      ⁠</a><p class="title"><strong>Example 3.2. Configuration for tracking only request messages (messages are logged in both Hex and Base64)</strong></p><div class="example-contents"><pre class="programlisting">
&lt;category name="org.jboss.security.negotiation.MessageTrace.Request"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;</pre></div></div><div class="example"><a id="ex-tracking_response">
      ⁠</a><p class="title"><strong>Example 3.3. Configuration for tracking only response messages (messages are logged in both Hex and Base 64)</strong></p><div class="example-contents"><pre class="programlisting">
&lt;category name="org.jboss.security.negotiation.MessageTrace.Response"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;</pre></div></div><div class="para">
			To have messages logged in a particular encoding, append <code class="code">.Hex</code> or <code class="code">.Base64</code> to the category value.
		</div><div class="example"><a id="ex-tracking_in_encoding">
      ⁠</a><p class="title"><strong>Example 3.4. Message tracking with defined encoding</strong></p><div class="example-contents"><pre class="programlisting">
&lt;category name="org.jboss.security.negotiation.MessageTrace.Request.Hex"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;

&lt;category name="org.jboss.security.negotiation.MessageTrace.Request.Base64"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;

&lt;category name="org.jboss.security.negotiation.MessageTrace.Response.Hex"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;

&lt;category name="org.jboss.security.negotiation.MessageTrace.Response.Base64"&gt;
  &lt;priority value="TRACE"/&gt;
&lt;/category&gt;</pre></div></div></div></div></body></html>