<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. Passing Authentication Properties to the Server</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Running_JBoss_AS">
      ⁠</a>Chapter 4. Passing Authentication Properties to the Server</h1></div></div></div><div class="para">
		After you have set up JBoss Negotiation, you need to make sure to pass the Kerberos realm properties to JBoss Application Server:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">java.security.krb5.realm</span></dt><dd><div class="para">
					the Kerberos realm the server authenticates against
				</div></dd><dt><span class="term">java.security.krb5.kdc</span></dt><dd><div class="para">
					KDC hostname
				</div></dd></dl></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Skip this step if you are running your JBoss installation on a host which is already configured to authenticate against a KDC.
		</div></div></div><div class="para">
		For further information about the properties, refer to <a href="http://download.oracle.com/javase/6/docs/technotes/guides/security/jgss/jgss-features.html">Java Generic Security Services (Java GSS) and Kerberos</a>.
	</div><div class="para">
		You can pass the properties to the server either from the command line or add them to the server properties.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140585651429248">
      ⁠</a>4.1. Passing the Properties from the Command Line</h1></div></div></div><div class="para">
			To send the properties to the server from the command line, substitute <em class="replaceable">KERBEROS.JBOSS.ORG</em> with your realm and issue the <code class="literal">run</code> command with the respective Java properties:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					On Red Hat Enterprise Linux, run the following command:
				</div><pre class="programlisting">
./run.sh -Djava.security.krb5.realm=<em class="replaceable">KERBEROS.JBOSS.ORG</em> -Djava.security.krb5.kdc=kerberos.security.jboss.org
</pre></li><li class="listitem"><div class="para">
					On Windows, run the following command:
				</div><pre class="programlisting"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span> run.bat Djava.security.krb5.<span xmlns="" class="perl_Others">realm=</span>KERBEROS.JBOSS.ORG -Djava.security.krb5.<span xmlns="" class="perl_Others">kdc=</span>kerberos.security.jboss.org
</pre></li></ul></div><div class="para">
			These properties are valid only until the server shutdown and you need to pass them to the server on every start.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140585680505760">
      ⁠</a>4.2. Adding the Properties to the System Properties</h1></div></div></div><div class="para">
			To make the properties permanent and have an application server start always with the SPNEGO mechanism, define the properties in the <code class="filename"><em class="replaceable">$JBOSS_HOME</em>/server/<em class="replaceable">$PROFILE</em>/deploy/properties-service.xml</code> descriptor. Make sure the properties are loaded before the first authentication attempt (JBoss does not allow any incoming HTTP connections before the server has started up fully).
		</div><div class="para">
			Open the descriptor and add the following attribute to the <code class="literal">jboss:type=Service,name=SystemProperties</code> MBean:
		</div><pre class="programlisting">
&lt;attribute name="Properties"&gt;
 java.security.krb5.kdc=kerberos.security.jboss.org
 java.security.krb5.realm=KERBEROS.JBOSS.ORG
&lt;/attribute&gt;
</pre><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140585711455392">
      ⁠</a>4.2.1. Multiple KDCs</h2></div></div></div><div class="para">
				If you are using one or more slave KDCs in addition to your master KDC, list the KDCs in a colon-separated list after the java.security.krb5.kdc system property. The system will use the provided alternative KDC if the master KDC is not available.
			</div><div class="example"><a id="idm140585711453872">
      ⁠</a><p class="title"><strong>Example 4.1. Running a server with multiple KDCs</strong></p><div class="example-contents"><pre class="programlisting">
./run.sh -Djava.security.krb5.realm=KERBEROS.JBOSS.ORG:SLAVE_KDC.JBOSS.ORG -Djava.security.krb5.kdc=kerberos.security.jboss.org
</pre></div></div></div></div></div></body></html>