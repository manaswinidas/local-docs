<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 5. Basic O/R Mapping</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="mapping">
      ⁠</a>Chapter 5. Basic O/R Mapping</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-declaration">
      ⁠</a>5.1. Mapping declaration</h1></div></div></div><div class="para">
			Object/relational mappings are usually defined in an XML document. The mapping document is designed to be readable and hand-editable. The mapping language is Java-centric, meaning that mappings are constructed around persistent class declarations and not table declarations.
		</div><div class="para">
			Please note that even though many Hibernate users choose to write the XML by hand, a number of tools exist to generate the mapping document. These include XDoclet, Middlegen and AndroMDA.
		</div><div class="para">
			Here is an example mapping:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_DataType">&lt;!DOCTYPE </span>hibernate-mapping PUBLIC
<span xmlns="" class="line">​</span>      "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
<span xmlns="" class="line">​</span>          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"<span xmlns="" class="perl_DataType">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;hibernate-mapping</span><span xmlns="" class="perl_Others"> package=</span><span xmlns="" class="perl_String">"eg"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Cat"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            table=</span><span xmlns="" class="perl_String">"cats"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            discriminator-value=</span><span xmlns="" class="perl_String">"C"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"native"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/id&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;discriminator</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"subclass"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                     type=</span><span xmlns="" class="perl_String">"character"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"weight"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"birthdate"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    type=</span><span xmlns="" class="perl_String">"date"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    not-null=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"color"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    type=</span><span xmlns="" class="perl_String">"eg.types.ColorUserType"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    not-null=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sex"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    not-null=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"litterId"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    column=</span><span xmlns="" class="perl_String">"litterId"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"mother"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    column=</span><span xmlns="" class="perl_String">"mother_id"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;set</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"kittens"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    inverse=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    order-by=</span><span xmlns="" class="perl_String">"litter_id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"mother_id"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;one-to-many</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"Cat"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/set&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;subclass</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DomesticCat"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                    discriminator-value=</span><span xmlns="" class="perl_String">"D"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"name"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                            type=</span><span xmlns="" class="perl_String">"string"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/subclass&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Dog"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Comment">&lt;!-- mapping for Dog could go here --&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/hibernate-mapping&gt;</span></pre><div class="para">
			We will now discuss the content of the mapping document. We will only describe, however, the document elements and attributes that are used by Hibernate at runtime. The mapping document also contains some extra optional attributes and elements that affect the database schemas exported by the schema export tool (for example, the <code class="literal"> not-null</code> attribute).
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-doctype">
      ⁠</a>5.1.1. Doctype</h2></div></div></div><div class="para">
				All XML mappings should declare the doctype shown. The actual DTD can be found at the URL above, in the directory <code class="literal">hibernate-x.x.x/src/org/hibernate</code>, or in <code class="literal">hibernate3.jar</code>. Hibernate will always look for the DTD in its classpath first. If you experience lookups of the DTD using an Internet connection, check the DTD declaration against the contents of your classpath.
			</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-entity-resolution">
      ⁠</a>5.1.1.1. EntityResolver</h3></div></div></div><div class="para">
					Hibernate will first attempt to resolve DTDs in its classpath. It does this is by registering a custom <code class="literal">org.xml.sax.EntityResolver</code> implementation with the SAXReader it uses to read in the xml files. This custom <code class="literal">EntityResolver</code> recognizes two different systemId namespaces:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							a <code class="literal">hibernate namespace</code> is recognized whenever the resolver encounters a systemId starting with <code class="literal">http://hibernate.sourceforge.net/</code>. The resolver attempts to resolve these entities via the classloader which loaded the Hibernate classes.
						</div></li><li class="listitem"><div class="para">
							a <code class="literal">user namespace</code> is recognized whenever the resolver encounters a systemId using a <code class="literal">classpath://</code> URL protocol. The resolver will attempt to resolve these entities via (1) the current thread context classloader and (2) the classloader which loaded the Hibernate classes.
						</div></li></ul></div><div class="para">
					The following is an example of utilizing user namespacing:
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_DataType">&lt;!DOCTYPE </span>hibernate-mapping PUBLIC
<span xmlns="" class="line">​</span>        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
<span xmlns="" class="line">​</span>        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" <span xmlns="" class="perl_DataType">[</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">&lt;!ENTITY</span> types SYSTEM <span xmlns="" class="perl_String">"classpath://your/domain/types.xml"</span><span xmlns="" class="perl_DataType">&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_DataType">]&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;hibernate-mapping</span><span xmlns="" class="perl_Others"> package=</span><span xmlns="" class="perl_String">"your.domain"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"MyEntity"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"my-custom-id-type"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            ...
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/id&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DecVal">&amp;types;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/hibernate-mapping&gt;</span></pre><div class="para">
					Where <code class="literal">types.xml</code> is a resource in the <code class="literal">your.domain</code> package and contains a custom <a class="xref" href="mapping.html#mapping-types-custom">Section 5.2.3, “Custom value types”</a>.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-mapping">
      ⁠</a>5.1.2. Hibernate-mapping</h2></div></div></div><div class="para">
				This element has several optional attributes. The <code class="literal">schema</code> and <code class="literal">catalog</code> attributes specify that tables referred to in this mapping belong to the named schema and/or catalog. If they are specified, tablenames will be qualified by the given schema and catalog names. If they are missing, tablenames will be unqualified. The <code class="literal">default-cascade</code> attribute specifies what cascade style should be assumed for properties and collections that do not specify a <code class="literal">cascade</code> attribute. By default, the <code class="literal">auto-import</code> attribute allows you to use unqualified class names in the query language.
			</div><div class="programlistingco"><pre class="programlisting">&lt;hibernate-mapping
         schema="schemaName"                           <img class="callout" alt="1" src="Common_Content/images/1.png"/>
         catalog="catalogName"                         <img class="callout" alt="2" src="Common_Content/images/2.png"/>
         default-cascade="cascade_style"               <img class="callout" alt="3" src="Common_Content/images/3.png"/>
         default-access="field|property|ClassName"     <img class="callout" alt="4" src="Common_Content/images/4.png"/>
         default-lazy="true|false"                     <img class="callout" alt="5" src="Common_Content/images/5.png"/>
         auto-import="true|false"                      <img class="callout" alt="6" src="Common_Content/images/6.png"/>
         package="package.name"                        <img class="callout" alt="7" src="Common_Content/images/7.png"/>
 /&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">schema</code> (optional): the name of a database schema.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">catalog</code> (optional): the name of a database catalog.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">default-cascade</code> (optional - defaults to <code class="literal">none</code>): a default cascade style.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">default-access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate should use for accessing all properties. It can be a custom implementation of <code class="literal">PropertyAccessor</code>.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">default-lazy</code> (optional - defaults to <code class="literal">true</code>): the default value for unspecified <code class="literal">lazy</code> attributes of class and collection mappings.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">auto-import</code> (optional - defaults to <code class="literal">true</code>): specifies whether we can use unqualified class names of classes in this mapping in the query language.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">package</code> (optional): specifies a package prefix to use for unqualified class names in the mapping document.
						</div></td></tr></table></div></div><div class="para">
				If you have two persistent classes with the same unqualified name, you should set <code class="literal">auto-import="false"</code>. An exception will result if you attempt to assign two classes to the same "imported" name.
			</div><div class="para">
				The <code class="literal">hibernate-mapping</code> element allows you to nest several persistent <code class="literal">&lt;class&gt;</code> mappings, as shown above. It is, however, good practice (and expected by some tools) to map only a single persistent class, or a single class hierarchy, in one mapping file and name it after the persistent superclass. For example, <code class="literal">Cat.hbm.xml</code>, <code class="literal">Dog.hbm.xml</code>, or if using inheritance, <code class="literal">Animal.hbm.xml</code>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-class">
      ⁠</a>5.1.3. Class</h2></div></div></div><div class="para">
				You can declare a persistent class using the <code class="literal">class</code> element. For example:
			</div><div class="programlistingco"><pre class="programlisting">&lt;class
        name="ClassName"                               <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        table="tableName"                              <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        discriminator-value="discriminator_value"      <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        mutable="true|false"                           <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        schema="owner"                                 <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        catalog="catalog"                              <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        proxy="ProxyInterface"                         <img class="callout" alt="7" src="Common_Content/images/7.png"/>
        dynamic-update="true|false"                    <img class="callout" alt="8" src="Common_Content/images/8.png"/>
        dynamic-insert="true|false"                    <img class="callout" alt="9" src="Common_Content/images/9.png"/>
        select-before-update="true|false"              <img class="callout" alt="10" src="Common_Content/images/10.png"/>
        polymorphism="implicit|explicit"               <img class="callout" alt="11" src="Common_Content/images/11.png"/>
        where="arbitrary sql where condition"          <img class="callout" alt="12" src="Common_Content/images/12.png"/>
        persister="PersisterClass"                     <img class="callout" alt="13" src="Common_Content/images/13.png"/>
        batch-size="N"                                 <img class="callout" alt="14" src="Common_Content/images/14.png"/>
        optimistic-lock="none|version|dirty|all"       <img class="callout" alt="15" src="Common_Content/images/15.png"/>
        lazy="true|false"                              <img class="callout" alt="16" src="Common_Content/images/16.png"/>
        entity-name="EntityName"                       <img class="callout" alt="17" src="Common_Content/images/17.png"/>
        check="arbitrary sql check condition"          <img class="callout" alt="18" src="Common_Content/images/18.png"/>
        rowid="rowid"                                  <img class="callout" alt="19" src="Common_Content/images/19.png"/>
        subselect="SQL expression"                     <img class="callout" alt="20" src="Common_Content/images/20.png"/>
        abstract="true|false"                          <img class="callout" alt="21" src="Common_Content/images/21.png"/>
        node="element-name"
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code> (optional): the fully qualified Java class name of the persistent class or interface. If this attribute is missing, it is assumed that the mapping is for a non-POJO entity.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">table</code> (optional - defaults to the unqualified class name): the name of its database table.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">discriminator-value</code> (optional - defaults to the class name): a value that distinguishes individual subclasses that is used for polymorphic behavior. Acceptable values include <code class="literal">null</code> and <code class="literal">not null</code>.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">mutable</code> (optional - defaults to <code class="literal">true</code>): specifies that instances of the class are (not) mutable.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">schema</code> (optional): overrides the schema name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">catalog</code> (optional): overrides the catalog name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">proxy</code> (optional): specifies an interface to use for lazy initializing proxies. You can specify the name of the class itself.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/8.png" alt="8"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">dynamic-update</code> (optional - defaults to <code class="literal">false</code>): specifies that <code class="literal">UPDATE</code> SQL should be generated at runtime and can contain only those columns whose values have changed.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/9.png" alt="9"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">dynamic-insert</code> (optional - defaults to <code class="literal">false</code>): specifies that <code class="literal">INSERT</code> SQL should be generated at runtime and contain only the columns whose values are not null.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/10.png" alt="10"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">select-before-update</code> (optional - defaults to <code class="literal">false</code>): specifies that Hibernate should <span class="emphasis"><em>never</em></span> perform an SQL <code class="literal">UPDATE</code> unless it is certain that an object is actually modified. Only when a transient object has been associated with a new session using <code class="literal">update()</code>, will Hibernate perform an extra SQL <code class="literal">SELECT</code> to determine if an <code class="literal">UPDATE</code> is actually required.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/11.png" alt="11"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">polymorphism</code> (optional - defaults to <code class="literal">implicit</code>): determines whether implicit or explicit query polymorphism is used.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/12.png" alt="12"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">where</code> (optional): specifies an arbitrary SQL <code class="literal">WHERE</code> condition to be used when retrieving objects of this class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/13.png" alt="13"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">persister</code> (optional): specifies a custom <code class="literal">ClassPersister</code>.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/14.png" alt="14"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">batch-size</code> (optional - defaults to <code class="literal">1</code>): specifies a "batch size" for fetching instances of this class by identifier.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/15.png" alt="15"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">version</code>): determines the optimistic locking strategy.
						</div></td></tr><tr><td valign="top" align="left"><p>(16)</p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional): lazy fetching can be disabled by setting <code class="literal">lazy="false"</code>.
						</div></td></tr><tr><td valign="top" align="left"><p>(17)</p></td><td valign="top" align="left"><div class="para">
							<code class="literal">entity-name</code> (optional - defaults to the class name): Hibernate3 allows a class to be mapped multiple times, potentially to different tables. It also allows entity mappings that are represented by Maps or XML at the Java level. In these cases, you should provide an explicit arbitrary name for the entity. See <a class="xref" href="persistent-classes.html#persistent-classes-dynamicmodels">Section 4.4, “Dynamic models”</a> and <a class="xref" href="xml.html">Chapter 18, <em>XML Mapping</em></a> for more information.
						</div></td></tr><tr><td valign="top" align="left"><p>(18)</p></td><td valign="top" align="left"><div class="para">
							<code class="literal">check</code> (optional): an SQL expression used to generate a multi-row <span class="emphasis"><em>check</em></span> constraint for automatic schema generation.
						</div></td></tr><tr><td valign="top" align="left"><p>(19)</p></td><td valign="top" align="left"><div class="para">
							<code class="literal">rowid</code> (optional): Hibernate can use ROWIDs on databases. On Oracle, for example, Hibernate can use the <code class="literal">rowid</code> extra column for fast updates once this option has been set to <code class="literal">rowid</code>. A ROWID is an implementation detail and represents the physical location of a stored tuple.
						</div></td></tr><tr><td valign="top" align="left"><p>(20)</p></td><td valign="top" align="left"><div class="para">
							<code class="literal">subselect</code> (optional): maps an immutable and read-only entity to a database subselect. This is useful if you want to have a view instead of a base table. See below for more information.
						</div></td></tr><tr><td valign="top" align="left"><p>(21)</p></td><td valign="top" align="left"><div class="para">
							<code class="literal">abstract</code> (optional): is used to mark abstract superclasses in <code class="literal">&lt;union-subclass&gt;</code> hierarchies.
						</div></td></tr></table></div></div><div class="para">
				It is acceptable for the named persistent class to be an interface. You can declare implementing classes of that interface using the <code class="literal">&lt;subclass&gt;</code> element. You can persist any <span class="emphasis"><em>static</em></span> inner class. Specify the class name using the standard form i.e. <code class="literal">e.g.Foo$Bar</code>.
			</div><div class="para">
				Immutable classes, <code class="literal">mutable="false"</code>, cannot be updated or deleted by the application. This allows Hibernate to make some minor performance optimizations.
			</div><div class="para">
				The optional <code class="literal">proxy</code> attribute enables lazy initialization of persistent instances of the class. Hibernate will initially return CGLIB proxies that implement the named interface. The persistent object will load when a method of the proxy is invoked. See "Initializing collections and proxies" below.
			</div><div class="para">
				<span class="emphasis"><em>Implicit</em></span> polymorphism means that instances of the class will be returned by a query that names any superclass or implemented interface or class, and that instances of any subclass of the class will be returned by a query that names the class itself. <span class="emphasis"><em>Explicit</em></span> polymorphism means that class instances will be returned only by queries that explicitly name that class. Queries that name the class will return only instances of subclasses mapped inside this <code class="literal">&lt;class&gt;</code> declaration as a <code class="literal">&lt;subclass&gt;</code> or <code class="literal">&lt;joined-subclass&gt;</code>. For most purposes, the default <code class="literal">polymorphism="implicit"</code> is appropriate. Explicit polymorphism is useful when two different classes are mapped to the same table This allows a "lightweight" class that contains a subset of the table columns.
			</div><div class="para">
				The <code class="literal">persister</code> attribute lets you customize the persistence strategy used for the class. You can, for example, specify your own subclass of <code class="literal">org.hibernate.persister.EntityPersister</code>, or you can even provide a completely new implementation of the interface <code class="literal">org.hibernate.persister.ClassPersister</code> that implements, for example, persistence via stored procedure calls, serialization to flat files or LDAP. See <code class="literal">org.hibernate.test.CustomPersister</code> for a simple example of "persistence" to a <code class="literal">Hashtable</code>.
			</div><div class="para">
				The <code class="literal">dynamic-update</code> and <code class="literal">dynamic-insert</code> settings are not inherited by subclasses, so they can also be specified on the <code class="literal">&lt;subclass&gt;</code> or <code class="literal">&lt;joined-subclass&gt;</code> elements. Although these settings can increase performance in some cases, they can actually decrease performance in others.
			</div><div class="para">
				Use of <code class="literal">select-before-update</code> will usually decrease performance. It is useful to prevent a database update trigger being called unnecessarily if you reattach a graph of detached instances to a <code class="literal">Session</code>.
			</div><div class="para">
				If you enable <code class="literal">dynamic-update</code>, you will have a choice of optimistic locking strategies:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">version</code>: check the version/timestamp columns
					</div></li><li class="listitem"><div class="para">
						<code class="literal">all</code>: check all columns
					</div></li><li class="listitem"><div class="para">
						<code class="literal">dirty</code>: check the changed columns, allowing some concurrent updates
					</div></li><li class="listitem"><div class="para">
						<code class="literal">none</code>: do not use optimistic locking
					</div></li></ul></div><div class="para">
				It is <span class="emphasis"><em>strongly</em></span> recommended that you use version/timestamp columns for optimistic locking with Hibernate. This strategy optimizes performance and correctly handles modifications made to detached instances (i.e. when <code class="literal">Session.merge()</code> is used).
			</div><div class="para">
				There is no difference between a view and a base table for a Hibernate mapping. This is transparent at the database level, although some DBMS do not support views properly, especially with updates. Sometimes you want to use a view, but you cannot create one in the database (i.e. with a legacy schema). In this case, you can map an immutable and read-only entity to a given SQL subselect expression:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Summary"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;subselect&gt;</span>
<span xmlns="" class="line">​</span>        select item.name, max(bid.amount), count(*)
<span xmlns="" class="line">​</span>        from item
<span xmlns="" class="line">​</span>        join bid on bid.item_id = item.id
<span xmlns="" class="line">​</span>        group by item.name
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/subselect&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;synchronize</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"item"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;synchronize</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"bid"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"name"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre><div class="para">
				Declare the tables to synchronize this entity with, ensuring that auto-flush happens correctly and that queries against the derived entity do not return stale data. The <code class="literal">&lt;subselect&gt;</code> is available both as an attribute and a nested mapping element.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-id">
      ⁠</a>5.1.4. id</h2></div></div></div><div class="para">
				Mapped classes <span class="emphasis"><em>must</em></span> declare the primary key column of the database table. Most classes will also have a JavaBeans-style property holding the unique identifier of an instance. The <code class="literal">&lt;id&gt;</code> element defines the mapping from that property to the primary key column.
			</div><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;id</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        name=</span><span xmlns="" class="perl_String">"propertyName"</span>                                          <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        type=</span><span xmlns="" class="perl_String">"typename"</span>                                              <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        column=</span><span xmlns="" class="perl_String">"column_name"</span>                                         <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        unsaved-value=</span><span xmlns="" class="perl_String">"null|any|none|undefined|id_value"</span>             <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        access=</span><span xmlns="" class="perl_String">"field|property|ClassName"</span><span xmlns="" class="perl_Keyword">&gt;</span>                           <img class="callout" alt="5" src="Common_Content/images/5.png"/>
<span xmlns="" class="line">​</span>        node="element-name|@attribute-name|element/@attribute|."
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"generatorClass"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/id&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code> (optional): the name of the identifier property.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">type</code> (optional): a name that indicates the Hibernate type.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional - defaults to the property name): the name of the primary key column.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unsaved-value</code> (optional - defaults to a "sensible" value): an identifier property value that indicates an instance is newly instantiated (unsaved), distinguishing it from detached instances that were saved or loaded in a previous session.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate should use for accessing the property value.
						</div></td></tr></table></div></div><div class="para">
				If the <code class="literal">name</code> attribute is missing, it is assumed that the class has no identifier property.
			</div><div class="para">
				The <code class="literal">unsaved-value</code> attribute is almost never needed in Hibernate3.
			</div><div class="para">
				There is an alternative <code class="literal">&lt;composite-id&gt;</code> declaration that allows access to legacy data with composite keys. Its use is strongly discouraged for anything else.
			</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-id-generator">
      ⁠</a>5.1.4.1. Generator</h3></div></div></div><div class="para">
					The optional <code class="literal">&lt;generator&gt;</code> child element names a Java class used to generate unique identifiers for instances of the persistent class. If any parameters are required to configure or initialize the generator instance, they are passed using the <code class="literal">&lt;param&gt;</code> element.
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"cat_id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.hibernate.id.TableHiLoGenerator"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"table"</span><span xmlns="" class="perl_Keyword">&gt;</span>uid_table<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"column"</span><span xmlns="" class="perl_Keyword">&gt;</span>next_hi_value_column<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/generator&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/id&gt;</span></pre><div class="para">
					All generators implement the interface <code class="literal">org.hibernate.id.IdentifierGenerator</code>. This is a very simple interface. Some applications can choose to provide their own specialized implementations, however, Hibernate provides a range of built-in implementations. The shortcut names for the built-in generators are as follows:
				</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">increment</code></span></dt><dd><div class="para">
								generates identifiers of type <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code> that are unique only when no other process is inserting data into the same table. <span class="emphasis"><em>Do not use in a cluster.</em></span>
							</div></dd><dt><span class="term"><code class="literal">identity</code></span></dt><dd><div class="para">
								supports identity columns in DB2, MySQL, MS SQL Server, Sybase and HypersonicSQL. The returned identifier is of type <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code>.
							</div></dd><dt><span class="term"><code class="literal">sequence</code></span></dt><dd><div class="para">
								uses a sequence in DB2, PostgreSQL, Oracle, SAP DB, McKoi or a generator in Interbase. The returned identifier is of type <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code>
							</div></dd><dt><span class="term"><code class="literal">hilo</code></span></dt><dd><div class="para"><a id="mapping-declaration-id-hilodescription">
      ⁠</a>
								uses a hi/lo algorithm to efficiently generate identifiers of type <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code>, given a table and column (by default <code class="literal">hibernate_unique_key</code> and <code class="literal">next_hi</code> respectively) as a source of hi values. The hi/lo algorithm generates identifiers that are unique only for a particular database.
							</div></dd><dt><span class="term"><code class="literal">seqhilo</code></span></dt><dd><div class="para">
								uses a hi/lo algorithm to efficiently generate identifiers of type <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code>, given a named database sequence.
							</div></dd><dt><span class="term"><code class="literal">uuid</code></span></dt><dd><div class="para">
								uses a 128-bit UUID algorithm to generate identifiers of type string that are unique within a network (the IP address is used). The UUID is encoded as a string of 32 hexadecimal digits in length.
							</div></dd><dt><span class="term"><code class="literal">guid</code></span></dt><dd><div class="para">
								uses a database-generated GUID string on MS SQL Server and MySQL.
							</div></dd><dt><span class="term"><code class="literal">native</code></span></dt><dd><div class="para">
								selects <code class="literal">identity</code>, <code class="literal">sequence</code> or <code class="literal">hilo</code> depending upon the capabilities of the underlying database.
							</div></dd><dt><span class="term"><code class="literal">assigned</code></span></dt><dd><div class="para">
								lets the application assign an identifier to the object before <code class="literal">save()</code> is called. This is the default strategy if no <code class="literal">&lt;generator&gt;</code> element is specified.
							</div></dd><dt><span class="term"><code class="literal">select</code></span></dt><dd><div class="para">
								retrieves a primary key, assigned by a database trigger, by selecting the row by some unique key and retrieving the primary key value.
							</div></dd><dt><span class="term"><code class="literal">foreign</code></span></dt><dd><div class="para">
								uses the identifier of another associated object. It is usually used in conjunction with a <code class="literal">&lt;one-to-one&gt;</code> primary key association.
							</div></dd><dt><span class="term"><code class="literal">sequence-identity</code></span></dt><dd><div class="para">
								a specialized sequence generation strategy that utilizes a database sequence for the actual value generation, but combines this with JDBC3 getGeneratedKeys to return the generated identifier value as part of the insert statement execution. This strategy is only supported on Oracle 10g drivers targeted for JDK 1.4. Comments on these insert statements are disabled due to a bug in the Oracle drivers.
							</div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-id-hilo">
      ⁠</a>5.1.4.2. Hi/lo algorithm</h3></div></div></div><div class="para">
					The <code class="literal">hilo</code> and <code class="literal">seqhilo</code> generators provide two alternate implementations of the hi/lo algorithm. The first implementation requires a "special" database table to hold the next available "hi" value. Where supported, the second uses an Oracle-style sequence.
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"cat_id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"hilo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"table"</span><span xmlns="" class="perl_Keyword">&gt;</span>hi_value<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"column"</span><span xmlns="" class="perl_Keyword">&gt;</span>next_value<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"max_lo"</span><span xmlns="" class="perl_Keyword">&gt;</span>100<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/generator&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/id&gt;</span></pre><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"cat_id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"seqhilo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sequence"</span><span xmlns="" class="perl_Keyword">&gt;</span>hi_value<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"max_lo"</span><span xmlns="" class="perl_Keyword">&gt;</span>100<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/generator&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/id&gt;</span></pre><div class="para">
					Unfortunately, you cannot use <code class="literal">hilo</code> when supplying your own <code class="literal">Connection</code> to Hibernate. When Hibernate uses an application server datasource to obtain connections enlisted with JTA, you must configure the <code class="literal">hibernate.transaction.manager_lookup_class</code>.
				</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-id-uuid">
      ⁠</a>5.1.4.3. UUID algorithm</h3></div></div></div><div class="para">
					The UUID contains: IP address, start time of the JVM that is accurate to a quarter second, system time and a counter value that is unique within the JVM. It is not possible to obtain a MAC address or memory address from Java code, so this is the best option without using JNI.
				</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-id-sequences">
      ⁠</a>5.1.4.4. Identity columns and sequences</h3></div></div></div><div class="para">
					For databases that support identity columns (DB2, MySQL, Sybase, MS SQL), you can use <code class="literal">identity</code> key generation. For databases that support sequences (DB2, Oracle, PostgreSQL, Interbase, McKoi, SAP DB) you can use <code class="literal">sequence</code> style key generation. Both of these strategies require two SQL queries to insert a new object. For example:
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"person_id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"sequence"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sequence"</span><span xmlns="" class="perl_Keyword">&gt;</span>person_id_sequence<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/generator&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/id&gt;</span></pre><pre class="programlisting">&lt;id name="id" type="long" column="person_id" unsaved-value="0"&gt;
        &lt;generator class="identity"/&gt;
&lt;/id&gt;</pre><div class="para">
					For cross-platform development, the <code class="literal">native</code> strategy will, depending on the capabilities of the underlying database, choose from the <code class="literal">identity</code>, <code class="literal">sequence</code> and <code class="literal">hilo</code> strategies.
				</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-id-assigned">
      ⁠</a>5.1.4.5. Assigned identifiers</h3></div></div></div><div class="para">
					If you want the application to assign identifiers, as opposed to having Hibernate generate them, you can use the <code class="literal">assigned</code> generator. This special generator uses the identifier value already assigned to the object's identifier property. The generator is used when the primary key is a natural key instead of a surrogate key. This is the default behavior if you do not specify a <code class="literal">&lt;generator&gt;</code> element.
				</div><div class="para">
					The <code class="literal">assigned</code> generator makes Hibernate use <code class="literal">unsaved-value="undefined"</code>. This forces Hibernate to go to the database to determine if an instance is transient or detached, unless there is a version or timestamp property, or you define <code class="literal">Interceptor.isUnsaved()</code>.
				</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-declaration-id-select">
      ⁠</a>5.1.4.6. Primary keys assigned by triggers</h3></div></div></div><div class="para">
					Hibernate does not generate DDL with triggers. It is for legacy schemas only.
				</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"person_id"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"select"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"key"</span><span xmlns="" class="perl_Keyword">&gt;</span>socialSecurityNumber<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/generator&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/id&gt;</span></pre><div class="para">
					In the above example, there is a unique valued property named <code class="literal">socialSecurityNumber</code>. It is defined by the class, as a natural key and a surrogate key named <code class="literal">person_id</code>, whose value is generated by a trigger.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-id-enhanced">
      ⁠</a>5.1.5. Enhanced identifier generators</h2></div></div></div><div class="para">
				Starting with release 3.2.3, there are 2 new generators which represent a re-thinking of 2 different aspects of identifier generation. The first aspect is database portability; the second is optimization. Optimization means that you do not have to query the database for every request for a new identifier value. These two new generators are intended to take the place of some of the named generators described above, starting in 3.3.x. However, they are included in the current releases and can be referenced by FQN.
			</div><div class="para">
				The first of these new generators is <code class="literal">org.hibernate.id.enhanced.SequenceStyleGenerator</code> which is intended, firstly, as a replacement for the <code class="literal">sequence</code> generator and, secondly, as a better portability generator than <code class="literal">native</code>. This is because <code class="literal">native</code> generally chooses between <code class="literal">identity</code> and <code class="literal">sequence</code> which have largely different semantics that can cause subtle issues in applications eyeing portability. <code class="literal">org.hibernate.id.enhanced.SequenceStyleGenerator</code>, however, achieves portability in a different manner. It chooses between a table or a sequence in the database to store its incrementing values, depending on the capabilities of the dialect being used. The difference between this and <code class="literal">native</code> is that table-based and sequence-based storage have the same exact semantic. In fact, sequences are exactly what Hibernate tries to emulate with its table-based generators. This generator has a number of configuration parameters:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">sequence_name</code> (optional, defaults to <code class="literal">hibernate_sequence</code>): the name of the sequence or table to be used.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">initial_value</code> (optional, defaults to <code class="literal">1</code>): the initial value to be retrieved from the sequence/table. In sequence creation terms, this is analogous to the clause typically named "STARTS WITH".
					</div></li><li class="listitem"><div class="para">
						<code class="literal">increment_size</code> (optional - defaults to <code class="literal">1</code>): the value by which subsequent calls to the sequence/table should differ. In sequence creation terms, this is analogous to the clause typically named "INCREMENT BY".
					</div></li><li class="listitem"><div class="para">
						<code class="literal">force_table_use</code> (optional - defaults to <code class="literal">false</code>): should we force the use of a table as the backing structure even though the dialect might support sequence?
					</div></li><li class="listitem"><div class="para">
						<code class="literal">value_column</code> (optional - defaults to <code class="literal">next_val</code>): only relevant for table structures, it is the name of the column on the table which is used to hold the value.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">optimizer</code> (optional - defaults to <code class="literal">none</code>): See <a class="xref" href="mapping.html#mapping-declaration-id-enhanced-optimizers">Section 5.1.6, “Identifier generator optimization”</a>
					</div></li></ul></div><div class="para">
				The second of these new generators is <code class="literal">org.hibernate.id.enhanced.TableGenerator</code>, which is intended, firstly, as a replacement for the <code class="literal">table</code> generator, even though it actually functions much more like <code class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</code>, and secondly, as a re-implementation of <code class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</code> that utilizes the notion of pluggable optimizers. Essentially this generator defines a table capable of holding a number of different increment values simultaneously by using multiple distinctly keyed rows. This generator has a number of configuration parameters:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">table_name</code> (optional - defaults to <code class="literal">hibernate_sequences</code>): the name of the table to be used.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">value_column_name</code> (optional - defaults to <code class="literal">next_val</code>): the name of the column on the table that is used to hold the value.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">segment_column_name</code> (optional - defaults to <code class="literal">sequence_name</code>): the name of the column on the table that is used to hold the "segment key". This is the value which identifies which increment value to use.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">segment_value</code> (optional - defaults to <code class="literal">default</code>): The "segment key" value for the segment from which we want to pull increment values for this generator.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">segment_value_length</code> (optional - defaults to <code class="literal">255</code>): Used for schema generation; the column size to create this segment key column.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">initial_value</code> (optional - defaults to <code class="literal">1</code>): The initial value to be retrieved from the table.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">increment_size</code> (optional - defaults to <code class="literal">1</code>): The value by which subsequent calls to the table should differ.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">optimizer</code> (optional - defaults to <code class="literal"/>): See <a class="xref" href="mapping.html#mapping-declaration-id-enhanced-optimizers">Section 5.1.6, “Identifier generator optimization”</a>
					</div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-id-enhanced-optimizers">
      ⁠</a>5.1.6. Identifier generator optimization</h2></div></div></div><div class="para">
				For identifier generators that store values in the database, it is inefficient for them to hit the database on each and every call to generate a new identifier value. Instead, you can group a bunch of them in memory and only hit the database when you have exhausted your in-memory value group. This is the role of the pluggable optimizers. Currently only the two enhanced generators (<a class="xref" href="mapping.html#mapping-declaration-id-enhanced">Section 5.1.5, “Enhanced identifier generators”</a> support this operation. 
				<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							<code class="literal">none</code> (generally this is the default if no optimizer was specified): this will not perform any optimizations and hit the database for each and every request.
						</div></li><li class="listitem"><div class="para">
							<code class="literal">hilo</code>: applies a hi/lo algorithm around the database retrieved values. The values from the database for this optimizer are expected to be sequential. The values retrieved from the database structure for this optimizer indicates the "group number". The <code class="literal">increment_size</code> is multiplied by that value in memory to define a group "hi value".
						</div></li><li class="listitem"><div class="para">
							<code class="literal">pooled</code>: as with the case of <code class="literal">hilo</code>, this optimizer attempts to minimize the number of hits to the database. Here, however, we simply store the starting value for the "next group" into the database structure rather than a sequential value in combination with an in-memory grouping algorithm. Here, <code class="literal">increment_size</code> refers to the values coming from the database.
						</div></li></ul></div>

			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-compositeid">
      ⁠</a>5.1.7. composite-id</h2></div></div></div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;composite-id&gt;</span>
<span xmlns="" class="line">​</span>        name="propertyName"
<span xmlns="" class="line">​</span>        class="ClassName"
<span xmlns="" class="line">​</span>        mapped="true|false"
<span xmlns="" class="line">​</span>        access="field|property|ClassName"&gt;
<span xmlns="" class="line">​</span>        node="element-name"
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"propertyName"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"typename"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"column_name"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key-many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"propertyName"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"ClassName"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"column_name"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        ......
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/composite-id&gt;</span></pre><div class="para">
				A table with a composite key can be mapped with multiple properties of the class as identifier properties. The <code class="literal">&lt;composite-id&gt;</code> element accepts <code class="literal">&lt;key-property&gt;</code> property mappings and <code class="literal">&lt;key-many-to-one&gt;</code> mappings as child elements.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;composite-id&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"medicareNumber"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"dependent"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/composite-id&gt;</span></pre><div class="para">
				The persistent class <span class="emphasis"><em>must</em></span> override <code class="literal">equals()</code> and <code class="literal">hashCode()</code> to implement composite identifier equality. It must also implement <code class="literal">Serializable</code>.
			</div><div class="para">
				Unfortunately, this approach means that a persistent object is its own identifier. There is no convenient "handle" other than the object itself. You must instantiate an instance of the persistent class itself and populate its identifier properties before you can <code class="literal">load()</code> the persistent state associated with a composite key. We call this approach an <span class="emphasis"><em>embedded</em></span> composite identifier, and discourage it for serious applications.
			</div><div class="para">
				A second approach is what we call a <span class="emphasis"><em>mapped</em></span> composite identifier, where the identifier properties named inside the <code class="literal">&lt;composite-id&gt;</code> element are duplicated on both the persistent class and a separate identifier class.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;composite-id</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"MedicareId"</span><span xmlns="" class="perl_Others"> mapped=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"medicareNumber"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key-property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"dependent"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/composite-id&gt;</span></pre><div class="para">
				In this example, both the composite identifier class, <code class="literal">MedicareId</code>, and the entity class itself have properties named <code class="literal">medicareNumber</code> and <code class="literal">dependent</code>. The identifier class must override <code class="literal">equals()</code> and <code class="literal">hashCode()</code> and implement <code class="literal">Serializable</code>. The main disadvantage of this approach is code duplication.
			</div><div class="para">
				The following attributes are used to specify a mapped composite identifier:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">mapped</code> (optional - defaults to <code class="literal">false</code>): indicates that a mapped composite identifier is used, and that the contained property mappings refer to both the entity class and the composite identifier class.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">class</code> (optional - but required for a mapped composite identifier): the class used as a composite identifier.
					</div></li></ul></div><div class="para">
				We will describe a third, even more convenient approach, where the composite identifier is implemented as a component class in <a class="xref" href="components.html#components-compositeid">Section 8.4, “Components as composite identifiers”</a>. The attributes described below apply only to this alternative approach:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">name</code> (optional - required for this approach): a property of component type that holds the composite identifier. Please see chapter 9 for more information.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">class</code> (optional - defaults to the property type determined by reflection): the component class used as a composite identifier. Please see the next section for more information.
					</div></li></ul></div><div class="para">
				The third approach, an <span class="emphasis"><em>identifier component</em></span>, is recommended for almost all applications.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-discriminator">
      ⁠</a>5.1.8. Discriminator</h2></div></div></div><div class="para">
				The <code class="literal">&lt;discriminator&gt;</code> element is required for polymorphic persistence using the table-per-class-hierarchy mapping strategy. It declares a discriminator column of the table. The discriminator column contains marker values that tell the persistence layer what subclass to instantiate for a particular row. A restricted set of types can be used: <code class="literal">string</code>, <code class="literal">character</code>, <code class="literal">integer</code>, <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">boolean</code>, <code class="literal">yes_no</code>, <code class="literal">true_false</code>.
			</div><div class="programlistingco"><pre class="programlisting">&lt;discriminator
        column="discriminator_column"                       <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        type="discriminator_type"                           <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        force="true|false"                                  <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        insert="true|false"                                 <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        formula="arbitrary sql expression"                  <img class="callout" alt="5" src="Common_Content/images/5.png"/>
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional - defaults to <code class="literal">class</code>): the name of the discriminator column.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">type</code> (optional - defaults to <code class="literal">string</code>): a name that indicates the Hibernate type
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">force</code> (optional - defaults to <code class="literal">false</code>): "forces" Hibernate to specify the allowed discriminator values, even when retrieving all instances of the root class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">insert</code> (optional - defaults to <code class="literal">true</code>): set this to <code class="literal">false</code> if your discriminator column is also part of a mapped composite identifier. It tells Hibernate not to include the column in SQL <code class="literal">INSERTs</code>.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">formula</code> (optional): an arbitrary SQL expression that is executed when a type has to be evaluated. It allows content-based discrimination.
						</div></td></tr></table></div></div><div class="para">
				Actual values of the discriminator column are specified by the <code class="literal">discriminator-value</code> attribute of the <code class="literal">&lt;class&gt;</code> and <code class="literal">&lt;subclass&gt;</code> elements.
			</div><div class="para">
				The <code class="literal">force</code> attribute is only useful if the table contains rows with "extra" discriminator values that are not mapped to a persistent class. This will not usually be the case.
			</div><div class="para">
				The <code class="literal">formula</code> attribute allows you to declare an arbitrary SQL expression that will be used to evaluate the type of a row. For example:
			</div><pre class="programlisting">&lt;discriminator
    formula="case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end"
    type="integer"/&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-version">
      ⁠</a>5.1.9. Version (optional)</h2></div></div></div><div class="para">
				The <code class="literal">&lt;version&gt;</code> element is optional and indicates that the table contains versioned data. This is particularly useful if you plan to use <span class="emphasis"><em>long transactions</em></span>. See below for more information:
			</div><div class="programlistingco"><pre class="programlisting">&lt;version
        column="version_column"                                       <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        name="propertyName"                                           <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        type="typename"                                               <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        access="field|property|ClassName"                             <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        unsaved-value="null|negative|undefined"                       <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        generated="never|always"                                      <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        insert="true|false"                                           <img class="callout" alt="7" src="Common_Content/images/7.png"/>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional - defaults to the property name): the name of the column holding the version number.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the name of a property of the persistent class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">type</code> (optional - defaults to <code class="literal">integer</code>): the type of the version number.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses to access the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unsaved-value</code> (optional - defaults to <code class="literal">undefined</code>): a version property value that indicates that an instance is newly instantiated (unsaved), distinguishing it from detached instances that were saved or loaded in a previous session. <code class="literal">Undefined</code> specifies that the identifier property value should be used.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">generated</code> (optional - defaults to <code class="literal">never</code>): specifies that this version property value is generated by the database. See the discussion of <a class="xref" href="mapping.html#mapping-generated">Section 5.6, “Generated properties”</a> for more information.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">insert</code> (optional - defaults to <code class="literal">true</code>): specifies whether the version column should be included in SQL insert statements. It can be set to <code class="literal">false</code> if the database column is defined with a default value of <code class="literal">0</code>.
						</div></td></tr></table></div></div><div class="para">
				Version numbers can be of Hibernate type <code class="literal">long</code>, <code class="literal">integer</code>, <code class="literal">short</code>, <code class="literal">timestamp</code> or <code class="literal">calendar</code>.
			</div><div class="para">
				A version or timestamp property should never be null for a detached instance. Hibernate will detect any instance with a null version or timestamp as transient, irrespective of what other <code class="literal">unsaved-value</code> strategies are specified. <span class="emphasis"><em>Declaring a nullable version or timestamp property is an easy way to avoid problems with transitive reattachment in Hibernate. It is especially useful for people using assigned identifiers or composite keys</em></span>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-timestamp">
      ⁠</a>5.1.10. Timestamp (optional)</h2></div></div></div><div class="para">
				The optional <code class="literal">&lt;timestamp&gt;</code> element indicates that the table contains timestamped data. This provides an alternative to versioning. Timestamps are a less safe implementation of optimistic locking. However, sometimes the application might use the timestamps in other ways.
			</div><div class="programlistingco"><pre class="programlisting">&lt;timestamp
        column="timestamp_column"                                     <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        name="propertyName"                                           <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        access="field|property|ClassName"                             <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        unsaved-value="null|undefined"                                <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        source="vm|db"                                                <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        generated="never|always"                                      <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional - defaults to the property name): the name of a column holding the timestamp.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the name of a JavaBeans style property of Java type <code class="literal">Date</code> or <code class="literal">Timestamp</code> of the persistent class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unsaved-value</code> (optional - defaults to <code class="literal">null</code>): a version property value that indicates that an instance is newly instantiated (unsaved), distinguishing it from detached instances that were saved or loaded in a previous session. <code class="literal">Undefined</code> specifies that the identifier property value should be used.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">source</code> (optional - defaults to <code class="literal">vm</code>): Where should Hibernate retrieve the timestamp value from? From the database, or from the current JVM? Database-based timestamps incur an overhead because Hibernate must hit the database in order to determine the "next value". It is safer to use in clustered environments. Not all <code class="literal">Dialects</code> are known to support the retrieval of the database's current timestamp. Others may also be unsafe for usage in locking due to lack of precision (Oracle 8, for example).
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">generated</code> (optional - defaults to <code class="literal">never</code>): specifies that this timestamp property value is actually generated by the database. See the discussion of <a class="xref" href="mapping.html#mapping-generated">Section 5.6, “Generated properties”</a> for more information.
						</div></td></tr></table></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					<code class="literal">&lt;Timestamp&gt;</code> is equivalent to <code class="literal">&lt;version type="timestamp"&gt;</code>. And <code class="literal">&lt;timestamp source="db"&gt;</code> is equivalent to <code class="literal">&lt;version type="dbtimestamp"&gt;</code>
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-property">
      ⁠</a>5.1.11. Property</h2></div></div></div><div class="para">
				The <code class="literal">&lt;property&gt;</code> element declares a persistent JavaBean style property of the class.
			</div><div class="programlistingco"><pre class="programlisting">&lt;property
        name="propertyName"                                           <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        column="column_name"                                          <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        type="typename"                                               <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        update="true|false"                                           <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        insert="true|false"                                           <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        formula="arbitrary SQL expression"                            <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        access="field|property|ClassName"                             <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        lazy="true|false"                                             <img class="callout" alt="7" src="Common_Content/images/7.png"/>
        unique="true|false"                                           <img class="callout" alt="8" src="Common_Content/images/8.png"/>
        not-null="true|false"                                         <img class="callout" alt="9" src="Common_Content/images/9.png"/>
        optimistic-lock="true|false"                                  <img class="callout" alt="10" src="Common_Content/images/10.png"/>
        generated="never|insert|always"                               <img class="callout" alt="11" src="Common_Content/images/11.png"/>
        node="element-name|@attribute-name|element/@attribute|."
        index="index_name"
        unique_key="unique_key_id"
        length="L"
        precision="P"
        scale="S"
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the name of the property, with an initial lowercase letter.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional - defaults to the property name): the name of the mapped database table column. This can also be specified by nested <code class="literal">&lt;column&gt;</code> element(s).
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">type</code> (optional): a name that indicates the Hibernate type.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">update, insert</code> (optional - defaults to <code class="literal">true</code>): specifies that the mapped columns should be included in SQL <code class="literal">UPDATE</code> and/or <code class="literal">INSERT</code> statements. Setting both to <code class="literal">false</code> allows a pure "derived" property whose value is initialized from some other property that maps to the same column(s), or by a trigger or other application.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">formula</code> (optional): an SQL expression that defines the value for a <span class="emphasis"><em>computed</em></span> property. Computed properties do not have a column mapping of their own.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional - defaults to <code class="literal">false</code>): specifies that this property should be fetched lazily when the instance variable is first accessed. It requires build-time bytecode instrumentation.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/8.png" alt="8"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unique</code> (optional): enables the DDL generation of a unique constraint for the columns. Also, allow this to be the target of a <code class="literal">property-ref</code>.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/9.png" alt="9"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">not-null</code> (optional): enables the DDL generation of a nullability constraint for the columns.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/10.png" alt="10"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>): specifies that updates to this property do or do not require acquisition of the optimistic lock. In other words, it determines if a version increment should occur when this property is dirty.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/11.png" alt="11"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">generated</code> (optional - defaults to <code class="literal">never</code>): specifies that this property value is actually generated by the database. See the discussion of <a class="xref" href="mapping.html#mapping-generated">Section 5.6, “Generated properties”</a> for more information.
						</div></td></tr></table></div></div><div class="para">
				<span class="emphasis"><em>typename</em></span> could be:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
						The name of a Hibernate basic type: <code class="literal">integer, string, character, date, timestamp, float, binary, serializable, object, blob</code> etc.
					</div></li><li class="listitem"><div class="para">
						The name of a Java class with a default basic type: <code class="literal">int, float, char, java.lang.String, java.util.Date, java.lang.Integer, java.sql.Clob</code> etc.
					</div></li><li class="listitem"><div class="para">
						The name of a serializable Java class.
					</div></li><li class="listitem"><div class="para">
						The class name of a custom type: <code class="literal">com.illflow.type.MyCustomType</code> etc.
					</div></li></ol></div><div class="para">
				If you do not specify a type, Hibernate will use reflection upon the named property and guess the correct Hibernate type. Hibernate will attempt to interpret the name of the return class of the property getter using, in order, rules 2, 3, and 4. In certain cases you will need the <code class="literal">type</code> attribute. For example, to distinguish between <code class="literal">Hibernate.DATE</code> and <code class="literal">Hibernate.TIMESTAMP</code>, or to specify a custom type.
			</div><div class="para">
				The <code class="literal">access</code> attribute allows you to control how Hibernate accesses the property at runtime. By default, Hibernate will call the property get/set pair. If you specify <code class="literal">access="field"</code>, Hibernate will bypass the get/set pair and access the field directly using reflection. You can specify your own strategy for property access by naming a class that implements the interface <code class="literal">org.hibernate.property.PropertyAccessor</code>.
			</div><div class="para">
				A powerful feature is derived properties. These properties are by definition read-only. The property value is computed at load time. You declare the computation as an SQL expression. This then translates to a <code class="literal">SELECT</code> clause subquery in the SQL query that loads an instance:
			</div><pre class="programlisting">
&lt;property name="totalPrice"
    formula="( SELECT SUM (li.quantity*p.price) FROM LineItem li, Product p
                WHERE li.productId = p.productId
                AND li.customerId = customerId
                AND li.orderNumber = orderNumber )"/&gt;</pre><div class="para">
				You can reference the entity table by not declaring an alias on a particular column. This would be <code class="literal">customerId</code> in the given example. You can also use the nested <code class="literal">&lt;formula&gt;</code> mapping element if you do not want to use the attribute.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-manytoone">
      ⁠</a>5.1.12. Many-to-one</h2></div></div></div><div class="para">
				An ordinary association to another persistent class is declared using a <code class="literal">many-to-one</code> element. The relational model is a many-to-one association; a foreign key in one table is referencing the primary key column(s) of the target table.
			</div><div class="programlistingco"><pre class="programlisting">&lt;many-to-one
        name="propertyName"                                           <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        column="column_name"                                          <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        class="ClassName"                                             <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        cascade="cascade_style"                                       <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        fetch="join|select"                                           <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        update="true|false"                                           <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        insert="true|false"                                           <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        property-ref="propertyNameFromAssociatedClass"                <img class="callout" alt="7" src="Common_Content/images/7.png"/>
        access="field|property|ClassName"                             <img class="callout" alt="8" src="Common_Content/images/8.png"/>
        unique="true|false"                                           <img class="callout" alt="9" src="Common_Content/images/9.png"/>
        not-null="true|false"                                         <img class="callout" alt="10" src="Common_Content/images/10.png"/>
        optimistic-lock="true|false"                                  <img class="callout" alt="11" src="Common_Content/images/11.png"/>
        lazy="proxy|no-proxy|false"                                   <img class="callout" alt="12" src="Common_Content/images/12.png"/>
        not-found="ignore|exception"                                  <img class="callout" alt="13" src="Common_Content/images/13.png"/>
        entity-name="EntityName"                                      <img class="callout" alt="14" src="Common_Content/images/14.png"/>
        formula="arbitrary SQL expression"                            <img class="callout" alt="15" src="Common_Content/images/15.png"/>
        node="element-name|@attribute-name|element/@attribute|."
        embed-xml="true|false"
        index="index_name"
        unique_key="unique_key_id"
        foreign-key="foreign_key_name"
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the name of the property.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional): the name of the foreign key column. This can also be specified by nested <code class="literal">&lt;column&gt;</code> element(s).
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">class</code> (optional - defaults to the property type determined by reflection): the name of the associated class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">cascade</code> (optional): specifies which operations should be cascaded from the parent object to the associated object.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">fetch</code> (optional - defaults to <code class="literal">select</code>): chooses between outer-join fetching or sequential select fetching.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">update, insert</code> (optional - defaults to <code class="literal">true</code>): specifies that the mapped columns should be included in SQL <code class="literal">UPDATE</code> and/or <code class="literal">INSERT</code> statements. Setting both to <code class="literal">false</code> allows a pure "derived" association whose value is initialized from another property that maps to the same column(s), or by a trigger or other application.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">property-ref</code> (optional): the name of a property of the associated class that is joined to this foreign key. If not specified, the primary key of the associated class is used.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/8.png" alt="8"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/9.png" alt="9"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unique</code> (optional): enables the DDL generation of a unique constraint for the foreign-key column. By allowing this to be the target of a <code class="literal">property-ref</code>, you can make the association multiplicity one-to-one.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/10.png" alt="10"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">not-null</code> (optional): enables the DDL generation of a nullability constraint for the foreign key columns.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/11.png" alt="11"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>): specifies that updates to this property do or do not require acquisition of the optimistic lock. In other words, it determines if a version increment should occur when this property is dirty.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/12.png" alt="12"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional - defaults to <code class="literal">proxy</code>): by default, single point associations are proxied. <code class="literal">lazy="no-proxy"</code> specifies that the property should be fetched lazily when the instance variable is first accessed. This requires build-time bytecode instrumentation. <code class="literal">lazy="false"</code> specifies that the association will always be eagerly fetched.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/13.png" alt="13"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">not-found</code> (optional - defaults to <code class="literal">exception</code>): specifies how foreign keys that reference missing rows will be handled. <code class="literal">ignore</code> will treat a missing row as a null association.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/14.png" alt="14"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">entity-name</code> (optional): the entity name of the associated class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/15.png" alt="15"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">formula</code> (optional): an SQL expression that defines the value for a <span class="emphasis"><em>computed</em></span> foreign key.
						</div></td></tr></table></div></div><div class="para">
				Setting a value of the <code class="literal">cascade</code> attribute to any meaningful value other than <code class="literal">none</code> will propagate certain operations to the associated object. The meaningful values are divided into three categories. First, basic operations, which include: <code class="literal">persist, merge, delete, save-update, evict, replicate, lock and refresh</code>; second, special values: <code class="literal">delete-orphan</code>; and third,<code class="literal">all</code> comma-separated combinations of operation names: <code class="literal">cascade="persist,merge,evict"</code> or <code class="literal">cascade="all,delete-orphan"</code>. See <a class="xref" href="objectstate.html#objectstate-transitive">Section 10.11, “Transitive persistence”</a> for a full explanation. Note that single valued, many-to-one and one-to-one, associations do not support orphan delete.
			</div><div class="para">
				Here is an example of a typical <code class="literal">many-to-one</code> declaration:
			</div><pre class="programlisting">&lt;many-to-one name="product" class="Product" column="PRODUCT_ID"/&gt;</pre><div class="para">
				The <code class="literal">property-ref</code> attribute should only be used for mapping legacy data where a foreign key refers to a unique key of the associated table other than the primary key. This is a complicated and confusing relational model. For example, if the <code class="literal">Product</code> class had a unique serial number that is not the primary key. The <code class="literal">unique</code> attribute controls Hibernate's DDL generation with the SchemaExport tool.
			</div><pre class="programlisting">&lt;property name="serialNumber" unique="true" type="string" column="SERIAL_NUMBER"/&gt;</pre><div class="para">
				Then the mapping for <code class="literal">OrderItem</code> might use:
			</div><pre class="programlisting">&lt;many-to-one name="product" property-ref="serialNumber" column="PRODUCT_SERIAL_NUMBER"/&gt;</pre><div class="para">
				This is not encouraged, however.
			</div><div class="para">
				If the referenced unique key comprises multiple properties of the associated entity, you should map the referenced properties inside a named <code class="literal">&lt;properties&gt;</code> element.
			</div><div class="para">
				If the referenced unique key is the property of a component, you can specify a property path:
			</div><pre class="programlisting">&lt;many-to-one name="owner" property-ref="identity.ssn" column="OWNER_SSN"/&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-onetoone">
      ⁠</a>5.1.13. One-to-one</h2></div></div></div><div class="para">
				A one-to-one association to another persistent class is declared using a <code class="literal">one-to-one</code> element.
			</div><div class="programlistingco"><pre class="programlisting">&lt;one-to-one
        name="propertyName"                                           <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        class="ClassName"                                             <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        cascade="cascade_style"                                       <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        constrained="true|false"                                      <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        fetch="join|select"                                           <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        property-ref="propertyNameFromAssociatedClass"                <img class="callout" alt="6" src="Common_Content/images/6.png"/>
        access="field|property|ClassName"                             <img class="callout" alt="7" src="Common_Content/images/7.png"/>
        formula="any SQL expression"                                  <img class="callout" alt="8" src="Common_Content/images/8.png"/>
        lazy="proxy|no-proxy|false"                                   <img class="callout" alt="9" src="Common_Content/images/9.png"/>
        entity-name="EntityName"                                      <img class="callout" alt="10" src="Common_Content/images/10.png"/>
        node="element-name|@attribute-name|element/@attribute|."
        embed-xml="true|false"
        foreign-key="foreign_key_name"
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the name of the property.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">class</code> (optional - defaults to the property type determined by reflection): the name of the associated class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">cascade</code> (optional): specifies which operations should be cascaded from the parent object to the associated object.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">constrained</code> (optional): specifies that a foreign key constraint on the primary key of the mapped table and references the table of the associated class. This option affects the order in which <code class="literal">save()</code> and <code class="literal">delete()</code> are cascaded, and determines whether the association can be proxied. It is also used by the schema export tool.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">fetch</code> (optional - defaults to <code class="literal">select</code>): chooses between outer-join fetching or sequential select fetching.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">property-ref</code> (optional): the name of a property of the associated class that is joined to the primary key of this class. If not specified, the primary key of the associated class is used.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/8.png" alt="8"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">formula</code> (optional): almost all one-to-one associations map to the primary key of the owning entity. If this is not the case, you can specify another column, columns or expression to join on using an SQL formula. See <code class="literal">org.hibernate.test.onetooneformula</code> for an example.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/9.png" alt="9"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional - defaults to <code class="literal">proxy</code>): by default, single point associations are proxied. <code class="literal">lazy="no-proxy"</code> specifies that the property should be fetched lazily when the instance variable is first accessed. It requires build-time bytecode instrumentation. <code class="literal">lazy="false"</code> specifies that the association will always be eagerly fetched. <span class="emphasis"><em>Note that if <code class="literal">constrained="false"</code>, proxying is impossible and Hibernate will eagerly fetch the association</em></span>.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/10.png" alt="10"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">entity-name</code> (optional): the entity name of the associated class.
						</div></td></tr></table></div></div><div class="para">
				There are two varieties of one-to-one associations:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						primary key associations
					</div></li><li class="listitem"><div class="para">
						unique foreign key associations
					</div></li></ul></div><div class="para">
				Primary key associations do not need an extra table column. If two rows are related by the association, then the two table rows share the same primary key value. To relate two objects by a primary key association, ensure that they are assigned the same identifier value.
			</div><div class="para">
				For a primary key association, add the following mappings to <code class="literal">Employee</code> and <code class="literal">Person</code> respectively:
			</div><pre class="programlisting">&lt;one-to-one name="person" class="Person"/&gt;</pre><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" constrained="true"/&gt;</pre><div class="para">
				Ensure that the primary keys of the related rows in the PERSON and EMPLOYEE tables are equal. You use a special Hibernate identifier generation strategy called <code class="literal">foreign</code>:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"person"</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"PERSON"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"PERSON_ID"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"foreign"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"property"</span><span xmlns="" class="perl_Keyword">&gt;</span>employee<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/generator&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/id&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;one-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"employee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        class=</span><span xmlns="" class="perl_String">"Employee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        constrained=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre><div class="para">
				A newly saved instance of <code class="literal">Person</code> is assigned the same primary key value as the <code class="literal">Employee</code> instance referred with the <code class="literal">employee</code> property of that <code class="literal">Person</code>.
			</div><div class="para">
				Alternatively, a foreign key with a unique constraint, from <code class="literal">Employee</code> to <code class="literal">Person</code>, can be expressed as:
			</div><pre class="programlisting">&lt;many-to-one name="person" class="Person" column="PERSON_ID" unique="true"/&gt;</pre><div class="para">
				This association can be made bidirectional by adding the following to the <code class="literal">Person</code> mapping:
			</div><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" property-ref="person"/&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-naturalid">
      ⁠</a>5.1.14. Natural-id</h2></div></div></div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;natural-id</span><span xmlns="" class="perl_Others"> mutable=</span><span xmlns="" class="perl_String">"true|false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span> <span xmlns="" class="perl_Error">...</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;many-to-one</span> <span xmlns="" class="perl_Error">...</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        ......
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Error">&lt;</span>/natural-id&gt;</pre><div class="para">
				Although we recommend the use of surrogate keys as primary keys, you should try to identify natural keys for all entities. A natural key is a property or combination of properties that is unique and non-null. It is also immutable. Map the properties of the natural key inside the <code class="literal">&lt;natural-id&gt;</code> element. Hibernate will generate the necessary unique key and nullability constraints and, as a result, your mapping will be more self-documenting.
			</div><div class="para">
				It is recommended that you implement <code class="literal">equals()</code> and <code class="literal">hashCode()</code> to compare the natural key properties of the entity.
			</div><div class="para">
				This mapping is not intended for use with entities that have natural primary keys.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">mutable</code> (optional - defaults to <code class="literal">false</code>): by default, natural identifier properties are assumed to be immutable (constant).
					</div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-component">
      ⁠</a>5.1.15. Component and dynamic-component</h2></div></div></div><div class="para">
				The <code class="literal">&lt;component&gt;</code> element maps properties of a child object to columns of the table of a parent class. Components can, in turn, declare their own properties, components or collections. See the "Component" examples below:
			</div><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;component</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        name=</span><span xmlns="" class="perl_String">"propertyName"</span>                 <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        class=</span><span xmlns="" class="perl_String">"className"</span>                   <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        insert=</span><span xmlns="" class="perl_String">"true|false"</span>                 <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        update=</span><span xmlns="" class="perl_String">"true|false"</span>                 <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        access=</span><span xmlns="" class="perl_String">"field|property|ClassName"</span>   <img class="callout" alt="5" src="Common_Content/images/5.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        lazy=</span><span xmlns="" class="perl_String">"true|false"</span>                   <img class="callout" alt="6" src="Common_Content/images/6.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        optimistic-lock=</span><span xmlns="" class="perl_String">"true|false"</span>        <img class="callout" alt="7" src="Common_Content/images/7.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        unique=</span><span xmlns="" class="perl_String">"true|false"</span>                 <img class="callout" alt="8" src="Common_Content/images/8.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        node=</span><span xmlns="" class="perl_String">"element-name|."</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span> <span xmlns="" class="perl_Error">.....</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;many-to-one</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        ........
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/component&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the name of the property.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">class</code> (optional - defaults to the property type determined by reflection): the name of the component (child) class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">insert</code>: do the mapped columns appear in SQL <code class="literal">INSERTs</code>?
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">update</code>: do the mapped columns appear in SQL <code class="literal">UPDATEs</code>?
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional - defaults to <code class="literal">false</code>): specifies that this component should be fetched lazily when the instance variable is first accessed. It requires build-time bytecode instrumentation.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/7.png" alt="7"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>): specifies that updates to this component either do or do not require acquisition of the optimistic lock. It determines if a version increment should occur when this property is dirty.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/8.png" alt="8"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unique</code> (optional - defaults to <code class="literal">false</code>): specifies that a unique constraint exists upon all mapped columns of the component.
						</div></td></tr></table></div></div><div class="para">
				The child <code class="literal">&lt;property&gt;</code> tags map properties of the child class to table columns.
			</div><div class="para">
				The <code class="literal">&lt;component&gt;</code> element allows a <code class="literal">&lt;parent&gt;</code> subelement that maps a property of the component class as a reference back to the containing entity.
			</div><div class="para">
				The <code class="literal">&lt;dynamic-component&gt;</code> element allows a <code class="literal">Map</code> to be mapped as a component, where the property names refer to keys of the map. See <a class="xref" href="components.html#components-dynamic">Section 8.5, “Dynamic components”</a> for more information.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-properties">
      ⁠</a>5.1.16. Properties</h2></div></div></div><div class="para">
				The <code class="literal">&lt;properties&gt;</code> element allows the definition of a named, logical grouping of the properties of a class. The most important use of the construct is that it allows a combination of properties to be the target of a <code class="literal">property-ref</code>. It is also a convenient way to define a multi-column unique constraint. For example:
			</div><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;properties</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        name=</span><span xmlns="" class="perl_String">"logicalName"</span>                  <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        insert=</span><span xmlns="" class="perl_String">"true|false"</span>                 <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        update=</span><span xmlns="" class="perl_String">"true|false"</span>                 <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        optimistic-lock=</span><span xmlns="" class="perl_String">"true|false"</span>        <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        unique=</span><span xmlns="" class="perl_String">"true|false"</span>                 <img class="callout" alt="5" src="Common_Content/images/5.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span> <span xmlns="" class="perl_Error">.....</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;many-to-one</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        ........
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/properties&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the logical name of the grouping. It is <span class="emphasis"><em>not</em></span> an actual property name.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">insert</code>: do the mapped columns appear in SQL <code class="literal">INSERTs</code>?
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">update</code>: do the mapped columns appear in SQL <code class="literal">UPDATEs</code>?
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>): specifies that updates to these properties either do or do not require acquisition of the optimistic lock. It determines if a version increment should occur when these properties are dirty.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unique</code> (optional - defaults to <code class="literal">false</code>): specifies that a unique constraint exists upon all mapped columns of the component.
						</div></td></tr></table></div></div><div class="para">
				For example, if we have the following <code class="literal">&lt;properties&gt;</code> mapping:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Person"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"personNumber"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;properties</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"name"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            unique=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"firstName"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"initial"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"lastName"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/properties&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre><div class="para">
				You might have some legacy data association that refers to this unique key of the <code class="literal">Person</code> table, instead of to the primary key:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"person"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">         class=</span><span xmlns="" class="perl_String">"Person"</span><span xmlns="" class="perl_Others"> property-ref=</span><span xmlns="" class="perl_String">"name"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"firstName"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"initial"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"lastName"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/many-to-one&gt;</span></pre><div class="para">
				The use of this outside the context of mapping legacy data is not recommended.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-subclass">
      ⁠</a>5.1.17. Subclass</h2></div></div></div><div class="para">
				Polymorphic persistence requires the declaration of each subclass of the root persistent class. For the table-per-class-hierarchy mapping strategy, the <code class="literal">&lt;subclass&gt;</code> declaration is used. For example:
			</div><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;subclass</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        name=</span><span xmlns="" class="perl_String">"ClassName"</span>                              <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        discriminator-value=</span><span xmlns="" class="perl_String">"discriminator_value"</span>     <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        proxy=</span><span xmlns="" class="perl_String">"ProxyInterface"</span>                        <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        lazy=</span><span xmlns="" class="perl_String">"true|false"</span>                             <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        dynamic-update=</span><span xmlns="" class="perl_String">"true|false"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        dynamic-insert=</span><span xmlns="" class="perl_String">"true|false"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        entity-name=</span><span xmlns="" class="perl_String">"EntityName"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        node=</span><span xmlns="" class="perl_String">"element-name"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        extends=</span><span xmlns="" class="perl_String">"SuperclassName"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        .....
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/subclass&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the fully qualified class name of the subclass.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">discriminator-value</code> (optional - defaults to the class name): a value that distinguishes individual subclasses.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">proxy</code> (optional): specifies a class or interface used for lazy initializing proxies.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional - defaults to <code class="literal">true</code>): setting <code class="literal">lazy="false"</code> disables the use of lazy fetching.
						</div></td></tr></table></div></div><div class="para">
				Each subclass declares its own persistent properties and subclasses. <code class="literal">&lt;version&gt;</code> and <code class="literal">&lt;id&gt;</code> properties are assumed to be inherited from the root class. Each subclass in a hierarchy must define a unique <code class="literal">discriminator-value</code>. If this is not specified, the fully qualified Java class name is used.
			</div><div class="para">
				For information about inheritance mappings see <a class="xref" href="inheritance.html">Chapter 9, <em>Inheritance mapping</em></a>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-joinedsubclass">
      ⁠</a>5.1.18. Joined-subclass</h2></div></div></div><div class="para">
				Each subclass can also be mapped to its own table. This is called the table-per-subclass mapping strategy. An inherited state is retrieved by joining with the table of the superclass. To do this you use the <code class="literal">&lt;joined-subclass&gt;</code> element. For example:
			</div><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;joined-subclass</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        name=</span><span xmlns="" class="perl_String">"ClassName"</span>                    <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        table=</span><span xmlns="" class="perl_String">"tablename"</span>                   <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        proxy=</span><span xmlns="" class="perl_String">"ProxyInterface"</span>              <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        lazy=</span><span xmlns="" class="perl_String">"true|false"</span>                   <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        dynamic-update=</span><span xmlns="" class="perl_String">"true|false"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        dynamic-insert=</span><span xmlns="" class="perl_String">"true|false"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        schema=</span><span xmlns="" class="perl_String">"schema"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        catalog=</span><span xmlns="" class="perl_String">"catalog"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        extends=</span><span xmlns="" class="perl_String">"SuperclassName"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        persister=</span><span xmlns="" class="perl_String">"ClassName"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        subselect=</span><span xmlns="" class="perl_String">"SQL expression"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        entity-name=</span><span xmlns="" class="perl_String">"EntityName"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        node=</span><span xmlns="" class="perl_String">"element-name"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        .....
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/joined-subclass&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the fully qualified class name of the subclass.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">table</code>: the name of the subclass table.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">proxy</code> (optional): specifies a class or interface to use for lazy initializing proxies.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): setting <code class="literal">lazy="false"</code> disables the use of lazy fetching.
						</div></td></tr></table></div></div><div class="para">
				A discriminator column is not required for this mapping strategy. Each subclass must, however, declare a table column holding the object identifier using the <code class="literal">&lt;key&gt;</code> element. The mapping at the start of the chapter would then be re-written as:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_DataType">&lt;!DOCTYPE </span>hibernate-mapping PUBLIC
<span xmlns="" class="line">​</span>        "-//Hibernate/Hibernate Mapping DTD//EN"
<span xmlns="" class="line">​</span>        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"<span xmlns="" class="perl_DataType">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;hibernate-mapping</span><span xmlns="" class="perl_Others"> package=</span><span xmlns="" class="perl_String">"eg"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Cat"</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"CATS"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"uid"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"hilo"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/id&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"birthdate"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"date"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"color"</span><span xmlns="" class="perl_Others"> not-null=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"sex"</span><span xmlns="" class="perl_Others"> not-null=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"weight"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"mate"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;set</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"kittens"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"MOTHER"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                        <span xmlns="" class="perl_Keyword">&lt;one-to-many</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"Cat"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/set&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;joined-subclass</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"DomesticCat"</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"DOMESTIC_CATS"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">&lt;key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"CAT"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"name"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"string"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Keyword">&lt;/joined-subclass&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"eg.Dog"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>                <span xmlns="" class="perl_Comment">&lt;!-- mapping for Dog could go here --&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/hibernate-mapping&gt;</span></pre><div class="para">
				For information about inheritance mappings see <a class="xref" href="inheritance.html">Chapter 9, <em>Inheritance mapping</em></a>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-unionsubclass">
      ⁠</a>5.1.19. Union-subclass</h2></div></div></div><div class="para">
				A third option is to map only the concrete classes of an inheritance hierarchy to tables. This is called the table-per-concrete-class strategy. Each table defines all persistent states of the class, including the inherited state. In Hibernate, it is not necessary to explicitly map such inheritance hierarchies. You can map each class with a separate <code class="literal">&lt;class&gt;</code> declaration. However, if you wish use polymorphic associations (e.g. an association to the superclass of your hierarchy), you need to use the <code class="literal">&lt;union-subclass&gt;</code> mapping. For example:
			</div><div class="programlistingco"><pre class="programlisting">&lt;union-subclass
        name="ClassName"                     <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        table="tablename"                    <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        proxy="ProxyInterface"               <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        lazy="true|false"                    <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        abstract="true|false"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;
 
        &lt;property .... /&gt;
        ..... 
&lt;/union-subclass&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the fully qualified class name of the subclass.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">table</code>: the name of the subclass table.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">proxy</code> (optional): specifies a class or interface to use for lazy initializing proxies.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): setting <code class="literal">lazy="false"</code> disables the use of lazy fetching.
						</div></td></tr></table></div></div><div class="para">
				No discriminator column or key column is required for this mapping strategy.
			</div><div class="para">
				For information about inheritance mappings see <a class="xref" href="inheritance.html">Chapter 9, <em>Inheritance mapping</em></a>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-join">
      ⁠</a>5.1.20. Join</h2></div></div></div><div class="para">
				Using the <code class="literal">&lt;join&gt;</code> element, it is possible to map properties of one class to several tables that have a one-to-one relationship. For example:
			</div><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;join</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        table=</span><span xmlns="" class="perl_String">"tablename"</span>                        <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        schema=</span><span xmlns="" class="perl_String">"owner"</span>                           <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        catalog=</span><span xmlns="" class="perl_String">"catalog"</span>                        <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        fetch=</span><span xmlns="" class="perl_String">"join|select"</span>                      <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        inverse=</span><span xmlns="" class="perl_String">"true|false"</span>                     <img class="callout" alt="5" src="Common_Content/images/5.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        optional=</span><span xmlns="" class="perl_String">"true|false"</span><span xmlns="" class="perl_Keyword">&gt;</span>                   <img class="callout" alt="6" src="Common_Content/images/6.png"/>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key</span> <span xmlns="" class="perl_Error">...</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span> <span xmlns="" class="perl_Error">...</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/join&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">table</code>: the name of the joined table.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">schema</code> (optional): overrides the schema name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">catalog</code> (optional): overrides the catalog name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">fetch</code> (optional - defaults to <code class="literal">join</code>): if set to <code class="literal">join</code>, the default, Hibernate will use an inner join to retrieve a <code class="literal">&lt;join&gt;</code> defined by a class or its superclasses. It will use an outer join for a <code class="literal">&lt;join&gt;</code> defined by a subclass. If set to <code class="literal">select</code> then Hibernate will use a sequential select for a <code class="literal">&lt;join&gt;</code> defined on a subclass. This will be issued only if a row represents an instance of the subclass. Inner joins will still be used to retrieve a <code class="literal">&lt;join&gt;</code> defined by the class and its superclasses.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">inverse</code> (optional - defaults to <code class="literal">false</code>): if enabled, Hibernate will not insert or update the properties defined by this join.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optional</code> (optional - defaults to <code class="literal">false</code>): if enabled, Hibernate will insert a row only if the properties defined by this join are non-null. It will always use an outer join to retrieve the properties.
						</div></td></tr></table></div></div><div class="para">
				For example, address information for a person can be mapped to a separate table while preserving value type semantics for all properties:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Person"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">    table=</span><span xmlns="" class="perl_String">"PERSON"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"PERSON_ID"</span><span xmlns="" class="perl_Keyword">&gt;</span>...<span xmlns="" class="perl_Keyword">&lt;/id&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;join</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"ADDRESS"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"ADDRESS_ID"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"address"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"zip"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"country"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/join&gt;</span>
<span xmlns="" class="line">​</span>    ...</pre><div class="para">
				This feature is often only useful for legacy data models. We recommend fewer tables than classes and a fine-grained domain model. However, it is useful for switching between inheritance mapping strategies in a single hierarchy, as explained later.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-key">
      ⁠</a>5.1.21. Key</h2></div></div></div><div class="para">
				The <code class="literal">&lt;key&gt;</code> element has featured a few times within this guide. It appears anywhere the parent mapping element defines a join to a new table that references the primary key of the original table. It also defines the foreign key in the joined table:
			</div><div class="programlistingco"><pre class="programlisting">&lt;key
        column="columnname"                       <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        on-delete="noaction|cascade"              <img class="callout" alt="2" src="Common_Content/images/2.png"/>
        property-ref="propertyName"               <img class="callout" alt="3" src="Common_Content/images/3.png"/>
        not-null="true|false"                     <img class="callout" alt="4" src="Common_Content/images/4.png"/>
        update="true|false"                       <img class="callout" alt="5" src="Common_Content/images/5.png"/>
        unique="true|false"                       <img class="callout" alt="6" src="Common_Content/images/6.png"/>
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">column</code> (optional): the name of the foreign key column. This can also be specified by nested <code class="literal">&lt;column&gt;</code> element(s).
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">on-delete</code> (optional - defaults to <code class="literal">noaction</code>): specifies whether the foreign key constraint has database-level cascade delete enabled.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">property-ref</code> (optional): specifies that the foreign key refers to columns that are not the primary key of the original table. It is provided for legacy data.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">not-null</code> (optional): specifies that the foreign key columns are not nullable. This is implied whenever the foreign key is also part of the primary key.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">update</code> (optional): specifies that the foreign key should never be updated. This is implied whenever the foreign key is also part of the primary key.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">unique</code> (optional): specifies that the foreign key should have a unique constraint. This is implied whenever the foreign key is also the primary key.
						</div></td></tr></table></div></div><div class="para">
				For systems where delete performance is important, we recommend that all keys should be defined <code class="literal">on-delete="cascade"</code>. Hibernate uses a database-level <code class="literal">ON CASCADE DELETE</code> constraint, instead of many individual <code class="literal">DELETE</code> statements. Be aware that this feature bypasses Hibernate's usual optimistic locking strategy for versioned data.
			</div><div class="para">
				The <code class="literal">not-null</code> and <code class="literal">update</code> attributes are useful when mapping a unidirectional one-to-many association. If you map a unidirectional one-to-many association to a non-nullable foreign key, you <span class="emphasis"><em>must</em></span> declare the key column using <code class="literal">&lt;key not-null="true"&gt;</code>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-column">
      ⁠</a>5.1.22. Column and formula elements</h2></div></div></div><div class="para">
				Mapping elements which accept a <code class="literal">column</code> attribute will alternatively accept a <code class="literal">&lt;column&gt;</code> subelement. Likewise, <code class="literal">&lt;formula&gt;</code> is an alternative to the <code class="literal">formula</code> attribute. For example:
			</div><pre class="programlisting">&lt;column
        name="column_name"
        length="N"
        precision="N"
        scale="N"
        not-null="true|false"
        unique="true|false"
        unique-key="multicolumn_unique_key_name"
        index="index_name"
        sql-type="sql_type_name"
        check="SQL expression"
        default="SQL expression"/&gt;</pre><pre class="programlisting">&lt;formula&gt;SQL expression&lt;/formula&gt;</pre><div class="para">
				<code class="literal">column</code> and <code class="literal">formula</code> attributes can even be combined within the same property or association mapping to express, for example, exotic join conditions.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"homeAddress"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"Address"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        insert=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Others"> update=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"person_id"</span><span xmlns="" class="perl_Others"> not-null=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> length=</span><span xmlns="" class="perl_String">"10"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;formula&gt;</span>'MAILING'<span xmlns="" class="perl_Keyword">&lt;/formula&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/many-to-one&gt;</span></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-declaration-import">
      ⁠</a>5.1.23. Import</h2></div></div></div><div class="para">
				If your application has two persistent classes with the same name, and you do not want to specify the fully qualified package name in Hibernate queries, classes can be "imported" explicitly, rather than relying upon <code class="literal">auto-import="true"</code>. You can also import classes and interfaces that are not explicitly mapped:
			</div><pre class="programlisting">&lt;import class="java.lang.Object" rename="Universe"/&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;import
        class="ClassName"               <img class="callout" alt="1" src="Common_Content/images/1.png"/>
        rename="ShortName"              <img class="callout" alt="2" src="Common_Content/images/2.png"/>
/&gt;</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">class</code>: the fully qualified class name of any Java class.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">rename</code> (optional - defaults to the unqualified class name): a name that can be used in the query language.
						</div></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-types-anymapping">
      ⁠</a>5.1.24. Any</h2></div></div></div><div class="para">
				There is one more type of property mapping. The <code class="literal">&lt;any&gt;</code> mapping element defines a polymorphic association to classes from multiple tables. This type of mapping requires more than one column. The first column contains the type of the associated entity. The remaining columns contain the identifier. It is impossible to specify a foreign key constraint for this kind of association. This is not the usual way of mapping polymorphic associations and you should use this only in special cases. For example, for audit logs, user session data, etc.
			</div><div class="para">
				The <code class="literal">meta-type</code> attribute allows the application to specify a custom type that maps database column values to persistent classes that have identifier properties of the type specified by <code class="literal">id-type</code>. You must specify the mapping from values of the meta-type to class names.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;any</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"being"</span><span xmlns="" class="perl_Others"> id-type=</span><span xmlns="" class="perl_String">"long"</span><span xmlns="" class="perl_Others"> meta-type=</span><span xmlns="" class="perl_String">"string"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;meta-value</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"TBL_ANIMAL"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"Animal"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;meta-value</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"TBL_HUMAN"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"Human"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;meta-value</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"TBL_ALIEN"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"Alien"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"table_name"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/any&gt;</span></pre><div class="programlistingco"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;any</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        name=</span><span xmlns="" class="perl_String">"propertyName"</span>                      <img class="callout" alt="1" src="Common_Content/images/1.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        id-type=</span><span xmlns="" class="perl_String">"idtypename"</span>                     <img class="callout" alt="2" src="Common_Content/images/2.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        meta-type=</span><span xmlns="" class="perl_String">"metatypename"</span>                 <img class="callout" alt="3" src="Common_Content/images/3.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        cascade=</span><span xmlns="" class="perl_String">"cascade_style"</span>                  <img class="callout" alt="4" src="Common_Content/images/4.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        access=</span><span xmlns="" class="perl_String">"field|property|ClassName"</span>        <img class="callout" alt="5" src="Common_Content/images/5.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        optimistic-lock=</span><span xmlns="" class="perl_String">"true|false"</span>             <img class="callout" alt="6" src="Common_Content/images/6.png"/>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;meta-value</span> <span xmlns="" class="perl_Error">...</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;meta-value</span> <span xmlns="" class="perl_Error">...</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        .....
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;column</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;column</span> <span xmlns="" class="perl_Error">....</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        .....
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/any&gt;</span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/1.png" alt="1"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">name</code>: the property name.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/2.png" alt="2"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">id-type</code>: the identifier type.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/3.png" alt="3"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">meta-type</code> (optional - defaults to <code class="literal">string</code>): any type that is allowed for a discriminator mapping.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/4.png" alt="4"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">cascade</code> (optional- defaults to <code class="literal">none</code>): the cascade style.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/5.png" alt="5"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): the strategy Hibernate uses for accessing the property value.
						</div></td></tr><tr><td valign="top" align="left"><p><img class="callout" src="Common_Content/images/6.png" alt="6"/></p></td><td valign="top" align="left"><div class="para">
							<code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>): specifies that updates to this property either do or do not require acquisition of the optimistic lock. It defines whether a version increment should occur if this property is dirty.
						</div></td></tr></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-types">
      ⁠</a>5.2. Hibernate types</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-types-entitiesvalues">
      ⁠</a>5.2.1. Entities and values</h2></div></div></div><div class="para">
				In relation to the persistence service, Java language-level objects are classified into two groups:
			</div><div class="para">
				An <span class="emphasis"><em>entity</em></span> exists independently of any other objects holding references to the entity. Contrast this with the usual Java model, where an unreferenced object is garbage collected. Entities must be explicitly saved and deleted. Saves and deletions, however, can be <span class="emphasis"><em>cascaded</em></span> from a parent entity to its children. This is different from the ODMG model of object persistence by reachability and corresponds more closely to how application objects are usually used in large systems. Entities support circular and shared references. They can also be versioned.
			</div><div class="para">
				An entity's persistent state consists of references to other entities and instances of <span class="emphasis"><em>value</em></span> types. Values are primitives: collections (not what is inside a collection), components and certain immutable objects. Unlike entities, values in particular collections and components, <span class="emphasis"><em>are</em></span> persisted and deleted by reachability. Since value objects and primitives are persisted and deleted along with their containing entity, they cannot be independently versioned. Values have no independent identity, so they cannot be shared by two entities or collections.
			</div><div class="para">
				Until now, we have been using the term "persistent class" to refer to entities. We will continue to do that. Not all user-defined classes with a persistent state, however, are entities. A <span class="emphasis"><em>component</em></span> is a user-defined class with value semantics. A Java property of type <code class="literal">java.lang.String</code> also has value semantics. Given this definition, all types (classes) provided by the JDK have value type semantics in Java, while user-defined types can be mapped with entity or value type semantics. This decision is up to the application developer. An entity class in a domain model will normally have shared references to a single instance of that class, while composition or aggregation usually translates to a value type.
			</div><div class="para">
				We will revisit both concepts throughout this reference guide.
			</div><div class="para">
				The challenge is to map the Java type system, and the developers' definition of entities and value types, to the SQL/database type system. The bridge between both systems is provided by Hibernate. For entities, <code class="literal">&lt;class&gt;</code>, <code class="literal">&lt;subclass&gt;</code> and so on are used. For value types we use <code class="literal">&lt;property&gt;</code>, <code class="literal">&lt;component&gt;</code>etc., that usually have a <code class="literal">type</code> attribute. The value of this attribute is the name of a Hibernate <span class="emphasis"><em>mapping type</em></span>. Hibernate provides a range of mappings for standard JDK value types out of the box. You can write your own mapping types and implement your own custom conversion strategies.
			</div><div class="para">
				With the exception of collections, all built-in Hibernate types support null semantics.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-types-basictypes">
      ⁠</a>5.2.2. Basic value types</h2></div></div></div><div class="para">
				The built-in <span class="emphasis"><em>basic mapping types</em></span> can be roughly categorized into the following: 
				<div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">integer, long, short, float, double, character, byte, boolean, yes_no, true_false</code></span></dt><dd><div class="para">
								Type mappings from Java primitives or wrapper classes to appropriate (vendor-specific) SQL column types. <code class="literal">boolean, yes_no</code> and <code class="literal">true_false</code> are all alternative encodings for a Java <code class="literal">boolean</code> or <code class="literal">java.lang.Boolean</code>.
							</div></dd><dt><span class="term"><code class="literal">string</code></span></dt><dd><div class="para">
								A type mapping from <code class="literal">java.lang.String</code> to <code class="literal">VARCHAR</code> (or Oracle <code class="literal">VARCHAR2</code>).
							</div></dd><dt><span class="term"><code class="literal">date, time, timestamp</code></span></dt><dd><div class="para">
								Type mappings from <code class="literal">java.util.Date</code> and its subclasses to SQL types <code class="literal">DATE</code>, <code class="literal">TIME</code> and <code class="literal">TIMESTAMP</code> (or equivalent).
							</div></dd><dt><span class="term"><code class="literal">calendar, calendar_date</code></span></dt><dd><div class="para">
								Type mappings from <code class="literal">java.util.Calendar</code> to SQL types <code class="literal">TIMESTAMP</code> and <code class="literal">DATE</code> (or equivalent).
							</div></dd><dt><span class="term"><code class="literal">big_decimal, big_integer</code></span></dt><dd><div class="para">
								Type mappings from <code class="literal">java.math.BigDecimal</code> and <code class="literal">java.math.BigInteger</code> to <code class="literal">NUMERIC</code> (or Oracle <code class="literal">NUMBER</code>).
							</div></dd><dt><span class="term"><code class="literal">locale, timezone, currency</code></span></dt><dd><div class="para">
								Type mappings from <code class="literal">java.util.Locale</code>, <code class="literal">java.util.TimeZone</code> and <code class="literal">java.util.Currency</code> to <code class="literal">VARCHAR</code> (or Oracle <code class="literal">VARCHAR2</code>). Instances of <code class="literal">Locale</code> and <code class="literal">Currency</code> are mapped to their ISO codes. Instances of <code class="literal">TimeZone</code> are mapped to their <code class="literal">ID</code>.
							</div></dd><dt><span class="term"><code class="literal">class</code></span></dt><dd><div class="para">
								A type mapping from <code class="literal">java.lang.Class</code> to <code class="literal">VARCHAR</code> (or Oracle <code class="literal">VARCHAR2</code>). A <code class="literal">Class</code> is mapped to its fully qualified name.
							</div></dd><dt><span class="term"><code class="literal">binary</code></span></dt><dd><div class="para">
								Maps byte arrays to an appropriate SQL binary type.
							</div></dd><dt><span class="term"><code class="literal">text</code></span></dt><dd><div class="para">
								Maps long Java strings to a SQL <code class="literal">CLOB</code> or <code class="literal">TEXT</code> type.
							</div></dd><dt><span class="term"><code class="literal">serializable</code></span></dt><dd><div class="para">
								Maps serializable Java types to an appropriate SQL binary type. You can also indicate the Hibernate type <code class="literal">serializable</code> with the name of a serializable Java class or interface that does not default to a basic type.
							</div></dd><dt><span class="term"><code class="literal">clob, blob</code></span></dt><dd><div class="para">
								Type mappings for the JDBC classes <code class="literal">java.sql.Clob</code> and <code class="literal">java.sql.Blob</code>. These types can be inconvenient for some applications, since the blob or clob object cannot be reused outside of a transaction. Driver support is patchy and inconsistent.
							</div></dd><dt><span class="term"> <code class="literal">imm_date, imm_time, imm_timestamp, imm_calendar, imm_calendar_date, imm_serializable, imm_binary</code> </span></dt><dd><div class="para">
								Type mappings for what are considered mutable Java types. This is where Hibernate makes certain optimizations appropriate only for immutable Java types, and the application treats the object as immutable. For example, you should not call <code class="literal">Date.setTime()</code> for an instance mapped as <code class="literal">imm_timestamp</code>. To change the value of the property, and have that change made persistent, the application must assign a new, nonidentical, object to the property.
							</div></dd></dl></div>

			</div><div class="para">
				Unique identifiers of entities and collections can be of any basic type except <code class="literal">binary</code>, <code class="literal">blob</code> and <code class="literal">clob</code>. Composite identifiers are also allowed. See below for more information.
			</div><div class="para">
				The basic value types have corresponding <code class="literal">Type</code> constants defined on <code class="literal">org.hibernate.Hibernate</code>. For example, <code class="literal">Hibernate.STRING</code> represents the <code class="literal">string</code> type.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-types-custom">
      ⁠</a>5.2.3. Custom value types</h2></div></div></div><div class="para">
				It is relatively easy for developers to create their own value types. For example, you might want to persist properties of type <code class="literal">java.lang.BigInteger</code> to <code class="literal">VARCHAR</code> columns. Hibernate does not provide a built-in type for this. Custom types are not limited to mapping a property, or collection element, to a single table column. So, for example, you might have a Java property <code class="literal">getName()</code>/<code class="literal">setName()</code> of type <code class="literal">java.lang.String</code> that is persisted to the columns <code class="literal">FIRST_NAME</code>, <code class="literal">INITIAL</code>, <code class="literal">SURNAME</code>.
			</div><div class="para">
				To implement a custom type, implement either <code class="literal">org.hibernate.UserType</code> or <code class="literal">org.hibernate.CompositeUserType</code> and declare properties using the fully qualified classname of the type. View <code class="literal">org.hibernate.test.DoubleStringType</code> to see the kind of things that are possible.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"twoStrings"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"org.hibernate.test.DoubleStringType"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"first_string"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;column</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"second_string"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/property&gt;</span></pre><div class="para">
				Notice the use of <code class="literal">&lt;column&gt;</code> tags to map a property to multiple columns.
			</div><div class="para">
				The <code class="literal">CompositeUserType</code>, <code class="literal">EnhancedUserType</code>, <code class="literal">UserCollectionType</code>, and <code class="literal">UserVersionType</code> interfaces provide support for more specialized uses.
			</div><div class="para">
				You can even supply parameters to a <code class="literal">UserType</code> in the mapping file. To do this, your <code class="literal">UserType</code> must implement the <code class="literal">org.hibernate.usertype.ParameterizedType</code> interface. To supply parameters to your custom type, you can use the <code class="literal">&lt;type&gt;</code> element in your mapping files.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"priority"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;type</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"com.mycompany.usertypes.DefaultValueIntegerType"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"default"</span><span xmlns="" class="perl_Keyword">&gt;</span>0<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/type&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/property&gt;</span></pre><div class="para">
				The <code class="literal">UserType</code> can now retrieve the value for the parameter named <code class="literal">default</code> from the <code class="literal">Properties</code> object passed to it.
			</div><div class="para">
				If you regularly use a certain <code class="literal">UserType</code>, it is useful to define a shorter name for it. You can do this using the <code class="literal">&lt;typedef&gt;</code> element. Typedefs assign a name to a custom type, and can also contain a list of default parameter values if the type is parameterized.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;typedef</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"com.mycompany.usertypes.DefaultValueIntegerType"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"default_zero"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;param</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"default"</span><span xmlns="" class="perl_Keyword">&gt;</span>0<span xmlns="" class="perl_Keyword">&lt;/param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/typedef&gt;</span></pre><pre class="programlisting">&lt;property name="priority" type="default_zero"/&gt;</pre><div class="para">
				It is also possible to override the parameters supplied in a typedef on a case-by-case basis by using type parameters on the property mapping.
			</div><div class="para">
				Even though Hibernate's rich range of built-in types and support for components means you will rarely need to use a custom type, it is considered good practice to use custom types for non-entity classes that occur frequently in your application. For example, a <code class="literal">MonetaryAmount</code> class is a good candidate for a <code class="literal">CompositeUserType</code>, even though it could be mapped as a component. One reason for this is abstraction. With a custom type, your mapping documents would be protected against changes to the way monetary values are represented.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-entityname">
      ⁠</a>5.3. Mapping a class more than once</h1></div></div></div><div class="para">
			It is possible to provide more than one mapping for a particular persistent class. In this case, you must specify an <span class="emphasis"><em>entity name</em></span> to disambiguate between instances of the two mapped entities. By default, the entity name is the same as the class name. Hibernate lets you specify the entity name when working with persistent objects, when writing queries, or when mapping associations to the named entity.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Contract"</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"Contracts"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        entity-name=</span><span xmlns="" class="perl_String">"CurrentContract"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;set</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"history"</span><span xmlns="" class="perl_Others"> inverse=</span><span xmlns="" class="perl_String">"true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            order-by=</span><span xmlns="" class="perl_String">"effectiveEndDate desc"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"currentContractId"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;one-to-many</span><span xmlns="" class="perl_Others"> entity-name=</span><span xmlns="" class="perl_String">"HistoricalContract"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/set&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Contract"</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"ContractHistory"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        entity-name=</span><span xmlns="" class="perl_String">"HistoricalContract"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"currentContract"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"currentContractId"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            entity-name=</span><span xmlns="" class="perl_String">"CurrentContract"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre><div class="para">
			Associations are now specified using <code class="literal">entity-name</code> instead of <code class="literal">class</code>.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-quotedidentifiers">
      ⁠</a>5.4. SQL quoted identifiers</h1></div></div></div><div class="para">
			You can force Hibernate to quote an identifier in the generated SQL by enclosing the table or column name in backticks in the mapping document. Hibernate will use the correct quotation style for the SQL <code class="literal">Dialect</code>. This is usually double quotes, but the SQL Server uses brackets and MySQL uses backticks.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"LineItem"</span><span xmlns="" class="perl_Others"> table=</span><span xmlns="" class="perl_String">"`Line Item`"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"`Item Id`"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;generator</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"assigned"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/id&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"itemNumber"</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"`Item #`"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Error">&lt;</span>/class&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-alternatives">
      ⁠</a>5.5. Metadata alternatives</h1></div></div></div><div class="para">
			XML does not suit all users so there are some alternative ways to define O/R mapping metadata in Hibernate.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-xdoclet">
      ⁠</a>5.5.1. Using XDoclet markup</h2></div></div></div><div class="para">
				Many Hibernate users prefer to embed mapping information directly in source code using XDoclet <code class="literal">@hibernate.tags</code>. We do not cover this approach in this reference guide since it is considered part of XDoclet. However, we include the following example of the <code class="literal">Cat</code> class with XDoclet mappings:
			</div><pre class="programlisting Java"><span xmlns="" class="line">​</span>package eg;
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.util.Set;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.util.Date;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment"> * @hibernate.class</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment"> *  table="CATS"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment"> */</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Cat {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">Long</span> id; <span xmlns="" class="perl_Comment">// identifier</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Date birthdate;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Cat mother;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Set kittens;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Color color;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">char</span> sex;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">float</span> weight;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/*</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.id</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  generator-class="native"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="CAT_ID"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">Long</span> <span xmlns="" class="perl_Function">getId</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> id;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setId</span>(<span xmlns="" class="perl_DataType">Long</span> id) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">id</span>=id;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.many-to-one</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="PARENT_ID"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> Cat <span xmlns="" class="perl_Function">getMother</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> mother;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setMother</span>(Cat mother) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">mother</span> = mother;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.property</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="BIRTH_DATE"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> Date <span xmlns="" class="perl_Function">getBirthdate</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> birthdate;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setBirthdate</span>(Date date) {
<span xmlns="" class="line">​</span>        birthdate = date;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.property</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="WEIGHT"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">float</span> <span xmlns="" class="perl_Function">getWeight</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> weight;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setWeight</span>(<span xmlns="" class="perl_DataType">float</span> weight) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">weight</span> = weight;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.property</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="COLOR"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  not-null="true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> Color <span xmlns="" class="perl_Function">getColor</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> color;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setColor</span>(Color color) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">color</span> = color;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.set</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  inverse="true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  order-by="BIRTH_DATE"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.collection-key</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="PARENT_ID"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.collection-one-to-many</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> Set <span xmlns="" class="perl_Function">getKittens</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> kittens;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setKittens</span>(Set kittens) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">kittens</span> = kittens;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// addKitten not needed by Hibernate</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">addKitten</span>(Cat kitten) {
<span xmlns="" class="line">​</span>        kittens.<span xmlns="" class="perl_Function">add</span>(kitten);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">/**</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     * @hibernate.property</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  column="SEX"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  not-null="true"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     *  update="false"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">     */</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">char</span> <span xmlns="" class="perl_Function">getSex</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> sex;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setSex</span>(<span xmlns="" class="perl_DataType">char</span> sex) {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">sex</span>=sex;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}</pre><div class="para">
				See the Hibernate website for more examples of XDoclet and Hibernate.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-annotations">
      ⁠</a>5.5.2. Using JDK 5.0 Annotations</h2></div></div></div><div class="para">
				JDK 5.0 introduced XDoclet-style annotations at the language level that are type-safe and checked at compile time. This mechanism is more powerful than XDoclet annotations and better supported by tools and IDEs. IntelliJ IDEA, for example, supports auto-completion and syntax highlighting of JDK 5.0 annotations. The new revision of the EJB specification (JSR-220) uses JDK 5.0 annotations as the primary metadata mechanism for entity beans. Hibernate3 implements the <code class="literal">EntityManager</code> of JSR-220 (the persistence API). Support for mapping metadata is available via the <span class="emphasis"><em>Hibernate Annotations</em></span> package as a separate download. Both EJB3 (JSR-220) and Hibernate3 metadata is supported.
			</div><div class="para">
				This is an example of a POJO class annotated as an EJB entity bean:
			</div><pre class="programlisting Java"><span xmlns="" class="line">​</span>@Entity
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Customer <span xmlns="" class="perl_Keyword">implements</span> Serializable {
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @Id
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_DataType">Long</span> id;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    String firstName;
<span xmlns="" class="line">​</span>    String lastName;
<span xmlns="" class="line">​</span>    Date birthday;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @Transient
<span xmlns="" class="line">​</span>    Integer age;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @Embedded
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Address homeAddress;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">OneToMany</span>(cascade=CascadeType.<span xmlns="" class="perl_Function">ALL</span>)
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">JoinColumn</span>(name=<span xmlns="" class="perl_String">"CUSTOMER_ID"</span>)
<span xmlns="" class="line">​</span>    Set&lt;Order&gt; orders;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// Getter/setter and business methods</span>
<span xmlns="" class="line">​</span>}</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-generated">
      ⁠</a>5.6. Generated properties</h1></div></div></div><div class="para">
			Generated properties are properties that have their values generated by the database. Typically, Hibernate applications needed to <code class="literal">refresh</code> objects that contain any properties for which the database was generating values. Marking properties as generated, however, lets the application delegate this responsibility to Hibernate. When Hibernate issues an SQL INSERT or UPDATE for an entity that has defined generated properties, it immediately issues a select afterwards to retrieve the generated values.
		</div><div class="para">
			Properties marked as generated must additionally be non-insertable and non-updateable. Only <a class="xref" href="mapping.html#mapping-declaration-version">Section 5.1.9, “Version (optional)”</a>, <a class="xref" href="mapping.html#mapping-declaration-timestamp">Section 5.1.10, “Timestamp (optional)”</a>, and <a class="xref" href="mapping.html#mapping-declaration-property">Section 5.1.11, “Property”</a>, can be marked as generated.
		</div><div class="para">
			<code class="literal">never</code> (the default): the given property value is not generated within the database.
		</div><div class="para">
			<code class="literal">insert</code>: the given property value is generated on insert, but is not regenerated on subsequent updates. Properties like created-date fall into this category. Even though <a class="xref" href="mapping.html#mapping-declaration-version">Section 5.1.9, “Version (optional)”</a> and <a class="xref" href="mapping.html#mapping-declaration-timestamp">Section 5.1.10, “Timestamp (optional)”</a> properties can be marked as generated, this option is not available.
		</div><div class="para">
			<code class="literal">always</code>: the property value is generated both on insert and on update.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="mapping-database-object">
      ⁠</a>5.7. Auxiliary database objects</h1></div></div></div><div class="para">
			Auxiliary database objects allow for the CREATE and DROP of arbitrary database objects. In conjunction with Hibernate's schema evolution tools, they have the ability to fully define a user schema within the Hibernate mapping files. Although designed specifically for creating and dropping things like triggers or stored procedures, any SQL command that can be run via a <code class="literal">java.sql.Statement.execute()</code> method is valid (for example, ALTERs, INSERTS, etc.). There are essentially two modes for defining auxiliary database objects:
		</div><div class="para">
			The first mode is to explicitly list the CREATE and DROP commands in the mapping file:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;hibernate-mapping&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;database-object&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;create&gt;</span>CREATE TRIGGER my_trigger ...<span xmlns="" class="perl_Keyword">&lt;/create&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;drop&gt;</span>DROP TRIGGER my_trigger<span xmlns="" class="perl_Keyword">&lt;/drop&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/database-object&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/hibernate-mapping&gt;</span></pre><div class="para">
			The second mode is to supply a custom class that constructs the CREATE and DROP commands. This custom class must implement the <code class="literal">org.hibernate.mapping.AuxiliaryDatabaseObject</code> interface.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;hibernate-mapping&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;database-object&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;definition</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"MyTriggerDefinition"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/database-object&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/hibernate-mapping&gt;</span></pre><div class="para">
			Additionally, these database objects can be optionally scoped so that they only apply when certain dialects are used.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;hibernate-mapping&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;database-object&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;definition</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"MyTriggerDefinition"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;dialect-scope</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hibernate.dialect.Oracle9iDialect"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;dialect-scope</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"org.hibernate.dialect.Oracle10gDialect"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/database-object&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/hibernate-mapping&gt;</span></pre></div></div></body></html>