<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 18. XML Mapping</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="xml">
      ⁠</a>Chapter 18. XML Mapping</h1></div></div></div><div class="para">
		<span class="emphasis"><em> XML Mapping is an experimental feature in Hibernate 3.0 and is currently under active development. </em></span>
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="xml-intro">
      ⁠</a>18.1. Working with XML data</h1></div></div></div><div class="para">
			Hibernate allows you to work with persistent XML data in much the same way you work with persistent POJOs. A parsed XML tree can be thought of as another way of representing the relational data at the object level, instead of POJOs.
		</div><div class="para">
			Hibernate supports dom4j as API for manipulating XML trees. You can write queries that retrieve dom4j trees from the database and have any modification you make to the tree automatically synchronized to the database. You can even take an XML document, parse it using dom4j, and write it to the database with any of Hibernate's basic operations: <code class="literal">persist(), saveOrUpdate(), merge(), delete(), replicate()</code> (merging is not yet supported).
		</div><div class="para">
			This feature has many applications including data import/export, externalization of entity data via JMS or SOAP and XSLT-based reporting.
		</div><div class="para">
			A single mapping can be used to simultaneously map properties of a class and nodes of an XML document to the database, or, if there is no class to map, it can be used to map just the XML.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="xml-intro-mapping">
      ⁠</a>18.1.1. Specifying XML and class mapping together</h2></div></div></div><div class="para">
				Here is an example of mapping a POJO and XML simultaneously:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Account"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        table=</span><span xmlns="" class="perl_String">"ACCOUNTS"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        node=</span><span xmlns="" class="perl_String">"account"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"accountId"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"ACCOUNT_ID"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"@id"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"customer"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"CUSTOMER_ID"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"customer/@id"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            embed-xml=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"balance"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"BALANCE"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"balance"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="xml-onlyxml">
      ⁠</a>18.1.2. Specifying only an XML mapping</h2></div></div></div><div class="para">
				Here is an example where there is no POJO class:
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> entity-name=</span><span xmlns="" class="perl_String">"Account"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        table=</span><span xmlns="" class="perl_String">"ACCOUNTS"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        node=</span><span xmlns="" class="perl_String">"account"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"ACCOUNT_ID"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"@id"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            type=</span><span xmlns="" class="perl_String">"string"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;many-to-one</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"customerId"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"CUSTOMER_ID"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"customer/@id"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            embed-xml=</span><span xmlns="" class="perl_String">"false"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            entity-name=</span><span xmlns="" class="perl_String">"Customer"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"balance"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"BALANCE"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"balance"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            type=</span><span xmlns="" class="perl_String">"big_decimal"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre><div class="para">
				This mapping allows you to access the data as a dom4j tree, or as a graph of property name/value pairs or java <code class="literal">Map</code>s. The property names are purely logical constructs that can be referred to in HQL queries.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="xml-mapping">
      ⁠</a>18.2. XML mapping metadata</h1></div></div></div><div class="para">
			A range of Hibernate mapping elements accept the <code class="literal">node</code> attribute. This lets you specify the name of an XML attribute or element that holds the property or entity data. The format of the <code class="literal">node</code> attribute must be one of the following:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<code class="literal">"element-name"</code>: map to the named XML element
				</div></li><li class="listitem"><div class="para">
					<code class="literal">"@attribute-name"</code>: map to the named XML attribute
				</div></li><li class="listitem"><div class="para">
					<code class="literal">"."</code>: map to the parent element
				</div></li><li class="listitem"><div class="para">
					<code class="literal">"element-name/@attribute-name"</code>: map to the named attribute of the named element
				</div></li></ul></div><div class="para">
			For collections and single valued associations, there is an additional <code class="literal">embed-xml</code> attribute. If <code class="literal">embed-xml="true"</code>, the default, the XML tree for the associated entity (or collection of value type) will be embedded directly in the XML tree for the entity that owns the association. Otherwise, if <code class="literal">embed-xml="false"</code>, then only the referenced identifier value will appear in the XML for single point associations and collections will not appear at all.
		</div><div class="para">
			Do not leave <code class="literal">embed-xml="true"</code> for too many associations, since XML does not deal well with circularity.
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;class</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"Customer"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        table=</span><span xmlns="" class="perl_String">"CUSTOMER"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">        node=</span><span xmlns="" class="perl_String">"customer"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;id</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"id"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            column=</span><span xmlns="" class="perl_String">"CUST_ID"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"@id"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>            
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;map</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"accounts"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"."</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            embed-xml=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"CUSTOMER_ID"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                not-null=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;map-key</span><span xmlns="" class="perl_Others"> column=</span><span xmlns="" class="perl_String">"SHORT_DESC"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                node=</span><span xmlns="" class="perl_String">"@short-desc"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                type=</span><span xmlns="" class="perl_String">"string"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;one-to-many</span><span xmlns="" class="perl_Others"> entity-name=</span><span xmlns="" class="perl_String">"Account"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                embed-xml=</span><span xmlns="" class="perl_String">"false"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                node=</span><span xmlns="" class="perl_String">"account"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/map&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;component</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"name"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            node=</span><span xmlns="" class="perl_String">"name"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"firstName"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                node=</span><span xmlns="" class="perl_String">"first-name"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"initial"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                node=</span><span xmlns="" class="perl_String">"initial"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"lastName"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                node=</span><span xmlns="" class="perl_String">"last-name"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/component&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/class&gt;</span></pre><div class="para">
			In this case, the collection of account ids is embedded, but not the actual account data. The following HQL query:
		</div><pre class="programlisting">from Customer c left join fetch c.accounts where c.lastName like :lastName</pre><div class="para">
			would return datasets such as this:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;customer</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"123456789"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;account</span><span xmlns="" class="perl_Others"> short-desc=</span><span xmlns="" class="perl_String">"Savings"</span><span xmlns="" class="perl_Keyword">&gt;</span>987632567<span xmlns="" class="perl_Keyword">&lt;/account&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;account</span><span xmlns="" class="perl_Others"> short-desc=</span><span xmlns="" class="perl_String">"Credit Card"</span><span xmlns="" class="perl_Keyword">&gt;</span>985612323<span xmlns="" class="perl_Keyword">&lt;/account&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;first-name&gt;</span>Gavin<span xmlns="" class="perl_Keyword">&lt;/first-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;initial&gt;</span>A<span xmlns="" class="perl_Keyword">&lt;/initial&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;last-name&gt;</span>King<span xmlns="" class="perl_Keyword">&lt;/last-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/name&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/customer&gt;</span></pre><div class="para">
			If you set <code class="literal">embed-xml="true"</code> on the <code class="literal">&lt;one-to-many&gt;</code> mapping, the data might look more like this:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;customer</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"123456789"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;account</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"987632567"</span><span xmlns="" class="perl_Others"> short-desc=</span><span xmlns="" class="perl_String">"Savings"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;customer</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"123456789"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;balance&gt;</span>100.29<span xmlns="" class="perl_Keyword">&lt;/balance&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/account&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;account</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"985612323"</span><span xmlns="" class="perl_Others"> short-desc=</span><span xmlns="" class="perl_String">"Credit Card"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;customer</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"123456789"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;balance&gt;</span>-2370.34<span xmlns="" class="perl_Keyword">&lt;/balance&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/account&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;first-name&gt;</span>Gavin<span xmlns="" class="perl_Keyword">&lt;/first-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;initial&gt;</span>A<span xmlns="" class="perl_Keyword">&lt;/initial&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;last-name&gt;</span>King<span xmlns="" class="perl_Keyword">&lt;/last-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/name&gt;</span>
<span xmlns="" class="line">​</span>    ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/customer&gt;</span></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="xml-manipulation">
      ⁠</a>18.3. Manipulating XML data</h1></div></div></div><div class="para">
			You can also re-read and update XML documents in the application. You can do this by obtaining a dom4j session:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span>Document doc = ....;
<span xmlns="" class="line">​</span>       
<span xmlns="" class="line">​</span>Session session = factory.<span xmlns="" class="perl_Function">openSession</span>();
<span xmlns="" class="line">​</span>Session dom4jSession = session.<span xmlns="" class="perl_Function">getSession</span>(EntityMode.<span xmlns="" class="perl_Function">DOM4J</span>);
<span xmlns="" class="line">​</span>Transaction tx = session.<span xmlns="" class="perl_Function">beginTransaction</span>();
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>List results = dom4jSession
<span xmlns="" class="line">​</span>    .<span xmlns="" class="perl_Function">createQuery</span>(<span xmlns="" class="perl_String">"from Customer c left join fetch c.accounts where c.lastName like :lastName"</span>)
<span xmlns="" class="line">​</span>    .<span xmlns="" class="perl_Function">list</span>();
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">for</span> ( <span xmlns="" class="perl_DataType">int</span> i=<span xmlns="" class="perl_Float">0</span>; i&lt;results.<span xmlns="" class="perl_Function">size</span>(); i++ ) {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">//add the customer data to the XML document</span>
<span xmlns="" class="line">​</span>    Element customer = (Element) results.<span xmlns="" class="perl_Function">get</span>(i);
<span xmlns="" class="line">​</span>    doc.<span xmlns="" class="perl_Function">add</span>(customer);
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>tx.<span xmlns="" class="perl_Function">commit</span>();
<span xmlns="" class="line">​</span>session.<span xmlns="" class="perl_Function">close</span>();</pre><pre class="programlisting"><span xmlns="" class="line">​</span>Session session = factory.<span xmlns="" class="perl_Function">openSession</span>();
<span xmlns="" class="line">​</span>Session dom4jSession = session.<span xmlns="" class="perl_Function">getSession</span>(EntityMode.<span xmlns="" class="perl_Function">DOM4J</span>);
<span xmlns="" class="line">​</span>Transaction tx = session.<span xmlns="" class="perl_Function">beginTransaction</span>();
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>Element cust = (Element) dom4jSession.<span xmlns="" class="perl_Function">get</span>(<span xmlns="" class="perl_String">"Customer"</span>, customerId);
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">for</span> ( <span xmlns="" class="perl_DataType">int</span> i=<span xmlns="" class="perl_Float">0</span>; i&lt;results.<span xmlns="" class="perl_Function">size</span>(); i++ ) {
<span xmlns="" class="line">​</span>    Element customer = (Element) results.<span xmlns="" class="perl_Function">get</span>(i);
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">//change the customer name in the XML and database</span>
<span xmlns="" class="line">​</span>    Element name = customer.<span xmlns="" class="perl_Function">element</span>(<span xmlns="" class="perl_String">"name"</span>);
<span xmlns="" class="line">​</span>    name.<span xmlns="" class="perl_Function">element</span>(<span xmlns="" class="perl_String">"first-name"</span>).<span xmlns="" class="perl_Function">setText</span>(firstName);
<span xmlns="" class="line">​</span>    name.<span xmlns="" class="perl_Function">element</span>(<span xmlns="" class="perl_String">"initial"</span>).<span xmlns="" class="perl_Function">setText</span>(initial);
<span xmlns="" class="line">​</span>    name.<span xmlns="" class="perl_Function">element</span>(<span xmlns="" class="perl_String">"last-name"</span>).<span xmlns="" class="perl_Function">setText</span>(lastName);
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>tx.<span xmlns="" class="perl_Function">commit</span>();
<span xmlns="" class="line">​</span>session.<span xmlns="" class="perl_Function">close</span>();</pre><div class="para">
			When implementing XML-based data import/export, it is useful to combine this feature with Hibernate's <code class="literal">replicate()</code> operation.
		</div></div></div></body></html>