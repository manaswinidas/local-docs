<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Eviction Policies</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="eviction">
      ⁠</a>Chapter 3. Eviction Policies</h1></div></div></div><div class="qandaset"><a id="idm139890504498144">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="qandaset"><div class="qandaentry"><div class="question"><a id="idm139890479584000">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
					Does JBoss Cache support eviction policies?
				</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
					Yes. JBoss Cache currently supports multiple eviction policies such as LRU, MRU, and FIFO. Users can also plug in their own eviction policy algorithms. See the <em class="citetitle">JBoss Cache User Guide</em> for details.
				</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139890458331936">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
					Does JBoss Cache's eviction policy operate in replication mode?
				</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
					Yes and no.
				</div><div class="para">
					The eviction policy only operates in local mode. That is, nodes are only evicted locally. This may cause the cache contents not to be synchronized temporarily. But when a user tries to obtain the cached contents of an evicted node and finds out that is null (e.g., <code class="literal">get</code> returns null), it should get it from the other data source and re-populate the data in the cache. During this moment, the node content will be propagated and the cache content will be in sync.
				</div><div class="para">
					However, you still can run eviction policies with cache mode set to either <code class="literal">REPL_SYNC</code> or <code class="literal">REPL_ASYNC</code>. Depending on your use case, you can set multiple cache instances to have their own eviction policy (which are applied locally) or just have selected instances with eviction policies activated.
				</div><div class="para">
					Also note that, with cache loader option, a locally evicted node can also be persisted to the back end store and a user can retrieve it from the store later on.
				</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139890461845392">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
					Does JBoss Cache support <code class="literal">Region</code>?
				</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
					Yes. JBoss Cache has the notion of region where a user can configure the eviction policy parameters (e.g., <code class="literal">maxNodes</code> or <code class="literal">timeToIdleSeconds</code>)
				</div><div class="para">
					A region in JBoss Cache denotes a portion of tree hierarchy, e.g., a fully qualified name (<code class="literal">org.jboss.cache.Fqn</code>). For example, a user can define <code class="literal">/org/jboss</code> and <code class="literal">/org/foocom</code> as two separate regions. But note that you can configure the region programmatically now, i.e., everything has to be configured through the XML file.
				</div></div></div></div><div class="qandaentry"><div class="question"><a id="idm139890504859248">
      ⁠</a><div class="label">Q:</div><div class="data"><div class="para">
					I have turned on the eviction policy. Why do I still get an Out of Memory (OOM) exception?
				</div></div></div><div class="answer"><div class="label">A:</div><div class="data"><div class="para">
					OOM can happen when the speed of cache access exceeds the speed of eviction policy handling timer. Eviction policy handler will wake up every <code class="literal">wakeUpInterval</code> milliseconds (or <code class="literal">wakeUpIntervalSeconds</code> seconds, prior to 3.x) to process the eviction event queue. So when the queue size is full, it will create a backlog and cause out-of-memory exceptions to happen unless the eviction timer catches up. To address this problem, in addition to increase the VM heap size, you can also reduce the <code class="literal">wakeUpInterval</code> so the timer thread processes the queue more frequently.
				</div></div></div></div></div></div></div></body></html>