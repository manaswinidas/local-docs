<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. Batching API</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="batching">
      ⁠</a>Chapter 4. Batching API</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="batching.intro">
      ⁠</a>4.1. Introduction</h1></div></div></div><div class="para">
			The batching API, introduced in JBoss Cache 3.x, is intended as a mechanism to batch the way calls are replicated independent of JTA transactions.
		</div><div class="para">
			This is useful when you want to batch up replication calls within a scope finer than that of any ongoing JTA transactions.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="batching.configuring">
      ⁠</a>4.2. Configuring batching</h1></div></div></div><div class="para">
			To use batching, you need to enable invocation batching in your cache configuration, either on the <code class="literal">Configuration</code> object:
		</div><pre class="programlisting JAVA">
   Configuration.setInvocationBatchingEnabled(true);
</pre><div class="para">
			or in your XML file:
		</div><pre class="programlisting XML">
   &lt;invocationBatching enabled="true"/&gt;
</pre><div class="para">
			By default, invocation batching is disabled. Note that you do <span class="emphasis"><em>not</em></span> have to have a transaction manager defined to use batching.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="batching.api">
      ⁠</a>4.3. Batching API</h1></div></div></div><div class="para">
			Once you have configured your cache to use batching, you use it by calling <code class="literal">startBatch()</code> and <code class="literal">endBatch()</code> on <code class="literal">Cache</code>. E.g.,
		</div><pre class="programlisting JAVA">
   Cache cache = getCache();

   // not using a batch
   cache.put("/a", "key", "value"); // will replicate immediately

   // using a batch
   cache.startBatch();
   cache.put("/a", "key", "value");
   cache.put("/b", "key", "value");
   cache.put("/c", "key", "value");
   cache.endBatch(true); // This will now replicate the modifications since the batch was started.

   cache.startBatch();
   cache.put("/a", "key", "value");
   cache.put("/b", "key", "value");
   cache.put("/c", "key", "value");
   cache.endBatch(false); // This will "discard" changes made in the batch

</pre></div></div></body></html>