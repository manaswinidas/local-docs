<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 10. Java Properties</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-HTTP_Connector_Guide-Java_Properties">
      ⁠</a>Chapter 10. Java Properties</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139711978254560">
      ⁠</a>10.1. Configuration Properties</h1></div></div></div><div class="para">
			The tables below enumerate the configuration properties available to an application server node. The location for these properties depends on how mod_cluster is configured.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="chap-HTTP_Connector_Guide-Java_Properties-mcmp">
      ⁠</a>10.1.1. Proxy Discovery Configuration</h2></div></div></div><div class="para">
				The list of proxies from which an application expects to receive AJP connections is either defined statically, via the addresses defined in the <em class="parameter"><code>proxyList</code></em> configuration property; or discovered dynamically via the <code class="literal">advertise</code> mechanism.
			</div><div class="para">
				Using a special <em class="parameter"><code>mod_advertise</code></em> module, proxies can advertise their existence by periodically broadcasting a multicast message containing its address/port.
			</div><div class="para">
				This functionality is enabled via the <em class="parameter"><code>advertise</code></em> configuration property. If configured to listen, a server can learn of the proxy's existence, then notify that proxy of its own existence, and update its configuration accordingly. This frees both the proxy <span class="emphasis"><em>and</em></span> the server from having to define static, environment-specific configuration values.
			</div><div class="table"><a id="idm139711979702672">
      ⁠</a><p class="title"><strong>Table 10.1. Proxy Discovery</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Proxy Discovery"><colgroup><col/><col/><col/></colgroup><thead><tr><th> <div class="para">
								Attribute
							</div>
							 </th><th> <div class="para">
								Default
							</div>
							 </th><th> <div class="para">
								Description
							</div>
							 </th></tr></thead><tbody><tr><td> <div class="para">
								<em class="parameter"><code>proxyList</code></em>
							</div>
							 </td><td> <div class="para">
								None
							</div>
							 </td><td> <div class="para">
								Defines a comma-separated list of <span class="application"><strong>httpd</strong></span> proxies with which this node will initially communicate. Value should be of the form:
							</div>
							 <div class="para">
								<code class="literal">address1:port1,address2:port2</code>
							</div>
							 <div class="para">
								Using the default configuration, this property can by manipulated via the <em class="parameter"><code>jboss.modcluster.proxyList</code></em> system property.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>excludedContexts</code></em>
							</div>
							 </td><td> <div class="para">
								ROOT,admin-console,invoker,jbossws,jmx-console,juddi,web-console
							</div>
							 </td><td> <div class="para">
								List of contexts to exclude from <span class="application"><strong>httpd</strong></span> registration, of the form:
							</div>
							 <div class="para">
								<code class="literal">host1:context1,host2:context2,host3:context3</code>
							</div>
							 <div class="para">
								If no host is indicated, it is assumed to be the default host of the server (e.g. localhost). "ROOT" indicates the root context. Using the default configuration, this property can by manipulated via the <em class="parameter"><code>jboss.modcluster.excludedContexts</code></em> system property.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>autoEnableContexts</code></em>
							</div>
							 </td><td> <div class="para">
								True
							</div>
							 </td><td> <div class="para">
								If <code class="literal">false</code>, the contexts are registered disabled in <span class="application"><strong>httpd</strong></span>, they need to be enabled via the <code class="code">enable()</code> MBean method or via <span class="application"><strong>mod_cluster_manager</strong></span>. 
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>stopContextTimeout</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">10</code>
							</div>
							 </td><td> <div class="para">
								The number of seconds to wait for clean shutdown of a context,. This could be the completion of all pending requests for a distributable context or the destruction/expiration of active sessions for a non-distributable context. 
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>proxyURL</code></em>
							</div>
							 </td><td> <div class="para">
								None
							</div>
							 </td><td> <div class="para">
								If defined, this value will be prepended to the URL of MCMP commands.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>socketTimeout</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">20000</code>
							</div>
							 </td><td> <div class="para">
								Number of milliseconds to wait for a response from an <span class="application"><strong>httpd</strong></span> proxy to MCMP commands before timing out and flagging the proxy as in error.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>advertise</code></em>
							</div>
							 </td><td> <div class="para">
								This is <code class="literal">true</code> if <em class="parameter"><code>proxyList</code></em> is undefined, <code class="literal">false</code> otherwise.
							</div>
							 </td><td> <div class="para">
								If enabled, <span class="application"><strong>httpd</strong></span> proxies will be auto-discovered via multicast announcements. This can be used either in concert or in place of a static <em class="parameter"><code>proxyList</code></em>.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>advertiseGroupAddress</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">224.0.1.105</code>
							</div>
							 </td><td> <div class="para">
								The UDP address on which to listen for <span class="application"><strong>httpd</strong></span> proxy multicast advertisements.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>advertisePort</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">23364</code>
							</div>
							 </td><td> <div class="para">
								The UDP port on which to listen for <span class="application"><strong>httpd</strong></span> proxy multicast advertisements.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>advertiseSecurityKey</code></em>
							</div>
							 </td><td> <div class="para">
								None
							</div>
							 </td><td> <div class="para">
								If specified, <span class="application"><strong>httpd</strong></span> proxy advertisements checksums will be verified using this value as a salt.
							</div>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-HTTP_Connector_Guide-Proxy_Configuration">
      ⁠</a>10.1.2. Proxy Configuration</h2></div></div></div><div class="para">
				The following configuration values are sent to proxies during server startup, when a proxy is detected via the advertise mechanism, or during the resetting of a proxy's configuration during error recovery.
			</div><div class="table"><a id="idm139711921932560">
      ⁠</a><p class="title"><strong>Table 10.2. Proxy Configuration</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Proxy Configuration"><colgroup><col/><col/><col/></colgroup><thead><tr><th> <div class="para">
								Attribute
							</div>
							 </th><th> <div class="para">
								Default
							</div>
							 </th><th> <div class="para">
								Description
							</div>
							 </th></tr></thead><tbody><tr><td> <div class="para">
								<em class="parameter"><code>stickySession</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">true</code>
							</div>
							 </td><td> <div class="para">
								Indicates whether subsequent requests for a given session should, if possible, be routed to the same node.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>stickySessionRemove</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">false</code>
							</div>
							 </td><td> <div class="para">
								Indicates whether the <span class="application"><strong>httpd</strong></span> proxy should remove session stickiness in the event that the balancer is unable to route a request to the node to which it is stuck. This property is ignored if <em class="parameter"><code>stickySession</code></em> is <code class="literal">false</code>.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>stickySessionForce</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">true</code>
							</div>
							 </td><td> <div class="para">
								Indicates whether the <span class="application"><strong>httpd</strong></span> proxy should return an error in the event that the balancer is unable to route a request to the node to which it is stuck. This property is ignored if <em class="parameter"><code>stickySession</code></em> is false.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>workerTimeout</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">-1</code>
							</div>
							 </td><td> <div class="para">
								Number of seconds to wait for a worker to become available to handle a request. When all the workers of a balancer are unusable, mod_cluster will retry after a specified period (workerTimeout/100) to find a usable worker.
							</div>
							 <div class="para">
								A value of <code class="literal">-1</code> indicates that the <span class="application"><strong>httpd</strong></span> will not wait for a worker to be available and will return an error if none is available.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>maxAttempts</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">1</code>
							</div>
							 </td><td> <div class="para">
								Number of times an <span class="application"><strong>httpd</strong></span> proxy will attempt to send a given request to a worker before giving up. The minimum value is <code class="literal">1</code>, meaning try only once.
							</div>
							 <div class="para">
								<span class="bold bold"><strong>Note that mod_proxy default is also <code class="literal">1</code>: no retry.</strong></span>
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>flushPackets</code></em>
							</div>
							 </td><td> <div class="para">
								<em class="parameter"><code>false</code></em>
							</div>
							 </td><td> <div class="para">
								Enables/disables packet flushing.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>flushWait</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">-1</code>
							</div>
							 </td><td> <div class="para">
								Time to wait before flushing packets. A value of <code class="literal">-1</code> means wait forever.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>ping</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">10 seconds</code>
							</div>
							 </td><td> <div class="para">
								Time to wait for an answer to a ping.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>smax</code></em>
							</div>
							 </td><td> <div class="para">
								Determined by <span class="application"><strong>httpd</strong></span> configuration.
							</div>
							 </td><td> <div class="para">
								<span class="bold bold"><strong>S</strong></span>oft <span class="bold bold"><strong>max</strong></span>imum idle connection count (that is the <em class="parameter"><code>smax</code></em> in worker mod_proxy documentation). The maximum value depends on the <span class="application"><strong>httpd</strong></span> thread configuration (<code class="literal">ThreadsPerChild</code> or <code class="literal">1</code>).
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>ttl</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">60 seconds</code>
							</div>
							 </td><td> <div class="para">
								Time to live (in seconds) for idle connections above <em class="parameter"><code>smax</code></em>.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>nodeTimeout</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">-1</code> (none)
							</div>
							 </td><td> <div class="para">
								Timeout (in seconds) for proxy connections to a node. That is the time mod_cluster will wait for the back-end response before returning an error.
							</div>
							 <div class="para">
								This corresponds to <em class="parameter"><code>timeout</code></em> in the worker mod_proxy documentation.
							</div>
							 <div class="para">
								Note that mod_cluster always uses a CPing/CPong before forwarding a request and the <em class="parameter"><code>connectiontimeout</code></em> value used by mod_cluster is the ping value.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>balancer</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">mycluster</code>
							</div>
							 </td><td> <div class="para">
								The balancer name.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>domain</code></em>
							</div>
							 </td><td> <div class="para">
								None
							</div>
							 </td><td> <div class="para">
								If specified, load will be balanced among <code class="literal">jvmRoutes</code> with the same domain. This is primarily used in conjunction with partitioned session replication (e.g. buddy replication).
							</div>
							 </td></tr></tbody></table></div></div><div class="para">
				<span class="bold bold"><strong>Note: When nodeTimeout is not defined the ProxyTimeout directive Proxy is used. If ProxyTimeout is not defined the server timeout (Timeout) is used (default 300 seconds). nodeTimeout, ProxyTimeout or Timeout is set at the socket level.</strong></span>
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-HTTP_Connector_Guide-SSL_Configuration">
      ⁠</a>10.1.3. SSL Configuration</h2></div></div></div><div class="para">
				The communication channel between application servers and <span class="application"><strong>httpd</strong></span> proxies uses HTTP by default. This channel can be secured using HTTPS by setting the <em class="parameter"><code>ssl</code></em> parameter to true.
			</div><div class="para">
				<span class="bold bold"><strong>Note: This HTTP/HTTPS channel should not be confused with the processing of HTTP/HTTPS client requests.</strong></span>
			</div><div class="table"><a id="idm139711975683392">
      ⁠</a><p class="title"><strong>Table 10.3. SSL Configuration</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="SSL Configuration"><colgroup><col/><col/><col/></colgroup><thead><tr><th> <div class="para">
								Attribute
							</div>
							 </th><th> <div class="para">
								Default
							</div>
							 </th><th> <div class="para">
								Description
							</div>
							 </th></tr></thead><tbody><tr><td> <div class="para">
								<em class="parameter"><code>ssl</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">false</code>
							</div>
							 </td><td> <div class="para">
								Should connection to proxy use a secure socket layer.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslCiphers</code></em>
							</div>
							 </td><td> <div class="para">
								The default JSSE cipher suites
							</div>
							 </td><td> <div class="para">
								Overrides the cipher suites used to init an SSL socket ignoring any unsupported ciphers.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslProtocol</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">TLS</code>
							</div>
							 </td><td> <div class="para">
								Overrides the default SSL socket protocol.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslCertificateEncodingAlgorithm</code></em>
							</div>
							 </td><td> <div class="para">
								The default JSSE key manager algorithm.
							</div>
							 </td><td> <div class="para">
								The algorithm of the key manager factory.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslKeyStore</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">System.getProperty("user.home") + "/.keystore"</code>
							</div>
							 </td><td> <div class="para">
								The location of the key store containing client certificates.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslKeyStorePass</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">changeit</code>
							</div>
							 </td><td> <div class="para">
								The password granting access to the key store.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslKeyStoreType</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">JKS</code>
							</div>
							 </td><td> <div class="para">
								The type of key store.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslKeyStoreProvider</code></em>
							</div>
							 </td><td> <div class="para">
								The default JSSE security provider.
							</div>
							 </td><td> <div class="para">
								The key store provider.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslTrustAlgorithm</code></em>
							</div>
							 </td><td> <div class="para">
								The default JSSE trust manager algorithm.
							</div>
							 </td><td> <div class="para">
								The algorithm of the trust manager factory.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslKeyAlias</code></em>
							</div>
							 </td><td> <div class="para">
								 
							</div>
							 </td><td> <div class="para">
								The alias of the key holding the client certificates in the key store.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslCrlFile</code></em>
							</div>
							 </td><td> <div class="para">
								 
							</div>
							 </td><td> <div class="para">
								Certificate revocation list.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslTrustMaxCertLength</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">5</code>
							</div>
							 </td><td> <div class="para">
								The maximum length of a certificate held in the trust store.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslTrustStore</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">System.getProperty("javax.net.ssl.trustStorePassword")</code>
							</div>
							 </td><td> <div class="para">
								The location of the file containing the trust store.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslTrustStorePassword</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">System.getProperty("javax.net.ssl.trustStore")</code>
							</div>
							 </td><td> <div class="para">
								The password granting access to the trust store.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslTrustStoreType</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">System.getProperty("javax.net.ssl.trustStoreType")</code>
							</div>
							 </td><td> <div class="para">
								The trust store type.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>sslTrustStoreProvider</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">System.getProperty("javax.net.ssl.trustStoreProvider")</code>
							</div>
							 </td><td> <div class="para">
								The trust store provider.
							</div>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-HTTP_Connector_Guide-HA_Configuration">
      ⁠</a>10.1.4. HA Configuration</h2></div></div></div><div class="para">
				Additional configuration properties when mod_cluster is configured in clustered mode.
			</div><div class="table"><a id="idm139711971675632">
      ⁠</a><p class="title"><strong>Table 10.4. HA Configuration</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="HA Configuration"><colgroup><col/><col/><col/></colgroup><thead><tr><th> <div class="para">
								Attribute
							</div>
							 </th><th> <div class="para">
								Default
							</div>
							 </th><th> <div class="para">
								Description
							</div>
							 </th></tr></thead><tbody><tr><td> <div class="para">
								<em class="parameter"><code>masterPerDomain</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">false</code>
							</div>
							 </td><td> <div class="para">
								If the <em class="parameter"><code>domain</code></em> directive is used, should HA partition use a singleton master per domain.
							</div>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-HTTP_Connector_Guide-Load_Configuration">
      ⁠</a>10.1.5. Load Configuration</h2></div></div></div><div class="para">
				Additional configuration properties used when mod_cluster is configured in JBoss Web standalone or Tomcat.
			</div><div class="table"><a id="idm139711976466272">
      ⁠</a><p class="title"><strong>Table 10.5. Load Configuration</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Load Configuration"><colgroup><col/><col/><col/></colgroup><thead><tr><th> <div class="para">
								Attribute
							</div>
							 </th><th> <div class="para">
								Default
							</div>
							 </th><th> <div class="para">
								Description
							</div>
							 </th></tr></thead><tbody><tr><td> <div class="para">
								<em class="parameter"><code>loadMetricClass</code></em>
							</div>
							 </td><td> <div class="para">
								<em class="parameter"><code>org.jboss.modcluster.load.metric.impl.BusyConnectorsLoadMetric</code></em>
							</div>
							 </td><td> <div class="para">
								Class name of an object implementing <code class="literal">org.jboss.load.metric.LoadMetric</code>.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>loadMetricCapacity</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">1</code>
							</div>
							 </td><td> <div class="para">
								The capacity of the load metric defined via the <em class="parameter"><code>loadMetricClass</code></em> property.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>loadHistory</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">9</code>
							</div>
							 </td><td> <div class="para">
								The number of historic load values to consider in the load balance factor computation.
							</div>
							 </td></tr><tr><td> <div class="para">
								<em class="parameter"><code>loadDecayFactor</code></em>
							</div>
							 </td><td> <div class="para">
								<code class="literal">2</code>
							</div>
							 </td><td> <div class="para">
								The factor by which a historic load values should degrade in significance.
							</div>
							 </td></tr></tbody></table></div></div><div class="para">

			</div></div></div></div></body></html>