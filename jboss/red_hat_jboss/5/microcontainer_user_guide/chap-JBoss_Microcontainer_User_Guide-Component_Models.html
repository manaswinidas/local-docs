<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 6. Component Models</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-JBoss_Microcontainer_User_Guide-Component_Models">
      ⁠</a>Chapter 6. Component Models</h1></div></div></div><div class="para">
		The JBoss Microcontainer works within several popular POJO component models. Components are reusable software programs that you can develop and assemble easily to create sophisticated applications. Effective integration with these component models was a key goal for the Microcontainer. Some popular component models which can be used with the Microcontainer are JMX, Spring, and Guice.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Component_Models-Allowable_Interactions_with_Component_Models">
      ⁠</a>6.1. Allowable Interactions with Component Models</h1></div></div></div><div class="para">
			Before discussing interaction with some of the popular component models, it is important to understand which types of interactions are allowable. JMX MBeans are one example of a component model. Their interactions include executing MBean operations, referencing attributes, setting attributes and declaring explicit dependencies between named MBeans.
		</div><div class="para">
			The default behaviors and interactions in the Microcontainer are what you also normally get from any other <em class="firstterm">Inversion of Control (IoC)</em> container and are similar to the functionality provided by MBeans, including plain method invocations for operations, setters/getters for attributes and explicit dependencies.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Component_Models-A_Bean_With_No_Dependencies">
      ⁠</a>6.2. A Bean With No Dependencies</h1></div></div></div><div class="para">
			<a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#example-deployment-descriptor-for-plain-pojo">Example 6.1, “Deployment Descriptor for a Plain POJO”</a> shows a deployment descriptor for a plain POJO with no dependencies. This is the starting point for integrating the Microcontainer with Spring or Guice.
		</div><div class="example"><a id="example-deployment-descriptor-for-plain-pojo">
      ⁠</a><p class="title"><strong>Example 6.1. Deployment Descriptor for a Plain POJO</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"PlainPojo"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.plain.Pojo"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;beanfactory</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"PojoFactory"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.plain.Pojo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"factoryClass"</span><span xmlns="" class="perl_Keyword">&gt;</span>org.jboss.demos.models.plain.PojoFactory<span xmlns="" class="perl_Keyword">&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/beanfactory&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Component_Models-Using_the_Microcontainer_with_Spring">
      ⁠</a>6.3. Using the Microcontainer with Spring</h1></div></div></div><div class="example"><a id="idm139732975087728">
      ⁠</a><p class="title"><strong>Example 6.2. Descriptor with Spring Support</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;beans</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:spring-beans:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">&lt;!-- Adding @Spring annotation handler --&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"SpringAnnotationPlugin"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.spring.annotations.SpringBeanAnnotationPlugin"</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"SpringPojo"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.spring.Pojo"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/beans&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre><div class="para">
				This file's namespace is different from the plain Microcontainer bean’s file. The <code class="systemitem">urn:jboss:spring-beans:2.0</code> namespace points to your version of the Spring schema port, which describes your bean's Spring style. The Microcontainer, rather than Spring's bean factory notion, deploys the beans.
			</div></div></div><div class="example"><a id="exam-JBoss_Microcontainer_User_Guide-Using_the_Microcontainer_with_Spring-Using_Spring_with_the_Microcontainer">
      ⁠</a><p class="title"><strong>Example 6.3. Using Spring with the Microcontainer</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Pojo <span xmlns="" class="perl_Keyword">extends</span> AbstractPojo <span xmlns="" class="perl_Keyword">implements</span> BeanNameAware {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String beanName;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setBeanName</span>(String name)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	beanName = name;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getBeanName</span>()
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">return</span> beanName;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">start</span>()
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">if</span> (<span xmlns="" class="perl_String">"SpringPojo"</span>.<span xmlns="" class="perl_Function">equals</span>(<span xmlns="" class="perl_Function">getBeanName</span>()) == <span xmlns="" class="perl_Keyword">false</span>)
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">throw</span> <span xmlns="" class="perl_Keyword">new</span> IllegalArgumentException(<span xmlns="" class="perl_String">"Name does not match: "</span> + <span xmlns="" class="perl_Function">getBeanName</span>());
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre><div class="para">
				Although the SpringPojo bean has a dependency on Spring's library caused by implementing BeanNameAware interface, its only purpose is to expose and mock some of the Spring's callback behavior.
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Component_Models-Using_Guice_With_the_Microcontainer">
      ⁠</a>6.4. Using Guice With the Microcontainer</h1></div></div></div><div class="para">
			The focus of Guice is type matching. Guice beans are generated and configured using Modules.
		</div><div class="example"><a id="exam-JBoss_Microcontainer_User_Guide-Using_Guice_With_the_Microcontainer-Deployment_Descriptor_for_Guice_Integration_In_the_Microcontainer">
      ⁠</a><p class="title"><strong>Example 6.4. Deployment Descriptor for Guice Integration In the Microcontainer</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"GuicePlugin"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.guice.spi.GuiceKernelRegistryEntryPlugin"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;constructor&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;parameter&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;array</span><span xmlns="" class="perl_Others"> elementClass=</span><span xmlns="" class="perl_String">"com.google.inject.Module"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>	  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.guice.PojoModule"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">&lt;/array&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/constructor&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para">
			Two important parts to watch from this file are <code class="classname">PojoModule</code> and <code class="classname">GuiceKernelRegistryEntryPlugin</code>. <code class="classname">PojoModule</code> configures your beans, as in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#example-guice-bean-configuration">Example 6.5, “Configuring Beans for Guice”</a>. <code class="classname">GuiceKernelRegistryEntryPlugin</code> provides integration with the Microcontainer, as shown in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#example-guice-integration-with-microcontainer">Example 6.6, “Guice Integration with the Microcontainer”</a>.
		</div><div class="example"><a id="example-guice-bean-configuration">
      ⁠</a><p class="title"><strong>Example 6.5. Configuring Beans for Guice</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> PojoModule <span xmlns="" class="perl_Keyword">extends</span> AbstractModule {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Controller controller;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @Constructor
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">PojoModule</span>(@<span xmlns="" class="perl_Function">Inject</span>(
<span xmlns="" class="line">​</span>				  bean = KernelConstants.<span xmlns="" class="perl_Function">KERNEL_CONTROLLER_NAME</span>) 
<span xmlns="" class="line">​</span>			  Controller controller)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">controller</span> = controller;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">protected</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">configure</span>()
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Function">bind</span>(Controller.<span xmlns="" class="perl_Function">class</span>).<span xmlns="" class="perl_Function">toInstance</span>(controller);
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Function">bind</span>(IPojo.<span xmlns="" class="perl_Function">class</span>).<span xmlns="" class="perl_Function">to</span>(Pojo.<span xmlns="" class="perl_Function">class</span>).<span xmlns="" class="perl_Function">in</span>(Scopes.<span xmlns="" class="perl_Function">SINGLETON</span>);
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Function">bind</span>(IPojo.<span xmlns="" class="perl_Function">class</span>).<span xmlns="" class="perl_Function">annotatedWith</span>(FromMC.<span xmlns="" class="perl_Function">class</span>).
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Function">toProvider</span>(GuiceIntegration.<span xmlns="" class="perl_Function">fromMicrocontainer</span>(IPojo.<span xmlns="" class="perl_Function">class</span>, <span xmlns="" class="perl_String">"PlainPojo"</span>));
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div class="example"><a id="example-guice-integration-with-microcontainer">
      ⁠</a><p class="title"><strong>Example 6.6. Guice Integration with the Microcontainer</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> GuiceKernelRegistryEntryPlugin <span xmlns="" class="perl_Keyword">implements</span> KernelRegistryPlugin {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> Injector injector;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">GuiceKernelRegistryEntryPlugin</span>(Module<span xmlns="" class="perl_Keyword">... </span>modules)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	injector = Guice.<span xmlns="" class="perl_Function">createInjector</span>(modules);
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">destroy</span>()
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	injector = <span xmlns="" class="perl_Keyword">null</span>;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> KernelRegistryEntry <span xmlns="" class="perl_Function">getEntry</span>(Object name)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	KernelRegistryEntry entry = <span xmlns="" class="perl_Keyword">null</span>;
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">try</span>
<span xmlns="" class="line">​</span>	    {
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">if</span> (name <span xmlns="" class="perl_Keyword">instanceof</span> <span xmlns="" class="perl_Keyword">Class</span>&lt;?&gt;)
<span xmlns="" class="line">​</span>		    {
<span xmlns="" class="line">​</span>			<span xmlns="" class="perl_Keyword">Class</span>&lt;?&gt; clazz = (<span xmlns="" class="perl_Keyword">Class</span>&lt;?&gt;)name;
<span xmlns="" class="line">​</span>			entry = <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">AbstractKernelRegistryEntry</span>(name, injector.<span xmlns="" class="perl_Function">getInstance</span>(clazz));
<span xmlns="" class="line">​</span>		    }
<span xmlns="" class="line">​</span>		<span xmlns="" class="perl_Keyword">else</span> <span xmlns="" class="perl_Keyword">if</span> (name <span xmlns="" class="perl_Keyword">instanceof</span> Key)
<span xmlns="" class="line">​</span>		    {
<span xmlns="" class="line">​</span>			Key&lt;?&gt; key = (Key&lt;?&gt;)name;
<span xmlns="" class="line">​</span>			entry = <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">AbstractKernelRegistryEntry</span>(name, injector.<span xmlns="" class="perl_Function">getInstance</span>(key));
<span xmlns="" class="line">​</span>		    }
<span xmlns="" class="line">​</span>	    }
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">catch</span> (Exception ignored)
<span xmlns="" class="line">​</span>	    {
<span xmlns="" class="line">​</span>	    }
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">return</span> entry;
<span xmlns="" class="line">​</span>    }	
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				An <code class="interfacename">Injector</code> is created from the <code class="interfacename">Modules</code> class, then does a look-up on it for matching beans. See <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#sect-JBoss_Microcontainer_User_Guide-Component_Models-Legacy_MBeans_and_Mixing_Different_Component_Models">Section 6.5, “Legacy MBeans, and Mixing Different Component Models”</a> for information about declaring and using legacy MBeans.
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Component_Models-Legacy_MBeans_and_Mixing_Different_Component_Models">
      ⁠</a>6.5. Legacy MBeans, and Mixing Different Component Models</h1></div></div></div><div class="para">
			The simplest example of mixing different content models is shown in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#example-injecting-pojo-into-mbean">Example 6.7, “Injecting a POJO Into an MBean”</a>.
		</div><div class="example"><a id="example-injecting-pojo-into-mbean">
      ⁠</a><p class="title"><strong>Example 6.7. Injecting a POJO Into an MBean</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;server&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;mbean</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.mbeans.Pojo"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss.demos:service=pojo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;attribute</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"OtherPojo"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"PlainPojo"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/attribute&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/mbean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/server&gt;</span></pre></div></div><div class="para">
			To deploy MBeans deployment via the Microcontainer, you must write an entirely new handler for the component model. See <code class="filename">system-jmx-beans.xml</code> for more details. The code from this file lives in the JBoss Application Server source code: <span class="package">system-jmx</span> sub-project.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Component_Models-Exposing_POJOs_as_MBeans">
      ⁠</a>6.6. Exposing POJOs as MBeans</h1></div></div></div><div class="example"><a id="idm139732981482608">
      ⁠</a><p class="title"><strong>Example 6.8. Exposing an Existing POJO as an MBean</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"AnnotatedJMXPojo"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.jmx.AtJmxPojo"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"XmlJMXPojo"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.mbeans.Pojo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;annotation&gt;</span>@org.jboss.aop.microcontainer.aspects.jmx.JMX(exposedInterface=org.jboss.demos.models.mbeans.PojoMBean.class, registerDirectly=true)<span xmlns="" class="perl_Keyword">&lt;/annotation&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"ExposedPojo"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.jmx.Pojo"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"AnnotatedExposePojo"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.jmx.ExposePojo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;constructor&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;parameter&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"ExposedPojo"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/parameter&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/constructor&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre><div class="para">
				This descriptor exposes an existing POJO as an MBean, and registers it into an MBean server.
			</div></div></div><div class="para">
			To expose a POJO as an MBean, end it with an @JMX annotation, assuming that you have imported <code class="systemitem">org.jboss.aop.microcontainer.aspects.jmx.JMX</code>. The bean can either be exposed directly, or in its property.
		</div><div class="example"><a id="idm139732981643040">
      ⁠</a><p class="title"><strong>Example 6.9. Exposing a POJO as an MBean Using Its Property</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"XMLLoginConfig"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.old.XMLLoginConfig"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"SecurityConfig"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.old.SecurityConfig"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"defaultLoginConfig"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"XMLLoginConfig"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"SecurityChecker"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.old.Checker"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"loginConfig"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"jboss.security:service=XMLLoginConfig"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"securityConfig"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"jboss.security:service=SecurityConfig"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para">
			You can use any of the injection look-up types, by either looking up a plain POJO or getting a handle to an MBean from the MBean server. One of the injection options is to use type injection, sometimes called <em class="firstterm">autowiring</em>, and shown in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#example-autowiring">Example 6.10, “Autowiring”</a>.
		</div><div class="example"><a id="example-autowiring">
      ⁠</a><p class="title"><strong>Example 6.10. Autowiring</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"FromGuice"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.plain.FromGuice"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;constructor&gt;&lt;parameter&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"PlainPojo"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/parameter&gt;&lt;/constructor&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"guicePojo"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"AllPojos"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.demos.models.plain.AllPojos"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"directMBean"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"jboss.demos:service=pojo"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"exposedMBean"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"jboss.demos:service=ExposedPojo"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"exposedMBean"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"jboss.demos:service=ExposedPojo"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para">
			The <span class="package">FromGuice</span> bean injects the Guice bean via type matching, where <code class="classname">PlainPojo</code> is injected with a common name injection. Now, you can test if Guice binding works as expected, as shown in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#exam-JBoss_Microcontainer_User_Guide-Exposing_POJOs_as_MBeans-Testing_Guice_Functionality">Example 6.11, “Testing Guice Functionality”</a>.
		</div><div class="example"><a id="exam-JBoss_Microcontainer_User_Guide-Exposing_POJOs_as_MBeans-Testing_Guice_Functionality">
      ⁠</a><p class="title"><strong>Example 6.11. Testing Guice Functionality</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> FromGuice {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> IPojo plainPojo;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">demos</span>.<span xmlns="" class="perl_Function">models</span>.<span xmlns="" class="perl_Function">guice</span>.<span xmlns="" class="perl_Function">Pojo</span> guicePojo;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Function">FromGuice</span>(IPojo plainPojo)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">plainPojo</span> = plainPojo;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setGuicePojo</span>(org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">demos</span>.<span xmlns="" class="perl_Function">models</span>.<span xmlns="" class="perl_Function">guice</span>.<span xmlns="" class="perl_Function">Pojo</span> guicePojo)
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">this</span>.<span xmlns="" class="perl_Function">guicePojo</span> = guicePojo;
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">start</span>()
<span xmlns="" class="line">​</span>    {
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Function">f</span> (plainPojo != guicePojo.<span xmlns="" class="perl_Function">getMcPojo</span>())
<span xmlns="" class="line">​</span>	    <span xmlns="" class="perl_Keyword">throw</span> <span xmlns="" class="perl_Keyword">new</span> IllegalArgumentException(<span xmlns="" class="perl_String">"Pojos are not the same: "</span> + plainPojo + <span xmlns="" class="perl_String">"!="</span> + guicePojo.<span xmlns="" class="perl_Function">getMcPojo</span>());
<span xmlns="" class="line">​</span>    }
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para">
			<a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#exam-JBoss_Microcontainer_User_Guide-Exposing_POJOs_as_MBeans-Testing_Guice_Functionality">Example 6.11, “Testing Guice Functionality”</a> only provides an alias component model. The alias is a trivial, but necessary feature. It must be introduced as a new component model inside the Microcontainer, in order to implement it as a true dependency. The implementation details are shown in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Component_Models.html#example-AbstractionController-source">Example 6.12, “AbstractController Source Code”</a>.
		</div><div class="example"><a id="example-AbstractionController-source">
      ⁠</a><p class="title"><strong>Example 6.12. AbstractController Source Code</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;alias</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"SpringPojo"</span><span xmlns="" class="perl_Keyword">&gt;</span>springPojo<span xmlns="" class="perl_Keyword">&lt;/alias&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>			
<span xmlns="" class="line">​</span>
</pre></div></div><div class="para">
			This descriptor maps the SpringPojo name to the springPojo alias. The benefit of aliases as true component models is that timing of bean deployment becomes less important. The alias waits in a non-installed state until the real bean triggers it.
		</div></div></div></body></html>