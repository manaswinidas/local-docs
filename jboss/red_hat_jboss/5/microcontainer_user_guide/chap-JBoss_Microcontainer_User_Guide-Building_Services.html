<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Building Services</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-JBoss_Microcontainer_User_Guide-Building_Services">
      ⁠</a>Chapter 3. Building Services</h1></div></div></div><div class="para">
		Services are pieces of code which perform work needed by multiple clients. For our purposes, we will put some additional constraints on the definition of a service. Services should have unique names which can be referenced, or called, by clients. The internals of a service should be invisible and unimportant to clients. This is the "black box" concept of object-oriented programming (OOP). In OOP, each object is independent, and no other object needs to know how it does its job.
	</div><div class="para">
		In the context of the Microcontainer, services are built from POJOs. A POJO is nearly a service in its own right, but it can not be accessed by a unique name, and it must be created by the client that needs it.
	</div><div class="para">
		Although a POJO must be created at run-time by the client, it does not need to be implemented by a separate class in order to provide a well-defined interface. As long as fields and methods are not removed, and access to them is not restricted, there is no need to recompile clients to use a newly-created POJO.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Implementing an interface is only necessary in order to allow a client to choose between <span class="emphasis"><em>alternative implementations</em></span>. If the client is compiled against an interface, many different implementations of the interface can be provided without having to recompile the client. The interface ensures that the method signatures do not change.
		</div></div></div><div class="para">
		The remainder of this guide consists of creating a Human Resources service, using the Microcontainer to capture and modularize the business logic of the application. After the Microcontainer is installed, the example code is located in <code class="filename">examples/User_Guide/gettingStarted/humanResourcesService</code>.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Building_Services-Introduction_to_the_Human_Resources_Example">
      ⁠</a>3.1. Introduction to the Human Resources Example</h1></div></div></div><div class="para">
			As you familiarize yourself with the directory structure of the files in the example, note that it uses the <a href="http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">Maven Standard Directory Layout</a>.
		</div><div class="para">
			The Java source files are located in packages beneath the <code class="filename">examples/User_Guide/gettingStarted/humanResourcesService/src/main/java/org/jboss/example/service</code> directory, after you have extracted the ZIP file. Each of these classes represents a simple POJO that does not implement any special interfaces. The most important class is <code class="classname">HRManager</code>, which represents the service entry point providing all of the public methods that clients will call. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><a id="item-JBoss_Microcontainer_User_Guide-Introduction_to_the_Human_Resources_Example-Methods_Provided_by_the_HRManager_Class">
      ⁠</a><p class="title"><strong>Methods Provided by the <code class="classname">HRManager</code> Class</strong></p><ul><li class="listitem"><div class="para">
						<code class="methodname">addEmployee</code>(<span class="type">Employee</span> <em class="parameter"><code>employee</code></em>)
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">removeEmployee</code>(<span class="type">Employee</span> <em class="parameter"><code>employee</code></em>)
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">getEmployee</code>(<span class="type">String</span> <em class="parameter"><code>firstName</code></em>, <span class="type">String</span> <em class="parameter"><code>lastName</code></em>)
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">getEmployees</code>()
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">getSalary</code>(<span class="type">Employee</span> <em class="parameter"><code>employee</code></em>)
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">setSalary</code>(<span class="type">Employee</span> <em class="parameter"><code>employee</code></em>, <span class="type">Integer</span> <em class="parameter"><code>newSalary</code></em>)
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">isHiringFreeze</code>()
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">setHiringFreeze</code>(<span class="type">boolean</span> <em class="parameter"><code>hiringFreeze</code></em>)
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">getSalaryStrategy</code>()
					</div></li><li class="listitem"><div class="para">
						<code class="methodname">setSalaryStrategy</code>(<span class="type">SalaryStrategy</span> <em class="parameter"><code>strategy</code></em>)
					</div></li></ul></div>

		</div><div class="para">
			The Human Resources Service is composed of a handful of classes which maintain a list of employees and their details (addresses and salaries, in this case). Using the <code class="methodname">SalaryStrategy</code> interface it is possible to configure the HRManager so that different salary strategy implementations are available to place minimum and maximum limits on the salaries for different employee roles.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Building_Services-Compiling_the_HRManager_Example_Project">
      ⁠</a>3.2. Compiling the HRManager Example Project</h1></div></div></div><div class="para">
			To compile the source code, issue <code class="command">mvn compile</code> from the <code class="filename">humanResourcesService/</code> directory. This creates a new directory called <code class="filename">target/classes</code> which contains the compiled classes. To clean up the project and remove the target directory, issue the <code class="command">mvn clean</code> command.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Building_Services-Creating_POJOs">
      ⁠</a>3.3. Creating POJOs</h1></div></div></div><div class="para">
			Before a POJO can be used, you need to create it. You need a naming mechanism that allows you to register a reference to the POJO instance with a name. Clients need this name to use the POJO.
		</div><div class="para">
			The Microcontainer provides such a mechanism: a <span class="emphasis"><em>Controller</em></span>. A Controller allows you to deploy your POJO-based services into a run-time environment.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Creating_POJOs-XML_Deployment_Descriptors">
      ⁠</a>3.3.1. XML Deployment Descriptors</h2></div></div></div><div class="para">
				After compiling the classes, use an XML deployment descriptor to create instances of them. The descriptor contains a list of beans representing individual instances. Each bean has a unique name, so that it can be called by clients at run-time. The following descriptor deploys an instance of the HRManager:
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span><span xmlns="" class="perl_Others"> xsi:schemaLocation=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0 bean-deployer_2_0.xsd"</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"HRService"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.example.service.HRManager"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre><div class="para">
				This XML creates an instance of the <code class="classname">HRManager</code> class and registers it with the name HRService. This file is passed to an XML deployer associated with the Microcontainer at run-time, which performs the actual deployment, and instantiates the beans.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Building_Services-Connecting_POJOs_Together">
      ⁠</a>3.4. Connecting POJOs Together</h1></div></div></div><div class="para">
			Individual POJO instances can only provide relatively simple behavior. The true power of POJOs comes from connecting them together to perform complex tasks. How can you wire POJOs together to choose different salary strategy implementations?
		</div><div class="para">
			The following XML deployment descriptor does just that:
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span><span xmlns="" class="perl_Others"> xsi:schemaLocation=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0 bean-deployer_2_0.xsd"</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"HRService"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.example.service.HRManager"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"salaryStrategy"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"AgeBasedSalary"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"AgeBasedSalary"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.example.service.util.AgeBasedSalaryStrategy"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre><div class="para">
			This XML creates an instance of the chosen salary strategy implementation by including an additional &lt;bean&gt; element. This time, the AgeBasedSalaryStrategy is chosen. Next the code injects a reference to this bean into the instance of <code class="classname">HRManager</code> created using the HRService bean. Injection is possible because the <code class="classname">HRManager</code> class contains a <code class="methodname">setSalaryStrategy(SalaryStrategy strategy)</code> method. Behind the scenes, JBoss Microcontainer calls this method on the newly created HRManager instance and passes a reference to the <code class="classname">AgeBasedSalaryStrategy</code> instance.
		</div><div class="para">
			The XML deployment descriptor causes the same sequence of events to occur as if you had written the following code:
		</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>HRManager hrService = <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">HRManager</span>();
<span xmlns="" class="line">​</span>AgeBasedSalaryStrategy ageBasedSalary = <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">AgeBasedSalaryStrategy</span>();
<span xmlns="" class="line">​</span>hrService.<span xmlns="" class="perl_Function">setSalaryStrategy</span>(ageBasedSalary);
</pre><div class="para">
			In addition to performing injection via property setter methods, JBoss Microcontainer can also perform injection via constructor parameters if necessary. For more details please see the 'Injection' chapter in Part II 'POJO Development.'

		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm139732979136944">
      ⁠</a>3.4.1. Special Considerations</h2></div></div></div><div class="para">
				Although creating instances of classes using the &lt;bean&gt; element in the deployment descriptor is possible, it is not always the best way. For example, creating instances of the <code class="classname">Employee</code> and <code class="classname">Address</code> classes is unnecessary, because the client creates these in response to input from the user. They remain part of the service but are not referenced in the deployment descriptor.
			</div><div class="para"><a id="form-JBoss_Microcontainer_User_Guide-Connecting_POJOs_Together-Comment_Your_Code">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Comment Your Code</div>
					You can define multiple beans within a deployment descriptor as long as each has a unique name, which is used to perform injection as shown above. However all of the beans do not necessarily represent services. While a service can be implemented using a single bean, multiple beans are usually used together. One bean typically represents the service entry point, and contains the public methods called by the clients. In this example the entry point is the HRService bean. The XML deployment descriptor does not indicate whether a bean represents a service or whether a bean is the service entry point. It is a good idea to use comments and an obvious naming scheme to delineate service beans from non-service beans.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Building_Services-Working_with_Services">
      ⁠</a>3.5. Working with Services</h1></div></div></div><div class="para">
			After creating POJOs and connecting them together to form services, you need to configure the services, test them, and package them.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Working_with_Services-Configuring_A_Service">
      ⁠</a>3.5.1. Configuring A Service</h2></div></div></div><div class="para">
				Services can be configured by at least two ways:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Injecting references between POJO instances
					</div></li><li class="listitem"><div class="para">
						Injecting values into POJO properties
					</div></li></ul></div><div class="para">
				In this example, the second method is used. The following deployment descriptor configures the HRManager instance in the following ways:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						A hiring freeze is implemented.
					</div></li><li class="listitem"><div class="para">
						The <code class="methodname">AgeBasedSalaryStrategy</code> implements new minimum and maximum salary values.
					</div></li></ul></div><div class="para">
				Injecting references between POJO instances is one way of configuring a service however we can also inject values into POJO properties. The following deployment descriptor shows how we can configure the HRManager instance to have a hiring freeze and the AgeBasedSalaryStrategy to have new minimum and maximum salary values:
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span><span xmlns="" class="perl_Others"> xsi:schemaLocation=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0 bean-deployer_2_0.xsd"</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"HRService"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.example.service.HRManager"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"hiringFreeze"</span><span xmlns="" class="perl_Keyword">&gt;</span>false<span xmlns="" class="perl_Keyword">&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"salaryStrategy"</span><span xmlns="" class="perl_Keyword">&gt;&lt;inject</span><span xmlns="" class="perl_Others"> bean=</span><span xmlns="" class="perl_String">"AgeBasedSalary"</span><span xmlns="" class="perl_Keyword">/&gt;&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;bean</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"AgeBasedSalary"</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"org.jboss.example.service.util.AgeBasedSalaryStrategy"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"minSalary"</span><span xmlns="" class="perl_Keyword">&gt;</span>1000<span xmlns="" class="perl_Keyword">&lt;/property&gt;</span> <span xmlns="" class="perl_Keyword">&lt;property</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"maxSalary"</span><span xmlns="" class="perl_Keyword">&gt;</span>80000<span xmlns="" class="perl_Keyword">&lt;/property&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/bean&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre><div class="para">
				The classes must have public setter methods for the relevant properties so that values can be injected. For example, the <code class="classname">HRManager</code> class has a <code class="methodname">setHiringFreeze(boolean hiringFreeze)</code> method and the <code class="classname">AgeBasedSalaryStrategy</code> class has <code class="methodname">setMinSalary(int minSalary)</code> and <code class="methodname">setMaxSalary(int maxSalary)</code> methods.
			</div><div class="para">
				The values in the deployment descriptor are converted from strings into the relevant types (boolean, int etc...) by JavaBean PropertyEditors. Many PropertyEditors are provided by default for standard types, but you can create your own if necessary. See the Properties chapter in Part II 'POJO Development' for more details.

			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Working_with_Services-Testing_A_Service">
      ⁠</a>3.5.2. Testing A Service</h2></div></div></div><div class="para">
				After you have created your POJOs and connected them together to form services, you need to test them. JBoss Microcontainer allows unit testing individual POJOs as well as services, through the use of a <code class="classname">MicrocontainerTest</code> class.
			</div><div class="para">
				The <code class="classname">org.jboss.test.kernel.junit.MicrocontainerTest</code> class inherits from <code class="classname">junit.framework.TestCase</code>, setting up each test by bootstrapping JBoss Microcontainer and adding a BasicXMLDeployer. It then searches the classpath for an XML deployment descriptor with the same name as the test class, ending in <code class="filename">.xml</code> and residing in a directory structure representing the class's package name. Any beans found in this file are deployed and can then be accessed using a convenience method called <code class="methodname">getBean(String name)</code>.
			</div><div class="para">
				Examples of these deployment descriptors can be found in the <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Building_Services.html#example-src-test-resources">Example 3.1, “Listing of the <code class="filename">src/test/resources</code> Directory”</a>.
			</div><div class="example"><a id="example-src-test-resources">
      ⁠</a><p class="title"><strong>Example 3.1. Listing of the <code class="filename">src/test/resources</code> Directory</strong></p><div class="example-contents"><pre class="screen">
├── log4j.properties
└── org
    └── jboss
        └── example
            └── service
                ├── HRManagerAgeBasedTestCase.xml
                ├── HRManagerLocationBasedTestCase.xml
                ├── HRManagerTestCase.xml
                └── util
                    ├── AgeBasedSalaryTestCase.xml
                    └── LocationBasedSalaryTestCase.xml
</pre></div></div><div class="para">
				The test code is located in the src/test/java directory:
			</div><div class="example"><a id="example-src-test-java">
      ⁠</a><p class="title"><strong>Example 3.2. Listing of the <code class="filename">src/test/java</code> Directory</strong></p><div class="example-contents"><pre class="screen">
└── org
    └── jboss
        └── example
            └── service
                ├── HRManagerAgeBasedTestCase.java
                ├── HRManagerLocationBasedTestCase.java
                ├── HRManagerTestCase.java
                ├── HRManagerTest.java
                ├── HRManagerTestSuite.java
                └── util
                    ├── AgeBasedSalaryTestCase.java
                    ├── LocationBasedSalaryTestCase.java
                    └── SalaryStrategyTestSuite.java
</pre></div></div><div class="para">
				The <code class="classname">HRManagerTest</code> class extends <code class="classname">MicrocontainerTest</code> in order to set up a number of employees to use as the basis for the tests. Individual test cases then subclass <code class="classname">HRManagerTest</code> to perform the actual work. Also included are a couple of <code class="classname">TestSuite</code> classes that are used to group individual test cases together for convenience.
			</div><div class="para">
				To run the tests, enter <code class="command">mvn test</code> from the <code class="filename">humanResourcesService/</code> directory. You should see some <code class="systemitem">DEBUG</code> log output which shows JBoss Microcontainer starting up and deploying beans from the relevant XML file before running each test. At the end of the test the beans are undeployed and the Microcontainer is shut down.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Some of the tests, such as <code class="classname">HRManagerTestCase</code>, <code class="classname">AgeBasedSalaryTestCase</code>, and <code class="classname">LocationBasedSalaryTestCase</code>, unit test individual POJOs. Other tests, such as <code class="classname">HRManagerAgeBasedTestCase</code> and <code class="classname">HRManagerLocationBasedTestCase</code> unit test entire services. Either way, the tests are run in the same manner. Using the MicrocontainerTest class makes it easy to set up and conduct comprehensive tests for any part of your code.
				</div><div class="para">
					The <code class="classname">Address</code> and <code class="classname">Employee</code> classes are not tested here. Writing tests for them is up to you.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-JBoss_Microcontainer_User_Guide-Working_with_Services-Packaging_A_Service">
      ⁠</a>3.5.3. Packaging A Service</h2></div></div></div><div class="para">
				After testing your service, it is time to package it up so that others can use it. The simplest way to do this is to create a JAR containing all of the classes. You can choose to include the deployment descriptor if there is a sensible default way to configure the service, but this is optional.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="idm139732980594544">
      ⁠</a><p class="title"><strong>Procedure 3.1. Packaging a Service</strong></p><ol class="1"><li class="step"><p class="title"><strong>Place the deployment descriptor in the <code class="filename">META-INF</code> directory (optional)</strong></p><div class="para">
						If you do choose to include the deployment descriptor, by convention it should be named <code class="filename">jboss-beans.xml</code> and should be placed in a <code class="filename">META-INF</code> directory. This is the default layout for the Enterprise Platform, so the JAR deployer recognizes this layout and automatically performs the deployment.
					</div><div class="para">
						The deployment descriptor is not included in the Human Resources example, because the service is configured by editing the descriptor directly, as a separate file.
					</div></li><li class="step"><p class="title"><strong>Generate the JAR</strong></p><div class="para">
						To generate a JAR containing all of the compiled classes, enter <code class="command">mvn package</code> from the <code class="filename">humanResourcesService/</code> directory.
					</div></li><li class="step"><p class="title"><strong>Make the JAR available to other Maven projects</strong></p><div class="para">
						To make the JAR available to other Maven projects, enter <code class="command">mvn install</code> in order to copy it to your local Maven repository. The final layout of the JAR is shown in <a class="xref" href="chap-JBoss_Microcontainer_User_Guide-Building_Services.html#example-org-jboss-example-service">Example 3.3, “Listing of the <code class="filename">org/jboss/example/service</code> and <code class="filename">META-INF</code>Directories”</a>.
					</div></li></ol></div><div class="example"><a id="example-org-jboss-example-service">
      ⁠</a><p class="title"><strong>Example 3.3. Listing of the <code class="filename">org/jboss/example/service</code> and <code class="filename">META-INF</code>Directories</strong></p><div class="example-contents"><pre class="screen">
`-- org
    `-- jboss
        `-- example
            `-- service
                |-- Address.java
                |-- Employee.java
                |-- HRManager.java
                `-- util
                    |-- AgeBasedSalaryStrategy.java
                    |-- LocationBasedSalaryStrategy.java
                    `-- SalaryStrategy.java
`--META-INF
    `-- MANIFEST.MF
    `-- maven
        `-- org.jboss.micrcontainer.examples
	        `-- humanResourceService
</pre></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The <code class="filename">META-INF/maven</code> directory is automatically created by Maven, and will not be present if you are using a different build system.
				</div></div></div></div></div></div></body></html>