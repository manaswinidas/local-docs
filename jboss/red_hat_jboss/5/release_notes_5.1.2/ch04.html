<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. Fixed Issues</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idm140704926546000">
      ⁠</a>Chapter 4. Fixed Issues</h1></div></div></div><div class="para">
		Issues fixed for Enterprise Application Platform 5.1.2 are listed by component.
	</div><div class="variablelist"><p class="title"><strong>Apache Server and Connectors</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5585">JBPAPP-5585</a> </span></dt><dd><div class="para">
					The <code class="filename">apr</code> and <code class="filename">apr-util</code> packages are no longer distributed as part of the Enterprise Application Platform. Use the same libraries distributed with the base operating system, Red Hat Enterprise Linux 5 and Red Hat Enterprise Linux 6. If you are performing a new installation of Enterprise Application Platform, you must ensure these packages are installed.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Clustering</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6175">JBPAPP-6175</a> </span></dt><dd><div class="para">
					During distribution of the encryption key from the master node to each cluster member, the configured asym_provider and sym_provider were not used. These options are now set to be used when getting Ciphers.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6408">JBPAPP-6408</a> </span></dt><dd><div class="para">
					In some circumstances, HA-JNDI could start processing requests before it was fully initialized, causing those requests to fail with a NullPointerException. This has now been resolved so that initialization is confirmed before processing begins.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6797">JBPAPP-6797</a> </span></dt><dd><div class="para">
					The deployment of a HASingletonController as an MBean could fail if the MBean upon which it depended had not yet been started. To fix this issue the availability of dependent MBeans is first checked before deployment, resulting in reliable deployments of HASingletonController.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6899">JBPAPP-6899</a> </span></dt><dd><div class="para">
					If there were concurrent calls to the UnifiedInvokerHAProxy function a NullPointerException error could occur when the last server was shut down. The issue was that the logic surrounding this function did not check if a target was available, resulting in the following error: 
<pre class="screen">FATAL [org.jboss.invocation.unified.interfaces.UnifiedInvokerHAProxy] (TP-Processor242) Could not initialize UnifiedInvokerProxy.</pre>
					 The logic surrounding the proxy function has been changed so it first checks the availability of a target, preventing NPE errors.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6989">JBPAPP-6989</a> </span></dt><dd><div class="para">
					When using the legacy eviction policy configuration format, if the wakeUpIntervalSeconds was not specified, the default value was set to 5000 seconds, not 5 seconds. This resulted is wakeUp intervals far longer than would be expected. This has now been resolved and the default is 5 seconds.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6538">JBPAPP-6538</a> </span></dt><dd><div class="para">
					When creating a cache using the CacheJmxWrapper the ClusterConfig section was ignored, and a default JGroups configuration used. The cause of the problem was that the parser was ignoring the contents of the &lt;ClusterConfig&gt; section. This problem has been fixed and the whole of the cluster configuration file is read correctly.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7015">JBPAPP-7015</a> </span></dt><dd><div class="para">
					Transaction stickiness has been enabled by default for EJB3 load balancing policies. This means that there's no need to create and configure separate load balancing policies to enable this feature.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6869">JBPAPP-6869</a> </span></dt><dd><div class="para">
					It was not possible to specify default loadBalancePolicy for Clustered EJB3s because the EJBs already had @Clustered on them. This has been corrected and you can now edit $JBOSS_HOME/server/all/deployers/ejb3.deployer/META-INF/ejb3-deployers-jboss-beans.xml and add properties such as <span class="property">RoundRobin</span>, or specify fully qualified class names such as <span class="property">org.jboss.ha.client.loadbalance.RoundRobin</span> The default for defaultLoadBalancePolicy is <code class="code">org.jboss.ha.client.loadbalance.RoundRobin</code> if not specified. The default for defaultStickyLoadBalancePolicy is <code class="code">org.jboss.ha.client.loadbalance.FirstAvailable</code> if not specified.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6972">JBPAPP-6972</a> </span></dt><dd><div class="para">
					Fix an EJB3 clustered proxy bug where the clustered proxy factory implementation(s) do not take into account the overridden stackname and instead uses the default clustered client interceptor stack. This means that the @RemoteBinding(interceptorStack=...) annotations and the &lt;interceptor-stack&gt; tags in the jboss.xml file is ignored for clustered EJBs.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6448">JBPAPP-6448</a> </span></dt><dd><div class="para">
					Deploying Web Applications (WARs) to a cluster farm via either the EAP Administration Console or JBoss Operations Network caused a NullPointerException on the joining node, similar to the following: 
<pre class="screen">16:16:53,586 ERROR [ScopedProfileServiceController] Error installing to Create: name=ProfileKey@27905a42[domain=default, server=default, name=farm] state=Configured mode=On Demand requiredState=Installed
java.lang.reflect.InvocationTargetException
...
Caused by: java.lang.NullPointerException
at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:796)
at org.jboss.ha.timestamp.TimestampDiscrepancyService.getTimestampDiscrepancy(TimestampDiscrepancyService.java:328)
at org.jboss.profileservice.cluster.repository.DefaultSynchronizationPolicy.getTimestampDiscrepancy(DefaultSynchronizationPolicy.java:158)
at org.jboss.profileservice.cluster.repository.DefaultSynchronizationPo
licy.acceptUpdate(DefaultSynchronizationPolicy.java:121)</pre>
					 The cause of the error was incomplete internal data when checking time synchronisation between the deployer and deployee cluster nodes. This issue has now been fixed and deployment of WARs to cluster nodes is successful.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6932">JBPAPP-6932</a> </span></dt><dd><div class="para">
					When two cluster nodes were merged after a split, only one of them should have continued to HASingletons. In fact both continued to run HASingletons, resulting in unreliable cluster operation. The cause was an error in the logic applied when node merged. This is now resolved and cluster merges now operate as expected.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7011">JBPAPP-7011</a> </span></dt><dd><div class="para">
					Data loss could occur when calling cache.getNode in JBoss Cache with a cache loader configured for passivation. When cache.getNode loaded a passivated node, the data was not loaded, but it did trigger an eviction event. When eviction then passivated the node again, the data was overwritten. This issue has now been resolved and data loss no longer occurs in these circumstances.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Consoles</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6683">JBPAPP-6683</a> </span></dt><dd><div class="para">
					Directly accessing pages of the JBoss Web Console resulted in an exception error. This has been fixed by ensuring that access to the web console is only available via its start page.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6682">JBPAPP-6682</a> </span></dt><dd><div class="para">
					An exception occurred when creating a new Threshold Monitor via the JBoss Web Console. This has been fixed by checking that the DeploymentFileRepository MBean is available and if not, showing an error message.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Documentation</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7236">JBPAPP-7236</a> </span></dt><dd><div class="para">
					The <em class="citetitle">Standard Server Profiles</em> section of the <em class="citetitle">Administration and Configuration Guide</em> stated incorrectly that the "All" profile is used if no profile is explicitly stated or configured. In fact the profile named "Default" is used in these circumstances. A new section <em class="citetitle">Run the Application Server as a Service on Red Hat Enterprise Linux</em> has also been added to the <em class="citetitle">Installation Guide</em>.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7361">JBPAPP-7361</a> </span></dt><dd><div class="para">
					The "Workaround for Oracle" section of the <em class="citetitle">Administration and Configuration Guide</em> has been updated with the latest available information. If you are using Oracle, please check this section to see if it's relevant to your installation.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-4828">JBPAPP-4828</a> </span></dt><dd><div class="para">
					Instructions on upgrading EAP from 5.1.1 to 5.1.2 and later have been added to the <em class="citetitle">Installation Guide</em>.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-4958">JBPAPP-4958</a> </span></dt><dd><div class="para">
					In the Hibernate Core User Guide, a reference was made to an incorrect POM file. This reference has been updated in the documentation for the current release.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5566">JBPAPP-5566</a> </span></dt><dd><div class="para">
					A bug in class org.jboss.mail.SessionObjectFactory caused only one mail service to ever be resolved, even if more than one service was configured and present in the JNDI tree. The class now resolves more than one mail service if one is configured.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6138">JBPAPP-6138</a> </span></dt><dd><div class="para">
					A new section has been added to the HornetQ User Guide in the "Configuring Message-driven Beans" Section. The new section entitled "High Availability in Message-Driven Beans" explains the need for the "cluster" activation property in MDBs used in Clustered environments.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6213">JBPAPP-6213</a> </span></dt><dd><div class="para">
					A node fails to read all its messages if disconnected from its database. This happens because the node fails to acknowledge messages on database disconnection. To avoid the problem, set the node parameter <em class="parameter"><code>MaxRetry</code></em> to a value greater than <code class="literal">-1</code>. You can set the attribute value in the MBeans <code class="classname">PersistenceManager</code>, <code class="classname">PostOffice</code>, and <code class="classname">JMSUserManager</code> in the file <code class="filename">[database]-persistence-service.xml</code>. The Messaging User Guide now contains details about the MaxRetry parameter, and how to configure it in conjunction with other related parameters.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6741">JBPAPP-6741</a> </span></dt><dd><div class="para">
					The <em class="citetitle">Administration and Configuration Guide</em> has two new chapters: Enterprise Applications with EJB3 Services and Legacy EJB Support.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6887">JBPAPP-6887</a> </span></dt><dd><div class="para">
					In the <em class="citetitle">Using the Security Manager</em> section of the <em class="citetitle">Security Guide</em>, the instructions for importing JBoss signing key were incorrect. The path to the keytool utility was listed as <code class="filename">$JBOSS_HOME/bin/keytool</code> but it should have been <code class="filename">JAVA_HOME/bin/keytool</code>. This section of the Guide has now been corrected.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6958">JBPAPP-6958</a> </span></dt><dd><div class="para">
					Fencing for GFS2/SAN was not discussed anywhere in the HornetQ User Guide. While Fencing is required by HornetQ, the variety of ways to enable Fencing precludes specific discussion in the User Guide. To fix the issue, a new "Fencing" section was added to the "High Availability and Fail-over" Chapter. The section describes how to locate more information about configuring Fencing in other Red Hat documentation.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7000">JBPAPP-7000</a> </span></dt><dd><div class="para">
					The HornetQ User Guide contained incorrect information on clients running inside a Java 5 Virtual Machine and referred to jars, which are no longer delivered in the Client Classpath chapter. The chapter now provides accurate information on these issues.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7200">JBPAPP-7200</a> </span></dt><dd><div class="para">
					The Administration and Configuration Guide did not specify the ServerPeerID range (between 0 and 1023) required for JBoss Messaging in the Clustering Section of the guide. This caused problems with users specifying values outside of these ranges, which resulted in a java.lang.IllegalArgumentException. The fix adds an admonition to the "Initial Preparation" section detailing the node range required. Customer now know the range available when setting node ServerPeer IDs.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7324">JBPAPP-7324</a> </span></dt><dd><div class="para">
					It was discovered that Windows customers were encountering problems when installing the platform using the Graphical Installer. Not correctly setting the JAVA_HOME environment variable before running the installer caused an warning message to display. The Installation Guide has been updated with a Task prerequisite of setting JAVA_HOME, with links to the appendix containing these instructions.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>EJB</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-4656">JBPAPP-4656</a> </span></dt><dd><div class="para">
					In the event of a transaction rollback during a timeout callback, the timeout callback must be retrieved as per spec EJB 3.1 FR 18.4.3. The container did not enlist the timer into the transaction and the timer could not be retrieved on rollback. Timer callback implementation has been changed to support running within transactions so that after the timeout callback is rolled back, the callback is retired by the service.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5516">JBPAPP-5516</a> </span></dt><dd><div class="para">
					When messages were sent to a MDB which was not fully prepared to receive them, the MDB container would throw a DispatcherConnectException. Because this was a checked exception, and therefore ignored for determining transaction semantics, the transaction would commit and the messages would be acked without the MDB ever seeing the messages. The fix introduces new logic which checks that any exception is properly checked against the signature of the inflow method. Any invalid exception results in an UndeclaredThrowableException (/RuntimeException). When a RuntimeException is encountered during message inflow, the transaction is rolled back. Messages within that transaction are not acknowledged and retried at a later interval. The assumption is that the MDB is ready by that time to receive messages normally and thus normal operation resumes.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6953">JBPAPP-6953</a> </span></dt><dd><div class="para">
					If an EJB jar deployment specifies a dependency and this dependency is restarted, the deployment or start of the EJB would fail with an IllegalStateException message similar to the following: 
<pre class="screen">
Caused by: java.lang.IllegalStateException: jboss.j2ee:ear=helloWorld.ear,jar=helloWorld-ejb.jar,name=HelloBean,service=EJB3 is already installed.
</pre>
					 This was caused because the EJB's deployment was duplicated during the installation or start. To resolve this problem before upgrading to EAP 5.1.2, either redeploy the dependent EJB or restart the server. This problem has been fixed and this workaround is not required once you have upgraded.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6789">JBPAPP-6789</a> </span></dt><dd><div class="para">
					A clustered EJB using @RemoteBinding(jndiBinding=...) or &lt;remote-binding&gt; incorrectly created a proxy in JNDI, then replaced it with the correct proxy. When the cluster membership changed, the wrong proxy's cluster member list was updated, so the EJB clients were not informed about the new member. The extra proxy is no longer created and removed. The cluster member list now updates correctly, allowing EJB calls to load balance and failover to the new nodes.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Embedded Jopr</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6765">JBPAPP-6765</a> </span></dt><dd><div class="para">
					When an application was deployed using the admin-console (Profile Service API), the application deployment was removed if it failed to start. The application could not be redeployed using the admin-console because the deployment was removed when deployment or startup failures occurred. The fix forces the Admin Console to allow application or resource deployment, even if the deployment fails to start. This functionality allows for situations where the user expects an application will not start due to dependency issues or HA singleton configuration, but still requires the deployment to remain on the EAP server.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>HornetQ</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6303">JBPAPP-6303</a> </span></dt><dd><div class="para">
					When a HornetQ queue was hosted on a remote HornetQ broker, and was not defined on the local instance of the HornetQ broker, HornetQ activation was ignoring multiple forward-slash characters in JNDI queue paths. If a queue was specified as &lt;queue name="jms/queue/myQueue"&gt;, HornetQ was interpreting this as &lt;queue name="myQueue"&gt;. An MDB listening on a remote queue was unable to connect to the queue because the forward-slashes were removed from the queue name. This issue is now fixed as part of this release.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7205">JBPAPP-7205</a> </span></dt><dd><div class="para">
					In a situation with clustered HornetQ instances where a cluster node has its journal disconnected - e.g. when the server loses its connection to the SAN - the other nodes did not take over in place of the failed node. This problem has now been fixed and failover from a failed HornetQ node now occurs without interruption to the client.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7556">JBPAPP-7556</a> </span></dt><dd><div class="para">
					The default delay for message redelivery has been changed so that it's now 60000 milliseconds, or 1 minute. The default value was previously 0, which meant no redelivery delay. The specific change has been made in <code class="filename">hornetq-configuration.xml</code>.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5895">JBPAPP-5895</a> </span></dt><dd><div class="para">
					An issue was discovered in a clustered HornetQ configuration where a client failed to connect (using JNDI) to the backup instance when the active node failed. The underlying cause of this issue was identified and fixed so that the client can now fail over from the active node to a backup node.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7455">JBPAPP-7455</a> </span></dt><dd><div class="para">
					An issue was identified with cluster connections in that the core bridge service was ignoring the <code class="code">min-large-message-size</code> specified in the configuration, instead using the default value of 100 KiB. This has been resolved and the <code class="code">min-large-message-size</code> value is now recognized if specified in the configuration.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5080">JBPAPP-5080</a> </span></dt><dd><div class="para">
					On server shutdown, HornetQXAResourceWrapper logs a warning on connection failure. This happens because the life-cycle of HornetQXAResourceWrapper is controlled by the Transaction Manager. The fix adds a recovery API to HornetQ, which fixes the issue.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6368">JBPAPP-6368</a> </span></dt><dd><div class="para">
					HornetQ did not ship with a <code class="filename">switch.bat</code> script for customers running HornetQ on Microsoft Windows servers. While HornetQ could be installed by running ant in the HornetQ directory containing the <code class="filename">build.xml</code> file, this was not consistent with the Linux environment. A switch.bat script is shipped for Microsoft Windows customers, which replicates the switch.sh script behavior in Linux environments.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6522">JBPAPP-6522</a> </span></dt><dd><div class="para">
					It was discovered that the HornetQ core bridge service was hanging if the target server was terminated while large *bytemessages* of approximately 270MB were being delivered. The contents of the failed messages were not cleaned up from the target server's <code class="filename">data/large-messages</code> directory.
				</div><div class="para">
					When the server was terminated more than once during large *bytemessage* transmission, multiple files would persist in the<code class="filename">data/large-messages</code> directory. The only way to correct this issue was to restart the server that the bridge service was deployed on.
				</div><div class="para">
					The fix implements changes to the core bridge, which now restarts until it successfully reconnects to the target server. The bridge no longer hangs when the target server is terminated, which corrects the issue.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7115">JBPAPP-7115</a> </span></dt><dd><div class="para">
					In a clustered HornetQ configuration, messages 1 MB or larger in size could get stuck in the queue, resulting in a NullPointerException. This has been solved with large messages now catered for in a clustered configuration.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7161">JBPAPP-7161</a> </span></dt><dd><div class="para">
					If the server crashed while transmitting a large message, the message remained in the large message directory unless removed manually. A temporary record is now added on the journal marking of the file and the file is deleted if corrupted.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>IIOP</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6469">JBPAPP-6469</a> </span></dt><dd><div class="para">
					IIOP deployments were not being deployed when using the standard profile because the file <code class="filename">ejb3-iiop-deployers-jboss-beans.xml</code> was not in <code class="filename">$JBOSS_HOME/server/standard/deployers/ejb3.deployer/META-INF</code>. This file is now present, and IIOP deployments now work in the standard profile.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6956">JBPAPP-6956</a> </span></dt><dd><div class="para">
					A new CORBA naming context implementation has been added which uses a local cache to resolve names and avoid unnecessary remote calls.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6462">JBPAPP-6462</a> </span></dt><dd><div class="para">
					Use of a custom CORBA servant inside an isolated EAR would cause ClassNotFoundExceptions if the servant tried to call an in-EAR EJB due to the use of an incorrect thread context classloader (TCCL) by JacORB. The cause of this problem has been fixed by ensuring that the TCCL of the servant class is used instead.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Installer</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6954">JBPAPP-6954</a> </span></dt><dd><div class="para">
					The installer had a <code class="code">Previous</code> button available but if it was pressed, already installed files would be left installed. To prevent this occurring the <code class="code">Previous</code> button is now disabled.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7540">JBPAPP-7540</a> </span></dt><dd><div class="para">
					On Red Hat Enterprise Linux, menu items created by the installer were not available to all users, despite the checkbox "Create shortcuts for all users" being checked. The cause was inverted logic in the installer, so that the menu items created were available to all users only if the "Create shortcuts for all users" was <span class="emphasis"><em>not</em></span> checked. This problem has now been fixed.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7565">JBPAPP-7565</a> </span></dt><dd><div class="para">
					Menu items created by the installer on Microsoft Windows were not consistent with those created on Red Hat Enterprise Linux. The cause of the problem was that the run commands used in some of the menu items was invalid on Windows. The installer has been fixed so that all menu items are now valid on both operating systems.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7568">JBPAPP-7568</a> </span></dt><dd><div class="para">
					Shortcuts created by the installer on Microsoft Windows had an incorrect path specified, which resulted in the shortcuts failing to start the platform. The path given included "jboss-as" but this should have been "jboss-as-web". The installer has now been corrected so that the shortcuts included the correct path.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7566">JBPAPP-7566</a> </span></dt><dd><div class="para">
					On Windows, shortcuts which contained Asian characters were not removed by the uninstaller. The cause of the problem was found to be incorrect string encoding. This problem has since been fixed and all shortcuts created by the installer are successfully removed when the uninstaller is used.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6376">JBPAPP-6376</a> </span></dt><dd><div class="para">
					The DVD Store demonstration Seam application provide with the Enterprise Application Platform failed to deploy. The application is now updated and will successfully deploy.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6603">JBPAPP-6603</a> </span></dt><dd><div class="para">
					When running the installer with OpenJDK the buttons along the bottom of the window were cut off, making accessibility an issue. This has been resolved by changing their orientation slightly.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6405">JBPAPP-6405</a> </span></dt><dd><div class="para">
					On Windows with either Japanese or Chinese localization settings, the Enterprise Application Platform's installer failed to create shortcuts in the Start menu and the users' desktop, requiring the user to manually start the application via either Windows Explorer or a Command Prompt. This problem has been fixed and the in these circumstances the installer now correctly creates shortcuts in both locations.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>JCA</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6939">JBPAPP-6939</a> </span></dt><dd><div class="para">
					The JCA DTD (<code class="filename">jboss-ds_5_1.dtd</code>) referenced an element named "background-validation-minutes" but this was incorrect and should have been "background-validation-millis". This has now been corrected and the DTD now contains the element's correct name.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7102">JBPAPP-7102</a> </span></dt><dd><div class="para">
					Datasources exposed remotely via RMI used the maps of connections and statements in a way that was not threadsafe. This resulted in either clients receiving an error message "unable to find statement" or the server getting stuck in an infinite loop due to the map data structure being corrupted. This issue has been resolved by changing the method of access to the remote datasource's map, so that it is thread-safe.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6855">JBPAPP-6855</a> </span></dt><dd><div class="para">
					When recommended properties in an activation specification were not available, a DeploymentException error such as the following would occur: 
<pre class="screen">
08:20:50,262 ERROR [AbstractKernelController] Error installing to Start: name=jboss.j2ee:binding=message-driven-bean,jndiName=local/gss_mdb_20@32140521,plugin=invoker,service=EJB state=Create mode=Manual requiredState=Installed
org.jboss.deployment.DeploymentException: Unable to create activation spec ra=jboss.jca:service=RARDeployment,name='wmq.jmsra.rar' 
...
</pre>
					 The validation of properties has been changed and the following warning message is now output if an unknown or unsupported configuration property is detected: 
<pre class="screen">
17:52:45,801 WARN  [ActivationSpecFactory] Unable to set 'foo' property on org.jboss.resource.adapter.jms.inflow.JmsActivationSpec
</pre>

				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6684">JBPAPP-6684</a> </span></dt><dd><div class="para">
					A deadlock could occur when multiple threads accessed the JCA layer to either commit or roll back a transaction. The JCA code has been updated to resolve these problems and multi-threaded access should now work correctly.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6943">JBPAPP-6943</a> </span></dt><dd><div class="para">
					The configuration settings <code class="code">allocation-retry</code> and <code class="code">allocation-retry-wait-millis</code> and <code class="code">no-tx-separate-pools</code> did not work if they were specified in the configuration file (*-ds.xml) but did work if changed via the JMX Console. The cause of this problem has been resolved so these settings can now be configured via either method.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>JMX</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6900">JBPAPP-6900</a> </span></dt><dd><div class="para">
					The Java security policies defined in <code class="filename">bin/server.policy.cert</code> were too strict, causing the JMX console to fail to load when the Java Security Manager was enabled. To resolve this issue, an entry was added to the <code class="filename">bin/server.policy.cert</code> file to relax the Security Manager restrictions.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Messaging</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5280">JBPAPP-5280</a> </span></dt><dd><div class="para">
					The MessageSucker is responsible for migrating messages between different members of a cluster. The <code class="methodname">onMessage</code> routine attempts to deliver messages to the local queue, among other tasks. If delivery failed, messages appeared to be lost. They were still in the database, but it was difficult to redeliver them. This was a defect in the JBoss Messaging component, and has been fixed in that component. The fix is complex, and is discussed in JBMESSAGING-1822, which is available at <a href="https://issues.jboss.org/browse/JBMESSAGING-1822">https://issues.jboss.org/browse/JBMESSAGING-1822</a>. In short, a new layer of reliability has been added to the message delivery logic.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6620">JBPAPP-6620</a> </span></dt><dd><div class="para">
					The messaging server would not start in default profile when configured to use a database other than HSQLDB database. This was caused by not commenting out lines in the <code class="filename"><em class="replaceable">database_type</em>-persistence-service.xml</code> file that were applicable only to clustered profiles.
				</div><div class="para">
					The fix adds prescriptive comments to the <code class="filename"><em class="replaceable">database_type</em>-persistence-service.xml</code> file, instructing how to comment out unnecessary configuration directives for non-clustered messaging server instances.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Naming</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6431">JBPAPP-6431</a> </span></dt><dd><div class="para">
					A performance issue was identified in org.jnp.interfaces.NamingContext.checkRef, where every new InitialContext looped through the provider list in order. An unavailable node at the beginning of the provider list could cause a delay because it was waiting for a timeout before checking the next node. The fix adds an available JNDI Property (jnp.unorderedProviderList) and a system property (jboss.global.jnp.disableDiscovery). These properties change the initial JNDI server lookup order when multiple providers are used. Without the property (default), each provider is still tried in order on every new InitialContext. With the new property set, any existing connection to any provider is used before checking the provider list in order again.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Other</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5148">JBPAPP-5148</a> </span></dt><dd><div class="para">
					Deployment file names were not previously checked for legal paths. Poorly-constructed file names could cause unexpected file deletions or alterations. The deployment files are now checked for legal paths, and an exception is thrown if an illegal path is used.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6046">JBPAPP-6046</a> </span></dt><dd><div class="para">
					If the Simple Logging Facade for Java or (SLF4J) was used in a top-level classloader such as the endorsed classpath, it would cause NullPointerExceptions. The cause of this problem has been resolved and SLF4J can now be used in a top-level classloader.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6486">JBPAPP-6486</a> </span></dt><dd><div class="para">
					JAXB elements were not processed correctly when preceded by elements with <code class="code">xsi:nil=true</code>. This issue has now been resolved and JAXB elements are processed correctly.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6524">JBPAPP-6524</a> </span></dt><dd><div class="para">
					Configuration of "use_tccl=false|true" could be unreliable if there were several commons-logging.properties files. To fix this problem a new system property <code class="code">org.apache.commons.logging.use_tccl</code> has been created, with the default still being <code class="code">true</code>.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6824">JBPAPP-6824</a> </span></dt><dd><div class="para">
					A deployment configured with parent-first=true is not delegating to the parent when loading resources (getResource). To enable this functionality set 
<pre class="programlisting">-Dorg.jboss.classloader.honor.resource.delegation=true</pre>
					 and resources will be loaded parent-first if so configured. This can be done on the run.sh command or in the $JBOSS_HOME/bin/run.conf in JAVA_OPTS environment variable.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6849">JBPAPP-6849</a> </span></dt><dd><div class="para">
					The "Migrating to HornetQ" section did not contain specific information about migrating JBoss Messaging applications where High Availability was concerned. A new section "Client-side Failure Handling" is now available in the guide, which details the extra code required to correctly handle HornetQ failover exceptions.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6884">JBPAPP-6884</a> </span></dt><dd><div class="para">
					The XML Schema Declaration "jboss-xa-ds.xml" has been removed. All data source deployments in EAP 5.1.x should use the jboss-ds_5_1.dtd instead.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7128">JBPAPP-7128</a> </span></dt><dd><div class="para">
					The getModulePath method of SimpleJavaEEModuleInformer did not follow the JavaEEModuleInformer specification as the getModulePath method returned an empty string for a top-level non-ear deployment. The method now returns the module name for such deployments and therefore meets the JavaEEModuleInformer specification.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7241">JBPAPP-7241</a> </span></dt><dd><div class="para">
					In rare circumstances, a PagedReference could be garbage collected before messages were consumed, resulting in pagecredits getting out of sequence and the affected messages being stuck. A minimal page-size is one factor in the circumstances leading to this problem. This problem has now been solved by detecting and better handling these circumstances.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7093">JBPAPP-7093</a> </span></dt><dd><div class="para">
					In an earlier release the caching behaviour in XMLReaderManager was removed to resolve a memory leak. This forced each invocation to recreate the XMLReader and, as a result of the presence of the Synchronized methods, contend with other threads. Caching has been reinstated through the use of the SAXParser class, resolving the issue of thread contention. The original issue of a memory leak is avoided by use of the SAXParser reset method.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Scripts and Commands</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5901">JBPAPP-5901</a> </span></dt><dd><div class="para">
					On RHEL 6 the JBoss service script had some backslashes incorrectly escaped, resulting in an invalid command and stopping JBoss being started or stopped. The script has been fixed and JBoss can reliably be started and stopped on RHEL 6.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6944">JBPAPP-6944</a> </span></dt><dd><div class="para">
					On a "service stop" request on Red Hat Enterprise Linux the JBoss Enterprise Application Server service could fail to shutdown with a timeout failed error. The init script was modified to make sure the service shuts down correctly on service stop request.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6951">JBPAPP-6951</a> </span></dt><dd><div class="para">
					When the log <code class="filename">$JBOSS_HOME/server/$JBOSSCONF/log/server.log</code> contained more than one instance of a server start-stop sequence, the shutdown script mistakenly detected that the server had shut down before it had actually been shut down properly. This problem has been fixed by changing the the script to monitor the server's process ID (PID) instead of the log file.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7013">JBPAPP-7013</a> </span></dt><dd><div class="para">
					All *.xml and *.property files have been changed to Windows-compatible format (line endings). To change them to UNIX-compatible format, run the script <code class="filename">jboss-eap-5.1/jboss-as/bin/convert-dos2unix.sh</code>, ensuring that you run it in the <code class="filename">jboss-eap-5.1/jboss-as/bin/</code> directory.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Seam</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5039">JBPAPP-5039</a> </span></dt><dd><div class="para">
					An incompatibility with Microsoft Internet Explorer 8 and the Seam Tasks Example resulted in text appended to a task being represented as a blank line in the task list. The Seam Tasks Example was improved to display edited tasks correctly in Microsoft Internet Explorer 8.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6611">JBPAPP-6611</a> </span></dt><dd><div class="para">
					An EAR project generated using seam-gen from EAP 5.1.1 contains some wrong dependencies in .classpath file: <code class="code">core.jar</code> and <code class="code">janino.jar</code>. These are no longer required and have been removed from Eclipse's classpath file and should be removed from any existing EAR project if you updated Seam and Drools jars from EAP 5.1.2 release in your existing EAR application.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6650">JBPAPP-6650</a> </span></dt><dd><div class="para">
					When mail messages were created using the Seam Mail tag <code class="code">&lt;ui:repeat...&gt;</code>, the list of attachments was cached and so each recipient received the attachment multiple times. This has been fixed by resetting the attachments list after it has been added to the message's body.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6751">JBPAPP-6751</a> </span></dt><dd><div class="para">
					The ServerConversationContext.flush() method created in some cases PersistentContext and BusinessContext instances and these instances lived in memory until the HTTP Session was invalidated. This problem is solved by creating them only when required.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6946">JBPAPP-6946</a> </span></dt><dd><div class="para">
					A multipart request was not parsed correctly if CRLF+CRLF (Carriage Return Line Feed) in the header line was separated at the buffer boundary; that is, the header buffer ended with CRLF and the following byte was CRLF. This caused a MultipartRequest error and excessive CPU memory usage. Such multipart request is now parsed correctly and the error no longer occurs.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7084">JBPAPP-7084</a> </span></dt><dd><div class="para">
					The org.apache.el.util.concurrentcache class did not synchronize requests for concurrent access to WeakHashMap. In some cases, this caused an infinite loop, which consumed excessive CPU memory. The underlying issue has now been resolved and access to WeakHashMap in the org.jboss.el.util.concurrentcache class is now synchronized.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7139">JBPAPP-7139</a> </span></dt><dd><div class="para">
					It was found that the Attribute Exchange (AX) extension of OpenID4Java was not checking to ensure attributes were signed. If AX was being used to receive information that an application only trusts the identity provider to assert, a remote attacker could use this flaw to conduct man-in-the-middle attacks and compromise the integrity of the information via a specially-crafted request. By default, only the JBoss Seam openid example application uses OpenID4Java. (CVE-2011-4314). 
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								openid4jav-nodeps.jar
							</div></li><li class="listitem"><div class="para">
								httpclient.jar
							</div></li><li class="listitem"><div class="para">
								httpcore.jar
							</div></li><li class="listitem"><div class="para">
								nekohtml.jar
							</div></li><li class="listitem"><div class="para">
								jcip-annotations.jar
							</div></li><li class="listitem"><div class="para">
								guice.jar
							</div></li><li class="listitem"><div class="para">
								commons-codec.jar
							</div></li></ul></div>

				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Security</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6364">JBPAPP-6364</a> </span></dt><dd><div class="para">
					It was found that the invoker servlets, deployed by default via httpha-invoker, only performed access control on the HTTP GET and POST methods, allowing remote attackers to make unauthenticated requests by using different HTTP methods. Due to the second layer of authentication provided by a security interceptor, this issue is not exploitable on default installations unless an administrator has misconfigured the security interceptor or disabled it. (CVE-2011-4085)
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6893">JBPAPP-6893</a> </span></dt><dd><div class="para">
					In prior EAP 5 releases, use of cglib.jar would cause security exceptions since code generated by cglib overlapped with the cglib JAR packages that were signed. To resolve this issue cgilib.jar has been unsigned and the security policy has been modified to account for this change.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6996">JBPAPP-6996</a> </span></dt><dd><div class="para">
					Under heavy load a ConcurrentModificationException could occur in the SimpleRoleGroup class, resulting in the user being unauthorized. The cause of this problem has been identified and corrected and no longer occurs.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>SNMP</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6504">JBPAPP-6504</a> </span></dt><dd><div class="para">
					When a Long value was passed in to the SNMP Adapter, there was no option to convert this to a <code class="literal">Counter64</code> type but only as <code class="literal">Gauge32</code>. This caused the return value to be of the incorrect type 32bit and not 64bit. The JVM argument <em class="parameter"><code>-Djboss.snmp.use64bit</code></em> is now available. It can be used to specify that 64bit data types should be returned by the SNMP adapter. Usage <em class="parameter"><code>-Djboss.snmp.use64bit=true</code></em>. The default value is <code class="literal">false</code>. When set, all Long types are returned as 64bit values. For backward compatibility the default value is <code class="literal">false</code> so existing setups will not change when a later version of the code is used.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>System</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6545">JBPAPP-6545</a> </span></dt><dd><div class="para">
					The security interceptor did not create a security context if one did not already exist. A new clean thread (the thread with no security context) was unable to invoke the local interface of the EJB. However, a new clean thread was able to invoke the remote interface of an EJB without any problems. The fix provides modifications to the PreSecurityInterceptor, which now creates a new security context if one does not exist. A new thread with no security context is able to invoke the local interface of the EJB.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Web</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7267">JBPAPP-7267</a> </span></dt><dd><div class="para">
					When Jasper was using the ParserUtils of JAXP, the calls between the framework's classes and deployment's classes were blocked because they were deliberately isolated from each other. To avoid this problem these calls have been modified so that they work in an isolated environment.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6141">JBPAPP-6141</a> </span></dt><dd><div class="para">
					Because of an issue in Tomcat, the time offset when Daylight Savings Time came into effect was wrong. This has since been fixed and the offset calculations are now correct.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7089">JBPAPP-7089</a> </span></dt><dd><div class="para">
					If there was a @PostConstruct annotation, or other annotation, on a method which was overloaded by another method with the same name, the call to that method would fail with an exception error. This occurred because no arguments were passed to the method and only the presence or absence of the method was being checked, not the presence or absence of methods. To resolve this issue further checks have been added so that the presence of parameters is confirmed prior to the method being invoked.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6724">JBPAPP-6724</a> </span></dt><dd><div class="para">
					When mixed methods of authentication were used in the one deployment, the WebAuthentication method would prevent the start of a single sign-on (SSO) session. This problem is resolved and WebAuthentication now works correctly with SSO sessions.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6501">JBPAPP-6501</a> </span></dt><dd><div class="para">
					An error occurred when a getter method returned an empty string and numeric conversion was attempted. This has been fixed by testing for and better handling the empty string.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7104">JBPAPP-7104</a> </span></dt><dd><div class="para">
					The injection of @EJB or @Resource fields into superclasses of JSF Managed Bean were failing. When @EJB were to be injected via annotations, those annotations were not being processed, leaving their fields null, or otherwise unset. The cause of this issue has been resolved and these injections now work as expected.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Web Services</strong></p><dl class="variablelist"><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-7124">JBPAPP-7124</a> </span></dt><dd><div class="para">
					The CXF installer removed the jettison.jar, stax-ex.jar, and streambuffer.jar files from the client/ directory if they were available. However, these files could be used by non-WS clients and some applications could fail to work after CFX upgrade or installation. The installer now no longer removes these files and the applications work as expected even after CXF installation or upgrade.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6822">JBPAPP-6822</a> </span></dt><dd><div class="para">
					An endpoint implementation annotated with @HandlerChain and WS-Security (WSSE) enabled caused a duplicate SOAP body to be appended. The cause of this problem has been resolved and no duplication now occurs.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6593">JBPAPP-6593</a> </span></dt><dd><div class="para">
					In JBoss EAP 5.1.1, running the httpbinding example caused errors. These occurred because JBossWS Native forced JBoss Remoting to close the streams. This enforcing introduced regressions that have been fixed in JBoss EAP 5.1.2.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6729">JBPAPP-6729</a> </span></dt><dd><div class="para">
					Some clients failed to parse web service responses sent from JBoss that were MTOM/XOP encoded because JBoss Web Services failed to add the "charset" parameter to the root MIME part if the used charset was different from the implicit default "ISO-8859-1". The "charset" parameter is now added to the web service response if necessary.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6734">JBPAPP-6734</a> </span></dt><dd><div class="para">
					The system threw a RuntimeException if a policy reference was wrapped in a &lt;wsp:policy&gt; element in a wsdl file. This happened because it failed to resolve the policy reference. The policy reference can now be either wrapped in the &lt;wsp:Policy&gt; element or defined as a standalone element (without being wrapped in the &lt;wsp:Policy&gt; element).
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6371">JBPAPP-6371</a> </span></dt><dd><div class="para">
					JBossWS shell script and batch files from the CXF stack (wsconsume, wsprovide, wsrunclient) were inconsistent with their use of the <code class="code">-Djava.net.preferIPv4Stack</code> configuration option. This has been changed and both the Native and CXF stacks are configured with an IPv4 preference.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6389">JBPAPP-6389</a> </span></dt><dd><div class="para">
					The schema validation feature supported one imported schema only. Now, you can define @SchemaValidation on a WSDL that defines multiple schema imports.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-5866">JBPAPP-5866</a> </span></dt><dd><div class="para">
					SOAPFactoryImpl forces additional namespace declarations in all child elements that are not immediate child elements of the element declaring the namespaces. This explicit declaration is redundant and is now no longer added.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6285">JBPAPP-6285</a> </span></dt><dd><div class="para">
					JBoss Web Services threw an org.w3c.dom.DOMException when it attempted to create a dispatch client with an EnpointReference. This happened because the server appended a node from another document to the dispatch client in some concurrent environments. JBoss Web Services now appends the correct node to the dispatch client and creates the dispatch client with an EndpointReference correctly.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6186">JBPAPP-6186</a> </span></dt><dd><div class="para">
					The password digest of the UsernameToken profile used in JBoss Web Services did not follow the Oasis specification as the digest used the base64 encoded nonce. As a result, the process was incompatible with other web service implementations that support UsernameToken profile. The password digest has been corrected to use the binary value of the nonce and JBoss Web Services works with other implementations in the UsernameToken profile as expected.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6245">JBPAPP-6245</a> </span></dt><dd><div class="para">
					JBossWS native does not properly protect against recursive entity resolution with embedded DTDs. A remote attacker could cause a Denial-Of-Service by CPU resource exhaustion with a carefully crafted POST request to a deployed web service. (CVE-2011-1483)
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6249">JBPAPP-6249</a> </span></dt><dd><div class="para">
					The JBossWS-CXF JAXWS client relies on the CXF ProviderImpl which requires a Bus instance. Unless a Bus was associated with the current thread, the Bus retrieval process returned the Bus instance that was created for the server. Now a customized Provider implementation creates a new Bus instance for the client and the Bus request returns this Bus instance.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6529">JBPAPP-6529</a> </span></dt><dd><div class="para">
					When a CXF endpoint received an HTTP GET request, it threw a NullPointerException at org.apache.cxf.staxutils.StaxUtils.readDocElements. Although a GET request to the endpoint should cause an exception, a NullPointerException is not appropriate. The endpoint now filters the GET requests and safely skips the code that caused the exception.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6479">JBPAPP-6479</a> </span></dt><dd><div class="para">
					If a wsdl part contained a header with partIndex 0, the JAX-WS runtime threw an IllegalArgumentException due to an incorrect number of arguments in the dispatch/provider service. With this update the arguments are checked and added to the argument list as expected.
				</div></dd><dt><span class="term"> <a href="https://issues.jboss.org/browse/JBPAPP-6267">JBPAPP-6267</a> </span></dt><dd><div class="para">
					When a client sent a message with an MTOM (Message Transmission Optimization Mechanism) attachment, which was larger than 64K to JBoss Web Services, the server deleted the swap file in ServiceEndpointInvoker before the response message processing was completed and returned a FileNotFoundException. Now the swap file is deleted after the response processing has been completed and the error no longer occurs.
				</div></dd></dl></div></div></body></html>