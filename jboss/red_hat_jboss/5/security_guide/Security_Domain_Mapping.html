<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 9. Mapping</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Security_Domain_Mapping">
      ⁠</a>Chapter 9. Mapping</h1></div></div></div><div class="para">
		In JBoss Enterprise Application Platform 5, it is possible to map additional roles at the deployment level from those derived at the security domain level (such as at the EAR level).
	</div><div class="para">
		This is achieved by declaring the <code class="classname">org.jboss.security.mapping.providers.DeploymentRolesMappingProvider</code> class as the value for the <em class="parameter"><code>code</code></em> attribute in the <span class="markup">&lt;mapping-module&gt;</span> element. Additionally, the <em class="parameter"><code>type</code></em> attribute must be set to <code class="literal">role</code>. Refer to <a class="xref" href="Security_Domain_Schema_Construction.html#Security_Domain_Schema_Mapping_Element">Section 6.1.3, “&lt;mapping&gt;”</a> for information about the <span class="markup">&lt;mapping&gt;</span> element schema.
	</div><div class="para">
		By configuring the mapping configuration element within the role-based parameter, you can force additional role interpretation to the declared principals specified for the particular deployment (war, ear, ejb-jar etc).
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important: &lt;rolemapping&gt; deprecated for &lt;mapping&gt;</strong></p></div><div class="admonition"><div class="para">
			In versions prior to JBoss Enterprise Application Platform 5, the <span class="markup">&lt;rolemapping&gt;</span> element contained the <span class="markup">&lt;mapping-module&gt;</span> element and class declaration. <span class="markup">&lt;rolemapping&gt;</span> has now been deprecated, and replaced with the <span class="markup">&lt;mapping&gt;</span> element.
		</div></div></div><div class="example"><a id="idm139921682936896">
      ⁠</a><p class="title"><strong>Example 9.1. &lt;mapping-module&gt; declaration</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"test-domain"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;authentication&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/authentication&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;mapping&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;mapping-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.mapping.providers.DeploymentRolesMappingProvider"</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"role"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/mapping&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span></pre></div></div><div class="para">
		Once the security domain is configured correctly, you can append the <span class="markup">&lt;security-role&gt;</span> element group as a child element of the <span class="markup">&lt;assembly-descriptor&gt;</span> to the <code class="filename">WEB-INF/jboss-web.xml</code> (<code class="filename">.war</code> or <code class="filename">.sar</code>) file.
	</div><div class="example"><a id="exam-Deploy_Level_Security_Role_Declaration">
      ⁠</a><p class="title"><strong>Example 9.2. &lt;security-role&gt; declaration</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;assembly-descriptor&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;security-role&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;role-name&gt;</span>Support<span xmlns="" class="perl_Keyword">&lt;/role-name&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;principal-name&gt;</span>Mark<span xmlns="" class="perl_Keyword">&lt;/principal-name&gt;</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;principal-name&gt;</span>Tom<span xmlns="" class="perl_Keyword">&lt;/principal-name&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/security-role&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/assembly-descriptor&gt;</span></pre><div class="para">
			A security role relating to Support principals is implemented in addition to the base security role information contained in <code class="filename">WEB-INF/jboss-web.xml</code>.
		</div></div></div></div></body></html>