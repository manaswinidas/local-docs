<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 4. The JBoss Security Extension Architecture</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="JBoss_Security_Extension_Architecture">
      ⁠</a>Chapter 4. The JBoss Security Extension Architecture</h1></div></div></div><div class="para">
		The preceding discussion of the general JBoss security layer has stated that the <em class="firstterm"> JBoss Security Extension framework </em> (<abbr class="abbrev">JBossSX</abbr>) is an implementation of the security layer interfaces. This is the primary purpose of the JBossSX framework. The framework offers a great deal of customization possibilities for integration into existing security infrastructures. A security infrastructure can be anything from a database or LDAP server to a sophisticated security software suite. The integration flexibility is achieved using the <em class="firstterm"> Pluggable Authentication Model </em> ( <acronym class="acronym"> PAM </acronym> ) available in the JAAS framework.
	</div><div class="para">
		The heart of the JBossSX framework is <code class="classname">org.jboss.security.plugins.JaasSecurityManager</code>. This is the default implementation of the <code class="classname">AuthenticationManager</code> and <code class="classname">RealmMapping</code> interfaces. <a class="xref" href="JBoss_Security_Extension_Architecture.html#The_JBoss_Security_Extension_Architecture-The_relationship_between_the_security_domain_component_deployment_descriptor_value_the_component_container_and_the_JaasSecurityManager.">Figure 4.1, “Relationship between &lt;security-domain&gt; deployment descriptor value, component container, and JaasSecurityManager.”</a> shows how the <code class="classname">JaasSecurityManager</code> integrates into the EJB and web container layers based on the <span class="markup">&lt;security-domain&gt;</span> element of the corresponding component deployment descriptor.
	</div><div class="figure"><a id="The_JBoss_Security_Extension_Architecture-The_relationship_between_the_security_domain_component_deployment_descriptor_value_the_component_container_and_the_JaasSecurityManager.">
      ⁠</a><div class="figure-contents"><div class="mediaobject" style="text-align: center"><img src="images/j2ee_chap8-9.png" align="middle" alt="Relationship between &lt;security-domain&gt; deployment descriptor value, component container, and JaasSecurityManager." style="text-align: middle"/></div></div><p class="title"><strong>Figure 4.1. Relationship between &lt;security-domain&gt; deployment descriptor value, component container, and JaasSecurityManager.</strong></p></div><div class="para">
		<a class="xref" href="JBoss_Security_Extension_Architecture.html#The_JBoss_Security_Extension_Architecture-The_relationship_between_the_security_domain_component_deployment_descriptor_value_the_component_container_and_the_JaasSecurityManager.">Figure 4.1, “Relationship between &lt;security-domain&gt; deployment descriptor value, component container, and JaasSecurityManager.”</a> depicts an enterprise application that contains both EJBs and web content secured under the security domain <code class="literal">jwdomain</code>. The EJB and web containers have a request interceptor architecture that includes a security interceptor, which enforces the container security model. At deployment time, the <span class="markup">&lt;security-domain&gt;</span> element value in the <code class="filename">jboss.xml</code> and <code class="filename">jboss-web.xml</code> descriptors is used to obtain the security manager instance associated with the container. The security interceptor then uses the security manager to perform its role. When a secured component is requested, the security interceptor delegates security checks to the security manager instance associated with the container.
	</div><div class="para">
		The JBossSX <code class="literal">JaasSecurityManager</code> implementation performs security checks based on the information associated with the <code class="literal">Subject</code> instance that results from executing the JAAS login modules configured under the name matching the <span class="markup">&lt;security-domain&gt;</span> element value. We will drill into the <code class="literal">JaasSecurityManager</code> implementation and its use of JAAS in the following section.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="The_JBoss_Security_Extension_Architecture-How_the_JaasSecurityManager_Uses_JAAS">
      ⁠</a>4.1. How the JaasSecurityManager Uses JAAS</h1></div></div></div><div class="para">
		The <code class="literal">JaasSecurityManager</code> uses the JAAS packages to implement the <code class="literal">AuthenticationManager</code> and <code class="literal">RealmMapping</code> interface behavior. In particular, its behavior derives from the execution of the login module instances that are configured under the name that matches the security domain to which the <code class="literal">JaasSecurityManager</code> has been assigned. The login modules implement the security domain's principal authentication and role-mapping behavior. Thus, you can use the <code class="literal">JaasSecurityManager</code> across different security domains simply by plugging in different login module configurations for the domains.
	</div><div class="para">
		To illustrate the details of the <code class="literal">JaasSecurityManager</code>'s usage of the JAAS authentication process, you will walk through a client invocation of an EJB home method invocation. The prerequisite setting is that the EJB has been deployed in the server and its home interface methods have been secured using <span class="markup">&lt;method-permission&gt;</span> elements in the <code class="filename">ejb-jar.xml</code> descriptor, and it has been assigned a security domain named <code class="literal">jwdomain</code> using the <code class="filename">jboss.xml</code> descriptor <span class="markup">&lt;security-domain&gt;</span> element.
	</div><div class="figure"><a id="fig-Secured_EJB_Home_Method_Auth_Invocation_Steps">
      ⁠</a><div class="figure-contents"><div class="mediaobject" style="text-align: center"><img src="images/authsteps.png" align="middle" alt="Secured EJB Home Method Authentication and Authorization Invocation Steps." style="text-align: middle"/></div></div><p class="title"><strong>Figure 4.2. Secured EJB Home Method Authentication and Authorization Invocation Steps.</strong></p></div><div class="para">
		<a class="xref" href="JBoss_Security_Extension_Architecture.html#fig-Secured_EJB_Home_Method_Auth_Invocation_Steps">Figure 4.2, “Secured EJB Home Method Authentication and Authorization Invocation Steps.”</a> provides a view of the client to server communication. The numbered steps shown are:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="orderedlist"><ol><li class="listitem"><div class="para">
				The client must perform a JAAS log in to establish the principal and credentials for authentication, and this is labeled <span class="emphasis"><em>Client Side Login</em></span> in the figure. This is how clients establish their login identities in JBoss. Support for presenting the login information via JNDI <code class="literal">InitialContext</code> properties is provided via an alternate configuration.
			</div><div class="para">
				A JAAS log in entails creating a <code class="literal">LoginContext</code> instance and passing in the name of the configuration to use. The configuration name is <code class="literal">other</code>. This one-time log in associates the login principal and credentials with all subsequent EJB method invocations. Note that the process might not authenticate the user. The nature of the client-side log in depends on the login module configuration that the client uses. In this example, the <code class="literal">other</code> client-side login configuration entry is set up to use the <code class="literal">ClientLoginModule</code> module (an <code class="classname">org.jboss.security.ClientLoginModule</code>). This is the default client side module that simply binds the user name and password to the JBoss EJB invocation layer for later authentication on the server. The identity of the client is not authenticated on the client.
			</div></li><li class="listitem"><div class="para">
				The client obtains the EJB home interface and attempts to create a bean. This event is labeled as <span class="emphasis"><em>Home Method Invocation</em></span>. This results in a home interface method invocation being sent to the server. The invocation includes the method arguments passed by the client, along with the user identity and credentials from the client-side JAAS log in performed in Step 1.
			</div></li><li class="listitem"><div class="para">
				On the server side, the security interceptor first requires authentication of the user invoking the call, which, as on the client side, involves a JAAS log in.
			</div></li><li class="listitem"><div class="para">
				The security domain under which the EJB is secured determines the choice of login modules. The security domain name is used as the login configuration entry name passed to the <code class="literal">LoginContext</code> constructor. The EJB security domain is <code class="literal">jwdomain</code>. If the JAAS log in authenticates the user, a JAAS <code class="literal">Subject</code> is created that contains the following in its <code class="literal">PrincipalsSet</code>:
			</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						A <code class="literal">java.security.Principal</code> that corresponds to the client identity as known in the deployment security environment.
					</div></li><li class="listitem"><div class="para">
						A <code class="literal">java.security.acl.Group</code> named <code class="literal">Roles</code> that contains the role names from the application domain to which the user has been assigned. <code class="literal">org.jboss.security.SimplePrincipal</code> objects are used to represent the role names; <code class="literal">SimplePrincipal</code> is a simple string-based implementation of <code class="literal">Principal</code>. These roles are used to validate the roles assigned to methods in <code class="filename">ejb-jar.xml</code> and the <code class="methodname"> EJBContext.isCallerInRole(String) </code> method implementation.
					</div></li><li class="listitem"><div class="para">
						An optional <code class="literal">java.security.acl.Group</code> named <code class="literal">CallerPrincipal</code>, which contains a single <code class="literal">org.jboss.security.SimplePrincipal</code> that corresponds to the identity of the application domain's caller. The <code class="literal">CallerPrincipal</code> sole group member will be the value returned by the <code class="methodname"> EJBContext.getCallerPrincipal() </code> method. The purpose of this mapping is to allow a <code class="literal">Principal</code> as known in the operational security environment to map to a <code class="literal">Principal</code> with a name known to the application. In the absence of a <code class="literal">CallerPrincipal</code> mapping the deployment security environment principal is used as the <code class="literal">getCallerPrincipal</code> method value. That is, the operational principal is the same as the application domain principal.
					</div></li></ul></div></li><li class="listitem"><div class="para">
				The final step of the security interceptor check is to verify that the authenticated user has permission to invoke the requested method. This is labeled as <span class="emphasis"><em>Server Side Authorization</em></span> in <a class="xref" href="JBoss_Security_Extension_Architecture.html#fig-Secured_EJB_Home_Method_Auth_Invocation_Steps">Figure 4.2, “Secured EJB Home Method Authentication and Authorization Invocation Steps.”</a>. Performing the authorization this entails the following steps:
			</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Obtain the names of the roles allowed to access the EJB method from the EJB container. The role names are determined by <code class="filename">ejb-jar.xml</code> descriptor <span class="markup">&lt;role-name&gt;</span> elements of all <span class="markup">&lt;method-permission&gt;</span> elements containing the invoked method.
					</div></li><li class="listitem"><div class="para">
						If no roles have been assigned, or the method is specified in an <span class="markup">exclude-list</span> element, then access to the method is denied. Otherwise, the <code class="methodname"> doesUserHaveRole </code> method is invoked on the security manager by the security interceptor to see if the caller has one of the assigned role names. This method iterates through the role names and checks if the authenticated user's Subject <code class="literal">Roles</code> group contains a <code class="literal">SimplePrincipal</code> with the assigned role name. Access is allowed if any role name is a member of the <code class="literal">Roles</code> group. Access is denied if none of the role names are members.
					</div></li><li class="listitem"><div class="para">
						If the EJB was configured with a custom security proxy, the method invocation is delegated to it. If the security proxy wants to deny access to the caller, it will throw a <code class="literal">java.lang.SecurityException</code>. If no <code class="literal">SecurityException</code> is thrown, access to the EJB method is allowed and the method invocation passes to the next container interceptor. Note that the <code class="literal">SecurityProxyInterceptor</code> handles this check and this interceptor is not shown.
					</div></li><li class="listitem"><div class="para">
						For JBoss Web connections, Tomcat manages elements of security constraint, and role verification.
					</div><div class="para">
						When a request is received for a web connection, Tomcat checks the security constraints defined in <code class="filename">web.xml</code> that match the requested resource and the accessed HTTP method.
					</div><div class="para">
						If a constraint exists for the request, Tomcat calls the JaasSecurityManager to perform the principal authentication, which in turn ensures the user roles are associated with that principal object.
					</div><div class="para">
						Role verification is performed solely by Tomcat, including checks on parameters such as <code class="varname"> allRoles </code> , and whether <code class="varname"> STRICT_MODE </code> is used.
					</div></li></ul></div></li></ol></div><div class="para">
		Every secured EJB method invocation, or secured web content access, requires the authentication and authorization of the caller because security information is handled as a stateless attribute of the request that must be presented and validated on each request. This can be an expensive operation if the JAAS log in involves client-to-server communication. Because of this, the <code class="literal">JaasSecurityManager</code> supports the notion of an authentication cache that is used to store principal and credential information from previous successful logins. You can specify the authentication cache instance to use as part of the <code class="literal">JaasSecurityManager</code> configuration as you will see when the associated MBean service is discussed in following section. In the absence of any user-defined cache, a default cache that maintains credential information for a configurable period of time is used.
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JaasSecurityManagerService_MBean">
      ⁠</a>4.2. The JaasSecurityManagerService MBean</h1></div></div></div><div class="para">
		The <code class="literal">JaasSecurityManagerService</code> MBean service manages security managers. Although its name begins with <span class="emphasis"><em>Jaas</em></span>, the security managers it handles need not use JAAS in their implementation. The name arose from the fact that the default security manager implementation is the <code class="literal">JaasSecurityManager</code>. The primary role of the <code class="literal">JaasSecurityManagerService</code> is to externalize the security manager implementation. You can change the security manager implementation by providing an alternate implementation of the <code class="literal">AuthenticationManager</code> and <code class="literal">RealmMapping</code> interfaces.
	</div><div class="para">
		The second fundamental role of the <code class="literal">JaasSecurityManagerService</code> is to provide a JNDI <code class="literal">javax.naming.spi.ObjectFactory</code> implementation to allow for simple code-free management of the JNDI name to security manager implementation mapping. Security is enabled by specifying the JNDI name of the security manager implementation via the <span class="markup">&lt;security-domain&gt;</span> deployment descriptor element.
	</div><div class="para">
		When you specify a JNDI name, there has to be an object-binding there to use. To simplify the setup of the JNDI name to security manager bindings, the <code class="literal">JaasSecurityManagerService</code> manages the association of security manager instances to names by binding a next naming system reference with itself as the JNDI ObjectFactory under the name <code class="literal">java:/jaas</code>. This permits a naming convention of the form <code class="literal">java:/jaas/XYZ</code> as the value for the <span class="markup">&lt;security-domain&gt;</span> element, and the security manager instance for the <code class="literal">XYZ</code> security domain will be created as needed.
	</div><div class="para">
		The security manager for the domain <code class="literal">XYZ</code> is created on the first look up against the <code class="literal">java:/jaas/XYZ</code> binding by creating an instance of the class specified by the <code class="literal">SecurityManagerClassName</code> attribute using a constructor that takes the name of the security domain.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important: java:/jaas prefix is no longer mandatory</strong></p></div><div class="admonition"><div class="para">
			In Enterprise Application Platform versions prior to v5.0, the "<em class="parameter"><code>java:/jaas</code></em> prefix in each <code class="sgmltag-element"> &lt;security-domain&gt; </code> deployment descriptor element was required to correctly bind the JNDI name of a security domain to the security manager bindings.
		</div><div class="para">
			As of JBoss Enterprise Application Platform 5, the <em class="parameter"><code>java:/jaas</code></em> prefix is not required for security domain declaration. The <code class="filename">java:/jaas</code> prefix is still supported, and remains for backward compatibility.
		</div></div></div><div class="para">
		For example, consider the following container security configuration snippet:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;jboss&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- Configure all containers to be secured under the "customer" security domain --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;security-domain&gt;</span>customer<span xmlns="" class="perl_Keyword">&lt;/security-domain&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- ... --&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/jboss&gt;</span>
</pre><div class="para">
		Any look up of the name <code class="literal">customer</code> will return a security manager instance that has been associated with the security domain named <code class="literal">customer</code>. This security manager will implement the AuthenticationManager and RealmMapping security interfaces and will be of the type specified by the <code class="systemitem">SecurityManagerClassName</code> attribute of the <code class="systemitem">JaasSecurityManagerService</code>.
	</div><div class="para">
		The <code class="literal">JaasSecurityManagerService</code> MBean is configured by default for use in the standard JBoss distribution, and you can often use the default configuration as is. The configurable attributes of the <code class="literal">JaasSecurityManagerService</code> include:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">SecurityManagerClassName</span></dt><dd><div class="para">
					The name of the class that provides the security manager implementation. The implementation must support both the <code class="classname">org.jboss.security.AuthenticationManager</code> and <code class="literal">org.jboss.security.RealmMapping</code> interfaces. If not specified this defaults to the JAAS-based <code class="classname">org.jboss.security.plugins.JaasSecurityManager</code>.
				</div></dd><dt><span class="term">CallbackHandlerClassName</span></dt><dd><div class="para">
					The name of the class that provides the <code class="literal">javax.security.auth.callback.CallbackHandler</code>implementation used by the <code class="literal">JaasSecurityManager</code>.
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
						You can override the handler used by the <code class="literal">JaasSecurityManager</code> if the default implementation (<code class="classname">org.jboss.security.auth.callback.SecurityAssociationHandler</code>) does not meet your needs. Most implementations will find the default handler is sufficient.
					</div></div></div></dd><dt><span class="term">SecurityProxyFactoryClassName</span></dt><dd><div class="para">
					The name of the class that provides the <code class="classname">org.jboss.security.SecurityProxyFactory</code> implementation. If not specified this defaults to <code class="literal">org.jboss.security.SubjectSecurityProxyFactory</code>.
				</div></dd><dt><span class="term">AuthenticationCacheJndiName</span></dt><dd><div class="para">
					Specifies the location of the security credential cache policy. This is first treated as an <code class="literal">ObjectFactory</code> location capable of returning <code class="literal">CachePolicy</code> instances on a per-&lt;security-domain&gt; basis. This is done by appending the name of the security domain to this name when looking up the <code class="literal">CachePolicy</code> for a domain. If this fails, the location is treated as a single <code class="literal">CachePolicy</code> for all security domains. As a default, a timed cache policy is used.
				</div></dd><dt><span class="term">DefaultCacheTimeout</span></dt><dd><div class="para">
					Specifies the default timed cache policy timeout in seconds. The default value is 1800 seconds (30 minutes). The value you use for the timeout is a trade-off between frequent authentication operations and how long credential information may be out of sync with respect to the security information store. If you want to disable caching of security credentials, set this to 0 to force authentication to occur every time. This has no affect if the <code class="literal">AuthenticationCacheJndiName</code> has been changed from the default value.
				</div></dd><dt><span class="term">DefaultCacheResolution</span></dt><dd><div class="para">
					Specifies the default timed cache policy resolution in seconds. This controls the interval at which the cache current time stamp is updated and should be less than the <code class="literal">DefaultCacheTimeout</code> in order for the timeout to be meaningful. The default resolution is 60 seconds (1 minute). This has no affect if the <code class="literal">AuthenticationCacheJndiName</code> has been changed from the default value.
				</div></dd><dt><span class="term">DefaultUnauthenticatedPrincipal</span></dt><dd><div class="para">
					Specifies the principal to use for unauthenticated users. This setting makes it possible to set default permissions for users who have not been authenticated.
				</div></dd></dl></div><div class="para">
		The <code class="literal">JaasSecurityManagerService</code> also supports a number of useful operations. These include flushing any security domain authentication cache at runtime, getting the list of active users in a security domain authentication cache, and any of the security manager interface methods.
	</div><div class="para">
		Flushing a security domain authentication cache can be used to drop all cached credentials when the underlying store has been updated and you want the store state to be used immediately. The MBean operation signature is: <code class="methodname"> public void flushAuthenticationCache(String securityDomain) </code> .
	</div><div class="para">
		This can be invoked programmatically using the following code snippet:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>MBeanServer server = ...;
<span xmlns="" class="line">​</span>String jaasMgrName = <span xmlns="" class="perl_String">"jboss.security:service=JaasSecurityManager"</span>;
<span xmlns="" class="line">​</span>ObjectName jaasMgr = <span xmlns="" class="perl_Keyword">new</span> ObjectName(jaasMgrName);
<span xmlns="" class="line">​</span>Object[] params = {domainName};
<span xmlns="" class="line">​</span>String[] signature = {<span xmlns="" class="perl_String">"java.lang.String"</span>};
<span xmlns="" class="line">​</span>server.<span xmlns="" class="perl_Function">invoke</span>(jaasMgr, <span xmlns="" class="perl_String">"flushAuthenticationCache"</span>, params, signature);
</pre><div class="para">
		Getting the list of active users provides a snapshot of the <code class="literal">Principals</code> keys in a security domain authentication cache that are not expired. The MBean operation signature is: <code class="classname">public List getAuthenticationCachePrincipals(String securityDomain)</code>.
	</div><div class="para">
		This can be invoked programmatically using the following code snippet:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>MBeanServer server = ...;
<span xmlns="" class="line">​</span>String jaasMgrName = <span xmlns="" class="perl_String">"jboss.security:service=JaasSecurityManager"</span>;
<span xmlns="" class="line">​</span>ObjectName jaasMgr = <span xmlns="" class="perl_Keyword">new</span> ObjectName(jaasMgrName);
<span xmlns="" class="line">​</span>Object[] params = {domainName};
<span xmlns="" class="line">​</span>String[] signature = {<span xmlns="" class="perl_String">"java.lang.String"</span>};
<span xmlns="" class="line">​</span>List users = (List) server.<span xmlns="" class="perl_Function">invoke</span>(jaasMgr, <span xmlns="" class="perl_String">"getAuthenticationCachePrincipals"</span>, 
<span xmlns="" class="line">​</span>                                  params, signature);
</pre><div class="para">
		The security manager has a few additional access methods.
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">isValid</span>(String securityDomain, Principal principal, Object credential);
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> Principal <span xmlns="" class="perl_Function">getPrincipal</span>(String securityDomain, Principal principal);
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">boolean</span> <span xmlns="" class="perl_Function">doesUserHaveRole</span>(String securityDomain, Principal principal, 
<span xmlns="" class="line">​</span>                                Object credential, Set roles);
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> Set <span xmlns="" class="perl_Function">getUserRoles</span>(String securityDomain, Principal principal, Object credential);
</pre><div class="para">
		They provide access to the corresponding <code class="literal">AuthenticationManager</code> and <code class="literal">RealmMapping</code> interface method of the associated security domain named by the <code class="literal">securityDomain</code> argument.
	</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sect-JaasSecurityDomain_MBean">
      ⁠</a>4.3. The JaasSecurityDomain MBean</h1></div></div></div><div class="para">
		The <code class="classname">org.jboss.security.plugins.JaasSecurityDomain</code> is an extension of <code class="literal">JaasSecurityManager</code> that adds the notion of a <code class="literal">KeyStore</code>, a JSSE <code class="literal">KeyManagerFactory</code> and a <code class="literal">TrustManagerFactory</code> for supporting SSL and other cryptographic use cases. The additional configurable attributes of the <code class="literal">JaasSecurityDomain</code> include:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">KeyStoreType</span></dt><dd><div class="para">
					The type of the <code class="literal">KeyStore</code> implementation. This is the type argument passed to the <code class="methodname"> java.security.KeyStore.getInstance(String type) </code> factory method. The default is <code class="literal">JKS</code>.
				</div></dd><dt><span class="term">KeyStoreURL</span></dt><dd><div class="para">
					A URL to the location of the <code class="literal">KeyStore</code> database. This is used to obtain an <code class="literal">InputStream</code> to initialize the <code class="literal">KeyStore</code>. If the string does not contain a name/value URL, the value is treated as a file.
				</div></dd><dt><span class="term">KeyStorePass</span></dt><dd><div class="para">
					The password associated with the <code class="literal">KeyStore</code> database contents. The <code class="literal">KeyStorePass</code> is also used in combination with the <code class="literal">Salt</code> and <code class="literal">IterationCount</code> attributes to create a PBE secret key used with the encode/decode operations. The <code class="literal">KeyStorePass</code> attribute value format is one of the following:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							The plain text password for the <code class="literal">KeyStore</code>. The <code class="literal">toCharArray()</code> value of the string is used without any manipulation.
						</div></li><li class="listitem"><div class="para">
							A command to execute to obtain the plain text password. The format is <code class="literal">{EXT}...</code> where the <code class="literal">...</code> is the exact command line that will be passed to the <code class="methodname"> Runtime.exec(String) </code> method to execute a platform-specific command. The first line of the command output is used as the password.
						</div></li><li class="listitem"><div class="para">
							A class to create to obtain the plain text password. The format is <code class="literal">{CLASS}classname[:ctorarg]</code> where the <code class="literal">[:ctorarg]</code> is an optional string that will be passed to the constructor when instantiating the <code class="literal">classname</code>. The password is obtained from classname by invoking a <code class="methodname"> toCharArray() </code> method if found, otherwise, the <code class="methodname"> toString() </code> method is used.
						</div></li></ul></div></dd><dt><span class="term">KeyStoreAlias</span></dt><dd><div class="para">
					Alias of the KeyStore with the certificate to be used.
				</div></dd><dt><span class="term">KeyStoreProvider</span></dt><dd><div class="para">
					Security provider of the KeyStore.
				</div></dd><dt><span class="term">KeyManagerFactoryProvider</span></dt><dd><div class="para">
					Security provider of the KeyManagerFactory.
				</div></dd><dt><span class="term">KeyManagerFactoryAlgorithm</span></dt><dd><div class="para">
					Algorithm of the KeyManagerFactory.
				</div></dd><dt><span class="term">Salt</span></dt><dd><div class="para">
					The <code class="literal">PBEParameterSpec</code> salt value.
				</div></dd><dt><span class="term">IterationCount</span></dt><dd><div class="para">
					The <code class="literal">PBEParameterSpec</code> iteration count value.
				</div></dd><dt><span class="term">TrustStoreType</span></dt><dd><div class="para">
					The type of the <code class="literal">TrustStore</code> implementation. This is the type argument passed to the <code class="methodname"> java.security.KeyStore.getInstance(String type) </code> factory method. The default is <code class="literal">JKS</code>.
				</div></dd><dt><span class="term">TrustStoreURL</span></dt><dd><div class="para">
					A URL to the location of the <code class="literal">TrustStore</code> database. This is used to obtain an <code class="literal">InputStream</code> to initialize the <code class="literal">KeyStore</code>. If the string is not a value URL, it is treated as a file.
				</div></dd><dt><span class="term">TrustStorePass</span></dt><dd><div class="para">
					The password associated with the trust store database contents. The <code class="literal">TrustStorePass</code> is a simple password and does not have the same configuration options as the <code class="literal">KeyStorePass</code>.
				</div></dd><dt><span class="term">TrustStoreProvider</span></dt><dd><div class="para">
					Security provider of the TrustStore.
				</div></dd><dt><span class="term">TrustManagerFactoryProvider</span></dt><dd><div class="para">
					Security provider of the TrustManagerFactory.
				</div></dd><dt><span class="term">TrustManagerFactoryAlgorithm</span></dt><dd><div class="para">
					Algorithm of the KeyManagerFactory.
				</div></dd><dt><span class="term">ManagerServiceName</span></dt><dd><div class="para">
					Sets the JMX object name string of the security manager service MBean. This is used to register the defaults to register the <code class="literal">JaasSecurityDomain</code> as a the security manager under <code class="literal">java:/jaas/&lt;domain&gt;</code> where <code class="literal">&lt;domain&gt;</code> is the name passed to the MBean constructor. The name defaults to <code class="literal">jboss.security:service=JaasSecurityManager</code>.
				</div></dd></dl></div></div></div></body></html>