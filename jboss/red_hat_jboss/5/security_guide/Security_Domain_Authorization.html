<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 8. Authorization</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Security_Domain_Authorization">
      ⁠</a>Chapter 8. Authorization</h1></div></div></div><div class="para">
		Authorization relates to the type of component you want to protect, rather than the layer it resides in.
	</div><div class="para">
		A security domain does not explicitly require an authorization policy. If an authorization policy is not specified, the default <em class="parameter"><code>jboss-web-policy</code></em> and <em class="parameter"><code>jboss-ejb-policy</code></em> authorization configured in <code class="filename">jboss-as/server/<em class="replaceable">$PROFILE</em>/deploy/security/security-policies-jboss-beans.xml</code> is used.
	</div><div class="para">
		If you do choose to specify an authorization policy, or create a custom deployment descriptor file with a valid authorization policy, these settings override the default settings in <code class="filename">security-policies-jboss-beans.xml</code>.
	</div><div class="para">
		Users can provide authorization policies that implement custom behavior. Configuring custom behavior allows authorization control stacks to be pluggable for a particular component, overriding the default authorization contained in <code class="filename">jboss.xml</code> (for EJBs) and <code class="filename">jboss-web.xml</code> (for WAR).
	</div><div class="para">
		Overriding the default authorization for EJB or Web components is provided for Java Authorization Contract for Containers (JACC) and Extensible Access Control Markup Language (XACML), apart from the default modules that implement the specification behavior.
	</div><div class="para">
		Refer to <a class="xref" href="Security_Domain_Schema_Construction.html#Security_Domain_Schema_Authorization_Element">Section 6.1.2, “&lt;authorization&gt;”</a> for information about the <span class="markup">&lt;authorization&gt;</span> element schema.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="proc-Set_Auth_Policies_For_All_EJB_WAR_Components">
      ⁠</a><p class="title"><strong>Procedure 8.1. Set authorization policies for all EJB and WAR components</strong></p><div class="para">
			You can override authorization for all EJBs and Web components, or for a particular component.
		</div><div class="para">
			This procedure describes how to define JACC authorization control for all EJB and WAR components. The example defines application policy modules for Web and EJB applications: <code class="filename">jboss-web-policy</code>, and <code class="filename">jboss-ejb-policy</code>.
		</div><ol class="1"><li class="step"><p class="title"><strong>Open the security policy bean</strong></p><div class="para">
				Navigate to <code class="filename">$JBOSS_HOME/server/<em class="replaceable">$PROFILE</em>/deploy/security</code>
			</div><div class="para">
				Open the <code class="filename">security-policies-jboss-beans.xml</code> file.
			</div><div class="para">
				By default, the <code class="filename">security-policies-jboss-beans.xml</code> file contains the configuration in <a class="xref" href="Security_Domain_Authorization.html#exam-security_policies_default_configuration">Example 8.1, “security-policies-jboss-beans.xml”</a>.
			</div><div class="example"><a id="exam-security_policies_default_configuration">
      ⁠</a><p class="title"><strong>Example 8.1. security-policies-jboss-beans.xml</strong></p><div class="example-contents"><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-web-policy"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"other"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.DelegatingAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>   
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-ejb-policy"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"other"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.DelegatingAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre></div></div></li><li class="step"><p class="title"><strong>Change the application-policy definitions</strong></p><div class="para">
				To set a single authorization policy for each component using JACC, amend each <code class="sgmltag-element"> &lt;policy-module&gt; </code> <em class="parameter"><code>code</code></em> attribute with the name of the JACC authorization module.
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-web-policy"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"other"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.JACCAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>   
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jboss-ejb-policy"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"other"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.JACCAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"jacc-test"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"other"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.JACCAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre></li><li class="step"><p class="title"><strong>Restart server</strong></p><div class="para">
				You have now configured the <code class="filename">security-policy-jboss-beans.xml</code> file with JACC authorization enabled for each application policy.
			</div><div class="para">
				Restart the server to ensure the new security policy takes effect.
			</div></li></ol></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Setting authorization for specific EJB and WEB components</div>
			If applications require more granular security policies, you can declare multiple authorization security policies for each application policy. New security domains can inherit base settings from another security domains, and override specific settings such as the authorization policy module.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><a id="proc-Set_Auth_Policies_For_Specific_Domains">
      ⁠</a><p class="title"><strong>Procedure 8.2. Set authorization policies for specific security domains</strong></p><div class="para">
			You can override authorization for a particular component.
		</div><div class="para">
			This procedure describes how to inherit settings from other security domain definitions, and specify different authorization policies per security domain.
		</div><div class="para">
			In this procedure, two security domains are defined. The <em class="parameter"><code>test-domain</code></em> security domain uses the <code class="classname">UsersRolesLoginModule</code> login module and uses JACC authorization. The <em class="parameter"><code>test-domain-inherited</code></em> security domain inherits the login module information from <em class="parameter"><code>test-domain</code></em>, and specifies XACML authorization must be used.
		</div><ol class="1"><li class="step"><p class="title"><strong>Open the security policy</strong></p><div class="para">
				You can specify the security domain settings in the <code class="filename">jboss-as/server/$PROFILE/conf/login-config.xml</code> file, or create a deployment descriptor file containing the settings. Choose the deployment descriptor if you want to package the security domain settings with your application.
			</div><ul class="stepalternatives">
				<li class="step"><p class="title"><strong>Locate and open login-config.xml</strong></p><div class="para">
						Navigate to the <code class="filename">login-config.xml</code> file for the server profile you are using and open the file for editing.
					</div><div class="para">
						<code class="filename">$JBOSS_HOME/jboss-as/server/<em class="replaceable">$PROFILE</em>/conf/login-config.xml</code>
					</div></li>
				 <li class="step"><p class="title"><strong>Create a jboss-beans.xml descriptor</strong></p><div class="para">
						Create a <code class="filename"><em class="replaceable">[prefix]</em>-jboss-beans.xml</code> descriptor, replacing <em class="replaceable">[prefix]</em> with a meaningful name (for example, <code class="filename">test-war-jboss-beans.xml</code>)
					</div><div class="para">
						Save this file in the <code class="filename">/deploy</code> directory of the server profile you are configuring.
					</div><div class="para">
						<code class="filename">jboss-as/server/<em class="replaceable">$PROFILE</em>/deploy/<em class="replaceable">[prefix]</em>-jboss-beans.xml</code>
					</div></li>

			</ul></li><li class="step"><p class="title"><strong>Specify the test-domain security domain</strong></p><div class="para">
				In the target file chosen in step 1, specify the <em class="parameter"><code>test-domain</code></em> security domain. This domain contains the authentication information, including the <span class="markup">&lt;login-module&gt;</span> definition, and the JACC authorization policy module definition.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"test-domain"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;authentication&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;login-module</span><span xmlns="" class="perl_Others"> code</span> <span xmlns="" class="perl_Others">=</span> <span xmlns="" class="perl_String">"org.jboss.security.auth.spi.UsersRolesLoginModule"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            flag</span> <span xmlns="" class="perl_Others">=</span> <span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name</span> <span xmlns="" class="perl_Others">=</span> <span xmlns="" class="perl_String">"unauthenticatedIdentity"</span><span xmlns="" class="perl_Keyword">&gt;</span>anonymous<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"usersProperties"</span><span xmlns="" class="perl_Keyword">&gt;</span>u.properties<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"rolesProperties"</span><span xmlns="" class="perl_Keyword">&gt;</span>r.properties<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/login-module&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authentication&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.JACCAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>  
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre></li><li class="step"><p class="title"><strong>Append the test-domain-inherited security domain</strong></p><div class="para">
				Append the <em class="parameter"><code>test-domain-inherited</code></em> application policy definition after the <em class="parameter"><code>test-domain</code></em> application policy.
			</div><div class="para">
				Set the <em class="parameter"><code>extends</code></em> attribute to <code class="literal">other</code>, so the login module information is inherited.
			</div><div class="para">
				Specify the XACML authorization module in the <code class="sgmltag-element"> &lt;policy-module&gt; </code> element.
			</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;deployment</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:bean-deployer:2.0"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"test-domain"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;authentication&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;login-module</span><span xmlns="" class="perl_Others"> code</span> <span xmlns="" class="perl_Others">=</span> <span xmlns="" class="perl_String">"org.jboss.security.auth.spi.UsersRolesLoginModule"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">            flag</span> <span xmlns="" class="perl_Others">=</span> <span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name</span> <span xmlns="" class="perl_Others">=</span> <span xmlns="" class="perl_String">"unauthenticatedIdentity"</span><span xmlns="" class="perl_Keyword">&gt;</span>anonymous<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"usersProperties"</span><span xmlns="" class="perl_Keyword">&gt;</span>u.properties<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"rolesProperties"</span><span xmlns="" class="perl_Keyword">&gt;</span>r.properties<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;/login-module&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authentication&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.JACCAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span>  
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"test-domain-inherited"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"test-domain"</span><span xmlns="" class="perl_Keyword">&gt;</span> 
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>         <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"org.jboss.security.authorization.modules.XACMLAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span> 
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/deployment&gt;</span>
</pre></li><li class="step"><p class="title"><strong>Restart server</strong></p><div class="para">
				You have now configured the target file with two security domains that use different authorization methods.
			</div><div class="para">
				Restart the server to ensure the new security policy takes effect.
			</div></li></ol></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Authorization_Policy_Module_Delegation">
      ⁠</a>8.1. Module Delegation</h1></div></div></div><div class="para">
			<a class="xref" href="Security_Domain_Authorization.html#proc-Set_Auth_Policies_For_All_EJB_WAR_Components">Procedure 8.1, “Set authorization policies for all EJB and WAR components”</a> and <a class="xref" href="Security_Domain_Authorization.html#proc-Set_Auth_Policies_For_Specific_Domains">Procedure 8.2, “Set authorization policies for specific security domains”</a> describe simplistic examples that show how basic authentication can be configured in security domains.
		</div><div class="para">
			Because authorization relates to the type of component (not the layer) you want to protect, you can use authorization module delegation within a deployment descriptor (<code class="filename">*-jboss-beans.xml</code>) to specify different authorization policies to the standard authentication in your implementation.
		</div><div class="para">
			The <code class="classname">org.jboss.security.authorization.modules.AuthorizationModuleDelegate</code> class provides a number of subclasses that allow you to implement module delegation:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<code class="classname">AbstractJACCModuleDelegate</code>
				</div></li><li class="listitem"><div class="para">
					<code class="classname">WebPolicyModuleDelegate</code>
				</div></li><li class="listitem"><div class="para">
					<code class="classname">EJBPolicyModuleDelegate</code>
				</div></li><li class="listitem"><div class="para">
					<code class="classname">WebXACMLPolicyModuleDelegate</code>
				</div></li><li class="listitem"><div class="para">
					<code class="classname">WebJACCPolicyModuleDelegate</code>
				</div></li><li class="listitem"><div class="para">
					<code class="classname">EJBXACMLPolicyModuleDelegate</code>
				</div></li><li class="listitem"><div class="para">
					<code class="classname">EJBJACCPolicyModuleDelegate</code>
				</div></li></ul></div><div class="para">
			You can create your own authorization delegation module, providing the module extends the <code class="classname">org.jboss.security.authorization.modules.AuthorizationModuleDelegate</code> class.
		</div><div class="para">
			To implement the delegation module, you declare the delegation modules within the <span class="markup">&lt;module-option&gt;</span> element of your <span class="markup">&lt;authorization&gt;</span> policy. Each module is prefixed with the component it relates to, as shown in <a class="xref" href="Security_Domain_Authorization.html#exam-Delegation_Module_Declaration">Example 8.2, “Delegation Module Declaration”</a>.
		</div><div class="example"><a id="exam-Delegation_Module_Declaration">
      ⁠</a><p class="title"><strong>Example 8.2. Delegation Module Declaration</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"test-domain"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">"other"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">"xxx.yyy.MyAuthorizationModule"</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"delegateMap"</span><span xmlns="" class="perl_Keyword">&gt;</span>web=xxx.yyy.mywebauthorizationdelegate,ejb=xxx.yyy.myejbauthorizationdelegate<span xmlns="" class="perl_Keyword">&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/policy-module&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span></pre></div></div></div></div></body></html>