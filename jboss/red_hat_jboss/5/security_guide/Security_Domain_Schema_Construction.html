<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 6. Security Domain Schema</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Security_Domain_Schema_Construction">
      ⁠</a>Chapter 6. Security Domain Schema</h1></div></div></div><div class="para">
			The security domain schema is constructed using XML.
		</div><div class="para">
			The XML Schema Definition (XSD) that defines the structure of the security domain is declared in the security-beans_1_0.xsd file. The location of the file varies depending on which version of the JBoss Enterprise Application Platform you use.
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">5.1, 5.2</span></dt><dd><div class="para">
						<code class="filename">/schema/security-beans_1_0.xsd</code> inside the <code class="filename">jboss-as/lib/jbosssx.jar</code>
					</div></dd><dt><span class="term">5.0, 5.0.1</span></dt><dd><div class="para">
						<code class="filename">/schema/security-beans_1_0.xsd</code> inside the <code class="filename">jboss-as/common/lib/jbosssx.jar</code>
					</div></dd></dl></div><div class="para">
			The schema is the same regardless of which JBoss Enterprise Application Platform server you use.
		</div><div class="figure"><a id="Security_Domain_Schema">
      ⁠</a><div class="figure-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;application-policy</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"urn:jboss:security-beans:1.0"</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">""</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;authentication&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;login-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">""</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"[required|requisite|sufficient|optional]"</span><span xmlns="" class="perl_Others"> extends=</span><span xmlns="" class="perl_String">""</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;module-option</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">""</span><span xmlns="" class="perl_Keyword">&gt;&lt;/module-option&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/login-module&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/authentication&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;authorization&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;policy-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">""</span><span xmlns="" class="perl_Others"> flag=</span><span xmlns="" class="perl_String">"[required|requisite|sufficient|optional]"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/authorization&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;mapping&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;mapping-module</span><span xmlns="" class="perl_Others"> code=</span><span xmlns="" class="perl_String">""</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">""</span> <span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/application-policy&gt;</span></pre></div><p class="title"><strong>Figure 6.1. Schema of the Security Domain Definition</strong></p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Security_Domain_Elements">
      ⁠</a>6.1. Security Domain Elements</h1></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;application-policy&gt;</span></dt><dd><div class="para">
							The elements of a security domain, regardless of how it is deployed within the system, are contained within the <span class="markup">&lt;application-policy&gt;</span> element. The element uses the XML namespace, as declared in the <em class="parameter"><code>xmlns</code></em> attribute.
						</div><div class="para">
							The <em class="parameter"><code>name</code></em> attribute sets the name of the security domain referenced by an application. The security domain name is bound in JNDI under the <code class="literal">java:/jaas</code> context, and is accessed by applications via reference in their deployment descriptors.
						</div><div class="para">
							An &lt;application-policy&gt; element can contain a number of child elements that set the behavior for the security domain and all applications that use it. These elements are described in greater detail in <a class="xref" href="Security_Domain_Schema_Construction.html#Security_Domain_Schema_Authentication_Element">Section 6.1.1, “&lt;authentication&gt;”</a>, <a class="xref" href="Security_Domain_Schema_Construction.html#Security_Domain_Schema_Authorization_Element">Section 6.1.2, “&lt;authorization&gt;”</a>, and <a class="xref" href="Security_Domain_Schema_Construction.html#Security_Domain_Schema_Mapping_Element">Section 6.1.3, “&lt;mapping&gt;”</a>.
						</div></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Security_Domain_Schema_Authentication_Element">
      ⁠</a>6.1.1. &lt;authentication&gt;</h2></div></div></div><div class="para">
					This element contains <span class="markup">&lt;login-module&gt;</span> elements, that control which authentication modules are used when authenticating users who connect through the application.
				</div><div class="para">
					When multiple <span class="markup">&lt;login-module&gt;</span> elements are present, they form a collective group of requirements that must be met before authentication is verified. This collective group is called a <em class="firstterm"> stack </em> .
				</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="markup">&lt;login-module&gt;</span></span></dt><dd><div class="para">
								This element uses the <em class="parameter"><code>code</code></em> attribute to specify what login module implementation an application can use, and the <em class="parameter"><code>flag</code></em> attribute to tell the application how to parse each login module present in the stack. The <em class="parameter"><code>flag</code></em> attribute supports the following values:
							</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">required</span></dt><dd><div class="para">
											The module must succeed for authentication to be successful. If any required <span class="markup">&lt;login-module&gt;</span> fails, the authentication will fail. The remaining login modules in the stack are called regardless of the outcome of the authentication.
										</div></dd><dt><span class="term">requisite</span></dt><dd><div class="para">
											The module is required to succeed. If it succeeds, authentication continues down the stack. If the module fails, control immediately returns to the application.
										</div></dd><dt><span class="term">sufficient</span></dt><dd><div class="para">
											The login module is not required to succeed. If it does succeed, control immediately returns to the application. If the module fails, authentication continues down the stack.
										</div></dd><dt><span class="term">optional</span></dt><dd><div class="para">
											The login module is not required to succeed. Authentication still continues to proceed down the stack regardless of whether the login module succeeds or fails.
										</div></dd></dl></div><div class="para">
								Each <span class="markup">&lt;login-module&gt;</span> contains a set of <span class="markup">&lt;module-option&gt;</span> elements that further define settings required by the login module implementation.
							</div></dd><dt><span class="term"><span class="markup">&lt;module-option&gt;</span></span></dt><dd><div class="para">
								Each login module has its own set of configuration options. The name attribute specifies the property required by the login module, and the value is declared in the CDATA of the <span class="markup">&lt;module-option&gt;</span> element. Module options depend on what login module you choose. <a class="xref" href="ch12.html#chap-JBoss_Login_Modules">Section 12.1, “Using Modules”</a> covers module options in greater detail.
							</div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Security_Domain_Schema_Authorization_Element">
      ⁠</a>6.1.2. &lt;authorization&gt;</h2></div></div></div><div class="para">
					This element contains <span class="markup">&lt;policy-module&gt;</span> elements that define the policy module used to authorize application users, and whether the module is required:
				</div><div class="para">
					When multiple <span class="markup">&lt;policy-module&gt;</span> elements are present, they form a collective group of requirements that must be met before authorization is verified. This collective group is called a <em class="firstterm"> stack </em> .
				</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="markup">&lt;policy-module&gt;</span></span></dt><dd><div class="para">
								This element uses the <em class="parameter"><code>code</code></em> attribute to specify what policy module implementation an application can use, and the <em class="parameter"><code>flag</code></em> attribute to tell the application how to parse each policy module present in the policy stack. The <em class="parameter"><code>flag</code></em> attribute supports the following values:
							</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">required</span></dt><dd><div class="para">
											The module must succeed for authorization to be successful. If any required <span class="markup">&lt;policy-module&gt;</span> fails, the authorization attempt will fail. The remaining modules in the stack are called regardless of the outcome of the module.
										</div></dd><dt><span class="term">requisite</span></dt><dd><div class="para">
											The module is required to succeed. If it succeeds, authorization continues down the stack. If it fails, control immediately returns to the application.
										</div></dd><dt><span class="term">sufficient</span></dt><dd><div class="para">
											The module is not required to succeed. If it does succeed, control immediately returns to the application. If it fails, authorization continues down the stack.
										</div></dd><dt><span class="term">optional</span></dt><dd><div class="para">
											The module is not required to succeed. Authorization still continues to proceed down the stack regardless of whether the module succeeds or fails.
										</div></dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Security_Domain_Schema_Mapping_Element">
      ⁠</a>6.1.3. &lt;mapping&gt;</h2></div></div></div><div class="para">
					This element contains <span class="markup">&lt;mapping-module&gt;</span> elements that are used to define the parameters of the mapping-module elements.
				</div><div class="para">
					When multiple <span class="markup">&lt;mapping-module&gt;</span> elements are present, they form a collective group of requirements that must be met before mapping can succeed. This collective group is called a <em class="firstterm"> stack </em> .
				</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="markup">&lt;mapping-module&gt;</span></span></dt><dd><div class="para">
								This element uses the <em class="parameter"><code>code</code></em> attribute to specify what mapping module implementation an application can use, and the <em class="parameter"><code>type</code></em> attribute to tell the application how to parse each mapping module present in the policy stack. The <span class="property">type</span> attribute supports the following values:
							</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
										<code class="code">credential</code>
									</div></li><li class="listitem"><div class="para">
										<code class="code">principal</code>
									</div></li><li class="listitem"><div class="para">
										<code class="code">role</code>
									</div></li><li class="listitem"><div class="para">
										<code class="code">attribute</code>
									</div></li></ul></div></dd></dl></div></div></div></div></body></html>