<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. Known Issues</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idm140392329072544">
      ⁠</a>Chapter 3. Known Issues</h1></div></div></div><div class="para">
		Known issues in JBoss Enterprise Application Platform 5.2.0 are listed by component.
	</div><div class="variablelist"><p class="title"><strong>Hibernate</strong></p><dl class="variablelist"><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-5965">https://issues.jboss.org/browse/JBPAPP-5965</a></span></dt><dd><div class="para">
					You are not allowed to initialize lazy collections or proxies during a flush. The workaround is for the listener to use a different session to initialize the collection. The following is an example of the workaround: 
<pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>SessionImplementor si = (SessionImplementor)(event.<span xmlns="" class="perl_Function">getSession</span>());
<span xmlns="" class="line">​</span>Session anotherSession = si.<span xmlns="" class="perl_Function">getFactory</span>().<span xmlns="" class="perl_Function">openSession</span>(si.<span xmlns="" class="perl_Function">getJDBCContext</span>().<span xmlns="" class="perl_Function">connection</span>());
<span xmlns="" class="line">​</span>Object obj = anotherSession.<span xmlns="" class="perl_Function">get</span>( event.<span xmlns="" class="perl_Function">getEntity</span>().<span xmlns="" class="perl_Function">getClass</span>(),event.<span xmlns="" class="perl_Function">getId</span>());
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">if</span>(o <span xmlns="" class="perl_Keyword">instanceof</span> Parent){
<span xmlns="" class="line">​</span>	Parent parent = (Parent)obj;
<span xmlns="" class="line">​</span>	Iterator it = parent.<span xmlns="" class="perl_Function">getChildren</span>().<span xmlns="" class="perl_Function">iterator</span>();
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">while</span>(it.<span xmlns="" class="perl_Function">hasNext</span>()){
<span xmlns="" class="line">​</span>		Child child = (Child)it.<span xmlns="" class="perl_Function">next</span>();
<span xmlns="" class="line">​</span>	}
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>anotherSession.<span xmlns="" class="perl_Function">close</span>()
</pre>

				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-6579">https://issues.jboss.org/browse/JBPAPP-6579</a></span></dt><dd><div class="para">
					Hibernate can bind the SessionFactory to JNDI after startup if it can find the session factory name from the server configuration. This results in a warning-level message, which is misleading in its severity. This message is unavoidable as it is usually caused by an environment-specific issue. To avoid seeing this message, adjust the logging level to <code class="literal">debug</code>.
				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-4731">https://issues.jboss.org/browse/JBPAPP-4731</a></span></dt><dd><div class="para">
					When an insert operation was performed using <code class="filename">jconn3.jar</code>, <code class="literal">null</code> bit values were converted to <code class="literal">0</code> and no exception was thrown. Sybase does not allow a <code class="literal">null</code> value for the <code class="systemitem">bit</code> data type, so <code class="literal">null</code> values should result in exceptions.
				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-3034">https://issues.jboss.org/browse/JBPAPP-3034</a></span></dt><dd><div class="para">
					When batch insert statements are ordered, embedded classes are not taken into account. There are two possible workarounds for this issue. The first is to set <code class="varname">ORDER_INSERTS</code> to <code class="literal">FALSE</code> when embedded classes are used. The second option is to explicitly call <code class="literal">session.save()</code> on child objects to enforce their SQL insertion orders.
				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-9059">https://issues.jboss.org/browse/JBPAPP-9059</a></span></dt><dd><div class="para">
					When using Hibernate with IBM DB2-97 a <code class="literal">SqlSyntaxErrorException</code> may occur when deploying <code class="filename">jbossesb.esb</code>. The error occurs because of a mismatch between the <code class="systemitem">Hibernate</code> data type and the <code class="systemitem">DB2</code> data type to which it is mapped. There are two possible workarounds available for this issue: 
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								Add 
<pre class="programlisting">&lt;connection-property name="deferPrepares"&gt;false&lt;/connection-property&gt;</pre>
								 to <code class="filename">/jboss-as/server/db2-97/deploy/jbossesb-registry.sar/juddi-ds.xml</code>. Note that according to <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0010273.htm">http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0010273.htm</a>, this workaround may affect performance.
							</div></li><li class="listitem"><div class="para">
								Use <code class="systemitem">org.hibernate.type.NumericBooleanType</code> type instead of <code class="systemitem">BooleanType</code>.
							</div></li></ul></div>

				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-6571">https://issues.jboss.org/browse/JBPAPP-6571</a></span></dt><dd><div class="para">
					A NullPointerException is thrown when an entity with attributes mapped as @Formula is obtained using the addEntity method by a native query whose select clause elements do not have an alias:
				</div><pre class="programlisting java"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@Entity
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Table</span>(name = <span xmlns="" class="perl_String">"ALL_TABLES"</span>)
<span xmlns="" class="line">​</span> <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> AllTables {
<span xmlns="" class="line">​</span>	@Id
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">Column</span>(name = <span xmlns="" class="perl_String">"TABLE_NAME"</span>, nullable = <span xmlns="" class="perl_Keyword">false</span>)
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">private</span> String tableName;
<span xmlns="" class="line">​</span>	@<span xmlns="" class="perl_Function">Formula</span>(value = <span xmlns="" class="perl_String">"(SYSDATE())"</span>)
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Keyword">private</span> String daysOld;
<span xmlns="" class="line">​</span>	<span xmlns="" class="perl_Comment">//getters and setters</span>
<span xmlns="" class="line">​</span> }
</pre><pre class="programlisting java"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>String sql = <span xmlns="" class="perl_String">"select table_name , sysdate()  from all_tables   where table_name = 'AUDIT_ACTIONS' "</span>;
<span xmlns="" class="line">​</span>SQLQuery q = s.<span xmlns="" class="perl_Function">createSQLQuery</span>( sql ).<span xmlns="" class="perl_Function">addEntity</span>( <span xmlns="" class="perl_String">"t"</span>,AllTables.<span xmlns="" class="perl_Function">class</span> );
</pre><div class="para">
					To resolve this issue would require major changes to Hibernate, so this issue will remain unresolved. Use one of the following workarounds to avoid this issue:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							Workaround option 1: Use @SqlResultSetMapping:
						</div><pre class="programlisting java"><span xmlns="" class="line">​</span>String sql = <span xmlns="" class="perl_String">"select table_name as t_name, sysdate() as t_time from all_tables where table_name = 'AUDIT_ACTIONS' "</span>;	
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">SqlResultSetMapping</span>(name = <span xmlns="" class="perl_String">"all"</span>, 
<span xmlns="" class="line">​</span>entities = @<span xmlns="" class="perl_Function">EntityResult</span>(entityClass = AllTables.<span xmlns="" class="perl_Function">class</span>, 
<span xmlns="" class="line">​</span>fields = { 
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">FieldResult</span>(name = <span xmlns="" class="perl_String">"tableName"</span>, column = <span xmlns="" class="perl_String">"t_name"</span>), 
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">FieldResult</span>(name = <span xmlns="" class="perl_String">"daysOld"</span>, column = <span xmlns="" class="perl_String">"t_time"</span>) 
<span xmlns="" class="line">​</span>}))
</pre></li><li class="listitem"><div class="para">
							Workaround option 2: Provide an alias for each scalar property:
						</div><pre class="programlisting java"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>String sql = <span xmlns="" class="perl_String">"select t.table_name as {t.tableName}, sysdate() as {t.daysOld} from all_tables t where t.table_name = 'AUDIT_ACTIONS' "</span>; 
<span xmlns="" class="line">​</span>SQLQuery q = s.<span xmlns="" class="perl_Function">createSQLQuery</span>( sql ).<span xmlns="" class="perl_Function">addEntity</span>( <span xmlns="" class="perl_String">"t"</span>,AllTables.<span xmlns="" class="perl_Function">class</span> );
</pre></li><li class="listitem"><div class="para">
							Workaround option 3: Query directly:
						</div><pre class="programlisting java"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>String sql = <span xmlns="" class="perl_String">"select table_name , sysdate() from all_tables where table_name = 'AUDIT_ACTIONS' "</span>; 
<span xmlns="" class="line">​</span>SQLQuery q = s.<span xmlns="" class="perl_Function">createSQLQuery</span>( sql );
</pre></li></ul></div></dd></dl></div><div class="variablelist"><p class="title"><strong>HornetQ</strong></p><dl class="variablelist"><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-10450">https://issues.jboss.org/browse/JBPAPP-10450</a></span></dt><dd><div class="para">
					If a HornetQ resource adapter (RA) is configured to connect to a remote JBoss Enterprise Application Platform/HornetQ server and the RA has <code class="systemitem">reconnect-attempts</code> set to <code class="literal">-1</code> (infinite) then the server hosting RA cannot be shut down cleanly if the remote server is not available.
				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-6659">https://issues.jboss.org/browse/JBPAPP-6659</a></span></dt><dd><div class="para">
					The following examples provided with HornetQ don't work for various reasons: 
					<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
								jca-remote
							</div></li><li class="listitem"><div class="para">
								jms-bridge
							</div></li><li class="listitem"><div class="para">
								mdb-remote-failover-static
							</div></li><li class="listitem"><div class="para">
								mdb-remote-failover
							</div></li><li class="listitem"><div class="para">
								xarecovery
							</div></li><li class="listitem"><div class="para">
								embedded-simple
							</div></li><li class="listitem"><div class="para">
								embedded
							</div></li><li class="listitem"><div class="para">
								failover-manual-stop
							</div></li><li class="listitem"><div class="para">
								jaas
							</div></li><li class="listitem"><div class="para">
								spring-integration
							</div></li><li class="listitem"><div class="para">
								stomp-websockets
							</div></li><li class="listitem"><div class="para">
								stop-server-failover
							</div></li><li class="listitem"><div class="para">
								transaction-failover
							</div></li></ul></div>

				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Installer</strong></p><dl class="variablelist"><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-10527">https://issues.jboss.org/browse/JBPAPP-10527</a></span></dt><dd><div class="para">
					While using the GUI installer, if the option to create shortcuts is unchecked and an automatic installation script is saved, the resulting installation script is invalid. The issue is that the shortcuts section of the installation script is empty and although this is a valid XML file, any attempt to use this script results in the following error. <code class="computeroutput"> [ Creating shortcuts java.lang.NullPointerException java.lang.NullPointerException at com.izforge.izpack.util.os.Unix_Shortcut.execPostAction(Unknown Source) at com.izforge.izpack.panels.ShortcutPanelAutomationHelper.runAutomated(Unknown Source) at com.izforge.izpack.installer.AutomatedInstaller.installPanel(Unknown Source) at com.izforge.izpack.installer.AutomatedInstaller.doInstall(Unknown Source) at com.izforge.izpack.installer.Installer.main(Unknown Source) [ Automated installation FAILED! ] </code>
				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-10529">https://issues.jboss.org/browse/JBPAPP-10529</a></span></dt><dd><div class="para">
					While using the GUI installer, if the option to generate an automatic installation script is used, and a file of the specified name already exists, that file will be overwritten without warning. A workaround is to check if a file of the specified name already exists and if so, either rename it or specify a different file name.
				</div></dd><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-10561">https://issues.jboss.org/browse/JBPAPP-10561</a></span></dt><dd><div class="para">
					The RPM installation method of JBoss Enterprise Application Platform does not include the JAR <code class="filename">jboss-common-beans.jar</code> in the CLASSPATH. As a result, launching an AppClient might fail with message: 
<pre class="screen">
               DEPLOYMENTS IN ERROR:
                 Deployment "ClientLauncherClassPath:0.0.0$MODULE" is in error due to: java.lang.RuntimeException: Error configuring property: roots for ClientLauncherClassPath:0.0.0$MODULE
</pre>
					 To work around this issue, add <code class="filename"><em class="replaceable">$JBOSS_HOME</em>/lib/jboss-common-beans.jar</code> to the CLASSPATH. With this JAR added to the CLASSPATH, the above error message no longer occurs.
				</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Messaging</strong></p><dl class="variablelist"><dt><span class="term"><a href="https://issues.jboss.org/browse/JBPAPP-5124">https://issues.jboss.org/browse/JBPAPP-5124</a></span></dt><dd><div class="para">
					When using Sybase database with the JDBC driver Sybase jConnect JDBC driver v7 (Build 26502), a <code class="varname">MaxParams</code> attribute in the <code class="filename">sybase-persistence-service.xml</code> configuration file cannot be set higher than <code class="literal">481</code> due to a limitation of the <code class="classname">PreparedStatement</code> class in this driver. Unexpected failures can occur when the <code class="varname">MaxParams</code> attribute is set to a value higher than <code class="literal">481</code>. To avoid this issue, set <code class="varname">MaxParams</code> to a smaller value than <code class="literal">481</code>.
				</div></dd></dl></div></div></body></html>