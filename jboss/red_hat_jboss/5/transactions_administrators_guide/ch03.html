<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. OTS and J2EE Transaction Service management</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412727071216">
      ⁠</a>Chapter 3. OTS and J2EE Transaction Service management </h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412735110816">
      ⁠</a>3.1. Starting the Run-time System</h1></div></div></div><div class="para">
			Run-time support for the JBoss Transaction Service consists of run-time packages and the OTS Transaction Manager server. By default JBoss Transaction Service does not use a separate Transaction Manager server. Instead, transaction managers are co-located with each application process. This improves performance and application fault-tolerance by removing external dependencies of applications upon other services for proper function.
		</div><div class="para">
			If your application requires a separate transaction manager, set the <code class="varname">com.arjuna.ats.jts.transactionManager</code> environment variable to <code class="literal">yes</code>. The system locates the transaction manager using an ORB-specific mechanism. It might be registered with a name server, added to the ORB’s initial references, listed in a references file specific to JBoss Transaction Service, or located by the ORB’s specific location mechanism.
		</div><div class="para">
			You can override the default registration mechanism by setting the <code class="varname">com.arjuna.orbportability.resolveService</code> environment variable to one of the following values:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">CONFIGURATION_FILE</code>, the default value</span></dt><dd><div class="para">
						causes the system to use the <code class="filename">CosServices.cfg</code> file.
					</div></dd><dt><span class="term"> <code class="literal">NAME_SERVICE</code> </span></dt><dd><div class="para">
						JBoss Transaction Service attempts to use a name service to register the transaction factory. If this is not supported by the ORB, an exception will be thrown.
					</div></dd><dt><span class="term"> <code class="literal">BIND_CONNECT</code> </span></dt><dd><div class="para">
						JBoss Transaction Service uses the ORB-specific bind mechanism. If this is not supported by the ORB, an exception will be thrown.
					</div></dd><dt><span class="term"> <code class="literal">RESOLVE_INITIAL_REFERENCES</code> </span></dt><dd><div class="para">
						JBoss Transaction Service attempts to register the transaction service with the ORB's initial service references.
					</div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412722810160">
      ⁠</a>3.2. OTS Configuration File</h1></div></div></div><div class="para">
			Similar to the <code class="literal">RESOLVE_INITIAL_REFERENCES</code> option, JBoss Transaction Service supports an initial reference file where references for specific services can be stored and used at run-time. The file, <code class="filename">CosServices.cfg</code>, consists of two columns: the <code class="literal">service name</code> (which is always <code class="literal">TransactionService</code> if you are using OTS server) and the IOR, separated by a single space. <code class="filename">CosServices.cfg</code> normally resides in the <code class="filename">etc</code> directory of the JBoss Transaction Service installation, although the actual location is determined at run-time by searching the <code class="varname">CLASSPATH</code> for a copy of the file in an <code class="filename">etc</code> directory or the location of the TransactionService properties file directory.
		</div><div class="para">
			The OTS server creates this file if not found, and registers itself within the file. Stale information is automatically removed. Machines sharing the same transaction server need access to either this file itself, or a copy of it.
		</div><div class="para">
			You can override the name and location of the file using the <code class="varname">com.arjuna.orbportability.initialReferencesFile</code> and <code class="varname">com.arjuna.orbportability.initialReferencesRoot</code> variables, respectively.
		</div><pre class="screen">com.arjuna.orbportability.initialReferencesFile=myFile
com.arjuna.orbportability.initialReferencesRoot=c:\\temp</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412713028400">
      ⁠</a>3.3. Name Service</h1></div></div></div><div class="para">
			If your ORB supports a name service, and JBoss Transaction Service has been configured to use it, the transaction manager will automatically be registered with it.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				This option is not used for JacORB
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412713025872">
      ⁠</a>3.4. RESOLVE_INITIAL_REFERENCES</h1></div></div></div><div class="para">
			Currently this option is only supported for JacORB.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412713024496">
      ⁠</a>3.5. Resolution service table</h1></div></div></div><div class="para">
			The following table summarizes the different ways in which the OTS transaction manager may be located on specific ORBs:
		</div><div class="table"><a id="idm140412678188208">
      ⁠</a><p class="title"><strong>Table 3.1. Locating the OTS transaction manager server</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Locating the OTS transaction manager server"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left"> Resolution Mechanism </th><th style="text-align: left"> ORB </th></tr></thead><tbody><tr><td style="text-align: left"> OTS configuration file </td><td style="text-align: left"> All available ORBs </td></tr><tr><td style="text-align: left"> Name Service </td><td style="text-align: left"> JacORB </td></tr><tr><td style="text-align: left"> resolve_initial_references </td><td style="text-align: left"> JacORB </td></tr></tbody></table></div></div></div></div></body></html>