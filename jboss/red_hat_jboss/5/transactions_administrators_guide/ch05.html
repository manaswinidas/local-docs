<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 5. Web Service Transaction service management</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412736757360">
      ⁠</a>Chapter 5. Web Service Transaction service management</h1></div></div></div><div class="para">
		The basic building blocks of a transactional Web Services application are:
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
				the application itself
			</div></li><li class="listitem"><div class="para">
				the Web services that the application consumes
			</div></li><li class="listitem"><div class="para">
				the Transaction Manager
			</div></li><li class="listitem"><div class="para">
				the transaction participants which support those Web services
			</div></li></ul></div><div class="para">
		In a typical deployment, a single developer is not likely to support all of these roles. An overview is presented because developers often produce services, or applications that consume services, while system administrators run the transaction-management infrastructure.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140412736855152">
      ⁠</a>5.1. The Transaction Manager</h1></div></div></div><div class="para">
			The transaction manager is a Web service which coordinates JBoss Transaction Service transactions. It is the only software component in the JBoss Transaction Service that is meant to be run directly as a network service, instead of supporting end-user code. The transaction manager runs as a JAXM request/response Web service.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
				When starting up an application server instance that has JBoss Transaction Service deployed within it, you may see various error messages in the console or log. Here is one such message:
			</div><pre class="screen">16:53:38,850 ERROR [STDERR] Message Listener Service: started, message listener jndi name activationcoordinator</pre><div class="para">
				Messages like these are for information purposes, not actual errors.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140412732909248">
      ⁠</a>5.1.1. Configuring the Transaction Manager</h2></div></div></div><div class="para">
				The Transaction Manager and related infrastructure are configured by means of properties files:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="filename">wscf.xml</code>
					</div></li><li class="listitem"><div class="para">
						<code class="filename">wst.xml</code>
					</div></li><li class="listitem"><div class="para">
						<code class="filename">wstx.xml</code>
					</div></li></ul></div><div class="para">
				These files are located in the <code class="filename">conf</code> directory and are used to configure the demo application and the standalone module.
			</div><div class="para">
				For the most part, the default values in these files do not need to be altered. However, the <span class="property">com.arjuna.ats.arjuna.objectstore.objectStoreDir</span> property determines the location of the persistent store used to record transaction state. The default value of <code class="filename">C:/temp/ObjectStore</code> should be changed to a value appropriate to your system. In a production environment, this directory should be located on fault-tolerant media, such as a RAID array.
			</div><div class="para">
				When a standalone coordinator is being used by an application, you must enable and modify two additional properties in the <code class="filename">wstx.xml</code> file:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<span class="property">com.arjuna.mw.wst.coordinatorURL</span>
					</div></li><li class="listitem"><div class="para">
						<span class="property">com.arjuna.mw.wst.terminatorURL</span>
					</div></li></ul></div><div class="para">
				These properties represent the URLs used by the client application to contact the standalone coordinator. They should be configured with the correct host name and port of the standalone coordinator.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					JBoss Transaction Service is highly modular. In order to allow for flexible deployment of individual components, the same property values are sometimes needed in more than one configuration file. For the majority of configurations, you should maintain consistent values for properties that are defined in more than one file.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140412710553712">
      ⁠</a>5.1.2. Deploying the Transaction Manager</h2></div></div></div><div class="para">
				The Web Service Transaction Manager component of the Transaction Service consists of a number of JAR files which contain the application’s class files, as well as Web service (WAR) files which expose the necessary services. Programmers include all these components in their application EAR file during application development, to simplify deployment of the transaction infrastructure. In production, you can install the Transaction Manager as a stand-alone application, to centralize configuration and management at the server level. The demonstration application shipped with JBoss Transaction Server includes a sample deployment descriptor which includes the Transaction Manager components in an application.
			</div><div class="para">
				JBoss Transaction Service uses fixed endpoints for its underlying protocol communication. Therefore, problems may arise if multiple applications using the Transaction Service are deployed to the same server concurrently. To deploy several transactional applications in the same server, deploy the Transaction Manager as a separate application, rather than embedding it within the deployment of individual applications.
			</div><div class="para">
				The coordinator directory in the JBoss Transaction Service installation assists in the configuration and deployment of a stand-alone transaction manager. In order to use this, you must:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Have JBoss Enterprise Application Platform 5 installed
					</div></li><li class="listitem"><div class="para">
						Install ant 1.4 or later.
					</div></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
					The application server installation must be different from the one that clients and services are deployed into. Otherwise, conflicts may occur between the various JBoss Transaction Service components.
				</div></div></div><div class="para">
				Edit the <code class="filename">build.xml</code> included with the coordinator, so that it points to the application server installation where the transaction coordinator will be deployed, and the location of the JBoss Transaction Service installation. The files <code class="filename">ws-c_jaxm_web-app.xml</code> and <code class="filename">ws-t_jaxm_web-app.xml</code> in the <code class="filename">dd/</code> directory of the coordinator are the deployment descriptors for the WS-C and WS-T WAR files. They contain templated URLs. During the build phase, <code class="command">ant</code> substitutes the <code class="literal">hostname</code> and <code class="literal">port</code> values from the <code class="filename">build.xml</code> into these files.
			</div><div class="para">
				Run <code class="command">ant</code>, with <em class="parameter"><code>target deploy-weblogic</code></em>, <em class="parameter"><code>deploy-jboss</code></em> or <em class="parameter"><code>deploy-webmethods</code></em>, to create and deploy a new coordinator into the correct application server installation.
			</div><div class="para">
				Next, point your client at the required coordinator, by generating the demo application and specifying the port and hostname of the coordinator.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140412739668336">
      ⁠</a>5.1.3. Deployment descriptors</h2></div></div></div><div class="para">
				It is not generally necessary to change the contents of the various deployment descriptors used by JBoss Transaction Service. However, if you do need to modify them they are all included in the coordinator module.
			</div><div class="para">
				Not all JBoss Transaction Service components have ready access to the information in the deployment descriptors. Therefore, if you modify the JNDI names used by any of the WS-C or WS-T deployment descriptors, you may need to inform other JBoss Transaction Service components at run-time, by setting an appropriate property in the <code class="filename">wstx.xml</code> configuration file.
			</div><div class="para">
				The <a class="xref" href="ch05.html#table-deployment_descriptor_values">Table 5.1, “Deployment descriptor values and properties”</a> table shows the default JNDI names used by the deployment descriptors and the corresponding property to set if the default value is changed.
			</div><div class="table"><a id="table-deployment_descriptor_values">
      ⁠</a><p class="title"><strong>Table 5.1. Deployment descriptor values and properties</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Deployment descriptor values and properties"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left"> JNDI Name </th><th style="text-align: left"> Property </th></tr></thead><tbody><tr><td style="text-align: left"> Activationrequester </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.activationrequester</span> </td></tr><tr><td style="text-align: left"> Activationcoordinator </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.activationcoordinator</span> </td></tr><tr><td style="text-align: left"> Completionparticipant </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.completionparticipant</span> </td></tr><tr><td style="text-align: left"> Registrationrequester </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.registrationrequester</span> </td></tr><tr><td style="text-align: left"> durable2pcdispatcher </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.durable2pcdispatcher</span> </td></tr><tr><td style="text-align: left"> durable2pcparticipant </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.durable2pcparticipant</span> </td></tr><tr><td style="text-align: left"> volatile2pcdispatcher </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.volatile2pcdispatcher</span> </td></tr><tr><td style="text-align: left"> volatile2pcparticipant </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.at.volatile2pcparticipant</span> </td></tr><tr><td style="text-align: left"> businessagreementwithparticipantcompletiondispatcher </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.ba.businessagreementwpcdispatcher</span> </td></tr><tr><td style="text-align: left"> businessagreementwithparticipantcompletionparticipant </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.ba.businessagreementwpcparticipant</span> </td></tr><tr><td style="text-align: left"> businessagreementwithcoordinatorcompletiondispatcher </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.ba.businessagreementwccdispatcher</span> </td></tr><tr><td style="text-align: left"> businessagreementwithcoordinatorcompletionparticipant </td><td style="text-align: left"> <span class="property">com.arjuna.mw.wst.ba.businessagreementwccparticipant</span> </td></tr></tbody></table></div></div></div></div></div></body></html>