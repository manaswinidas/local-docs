<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 9.  WS Policy Framework</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Policy_Framework">
      ⁠</a>Chapter 9.  WS Policy Framework </h1></div></div></div><div class="para">
		 The calculation of the effective policy for each message as well as verification that the alternatives for that policy are supported happens in interceptors.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139976606867952">
      ⁠</a>9.1.  Using The Policies Feature </h1></div></div></div><div class="para">
			The policies feature supports the following attributes:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"> ignoreUnknownAssertions </span></dt><dd><div class="para">
						Indicates an exception should be thrown when encountering assertions for which no AssertionBuilders are registered (default:<code class="option">true</code>). When set to false, a warning will be logged instead.
					</div></dd><dt><span class="term"> namespace </span></dt><dd><div class="para">
						The namespace of the WS-Policy Framework specification (default: <a href="http://www.w3.org/ns/ws-policy">http://www.w3.org/ns/ws-policy</a>).
					</div></dd></dl></div><div class="para">
			The element also supports the following child elements:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"> alternativeSelector </span></dt><dd><div class="para">
						A bean or reference to a bean that implements the <code class="classname">org.apache.cxf.ws.policy.selector.AlternativeSelector</code> interface. The default selector chooses the minimal alternative; that is, the one with the least number of assertions.
					</div></dd></dl></div><div class="para">
			In addition, the element can have any number of Policy or PolicyReference child elements. This has the same effect as if the Policy or PolicyReference elements were attached to the <code class="varname">wsdl:port</code> element of the WSDL contract of the client or server endpoint to which the feature is applied (or to all endpoints if the feature is applied to the bus).
		</div><div class="para">
			For example, to apply this feature to the bus and prevent exceptions being thrown when encountering unknown assertions:
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;beans</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://www.springframework.org/schema/beans"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xmlns:cxf=</span><span xmlns="" class="perl_String">"http://cxf.apache.org/core"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xmlns:p=</span><span xmlns="" class="perl_String">"http://cxf.apache.org/policy"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">       xsi:schemaLocation=</span><span xmlns="" class="perl_String">"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">http://cxf.apache.org/policy http://cxf.apache.org/schemas/policy.xsd</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;cxf:bus&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;cxf:features&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;p:policies</span><span xmlns="" class="perl_Others"> ignoreUnknownAssertions=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/cxf:features&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/cxf:bus&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/beans&gt;</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Specifying_The_Location_of_External_Attachments">
      ⁠</a>9.2.  Specifying the Location of External Attachments </h1></div></div></div><div class="para">
			To specify the location of an external attachment that the policy framework should take into consideration when aggregating the policies applying to a specific message, you can use the <code class="classname">&lt;externalAttachment&gt;</code> element in the same namespace. The following attribute is supported.
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"> location </span></dt><dd><div class="para">
						Location of the external attachment document. This takes the form of <a href="http://static.springsource.org/spring/docs/2.0.x/reference/resources.html">http://static.springsource.org/spring/docs/2.0.x/reference/resources.html</a> type property, for example, <code class="filename">classpath:etc/policies.xml</code> or <code class="filename">file:///x1/resources/polcies.xml</code>.
					</div></dd></dl></div><div class="para">
			Below is an example:
		</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;p:externalAttachment</span><span xmlns="" class="perl_Others"> location=</span><span xmlns="" class="perl_String">"classpath:org/apache/cxf/systest/ws/policy/addr-external.xml"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre><div class="para">
			You can have any number of <code class="classname">&lt;externalAttachment&gt;</code> elements in your configuration file.
		</div></div></div></body></html>