<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 6.  WS-Reliable Messaging</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="WS_Reliable_Messaging">
      ⁠</a>Chapter 6.  WS-Reliable Messaging </h1></div></div></div><div class="para">
		CXF supports the February 2005 version of the Web Service Reliable Messaging Protocol specification. Like most other features in CXF, it is interceptor based. The WS-Reliable Messaging implementation consists of four interceptors in total. These are listed below.
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="classname">org.apache.cxf.ws.rm.RMOutInterceptor</code></span></dt><dd><div class="para">
					Responsible for:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							Sending <code class="methodname">CreateSequence</code> requests.
						</div></li><li class="listitem"><div class="para">
							Waiting for their <code class="methodname">CreateSequenceResponse</code> responses.
						</div></li><li class="listitem"><div class="para">
							Collecting the sequence properties (id and message number) for an application message.
						</div></li></ul></div></dd><dt><span class="term"> <code class="classname">org.apache.cxf.ws.rm.RMInInterceptor</code> </span></dt><dd><div class="para">
					Intercepting and processing RM protocol messages, as well as <code class="classname">SequenceAcknowledgments</code> piggybacked on application messages.
				</div></dd><dt><span class="term"><code class="classname">org.apache.cxf.ws.rm.soap.RMSoapInterceptor</code></span></dt><dd><div class="para">
					Encoding and decoding the RM headers
				</div></dd><dt><span class="term"> <code class="classname">org.apache.cxf.ws.rm.soap.RetransmissionInterceptor</code></span></dt><dd><div class="para">
					Responsible for creating copies of application messages for future resends.
				</div></dd></dl></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Interceptor Based QoS </div>
			The presence of the RM interceptors on the respective interceptor chains alone will ensure that RM protocol messages are exchanged when necessary. For example, upon intercepting the first application message on the outbound interceptor chain, the <code class="methodname">RMOutInterceptor</code> will send a <code class="methodname">CreateSequence</code> request and only proceed with processing the original application message after it has the <code class="methodname">CreateSequenceResponse</code> response. The RM interceptors are also responsible for adding the sequence headers to the application messages and, on the destination side, extracting them from the message.
		</div><div class="para">
		This means that no changes to the application code are required to make the message exchange reliable.
	</div><div class="para">
		You can still control sequence demarcation and other aspects of the reliable exchange through configuration. By default, CXF attempts to maximize the lifetime of a sequence. This reduces the overhead incurred by the RM protocol messages, however you can choose to enforce the use of a separate sequence per application message by configuring the source of the RM sequence termination policy (setting the maximum sequence length to one). See the <a class="xref" href="Reliable_Messaging_Configuration.html">Chapter 7, <em> Using WS-Reliable Messaging </em></a> for more details on configuring this and other aspects of the reliable exchange.
	</div></div></body></html>