<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 5.  Addressing Tutorial</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idm139976636057504">
      ⁠</a>Chapter 5.  Addressing Tutorial </h1></div></div></div><div class="para">
		This tutorial will show you how to create client and endpoint communication with WS-Addressing enabled. Creating a WS-Addressing based service and client is very simple. The first step is to create regular JAX-WS service and client configuration; the last step is to configure the addressing on both sides.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> The Service </div>
			We will start with the following endpoint implementation.
		</div><pre class="screen JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.web service;</span>
<span xmlns="" class="line">​</span>  @web service
<span xmlns="" class="line">​</span>(
<span xmlns="" class="line">​</span>   portName = <span xmlns="" class="perl_String">"AddressingServicePort"</span>,
<span xmlns="" class="line">​</span>   serviceName = <span xmlns="" class="perl_String">"AddressingService"</span>,
<span xmlns="" class="line">​</span>   targetNamespace = <span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>,
<span xmlns="" class="line">​</span>   endpointInterface = <span xmlns="" class="perl_String">"org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"</span>
<span xmlns="" class="line">​</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ServiceImpl <span xmlns="" class="perl_Keyword">implements</span> ServiceIface
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">sayHello</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Hello World!"</span>;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		The above endpoint implements the following endpoint interface:
	</div><pre class="screen JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.WebMethod;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.web service;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@web service
<span xmlns="" class="line">​</span>(
<span xmlns="" class="line">​</span>   targetNamespace = <span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>
<span xmlns="" class="line">​</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">interface</span> ServiceIface
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   @WebMethod
<span xmlns="" class="line">​</span>   String <span xmlns="" class="perl_Function">sayHello</span>();
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		Let us say that compiled endpoint and interface classes are located in directory <code class="filename">/home/username/wsa/cxf/classes</code>. The next step is to generate the JAX-WS artifacts and WSDL that will be part of the endpoint archive.
	</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Generating WSDL and JAX-WS Endpoint Artifacts</div>
			We will use the <code class="classname">wsprovide</code> command line tool to generate WSDL and JAX-WS artifacts. Here's the command:
		</div><pre class="programlisting"> 
cd JBOSS_HOME/bin
./wsprovide.sh --keep --wsdl \
   --classpath=/home/username/wsa/cxf/classes \
   --output=/home/username/wsa/cxf/wsprovide/generated/classes \
   --resource=/home/username/wsa/cxf/wsprovide/generated/wsdl \
   --source=/home/username/wsa/cxf/wsprovide/generated/src \
   org.jboss.test.ws.jaxws.samples.wsa.ServiceImpl
</pre><div class="para">
		The above command generates the following artifacts:
	</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"> Compiled classes </span></dt><dd><div class="para">
					<code class="classname">SayHello.class</code>
				</div><div class="para">
					<code class="classname">SayHelloResponse.class</code>
				</div></dd><dt><span class="term"> Java Sources </span></dt><dd><div class="para">
					<code class="classname">SayHello.java</code>
				</div><div class="para">
					<code class="classname">SayHelloResponse.java </code>
				</div></dd><dt><span class="term"> Contract Artifacts </span></dt><dd><div class="para">
					<code class="classname">AddressingService.wsdl</code>
				</div></dd></dl></div><div class="para">
		All previously mentioned generated artifacts will be part of the endpoint archive, but before we create the endpoint archive, we need to reference generated WSDL from the endpoint. We will use the <code class="classname">wsdlLocation</code> annotation attribute. This is the updated endpoint implementation before it is packaged to the <code class="filename">war</code> file:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.web service;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@web service
<span xmlns="" class="line">​</span>(
<span xmlns="" class="line">​</span>   portName = <span xmlns="" class="perl_String">"AddressingServicePort"</span>,
<span xmlns="" class="line">​</span>   serviceName = <span xmlns="" class="perl_String">"AddressingService"</span>,
<span xmlns="" class="line">​</span>   wsdlLocation = <span xmlns="" class="perl_String">"WEB-INF/wsdl/AddressingService.wsdl"</span>,
<span xmlns="" class="line">​</span>   targetNamespace = <span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>,
<span xmlns="" class="line">​</span>   endpointInterface = <span xmlns="" class="perl_String">"org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"</span>
<span xmlns="" class="line">​</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ServiceImpl <span xmlns="" class="perl_Keyword">implements</span> ServiceIface
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">sayHello</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Hello World!"</span>;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre><div class="para">
		The created endpoint war archive consists of the following entries:
	</div><pre class="screen">
     jar -tvf jaxws-samples-wsa.war 
     0 Mon Apr 21 20:39:30 CEST 2008 META-INF/
   106 Mon Apr 21 20:39:28 CEST 2008 META-INF/MANIFEST.MF
     0 Mon Apr 21 20:39:30 CEST 2008 WEB-INF/
   593 Mon Apr 21 20:39:28 CEST 2008 WEB-INF/web.xml
     0 Mon Apr 21 20:39:30 CEST 2008 WEB-INF/classes/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/
   374 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/ServiceIface.class
   954 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/ServiceImpl.class
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws/
   703 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws/SayHello.class
  1074 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws/SayHelloResponse.class
     0 Mon Apr 21 20:39:30 CEST 2008 WEB-INF/wsdl/
  2378 Mon Apr 21 20:39:28 CEST 2008 WEB-INF/wsdl/AddressingService.wsdl
</pre><div class="para">
		The content of the <code class="filename">web.xml</code> file is:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span xmlns="" class="perl_Keyword">?&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;web-app</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">   version=</span><span xmlns="" class="perl_String">"2.5"</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">   xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">   xsi:schemaLocation=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;servlet&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>AddressingService<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;servlet-class&gt;</span>org.jboss.test.ws.jaxws.samples.wsa.ServiceImpl<span xmlns="" class="perl_Keyword">&lt;/servlet-class&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/servlet&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>AddressingService<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;url-pattern&gt;</span>/*<span xmlns="" class="perl_Keyword">&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/web-app&gt;</span>
</pre><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Writing Regular JAX-WS Client </div>
			The following is the regular JAX-WS client using endpoint interface to lookup the web service: package.org.jboss.test.ws.jaxws.samples.wsa:
		</div><pre class="screen JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package.<span xmlns="" class="perl_Function">org</span>.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>:
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.net.URL;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.namespace.QName;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.Service;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">final</span> <span xmlns="" class="perl_Keyword">class</span> SimpleServiceTestCase
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">final</span> String serviceURL = <span xmlns="" class="perl_String">"http://localhost:8080/jaxws-samples-wsa/AddressingService"</span>;
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">main</span>(String[] args) <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">// create service</span>
<span xmlns="" class="line">​</span>      QName serviceName = <span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>, <span xmlns="" class="perl_String">"AddressingService"</span>);
<span xmlns="" class="line">​</span>      URL wsdlURL = <span xmlns="" class="perl_Keyword">new</span> URL(serviceURL + <span xmlns="" class="perl_String">"?wsdl"</span>);
<span xmlns="" class="line">​</span>      Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlURL, serviceName);
<span xmlns="" class="line">​</span>      ServiceIface proxy = (ServiceIface)service.<span xmlns="" class="perl_Function">getPort</span>(ServiceIface.<span xmlns="" class="perl_Function">class</span>);
<span xmlns="" class="line">​</span>      
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">// invoke method</span>
<span xmlns="" class="line">​</span>      proxy.<span xmlns="" class="perl_Function">sayHello</span>();
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		We have both endpoint and client implementations but without WS-Addressing in place. Our next goal is to turn on the WS-Addressing feature.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm139976656486656">
      ⁠</a>5.1.  Turning on WS-Addressing 1.0 </h1></div></div></div><div class="para">
			There are two steps remaining in order to turn on WS-Addressing in JBossWS-CXF.
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					Annotate service endpoint with @Addressing annotation.
				</div></li><li class="listitem"><div class="para">
					Modify client to configure WS-Addressing using the JAX-WS web service feature.
				</div></li></ul></div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Updating Endpoint Code to Configure WS-Addressing</div>
				Now we need to update endpoint implementation to configure WS-Addressing. Here's the updated endpoint code:
			</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.jws.web service;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.soap.Addressing;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span>@web service
<span xmlns="" class="line">​</span>(
<span xmlns="" class="line">​</span>   portName = <span xmlns="" class="perl_String">"AddressingServicePort"</span>,
<span xmlns="" class="line">​</span>   serviceName = <span xmlns="" class="perl_String">"AddressingService"</span>,
<span xmlns="" class="line">​</span>   wsdlLocation = <span xmlns="" class="perl_String">"WEB-INF/wsdl/AddressingService.wsdl"</span>,
<span xmlns="" class="line">​</span>   targetNamespace = <span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>,
<span xmlns="" class="line">​</span>   endpointInterface = <span xmlns="" class="perl_String">"org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"</span>
<span xmlns="" class="line">​</span>)
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">Addressing</span>(enabled=<span xmlns="" class="perl_Keyword">true</span>, required=<span xmlns="" class="perl_Keyword">true</span>)
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ServiceImpl <span xmlns="" class="perl_Keyword">implements</span> ServiceIface
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">sayHello</span>()
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_String">"Hello World!"</span>;
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
			We have added the JAX-WS 2.1 Addressing annotation to configure WS-Addressing. The next step is to repackage the endpoint archive to apply this change.
		</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title"> Updating Client Code to Configure WS-Addressing </div>
				We need to update client implementation to configure WS-Addressing. Here's the updated client code:
			</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">test</span>.<span xmlns="" class="perl_Function">ws</span>.<span xmlns="" class="perl_Function">jaxws</span>.<span xmlns="" class="perl_Function">samples</span>.<span xmlns="" class="perl_Function">wsa</span>;
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import java.net.URL;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.namespace.QName;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.Service;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.xml.ws.soap.AddressingFeature;</span>
<span xmlns="" class="line">​</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">final</span> <span xmlns="" class="perl_Keyword">class</span> AddressingTestCase
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">private</span> <span xmlns="" class="perl_DataType">final</span> String serviceURL = <span xmlns="" class="perl_String">"http://localhost:8080/jaxws-samples-wsa/AddressingService"</span>;
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">main</span>(String[] args) <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">// construct proxy</span>
<span xmlns="" class="line">​</span>      QName serviceName = <span xmlns="" class="perl_Keyword">new</span> QName(<span xmlns="" class="perl_String">"http://www.jboss.org/jbossws/ws-extensions/wsaddressing"</span>, <span xmlns="" class="perl_String">"AddressingService"</span>);
<span xmlns="" class="line">​</span>      URL wsdlURL = <span xmlns="" class="perl_Keyword">new</span> URL(serviceURL + <span xmlns="" class="perl_String">"?wsdl"</span>);
<span xmlns="" class="line">​</span>      Service service = Service.<span xmlns="" class="perl_Function">create</span>(wsdlURL, serviceName);
<span xmlns="" class="line">​</span>      ServiceIface proxy = (ServiceIface)service.<span xmlns="" class="perl_Function">getPort</span>(ServiceIface.<span xmlns="" class="perl_Function">class</span>,  <span xmlns="" class="perl_Keyword">new</span> <span xmlns="" class="perl_Function">AddressingFeature</span>());
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Comment">// invoke method</span>
<span xmlns="" class="line">​</span>      proxy.<span xmlns="" class="perl_Function">sayHello</span>();
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>   
<span xmlns="" class="line">​</span>}
<span xmlns="" class="line">​</span>
</pre><div class="para">
			We now have both JAX-WS client and endpoint communicating with each other using WS-Addressing.
		</div></div></div></body></html>