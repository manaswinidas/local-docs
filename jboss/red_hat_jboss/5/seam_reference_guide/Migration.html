<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 2. Migration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Migration">
      ⁠</a>Chapter 2. Migration</h1></div></div></div><div class="para">
		If you already have a previous version of Seam installed, you will need to follow the instructions in this chapter to migrate to latest version (2.2.0), which is available with the JBoss Enterprise Application Platform.
	</div><div class="para">
		If you are already using Seam 2.0, you can skip directly to <a class="xref" href="Migration.html#MigrationFrom20">Section 2.2, “Migrating from Seam 2.0 to Seam 2.1 or 2.2”</a>. If you are currently using Seam 1.2.x, follow the instructions in both <a class="xref" href="Migration.html#MigrationFrom12">Section 2.1, “Migrating from Seam 1.2.x to Seam 2.0”</a> and <a class="xref" href="Migration.html#MigrationFrom20">Section 2.2, “Migrating from Seam 2.0 to Seam 2.1 or 2.2”</a>.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="MigrationFrom12">
      ⁠</a>2.1. Migrating from Seam 1.2.x to Seam 2.0</h1></div></div></div><div class="para">
			In this section, we show you how to migrate from Seam 1.2.x to Seam 2.0. We also list the changes to Seam components between versions.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.JSF12">
      ⁠</a>2.1.1. Migrating to JavaServer Faces 1.2</h2></div></div></div><div class="para">
				Seam 2.0 requires JSF 1.2 to work correctly. We recommend Sun's JSF Reference Implementation (RI), which ships with most Java EE 5 application servers, including JBoss 4.2. To switch to the JSF RI, you will need to make the following changes to your <code class="filename">web.xml</code>:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Remove the MyFaces <code class="literal">StartupServletContextListener</code>.
					</div></li><li class="listitem"><div class="para">
						Remove the AJAX4JSF filter, mappings, and <code class="literal">org.ajax4jsf.VIEW_HANDLERS</code> context parameter.
					</div></li><li class="listitem"><div class="para">
						Rename <code class="literal">org.jboss.seam.web.SeamFilter</code> as <code class="literal">org.jboss.seam.servlet.SeamFilter</code>.
					</div></li><li class="listitem"><div class="para">
						Rename <code class="literal">org.jboss.seam.servlet.ResourceServlet</code> as <code class="literal">org.jboss.seam.servlet.SeamResourceServlet</code>.
					</div></li><li class="listitem"><div class="para">
						Change the <code class="varname"> web-app </code> version from <code class="literal">2.4</code> to <code class="literal">2.5</code>. In the namespace URL, change <code class="literal">j2ee</code> to <code class="literal">javaee</code>. For example:
					</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;web-app</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">  xsi:schemaLocation=</span><span xmlns="" class="perl_String">"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">  http://java.sun.com/xml/ns/javaee</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span xmlns="" class="perl_Others"> version=</span><span xmlns="" class="perl_String">"2.5"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/web-app&gt;</span>
</pre></li></ul></div><div class="para">
				As of Seam 1.2, you can declare <code class="literal">SeamFilter</code> in <code class="filename">web.xml</code> instead of explicitly declaring <code class="literal">SeamExceptionFilter</code> and <code class="literal">SeamRedirectFilter</code> in <code class="filename">web.xml</code>.
			</div><div class="para">
				Client-side state saving is not required with the JSF RI, and can be removed. (Client-side state saving is defined by the <code class="literal">javax.faces.STATE_SAVING_METHOD</code> context parameter.
			</div><div class="para">
				You will also need to make the following changes to <code class="filename">faces-config.xml</code>:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Remove the <code class="literal">TransactionalSeamPhaseListener</code> or <code class="literal">SeamPhaseListener</code> declaration, if in use.
					</div></li><li class="listitem"><div class="para">
						Remove the <code class="literal">SeamELResolver</code> declaration, if in use.
					</div></li><li class="listitem"><div class="para">
						Change the <code class="literal">SeamFaceletViewHandler</code> declaration to the standard <code class="literal">com.sun.facelets.FaceletViewHandler</code>, and ensure it is enabled.
					</div></li><li class="listitem"><div class="para">
						Remove the Document Type Declaration (DTD) from the document and add the XML Schema declarations to the <code class="literal"> &lt;faces-config&gt; </code> root tag, like so:
					</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;faces-config</span><span xmlns="" class="perl_Others"> version=</span><span xmlns="" class="perl_String">"1.2"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">   xmlns=</span><span xmlns="" class="perl_String">"http://java.sun.com/xml/ns/javaee"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">   xmlns:xsi=</span><span xmlns="" class="perl_String">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">   xsi:schemaLocation=</span><span xmlns="" class="perl_String">"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">   http://java.sun.com/xml/ns/javaee</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">   http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   ...
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/faces-config&gt;</span></pre></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.Code">
      ⁠</a>2.1.2. Code Migration</h2></div></div></div><div class="para">
				Seam's built-in components have been reorganized to make them easier to learn and to isolate particular technology dependencies into specific packages.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Persistence-related components have been moved to <code class="literal">org.jboss.seam.persistence</code>.
					</div></li><li class="listitem"><div class="para">
						jBPM-related components have been moved to <code class="literal">org.jboss.seam.bpm</code>.
					</div></li><li class="listitem"><div class="para">
						JSF-related components, most notably <code class="literal">org.jboss.seam.faces.FacesMessages</code>, have been moved to <code class="literal">org.jboss.seam.faces</code>.
					</div></li><li class="listitem"><div class="para">
						Servlet-related components have been moved to <code class="literal">org.jboss.seam.web</code>.
					</div></li><li class="listitem"><div class="para">
						Components related to asynchronicity have been moved to <code class="literal">org.jboss.seam.async</code>.
					</div></li><li class="listitem"><div class="para">
						Internationalization-related components have been moved to <code class="literal">org.jboss.seam.international</code>.
					</div></li><li class="listitem"><div class="para">
						The Pageflow component has been moved to <code class="literal">org.jboss.seam.pageflow</code>.
					</div></li><li class="listitem"><div class="para">
						The Pages component has been moved to <code class="literal">org.jboss.seam.navigation</code>.
					</div></li></ul></div><div class="para">
				Any code that depends upon these APIs will need to be altered to reflect the new Java package names.
			</div><div class="para">
				Annotations have also been reorganized:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						BPM-related annotations are now included in the <code class="literal">org.jboss.seam.annotations.bpm</code> package.
					</div></li><li class="listitem"><div class="para">
						JSF-related annotations are now included in the <code class="literal">org.jboss.seam.annotations.faces</code> package.
					</div></li><li class="listitem"><div class="para">
						Interceptor annotations are now included in the <code class="literal">org.jboss.seam.annotations.intercept</code> package.
					</div></li><li class="listitem"><div class="para">
						Annotations related to asynchronicity are now included in the <code class="literal">org.jboss.seam.annotations.async</code> package.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">@RequestParameter</code> is now included in the <code class="literal">org.jboss.seam.annotations.web</code> package.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">@WebRemote</code> is now included in the <code class="literal">org.jboss.seam.annotations.remoting</code> package.
					</div></li><li class="listitem"><div class="para">
						<code class="literal">@Restrict</code> is now included in the <code class="literal">org.jboss.seam.annotations.security</code> package.
					</div></li><li class="listitem"><div class="para">
						Exception handling annotations are now included in the <code class="literal">org.jboss.seam.annotations.exception</code> package.
					</div></li><li class="listitem"><div class="para">
						Use <code class="literal">@BypassInterceptors</code> instead of <code class="literal">@Intercept(NEVER)</code>.
					</div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.Components">
      ⁠</a>2.1.3. Migrating <code class="filename">components.xml</code></h2></div></div></div><div class="para">
				The new packaging system outlined in the previous section means that you must update <code class="filename">components.xml</code> with the new schemas and namespaces.
			</div><div class="para">
				Namespaces originally took the form <code class="literal">org.jboss.seam.foobar</code>. The new namespace format is <code class="literal">http://jboss.com/products/seam/foobar</code>, and the schema is of the form <code class="literal">http://jboss.com/products/seam/foobar-2.0.xsd</code>. You will need to update the format of the namespaces and schemas in your <code class="filename">components.xml</code> file so that the URLs correspond to the version of Seam that you wish to migrate to (2.0 or 2.1).
			</div><div class="para">
				The following declarations must have their locations corrected, or be removed entirely:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Replace <code class="literal"> &lt;core:managed-persistence-context&gt; </code> with <code class="literal"> &lt;persistence:managed-persistence-context&gt; </code>.
					</div></li><li class="listitem"><div class="para">
						Replace <code class="literal"> &lt;core:entity-manager-factory&gt; </code> with <code class="literal"> &lt;persistence:entity-manager-factory&gt; </code>.
					</div></li><li class="listitem"><div class="para">
						Remove <code class="varname"> conversation-is-long-running </code> parameter from <code class="literal"> &lt;core:manager/&gt; </code> element.
					</div></li><li class="listitem"><div class="para">
						Remove <code class="literal"> &lt;core:ejb/&gt; </code>.
					</div></li><li class="listitem"><div class="para">
						Remove <code class="literal"> &lt;core:microcontainer/&gt; </code>.
					</div></li><li class="listitem"><div class="para">
						Replace <code class="literal"> &lt;core:transaction-listener/&gt; </code> with <code class="literal"> &lt;transaction:ejb-transaction/&gt; </code>.
					</div></li><li class="listitem"><div class="para">
						Replace <code class="literal"> &lt;core:resource-bundle/&gt; </code> with <code class="literal"> &lt;core:resource-loader/&gt; </code>.
					</div></li></ul></div><div class="example"><a id="idm139690496748992">
      ⁠</a><p class="title"><strong>Example 2.1. <code class="filename">components.xml</code> Notes</strong></p><div class="example-contents"><div class="para">
					Seam transaction management is now enabled by default. It is now controlled by <code class="filename">components.xml</code> instead of a JSF phase listener declaration in <code class="filename">faces-config.xml</code>. To disable Seam-managed transactions, use the following:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;core:init</span><span xmlns="" class="perl_Others"> transaction-management-enabled=</span><span xmlns="" class="perl_String">"false"</span><span xmlns="" class="perl_Keyword">/&gt;</span></pre><div class="para">
					The <code class="varname"> expression </code> attribute on <code class="literal">event</code> <code class="literal">action</code>s has been deprecated in favor of <code class="literal">execute</code>. For example:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;event</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"org.jboss.seam.security.notLoggedIn"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;action</span><span xmlns="" class="perl_Others"> execute=</span><span xmlns="" class="perl_String">"#{redirect.captureCurrentView}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/event&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;event</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"org.jboss.seam.loginSuccessful"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;action</span><span xmlns="" class="perl_Others"> execute=</span><span xmlns="" class="perl_String">"#{redirect.returnToCapturedView}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/event&gt;</span></pre></div></div><div class="para">
				In Seam 2.2, security events use the <code class="literal">org.jboss.seam.security&gt;</code> prefix instead of <code class="literal">org.jboss.seam</code> (for example, <code class="literal">org.jboss.seam.security.notLoggedIn</code>.)
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Instead of the <code class="literal"> org.jboss.seam.postAuthenticate</code> event, use the <code class="literal">org.jboss.seam.security.loginSuccessful</code> event to return to the captured view.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.Embedded">
      ⁠</a>2.1.4. Migrating to Embedded JBoss</h2></div></div></div><div class="para">
				Embedded JBoss no longer supports the use of JBoss Embeddable EJB3 or JBoss Microcontainer. Instead, the new Embedded JBoss distribution provides a complete set of Java EE-compatible APIs with simplified deployment.
			</div><div class="para">
				For testing, you will need to include the following in your classpath:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						the <code class="filename">jar</code>s in Seam's <code class="filename">lib/</code> directory
					</div></li><li class="listitem"><div class="para">
						the <code class="filename">bootstrap/</code> directory
					</div></li></ul></div><div class="para">
				Remove any references or artifacts relating to JBoss Embeddable EJB3, such as the <code class="filename">embeddded-ejb</code> directory and <code class="filename">jboss-beans.xml</code>. (You can use the Seam examples as reference.)
			</div><div class="para">
				There are no longer any special configuration or packaging requirements for Tomcat deployment. To deploy with Tomcat, follow the instructions in the User Guide. 
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Embedded JBoss can bootstrap a datasource from a <code class="filename">-ds.xml</code> file, so the <code class="filename">jboss-beans.xml</code> file is no longer required.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.BPM">
      ⁠</a>2.1.5. Migrating to jBPM 3.2</h2></div></div></div><div class="para">
				If you use jBPM for business processes as well as pageflows, you must add the <code class="literal">tx</code> service to <code class="filename">jbpm.cfg.xml</code>:
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;service</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"tx"</span><span xmlns="" class="perl_Others"> factory=</span><span xmlns="" class="perl_String">"org.jbpm.tx.TxServiceFactory"</span> <span xmlns="" class="perl_Keyword">/&gt;</span></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.RFC">
      ⁠</a>2.1.6. Migrating to RichFaces 3.1</h2></div></div></div><div class="para">
				There has been a major reorganization of the codebase for both RichFaces and AJAX4JSF. The <code class="filename">ajax4jsf.jar</code> and <code class="filename">richfaces.jar</code> <code class="filename">jar</code>s have been replaced with the <code class="filename">richfaces-api.jar</code> (to be placed in the EAR <code class="filename">lib/</code> directory) and the <code class="filename">richfaces-impl.jar</code> and <code class="filename">richfaces-ui.jar</code> (to be placed in <code class="filename">WEB-INF/lib</code>).
			</div><div class="para">
				<code class="literal"> &lt;s:selectDate&gt; </code> has been deprecated in favor of <code class="literal"> &lt;rich:calendar&gt; </code>. There will be no further development of <code class="literal"> &lt;s:selectDate&gt; </code>. The styles associated with the data picker should be removed from your style sheet to reduce bandwidth use.
			</div><div class="para">
				Check the RichFaces documentation for more information about changes to namespace and parameter names.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration12.Changes">
      ⁠</a>2.1.7. Changes to Components</h2></div></div></div><div class="para"><a id="Migration12.Changes.Packaging">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Packaging Changes</div>
					All dependencies that were previously declared as modules in <code class="filename">application.xml</code> should now be placed in the <code class="filename">lib/</code> directory of your EAR, <span class="emphasis"><em>except</em></span> <code class="filename">jboss-seam.jar</code>, which should be declared as an EJB module in <code class="filename">application.xml</code>.
				</div><div class="para"><a id="Migration12.Changes.UI">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to the Seam User Interface</div>
					<code class="literal"> &lt;s:decorate&gt; </code> has become a naming container. Client IDs have therefore changed from <code class="literal">fooForm:fooInput</code> to <code class="literal">fooForm:foo:fooInput</code>, assuming that the following has been declared:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"fooForm"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"foo"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>     <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"fooInput"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{bean.property}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre><div class="para">
				If you do not provide an ID for <code class="literal"> &lt;s:decorate&gt; </code>, JSF will generate an ID automatically.
			</div><div class="para"><a id="Migration12.Changes.SeamGen">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to <span class="application"><strong>seam-gen</strong></span></div>
					Since Seam 2.0.0.CR2, there have been changes to the organization of generated classes in <span class="application"><strong>seam-gen</strong></span> when <code class="literal">generate-entities</code> is executed.
				</div><div class="para">
				Originally, classes were generated as follows:
			</div><pre class="screen">
        <code class="filename">src/model/com/domain/projectname/model/EntityName.java</code>
        <code class="filename">src/action/com/domain/projectname/model/EntityNameHome.java</code>
        <code class="filename">src/action/com/domain/projectname/model/EntityNameList.java</code></pre><div class="para">
				Now, they are generated like this:
			</div><pre class="screen">
        <code class="filename">src/model/com/domain/projectname/model/EntityName.java</code>
        <code class="filename">src/action/com/domain/projectname/action/EntityNameHome.java</code>
        <code class="filename">src/action/com/domain/projectname/action/EntityNameList.java</code></pre><div class="para">
				Home and Query objects are <span class="emphasis"><em>action</em></span> components, not <span class="emphasis"><em>model</em></span> components, and are therefore placed in the <code class="literal">action</code> package. This makes <code class="literal">generate-entities</code> conventions consistent with those of the <code class="literal">new-entity</code> command.
			</div><div class="para">
				Model classes are listed separately because they cannot be hot-reloaded.
			</div><div class="para">
				Since the testing system has changed from JBoss Embeddable EJB3 to Embedded JBoss, we recommend that you generate a project with <span class="application"><strong>seam-gen</strong></span> in Seam 2.x, and use its <code class="filename">build.xml</code> file as a base for new projects. If you have made extensive changes to the <code class="filename">build.xml</code>, you can focus on migrating only test-related targets.
			</div><div class="para">
				For tests to work under Embedded JBoss, you need to change the value of the <code class="literal"> &lt;datasource&gt; </code> element in <code class="filename">resources/META-INF/persistence-test.xml</code> (or <code class="filename">persistence-test-war.xml</code>) to <code class="literal">java:/DefaultDS</code>. Alternatively, you can deploy a <code class="filename">-ds.xml</code> file to the <code class="filename">bootstrap/deploy</code> folder and use the JNDI name defined in that file.
			</div><div class="para">
				If you use the Seam 2.x <code class="filename">build.xml</code> as described, you will also require the <code class="filename">deployed-*.list</code> files, which define the <code class="filename">jar</code> files that are packaged in the EAR or WAR archive. These were introduced to remove the <code class="filename">jar</code> set from the <code class="filename">build.xml</code> file.
			</div><div class="para">
				Add the following CSS to your style sheet to allow your style to accommodate a change in the RichFaces panel. Failing to add this code will mean that, in any page created by <code class="literal">generate-entities</code>, the <span class="emphasis"><em>search criteria</em></span> block will bleed into the <span class="emphasis"><em>results table</em></span>.
			</div><pre class="programlisting CSS"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Float">.rich-stglpanel-body</span> <span xmlns="" class="perl_Keyword">{</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">overflow:</span> <span xmlns="" class="perl_DataType">auto</span><span xmlns="" class="perl_Keyword">;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">}</span></pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="MigrationFrom20">
      ⁠</a>2.2. Migrating from Seam 2.0 to Seam 2.1 or 2.2</h1></div></div></div><div class="para">
			This section describes the changes between Seam 2.0 and Seam 2.1 or 2.2. If you are trying to migrate from Seam 1.2.x, you will need to read the previous section, <a class="xref" href="Migration.html#MigrationFrom12">Section 2.1, “Migrating from Seam 1.2.x to Seam 2.0”</a>, before following any steps outlined in this section.
		</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration20.JarChanges">
      ⁠</a>2.2.1. Changes to dependency jar names</h2></div></div></div><div class="para">
				Refer to <a class="xref" href="Migration.html#seam-included-jars">Table 2.1, “Included JARs”</a> and <a class="xref" href="Migration.html#seam-excluded-jars">Table 2.2, “Removed JARs”</a> for a list of JARs which are included, and other that have been removed from the Seam framework.
			</div><div class="table"><a id="seam-included-jars">
      ⁠</a><p class="title"><strong>Table 2.1. Included JARs</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-14-rows" summary="Included JARs"><colgroup><col/><col/></colgroup><thead><tr><th> File Name </th><th> Description </th></tr></thead><tbody><tr><td> <div class="para">
								<code class="filename">lib/commons-codec.jar</code>
							</div>
							 </td><td> <div class="para">
								Apache Commons codec library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/commons-httpclient.jar</code>
							</div>
							 </td><td> <div class="para">
								Apache Commons HTTP client library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/drools-api.jar</code>
							</div>
							 </td><td> <div class="para">
								Drools API.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/drools-decisiontables.jar</code>
							</div>
							 </td><td> <div class="para">
								Drools decision tables.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/drools-templates.jar</code>
							</div>
							 </td><td> <div class="para">
								Drools templates.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/ecj.jar</code>
							</div>
							 </td><td> <div class="para">
								Eclipse compiler for Java (required for Drools Compiler).
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/ehcache.jar</code>
							</div>
							 </td><td> <div class="para">
								EH Cache (alternative cache provider)
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/emma.jar</code>
							</div>
							 </td><td> <div class="para">
								Emma Code Coverage library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/ant.jar</code>
							</div>
							 </td><td> <div class="para">
								Ant build tool.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/cglib.jar</code>
							</div>
							 </td><td> <div class="para">
								Code generation library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/common.jar</code>
							</div>
							 </td><td> <div class="para">
								Eclipse Common library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/core.jar</code>
							</div>
							 </td><td> <div class="para">
								Eclipse Core compiler.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/darkX.jar</code>
							</div>
							 </td><td> <div class="para">
								Richfaces DarkX skin library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/freemarker.jar</code>
							</div>
							 </td><td> <div class="para">
								Freemarker templating engine.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/glassX.jar</code>
							</div>
							 </td><td> <div class="para">
								Richfaces GlassX skin library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/hibernate-tools.jar</code>
							</div>
							 </td><td> <div class="para">
								Hibernate tools.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/jboss-seam-gen.jar</code>
							</div>
							 </td><td> <div class="para">
								JBoss Seam generator.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/jtidy.jar</code>
							</div>
							 </td><td> <div class="para">
								JTidy library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/laguna.jar</code>
							</div>
							 </td><td> <div class="para">
								Richfaces Laguna skin library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/runtime.jar</code>
							</div>
							 </td><td> <div class="para">
								Eclipse Runtime.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/gen/text.jar</code>
							</div>
							 </td><td> <div class="para">
								Eclipse text library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/guice.jar</code>
							</div>
							 </td><td> <div class="para">
								Google dependency injection framework.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/hibernate-core.jar</code>
							</div>
							 </td><td> <div class="para">
								Hibernate core.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/httpclient.jar</code>
							</div>
							 </td><td> <div class="para">
								Apache HTTP client library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/httpcore.jar</code>
							</div>
							 </td><td> <div class="para">
								Apache HTTP commons library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/itext-rtf.jar</code>
							</div>
							 </td><td> <div class="para">
								IText RTF support for IText library (PDF generation)
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/itext.jar</code>
							</div>
							 </td><td> <div class="para">
								IText library (PDF generation)
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jaxrs-api.jar</code>
							</div>
							 </td><td> <div class="para">
								JAVA Restful API for Web services
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jboss-seam-excel.jar</code>
							</div>
							 </td><td> <div class="para">
								JBoss Seam Excel.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jboss-seam-resteasy.jar</code>
							</div>
							 </td><td> <div class="para">
								JBoss Seam Resteasy.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jboss-transaction-api.jar</code>
							</div>
							 </td><td> <div class="para">
								Java transaction API.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jbosscache-core.jar</code>
							</div>
							 </td><td> <div class="para">
								JBoss Cache provider.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jcip-annotations.jar</code>
							</div>
							 </td><td> <div class="para">
								Java Concurrency In Practice annotations.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jcl-over-slf4j.jar</code>
							</div>
							 </td><td> <div class="para">
								Java Commons Logging bridge over SLF4J library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jettison.jar</code>
							</div>
							 </td><td> <div class="para">
								Jettison provider for processing JSON.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/jxl.jar</code>
							</div>
							 </td><td> <div class="para">
								Exel API library for Java.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/mvel2.jar</code>
							</div>
							 </td><td> <div class="para">
								Expressions Language library.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/nekohtml.jar</code>
							</div>
							 </td><td> <div class="para">
								NekoHTML library for parsing HTML.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/openid4java-nodeps.jar</code>
							</div>
							 </td><td> <div class="para">
								OpenID library for Java.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/resteasy-atom-provider.jar</code>
							</div>
							 </td><td> <div class="para">
								Resteasy Atom provider.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/resteasy-jaxb-provider.jar</code>
							</div>
							 </td><td> <div class="para">
								Resteasy JAXB provider.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/resteasy-jaxrs.jar</code>
							</div>
							 </td><td> <div class="para">
								Resteasy JAXRS API
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/resteasy-jettison-provider.jar</code>
							</div>
							 </td><td> <div class="para">
								Resteasy Jettison provider.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/slf4j-api.jar</code>
							</div>
							 </td><td> <div class="para">
								SLF4J API.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/slf4j-log4j12.jar</code>
							</div>
							 </td><td> <div class="para">
								SLF4J Log4j binding library 1.2.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">lib/testng-jdk15.jar</code>
							</div>
							 </td><td> <div class="para">
								TestNG test framework.
							</div>
							 </td></tr></tbody></table></div></div><div class="para">
				Many of the removed JARs have been excluded for several versions of the Platform. This list is mainly included for historical purposes.
			</div><div class="table"><a id="seam-excluded-jars">
      ⁠</a><p class="title"><strong>Table 2.2. Removed JARs</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="Removed JARs"><colgroup><col/><col/></colgroup><thead><tr><th> JAR </th><th> Reason for Removal </th></tr></thead><tbody><tr><td> <div class="para">
								<code class="filename">activation.jar</code>
							</div>
							 </td><td> <div class="para">
								Activation is bundled with Java 6, so it can be removed from the distribution.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">commons-lang.jar</code>
							</div>
							 </td><td> <div class="para">
								Commons Lang Library is no longer required.
							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">geronimo-jms_1.1_spec.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">geronimo-jtaB_spec-1.0.1.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">hibernate3.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">jboss-cache-jdk50.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">jboss-jmx.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">jboss-system.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">mvel.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr><tr><td> <div class="para">
								<code class="filename">testng.jar</code>
							</div>
							 </td><td> <div class="para">

							</div>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Migration20.Changes">
      ⁠</a>2.2.2. Changes to Components</h2></div></div></div><div class="para"><a id="Migration20.Changes.Testing">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Testing</div>
					<code class="literal">SeamTest</code> now boots Seam at the start of each suite, instead of the start of each class. This improves speed. Check the reference guide if you wish to alter the default.
				</div><div class="para"><a id="Migration20.Changes.DTD">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to DTD and Schema Format</div>
					Document Type Declarations (DTDs) for Seam XML files are no longer supported. XML Schema Declarations (XSDs) should be used for validation instead. Any file that uses Seam 2.0 XSDs should be updated to refer to the Seam 2.1 XSDs instead.
				</div><div class="para"><a id="Migration20.Changes.Exceptions">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Exception Handling</div>
					Caught exceptions are now available in EL as <code class="literal">#{org.jboss.seam.caughtException}</code>. They are no longer available in <code class="literal">#{org.jboss.seam.exception}</code> form.
				</div><div class="para"><a id="Migration20.Changes.EntityConverter">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to EntityConverter Configuration</div>
					You can now configure the entity manager used from the <code class="literal">entity-loader</code> component. For further details, see the documentation.
				</div><div class="para"><a id="Migration20.Changes.HibernateSessions">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes in Managed Hibernate Sessions</div>
					Several aspects of Seam, including the Seam Application Framework, rely upon the existence of a common naming convention between the Seam-managed Persistence Context (JPA) and the Hibernate Session. In versions earlier than Seam 2.1, the name of the managed Hibernate Session was assumed to be <code class="literal">session</code>. Since <code class="literal">session</code> is an overloaded term in Seam and the Java Servlet API, the default has been changed to <code class="literal">hibernateSession</code> to reduce ambiguity. This means that, when you inject or resolve the Hibernate Session, it is much easier to identify the appropriate session.
				</div><div class="para">
				You can use either of these approaches to inject the Hibernate Session:
			</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@In <span xmlns="" class="perl_Keyword">private</span> Session hibernateSession;
</pre><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>@<span xmlns="" class="perl_Function">In</span>(name = <span xmlns="" class="perl_String">"hibernateSession"</span>) <span xmlns="" class="perl_Keyword">private</span> Session session;
</pre><div class="para">
				If your Seam-managed Hibernate Session is still named <code class="literal">session</code>, you can inject the reference explicitly with the <code class="varname"> session </code> property:
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span>&lt;framework:hibernate-entity-home session=<span xmlns="" class="perl_String">"#{session}"</span>.../&gt;
<span xmlns="" class="line">​</span>      &lt;transaction:entity-transaction session=<span xmlns="" class="perl_String">"#{session}"</span>.../&gt;
</pre><div class="para">
				Alternatively, you can override the <code class="literal">getPersistenceContextName()</code> method on any persistence controller in the Seam Application Framework with the following:
			</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getPersistenceContextName</span>() {
<span xmlns="" class="line">​</span><span xmlns="" class="perl_String">"session"</span>;
<span xmlns="" class="line">​</span>}
</pre><div class="para"><a id="Migration20.Changes.Security">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Security</div>
					The configuration for security rules in <code class="filename">components.xml</code> has changed for projects that use rule-based security. Previously, rules were configured as a property of the <code class="literal">identity</code> component:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;security:identity</span><span xmlns="" class="perl_Others"> security-rules=</span><span xmlns="" class="perl_String">"#{securityRules}"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      authenticate-method=</span><span xmlns="" class="perl_String">"#{authenticator.authenticate}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre><div class="para">
				Seam 2.1 uses the <code class="literal">ruleBasedPermissionResolver</code> component for its rule-based permission checks. You must activate this component and register the security rules with it instead of with the <code class="literal">identity</code> component:
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;security:rule-based-permission-resolver</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">      security-rules=</span><span xmlns="" class="perl_String">"#{securityRules}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
</pre><div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition"><div class="para">
					The definition of a <span class="emphasis"><em>permission</em></span> has changed. Prior to Seam 2.1, a permission consisted of three elements:
				</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
							name
						</div></li><li class="listitem"><div class="para">
							action
						</div></li><li class="listitem"><div class="para">
							contextual object (optional)
						</div></li></ul></div><div class="para">
					The <span class="emphasis"><em>name</em></span> would typically be the Seam component's name, entity class, or view ID. The <span class="emphasis"><em>action</em></span> would be the method name, the JSF phase (restore or render), or an assigned term representing the intent of the activity. Optionally, one or more contextual objects can be inserted directly into the working memory to assist in decision-making. Typically, this would be the target of the activity. For example:
				</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>s:<span xmlns="" class="perl_Function">hasPermission</span>('userManager', 'edit', user)</pre><div class="para">
					In Seam 2.1, permissions have been simplified so that they contain two elements:
				</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
							target
						</div></li><li class="listitem"><div class="para">
							action
						</div></li></ul></div><div class="para">
					The <span class="emphasis"><em>target</em></span> replaces the <span class="emphasis"><em>name</em></span> element, becoming the focus of the permission. The <span class="emphasis"><em>action</em></span> still communicates the intent of the activity to be secured. Within the rules file, most checking now revolves around the <span class="emphasis"><em>target</em></span> object. For example:
				</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>s:<span xmlns="" class="perl_Function">hasPermission</span>(user, 'edit')</pre><div class="para">
					This change means that the rules can be applied more broadly, and lets Seam consult a persistent permission resolver (ACL) as well as the rule-based resolver.
				</div><div class="para">
					Additionally, keep in mind that existing rules may behave oddly. This is because, given the following permission check format:
				</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>s:<span xmlns="" class="perl_Function">hasPermission</span>('userManager', 'edit', user)</pre><div class="para">
					Seam transposes the following to apply the new permission format:
				</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>s:<span xmlns="" class="perl_Function">hasPemrission</span>(user, 'edit')</pre><div class="para">
					Read the Security chapter for a complete overview of the new design.
				</div></div></div><div class="para"><a id="Migration20.Changes.Identity">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Identity.isLoggedIn()</div>
					This method will no longer attempt to perform an authentication check if credentials have been set. Instead, it will return <code class="literal">true</code> if the user is currently unauthenticated. To make use of the previous behavior, use <code class="literal">Identity.tryLogin()</code> instead.
				</div><div class="para">
				If you use Seam's token-based <span class="emphasis"><em>Remember-Me</em></span> feature, you must add the following section to <code class="filename">components.xml</code> to ensure that the user is logged in automatically when the application is first accessed:
			</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;event</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"org.jboss.seam.security.notLoggedIn"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;action</span><span xmlns="" class="perl_Others"> execute=</span><span xmlns="" class="perl_String">"#{redirect.captureCurrentView}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;action</span><span xmlns="" class="perl_Others"> execute=</span><span xmlns="" class="perl_String">"#{identity.tryLogin}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/event&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;event</span><span xmlns="" class="perl_Others"> type=</span><span xmlns="" class="perl_String">"org.jboss.seam.security.loginSuccessful"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;action</span><span xmlns="" class="perl_Others"> execute=</span><span xmlns="" class="perl_String">"#{redirect.returnToCapturedView}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/event&gt;</span>
</pre><div class="para"><a id="Migration20.Changes.iText">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to iText (PDF)</div>
					The <code class="literal">documentStore</code> component has been moved from the external <code class="literal">pdf/itext</code> module into Seam itself. Any references to <code class="literal">pdf:document-store</code> in <code class="filename">components.xml</code> should therefore be replaced with <code class="literal">document:document-store</code>. Similarly, if your <code class="filename">web.xml</code> references <code class="literal">org.jboss.seam.pdf.DocumentStoreServlet</code>, you should change the reference to <code class="literal">org.jboss.seam.document.DocumentStoreServlet</code>.
				</div><div class="para"><a id="Migration20.Changes.Clustering">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Clustering</div>
					Seam's <code class="literal">ManagedEntityInterceptor</code> (previously <code class="literal">ManagedEntityIdentityInterceptor</code>) is now disabled by default. If you need the <code class="literal">ManagedEntityInterceptor</code> for clustered conversation failover, you can enable it in <code class="filename">components.xml</code> with the following:
				</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;core:init&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;core:interceptors&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.core.SynchronizationInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.async.AsynchronousInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.ejb.RemoveInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.persistence.HibernateSessionProxyInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.persistence.EntityManagerProxyInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.core.MethodContextInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.core.EventInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.core.ConversationalInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.bpm.BusinessProcessInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.core.ConversationInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.core.BijectionInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.transaction.RollbackInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.transaction.TransactionInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.webservice.WSSecurityInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.security.SecurityInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;value&gt;</span>org.jboss.seam.persistence.ManagedEntityInterceptor<span xmlns="" class="perl_Keyword">&lt;/value&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/core:interceptors&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/core:init&gt;</span>
</pre><div class="para"><a id="Migration20.Changes.Async">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Asynchronous Exception Handling</div>
					All asynchronous invocations are now wrapped by exception handling. By default, any exceptions that propagate out of an asynchronous call are caught and logged at the error level. You will find further information in <a class="xref" href="jms.html">Chapter 21, <em>Asynchronicity and messaging</em></a>.
				</div><div class="para"><a id="Migration20.Changes.Redeploy">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Redeploy Events</div>
					The <code class="literal">org.jboss.seam.postInitialization</code> event is no longer called upon redeployment. <code class="literal">org.jboss.seam.postReInitialization</code> is called instead.
				</div><div class="para"><a id="Migration20.Changes.Cache">
      ⁠</a><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Cache Support</div>
					Cache support in Seam has been rewritten to support JBoss Cache 3.2, JBoss Cache 2 and Ehcache. Further information is available in <a class="xref" href="cache.html">Chapter 22, <em>Caching</em></a>.
				</div><div class="para">
				The <code class="literal"> &lt;s:cache /&gt; </code> has not changed, but the <code class="literal">pojoCache</code> component can no longer be injected. 
			</div><div class="para">
				The <code class="literal">CacheProvider</code> provides a Map-like interface. The <code class="literal">getDelegate()</code> method can then be used to retrieve the underlying cache.
			</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to Maven Dependencies</div>
					The provided platform is now JBoss Enterprise Application Platform 5.1.0, so <code class="literal">javaassist:javaassist</code> and <code class="literal">dom4j:dom4j</code> are now marked as <span class="emphasis"><em>provided</em></span>.
				</div><div class="para"><div xmlns:d="http://docbook.org/ns/docbook" class="title">Changes to the Seam Application Framework</div>
					A number of properties now expect value expressions:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						<code class="literal">entityHome.createdMessage</code>
					</div></li><li class="listitem"><div class="para">
						<code class="literal">entityHome.updatedMessage</code>
					</div></li><li class="listitem"><div class="para">
						<code class="literal">entityHome.deletedMessage</code>
					</div></li><li class="listitem"><div class="para">
						<code class="literal">entityQuery.restrictions</code>
					</div></li></ul></div><div class="para">
				If you configure these objects with <code class="filename">components.xml</code>, no changes are necessary. If you configure the objects with JavaScript, you must create a value expression as follows:
			</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">public</span> ValueExpression <span xmlns="" class="perl_Function">getCreatedMessage</span>() {
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Function">createValueExpression</span>(<span xmlns="" class="perl_String">"New person #{person.firstName} </span>
<span xmlns="" class="line">​</span>        #{person.<span xmlns="" class="perl_Function">lastName</span>} created<span xmlns="" class="perl_String">");</span>
<span xmlns="" class="line">​</span>        }
</pre></div></div></div></body></html>