<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 11. JSF form validation in Seam</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="validation">
      ⁠</a>Chapter 11. JSF form validation in Seam</h1></div></div></div><div class="para">
		In plain JSF, validation is defined in the view:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:messages/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>    Country:
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.country}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;my:validateCountry/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>    Zip code:
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;my:validateZip/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:commandButton/&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre><div class="para">
		In practice, this approach usually violates DRY, since most "validation" actually enforces constraints that are part of the data model, and exist all the way down to the database schema definition. Seam provides support for model-based constraints defined with Hibernate Validator.
	</div><div class="para">
		We will begin by defining our constraints, on our <code class="literal">Location</code> class:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Location {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String country;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String zip;
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>    @NotNull
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">Length</span>(max=<span xmlns="" class="perl_Float">30</span>)
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getCountry</span>() { <span xmlns="" class="perl_Keyword">return</span> country; }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setCountry</span>(String c) { country = c; }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @NotNull
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">Length</span>(max=<span xmlns="" class="perl_Float">6</span>)
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">Pattern</span>(<span xmlns="" class="perl_String">"^\d*$"</span>)
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getZip</span>() { <span xmlns="" class="perl_Keyword">return</span> zip; }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setZip</span>(String z) { zip = z; }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		In practice, it may be more elegant to use custom constraints rather than those built into Hibernate Validator:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Location {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String country;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String zip;
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>    @NotNull
<span xmlns="" class="line">​</span>    @Country
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getCountry</span>() { <span xmlns="" class="perl_Keyword">return</span> country; }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setCountry</span>(String c) { country = c; }
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @NotNull
<span xmlns="" class="line">​</span>    @ZipCode
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getZip</span>() { <span xmlns="" class="perl_Keyword">return</span> zip; }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setZip</span>(String z) { zip = z; }
<span xmlns="" class="line">​</span>}
</pre><div class="para">
		Whichever method we choose, we no longer need specify the validation type to be used in the JSF page. Instead, we use <code class="literal">&lt;s:validate&gt;</code> to validate against the constraint defined on the model object.
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:messages/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>    Country:
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.country}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;s:validate/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>    Zip code:
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;s:validate/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:commandButton/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			Specifying <code class="literal">@NotNull</code> on the model does <span class="emphasis"><em>not</em></span> eliminate the need for <code class="literal">required="true"</code> to appear on the control. This is a limitation of the JSF validation architecture.
		</div></div></div><div class="para">
		This approach defines constraints on the model, and presents constraint violations in the view.
	</div><div class="para">
		The design is better, but not much less verbose than our initial design. Now, we will use <code class="literal">&lt;s:validateAll&gt;</code>:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:messages/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;s:validateAll&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>    Country:
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.country}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>    Zip code:
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:commandButton/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/s:validateAll&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span>
</pre><div class="para">
		This tag adds an <code class="literal">&lt;s:validate&gt;</code> to every input in the form. In a large form, this can save a lot of typing.
	</div><div class="para">
		Next, we need to display feedback to the user when validation fails. Currently, all messages are displayed at the top of the form. To correlate the message with an input, you must define a label by using the standard <code class="literal">label</code> attribute on the input component.
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Others"> label=</span><span xmlns="" class="perl_String">"Zip:"</span><span xmlns="" class="perl_Keyword">&gt;</span> 
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;s:validate/&gt;</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span></pre><div class="para">
		Inject this value into the message string with the placeholder {0} (the first and only parameter passed to a JSF message for a Hibernate Validator restriction). See the internationalization section for more information on where to define these messages.
	</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
			validator.length={0} length must be between {min} and {max}
		</div></div></div><div class="para">
		We would prefer the message to be displayed beside the field with the error, highlight the field and label, and display an image next to the field. In plain JSF, only the first is possible. We also want to display a colored asterisk beside the label of each required form field.
	</div><div class="para">
		This is a lot of functionality for each field. We do not want to specify highlighting and the layout of the image, message, and input field for every field on the form, so we specify the layout in a facelets template:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;ui:composition</span><span xmlns="" class="perl_Others"> xmlns=</span><span xmlns="" class="perl_String">"http://www.w3.org/1999/xhtml"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                xmlns:ui=</span><span xmlns="" class="perl_String">"http://java.sun.com/jsf/facelets"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                xmlns:h=</span><span xmlns="" class="perl_String">"http://java.sun.com/jsf/html"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                xmlns:f=</span><span xmlns="" class="perl_String">"http://java.sun.com/jsf/core"</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                xmlns:s=</span><span xmlns="" class="perl_String">"http://jboss.com/products/seam/taglib"</span><span xmlns="" class="perl_Keyword">&gt;</span>           
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;div&gt;</span>
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:label</span><span xmlns="" class="perl_Others"> styleClass=</span><span xmlns="" class="perl_String">"#{invalid?'error':''}"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;ui:insert</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;s:span</span><span xmlns="" class="perl_Others"> styleClass=</span><span xmlns="" class="perl_String">"required"</span><span xmlns="" class="perl_Others"> rendered=</span><span xmlns="" class="perl_String">"#{required}"</span><span xmlns="" class="perl_Keyword">&gt;</span>*<span xmlns="" class="perl_Keyword">&lt;/s:span&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:label&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;span</span><span xmlns="" class="perl_Others"> class=</span><span xmlns="" class="perl_String">"#{invalid?'error':''}"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;h:graphicImage</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"/img/error.gif"</span><span xmlns="" class="perl_Others"> rendered=</span><span xmlns="" class="perl_String">"#{invalid}"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;s:validateAll&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;ui:insert/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/s:validateAll&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/span&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:message</span><span xmlns="" class="perl_Others"> styleClass=</span><span xmlns="" class="perl_String">"error"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;/div&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/ui:composition&gt;</span>
</pre><div class="para">
		We can include this template for each of our form fields by using <code class="literal">&lt;s:decorate&gt;</code>:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:messages</span><span xmlns="" class="perl_Others"> globalOnly=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> template=</span><span xmlns="" class="perl_String">"edit.xhtml"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;ui:define</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">&gt;</span>Country:<span xmlns="" class="perl_Keyword">&lt;/ui:define&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.country}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> template=</span><span xmlns="" class="perl_String">"edit.xhtml"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;ui:define</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">&gt;</span>Zip code:<span xmlns="" class="perl_Keyword">&lt;/ui:define&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:commandButton/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre><div class="para">
		Finally, we can use RichFaces Ajax to display validation messages while the user navigates around the form:
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:messages</span><span xmlns="" class="perl_Others"> globalOnly=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"countryDecoration"</span><span xmlns="" class="perl_Others"> template=</span><span xmlns="" class="perl_String">"edit.xhtml"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;ui:define</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">&gt;</span>Country:<span xmlns="" class="perl_Keyword">&lt;/ui:define&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.country}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;a:support</span><span xmlns="" class="perl_Others"> event=</span><span xmlns="" class="perl_String">"onblur"</span><span xmlns="" class="perl_Others"> reRender=</span><span xmlns="" class="perl_String">"countryDecoration"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                       bypassUpdates=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"zipDecoration"</span><span xmlns="" class="perl_Others"> template=</span><span xmlns="" class="perl_String">"edit.xhtml"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;ui:define</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">&gt;</span>Zip code:<span xmlns="" class="perl_Keyword">&lt;/ui:define&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">&lt;a:support</span><span xmlns="" class="perl_Others"> event=</span><span xmlns="" class="perl_String">"onblur"</span><span xmlns="" class="perl_Others"> reRender=</span><span xmlns="" class="perl_String">"zipDecoration"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                       bypassUpdates=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:commandButton/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre><div class="para">
		Stylistically, it is better to define explicit IDs for important page controls, particularly if you want automated UI testing. If explicit IDs are not provided, JSF will generate its own — but they will not remain static if anything on the page is changed.
	</div><pre class="programlisting XML"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;h:form</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"form"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;h:messages</span><span xmlns="" class="perl_Others"> globalOnly=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"countryDecoration"</span><span xmlns="" class="perl_Others"> template=</span><span xmlns="" class="perl_String">"edit.xhtml"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;ui:define</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">&gt;</span>Country:<span xmlns="" class="perl_Keyword">&lt;/ui:define&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"country"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.country}"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                   required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;a:support</span><span xmlns="" class="perl_Others"> event=</span><span xmlns="" class="perl_String">"onblur"</span><span xmlns="" class="perl_Others"> reRender=</span><span xmlns="" class="perl_String">"countryDecoration"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                   bypassUpdates=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span>    
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;s:decorate</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"zipDecoration"</span><span xmlns="" class="perl_Others"> template=</span><span xmlns="" class="perl_String">"edit.xhtml"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;ui:define</span><span xmlns="" class="perl_Others"> name=</span><span xmlns="" class="perl_String">"label"</span><span xmlns="" class="perl_Keyword">&gt;</span>Zip code:<span xmlns="" class="perl_Keyword">&lt;/ui:define&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;h:inputText</span><span xmlns="" class="perl_Others"> id=</span><span xmlns="" class="perl_String">"zip"</span><span xmlns="" class="perl_Others"> value=</span><span xmlns="" class="perl_String">"#{location.zip}"</span><span xmlns="" class="perl_Others"> required=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;a:support</span><span xmlns="" class="perl_Others"> event=</span><span xmlns="" class="perl_String">"onblur"</span><span xmlns="" class="perl_Others"> reRender=</span><span xmlns="" class="perl_String">"zipDecoration"</span> 
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Others">                   bypassUpdates=</span><span xmlns="" class="perl_String">"true"</span><span xmlns="" class="perl_Keyword">/&gt;</span>
<span xmlns="" class="line">​</span>      <span xmlns="" class="perl_Keyword">&lt;/h:inputText&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/s:decorate&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;h:commandButton/&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/h:form&gt;</span></pre><div class="para">
		If you want to specify a different message to be displayed when validation fails, you can use the Seam message bundle with the Hibernate Validator:
	</div><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> Location {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String name;
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">private</span> String zip;
<span xmlns="" class="line">​</span>  
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// Getters and setters for name</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @NotNull
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">Length</span>(max=<span xmlns="" class="perl_Float">6</span>)
<span xmlns="" class="line">​</span>    @<span xmlns="" class="perl_Function">ZipCode</span>(message=<span xmlns="" class="perl_String">"#{messages['location.zipCode.invalid']}"</span>)
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> String <span xmlns="" class="perl_Function">getZip</span>() { <span xmlns="" class="perl_Keyword">return</span> zip; }
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">setZip</span>(String z) { zip = z; }
<span xmlns="" class="line">​</span>}
</pre><pre class="screen"> location.zipCode.invalid = The zip code is not valid for #{location.name}</pre></div></body></html>